import{s as _e,c as je,e as Be,d as Le,f as re,i as N,r as C,F as le,k as p,P as Oe,u as pe,g as Je,a as Qe,x as kt,ao as xt,o as q,b as He,t as Lt,j as Ie,h as Kt,m as Rt,a2 as ve,_ as Ce,$ as nt,al as Ge,y as Ye,as as j,D as ae,Q as Se,p as Me,R as Ee,am as $t,E as fn,O as en,Y as cn,J as An,at as qi,I as ji,S as tn,W as ke,l as We,n as we,a1 as Nt,v as nl,a0 as il,ak as ol,an as ll,au as sl,w as jn,Z as pn}from"./scheduler.xR-uXgLO.js";import{S as me,i as be,t as A,a as Z,c as ue,b as ge,m as fe,d as ce,g as Ae,e as Xe}from"./index.BpaDVXPB.js";import{g as ft,a as Vt}from"./spread.CgU5AtxT.js";import{w as ne,r as $e,d as It}from"./index.iaz6iIjv.js";import{e as _t,u as dn,o as hn}from"./each.BfH-wj2E.js";import{g as rl}from"./globals.D0QH3NT1.js";import{s as xe,k as pi,l as Xn,T as Sn,m as En,t as al}from"./transform.B54KPHx3.js";function ul(t){let e;for(;e=t.sourceEvent;)t=e;return t}function et(t,e){if(t=ul(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}}return[t.pageX,t.pageY]}const fl={passive:!1},Wt={capture:!0,passive:!1};function Cn(t){t.stopImmediatePropagation()}function vt(t){t.preventDefault(),t.stopImmediatePropagation()}function Ji(t){var e=t.document.documentElement,n=xe(t).on("dragstart.drag",vt,Wt);"onselectstart"in e?n.on("selectstart.drag",vt,Wt):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Qi(t,e){var n=t.document.documentElement,i=xe(t).on("dragstart.drag",null);e&&(i.on("click.drag",vt,Wt),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const qt=t=>()=>t;function In(t,{sourceEvent:e,subject:n,target:i,identifier:o,active:s,x:l,y:r,dx:a,dy:u,dispatch:f}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:r,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:f}})}In.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function cl(t){return!t.ctrlKey&&!t.button}function dl(){return this.parentNode}function hl(t,e){return e??{x:t.x,y:t.y}}function gl(){return navigator.maxTouchPoints||"ontouchstart"in this}function xi(){var t=cl,e=dl,n=hl,i=gl,o={},s=pi("start","drag","end"),l=0,r,a,u,f,d=0;function h(M){M.on("mousedown.drag",c).filter(i).on("touchstart.drag",y).on("touchmove.drag",g,fl).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(M,X){if(!(f||!t.call(this,M,X))){var K=w(this,e.call(this,M,X),M,X,"mouse");K&&(xe(M.view).on("mousemove.drag",b,Wt).on("mouseup.drag",m,Wt),Ji(M.view),Cn(M),u=!1,r=M.clientX,a=M.clientY,K("start",M))}}function b(M){if(vt(M),!u){var X=M.clientX-r,K=M.clientY-a;u=X*X+K*K>d}o.mouse("drag",M)}function m(M){xe(M.view).on("mousemove.drag mouseup.drag",null),Qi(M.view,u),vt(M),o.mouse("end",M)}function y(M,X){if(t.call(this,M,X)){var K=M.changedTouches,T=e.call(this,M,X),I=K.length,H,B;for(H=0;H<I;++H)(B=w(this,T,M,X,K[H].identifier,K[H]))&&(Cn(M),B("start",M,K[H]))}}function g(M){var X=M.changedTouches,K=X.length,T,I;for(T=0;T<K;++T)(I=o[X[T].identifier])&&(vt(M),I("drag",M,X[T]))}function E(M){var X=M.changedTouches,K=X.length,T,I;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),T=0;T<K;++T)(I=o[X[T].identifier])&&(Cn(M),I("end",M,X[T]))}function w(M,X,K,T,I,H){var B=s.copy(),F=et(H||K,X),J,W,_;if((_=n.call(M,new In("beforestart",{sourceEvent:K,target:h,identifier:I,active:l,x:F[0],y:F[1],dx:0,dy:0,dispatch:B}),T))!=null)return J=_.x-F[0]||0,W=_.y-F[1]||0,function k(S,P,D){var O=F,Y;switch(S){case"start":o[I]=k,Y=l++;break;case"end":delete o[I],--l;case"drag":F=et(D||P,X),Y=l;break}B.call(S,M,new In(S,{sourceEvent:P,subject:_,target:h,identifier:I,active:Y,x:F[0]+J,y:F[1]+W,dx:F[0]-O[0],dy:F[1]-O[1],dispatch:B}),T)}}return h.filter=function(M){return arguments.length?(t=typeof M=="function"?M:qt(!!M),h):t},h.container=function(M){return arguments.length?(e=typeof M=="function"?M:qt(M),h):e},h.subject=function(M){return arguments.length?(n=typeof M=="function"?M:qt(M),h):n},h.touchable=function(M){return arguments.length?(i=typeof M=="function"?M:qt(!!M),h):i},h.on=function(){var M=s.on.apply(s,arguments);return M===s?h:M},h.clickDistance=function(M){return arguments.length?(d=(M=+M)*M,h):Math.sqrt(d)},h}var ml=1e-12;function Jn(t){return((t=Math.exp(t))+1/t)/2}function bl(t){return((t=Math.exp(t))-1/t)/2}function yl(t){return((t=Math.exp(2*t))-1)/(t+1)}const _l=function t(e,n,i){function o(s,l){var r=s[0],a=s[1],u=s[2],f=l[0],d=l[1],h=l[2],c=f-r,b=d-a,m=c*c+b*b,y,g;if(m<ml)g=Math.log(h/u)/e,y=function(T){return[r+T*c,a+T*b,u*Math.exp(e*T*g)]};else{var E=Math.sqrt(m),w=(h*h-u*u+i*m)/(2*u*n*E),M=(h*h-u*u-i*m)/(2*h*n*E),X=Math.log(Math.sqrt(w*w+1)-w),K=Math.log(Math.sqrt(M*M+1)-M);g=(K-X)/e,y=function(T){var I=T*g,H=Jn(X),B=u/(n*E)*(H*yl(e*I+X)-bl(X));return[r+B*c,a+B*b,u*H/Jn(e*I+X)]}}return y.duration=g*1e3*e/Math.SQRT2,y}return o.rho=function(s){var l=Math.max(.001,+s),r=l*l,a=r*r;return t(l,r,a)},o}(Math.SQRT2,2,4),jt=t=>()=>t;function kl(t,{sourceEvent:e,target:n,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function Mn(t){t.stopImmediatePropagation()}function At(t){t.preventDefault(),t.stopImmediatePropagation()}function wl(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Sl(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Qn(){return this.__zoom||Xn}function El(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Cl(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ml(t,e,n){var i=t.invertX(e[0][0])-n[0][0],o=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],l=t.invertY(e[1][1])-n[1][1];return t.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),l>s?(s+l)/2:Math.min(0,s)||Math.max(0,l))}function $i(){var t=wl,e=Sl,n=Ml,i=El,o=Cl,s=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],r=250,a=_l,u=pi("start","zoom","end"),f,d,h,c=500,b=150,m=0,y=10;function g(_){_.property("__zoom",Qn).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",H).on("dblclick.zoom",B).filter(o).on("touchstart.zoom",F).on("touchmove.zoom",J).on("touchend.zoom touchcancel.zoom",W).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(_,k,S,P){var D=_.selection?_.selection():_;D.property("__zoom",Qn),_!==D?X(_,k,S,P):D.interrupt().each(function(){K(this,arguments).event(P).start().zoom(null,typeof k=="function"?k.apply(this,arguments):k).end()})},g.scaleBy=function(_,k,S,P){g.scaleTo(_,function(){var D=this.__zoom.k,O=typeof k=="function"?k.apply(this,arguments):k;return D*O},S,P)},g.scaleTo=function(_,k,S,P){g.transform(_,function(){var D=e.apply(this,arguments),O=this.__zoom,Y=S==null?M(D):typeof S=="function"?S.apply(this,arguments):S,U=O.invert(Y),G=typeof k=="function"?k.apply(this,arguments):k;return n(w(E(O,G),Y,U),D,l)},S,P)},g.translateBy=function(_,k,S,P){g.transform(_,function(){return n(this.__zoom.translate(typeof k=="function"?k.apply(this,arguments):k,typeof S=="function"?S.apply(this,arguments):S),e.apply(this,arguments),l)},null,P)},g.translateTo=function(_,k,S,P,D){g.transform(_,function(){var O=e.apply(this,arguments),Y=this.__zoom,U=P==null?M(O):typeof P=="function"?P.apply(this,arguments):P;return n(Xn.translate(U[0],U[1]).scale(Y.k).translate(typeof k=="function"?-k.apply(this,arguments):-k,typeof S=="function"?-S.apply(this,arguments):-S),O,l)},P,D)};function E(_,k){return k=Math.max(s[0],Math.min(s[1],k)),k===_.k?_:new Sn(k,_.x,_.y)}function w(_,k,S){var P=k[0]-S[0]*_.k,D=k[1]-S[1]*_.k;return P===_.x&&D===_.y?_:new Sn(_.k,P,D)}function M(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function X(_,k,S,P){_.on("start.zoom",function(){K(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){K(this,arguments).event(P).end()}).tween("zoom",function(){var D=this,O=arguments,Y=K(D,O).event(P),U=e.apply(D,O),G=S==null?M(U):typeof S=="function"?S.apply(D,O):S,V=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),$=D.__zoom,ee=typeof k=="function"?k.apply(D,O):k,ie=a($.invert(G).concat(V/$.k),ee.invert(G).concat(V/ee.k));return function(v){if(v===1)v=ee;else{var te=ie(v),oe=V/te[2];v=new Sn(oe,G[0]-te[0]*oe,G[1]-te[1]*oe)}Y.zoom(null,v)}})}function K(_,k,S){return!S&&_.__zooming||new T(_,k)}function T(_,k){this.that=_,this.args=k,this.active=0,this.sourceEvent=null,this.extent=e.apply(_,k),this.taps=0}T.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,k){return this.mouse&&_!=="mouse"&&(this.mouse[1]=k.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=k.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=k.invert(this.touch1[0])),this.that.__zoom=k,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var k=xe(this.that).datum();u.call(_,this.that,new kl(_,{sourceEvent:this.sourceEvent,target:g,type:_,transform:this.that.__zoom,dispatch:u}),k)}};function I(_,...k){if(!t.apply(this,arguments))return;var S=K(this,k).event(_),P=this.__zoom,D=Math.max(s[0],Math.min(s[1],P.k*Math.pow(2,i.apply(this,arguments)))),O=et(_);if(S.wheel)(S.mouse[0][0]!==O[0]||S.mouse[0][1]!==O[1])&&(S.mouse[1]=P.invert(S.mouse[0]=O)),clearTimeout(S.wheel);else{if(P.k===D)return;S.mouse=[O,P.invert(O)],En(this),S.start()}At(_),S.wheel=setTimeout(Y,b),S.zoom("mouse",n(w(E(P,D),S.mouse[0],S.mouse[1]),S.extent,l));function Y(){S.wheel=null,S.end()}}function H(_,...k){if(h||!t.apply(this,arguments))return;var S=_.currentTarget,P=K(this,k,!0).event(_),D=xe(_.view).on("mousemove.zoom",G,!0).on("mouseup.zoom",V,!0),O=et(_,S),Y=_.clientX,U=_.clientY;Ji(_.view),Mn(_),P.mouse=[O,this.__zoom.invert(O)],En(this),P.start();function G($){if(At($),!P.moved){var ee=$.clientX-Y,ie=$.clientY-U;P.moved=ee*ee+ie*ie>m}P.event($).zoom("mouse",n(w(P.that.__zoom,P.mouse[0]=et($,S),P.mouse[1]),P.extent,l))}function V($){D.on("mousemove.zoom mouseup.zoom",null),Qi($.view,P.moved),At($),P.event($).end()}}function B(_,...k){if(t.apply(this,arguments)){var S=this.__zoom,P=et(_.changedTouches?_.changedTouches[0]:_,this),D=S.invert(P),O=S.k*(_.shiftKey?.5:2),Y=n(w(E(S,O),P,D),e.apply(this,k),l);At(_),r>0?xe(this).transition().duration(r).call(X,Y,P,_):xe(this).call(g.transform,Y,P,_)}}function F(_,...k){if(t.apply(this,arguments)){var S=_.touches,P=S.length,D=K(this,k,_.changedTouches.length===P).event(_),O,Y,U,G;for(Mn(_),Y=0;Y<P;++Y)U=S[Y],G=et(U,this),G=[G,this.__zoom.invert(G),U.identifier],D.touch0?!D.touch1&&D.touch0[2]!==G[2]&&(D.touch1=G,D.taps=0):(D.touch0=G,O=!0,D.taps=1+!!f);f&&(f=clearTimeout(f)),O&&(D.taps<2&&(d=G[0],f=setTimeout(function(){f=null},c)),En(this),D.start())}}function J(_,...k){if(this.__zooming){var S=K(this,k).event(_),P=_.changedTouches,D=P.length,O,Y,U,G;for(At(_),O=0;O<D;++O)Y=P[O],U=et(Y,this),S.touch0&&S.touch0[2]===Y.identifier?S.touch0[0]=U:S.touch1&&S.touch1[2]===Y.identifier&&(S.touch1[0]=U);if(Y=S.that.__zoom,S.touch1){var V=S.touch0[0],$=S.touch0[1],ee=S.touch1[0],ie=S.touch1[1],v=(v=ee[0]-V[0])*v+(v=ee[1]-V[1])*v,te=(te=ie[0]-$[0])*te+(te=ie[1]-$[1])*te;Y=E(Y,Math.sqrt(v/te)),U=[(V[0]+ee[0])/2,(V[1]+ee[1])/2],G=[($[0]+ie[0])/2,($[1]+ie[1])/2]}else if(S.touch0)U=S.touch0[0],G=S.touch0[1];else return;S.zoom("touch",n(w(Y,U,G),S.extent,l))}}function W(_,...k){if(this.__zooming){var S=K(this,k).event(_),P=_.changedTouches,D=P.length,O,Y;for(Mn(_),h&&clearTimeout(h),h=setTimeout(function(){h=null},c),O=0;O<D;++O)Y=P[O],S.touch0&&S.touch0[2]===Y.identifier?delete S.touch0:S.touch1&&S.touch1[2]===Y.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(Y=et(Y,this),Math.hypot(d[0]-Y[0],d[1]-Y[1])<y)){var U=xe(this).on("dblclick.zoom");U&&U.apply(this,arguments)}}}return g.wheelDelta=function(_){return arguments.length?(i=typeof _=="function"?_:jt(+_),g):i},g.filter=function(_){return arguments.length?(t=typeof _=="function"?_:jt(!!_),g):t},g.touchable=function(_){return arguments.length?(o=typeof _=="function"?_:jt(!!_),g):o},g.extent=function(_){return arguments.length?(e=typeof _=="function"?_:jt([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),g):e},g.scaleExtent=function(_){return arguments.length?(s[0]=+_[0],s[1]=+_[1],g):[s[0],s[1]]},g.translateExtent=function(_){return arguments.length?(l[0][0]=+_[0][0],l[1][0]=+_[1][0],l[0][1]=+_[0][1],l[1][1]=+_[1][1],g):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},g.constrain=function(_){return arguments.length?(n=_,g):n},g.duration=function(_){return arguments.length?(r=+_,g):r},g.interpolate=function(_){return arguments.length?(a=_,g):a},g.on=function(){var _=u.on.apply(u,arguments);return _===u?g:_},g.clickDistance=function(_){return arguments.length?(m=(_=+_)*_,g):Math.sqrt(m)},g.tapDistance=function(_){return arguments.length?(y=+_,g):y},g}function ze(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=ze(t[n]))!==""&&(e+=(e&&" ")+i);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}const Zt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:i}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`},xn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var Ct;(function(t){t.Strict="strict",t.Loose="loose"})(Ct||(Ct={}));var lt;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(lt||(lt={}));var nn;(function(t){t.Partial="partial",t.Full="full"})(nn||(nn={}));const vn={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Tt;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Tt||(Tt={}));var on;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(on||(on={}));var he;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(he||(he={}));const $n={[he.Left]:he.Right,[he.Right]:he.Left,[he.Top]:he.Bottom,[he.Bottom]:he.Top};function zl(t,e){if(!t&&!e)return!0;if(!t||!e||t.size!==e.size)return!1;if(!t.size&&!e.size)return!0;for(const n of t.keys())if(!e.has(n))return!1;return!0}function ei(t,e,n){if(!n)return;const i=[];t.forEach((o,s)=>{e!=null&&e.has(s)||i.push(o)}),i.length&&n(i)}function ti(t){return t===null?null:t?"valid":"invalid"}const Pl=t=>"id"in t&&"source"in t&&"target"in t,zu=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),eo=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),Ft=(t,e=[0,0])=>{const{width:n,height:i}=bn(t),o=t.origin??e,s=n*o[0],l=i*o[1];return{x:t.position.x-s,y:t.position.y-l}},Gt=(t,e={})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(i=>{if(e.filter===void 0||e.filter(i)){const o=Vn(i);n=Wn(n,o)}}),Bn(n)},to=(t,e,[n,i,o]=[0,0,1],s=!1,l=!1)=>{const r={...mn(e,[n,i,o]),width:e.width/o,height:e.height/o},a=[];for(const u of t.values()){const{measured:f,selectable:d=!0,hidden:h=!1}=u;if(l&&!d||h)continue;const c=f.width??u.width??u.initialWidth??null,b=f.height??u.height??u.initialHeight??null,m=Ln(r,gn(u)),y=(c??0)*(b??0),g=s&&m>0;(!u.internals.handleBounds||g||m>=y||u.dragging)&&a.push(u)}return a},Tn=(t,e)=>{const n=new Set;return t.forEach(i=>{n.add(i.id)}),e.filter(i=>n.has(i.source)||n.has(i.target))};function ni(t,e){const n=new Map,i=e!=null&&e.nodes?new Set(e.nodes.map(o=>o.id)):null;return t.forEach(o=>{o.measured.width&&o.measured.height&&((e==null?void 0:e.includeHiddenNodes)||!o.hidden)&&(!i||i.has(o.id))&&n.set(o.id,o)}),n}async function ii({nodes:t,width:e,height:n,panZoom:i,minZoom:o,maxZoom:s},l){if(t.size===0)return Promise.resolve(!1);const r=Gt(t),a=oo(r,e,n,(l==null?void 0:l.minZoom)??o,(l==null?void 0:l.maxZoom)??s,(l==null?void 0:l.padding)??.1);return await i.setViewport(a,{duration:l==null?void 0:l.duration}),Promise.resolve(!0)}function Ol(t,e){var n,i;return!e||e==="parent"?e:[e[0],[e[1][0]-(((n=t.measured)==null?void 0:n.width)??0),e[1][1]-(((i=t.measured)==null?void 0:i.height)??0)]]}function Dl({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:o,onError:s}){const l=n.get(t),r=l.parentId?n.get(l.parentId):void 0,{x:a,y:u}=r?r.internals.positionAbsolute:{x:0,y:0},f=l.origin??i;let d=Ol(l,l.extent||o);if(l.extent==="parent"&&!l.expandParent)if(!r)s==null||s("005",Zt.error005());else{const c=l.measured.width,b=l.measured.height,m=r.measured.width,y=r.measured.height;c&&b&&m&&y&&(d=[[a,u],[a+m-c,u+y-b]])}else r&&li(l.extent)&&(d=[[l.extent[0][0]+a,l.extent[0][1]+u],[l.extent[1][0]+a,l.extent[1][1]+u]]);const h=li(d)?Il(e,d):e;return{position:{x:h.x-a+l.measured.width*f[0],y:h.y-u+l.measured.height*f[1]},positionAbsolute:h}}async function Hl({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:i,onBeforeDelete:o}){const s=new Set(t.map(h=>h.id)),l=[];for(const h of n){if(h.deletable===!1)continue;const c=s.has(h.id),b=!c&&h.parentId&&l.find(m=>m.id===h.parentId);(c||b)&&l.push(h)}const r=new Set(e.map(h=>h.id)),a=i.filter(h=>h.deletable!==!1),f=Tn(l,a);for(const h of a)r.has(h.id)&&!f.find(b=>b.id===h.id)&&f.push(h);if(!o)return{edges:f,nodes:l};const d=await o({nodes:l,edges:f});return typeof d=="boolean"?d?{edges:f,nodes:l}:{edges:[],nodes:[]}:d}const Yt=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Il=(t={x:0,y:0},e)=>({x:Yt(t.x,e[0][0],e[1][0]),y:Yt(t.y,e[0][1],e[1][1])}),oi=(t,e,n)=>t<e?Yt(Math.abs(t-e),1,e)/e:t>n?-Yt(Math.abs(t-n),1,e)/e:0,no=(t,e,n=15,i=40)=>{const o=oi(t.x,i,e.width-i)*n,s=oi(t.y,i,e.height-i)*n;return[o,s]},Wn=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Nn=({x:t,y:e,width:n,height:i})=>({x:t,y:e,x2:t+n,y2:e+i}),Bn=({x:t,y:e,x2:n,y2:i})=>({x:t,y:e,width:n-t,height:i-e}),gn=(t,e=[0,0])=>{var o,s;const{x:n,y:i}=eo(t)?t.internals.positionAbsolute:Ft(t,e);return{x:n,y:i,width:((o=t.measured)==null?void 0:o.width)??t.width??t.initialWidth??0,height:((s=t.measured)==null?void 0:s.height)??t.height??t.initialHeight??0}},Vn=(t,e=[0,0])=>{var o,s;const{x:n,y:i}=eo(t)?t.internals.positionAbsolute:Ft(t,e);return{x:n,y:i,x2:n+(((o=t.measured)==null?void 0:o.width)??t.width??t.initialWidth??0),y2:i+(((s=t.measured)==null?void 0:s.height)??t.height??t.initialHeight??0)}},io=(t,e)=>Bn(Wn(Nn(t),Nn(e))),Ln=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*i)},Pu=t=>tt(t.width)&&tt(t.height)&&tt(t.x)&&tt(t.y),tt=t=>!isNaN(t)&&isFinite(t),vl=(t,e)=>{},Kn=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),mn=({x:t,y:e},[n,i,o],s=!1,l=[1,1])=>{const r={x:(t-n)/o,y:(e-i)/o};return s?Kn(r,l):r},Tl=({x:t,y:e},[n,i,o])=>({x:t*o+n,y:e*o+i}),oo=(t,e,n,i,o,s)=>{const l=e/(t.width*(1+s)),r=n/(t.height*(1+s)),a=Math.min(l,r),u=Yt(a,i,o),f=t.x+t.width/2,d=t.y+t.height/2,h=e/2-f*u,c=n/2-d*u;return{x:h,y:c,zoom:u}},ln=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0};function li(t){return t!==void 0&&t!=="parent"}function bn(t){var e,n;return{width:((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth??0,height:((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight??0}}function sn(t){var e,n;return(((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth)!==void 0&&(((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight)!==void 0}function Ou(t,e={width:0,height:0},n,i,o){let s=n;const l={...t};for(;s;){const r=i.get(s);if(s=r==null?void 0:r.parentId,r){const a=r.origin||o;l.x+=r.internals.positionAbsolute.x-(e.width??0)*a[0],l.y+=r.internals.positionAbsolute.y-(e.height??0)*a[1]}}return l}function Xt(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:i}){const{x:o,y:s}=ut(t),l=mn({x:o,y:s},i),{x:r,y:a}=n?Kn(l,e):l;return{xSnapped:r,ySnapped:a,...l}}const lo=t=>({width:t.offsetWidth,height:t.offsetHeight}),Nl=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},Vl=["INPUT","SELECT","TEXTAREA"];function Yl(t){var i,o;const e=((o=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:o[0])||t.target;return Vl.includes(e==null?void 0:e.nodeName)||(e==null?void 0:e.hasAttribute("contenteditable"))||!!(e!=null&&e.closest(".nokey"))}const so=t=>"clientX"in t,ut=(t,e)=>{var s,l;const n=so(t),i=n?t.clientX:(s=t.touches)==null?void 0:s[0].clientX,o=n?t.clientY:(l=t.touches)==null?void 0:l[0].clientY;return{x:i-((e==null?void 0:e.left)??0),y:o-((e==null?void 0:e.top)??0)}},si=(t,e,n,i,o)=>{const s=e.querySelectorAll(`.${t}`);return!s||!s.length?null:Array.from(s).map(l=>{const r=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),type:t,nodeId:o,position:l.getAttribute("data-handlepos"),x:(r.left-n.left)/i,y:(r.top-n.top)/i,...lo(l)}})};function Al({sourceX:t,sourceY:e,targetX:n,targetY:i,sourceControlX:o,sourceControlY:s,targetControlX:l,targetControlY:r}){const a=t*.125+o*.375+l*.375+n*.125,u=e*.125+s*.375+r*.375+i*.125,f=Math.abs(a-t),d=Math.abs(u-e);return[a,u,f,d]}function pt(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function ri({pos:t,x1:e,y1:n,x2:i,y2:o,c:s}){switch(t){case he.Left:return[e-pt(e-i,s),n];case he.Right:return[e+pt(i-e,s),n];case he.Top:return[e,n-pt(n-o,s)];case he.Bottom:return[e,n+pt(o-n,s)]}}function ro({sourceX:t,sourceY:e,sourcePosition:n=he.Bottom,targetX:i,targetY:o,targetPosition:s=he.Top,curvature:l=.25}){const[r,a]=ri({pos:n,x1:t,y1:e,x2:i,y2:o,c:l}),[u,f]=ri({pos:s,x1:i,y1:o,x2:t,y2:e,c:l}),[d,h,c,b]=Al({sourceX:t,sourceY:e,targetX:i,targetY:o,sourceControlX:r,sourceControlY:a,targetControlX:u,targetControlY:f});return[`M${t},${e} C${r},${a} ${u},${f} ${i},${o}`,d,h,c,b]}function ao({sourceX:t,sourceY:e,targetX:n,targetY:i}){const o=Math.abs(n-t)/2,s=n<t?n+o:n-o,l=Math.abs(i-e)/2,r=i<e?i+l:i-l;return[s,r,o,l]}function Xl({sourceNode:t,targetNode:e,selected:n=!1,zIndex:i=0,elevateOnSelect:o=!1}){if(!o)return i;const s=n||e.selected||t.selected,l=Math.max(t.internals.z||0,e.internals.z||0,1e3);return i+(s?l:0)}function Wl({sourceNode:t,targetNode:e,width:n,height:i,transform:o}){const s=Wn(Vn(t),Vn(e));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const l={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:i/o[2]};return Ln(l,Bn(s))>0}const Bl=({source:t,sourceHandle:e,target:n,targetHandle:i})=>`xy-edge__${t}${e||""}-${n}${i||""}`,Ll=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),Kl=(t,e)=>{if(!t.source||!t.target)return e;let n;return Pl(t)?n={...t}:n={...t,id:Bl(t)},Ll(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function uo({sourceX:t,sourceY:e,targetX:n,targetY:i}){const[o,s,l,r]=ao({sourceX:t,sourceY:e,targetX:n,targetY:i});return[`M ${t},${e}L ${n},${i}`,o,s,l,r]}const ai={[he.Left]:{x:-1,y:0},[he.Right]:{x:1,y:0},[he.Top]:{x:0,y:-1},[he.Bottom]:{x:0,y:1}},Rl=({source:t,sourcePosition:e=he.Bottom,target:n})=>e===he.Left||e===he.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},ui=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function Zl({source:t,sourcePosition:e=he.Bottom,target:n,targetPosition:i=he.Top,center:o,offset:s}){const l=ai[e],r=ai[i],a={x:t.x+l.x*s,y:t.y+l.y*s},u={x:n.x+r.x*s,y:n.y+r.y*s},f=Rl({source:a,sourcePosition:e,target:u}),d=f.x!==0?"x":"y",h=f[d];let c=[],b,m;const y={x:0,y:0},g={x:0,y:0},[E,w,M,X]=ao({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(l[d]*r[d]===-1){b=o.x??E,m=o.y??w;const T=[{x:b,y:a.y},{x:b,y:u.y}],I=[{x:a.x,y:m},{x:u.x,y:m}];l[d]===h?c=d==="x"?T:I:c=d==="x"?I:T}else{const T=[{x:a.x,y:u.y}],I=[{x:u.x,y:a.y}];if(d==="x"?c=l.x===h?I:T:c=l.y===h?T:I,e===i){const W=Math.abs(t[d]-n[d]);if(W<=s){const _=Math.min(s-1,s-W);l[d]===h?y[d]=(a[d]>t[d]?-1:1)*_:g[d]=(u[d]>n[d]?-1:1)*_}}if(e!==i){const W=d==="x"?"y":"x",_=l[d]===r[W],k=a[W]>u[W],S=a[W]<u[W];(l[d]===1&&(!_&&k||_&&S)||l[d]!==1&&(!_&&S||_&&k))&&(c=d==="x"?T:I)}const H={x:a.x+y.x,y:a.y+y.y},B={x:u.x+g.x,y:u.y+g.y},F=Math.max(Math.abs(H.x-c[0].x),Math.abs(B.x-c[0].x)),J=Math.max(Math.abs(H.y-c[0].y),Math.abs(B.y-c[0].y));F>=J?(b=(H.x+B.x)/2,m=c[0].y):(b=c[0].x,m=(H.y+B.y)/2)}return[[t,{x:a.x+y.x,y:a.y+y.y},...c,{x:u.x+g.x,y:u.y+g.y},n],b,m,M,X]}function Fl(t,e,n,i){const o=Math.min(ui(t,e)/2,ui(e,n)/2,i),{x:s,y:l}=e;if(t.x===s&&s===n.x||t.y===l&&l===n.y)return`L${s} ${l}`;if(t.y===l){const u=t.x<n.x?-1:1,f=t.y<n.y?1:-1;return`L ${s+o*u},${l}Q ${s},${l} ${s},${l+o*f}`}const r=t.x<n.x?1:-1,a=t.y<n.y?-1:1;return`L ${s},${l+o*a}Q ${s},${l} ${s+o*r},${l}`}function rn({sourceX:t,sourceY:e,sourcePosition:n=he.Bottom,targetX:i,targetY:o,targetPosition:s=he.Top,borderRadius:l=5,centerX:r,centerY:a,offset:u=20}){const[f,d,h,c,b]=Zl({source:{x:t,y:e},sourcePosition:n,target:{x:i,y:o},targetPosition:s,center:{x:r,y:a},offset:u});return[f.reduce((y,g,E)=>{let w="";return E>0&&E<f.length-1?w=Fl(f[E-1],g,f[E+1],l):w=`${E===0?"M":"L"}${g.x} ${g.y}`,y+=w,y},""),d,h,c,b]}function fi(t){var e;return t&&!!(t.internals.handleBounds||(e=t.handles)!=null&&e.length)&&!!(t.measured.width||t.width||t.initialWidth)}function Gl(t){var d;const{sourceNode:e,targetNode:n}=t;if(!fi(e)||!fi(n))return null;const i=e.internals.handleBounds||ci(e.handles),o=n.internals.handleBounds||ci(n.handles),s=di((i==null?void 0:i.source)??[],t.sourceHandle),l=di(t.connectionMode===Ct.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),t.targetHandle);if(!s||!l)return(d=t.onError)==null||d.call(t,"008",Zt.error008(s?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const r=(s==null?void 0:s.position)||he.Bottom,a=(l==null?void 0:l.position)||he.Top,u=Bt(e,s,r),f=Bt(n,l,a);return{sourceX:u.x,sourceY:u.y,targetX:f.x,targetY:f.y,sourcePosition:r,targetPosition:a}}function ci(t){if(!t)return null;const e=[],n=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?e.push(i):i.type==="target"&&n.push(i);return{source:e,target:n}}function Bt(t,e,n=he.Left,i=!1){const o=((e==null?void 0:e.x)??0)+t.internals.positionAbsolute.x,s=((e==null?void 0:e.y)??0)+t.internals.positionAbsolute.y,{width:l,height:r}=e??bn(t);if(i)return{x:o+l/2,y:s+r/2};switch((e==null?void 0:e.position)??n){case he.Top:return{x:o+l/2,y:s};case he.Right:return{x:o+l,y:s+r/2};case he.Bottom:return{x:o+l/2,y:s+r};case he.Left:return{x:o,y:s+r/2}}}function di(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function Yn(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function Ul(t,{id:e,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:o}){const s=new Set;return t.reduce((l,r)=>([r.markerStart||i,r.markerEnd||o].forEach(a=>{if(a&&typeof a=="object"){const u=Yn(a,e);s.has(u)||(l.push({id:u,color:a.color||n,...a}),s.add(u))}}),l),[]).sort((l,r)=>l.id.localeCompare(r.id))}const fo={nodeOrigin:[0,0],elevateNodesOnSelect:!0,defaults:{}},ql={...fo,checkEquality:!0};function co(t,e,n,i){var r,a;const o={...ql,...i},s=new Map(e);e.clear(),n.clear();const l=i!=null&&i.elevateNodesOnSelect?1e3:0;for(const u of t){let f=s.get(u.id);o.checkEquality&&u===(f==null?void 0:f.internals.userNode)||(f={...o.defaults,...u,measured:{width:(r=u.measured)==null?void 0:r.width,height:(a=u.measured)==null?void 0:a.height},internals:{positionAbsolute:Ft(u,o.nodeOrigin),handleBounds:u.measured?f==null?void 0:f.internals.handleBounds:void 0,z:go(u,l),userNode:u}}),e.set(u.id,f),u.parentId&&ho(f,e,n,i)}}function ho(t,e,n,i){const o={...fo,...i},s=t.parentId,l=e.get(s);if(!l){console.warn(`Parent node ${s} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}const r=n.get(s);r?r.set(t.id,t):n.set(s,new Map([[t.id,t]]));const a=i!=null&&i.elevateNodesOnSelect?1e3:0,{x:u,y:f,z:d}=jl(t,l,o.nodeOrigin,a),h=t.internals.positionAbsolute,c=u!==h.x||f!==h.y;(c||d!==t.internals.z)&&(t.internals={...t.internals,positionAbsolute:c?{x:u,y:f}:h,z:d})}function go(t,e){return(tt(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function jl(t,e,n,i){const o=Ft(t,n),s=go(t,i),l=e.internals.z??0;return{x:e.internals.positionAbsolute.x+o.x,y:e.internals.positionAbsolute.y+o.y,z:l>s?l:s}}function pl(t,e,n,i=[0,0]){var l;const o=[],s=new Map;for(const r of t){const a=e.get(r.parentId);if(!a)continue;const u=((l=s.get(r.parentId))==null?void 0:l.expandedRect)??gn(a),f=io(u,r.rect);s.set(r.parentId,{expandedRect:f,parent:a})}return s.size>0&&s.forEach(({expandedRect:r,parent:a},u)=>{var w;const f=a.internals.positionAbsolute,d=bn(a),h=a.origin??i,c=r.x<f.x?Math.round(Math.abs(f.x-r.x)):0,b=r.y<f.y?Math.round(Math.abs(f.y-r.y)):0,m=Math.max(d.width,Math.round(r.width)),y=Math.max(d.height,Math.round(r.height)),g=(m-d.width)*h[0],E=(y-d.height)*h[1];(c>0||b>0||g||E)&&(o.push({id:u,type:"position",position:{x:a.position.x-c+g,y:a.position.y-b+E}}),(w=n.get(u))==null||w.forEach(M=>{t.some(X=>X.id===M.id)||o.push({id:M.id,type:"position",position:{x:M.position.x+c,y:M.position.y+b}})})),(d.width<r.width||d.height<r.height||c||b)&&o.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:m+(c?h[0]*c-g:0),height:y+(b?h[1]*b-E:0)}})}),o}function Jl(t,e,n,i,o){const s=i==null?void 0:i.querySelector(".xyflow__viewport");let l=!1;if(!s)return{changes:[],updatedInternals:l};const r=[],a=window.getComputedStyle(s),{m22:u}=new window.DOMMatrixReadOnly(a.transform),f=[];for(const d of t.values()){const h=e.get(d.id);if(h)if(h.hidden)h.internals={...h.internals,handleBounds:void 0},l=!0;else{const c=lo(d.nodeElement),b=h.measured.width!==c.width||h.measured.height!==c.height;if(!!(c.width&&c.height&&(b||!h.internals.handleBounds||d.force))){const y=d.nodeElement.getBoundingClientRect();h.measured=c,h.internals={...h.internals,positionAbsolute:Ft(h,o),handleBounds:{source:si("source",d.nodeElement,y,u,h.id),target:si("target",d.nodeElement,y,u,h.id)}},h.parentId&&ho(h,e,n,{nodeOrigin:o}),l=!0,b&&(r.push({id:h.id,type:"dimensions",dimensions:c}),h.expandParent&&h.parentId&&f.push({id:h.id,parentId:h.parentId,rect:gn(h,o)}))}}}if(f.length>0){const d=pl(f,e,n,o);r.push(...d)}return{changes:r,updatedInternals:l}}async function Ql({delta:t,panZoom:e,transform:n,translateExtent:i,width:o,height:s}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const l=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[o,s]],i),r=!!l&&(l.x!==n[0]||l.y!==n[1]||l.k!==n[2]);return Promise.resolve(r)}function mo(t,e,n){t.clear(),e.clear();for(const i of n){const{source:o,target:s,sourceHandle:l=null,targetHandle:r=null}=i,a=`${o}-source-${l}`,u=`${s}-target-${r}`,f=t.get(a)||new Map,d=t.get(u)||new Map,h={edgeId:i.id,source:o,target:s,sourceHandle:l,targetHandle:r};e.set(i.id,i),t.set(a,f.set(`${s}-${r}`,h)),t.set(u,d.set(`${o}-${l}`,h))}}function bo(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:bo(n,e):!1}function hi(t,e,n){let i=t;do{if(i!=null&&i.matches(e))return!0;if(i===n)return!1;i=i.parentElement}while(i);return!1}function xl(t,e,n,i){const o=new Map;for(const[s,l]of t)if((l.selected||l.id===i)&&(!l.parentId||!bo(l,t))&&(l.draggable||e&&typeof l.draggable>"u")){const r=t.get(s);r&&o.set(s,{id:s,position:r.position||{x:0,y:0},distance:{x:n.x-r.internals.positionAbsolute.x,y:n.y-r.internals.positionAbsolute.y},extent:r.extent,parentId:r.parentId,origin:r.origin,expandParent:r.expandParent,internals:{positionAbsolute:r.internals.positionAbsolute||{x:0,y:0}},measured:{width:r.measured.width??0,height:r.measured.height??0}})}return o}function zn({nodeId:t,dragItems:e,nodeLookup:n,dragging:i=!0}){var l,r;const o=[];for(const[a,u]of e){const f=(l=n.get(a))==null?void 0:l.internals.userNode;f&&o.push({...f,position:u.position,dragging:i})}if(!t)return[o[0],o];const s=n.get(t).internals.userNode;return[{...s,position:((r=e.get(t))==null?void 0:r.position)||s.position,dragging:i},o]}function $l({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:i,onDragStop:o}){let s={x:null,y:null},l=0,r=new Map,a=!1,u={x:0,y:0},f=null,d=!1,h=null,c=!1;function b({noDragClassName:y,handleSelector:g,domNode:E,isSelectable:w,nodeId:M,nodeClickDistance:X=0}){h=xe(E);function K({x:B,y:F},J){const{nodeLookup:W,nodeExtent:_,snapGrid:k,snapToGrid:S,nodeOrigin:P,onNodeDrag:D,onSelectionDrag:O,onError:Y,updateNodePositions:U}=e();s={x:B,y:F};let G=!1,V={x:0,y:0,x2:0,y2:0};if(r.size>1&&_){const $=Gt(r);V=Nn($)}for(const[$,ee]of r){let ie={x:B-ee.distance.x,y:F-ee.distance.y};S&&(ie=Kn(ie,k));let v=[[_[0][0],_[0][1]],[_[1][0],_[1][1]]];if(r.size>1&&_&&!ee.extent){const{positionAbsolute:se}=ee.internals,de=se.x-V.x+_[0][0],ye=se.x+ee.measured.width-V.x2+_[1][0],De=se.y-V.y+_[0][1],L=se.y+ee.measured.height-V.y2+_[1][1];v=[[de,De],[ye,L]]}const{position:te,positionAbsolute:oe}=Dl({nodeId:$,nextPosition:ie,nodeLookup:W,nodeExtent:v,nodeOrigin:P,onError:Y});G=G||ee.position.x!==te.x||ee.position.y!==te.y,ee.position=te,ee.internals.positionAbsolute=oe}if(G&&(U(r,!0),J&&(i||D||!M&&O))){const[$,ee]=zn({nodeId:M,dragItems:r,nodeLookup:W});i==null||i(J,r,$,ee),D==null||D(J,$,ee),M||O==null||O(J,ee)}}async function T(){if(!f)return;const{transform:B,panBy:F,autoPanSpeed:J}=e(),[W,_]=no(u,f,J);(W!==0||_!==0)&&(s.x=(s.x??0)-W/B[2],s.y=(s.y??0)-_/B[2],await F({x:W,y:_})&&K(s,null)),l=requestAnimationFrame(T)}function I(B){var G;const{nodeLookup:F,multiSelectionActive:J,nodesDraggable:W,transform:_,snapGrid:k,snapToGrid:S,selectNodesOnDrag:P,onNodeDragStart:D,onSelectionDragStart:O,unselectNodesAndEdges:Y}=e();d=!0,(!P||!w)&&!J&&M&&((G=F.get(M))!=null&&G.selected||Y()),w&&P&&M&&(t==null||t(M));const U=Xt(B.sourceEvent,{transform:_,snapGrid:k,snapToGrid:S});if(s=U,r=xl(F,W,U,M),r.size>0&&(n||D||!M&&O)){const[V,$]=zn({nodeId:M,dragItems:r,nodeLookup:F});n==null||n(B.sourceEvent,r,V,$),D==null||D(B.sourceEvent,V,$),M||O==null||O(B.sourceEvent,$)}}const H=xi().clickDistance(X).on("start",B=>{const{domNode:F,nodeDragThreshold:J,transform:W,snapGrid:_,snapToGrid:k}=e();c=!1,J===0&&I(B),s=Xt(B.sourceEvent,{transform:W,snapGrid:_,snapToGrid:k}),f=(F==null?void 0:F.getBoundingClientRect())||null,u=ut(B.sourceEvent,f)}).on("drag",B=>{const{autoPanOnNodeDrag:F,transform:J,snapGrid:W,snapToGrid:_,nodeDragThreshold:k}=e(),S=Xt(B.sourceEvent,{transform:J,snapGrid:W,snapToGrid:_});if(B.sourceEvent.type==="touchmove"&&B.sourceEvent.touches.length>1&&(c=!0),!c){if(!a&&F&&d&&(a=!0,T()),!d){const P=S.xSnapped-(s.x??0),D=S.ySnapped-(s.y??0);Math.sqrt(P*P+D*D)>k&&I(B)}(s.x!==S.xSnapped||s.y!==S.ySnapped)&&r&&d&&(u=ut(B.sourceEvent,f),K(S,B.sourceEvent))}}).on("end",B=>{if(!(!d||c)&&(a=!1,d=!1,cancelAnimationFrame(l),r.size>0)){const{nodeLookup:F,updateNodePositions:J,onNodeDragStop:W,onSelectionDragStop:_}=e();if(J(r,!1),o||W||!M&&_){const[k,S]=zn({nodeId:M,dragItems:r,nodeLookup:F,dragging:!1});o==null||o(B.sourceEvent,r,k,S),W==null||W(B.sourceEvent,k,S),M||_==null||_(B.sourceEvent,S)}}}).filter(B=>{const F=B.target;return!B.button&&(!y||!hi(F,`.${y}`,E))&&(!g||hi(F,g,E))});h.call(H)}function m(){h==null||h.on(".drag",null)}return{update:b,destroy:m}}function es(t,e,n){const i=[],o={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const s of e.values())Ln(o,gn(s))>0&&i.push(s);return i}const ts=250;function ns(t,e,n,i){var r,a;let o=[],s=1/0;const l=es(t,n,e+ts);for(const u of l){const f=[...((r=u.internals.handleBounds)==null?void 0:r.source)??[],...((a=u.internals.handleBounds)==null?void 0:a.target)??[]];for(const d of f){if(i.nodeId===d.nodeId&&i.type===d.type&&i.id===d.id)continue;const{x:h,y:c}=Bt(u,d,d.position,!0),b=Math.sqrt(Math.pow(h-t.x,2)+Math.pow(c-t.y,2));b>e||(b<s?(o=[{...d,x:h,y:c}],s=b):b===s&&o.push({...d,x:h,y:c}))}}if(!o.length)return null;if(o.length>1){const u=i.type==="source"?"target":"source";return o.find(f=>f.type===u)??o[0]}return o[0]}function yo(t,e,n,i,o=!1){var a;const s=i.get(t);if(!s)return null;const l=(a=s.internals.handleBounds)==null?void 0:a[e],r=(n?l==null?void 0:l.find(u=>u.id===n):l==null?void 0:l[0])??null;return r&&o?{...r,...Bt(s,r,r.position,!0)}:r}function _o(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function is(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const ko=()=>!0;function os(t,{connectionMode:e,connectionRadius:n,handleId:i,nodeId:o,edgeUpdaterType:s,isTarget:l,domNode:r,nodeLookup:a,lib:u,autoPanOnConnect:f,flowId:d,panBy:h,cancelConnection:c,onConnectStart:b,onConnect:m,onConnectEnd:y,isValidConnection:g=ko,onReconnectEnd:E,updateConnection:w,getTransform:M,getFromHandle:X,autoPanSpeed:K}){const T=Nl(t.target);let I=0,H;const{x:B,y:F}=ut(t),J=T==null?void 0:T.elementFromPoint(B,F),W=_o(s,J),_=r==null?void 0:r.getBoundingClientRect();if(!_||!W)return;const k=yo(o,W,i,a);if(!k)return;let S=ut(t,_),P=!1,D=null,O=!1,Y=null;function U(){if(!f||!_)return;const[oe,se]=no(S,_,K);h({x:oe,y:se}),I=requestAnimationFrame(U)}const G={...k,nodeId:o,type:W,position:k.position},V=a.get(o),ee={inProgress:!0,isValid:null,from:Bt(V,G,he.Left,!0),fromHandle:G,fromPosition:G.position,fromNode:V,to:S,toHandle:null,toPosition:$n[G.position],toNode:null};w(ee);let ie=ee;b==null||b(t,{nodeId:o,handleId:i,handleType:W});function v(oe){if(!X()||!G){te(oe);return}const se=M();S=ut(oe,_),H=ns(mn(S,se,!1,[1,1]),n,a,G),P||(U(),P=!0);const de=wo(oe,{handle:H,connectionMode:e,fromNodeId:o,fromHandleId:i,fromType:l?"target":"source",isValidConnection:g,doc:T,lib:u,flowId:d,nodeLookup:a});Y=de.handleDomNode,D=de.connection,O=is(!!H,de.isValid);const ye={...ie,isValid:O,to:H&&O?Tl({x:H.x,y:H.y},se):S,toHandle:de.toHandle,toPosition:O&&de.toHandle?de.toHandle.position:$n[G.position],toNode:de.toHandle?a.get(de.toHandle.nodeId):null};O&&H&&ie.toHandle&&ye.toHandle&&ie.toHandle.type===ye.toHandle.type&&ie.toHandle.nodeId===ye.toHandle.nodeId&&ie.toHandle.id===ye.toHandle.id&&ie.to.x===ye.to.x&&ie.to.y===ye.to.y||(w(ye),ie=ye)}function te(oe){(H||Y)&&D&&O&&(m==null||m(D));const{inProgress:se,...de}=ie,ye={...de,toPosition:ie.toHandle?ie.toPosition:null};y==null||y(oe,ye),s&&(E==null||E(oe,ye)),c(),cancelAnimationFrame(I),P=!1,O=!1,D=null,Y=null,T.removeEventListener("mousemove",v),T.removeEventListener("mouseup",te),T.removeEventListener("touchmove",v),T.removeEventListener("touchend",te)}T.addEventListener("mousemove",v),T.addEventListener("mouseup",te),T.addEventListener("touchmove",v),T.addEventListener("touchend",te)}function wo(t,{handle:e,connectionMode:n,fromNodeId:i,fromHandleId:o,fromType:s,doc:l,lib:r,flowId:a,isValidConnection:u=ko,nodeLookup:f}){const d=s==="target",h=e?l.querySelector(`.${r}-flow__handle[data-id="${a}-${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`):null,{x:c,y:b}=ut(t),m=l.elementFromPoint(c,b),y=m!=null&&m.classList.contains(`${r}-flow__handle`)?m:h,g={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){const E=_o(void 0,y),w=y.getAttribute("data-nodeid"),M=y.getAttribute("data-handleid"),X=y.classList.contains("connectable"),K=y.classList.contains("connectableend");if(!w||!E)return g;const T={source:d?w:i,sourceHandle:d?M:o,target:d?i:w,targetHandle:d?o:M};g.connection=T;const H=X&&K&&(n===Ct.Strict?d&&E==="source"||!d&&E==="target":w!==i||M!==o);g.isValid=H&&u(T),g.toHandle=yo(w,E,M,f,!1)}return g}const ls={onPointerDown:os,isValid:wo};function ss({domNode:t,panZoom:e,getTransform:n,getViewScale:i}){const o=xe(t);function s({translateExtent:r,width:a,height:u,zoomStep:f=10,pannable:d=!0,zoomable:h=!0,inversePan:c=!1}){const b=w=>{const M=n();if(w.sourceEvent.type!=="wheel"||!e)return;const X=-w.sourceEvent.deltaY*(w.sourceEvent.deltaMode===1?.05:w.sourceEvent.deltaMode?1:.002)*f,K=M[2]*Math.pow(2,X);e.scaleTo(K)};let m=[0,0];const y=w=>{(w.sourceEvent.type==="mousedown"||w.sourceEvent.type==="touchstart")&&(m=[w.sourceEvent.clientX??w.sourceEvent.touches[0].clientX,w.sourceEvent.clientY??w.sourceEvent.touches[0].clientY])},g=w=>{const M=n();if(w.sourceEvent.type!=="mousemove"&&w.sourceEvent.type!=="touchmove"||!e)return;const X=[w.sourceEvent.clientX??w.sourceEvent.touches[0].clientX,w.sourceEvent.clientY??w.sourceEvent.touches[0].clientY],K=[X[0]-m[0],X[1]-m[1]];m=X;const T=i()*Math.max(M[2],Math.log(M[2]))*(c?-1:1),I={x:M[0]-K[0]*T,y:M[1]-K[1]*T},H=[[0,0],[a,u]];e.setViewportConstrained({x:I.x,y:I.y,zoom:M[2]},H,r)},E=$i().on("start",y).on("zoom",d?g:null).on("zoom.wheel",h?b:null);o.call(E,{})}function l(){o.on("zoom",null)}return{update:s,destroy:l,pointer:et}}const rs=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,yn=t=>({x:t.x,y:t.y,zoom:t.k}),Pn=({x:t,y:e,zoom:n})=>Xn.translate(t,e).scale(n),Ht=(t,e)=>t.target.closest(`.${e}`),So=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),On=(t,e=0,n=()=>{})=>{const i=typeof e=="number"&&e>0;return i||n(),i?t.transition().duration(e).on("end",n):t},Eo=t=>{const e=t.ctrlKey&&ln()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function as({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:i,panOnScrollMode:o,panOnScrollSpeed:s,zoomOnPinch:l,onPanZoomStart:r,onPanZoom:a,onPanZoomEnd:u}){return f=>{if(Ht(f,e))return!1;f.preventDefault(),f.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(f.ctrlKey&&l){const y=et(f),g=Eo(f),E=d*Math.pow(2,g);i.scaleTo(n,E,y,f);return}const h=f.deltaMode===1?20:1;let c=o===lt.Vertical?0:f.deltaX*h,b=o===lt.Horizontal?0:f.deltaY*h;!ln()&&f.shiftKey&&o!==lt.Vertical&&(c=f.deltaY*h,b=0),i.translateBy(n,-(c/d)*s,-(b/d)*s,{internal:!0});const m=yn(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,r==null||r(f,m)),t.isPanScrolling&&(a==null||a(f,m),t.panScrollTimeout=setTimeout(()=>{u==null||u(f,m),t.isPanScrolling=!1},150))}}function us({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(i,o){if(!e&&i.type==="wheel"&&!i.ctrlKey||Ht(i,t))return null;i.preventDefault(),n.call(this,i,o)}}function fs({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return i=>{var s,l,r;if((s=i.sourceEvent)!=null&&s.internal)return;const o=yn(i.transform);t.mouseButton=((l=i.sourceEvent)==null?void 0:l.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=o,((r=i.sourceEvent)==null?void 0:r.type)==="mousedown"&&e(!0),n&&(n==null||n(i.sourceEvent,o))}}function cs({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:i,onPanZoom:o}){return s=>{var l,r;t.usedRightMouseButton=!!(n&&So(e,t.mouseButton??0)),(l=s.sourceEvent)!=null&&l.sync||i([s.transform.x,s.transform.y,s.transform.k]),o&&!((r=s.sourceEvent)!=null&&r.internal)&&(o==null||o(s.sourceEvent,yn(s.transform)))}}function ds({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:o,onPaneContextMenu:s}){return l=>{var r;if(!((r=l.sourceEvent)!=null&&r.internal)&&(t.isZoomingOrPanning=!1,s&&So(e,t.mouseButton??0)&&!t.usedRightMouseButton&&l.sourceEvent&&s(l.sourceEvent),t.usedRightMouseButton=!1,i(!1),o&&rs(t.prevViewport,l.transform))){const a=yn(l.transform);t.prevViewport=a,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{o==null||o(l.sourceEvent,a)},n?150:0)}}}function hs({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:i,panOnScroll:o,zoomOnDoubleClick:s,userSelectionActive:l,noWheelClassName:r,noPanClassName:a,lib:u}){return f=>{var b;const d=t||e,h=n&&f.ctrlKey;if(f.button===1&&f.type==="mousedown"&&(Ht(f,`${u}-flow__node`)||Ht(f,`${u}-flow__edge`)))return!0;if(!i&&!d&&!o&&!s&&!n||l||Ht(f,r)&&f.type==="wheel"||Ht(f,a)&&(f.type!=="wheel"||o&&f.type==="wheel"&&!t)||!n&&f.ctrlKey&&f.type==="wheel")return!1;if(!n&&f.type==="touchstart"&&((b=f.touches)==null?void 0:b.length)>1)return f.preventDefault(),!1;if(!d&&!o&&!h&&f.type==="wheel"||!i&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(i)&&!i.includes(f.button)&&f.type==="mousedown")return!1;const c=Array.isArray(i)&&i.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||f.type==="wheel")&&c}}function gs({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:i,translateExtent:o,viewport:s,onPanZoom:l,onPanZoomStart:r,onPanZoomEnd:a,onTransformChange:u,onDraggingChange:f}){const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=t.getBoundingClientRect(),c=$i().clickDistance(!tt(i)||i<0?0:i).scaleExtent([e,n]).translateExtent(o),b=xe(t).call(c);M({x:s.x,y:s.y,zoom:Yt(s.zoom,e,n)},[[0,0],[h.width,h.height]],o);const m=b.on("wheel.zoom"),y=b.on("dblclick.zoom");c.wheelDelta(Eo);function g(W,_){return b?new Promise(k=>{c==null||c.transform(On(b,_==null?void 0:_.duration,()=>k(!0)),W)}):Promise.resolve(!1)}function E({noWheelClassName:W,noPanClassName:_,onPaneContextMenu:k,userSelectionActive:S,panOnScroll:P,panOnDrag:D,panOnScrollMode:O,panOnScrollSpeed:Y,preventScrolling:U,zoomOnPinch:G,zoomOnScroll:V,zoomOnDoubleClick:$,zoomActivationKeyPressed:ee,lib:ie}){S&&!d.isZoomingOrPanning&&w();const te=P&&!ee&&!S?as({zoomPanValues:d,noWheelClassName:W,d3Selection:b,d3Zoom:c,panOnScrollMode:O,panOnScrollSpeed:Y,zoomOnPinch:G,onPanZoomStart:r,onPanZoom:l,onPanZoomEnd:a}):us({noWheelClassName:W,preventScrolling:U,d3ZoomHandler:m});if(b.on("wheel.zoom",te,{passive:!1}),!S){const se=fs({zoomPanValues:d,onDraggingChange:f,onPanZoomStart:r});c.on("start",se);const de=cs({zoomPanValues:d,panOnDrag:D,onPaneContextMenu:!!k,onPanZoom:l,onTransformChange:u});c.on("zoom",de);const ye=ds({zoomPanValues:d,panOnDrag:D,panOnScroll:P,onPaneContextMenu:k,onPanZoomEnd:a,onDraggingChange:f});c.on("end",ye)}const oe=hs({zoomActivationKeyPressed:ee,panOnDrag:D,zoomOnScroll:V,panOnScroll:P,zoomOnDoubleClick:$,zoomOnPinch:G,userSelectionActive:S,noPanClassName:_,noWheelClassName:W,lib:ie});c.filter(oe),$?b.on("dblclick.zoom",y):b.on("dblclick.zoom",null)}function w(){c.on("zoom",null)}async function M(W,_,k){const S=Pn(W),P=c==null?void 0:c.constrain()(S,_,k);return P&&await g(P),new Promise(D=>D(P))}async function X(W,_){const k=Pn(W);return await g(k,_),new Promise(S=>S(k))}function K(W){if(b){const _=Pn(W),k=b.property("__zoom");(k.k!==W.zoom||k.x!==W.x||k.y!==W.y)&&(c==null||c.transform(b,_,null,{sync:!0}))}}function T(){const W=b?al(b.node()):{x:0,y:0,k:1};return{x:W.x,y:W.y,zoom:W.k}}function I(W,_){return b?new Promise(k=>{c==null||c.scaleTo(On(b,_==null?void 0:_.duration,()=>k(!0)),W)}):Promise.resolve(!1)}function H(W,_){return b?new Promise(k=>{c==null||c.scaleBy(On(b,_==null?void 0:_.duration,()=>k(!0)),W)}):Promise.resolve(!1)}function B(W){c==null||c.scaleExtent(W)}function F(W){c==null||c.translateExtent(W)}function J(W){const _=!tt(W)||W<0?0:W;c==null||c.clickDistance(_)}return{update:E,destroy:w,setViewport:X,setViewportConstrained:M,getViewport:T,scaleTo:I,scaleBy:H,setScaleExtent:B,setTranslateExtent:F,syncViewport:K,setClickDistance:J}}var gi;(function(t){t.Line="line",t.Handle="handle"})(gi||(gi={}));const Du=["top-left","top-right","bottom-left","bottom-right"],Hu=["top","right","bottom","left"];function ms({width:t,prevWidth:e,height:n,prevHeight:i,affectsX:o,affectsY:s}){const l=t-e,r=n-i,a=[l>0?1:l<0?-1:0,r>0?1:r<0?-1:0];return l&&o&&(a[0]=a[0]*-1),r&&s&&(a[1]=a[1]*-1),a}function bs(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),i=t.includes("left"),o=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:i,affectsY:o}}function mt(t,e){return Math.max(0,e-t)}function bt(t,e){return Math.max(0,t-e)}function Jt(t,e,n){return Math.max(0,e-t,t-n)}function mi(t,e){return t?!e:e}function ys(t,e,n,i,o,s,l,r){let{affectsX:a,affectsY:u}=e;const{isHorizontal:f,isVertical:d}=e,h=f&&d,{xSnapped:c,ySnapped:b}=n,{minWidth:m,maxWidth:y,minHeight:g,maxHeight:E}=i,{x:w,y:M,width:X,height:K,aspectRatio:T}=t;let I=Math.floor(f?c-t.pointerX:0),H=Math.floor(d?b-t.pointerY:0);const B=X+(a?-I:I),F=K+(u?-H:H),J=-s[0]*X,W=-s[1]*K;let _=Jt(B,m,y),k=Jt(F,g,E);if(l){let D=0,O=0;a&&I<0?D=mt(w+I+J,l[0][0]):!a&&I>0&&(D=bt(w+B+J,l[1][0])),u&&H<0?O=mt(M+H+W,l[0][1]):!u&&H>0&&(O=bt(M+F+W,l[1][1])),_=Math.max(_,D),k=Math.max(k,O)}if(r){let D=0,O=0;a&&I>0?D=bt(w+I,r[0][0]):!a&&I<0&&(D=mt(w+B,r[1][0])),u&&H>0?O=bt(M+H,r[0][1]):!u&&H<0&&(O=mt(M+F,r[1][1])),_=Math.max(_,D),k=Math.max(k,O)}if(o){if(f){const D=Jt(B/T,g,E)*T;if(_=Math.max(_,D),l){let O=0;!a&&!u||a&&!u&&h?O=bt(M+W+B/T,l[1][1])*T:O=mt(M+W+(a?I:-I)/T,l[0][1])*T,_=Math.max(_,O)}if(r){let O=0;!a&&!u||a&&!u&&h?O=mt(M+B/T,r[1][1])*T:O=bt(M+(a?I:-I)/T,r[0][1])*T,_=Math.max(_,O)}}if(d){const D=Jt(F*T,m,y)/T;if(k=Math.max(k,D),l){let O=0;!a&&!u||u&&!a&&h?O=bt(w+F*T+J,l[1][0])/T:O=mt(w+(u?H:-H)*T+J,l[0][0])/T,k=Math.max(k,O)}if(r){let O=0;!a&&!u||u&&!a&&h?O=mt(w+F*T,r[1][0])/T:O=bt(w+(u?H:-H)*T,r[0][0])/T,k=Math.max(k,O)}}}H=H+(H<0?k:-k),I=I+(I<0?_:-_),o&&(h?B>F*T?H=(mi(a,u)?-I:I)/T:I=(mi(a,u)?-H:H)*T:f?(H=I/T,u=a):(I=H*T,a=u));const S=a?w+I:w,P=u?M+H:M;return{width:X+(a?-I:I),height:K+(u?-H:H),x:s[0]*I*(a?-1:1)+S,y:s[1]*H*(u?-1:1)+P}}const Co={width:0,height:0,x:0,y:0},_s={...Co,pointerX:0,pointerY:0,aspectRatio:1};function ks(t){return[[0,0],[t.measured.width,t.measured.height]]}function ws(t,e,n){const i=e.position.x+t.position.x,o=e.position.y+t.position.y,s=t.measured.width??0,l=t.measured.height??0,r=n[0]*s,a=n[1]*l;return[[i-r,o-a],[i+s-r,o+l-a]]}function Iu({domNode:t,nodeId:e,getStoreItems:n,onChange:i,onEnd:o}){const s=xe(t);function l({controlPosition:a,boundaries:u,keepAspectRatio:f,onResizeStart:d,onResize:h,onResizeEnd:c,shouldResize:b}){let m={...Co},y={..._s};const g=bs(a);let E,w=[],M,X,K;const T=xi().on("start",I=>{const{nodeLookup:H,transform:B,snapGrid:F,snapToGrid:J,nodeOrigin:W}=n();if(E=H.get(e),!E)return;const{xSnapped:_,ySnapped:k}=Xt(I.sourceEvent,{transform:B,snapGrid:F,snapToGrid:J});m={width:E.measured.width??0,height:E.measured.height??0,x:E.position.x??0,y:E.position.y??0},y={...m,pointerX:_,pointerY:k,aspectRatio:m.width/m.height},M=void 0,E.parentId&&(E.extent==="parent"||E.expandParent)&&(M=H.get(E.parentId),X=M&&E.extent==="parent"?ks(M):void 0),w=[],K=void 0;for(const[S,P]of H)if(P.parentId===e&&(w.push({id:S,position:{...P.position},extent:P.extent}),P.extent==="parent"||P.expandParent)){const D=ws(P,E,P.origin??W);K?K=[[Math.min(D[0][0],K[0][0]),Math.min(D[0][1],K[0][1])],[Math.max(D[1][0],K[1][0]),Math.max(D[1][1],K[1][1])]]:K=D}d==null||d(I,{...m})}).on("drag",I=>{const{transform:H,snapGrid:B,snapToGrid:F,nodeOrigin:J}=n(),W=Xt(I.sourceEvent,{transform:H,snapGrid:B,snapToGrid:F}),_=[];if(!E)return;const{x:k,y:S,width:P,height:D}=m,O={},Y=E.origin??J,{width:U,height:G,x:V,y:$}=ys(y,g,W,u,f,Y,X,K),ee=U!==P,ie=G!==D,v=V!==k&&ee,te=$!==S&&ie;if(!v&&!te&&!ee&&!ie)return;if((v||te||Y[0]===1||Y[1]===1)&&(O.x=v?V:m.x,O.y=te?$:m.y,m.x=O.x,m.y=O.y,w.length>0)){const ye=V-k,De=$-S;for(const L of w)L.position={x:L.position.x-ye+Y[0]*(U-P),y:L.position.y-De+Y[1]*(G-D)},_.push(L)}if((ee||ie)&&(O.width=ee?U:m.width,O.height=ie?G:m.height,m.width=O.width,m.height=O.height),M&&E.expandParent){const ye=Y[0]*(O.width??0);O.x&&O.x<ye&&(m.x=ye,y.x=y.x-(O.x-ye));const De=Y[1]*(O.height??0);O.y&&O.y<De&&(m.y=De,y.y=y.y-(O.y-De))}const oe=ms({width:m.width,prevWidth:P,height:m.height,prevHeight:D,affectsX:g.affectsX,affectsY:g.affectsY}),se={...m,direction:oe};(b==null?void 0:b(I,se))!==!1&&(h==null||h(I,se),i(O,_))}).on("end",I=>{c==null||c(I,{...m}),o==null||o()});s.call(T)}function r(){s.on(".drag",null)}return{update:l,destroy:r}}function Ss(t){let e,n,i,o,s,l;const r=t[45].default,a=je(r,t,t[44],null);return{c(){e=Be("div"),a&&a.c(),this.h()},l(u){e=Le(u,"DIV",{"data-handleid":!0,"data-nodeid":!0,"data-handlepos":!0,"data-id":!0,class:!0,style:!0,role:!0,tabindex:!0});var f=re(e);a&&a.l(f),f.forEach(N),this.h()},h(){C(e,"data-handleid",t[6]),C(e,"data-nodeid",t[14]),C(e,"data-handlepos",t[2]),C(e,"data-id",n=t[13]+"-"+t[14]+"-"+(t[0]||null)+"-"+t[1]),C(e,"class",i=ze(["svelte-flow__handle",`svelte-flow__handle-${t[2]}`,"nodrag","nopan",t[2],t[4]])),C(e,"style",t[3]),C(e,"role","button"),C(e,"tabindex","-1"),le(e,"valid",t[7]),le(e,"connectingto",t[5]),le(e,"connectingfrom",t[9]),le(e,"source",!t[11]),le(e,"target",t[11]),le(e,"connectablestart",t[12]),le(e,"connectableend",t[12]),le(e,"connectable",t[12]),le(e,"connectionindicator",t[12]&&(!t[10]||t[8]))},m(u,f){p(u,e,f),a&&a.m(e,null),o=!0,s||(l=[Oe(e,"mousedown",t[32]),Oe(e,"touchstart",t[32])],s=!0)},p(u,f){a&&a.p&&(!o||f[1]&8192)&&pe(a,r,u,u[44],o?Qe(r,u[44],f,null):Je(u[44]),null),(!o||f[0]&64)&&C(e,"data-handleid",u[6]),(!o||f[0]&4)&&C(e,"data-handlepos",u[2]),(!o||f[0]&8195&&n!==(n=u[13]+"-"+u[14]+"-"+(u[0]||null)+"-"+u[1]))&&C(e,"data-id",n),(!o||f[0]&20&&i!==(i=ze(["svelte-flow__handle",`svelte-flow__handle-${u[2]}`,"nodrag","nopan",u[2],u[4]])))&&C(e,"class",i),(!o||f[0]&8)&&C(e,"style",u[3]),(!o||f[0]&148)&&le(e,"valid",u[7]),(!o||f[0]&52)&&le(e,"connectingto",u[5]),(!o||f[0]&532)&&le(e,"connectingfrom",u[9]),(!o||f[0]&2068)&&le(e,"source",!u[11]),(!o||f[0]&2068)&&le(e,"target",u[11]),(!o||f[0]&4116)&&le(e,"connectablestart",u[12]),(!o||f[0]&4116)&&le(e,"connectableend",u[12]),(!o||f[0]&4116)&&le(e,"connectable",u[12]),(!o||f[0]&5396)&&le(e,"connectionindicator",u[12]&&(!u[10]||u[8]))},i(u){o||(A(a,u),o=!0)},o(u){Z(a,u),o=!1},d(u){u&&N(e),a&&a.d(u),s=!1,kt(l)}}}function Es(t,e,n){let i,o,s,l,r,a,u,f,d,h,c,b,m,y,g,E,w,M,X,K,T,I,H,B,F,{$$slots:J={},$$scope:W}=e,{id:_=void 0}=e,{type:k="source"}=e,{position:S=he.Top}=e,{style:P=void 0}=e,{isValidConnection:D=void 0}=e,{onconnect:O=void 0}=e,{ondisconnect:Y=void 0}=e,{isConnectable:U=void 0}=e,{class:G=void 0}=e;const V=xt("svelteflow__node_id"),$=xt("svelteflow__node_connectable");q(t,$,Q=>n(43,F=Q));const ee=Ve(),{connectionMode:ie,domNode:v,nodeLookup:te,connectionRadius:oe,viewport:se,isValidConnection:de,lib:ye,addEdge:De,onedgecreate:L,panBy:Te,cancelConnection:Pe,updateConnection:ct,autoPanOnConnect:st,edges:rt,connectionLookup:Ke,onconnect:it,onconnectstart:x,onconnectend:dt,flowId:ht,connection:R}=ee;q(t,ie,Q=>n(40,h=Q)),q(t,v,Q=>n(55,H=Q)),q(t,te,Q=>n(54,I=Q)),q(t,oe,Q=>n(56,B=Q)),q(t,se,Q=>n(46,m=Q)),q(t,de,Q=>n(51,M=Q)),q(t,ye,Q=>n(53,T=Q)),q(t,L,Q=>n(50,w=Q)),q(t,st,Q=>n(52,K=Q)),q(t,rt,Q=>n(42,b=Q)),q(t,Ke,Q=>n(41,c=Q)),q(t,it,Q=>n(49,E=Q)),q(t,x,Q=>n(48,g=Q)),q(t,dt,Q=>n(47,y=Q)),q(t,ht,Q=>n(13,X=Q)),q(t,R,Q=>n(39,d=Q));function wt(Q){const at=so(Q);(at&&Q.button===0||!at)&&ls.onPointerDown(Q,{handleId:s,nodeId:V,isTarget:i,connectionRadius:B,domNode:H,nodeLookup:I,connectionMode:h,lib:T,autoPanOnConnect:K,flowId:X,isValidConnection:D??M,updateConnection:ct,cancelConnection:Pe,panBy:Te,onConnect:qe=>{const Ze=w?w(qe):qe;Ze&&(De(Ze),E==null||E(qe))},onConnectStart:(qe,Ze)=>{g==null||g(qe,{nodeId:Ze.nodeId,handleId:Ze.handleId,handleType:Ze.handleType})},onConnectEnd:(qe,Ze)=>{y==null||y(qe,Ze)},getTransform:()=>[m.x,m.y,m.zoom],getFromHandle:()=>d.fromHandle})}let Re=null,Ue;return t.$$set=Q=>{"id"in Q&&n(0,_=Q.id),"type"in Q&&n(1,k=Q.type),"position"in Q&&n(2,S=Q.position),"style"in Q&&n(3,P=Q.style),"isValidConnection"in Q&&n(33,D=Q.isValidConnection),"onconnect"in Q&&n(34,O=Q.onconnect),"ondisconnect"in Q&&n(35,Y=Q.ondisconnect),"isConnectable"in Q&&n(36,U=Q.isConnectable),"class"in Q&&n(4,G=Q.class),"$$scope"in Q&&n(44,W=Q.$$scope)},t.$$.update=()=>{var Q,at,qe,Ze,Mt,zt,Pt,gt,St;if(t.$$.dirty[0]&2&&n(11,i=k==="target"),t.$$.dirty[1]&4128&&n(12,o=U!==void 0?U:F),t.$$.dirty[0]&1&&n(6,s=_||null),t.$$.dirty[0]&3|t.$$.dirty[1]&3096&&(O||Y)&&n(38,Ue=c.get(`${V}-${k}-${_||null}`)),t.$$.dirty[1]&216){if(Re&&!zl(Ue,Re)){const Et=Ue??new Map;ei(Re,Et,Y),ei(Et,Re,O)}n(37,Re=Ue??new Map)}t.$$.dirty[1]&256&&n(10,l=!!d.fromHandle),t.$$.dirty[0]&66|t.$$.dirty[1]&256&&n(9,r=((Q=d.fromHandle)==null?void 0:Q.nodeId)===V&&((at=d.fromHandle)==null?void 0:at.type)===k&&((qe=d.fromHandle)==null?void 0:qe.id)===s),t.$$.dirty[0]&66|t.$$.dirty[1]&256&&n(5,a=((Ze=d.toHandle)==null?void 0:Ze.nodeId)===V&&((Mt=d.toHandle)==null?void 0:Mt.type)===k&&((zt=d.toHandle)==null?void 0:zt.id)===s),t.$$.dirty[0]&66|t.$$.dirty[1]&768&&n(8,u=h===Ct.Strict?((Pt=d.fromHandle)==null?void 0:Pt.type)!==k:V!==((gt=d.fromHandle)==null?void 0:gt.nodeId)||s!==((St=d.fromHandle)==null?void 0:St.id)),t.$$.dirty[0]&32|t.$$.dirty[1]&256&&n(7,f=a&&d.isValid)},[_,k,S,P,G,a,s,f,u,r,l,i,o,X,V,$,ie,v,te,oe,se,de,ye,L,st,rt,Ke,it,x,dt,ht,R,wt,D,O,Y,U,Re,Ue,d,h,c,b,F,W,J]}class an extends me{constructor(e){super(),be(this,e,Es,Ss,_e,{id:0,type:1,position:2,style:3,isValidConnection:33,onconnect:34,ondisconnect:35,isConnectable:36,class:4},null,[-1,-1])}}function Cs(t){var a;let e,n,i=((a=t[0])==null?void 0:a.label)+"",o,s,l,r;return e=new an({props:{type:"target",position:t[1]??he.Top}}),l=new an({props:{type:"source",position:t[2]??he.Bottom}}),{c(){ue(e.$$.fragment),n=He(),o=Lt(i),s=He(),ue(l.$$.fragment)},l(u){ge(e.$$.fragment,u),n=Ie(u),o=Kt(u,i),s=Ie(u),ge(l.$$.fragment,u)},m(u,f){fe(e,u,f),p(u,n,f),p(u,o,f),p(u,s,f),fe(l,u,f),r=!0},p(u,[f]){var c;const d={};f&2&&(d.position=u[1]??he.Top),e.$set(d),(!r||f&1)&&i!==(i=((c=u[0])==null?void 0:c.label)+"")&&Rt(o,i);const h={};f&4&&(h.position=u[2]??he.Bottom),l.$set(h)},i(u){r||(A(e.$$.fragment,u),A(l.$$.fragment,u),r=!0)},o(u){Z(e.$$.fragment,u),Z(l.$$.fragment,u),r=!1},d(u){u&&(N(n),N(o),N(s)),ce(e,u),ce(l,u)}}}function Ms(t,e,n){const i=["data","targetPosition","sourcePosition"];ve(e,i);let{data:o={label:"Node"}}=e,{targetPosition:s=void 0}=e,{sourcePosition:l=void 0}=e;return t.$$set=r=>{e=Ce(Ce({},e),nt(r)),n(3,ve(e,i)),"data"in r&&n(0,o=r.data),"targetPosition"in r&&n(1,s=r.targetPosition),"sourcePosition"in r&&n(2,l=r.sourcePosition)},[o,s,l]}class Mo extends me{constructor(e){super(),be(this,e,Ms,Cs,_e,{data:0,targetPosition:1,sourcePosition:2})}}function zs(t){var l;let e=((l=t[0])==null?void 0:l.label)+"",n,i,o,s;return o=new an({props:{type:"source",position:t[1]??he.Bottom}}),{c(){n=Lt(e),i=He(),ue(o.$$.fragment)},l(r){n=Kt(r,e),i=Ie(r),ge(o.$$.fragment,r)},m(r,a){p(r,n,a),p(r,i,a),fe(o,r,a),s=!0},p(r,[a]){var f;(!s||a&1)&&e!==(e=((f=r[0])==null?void 0:f.label)+"")&&Rt(n,e);const u={};a&2&&(u.position=r[1]??he.Bottom),o.$set(u)},i(r){s||(A(o.$$.fragment,r),s=!0)},o(r){Z(o.$$.fragment,r),s=!1},d(r){r&&(N(n),N(i)),ce(o,r)}}}function Ps(t,e,n){const i=["data","sourcePosition"];ve(e,i);let{data:o={label:"Node"}}=e,{sourcePosition:s=void 0}=e;return t.$$set=l=>{e=Ce(Ce({},e),nt(l)),n(2,ve(e,i)),"data"in l&&n(0,o=l.data),"sourcePosition"in l&&n(1,s=l.sourcePosition)},[o,s]}class Os extends me{constructor(e){super(),be(this,e,Ps,zs,_e,{data:0,sourcePosition:1})}}function Ds(t){var l;let e=((l=t[0])==null?void 0:l.label)+"",n,i,o,s;return o=new an({props:{type:"target",position:t[1]??he.Top}}),{c(){n=Lt(e),i=He(),ue(o.$$.fragment)},l(r){n=Kt(r,e),i=Ie(r),ge(o.$$.fragment,r)},m(r,a){p(r,n,a),p(r,i,a),fe(o,r,a),s=!0},p(r,[a]){var f;(!s||a&1)&&e!==(e=((f=r[0])==null?void 0:f.label)+"")&&Rt(n,e);const u={};a&2&&(u.position=r[1]??he.Top),o.$set(u)},i(r){s||(A(o.$$.fragment,r),s=!0)},o(r){Z(o.$$.fragment,r),s=!1},d(r){r&&(N(n),N(i)),ce(o,r)}}}function Hs(t,e,n){const i=["data","targetPosition"];ve(e,i);let{data:o={label:"Node"}}=e,{targetPosition:s=void 0}=e;return t.$$set=l=>{e=Ce(Ce({},e),nt(l)),n(2,ve(e,i)),"data"in l&&n(0,o=l.data),"targetPosition"in l&&n(1,s=l.targetPosition)},[o,s]}class Is extends me{constructor(e){super(),be(this,e,Hs,Ds,_e,{data:0,targetPosition:1})}}function vs(t,e,n){const i=[];return ve(e,i),t.$$set=o=>{e=Ce(Ce({},e),nt(o)),n(0,ve(e,i))},[]}class Ts extends me{constructor(e){super(),be(this,e,vs,null,_e,{})}}function bi(t,e,n){if(!e)return;const i=n?e.querySelector(n):e;i&&i.appendChild(t)}function Ns(t,{target:e,domNode:n}){return bi(t,n,e),{async update({target:i,domNode:o}){bi(t,o,i)},destroy(){t.parentNode&&t.parentNode.removeChild(t)}}}function Vs(t){let e,n,i,o,s;const l=t[3].default,r=je(l,t,t[2],null);return{c(){e=Be("div"),r&&r.c()},l(a){e=Le(a,"DIV",{});var u=re(e);r&&r.l(u),u.forEach(N)},m(a,u){p(a,e,u),r&&r.m(e,null),i=!0,o||(s=Ge(n=Ns.call(null,e,{target:".svelte-flow__edgelabel-renderer",domNode:t[0]})),o=!0)},p(a,[u]){r&&r.p&&(!i||u&4)&&pe(r,l,a,a[2],i?Qe(l,a[2],u,null):Je(a[2]),null),n&&Ye(n.update)&&u&1&&n.update.call(null,{target:".svelte-flow__edgelabel-renderer",domNode:a[0]})},i(a){i||(A(r,a),i=!0)},o(a){Z(r,a),i=!1},d(a){a&&N(e),r&&r.d(a),o=!1,s()}}}function Ys(t,e,n){let i,{$$slots:o={},$$scope:s}=e;const{domNode:l}=Ve();return q(t,l,r=>n(0,i=r)),t.$$set=r=>{"$$scope"in r&&n(2,s=r.$$scope)},[i,l,s,o]}class As extends me{constructor(e){super(),be(this,e,Ys,Vs,_e,{})}}function zo(){const{edgeLookup:t,selectionRect:e,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:o,unselectNodesAndEdges:s,elementsSelectable:l}=Ve();return r=>{const a=j(t).get(r);if(!a){console.warn("012",Zt.error012(r));return}(a.selectable||j(l)&&typeof a.selectable>"u")&&(e.set(null),n.set(null),a.selected?a.selected&&j(i)&&s({nodes:[],edges:[a]}):o([r]))}}function Xs(t){let e,n,i=`translate(-50%, -50%) translate(${t[1]}px,${t[2]}px)`,o,s,l;const r=t[5].default,a=je(r,t,t[7],null);return{c(){e=Be("div"),a&&a.c(),this.h()},l(u){e=Le(u,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var f=re(e);a&&a.l(f),f.forEach(N),this.h()},h(){C(e,"class","svelte-flow__edge-label"),C(e,"style",n="pointer-events: all;"+t[0]),C(e,"role","button"),C(e,"tabindex","-1"),ae(e,"transform",i)},m(u,f){p(u,e,f),a&&a.m(e,null),o=!0,s||(l=[Oe(e,"keyup",Bs),Oe(e,"click",t[6])],s=!0)},p(u,f){a&&a.p&&(!o||f&128)&&pe(a,r,u,u[7],o?Qe(r,u[7],f,null):Je(u[7]),null),(!o||f&1&&n!==(n="pointer-events: all;"+u[0]))&&C(e,"style",n);const d=f&1;(f&7&&i!==(i=`translate(-50%, -50%) translate(${u[1]}px,${u[2]}px)`)||d)&&ae(e,"transform",i)},i(u){o||(A(a,u),o=!0)},o(u){Z(a,u),o=!1},d(u){u&&N(e),a&&a.d(u),s=!1,kt(l)}}}function Ws(t){let e,n;return e=new As({props:{$$slots:{default:[Xs]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,o){fe(e,i,o),n=!0},p(i,[o]){const s={};o&135&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}const Bs=()=>{};function Ls(t,e,n){let{$$slots:i={},$$scope:o}=e,{style:s=void 0}=e,{x:l=void 0}=e,{y:r=void 0}=e;const a=zo(),u=xt("svelteflow__edge_id"),f=()=>{u&&a(u)};return t.$$set=d=>{"style"in d&&n(0,s=d.style),"x"in d&&n(1,l=d.x),"y"in d&&n(2,r=d.y),"$$scope"in d&&n(7,o=d.$$scope)},[s,l,r,a,u,i,f,o]}class Ks extends me{constructor(e){super(),be(this,e,Ls,Ws,_e,{style:0,x:1,y:2})}}function Rs(t){let e;return{c(){e=Se("path"),this.h()},l(n){e=Ee(n,"path",{d:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,class:!0}),re(e).forEach(N),this.h()},h(){C(e,"d",t[1]),C(e,"stroke-opacity",0),C(e,"stroke-width",t[10]),C(e,"fill","none"),C(e,"class","svelte-flow__edge-interaction")},m(n,i){p(n,e,i)},p(n,i){i&2&&C(e,"d",n[1])},d(n){n&&N(e)}}}function yi(t){let e,n;return e=new Ks({props:{x:t[3],y:t[4],style:t[5],$$slots:{default:[Zs]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,o){fe(e,i,o),n=!0},p(i,o){const s={};o&8&&(s.x=i[3]),o&16&&(s.y=i[4]),o&32&&(s.style=i[5]),o&4100&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function Zs(t){let e;return{c(){e=Lt(t[2])},l(n){e=Kt(n,t[2])},m(n,i){p(n,e,i)},p(n,i){i&4&&Rt(e,n[2])},d(n){n&&N(e)}}}function Fs(t){let e,n,i,o,s,l,r=t[10]&&Rs(t),a=t[2]&&yi(t);return{c(){e=Se("path"),i=He(),r&&r.c(),o=He(),a&&a.c(),s=Me(),this.h()},l(u){e=Ee(u,"path",{id:!0,d:!0,class:!0,"marker-start":!0,"marker-end":!0,fill:!0,style:!0}),re(e).forEach(N),i=Ie(u),r&&r.l(u),o=Ie(u),a&&a.l(u),s=Me(),this.h()},h(){C(e,"id",t[0]),C(e,"d",t[1]),C(e,"class",n=ze(["svelte-flow__edge-path",t[9]])),C(e,"marker-start",t[6]),C(e,"marker-end",t[7]),C(e,"fill","none"),C(e,"style",t[8])},m(u,f){p(u,e,f),p(u,i,f),r&&r.m(u,f),p(u,o,f),a&&a.m(u,f),p(u,s,f),l=!0},p(u,[f]){(!l||f&1)&&C(e,"id",u[0]),(!l||f&2)&&C(e,"d",u[1]),(!l||f&512&&n!==(n=ze(["svelte-flow__edge-path",u[9]])))&&C(e,"class",n),(!l||f&64)&&C(e,"marker-start",u[6]),(!l||f&128)&&C(e,"marker-end",u[7]),(!l||f&256)&&C(e,"style",u[8]),u[10]&&r.p(u,f),u[2]?a?(a.p(u,f),f&4&&A(a,1)):(a=yi(u),a.c(),A(a,1),a.m(s.parentNode,s)):a&&(Ae(),Z(a,1,1,()=>{a=null}),Xe())},i(u){l||(A(a),l=!0)},o(u){Z(a),l=!1},d(u){u&&(N(e),N(i),N(o),N(s)),r&&r.d(u),a&&a.d(u)}}}function Gs(t,e,n){let{id:i=void 0}=e,{path:o}=e,{label:s=void 0}=e,{labelX:l=void 0}=e,{labelY:r=void 0}=e,{labelStyle:a=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:f=void 0}=e,{style:d=void 0}=e,{interactionWidth:h=20}=e,{class:c=void 0}=e,b=h===void 0?20:h;return t.$$set=m=>{"id"in m&&n(0,i=m.id),"path"in m&&n(1,o=m.path),"label"in m&&n(2,s=m.label),"labelX"in m&&n(3,l=m.labelX),"labelY"in m&&n(4,r=m.labelY),"labelStyle"in m&&n(5,a=m.labelStyle),"markerStart"in m&&n(6,u=m.markerStart),"markerEnd"in m&&n(7,f=m.markerEnd),"style"in m&&n(8,d=m.style),"interactionWidth"in m&&n(11,h=m.interactionWidth),"class"in m&&n(9,c=m.class)},[i,o,s,l,r,a,u,f,d,c,b,h]}class _n extends me{constructor(e){super(),be(this,e,Gs,Fs,_e,{id:0,path:1,label:2,labelX:3,labelY:4,labelStyle:5,markerStart:6,markerEnd:7,style:8,interactionWidth:11,class:9})}}function Us(t){let e,n;return e=new _n({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){ue(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,o){fe(e,i,o),n=!0},p(i,[o]){const s={};o&256&&(s.path=i[8]),o&128&&(s.labelX=i[7]),o&64&&(s.labelY=i[6]),o&1&&(s.label=i[0]),o&2&&(s.labelStyle=i[1]),o&8&&(s.markerStart=i[3]),o&16&&(s.markerEnd=i[4]),o&32&&(s.interactionWidth=i[5]),o&4&&(s.style=i[2]),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function qs(t,e,n){let i,o,s;const l=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];ve(e,l);let{label:r=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:d=void 0}=e,{interactionWidth:h=void 0}=e,{sourceX:c}=e,{sourceY:b}=e,{sourcePosition:m}=e,{targetX:y}=e,{targetY:g}=e,{targetPosition:E}=e;return t.$$set=w=>{e=Ce(Ce({},e),nt(w)),n(15,ve(e,l)),"label"in w&&n(0,r=w.label),"labelStyle"in w&&n(1,a=w.labelStyle),"style"in w&&n(2,u=w.style),"markerStart"in w&&n(3,f=w.markerStart),"markerEnd"in w&&n(4,d=w.markerEnd),"interactionWidth"in w&&n(5,h=w.interactionWidth),"sourceX"in w&&n(9,c=w.sourceX),"sourceY"in w&&n(10,b=w.sourceY),"sourcePosition"in w&&n(11,m=w.sourcePosition),"targetX"in w&&n(12,y=w.targetX),"targetY"in w&&n(13,g=w.targetY),"targetPosition"in w&&n(14,E=w.targetPosition)},t.$$.update=()=>{t.$$.dirty&32256&&n(8,[i,o,s]=ro({sourceX:c,sourceY:b,targetX:y,targetY:g,sourcePosition:m,targetPosition:E}),i,(n(7,o),n(9,c),n(10,b),n(12,y),n(13,g),n(11,m),n(14,E)),(n(6,s),n(9,c),n(10,b),n(12,y),n(13,g),n(11,m),n(14,E)))},[r,a,u,f,d,h,s,o,i,c,b,m,y,g,E]}class Po extends me{constructor(e){super(),be(this,e,qs,Us,_e,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function js(t){let e,n;return e=new _n({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){ue(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,o){fe(e,i,o),n=!0},p(i,[o]){const s={};o&256&&(s.path=i[8]),o&128&&(s.labelX=i[7]),o&64&&(s.labelY=i[6]),o&1&&(s.label=i[0]),o&2&&(s.labelStyle=i[1]),o&8&&(s.markerStart=i[3]),o&16&&(s.markerEnd=i[4]),o&32&&(s.interactionWidth=i[5]),o&4&&(s.style=i[2]),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function ps(t,e,n){let i,o,s;const l=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];ve(e,l);let{label:r=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:d=void 0}=e,{interactionWidth:h=void 0}=e,{sourceX:c}=e,{sourceY:b}=e,{sourcePosition:m}=e,{targetX:y}=e,{targetY:g}=e,{targetPosition:E}=e;return t.$$set=w=>{e=Ce(Ce({},e),nt(w)),n(15,ve(e,l)),"label"in w&&n(0,r=w.label),"labelStyle"in w&&n(1,a=w.labelStyle),"style"in w&&n(2,u=w.style),"markerStart"in w&&n(3,f=w.markerStart),"markerEnd"in w&&n(4,d=w.markerEnd),"interactionWidth"in w&&n(5,h=w.interactionWidth),"sourceX"in w&&n(9,c=w.sourceX),"sourceY"in w&&n(10,b=w.sourceY),"sourcePosition"in w&&n(11,m=w.sourcePosition),"targetX"in w&&n(12,y=w.targetX),"targetY"in w&&n(13,g=w.targetY),"targetPosition"in w&&n(14,E=w.targetPosition)},t.$$.update=()=>{t.$$.dirty&32256&&n(8,[i,o,s]=rn({sourceX:c,sourceY:b,targetX:y,targetY:g,sourcePosition:m,targetPosition:E}),i,(n(7,o),n(9,c),n(10,b),n(12,y),n(13,g),n(11,m),n(14,E)),(n(6,s),n(9,c),n(10,b),n(12,y),n(13,g),n(11,m),n(14,E)))},[r,a,u,f,d,h,s,o,i,c,b,m,y,g,E]}class Js extends me{constructor(e){super(),be(this,e,ps,js,_e,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function Qs(t){let e,n;return e=new _n({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){ue(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,o){fe(e,i,o),n=!0},p(i,[o]){const s={};o&256&&(s.path=i[8]),o&128&&(s.labelX=i[7]),o&64&&(s.labelY=i[6]),o&1&&(s.label=i[0]),o&2&&(s.labelStyle=i[1]),o&8&&(s.markerStart=i[3]),o&16&&(s.markerEnd=i[4]),o&32&&(s.interactionWidth=i[5]),o&4&&(s.style=i[2]),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function xs(t,e,n){let i,o,s;const l=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"];ve(e,l);let{label:r=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:d=void 0}=e,{interactionWidth:h=void 0}=e,{sourceX:c}=e,{sourceY:b}=e,{targetX:m}=e,{targetY:y}=e;return t.$$set=g=>{e=Ce(Ce({},e),nt(g)),n(13,ve(e,l)),"label"in g&&n(0,r=g.label),"labelStyle"in g&&n(1,a=g.labelStyle),"style"in g&&n(2,u=g.style),"markerStart"in g&&n(3,f=g.markerStart),"markerEnd"in g&&n(4,d=g.markerEnd),"interactionWidth"in g&&n(5,h=g.interactionWidth),"sourceX"in g&&n(9,c=g.sourceX),"sourceY"in g&&n(10,b=g.sourceY),"targetX"in g&&n(11,m=g.targetX),"targetY"in g&&n(12,y=g.targetY)},t.$$.update=()=>{t.$$.dirty&7680&&n(8,[i,o,s]=uo({sourceX:c,sourceY:b,targetX:m,targetY:y}),i,(n(7,o),n(9,c),n(10,b),n(11,m),n(12,y)),(n(6,s),n(9,c),n(10,b),n(11,m),n(12,y)))},[r,a,u,f,d,h,s,o,i,c,b,m,y]}class $s extends me{constructor(e){super(),be(this,e,xs,Qs,_e,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,targetX:11,targetY:12})}}function er(t){let e,n;return e=new _n({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){ue(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,o){fe(e,i,o),n=!0},p(i,[o]){const s={};o&256&&(s.path=i[8]),o&128&&(s.labelX=i[7]),o&64&&(s.labelY=i[6]),o&1&&(s.label=i[0]),o&2&&(s.labelStyle=i[1]),o&8&&(s.markerStart=i[3]),o&16&&(s.markerEnd=i[4]),o&32&&(s.interactionWidth=i[5]),o&4&&(s.style=i[2]),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function tr(t,e,n){let i,o,s;const l=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];ve(e,l);let{label:r=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:d=void 0}=e,{interactionWidth:h=void 0}=e,{sourceX:c}=e,{sourceY:b}=e,{sourcePosition:m}=e,{targetX:y}=e,{targetY:g}=e,{targetPosition:E}=e;return t.$$set=w=>{e=Ce(Ce({},e),nt(w)),n(15,ve(e,l)),"label"in w&&n(0,r=w.label),"labelStyle"in w&&n(1,a=w.labelStyle),"style"in w&&n(2,u=w.style),"markerStart"in w&&n(3,f=w.markerStart),"markerEnd"in w&&n(4,d=w.markerEnd),"interactionWidth"in w&&n(5,h=w.interactionWidth),"sourceX"in w&&n(9,c=w.sourceX),"sourceY"in w&&n(10,b=w.sourceY),"sourcePosition"in w&&n(11,m=w.sourcePosition),"targetX"in w&&n(12,y=w.targetX),"targetY"in w&&n(13,g=w.targetY),"targetPosition"in w&&n(14,E=w.targetPosition)},t.$$.update=()=>{t.$$.dirty&32256&&n(8,[i,o,s]=rn({sourceX:c,sourceY:b,targetX:y,targetY:g,sourcePosition:m,targetPosition:E,borderRadius:0}),i,(n(7,o),n(9,c),n(10,b),n(12,y),n(13,g),n(11,m),n(14,E)),(n(6,s),n(9,c),n(10,b),n(12,y),n(13,g),n(11,m),n(14,E)))},[r,a,u,f,d,h,s,o,i,c,b,m,y,g,E]}class nr extends me{constructor(e){super(),be(this,e,tr,er,_e,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function ir(t,e){const n=t.set,i=e.set,o=j(t),s=j(e);let r=o.length===0&&s.length>0?s:o;t.set(r);const a=u=>{const f=n(u);return r=f,i(r),f};t.set=e.set=a,t.update=e.update=u=>a(u(r))}function or(t,e){const n=t.set,i=e.set;let o=j(e);t.set(o);const s=l=>{n(l),i(l),o=l};t.set=e.set=s,t.update=e.update=l=>s(l(o))}const lr=(t,e,n)=>{if(!n)return;const i=j(t),o=e.set,s=n.set;let l=n?j(n):{x:0,y:0,zoom:1};e.set(l),e.set=r=>(o(r),s(r),l=r,r),n.set=r=>(i==null||i.syncViewport(r),o(r),s(r),l=r,r),e.update=r=>{e.set(r(l))},n.update=r=>{n.set(r(l))}},sr=(t,e,n,i=[0,0])=>{const{subscribe:o,set:s,update:l}=ne([]);let r=t,a={},u=!0;const f=b=>(co(b,e,n,{elevateNodesOnSelect:u,nodeOrigin:i,defaults:a,checkEquality:!1}),r=b,s(r),r),d=b=>f(b(r)),h=b=>{a=b},c=b=>{u=b.elevateNodesOnSelect??u};return f(r),{subscribe:o,set:f,update:d,setDefaultOptions:h,setOptions:c}},rr=(t,e,n,i)=>{const{subscribe:o,set:s,update:l}=ne([]);let r=t,a={};const u=h=>{const c=a?h.map(b=>({...a,...b})):h;mo(e,n,c),r=c,s(r)},f=h=>u(h(r)),d=h=>{a=h};return u(r),{subscribe:o,set:u,update:f,setDefaultOptions:d}},Oo={input:Os,output:Is,default:Mo,group:Ts},Do={straight:$s,smoothstep:Js,default:Po,step:nr},ar=({nodes:t=[],edges:e=[],width:n,height:i,fitView:o,nodeOrigin:s})=>{const l=new Map,r=new Map,a=s??[0,0];co(t,l,r,{nodeOrigin:a,elevateNodesOnSelect:!1,checkEquality:!1});const u=new Map,f=new Map;mo(u,f,e);let d={x:0,y:0,zoom:1};if(o&&n&&i){const h=Gt(l,{filter:c=>!!((c.width||c.initialWidth)&&(c.height||c.initialHeight))});d=oo(h,n,i,.5,2,.1)}return{flowId:ne(null),nodes:sr(t,l,r,a),nodeLookup:$e(l),parentLookup:$e(r),edgeLookup:$e(f),visibleNodes:$e([]),edges:rr(e,u,f),visibleEdges:$e([]),connectionLookup:$e(u),height:ne(500),width:ne(500),minZoom:ne(.5),maxZoom:ne(2),nodeOrigin:ne(a),nodeDragThreshold:ne(1),nodeExtent:ne(xn),translateExtent:ne(xn),autoPanOnNodeDrag:ne(!0),autoPanOnConnect:ne(!0),fitViewOnInit:ne(!1),fitViewOnInitDone:ne(!1),fitViewOptions:ne(void 0),panZoom:ne(null),snapGrid:ne(null),dragging:ne(!1),selectionRect:ne(null),selectionKeyPressed:ne(!1),multiselectionKeyPressed:ne(!1),deleteKeyPressed:ne(!1),panActivationKeyPressed:ne(!1),zoomActivationKeyPressed:ne(!1),selectionRectMode:ne(null),selectionMode:ne(nn.Partial),nodeTypes:ne(Oo),edgeTypes:ne(Do),viewport:ne(d),connectionMode:ne(Ct.Strict),domNode:ne(null),connection:$e(vn),connectionLineType:ne(Tt.Bezier),connectionRadius:ne(20),isValidConnection:ne(()=>!0),nodesDraggable:ne(!0),nodesConnectable:ne(!0),elementsSelectable:ne(!0),selectNodesOnDrag:ne(!0),markers:$e([]),defaultMarkerColor:ne("#b1b1b7"),lib:$e("svelte"),onlyRenderVisibleElements:ne(!1),onerror:ne(vl),ondelete:ne(void 0),onedgecreate:ne(void 0),onconnect:ne(void 0),onconnectstart:ne(void 0),onconnectend:ne(void 0),onbeforedelete:ne(void 0),nodesInitialized:ne(!1),edgesInitialized:ne(!1),viewportInitialized:ne(!1),initialized:$e(!1)}};function ur(t){const e=It([t.edges,t.nodes,t.nodeLookup,t.onlyRenderVisibleElements,t.viewport,t.width,t.height],([n,,i,o,s,l,r])=>o&&l&&r?n.filter(u=>{const f=i.get(u.source),d=i.get(u.target);return f&&d&&Wl({sourceNode:f,targetNode:d,width:l,height:r,transform:[s.x,s.y,s.zoom]})}):n);return It([e,t.nodes,t.nodeLookup,t.connectionMode,t.onerror],([n,,i,o,s])=>n.reduce((r,a)=>{const u=i.get(a.source),f=i.get(a.target);if(!u||!f)return r;const d=Gl({id:a.id,sourceNode:u,targetNode:f,sourceHandle:a.sourceHandle||null,targetHandle:a.targetHandle||null,connectionMode:o,onError:s});return d&&r.push({...a,zIndex:Xl({selected:a.selected,zIndex:a.zIndex,sourceNode:u,targetNode:f,elevateOnSelect:!1}),...d}),r},[]))}function fr(t){return It([t.nodeLookup,t.onlyRenderVisibleElements,t.width,t.height,t.viewport,t.nodes],([e,n,i,o,s])=>{const l=[s.x,s.y,s.zoom];return n?to(e,{x:0,y:0,width:i,height:o},l,!0):Array.from(e.values())})}const Rn=Symbol();function cr({nodes:t,edges:e,width:n,height:i,fitView:o,nodeOrigin:s}){const l=ar({nodes:t,edges:e,width:n,height:i,fitView:o,nodeOrigin:s});function r(k){l.nodeTypes.set({...Oo,...k})}function a(k){l.edgeTypes.set({...Do,...k})}function u(k){const S=j(l.edges);l.edges.set(Kl(k,S))}const f=(k,S=!1)=>{var D;const P=j(l.nodeLookup);for(const[O,Y]of k){const U=(D=P.get(O))==null?void 0:D.internals.userNode;U&&(U.position=Y.position,U.dragging=S)}l.nodes.update(O=>O)};function d(k){var O,Y,U;const S=j(l.nodeLookup),{changes:P,updatedInternals:D}=Jl(k,S,j(l.parentLookup),j(l.domNode),j(l.nodeOrigin));if(D){if(!j(l.fitViewOnInitDone)&&j(l.fitViewOnInit)){const G=j(l.fitViewOptions),V=c({...G,nodes:G==null?void 0:G.nodes});l.fitViewOnInitDone.set(V)}for(const G of P){const V=(O=S.get(G.id))==null?void 0:O.internals.userNode;if(V)switch(G.type){case"dimensions":{const $={...V.measured,...G.dimensions};G.setAttributes&&(V.width=((Y=G.dimensions)==null?void 0:Y.width)??V.width,V.height=((U=G.dimensions)==null?void 0:U.height)??V.height),V.measured=$;break}case"position":V.position=G.position??V.position;break}}l.nodes.update(G=>G),j(l.nodesInitialized)||l.nodesInitialized.set(!0)}}function h(k){const S=j(l.panZoom);if(!S)return Promise.resolve(!1);const P=ni(j(l.nodeLookup),k);return ii({nodes:P,width:j(l.width),height:j(l.height),minZoom:j(l.minZoom),maxZoom:j(l.maxZoom),panZoom:S},k)}function c(k){const S=j(l.panZoom);if(!S)return!1;const P=ni(j(l.nodeLookup),k);return ii({nodes:P,width:j(l.width),height:j(l.height),minZoom:j(l.minZoom),maxZoom:j(l.maxZoom),panZoom:S},k),P.size>0}function b(k,S){const P=j(l.panZoom);return P?P.scaleBy(k,S):Promise.resolve(!1)}function m(k){return b(1.2,k)}function y(k){return b(1/1.2,k)}function g(k){const S=j(l.panZoom);S&&(S.setScaleExtent([k,j(l.maxZoom)]),l.minZoom.set(k))}function E(k){const S=j(l.panZoom);S&&(S.setScaleExtent([j(l.minZoom),k]),l.maxZoom.set(k))}function w(k){const S=j(l.panZoom);S&&(S.setTranslateExtent(k),l.translateExtent.set(k))}function M(k){let S=!1;return k.forEach(P=>{P.selected&&(P.selected=!1,S=!0)}),S}function X(k){var S;(S=j(l.panZoom))==null||S.setClickDistance(k)}function K(k){M((k==null?void 0:k.nodes)||j(l.nodes))&&l.nodes.set(j(l.nodes)),M((k==null?void 0:k.edges)||j(l.edges))&&l.edges.set(j(l.edges))}l.deleteKeyPressed.subscribe(async k=>{var S;if(k){const P=j(l.nodes),D=j(l.edges),O=P.filter(V=>V.selected),Y=D.filter(V=>V.selected),{nodes:U,edges:G}=await Hl({nodesToRemove:O,edgesToRemove:Y,nodes:P,edges:D,onBeforeDelete:j(l.onbeforedelete)});(U.length||G.length)&&(l.nodes.update(V=>V.filter($=>!U.some(ee=>ee.id===$.id))),l.edges.update(V=>V.filter($=>!G.some(ee=>ee.id===$.id))),(S=j(l.ondelete))==null||S({nodes:U,edges:G}))}});function T(k){const S=j(l.multiselectionKeyPressed);l.nodes.update(P=>P.map(D=>{const O=k.includes(D.id),Y=S&&D.selected||O;return D.selected=Y,D})),S||l.edges.update(P=>P.map(D=>(D.selected=!1,D)))}function I(k){const S=j(l.multiselectionKeyPressed);l.edges.update(P=>P.map(D=>{const O=k.includes(D.id),Y=S&&D.selected||O;return D.selected=Y,D})),S||l.nodes.update(P=>P.map(D=>(D.selected=!1,D)))}function H(k){var P;const S=(P=j(l.nodes))==null?void 0:P.find(D=>D.id===k);if(!S){console.warn("012",Zt.error012(k));return}l.selectionRect.set(null),l.selectionRectMode.set(null),S.selected?S.selected&&j(l.multiselectionKeyPressed)&&K({nodes:[S],edges:[]}):T([k])}function B(k){const S=j(l.viewport);return Ql({delta:k,panZoom:j(l.panZoom),transform:[S.x,S.y,S.zoom],translateExtent:j(l.translateExtent),width:j(l.width),height:j(l.height)})}const F=ne(vn),J=k=>{F.set({...k})};function W(){F.set(vn)}function _(){l.fitViewOnInitDone.set(!1),l.selectionRect.set(null),l.selectionRectMode.set(null),l.snapGrid.set(null),l.isValidConnection.set(()=>!0),K(),W()}return{...l,visibleEdges:ur(l),visibleNodes:fr(l),connection:It([F,l.viewport],([k,S])=>k.inProgress?{...k,to:mn(k.to,[S.x,S.y,S.zoom])}:{...k}),markers:It([l.edges,l.defaultMarkerColor,l.flowId],([k,S,P])=>Ul(k,{defaultColor:S,id:P})),initialized:(()=>{let k=!1;const S=j(l.nodes).length,P=j(l.edges).length;return It([l.nodesInitialized,l.edgesInitialized,l.viewportInitialized],([D,O,Y])=>k||(S===0?k=Y:P===0?k=Y&&D:k=Y&&D&&O,k))})(),syncNodeStores:k=>ir(l.nodes,k),syncEdgeStores:k=>or(l.edges,k),syncViewport:k=>lr(l.panZoom,l.viewport,k),setNodeTypes:r,setEdgeTypes:a,addEdge:u,updateNodePositions:f,updateNodeInternals:d,zoomIn:m,zoomOut:y,fitView:k=>h(k),setMinZoom:g,setMaxZoom:E,setTranslateExtent:w,setPaneClickDistance:X,unselectNodesAndEdges:K,addSelectedNodes:T,addSelectedEdges:I,handleNodeSelection:H,panBy:B,updateConnection:J,cancelConnection:W,reset:_}}function Ve(){const t=xt(Rn);if(!t)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return t.getStore()}function dr({nodes:t,edges:e,width:n,height:i,fitView:o,nodeOrigin:s}){const l=cr({nodes:t,edges:e,width:n,height:i,fitView:o,nodeOrigin:s});return $t(Rn,{getStore:()=>l}),l}function hr(t,e){const{panZoom:n,minZoom:i,maxZoom:o,initialViewport:s,viewport:l,dragging:r,translateExtent:a,paneClickDistance:u}=e,f=gs({domNode:t,minZoom:i,maxZoom:o,translateExtent:a,viewport:s,paneClickDistance:u,onTransformChange:h=>l.set({x:h[0],y:h[1],zoom:h[2]}),onDraggingChange:r.set}),d=f.getViewport();return l.set(d),n.set(f),f.update(e),{update(h){f.update(h)}}}function gr(t){let e,n,i,o,s;const l=t[34].default,r=je(l,t,t[33],null);return{c(){e=Be("div"),r&&r.c(),this.h()},l(a){e=Le(a,"DIV",{class:!0});var u=re(e);r&&r.l(u),u.forEach(N),this.h()},h(){C(e,"class","svelte-flow__zoom svelte-4xkw84")},m(a,u){p(a,e,u),r&&r.m(e,null),i=!0,o||(s=Ge(n=hr.call(null,e,{viewport:t[18],minZoom:t[12],maxZoom:t[13],initialViewport:t[11],dragging:t[23],panZoom:t[19],onPanZoomStart:t[0],onPanZoom:t[1],onPanZoomEnd:t[2],zoomOnScroll:t[5],zoomOnDoubleClick:t[6],zoomOnPinch:t[7],panOnScroll:t[9],panOnDrag:t[10],panOnScrollSpeed:.5,panOnScrollMode:t[3]||lt.Free,zoomActivationKeyPressed:t[14],preventScrolling:typeof t[4]=="boolean"?t[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!t[15],translateExtent:t[16],lib:t[17],paneClickDistance:t[8]})),o=!0)},p(a,u){r&&r.p&&(!i||u[1]&4)&&pe(r,l,a,a[33],i?Qe(l,a[33],u,null):Je(a[33]),null),n&&Ye(n.update)&&u[0]&262143&&n.update.call(null,{viewport:a[18],minZoom:a[12],maxZoom:a[13],initialViewport:a[11],dragging:a[23],panZoom:a[19],onPanZoomStart:a[0],onPanZoom:a[1],onPanZoomEnd:a[2],zoomOnScroll:a[5],zoomOnDoubleClick:a[6],zoomOnPinch:a[7],panOnScroll:a[9],panOnDrag:a[10],panOnScrollSpeed:.5,panOnScrollMode:a[3]||lt.Free,zoomActivationKeyPressed:a[14],preventScrolling:typeof a[4]=="boolean"?a[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!a[15],translateExtent:a[16],lib:a[17],paneClickDistance:a[8]})},i(a){i||(A(r,a),i=!0)},o(a){Z(r,a),i=!1},d(a){a&&N(e),r&&r.d(a),o=!1,s()}}}function mr(t,e,n){let i,o,s,l,r,a,u,f,d,h,c,{$$slots:b={},$$scope:m}=e,{initialViewport:y=void 0}=e,{onMoveStart:g=void 0}=e,{onMove:E=void 0}=e,{onMoveEnd:w=void 0}=e,{panOnScrollMode:M}=e,{preventScrolling:X}=e,{zoomOnScroll:K}=e,{zoomOnDoubleClick:T}=e,{zoomOnPinch:I}=e,{panOnDrag:H}=e,{panOnScroll:B}=e,{paneClickDistance:F}=e;const{viewport:J,panZoom:W,selectionRect:_,minZoom:k,maxZoom:S,dragging:P,translateExtent:D,lib:O,panActivationKeyPressed:Y,zoomActivationKeyPressed:U,viewportInitialized:G}=Ve();return q(t,_,V=>n(15,d=V)),q(t,k,V=>n(12,a=V)),q(t,S,V=>n(13,u=V)),q(t,D,V=>n(16,h=V)),q(t,O,V=>n(17,c=V)),q(t,Y,V=>n(32,r=V)),q(t,U,V=>n(14,f=V)),q(t,G,V=>n(35,l=V)),fn(()=>{en(G,l=!0,l)}),t.$$set=V=>{"initialViewport"in V&&n(29,y=V.initialViewport),"onMoveStart"in V&&n(0,g=V.onMoveStart),"onMove"in V&&n(1,E=V.onMove),"onMoveEnd"in V&&n(2,w=V.onMoveEnd),"panOnScrollMode"in V&&n(3,M=V.panOnScrollMode),"preventScrolling"in V&&n(4,X=V.preventScrolling),"zoomOnScroll"in V&&n(5,K=V.zoomOnScroll),"zoomOnDoubleClick"in V&&n(6,T=V.zoomOnDoubleClick),"zoomOnPinch"in V&&n(7,I=V.zoomOnPinch),"panOnDrag"in V&&n(30,H=V.panOnDrag),"panOnScroll"in V&&n(31,B=V.panOnScroll),"paneClickDistance"in V&&n(8,F=V.paneClickDistance),"$$scope"in V&&n(33,m=V.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&536870912&&n(11,i=y||{x:0,y:0,zoom:1}),t.$$.dirty[0]&1073741824|t.$$.dirty[1]&2&&n(10,o=r||H),t.$$.dirty[1]&3&&n(9,s=r||B)},[g,E,w,M,X,K,T,I,F,s,o,i,a,u,f,d,h,c,J,W,_,k,S,P,D,O,Y,U,G,y,H,B,r,m,b]}class br extends me{constructor(e){super(),be(this,e,mr,gr,_e,{initialViewport:29,onMoveStart:0,onMove:1,onMoveEnd:2,panOnScrollMode:3,preventScrolling:4,zoomOnScroll:5,zoomOnDoubleClick:6,zoomOnPinch:7,panOnDrag:30,panOnScroll:31,paneClickDistance:8},null,[-1,-1])}}function yr(t){let e,n,i,o;const s=t[28].default,l=je(s,t,t[27],null);return{c(){e=Be("div"),l&&l.c(),this.h()},l(r){e=Le(r,"DIV",{class:!0});var a=re(e);l&&l.l(a),a.forEach(N),this.h()},h(){C(e,"class","svelte-flow__pane svelte-1esy7hx"),le(e,"draggable",t[0]===!0||Array.isArray(t[0])&&t[0].includes(0)),le(e,"dragging",t[4]),le(e,"selection",t[1])},m(r,a){p(r,e,a),l&&l.m(e,null),t[29](e),n=!0,i||(o=[Oe(e,"click",function(){Ye(t[3]?void 0:Qt(t[15],t[2]))&&(t[3]?void 0:Qt(t[15],t[2])).apply(this,arguments)}),Oe(e,"pointerdown",function(){Ye(t[3]?t[16]:void 0)&&(t[3]?t[16]:void 0).apply(this,arguments)}),Oe(e,"pointermove",function(){Ye(t[3]?t[17]:void 0)&&(t[3]?t[17]:void 0).apply(this,arguments)}),Oe(e,"pointerup",function(){Ye(t[3]?t[18]:void 0)&&(t[3]?t[18]:void 0).apply(this,arguments)}),Oe(e,"contextmenu",function(){Ye(Qt(t[19],t[2]))&&Qt(t[19],t[2]).apply(this,arguments)})],i=!0)},p(r,a){t=r,l&&l.p&&(!n||a[0]&134217728)&&pe(l,s,t,t[27],n?Qe(s,t[27],a,null):Je(t[27]),null),(!n||a[0]&1)&&le(e,"draggable",t[0]===!0||Array.isArray(t[0])&&t[0].includes(0)),(!n||a[0]&16)&&le(e,"dragging",t[4]),(!n||a[0]&2)&&le(e,"selection",t[1])},i(r){n||(A(l,r),n=!0)},o(r){Z(l,r),n=!1},d(r){r&&N(e),l&&l.d(r),t[29](null),i=!1,kt(o)}}}function Qt(t,e){return n=>{n.target===e&&(t==null||t(n))}}function _i(t){return e=>{const n=t.includes(e.id);return e.selected!==n&&(e.selected=n),e}}function _r(t,e,n){let i,o,s,l,r,a,u,f,d,h,c,b,m,{$$slots:y={},$$scope:g}=e,{panOnDrag:E=void 0}=e,{selectionOnDrag:w=void 0}=e;const M=cn(),{nodes:X,nodeLookup:K,edges:T,viewport:I,dragging:H,elementsSelectable:B,selectionRect:F,selectionRectMode:J,selectionKeyPressed:W,selectionMode:_,panActivationKeyPressed:k,unselectNodesAndEdges:S}=Ve();q(t,K,v=>n(36,d=v)),q(t,T,v=>n(33,a=v)),q(t,I,v=>n(35,f=v)),q(t,H,v=>n(4,m=v)),q(t,B,v=>n(25,c=v)),q(t,F,v=>n(24,h=v)),q(t,J,v=>n(23,r=v)),q(t,W,v=>n(22,l=v)),q(t,_,v=>n(34,u=v)),q(t,k,v=>n(26,b=v));let P,D=null,O=[],Y=!1;function U(v){if(Y){Y=!1;return}M("paneclick",{event:v}),S(),J.set(null)}function G(v){var se,de;if(D=P.getBoundingClientRect(),!B||!o||v.button!==0||v.target!==P||!D)return;(de=(se=v.target)==null?void 0:se.setPointerCapture)==null||de.call(se,v.pointerId);const{x:te,y:oe}=ut(v,D);S(),F.set({width:0,height:0,startX:te,startY:oe,x:te,y:oe})}function V(v){if(!o||!D||!h)return;Y=!0;const te=ut(v,D),oe=h.startX??0,se=h.startY??0,de={...h,x:te.x<oe?te.x:oe,y:te.y<se?te.y:se,width:Math.abs(te.x-oe),height:Math.abs(te.y-se)},ye=O.map(Pe=>Pe.id),De=Tn(O,a).map(Pe=>Pe.id);O=to(d,de,[f.x,f.y,f.zoom],u===nn.Partial,!0);const L=Tn(O,a).map(Pe=>Pe.id),Te=O.map(Pe=>Pe.id);(ye.length!==Te.length||Te.some(Pe=>!ye.includes(Pe)))&&X.update(Pe=>Pe.map(_i(Te))),(De.length!==L.length||L.some(Pe=>!De.includes(Pe)))&&T.update(Pe=>Pe.map(_i(L))),J.set("user"),F.set(de)}function $(v){var te,oe;v.button===0&&((oe=(te=v.target)==null?void 0:te.releasePointerCapture)==null||oe.call(te,v.pointerId),!o&&r==="user"&&v.target===P&&(U==null||U(v)),F.set(null),O.length>0&&en(J,r="nodes",r),l&&(Y=!1))}const ee=v=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){v.preventDefault();return}M("panecontextmenu",{event:v})};function ie(v){An[v?"unshift":"push"](()=>{P=v,n(2,P)})}return t.$$set=v=>{"panOnDrag"in v&&n(0,E=v.panOnDrag),"selectionOnDrag"in v&&n(20,w=v.selectionOnDrag),"$$scope"in v&&n(27,g=v.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&67108865&&n(21,i=b||E),t.$$.dirty[0]&24117248&&n(1,o=l||h||w&&i!==!0),t.$$.dirty[0]&41943042&&n(3,s=c&&(o||r==="user"))},[E,o,P,s,m,K,T,I,H,B,F,J,W,_,k,U,G,V,$,ee,w,i,l,r,h,c,b,g,y,ie]}class kr extends me{constructor(e){super(),be(this,e,_r,yr,_e,{panOnDrag:0,selectionOnDrag:20},null,[-1,-1])}}function wr(t){let e,n;const i=t[3].default,o=je(i,t,t[2],null);return{c(){e=Be("div"),o&&o.c(),this.h()},l(s){e=Le(s,"DIV",{class:!0,style:!0});var l=re(e);o&&o.l(l),l.forEach(N),this.h()},h(){C(e,"class","svelte-flow__viewport xyflow__viewport svelte-1floaup"),ae(e,"transform","translate("+t[0].x+"px, "+t[0].y+"px) scale("+t[0].zoom+")")},m(s,l){p(s,e,l),o&&o.m(e,null),n=!0},p(s,[l]){o&&o.p&&(!n||l&4)&&pe(o,i,s,s[2],n?Qe(i,s[2],l,null):Je(s[2]),null),(!n||l&1)&&ae(e,"transform","translate("+s[0].x+"px, "+s[0].y+"px) scale("+s[0].zoom+")")},i(s){n||(A(o,s),n=!0)},o(s){Z(o,s),n=!1},d(s){s&&N(e),o&&o.d(s)}}}function Sr(t,e,n){let i,{$$slots:o={},$$scope:s}=e;const{viewport:l}=Ve();return q(t,l,r=>n(0,i=r)),t.$$set=r=>{"$$scope"in r&&n(2,s=r.$$scope)},[i,l,s,o]}class Er extends me{constructor(e){super(),be(this,e,Sr,wr,_e,{})}}function Ho(t,e){const{store:n,onDrag:i,onDragStart:o,onDragStop:s,onNodeMouseDown:l}=e,r=$l({onDrag:i,onDragStart:o,onDragStop:s,onNodeMouseDown:l,getStoreItems:()=>{const u=j(n.snapGrid),f=j(n.viewport);return{nodes:j(n.nodes),nodeLookup:j(n.nodeLookup),edges:j(n.edges),nodeExtent:j(n.nodeExtent),snapGrid:u||[0,0],snapToGrid:!!u,nodeOrigin:j(n.nodeOrigin),multiSelectionActive:j(n.multiselectionKeyPressed),domNode:j(n.domNode),transform:[f.x,f.y,f.zoom],autoPanOnNodeDrag:j(n.autoPanOnNodeDrag),nodesDraggable:j(n.nodesDraggable),selectNodesOnDrag:j(n.selectNodesOnDrag),nodeDragThreshold:j(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function a(u,f){if(f.disabled){r.destroy();return}r.update({domNode:u,noDragClassName:f.noDragClass,handleSelector:f.handleSelector,nodeId:f.nodeId,isSelectable:f.isSelectable,nodeClickDistance:f.nodeClickDistance})}return a(t,e),{update(u){a(t,u)},destroy(){r.destroy()}}}function Cr({width:t,height:e,initialWidth:n,initialHeight:i,measuredWidth:o,measuredHeight:s}){if(o===void 0&&s===void 0){const l=t??n,r=e??i;return{width:l?`width:${l}px;`:"",height:r?`height:${r}px;`:""}}return{width:t?`width:${t}px;`:"",height:e?`height:${e}px;`:""}}function ki(t){let e,n,i,o,s,l=`translate(${t[12]}px, ${t[13]}px)`,r,a,u;var f=t[27];function d(h,c){return{props:{data:h[2],id:h[1],selected:h[3],selectable:h[5],deletable:h[7],sourcePosition:h[14],targetPosition:h[15],zIndex:h[16],dragging:h[9],draggable:h[4],dragHandle:h[19],parentId:h[21],type:h[25],isConnectable:h[28],positionAbsoluteX:h[12],positionAbsoluteY:h[13],width:h[17],height:h[18]}}}return f&&(n=tn(f,d(t))),{c(){e=Be("div"),n&&ue(n.$$.fragment),this.h()},l(h){e=Le(h,"DIV",{"data-id":!0,class:!0,style:!0});var c=re(e);n&&ge(n.$$.fragment,c),c.forEach(N),this.h()},h(){C(e,"data-id",t[1]),C(e,"class",i=ze(["svelte-flow__node",`svelte-flow__node-${t[25]}`,t[23]])),C(e,"style",o=(t[10]??"")+";"+t[26].width+t[26].height),le(e,"dragging",t[9]),le(e,"selected",t[3]),le(e,"draggable",t[4]),le(e,"connectable",t[6]),le(e,"selectable",t[5]),le(e,"nopan",t[4]),le(e,"parent",t[11]),ae(e,"z-index",t[16]),ae(e,"transform",l),ae(e,"visibility",t[20]?"visible":"hidden")},m(h,c){p(h,e,c),n&&fe(n,e,null),t[50](e),r=!0,a||(u=[Ge(s=Ho.call(null,e,{nodeId:t[1],isSelectable:t[5],disabled:!1,handleSelector:t[19],noDragClass:"nodrag",nodeClickDistance:t[22],onNodeMouseDown:t[31],onDrag:t[47],onDragStart:t[48],onDragStop:t[49],store:t[29]})),Oe(e,"click",t[34]),Oe(e,"mouseenter",t[51]),Oe(e,"mouseleave",t[52]),Oe(e,"mousemove",t[53]),Oe(e,"contextmenu",t[54])],a=!0)},p(h,c){if(c[0]&134217728&&f!==(f=h[27])){if(n){Ae();const m=n;Z(m.$$.fragment,1,0,()=>{ce(m,1)}),Xe()}f?(n=tn(f,d(h)),ue(n.$$.fragment),A(n.$$.fragment,1),fe(n,e,null)):n=null}else if(f){const m={};c[0]&4&&(m.data=h[2]),c[0]&2&&(m.id=h[1]),c[0]&8&&(m.selected=h[3]),c[0]&32&&(m.selectable=h[5]),c[0]&128&&(m.deletable=h[7]),c[0]&16384&&(m.sourcePosition=h[14]),c[0]&32768&&(m.targetPosition=h[15]),c[0]&65536&&(m.zIndex=h[16]),c[0]&512&&(m.dragging=h[9]),c[0]&16&&(m.draggable=h[4]),c[0]&524288&&(m.dragHandle=h[19]),c[0]&2097152&&(m.parentId=h[21]),c[0]&33554432&&(m.type=h[25]),c[0]&268435456&&(m.isConnectable=h[28]),c[0]&4096&&(m.positionAbsoluteX=h[12]),c[0]&8192&&(m.positionAbsoluteY=h[13]),c[0]&131072&&(m.width=h[17]),c[0]&262144&&(m.height=h[18]),n.$set(m)}(!r||c[0]&2)&&C(e,"data-id",h[1]),(!r||c[0]&41943040&&i!==(i=ze(["svelte-flow__node",`svelte-flow__node-${h[25]}`,h[23]])))&&C(e,"class",i),(!r||c[0]&67109888&&o!==(o=(h[10]??"")+";"+h[26].width+h[26].height))&&C(e,"style",o),s&&Ye(s.update)&&c[0]&4718626&&s.update.call(null,{nodeId:h[1],isSelectable:h[5],disabled:!1,handleSelector:h[19],noDragClass:"nodrag",nodeClickDistance:h[22],onNodeMouseDown:h[31],onDrag:h[47],onDragStart:h[48],onDragStop:h[49],store:h[29]}),(!r||c[0]&41943552)&&le(e,"dragging",h[9]),(!r||c[0]&41943048)&&le(e,"selected",h[3]),(!r||c[0]&41943056)&&le(e,"draggable",h[4]),(!r||c[0]&41943104)&&le(e,"connectable",h[6]),(!r||c[0]&41943072)&&le(e,"selectable",h[5]),(!r||c[0]&41943056)&&le(e,"nopan",h[4]),(!r||c[0]&41945088)&&le(e,"parent",h[11]);const b=c[0]&67109888;(c[0]&67175424||b)&&ae(e,"z-index",h[16]),(c[0]&67122176&&l!==(l=`translate(${h[12]}px, ${h[13]}px)`)||b)&&ae(e,"transform",l),(c[0]&68158464||b)&&ae(e,"visibility",h[20]?"visible":"hidden")},i(h){r||(n&&A(n.$$.fragment,h),r=!0)},o(h){n&&Z(n.$$.fragment,h),r=!1},d(h){h&&N(e),n&&ce(n),t[50](null),a=!1,kt(u)}}}function Mr(t){let e,n,i=!t[8]&&ki(t);return{c(){i&&i.c(),e=Me()},l(o){i&&i.l(o),e=Me()},m(o,s){i&&i.m(o,s),p(o,e,s),n=!0},p(o,s){o[8]?i&&(Ae(),Z(i,1,1,()=>{i=null}),Xe()):i?(i.p(o,s),s[0]&256&&A(i,1)):(i=ki(o),i.c(),A(i,1),i.m(e.parentNode,e))},i(o){n||(A(i),n=!0)},o(o){Z(i),n=!1},d(o){o&&N(e),i&&i.d(o)}}}function zr(t,e,n){let i,o,s,l,r,a,{node:u}=e,{id:f}=e,{data:d={}}=e,{selected:h=!1}=e,{draggable:c=void 0}=e,{selectable:b=void 0}=e,{connectable:m=!0}=e,{deletable:y=!0}=e,{hidden:g=!1}=e,{dragging:E=!1}=e,{resizeObserver:w=null}=e,{style:M=void 0}=e,{type:X="default"}=e,{isParent:K=!1}=e,{positionX:T}=e,{positionY:I}=e,{sourcePosition:H=void 0}=e,{targetPosition:B=void 0}=e,{zIndex:F}=e,{measuredWidth:J=void 0}=e,{measuredHeight:W=void 0}=e,{initialWidth:_=void 0}=e,{initialHeight:k=void 0}=e,{width:S=void 0}=e,{height:P=void 0}=e,{dragHandle:D=void 0}=e,{initialized:O=!1}=e,{parentId:Y=void 0}=e,{nodeClickDistance:U=void 0}=e,{class:G=""}=e;const V=Ve(),{nodeTypes:$,nodeDragThreshold:ee,selectNodesOnDrag:ie,handleNodeSelection:v,updateNodeInternals:te}=V;q(t,$,R=>n(46,r=R));let oe,se=null;const de=cn(),ye=ne(m);q(t,ye,R=>n(28,a=R));let De,L,Te;$t("svelteflow__node_id",f),$t("svelteflow__node_connectable",ye),ji(()=>{se&&(w==null||w.unobserve(se))});function Pe(R){b&&(!j(ie)||!c||j(ee)>0)&&v(f),de("nodeclick",{node:u.internals.userNode,event:R})}const ct=(R,wt,Re,Ue)=>{de("nodedrag",{event:R,targetNode:Re,nodes:Ue})},st=(R,wt,Re,Ue)=>{de("nodedragstart",{event:R,targetNode:Re,nodes:Ue})},rt=(R,wt,Re,Ue)=>{de("nodedragstop",{event:R,targetNode:Re,nodes:Ue})};function Ke(R){An[R?"unshift":"push"](()=>{oe=R,n(24,oe)})}const it=R=>de("nodemouseenter",{node:u,event:R}),x=R=>de("nodemouseleave",{node:u,event:R}),dt=R=>de("nodemousemove",{node:u,event:R}),ht=R=>de("nodecontextmenu",{node:u,event:R});return t.$$set=R=>{"node"in R&&n(0,u=R.node),"id"in R&&n(1,f=R.id),"data"in R&&n(2,d=R.data),"selected"in R&&n(3,h=R.selected),"draggable"in R&&n(4,c=R.draggable),"selectable"in R&&n(5,b=R.selectable),"connectable"in R&&n(6,m=R.connectable),"deletable"in R&&n(7,y=R.deletable),"hidden"in R&&n(8,g=R.hidden),"dragging"in R&&n(9,E=R.dragging),"resizeObserver"in R&&n(35,w=R.resizeObserver),"style"in R&&n(10,M=R.style),"type"in R&&n(36,X=R.type),"isParent"in R&&n(11,K=R.isParent),"positionX"in R&&n(12,T=R.positionX),"positionY"in R&&n(13,I=R.positionY),"sourcePosition"in R&&n(14,H=R.sourcePosition),"targetPosition"in R&&n(15,B=R.targetPosition),"zIndex"in R&&n(16,F=R.zIndex),"measuredWidth"in R&&n(37,J=R.measuredWidth),"measuredHeight"in R&&n(38,W=R.measuredHeight),"initialWidth"in R&&n(39,_=R.initialWidth),"initialHeight"in R&&n(40,k=R.initialHeight),"width"in R&&n(17,S=R.width),"height"in R&&n(18,P=R.height),"dragHandle"in R&&n(19,D=R.dragHandle),"initialized"in R&&n(20,O=R.initialized),"parentId"in R&&n(21,Y=R.parentId),"nodeClickDistance"in R&&n(22,U=R.nodeClickDistance),"class"in R&&n(23,G=R.class)},t.$$.update=()=>{t.$$.dirty[1]&32&&n(25,i=X||"default"),t.$$.dirty[0]&33554432|t.$$.dirty[1]&32768&&n(45,o=!!r[i]),t.$$.dirty[0]&33554432|t.$$.dirty[1]&32768&&n(27,s=r[i]||Mo),t.$$.dirty[1]&16416&&(o||console.warn("003",Zt.error003(X))),t.$$.dirty[0]&393216|t.$$.dirty[1]&960&&n(26,l=Cr({width:S,height:P,initialWidth:_,initialHeight:k,measuredWidth:J,measuredHeight:W})),t.$$.dirty[0]&64&&ye.set(!!m),t.$$.dirty[0]&50380802|t.$$.dirty[1]&14336&&((De&&i!==De||L&&H!==L||Te&&B!==Te)&&requestAnimationFrame(()=>te(new Map([[f,{id:f,nodeElement:oe,force:!0}]]))),n(42,De=i),n(43,L=H),n(44,Te=B)),t.$$.dirty[0]&17825792|t.$$.dirty[1]&1040&&w&&(oe!==se||!O)&&(se&&w.unobserve(se),oe&&w.observe(oe),n(41,se=oe))},[u,f,d,h,c,b,m,y,g,E,M,K,T,I,H,B,F,S,P,D,O,Y,U,G,oe,i,l,s,a,V,$,v,de,ye,Pe,w,X,J,W,_,k,se,De,L,Te,o,r,ct,st,rt,Ke,it,x,dt,ht]}class Pr extends me{constructor(e){super(),be(this,e,zr,Mr,qi,{node:0,id:1,data:2,selected:3,draggable:4,selectable:5,connectable:6,deletable:7,hidden:8,dragging:9,resizeObserver:35,style:10,type:36,isParent:11,positionX:12,positionY:13,sourcePosition:14,targetPosition:15,zIndex:16,measuredWidth:37,measuredHeight:38,initialWidth:39,initialHeight:40,width:17,height:18,dragHandle:19,initialized:20,parentId:21,nodeClickDistance:22,class:23},null,[-1,-1])}}const{Map:Or}=rl;function wi(t,e,n){const i=t.slice();return i[21]=e[n],i}function Si(t,e){let n,i,o;return i=new Pr({props:{node:e[21],id:e[21].id,data:e[21].data,selected:!!e[21].selected,hidden:!!e[21].hidden,draggable:!!(e[21].draggable||e[2]&&typeof e[21].draggable>"u"),selectable:!!(e[21].selectable||e[3]&&typeof e[21].selectable>"u"),connectable:!!(e[21].connectable||e[4]&&typeof e[21].connectable>"u"),deletable:e[21].deletable??!0,positionX:e[21].internals.positionAbsolute.x,positionY:e[21].internals.positionAbsolute.y,isParent:e[5].has(e[21].id),style:e[21].style,class:e[21].class,type:e[21].type??"default",sourcePosition:e[21].sourcePosition,targetPosition:e[21].targetPosition,dragging:e[21].dragging,zIndex:e[21].internals.z??0,dragHandle:e[21].dragHandle,initialized:sn(e[21]),width:e[21].width,height:e[21].height,initialWidth:e[21].initialWidth,initialHeight:e[21].initialHeight,measuredWidth:e[21].measured.width,measuredHeight:e[21].measured.height,parentId:e[21].parentId,resizeObserver:e[11],nodeClickDistance:e[0]}}),i.$on("nodeclick",e[12]),i.$on("nodemouseenter",e[13]),i.$on("nodemousemove",e[14]),i.$on("nodemouseleave",e[15]),i.$on("nodedrag",e[16]),i.$on("nodedragstart",e[17]),i.$on("nodedragstop",e[18]),i.$on("nodecontextmenu",e[19]),{key:t,first:null,c(){n=Me(),ue(i.$$.fragment),this.h()},l(s){n=Me(),ge(i.$$.fragment,s),this.h()},h(){this.first=n},m(s,l){p(s,n,l),fe(i,s,l),o=!0},p(s,l){e=s;const r={};l&2&&(r.node=e[21]),l&2&&(r.id=e[21].id),l&2&&(r.data=e[21].data),l&2&&(r.selected=!!e[21].selected),l&2&&(r.hidden=!!e[21].hidden),l&6&&(r.draggable=!!(e[21].draggable||e[2]&&typeof e[21].draggable>"u")),l&10&&(r.selectable=!!(e[21].selectable||e[3]&&typeof e[21].selectable>"u")),l&18&&(r.connectable=!!(e[21].connectable||e[4]&&typeof e[21].connectable>"u")),l&2&&(r.deletable=e[21].deletable??!0),l&2&&(r.positionX=e[21].internals.positionAbsolute.x),l&2&&(r.positionY=e[21].internals.positionAbsolute.y),l&34&&(r.isParent=e[5].has(e[21].id)),l&2&&(r.style=e[21].style),l&2&&(r.class=e[21].class),l&2&&(r.type=e[21].type??"default"),l&2&&(r.sourcePosition=e[21].sourcePosition),l&2&&(r.targetPosition=e[21].targetPosition),l&2&&(r.dragging=e[21].dragging),l&2&&(r.zIndex=e[21].internals.z??0),l&2&&(r.dragHandle=e[21].dragHandle),l&2&&(r.initialized=sn(e[21])),l&2&&(r.width=e[21].width),l&2&&(r.height=e[21].height),l&2&&(r.initialWidth=e[21].initialWidth),l&2&&(r.initialHeight=e[21].initialHeight),l&2&&(r.measuredWidth=e[21].measured.width),l&2&&(r.measuredHeight=e[21].measured.height),l&2&&(r.parentId=e[21].parentId),l&1&&(r.nodeClickDistance=e[0]),i.$set(r)},i(s){o||(A(i.$$.fragment,s),o=!0)},o(s){Z(i.$$.fragment,s),o=!1},d(s){s&&N(n),ce(i,s)}}}function Dr(t){let e,n=[],i=new Or,o,s=_t(t[1]);const l=r=>r[21].id;for(let r=0;r<s.length;r+=1){let a=wi(t,s,r),u=l(a);i.set(u,n[r]=Si(u,a))}return{c(){e=Be("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=Le(r,"DIV",{class:!0});var a=re(e);for(let u=0;u<n.length;u+=1)n[u].l(a);a.forEach(N),this.h()},h(){C(e,"class","svelte-flow__nodes svelte-tf4uy4")},m(r,a){p(r,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);o=!0},p(r,[a]){a&2111&&(s=_t(r[1]),Ae(),n=dn(n,a,l,1,r,s,i,e,hn,Si,null,wi),Xe())},i(r){if(!o){for(let a=0;a<s.length;a+=1)A(n[a]);o=!0}},o(r){for(let a=0;a<n.length;a+=1)Z(n[a]);o=!1},d(r){r&&N(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function Hr(t,e,n){let i,o,s,l,r,{nodeClickDistance:a=0}=e;const{visibleNodes:u,nodesDraggable:f,nodesConnectable:d,elementsSelectable:h,updateNodeInternals:c,parentLookup:b}=Ve();q(t,u,I=>n(1,i=I)),q(t,f,I=>n(2,o=I)),q(t,d,I=>n(4,l=I)),q(t,h,I=>n(3,s=I)),q(t,b,I=>n(5,r=I));const m=typeof ResizeObserver>"u"?null:new ResizeObserver(I=>{const H=new Map;I.forEach(B=>{const F=B.target.getAttribute("data-id");H.set(F,{id:F,nodeElement:B.target,force:!0})}),c(H)});ji(()=>{m==null||m.disconnect()});function y(I){ke.call(this,t,I)}function g(I){ke.call(this,t,I)}function E(I){ke.call(this,t,I)}function w(I){ke.call(this,t,I)}function M(I){ke.call(this,t,I)}function X(I){ke.call(this,t,I)}function K(I){ke.call(this,t,I)}function T(I){ke.call(this,t,I)}return t.$$set=I=>{"nodeClickDistance"in I&&n(0,a=I.nodeClickDistance)},[a,i,o,s,l,r,u,f,d,h,b,m,y,g,E,w,M,X,K,T]}class Ir extends me{constructor(e){super(),be(this,e,Hr,Dr,_e,{nodeClickDistance:0})}}function Ei(t){let e,n,i,o,s,l,r,a;var u=t[27];function f(d,h){return{props:{id:d[0],source:d[1],target:d[2],sourceX:d[14],sourceY:d[15],targetX:d[16],targetY:d[17],sourcePosition:d[18],targetPosition:d[19],animated:d[6],selected:d[7],label:d[10],labelStyle:d[11],data:d[3],style:d[4],interactionWidth:d[21],selectable:d[24],deletable:d[8]??!0,type:d[23],sourceHandleId:d[12],targetHandleId:d[13],markerStart:d[26],markerEnd:d[25]}}}return u&&(i=tn(u,f(t))),{c(){e=Se("svg"),n=Se("g"),i&&ue(i.$$.fragment),this.h()},l(d){e=Ee(d,"svg",{});var h=re(e);n=Ee(h,"g",{class:!0,"data-id":!0,"aria-label":!0,role:!0});var c=re(n);i&&ge(i.$$.fragment,c),c.forEach(N),h.forEach(N),this.h()},h(){C(n,"class",o=ze(["svelte-flow__edge",t[22]])),C(n,"data-id",t[0]),C(n,"aria-label",s=t[20]===null?void 0:t[20]?t[20]:`Edge from ${t[1]} to ${t[2]}`),C(n,"role","img"),le(n,"animated",t[6]),le(n,"selected",t[7]),le(n,"selectable",t[24]),ae(e,"z-index",t[5])},m(d,h){p(d,e,h),We(e,n),i&&fe(i,n,null),l=!0,r||(a=[Oe(n,"click",t[32]),Oe(n,"contextmenu",t[41]),Oe(n,"mouseenter",t[42]),Oe(n,"mouseleave",t[43])],r=!0)},p(d,h){if(h[0]&134217728&&u!==(u=d[27])){if(i){Ae();const c=i;Z(c.$$.fragment,1,0,()=>{ce(c,1)}),Xe()}u?(i=tn(u,f(d)),ue(i.$$.fragment),A(i.$$.fragment,1),fe(i,n,null)):i=null}else if(u){const c={};h[0]&1&&(c.id=d[0]),h[0]&2&&(c.source=d[1]),h[0]&4&&(c.target=d[2]),h[0]&16384&&(c.sourceX=d[14]),h[0]&32768&&(c.sourceY=d[15]),h[0]&65536&&(c.targetX=d[16]),h[0]&131072&&(c.targetY=d[17]),h[0]&262144&&(c.sourcePosition=d[18]),h[0]&524288&&(c.targetPosition=d[19]),h[0]&64&&(c.animated=d[6]),h[0]&128&&(c.selected=d[7]),h[0]&1024&&(c.label=d[10]),h[0]&2048&&(c.labelStyle=d[11]),h[0]&8&&(c.data=d[3]),h[0]&16&&(c.style=d[4]),h[0]&2097152&&(c.interactionWidth=d[21]),h[0]&16777216&&(c.selectable=d[24]),h[0]&256&&(c.deletable=d[8]??!0),h[0]&8388608&&(c.type=d[23]),h[0]&4096&&(c.sourceHandleId=d[12]),h[0]&8192&&(c.targetHandleId=d[13]),h[0]&67108864&&(c.markerStart=d[26]),h[0]&33554432&&(c.markerEnd=d[25]),i.$set(c)}(!l||h[0]&4194304&&o!==(o=ze(["svelte-flow__edge",d[22]])))&&C(n,"class",o),(!l||h[0]&1)&&C(n,"data-id",d[0]),(!l||h[0]&1048582&&s!==(s=d[20]===null?void 0:d[20]?d[20]:`Edge from ${d[1]} to ${d[2]}`))&&C(n,"aria-label",s),(!l||h[0]&4194368)&&le(n,"animated",d[6]),(!l||h[0]&4194432)&&le(n,"selected",d[7]),(!l||h[0]&20971520)&&le(n,"selectable",d[24]),h[0]&32&&ae(e,"z-index",d[5])},i(d){l||(i&&A(i.$$.fragment,d),l=!0)},o(d){i&&Z(i.$$.fragment,d),l=!1},d(d){d&&N(e),i&&ce(i),r=!1,kt(a)}}}function vr(t){let e,n,i=!t[9]&&Ei(t);return{c(){i&&i.c(),e=Me()},l(o){i&&i.l(o),e=Me()},m(o,s){i&&i.m(o,s),p(o,e,s),n=!0},p(o,s){o[9]?i&&(Ae(),Z(i,1,1,()=>{i=null}),Xe()):i?(i.p(o,s),s[0]&512&&A(i,1)):(i=Ei(o),i.c(),A(i,1),i.m(e.parentNode,e))},i(o){n||(A(i),n=!0)},o(o){Z(i),n=!1},d(o){o&&N(e),i&&i.d(o)}}}function Tr(t,e,n){let i,o,s,l,r,a,u,f,d,{id:h}=e,{type:c="default"}=e,{source:b=""}=e,{target:m=""}=e,{data:y={}}=e,{style:g=void 0}=e,{zIndex:E=void 0}=e,{animated:w=!1}=e,{selected:M=!1}=e,{selectable:X=void 0}=e,{deletable:K=void 0}=e,{hidden:T=!1}=e,{label:I=void 0}=e,{labelStyle:H=void 0}=e,{markerStart:B=void 0}=e,{markerEnd:F=void 0}=e,{sourceHandle:J=void 0}=e,{targetHandle:W=void 0}=e,{sourceX:_}=e,{sourceY:k}=e,{targetX:S}=e,{targetY:P}=e,{sourcePosition:D}=e,{targetPosition:O}=e,{ariaLabel:Y=void 0}=e,{interactionWidth:U=void 0}=e,{class:G=""}=e;$t("svelteflow__edge_id",h);const{edgeLookup:V,edgeTypes:$,flowId:ee,elementsSelectable:ie}=Ve();q(t,V,L=>n(44,a=L)),q(t,$,L=>n(40,d=L)),q(t,ee,L=>n(39,f=L)),q(t,ie,L=>n(38,u=L));const v=cn(),te=zo();function oe(L){const Te=a.get(h);Te&&(te(h),v("edgeclick",{event:L,edge:Te}))}function se(L,Te){const Pe=a.get(h);Pe&&v(Te,{event:L,edge:Pe})}const de=L=>{se(L,"edgecontextmenu")},ye=L=>{se(L,"edgemouseenter")},De=L=>{se(L,"edgemouseleave")};return t.$$set=L=>{"id"in L&&n(0,h=L.id),"type"in L&&n(34,c=L.type),"source"in L&&n(1,b=L.source),"target"in L&&n(2,m=L.target),"data"in L&&n(3,y=L.data),"style"in L&&n(4,g=L.style),"zIndex"in L&&n(5,E=L.zIndex),"animated"in L&&n(6,w=L.animated),"selected"in L&&n(7,M=L.selected),"selectable"in L&&n(35,X=L.selectable),"deletable"in L&&n(8,K=L.deletable),"hidden"in L&&n(9,T=L.hidden),"label"in L&&n(10,I=L.label),"labelStyle"in L&&n(11,H=L.labelStyle),"markerStart"in L&&n(36,B=L.markerStart),"markerEnd"in L&&n(37,F=L.markerEnd),"sourceHandle"in L&&n(12,J=L.sourceHandle),"targetHandle"in L&&n(13,W=L.targetHandle),"sourceX"in L&&n(14,_=L.sourceX),"sourceY"in L&&n(15,k=L.sourceY),"targetX"in L&&n(16,S=L.targetX),"targetY"in L&&n(17,P=L.targetY),"sourcePosition"in L&&n(18,D=L.sourcePosition),"targetPosition"in L&&n(19,O=L.targetPosition),"ariaLabel"in L&&n(20,Y=L.ariaLabel),"interactionWidth"in L&&n(21,U=L.interactionWidth),"class"in L&&n(22,G=L.class)},t.$$.update=()=>{t.$$.dirty[1]&8&&n(23,i=c||"default"),t.$$.dirty[0]&8388608|t.$$.dirty[1]&512&&n(27,o=d[i]||Po),t.$$.dirty[1]&288&&n(26,s=B?`url('#${Yn(B,f)}')`:void 0),t.$$.dirty[1]&320&&n(25,l=F?`url('#${Yn(F,f)}')`:void 0),t.$$.dirty[1]&144&&n(24,r=X??u)},[h,b,m,y,g,E,w,M,K,T,I,H,J,W,_,k,S,P,D,O,Y,U,G,i,r,l,s,o,V,$,ee,ie,oe,se,c,X,B,F,u,f,d,de,ye,De]}class Nr extends me{constructor(e){super(),be(this,e,Tr,vr,qi,{id:0,type:34,source:1,target:2,data:3,style:4,zIndex:5,animated:6,selected:7,selectable:35,deletable:8,hidden:9,label:10,labelStyle:11,markerStart:36,markerEnd:37,sourceHandle:12,targetHandle:13,sourceX:14,sourceY:15,targetX:16,targetY:17,sourcePosition:18,targetPosition:19,ariaLabel:20,interactionWidth:21,class:22},null,[-1,-1])}}function Vr(t,e,n){let{onMount:i=void 0}=e,{onDestroy:o=void 0}=e;return fn(()=>(i==null||i(),o)),t.$$set=s=>{"onMount"in s&&n(0,i=s.onMount),"onDestroy"in s&&n(1,o=s.onDestroy)},[i,o]}class Yr extends me{constructor(e){super(),be(this,e,Vr,null,_e,{onMount:0,onDestroy:1})}}function Ci(t,e,n){const i=t.slice();return i[2]=e[n],i}function Mi(t,e){let n,i,o;const s=[e[2]];let l={};for(let r=0;r<s.length;r+=1)l=Ce(l,s[r]);return i=new Zr({props:l}),{key:t,first:null,c(){n=Me(),ue(i.$$.fragment),this.h()},l(r){n=Me(),ge(i.$$.fragment,r),this.h()},h(){this.first=n},m(r,a){p(r,n,a),fe(i,r,a),o=!0},p(r,a){e=r;const u=a&1?ft(s,[Vt(e[2])]):{};i.$set(u)},i(r){o||(A(i.$$.fragment,r),o=!0)},o(r){Z(i.$$.fragment,r),o=!1},d(r){r&&N(n),ce(i,r)}}}function Ar(t){let e,n=[],i=new Map,o,s=_t(t[0]);const l=r=>r[2].id;for(let r=0;r<s.length;r+=1){let a=Ci(t,s,r),u=l(a);i.set(u,n[r]=Mi(u,a))}return{c(){e=Se("defs");for(let r=0;r<n.length;r+=1)n[r].c()},l(r){e=Ee(r,"defs",{});var a=re(e);for(let u=0;u<n.length;u+=1)n[u].l(a);a.forEach(N)},m(r,a){p(r,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);o=!0},p(r,[a]){a&1&&(s=_t(r[0]),Ae(),n=dn(n,a,l,1,r,s,i,e,hn,Mi,null,Ci),Xe())},i(r){if(!o){for(let a=0;a<s.length;a+=1)A(n[a]);o=!0}},o(r){for(let a=0;a<n.length;a+=1)Z(n[a]);o=!1},d(r){r&&N(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function Xr(t,e,n){let i;const{markers:o}=Ve();return q(t,o,s=>n(0,i=s)),[i,o]}class Wr extends me{constructor(e){super(),be(this,e,Xr,Ar,_e,{})}}function Br(t){let e;return{c(){e=Se("polyline"),this.h()},l(n){e=Ee(n,"polyline",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,fill:!0,points:!0}),re(e).forEach(N),this.h()},h(){C(e,"stroke",t[6]),C(e,"stroke-linecap","round"),C(e,"stroke-linejoin","round"),C(e,"stroke-width",t[7]),C(e,"fill",t[6]),C(e,"points","-5,-4 0,0 -5,4 -5,-4")},m(n,i){p(n,e,i)},p(n,i){i&64&&C(e,"stroke",n[6]),i&128&&C(e,"stroke-width",n[7]),i&64&&C(e,"fill",n[6])},d(n){n&&N(e)}}}function Lr(t){let e;return{c(){e=Se("polyline"),this.h()},l(n){e=Ee(n,"polyline",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,fill:!0,points:!0}),re(e).forEach(N),this.h()},h(){C(e,"stroke",t[6]),C(e,"stroke-linecap","round"),C(e,"stroke-linejoin","round"),C(e,"stroke-width",t[7]),C(e,"fill","none"),C(e,"points","-5,-4 0,0 -5,4")},m(n,i){p(n,e,i)},p(n,i){i&64&&C(e,"stroke",n[6]),i&128&&C(e,"stroke-width",n[7])},d(n){n&&N(e)}}}function Kr(t){let e,n,i;function o(r,a){if(r[1]===on.Arrow)return Lr;if(r[1]===on.ArrowClosed)return Br}let s=o(t),l=s&&s(t);return{c(){e=Se("marker"),l&&l.c(),this.h()},l(r){e=Ee(r,"marker",{class:!0,id:!0,markerWidth:!0,markerHeight:!0,viewBox:!0,markerUnits:!0,orient:!0,refX:!0,refY:!0});var a=re(e);l&&l.l(a),a.forEach(N),this.h()},h(){C(e,"class","svelte-flow__arrowhead"),C(e,"id",t[0]),C(e,"markerWidth",n=`${t[2]}`),C(e,"markerHeight",i=`${t[3]}`),C(e,"viewBox","-10 -10 20 20"),C(e,"markerUnits",t[4]),C(e,"orient",t[5]),C(e,"refX","0"),C(e,"refY","0")},m(r,a){p(r,e,a),l&&l.m(e,null)},p(r,[a]){s===(s=o(r))&&l?l.p(r,a):(l&&l.d(1),l=s&&s(r),l&&(l.c(),l.m(e,null))),a&1&&C(e,"id",r[0]),a&4&&n!==(n=`${r[2]}`)&&C(e,"markerWidth",n),a&8&&i!==(i=`${r[3]}`)&&C(e,"markerHeight",i),a&16&&C(e,"markerUnits",r[4]),a&32&&C(e,"orient",r[5])},i:we,o:we,d(r){r&&N(e),l&&l.d()}}}function Rr(t,e,n){let{id:i}=e,{type:o}=e,{width:s=12.5}=e,{height:l=12.5}=e,{markerUnits:r="strokeWidth"}=e,{orient:a="auto-start-reverse"}=e,{color:u=void 0}=e,{strokeWidth:f=void 0}=e;return t.$$set=d=>{"id"in d&&n(0,i=d.id),"type"in d&&n(1,o=d.type),"width"in d&&n(2,s=d.width),"height"in d&&n(3,l=d.height),"markerUnits"in d&&n(4,r=d.markerUnits),"orient"in d&&n(5,a=d.orient),"color"in d&&n(6,u=d.color),"strokeWidth"in d&&n(7,f=d.strokeWidth)},[i,o,s,l,r,a,u,f]}class Zr extends me{constructor(e){super(),be(this,e,Rr,Kr,_e,{id:0,type:1,width:2,height:3,markerUnits:4,orient:5,color:6,strokeWidth:7})}}function zi(t,e,n){const i=t.slice();return i[14]=e[n],i}function Pi(t,e){let n,i,o;return i=new Nr({props:{id:e[14].id,source:e[14].source,target:e[14].target,data:e[14].data,style:e[14].style,animated:e[14].animated,selected:e[14].selected,selectable:e[14].selectable??e[1],deletable:e[14].deletable,hidden:e[14].hidden,label:e[14].label,labelStyle:e[14].labelStyle,markerStart:e[14].markerStart,markerEnd:e[14].markerEnd,sourceHandle:e[14].sourceHandle,targetHandle:e[14].targetHandle,sourceX:e[14].sourceX,sourceY:e[14].sourceY,targetX:e[14].targetX,targetY:e[14].targetY,sourcePosition:e[14].sourcePosition,targetPosition:e[14].targetPosition,ariaLabel:e[14].ariaLabel,interactionWidth:e[14].interactionWidth,class:e[14].class,type:e[14].type||"default",zIndex:e[14].zIndex}}),i.$on("edgeclick",e[7]),i.$on("edgecontextmenu",e[8]),i.$on("edgemouseenter",e[9]),i.$on("edgemouseleave",e[10]),{key:t,first:null,c(){n=Me(),ue(i.$$.fragment),this.h()},l(s){n=Me(),ge(i.$$.fragment,s),this.h()},h(){this.first=n},m(s,l){p(s,n,l),fe(i,s,l),o=!0},p(s,l){e=s;const r={};l&1&&(r.id=e[14].id),l&1&&(r.source=e[14].source),l&1&&(r.target=e[14].target),l&1&&(r.data=e[14].data),l&1&&(r.style=e[14].style),l&1&&(r.animated=e[14].animated),l&1&&(r.selected=e[14].selected),l&3&&(r.selectable=e[14].selectable??e[1]),l&1&&(r.deletable=e[14].deletable),l&1&&(r.hidden=e[14].hidden),l&1&&(r.label=e[14].label),l&1&&(r.labelStyle=e[14].labelStyle),l&1&&(r.markerStart=e[14].markerStart),l&1&&(r.markerEnd=e[14].markerEnd),l&1&&(r.sourceHandle=e[14].sourceHandle),l&1&&(r.targetHandle=e[14].targetHandle),l&1&&(r.sourceX=e[14].sourceX),l&1&&(r.sourceY=e[14].sourceY),l&1&&(r.targetX=e[14].targetX),l&1&&(r.targetY=e[14].targetY),l&1&&(r.sourcePosition=e[14].sourcePosition),l&1&&(r.targetPosition=e[14].targetPosition),l&1&&(r.ariaLabel=e[14].ariaLabel),l&1&&(r.interactionWidth=e[14].interactionWidth),l&1&&(r.class=e[14].class),l&1&&(r.type=e[14].type||"default"),l&1&&(r.zIndex=e[14].zIndex),i.$set(r)},i(s){o||(A(i.$$.fragment,s),o=!0)},o(s){Z(i.$$.fragment,s),o=!1},d(s){s&&N(n),ce(i,s)}}}function Oi(t){let e,n;return e=new Yr({props:{onMount:t[11],onDestroy:t[12]}}),{c(){ue(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,o){fe(e,i,o),n=!0},p(i,o){const s={};o&4&&(s.onMount=i[11]),o&4&&(s.onDestroy=i[12]),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function Fr(t){let e,n,i,o,s=[],l=new Map,r,a;i=new Wr({});let u=_t(t[0]);const f=h=>h[14].id;for(let h=0;h<u.length;h+=1){let c=zi(t,u,h),b=f(c);l.set(b,s[h]=Pi(b,c))}let d=t[0].length>0&&Oi(t);return{c(){e=Be("div"),n=Se("svg"),ue(i.$$.fragment),o=He();for(let h=0;h<s.length;h+=1)s[h].c();r=He(),d&&d.c(),this.h()},l(h){e=Le(h,"DIV",{class:!0});var c=re(e);n=Ee(c,"svg",{class:!0});var b=re(n);ge(i.$$.fragment,b),b.forEach(N),o=Ie(c);for(let m=0;m<s.length;m+=1)s[m].l(c);r=Ie(c),d&&d.l(c),c.forEach(N),this.h()},h(){C(n,"class","svelte-flow__marker"),C(e,"class","svelte-flow__edges")},m(h,c){p(h,e,c),We(e,n),fe(i,n,null),We(e,o);for(let b=0;b<s.length;b+=1)s[b]&&s[b].m(e,null);We(e,r),d&&d.m(e,null),a=!0},p(h,[c]){c&3&&(u=_t(h[0]),Ae(),s=dn(s,c,f,1,h,u,l,e,hn,Pi,r,zi),Xe()),h[0].length>0?d?(d.p(h,c),c&1&&A(d,1)):(d=Oi(h),d.c(),A(d,1),d.m(e,null)):d&&(Ae(),Z(d,1,1,()=>{d=null}),Xe())},i(h){if(!a){A(i.$$.fragment,h);for(let c=0;c<u.length;c+=1)A(s[c]);A(d),a=!0}},o(h){Z(i.$$.fragment,h);for(let c=0;c<s.length;c+=1)Z(s[c]);Z(d),a=!1},d(h){h&&N(e),ce(i);for(let c=0;c<s.length;c+=1)s[c].d();d&&d.d()}}}function Gr(t,e,n){let i,o,s,{defaultEdgeOptions:l}=e;const{visibleEdges:r,edgesInitialized:a,edges:{setDefaultOptions:u},elementsSelectable:f}=Ve();q(t,r,g=>n(0,i=g)),q(t,a,g=>n(2,s=g)),q(t,f,g=>n(1,o=g)),fn(()=>{l&&u(l)});function d(g){ke.call(this,t,g)}function h(g){ke.call(this,t,g)}function c(g){ke.call(this,t,g)}function b(g){ke.call(this,t,g)}const m=()=>{en(a,s=!0,s)},y=()=>{en(a,s=!1,s)};return t.$$set=g=>{"defaultEdgeOptions"in g&&n(6,l=g.defaultEdgeOptions)},[i,o,s,r,a,f,l,d,h,c,b,m,y]}class Ur extends me{constructor(e){super(),be(this,e,Gr,Fr,_e,{defaultEdgeOptions:6})}}function Di(t){let e;return{c(){e=Be("div"),this.h()},l(n){e=Le(n,"DIV",{class:!0}),re(e).forEach(N),this.h()},h(){C(e,"class","svelte-flow__selection svelte-1iugwpu"),ae(e,"width",typeof t[2]=="string"?t[2]:`${t[2]}px`),ae(e,"height",typeof t[3]=="string"?t[3]:`${t[3]}px`),ae(e,"transform",`translate(${t[0]}px, ${t[1]}px)`)},m(n,i){p(n,e,i)},p(n,i){i&4&&ae(e,"width",typeof n[2]=="string"?n[2]:`${n[2]}px`),i&8&&ae(e,"height",typeof n[3]=="string"?n[3]:`${n[3]}px`),i&3&&ae(e,"transform",`translate(${n[0]}px, ${n[1]}px)`)},d(n){n&&N(e)}}}function qr(t){let e,n=t[4]&&Di(t);return{c(){n&&n.c(),e=Me()},l(i){n&&n.l(i),e=Me()},m(i,o){n&&n.m(i,o),p(i,e,o)},p(i,[o]){i[4]?n?n.p(i,o):(n=Di(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:we,o:we,d(i){i&&N(e),n&&n.d(i)}}}function jr(t,e,n){let{x:i=0}=e,{y:o=0}=e,{width:s=0}=e,{height:l=0}=e,{isVisible:r=!0}=e;return t.$$set=a=>{"x"in a&&n(0,i=a.x),"y"in a&&n(1,o=a.y),"width"in a&&n(2,s=a.width),"height"in a&&n(3,l=a.height),"isVisible"in a&&n(4,r=a.isVisible)},[i,o,s,l,r]}class Io extends me{constructor(e){super(),be(this,e,jr,qr,_e,{x:0,y:1,width:2,height:3,isVisible:4})}}function pr(t){var i,o,s,l;let e,n;return e=new Io({props:{isVisible:!!(t[0]&&t[1]==="user"),width:(i=t[0])==null?void 0:i.width,height:(o=t[0])==null?void 0:o.height,x:(s=t[0])==null?void 0:s.x,y:(l=t[0])==null?void 0:l.y}}),{c(){ue(e.$$.fragment)},l(r){ge(e.$$.fragment,r)},m(r,a){fe(e,r,a),n=!0},p(r,[a]){var f,d,h,c;const u={};a&3&&(u.isVisible=!!(r[0]&&r[1]==="user")),a&1&&(u.width=(f=r[0])==null?void 0:f.width),a&1&&(u.height=(d=r[0])==null?void 0:d.height),a&1&&(u.x=(h=r[0])==null?void 0:h.x),a&1&&(u.y=(c=r[0])==null?void 0:c.y),e.$set(u)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){Z(e.$$.fragment,r),n=!1},d(r){ce(e,r)}}}function Jr(t,e,n){let i,o;const{selectionRect:s,selectionRectMode:l}=Ve();return q(t,s,r=>n(0,i=r)),q(t,l,r=>n(1,o=r)),[i,o,s,l]}class Qr extends me{constructor(e){super(),be(this,e,Jr,pr,_e,{})}}function Hi(t){let e,n,i,o,s;return n=new Io({props:{width:"100%",height:"100%",x:0,y:0}}),{c(){e=Be("div"),ue(n.$$.fragment),this.h()},l(l){e=Le(l,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var r=re(e);ge(n.$$.fragment,r),r.forEach(N),this.h()},h(){C(e,"class","selection-wrapper nopan svelte-5pxri"),ae(e,"width",t[1].width+"px"),ae(e,"height",t[1].height+"px"),ae(e,"transform","translate("+t[1].x+"px, "+t[1].y+"px)"),C(e,"role","button"),C(e,"tabindex","-1")},m(l,r){p(l,e,r),fe(n,e,null),i=!0,o||(s=[Ge(Ho.call(null,e,{disabled:!1,store:t[2],onDrag:t[11],onDragStart:t[12],onDragStop:t[13]})),Oe(e,"contextmenu",t[7]),Oe(e,"click",t[8]),Oe(e,"keyup",$r)],o=!0)},p(l,r){(!i||r&2)&&ae(e,"width",l[1].width+"px"),(!i||r&2)&&ae(e,"height",l[1].height+"px"),(!i||r&2)&&ae(e,"transform","translate("+l[1].x+"px, "+l[1].y+"px)")},i(l){i||(A(n.$$.fragment,l),i=!0)},o(l){Z(n.$$.fragment,l),i=!1},d(l){l&&N(e),ce(n),o=!1,kt(s)}}}function xr(t){let e=t[0]==="nodes"&&t[1]&&tt(t[1].x)&&tt(t[1].y),n,i,o=e&&Hi(t);return{c(){o&&o.c(),n=Me()},l(s){o&&o.l(s),n=Me()},m(s,l){o&&o.m(s,l),p(s,n,l),i=!0},p(s,[l]){l&3&&(e=s[0]==="nodes"&&s[1]&&tt(s[1].x)&&tt(s[1].y)),e?o?(o.p(s,l),l&3&&A(o,1)):(o=Hi(s),o.c(),A(o,1),o.m(n.parentNode,n)):o&&(Ae(),Z(o,1,1,()=>{o=null}),Xe())},i(s){i||(A(o),i=!0)},o(s){Z(o),i=!1},d(s){s&&N(n),o&&o.d(s)}}}const $r=()=>{};function ea(t,e,n){let i,o,s;const l=Ve(),{selectionRectMode:r,nodes:a,nodeLookup:u}=l;q(t,r,g=>n(0,s=g)),q(t,a,g=>n(9,i=g)),q(t,u,g=>n(10,o=g));const f=cn();let d=null;function h(g){const E=i.filter(w=>w.selected);f("selectioncontextmenu",{nodes:E,event:g})}function c(g){const E=i.filter(w=>w.selected);f("selectionclick",{nodes:E,event:g})}const b=(g,E,w,M)=>{f("nodedrag",{event:g,targetNode:null,nodes:M})},m=(g,E,w,M)=>{f("nodedragstart",{event:g,targetNode:null,nodes:M})},y=(g,E,w,M)=>{f("nodedragstop",{event:g,targetNode:null,nodes:M})};return t.$$.update=()=>{t.$$.dirty&1537&&s==="nodes"&&n(1,d=Gt(o,{filter:g=>!!g.selected}))},[s,d,l,r,a,u,f,h,c,i,o,b,m,y]}class ta extends me{constructor(e){super(),be(this,e,ea,xr,_e,{})}}function ot(t,e){let{enabled:n=!0,trigger:i,type:o="keydown"}=e;function s(l){const r=Array.isArray(i)?i:[i],a={alt:l.altKey,ctrl:l.ctrlKey,shift:l.shiftKey,meta:l.metaKey};for(const u of r){const f={modifier:[],preventDefault:!1,enabled:!0,...u},{modifier:d,key:h,callback:c,preventDefault:b,enabled:m}=f;if(m){if(d.length&&!(Array.isArray(d)?d:[d]).map(E=>typeof E=="string"?[E]:E).some(E=>E.every(w=>a[w])))continue;if(l.key===h){b&&l.preventDefault();const y={node:t,trigger:f,originalEvent:l};t.dispatchEvent(new CustomEvent("shortcut",{detail:y})),c==null||c(y)}}}}return n&&t.addEventListener(o,s),{update:l=>{const{enabled:r=!0,type:a="keydown"}=l;n&&(!r||o!==a)?t.removeEventListener(o,s):!n&&r&&t.addEventListener(a,s),n=r,o=a,i=l.trigger},destroy:()=>{t.removeEventListener(o,s)}}}function na(t){let e,n,i,o,s,l,r,a,u,f,d,h;return{c:we,l:we,m(c,b){d||(h=[Ge(e=ot.call(null,window,{trigger:Ne(t[0],t[11]),type:"keydown"})),Ge(n=ot.call(null,window,{trigger:Ne(t[0],t[12]),type:"keyup"})),Ge(i=ot.call(null,window,{trigger:Ne(t[1],t[13]),type:"keydown"})),Ge(o=ot.call(null,window,{trigger:Ne(t[1],t[14]),type:"keyup"})),Ge(s=ot.call(null,window,{trigger:Ne(t[2],t[15]),type:"keydown"})),Ge(l=ot.call(null,window,{trigger:Ne(t[2],t[16]),type:"keyup"})),Ge(r=ot.call(null,window,{trigger:Ne(t[3],t[17]),type:"keydown"})),Ge(a=ot.call(null,window,{trigger:Ne(t[3],t[18]),type:"keyup"})),Ge(u=ot.call(null,window,{trigger:Ne(t[4],t[19]),type:"keydown"})),Ge(f=ot.call(null,window,{trigger:Ne(t[4],t[20]),type:"keyup"})),Oe(window,"blur",t[10]),Oe(window,"contextmenu",t[10])],d=!0)},p(c,[b]){e&&Ye(e.update)&&b&1&&e.update.call(null,{trigger:Ne(c[0],c[11]),type:"keydown"}),n&&Ye(n.update)&&b&1&&n.update.call(null,{trigger:Ne(c[0],c[12]),type:"keyup"}),i&&Ye(i.update)&&b&2&&i.update.call(null,{trigger:Ne(c[1],c[13]),type:"keydown"}),o&&Ye(o.update)&&b&2&&o.update.call(null,{trigger:Ne(c[1],c[14]),type:"keyup"}),s&&Ye(s.update)&&b&4&&s.update.call(null,{trigger:Ne(c[2],c[15]),type:"keydown"}),l&&Ye(l.update)&&b&4&&l.update.call(null,{trigger:Ne(c[2],c[16]),type:"keyup"}),r&&Ye(r.update)&&b&8&&r.update.call(null,{trigger:Ne(c[3],c[17]),type:"keydown"}),a&&Ye(a.update)&&b&8&&a.update.call(null,{trigger:Ne(c[3],c[18]),type:"keyup"}),u&&Ye(u.update)&&b&16&&u.update.call(null,{trigger:Ne(c[4],c[19]),type:"keydown"}),f&&Ye(f.update)&&b&16&&f.update.call(null,{trigger:Ne(c[4],c[20]),type:"keyup"})},i:we,o:we,d(c){d=!1,kt(h)}}}function vo(t){return t!==null&&typeof t=="object"}function ia(t){return vo(t)?t.modifier||[]:[]}function oa(t){return t==null?"":vo(t)?t.key:t}function Ne(t,e){return(Array.isArray(t)?t:[t]).map(i=>{const o=oa(i);return{key:o,modifier:ia(i),enabled:o!==null,callback:e}})}function la(t,e,n){let{selectionKey:i="Shift"}=e,{multiSelectionKey:o=ln()?"Meta":"Control"}=e,{deleteKey:s="Backspace"}=e,{panActivationKey:l=" "}=e,{zoomActivationKey:r=ln()?"Meta":"Control"}=e;const{selectionKeyPressed:a,multiselectionKeyPressed:u,deleteKeyPressed:f,panActivationKeyPressed:d,zoomActivationKeyPressed:h,selectionRect:c}=Ve();function b(){c.set(null),a.set(!1),u.set(!1),f.set(!1),d.set(!1),h.set(!1)}const m=()=>a.set(!0),y=()=>a.set(!1),g=()=>u.set(!0),E=()=>u.set(!1),w=H=>{!(H.originalEvent.ctrlKey||H.originalEvent.metaKey||H.originalEvent.shiftKey)&&!Yl(H.originalEvent)&&f.set(!0)},M=()=>f.set(!1),X=()=>d.set(!0),K=()=>d.set(!1),T=()=>h.set(!0),I=()=>h.set(!1);return t.$$set=H=>{"selectionKey"in H&&n(0,i=H.selectionKey),"multiSelectionKey"in H&&n(1,o=H.multiSelectionKey),"deleteKey"in H&&n(2,s=H.deleteKey),"panActivationKey"in H&&n(3,l=H.panActivationKey),"zoomActivationKey"in H&&n(4,r=H.zoomActivationKey)},[i,o,s,l,r,a,u,f,d,h,b,m,y,g,E,w,M,X,K,T,I]}class sa extends me{constructor(e){super(),be(this,e,la,na,_e,{selectionKey:0,multiSelectionKey:1,deleteKey:2,panActivationKey:3,zoomActivationKey:4})}}const ra=t=>({}),Ii=t=>({});function vi(t){let e,n,i,o;const s=t[13].connectionLine,l=je(s,t,t[12],Ii);let r=!t[2]&&Ti(t);return{c(){e=Se("svg"),n=Se("g"),l&&l.c(),r&&r.c(),this.h()},l(a){e=Ee(a,"svg",{width:!0,height:!0,class:!0,style:!0});var u=re(e);n=Ee(u,"g",{class:!0});var f=re(n);l&&l.l(f),r&&r.l(f),f.forEach(N),u.forEach(N),this.h()},h(){C(n,"class",i=ze(["svelte-flow__connection",ti(t[3].isValid)])),C(e,"width",t[5]),C(e,"height",t[6]),C(e,"class","svelte-flow__connectionline"),C(e,"style",t[0])},m(a,u){p(a,e,u),We(e,n),l&&l.m(n,null),r&&r.m(n,null),o=!0},p(a,u){l&&l.p&&(!o||u&4096)&&pe(l,s,a,a[12],o?Qe(s,a[12],u,ra):Je(a[12]),Ii),a[2]?r&&(r.d(1),r=null):r?r.p(a,u):(r=Ti(a),r.c(),r.m(n,null)),(!o||u&8&&i!==(i=ze(["svelte-flow__connection",ti(a[3].isValid)])))&&C(n,"class",i),(!o||u&32)&&C(e,"width",a[5]),(!o||u&64)&&C(e,"height",a[6]),(!o||u&1)&&C(e,"style",a[0])},i(a){o||(A(l,a),o=!0)},o(a){Z(l,a),o=!1},d(a){a&&N(e),l&&l.d(a),r&&r.d()}}}function Ti(t){let e;return{c(){e=Se("path"),this.h()},l(n){e=Ee(n,"path",{d:!0,style:!0,fill:!0,class:!0}),re(e).forEach(N),this.h()},h(){C(e,"d",t[4]),C(e,"style",t[1]),C(e,"fill","none"),C(e,"class","svelte-flow__connection-path")},m(n,i){p(n,e,i)},p(n,i){i&16&&C(e,"d",n[4]),i&2&&C(e,"style",n[1])},d(n){n&&N(e)}}}function aa(t){let e,n,i=t[3].inProgress&&vi(t);return{c(){i&&i.c(),e=Me()},l(o){i&&i.l(o),e=Me()},m(o,s){i&&i.m(o,s),p(o,e,s),n=!0},p(o,[s]){o[3].inProgress?i?(i.p(o,s),s&8&&A(i,1)):(i=vi(o),i.c(),A(i,1),i.m(e.parentNode,e)):i&&(Ae(),Z(i,1,1,()=>{i=null}),Xe())},i(o){n||(A(i),n=!0)},o(o){Z(i),n=!1},d(o){o&&N(e),i&&i.d(o)}}}function ua(t,e,n){let i,o,s,l,{$$slots:r={},$$scope:a}=e,{containerStyle:u=""}=e,{style:f=""}=e,{isCustomComponent:d=!1}=e;const{width:h,height:c,connection:b,connectionLineType:m}=Ve();q(t,h,g=>n(5,s=g)),q(t,c,g=>n(6,l=g)),q(t,b,g=>n(3,o=g)),q(t,m,g=>n(11,i=g));let y=null;return t.$$set=g=>{"containerStyle"in g&&n(0,u=g.containerStyle),"style"in g&&n(1,f=g.style),"isCustomComponent"in g&&n(2,d=g.isCustomComponent),"$$scope"in g&&n(12,a=g.$$scope)},t.$$.update=()=>{if(t.$$.dirty&2060&&o.inProgress&&!d){const{from:g,to:E,fromPosition:w,toPosition:M}=o,X={sourceX:g.x,sourceY:g.y,sourcePosition:w,targetX:E.x,targetY:E.y,targetPosition:M};switch(i){case Tt.Bezier:n(4,[y]=ro(X),y);break;case Tt.Step:n(4,[y]=rn({...X,borderRadius:0}),y);break;case Tt.SmoothStep:n(4,[y]=rn(X),y);break;default:n(4,[y]=uo(X),y)}}},[u,f,d,o,y,s,l,h,c,b,m,i,a,r]}class fa extends me{constructor(e){super(),be(this,e,ua,aa,_e,{containerStyle:0,style:1,isCustomComponent:2})}}function ca(t){let e,n,i;const o=t[8].default,s=je(o,t,t[7],null);let l=[{class:n=ze(["svelte-flow__panel",t[1],...t[2]])},{style:t[0]},t[5]],r={};for(let a=0;a<l.length;a+=1)r=Ce(r,l[a]);return{c(){e=Be("div"),s&&s.c(),this.h()},l(a){e=Le(a,"DIV",{class:!0,style:!0});var u=re(e);s&&s.l(u),u.forEach(N),this.h()},h(){Nt(e,r),ae(e,"pointer-events",t[3]?"none":"")},m(a,u){p(a,e,u),s&&s.m(e,null),i=!0},p(a,[u]){s&&s.p&&(!i||u&128)&&pe(s,o,a,a[7],i?Qe(o,a[7],u,null):Je(a[7]),null),Nt(e,r=ft(l,[(!i||u&6&&n!==(n=ze(["svelte-flow__panel",a[1],...a[2]])))&&{class:n},(!i||u&1)&&{style:a[0]},u&32&&a[5]])),ae(e,"pointer-events",a[3]?"none":"")},i(a){i||(A(s,a),i=!0)},o(a){Z(s,a),i=!1},d(a){a&&N(e),s&&s.d(a)}}}function da(t,e,n){let i;const o=["position","style","class"];let s=ve(e,o),l,{$$slots:r={},$$scope:a}=e,{position:u="top-right"}=e,{style:f=void 0}=e,{class:d=void 0}=e;const{selectionRectMode:h}=Ve();return q(t,h,c=>n(3,l=c)),t.$$set=c=>{e=Ce(Ce({},e),nt(c)),n(5,s=ve(e,o)),"position"in c&&n(6,u=c.position),"style"in c&&n(0,f=c.style),"class"in c&&n(1,d=c.class),"$$scope"in c&&n(7,a=c.$$scope)},t.$$.update=()=>{t.$$.dirty&64&&n(2,i=`${u}`.split("-"))},[f,d,i,l,h,s,u,a,r]}class Zn extends me{constructor(e){super(),be(this,e,da,ca,_e,{position:6,style:0,class:1})}}function Ni(t){let e,n;return e=new Zn({props:{position:t[1],class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",$$slots:{default:[ha]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,o){fe(e,i,o),n=!0},p(i,o){const s={};o&2&&(s.position=i[1]),o&4&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function ha(t){let e,n="Svelte Flow";return{c(){e=Be("a"),e.textContent=n,this.h()},l(i){e=Le(i,"A",{href:!0,target:!0,rel:!0,"aria-label":!0,"data-svelte-h":!0}),nl(e)!=="svelte-2vm8e4"&&(e.textContent=n),this.h()},h(){C(e,"href","https://svelteflow.dev"),C(e,"target","_blank"),C(e,"rel","noopener noreferrer"),C(e,"aria-label","Svelte Flow attribution")},m(i,o){p(i,e,o)},p:we,d(i){i&&N(e)}}}function ga(t){var o;let e,n,i=!((o=t[0])!=null&&o.hideAttribution)&&Ni(t);return{c(){i&&i.c(),e=Me()},l(s){i&&i.l(s),e=Me()},m(s,l){i&&i.m(s,l),p(s,e,l),n=!0},p(s,[l]){var r;(r=s[0])!=null&&r.hideAttribution?i&&(Ae(),Z(i,1,1,()=>{i=null}),Xe()):i?(i.p(s,l),l&1&&A(i,1)):(i=Ni(s),i.c(),A(i,1),i.m(e.parentNode,e))},i(s){n||(A(i),n=!0)},o(s){Z(i),n=!1},d(s){s&&N(e),i&&i.d(s)}}}function ma(t,e,n){let{proOptions:i=void 0}=e,{position:o="bottom-right"}=e;return t.$$set=s=>{"proOptions"in s&&n(0,i=s.proOptions),"position"in s&&n(1,o=s.position)},[i,o]}class ba extends me{constructor(e){super(),be(this,e,ma,ga,_e,{proOptions:0,position:1})}}function Vi(t,{nodeTypes:e,edgeTypes:n,minZoom:i,maxZoom:o,translateExtent:s,paneClickDistance:l}){e!==void 0&&t.setNodeTypes(e),n!==void 0&&t.setEdgeTypes(n),i!==void 0&&t.setMinZoom(i),o!==void 0&&t.setMaxZoom(o),s!==void 0&&t.setTranslateExtent(s),l!==void 0&&t.setPaneClickDistance(l)}const ya=t=>Object.keys(t);function _a(t,e){ya(e).forEach(n=>{const i=e[n];i!==void 0&&t[n].set(i)})}function ka(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function wa(t="light"){return $e("light",n=>{if(t!=="system"){n(t);return}const i=ka(),o=()=>n(i!=null&&i.matches?"dark":"light");return n(i!=null&&i.matches?"dark":"light"),i==null||i.addEventListener("change",o),()=>{i==null||i.removeEventListener("change",o)}})}const Sa=t=>({}),Yi=t=>({slot:"connectionLine"});function Ea(t){let e;const n=t[74].connectionLine,i=je(n,t,t[98],Yi);return{c(){i&&i.c()},l(o){i&&i.l(o)},m(o,s){i&&i.m(o,s),e=!0},p(o,s){i&&i.p&&(!e||s[3]&32)&&pe(i,n,o,o[98],e?Qe(n,o[98],s,Sa):Je(o[98]),Yi)},i(o){e||(A(i,o),e=!0)},o(o){Z(i,o),e=!1},d(o){i&&i.d(o)}}}function Ca(t){let e,n,i,o,s,l,r,a,u,f,d,h;return e=new Ur({props:{defaultEdgeOptions:t[21]}}),e.$on("edgeclick",t[77]),e.$on("edgecontextmenu",t[78]),e.$on("edgemouseenter",t[79]),e.$on("edgemouseleave",t[80]),i=new fa({props:{containerStyle:t[7],style:t[6],isCustomComponent:t[34].connectionLine,$$slots:{connectionLine:[Ea]},$$scope:{ctx:t}}}),u=new Ir({props:{nodeClickDistance:t[23]}}),u.$on("nodeclick",t[81]),u.$on("nodemouseenter",t[82]),u.$on("nodemousemove",t[83]),u.$on("nodemouseleave",t[84]),u.$on("nodedragstart",t[85]),u.$on("nodedrag",t[86]),u.$on("nodedragstop",t[87]),u.$on("nodecontextmenu",t[88]),d=new ta({}),d.$on("selectionclick",t[89]),d.$on("selectioncontextmenu",t[90]),d.$on("nodedragstart",t[91]),d.$on("nodedrag",t[92]),d.$on("nodedragstop",t[93]),{c(){ue(e.$$.fragment),n=He(),ue(i.$$.fragment),o=He(),s=Be("div"),l=He(),r=Be("div"),a=He(),ue(u.$$.fragment),f=He(),ue(d.$$.fragment),this.h()},l(c){ge(e.$$.fragment,c),n=Ie(c),ge(i.$$.fragment,c),o=Ie(c),s=Le(c,"DIV",{class:!0}),re(s).forEach(N),l=Ie(c),r=Le(c,"DIV",{class:!0}),re(r).forEach(N),a=Ie(c),ge(u.$$.fragment,c),f=Ie(c),ge(d.$$.fragment,c),this.h()},h(){C(s,"class","svelte-flow__edgelabel-renderer"),C(r,"class","svelte-flow__viewport-portal")},m(c,b){fe(e,c,b),p(c,n,b),fe(i,c,b),p(c,o,b),p(c,s,b),p(c,l,b),p(c,r,b),p(c,a,b),fe(u,c,b),p(c,f,b),fe(d,c,b),h=!0},p(c,b){const m={};b[0]&2097152&&(m.defaultEdgeOptions=c[21]),e.$set(m);const y={};b[0]&128&&(y.containerStyle=c[7]),b[0]&64&&(y.style=c[6]),b[1]&8&&(y.isCustomComponent=c[34].connectionLine),b[3]&32&&(y.$$scope={dirty:b,ctx:c}),i.$set(y);const g={};b[0]&8388608&&(g.nodeClickDistance=c[23]),u.$set(g)},i(c){h||(A(e.$$.fragment,c),A(i.$$.fragment,c),A(u.$$.fragment,c),A(d.$$.fragment,c),h=!0)},o(c){Z(e.$$.fragment,c),Z(i.$$.fragment,c),Z(u.$$.fragment,c),Z(d.$$.fragment,c),h=!1},d(c){c&&(N(n),N(o),N(s),N(l),N(r),N(a),N(f)),ce(e,c),ce(i,c),ce(u,c),ce(d,c)}}}function Ma(t){let e,n,i,o;return e=new Er({props:{$$slots:{default:[Ca]},$$scope:{ctx:t}}}),i=new Qr({}),{c(){ue(e.$$.fragment),n=He(),ue(i.$$.fragment)},l(s){ge(e.$$.fragment,s),n=Ie(s),ge(i.$$.fragment,s)},m(s,l){fe(e,s,l),p(s,n,l),fe(i,s,l),o=!0},p(s,l){const r={};l[0]&10485952|l[1]&8|l[3]&32&&(r.$$scope={dirty:l,ctx:s}),e.$set(r)},i(s){o||(A(e.$$.fragment,s),A(i.$$.fragment,s),o=!0)},o(s){Z(e.$$.fragment,s),Z(i.$$.fragment,s),o=!1},d(s){s&&N(n),ce(e,s),ce(i,s)}}}function za(t){let e,n;return e=new kr({props:{panOnDrag:t[17]===void 0?!0:t[17],selectionOnDrag:t[18],$$slots:{default:[Ma]},$$scope:{ctx:t}}}),e.$on("paneclick",t[94]),e.$on("panecontextmenu",t[95]),{c(){ue(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,o){fe(e,i,o),n=!0},p(i,o){const s={};o[0]&131072&&(s.panOnDrag=i[17]===void 0?!0:i[17]),o[0]&262144&&(s.selectionOnDrag=i[18]),o[0]&10485952|o[1]&8|o[3]&32&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function Pa(t){let e,n,i,o,s,l,r,a,u,f,d,h;n=new sa({props:{selectionKey:t[1],deleteKey:t[5],panActivationKey:t[2],multiSelectionKey:t[3],zoomActivationKey:t[4]}}),o=new br({props:{initialViewport:t[31],onMoveStart:t[8],onMove:t[9],onMoveEnd:t[10],panOnScrollMode:t[11]===void 0?lt.Free:t[11],preventScrolling:t[12]===void 0?!0:t[12],zoomOnScroll:t[13]===void 0?!0:t[13],zoomOnDoubleClick:t[14]===void 0?!0:t[14],zoomOnPinch:t[15]===void 0?!0:t[15],panOnScroll:t[16]===void 0?!1:t[16],panOnDrag:t[17]===void 0?!0:t[17],paneClickDistance:t[22]===void 0?0:t[22],$$slots:{default:[za]},$$scope:{ctx:t}}}),l=new ba({props:{proOptions:t[20],position:t[19]}});const c=t[74].default,b=je(c,t,t[98],null);let m=[{style:t[24]},{class:a=ze(["svelte-flow",t[25],t[30]])},{"data-testid":"svelte-flow__wrapper"},t[33],{role:"application"}],y={};for(let g=0;g<m.length;g+=1)y=Ce(y,m[g]);return{c(){e=Be("div"),ue(n.$$.fragment),i=He(),ue(o.$$.fragment),s=He(),ue(l.$$.fragment),r=He(),b&&b.c(),this.h()},l(g){e=Le(g,"DIV",{style:!0,class:!0,"data-testid":!0,role:!0});var E=re(e);ge(n.$$.fragment,E),i=Ie(E),ge(o.$$.fragment,E),s=Ie(E),ge(l.$$.fragment,E),r=Ie(E),b&&b.l(E),E.forEach(N),this.h()},h(){Nt(e,y),il(()=>t[97].call(e)),le(e,"svelte-12wlba6",!0)},m(g,E){p(g,e,E),fe(n,e,null),We(e,i),fe(o,e,null),We(e,s),fe(l,e,null),We(e,r),b&&b.m(e,null),t[96](e),u=ol(e,t[97].bind(e)),f=!0,d||(h=[Oe(e,"dragover",t[75]),Oe(e,"drop",t[76])],d=!0)},p(g,E){const w={};E[0]&2&&(w.selectionKey=g[1]),E[0]&32&&(w.deleteKey=g[5]),E[0]&4&&(w.panActivationKey=g[2]),E[0]&8&&(w.multiSelectionKey=g[3]),E[0]&16&&(w.zoomActivationKey=g[4]),n.$set(w);const M={};E[0]&256&&(M.onMoveStart=g[8]),E[0]&512&&(M.onMove=g[9]),E[0]&1024&&(M.onMoveEnd=g[10]),E[0]&2048&&(M.panOnScrollMode=g[11]===void 0?lt.Free:g[11]),E[0]&4096&&(M.preventScrolling=g[12]===void 0?!0:g[12]),E[0]&8192&&(M.zoomOnScroll=g[13]===void 0?!0:g[13]),E[0]&16384&&(M.zoomOnDoubleClick=g[14]===void 0?!0:g[14]),E[0]&32768&&(M.zoomOnPinch=g[15]===void 0?!0:g[15]),E[0]&65536&&(M.panOnScroll=g[16]===void 0?!1:g[16]),E[0]&131072&&(M.panOnDrag=g[17]===void 0?!0:g[17]),E[0]&4194304&&(M.paneClickDistance=g[22]===void 0?0:g[22]),E[0]&10879168|E[1]&8|E[3]&32&&(M.$$scope={dirty:E,ctx:g}),o.$set(M);const X={};E[0]&1048576&&(X.proOptions=g[20]),E[0]&524288&&(X.position=g[19]),l.$set(X),b&&b.p&&(!f||E[3]&32)&&pe(b,c,g,g[98],f?Qe(c,g[98],E,null):Je(g[98]),null),Nt(e,y=ft(m,[(!f||E[0]&16777216)&&{style:g[24]},(!f||E[0]&1107296256&&a!==(a=ze(["svelte-flow",g[25],g[30]])))&&{class:a},{"data-testid":"svelte-flow__wrapper"},E[1]&4&&g[33],{role:"application"}])),le(e,"svelte-12wlba6",!0)},i(g){f||(A(n.$$.fragment,g),A(o.$$.fragment,g),A(l.$$.fragment,g),A(b,g),f=!0)},o(g){Z(n.$$.fragment,g),Z(o.$$.fragment,g),Z(l.$$.fragment,g),Z(b,g),f=!1},d(g){g&&N(e),ce(n),ce(o),ce(l),b&&b.d(g),t[96](null),u(),d=!1,kt(h)}}}function Oa(t,e,n){let i;const o=["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"];let s=ve(e,o),l,r,a=we,u=()=>(a(),a=jn(I,z=>n(99,r=z)),I),f,d=we,h=()=>(d(),d=jn(i,z=>n(30,f=z)),i);t.$$.on_destroy.push(()=>a()),t.$$.on_destroy.push(()=>d());let{$$slots:c={},$$scope:b}=e;const m=ll(c);let{id:y="1"}=e,{nodes:g}=e,{edges:E}=e,{fitView:w=void 0}=e,{fitViewOptions:M=void 0}=e,{minZoom:X=void 0}=e,{maxZoom:K=void 0}=e,{initialViewport:T=void 0}=e,{viewport:I=void 0}=e;u();let{nodeTypes:H=void 0}=e,{edgeTypes:B=void 0}=e,{selectionKey:F=void 0}=e,{selectionMode:J=void 0}=e,{panActivationKey:W=void 0}=e,{multiSelectionKey:_=void 0}=e,{zoomActivationKey:k=void 0}=e,{nodesDraggable:S=void 0}=e,{nodesConnectable:P=void 0}=e,{nodeDragThreshold:D=void 0}=e,{elementsSelectable:O=void 0}=e,{snapGrid:Y=void 0}=e,{deleteKey:U=void 0}=e,{connectionRadius:G=void 0}=e,{connectionLineType:V=void 0}=e,{connectionMode:$=Ct.Strict}=e,{connectionLineStyle:ee=""}=e,{connectionLineContainerStyle:ie=""}=e,{onMoveStart:v=void 0}=e,{onMove:te=void 0}=e,{onMoveEnd:oe=void 0}=e,{isValidConnection:se=void 0}=e,{translateExtent:de=void 0}=e,{onlyRenderVisibleElements:ye=void 0}=e,{panOnScrollMode:De=lt.Free}=e,{preventScrolling:L=!0}=e,{zoomOnScroll:Te=!0}=e,{zoomOnDoubleClick:Pe=!0}=e,{zoomOnPinch:ct=!0}=e,{panOnScroll:st=!1}=e,{panOnDrag:rt=!0}=e,{selectionOnDrag:Ke=void 0}=e,{autoPanOnConnect:it=!0}=e,{autoPanOnNodeDrag:x=!0}=e,{onerror:dt=void 0}=e,{ondelete:ht=void 0}=e,{onedgecreate:R=void 0}=e,{attributionPosition:wt=void 0}=e,{proOptions:Re=void 0}=e,{defaultEdgeOptions:Ue=void 0}=e,{width:Q=void 0}=e,{height:at=void 0}=e,{colorMode:qe="light"}=e,{onconnect:Ze=void 0}=e,{onconnectstart:Mt=void 0}=e,{onconnectend:zt=void 0}=e,{onbeforedelete:Pt=void 0}=e,{oninit:gt=void 0}=e,{nodeOrigin:St=void 0}=e,{paneClickDistance:Et=0}=e,{nodeClickDistance:Fn=0}=e,{defaultMarkerColor:kn="#b1b1b7"}=e,{style:Gn=void 0}=e,{class:Un=void 0}=e,Ut,Ot,Dt;const To=r||T,Fe=sl(Rn)?Ve():dr({nodes:j(g),edges:j(E),width:Q,height:at,fitView:w,nodeOrigin:St});fn(()=>(Fe.width.set(Ot),Fe.height.set(Dt),Fe.domNode.set(Ut),Fe.syncNodeStores(g),Fe.syncEdgeStores(E),Fe.syncViewport(I),w!==void 0&&Fe.fitViewOnInit.set(w),M&&Fe.fitViewOptions.set(M),Vi(Fe,{nodeTypes:H,edgeTypes:B,minZoom:X,maxZoom:K,translateExtent:de,paneClickDistance:Et}),()=>{Fe.reset()}));const{initialized:qn}=Fe;q(t,qn,z=>n(73,l=z));let wn=!1;function No(z){ke.call(this,t,z)}function Vo(z){ke.call(this,t,z)}function Yo(z){ke.call(this,t,z)}function Ao(z){ke.call(this,t,z)}function Xo(z){ke.call(this,t,z)}function Wo(z){ke.call(this,t,z)}function Bo(z){ke.call(this,t,z)}function Lo(z){ke.call(this,t,z)}function Ko(z){ke.call(this,t,z)}function Ro(z){ke.call(this,t,z)}function Zo(z){ke.call(this,t,z)}function Fo(z){ke.call(this,t,z)}function Go(z){ke.call(this,t,z)}function Uo(z){ke.call(this,t,z)}function qo(z){ke.call(this,t,z)}function jo(z){ke.call(this,t,z)}function po(z){ke.call(this,t,z)}function Jo(z){ke.call(this,t,z)}function Qo(z){ke.call(this,t,z)}function xo(z){ke.call(this,t,z)}function $o(z){ke.call(this,t,z)}function el(z){An[z?"unshift":"push"](()=>{Ut=z,n(28,Ut)})}function tl(){Ot=this.clientWidth,Dt=this.clientHeight,n(26,Ot),n(27,Dt)}return t.$$set=z=>{e=Ce(Ce({},e),nt(z)),n(33,s=ve(e,o)),"id"in z&&n(35,y=z.id),"nodes"in z&&n(36,g=z.nodes),"edges"in z&&n(37,E=z.edges),"fitView"in z&&n(38,w=z.fitView),"fitViewOptions"in z&&n(39,M=z.fitViewOptions),"minZoom"in z&&n(40,X=z.minZoom),"maxZoom"in z&&n(41,K=z.maxZoom),"initialViewport"in z&&n(42,T=z.initialViewport),"viewport"in z&&u(n(0,I=z.viewport)),"nodeTypes"in z&&n(43,H=z.nodeTypes),"edgeTypes"in z&&n(44,B=z.edgeTypes),"selectionKey"in z&&n(1,F=z.selectionKey),"selectionMode"in z&&n(45,J=z.selectionMode),"panActivationKey"in z&&n(2,W=z.panActivationKey),"multiSelectionKey"in z&&n(3,_=z.multiSelectionKey),"zoomActivationKey"in z&&n(4,k=z.zoomActivationKey),"nodesDraggable"in z&&n(46,S=z.nodesDraggable),"nodesConnectable"in z&&n(47,P=z.nodesConnectable),"nodeDragThreshold"in z&&n(48,D=z.nodeDragThreshold),"elementsSelectable"in z&&n(49,O=z.elementsSelectable),"snapGrid"in z&&n(50,Y=z.snapGrid),"deleteKey"in z&&n(5,U=z.deleteKey),"connectionRadius"in z&&n(51,G=z.connectionRadius),"connectionLineType"in z&&n(52,V=z.connectionLineType),"connectionMode"in z&&n(53,$=z.connectionMode),"connectionLineStyle"in z&&n(6,ee=z.connectionLineStyle),"connectionLineContainerStyle"in z&&n(7,ie=z.connectionLineContainerStyle),"onMoveStart"in z&&n(8,v=z.onMoveStart),"onMove"in z&&n(9,te=z.onMove),"onMoveEnd"in z&&n(10,oe=z.onMoveEnd),"isValidConnection"in z&&n(54,se=z.isValidConnection),"translateExtent"in z&&n(55,de=z.translateExtent),"onlyRenderVisibleElements"in z&&n(56,ye=z.onlyRenderVisibleElements),"panOnScrollMode"in z&&n(11,De=z.panOnScrollMode),"preventScrolling"in z&&n(12,L=z.preventScrolling),"zoomOnScroll"in z&&n(13,Te=z.zoomOnScroll),"zoomOnDoubleClick"in z&&n(14,Pe=z.zoomOnDoubleClick),"zoomOnPinch"in z&&n(15,ct=z.zoomOnPinch),"panOnScroll"in z&&n(16,st=z.panOnScroll),"panOnDrag"in z&&n(17,rt=z.panOnDrag),"selectionOnDrag"in z&&n(18,Ke=z.selectionOnDrag),"autoPanOnConnect"in z&&n(57,it=z.autoPanOnConnect),"autoPanOnNodeDrag"in z&&n(58,x=z.autoPanOnNodeDrag),"onerror"in z&&n(59,dt=z.onerror),"ondelete"in z&&n(60,ht=z.ondelete),"onedgecreate"in z&&n(61,R=z.onedgecreate),"attributionPosition"in z&&n(19,wt=z.attributionPosition),"proOptions"in z&&n(20,Re=z.proOptions),"defaultEdgeOptions"in z&&n(21,Ue=z.defaultEdgeOptions),"width"in z&&n(62,Q=z.width),"height"in z&&n(63,at=z.height),"colorMode"in z&&n(64,qe=z.colorMode),"onconnect"in z&&n(65,Ze=z.onconnect),"onconnectstart"in z&&n(66,Mt=z.onconnectstart),"onconnectend"in z&&n(67,zt=z.onconnectend),"onbeforedelete"in z&&n(68,Pt=z.onbeforedelete),"oninit"in z&&n(69,gt=z.oninit),"nodeOrigin"in z&&n(70,St=z.nodeOrigin),"paneClickDistance"in z&&n(22,Et=z.paneClickDistance),"nodeClickDistance"in z&&n(23,Fn=z.nodeClickDistance),"defaultMarkerColor"in z&&n(71,kn=z.defaultMarkerColor),"style"in z&&n(24,Gn=z.style),"class"in z&&n(25,Un=z.class),"$$scope"in z&&n(98,b=z.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&201326592&&Ot!==void 0&&Dt!==void 0&&(Fe.width.set(Ot),Fe.height.set(Dt)),t.$$.dirty[2]&3200&&!wn&&l&&(gt==null||gt(),n(72,wn=!0)),t.$$.dirty[1]&2130690064|t.$$.dirty[2]&888&&_a(Fe,{flowId:y,connectionLineType:V,connectionRadius:G,selectionMode:J,snapGrid:Y,defaultMarkerColor:kn,nodesDraggable:S,nodesConnectable:P,elementsSelectable:O,onlyRenderVisibleElements:ye,isValidConnection:se,autoPanOnConnect:it,autoPanOnNodeDrag:x,onerror:dt,ondelete:ht,onedgecreate:R,connectionMode:$,nodeDragThreshold:D,onconnect:Ze,onconnectstart:Mt,onconnectend:zt,onbeforedelete:Pt,nodeOrigin:St}),t.$$.dirty[0]&4194304|t.$$.dirty[1]&16791040&&Vi(Fe,{nodeTypes:H,edgeTypes:B,minZoom:X,maxZoom:K,translateExtent:de,paneClickDistance:Et}),t.$$.dirty[2]&4&&h(n(29,i=wa(qe)))},[I,F,W,_,k,U,ee,ie,v,te,oe,De,L,Te,Pe,ct,st,rt,Ke,wt,Re,Ue,Et,Fn,Gn,Un,Ot,Dt,Ut,i,f,To,qn,s,m,y,g,E,w,M,X,K,T,H,B,J,S,P,D,O,Y,G,V,$,se,de,ye,it,x,dt,ht,R,Q,at,qe,Ze,Mt,zt,Pt,gt,St,kn,wn,l,c,No,Vo,Yo,Ao,Xo,Wo,Bo,Lo,Ko,Ro,Zo,Fo,Go,Uo,qo,jo,po,Jo,Qo,xo,$o,el,tl,b]}class vu extends me{constructor(e){super(),be(this,e,Oa,Pa,_e,{id:35,nodes:36,edges:37,fitView:38,fitViewOptions:39,minZoom:40,maxZoom:41,initialViewport:42,viewport:0,nodeTypes:43,edgeTypes:44,selectionKey:1,selectionMode:45,panActivationKey:2,multiSelectionKey:3,zoomActivationKey:4,nodesDraggable:46,nodesConnectable:47,nodeDragThreshold:48,elementsSelectable:49,snapGrid:50,deleteKey:5,connectionRadius:51,connectionLineType:52,connectionMode:53,connectionLineStyle:6,connectionLineContainerStyle:7,onMoveStart:8,onMove:9,onMoveEnd:10,isValidConnection:54,translateExtent:55,onlyRenderVisibleElements:56,panOnScrollMode:11,preventScrolling:12,zoomOnScroll:13,zoomOnDoubleClick:14,zoomOnPinch:15,panOnScroll:16,panOnDrag:17,selectionOnDrag:18,autoPanOnConnect:57,autoPanOnNodeDrag:58,onerror:59,ondelete:60,onedgecreate:61,attributionPosition:19,proOptions:20,defaultEdgeOptions:21,width:62,height:63,colorMode:64,onconnect:65,onconnectstart:66,onconnectend:67,onbeforedelete:68,oninit:69,nodeOrigin:70,paneClickDistance:22,nodeClickDistance:23,defaultMarkerColor:71,style:24,class:25},null,[-1,-1,-1,-1])}}const Da=t=>({}),Ai=t=>({class:"button-svg"});function Ha(t){let e,n,i,o,s;const l=t[8].default,r=je(l,t,t[7],Ai);let a=[{type:"button"},{class:n=ze(["svelte-flow__controls-button",t[0]])},t[6]],u={};for(let f=0;f<a.length;f+=1)u=Ce(u,a[f]);return{c(){e=Be("button"),r&&r.c(),this.h()},l(f){e=Le(f,"BUTTON",{type:!0,class:!0});var d=re(e);r&&r.l(d),d.forEach(N),this.h()},h(){Nt(e,u),ae(e,"--xy-controls-button-background-color-props",t[1]),ae(e,"--xy-controls-button-background-color-hover-props",t[2]),ae(e,"--xy-controls-button-color-props",t[3]),ae(e,"--xy-controls-button-color-hover-props",t[4]),ae(e,"--xy-controls-button-border-color-props",t[5])},m(f,d){p(f,e,d),r&&r.m(e,null),e.autofocus&&e.focus(),i=!0,o||(s=Oe(e,"click",t[9]),o=!0)},p(f,[d]){r&&r.p&&(!i||d&128)&&pe(r,l,f,f[7],i?Qe(l,f[7],d,Da):Je(f[7]),Ai),Nt(e,u=ft(a,[{type:"button"},(!i||d&1&&n!==(n=ze(["svelte-flow__controls-button",f[0]])))&&{class:n},d&64&&f[6]])),ae(e,"--xy-controls-button-background-color-props",f[1]),ae(e,"--xy-controls-button-background-color-hover-props",f[2]),ae(e,"--xy-controls-button-color-props",f[3]),ae(e,"--xy-controls-button-color-hover-props",f[4]),ae(e,"--xy-controls-button-border-color-props",f[5])},i(f){i||(A(r,f),i=!0)},o(f){Z(r,f),i=!1},d(f){f&&N(e),r&&r.d(f),o=!1,s()}}}function Ia(t,e,n){const i=["class"];let o=ve(e,i),{$$slots:s={},$$scope:l}=e,{class:r=void 0}=e,a,u,f,d,h;function c(b){ke.call(this,t,b)}return t.$$set=b=>{e=Ce(Ce({},e),nt(b)),n(6,o=ve(e,i)),"class"in b&&n(0,r=b.class),"$$scope"in b&&n(7,l=b.$$scope)},[r,a,u,f,d,h,o,l,s,c]}class un extends me{constructor(e){super(),be(this,e,Ia,Ha,_e,{class:0})}}function va(t){let e,n;return{c(){e=Se("svg"),n=Se("path"),this.h()},l(i){e=Ee(i,"svg",{xmlns:!0,viewBox:!0});var o=re(e);n=Ee(o,"path",{d:!0}),re(n).forEach(N),o.forEach(N),this.h()},h(){C(n,"d","M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"),C(e,"xmlns","http://www.w3.org/2000/svg"),C(e,"viewBox","0 0 32 32")},m(i,o){p(i,e,o),We(e,n)},p:we,i:we,o:we,d(i){i&&N(e)}}}class Ta extends me{constructor(e){super(),be(this,e,null,va,_e,{})}}function Na(t){let e,n;return{c(){e=Se("svg"),n=Se("path"),this.h()},l(i){e=Ee(i,"svg",{xmlns:!0,viewBox:!0});var o=re(e);n=Ee(o,"path",{d:!0}),re(n).forEach(N),o.forEach(N),this.h()},h(){C(n,"d","M0 0h32v4.2H0z"),C(e,"xmlns","http://www.w3.org/2000/svg"),C(e,"viewBox","0 0 32 5")},m(i,o){p(i,e,o),We(e,n)},p:we,i:we,o:we,d(i){i&&N(e)}}}class Va extends me{constructor(e){super(),be(this,e,null,Na,_e,{})}}function Ya(t){let e,n;return{c(){e=Se("svg"),n=Se("path"),this.h()},l(i){e=Ee(i,"svg",{xmlns:!0,viewBox:!0});var o=re(e);n=Ee(o,"path",{d:!0}),re(n).forEach(N),o.forEach(N),this.h()},h(){C(n,"d","M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"),C(e,"xmlns","http://www.w3.org/2000/svg"),C(e,"viewBox","0 0 32 30")},m(i,o){p(i,e,o),We(e,n)},p:we,i:we,o:we,d(i){i&&N(e)}}}class Aa extends me{constructor(e){super(),be(this,e,null,Ya,_e,{})}}function Xa(t){let e,n;return{c(){e=Se("svg"),n=Se("path"),this.h()},l(i){e=Ee(i,"svg",{xmlns:!0,viewBox:!0});var o=re(e);n=Ee(o,"path",{d:!0}),re(n).forEach(N),o.forEach(N),this.h()},h(){C(n,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"),C(e,"xmlns","http://www.w3.org/2000/svg"),C(e,"viewBox","0 0 25 32")},m(i,o){p(i,e,o),We(e,n)},p:we,i:we,o:we,d(i){i&&N(e)}}}class Wa extends me{constructor(e){super(),be(this,e,null,Xa,_e,{})}}function Ba(t){let e,n;return{c(){e=Se("svg"),n=Se("path"),this.h()},l(i){e=Ee(i,"svg",{xmlns:!0,viewBox:!0});var o=re(e);n=Ee(o,"path",{d:!0}),re(n).forEach(N),o.forEach(N),this.h()},h(){C(n,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"),C(e,"xmlns","http://www.w3.org/2000/svg"),C(e,"viewBox","0 0 25 32")},m(i,o){p(i,e,o),We(e,n)},p:we,i:we,o:we,d(i){i&&N(e)}}}class La extends me{constructor(e){super(),be(this,e,null,Ba,_e,{})}}const Ka=t=>({}),Xi=t=>({}),Ra=t=>({}),Wi=t=>({});function Bi(t){let e,n,i,o;const s=[{class:"svelte-flow__controls-zoomin"},{title:"zoom in"},{"aria-label":"zoom in"},{disabled:t[9]},t[17]];let l={$$slots:{default:[Za]},$$scope:{ctx:t}};for(let u=0;u<s.length;u+=1)l=Ce(l,s[u]);e=new un({props:l}),e.$on("click",t[18]);const r=[{class:"svelte-flow__controls-zoomout"},{title:"zoom out"},{"aria-label":"zoom out"},{disabled:t[10]},t[17]];let a={$$slots:{default:[Fa]},$$scope:{ctx:t}};for(let u=0;u<r.length;u+=1)a=Ce(a,r[u]);return i=new un({props:a}),i.$on("click",t[19]),{c(){ue(e.$$.fragment),n=He(),ue(i.$$.fragment)},l(u){ge(e.$$.fragment,u),n=Ie(u),ge(i.$$.fragment,u)},m(u,f){fe(e,u,f),p(u,n,f),fe(i,u,f),o=!0},p(u,f){const d=f[0]&131584?ft(s,[s[0],s[1],s[2],f[0]&512&&{disabled:u[9]},f[0]&131072&&Vt(u[17])]):{};f[1]&32&&(d.$$scope={dirty:f,ctx:u}),e.$set(d);const h=f[0]&132096?ft(r,[r[0],r[1],r[2],f[0]&1024&&{disabled:u[10]},f[0]&131072&&Vt(u[17])]):{};f[1]&32&&(h.$$scope={dirty:f,ctx:u}),i.$set(h)},i(u){o||(A(e.$$.fragment,u),A(i.$$.fragment,u),o=!0)},o(u){Z(e.$$.fragment,u),Z(i.$$.fragment,u),o=!1},d(u){u&&N(n),ce(e,u),ce(i,u)}}}function Za(t){let e,n;return e=new Ta({}),{c(){ue(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,o){fe(e,i,o),n=!0},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function Fa(t){let e,n;return e=new Va({}),{c(){ue(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,o){fe(e,i,o),n=!0},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function Li(t){let e,n;const i=[{class:"svelte-flow__controls-fitview"},{title:"fit view"},{"aria-label":"fit view"},t[17]];let o={$$slots:{default:[Ga]},$$scope:{ctx:t}};for(let s=0;s<i.length;s+=1)o=Ce(o,i[s]);return e=new un({props:o}),e.$on("click",t[20]),{c(){ue(e.$$.fragment)},l(s){ge(e.$$.fragment,s)},m(s,l){fe(e,s,l),n=!0},p(s,l){const r=l[0]&131072?ft(i,[i[0],i[1],i[2],Vt(s[17])]):{};l[1]&32&&(r.$$scope={dirty:l,ctx:s}),e.$set(r)},i(s){n||(A(e.$$.fragment,s),n=!0)},o(s){Z(e.$$.fragment,s),n=!1},d(s){ce(e,s)}}}function Ga(t){let e,n;return e=new Aa({}),{c(){ue(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,o){fe(e,i,o),n=!0},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function Ki(t){let e,n;const i=[{class:"svelte-flow__controls-interactive"},{title:"toggle interactivity"},{"aria-label":"toggle interactivity"},t[17]];let o={$$slots:{default:[ja]},$$scope:{ctx:t}};for(let s=0;s<i.length;s+=1)o=Ce(o,i[s]);return e=new un({props:o}),e.$on("click",t[21]),{c(){ue(e.$$.fragment)},l(s){ge(e.$$.fragment,s)},m(s,l){fe(e,s,l),n=!0},p(s,l){const r=l[0]&131072?ft(i,[i[0],i[1],i[2],Vt(s[17])]):{};l[0]&256|l[1]&32&&(r.$$scope={dirty:l,ctx:s}),e.$set(r)},i(s){n||(A(e.$$.fragment,s),n=!0)},o(s){Z(e.$$.fragment,s),n=!1},d(s){ce(e,s)}}}function Ua(t){let e,n;return e=new Wa({}),{c(){ue(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,o){fe(e,i,o),n=!0},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function qa(t){let e,n;return e=new La({}),{c(){ue(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,o){fe(e,i,o),n=!0},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function ja(t){let e,n,i,o;const s=[qa,Ua],l=[];function r(a,u){return a[8]?0:1}return e=r(t),n=l[e]=s[e](t),{c(){n.c(),i=Me()},l(a){n.l(a),i=Me()},m(a,u){l[e].m(a,u),p(a,i,u),o=!0},p(a,u){let f=e;e=r(a),e!==f&&(Ae(),Z(l[f],1,1,()=>{l[f]=null}),Xe(),n=l[e],n||(n=l[e]=s[e](a),n.c()),A(n,1),n.m(i.parentNode,i))},i(a){o||(A(n),o=!0)},o(a){Z(n),o=!1},d(a){a&&N(i),l[e].d(a)}}}function pa(t){let e,n,i,o,s,l;const r=t[35].before,a=je(r,t,t[36],Wi);let u=t[1]&&Bi(t),f=t[2]&&Li(t),d=t[3]&&Ki(t);const h=t[35].default,c=je(h,t,t[36],null),b=t[35].after,m=je(b,t,t[36],Xi);return{c(){a&&a.c(),e=He(),u&&u.c(),n=He(),f&&f.c(),i=He(),d&&d.c(),o=He(),c&&c.c(),s=He(),m&&m.c()},l(y){a&&a.l(y),e=Ie(y),u&&u.l(y),n=Ie(y),f&&f.l(y),i=Ie(y),d&&d.l(y),o=Ie(y),c&&c.l(y),s=Ie(y),m&&m.l(y)},m(y,g){a&&a.m(y,g),p(y,e,g),u&&u.m(y,g),p(y,n,g),f&&f.m(y,g),p(y,i,g),d&&d.m(y,g),p(y,o,g),c&&c.m(y,g),p(y,s,g),m&&m.m(y,g),l=!0},p(y,g){a&&a.p&&(!l||g[1]&32)&&pe(a,r,y,y[36],l?Qe(r,y[36],g,Ra):Je(y[36]),Wi),y[1]?u?(u.p(y,g),g[0]&2&&A(u,1)):(u=Bi(y),u.c(),A(u,1),u.m(n.parentNode,n)):u&&(Ae(),Z(u,1,1,()=>{u=null}),Xe()),y[2]?f?(f.p(y,g),g[0]&4&&A(f,1)):(f=Li(y),f.c(),A(f,1),f.m(i.parentNode,i)):f&&(Ae(),Z(f,1,1,()=>{f=null}),Xe()),y[3]?d?(d.p(y,g),g[0]&8&&A(d,1)):(d=Ki(y),d.c(),A(d,1),d.m(o.parentNode,o)):d&&(Ae(),Z(d,1,1,()=>{d=null}),Xe()),c&&c.p&&(!l||g[1]&32)&&pe(c,h,y,y[36],l?Qe(h,y[36],g,null):Je(y[36]),null),m&&m.p&&(!l||g[1]&32)&&pe(m,b,y,y[36],l?Qe(b,y[36],g,Ka):Je(y[36]),Xi)},i(y){l||(A(a,y),A(u),A(f),A(d),A(c,y),A(m,y),l=!0)},o(y){Z(a,y),Z(u),Z(f),Z(d),Z(c,y),Z(m,y),l=!1},d(y){y&&(N(e),N(n),N(i),N(o),N(s)),a&&a.d(y),u&&u.d(y),f&&f.d(y),d&&d.d(y),c&&c.d(y),m&&m.d(y)}}}function Ja(t){let e,n;return e=new Zn({props:{class:ze(["svelte-flow__controls",t[7],t[6]]),position:t[0],"data-testid":"svelte-flow__controls","aria-label":t[4]??"Svelte Flow controls",style:t[5],$$slots:{default:[pa]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,o){fe(e,i,o),n=!0},p(i,o){const s={};o[0]&192&&(s.class=ze(["svelte-flow__controls",i[7],i[6]])),o[0]&1&&(s.position=i[0]),o[0]&16&&(s["aria-label"]=i[4]??"Svelte Flow controls"),o[0]&32&&(s.style=i[5]),o[0]&1806|o[1]&32&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function Qa(t,e,n){let i,o,s,l,r,a,u,f,d,h,{$$slots:c={},$$scope:b}=e,{position:m="bottom-left"}=e,{showZoom:y=!0}=e,{showFitView:g=!0}=e,{showLock:E=!0}=e,{buttonBgColor:w=void 0}=e,{buttonBgColorHover:M=void 0}=e,{buttonColor:X=void 0}=e,{buttonColorHover:K=void 0}=e,{buttonBorderColor:T=void 0}=e,{ariaLabel:I=void 0}=e,{style:H=void 0}=e,{orientation:B="vertical"}=e,{fitViewOptions:F=void 0}=e,{class:J=""}=e;const{zoomIn:W,zoomOut:_,fitView:k,viewport:S,minZoom:P,maxZoom:D,nodesDraggable:O,nodesConnectable:Y,elementsSelectable:U}=Ve();q(t,S,v=>n(30,a=v)),q(t,P,v=>n(31,u=v)),q(t,D,v=>n(29,r=v)),q(t,O,v=>n(34,h=v)),q(t,Y,v=>n(33,d=v)),q(t,U,v=>n(32,f=v));const G={bgColor:w,bgColorHover:M,color:X,colorHover:K,borderColor:T},V=()=>{W()},$=()=>{_()},ee=()=>{k(F)},ie=()=>{n(8,i=!i),O.set(i),Y.set(i),U.set(i)};return t.$$set=v=>{"position"in v&&n(0,m=v.position),"showZoom"in v&&n(1,y=v.showZoom),"showFitView"in v&&n(2,g=v.showFitView),"showLock"in v&&n(3,E=v.showLock),"buttonBgColor"in v&&n(22,w=v.buttonBgColor),"buttonBgColorHover"in v&&n(23,M=v.buttonBgColorHover),"buttonColor"in v&&n(24,X=v.buttonColor),"buttonColorHover"in v&&n(25,K=v.buttonColorHover),"buttonBorderColor"in v&&n(26,T=v.buttonBorderColor),"ariaLabel"in v&&n(4,I=v.ariaLabel),"style"in v&&n(5,H=v.style),"orientation"in v&&n(27,B=v.orientation),"fitViewOptions"in v&&n(28,F=v.fitViewOptions),"class"in v&&n(6,J=v.class),"$$scope"in v&&n(36,b=v.$$scope)},t.$$.update=()=>{t.$$.dirty[1]&14&&n(8,i=h||d||f),t.$$.dirty[0]&1073741824|t.$$.dirty[1]&1&&n(10,o=a.zoom<=u),t.$$.dirty[0]&1610612736&&n(9,s=a.zoom>=r),t.$$.dirty[0]&134217728&&n(7,l=B==="horizontal"?"horizontal":"vertical")},[m,y,g,E,I,H,J,l,i,s,o,S,P,D,O,Y,U,G,V,$,ee,ie,w,M,X,K,T,B,F,r,a,u,f,d,h,c,b]}class Tu extends me{constructor(e){super(),be(this,e,Qa,Ja,_e,{position:0,showZoom:1,showFitView:2,showLock:3,buttonBgColor:22,buttonBgColorHover:23,buttonColor:24,buttonColorHover:25,buttonBorderColor:26,ariaLabel:4,style:5,orientation:27,fitViewOptions:28,class:6},null,[-1,-1])}}var yt;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(yt||(yt={}));function xa(t){let e,n;return{c(){e=Se("circle"),this.h()},l(i){e=Ee(i,"circle",{cx:!0,cy:!0,r:!0,class:!0}),re(e).forEach(N),this.h()},h(){C(e,"cx",t[0]),C(e,"cy",t[0]),C(e,"r",t[0]),C(e,"class",n=ze(["svelte-flow__background-pattern","dots",t[1]]))},m(i,o){p(i,e,o)},p(i,[o]){o&1&&C(e,"cx",i[0]),o&1&&C(e,"cy",i[0]),o&1&&C(e,"r",i[0]),o&2&&n!==(n=ze(["svelte-flow__background-pattern","dots",i[1]]))&&C(e,"class",n)},i:we,o:we,d(i){i&&N(e)}}}function $a(t,e,n){let{radius:i=5}=e,{class:o=""}=e;return t.$$set=s=>{"radius"in s&&n(0,i=s.radius),"class"in s&&n(1,o=s.class)},[i,o]}class eu extends me{constructor(e){super(),be(this,e,$a,xa,_e,{radius:0,class:1})}}function tu(t){let e,n,i;return{c(){e=Se("path"),this.h()},l(o){e=Ee(o,"path",{"stroke-width":!0,d:!0,class:!0}),re(e).forEach(N),this.h()},h(){C(e,"stroke-width",t[0]),C(e,"d",n=`M${t[1][0]/2} 0 V${t[1][1]} M0 ${t[1][1]/2} H${t[1][0]}`),C(e,"class",i=ze(["svelte-flow__background-pattern",t[2],t[3]]))},m(o,s){p(o,e,s)},p(o,[s]){s&1&&C(e,"stroke-width",o[0]),s&2&&n!==(n=`M${o[1][0]/2} 0 V${o[1][1]} M0 ${o[1][1]/2} H${o[1][0]}`)&&C(e,"d",n),s&12&&i!==(i=ze(["svelte-flow__background-pattern",o[2],o[3]]))&&C(e,"class",i)},i:we,o:we,d(o){o&&N(e)}}}function nu(t,e,n){let{lineWidth:i=1}=e,{dimensions:o}=e,{variant:s=void 0}=e,{class:l=""}=e;return t.$$set=r=>{"lineWidth"in r&&n(0,i=r.lineWidth),"dimensions"in r&&n(1,o=r.dimensions),"variant"in r&&n(2,s=r.variant),"class"in r&&n(3,l=r.class)},[i,o,s,l]}class iu extends me{constructor(e){super(),be(this,e,nu,tu,_e,{lineWidth:0,dimensions:1,variant:2,class:3})}}function ou(t){let e,n;return e=new iu({props:{dimensions:t[6],variant:t[0],lineWidth:t[1],class:t[4]}}),{c(){ue(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,o){fe(e,i,o),n=!0},p(i,o){const s={};o&64&&(s.dimensions=i[6]),o&1&&(s.variant=i[0]),o&2&&(s.lineWidth=i[1]),o&16&&(s.class=i[4]),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function lu(t){let e,n;return e=new eu({props:{radius:t[7]/2,class:t[4]}}),{c(){ue(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,o){fe(e,i,o),n=!0},p(i,o){const s={};o&128&&(s.radius=i[7]/2),o&16&&(s.class=i[4]),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function su(t){let e,n,i,o,s,l,r,a,u,f,d,h,c;const b=[lu,ou],m=[];function y(g,E){return g[14]?0:1}return i=y(t),o=m[i]=b[i](t),{c(){e=Se("svg"),n=Se("pattern"),o.c(),f=Se("rect"),this.h()},l(g){e=Ee(g,"svg",{class:!0,"data-testid":!0});var E=re(e);n=Ee(E,"pattern",{id:!0,x:!0,y:!0,width:!0,height:!0,patternUnits:!0,patternTransform:!0});var w=re(n);o.l(w),w.forEach(N),f=Ee(E,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),re(f).forEach(N),E.forEach(N),this.h()},h(){C(n,"id",t[11]),C(n,"x",s=t[9].x%t[8][0]),C(n,"y",l=t[9].y%t[8][1]),C(n,"width",r=t[8][0]),C(n,"height",a=t[8][1]),C(n,"patternUnits","userSpaceOnUse"),C(n,"patternTransform",u=`translate(-${t[10][0]},-${t[10][1]})`),C(f,"x","0"),C(f,"y","0"),C(f,"width","100%"),C(f,"height","100%"),C(f,"fill",d=`url(#${t[11]})`),C(e,"class",h=pn(ze(["svelte-flow__background",t[5]]))+" svelte-1r7pe8d"),C(e,"data-testid","svelte-flow__background"),ae(e,"--xy-background-color-props",t[2]),ae(e,"--xy-background-pattern-color-props",t[3])},m(g,E){p(g,e,E),We(e,n),m[i].m(n,null),We(e,f),c=!0},p(g,[E]){o.p(g,E),(!c||E&2048)&&C(n,"id",g[11]),(!c||E&768&&s!==(s=g[9].x%g[8][0]))&&C(n,"x",s),(!c||E&768&&l!==(l=g[9].y%g[8][1]))&&C(n,"y",l),(!c||E&256&&r!==(r=g[8][0]))&&C(n,"width",r),(!c||E&256&&a!==(a=g[8][1]))&&C(n,"height",a),(!c||E&1024&&u!==(u=`translate(-${g[10][0]},-${g[10][1]})`))&&C(n,"patternTransform",u),(!c||E&2048&&d!==(d=`url(#${g[11]})`))&&C(f,"fill",d),(!c||E&32&&h!==(h=pn(ze(["svelte-flow__background",g[5]]))+" svelte-1r7pe8d"))&&C(e,"class",h),E&4&&ae(e,"--xy-background-color-props",g[2]),E&8&&ae(e,"--xy-background-pattern-color-props",g[3])},i(g){c||(A(o),c=!0)},o(g){Z(o),c=!1},d(g){g&&N(e),m[i].d()}}}const ru={[yt.Dots]:1,[yt.Lines]:1,[yt.Cross]:6};function au(t,e,n){let i,o,s,l,r,a,u,{id:f=void 0}=e,{variant:d=yt.Dots}=e,{gap:h=20}=e,{size:c=1}=e,{lineWidth:b=1}=e,{bgColor:m=void 0}=e,{patternColor:y=void 0}=e,{patternClass:g=void 0}=e,{class:E=""}=e;const{viewport:w,flowId:M}=Ve();q(t,w,H=>n(9,a=H)),q(t,M,H=>n(18,u=H));const X=c||ru[d],K=d===yt.Dots,T=d===yt.Cross,I=Array.isArray(h)?h:[h,h];return t.$$set=H=>{"id"in H&&n(15,f=H.id),"variant"in H&&n(0,d=H.variant),"gap"in H&&n(16,h=H.gap),"size"in H&&n(17,c=H.size),"lineWidth"in H&&n(1,b=H.lineWidth),"bgColor"in H&&n(2,m=H.bgColor),"patternColor"in H&&n(3,y=H.patternColor),"patternClass"in H&&n(4,g=H.patternClass),"class"in H&&n(5,E=H.class)},t.$$.update=()=>{t.$$.dirty&294912&&n(11,i=`background-pattern-${u}-${f||""}`),t.$$.dirty&512&&n(8,o=[I[0]*a.zoom||1,I[1]*a.zoom||1]),t.$$.dirty&512&&n(7,s=X*a.zoom),t.$$.dirty&384&&n(6,l=T?[s,s]:o),t.$$.dirty&192&&n(10,r=K?[s/2,s/2]:[l[0]/2,l[1]/2])},[d,b,m,y,g,E,l,s,o,a,r,i,w,M,K,f,h,c,u]}class Nu extends me{constructor(e){super(),be(this,e,au,su,_e,{id:15,variant:0,gap:16,size:17,lineWidth:1,bgColor:2,patternColor:3,patternClass:4,class:5})}}function uu(t){let e,n,i;return{c(){e=Se("rect"),this.h()},l(o){e=Ee(o,"rect",{class:!0,x:!0,y:!0,rx:!0,ry:!0,width:!0,height:!0,style:!0,"shape-rendering":!0}),re(e).forEach(N),this.h()},h(){C(e,"class",n=ze(["svelte-flow__minimap-node",t[10]])),C(e,"x",t[0]),C(e,"y",t[1]),C(e,"rx",t[4]),C(e,"ry",t[4]),C(e,"width",t[2]),C(e,"height",t[3]),C(e,"style",i=`${t[5]?`fill: ${t[5]};`:""}${t[7]?`stroke: ${t[7]};`:""}${t[8]?`stroke-width: ${t[8]};`:""}`),C(e,"shape-rendering",t[6]),le(e,"selected",t[9])},m(o,s){p(o,e,s)},p(o,[s]){s&1024&&n!==(n=ze(["svelte-flow__minimap-node",o[10]]))&&C(e,"class",n),s&1&&C(e,"x",o[0]),s&2&&C(e,"y",o[1]),s&16&&C(e,"rx",o[4]),s&16&&C(e,"ry",o[4]),s&4&&C(e,"width",o[2]),s&8&&C(e,"height",o[3]),s&416&&i!==(i=`${o[5]?`fill: ${o[5]};`:""}${o[7]?`stroke: ${o[7]};`:""}${o[8]?`stroke-width: ${o[8]};`:""}`)&&C(e,"style",i),s&64&&C(e,"shape-rendering",o[6]),s&1536&&le(e,"selected",o[9])},i:we,o:we,d(o){o&&N(e)}}}function fu(t,e,n){let{x:i}=e,{y:o}=e,{width:s=0}=e,{height:l=0}=e,{borderRadius:r=5}=e,{color:a=void 0}=e,{shapeRendering:u}=e,{strokeColor:f=void 0}=e,{strokeWidth:d=2}=e,{selected:h=!1}=e,{class:c=""}=e;return t.$$set=b=>{"x"in b&&n(0,i=b.x),"y"in b&&n(1,o=b.y),"width"in b&&n(2,s=b.width),"height"in b&&n(3,l=b.height),"borderRadius"in b&&n(4,r=b.borderRadius),"color"in b&&n(5,a=b.color),"shapeRendering"in b&&n(6,u=b.shapeRendering),"strokeColor"in b&&n(7,f=b.strokeColor),"strokeWidth"in b&&n(8,d=b.strokeWidth),"selected"in b&&n(9,h=b.selected),"class"in b&&n(10,c=b.class)},[i,o,s,l,r,a,u,f,d,h,c]}class cu extends me{constructor(e){super(),be(this,e,fu,uu,_e,{x:0,y:1,width:2,height:3,borderRadius:4,color:5,shapeRendering:6,strokeColor:7,strokeWidth:8,selected:9,class:10})}}function du(t,e){const n=ss({domNode:t,panZoom:e.panZoom,getTransform:()=>{const o=j(e.viewport);return[o.x,o.y,o.zoom]},getViewScale:e.getViewScale});function i(o){n.update({translateExtent:o.translateExtent,width:o.width,height:o.height,inversePan:o.inversePan,zoomStep:o.zoomStep,pannable:o.pannable,zoomable:o.zoomable})}return{update:i,destroy(){n.destroy()}}}function Ri(t,e,n){const i=t.slice();i[55]=e[n];const o=i[20].get(i[55].id);return i[56]=o,i}function Dn(t){const e=t.slice(),n=bn(e[56]);return e[59]=n,e}function Zi(t){let e,n,i=[],o=new Map,s,l,r,a,u,f,d,h=t[1]&&Fi(t),c=_t(t[19]);const b=m=>m[55].id;for(let m=0;m<c.length;m+=1){let y=Ri(t,c,m),g=b(y);o.set(g,i[m]=Ui(g,y))}return{c(){e=Se("svg"),h&&h.c(),n=Me();for(let m=0;m<i.length;m+=1)i[m].c();s=Se("path"),this.h()},l(m){e=Ee(m,"svg",{width:!0,height:!0,viewBox:!0,class:!0,role:!0,"aria-labelledby":!0});var y=re(e);h&&h.l(y),n=Me();for(let g=0;g<i.length;g+=1)i[g].l(y);s=Ee(y,"path",{class:!0,d:!0,"fill-rule":!0,"pointer-events":!0}),re(s).forEach(N),y.forEach(N),this.h()},h(){C(s,"class","svelte-flow__minimap-mask"),C(s,"d",l="M"+(t[26]-t[15])+","+(t[25]-t[15])+"h"+(t[24]+t[15]*2)+"v"+(t[23]+t[15]*2)+"h"+(-t[24]-t[15]*2)+`z
      M`+t[18].x+","+t[18].y+"h"+t[18].width+"v"+t[18].height+"h"+-t[18].width+"z"),C(s,"fill-rule","evenodd"),C(s,"pointer-events","none"),C(e,"width",t[17]),C(e,"height",t[16]),C(e,"viewBox",r=t[26]+" "+t[25]+" "+t[24]+" "+t[23]),C(e,"class","svelte-flow__minimap-svg"),C(e,"role","img"),C(e,"aria-labelledby",t[41]),ae(e,"--xy-minimap-mask-background-color-props",t[5]),ae(e,"--xy-minimap-mask-stroke-color-props",t[6]),ae(e,"--xy-minimap-mask-stroke-width-props",t[7]?t[7]*t[14]:void 0)},m(m,y){p(m,e,y),h&&h.m(e,null),We(e,n);for(let g=0;g<i.length;g+=1)i[g]&&i[g].m(e,null);We(e,s),u=!0,f||(d=Ge(a=du.call(null,e,{panZoom:t[27],viewport:t[31],getViewScale:t[42],translateExtent:t[28],width:t[22],height:t[21],inversePan:t[10],zoomStep:t[11],pannable:t[8],zoomable:t[9]})),f=!0)},p(m,y){m[1]?h?h.p(m,y):(h=Fi(m),h.c(),h.m(e,n)):h&&(h.d(1),h=null),y[0]&1572876|y[1]&960&&(c=_t(m[19]),Ae(),i=dn(i,y,b,1,m,c,o,e,hn,Ui,s,Ri),Xe()),(!u||y[0]&126124032&&l!==(l="M"+(m[26]-m[15])+","+(m[25]-m[15])+"h"+(m[24]+m[15]*2)+"v"+(m[23]+m[15]*2)+"h"+(-m[24]-m[15]*2)+`z
      M`+m[18].x+","+m[18].y+"h"+m[18].width+"v"+m[18].height+"h"+-m[18].width+"z"))&&C(s,"d",l),(!u||y[0]&131072)&&C(e,"width",m[17]),(!u||y[0]&65536)&&C(e,"height",m[16]),(!u||y[0]&125829120&&r!==(r=m[26]+" "+m[25]+" "+m[24]+" "+m[23]))&&C(e,"viewBox",r),a&&Ye(a.update)&&y[0]&408948480&&a.update.call(null,{panZoom:m[27],viewport:m[31],getViewScale:m[42],translateExtent:m[28],width:m[22],height:m[21],inversePan:m[10],zoomStep:m[11],pannable:m[8],zoomable:m[9]}),y[0]&32&&ae(e,"--xy-minimap-mask-background-color-props",m[5]),y[0]&64&&ae(e,"--xy-minimap-mask-stroke-color-props",m[6]),y[0]&16512&&ae(e,"--xy-minimap-mask-stroke-width-props",m[7]?m[7]*m[14]:void 0)},i(m){if(!u){for(let y=0;y<c.length;y+=1)A(i[y]);u=!0}},o(m){for(let y=0;y<i.length;y+=1)Z(i[y]);u=!1},d(m){m&&N(e),h&&h.d();for(let y=0;y<i.length;y+=1)i[y].d();f=!1,d()}}}function Fi(t){let e,n;return{c(){e=Se("title"),n=Lt(t[1]),this.h()},l(i){e=Ee(i,"title",{id:!0});var o=re(e);n=Kt(o,t[1]),o.forEach(N),this.h()},h(){C(e,"id",t[41])},m(i,o){p(i,e,o),We(e,n)},p(i,o){o[0]&2&&Rt(n,i[1])},d(i){i&&N(e)}}}function Gi(t){var s;let e,n;const i=[{x:t[56].internals.positionAbsolute.x},{y:t[56].internals.positionAbsolute.y},t[59],{selected:t[56].selected},{color:(s=t[37])==null?void 0:s.call(t,t[56])},{borderRadius:t[2]},{strokeColor:t[38](t[56])},{strokeWidth:t[3]},{shapeRendering:t[40]},{class:t[39](t[56])}];let o={};for(let l=0;l<i.length;l+=1)o=Ce(o,i[l]);return e=new cu({props:o}),{c(){ue(e.$$.fragment)},l(l){ge(e.$$.fragment,l)},m(l,r){fe(e,l,r),n=!0},p(l,r){var u;const a=r[0]&1572876|r[1]&960?ft(i,[r[0]&1572864&&{x:l[56].internals.positionAbsolute.x},r[0]&1572864&&{y:l[56].internals.positionAbsolute.y},r[0]&1572864&&Vt(l[59]),r[0]&1572864&&{selected:l[56].selected},r[0]&1572864|r[1]&64&&{color:(u=l[37])==null?void 0:u.call(l,l[56])},r[0]&4&&{borderRadius:l[2]},r[0]&1572864|r[1]&128&&{strokeColor:l[38](l[56])},r[0]&8&&{strokeWidth:l[3]},r[1]&512&&{shapeRendering:l[40]},r[0]&1572864|r[1]&256&&{class:l[39](l[56])}]):{};e.$set(a)},i(l){n||(A(e.$$.fragment,l),n=!0)},o(l){Z(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function Ui(t,e){let n,i=e[56]&&sn(e[56]),o,s,l=i&&Gi(Dn(e));return{key:t,first:null,c(){n=Me(),l&&l.c(),o=Me(),this.h()},l(r){n=Me(),l&&l.l(r),o=Me(),this.h()},h(){this.first=n},m(r,a){p(r,n,a),l&&l.m(r,a),p(r,o,a),s=!0},p(r,a){e=r,a[0]&1572864&&(i=e[56]&&sn(e[56])),i?l?(l.p(Dn(e),a),a[0]&1572864&&A(l,1)):(l=Gi(Dn(e)),l.c(),A(l,1),l.m(o.parentNode,o)):l&&(Ae(),Z(l,1,1,()=>{l=null}),Xe())},i(r){s||(A(l),s=!0)},o(r){Z(l),s=!1},d(r){r&&(N(n),N(o)),l&&l.d(r)}}}function hu(t){let e,n,i=t[27]&&Zi(t);return{c(){i&&i.c(),e=Me()},l(o){i&&i.l(o),e=Me()},m(o,s){i&&i.m(o,s),p(o,e,s),n=!0},p(o,s){o[27]?i?(i.p(o,s),s[0]&134217728&&A(i,1)):(i=Zi(o),i.c(),A(i,1),i.m(e.parentNode,e)):i&&(Ae(),Z(i,1,1,()=>{i=null}),Xe())},i(o){n||(A(i),n=!0)},o(o){Z(i),n=!1},d(o){o&&N(e),i&&i.d(o)}}}function gu(t){let e,n;return e=new Zn({props:{position:t[0],style:t[12]+(t[4]?`;--xy-minimap-background-color-props:${t[4]}`:""),class:ze(["svelte-flow__minimap",t[13]]),"data-testid":"svelte-flow__minimap",$$slots:{default:[hu]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},l(i){ge(e.$$.fragment,i)},m(i,o){fe(e,i,o),n=!0},p(i,o){const s={};o[0]&1&&(s.position=i[0]),o[0]&4112&&(s.style=i[12]+(i[4]?`;--xy-minimap-background-color-props:${i[4]}`:"")),o[0]&8192&&(s.class=ze(["svelte-flow__minimap",i[13]])),o[0]&536858606|o[1]&536870912&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){Z(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}const Hn=t=>t instanceof Function?t:()=>t,mu=200,bu=150;function yu(t,e,n){let i,o,s,l,r,a,u,f,d,h,c,b,m,y,g,E,w,M,X,K,T,{position:I="bottom-right"}=e,{ariaLabel:H="Mini map"}=e,{nodeStrokeColor:B="transparent"}=e,{nodeColor:F=void 0}=e,{nodeClass:J=""}=e,{nodeBorderRadius:W=5}=e,{nodeStrokeWidth:_=2}=e,{bgColor:k=void 0}=e,{maskColor:S=void 0}=e,{maskStrokeColor:P=void 0}=e,{maskStrokeWidth:D=void 0}=e,{width:O=void 0}=e,{height:Y=void 0}=e,{pannable:U=!0}=e,{zoomable:G=!0}=e,{inversePan:V=void 0}=e,{zoomStep:$=void 0}=e,{style:ee=""}=e,{class:ie=""}=e;const{nodes:v,nodeLookup:te,viewport:oe,width:se,height:de,flowId:ye,panZoom:De,translateExtent:L}=Ve();q(t,v,x=>n(19,y=x)),q(t,te,x=>n(20,g=x)),q(t,oe,x=>n(53,E=x)),q(t,se,x=>n(22,M=x)),q(t,de,x=>n(21,w=x)),q(t,ye,x=>n(54,X=x)),q(t,De,x=>n(27,K=x)),q(t,L,x=>n(28,T=x));const Te=F===void 0?void 0:Hn(F),Pe=Hn(B),ct=Hn(J),st=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",rt=`svelte-flow__minimap-desc-${X}`;let Ke=i;const it=()=>a;return t.$$set=x=>{"position"in x&&n(0,I=x.position),"ariaLabel"in x&&n(1,H=x.ariaLabel),"nodeStrokeColor"in x&&n(43,B=x.nodeStrokeColor),"nodeColor"in x&&n(44,F=x.nodeColor),"nodeClass"in x&&n(45,J=x.nodeClass),"nodeBorderRadius"in x&&n(2,W=x.nodeBorderRadius),"nodeStrokeWidth"in x&&n(3,_=x.nodeStrokeWidth),"bgColor"in x&&n(4,k=x.bgColor),"maskColor"in x&&n(5,S=x.maskColor),"maskStrokeColor"in x&&n(6,P=x.maskStrokeColor),"maskStrokeWidth"in x&&n(7,D=x.maskStrokeWidth),"width"in x&&n(46,O=x.width),"height"in x&&n(47,Y=x.height),"pannable"in x&&n(8,U=x.pannable),"zoomable"in x&&n(9,G=x.zoomable),"inversePan"in x&&n(10,V=x.inversePan),"zoomStep"in x&&n(11,$=x.zoomStep),"style"in x&&n(12,ee=x.style),"class"in x&&n(13,ie=x.class)},t.$$.update=()=>{t.$$.dirty[0]&6291456|t.$$.dirty[1]&4194304&&n(18,i={x:-E.x/E.zoom,y:-E.y/E.zoom,width:M/E.zoom,height:w/E.zoom}),t.$$.dirty[0]&1835008&&n(48,Ke=g.size>0?io(Gt(g),i):i),t.$$.dirty[1]&32768&&n(17,o=O??mu),t.$$.dirty[1]&65536&&n(16,s=Y??bu),t.$$.dirty[0]&131072|t.$$.dirty[1]&131072&&n(52,l=Ke.width/o),t.$$.dirty[0]&65536|t.$$.dirty[1]&131072&&n(51,r=Ke.height/s),t.$$.dirty[1]&3145728&&n(14,a=Math.max(l,r)),t.$$.dirty[0]&147456&&n(50,u=a*o),t.$$.dirty[0]&81920&&n(49,f=a*s),t.$$.dirty[0]&16384&&n(15,d=5*a),t.$$.dirty[0]&32768|t.$$.dirty[1]&655360&&n(26,h=Ke.x-(u-Ke.width)/2-d),t.$$.dirty[0]&32768|t.$$.dirty[1]&393216&&n(25,c=Ke.y-(f-Ke.height)/2-d),t.$$.dirty[0]&32768|t.$$.dirty[1]&524288&&n(24,b=u+d*2),t.$$.dirty[0]&32768|t.$$.dirty[1]&262144&&n(23,m=f+d*2)},[I,H,W,_,k,S,P,D,U,G,V,$,ee,ie,a,d,s,o,i,y,g,w,M,m,b,c,h,K,T,v,te,oe,se,de,ye,De,L,Te,Pe,ct,st,rt,it,B,F,J,O,Y,Ke,f,u,r,l,E]}class Vu extends me{constructor(e){super(),be(this,e,yu,gu,_e,{position:0,ariaLabel:1,nodeStrokeColor:43,nodeColor:44,nodeClass:45,nodeBorderRadius:2,nodeStrokeWidth:3,bgColor:4,maskColor:5,maskStrokeColor:6,maskStrokeWidth:7,width:46,height:47,pannable:8,zoomable:9,inversePan:10,zoomStep:11,style:12,class:13},null,[-1,-1])}}export{Nu as B,Tu as C,As as E,an as H,Vu as M,he as P,gi as R,vu as S,Iu as X,yt as a,ze as b,cr as c,Hu as d,Du as e,Pu as f,oo as g,Ln as h,zu as i,Hl as j,Rn as k,Ou as l,_n as m,gn as n,on as o,mn as p,ro as q,Tl as r,Ve as u};

import{K as Kt,X as Gt,s as Ve,e as D,t as le,b as W,d as L,f as I,h as ie,i as k,j as q,x as w,k as O,l as S,al as Ue,p as J,m as he,A as Pe,o as Ye,P as Ce,v as F,L as ot,G as ne,R as rt,I as P,Y as Bt,W as Oe,a3 as $e,n as Je,c as We,u as qe,g as He,a as ze,q as Qt,y as Zt}from"./scheduler.DDVliNtX.js";import{S as xe,i as et,t as g,g as B,a as y,e as M,c as oe,b as re,m as se,d as ce}from"./index.iWffroUJ.js";import{e as Q}from"./each.BFyodu2L.js";import{u as $t}from"./stores.BSt3_6LB.js";import{f as fe}from"./lib.DSnscA8f.js";import{l as Ke,P as xt}from"./layers.DHL3YBbY.js";import{c as en,I as Ge}from"./actions.BvPZE2fe.js";import{p as tn,f as nn}from"./utils.xEKteSAW.js";/* empty css                                                */const ln=["top","right","bottom","left"],Te=Math.min,de=Math.max,De=Math.round,Se=Math.floor,ae=t=>({x:t,y:t}),on={left:"right",right:"left",bottom:"top",top:"bottom"},rn={start:"end",end:"start"};function st(t,e,i){return de(t,Te(e,i))}function Ee(t,e){return typeof t=="function"?t(e):t}function me(t){return t.split("-")[0]}function Fe(t){return t.split("-")[1]}function Mt(t){return t==="x"?"y":"x"}function Wt(t){return t==="y"?"height":"width"}function be(t){return["top","bottom"].includes(me(t))?"y":"x"}function qt(t){return Mt(be(t))}function sn(t,e,i){i===void 0&&(i=!1);const l=Fe(t),n=qt(t),s=Wt(n);let o=n==="x"?l===(i?"end":"start")?"right":"left":l==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Le(o)),[o,Le(o)]}function cn(t){const e=Le(t);return[Qe(t),e,Qe(e)]}function Qe(t){return t.replace(/start|end/g,e=>rn[e])}function fn(t,e,i){const l=["left","right"],n=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return i?e?n:l:e?l:n;case"left":case"right":return e?s:o;default:return[]}}function an(t,e,i,l){const n=Fe(t);let s=fn(me(t),i==="start",l);return n&&(s=s.map(o=>o+"-"+n),e&&(s=s.concat(s.map(Qe)))),s}function Le(t){return t.replace(/left|right|bottom|top/g,e=>on[e])}function un(t){return{top:0,right:0,bottom:0,left:0,...t}}function dn(t){return typeof t!="number"?un(t):{top:t,right:t,bottom:t,left:t}}function Ne(t){const{x:e,y:i,width:l,height:n}=t;return{width:l,height:n,top:i,left:e,right:e+l,bottom:i+n,x:e,y:i}}function ct(t,e,i){let{reference:l,floating:n}=t;const s=be(e),o=qt(e),c=Wt(o),r=me(e),f=s==="y",a=l.x+l.width/2-n.width/2,d=l.y+l.height/2-n.height/2,u=l[c]/2-n[c]/2;let h;switch(r){case"top":h={x:a,y:l.y-n.height};break;case"bottom":h={x:a,y:l.y+l.height};break;case"right":h={x:l.x+l.width,y:d};break;case"left":h={x:l.x-n.width,y:d};break;default:h={x:l.x,y:l.y}}switch(Fe(e)){case"start":h[o]-=u*(i&&f?-1:1);break;case"end":h[o]+=u*(i&&f?-1:1);break}return h}const hn=async(t,e,i)=>{const{placement:l="bottom",strategy:n="absolute",middleware:s=[],platform:o}=i,c=s.filter(Boolean),r=await(o.isRTL==null?void 0:o.isRTL(e));let f=await o.getElementRects({reference:t,floating:e,strategy:n}),{x:a,y:d}=ct(f,l,r),u=l,h={},_=0;for(let m=0;m<c.length;m++){const{name:b,fn:v}=c[m],{x:E,y:A,data:N,reset:V}=await v({x:a,y:d,initialPlacement:l,placement:u,strategy:n,middlewareData:h,rects:f,platform:o,elements:{reference:t,floating:e}});a=E??a,d=A??d,h={...h,[b]:{...h[b],...N}},V&&_<=50&&(_++,typeof V=="object"&&(V.placement&&(u=V.placement),V.rects&&(f=V.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:n}):V.rects),{x:a,y:d}=ct(f,u,r)),m=-1)}return{x:a,y:d,placement:u,strategy:n,middlewareData:h}};async function Ie(t,e){var i;e===void 0&&(e={});const{x:l,y:n,platform:s,rects:o,elements:c,strategy:r}=t,{boundary:f="clippingAncestors",rootBoundary:a="viewport",elementContext:d="floating",altBoundary:u=!1,padding:h=0}=Ee(e,t),_=dn(h),b=c[u?d==="floating"?"reference":"floating":d],v=Ne(await s.getClippingRect({element:(i=await(s.isElement==null?void 0:s.isElement(b)))==null||i?b:b.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(c.floating)),boundary:f,rootBoundary:a,strategy:r})),E=d==="floating"?{x:l,y:n,width:o.floating.width,height:o.floating.height}:o.reference,A=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c.floating)),N=await(s.isElement==null?void 0:s.isElement(A))?await(s.getScale==null?void 0:s.getScale(A))||{x:1,y:1}:{x:1,y:1},V=Ne(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:E,offsetParent:A,strategy:r}):E);return{top:(v.top-V.top+_.top)/N.y,bottom:(V.bottom-v.bottom+_.bottom)/N.y,left:(v.left-V.left+_.left)/N.x,right:(V.right-v.right+_.right)/N.x}}const mn=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i,l;const{placement:n,middlewareData:s,rects:o,initialPlacement:c,platform:r,elements:f}=e,{mainAxis:a=!0,crossAxis:d=!0,fallbackPlacements:u,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:m=!0,...b}=Ee(t,e);if((i=s.arrow)!=null&&i.alignmentOffset)return{};const v=me(n),E=be(c),A=me(c)===c,N=await(r.isRTL==null?void 0:r.isRTL(f.floating)),V=u||(A||!m?[Le(c)]:cn(c)),z=_!=="none";!u&&z&&V.push(...an(c,m,_,N));const $=[c,...V],C=await Ie(e,b),j=[];let p=((l=s.flip)==null?void 0:l.overflows)||[];if(a&&j.push(C[v]),d){const R=sn(n,o,N);j.push(C[R[0]],C[R[1]])}if(p=[...p,{placement:n,overflows:j}],!j.every(R=>R<=0)){var T,pe;const R=(((T=s.flip)==null?void 0:T.index)||0)+1,we=$[R];if(we)return{data:{index:R,overflows:p},reset:{placement:we}};let te=(pe=p.filter(x=>x.overflows[0]<=0).sort((x,U)=>x.overflows[1]-U.overflows[1])[0])==null?void 0:pe.placement;if(!te)switch(h){case"bestFit":{var H;const x=(H=p.filter(U=>{if(z){const Y=be(U.placement);return Y===E||Y==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(Y=>Y>0).reduce((Y,Re)=>Y+Re,0)]).sort((U,Y)=>U[1]-Y[1])[0])==null?void 0:H[0];x&&(te=x);break}case"initialPlacement":te=c;break}if(n!==te)return{reset:{placement:te}}}return{}}}};function ft(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function at(t){return ln.some(e=>t[e]>=0)}const _n=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:i}=e,{strategy:l="referenceHidden",...n}=Ee(t,e);switch(l){case"referenceHidden":{const s=await Ie(e,{...n,elementContext:"reference"}),o=ft(s,i.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:at(o)}}}case"escaped":{const s=await Ie(e,{...n,altBoundary:!0}),o=ft(s,i.floating);return{data:{escapedOffsets:o,escaped:at(o)}}}default:return{}}}}};async function pn(t,e){const{placement:i,platform:l,elements:n}=t,s=await(l.isRTL==null?void 0:l.isRTL(n.floating)),o=me(i),c=Fe(i),r=be(i)==="y",f=["left","top"].includes(o)?-1:1,a=s&&r?-1:1,d=Ee(e,t);let{mainAxis:u,crossAxis:h,alignmentAxis:_}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return c&&typeof _=="number"&&(h=c==="end"?_*-1:_),r?{x:h*a,y:u*f}:{x:u*f,y:h*a}}const gn=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var i,l;const{x:n,y:s,placement:o,middlewareData:c}=e,r=await pn(e,t);return o===((i=c.offset)==null?void 0:i.placement)&&(l=c.arrow)!=null&&l.alignmentOffset?{}:{x:n+r.x,y:s+r.y,data:{...r,placement:o}}}}},bn=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:l,placement:n}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:c={fn:b=>{let{x:v,y:E}=b;return{x:v,y:E}}},...r}=Ee(t,e),f={x:i,y:l},a=await Ie(e,r),d=be(me(n)),u=Mt(d);let h=f[u],_=f[d];if(s){const b=u==="y"?"top":"left",v=u==="y"?"bottom":"right",E=h+a[b],A=h-a[v];h=st(E,h,A)}if(o){const b=d==="y"?"top":"left",v=d==="y"?"bottom":"right",E=_+a[b],A=_-a[v];_=st(E,_,A)}const m=c.fn({...e,[u]:h,[d]:_});return{...m,data:{x:m.x-i,y:m.y-l}}}}};function ke(t){return Ht(t)?(t.nodeName||"").toLowerCase():"#document"}function X(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ee(t){var e;return(e=(Ht(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Ht(t){return t instanceof Node||t instanceof X(t).Node}function K(t){return t instanceof Element||t instanceof X(t).Element}function Z(t){return t instanceof HTMLElement||t instanceof X(t).HTMLElement}function ut(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof X(t).ShadowRoot}function Ae(t){const{overflow:e,overflowX:i,overflowY:l,display:n}=G(t);return/auto|scroll|overlay|hidden|clip/.test(e+l+i)&&!["inline","contents"].includes(n)}function vn(t){return["table","td","th"].includes(ke(t))}function Be(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function tt(t){const e=nt(),i=K(t)?G(t):t;return i.transform!=="none"||i.perspective!=="none"||(i.containerType?i.containerType!=="normal":!1)||!e&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!e&&(i.filter?i.filter!=="none":!1)||["transform","perspective","filter"].some(l=>(i.willChange||"").includes(l))||["paint","layout","strict","content"].some(l=>(i.contain||"").includes(l))}function kn(t){let e=ue(t);for(;Z(e)&&!ve(e);){if(tt(e))return e;if(Be(e))return null;e=ue(e)}return null}function nt(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ve(t){return["html","body","#document"].includes(ke(t))}function G(t){return X(t).getComputedStyle(t)}function Me(t){return K(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ue(t){if(ke(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ut(t)&&t.host||ee(t);return ut(e)?e.host:e}function zt(t){const e=ue(t);return ve(e)?t.ownerDocument?t.ownerDocument.body:t.body:Z(e)&&Ae(e)?e:zt(e)}function ye(t,e,i){var l;e===void 0&&(e=[]),i===void 0&&(i=!0);const n=zt(t),s=n===((l=t.ownerDocument)==null?void 0:l.body),o=X(n);if(s){const c=Ze(o);return e.concat(o,o.visualViewport||[],Ae(n)?n:[],c&&i?ye(c):[])}return e.concat(n,ye(n,[],i))}function Ze(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function jt(t){const e=G(t);let i=parseFloat(e.width)||0,l=parseFloat(e.height)||0;const n=Z(t),s=n?t.offsetWidth:i,o=n?t.offsetHeight:l,c=De(i)!==s||De(l)!==o;return c&&(i=s,l=o),{width:i,height:l,$:c}}function lt(t){return K(t)?t:t.contextElement}function ge(t){const e=lt(t);if(!Z(e))return ae(1);const i=e.getBoundingClientRect(),{width:l,height:n,$:s}=jt(e);let o=(s?De(i.width):i.width)/l,c=(s?De(i.height):i.height)/n;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const wn=ae(0);function Xt(t){const e=X(t);return!nt()||!e.visualViewport?wn:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function yn(t,e,i){return e===void 0&&(e=!1),!i||e&&i!==X(t)?!1:e}function _e(t,e,i,l){e===void 0&&(e=!1),i===void 0&&(i=!1);const n=t.getBoundingClientRect(),s=lt(t);let o=ae(1);e&&(l?K(l)&&(o=ge(l)):o=ge(t));const c=yn(s,i,l)?Xt(s):ae(0);let r=(n.left+c.x)/o.x,f=(n.top+c.y)/o.y,a=n.width/o.x,d=n.height/o.y;if(s){const u=X(s),h=l&&K(l)?X(l):l;let _=u,m=Ze(_);for(;m&&l&&h!==_;){const b=ge(m),v=m.getBoundingClientRect(),E=G(m),A=v.left+(m.clientLeft+parseFloat(E.paddingLeft))*b.x,N=v.top+(m.clientTop+parseFloat(E.paddingTop))*b.y;r*=b.x,f*=b.y,a*=b.x,d*=b.y,r+=A,f+=N,_=X(m),m=Ze(_)}}return Ne({width:a,height:d,x:r,y:f})}function Cn(t){let{elements:e,rect:i,offsetParent:l,strategy:n}=t;const s=n==="fixed",o=ee(l),c=e?Be(e.floating):!1;if(l===o||c&&s)return i;let r={scrollLeft:0,scrollTop:0},f=ae(1);const a=ae(0),d=Z(l);if((d||!d&&!s)&&((ke(l)!=="body"||Ae(o))&&(r=Me(l)),Z(l))){const u=_e(l);f=ge(l),a.x=u.x+l.clientLeft,a.y=u.y+l.clientTop}return{width:i.width*f.x,height:i.height*f.y,x:i.x*f.x-r.scrollLeft*f.x+a.x,y:i.y*f.y-r.scrollTop*f.y+a.y}}function En(t){return Array.from(t.getClientRects())}function Ut(t){return _e(ee(t)).left+Me(t).scrollLeft}function An(t){const e=ee(t),i=Me(t),l=t.ownerDocument.body,n=de(e.scrollWidth,e.clientWidth,l.scrollWidth,l.clientWidth),s=de(e.scrollHeight,e.clientHeight,l.scrollHeight,l.clientHeight);let o=-i.scrollLeft+Ut(t);const c=-i.scrollTop;return G(l).direction==="rtl"&&(o+=de(e.clientWidth,l.clientWidth)-n),{width:n,height:s,x:o,y:c}}function Rn(t,e){const i=X(t),l=ee(t),n=i.visualViewport;let s=l.clientWidth,o=l.clientHeight,c=0,r=0;if(n){s=n.width,o=n.height;const f=nt();(!f||f&&e==="fixed")&&(c=n.offsetLeft,r=n.offsetTop)}return{width:s,height:o,x:c,y:r}}function Sn(t,e){const i=_e(t,!0,e==="fixed"),l=i.top+t.clientTop,n=i.left+t.clientLeft,s=Z(t)?ge(t):ae(1),o=t.clientWidth*s.x,c=t.clientHeight*s.y,r=n*s.x,f=l*s.y;return{width:o,height:c,x:r,y:f}}function dt(t,e,i){let l;if(e==="viewport")l=Rn(t,i);else if(e==="document")l=An(ee(t));else if(K(e))l=Sn(e,i);else{const n=Xt(t);l={...e,x:e.x-n.x,y:e.y-n.y}}return Ne(l)}function Yt(t,e){const i=ue(t);return i===e||!K(i)||ve(i)?!1:G(i).position==="fixed"||Yt(i,e)}function On(t,e){const i=e.get(t);if(i)return i;let l=ye(t,[],!1).filter(c=>K(c)&&ke(c)!=="body"),n=null;const s=G(t).position==="fixed";let o=s?ue(t):t;for(;K(o)&&!ve(o);){const c=G(o),r=tt(o);!r&&c.position==="fixed"&&(n=null),(s?!r&&!n:!r&&c.position==="static"&&!!n&&["absolute","fixed"].includes(n.position)||Ae(o)&&!r&&Yt(t,o))?l=l.filter(a=>a!==o):n=c,o=ue(o)}return e.set(t,l),l}function Tn(t){let{element:e,boundary:i,rootBoundary:l,strategy:n}=t;const o=[...i==="clippingAncestors"?Be(e)?[]:On(e,this._c):[].concat(i),l],c=o[0],r=o.reduce((f,a)=>{const d=dt(e,a,n);return f.top=de(d.top,f.top),f.right=Te(d.right,f.right),f.bottom=Te(d.bottom,f.bottom),f.left=de(d.left,f.left),f},dt(e,c,n));return{width:r.right-r.left,height:r.bottom-r.top,x:r.left,y:r.top}}function Dn(t){const{width:e,height:i}=jt(t);return{width:e,height:i}}function Ln(t,e,i){const l=Z(e),n=ee(e),s=i==="fixed",o=_e(t,!0,s,e);let c={scrollLeft:0,scrollTop:0};const r=ae(0);if(l||!l&&!s)if((ke(e)!=="body"||Ae(n))&&(c=Me(e)),l){const d=_e(e,!0,s,e);r.x=d.x+e.clientLeft,r.y=d.y+e.clientTop}else n&&(r.x=Ut(n));const f=o.left+c.scrollLeft-r.x,a=o.top+c.scrollTop-r.y;return{x:f,y:a,width:o.width,height:o.height}}function je(t){return G(t).position==="static"}function ht(t,e){return!Z(t)||G(t).position==="fixed"?null:e?e(t):t.offsetParent}function Jt(t,e){const i=X(t);if(Be(t))return i;if(!Z(t)){let n=ue(t);for(;n&&!ve(n);){if(K(n)&&!je(n))return n;n=ue(n)}return i}let l=ht(t,e);for(;l&&vn(l)&&je(l);)l=ht(l,e);return l&&ve(l)&&je(l)&&!tt(l)?i:l||kn(t)||i}const Nn=async function(t){const e=this.getOffsetParent||Jt,i=this.getDimensions,l=await i(t.floating);return{reference:Ln(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:l.width,height:l.height}}};function In(t){return G(t).direction==="rtl"}const Vn={convertOffsetParentRelativeRectToViewportRelativeRect:Cn,getDocumentElement:ee,getClippingRect:Tn,getOffsetParent:Jt,getElementRects:Nn,getClientRects:En,getDimensions:Dn,getScale:ge,isElement:K,isRTL:In};function Pn(t,e){let i=null,l;const n=ee(t);function s(){var c;clearTimeout(l),(c=i)==null||c.disconnect(),i=null}function o(c,r){c===void 0&&(c=!1),r===void 0&&(r=1),s();const{left:f,top:a,width:d,height:u}=t.getBoundingClientRect();if(c||e(),!d||!u)return;const h=Se(a),_=Se(n.clientWidth-(f+d)),m=Se(n.clientHeight-(a+u)),b=Se(f),E={rootMargin:-h+"px "+-_+"px "+-m+"px "+-b+"px",threshold:de(0,Te(1,r))||1};let A=!0;function N(V){const z=V[0].intersectionRatio;if(z!==r){if(!A)return o();z?o(!1,z):l=setTimeout(()=>{o(!1,1e-7)},1e3)}A=!1}try{i=new IntersectionObserver(N,{...E,root:n.ownerDocument})}catch{i=new IntersectionObserver(N,E)}i.observe(t)}return o(!0),s}function Fn(t,e,i,l){l===void 0&&(l={});const{ancestorScroll:n=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:r=!1}=l,f=lt(t),a=n||s?[...f?ye(f):[],...ye(e)]:[];a.forEach(v=>{n&&v.addEventListener("scroll",i,{passive:!0}),s&&v.addEventListener("resize",i)});const d=f&&c?Pn(f,i):null;let u=-1,h=null;o&&(h=new ResizeObserver(v=>{let[E]=v;E&&E.target===f&&h&&(h.unobserve(e),cancelAnimationFrame(u),u=requestAnimationFrame(()=>{var A;(A=h)==null||A.observe(e)})),i()}),f&&!r&&h.observe(f),h.observe(e));let _,m=r?_e(t):null;r&&b();function b(){const v=_e(t);m&&(v.x!==m.x||v.y!==m.y||v.width!==m.width||v.height!==m.height)&&i(),m=v,_=requestAnimationFrame(b)}return i(),()=>{var v;a.forEach(E=>{n&&E.removeEventListener("scroll",i),s&&E.removeEventListener("resize",i)}),d==null||d(),(v=h)==null||v.disconnect(),h=null,r&&cancelAnimationFrame(_)}}const Bn=gn,Mn=bn,Wn=mn,qn=_n,Hn=(t,e,i)=>{const l=new Map,n={platform:Vn,...i},s={...n.platform,_c:l};return hn(t,e,{...n,platform:s})};function zn(t){let e,i;const l={autoUpdate:!0};let n=t;const s=a=>({...l,...t||{},...a||{}}),o=a=>{e&&i&&(n=s(a),Hn(e,i,n).then(d=>{Object.assign(i.style,{position:d.strategy,left:`${d.x}px`,top:`${d.y}px`}),n!=null&&n.onComputed&&n.onComputed(d)}))},c=a=>{if("subscribe"in a)return f(a),{};e=a,o()},r=(a,d)=>{let u;i=a,n=s(d),setTimeout(()=>o(d),0),o(d);const h=()=>{u&&(u(),u=void 0)},_=({autoUpdate:m}=n||{})=>{h(),m!==!1&&Gt().then(()=>Fn(e,i,()=>o(n),m===!0?{}:m))};return u=_(),{update(m){o(m),u=_(m)},destroy(){h()}}},f=a=>{const d=a.subscribe(u=>{e===void 0?(e=u,o()):(Object.assign(e,u),o())});Kt(d)};return[c,r,o]}function mt(t,e,i){const l=t.slice();return l[22]=e[i],l[23]=e,l[24]=i,l}function Xe(t){const e=t.slice(),i=e[5](e[0]["@id"]);return e[21]=i,e}function _t(t){let e,i,l,n,s=Q(t[21]),o=[];for(let r=0;r<s.length;r+=1)o[r]=bt(mt(t,s,r));const c=r=>y(o[r],1,1,()=>{o[r]=null});return{c(){e=D("div");for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){e=L(r,"DIV",{class:!0});var f=I(e);for(let a=0;a<o.length;a+=1)o[a].l(f);f.forEach(k),this.h()},h(){w(e,"class","layer--popover svelte-1k28b8u")},m(r,f){O(r,e,f);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);t[19](e),i=!0,l||(n=[Ue(t[8].call(null,e)),Ue(en.call(null,e)),J(e,"outsideclick",t[9])],l=!0)},p(r,f){if(f&7281){s=Q(r[21]);let a;for(a=0;a<s.length;a+=1){const d=mt(r,s,a);o[a]?(o[a].p(d,f),g(o[a],1)):(o[a]=bt(d),o[a].c(),g(o[a],1),o[a].m(e,null))}for(B(),a=s.length;a<o.length;a+=1)c(a);M()}},i(r){if(!i){for(let f=0;f<s.length;f+=1)g(o[f]);i=!0}},o(r){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)y(o[f]);i=!1},d(r){r&&k(e),Ce(o,r),t[19](null),l=!1,Pe(n)}}}function pt(t){let e,i,l,n;const s=[Xn,jn],o=[];function c(r,f){return r[4]!==r[22].id?0:1}return e=c(t),i=o[e]=s[e](t),{c(){i.c(),l=F()},l(r){i.l(r),l=F()},m(r,f){o[e].m(r,f),O(r,l,f),n=!0},p(r,f){let a=e;e=c(r),e===a?o[e].p(r,f):(B(),y(o[a],1,1,()=>{o[a]=null}),M(),i=o[e],i?i.p(r,f):(i=o[e]=s[e](r),i.c()),g(i,1),i.m(l.parentNode,l))},i(r){n||(g(i),n=!0)},o(r){y(i),n=!1},d(r){r&&k(l),o[e].d(r)}}}function jn(t){let e,i,l,n,s,o,c,r,f,a,d,u;function h(){t[17].call(i,t[23],t[24])}function _(){return t[18](t[22])}return s=new Ge({props:{size:33,iconName:"check",description:"Save Description",title:"Save Description"}}),s.$on("iconClick",_),c=new Ge({props:{size:33,iconName:"close",description:"close",title:"close"}}),c.$on("iconClick",t[12]),{c(){e=D("div"),i=D("textarea"),l=W(),n=D("div"),oe(s.$$.fragment),o=W(),oe(c.$$.fragment),r=W(),this.h()},l(m){e=L(m,"DIV",{class:!0,style:!0,id:!0});var b=I(e);i=L(b,"TEXTAREA",{id:!0,name:!0,class:!0}),I(i).forEach(k),l=q(b),n=L(b,"DIV",{class:!0});var v=I(n);re(s.$$.fragment,v),o=q(v),re(c.$$.fragment,v),v.forEach(k),r=q(b),b.forEach(k),this.h()},h(){w(i,"id","layer-description"),w(i,"name","Description"),i.required=!0,w(i,"class","svelte-1k28b8u"),w(n,"class","popover-btns svelte-1k28b8u"),w(e,"class","layer--comment svelte-1k28b8u"),ne(e,"--itemColor",t[22].color),w(e,"id",f=t[22].id)},m(m,b){O(m,e,b),S(e,i),rt(i,t[22].comment),S(e,l),S(e,n),se(s,n,null),S(n,o),se(c,n,null),S(e,r),a=!0,d||(u=J(i,"input",h),d=!0)},p(m,b){t=m,b&33&&rt(i,t[22].comment),(!a||b&33)&&ne(e,"--itemColor",t[22].color),(!a||b&33&&f!==(f=t[22].id))&&w(e,"id",f)},i(m){a||(g(s.$$.fragment,m),g(c.$$.fragment,m),a=!0)},o(m){y(s.$$.fragment,m),y(c.$$.fragment,m),a=!1},d(m){m&&k(e),ce(s),ce(c),d=!1,u()}}}function Xn(t){let e,i,l=t[22].comment+"",n,s,o,c,r=!t[6].isReadonly&&gt(t);return{c(){e=D("div"),i=D("pre"),n=le(l),s=W(),r&&r.c(),o=W(),this.h()},l(f){e=L(f,"DIV",{class:!0,style:!0});var a=I(e);i=L(a,"PRE",{class:!0});var d=I(i);n=ie(d,l),d.forEach(k),s=q(a),r&&r.l(a),o=q(a),a.forEach(k),this.h()},h(){w(i,"class","popover--text svelte-1k28b8u"),w(e,"class","layer--comment svelte-1k28b8u"),ne(e,"--itemColor",t[22].color)},m(f,a){O(f,e,a),S(e,i),S(i,n),S(e,s),r&&r.m(e,null),S(e,o),c=!0},p(f,a){(!c||a&33)&&l!==(l=f[22].comment+"")&&he(n,l),f[6].isReadonly?r&&(B(),y(r,1,1,()=>{r=null}),M()):r?(r.p(f,a),a&64&&g(r,1)):(r=gt(f),r.c(),g(r,1),r.m(e,o)),(!c||a&33)&&ne(e,"--itemColor",f[22].color)},i(f){c||(g(r),c=!0)},o(f){y(r),c=!1},d(f){f&&k(e),r&&r.d()}}}function gt(t){let e,i,l,n,s,o;l=new Ge({props:{size:33,iconName:"edit",description:"Edit Description",title:"Edit Description",pathColor:"black"}});function c(){return t[15](t[22])}function r(...f){return t[16](t[22],...f)}return{c(){e=D("div"),i=D("span"),oe(l.$$.fragment),this.h()},l(f){e=L(f,"DIV",{class:!0,role:!0,tabindex:!0});var a=I(e);i=L(a,"SPAN",{});var d=I(i);re(l.$$.fragment,d),d.forEach(k),a.forEach(k),this.h()},h(){w(e,"class","edit-btn svelte-1k28b8u"),w(e,"role","button"),w(e,"tabindex","0")},m(f,a){O(f,e,a),S(e,i),se(l,i,null),n=!0,s||(o=[J(e,"click",c),J(e,"keyup",r)],s=!0)},p(f,a){t=f},i(f){n||(g(l.$$.fragment,f),n=!0)},o(f){y(l.$$.fragment,f),n=!1},d(f){f&&k(e),ce(l),s=!1,Pe(o)}}}function bt(t){let e,i,l=t[22].comment!==""&&pt(t);return{c(){l&&l.c(),e=F()},l(n){l&&l.l(n),e=F()},m(n,s){l&&l.m(n,s),O(n,e,s),i=!0},p(n,s){n[22].comment!==""?l?(l.p(n,s),s&33&&g(l,1)):(l=pt(n),l.c(),g(l,1),l.m(e.parentNode,e)):l&&(B(),y(l,1,1,()=>{l=null}),M())},i(n){i||(g(l),i=!0)},o(n){y(l),i=!1},d(n){n&&k(e),l&&l.d(n)}}}function Un(t){let e,i,l=t[0]["rdfs:label"]+"",n,s,o,c,r,f=t[1]&&_t(Xe(t));return{c(){e=D("div"),i=D("a"),n=le(l),s=W(),f&&f.c(),this.h()},l(a){e=L(a,"DIV",{class:!0});var d=I(e);i=L(d,"A",{class:!0,href:!0});var u=I(i);n=ie(u,l),u.forEach(k),s=q(d),f&&f.l(d),d.forEach(k),this.h()},h(){w(i,"class","layer-trigger"),w(i,"href",null),w(e,"class","layer-container")},m(a,d){O(a,e,d),S(e,i),S(i,n),t[14](i),S(e,s),f&&f.m(e,null),o=!0,c||(r=[Ue(t[7].call(null,i)),J(i,"click",t[9])],c=!0)},p(a,[d]){(!o||d&1)&&l!==(l=a[0]["rdfs:label"]+"")&&he(n,l),a[1]?f?(f.p(Xe(a),d),d&2&&g(f,1)):(f=_t(Xe(a)),f.c(),g(f,1),f.m(e,null)):f&&(B(),y(f,1,1,()=>{f=null}),M())},i(a){o||(g(f),o=!0)},o(a){y(f),o=!1},d(a){a&&k(e),t[14](null),f&&f.d(),c=!1,Pe(r)}}}function Yn(t,e,i){let l;Ye(t,Ke,C=>i(6,l=C));let{leaf:n}=e,{leafClick:s}=e,o,c,r,f,a="";const[d,u]=zn({strategy:"absolute",placement:"right",middleware:[Bn(20),Wn(),Mn(),qn()],onComputed({middlewareData:C}){C.hide&&r&&Object.assign(r.style,{visibility:C.hide.referenceHidden?"hidden":"visible"})}}),h=C=>{i(1,o=!o),s(C,n,null)},_=C=>{const j=l.profiles[l.selectedProfile].includedLayers;return tn(j,C,l[l.selectedStore])},m=C=>{i(4,f=C)},b=C=>{Ke.saveLayerTechniqueComment(C,n["@id"],a,xt.layers),v()},v=()=>{i(4,f=null),a=""};function E(C){ot[C?"unshift":"push"](()=>{c=C,i(2,c)})}const A=C=>m(C.id),N=(C,j)=>nn(j,m,C.id);function V(C,j){C[j].comment=this.value,i(5,_),i(0,n)}const z=C=>b(C.id);function $(C){ot[C?"unshift":"push"](()=>{r=C,i(3,r)})}return t.$$set=C=>{"leaf"in C&&i(0,n=C.leaf),"leafClick"in C&&i(13,s=C.leafClick)},[n,o,c,r,f,_,l,d,u,h,m,b,v,s,E,A,N,V,z,$]}class Jn extends xe{constructor(e){super(),et(this,e,Yn,Un,Ve,{leaf:0,leafClick:13})}}function vt(t,e,i){const l=t.slice();return l[12]=e[i],l}function kt(t){let e,i=t[0]["d3f:ref-count"]["@value"]+"",l,n;return{c(){e=D("span"),l=le(i),this.h()},l(s){e=L(s,"SPAN",{class:!0,title:!0});var o=I(e);l=ie(o,i),o.forEach(k),this.h()},h(){w(e,"class","ref-count svelte-1bzm6qf"),w(e,"title",n="This technique has "+t[0]["d3f:ref-count"]["@value"]+" public references.")},m(s,o){O(s,e,o),S(e,l)},p(s,o){o&1&&i!==(i=s[0]["d3f:ref-count"]["@value"]+"")&&he(l,i),o&1&&n!==(n="This technique has "+s[0]["d3f:ref-count"]["@value"]+" public references.")&&w(e,"title",n)},d(s){s&&k(e)}}}function Kn(t){let e,i=t[0]["rdfs:label"]+"",l,n,s,o;return{c(){e=D("a"),l=le(i),this.h()},l(c){e=L(c,"A",{href:!0});var r=I(e);l=ie(r,i),r.forEach(k),this.h()},h(){w(e,"href",n="/technique/"+t[0]["@id"])},m(c,r){O(c,e,r),S(e,l),s||(o=J(e,"click",$e(t[9])),s=!0)},p(c,r){r&1&&i!==(i=c[0]["rdfs:label"]+"")&&he(l,i),r&1&&n!==(n="/technique/"+c[0]["@id"])&&w(e,"href",n)},i:Je,o:Je,d(c){c&&k(e),s=!1,o()}}}function Gn(t){let e,i;return e=new Jn({props:{leaf:t[0],leafClick:t[8]}}),{c(){oe(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,n){se(e,l,n),i=!0},p(l,n){const s={};n&1&&(s.leaf=l[0]),e.$set(s)},i(l){i||(g(e.$$.fragment,l),i=!0)},o(l){y(e.$$.fragment,l),i=!1},d(l){ce(e,l)}}}function wt(t){let e,i,l=Q(fe(t[0].children)),n=[];for(let o=0;o<l.length;o+=1)n[o]=yt(vt(t,l,o));const s=o=>y(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=F()},l(o){for(let c=0;c<n.length;c+=1)n[c].l(o);e=F()},m(o,c){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(o,c);O(o,e,c),i=!0},p(o,c){if(c&19){l=Q(fe(o[0].children));let r;for(r=0;r<l.length;r+=1){const f=vt(o,l,r);n[r]?(n[r].p(f,c),g(n[r],1)):(n[r]=yt(f),n[r].c(),g(n[r],1),n[r].m(e.parentNode,e))}for(B(),r=l.length;r<n.length;r+=1)s(r);M()}},i(o){if(!i){for(let c=0;c<l.length;c+=1)g(n[c]);i=!0}},o(o){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)y(n[c]);i=!1},d(o){o&&k(e),Ce(n,o)}}}function yt(t){let e,i;return e=new it({props:{leaf:t[12],depth:t[1]+1,recursive:!0,parent:t[0]["@id"],theme:t[4]}}),e.$on("elementClick",t[10]),{c(){oe(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,n){se(e,l,n),i=!0},p(l,n){const s={};n&1&&(s.leaf=l[12]),n&2&&(s.depth=l[1]+1),n&1&&(s.parent=l[0]["@id"]),n&16&&(s.theme=l[4]),e.$set(s)},i(l){i||(g(e.$$.fragment,l),i=!0)},o(l){y(e.$$.fragment,l),i=!1},d(l){ce(e,l)}}}function Qn(t){let e,i,l,n,s,o,c,r,f=t[0]["d3f:ref-count"]&&t[6].display_refcount&&kt(t);const a=[Gn,Kn],d=[];function u(_,m){return _[7].matrixCommentMode?0:1}n=u(t),s=d[n]=a[n](t);let h=t[0].children&&wt(t);return{c(){f&&f.c(),e=W(),i=D("div"),l=D("div"),s.c(),o=W(),h&&h.c(),c=F(),this.h()},l(_){f&&f.l(_),e=q(_),i=L(_,"DIV",{style:!0,class:!0,"data-parent":!0});var m=I(i);l=L(m,"DIV",{style:!0,class:!0});var b=I(l);s.l(b),b.forEach(k),m.forEach(k),o=q(_),h&&h.l(_),c=F(),this.h()},h(){var _,m;w(l,"style",""),w(l,"class","svelte-1bzm6qf"),P(l,"indent",t[2]),ne(i,"--layer-color",((_=t[0].classes)==null?void 0:_.color)||t[5]),ne(i,"--layer-select",((m=t[0].classes)==null?void 0:m.select)||""),w(i,"class","tree-leaf svelte-1bzm6qf"),w(i,"data-parent",t[3]),P(i,"poster_border",t[4]=="poster"),P(i,"sub-leaf",t[2]),P(i,"hidden",!t[0].hasOwnProperty("d3f:ref-count"))},m(_,m){f&&f.m(_,m),O(_,e,m),O(_,i,m),S(i,l),d[n].m(l,null),O(_,o,m),h&&h.m(_,m),O(_,c,m),r=!0},p(_,[m]){var v,E;_[0]["d3f:ref-count"]&&_[6].display_refcount?f?f.p(_,m):(f=kt(_),f.c(),f.m(e.parentNode,e)):f&&(f.d(1),f=null);let b=n;n=u(_),n===b?d[n].p(_,m):(B(),y(d[b],1,1,()=>{d[b]=null}),M(),s=d[n],s?s.p(_,m):(s=d[n]=a[n](_),s.c()),g(s,1),s.m(l,null)),(!r||m&4)&&P(l,"indent",_[2]),(!r||m&33)&&ne(i,"--layer-color",((v=_[0].classes)==null?void 0:v.color)||_[5]),(!r||m&1)&&ne(i,"--layer-select",((E=_[0].classes)==null?void 0:E.select)||""),(!r||m&8)&&w(i,"data-parent",_[3]),(!r||m&16)&&P(i,"poster_border",_[4]=="poster"),(!r||m&4)&&P(i,"sub-leaf",_[2]),(!r||m&1)&&P(i,"hidden",!_[0].hasOwnProperty("d3f:ref-count")),_[0].children?h?(h.p(_,m),m&1&&g(h,1)):(h=wt(_),h.c(),g(h,1),h.m(c.parentNode,c)):h&&(B(),y(h,1,1,()=>{h=null}),M())},i(_){r||(g(s),g(h),r=!0)},o(_){y(s),y(h),r=!1},d(_){_&&(k(e),k(i),k(o),k(c)),f&&f.d(_),d[n].d(),h&&h.d(_)}}}function Zn(t,e,i){let l,n,s;Ye(t,$t,m=>i(6,n=m)),Ye(t,Ke,m=>i(7,s=m));let{leaf:o}=e,{depth:c=0}=e,{recursive:r=!1}=e,{parent:f=""}=e,{theme:a}=e;const d=Bt(),u=(m,b,v)=>{d("elementClick",{event:m,element:b,href:v})},h=m=>u(m,o,`/technique/${o["@id"]}`);function _(m){Oe.call(this,t,m)}return t.$$set=m=>{"leaf"in m&&i(0,o=m.leaf),"depth"in m&&i(1,c=m.depth),"recursive"in m&&i(2,r=m.recursive),"parent"in m&&i(3,f=m.parent),"theme"in m&&i(4,a=m.theme)},t.$$.update=()=>{t.$$.dirty&4&&i(5,l=r?"#f3f3f3":"white")},[o,c,r,f,a,l,n,s,u,h,_]}class it extends xe{constructor(e){super(),et(this,e,Zn,Qn,Ve,{leaf:0,depth:1,recursive:2,parent:3,theme:4})}}const $n=t=>({}),Ct=t=>({});function Et(t,e,i){const l=t.slice();return l[23]=e[i],l}function At(t,e,i){const l=t.slice();return l[26]=e[i],l}function Rt(t,e,i){const l=t.slice();return l[26]=e[i],l}const xn=t=>({}),St=t=>({});function Ot(t){let e,i,l=Q(t[0]),n=[];for(let o=0;o<l.length;o+=1)n[o]=Ft(Et(t,l,o));const s=o=>y(n[o],1,1,()=>{n[o]=null});return{c(){e=D("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=L(o,"DIV",{class:!0});var c=I(e);for(let r=0;r<n.length;r+=1)n[r].l(c);c.forEach(k),this.h()},h(){w(e,"class","tree-trunk svelte-1le6etk"),P(e,"tree-trunk-first",!t[2])},m(o,c){O(o,e,c);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null);i=!0},p(o,c){if(c&1019){l=Q(o[0]);let r;for(r=0;r<l.length;r+=1){const f=Et(o,l,r);n[r]?(n[r].p(f,c),g(n[r],1)):(n[r]=Ft(f),n[r].c(),g(n[r],1),n[r].m(e,null))}for(B(),r=l.length;r<n.length;r+=1)s(r);M()}(!i||c&4)&&P(e,"tree-trunk-first",!o[2])},i(o){if(!i){for(let c=0;c<l.length;c+=1)g(n[c]);i=!0}},o(o){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)y(n[c]);i=!1},d(o){o&&k(e),Ce(n,o)}}}function Tt(t){let e=(t[5],t[6]),i,l,n=Nt(t);return{c(){n.c(),i=F()},l(s){n.l(s),i=F()},m(s,o){n.m(s,o),O(s,i,o),l=!0},p(s,o){o&96&&Ve(e,e=(s[5],s[6]))?(B(),y(n,1,1,Je),M(),n=Nt(s),n.c(),g(n,1),n.m(i.parentNode,i)):n.p(s,o)},i(s){l||(g(n),l=!0)},o(s){y(n),l=!1},d(s){s&&k(i),n.d(s)}}}function el(t){let e,i,l=t[23]["rdfs:label"]+"",n,s,o,c,r;function f(...a){return t[17](t[23],...a)}return{c(){e=D("div"),i=D("a"),n=le(l),this.h()},l(a){e=L(a,"DIV",{class:!0});var d=I(e);i=L(d,"A",{href:!0,class:!0});var u=I(i);n=ie(u,l),u.forEach(k),d.forEach(k),this.h()},h(){w(i,"href",s="/technique/"+t[23]["@id"]),w(i,"class","svelte-1le6etk"),w(e,"class",o="tree-branch-fork tree-level-"+t[1]+" svelte-1le6etk"),P(e,"poster_border",t[4]==="poster")},m(a,d){O(a,e,d),S(e,i),S(i,n),c||(r=J(i,"click",$e(f)),c=!0)},p(a,d){t=a,d&1&&l!==(l=t[23]["rdfs:label"]+"")&&he(n,l),d&1&&s!==(s="/technique/"+t[23]["@id"])&&w(i,"href",s),d&2&&o!==(o="tree-branch-fork tree-level-"+t[1]+" svelte-1le6etk")&&w(e,"class",o),d&18&&P(e,"poster_border",t[4]==="poster")},d(a){a&&k(e),c=!1,r()}}}function tl(t){let e,i,l=t[23]["rdfs:label"]+"",n,s,o,c,r,f,a,d,u=t[23]["rdfs:label"]+"",h,_,m,b,v,E,A,N,V="+",z,$,C;function j(){return t[13](t[23])}function p(){return t[14](t[23])}function T(...H){return t[15](t[23],...H)}function pe(){return t[16](t[23])}return{c(){e=D("div"),i=D("div"),n=le(l),o=W(),c=D("div"),r=le("−"),a=W(),d=D("a"),h=le(u),b=W(),v=D("div"),E=D("div"),A=D("div"),N=D("a"),N.textContent=V,this.h()},l(H){e=L(H,"DIV",{class:!0});var R=I(e);i=L(R,"DIV",{class:!0,title:!0});var we=I(i);n=ie(we,l),we.forEach(k),o=q(R),c=L(R,"DIV",{class:!0,title:!0});var te=I(c);r=ie(te,"−"),te.forEach(k),a=q(R),d=L(R,"A",{class:!0,href:!0});var x=I(d);h=ie(x,u),x.forEach(k),R.forEach(k),b=q(H),v=L(H,"DIV",{class:!0});var U=I(v);E=L(U,"DIV",{class:!0});var Y=I(E);A=L(Y,"DIV",{class:!0,title:!0});var Re=I(A);N=L(Re,"A",{class:!0,"data-svelte-h":!0}),Zt(N)!=="svelte-1h7ue1"&&(N.textContent=V),Re.forEach(k),Y.forEach(k),U.forEach(k),this.h()},h(){w(i,"class","fork-open svelte-1le6etk"),w(i,"title",s="Expand "+t[23]["rdfs:label"]),P(i,"hide",!t[9](t[23])),w(c,"class","button-collapse small-button left svelte-1le6etk"),w(c,"title",f="Collapse "+t[23]["rdfs:label"]),P(c,"hide",t[9](t[23])),w(d,"class","center svelte-1le6etk"),w(d,"href",_="/tactic/"+t[23]["@id"]),P(d,"hide",t[9](t[23])),w(e,"class",m="tree-branch-fork tree-level-"+t[1]+" svelte-1le6etk"),P(e,"poster_border",t[4]=="poster"),w(N,"class","button-open small-button svelte-1le6etk"),w(A,"class","tree-branch-fork tree-level-1 svelte-1le6etk"),w(A,"title",z="Expand "+t[23]["rdfs:label"]),w(E,"class","tree-branch svelte-1le6etk"),w(v,"class","tree-trunk svelte-1le6etk"),P(v,"hide",!t[9](t[23]))},m(H,R){O(H,e,R),S(e,i),S(i,n),S(e,o),S(e,c),S(c,r),S(e,a),S(e,d),S(d,h),O(H,b,R),O(H,v,R),S(v,E),S(E,A),S(A,N),$||(C=[J(i,"click",j),J(c,"click",p),J(d,"click",$e(T)),J(A,"click",pe)],$=!0)},p(H,R){t=H,R&1&&l!==(l=t[23]["rdfs:label"]+"")&&he(n,l),R&1&&s!==(s="Expand "+t[23]["rdfs:label"])&&w(i,"title",s),R&513&&P(i,"hide",!t[9](t[23])),R&1&&f!==(f="Collapse "+t[23]["rdfs:label"])&&w(c,"title",f),R&513&&P(c,"hide",t[9](t[23])),R&1&&u!==(u=t[23]["rdfs:label"]+"")&&he(h,u),R&1&&_!==(_="/tactic/"+t[23]["@id"])&&w(d,"href",_),R&513&&P(d,"hide",t[9](t[23])),R&2&&m!==(m="tree-branch-fork tree-level-"+t[1]+" svelte-1le6etk")&&w(e,"class",m),R&18&&P(e,"poster_border",t[4]=="poster"),R&1&&z!==(z="Expand "+t[23]["rdfs:label"])&&w(A,"title",z),R&513&&P(v,"hide",!t[9](t[23]))},d(H){H&&(k(e),k(b),k(v)),$=!1,Pe(C)}}}function nl(t){let e,i,l=Q(fe(t[23].children)),n=[];for(let o=0;o<l.length;o+=1)n[o]=Dt(Rt(t,l,o));const s=o=>y(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=F()},l(o){for(let c=0;c<n.length;c+=1)n[c].l(o);e=F()},m(o,c){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(o,c);O(o,e,c),i=!0},p(o,c){if(c&17){l=Q(fe(o[23].children));let r;for(r=0;r<l.length;r+=1){const f=Rt(o,l,r);n[r]?(n[r].p(f,c),g(n[r],1)):(n[r]=Dt(f),n[r].c(),g(n[r],1),n[r].m(e.parentNode,e))}for(B(),r=l.length;r<n.length;r+=1)s(r);M()}},i(o){if(!i){for(let c=0;c<l.length;c+=1)g(n[c]);i=!0}},o(o){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)y(n[c]);i=!1},d(o){o&&k(e),Ce(n,o)}}}function ll(t){let e,i,l=t[23].children&&Lt(t);return{c(){l&&l.c(),e=F()},l(n){l&&l.l(n),e=F()},m(n,s){l&&l.m(n,s),O(n,e,s),i=!0},p(n,s){n[23].children?l?(l.p(n,s),s&1&&g(l,1)):(l=Lt(n),l.c(),g(l,1),l.m(e.parentNode,e)):l&&(B(),y(l,1,1,()=>{l=null}),M())},i(n){i||(g(l),i=!0)},o(n){y(l),i=!1},d(n){n&&k(e),l&&l.d(n)}}}function Dt(t){let e,i;return e=new it({props:{leaf:t[26],theme:t[4]}}),e.$on("elementClick",t[19]),{c(){oe(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,n){se(e,l,n),i=!0},p(l,n){const s={};n&1&&(s.leaf=l[26]),n&16&&(s.theme=l[4]),e.$set(s)},i(l){i||(g(e.$$.fragment,l),i=!0)},o(l){y(e.$$.fragment,l),i=!1},d(l){ce(e,l)}}}function Lt(t){let e,i;return e=new rl({props:{tree:fe(t[23].children),treeLevel:t[1]+1,recursive:!0,theme:t[4]}}),e.$on("elementClick",t[18]),{c(){oe(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,n){se(e,l,n),i=!0},p(l,n){const s={};n&1&&(s.tree=fe(l[23].children)),n&2&&(s.treeLevel=l[1]+1),n&16&&(s.theme=l[4]),e.$set(s)},i(l){i||(g(e.$$.fragment,l),i=!0)},o(l){y(e.$$.fragment,l),i=!1},d(l){ce(e,l)}}}function Nt(t){let e,i,l,n,s;function o(u,h){return u[1]==0?tl:el}let c=o(t),r=c(t);const f=[ll,nl],a=[];function d(u,h){return u[1]<u[3]?0:u[23].children?1:-1}return~(l=d(t))&&(n=a[l]=f[l](t)),{c(){e=D("div"),r.c(),i=W(),n&&n.c(),this.h()},l(u){e=L(u,"DIV",{class:!0});var h=I(e);r.l(h),i=q(h),n&&n.l(h),h.forEach(k),this.h()},h(){w(e,"class","tree-branch svelte-1le6etk"),P(e,"hide_sibling",t[1]==0&&t[9](t[23]))},m(u,h){O(u,e,h),r.m(e,null),S(e,i),~l&&a[l].m(e,null),s=!0},p(u,h){c===(c=o(u))&&r?r.p(u,h):(r.d(1),r=c(u),r&&(r.c(),r.m(e,i)));let _=l;l=d(u),l===_?~l&&a[l].p(u,h):(n&&(B(),y(a[_],1,1,()=>{a[_]=null}),M()),~l?(n=a[l],n?n.p(u,h):(n=a[l]=f[l](u),n.c()),g(n,1),n.m(e,null)):n=null),(!s||h&515)&&P(e,"hide_sibling",u[1]==0&&u[9](u[23]))},i(u){s||(g(n),s=!0)},o(u){y(n),s=!1},d(u){u&&k(e),r.d(),~l&&a[l].d()}}}function It(t){let e,i,l,n=t[23].children&&Vt(t);return{c(){e=D("div"),n&&n.c(),i=W(),this.h()},l(s){e=L(s,"DIV",{class:!0});var o=I(e);n&&n.l(o),i=q(o),o.forEach(k),this.h()},h(){w(e,"class","tree-branch test svelte-1le6etk")},m(s,o){O(s,e,o),n&&n.m(e,null),S(e,i),l=!0},p(s,o){s[23].children?n?(n.p(s,o),o&1&&g(n,1)):(n=Vt(s),n.c(),g(n,1),n.m(e,i)):n&&(B(),y(n,1,1,()=>{n=null}),M())},i(s){l||(g(n),l=!0)},o(s){y(n),l=!1},d(s){s&&k(e),n&&n.d()}}}function Vt(t){let e,i,l=Q(fe(t[23].children)),n=[];for(let o=0;o<l.length;o+=1)n[o]=Pt(At(t,l,o));const s=o=>y(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=F()},l(o){for(let c=0;c<n.length;c+=1)n[c].l(o);e=F()},m(o,c){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(o,c);O(o,e,c),i=!0},p(o,c){if(c&17){l=Q(fe(o[23].children));let r;for(r=0;r<l.length;r+=1){const f=At(o,l,r);n[r]?(n[r].p(f,c),g(n[r],1)):(n[r]=Pt(f),n[r].c(),g(n[r],1),n[r].m(e.parentNode,e))}for(B(),r=l.length;r<n.length;r+=1)s(r);M()}},i(o){if(!i){for(let c=0;c<l.length;c+=1)g(n[c]);i=!0}},o(o){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)y(n[c]);i=!1},d(o){o&&k(e),Ce(n,o)}}}function Pt(t){let e,i;return e=new it({props:{leaf:t[26],theme:t[4]}}),e.$on("elementClick",t[20]),{c(){oe(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,n){se(e,l,n),i=!0},p(l,n){const s={};n&1&&(s.leaf=l[26]),n&16&&(s.theme=l[4]),e.$set(s)},i(l){i||(g(e.$$.fragment,l),i=!0)},o(l){y(e.$$.fragment,l),i=!1},d(l){ce(e,l)}}}function Ft(t){let e,i,l,n=t[1]<=t[3]&&Tt(t),s=t[1]>t[3]&&It(t);return{c(){n&&n.c(),e=W(),s&&s.c(),i=F()},l(o){n&&n.l(o),e=q(o),s&&s.l(o),i=F()},m(o,c){n&&n.m(o,c),O(o,e,c),s&&s.m(o,c),O(o,i,c),l=!0},p(o,c){o[1]<=o[3]?n?(n.p(o,c),c&10&&g(n,1)):(n=Tt(o),n.c(),g(n,1),n.m(e.parentNode,e)):n&&(B(),y(n,1,1,()=>{n=null}),M()),o[1]>o[3]?s?(s.p(o,c),c&10&&g(s,1)):(s=It(o),s.c(),g(s,1),s.m(i.parentNode,i)):s&&(B(),y(s,1,1,()=>{s=null}),M())},i(o){l||(g(n),g(s),l=!0)},o(o){y(n),y(s),l=!1},d(o){o&&(k(e),k(i)),n&&n.d(o),s&&s.d(o)}}}function il(t){let e,i,l,n;const s=t[12].above,o=We(s,t,t[11],St);let c=t[0].length>0&&Ot(t);const r=t[12].default,f=We(r,t,t[11],null),a=t[12].below,d=We(a,t,t[11],Ct);return{c(){o&&o.c(),e=W(),c&&c.c(),i=W(),f&&f.c(),l=W(),d&&d.c()},l(u){o&&o.l(u),e=q(u),c&&c.l(u),i=q(u),f&&f.l(u),l=q(u),d&&d.l(u)},m(u,h){o&&o.m(u,h),O(u,e,h),c&&c.m(u,h),O(u,i,h),f&&f.m(u,h),O(u,l,h),d&&d.m(u,h),n=!0},p(u,[h]){o&&o.p&&(!n||h&2048)&&qe(o,s,u,u[11],n?ze(s,u[11],h,xn):He(u[11]),St),u[0].length>0?c?(c.p(u,h),h&1&&g(c,1)):(c=Ot(u),c.c(),g(c,1),c.m(i.parentNode,i)):c&&(B(),y(c,1,1,()=>{c=null}),M()),f&&f.p&&(!n||h&2048)&&qe(f,r,u,u[11],n?ze(r,u[11],h,null):He(u[11]),null),d&&d.p&&(!n||h&2048)&&qe(d,a,u,u[11],n?ze(a,u[11],h,$n):He(u[11]),Ct)},i(u){n||(g(o,u),g(c),g(f,u),g(d,u),n=!0)},o(u){y(o,u),y(c),y(f,u),y(d,u),n=!1},d(u){u&&(k(e),k(i),k(l)),o&&o.d(u),c&&c.d(u),f&&f.d(u),d&&d.d(u)}}}function ol(t,e,i){let{$$slots:l={},$$scope:n}=e,{tree:s}=e,{treeLevel:o=0}=e,{recursive:c=!1}=e,{row_depth:r=1}=e,{theme:f}=e,{min_display_priority:a=0}=e;const d=Bt();function u(p,T,pe){d("elementClick",{event:p,element:T,href:pe})}o>0&&s.sort((p,T)=>p["@id"].localeCompare(T["@id"]));let h=new Set,_=new Set;Qt(async()=>{if(localStorage.getItem("show_set"))try{JSON.parse(localStorage.getItem("show_set")).forEach(p=>h.add(p))}catch{console.warn("Failed to load show_set from localeStorage, deleting show_set"),localStorage.removeItem("show_set"),i(5,h)}if(localStorage.getItem("hide_set"))try{JSON.parse(localStorage.getItem("hide_set")).forEach(p=>_.add(p)),i(6,_)}catch{console.warn("Failed to load hide_set from localeStorage, deleting hide_set"),localStorage.removeItem("hide_set")}});function m(p){if(p["d3f:display-order"]){if(p["d3f:display-order"]["@value"]>=a)return!0}else return!1}function b(p){let T=p["@id"];console.debug("before"),console.debug("show: "+Array.from(h)),console.debug("hide: "+Array.from(_)),h.has(T)?(h.delete(T),_.add(T)):_.has(T)?(h.add(T),_.delete(T)):_.has(T)&&h.has(T)?(h.delete(T),_.delete(T)):!_.has(T)&&!h.has(T)&&m(p)?_.add(T):h.add(T),i(5,h),i(6,_),h&&localStorage.setItem("show_set",JSON.stringify([...h])),_&&localStorage.setItem("hide_set",JSON.stringify([..._])),console.debug("after"),console.debug("show: "+Array.from(h)),console.debug("hide: "+Array.from(_))}function v(p){return m(p),h.has(p["@id"]),_.has(p["@id"]),!((m(p)||h.has(p["@id"]))&&!_.has(p["@id"]))}const E=p=>b(p),A=p=>b(p),N=(p,T)=>u(T,p,`/tactic/${p["@id"]}`),V=p=>b(p),z=(p,T)=>u(T,p,`/technique/${p["@id"]}`);function $(p){Oe.call(this,t,p)}function C(p){Oe.call(this,t,p)}function j(p){Oe.call(this,t,p)}return t.$$set=p=>{"tree"in p&&i(0,s=p.tree),"treeLevel"in p&&i(1,o=p.treeLevel),"recursive"in p&&i(2,c=p.recursive),"row_depth"in p&&i(3,r=p.row_depth),"theme"in p&&i(4,f=p.theme),"min_display_priority"in p&&i(10,a=p.min_display_priority),"$$scope"in p&&i(11,n=p.$$scope)},[s,o,c,r,f,h,_,u,b,v,a,n,l,E,A,N,V,z,$,C,j]}class rl extends xe{constructor(e){super(),et(this,e,ol,il,Ve,{tree:0,treeLevel:1,recursive:2,row_depth:3,theme:4,min_display_priority:10})}}export{rl as T,zn as c,Bn as o,Mn as s};

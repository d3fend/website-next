import{s as be,c as Ue,e as Be,d as Le,f as le,i as N,q as C,D as oe,k as p,O as De,u as qe,g as je,a as pe,v as kt,an as Qt,o as U,b as He,t as Wt,j as ve,h as Bt,m as Lt,a2 as Te,_ as Me,$ as nt,al as Ze,w as Ye,ao as j,B as se,P as Ee,G as ze,Q as Ce,am as xt,C as fn,N as $t,Y as cn,F as Xn,at as qi,E as ji,R as en,W as ke,l as We,n as Se,a1 as It,p as nl,a0 as il,ak as ol,ap as ll,au as sl,r as jn,S as pn}from"./scheduler.DSdOozvr.js";import{S as he,i as ge,t as A,a as R,c as re,b as de,m as ae,d as ue,g as Xe,e as Ae}from"./index.B_9K2UQt.js";import{g as ct,a as Nt}from"./spread.CgU5AtxT.js";import{w as te,r as $e,d as Ht}from"./index.jNolgJd8.js";import{e as _t,u as dn,o as hn}from"./each.gsyU4MsK.js";import{g as rl}from"./globals.D0QH3NT1.js";import{s as Qe,k as pi,l as An,T as wn,m as Sn,t as al}from"./transform.B54KPHx3.js";function ul(t){let e;for(;e=t.sourceEvent;)t=e;return t}function et(t,e){if(t=ul(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}}return[t.pageX,t.pageY]}const fl={passive:!1},At={capture:!0,passive:!1};function En(t){t.stopImmediatePropagation()}function vt(t){t.preventDefault(),t.stopImmediatePropagation()}function Ji(t){var e=t.document.documentElement,n=Qe(t).on("dragstart.drag",vt,At);"onselectstart"in e?n.on("selectstart.drag",vt,At):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Qi(t,e){var n=t.document.documentElement,i=Qe(t).on("dragstart.drag",null);e&&(i.on("click.drag",vt,At),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ut=t=>()=>t;function vn(t,{sourceEvent:e,subject:n,target:i,identifier:o,active:s,x:l,y:r,dx:a,dy:u,dispatch:f}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:r,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:f}})}vn.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function cl(t){return!t.ctrlKey&&!t.button}function dl(){return this.parentNode}function hl(t,e){return e??{x:t.x,y:t.y}}function gl(){return navigator.maxTouchPoints||"ontouchstart"in this}function xi(){var t=cl,e=dl,n=hl,i=gl,o={},s=pi("start","drag","end"),l=0,r,a,u,f,h=0;function d(M){M.on("mousedown.drag",c).filter(i).on("touchstart.drag",y).on("touchmove.drag",g,fl).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(M,B){if(!(f||!t.call(this,M,B))){var L=k(this,e.call(this,M,B),M,B,"mouse");L&&(Qe(M.view).on("mousemove.drag",b,At).on("mouseup.drag",m,At),Ji(M.view),En(M),u=!1,r=M.clientX,a=M.clientY,L("start",M))}}function b(M){if(vt(M),!u){var B=M.clientX-r,L=M.clientY-a;u=B*B+L*L>h}o.mouse("drag",M)}function m(M){Qe(M.view).on("mousemove.drag mouseup.drag",null),Qi(M.view,u),vt(M),o.mouse("end",M)}function y(M,B){if(t.call(this,M,B)){var L=M.changedTouches,I=e.call(this,M,B),v=L.length,H,Y;for(H=0;H<v;++H)(Y=k(this,I,M,B,L[H].identifier,L[H]))&&(En(M),Y("start",M,L[H]))}}function g(M){var B=M.changedTouches,L=B.length,I,v;for(I=0;I<L;++I)(v=o[B[I].identifier])&&(vt(M),v("drag",M,B[I]))}function E(M){var B=M.changedTouches,L=B.length,I,v;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),I=0;I<L;++I)(v=o[B[I].identifier])&&(En(M),v("end",M,B[I]))}function k(M,B,L,I,v,H){var Y=s.copy(),F=et(H||L,B),Q,X,_;if((_=n.call(M,new vn("beforestart",{sourceEvent:L,target:d,identifier:v,active:l,x:F[0],y:F[1],dx:0,dy:0,dispatch:Y}),I))!=null)return Q=_.x-F[0]||0,X=_.y-F[1]||0,function w(S,P,O){var D=F,W;switch(S){case"start":o[v]=w,W=l++;break;case"end":delete o[v],--l;case"drag":F=et(O||P,B),W=l;break}Y.call(S,M,new vn(S,{sourceEvent:P,subject:_,target:d,identifier:v,active:W,x:F[0]+Q,y:F[1]+X,dx:F[0]-D[0],dy:F[1]-D[1],dispatch:Y}),I)}}return d.filter=function(M){return arguments.length?(t=typeof M=="function"?M:Ut(!!M),d):t},d.container=function(M){return arguments.length?(e=typeof M=="function"?M:Ut(M),d):e},d.subject=function(M){return arguments.length?(n=typeof M=="function"?M:Ut(M),d):n},d.touchable=function(M){return arguments.length?(i=typeof M=="function"?M:Ut(!!M),d):i},d.on=function(){var M=s.on.apply(s,arguments);return M===s?d:M},d.clickDistance=function(M){return arguments.length?(h=(M=+M)*M,d):Math.sqrt(h)},d}var ml=1e-12;function Jn(t){return((t=Math.exp(t))+1/t)/2}function bl(t){return((t=Math.exp(t))-1/t)/2}function yl(t){return((t=Math.exp(2*t))-1)/(t+1)}const _l=function t(e,n,i){function o(s,l){var r=s[0],a=s[1],u=s[2],f=l[0],h=l[1],d=l[2],c=f-r,b=h-a,m=c*c+b*b,y,g;if(m<ml)g=Math.log(d/u)/e,y=function(I){return[r+I*c,a+I*b,u*Math.exp(e*I*g)]};else{var E=Math.sqrt(m),k=(d*d-u*u+i*m)/(2*u*n*E),M=(d*d-u*u-i*m)/(2*d*n*E),B=Math.log(Math.sqrt(k*k+1)-k),L=Math.log(Math.sqrt(M*M+1)-M);g=(L-B)/e,y=function(I){var v=I*g,H=Jn(B),Y=u/(n*E)*(H*yl(e*v+B)-bl(B));return[r+Y*c,a+Y*b,u*H/Jn(e*v+B)]}}return y.duration=g*1e3*e/Math.SQRT2,y}return o.rho=function(s){var l=Math.max(.001,+s),r=l*l,a=r*r;return t(l,r,a)},o}(Math.SQRT2,2,4),qt=t=>()=>t;function kl(t,{sourceEvent:e,target:n,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function Cn(t){t.stopImmediatePropagation()}function Yt(t){t.preventDefault(),t.stopImmediatePropagation()}function wl(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Sl(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Qn(){return this.__zoom||An}function El(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Cl(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ml(t,e,n){var i=t.invertX(e[0][0])-n[0][0],o=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],l=t.invertY(e[1][1])-n[1][1];return t.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),l>s?(s+l)/2:Math.min(0,s)||Math.max(0,l))}function $i(){var t=wl,e=Sl,n=Ml,i=El,o=Cl,s=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],r=250,a=_l,u=pi("start","zoom","end"),f,h,d,c=500,b=150,m=0,y=10;function g(_){_.property("__zoom",Qn).on("wheel.zoom",v,{passive:!1}).on("mousedown.zoom",H).on("dblclick.zoom",Y).filter(o).on("touchstart.zoom",F).on("touchmove.zoom",Q).on("touchend.zoom touchcancel.zoom",X).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(_,w,S,P){var O=_.selection?_.selection():_;O.property("__zoom",Qn),_!==O?B(_,w,S,P):O.interrupt().each(function(){L(this,arguments).event(P).start().zoom(null,typeof w=="function"?w.apply(this,arguments):w).end()})},g.scaleBy=function(_,w,S,P){g.scaleTo(_,function(){var O=this.__zoom.k,D=typeof w=="function"?w.apply(this,arguments):w;return O*D},S,P)},g.scaleTo=function(_,w,S,P){g.transform(_,function(){var O=e.apply(this,arguments),D=this.__zoom,W=S==null?M(O):typeof S=="function"?S.apply(this,arguments):S,q=D.invert(W),G=typeof w=="function"?w.apply(this,arguments):w;return n(k(E(D,G),W,q),O,l)},S,P)},g.translateBy=function(_,w,S,P){g.transform(_,function(){return n(this.__zoom.translate(typeof w=="function"?w.apply(this,arguments):w,typeof S=="function"?S.apply(this,arguments):S),e.apply(this,arguments),l)},null,P)},g.translateTo=function(_,w,S,P,O){g.transform(_,function(){var D=e.apply(this,arguments),W=this.__zoom,q=P==null?M(D):typeof P=="function"?P.apply(this,arguments):P;return n(An.translate(q[0],q[1]).scale(W.k).translate(typeof w=="function"?-w.apply(this,arguments):-w,typeof S=="function"?-S.apply(this,arguments):-S),D,l)},P,O)};function E(_,w){return w=Math.max(s[0],Math.min(s[1],w)),w===_.k?_:new wn(w,_.x,_.y)}function k(_,w,S){var P=w[0]-S[0]*_.k,O=w[1]-S[1]*_.k;return P===_.x&&O===_.y?_:new wn(_.k,P,O)}function M(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function B(_,w,S,P){_.on("start.zoom",function(){L(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){L(this,arguments).event(P).end()}).tween("zoom",function(){var O=this,D=arguments,W=L(O,D).event(P),q=e.apply(O,D),G=S==null?M(q):typeof S=="function"?S.apply(O,D):S,V=Math.max(q[1][0]-q[0][0],q[1][1]-q[0][1]),x=O.__zoom,ee=typeof w=="function"?w.apply(O,D):w,me=a(x.invert(G).concat(V/x.k),ee.invert(G).concat(V/ee.k));return function(T){if(T===1)T=ee;else{var ne=me(T),fe=V/ne[2];T=new wn(fe,G[0]-ne[0]*fe,G[1]-ne[1]*fe)}W.zoom(null,T)}})}function L(_,w,S){return!S&&_.__zooming||new I(_,w)}function I(_,w){this.that=_,this.args=w,this.active=0,this.sourceEvent=null,this.extent=e.apply(_,w),this.taps=0}I.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,w){return this.mouse&&_!=="mouse"&&(this.mouse[1]=w.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=w.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=w.invert(this.touch1[0])),this.that.__zoom=w,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var w=Qe(this.that).datum();u.call(_,this.that,new kl(_,{sourceEvent:this.sourceEvent,target:g,type:_,transform:this.that.__zoom,dispatch:u}),w)}};function v(_,...w){if(!t.apply(this,arguments))return;var S=L(this,w).event(_),P=this.__zoom,O=Math.max(s[0],Math.min(s[1],P.k*Math.pow(2,i.apply(this,arguments)))),D=et(_);if(S.wheel)(S.mouse[0][0]!==D[0]||S.mouse[0][1]!==D[1])&&(S.mouse[1]=P.invert(S.mouse[0]=D)),clearTimeout(S.wheel);else{if(P.k===O)return;S.mouse=[D,P.invert(D)],Sn(this),S.start()}Yt(_),S.wheel=setTimeout(W,b),S.zoom("mouse",n(k(E(P,O),S.mouse[0],S.mouse[1]),S.extent,l));function W(){S.wheel=null,S.end()}}function H(_,...w){if(d||!t.apply(this,arguments))return;var S=_.currentTarget,P=L(this,w,!0).event(_),O=Qe(_.view).on("mousemove.zoom",G,!0).on("mouseup.zoom",V,!0),D=et(_,S),W=_.clientX,q=_.clientY;Ji(_.view),Cn(_),P.mouse=[D,this.__zoom.invert(D)],Sn(this),P.start();function G(x){if(Yt(x),!P.moved){var ee=x.clientX-W,me=x.clientY-q;P.moved=ee*ee+me*me>m}P.event(x).zoom("mouse",n(k(P.that.__zoom,P.mouse[0]=et(x,S),P.mouse[1]),P.extent,l))}function V(x){O.on("mousemove.zoom mouseup.zoom",null),Qi(x.view,P.moved),Yt(x),P.event(x).end()}}function Y(_,...w){if(t.apply(this,arguments)){var S=this.__zoom,P=et(_.changedTouches?_.changedTouches[0]:_,this),O=S.invert(P),D=S.k*(_.shiftKey?.5:2),W=n(k(E(S,D),P,O),e.apply(this,w),l);Yt(_),r>0?Qe(this).transition().duration(r).call(B,W,P,_):Qe(this).call(g.transform,W,P,_)}}function F(_,...w){if(t.apply(this,arguments)){var S=_.touches,P=S.length,O=L(this,w,_.changedTouches.length===P).event(_),D,W,q,G;for(Cn(_),W=0;W<P;++W)q=S[W],G=et(q,this),G=[G,this.__zoom.invert(G),q.identifier],O.touch0?!O.touch1&&O.touch0[2]!==G[2]&&(O.touch1=G,O.taps=0):(O.touch0=G,D=!0,O.taps=1+!!f);f&&(f=clearTimeout(f)),D&&(O.taps<2&&(h=G[0],f=setTimeout(function(){f=null},c)),Sn(this),O.start())}}function Q(_,...w){if(this.__zooming){var S=L(this,w).event(_),P=_.changedTouches,O=P.length,D,W,q,G;for(Yt(_),D=0;D<O;++D)W=P[D],q=et(W,this),S.touch0&&S.touch0[2]===W.identifier?S.touch0[0]=q:S.touch1&&S.touch1[2]===W.identifier&&(S.touch1[0]=q);if(W=S.that.__zoom,S.touch1){var V=S.touch0[0],x=S.touch0[1],ee=S.touch1[0],me=S.touch1[1],T=(T=ee[0]-V[0])*T+(T=ee[1]-V[1])*T,ne=(ne=me[0]-x[0])*ne+(ne=me[1]-x[1])*ne;W=E(W,Math.sqrt(T/ne)),q=[(V[0]+ee[0])/2,(V[1]+ee[1])/2],G=[(x[0]+me[0])/2,(x[1]+me[1])/2]}else if(S.touch0)q=S.touch0[0],G=S.touch0[1];else return;S.zoom("touch",n(k(W,q,G),S.extent,l))}}function X(_,...w){if(this.__zooming){var S=L(this,w).event(_),P=_.changedTouches,O=P.length,D,W;for(Cn(_),d&&clearTimeout(d),d=setTimeout(function(){d=null},c),D=0;D<O;++D)W=P[D],S.touch0&&S.touch0[2]===W.identifier?delete S.touch0:S.touch1&&S.touch1[2]===W.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(W=et(W,this),Math.hypot(h[0]-W[0],h[1]-W[1])<y)){var q=Qe(this).on("dblclick.zoom");q&&q.apply(this,arguments)}}}return g.wheelDelta=function(_){return arguments.length?(i=typeof _=="function"?_:qt(+_),g):i},g.filter=function(_){return arguments.length?(t=typeof _=="function"?_:qt(!!_),g):t},g.touchable=function(_){return arguments.length?(o=typeof _=="function"?_:qt(!!_),g):o},g.extent=function(_){return arguments.length?(e=typeof _=="function"?_:qt([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),g):e},g.scaleExtent=function(_){return arguments.length?(s[0]=+_[0],s[1]=+_[1],g):[s[0],s[1]]},g.translateExtent=function(_){return arguments.length?(l[0][0]=+_[0][0],l[1][0]=+_[1][0],l[0][1]=+_[0][1],l[1][1]=+_[1][1],g):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},g.constrain=function(_){return arguments.length?(n=_,g):n},g.duration=function(_){return arguments.length?(r=+_,g):r},g.interpolate=function(_){return arguments.length?(a=_,g):a},g.on=function(){var _=u.on.apply(u,arguments);return _===u?g:_},g.clickDistance=function(_){return arguments.length?(m=(_=+_)*_,g):Math.sqrt(m)},g.tapDistance=function(_){return arguments.length?(y=+_,g):y},g}function Pe(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=Pe(t[n]))!==""&&(e+=(e&&" ")+i);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}const Kt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${n&&i}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`},xn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var St;(function(t){t.Strict="strict",t.Loose="loose"})(St||(St={}));var lt;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(lt||(lt={}));var tn;(function(t){t.Partial="partial",t.Full="full"})(tn||(tn={}));const Tn={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Tt;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Tt||(Tt={}));var nn;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(nn||(nn={}));var ce;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(ce||(ce={}));const $n={[ce.Left]:ce.Right,[ce.Right]:ce.Left,[ce.Top]:ce.Bottom,[ce.Bottom]:ce.Top};function zl(t,e){if(!t&&!e)return!0;if(!t||!e||t.size!==e.size)return!1;if(!t.size&&!e.size)return!0;for(const n of t.keys())if(!e.has(n))return!1;return!0}function ei(t,e,n){if(!n)return;const i=[];t.forEach((o,s)=>{e!=null&&e.has(s)||i.push(o)}),i.length&&n(i)}function ti(t){return t===null?null:t?"valid":"invalid"}const Pl=t=>"id"in t&&"source"in t&&"target"in t,Mu=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),eo=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),Rt=(t,e=[0,0])=>{const{width:n,height:i}=mn(t),o=t.origin??e,s=n*o[0],l=i*o[1];return{x:t.position.x-s,y:t.position.y-l}},Zt=(t,e={})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(i=>{if(e.filter===void 0||e.filter(i)){const o=Vn(i);n=Wn(n,o)}}),Bn(n)},to=(t,e,[n,i,o]=[0,0,1],s=!1,l=!1)=>{const r={...gn(e,[n,i,o]),width:e.width/o,height:e.height/o},a=[];for(const[,u]of t){const{measured:f,selectable:h=!0,hidden:d=!1}=u,c=f.width??u.width??u.initialWidth??null,b=f.height??u.height??u.initialHeight??null;if(l&&!h||d)continue;const m=oo(r,Ln(u)),y=c===null||b===null,g=s&&m>0,E=(c??0)*(b??0);(y||g||m>=E||u.dragging)&&a.push(u)}return a},In=(t,e)=>{const n=new Set;return t.forEach(i=>{n.add(i.id)}),e.filter(i=>n.has(i.source)||n.has(i.target))};function ni(t,e){const n=new Map,i=e!=null&&e.nodes?new Set(e.nodes.map(o=>o.id)):null;return t.forEach(o=>{o.measured.width&&o.measured.height&&((e==null?void 0:e.includeHiddenNodes)||!o.hidden)&&(!i||i.has(o.id))&&n.set(o.id,o)}),n}async function ii({nodes:t,width:e,height:n,panZoom:i,minZoom:o,maxZoom:s},l){if(t.size===0)return Promise.resolve(!1);const r=Zt(t),a=lo(r,e,n,(l==null?void 0:l.minZoom)??o,(l==null?void 0:l.maxZoom)??s,(l==null?void 0:l.padding)??.1);return await i.setViewport(a,{duration:l==null?void 0:l.duration}),Promise.resolve(!0)}function Ol(t,e){var n,i;return!e||e==="parent"?e:[e[0],[e[1][0]-(((n=t.measured)==null?void 0:n.width)??0),e[1][1]-(((i=t.measured)==null?void 0:i.height)??0)]]}function Dl({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:o,onError:s}){const l=n.get(t),r=l.parentId?n.get(l.parentId):void 0,{x:a,y:u}=r?r.internals.positionAbsolute:{x:0,y:0},f=l.origin??i;let h=Ol(l,l.extent||o);if(l.extent==="parent"&&!l.expandParent)if(!r)s==null||s("005",Kt.error005());else{const c=l.measured.width,b=l.measured.height,m=r.measured.width,y=r.measured.height;c&&b&&m&&y&&(h=[[a,u],[a+m-c,u+y-b]])}else r&&li(l.extent)&&(h=[[l.extent[0][0]+a,l.extent[0][1]+u],[l.extent[1][0]+a,l.extent[1][1]+u]]);const d=li(h)?vl(e,h):e;return{position:{x:d.x-a+l.measured.width*f[0],y:d.y-u+l.measured.height*f[1]},positionAbsolute:d}}async function Hl({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:i,onBeforeDelete:o}){const s=new Set(t.map(d=>d.id)),l=[];for(const d of n){if(d.deletable===!1)continue;const c=s.has(d.id),b=!c&&d.parentId&&l.find(m=>m.id===d.parentId);(c||b)&&l.push(d)}const r=new Set(e.map(d=>d.id)),a=i.filter(d=>d.deletable!==!1),f=In(l,a);for(const d of a)r.has(d.id)&&!f.find(b=>b.id===d.id)&&f.push(d);if(!o)return{edges:f,nodes:l};const h=await o({nodes:l,edges:f});return typeof h=="boolean"?h?{edges:f,nodes:l}:{edges:[],nodes:[]}:h}const Vt=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),vl=(t={x:0,y:0},e)=>({x:Vt(t.x,e[0][0],e[1][0]),y:Vt(t.y,e[0][1],e[1][1])}),oi=(t,e,n)=>t<e?Vt(Math.abs(t-e),1,e)/e:t>n?-Vt(Math.abs(t-n),1,e)/e:0,no=(t,e,n=15,i=40)=>{const o=oi(t.x,i,e.width-i)*n,s=oi(t.y,i,e.height-i)*n;return[o,s]},Wn=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Nn=({x:t,y:e,width:n,height:i})=>({x:t,y:e,x2:t+n,y2:e+i}),Bn=({x:t,y:e,x2:n,y2:i})=>({x:t,y:e,width:n-t,height:i-e}),Ln=(t,e=[0,0])=>{var o,s;const{x:n,y:i}=eo(t)?t.internals.positionAbsolute:Rt(t,e);return{x:n,y:i,width:((o=t.measured)==null?void 0:o.width)??t.width??t.initialWidth??0,height:((s=t.measured)==null?void 0:s.height)??t.height??t.initialHeight??0}},Vn=(t,e=[0,0])=>{var o,s;const{x:n,y:i}=eo(t)?t.internals.positionAbsolute:Rt(t,e);return{x:n,y:i,x2:n+(((o=t.measured)==null?void 0:o.width)??t.width??t.initialWidth??0),y2:i+(((s=t.measured)==null?void 0:s.height)??t.height??t.initialHeight??0)}},io=(t,e)=>Bn(Wn(Nn(t),Nn(e))),oo=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*i)},zu=t=>tt(t.width)&&tt(t.height)&&tt(t.x)&&tt(t.y),tt=t=>!isNaN(t)&&isFinite(t),Tl=(t,e)=>{},Kn=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),gn=({x:t,y:e},[n,i,o],s=!1,l=[1,1])=>{const r={x:(t-n)/o,y:(e-i)/o};return s?Kn(r,l):r},Il=({x:t,y:e},[n,i,o])=>({x:t*o+n,y:e*o+i}),lo=(t,e,n,i,o,s)=>{const l=e/(t.width*(1+s)),r=n/(t.height*(1+s)),a=Math.min(l,r),u=Vt(a,i,o),f=t.x+t.width/2,h=t.y+t.height/2,d=e/2-f*u,c=n/2-h*u;return{x:d,y:c,zoom:u}},on=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0};function li(t){return t!==void 0&&t!=="parent"}function mn(t){var e,n;return{width:((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth??0,height:((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight??0}}function ln(t){var e,n;return(((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth)!==void 0&&(((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight)!==void 0}function Xt(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:i}){const{x:o,y:s}=ft(t),l=gn({x:o,y:s},i),{x:r,y:a}=n?Kn(l,e):l;return{xSnapped:r,ySnapped:a,...l}}const so=t=>({width:t.offsetWidth,height:t.offsetHeight}),Nl=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},Vl=["INPUT","SELECT","TEXTAREA"];function Yl(t){var i,o;const e=((o=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:o[0])||t.target;return Vl.includes(e==null?void 0:e.nodeName)||(e==null?void 0:e.hasAttribute("contenteditable"))||!!(e!=null&&e.closest(".nokey"))}const ro=t=>"clientX"in t,ft=(t,e)=>{var s,l;const n=ro(t),i=n?t.clientX:(s=t.touches)==null?void 0:s[0].clientX,o=n?t.clientY:(l=t.touches)==null?void 0:l[0].clientY;return{x:i-((e==null?void 0:e.left)??0),y:o-((e==null?void 0:e.top)??0)}},si=(t,e,n,i,o)=>{const s=e.querySelectorAll(`.${t}`);return!s||!s.length?null:Array.from(s).map(l=>{const r=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),type:t,nodeId:o,position:l.getAttribute("data-handlepos"),x:(r.left-n.left)/i,y:(r.top-n.top)/i,...so(l)}})};function Xl({sourceX:t,sourceY:e,targetX:n,targetY:i,sourceControlX:o,sourceControlY:s,targetControlX:l,targetControlY:r}){const a=t*.125+o*.375+l*.375+n*.125,u=e*.125+s*.375+r*.375+i*.125,f=Math.abs(a-t),h=Math.abs(u-e);return[a,u,f,h]}function jt(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function ri({pos:t,x1:e,y1:n,x2:i,y2:o,c:s}){switch(t){case ce.Left:return[e-jt(e-i,s),n];case ce.Right:return[e+jt(i-e,s),n];case ce.Top:return[e,n-jt(n-o,s)];case ce.Bottom:return[e,n+jt(o-n,s)]}}function ao({sourceX:t,sourceY:e,sourcePosition:n=ce.Bottom,targetX:i,targetY:o,targetPosition:s=ce.Top,curvature:l=.25}){const[r,a]=ri({pos:n,x1:t,y1:e,x2:i,y2:o,c:l}),[u,f]=ri({pos:s,x1:i,y1:o,x2:t,y2:e,c:l}),[h,d,c,b]=Xl({sourceX:t,sourceY:e,targetX:i,targetY:o,sourceControlX:r,sourceControlY:a,targetControlX:u,targetControlY:f});return[`M${t},${e} C${r},${a} ${u},${f} ${i},${o}`,h,d,c,b]}function uo({sourceX:t,sourceY:e,targetX:n,targetY:i}){const o=Math.abs(n-t)/2,s=n<t?n+o:n-o,l=Math.abs(i-e)/2,r=i<e?i+l:i-l;return[s,r,o,l]}function Al({sourceNode:t,targetNode:e,selected:n=!1,zIndex:i=0,elevateOnSelect:o=!1}){if(!o)return i;const s=n||e.selected||t.selected,l=Math.max(t.internals.z||0,e.internals.z||0,1e3);return i+(s?l:0)}function Wl({sourceNode:t,targetNode:e,width:n,height:i,transform:o}){const s=Wn(Vn(t),Vn(e));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const l={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:i/o[2]};return oo(l,Bn(s))>0}const Bl=({source:t,sourceHandle:e,target:n,targetHandle:i})=>`xy-edge__${t}${e||""}-${n}${i||""}`,Ll=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),Kl=(t,e)=>{if(!t.source||!t.target)return e;let n;return Pl(t)?n={...t}:n={...t,id:Bl(t)},Ll(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function fo({sourceX:t,sourceY:e,targetX:n,targetY:i}){const[o,s,l,r]=uo({sourceX:t,sourceY:e,targetX:n,targetY:i});return[`M ${t},${e}L ${n},${i}`,o,s,l,r]}const ai={[ce.Left]:{x:-1,y:0},[ce.Right]:{x:1,y:0},[ce.Top]:{x:0,y:-1},[ce.Bottom]:{x:0,y:1}},Rl=({source:t,sourcePosition:e=ce.Bottom,target:n})=>e===ce.Left||e===ce.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},ui=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function Zl({source:t,sourcePosition:e=ce.Bottom,target:n,targetPosition:i=ce.Top,center:o,offset:s}){const l=ai[e],r=ai[i],a={x:t.x+l.x*s,y:t.y+l.y*s},u={x:n.x+r.x*s,y:n.y+r.y*s},f=Rl({source:a,sourcePosition:e,target:u}),h=f.x!==0?"x":"y",d=f[h];let c=[],b,m;const y={x:0,y:0},g={x:0,y:0},[E,k,M,B]=uo({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(l[h]*r[h]===-1){b=o.x??E,m=o.y??k;const I=[{x:b,y:a.y},{x:b,y:u.y}],v=[{x:a.x,y:m},{x:u.x,y:m}];l[h]===d?c=h==="x"?I:v:c=h==="x"?v:I}else{const I=[{x:a.x,y:u.y}],v=[{x:u.x,y:a.y}];if(h==="x"?c=l.x===d?v:I:c=l.y===d?I:v,e===i){const X=Math.abs(t[h]-n[h]);if(X<=s){const _=Math.min(s-1,s-X);l[h]===d?y[h]=(a[h]>t[h]?-1:1)*_:g[h]=(u[h]>n[h]?-1:1)*_}}if(e!==i){const X=h==="x"?"y":"x",_=l[h]===r[X],w=a[X]>u[X],S=a[X]<u[X];(l[h]===1&&(!_&&w||_&&S)||l[h]!==1&&(!_&&S||_&&w))&&(c=h==="x"?I:v)}const H={x:a.x+y.x,y:a.y+y.y},Y={x:u.x+g.x,y:u.y+g.y},F=Math.max(Math.abs(H.x-c[0].x),Math.abs(Y.x-c[0].x)),Q=Math.max(Math.abs(H.y-c[0].y),Math.abs(Y.y-c[0].y));F>=Q?(b=(H.x+Y.x)/2,m=c[0].y):(b=c[0].x,m=(H.y+Y.y)/2)}return[[t,{x:a.x+y.x,y:a.y+y.y},...c,{x:u.x+g.x,y:u.y+g.y},n],b,m,M,B]}function Fl(t,e,n,i){const o=Math.min(ui(t,e)/2,ui(e,n)/2,i),{x:s,y:l}=e;if(t.x===s&&s===n.x||t.y===l&&l===n.y)return`L${s} ${l}`;if(t.y===l){const u=t.x<n.x?-1:1,f=t.y<n.y?1:-1;return`L ${s+o*u},${l}Q ${s},${l} ${s},${l+o*f}`}const r=t.x<n.x?1:-1,a=t.y<n.y?-1:1;return`L ${s},${l+o*a}Q ${s},${l} ${s+o*r},${l}`}function sn({sourceX:t,sourceY:e,sourcePosition:n=ce.Bottom,targetX:i,targetY:o,targetPosition:s=ce.Top,borderRadius:l=5,centerX:r,centerY:a,offset:u=20}){const[f,h,d,c,b]=Zl({source:{x:t,y:e},sourcePosition:n,target:{x:i,y:o},targetPosition:s,center:{x:r,y:a},offset:u});return[f.reduce((y,g,E)=>{let k="";return E>0&&E<f.length-1?k=Fl(f[E-1],g,f[E+1],l):k=`${E===0?"M":"L"}${g.x} ${g.y}`,y+=k,y},""),h,d,c,b]}function fi(t){var e;return t&&!!(t.internals.handleBounds||(e=t.handles)!=null&&e.length)&&!!(t.measured.width||t.width||t.initialWidth)}function Gl(t){var h;const{sourceNode:e,targetNode:n}=t;if(!fi(e)||!fi(n))return null;const i=e.internals.handleBounds||ci(e.handles),o=n.internals.handleBounds||ci(n.handles),s=di((i==null?void 0:i.source)??[],t.sourceHandle),l=di(t.connectionMode===St.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),t.targetHandle);if(!s||!l)return(h=t.onError)==null||h.call(t,"008",Kt.error008(s?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const r=(s==null?void 0:s.position)||ce.Bottom,a=(l==null?void 0:l.position)||ce.Top,u=rn(e,s,r),f=rn(n,l,a);return{sourceX:u.x,sourceY:u.y,targetX:f.x,targetY:f.y,sourcePosition:r,targetPosition:a}}function ci(t){if(!t)return null;const e=[],n=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?e.push(i):i.type==="target"&&n.push(i);return{source:e,target:n}}function rn(t,e,n=ce.Left,i=!1){const o=((e==null?void 0:e.x)??0)+t.internals.positionAbsolute.x,s=((e==null?void 0:e.y)??0)+t.internals.positionAbsolute.y,{width:l,height:r}=e??mn(t);if(i)return{x:o+l/2,y:s+r/2};switch((e==null?void 0:e.position)??n){case ce.Top:return{x:o+l/2,y:s};case ce.Right:return{x:o+l,y:s+r/2};case ce.Bottom:return{x:o+l/2,y:s+r};case ce.Left:return{x:o,y:s+r/2}}}function di(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function Yn(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function Ul(t,{id:e,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:o}){const s=new Set;return t.reduce((l,r)=>([r.markerStart||i,r.markerEnd||o].forEach(a=>{if(a&&typeof a=="object"){const u=Yn(a,e);s.has(u)||(l.push({id:u,color:a.color||n,...a}),s.add(u))}}),l),[]).sort((l,r)=>l.id.localeCompare(r.id))}const co={nodeOrigin:[0,0],elevateNodesOnSelect:!0,defaults:{}},ql={...co,checkEquality:!0};function ho(t,e,n,i){var r,a;const o={...ql,...i},s=new Map(e);e.clear(),n.clear();const l=i!=null&&i.elevateNodesOnSelect?1e3:0;for(const u of t){let f=s.get(u.id);o.checkEquality&&u===(f==null?void 0:f.internals.userNode)||(f={...o.defaults,...u,measured:{width:(r=u.measured)==null?void 0:r.width,height:(a=u.measured)==null?void 0:a.height},internals:{positionAbsolute:Rt(u,o.nodeOrigin),handleBounds:u.measured?f==null?void 0:f.internals.handleBounds:void 0,z:mo(u,l),userNode:u}}),e.set(u.id,f),u.parentId&&go(f,e,n,i)}}function go(t,e,n,i){const o={...co,...i},s=t.parentId,l=e.get(s);if(!l){console.warn(`Parent node ${s} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}const r=n.get(s);r?r.set(t.id,t):n.set(s,new Map([[t.id,t]]));const a=i!=null&&i.elevateNodesOnSelect?1e3:0,{x:u,y:f,z:h}=jl(t,l,o.nodeOrigin,a),d=t.internals.positionAbsolute,c=u!==d.x||f!==d.y;(c||h!==t.internals.z)&&(t.internals={...t.internals,positionAbsolute:c?{x:u,y:f}:d,z:h})}function mo(t,e){return(tt(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function jl(t,e,n,i){const o=Rt(t,n),s=mo(t,i),l=e.internals.z??0;return{x:e.internals.positionAbsolute.x+o.x,y:e.internals.positionAbsolute.y+o.y,z:l>s?l:s}}function pl(t,e,n,i=[0,0]){var l;const o=[],s=new Map;for(const r of t){const a=e.get(r.parentId);if(!a)continue;const u=((l=s.get(r.parentId))==null?void 0:l.expandedRect)??Ln(a),f=io(u,r.rect);s.set(r.parentId,{expandedRect:f,parent:a})}return s.size>0&&s.forEach(({expandedRect:r,parent:a},u)=>{var k;const f=a.internals.positionAbsolute,h=mn(a),d=a.origin??i,c=r.x<f.x?Math.round(Math.abs(f.x-r.x)):0,b=r.y<f.y?Math.round(Math.abs(f.y-r.y)):0,m=Math.max(h.width,Math.round(r.width)),y=Math.max(h.height,Math.round(r.height)),g=(m-h.width)*d[0],E=(y-h.height)*d[1];(c>0||b>0||g||E)&&(o.push({id:u,type:"position",position:{x:a.position.x-c+g,y:a.position.y-b+E}}),(k=n.get(u))==null||k.forEach(M=>{t.some(B=>B.id===M.id)||o.push({id:M.id,type:"position",position:{x:M.position.x+c,y:M.position.y+b}})})),(h.width<r.width||h.height<r.height||c||b)&&o.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:m+(c?d[0]*c-g:0),height:y+(b?d[1]*b-E:0)}})}),o}function Jl(t,e,n,i,o){const s=i==null?void 0:i.querySelector(".xyflow__viewport");let l=!1;if(!s)return{changes:[],updatedInternals:l};const r=[],a=window.getComputedStyle(s),{m22:u}=new window.DOMMatrixReadOnly(a.transform),f=[];for(const h of t.values()){const d=e.get(h.id);if(d)if(d.hidden)d.internals={...d.internals,handleBounds:void 0},l=!0;else{const c=so(h.nodeElement),b=d.measured.width!==c.width||d.measured.height!==c.height;if(!!(c.width&&c.height&&(b||!d.internals.handleBounds||h.force))){const y=h.nodeElement.getBoundingClientRect();d.measured=c,d.internals={...d.internals,positionAbsolute:Rt(d,o),handleBounds:{source:si("source",h.nodeElement,y,u,d.id),target:si("target",h.nodeElement,y,u,d.id)}},d.parentId&&go(d,e,n,{nodeOrigin:o}),l=!0,b&&(r.push({id:d.id,type:"dimensions",dimensions:c}),d.expandParent&&d.parentId&&f.push({id:d.id,parentId:d.parentId,rect:Ln(d,o)}))}}}if(f.length>0){const h=pl(f,e,n,o);r.push(...h)}return{changes:r,updatedInternals:l}}async function Ql({delta:t,panZoom:e,transform:n,translateExtent:i,width:o,height:s}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const l=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[o,s]],i),r=!!l&&(l.x!==n[0]||l.y!==n[1]||l.k!==n[2]);return Promise.resolve(r)}function bo(t,e,n){t.clear(),e.clear();for(const i of n){const{source:o,target:s,sourceHandle:l=null,targetHandle:r=null}=i,a=`${o}-source-${l}`,u=`${s}-target-${r}`,f=t.get(a)||new Map,h=t.get(u)||new Map,d={edgeId:i.id,source:o,target:s,sourceHandle:l,targetHandle:r};e.set(i.id,i),t.set(a,f.set(`${s}-${r}`,d)),t.set(u,h.set(`${o}-${l}`,d))}}function yo(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:yo(n,e):!1}function hi(t,e,n){let i=t;do{if(i!=null&&i.matches(e))return!0;if(i===n)return!1;i=i.parentElement}while(i);return!1}function xl(t,e,n,i){const o=new Map;for(const[s,l]of t)if((l.selected||l.id===i)&&(!l.parentId||!yo(l,t))&&(l.draggable||e&&typeof l.draggable>"u")){const r=t.get(s);r&&o.set(s,{id:s,position:r.position||{x:0,y:0},distance:{x:n.x-r.internals.positionAbsolute.x,y:n.y-r.internals.positionAbsolute.y},extent:r.extent,parentId:r.parentId,origin:r.origin,expandParent:r.expandParent,internals:{positionAbsolute:r.internals.positionAbsolute||{x:0,y:0}},measured:{width:r.measured.width??0,height:r.measured.height??0}})}return o}function Mn({nodeId:t,dragItems:e,nodeLookup:n,dragging:i=!0}){var l,r;const o=[];for(const[a,u]of e){const f=(l=n.get(a))==null?void 0:l.internals.userNode;f&&o.push({...f,position:u.position,dragging:i})}if(!t)return[o[0],o];const s=n.get(t).internals.userNode;return[{...s,position:((r=e.get(t))==null?void 0:r.position)||s.position,dragging:i},o]}function $l({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:i,onDragStop:o}){let s={x:null,y:null},l=0,r=new Map,a=!1,u={x:0,y:0},f=null,h=!1,d=null,c=!1;function b({noDragClassName:y,handleSelector:g,domNode:E,isSelectable:k,nodeId:M,nodeClickDistance:B=0}){d=Qe(E);function L({x:Y,y:F},Q){const{nodeLookup:X,nodeExtent:_,snapGrid:w,snapToGrid:S,nodeOrigin:P,onNodeDrag:O,onSelectionDrag:D,onError:W,updateNodePositions:q}=e();s={x:Y,y:F};let G=!1,V={x:0,y:0,x2:0,y2:0};if(r.size>1&&_){const x=Zt(r);V=Nn(x)}for(const[x,ee]of r){let me={x:Y-ee.distance.x,y:F-ee.distance.y};S&&(me=Kn(me,w));let T=[[_[0][0],_[0][1]],[_[1][0],_[1][1]]];if(r.size>1&&_&&!ee.extent){const{positionAbsolute:ie}=ee.internals,ye=ie.x-V.x+_[0][0],_e=ie.x+ee.measured.width-V.x2+_[1][0],we=ie.y-V.y+_[0][1],K=ie.y+ee.measured.height-V.y2+_[1][1];T=[[ye,we],[_e,K]]}const{position:ne,positionAbsolute:fe}=Dl({nodeId:x,nextPosition:me,nodeLookup:X,nodeExtent:T,nodeOrigin:P,onError:W});G=G||ee.position.x!==ne.x||ee.position.y!==ne.y,ee.position=ne,ee.internals.positionAbsolute=fe}if(G&&(q(r,!0),Q&&(i||O||!M&&D))){const[x,ee]=Mn({nodeId:M,dragItems:r,nodeLookup:X});i==null||i(Q,r,x,ee),O==null||O(Q,x,ee),M||D==null||D(Q,ee)}}async function I(){if(!f)return;const{transform:Y,panBy:F,autoPanSpeed:Q}=e(),[X,_]=no(u,f,Q);(X!==0||_!==0)&&(s.x=(s.x??0)-X/Y[2],s.y=(s.y??0)-_/Y[2],await F({x:X,y:_})&&L(s,null)),l=requestAnimationFrame(I)}function v(Y){var G;const{nodeLookup:F,multiSelectionActive:Q,nodesDraggable:X,transform:_,snapGrid:w,snapToGrid:S,selectNodesOnDrag:P,onNodeDragStart:O,onSelectionDragStart:D,unselectNodesAndEdges:W}=e();h=!0,(!P||!k)&&!Q&&M&&((G=F.get(M))!=null&&G.selected||W()),k&&P&&M&&(t==null||t(M));const q=Xt(Y.sourceEvent,{transform:_,snapGrid:w,snapToGrid:S});if(s=q,r=xl(F,X,q,M),r.size>0&&(n||O||!M&&D)){const[V,x]=Mn({nodeId:M,dragItems:r,nodeLookup:F});n==null||n(Y.sourceEvent,r,V,x),O==null||O(Y.sourceEvent,V,x),M||D==null||D(Y.sourceEvent,x)}}const H=xi().clickDistance(B).on("start",Y=>{const{domNode:F,nodeDragThreshold:Q,transform:X,snapGrid:_,snapToGrid:w}=e();c=!1,Q===0&&v(Y),s=Xt(Y.sourceEvent,{transform:X,snapGrid:_,snapToGrid:w}),f=(F==null?void 0:F.getBoundingClientRect())||null,u=ft(Y.sourceEvent,f)}).on("drag",Y=>{const{autoPanOnNodeDrag:F,transform:Q,snapGrid:X,snapToGrid:_,nodeDragThreshold:w}=e(),S=Xt(Y.sourceEvent,{transform:Q,snapGrid:X,snapToGrid:_});if(Y.sourceEvent.type==="touchmove"&&Y.sourceEvent.touches.length>1&&(c=!0),!c){if(!a&&F&&h&&(a=!0,I()),!h){const P=S.xSnapped-(s.x??0),O=S.ySnapped-(s.y??0);Math.sqrt(P*P+O*O)>w&&v(Y)}(s.x!==S.xSnapped||s.y!==S.ySnapped)&&r&&h&&(u=ft(Y.sourceEvent,f),L(S,Y.sourceEvent))}}).on("end",Y=>{if(!(!h||c)&&(a=!1,h=!1,cancelAnimationFrame(l),r.size>0)){const{nodeLookup:F,updateNodePositions:Q,onNodeDragStop:X,onSelectionDragStop:_}=e();if(Q(r,!1),o||X||!M&&_){const[w,S]=Mn({nodeId:M,dragItems:r,nodeLookup:F,dragging:!1});o==null||o(Y.sourceEvent,r,w,S),X==null||X(Y.sourceEvent,w,S),M||_==null||_(Y.sourceEvent,S)}}}).filter(Y=>{const F=Y.target;return!Y.button&&(!y||!hi(F,`.${y}`,E))&&(!g||hi(F,g,E))});d.call(H)}function m(){d==null||d.on(".drag",null)}return{update:b,destroy:m}}function zn(t,e,n,i){let o=null;return[(e[n]||[]).reduce((l,r)=>{if(t.id===i.nodeId&&n===i.handleType&&r.id===i.handleId)o=r;else{const a=rn(t,r,r.position,!0);l.push({...r,...a})}return l},[]),o]}function es(t,e,n){let i=[],o=1/0;for(const s of n.values()){const l=Math.sqrt(Math.pow(s.x-t.x,2)+Math.pow(s.y-t.y,2));l<=e&&(l<o?i=[s]:l===o&&i.push(s),o=l)}return i.length?i.length===1?i[0]:i.find(s=>s.type==="target")||i[0]:null}function ts({nodeLookup:t,nodeId:e,handleId:n,handleType:i}){const o=new Map,s={nodeId:e,handleId:n,handleType:i};let l=null;for(const r of t.values())if(r.internals.handleBounds){const[a,u]=zn(r,r.internals.handleBounds,"source",s),[f,h]=zn(r,r.internals.handleBounds,"target",s);l=l||(u??h),[...a,...f].forEach(d=>o.set(`${d.nodeId}-${d.type}-${d.id}`,d))}if(!l){const r=t.get(e);if(r!=null&&r.internals.handleBounds){s.handleType=i==="source"?"target":"source";const[,a]=zn(r,r.internals.handleBounds,s.handleType,s);l=a}}return[o,l]}function _o(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function ns(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const ko=()=>!0;function is(t,{connectionMode:e,connectionRadius:n,handleId:i,nodeId:o,edgeUpdaterType:s,isTarget:l,domNode:r,nodeLookup:a,lib:u,autoPanOnConnect:f,flowId:h,panBy:d,cancelConnection:c,onConnectStart:b,onConnect:m,onConnectEnd:y,isValidConnection:g=ko,onReconnectEnd:E,updateConnection:k,getTransform:M,getFromHandle:B,autoPanSpeed:L}){const I=Nl(t.target);let v=0,H;const{x:Y,y:F}=ft(t),Q=I==null?void 0:I.elementFromPoint(Y,F),X=_o(s,Q),_=r==null?void 0:r.getBoundingClientRect();if(!_||!X)return;let w=ft(t,_),S=!1,P=null,O=!1,D=null;const[W,q]=ts({nodeLookup:a,nodeId:o,handleId:i,handleType:X});function G(){if(!f||!_)return;const[ie,ye]=no(w,_,L);d({x:ie,y:ye}),v=requestAnimationFrame(G)}const V={...q,nodeId:o,type:X,position:q.position},x=a.get(o),me={inProgress:!0,isValid:null,from:rn(x,V,ce.Left,!0),fromHandle:V,fromPosition:V.position,fromNode:x,to:w,toHandle:null,toPosition:$n[V.position],toNode:null};k(me);let T=me;b==null||b(t,{nodeId:o,handleId:i,handleType:X});function ne(ie){if(!B()||!V){fe(ie);return}const ye=M();w=ft(ie,_),H=es(gn(w,ye,!1,[1,1]),n,W),S||(G(),S=!0);const _e=wo(ie,{handle:H,connectionMode:e,fromNodeId:o,fromHandleId:i,fromType:l?"target":"source",isValidConnection:g,doc:I,lib:u,flowId:h,handleLookup:W});D=_e.handleDomNode,P=_e.connection,O=ns(!!H,_e.isValid);const we={...T,isValid:O,to:H&&O?Il({x:H.x,y:H.y},ye):w,toHandle:_e.toHandle,toPosition:O&&_e.toHandle?_e.toHandle.position:$n[V.position],toNode:_e.toHandle?a.get(_e.toHandle.nodeId):null};O&&H&&T.toHandle&&we.toHandle&&T.toHandle.type===we.toHandle.type&&T.toHandle.nodeId===we.toHandle.nodeId&&T.toHandle.id===we.toHandle.id||(k(we),T=we)}function fe(ie){(H||D)&&P&&O&&(m==null||m(P)),y==null||y(ie),s&&(E==null||E(ie)),c(),cancelAnimationFrame(v),S=!1,O=!1,P=null,D=null,I.removeEventListener("mousemove",ne),I.removeEventListener("mouseup",fe),I.removeEventListener("touchmove",ne),I.removeEventListener("touchend",fe)}I.addEventListener("mousemove",ne),I.addEventListener("mouseup",fe),I.addEventListener("touchmove",ne),I.addEventListener("touchend",fe)}function wo(t,{handle:e,connectionMode:n,fromNodeId:i,fromHandleId:o,fromType:s,doc:l,lib:r,flowId:a,isValidConnection:u=ko,handleLookup:f}){const h=s==="target",d=e?l.querySelector(`.${r}-flow__handle[data-id="${a}-${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`):null,{x:c,y:b}=ft(t),m=l.elementFromPoint(c,b),y=m!=null&&m.classList.contains(`${r}-flow__handle`)?m:d,g={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){const E=_o(void 0,y),k=y.getAttribute("data-nodeid"),M=y.getAttribute("data-handleid"),B=y.classList.contains("connectable"),L=y.classList.contains("connectableend");if(!k)return g;const I={source:h?k:i,sourceHandle:h?M:o,target:h?i:k,targetHandle:h?o:M};g.connection=I;const H=B&&L&&(n===St.Strict?h&&E==="source"||!h&&E==="target":k!==i||M!==o);g.isValid=H&&u(I);const Y=f==null?void 0:f.get(`${k}-${E}-${M}`);Y&&(g.toHandle={...Y})}return g}const os={onPointerDown:is,isValid:wo};function ls({domNode:t,panZoom:e,getTransform:n,getViewScale:i}){const o=Qe(t);function s({translateExtent:r,width:a,height:u,zoomStep:f=10,pannable:h=!0,zoomable:d=!0,inversePan:c=!1}){const b=k=>{const M=n();if(k.sourceEvent.type!=="wheel"||!e)return;const B=-k.sourceEvent.deltaY*(k.sourceEvent.deltaMode===1?.05:k.sourceEvent.deltaMode?1:.002)*f,L=M[2]*Math.pow(2,B);e.scaleTo(L)};let m=[0,0];const y=k=>{(k.sourceEvent.type==="mousedown"||k.sourceEvent.type==="touchstart")&&(m=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY])},g=k=>{const M=n();if(k.sourceEvent.type!=="mousemove"&&k.sourceEvent.type!=="touchmove"||!e)return;const B=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY],L=[B[0]-m[0],B[1]-m[1]];m=B;const I=i()*Math.max(M[2],Math.log(M[2]))*(c?-1:1),v={x:M[0]-L[0]*I,y:M[1]-L[1]*I},H=[[0,0],[a,u]];e.setViewportConstrained({x:v.x,y:v.y,zoom:M[2]},H,r)},E=$i().on("start",y).on("zoom",h?g:null).on("zoom.wheel",d?b:null);o.call(E,{})}function l(){o.on("zoom",null)}return{update:s,destroy:l,pointer:et}}const ss=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,bn=t=>({x:t.x,y:t.y,zoom:t.k}),Pn=({x:t,y:e,zoom:n})=>An.translate(t,e).scale(n),Dt=(t,e)=>t.target.closest(`.${e}`),So=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),On=(t,e=0,n=()=>{})=>{const i=typeof e=="number"&&e>0;return i||n(),i?t.transition().duration(e).on("end",n):t},Eo=t=>{const e=t.ctrlKey&&on()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function rs({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:i,panOnScrollMode:o,panOnScrollSpeed:s,zoomOnPinch:l,onPanZoomStart:r,onPanZoom:a,onPanZoomEnd:u}){return f=>{if(Dt(f,e))return!1;f.preventDefault(),f.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(f.ctrlKey&&l){const y=et(f),g=Eo(f),E=h*Math.pow(2,g);i.scaleTo(n,E,y,f);return}const d=f.deltaMode===1?20:1;let c=o===lt.Vertical?0:f.deltaX*d,b=o===lt.Horizontal?0:f.deltaY*d;!on()&&f.shiftKey&&o!==lt.Vertical&&(c=f.deltaY*d,b=0),i.translateBy(n,-(c/h)*s,-(b/h)*s,{internal:!0});const m=bn(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,r==null||r(f,m)),t.isPanScrolling&&(a==null||a(f,m),t.panScrollTimeout=setTimeout(()=>{u==null||u(f,m),t.isPanScrolling=!1},150))}}function as({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(i,o){if(!e&&i.type==="wheel"&&!i.ctrlKey||Dt(i,t))return null;i.preventDefault(),n.call(this,i,o)}}function us({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return i=>{var s,l,r;if((s=i.sourceEvent)!=null&&s.internal)return;const o=bn(i.transform);t.mouseButton=((l=i.sourceEvent)==null?void 0:l.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=o,((r=i.sourceEvent)==null?void 0:r.type)==="mousedown"&&e(!0),n&&(n==null||n(i.sourceEvent,o))}}function fs({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:i,onPanZoom:o}){return s=>{var l,r;t.usedRightMouseButton=!!(n&&So(e,t.mouseButton??0)),(l=s.sourceEvent)!=null&&l.sync||i([s.transform.x,s.transform.y,s.transform.k]),o&&!((r=s.sourceEvent)!=null&&r.internal)&&(o==null||o(s.sourceEvent,bn(s.transform)))}}function cs({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:o,onPaneContextMenu:s}){return l=>{var r;if(!((r=l.sourceEvent)!=null&&r.internal)&&(t.isZoomingOrPanning=!1,s&&So(e,t.mouseButton??0)&&!t.usedRightMouseButton&&l.sourceEvent&&s(l.sourceEvent),t.usedRightMouseButton=!1,i(!1),o&&ss(t.prevViewport,l.transform))){const a=bn(l.transform);t.prevViewport=a,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{o==null||o(l.sourceEvent,a)},n?150:0)}}}function ds({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:i,panOnScroll:o,zoomOnDoubleClick:s,userSelectionActive:l,noWheelClassName:r,noPanClassName:a,lib:u}){return f=>{var b;const h=t||e,d=n&&f.ctrlKey;if(f.button===1&&f.type==="mousedown"&&(Dt(f,`${u}-flow__node`)||Dt(f,`${u}-flow__edge`)))return!0;if(!i&&!h&&!o&&!s&&!n||l||Dt(f,r)&&f.type==="wheel"||Dt(f,a)&&(f.type!=="wheel"||o&&f.type==="wheel"&&!t)||!n&&f.ctrlKey&&f.type==="wheel")return!1;if(!n&&f.type==="touchstart"&&((b=f.touches)==null?void 0:b.length)>1)return f.preventDefault(),!1;if(!h&&!o&&!d&&f.type==="wheel"||!i&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(i)&&!i.includes(f.button)&&f.type==="mousedown")return!1;const c=Array.isArray(i)&&i.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||f.type==="wheel")&&c}}function hs({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:i,translateExtent:o,viewport:s,onPanZoom:l,onPanZoomStart:r,onPanZoomEnd:a,onTransformChange:u,onDraggingChange:f}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=t.getBoundingClientRect(),c=$i().clickDistance(!tt(i)||i<0?0:i).scaleExtent([e,n]).translateExtent(o),b=Qe(t).call(c);M({x:s.x,y:s.y,zoom:Vt(s.zoom,e,n)},[[0,0],[d.width,d.height]],o);const m=b.on("wheel.zoom"),y=b.on("dblclick.zoom");c.wheelDelta(Eo);function g(X,_){return b?new Promise(w=>{c==null||c.transform(On(b,_==null?void 0:_.duration,()=>w(!0)),X)}):Promise.resolve(!1)}function E({noWheelClassName:X,noPanClassName:_,onPaneContextMenu:w,userSelectionActive:S,panOnScroll:P,panOnDrag:O,panOnScrollMode:D,panOnScrollSpeed:W,preventScrolling:q,zoomOnPinch:G,zoomOnScroll:V,zoomOnDoubleClick:x,zoomActivationKeyPressed:ee,lib:me}){S&&!h.isZoomingOrPanning&&k();const ne=P&&!ee&&!S?rs({zoomPanValues:h,noWheelClassName:X,d3Selection:b,d3Zoom:c,panOnScrollMode:D,panOnScrollSpeed:W,zoomOnPinch:G,onPanZoomStart:r,onPanZoom:l,onPanZoomEnd:a}):as({noWheelClassName:X,preventScrolling:q,d3ZoomHandler:m});if(b.on("wheel.zoom",ne,{passive:!1}),!S){const ie=us({zoomPanValues:h,onDraggingChange:f,onPanZoomStart:r});c.on("start",ie);const ye=fs({zoomPanValues:h,panOnDrag:O,onPaneContextMenu:!!w,onPanZoom:l,onTransformChange:u});c.on("zoom",ye);const _e=cs({zoomPanValues:h,panOnDrag:O,panOnScroll:P,onPaneContextMenu:w,onPanZoomEnd:a,onDraggingChange:f});c.on("end",_e)}const fe=ds({zoomActivationKeyPressed:ee,panOnDrag:O,zoomOnScroll:V,panOnScroll:P,zoomOnDoubleClick:x,zoomOnPinch:G,userSelectionActive:S,noPanClassName:_,noWheelClassName:X,lib:me});c.filter(fe),x?b.on("dblclick.zoom",y):b.on("dblclick.zoom",null)}function k(){c.on("zoom",null)}async function M(X,_,w){const S=Pn(X),P=c==null?void 0:c.constrain()(S,_,w);return P&&await g(P),new Promise(O=>O(P))}async function B(X,_){const w=Pn(X);return await g(w,_),new Promise(S=>S(w))}function L(X){if(b){const _=Pn(X),w=b.property("__zoom");(w.k!==X.zoom||w.x!==X.x||w.y!==X.y)&&(c==null||c.transform(b,_,null,{sync:!0}))}}function I(){const X=b?al(b.node()):{x:0,y:0,k:1};return{x:X.x,y:X.y,zoom:X.k}}function v(X,_){return b?new Promise(w=>{c==null||c.scaleTo(On(b,_==null?void 0:_.duration,()=>w(!0)),X)}):Promise.resolve(!1)}function H(X,_){return b?new Promise(w=>{c==null||c.scaleBy(On(b,_==null?void 0:_.duration,()=>w(!0)),X)}):Promise.resolve(!1)}function Y(X){c==null||c.scaleExtent(X)}function F(X){c==null||c.translateExtent(X)}function Q(X){const _=!tt(X)||X<0?0:X;c==null||c.clickDistance(_)}return{update:E,destroy:k,setViewport:B,setViewportConstrained:M,getViewport:I,scaleTo:v,scaleBy:H,setScaleExtent:Y,setTranslateExtent:F,syncViewport:L,setClickDistance:Q}}var gi;(function(t){t.Line="line",t.Handle="handle"})(gi||(gi={}));const Pu=["top-left","top-right","bottom-left","bottom-right"],Ou=["top","right","bottom","left"];function gs({width:t,prevWidth:e,height:n,prevHeight:i,affectsX:o,affectsY:s}){const l=t-e,r=n-i,a=[l>0?1:l<0?-1:0,r>0?1:r<0?-1:0];return l&&o&&(a[0]=a[0]*-1),r&&s&&(a[1]=a[1]*-1),a}function ms(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),i=t.includes("left"),o=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:i,affectsY:o}}function mt(t,e){return Math.max(0,e-t)}function bt(t,e){return Math.max(0,t-e)}function pt(t,e,n){return Math.max(0,e-t,t-n)}function mi(t,e){return t?!e:e}function bs(t,e,n,i,o,s,l,r){let{affectsX:a,affectsY:u}=e;const{isHorizontal:f,isVertical:h}=e,d=f&&h,{xSnapped:c,ySnapped:b}=n,{minWidth:m,maxWidth:y,minHeight:g,maxHeight:E}=i,{x:k,y:M,width:B,height:L,aspectRatio:I}=t;let v=Math.floor(f?c-t.pointerX:0),H=Math.floor(h?b-t.pointerY:0);const Y=B+(a?-v:v),F=L+(u?-H:H),Q=-s[0]*B,X=-s[1]*L;let _=pt(Y,m,y),w=pt(F,g,E);if(l){let O=0,D=0;a&&v<0?O=mt(k+v+Q,l[0][0]):!a&&v>0&&(O=bt(k+Y+Q,l[1][0])),u&&H<0?D=mt(M+H+X,l[0][1]):!u&&H>0&&(D=bt(M+F+X,l[1][1])),_=Math.max(_,O),w=Math.max(w,D)}if(r){let O=0,D=0;a&&v>0?O=bt(k+v,r[0][0]):!a&&v<0&&(O=mt(k+Y,r[1][0])),u&&H>0?D=bt(M+H,r[0][1]):!u&&H<0&&(D=mt(M+F,r[1][1])),_=Math.max(_,O),w=Math.max(w,D)}if(o){if(f){const O=pt(Y/I,g,E)*I;if(_=Math.max(_,O),l){let D=0;!a&&!u||a&&!u&&d?D=bt(M+X+Y/I,l[1][1])*I:D=mt(M+X+(a?v:-v)/I,l[0][1])*I,_=Math.max(_,D)}if(r){let D=0;!a&&!u||a&&!u&&d?D=mt(M+Y/I,r[1][1])*I:D=bt(M+(a?v:-v)/I,r[0][1])*I,_=Math.max(_,D)}}if(h){const O=pt(F*I,m,y)/I;if(w=Math.max(w,O),l){let D=0;!a&&!u||u&&!a&&d?D=bt(k+F*I+Q,l[1][0])/I:D=mt(k+(u?H:-H)*I+Q,l[0][0])/I,w=Math.max(w,D)}if(r){let D=0;!a&&!u||u&&!a&&d?D=mt(k+F*I,r[1][0])/I:D=bt(k+(u?H:-H)*I,r[0][0])/I,w=Math.max(w,D)}}}H=H+(H<0?w:-w),v=v+(v<0?_:-_),o&&(d?Y>F*I?H=(mi(a,u)?-v:v)/I:v=(mi(a,u)?-H:H)*I:f?(H=v/I,u=a):(v=H*I,a=u));const S=a?k+v:k,P=u?M+H:M;return{width:B+(a?-v:v),height:L+(u?-H:H),x:s[0]*v*(a?-1:1)+S,y:s[1]*H*(u?-1:1)+P}}const Co={width:0,height:0,x:0,y:0},ys={...Co,pointerX:0,pointerY:0,aspectRatio:1};function _s(t){return[[0,0],[t.measured.width,t.measured.height]]}function ks(t,e,n){const i=e.position.x+t.position.x,o=e.position.y+t.position.y,s=t.measured.width??0,l=t.measured.height??0,r=n[0]*s,a=n[1]*l;return[[i-r,o-a],[i+s-r,o+l-a]]}function Du({domNode:t,nodeId:e,getStoreItems:n,onChange:i,onEnd:o}){const s=Qe(t);function l({controlPosition:a,boundaries:u,keepAspectRatio:f,onResizeStart:h,onResize:d,onResizeEnd:c,shouldResize:b}){let m={...Co},y={...ys};const g=ms(a);let E,k=[],M,B,L;const I=xi().on("start",v=>{const{nodeLookup:H,transform:Y,snapGrid:F,snapToGrid:Q,nodeOrigin:X}=n();if(E=H.get(e),!E)return;const{xSnapped:_,ySnapped:w}=Xt(v.sourceEvent,{transform:Y,snapGrid:F,snapToGrid:Q});m={width:E.measured.width??0,height:E.measured.height??0,x:E.position.x??0,y:E.position.y??0},y={...m,pointerX:_,pointerY:w,aspectRatio:m.width/m.height},M=void 0,E.parentId&&(E.extent==="parent"||E.expandParent)&&(M=H.get(E.parentId),B=M&&E.extent==="parent"?_s(M):void 0),k=[],L=void 0;for(const[S,P]of H)if(P.parentId===e&&(k.push({id:S,position:{...P.position},extent:P.extent}),P.extent==="parent"||P.expandParent)){const O=ks(P,E,P.origin??X);L?L=[[Math.min(O[0][0],L[0][0]),Math.min(O[0][1],L[0][1])],[Math.max(O[1][0],L[1][0]),Math.max(O[1][1],L[1][1])]]:L=O}h==null||h(v,{...m})}).on("drag",v=>{const{transform:H,snapGrid:Y,snapToGrid:F,nodeOrigin:Q}=n(),X=Xt(v.sourceEvent,{transform:H,snapGrid:Y,snapToGrid:F}),_=[];if(!E)return;const{x:w,y:S,width:P,height:O}=m,D={},W=E.origin??Q,{width:q,height:G,x:V,y:x}=bs(y,g,X,u,f,W,B,L),ee=q!==P,me=G!==O,T=V!==w&&ee,ne=x!==S&&me;if(!T&&!ne&&!ee&&!me)return;if((T||ne||W[0]===1||W[1]===1)&&(D.x=T?V:m.x,D.y=ne?x:m.y,m.x=D.x,m.y=D.y,k.length>0)){const _e=V-w,we=x-S;for(const K of k)K.position={x:K.position.x-_e+W[0]*(q-P),y:K.position.y-we+W[1]*(G-O)},_.push(K)}if((ee||me)&&(D.width=ee?q:m.width,D.height=me?G:m.height,m.width=D.width,m.height=D.height),M&&E.expandParent){const _e=W[0]*(D.width??0);D.x&&D.x<_e&&(m.x=_e,y.x=y.x-(D.x-_e));const we=W[1]*(D.height??0);D.y&&D.y<we&&(m.y=we,y.y=y.y-(D.y-we))}const fe=gs({width:m.width,prevWidth:P,height:m.height,prevHeight:O,affectsX:g.affectsX,affectsY:g.affectsY}),ie={...m,direction:fe};(b==null?void 0:b(v,ie))!==!1&&(d==null||d(v,ie),i(D,_))}).on("end",v=>{c==null||c(v,{...m}),o==null||o()});s.call(I)}function r(){s.on(".drag",null)}return{update:l,destroy:r}}function ws(t){let e,n,i,o,s,l;const r=t[44].default,a=Ue(r,t,t[43],null);return{c(){e=Be("div"),a&&a.c(),this.h()},l(u){e=Le(u,"DIV",{"data-handleid":!0,"data-nodeid":!0,"data-handlepos":!0,"data-id":!0,class:!0,style:!0,role:!0,tabindex:!0});var f=le(e);a&&a.l(f),f.forEach(N),this.h()},h(){C(e,"data-handleid",t[7]),C(e,"data-nodeid",t[14]),C(e,"data-handlepos",t[3]),C(e,"data-id",n=t[13]+"-"+t[14]+"-"+(t[1]||null)+"-"+t[2]),C(e,"class",i=Pe(["svelte-flow__handle",`svelte-flow__handle-${t[3]}`,"nodrag","nopan",t[3],t[5]])),C(e,"style",t[4]),C(e,"role","button"),C(e,"tabindex","-1"),oe(e,"valid",t[8]),oe(e,"connectingto",t[6]),oe(e,"connectingfrom",t[10]),oe(e,"source",!t[12]),oe(e,"target",t[12]),oe(e,"connectablestart",t[0]),oe(e,"connectableend",t[0]),oe(e,"connectable",t[0]),oe(e,"connectionindicator",t[0]&&(!t[11]||t[9]))},m(u,f){p(u,e,f),a&&a.m(e,null),o=!0,s||(l=[De(e,"mousedown",t[32]),De(e,"touchstart",t[32])],s=!0)},p(u,f){a&&a.p&&(!o||f[1]&4096)&&qe(a,r,u,u[43],o?pe(r,u[43],f,null):je(u[43]),null),(!o||f[0]&128)&&C(e,"data-handleid",u[7]),(!o||f[0]&8)&&C(e,"data-handlepos",u[3]),(!o||f[0]&8198&&n!==(n=u[13]+"-"+u[14]+"-"+(u[1]||null)+"-"+u[2]))&&C(e,"data-id",n),(!o||f[0]&40&&i!==(i=Pe(["svelte-flow__handle",`svelte-flow__handle-${u[3]}`,"nodrag","nopan",u[3],u[5]])))&&C(e,"class",i),(!o||f[0]&16)&&C(e,"style",u[4]),(!o||f[0]&296)&&oe(e,"valid",u[8]),(!o||f[0]&104)&&oe(e,"connectingto",u[6]),(!o||f[0]&1064)&&oe(e,"connectingfrom",u[10]),(!o||f[0]&4136)&&oe(e,"source",!u[12]),(!o||f[0]&4136)&&oe(e,"target",u[12]),(!o||f[0]&41)&&oe(e,"connectablestart",u[0]),(!o||f[0]&41)&&oe(e,"connectableend",u[0]),(!o||f[0]&41)&&oe(e,"connectable",u[0]),(!o||f[0]&2601)&&oe(e,"connectionindicator",u[0]&&(!u[11]||u[9]))},i(u){o||(A(a,u),o=!0)},o(u){R(a,u),o=!1},d(u){u&&N(e),a&&a.d(u),s=!1,kt(l)}}}function Ss(t,e,n){let i,o,s,l,r,a,u,f,h,d,c,b,m,y,g,E,k,M,B,L,I,v,H,Y,{$$slots:F={},$$scope:Q}=e,{id:X=void 0}=e,{type:_="source"}=e,{position:w=ce.Top}=e,{style:S=void 0}=e,{isConnectable:P=void 0}=e,{isValidConnection:O=void 0}=e,{onconnect:D=void 0}=e,{ondisconnect:W=void 0}=e,{class:q=void 0}=e;const G=Qt("svelteflow__node_id"),V=Qt("svelteflow__node_connectable");U(t,V,J=>n(42,Y=J));const x=Ve(),{connectionMode:ee,domNode:me,nodeLookup:T,connectionRadius:ne,viewport:fe,isValidConnection:ie,lib:ye,addEdge:_e,onedgecreate:we,panBy:K,cancelConnection:Ie,updateConnection:Oe,autoPanOnConnect:st,edges:rt,connectionLookup:at,onconnect:Ke,onconnectstart:it,onconnectend:$,flowId:dt,connection:ht}=x;U(t,ee,J=>n(39,h=J)),U(t,me,J=>n(54,v=J)),U(t,T,J=>n(53,I=J)),U(t,ne,J=>n(55,H=J)),U(t,fe,J=>n(45,b=J)),U(t,ie,J=>n(50,k=J)),U(t,ye,J=>n(52,L=J)),U(t,we,J=>n(49,E=J)),U(t,st,J=>n(51,B=J)),U(t,rt,J=>n(41,c=J)),U(t,at,J=>n(40,d=J)),U(t,Ke,J=>n(48,g=J)),U(t,it,J=>n(47,y=J)),U(t,$,J=>n(46,m=J)),U(t,dt,J=>n(13,M=J)),U(t,ht,J=>n(38,f=J));function Z(J){const ut=ro(J);(ut&&J.button===0||!ut)&&os.onPointerDown(J,{handleId:o,nodeId:G,isTarget:i,connectionRadius:H,domNode:v,nodeLookup:I,connectionMode:h,lib:L,autoPanOnConnect:B,flowId:M,isValidConnection:O??k,updateConnection:Oe,cancelConnection:Ie,panBy:K,onConnect:Ge=>{const Je=E?E(Ge):Ge;Je&&(_e(Je),g==null||g(Ge))},onConnectStart:(Ge,Je)=>{y==null||y(Ge,{nodeId:Je.nodeId,handleId:Je.handleId,handleType:Je.handleType})},onConnectEnd:Ge=>{m==null||m(Ge)},getTransform:()=>[b.x,b.y,b.zoom],getFromHandle:()=>f.fromHandle})}let xe=null,Fe;return t.$$set=J=>{"id"in J&&n(1,X=J.id),"type"in J&&n(2,_=J.type),"position"in J&&n(3,w=J.position),"style"in J&&n(4,S=J.style),"isConnectable"in J&&n(0,P=J.isConnectable),"isValidConnection"in J&&n(33,O=J.isValidConnection),"onconnect"in J&&n(34,D=J.onconnect),"ondisconnect"in J&&n(35,W=J.ondisconnect),"class"in J&&n(5,q=J.class),"$$scope"in J&&n(43,Q=J.$$scope)},t.$$.update=()=>{var J,ut,Ge,Je,Et,Ct,Mt,zt,gt;if(t.$$.dirty[0]&4&&n(12,i=_==="target"),t.$$.dirty[0]&1|t.$$.dirty[1]&2048&&n(0,P=P!==void 0?P:Y),t.$$.dirty[0]&2&&n(7,o=X||null),t.$$.dirty[0]&6|t.$$.dirty[1]&1560&&(D||W)&&n(37,Fe=d.get(`${G}-${_}-${X||null}`)),t.$$.dirty[1]&120){if(xe&&!zl(Fe,xe)){const wt=Fe??new Map;ei(xe,wt,W),ei(wt,xe,D)}n(36,xe=Fe??new Map)}t.$$.dirty[1]&128&&n(11,s=!!f.fromHandle),t.$$.dirty[0]&132|t.$$.dirty[1]&128&&n(10,l=((J=f.fromHandle)==null?void 0:J.nodeId)===G&&((ut=f.fromHandle)==null?void 0:ut.type)===_&&((Ge=f.fromHandle)==null?void 0:Ge.id)===o),t.$$.dirty[0]&132|t.$$.dirty[1]&128&&n(6,r=((Je=f.toHandle)==null?void 0:Je.nodeId)===G&&((Et=f.toHandle)==null?void 0:Et.type)===_&&((Ct=f.toHandle)==null?void 0:Ct.id)===o),t.$$.dirty[0]&132|t.$$.dirty[1]&384&&n(9,a=h===St.Strict?((Mt=f.fromHandle)==null?void 0:Mt.type)!==_:G!==((zt=f.fromHandle)==null?void 0:zt.nodeId)||o!==((gt=f.fromHandle)==null?void 0:gt.id)),t.$$.dirty[0]&64|t.$$.dirty[1]&128&&n(8,u=r&&f.isValid)},[P,X,_,w,S,q,r,o,u,a,l,s,i,M,G,V,ee,me,T,ne,fe,ie,ye,we,st,rt,at,Ke,it,$,dt,ht,Z,O,D,W,xe,Fe,f,h,d,c,Y,Q,F]}class an extends he{constructor(e){super(),ge(this,e,Ss,ws,be,{id:1,type:2,position:3,style:4,isConnectable:0,isValidConnection:33,onconnect:34,ondisconnect:35,class:5},null,[-1,-1])}}function Es(t){var a;let e,n,i=((a=t[0])==null?void 0:a.label)+"",o,s,l,r;return e=new an({props:{type:"target",position:t[1]??ce.Top}}),l=new an({props:{type:"source",position:t[2]??ce.Bottom}}),{c(){re(e.$$.fragment),n=He(),o=Wt(i),s=He(),re(l.$$.fragment)},l(u){de(e.$$.fragment,u),n=ve(u),o=Bt(u,i),s=ve(u),de(l.$$.fragment,u)},m(u,f){ae(e,u,f),p(u,n,f),p(u,o,f),p(u,s,f),ae(l,u,f),r=!0},p(u,[f]){var c;const h={};f&2&&(h.position=u[1]??ce.Top),e.$set(h),(!r||f&1)&&i!==(i=((c=u[0])==null?void 0:c.label)+"")&&Lt(o,i);const d={};f&4&&(d.position=u[2]??ce.Bottom),l.$set(d)},i(u){r||(A(e.$$.fragment,u),A(l.$$.fragment,u),r=!0)},o(u){R(e.$$.fragment,u),R(l.$$.fragment,u),r=!1},d(u){u&&(N(n),N(o),N(s)),ue(e,u),ue(l,u)}}}function Cs(t,e,n){const i=["data","targetPosition","sourcePosition"];Te(e,i);let{data:o={label:"Node"}}=e,{targetPosition:s=void 0}=e,{sourcePosition:l=void 0}=e;return t.$$set=r=>{e=Me(Me({},e),nt(r)),n(3,Te(e,i)),"data"in r&&n(0,o=r.data),"targetPosition"in r&&n(1,s=r.targetPosition),"sourcePosition"in r&&n(2,l=r.sourcePosition)},[o,s,l]}class Mo extends he{constructor(e){super(),ge(this,e,Cs,Es,be,{data:0,targetPosition:1,sourcePosition:2})}}function Ms(t){var l;let e=((l=t[0])==null?void 0:l.label)+"",n,i,o,s;return o=new an({props:{type:"source",position:t[1]??ce.Bottom}}),{c(){n=Wt(e),i=He(),re(o.$$.fragment)},l(r){n=Bt(r,e),i=ve(r),de(o.$$.fragment,r)},m(r,a){p(r,n,a),p(r,i,a),ae(o,r,a),s=!0},p(r,[a]){var f;(!s||a&1)&&e!==(e=((f=r[0])==null?void 0:f.label)+"")&&Lt(n,e);const u={};a&2&&(u.position=r[1]??ce.Bottom),o.$set(u)},i(r){s||(A(o.$$.fragment,r),s=!0)},o(r){R(o.$$.fragment,r),s=!1},d(r){r&&(N(n),N(i)),ue(o,r)}}}function zs(t,e,n){const i=["data","sourcePosition"];Te(e,i);let{data:o={label:"Node"}}=e,{sourcePosition:s=void 0}=e;return t.$$set=l=>{e=Me(Me({},e),nt(l)),n(2,Te(e,i)),"data"in l&&n(0,o=l.data),"sourcePosition"in l&&n(1,s=l.sourcePosition)},[o,s]}class Ps extends he{constructor(e){super(),ge(this,e,zs,Ms,be,{data:0,sourcePosition:1})}}function Os(t){var l;let e=((l=t[0])==null?void 0:l.label)+"",n,i,o,s;return o=new an({props:{type:"target",position:t[1]??ce.Top}}),{c(){n=Wt(e),i=He(),re(o.$$.fragment)},l(r){n=Bt(r,e),i=ve(r),de(o.$$.fragment,r)},m(r,a){p(r,n,a),p(r,i,a),ae(o,r,a),s=!0},p(r,[a]){var f;(!s||a&1)&&e!==(e=((f=r[0])==null?void 0:f.label)+"")&&Lt(n,e);const u={};a&2&&(u.position=r[1]??ce.Top),o.$set(u)},i(r){s||(A(o.$$.fragment,r),s=!0)},o(r){R(o.$$.fragment,r),s=!1},d(r){r&&(N(n),N(i)),ue(o,r)}}}function Ds(t,e,n){const i=["data","targetPosition"];Te(e,i);let{data:o={label:"Node"}}=e,{targetPosition:s=void 0}=e;return t.$$set=l=>{e=Me(Me({},e),nt(l)),n(2,Te(e,i)),"data"in l&&n(0,o=l.data),"targetPosition"in l&&n(1,s=l.targetPosition)},[o,s]}class Hs extends he{constructor(e){super(),ge(this,e,Ds,Os,be,{data:0,targetPosition:1})}}function vs(t,e,n){const i=[];return Te(e,i),t.$$set=o=>{e=Me(Me({},e),nt(o)),n(0,Te(e,i))},[]}class Ts extends he{constructor(e){super(),ge(this,e,vs,null,be,{})}}function bi(t,e,n){if(!e)return;const i=n?e.querySelector(n):e;i&&i.appendChild(t)}function Is(t,{target:e,domNode:n}){return bi(t,n,e),{async update({target:i,domNode:o}){bi(t,o,i)},destroy(){t.parentNode&&t.parentNode.removeChild(t)}}}function Ns(t){let e,n,i,o,s;const l=t[3].default,r=Ue(l,t,t[2],null);return{c(){e=Be("div"),r&&r.c()},l(a){e=Le(a,"DIV",{});var u=le(e);r&&r.l(u),u.forEach(N)},m(a,u){p(a,e,u),r&&r.m(e,null),i=!0,o||(s=Ze(n=Is.call(null,e,{target:".svelte-flow__edgelabel-renderer",domNode:t[0]})),o=!0)},p(a,[u]){r&&r.p&&(!i||u&4)&&qe(r,l,a,a[2],i?pe(l,a[2],u,null):je(a[2]),null),n&&Ye(n.update)&&u&1&&n.update.call(null,{target:".svelte-flow__edgelabel-renderer",domNode:a[0]})},i(a){i||(A(r,a),i=!0)},o(a){R(r,a),i=!1},d(a){a&&N(e),r&&r.d(a),o=!1,s()}}}function Vs(t,e,n){let i,{$$slots:o={},$$scope:s}=e;const{domNode:l}=Ve();return U(t,l,r=>n(0,i=r)),t.$$set=r=>{"$$scope"in r&&n(2,s=r.$$scope)},[i,l,s,o]}class Ys extends he{constructor(e){super(),ge(this,e,Vs,Ns,be,{})}}function zo(){const{edgeLookup:t,selectionRect:e,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:o,unselectNodesAndEdges:s,elementsSelectable:l}=Ve();return r=>{const a=j(t).get(r);if(!a){console.warn("012",Kt.error012(r));return}(a.selectable||j(l)&&typeof a.selectable>"u")&&(e.set(null),n.set(null),a.selected?a.selected&&j(i)&&s({nodes:[],edges:[a]}):o([r]))}}function Xs(t){let e,n,i=`translate(-50%, -50%) translate(${t[1]}px,${t[2]}px)`,o,s,l;const r=t[5].default,a=Ue(r,t,t[7],null);return{c(){e=Be("div"),a&&a.c(),this.h()},l(u){e=Le(u,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var f=le(e);a&&a.l(f),f.forEach(N),this.h()},h(){C(e,"class","svelte-flow__edge-label"),C(e,"style",n="pointer-events: all;"+t[0]),C(e,"role","button"),C(e,"tabindex","-1"),se(e,"transform",i)},m(u,f){p(u,e,f),a&&a.m(e,null),o=!0,s||(l=[De(e,"keyup",Ws),De(e,"click",t[6])],s=!0)},p(u,f){a&&a.p&&(!o||f&128)&&qe(a,r,u,u[7],o?pe(r,u[7],f,null):je(u[7]),null),(!o||f&1&&n!==(n="pointer-events: all;"+u[0]))&&C(e,"style",n);const h=f&1;(f&7&&i!==(i=`translate(-50%, -50%) translate(${u[1]}px,${u[2]}px)`)||h)&&se(e,"transform",i)},i(u){o||(A(a,u),o=!0)},o(u){R(a,u),o=!1},d(u){u&&N(e),a&&a.d(u),s=!1,kt(l)}}}function As(t){let e,n;return e=new Ys({props:{$$slots:{default:[Xs]},$$scope:{ctx:t}}}),{c(){re(e.$$.fragment)},l(i){de(e.$$.fragment,i)},m(i,o){ae(e,i,o),n=!0},p(i,[o]){const s={};o&135&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}const Ws=()=>{};function Bs(t,e,n){let{$$slots:i={},$$scope:o}=e,{style:s=void 0}=e,{x:l=void 0}=e,{y:r=void 0}=e;const a=zo(),u=Qt("svelteflow__edge_id"),f=()=>{u&&a(u)};return t.$$set=h=>{"style"in h&&n(0,s=h.style),"x"in h&&n(1,l=h.x),"y"in h&&n(2,r=h.y),"$$scope"in h&&n(7,o=h.$$scope)},[s,l,r,a,u,i,f,o]}class Ls extends he{constructor(e){super(),ge(this,e,Bs,As,be,{style:0,x:1,y:2})}}function Ks(t){let e;return{c(){e=Ee("path"),this.h()},l(n){e=Ce(n,"path",{d:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,class:!0}),le(e).forEach(N),this.h()},h(){C(e,"d",t[1]),C(e,"stroke-opacity",0),C(e,"stroke-width",t[10]),C(e,"fill","none"),C(e,"class","svelte-flow__edge-interaction")},m(n,i){p(n,e,i)},p(n,i){i&2&&C(e,"d",n[1])},d(n){n&&N(e)}}}function yi(t){let e,n;return e=new Ls({props:{x:t[3],y:t[4],style:t[5],$$slots:{default:[Rs]},$$scope:{ctx:t}}}),{c(){re(e.$$.fragment)},l(i){de(e.$$.fragment,i)},m(i,o){ae(e,i,o),n=!0},p(i,o){const s={};o&8&&(s.x=i[3]),o&16&&(s.y=i[4]),o&32&&(s.style=i[5]),o&4100&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function Rs(t){let e;return{c(){e=Wt(t[2])},l(n){e=Bt(n,t[2])},m(n,i){p(n,e,i)},p(n,i){i&4&&Lt(e,n[2])},d(n){n&&N(e)}}}function Zs(t){let e,n,i,o,s,l,r=t[10]&&Ks(t),a=t[2]&&yi(t);return{c(){e=Ee("path"),i=He(),r&&r.c(),o=He(),a&&a.c(),s=ze(),this.h()},l(u){e=Ce(u,"path",{id:!0,d:!0,class:!0,"marker-start":!0,"marker-end":!0,fill:!0,style:!0}),le(e).forEach(N),i=ve(u),r&&r.l(u),o=ve(u),a&&a.l(u),s=ze(),this.h()},h(){C(e,"id",t[0]),C(e,"d",t[1]),C(e,"class",n=Pe(["svelte-flow__edge-path",t[9]])),C(e,"marker-start",t[6]),C(e,"marker-end",t[7]),C(e,"fill","none"),C(e,"style",t[8])},m(u,f){p(u,e,f),p(u,i,f),r&&r.m(u,f),p(u,o,f),a&&a.m(u,f),p(u,s,f),l=!0},p(u,[f]){(!l||f&1)&&C(e,"id",u[0]),(!l||f&2)&&C(e,"d",u[1]),(!l||f&512&&n!==(n=Pe(["svelte-flow__edge-path",u[9]])))&&C(e,"class",n),(!l||f&64)&&C(e,"marker-start",u[6]),(!l||f&128)&&C(e,"marker-end",u[7]),(!l||f&256)&&C(e,"style",u[8]),u[10]&&r.p(u,f),u[2]?a?(a.p(u,f),f&4&&A(a,1)):(a=yi(u),a.c(),A(a,1),a.m(s.parentNode,s)):a&&(Xe(),R(a,1,1,()=>{a=null}),Ae())},i(u){l||(A(a),l=!0)},o(u){R(a),l=!1},d(u){u&&(N(e),N(i),N(o),N(s)),r&&r.d(u),a&&a.d(u)}}}function Fs(t,e,n){let{id:i=void 0}=e,{path:o}=e,{label:s=void 0}=e,{labelX:l=void 0}=e,{labelY:r=void 0}=e,{labelStyle:a=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:f=void 0}=e,{style:h=void 0}=e,{interactionWidth:d=20}=e,{class:c=void 0}=e,b=d===void 0?20:d;return t.$$set=m=>{"id"in m&&n(0,i=m.id),"path"in m&&n(1,o=m.path),"label"in m&&n(2,s=m.label),"labelX"in m&&n(3,l=m.labelX),"labelY"in m&&n(4,r=m.labelY),"labelStyle"in m&&n(5,a=m.labelStyle),"markerStart"in m&&n(6,u=m.markerStart),"markerEnd"in m&&n(7,f=m.markerEnd),"style"in m&&n(8,h=m.style),"interactionWidth"in m&&n(11,d=m.interactionWidth),"class"in m&&n(9,c=m.class)},[i,o,s,l,r,a,u,f,h,c,b,d]}class yn extends he{constructor(e){super(),ge(this,e,Fs,Zs,be,{id:0,path:1,label:2,labelX:3,labelY:4,labelStyle:5,markerStart:6,markerEnd:7,style:8,interactionWidth:11,class:9})}}function Gs(t){let e,n;return e=new yn({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){re(e.$$.fragment)},l(i){de(e.$$.fragment,i)},m(i,o){ae(e,i,o),n=!0},p(i,[o]){const s={};o&256&&(s.path=i[8]),o&128&&(s.labelX=i[7]),o&64&&(s.labelY=i[6]),o&1&&(s.label=i[0]),o&2&&(s.labelStyle=i[1]),o&8&&(s.markerStart=i[3]),o&16&&(s.markerEnd=i[4]),o&32&&(s.interactionWidth=i[5]),o&4&&(s.style=i[2]),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function Us(t,e,n){let i,o,s;const l=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Te(e,l);let{label:r=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:h=void 0}=e,{interactionWidth:d=void 0}=e,{sourceX:c}=e,{sourceY:b}=e,{sourcePosition:m}=e,{targetX:y}=e,{targetY:g}=e,{targetPosition:E}=e;return t.$$set=k=>{e=Me(Me({},e),nt(k)),n(15,Te(e,l)),"label"in k&&n(0,r=k.label),"labelStyle"in k&&n(1,a=k.labelStyle),"style"in k&&n(2,u=k.style),"markerStart"in k&&n(3,f=k.markerStart),"markerEnd"in k&&n(4,h=k.markerEnd),"interactionWidth"in k&&n(5,d=k.interactionWidth),"sourceX"in k&&n(9,c=k.sourceX),"sourceY"in k&&n(10,b=k.sourceY),"sourcePosition"in k&&n(11,m=k.sourcePosition),"targetX"in k&&n(12,y=k.targetX),"targetY"in k&&n(13,g=k.targetY),"targetPosition"in k&&n(14,E=k.targetPosition)},t.$$.update=()=>{t.$$.dirty&32256&&n(8,[i,o,s]=ao({sourceX:c,sourceY:b,targetX:y,targetY:g,sourcePosition:m,targetPosition:E}),i,(n(7,o),n(9,c),n(10,b),n(12,y),n(13,g),n(11,m),n(14,E)),(n(6,s),n(9,c),n(10,b),n(12,y),n(13,g),n(11,m),n(14,E)))},[r,a,u,f,h,d,s,o,i,c,b,m,y,g,E]}class Po extends he{constructor(e){super(),ge(this,e,Us,Gs,be,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function qs(t){let e,n;return e=new yn({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){re(e.$$.fragment)},l(i){de(e.$$.fragment,i)},m(i,o){ae(e,i,o),n=!0},p(i,[o]){const s={};o&256&&(s.path=i[8]),o&128&&(s.labelX=i[7]),o&64&&(s.labelY=i[6]),o&1&&(s.label=i[0]),o&2&&(s.labelStyle=i[1]),o&8&&(s.markerStart=i[3]),o&16&&(s.markerEnd=i[4]),o&32&&(s.interactionWidth=i[5]),o&4&&(s.style=i[2]),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function js(t,e,n){let i,o,s;const l=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Te(e,l);let{label:r=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:h=void 0}=e,{interactionWidth:d=void 0}=e,{sourceX:c}=e,{sourceY:b}=e,{sourcePosition:m}=e,{targetX:y}=e,{targetY:g}=e,{targetPosition:E}=e;return t.$$set=k=>{e=Me(Me({},e),nt(k)),n(15,Te(e,l)),"label"in k&&n(0,r=k.label),"labelStyle"in k&&n(1,a=k.labelStyle),"style"in k&&n(2,u=k.style),"markerStart"in k&&n(3,f=k.markerStart),"markerEnd"in k&&n(4,h=k.markerEnd),"interactionWidth"in k&&n(5,d=k.interactionWidth),"sourceX"in k&&n(9,c=k.sourceX),"sourceY"in k&&n(10,b=k.sourceY),"sourcePosition"in k&&n(11,m=k.sourcePosition),"targetX"in k&&n(12,y=k.targetX),"targetY"in k&&n(13,g=k.targetY),"targetPosition"in k&&n(14,E=k.targetPosition)},t.$$.update=()=>{t.$$.dirty&32256&&n(8,[i,o,s]=sn({sourceX:c,sourceY:b,targetX:y,targetY:g,sourcePosition:m,targetPosition:E}),i,(n(7,o),n(9,c),n(10,b),n(12,y),n(13,g),n(11,m),n(14,E)),(n(6,s),n(9,c),n(10,b),n(12,y),n(13,g),n(11,m),n(14,E)))},[r,a,u,f,h,d,s,o,i,c,b,m,y,g,E]}class ps extends he{constructor(e){super(),ge(this,e,js,qs,be,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function Js(t){let e,n;return e=new yn({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){re(e.$$.fragment)},l(i){de(e.$$.fragment,i)},m(i,o){ae(e,i,o),n=!0},p(i,[o]){const s={};o&256&&(s.path=i[8]),o&128&&(s.labelX=i[7]),o&64&&(s.labelY=i[6]),o&1&&(s.label=i[0]),o&2&&(s.labelStyle=i[1]),o&8&&(s.markerStart=i[3]),o&16&&(s.markerEnd=i[4]),o&32&&(s.interactionWidth=i[5]),o&4&&(s.style=i[2]),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function Qs(t,e,n){let i,o,s;const l=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"];Te(e,l);let{label:r=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:h=void 0}=e,{interactionWidth:d=void 0}=e,{sourceX:c}=e,{sourceY:b}=e,{targetX:m}=e,{targetY:y}=e;return t.$$set=g=>{e=Me(Me({},e),nt(g)),n(13,Te(e,l)),"label"in g&&n(0,r=g.label),"labelStyle"in g&&n(1,a=g.labelStyle),"style"in g&&n(2,u=g.style),"markerStart"in g&&n(3,f=g.markerStart),"markerEnd"in g&&n(4,h=g.markerEnd),"interactionWidth"in g&&n(5,d=g.interactionWidth),"sourceX"in g&&n(9,c=g.sourceX),"sourceY"in g&&n(10,b=g.sourceY),"targetX"in g&&n(11,m=g.targetX),"targetY"in g&&n(12,y=g.targetY)},t.$$.update=()=>{t.$$.dirty&7680&&n(8,[i,o,s]=fo({sourceX:c,sourceY:b,targetX:m,targetY:y}),i,(n(7,o),n(9,c),n(10,b),n(11,m),n(12,y)),(n(6,s),n(9,c),n(10,b),n(11,m),n(12,y)))},[r,a,u,f,h,d,s,o,i,c,b,m,y]}class xs extends he{constructor(e){super(),ge(this,e,Qs,Js,be,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,targetX:11,targetY:12})}}function $s(t){let e,n;return e=new yn({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){re(e.$$.fragment)},l(i){de(e.$$.fragment,i)},m(i,o){ae(e,i,o),n=!0},p(i,[o]){const s={};o&256&&(s.path=i[8]),o&128&&(s.labelX=i[7]),o&64&&(s.labelY=i[6]),o&1&&(s.label=i[0]),o&2&&(s.labelStyle=i[1]),o&8&&(s.markerStart=i[3]),o&16&&(s.markerEnd=i[4]),o&32&&(s.interactionWidth=i[5]),o&4&&(s.style=i[2]),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function er(t,e,n){let i,o,s;const l=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Te(e,l);let{label:r=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:h=void 0}=e,{interactionWidth:d=void 0}=e,{sourceX:c}=e,{sourceY:b}=e,{sourcePosition:m}=e,{targetX:y}=e,{targetY:g}=e,{targetPosition:E}=e;return t.$$set=k=>{e=Me(Me({},e),nt(k)),n(15,Te(e,l)),"label"in k&&n(0,r=k.label),"labelStyle"in k&&n(1,a=k.labelStyle),"style"in k&&n(2,u=k.style),"markerStart"in k&&n(3,f=k.markerStart),"markerEnd"in k&&n(4,h=k.markerEnd),"interactionWidth"in k&&n(5,d=k.interactionWidth),"sourceX"in k&&n(9,c=k.sourceX),"sourceY"in k&&n(10,b=k.sourceY),"sourcePosition"in k&&n(11,m=k.sourcePosition),"targetX"in k&&n(12,y=k.targetX),"targetY"in k&&n(13,g=k.targetY),"targetPosition"in k&&n(14,E=k.targetPosition)},t.$$.update=()=>{t.$$.dirty&32256&&n(8,[i,o,s]=sn({sourceX:c,sourceY:b,targetX:y,targetY:g,sourcePosition:m,targetPosition:E,borderRadius:0}),i,(n(7,o),n(9,c),n(10,b),n(12,y),n(13,g),n(11,m),n(14,E)),(n(6,s),n(9,c),n(10,b),n(12,y),n(13,g),n(11,m),n(14,E)))},[r,a,u,f,h,d,s,o,i,c,b,m,y,g,E]}class tr extends he{constructor(e){super(),ge(this,e,er,$s,be,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function nr(t,e){const n=t.set,i=e.set,o=j(t),s=j(e);let r=o.length===0&&s.length>0?s:o;t.set(r);const a=u=>{const f=n(u);return r=f,i(r),f};t.set=e.set=a,t.update=e.update=u=>a(u(r))}function ir(t,e){const n=t.set,i=e.set;let o=j(e);t.set(o);const s=l=>{n(l),i(l),o=l};t.set=e.set=s,t.update=e.update=l=>s(l(o))}const or=(t,e,n)=>{if(!n)return;const i=j(t),o=e.set,s=n.set;let l=n?j(n):{x:0,y:0,zoom:1};e.set(l),e.set=r=>(o(r),s(r),l=r,r),n.set=r=>(i==null||i.syncViewport(r),o(r),s(r),l=r,r),e.update=r=>{e.set(r(l))},n.update=r=>{n.set(r(l))}},lr=(t,e,n,i=[0,0])=>{const{subscribe:o,set:s,update:l}=te([]);let r=t,a={},u=!0;const f=b=>(ho(b,e,n,{elevateNodesOnSelect:u,nodeOrigin:i,defaults:a,checkEquality:!1}),r=b,s(r),r),h=b=>f(b(r)),d=b=>{a=b},c=b=>{u=b.elevateNodesOnSelect??u};return f(r),{subscribe:o,set:f,update:h,setDefaultOptions:d,setOptions:c}},sr=(t,e,n,i)=>{const{subscribe:o,set:s,update:l}=te([]);let r=t,a={};const u=d=>{const c=a?d.map(b=>({...a,...b})):d;bo(e,n,c),r=c,s(r)},f=d=>u(d(r)),h=d=>{a=d};return u(r),{subscribe:o,set:u,update:f,setDefaultOptions:h}},Oo={input:Ps,output:Hs,default:Mo,group:Ts},Do={straight:xs,smoothstep:ps,default:Po,step:tr},rr=({nodes:t=[],edges:e=[],width:n,height:i,fitView:o,nodeOrigin:s})=>{const l=new Map,r=new Map,a=s??[0,0];ho(t,l,r,{nodeOrigin:a,elevateNodesOnSelect:!1,checkEquality:!1});const u=new Map,f=new Map;bo(u,f,e);let h={x:0,y:0,zoom:1};if(o&&n&&i){const d=Zt(l,{filter:c=>!!((c.width||c.initialWidth)&&(c.height||c.initialHeight))});h=lo(d,n,i,.5,2,.1)}return{flowId:te(null),nodes:lr(t,l,r,a),nodeLookup:$e(l),parentLookup:$e(r),edgeLookup:$e(f),visibleNodes:$e([]),edges:sr(e,u,f),visibleEdges:$e([]),connectionLookup:$e(u),height:te(500),width:te(500),minZoom:te(.5),maxZoom:te(2),nodeOrigin:te(a),nodeDragThreshold:te(1),nodeExtent:te(xn),translateExtent:te(xn),autoPanOnNodeDrag:te(!0),autoPanOnConnect:te(!0),fitViewOnInit:te(!1),fitViewOnInitDone:te(!1),fitViewOptions:te(void 0),panZoom:te(null),snapGrid:te(null),dragging:te(!1),selectionRect:te(null),selectionKeyPressed:te(!1),multiselectionKeyPressed:te(!1),deleteKeyPressed:te(!1),panActivationKeyPressed:te(!1),zoomActivationKeyPressed:te(!1),selectionRectMode:te(null),selectionMode:te(tn.Partial),nodeTypes:te(Oo),edgeTypes:te(Do),viewport:te(h),connectionMode:te(St.Strict),domNode:te(null),connection:$e(Tn),connectionLineType:te(Tt.Bezier),connectionRadius:te(20),isValidConnection:te(()=>!0),nodesDraggable:te(!0),nodesConnectable:te(!0),elementsSelectable:te(!0),selectNodesOnDrag:te(!0),markers:$e([]),defaultMarkerColor:te("#b1b1b7"),lib:$e("svelte"),onlyRenderVisibleElements:te(!1),onerror:te(Tl),ondelete:te(void 0),onedgecreate:te(void 0),onconnect:te(void 0),onconnectstart:te(void 0),onconnectend:te(void 0),onbeforedelete:te(void 0),nodesInitialized:te(!1),edgesInitialized:te(!1),viewportInitialized:te(!1),initialized:$e(!1)}};function ar(t){const e=Ht([t.edges,t.nodes,t.nodeLookup,t.onlyRenderVisibleElements,t.viewport,t.width,t.height],([n,,i,o,s,l,r])=>o&&l&&r?n.filter(u=>{const f=i.get(u.source),h=i.get(u.target);return f&&h&&Wl({sourceNode:f,targetNode:h,width:l,height:r,transform:[s.x,s.y,s.zoom]})}):n);return Ht([e,t.nodes,t.nodeLookup,t.connectionMode,t.onerror],([n,,i,o,s])=>n.reduce((r,a)=>{const u=i.get(a.source),f=i.get(a.target);if(!u||!f)return r;const h=Gl({id:a.id,sourceNode:u,targetNode:f,sourceHandle:a.sourceHandle||null,targetHandle:a.targetHandle||null,connectionMode:o,onError:s});return h&&r.push({...a,zIndex:Al({selected:a.selected,zIndex:a.zIndex,sourceNode:u,targetNode:f,elevateOnSelect:!1}),...h}),r},[]))}function ur(t){return Ht([t.nodeLookup,t.onlyRenderVisibleElements,t.width,t.height,t.viewport,t.nodes],([e,n,i,o,s])=>{const l=[s.x,s.y,s.zoom];return n?to(e,{x:0,y:0,width:i,height:o},l,!0):Array.from(e.values())})}const Rn=Symbol();function fr({nodes:t,edges:e,width:n,height:i,fitView:o,nodeOrigin:s}){const l=rr({nodes:t,edges:e,width:n,height:i,fitView:o,nodeOrigin:s});function r(w){l.nodeTypes.set({...Oo,...w})}function a(w){l.edgeTypes.set({...Do,...w})}function u(w){const S=j(l.edges);l.edges.set(Kl(w,S))}const f=(w,S=!1)=>{var O;const P=j(l.nodeLookup);for(const[D,W]of w){const q=(O=P.get(D))==null?void 0:O.internals.userNode;q&&(q.position=W.position,q.dragging=S)}l.nodes.update(D=>D)};function h(w){var D,W,q;const S=j(l.nodeLookup),{changes:P,updatedInternals:O}=Jl(w,S,j(l.parentLookup),j(l.domNode),j(l.nodeOrigin));if(O){if(!j(l.fitViewOnInitDone)&&j(l.fitViewOnInit)){const G=j(l.fitViewOptions),V=c({...G,nodes:G==null?void 0:G.nodes});l.fitViewOnInitDone.set(V)}for(const G of P){const V=(D=S.get(G.id))==null?void 0:D.internals.userNode;if(V)switch(G.type){case"dimensions":{const x={...V.measured,...G.dimensions};G.setAttributes&&(V.width=((W=G.dimensions)==null?void 0:W.width)??V.width,V.height=((q=G.dimensions)==null?void 0:q.height)??V.height),V.measured=x;break}case"position":V.position=G.position??V.position;break}}l.nodes.update(G=>G),j(l.nodesInitialized)||l.nodesInitialized.set(!0)}}function d(w){const S=j(l.panZoom);if(!S)return Promise.resolve(!1);const P=ni(j(l.nodeLookup),w);return ii({nodes:P,width:j(l.width),height:j(l.height),minZoom:j(l.minZoom),maxZoom:j(l.maxZoom),panZoom:S},w)}function c(w){const S=j(l.panZoom);if(!S)return!1;const P=ni(j(l.nodeLookup),w);return ii({nodes:P,width:j(l.width),height:j(l.height),minZoom:j(l.minZoom),maxZoom:j(l.maxZoom),panZoom:S},w),P.size>0}function b(w,S){const P=j(l.panZoom);return P?P.scaleBy(w,S):Promise.resolve(!1)}function m(w){return b(1.2,w)}function y(w){return b(1/1.2,w)}function g(w){const S=j(l.panZoom);S&&(S.setScaleExtent([w,j(l.maxZoom)]),l.minZoom.set(w))}function E(w){const S=j(l.panZoom);S&&(S.setScaleExtent([j(l.minZoom),w]),l.maxZoom.set(w))}function k(w){const S=j(l.panZoom);S&&(S.setTranslateExtent(w),l.translateExtent.set(w))}function M(w){let S=!1;return w.forEach(P=>{P.selected&&(P.selected=!1,S=!0)}),S}function B(w){var S;(S=j(l.panZoom))==null||S.setClickDistance(w)}function L(w){M((w==null?void 0:w.nodes)||j(l.nodes))&&l.nodes.set(j(l.nodes)),M((w==null?void 0:w.edges)||j(l.edges))&&l.edges.set(j(l.edges))}l.deleteKeyPressed.subscribe(async w=>{var S;if(w){const P=j(l.nodes),O=j(l.edges),D=P.filter(V=>V.selected),W=O.filter(V=>V.selected),{nodes:q,edges:G}=await Hl({nodesToRemove:D,edgesToRemove:W,nodes:P,edges:O,onBeforeDelete:j(l.onbeforedelete)});(q.length||G.length)&&(l.nodes.update(V=>V.filter(x=>!q.some(ee=>ee.id===x.id))),l.edges.update(V=>V.filter(x=>!G.some(ee=>ee.id===x.id))),(S=j(l.ondelete))==null||S({nodes:q,edges:G}))}});function I(w){const S=j(l.multiselectionKeyPressed);l.nodes.update(P=>P.map(O=>{const D=w.includes(O.id),W=S&&O.selected||D;return O.selected=W,O})),S||l.edges.update(P=>P.map(O=>(O.selected=!1,O)))}function v(w){const S=j(l.multiselectionKeyPressed);l.edges.update(P=>P.map(O=>{const D=w.includes(O.id),W=S&&O.selected||D;return O.selected=W,O})),S||l.nodes.update(P=>P.map(O=>(O.selected=!1,O)))}function H(w){var P;const S=(P=j(l.nodes))==null?void 0:P.find(O=>O.id===w);if(!S){console.warn("012",Kt.error012(w));return}l.selectionRect.set(null),l.selectionRectMode.set(null),S.selected?S.selected&&j(l.multiselectionKeyPressed)&&L({nodes:[S],edges:[]}):I([w])}function Y(w){const S=j(l.viewport);return Ql({delta:w,panZoom:j(l.panZoom),transform:[S.x,S.y,S.zoom],translateExtent:j(l.translateExtent),width:j(l.width),height:j(l.height)})}const F=te(Tn),Q=w=>{F.set({...w})};function X(){F.set(Tn)}function _(){l.fitViewOnInitDone.set(!1),l.selectionRect.set(null),l.selectionRectMode.set(null),l.snapGrid.set(null),l.isValidConnection.set(()=>!0),L(),X()}return{...l,visibleEdges:ar(l),visibleNodes:ur(l),connection:Ht([F,l.viewport],([w,S])=>w.inProgress?{...w,to:gn(w.to,[S.x,S.y,S.zoom])}:{...w}),markers:Ht([l.edges,l.defaultMarkerColor,l.flowId],([w,S,P])=>Ul(w,{defaultColor:S,id:P})),initialized:(()=>{let w=!1;const S=j(l.nodes).length,P=j(l.edges).length;return Ht([l.nodesInitialized,l.edgesInitialized,l.viewportInitialized],([O,D,W])=>w||(S===0?w=W:P===0?w=W&&O:w=W&&O&&D,w))})(),syncNodeStores:w=>nr(l.nodes,w),syncEdgeStores:w=>ir(l.edges,w),syncViewport:w=>or(l.panZoom,l.viewport,w),setNodeTypes:r,setEdgeTypes:a,addEdge:u,updateNodePositions:f,updateNodeInternals:h,zoomIn:m,zoomOut:y,fitView:w=>d(w),setMinZoom:g,setMaxZoom:E,setTranslateExtent:k,setPaneClickDistance:B,unselectNodesAndEdges:L,addSelectedNodes:I,addSelectedEdges:v,handleNodeSelection:H,panBy:Y,updateConnection:Q,cancelConnection:X,reset:_}}function Ve(){const t=Qt(Rn);if(!t)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return t.getStore()}function cr({nodes:t,edges:e,width:n,height:i,fitView:o,nodeOrigin:s}){const l=fr({nodes:t,edges:e,width:n,height:i,fitView:o,nodeOrigin:s});return xt(Rn,{getStore:()=>l}),l}function dr(t,e){const{panZoom:n,minZoom:i,maxZoom:o,initialViewport:s,viewport:l,dragging:r,translateExtent:a,paneClickDistance:u}=e,f=hs({domNode:t,minZoom:i,maxZoom:o,translateExtent:a,viewport:s,paneClickDistance:u,onTransformChange:d=>l.set({x:d[0],y:d[1],zoom:d[2]}),onDraggingChange:r.set}),h=f.getViewport();return l.set(h),n.set(f),f.update(e),{update(d){f.update(d)}}}function hr(t){let e,n,i,o,s;const l=t[34].default,r=Ue(l,t,t[33],null);return{c(){e=Be("div"),r&&r.c(),this.h()},l(a){e=Le(a,"DIV",{class:!0});var u=le(e);r&&r.l(u),u.forEach(N),this.h()},h(){C(e,"class","svelte-flow__zoom svelte-4xkw84")},m(a,u){p(a,e,u),r&&r.m(e,null),i=!0,o||(s=Ze(n=dr.call(null,e,{viewport:t[18],minZoom:t[12],maxZoom:t[13],initialViewport:t[11],dragging:t[23],panZoom:t[19],onPanZoomStart:t[0],onPanZoom:t[1],onPanZoomEnd:t[2],zoomOnScroll:t[5],zoomOnDoubleClick:t[6],zoomOnPinch:t[7],panOnScroll:t[9],panOnDrag:t[10],panOnScrollSpeed:.5,panOnScrollMode:t[3]||lt.Free,zoomActivationKeyPressed:t[14],preventScrolling:typeof t[4]=="boolean"?t[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!t[15],translateExtent:t[16],lib:t[17],paneClickDistance:t[8]})),o=!0)},p(a,u){r&&r.p&&(!i||u[1]&4)&&qe(r,l,a,a[33],i?pe(l,a[33],u,null):je(a[33]),null),n&&Ye(n.update)&&u[0]&262143&&n.update.call(null,{viewport:a[18],minZoom:a[12],maxZoom:a[13],initialViewport:a[11],dragging:a[23],panZoom:a[19],onPanZoomStart:a[0],onPanZoom:a[1],onPanZoomEnd:a[2],zoomOnScroll:a[5],zoomOnDoubleClick:a[6],zoomOnPinch:a[7],panOnScroll:a[9],panOnDrag:a[10],panOnScrollSpeed:.5,panOnScrollMode:a[3]||lt.Free,zoomActivationKeyPressed:a[14],preventScrolling:typeof a[4]=="boolean"?a[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!a[15],translateExtent:a[16],lib:a[17],paneClickDistance:a[8]})},i(a){i||(A(r,a),i=!0)},o(a){R(r,a),i=!1},d(a){a&&N(e),r&&r.d(a),o=!1,s()}}}function gr(t,e,n){let i,o,s,l,r,a,u,f,h,d,c,{$$slots:b={},$$scope:m}=e,{initialViewport:y=void 0}=e,{onMoveStart:g=void 0}=e,{onMove:E=void 0}=e,{onMoveEnd:k=void 0}=e,{panOnScrollMode:M}=e,{preventScrolling:B}=e,{zoomOnScroll:L}=e,{zoomOnDoubleClick:I}=e,{zoomOnPinch:v}=e,{panOnDrag:H}=e,{panOnScroll:Y}=e,{paneClickDistance:F}=e;const{viewport:Q,panZoom:X,selectionRect:_,minZoom:w,maxZoom:S,dragging:P,translateExtent:O,lib:D,panActivationKeyPressed:W,zoomActivationKeyPressed:q,viewportInitialized:G}=Ve();return U(t,_,V=>n(15,h=V)),U(t,w,V=>n(12,a=V)),U(t,S,V=>n(13,u=V)),U(t,O,V=>n(16,d=V)),U(t,D,V=>n(17,c=V)),U(t,W,V=>n(32,r=V)),U(t,q,V=>n(14,f=V)),U(t,G,V=>n(35,l=V)),fn(()=>{$t(G,l=!0,l)}),t.$$set=V=>{"initialViewport"in V&&n(29,y=V.initialViewport),"onMoveStart"in V&&n(0,g=V.onMoveStart),"onMove"in V&&n(1,E=V.onMove),"onMoveEnd"in V&&n(2,k=V.onMoveEnd),"panOnScrollMode"in V&&n(3,M=V.panOnScrollMode),"preventScrolling"in V&&n(4,B=V.preventScrolling),"zoomOnScroll"in V&&n(5,L=V.zoomOnScroll),"zoomOnDoubleClick"in V&&n(6,I=V.zoomOnDoubleClick),"zoomOnPinch"in V&&n(7,v=V.zoomOnPinch),"panOnDrag"in V&&n(30,H=V.panOnDrag),"panOnScroll"in V&&n(31,Y=V.panOnScroll),"paneClickDistance"in V&&n(8,F=V.paneClickDistance),"$$scope"in V&&n(33,m=V.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&536870912&&n(11,i=y||{x:0,y:0,zoom:1}),t.$$.dirty[0]&1073741824|t.$$.dirty[1]&2&&n(10,o=r||H),t.$$.dirty[1]&3&&n(9,s=r||Y)},[g,E,k,M,B,L,I,v,F,s,o,i,a,u,f,h,d,c,Q,X,_,w,S,P,O,D,W,q,G,y,H,Y,r,m,b]}class mr extends he{constructor(e){super(),ge(this,e,gr,hr,be,{initialViewport:29,onMoveStart:0,onMove:1,onMoveEnd:2,panOnScrollMode:3,preventScrolling:4,zoomOnScroll:5,zoomOnDoubleClick:6,zoomOnPinch:7,panOnDrag:30,panOnScroll:31,paneClickDistance:8},null,[-1,-1])}}function br(t){let e,n,i,o;const s=t[28].default,l=Ue(s,t,t[27],null);return{c(){e=Be("div"),l&&l.c(),this.h()},l(r){e=Le(r,"DIV",{class:!0});var a=le(e);l&&l.l(a),a.forEach(N),this.h()},h(){C(e,"class","svelte-flow__pane svelte-1esy7hx"),oe(e,"draggable",t[0]),oe(e,"dragging",t[4]),oe(e,"selection",t[1])},m(r,a){p(r,e,a),l&&l.m(e,null),t[29](e),n=!0,i||(o=[De(e,"click",function(){Ye(t[3]?void 0:Jt(t[15],t[2]))&&(t[3]?void 0:Jt(t[15],t[2])).apply(this,arguments)}),De(e,"pointerdown",function(){Ye(t[3]?t[16]:void 0)&&(t[3]?t[16]:void 0).apply(this,arguments)}),De(e,"pointermove",function(){Ye(t[3]?t[17]:void 0)&&(t[3]?t[17]:void 0).apply(this,arguments)}),De(e,"pointerup",function(){Ye(t[3]?t[18]:void 0)&&(t[3]?t[18]:void 0).apply(this,arguments)}),De(e,"contextmenu",function(){Ye(Jt(t[19],t[2]))&&Jt(t[19],t[2]).apply(this,arguments)})],i=!0)},p(r,a){t=r,l&&l.p&&(!n||a[0]&134217728)&&qe(l,s,t,t[27],n?pe(s,t[27],a,null):je(t[27]),null),(!n||a[0]&1)&&oe(e,"draggable",t[0]),(!n||a[0]&16)&&oe(e,"dragging",t[4]),(!n||a[0]&2)&&oe(e,"selection",t[1])},i(r){n||(A(l,r),n=!0)},o(r){R(l,r),n=!1},d(r){r&&N(e),l&&l.d(r),t[29](null),i=!1,kt(o)}}}function Jt(t,e){return n=>{n.target===e&&(t==null||t(n))}}function _i(t){return e=>{const n=t.includes(e.id);return e.selected!==n&&(e.selected=n),e}}function yr(t,e,n){let i,o,s,l,r,a,u,f,h,d,c,b,m,{$$slots:y={},$$scope:g}=e,{panOnDrag:E=void 0}=e,{selectionOnDrag:k=void 0}=e;const M=cn(),{nodes:B,nodeLookup:L,edges:I,viewport:v,dragging:H,elementsSelectable:Y,selectionRect:F,selectionRectMode:Q,selectionKeyPressed:X,selectionMode:_,panActivationKeyPressed:w,unselectNodesAndEdges:S}=Ve();U(t,L,T=>n(36,h=T)),U(t,I,T=>n(33,a=T)),U(t,v,T=>n(35,f=T)),U(t,H,T=>n(4,m=T)),U(t,Y,T=>n(25,c=T)),U(t,F,T=>n(24,d=T)),U(t,Q,T=>n(23,r=T)),U(t,X,T=>n(22,l=T)),U(t,_,T=>n(34,u=T)),U(t,w,T=>n(26,b=T));let P,O=null,D=[],W=!1;function q(T){if(W){W=!1;return}M("paneclick",{event:T}),S(),Q.set(null)}function G(T){var ie,ye;if(O=P.getBoundingClientRect(),!Y||!o||T.button!==0||T.target!==P||!O)return;(ye=(ie=T.target)==null?void 0:ie.setPointerCapture)==null||ye.call(ie,T.pointerId);const{x:ne,y:fe}=ft(T,O);S(),F.set({width:0,height:0,startX:ne,startY:fe,x:ne,y:fe})}function V(T){if(!o||!O||!d)return;W=!0;const ne=ft(T,O),fe=d.startX??0,ie=d.startY??0,ye={...d,x:ne.x<fe?ne.x:fe,y:ne.y<ie?ne.y:ie,width:Math.abs(ne.x-fe),height:Math.abs(ne.y-ie)},_e=D.map(Oe=>Oe.id),we=In(D,a).map(Oe=>Oe.id);D=to(h,ye,[f.x,f.y,f.zoom],u===tn.Partial,!0);const K=In(D,a).map(Oe=>Oe.id),Ie=D.map(Oe=>Oe.id);(_e.length!==Ie.length||Ie.some(Oe=>!_e.includes(Oe)))&&B.update(Oe=>Oe.map(_i(Ie))),(we.length!==K.length||K.some(Oe=>!we.includes(Oe)))&&I.update(Oe=>Oe.map(_i(K))),Q.set("user"),F.set(ye)}function x(T){var ne,fe;T.button===0&&((fe=(ne=T.target)==null?void 0:ne.releasePointerCapture)==null||fe.call(ne,T.pointerId),!o&&r==="user"&&T.target===P&&(q==null||q(T)),F.set(null),D.length>0&&$t(Q,r="nodes",r),l&&(W=!1))}const ee=T=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){T.preventDefault();return}M("panecontextmenu",{event:T})};function me(T){Xn[T?"unshift":"push"](()=>{P=T,n(2,P)})}return t.$$set=T=>{"panOnDrag"in T&&n(0,E=T.panOnDrag),"selectionOnDrag"in T&&n(20,k=T.selectionOnDrag),"$$scope"in T&&n(27,g=T.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&67108865&&n(21,i=b||E),t.$$.dirty[0]&24117248&&n(1,o=l||d||k&&i!==!0),t.$$.dirty[0]&41943042&&n(3,s=c&&(o||r==="user"))},[E,o,P,s,m,L,I,v,H,Y,F,Q,X,_,w,q,G,V,x,ee,k,i,l,r,d,c,b,g,y,me]}class _r extends he{constructor(e){super(),ge(this,e,yr,br,be,{panOnDrag:0,selectionOnDrag:20},null,[-1,-1])}}function kr(t){let e,n;const i=t[3].default,o=Ue(i,t,t[2],null);return{c(){e=Be("div"),o&&o.c(),this.h()},l(s){e=Le(s,"DIV",{class:!0,style:!0});var l=le(e);o&&o.l(l),l.forEach(N),this.h()},h(){C(e,"class","svelte-flow__viewport xyflow__viewport svelte-1floaup"),se(e,"transform","translate("+t[0].x+"px, "+t[0].y+"px) scale("+t[0].zoom+")")},m(s,l){p(s,e,l),o&&o.m(e,null),n=!0},p(s,[l]){o&&o.p&&(!n||l&4)&&qe(o,i,s,s[2],n?pe(i,s[2],l,null):je(s[2]),null),(!n||l&1)&&se(e,"transform","translate("+s[0].x+"px, "+s[0].y+"px) scale("+s[0].zoom+")")},i(s){n||(A(o,s),n=!0)},o(s){R(o,s),n=!1},d(s){s&&N(e),o&&o.d(s)}}}function wr(t,e,n){let i,{$$slots:o={},$$scope:s}=e;const{viewport:l}=Ve();return U(t,l,r=>n(0,i=r)),t.$$set=r=>{"$$scope"in r&&n(2,s=r.$$scope)},[i,l,s,o]}class Sr extends he{constructor(e){super(),ge(this,e,wr,kr,be,{})}}function Ho(t,e){const{store:n,onDrag:i,onDragStart:o,onDragStop:s,onNodeMouseDown:l}=e,r=$l({onDrag:i,onDragStart:o,onDragStop:s,onNodeMouseDown:l,getStoreItems:()=>{const u=j(n.snapGrid),f=j(n.viewport);return{nodes:j(n.nodes),nodeLookup:j(n.nodeLookup),edges:j(n.edges),nodeExtent:j(n.nodeExtent),snapGrid:u||[0,0],snapToGrid:!!u,nodeOrigin:j(n.nodeOrigin),multiSelectionActive:j(n.multiselectionKeyPressed),domNode:j(n.domNode),transform:[f.x,f.y,f.zoom],autoPanOnNodeDrag:j(n.autoPanOnNodeDrag),nodesDraggable:j(n.nodesDraggable),selectNodesOnDrag:j(n.selectNodesOnDrag),nodeDragThreshold:j(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function a(u,f){if(f.disabled){r.destroy();return}r.update({domNode:u,noDragClassName:f.noDragClass,handleSelector:f.handleSelector,nodeId:f.nodeId,isSelectable:f.isSelectable,nodeClickDistance:f.nodeClickDistance})}return a(t,e),{update(u){a(t,u)},destroy(){r.destroy()}}}function Er({width:t,height:e,initialWidth:n,initialHeight:i,measuredWidth:o,measuredHeight:s}){if(o===void 0&&s===void 0){const l=t??n,r=e??i;return{width:l?`width:${l}px;`:"",height:r?`height:${r}px;`:""}}return{width:t?`width:${t}px;`:"",height:e?`height:${e}px;`:""}}function ki(t){let e,n,i,o,s,l=`translate(${t[12]}px, ${t[13]}px)`,r,a,u;var f=t[27];function h(d,c){return{props:{data:d[2],id:d[1],selected:d[3],selectable:d[5],deletable:d[7],sourcePosition:d[14],targetPosition:d[15],zIndex:d[16],dragging:d[9],draggable:d[4],dragHandle:d[19],parentId:d[21],type:d[25],isConnectable:d[28],positionAbsoluteX:d[12],positionAbsoluteY:d[13],width:d[17],height:d[18]}}}return f&&(n=en(f,h(t))),{c(){e=Be("div"),n&&re(n.$$.fragment),this.h()},l(d){e=Le(d,"DIV",{"data-id":!0,class:!0,style:!0});var c=le(e);n&&de(n.$$.fragment,c),c.forEach(N),this.h()},h(){C(e,"data-id",t[1]),C(e,"class",i=Pe(["svelte-flow__node",`svelte-flow__node-${t[25]}`,t[23]])),C(e,"style",o=(t[10]??"")+";"+t[26].width+t[26].height),oe(e,"dragging",t[9]),oe(e,"selected",t[3]),oe(e,"draggable",t[4]),oe(e,"connectable",t[6]),oe(e,"selectable",t[5]),oe(e,"nopan",t[4]),oe(e,"parent",t[11]),se(e,"z-index",t[16]),se(e,"transform",l),se(e,"visibility",t[20]?"visible":"hidden")},m(d,c){p(d,e,c),n&&ae(n,e,null),t[50](e),r=!0,a||(u=[Ze(s=Ho.call(null,e,{nodeId:t[1],isSelectable:t[5],disabled:!1,handleSelector:t[19],noDragClass:"nodrag",nodeClickDistance:t[22],onNodeMouseDown:t[31],onDrag:t[47],onDragStart:t[48],onDragStop:t[49],store:t[29]})),De(e,"click",t[34]),De(e,"mouseenter",t[51]),De(e,"mouseleave",t[52]),De(e,"mousemove",t[53]),De(e,"contextmenu",t[54])],a=!0)},p(d,c){if(c[0]&134217728&&f!==(f=d[27])){if(n){Xe();const m=n;R(m.$$.fragment,1,0,()=>{ue(m,1)}),Ae()}f?(n=en(f,h(d)),re(n.$$.fragment),A(n.$$.fragment,1),ae(n,e,null)):n=null}else if(f){const m={};c[0]&4&&(m.data=d[2]),c[0]&2&&(m.id=d[1]),c[0]&8&&(m.selected=d[3]),c[0]&32&&(m.selectable=d[5]),c[0]&128&&(m.deletable=d[7]),c[0]&16384&&(m.sourcePosition=d[14]),c[0]&32768&&(m.targetPosition=d[15]),c[0]&65536&&(m.zIndex=d[16]),c[0]&512&&(m.dragging=d[9]),c[0]&16&&(m.draggable=d[4]),c[0]&524288&&(m.dragHandle=d[19]),c[0]&2097152&&(m.parentId=d[21]),c[0]&33554432&&(m.type=d[25]),c[0]&268435456&&(m.isConnectable=d[28]),c[0]&4096&&(m.positionAbsoluteX=d[12]),c[0]&8192&&(m.positionAbsoluteY=d[13]),c[0]&131072&&(m.width=d[17]),c[0]&262144&&(m.height=d[18]),n.$set(m)}(!r||c[0]&2)&&C(e,"data-id",d[1]),(!r||c[0]&41943040&&i!==(i=Pe(["svelte-flow__node",`svelte-flow__node-${d[25]}`,d[23]])))&&C(e,"class",i),(!r||c[0]&67109888&&o!==(o=(d[10]??"")+";"+d[26].width+d[26].height))&&C(e,"style",o),s&&Ye(s.update)&&c[0]&4718626&&s.update.call(null,{nodeId:d[1],isSelectable:d[5],disabled:!1,handleSelector:d[19],noDragClass:"nodrag",nodeClickDistance:d[22],onNodeMouseDown:d[31],onDrag:d[47],onDragStart:d[48],onDragStop:d[49],store:d[29]}),(!r||c[0]&41943552)&&oe(e,"dragging",d[9]),(!r||c[0]&41943048)&&oe(e,"selected",d[3]),(!r||c[0]&41943056)&&oe(e,"draggable",d[4]),(!r||c[0]&41943104)&&oe(e,"connectable",d[6]),(!r||c[0]&41943072)&&oe(e,"selectable",d[5]),(!r||c[0]&41943056)&&oe(e,"nopan",d[4]),(!r||c[0]&41945088)&&oe(e,"parent",d[11]);const b=c[0]&67109888;(c[0]&67175424||b)&&se(e,"z-index",d[16]),(c[0]&67122176&&l!==(l=`translate(${d[12]}px, ${d[13]}px)`)||b)&&se(e,"transform",l),(c[0]&68158464||b)&&se(e,"visibility",d[20]?"visible":"hidden")},i(d){r||(n&&A(n.$$.fragment,d),r=!0)},o(d){n&&R(n.$$.fragment,d),r=!1},d(d){d&&N(e),n&&ue(n),t[50](null),a=!1,kt(u)}}}function Cr(t){let e,n,i=!t[8]&&ki(t);return{c(){i&&i.c(),e=ze()},l(o){i&&i.l(o),e=ze()},m(o,s){i&&i.m(o,s),p(o,e,s),n=!0},p(o,s){o[8]?i&&(Xe(),R(i,1,1,()=>{i=null}),Ae()):i?(i.p(o,s),s[0]&256&&A(i,1)):(i=ki(o),i.c(),A(i,1),i.m(e.parentNode,e))},i(o){n||(A(i),n=!0)},o(o){R(i),n=!1},d(o){o&&N(e),i&&i.d(o)}}}function Mr(t,e,n){let i,o,s,l,r,a,{node:u}=e,{id:f}=e,{data:h={}}=e,{selected:d=!1}=e,{draggable:c=void 0}=e,{selectable:b=void 0}=e,{connectable:m=!0}=e,{deletable:y=!0}=e,{hidden:g=!1}=e,{dragging:E=!1}=e,{resizeObserver:k=null}=e,{style:M=void 0}=e,{type:B="default"}=e,{isParent:L=!1}=e,{positionX:I}=e,{positionY:v}=e,{sourcePosition:H=void 0}=e,{targetPosition:Y=void 0}=e,{zIndex:F}=e,{measuredWidth:Q=void 0}=e,{measuredHeight:X=void 0}=e,{initialWidth:_=void 0}=e,{initialHeight:w=void 0}=e,{width:S=void 0}=e,{height:P=void 0}=e,{dragHandle:O=void 0}=e,{initialized:D=!1}=e,{parentId:W=void 0}=e,{nodeClickDistance:q=void 0}=e,{class:G=""}=e;const V=Ve(),{nodeTypes:x,nodeDragThreshold:ee,selectNodesOnDrag:me,handleNodeSelection:T,updateNodeInternals:ne}=V;U(t,x,Z=>n(46,r=Z));let fe,ie=null;const ye=cn(),_e=te(m);U(t,_e,Z=>n(28,a=Z));let we,K,Ie;xt("svelteflow__node_id",f),xt("svelteflow__node_connectable",_e),ji(()=>{ie&&(k==null||k.unobserve(ie))});function Oe(Z){b&&(!j(me)||!c||j(ee)>0)&&T(f),ye("nodeclick",{node:u.internals.userNode,event:Z})}const st=(Z,xe,Fe,J)=>{ye("nodedrag",{event:Z,targetNode:Fe,nodes:J})},rt=(Z,xe,Fe,J)=>{ye("nodedragstart",{event:Z,targetNode:Fe,nodes:J})},at=(Z,xe,Fe,J)=>{ye("nodedragstop",{event:Z,targetNode:Fe,nodes:J})};function Ke(Z){Xn[Z?"unshift":"push"](()=>{fe=Z,n(24,fe)})}const it=Z=>ye("nodemouseenter",{node:u,event:Z}),$=Z=>ye("nodemouseleave",{node:u,event:Z}),dt=Z=>ye("nodemousemove",{node:u,event:Z}),ht=Z=>ye("nodecontextmenu",{node:u,event:Z});return t.$$set=Z=>{"node"in Z&&n(0,u=Z.node),"id"in Z&&n(1,f=Z.id),"data"in Z&&n(2,h=Z.data),"selected"in Z&&n(3,d=Z.selected),"draggable"in Z&&n(4,c=Z.draggable),"selectable"in Z&&n(5,b=Z.selectable),"connectable"in Z&&n(6,m=Z.connectable),"deletable"in Z&&n(7,y=Z.deletable),"hidden"in Z&&n(8,g=Z.hidden),"dragging"in Z&&n(9,E=Z.dragging),"resizeObserver"in Z&&n(35,k=Z.resizeObserver),"style"in Z&&n(10,M=Z.style),"type"in Z&&n(36,B=Z.type),"isParent"in Z&&n(11,L=Z.isParent),"positionX"in Z&&n(12,I=Z.positionX),"positionY"in Z&&n(13,v=Z.positionY),"sourcePosition"in Z&&n(14,H=Z.sourcePosition),"targetPosition"in Z&&n(15,Y=Z.targetPosition),"zIndex"in Z&&n(16,F=Z.zIndex),"measuredWidth"in Z&&n(37,Q=Z.measuredWidth),"measuredHeight"in Z&&n(38,X=Z.measuredHeight),"initialWidth"in Z&&n(39,_=Z.initialWidth),"initialHeight"in Z&&n(40,w=Z.initialHeight),"width"in Z&&n(17,S=Z.width),"height"in Z&&n(18,P=Z.height),"dragHandle"in Z&&n(19,O=Z.dragHandle),"initialized"in Z&&n(20,D=Z.initialized),"parentId"in Z&&n(21,W=Z.parentId),"nodeClickDistance"in Z&&n(22,q=Z.nodeClickDistance),"class"in Z&&n(23,G=Z.class)},t.$$.update=()=>{t.$$.dirty[1]&32&&n(25,i=B||"default"),t.$$.dirty[0]&33554432|t.$$.dirty[1]&32768&&n(45,o=!!r[i]),t.$$.dirty[0]&33554432|t.$$.dirty[1]&32768&&n(27,s=r[i]||Mo),t.$$.dirty[1]&16416&&(o||console.warn("003",Kt.error003(B))),t.$$.dirty[0]&393216|t.$$.dirty[1]&960&&n(26,l=Er({width:S,height:P,initialWidth:_,initialHeight:w,measuredWidth:Q,measuredHeight:X})),t.$$.dirty[0]&64&&_e.set(!!m),t.$$.dirty[0]&50380802|t.$$.dirty[1]&14336&&((we&&i!==we||K&&H!==K||Ie&&Y!==Ie)&&requestAnimationFrame(()=>ne(new Map([[f,{id:f,nodeElement:fe,force:!0}]]))),n(42,we=i),n(43,K=H),n(44,Ie=Y)),t.$$.dirty[0]&17825792|t.$$.dirty[1]&1040&&k&&(fe!==ie||!D)&&(ie&&k.unobserve(ie),fe&&k.observe(fe),n(41,ie=fe))},[u,f,h,d,c,b,m,y,g,E,M,L,I,v,H,Y,F,S,P,O,D,W,q,G,fe,i,l,s,a,V,x,T,ye,_e,Oe,k,B,Q,X,_,w,ie,we,K,Ie,o,r,st,rt,at,Ke,it,$,dt,ht]}class zr extends he{constructor(e){super(),ge(this,e,Mr,Cr,qi,{node:0,id:1,data:2,selected:3,draggable:4,selectable:5,connectable:6,deletable:7,hidden:8,dragging:9,resizeObserver:35,style:10,type:36,isParent:11,positionX:12,positionY:13,sourcePosition:14,targetPosition:15,zIndex:16,measuredWidth:37,measuredHeight:38,initialWidth:39,initialHeight:40,width:17,height:18,dragHandle:19,initialized:20,parentId:21,nodeClickDistance:22,class:23},null,[-1,-1])}}const{Map:Pr}=rl;function wi(t,e,n){const i=t.slice();return i[21]=e[n],i}function Si(t,e){let n,i,o;return i=new zr({props:{node:e[21],id:e[21].id,data:e[21].data,selected:!!e[21].selected,hidden:!!e[21].hidden,draggable:!!(e[21].draggable||e[2]&&typeof e[21].draggable>"u"),selectable:!!(e[21].selectable||e[3]&&typeof e[21].selectable>"u"),connectable:!!(e[21].connectable||e[4]&&typeof e[21].connectable>"u"),deletable:e[21].deletable??!0,positionX:e[21].internals.positionAbsolute.x,positionY:e[21].internals.positionAbsolute.y,isParent:e[5].has(e[21].id),style:e[21].style,class:e[21].class,type:e[21].type??"default",sourcePosition:e[21].sourcePosition,targetPosition:e[21].targetPosition,dragging:e[21].dragging,zIndex:e[21].internals.z??0,dragHandle:e[21].dragHandle,initialized:ln(e[21]),width:e[21].width,height:e[21].height,initialWidth:e[21].initialWidth,initialHeight:e[21].initialHeight,measuredWidth:e[21].measured.width,measuredHeight:e[21].measured.height,parentId:e[21].parentId,resizeObserver:e[11],nodeClickDistance:e[0]}}),i.$on("nodeclick",e[12]),i.$on("nodemouseenter",e[13]),i.$on("nodemousemove",e[14]),i.$on("nodemouseleave",e[15]),i.$on("nodedrag",e[16]),i.$on("nodedragstart",e[17]),i.$on("nodedragstop",e[18]),i.$on("nodecontextmenu",e[19]),{key:t,first:null,c(){n=ze(),re(i.$$.fragment),this.h()},l(s){n=ze(),de(i.$$.fragment,s),this.h()},h(){this.first=n},m(s,l){p(s,n,l),ae(i,s,l),o=!0},p(s,l){e=s;const r={};l&2&&(r.node=e[21]),l&2&&(r.id=e[21].id),l&2&&(r.data=e[21].data),l&2&&(r.selected=!!e[21].selected),l&2&&(r.hidden=!!e[21].hidden),l&6&&(r.draggable=!!(e[21].draggable||e[2]&&typeof e[21].draggable>"u")),l&10&&(r.selectable=!!(e[21].selectable||e[3]&&typeof e[21].selectable>"u")),l&18&&(r.connectable=!!(e[21].connectable||e[4]&&typeof e[21].connectable>"u")),l&2&&(r.deletable=e[21].deletable??!0),l&2&&(r.positionX=e[21].internals.positionAbsolute.x),l&2&&(r.positionY=e[21].internals.positionAbsolute.y),l&34&&(r.isParent=e[5].has(e[21].id)),l&2&&(r.style=e[21].style),l&2&&(r.class=e[21].class),l&2&&(r.type=e[21].type??"default"),l&2&&(r.sourcePosition=e[21].sourcePosition),l&2&&(r.targetPosition=e[21].targetPosition),l&2&&(r.dragging=e[21].dragging),l&2&&(r.zIndex=e[21].internals.z??0),l&2&&(r.dragHandle=e[21].dragHandle),l&2&&(r.initialized=ln(e[21])),l&2&&(r.width=e[21].width),l&2&&(r.height=e[21].height),l&2&&(r.initialWidth=e[21].initialWidth),l&2&&(r.initialHeight=e[21].initialHeight),l&2&&(r.measuredWidth=e[21].measured.width),l&2&&(r.measuredHeight=e[21].measured.height),l&2&&(r.parentId=e[21].parentId),l&1&&(r.nodeClickDistance=e[0]),i.$set(r)},i(s){o||(A(i.$$.fragment,s),o=!0)},o(s){R(i.$$.fragment,s),o=!1},d(s){s&&N(n),ue(i,s)}}}function Or(t){let e,n=[],i=new Pr,o,s=_t(t[1]);const l=r=>r[21].id;for(let r=0;r<s.length;r+=1){let a=wi(t,s,r),u=l(a);i.set(u,n[r]=Si(u,a))}return{c(){e=Be("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=Le(r,"DIV",{class:!0});var a=le(e);for(let u=0;u<n.length;u+=1)n[u].l(a);a.forEach(N),this.h()},h(){C(e,"class","svelte-flow__nodes svelte-tf4uy4")},m(r,a){p(r,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);o=!0},p(r,[a]){a&2111&&(s=_t(r[1]),Xe(),n=dn(n,a,l,1,r,s,i,e,hn,Si,null,wi),Ae())},i(r){if(!o){for(let a=0;a<s.length;a+=1)A(n[a]);o=!0}},o(r){for(let a=0;a<n.length;a+=1)R(n[a]);o=!1},d(r){r&&N(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function Dr(t,e,n){let i,o,s,l,r,{nodeClickDistance:a=0}=e;const{visibleNodes:u,nodesDraggable:f,nodesConnectable:h,elementsSelectable:d,updateNodeInternals:c,parentLookup:b}=Ve();U(t,u,v=>n(1,i=v)),U(t,f,v=>n(2,o=v)),U(t,h,v=>n(4,l=v)),U(t,d,v=>n(3,s=v)),U(t,b,v=>n(5,r=v));const m=typeof ResizeObserver>"u"?null:new ResizeObserver(v=>{const H=new Map;v.forEach(Y=>{const F=Y.target.getAttribute("data-id");H.set(F,{id:F,nodeElement:Y.target,force:!0})}),c(H)});ji(()=>{m==null||m.disconnect()});function y(v){ke.call(this,t,v)}function g(v){ke.call(this,t,v)}function E(v){ke.call(this,t,v)}function k(v){ke.call(this,t,v)}function M(v){ke.call(this,t,v)}function B(v){ke.call(this,t,v)}function L(v){ke.call(this,t,v)}function I(v){ke.call(this,t,v)}return t.$$set=v=>{"nodeClickDistance"in v&&n(0,a=v.nodeClickDistance)},[a,i,o,s,l,r,u,f,h,d,b,m,y,g,E,k,M,B,L,I]}class Hr extends he{constructor(e){super(),ge(this,e,Dr,Or,be,{nodeClickDistance:0})}}function Ei(t){let e,n,i,o,s,l,r,a;var u=t[27];function f(h,d){return{props:{id:h[0],source:h[1],target:h[2],sourceX:h[14],sourceY:h[15],targetX:h[16],targetY:h[17],sourcePosition:h[18],targetPosition:h[19],animated:h[6],selected:h[7],label:h[10],labelStyle:h[11],data:h[3],style:h[4],interactionWidth:h[21],selectable:h[24],deletable:h[8]??!0,type:h[23],sourceHandleId:h[12],targetHandleId:h[13],markerStart:h[26],markerEnd:h[25]}}}return u&&(i=en(u,f(t))),{c(){e=Ee("svg"),n=Ee("g"),i&&re(i.$$.fragment),this.h()},l(h){e=Ce(h,"svg",{});var d=le(e);n=Ce(d,"g",{class:!0,"data-id":!0,"aria-label":!0,role:!0});var c=le(n);i&&de(i.$$.fragment,c),c.forEach(N),d.forEach(N),this.h()},h(){C(n,"class",o=Pe(["svelte-flow__edge",t[22]])),C(n,"data-id",t[0]),C(n,"aria-label",s=t[20]===null?void 0:t[20]?t[20]:`Edge from ${t[1]} to ${t[2]}`),C(n,"role","img"),oe(n,"animated",t[6]),oe(n,"selected",t[7]),oe(n,"selectable",t[24]),se(e,"z-index",t[5])},m(h,d){p(h,e,d),We(e,n),i&&ae(i,n,null),l=!0,r||(a=[De(n,"click",t[32]),De(n,"contextmenu",t[41]),De(n,"mouseenter",t[42]),De(n,"mouseleave",t[43])],r=!0)},p(h,d){if(d[0]&134217728&&u!==(u=h[27])){if(i){Xe();const c=i;R(c.$$.fragment,1,0,()=>{ue(c,1)}),Ae()}u?(i=en(u,f(h)),re(i.$$.fragment),A(i.$$.fragment,1),ae(i,n,null)):i=null}else if(u){const c={};d[0]&1&&(c.id=h[0]),d[0]&2&&(c.source=h[1]),d[0]&4&&(c.target=h[2]),d[0]&16384&&(c.sourceX=h[14]),d[0]&32768&&(c.sourceY=h[15]),d[0]&65536&&(c.targetX=h[16]),d[0]&131072&&(c.targetY=h[17]),d[0]&262144&&(c.sourcePosition=h[18]),d[0]&524288&&(c.targetPosition=h[19]),d[0]&64&&(c.animated=h[6]),d[0]&128&&(c.selected=h[7]),d[0]&1024&&(c.label=h[10]),d[0]&2048&&(c.labelStyle=h[11]),d[0]&8&&(c.data=h[3]),d[0]&16&&(c.style=h[4]),d[0]&2097152&&(c.interactionWidth=h[21]),d[0]&16777216&&(c.selectable=h[24]),d[0]&256&&(c.deletable=h[8]??!0),d[0]&8388608&&(c.type=h[23]),d[0]&4096&&(c.sourceHandleId=h[12]),d[0]&8192&&(c.targetHandleId=h[13]),d[0]&67108864&&(c.markerStart=h[26]),d[0]&33554432&&(c.markerEnd=h[25]),i.$set(c)}(!l||d[0]&4194304&&o!==(o=Pe(["svelte-flow__edge",h[22]])))&&C(n,"class",o),(!l||d[0]&1)&&C(n,"data-id",h[0]),(!l||d[0]&1048582&&s!==(s=h[20]===null?void 0:h[20]?h[20]:`Edge from ${h[1]} to ${h[2]}`))&&C(n,"aria-label",s),(!l||d[0]&4194368)&&oe(n,"animated",h[6]),(!l||d[0]&4194432)&&oe(n,"selected",h[7]),(!l||d[0]&20971520)&&oe(n,"selectable",h[24]),d[0]&32&&se(e,"z-index",h[5])},i(h){l||(i&&A(i.$$.fragment,h),l=!0)},o(h){i&&R(i.$$.fragment,h),l=!1},d(h){h&&N(e),i&&ue(i),r=!1,kt(a)}}}function vr(t){let e,n,i=!t[9]&&Ei(t);return{c(){i&&i.c(),e=ze()},l(o){i&&i.l(o),e=ze()},m(o,s){i&&i.m(o,s),p(o,e,s),n=!0},p(o,s){o[9]?i&&(Xe(),R(i,1,1,()=>{i=null}),Ae()):i?(i.p(o,s),s[0]&512&&A(i,1)):(i=Ei(o),i.c(),A(i,1),i.m(e.parentNode,e))},i(o){n||(A(i),n=!0)},o(o){R(i),n=!1},d(o){o&&N(e),i&&i.d(o)}}}function Tr(t,e,n){let i,o,s,l,r,a,u,f,h,{id:d}=e,{type:c="default"}=e,{source:b=""}=e,{target:m=""}=e,{data:y={}}=e,{style:g=void 0}=e,{zIndex:E=void 0}=e,{animated:k=!1}=e,{selected:M=!1}=e,{selectable:B=void 0}=e,{deletable:L=void 0}=e,{hidden:I=!1}=e,{label:v=void 0}=e,{labelStyle:H=void 0}=e,{markerStart:Y=void 0}=e,{markerEnd:F=void 0}=e,{sourceHandle:Q=void 0}=e,{targetHandle:X=void 0}=e,{sourceX:_}=e,{sourceY:w}=e,{targetX:S}=e,{targetY:P}=e,{sourcePosition:O}=e,{targetPosition:D}=e,{ariaLabel:W=void 0}=e,{interactionWidth:q=void 0}=e,{class:G=""}=e;xt("svelteflow__edge_id",d);const{edgeLookup:V,edgeTypes:x,flowId:ee,elementsSelectable:me}=Ve();U(t,V,K=>n(44,a=K)),U(t,x,K=>n(40,h=K)),U(t,ee,K=>n(39,f=K)),U(t,me,K=>n(38,u=K));const T=cn(),ne=zo();function fe(K){const Ie=a.get(d);Ie&&(ne(d),T("edgeclick",{event:K,edge:Ie}))}function ie(K,Ie){const Oe=a.get(d);Oe&&T(Ie,{event:K,edge:Oe})}const ye=K=>{ie(K,"edgecontextmenu")},_e=K=>{ie(K,"edgemouseenter")},we=K=>{ie(K,"edgemouseleave")};return t.$$set=K=>{"id"in K&&n(0,d=K.id),"type"in K&&n(34,c=K.type),"source"in K&&n(1,b=K.source),"target"in K&&n(2,m=K.target),"data"in K&&n(3,y=K.data),"style"in K&&n(4,g=K.style),"zIndex"in K&&n(5,E=K.zIndex),"animated"in K&&n(6,k=K.animated),"selected"in K&&n(7,M=K.selected),"selectable"in K&&n(35,B=K.selectable),"deletable"in K&&n(8,L=K.deletable),"hidden"in K&&n(9,I=K.hidden),"label"in K&&n(10,v=K.label),"labelStyle"in K&&n(11,H=K.labelStyle),"markerStart"in K&&n(36,Y=K.markerStart),"markerEnd"in K&&n(37,F=K.markerEnd),"sourceHandle"in K&&n(12,Q=K.sourceHandle),"targetHandle"in K&&n(13,X=K.targetHandle),"sourceX"in K&&n(14,_=K.sourceX),"sourceY"in K&&n(15,w=K.sourceY),"targetX"in K&&n(16,S=K.targetX),"targetY"in K&&n(17,P=K.targetY),"sourcePosition"in K&&n(18,O=K.sourcePosition),"targetPosition"in K&&n(19,D=K.targetPosition),"ariaLabel"in K&&n(20,W=K.ariaLabel),"interactionWidth"in K&&n(21,q=K.interactionWidth),"class"in K&&n(22,G=K.class)},t.$$.update=()=>{t.$$.dirty[1]&8&&n(23,i=c||"default"),t.$$.dirty[0]&8388608|t.$$.dirty[1]&512&&n(27,o=h[i]||Po),t.$$.dirty[1]&288&&n(26,s=Y?`url('#${Yn(Y,f)}')`:void 0),t.$$.dirty[1]&320&&n(25,l=F?`url('#${Yn(F,f)}')`:void 0),t.$$.dirty[1]&144&&n(24,r=B??u)},[d,b,m,y,g,E,k,M,L,I,v,H,Q,X,_,w,S,P,O,D,W,q,G,i,r,l,s,o,V,x,ee,me,fe,ie,c,B,Y,F,u,f,h,ye,_e,we]}class Ir extends he{constructor(e){super(),ge(this,e,Tr,vr,qi,{id:0,type:34,source:1,target:2,data:3,style:4,zIndex:5,animated:6,selected:7,selectable:35,deletable:8,hidden:9,label:10,labelStyle:11,markerStart:36,markerEnd:37,sourceHandle:12,targetHandle:13,sourceX:14,sourceY:15,targetX:16,targetY:17,sourcePosition:18,targetPosition:19,ariaLabel:20,interactionWidth:21,class:22},null,[-1,-1])}}function Nr(t,e,n){let{onMount:i=void 0}=e,{onDestroy:o=void 0}=e;return fn(()=>(i==null||i(),o)),t.$$set=s=>{"onMount"in s&&n(0,i=s.onMount),"onDestroy"in s&&n(1,o=s.onDestroy)},[i,o]}class Vr extends he{constructor(e){super(),ge(this,e,Nr,null,be,{onMount:0,onDestroy:1})}}function Ci(t,e,n){const i=t.slice();return i[2]=e[n],i}function Mi(t,e){let n,i,o;const s=[e[2]];let l={};for(let r=0;r<s.length;r+=1)l=Me(l,s[r]);return i=new Rr({props:l}),{key:t,first:null,c(){n=ze(),re(i.$$.fragment),this.h()},l(r){n=ze(),de(i.$$.fragment,r),this.h()},h(){this.first=n},m(r,a){p(r,n,a),ae(i,r,a),o=!0},p(r,a){e=r;const u=a&1?ct(s,[Nt(e[2])]):{};i.$set(u)},i(r){o||(A(i.$$.fragment,r),o=!0)},o(r){R(i.$$.fragment,r),o=!1},d(r){r&&N(n),ue(i,r)}}}function Yr(t){let e,n=[],i=new Map,o,s=_t(t[0]);const l=r=>r[2].id;for(let r=0;r<s.length;r+=1){let a=Ci(t,s,r),u=l(a);i.set(u,n[r]=Mi(u,a))}return{c(){e=Ee("defs");for(let r=0;r<n.length;r+=1)n[r].c()},l(r){e=Ce(r,"defs",{});var a=le(e);for(let u=0;u<n.length;u+=1)n[u].l(a);a.forEach(N)},m(r,a){p(r,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);o=!0},p(r,[a]){a&1&&(s=_t(r[0]),Xe(),n=dn(n,a,l,1,r,s,i,e,hn,Mi,null,Ci),Ae())},i(r){if(!o){for(let a=0;a<s.length;a+=1)A(n[a]);o=!0}},o(r){for(let a=0;a<n.length;a+=1)R(n[a]);o=!1},d(r){r&&N(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function Xr(t,e,n){let i;const{markers:o}=Ve();return U(t,o,s=>n(0,i=s)),[i,o]}class Ar extends he{constructor(e){super(),ge(this,e,Xr,Yr,be,{})}}function Wr(t){let e;return{c(){e=Ee("polyline"),this.h()},l(n){e=Ce(n,"polyline",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,fill:!0,points:!0}),le(e).forEach(N),this.h()},h(){C(e,"stroke",t[6]),C(e,"stroke-linecap","round"),C(e,"stroke-linejoin","round"),C(e,"stroke-width",t[7]),C(e,"fill",t[6]),C(e,"points","-5,-4 0,0 -5,4 -5,-4")},m(n,i){p(n,e,i)},p(n,i){i&64&&C(e,"stroke",n[6]),i&128&&C(e,"stroke-width",n[7]),i&64&&C(e,"fill",n[6])},d(n){n&&N(e)}}}function Br(t){let e;return{c(){e=Ee("polyline"),this.h()},l(n){e=Ce(n,"polyline",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,fill:!0,points:!0}),le(e).forEach(N),this.h()},h(){C(e,"stroke",t[6]),C(e,"stroke-linecap","round"),C(e,"stroke-linejoin","round"),C(e,"stroke-width",t[7]),C(e,"fill","none"),C(e,"points","-5,-4 0,0 -5,4")},m(n,i){p(n,e,i)},p(n,i){i&64&&C(e,"stroke",n[6]),i&128&&C(e,"stroke-width",n[7])},d(n){n&&N(e)}}}function Lr(t){let e,n,i;function o(r,a){if(r[1]===nn.Arrow)return Br;if(r[1]===nn.ArrowClosed)return Wr}let s=o(t),l=s&&s(t);return{c(){e=Ee("marker"),l&&l.c(),this.h()},l(r){e=Ce(r,"marker",{class:!0,id:!0,markerWidth:!0,markerHeight:!0,viewBox:!0,markerUnits:!0,orient:!0,refX:!0,refY:!0});var a=le(e);l&&l.l(a),a.forEach(N),this.h()},h(){C(e,"class","svelte-flow__arrowhead"),C(e,"id",t[0]),C(e,"markerWidth",n=`${t[2]}`),C(e,"markerHeight",i=`${t[3]}`),C(e,"viewBox","-10 -10 20 20"),C(e,"markerUnits",t[4]),C(e,"orient",t[5]),C(e,"refX","0"),C(e,"refY","0")},m(r,a){p(r,e,a),l&&l.m(e,null)},p(r,[a]){s===(s=o(r))&&l?l.p(r,a):(l&&l.d(1),l=s&&s(r),l&&(l.c(),l.m(e,null))),a&1&&C(e,"id",r[0]),a&4&&n!==(n=`${r[2]}`)&&C(e,"markerWidth",n),a&8&&i!==(i=`${r[3]}`)&&C(e,"markerHeight",i),a&16&&C(e,"markerUnits",r[4]),a&32&&C(e,"orient",r[5])},i:Se,o:Se,d(r){r&&N(e),l&&l.d()}}}function Kr(t,e,n){let{id:i}=e,{type:o}=e,{width:s=12.5}=e,{height:l=12.5}=e,{markerUnits:r="strokeWidth"}=e,{orient:a="auto-start-reverse"}=e,{color:u=void 0}=e,{strokeWidth:f=void 0}=e;return t.$$set=h=>{"id"in h&&n(0,i=h.id),"type"in h&&n(1,o=h.type),"width"in h&&n(2,s=h.width),"height"in h&&n(3,l=h.height),"markerUnits"in h&&n(4,r=h.markerUnits),"orient"in h&&n(5,a=h.orient),"color"in h&&n(6,u=h.color),"strokeWidth"in h&&n(7,f=h.strokeWidth)},[i,o,s,l,r,a,u,f]}class Rr extends he{constructor(e){super(),ge(this,e,Kr,Lr,be,{id:0,type:1,width:2,height:3,markerUnits:4,orient:5,color:6,strokeWidth:7})}}function zi(t,e,n){const i=t.slice();return i[14]=e[n],i}function Pi(t,e){let n,i,o;return i=new Ir({props:{id:e[14].id,source:e[14].source,target:e[14].target,data:e[14].data,style:e[14].style,animated:e[14].animated,selected:e[14].selected,selectable:e[14].selectable??e[1],deletable:e[14].deletable,hidden:e[14].hidden,label:e[14].label,labelStyle:e[14].labelStyle,markerStart:e[14].markerStart,markerEnd:e[14].markerEnd,sourceHandle:e[14].sourceHandle,targetHandle:e[14].targetHandle,sourceX:e[14].sourceX,sourceY:e[14].sourceY,targetX:e[14].targetX,targetY:e[14].targetY,sourcePosition:e[14].sourcePosition,targetPosition:e[14].targetPosition,ariaLabel:e[14].ariaLabel,interactionWidth:e[14].interactionWidth,class:e[14].class,type:e[14].type||"default",zIndex:e[14].zIndex}}),i.$on("edgeclick",e[7]),i.$on("edgecontextmenu",e[8]),i.$on("edgemouseenter",e[9]),i.$on("edgemouseleave",e[10]),{key:t,first:null,c(){n=ze(),re(i.$$.fragment),this.h()},l(s){n=ze(),de(i.$$.fragment,s),this.h()},h(){this.first=n},m(s,l){p(s,n,l),ae(i,s,l),o=!0},p(s,l){e=s;const r={};l&1&&(r.id=e[14].id),l&1&&(r.source=e[14].source),l&1&&(r.target=e[14].target),l&1&&(r.data=e[14].data),l&1&&(r.style=e[14].style),l&1&&(r.animated=e[14].animated),l&1&&(r.selected=e[14].selected),l&3&&(r.selectable=e[14].selectable??e[1]),l&1&&(r.deletable=e[14].deletable),l&1&&(r.hidden=e[14].hidden),l&1&&(r.label=e[14].label),l&1&&(r.labelStyle=e[14].labelStyle),l&1&&(r.markerStart=e[14].markerStart),l&1&&(r.markerEnd=e[14].markerEnd),l&1&&(r.sourceHandle=e[14].sourceHandle),l&1&&(r.targetHandle=e[14].targetHandle),l&1&&(r.sourceX=e[14].sourceX),l&1&&(r.sourceY=e[14].sourceY),l&1&&(r.targetX=e[14].targetX),l&1&&(r.targetY=e[14].targetY),l&1&&(r.sourcePosition=e[14].sourcePosition),l&1&&(r.targetPosition=e[14].targetPosition),l&1&&(r.ariaLabel=e[14].ariaLabel),l&1&&(r.interactionWidth=e[14].interactionWidth),l&1&&(r.class=e[14].class),l&1&&(r.type=e[14].type||"default"),l&1&&(r.zIndex=e[14].zIndex),i.$set(r)},i(s){o||(A(i.$$.fragment,s),o=!0)},o(s){R(i.$$.fragment,s),o=!1},d(s){s&&N(n),ue(i,s)}}}function Oi(t){let e,n;return e=new Vr({props:{onMount:t[11],onDestroy:t[12]}}),{c(){re(e.$$.fragment)},l(i){de(e.$$.fragment,i)},m(i,o){ae(e,i,o),n=!0},p(i,o){const s={};o&4&&(s.onMount=i[11]),o&4&&(s.onDestroy=i[12]),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function Zr(t){let e,n,i,o,s=[],l=new Map,r,a;i=new Ar({});let u=_t(t[0]);const f=d=>d[14].id;for(let d=0;d<u.length;d+=1){let c=zi(t,u,d),b=f(c);l.set(b,s[d]=Pi(b,c))}let h=t[0].length>0&&Oi(t);return{c(){e=Be("div"),n=Ee("svg"),re(i.$$.fragment),o=He();for(let d=0;d<s.length;d+=1)s[d].c();r=He(),h&&h.c(),this.h()},l(d){e=Le(d,"DIV",{class:!0});var c=le(e);n=Ce(c,"svg",{class:!0});var b=le(n);de(i.$$.fragment,b),b.forEach(N),o=ve(c);for(let m=0;m<s.length;m+=1)s[m].l(c);r=ve(c),h&&h.l(c),c.forEach(N),this.h()},h(){C(n,"class","svelte-flow__marker"),C(e,"class","svelte-flow__edges")},m(d,c){p(d,e,c),We(e,n),ae(i,n,null),We(e,o);for(let b=0;b<s.length;b+=1)s[b]&&s[b].m(e,null);We(e,r),h&&h.m(e,null),a=!0},p(d,[c]){c&3&&(u=_t(d[0]),Xe(),s=dn(s,c,f,1,d,u,l,e,hn,Pi,r,zi),Ae()),d[0].length>0?h?(h.p(d,c),c&1&&A(h,1)):(h=Oi(d),h.c(),A(h,1),h.m(e,null)):h&&(Xe(),R(h,1,1,()=>{h=null}),Ae())},i(d){if(!a){A(i.$$.fragment,d);for(let c=0;c<u.length;c+=1)A(s[c]);A(h),a=!0}},o(d){R(i.$$.fragment,d);for(let c=0;c<s.length;c+=1)R(s[c]);R(h),a=!1},d(d){d&&N(e),ue(i);for(let c=0;c<s.length;c+=1)s[c].d();h&&h.d()}}}function Fr(t,e,n){let i,o,s,{defaultEdgeOptions:l}=e;const{visibleEdges:r,edgesInitialized:a,edges:{setDefaultOptions:u},elementsSelectable:f}=Ve();U(t,r,g=>n(0,i=g)),U(t,a,g=>n(2,s=g)),U(t,f,g=>n(1,o=g)),fn(()=>{l&&u(l)});function h(g){ke.call(this,t,g)}function d(g){ke.call(this,t,g)}function c(g){ke.call(this,t,g)}function b(g){ke.call(this,t,g)}const m=()=>{$t(a,s=!0,s)},y=()=>{$t(a,s=!1,s)};return t.$$set=g=>{"defaultEdgeOptions"in g&&n(6,l=g.defaultEdgeOptions)},[i,o,s,r,a,f,l,h,d,c,b,m,y]}class Gr extends he{constructor(e){super(),ge(this,e,Fr,Zr,be,{defaultEdgeOptions:6})}}function Di(t){let e;return{c(){e=Be("div"),this.h()},l(n){e=Le(n,"DIV",{class:!0}),le(e).forEach(N),this.h()},h(){C(e,"class","svelte-flow__selection svelte-1iugwpu"),se(e,"width",typeof t[2]=="string"?t[2]:`${t[2]}px`),se(e,"height",typeof t[3]=="string"?t[3]:`${t[3]}px`),se(e,"transform",`translate(${t[0]}px, ${t[1]}px)`)},m(n,i){p(n,e,i)},p(n,i){i&4&&se(e,"width",typeof n[2]=="string"?n[2]:`${n[2]}px`),i&8&&se(e,"height",typeof n[3]=="string"?n[3]:`${n[3]}px`),i&3&&se(e,"transform",`translate(${n[0]}px, ${n[1]}px)`)},d(n){n&&N(e)}}}function Ur(t){let e,n=t[4]&&Di(t);return{c(){n&&n.c(),e=ze()},l(i){n&&n.l(i),e=ze()},m(i,o){n&&n.m(i,o),p(i,e,o)},p(i,[o]){i[4]?n?n.p(i,o):(n=Di(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Se,o:Se,d(i){i&&N(e),n&&n.d(i)}}}function qr(t,e,n){let{x:i=0}=e,{y:o=0}=e,{width:s=0}=e,{height:l=0}=e,{isVisible:r=!0}=e;return t.$$set=a=>{"x"in a&&n(0,i=a.x),"y"in a&&n(1,o=a.y),"width"in a&&n(2,s=a.width),"height"in a&&n(3,l=a.height),"isVisible"in a&&n(4,r=a.isVisible)},[i,o,s,l,r]}class vo extends he{constructor(e){super(),ge(this,e,qr,Ur,be,{x:0,y:1,width:2,height:3,isVisible:4})}}function jr(t){var i,o,s,l;let e,n;return e=new vo({props:{isVisible:!!(t[0]&&t[1]==="user"),width:(i=t[0])==null?void 0:i.width,height:(o=t[0])==null?void 0:o.height,x:(s=t[0])==null?void 0:s.x,y:(l=t[0])==null?void 0:l.y}}),{c(){re(e.$$.fragment)},l(r){de(e.$$.fragment,r)},m(r,a){ae(e,r,a),n=!0},p(r,[a]){var f,h,d,c;const u={};a&3&&(u.isVisible=!!(r[0]&&r[1]==="user")),a&1&&(u.width=(f=r[0])==null?void 0:f.width),a&1&&(u.height=(h=r[0])==null?void 0:h.height),a&1&&(u.x=(d=r[0])==null?void 0:d.x),a&1&&(u.y=(c=r[0])==null?void 0:c.y),e.$set(u)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){R(e.$$.fragment,r),n=!1},d(r){ue(e,r)}}}function pr(t,e,n){let i,o;const{selectionRect:s,selectionRectMode:l}=Ve();return U(t,s,r=>n(0,i=r)),U(t,l,r=>n(1,o=r)),[i,o,s,l]}class Jr extends he{constructor(e){super(),ge(this,e,pr,jr,be,{})}}function Hi(t){let e,n,i,o,s;return n=new vo({props:{width:"100%",height:"100%",x:0,y:0}}),{c(){e=Be("div"),re(n.$$.fragment),this.h()},l(l){e=Le(l,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var r=le(e);de(n.$$.fragment,r),r.forEach(N),this.h()},h(){C(e,"class","selection-wrapper nopan svelte-5pxri"),se(e,"width",t[1].width+"px"),se(e,"height",t[1].height+"px"),se(e,"transform","translate("+t[1].x+"px, "+t[1].y+"px)"),C(e,"role","button"),C(e,"tabindex","-1")},m(l,r){p(l,e,r),ae(n,e,null),i=!0,o||(s=[Ze(Ho.call(null,e,{disabled:!1,store:t[2],onDrag:t[11],onDragStart:t[12],onDragStop:t[13]})),De(e,"contextmenu",t[7]),De(e,"click",t[8]),De(e,"keyup",xr)],o=!0)},p(l,r){(!i||r&2)&&se(e,"width",l[1].width+"px"),(!i||r&2)&&se(e,"height",l[1].height+"px"),(!i||r&2)&&se(e,"transform","translate("+l[1].x+"px, "+l[1].y+"px)")},i(l){i||(A(n.$$.fragment,l),i=!0)},o(l){R(n.$$.fragment,l),i=!1},d(l){l&&N(e),ue(n),o=!1,kt(s)}}}function Qr(t){let e=t[0]==="nodes"&&t[1]&&tt(t[1].x)&&tt(t[1].y),n,i,o=e&&Hi(t);return{c(){o&&o.c(),n=ze()},l(s){o&&o.l(s),n=ze()},m(s,l){o&&o.m(s,l),p(s,n,l),i=!0},p(s,[l]){l&3&&(e=s[0]==="nodes"&&s[1]&&tt(s[1].x)&&tt(s[1].y)),e?o?(o.p(s,l),l&3&&A(o,1)):(o=Hi(s),o.c(),A(o,1),o.m(n.parentNode,n)):o&&(Xe(),R(o,1,1,()=>{o=null}),Ae())},i(s){i||(A(o),i=!0)},o(s){R(o),i=!1},d(s){s&&N(n),o&&o.d(s)}}}const xr=()=>{};function $r(t,e,n){let i,o,s;const l=Ve(),{selectionRectMode:r,nodes:a,nodeLookup:u}=l;U(t,r,g=>n(0,s=g)),U(t,a,g=>n(9,i=g)),U(t,u,g=>n(10,o=g));const f=cn();let h=null;function d(g){const E=i.filter(k=>k.selected);f("selectioncontextmenu",{nodes:E,event:g})}function c(g){const E=i.filter(k=>k.selected);f("selectionclick",{nodes:E,event:g})}const b=(g,E,k,M)=>{f("nodedrag",{event:g,targetNode:null,nodes:M})},m=(g,E,k,M)=>{f("nodedragstart",{event:g,targetNode:null,nodes:M})},y=(g,E,k,M)=>{f("nodedragstop",{event:g,targetNode:null,nodes:M})};return t.$$.update=()=>{t.$$.dirty&1537&&s==="nodes"&&n(1,h=Zt(o,{filter:g=>!!g.selected}))},[s,h,l,r,a,u,f,d,c,i,o,b,m,y]}class ea extends he{constructor(e){super(),ge(this,e,$r,Qr,be,{})}}function ot(t,e){let{enabled:n=!0,trigger:i,type:o="keydown"}=e;function s(l){const r=Array.isArray(i)?i:[i],a={alt:l.altKey,ctrl:l.ctrlKey,shift:l.shiftKey,meta:l.metaKey};for(const u of r){const f={modifier:[],preventDefault:!1,enabled:!0,...u},{modifier:h,key:d,callback:c,preventDefault:b,enabled:m}=f;if(m){if(h.length&&!(Array.isArray(h)?h:[h]).map(E=>typeof E=="string"?[E]:E).some(E=>E.every(k=>a[k])))continue;if(l.key===d){b&&l.preventDefault();const y={node:t,trigger:f,originalEvent:l};t.dispatchEvent(new CustomEvent("shortcut",{detail:y})),c==null||c(y)}}}}return n&&t.addEventListener(o,s),{update:l=>{const{enabled:r=!0,type:a="keydown"}=l;n&&(!r||o!==a)?t.removeEventListener(o,s):!n&&r&&t.addEventListener(a,s),n=r,o=a,i=l.trigger},destroy:()=>{t.removeEventListener(o,s)}}}function ta(t){let e,n,i,o,s,l,r,a,u,f,h,d;return{c:Se,l:Se,m(c,b){h||(d=[Ze(e=ot.call(null,window,{trigger:Ne(t[0],t[11]),type:"keydown"})),Ze(n=ot.call(null,window,{trigger:Ne(t[0],t[12]),type:"keyup"})),Ze(i=ot.call(null,window,{trigger:Ne(t[1],t[13]),type:"keydown"})),Ze(o=ot.call(null,window,{trigger:Ne(t[1],t[14]),type:"keyup"})),Ze(s=ot.call(null,window,{trigger:Ne(t[2],t[15]),type:"keydown"})),Ze(l=ot.call(null,window,{trigger:Ne(t[2],t[16]),type:"keyup"})),Ze(r=ot.call(null,window,{trigger:Ne(t[3],t[17]),type:"keydown"})),Ze(a=ot.call(null,window,{trigger:Ne(t[3],t[18]),type:"keyup"})),Ze(u=ot.call(null,window,{trigger:Ne(t[4],t[19]),type:"keydown"})),Ze(f=ot.call(null,window,{trigger:Ne(t[4],t[20]),type:"keyup"})),De(window,"blur",t[10]),De(window,"contextmenu",t[10])],h=!0)},p(c,[b]){e&&Ye(e.update)&&b&1&&e.update.call(null,{trigger:Ne(c[0],c[11]),type:"keydown"}),n&&Ye(n.update)&&b&1&&n.update.call(null,{trigger:Ne(c[0],c[12]),type:"keyup"}),i&&Ye(i.update)&&b&2&&i.update.call(null,{trigger:Ne(c[1],c[13]),type:"keydown"}),o&&Ye(o.update)&&b&2&&o.update.call(null,{trigger:Ne(c[1],c[14]),type:"keyup"}),s&&Ye(s.update)&&b&4&&s.update.call(null,{trigger:Ne(c[2],c[15]),type:"keydown"}),l&&Ye(l.update)&&b&4&&l.update.call(null,{trigger:Ne(c[2],c[16]),type:"keyup"}),r&&Ye(r.update)&&b&8&&r.update.call(null,{trigger:Ne(c[3],c[17]),type:"keydown"}),a&&Ye(a.update)&&b&8&&a.update.call(null,{trigger:Ne(c[3],c[18]),type:"keyup"}),u&&Ye(u.update)&&b&16&&u.update.call(null,{trigger:Ne(c[4],c[19]),type:"keydown"}),f&&Ye(f.update)&&b&16&&f.update.call(null,{trigger:Ne(c[4],c[20]),type:"keyup"})},i:Se,o:Se,d(c){h=!1,kt(d)}}}function To(t){return t!==null&&typeof t=="object"}function na(t){return To(t)?t.modifier||[]:[]}function ia(t){return t==null?"":To(t)?t.key:t}function Ne(t,e){return(Array.isArray(t)?t:[t]).map(i=>{const o=ia(i);return{key:o,modifier:na(i),enabled:o!==null,callback:e}})}function oa(t,e,n){let{selectionKey:i="Shift"}=e,{multiSelectionKey:o=on()?"Meta":"Control"}=e,{deleteKey:s="Backspace"}=e,{panActivationKey:l=" "}=e,{zoomActivationKey:r=on()?"Meta":"Control"}=e;const{selectionKeyPressed:a,multiselectionKeyPressed:u,deleteKeyPressed:f,panActivationKeyPressed:h,zoomActivationKeyPressed:d,selectionRect:c}=Ve();function b(){c.set(null),a.set(!1),u.set(!1),f.set(!1),h.set(!1),d.set(!1)}const m=()=>a.set(!0),y=()=>a.set(!1),g=()=>u.set(!0),E=()=>u.set(!1),k=H=>{!(H.originalEvent.ctrlKey||H.originalEvent.metaKey||H.originalEvent.shiftKey)&&!Yl(H.originalEvent)&&f.set(!0)},M=()=>f.set(!1),B=()=>h.set(!0),L=()=>h.set(!1),I=()=>d.set(!0),v=()=>d.set(!1);return t.$$set=H=>{"selectionKey"in H&&n(0,i=H.selectionKey),"multiSelectionKey"in H&&n(1,o=H.multiSelectionKey),"deleteKey"in H&&n(2,s=H.deleteKey),"panActivationKey"in H&&n(3,l=H.panActivationKey),"zoomActivationKey"in H&&n(4,r=H.zoomActivationKey)},[i,o,s,l,r,a,u,f,h,d,b,m,y,g,E,k,M,B,L,I,v]}class la extends he{constructor(e){super(),ge(this,e,oa,ta,be,{selectionKey:0,multiSelectionKey:1,deleteKey:2,panActivationKey:3,zoomActivationKey:4})}}const sa=t=>({}),vi=t=>({});function Ti(t){let e,n,i,o;const s=t[13].connectionLine,l=Ue(s,t,t[12],vi);let r=!t[2]&&Ii(t);return{c(){e=Ee("svg"),n=Ee("g"),l&&l.c(),r&&r.c(),this.h()},l(a){e=Ce(a,"svg",{width:!0,height:!0,class:!0,style:!0});var u=le(e);n=Ce(u,"g",{class:!0});var f=le(n);l&&l.l(f),r&&r.l(f),f.forEach(N),u.forEach(N),this.h()},h(){C(n,"class",i=Pe(["svelte-flow__connection",ti(t[3].isValid)])),C(e,"width",t[5]),C(e,"height",t[6]),C(e,"class","svelte-flow__connectionline"),C(e,"style",t[0])},m(a,u){p(a,e,u),We(e,n),l&&l.m(n,null),r&&r.m(n,null),o=!0},p(a,u){l&&l.p&&(!o||u&4096)&&qe(l,s,a,a[12],o?pe(s,a[12],u,sa):je(a[12]),vi),a[2]?r&&(r.d(1),r=null):r?r.p(a,u):(r=Ii(a),r.c(),r.m(n,null)),(!o||u&8&&i!==(i=Pe(["svelte-flow__connection",ti(a[3].isValid)])))&&C(n,"class",i),(!o||u&32)&&C(e,"width",a[5]),(!o||u&64)&&C(e,"height",a[6]),(!o||u&1)&&C(e,"style",a[0])},i(a){o||(A(l,a),o=!0)},o(a){R(l,a),o=!1},d(a){a&&N(e),l&&l.d(a),r&&r.d()}}}function Ii(t){let e;return{c(){e=Ee("path"),this.h()},l(n){e=Ce(n,"path",{d:!0,style:!0,fill:!0,class:!0}),le(e).forEach(N),this.h()},h(){C(e,"d",t[4]),C(e,"style",t[1]),C(e,"fill","none"),C(e,"class","svelte-flow__connection-path")},m(n,i){p(n,e,i)},p(n,i){i&16&&C(e,"d",n[4]),i&2&&C(e,"style",n[1])},d(n){n&&N(e)}}}function ra(t){let e,n,i=t[3].inProgress&&Ti(t);return{c(){i&&i.c(),e=ze()},l(o){i&&i.l(o),e=ze()},m(o,s){i&&i.m(o,s),p(o,e,s),n=!0},p(o,[s]){o[3].inProgress?i?(i.p(o,s),s&8&&A(i,1)):(i=Ti(o),i.c(),A(i,1),i.m(e.parentNode,e)):i&&(Xe(),R(i,1,1,()=>{i=null}),Ae())},i(o){n||(A(i),n=!0)},o(o){R(i),n=!1},d(o){o&&N(e),i&&i.d(o)}}}function aa(t,e,n){let i,o,s,l,{$$slots:r={},$$scope:a}=e,{containerStyle:u=""}=e,{style:f=""}=e,{isCustomComponent:h=!1}=e;const{width:d,height:c,connection:b,connectionLineType:m}=Ve();U(t,d,g=>n(5,s=g)),U(t,c,g=>n(6,l=g)),U(t,b,g=>n(3,o=g)),U(t,m,g=>n(11,i=g));let y=null;return t.$$set=g=>{"containerStyle"in g&&n(0,u=g.containerStyle),"style"in g&&n(1,f=g.style),"isCustomComponent"in g&&n(2,h=g.isCustomComponent),"$$scope"in g&&n(12,a=g.$$scope)},t.$$.update=()=>{if(t.$$.dirty&2060&&o.inProgress&&!h){const{from:g,to:E,fromPosition:k,toPosition:M}=o,B={sourceX:g.x,sourceY:g.y,sourcePosition:k,targetX:E.x,targetY:E.y,targetPosition:M};switch(i){case Tt.Bezier:n(4,[y]=ao(B),y);break;case Tt.Step:n(4,[y]=sn({...B,borderRadius:0}),y);break;case Tt.SmoothStep:n(4,[y]=sn(B),y);break;default:n(4,[y]=fo(B),y)}}},[u,f,h,o,y,s,l,d,c,b,m,i,a,r]}class ua extends he{constructor(e){super(),ge(this,e,aa,ra,be,{containerStyle:0,style:1,isCustomComponent:2})}}function fa(t){let e,n,i;const o=t[8].default,s=Ue(o,t,t[7],null);let l=[{class:n=Pe(["svelte-flow__panel",t[1],...t[2]])},{style:t[0]},t[5]],r={};for(let a=0;a<l.length;a+=1)r=Me(r,l[a]);return{c(){e=Be("div"),s&&s.c(),this.h()},l(a){e=Le(a,"DIV",{class:!0,style:!0});var u=le(e);s&&s.l(u),u.forEach(N),this.h()},h(){It(e,r),se(e,"pointer-events",t[3]?"none":"")},m(a,u){p(a,e,u),s&&s.m(e,null),i=!0},p(a,[u]){s&&s.p&&(!i||u&128)&&qe(s,o,a,a[7],i?pe(o,a[7],u,null):je(a[7]),null),It(e,r=ct(l,[(!i||u&6&&n!==(n=Pe(["svelte-flow__panel",a[1],...a[2]])))&&{class:n},(!i||u&1)&&{style:a[0]},u&32&&a[5]])),se(e,"pointer-events",a[3]?"none":"")},i(a){i||(A(s,a),i=!0)},o(a){R(s,a),i=!1},d(a){a&&N(e),s&&s.d(a)}}}function ca(t,e,n){let i;const o=["position","style","class"];let s=Te(e,o),l,{$$slots:r={},$$scope:a}=e,{position:u="top-right"}=e,{style:f=void 0}=e,{class:h=void 0}=e;const{selectionRectMode:d}=Ve();return U(t,d,c=>n(3,l=c)),t.$$set=c=>{e=Me(Me({},e),nt(c)),n(5,s=Te(e,o)),"position"in c&&n(6,u=c.position),"style"in c&&n(0,f=c.style),"class"in c&&n(1,h=c.class),"$$scope"in c&&n(7,a=c.$$scope)},t.$$.update=()=>{t.$$.dirty&64&&n(2,i=`${u}`.split("-"))},[f,h,i,l,d,s,u,a,r]}class Zn extends he{constructor(e){super(),ge(this,e,ca,fa,be,{position:6,style:0,class:1})}}function Ni(t){let e,n;return e=new Zn({props:{position:t[1],class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",$$slots:{default:[da]},$$scope:{ctx:t}}}),{c(){re(e.$$.fragment)},l(i){de(e.$$.fragment,i)},m(i,o){ae(e,i,o),n=!0},p(i,o){const s={};o&2&&(s.position=i[1]),o&4&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function da(t){let e,n="Svelte Flow";return{c(){e=Be("a"),e.textContent=n,this.h()},l(i){e=Le(i,"A",{href:!0,target:!0,rel:!0,"aria-label":!0,"data-svelte-h":!0}),nl(e)!=="svelte-2vm8e4"&&(e.textContent=n),this.h()},h(){C(e,"href","https://svelteflow.dev"),C(e,"target","_blank"),C(e,"rel","noopener noreferrer"),C(e,"aria-label","Svelte Flow attribution")},m(i,o){p(i,e,o)},p:Se,d(i){i&&N(e)}}}function ha(t){var o;let e,n,i=!((o=t[0])!=null&&o.hideAttribution)&&Ni(t);return{c(){i&&i.c(),e=ze()},l(s){i&&i.l(s),e=ze()},m(s,l){i&&i.m(s,l),p(s,e,l),n=!0},p(s,[l]){var r;(r=s[0])!=null&&r.hideAttribution?i&&(Xe(),R(i,1,1,()=>{i=null}),Ae()):i?(i.p(s,l),l&1&&A(i,1)):(i=Ni(s),i.c(),A(i,1),i.m(e.parentNode,e))},i(s){n||(A(i),n=!0)},o(s){R(i),n=!1},d(s){s&&N(e),i&&i.d(s)}}}function ga(t,e,n){let{proOptions:i=void 0}=e,{position:o="bottom-right"}=e;return t.$$set=s=>{"proOptions"in s&&n(0,i=s.proOptions),"position"in s&&n(1,o=s.position)},[i,o]}class ma extends he{constructor(e){super(),ge(this,e,ga,ha,be,{proOptions:0,position:1})}}function Vi(t,{nodeTypes:e,edgeTypes:n,minZoom:i,maxZoom:o,translateExtent:s,paneClickDistance:l}){e!==void 0&&t.setNodeTypes(e),n!==void 0&&t.setEdgeTypes(n),i!==void 0&&t.setMinZoom(i),o!==void 0&&t.setMaxZoom(o),s!==void 0&&t.setTranslateExtent(s),l!==void 0&&t.setPaneClickDistance(l)}const ba=t=>Object.keys(t);function ya(t,e){ba(e).forEach(n=>{const i=e[n];i!==void 0&&t[n].set(i)})}function _a(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function ka(t="light"){return $e("light",n=>{if(t!=="system"){n(t);return}const i=_a(),o=()=>n(i!=null&&i.matches?"dark":"light");return n(i!=null&&i.matches?"dark":"light"),i==null||i.addEventListener("change",o),()=>{i==null||i.removeEventListener("change",o)}})}const wa=t=>({}),Yi=t=>({slot:"connectionLine"});function Sa(t){let e;const n=t[74].connectionLine,i=Ue(n,t,t[98],Yi);return{c(){i&&i.c()},l(o){i&&i.l(o)},m(o,s){i&&i.m(o,s),e=!0},p(o,s){i&&i.p&&(!e||s[3]&32)&&qe(i,n,o,o[98],e?pe(n,o[98],s,wa):je(o[98]),Yi)},i(o){e||(A(i,o),e=!0)},o(o){R(i,o),e=!1},d(o){i&&i.d(o)}}}function Ea(t){let e,n,i,o,s,l,r,a,u,f,h,d;return e=new Gr({props:{defaultEdgeOptions:t[21]}}),e.$on("edgeclick",t[77]),e.$on("edgecontextmenu",t[78]),e.$on("edgemouseenter",t[79]),e.$on("edgemouseleave",t[80]),i=new ua({props:{containerStyle:t[7],style:t[6],isCustomComponent:t[34].connectionLine,$$slots:{connectionLine:[Sa]},$$scope:{ctx:t}}}),u=new Hr({props:{nodeClickDistance:t[23]}}),u.$on("nodeclick",t[81]),u.$on("nodemouseenter",t[82]),u.$on("nodemousemove",t[83]),u.$on("nodemouseleave",t[84]),u.$on("nodedragstart",t[85]),u.$on("nodedrag",t[86]),u.$on("nodedragstop",t[87]),u.$on("nodecontextmenu",t[88]),h=new ea({}),h.$on("selectionclick",t[89]),h.$on("selectioncontextmenu",t[90]),h.$on("nodedragstart",t[91]),h.$on("nodedrag",t[92]),h.$on("nodedragstop",t[93]),{c(){re(e.$$.fragment),n=He(),re(i.$$.fragment),o=He(),s=Be("div"),l=He(),r=Be("div"),a=He(),re(u.$$.fragment),f=He(),re(h.$$.fragment),this.h()},l(c){de(e.$$.fragment,c),n=ve(c),de(i.$$.fragment,c),o=ve(c),s=Le(c,"DIV",{class:!0}),le(s).forEach(N),l=ve(c),r=Le(c,"DIV",{class:!0}),le(r).forEach(N),a=ve(c),de(u.$$.fragment,c),f=ve(c),de(h.$$.fragment,c),this.h()},h(){C(s,"class","svelte-flow__edgelabel-renderer"),C(r,"class","svelte-flow__viewport-portal")},m(c,b){ae(e,c,b),p(c,n,b),ae(i,c,b),p(c,o,b),p(c,s,b),p(c,l,b),p(c,r,b),p(c,a,b),ae(u,c,b),p(c,f,b),ae(h,c,b),d=!0},p(c,b){const m={};b[0]&2097152&&(m.defaultEdgeOptions=c[21]),e.$set(m);const y={};b[0]&128&&(y.containerStyle=c[7]),b[0]&64&&(y.style=c[6]),b[1]&8&&(y.isCustomComponent=c[34].connectionLine),b[3]&32&&(y.$$scope={dirty:b,ctx:c}),i.$set(y);const g={};b[0]&8388608&&(g.nodeClickDistance=c[23]),u.$set(g)},i(c){d||(A(e.$$.fragment,c),A(i.$$.fragment,c),A(u.$$.fragment,c),A(h.$$.fragment,c),d=!0)},o(c){R(e.$$.fragment,c),R(i.$$.fragment,c),R(u.$$.fragment,c),R(h.$$.fragment,c),d=!1},d(c){c&&(N(n),N(o),N(s),N(l),N(r),N(a),N(f)),ue(e,c),ue(i,c),ue(u,c),ue(h,c)}}}function Ca(t){let e,n,i,o;return e=new Sr({props:{$$slots:{default:[Ea]},$$scope:{ctx:t}}}),i=new Jr({}),{c(){re(e.$$.fragment),n=He(),re(i.$$.fragment)},l(s){de(e.$$.fragment,s),n=ve(s),de(i.$$.fragment,s)},m(s,l){ae(e,s,l),p(s,n,l),ae(i,s,l),o=!0},p(s,l){const r={};l[0]&10485952|l[1]&8|l[3]&32&&(r.$$scope={dirty:l,ctx:s}),e.$set(r)},i(s){o||(A(e.$$.fragment,s),A(i.$$.fragment,s),o=!0)},o(s){R(e.$$.fragment,s),R(i.$$.fragment,s),o=!1},d(s){s&&N(n),ue(e,s),ue(i,s)}}}function Ma(t){let e,n;return e=new _r({props:{panOnDrag:t[17]===void 0?!0:t[17],selectionOnDrag:t[18],$$slots:{default:[Ca]},$$scope:{ctx:t}}}),e.$on("paneclick",t[94]),e.$on("panecontextmenu",t[95]),{c(){re(e.$$.fragment)},l(i){de(e.$$.fragment,i)},m(i,o){ae(e,i,o),n=!0},p(i,o){const s={};o[0]&131072&&(s.panOnDrag=i[17]===void 0?!0:i[17]),o[0]&262144&&(s.selectionOnDrag=i[18]),o[0]&10485952|o[1]&8|o[3]&32&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function za(t){let e,n,i,o,s,l,r,a,u,f,h,d;n=new la({props:{selectionKey:t[1],deleteKey:t[5],panActivationKey:t[2],multiSelectionKey:t[3],zoomActivationKey:t[4]}}),o=new mr({props:{initialViewport:t[31],onMoveStart:t[8],onMove:t[9],onMoveEnd:t[10],panOnScrollMode:t[11]===void 0?lt.Free:t[11],preventScrolling:t[12]===void 0?!0:t[12],zoomOnScroll:t[13]===void 0?!0:t[13],zoomOnDoubleClick:t[14]===void 0?!0:t[14],zoomOnPinch:t[15]===void 0?!0:t[15],panOnScroll:t[16]===void 0?!1:t[16],panOnDrag:t[17]===void 0?!0:t[17],paneClickDistance:t[22]===void 0?0:t[22],$$slots:{default:[Ma]},$$scope:{ctx:t}}}),l=new ma({props:{proOptions:t[20],position:t[19]}});const c=t[74].default,b=Ue(c,t,t[98],null);let m=[{style:t[24]},{class:a=Pe(["svelte-flow",t[25],t[30]])},{"data-testid":"svelte-flow__wrapper"},t[33],{role:"application"}],y={};for(let g=0;g<m.length;g+=1)y=Me(y,m[g]);return{c(){e=Be("div"),re(n.$$.fragment),i=He(),re(o.$$.fragment),s=He(),re(l.$$.fragment),r=He(),b&&b.c(),this.h()},l(g){e=Le(g,"DIV",{style:!0,class:!0,"data-testid":!0,role:!0});var E=le(e);de(n.$$.fragment,E),i=ve(E),de(o.$$.fragment,E),s=ve(E),de(l.$$.fragment,E),r=ve(E),b&&b.l(E),E.forEach(N),this.h()},h(){It(e,y),il(()=>t[97].call(e)),oe(e,"svelte-12wlba6",!0)},m(g,E){p(g,e,E),ae(n,e,null),We(e,i),ae(o,e,null),We(e,s),ae(l,e,null),We(e,r),b&&b.m(e,null),t[96](e),u=ol(e,t[97].bind(e)),f=!0,h||(d=[De(e,"dragover",t[75]),De(e,"drop",t[76])],h=!0)},p(g,E){const k={};E[0]&2&&(k.selectionKey=g[1]),E[0]&32&&(k.deleteKey=g[5]),E[0]&4&&(k.panActivationKey=g[2]),E[0]&8&&(k.multiSelectionKey=g[3]),E[0]&16&&(k.zoomActivationKey=g[4]),n.$set(k);const M={};E[0]&256&&(M.onMoveStart=g[8]),E[0]&512&&(M.onMove=g[9]),E[0]&1024&&(M.onMoveEnd=g[10]),E[0]&2048&&(M.panOnScrollMode=g[11]===void 0?lt.Free:g[11]),E[0]&4096&&(M.preventScrolling=g[12]===void 0?!0:g[12]),E[0]&8192&&(M.zoomOnScroll=g[13]===void 0?!0:g[13]),E[0]&16384&&(M.zoomOnDoubleClick=g[14]===void 0?!0:g[14]),E[0]&32768&&(M.zoomOnPinch=g[15]===void 0?!0:g[15]),E[0]&65536&&(M.panOnScroll=g[16]===void 0?!1:g[16]),E[0]&131072&&(M.panOnDrag=g[17]===void 0?!0:g[17]),E[0]&4194304&&(M.paneClickDistance=g[22]===void 0?0:g[22]),E[0]&10879168|E[1]&8|E[3]&32&&(M.$$scope={dirty:E,ctx:g}),o.$set(M);const B={};E[0]&1048576&&(B.proOptions=g[20]),E[0]&524288&&(B.position=g[19]),l.$set(B),b&&b.p&&(!f||E[3]&32)&&qe(b,c,g,g[98],f?pe(c,g[98],E,null):je(g[98]),null),It(e,y=ct(m,[(!f||E[0]&16777216)&&{style:g[24]},(!f||E[0]&1107296256&&a!==(a=Pe(["svelte-flow",g[25],g[30]])))&&{class:a},{"data-testid":"svelte-flow__wrapper"},E[1]&4&&g[33],{role:"application"}])),oe(e,"svelte-12wlba6",!0)},i(g){f||(A(n.$$.fragment,g),A(o.$$.fragment,g),A(l.$$.fragment,g),A(b,g),f=!0)},o(g){R(n.$$.fragment,g),R(o.$$.fragment,g),R(l.$$.fragment,g),R(b,g),f=!1},d(g){g&&N(e),ue(n),ue(o),ue(l),b&&b.d(g),t[96](null),u(),h=!1,kt(d)}}}function Pa(t,e,n){let i;const o=["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"];let s=Te(e,o),l,r,a=Se,u=()=>(a(),a=jn(v,z=>n(99,r=z)),v),f,h=Se,d=()=>(h(),h=jn(i,z=>n(30,f=z)),i);t.$$.on_destroy.push(()=>a()),t.$$.on_destroy.push(()=>h());let{$$slots:c={},$$scope:b}=e;const m=ll(c);let{id:y="1"}=e,{nodes:g}=e,{edges:E}=e,{fitView:k=void 0}=e,{fitViewOptions:M=void 0}=e,{minZoom:B=void 0}=e,{maxZoom:L=void 0}=e,{initialViewport:I=void 0}=e,{viewport:v=void 0}=e;u();let{nodeTypes:H=void 0}=e,{edgeTypes:Y=void 0}=e,{selectionKey:F=void 0}=e,{selectionMode:Q=void 0}=e,{panActivationKey:X=void 0}=e,{multiSelectionKey:_=void 0}=e,{zoomActivationKey:w=void 0}=e,{nodesDraggable:S=void 0}=e,{nodesConnectable:P=void 0}=e,{nodeDragThreshold:O=void 0}=e,{elementsSelectable:D=void 0}=e,{snapGrid:W=void 0}=e,{deleteKey:q=void 0}=e,{connectionRadius:G=void 0}=e,{connectionLineType:V=void 0}=e,{connectionMode:x=St.Strict}=e,{connectionLineStyle:ee=""}=e,{connectionLineContainerStyle:me=""}=e,{onMoveStart:T=void 0}=e,{onMove:ne=void 0}=e,{onMoveEnd:fe=void 0}=e,{isValidConnection:ie=void 0}=e,{translateExtent:ye=void 0}=e,{onlyRenderVisibleElements:_e=void 0}=e,{panOnScrollMode:we=lt.Free}=e,{preventScrolling:K=!0}=e,{zoomOnScroll:Ie=!0}=e,{zoomOnDoubleClick:Oe=!0}=e,{zoomOnPinch:st=!0}=e,{panOnScroll:rt=!1}=e,{panOnDrag:at=!0}=e,{selectionOnDrag:Ke=void 0}=e,{autoPanOnConnect:it=!0}=e,{autoPanOnNodeDrag:$=!0}=e,{onerror:dt=void 0}=e,{ondelete:ht=void 0}=e,{onedgecreate:Z=void 0}=e,{attributionPosition:xe=void 0}=e,{proOptions:Fe=void 0}=e,{defaultEdgeOptions:J=void 0}=e,{width:ut=void 0}=e,{height:Ge=void 0}=e,{colorMode:Je="light"}=e,{onconnect:Et=void 0}=e,{onconnectstart:Ct=void 0}=e,{onconnectend:Mt=void 0}=e,{onbeforedelete:zt=void 0}=e,{oninit:gt=void 0}=e,{nodeOrigin:wt=void 0}=e,{paneClickDistance:Ft=0}=e,{nodeClickDistance:Fn=0}=e,{defaultMarkerColor:_n="#b1b1b7"}=e,{style:Gn=void 0}=e,{class:Un=void 0}=e,Gt,Pt,Ot;const Io=r||I,Re=sl(Rn)?Ve():cr({nodes:j(g),edges:j(E),width:ut,height:Ge,fitView:k,nodeOrigin:wt});fn(()=>(Re.width.set(Pt),Re.height.set(Ot),Re.domNode.set(Gt),Re.syncNodeStores(g),Re.syncEdgeStores(E),Re.syncViewport(v),k!==void 0&&Re.fitViewOnInit.set(k),M&&Re.fitViewOptions.set(M),Vi(Re,{nodeTypes:H,edgeTypes:Y,minZoom:B,maxZoom:L,translateExtent:ye,paneClickDistance:Ft}),()=>{Re.reset()}));const{initialized:qn}=Re;U(t,qn,z=>n(73,l=z));let kn=!1;function No(z){ke.call(this,t,z)}function Vo(z){ke.call(this,t,z)}function Yo(z){ke.call(this,t,z)}function Xo(z){ke.call(this,t,z)}function Ao(z){ke.call(this,t,z)}function Wo(z){ke.call(this,t,z)}function Bo(z){ke.call(this,t,z)}function Lo(z){ke.call(this,t,z)}function Ko(z){ke.call(this,t,z)}function Ro(z){ke.call(this,t,z)}function Zo(z){ke.call(this,t,z)}function Fo(z){ke.call(this,t,z)}function Go(z){ke.call(this,t,z)}function Uo(z){ke.call(this,t,z)}function qo(z){ke.call(this,t,z)}function jo(z){ke.call(this,t,z)}function po(z){ke.call(this,t,z)}function Jo(z){ke.call(this,t,z)}function Qo(z){ke.call(this,t,z)}function xo(z){ke.call(this,t,z)}function $o(z){ke.call(this,t,z)}function el(z){Xn[z?"unshift":"push"](()=>{Gt=z,n(28,Gt)})}function tl(){Pt=this.clientWidth,Ot=this.clientHeight,n(26,Pt),n(27,Ot)}return t.$$set=z=>{e=Me(Me({},e),nt(z)),n(33,s=Te(e,o)),"id"in z&&n(35,y=z.id),"nodes"in z&&n(36,g=z.nodes),"edges"in z&&n(37,E=z.edges),"fitView"in z&&n(38,k=z.fitView),"fitViewOptions"in z&&n(39,M=z.fitViewOptions),"minZoom"in z&&n(40,B=z.minZoom),"maxZoom"in z&&n(41,L=z.maxZoom),"initialViewport"in z&&n(42,I=z.initialViewport),"viewport"in z&&u(n(0,v=z.viewport)),"nodeTypes"in z&&n(43,H=z.nodeTypes),"edgeTypes"in z&&n(44,Y=z.edgeTypes),"selectionKey"in z&&n(1,F=z.selectionKey),"selectionMode"in z&&n(45,Q=z.selectionMode),"panActivationKey"in z&&n(2,X=z.panActivationKey),"multiSelectionKey"in z&&n(3,_=z.multiSelectionKey),"zoomActivationKey"in z&&n(4,w=z.zoomActivationKey),"nodesDraggable"in z&&n(46,S=z.nodesDraggable),"nodesConnectable"in z&&n(47,P=z.nodesConnectable),"nodeDragThreshold"in z&&n(48,O=z.nodeDragThreshold),"elementsSelectable"in z&&n(49,D=z.elementsSelectable),"snapGrid"in z&&n(50,W=z.snapGrid),"deleteKey"in z&&n(5,q=z.deleteKey),"connectionRadius"in z&&n(51,G=z.connectionRadius),"connectionLineType"in z&&n(52,V=z.connectionLineType),"connectionMode"in z&&n(53,x=z.connectionMode),"connectionLineStyle"in z&&n(6,ee=z.connectionLineStyle),"connectionLineContainerStyle"in z&&n(7,me=z.connectionLineContainerStyle),"onMoveStart"in z&&n(8,T=z.onMoveStart),"onMove"in z&&n(9,ne=z.onMove),"onMoveEnd"in z&&n(10,fe=z.onMoveEnd),"isValidConnection"in z&&n(54,ie=z.isValidConnection),"translateExtent"in z&&n(55,ye=z.translateExtent),"onlyRenderVisibleElements"in z&&n(56,_e=z.onlyRenderVisibleElements),"panOnScrollMode"in z&&n(11,we=z.panOnScrollMode),"preventScrolling"in z&&n(12,K=z.preventScrolling),"zoomOnScroll"in z&&n(13,Ie=z.zoomOnScroll),"zoomOnDoubleClick"in z&&n(14,Oe=z.zoomOnDoubleClick),"zoomOnPinch"in z&&n(15,st=z.zoomOnPinch),"panOnScroll"in z&&n(16,rt=z.panOnScroll),"panOnDrag"in z&&n(17,at=z.panOnDrag),"selectionOnDrag"in z&&n(18,Ke=z.selectionOnDrag),"autoPanOnConnect"in z&&n(57,it=z.autoPanOnConnect),"autoPanOnNodeDrag"in z&&n(58,$=z.autoPanOnNodeDrag),"onerror"in z&&n(59,dt=z.onerror),"ondelete"in z&&n(60,ht=z.ondelete),"onedgecreate"in z&&n(61,Z=z.onedgecreate),"attributionPosition"in z&&n(19,xe=z.attributionPosition),"proOptions"in z&&n(20,Fe=z.proOptions),"defaultEdgeOptions"in z&&n(21,J=z.defaultEdgeOptions),"width"in z&&n(62,ut=z.width),"height"in z&&n(63,Ge=z.height),"colorMode"in z&&n(64,Je=z.colorMode),"onconnect"in z&&n(65,Et=z.onconnect),"onconnectstart"in z&&n(66,Ct=z.onconnectstart),"onconnectend"in z&&n(67,Mt=z.onconnectend),"onbeforedelete"in z&&n(68,zt=z.onbeforedelete),"oninit"in z&&n(69,gt=z.oninit),"nodeOrigin"in z&&n(70,wt=z.nodeOrigin),"paneClickDistance"in z&&n(22,Ft=z.paneClickDistance),"nodeClickDistance"in z&&n(23,Fn=z.nodeClickDistance),"defaultMarkerColor"in z&&n(71,_n=z.defaultMarkerColor),"style"in z&&n(24,Gn=z.style),"class"in z&&n(25,Un=z.class),"$$scope"in z&&n(98,b=z.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&201326592&&Pt!==void 0&&Ot!==void 0&&(Re.width.set(Pt),Re.height.set(Ot)),t.$$.dirty[2]&3200&&!kn&&l&&(gt==null||gt(),n(72,kn=!0)),t.$$.dirty[1]&2130690064|t.$$.dirty[2]&888&&ya(Re,{flowId:y,connectionLineType:V,connectionRadius:G,selectionMode:Q,snapGrid:W,defaultMarkerColor:_n,nodesDraggable:S,nodesConnectable:P,elementsSelectable:D,onlyRenderVisibleElements:_e,isValidConnection:ie,autoPanOnConnect:it,autoPanOnNodeDrag:$,onerror:dt,ondelete:ht,onedgecreate:Z,connectionMode:x,nodeDragThreshold:O,onconnect:Et,onconnectstart:Ct,onconnectend:Mt,onbeforedelete:zt,nodeOrigin:wt}),t.$$.dirty[0]&4194304|t.$$.dirty[1]&16791040&&Vi(Re,{nodeTypes:H,edgeTypes:Y,minZoom:B,maxZoom:L,translateExtent:ye,paneClickDistance:Ft}),t.$$.dirty[2]&4&&d(n(29,i=ka(Je)))},[v,F,X,_,w,q,ee,me,T,ne,fe,we,K,Ie,Oe,st,rt,at,Ke,xe,Fe,J,Ft,Fn,Gn,Un,Pt,Ot,Gt,i,f,Io,qn,s,m,y,g,E,k,M,B,L,I,H,Y,Q,S,P,O,D,W,G,V,x,ie,ye,_e,it,$,dt,ht,Z,ut,Ge,Je,Et,Ct,Mt,zt,gt,wt,_n,kn,l,c,No,Vo,Yo,Xo,Ao,Wo,Bo,Lo,Ko,Ro,Zo,Fo,Go,Uo,qo,jo,po,Jo,Qo,xo,$o,el,tl,b]}class Hu extends he{constructor(e){super(),ge(this,e,Pa,za,be,{id:35,nodes:36,edges:37,fitView:38,fitViewOptions:39,minZoom:40,maxZoom:41,initialViewport:42,viewport:0,nodeTypes:43,edgeTypes:44,selectionKey:1,selectionMode:45,panActivationKey:2,multiSelectionKey:3,zoomActivationKey:4,nodesDraggable:46,nodesConnectable:47,nodeDragThreshold:48,elementsSelectable:49,snapGrid:50,deleteKey:5,connectionRadius:51,connectionLineType:52,connectionMode:53,connectionLineStyle:6,connectionLineContainerStyle:7,onMoveStart:8,onMove:9,onMoveEnd:10,isValidConnection:54,translateExtent:55,onlyRenderVisibleElements:56,panOnScrollMode:11,preventScrolling:12,zoomOnScroll:13,zoomOnDoubleClick:14,zoomOnPinch:15,panOnScroll:16,panOnDrag:17,selectionOnDrag:18,autoPanOnConnect:57,autoPanOnNodeDrag:58,onerror:59,ondelete:60,onedgecreate:61,attributionPosition:19,proOptions:20,defaultEdgeOptions:21,width:62,height:63,colorMode:64,onconnect:65,onconnectstart:66,onconnectend:67,onbeforedelete:68,oninit:69,nodeOrigin:70,paneClickDistance:22,nodeClickDistance:23,defaultMarkerColor:71,style:24,class:25},null,[-1,-1,-1,-1])}}const Oa=t=>({}),Xi=t=>({class:"button-svg"});function Da(t){let e,n,i,o,s;const l=t[8].default,r=Ue(l,t,t[7],Xi);let a=[{type:"button"},{class:n=Pe(["svelte-flow__controls-button",t[0]])},t[6]],u={};for(let f=0;f<a.length;f+=1)u=Me(u,a[f]);return{c(){e=Be("button"),r&&r.c(),this.h()},l(f){e=Le(f,"BUTTON",{type:!0,class:!0});var h=le(e);r&&r.l(h),h.forEach(N),this.h()},h(){It(e,u),se(e,"--xy-controls-button-background-color-props",t[1]),se(e,"--xy-controls-button-background-color-hover-props",t[2]),se(e,"--xy-controls-button-color-props",t[3]),se(e,"--xy-controls-button-color-hover-props",t[4]),se(e,"--xy-controls-button-border-color-props",t[5])},m(f,h){p(f,e,h),r&&r.m(e,null),e.autofocus&&e.focus(),i=!0,o||(s=De(e,"click",t[9]),o=!0)},p(f,[h]){r&&r.p&&(!i||h&128)&&qe(r,l,f,f[7],i?pe(l,f[7],h,Oa):je(f[7]),Xi),It(e,u=ct(a,[{type:"button"},(!i||h&1&&n!==(n=Pe(["svelte-flow__controls-button",f[0]])))&&{class:n},h&64&&f[6]])),se(e,"--xy-controls-button-background-color-props",f[1]),se(e,"--xy-controls-button-background-color-hover-props",f[2]),se(e,"--xy-controls-button-color-props",f[3]),se(e,"--xy-controls-button-color-hover-props",f[4]),se(e,"--xy-controls-button-border-color-props",f[5])},i(f){i||(A(r,f),i=!0)},o(f){R(r,f),i=!1},d(f){f&&N(e),r&&r.d(f),o=!1,s()}}}function Ha(t,e,n){const i=["class"];let o=Te(e,i),{$$slots:s={},$$scope:l}=e,{class:r=void 0}=e,a,u,f,h,d;function c(b){ke.call(this,t,b)}return t.$$set=b=>{e=Me(Me({},e),nt(b)),n(6,o=Te(e,i)),"class"in b&&n(0,r=b.class),"$$scope"in b&&n(7,l=b.$$scope)},[r,a,u,f,h,d,o,l,s,c]}class un extends he{constructor(e){super(),ge(this,e,Ha,Da,be,{class:0})}}function va(t){let e,n;return{c(){e=Ee("svg"),n=Ee("path"),this.h()},l(i){e=Ce(i,"svg",{xmlns:!0,viewBox:!0});var o=le(e);n=Ce(o,"path",{d:!0}),le(n).forEach(N),o.forEach(N),this.h()},h(){C(n,"d","M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"),C(e,"xmlns","http://www.w3.org/2000/svg"),C(e,"viewBox","0 0 32 32")},m(i,o){p(i,e,o),We(e,n)},p:Se,i:Se,o:Se,d(i){i&&N(e)}}}class Ta extends he{constructor(e){super(),ge(this,e,null,va,be,{})}}function Ia(t){let e,n;return{c(){e=Ee("svg"),n=Ee("path"),this.h()},l(i){e=Ce(i,"svg",{xmlns:!0,viewBox:!0});var o=le(e);n=Ce(o,"path",{d:!0}),le(n).forEach(N),o.forEach(N),this.h()},h(){C(n,"d","M0 0h32v4.2H0z"),C(e,"xmlns","http://www.w3.org/2000/svg"),C(e,"viewBox","0 0 32 5")},m(i,o){p(i,e,o),We(e,n)},p:Se,i:Se,o:Se,d(i){i&&N(e)}}}class Na extends he{constructor(e){super(),ge(this,e,null,Ia,be,{})}}function Va(t){let e,n;return{c(){e=Ee("svg"),n=Ee("path"),this.h()},l(i){e=Ce(i,"svg",{xmlns:!0,viewBox:!0});var o=le(e);n=Ce(o,"path",{d:!0}),le(n).forEach(N),o.forEach(N),this.h()},h(){C(n,"d","M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"),C(e,"xmlns","http://www.w3.org/2000/svg"),C(e,"viewBox","0 0 32 30")},m(i,o){p(i,e,o),We(e,n)},p:Se,i:Se,o:Se,d(i){i&&N(e)}}}class Ya extends he{constructor(e){super(),ge(this,e,null,Va,be,{})}}function Xa(t){let e,n;return{c(){e=Ee("svg"),n=Ee("path"),this.h()},l(i){e=Ce(i,"svg",{xmlns:!0,viewBox:!0});var o=le(e);n=Ce(o,"path",{d:!0}),le(n).forEach(N),o.forEach(N),this.h()},h(){C(n,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"),C(e,"xmlns","http://www.w3.org/2000/svg"),C(e,"viewBox","0 0 25 32")},m(i,o){p(i,e,o),We(e,n)},p:Se,i:Se,o:Se,d(i){i&&N(e)}}}class Aa extends he{constructor(e){super(),ge(this,e,null,Xa,be,{})}}function Wa(t){let e,n;return{c(){e=Ee("svg"),n=Ee("path"),this.h()},l(i){e=Ce(i,"svg",{xmlns:!0,viewBox:!0});var o=le(e);n=Ce(o,"path",{d:!0}),le(n).forEach(N),o.forEach(N),this.h()},h(){C(n,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"),C(e,"xmlns","http://www.w3.org/2000/svg"),C(e,"viewBox","0 0 25 32")},m(i,o){p(i,e,o),We(e,n)},p:Se,i:Se,o:Se,d(i){i&&N(e)}}}class Ba extends he{constructor(e){super(),ge(this,e,null,Wa,be,{})}}const La=t=>({}),Ai=t=>({}),Ka=t=>({}),Wi=t=>({});function Bi(t){let e,n,i,o;const s=[{class:"svelte-flow__controls-zoomin"},{title:"zoom in"},{"aria-label":"zoom in"},{disabled:t[9]},t[17]];let l={$$slots:{default:[Ra]},$$scope:{ctx:t}};for(let u=0;u<s.length;u+=1)l=Me(l,s[u]);e=new un({props:l}),e.$on("click",t[18]);const r=[{class:"svelte-flow__controls-zoomout"},{title:"zoom out"},{"aria-label":"zoom out"},{disabled:t[10]},t[17]];let a={$$slots:{default:[Za]},$$scope:{ctx:t}};for(let u=0;u<r.length;u+=1)a=Me(a,r[u]);return i=new un({props:a}),i.$on("click",t[19]),{c(){re(e.$$.fragment),n=He(),re(i.$$.fragment)},l(u){de(e.$$.fragment,u),n=ve(u),de(i.$$.fragment,u)},m(u,f){ae(e,u,f),p(u,n,f),ae(i,u,f),o=!0},p(u,f){const h=f[0]&131584?ct(s,[s[0],s[1],s[2],f[0]&512&&{disabled:u[9]},f[0]&131072&&Nt(u[17])]):{};f[1]&32&&(h.$$scope={dirty:f,ctx:u}),e.$set(h);const d=f[0]&132096?ct(r,[r[0],r[1],r[2],f[0]&1024&&{disabled:u[10]},f[0]&131072&&Nt(u[17])]):{};f[1]&32&&(d.$$scope={dirty:f,ctx:u}),i.$set(d)},i(u){o||(A(e.$$.fragment,u),A(i.$$.fragment,u),o=!0)},o(u){R(e.$$.fragment,u),R(i.$$.fragment,u),o=!1},d(u){u&&N(n),ue(e,u),ue(i,u)}}}function Ra(t){let e,n;return e=new Ta({}),{c(){re(e.$$.fragment)},l(i){de(e.$$.fragment,i)},m(i,o){ae(e,i,o),n=!0},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function Za(t){let e,n;return e=new Na({}),{c(){re(e.$$.fragment)},l(i){de(e.$$.fragment,i)},m(i,o){ae(e,i,o),n=!0},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function Li(t){let e,n;const i=[{class:"svelte-flow__controls-fitview"},{title:"fit view"},{"aria-label":"fit view"},t[17]];let o={$$slots:{default:[Fa]},$$scope:{ctx:t}};for(let s=0;s<i.length;s+=1)o=Me(o,i[s]);return e=new un({props:o}),e.$on("click",t[20]),{c(){re(e.$$.fragment)},l(s){de(e.$$.fragment,s)},m(s,l){ae(e,s,l),n=!0},p(s,l){const r=l[0]&131072?ct(i,[i[0],i[1],i[2],Nt(s[17])]):{};l[1]&32&&(r.$$scope={dirty:l,ctx:s}),e.$set(r)},i(s){n||(A(e.$$.fragment,s),n=!0)},o(s){R(e.$$.fragment,s),n=!1},d(s){ue(e,s)}}}function Fa(t){let e,n;return e=new Ya({}),{c(){re(e.$$.fragment)},l(i){de(e.$$.fragment,i)},m(i,o){ae(e,i,o),n=!0},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function Ki(t){let e,n;const i=[{class:"svelte-flow__controls-interactive"},{title:"toggle interactivity"},{"aria-label":"toggle interactivity"},t[17]];let o={$$slots:{default:[qa]},$$scope:{ctx:t}};for(let s=0;s<i.length;s+=1)o=Me(o,i[s]);return e=new un({props:o}),e.$on("click",t[21]),{c(){re(e.$$.fragment)},l(s){de(e.$$.fragment,s)},m(s,l){ae(e,s,l),n=!0},p(s,l){const r=l[0]&131072?ct(i,[i[0],i[1],i[2],Nt(s[17])]):{};l[0]&256|l[1]&32&&(r.$$scope={dirty:l,ctx:s}),e.$set(r)},i(s){n||(A(e.$$.fragment,s),n=!0)},o(s){R(e.$$.fragment,s),n=!1},d(s){ue(e,s)}}}function Ga(t){let e,n;return e=new Aa({}),{c(){re(e.$$.fragment)},l(i){de(e.$$.fragment,i)},m(i,o){ae(e,i,o),n=!0},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function Ua(t){let e,n;return e=new Ba({}),{c(){re(e.$$.fragment)},l(i){de(e.$$.fragment,i)},m(i,o){ae(e,i,o),n=!0},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function qa(t){let e,n,i,o;const s=[Ua,Ga],l=[];function r(a,u){return a[8]?0:1}return e=r(t),n=l[e]=s[e](t),{c(){n.c(),i=ze()},l(a){n.l(a),i=ze()},m(a,u){l[e].m(a,u),p(a,i,u),o=!0},p(a,u){let f=e;e=r(a),e!==f&&(Xe(),R(l[f],1,1,()=>{l[f]=null}),Ae(),n=l[e],n||(n=l[e]=s[e](a),n.c()),A(n,1),n.m(i.parentNode,i))},i(a){o||(A(n),o=!0)},o(a){R(n),o=!1},d(a){a&&N(i),l[e].d(a)}}}function ja(t){let e,n,i,o,s,l;const r=t[35].before,a=Ue(r,t,t[36],Wi);let u=t[1]&&Bi(t),f=t[2]&&Li(t),h=t[3]&&Ki(t);const d=t[35].default,c=Ue(d,t,t[36],null),b=t[35].after,m=Ue(b,t,t[36],Ai);return{c(){a&&a.c(),e=He(),u&&u.c(),n=He(),f&&f.c(),i=He(),h&&h.c(),o=He(),c&&c.c(),s=He(),m&&m.c()},l(y){a&&a.l(y),e=ve(y),u&&u.l(y),n=ve(y),f&&f.l(y),i=ve(y),h&&h.l(y),o=ve(y),c&&c.l(y),s=ve(y),m&&m.l(y)},m(y,g){a&&a.m(y,g),p(y,e,g),u&&u.m(y,g),p(y,n,g),f&&f.m(y,g),p(y,i,g),h&&h.m(y,g),p(y,o,g),c&&c.m(y,g),p(y,s,g),m&&m.m(y,g),l=!0},p(y,g){a&&a.p&&(!l||g[1]&32)&&qe(a,r,y,y[36],l?pe(r,y[36],g,Ka):je(y[36]),Wi),y[1]?u?(u.p(y,g),g[0]&2&&A(u,1)):(u=Bi(y),u.c(),A(u,1),u.m(n.parentNode,n)):u&&(Xe(),R(u,1,1,()=>{u=null}),Ae()),y[2]?f?(f.p(y,g),g[0]&4&&A(f,1)):(f=Li(y),f.c(),A(f,1),f.m(i.parentNode,i)):f&&(Xe(),R(f,1,1,()=>{f=null}),Ae()),y[3]?h?(h.p(y,g),g[0]&8&&A(h,1)):(h=Ki(y),h.c(),A(h,1),h.m(o.parentNode,o)):h&&(Xe(),R(h,1,1,()=>{h=null}),Ae()),c&&c.p&&(!l||g[1]&32)&&qe(c,d,y,y[36],l?pe(d,y[36],g,null):je(y[36]),null),m&&m.p&&(!l||g[1]&32)&&qe(m,b,y,y[36],l?pe(b,y[36],g,La):je(y[36]),Ai)},i(y){l||(A(a,y),A(u),A(f),A(h),A(c,y),A(m,y),l=!0)},o(y){R(a,y),R(u),R(f),R(h),R(c,y),R(m,y),l=!1},d(y){y&&(N(e),N(n),N(i),N(o),N(s)),a&&a.d(y),u&&u.d(y),f&&f.d(y),h&&h.d(y),c&&c.d(y),m&&m.d(y)}}}function pa(t){let e,n;return e=new Zn({props:{class:Pe(["svelte-flow__controls",t[7],t[6]]),position:t[0],"data-testid":"svelte-flow__controls","aria-label":t[4]??"Svelte Flow controls",style:t[5],$$slots:{default:[ja]},$$scope:{ctx:t}}}),{c(){re(e.$$.fragment)},l(i){de(e.$$.fragment,i)},m(i,o){ae(e,i,o),n=!0},p(i,o){const s={};o[0]&192&&(s.class=Pe(["svelte-flow__controls",i[7],i[6]])),o[0]&1&&(s.position=i[0]),o[0]&16&&(s["aria-label"]=i[4]??"Svelte Flow controls"),o[0]&32&&(s.style=i[5]),o[0]&1806|o[1]&32&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function Ja(t,e,n){let i,o,s,l,r,a,u,f,h,d,{$$slots:c={},$$scope:b}=e,{position:m="bottom-left"}=e,{showZoom:y=!0}=e,{showFitView:g=!0}=e,{showLock:E=!0}=e,{buttonBgColor:k=void 0}=e,{buttonBgColorHover:M=void 0}=e,{buttonColor:B=void 0}=e,{buttonColorHover:L=void 0}=e,{buttonBorderColor:I=void 0}=e,{ariaLabel:v=void 0}=e,{style:H=void 0}=e,{orientation:Y="vertical"}=e,{fitViewOptions:F=void 0}=e,{class:Q=""}=e;const{zoomIn:X,zoomOut:_,fitView:w,viewport:S,minZoom:P,maxZoom:O,nodesDraggable:D,nodesConnectable:W,elementsSelectable:q}=Ve();U(t,S,T=>n(30,a=T)),U(t,P,T=>n(31,u=T)),U(t,O,T=>n(29,r=T)),U(t,D,T=>n(34,d=T)),U(t,W,T=>n(33,h=T)),U(t,q,T=>n(32,f=T));const G={bgColor:k,bgColorHover:M,color:B,colorHover:L,borderColor:I},V=()=>{X()},x=()=>{_()},ee=()=>{w(F)},me=()=>{n(8,i=!i),D.set(i),W.set(i),q.set(i)};return t.$$set=T=>{"position"in T&&n(0,m=T.position),"showZoom"in T&&n(1,y=T.showZoom),"showFitView"in T&&n(2,g=T.showFitView),"showLock"in T&&n(3,E=T.showLock),"buttonBgColor"in T&&n(22,k=T.buttonBgColor),"buttonBgColorHover"in T&&n(23,M=T.buttonBgColorHover),"buttonColor"in T&&n(24,B=T.buttonColor),"buttonColorHover"in T&&n(25,L=T.buttonColorHover),"buttonBorderColor"in T&&n(26,I=T.buttonBorderColor),"ariaLabel"in T&&n(4,v=T.ariaLabel),"style"in T&&n(5,H=T.style),"orientation"in T&&n(27,Y=T.orientation),"fitViewOptions"in T&&n(28,F=T.fitViewOptions),"class"in T&&n(6,Q=T.class),"$$scope"in T&&n(36,b=T.$$scope)},t.$$.update=()=>{t.$$.dirty[1]&14&&n(8,i=d||h||f),t.$$.dirty[0]&1073741824|t.$$.dirty[1]&1&&n(10,o=a.zoom<=u),t.$$.dirty[0]&1610612736&&n(9,s=a.zoom>=r),t.$$.dirty[0]&134217728&&n(7,l=Y==="horizontal"?"horizontal":"vertical")},[m,y,g,E,v,H,Q,l,i,s,o,S,P,O,D,W,q,G,V,x,ee,me,k,M,B,L,I,Y,F,r,a,u,f,h,d,c,b]}class vu extends he{constructor(e){super(),ge(this,e,Ja,pa,be,{position:0,showZoom:1,showFitView:2,showLock:3,buttonBgColor:22,buttonBgColorHover:23,buttonColor:24,buttonColorHover:25,buttonBorderColor:26,ariaLabel:4,style:5,orientation:27,fitViewOptions:28,class:6},null,[-1,-1])}}var yt;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(yt||(yt={}));function Qa(t){let e,n;return{c(){e=Ee("circle"),this.h()},l(i){e=Ce(i,"circle",{cx:!0,cy:!0,r:!0,class:!0}),le(e).forEach(N),this.h()},h(){C(e,"cx",t[0]),C(e,"cy",t[0]),C(e,"r",t[0]),C(e,"class",n=Pe(["svelte-flow__background-pattern","dots",t[1]]))},m(i,o){p(i,e,o)},p(i,[o]){o&1&&C(e,"cx",i[0]),o&1&&C(e,"cy",i[0]),o&1&&C(e,"r",i[0]),o&2&&n!==(n=Pe(["svelte-flow__background-pattern","dots",i[1]]))&&C(e,"class",n)},i:Se,o:Se,d(i){i&&N(e)}}}function xa(t,e,n){let{radius:i=5}=e,{class:o=""}=e;return t.$$set=s=>{"radius"in s&&n(0,i=s.radius),"class"in s&&n(1,o=s.class)},[i,o]}class $a extends he{constructor(e){super(),ge(this,e,xa,Qa,be,{radius:0,class:1})}}function eu(t){let e,n,i;return{c(){e=Ee("path"),this.h()},l(o){e=Ce(o,"path",{"stroke-width":!0,d:!0,class:!0}),le(e).forEach(N),this.h()},h(){C(e,"stroke-width",t[0]),C(e,"d",n=`M${t[1][0]/2} 0 V${t[1][1]} M0 ${t[1][1]/2} H${t[1][0]}`),C(e,"class",i=Pe(["svelte-flow__background-pattern",t[2],t[3]]))},m(o,s){p(o,e,s)},p(o,[s]){s&1&&C(e,"stroke-width",o[0]),s&2&&n!==(n=`M${o[1][0]/2} 0 V${o[1][1]} M0 ${o[1][1]/2} H${o[1][0]}`)&&C(e,"d",n),s&12&&i!==(i=Pe(["svelte-flow__background-pattern",o[2],o[3]]))&&C(e,"class",i)},i:Se,o:Se,d(o){o&&N(e)}}}function tu(t,e,n){let{lineWidth:i=1}=e,{dimensions:o}=e,{variant:s=void 0}=e,{class:l=""}=e;return t.$$set=r=>{"lineWidth"in r&&n(0,i=r.lineWidth),"dimensions"in r&&n(1,o=r.dimensions),"variant"in r&&n(2,s=r.variant),"class"in r&&n(3,l=r.class)},[i,o,s,l]}class nu extends he{constructor(e){super(),ge(this,e,tu,eu,be,{lineWidth:0,dimensions:1,variant:2,class:3})}}function iu(t){let e,n;return e=new nu({props:{dimensions:t[6],variant:t[0],lineWidth:t[1],class:t[4]}}),{c(){re(e.$$.fragment)},l(i){de(e.$$.fragment,i)},m(i,o){ae(e,i,o),n=!0},p(i,o){const s={};o&64&&(s.dimensions=i[6]),o&1&&(s.variant=i[0]),o&2&&(s.lineWidth=i[1]),o&16&&(s.class=i[4]),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function ou(t){let e,n;return e=new $a({props:{radius:t[7]/2,class:t[4]}}),{c(){re(e.$$.fragment)},l(i){de(e.$$.fragment,i)},m(i,o){ae(e,i,o),n=!0},p(i,o){const s={};o&128&&(s.radius=i[7]/2),o&16&&(s.class=i[4]),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}function lu(t){let e,n,i,o,s,l,r,a,u,f,h,d,c;const b=[ou,iu],m=[];function y(g,E){return g[14]?0:1}return i=y(t),o=m[i]=b[i](t),{c(){e=Ee("svg"),n=Ee("pattern"),o.c(),f=Ee("rect"),this.h()},l(g){e=Ce(g,"svg",{class:!0,"data-testid":!0});var E=le(e);n=Ce(E,"pattern",{id:!0,x:!0,y:!0,width:!0,height:!0,patternUnits:!0,patternTransform:!0});var k=le(n);o.l(k),k.forEach(N),f=Ce(E,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),le(f).forEach(N),E.forEach(N),this.h()},h(){C(n,"id",t[11]),C(n,"x",s=t[9].x%t[8][0]),C(n,"y",l=t[9].y%t[8][1]),C(n,"width",r=t[8][0]),C(n,"height",a=t[8][1]),C(n,"patternUnits","userSpaceOnUse"),C(n,"patternTransform",u=`translate(-${t[10][0]},-${t[10][1]})`),C(f,"x","0"),C(f,"y","0"),C(f,"width","100%"),C(f,"height","100%"),C(f,"fill",h=`url(#${t[11]})`),C(e,"class",d=pn(Pe(["svelte-flow__background",t[5]]))+" svelte-1r7pe8d"),C(e,"data-testid","svelte-flow__background"),se(e,"--xy-background-color-props",t[2]),se(e,"--xy-background-pattern-color-props",t[3])},m(g,E){p(g,e,E),We(e,n),m[i].m(n,null),We(e,f),c=!0},p(g,[E]){o.p(g,E),(!c||E&2048)&&C(n,"id",g[11]),(!c||E&768&&s!==(s=g[9].x%g[8][0]))&&C(n,"x",s),(!c||E&768&&l!==(l=g[9].y%g[8][1]))&&C(n,"y",l),(!c||E&256&&r!==(r=g[8][0]))&&C(n,"width",r),(!c||E&256&&a!==(a=g[8][1]))&&C(n,"height",a),(!c||E&1024&&u!==(u=`translate(-${g[10][0]},-${g[10][1]})`))&&C(n,"patternTransform",u),(!c||E&2048&&h!==(h=`url(#${g[11]})`))&&C(f,"fill",h),(!c||E&32&&d!==(d=pn(Pe(["svelte-flow__background",g[5]]))+" svelte-1r7pe8d"))&&C(e,"class",d),E&4&&se(e,"--xy-background-color-props",g[2]),E&8&&se(e,"--xy-background-pattern-color-props",g[3])},i(g){c||(A(o),c=!0)},o(g){R(o),c=!1},d(g){g&&N(e),m[i].d()}}}const su={[yt.Dots]:1,[yt.Lines]:1,[yt.Cross]:6};function ru(t,e,n){let i,o,s,l,r,a,u,{id:f=void 0}=e,{variant:h=yt.Dots}=e,{gap:d=20}=e,{size:c=1}=e,{lineWidth:b=1}=e,{bgColor:m=void 0}=e,{patternColor:y=void 0}=e,{patternClass:g=void 0}=e,{class:E=""}=e;const{viewport:k,flowId:M}=Ve();U(t,k,H=>n(9,a=H)),U(t,M,H=>n(18,u=H));const B=c||su[h],L=h===yt.Dots,I=h===yt.Cross,v=Array.isArray(d)?d:[d,d];return t.$$set=H=>{"id"in H&&n(15,f=H.id),"variant"in H&&n(0,h=H.variant),"gap"in H&&n(16,d=H.gap),"size"in H&&n(17,c=H.size),"lineWidth"in H&&n(1,b=H.lineWidth),"bgColor"in H&&n(2,m=H.bgColor),"patternColor"in H&&n(3,y=H.patternColor),"patternClass"in H&&n(4,g=H.patternClass),"class"in H&&n(5,E=H.class)},t.$$.update=()=>{t.$$.dirty&294912&&n(11,i=`background-pattern-${u}-${f||""}`),t.$$.dirty&512&&n(8,o=[v[0]*a.zoom||1,v[1]*a.zoom||1]),t.$$.dirty&512&&n(7,s=B*a.zoom),t.$$.dirty&384&&n(6,l=I?[s,s]:o),t.$$.dirty&192&&n(10,r=L?[s/2,s/2]:[l[0]/2,l[1]/2])},[h,b,m,y,g,E,l,s,o,a,r,i,k,M,L,f,d,c,u]}class Tu extends he{constructor(e){super(),ge(this,e,ru,lu,be,{id:15,variant:0,gap:16,size:17,lineWidth:1,bgColor:2,patternColor:3,patternClass:4,class:5})}}function au(t){let e,n,i;return{c(){e=Ee("rect"),this.h()},l(o){e=Ce(o,"rect",{class:!0,x:!0,y:!0,rx:!0,ry:!0,width:!0,height:!0,style:!0,"shape-rendering":!0}),le(e).forEach(N),this.h()},h(){C(e,"class",n=Pe(["svelte-flow__minimap-node",t[10]])),C(e,"x",t[0]),C(e,"y",t[1]),C(e,"rx",t[4]),C(e,"ry",t[4]),C(e,"width",t[2]),C(e,"height",t[3]),C(e,"style",i=`${t[5]?`fill: ${t[5]};`:""}${t[7]?`stroke: ${t[7]};`:""}${t[8]?`stroke-width: ${t[8]};`:""}`),C(e,"shape-rendering",t[6]),oe(e,"selected",t[9])},m(o,s){p(o,e,s)},p(o,[s]){s&1024&&n!==(n=Pe(["svelte-flow__minimap-node",o[10]]))&&C(e,"class",n),s&1&&C(e,"x",o[0]),s&2&&C(e,"y",o[1]),s&16&&C(e,"rx",o[4]),s&16&&C(e,"ry",o[4]),s&4&&C(e,"width",o[2]),s&8&&C(e,"height",o[3]),s&416&&i!==(i=`${o[5]?`fill: ${o[5]};`:""}${o[7]?`stroke: ${o[7]};`:""}${o[8]?`stroke-width: ${o[8]};`:""}`)&&C(e,"style",i),s&64&&C(e,"shape-rendering",o[6]),s&1536&&oe(e,"selected",o[9])},i:Se,o:Se,d(o){o&&N(e)}}}function uu(t,e,n){let{x:i}=e,{y:o}=e,{width:s=0}=e,{height:l=0}=e,{borderRadius:r=5}=e,{color:a=void 0}=e,{shapeRendering:u}=e,{strokeColor:f=void 0}=e,{strokeWidth:h=2}=e,{selected:d=!1}=e,{class:c=""}=e;return t.$$set=b=>{"x"in b&&n(0,i=b.x),"y"in b&&n(1,o=b.y),"width"in b&&n(2,s=b.width),"height"in b&&n(3,l=b.height),"borderRadius"in b&&n(4,r=b.borderRadius),"color"in b&&n(5,a=b.color),"shapeRendering"in b&&n(6,u=b.shapeRendering),"strokeColor"in b&&n(7,f=b.strokeColor),"strokeWidth"in b&&n(8,h=b.strokeWidth),"selected"in b&&n(9,d=b.selected),"class"in b&&n(10,c=b.class)},[i,o,s,l,r,a,u,f,h,d,c]}class fu extends he{constructor(e){super(),ge(this,e,uu,au,be,{x:0,y:1,width:2,height:3,borderRadius:4,color:5,shapeRendering:6,strokeColor:7,strokeWidth:8,selected:9,class:10})}}function cu(t,e){const n=ls({domNode:t,panZoom:e.panZoom,getTransform:()=>{const o=j(e.viewport);return[o.x,o.y,o.zoom]},getViewScale:e.getViewScale});function i(o){n.update({translateExtent:o.translateExtent,width:o.width,height:o.height,inversePan:o.inversePan,zoomStep:o.zoomStep,pannable:o.pannable,zoomable:o.zoomable})}return{update:i,destroy(){n.destroy()}}}function Ri(t,e,n){const i=t.slice();i[55]=e[n];const o=i[20].get(i[55].id);return i[56]=o,i}function Dn(t){const e=t.slice(),n=mn(e[56]);return e[59]=n,e}function Zi(t){let e,n,i=[],o=new Map,s,l,r,a,u,f,h,d=t[1]&&Fi(t),c=_t(t[19]);const b=m=>m[55].id;for(let m=0;m<c.length;m+=1){let y=Ri(t,c,m),g=b(y);o.set(g,i[m]=Ui(g,y))}return{c(){e=Ee("svg"),d&&d.c(),n=ze();for(let m=0;m<i.length;m+=1)i[m].c();s=Ee("path"),this.h()},l(m){e=Ce(m,"svg",{width:!0,height:!0,viewBox:!0,class:!0,role:!0,"aria-labelledby":!0});var y=le(e);d&&d.l(y),n=ze();for(let g=0;g<i.length;g+=1)i[g].l(y);s=Ce(y,"path",{class:!0,d:!0,"fill-rule":!0,"pointer-events":!0}),le(s).forEach(N),y.forEach(N),this.h()},h(){C(s,"class","svelte-flow__minimap-mask"),C(s,"d",l="M"+(t[26]-t[15])+","+(t[25]-t[15])+"h"+(t[24]+t[15]*2)+"v"+(t[23]+t[15]*2)+"h"+(-t[24]-t[15]*2)+`z
      M`+t[18].x+","+t[18].y+"h"+t[18].width+"v"+t[18].height+"h"+-t[18].width+"z"),C(s,"fill-rule","evenodd"),C(s,"pointer-events","none"),C(e,"width",t[17]),C(e,"height",t[16]),C(e,"viewBox",r=t[26]+" "+t[25]+" "+t[24]+" "+t[23]),C(e,"class","svelte-flow__minimap-svg"),C(e,"role","img"),C(e,"aria-labelledby",t[41]),se(e,"--xy-minimap-mask-background-color-props",t[5]),se(e,"--xy-minimap-mask-stroke-color-props",t[6]),se(e,"--xy-minimap-mask-stroke-width-props",t[7]?t[7]*t[14]:void 0)},m(m,y){p(m,e,y),d&&d.m(e,null),We(e,n);for(let g=0;g<i.length;g+=1)i[g]&&i[g].m(e,null);We(e,s),u=!0,f||(h=Ze(a=cu.call(null,e,{panZoom:t[27],viewport:t[31],getViewScale:t[42],translateExtent:t[28],width:t[22],height:t[21],inversePan:t[10],zoomStep:t[11],pannable:t[8],zoomable:t[9]})),f=!0)},p(m,y){m[1]?d?d.p(m,y):(d=Fi(m),d.c(),d.m(e,n)):d&&(d.d(1),d=null),y[0]&1572876|y[1]&960&&(c=_t(m[19]),Xe(),i=dn(i,y,b,1,m,c,o,e,hn,Ui,s,Ri),Ae()),(!u||y[0]&126124032&&l!==(l="M"+(m[26]-m[15])+","+(m[25]-m[15])+"h"+(m[24]+m[15]*2)+"v"+(m[23]+m[15]*2)+"h"+(-m[24]-m[15]*2)+`z
      M`+m[18].x+","+m[18].y+"h"+m[18].width+"v"+m[18].height+"h"+-m[18].width+"z"))&&C(s,"d",l),(!u||y[0]&131072)&&C(e,"width",m[17]),(!u||y[0]&65536)&&C(e,"height",m[16]),(!u||y[0]&125829120&&r!==(r=m[26]+" "+m[25]+" "+m[24]+" "+m[23]))&&C(e,"viewBox",r),a&&Ye(a.update)&&y[0]&408948480&&a.update.call(null,{panZoom:m[27],viewport:m[31],getViewScale:m[42],translateExtent:m[28],width:m[22],height:m[21],inversePan:m[10],zoomStep:m[11],pannable:m[8],zoomable:m[9]}),y[0]&32&&se(e,"--xy-minimap-mask-background-color-props",m[5]),y[0]&64&&se(e,"--xy-minimap-mask-stroke-color-props",m[6]),y[0]&16512&&se(e,"--xy-minimap-mask-stroke-width-props",m[7]?m[7]*m[14]:void 0)},i(m){if(!u){for(let y=0;y<c.length;y+=1)A(i[y]);u=!0}},o(m){for(let y=0;y<i.length;y+=1)R(i[y]);u=!1},d(m){m&&N(e),d&&d.d();for(let y=0;y<i.length;y+=1)i[y].d();f=!1,h()}}}function Fi(t){let e,n;return{c(){e=Ee("title"),n=Wt(t[1]),this.h()},l(i){e=Ce(i,"title",{id:!0});var o=le(e);n=Bt(o,t[1]),o.forEach(N),this.h()},h(){C(e,"id",t[41])},m(i,o){p(i,e,o),We(e,n)},p(i,o){o[0]&2&&Lt(n,i[1])},d(i){i&&N(e)}}}function Gi(t){var s;let e,n;const i=[{x:t[56].internals.positionAbsolute.x},{y:t[56].internals.positionAbsolute.y},t[59],{selected:t[56].selected},{color:(s=t[37])==null?void 0:s.call(t,t[56])},{borderRadius:t[2]},{strokeColor:t[38](t[56])},{strokeWidth:t[3]},{shapeRendering:t[40]},{class:t[39](t[56])}];let o={};for(let l=0;l<i.length;l+=1)o=Me(o,i[l]);return e=new fu({props:o}),{c(){re(e.$$.fragment)},l(l){de(e.$$.fragment,l)},m(l,r){ae(e,l,r),n=!0},p(l,r){var u;const a=r[0]&1572876|r[1]&960?ct(i,[r[0]&1572864&&{x:l[56].internals.positionAbsolute.x},r[0]&1572864&&{y:l[56].internals.positionAbsolute.y},r[0]&1572864&&Nt(l[59]),r[0]&1572864&&{selected:l[56].selected},r[0]&1572864|r[1]&64&&{color:(u=l[37])==null?void 0:u.call(l,l[56])},r[0]&4&&{borderRadius:l[2]},r[0]&1572864|r[1]&128&&{strokeColor:l[38](l[56])},r[0]&8&&{strokeWidth:l[3]},r[1]&512&&{shapeRendering:l[40]},r[0]&1572864|r[1]&256&&{class:l[39](l[56])}]):{};e.$set(a)},i(l){n||(A(e.$$.fragment,l),n=!0)},o(l){R(e.$$.fragment,l),n=!1},d(l){ue(e,l)}}}function Ui(t,e){let n,i=e[56]&&ln(e[56]),o,s,l=i&&Gi(Dn(e));return{key:t,first:null,c(){n=ze(),l&&l.c(),o=ze(),this.h()},l(r){n=ze(),l&&l.l(r),o=ze(),this.h()},h(){this.first=n},m(r,a){p(r,n,a),l&&l.m(r,a),p(r,o,a),s=!0},p(r,a){e=r,a[0]&1572864&&(i=e[56]&&ln(e[56])),i?l?(l.p(Dn(e),a),a[0]&1572864&&A(l,1)):(l=Gi(Dn(e)),l.c(),A(l,1),l.m(o.parentNode,o)):l&&(Xe(),R(l,1,1,()=>{l=null}),Ae())},i(r){s||(A(l),s=!0)},o(r){R(l),s=!1},d(r){r&&(N(n),N(o)),l&&l.d(r)}}}function du(t){let e,n,i=t[27]&&Zi(t);return{c(){i&&i.c(),e=ze()},l(o){i&&i.l(o),e=ze()},m(o,s){i&&i.m(o,s),p(o,e,s),n=!0},p(o,s){o[27]?i?(i.p(o,s),s[0]&134217728&&A(i,1)):(i=Zi(o),i.c(),A(i,1),i.m(e.parentNode,e)):i&&(Xe(),R(i,1,1,()=>{i=null}),Ae())},i(o){n||(A(i),n=!0)},o(o){R(i),n=!1},d(o){o&&N(e),i&&i.d(o)}}}function hu(t){let e,n;return e=new Zn({props:{position:t[0],style:t[12]+(t[4]?`;--xy-minimap-background-color-props:${t[4]}`:""),class:Pe(["svelte-flow__minimap",t[13]]),"data-testid":"svelte-flow__minimap",$$slots:{default:[du]},$$scope:{ctx:t}}}),{c(){re(e.$$.fragment)},l(i){de(e.$$.fragment,i)},m(i,o){ae(e,i,o),n=!0},p(i,o){const s={};o[0]&1&&(s.position=i[0]),o[0]&4112&&(s.style=i[12]+(i[4]?`;--xy-minimap-background-color-props:${i[4]}`:"")),o[0]&8192&&(s.class=Pe(["svelte-flow__minimap",i[13]])),o[0]&536858606|o[1]&536870912&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){R(e.$$.fragment,i),n=!1},d(i){ue(e,i)}}}const Hn=t=>t instanceof Function?t:()=>t,gu=200,mu=150;function bu(t,e,n){let i,o,s,l,r,a,u,f,h,d,c,b,m,y,g,E,k,M,B,L,I,{position:v="bottom-right"}=e,{ariaLabel:H="Mini map"}=e,{nodeStrokeColor:Y="transparent"}=e,{nodeColor:F=void 0}=e,{nodeClass:Q=""}=e,{nodeBorderRadius:X=5}=e,{nodeStrokeWidth:_=2}=e,{bgColor:w=void 0}=e,{maskColor:S=void 0}=e,{maskStrokeColor:P=void 0}=e,{maskStrokeWidth:O=void 0}=e,{width:D=void 0}=e,{height:W=void 0}=e,{pannable:q=!0}=e,{zoomable:G=!0}=e,{inversePan:V=void 0}=e,{zoomStep:x=void 0}=e,{style:ee=""}=e,{class:me=""}=e;const{nodes:T,nodeLookup:ne,viewport:fe,width:ie,height:ye,flowId:_e,panZoom:we,translateExtent:K}=Ve();U(t,T,$=>n(19,y=$)),U(t,ne,$=>n(20,g=$)),U(t,fe,$=>n(53,E=$)),U(t,ie,$=>n(22,M=$)),U(t,ye,$=>n(21,k=$)),U(t,_e,$=>n(54,B=$)),U(t,we,$=>n(27,L=$)),U(t,K,$=>n(28,I=$));const Ie=F===void 0?void 0:Hn(F),Oe=Hn(Y),st=Hn(Q),rt=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",at=`svelte-flow__minimap-desc-${B}`;let Ke=i;const it=()=>a;return t.$$set=$=>{"position"in $&&n(0,v=$.position),"ariaLabel"in $&&n(1,H=$.ariaLabel),"nodeStrokeColor"in $&&n(43,Y=$.nodeStrokeColor),"nodeColor"in $&&n(44,F=$.nodeColor),"nodeClass"in $&&n(45,Q=$.nodeClass),"nodeBorderRadius"in $&&n(2,X=$.nodeBorderRadius),"nodeStrokeWidth"in $&&n(3,_=$.nodeStrokeWidth),"bgColor"in $&&n(4,w=$.bgColor),"maskColor"in $&&n(5,S=$.maskColor),"maskStrokeColor"in $&&n(6,P=$.maskStrokeColor),"maskStrokeWidth"in $&&n(7,O=$.maskStrokeWidth),"width"in $&&n(46,D=$.width),"height"in $&&n(47,W=$.height),"pannable"in $&&n(8,q=$.pannable),"zoomable"in $&&n(9,G=$.zoomable),"inversePan"in $&&n(10,V=$.inversePan),"zoomStep"in $&&n(11,x=$.zoomStep),"style"in $&&n(12,ee=$.style),"class"in $&&n(13,me=$.class)},t.$$.update=()=>{t.$$.dirty[0]&6291456|t.$$.dirty[1]&4194304&&n(18,i={x:-E.x/E.zoom,y:-E.y/E.zoom,width:M/E.zoom,height:k/E.zoom}),t.$$.dirty[0]&1835008&&n(48,Ke=g.size>0?io(Zt(g),i):i),t.$$.dirty[1]&32768&&n(17,o=D??gu),t.$$.dirty[1]&65536&&n(16,s=W??mu),t.$$.dirty[0]&131072|t.$$.dirty[1]&131072&&n(52,l=Ke.width/o),t.$$.dirty[0]&65536|t.$$.dirty[1]&131072&&n(51,r=Ke.height/s),t.$$.dirty[1]&3145728&&n(14,a=Math.max(l,r)),t.$$.dirty[0]&147456&&n(50,u=a*o),t.$$.dirty[0]&81920&&n(49,f=a*s),t.$$.dirty[0]&16384&&n(15,h=5*a),t.$$.dirty[0]&32768|t.$$.dirty[1]&655360&&n(26,d=Ke.x-(u-Ke.width)/2-h),t.$$.dirty[0]&32768|t.$$.dirty[1]&393216&&n(25,c=Ke.y-(f-Ke.height)/2-h),t.$$.dirty[0]&32768|t.$$.dirty[1]&524288&&n(24,b=u+h*2),t.$$.dirty[0]&32768|t.$$.dirty[1]&262144&&n(23,m=f+h*2)},[v,H,X,_,w,S,P,O,q,G,V,x,ee,me,a,h,s,o,i,y,g,k,M,m,b,c,d,L,I,T,ne,fe,ie,ye,_e,we,K,Ie,Oe,st,rt,at,it,Y,F,Q,D,W,Ke,f,u,r,l,E]}class Iu extends he{constructor(e){super(),ge(this,e,bu,hu,be,{position:0,ariaLabel:1,nodeStrokeColor:43,nodeColor:44,nodeClass:45,nodeBorderRadius:2,nodeStrokeWidth:3,bgColor:4,maskColor:5,maskStrokeColor:6,maskStrokeWidth:7,width:46,height:47,pannable:8,zoomable:9,inversePan:10,zoomStep:11,style:12,class:13},null,[-1,-1])}}export{Tu as B,vu as C,Ys as E,an as H,Iu as M,ce as P,gi as R,Hu as S,Du as X,yt as a,Pe as b,fr as c,Ou as d,Pu as e,zu as f,lo as g,oo as h,Mu as i,Hl as j,Rn as k,ln as l,yn as m,Ln as n,nn as o,gn as p,ao as q,Il as r,Ve as u};

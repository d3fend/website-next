import{s as ke,c as et,e as We,d as ve,f as ge,i as W,x as M,I as le,k as $,p as Me,u as tt,g as nt,a as it,A as kt,an as xt,o as j,b as Ye,t as Kt,j as Xe,h as Bt,m as Rt,a0 as Te,_ as Pe,a1 as ot,al as Re,B as Ne,as as q,G as fe,M as ze,v as we,N as Oe,am as $t,q as dn,r as en,Y as hn,L as Kn,at as Bi,K as Ri,S as tn,W as _e,l as je,n as Ae,$ as nn,y as $o,a2 as el,ak as tl,ao as nl,au as il,z as Jn,Z as Qn}from"./scheduler.DDVliNtX.js";import{S as me,i as ye,t as G,a as J,c as ce,b as be,m as de,d as he,g as Ze,e as Fe}from"./index.iWffroUJ.js";import{g as gn,a as Zi}from"./spread.CgU5AtxT.js";import{w as ne,r as pe,d as Tt}from"./index.C6plYK4b.js";import{e as _t,u as mn,o as yn}from"./each.BFyodu2L.js";import{g as ol}from"./globals.D0QH3NT1.js";import{s as qe,k as Fi,l as Bn,T as zn,m as On,t as ll}from"./transform.B54KPHx3.js";function sl(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Je(t,e){if(t=sl(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}}return[t.pageX,t.pageY]}const rl={passive:!1},Wt={capture:!0,passive:!1};function Dn(t){t.stopImmediatePropagation()}function Nt(t){t.preventDefault(),t.stopImmediatePropagation()}function Gi(t){var e=t.document.documentElement,n=qe(t).on("dragstart.drag",Nt,Wt);"onselectstart"in e?n.on("selectstart.drag",Nt,Wt):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Ui(t,e){var n=t.document.documentElement,i=qe(t).on("dragstart.drag",null);e&&(i.on("click.drag",Nt,Wt),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const qt=t=>()=>t;function An(t,{sourceEvent:e,subject:n,target:i,identifier:o,active:s,x:r,y:l,dx:a,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}An.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function al(t){return!t.ctrlKey&&!t.button}function ul(){return this.parentNode}function fl(t,e){return e??{x:t.x,y:t.y}}function cl(){return navigator.maxTouchPoints||"ontouchstart"in this}function qi(){var t=al,e=ul,n=fl,i=cl,o={},s=Fi("start","drag","end"),r=0,l,a,u,d,h=0;function f(E){E.on("mousedown.drag",c).filter(i).on("touchstart.drag",C).on("touchmove.drag",g,rl).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(E,X){if(!(d||!t.call(this,E,X))){var K=k(this,e.call(this,E,X),E,X,"mouse");K&&(qe(E.view).on("mousemove.drag",y,Wt).on("mouseup.drag",m,Wt),Gi(E.view),Dn(E),u=!1,l=E.clientX,a=E.clientY,K("start",E))}}function y(E){if(Nt(E),!u){var X=E.clientX-l,K=E.clientY-a;u=X*X+K*K>h}o.mouse("drag",E)}function m(E){qe(E.view).on("mousemove.drag mouseup.drag",null),Ui(E.view,u),Nt(E),o.mouse("end",E)}function C(E,X){if(t.call(this,E,X)){var K=E.changedTouches,H=e.call(this,E,X),I=K.length,D,A;for(D=0;D<I;++D)(A=k(this,H,E,X,K[D].identifier,K[D]))&&(Dn(E),A("start",E,K[D]))}}function g(E){var X=E.changedTouches,K=X.length,H,I;for(H=0;H<K;++H)(I=o[X[H].identifier])&&(Nt(E),I("drag",E,X[H]))}function w(E){var X=E.changedTouches,K=X.length,H,I;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),H=0;H<K;++H)(I=o[X[H].identifier])&&(Dn(E),I("end",E,X[H]))}function k(E,X,K,H,I,D){var A=s.copy(),Z=Je(D||K,X),v,B,b;if((b=n.call(E,new An("beforestart",{sourceEvent:K,target:f,identifier:I,active:r,x:Z[0],y:Z[1],dx:0,dy:0,dispatch:A}),H))!=null)return v=b.x-Z[0]||0,B=b.y-Z[1]||0,function T(_,P,O){var z=Z,Y;switch(_){case"start":o[I]=T,Y=r++;break;case"end":delete o[I],--r;case"drag":Z=Je(O||P,X),Y=r;break}A.call(_,E,new An(_,{sourceEvent:P,subject:b,target:f,identifier:I,active:Y,x:Z[0]+v,y:Z[1]+B,dx:Z[0]-z[0],dy:Z[1]-z[1],dispatch:A}),H)}}return f.filter=function(E){return arguments.length?(t=typeof E=="function"?E:qt(!!E),f):t},f.container=function(E){return arguments.length?(e=typeof E=="function"?E:qt(E),f):e},f.subject=function(E){return arguments.length?(n=typeof E=="function"?E:qt(E),f):n},f.touchable=function(E){return arguments.length?(i=typeof E=="function"?E:qt(!!E),f):i},f.on=function(){var E=s.on.apply(s,arguments);return E===s?f:E},f.clickDistance=function(E){return arguments.length?(h=(E=+E)*E,f):Math.sqrt(h)},f}var dl=1e-12;function xn(t){return((t=Math.exp(t))+1/t)/2}function hl(t){return((t=Math.exp(t))-1/t)/2}function gl(t){return((t=Math.exp(2*t))-1)/(t+1)}const ml=function t(e,n,i){function o(s,r){var l=s[0],a=s[1],u=s[2],d=r[0],h=r[1],f=r[2],c=d-l,y=h-a,m=c*c+y*y,C,g;if(m<dl)g=Math.log(f/u)/e,C=function(H){return[l+H*c,a+H*y,u*Math.exp(e*H*g)]};else{var w=Math.sqrt(m),k=(f*f-u*u+i*m)/(2*u*n*w),E=(f*f-u*u-i*m)/(2*f*n*w),X=Math.log(Math.sqrt(k*k+1)-k),K=Math.log(Math.sqrt(E*E+1)-E);g=(K-X)/e,C=function(H){var I=H*g,D=xn(X),A=u/(n*w)*(D*gl(e*I+X)-hl(X));return[l+A*c,a+A*y,u*D/xn(e*I+X)]}}return C.duration=g*1e3*e/Math.SQRT2,C}return o.rho=function(s){var r=Math.max(.001,+s),l=r*r,a=l*l;return t(r,l,a)},o}(Math.SQRT2,2,4),jt=t=>()=>t;function yl(t,{sourceEvent:e,target:n,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function In(t){t.stopImmediatePropagation()}function At(t){t.preventDefault(),t.stopImmediatePropagation()}function bl(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function _l(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function $n(){return this.__zoom||Bn}function kl(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function wl(){return navigator.maxTouchPoints||"ontouchstart"in this}function Sl(t,e,n){var i=t.invertX(e[0][0])-n[0][0],o=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],r=t.invertY(e[1][1])-n[1][1];return t.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),r>s?(s+r)/2:Math.min(0,s)||Math.max(0,r))}function ji(){var t=bl,e=_l,n=Sl,i=kl,o=wl,s=[0,1/0],r=[[-1/0,-1/0],[1/0,1/0]],l=250,a=ml,u=Fi("start","zoom","end"),d,h,f,c=500,y=150,m=0,C=10;function g(b){b.property("__zoom",$n).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",A).filter(o).on("touchstart.zoom",Z).on("touchmove.zoom",v).on("touchend.zoom touchcancel.zoom",B).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(b,T,_,P){var O=b.selection?b.selection():b;O.property("__zoom",$n),b!==O?X(b,T,_,P):O.interrupt().each(function(){K(this,arguments).event(P).start().zoom(null,typeof T=="function"?T.apply(this,arguments):T).end()})},g.scaleBy=function(b,T,_,P){g.scaleTo(b,function(){var O=this.__zoom.k,z=typeof T=="function"?T.apply(this,arguments):T;return O*z},_,P)},g.scaleTo=function(b,T,_,P){g.transform(b,function(){var O=e.apply(this,arguments),z=this.__zoom,Y=_==null?E(O):typeof _=="function"?_.apply(this,arguments):_,F=z.invert(Y),U=typeof T=="function"?T.apply(this,arguments):T;return n(k(w(z,U),Y,F),O,r)},_,P)},g.translateBy=function(b,T,_,P){g.transform(b,function(){return n(this.__zoom.translate(typeof T=="function"?T.apply(this,arguments):T,typeof _=="function"?_.apply(this,arguments):_),e.apply(this,arguments),r)},null,P)},g.translateTo=function(b,T,_,P,O){g.transform(b,function(){var z=e.apply(this,arguments),Y=this.__zoom,F=P==null?E(z):typeof P=="function"?P.apply(this,arguments):P;return n(Bn.translate(F[0],F[1]).scale(Y.k).translate(typeof T=="function"?-T.apply(this,arguments):-T,typeof _=="function"?-_.apply(this,arguments):-_),z,r)},P,O)};function w(b,T){return T=Math.max(s[0],Math.min(s[1],T)),T===b.k?b:new zn(T,b.x,b.y)}function k(b,T,_){var P=T[0]-_[0]*b.k,O=T[1]-_[1]*b.k;return P===b.x&&O===b.y?b:new zn(b.k,P,O)}function E(b){return[(+b[0][0]+ +b[1][0])/2,(+b[0][1]+ +b[1][1])/2]}function X(b,T,_,P){b.on("start.zoom",function(){K(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){K(this,arguments).event(P).end()}).tween("zoom",function(){var O=this,z=arguments,Y=K(O,z).event(P),F=e.apply(O,z),U=_==null?E(F):typeof _=="function"?_.apply(O,z):_,p=Math.max(F[1][0]-F[0][0],F[1][1]-F[0][1]),N=O.__zoom,ee=typeof T=="function"?T.apply(O,z):T,ie=a(N.invert(U).concat(p/N.k),ee.invert(U).concat(p/ee.k));return function(R){if(R===1)R=ee;else{var te=ie(R),oe=p/te[2];R=new zn(oe,U[0]-te[0]*oe,U[1]-te[1]*oe)}Y.zoom(null,R)}})}function K(b,T,_){return!_&&b.__zooming||new H(b,T)}function H(b,T){this.that=b,this.args=T,this.active=0,this.sourceEvent=null,this.extent=e.apply(b,T),this.taps=0}H.prototype={event:function(b){return b&&(this.sourceEvent=b),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(b,T){return this.mouse&&b!=="mouse"&&(this.mouse[1]=T.invert(this.mouse[0])),this.touch0&&b!=="touch"&&(this.touch0[1]=T.invert(this.touch0[0])),this.touch1&&b!=="touch"&&(this.touch1[1]=T.invert(this.touch1[0])),this.that.__zoom=T,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(b){var T=qe(this.that).datum();u.call(b,this.that,new yl(b,{sourceEvent:this.sourceEvent,target:g,type:b,transform:this.that.__zoom,dispatch:u}),T)}};function I(b,...T){if(!t.apply(this,arguments))return;var _=K(this,T).event(b),P=this.__zoom,O=Math.max(s[0],Math.min(s[1],P.k*Math.pow(2,i.apply(this,arguments)))),z=Je(b);if(_.wheel)(_.mouse[0][0]!==z[0]||_.mouse[0][1]!==z[1])&&(_.mouse[1]=P.invert(_.mouse[0]=z)),clearTimeout(_.wheel);else{if(P.k===O)return;_.mouse=[z,P.invert(z)],On(this),_.start()}At(b),_.wheel=setTimeout(Y,y),_.zoom("mouse",n(k(w(P,O),_.mouse[0],_.mouse[1]),_.extent,r));function Y(){_.wheel=null,_.end()}}function D(b,...T){if(f||!t.apply(this,arguments))return;var _=b.currentTarget,P=K(this,T,!0).event(b),O=qe(b.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",p,!0),z=Je(b,_),Y=b.clientX,F=b.clientY;Gi(b.view),In(b),P.mouse=[z,this.__zoom.invert(z)],On(this),P.start();function U(N){if(At(N),!P.moved){var ee=N.clientX-Y,ie=N.clientY-F;P.moved=ee*ee+ie*ie>m}P.event(N).zoom("mouse",n(k(P.that.__zoom,P.mouse[0]=Je(N,_),P.mouse[1]),P.extent,r))}function p(N){O.on("mousemove.zoom mouseup.zoom",null),Ui(N.view,P.moved),At(N),P.event(N).end()}}function A(b,...T){if(t.apply(this,arguments)){var _=this.__zoom,P=Je(b.changedTouches?b.changedTouches[0]:b,this),O=_.invert(P),z=_.k*(b.shiftKey?.5:2),Y=n(k(w(_,z),P,O),e.apply(this,T),r);At(b),l>0?qe(this).transition().duration(l).call(X,Y,P,b):qe(this).call(g.transform,Y,P,b)}}function Z(b,...T){if(t.apply(this,arguments)){var _=b.touches,P=_.length,O=K(this,T,b.changedTouches.length===P).event(b),z,Y,F,U;for(In(b),Y=0;Y<P;++Y)F=_[Y],U=Je(F,this),U=[U,this.__zoom.invert(U),F.identifier],O.touch0?!O.touch1&&O.touch0[2]!==U[2]&&(O.touch1=U,O.taps=0):(O.touch0=U,z=!0,O.taps=1+!!d);d&&(d=clearTimeout(d)),z&&(O.taps<2&&(h=U[0],d=setTimeout(function(){d=null},c)),On(this),O.start())}}function v(b,...T){if(this.__zooming){var _=K(this,T).event(b),P=b.changedTouches,O=P.length,z,Y,F,U;for(At(b),z=0;z<O;++z)Y=P[z],F=Je(Y,this),_.touch0&&_.touch0[2]===Y.identifier?_.touch0[0]=F:_.touch1&&_.touch1[2]===Y.identifier&&(_.touch1[0]=F);if(Y=_.that.__zoom,_.touch1){var p=_.touch0[0],N=_.touch0[1],ee=_.touch1[0],ie=_.touch1[1],R=(R=ee[0]-p[0])*R+(R=ee[1]-p[1])*R,te=(te=ie[0]-N[0])*te+(te=ie[1]-N[1])*te;Y=w(Y,Math.sqrt(R/te)),F=[(p[0]+ee[0])/2,(p[1]+ee[1])/2],U=[(N[0]+ie[0])/2,(N[1]+ie[1])/2]}else if(_.touch0)F=_.touch0[0],U=_.touch0[1];else return;_.zoom("touch",n(k(Y,F,U),_.extent,r))}}function B(b,...T){if(this.__zooming){var _=K(this,T).event(b),P=b.changedTouches,O=P.length,z,Y;for(In(b),f&&clearTimeout(f),f=setTimeout(function(){f=null},c),z=0;z<O;++z)Y=P[z],_.touch0&&_.touch0[2]===Y.identifier?delete _.touch0:_.touch1&&_.touch1[2]===Y.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2&&(Y=Je(Y,this),Math.hypot(h[0]-Y[0],h[1]-Y[1])<C)){var F=qe(this).on("dblclick.zoom");F&&F.apply(this,arguments)}}}return g.wheelDelta=function(b){return arguments.length?(i=typeof b=="function"?b:jt(+b),g):i},g.filter=function(b){return arguments.length?(t=typeof b=="function"?b:jt(!!b),g):t},g.touchable=function(b){return arguments.length?(o=typeof b=="function"?b:jt(!!b),g):o},g.extent=function(b){return arguments.length?(e=typeof b=="function"?b:jt([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),g):e},g.scaleExtent=function(b){return arguments.length?(s[0]=+b[0],s[1]=+b[1],g):[s[0],s[1]]},g.translateExtent=function(b){return arguments.length?(r[0][0]=+b[0][0],r[1][0]=+b[1][0],r[0][1]=+b[0][1],r[1][1]=+b[1][1],g):[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},g.constrain=function(b){return arguments.length?(n=b,g):n},g.duration=function(b){return arguments.length?(l=+b,g):l},g.interpolate=function(b){return arguments.length?(a=b,g):a},g.on=function(){var b=u.on.apply(u,arguments);return b===u?g:b},g.clickDistance=function(b){return arguments.length?(m=(b=+b)*b,g):Math.sqrt(m)},g.tapDistance=function(b){return arguments.length?(C=+b,g):C},g}function Ce(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=Ce(t[n]))!==""&&(e+=(e&&" ")+i);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}const Zt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:i}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`},on=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var St;(function(t){t.Strict="strict",t.Loose="loose"})(St||(St={}));var $e;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})($e||($e={}));var ln;(function(t){t.Partial="partial",t.Full="full"})(ln||(ln={}));const Vn={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Ht;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Ht||(Ht={}));var sn;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(sn||(sn={}));var ae;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(ae||(ae={}));const ei={[ae.Left]:ae.Right,[ae.Right]:ae.Left,[ae.Top]:ae.Bottom,[ae.Bottom]:ae.Top};function El(t,e){if(!t&&!e)return!0;if(!t||!e||t.size!==e.size)return!1;if(!t.size&&!e.size)return!0;for(const n of t.keys())if(!e.has(n))return!1;return!0}function ti(t,e,n){if(!n)return;const i=[];t.forEach((o,s)=>{e!=null&&e.has(s)||i.push(o)}),i.length&&n(i)}function ni(t){return t===null?null:t?"valid":"invalid"}const Ml=t=>"id"in t&&"source"in t&&"target"in t,Qa=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),Rn=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),bn=(t,e=[0,0])=>{const{width:n,height:i}=Et(t),o=t.origin??e,s=n*o[0],r=i*o[1];return{x:t.position.x-s,y:t.position.y-r}},xa=(t,e={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,o)=>{const s=typeof o=="string";let r=!e.nodeLookup&&!s?o:void 0;e.nodeLookup&&(r=s?e.nodeLookup.get(o):Rn(o)?o:e.nodeLookup.get(o.id));const l=r?rn(r,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return _n(i,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return kn(n)},Ft=(t,e={})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(i=>{if(e.filter===void 0||e.filter(i)){const o=rn(i);n=_n(n,o)}}),kn(n)},pi=(t,e,[n,i,o]=[0,0,1],s=!1,r=!1)=>{const l={...Sn(e,[n,i,o]),width:e.width/o,height:e.height/o},a=[];for(const u of t.values()){const{measured:d,selectable:h=!0,hidden:f=!1}=u;if(r&&!h||f)continue;const c=d.width??u.width??u.initialWidth??null,y=d.height??u.height??u.initialHeight??null,m=Zn(l,wn(u)),C=(c??0)*(y??0),g=s&&m>0;(!u.internals.handleBounds||g||m>=C||u.dragging)&&a.push(u)}return a},Wn=(t,e)=>{const n=new Set;return t.forEach(i=>{n.add(i.id)}),e.filter(i=>n.has(i.source)||n.has(i.target))};function ii(t,e){const n=new Map,i=e!=null&&e.nodes?new Set(e.nodes.map(o=>o.id)):null;return t.forEach(o=>{o.measured.width&&o.measured.height&&((e==null?void 0:e.includeHiddenNodes)||!o.hidden)&&(!i||i.has(o.id))&&n.set(o.id,o)}),n}async function oi({nodes:t,width:e,height:n,panZoom:i,minZoom:o,maxZoom:s},r){if(t.size===0)return Promise.resolve(!1);const l=Ft(t),a=$i(l,e,n,(r==null?void 0:r.minZoom)??o,(r==null?void 0:r.maxZoom)??s,(r==null?void 0:r.padding)??.1);return await i.setViewport(a,{duration:r==null?void 0:r.duration}),Promise.resolve(!0)}function Cl({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:o,onError:s}){const r=n.get(t),l=r.parentId?n.get(r.parentId):void 0,{x:a,y:u}=l?l.internals.positionAbsolute:{x:0,y:0},d=r.origin??i;let h=o;if(r.extent==="parent"&&!r.expandParent)if(!l)s==null||s("005",Zt.error005());else{const c=l.measured.width,y=l.measured.height;c&&y&&(h=[[a,u],[a+c,u+y]])}else l&&vt(r.extent)&&(h=[[r.extent[0][0]+a,r.extent[0][1]+u],[r.extent[1][0]+a,r.extent[1][1]+u]]);const f=vt(h)?Xt(e,h,r.measured):e;return{position:{x:f.x-a+r.measured.width*d[0],y:f.y-u+r.measured.height*d[1]},positionAbsolute:f}}async function Pl({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:i,onBeforeDelete:o}){const s=new Set(t.map(f=>f.id)),r=[];for(const f of n){if(f.deletable===!1)continue;const c=s.has(f.id),y=!c&&f.parentId&&r.find(m=>m.id===f.parentId);(c||y)&&r.push(f)}const l=new Set(e.map(f=>f.id)),a=i.filter(f=>f.deletable!==!1),d=Wn(r,a);for(const f of a)l.has(f.id)&&!d.find(y=>y.id===f.id)&&d.push(f);if(!o)return{edges:d,nodes:r};const h=await o({nodes:r,edges:d});return typeof h=="boolean"?h?{edges:d,nodes:r}:{edges:[],nodes:[]}:h}const Yt=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Xt=(t={x:0,y:0},e,n)=>({x:Yt(t.x,e[0][0],e[1][0]-((n==null?void 0:n.width)??0)),y:Yt(t.y,e[0][1],e[1][1]-((n==null?void 0:n.height)??0))});function Ji(t,e,n){const{width:i,height:o}=Et(n),{x:s,y:r}=n.internals.positionAbsolute;return Xt(t,[[s,r],[s+i,r+o]],e)}const li=(t,e,n)=>t<e?Yt(Math.abs(t-e),1,e)/e:t>n?-Yt(Math.abs(t-n),1,e)/e:0,Qi=(t,e,n=15,i=40)=>{const o=li(t.x,i,e.width-i)*n,s=li(t.y,i,e.height-i)*n;return[o,s]},_n=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),vn=({x:t,y:e,width:n,height:i})=>({x:t,y:e,x2:t+n,y2:e+i}),kn=({x:t,y:e,x2:n,y2:i})=>({x:t,y:e,width:n-t,height:i-e}),wn=(t,e=[0,0])=>{var o,s;const{x:n,y:i}=Rn(t)?t.internals.positionAbsolute:bn(t,e);return{x:n,y:i,width:((o=t.measured)==null?void 0:o.width)??t.width??t.initialWidth??0,height:((s=t.measured)==null?void 0:s.height)??t.height??t.initialHeight??0}},rn=(t,e=[0,0])=>{var o,s;const{x:n,y:i}=Rn(t)?t.internals.positionAbsolute:bn(t,e);return{x:n,y:i,x2:n+(((o=t.measured)==null?void 0:o.width)??t.width??t.initialWidth??0),y2:i+(((s=t.measured)==null?void 0:s.height)??t.height??t.initialHeight??0)}},xi=(t,e)=>kn(_n(vn(t),vn(e))),Zn=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*i)},$a=t=>Qe(t.width)&&Qe(t.height)&&Qe(t.x)&&Qe(t.y),Qe=t=>!isNaN(t)&&isFinite(t),zl=(t,e)=>{},Fn=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),Sn=({x:t,y:e},[n,i,o],s=!1,r=[1,1])=>{const l={x:(t-n)/o,y:(e-i)/o};return s?Fn(l,r):l},Ol=({x:t,y:e},[n,i,o])=>({x:t*o+n,y:e*o+i}),$i=(t,e,n,i,o,s)=>{const r=e/(t.width*(1+s)),l=n/(t.height*(1+s)),a=Math.min(r,l),u=Yt(a,i,o),d=t.x+t.width/2,h=t.y+t.height/2,f=e/2-d*u,c=n/2-h*u;return{x:f,y:c,zoom:u}},an=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0};function vt(t){return t!==void 0&&t!=="parent"}function Et(t){var e,n;return{width:((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth??0,height:((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight??0}}function un(t){var e,n;return(((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth)!==void 0&&(((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight)!==void 0}function eu(t,e={width:0,height:0},n,i,o){let s=n;const r={...t};for(;s;){const l=i.get(s);if(s=l==null?void 0:l.parentId,l){const a=l.origin||o;r.x+=l.internals.positionAbsolute.x-(e.width??0)*a[0],r.y+=l.internals.positionAbsolute.y-(e.height??0)*a[1]}}return r}function Vt(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:i}){const{x:o,y:s}=ut(t),r=Sn({x:o,y:s},i),{x:l,y:a}=n?Fn(r,e):r;return{xSnapped:l,ySnapped:a,...r}}const eo=t=>({width:t.offsetWidth,height:t.offsetHeight}),Dl=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},Il=["INPUT","SELECT","TEXTAREA"];function Tl(t){var i,o;const e=((o=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:o[0])||t.target;return Il.includes(e==null?void 0:e.nodeName)||(e==null?void 0:e.hasAttribute("contenteditable"))||!!(e!=null&&e.closest(".nokey"))}const to=t=>"clientX"in t,ut=(t,e)=>{var s,r;const n=to(t),i=n?t.clientX:(s=t.touches)==null?void 0:s[0].clientX,o=n?t.clientY:(r=t.touches)==null?void 0:r[0].clientY;return{x:i-((e==null?void 0:e.left)??0),y:o-((e==null?void 0:e.top)??0)}},si=(t,e,n,i,o)=>{const s=e.querySelectorAll(`.${t}`);return!s||!s.length?null:Array.from(s).map(r=>{const l=r.getBoundingClientRect();return{id:r.getAttribute("data-handleid"),type:t,nodeId:o,position:r.getAttribute("data-handlepos"),x:(l.left-n.left)/i,y:(l.top-n.top)/i,...eo(r)}})};function Nl({sourceX:t,sourceY:e,targetX:n,targetY:i,sourceControlX:o,sourceControlY:s,targetControlX:r,targetControlY:l}){const a=t*.125+o*.375+r*.375+n*.125,u=e*.125+s*.375+l*.375+i*.125,d=Math.abs(a-t),h=Math.abs(u-e);return[a,u,d,h]}function pt(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function ri({pos:t,x1:e,y1:n,x2:i,y2:o,c:s}){switch(t){case ae.Left:return[e-pt(e-i,s),n];case ae.Right:return[e+pt(i-e,s),n];case ae.Top:return[e,n-pt(n-o,s)];case ae.Bottom:return[e,n+pt(o-n,s)]}}function no({sourceX:t,sourceY:e,sourcePosition:n=ae.Bottom,targetX:i,targetY:o,targetPosition:s=ae.Top,curvature:r=.25}){const[l,a]=ri({pos:n,x1:t,y1:e,x2:i,y2:o,c:r}),[u,d]=ri({pos:s,x1:i,y1:o,x2:t,y2:e,c:r}),[h,f,c,y]=Nl({sourceX:t,sourceY:e,targetX:i,targetY:o,sourceControlX:l,sourceControlY:a,targetControlX:u,targetControlY:d});return[`M${t},${e} C${l},${a} ${u},${d} ${i},${o}`,h,f,c,y]}function io({sourceX:t,sourceY:e,targetX:n,targetY:i}){const o=Math.abs(n-t)/2,s=n<t?n+o:n-o,r=Math.abs(i-e)/2,l=i<e?i+r:i-r;return[s,l,o,r]}function Hl({sourceNode:t,targetNode:e,selected:n=!1,zIndex:i=0,elevateOnSelect:o=!1}){if(!o)return i;const s=n||e.selected||t.selected,r=Math.max(t.internals.z||0,e.internals.z||0,1e3);return i+(s?r:0)}function Yl({sourceNode:t,targetNode:e,width:n,height:i,transform:o}){const s=_n(rn(t),rn(e));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const r={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:i/o[2]};return Zn(r,kn(s))>0}const Xl=({source:t,sourceHandle:e,target:n,targetHandle:i})=>`xy-edge__${t}${e||""}-${n}${i||""}`,Al=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),Vl=(t,e)=>{if(!t.source||!t.target)return e;let n;return Ml(t)?n={...t}:n={...t,id:Xl(t)},Al(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function oo({sourceX:t,sourceY:e,targetX:n,targetY:i}){const[o,s,r,l]=io({sourceX:t,sourceY:e,targetX:n,targetY:i});return[`M ${t},${e}L ${n},${i}`,o,s,r,l]}const ai={[ae.Left]:{x:-1,y:0},[ae.Right]:{x:1,y:0},[ae.Top]:{x:0,y:-1},[ae.Bottom]:{x:0,y:1}},Wl=({source:t,sourcePosition:e=ae.Bottom,target:n})=>e===ae.Left||e===ae.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},ui=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function vl({source:t,sourcePosition:e=ae.Bottom,target:n,targetPosition:i=ae.Top,center:o,offset:s}){const r=ai[e],l=ai[i],a={x:t.x+r.x*s,y:t.y+r.y*s},u={x:n.x+l.x*s,y:n.y+l.y*s},d=Wl({source:a,sourcePosition:e,target:u}),h=d.x!==0?"x":"y",f=d[h];let c=[],y,m;const C={x:0,y:0},g={x:0,y:0},[w,k,E,X]=io({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(r[h]*l[h]===-1){y=o.x??w,m=o.y??k;const H=[{x:y,y:a.y},{x:y,y:u.y}],I=[{x:a.x,y:m},{x:u.x,y:m}];r[h]===f?c=h==="x"?H:I:c=h==="x"?I:H}else{const H=[{x:a.x,y:u.y}],I=[{x:u.x,y:a.y}];if(h==="x"?c=r.x===f?I:H:c=r.y===f?H:I,e===i){const B=Math.abs(t[h]-n[h]);if(B<=s){const b=Math.min(s-1,s-B);r[h]===f?C[h]=(a[h]>t[h]?-1:1)*b:g[h]=(u[h]>n[h]?-1:1)*b}}if(e!==i){const B=h==="x"?"y":"x",b=r[h]===l[B],T=a[B]>u[B],_=a[B]<u[B];(r[h]===1&&(!b&&T||b&&_)||r[h]!==1&&(!b&&_||b&&T))&&(c=h==="x"?H:I)}const D={x:a.x+C.x,y:a.y+C.y},A={x:u.x+g.x,y:u.y+g.y},Z=Math.max(Math.abs(D.x-c[0].x),Math.abs(A.x-c[0].x)),v=Math.max(Math.abs(D.y-c[0].y),Math.abs(A.y-c[0].y));Z>=v?(y=(D.x+A.x)/2,m=c[0].y):(y=c[0].x,m=(D.y+A.y)/2)}return[[t,{x:a.x+C.x,y:a.y+C.y},...c,{x:u.x+g.x,y:u.y+g.y},n],y,m,E,X]}function Ll(t,e,n,i){const o=Math.min(ui(t,e)/2,ui(e,n)/2,i),{x:s,y:r}=e;if(t.x===s&&s===n.x||t.y===r&&r===n.y)return`L${s} ${r}`;if(t.y===r){const u=t.x<n.x?-1:1,d=t.y<n.y?1:-1;return`L ${s+o*u},${r}Q ${s},${r} ${s},${r+o*d}`}const l=t.x<n.x?1:-1,a=t.y<n.y?-1:1;return`L ${s},${r+o*a}Q ${s},${r} ${s+o*l},${r}`}function fn({sourceX:t,sourceY:e,sourcePosition:n=ae.Bottom,targetX:i,targetY:o,targetPosition:s=ae.Top,borderRadius:r=5,centerX:l,centerY:a,offset:u=20}){const[d,h,f,c,y]=vl({source:{x:t,y:e},sourcePosition:n,target:{x:i,y:o},targetPosition:s,center:{x:l,y:a},offset:u});return[d.reduce((C,g,w)=>{let k="";return w>0&&w<d.length-1?k=Ll(d[w-1],g,d[w+1],r):k=`${w===0?"M":"L"}${g.x} ${g.y}`,C+=k,C},""),h,f,c,y]}function fi(t){var e;return t&&!!(t.internals.handleBounds||(e=t.handles)!=null&&e.length)&&!!(t.measured.width||t.width||t.initialWidth)}function Kl(t){var h;const{sourceNode:e,targetNode:n}=t;if(!fi(e)||!fi(n))return null;const i=e.internals.handleBounds||ci(e.handles),o=n.internals.handleBounds||ci(n.handles),s=di((i==null?void 0:i.source)??[],t.sourceHandle),r=di(t.connectionMode===St.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),t.targetHandle);if(!s||!r)return(h=t.onError)==null||h.call(t,"008",Zt.error008(s?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const l=(s==null?void 0:s.position)||ae.Bottom,a=(r==null?void 0:r.position)||ae.Top,u=Lt(e,s,l),d=Lt(n,r,a);return{sourceX:u.x,sourceY:u.y,targetX:d.x,targetY:d.y,sourcePosition:l,targetPosition:a}}function ci(t){if(!t)return null;const e=[],n=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?e.push(i):i.type==="target"&&n.push(i);return{source:e,target:n}}function Lt(t,e,n=ae.Left,i=!1){const o=((e==null?void 0:e.x)??0)+t.internals.positionAbsolute.x,s=((e==null?void 0:e.y)??0)+t.internals.positionAbsolute.y,{width:r,height:l}=e??Et(t);if(i)return{x:o+r/2,y:s+l/2};switch((e==null?void 0:e.position)??n){case ae.Top:return{x:o+r/2,y:s};case ae.Right:return{x:o+r,y:s+l/2};case ae.Bottom:return{x:o+r/2,y:s+l};case ae.Left:return{x:o,y:s+l/2}}}function di(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function Ln(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function Bl(t,{id:e,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:o}){const s=new Set;return t.reduce((r,l)=>([l.markerStart||i,l.markerEnd||o].forEach(a=>{if(a&&typeof a=="object"){const u=Ln(a,e);s.has(u)||(r.push({id:u,color:a.color||n,...a}),s.add(u))}}),r),[]).sort((r,l)=>r.id.localeCompare(l.id))}const lo={nodeOrigin:[0,0],nodeExtent:on,elevateNodesOnSelect:!0,defaults:{}},Rl={...lo,checkEquality:!0};function so(t,e){const n={...t};for(const i in e)e[i]!==void 0&&(n[i]=e[i]);return n}function ro(t,e,n,i){var l,a;const o=so(Rl,i),s=new Map(e),r=o!=null&&o.elevateNodesOnSelect?1e3:0;e.clear(),n.clear();for(const u of t){let d=s.get(u.id);if(o.checkEquality&&u===(d==null?void 0:d.internals.userNode))e.set(u.id,d);else{const h=bn(u,o.nodeOrigin),f=vt(u.extent)?u.extent:o.nodeExtent,c=Xt(h,f,Et(u));d={...o.defaults,...u,measured:{width:(l=u.measured)==null?void 0:l.width,height:(a=u.measured)==null?void 0:a.height},internals:{positionAbsolute:c,handleBounds:u.measured?d==null?void 0:d.internals.handleBounds:void 0,z:uo(u,r),userNode:u}},e.set(u.id,d)}u.parentId&&ao(d,e,n,i)}}function Zl(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function ao(t,e,n,i){const{elevateNodesOnSelect:o,nodeOrigin:s,nodeExtent:r}=so(lo,i),l=t.parentId,a=e.get(l);if(!a){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Zl(t,n);const u=o?1e3:0,{x:d,y:h,z:f}=Fl(t,a,s,r,u),{positionAbsolute:c}=t.internals,y=d!==c.x||h!==c.y;(y||f!==t.internals.z)&&(t.internals={...t.internals,positionAbsolute:y?{x:d,y:h}:c,z:f})}function uo(t,e){return(Qe(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function Fl(t,e,n,i,o){const{x:s,y:r}=e.internals.positionAbsolute,l=Et(t),a=bn(t,n),u=vt(t.extent)?Xt(a,t.extent,l):a;let d=Xt({x:s+u.x,y:r+u.y},i,l);t.extent==="parent"&&(d=Ji(d,l,e));const h=uo(t,o),f=e.internals.z??0;return{x:d.x,y:d.y,z:f>h?f:h}}function Gl(t,e,n,i=[0,0]){var r;const o=[],s=new Map;for(const l of t){const a=e.get(l.parentId);if(!a)continue;const u=((r=s.get(l.parentId))==null?void 0:r.expandedRect)??wn(a),d=xi(u,l.rect);s.set(l.parentId,{expandedRect:d,parent:a})}return s.size>0&&s.forEach(({expandedRect:l,parent:a},u)=>{var k;const d=a.internals.positionAbsolute,h=Et(a),f=a.origin??i,c=l.x<d.x?Math.round(Math.abs(d.x-l.x)):0,y=l.y<d.y?Math.round(Math.abs(d.y-l.y)):0,m=Math.max(h.width,Math.round(l.width)),C=Math.max(h.height,Math.round(l.height)),g=(m-h.width)*f[0],w=(C-h.height)*f[1];(c>0||y>0||g||w)&&(o.push({id:u,type:"position",position:{x:a.position.x-c+g,y:a.position.y-y+w}}),(k=n.get(u))==null||k.forEach(E=>{t.some(X=>X.id===E.id)||o.push({id:E.id,type:"position",position:{x:E.position.x+c,y:E.position.y+y}})})),(h.width<l.width||h.height<l.height||c||y)&&o.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:m+(c?f[0]*c-g:0),height:C+(y?f[1]*y-w:0)}})}),o}function Ul(t,e,n,i,o,s){const r=i==null?void 0:i.querySelector(".xyflow__viewport");let l=!1;if(!r)return{changes:[],updatedInternals:l};const a=[],u=window.getComputedStyle(r),{m22:d}=new window.DOMMatrixReadOnly(u.transform),h=[];for(const f of t.values()){const c=e.get(f.id);if(c)if(c.hidden)c.internals={...c.internals,handleBounds:void 0},l=!0;else{const y=eo(f.nodeElement),m=c.measured.width!==y.width||c.measured.height!==y.height;if(!!(y.width&&y.height&&(m||!c.internals.handleBounds||f.force))){const g=f.nodeElement.getBoundingClientRect(),w=vt(c.extent)?c.extent:s;let{positionAbsolute:k}=c.internals;c.parentId&&c.extent==="parent"?k=Ji(k,y,e.get(c.parentId)):w&&(k=Xt(k,w,y)),c.measured=y,c.internals={...c.internals,positionAbsolute:k,handleBounds:{source:si("source",f.nodeElement,g,d,c.id),target:si("target",f.nodeElement,g,d,c.id)}},c.parentId&&ao(c,e,n,{nodeOrigin:o}),l=!0,m&&(a.push({id:c.id,type:"dimensions",dimensions:y}),c.expandParent&&c.parentId&&h.push({id:c.id,parentId:c.parentId,rect:wn(c,o)}))}}}if(h.length>0){const f=Gl(h,e,n,o);a.push(...f)}return{changes:a,updatedInternals:l}}async function ql({delta:t,panZoom:e,transform:n,translateExtent:i,width:o,height:s}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const r=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[o,s]],i),l=!!r&&(r.x!==n[0]||r.y!==n[1]||r.k!==n[2]);return Promise.resolve(l)}function fo(t,e,n){t.clear(),e.clear();for(const i of n){const{source:o,target:s,sourceHandle:r=null,targetHandle:l=null}=i,a=`${o}-source-${r}`,u=`${s}-target-${l}`,d=t.get(a)||new Map,h=t.get(u)||new Map,f={edgeId:i.id,source:o,target:s,sourceHandle:r,targetHandle:l};e.set(i.id,i),t.set(a,d.set(`${s}-${l}`,f)),t.set(u,h.set(`${o}-${r}`,f))}}function co(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:co(n,e):!1}function hi(t,e,n){let i=t;do{if(i!=null&&i.matches(e))return!0;if(i===n)return!1;i=i.parentElement}while(i);return!1}function jl(t,e,n,i){const o=new Map;for(const[s,r]of t)if((r.selected||r.id===i)&&(!r.parentId||!co(r,t))&&(r.draggable||e&&typeof r.draggable>"u")){const l=t.get(s);l&&o.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return o}function Tn({nodeId:t,dragItems:e,nodeLookup:n,dragging:i=!0}){var r,l;const o=[];for(const[a,u]of e){const d=(r=n.get(a))==null?void 0:r.internals.userNode;d&&o.push({...d,position:u.position,dragging:i})}if(!t)return[o[0],o];const s=n.get(t).internals.userNode;return[{...s,position:((l=e.get(t))==null?void 0:l.position)||s.position,dragging:i},o]}function pl({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:i,onDragStop:o}){let s={x:null,y:null},r=0,l=new Map,a=!1,u={x:0,y:0},d=null,h=!1,f=null,c=!1;function y({noDragClassName:C,handleSelector:g,domNode:w,isSelectable:k,nodeId:E,nodeClickDistance:X=0}){f=qe(w);function K({x:A,y:Z},v){const{nodeLookup:B,nodeExtent:b,snapGrid:T,snapToGrid:_,nodeOrigin:P,onNodeDrag:O,onSelectionDrag:z,onError:Y,updateNodePositions:F}=e();s={x:A,y:Z};let U=!1,p={x:0,y:0,x2:0,y2:0};if(l.size>1&&b){const N=Ft(l);p=vn(N)}for(const[N,ee]of l){let ie={x:A-ee.distance.x,y:Z-ee.distance.y};_&&(ie=Fn(ie,T));let R=[[b[0][0],b[0][1]],[b[1][0],b[1][1]]];if(l.size>1&&b&&!ee.extent){const{positionAbsolute:se}=ee.internals,re=se.x-p.x+b[0][0],ue=se.x+ee.measured.width-p.x2+b[1][0],Ee=se.y-p.y+b[0][1],V=se.y+ee.measured.height-p.y2+b[1][1];R=[[re,Ee],[ue,V]]}const{position:te,positionAbsolute:oe}=Cl({nodeId:N,nextPosition:ie,nodeLookup:B,nodeExtent:R,nodeOrigin:P,onError:Y});U=U||ee.position.x!==te.x||ee.position.y!==te.y,ee.position=te,ee.internals.positionAbsolute=oe}if(U&&(F(l,!0),v&&(i||O||!E&&z))){const[N,ee]=Tn({nodeId:E,dragItems:l,nodeLookup:B});i==null||i(v,l,N,ee),O==null||O(v,N,ee),E||z==null||z(v,ee)}}async function H(){if(!d)return;const{transform:A,panBy:Z,autoPanSpeed:v}=e(),[B,b]=Qi(u,d,v);(B!==0||b!==0)&&(s.x=(s.x??0)-B/A[2],s.y=(s.y??0)-b/A[2],await Z({x:B,y:b})&&K(s,null)),r=requestAnimationFrame(H)}function I(A){var U;const{nodeLookup:Z,multiSelectionActive:v,nodesDraggable:B,transform:b,snapGrid:T,snapToGrid:_,selectNodesOnDrag:P,onNodeDragStart:O,onSelectionDragStart:z,unselectNodesAndEdges:Y}=e();h=!0,(!P||!k)&&!v&&E&&((U=Z.get(E))!=null&&U.selected||Y()),k&&P&&E&&(t==null||t(E));const F=Vt(A.sourceEvent,{transform:b,snapGrid:T,snapToGrid:_});if(s=F,l=jl(Z,B,F,E),l.size>0&&(n||O||!E&&z)){const[p,N]=Tn({nodeId:E,dragItems:l,nodeLookup:Z});n==null||n(A.sourceEvent,l,p,N),O==null||O(A.sourceEvent,p,N),E||z==null||z(A.sourceEvent,N)}}const D=qi().clickDistance(X).on("start",A=>{const{domNode:Z,nodeDragThreshold:v,transform:B,snapGrid:b,snapToGrid:T}=e();c=!1,v===0&&I(A),s=Vt(A.sourceEvent,{transform:B,snapGrid:b,snapToGrid:T}),d=(Z==null?void 0:Z.getBoundingClientRect())||null,u=ut(A.sourceEvent,d)}).on("drag",A=>{const{autoPanOnNodeDrag:Z,transform:v,snapGrid:B,snapToGrid:b,nodeDragThreshold:T}=e(),_=Vt(A.sourceEvent,{transform:v,snapGrid:B,snapToGrid:b});if(A.sourceEvent.type==="touchmove"&&A.sourceEvent.touches.length>1&&(c=!0),!c){if(!a&&Z&&h&&(a=!0,H()),!h){const P=_.xSnapped-(s.x??0),O=_.ySnapped-(s.y??0);Math.sqrt(P*P+O*O)>T&&I(A)}(s.x!==_.xSnapped||s.y!==_.ySnapped)&&l&&h&&(u=ut(A.sourceEvent,d),K(_,A.sourceEvent))}}).on("end",A=>{if(!(!h||c)&&(a=!1,h=!1,cancelAnimationFrame(r),l.size>0)){const{nodeLookup:Z,updateNodePositions:v,onNodeDragStop:B,onSelectionDragStop:b}=e();if(v(l,!1),o||B||!E&&b){const[T,_]=Tn({nodeId:E,dragItems:l,nodeLookup:Z,dragging:!1});o==null||o(A.sourceEvent,l,T,_),B==null||B(A.sourceEvent,T,_),E||b==null||b(A.sourceEvent,_)}}}).filter(A=>{const Z=A.target;return!A.button&&(!C||!hi(Z,`.${C}`,w))&&(!g||hi(Z,g,w))});f.call(D)}function m(){f==null||f.on(".drag",null)}return{update:y,destroy:m}}function Jl(t,e,n){const i=[],o={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const s of e.values())Zn(o,wn(s))>0&&i.push(s);return i}const Ql=250;function xl(t,e,n,i){var l,a;let o=[],s=1/0;const r=Jl(t,n,e+Ql);for(const u of r){const d=[...((l=u.internals.handleBounds)==null?void 0:l.source)??[],...((a=u.internals.handleBounds)==null?void 0:a.target)??[]];for(const h of d){if(i.nodeId===h.nodeId&&i.type===h.type&&i.id===h.id)continue;const{x:f,y:c}=Lt(u,h,h.position,!0),y=Math.sqrt(Math.pow(f-t.x,2)+Math.pow(c-t.y,2));y>e||(y<s?(o=[{...h,x:f,y:c}],s=y):y===s&&o.push({...h,x:f,y:c}))}}if(!o.length)return null;if(o.length>1){const u=i.type==="source"?"target":"source";return o.find(d=>d.type===u)??o[0]}return o[0]}function ho(t,e,n,i,o,s=!1){var u,d,h;const r=i.get(t);if(!r)return null;const l=o==="strict"?(u=r.internals.handleBounds)==null?void 0:u[e]:[...((d=r.internals.handleBounds)==null?void 0:d.source)??[],...((h=r.internals.handleBounds)==null?void 0:h.target)??[]],a=(n?l==null?void 0:l.find(f=>f.id===n):l==null?void 0:l[0])??null;return a&&s?{...a,...Lt(r,a,a.position,!0)}:a}function go(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function $l(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const mo=()=>!0;function es(t,{connectionMode:e,connectionRadius:n,handleId:i,nodeId:o,edgeUpdaterType:s,isTarget:r,domNode:l,nodeLookup:a,lib:u,autoPanOnConnect:d,flowId:h,panBy:f,cancelConnection:c,onConnectStart:y,onConnect:m,onConnectEnd:C,isValidConnection:g=mo,onReconnectEnd:w,updateConnection:k,getTransform:E,getFromHandle:X,autoPanSpeed:K}){const H=Dl(t.target);let I=0,D;const{x:A,y:Z}=ut(t),v=H==null?void 0:H.elementFromPoint(A,Z),B=go(s,v),b=l==null?void 0:l.getBoundingClientRect();if(!b||!B)return;const T=ho(o,B,i,a,e);if(!T)return;let _=ut(t,b),P=!1,O=null,z=!1,Y=null;function F(){if(!d||!b)return;const[oe,se]=Qi(_,b,K);f({x:oe,y:se}),I=requestAnimationFrame(F)}const U={...T,nodeId:o,type:B,position:T.position},p=a.get(o),ee={inProgress:!0,isValid:null,from:Lt(p,U,ae.Left,!0),fromHandle:U,fromPosition:U.position,fromNode:p,to:_,toHandle:null,toPosition:ei[U.position],toNode:null};k(ee);let ie=ee;y==null||y(t,{nodeId:o,handleId:i,handleType:B});function R(oe){if(!X()||!U){te(oe);return}const se=E();_=ut(oe,b),D=xl(Sn(_,se,!1,[1,1]),n,a,U),P||(F(),P=!0);const re=yo(oe,{handle:D,connectionMode:e,fromNodeId:o,fromHandleId:i,fromType:r?"target":"source",isValidConnection:g,doc:H,lib:u,flowId:h,nodeLookup:a});Y=re.handleDomNode,O=re.connection,z=$l(!!D,re.isValid);const ue={...ie,isValid:z,to:D&&z?Ol({x:D.x,y:D.y},se):_,toHandle:re.toHandle,toPosition:z&&re.toHandle?re.toHandle.position:ei[U.position],toNode:re.toHandle?a.get(re.toHandle.nodeId):null};z&&D&&ie.toHandle&&ue.toHandle&&ie.toHandle.type===ue.toHandle.type&&ie.toHandle.nodeId===ue.toHandle.nodeId&&ie.toHandle.id===ue.toHandle.id&&ie.to.x===ue.to.x&&ie.to.y===ue.to.y||(k(ue),ie=ue)}function te(oe){(D||Y)&&O&&z&&(m==null||m(O));const{inProgress:se,...re}=ie,ue={...re,toPosition:ie.toHandle?ie.toPosition:null};C==null||C(oe,ue),s&&(w==null||w(oe,ue)),c(),cancelAnimationFrame(I),P=!1,z=!1,O=null,Y=null,H.removeEventListener("mousemove",R),H.removeEventListener("mouseup",te),H.removeEventListener("touchmove",R),H.removeEventListener("touchend",te)}H.addEventListener("mousemove",R),H.addEventListener("mouseup",te),H.addEventListener("touchmove",R),H.addEventListener("touchend",te)}function yo(t,{handle:e,connectionMode:n,fromNodeId:i,fromHandleId:o,fromType:s,doc:r,lib:l,flowId:a,isValidConnection:u=mo,nodeLookup:d}){const h=s==="target",f=e?r.querySelector(`.${l}-flow__handle[data-id="${a}-${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`):null,{x:c,y}=ut(t),m=r.elementFromPoint(c,y),C=m!=null&&m.classList.contains(`${l}-flow__handle`)?m:f,g={handleDomNode:C,isValid:!1,connection:null,toHandle:null};if(C){const w=go(void 0,C),k=C.getAttribute("data-nodeid"),E=C.getAttribute("data-handleid"),X=C.classList.contains("connectable"),K=C.classList.contains("connectableend");if(!k||!w)return g;const H={source:h?k:i,sourceHandle:h?E:o,target:h?i:k,targetHandle:h?o:E};g.connection=H;const D=X&&K&&(n===St.Strict?h&&w==="source"||!h&&w==="target":k!==i||E!==o);g.isValid=D&&u(H),g.toHandle=ho(k,w,E,d,n,!1)}return g}const ts={onPointerDown:es,isValid:yo};function ns({domNode:t,panZoom:e,getTransform:n,getViewScale:i}){const o=qe(t);function s({translateExtent:l,width:a,height:u,zoomStep:d=10,pannable:h=!0,zoomable:f=!0,inversePan:c=!1}){const y=k=>{const E=n();if(k.sourceEvent.type!=="wheel"||!e)return;const X=-k.sourceEvent.deltaY*(k.sourceEvent.deltaMode===1?.05:k.sourceEvent.deltaMode?1:.002)*d,K=E[2]*Math.pow(2,X);e.scaleTo(K)};let m=[0,0];const C=k=>{(k.sourceEvent.type==="mousedown"||k.sourceEvent.type==="touchstart")&&(m=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY])},g=k=>{const E=n();if(k.sourceEvent.type!=="mousemove"&&k.sourceEvent.type!=="touchmove"||!e)return;const X=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY],K=[X[0]-m[0],X[1]-m[1]];m=X;const H=i()*Math.max(E[2],Math.log(E[2]))*(c?-1:1),I={x:E[0]-K[0]*H,y:E[1]-K[1]*H},D=[[0,0],[a,u]];e.setViewportConstrained({x:I.x,y:I.y,zoom:E[2]},D,l)},w=ji().on("start",C).on("zoom",h?g:null).on("zoom.wheel",f?y:null);o.call(w,{})}function r(){o.on("zoom",null)}return{update:s,destroy:r,pointer:Je}}const is=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,En=t=>({x:t.x,y:t.y,zoom:t.k}),Nn=({x:t,y:e,zoom:n})=>Bn.translate(t,e).scale(n),It=(t,e)=>t.target.closest(`.${e}`),bo=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),Hn=(t,e=0,n=()=>{})=>{const i=typeof e=="number"&&e>0;return i||n(),i?t.transition().duration(e).on("end",n):t},_o=t=>{const e=t.ctrlKey&&an()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function os({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:i,panOnScrollMode:o,panOnScrollSpeed:s,zoomOnPinch:r,onPanZoomStart:l,onPanZoom:a,onPanZoomEnd:u}){return d=>{if(It(d,e))return!1;d.preventDefault(),d.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(d.ctrlKey&&r){const C=Je(d),g=_o(d),w=h*Math.pow(2,g);i.scaleTo(n,w,C,d);return}const f=d.deltaMode===1?20:1;let c=o===$e.Vertical?0:d.deltaX*f,y=o===$e.Horizontal?0:d.deltaY*f;!an()&&d.shiftKey&&o!==$e.Vertical&&(c=d.deltaY*f,y=0),i.translateBy(n,-(c/h)*s,-(y/h)*s,{internal:!0});const m=En(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,l==null||l(d,m)),t.isPanScrolling&&(a==null||a(d,m),t.panScrollTimeout=setTimeout(()=>{u==null||u(d,m),t.isPanScrolling=!1},150))}}function ls({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(i,o){if(!e&&i.type==="wheel"&&!i.ctrlKey||It(i,t))return null;i.preventDefault(),n.call(this,i,o)}}function ss({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return i=>{var s,r,l;if((s=i.sourceEvent)!=null&&s.internal)return;const o=En(i.transform);t.mouseButton=((r=i.sourceEvent)==null?void 0:r.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=o,((l=i.sourceEvent)==null?void 0:l.type)==="mousedown"&&e(!0),n&&(n==null||n(i.sourceEvent,o))}}function rs({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:i,onPanZoom:o}){return s=>{var r,l;t.usedRightMouseButton=!!(n&&bo(e,t.mouseButton??0)),(r=s.sourceEvent)!=null&&r.sync||i([s.transform.x,s.transform.y,s.transform.k]),o&&!((l=s.sourceEvent)!=null&&l.internal)&&(o==null||o(s.sourceEvent,En(s.transform)))}}function as({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:o,onPaneContextMenu:s}){return r=>{var l;if(!((l=r.sourceEvent)!=null&&l.internal)&&(t.isZoomingOrPanning=!1,s&&bo(e,t.mouseButton??0)&&!t.usedRightMouseButton&&r.sourceEvent&&s(r.sourceEvent),t.usedRightMouseButton=!1,i(!1),o&&is(t.prevViewport,r.transform))){const a=En(r.transform);t.prevViewport=a,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{o==null||o(r.sourceEvent,a)},n?150:0)}}}function us({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:i,panOnScroll:o,zoomOnDoubleClick:s,userSelectionActive:r,noWheelClassName:l,noPanClassName:a,lib:u}){return d=>{var y;const h=t||e,f=n&&d.ctrlKey;if(d.button===1&&d.type==="mousedown"&&(It(d,`${u}-flow__node`)||It(d,`${u}-flow__edge`)))return!0;if(!i&&!h&&!o&&!s&&!n||r||It(d,l)&&d.type==="wheel"||It(d,a)&&(d.type!=="wheel"||o&&d.type==="wheel"&&!t)||!n&&d.ctrlKey&&d.type==="wheel")return!1;if(!n&&d.type==="touchstart"&&((y=d.touches)==null?void 0:y.length)>1)return d.preventDefault(),!1;if(!h&&!o&&!f&&d.type==="wheel"||!i&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(i)&&!i.includes(d.button)&&d.type==="mousedown")return!1;const c=Array.isArray(i)&&i.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||d.type==="wheel")&&c}}function fs({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:i,translateExtent:o,viewport:s,onPanZoom:r,onPanZoomStart:l,onPanZoomEnd:a,onDraggingChange:u}){const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=t.getBoundingClientRect(),f=ji().clickDistance(!Qe(i)||i<0?0:i).scaleExtent([e,n]).translateExtent(o),c=qe(t).call(f);k({x:s.x,y:s.y,zoom:Yt(s.zoom,e,n)},[[0,0],[h.width,h.height]],o);const y=c.on("wheel.zoom"),m=c.on("dblclick.zoom");f.wheelDelta(_o);function C(v,B){return c?new Promise(b=>{f==null||f.transform(Hn(c,B==null?void 0:B.duration,()=>b(!0)),v)}):Promise.resolve(!1)}function g({noWheelClassName:v,noPanClassName:B,onPaneContextMenu:b,userSelectionActive:T,panOnScroll:_,panOnDrag:P,panOnScrollMode:O,panOnScrollSpeed:z,preventScrolling:Y,zoomOnPinch:F,zoomOnScroll:U,zoomOnDoubleClick:p,zoomActivationKeyPressed:N,lib:ee,onTransformChange:ie}){T&&!d.isZoomingOrPanning&&w();const te=_&&!N&&!T?os({zoomPanValues:d,noWheelClassName:v,d3Selection:c,d3Zoom:f,panOnScrollMode:O,panOnScrollSpeed:z,zoomOnPinch:F,onPanZoomStart:l,onPanZoom:r,onPanZoomEnd:a}):ls({noWheelClassName:v,preventScrolling:Y,d3ZoomHandler:y});if(c.on("wheel.zoom",te,{passive:!1}),!T){const se=ss({zoomPanValues:d,onDraggingChange:u,onPanZoomStart:l});f.on("start",se);const re=rs({zoomPanValues:d,panOnDrag:P,onPaneContextMenu:!!b,onPanZoom:r,onTransformChange:ie});f.on("zoom",re);const ue=as({zoomPanValues:d,panOnDrag:P,panOnScroll:_,onPaneContextMenu:b,onPanZoomEnd:a,onDraggingChange:u});f.on("end",ue)}const oe=us({zoomActivationKeyPressed:N,panOnDrag:P,zoomOnScroll:U,panOnScroll:_,zoomOnDoubleClick:p,zoomOnPinch:F,userSelectionActive:T,noPanClassName:B,noWheelClassName:v,lib:ee});f.filter(oe),p?c.on("dblclick.zoom",m):c.on("dblclick.zoom",null)}function w(){f.on("zoom",null)}async function k(v,B,b){const T=Nn(v),_=f==null?void 0:f.constrain()(T,B,b);return _&&await C(_),new Promise(P=>P(_))}async function E(v,B){const b=Nn(v);return await C(b,B),new Promise(T=>T(b))}function X(v){if(c){const B=Nn(v),b=c.property("__zoom");(b.k!==v.zoom||b.x!==v.x||b.y!==v.y)&&(f==null||f.transform(c,B,null,{sync:!0}))}}function K(){const v=c?ll(c.node()):{x:0,y:0,k:1};return{x:v.x,y:v.y,zoom:v.k}}function H(v,B){return c?new Promise(b=>{f==null||f.scaleTo(Hn(c,B==null?void 0:B.duration,()=>b(!0)),v)}):Promise.resolve(!1)}function I(v,B){return c?new Promise(b=>{f==null||f.scaleBy(Hn(c,B==null?void 0:B.duration,()=>b(!0)),v)}):Promise.resolve(!1)}function D(v){f==null||f.scaleExtent(v)}function A(v){f==null||f.translateExtent(v)}function Z(v){const B=!Qe(v)||v<0?0:v;f==null||f.clickDistance(B)}return{update:g,destroy:w,setViewport:E,setViewportConstrained:k,getViewport:K,scaleTo:H,scaleBy:I,setScaleExtent:D,setTranslateExtent:A,syncViewport:X,setClickDistance:Z}}var gi;(function(t){t.Line="line",t.Handle="handle"})(gi||(gi={}));const tu=["top-left","top-right","bottom-left","bottom-right"],nu=["top","right","bottom","left"];function cs({width:t,prevWidth:e,height:n,prevHeight:i,affectsX:o,affectsY:s}){const r=t-e,l=n-i,a=[r>0?1:r<0?-1:0,l>0?1:l<0?-1:0];return r&&o&&(a[0]=a[0]*-1),l&&s&&(a[1]=a[1]*-1),a}function ds(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),i=t.includes("left"),o=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:i,affectsY:o}}function mt(t,e){return Math.max(0,e-t)}function yt(t,e){return Math.max(0,t-e)}function Jt(t,e,n){return Math.max(0,e-t,t-n)}function mi(t,e){return t?!e:e}function hs(t,e,n,i,o,s,r,l){let{affectsX:a,affectsY:u}=e;const{isHorizontal:d,isVertical:h}=e,f=d&&h,{xSnapped:c,ySnapped:y}=n,{minWidth:m,maxWidth:C,minHeight:g,maxHeight:w}=i,{x:k,y:E,width:X,height:K,aspectRatio:H}=t;let I=Math.floor(d?c-t.pointerX:0),D=Math.floor(h?y-t.pointerY:0);const A=X+(a?-I:I),Z=K+(u?-D:D),v=-s[0]*X,B=-s[1]*K;let b=Jt(A,m,C),T=Jt(Z,g,w);if(r){let O=0,z=0;a&&I<0?O=mt(k+I+v,r[0][0]):!a&&I>0&&(O=yt(k+A+v,r[1][0])),u&&D<0?z=mt(E+D+B,r[0][1]):!u&&D>0&&(z=yt(E+Z+B,r[1][1])),b=Math.max(b,O),T=Math.max(T,z)}if(l){let O=0,z=0;a&&I>0?O=yt(k+I,l[0][0]):!a&&I<0&&(O=mt(k+A,l[1][0])),u&&D>0?z=yt(E+D,l[0][1]):!u&&D<0&&(z=mt(E+Z,l[1][1])),b=Math.max(b,O),T=Math.max(T,z)}if(o){if(d){const O=Jt(A/H,g,w)*H;if(b=Math.max(b,O),r){let z=0;!a&&!u||a&&!u&&f?z=yt(E+B+A/H,r[1][1])*H:z=mt(E+B+(a?I:-I)/H,r[0][1])*H,b=Math.max(b,z)}if(l){let z=0;!a&&!u||a&&!u&&f?z=mt(E+A/H,l[1][1])*H:z=yt(E+(a?I:-I)/H,l[0][1])*H,b=Math.max(b,z)}}if(h){const O=Jt(Z*H,m,C)/H;if(T=Math.max(T,O),r){let z=0;!a&&!u||u&&!a&&f?z=yt(k+Z*H+v,r[1][0])/H:z=mt(k+(u?D:-D)*H+v,r[0][0])/H,T=Math.max(T,z)}if(l){let z=0;!a&&!u||u&&!a&&f?z=mt(k+Z*H,l[1][0])/H:z=yt(k+(u?D:-D)*H,l[0][0])/H,T=Math.max(T,z)}}}D=D+(D<0?T:-T),I=I+(I<0?b:-b),o&&(f?A>Z*H?D=(mi(a,u)?-I:I)/H:I=(mi(a,u)?-D:D)*H:d?(D=I/H,u=a):(I=D*H,a=u));const _=a?k+I:k,P=u?E+D:E;return{width:X+(a?-I:I),height:K+(u?-D:D),x:s[0]*I*(a?-1:1)+_,y:s[1]*D*(u?-1:1)+P}}const ko={width:0,height:0,x:0,y:0},gs={...ko,pointerX:0,pointerY:0,aspectRatio:1};function ms(t){return[[0,0],[t.measured.width,t.measured.height]]}function ys(t,e,n){const i=e.position.x+t.position.x,o=e.position.y+t.position.y,s=t.measured.width??0,r=t.measured.height??0,l=n[0]*s,a=n[1]*r;return[[i-l,o-a],[i+s-l,o+r-a]]}function iu({domNode:t,nodeId:e,getStoreItems:n,onChange:i,onEnd:o}){const s=qe(t);function r({controlPosition:a,boundaries:u,keepAspectRatio:d,onResizeStart:h,onResize:f,onResizeEnd:c,shouldResize:y}){let m={...ko},C={...gs};const g=ds(a);let w,k=[],E,X,K;const H=qi().on("start",I=>{const{nodeLookup:D,transform:A,snapGrid:Z,snapToGrid:v,nodeOrigin:B}=n();if(w=D.get(e),!w)return;const{xSnapped:b,ySnapped:T}=Vt(I.sourceEvent,{transform:A,snapGrid:Z,snapToGrid:v});m={width:w.measured.width??0,height:w.measured.height??0,x:w.position.x??0,y:w.position.y??0},C={...m,pointerX:b,pointerY:T,aspectRatio:m.width/m.height},E=void 0,w.parentId&&(w.extent==="parent"||w.expandParent)&&(E=D.get(w.parentId),X=E&&w.extent==="parent"?ms(E):void 0),k=[],K=void 0;for(const[_,P]of D)if(P.parentId===e&&(k.push({id:_,position:{...P.position},extent:P.extent}),P.extent==="parent"||P.expandParent)){const O=ys(P,w,P.origin??B);K?K=[[Math.min(O[0][0],K[0][0]),Math.min(O[0][1],K[0][1])],[Math.max(O[1][0],K[1][0]),Math.max(O[1][1],K[1][1])]]:K=O}h==null||h(I,{...m})}).on("drag",I=>{const{transform:D,snapGrid:A,snapToGrid:Z,nodeOrigin:v}=n(),B=Vt(I.sourceEvent,{transform:D,snapGrid:A,snapToGrid:Z}),b=[];if(!w)return;const{x:T,y:_,width:P,height:O}=m,z={},Y=w.origin??v,{width:F,height:U,x:p,y:N}=hs(C,g,B,u,d,Y,X,K),ee=F!==P,ie=U!==O,R=p!==T&&ee,te=N!==_&&ie;if(!R&&!te&&!ee&&!ie)return;if((R||te||Y[0]===1||Y[1]===1)&&(z.x=R?p:m.x,z.y=te?N:m.y,m.x=z.x,m.y=z.y,k.length>0)){const ue=p-T,Ee=N-_;for(const V of k)V.position={x:V.position.x-ue+Y[0]*(F-P),y:V.position.y-Ee+Y[1]*(U-O)},b.push(V)}if((ee||ie)&&(z.width=ee?F:m.width,z.height=ie?U:m.height,m.width=z.width,m.height=z.height),E&&w.expandParent){const ue=Y[0]*(z.width??0);z.x&&z.x<ue&&(m.x=ue,C.x=C.x-(z.x-ue));const Ee=Y[1]*(z.height??0);z.y&&z.y<Ee&&(m.y=Ee,C.y=C.y-(z.y-Ee))}const oe=cs({width:m.width,prevWidth:P,height:m.height,prevHeight:O,affectsX:g.affectsX,affectsY:g.affectsY}),se={...m,direction:oe};(y==null?void 0:y(I,se))!==!1&&(f==null||f(I,se),i(z,b))}).on("end",I=>{c==null||c(I,{...m}),o==null||o()});s.call(H)}function l(){s.on(".drag",null)}return{update:r,destroy:l}}function bs(t){let e,n,i,o,s,r;const l=t[45].default,a=et(l,t,t[44],null);return{c(){e=We("div"),a&&a.c(),this.h()},l(u){e=ve(u,"DIV",{"data-handleid":!0,"data-nodeid":!0,"data-handlepos":!0,"data-id":!0,class:!0,style:!0,role:!0,tabindex:!0});var d=ge(e);a&&a.l(d),d.forEach(W),this.h()},h(){M(e,"data-handleid",t[6]),M(e,"data-nodeid",t[14]),M(e,"data-handlepos",t[2]),M(e,"data-id",n=t[13]+"-"+t[14]+"-"+(t[0]||null)+"-"+t[1]),M(e,"class",i=Ce(["svelte-flow__handle",`svelte-flow__handle-${t[2]}`,"nodrag","nopan",t[2],t[4]])),M(e,"style",t[3]),M(e,"role","button"),M(e,"tabindex","-1"),le(e,"valid",t[7]),le(e,"connectingto",t[5]),le(e,"connectingfrom",t[9]),le(e,"source",!t[11]),le(e,"target",t[11]),le(e,"connectablestart",t[12]),le(e,"connectableend",t[12]),le(e,"connectable",t[12]),le(e,"connectionindicator",t[12]&&(!t[10]||t[8]))},m(u,d){$(u,e,d),a&&a.m(e,null),o=!0,s||(r=[Me(e,"mousedown",t[32]),Me(e,"touchstart",t[32])],s=!0)},p(u,d){a&&a.p&&(!o||d[1]&8192)&&tt(a,l,u,u[44],o?it(l,u[44],d,null):nt(u[44]),null),(!o||d[0]&64)&&M(e,"data-handleid",u[6]),(!o||d[0]&4)&&M(e,"data-handlepos",u[2]),(!o||d[0]&8195&&n!==(n=u[13]+"-"+u[14]+"-"+(u[0]||null)+"-"+u[1]))&&M(e,"data-id",n),(!o||d[0]&20&&i!==(i=Ce(["svelte-flow__handle",`svelte-flow__handle-${u[2]}`,"nodrag","nopan",u[2],u[4]])))&&M(e,"class",i),(!o||d[0]&8)&&M(e,"style",u[3]),(!o||d[0]&148)&&le(e,"valid",u[7]),(!o||d[0]&52)&&le(e,"connectingto",u[5]),(!o||d[0]&532)&&le(e,"connectingfrom",u[9]),(!o||d[0]&2068)&&le(e,"source",!u[11]),(!o||d[0]&2068)&&le(e,"target",u[11]),(!o||d[0]&4116)&&le(e,"connectablestart",u[12]),(!o||d[0]&4116)&&le(e,"connectableend",u[12]),(!o||d[0]&4116)&&le(e,"connectable",u[12]),(!o||d[0]&5396)&&le(e,"connectionindicator",u[12]&&(!u[10]||u[8]))},i(u){o||(G(a,u),o=!0)},o(u){J(a,u),o=!1},d(u){u&&W(e),a&&a.d(u),s=!1,kt(r)}}}function _s(t,e,n){let i,o,s,r,l,a,u,d,h,f,c,y,m,C,g,w,k,E,X,K,H,I,D,A,Z,{$$slots:v={},$$scope:B}=e,{id:b=void 0}=e,{type:T="source"}=e,{position:_=ae.Top}=e,{style:P=void 0}=e,{isValidConnection:O=void 0}=e,{onconnect:z=void 0}=e,{ondisconnect:Y=void 0}=e,{isConnectable:F=void 0}=e,{class:U=void 0}=e;const p=xt("svelteflow__node_id"),N=xt("svelteflow__node_connectable");j(t,N,Q=>n(43,Z=Q));const ee=He(),{connectionMode:ie,domNode:R,nodeLookup:te,connectionRadius:oe,viewport:se,isValidConnection:re,lib:ue,addEdge:Ee,onedgecreate:V,panBy:De,cancelConnection:Se,updateConnection:ft,autoPanOnConnect:lt,edges:st,connectionLookup:Ve,onconnect:rt,onconnectstart:x,onconnectend:ct,flowId:dt,connection:L}=ee;j(t,ie,Q=>n(40,f=Q)),j(t,R,Q=>n(55,D=Q)),j(t,te,Q=>n(54,I=Q)),j(t,oe,Q=>n(56,A=Q)),j(t,se,Q=>n(46,m=Q)),j(t,re,Q=>n(51,E=Q)),j(t,ue,Q=>n(53,H=Q)),j(t,V,Q=>n(50,k=Q)),j(t,lt,Q=>n(52,K=Q)),j(t,st,Q=>n(42,y=Q)),j(t,Ve,Q=>n(41,c=Q)),j(t,rt,Q=>n(49,w=Q)),j(t,x,Q=>n(48,g=Q)),j(t,ct,Q=>n(47,C=Q)),j(t,dt,Q=>n(13,X=Q)),j(t,L,Q=>n(39,h=Q));function ht(Q){const at=to(Q);(at&&Q.button===0||!at)&&ts.onPointerDown(Q,{handleId:s,nodeId:p,isTarget:i,connectionRadius:A,domNode:D,nodeLookup:I,connectionMode:f,lib:H,autoPanOnConnect:K,flowId:X,isValidConnection:O??E,updateConnection:ft,cancelConnection:Se,panBy:De,onConnect:Ue=>{const Ke=k?k(Ue):Ue;Ke&&(Ee(Ke),w==null||w(Ue))},onConnectStart:(Ue,Ke)=>{g==null||g(Ue,{nodeId:Ke.nodeId,handleId:Ke.handleId,handleType:Ke.handleType})},onConnectEnd:(Ue,Ke)=>{C==null||C(Ue,Ke)},getTransform:()=>[m.x,m.y,m.zoom],getFromHandle:()=>h.fromHandle})}let Le=null,Ge;return t.$$set=Q=>{"id"in Q&&n(0,b=Q.id),"type"in Q&&n(1,T=Q.type),"position"in Q&&n(2,_=Q.position),"style"in Q&&n(3,P=Q.style),"isValidConnection"in Q&&n(33,O=Q.isValidConnection),"onconnect"in Q&&n(34,z=Q.onconnect),"ondisconnect"in Q&&n(35,Y=Q.ondisconnect),"isConnectable"in Q&&n(36,F=Q.isConnectable),"class"in Q&&n(4,U=Q.class),"$$scope"in Q&&n(44,B=Q.$$scope)},t.$$.update=()=>{var Q,at,Ue,Ke,Mt,Ct,Pt,zt,gt;if(t.$$.dirty[0]&2&&n(11,i=T==="target"),t.$$.dirty[1]&4128&&n(12,o=F!==void 0?F:Z),t.$$.dirty[0]&1&&n(6,s=b||null),t.$$.dirty[0]&3|t.$$.dirty[1]&3096&&(z||Y)&&n(38,Ge=c.get(`${p}-${T}-${b||null}`)),t.$$.dirty[1]&216){if(Le&&!El(Ge,Le)){const wt=Ge??new Map;ti(Le,wt,Y),ti(wt,Le,z)}n(37,Le=Ge??new Map)}t.$$.dirty[1]&256&&n(10,r=!!h.fromHandle),t.$$.dirty[0]&66|t.$$.dirty[1]&256&&n(9,l=((Q=h.fromHandle)==null?void 0:Q.nodeId)===p&&((at=h.fromHandle)==null?void 0:at.type)===T&&((Ue=h.fromHandle)==null?void 0:Ue.id)===s),t.$$.dirty[0]&66|t.$$.dirty[1]&256&&n(5,a=((Ke=h.toHandle)==null?void 0:Ke.nodeId)===p&&((Mt=h.toHandle)==null?void 0:Mt.type)===T&&((Ct=h.toHandle)==null?void 0:Ct.id)===s),t.$$.dirty[0]&66|t.$$.dirty[1]&768&&n(8,u=f===St.Strict?((Pt=h.fromHandle)==null?void 0:Pt.type)!==T:p!==((zt=h.fromHandle)==null?void 0:zt.nodeId)||s!==((gt=h.fromHandle)==null?void 0:gt.id)),t.$$.dirty[0]&32|t.$$.dirty[1]&256&&n(7,d=a&&h.isValid)},[b,T,_,P,U,a,s,d,u,l,r,i,o,X,p,N,ie,R,te,oe,se,re,ue,V,lt,st,Ve,rt,x,ct,dt,L,ht,O,z,Y,F,Le,Ge,h,f,c,y,Z,B,v]}class cn extends me{constructor(e){super(),ye(this,e,_s,bs,ke,{id:0,type:1,position:2,style:3,isValidConnection:33,onconnect:34,ondisconnect:35,isConnectable:36,class:4},null,[-1,-1])}}function ks(t){var a;let e,n,i=((a=t[0])==null?void 0:a.label)+"",o,s,r,l;return e=new cn({props:{type:"target",position:t[1]??ae.Top}}),r=new cn({props:{type:"source",position:t[2]??ae.Bottom}}),{c(){ce(e.$$.fragment),n=Ye(),o=Kt(i),s=Ye(),ce(r.$$.fragment)},l(u){be(e.$$.fragment,u),n=Xe(u),o=Bt(u,i),s=Xe(u),be(r.$$.fragment,u)},m(u,d){de(e,u,d),$(u,n,d),$(u,o,d),$(u,s,d),de(r,u,d),l=!0},p(u,[d]){var c;const h={};d&2&&(h.position=u[1]??ae.Top),e.$set(h),(!l||d&1)&&i!==(i=((c=u[0])==null?void 0:c.label)+"")&&Rt(o,i);const f={};d&4&&(f.position=u[2]??ae.Bottom),r.$set(f)},i(u){l||(G(e.$$.fragment,u),G(r.$$.fragment,u),l=!0)},o(u){J(e.$$.fragment,u),J(r.$$.fragment,u),l=!1},d(u){u&&(W(n),W(o),W(s)),he(e,u),he(r,u)}}}function ws(t,e,n){const i=["data","targetPosition","sourcePosition"];Te(e,i);let{data:o={label:"Node"}}=e,{targetPosition:s=void 0}=e,{sourcePosition:r=void 0}=e;return t.$$set=l=>{e=Pe(Pe({},e),ot(l)),n(3,Te(e,i)),"data"in l&&n(0,o=l.data),"targetPosition"in l&&n(1,s=l.targetPosition),"sourcePosition"in l&&n(2,r=l.sourcePosition)},[o,s,r]}class wo extends me{constructor(e){super(),ye(this,e,ws,ks,ke,{data:0,targetPosition:1,sourcePosition:2})}}function Ss(t){var r;let e=((r=t[0])==null?void 0:r.label)+"",n,i,o,s;return o=new cn({props:{type:"source",position:t[1]??ae.Bottom}}),{c(){n=Kt(e),i=Ye(),ce(o.$$.fragment)},l(l){n=Bt(l,e),i=Xe(l),be(o.$$.fragment,l)},m(l,a){$(l,n,a),$(l,i,a),de(o,l,a),s=!0},p(l,[a]){var d;(!s||a&1)&&e!==(e=((d=l[0])==null?void 0:d.label)+"")&&Rt(n,e);const u={};a&2&&(u.position=l[1]??ae.Bottom),o.$set(u)},i(l){s||(G(o.$$.fragment,l),s=!0)},o(l){J(o.$$.fragment,l),s=!1},d(l){l&&(W(n),W(i)),he(o,l)}}}function Es(t,e,n){const i=["data","sourcePosition"];Te(e,i);let{data:o={label:"Node"}}=e,{sourcePosition:s=void 0}=e;return t.$$set=r=>{e=Pe(Pe({},e),ot(r)),n(2,Te(e,i)),"data"in r&&n(0,o=r.data),"sourcePosition"in r&&n(1,s=r.sourcePosition)},[o,s]}class Ms extends me{constructor(e){super(),ye(this,e,Es,Ss,ke,{data:0,sourcePosition:1})}}function Cs(t){var r;let e=((r=t[0])==null?void 0:r.label)+"",n,i,o,s;return o=new cn({props:{type:"target",position:t[1]??ae.Top}}),{c(){n=Kt(e),i=Ye(),ce(o.$$.fragment)},l(l){n=Bt(l,e),i=Xe(l),be(o.$$.fragment,l)},m(l,a){$(l,n,a),$(l,i,a),de(o,l,a),s=!0},p(l,[a]){var d;(!s||a&1)&&e!==(e=((d=l[0])==null?void 0:d.label)+"")&&Rt(n,e);const u={};a&2&&(u.position=l[1]??ae.Top),o.$set(u)},i(l){s||(G(o.$$.fragment,l),s=!0)},o(l){J(o.$$.fragment,l),s=!1},d(l){l&&(W(n),W(i)),he(o,l)}}}function Ps(t,e,n){const i=["data","targetPosition"];Te(e,i);let{data:o={label:"Node"}}=e,{targetPosition:s=void 0}=e;return t.$$set=r=>{e=Pe(Pe({},e),ot(r)),n(2,Te(e,i)),"data"in r&&n(0,o=r.data),"targetPosition"in r&&n(1,s=r.targetPosition)},[o,s]}class zs extends me{constructor(e){super(),ye(this,e,Ps,Cs,ke,{data:0,targetPosition:1})}}function Os(t,e,n){const i=[];return Te(e,i),t.$$set=o=>{e=Pe(Pe({},e),ot(o)),n(0,Te(e,i))},[]}class Ds extends me{constructor(e){super(),ye(this,e,Os,null,ke,{})}}function yi(t,e,n){if(!e)return;const i=n?e.querySelector(n):e;i&&i.appendChild(t)}function Is(t,{target:e,domNode:n}){return yi(t,n,e),{async update({target:i,domNode:o}){yi(t,o,i)},destroy(){t.parentNode&&t.parentNode.removeChild(t)}}}function Ts(t){let e,n,i,o,s;const r=t[3].default,l=et(r,t,t[2],null);return{c(){e=We("div"),l&&l.c()},l(a){e=ve(a,"DIV",{});var u=ge(e);l&&l.l(u),u.forEach(W)},m(a,u){$(a,e,u),l&&l.m(e,null),i=!0,o||(s=Re(n=Is.call(null,e,{target:".svelte-flow__edgelabel-renderer",domNode:t[0]})),o=!0)},p(a,[u]){l&&l.p&&(!i||u&4)&&tt(l,r,a,a[2],i?it(r,a[2],u,null):nt(a[2]),null),n&&Ne(n.update)&&u&1&&n.update.call(null,{target:".svelte-flow__edgelabel-renderer",domNode:a[0]})},i(a){i||(G(l,a),i=!0)},o(a){J(l,a),i=!1},d(a){a&&W(e),l&&l.d(a),o=!1,s()}}}function Ns(t,e,n){let i,{$$slots:o={},$$scope:s}=e;const{domNode:r}=He();return j(t,r,l=>n(0,i=l)),t.$$set=l=>{"$$scope"in l&&n(2,s=l.$$scope)},[i,r,s,o]}class Hs extends me{constructor(e){super(),ye(this,e,Ns,Ts,ke,{})}}function So(){const{edgeLookup:t,selectionRect:e,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:o,unselectNodesAndEdges:s,elementsSelectable:r}=He();return l=>{const a=q(t).get(l);if(!a){console.warn("012",Zt.error012(l));return}(a.selectable||q(r)&&typeof a.selectable>"u")&&(e.set(null),n.set(null),a.selected?a.selected&&q(i)&&s({nodes:[],edges:[a]}):o([l]))}}function Ys(t){let e,n,i=`translate(-50%, -50%) translate(${t[1]}px,${t[2]}px)`,o,s,r;const l=t[5].default,a=et(l,t,t[7],null);return{c(){e=We("div"),a&&a.c(),this.h()},l(u){e=ve(u,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var d=ge(e);a&&a.l(d),d.forEach(W),this.h()},h(){M(e,"class","svelte-flow__edge-label"),M(e,"style",n="pointer-events: all;"+t[0]),M(e,"role","button"),M(e,"tabindex","-1"),fe(e,"transform",i)},m(u,d){$(u,e,d),a&&a.m(e,null),o=!0,s||(r=[Me(e,"keyup",As),Me(e,"click",t[6])],s=!0)},p(u,d){a&&a.p&&(!o||d&128)&&tt(a,l,u,u[7],o?it(l,u[7],d,null):nt(u[7]),null),(!o||d&1&&n!==(n="pointer-events: all;"+u[0]))&&M(e,"style",n);const h=d&1;(d&7&&i!==(i=`translate(-50%, -50%) translate(${u[1]}px,${u[2]}px)`)||h)&&fe(e,"transform",i)},i(u){o||(G(a,u),o=!0)},o(u){J(a,u),o=!1},d(u){u&&W(e),a&&a.d(u),s=!1,kt(r)}}}function Xs(t){let e,n;return e=new Hs({props:{$$slots:{default:[Ys]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},l(i){be(e.$$.fragment,i)},m(i,o){de(e,i,o),n=!0},p(i,[o]){const s={};o&135&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){n||(G(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){he(e,i)}}}const As=()=>{};function Vs(t,e,n){let{$$slots:i={},$$scope:o}=e,{style:s=void 0}=e,{x:r=void 0}=e,{y:l=void 0}=e;const a=So(),u=xt("svelteflow__edge_id"),d=()=>{u&&a(u)};return t.$$set=h=>{"style"in h&&n(0,s=h.style),"x"in h&&n(1,r=h.x),"y"in h&&n(2,l=h.y),"$$scope"in h&&n(7,o=h.$$scope)},[s,r,l,a,u,i,d,o]}class Ws extends me{constructor(e){super(),ye(this,e,Vs,Xs,ke,{style:0,x:1,y:2})}}function vs(t){let e;return{c(){e=ze("path"),this.h()},l(n){e=Oe(n,"path",{d:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,class:!0}),ge(e).forEach(W),this.h()},h(){M(e,"d",t[1]),M(e,"stroke-opacity",0),M(e,"stroke-width",t[10]),M(e,"fill","none"),M(e,"class","svelte-flow__edge-interaction")},m(n,i){$(n,e,i)},p(n,i){i&2&&M(e,"d",n[1])},d(n){n&&W(e)}}}function bi(t){let e,n;return e=new Ws({props:{x:t[3],y:t[4],style:t[5],$$slots:{default:[Ls]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},l(i){be(e.$$.fragment,i)},m(i,o){de(e,i,o),n=!0},p(i,o){const s={};o&8&&(s.x=i[3]),o&16&&(s.y=i[4]),o&32&&(s.style=i[5]),o&4100&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){n||(G(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){he(e,i)}}}function Ls(t){let e;return{c(){e=Kt(t[2])},l(n){e=Bt(n,t[2])},m(n,i){$(n,e,i)},p(n,i){i&4&&Rt(e,n[2])},d(n){n&&W(e)}}}function Ks(t){let e,n,i,o,s,r,l=t[10]&&vs(t),a=t[2]&&bi(t);return{c(){e=ze("path"),i=Ye(),l&&l.c(),o=Ye(),a&&a.c(),s=we(),this.h()},l(u){e=Oe(u,"path",{id:!0,d:!0,class:!0,"marker-start":!0,"marker-end":!0,fill:!0,style:!0}),ge(e).forEach(W),i=Xe(u),l&&l.l(u),o=Xe(u),a&&a.l(u),s=we(),this.h()},h(){M(e,"id",t[0]),M(e,"d",t[1]),M(e,"class",n=Ce(["svelte-flow__edge-path",t[9]])),M(e,"marker-start",t[6]),M(e,"marker-end",t[7]),M(e,"fill","none"),M(e,"style",t[8])},m(u,d){$(u,e,d),$(u,i,d),l&&l.m(u,d),$(u,o,d),a&&a.m(u,d),$(u,s,d),r=!0},p(u,[d]){(!r||d&1)&&M(e,"id",u[0]),(!r||d&2)&&M(e,"d",u[1]),(!r||d&512&&n!==(n=Ce(["svelte-flow__edge-path",u[9]])))&&M(e,"class",n),(!r||d&64)&&M(e,"marker-start",u[6]),(!r||d&128)&&M(e,"marker-end",u[7]),(!r||d&256)&&M(e,"style",u[8]),u[10]&&l.p(u,d),u[2]?a?(a.p(u,d),d&4&&G(a,1)):(a=bi(u),a.c(),G(a,1),a.m(s.parentNode,s)):a&&(Ze(),J(a,1,1,()=>{a=null}),Fe())},i(u){r||(G(a),r=!0)},o(u){J(a),r=!1},d(u){u&&(W(e),W(i),W(o),W(s)),l&&l.d(u),a&&a.d(u)}}}function Bs(t,e,n){let{id:i=void 0}=e,{path:o}=e,{label:s=void 0}=e,{labelX:r=void 0}=e,{labelY:l=void 0}=e,{labelStyle:a=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:d=void 0}=e,{style:h=void 0}=e,{interactionWidth:f=20}=e,{class:c=void 0}=e,y=f===void 0?20:f;return t.$$set=m=>{"id"in m&&n(0,i=m.id),"path"in m&&n(1,o=m.path),"label"in m&&n(2,s=m.label),"labelX"in m&&n(3,r=m.labelX),"labelY"in m&&n(4,l=m.labelY),"labelStyle"in m&&n(5,a=m.labelStyle),"markerStart"in m&&n(6,u=m.markerStart),"markerEnd"in m&&n(7,d=m.markerEnd),"style"in m&&n(8,h=m.style),"interactionWidth"in m&&n(11,f=m.interactionWidth),"class"in m&&n(9,c=m.class)},[i,o,s,r,l,a,u,d,h,c,y,f]}class Mn extends me{constructor(e){super(),ye(this,e,Bs,Ks,ke,{id:0,path:1,label:2,labelX:3,labelY:4,labelStyle:5,markerStart:6,markerEnd:7,style:8,interactionWidth:11,class:9})}}function Rs(t){let e,n;return e=new Mn({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){ce(e.$$.fragment)},l(i){be(e.$$.fragment,i)},m(i,o){de(e,i,o),n=!0},p(i,[o]){const s={};o&256&&(s.path=i[8]),o&128&&(s.labelX=i[7]),o&64&&(s.labelY=i[6]),o&1&&(s.label=i[0]),o&2&&(s.labelStyle=i[1]),o&8&&(s.markerStart=i[3]),o&16&&(s.markerEnd=i[4]),o&32&&(s.interactionWidth=i[5]),o&4&&(s.style=i[2]),e.$set(s)},i(i){n||(G(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){he(e,i)}}}function Zs(t,e,n){let i,o,s;const r=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Te(e,r);let{label:l=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:d=void 0}=e,{markerEnd:h=void 0}=e,{interactionWidth:f=void 0}=e,{sourceX:c}=e,{sourceY:y}=e,{sourcePosition:m}=e,{targetX:C}=e,{targetY:g}=e,{targetPosition:w}=e;return t.$$set=k=>{e=Pe(Pe({},e),ot(k)),n(15,Te(e,r)),"label"in k&&n(0,l=k.label),"labelStyle"in k&&n(1,a=k.labelStyle),"style"in k&&n(2,u=k.style),"markerStart"in k&&n(3,d=k.markerStart),"markerEnd"in k&&n(4,h=k.markerEnd),"interactionWidth"in k&&n(5,f=k.interactionWidth),"sourceX"in k&&n(9,c=k.sourceX),"sourceY"in k&&n(10,y=k.sourceY),"sourcePosition"in k&&n(11,m=k.sourcePosition),"targetX"in k&&n(12,C=k.targetX),"targetY"in k&&n(13,g=k.targetY),"targetPosition"in k&&n(14,w=k.targetPosition)},t.$$.update=()=>{t.$$.dirty&32256&&n(8,[i,o,s]=no({sourceX:c,sourceY:y,targetX:C,targetY:g,sourcePosition:m,targetPosition:w}),i,(n(7,o),n(9,c),n(10,y),n(12,C),n(13,g),n(11,m),n(14,w)),(n(6,s),n(9,c),n(10,y),n(12,C),n(13,g),n(11,m),n(14,w)))},[l,a,u,d,h,f,s,o,i,c,y,m,C,g,w]}class Eo extends me{constructor(e){super(),ye(this,e,Zs,Rs,ke,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function Fs(t){let e,n;return e=new Mn({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){ce(e.$$.fragment)},l(i){be(e.$$.fragment,i)},m(i,o){de(e,i,o),n=!0},p(i,[o]){const s={};o&256&&(s.path=i[8]),o&128&&(s.labelX=i[7]),o&64&&(s.labelY=i[6]),o&1&&(s.label=i[0]),o&2&&(s.labelStyle=i[1]),o&8&&(s.markerStart=i[3]),o&16&&(s.markerEnd=i[4]),o&32&&(s.interactionWidth=i[5]),o&4&&(s.style=i[2]),e.$set(s)},i(i){n||(G(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){he(e,i)}}}function Gs(t,e,n){let i,o,s;const r=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Te(e,r);let{label:l=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:d=void 0}=e,{markerEnd:h=void 0}=e,{interactionWidth:f=void 0}=e,{sourceX:c}=e,{sourceY:y}=e,{sourcePosition:m}=e,{targetX:C}=e,{targetY:g}=e,{targetPosition:w}=e;return t.$$set=k=>{e=Pe(Pe({},e),ot(k)),n(15,Te(e,r)),"label"in k&&n(0,l=k.label),"labelStyle"in k&&n(1,a=k.labelStyle),"style"in k&&n(2,u=k.style),"markerStart"in k&&n(3,d=k.markerStart),"markerEnd"in k&&n(4,h=k.markerEnd),"interactionWidth"in k&&n(5,f=k.interactionWidth),"sourceX"in k&&n(9,c=k.sourceX),"sourceY"in k&&n(10,y=k.sourceY),"sourcePosition"in k&&n(11,m=k.sourcePosition),"targetX"in k&&n(12,C=k.targetX),"targetY"in k&&n(13,g=k.targetY),"targetPosition"in k&&n(14,w=k.targetPosition)},t.$$.update=()=>{t.$$.dirty&32256&&n(8,[i,o,s]=fn({sourceX:c,sourceY:y,targetX:C,targetY:g,sourcePosition:m,targetPosition:w}),i,(n(7,o),n(9,c),n(10,y),n(12,C),n(13,g),n(11,m),n(14,w)),(n(6,s),n(9,c),n(10,y),n(12,C),n(13,g),n(11,m),n(14,w)))},[l,a,u,d,h,f,s,o,i,c,y,m,C,g,w]}class Us extends me{constructor(e){super(),ye(this,e,Gs,Fs,ke,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function qs(t){let e,n;return e=new Mn({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){ce(e.$$.fragment)},l(i){be(e.$$.fragment,i)},m(i,o){de(e,i,o),n=!0},p(i,[o]){const s={};o&256&&(s.path=i[8]),o&128&&(s.labelX=i[7]),o&64&&(s.labelY=i[6]),o&1&&(s.label=i[0]),o&2&&(s.labelStyle=i[1]),o&8&&(s.markerStart=i[3]),o&16&&(s.markerEnd=i[4]),o&32&&(s.interactionWidth=i[5]),o&4&&(s.style=i[2]),e.$set(s)},i(i){n||(G(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){he(e,i)}}}function js(t,e,n){let i,o,s;const r=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"];Te(e,r);let{label:l=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:d=void 0}=e,{markerEnd:h=void 0}=e,{interactionWidth:f=void 0}=e,{sourceX:c}=e,{sourceY:y}=e,{targetX:m}=e,{targetY:C}=e;return t.$$set=g=>{e=Pe(Pe({},e),ot(g)),n(13,Te(e,r)),"label"in g&&n(0,l=g.label),"labelStyle"in g&&n(1,a=g.labelStyle),"style"in g&&n(2,u=g.style),"markerStart"in g&&n(3,d=g.markerStart),"markerEnd"in g&&n(4,h=g.markerEnd),"interactionWidth"in g&&n(5,f=g.interactionWidth),"sourceX"in g&&n(9,c=g.sourceX),"sourceY"in g&&n(10,y=g.sourceY),"targetX"in g&&n(11,m=g.targetX),"targetY"in g&&n(12,C=g.targetY)},t.$$.update=()=>{t.$$.dirty&7680&&n(8,[i,o,s]=oo({sourceX:c,sourceY:y,targetX:m,targetY:C}),i,(n(7,o),n(9,c),n(10,y),n(11,m),n(12,C)),(n(6,s),n(9,c),n(10,y),n(11,m),n(12,C)))},[l,a,u,d,h,f,s,o,i,c,y,m,C]}class ps extends me{constructor(e){super(),ye(this,e,js,qs,ke,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,targetX:11,targetY:12})}}function Js(t){let e,n;return e=new Mn({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){ce(e.$$.fragment)},l(i){be(e.$$.fragment,i)},m(i,o){de(e,i,o),n=!0},p(i,[o]){const s={};o&256&&(s.path=i[8]),o&128&&(s.labelX=i[7]),o&64&&(s.labelY=i[6]),o&1&&(s.label=i[0]),o&2&&(s.labelStyle=i[1]),o&8&&(s.markerStart=i[3]),o&16&&(s.markerEnd=i[4]),o&32&&(s.interactionWidth=i[5]),o&4&&(s.style=i[2]),e.$set(s)},i(i){n||(G(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){he(e,i)}}}function Qs(t,e,n){let i,o,s;const r=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Te(e,r);let{label:l=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:d=void 0}=e,{markerEnd:h=void 0}=e,{interactionWidth:f=void 0}=e,{sourceX:c}=e,{sourceY:y}=e,{sourcePosition:m}=e,{targetX:C}=e,{targetY:g}=e,{targetPosition:w}=e;return t.$$set=k=>{e=Pe(Pe({},e),ot(k)),n(15,Te(e,r)),"label"in k&&n(0,l=k.label),"labelStyle"in k&&n(1,a=k.labelStyle),"style"in k&&n(2,u=k.style),"markerStart"in k&&n(3,d=k.markerStart),"markerEnd"in k&&n(4,h=k.markerEnd),"interactionWidth"in k&&n(5,f=k.interactionWidth),"sourceX"in k&&n(9,c=k.sourceX),"sourceY"in k&&n(10,y=k.sourceY),"sourcePosition"in k&&n(11,m=k.sourcePosition),"targetX"in k&&n(12,C=k.targetX),"targetY"in k&&n(13,g=k.targetY),"targetPosition"in k&&n(14,w=k.targetPosition)},t.$$.update=()=>{t.$$.dirty&32256&&n(8,[i,o,s]=fn({sourceX:c,sourceY:y,targetX:C,targetY:g,sourcePosition:m,targetPosition:w,borderRadius:0}),i,(n(7,o),n(9,c),n(10,y),n(12,C),n(13,g),n(11,m),n(14,w)),(n(6,s),n(9,c),n(10,y),n(12,C),n(13,g),n(11,m),n(14,w)))},[l,a,u,d,h,f,s,o,i,c,y,m,C,g,w]}class xs extends me{constructor(e){super(),ye(this,e,Qs,Js,ke,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function $s(t,e){const n=t.set,i=e.set,o=q(t),s=q(e);let l=o.length===0&&s.length>0?s:o;t.set(l);const a=u=>{const d=n(u);return l=d,i(l),d};t.set=e.set=a,t.update=e.update=u=>a(u(l))}function er(t,e){const n=t.set,i=e.set;let o=q(e);t.set(o);const s=r=>{n(r),i(r),o=r};t.set=e.set=s,t.update=e.update=r=>s(r(o))}const tr=(t,e,n)=>{if(!n)return;const i=q(t),o=e.set,s=n.set;let r=n?q(n):{x:0,y:0,zoom:1};e.set(r),e.set=l=>(o(l),s(l),r=l,l),n.set=l=>(i==null||i.syncViewport(l),o(l),s(l),r=l,l),e.update=l=>{e.set(l(r))},n.update=l=>{n.set(l(r))}},nr=(t,e,n,i=[0,0],o=on)=>{const{subscribe:s,set:r,update:l}=ne([]);let a=t,u={},d=!0;const h=m=>(ro(m,e,n,{elevateNodesOnSelect:d,nodeOrigin:i,nodeExtent:o,defaults:u,checkEquality:!1}),a=m,r(a),a),f=m=>h(m(a)),c=m=>{u=m},y=m=>{d=m.elevateNodesOnSelect??d};return h(a),{subscribe:s,set:h,update:f,setDefaultOptions:c,setOptions:y}},ir=(t,e,n,i)=>{const{subscribe:o,set:s,update:r}=ne([]);let l=t,a={};const u=f=>{const c=a?f.map(y=>({...a,...y})):f;fo(e,n,c),l=c,s(l)},d=f=>u(f(l)),h=f=>{a=f};return u(l),{subscribe:o,set:u,update:d,setDefaultOptions:h}},Mo={input:Ms,output:zs,default:wo,group:Ds},Co={straight:ps,smoothstep:Us,default:Eo,step:xs},or=({nodes:t=[],edges:e=[],width:n,height:i,fitView:o,nodeOrigin:s,nodeExtent:r})=>{const l=new Map,a=new Map,u=new Map,d=new Map,h=s??[0,0],f=r??on;ro(t,l,a,{nodeExtent:f,nodeOrigin:h,elevateNodesOnSelect:!1,checkEquality:!1}),fo(u,d,e);let c={x:0,y:0,zoom:1};if(o&&n&&i){const y=Ft(l,{filter:m=>!!((m.width||m.initialWidth)&&(m.height||m.initialHeight))});c=$i(y,n,i,.5,2,.1)}return{flowId:ne(null),nodes:nr(t,l,a,h,f),nodeLookup:pe(l),parentLookup:pe(a),edgeLookup:pe(d),visibleNodes:pe([]),edges:ir(e,u,d),visibleEdges:pe([]),connectionLookup:pe(u),height:ne(500),width:ne(500),minZoom:ne(.5),maxZoom:ne(2),nodeOrigin:ne(h),nodeDragThreshold:ne(1),nodeExtent:ne(f),translateExtent:ne(on),autoPanOnNodeDrag:ne(!0),autoPanOnConnect:ne(!0),fitViewOnInit:ne(!1),fitViewOnInitDone:ne(!1),fitViewOptions:ne(void 0),panZoom:ne(null),snapGrid:ne(null),dragging:ne(!1),selectionRect:ne(null),selectionKeyPressed:ne(!1),multiselectionKeyPressed:ne(!1),deleteKeyPressed:ne(!1),panActivationKeyPressed:ne(!1),zoomActivationKeyPressed:ne(!1),selectionRectMode:ne(null),selectionMode:ne(ln.Partial),nodeTypes:ne(Mo),edgeTypes:ne(Co),viewport:ne(c),connectionMode:ne(St.Strict),domNode:ne(null),connection:pe(Vn),connectionLineType:ne(Ht.Bezier),connectionRadius:ne(20),isValidConnection:ne(()=>!0),nodesDraggable:ne(!0),nodesConnectable:ne(!0),elementsSelectable:ne(!0),selectNodesOnDrag:ne(!0),markers:pe([]),defaultMarkerColor:ne("#b1b1b7"),lib:pe("svelte"),onlyRenderVisibleElements:ne(!1),onerror:ne(zl),ondelete:ne(void 0),onedgecreate:ne(void 0),onconnect:ne(void 0),onconnectstart:ne(void 0),onconnectend:ne(void 0),onbeforedelete:ne(void 0),nodesInitialized:ne(!1),edgesInitialized:ne(!1),viewportInitialized:ne(!1),initialized:pe(!1)}};function lr(t){const e=Tt([t.edges,t.nodes,t.nodeLookup,t.onlyRenderVisibleElements,t.viewport,t.width,t.height],([n,,i,o,s,r,l])=>o&&r&&l?n.filter(u=>{const d=i.get(u.source),h=i.get(u.target);return d&&h&&Yl({sourceNode:d,targetNode:h,width:r,height:l,transform:[s.x,s.y,s.zoom]})}):n);return Tt([e,t.nodes,t.nodeLookup,t.connectionMode,t.onerror],([n,,i,o,s])=>n.reduce((l,a)=>{const u=i.get(a.source),d=i.get(a.target);if(!u||!d)return l;const h=Kl({id:a.id,sourceNode:u,targetNode:d,sourceHandle:a.sourceHandle||null,targetHandle:a.targetHandle||null,connectionMode:o,onError:s});return h&&l.push({...a,zIndex:Hl({selected:a.selected,zIndex:a.zIndex,sourceNode:u,targetNode:d,elevateOnSelect:!1}),...h}),l},[]))}function sr(t){return Tt([t.nodeLookup,t.onlyRenderVisibleElements,t.width,t.height,t.viewport,t.nodes],([e,n,i,o,s])=>{const r=[s.x,s.y,s.zoom];return n?pi(e,{x:0,y:0,width:i,height:o},r,!0):Array.from(e.values())})}const Gn=Symbol();function rr({nodes:t,edges:e,width:n,height:i,fitView:o,nodeOrigin:s,nodeExtent:r}){const l=or({nodes:t,edges:e,width:n,height:i,fitView:o,nodeOrigin:s,nodeExtent:r});function a(_){l.nodeTypes.set({...Mo,..._})}function u(_){l.edgeTypes.set({...Co,..._})}function d(_){const P=q(l.edges);l.edges.set(Vl(_,P))}const h=(_,P=!1)=>{var z;const O=q(l.nodeLookup);for(const[Y,F]of _){const U=(z=O.get(Y))==null?void 0:z.internals.userNode;U&&(U.position=F.position,U.dragging=P)}l.nodes.update(Y=>Y)};function f(_){var Y,F,U;const P=q(l.nodeLookup),{changes:O,updatedInternals:z}=Ul(_,P,q(l.parentLookup),q(l.domNode),q(l.nodeOrigin));if(z){if(!q(l.fitViewOnInitDone)&&q(l.fitViewOnInit)){const p=q(l.fitViewOptions),N=y({...p,nodes:p==null?void 0:p.nodes});l.fitViewOnInitDone.set(N)}for(const p of O){const N=(Y=P.get(p.id))==null?void 0:Y.internals.userNode;if(N)switch(p.type){case"dimensions":{const ee={...N.measured,...p.dimensions};p.setAttributes&&(N.width=((F=p.dimensions)==null?void 0:F.width)??N.width,N.height=((U=p.dimensions)==null?void 0:U.height)??N.height),N.measured=ee;break}case"position":N.position=p.position??N.position;break}}l.nodes.update(p=>p),q(l.nodesInitialized)||l.nodesInitialized.set(!0)}}function c(_){const P=q(l.panZoom);if(!P)return Promise.resolve(!1);const O=ii(q(l.nodeLookup),_);return oi({nodes:O,width:q(l.width),height:q(l.height),minZoom:q(l.minZoom),maxZoom:q(l.maxZoom),panZoom:P},_)}function y(_){const P=q(l.panZoom);if(!P)return!1;const O=ii(q(l.nodeLookup),_);return oi({nodes:O,width:q(l.width),height:q(l.height),minZoom:q(l.minZoom),maxZoom:q(l.maxZoom),panZoom:P},_),O.size>0}function m(_,P){const O=q(l.panZoom);return O?O.scaleBy(_,P):Promise.resolve(!1)}function C(_){return m(1.2,_)}function g(_){return m(1/1.2,_)}function w(_){const P=q(l.panZoom);P&&(P.setScaleExtent([_,q(l.maxZoom)]),l.minZoom.set(_))}function k(_){const P=q(l.panZoom);P&&(P.setScaleExtent([q(l.minZoom),_]),l.maxZoom.set(_))}function E(_){const P=q(l.panZoom);P&&(P.setTranslateExtent(_),l.translateExtent.set(_))}function X(_){let P=!1;return _.forEach(O=>{O.selected&&(O.selected=!1,P=!0)}),P}function K(_){var P;(P=q(l.panZoom))==null||P.setClickDistance(_)}function H(_){X((_==null?void 0:_.nodes)||q(l.nodes))&&l.nodes.set(q(l.nodes)),X((_==null?void 0:_.edges)||q(l.edges))&&l.edges.set(q(l.edges))}l.deleteKeyPressed.subscribe(async _=>{var P;if(_){const O=q(l.nodes),z=q(l.edges),Y=O.filter(N=>N.selected),F=z.filter(N=>N.selected),{nodes:U,edges:p}=await Pl({nodesToRemove:Y,edgesToRemove:F,nodes:O,edges:z,onBeforeDelete:q(l.onbeforedelete)});(U.length||p.length)&&(l.nodes.update(N=>N.filter(ee=>!U.some(ie=>ie.id===ee.id))),l.edges.update(N=>N.filter(ee=>!p.some(ie=>ie.id===ee.id))),(P=q(l.ondelete))==null||P({nodes:U,edges:p}))}});function I(_){const P=q(l.multiselectionKeyPressed);l.nodes.update(O=>O.map(z=>{const Y=_.includes(z.id),F=P&&z.selected||Y;return z.selected=F,z})),P||l.edges.update(O=>O.map(z=>(z.selected=!1,z)))}function D(_){const P=q(l.multiselectionKeyPressed);l.edges.update(O=>O.map(z=>{const Y=_.includes(z.id),F=P&&z.selected||Y;return z.selected=F,z})),P||l.nodes.update(O=>O.map(z=>(z.selected=!1,z)))}function A(_){var O;const P=(O=q(l.nodes))==null?void 0:O.find(z=>z.id===_);if(!P){console.warn("012",Zt.error012(_));return}l.selectionRect.set(null),l.selectionRectMode.set(null),P.selected?P.selected&&q(l.multiselectionKeyPressed)&&H({nodes:[P],edges:[]}):I([_])}function Z(_){const P=q(l.viewport);return ql({delta:_,panZoom:q(l.panZoom),transform:[P.x,P.y,P.zoom],translateExtent:q(l.translateExtent),width:q(l.width),height:q(l.height)})}const v=ne(Vn),B=_=>{v.set({..._})};function b(){v.set(Vn)}function T(){l.fitViewOnInitDone.set(!1),l.selectionRect.set(null),l.selectionRectMode.set(null),l.snapGrid.set(null),l.isValidConnection.set(()=>!0),H(),b()}return{...l,visibleEdges:lr(l),visibleNodes:sr(l),connection:Tt([v,l.viewport],([_,P])=>_.inProgress?{..._,to:Sn(_.to,[P.x,P.y,P.zoom])}:{..._}),markers:Tt([l.edges,l.defaultMarkerColor,l.flowId],([_,P,O])=>Bl(_,{defaultColor:P,id:O})),initialized:(()=>{let _=!1;const P=q(l.nodes).length,O=q(l.edges).length;return Tt([l.nodesInitialized,l.edgesInitialized,l.viewportInitialized],([z,Y,F])=>_||(P===0?_=F:O===0?_=F&&z:_=F&&z&&Y,_))})(),syncNodeStores:_=>$s(l.nodes,_),syncEdgeStores:_=>er(l.edges,_),syncViewport:_=>tr(l.panZoom,l.viewport,_),setNodeTypes:a,setEdgeTypes:u,addEdge:d,updateNodePositions:h,updateNodeInternals:f,zoomIn:C,zoomOut:g,fitView:_=>c(_),setMinZoom:w,setMaxZoom:k,setTranslateExtent:E,setPaneClickDistance:K,unselectNodesAndEdges:H,addSelectedNodes:I,addSelectedEdges:D,handleNodeSelection:A,panBy:Z,updateConnection:B,cancelConnection:b,reset:T}}function He(){const t=xt(Gn);if(!t)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return t.getStore()}function ar({nodes:t,edges:e,width:n,height:i,fitView:o,nodeOrigin:s,nodeExtent:r}){const l=rr({nodes:t,edges:e,width:n,height:i,fitView:o,nodeOrigin:s,nodeExtent:r});return $t(Gn,{getStore:()=>l}),l}function ur(t,e){const{panZoom:n,minZoom:i,maxZoom:o,initialViewport:s,viewport:r,dragging:l,translateExtent:a,paneClickDistance:u}=e,d=fs({domNode:t,minZoom:i,maxZoom:o,translateExtent:a,viewport:s,paneClickDistance:u,onDraggingChange:l.set}),h=d.getViewport();return r.set(h),n.set(d),d.update(e),{update(f){d.update(f)}}}function fr(t){let e,n,i,o,s;const r=t[35].default,l=et(r,t,t[34],null);return{c(){e=We("div"),l&&l.c(),this.h()},l(a){e=ve(a,"DIV",{class:!0});var u=ge(e);l&&l.l(u),u.forEach(W),this.h()},h(){M(e,"class","svelte-flow__zoom svelte-4xkw84")},m(a,u){$(a,e,u),l&&l.m(e,null),i=!0,o||(s=Re(n=ur.call(null,e,{viewport:t[18],minZoom:t[12],maxZoom:t[13],initialViewport:t[11],dragging:t[23],panZoom:t[19],onPanZoomStart:t[0],onPanZoom:t[1],onPanZoomEnd:t[2],zoomOnScroll:t[5],zoomOnDoubleClick:t[6],zoomOnPinch:t[7],panOnScroll:t[9],panOnDrag:t[10],panOnScrollSpeed:.5,panOnScrollMode:t[3]||$e.Free,zoomActivationKeyPressed:t[14],preventScrolling:typeof t[4]=="boolean"?t[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!t[15],translateExtent:t[16],lib:t[17],paneClickDistance:t[8],onTransformChange:t[29]})),o=!0)},p(a,u){l&&l.p&&(!i||u[1]&8)&&tt(l,r,a,a[34],i?it(r,a[34],u,null):nt(a[34]),null),n&&Ne(n.update)&&u[0]&262143&&n.update.call(null,{viewport:a[18],minZoom:a[12],maxZoom:a[13],initialViewport:a[11],dragging:a[23],panZoom:a[19],onPanZoomStart:a[0],onPanZoom:a[1],onPanZoomEnd:a[2],zoomOnScroll:a[5],zoomOnDoubleClick:a[6],zoomOnPinch:a[7],panOnScroll:a[9],panOnDrag:a[10],panOnScrollSpeed:.5,panOnScrollMode:a[3]||$e.Free,zoomActivationKeyPressed:a[14],preventScrolling:typeof a[4]=="boolean"?a[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!a[15],translateExtent:a[16],lib:a[17],paneClickDistance:a[8],onTransformChange:a[29]})},i(a){i||(G(l,a),i=!0)},o(a){J(l,a),i=!1},d(a){a&&W(e),l&&l.d(a),o=!1,s()}}}function cr(t,e,n){let i,o,s,r,l,a,u,d,h,f,c,{$$slots:y={},$$scope:m}=e,{initialViewport:C=void 0}=e,{onMoveStart:g=void 0}=e,{onMove:w=void 0}=e,{onMoveEnd:k=void 0}=e,{panOnScrollMode:E}=e,{preventScrolling:X}=e,{zoomOnScroll:K}=e,{zoomOnDoubleClick:H}=e,{zoomOnPinch:I}=e,{panOnDrag:D}=e,{panOnScroll:A}=e,{paneClickDistance:Z}=e;const{viewport:v,panZoom:B,selectionRect:b,minZoom:T,maxZoom:_,dragging:P,translateExtent:O,lib:z,panActivationKeyPressed:Y,zoomActivationKeyPressed:F,viewportInitialized:U}=He();j(t,b,N=>n(15,h=N)),j(t,T,N=>n(12,a=N)),j(t,_,N=>n(13,u=N)),j(t,O,N=>n(16,f=N)),j(t,z,N=>n(17,c=N)),j(t,Y,N=>n(33,l=N)),j(t,F,N=>n(14,d=N)),j(t,U,N=>n(36,r=N));const p=N=>v.set({x:N[0],y:N[1],zoom:N[2]});return dn(()=>{en(U,r=!0,r)}),t.$$set=N=>{"initialViewport"in N&&n(30,C=N.initialViewport),"onMoveStart"in N&&n(0,g=N.onMoveStart),"onMove"in N&&n(1,w=N.onMove),"onMoveEnd"in N&&n(2,k=N.onMoveEnd),"panOnScrollMode"in N&&n(3,E=N.panOnScrollMode),"preventScrolling"in N&&n(4,X=N.preventScrolling),"zoomOnScroll"in N&&n(5,K=N.zoomOnScroll),"zoomOnDoubleClick"in N&&n(6,H=N.zoomOnDoubleClick),"zoomOnPinch"in N&&n(7,I=N.zoomOnPinch),"panOnDrag"in N&&n(31,D=N.panOnDrag),"panOnScroll"in N&&n(32,A=N.panOnScroll),"paneClickDistance"in N&&n(8,Z=N.paneClickDistance),"$$scope"in N&&n(34,m=N.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&1073741824&&n(11,i=C||{x:0,y:0,zoom:1}),t.$$.dirty[1]&5&&n(10,o=l||D),t.$$.dirty[1]&6&&n(9,s=l||A)},[g,w,k,E,X,K,H,I,Z,s,o,i,a,u,d,h,f,c,v,B,b,T,_,P,O,z,Y,F,U,p,C,D,A,l,m,y]}class dr extends me{constructor(e){super(),ye(this,e,cr,fr,ke,{initialViewport:30,onMoveStart:0,onMove:1,onMoveEnd:2,panOnScrollMode:3,preventScrolling:4,zoomOnScroll:5,zoomOnDoubleClick:6,zoomOnPinch:7,panOnDrag:31,panOnScroll:32,paneClickDistance:8},null,[-1,-1])}}function hr(t){let e,n,i,o;const s=t[28].default,r=et(s,t,t[27],null);return{c(){e=We("div"),r&&r.c(),this.h()},l(l){e=ve(l,"DIV",{class:!0});var a=ge(e);r&&r.l(a),a.forEach(W),this.h()},h(){M(e,"class","svelte-flow__pane svelte-1esy7hx"),le(e,"draggable",t[0]===!0||Array.isArray(t[0])&&t[0].includes(0)),le(e,"dragging",t[4]),le(e,"selection",t[1])},m(l,a){$(l,e,a),r&&r.m(e,null),t[29](e),n=!0,i||(o=[Me(e,"click",function(){Ne(t[3]?void 0:Qt(t[15],t[2]))&&(t[3]?void 0:Qt(t[15],t[2])).apply(this,arguments)}),Me(e,"pointerdown",function(){Ne(t[3]?t[16]:void 0)&&(t[3]?t[16]:void 0).apply(this,arguments)}),Me(e,"pointermove",function(){Ne(t[3]?t[17]:void 0)&&(t[3]?t[17]:void 0).apply(this,arguments)}),Me(e,"pointerup",function(){Ne(t[3]?t[18]:void 0)&&(t[3]?t[18]:void 0).apply(this,arguments)}),Me(e,"contextmenu",function(){Ne(Qt(t[19],t[2]))&&Qt(t[19],t[2]).apply(this,arguments)})],i=!0)},p(l,a){t=l,r&&r.p&&(!n||a[0]&134217728)&&tt(r,s,t,t[27],n?it(s,t[27],a,null):nt(t[27]),null),(!n||a[0]&1)&&le(e,"draggable",t[0]===!0||Array.isArray(t[0])&&t[0].includes(0)),(!n||a[0]&16)&&le(e,"dragging",t[4]),(!n||a[0]&2)&&le(e,"selection",t[1])},i(l){n||(G(r,l),n=!0)},o(l){J(r,l),n=!1},d(l){l&&W(e),r&&r.d(l),t[29](null),i=!1,kt(o)}}}function Qt(t,e){return n=>{n.target===e&&(t==null||t(n))}}function _i(t){return e=>{const n=t.includes(e.id);return e.selected!==n&&(e.selected=n),e}}function gr(t,e,n){let i,o,s,r,l,a,u,d,h,f,c,y,m,{$$slots:C={},$$scope:g}=e,{panOnDrag:w=void 0}=e,{selectionOnDrag:k=void 0}=e;const E=hn(),{nodes:X,nodeLookup:K,edges:H,viewport:I,dragging:D,elementsSelectable:A,selectionRect:Z,selectionRectMode:v,selectionKeyPressed:B,selectionMode:b,panActivationKeyPressed:T,unselectNodesAndEdges:_}=He();j(t,K,R=>n(36,h=R)),j(t,H,R=>n(33,a=R)),j(t,I,R=>n(35,d=R)),j(t,D,R=>n(4,m=R)),j(t,A,R=>n(25,c=R)),j(t,Z,R=>n(24,f=R)),j(t,v,R=>n(23,l=R)),j(t,B,R=>n(22,r=R)),j(t,b,R=>n(34,u=R)),j(t,T,R=>n(26,y=R));let P,O=null,z=[],Y=!1;function F(R){if(Y){Y=!1;return}E("paneclick",{event:R}),_(),v.set(null)}function U(R){var se,re;if(O=P.getBoundingClientRect(),!A||!o||R.button!==0||R.target!==P||!O)return;(re=(se=R.target)==null?void 0:se.setPointerCapture)==null||re.call(se,R.pointerId);const{x:te,y:oe}=ut(R,O);_(),Z.set({width:0,height:0,startX:te,startY:oe,x:te,y:oe})}function p(R){if(!o||!O||!f)return;Y=!0;const te=ut(R,O),oe=f.startX??0,se=f.startY??0,re={...f,x:te.x<oe?te.x:oe,y:te.y<se?te.y:se,width:Math.abs(te.x-oe),height:Math.abs(te.y-se)},ue=z.map(Se=>Se.id),Ee=Wn(z,a).map(Se=>Se.id);z=pi(h,re,[d.x,d.y,d.zoom],u===ln.Partial,!0);const V=Wn(z,a).map(Se=>Se.id),De=z.map(Se=>Se.id);(ue.length!==De.length||De.some(Se=>!ue.includes(Se)))&&X.update(Se=>Se.map(_i(De))),(Ee.length!==V.length||V.some(Se=>!Ee.includes(Se)))&&H.update(Se=>Se.map(_i(V))),v.set("user"),Z.set(re)}function N(R){var te,oe;R.button===0&&((oe=(te=R.target)==null?void 0:te.releasePointerCapture)==null||oe.call(te,R.pointerId),!o&&l==="user"&&R.target===P&&(F==null||F(R)),Z.set(null),z.length>0&&en(v,l="nodes",l),r&&(Y=!1))}const ee=R=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){R.preventDefault();return}E("panecontextmenu",{event:R})};function ie(R){Kn[R?"unshift":"push"](()=>{P=R,n(2,P)})}return t.$$set=R=>{"panOnDrag"in R&&n(0,w=R.panOnDrag),"selectionOnDrag"in R&&n(20,k=R.selectionOnDrag),"$$scope"in R&&n(27,g=R.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&67108865&&n(21,i=y||w),t.$$.dirty[0]&24117248&&n(1,o=r||f||k&&i!==!0),t.$$.dirty[0]&41943042&&n(3,s=c&&(o||l==="user"))},[w,o,P,s,m,K,H,I,D,A,Z,v,B,b,T,F,U,p,N,ee,k,i,r,l,f,c,y,g,C,ie]}class mr extends me{constructor(e){super(),ye(this,e,gr,hr,ke,{panOnDrag:0,selectionOnDrag:20},null,[-1,-1])}}function yr(t){let e,n;const i=t[3].default,o=et(i,t,t[2],null);return{c(){e=We("div"),o&&o.c(),this.h()},l(s){e=ve(s,"DIV",{class:!0,style:!0});var r=ge(e);o&&o.l(r),r.forEach(W),this.h()},h(){M(e,"class","svelte-flow__viewport xyflow__viewport svelte-1floaup"),fe(e,"transform","translate("+t[0].x+"px, "+t[0].y+"px) scale("+t[0].zoom+")")},m(s,r){$(s,e,r),o&&o.m(e,null),n=!0},p(s,[r]){o&&o.p&&(!n||r&4)&&tt(o,i,s,s[2],n?it(i,s[2],r,null):nt(s[2]),null),(!n||r&1)&&fe(e,"transform","translate("+s[0].x+"px, "+s[0].y+"px) scale("+s[0].zoom+")")},i(s){n||(G(o,s),n=!0)},o(s){J(o,s),n=!1},d(s){s&&W(e),o&&o.d(s)}}}function br(t,e,n){let i,{$$slots:o={},$$scope:s}=e;const{viewport:r}=He();return j(t,r,l=>n(0,i=l)),t.$$set=l=>{"$$scope"in l&&n(2,s=l.$$scope)},[i,r,s,o]}class _r extends me{constructor(e){super(),ye(this,e,br,yr,ke,{})}}function Po(t,e){const{store:n,onDrag:i,onDragStart:o,onDragStop:s,onNodeMouseDown:r}=e,l=pl({onDrag:i,onDragStart:o,onDragStop:s,onNodeMouseDown:r,getStoreItems:()=>{const u=q(n.snapGrid),d=q(n.viewport);return{nodes:q(n.nodes),nodeLookup:q(n.nodeLookup),edges:q(n.edges),nodeExtent:q(n.nodeExtent),snapGrid:u||[0,0],snapToGrid:!!u,nodeOrigin:q(n.nodeOrigin),multiSelectionActive:q(n.multiselectionKeyPressed),domNode:q(n.domNode),transform:[d.x,d.y,d.zoom],autoPanOnNodeDrag:q(n.autoPanOnNodeDrag),nodesDraggable:q(n.nodesDraggable),selectNodesOnDrag:q(n.selectNodesOnDrag),nodeDragThreshold:q(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function a(u,d){if(d.disabled){l.destroy();return}l.update({domNode:u,noDragClassName:d.noDragClass,handleSelector:d.handleSelector,nodeId:d.nodeId,isSelectable:d.isSelectable,nodeClickDistance:d.nodeClickDistance})}return a(t,e),{update(u){a(t,u)},destroy(){l.destroy()}}}function kr({width:t,height:e,initialWidth:n,initialHeight:i,measuredWidth:o,measuredHeight:s}){if(o===void 0&&s===void 0){const r=t??n,l=e??i;return{width:r?`width:${r}px;`:"",height:l?`height:${l}px;`:""}}return{width:t?`width:${t}px;`:"",height:e?`height:${e}px;`:""}}function ki(t){let e,n,i,o,s,r=`translate(${t[12]}px, ${t[13]}px)`,l,a,u;var d=t[27];function h(f,c){return{props:{data:f[2],id:f[1],selected:f[3],selectable:f[5],deletable:f[7],sourcePosition:f[14],targetPosition:f[15],zIndex:f[16],dragging:f[9],draggable:f[4],dragHandle:f[19],parentId:f[21],type:f[25],isConnectable:f[28],positionAbsoluteX:f[12],positionAbsoluteY:f[13],width:f[17],height:f[18]}}}return d&&(n=tn(d,h(t))),{c(){e=We("div"),n&&ce(n.$$.fragment),this.h()},l(f){e=ve(f,"DIV",{"data-id":!0,class:!0,style:!0});var c=ge(e);n&&be(n.$$.fragment,c),c.forEach(W),this.h()},h(){M(e,"data-id",t[1]),M(e,"class",i=Ce(["svelte-flow__node",`svelte-flow__node-${t[25]}`,t[23]])),M(e,"style",o=(t[10]??"")+";"+t[26].width+t[26].height),le(e,"dragging",t[9]),le(e,"selected",t[3]),le(e,"draggable",t[4]),le(e,"connectable",t[6]),le(e,"selectable",t[5]),le(e,"nopan",t[4]),le(e,"parent",t[11]),fe(e,"z-index",t[16]),fe(e,"transform",r),fe(e,"visibility",t[20]?"visible":"hidden")},m(f,c){$(f,e,c),n&&de(n,e,null),t[50](e),l=!0,a||(u=[Re(s=Po.call(null,e,{nodeId:t[1],isSelectable:t[5],disabled:!1,handleSelector:t[19],noDragClass:"nodrag",nodeClickDistance:t[22],onNodeMouseDown:t[31],onDrag:t[47],onDragStart:t[48],onDragStop:t[49],store:t[29]})),Me(e,"click",t[34]),Me(e,"mouseenter",t[51]),Me(e,"mouseleave",t[52]),Me(e,"mousemove",t[53]),Me(e,"contextmenu",t[54])],a=!0)},p(f,c){if(c[0]&134217728&&d!==(d=f[27])){if(n){Ze();const m=n;J(m.$$.fragment,1,0,()=>{he(m,1)}),Fe()}d?(n=tn(d,h(f)),ce(n.$$.fragment),G(n.$$.fragment,1),de(n,e,null)):n=null}else if(d){const m={};c[0]&4&&(m.data=f[2]),c[0]&2&&(m.id=f[1]),c[0]&8&&(m.selected=f[3]),c[0]&32&&(m.selectable=f[5]),c[0]&128&&(m.deletable=f[7]),c[0]&16384&&(m.sourcePosition=f[14]),c[0]&32768&&(m.targetPosition=f[15]),c[0]&65536&&(m.zIndex=f[16]),c[0]&512&&(m.dragging=f[9]),c[0]&16&&(m.draggable=f[4]),c[0]&524288&&(m.dragHandle=f[19]),c[0]&2097152&&(m.parentId=f[21]),c[0]&33554432&&(m.type=f[25]),c[0]&268435456&&(m.isConnectable=f[28]),c[0]&4096&&(m.positionAbsoluteX=f[12]),c[0]&8192&&(m.positionAbsoluteY=f[13]),c[0]&131072&&(m.width=f[17]),c[0]&262144&&(m.height=f[18]),n.$set(m)}(!l||c[0]&2)&&M(e,"data-id",f[1]),(!l||c[0]&41943040&&i!==(i=Ce(["svelte-flow__node",`svelte-flow__node-${f[25]}`,f[23]])))&&M(e,"class",i),(!l||c[0]&67109888&&o!==(o=(f[10]??"")+";"+f[26].width+f[26].height))&&M(e,"style",o),s&&Ne(s.update)&&c[0]&4718626&&s.update.call(null,{nodeId:f[1],isSelectable:f[5],disabled:!1,handleSelector:f[19],noDragClass:"nodrag",nodeClickDistance:f[22],onNodeMouseDown:f[31],onDrag:f[47],onDragStart:f[48],onDragStop:f[49],store:f[29]}),(!l||c[0]&41943552)&&le(e,"dragging",f[9]),(!l||c[0]&41943048)&&le(e,"selected",f[3]),(!l||c[0]&41943056)&&le(e,"draggable",f[4]),(!l||c[0]&41943104)&&le(e,"connectable",f[6]),(!l||c[0]&41943072)&&le(e,"selectable",f[5]),(!l||c[0]&41943056)&&le(e,"nopan",f[4]),(!l||c[0]&41945088)&&le(e,"parent",f[11]);const y=c[0]&67109888;(c[0]&67175424||y)&&fe(e,"z-index",f[16]),(c[0]&67122176&&r!==(r=`translate(${f[12]}px, ${f[13]}px)`)||y)&&fe(e,"transform",r),(c[0]&68158464||y)&&fe(e,"visibility",f[20]?"visible":"hidden")},i(f){l||(n&&G(n.$$.fragment,f),l=!0)},o(f){n&&J(n.$$.fragment,f),l=!1},d(f){f&&W(e),n&&he(n),t[50](null),a=!1,kt(u)}}}function wr(t){let e,n,i=!t[8]&&ki(t);return{c(){i&&i.c(),e=we()},l(o){i&&i.l(o),e=we()},m(o,s){i&&i.m(o,s),$(o,e,s),n=!0},p(o,s){o[8]?i&&(Ze(),J(i,1,1,()=>{i=null}),Fe()):i?(i.p(o,s),s[0]&256&&G(i,1)):(i=ki(o),i.c(),G(i,1),i.m(e.parentNode,e))},i(o){n||(G(i),n=!0)},o(o){J(i),n=!1},d(o){o&&W(e),i&&i.d(o)}}}function Sr(t,e,n){let i,o,s,r,l,a,{node:u}=e,{id:d}=e,{data:h={}}=e,{selected:f=!1}=e,{draggable:c=void 0}=e,{selectable:y=void 0}=e,{connectable:m=!0}=e,{deletable:C=!0}=e,{hidden:g=!1}=e,{dragging:w=!1}=e,{resizeObserver:k=null}=e,{style:E=void 0}=e,{type:X="default"}=e,{isParent:K=!1}=e,{positionX:H}=e,{positionY:I}=e,{sourcePosition:D=void 0}=e,{targetPosition:A=void 0}=e,{zIndex:Z}=e,{measuredWidth:v=void 0}=e,{measuredHeight:B=void 0}=e,{initialWidth:b=void 0}=e,{initialHeight:T=void 0}=e,{width:_=void 0}=e,{height:P=void 0}=e,{dragHandle:O=void 0}=e,{initialized:z=!1}=e,{parentId:Y=void 0}=e,{nodeClickDistance:F=void 0}=e,{class:U=""}=e;const p=He(),{nodeTypes:N,nodeDragThreshold:ee,selectNodesOnDrag:ie,handleNodeSelection:R,updateNodeInternals:te}=p;j(t,N,L=>n(46,l=L));let oe,se=null;const re=hn(),ue=ne(m);j(t,ue,L=>n(28,a=L));let Ee,V,De;$t("svelteflow__node_id",d),$t("svelteflow__node_connectable",ue),Ri(()=>{se&&(k==null||k.unobserve(se))});function Se(L){y&&(!q(ie)||!c||q(ee)>0)&&R(d),re("nodeclick",{node:u.internals.userNode,event:L})}const ft=(L,ht,Le,Ge)=>{re("nodedrag",{event:L,targetNode:Le,nodes:Ge})},lt=(L,ht,Le,Ge)=>{re("nodedragstart",{event:L,targetNode:Le,nodes:Ge})},st=(L,ht,Le,Ge)=>{re("nodedragstop",{event:L,targetNode:Le,nodes:Ge})};function Ve(L){Kn[L?"unshift":"push"](()=>{oe=L,n(24,oe)})}const rt=L=>re("nodemouseenter",{node:u,event:L}),x=L=>re("nodemouseleave",{node:u,event:L}),ct=L=>re("nodemousemove",{node:u,event:L}),dt=L=>re("nodecontextmenu",{node:u,event:L});return t.$$set=L=>{"node"in L&&n(0,u=L.node),"id"in L&&n(1,d=L.id),"data"in L&&n(2,h=L.data),"selected"in L&&n(3,f=L.selected),"draggable"in L&&n(4,c=L.draggable),"selectable"in L&&n(5,y=L.selectable),"connectable"in L&&n(6,m=L.connectable),"deletable"in L&&n(7,C=L.deletable),"hidden"in L&&n(8,g=L.hidden),"dragging"in L&&n(9,w=L.dragging),"resizeObserver"in L&&n(35,k=L.resizeObserver),"style"in L&&n(10,E=L.style),"type"in L&&n(36,X=L.type),"isParent"in L&&n(11,K=L.isParent),"positionX"in L&&n(12,H=L.positionX),"positionY"in L&&n(13,I=L.positionY),"sourcePosition"in L&&n(14,D=L.sourcePosition),"targetPosition"in L&&n(15,A=L.targetPosition),"zIndex"in L&&n(16,Z=L.zIndex),"measuredWidth"in L&&n(37,v=L.measuredWidth),"measuredHeight"in L&&n(38,B=L.measuredHeight),"initialWidth"in L&&n(39,b=L.initialWidth),"initialHeight"in L&&n(40,T=L.initialHeight),"width"in L&&n(17,_=L.width),"height"in L&&n(18,P=L.height),"dragHandle"in L&&n(19,O=L.dragHandle),"initialized"in L&&n(20,z=L.initialized),"parentId"in L&&n(21,Y=L.parentId),"nodeClickDistance"in L&&n(22,F=L.nodeClickDistance),"class"in L&&n(23,U=L.class)},t.$$.update=()=>{t.$$.dirty[1]&32&&n(25,i=X||"default"),t.$$.dirty[0]&33554432|t.$$.dirty[1]&32768&&n(45,o=!!l[i]),t.$$.dirty[0]&33554432|t.$$.dirty[1]&32768&&n(27,s=l[i]||wo),t.$$.dirty[1]&16416&&(o||console.warn("003",Zt.error003(X))),t.$$.dirty[0]&393216|t.$$.dirty[1]&960&&n(26,r=kr({width:_,height:P,initialWidth:b,initialHeight:T,measuredWidth:v,measuredHeight:B})),t.$$.dirty[0]&64&&ue.set(!!m),t.$$.dirty[0]&50380802|t.$$.dirty[1]&14336&&((Ee&&i!==Ee||V&&D!==V||De&&A!==De)&&requestAnimationFrame(()=>te(new Map([[d,{id:d,nodeElement:oe,force:!0}]]))),n(42,Ee=i),n(43,V=D),n(44,De=A)),t.$$.dirty[0]&17825792|t.$$.dirty[1]&1040&&k&&(oe!==se||!z)&&(se&&k.unobserve(se),oe&&k.observe(oe),n(41,se=oe))},[u,d,h,f,c,y,m,C,g,w,E,K,H,I,D,A,Z,_,P,O,z,Y,F,U,oe,i,r,s,a,p,N,R,re,ue,Se,k,X,v,B,b,T,se,Ee,V,De,o,l,ft,lt,st,Ve,rt,x,ct,dt]}class Er extends me{constructor(e){super(),ye(this,e,Sr,wr,Bi,{node:0,id:1,data:2,selected:3,draggable:4,selectable:5,connectable:6,deletable:7,hidden:8,dragging:9,resizeObserver:35,style:10,type:36,isParent:11,positionX:12,positionY:13,sourcePosition:14,targetPosition:15,zIndex:16,measuredWidth:37,measuredHeight:38,initialWidth:39,initialHeight:40,width:17,height:18,dragHandle:19,initialized:20,parentId:21,nodeClickDistance:22,class:23},null,[-1,-1])}}const{Map:Mr}=ol;function wi(t,e,n){const i=t.slice();return i[21]=e[n],i}function Si(t,e){let n,i,o;return i=new Er({props:{node:e[21],id:e[21].id,data:e[21].data,selected:!!e[21].selected,hidden:!!e[21].hidden,draggable:!!(e[21].draggable||e[2]&&typeof e[21].draggable>"u"),selectable:!!(e[21].selectable||e[3]&&typeof e[21].selectable>"u"),connectable:!!(e[21].connectable||e[4]&&typeof e[21].connectable>"u"),deletable:e[21].deletable??!0,positionX:e[21].internals.positionAbsolute.x,positionY:e[21].internals.positionAbsolute.y,isParent:e[5].has(e[21].id),style:e[21].style,class:e[21].class,type:e[21].type??"default",sourcePosition:e[21].sourcePosition,targetPosition:e[21].targetPosition,dragging:e[21].dragging,zIndex:e[21].internals.z??0,dragHandle:e[21].dragHandle,initialized:un(e[21]),width:e[21].width,height:e[21].height,initialWidth:e[21].initialWidth,initialHeight:e[21].initialHeight,measuredWidth:e[21].measured.width,measuredHeight:e[21].measured.height,parentId:e[21].parentId,resizeObserver:e[11],nodeClickDistance:e[0]}}),i.$on("nodeclick",e[12]),i.$on("nodemouseenter",e[13]),i.$on("nodemousemove",e[14]),i.$on("nodemouseleave",e[15]),i.$on("nodedrag",e[16]),i.$on("nodedragstart",e[17]),i.$on("nodedragstop",e[18]),i.$on("nodecontextmenu",e[19]),{key:t,first:null,c(){n=we(),ce(i.$$.fragment),this.h()},l(s){n=we(),be(i.$$.fragment,s),this.h()},h(){this.first=n},m(s,r){$(s,n,r),de(i,s,r),o=!0},p(s,r){e=s;const l={};r&2&&(l.node=e[21]),r&2&&(l.id=e[21].id),r&2&&(l.data=e[21].data),r&2&&(l.selected=!!e[21].selected),r&2&&(l.hidden=!!e[21].hidden),r&6&&(l.draggable=!!(e[21].draggable||e[2]&&typeof e[21].draggable>"u")),r&10&&(l.selectable=!!(e[21].selectable||e[3]&&typeof e[21].selectable>"u")),r&18&&(l.connectable=!!(e[21].connectable||e[4]&&typeof e[21].connectable>"u")),r&2&&(l.deletable=e[21].deletable??!0),r&2&&(l.positionX=e[21].internals.positionAbsolute.x),r&2&&(l.positionY=e[21].internals.positionAbsolute.y),r&34&&(l.isParent=e[5].has(e[21].id)),r&2&&(l.style=e[21].style),r&2&&(l.class=e[21].class),r&2&&(l.type=e[21].type??"default"),r&2&&(l.sourcePosition=e[21].sourcePosition),r&2&&(l.targetPosition=e[21].targetPosition),r&2&&(l.dragging=e[21].dragging),r&2&&(l.zIndex=e[21].internals.z??0),r&2&&(l.dragHandle=e[21].dragHandle),r&2&&(l.initialized=un(e[21])),r&2&&(l.width=e[21].width),r&2&&(l.height=e[21].height),r&2&&(l.initialWidth=e[21].initialWidth),r&2&&(l.initialHeight=e[21].initialHeight),r&2&&(l.measuredWidth=e[21].measured.width),r&2&&(l.measuredHeight=e[21].measured.height),r&2&&(l.parentId=e[21].parentId),r&1&&(l.nodeClickDistance=e[0]),i.$set(l)},i(s){o||(G(i.$$.fragment,s),o=!0)},o(s){J(i.$$.fragment,s),o=!1},d(s){s&&W(n),he(i,s)}}}function Cr(t){let e,n=[],i=new Mr,o,s=_t(t[1]);const r=l=>l[21].id;for(let l=0;l<s.length;l+=1){let a=wi(t,s,l),u=r(a);i.set(u,n[l]=Si(u,a))}return{c(){e=We("div");for(let l=0;l<n.length;l+=1)n[l].c();this.h()},l(l){e=ve(l,"DIV",{class:!0});var a=ge(e);for(let u=0;u<n.length;u+=1)n[u].l(a);a.forEach(W),this.h()},h(){M(e,"class","svelte-flow__nodes svelte-tf4uy4")},m(l,a){$(l,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);o=!0},p(l,[a]){a&2111&&(s=_t(l[1]),Ze(),n=mn(n,a,r,1,l,s,i,e,yn,Si,null,wi),Fe())},i(l){if(!o){for(let a=0;a<s.length;a+=1)G(n[a]);o=!0}},o(l){for(let a=0;a<n.length;a+=1)J(n[a]);o=!1},d(l){l&&W(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function Pr(t,e,n){let i,o,s,r,l,{nodeClickDistance:a=0}=e;const{visibleNodes:u,nodesDraggable:d,nodesConnectable:h,elementsSelectable:f,updateNodeInternals:c,parentLookup:y}=He();j(t,u,I=>n(1,i=I)),j(t,d,I=>n(2,o=I)),j(t,h,I=>n(4,r=I)),j(t,f,I=>n(3,s=I)),j(t,y,I=>n(5,l=I));const m=typeof ResizeObserver>"u"?null:new ResizeObserver(I=>{const D=new Map;I.forEach(A=>{const Z=A.target.getAttribute("data-id");D.set(Z,{id:Z,nodeElement:A.target,force:!0})}),c(D)});Ri(()=>{m==null||m.disconnect()});function C(I){_e.call(this,t,I)}function g(I){_e.call(this,t,I)}function w(I){_e.call(this,t,I)}function k(I){_e.call(this,t,I)}function E(I){_e.call(this,t,I)}function X(I){_e.call(this,t,I)}function K(I){_e.call(this,t,I)}function H(I){_e.call(this,t,I)}return t.$$set=I=>{"nodeClickDistance"in I&&n(0,a=I.nodeClickDistance)},[a,i,o,s,r,l,u,d,h,f,y,m,C,g,w,k,E,X,K,H]}class zr extends me{constructor(e){super(),ye(this,e,Pr,Cr,ke,{nodeClickDistance:0})}}function Ei(t){let e,n,i,o,s,r,l,a;var u=t[27];function d(h,f){return{props:{id:h[0],source:h[1],target:h[2],sourceX:h[14],sourceY:h[15],targetX:h[16],targetY:h[17],sourcePosition:h[18],targetPosition:h[19],animated:h[6],selected:h[7],label:h[10],labelStyle:h[11],data:h[3],style:h[4],interactionWidth:h[21],selectable:h[24],deletable:h[8]??!0,type:h[23],sourceHandleId:h[12],targetHandleId:h[13],markerStart:h[26],markerEnd:h[25]}}}return u&&(i=tn(u,d(t))),{c(){e=ze("svg"),n=ze("g"),i&&ce(i.$$.fragment),this.h()},l(h){e=Oe(h,"svg",{});var f=ge(e);n=Oe(f,"g",{class:!0,"data-id":!0,"aria-label":!0,role:!0});var c=ge(n);i&&be(i.$$.fragment,c),c.forEach(W),f.forEach(W),this.h()},h(){M(n,"class",o=Ce(["svelte-flow__edge",t[22]])),M(n,"data-id",t[0]),M(n,"aria-label",s=t[20]===null?void 0:t[20]?t[20]:`Edge from ${t[1]} to ${t[2]}`),M(n,"role","img"),le(n,"animated",t[6]),le(n,"selected",t[7]),le(n,"selectable",t[24]),fe(e,"z-index",t[5])},m(h,f){$(h,e,f),je(e,n),i&&de(i,n,null),r=!0,l||(a=[Me(n,"click",t[32]),Me(n,"contextmenu",t[41]),Me(n,"mouseenter",t[42]),Me(n,"mouseleave",t[43])],l=!0)},p(h,f){if(f[0]&134217728&&u!==(u=h[27])){if(i){Ze();const c=i;J(c.$$.fragment,1,0,()=>{he(c,1)}),Fe()}u?(i=tn(u,d(h)),ce(i.$$.fragment),G(i.$$.fragment,1),de(i,n,null)):i=null}else if(u){const c={};f[0]&1&&(c.id=h[0]),f[0]&2&&(c.source=h[1]),f[0]&4&&(c.target=h[2]),f[0]&16384&&(c.sourceX=h[14]),f[0]&32768&&(c.sourceY=h[15]),f[0]&65536&&(c.targetX=h[16]),f[0]&131072&&(c.targetY=h[17]),f[0]&262144&&(c.sourcePosition=h[18]),f[0]&524288&&(c.targetPosition=h[19]),f[0]&64&&(c.animated=h[6]),f[0]&128&&(c.selected=h[7]),f[0]&1024&&(c.label=h[10]),f[0]&2048&&(c.labelStyle=h[11]),f[0]&8&&(c.data=h[3]),f[0]&16&&(c.style=h[4]),f[0]&2097152&&(c.interactionWidth=h[21]),f[0]&16777216&&(c.selectable=h[24]),f[0]&256&&(c.deletable=h[8]??!0),f[0]&8388608&&(c.type=h[23]),f[0]&4096&&(c.sourceHandleId=h[12]),f[0]&8192&&(c.targetHandleId=h[13]),f[0]&67108864&&(c.markerStart=h[26]),f[0]&33554432&&(c.markerEnd=h[25]),i.$set(c)}(!r||f[0]&4194304&&o!==(o=Ce(["svelte-flow__edge",h[22]])))&&M(n,"class",o),(!r||f[0]&1)&&M(n,"data-id",h[0]),(!r||f[0]&1048582&&s!==(s=h[20]===null?void 0:h[20]?h[20]:`Edge from ${h[1]} to ${h[2]}`))&&M(n,"aria-label",s),(!r||f[0]&4194368)&&le(n,"animated",h[6]),(!r||f[0]&4194432)&&le(n,"selected",h[7]),(!r||f[0]&20971520)&&le(n,"selectable",h[24]),f[0]&32&&fe(e,"z-index",h[5])},i(h){r||(i&&G(i.$$.fragment,h),r=!0)},o(h){i&&J(i.$$.fragment,h),r=!1},d(h){h&&W(e),i&&he(i),l=!1,kt(a)}}}function Or(t){let e,n,i=!t[9]&&Ei(t);return{c(){i&&i.c(),e=we()},l(o){i&&i.l(o),e=we()},m(o,s){i&&i.m(o,s),$(o,e,s),n=!0},p(o,s){o[9]?i&&(Ze(),J(i,1,1,()=>{i=null}),Fe()):i?(i.p(o,s),s[0]&512&&G(i,1)):(i=Ei(o),i.c(),G(i,1),i.m(e.parentNode,e))},i(o){n||(G(i),n=!0)},o(o){J(i),n=!1},d(o){o&&W(e),i&&i.d(o)}}}function Dr(t,e,n){let i,o,s,r,l,a,u,d,h,{id:f}=e,{type:c="default"}=e,{source:y=""}=e,{target:m=""}=e,{data:C={}}=e,{style:g=void 0}=e,{zIndex:w=void 0}=e,{animated:k=!1}=e,{selected:E=!1}=e,{selectable:X=void 0}=e,{deletable:K=void 0}=e,{hidden:H=!1}=e,{label:I=void 0}=e,{labelStyle:D=void 0}=e,{markerStart:A=void 0}=e,{markerEnd:Z=void 0}=e,{sourceHandle:v=void 0}=e,{targetHandle:B=void 0}=e,{sourceX:b}=e,{sourceY:T}=e,{targetX:_}=e,{targetY:P}=e,{sourcePosition:O}=e,{targetPosition:z}=e,{ariaLabel:Y=void 0}=e,{interactionWidth:F=void 0}=e,{class:U=""}=e;$t("svelteflow__edge_id",f);const{edgeLookup:p,edgeTypes:N,flowId:ee,elementsSelectable:ie}=He();j(t,p,V=>n(44,a=V)),j(t,N,V=>n(40,h=V)),j(t,ee,V=>n(39,d=V)),j(t,ie,V=>n(38,u=V));const R=hn(),te=So();function oe(V){const De=a.get(f);De&&(te(f),R("edgeclick",{event:V,edge:De}))}function se(V,De){const Se=a.get(f);Se&&R(De,{event:V,edge:Se})}const re=V=>{se(V,"edgecontextmenu")},ue=V=>{se(V,"edgemouseenter")},Ee=V=>{se(V,"edgemouseleave")};return t.$$set=V=>{"id"in V&&n(0,f=V.id),"type"in V&&n(34,c=V.type),"source"in V&&n(1,y=V.source),"target"in V&&n(2,m=V.target),"data"in V&&n(3,C=V.data),"style"in V&&n(4,g=V.style),"zIndex"in V&&n(5,w=V.zIndex),"animated"in V&&n(6,k=V.animated),"selected"in V&&n(7,E=V.selected),"selectable"in V&&n(35,X=V.selectable),"deletable"in V&&n(8,K=V.deletable),"hidden"in V&&n(9,H=V.hidden),"label"in V&&n(10,I=V.label),"labelStyle"in V&&n(11,D=V.labelStyle),"markerStart"in V&&n(36,A=V.markerStart),"markerEnd"in V&&n(37,Z=V.markerEnd),"sourceHandle"in V&&n(12,v=V.sourceHandle),"targetHandle"in V&&n(13,B=V.targetHandle),"sourceX"in V&&n(14,b=V.sourceX),"sourceY"in V&&n(15,T=V.sourceY),"targetX"in V&&n(16,_=V.targetX),"targetY"in V&&n(17,P=V.targetY),"sourcePosition"in V&&n(18,O=V.sourcePosition),"targetPosition"in V&&n(19,z=V.targetPosition),"ariaLabel"in V&&n(20,Y=V.ariaLabel),"interactionWidth"in V&&n(21,F=V.interactionWidth),"class"in V&&n(22,U=V.class)},t.$$.update=()=>{t.$$.dirty[1]&8&&n(23,i=c||"default"),t.$$.dirty[0]&8388608|t.$$.dirty[1]&512&&n(27,o=h[i]||Eo),t.$$.dirty[1]&288&&n(26,s=A?`url('#${Ln(A,d)}')`:void 0),t.$$.dirty[1]&320&&n(25,r=Z?`url('#${Ln(Z,d)}')`:void 0),t.$$.dirty[1]&144&&n(24,l=X??u)},[f,y,m,C,g,w,k,E,K,H,I,D,v,B,b,T,_,P,O,z,Y,F,U,i,l,r,s,o,p,N,ee,ie,oe,se,c,X,A,Z,u,d,h,re,ue,Ee]}class Ir extends me{constructor(e){super(),ye(this,e,Dr,Or,Bi,{id:0,type:34,source:1,target:2,data:3,style:4,zIndex:5,animated:6,selected:7,selectable:35,deletable:8,hidden:9,label:10,labelStyle:11,markerStart:36,markerEnd:37,sourceHandle:12,targetHandle:13,sourceX:14,sourceY:15,targetX:16,targetY:17,sourcePosition:18,targetPosition:19,ariaLabel:20,interactionWidth:21,class:22},null,[-1,-1])}}function Tr(t,e,n){let{onMount:i=void 0}=e,{onDestroy:o=void 0}=e;return dn(()=>(i==null||i(),o)),t.$$set=s=>{"onMount"in s&&n(0,i=s.onMount),"onDestroy"in s&&n(1,o=s.onDestroy)},[i,o]}class Nr extends me{constructor(e){super(),ye(this,e,Tr,null,ke,{onMount:0,onDestroy:1})}}function Mi(t,e,n){const i=t.slice();return i[2]=e[n],i}function Ci(t,e){let n,i,o;const s=[e[2]];let r={};for(let l=0;l<s.length;l+=1)r=Pe(r,s[l]);return i=new Lr({props:r}),{key:t,first:null,c(){n=we(),ce(i.$$.fragment),this.h()},l(l){n=we(),be(i.$$.fragment,l),this.h()},h(){this.first=n},m(l,a){$(l,n,a),de(i,l,a),o=!0},p(l,a){e=l;const u=a&1?gn(s,[Zi(e[2])]):{};i.$set(u)},i(l){o||(G(i.$$.fragment,l),o=!0)},o(l){J(i.$$.fragment,l),o=!1},d(l){l&&W(n),he(i,l)}}}function Hr(t){let e,n=[],i=new Map,o,s=_t(t[0]);const r=l=>l[2].id;for(let l=0;l<s.length;l+=1){let a=Mi(t,s,l),u=r(a);i.set(u,n[l]=Ci(u,a))}return{c(){e=ze("defs");for(let l=0;l<n.length;l+=1)n[l].c()},l(l){e=Oe(l,"defs",{});var a=ge(e);for(let u=0;u<n.length;u+=1)n[u].l(a);a.forEach(W)},m(l,a){$(l,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);o=!0},p(l,[a]){a&1&&(s=_t(l[0]),Ze(),n=mn(n,a,r,1,l,s,i,e,yn,Ci,null,Mi),Fe())},i(l){if(!o){for(let a=0;a<s.length;a+=1)G(n[a]);o=!0}},o(l){for(let a=0;a<n.length;a+=1)J(n[a]);o=!1},d(l){l&&W(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function Yr(t,e,n){let i;const{markers:o}=He();return j(t,o,s=>n(0,i=s)),[i,o]}class Xr extends me{constructor(e){super(),ye(this,e,Yr,Hr,ke,{})}}function Ar(t){let e;return{c(){e=ze("polyline"),this.h()},l(n){e=Oe(n,"polyline",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,fill:!0,points:!0}),ge(e).forEach(W),this.h()},h(){M(e,"stroke",t[6]),M(e,"stroke-linecap","round"),M(e,"stroke-linejoin","round"),M(e,"stroke-width",t[7]),M(e,"fill",t[6]),M(e,"points","-5,-4 0,0 -5,4 -5,-4")},m(n,i){$(n,e,i)},p(n,i){i&64&&M(e,"stroke",n[6]),i&128&&M(e,"stroke-width",n[7]),i&64&&M(e,"fill",n[6])},d(n){n&&W(e)}}}function Vr(t){let e;return{c(){e=ze("polyline"),this.h()},l(n){e=Oe(n,"polyline",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,fill:!0,points:!0}),ge(e).forEach(W),this.h()},h(){M(e,"stroke",t[6]),M(e,"stroke-linecap","round"),M(e,"stroke-linejoin","round"),M(e,"stroke-width",t[7]),M(e,"fill","none"),M(e,"points","-5,-4 0,0 -5,4")},m(n,i){$(n,e,i)},p(n,i){i&64&&M(e,"stroke",n[6]),i&128&&M(e,"stroke-width",n[7])},d(n){n&&W(e)}}}function Wr(t){let e,n,i;function o(l,a){if(l[1]===sn.Arrow)return Vr;if(l[1]===sn.ArrowClosed)return Ar}let s=o(t),r=s&&s(t);return{c(){e=ze("marker"),r&&r.c(),this.h()},l(l){e=Oe(l,"marker",{class:!0,id:!0,markerWidth:!0,markerHeight:!0,viewBox:!0,markerUnits:!0,orient:!0,refX:!0,refY:!0});var a=ge(e);r&&r.l(a),a.forEach(W),this.h()},h(){M(e,"class","svelte-flow__arrowhead"),M(e,"id",t[0]),M(e,"markerWidth",n=`${t[2]}`),M(e,"markerHeight",i=`${t[3]}`),M(e,"viewBox","-10 -10 20 20"),M(e,"markerUnits",t[4]),M(e,"orient",t[5]),M(e,"refX","0"),M(e,"refY","0")},m(l,a){$(l,e,a),r&&r.m(e,null)},p(l,[a]){s===(s=o(l))&&r?r.p(l,a):(r&&r.d(1),r=s&&s(l),r&&(r.c(),r.m(e,null))),a&1&&M(e,"id",l[0]),a&4&&n!==(n=`${l[2]}`)&&M(e,"markerWidth",n),a&8&&i!==(i=`${l[3]}`)&&M(e,"markerHeight",i),a&16&&M(e,"markerUnits",l[4]),a&32&&M(e,"orient",l[5])},i:Ae,o:Ae,d(l){l&&W(e),r&&r.d()}}}function vr(t,e,n){let{id:i}=e,{type:o}=e,{width:s=12.5}=e,{height:r=12.5}=e,{markerUnits:l="strokeWidth"}=e,{orient:a="auto-start-reverse"}=e,{color:u=void 0}=e,{strokeWidth:d=void 0}=e;return t.$$set=h=>{"id"in h&&n(0,i=h.id),"type"in h&&n(1,o=h.type),"width"in h&&n(2,s=h.width),"height"in h&&n(3,r=h.height),"markerUnits"in h&&n(4,l=h.markerUnits),"orient"in h&&n(5,a=h.orient),"color"in h&&n(6,u=h.color),"strokeWidth"in h&&n(7,d=h.strokeWidth)},[i,o,s,r,l,a,u,d]}class Lr extends me{constructor(e){super(),ye(this,e,vr,Wr,ke,{id:0,type:1,width:2,height:3,markerUnits:4,orient:5,color:6,strokeWidth:7})}}function Pi(t,e,n){const i=t.slice();return i[14]=e[n],i}function zi(t,e){let n,i,o;return i=new Ir({props:{id:e[14].id,source:e[14].source,target:e[14].target,data:e[14].data,style:e[14].style,animated:e[14].animated,selected:e[14].selected,selectable:e[14].selectable??e[1],deletable:e[14].deletable,hidden:e[14].hidden,label:e[14].label,labelStyle:e[14].labelStyle,markerStart:e[14].markerStart,markerEnd:e[14].markerEnd,sourceHandle:e[14].sourceHandle,targetHandle:e[14].targetHandle,sourceX:e[14].sourceX,sourceY:e[14].sourceY,targetX:e[14].targetX,targetY:e[14].targetY,sourcePosition:e[14].sourcePosition,targetPosition:e[14].targetPosition,ariaLabel:e[14].ariaLabel,interactionWidth:e[14].interactionWidth,class:e[14].class,type:e[14].type||"default",zIndex:e[14].zIndex}}),i.$on("edgeclick",e[7]),i.$on("edgecontextmenu",e[8]),i.$on("edgemouseenter",e[9]),i.$on("edgemouseleave",e[10]),{key:t,first:null,c(){n=we(),ce(i.$$.fragment),this.h()},l(s){n=we(),be(i.$$.fragment,s),this.h()},h(){this.first=n},m(s,r){$(s,n,r),de(i,s,r),o=!0},p(s,r){e=s;const l={};r&1&&(l.id=e[14].id),r&1&&(l.source=e[14].source),r&1&&(l.target=e[14].target),r&1&&(l.data=e[14].data),r&1&&(l.style=e[14].style),r&1&&(l.animated=e[14].animated),r&1&&(l.selected=e[14].selected),r&3&&(l.selectable=e[14].selectable??e[1]),r&1&&(l.deletable=e[14].deletable),r&1&&(l.hidden=e[14].hidden),r&1&&(l.label=e[14].label),r&1&&(l.labelStyle=e[14].labelStyle),r&1&&(l.markerStart=e[14].markerStart),r&1&&(l.markerEnd=e[14].markerEnd),r&1&&(l.sourceHandle=e[14].sourceHandle),r&1&&(l.targetHandle=e[14].targetHandle),r&1&&(l.sourceX=e[14].sourceX),r&1&&(l.sourceY=e[14].sourceY),r&1&&(l.targetX=e[14].targetX),r&1&&(l.targetY=e[14].targetY),r&1&&(l.sourcePosition=e[14].sourcePosition),r&1&&(l.targetPosition=e[14].targetPosition),r&1&&(l.ariaLabel=e[14].ariaLabel),r&1&&(l.interactionWidth=e[14].interactionWidth),r&1&&(l.class=e[14].class),r&1&&(l.type=e[14].type||"default"),r&1&&(l.zIndex=e[14].zIndex),i.$set(l)},i(s){o||(G(i.$$.fragment,s),o=!0)},o(s){J(i.$$.fragment,s),o=!1},d(s){s&&W(n),he(i,s)}}}function Oi(t){let e,n;return e=new Nr({props:{onMount:t[11],onDestroy:t[12]}}),{c(){ce(e.$$.fragment)},l(i){be(e.$$.fragment,i)},m(i,o){de(e,i,o),n=!0},p(i,o){const s={};o&4&&(s.onMount=i[11]),o&4&&(s.onDestroy=i[12]),e.$set(s)},i(i){n||(G(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){he(e,i)}}}function Kr(t){let e,n,i,o,s=[],r=new Map,l,a;i=new Xr({});let u=_t(t[0]);const d=f=>f[14].id;for(let f=0;f<u.length;f+=1){let c=Pi(t,u,f),y=d(c);r.set(y,s[f]=zi(y,c))}let h=t[0].length>0&&Oi(t);return{c(){e=We("div"),n=ze("svg"),ce(i.$$.fragment),o=Ye();for(let f=0;f<s.length;f+=1)s[f].c();l=Ye(),h&&h.c(),this.h()},l(f){e=ve(f,"DIV",{class:!0});var c=ge(e);n=Oe(c,"svg",{class:!0});var y=ge(n);be(i.$$.fragment,y),y.forEach(W),o=Xe(c);for(let m=0;m<s.length;m+=1)s[m].l(c);l=Xe(c),h&&h.l(c),c.forEach(W),this.h()},h(){M(n,"class","svelte-flow__marker"),M(e,"class","svelte-flow__edges")},m(f,c){$(f,e,c),je(e,n),de(i,n,null),je(e,o);for(let y=0;y<s.length;y+=1)s[y]&&s[y].m(e,null);je(e,l),h&&h.m(e,null),a=!0},p(f,[c]){c&3&&(u=_t(f[0]),Ze(),s=mn(s,c,d,1,f,u,r,e,yn,zi,l,Pi),Fe()),f[0].length>0?h?(h.p(f,c),c&1&&G(h,1)):(h=Oi(f),h.c(),G(h,1),h.m(e,null)):h&&(Ze(),J(h,1,1,()=>{h=null}),Fe())},i(f){if(!a){G(i.$$.fragment,f);for(let c=0;c<u.length;c+=1)G(s[c]);G(h),a=!0}},o(f){J(i.$$.fragment,f);for(let c=0;c<s.length;c+=1)J(s[c]);J(h),a=!1},d(f){f&&W(e),he(i);for(let c=0;c<s.length;c+=1)s[c].d();h&&h.d()}}}function Br(t,e,n){let i,o,s,{defaultEdgeOptions:r}=e;const{visibleEdges:l,edgesInitialized:a,edges:{setDefaultOptions:u},elementsSelectable:d}=He();j(t,l,g=>n(0,i=g)),j(t,a,g=>n(2,s=g)),j(t,d,g=>n(1,o=g)),dn(()=>{r&&u(r)});function h(g){_e.call(this,t,g)}function f(g){_e.call(this,t,g)}function c(g){_e.call(this,t,g)}function y(g){_e.call(this,t,g)}const m=()=>{en(a,s=!0,s)},C=()=>{en(a,s=!1,s)};return t.$$set=g=>{"defaultEdgeOptions"in g&&n(6,r=g.defaultEdgeOptions)},[i,o,s,l,a,d,r,h,f,c,y,m,C]}class Rr extends me{constructor(e){super(),ye(this,e,Br,Kr,ke,{defaultEdgeOptions:6})}}function Di(t){let e;return{c(){e=We("div"),this.h()},l(n){e=ve(n,"DIV",{class:!0}),ge(e).forEach(W),this.h()},h(){M(e,"class","svelte-flow__selection svelte-1iugwpu"),fe(e,"width",typeof t[2]=="string"?t[2]:`${t[2]}px`),fe(e,"height",typeof t[3]=="string"?t[3]:`${t[3]}px`),fe(e,"transform",`translate(${t[0]}px, ${t[1]}px)`)},m(n,i){$(n,e,i)},p(n,i){i&4&&fe(e,"width",typeof n[2]=="string"?n[2]:`${n[2]}px`),i&8&&fe(e,"height",typeof n[3]=="string"?n[3]:`${n[3]}px`),i&3&&fe(e,"transform",`translate(${n[0]}px, ${n[1]}px)`)},d(n){n&&W(e)}}}function Zr(t){let e,n=t[4]&&Di(t);return{c(){n&&n.c(),e=we()},l(i){n&&n.l(i),e=we()},m(i,o){n&&n.m(i,o),$(i,e,o)},p(i,[o]){i[4]?n?n.p(i,o):(n=Di(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Ae,o:Ae,d(i){i&&W(e),n&&n.d(i)}}}function Fr(t,e,n){let{x:i=0}=e,{y:o=0}=e,{width:s=0}=e,{height:r=0}=e,{isVisible:l=!0}=e;return t.$$set=a=>{"x"in a&&n(0,i=a.x),"y"in a&&n(1,o=a.y),"width"in a&&n(2,s=a.width),"height"in a&&n(3,r=a.height),"isVisible"in a&&n(4,l=a.isVisible)},[i,o,s,r,l]}class zo extends me{constructor(e){super(),ye(this,e,Fr,Zr,ke,{x:0,y:1,width:2,height:3,isVisible:4})}}function Gr(t){var i,o,s,r;let e,n;return e=new zo({props:{isVisible:!!(t[0]&&t[1]==="user"),width:(i=t[0])==null?void 0:i.width,height:(o=t[0])==null?void 0:o.height,x:(s=t[0])==null?void 0:s.x,y:(r=t[0])==null?void 0:r.y}}),{c(){ce(e.$$.fragment)},l(l){be(e.$$.fragment,l)},m(l,a){de(e,l,a),n=!0},p(l,[a]){var d,h,f,c;const u={};a&3&&(u.isVisible=!!(l[0]&&l[1]==="user")),a&1&&(u.width=(d=l[0])==null?void 0:d.width),a&1&&(u.height=(h=l[0])==null?void 0:h.height),a&1&&(u.x=(f=l[0])==null?void 0:f.x),a&1&&(u.y=(c=l[0])==null?void 0:c.y),e.$set(u)},i(l){n||(G(e.$$.fragment,l),n=!0)},o(l){J(e.$$.fragment,l),n=!1},d(l){he(e,l)}}}function Ur(t,e,n){let i,o;const{selectionRect:s,selectionRectMode:r}=He();return j(t,s,l=>n(0,i=l)),j(t,r,l=>n(1,o=l)),[i,o,s,r]}class qr extends me{constructor(e){super(),ye(this,e,Ur,Gr,ke,{})}}function Ii(t){let e,n,i,o,s;return n=new zo({props:{width:"100%",height:"100%",x:0,y:0}}),{c(){e=We("div"),ce(n.$$.fragment),this.h()},l(r){e=ve(r,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var l=ge(e);be(n.$$.fragment,l),l.forEach(W),this.h()},h(){M(e,"class","selection-wrapper nopan svelte-5pxri"),fe(e,"width",t[1].width+"px"),fe(e,"height",t[1].height+"px"),fe(e,"transform","translate("+t[1].x+"px, "+t[1].y+"px)"),M(e,"role","button"),M(e,"tabindex","-1")},m(r,l){$(r,e,l),de(n,e,null),i=!0,o||(s=[Re(Po.call(null,e,{disabled:!1,store:t[2],onDrag:t[11],onDragStart:t[12],onDragStop:t[13]})),Me(e,"contextmenu",t[7]),Me(e,"click",t[8]),Me(e,"keyup",pr)],o=!0)},p(r,l){(!i||l&2)&&fe(e,"width",r[1].width+"px"),(!i||l&2)&&fe(e,"height",r[1].height+"px"),(!i||l&2)&&fe(e,"transform","translate("+r[1].x+"px, "+r[1].y+"px)")},i(r){i||(G(n.$$.fragment,r),i=!0)},o(r){J(n.$$.fragment,r),i=!1},d(r){r&&W(e),he(n),o=!1,kt(s)}}}function jr(t){let e=t[0]==="nodes"&&t[1]&&Qe(t[1].x)&&Qe(t[1].y),n,i,o=e&&Ii(t);return{c(){o&&o.c(),n=we()},l(s){o&&o.l(s),n=we()},m(s,r){o&&o.m(s,r),$(s,n,r),i=!0},p(s,[r]){r&3&&(e=s[0]==="nodes"&&s[1]&&Qe(s[1].x)&&Qe(s[1].y)),e?o?(o.p(s,r),r&3&&G(o,1)):(o=Ii(s),o.c(),G(o,1),o.m(n.parentNode,n)):o&&(Ze(),J(o,1,1,()=>{o=null}),Fe())},i(s){i||(G(o),i=!0)},o(s){J(o),i=!1},d(s){s&&W(n),o&&o.d(s)}}}const pr=()=>{};function Jr(t,e,n){let i,o,s;const r=He(),{selectionRectMode:l,nodes:a,nodeLookup:u}=r;j(t,l,g=>n(0,s=g)),j(t,a,g=>n(9,i=g)),j(t,u,g=>n(10,o=g));const d=hn();let h=null;function f(g){const w=i.filter(k=>k.selected);d("selectioncontextmenu",{nodes:w,event:g})}function c(g){const w=i.filter(k=>k.selected);d("selectionclick",{nodes:w,event:g})}const y=(g,w,k,E)=>{d("nodedrag",{event:g,targetNode:null,nodes:E})},m=(g,w,k,E)=>{d("nodedragstart",{event:g,targetNode:null,nodes:E})},C=(g,w,k,E)=>{d("nodedragstop",{event:g,targetNode:null,nodes:E})};return t.$$.update=()=>{t.$$.dirty&1537&&s==="nodes"&&n(1,h=Ft(o,{filter:g=>!!g.selected}))},[s,h,r,l,a,u,d,f,c,i,o,y,m,C]}class Qr extends me{constructor(e){super(),ye(this,e,Jr,jr,ke,{})}}function xe(t,e){let{enabled:n=!0,trigger:i,type:o="keydown"}=e;function s(r){const l=Array.isArray(i)?i:[i],a={alt:r.altKey,ctrl:r.ctrlKey,shift:r.shiftKey,meta:r.metaKey};for(const u of l){const d={modifier:[],preventDefault:!1,enabled:!0,...u},{modifier:h,key:f,callback:c,preventDefault:y,enabled:m}=d;if(m){if(h.length&&!(Array.isArray(h)?h:[h]).map(w=>typeof w=="string"?[w]:w).some(w=>w.every(k=>a[k])))continue;if(r.key===f){y&&r.preventDefault();const C={node:t,trigger:d,originalEvent:r};t.dispatchEvent(new CustomEvent("shortcut",{detail:C})),c==null||c(C)}}}}return n&&t.addEventListener(o,s),{update:r=>{const{enabled:l=!0,type:a="keydown"}=r;n&&(!l||o!==a)?t.removeEventListener(o,s):!n&&l&&t.addEventListener(a,s),n=l,o=a,i=r.trigger},destroy:()=>{t.removeEventListener(o,s)}}}function xr(t){let e,n,i,o,s,r,l,a,u,d,h,f;return{c:Ae,l:Ae,m(c,y){h||(f=[Re(e=xe.call(null,window,{trigger:Ie(t[0],t[11]),type:"keydown"})),Re(n=xe.call(null,window,{trigger:Ie(t[0],t[12]),type:"keyup"})),Re(i=xe.call(null,window,{trigger:Ie(t[1],t[13]),type:"keydown"})),Re(o=xe.call(null,window,{trigger:Ie(t[1],t[14]),type:"keyup"})),Re(s=xe.call(null,window,{trigger:Ie(t[2],t[15]),type:"keydown"})),Re(r=xe.call(null,window,{trigger:Ie(t[2],t[16]),type:"keyup"})),Re(l=xe.call(null,window,{trigger:Ie(t[3],t[17]),type:"keydown"})),Re(a=xe.call(null,window,{trigger:Ie(t[3],t[18]),type:"keyup"})),Re(u=xe.call(null,window,{trigger:Ie(t[4],t[19]),type:"keydown"})),Re(d=xe.call(null,window,{trigger:Ie(t[4],t[20]),type:"keyup"})),Me(window,"blur",t[10]),Me(window,"contextmenu",t[10])],h=!0)},p(c,[y]){e&&Ne(e.update)&&y&1&&e.update.call(null,{trigger:Ie(c[0],c[11]),type:"keydown"}),n&&Ne(n.update)&&y&1&&n.update.call(null,{trigger:Ie(c[0],c[12]),type:"keyup"}),i&&Ne(i.update)&&y&2&&i.update.call(null,{trigger:Ie(c[1],c[13]),type:"keydown"}),o&&Ne(o.update)&&y&2&&o.update.call(null,{trigger:Ie(c[1],c[14]),type:"keyup"}),s&&Ne(s.update)&&y&4&&s.update.call(null,{trigger:Ie(c[2],c[15]),type:"keydown"}),r&&Ne(r.update)&&y&4&&r.update.call(null,{trigger:Ie(c[2],c[16]),type:"keyup"}),l&&Ne(l.update)&&y&8&&l.update.call(null,{trigger:Ie(c[3],c[17]),type:"keydown"}),a&&Ne(a.update)&&y&8&&a.update.call(null,{trigger:Ie(c[3],c[18]),type:"keyup"}),u&&Ne(u.update)&&y&16&&u.update.call(null,{trigger:Ie(c[4],c[19]),type:"keydown"}),d&&Ne(d.update)&&y&16&&d.update.call(null,{trigger:Ie(c[4],c[20]),type:"keyup"})},i:Ae,o:Ae,d(c){h=!1,kt(f)}}}function Oo(t){return t!==null&&typeof t=="object"}function $r(t){return Oo(t)?t.modifier||[]:[]}function ea(t){return t==null?"":Oo(t)?t.key:t}function Ie(t,e){return(Array.isArray(t)?t:[t]).map(i=>{const o=ea(i);return{key:o,modifier:$r(i),enabled:o!==null,callback:e}})}function ta(t,e,n){let{selectionKey:i="Shift"}=e,{multiSelectionKey:o=an()?"Meta":"Control"}=e,{deleteKey:s="Backspace"}=e,{panActivationKey:r=" "}=e,{zoomActivationKey:l=an()?"Meta":"Control"}=e;const{selectionKeyPressed:a,multiselectionKeyPressed:u,deleteKeyPressed:d,panActivationKeyPressed:h,zoomActivationKeyPressed:f,selectionRect:c}=He();function y(){c.set(null),a.set(!1),u.set(!1),d.set(!1),h.set(!1),f.set(!1)}const m=()=>a.set(!0),C=()=>a.set(!1),g=()=>u.set(!0),w=()=>u.set(!1),k=D=>{!(D.originalEvent.ctrlKey||D.originalEvent.metaKey||D.originalEvent.shiftKey)&&!Tl(D.originalEvent)&&d.set(!0)},E=()=>d.set(!1),X=()=>h.set(!0),K=()=>h.set(!1),H=()=>f.set(!0),I=()=>f.set(!1);return t.$$set=D=>{"selectionKey"in D&&n(0,i=D.selectionKey),"multiSelectionKey"in D&&n(1,o=D.multiSelectionKey),"deleteKey"in D&&n(2,s=D.deleteKey),"panActivationKey"in D&&n(3,r=D.panActivationKey),"zoomActivationKey"in D&&n(4,l=D.zoomActivationKey)},[i,o,s,r,l,a,u,d,h,f,y,m,C,g,w,k,E,X,K,H,I]}class na extends me{constructor(e){super(),ye(this,e,ta,xr,ke,{selectionKey:0,multiSelectionKey:1,deleteKey:2,panActivationKey:3,zoomActivationKey:4})}}const ia=t=>({}),Ti=t=>({});function Ni(t){let e,n,i,o;const s=t[13].connectionLine,r=et(s,t,t[12],Ti);let l=!t[2]&&Hi(t);return{c(){e=ze("svg"),n=ze("g"),r&&r.c(),l&&l.c(),this.h()},l(a){e=Oe(a,"svg",{width:!0,height:!0,class:!0,style:!0});var u=ge(e);n=Oe(u,"g",{class:!0});var d=ge(n);r&&r.l(d),l&&l.l(d),d.forEach(W),u.forEach(W),this.h()},h(){M(n,"class",i=Ce(["svelte-flow__connection",ni(t[3].isValid)])),M(e,"width",t[5]),M(e,"height",t[6]),M(e,"class","svelte-flow__connectionline"),M(e,"style",t[0])},m(a,u){$(a,e,u),je(e,n),r&&r.m(n,null),l&&l.m(n,null),o=!0},p(a,u){r&&r.p&&(!o||u&4096)&&tt(r,s,a,a[12],o?it(s,a[12],u,ia):nt(a[12]),Ti),a[2]?l&&(l.d(1),l=null):l?l.p(a,u):(l=Hi(a),l.c(),l.m(n,null)),(!o||u&8&&i!==(i=Ce(["svelte-flow__connection",ni(a[3].isValid)])))&&M(n,"class",i),(!o||u&32)&&M(e,"width",a[5]),(!o||u&64)&&M(e,"height",a[6]),(!o||u&1)&&M(e,"style",a[0])},i(a){o||(G(r,a),o=!0)},o(a){J(r,a),o=!1},d(a){a&&W(e),r&&r.d(a),l&&l.d()}}}function Hi(t){let e;return{c(){e=ze("path"),this.h()},l(n){e=Oe(n,"path",{d:!0,style:!0,fill:!0,class:!0}),ge(e).forEach(W),this.h()},h(){M(e,"d",t[4]),M(e,"style",t[1]),M(e,"fill","none"),M(e,"class","svelte-flow__connection-path")},m(n,i){$(n,e,i)},p(n,i){i&16&&M(e,"d",n[4]),i&2&&M(e,"style",n[1])},d(n){n&&W(e)}}}function oa(t){let e,n,i=t[3].inProgress&&Ni(t);return{c(){i&&i.c(),e=we()},l(o){i&&i.l(o),e=we()},m(o,s){i&&i.m(o,s),$(o,e,s),n=!0},p(o,[s]){o[3].inProgress?i?(i.p(o,s),s&8&&G(i,1)):(i=Ni(o),i.c(),G(i,1),i.m(e.parentNode,e)):i&&(Ze(),J(i,1,1,()=>{i=null}),Fe())},i(o){n||(G(i),n=!0)},o(o){J(i),n=!1},d(o){o&&W(e),i&&i.d(o)}}}function la(t,e,n){let i,o,s,r,{$$slots:l={},$$scope:a}=e,{containerStyle:u=""}=e,{style:d=""}=e,{isCustomComponent:h=!1}=e;const{width:f,height:c,connection:y,connectionLineType:m}=He();j(t,f,g=>n(5,s=g)),j(t,c,g=>n(6,r=g)),j(t,y,g=>n(3,o=g)),j(t,m,g=>n(11,i=g));let C=null;return t.$$set=g=>{"containerStyle"in g&&n(0,u=g.containerStyle),"style"in g&&n(1,d=g.style),"isCustomComponent"in g&&n(2,h=g.isCustomComponent),"$$scope"in g&&n(12,a=g.$$scope)},t.$$.update=()=>{if(t.$$.dirty&2060&&o.inProgress&&!h){const{from:g,to:w,fromPosition:k,toPosition:E}=o,X={sourceX:g.x,sourceY:g.y,sourcePosition:k,targetX:w.x,targetY:w.y,targetPosition:E};switch(i){case Ht.Bezier:n(4,[C]=no(X),C);break;case Ht.Step:n(4,[C]=fn({...X,borderRadius:0}),C);break;case Ht.SmoothStep:n(4,[C]=fn(X),C);break;default:n(4,[C]=oo(X),C)}}},[u,d,h,o,C,s,r,f,c,y,m,i,a,l]}class sa extends me{constructor(e){super(),ye(this,e,la,oa,ke,{containerStyle:0,style:1,isCustomComponent:2})}}function ra(t){let e,n,i;const o=t[8].default,s=et(o,t,t[7],null);let r=[{class:n=Ce(["svelte-flow__panel",t[1],...t[2]])},{style:t[0]},t[5]],l={};for(let a=0;a<r.length;a+=1)l=Pe(l,r[a]);return{c(){e=We("div"),s&&s.c(),this.h()},l(a){e=ve(a,"DIV",{class:!0,style:!0});var u=ge(e);s&&s.l(u),u.forEach(W),this.h()},h(){nn(e,l),fe(e,"pointer-events",t[3]?"none":"")},m(a,u){$(a,e,u),s&&s.m(e,null),i=!0},p(a,[u]){s&&s.p&&(!i||u&128)&&tt(s,o,a,a[7],i?it(o,a[7],u,null):nt(a[7]),null),nn(e,l=gn(r,[(!i||u&6&&n!==(n=Ce(["svelte-flow__panel",a[1],...a[2]])))&&{class:n},(!i||u&1)&&{style:a[0]},u&32&&a[5]])),fe(e,"pointer-events",a[3]?"none":"")},i(a){i||(G(s,a),i=!0)},o(a){J(s,a),i=!1},d(a){a&&W(e),s&&s.d(a)}}}function aa(t,e,n){let i;const o=["position","style","class"];let s=Te(e,o),r,{$$slots:l={},$$scope:a}=e,{position:u="top-right"}=e,{style:d=void 0}=e,{class:h=void 0}=e;const{selectionRectMode:f}=He();return j(t,f,c=>n(3,r=c)),t.$$set=c=>{e=Pe(Pe({},e),ot(c)),n(5,s=Te(e,o)),"position"in c&&n(6,u=c.position),"style"in c&&n(0,d=c.style),"class"in c&&n(1,h=c.class),"$$scope"in c&&n(7,a=c.$$scope)},t.$$.update=()=>{t.$$.dirty&64&&n(2,i=`${u}`.split("-"))},[d,h,i,r,f,s,u,a,l]}class Do extends me{constructor(e){super(),ye(this,e,aa,ra,ke,{position:6,style:0,class:1})}}function Yi(t){let e,n;return e=new Do({props:{position:t[1],class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",$$slots:{default:[ua]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},l(i){be(e.$$.fragment,i)},m(i,o){de(e,i,o),n=!0},p(i,o){const s={};o&2&&(s.position=i[1]),o&4&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){n||(G(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){he(e,i)}}}function ua(t){let e,n="Svelte Flow";return{c(){e=We("a"),e.textContent=n,this.h()},l(i){e=ve(i,"A",{href:!0,target:!0,rel:!0,"aria-label":!0,"data-svelte-h":!0}),$o(e)!=="svelte-2vm8e4"&&(e.textContent=n),this.h()},h(){M(e,"href","https://svelteflow.dev"),M(e,"target","_blank"),M(e,"rel","noopener noreferrer"),M(e,"aria-label","Svelte Flow attribution")},m(i,o){$(i,e,o)},p:Ae,d(i){i&&W(e)}}}function fa(t){var o;let e,n,i=!((o=t[0])!=null&&o.hideAttribution)&&Yi(t);return{c(){i&&i.c(),e=we()},l(s){i&&i.l(s),e=we()},m(s,r){i&&i.m(s,r),$(s,e,r),n=!0},p(s,[r]){var l;(l=s[0])!=null&&l.hideAttribution?i&&(Ze(),J(i,1,1,()=>{i=null}),Fe()):i?(i.p(s,r),r&1&&G(i,1)):(i=Yi(s),i.c(),G(i,1),i.m(e.parentNode,e))},i(s){n||(G(i),n=!0)},o(s){J(i),n=!1},d(s){s&&W(e),i&&i.d(s)}}}function ca(t,e,n){let{proOptions:i=void 0}=e,{position:o="bottom-right"}=e;return t.$$set=s=>{"proOptions"in s&&n(0,i=s.proOptions),"position"in s&&n(1,o=s.position)},[i,o]}class da extends me{constructor(e){super(),ye(this,e,ca,fa,ke,{proOptions:0,position:1})}}function Xi(t,{nodeTypes:e,edgeTypes:n,minZoom:i,maxZoom:o,translateExtent:s,paneClickDistance:r}){e!==void 0&&t.setNodeTypes(e),n!==void 0&&t.setEdgeTypes(n),i!==void 0&&t.setMinZoom(i),o!==void 0&&t.setMaxZoom(o),s!==void 0&&t.setTranslateExtent(s),r!==void 0&&t.setPaneClickDistance(r)}const ha=t=>Object.keys(t);function ga(t,e){ha(e).forEach(n=>{const i=e[n];i!==void 0&&t[n].set(i)})}function ma(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function ya(t="light"){return pe("light",n=>{if(t!=="system"){n(t);return}const i=ma(),o=()=>n(i!=null&&i.matches?"dark":"light");return n(i!=null&&i.matches?"dark":"light"),i==null||i.addEventListener("change",o),()=>{i==null||i.removeEventListener("change",o)}})}const ba=t=>({}),Ai=t=>({slot:"connectionLine"});function _a(t){let e;const n=t[75].connectionLine,i=et(n,t,t[99],Ai);return{c(){i&&i.c()},l(o){i&&i.l(o)},m(o,s){i&&i.m(o,s),e=!0},p(o,s){i&&i.p&&(!e||s[3]&64)&&tt(i,n,o,o[99],e?it(n,o[99],s,ba):nt(o[99]),Ai)},i(o){e||(G(i,o),e=!0)},o(o){J(i,o),e=!1},d(o){i&&i.d(o)}}}function ka(t){let e,n,i,o,s,r,l,a,u,d,h,f;return e=new Rr({props:{defaultEdgeOptions:t[21]}}),e.$on("edgeclick",t[78]),e.$on("edgecontextmenu",t[79]),e.$on("edgemouseenter",t[80]),e.$on("edgemouseleave",t[81]),i=new sa({props:{containerStyle:t[7],style:t[6],isCustomComponent:t[34].connectionLine,$$slots:{connectionLine:[_a]},$$scope:{ctx:t}}}),u=new zr({props:{nodeClickDistance:t[23]}}),u.$on("nodeclick",t[82]),u.$on("nodemouseenter",t[83]),u.$on("nodemousemove",t[84]),u.$on("nodemouseleave",t[85]),u.$on("nodedragstart",t[86]),u.$on("nodedrag",t[87]),u.$on("nodedragstop",t[88]),u.$on("nodecontextmenu",t[89]),h=new Qr({}),h.$on("selectionclick",t[90]),h.$on("selectioncontextmenu",t[91]),h.$on("nodedragstart",t[92]),h.$on("nodedrag",t[93]),h.$on("nodedragstop",t[94]),{c(){ce(e.$$.fragment),n=Ye(),ce(i.$$.fragment),o=Ye(),s=We("div"),r=Ye(),l=We("div"),a=Ye(),ce(u.$$.fragment),d=Ye(),ce(h.$$.fragment),this.h()},l(c){be(e.$$.fragment,c),n=Xe(c),be(i.$$.fragment,c),o=Xe(c),s=ve(c,"DIV",{class:!0}),ge(s).forEach(W),r=Xe(c),l=ve(c,"DIV",{class:!0}),ge(l).forEach(W),a=Xe(c),be(u.$$.fragment,c),d=Xe(c),be(h.$$.fragment,c),this.h()},h(){M(s,"class","svelte-flow__edgelabel-renderer"),M(l,"class","svelte-flow__viewport-portal")},m(c,y){de(e,c,y),$(c,n,y),de(i,c,y),$(c,o,y),$(c,s,y),$(c,r,y),$(c,l,y),$(c,a,y),de(u,c,y),$(c,d,y),de(h,c,y),f=!0},p(c,y){const m={};y[0]&2097152&&(m.defaultEdgeOptions=c[21]),e.$set(m);const C={};y[0]&128&&(C.containerStyle=c[7]),y[0]&64&&(C.style=c[6]),y[1]&8&&(C.isCustomComponent=c[34].connectionLine),y[3]&64&&(C.$$scope={dirty:y,ctx:c}),i.$set(C);const g={};y[0]&8388608&&(g.nodeClickDistance=c[23]),u.$set(g)},i(c){f||(G(e.$$.fragment,c),G(i.$$.fragment,c),G(u.$$.fragment,c),G(h.$$.fragment,c),f=!0)},o(c){J(e.$$.fragment,c),J(i.$$.fragment,c),J(u.$$.fragment,c),J(h.$$.fragment,c),f=!1},d(c){c&&(W(n),W(o),W(s),W(r),W(l),W(a),W(d)),he(e,c),he(i,c),he(u,c),he(h,c)}}}function wa(t){let e,n,i,o;return e=new _r({props:{$$slots:{default:[ka]},$$scope:{ctx:t}}}),i=new qr({}),{c(){ce(e.$$.fragment),n=Ye(),ce(i.$$.fragment)},l(s){be(e.$$.fragment,s),n=Xe(s),be(i.$$.fragment,s)},m(s,r){de(e,s,r),$(s,n,r),de(i,s,r),o=!0},p(s,r){const l={};r[0]&10485952|r[1]&8|r[3]&64&&(l.$$scope={dirty:r,ctx:s}),e.$set(l)},i(s){o||(G(e.$$.fragment,s),G(i.$$.fragment,s),o=!0)},o(s){J(e.$$.fragment,s),J(i.$$.fragment,s),o=!1},d(s){s&&W(n),he(e,s),he(i,s)}}}function Sa(t){let e,n;return e=new mr({props:{panOnDrag:t[17]===void 0?!0:t[17],selectionOnDrag:t[18],$$slots:{default:[wa]},$$scope:{ctx:t}}}),e.$on("paneclick",t[95]),e.$on("panecontextmenu",t[96]),{c(){ce(e.$$.fragment)},l(i){be(e.$$.fragment,i)},m(i,o){de(e,i,o),n=!0},p(i,o){const s={};o[0]&131072&&(s.panOnDrag=i[17]===void 0?!0:i[17]),o[0]&262144&&(s.selectionOnDrag=i[18]),o[0]&10485952|o[1]&8|o[3]&64&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){n||(G(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){he(e,i)}}}function Ea(t){let e,n,i,o,s,r,l,a,u,d,h,f;n=new na({props:{selectionKey:t[1],deleteKey:t[5],panActivationKey:t[2],multiSelectionKey:t[3],zoomActivationKey:t[4]}}),o=new dr({props:{initialViewport:t[31],onMoveStart:t[8],onMove:t[9],onMoveEnd:t[10],panOnScrollMode:t[11]===void 0?$e.Free:t[11],preventScrolling:t[12]===void 0?!0:t[12],zoomOnScroll:t[13]===void 0?!0:t[13],zoomOnDoubleClick:t[14]===void 0?!0:t[14],zoomOnPinch:t[15]===void 0?!0:t[15],panOnScroll:t[16]===void 0?!1:t[16],panOnDrag:t[17]===void 0?!0:t[17],paneClickDistance:t[22]===void 0?0:t[22],$$slots:{default:[Sa]},$$scope:{ctx:t}}}),r=new da({props:{proOptions:t[20],position:t[19]}});const c=t[75].default,y=et(c,t,t[99],null);let m=[{style:t[24]},{class:a=Ce(["svelte-flow",t[25],t[30]])},{"data-testid":"svelte-flow__wrapper"},t[33],{role:"application"}],C={};for(let g=0;g<m.length;g+=1)C=Pe(C,m[g]);return{c(){e=We("div"),ce(n.$$.fragment),i=Ye(),ce(o.$$.fragment),s=Ye(),ce(r.$$.fragment),l=Ye(),y&&y.c(),this.h()},l(g){e=ve(g,"DIV",{style:!0,class:!0,"data-testid":!0,role:!0});var w=ge(e);be(n.$$.fragment,w),i=Xe(w),be(o.$$.fragment,w),s=Xe(w),be(r.$$.fragment,w),l=Xe(w),y&&y.l(w),w.forEach(W),this.h()},h(){nn(e,C),el(()=>t[98].call(e)),le(e,"svelte-12wlba6",!0)},m(g,w){$(g,e,w),de(n,e,null),je(e,i),de(o,e,null),je(e,s),de(r,e,null),je(e,l),y&&y.m(e,null),t[97](e),u=tl(e,t[98].bind(e)),d=!0,h||(f=[Me(e,"dragover",t[76]),Me(e,"drop",t[77])],h=!0)},p(g,w){const k={};w[0]&2&&(k.selectionKey=g[1]),w[0]&32&&(k.deleteKey=g[5]),w[0]&4&&(k.panActivationKey=g[2]),w[0]&8&&(k.multiSelectionKey=g[3]),w[0]&16&&(k.zoomActivationKey=g[4]),n.$set(k);const E={};w[0]&256&&(E.onMoveStart=g[8]),w[0]&512&&(E.onMove=g[9]),w[0]&1024&&(E.onMoveEnd=g[10]),w[0]&2048&&(E.panOnScrollMode=g[11]===void 0?$e.Free:g[11]),w[0]&4096&&(E.preventScrolling=g[12]===void 0?!0:g[12]),w[0]&8192&&(E.zoomOnScroll=g[13]===void 0?!0:g[13]),w[0]&16384&&(E.zoomOnDoubleClick=g[14]===void 0?!0:g[14]),w[0]&32768&&(E.zoomOnPinch=g[15]===void 0?!0:g[15]),w[0]&65536&&(E.panOnScroll=g[16]===void 0?!1:g[16]),w[0]&131072&&(E.panOnDrag=g[17]===void 0?!0:g[17]),w[0]&4194304&&(E.paneClickDistance=g[22]===void 0?0:g[22]),w[0]&10879168|w[1]&8|w[3]&64&&(E.$$scope={dirty:w,ctx:g}),o.$set(E);const X={};w[0]&1048576&&(X.proOptions=g[20]),w[0]&524288&&(X.position=g[19]),r.$set(X),y&&y.p&&(!d||w[3]&64)&&tt(y,c,g,g[99],d?it(c,g[99],w,null):nt(g[99]),null),nn(e,C=gn(m,[(!d||w[0]&16777216)&&{style:g[24]},(!d||w[0]&1107296256&&a!==(a=Ce(["svelte-flow",g[25],g[30]])))&&{class:a},{"data-testid":"svelte-flow__wrapper"},w[1]&4&&g[33],{role:"application"}])),le(e,"svelte-12wlba6",!0)},i(g){d||(G(n.$$.fragment,g),G(o.$$.fragment,g),G(r.$$.fragment,g),G(y,g),d=!0)},o(g){J(n.$$.fragment,g),J(o.$$.fragment,g),J(r.$$.fragment,g),J(y,g),d=!1},d(g){g&&W(e),he(n),he(o),he(r),y&&y.d(g),t[97](null),u(),h=!1,kt(f)}}}function Ma(t,e,n){let i;const o=["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"];let s=Te(e,o),r,l,a=Ae,u=()=>(a(),a=Jn(I,S=>n(100,l=S)),I),d,h=Ae,f=()=>(h(),h=Jn(i,S=>n(30,d=S)),i);t.$$.on_destroy.push(()=>a()),t.$$.on_destroy.push(()=>h());let{$$slots:c={},$$scope:y}=e;const m=nl(c);let{id:C="1"}=e,{nodes:g}=e,{edges:w}=e,{fitView:k=void 0}=e,{fitViewOptions:E=void 0}=e,{minZoom:X=void 0}=e,{maxZoom:K=void 0}=e,{initialViewport:H=void 0}=e,{viewport:I=void 0}=e;u();let{nodeTypes:D=void 0}=e,{edgeTypes:A=void 0}=e,{selectionKey:Z=void 0}=e,{selectionMode:v=void 0}=e,{panActivationKey:B=void 0}=e,{multiSelectionKey:b=void 0}=e,{zoomActivationKey:T=void 0}=e,{nodesDraggable:_=void 0}=e,{nodesConnectable:P=void 0}=e,{nodeDragThreshold:O=void 0}=e,{elementsSelectable:z=void 0}=e,{snapGrid:Y=void 0}=e,{deleteKey:F=void 0}=e,{connectionRadius:U=void 0}=e,{connectionLineType:p=void 0}=e,{connectionMode:N=St.Strict}=e,{connectionLineStyle:ee=""}=e,{connectionLineContainerStyle:ie=""}=e,{onMoveStart:R=void 0}=e,{onMove:te=void 0}=e,{onMoveEnd:oe=void 0}=e,{isValidConnection:se=void 0}=e,{translateExtent:re=void 0}=e,{nodeExtent:ue=void 0}=e,{onlyRenderVisibleElements:Ee=void 0}=e,{panOnScrollMode:V=$e.Free}=e,{preventScrolling:De=!0}=e,{zoomOnScroll:Se=!0}=e,{zoomOnDoubleClick:ft=!0}=e,{zoomOnPinch:lt=!0}=e,{panOnScroll:st=!1}=e,{panOnDrag:Ve=!0}=e,{selectionOnDrag:rt=void 0}=e,{autoPanOnConnect:x=!0}=e,{autoPanOnNodeDrag:ct=!0}=e,{onerror:dt=void 0}=e,{ondelete:L=void 0}=e,{onedgecreate:ht=void 0}=e,{attributionPosition:Le=void 0}=e,{proOptions:Ge=void 0}=e,{defaultEdgeOptions:Q=void 0}=e,{width:at=void 0}=e,{height:Ue=void 0}=e,{colorMode:Ke="light"}=e,{onconnect:Mt=void 0}=e,{onconnectstart:Ct=void 0}=e,{onconnectend:Pt=void 0}=e,{onbeforedelete:zt=void 0}=e,{oninit:gt=void 0}=e,{nodeOrigin:wt=void 0}=e,{paneClickDistance:Gt=0}=e,{nodeClickDistance:Un=0}=e,{defaultMarkerColor:Cn="#b1b1b7"}=e,{style:qn=void 0}=e,{class:jn=void 0}=e,Ut,Ot,Dt;const Io=l||H,Be=il(Gn)?He():ar({nodes:q(g),edges:q(w),width:at,height:Ue,fitView:k,nodeOrigin:wt,nodeExtent:ue});dn(()=>(Be.width.set(Ot),Be.height.set(Dt),Be.domNode.set(Ut),Be.syncNodeStores(g),Be.syncEdgeStores(w),Be.syncViewport(I),k!==void 0&&Be.fitViewOnInit.set(k),E&&Be.fitViewOptions.set(E),Xi(Be,{nodeTypes:D,edgeTypes:A,minZoom:X,maxZoom:K,translateExtent:re,paneClickDistance:Gt}),()=>{Be.reset()}));const{initialized:pn}=Be;j(t,pn,S=>n(74,r=S));let Pn=!1;function To(S){_e.call(this,t,S)}function No(S){_e.call(this,t,S)}function Ho(S){_e.call(this,t,S)}function Yo(S){_e.call(this,t,S)}function Xo(S){_e.call(this,t,S)}function Ao(S){_e.call(this,t,S)}function Vo(S){_e.call(this,t,S)}function Wo(S){_e.call(this,t,S)}function vo(S){_e.call(this,t,S)}function Lo(S){_e.call(this,t,S)}function Ko(S){_e.call(this,t,S)}function Bo(S){_e.call(this,t,S)}function Ro(S){_e.call(this,t,S)}function Zo(S){_e.call(this,t,S)}function Fo(S){_e.call(this,t,S)}function Go(S){_e.call(this,t,S)}function Uo(S){_e.call(this,t,S)}function qo(S){_e.call(this,t,S)}function jo(S){_e.call(this,t,S)}function po(S){_e.call(this,t,S)}function Jo(S){_e.call(this,t,S)}function Qo(S){Kn[S?"unshift":"push"](()=>{Ut=S,n(28,Ut)})}function xo(){Ot=this.clientWidth,Dt=this.clientHeight,n(26,Ot),n(27,Dt)}return t.$$set=S=>{e=Pe(Pe({},e),ot(S)),n(33,s=Te(e,o)),"id"in S&&n(35,C=S.id),"nodes"in S&&n(36,g=S.nodes),"edges"in S&&n(37,w=S.edges),"fitView"in S&&n(38,k=S.fitView),"fitViewOptions"in S&&n(39,E=S.fitViewOptions),"minZoom"in S&&n(40,X=S.minZoom),"maxZoom"in S&&n(41,K=S.maxZoom),"initialViewport"in S&&n(42,H=S.initialViewport),"viewport"in S&&u(n(0,I=S.viewport)),"nodeTypes"in S&&n(43,D=S.nodeTypes),"edgeTypes"in S&&n(44,A=S.edgeTypes),"selectionKey"in S&&n(1,Z=S.selectionKey),"selectionMode"in S&&n(45,v=S.selectionMode),"panActivationKey"in S&&n(2,B=S.panActivationKey),"multiSelectionKey"in S&&n(3,b=S.multiSelectionKey),"zoomActivationKey"in S&&n(4,T=S.zoomActivationKey),"nodesDraggable"in S&&n(46,_=S.nodesDraggable),"nodesConnectable"in S&&n(47,P=S.nodesConnectable),"nodeDragThreshold"in S&&n(48,O=S.nodeDragThreshold),"elementsSelectable"in S&&n(49,z=S.elementsSelectable),"snapGrid"in S&&n(50,Y=S.snapGrid),"deleteKey"in S&&n(5,F=S.deleteKey),"connectionRadius"in S&&n(51,U=S.connectionRadius),"connectionLineType"in S&&n(52,p=S.connectionLineType),"connectionMode"in S&&n(53,N=S.connectionMode),"connectionLineStyle"in S&&n(6,ee=S.connectionLineStyle),"connectionLineContainerStyle"in S&&n(7,ie=S.connectionLineContainerStyle),"onMoveStart"in S&&n(8,R=S.onMoveStart),"onMove"in S&&n(9,te=S.onMove),"onMoveEnd"in S&&n(10,oe=S.onMoveEnd),"isValidConnection"in S&&n(54,se=S.isValidConnection),"translateExtent"in S&&n(55,re=S.translateExtent),"nodeExtent"in S&&n(56,ue=S.nodeExtent),"onlyRenderVisibleElements"in S&&n(57,Ee=S.onlyRenderVisibleElements),"panOnScrollMode"in S&&n(11,V=S.panOnScrollMode),"preventScrolling"in S&&n(12,De=S.preventScrolling),"zoomOnScroll"in S&&n(13,Se=S.zoomOnScroll),"zoomOnDoubleClick"in S&&n(14,ft=S.zoomOnDoubleClick),"zoomOnPinch"in S&&n(15,lt=S.zoomOnPinch),"panOnScroll"in S&&n(16,st=S.panOnScroll),"panOnDrag"in S&&n(17,Ve=S.panOnDrag),"selectionOnDrag"in S&&n(18,rt=S.selectionOnDrag),"autoPanOnConnect"in S&&n(58,x=S.autoPanOnConnect),"autoPanOnNodeDrag"in S&&n(59,ct=S.autoPanOnNodeDrag),"onerror"in S&&n(60,dt=S.onerror),"ondelete"in S&&n(61,L=S.ondelete),"onedgecreate"in S&&n(62,ht=S.onedgecreate),"attributionPosition"in S&&n(19,Le=S.attributionPosition),"proOptions"in S&&n(20,Ge=S.proOptions),"defaultEdgeOptions"in S&&n(21,Q=S.defaultEdgeOptions),"width"in S&&n(63,at=S.width),"height"in S&&n(64,Ue=S.height),"colorMode"in S&&n(65,Ke=S.colorMode),"onconnect"in S&&n(66,Mt=S.onconnect),"onconnectstart"in S&&n(67,Ct=S.onconnectstart),"onconnectend"in S&&n(68,Pt=S.onconnectend),"onbeforedelete"in S&&n(69,zt=S.onbeforedelete),"oninit"in S&&n(70,gt=S.oninit),"nodeOrigin"in S&&n(71,wt=S.nodeOrigin),"paneClickDistance"in S&&n(22,Gt=S.paneClickDistance),"nodeClickDistance"in S&&n(23,Un=S.nodeClickDistance),"defaultMarkerColor"in S&&n(72,Cn=S.defaultMarkerColor),"style"in S&&n(24,qn=S.style),"class"in S&&n(25,jn=S.class),"$$scope"in S&&n(99,y=S.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&201326592&&Ot!==void 0&&Dt!==void 0&&(Be.width.set(Ot),Be.height.set(Dt)),t.$$.dirty[2]&6400&&!Pn&&r&&(gt==null||gt(),n(73,Pn=!0)),t.$$.dirty[1]&2097135632|t.$$.dirty[2]&1777&&ga(Be,{flowId:C,connectionLineType:p,connectionRadius:U,selectionMode:v,snapGrid:Y,defaultMarkerColor:Cn,nodesDraggable:_,nodesConnectable:P,elementsSelectable:z,onlyRenderVisibleElements:Ee,isValidConnection:se,autoPanOnConnect:x,autoPanOnNodeDrag:ct,onerror:dt,ondelete:L,onedgecreate:ht,connectionMode:N,nodeDragThreshold:O,onconnect:Mt,onconnectstart:Ct,onconnectend:Pt,onbeforedelete:zt,nodeOrigin:wt}),t.$$.dirty[0]&4194304|t.$$.dirty[1]&16791040&&Xi(Be,{nodeTypes:D,edgeTypes:A,minZoom:X,maxZoom:K,translateExtent:re,paneClickDistance:Gt}),t.$$.dirty[2]&8&&f(n(29,i=ya(Ke)))},[I,Z,B,b,T,F,ee,ie,R,te,oe,V,De,Se,ft,lt,st,Ve,rt,Le,Ge,Q,Gt,Un,qn,jn,Ot,Dt,Ut,i,d,Io,pn,s,m,C,g,w,k,E,X,K,H,D,A,v,_,P,O,z,Y,U,p,N,se,re,ue,Ee,x,ct,dt,L,ht,at,Ue,Ke,Mt,Ct,Pt,zt,gt,wt,Cn,Pn,r,c,To,No,Ho,Yo,Xo,Ao,Vo,Wo,vo,Lo,Ko,Bo,Ro,Zo,Fo,Go,Uo,qo,jo,po,Jo,Qo,xo,y]}class ou extends me{constructor(e){super(),ye(this,e,Ma,Ea,ke,{id:35,nodes:36,edges:37,fitView:38,fitViewOptions:39,minZoom:40,maxZoom:41,initialViewport:42,viewport:0,nodeTypes:43,edgeTypes:44,selectionKey:1,selectionMode:45,panActivationKey:2,multiSelectionKey:3,zoomActivationKey:4,nodesDraggable:46,nodesConnectable:47,nodeDragThreshold:48,elementsSelectable:49,snapGrid:50,deleteKey:5,connectionRadius:51,connectionLineType:52,connectionMode:53,connectionLineStyle:6,connectionLineContainerStyle:7,onMoveStart:8,onMove:9,onMoveEnd:10,isValidConnection:54,translateExtent:55,nodeExtent:56,onlyRenderVisibleElements:57,panOnScrollMode:11,preventScrolling:12,zoomOnScroll:13,zoomOnDoubleClick:14,zoomOnPinch:15,panOnScroll:16,panOnDrag:17,selectionOnDrag:18,autoPanOnConnect:58,autoPanOnNodeDrag:59,onerror:60,ondelete:61,onedgecreate:62,attributionPosition:19,proOptions:20,defaultEdgeOptions:21,width:63,height:64,colorMode:65,onconnect:66,onconnectstart:67,onconnectend:68,onbeforedelete:69,oninit:70,nodeOrigin:71,paneClickDistance:22,nodeClickDistance:23,defaultMarkerColor:72,style:24,class:25},null,[-1,-1,-1,-1])}}var bt;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(bt||(bt={}));function Ca(t){let e,n;return{c(){e=ze("circle"),this.h()},l(i){e=Oe(i,"circle",{cx:!0,cy:!0,r:!0,class:!0}),ge(e).forEach(W),this.h()},h(){M(e,"cx",t[0]),M(e,"cy",t[0]),M(e,"r",t[0]),M(e,"class",n=Ce(["svelte-flow__background-pattern","dots",t[1]]))},m(i,o){$(i,e,o)},p(i,[o]){o&1&&M(e,"cx",i[0]),o&1&&M(e,"cy",i[0]),o&1&&M(e,"r",i[0]),o&2&&n!==(n=Ce(["svelte-flow__background-pattern","dots",i[1]]))&&M(e,"class",n)},i:Ae,o:Ae,d(i){i&&W(e)}}}function Pa(t,e,n){let{radius:i=5}=e,{class:o=""}=e;return t.$$set=s=>{"radius"in s&&n(0,i=s.radius),"class"in s&&n(1,o=s.class)},[i,o]}class za extends me{constructor(e){super(),ye(this,e,Pa,Ca,ke,{radius:0,class:1})}}function Oa(t){let e,n,i;return{c(){e=ze("path"),this.h()},l(o){e=Oe(o,"path",{"stroke-width":!0,d:!0,class:!0}),ge(e).forEach(W),this.h()},h(){M(e,"stroke-width",t[0]),M(e,"d",n=`M${t[1][0]/2} 0 V${t[1][1]} M0 ${t[1][1]/2} H${t[1][0]}`),M(e,"class",i=Ce(["svelte-flow__background-pattern",t[2],t[3]]))},m(o,s){$(o,e,s)},p(o,[s]){s&1&&M(e,"stroke-width",o[0]),s&2&&n!==(n=`M${o[1][0]/2} 0 V${o[1][1]} M0 ${o[1][1]/2} H${o[1][0]}`)&&M(e,"d",n),s&12&&i!==(i=Ce(["svelte-flow__background-pattern",o[2],o[3]]))&&M(e,"class",i)},i:Ae,o:Ae,d(o){o&&W(e)}}}function Da(t,e,n){let{lineWidth:i=1}=e,{dimensions:o}=e,{variant:s=void 0}=e,{class:r=""}=e;return t.$$set=l=>{"lineWidth"in l&&n(0,i=l.lineWidth),"dimensions"in l&&n(1,o=l.dimensions),"variant"in l&&n(2,s=l.variant),"class"in l&&n(3,r=l.class)},[i,o,s,r]}class Ia extends me{constructor(e){super(),ye(this,e,Da,Oa,ke,{lineWidth:0,dimensions:1,variant:2,class:3})}}function Ta(t){let e,n;return e=new Ia({props:{dimensions:t[6],variant:t[0],lineWidth:t[1],class:t[4]}}),{c(){ce(e.$$.fragment)},l(i){be(e.$$.fragment,i)},m(i,o){de(e,i,o),n=!0},p(i,o){const s={};o&64&&(s.dimensions=i[6]),o&1&&(s.variant=i[0]),o&2&&(s.lineWidth=i[1]),o&16&&(s.class=i[4]),e.$set(s)},i(i){n||(G(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){he(e,i)}}}function Na(t){let e,n;return e=new za({props:{radius:t[7]/2,class:t[4]}}),{c(){ce(e.$$.fragment)},l(i){be(e.$$.fragment,i)},m(i,o){de(e,i,o),n=!0},p(i,o){const s={};o&128&&(s.radius=i[7]/2),o&16&&(s.class=i[4]),e.$set(s)},i(i){n||(G(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){he(e,i)}}}function Ha(t){let e,n,i,o,s,r,l,a,u,d,h,f,c;const y=[Na,Ta],m=[];function C(g,w){return g[14]?0:1}return i=C(t),o=m[i]=y[i](t),{c(){e=ze("svg"),n=ze("pattern"),o.c(),d=ze("rect"),this.h()},l(g){e=Oe(g,"svg",{class:!0,"data-testid":!0});var w=ge(e);n=Oe(w,"pattern",{id:!0,x:!0,y:!0,width:!0,height:!0,patternUnits:!0,patternTransform:!0});var k=ge(n);o.l(k),k.forEach(W),d=Oe(w,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),ge(d).forEach(W),w.forEach(W),this.h()},h(){M(n,"id",t[11]),M(n,"x",s=t[9].x%t[8][0]),M(n,"y",r=t[9].y%t[8][1]),M(n,"width",l=t[8][0]),M(n,"height",a=t[8][1]),M(n,"patternUnits","userSpaceOnUse"),M(n,"patternTransform",u=`translate(-${t[10][0]},-${t[10][1]})`),M(d,"x","0"),M(d,"y","0"),M(d,"width","100%"),M(d,"height","100%"),M(d,"fill",h=`url(#${t[11]})`),M(e,"class",f=Qn(Ce(["svelte-flow__background",t[5]]))+" svelte-1r7pe8d"),M(e,"data-testid","svelte-flow__background"),fe(e,"--xy-background-color-props",t[2]),fe(e,"--xy-background-pattern-color-props",t[3])},m(g,w){$(g,e,w),je(e,n),m[i].m(n,null),je(e,d),c=!0},p(g,[w]){o.p(g,w),(!c||w&2048)&&M(n,"id",g[11]),(!c||w&768&&s!==(s=g[9].x%g[8][0]))&&M(n,"x",s),(!c||w&768&&r!==(r=g[9].y%g[8][1]))&&M(n,"y",r),(!c||w&256&&l!==(l=g[8][0]))&&M(n,"width",l),(!c||w&256&&a!==(a=g[8][1]))&&M(n,"height",a),(!c||w&1024&&u!==(u=`translate(-${g[10][0]},-${g[10][1]})`))&&M(n,"patternTransform",u),(!c||w&2048&&h!==(h=`url(#${g[11]})`))&&M(d,"fill",h),(!c||w&32&&f!==(f=Qn(Ce(["svelte-flow__background",g[5]]))+" svelte-1r7pe8d"))&&M(e,"class",f),w&4&&fe(e,"--xy-background-color-props",g[2]),w&8&&fe(e,"--xy-background-pattern-color-props",g[3])},i(g){c||(G(o),c=!0)},o(g){J(o),c=!1},d(g){g&&W(e),m[i].d()}}}const Ya={[bt.Dots]:1,[bt.Lines]:1,[bt.Cross]:6};function Xa(t,e,n){let i,o,s,r,l,a,u,{id:d=void 0}=e,{variant:h=bt.Dots}=e,{gap:f=20}=e,{size:c=1}=e,{lineWidth:y=1}=e,{bgColor:m=void 0}=e,{patternColor:C=void 0}=e,{patternClass:g=void 0}=e,{class:w=""}=e;const{viewport:k,flowId:E}=He();j(t,k,D=>n(9,a=D)),j(t,E,D=>n(18,u=D));const X=c||Ya[h],K=h===bt.Dots,H=h===bt.Cross,I=Array.isArray(f)?f:[f,f];return t.$$set=D=>{"id"in D&&n(15,d=D.id),"variant"in D&&n(0,h=D.variant),"gap"in D&&n(16,f=D.gap),"size"in D&&n(17,c=D.size),"lineWidth"in D&&n(1,y=D.lineWidth),"bgColor"in D&&n(2,m=D.bgColor),"patternColor"in D&&n(3,C=D.patternColor),"patternClass"in D&&n(4,g=D.patternClass),"class"in D&&n(5,w=D.class)},t.$$.update=()=>{t.$$.dirty&294912&&n(11,i=`background-pattern-${u}-${d||""}`),t.$$.dirty&512&&n(8,o=[I[0]*a.zoom||1,I[1]*a.zoom||1]),t.$$.dirty&512&&n(7,s=X*a.zoom),t.$$.dirty&384&&n(6,r=H?[s,s]:o),t.$$.dirty&192&&n(10,l=K?[s/2,s/2]:[r[0]/2,r[1]/2])},[h,y,m,C,g,w,r,s,o,a,l,i,k,E,K,d,f,c,u]}class lu extends me{constructor(e){super(),ye(this,e,Xa,Ha,ke,{id:15,variant:0,gap:16,size:17,lineWidth:1,bgColor:2,patternColor:3,patternClass:4,class:5})}}function Aa(t){let e,n,i;return{c(){e=ze("rect"),this.h()},l(o){e=Oe(o,"rect",{class:!0,x:!0,y:!0,rx:!0,ry:!0,width:!0,height:!0,style:!0,"shape-rendering":!0}),ge(e).forEach(W),this.h()},h(){M(e,"class",n=Ce(["svelte-flow__minimap-node",t[10]])),M(e,"x",t[0]),M(e,"y",t[1]),M(e,"rx",t[4]),M(e,"ry",t[4]),M(e,"width",t[2]),M(e,"height",t[3]),M(e,"style",i=`${t[5]?`fill: ${t[5]};`:""}${t[7]?`stroke: ${t[7]};`:""}${t[8]?`stroke-width: ${t[8]};`:""}`),M(e,"shape-rendering",t[6]),le(e,"selected",t[9])},m(o,s){$(o,e,s)},p(o,[s]){s&1024&&n!==(n=Ce(["svelte-flow__minimap-node",o[10]]))&&M(e,"class",n),s&1&&M(e,"x",o[0]),s&2&&M(e,"y",o[1]),s&16&&M(e,"rx",o[4]),s&16&&M(e,"ry",o[4]),s&4&&M(e,"width",o[2]),s&8&&M(e,"height",o[3]),s&416&&i!==(i=`${o[5]?`fill: ${o[5]};`:""}${o[7]?`stroke: ${o[7]};`:""}${o[8]?`stroke-width: ${o[8]};`:""}`)&&M(e,"style",i),s&64&&M(e,"shape-rendering",o[6]),s&1536&&le(e,"selected",o[9])},i:Ae,o:Ae,d(o){o&&W(e)}}}function Va(t,e,n){let{x:i}=e,{y:o}=e,{width:s=0}=e,{height:r=0}=e,{borderRadius:l=5}=e,{color:a=void 0}=e,{shapeRendering:u}=e,{strokeColor:d=void 0}=e,{strokeWidth:h=2}=e,{selected:f=!1}=e,{class:c=""}=e;return t.$$set=y=>{"x"in y&&n(0,i=y.x),"y"in y&&n(1,o=y.y),"width"in y&&n(2,s=y.width),"height"in y&&n(3,r=y.height),"borderRadius"in y&&n(4,l=y.borderRadius),"color"in y&&n(5,a=y.color),"shapeRendering"in y&&n(6,u=y.shapeRendering),"strokeColor"in y&&n(7,d=y.strokeColor),"strokeWidth"in y&&n(8,h=y.strokeWidth),"selected"in y&&n(9,f=y.selected),"class"in y&&n(10,c=y.class)},[i,o,s,r,l,a,u,d,h,f,c]}class Wa extends me{constructor(e){super(),ye(this,e,Va,Aa,ke,{x:0,y:1,width:2,height:3,borderRadius:4,color:5,shapeRendering:6,strokeColor:7,strokeWidth:8,selected:9,class:10})}}function va(t,e){const n=ns({domNode:t,panZoom:e.panZoom,getTransform:()=>{const o=q(e.viewport);return[o.x,o.y,o.zoom]},getViewScale:e.getViewScale});function i(o){n.update({translateExtent:o.translateExtent,width:o.width,height:o.height,inversePan:o.inversePan,zoomStep:o.zoomStep,pannable:o.pannable,zoomable:o.zoomable})}return{update:i,destroy(){n.destroy()}}}function Vi(t,e,n){const i=t.slice();i[55]=e[n];const o=i[20].get(i[55].id);return i[56]=o,i}function Yn(t){const e=t.slice(),n=Et(e[56]);return e[59]=n,e}function Wi(t){let e,n,i=[],o=new Map,s,r,l,a,u,d,h,f=t[1]&&vi(t),c=_t(t[19]);const y=m=>m[55].id;for(let m=0;m<c.length;m+=1){let C=Vi(t,c,m),g=y(C);o.set(g,i[m]=Ki(g,C))}return{c(){e=ze("svg"),f&&f.c(),n=we();for(let m=0;m<i.length;m+=1)i[m].c();s=ze("path"),this.h()},l(m){e=Oe(m,"svg",{width:!0,height:!0,viewBox:!0,class:!0,role:!0,"aria-labelledby":!0});var C=ge(e);f&&f.l(C),n=we();for(let g=0;g<i.length;g+=1)i[g].l(C);s=Oe(C,"path",{class:!0,d:!0,"fill-rule":!0,"pointer-events":!0}),ge(s).forEach(W),C.forEach(W),this.h()},h(){M(s,"class","svelte-flow__minimap-mask"),M(s,"d",r="M"+(t[26]-t[15])+","+(t[25]-t[15])+"h"+(t[24]+t[15]*2)+"v"+(t[23]+t[15]*2)+"h"+(-t[24]-t[15]*2)+`z
      M`+t[18].x+","+t[18].y+"h"+t[18].width+"v"+t[18].height+"h"+-t[18].width+"z"),M(s,"fill-rule","evenodd"),M(s,"pointer-events","none"),M(e,"width",t[17]),M(e,"height",t[16]),M(e,"viewBox",l=t[26]+" "+t[25]+" "+t[24]+" "+t[23]),M(e,"class","svelte-flow__minimap-svg"),M(e,"role","img"),M(e,"aria-labelledby",t[41]),fe(e,"--xy-minimap-mask-background-color-props",t[5]),fe(e,"--xy-minimap-mask-stroke-color-props",t[6]),fe(e,"--xy-minimap-mask-stroke-width-props",t[7]?t[7]*t[14]:void 0)},m(m,C){$(m,e,C),f&&f.m(e,null),je(e,n);for(let g=0;g<i.length;g+=1)i[g]&&i[g].m(e,null);je(e,s),u=!0,d||(h=Re(a=va.call(null,e,{panZoom:t[27],viewport:t[31],getViewScale:t[42],translateExtent:t[28],width:t[22],height:t[21],inversePan:t[10],zoomStep:t[11],pannable:t[8],zoomable:t[9]})),d=!0)},p(m,C){m[1]?f?f.p(m,C):(f=vi(m),f.c(),f.m(e,n)):f&&(f.d(1),f=null),C[0]&1572876|C[1]&960&&(c=_t(m[19]),Ze(),i=mn(i,C,y,1,m,c,o,e,yn,Ki,s,Vi),Fe()),(!u||C[0]&126124032&&r!==(r="M"+(m[26]-m[15])+","+(m[25]-m[15])+"h"+(m[24]+m[15]*2)+"v"+(m[23]+m[15]*2)+"h"+(-m[24]-m[15]*2)+`z
      M`+m[18].x+","+m[18].y+"h"+m[18].width+"v"+m[18].height+"h"+-m[18].width+"z"))&&M(s,"d",r),(!u||C[0]&131072)&&M(e,"width",m[17]),(!u||C[0]&65536)&&M(e,"height",m[16]),(!u||C[0]&125829120&&l!==(l=m[26]+" "+m[25]+" "+m[24]+" "+m[23]))&&M(e,"viewBox",l),a&&Ne(a.update)&&C[0]&408948480&&a.update.call(null,{panZoom:m[27],viewport:m[31],getViewScale:m[42],translateExtent:m[28],width:m[22],height:m[21],inversePan:m[10],zoomStep:m[11],pannable:m[8],zoomable:m[9]}),C[0]&32&&fe(e,"--xy-minimap-mask-background-color-props",m[5]),C[0]&64&&fe(e,"--xy-minimap-mask-stroke-color-props",m[6]),C[0]&16512&&fe(e,"--xy-minimap-mask-stroke-width-props",m[7]?m[7]*m[14]:void 0)},i(m){if(!u){for(let C=0;C<c.length;C+=1)G(i[C]);u=!0}},o(m){for(let C=0;C<i.length;C+=1)J(i[C]);u=!1},d(m){m&&W(e),f&&f.d();for(let C=0;C<i.length;C+=1)i[C].d();d=!1,h()}}}function vi(t){let e,n;return{c(){e=ze("title"),n=Kt(t[1]),this.h()},l(i){e=Oe(i,"title",{id:!0});var o=ge(e);n=Bt(o,t[1]),o.forEach(W),this.h()},h(){M(e,"id",t[41])},m(i,o){$(i,e,o),je(e,n)},p(i,o){o[0]&2&&Rt(n,i[1])},d(i){i&&W(e)}}}function Li(t){var s;let e,n;const i=[{x:t[56].internals.positionAbsolute.x},{y:t[56].internals.positionAbsolute.y},t[59],{selected:t[56].selected},{color:(s=t[37])==null?void 0:s.call(t,t[56])},{borderRadius:t[2]},{strokeColor:t[38](t[56])},{strokeWidth:t[3]},{shapeRendering:t[40]},{class:t[39](t[56])}];let o={};for(let r=0;r<i.length;r+=1)o=Pe(o,i[r]);return e=new Wa({props:o}),{c(){ce(e.$$.fragment)},l(r){be(e.$$.fragment,r)},m(r,l){de(e,r,l),n=!0},p(r,l){var u;const a=l[0]&1572876|l[1]&960?gn(i,[l[0]&1572864&&{x:r[56].internals.positionAbsolute.x},l[0]&1572864&&{y:r[56].internals.positionAbsolute.y},l[0]&1572864&&Zi(r[59]),l[0]&1572864&&{selected:r[56].selected},l[0]&1572864|l[1]&64&&{color:(u=r[37])==null?void 0:u.call(r,r[56])},l[0]&4&&{borderRadius:r[2]},l[0]&1572864|l[1]&128&&{strokeColor:r[38](r[56])},l[0]&8&&{strokeWidth:r[3]},l[1]&512&&{shapeRendering:r[40]},l[0]&1572864|l[1]&256&&{class:r[39](r[56])}]):{};e.$set(a)},i(r){n||(G(e.$$.fragment,r),n=!0)},o(r){J(e.$$.fragment,r),n=!1},d(r){he(e,r)}}}function Ki(t,e){let n,i=e[56]&&un(e[56]),o,s,r=i&&Li(Yn(e));return{key:t,first:null,c(){n=we(),r&&r.c(),o=we(),this.h()},l(l){n=we(),r&&r.l(l),o=we(),this.h()},h(){this.first=n},m(l,a){$(l,n,a),r&&r.m(l,a),$(l,o,a),s=!0},p(l,a){e=l,a[0]&1572864&&(i=e[56]&&un(e[56])),i?r?(r.p(Yn(e),a),a[0]&1572864&&G(r,1)):(r=Li(Yn(e)),r.c(),G(r,1),r.m(o.parentNode,o)):r&&(Ze(),J(r,1,1,()=>{r=null}),Fe())},i(l){s||(G(r),s=!0)},o(l){J(r),s=!1},d(l){l&&(W(n),W(o)),r&&r.d(l)}}}function La(t){let e,n,i=t[27]&&Wi(t);return{c(){i&&i.c(),e=we()},l(o){i&&i.l(o),e=we()},m(o,s){i&&i.m(o,s),$(o,e,s),n=!0},p(o,s){o[27]?i?(i.p(o,s),s[0]&134217728&&G(i,1)):(i=Wi(o),i.c(),G(i,1),i.m(e.parentNode,e)):i&&(Ze(),J(i,1,1,()=>{i=null}),Fe())},i(o){n||(G(i),n=!0)},o(o){J(i),n=!1},d(o){o&&W(e),i&&i.d(o)}}}function Ka(t){let e,n;return e=new Do({props:{position:t[0],style:t[12]+(t[4]?`;--xy-minimap-background-color-props:${t[4]}`:""),class:Ce(["svelte-flow__minimap",t[13]]),"data-testid":"svelte-flow__minimap",$$slots:{default:[La]},$$scope:{ctx:t}}}),{c(){ce(e.$$.fragment)},l(i){be(e.$$.fragment,i)},m(i,o){de(e,i,o),n=!0},p(i,o){const s={};o[0]&1&&(s.position=i[0]),o[0]&4112&&(s.style=i[12]+(i[4]?`;--xy-minimap-background-color-props:${i[4]}`:"")),o[0]&8192&&(s.class=Ce(["svelte-flow__minimap",i[13]])),o[0]&536858606|o[1]&536870912&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){n||(G(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){he(e,i)}}}const Xn=t=>t instanceof Function?t:()=>t,Ba=200,Ra=150;function Za(t,e,n){let i,o,s,r,l,a,u,d,h,f,c,y,m,C,g,w,k,E,X,K,H,{position:I="bottom-right"}=e,{ariaLabel:D="Mini map"}=e,{nodeStrokeColor:A="transparent"}=e,{nodeColor:Z=void 0}=e,{nodeClass:v=""}=e,{nodeBorderRadius:B=5}=e,{nodeStrokeWidth:b=2}=e,{bgColor:T=void 0}=e,{maskColor:_=void 0}=e,{maskStrokeColor:P=void 0}=e,{maskStrokeWidth:O=void 0}=e,{width:z=void 0}=e,{height:Y=void 0}=e,{pannable:F=!0}=e,{zoomable:U=!0}=e,{inversePan:p=void 0}=e,{zoomStep:N=void 0}=e,{style:ee=""}=e,{class:ie=""}=e;const{nodes:R,nodeLookup:te,viewport:oe,width:se,height:re,flowId:ue,panZoom:Ee,translateExtent:V}=He();j(t,R,x=>n(19,C=x)),j(t,te,x=>n(20,g=x)),j(t,oe,x=>n(53,w=x)),j(t,se,x=>n(22,E=x)),j(t,re,x=>n(21,k=x)),j(t,ue,x=>n(54,X=x)),j(t,Ee,x=>n(27,K=x)),j(t,V,x=>n(28,H=x));const De=Z===void 0?void 0:Xn(Z),Se=Xn(A),ft=Xn(v),lt=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",st=`svelte-flow__minimap-desc-${X}`;let Ve=i;const rt=()=>a;return t.$$set=x=>{"position"in x&&n(0,I=x.position),"ariaLabel"in x&&n(1,D=x.ariaLabel),"nodeStrokeColor"in x&&n(43,A=x.nodeStrokeColor),"nodeColor"in x&&n(44,Z=x.nodeColor),"nodeClass"in x&&n(45,v=x.nodeClass),"nodeBorderRadius"in x&&n(2,B=x.nodeBorderRadius),"nodeStrokeWidth"in x&&n(3,b=x.nodeStrokeWidth),"bgColor"in x&&n(4,T=x.bgColor),"maskColor"in x&&n(5,_=x.maskColor),"maskStrokeColor"in x&&n(6,P=x.maskStrokeColor),"maskStrokeWidth"in x&&n(7,O=x.maskStrokeWidth),"width"in x&&n(46,z=x.width),"height"in x&&n(47,Y=x.height),"pannable"in x&&n(8,F=x.pannable),"zoomable"in x&&n(9,U=x.zoomable),"inversePan"in x&&n(10,p=x.inversePan),"zoomStep"in x&&n(11,N=x.zoomStep),"style"in x&&n(12,ee=x.style),"class"in x&&n(13,ie=x.class)},t.$$.update=()=>{t.$$.dirty[0]&6291456|t.$$.dirty[1]&4194304&&n(18,i={x:-w.x/w.zoom,y:-w.y/w.zoom,width:E/w.zoom,height:k/w.zoom}),t.$$.dirty[0]&1835008&&n(48,Ve=g.size>0?xi(Ft(g),i):i),t.$$.dirty[1]&32768&&n(17,o=z??Ba),t.$$.dirty[1]&65536&&n(16,s=Y??Ra),t.$$.dirty[0]&131072|t.$$.dirty[1]&131072&&n(52,r=Ve.width/o),t.$$.dirty[0]&65536|t.$$.dirty[1]&131072&&n(51,l=Ve.height/s),t.$$.dirty[1]&3145728&&n(14,a=Math.max(r,l)),t.$$.dirty[0]&147456&&n(50,u=a*o),t.$$.dirty[0]&81920&&n(49,d=a*s),t.$$.dirty[0]&16384&&n(15,h=5*a),t.$$.dirty[0]&32768|t.$$.dirty[1]&655360&&n(26,f=Ve.x-(u-Ve.width)/2-h),t.$$.dirty[0]&32768|t.$$.dirty[1]&393216&&n(25,c=Ve.y-(d-Ve.height)/2-h),t.$$.dirty[0]&32768|t.$$.dirty[1]&524288&&n(24,y=u+h*2),t.$$.dirty[0]&32768|t.$$.dirty[1]&262144&&n(23,m=d+h*2)},[I,D,B,b,T,_,P,O,F,U,p,N,ee,ie,a,h,s,o,i,C,g,k,E,m,y,c,f,K,H,R,te,oe,se,re,ue,Ee,V,De,Se,ft,lt,st,rt,A,Z,v,z,Y,Ve,d,u,l,r,w]}class su extends me{constructor(e){super(),ye(this,e,Za,Ka,ke,{position:0,ariaLabel:1,nodeStrokeColor:43,nodeColor:44,nodeClass:45,nodeBorderRadius:2,nodeStrokeWidth:3,bgColor:4,maskColor:5,maskStrokeColor:6,maskStrokeWidth:7,width:46,height:47,pannable:8,zoomable:9,inversePan:10,zoomStep:11,style:12,class:13},null,[-1,-1])}}export{lu as B,Hs as E,cn as H,sn as M,Do as P,gi as R,ou as S,iu as X,bt as a,su as b,Ce as c,rr as d,nu as e,tu as f,ae as g,Mn as h,no as i,Qa as j,Gn as k,$i as l,$a as m,wn as n,Zn as o,Pl as p,Sn as q,xa as r,eu as s,Ol as t,He as u};

import{s as S,e as v,H as L,b as w,d as g,f as p,w as V,i as u,j as E,x as b,k as y,l as k,n as q,I as D,G as A,p as j,y as N}from"./scheduler.DDVliNtX.js";import{S as B,i as U}from"./index.iWffroUJ.js";function O(t){let e,i,n,f,l,s=t[2]&&C(t),a=t[0].item.itemType=="Offensive Technique"&&M(t);return{c(){e=v("div"),i=v("div"),n=new L(!1),f=w(),s&&s.c(),l=w(),a&&a.c(),this.h()},l(r){e=g(r,"DIV",{class:!0});var d=p(e);i=g(d,"DIV",{class:!0});var o=p(i);n=V(o,!1),f=E(o),s&&s.l(o),o.forEach(u),l=E(d),a&&a.l(d),d.forEach(u),this.h()},h(){n.a=f,b(i,"class","definition svelte-r4aimf"),b(e,"class","definition-container svelte-r4aimf")},m(r,d){y(r,e,d),k(e,i),n.m(t[3],i),k(i,f),s&&s.m(i,null),k(e,l),a&&a.m(e,null)},p(r,d){d&8&&n.p(r[3]),r[2]?s?s.p(r,d):(s=C(r),s.c(),s.m(i,null)):s&&(s.d(1),s=null),r[0].item.itemType=="Offensive Technique"?a?a.p(r,d):(a=M(r),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(r){r&&u(e),s&&s.d(),a&&a.d()}}}function C(t){let e,i,n,f;return{c(){e=v("button"),i=v("i"),this.h()},l(l){e=g(l,"BUTTON",{style:!0});var s=p(e);i=g(s,"I",{class:!0}),p(i).forEach(u),s.forEach(u),this.h()},h(){b(i,"class","svelte-r4aimf"),D(i,"down",!t[1]),D(i,"up",t[1]),A(e,"background","none"),A(e,"border","none")},m(l,s){y(l,e,s),k(e,i),n||(f=j(e,"click",t[5]),n=!0)},p(l,s){s&2&&D(i,"down",!l[1]),s&2&&D(i,"up",l[1])},d(l){l&&u(e),n=!1,f()}}}function M(t){let e,i="How to Defend",n,f;return{c(){e=v("button"),e.textContent=i,this.h()},l(l){e=g(l,"BUTTON",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-osy2uu"&&(e.textContent=i),this.h()},h(){b(e,"class","defend-button svelte-r4aimf")},m(l,s){y(l,e,s),n||(f=j(e,"click",t[8]),n=!0)},p:q,d(l){l&&u(e),n=!1,f()}}}function G(t){let e,i,n,f,l,s,a=H(t[0].item)+"",r,d,o=t[3]&&O(t);return{c(){e=v("main"),i=v("div"),n=v("div"),f=v("div"),l=v("a"),s=new L(!1),d=w(),o&&o.c(),this.h()},l(c){e=g(c,"MAIN",{});var m=p(e);i=g(m,"DIV",{class:!0});var _=p(i);n=g(_,"DIV",{class:!0});var h=p(n);f=g(h,"DIV",{class:!0});var T=p(f);l=g(T,"A",{href:!0});var I=p(l);s=V(I,!1),I.forEach(u),T.forEach(u),d=E(h),o&&o.l(h),h.forEach(u),_.forEach(u),m.forEach(u),this.h()},h(){s.a=null,b(l,"href",r=W(t[0].item)),b(f,"class","label"),b(n,"class","result-details svelte-r4aimf"),b(i,"class","result-item svelte-r4aimf")},m(c,m){y(c,e,m),k(e,i),k(i,n),k(n,f),k(f,l),s.m(a,l),k(n,d),o&&o.m(n,null)},p(c,[m]){m&1&&a!==(a=H(c[0].item)+"")&&s.p(a),m&1&&r!==(r=W(c[0].item))&&b(l,"href",r),c[3]?o?o.p(c,m):(o=O(c),o.c(),o.m(n,null)):o&&(o.d(1),o=null)},i:q,o:q,d(c){c&&u(e),o&&o.d()}}}function W(t){const e={"Defensive Tactic":`/tactic/${t["@id"]}/`,"Offensive Technique":`/offensive-technique/attack/${t["@id"].split(":")[1]}/`,Weakness:`/weakness/${t["@id"]}/`,"Digital Artifact":`/dao/artifact/${t["@id"]}/`,Weakness:`/weakness/cwe/${t["@id"].split(":")[1]}/`,default:`/technique/${t["@id"]}/`};return e[t.itemType]||e.default}function H(t){const e={"Defensive Tactic":`<strong> ${t["rdfs:label"]}</strong>, Tactic`,"Offensive Technique":`<strong>${t["rdfs:label"]}</strong>, Offensive Technique ${t["d3f:attack-id"]}`,Weakness:`<strong>${t["rdfs:label"]}</strong>, Weakness`,"Digital Artifact":`<strong>${t["rdfs:label"]}</strong>, Digital Artifact`,Weakness:`<strong>${t["rdfs:label"]}</strong>, Weakness`,default:`<strong>${t["rdfs:label"]}</strong>, Technique ${t["d3f:d3fend-id"]}`};return e[t.itemType]||e.default}function R(t,e,i){let n,{result:f}=e,{openDefendModal:l}=e,{isLoading:s}=e,a=!1,r=!1;async function d(){s.set(!0),await l(f)}function o(){i(1,a=!a),i(3,n),i(0,f)}function c(_){let h=_["d3f:definition"];if(!h)return null;Array.isArray(h)&&(h=h.join(" ")),h=h.replace(/\(Citation: [^)]*\)/g,"");const T=h.split(" ");return i(2,r=T.length>40),T.length<=40||a?T.join(" "):`${T.slice(0,40).join(" ")}...`}const m=()=>d();return t.$$set=_=>{"result"in _&&i(0,f=_.result),"openDefendModal"in _&&i(6,l=_.openDefendModal),"isLoading"in _&&i(7,s=_.isLoading)},t.$$.update=()=>{t.$$.dirty&1&&i(3,n=c(f.item))},[f,a,r,n,d,o,l,s,m]}class J extends B{constructor(e){super(),U(this,e,R,G,S,{result:0,openDefendModal:6,isLoading:7})}}export{J as S};

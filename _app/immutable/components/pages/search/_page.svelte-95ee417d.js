import{S as J,i as K,s as V,G as ee,k,l as E,m as T,h as p,n as g,ae as A,b as q,H as v,J as te,K as le,L as se,f as D,t as O,w as W,a as w,q as j,e as L,x as Y,c as N,r as B,y as Q,a0 as G,M as H,ab as re,d as X,z as Z,W as ne,C as ae,o as oe,u as S,g as $,V as x}from"../../../chunks/index-360fd992.js";/* empty css                                                           */import{c as z}from"../../../chunks/config-ba448d22.js";import"../../../chunks/navigation-9a455fa3.js";import{T as ie}from"../../../chunks/Title-dc0f8b01.js";import{p as fe}from"../../../chunks/stores-422eb0ed.js";function ue(u){let e,r,s,a,i;const h=u[4].default,f=ee(h,u,u[3],null);return{c(){e=k("a"),r=k("button"),f&&f.c(),this.h()},l(t){e=E(t,"A",{href:!0,title:!0});var o=T(e);r=E(o,"BUTTON",{class:!0});var l=T(r);f&&f.l(l),l.forEach(p),o.forEach(p),this.h()},h(){g(r,"class",s=A(u[2])+" svelte-1lh49rh"),g(e,"href",a=z.prefix+"/ontology/describe/"+u[0]),g(e,"title",u[1])},m(t,o){q(t,e,o),v(e,r),f&&f.m(r,null),i=!0},p(t,[o]){f&&f.p&&(!i||o&8)&&te(f,h,t,t[3],i?se(h,t[3],o,null):le(t[3]),null),(!i||o&4&&s!==(s=A(t[2])+" svelte-1lh49rh"))&&g(r,"class",s),(!i||o&1&&a!==(a=z.prefix+"/ontology/describe/"+t[0]))&&g(e,"href",a),(!i||o&2)&&g(e,"title",t[1])},i(t){i||(D(f,t),i=!0)},o(t){O(f,t),i=!1},d(t){t&&p(e),f&&f.d(t)}}}function ce(u,e,r){let{$$slots:s={},$$scope:a}=e,{entity:i}=e,{title:h=""}=e,{size:f=""}=e;return u.$$set=t=>{"entity"in t&&r(0,i=t.entity),"title"in t&&r(1,h=t.title),"size"in t&&r(2,f=t.size),"$$scope"in t&&r(3,a=t.$$scope)},[i,h,f,a,s]}class _e extends J{constructor(e){super(),K(this,e,ce,ue,V,{entity:0,title:1,size:2})}}function I(u,e,r){const s=u.slice();return s[9]=e[r],s}function M(u,e,r){const s=u.slice();return s[12]=e[r],s[14]=r,s}function U(u){let e,r;return{c(){e=k("h3"),r=j("LOADING")},l(s){e=E(s,"H3",{});var a=T(e);r=B(a,"LOADING"),a.forEach(p)},m(s,a){q(s,e,a),v(e,r)},d(s){s&&p(e)}}}function C(u){let e,r,s,a,i,h,f=u[1],t=[];for(let l=0;l<f.length;l+=1)t[l]=P(I(u,f,l));const o=l=>O(t[l],1,1,()=>{t[l]=null});return{c(){e=k("h3"),r=j("Results for: "),s=j(u[0]),a=w(),i=k("table");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=E(l,"H3",{});var n=T(e);r=B(n,"Results for: "),s=B(n,u[0]),n.forEach(p),a=N(l),i=E(l,"TABLE",{class:!0});var c=T(i);for(let m=0;m<t.length;m+=1)t[m].l(c);c.forEach(p),this.h()},h(){g(i,"class","")},m(l,n){q(l,e,n),v(e,r),v(e,s),q(l,a,n),q(l,i,n);for(let c=0;c<t.length;c+=1)t[c].m(i,null);h=!0},p(l,n){if((!h||n&1)&&S(s,l[0]),n&2){f=l[1];let c;for(c=0;c<f.length;c+=1){const m=I(l,f,c);t[c]?(t[c].p(m,n),D(t[c],1)):(t[c]=P(m),t[c].c(),D(t[c],1),t[c].m(i,null))}for($(),c=f.length;c<t.length;c+=1)o(c);X()}},i(l){if(!h){for(let n=0;n<f.length;n+=1)D(t[n]);h=!0}},o(l){t=t.filter(Boolean);for(let n=0;n<t.length;n+=1)O(t[n]);h=!1},d(l){l&&p(e),l&&p(a),l&&p(i),x(t,l)}}}function he(u){let e=u[9]["@id"]+"",r;return{c(){r=j(e)},l(s){r=B(s,e)},m(s,a){q(s,r,a)},p(s,a){a&2&&e!==(e=s[9]["@id"]+"")&&S(r,e)},d(s){s&&p(r)}}}function F(u){let e,r,s=u[12][0]+"",a,i,h=u[12][1]+"",f;return{c(){e=k("tr"),r=k("td"),a=j(s),i=k("td"),f=j(h),this.h()},l(t){e=E(t,"TR",{});var o=T(e);r=E(o,"TD",{class:!0,colspan:!0});var l=T(r);a=B(l,s),l.forEach(p),i=E(o,"TD",{class:!0});var n=T(i);f=B(n,h),n.forEach(p),o.forEach(p),this.h()},h(){g(r,"class","text-right text-bold predicate svelte-1lgeke3"),g(r,"colspan","2"),g(i,"class","object svelte-1lgeke3")},m(t,o){q(t,e,o),v(e,r),v(r,a),v(e,i),v(i,f)},p(t,o){o&2&&s!==(s=t[12][0]+"")&&S(a,s),o&2&&h!==(h=t[12][1]+"")&&S(f,h)},d(t){t&&p(e)}}}function P(u){let e,r,s,a,i,h,f;a=new _e({props:{size:"small",entity:u[9]["@id"],color:"#ccc",$$slots:{default:[he]},$$scope:{ctx:u}}});let t=Object.entries(u[9]),o=[];for(let l=0;l<t.length;l+=1)o[l]=F(M(u,t,l));return{c(){e=k("tbody"),r=k("tr"),s=k("td"),W(a.$$.fragment),i=w();for(let l=0;l<o.length;l+=1)o[l].c();h=w(),this.h()},l(l){e=E(l,"TBODY",{class:!0});var n=T(e);r=E(n,"TR",{});var c=T(r);s=E(c,"TD",{colspan:!0,class:!0});var m=T(s);Y(a.$$.fragment,m),m.forEach(p),c.forEach(p),i=N(n);for(let d=0;d<o.length;d+=1)o[d].l(n);h=N(n),n.forEach(p),this.h()},h(){g(s,"colspan","3"),g(s,"class","font-medium subject svelte-1lgeke3"),g(e,"class","font-small svelte-1lgeke3")},m(l,n){q(l,e,n),v(e,r),v(r,s),Q(a,s,null),v(e,i);for(let c=0;c<o.length;c+=1)o[c].m(e,null);v(e,h),f=!0},p(l,n){const c={};if(n&2&&(c.entity=l[9]["@id"]),n&32770&&(c.$$scope={dirty:n,ctx:l}),a.$set(c),n&2){t=Object.entries(l[9]);let m;for(m=0;m<t.length;m+=1){const d=M(l,t,m);o[m]?o[m].p(d,n):(o[m]=F(d),o[m].c(),o[m].m(e,h))}for(;m<o.length;m+=1)o[m].d(1);o.length=t.length}},i(l){f||(D(a.$$.fragment,l),f=!0)},o(l){O(a.$$.fragment,l),f=!1},d(l){l&&p(e),Z(a),x(o,l)}}}function me(u){let e,r,s,a,i,h,f,t,o,l,n,c,m;e=new ie({props:{title:"Search"}});let d=u[2]&&U(),b=u[1]&&C(u);return{c(){W(e.$$.fragment),r=w(),s=k("form"),a=k("input"),i=w(),h=k("button"),f=j("Search"),t=w(),d&&d.c(),o=w(),b&&b.c(),l=L(),this.h()},l(_){Y(e.$$.fragment,_),r=N(_),s=E(_,"FORM",{});var y=T(s);a=E(y,"INPUT",{class:!0,type:!0,id:!0,name:!0}),i=N(y),h=E(y,"BUTTON",{type:!0,class:!0});var R=T(h);f=B(R,"Search"),R.forEach(p),y.forEach(p),t=N(_),d&&d.l(_),o=N(_),b&&b.l(_),l=L(),this.h()},h(){g(a,"class","searchbar svelte-1lgeke3"),g(a,"type","text"),g(a,"id","query"),g(a,"name","query"),g(h,"type","submit"),g(h,"class","svelte-1lgeke3")},m(_,y){Q(e,_,y),q(_,r,y),q(_,s,y),v(s,a),G(a,u[0]),v(s,i),v(s,h),v(h,f),q(_,t,y),d&&d.m(_,y),q(_,o,y),b&&b.m(_,y),q(_,l,y),n=!0,c||(m=[H(a,"input",u[5]),H(s,"submit",re(u[3]))],c=!0)},p(_,[y]){y&1&&a.value!==_[0]&&G(a,_[0]),_[2]?d||(d=U(),d.c(),d.m(o.parentNode,o)):d&&(d.d(1),d=null),_[1]?b?(b.p(_,y),y&2&&D(b,1)):(b=C(_),b.c(),D(b,1),b.m(l.parentNode,l)):b&&($(),O(b,1,1,()=>{b=null}),X())},i(_){n||(D(e.$$.fragment,_),D(b),n=!0)},o(_){O(e.$$.fragment,_),O(b),n=!1},d(_){Z(e,_),_&&p(r),_&&p(s),_&&p(t),d&&d.d(_),_&&p(o),b&&b.d(_),_&&p(l),c=!1,ne(m)}}}function pe(u,e,r){let s;ae(u,fe,n=>r(7,s=n));let{data:a}=e,i="",h,f;async function t(n){let c=`${z.backend}/ontology/search/${n}`;return await(await fetch(c)).json()}async function o(){r(2,f=!0);const n=await t(i);r(1,h=n["@graph"]),n["@context"],r(2,f=!1),window.history.pushState("",`D3FEND search for: ${i}`,`/search/?query=${i}`)}oe(async()=>{console.dir(s),(s.query.query||s.query.q)&&(r(0,i=s.query.query||s.query.q),o())});function l(){i=this.value,r(0,i)}return u.$$set=n=>{"data"in n&&r(4,a=n.data)},[i,h,f,o,a,l]}class Ee extends J{constructor(e){super(),K(this,e,pe,me,V,{data:4})}}export{Ee as default};

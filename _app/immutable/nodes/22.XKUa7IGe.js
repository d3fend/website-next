const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/jsonld.CYnguqZs.js","../chunks/_commonjsHelpers.C4iS2aBk.js","../chunks/___vite-browser-external_commonjs-proxy.B2SwpVhP.js"])))=>i.map(i=>d[i]);
import{s as el}from"../chunks/sortBy.ChsTRid8.js";import{s as it,c as Vt,u as zt,g as Ht,a as xt,am as nm,I as Dl,e as Y,d as J,f as Ce,i as v,r as ee,k as C,o as tt,ao as im,E as as,J as Mt,p as Re,b as ie,j as ae,as as Dt,t as q,h as M,l as V,P as ye,a4 as Wt,ar as Dn,m as we,x as ht,W as Fr,n as Me,v as Ke,L as wt,V as pr,D as gt,O as mt,Y as ss,F as ln,N as $e,a3 as ai,w as hn,al as Oo,a0 as tl,Q as Bo,R as Lo,ap as Uo,ak as am,aq as sm}from"../chunks/scheduler.xR-uXgLO.js";import{S as yt,i as Et,t as ue,a as de,g as ut,e as ft,c as Be,b as Le,m as Ue,d as je,f as _r,p as jo}from"../chunks/index.BpaDVXPB.js";import{d as lm,w as yr}from"../chunks/index.iaz6iIjv.js";import{e as Ge,u as qo,o as Mo}from"../chunks/each.BfH-wj2E.js";import{c as ls,a as oa}from"../chunks/_commonjsHelpers.C4iS2aBk.js";import{s as Vo}from"../chunks/schema.HaQr_DHp.js";import{p as om}from"../chunks/stores.Kw6qWV-W.js";import{A as os}from"../chunks/Alert.BOpypHFQ.js";import{T as jn,b as Oe,a as bh,G as Al,m as um,d as Xa,o as fm}from"../chunks/lib._70Mlgse.js";import{c as cm,k as dm,b as zo,R as ja,u as Ii,X as hm,d as Ho,e as xo,i as pm,g as _m,f as Xo,n as Go,h as $o,j as mm,p as vm,l as gm,r as bm,H as bt,P as pt,m as wm,E as ym,o as wh,q as rl,S as Em,C as km,B as Dm,a as Am,M as Cm}from"../chunks/style.CaV8822o.js";import{r as Tm}from"../chunks/___vite-browser-external_commonjs-proxy.B2SwpVhP.js";import{_ as Nm}from"../chunks/preload-helper.D6kgxu3v.js";import{G as An}from"../chunks/_Graph.B1ixJej4.js";import{t as Ga,T as yh}from"../chunks/ToggleBar.ChYzQEkc.js";import{s as Qo}from"../chunks/index.BxqCZUUx.js";import{f as Ai}from"../chunks/utils.xEKteSAW.js";import{f as Sm,c as Im,L as Pm}from"../chunks/Loading.B5hKdNm6.js";import{J as Wo}from"../chunks/JSONCrush.BlUS0oeb.js";import{T as Rm}from"../chunks/Title.lz_tL8Gl.js";function Cl(i,e,t=[]){const n=el(i,r=>r["rdfs:label"]);for(const r of n)t.push({...r,rootLabel:e}),r.children&&Cl(r.children,e,t);return t}function Tl(i,e,t){for(const n of t)if(e.test(i[n]))return!0;return!1}function Fm(i,e,t){if(!e)return i||[];const n=e?new RegExp(e,"i"):null,r=s=>n?Tl(s,n,t):!0;return i.filter(r)}function Om(i,e,t){if(!e)return i||[];const n=e?new RegExp(e,"i"):null,r=a=>n?Tl(a,n,t):!0;return i.reduce((a,l)=>(a.push({...l,children:l.children.filter(r)}),a),[]).filter(a=>a.children.length>0)}function Bm(i,e,t){const n=[];function r(s){if(Tl(s,e,t)&&n.push(s),s.children)for(const a of s.children)r(a)}for(const s of i)r(s);return n}function Lm(i,e,t){if(!e)return i||[];const n=new RegExp(e,"i");return Bm(i,n,t)}function Yo(i,e){return[...new Map(i.map(t=>[t[e],t])).values()]}function Um(i){const e=i.reduce((r,s)=>(r[s["@id"]]=s,r),{});return i.reduce((r,s)=>(s.hasOwnProperty("rdfs:hasSubClass")&&(s.children=s["rdfs:hasSubClass"].map(a=>e[a["@id"]]),r.push(s)),r),[]).filter(r=>r["rdfs:subClassOf"].some(s=>s["@id"]==="d3f:DigitalEvent"))}function jm(i){const e=i.reduce((n,r)=>(n[r["@id"]]=r,n),{});return i.forEach(n=>{const r=n["rdfs:subPropertyOf"];if(r)for(const s of r)e[s["@id"]]&&(e[s["@id"]].children?e[s["@id"]].children.push(n):e[s["@id"]].children=[n])}),{associated:i.filter(n=>n["rdfs:subPropertyOf"].some(r=>r["@id"]==="d3f:associated-with"))}}async function qm({fetch:i}){const e=["/api/offensive-technique/all.json","/api/dao/artifacts.json","/api/taxonomies/d3f:DigitalEvent.json","/api/weakness/all.json","/api/ontology/properties/object/all.json"],[{value:{["@graph"]:t}},{value:{["@graph"]:n}},{value:{["@graph"]:r}},{value:{["@graph"]:s}},{value:{["@graph"]:a}}]=await Promise.allSettled(e.map(d=>i(d).then(c=>c.json()))),l=el(Yo(t,"rdfs:label"),d=>d["rdfs:label"]),u=Um(r).map(d=>({...d,children:Yo(Cl(d.children,d["rdfs:label"]),"rdfs:label")})),f=el(s,d=>d["rdfs:label"]),h=jm(a);return{attack:l,dao:n,events:u,weaknesses:f,properties:h}}const bk=Object.freeze(Object.defineProperty({__proto__:null,load:qm},Symbol.toStringTag,{value:"Module"}));function Mm(i){let e;const t=i[7].default,n=Vt(t,i,i[6],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,[s]){n&&n.p&&(!e||s&64)&&zt(n,t,r,r[6],e?xt(t,r[6],s,null):Ht(r[6]),null)},i(r){e||(ue(n,r),e=!0)},o(r){de(n,r),e=!1},d(r){n&&n.d(r)}}}function Vm(i,e,t){let{$$slots:n={},$$scope:r}=e,{initialNodes:s=void 0}=e,{initialEdges:a=void 0}=e,{initialWidth:l=void 0}=e,{initialHeight:o=void 0}=e,{fitView:u=void 0}=e,{nodeOrigin:f=void 0}=e;const h=cm({nodes:s,edges:a,width:l,height:o,nodeOrigin:f,fitView:u});return nm(dm,{getStore:()=>h}),Dl(()=>{h.reset()}),i.$$set=d=>{"initialNodes"in d&&t(0,s=d.initialNodes),"initialEdges"in d&&t(1,a=d.initialEdges),"initialWidth"in d&&t(2,l=d.initialWidth),"initialHeight"in d&&t(3,o=d.initialHeight),"fitView"in d&&t(4,u=d.fitView),"nodeOrigin"in d&&t(5,f=d.nodeOrigin),"$$scope"in d&&t(6,r=d.$$scope)},[s,a,l,o,u,f,r,n]}class zm extends yt{constructor(e){super(),Et(this,e,Vm,Mm,it,{initialNodes:0,initialEdges:1,initialWidth:2,initialHeight:3,fitView:4,nodeOrigin:5})}}function Hm(i){let e,t,n;const r=i[33].default,s=Vt(r,i,i[32],null);return{c(){e=Y("div"),s&&s.c(),this.h()},l(a){e=J(a,"DIV",{class:!0,style:!0});var l=Ce(e);s&&s.l(l),l.forEach(v),this.h()},h(){ee(e,"class",t=zo(["svelte-flow__resize-control","nodrag",...i[4],i[0],i[1]])),ee(e,"style",i[3])},m(a,l){C(a,e,l),s&&s.m(e,null),i[34](e),n=!0},p(a,l){s&&s.p&&(!n||l[1]&2)&&zt(s,r,a,a[32],n?xt(r,a[32],l,null):Ht(a[32]),null),(!n||l[0]&19&&t!==(t=zo(["svelte-flow__resize-control","nodrag",...a[4],a[0],a[1]])))&&ee(e,"class",t),(!n||l[0]&8)&&ee(e,"style",a[3])},i(a){n||(ue(s,a),n=!0)},o(a){de(s,a),n=!1},d(a){a&&v(e),s&&s.d(a),i[34](null)}}}function xm(i,e,t){let n,r,s,a,l,o,u,f,h,d,c,p,_,m,y,O,{$$slots:T={},$$scope:N}=e,{nodeId:g=void 0}=e,{position:k=void 0}=e,{variant:w=ja.Handle}=e,{color:R=void 0}=e,{minWidth:S=10}=e,{minHeight:B=10}=e,{maxWidth:D=Number.MAX_VALUE}=e,{maxHeight:L=Number.MAX_VALUE}=e,{keepAspectRatio:A=!1}=e,{shouldResize:I=void 0}=e,{onResizeStart:x=void 0}=e,{onResize:j=void 0}=e,{onResizeEnd:re=void 0}=e,{style:Z=""}=e,{class:$=""}=e;const{nodeLookup:G,snapGrid:X,viewport:oe,nodes:Q,nodeOrigin:le}=Ii();tt(i,G,ve=>t(37,_=ve)),tt(i,X,ve=>t(39,y=ve)),tt(i,oe,ve=>t(40,O=ve)),tt(i,Q,ve=>t(36,p=ve)),tt(i,le,ve=>t(38,m=ve));const Ve=im("svelteflow__node_id");let ze,ke=null;as(()=>(ze&&t(23,ke=hm({domNode:ze,nodeId:l,getStoreItems:()=>({nodeLookup:_,transform:[O.x,O.y,O.zoom],snapGrid:y??void 0,snapToGrid:!!y,nodeOrigin:m}),onChange:(ve,he)=>{var ot,He;const Fe=(ot=_.get(l))==null?void 0:ot.internals.userNode;if(Fe){ve.x!==void 0&&ve.y!==void 0&&(Fe.position={x:ve.x,y:ve.y}),ve.width!==void 0&&ve.height!==void 0&&(Fe.width=ve.width,Fe.height=ve.height);for(const fe of he){const Te=(He=_.get(fe.id))==null?void 0:He.internals.userNode;Te&&(Te.position=fe.position)}Q.set(p)}}})),()=>{ke==null||ke.destroy()}));function Ie(ve){Mt[ve?"unshift":"push"](()=>{ze=ve,t(2,ze)})}return i.$$set=ve=>{"nodeId"in ve&&t(10,g=ve.nodeId),"position"in ve&&t(11,k=ve.position),"variant"in ve&&t(0,w=ve.variant),"color"in ve&&t(12,R=ve.color),"minWidth"in ve&&t(13,S=ve.minWidth),"minHeight"in ve&&t(14,B=ve.minHeight),"maxWidth"in ve&&t(15,D=ve.maxWidth),"maxHeight"in ve&&t(16,L=ve.maxHeight),"keepAspectRatio"in ve&&t(17,A=ve.keepAspectRatio),"shouldResize"in ve&&t(18,I=ve.shouldResize),"onResizeStart"in ve&&t(19,x=ve.onResizeStart),"onResize"in ve&&t(20,j=ve.onResize),"onResizeEnd"in ve&&t(21,re=ve.onResizeEnd),"style"in ve&&t(22,Z=ve.style),"class"in ve&&t(1,$=ve.class),"$$scope"in ve&&t(32,N=ve.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&8192&&t(27,n=S??10),i.$$.dirty[0]&16384&&t(26,r=B??10),i.$$.dirty[0]&32768&&t(25,s=D??Number.MAX_VALUE),i.$$.dirty[0]&65536&&t(24,a=L??Number.MAX_VALUE),i.$$.dirty[0]&1024&&(l=typeof g=="string"?g:Ve),i.$$.dirty[0]&1&&t(31,o=w===ja.Line?"right":"bottom-right"),i.$$.dirty[0]&2048|i.$$.dirty[1]&1&&t(28,u=k??o),i.$$.dirty[0]&268435456&&t(4,f=u.split("-")),i.$$.dirty[0]&1&&t(30,h=w===ja.Line?"border-color":"background-color"),i.$$.dirty[0]&4194304&&t(29,d=Z??""),i.$$.dirty[0]&1610616832&&t(3,c=R?`${d} ${h}: ${R};`:d),i.$$.dirty[0]&532545536&&(ke==null||ke.update({controlPosition:u,boundaries:{minWidth:n,minHeight:r,maxWidth:s,maxHeight:a},keepAspectRatio:!!A,onResizeStart:x,onResize:j,onResizeEnd:re,shouldResize:I}))},[w,$,ze,c,f,G,X,oe,Q,le,g,k,R,S,B,D,L,A,I,x,j,re,Z,ke,a,s,r,n,u,d,h,o,N,T,Ie]}class Eh extends yt{constructor(e){super(),Et(this,e,xm,Hm,it,{nodeId:10,position:11,variant:0,color:12,minWidth:13,minHeight:14,maxWidth:15,maxHeight:16,keepAspectRatio:17,shouldResize:18,onResizeStart:19,onResize:20,onResizeEnd:21,style:22,class:1},null,[-1,-1])}}function Jo(i,e,t){const n=i.slice();return n[20]=e[t],n}function Ko(i,e,t){const n=i.slice();return n[20]=e[t],n}function Zo(i){let e=[],t=new Map,n,r=[],s=new Map,a,l,o=Ge(Ho);const u=d=>d[20];for(let d=0;d<o.length;d+=1){let c=Ko(i,o,d),p=u(c);t.set(p,e[d]=eu(p,c))}let f=Ge(xo);const h=d=>d[20];for(let d=0;d<f.length;d+=1){let c=Jo(i,f,d),p=h(c);s.set(p,r[d]=tu(p,c))}return{c(){for(let d=0;d<e.length;d+=1)e[d].c();n=ie();for(let d=0;d<r.length;d+=1)r[d].c();a=Re()},l(d){for(let c=0;c<e.length;c+=1)e[c].l(d);n=ae(d);for(let c=0;c<r.length;c+=1)r[c].l(d);a=Re()},m(d,c){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(d,c);C(d,n,c);for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(d,c);C(d,a,c),l=!0},p(d,c){c&65521&&(o=Ge(Ho),ut(),e=qo(e,c,u,1,d,o,t,n.parentNode,Mo,eu,n,Ko),ft()),c&65485&&(f=Ge(xo),ut(),r=qo(r,c,h,1,d,f,s,a.parentNode,Mo,tu,a,Jo),ft())},i(d){if(!l){for(let c=0;c<o.length;c+=1)ue(e[c]);for(let c=0;c<f.length;c+=1)ue(r[c]);l=!0}},o(d){for(let c=0;c<e.length;c+=1)de(e[c]);for(let c=0;c<r.length;c+=1)de(r[c]);l=!1},d(d){d&&(v(n),v(a));for(let c=0;c<e.length;c+=1)e[c].d(d);for(let c=0;c<r.length;c+=1)r[c].d(d)}}}function eu(i,e){let t,n,r;return n=new Eh({props:{class:e[4],style:e[5],nodeId:e[0],position:e[20],variant:ja.Line,color:e[6],minWidth:e[12],minHeight:e[13],maxWidth:e[14],maxHeight:e[15],onResizeStart:e[9],keepAspectRatio:e[7],shouldResize:e[8],onResize:e[10],onResizeEnd:e[11]}}),{key:i,first:null,c(){t=Re(),Be(n.$$.fragment),this.h()},l(s){t=Re(),Le(n.$$.fragment,s),this.h()},h(){this.first=t},m(s,a){C(s,t,a),Ue(n,s,a),r=!0},p(s,a){e=s;const l={};a&16&&(l.class=e[4]),a&32&&(l.style=e[5]),a&1&&(l.nodeId=e[0]),a&64&&(l.color=e[6]),a&512&&(l.onResizeStart=e[9]),a&128&&(l.keepAspectRatio=e[7]),a&256&&(l.shouldResize=e[8]),a&1024&&(l.onResize=e[10]),a&2048&&(l.onResizeEnd=e[11]),n.$set(l)},i(s){r||(ue(n.$$.fragment,s),r=!0)},o(s){de(n.$$.fragment,s),r=!1},d(s){s&&v(t),je(n,s)}}}function tu(i,e){let t,n,r;return n=new Eh({props:{class:e[2],style:e[3],nodeId:e[0],position:e[20],color:e[6],minWidth:e[12],minHeight:e[13],maxWidth:e[14],maxHeight:e[15],onResizeStart:e[9],keepAspectRatio:e[7],shouldResize:e[8],onResize:e[10],onResizeEnd:e[11]}}),{key:i,first:null,c(){t=Re(),Be(n.$$.fragment),this.h()},l(s){t=Re(),Le(n.$$.fragment,s),this.h()},h(){this.first=t},m(s,a){C(s,t,a),Ue(n,s,a),r=!0},p(s,a){e=s;const l={};a&4&&(l.class=e[2]),a&8&&(l.style=e[3]),a&1&&(l.nodeId=e[0]),a&64&&(l.color=e[6]),a&512&&(l.onResizeStart=e[9]),a&128&&(l.keepAspectRatio=e[7]),a&256&&(l.shouldResize=e[8]),a&1024&&(l.onResize=e[10]),a&2048&&(l.onResizeEnd=e[11]),n.$set(l)},i(s){r||(ue(n.$$.fragment,s),r=!0)},o(s){de(n.$$.fragment,s),r=!1},d(s){s&&v(t),je(n,s)}}}function Xm(i){let e,t,n=i[1]&&Zo(i);return{c(){n&&n.c(),e=Re()},l(r){n&&n.l(r),e=Re()},m(r,s){n&&n.m(r,s),C(r,e,s),t=!0},p(r,[s]){r[1]?n?(n.p(r,s),s&2&&ue(n,1)):(n=Zo(r),n.c(),ue(n,1),n.m(e.parentNode,e)):n&&(ut(),de(n,1,1,()=>{n=null}),ft())},i(r){t||(ue(n),t=!0)},o(r){de(n),t=!1},d(r){r&&v(e),n&&n.d(r)}}}function Gm(i,e,t){let{nodeId:n=void 0}=e,{isVisible:r=!0}=e,{handleClass:s=void 0}=e,{handleStyle:a=void 0}=e,{lineClass:l=void 0}=e,{lineStyle:o=void 0}=e,{color:u=void 0}=e,{minWidth:f=10}=e,{minHeight:h=10}=e,{maxWidth:d=Number.MAX_VALUE}=e,{maxHeight:c=Number.MAX_VALUE}=e,{keepAspectRatio:p=!1}=e,{shouldResize:_=void 0}=e,{onResizeStart:m=void 0}=e,{onResize:y=void 0}=e,{onResizeEnd:O=void 0}=e,T=f||10,N=h||10,g=d||Number.MAX_VALUE,k=c||Number.MAX_VALUE;return i.$$set=w=>{"nodeId"in w&&t(0,n=w.nodeId),"isVisible"in w&&t(1,r=w.isVisible),"handleClass"in w&&t(2,s=w.handleClass),"handleStyle"in w&&t(3,a=w.handleStyle),"lineClass"in w&&t(4,l=w.lineClass),"lineStyle"in w&&t(5,o=w.lineStyle),"color"in w&&t(6,u=w.color),"minWidth"in w&&t(16,f=w.minWidth),"minHeight"in w&&t(17,h=w.minHeight),"maxWidth"in w&&t(18,d=w.maxWidth),"maxHeight"in w&&t(19,c=w.maxHeight),"keepAspectRatio"in w&&t(7,p=w.keepAspectRatio),"shouldResize"in w&&t(8,_=w.shouldResize),"onResizeStart"in w&&t(9,m=w.onResizeStart),"onResize"in w&&t(10,y=w.onResize),"onResizeEnd"in w&&t(11,O=w.onResizeEnd)},[n,r,s,a,l,o,u,p,_,m,y,O,T,N,g,k,f,h,d,c]}class Mn extends yt{constructor(e){super(),Et(this,e,Gm,Xm,it,{nodeId:0,isVisible:1,handleClass:2,handleStyle:3,lineClass:4,lineStyle:5,color:6,minWidth:16,minHeight:17,maxWidth:18,maxHeight:19,keepAspectRatio:7,shouldResize:8,onResizeStart:9,onResize:10,onResizeEnd:11})}}const ru=i=>pm(i);function $m(){const{zoomIn:i,zoomOut:e,fitView:t,onbeforedelete:n,snapGrid:r,viewport:s,width:a,height:l,minZoom:o,maxZoom:u,panZoom:f,nodes:h,edges:d,domNode:c,nodeLookup:p,edgeLookup:_,nodeOrigin:m}=Ii(),y=N=>{var S,B;const g=Dt(p),k=ru(N)?N:g.get(N.id),w=k.parentId?gm(k.position,k.measured,k.parentId,g,Dt(m)):k.position,R={id:k.id,position:w,width:((S=k.measured)==null?void 0:S.width)??k.width,height:((B=k.measured)==null?void 0:B.height)??k.height,data:k.data};return Go(R)},O=(N,g,k={replace:!1})=>{var S;const w=(S=Dt(p).get(N))==null?void 0:S.internals.userNode;if(!w)return;const R=typeof g=="function"?g(w):g;k.replace?h.update(B=>B.map(D=>D.id===N?ru(R)?R:{...D,...R}:D)):(Object.assign(w,R),h.update(B=>B))},T=N=>Dt(p).get(N);return{zoomIn:i,zoomOut:e,getInternalNode:T,getNode:N=>{var g;return(g=T(N))==null?void 0:g.internals.userNode},getNodes:N=>N===void 0?Dt(h):nu(Dt(p),N),getEdge:N=>Dt(_).get(N),getEdges:N=>N===void 0?Dt(d):nu(Dt(_),N),setZoom:(N,g)=>{const k=Dt(f);return k?k.scaleTo(N,{duration:g==null?void 0:g.duration}):Promise.resolve(!1)},getZoom:()=>Dt(s).zoom,setViewport:async(N,g)=>{const k=Dt(s),w=Dt(f);return w?(await w.setViewport({x:N.x??k.x,y:N.y??k.y,zoom:N.zoom??k.zoom},{duration:g==null?void 0:g.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>Dt(s),setCenter:async(N,g,k)=>{const w=typeof(k==null?void 0:k.zoom)<"u"?k.zoom:Dt(u),R=Dt(f);return R?(await R.setViewport({x:Dt(a)/2-N*w,y:Dt(l)/2-g*w,zoom:w},{duration:k==null?void 0:k.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:t,fitBounds:async(N,g)=>{const k=Dt(f);if(!k)return Promise.resolve(!1);const w=_m(N,Dt(a),Dt(l),Dt(o),Dt(u),(g==null?void 0:g.padding)??.1);return await k.setViewport(w,{duration:g==null?void 0:g.duration}),Promise.resolve(!0)},getIntersectingNodes:(N,g=!0,k)=>{const w=Xo(N),R=w?N:y(N);return R?(k||Dt(h)).filter(S=>{const B=Dt(p).get(S.id);if(!B||!w&&S.id===N.id)return!1;const D=Go(B),L=$o(D,R);return g&&L>0||L>=R.width*R.height}):[]},isNodeIntersecting:(N,g,k=!0)=>{const R=Xo(N)?N:y(N);if(!R)return!1;const S=$o(R,g);return k&&S>0||S>=R.width*R.height},deleteElements:async({nodes:N=[],edges:g=[]})=>{const{nodes:k,edges:w}=await mm({nodesToRemove:N,edgesToRemove:g,nodes:Dt(h),edges:Dt(d),onBeforeDelete:Dt(n)});return k&&h.update(R=>R.filter(S=>!k.some(({id:B})=>B===S.id))),w&&d.update(R=>R.filter(S=>!w.some(({id:B})=>B===S.id))),{deletedNodes:k,deletedEdges:w}},screenToFlowPosition:(N,g={snapToGrid:!0})=>{const k=Dt(c);if(!k)return N;const w=g.snapToGrid?Dt(r):!1,{x:R,y:S,zoom:B}=Dt(s),{x:D,y:L}=k.getBoundingClientRect(),A={x:N.x-D,y:N.y-L};return vm(A,[R,S,B],w!==null,w||[1,1])},flowToScreenPosition:N=>{const g=Dt(c);if(!g)return N;const{x:k,y:w,zoom:R}=Dt(s),{x:S,y:B}=g.getBoundingClientRect(),D=bm(N,[k,w,R]);return{x:D.x+S,y:D.y+B}},toObject:()=>({nodes:Dt(h).map(N=>({...N,position:{...N.position},data:{...N.data}})),edges:Dt(d).map(N=>({...N})),viewport:{...Dt(s)}}),updateNode:O,updateNodeData:(N,g,k)=>{var S;const w=(S=Dt(p).get(N))==null?void 0:S.internals.userNode;if(!w)return;const R=typeof g=="function"?g(w):g;w.data=k!=null&&k.replace?R:{...w.data,...R},h.update(B=>B)},viewport:s}}function nu(i,e){var n;const t=[];for(const r of e){const s=i.get(r);if(s){const a="internals"in s?(n=s.internals)==null?void 0:n.userNode:s;t.push(a)}}return t}function Cn(){const{connection:i}=Ii();return i}function Gr(){const{nodes:i}=Ii();return i}function $r(){const{edges:i}=Ii();return i}function iu(i){const{nodeLookup:e,nodes:t}=Ii();return lm([e,t],([n])=>n.get(i))}let kh=yr([]),Dh=yr([]),Ah=yr([]),Ch=yr([]),Th=yr([]),Nh=yr([]);function Qm(){const{subscribe:i,set:e,update:t}=yr();return{subscribe:i,update:t,add:n=>e(n),clear:()=>e()}}const Pr=Qm();var nl={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(i,e){(function(t,n){n(e)})(ls,function(t){function n(){for(var pe=arguments.length,se=Array(pe),ge=0;ge<pe;ge++)se[ge]=arguments[ge];if(se.length>1){se[0]=se[0].slice(0,-1);for(var Se=se.length-1,Ne=1;Ne<Se;++Ne)se[Ne]=se[Ne].slice(1,-1);return se[Se]=se[Se].slice(1),se.join("")}else return se[0]}function r(pe){return"(?:"+pe+")"}function s(pe){return pe===void 0?"undefined":pe===null?"null":Object.prototype.toString.call(pe).split(" ").pop().split("]").shift().toLowerCase()}function a(pe){return pe.toUpperCase()}function l(pe){return pe!=null?pe instanceof Array?pe:typeof pe.length!="number"||pe.split||pe.setInterval||pe.call?[pe]:Array.prototype.slice.call(pe):[]}function o(pe,se){var ge=pe;if(se)for(var Se in se)ge[Se]=se[Se];return ge}function u(pe){var se="[A-Za-z]",ge="[0-9]",Se=n(ge,"[A-Fa-f]"),Ne=r(r("%[EFef]"+Se+"%"+Se+Se+"%"+Se+Se)+"|"+r("%[89A-Fa-f]"+Se+"%"+Se+Se)+"|"+r("%"+Se+Se)),rt="[\\:\\/\\?\\#\\[\\]\\@]",Ye="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",st=n(rt,Ye),Bt=pe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",er=pe?"[\\uE000-\\uF8FF]":"[]",kt=n(se,ge,"[\\-\\.\\_\\~]",Bt);r(se+n(se,ge,"[\\+\\-\\.]")+"*"),r(r(Ne+"|"+n(kt,Ye,"[\\:]"))+"*");var Nt=r(r("25[0-5]")+"|"+r("2[0-4]"+ge)+"|"+r("1"+ge+ge)+"|"+r("0?[1-9]"+ge)+"|0?0?"+ge),Xt=r(Nt+"\\."+Nt+"\\."+Nt+"\\."+Nt),ct=r(Se+"{1,4}"),St=r(r(ct+"\\:"+ct)+"|"+Xt),Gt=r(r(ct+"\\:")+"{6}"+St),Lt=r("\\:\\:"+r(ct+"\\:")+"{5}"+St),Wr=r(r(ct)+"?\\:\\:"+r(ct+"\\:")+"{4}"+St),gr=r(r(r(ct+"\\:")+"{0,1}"+ct)+"?\\:\\:"+r(ct+"\\:")+"{3}"+St),br=r(r(r(ct+"\\:")+"{0,2}"+ct)+"?\\:\\:"+r(ct+"\\:")+"{2}"+St),Pn=r(r(r(ct+"\\:")+"{0,3}"+ct)+"?\\:\\:"+ct+"\\:"+St),pn=r(r(r(ct+"\\:")+"{0,4}"+ct)+"?\\:\\:"+St),kr=r(r(r(ct+"\\:")+"{0,5}"+ct)+"?\\:\\:"+ct),Br=r(r(r(ct+"\\:")+"{0,6}"+ct)+"?\\:\\:"),_n=r([Gt,Lt,Wr,gr,br,Pn,pn,kr,Br].join("|")),Dr=r(r(kt+"|"+Ne)+"+");r("[vV]"+Se+"+\\."+n(kt,Ye,"[\\:]")+"+"),r(r(Ne+"|"+n(kt,Ye))+"*");var Yr=r(Ne+"|"+n(kt,Ye,"[\\:\\@]"));return r(r(Ne+"|"+n(kt,Ye,"[\\@]"))+"+"),r(r(Yr+"|"+n("[\\/\\?]",er))+"*"),{NOT_SCHEME:new RegExp(n("[^]",se,ge,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(n("[^\\%\\:]",kt,Ye),"g"),NOT_HOST:new RegExp(n("[^\\%\\[\\]\\:]",kt,Ye),"g"),NOT_PATH:new RegExp(n("[^\\%\\/\\:\\@]",kt,Ye),"g"),NOT_PATH_NOSCHEME:new RegExp(n("[^\\%\\/\\@]",kt,Ye),"g"),NOT_QUERY:new RegExp(n("[^\\%]",kt,Ye,"[\\:\\@\\/\\?]",er),"g"),NOT_FRAGMENT:new RegExp(n("[^\\%]",kt,Ye,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(n("[^]",kt,Ye),"g"),UNRESERVED:new RegExp(kt,"g"),OTHER_CHARS:new RegExp(n("[^\\%]",kt,st),"g"),PCT_ENCODED:new RegExp(Ne,"g"),IPV4ADDRESS:new RegExp("^("+Xt+")$"),IPV6ADDRESS:new RegExp("^\\[?("+_n+")"+r(r("\\%25|\\%(?!"+Se+"{2})")+"("+Dr+")")+"?\\]?$")}}var f=u(!1),h=u(!0),d=function(){function pe(se,ge){var Se=[],Ne=!0,rt=!1,Ye=void 0;try{for(var st=se[Symbol.iterator](),Bt;!(Ne=(Bt=st.next()).done)&&(Se.push(Bt.value),!(ge&&Se.length===ge));Ne=!0);}catch(er){rt=!0,Ye=er}finally{try{!Ne&&st.return&&st.return()}finally{if(rt)throw Ye}}return Se}return function(se,ge){if(Array.isArray(se))return se;if(Symbol.iterator in Object(se))return pe(se,ge);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(pe){if(Array.isArray(pe)){for(var se=0,ge=Array(pe.length);se<pe.length;se++)ge[se]=pe[se];return ge}else return Array.from(pe)},p=2147483647,_=36,m=1,y=26,O=38,T=700,N=72,g=128,k="-",w=/^xn--/,R=/[^\0-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,B={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=_-m,L=Math.floor,A=String.fromCharCode;function I(pe){throw new RangeError(B[pe])}function x(pe,se){for(var ge=[],Se=pe.length;Se--;)ge[Se]=se(pe[Se]);return ge}function j(pe,se){var ge=pe.split("@"),Se="";ge.length>1&&(Se=ge[0]+"@",pe=ge[1]),pe=pe.replace(S,".");var Ne=pe.split("."),rt=x(Ne,se).join(".");return Se+rt}function re(pe){for(var se=[],ge=0,Se=pe.length;ge<Se;){var Ne=pe.charCodeAt(ge++);if(Ne>=55296&&Ne<=56319&&ge<Se){var rt=pe.charCodeAt(ge++);(rt&64512)==56320?se.push(((Ne&1023)<<10)+(rt&1023)+65536):(se.push(Ne),ge--)}else se.push(Ne)}return se}var Z=function(se){return String.fromCodePoint.apply(String,c(se))},$=function(se){return se-48<10?se-22:se-65<26?se-65:se-97<26?se-97:_},G=function(se,ge){return se+22+75*(se<26)-((ge!=0)<<5)},X=function(se,ge,Se){var Ne=0;for(se=Se?L(se/T):se>>1,se+=L(se/ge);se>D*y>>1;Ne+=_)se=L(se/D);return L(Ne+(D+1)*se/(se+O))},oe=function(se){var ge=[],Se=se.length,Ne=0,rt=g,Ye=N,st=se.lastIndexOf(k);st<0&&(st=0);for(var Bt=0;Bt<st;++Bt)se.charCodeAt(Bt)>=128&&I("not-basic"),ge.push(se.charCodeAt(Bt));for(var er=st>0?st+1:0;er<Se;){for(var kt=Ne,Nt=1,Xt=_;;Xt+=_){er>=Se&&I("invalid-input");var ct=$(se.charCodeAt(er++));(ct>=_||ct>L((p-Ne)/Nt))&&I("overflow"),Ne+=ct*Nt;var St=Xt<=Ye?m:Xt>=Ye+y?y:Xt-Ye;if(ct<St)break;var Gt=_-St;Nt>L(p/Gt)&&I("overflow"),Nt*=Gt}var Lt=ge.length+1;Ye=X(Ne-kt,Lt,kt==0),L(Ne/Lt)>p-rt&&I("overflow"),rt+=L(Ne/Lt),Ne%=Lt,ge.splice(Ne++,0,rt)}return String.fromCodePoint.apply(String,ge)},Q=function(se){var ge=[];se=re(se);var Se=se.length,Ne=g,rt=0,Ye=N,st=!0,Bt=!1,er=void 0;try{for(var kt=se[Symbol.iterator](),Nt;!(st=(Nt=kt.next()).done);st=!0){var Xt=Nt.value;Xt<128&&ge.push(A(Xt))}}catch(Rn){Bt=!0,er=Rn}finally{try{!st&&kt.return&&kt.return()}finally{if(Bt)throw er}}var ct=ge.length,St=ct;for(ct&&ge.push(k);St<Se;){var Gt=p,Lt=!0,Wr=!1,gr=void 0;try{for(var br=se[Symbol.iterator](),Pn;!(Lt=(Pn=br.next()).done);Lt=!0){var pn=Pn.value;pn>=Ne&&pn<Gt&&(Gt=pn)}}catch(Rn){Wr=!0,gr=Rn}finally{try{!Lt&&br.return&&br.return()}finally{if(Wr)throw gr}}var kr=St+1;Gt-Ne>L((p-rt)/kr)&&I("overflow"),rt+=(Gt-Ne)*kr,Ne=Gt;var Br=!0,_n=!1,Dr=void 0;try{for(var Yr=se[Symbol.iterator](),ji;!(Br=(ji=Yr.next()).done);Br=!0){var qi=ji.value;if(qi<Ne&&++rt>p&&I("overflow"),qi==Ne){for(var mn=rt,vn=_;;vn+=_){var $n=vn<=Ye?m:vn>=Ye+y?y:vn-Ye;if(mn<$n)break;var Mi=mn-$n,Qn=_-$n;ge.push(A(G($n+Mi%Qn,0))),mn=L(Mi/Qn)}ge.push(A(G(mn,0))),Ye=X(rt,kr,St==ct),rt=0,++St}}}catch(Rn){_n=!0,Dr=Rn}finally{try{!Br&&Yr.return&&Yr.return()}finally{if(_n)throw Dr}}++rt,++Ne}return ge.join("")},le=function(se){return j(se,function(ge){return w.test(ge)?oe(ge.slice(4).toLowerCase()):ge})},Ve=function(se){return j(se,function(ge){return R.test(ge)?"xn--"+Q(ge):ge})},ze={version:"2.1.0",ucs2:{decode:re,encode:Z},decode:oe,encode:Q,toASCII:Ve,toUnicode:le},ke={};function Ie(pe){var se=pe.charCodeAt(0),ge=void 0;return se<16?ge="%0"+se.toString(16).toUpperCase():se<128?ge="%"+se.toString(16).toUpperCase():se<2048?ge="%"+(se>>6|192).toString(16).toUpperCase()+"%"+(se&63|128).toString(16).toUpperCase():ge="%"+(se>>12|224).toString(16).toUpperCase()+"%"+(se>>6&63|128).toString(16).toUpperCase()+"%"+(se&63|128).toString(16).toUpperCase(),ge}function ve(pe){for(var se="",ge=0,Se=pe.length;ge<Se;){var Ne=parseInt(pe.substr(ge+1,2),16);if(Ne<128)se+=String.fromCharCode(Ne),ge+=3;else if(Ne>=194&&Ne<224){if(Se-ge>=6){var rt=parseInt(pe.substr(ge+4,2),16);se+=String.fromCharCode((Ne&31)<<6|rt&63)}else se+=pe.substr(ge,6);ge+=6}else if(Ne>=224){if(Se-ge>=9){var Ye=parseInt(pe.substr(ge+4,2),16),st=parseInt(pe.substr(ge+7,2),16);se+=String.fromCharCode((Ne&15)<<12|(Ye&63)<<6|st&63)}else se+=pe.substr(ge,9);ge+=9}else se+=pe.substr(ge,3),ge+=3}return se}function he(pe,se){function ge(Se){var Ne=ve(Se);return Ne.match(se.UNRESERVED)?Ne:Se}return pe.scheme&&(pe.scheme=String(pe.scheme).replace(se.PCT_ENCODED,ge).toLowerCase().replace(se.NOT_SCHEME,"")),pe.userinfo!==void 0&&(pe.userinfo=String(pe.userinfo).replace(se.PCT_ENCODED,ge).replace(se.NOT_USERINFO,Ie).replace(se.PCT_ENCODED,a)),pe.host!==void 0&&(pe.host=String(pe.host).replace(se.PCT_ENCODED,ge).toLowerCase().replace(se.NOT_HOST,Ie).replace(se.PCT_ENCODED,a)),pe.path!==void 0&&(pe.path=String(pe.path).replace(se.PCT_ENCODED,ge).replace(pe.scheme?se.NOT_PATH:se.NOT_PATH_NOSCHEME,Ie).replace(se.PCT_ENCODED,a)),pe.query!==void 0&&(pe.query=String(pe.query).replace(se.PCT_ENCODED,ge).replace(se.NOT_QUERY,Ie).replace(se.PCT_ENCODED,a)),pe.fragment!==void 0&&(pe.fragment=String(pe.fragment).replace(se.PCT_ENCODED,ge).replace(se.NOT_FRAGMENT,Ie).replace(se.PCT_ENCODED,a)),pe}function Fe(pe){return pe.replace(/^0*(.*)/,"$1")||"0"}function ot(pe,se){var ge=pe.match(se.IPV4ADDRESS)||[],Se=d(ge,2),Ne=Se[1];return Ne?Ne.split(".").map(Fe).join("."):pe}function He(pe,se){var ge=pe.match(se.IPV6ADDRESS)||[],Se=d(ge,3),Ne=Se[1],rt=Se[2];if(Ne){for(var Ye=Ne.toLowerCase().split("::").reverse(),st=d(Ye,2),Bt=st[0],er=st[1],kt=er?er.split(":").map(Fe):[],Nt=Bt.split(":").map(Fe),Xt=se.IPV4ADDRESS.test(Nt[Nt.length-1]),ct=Xt?7:8,St=Nt.length-ct,Gt=Array(ct),Lt=0;Lt<ct;++Lt)Gt[Lt]=kt[Lt]||Nt[St+Lt]||"";Xt&&(Gt[ct-1]=ot(Gt[ct-1],se));var Wr=Gt.reduce(function(kr,Br,_n){if(!Br||Br==="0"){var Dr=kr[kr.length-1];Dr&&Dr.index+Dr.length===_n?Dr.length++:kr.push({index:_n,length:1})}return kr},[]),gr=Wr.sort(function(kr,Br){return Br.length-kr.length})[0],br=void 0;if(gr&&gr.length>1){var Pn=Gt.slice(0,gr.index),pn=Gt.slice(gr.index+gr.length);br=Pn.join(":")+"::"+pn.join(":")}else br=Gt.join(":");return rt&&(br+="%"+rt),br}else return pe}var fe=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Te="".match(/(){0}/)[1]===void 0;function dt(pe){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge={},Se=se.iri!==!1?h:f;se.reference==="suffix"&&(pe=(se.scheme?se.scheme+":":"")+"//"+pe);var Ne=pe.match(fe);if(Ne){Te?(ge.scheme=Ne[1],ge.userinfo=Ne[3],ge.host=Ne[4],ge.port=parseInt(Ne[5],10),ge.path=Ne[6]||"",ge.query=Ne[7],ge.fragment=Ne[8],isNaN(ge.port)&&(ge.port=Ne[5])):(ge.scheme=Ne[1]||void 0,ge.userinfo=pe.indexOf("@")!==-1?Ne[3]:void 0,ge.host=pe.indexOf("//")!==-1?Ne[4]:void 0,ge.port=parseInt(Ne[5],10),ge.path=Ne[6]||"",ge.query=pe.indexOf("?")!==-1?Ne[7]:void 0,ge.fragment=pe.indexOf("#")!==-1?Ne[8]:void 0,isNaN(ge.port)&&(ge.port=pe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Ne[4]:void 0)),ge.host&&(ge.host=He(ot(ge.host,Se),Se)),ge.scheme===void 0&&ge.userinfo===void 0&&ge.host===void 0&&ge.port===void 0&&!ge.path&&ge.query===void 0?ge.reference="same-document":ge.scheme===void 0?ge.reference="relative":ge.fragment===void 0?ge.reference="absolute":ge.reference="uri",se.reference&&se.reference!=="suffix"&&se.reference!==ge.reference&&(ge.error=ge.error||"URI is not a "+se.reference+" reference.");var rt=ke[(se.scheme||ge.scheme||"").toLowerCase()];if(!se.unicodeSupport&&(!rt||!rt.unicodeSupport)){if(ge.host&&(se.domainHost||rt&&rt.domainHost))try{ge.host=ze.toASCII(ge.host.replace(Se.PCT_ENCODED,ve).toLowerCase())}catch(Ye){ge.error=ge.error||"Host's domain name can not be converted to ASCII via punycode: "+Ye}he(ge,f)}else he(ge,Se);rt&&rt.parse&&rt.parse(ge,se)}else ge.error=ge.error||"URI can not be parsed.";return ge}function Ot(pe,se){var ge=se.iri!==!1?h:f,Se=[];return pe.userinfo!==void 0&&(Se.push(pe.userinfo),Se.push("@")),pe.host!==void 0&&Se.push(He(ot(String(pe.host),ge),ge).replace(ge.IPV6ADDRESS,function(Ne,rt,Ye){return"["+rt+(Ye?"%25"+Ye:"")+"]"})),(typeof pe.port=="number"||typeof pe.port=="string")&&(Se.push(":"),Se.push(String(pe.port))),Se.length?Se.join(""):void 0}var tr=/^\.\.?\//,At=/^\/\.(\/|$)/,$t=/^\/\.\.(\/|$)/,Kt=/^\/?(?:.|\n)*?(?=\/|$)/;function _t(pe){for(var se=[];pe.length;)if(pe.match(tr))pe=pe.replace(tr,"");else if(pe.match(At))pe=pe.replace(At,"/");else if(pe.match($t))pe=pe.replace($t,"/"),se.pop();else if(pe==="."||pe==="..")pe="";else{var ge=pe.match(Kt);if(ge){var Se=ge[0];pe=pe.slice(Se.length),se.push(Se)}else throw new Error("Unexpected dot segment condition")}return se.join("")}function Ct(pe){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge=se.iri?h:f,Se=[],Ne=ke[(se.scheme||pe.scheme||"").toLowerCase()];if(Ne&&Ne.serialize&&Ne.serialize(pe,se),pe.host&&!ge.IPV6ADDRESS.test(pe.host)){if(se.domainHost||Ne&&Ne.domainHost)try{pe.host=se.iri?ze.toUnicode(pe.host):ze.toASCII(pe.host.replace(ge.PCT_ENCODED,ve).toLowerCase())}catch(st){pe.error=pe.error||"Host's domain name can not be converted to "+(se.iri?"Unicode":"ASCII")+" via punycode: "+st}}he(pe,ge),se.reference!=="suffix"&&pe.scheme&&(Se.push(pe.scheme),Se.push(":"));var rt=Ot(pe,se);if(rt!==void 0&&(se.reference!=="suffix"&&Se.push("//"),Se.push(rt),pe.path&&pe.path.charAt(0)!=="/"&&Se.push("/")),pe.path!==void 0){var Ye=pe.path;!se.absolutePath&&(!Ne||!Ne.absolutePath)&&(Ye=_t(Ye)),rt===void 0&&(Ye=Ye.replace(/^\/\//,"/%2F")),Se.push(Ye)}return pe.query!==void 0&&(Se.push("?"),Se.push(pe.query)),pe.fragment!==void 0&&(Se.push("#"),Se.push(pe.fragment)),Se.join("")}function Ut(pe,se){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Se=arguments[3],Ne={};return Se||(pe=dt(Ct(pe,ge),ge),se=dt(Ct(se,ge),ge)),ge=ge||{},!ge.tolerant&&se.scheme?(Ne.scheme=se.scheme,Ne.userinfo=se.userinfo,Ne.host=se.host,Ne.port=se.port,Ne.path=_t(se.path||""),Ne.query=se.query):(se.userinfo!==void 0||se.host!==void 0||se.port!==void 0?(Ne.userinfo=se.userinfo,Ne.host=se.host,Ne.port=se.port,Ne.path=_t(se.path||""),Ne.query=se.query):(se.path?(se.path.charAt(0)==="/"?Ne.path=_t(se.path):((pe.userinfo!==void 0||pe.host!==void 0||pe.port!==void 0)&&!pe.path?Ne.path="/"+se.path:pe.path?Ne.path=pe.path.slice(0,pe.path.lastIndexOf("/")+1)+se.path:Ne.path=se.path,Ne.path=_t(Ne.path)),Ne.query=se.query):(Ne.path=pe.path,se.query!==void 0?Ne.query=se.query:Ne.query=pe.query),Ne.userinfo=pe.userinfo,Ne.host=pe.host,Ne.port=pe.port),Ne.scheme=pe.scheme),Ne.fragment=se.fragment,Ne}function Zt(pe,se,ge){var Se=o({scheme:"null"},ge);return Ct(Ut(dt(pe,Se),dt(se,Se),Se,!0),Se)}function hr(pe,se){return typeof pe=="string"?pe=Ct(dt(pe,se),se):s(pe)==="object"&&(pe=dt(Ct(pe,se),se)),pe}function z(pe,se,ge){return typeof pe=="string"?pe=Ct(dt(pe,ge),ge):s(pe)==="object"&&(pe=Ct(pe,ge)),typeof se=="string"?se=Ct(dt(se,ge),ge):s(se)==="object"&&(se=Ct(se,ge)),pe===se}function P(pe,se){return pe&&pe.toString().replace(!se||!se.iri?f.ESCAPE:h.ESCAPE,Ie)}function F(pe,se){return pe&&pe.toString().replace(!se||!se.iri?f.PCT_ENCODED:h.PCT_ENCODED,ve)}var W={scheme:"http",domainHost:!0,parse:function(se,ge){return se.host||(se.error=se.error||"HTTP URIs must have a host."),se},serialize:function(se,ge){var Se=String(se.scheme).toLowerCase()==="https";return(se.port===(Se?443:80)||se.port==="")&&(se.port=void 0),se.path||(se.path="/"),se}},ce={scheme:"https",domainHost:W.domainHost,parse:W.parse,serialize:W.serialize};function Ee(pe){return typeof pe.secure=="boolean"?pe.secure:String(pe.scheme).toLowerCase()==="wss"}var Ae={scheme:"ws",domainHost:!0,parse:function(se,ge){var Se=se;return Se.secure=Ee(Se),Se.resourceName=(Se.path||"/")+(Se.query?"?"+Se.query:""),Se.path=void 0,Se.query=void 0,Se},serialize:function(se,ge){if((se.port===(Ee(se)?443:80)||se.port==="")&&(se.port=void 0),typeof se.secure=="boolean"&&(se.scheme=se.secure?"wss":"ws",se.secure=void 0),se.resourceName){var Se=se.resourceName.split("?"),Ne=d(Se,2),rt=Ne[0],Ye=Ne[1];se.path=rt&&rt!=="/"?rt:void 0,se.query=Ye,se.resourceName=void 0}return se.fragment=void 0,se}},Ze={scheme:"wss",domainHost:Ae.domainHost,parse:Ae.parse,serialize:Ae.serialize},at={},Pe="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Xe="[0-9A-Fa-f]",et=r(r("%[EFef]"+Xe+"%"+Xe+Xe+"%"+Xe+Xe)+"|"+r("%[89A-Fa-f]"+Xe+"%"+Xe+Xe)+"|"+r("%"+Xe+Xe)),ar="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",zr="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",lr=n(zr,'[\\"\\\\]'),vr="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Qr=new RegExp(Pe,"g"),In=new RegExp(et,"g"),ys=new RegExp(n("[^]",ar,"[\\.]",'[\\"]',lr),"g"),wa=new RegExp(n("[^]",Pe,vr),"g"),Es=wa;function di(pe){var se=ve(pe);return se.match(Qr)?se:pe}var Ui={scheme:"mailto",parse:function(se,ge){var Se=se,Ne=Se.to=Se.path?Se.path.split(","):[];if(Se.path=void 0,Se.query){for(var rt=!1,Ye={},st=Se.query.split("&"),Bt=0,er=st.length;Bt<er;++Bt){var kt=st[Bt].split("=");switch(kt[0]){case"to":for(var Nt=kt[1].split(","),Xt=0,ct=Nt.length;Xt<ct;++Xt)Ne.push(Nt[Xt]);break;case"subject":Se.subject=F(kt[1],ge);break;case"body":Se.body=F(kt[1],ge);break;default:rt=!0,Ye[F(kt[0],ge)]=F(kt[1],ge);break}}rt&&(Se.headers=Ye)}Se.query=void 0;for(var St=0,Gt=Ne.length;St<Gt;++St){var Lt=Ne[St].split("@");if(Lt[0]=F(Lt[0]),ge.unicodeSupport)Lt[1]=F(Lt[1],ge).toLowerCase();else try{Lt[1]=ze.toASCII(F(Lt[1],ge).toLowerCase())}catch(Wr){Se.error=Se.error||"Email address's domain name can not be converted to ASCII via punycode: "+Wr}Ne[St]=Lt.join("@")}return Se},serialize:function(se,ge){var Se=se,Ne=l(se.to);if(Ne){for(var rt=0,Ye=Ne.length;rt<Ye;++rt){var st=String(Ne[rt]),Bt=st.lastIndexOf("@"),er=st.slice(0,Bt).replace(In,di).replace(In,a).replace(ys,Ie),kt=st.slice(Bt+1);try{kt=ge.iri?ze.toUnicode(kt):ze.toASCII(F(kt,ge).toLowerCase())}catch(St){Se.error=Se.error||"Email address's domain name can not be converted to "+(ge.iri?"Unicode":"ASCII")+" via punycode: "+St}Ne[rt]=er+"@"+kt}Se.path=Ne.join(",")}var Nt=se.headers=se.headers||{};se.subject&&(Nt.subject=se.subject),se.body&&(Nt.body=se.body);var Xt=[];for(var ct in Nt)Nt[ct]!==at[ct]&&Xt.push(ct.replace(In,di).replace(In,a).replace(wa,Ie)+"="+Nt[ct].replace(In,di).replace(In,a).replace(Es,Ie));return Xt.length&&(Se.query=Xt.join("&")),Se}},ks=/^([^\:]+)\:(.*)/,ya={scheme:"urn",parse:function(se,ge){var Se=se.path&&se.path.match(ks),Ne=se;if(Se){var rt=ge.scheme||Ne.scheme||"urn",Ye=Se[1].toLowerCase(),st=Se[2],Bt=rt+":"+(ge.nid||Ye),er=ke[Bt];Ne.nid=Ye,Ne.nss=st,Ne.path=void 0,er&&(Ne=er.parse(Ne,ge))}else Ne.error=Ne.error||"URN can not be parsed.";return Ne},serialize:function(se,ge){var Se=ge.scheme||se.scheme||"urn",Ne=se.nid,rt=Se+":"+(ge.nid||Ne),Ye=ke[rt];Ye&&(se=Ye.serialize(se,ge));var st=se,Bt=se.nss;return st.path=(Ne||ge.nid)+":"+Bt,st}},Ds=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Or={scheme:"urn:uuid",parse:function(se,ge){var Se=se;return Se.uuid=Se.nss,Se.nss=void 0,!ge.tolerant&&(!Se.uuid||!Se.uuid.match(Ds))&&(Se.error=Se.error||"UUID is not valid."),Se},serialize:function(se,ge){var Se=se;return Se.nss=(se.uuid||"").toLowerCase(),Se}};ke[W.scheme]=W,ke[ce.scheme]=ce,ke[Ae.scheme]=Ae,ke[Ze.scheme]=Ze,ke[Ui.scheme]=Ui,ke[ya.scheme]=ya,ke[Or.scheme]=Or,t.SCHEMES=ke,t.pctEncChar=Ie,t.pctDecChars=ve,t.parse=dt,t.removeDotSegments=_t,t.serialize=Ct,t.resolveComponents=Ut,t.resolve=Zt,t.normalize=hr,t.equal=z,t.escapeComponent=P,t.unescapeComponent=F,Object.defineProperty(t,"__esModule",{value:!0})})})(nl,nl.exports);var Wm=nl.exports,Nl=function i(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,s;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!i(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){var a=s[r];if(!i(e[a],t[a]))return!1}return!0}return e!==e&&t!==t},Ym=function(e){for(var t=0,n=e.length,r=0,s;r<n;)t++,s=e.charCodeAt(r++),s>=55296&&s<=56319&&r<n&&(s=e.charCodeAt(r),(s&64512)==56320&&r++);return t},Pi={copy:Jm,checkDataType:il,checkDataTypes:Km,coerceToTypes:Zm,toHash:Sl,getProperty:Il,escapeQuotes:Pl,equal:Nl,ucs2length:Ym,varOccurences:rv,varReplace:nv,schemaHasRules:iv,schemaHasRulesExcept:av,schemaUnknownRules:sv,toQuotedString:al,getPathExpr:lv,getPath:ov,getData:cv,unescapeFragment:dv,unescapeJsonPointer:Fl,escapeFragment:hv,escapeJsonPointer:Rl};function Jm(i,e){e=e||{};for(var t in i)e[t]=i[t];return e}function il(i,e,t,n){var r=n?" !== ":" === ",s=n?" || ":" && ",a=n?"!":"",l=n?"":"!";switch(i){case"null":return e+r+"null";case"array":return a+"Array.isArray("+e+")";case"object":return"("+a+e+s+"typeof "+e+r+'"object"'+s+l+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+r+'"number"'+s+l+"("+e+" % 1)"+s+e+r+e+(t?s+a+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+r+'"'+i+'"'+(t?s+a+"isFinite("+e+")":"")+")";default:return"typeof "+e+r+'"'+i+'"'}}function Km(i,e,t){switch(i.length){case 1:return il(i[0],e,t,!0);default:var n="",r=Sl(i);r.array&&r.object&&(n=r.null?"(":"(!"+e+" || ",n+="typeof "+e+' !== "object")',delete r.null,delete r.array,delete r.object),r.number&&delete r.integer;for(var s in r)n+=(n?" && ":"")+il(s,e,t,!0);return n}}var au=Sl(["string","number","integer","boolean","null"]);function Zm(i,e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++){var r=e[n];(au[r]||i==="array"&&r==="array")&&(t[t.length]=r)}if(t.length)return t}else{if(au[e])return[e];if(i==="array"&&e==="array")return["array"]}}function Sl(i){for(var e={},t=0;t<i.length;t++)e[i[t]]=!0;return e}var ev=/^[a-z$_][a-z$_0-9]*$/i,tv=/'|\\/g;function Il(i){return typeof i=="number"?"["+i+"]":ev.test(i)?"."+i:"['"+Pl(i)+"']"}function Pl(i){return i.replace(tv,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function rv(i,e){e+="[^0-9]";var t=i.match(new RegExp(e,"g"));return t?t.length:0}function nv(i,e,t){return e+="([^0-9])",t=t.replace(/\$/g,"$$$$"),i.replace(new RegExp(e,"g"),t+"$1")}function iv(i,e){if(typeof i=="boolean")return!i;for(var t in i)if(e[t])return!0}function av(i,e,t){if(typeof i=="boolean")return!i&&t!="not";for(var n in i)if(n!=t&&e[n])return!0}function sv(i,e){if(typeof i!="boolean"){for(var t in i)if(!e[t])return t}}function al(i){return"'"+Pl(i)+"'"}function lv(i,e,t,n){var r=t?"'/' + "+e+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return Sh(i,r)}function ov(i,e,t){var n=al(t?"/"+Rl(e):Il(e));return Sh(i,n)}var uv=/^\/(?:[^~]|~0|~1)*$/,fv=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function cv(i,e,t){var n,r,s,a;if(i==="")return"rootData";if(i[0]=="/"){if(!uv.test(i))throw new Error("Invalid JSON-pointer: "+i);r=i,s="rootData"}else{if(a=i.match(fv),!a)throw new Error("Invalid JSON-pointer: "+i);if(n=+a[1],r=a[2],r=="#"){if(n>=e)throw new Error("Cannot access property/index "+n+" levels up, current level is "+e);return t[e-n]}if(n>e)throw new Error("Cannot access data "+n+" levels up, current level is "+e);if(s="data"+(e-n||""),!r)return s}for(var l=s,o=r.split("/"),u=0;u<o.length;u++){var f=o[u];f&&(s+=Il(Fl(f)),l+=" && "+s)}return l}function Sh(i,e){return i=='""'?e:(i+" + "+e).replace(/([^\\])' \+ '/g,"$1")}function dv(i){return Fl(decodeURIComponent(i))}function hv(i){return encodeURIComponent(Rl(i))}function Rl(i){return i.replace(/~/g,"~0").replace(/\//g,"~1")}function Fl(i){return i.replace(/~1/g,"/").replace(/~0/g,"~")}var pv=Pi,Ih=_v;function _v(i){pv.copy(i,this)}var Ph={exports:{}},Ln=Ph.exports=function(i,e,t){typeof e=="function"&&(t=e,e={}),t=e.cb||t;var n=typeof t=="function"?t:t.pre||function(){},r=t.post||function(){};qa(e,n,r,i,"",i)};Ln.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};Ln.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Ln.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Ln.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function qa(i,e,t,n,r,s,a,l,o,u){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,r,s,a,l,o,u);for(var f in n){var h=n[f];if(Array.isArray(h)){if(f in Ln.arrayKeywords)for(var d=0;d<h.length;d++)qa(i,e,t,h[d],r+"/"+f+"/"+d,s,r,f,n,d)}else if(f in Ln.propsKeywords){if(h&&typeof h=="object")for(var c in h)qa(i,e,t,h[c],r+"/"+f+"/"+mv(c),s,r,f,n,c)}else(f in Ln.keywords||i.allKeys&&!(f in Ln.skipKeywords))&&qa(i,e,t,h,r+"/"+f,s,r,f,n)}t(n,r,s,a,l,o,u)}}function mv(i){return i.replace(/~/g,"~0").replace(/\//g,"~1")}var vv=Ph.exports,ua=Wm,su=Nl,us=Pi,$a=Ih,gv=vv,Ol=Vn;Vn.normalizeId=Un;Vn.fullPath=Qa;Vn.url=Wa;Vn.ids=kv;Vn.inlineRef=sl;Vn.schema=fs;function Vn(i,e,t){var n=this._refs[t];if(typeof n=="string")if(this._refs[n])n=this._refs[n];else return Vn.call(this,i,e,n);if(n=n||this._schemas[t],n instanceof $a)return sl(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var r=fs.call(this,e,t),s,a,l;return r&&(s=r.schema,e=r.root,l=r.baseId),s instanceof $a?a=s.validate||i.call(this,s.schema,e,void 0,l):s!==void 0&&(a=sl(s,this._opts.inlineRefs)?s:i.call(this,s,e,void 0,l)),a}function fs(i,e){var t=ua.parse(e),n=Fh(t),r=Qa(this._getId(i.schema));if(Object.keys(i.schema).length===0||n!==r){var s=Un(n),a=this._refs[s];if(typeof a=="string")return bv.call(this,i,a,t);if(a instanceof $a)a.validate||this._compile(a),i=a;else if(a=this._schemas[s],a instanceof $a){if(a.validate||this._compile(a),s==Un(e))return{schema:a,root:i,baseId:r};i=a}else return;if(!i.schema)return;r=Qa(this._getId(i.schema))}return Rh.call(this,t,r,i.schema,i)}function bv(i,e,t){var n=fs.call(this,i,e);if(n){var r=n.schema,s=n.baseId;i=n.root;var a=this._getId(r);return a&&(s=Wa(s,a)),Rh.call(this,t,s,r,i)}}var wv=us.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function Rh(i,e,t,n){if(i.fragment=i.fragment||"",i.fragment.slice(0,1)=="/"){for(var r=i.fragment.split("/"),s=1;s<r.length;s++){var a=r[s];if(a){if(a=us.unescapeFragment(a),t=t[a],t===void 0)break;var l;if(!wv[a]&&(l=this._getId(t),l&&(e=Wa(e,l)),t.$ref)){var o=Wa(e,t.$ref),u=fs.call(this,n,o);u&&(t=u.schema,n=u.root,e=u.baseId)}}}if(t!==void 0&&t!==n.schema)return{schema:t,root:n,baseId:e}}}var yv=us.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function sl(i,e){if(e===!1)return!1;if(e===void 0||e===!0)return ll(i);if(e)return ol(i)<=e}function ll(i){var e;if(Array.isArray(i)){for(var t=0;t<i.length;t++)if(e=i[t],typeof e=="object"&&!ll(e))return!1}else for(var n in i)if(n=="$ref"||(e=i[n],typeof e=="object"&&!ll(e)))return!1;return!0}function ol(i){var e=0,t;if(Array.isArray(i)){for(var n=0;n<i.length;n++)if(t=i[n],typeof t=="object"&&(e+=ol(t)),e==1/0)return 1/0}else for(var r in i){if(r=="$ref")return 1/0;if(yv[r])e++;else if(t=i[r],typeof t=="object"&&(e+=ol(t)+1),e==1/0)return 1/0}return e}function Qa(i,e){e!==!1&&(i=Un(i));var t=ua.parse(i);return Fh(t)}function Fh(i){return ua.serialize(i).split("#")[0]+"#"}var Ev=/#\/?$/;function Un(i){return i?i.replace(Ev,""):""}function Wa(i,e){return e=Un(e),ua.resolve(i,e)}function kv(i){var e=Un(this._getId(i)),t={"":e},n={"":Qa(e,!1)},r={},s=this;return gv(i,{allKeys:!0},function(a,l,o,u,f,h,d){if(l!==""){var c=s._getId(a),p=t[u],_=n[u]+"/"+f;if(d!==void 0&&(_+="/"+(typeof d=="number"?d:us.escapeFragment(d))),typeof c=="string"){c=p=Un(p?ua.resolve(p,c):c);var m=s._refs[c];if(typeof m=="string"&&(m=s._refs[m]),m&&m.schema){if(!su(a,m.schema))throw new Error('id "'+c+'" resolves to more than one schema')}else if(c!=Un(_))if(c[0]=="#"){if(r[c]&&!su(a,r[c]))throw new Error('id "'+c+'" resolves to more than one schema');r[c]=a}else s._refs[c]=_}t[l]=p,n[l]=_}}),r}var Bs=Ol,Bl={Validation:lu(Dv),MissingRef:lu(Ll)};function Dv(i){this.message="validation failed",this.errors=i,this.ajv=this.validation=!0}Ll.message=function(i,e){return"can't resolve reference "+e+" from id "+i};function Ll(i,e,t){this.message=t||Ll.message(i,e),this.missingRef=Bs.url(i,e),this.missingSchema=Bs.normalizeId(Bs.fullPath(this.missingRef))}function lu(i){return i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i}var Oh=function(i,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var t=typeof e.cycles=="boolean"?e.cycles:!1,n=e.cmp&&function(s){return function(a){return function(l,o){var u={key:l,value:a[l]},f={key:o,value:a[o]};return s(u,f)}}}(e.cmp),r=[];return function s(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var l,o;if(Array.isArray(a)){for(o="[",l=0;l<a.length;l++)l&&(o+=","),o+=s(a[l])||"null";return o+"]"}if(a===null)return"null";if(r.indexOf(a)!==-1){if(t)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=r.push(a)-1,f=Object.keys(a).sort(n&&n(a));for(o="",l=0;l<f.length;l++){var h=f[l],d=s(a[h]);d&&(o&&(o+=","),o+=JSON.stringify(h)+":"+d)}return r.splice(u,1),"{"+o+"}"}}(i)},Bh=function(e,t,n){var r="",s=e.schema.$async===!0,a=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),l=e.self._getId(e.schema);if(e.opts.strictKeywords){var o=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(o){var u="unknown keyword: "+o;if(e.opts.strictKeywords==="log")e.logger.warn(u);else throw new Error(u)}}if(e.isTop&&(r+=" var validate = ",s&&(e.async=!0,r+="async "),r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",l&&(e.opts.sourceCode||e.opts.processCode)&&(r+=" "+("/*# sourceURL="+l+" */")+" ")),typeof e.schema=="boolean"||!(a||e.schema.$ref)){var t="false schema",f=e.level,h=e.dataLevel,d=e.schema[t],c=e.schemaPath+e.util.getProperty(t),p=e.errSchemaPath+"/"+t,g=!e.opts.allErrors,R,_="data"+(h||""),N="valid"+f;if(e.schema===!1){e.isTop?g=!0:r+=" var "+N+" = false; ";var m=m||[];m.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(R||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'boolean schema is false' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),r+=" } "):r+=" {} ";var y=r;r=m.pop(),!e.compositeRule&&g?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?s?r+=" return data; ":r+=" validate.errors = null; return true; ":r+=" var "+N+" = true; ";return e.isTop&&(r+=" }; return validate; "),r}if(e.isTop){var O=e.isTop,f=e.level=0,h=e.dataLevel=0,_="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var T="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(T);else throw new Error(T)}r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{var f=e.level,h=e.dataLevel,_="data"+(h||"");if(l&&(e.baseId=e.resolve.url(e.baseId,l)),s&&!e.async)throw new Error("async schema in sync schema");r+=" var errs_"+f+" = errors;"}var N="valid"+f,g=!e.opts.allErrors,k="",w="",R,S=e.schema.type,B=Array.isArray(S);if(S&&e.opts.nullable&&e.schema.nullable===!0&&(B?S.indexOf("null")==-1&&(S=S.concat("null")):S!="null"&&(S=[S,"null"],B=!0)),B&&S.length==1&&(S=S[0],B=!1),e.schema.$ref&&a){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(a=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(r+=" "+e.RULES.all.$comment.code(e,"$comment")),S){if(e.opts.coerceTypes)var D=e.util.coerceToTypes(e.opts.coerceTypes,S);var L=e.RULES.types[S];if(D||B||L===!0||L&&!At(L)){var c=e.schemaPath+".type",p=e.errSchemaPath+"/type",c=e.schemaPath+".type",p=e.errSchemaPath+"/type",A=B?"checkDataTypes":"checkDataType";if(r+=" if ("+e.util[A](S,_,e.opts.strictNumbers,!0)+") { ",D){var I="dataType"+f,x="coerced"+f;r+=" var "+I+" = typeof "+_+"; var "+x+" = undefined; ",e.opts.coerceTypes=="array"&&(r+=" if ("+I+" == 'object' && Array.isArray("+_+") && "+_+".length == 1) { "+_+" = "+_+"[0]; "+I+" = typeof "+_+"; if ("+e.util.checkDataType(e.schema.type,_,e.opts.strictNumbers)+") "+x+" = "+_+"; } "),r+=" if ("+x+" !== undefined) ; ";var j=D;if(j)for(var re,Z=-1,$=j.length-1;Z<$;)re=j[Z+=1],re=="string"?r+=" else if ("+I+" == 'number' || "+I+" == 'boolean') "+x+" = '' + "+_+"; else if ("+_+" === null) "+x+" = ''; ":re=="number"||re=="integer"?(r+=" else if ("+I+" == 'boolean' || "+_+" === null || ("+I+" == 'string' && "+_+" && "+_+" == +"+_+" ",re=="integer"&&(r+=" && !("+_+" % 1)"),r+=")) "+x+" = +"+_+"; "):re=="boolean"?r+=" else if ("+_+" === 'false' || "+_+" === 0 || "+_+" === null) "+x+" = false; else if ("+_+" === 'true' || "+_+" === 1) "+x+" = true; ":re=="null"?r+=" else if ("+_+" === '' || "+_+" === 0 || "+_+" === false) "+x+" = null; ":e.opts.coerceTypes=="array"&&re=="array"&&(r+=" else if ("+I+" == 'string' || "+I+" == 'number' || "+I+" == 'boolean' || "+_+" == null) "+x+" = ["+_+"]; ");r+=" else {   ";var m=m||[];m.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(R||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",B?r+=""+S.join(","):r+=""+S,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",B?r+=""+S.join(","):r+=""+S,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),r+=" } "):r+=" {} ";var y=r;r=m.pop(),!e.compositeRule&&g?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } if ("+x+" !== undefined) {  ";var G=h?"data"+(h-1||""):"parentData",X=h?e.dataPathArr[h]:"parentDataProperty";r+=" "+_+" = "+x+"; ",h||(r+="if ("+G+" !== undefined)"),r+=" "+G+"["+X+"] = "+x+"; } "}else{var m=m||[];m.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(R||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",B?r+=""+S.join(","):r+=""+S,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",B?r+=""+S.join(","):r+=""+S,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),r+=" } "):r+=" {} ";var y=r;r=m.pop(),!e.compositeRule&&g?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" } "}}if(e.schema.$ref&&!a)r+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",g&&(r+=" } if (errors === ",O?r+="0":r+="errs_"+f,r+=") { ",w+="}");else{var oe=e.RULES;if(oe){for(var L,Q=-1,le=oe.length-1;Q<le;)if(L=oe[Q+=1],At(L)){if(L.type&&(r+=" if ("+e.util.checkDataType(L.type,_,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(L.type=="object"&&e.schema.properties){var d=e.schema.properties,Ve=Object.keys(d),ze=Ve;if(ze)for(var ke,Ie=-1,ve=ze.length-1;Ie<ve;){ke=ze[Ie+=1];var he=d[ke];if(he.default!==void 0){var Fe=_+e.util.getProperty(ke);if(e.compositeRule){if(e.opts.strictDefaults){var T="default is ignored for: "+Fe;if(e.opts.strictDefaults==="log")e.logger.warn(T);else throw new Error(T)}}else r+=" if ("+Fe+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+Fe+" === null || "+Fe+" === '' "),r+=" ) "+Fe+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(he.default)+" ":r+=" "+JSON.stringify(he.default)+" ",r+="; "}}}else if(L.type=="array"&&Array.isArray(e.schema.items)){var ot=e.schema.items;if(ot){for(var he,Z=-1,He=ot.length-1;Z<He;)if(he=ot[Z+=1],he.default!==void 0){var Fe=_+"["+Z+"]";if(e.compositeRule){if(e.opts.strictDefaults){var T="default is ignored for: "+Fe;if(e.opts.strictDefaults==="log")e.logger.warn(T);else throw new Error(T)}}else r+=" if ("+Fe+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+Fe+" === null || "+Fe+" === '' "),r+=" ) "+Fe+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(he.default)+" ":r+=" "+JSON.stringify(he.default)+" ",r+="; "}}}}var fe=L.rules;if(fe){for(var Te,dt=-1,Ot=fe.length-1;dt<Ot;)if(Te=fe[dt+=1],$t(Te)){var tr=Te.code(e,Te.keyword,L.type);tr&&(r+=" "+tr+" ",g&&(k+="}"))}}if(g&&(r+=" "+k+" ",k=""),L.type&&(r+=" } ",S&&S===L.type&&!D)){r+=" else { ";var c=e.schemaPath+".type",p=e.errSchemaPath+"/type",m=m||[];m.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(R||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",B?r+=""+S.join(","):r+=""+S,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",B?r+=""+S.join(","):r+=""+S,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),r+=" } "):r+=" {} ";var y=r;r=m.pop(),!e.compositeRule&&g?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}g&&(r+=" if (errors === ",O?r+="0":r+="errs_"+f,r+=") { ",w+="}")}}}g&&(r+=" "+w+" "),O?(s?(r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" }; return validate;"):r+=" var "+N+" = errors === errs_"+f+";";function At(_t){for(var Ct=_t.rules,Ut=0;Ut<Ct.length;Ut++)if($t(Ct[Ut]))return!0}function $t(_t){return e.schema[_t.keyword]!==void 0||_t.implements&&Kt(_t)}function Kt(_t){for(var Ct=_t.implements,Ut=0;Ut<Ct.length;Ut++)if(e.schema[Ct[Ut]]!==void 0)return!0}return r},Na=Ol,Ya=Pi,Lh=Bl,Av=Oh,ou=Bh,Cv=Ya.ucs2length,Tv=Nl,Nv=Lh.Validation,Sv=ul;function ul(i,e,t,n){var r=this,s=this._opts,a=[void 0],l={},o=[],u={},f=[],h={},d=[];e=e||{schema:i,refVal:a,refs:l};var c=Iv.call(this,i,e,n),p=this._compilations[c.index];if(c.compiling)return p.callValidate=T;var _=this._formats,m=this.RULES;try{var y=N(i,e,t,n);p.validate=y;var O=p.callValidate;return O&&(O.schema=y.schema,O.errors=null,O.refs=y.refs,O.refVal=y.refVal,O.root=y.root,O.$async=y.$async,s.sourceCode&&(O.source=y.source)),y}finally{Pv.call(this,i,e,n)}function T(){var A=p.validate,I=A.apply(this,arguments);return T.errors=A.errors,I}function N(A,I,x,j){var re=!I||I&&I.schema==A;if(I.schema!=e.schema)return ul.call(r,A,I,x,j);var Z=A.$async===!0,$=ou({isTop:!0,schema:A,isRoot:re,baseId:j,root:I,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:Lh.MissingRef,RULES:m,validate:ou,util:Ya,resolve:Na,resolveRef:g,usePattern:B,useDefault:D,useCustomRule:L,opts:s,formats:_,logger:r.logger,self:r});$=Sa(a,Ov)+Sa(o,Rv)+Sa(f,Fv)+Sa(d,Bv)+$,s.processCode&&($=s.processCode($,A));var G;try{var X=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",$);G=X(r,m,_,e,a,f,d,Tv,Cv,Nv),a[0]=G}catch(oe){throw r.logger.error("Error compiling schema, function code:",$),oe}return G.schema=A,G.errors=null,G.refs=l,G.refVal=a,G.root=re?G:I,Z&&(G.$async=!0),s.sourceCode===!0&&(G.source={code:$,patterns:o,defaults:f}),G}function g(A,I,x){I=Na.url(A,I);var j=l[I],re,Z;if(j!==void 0)return re=a[j],Z="refVal["+j+"]",S(re,Z);if(!x&&e.refs){var $=e.refs[I];if($!==void 0)return re=e.refVal[$],Z=k(I,re),S(re,Z)}Z=k(I);var G=Na.call(r,N,e,I);if(G===void 0){var X=t&&t[I];X&&(G=Na.inlineRef(X,s.inlineRefs)?X:ul.call(r,X,e,t,A))}if(G===void 0)w(I);else return R(I,G),S(G,Z)}function k(A,I){var x=a.length;return a[x]=I,l[A]=x,"refVal"+x}function w(A){delete l[A]}function R(A,I){var x=l[A];a[x]=I}function S(A,I){return typeof A=="object"||typeof A=="boolean"?{code:I,schema:A,inline:!0}:{code:I,$async:A&&!!A.$async}}function B(A){var I=u[A];return I===void 0&&(I=u[A]=o.length,o[I]=A),"pattern"+I}function D(A){switch(typeof A){case"boolean":case"number":return""+A;case"string":return Ya.toQuotedString(A);case"object":if(A===null)return"null";var I=Av(A),x=h[I];return x===void 0&&(x=h[I]=f.length,f[x]=A),"default"+x}}function L(A,I,x,j){if(r._opts.validateSchema!==!1){var re=A.definition.dependencies;if(re&&!re.every(function(ze){return Object.prototype.hasOwnProperty.call(x,ze)}))throw new Error("parent schema must have all required keywords: "+re.join(","));var Z=A.definition.validateSchema;if(Z){var $=Z(I);if(!$){var G="keyword schema is invalid: "+r.errorsText(Z.errors);if(r._opts.validateSchema=="log")r.logger.error(G);else throw new Error(G)}}}var X=A.definition.compile,oe=A.definition.inline,Q=A.definition.macro,le;if(X)le=X.call(r,I,x,j);else if(Q)le=Q.call(r,I,x,j),s.validateSchema!==!1&&r.validateSchema(le,!0);else if(oe)le=oe.call(r,j,A.keyword,I,x);else if(le=A.definition.validate,!le)return;if(le===void 0)throw new Error('custom keyword "'+A.keyword+'"failed to compile');var Ve=d.length;return d[Ve]=le,{code:"customRule"+Ve,validate:le}}}function Iv(i,e,t){var n=Uh.call(this,i,e,t);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:i,root:e,baseId:t},{index:n,compiling:!1})}function Pv(i,e,t){var n=Uh.call(this,i,e,t);n>=0&&this._compilations.splice(n,1)}function Uh(i,e,t){for(var n=0;n<this._compilations.length;n++){var r=this._compilations[n];if(r.schema==i&&r.root==e&&r.baseId==t)return n}return-1}function Rv(i,e){return"var pattern"+i+" = new RegExp("+Ya.toQuotedString(e[i])+");"}function Fv(i){return"var default"+i+" = defaults["+i+"];"}function Ov(i,e){return e[i]===void 0?"":"var refVal"+i+" = refVal["+i+"];"}function Bv(i){return"var customRule"+i+" = customRules["+i+"];"}function Sa(i,e){if(!i.length)return"";for(var t="",n=0;n<i.length;n++)t+=e(n,i);return t}var jh={exports:{}},cs=jh.exports=function(){this._cache={}};cs.prototype.put=function(e,t){this._cache[e]=t};cs.prototype.get=function(e){return this._cache[e]};cs.prototype.del=function(e){delete this._cache[e]};cs.prototype.clear=function(){this._cache={}};var Lv=jh.exports,Uv=Pi,jv=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,qv=[0,31,28,31,30,31,30,31,31,30,31,30,31],Mv=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,qh=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,Vv=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,zv=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Mh=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Vh=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,zh=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,Hh=/^(?:\/(?:[^~/]|~0|~1)*)*$/,xh=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Xh=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,Hv=ds;function ds(i){return i=i=="full"?"full":"fast",Uv.copy(ds[i])}ds.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":Mh,url:Vh,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:qh,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Qh,uuid:zh,"json-pointer":Hh,"json-pointer-uri-fragment":xh,"relative-json-pointer":Xh};ds.full={date:Gh,time:$h,"date-time":Gv,uri:Qv,"uri-reference":zv,"uri-template":Mh,url:Vh,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:qh,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Qh,uuid:zh,"json-pointer":Hh,"json-pointer-uri-fragment":xh,"relative-json-pointer":Xh};function xv(i){return i%4===0&&(i%100!==0||i%400===0)}function Gh(i){var e=i.match(jv);if(!e)return!1;var t=+e[1],n=+e[2],r=+e[3];return n>=1&&n<=12&&r>=1&&r<=(n==2&&xv(t)?29:qv[n])}function $h(i,e){var t=i.match(Mv);if(!t)return!1;var n=t[1],r=t[2],s=t[3],a=t[5];return(n<=23&&r<=59&&s<=59||n==23&&r==59&&s==60)&&(!e||a)}var Xv=/t|\s/i;function Gv(i){var e=i.split(Xv);return e.length==2&&Gh(e[0])&&$h(e[1],!0)}var $v=/\/|:/;function Qv(i){return $v.test(i)&&Vv.test(i)}var Wv=/[^\\]\\Z/;function Qh(i){if(Wv.test(i))return!1;try{return new RegExp(i),!0}catch{return!1}}var Yv=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,f="data"+(a||""),h="valid"+s,d,c;if(l=="#"||l=="#/")e.isRoot?(d=e.async,c="validate"):(d=e.root.schema.$async===!0,c="root.refVal[0]");else{var p=e.resolveRef(e.baseId,l,e.isRoot);if(p===void 0){var _=e.MissingRefError.message(e.baseId,l);if(e.opts.missingRefs=="fail"){e.logger.error(_);var m=m||[];m.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(o)+" , params: { ref: '"+e.util.escapeQuotes(l)+"' } ",e.opts.messages!==!1&&(r+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(l)+"' "),e.opts.verbose&&(r+=" , schema: "+e.util.toQuotedString(l)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var y=r;r=m.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(r+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(_),u&&(r+=" if (true) { ");else throw new e.MissingRefError(e.baseId,l,_)}else if(p.inline){var O=e.util.copy(e);O.level++;var T="valid"+O.level;O.schema=p.schema,O.schemaPath="",O.errSchemaPath=l;var N=e.validate(O).replace(/validate\.schema/g,p.code);r+=" "+N+" ",u&&(r+=" if ("+T+") { ")}else d=p.$async===!0||e.async&&p.$async!==!1,c=p.code}if(c){var m=m||[];m.push(r),r="",e.opts.passContext?r+=" "+c+".call(this, ":r+=" "+c+"( ",r+=" "+f+", (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var g=a?"data"+(a-1||""):"parentData",k=a?e.dataPathArr[a]:"parentDataProperty";r+=" , "+g+" , "+k+", rootData)  ";var w=r;if(r=m.pop(),d){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(r+=" var "+h+"; "),r+=" try { await "+w+"; ",u&&(r+=" "+h+" = true; "),r+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(r+=" "+h+" = false; "),r+=" } ",u&&(r+=" if ("+h+") { ")}else r+=" if (!"+w+") { if (vErrors === null) vErrors = "+c+".errors; else vErrors = vErrors.concat("+c+".errors); errors = vErrors.length; } ",u&&(r+=" else { ")}return r},Jv=function(e,t,n){var r=" ",s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,o=!e.opts.allErrors,u=e.util.copy(e),f="";u.level++;var h="valid"+u.level,d=u.baseId,c=!0,p=s;if(p)for(var _,m=-1,y=p.length-1;m<y;)_=p[m+=1],(e.opts.strictKeywords?typeof _=="object"&&Object.keys(_).length>0||_===!1:e.util.schemaHasRules(_,e.RULES.all))&&(c=!1,u.schema=_,u.schemaPath=a+"["+m+"]",u.errSchemaPath=l+"/"+m,r+="  "+e.validate(u)+" ",u.baseId=d,o&&(r+=" if ("+h+") { ",f+="}"));return o&&(c?r+=" if (true) { ":r+=" "+f.slice(0,-1)+" "),r},Kv=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,h="data"+(a||""),d="valid"+s,c="errs__"+s,p=e.util.copy(e),_="";p.level++;var m="valid"+p.level,y=l.every(function(R){return e.opts.strictKeywords?typeof R=="object"&&Object.keys(R).length>0||R===!1:e.util.schemaHasRules(R,e.RULES.all)});if(y){var O=p.baseId;r+=" var "+c+" = errors; var "+d+" = false;  ";var T=e.compositeRule;e.compositeRule=p.compositeRule=!0;var N=l;if(N)for(var g,k=-1,w=N.length-1;k<w;)g=N[k+=1],p.schema=g,p.schemaPath=o+"["+k+"]",p.errSchemaPath=u+"/"+k,r+="  "+e.validate(p)+" ",p.baseId=O,r+=" "+d+" = "+d+" || "+m+"; if (!"+d+") { ",_+="}";e.compositeRule=p.compositeRule=T,r+=" "+_+" if (!"+d+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" } else {  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else f&&(r+=" if (true) { ");return r},Zv=function(e,t,n){var r=" ",s=e.schema[t],a=e.errSchemaPath+"/"+t;e.opts.allErrors;var l=e.util.toQuotedString(s);return e.opts.$comment===!0?r+=" console.log("+l+");":typeof e.opts.$comment=="function"&&(r+=" self._opts.$comment("+l+", "+e.util.toQuotedString(a)+", validate.root.schema);"),r},e1=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,h="data"+(a||""),d="valid"+s,c=e.opts.$data&&l&&l.$data;c&&(r+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; "),c||(r+=" var schema"+s+" = validate.schema"+o+";"),r+="var "+d+" = equal("+h+", schema"+s+"); if (!"+d+") {   ";var p=p||[];p.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValue: schema"+s+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to constant' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var _=r;return r=p.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+_+"]); ":r+=" validate.errors = ["+_+"]; return false; ":r+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",f&&(r+=" else { "),r},t1=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,h="data"+(a||""),d="valid"+s,c="errs__"+s,p=e.util.copy(e),_="";p.level++;var m="valid"+p.level,y="i"+s,O=p.dataLevel=e.dataLevel+1,T="data"+O,N=e.baseId,g=e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all);if(r+="var "+c+" = errors;var "+d+";",g){var k=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=l,p.schemaPath=o,p.errSchemaPath=u,r+=" var "+m+" = false; for (var "+y+" = 0; "+y+" < "+h+".length; "+y+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers,!0);var w=h+"["+y+"]";p.dataPathArr[O]=y;var R=e.validate(p);p.baseId=N,e.util.varOccurences(R,T)<2?r+=" "+e.util.varReplace(R,T,w)+" ":r+=" var "+T+" = "+w+"; "+R+" ",r+=" if ("+m+") break; }  ",e.compositeRule=p.compositeRule=k,r+=" "+_+" if (!"+m+") {"}else r+=" if ("+h+".length == 0) {";var S=S||[];S.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should contain a valid item' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var B=r;return r=S.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+B+"]); ":r+=" validate.errors = ["+B+"]; return false; ":r+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { ",g&&(r+="  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; } "),e.opts.allErrors&&(r+=" } "),r},r1=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,h="data"+(a||""),d="errs__"+s,c=e.util.copy(e),p="";c.level++;var _="valid"+c.level,m={},y={},O=e.opts.ownProperties;for(k in l)if(k!="__proto__"){var T=l[k],N=Array.isArray(T)?y:m;N[k]=T}r+="var "+d+" = errors;";var g=e.errorPath;r+="var missing"+s+";";for(var k in y)if(N=y[k],N.length){if(r+=" if ( "+h+e.util.getProperty(k)+" !== undefined ",O&&(r+=" && Object.prototype.hasOwnProperty.call("+h+", '"+e.util.escapeQuotes(k)+"') "),f){r+=" && ( ";var w=N;if(w)for(var R,S=-1,B=w.length-1;S<B;){R=w[S+=1],S&&(r+=" || ");var D=e.util.getProperty(R),L=h+D;r+=" ( ( "+L+" === undefined ",O&&(r+=" || ! Object.prototype.hasOwnProperty.call("+h+", '"+e.util.escapeQuotes(R)+"') "),r+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?R:D)+") ) "}r+=")) {  ";var A="missing"+s,I="' + "+A+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(g,A,!0):g+" + "+A);var x=x||[];x.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(k)+"', missingProperty: '"+I+"', depsCount: "+N.length+", deps: '"+e.util.escapeQuotes(N.length==1?N[0]:N.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",N.length==1?r+="property "+e.util.escapeQuotes(N[0]):r+="properties "+e.util.escapeQuotes(N.join(", ")),r+=" when property "+e.util.escapeQuotes(k)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var j=r;r=x.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+j+"]); ":r+=" validate.errors = ["+j+"]; return false; ":r+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var re=N;if(re)for(var R,Z=-1,$=re.length-1;Z<$;){R=re[Z+=1];var D=e.util.getProperty(R),I=e.util.escapeQuotes(R),L=h+D;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(g,R,e.opts.jsonPointers)),r+=" if ( "+L+" === undefined ",O&&(r+=" || ! Object.prototype.hasOwnProperty.call("+h+", '"+e.util.escapeQuotes(R)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(k)+"', missingProperty: '"+I+"', depsCount: "+N.length+", deps: '"+e.util.escapeQuotes(N.length==1?N[0]:N.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",N.length==1?r+="property "+e.util.escapeQuotes(N[0]):r+="properties "+e.util.escapeQuotes(N.join(", ")),r+=" when property "+e.util.escapeQuotes(k)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",f&&(p+="}",r+=" else { ")}e.errorPath=g;var G=c.baseId;for(var k in m){var T=m[k];(e.opts.strictKeywords?typeof T=="object"&&Object.keys(T).length>0||T===!1:e.util.schemaHasRules(T,e.RULES.all))&&(r+=" "+_+" = true; if ( "+h+e.util.getProperty(k)+" !== undefined ",O&&(r+=" && Object.prototype.hasOwnProperty.call("+h+", '"+e.util.escapeQuotes(k)+"') "),r+=") { ",c.schema=T,c.schemaPath=o+e.util.getProperty(k),c.errSchemaPath=u+"/"+e.util.escapeFragment(k),r+="  "+e.validate(c)+" ",c.baseId=G,r+=" }  ",f&&(r+=" if ("+_+") { ",p+="}"))}return f&&(r+="   "+p+" if ("+d+" == errors) {"),r},n1=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,h="data"+(a||""),d="valid"+s,c=e.opts.$data&&l&&l.$data;c&&(r+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ");var p="i"+s,_="schema"+s;c||(r+=" var "+_+" = validate.schema"+o+";"),r+="var "+d+";",c&&(r+=" if (schema"+s+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+s+")) "+d+" = false; else {"),r+=""+d+" = false;for (var "+p+"=0; "+p+"<"+_+".length; "+p+"++) if (equal("+h+", "+_+"["+p+"])) { "+d+" = true; break; }",c&&(r+="  }  "),r+=" if (!"+d+") {   ";var m=m||[];m.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValues: schema"+s+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var y=r;return r=m.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",f&&(r+=" else { "),r},i1=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,h="data"+(a||"");if(e.opts.format===!1)return f&&(r+=" if (true) { "),r;var d=e.opts.$data&&l&&l.$data,c;d?(r+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",c="schema"+s):c=l;var p=e.opts.unknownFormats,_=Array.isArray(p);if(d){var m="format"+s,y="isObject"+s,O="formatType"+s;r+=" var "+m+" = formats["+c+"]; var "+y+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+O+" = "+y+" && "+m+".type || 'string'; if ("+y+") { ",e.async&&(r+=" var async"+s+" = "+m+".async; "),r+=" "+m+" = "+m+".validate; } if (  ",d&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'string') || "),r+=" (",p!="ignore"&&(r+=" ("+c+" && !"+m+" ",_&&(r+=" && self._opts.unknownFormats.indexOf("+c+") == -1 "),r+=") || "),r+=" ("+m+" && "+O+" == '"+n+"' && !(typeof "+m+" == 'function' ? ",e.async?r+=" (async"+s+" ? await "+m+"("+h+") : "+m+"("+h+")) ":r+=" "+m+"("+h+") ",r+=" : "+m+".test("+h+"))))) {"}else{var m=e.formats[l];if(!m){if(p=="ignore")return e.logger.warn('unknown format "'+l+'" ignored in schema at path "'+e.errSchemaPath+'"'),f&&(r+=" if (true) { "),r;if(_&&p.indexOf(l)>=0)return f&&(r+=" if (true) { "),r;throw new Error('unknown format "'+l+'" is used in schema at path "'+e.errSchemaPath+'"')}var y=typeof m=="object"&&!(m instanceof RegExp)&&m.validate,O=y&&m.type||"string";if(y){var T=m.async===!0;m=m.validate}if(O!=n)return f&&(r+=" if (true) { "),r;if(T){if(!e.async)throw new Error("async format in sync schema");var N="formats"+e.util.getProperty(l)+".validate";r+=" if (!(await "+N+"("+h+"))) { "}else{r+=" if (! ";var N="formats"+e.util.getProperty(l);y&&(N+=".validate"),typeof m=="function"?r+=" "+N+"("+h+") ":r+=" "+N+".test("+h+") ",r+=") { "}}var g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { format:  ",d?r+=""+c:r+=""+e.util.toQuotedString(l),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match format "`,d?r+="' + "+c+" + '":r+=""+e.util.escapeQuotes(l),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",d?r+="validate.schema"+o:r+=""+e.util.toQuotedString(l),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var k=r;return r=g.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+k+"]); ":r+=" validate.errors = ["+k+"]; return false; ":r+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",f&&(r+=" else { "),r},a1=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,h="data"+(a||""),d="valid"+s,c="errs__"+s,p=e.util.copy(e);p.level++;var _="valid"+p.level,m=e.schema.then,y=e.schema.else,O=m!==void 0&&(e.opts.strictKeywords?typeof m=="object"&&Object.keys(m).length>0||m===!1:e.util.schemaHasRules(m,e.RULES.all)),T=y!==void 0&&(e.opts.strictKeywords?typeof y=="object"&&Object.keys(y).length>0||y===!1:e.util.schemaHasRules(y,e.RULES.all)),N=p.baseId;if(O||T){var g;p.createErrors=!1,p.schema=l,p.schemaPath=o,p.errSchemaPath=u,r+=" var "+c+" = errors; var "+d+" = true;  ";var k=e.compositeRule;e.compositeRule=p.compositeRule=!0,r+="  "+e.validate(p)+" ",p.baseId=N,p.createErrors=!0,r+="  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; }  ",e.compositeRule=p.compositeRule=k,O?(r+=" if ("+_+") {  ",p.schema=e.schema.then,p.schemaPath=e.schemaPath+".then",p.errSchemaPath=e.errSchemaPath+"/then",r+="  "+e.validate(p)+" ",p.baseId=N,r+=" "+d+" = "+_+"; ",O&&T?(g="ifClause"+s,r+=" var "+g+" = 'then'; "):g="'then'",r+=" } ",T&&(r+=" else { ")):r+=" if (!"+_+") { ",T&&(p.schema=e.schema.else,p.schemaPath=e.schemaPath+".else",p.errSchemaPath=e.errSchemaPath+"/else",r+="  "+e.validate(p)+" ",p.baseId=N,r+=" "+d+" = "+_+"; ",O&&T?(g="ifClause"+s,r+=" var "+g+" = 'else'; "):g="'else'",r+=" } "),r+=" if (!"+d+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { failingKeyword: "+g+" } ",e.opts.messages!==!1&&(r+=` , message: 'should match "' + `+g+` + '" schema' `),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" }   ",f&&(r+=" else { ")}else f&&(r+=" if (true) { ");return r},s1=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,h="data"+(a||""),d="valid"+s,c="errs__"+s,p=e.util.copy(e),_="";p.level++;var m="valid"+p.level,y="i"+s,O=p.dataLevel=e.dataLevel+1,T="data"+O,N=e.baseId;if(r+="var "+c+" = errors;var "+d+";",Array.isArray(l)){var g=e.schema.additionalItems;if(g===!1){r+=" "+d+" = "+h+".length <= "+l.length+"; ";var k=u;u=e.errSchemaPath+"/additionalItems",r+="  if (!"+d+") {   ";var w=w||[];w.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+l.length+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have more than "+l.length+" items' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var R=r;r=w.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",u=k,f&&(_+="}",r+=" else { ")}var S=l;if(S){for(var B,D=-1,L=S.length-1;D<L;)if(B=S[D+=1],e.opts.strictKeywords?typeof B=="object"&&Object.keys(B).length>0||B===!1:e.util.schemaHasRules(B,e.RULES.all)){r+=" "+m+" = true; if ("+h+".length > "+D+") { ";var A=h+"["+D+"]";p.schema=B,p.schemaPath=o+"["+D+"]",p.errSchemaPath=u+"/"+D,p.errorPath=e.util.getPathExpr(e.errorPath,D,e.opts.jsonPointers,!0),p.dataPathArr[O]=D;var I=e.validate(p);p.baseId=N,e.util.varOccurences(I,T)<2?r+=" "+e.util.varReplace(I,T,A)+" ":r+=" var "+T+" = "+A+"; "+I+" ",r+=" }  ",f&&(r+=" if ("+m+") { ",_+="}")}}if(typeof g=="object"&&(e.opts.strictKeywords?typeof g=="object"&&Object.keys(g).length>0||g===!1:e.util.schemaHasRules(g,e.RULES.all))){p.schema=g,p.schemaPath=e.schemaPath+".additionalItems",p.errSchemaPath=e.errSchemaPath+"/additionalItems",r+=" "+m+" = true; if ("+h+".length > "+l.length+") {  for (var "+y+" = "+l.length+"; "+y+" < "+h+".length; "+y+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers,!0);var A=h+"["+y+"]";p.dataPathArr[O]=y;var I=e.validate(p);p.baseId=N,e.util.varOccurences(I,T)<2?r+=" "+e.util.varReplace(I,T,A)+" ":r+=" var "+T+" = "+A+"; "+I+" ",f&&(r+=" if (!"+m+") break; "),r+=" } }  ",f&&(r+=" if ("+m+") { ",_+="}")}}else if(e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all)){p.schema=l,p.schemaPath=o,p.errSchemaPath=u,r+="  for (var "+y+" = 0; "+y+" < "+h+".length; "+y+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers,!0);var A=h+"["+y+"]";p.dataPathArr[O]=y;var I=e.validate(p);p.baseId=N,e.util.varOccurences(I,T)<2?r+=" "+e.util.varReplace(I,T,A)+" ":r+=" var "+T+" = "+A+"; "+I+" ",f&&(r+=" if (!"+m+") break; "),r+=" }"}return f&&(r+=" "+_+" if ("+c+" == errors) {"),r},uu=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,N,h="data"+(a||""),d=e.opts.$data&&l&&l.$data,c;d?(r+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",c="schema"+s):c=l;var p=t=="maximum",_=p?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[_],y=e.opts.$data&&m&&m.$data,O=p?"<":">",T=p?">":"<",N=void 0;if(!(d||typeof l=="number"||l===void 0))throw new Error(t+" must be number");if(!(y||m===void 0||typeof m=="number"||typeof m=="boolean"))throw new Error(_+" must be number or boolean");if(y){var g=e.util.getData(m.$data,a,e.dataPathArr),k="exclusive"+s,w="exclType"+s,R="exclIsNumber"+s,S="op"+s,B="' + "+S+" + '";r+=" var schemaExcl"+s+" = "+g+"; ",g="schemaExcl"+s,r+=" var "+k+"; var "+w+" = typeof "+g+"; if ("+w+" != 'boolean' && "+w+" != 'undefined' && "+w+" != 'number') { ";var N=_,D=D||[];D.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(N||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: '"+_+" should be boolean' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var L=r;r=D.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+L+"]); ":r+=" validate.errors = ["+L+"]; return false; ":r+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else if ( ",d&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),r+=" "+w+" == 'number' ? ( ("+k+" = "+c+" === undefined || "+g+" "+O+"= "+c+") ? "+h+" "+T+"= "+g+" : "+h+" "+T+" "+c+" ) : ( ("+k+" = "+g+" === true) ? "+h+" "+T+"= "+c+" : "+h+" "+T+" "+c+" ) || "+h+" !== "+h+") { var op"+s+" = "+k+" ? '"+O+"' : '"+O+"='; ",l===void 0&&(N=_,u=e.errSchemaPath+"/"+_,c=g,d=y)}else{var R=typeof m=="number",B=O;if(R&&d){var S="'"+B+"'";r+=" if ( ",d&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),r+=" ( "+c+" === undefined || "+m+" "+O+"= "+c+" ? "+h+" "+T+"= "+m+" : "+h+" "+T+" "+c+" ) || "+h+" !== "+h+") { "}else{R&&l===void 0?(k=!0,N=_,u=e.errSchemaPath+"/"+_,c=m,T+="="):(R&&(c=Math[p?"min":"max"](m,l)),m===(R?c:!0)?(k=!0,N=_,u=e.errSchemaPath+"/"+_,T+="="):(k=!1,B+="="));var S="'"+B+"'";r+=" if ( ",d&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),r+=" "+h+" "+T+" "+c+" || "+h+" !== "+h+") { "}}N=N||t;var D=D||[];D.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(N||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { comparison: "+S+", limit: "+c+", exclusive: "+k+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be "+B+" ",d?r+="' + "+c:r+=""+c+"'"),e.opts.verbose&&(r+=" , schema:  ",d?r+="validate.schema"+o:r+=""+l,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var L=r;return r=D.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+L+"]); ":r+=" validate.errors = ["+L+"]; return false; ":r+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",f&&(r+=" else { "),r},fu=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,_,h="data"+(a||""),d=e.opts.$data&&l&&l.$data,c;if(d?(r+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",c="schema"+s):c=l,!(d||typeof l=="number"))throw new Error(t+" must be number");var p=t=="maxItems"?">":"<";r+="if ( ",d&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),r+=" "+h+".length "+p+" "+c+") { ";var _=t,m=m||[];m.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(_||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+c+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",t=="maxItems"?r+="more":r+="fewer",r+=" than ",d?r+="' + "+c+" + '":r+=""+l,r+=" items' "),e.opts.verbose&&(r+=" , schema:  ",d?r+="validate.schema"+o:r+=""+l,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var y=r;return r=m.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",f&&(r+=" else { "),r},cu=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,_,h="data"+(a||""),d=e.opts.$data&&l&&l.$data,c;if(d?(r+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",c="schema"+s):c=l,!(d||typeof l=="number"))throw new Error(t+" must be number");var p=t=="maxLength"?">":"<";r+="if ( ",d&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),e.opts.unicode===!1?r+=" "+h+".length ":r+=" ucs2length("+h+") ",r+=" "+p+" "+c+") { ";var _=t,m=m||[];m.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(_||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+c+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be ",t=="maxLength"?r+="longer":r+="shorter",r+=" than ",d?r+="' + "+c+" + '":r+=""+l,r+=" characters' "),e.opts.verbose&&(r+=" , schema:  ",d?r+="validate.schema"+o:r+=""+l,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var y=r;return r=m.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",f&&(r+=" else { "),r},du=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,_,h="data"+(a||""),d=e.opts.$data&&l&&l.$data,c;if(d?(r+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",c="schema"+s):c=l,!(d||typeof l=="number"))throw new Error(t+" must be number");var p=t=="maxProperties"?">":"<";r+="if ( ",d&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),r+=" Object.keys("+h+").length "+p+" "+c+") { ";var _=t,m=m||[];m.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(_||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+c+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",t=="maxProperties"?r+="more":r+="fewer",r+=" than ",d?r+="' + "+c+" + '":r+=""+l,r+=" properties' "),e.opts.verbose&&(r+=" , schema:  ",d?r+="validate.schema"+o:r+=""+l,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var y=r;return r=m.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",f&&(r+=" else { "),r},l1=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,h="data"+(a||""),d=e.opts.$data&&l&&l.$data,c;if(d?(r+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",c="schema"+s):c=l,!(d||typeof l=="number"))throw new Error(t+" must be number");r+="var division"+s+";if (",d&&(r+=" "+c+" !== undefined && ( typeof "+c+" != 'number' || "),r+=" (division"+s+" = "+h+" / "+c+", ",e.opts.multipleOfPrecision?r+=" Math.abs(Math.round(division"+s+") - division"+s+") > 1e-"+e.opts.multipleOfPrecision+" ":r+=" division"+s+" !== parseInt(division"+s+") ",r+=" ) ",d&&(r+="  )  "),r+=" ) {   ";var p=p||[];p.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { multipleOf: "+c+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be multiple of ",d?r+="' + "+c:r+=""+c+"'"),e.opts.verbose&&(r+=" , schema:  ",d?r+="validate.schema"+o:r+=""+l,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var _=r;return r=p.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+_+"]); ":r+=" validate.errors = ["+_+"]; return false; ":r+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",f&&(r+=" else { "),r},o1=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,h="data"+(a||""),d="errs__"+s,c=e.util.copy(e);c.level++;var p="valid"+c.level;if(e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all)){c.schema=l,c.schemaPath=o,c.errSchemaPath=u,r+=" var "+d+" = errors;  ";var _=e.compositeRule;e.compositeRule=c.compositeRule=!0,c.createErrors=!1;var m;c.opts.allErrors&&(m=c.opts.allErrors,c.opts.allErrors=!1),r+=" "+e.validate(c)+" ",c.createErrors=!0,m&&(c.opts.allErrors=m),e.compositeRule=c.compositeRule=_,r+=" if ("+p+") {   ";var y=y||[];y.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var O=r;r=y.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+O+"]); ":r+=" validate.errors = ["+O+"]; return false; ":r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",f&&(r+=" if (false) { ");return r},u1=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,h="data"+(a||""),d="valid"+s,c="errs__"+s,p=e.util.copy(e),_="";p.level++;var m="valid"+p.level,y=p.baseId,O="prevValid"+s,T="passingSchemas"+s;r+="var "+c+" = errors , "+O+" = false , "+d+" = false , "+T+" = null; ";var N=e.compositeRule;e.compositeRule=p.compositeRule=!0;var g=l;if(g)for(var k,w=-1,R=g.length-1;w<R;)k=g[w+=1],(e.opts.strictKeywords?typeof k=="object"&&Object.keys(k).length>0||k===!1:e.util.schemaHasRules(k,e.RULES.all))?(p.schema=k,p.schemaPath=o+"["+w+"]",p.errSchemaPath=u+"/"+w,r+="  "+e.validate(p)+" ",p.baseId=y):r+=" var "+m+" = true; ",w&&(r+=" if ("+m+" && "+O+") { "+d+" = false; "+T+" = ["+T+", "+w+"]; } else { ",_+="}"),r+=" if ("+m+") { "+d+" = "+O+" = true; "+T+" = "+w+"; }";return e.compositeRule=p.compositeRule=N,r+=""+_+"if (!"+d+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { passingSchemas: "+T+" } ",e.opts.messages!==!1&&(r+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+="} else {  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; }",e.opts.allErrors&&(r+=" } "),r},f1=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,h="data"+(a||""),d=e.opts.$data&&l&&l.$data,c;d?(r+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",c="schema"+s):c=l;var p=d?"(new RegExp("+c+"))":e.usePattern(l);r+="if ( ",d&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'string') || "),r+=" !"+p+".test("+h+") ) {   ";var _=_||[];_.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { pattern:  ",d?r+=""+c:r+=""+e.util.toQuotedString(l),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match pattern "`,d?r+="' + "+c+" + '":r+=""+e.util.escapeQuotes(l),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",d?r+="validate.schema"+o:r+=""+e.util.toQuotedString(l),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var m=r;return r=_.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+m+"]); ":r+=" validate.errors = ["+m+"]; return false; ":r+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",f&&(r+=" else { "),r},c1=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,h="data"+(a||""),d="errs__"+s,c=e.util.copy(e),p="";c.level++;var _="valid"+c.level,m="key"+s,y="idx"+s,O=c.dataLevel=e.dataLevel+1,T="data"+O,N="dataProperties"+s,g=Object.keys(l||{}).filter(Z),k=e.schema.patternProperties||{},w=Object.keys(k).filter(Z),R=e.schema.additionalProperties,S=g.length||w.length,B=R===!1,D=typeof R=="object"&&Object.keys(R).length,L=e.opts.removeAdditional,A=B||D||L,I=e.opts.ownProperties,x=e.baseId,j=e.schema.required;if(j&&!(e.opts.$data&&j.$data)&&j.length<e.opts.loopRequired)var re=e.util.toHash(j);function Z(z){return z!=="__proto__"}if(r+="var "+d+" = errors;var "+_+" = true;",I&&(r+=" var "+N+" = undefined;"),A){if(I?r+=" "+N+" = "+N+" || Object.keys("+h+"); for (var "+y+"=0; "+y+"<"+N+".length; "+y+"++) { var "+m+" = "+N+"["+y+"]; ":r+=" for (var "+m+" in "+h+") { ",S){if(r+=" var isAdditional"+s+" = !(false ",g.length)if(g.length>8)r+=" || validate.schema"+o+".hasOwnProperty("+m+") ";else{var $=g;if($)for(var G,X=-1,oe=$.length-1;X<oe;)G=$[X+=1],r+=" || "+m+" == "+e.util.toQuotedString(G)+" "}if(w.length){var Q=w;if(Q)for(var le,Ve=-1,ze=Q.length-1;Ve<ze;)le=Q[Ve+=1],r+=" || "+e.usePattern(le)+".test("+m+") "}r+=" ); if (isAdditional"+s+") { "}if(L=="all")r+=" delete "+h+"["+m+"]; ";else{var ke=e.errorPath,Ie="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),B)if(L)r+=" delete "+h+"["+m+"]; ";else{r+=" "+_+" = false; ";var ve=u;u=e.errSchemaPath+"/additionalProperties";var he=he||[];he.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { additionalProperty: '"+Ie+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is an invalid additional property":r+="should NOT have additional properties",r+="' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var Fe=r;r=he.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+Fe+"]); ":r+=" validate.errors = ["+Fe+"]; return false; ":r+=" var err = "+Fe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=ve,f&&(r+=" break; ")}else if(D)if(L=="failing"){r+=" var "+d+" = errors;  ";var ot=e.compositeRule;e.compositeRule=c.compositeRule=!0,c.schema=R,c.schemaPath=e.schemaPath+".additionalProperties",c.errSchemaPath=e.errSchemaPath+"/additionalProperties",c.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var He=h+"["+m+"]";c.dataPathArr[O]=m;var fe=e.validate(c);c.baseId=x,e.util.varOccurences(fe,T)<2?r+=" "+e.util.varReplace(fe,T,He)+" ":r+=" var "+T+" = "+He+"; "+fe+" ",r+=" if (!"+_+") { errors = "+d+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+h+"["+m+"]; }  ",e.compositeRule=c.compositeRule=ot}else{c.schema=R,c.schemaPath=e.schemaPath+".additionalProperties",c.errSchemaPath=e.errSchemaPath+"/additionalProperties",c.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var He=h+"["+m+"]";c.dataPathArr[O]=m;var fe=e.validate(c);c.baseId=x,e.util.varOccurences(fe,T)<2?r+=" "+e.util.varReplace(fe,T,He)+" ":r+=" var "+T+" = "+He+"; "+fe+" ",f&&(r+=" if (!"+_+") break; ")}e.errorPath=ke}S&&(r+=" } "),r+=" }  ",f&&(r+=" if ("+_+") { ",p+="}")}var Te=e.opts.useDefaults&&!e.compositeRule;if(g.length){var dt=g;if(dt)for(var G,Ot=-1,tr=dt.length-1;Ot<tr;){G=dt[Ot+=1];var At=l[G];if(e.opts.strictKeywords?typeof At=="object"&&Object.keys(At).length>0||At===!1:e.util.schemaHasRules(At,e.RULES.all)){var $t=e.util.getProperty(G),He=h+$t,Kt=Te&&At.default!==void 0;c.schema=At,c.schemaPath=o+$t,c.errSchemaPath=u+"/"+e.util.escapeFragment(G),c.errorPath=e.util.getPath(e.errorPath,G,e.opts.jsonPointers),c.dataPathArr[O]=e.util.toQuotedString(G);var fe=e.validate(c);if(c.baseId=x,e.util.varOccurences(fe,T)<2){fe=e.util.varReplace(fe,T,He);var _t=He}else{var _t=T;r+=" var "+T+" = "+He+"; "}if(Kt)r+=" "+fe+" ";else{if(re&&re[G]){r+=" if ( "+_t+" === undefined ",I&&(r+=" || ! Object.prototype.hasOwnProperty.call("+h+", '"+e.util.escapeQuotes(G)+"') "),r+=") { "+_+" = false; ";var ke=e.errorPath,ve=u,Ct=e.util.escapeQuotes(G);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(ke,G,e.opts.jsonPointers)),u=e.errSchemaPath+"/required";var he=he||[];he.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+Ct+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+Ct+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var Fe=r;r=he.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+Fe+"]); ":r+=" validate.errors = ["+Fe+"]; return false; ":r+=" var err = "+Fe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=ve,e.errorPath=ke,r+=" } else { "}else f?(r+=" if ( "+_t+" === undefined ",I&&(r+=" || ! Object.prototype.hasOwnProperty.call("+h+", '"+e.util.escapeQuotes(G)+"') "),r+=") { "+_+" = true; } else { "):(r+=" if ("+_t+" !== undefined ",I&&(r+=" &&   Object.prototype.hasOwnProperty.call("+h+", '"+e.util.escapeQuotes(G)+"') "),r+=" ) { ");r+=" "+fe+" } "}}f&&(r+=" if ("+_+") { ",p+="}")}}if(w.length){var Ut=w;if(Ut)for(var le,Zt=-1,hr=Ut.length-1;Zt<hr;){le=Ut[Zt+=1];var At=k[le];if(e.opts.strictKeywords?typeof At=="object"&&Object.keys(At).length>0||At===!1:e.util.schemaHasRules(At,e.RULES.all)){c.schema=At,c.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(le),c.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(le),I?r+=" "+N+" = "+N+" || Object.keys("+h+"); for (var "+y+"=0; "+y+"<"+N+".length; "+y+"++) { var "+m+" = "+N+"["+y+"]; ":r+=" for (var "+m+" in "+h+") { ",r+=" if ("+e.usePattern(le)+".test("+m+")) { ",c.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var He=h+"["+m+"]";c.dataPathArr[O]=m;var fe=e.validate(c);c.baseId=x,e.util.varOccurences(fe,T)<2?r+=" "+e.util.varReplace(fe,T,He)+" ":r+=" var "+T+" = "+He+"; "+fe+" ",f&&(r+=" if (!"+_+") break; "),r+=" } ",f&&(r+=" else "+_+" = true; "),r+=" }  ",f&&(r+=" if ("+_+") { ",p+="}")}}}return f&&(r+=" "+p+" if ("+d+" == errors) {"),r},d1=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,h="data"+(a||""),d="errs__"+s,c=e.util.copy(e),p="";c.level++;var _="valid"+c.level;if(r+="var "+d+" = errors;",e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all)){c.schema=l,c.schemaPath=o,c.errSchemaPath=u;var m="key"+s,y="idx"+s,O="i"+s,T="' + "+m+" + '",N=c.dataLevel=e.dataLevel+1,g="data"+N,k="dataProperties"+s,w=e.opts.ownProperties,R=e.baseId;w&&(r+=" var "+k+" = undefined; "),w?r+=" "+k+" = "+k+" || Object.keys("+h+"); for (var "+y+"=0; "+y+"<"+k+".length; "+y+"++) { var "+m+" = "+k+"["+y+"]; ":r+=" for (var "+m+" in "+h+") { ",r+=" var startErrs"+s+" = errors; ";var S=m,B=e.compositeRule;e.compositeRule=c.compositeRule=!0;var D=e.validate(c);c.baseId=R,e.util.varOccurences(D,g)<2?r+=" "+e.util.varReplace(D,g,S)+" ":r+=" var "+g+" = "+S+"; "+D+" ",e.compositeRule=c.compositeRule=B,r+=" if (!"+_+") { for (var "+O+"=startErrs"+s+"; "+O+"<errors; "+O+"++) { vErrors["+O+"].propertyName = "+m+"; }   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { propertyName: '"+T+"' } ",e.opts.messages!==!1&&(r+=" , message: 'property name \\'"+T+"\\' is invalid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),f&&(r+=" break; "),r+=" } }"}return f&&(r+=" "+p+" if ("+d+" == errors) {"),r},h1=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,h="data"+(a||""),d="valid"+s,c=e.opts.$data&&l&&l.$data;c&&(r+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ");var p="schema"+s;if(!c)if(l.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var _=[],m=l;if(m)for(var y,O=-1,T=m.length-1;O<T;){y=m[O+=1];var N=e.schema.properties[y];N&&(e.opts.strictKeywords?typeof N=="object"&&Object.keys(N).length>0||N===!1:e.util.schemaHasRules(N,e.RULES.all))||(_[_.length]=y)}}else var _=l;if(c||_.length){var g=e.errorPath,k=c||_.length>=e.opts.loopRequired,w=e.opts.ownProperties;if(f)if(r+=" var missing"+s+"; ",k){c||(r+=" var "+p+" = validate.schema"+o+"; ");var R="i"+s,S="schema"+s+"["+R+"]",B="' + "+S+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(g,S,e.opts.jsonPointers)),r+=" var "+d+" = true; ",c&&(r+=" if (schema"+s+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+s+")) "+d+" = false; else {"),r+=" for (var "+R+" = 0; "+R+" < "+p+".length; "+R+"++) { "+d+" = "+h+"["+p+"["+R+"]] !== undefined ",w&&(r+=" &&   Object.prototype.hasOwnProperty.call("+h+", "+p+"["+R+"]) "),r+="; if (!"+d+") break; } ",c&&(r+="  }  "),r+="  if (!"+d+") {   ";var D=D||[];D.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+B+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+B+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var L=r;r=D.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+L+"]); ":r+=" validate.errors = ["+L+"]; return false; ":r+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var A=_;if(A)for(var I,R=-1,x=A.length-1;R<x;){I=A[R+=1],R&&(r+=" || ");var j=e.util.getProperty(I),re=h+j;r+=" ( ( "+re+" === undefined ",w&&(r+=" || ! Object.prototype.hasOwnProperty.call("+h+", '"+e.util.escapeQuotes(I)+"') "),r+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?I:j)+") ) "}r+=") {  ";var S="missing"+s,B="' + "+S+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(g,S,!0):g+" + "+S);var D=D||[];D.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+B+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+B+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var L=r;r=D.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+L+"]); ":r+=" validate.errors = ["+L+"]; return false; ":r+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(k){c||(r+=" var "+p+" = validate.schema"+o+"; ");var R="i"+s,S="schema"+s+"["+R+"]",B="' + "+S+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(g,S,e.opts.jsonPointers)),c&&(r+=" if ("+p+" && !Array.isArray("+p+")) {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+B+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+B+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+p+" !== undefined) { "),r+=" for (var "+R+" = 0; "+R+" < "+p+".length; "+R+"++) { if ("+h+"["+p+"["+R+"]] === undefined ",w&&(r+=" || ! Object.prototype.hasOwnProperty.call("+h+", "+p+"["+R+"]) "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+B+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+B+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",c&&(r+="  }  ")}else{var Z=_;if(Z)for(var I,$=-1,G=Z.length-1;$<G;){I=Z[$+=1];var j=e.util.getProperty(I),B=e.util.escapeQuotes(I),re=h+j;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(g,I,e.opts.jsonPointers)),r+=" if ( "+re+" === undefined ",w&&(r+=" || ! Object.prototype.hasOwnProperty.call("+h+", '"+e.util.escapeQuotes(I)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+B+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+B+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=g}else f&&(r+=" if (true) {");return r},p1=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,h="data"+(a||""),d="valid"+s,c=e.opts.$data&&l&&l.$data,p;if(c?(r+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",p="schema"+s):p=l,(l||c)&&e.opts.uniqueItems!==!1){c&&(r+=" var "+d+"; if ("+p+" === false || "+p+" === undefined) "+d+" = true; else if (typeof "+p+" != 'boolean') "+d+" = false; else { "),r+=" var i = "+h+".length , "+d+" = true , j; if (i > 1) { ";var _=e.schema.items&&e.schema.items.type,m=Array.isArray(_);if(!_||_=="object"||_=="array"||m&&(_.indexOf("object")>=0||_.indexOf("array")>=0))r+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+h+"[i], "+h+"[j])) { "+d+" = false; break outer; } } } ";else{r+=" var itemIndices = {}, item; for (;i--;) { var item = "+h+"[i]; ";var y="checkDataType"+(m?"s":"");r+=" if ("+e.util[y](_,"item",e.opts.strictNumbers,!0)+") continue; ",m&&(r+=` if (typeof item == 'string') item = '"' + item; `),r+=" if (typeof itemIndices[item] == 'number') { "+d+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}r+=" } ",c&&(r+="  }  "),r+=" if (!"+d+") {   ";var O=O||[];O.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(r+=" , schema:  ",c?r+="validate.schema"+o:r+=""+l,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var T=r;r=O.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+T+"]); ":r+=" validate.errors = ["+T+"]; return false; ":r+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",f&&(r+=" else { ")}else f&&(r+=" if (true) { ");return r},_1={$ref:Yv,allOf:Jv,anyOf:Kv,$comment:Zv,const:e1,contains:t1,dependencies:r1,enum:n1,format:i1,if:a1,items:s1,maximum:uu,minimum:uu,maxItems:fu,minItems:fu,maxLength:cu,minLength:cu,maxProperties:du,minProperties:du,multipleOf:l1,not:o1,oneOf:u1,pattern:f1,properties:c1,propertyNames:d1,required:h1,uniqueItems:p1,validate:Bh},hu=_1,Ls=Pi.toHash,m1=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"],n=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],r=["number","integer","string","array","object","boolean","null"];return e.all=Ls(t),e.types=Ls(r),e.forEach(function(s){s.rules=s.rules.map(function(a){var l;if(typeof a=="object"){var o=Object.keys(a)[0];l=a[o],a=o,l.forEach(function(f){t.push(f),e.all[f]=!0})}t.push(a);var u=e.all[a]={keyword:a,code:hu[a],implements:l};return u}),e.all.$comment={keyword:"$comment",code:hu.$comment},s.type&&(e.types[s.type]=s)}),e.keywords=Ls(t.concat(n)),e.custom={},e},pu=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],v1=function(i,e){for(var t=0;t<e.length;t++){i=JSON.parse(JSON.stringify(i));var n=e[t].split("/"),r=i,s;for(s=1;s<n.length;s++)r=r[n[s]];for(s=0;s<pu.length;s++){var a=pu[s],l=r[a];l&&(r[a]={anyOf:[l,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return i},g1=Bl.MissingRef,b1=Wh;function Wh(i,e,t){var n=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(t=e,e=void 0);var r=s(i).then(function(){var l=n._addSchema(i,void 0,e);return l.validate||a(l)});return t&&r.then(function(l){t(null,l)},t),r;function s(l){var o=l.$schema;return o&&!n.getSchema(o)?Wh.call(n,{$ref:o},!0):Promise.resolve()}function a(l){try{return n._compile(l)}catch(u){if(u instanceof g1)return o(u);throw u}function o(u){var f=u.missingSchema;if(c(f))throw new Error("Schema "+f+" is loaded but "+u.missingRef+" cannot be resolved");var h=n._loadingSchemas[f];return h||(h=n._loadingSchemas[f]=n._opts.loadSchema(f),h.then(d,d)),h.then(function(p){if(!c(f))return s(p).then(function(){c(f)||n.addSchema(p,f,void 0,e)})}).then(function(){return a(l)});function d(){delete n._loadingSchemas[f]}function c(p){return n._refs[p]||n._schemas[p]}}}}var w1=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,h,d="data"+(a||""),c="valid"+s,p="errs__"+s,_=e.opts.$data&&l&&l.$data,m;_?(r+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",m="schema"+s):m=l;var y=this,O="definition"+s,T=y.definition,N="",g,k,w,R,S;if(_&&T.$data){S="keywordValidate"+s;var B=T.validateSchema;r+=" var "+O+" = RULES.custom['"+t+"'].definition; var "+S+" = "+O+".validate;"}else{if(R=e.useCustomRule(y,l,e.schema,e),!R)return;m="validate.schema"+o,S=R.code,g=T.compile,k=T.inline,w=T.macro}var D=S+".errors",L="i"+s,A="ruleErr"+s,I=T.async;if(I&&!e.async)throw new Error("async keyword in sync schema");if(k||w||(r+=""+D+" = null;"),r+="var "+p+" = errors;var "+c+";",_&&T.$data&&(N+="}",r+=" if ("+m+" === undefined) { "+c+" = true; } else { ",B&&(N+="}",r+=" "+c+" = "+O+".validateSchema("+m+"); if ("+c+") { ")),k)T.statements?r+=" "+R.validate+" ":r+=" "+c+" = "+R.validate+"; ";else if(w){var x=e.util.copy(e),N="";x.level++;var j="valid"+x.level;x.schema=R.validate,x.schemaPath="";var re=e.compositeRule;e.compositeRule=x.compositeRule=!0;var Z=e.validate(x).replace(/validate\.schema/g,S);e.compositeRule=x.compositeRule=re,r+=" "+Z}else{var $=$||[];$.push(r),r="",r+="  "+S+".call( ",e.opts.passContext?r+="this":r+="self",g||T.schema===!1?r+=" , "+d+" ":r+=" , "+m+" , "+d+" , validate.schema"+e.schemaPath+" ",r+=" , (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var G=a?"data"+(a-1||""):"parentData",X=a?e.dataPathArr[a]:"parentDataProperty";r+=" , "+G+" , "+X+" , rootData )  ";var oe=r;r=$.pop(),T.errors===!1?(r+=" "+c+" = ",I&&(r+="await "),r+=""+oe+"; "):I?(D="customErrors"+s,r+=" var "+D+" = null; try { "+c+" = await "+oe+"; } catch (e) { "+c+" = false; if (e instanceof ValidationError) "+D+" = e.errors; else throw e; } "):r+=" "+D+" = null; "+c+" = "+oe+"; "}if(T.modifying&&(r+=" if ("+G+") "+d+" = "+G+"["+X+"];"),r+=""+N,T.valid)f&&(r+=" if (true) { ");else{r+=" if ( ",T.valid===void 0?(r+=" !",w?r+=""+j:r+=""+c):r+=" "+!T.valid+" ",r+=") { ",h=y.keyword;var $=$||[];$.push(r),r="";var $=$||[];$.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(h||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+y.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+y.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var Q=r;r=$.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+Q+"]); ":r+=" validate.errors = ["+Q+"]; return false; ":r+=" var err = "+Q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var le=r;r=$.pop(),k?T.errors?T.errors!="full"&&(r+="  for (var "+L+"="+p+"; "+L+"<errors; "+L+"++) { var "+A+" = vErrors["+L+"]; if ("+A+".dataPath === undefined) "+A+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+A+".schemaPath === undefined) { "+A+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(r+=" "+A+".schema = "+m+"; "+A+".data = "+d+"; "),r+=" } "):T.errors===!1?r+=" "+le+" ":(r+=" if ("+p+" == errors) { "+le+" } else {  for (var "+L+"="+p+"; "+L+"<errors; "+L+"++) { var "+A+" = vErrors["+L+"]; if ("+A+".dataPath === undefined) "+A+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+A+".schemaPath === undefined) { "+A+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(r+=" "+A+".schema = "+m+"; "+A+".data = "+d+"; "),r+=" } } "):w?(r+="   var err =   ",e.createErrors!==!1?(r+=" { keyword: '"+(h||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+y.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+y.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; ")):T.errors===!1?r+=" "+le+" ":(r+=" if (Array.isArray("+D+")) { if (vErrors === null) vErrors = "+D+"; else vErrors = vErrors.concat("+D+"); errors = vErrors.length;  for (var "+L+"="+p+"; "+L+"<errors; "+L+"++) { var "+A+" = vErrors["+L+"]; if ("+A+".dataPath === undefined) "+A+".dataPath = (dataPath || '') + "+e.errorPath+";  "+A+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(r+=" "+A+".schema = "+m+"; "+A+".data = "+d+"; "),r+=" } } else { "+le+" } "),r+=" } ",f&&(r+=" else { ")}return r};const y1="http://json-schema.org/draft-07/schema#",E1="http://json-schema.org/draft-07/schema#",k1="Core schema meta-schema",D1={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},A1=["object","boolean"],C1={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Yh={$schema:y1,$id:E1,title:k1,definitions:D1,type:A1,properties:C1,default:!0};var _u=Yh,T1={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:_u.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:_u.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},N1=/^[a-z_$][a-z0-9_$-]*$/i,S1=w1,I1=T1,P1={add:R1,get:F1,remove:O1,validate:fl};function R1(i,e){var t=this.RULES;if(t.keywords[i])throw new Error("Keyword "+i+" is already defined");if(!N1.test(i))throw new Error("Keyword "+i+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var n=e.type;if(Array.isArray(n))for(var r=0;r<n.length;r++)a(i,n[r],e);else a(i,n,e);var s=e.metaSchema;s&&(e.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(s,!0))}t.keywords[i]=t.all[i]=!0;function a(l,o,u){for(var f,h=0;h<t.length;h++){var d=t[h];if(d.type==o){f=d;break}}f||(f={type:o,rules:[]},t.push(f));var c={keyword:l,definition:u,custom:!0,code:S1,implements:u.implements};f.rules.push(c),t.custom[l]=c}return this}function F1(i){var e=this.RULES.custom[i];return e?e.definition:this.RULES.keywords[i]||!1}function O1(i){var e=this.RULES;delete e.keywords[i],delete e.all[i],delete e.custom[i];for(var t=0;t<e.length;t++)for(var n=e[t].rules,r=0;r<n.length;r++)if(n[r].keyword==i){n.splice(r,1);break}return this}function fl(i,e){fl.errors=null;var t=this._validateKeyword=this._validateKeyword||this.compile(I1,!0);if(t(i))return!0;if(fl.errors=t.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(t.errors));return!1}const B1="http://json-schema.org/draft-07/schema#",L1="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",U1="Meta-schema for $data reference (JSON Schema extension proposal)",j1="object",q1=["$data"],M1={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},V1=!1,z1={$schema:B1,$id:L1,description:U1,type:j1,required:q1,properties:M1,additionalProperties:V1};var Jh=Sv,ti=Ol,H1=Lv,Kh=Ih,x1=Oh,X1=Hv,G1=m1,Zh=v1,ep=Pi,$1=rr;rr.prototype.validate=W1;rr.prototype.compile=Y1;rr.prototype.addSchema=J1;rr.prototype.addMetaSchema=K1;rr.prototype.validateSchema=Z1;rr.prototype.getSchema=tg;rr.prototype.removeSchema=ng;rr.prototype.addFormat=cg;rr.prototype.errorsText=fg;rr.prototype._addSchema=ig;rr.prototype._compile=ag;rr.prototype.compileAsync=b1;var hs=P1;rr.prototype.addKeyword=hs.add;rr.prototype.getKeyword=hs.get;rr.prototype.removeKeyword=hs.remove;rr.prototype.validateKeyword=hs.validate;var tp=Bl;rr.ValidationError=tp.Validation;rr.MissingRefError=tp.MissingRef;rr.$dataMetaSchema=Zh;var Ja="http://json-schema.org/draft-07/schema",mu=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],Q1=["/properties"];function rr(i){if(!(this instanceof rr))return new rr(i);i=this._opts=ep.copy(i)||{},vg(this),this._schemas={},this._refs={},this._fragments={},this._formats=X1(i.format),this._cache=i.cache||new H1,this._loadingSchemas={},this._compilations=[],this.RULES=G1(),this._getId=sg(i),i.loopRequired=i.loopRequired||1/0,i.errorDataPath=="property"&&(i._errorDataPathProperty=!0),i.serialize===void 0&&(i.serialize=x1),this._metaOpts=mg(this),i.formats&&pg(this),i.keywords&&_g(this),dg(this),typeof i.meta=="object"&&this.addMetaSchema(i.meta),i.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),hg(this)}function W1(i,e){var t;if(typeof i=="string"){if(t=this.getSchema(i),!t)throw new Error('no schema with key or ref "'+i+'"')}else{var n=this._addSchema(i);t=n.validate||this._compile(n)}var r=t(e);return t.$async!==!0&&(this.errors=t.errors),r}function Y1(i,e){var t=this._addSchema(i,void 0,e);return t.validate||this._compile(t)}function J1(i,e,t,n){if(Array.isArray(i)){for(var r=0;r<i.length;r++)this.addSchema(i[r],void 0,t,n);return this}var s=this._getId(i);if(s!==void 0&&typeof s!="string")throw new Error("schema id must be string");return e=ti.normalizeId(e||s),np(this,e),this._schemas[e]=this._addSchema(i,t,n,!0),this}function K1(i,e,t){return this.addSchema(i,e,t,!0),this}function Z1(i,e){var t=i.$schema;if(t!==void 0&&typeof t!="string")throw new Error("$schema must be a string");if(t=t||this._opts.defaultMeta||eg(this),!t)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(t,i);if(!n&&e){var r="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(r);else throw new Error(r)}return n}function eg(i){var e=i._opts.meta;return i._opts.defaultMeta=typeof e=="object"?i._getId(e)||e:i.getSchema(Ja)?Ja:void 0,i._opts.defaultMeta}function tg(i){var e=rp(this,i);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return rg(this,i)}}function rg(i,e){var t=ti.schema.call(i,{schema:{}},e);if(t){var n=t.schema,r=t.root,s=t.baseId,a=Jh.call(i,n,r,void 0,s);return i._fragments[e]=new Kh({ref:e,fragment:!0,schema:n,root:r,baseId:s,validate:a}),a}}function rp(i,e){return e=ti.normalizeId(e),i._schemas[e]||i._refs[e]||i._fragments[e]}function ng(i){if(i instanceof RegExp)return Ia(this,this._schemas,i),Ia(this,this._refs,i),this;switch(typeof i){case"undefined":return Ia(this,this._schemas),Ia(this,this._refs),this._cache.clear(),this;case"string":var e=rp(this,i);return e&&this._cache.del(e.cacheKey),delete this._schemas[i],delete this._refs[i],this;case"object":var t=this._opts.serialize,n=t?t(i):i;this._cache.del(n);var r=this._getId(i);r&&(r=ti.normalizeId(r),delete this._schemas[r],delete this._refs[r])}return this}function Ia(i,e,t){for(var n in e){var r=e[n];!r.meta&&(!t||t.test(n))&&(i._cache.del(r.cacheKey),delete e[n])}}function ig(i,e,t,n){if(typeof i!="object"&&typeof i!="boolean")throw new Error("schema should be object or boolean");var r=this._opts.serialize,s=r?r(i):i,a=this._cache.get(s);if(a)return a;n=n||this._opts.addUsedSchema!==!1;var l=ti.normalizeId(this._getId(i));l&&n&&np(this,l);var o=this._opts.validateSchema!==!1&&!e,u;o&&!(u=l&&l==ti.normalizeId(i.$schema))&&this.validateSchema(i,!0);var f=ti.ids.call(this,i),h=new Kh({id:l,schema:i,localRefs:f,cacheKey:s,meta:t});return l[0]!="#"&&n&&(this._refs[l]=h),this._cache.put(s,h),o&&u&&this.validateSchema(i,!0),h}function ag(i,e){if(i.compiling)return i.validate=r,r.schema=i.schema,r.errors=null,r.root=e||r,i.schema.$async===!0&&(r.$async=!0),r;i.compiling=!0;var t;i.meta&&(t=this._opts,this._opts=this._metaOpts);var n;try{n=Jh.call(this,i.schema,e,i.localRefs)}catch(s){throw delete i.validate,s}finally{i.compiling=!1,i.meta&&(this._opts=t)}return i.validate=n,i.refs=n.refs,i.refVal=n.refVal,i.root=n.root,n;function r(){var s=i.validate,a=s.apply(this,arguments);return r.errors=s.errors,a}}function sg(i){switch(i.schemaId){case"auto":return ug;case"id":return lg;default:return og}}function lg(i){return i.$id&&this.logger.warn("schema $id ignored",i.$id),i.id}function og(i){return i.id&&this.logger.warn("schema id ignored",i.id),i.$id}function ug(i){if(i.$id&&i.id&&i.$id!=i.id)throw new Error("schema $id is different from id");return i.$id||i.id}function fg(i,e){if(i=i||this.errors,!i)return"No errors";e=e||{};for(var t=e.separator===void 0?", ":e.separator,n=e.dataVar===void 0?"data":e.dataVar,r="",s=0;s<i.length;s++){var a=i[s];a&&(r+=n+a.dataPath+" "+a.message+t)}return r.slice(0,-t.length)}function cg(i,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[i]=e,this}function dg(i){var e;if(i._opts.$data&&(e=z1,i.addMetaSchema(e,e.$id,!0)),i._opts.meta!==!1){var t=Yh;i._opts.$data&&(t=Zh(t,Q1)),i.addMetaSchema(t,Ja,!0),i._refs["http://json-schema.org/schema"]=Ja}}function hg(i){var e=i._opts.schemas;if(e)if(Array.isArray(e))i.addSchema(e);else for(var t in e)i.addSchema(e[t],t)}function pg(i){for(var e in i._opts.formats){var t=i._opts.formats[e];i.addFormat(e,t)}}function _g(i){for(var e in i._opts.keywords){var t=i._opts.keywords[e];i.addKeyword(e,t)}}function np(i,e){if(i._schemas[e]||i._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function mg(i){for(var e=ep.copy(i._opts),t=0;t<mu.length;t++)delete e[mu[t]];return e}function vg(i){var e=i._opts.logger;if(e===!1)i.logger={log:Us,warn:Us,error:Us};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");i.logger=e}}function Us(){}const gg=oa($1);function Rr(i){"@babel/helpers - typeof";return Rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rr(i)}function bg(i,e){if(Rr(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(Rr(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function ip(i){var e=bg(i,"string");return Rr(e)=="symbol"?e:e+""}function vu(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,ip(n.key),n)}}function Yt(i,e,t){return e&&vu(i.prototype,e),t&&vu(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function Jt(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function wg(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Tn(i,e){if(e&&(Rr(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wg(i)}function sr(i){return sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sr(i)}function cl(i,e){return cl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},cl(i,e)}function Er(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&cl(i,e)}function qe(i,e,t){return(e=ip(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}var on={Literal:1,Collection:3,Graph:4,NamedNode:5,BlankNode:6,Variable:7},qt=function(){function i(e){Jt(this,i),qe(this,"termType",void 0),qe(this,"classOrder",void 0),qe(this,"value",void 0),this.value=e}return Yt(i,[{key:"substitute",value:function(t){return this}},{key:"compareTerm",value:function(t){return this.classOrder<t.classOrder?-1:this.classOrder>t.classOrder?1:this.value<t.value?-1:this.value>t.value?1:0}},{key:"equals",value:function(t){return t?this.termType===t.termType&&this.value===t.value:!1}},{key:"hashString",value:function(){return this.toCanonical()}},{key:"sameTerm",value:function(t){return this.equals(t)}},{key:"toCanonical",value:function(){return this.toNT()}},{key:"toNT",value:function(){return this.toString()}},{key:"toNQ",value:function(){return this.toNT()}},{key:"toString",value:function(){throw new Error("Node.toString() is abstract - see the subclasses instead")}}])}();qe(qt,"fromValue",void 0);qe(qt,"toJS",void 0);var ui="NamedNode",fi="BlankNode",Ri="Literal",zn="Variable",si="DefaultGraph",Hn="Collection",ap="Empty",fa="Graph",gu="text/html",dl="application/ld+json",sp="text/n3",yg="application/n3",hl="application/nquads",pl="application/n-quads",Eg="application/n-triples",ta="application/rdf+xml",kg="application/sparql-update",Dg="application/sparql-update-single-match",ri="text/turtle",Ag="application/x-turtle",_l="application/xhtml+xml";function Cg(i,e,t){return e=sr(e),Tn(i,lp()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function lp(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lp=function(){return!!i})()}var un=function(i){function e(t){var n;return Jt(this,e),n=Cg(this,e,[e.getId(t)]),qe(n,"termType",fi),qe(n,"classOrder",on.BlankNode),qe(n,"isBlank",1),qe(n,"isVar",1),n}return Er(e,i),Yt(e,[{key:"id",get:function(){return this.value},set:function(n){this.value=n}},{key:"compareTerm",value:function(n){return this.classOrder<n.classOrder?-1:this.classOrder>n.classOrder?1:this.id<n.id?-1:this.id>n.id?1:0}},{key:"copy",value:function(n){var r=new e;return n.copyTo(this,r),r}},{key:"toCanonical",value:function(){return e.NTAnonymousNodePrefix+this.value}},{key:"toString",value:function(){return e.NTAnonymousNodePrefix+this.id}}],[{key:"getId",value:function(n){if(n){if(typeof n!="string")throw new Error("Bad id argument to new blank node: "+n);if(n.includes("#")){var r=n.split("#");return r[r.length-1]}return n}return"n"+e.nextId++}}])}(qt);qe(un,"nextId",0);qe(un,"NTAnonymousNodePrefix","_:");function bi(i){return typeof i=="string"?i:i.value}function Tg(i){return Rr(i)==="object"&&i!==null&&"subject"in i}function bu(i){return Rr(i)==="object"&&i!==null&&"statements"in i}function Ul(i){return yn(i)&&i.termType===Hn}function Ng(i){return i&&Object.prototype.hasOwnProperty.call(i,"termType")&&(i.termType===ui||i.termType===zn||i.termType===fi||i.termType===Hn||i.termType===Ri||i.termType===fa)}function Sg(i){return i&&Object.prototype.hasOwnProperty.call(i,"termType")&&(i.termType===ui||i.termType===zn||i.termType===fi||i.termType===Hn||i.termType===Ri||i.termType===fa)}function Ig(i){return yn(i)&&(i.termType===ui||i.termType===fi||i.termType===zn)}function Pg(i){return yn(i)&&i.termType===zn}function yn(i){return Rr(i)==="object"&&i!==null&&"termType"in i}function op(i){return i.termType===Ri}function wi(i){return Rr(i)==="object"&&i!==null&&"subject"in i&&"predicate"in i&&"object"in i}function wu(i){return yn(i)&&i.termType==="NamedNode"}function Rg(i){return yn(i)&&(i.termType===ui||i.termType===zn||i.termType===fi||i.termType===si)}function Fg(i,e,t){return e=sr(e),Tn(i,up()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function up(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(up=function(){return!!i})()}var dr=function(i){function e(t){var n;if(Jt(this,e),n=Fg(this,e,[bi(t)]),qe(n,"termType",ui),qe(n,"classOrder",on.NamedNode),!n.value)throw new Error("Missing IRI for NamedNode");if(!n.value.includes(":"))throw new Error('NamedNode IRI "'+t+'" must be absolute.');if(n.value.includes(" ")){var r='Error: NamedNode IRI "'+t+'" must not contain unencoded spaces.';throw new Error(r)}return n}return Er(e,i),Yt(e,[{key:"dir",value:function(){var n=this.value.split("#")[0],r=n.slice(0,-1).lastIndexOf("/"),s=n.indexOf("//");return s>=0&&r<s+2||r<0?null:new e(n.slice(0,r+1))}},{key:"site",value:function(){var n=this.value.split("#")[0],r=n.indexOf("//");if(r<0)throw new Error("This URI does not have a web site part (origin)");var s=n.indexOf("/",r+2);return s<0?new e(n.slice(0)+"/"):new e(n.slice(0,s+1))}},{key:"doc",value:function(){return this.value.indexOf("#")<0?this:new e(this.value.split("#")[0])}},{key:"toString",value:function(){return"<"+this.value+">"}},{key:"id",value:function(){return this.value.split("#")[1]}},{key:"uri",get:function(){return this.value},set:function(n){this.value=n}}],[{key:"fromValue",value:function(n){return typeof n>"u"||n===null||yn(n)?n:new e(n)}}])}(qt);const gn={boolean:new dr("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:new dr("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:new dr("http://www.w3.org/2001/XMLSchema#decimal"),double:new dr("http://www.w3.org/2001/XMLSchema#double"),integer:new dr("http://www.w3.org/2001/XMLSchema#integer"),langString:new dr("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:new dr("http://www.w3.org/2001/XMLSchema#string")};function Og(i,e,t){return e=sr(e),Tn(i,fp()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function fp(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fp=function(){return!!i})()}var an=function(i){function e(t,n,r){var s;return Jt(this,e),s=Og(this,e,[t]),qe(s,"termType",Ri),qe(s,"classOrder",on.Literal),qe(s,"datatype",gn.string),qe(s,"isVar",0),qe(s,"language",""),n?(s.language=n,s.datatype=gn.langString):r?s.datatype=dr.fromValue(r):s.datatype=gn.string,s}return Er(e,i),Yt(e,[{key:"copy",value:function(){return new e(this.value,this.lang,this.datatype)}},{key:"equals",value:function(n){return n?this.termType===n.termType&&this.value===n.value&&this.language===n.language&&(!this.datatype&&!n.datatype||this.datatype&&this.datatype.equals(n.datatype)):!1}},{key:"lang",get:function(){return this.language},set:function(n){this.language=n||""}},{key:"toNT",value:function(){return e.toNT(this)}},{key:"toString",value:function(){return""+this.value}}],[{key:"toNT",value:function(n){if(typeof n.value=="number")return""+n.value;if(typeof n.value!="string")throw new Error("Value of RDF literal is not string or number: "+n.value);var r=n.value;return r=r.replace(/\\/g,"\\\\"),r=r.replace(/\"/g,'\\"'),r=r.replace(/\n/g,"\\n"),r=r.replace(/\r/g,"\\r"),r='"'+r+'"',n.language?r+="@"+n.language:n.datatype.equals(gn.string)||(r+="^^"+n.datatype.toCanonical()),r}},{key:"fromBoolean",value:function(n){var r=n?"1":"0";return new e(r,null,gn.boolean)}},{key:"fromDate",value:function(n){if(!(n instanceof Date))throw new TypeError("Invalid argument to Literal.fromDate()");var r=function(l){return(""+(100+l)).slice(1,3)},s=""+n.getUTCFullYear()+"-"+r(n.getUTCMonth()+1)+"-"+r(n.getUTCDate())+"T"+r(n.getUTCHours())+":"+r(n.getUTCMinutes())+":"+r(n.getUTCSeconds())+"Z";return new e(s,null,gn.dateTime)}},{key:"fromNumber",value:function(n){if(typeof n!="number")throw new TypeError("Invalid argument to Literal.fromNumber()");var r,s=n.toString();return s.indexOf("e")<0&&Math.abs(n)<=Number.MAX_SAFE_INTEGER?r=Number.isInteger(n)?gn.integer:gn.decimal:r=gn.double,new e(s,null,r)}},{key:"fromValue",value:function(n){if(op(n))return n;switch(Rr(n)){case"object":if(n instanceof Date)return e.fromDate(n);case"boolean":return e.fromBoolean(n);case"number":return e.fromNumber(n);case"string":return new e(n)}throw new Error("Can't make literal from "+n+" of type "+Rr(n))}}])}(qt);function Bg(i,e,t){return e=sr(e),Tn(i,cp()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function cp(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cp=function(){return!!i})()}function dp(i){return typeof i>"u"||i===null||yn(i)?i:Array.isArray(i)?new qn(i):an.fromValue(i)}var qn=function(i){function e(t){var n;return Jt(this,e),n=Bg(this,e,[(un.nextId++).toString()]),qe(n,"termType",Hn),qe(n,"classOrder",on.Collection),qe(n,"closed",!1),qe(n,"compareTerm",un.prototype.compareTerm),qe(n,"elements",[]),qe(n,"isVar",0),t&&t.length>0&&t.forEach(function(r){n.elements.push(dp(r))}),n}return Er(e,i),Yt(e,[{key:"id",get:function(){return this.value},set:function(n){this.value=n}},{key:"append",value:function(n){return this.elements.push(n)}},{key:"close",value:function(){return this.closed=!0,this.closed}},{key:"shift",value:function(){return this.elements.shift()}},{key:"substitute",value:function(n){var r=this.elements.map(function(s){return s.substitute(n)});return new e(r)}},{key:"toNT",value:function(){return e.toNT(this)}},{key:"toString",value:function(){return"("+this.elements.join(" ")+")"}},{key:"unshift",value:function(n){return this.elements.unshift(n)}}],[{key:"toNT",value:function(n){return un.NTAnonymousNodePrefix+n.id}}])}(qt);qe(qn,"termType",Hn);function yu(i,e,t,n,r,s,a){try{var l=i[s](a),o=l.value}catch(u){return void t(u)}l.done?e(o):Promise.resolve(o).then(n,r)}function Eu(i){return function(){var e=this,t=arguments;return new Promise(function(n,r){var s=i.apply(e,t);function a(o){yu(s,n,r,a,l,"next",o)}function l(o){yu(s,n,r,a,l,"throw",o)}a(void 0)})}}var hp={exports:{}},pp={exports:{}};(function(i){function e(t){"@babel/helpers - typeof";return i.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},i.exports.__esModule=!0,i.exports.default=i.exports,e(t)}i.exports=e,i.exports.__esModule=!0,i.exports.default=i.exports})(pp);var Lg=pp.exports;(function(i){var e=Lg.default;function t(){i.exports=t=function(){return r},i.exports.__esModule=!0,i.exports.default=i.exports;var n,r={},s=Object.prototype,a=s.hasOwnProperty,l=Object.defineProperty||function($,G,X){$[G]=X.value},o=typeof Symbol=="function"?Symbol:{},u=o.iterator||"@@iterator",f=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function d($,G,X){return Object.defineProperty($,G,{value:X,enumerable:!0,configurable:!0,writable:!0}),$[G]}try{d({},"")}catch{d=function(X,oe,Q){return X[oe]=Q}}function c($,G,X,oe){var Q=G&&G.prototype instanceof N?G:N,le=Object.create(Q.prototype),Ve=new re(oe||[]);return l(le,"_invoke",{value:A($,X,Ve)}),le}function p($,G,X){try{return{type:"normal",arg:$.call(G,X)}}catch(oe){return{type:"throw",arg:oe}}}r.wrap=c;var _="suspendedStart",m="suspendedYield",y="executing",O="completed",T={};function N(){}function g(){}function k(){}var w={};d(w,u,function(){return this});var R=Object.getPrototypeOf,S=R&&R(R(Z([])));S&&S!==s&&a.call(S,u)&&(w=S);var B=k.prototype=N.prototype=Object.create(w);function D($){["next","throw","return"].forEach(function(G){d($,G,function(X){return this._invoke(G,X)})})}function L($,G){function X(Q,le,Ve,ze){var ke=p($[Q],$,le);if(ke.type!=="throw"){var Ie=ke.arg,ve=Ie.value;return ve&&e(ve)=="object"&&a.call(ve,"__await")?G.resolve(ve.__await).then(function(he){X("next",he,Ve,ze)},function(he){X("throw",he,Ve,ze)}):G.resolve(ve).then(function(he){Ie.value=he,Ve(Ie)},function(he){return X("throw",he,Ve,ze)})}ze(ke.arg)}var oe;l(this,"_invoke",{value:function(le,Ve){function ze(){return new G(function(ke,Ie){X(le,Ve,ke,Ie)})}return oe=oe?oe.then(ze,ze):ze()}})}function A($,G,X){var oe=_;return function(Q,le){if(oe===y)throw Error("Generator is already running");if(oe===O){if(Q==="throw")throw le;return{value:n,done:!0}}for(X.method=Q,X.arg=le;;){var Ve=X.delegate;if(Ve){var ze=I(Ve,X);if(ze){if(ze===T)continue;return ze}}if(X.method==="next")X.sent=X._sent=X.arg;else if(X.method==="throw"){if(oe===_)throw oe=O,X.arg;X.dispatchException(X.arg)}else X.method==="return"&&X.abrupt("return",X.arg);oe=y;var ke=p($,G,X);if(ke.type==="normal"){if(oe=X.done?O:m,ke.arg===T)continue;return{value:ke.arg,done:X.done}}ke.type==="throw"&&(oe=O,X.method="throw",X.arg=ke.arg)}}}function I($,G){var X=G.method,oe=$.iterator[X];if(oe===n)return G.delegate=null,X==="throw"&&$.iterator.return&&(G.method="return",G.arg=n,I($,G),G.method==="throw")||X!=="return"&&(G.method="throw",G.arg=new TypeError("The iterator does not provide a '"+X+"' method")),T;var Q=p(oe,$.iterator,G.arg);if(Q.type==="throw")return G.method="throw",G.arg=Q.arg,G.delegate=null,T;var le=Q.arg;return le?le.done?(G[$.resultName]=le.value,G.next=$.nextLoc,G.method!=="return"&&(G.method="next",G.arg=n),G.delegate=null,T):le:(G.method="throw",G.arg=new TypeError("iterator result is not an object"),G.delegate=null,T)}function x($){var G={tryLoc:$[0]};1 in $&&(G.catchLoc=$[1]),2 in $&&(G.finallyLoc=$[2],G.afterLoc=$[3]),this.tryEntries.push(G)}function j($){var G=$.completion||{};G.type="normal",delete G.arg,$.completion=G}function re($){this.tryEntries=[{tryLoc:"root"}],$.forEach(x,this),this.reset(!0)}function Z($){if($||$===""){var G=$[u];if(G)return G.call($);if(typeof $.next=="function")return $;if(!isNaN($.length)){var X=-1,oe=function Q(){for(;++X<$.length;)if(a.call($,X))return Q.value=$[X],Q.done=!1,Q;return Q.value=n,Q.done=!0,Q};return oe.next=oe}}throw new TypeError(e($)+" is not iterable")}return g.prototype=k,l(B,"constructor",{value:k,configurable:!0}),l(k,"constructor",{value:g,configurable:!0}),g.displayName=d(k,h,"GeneratorFunction"),r.isGeneratorFunction=function($){var G=typeof $=="function"&&$.constructor;return!!G&&(G===g||(G.displayName||G.name)==="GeneratorFunction")},r.mark=function($){return Object.setPrototypeOf?Object.setPrototypeOf($,k):($.__proto__=k,d($,h,"GeneratorFunction")),$.prototype=Object.create(B),$},r.awrap=function($){return{__await:$}},D(L.prototype),d(L.prototype,f,function(){return this}),r.AsyncIterator=L,r.async=function($,G,X,oe,Q){Q===void 0&&(Q=Promise);var le=new L(c($,G,X,oe),Q);return r.isGeneratorFunction(G)?le:le.next().then(function(Ve){return Ve.done?Ve.value:le.next()})},D(B),d(B,h,"Generator"),d(B,u,function(){return this}),d(B,"toString",function(){return"[object Generator]"}),r.keys=function($){var G=Object($),X=[];for(var oe in G)X.push(oe);return X.reverse(),function Q(){for(;X.length;){var le=X.pop();if(le in G)return Q.value=le,Q.done=!1,Q}return Q.done=!0,Q}},r.values=Z,re.prototype={constructor:re,reset:function(G){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(j),!G)for(var X in this)X.charAt(0)==="t"&&a.call(this,X)&&!isNaN(+X.slice(1))&&(this[X]=n)},stop:function(){this.done=!0;var G=this.tryEntries[0].completion;if(G.type==="throw")throw G.arg;return this.rval},dispatchException:function(G){if(this.done)throw G;var X=this;function oe(Ie,ve){return Ve.type="throw",Ve.arg=G,X.next=Ie,ve&&(X.method="next",X.arg=n),!!ve}for(var Q=this.tryEntries.length-1;Q>=0;--Q){var le=this.tryEntries[Q],Ve=le.completion;if(le.tryLoc==="root")return oe("end");if(le.tryLoc<=this.prev){var ze=a.call(le,"catchLoc"),ke=a.call(le,"finallyLoc");if(ze&&ke){if(this.prev<le.catchLoc)return oe(le.catchLoc,!0);if(this.prev<le.finallyLoc)return oe(le.finallyLoc)}else if(ze){if(this.prev<le.catchLoc)return oe(le.catchLoc,!0)}else{if(!ke)throw Error("try statement without catch or finally");if(this.prev<le.finallyLoc)return oe(le.finallyLoc)}}}},abrupt:function(G,X){for(var oe=this.tryEntries.length-1;oe>=0;--oe){var Q=this.tryEntries[oe];if(Q.tryLoc<=this.prev&&a.call(Q,"finallyLoc")&&this.prev<Q.finallyLoc){var le=Q;break}}le&&(G==="break"||G==="continue")&&le.tryLoc<=X&&X<=le.finallyLoc&&(le=null);var Ve=le?le.completion:{};return Ve.type=G,Ve.arg=X,le?(this.method="next",this.next=le.finallyLoc,T):this.complete(Ve)},complete:function(G,X){if(G.type==="throw")throw G.arg;return G.type==="break"||G.type==="continue"?this.next=G.arg:G.type==="return"?(this.rval=this.arg=G.arg,this.method="return",this.next="end"):G.type==="normal"&&X&&(this.next=X),T},finish:function(G){for(var X=this.tryEntries.length-1;X>=0;--X){var oe=this.tryEntries[X];if(oe.finallyLoc===G)return this.complete(oe.completion,oe.afterLoc),j(oe),T}},catch:function(G){for(var X=this.tryEntries.length-1;X>=0;--X){var oe=this.tryEntries[X];if(oe.tryLoc===G){var Q=oe.completion;if(Q.type==="throw"){var le=Q.arg;j(oe)}return le}}throw Error("illegal catch attempt")},delegateYield:function(G,X,oe){return this.delegate={iterator:Z(G),resultName:X,nextLoc:oe},this.method==="next"&&(this.arg=n),T}},r}i.exports=t,i.exports.__esModule=!0,i.exports.default=i.exports})(hp);var Ug=hp.exports,Ma=Ug(),jg=Ma;try{regeneratorRuntime=Ma}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Ma:Function("r","regeneratorRuntime = r")(Ma)}const Pa=oa(jg);var ra="chrome:theSession";new dr(ra);function qg(i,e,t){return e=sr(e),Tn(i,_p()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function _p(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_p=function(){return!!i})()}var jl=function(i){function e(){var t;return Jt(this,e),t=qg(this,e,[""]),qe(t,"value",""),qe(t,"termType",si),qe(t,"uri",ra),t}return Er(e,i),Yt(e,[{key:"toCanonical",value:function(){return this.value}},{key:"toString",value:function(){return"DefaultGraph"}}])}(qt);function ku(i){return!!i&&i.termType===si}var Mg=new jl,ni=function(){function i(e,t,n,r){Jt(this,i),qe(this,"subject",void 0),qe(this,"predicate",void 0),qe(this,"object",void 0),qe(this,"graph",void 0),this.subject=qt.fromValue(e),this.predicate=qt.fromValue(t),this.object=qt.fromValue(n),this.graph=r==null?Mg:qt.fromValue(r)}return Yt(i,[{key:"why",get:function(){return this.graph},set:function(t){this.graph=t}},{key:"equals",value:function(t){return t.subject.equals(this.subject)&&t.predicate.equals(this.predicate)&&t.object.equals(this.object)&&t.graph.equals(this.graph)}},{key:"substitute",value:function(t){var n=new i(this.subject.substitute(t),this.predicate.substitute(t),this.object.substitute(t),ku(this.graph)?this.graph:this.graph.substitute(t));return n}},{key:"toCanonical",value:function(){var t=[this.subject.toCanonical(),this.predicate.toCanonical(),this.object.toCanonical()];return this.graph&&this.graph.termType!==si&&t.push(this.graph.toCanonical()),t.join(" ")+" ."}},{key:"toNT",value:function(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT()].join(" ")+" ."}},{key:"toNQ",value:function(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT(),ku(this.graph)?"":this.graph.toNT()].join(" ")+" ."}},{key:"toString",value:function(){return this.toNT()}}])}(),mp=mp||console.log;function Ei(i){var e;return e=i.indexOf("#"),e<0?i:i.slice(0,e)}function Vg(i){var e=/[^\/]*\/\/([^\/]*)\//.exec(i);return e?e[1]:""}function Mr(i,e){var t,n,r,s,a,l,o=e.indexOf("#");if(o>0&&(e=e.slice(0,o)),i.length===0)return e;if(i.indexOf("#")===0)return e+i;if(s=i.indexOf(":"),s>=0||(t=e.indexOf(":"),e.length===0))return i;if(t<0)return mp("Invalid base: "+e+" in join with given: "+i),i;if(n=e.slice(0,+t+1||9e9),i.indexOf("//")===0)return n+i;if(e.indexOf("//",t)===t+1){if(r=e.indexOf("/",t+3),r<0)return e.length-t-3>0?e+"/"+i:n+i}else if(r=e.indexOf("/",t+1),r<0)return e.length-t-1>0?e+"/"+i:n+i;if(i.indexOf("/")===0)return e.slice(0,r)+i;if(l=e.slice(r),a=l.lastIndexOf("/"),a<0)return n+i;for(a>=0&&a<l.length-1&&(l=l.slice(0,+a+1||9e9)),l+=i;l.match(/[^\/]*\/\.\.\//);)l=l.replace(/[^\/]*\/\.\.\//,"");return l=l.replace(/\.\//g,""),l=l.replace(/\/\.$/,"/"),e.slice(0,r)+l}function Du(i){var e=i.indexOf(":");return e<0?null:i.slice(0,e)}function js(i,e){var t,n,r,s,a,l,o,u,f,h,d,c,p,_=new RegExp("^[-_a-zA-Z0-9.]+:(//[^/]*)?/[^/]*$");if(!i)return e;if(i===e)return"";for(n=u=0,a=e.length;u<a;n=++u){var m=e[n];if(m!==i[n])break}if(i.slice(0,n).match(_)&&(r=e.indexOf("//"),r<0&&(r=-2),s=e.indexOf("/",r+2),e[s+1]!=="/"&&i[s+1]!=="/"&&e.slice(0,s)===i.slice(0,s)))return e.slice(s);if(e[n]==="#"&&i.length===n)return e.slice(n);for(;n>0&&e[n-1]!=="/";)n--;if(n<3||i.indexOf("//",n-2)>0||e.indexOf("//",n-2)>0||i.indexOf(":",n)>0)return e;for(o=0,d=i.slice(n),f=0,l=d.length;f<l;f++)t=d[f],t==="/"&&o++;if(o===0&&n<e.length&&e[n]==="#")return"./"+e.slice(n);if(o===0&&n===e.length)return"./";if(p="",o>0)for(h=1,c=o;c>=1?h<=c:h>=c;c>=1?++h:--h)p+="../";return p+e.slice(n)}function zg(i,e,t){return e=sr(e),Tn(i,vp()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function vp(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vp=function(){return!!i})()}var li=function(i){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return Jt(this,e),t=zg(this,e,[n]),qe(t,"termType",zn),qe(t,"base","varid:"),qe(t,"classOrder",on.Variable),qe(t,"isVar",1),qe(t,"uri",void 0),t.base="varid:",t.uri=Mr(n,t.base),t}return Er(e,i),Yt(e,[{key:"equals",value:function(n){return n?this.termType===n.termType&&this.value===n.value:!1}},{key:"hashString",value:function(){return this.toString()}},{key:"substitute",value:function(n){var r;return(r=n[this.toNT()])!=null?r:this}},{key:"toString",value:function(){return e.toString(this)}}],[{key:"toString",value:function(n){return n.uri.slice(0,n.base.length)===n.base?"?".concat(n.uri.slice(n.base.length)):"?".concat(n.uri)}}])}(qt),Cr=function(i){return i.collections="COLLECTIONS",i.defaultGraphType="DEFAULT_GRAPH_TYPE",i.equalsMethod="EQUALS_METHOD",i.id="ID",i.identity="IDENTITY",i.reversibleId="REVERSIBLE_ID",i.variableType="VARIABLE_TYPE",i}({}),Au=new jl,Hr={supports:qe(qe(qe(qe(qe(qe(qe({},Cr.collections,!1),Cr.defaultGraphType,!1),Cr.equalsMethod,!0),Cr.identity,!1),Cr.id,!0),Cr.reversibleId,!1),Cr.variableType,!0),blankNode:function(e){return new un(e)},defaultGraph:function(){return Au},equals:function(e,t){return e===t||!e||!t?!0:wi(e)||wi(t)?wi(e)&&wi(t)?this.equals(e.subject,t.subject)&&this.equals(e.predicate,t.predicate)&&this.equals(e.object,t.object)&&this.equals(e.graph,t.graph):!1:yn(e)&&yn(t)?this.id(e)===this.id(t):!1},id:function(e){if(!e)return"undefined";if(wi(e))return this.quadToNQ(e);switch(e.termType){case si:return"defaultGraph";case zn:return li.toString(e);default:var t=this.termToNQ(e);if(t)return t;throw new Error("Can't id term with type '".concat(e.termType,"'"))}},isQuad:function(e){return e instanceof ni},literal:function(e,t){if(typeof e!="string"&&!t)return an.fromValue(e);var n=typeof e=="string"?e:""+e;return typeof t=="string"?t.indexOf(":")===-1?new an(n,t):new an(n,null,this.namedNode(t)):new an(n,null,t)},namedNode:function(e){return new dr(e)},quad:function(e,t,n,r){return new ni(e,t,n,r||Au)},triple:function(e,t,n,r){return this.quad(e,t,n,r)},quadToNQ:function(e){return"".concat(this.termToNQ(e.subject)," ").concat(this.termToNQ(e.predicate)," ").concat(this.termToNQ(e.object)," ").concat(this.termToNQ(e.graph)," .")},termToNQ:function(e){var t=this;switch(e.termType){case fi:return"_:"+e.value;case si:return"";case ap:return"<http://www.w3.org/1999/02/22-rdf-syntax-ns#nil>";case Ri:return an.toNT(e);case fa:case ui:return"<"+e.value+">";case Hn:return"("+e.elements.map(function(n){return t.termToNQ(n)}).join(" ")+")";default:throw new Error("Can't serialize nonstandard term type (was '".concat(e.termType,"')"))}},toNQ:function(e){return this.isQuad(e)?this.quadToNQ(e):this.termToNQ(e)},variable:function(e){return new li(e)}},rn={debug:function(e){},warn:function(e){},info:function(e){},error:function(e){},success:function(e){},msg:function(e){}};function wr(i,e){var t=e||{namedNode:function(r){return new dr(r)}};return function(n){return t.namedNode(i+(n||""))}}var xn={},Nn={};function Hg(i,e,t){if(t===void 0&&(t=Array.prototype),i&&typeof t.find=="function")return t.find.call(i,e);for(var n=0;n<i.length;n++)if(Object.prototype.hasOwnProperty.call(i,n)){var r=i[n];if(e.call(void 0,r,n,i))return r}}function ql(i,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(i):i}function xg(i,e){if(i===null||typeof i!="object")throw new TypeError("target is not an object");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t]);return i}var gp=ql({HTML:"text/html",isHTML:function(i){return i===gp.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),bp=ql({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(i){return i===bp.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Nn.assign=xg;Nn.find=Hg;Nn.freeze=ql;Nn.MIME_TYPE=gp;Nn.NAMESPACE=bp;var wp=Nn,fn=wp.find,na=wp.NAMESPACE;function Xg(i){return i!==""}function Gg(i){return i?i.split(/[\t\n\f\r ]+/).filter(Xg):[]}function $g(i,e){return i.hasOwnProperty(e)||(i[e]=!0),i}function Cu(i){if(!i)return[];var e=Gg(i);return Object.keys(e.reduce($g,{}))}function Qg(i){return function(e){return i&&i.indexOf(e)!==-1}}function ca(i,e){for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}function Sr(i,e){var t=i.prototype;if(!(t instanceof e)){let n=function(){};n.prototype=e.prototype,n=new n,ca(t,n),i.prototype=t=n}t.constructor!=i&&(typeof i!="function"&&console.error("unknown Class:"+i),t.constructor=i)}var Ir={},xr=Ir.ELEMENT_NODE=1,Ci=Ir.ATTRIBUTE_NODE=2,Ka=Ir.TEXT_NODE=3,yp=Ir.CDATA_SECTION_NODE=4,Ep=Ir.ENTITY_REFERENCE_NODE=5,Wg=Ir.ENTITY_NODE=6,kp=Ir.PROCESSING_INSTRUCTION_NODE=7,Dp=Ir.COMMENT_NODE=8,Ap=Ir.DOCUMENT_NODE=9,Cp=Ir.DOCUMENT_TYPE_NODE=10,En=Ir.DOCUMENT_FRAGMENT_NODE=11,Yg=Ir.NOTATION_NODE=12,mr={},cr={};mr.INDEX_SIZE_ERR=(cr[1]="Index size error",1);mr.DOMSTRING_SIZE_ERR=(cr[2]="DOMString size error",2);var Tr=mr.HIERARCHY_REQUEST_ERR=(cr[3]="Hierarchy request error",3);mr.WRONG_DOCUMENT_ERR=(cr[4]="Wrong document",4);mr.INVALID_CHARACTER_ERR=(cr[5]="Invalid character",5);mr.NO_DATA_ALLOWED_ERR=(cr[6]="No data allowed",6);mr.NO_MODIFICATION_ALLOWED_ERR=(cr[7]="No modification allowed",7);var Tp=mr.NOT_FOUND_ERR=(cr[8]="Not found",8);mr.NOT_SUPPORTED_ERR=(cr[9]="Not supported",9);var Tu=mr.INUSE_ATTRIBUTE_ERR=(cr[10]="Attribute in use",10);mr.INVALID_STATE_ERR=(cr[11]="Invalid state",11);mr.SYNTAX_ERR=(cr[12]="Syntax error",12);mr.INVALID_MODIFICATION_ERR=(cr[13]="Invalid modification",13);mr.NAMESPACE_ERR=(cr[14]="Invalid namespace",14);mr.INVALID_ACCESS_ERR=(cr[15]="Invalid access",15);function ir(i,e){if(e instanceof Error)var t=e;else t=this,Error.call(this,cr[i]),this.message=cr[i],Error.captureStackTrace&&Error.captureStackTrace(this,ir);return t.code=i,e&&(this.message=this.message+": "+e),t}ir.prototype=Error.prototype;ca(mr,ir);function bn(){}bn.prototype={length:0,item:function(i){return i>=0&&i<this.length?this[i]:null},toString:function(i,e){for(var t=[],n=0;n<this.length;n++)ki(this[n],t,i,e);return t.join("")},filter:function(i){return Array.prototype.filter.call(this,i)},indexOf:function(i){return Array.prototype.indexOf.call(this,i)}};function Ti(i,e){this._node=i,this._refresh=e,Ml(this)}function Ml(i){var e=i._node._inc||i._node.ownerDocument._inc;if(i._inc!==e){var t=i._refresh(i._node);if(qp(i,"length",t.length),!i.$$length||t.length<i.$$length)for(var n=t.length;n in i;n++)Object.prototype.hasOwnProperty.call(i,n)&&delete i[n];ca(t,i),i._inc=e}}Ti.prototype.item=function(i){return Ml(this),this[i]||null};Sr(Ti,bn);function Za(){}function Np(i,e){for(var t=i.length;t--;)if(i[t]===e)return t}function Nu(i,e,t,n){if(n?e[Np(e,n)]=t:e[e.length++]=t,i){t.ownerElement=i;var r=i.ownerDocument;r&&(n&&Pp(r,i,n),Jg(r,i,t))}}function Su(i,e,t){var n=Np(e,t);if(n>=0){for(var r=e.length-1;n<r;)e[n]=e[++n];if(e.length=r,i){var s=i.ownerDocument;s&&(Pp(s,i,t),t.ownerElement=null)}}else throw new ir(Tp,new Error(i.tagName+"@"+t))}Za.prototype={length:0,item:bn.prototype.item,getNamedItem:function(i){for(var e=this.length;e--;){var t=this[e];if(t.nodeName==i)return t}},setNamedItem:function(i){var e=i.ownerElement;if(e&&e!=this._ownerElement)throw new ir(Tu);var t=this.getNamedItem(i.nodeName);return Nu(this._ownerElement,this,i,t),t},setNamedItemNS:function(i){var e=i.ownerElement,t;if(e&&e!=this._ownerElement)throw new ir(Tu);return t=this.getNamedItemNS(i.namespaceURI,i.localName),Nu(this._ownerElement,this,i,t),t},removeNamedItem:function(i){var e=this.getNamedItem(i);return Su(this._ownerElement,this,e),e},removeNamedItemNS:function(i,e){var t=this.getNamedItemNS(i,e);return Su(this._ownerElement,this,t),t},getNamedItemNS:function(i,e){for(var t=this.length;t--;){var n=this[t];if(n.localName==e&&n.namespaceURI==i)return n}return null}};function Sp(){}Sp.prototype={hasFeature:function(i,e){return!0},createDocument:function(i,e,t){var n=new da;if(n.implementation=this,n.childNodes=new bn,n.doctype=t||null,t&&n.appendChild(t),e){var r=n.createElementNS(i,e);n.appendChild(r)}return n},createDocumentType:function(i,e,t){var n=new ps;return n.name=i,n.nodeName=i,n.publicId=e||"",n.systemId=t||"",n}};function Pt(){}Pt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(i,e){return es(this,i,e)},replaceChild:function(i,e){es(this,i,e,Fp),e&&this.removeChild(e)},removeChild:function(i){return Rp(this,i)},appendChild:function(i){return this.insertBefore(i,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(i){return ml(this.ownerDocument||this,this,i)},normalize:function(){for(var i=this.firstChild;i;){var e=i.nextSibling;e&&e.nodeType==Ka&&i.nodeType==Ka?(this.removeChild(e),i.appendData(e.data)):(i.normalize(),i=e)}},isSupported:function(i,e){return this.ownerDocument.implementation.hasFeature(i,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(i){for(var e=this;e;){var t=e._nsMap;if(t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&t[n]===i)return n}e=e.nodeType==Ci?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(i){for(var e=this;e;){var t=e._nsMap;if(t&&Object.prototype.hasOwnProperty.call(t,i))return t[i];e=e.nodeType==Ci?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(i){var e=this.lookupPrefix(i);return e==null}};function Ip(i){return i=="<"&&"&lt;"||i==">"&&"&gt;"||i=="&"&&"&amp;"||i=='"'&&"&quot;"||"&#"+i.charCodeAt()+";"}ca(Ir,Pt);ca(Ir,Pt.prototype);function ia(i,e){if(e(i))return!0;if(i=i.firstChild)do if(ia(i,e))return!0;while(i=i.nextSibling)}function da(){this.ownerDocument=this}function Jg(i,e,t){i&&i._inc++;var n=t.namespaceURI;n===na.XMLNS&&(e._nsMap[t.prefix?t.localName:""]=t.value)}function Pp(i,e,t,n){i&&i._inc++;var r=t.namespaceURI;r===na.XMLNS&&delete e._nsMap[t.prefix?t.localName:""]}function Vl(i,e,t){if(i&&i._inc){i._inc++;var n=e.childNodes;if(t)n[n.length++]=t;else{for(var r=e.firstChild,s=0;r;)n[s++]=r,r=r.nextSibling;n.length=s,delete n[n.length]}}}function Rp(i,e){var t=e.previousSibling,n=e.nextSibling;return t?t.nextSibling=n:i.firstChild=n,n?n.previousSibling=t:i.lastChild=t,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,Vl(i.ownerDocument,i),e}function Kg(i){return i&&(i.nodeType===Pt.DOCUMENT_NODE||i.nodeType===Pt.DOCUMENT_FRAGMENT_NODE||i.nodeType===Pt.ELEMENT_NODE)}function Zg(i){return i&&(cn(i)||zl(i)||kn(i)||i.nodeType===Pt.DOCUMENT_FRAGMENT_NODE||i.nodeType===Pt.COMMENT_NODE||i.nodeType===Pt.PROCESSING_INSTRUCTION_NODE)}function kn(i){return i&&i.nodeType===Pt.DOCUMENT_TYPE_NODE}function cn(i){return i&&i.nodeType===Pt.ELEMENT_NODE}function zl(i){return i&&i.nodeType===Pt.TEXT_NODE}function Iu(i,e){var t=i.childNodes||[];if(fn(t,cn)||kn(e))return!1;var n=fn(t,kn);return!(e&&n&&t.indexOf(n)>t.indexOf(e))}function Pu(i,e){var t=i.childNodes||[];function n(s){return cn(s)&&s!==e}if(fn(t,n))return!1;var r=fn(t,kn);return!(e&&r&&t.indexOf(r)>t.indexOf(e))}function e2(i,e,t){if(!Kg(i))throw new ir(Tr,"Unexpected parent node type "+i.nodeType);if(t&&t.parentNode!==i)throw new ir(Tp,"child not in parent");if(!Zg(e)||kn(e)&&i.nodeType!==Pt.DOCUMENT_NODE)throw new ir(Tr,"Unexpected node type "+e.nodeType+" for parent node type "+i.nodeType)}function t2(i,e,t){var n=i.childNodes||[],r=e.childNodes||[];if(e.nodeType===Pt.DOCUMENT_FRAGMENT_NODE){var s=r.filter(cn);if(s.length>1||fn(r,zl))throw new ir(Tr,"More than one element or text in fragment");if(s.length===1&&!Iu(i,t))throw new ir(Tr,"Element in fragment can not be inserted before doctype")}if(cn(e)&&!Iu(i,t))throw new ir(Tr,"Only one element can be added and only after doctype");if(kn(e)){if(fn(n,kn))throw new ir(Tr,"Only one doctype is allowed");var a=fn(n,cn);if(t&&n.indexOf(a)<n.indexOf(t))throw new ir(Tr,"Doctype can only be inserted before an element");if(!t&&a)throw new ir(Tr,"Doctype can not be appended since element is present")}}function Fp(i,e,t){var n=i.childNodes||[],r=e.childNodes||[];if(e.nodeType===Pt.DOCUMENT_FRAGMENT_NODE){var s=r.filter(cn);if(s.length>1||fn(r,zl))throw new ir(Tr,"More than one element or text in fragment");if(s.length===1&&!Pu(i,t))throw new ir(Tr,"Element in fragment can not be inserted before doctype")}if(cn(e)&&!Pu(i,t))throw new ir(Tr,"Only one element can be added and only after doctype");if(kn(e)){if(fn(n,function(o){return kn(o)&&o!==t}))throw new ir(Tr,"Only one doctype is allowed");var a=fn(n,cn);if(t&&n.indexOf(a)<n.indexOf(t))throw new ir(Tr,"Doctype can only be inserted before an element")}}function es(i,e,t,n){e2(i,e,t),i.nodeType===Pt.DOCUMENT_NODE&&(n||t2)(i,e,t);var r=e.parentNode;if(r&&r.removeChild(e),e.nodeType===En){var s=e.firstChild;if(s==null)return e;var a=e.lastChild}else s=a=e;var l=t?t.previousSibling:i.lastChild;s.previousSibling=l,a.nextSibling=t,l?l.nextSibling=s:i.firstChild=s,t==null?i.lastChild=a:t.previousSibling=a;do s.parentNode=i;while(s!==a&&(s=s.nextSibling));return Vl(i.ownerDocument||i,i),e.nodeType==En&&(e.firstChild=e.lastChild=null),e}function r2(i,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=i,e.previousSibling=i.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:i.firstChild=e,i.lastChild=e,Vl(i.ownerDocument,i,e),e}da.prototype={nodeName:"#document",nodeType:Ap,doctype:null,documentElement:null,_inc:1,insertBefore:function(i,e){if(i.nodeType==En){for(var t=i.firstChild;t;){var n=t.nextSibling;this.insertBefore(t,e),t=n}return i}return es(this,i,e),i.ownerDocument=this,this.documentElement===null&&i.nodeType===xr&&(this.documentElement=i),i},removeChild:function(i){return this.documentElement==i&&(this.documentElement=null),Rp(this,i)},replaceChild:function(i,e){es(this,i,e,Fp),i.ownerDocument=this,e&&this.removeChild(e),cn(i)&&(this.documentElement=i)},importNode:function(i,e){return jp(this,i,e)},getElementById:function(i){var e=null;return ia(this.documentElement,function(t){if(t.nodeType==xr&&t.getAttribute("id")==i)return e=t,!0}),e},getElementsByClassName:function(i){var e=Cu(i);return new Ti(this,function(t){var n=[];return e.length>0&&ia(t.documentElement,function(r){if(r!==t&&r.nodeType===xr){var s=r.getAttribute("class");if(s){var a=i===s;if(!a){var l=Cu(s);a=e.every(Qg(l))}a&&n.push(r)}}}),n})},createElement:function(i){var e=new oi;e.ownerDocument=this,e.nodeName=i,e.tagName=i,e.localName=i,e.childNodes=new bn;var t=e.attributes=new Za;return t._ownerElement=e,e},createDocumentFragment:function(){var i=new _s;return i.ownerDocument=this,i.childNodes=new bn,i},createTextNode:function(i){var e=new Hl;return e.ownerDocument=this,e.appendData(i),e},createComment:function(i){var e=new xl;return e.ownerDocument=this,e.appendData(i),e},createCDATASection:function(i){var e=new Xl;return e.ownerDocument=this,e.appendData(i),e},createProcessingInstruction:function(i,e){var t=new $l;return t.ownerDocument=this,t.tagName=t.nodeName=t.target=i,t.nodeValue=t.data=e,t},createAttribute:function(i){var e=new ts;return e.ownerDocument=this,e.name=i,e.nodeName=i,e.localName=i,e.specified=!0,e},createEntityReference:function(i){var e=new Gl;return e.ownerDocument=this,e.nodeName=i,e},createElementNS:function(i,e){var t=new oi,n=e.split(":"),r=t.attributes=new Za;return t.childNodes=new bn,t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.namespaceURI=i,n.length==2?(t.prefix=n[0],t.localName=n[1]):t.localName=e,r._ownerElement=t,t},createAttributeNS:function(i,e){var t=new ts,n=e.split(":");return t.ownerDocument=this,t.nodeName=e,t.name=e,t.namespaceURI=i,t.specified=!0,n.length==2?(t.prefix=n[0],t.localName=n[1]):t.localName=e,t}};Sr(da,Pt);function oi(){this._nsMap={}}oi.prototype={nodeType:xr,hasAttribute:function(i){return this.getAttributeNode(i)!=null},getAttribute:function(i){var e=this.getAttributeNode(i);return e&&e.value||""},getAttributeNode:function(i){return this.attributes.getNamedItem(i)},setAttribute:function(i,e){var t=this.ownerDocument.createAttribute(i);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},removeAttribute:function(i){var e=this.getAttributeNode(i);e&&this.removeAttributeNode(e)},appendChild:function(i){return i.nodeType===En?this.insertBefore(i,null):r2(this,i)},setAttributeNode:function(i){return this.attributes.setNamedItem(i)},setAttributeNodeNS:function(i){return this.attributes.setNamedItemNS(i)},removeAttributeNode:function(i){return this.attributes.removeNamedItem(i.nodeName)},removeAttributeNS:function(i,e){var t=this.getAttributeNodeNS(i,e);t&&this.removeAttributeNode(t)},hasAttributeNS:function(i,e){return this.getAttributeNodeNS(i,e)!=null},getAttributeNS:function(i,e){var t=this.getAttributeNodeNS(i,e);return t&&t.value||""},setAttributeNS:function(i,e,t){var n=this.ownerDocument.createAttributeNS(i,e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},getAttributeNodeNS:function(i,e){return this.attributes.getNamedItemNS(i,e)},getElementsByTagName:function(i){return new Ti(this,function(e){var t=[];return ia(e,function(n){n!==e&&n.nodeType==xr&&(i==="*"||n.tagName==i)&&t.push(n)}),t})},getElementsByTagNameNS:function(i,e){return new Ti(this,function(t){var n=[];return ia(t,function(r){r!==t&&r.nodeType===xr&&(i==="*"||r.namespaceURI===i)&&(e==="*"||r.localName==e)&&n.push(r)}),n})}};da.prototype.getElementsByTagName=oi.prototype.getElementsByTagName;da.prototype.getElementsByTagNameNS=oi.prototype.getElementsByTagNameNS;Sr(oi,Pt);function ts(){}ts.prototype.nodeType=Ci;Sr(ts,Pt);function ha(){}ha.prototype={data:"",substringData:function(i,e){return this.data.substring(i,i+e)},appendData:function(i){i=this.data+i,this.nodeValue=this.data=i,this.length=i.length},insertData:function(i,e){this.replaceData(i,0,e)},appendChild:function(i){throw new Error(cr[Tr])},deleteData:function(i,e){this.replaceData(i,e,"")},replaceData:function(i,e,t){var n=this.data.substring(0,i),r=this.data.substring(i+e);t=n+t+r,this.nodeValue=this.data=t,this.length=t.length}};Sr(ha,Pt);function Hl(){}Hl.prototype={nodeName:"#text",nodeType:Ka,splitText:function(i){var e=this.data,t=e.substring(i);e=e.substring(0,i),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}};Sr(Hl,ha);function xl(){}xl.prototype={nodeName:"#comment",nodeType:Dp};Sr(xl,ha);function Xl(){}Xl.prototype={nodeName:"#cdata-section",nodeType:yp};Sr(Xl,ha);function ps(){}ps.prototype.nodeType=Cp;Sr(ps,Pt);function Op(){}Op.prototype.nodeType=Yg;Sr(Op,Pt);function Bp(){}Bp.prototype.nodeType=Wg;Sr(Bp,Pt);function Gl(){}Gl.prototype.nodeType=Ep;Sr(Gl,Pt);function _s(){}_s.prototype.nodeName="#document-fragment";_s.prototype.nodeType=En;Sr(_s,Pt);function $l(){}$l.prototype.nodeType=kp;Sr($l,Pt);function Lp(){}Lp.prototype.serializeToString=function(i,e,t){return Up.call(i,e,t)};Pt.prototype.toString=Up;function Up(i,e){var t=[],n=this.nodeType==9&&this.documentElement||this,r=n.prefix,s=n.namespaceURI;if(s&&r==null){var r=n.lookupPrefix(s);if(r==null)var a=[{namespace:s,prefix:null}]}return ki(this,t,i,e,a),t.join("")}function Ru(i,e,t){var n=i.prefix||"",r=i.namespaceURI;if(!r||n==="xml"&&r===na.XML||r===na.XMLNS)return!1;for(var s=t.length;s--;){var a=t[s];if(a.prefix===n)return a.namespace!==r}return!0}function qs(i,e,t){i.push(" ",e,'="',t.replace(/[<>&"\t\n\r]/g,Ip),'"')}function ki(i,e,t,n,r){if(r||(r=[]),n)if(i=n(i),i){if(typeof i=="string"){e.push(i);return}}else return;switch(i.nodeType){case xr:var s=i.attributes,a=s.length,y=i.firstChild,l=i.tagName;t=na.isHTML(i.namespaceURI)||t;var o=l;if(!t&&!i.prefix&&i.namespaceURI){for(var u,f=0;f<s.length;f++)if(s.item(f).name==="xmlns"){u=s.item(f).value;break}if(!u)for(var h=r.length-1;h>=0;h--){var d=r[h];if(d.prefix===""&&d.namespace===i.namespaceURI){u=d.namespace;break}}if(u!==i.namespaceURI)for(var h=r.length-1;h>=0;h--){var d=r[h];if(d.namespace===i.namespaceURI){d.prefix&&(o=d.prefix+":"+l);break}}}e.push("<",o);for(var c=0;c<a;c++){var p=s.item(c);p.prefix=="xmlns"?r.push({prefix:p.localName,namespace:p.value}):p.nodeName=="xmlns"&&r.push({prefix:"",namespace:p.value})}for(var c=0;c<a;c++){var p=s.item(c);if(Ru(p,t,r)){var _=p.prefix||"",m=p.namespaceURI;qs(e,_?"xmlns:"+_:"xmlns",m),r.push({prefix:_,namespace:m})}ki(p,e,t,n,r)}if(l===o&&Ru(i,t,r)){var _=i.prefix||"",m=i.namespaceURI;qs(e,_?"xmlns:"+_:"xmlns",m),r.push({prefix:_,namespace:m})}if(y||t&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(e.push(">"),t&&/^script$/i.test(l))for(;y;)y.data?e.push(y.data):ki(y,e,t,n,r.slice()),y=y.nextSibling;else for(;y;)ki(y,e,t,n,r.slice()),y=y.nextSibling;e.push("</",o,">")}else e.push("/>");return;case Ap:case En:for(var y=i.firstChild;y;)ki(y,e,t,n,r.slice()),y=y.nextSibling;return;case Ci:return qs(e,i.name,i.value);case Ka:return e.push(i.data.replace(/[<&>]/g,Ip));case yp:return e.push("<![CDATA[",i.data,"]]>");case Dp:return e.push("<!--",i.data,"-->");case Cp:var O=i.publicId,T=i.systemId;if(e.push("<!DOCTYPE ",i.name),O)e.push(" PUBLIC ",O),T&&T!="."&&e.push(" ",T),e.push(">");else if(T&&T!=".")e.push(" SYSTEM ",T,">");else{var N=i.internalSubset;N&&e.push(" [",N,"]"),e.push(">")}return;case kp:return e.push("<?",i.target," ",i.data,"?>");case Ep:return e.push("&",i.nodeName,";");default:e.push("??",i.nodeName)}}function jp(i,e,t){var n;switch(e.nodeType){case xr:n=e.cloneNode(!1),n.ownerDocument=i;case En:break;case Ci:t=!0;break}if(n||(n=e.cloneNode(!1)),n.ownerDocument=i,n.parentNode=null,t)for(var r=e.firstChild;r;)n.appendChild(jp(i,r,t)),r=r.nextSibling;return n}function ml(i,e,t){var n=new e.constructor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=e[r];typeof s!="object"&&s!=n[r]&&(n[r]=s)}switch(e.childNodes&&(n.childNodes=new bn),n.ownerDocument=i,n.nodeType){case xr:var a=e.attributes,l=n.attributes=new Za,o=a.length;l._ownerElement=n;for(var u=0;u<o;u++)n.setAttributeNode(ml(i,a.item(u),!0));break;case Ci:t=!0}if(t)for(var f=e.firstChild;f;)n.appendChild(ml(i,f,t)),f=f.nextSibling;return n}function qp(i,e,t){i[e]=t}try{if(Object.defineProperty){let i=function(e){switch(e.nodeType){case xr:case En:var t=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&t.push(i(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}};Object.defineProperty(Ti.prototype,"length",{get:function(){return Ml(this),this.$$length}}),Object.defineProperty(Pt.prototype,"textContent",{get:function(){return i(this)},set:function(e){switch(this.nodeType){case xr:case En:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),qp=function(e,t,n){e["$$"+t]=n}}}catch{}xn.DocumentType=ps;xn.DOMException=ir;xn.DOMImplementation=Sp;xn.Element=oi;xn.Node=Pt;xn.NodeList=bn;xn.XMLSerializer=Lp;var ms={},Mp={};(function(i){var e=Nn.freeze;i.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),i.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),i.entityMap=i.HTML_ENTITIES})(Mp);var Ql={},aa=Nn.NAMESPACE,vl=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Fu=new RegExp("[\\-\\.0-9"+vl.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Ou=new RegExp("^"+vl.source+Fu.source+"*(?::"+vl.source+Fu.source+"*)?$"),Hi=0,Fn=1,hi=2,xi=3,pi=4,_i=5,Xi=6,Ra=7;function Ni(i,e){this.message=i,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,Ni)}Ni.prototype=new Error;Ni.prototype.name=Ni.name;function Vp(){}Vp.prototype={parse:function(i,e,t){var n=this.domBuilder;n.startDocument(),zp(e,e={}),n2(i,e,t,n,this.errorHandler),n.endDocument()}};function n2(i,e,t,n,r){function s(j){if(j>65535){j-=65536;var re=55296+(j>>10),Z=56320+(j&1023);return String.fromCharCode(re,Z)}else return String.fromCharCode(j)}function a(j){var re=j.slice(1,-1);return Object.hasOwnProperty.call(t,re)?t[re]:re.charAt(0)==="#"?s(parseInt(re.substr(1).replace("x","0x"))):(r.error("entity not found:"+j),j)}function l(j){if(j>_){var re=i.substring(_,j).replace(/&#?\w+;/g,a);d&&o(_),n.characters(re,0,j-_),_=j}}function o(j,re){for(;j>=f&&(re=h.exec(i));)u=re.index,f=u+re[0].length,d.lineNumber++;d.columnNumber=j-u+1}for(var u=0,f=0,h=/.*(?:\r\n?|\n)|.*$/g,d=n.locator,c=[{currentNSMap:e}],p={},_=0;;){try{var m=i.indexOf("<",_);if(m<0){if(!i.substr(_).match(/^\s*$/)){var y=n.doc,O=y.createTextNode(i.substr(_));y.appendChild(O),n.currentElement=O}return}switch(m>_&&l(m),i.charAt(m+1)){case"/":var D=i.indexOf(">",m+3),T=i.substring(m+2,D).replace(/[ \t\n\r]+$/g,""),N=c.pop();D<0?(T=i.substring(m+2).replace(/[\s<].*/,""),r.error("end tag name: "+T+" is not complete:"+N.tagName),D=m+1+T.length):T.match(/\s</)&&(T=T.replace(/[\s<].*/,""),r.error("end tag name: "+T+" maybe not complete"),D=m+1+T.length);var g=N.localNSMap,k=N.tagName==T,w=k||N.tagName&&N.tagName.toLowerCase()==T.toLowerCase();if(w){if(n.endElement(N.uri,N.localName,T),g)for(var R in g)Object.prototype.hasOwnProperty.call(g,R)&&n.endPrefixMapping(R);k||r.fatalError("end tag name: "+T+" is not match the current start tagName:"+N.tagName)}else c.push(N);D++;break;case"?":d&&o(m),D=o2(i,m,n);break;case"!":d&&o(m),D=l2(i,m,n,r);break;default:d&&o(m);var S=new Hp,B=c[c.length-1].currentNSMap,D=i2(i,m,S,B,a,r),L=S.length;if(!S.closed&&s2(i,D,S.tagName,p)&&(S.closed=!0,t.nbsp||r.warning("unclosed xml attribute")),d&&L){for(var A=Bu(d,{}),I=0;I<L;I++){var x=S[I];o(x.offset),x.locator=Bu(d,{})}n.locator=A,Lu(S,n,B)&&c.push(S),n.locator=d}else Lu(S,n,B)&&c.push(S);aa.isHTML(S.uri)&&!S.closed?D=a2(i,D,S.tagName,a,n):D++}}catch(j){if(j instanceof Ni)throw j;r.error("element parse error: "+j),D=-1}D>_?_=D:l(Math.max(m,_)+1)}}function Bu(i,e){return e.lineNumber=i.lineNumber,e.columnNumber=i.columnNumber,e}function i2(i,e,t,n,r,s){function a(d,c,p){t.attributeNames.hasOwnProperty(d)&&s.fatalError("Attribute "+d+" redefined"),t.addValue(d,c.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,r),p)}for(var l,o,u=++e,f=Hi;;){var h=i.charAt(u);switch(h){case"=":if(f===Fn)l=i.slice(e,u),f=xi;else if(f===hi)f=xi;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(f===xi||f===Fn)if(f===Fn&&(s.warning('attribute value must after "="'),l=i.slice(e,u)),e=u+1,u=i.indexOf(h,e),u>0)o=i.slice(e,u),a(l,o,e-1),f=_i;else throw new Error("attribute value no end '"+h+"' match");else if(f==pi)o=i.slice(e,u),a(l,o,e),s.warning('attribute "'+l+'" missed start quot('+h+")!!"),e=u+1,f=_i;else throw new Error('attribute value must after "="');break;case"/":switch(f){case Hi:t.setTagName(i.slice(e,u));case _i:case Xi:case Ra:f=Ra,t.closed=!0;case pi:case Fn:break;case hi:t.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),f==Hi&&t.setTagName(i.slice(e,u)),u;case">":switch(f){case Hi:t.setTagName(i.slice(e,u));case _i:case Xi:case Ra:break;case pi:case Fn:o=i.slice(e,u),o.slice(-1)==="/"&&(t.closed=!0,o=o.slice(0,-1));case hi:f===hi&&(o=l),f==pi?(s.warning('attribute "'+o+'" missed quot(")!'),a(l,o,e)):((!aa.isHTML(n[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+o+'" missed value!! "'+o+'" instead!!'),a(o,o,e));break;case xi:throw new Error("attribute value missed!!")}return u;case"":h=" ";default:if(h<=" ")switch(f){case Hi:t.setTagName(i.slice(e,u)),f=Xi;break;case Fn:l=i.slice(e,u),f=hi;break;case pi:var o=i.slice(e,u);s.warning('attribute "'+o+'" missed quot(")!!'),a(l,o,e);case _i:f=Xi;break}else switch(f){case hi:t.tagName,(!aa.isHTML(n[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+l+'" missed value!! "'+l+'" instead2!!'),a(l,l,e),e=u,f=Fn;break;case _i:s.warning('attribute space is required"'+l+'"!!');case Xi:f=Fn,e=u;break;case xi:f=pi,e=u;break;case Ra:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function Lu(i,e,t){for(var n=i.tagName,r=null,h=i.length;h--;){var s=i[h],a=s.qName,l=s.value,d=a.indexOf(":");if(d>0)var o=s.prefix=a.slice(0,d),u=a.slice(d+1),f=o==="xmlns"&&u;else u=a,o=null,f=a==="xmlns"&&"";s.localName=u,f!==!1&&(r==null&&(r={},zp(t,t={})),t[f]=r[f]=l,s.uri=aa.XMLNS,e.startPrefixMapping(f,l))}for(var h=i.length;h--;){s=i[h];var o=s.prefix;o&&(o==="xml"&&(s.uri=aa.XML),o!=="xmlns"&&(s.uri=t[o||""]))}var d=n.indexOf(":");d>0?(o=i.prefix=n.slice(0,d),u=i.localName=n.slice(d+1)):(o=null,u=i.localName=n);var c=i.uri=t[o||""];if(e.startElement(c,u,n,i),i.closed){if(e.endElement(c,u,n),r)for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&e.endPrefixMapping(o)}else return i.currentNSMap=t,i.localNSMap=r,!0}function a2(i,e,t,n,r){if(/^(?:script|textarea)$/i.test(t)){var s=i.indexOf("</"+t+">",e),a=i.substring(e+1,s);if(/[&<]/.test(a))return/^script$/i.test(t)?(r.characters(a,0,a.length),s):(a=a.replace(/&#?\w+;/g,n),r.characters(a,0,a.length),s)}return e+1}function s2(i,e,t,n){var r=n[t];return r==null&&(r=i.lastIndexOf("</"+t+">"),r<e&&(r=i.lastIndexOf("</"+t)),n[t]=r),r<e}function zp(i,e){for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}function l2(i,e,t,n){var r=i.charAt(e+2);switch(r){case"-":if(i.charAt(e+3)==="-"){var s=i.indexOf("-->",e+4);return s>e?(t.comment(i,e+4,s-e-4),s+3):(n.error("Unclosed comment"),-1)}else return-1;default:if(i.substr(e+3,6)=="CDATA["){var s=i.indexOf("]]>",e+9);return t.startCDATA(),t.characters(i,e+9,s-e-9),t.endCDATA(),s+3}var a=u2(i,e),l=a.length;if(l>1&&/!doctype/i.test(a[0][0])){var o=a[1][0],u=!1,f=!1;l>3&&(/^public$/i.test(a[2][0])?(u=a[3][0],f=l>4&&a[4][0]):/^system$/i.test(a[2][0])&&(f=a[3][0]));var h=a[l-1];return t.startDTD(o,u,f),t.endDTD(),h.index+h[0].length}}return-1}function o2(i,e,t){var n=i.indexOf("?>",e);if(n){var r=i.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return r?(r[0].length,t.processingInstruction(r[1],r[2]),n+2):-1}return-1}function Hp(){this.attributeNames={}}Hp.prototype={setTagName:function(i){if(!Ou.test(i))throw new Error("invalid tagName:"+i);this.tagName=i},addValue:function(i,e,t){if(!Ou.test(i))throw new Error("invalid attribute:"+i);this.attributeNames[i]=this.length,this[this.length++]={qName:i,value:e,offset:t}},length:0,getLocalName:function(i){return this[i].localName},getLocator:function(i){return this[i].locator},getQName:function(i){return this[i].qName},getURI:function(i){return this[i].uri},getValue:function(i){return this[i].value}};function u2(i,e){var t,n=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=e,r.exec(i);t=r.exec(i);)if(n.push(t),t[1])return n}Ql.XMLReader=Vp;Ql.ParseError=Ni;var f2=Nn,c2=xn,Uu=Mp,xp=Ql,d2=c2.DOMImplementation,ju=f2.NAMESPACE,h2=xp.ParseError,p2=xp.XMLReader;function Xp(i){return i.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function Gp(i){this.options=i||{locator:{}}}Gp.prototype.parseFromString=function(i,e){var t=this.options,n=new p2,r=t.domBuilder||new pa,s=t.errorHandler,a=t.locator,l=t.xmlns||{},o=/\/x?html?$/.test(e),u=o?Uu.HTML_ENTITIES:Uu.XML_ENTITIES;a&&r.setDocumentLocator(a),n.errorHandler=_2(s,r,a),n.domBuilder=t.domBuilder||r,o&&(l[""]=ju.HTML),l.xml=l.xml||ju.XML;var f=t.normalizeLineEndings||Xp;return i&&typeof i=="string"?n.parse(f(i),l,u):n.errorHandler.error("invalid doc source"),r.doc};function _2(i,e,t){if(!i){if(e instanceof pa)return e;i=e}var n={},r=i instanceof Function;t=t||{};function s(a){var l=i[a];!l&&r&&(l=i.length==2?function(o){i(a,o)}:i),n[a]=l&&function(o){l("[xmldom "+a+"]	"+o+gl(t))}||function(){}}return s("warning"),s("error"),s("fatalError"),n}function pa(){this.cdata=!1}function mi(i,e){e.lineNumber=i.lineNumber,e.columnNumber=i.columnNumber}pa.prototype={startDocument:function(){this.doc=new d2().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(i,e,t,n){var r=this.doc,s=r.createElementNS(i,t||e),a=n.length;Fa(this,s),this.currentElement=s,this.locator&&mi(this.locator,s);for(var l=0;l<a;l++){var i=n.getURI(l),o=n.getValue(l),t=n.getQName(l),u=r.createAttributeNS(i,t);this.locator&&mi(n.getLocator(l),u),u.value=u.nodeValue=o,s.setAttributeNode(u)}},endElement:function(i,e,t){var n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping:function(i,e){},endPrefixMapping:function(i){},processingInstruction:function(i,e){var t=this.doc.createProcessingInstruction(i,e);this.locator&&mi(this.locator,t),Fa(this,t)},ignorableWhitespace:function(i,e,t){},characters:function(i,e,t){if(i=qu.apply(this,arguments),i){if(this.cdata)var n=this.doc.createCDATASection(i);else var n=this.doc.createTextNode(i);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(i)&&this.doc.appendChild(n),this.locator&&mi(this.locator,n)}},skippedEntity:function(i){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(i){(this.locator=i)&&(i.lineNumber=0)},comment:function(i,e,t){i=qu.apply(this,arguments);var n=this.doc.createComment(i);this.locator&&mi(this.locator,n),Fa(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(i,e,t){var n=this.doc.implementation;if(n&&n.createDocumentType){var r=n.createDocumentType(i,e,t);this.locator&&mi(this.locator,r),Fa(this,r),this.doc.doctype=r}},warning:function(i){console.warn("[xmldom warning]	"+i,gl(this.locator))},error:function(i){console.error("[xmldom error]	"+i,gl(this.locator))},fatalError:function(i){throw new h2(i,this.locator)}};function gl(i){if(i)return`
@`+(i.systemId||"")+"#[line:"+i.lineNumber+",col:"+i.columnNumber+"]"}function qu(i,e,t){return typeof i=="string"?i.substr(e,t):i.length>=e+t||e?new java.lang.String(i,e,t)+"":i}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(i){pa.prototype[i]=function(){return null}});function Fa(i,e){i.currentElement?i.currentElement.appendChild(e):i.doc.appendChild(e)}ms.__DOMHandler=pa;ms.normalizeLineEndings=Xp;ms.DOMParser=Gp;var Mu=ms.DOMParser;function m2(i){return i=i.split(";")[0].trim(),new dr("http://www.w3.org/ns/iana/media-types/"+i+"#Resource")}function v2(i,e){i.callbacks={};for(var t=e.length-1;t>=0;t--)i.callbacks[e[t]]=[];i.addHook=function(n){i.callbacks[n]||(i.callbacks[n]=[])},i.addCallback=function(n,r){i.callbacks[n].push(r)},i.removeCallback=function(n,r){for(var s=0;s<i.callbacks[n].length;s++)if(i.callbacks[n][s].name===r)return i.callbacks[n].splice(s,1),!0;return!1},i.insertCallback=function(n,r){i.callbacks[n].unshift(r)},i.fireCallbacks=function(r,s){var a=[],l=[],o=i.callbacks[r].length,u,f;for(u=o-1;u>=0;u--)f=i.callbacks[r][u],f&&f.apply(i,s)&&a.push(f);for(u=a.length-1;u>=0;u--)l.push(a[u]);for(u=o;u<i.callbacks[r].length;u++)l.push(i.callbacks[r][u]);i.callbacks[r]=l}}function g2(i,e){e=e||{};var t=[];e&&e.selfClosing&&e.selfClosing.split(" ").forEach(function(r){t[r]=!0});var n=[];return e&&e.skipAttributes&&e.skipAttributes.split(" ").forEach(function(r){n[r]=!0}),$p(i,e,t,n)}function $p(i,e,t,n){var r,s="",a=[!1];if(typeof i.nodeType>"u")return s;if(i.nodeType===1){if(i.hasAttribute("class")&&e&&e.classWithChildText&&i.matches(e.classWithChildText.class))s+=i.querySelector(e.classWithChildText.element).textContent;else if(!(e&&e.skipNodeWithClass&&i.matches("."+e.skipNodeWithClass))){var l=i.nodeName.toLowerCase();s+="<"+l;var o=[];for(r=i.attributes.length-1;r>=0;r--){var u=i.attributes[r];if(!(n&&n.length>0&&n[u.name])&&!/^\d+$/.test(u.name)){if(u.name==="class"&&e&&e.replaceClassItemWith&&u.value.split(" ").indexOf(e.replaceClassItemWith.source)>-1){var f=new RegExp(e.replaceClassItemWith.source,"g");u.value=u.value.replace(f,e.replaceClassItemWith.target).trim()}u.name==="class"&&e&&e.skipClassWithValue&&e.skipClassWithValue===u.value||o.push(u.name+"='"+u.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;")+"'")}}if(o.length>0&&(e&&e.sortAttributes&&o.sort(function(d,c){return d.toLowerCase().localeCompare(c.toLowerCase())}),s+=" "+o.join(" ")),t&&t.ename)s+=" />";else{for(s+=">",s+=l==="html"?`
  `:"",a.push(l==="style"||l==="script"),r=0;r<i.childNodes.length;r++)s+=$p(i.childNodes[r]);a.pop(),s+=l==="body"?"</"+l+`>
`:"</"+l+">"}}}else if(i.nodeType===8)s+="<!--"+i.nodeValue+"-->";else if(i.nodeType===3||i.nodeType===4){var h=i.nodeValue.replace(/\n+$/,"");s+=a[a.length-1]?h:h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}else console.log("Warning; Cannot handle serialising nodes of type: "+i.nodeType),console.log(i);return s}function Ms(i,e,t,n){var r=function(o){return o.termType==="BlankNode"?null:o},s=function(o){var u=t.statementsMatching(o).map(function(f){return""+r(f.subject)+" "+r(f.predicate)+" "+r(f.object)}).concat(t.statementsMatching(void 0,void 0,o).map(function(f){return""+r(f.subject)+" "+r(f.predicate)+" "+r(f.object)}));return u.sort(),u.join(`
`)},a=Object.prototype.hasOwnProperty.call(t,"compareTerms")?t.compareTerms(i,e):i.compareTerm(e);return i.termType==="BlankNode"&&e.termType==="BlankNode"?a===0?0:s(i)>s(e)?1:s(i)<s(e)?-1:a:n&&i.uri&&e.uri?(n[i.uri]||i.uri).localeCompare(n[e.uri]||e.uri):a}function b2(i,e,t,n){return Ms(i.subject,e.subject,t,n)||Ms(i.predicate,e.predicate,t,n)||Ms(i.object,e.object,t,n)}function Di(i,e){var t;if(e=e||{},typeof module<"u"&&module&&module.exports){var n=new Mu().parseFromString(i,e.contentType||"application/xhtml+xml");return n}else typeof window<"u"&&window.DOMParser?t=new window.DOMParser:t=new Mu;return t.parseFromString(i,"application/xml")}function w2(i,e){for(var t=0;t<i.length;t++)if(i[t].subject.equals(e.subject)&&i[t].predicate.equals(e.predicate)&&i[t].object.equals(e.object)&&i[t].why.equals(e.why)){i.splice(t,1);return}throw new Error("RDFArrayRemove: Array did not contain "+e+" "+e.why)}function Qp(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Hr;return{boolean:i.namedNode("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:i.namedNode("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:i.namedNode("http://www.w3.org/2001/XMLSchema#decimal"),double:i.namedNode("http://www.w3.org/2001/XMLSchema#double"),integer:i.namedNode("http://www.w3.org/2001/XMLSchema#integer"),langString:i.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:i.namedNode("http://www.w3.org/2001/XMLSchema#string")}}Qp(Hr);const Vu={acl:"http://www.w3.org/ns/auth/acl#",arg:"http://www.w3.org/ns/pim/arg#",as:"https://www.w3.org/ns/activitystreams#",cal:"http://www.w3.org/2002/12/cal/ical#",cert:"http://www.w3.org/ns/auth/cert#",contact:"http://www.w3.org/2000/10/swap/pim/contact#",dc:"http://purl.org/dc/elements/1.1/",dct:"http://purl.org/dc/terms/",doap:"http://usefulinc.com/ns/doap#",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",gpx:"http://www.w3.org/ns/pim/gpx#",http:"http://www.w3.org/2007/ont/http#",httph:"http://www.w3.org/2007/ont/httph#",icalTZ:"http://www.w3.org/2002/12/cal/icaltzd#",ldp:"http://www.w3.org/ns/ldp#",link:"http://www.w3.org/2007/ont/link#",log:"http://www.w3.org/2000/10/swap/log#",meeting:"http://www.w3.org/ns/pim/meeting#",mo:"http://purl.org/ontology/mo/",org:"http://www.w3.org/ns/org#",owl:"http://www.w3.org/2002/07/owl#",pad:"http://www.w3.org/ns/pim/pad#",patch:"http://www.w3.org/ns/pim/patch#",prov:"http://www.w3.org/ns/prov#",qu:"http://www.w3.org/2000/10/swap/pim/qif#",trip:"http://www.w3.org/ns/pim/trip#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rss:"http://purl.org/rss/1.0/",sched:"http://www.w3.org/ns/pim/schedule#",schema:"http://schema.org/",sioc:"http://rdfs.org/sioc/ns#",solid:"http://www.w3.org/ns/solid/terms#",space:"http://www.w3.org/ns/pim/space#",stat:"http://www.w3.org/ns/posix/stat#",tab:"http://www.w3.org/2007/ont/link#",tabont:"http://www.w3.org/2007/ont/link#",ui:"http://www.w3.org/ns/ui#",vcard:"http://www.w3.org/2006/vcard/ns#",wf:"http://www.w3.org/2005/01/wf/flow#",xsd:"http://www.w3.org/2001/XMLSchema#",cco:"http://www.ontologyrepository.com/CommonCoreOntologies/",skos:"http://www.w3.org/2004/02/skos/core#",bookmark:"http://www.w3.org/2002/01/bookmark#",vann:"http://purl.org/vocab/vann/"};function y2(i={namedNode:e=>e}){const e={};for(const t in Vu){const n=Vu[t];e[t]=function(r=""){return i.namedNode(n+r)}}return e}var E2=y2;const zu=oa(E2);var Wp={exports:{}};(function(i){(function(e,t){i.exports?i.exports=t():e.ttl2jsonld=t()})(ls,function(){function e(r,s){function a(){this.constructor=r}a.prototype=s.prototype,r.prototype=new a}function t(r,s,a,l){this.message=r,this.expected=s,this.found=a,this.location=l,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,t)}e(t,Error),t.buildMessage=function(r,s){var a={literal:function(c){return'"'+o(c.text)+'"'},class:function(c){var p="",_;for(_=0;_<c.parts.length;_++)p+=c.parts[_]instanceof Array?u(c.parts[_][0])+"-"+u(c.parts[_][1]):u(c.parts[_]);return"["+(c.inverted?"^":"")+p+"]"},any:function(c){return"any character"},end:function(c){return"end of input"},other:function(c){return c.description}};function l(c){return c.charCodeAt(0).toString(16).toUpperCase()}function o(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+l(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+l(p)})}function u(c){return c.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+l(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+l(p)})}function f(c){return a[c.type](c)}function h(c){var p=new Array(c.length),_,m;for(_=0;_<c.length;_++)p[_]=f(c[_]);if(p.sort(),p.length>0){for(_=1,m=1;_<p.length;_++)p[_-1]!==p[_]&&(p[m]=p[_],m++);p.length=m}switch(p.length){case 1:return p[0];case 2:return p[0]+" or "+p[1];default:return p.slice(0,-1).join(", ")+", or "+p[p.length-1]}}function d(c){return c?'"'+o(c)+'"':"end of input"}return"Expected "+h(r)+" but "+d(s)+" found."};function n(r,s){s=s!==void 0?s:{};var a={},l={turtleDoc:ko},o=ko,u=function(b){var U=Tt.toJSON();return U["@graph"]=[],b.filter(H=>Array.isArray(H)).forEach(H=>{H.forEach(K=>{U["@graph"].push(K)})}),U["@graph"].length===1&&(Object.assign(U,U["@graph"][0]),delete U["@graph"]),U},f=".",h=vt(".",!1),d=function(b){return b},c="#",p=vt("#",!1),_=/^[^\n]/,m=Rt([`
`],!0,!1),y=`
`,O=vt(`
`,!1),T=function(b){return b.join("")},N="@prefix",g=vt("@prefix",!1),k=function(b,U){return Tt.addPrefix(b===""?"0":b,U),{}},w="@base",R=vt("@base",!1),S=function(b){return Tt.addBase(b),{}},B=/^[Bb]/,D=Rt(["B","b"],!1,!1),L=/^[Aa]/,A=Rt(["A","a"],!1,!1),I=/^[Ss]/,x=Rt(["S","s"],!1,!1),j=/^[Ee]/,re=Rt(["E","e"],!1,!1),Z=/^[Pp]/,$=Rt(["P","p"],!1,!1),G=/^[Rr]/,X=Rt(["R","r"],!1,!1),oe=/^[Ff]/,Q=Rt(["F","f"],!1,!1),le=/^[Ii]/,Ve=Rt(["I","i"],!1,!1),ze=/^[Xx]/,ke=Rt(["X","x"],!1,!1),Ie=function(b,U){var H={};return typeof b=="string"&&b!=="[]"?H["@id"]=b:typeof b=="object"&&Object.assign(H,b),U&&Object.assign(H,U),[H]},ve=function(b,U){var H={};return b&&Object.assign(H,b),U&&Object.assign(H,U),[H]},he=";",Fe=vt(";",!1),ot=function(b,U,H,K){var te={};return te[H]=K,te},He=function(b,U,H){return H},fe=function(b,U,H){var K={};return H.unshift(rm(b,U)),H.forEach(te=>{te&&Object.keys(te).forEach(_e=>{te[_e].forEach(me=>{_e==="@type"&&me["@id"]!==void 0&&(me=me["@id"]),K[_e]===void 0?K[_e]=me:Array.isArray(K[_e])?K[_e].push(me):K[_e]=[K[_e],me]})})}),K},Te=",",dt=vt(",",!1),Ot=function(b,U){return U},tr=function(b,U){return U.unshift(b),U},At="a",$t=vt("a",!1),Kt=function(){return"@type"},_t=function(b){return Os(b,!0)},Ct=function(b){return Os(b,!1)},Ut=function(b){return b==="[]"?{}:{"@id":b}},Zt=function(b){return{"@id":b}},hr="[",z=vt("[",!1),P="]",F=vt("]",!1),W="(",ce=vt("(",!1),Ee=")",Ae=vt(")",!1),Ze=function(b){return{"@list":b}},at=function(b,U){return{"@value":b,"@language":U}},Pe="^^",Xe=vt("^^",!1),et=function(b,U){if(U==="http://www.w3.org/2001/XMLSchema#boolean"&&b==="true")return!0;if(U==="http://www.w3.org/2001/XMLSchema#boolean"&&b==="false")return!1;if(U==="http://www.w3.org/2001/XMLSchema#integer")return parseInt(b);if(U==="http://www.w3.org/2001/XMLSchema#double")return parseFloat(b);const H=Tt.resolve(U,!0);if(H){const K=U.split(":")[0];if(H==="http://www.w3.org/2001/XMLSchema#boolean"&&b==="true")return Tt.decrement(K),!0;if(H==="http://www.w3.org/2001/XMLSchema#boolean"&&b==="false")return Tt.decrement(K),!1;if(H==="http://www.w3.org/2001/XMLSchema#integer")return Tt.decrement(K),parseInt(b);if(H==="http://www.w3.org/2001/XMLSchema#double")return Tt.decrement(K),parseFloat(b)}return{"@value":b,"@type":U}},ar="true",zr=vt("true",!1),lr=function(){return!0},vr="false",Qr=vt("false",!1),In=function(){return!1},ys=function(b){return b+":"},wa="<",Es=vt("<",!1),di=/^[^\0- <>"{}|\^`\\]/,Ui=Rt([["\0"," "],"<",">",'"',"{","}","|","^","`","\\"],!0,!1),ks=">",ya=vt(">",!1),Ds=function(b){const U=b.map(K=>65536<=K.codePointAt(0)&&K.codePointAt(0)<=983039?"a":K.length===1?K:K.length===6?String.fromCharCode("0x"+K.substring(2)):K.length===10?String.fromCodePoint("0x"+K.substring(2)):K).join("");if(U.match(/^[^\u0000-\u0020<>"{}|^`\\]*$/)){var H=b.join("");try{return Tt.resolve(H)}catch{Cs("Invalid IRIREF "+H)}}else Cs("Invalid IRIREF "+b.join("")+" / "+U)},Or=":",pe=vt(":",!1),se=function(b){return b=b||"0",Tt.hasPrefix(b)===!1&&Cs("undefined prefix "+b),b},ge=function(b){return b||""},Se=function(b,U){return Tt.increment(b),Tt.resolve(b+":"+U)},Ne="_:",rt=vt("_:",!1),Ye=/^[0-9]/,st=Rt([["0","9"]],!1,!1),Bt="@",er=vt("@",!1),kt=/^[a-zA-Z]/,Nt=Rt([["a","z"],["A","Z"]],!1,!1),Xt="-",ct=vt("-",!1),St=/^[a-zA-Z0-9]/,Gt=Rt([["a","z"],["A","Z"],["0","9"]],!1,!1),Lt=function(b,U){return"-"+U.join("")},Wr=function(b,U){return b.join("")+U.join("")},gr=/^[+\-]/,br=Rt(["+","-"],!1,!1),Pn=function(b){return b.match(/^[0+][0-9]+$/)?{"@value":b,"@type":"http://www.w3.org/2001/XMLSchema#integer"}:parseInt(b)},pn=function(b){return{"@value":b,"@type":"http://www.w3.org/2001/XMLSchema#decimal"}},kr=function(b){return{"@value":b,"@type":"http://www.w3.org/2001/XMLSchema#double"}},Br=/^[eE]/,_n=Rt(["e","E"],!1,!1),Dr='"',Yr=vt('"',!1),ji=/^[^"\\\n\r]/,qi=Rt(['"',"\\",`
`,"\r"],!0,!1),mn="'",vn=vt("'",!1),$n=/^[^'\\\n\r]/,Mi=Rt(["'","\\",`
`,"\r"],!0,!1),Qn="'''",Rn=vt("'''",!1),Jr=/^[^'\\]/,Kr=Rt(["'","\\"],!0,!1),Ea="''",ro=vt("''",!1),no=function(b,U){return"''"+U.join("")},io=function(b,U){return"'"+U.join("")},ao=function(b,U){return b.join("")+U.join("")},ka='"""',so=vt('"""',!1),Zr=/^[^"\\]/,en=Rt(['"',"\\"],!0,!1),Da='""',lo=vt('""',!1),oo=function(b,U){return'""'+U.join("")},uo=function(b,U){return'"'+U.join("")},fo="\\U",I_=vt("\\U",!1),P_=function(b){return String.fromCodePoint(parseInt(b.join(""),16))},co="\\u",R_=vt("\\u",!1),F_=function(b){return String.fromCharCode(parseInt(b.join(""),16))},ho="\\t",O_=vt("\\t",!1),B_=function(){return"	"},po="\\b",L_=vt("\\b",!1),U_=function(){return"\b"},_o="\\n",j_=vt("\\n",!1),q_=function(){return`
`},mo="\\r",M_=vt("\\r",!1),V_=function(){return"\r"},vo="\\f",z_=vt("\\f",!1),H_=function(){return"\f"},go='\\"',x_=vt('\\"',!1),X_=function(){return'"'},bo="\\'",G_=vt("\\'",!1),$_=function(){return"'"},wo="\\\\",Q_=vt("\\\\",!1),W_=function(){return"\\"},Y_=/^[ \t\r\n]/,J_=Rt([" ","	","\r",`
`],!1,!1),K_=function(){return"[]"},Z_=/^[\uD800-\uDBFF]/,e0=Rt([["\uD800","\uDBFF"]],!1,!1),t0=/^[\uDC00-\uDFFF]/,r0=Rt([["\uDC00","\uDFFF"]],!1,!1),n0=function(b,U){return b+U},i0=/^[A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,a0=Rt([["A","Z"],["a","z"],["À","Ö"],["Ø","ö"],["ø","˿"],["Ͱ","ͽ"],["Ϳ","῿"],["‌","‍"],["⁰","↏"],["Ⰰ","⿯"],["、","퟿"],["豈","﷏"],["ﷰ","�"]],!1,!1),s0="_",l0=vt("_",!1),o0="·",u0=vt("·",!1),f0=/^[\u0300-\u036F]/,c0=Rt([["̀","ͯ"]],!1,!1),d0=/^[\u203F-\u2040]/,h0=Rt([["‿","⁀"]],!1,!1),yo=function(b,U,H,K){return H.join("")+K.join("")},p0=function(b,U,H){return b+U.join("")+H.join("")},_0="%",m0=vt("%",!1),v0=/^[0-9A-Fa-f]/,g0=Rt([["0","9"],["A","F"],["a","f"]],!1,!1),b0="\\",w0=vt("\\",!1),y0=/^[_~.!$&'()*+,;=\/?#@%\-]/,E0=Rt(["_","~",".","!","$","&","'","(",")","*","+",",",";","=","/","?","#","@","%","-"],!1,!1),E=0,Qe=0,Aa=[{line:1,column:1}],tn=0,As=[],Ca;if("startRule"in s){if(!(s.startRule in l))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');o=l[s.startRule]}function Cs(b,U){throw U=U!==void 0?U:Ts(Qe,E),D0(b,U)}function vt(b,U){return{type:"literal",text:b,ignoreCase:U}}function Rt(b,U,H){return{type:"class",parts:b,inverted:U,ignoreCase:H}}function k0(){return{type:"end"}}function Eo(b){var U=Aa[b],H;if(U)return U;for(H=b-1;!Aa[H];)H--;for(U=Aa[H],U={line:U.line,column:U.column};H<b;)r.charCodeAt(H)===10?(U.line++,U.column=1):U.column++,H++;return Aa[b]=U,U}function Ts(b,U){var H=Eo(b),K=Eo(U);return{start:{offset:b,line:H.line,column:H.column},end:{offset:U,line:K.line,column:K.column}}}function De(b){E<tn||(E>tn&&(tn=E,As=[]),As.push(b))}function D0(b,U){return new t(b,null,null,U)}function A0(b,U,H){return new t(t.buildMessage(b,U),b,U,H)}function ko(){var b,U,H,K;for(b=E,U=[],H=Do();H!==a;)U.push(H),H=Do();if(U!==a){for(H=[],K=We();K!==a;)H.push(K),K=We();H!==a?(Qe=b,U=u(U),b=U):(E=b,b=a)}else E=b,b=a;return b}function Do(){var b,U,H,K;if(b=T0(),b===a)if(b=E,U=R0(),U!==a){for(H=[],K=We();K!==a;)H.push(K),K=We();H!==a?(r.charCodeAt(E)===46?(K=f,E++):(K=a,De(h)),K!==a?(Qe=b,U=d(U),b=U):(E=b,b=a)):(E=b,b=a)}else E=b,b=a;return b}function C0(){var b,U,H,K;if(b=E,r.charCodeAt(E)===35?(U=c,E++):(U=a,De(p)),U!==a){for(H=[],_.test(r.charAt(E))?(K=r.charAt(E),E++):(K=a,De(m));K!==a;)H.push(K),_.test(r.charAt(E))?(K=r.charAt(E),E++):(K=a,De(m));H!==a?(r.charCodeAt(E)===10?(K=y,E++):(K=a,De(O)),K!==a?(Qe=b,U=T(H),b=U):(E=b,b=a)):(E=b,b=a)}else E=b,b=a;return b}function We(){var b;return b=Y0(),b===a&&(b=C0()),b}function T0(){var b;return b=N0(),b===a&&(b=S0(),b===a&&(b=P0(),b===a&&(b=I0()))),b}function N0(){var b,U,H,K,te,_e,me,ne,Je;for(b=E,U=[],H=We();H!==a;)U.push(H),H=We();if(U!==a)if(r.substr(E,7)===N?(H=N,E+=7):(H=a,De(g)),H!==a){for(K=[],te=We();te!==a;)K.push(te),te=We();if(K!==a)if(te=So(),te!==a){for(_e=[],me=We();me!==a;)_e.push(me),me=We();if(_e!==a)if(me=zi(),me!==a){for(ne=[],Je=We();Je!==a;)ne.push(Je),Je=We();ne!==a?(r.charCodeAt(E)===46?(Je=f,E++):(Je=a,De(h)),Je!==a?(Qe=b,U=k(te,me),b=U):(E=b,b=a)):(E=b,b=a)}else E=b,b=a;else E=b,b=a}else E=b,b=a;else E=b,b=a}else E=b,b=a;else E=b,b=a;return b}function S0(){var b,U,H,K,te,_e,me;for(b=E,U=[],H=We();H!==a;)U.push(H),H=We();if(U!==a)if(r.substr(E,5)===w?(H=w,E+=5):(H=a,De(R)),H!==a){for(K=[],te=We();te!==a;)K.push(te),te=We();if(K!==a)if(te=zi(),te!==a){for(_e=[],me=We();me!==a;)_e.push(me),me=We();_e!==a?(r.charCodeAt(E)===46?(me=f,E++):(me=a,De(h)),me!==a?(Qe=b,U=S(te),b=U):(E=b,b=a)):(E=b,b=a)}else E=b,b=a;else E=b,b=a}else E=b,b=a;else E=b,b=a;return b}function I0(){var b,U,H,K,te,_e,me,ne;for(b=E,U=[],H=We();H!==a;)U.push(H),H=We();if(U!==a)if(B.test(r.charAt(E))?(H=r.charAt(E),E++):(H=a,De(D)),H!==a)if(L.test(r.charAt(E))?(K=r.charAt(E),E++):(K=a,De(A)),K!==a)if(I.test(r.charAt(E))?(te=r.charAt(E),E++):(te=a,De(x)),te!==a)if(j.test(r.charAt(E))?(_e=r.charAt(E),E++):(_e=a,De(re)),_e!==a){for(me=[],ne=We();ne!==a;)me.push(ne),ne=We();me!==a?(ne=zi(),ne!==a?(Qe=b,U=S(ne),b=U):(E=b,b=a)):(E=b,b=a)}else E=b,b=a;else E=b,b=a;else E=b,b=a;else E=b,b=a;else E=b,b=a;return b}function P0(){var b,U,H,K,te,_e,me,ne,Je,It,Yn,Jn;for(b=E,U=[],H=We();H!==a;)U.push(H),H=We();if(U!==a)if(Z.test(r.charAt(E))?(H=r.charAt(E),E++):(H=a,De($)),H!==a)if(G.test(r.charAt(E))?(K=r.charAt(E),E++):(K=a,De(X)),K!==a)if(j.test(r.charAt(E))?(te=r.charAt(E),E++):(te=a,De(re)),te!==a)if(oe.test(r.charAt(E))?(_e=r.charAt(E),E++):(_e=a,De(Q)),_e!==a)if(le.test(r.charAt(E))?(me=r.charAt(E),E++):(me=a,De(Ve)),me!==a)if(ze.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(ke)),ne!==a){for(Je=[],It=We();It!==a;)Je.push(It),It=We();if(Je!==a)if(It=So(),It!==a){for(Yn=[],Jn=We();Jn!==a;)Yn.push(Jn),Jn=We();Yn!==a?(Jn=zi(),Jn!==a?(Qe=b,U=k(It,Jn),b=U):(E=b,b=a)):(E=b,b=a)}else E=b,b=a;else E=b,b=a}else E=b,b=a;else E=b,b=a;else E=b,b=a;else E=b,b=a;else E=b,b=a;else E=b,b=a;else E=b,b=a;return b}function R0(){var b,U,H;return b=E,U=F0(),U!==a?(H=Ns(),H!==a?(Qe=b,U=Ie(U,H),b=U):(E=b,b=a)):(E=b,b=a),b===a&&(b=E,U=Ao(),U!==a?(H=Ns(),H===a&&(H=null),H!==a?(Qe=b,U=ve(U,H),b=U):(E=b,b=a)):(E=b,b=a)),b}function Ns(){var b,U,H,K,te,_e,me,ne,Je,It;if(b=E,U=Is(),U!==a)if(H=Ss(),H!==a){for(K=[],te=E,_e=[],me=We();me!==a;)_e.push(me),me=We();for(_e!==a?(r.charCodeAt(E)===59?(me=he,E++):(me=a,De(Fe)),me!==a?(ne=E,Je=Is(),Je!==a?(It=Ss(),It!==a?(Qe=ne,Je=ot(U,H,Je,It),ne=Je):(E=ne,ne=a)):(E=ne,ne=a),ne===a&&(ne=null),ne!==a?(Qe=te,_e=He(U,H,ne),te=_e):(E=te,te=a)):(E=te,te=a)):(E=te,te=a);te!==a;){for(K.push(te),te=E,_e=[],me=We();me!==a;)_e.push(me),me=We();_e!==a?(r.charCodeAt(E)===59?(me=he,E++):(me=a,De(Fe)),me!==a?(ne=E,Je=Is(),Je!==a?(It=Ss(),It!==a?(Qe=ne,Je=ot(U,H,Je,It),ne=Je):(E=ne,ne=a)):(E=ne,ne=a),ne===a&&(ne=null),ne!==a?(Qe=te,_e=He(U,H,ne),te=_e):(E=te,te=a)):(E=te,te=a)):(E=te,te=a)}K!==a?(Qe=b,U=fe(U,H,K),b=U):(E=b,b=a)}else E=b,b=a;else E=b,b=a;return b}function Ss(){var b,U,H,K,te,_e,me;if(b=E,U=Vi(),U!==a){for(H=[],K=E,te=[],_e=We();_e!==a;)te.push(_e),_e=We();for(te!==a?(r.charCodeAt(E)===44?(_e=Te,E++):(_e=a,De(dt)),_e!==a?(me=Vi(),me!==a?(Qe=K,te=Ot(U,me),K=te):(E=K,K=a)):(E=K,K=a)):(E=K,K=a);K!==a;){for(H.push(K),K=E,te=[],_e=We();_e!==a;)te.push(_e),_e=We();te!==a?(r.charCodeAt(E)===44?(_e=Te,E++):(_e=a,De(dt)),_e!==a?(me=Vi(),me!==a?(Qe=K,te=Ot(U,me),K=te):(E=K,K=a)):(E=K,K=a)):(E=K,K=a)}H!==a?(Qe=b,U=tr(U,H),b=U):(E=b,b=a)}else E=b,b=a;return b}function Is(){var b,U,H;if(b=E,U=O0(),U!==a&&(Qe=b,U=d(U)),b=U,b===a){for(b=E,U=[],H=We();H!==a;)U.push(H),H=We();U!==a?(r.charCodeAt(E)===97?(H=At,E++):(H=a,De($t)),H!==a?(Qe=b,U=Kt(),b=U):(E=b,b=a)):(E=b,b=a)}return b}function F0(){var b,U;return b=E,U=Co(),U!==a&&(Qe=b,U=_t(U)),b=U,b===a&&(b=To(),b===a&&(b=Ta())),b}function O0(){var b,U,H;for(b=E,U=[],H=We();H!==a;)U.push(H),H=We();return U!==a?(H=Ta(),H!==a?(Qe=b,U=d(H),b=U):(E=b,b=a)):(E=b,b=a),b}function Vi(){var b,U;return b=B0(),b===a&&(b=E,U=Co(),U!==a&&(Qe=b,U=Ct(U)),b=U,b===a&&(b=E,U=To(),U!==a&&(Qe=b,U=Ut(U)),b=U,b===a&&(b=E,U=Ao(),U!==a&&(Qe=b,U=d(U)),b=U,b===a&&(b=E,U=Ta(),U!==a&&(Qe=b,U=Zt(U)),b=U)))),b}function B0(){var b;return b=U0(),b===a&&(b=L0(),b===a&&(b=j0())),b}function Ao(){var b,U,H,K,te,_e;for(b=E,U=[],H=We();H!==a;)U.push(H),H=We();if(U!==a)if(r.charCodeAt(E)===91?(H=hr,E++):(H=a,De(z)),H!==a)if(K=Ns(),K!==a){for(te=[],_e=We();_e!==a;)te.push(_e),_e=We();te!==a?(r.charCodeAt(E)===93?(_e=P,E++):(_e=a,De(F)),_e!==a?(Qe=b,U=d(K),b=U):(E=b,b=a)):(E=b,b=a)}else E=b,b=a;else E=b,b=a;else E=b,b=a;return b}function Co(){var b,U,H,K,te,_e;for(b=E,U=[],H=We();H!==a;)U.push(H),H=We();if(U!==a)if(r.charCodeAt(E)===40?(H=W,E++):(H=a,De(ce)),H!==a){for(K=[],te=Vi();te!==a;)K.push(te),te=Vi();if(K!==a){for(te=[],_e=We();_e!==a;)te.push(_e),_e=We();te!==a?(r.charCodeAt(E)===41?(_e=Ee,E++):(_e=a,De(Ae)),_e!==a?(Qe=b,U=Ze(K),b=U):(E=b,b=a)):(E=b,b=a)}else E=b,b=a}else E=b,b=a;else E=b,b=a;return b}function L0(){var b,U,H;for(b=E,U=[],H=We();H!==a;)U.push(H),H=We();return U!==a?(H=X0(),H===a&&(H=x0(),H===a&&(H=H0())),H!==a?(Qe=b,U=d(H),b=U):(E=b,b=a)):(E=b,b=a),b}function U0(){var b,U,H,K,te,_e,me;for(b=E,U=[],H=We();H!==a;)U.push(H),H=We();if(U!==a)if(H=Ps(),H!==a){for(K=[],te=We();te!==a;)K.push(te),te=We();K!==a?(te=z0(),te!==a?(Qe=b,U=at(H,te),b=U):(E=b,b=a)):(E=b,b=a)}else E=b,b=a;else E=b,b=a;if(b===a){for(b=E,U=[],H=We();H!==a;)U.push(H),H=We();if(U!==a)if(H=Ps(),H!==a){for(K=[],te=We();te!==a;)K.push(te),te=We();if(K!==a)if(r.substr(E,2)===Pe?(te=Pe,E+=2):(te=a,De(Xe)),te!==a){for(_e=[],me=We();me!==a;)_e.push(me),me=We();_e!==a?(me=Ta(),me!==a?(Qe=b,U=et(H,me),b=U):(E=b,b=a)):(E=b,b=a)}else E=b,b=a;else E=b,b=a}else E=b,b=a;else E=b,b=a;if(b===a){for(b=E,U=[],H=We();H!==a;)U.push(H),H=We();U!==a?(H=Ps(),H!==a?(Qe=b,U=d(H),b=U):(E=b,b=a)):(E=b,b=a)}}return b}function j0(){var b,U,H;for(b=E,U=[],H=We();H!==a;)U.push(H),H=We();if(U!==a?(r.substr(E,4)===ar?(H=ar,E+=4):(H=a,De(zr)),H!==a?(Qe=b,U=lr(),b=U):(E=b,b=a)):(E=b,b=a),b===a){for(b=E,U=[],H=We();H!==a;)U.push(H),H=We();U!==a?(r.substr(E,5)===vr?(H=vr,E+=5):(H=a,De(Qr)),H!==a?(Qe=b,U=In(),b=U):(E=b,b=a)):(E=b,b=a)}return b}function Ps(){var b,U,H;for(b=E,U=[],H=We();H!==a;)U.push(H),H=We();return U!==a?(H=Q0(),H===a&&(H=W0(),H===a&&(H=$0(),H===a&&(H=G0()))),H!==a?(Qe=b,U=d(H),b=U):(E=b,b=a)):(E=b,b=a),b}function Ta(){var b,U,H;for(b=E,U=[],H=We();H!==a;)U.push(H),H=We();if(U!==a?(H=zi(),H!==a?(Qe=b,U=d(H),b=U):(E=b,b=a)):(E=b,b=a),b===a){for(b=E,U=[],H=We();H!==a;)U.push(H),H=We();U!==a?(H=q0(),H!==a?(Qe=b,U=d(H),b=U):(E=b,b=a)):(E=b,b=a)}return b}function q0(){var b,U;return b=M0(),b===a&&(b=E,U=No(),U!==a&&(Qe=b,U=ys(U)),b=U),b}function To(){var b,U,H;for(b=E,U=[],H=We();H!==a;)U.push(H),H=We();if(U!==a?(H=V0(),H!==a?(Qe=b,U=d(H),b=U):(E=b,b=a)):(E=b,b=a),b===a){for(b=E,U=[],H=We();H!==a;)U.push(H),H=We();U!==a?(H=J0(),H!==a?(Qe=b,U=d(H),b=U):(E=b,b=a)):(E=b,b=a)}return b}function zi(){var b,U,H,K;if(b=E,r.charCodeAt(E)===60?(U=wa,E++):(U=a,De(Es)),U!==a){for(H=[],di.test(r.charAt(E))?(K=r.charAt(E),E++):(K=a,De(Ui)),K===a&&(K=jt());K!==a;)H.push(K),di.test(r.charAt(E))?(K=r.charAt(E),E++):(K=a,De(Ui)),K===a&&(K=jt());H!==a?(r.charCodeAt(E)===62?(K=ks,E++):(K=a,De(ya)),K!==a?(Qe=b,U=Ds(H),b=U):(E=b,b=a)):(E=b,b=a)}else E=b,b=a;return b}function No(){var b,U,H;return b=E,U=Po(),U===a&&(U=null),U!==a?(r.charCodeAt(E)===58?(H=Or,E++):(H=a,De(pe)),H!==a?(Qe=b,U=se(U),b=U):(E=b,b=a)):(E=b,b=a),b}function So(){var b,U,H;return b=E,U=Po(),U===a&&(U=null),U!==a?(r.charCodeAt(E)===58?(H=Or,E++):(H=a,De(pe)),H!==a?(Qe=b,U=ge(U),b=U):(E=b,b=a)):(E=b,b=a),b}function M0(){var b,U,H;return b=E,U=No(),U!==a?(H=K0(),H!==a?(Qe=b,U=Se(U,H),b=U):(E=b,b=a)):(E=b,b=a),b}function V0(){var b,U,H,K,te,_e,me,ne,Je,It;if(b=E,U=E,r.substr(E,2)===Ne?(H=Ne,E+=2):(H=a,De(rt)),H!==a)if(K=Fs(),K===a&&(Ye.test(r.charAt(E))?(K=r.charAt(E),E++):(K=a,De(st))),K!==a){for(te=[],_e=or();_e!==a;)te.push(_e),_e=or();if(te!==a){if(_e=[],me=E,ne=[],r.charCodeAt(E)===46?(Je=f,E++):(Je=a,De(h)),Je!==a)for(;Je!==a;)ne.push(Je),r.charCodeAt(E)===46?(Je=f,E++):(Je=a,De(h));else ne=a;if(ne!==a){if(Je=[],It=or(),It!==a)for(;It!==a;)Je.push(It),It=or();else Je=a;Je!==a?(ne=[ne,Je],me=ne):(E=me,me=a)}else E=me,me=a;for(;me!==a;){if(_e.push(me),me=E,ne=[],r.charCodeAt(E)===46?(Je=f,E++):(Je=a,De(h)),Je!==a)for(;Je!==a;)ne.push(Je),r.charCodeAt(E)===46?(Je=f,E++):(Je=a,De(h));else ne=a;if(ne!==a){if(Je=[],It=or(),It!==a)for(;It!==a;)Je.push(It),It=or();else Je=a;Je!==a?(ne=[ne,Je],me=ne):(E=me,me=a)}else E=me,me=a}_e!==a?(H=[H,K,te,_e],U=H):(E=U,U=a)}else E=U,U=a}else E=U,U=a;else E=U,U=a;return U!==a?b=r.substring(b,E):b=U,b}function z0(){var b,U,H,K,te,_e,me,ne;if(b=E,r.charCodeAt(E)===64?(U=Bt,E++):(U=a,De(er)),U!==a){if(H=[],kt.test(r.charAt(E))?(K=r.charAt(E),E++):(K=a,De(Nt)),K!==a)for(;K!==a;)H.push(K),kt.test(r.charAt(E))?(K=r.charAt(E),E++):(K=a,De(Nt));else H=a;if(H!==a){if(K=[],te=E,r.charCodeAt(E)===45?(_e=Xt,E++):(_e=a,De(ct)),_e!==a){if(me=[],St.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(Gt)),ne!==a)for(;ne!==a;)me.push(ne),St.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(Gt));else me=a;me!==a?(Qe=te,_e=Lt(H,me),te=_e):(E=te,te=a)}else E=te,te=a;for(;te!==a;)if(K.push(te),te=E,r.charCodeAt(E)===45?(_e=Xt,E++):(_e=a,De(ct)),_e!==a){if(me=[],St.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(Gt)),ne!==a)for(;ne!==a;)me.push(ne),St.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(Gt));else me=a;me!==a?(Qe=te,_e=Lt(H,me),te=_e):(E=te,te=a)}else E=te,te=a;K!==a?(Qe=b,U=Wr(H,K),b=U):(E=b,b=a)}else E=b,b=a}else E=b,b=a;return b}function H0(){var b,U,H,K,te,_e;if(b=E,U=E,H=E,gr.test(r.charAt(E))?(K=r.charAt(E),E++):(K=a,De(br)),K===a&&(K=null),K!==a){if(te=[],Ye.test(r.charAt(E))?(_e=r.charAt(E),E++):(_e=a,De(st)),_e!==a)for(;_e!==a;)te.push(_e),Ye.test(r.charAt(E))?(_e=r.charAt(E),E++):(_e=a,De(st));else te=a;te!==a?(K=[K,te],H=K):(E=H,H=a)}else E=H,H=a;return H!==a?U=r.substring(U,E):U=H,U!==a&&(Qe=b,U=Pn(U)),b=U,b}function x0(){var b,U,H,K,te,_e,me,ne;if(b=E,U=E,H=E,gr.test(r.charAt(E))?(K=r.charAt(E),E++):(K=a,De(br)),K===a&&(K=null),K!==a){for(te=[],Ye.test(r.charAt(E))?(_e=r.charAt(E),E++):(_e=a,De(st));_e!==a;)te.push(_e),Ye.test(r.charAt(E))?(_e=r.charAt(E),E++):(_e=a,De(st));if(te!==a)if(r.charCodeAt(E)===46?(_e=f,E++):(_e=a,De(h)),_e!==a){if(me=[],Ye.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(st)),ne!==a)for(;ne!==a;)me.push(ne),Ye.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(st));else me=a;me!==a?(K=[K,te,_e,me],H=K):(E=H,H=a)}else E=H,H=a;else E=H,H=a}else E=H,H=a;return H!==a?U=r.substring(U,E):U=H,U!==a&&(Qe=b,U=pn(U)),b=U,b}function X0(){var b,U,H,K,te,_e,me,ne,Je;if(b=E,U=E,H=E,gr.test(r.charAt(E))?(K=r.charAt(E),E++):(K=a,De(br)),K===a&&(K=null),K!==a){if(te=E,_e=[],Ye.test(r.charAt(E))?(me=r.charAt(E),E++):(me=a,De(st)),me!==a)for(;me!==a;)_e.push(me),Ye.test(r.charAt(E))?(me=r.charAt(E),E++):(me=a,De(st));else _e=a;if(_e!==a)if(r.charCodeAt(E)===46?(me=f,E++):(me=a,De(h)),me!==a){for(ne=[],Ye.test(r.charAt(E))?(Je=r.charAt(E),E++):(Je=a,De(st));Je!==a;)ne.push(Je),Ye.test(r.charAt(E))?(Je=r.charAt(E),E++):(Je=a,De(st));ne!==a?(Je=Rs(),Je!==a?(_e=[_e,me,ne,Je],te=_e):(E=te,te=a)):(E=te,te=a)}else E=te,te=a;else E=te,te=a;if(te===a){if(te=E,r.charCodeAt(E)===46?(_e=f,E++):(_e=a,De(h)),_e!==a){if(me=[],Ye.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(st)),ne!==a)for(;ne!==a;)me.push(ne),Ye.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(st));else me=a;me!==a?(ne=Rs(),ne!==a?(_e=[_e,me,ne],te=_e):(E=te,te=a)):(E=te,te=a)}else E=te,te=a;if(te===a){if(te=E,_e=[],Ye.test(r.charAt(E))?(me=r.charAt(E),E++):(me=a,De(st)),me!==a)for(;me!==a;)_e.push(me),Ye.test(r.charAt(E))?(me=r.charAt(E),E++):(me=a,De(st));else _e=a;_e!==a?(me=Rs(),me!==a?(_e=[_e,me],te=_e):(E=te,te=a)):(E=te,te=a)}}te!==a?(K=[K,te],H=K):(E=H,H=a)}else E=H,H=a;return H!==a?U=r.substring(U,E):U=H,U!==a&&(Qe=b,U=kr(U)),b=U,b}function Rs(){var b,U,H,K,te,_e;if(b=E,U=E,Br.test(r.charAt(E))?(H=r.charAt(E),E++):(H=a,De(_n)),H!==a)if(gr.test(r.charAt(E))?(K=r.charAt(E),E++):(K=a,De(br)),K===a&&(K=null),K!==a){if(te=[],Ye.test(r.charAt(E))?(_e=r.charAt(E),E++):(_e=a,De(st)),_e!==a)for(;_e!==a;)te.push(_e),Ye.test(r.charAt(E))?(_e=r.charAt(E),E++):(_e=a,De(st));else te=a;te!==a?(H=[H,K,te],U=H):(E=U,U=a)}else E=U,U=a;else E=U,U=a;return U!==a?b=r.substring(b,E):b=U,b}function G0(){var b,U,H,K;if(b=E,r.charCodeAt(E)===34?(U=Dr,E++):(U=a,De(Yr)),U!==a){for(H=[],ji.test(r.charAt(E))?(K=r.charAt(E),E++):(K=a,De(qi)),K===a&&(K=Qt(),K===a&&(K=jt()));K!==a;)H.push(K),ji.test(r.charAt(E))?(K=r.charAt(E),E++):(K=a,De(qi)),K===a&&(K=Qt(),K===a&&(K=jt()));H!==a?(r.charCodeAt(E)===34?(K=Dr,E++):(K=a,De(Yr)),K!==a?(Qe=b,U=T(H),b=U):(E=b,b=a)):(E=b,b=a)}else E=b,b=a;return b}function $0(){var b,U,H,K;if(b=E,r.charCodeAt(E)===39?(U=mn,E++):(U=a,De(vn)),U!==a){for(H=[],$n.test(r.charAt(E))?(K=r.charAt(E),E++):(K=a,De(Mi)),K===a&&(K=Qt(),K===a&&(K=jt()));K!==a;)H.push(K),$n.test(r.charAt(E))?(K=r.charAt(E),E++):(K=a,De(Mi)),K===a&&(K=Qt(),K===a&&(K=jt()));H!==a?(r.charCodeAt(E)===39?(K=mn,E++):(K=a,De(vn)),K!==a?(Qe=b,U=T(H),b=U):(E=b,b=a)):(E=b,b=a)}else E=b,b=a;return b}function Q0(){var b,U,H,K,te,_e,me,ne;if(b=E,r.substr(E,3)===Qn?(U=Qn,E+=3):(U=a,De(Rn)),U!==a){for(H=[],Jr.test(r.charAt(E))?(K=r.charAt(E),E++):(K=a,De(Kr)),K===a&&(K=Qt(),K===a&&(K=jt()));K!==a;)H.push(K),Jr.test(r.charAt(E))?(K=r.charAt(E),E++):(K=a,De(Kr)),K===a&&(K=Qt(),K===a&&(K=jt()));if(H!==a){if(K=[],te=E,r.substr(E,2)===Ea?(_e=Ea,E+=2):(_e=a,De(ro)),_e!==a){if(me=[],Jr.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(Kr)),ne===a&&(ne=Qt(),ne===a&&(ne=jt())),ne!==a)for(;ne!==a;)me.push(ne),Jr.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(Kr)),ne===a&&(ne=Qt(),ne===a&&(ne=jt()));else me=a;me!==a?(Qe=te,_e=no(H,me),te=_e):(E=te,te=a)}else E=te,te=a;if(te===a)if(te=E,r.charCodeAt(E)===39?(_e=mn,E++):(_e=a,De(vn)),_e!==a){if(me=[],Jr.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(Kr)),ne===a&&(ne=Qt(),ne===a&&(ne=jt())),ne!==a)for(;ne!==a;)me.push(ne),Jr.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(Kr)),ne===a&&(ne=Qt(),ne===a&&(ne=jt()));else me=a;me!==a?(Qe=te,_e=io(H,me),te=_e):(E=te,te=a)}else E=te,te=a;for(;te!==a;){if(K.push(te),te=E,r.substr(E,2)===Ea?(_e=Ea,E+=2):(_e=a,De(ro)),_e!==a){if(me=[],Jr.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(Kr)),ne===a&&(ne=Qt(),ne===a&&(ne=jt())),ne!==a)for(;ne!==a;)me.push(ne),Jr.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(Kr)),ne===a&&(ne=Qt(),ne===a&&(ne=jt()));else me=a;me!==a?(Qe=te,_e=no(H,me),te=_e):(E=te,te=a)}else E=te,te=a;if(te===a)if(te=E,r.charCodeAt(E)===39?(_e=mn,E++):(_e=a,De(vn)),_e!==a){if(me=[],Jr.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(Kr)),ne===a&&(ne=Qt(),ne===a&&(ne=jt())),ne!==a)for(;ne!==a;)me.push(ne),Jr.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(Kr)),ne===a&&(ne=Qt(),ne===a&&(ne=jt()));else me=a;me!==a?(Qe=te,_e=io(H,me),te=_e):(E=te,te=a)}else E=te,te=a}K!==a?(r.substr(E,3)===Qn?(te=Qn,E+=3):(te=a,De(Rn)),te!==a?(Qe=b,U=ao(H,K),b=U):(E=b,b=a)):(E=b,b=a)}else E=b,b=a}else E=b,b=a;return b}function W0(){var b,U,H,K,te,_e,me,ne;if(b=E,r.substr(E,3)===ka?(U=ka,E+=3):(U=a,De(so)),U!==a){for(H=[],Zr.test(r.charAt(E))?(K=r.charAt(E),E++):(K=a,De(en)),K===a&&(K=Qt(),K===a&&(K=jt()));K!==a;)H.push(K),Zr.test(r.charAt(E))?(K=r.charAt(E),E++):(K=a,De(en)),K===a&&(K=Qt(),K===a&&(K=jt()));if(H!==a){if(K=[],te=E,r.substr(E,2)===Da?(_e=Da,E+=2):(_e=a,De(lo)),_e!==a){if(me=[],Zr.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(en)),ne===a&&(ne=Qt(),ne===a&&(ne=jt())),ne!==a)for(;ne!==a;)me.push(ne),Zr.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(en)),ne===a&&(ne=Qt(),ne===a&&(ne=jt()));else me=a;me!==a?(Qe=te,_e=oo(H,me),te=_e):(E=te,te=a)}else E=te,te=a;if(te===a)if(te=E,r.charCodeAt(E)===34?(_e=Dr,E++):(_e=a,De(Yr)),_e!==a){if(me=[],Zr.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(en)),ne===a&&(ne=Qt(),ne===a&&(ne=jt())),ne!==a)for(;ne!==a;)me.push(ne),Zr.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(en)),ne===a&&(ne=Qt(),ne===a&&(ne=jt()));else me=a;me!==a?(Qe=te,_e=uo(H,me),te=_e):(E=te,te=a)}else E=te,te=a;for(;te!==a;){if(K.push(te),te=E,r.substr(E,2)===Da?(_e=Da,E+=2):(_e=a,De(lo)),_e!==a){if(me=[],Zr.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(en)),ne===a&&(ne=Qt(),ne===a&&(ne=jt())),ne!==a)for(;ne!==a;)me.push(ne),Zr.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(en)),ne===a&&(ne=Qt(),ne===a&&(ne=jt()));else me=a;me!==a?(Qe=te,_e=oo(H,me),te=_e):(E=te,te=a)}else E=te,te=a;if(te===a)if(te=E,r.charCodeAt(E)===34?(_e=Dr,E++):(_e=a,De(Yr)),_e!==a){if(me=[],Zr.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(en)),ne===a&&(ne=Qt(),ne===a&&(ne=jt())),ne!==a)for(;ne!==a;)me.push(ne),Zr.test(r.charAt(E))?(ne=r.charAt(E),E++):(ne=a,De(en)),ne===a&&(ne=Qt(),ne===a&&(ne=jt()));else me=a;me!==a?(Qe=te,_e=uo(H,me),te=_e):(E=te,te=a)}else E=te,te=a}K!==a?(r.substr(E,3)===ka?(te=ka,E+=3):(te=a,De(so)),te!==a?(Qe=b,U=ao(H,K),b=U):(E=b,b=a)):(E=b,b=a)}else E=b,b=a}else E=b,b=a;return b}function jt(){var b,U,H,K,te,_e,me,ne,Je,It,Yn;return b=E,r.substr(E,2)===fo?(U=fo,E+=2):(U=a,De(I_)),U!==a?(H=E,K=Ar(),K!==a?(te=Ar(),te!==a?(_e=Ar(),_e!==a?(me=Ar(),me!==a?(ne=Ar(),ne!==a?(Je=Ar(),Je!==a?(It=Ar(),It!==a?(Yn=Ar(),Yn!==a?(K=[K,te,_e,me,ne,Je,It,Yn],H=K):(E=H,H=a)):(E=H,H=a)):(E=H,H=a)):(E=H,H=a)):(E=H,H=a)):(E=H,H=a)):(E=H,H=a)):(E=H,H=a),H!==a?(Qe=b,U=P_(H),b=U):(E=b,b=a)):(E=b,b=a),b===a&&(b=E,r.substr(E,2)===co?(U=co,E+=2):(U=a,De(R_)),U!==a?(H=E,K=Ar(),K!==a?(te=Ar(),te!==a?(_e=Ar(),_e!==a?(me=Ar(),me!==a?(K=[K,te,_e,me],H=K):(E=H,H=a)):(E=H,H=a)):(E=H,H=a)):(E=H,H=a),H!==a?(Qe=b,U=F_(H),b=U):(E=b,b=a)):(E=b,b=a)),b}function Qt(){var b,U;return b=E,r.substr(E,2)===ho?(U=ho,E+=2):(U=a,De(O_)),U!==a&&(Qe=b,U=B_()),b=U,b===a&&(b=E,r.substr(E,2)===po?(U=po,E+=2):(U=a,De(L_)),U!==a&&(Qe=b,U=U_()),b=U,b===a&&(b=E,r.substr(E,2)===_o?(U=_o,E+=2):(U=a,De(j_)),U!==a&&(Qe=b,U=q_()),b=U,b===a&&(b=E,r.substr(E,2)===mo?(U=mo,E+=2):(U=a,De(M_)),U!==a&&(Qe=b,U=V_()),b=U,b===a&&(b=E,r.substr(E,2)===vo?(U=vo,E+=2):(U=a,De(z_)),U!==a&&(Qe=b,U=H_()),b=U,b===a&&(b=E,r.substr(E,2)===go?(U=go,E+=2):(U=a,De(x_)),U!==a&&(Qe=b,U=X_()),b=U,b===a&&(b=E,r.substr(E,2)===bo?(U=bo,E+=2):(U=a,De(G_)),U!==a&&(Qe=b,U=$_()),b=U,b===a&&(b=E,r.substr(E,2)===wo?(U=wo,E+=2):(U=a,De(Q_)),U!==a&&(Qe=b,U=W_()),b=U))))))),b}function Y0(){var b;return Y_.test(r.charAt(E))?(b=r.charAt(E),E++):(b=a,De(J_)),b}function J0(){var b,U,H,K;if(b=E,r.charCodeAt(E)===91?(U=hr,E++):(U=a,De(z)),U!==a){for(H=[],K=We();K!==a;)H.push(K),K=We();H!==a?(r.charCodeAt(E)===93?(K=P,E++):(K=a,De(F)),K!==a?(Qe=b,U=K_(),b=U):(E=b,b=a)):(E=b,b=a)}else E=b,b=a;return b}function Io(){var b,U,H;return b=E,Z_.test(r.charAt(E))?(U=r.charAt(E),E++):(U=a,De(e0)),U!==a?(t0.test(r.charAt(E))?(H=r.charAt(E),E++):(H=a,De(r0)),H!==a?(Qe=b,U=n0(U,H),b=U):(E=b,b=a)):(E=b,b=a),b===a&&(i0.test(r.charAt(E))?(b=r.charAt(E),E++):(b=a,De(a0))),b}function Fs(){var b;return b=Io(),b===a&&(r.charCodeAt(E)===95?(b=s0,E++):(b=a,De(l0))),b}function or(){var b;return b=Fs(),b===a&&(r.charCodeAt(E)===45?(b=Xt,E++):(b=a,De(ct)),b===a&&(Ye.test(r.charAt(E))?(b=r.charAt(E),E++):(b=a,De(st)),b===a&&(r.charCodeAt(E)===183?(b=o0,E++):(b=a,De(u0)),b===a&&(f0.test(r.charAt(E))?(b=r.charAt(E),E++):(b=a,De(c0)),b===a&&(d0.test(r.charAt(E))?(b=r.charAt(E),E++):(b=a,De(h0))))))),b}function Po(){var b,U,H,K,te,_e,me,ne,Je;if(b=E,U=E,H=Io(),H!==a){for(K=[],te=or();te!==a;)K.push(te),te=or();if(K!==a){if(te=[],_e=E,me=[],r.charCodeAt(E)===46?(ne=f,E++):(ne=a,De(h)),ne!==a)for(;ne!==a;)me.push(ne),r.charCodeAt(E)===46?(ne=f,E++):(ne=a,De(h));else me=a;if(me!==a){if(ne=[],Je=or(),Je!==a)for(;Je!==a;)ne.push(Je),Je=or();else ne=a;ne!==a?(me=[me,ne],_e=me):(E=_e,_e=a)}else E=_e,_e=a;for(;_e!==a;){if(te.push(_e),_e=E,me=[],r.charCodeAt(E)===46?(ne=f,E++):(ne=a,De(h)),ne!==a)for(;ne!==a;)me.push(ne),r.charCodeAt(E)===46?(ne=f,E++):(ne=a,De(h));else me=a;if(me!==a){if(ne=[],Je=or(),Je!==a)for(;Je!==a;)ne.push(Je),Je=or();else ne=a;ne!==a?(me=[me,ne],_e=me):(E=_e,_e=a)}else E=_e,_e=a}te!==a?(H=[H,K,te],U=H):(E=U,U=a)}else E=U,U=a}else E=U,U=a;return U!==a?b=r.substring(b,E):b=U,b}function K0(){var b,U,H,K,te,_e,me,ne;if(b=E,U=Fs(),U===a&&(r.charCodeAt(E)===58?(U=Or,E++):(U=a,De(pe)),U===a&&(Ye.test(r.charAt(E))?(U=r.charAt(E),E++):(U=a,De(st)),U===a&&(U=Wn()))),U!==a){for(H=[],K=or(),K===a&&(r.charCodeAt(E)===58?(K=Or,E++):(K=a,De(pe)),K===a&&(K=Wn()));K!==a;)H.push(K),K=or(),K===a&&(r.charCodeAt(E)===58?(K=Or,E++):(K=a,De(pe)),K===a&&(K=Wn()));if(H!==a){if(K=[],te=E,_e=[],r.charCodeAt(E)===46?(me=f,E++):(me=a,De(h)),me!==a)for(;me!==a;)_e.push(me),r.charCodeAt(E)===46?(me=f,E++):(me=a,De(h));else _e=a;if(_e!==a){if(me=[],ne=or(),ne===a&&(r.charCodeAt(E)===58?(ne=Or,E++):(ne=a,De(pe)),ne===a&&(ne=Wn())),ne!==a)for(;ne!==a;)me.push(ne),ne=or(),ne===a&&(r.charCodeAt(E)===58?(ne=Or,E++):(ne=a,De(pe)),ne===a&&(ne=Wn()));else me=a;me!==a?(Qe=te,_e=yo(U,H,_e,me),te=_e):(E=te,te=a)}else E=te,te=a;for(;te!==a;){if(K.push(te),te=E,_e=[],r.charCodeAt(E)===46?(me=f,E++):(me=a,De(h)),me!==a)for(;me!==a;)_e.push(me),r.charCodeAt(E)===46?(me=f,E++):(me=a,De(h));else _e=a;if(_e!==a){if(me=[],ne=or(),ne===a&&(r.charCodeAt(E)===58?(ne=Or,E++):(ne=a,De(pe)),ne===a&&(ne=Wn())),ne!==a)for(;ne!==a;)me.push(ne),ne=or(),ne===a&&(r.charCodeAt(E)===58?(ne=Or,E++):(ne=a,De(pe)),ne===a&&(ne=Wn()));else me=a;me!==a?(Qe=te,_e=yo(U,H,_e,me),te=_e):(E=te,te=a)}else E=te,te=a}K!==a?(Qe=b,U=p0(U,H,K),b=U):(E=b,b=a)}else E=b,b=a}else E=b,b=a;return b}function Wn(){var b;return b=Z0(),b===a&&(b=em()),b}function Z0(){var b,U,H,K,te;return b=E,U=E,r.charCodeAt(E)===37?(H=_0,E++):(H=a,De(m0)),H!==a?(K=Ar(),K!==a?(te=Ar(),te!==a?(H=[H,K,te],U=H):(E=U,U=a)):(E=U,U=a)):(E=U,U=a),U!==a?b=r.substring(b,E):b=U,b}function Ar(){var b;return v0.test(r.charAt(E))?(b=r.charAt(E),E++):(b=a,De(g0)),b}function em(){var b,U,H;return b=E,r.charCodeAt(E)===92?(U=b0,E++):(U=a,De(w0)),U!==a?(y0.test(r.charAt(E))?(H=r.charAt(E),E++):(H=a,De(E0)),H!==a?(Qe=b,U=d(H),b=U):(E=b,b=a)):(E=b,b=a),b}var tm=new Function("try {return this===window;}catch(e){ return false;}"),Ro=tm()?window.URL:Tm.URL,Fo=function(b){return b.match(/^[a-z](.*?):(.+?)/g)};function rm(b,U){var H={};return H[b]=U,H}var Tt={base:[],data:{},addBase:function(b){if(Tt.base.length===0){Tt.base.push(b);return}const U=Tt.base[Tt.base.length-1];U!==b&&Tt.base.push(new Ro(b,U).toString())},addPrefix:function(b,U){const H=Tt.data[b];H===void 0?Tt.data[b]=[{uri:U,count:0}]:H[H.length-1].uri!==U&&H.push({uri:U,count:0})},hasPrefix:function(b){return this.data[b]!==void 0},resolve:function(b,U){const H=Object.keys(Tt.data).find(te=>b.indexOf(te+":")===0);if(H!==void 0){const te=Tt.data[H];if(te.length===1&&U!==!0&&Fo(te[0].uri))return b;const _e=te[te.length-1].uri;return b.replace(H+":",_e)}else{var K=Tt.base.length===0?s.baseIRI:Tt.base[Tt.base.length-1];return!K||b.match(/^(http:|https:|urn:|file:)/)?b:b.indexOf("//")===0&&K?K.split("//")[0]+b:new Ro(b,K).toString()}},increment:function(b){const U=Tt.data[b];U!==void 0&&U[U.length-1].count++},decrement:function(b){const U=Tt.data[b];U!==void 0&&U[U.length-1].count--},toJSON:function(){const b={};return Tt.base.length>0&&(b["@context"]===void 0&&(b["@context"]={}),b["@context"]["@base"]=Tt.base[0]),Object.keys(Tt.data).forEach(U=>{const H=Tt.data[U][0];H.uri==="http://www.w3.org/2001/XMLSchema#"&&H.count<1||Fo(H.uri)&&(b["@context"]===void 0&&(b["@context"]={}),b["@context"][U]=H.uri)}),b}};function Os(b,U){if(b["@list"]===void 0||!U&&!b["@list"].find(te=>te["@list"]!==void 0))return b;if(b["@list"].length===0)return{"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};var H={},K=null;return b["@list"].forEach(te=>{K===null?K=H:(K["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={},K=K["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]),K["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"]=Os(te,!0),K["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}),H}if(Ca=o(),Ca!==a&&E===r.length)return Ca;throw Ca!==a&&E<r.length&&De(k0()),A0(As,tn<r.length?r.charAt(tn):null,tn<r.length?Ts(tn,tn+1):Ts(tn,tn))}return{SyntaxError:t,parse:n}})})(Wp);var k2=Wp.exports;function D2(i){return new A2(i)}var A2=function(){function i(e){Jt(this,i),qe(this,"_notQNameChars",`	\r
 !"#$%&'()*.,+/;<=>?@[\\]^\`{|}~`),qe(this,"_notNameChars",this._notQNameChars+":"),qe(this,"validPrefix",new RegExp(/^[a-zA-Z][a-zA-Z0-9]*$/)),qe(this,"forbidden1",new RegExp(/[\\"\b\f\r\v\t\n\u0080-\uffff]/gm)),qe(this,"forbidden3",new RegExp(/[\\"\b\f\r\v\u0080-\uffff]/gm)),this.flags="",this.base=null,this.prefixes=[],this.namespaces=[];var t=Object.keys(zu());for(var n in t){var r=zu()[t[n]](""),s=t[n];this.prefixes[r]=s,this.namespaces[s]=r}this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.suggestPrefix("xml","reserved:reservedForFutureUse"),this.namespacesUsed=[],this.keywords=["a"],this.prefixchars="abcdefghijklmnopqustuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",this.incoming=null,this.formulas=[],this.store=e,this.rdfFactory=e.rdfFactory||Hr,this.xsd=Qp(this.rdfFactory)}return Yt(i,[{key:"setBase",value:function(t){return this.base=t,this}},{key:"setFlags",value:function(t){return this.flags=t||"",this}},{key:"toStr",value:function(t){var n=t.toNT();return t.termType==="Graph"&&(this.formulas[n]=t),n}},{key:"fromStr",value:function(t){if(t[0]==="{"){var n=this.formulas[t];return n||console.log("No formula object for "+t),n}return this.store.fromNT(t)}},{key:"setNamespaces",value:function(t){for(var n in t)this.setPrefix(n,t[n]);return this}},{key:"setPrefix",value:function(t,n){if(t.slice(0,7)!=="default"&&t.slice(0,2)!=="ns"&&!(!t||!n)){for(var r in this.prefixes)this.prefixes[r]==t&&delete this.prefixes[r];this.prefixes[n]=t,this.namespaces[t]=n}}},{key:"suggestPrefix",value:function(t,n){t.slice(0,7)!=="default"&&t.slice(0,2)!=="ns"&&(!t||!n||t in this.namespaces||n in this.prefixes||(this.prefixes[n]=t,this.namespaces[t]=n))}},{key:"suggestNamespaces",value:function(t){for(var n in t)this.suggestPrefix(n,t[n]);return this}},{key:"checkIntegrity",value:function(){var t,n;for(t in this.namespaces)if(this.prefixes[this.namespaces[t]]!==t)throw new Error("Serializer integity error 1: "+t+", "+this.namespaces[t]+", "+this.prefixes[this.namespaces[t]]+"!");for(n in this.prefixes)if(this.namespaces[this.prefixes[n]]!==n)throw new Error("Serializer integity error 2: "+n+", "+this.prefixs[n]+", "+this.namespaces[this.prefixes[n]]+"!")}},{key:"makeUpPrefix",value:function(t){var n=t;function r(u){return!this.validPrefix.test(u)||u==="ns"||u in this.namespaces?!1:(this.prefixes[t]=u,this.namespaces[u]=t,u)}var s=r.bind(this);"#/".indexOf(n[n.length-1])>=0&&(n=n.slice(0,-1));var a=n.lastIndexOf("/");a>=0&&(n=n.slice(a+1));for(var l=0;l<n.length&&this.prefixchars.indexOf(n[l]);)l++;if(n=n.slice(0,l),n.length<6&&s(n))return n;if(s(n.slice(0,3)))return n.slice(0,3);if(s(n.slice(0,2)))return n.slice(0,2);if(s(n.slice(0,4)))return n.slice(0,4);if(s(n.slice(0,1)))return n.slice(0,1);if(s(n.slice(0,5)))return n.slice(0,5);this.validPrefix.test(n)||(n="n");for(var o=0;;o++)if(s(n.slice(0,3)+o))return n.slice(0,3)+o}},{key:"rootSubjects",value:function(t){for(var n={},r={},s={},a=0;a<t.length;a++){var l=t[a],o=function(y){n.hasOwnProperty(y)||(n[y]=[]),n[y].push(l.subject)},u=[l.subject,l.predicate,l.object];u.map(function(m){m.termType==="BlankNode"?s[m.toNT()]=!0:m.termType==="Collection"&&m.elements.forEach(function(y){o(y)})}),o(t[a].object);var f=r[this.toStr(l.subject)];f||(f=[]),f.push(l),r[this.toStr(l.subject)]=f}var h=[];for(var d in r)if(r.hasOwnProperty(d)){var c=this.fromStr(d);if(c.termType!=="BlankNode"||!n[c]||n[c].length!==1){h.push(c);continue}}this.incoming=n;for(var p={},_=0;_<h.length;_++)p[h[_].toNT()]=!0;return{roots:h,subjects:r,rootsHash:p,incoming:n}}},{key:"toN3",value:function(t){return this.statementsToN3(t.statements)}},{key:"explicitURI",value:function(t){return this.flags.indexOf("r")<0&&this.base?t=js(this.base,t):this.flags.indexOf("u")>=0?t=T2(t):t=C2(decodeURI(t)),"<"+t+">"}},{key:"statementsToNTriples",value:function(t){var n=t.slice();n.sort();for(var r="",s="http://www.w3.org/1999/02/22-rdf-syntax-ns#",a=this,l=this.store,o=this.rdfFactory,u=function c(p){if(p.termType!=="Collection")return a.atomicTermToN3(p);for(var _=p.elements,m=l.sym(s+"nill"),y=_.length-1;y>=0;y--){var O=o.blankNode();r+=c(O)+" "+c(l.sym(s+"first"))+" "+c(_[y])+`.
`,r+=c(O)+" "+c(l.sym(s+"rest"))+" "+c(m)+`.
`,m=O}return a.atomicTermToN3(m)},f=0;f<n.length;f++){var h=n[f],d="";d+=u(h.subject)+" ",d+=u(h.predicate)+" ",d+=u(h.object)+" ",this.flags.indexOf("q")>=0&&(d+=u(h.why)+" "),d+=`.
`,r+=d}return r}},{key:"statementsToN3",value:function(t){var n=4,r=80,s=this.store,a={"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":"aaa:00"},l=function(S,B){return b2(S,B,s,a)};t.sort(l),this.base&&!this.defaultNamespace&&(this.defaultNamespace=this.base+"#");var o={};this.flags.indexOf("s")<0&&(o["http://www.w3.org/2002/07/owl#sameAs"]="="),this.flags.indexOf("t")<0&&(o["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"]="a"),this.flags.indexOf("i")<0&&(o["http://www.w3.org/2000/10/swap/log#implies"]="=>");var u=function(S){for(var B="",D=0;D<S;D++)B+=" ";return B},f=function R(S){for(var B="",D=0;D<S.length;D++){var L=S[D],A=typeof L=="string"?L:R(L);if(D!==0){var I=B.slice(-1)||" ";A===","||A===";"||A==="."&&!"0123456789.:".includes(I)||(B+=" ")}B+=A}return B},h=function R(S,B){var D="",L=1e5;B===void 0&&(B=-1);for(var A=0;A<S.length;A++){var I=S[A];if(typeof I!="string"){var x=R(I,B+1);if(x.length<10*(r-n*B)&&x.indexOf('"""')<0){var j=f(I);j.length<r-n*B&&(I=j,x="")}x&&(L=1e4),D+=x}if(typeof I=="string"){if(I.length===1&&D.slice(-1)===`
`&&",.;".indexOf(I)>=0){D=D.slice(0,-1),I=="."&&"0123456789.:".includes(D.charAt(D.length-1))&&(D+=" ",L+=1),D+=I+`
`,L+=1;continue}if(L<n*B+4||L+I.length+1<r&&";.".indexOf(D[D.length-2])<0)D=D.slice(0,-1)+" "+I+`
`,L+=I.length+1;else{var re=u(n*B)+I;D+=re+`
`,L=re.length,B<0&&(D+=`
`,L=1e5)}}}return D};function d(R){for(var S=this.rootSubjects(R),B=S.roots,D=[],L=0;L<B.length;L++){var A=B[L];D.push(p(A,S))}return D}var c=d.bind(this);function p(R,S){return R.termType==="BlankNode"&&!S.incoming[R]?O(R,S,!0).concat(["."]):[N(R,S)].concat([m(R,S)]).concat(["."])}function _(R,S){var B=[],D=null,L=S.subjects[this.toStr(R)]||[];if(typeof L>"u")throw new Error("Cant find statements for "+R);for(var A=[],I=0;I<L.length;I++){var x=L[I];x.predicate.uri===D?A.push(","):(D&&(B=B.concat([A]).concat([";"]),A=[]),B.push(o[x.predicate.uri]?o[x.predicate.uri]:N(x.predicate,S))),D=x.predicate.uri,A.push(O(x.object,S))}return B=B.concat([A]),B}var m=_.bind(this);function y(R,S,B){return R.termType==="BlankNode"&&(B||S.rootsHash[R.toNT()]===void 0)?S.subjects[this.toStr(R)]?["[",m(R,S),"]"]:"[]":N(R,S)}var O=y.bind(this);function T(R,S){var B,D;switch(R.termType){case"Graph":return D=["{"],D=D.concat(c(R.statements)),D.concat(["}"]);case"Collection":for(D=["("],B=0;B<R.elements.length;B++)D.push([O(R.elements[B],S)]);return D.push(")"),D;default:return this.atomicTermToN3(R)}}i.prototype.termToN3=N;var N=T.bind(this);function g(){var R="";this.flags.indexOf("d")<0&&this.defaultNamespace&&(R+="@prefix : "+this.explicitURI(this.defaultNamespace)+`.
`);for(var S in this.prefixes)this.prefixes.hasOwnProperty(S)&&this.namespacesUsed[S]&&(R+="@prefix "+this.prefixes[S]+": "+this.explicitURI(S)+`.
`);return R+`
`}var k=g.bind(this),w=c(t);return k()+h(w)}},{key:"atomicTermToN3",value:function(t,n){switch(t.termType){case"BlankNode":case"Variable":return t.toNT();case"Literal":var r=t.value;if(typeof r!="string")throw new TypeError("Value of RDF literal node must be a string");if(t.datatype&&this.flags.indexOf("x")<0)switch(t.datatype.uri){case"http://www.w3.org/2001/XMLSchema#integer":return r;case"http://www.w3.org/2001/XMLSchema#decimal":return r.indexOf(".")<0&&(r+=".0"),r;case"http://www.w3.org/2001/XMLSchema#double":{var s=r.toLowerCase().indexOf("e")>0;return r.indexOf(".")<0&&!s&&(r+=".0"),s||(r+="e0"),r}case"http://www.w3.org/2001/XMLSchema#boolean":return t.value==="1"?"true":"false"}var a=this.stringToN3(t.value);return t.language?a+="@"+t.language:t.datatype.equals(this.xsd.string)||(a+="^^"+this.atomicTermToN3(t.datatype,n)),a;case"NamedNode":return this.symbolToN3(t);case"DefaultGraph":return"";default:throw new Error("Internal: atomicTermToN3 cannot handle "+t+" of termType: "+t.termType)}}},{key:"stringToN3",value:function(t,n){n||(n="e");var r="",s,a,l,o,u;for(t.length>20&&t.slice(-1)!=='"'&&n.indexOf("n")<0&&(t.indexOf(`
`)>0||t.indexOf('"')>0)?(o='"""',u=this.forbidden3):(o='"',u=this.forbidden1),s=0;s<t.length;){u.lastIndex=0;var f=u.exec(t.slice(s));if(f==null)break;a=s+u.lastIndex-1,r+=t.slice(s,a);var h=t[a];h==='"'&&o==='"""'&&t.slice(a,a+3)!=='"""'?r+=h:(l=`\b\f\r	\v
\\"`.indexOf(h),l>=0?r+="\\"+'bfrtvn\\"'[l]:n.indexOf("e")>=0?r+="\\u"+("000"+h.charCodeAt(0).toString(16).toLowerCase()).slice(-4):r+=h),s=a+1}return o+r+t.slice(s)+o}},{key:"symbolToN3",value:function(t){var n=t.uri,r=n.indexOf("#");if(r<0&&this.flags.indexOf("/")<0&&(r=n.lastIndexOf("/")),r>=0&&this.flags.indexOf("p")<0&&(n.indexOf("http")===0||n.indexOf("ws")===0||n.indexOf("file")===0)){for(var s=!0,a=r+1;a<n.length;a++)if(this._notNameChars.indexOf(n[a])>=0){s=!1;break}if(s){var l=n.slice(r+1),o=n.slice(0,r+1);if(this.defaultNamespace&&this.defaultNamespace===o&&this.flags.indexOf("d")<0)return this.flags.indexOf("k")>=0&&this.keyords.indexOf(l)<0?l:":"+l;var u=this.prefixes[o];if(u||(u=this.makeUpPrefix(o)),u)return this.namespacesUsed[o]=!0,u+":"+l}}return this.explicitURI(n)}},{key:"writeStore",value:function(t){var n=this.store,r=n.fetcher,s=r&&r.appNode,a=this.store.index[3];for(var l in a){var o=n.fromNT(l);s&&o.equals(s)||t(`
`+this.atomicTermToN3(o)+" "+this.atomicTermToN3(n.sym("http://www.w3.org/2000/10/swap/log#semantics"))+" { "+this.statementsToN3(n.statementsMatching(void 0,void 0,void 0,o))+` }.
`)}n.statementsMatching(void 0,n.sym("http://www.w3.org/2007/ont/link#requestedURI")).map(function(h){t(`
<`+h.object.value+`> log:metadata {
`);var d=n.statementsMatching(void 0,void 0,void 0,h.subject);t(this.statementsToN3(this.statementsToN3(d))),t(`}.
`)});var u=[];s&&u.push(s);var f=[];u.map(function(h){f=f.concat(n.statementsMatching(void 0,void 0,void 0,h))}),t(this.statementsToN3(f))}},{key:"statementsToXML",value:function(t){var n=4,r=80,s=[];s["http://www.w3.org/1999/02/22-rdf-syntax-ns#"]=!0;var a="http://www.w3.org/1999/02/22-rdf-syntax-ns#_",l=function(L){for(var A="",I=0;I<L;I++)A+=" ";return A},o=function D(L){for(var A="",I=0;I<L.length;I++){var x=L[I],j=typeof x=="string"?x:D(x);A+=j}return A},u=function D(L,A){var I="",x,j=1e5;A||(A=0);for(var re=0;re<L.length;re++){var Z=L[re];if(typeof Z!="string"){var $=D(Z,A+1);$.length<10*(r-n*A)&&$.indexOf('"""')<0&&(x=o(Z),x.length<r-n*A&&(Z="   "+x,$="")),$&&(j=1e4),I+=$}typeof Z=="string"&&(j<n*A+4?(I=I.slice(0,-1)+" "+Z+`
`,j+=Z.length+1):(x=l(n*A)+Z,I+=x+`
`,j=x.length))}return I};function f(D){this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#");for(var L=this.rootSubjects(D),A=L.roots,I=[],x=0;x<A.length;x++){var j=A[x];I.push(m(j,L))}return I}var h=f.bind(this);function d(D){return typeof D>"u"?"@@@undefined@@@@":D.replace(/[&<"]/g,function(L){switch(L[0]){case"&":return"&amp;";case"<":return"&lt;";case'"':return"&quot;"}})}function c(D){return d(this.base?js(this.base,D.uri):D.uri)}var p=c.bind(this);function _(D,L){var A=[],I,x,j,re,Z=L.subjects[this.toStr(D)];if(typeof Z>"u")return T(D,L);Z.sort(function(le,Ve){var ze=le.predicate.uri,ke=Ve.predicate.uri;if(ze.substring(0,a.length)===a||ke.substring(0,a.length)===a)return ze.localeCompare(ke);var Ie=ze.substring(a.length),ve=ke.substring(a.length),he=parseInt(Ie,10),Fe=parseInt(ve,10);return isNaN(he)||isNaN(Fe)||he!==Ie||Fe!==ve?ze.localeCompare(ke):he-Fe});for(var $=0;$<Z.length;$++){if(j=Z[$],j.predicate.uri==="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"&&!I&&j.object.termType==="NamedNode"){I=j.object;continue}if(re=j.predicate,re.uri.substr(0,a.length)===a){var G=re.uri.substr(a.length),X=parseInt(G,10);G===X.toString()&&(re=this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#li"))}switch(x=g(re),j.object.termType){case"BlankNode":L.incoming[j.object].length===1?A=A.concat(["<"+x+' rdf:parseType="Resource">',m(j.object,L),"</"+x+">"]):A=A.concat(["<"+x+' rdf:nodeID="'+j.object.toNT().slice(2)+'"/>']);break;case"NamedNode":A=A.concat(["<"+x+' rdf:resource="'+p(j.object)+'"/>']);break;case"Literal":A=A.concat(["<"+x+(j.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+d(j.object.datatype.uri)+'"')+(j.object.language?' xml:lang="'+j.object.language+'"':"")+">"+d(j.object.value)+"</"+x+">"]);break;case"Collection":A=A.concat(["<"+x+' rdf:parseType="Collection">',y(j.object,L),"</"+x+">"]);break;default:throw new Error("Can't serialize object of type "+j.object.termType+" into XML")}}var oe=I?g(I):"rdf:Description",Q="";return D.termType==="BlankNode"?(!L.incoming[D]||L.incoming[D].length!==1)&&(Q=' rdf:nodeID="'+D.toNT().slice(2)+'"'):Q=' rdf:about="'+p(D)+'"',["<"+oe+Q+">"].concat([A]).concat(["</"+oe+">"])}var m=_.bind(this);function y(D,L){for(var A=[],I=0;I<D.elements.length;I++)A.push(m(D.elements[I],L));return A}function O(D,L){var A=[],I=L.subjects[this.toStr(D)];if(!I)return A;I.sort();for(var x=0;x<I.length;x++){var j=I[x];switch(j.object.termType){case"BlankNode":L.rootsHash[j.object.toNT()]?A=A.concat(["<"+g(j.predicate)+' rdf:nodeID="'+j.object.toNT().slice(2)+'">',"</"+g(j.predicate)+">"]):A=A.concat(["<"+g(j.predicate)+' rdf:parseType="Resource">',T(j.object,L),"</"+g(j.predicate)+">"]);break;case"NamedNode":A=A.concat(["<"+g(j.predicate)+' rdf:resource="'+p(j.object)+'"/>']);break;case"Literal":A=A.concat(["<"+g(j.predicate)+(j.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+d(j.object.datatype.value)+'"')+(j.object.language?' xml:lang="'+j.object.language+'"':"")+">"+d(j.object.value)+"</"+g(j.predicate)+">"]);break;case"Collection":A=A.concat(["<"+g(j.predicate)+' rdf:parseType="Collection">',y(j.object,L),"</"+g(j.predicate)+">"]);break;default:throw new Error("Can't serialize object of type "+j.object.termType+" into XML")}}return A}var T=O.bind(this);function N(D){var L=D.uri,A=L.indexOf("#");if(A<0&&this.flags.indexOf("/")<0&&(A=L.lastIndexOf("/")),A<0)throw new Error("Cannot make qname out of <"+L+">");for(var I=A+1;I<L.length;I++)if(this._notNameChars.indexOf(L[I])>=0)throw new Error('Invalid character "'+L[I]+'" cannot be in XML qname for URI: '+L);var x=L.slice(A+1),j=L.slice(0,A+1);if(this.defaultNamespace&&this.defaultNamespace===j&&this.flags.indexOf("d")<0)return x;var re=this.prefixes[j];return re||(re=this.makeUpPrefix(j)),s[j]=!0,re+":"+x}var g=N.bind(this),k=h(t),w="<rdf:RDF";this.defaultNamespace&&(w+=' xmlns="'+d(this.defaultNamespace)+'"');for(var R in s)if(s.hasOwnProperty(R)){var S=this.base&&this.flags.includes("z")?js(this.base,R):R;w+=`
 xmlns:`+this.prefixes[R]+'="'+d(S)+'"'}w+=">";var B=[w,k,"</rdf:RDF>"];return u(B,-1)}},{key:"statementsToJsonld",value:function(t){var n=this.statementsToN3(t),r=k2.parse(n);return JSON.stringify(r,null,2)}}])}();function C2(i){return encodeURI(i)}function T2(i){for(var e="",t,n=0;n<i.length;n++)t=i.charCodeAt(n),t>65535?e+="\\U"+("00000000"+t.toString(16)).slice(-8):t>126?e+="\\u"+("0000"+t.toString(16)).slice(-4):e+=i[n];return e}function sa(i,e,t,n,r,s){t=t||(i==null?void 0:i.value);var a=s||{};n=n||ri;var l=void 0;try{var o=D2(e);a.flags&&o.setFlags(a.flags);var u=e.statementsMatching(void 0,void 0,void 0,i);switch("namespaces"in e&&o.suggestNamespaces(e.namespaces),a.namespaces&&o.setNamespaces(a.namespaces),o.setBase(t),n){case ta:return l=o.statementsToXML(u),f(null,l);case sp:case yg:return l=o.statementsToN3(u),f(null,l);case ri:case Ag:return o.setFlags("si"),l=o.statementsToN3(u),f(null,l);case Eg:return o.setFlags("deinprstux"),l=o.statementsToNTriples(u),f(null,l);case dl:return o.setFlags("si dr"),l=o.statementsToJsonld(u),f(null,l);case pl:case hl:return o.setFlags("deinprstux q"),l=o.statementsToNTriples(u),f(null,l);default:throw new Error("Serialize: Content-type "+n+" not supported for data write.")}}catch(h){if(r)return r(h,void 0);throw h}function f(h,d){if(r){r(h,d);return}else return d}}var N2=["blankNode","defaultGraph","literal","namedNode","quad","variable","supports"],Oa={first:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",rest:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",nil:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};function Yp(i,e,t){var n=[];return t.reduce(function(r,s,a,l){n.push(i.quad(r,i.namedNode(Oa.first),l[a]));var o;return a<l.length-1?(o=i.blankNode(),n.push(i.quad(r,i.namedNode(Oa.rest),o))):n.push(i.quad(r,i.namedNode(Oa.rest),i.namedNode(Oa.nil))),o},e),n}function qr(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=i.length;for(t<0&&(t=n+t);t<n;t++)if(i[t]===e)return t;return-1}function S2(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=I2(i))||e){t&&(i=t);var n=0,r=function(){};return{s:r,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(u){throw u},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){t=t.call(i)},n:function(){var u=t.next();return s=u.done,u},e:function(u){a=!0,l=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(a)throw l}}}}function I2(i,e){if(i){if(typeof i=="string")return Hu(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Hu(i,e)}}function Hu(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function P2(i,e,t){return e=sr(e),Tn(i,Jp()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function Jp(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jp=function(){return!!i})()}var Kp=function(i){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};Jt(this,e),t=P2(this,e,[""]),t.statements=n,t.constraints=r,t.initBindings=s,t.optional=a,qe(t,"termType",fa),qe(t,"classOrder",on.Graph),qe(t,"fetcher",void 0),qe(t,"isVar",0),qe(t,"ns",wr),qe(t,"rdfFactory",void 0),t.rdfFactory=l&&l.rdfFactory||Hr;var o=S2(N2),u;try{var f=function(){var d=u.value;t[d]=function(){var c;return(c=t.rdfFactory)[d].apply(c,arguments)}};for(o.s();!(u=o.n()).done;)f()}catch(h){o.e(h)}finally{o.f()}return t}return Er(e,i),Yt(e,[{key:"add",value:function(n,r,s,a){var l=this;return arguments.length===1&&n.forEach(function(o){return l.add(o.subject,o.predicate,o.object,o.graph)}),this.statements.push(this.rdfFactory.quad(n,r,s,a))}},{key:"addStatement",value:function(n){return this.add(n)}},{key:"bnode",value:function(n){return this.rdfFactory.blankNode(n)}},{key:"addAll",value:function(n){var r=this;n.forEach(function(s){r.add(s.subject,s.predicate,s.object,s.graph)})}},{key:"any",value:function(n,r,s,a){var l=this.anyStatementMatching(n,r,s,a);return l==null?null:n==null?l.subject:r==null?l.predicate:s==null?l.object:null}},{key:"anyValue",value:function(n,r,s,a){var l=this.any(n,r,s,a);return l?l.value:void 0}},{key:"anyJS",value:function(n,r,s,a){var l=this.any(n,r,s,a);return l?qt.toJS(l):void 0}},{key:"anyStatementMatching",value:function(n,r,s,a){var l=this.statementsMatching(n,r,s,a,!0);if(!(!l||l.length===0))return l[0]}},{key:"id",value:function(n){return this.rdfFactory.id(n)}},{key:"statementsMatching",value:function(n,r,s,a,l){var o=this.statements.filter(function(u){return(!n||n.equals(u.subject))&&(!r||r.equals(u.predicate))&&(!s||s.equals(u.object))&&(!a||a.equals(u.graph))});return l?o.length===0?[]:[o[0]]:o}},{key:"bottomTypeURIs",value:function(n){var r,s,a,l,o,u,f,h;r=[];for(var d in n)if(n.hasOwnProperty(d)){for(h=n[d],f=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),this.rdfFactory.namedNode(d)),s=!0,l=0,o=f.length;l<o;l++)if(a=f[l],u=a.uri,u in n){s=!1;break}s&&(r[d]=h)}return r}},{key:"collection",value:function(){return new qn}},{key:"each",value:function(n,r,s,a){var l=[],o=this.statementsMatching(n,r,s,a,!1);if(n==null)for(var u=0,f=o.length;u<f;u++)l.push(o[u].subject);else if(r==null)for(var h=0,d=o.length;h<d;h++)l.push(o[h].predicate);else if(s==null)for(var c=0,p=o.length;c<p;c++)l.push(o[c].object);else if(a==null)for(var _=0,m=o.length;_<m;_++)l.push(new dr(o[_].graph.value));return l}},{key:"equals",value:function(n){return n?this.hashString()===n.hashString():!1}},{key:"findMembersNT",value:function(n){var r,s,a,l,o,u,f,h,d,c,p,_,m,y;_={},_[n.toNT()]=!0,l={},u=this.transitiveClosure(_,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0);for(var O in u)if(u.hasOwnProperty(O)){f=this.statementsMatching(void 0,this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.fromNT(O));for(var T=0,N=f.length;T<N;T++)m=f[T],l[m.subject.toNT()]=m;h=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"),this.fromNT(O));for(var g=0,k=h.length;g<k;g++)for(o=h[g],d=this.statementsMatching(void 0,o),a=0,r=d.length;a<r;a++)m=d[a],l[m.subject.toNT()]=m;c=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"),this.fromNT(O));for(var w=0,R=c.length;w<R;w++)for(o=c[w],p=this.statementsMatching(void 0,o),y=0,s=p.length;y<s;y++)m=p[y],l[m.object.toNT()]=m}return l}},{key:"findMemberURIs",value:function(n){return this.NTtoURI(this.findMembersNT(n))}},{key:"findSubClassesNT",value:function(n){var r={};return r[n.toNT()]=!0,this.transitiveClosure(r,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0)}},{key:"findSuperClassesNT",value:function(n){var r={};return r[n.toNT()]=!0,this.transitiveClosure(r,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}},{key:"findTypesNT",value:function(n){var r,s,a,l,o,u,f,h,d;a="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",d=[],l=this.statementsMatching(n,void 0,void 0);for(var c=0,p=l.length;c<p;c++)if(h=l[c],h.predicate.uri===a)d[h.object.toNT()]=h;else{o=this.each(h.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"));for(var _=0,m=o.length;_<m;_++)s=o[_],d[s.toNT()]=h}u=this.statementsMatching(void 0,void 0,n);for(var y=0,O=u.length;y<O;y++){h=u[y],f=this.each(h.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"));for(var T=0,N=f.length;T<N;T++)r=f[T],d[r.toNT()]=h}return this.transitiveClosure(d,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}},{key:"findTypeURIs",value:function(n){return this.NTtoURI(this.findTypesNT(n))}},{key:"connectedStatements",value:function(n,r,s){s=s||[];for(var a=[n],l={},o={},u=[],f=this,h=function(c){var p=function(y){y.termType==="BlankNode"&&!l[y.value]&&(l[y.value]=!0,a.push(y))},_=f.statementsMatching(null,null,c,r).concat(f.statementsMatching(c,null,null,r));_=_.filter(function(m){if(s[m.predicate.value])return!1;var y=m.toNT();return o[y]?!1:(o[y]=!0,!0)}),_.forEach(function(m){p(m.subject),p(m.object)}),u=u.concat(_)};a.length;)h(a.shift());return u}},{key:"formula",value:function(n){return new e}},{key:"fromNT",value:function(n){var r,s,a;switch(n[0]){case"<":return this.sym(n.slice(1,-1));case'"':if(a=void 0,r=void 0,s=n.lastIndexOf('"'),s<n.length-1)if(n[s+1]==="@")a=n.slice(s+2);else if(n.slice(s+1,s+3)==="^^")r=this.fromNT(n.slice(s+3));else throw new Error("Can't convert string from NT: "+n);return n=n.slice(1,s),n=n.replace(/\\"/g,'"'),n=n.replace(/\\n/g,`
`),n=n.replace(/\\\\/g,"\\"),this.rdfFactory.literal(n,a||r);case"_":return this.rdfFactory.blankNode(n.slice(2));case"?":return new li(n.slice(1))}throw new Error("Can't convert from NT: "+n)}},{key:"holds",value:function(n,r,s,a){var l;if(arguments.length===1){if(!n)return!0;if(n instanceof Array){for(l=0;l<n.length;l++)if(!this.holds(n[l]))return!1;return!0}else{if(Tg(n))return this.holds(n.subject,n.predicate,n.object,n.graph);if(n.statements)return this.holds(n.statements)}}var o=this.anyStatementMatching(n,r,s,a);return o!=null}},{key:"holdsStatement",value:function(n){return this.holds(n.subject,n.predicate,n.object,n.graph)}},{key:"list",value:function(n,r){if(r.rdfFactory.supports.COLLECTIONS){var s=r.rdfFactory.collection();return n.forEach(function(o){s.append(o)}),s}else{var a=r.rdfFactory.blankNode(),l=Yp(r.rdfFactory,a,n);return r.addAll(l),a}}},{key:"NTtoURI",value:function(n){var r,s,a={};for(r in n)n.hasOwnProperty(r)&&(s=n[r],r[0]==="<"&&(a[r.slice(1,-1)]=s));return a}},{key:"serialize",value:function(n,r,s,a){return sa(s,this,n,r,void 0,a)}},{key:"substitute",value:function(n){var r=this.statements.map(function(a){return a.substitute(n)}),s=new e;return s.addAll(r),s}},{key:"sym",value:function(n,r){if(r)throw new Error("This feature (kb.sym with 2 args) is removed. Do not assume prefix mappings.");return this.rdfFactory.namedNode(n)}},{key:"the",value:function(n,r,s,a){var l=this.any(n,r,s,a);return l}},{key:"transitiveClosure",value:function(n,r,s){var a,l,o,u,f,h,d={};Object.assign(d,n);for(var c={};;){if(h=function(){for(var p in d)if(d.hasOwnProperty(p))return p}(),h==null)return c;for(f=s?this.each(void 0,r,this.fromNT(h)):this.each(this.fromNT(h),r),l=0,o=f.length;l<o;l++)a=f[l],u=a.toNT(),!(u in c)&&(u in d||(d[u]=d[h]));c[h]=d[h],delete d[h]}}},{key:"topTypeURIs",value:function(n){var r,s,a,l,o,u,f,h;f=[];for(a in n)if(n.hasOwnProperty(a)){for(h=n[a],o=0,u=this.each(this.rdfFactory.namedNode(a),this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf")),r=0,l=u.length;r<l;r++)if(s=u[r],s.uri!=="http://www.w3.org/2000/01/rdf-schema#Resource"){o++;break}o||(f[a]=h)}return f["http://www.w3.org/2000/01/rdf-schema#Resource"]&&delete f["http://www.w3.org/2000/01/rdf-schema#Resource"],f["http://www.w3.org/2002/07/owl#Thing"]&&delete f["http://www.w3.org/2002/07/owl#Thing"],f}},{key:"toString",value:function(){return"{"+this.statements.join(`
`)+"}"}},{key:"variable",value:function(n){return new li(n)}},{key:"whether",value:function(n,r,s,a){return this.statementsMatching(n,r,s,a,!1).length}}])}(qt);qt.fromValue=dp;var vi={xsd:wr("http://www.w3.org/2001/XMLSchema#")};qt.toJS=function(i){return Ul(i)?i.elements.map(qt.toJS):op(i)?i.datatype.equals(vi.xsd("boolean"))?i.value==="1"||i.value==="true":i.datatype.equals(vi.xsd("dateTime"))||i.datatype.equals(vi.xsd("date"))?new Date(i.value):i.datatype.equals(vi.xsd("integer"))||i.datatype.equals(vi.xsd("float"))||i.datatype.equals(vi.xsd("decimal"))?Number(i.value):i.value:i};var R2=Yt(function i(e,t){Jt(this,i),this.pat=new _a,this.vars=[],this.name=e,this.id=t});function xu(i,e,t,n){function r(g){var k="",w;for(w in g)g.hasOwnProperty(w)&&(k+="    "+w+" -> "+g[w]);return k}function s(g){var k="Bindings: ",w,R=g.length;for(w=0;w<R;w++)k+=r(g[w][0])+`;
	`;return k}function a(g,k,w,R){var S=w[g];if(S===void 0){if(g.isVar){var B=[];return B[g]=k,[[B,null]]}S=g}if(!S.complexType)return R.redirections[S]&&(S=R.redirections[S]),R.redirections[k]&&(k=R.redirections[k]),S.equals(k)||S.uri&&S.uri===ra?[[[],null]]:[];if(g instanceof Array)return k instanceof Array?l(g,k,w):[];throw new Error("query.js: oops - code not written yet")}function l(g,k,w,R){var S;if(g.length!==k.length)return[];if(!g.length)return[[[],null]];var B=a(g[0],k[0],w,R);if(B.length===0)return B;var D=[],L,A=B.length,I,x,j,re,Z,$;for(L=0;L<A;L++){I=B[L][0],$=[];for(re in I)I.hasOwnProperty(re)&&($[re]=I[re]);for(re in w)w.hasOwnProperty(re)&&($[re]=w[re]);for(S=l(g.slice(1),k.slice(1),$,R),j=S.length,x=0;x<j;x++){Z=S[x][0];for(re in I)I.hasOwnProperty(re)&&(Z[re]=I[re]);D.push([Z,null])}}return D}function o(g,k){var w=k[g];return w===void 0?g:w}function u(g,k){var w={},R;for(R in g)g.hasOwnProperty(R)&&(w[R]=g[R]);for(R in k)k.hasOwnProperty(R)&&(w[R]=k[R]);return w}function f(g,k){return this.trunkBindings=k,this.originalCallback=g,this.branches=[],this}f.prototype.checkAllDone=function(){var g;for(g=0;g<this.branches.length;g++)if(!this.branches[g].done)return;this.doCallBacks(this.branches.length-1,this.trunkBindings)},f.prototype.doCallBacks=function(g,k){var w;if(g<0)return this.originalCallback(k);for(w=0;w<this.branches[g].results.length;w++)this.doCallBacks(g-1,u(k,this.branches[g].results[w]))};function h(g,k){return this.count=0,this.success=!1,this.done=!1,this.callback=g,this.onDone=k,this}h.prototype.reportMatch=function(g){this.callback(g),this.success=!0},h.prototype.reportDone=function(){this.done=!0,this.onDone!==void 0&&this.onDone()};var d=function(k){return this.count=0,this.done=!1,this.results=[],this.junction=k,k.branches.push(this),this};d.prototype.reportMatch=function(g){this.results.push(g)},d.prototype.reportDone=function(){rn.debug("Optional branch finished - results.length = "+this.results.length),this.results.length===0&&this.results.push({}),this.done=!0,this.junction.checkAllDone()};function c(g,k,w){var R,S,B,D;for(k.nvars=0,k.index=null,R=[k.subject,k.predicate,k.object,k.why],D=[g.subjectIndex,g.predicateIndex,g.objectIndex,g.whyIndex],B=0;B<4;B++){var L=R[B];if(!(L.uri&&L.uri===ra))if(L.isVar&&w[L]===void 0)k.nvars++;else{if(L=o(R[B],w),g.redirections[g.id(L)]&&(L=g.redirections[g.id(L)]),S=D[B][g.id(L)],!S)return k.index=[],!1;(k.index===null||k.index.length>S.length)&&(k.index=S)}}return k.index===null&&(k.index=g.statements),!0}function p(g,k){return g.nvars!==k.nvars?g.nvars-k.nvars:g.index.length-k.index.length}var _=0,m=function g(k,w,R,S,B,D,L){rn.debug("Match begins, Branch count now: "+L.count+" for "+L.pattern_debug);var A=w.statements;if(A.length===0){if(rn.debug("FOUND MATCH WITH BINDINGS:"+r(R)),w.optional.length===0)L.reportMatch(R);else{rn.debug("OPTIONAL: "+w.optional);var I=new f(e,R),x=[],j;for(j=0;j<w.optional.length;j++)x[j]=new d(I),x[j].pattern_debug=w.optional[j];for(j=0;j<w.optional.length;j++)x[j].count=x[j].count+1,g(k,w.optional[j],R,"",B,e,x[j])}L.count--,rn.debug("Match ends -- success , Branch count now: "+L.count+" for "+L.pattern_debug);return}var re,Z,$=A.length;if(B){var G="match"+_++,X=function(Q,le){var Ve=Q.uri.split("#")[0];B.nowOrWhenFetched(Ve,void 0,function(ze,ke,Ie){ze||console.log("Error following link to <"+Q.uri+"> in query: "+ke),g(k,w,R,S,B,D,L)})};for(Z=0;Z<$;Z++){if(re=A[Z],R[re.subject]!==void 0&&R[re.subject].uri&&B&&B.getState(Ei(R[re.subject].uri))==="unrequested"){X(R[re.subject],G);return}if(R[re.object]!==void 0&&R[re.object].uri&&B&&B.getState(Ei(R[re.object].uri))==="unrequested"){X(R[re.object],G);return}}}O(k,w,R,S,B,D,L)},y=function(k,w){var R=!0,S,B;for(S in k)k.hasOwnProperty(S)&&w[S]&&(B=w[S].test,B&&!B(k[S])&&(R=!1));return R},O=function(k,w,R,S,B,D,L){var A=w.statements,I=A.length,x,j,re,Z,$,G,X;for(x=0;x<I;x++)X=A[x],c(k,X,R);A.sort(p),X=A[0];var oe=k.formula();oe.optional=w.optional,oe.constraints=w.constraints,oe.statements=A.slice(1),rn.debug(S+"match2 searching "+X.index.length+" for "+X+"; bindings so far="+r(R));var Q,le=X.index.length,Ve,ze;for(Q=0;Q<le;Q++)for(ze=X.index[Q],Ve=l([X.subject,X.predicate,X.object,X.why],[ze.subject,ze.predicate,ze.object,ze.why],R,k),rn.info(S+" From first: "+Ve.length+": "+s(Ve)),re=Ve.length,j=0;j<re;j++)if($=[],G=Ve[j][0],!y(G,w.constraints))rn.debug("Branch count CS: "+L.count);else{for(Z in G)G.hasOwnProperty(Z)&&($[Z]=G[Z]);for(Z in R)R.hasOwnProperty(Z)&&($[Z]=R[Z]);L.count++,m(k,oe,$,S+"  ",B,D,L)}L.count--,rn.debug("Match2 ends, Branch count: "+L.count+" for "+L.pattern_debug),L.count===0&&L.reportDone()},T=this;rn.debug("Query on "+this.statements.length);var N=new h(e,n);N.count++,i.sync?m(T,i.pat,i.pat.initBindings,"",t,e,N):setTimeout(function(){m(T,i.pat,i.pat.initBindings,"",t,e,N)},0)}function Xu(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function Gi(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Xu(Object(t),!0).forEach(function(n){qe(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Xu(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function F2(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=O2(i))||e){t&&(i=t);var n=0,r=function(){};return{s:r,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(u){throw u},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){t=t.call(i)},n:function(){var u=t.next();return s=u.done,u},e:function(u){a=!0,l=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(a)throw l}}}}function O2(i,e){if(i){if(typeof i=="string")return Gu(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Gu(i,e)}}function Gu(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function B2(i,e,t){return e=sr(e),Tn(i,Zp()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function Zp(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zp=function(){return!!i})()}var Vs="http://www.w3.org/2002/07/owl#";function L2(i,e,t,n){var r=i.any(e,t,void 0);return r?(i.equate(r,n),!0):!1}function U2(i,e,t,n){var r=i.any(void 0,t,n);return r?(i.equate(r,e),!0):!1}function e_(i,e,t,n,r){i.typeCallback&&i.typeCallback(i,n,r);var s=i.classActions[i.id(n)],a=!1;if(s)for(var l=0;l<s.length;l++)a=a||s[l](i,e,t,n,r);return a}var _a=function(i){function e(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Jt(this,e),n=B2(this,e,[void 0,void 0,void 0,void 0,r]),qe(n,"updater",void 0),qe(n,"namespaces",void 0),qe(n,"classActions",void 0),qe(n,"propertyActions",void 0),qe(n,"redirections",void 0),qe(n,"aliases",void 0),qe(n,"HTTPRedirects",void 0),qe(n,"subjectIndex",void 0),qe(n,"predicateIndex",void 0),qe(n,"objectIndex",void 0),qe(n,"whyIndex",void 0),qe(n,"index",void 0),qe(n,"features",void 0),qe(n,"_universalVariables",void 0),qe(n,"_existentialVariables",void 0),qe(n,"rdfArrayRemove",void 0),qe(n,"dataCallbacks",void 0),n.propertyActions={},n.classActions={},n.redirections=[],n.aliases=[],n.HTTPRedirects=[],n.subjectIndex=[],n.predicateIndex=[],n.objectIndex=[],n.whyIndex=[],n.index=[n.subjectIndex,n.predicateIndex,n.objectIndex,n.whyIndex],n.namespaces={},n.features=t||[],n.rdfArrayRemove=r.rdfArrayRemove||w2,r.dataCallback&&(n.dataCallbacks=[r.dataCallback]),n.initPropertyActions(n.features),n}return Er(e,i),Yt(e,[{key:"substitute",value:function(n){var r=this.statements.map(function(a){return a.substitute(n)}),s=new e;return s.add(r),s}},{key:"addDataCallback",value:function(n){this.dataCallbacks||(this.dataCallbacks=[]),this.dataCallbacks.push(n)}},{key:"applyPatch",value:function(n,r,s){var a=this,l,o=null;function u(d){if(n.delete){l=n.delete,o&&(l=l.substitute(o)),l=l.statements;var c=[],p=l.map(function(_){var m=a.statementsMatching(_.subject,_.predicate,_.object,r);return m.length===0?(c.push(_),null):m[0]});if(c.length)return s("Could not find to delete: "+c.join(`
 or `));p.map(function(_){a.remove(_)})}n.insert&&(l=n.insert,o&&(l=l.substitute(o)),l=l.statements,l.map(function(_){_.graph=r,a.add(_.subject,_.predicate,_.object,_.graph)})),d()}if(n.where){var f=new R2("patch");f.pat=n.where,f.pat.statements.map(function(d){d.graph=g_(r.value)}),f.sync=!0;var h=[];a.query(f,function(c){h.push(c)},a.fetcher,function(){if(h.length===0)return s("No match found to be patched:"+n.where);if(h.length>1)return s("Patch ambiguous. No patch done.");o=h[0],u(s)})}else u(s)}},{key:"declareExistential",value:function(n){return this._existentialVariables||(this._existentialVariables=[]),this._existentialVariables.push(n),n}},{key:"initPropertyActions",value:function(n){this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"))]=[e_],qr(n,"sameAs")>=0&&(this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode("".concat(Vs,"sameAs")))]=[function(r,s,a,l,o){return r.equate(s,l),!0}]),qr(n,"InverseFunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode("".concat(Vs,"InverseFunctionalProperty")))]=[function(r,s,a,l,o){return r.newPropertyAction(s,U2)}]),qr(n,"FunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode("".concat(Vs,"FunctionalProperty")))]=[function(r,s,a,l,o){return r.newPropertyAction(s,L2)}])}},{key:"addStatement",value:function(n){return this.add(n.subject,n.predicate,n.object,n.graph),this.statements.length}},{key:"add",value:function(n,r,s,a){var l;if(arguments.length===1){if(n instanceof Array)for(l=0;l<n.length;l++)this.add(n[l]);else wi(n)?this.add(n.subject,n.predicate,n.object,n.graph):bu(n)&&this.add(n.statements);return this}var o,u;a||(a=this.fetcher?this.fetcher.appNode:this.rdfFactory.defaultGraph()),typeof n=="string"&&(n=this.rdfFactory.namedNode(n)),r=qt.fromValue(r);var f=qt.fromValue(s);if(a=qt.fromValue(a),!Sg(n))throw new Error("Subject is not a subject type");if(!Ig(r))throw new Error("Predicate ".concat(r," is not a predicate type"));if(!Ng(f))throw new Error("Object ".concat(f," is not an object type"));if(!Rg(a))throw new Error("Why is not a graph type");this.predicateCallback&&this.predicateCallback(this,r,a);var h=this.id(this.canon(r));o=this.propertyActions[h];var d=!1;if(o)for(l=0;l<o.length;l++)d=d||o[l](this,n,r,f,a);if(this.holds(n,r,f,a))return null;var c=[this.id(this.canon(n)),h,this.id(this.canon(f)),this.id(this.canon(a))];for(u=this.rdfFactory.quad(n,r,f,a),l=0;l<4;l++){var p=this.index[l],_=c[l];p[_]||(p[_]=[]),p[_].push(u)}if(this.statements.push(u),this.dataCallbacks){var m=F2(this.dataCallbacks),y;try{for(m.s();!(y=m.n()).done;){var O=y.value;O(u)}}catch(T){m.e(T)}finally{m.f()}}return u}},{key:"canon",value:function(n){if(!n)return n;var r=this.redirections[this.id(n)];if(r)return r;switch(n.termType){case fi:return new un(n.value);case Hn:return n;case si:return new jl;case ap:return n;case fa:return n;case Ri:return new an(n.value,n.language,n.datatype);case ui:return new dr(n.value);case zn:return new li(n.value);default:throw new Error("Term Type not recognized for canonization: ".concat(n.termType))}}},{key:"check",value:function(){this.checkStatementList(this.statements);for(var n=0;n<4;n++){var r=this.index[n];for(var s in r)r.hasOwnProperty(s)&&this.checkStatementList(r[s],n)}}},{key:"checkStatementList",value:function(n,r){r===void 0&&(r=0);for(var s=["subject","predicate","object","why"],a=" found in "+s[r]+" index.",l,o=0;o<n.length;o++){l=n[o];for(var u=[l.subject,l.predicate,l.object,l.graph],f=function(_,m){for(var y=0;y<_.length;y++)if(_[y].subject.equals(m.subject)&&_[y].predicate.equals(m.predicate)&&_[y].object.equals(m.object)&&_[y].why.equals(m.graph))return!0},h=0;h<4;h++){var d=this.canon(u[h]),c=this.id(d);this.index[h][c]&&f(this.index[h][c],l)}if(!f(this.statements,l))throw new Error("Statement list does not statement "+l+"@"+l.graph+a)}}},{key:"close",value:function(){return this}},{key:"compareTerms",value:function(n,r){return Object.prototype.hasOwnProperty.call(n,"compareTerm")?n.compareTerm(r):on[n.termType]<on[r.termType]?-1:on[n.termType]>on[r.termType]?1:n.value<r.value?-1:n.value>r.value?1:0}},{key:"copyTo",value:function(n,r,s){s||(s=[]);var a=this.statementsMatching(n);qr(s,"two-direction")!==-1&&a.concat(this.statementsMatching(void 0,void 0,n));for(var l=0;l<a.length;l++){var o=a[l];switch(o.object.termType){case"NamedNode":this.add(r,o.predicate,o.object);break;case"Literal":case"BlankNode":case"Collection":this.add(r,o.predicate,o.object.copy(this))}qr(s,"delete")!==-1&&this.remove(o)}}},{key:"equate",value:function(n,r){var s=this.canon(n),a=this.canon(r),l=this.compareTerms(s,a);return l?l<0?this.replaceWith(a,s):this.replaceWith(s,a):!0}},{key:"formula",value:function(n){return new e(n)}},{key:"length",get:function(){return this.statements.length}},{key:"match",value:function(n,r,s,a){return this.statementsMatching(qt.fromValue(n),qt.fromValue(r),qt.fromValue(s),qt.fromValue(a))}},{key:"mentionsURI",value:function(n){var r="<"+n+">";return!!this.subjectIndex[r]||!!this.objectIndex[r]||!!this.predicateIndex[r]}},{key:"newExistential",value:function(n){if(!n)return this.bnode();var r=this.sym(n);return this.declareExistential(r)}},{key:"newPropertyAction",value:function(n,r){var s=this.id(n);this.propertyActions[s]||(this.propertyActions[s]=[]),this.propertyActions[s].push(r);for(var a=this.statementsMatching(void 0,n,void 0),l=!1,o=0;o<a.length;o++)l=l||r(this,a[o].subject,n,a[o].object);return l}},{key:"newUniversal",value:function(n){var r=this.sym(n);return this._universalVariables||(this._universalVariables=[]),this._universalVariables.push(r),r}},{key:"variable",value:function(n){return new li(n)}},{key:"nextSymbol",value:function(n){for(var r=0;;r++){var s=n.value+"#n"+r;if(!this.mentionsURI(s))return this.sym(s)}}},{key:"query",value:function(n,r,s,a){return xu.call(this,n,r,s,a)}},{key:"querySync",value:function(n){var r=[];function s(o){r.push(o)}function a(){l=!0}var l=!1;if(n.sync=!0,xu.call(this,n,s,null,a),!l)throw new Error("Sync query should have called done function");return r}},{key:"remove",value:function(n){if(n instanceof Array){for(var r=0;r<n.length;r++)this.remove(n[r]);return this}if(bu(n))return this.remove(n.statements);var s=this.statementsMatching(n.subject,n.predicate,n.object,n.graph);if(!s.length)throw new Error("Statement to be removed is not on store: "+n);return this.removeStatement(s[0]),this}},{key:"removeDocument",value:function(n){this.removeMetadata(n);for(var r=this.statementsMatching(void 0,void 0,void 0,n).slice(),s=0;s<r.length;s++)this.removeStatement(r[s]);return this.removeMatches(n,null,null),this}},{key:"removeMetadata",value:function(n){for(var r=this.sym("chrome://TheCurrentSession"),s="http://www.w3.org/2007/ont/link#",a=this.statementsMatching(void 0,this.sym("".concat(s,"requestedURI")),this.rdfFactory.literal(n.value),r).map(function(c){return c.subject}),l=0;l<a.length;l++){var o=a[l];if(o!=null){var u=void 0,f=this.any(o,this.sym("".concat(s,"status")),null,r);if(f!=null){u=this.statementsMatching(f,this.sym("".concat(s,"status")),null,r).slice();for(var h=0;h<u.length;h++)this.removeStatement(u[h])}var d=this.any(o,this.sym("".concat(s,"response")),null,r);if(d!=null){u=this.statementsMatching(d,null,null,r).slice();for(var h=0;h<u.length;h++)this.removeStatement(u[h])}u=this.statementsMatching(o,null,null,r).slice();for(var h=0;h<u.length;h++)this.removeStatement(u[h])}}return this.removeMatches(this.sym(n.value),null,null,r),this}},{key:"removeMany",value:function(n,r,s,a,l){for(var o=this.statementsMatching(n,r,s,a,!1),u=[],f=0;f<o.length;f++)u.push(o[f]);for(l&&(u=u.slice(0,l)),f=0;f<u.length;f++)this.remove(u[f])}},{key:"removeMatches",value:function(n,r,s,a){return this.removeMany(n,r,s,a),this}},{key:"removeStatement",value:function(n){for(var r=[n.subject,n.predicate,n.object,n.graph],s=0;s<4;s++){var a=this.canon(r[s]),l=this.id(a);this.index[s][l]&&this.rdfArrayRemove(this.index[s][l],n)}return this.rdfArrayRemove(this.statements,n),this}},{key:"removeStatements",value:function(n){for(var r=0;r<n.length;r++)this.remove(n[r]);return this}},{key:"replaceWith",value:function(n,r){for(var s=this.id(n),a=this.id(r),l=function(f){var h=f[s];if(h){var d=f[a];d?f[a]=h.concat(d):f[a]=h,delete f[s]}},o=0;o<4;o++)l(this.index[o]);if(this.redirections[s]=r,n.value){if(this.aliases[a]||(this.aliases[a]=[]),this.aliases[a].push(n),this.aliases[s])for(o=0;o<this.aliases[s].length;o++)this.redirections[this.id(this.aliases[s][o])]=r,this.aliases[a].push(this.aliases[s][o]);this.add(r,this.sym("http://www.w3.org/2007/ont/link#uri"),n),this.fetcher&&this.fetcher.nowKnownAs(n,r)}return l(this.classActions),l(this.propertyActions),!0}},{key:"allAliases",value:function(n){var r=this.aliases[this.id(this.canon(n))]||[];return r.push(this.canon(n)),r}},{key:"sameThings",value:function(n,r){if(n.equals(r))return!0;var s=this.canon(n);if(!s)return!1;var a=this.canon(r);return a?s.value===a.value:!1}},{key:"setPrefixForURI",value:function(n,r){if(!(n==="tab"&&this.namespaces.tab)&&!(n.slice(0,2)==="ns"||n.slice(0,7)==="default")){for(var s in this.namespaces)this.namespaces[s]==r&&delete this.namespaces[s];this.namespaces[n]=r}}},{key:"statementsMatching",value:function(n,r,s,a,l){var o=[n,r,s,a],u=[],f=[],h=[],d,c;for(d=0;d<4;d++)u[d]=this.canon(qt.fromValue(o[d])),u[d]&&(h.push(d),f[d]=this.id(u[d]));if(h.length===0)return this.statements;if(h.length===1)return d=h[0],c=this.index[d][f[d]],c&&l&&c.length>1&&(c=c.slice(0,1)),c=c||[],c;var p=1e10,_,m;for(m=0;m<h.length;m++){if(d=h[m],c=this.index[d][f[d]],!c)return[];c.length<p&&(p=c.length,_=m)}for(var y=h[_],O=this.index[y][f[y]],T=h.slice(0,_).concat(h.slice(_+1)),N=[],g=["subject","predicate","object","why"],k=0;k<O.length;k++){var w=O[k];for(m=0;m<T.length;m++)if(d=T[m],!this.canon(w[g[d]]).equals(u[d])){w=null;break}if(w!=null&&(N.push(w),l))break}return N}},{key:"uris",value:function(n){var r=this.canon(n),s=this.aliases[this.id(r)];if(!r.value)return[];var a=[r.value];if(s)for(var l=0;l<s.length;l++)a.push(s[l].uri);return a}},{key:"serialize",value:function(n,r,s,a){var l,o=(l=a)!==null&&l!==void 0&&l.namespaces?Gi(Gi({},this.namespaces),a.namespaces):Gi({},this.namespaces);return a=Gi(Gi({},a||{}),{},{namespaces:o}),sa(s,this,n,r,void 0,a)}}],[{key:"defaultGraphURI",get:function(){return ra}}])}(Kp);qe(_a,"handleRDFType",void 0);_a.handleRDFType=e_;function ea(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=j2(i))||e){t&&(i=t);var n=0,r=function(){};return{s:r,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(u){throw u},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){t=t.call(i)},n:function(){var u=t.next();return s=u.done,u},e:function(u){a=!0,l=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(a)throw l}}}}function j2(i,e){if(i){if(typeof i=="string")return $u(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $u(i,e)}}function $u(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}var ei=wr("http://www.w3.org/1999/02/22-rdf-syntax-ns#");function q2(i,e,t,n){var r=ea(i.statementsMatching(t,null,null,n)),s;try{for(r.s();!(s=r.n()).done;){var a=s.value,l=new ni(e,a.predicate,a.object,n);i.remove(a),i.add(l)}}catch(p){r.e(p)}finally{r.f()}var o=ea(i.statementsMatching(null,t,null,n)),u;try{for(o.s();!(u=o.n()).done;){var f=u.value;i.remove(f),i.add(new ni(f.subject,e,f.object,n))}}catch(p){o.e(p)}finally{o.f()}var h=ea(i.statementsMatching(null,null,t,n)),d;try{for(h.s();!(d=h.n()).done;){var c=d.value;i.remove(c),i.add(new ni(c.subject,c.predicate,e,n))}}catch(p){h.e(p)}finally{h.f()}}function M2(i,e){var t=ei("nil"),n=ea(i.statementsMatching(t,null,null,e)),r;try{for(n.s();!(r=n.n()).done;){var s=r.value;i.remove(s);var a=new qn;i.add(new ni(a,s.predicate,s.object,e))}}catch(h){n.e(h)}finally{n.f()}var l=ea(i.statementsMatching(null,null,t,e)),o;try{for(l.s();!(o=l.n()).done;){var u=o.value;if(!u.predicate.sameTerm(ei("rest"))){i.remove(u);var f=new qn;i.add(new ni(u.subject,u.predicate,f,e))}}}catch(h){l.e(h)}finally{l.f()}}function V2(i,e){function t(r,s,a){var l=i.statementsMatching(r,ei("rest"),null,e);if(l.length!==1)throw new Error("Bad list structure: no rest at ".concat(r));var o=i.statementsMatching(r,ei("first"),null,e);if(o.length!==1)throw new Error("Bad list structure: rest but ".concat(o.length," firsts at ").concat(r));var u=o[0].object,f=[u].concat(s),h=a.concat(l).concat(o),d=i.statementsMatching(null,ei("rest"),r,e);if(d.length===0){var c=new qn(f);i.remove(h),q2(i,c,r,e);return}if(d.length!==1)throw new Error("Bad list structure: ".concat(d.length," pres at ").concat(r));var p=d[0].subject;if(p.termType!=="BlankNode")throw new Error("Bad list element node ".concat(p," type: ").concat(p.termType," "));t(p,f,h)}M2(i,e);var n=i.statementsMatching(null,ei("rest"),ei("nil"),e);n.forEach(function(r){if(r.subject.termType!=="BlankNode")throw new Error("Bad list element node ".concat(r.subject," type: ").concat(r.subject.termType," "));t(r.subject,[],[])})}function z2(i){return encodeURI(i)}var H2={encode:function(e){e=e.replace(/\r\n/g,`
`);for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},decode:function(e){for(var t="",n=0;n<e.length;){var r=e.charCodeAt(n);r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(t+=String.fromCharCode((r&31)<<6|e.charCodeAt(n+1)&63),n+=2):(t+=String.fromCharCode((r&15)<<12|(e.charCodeAt(n+1)&63)<<6|e.charCodeAt(n+2)&63),n+=3)}return t}},zs="http://www.w3.org/2000/10/swap/log#",ur=function(e){return e},fr=function(e){return e},$i=function(e){if(e.length>0)throw"missing.js: oops nnonempty dict not imp";return[]},Lr=function(e){return e.length},Hs=function(e,t,n){if(typeof e.slice>"u")throw"@@ mising.js: No .slice function for "+e+" of type "+Rr(e);return typeof n>"u"||n==null?e.slice(t):e.slice(t,n)},Yi=Error("dummy error stop iteration"),Ba=function(e){return this.last=0,this.li=e,this.next=function(){if(this.last==this.li.length)throw Yi;return this.li[this.last++]},this},xs=function(e,t){return e.indexOf(t)},Kn=function(e,t){if(!e)throw t?"python Assertion failed: "+t:"(python) Assertion failed."},x2=function(e){return String.fromCharCode(e)};String.prototype.encode=function(i){if(i!="utf-8")throw"UTF8_converter: can only do utf-8";return H2.encode(this)};String.prototype.decode=function(i){if(i!="utf-8")throw"UTF8_converter: can only do utf-8";return this};var Xs=function(e,t){return Mr(t,e)},X2=null,G2="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",Qu="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",Wu="http://www.w3.org/2002/07/owl#sameAs",$2="#",Q2="http://www.w3.org/2001/XMLSchema#integer",W2="http://www.w3.org/2001/XMLSchema#double",Y2="http://www.w3.org/2001/XMLSchema#decimal",J2="http://www.w3.org/2001/XMLSchema#date",K2="http://www.w3.org/2001/XMLSchema#dateTime",t_=`	\r
 !"#$%&'()*.,+/;<=>?@[\\]^\`{|}~`,Zn=t_+":",Gs=new RegExp("^([-+]?[0-9]+)(\\.[0-9]+)?(e[-+]?[0-9]+)?","g"),Yu=new RegExp("^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9](T[0-9][0-9]:[0-9][0-9](:[0-9][0-9](\\.[0-9]*)?)?)?Z?"),$s=new RegExp('[\\\\\\r\\n\\"]',"g"),Qs=new RegExp("^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*","g");function Wl(i,e,t,n,r,s,a,l){return new Z2(i,e,t,n,r,s,a,l)}var Z2=function(){function i(e,t,n,r,s,a,l,o){Jt(this,i),typeof t>"u"&&(t=null),typeof n>"u"&&(n=""),typeof r>"u"&&(r=null),typeof s>"u"&&(s=""),typeof l>"u"&&(l=""),typeof o>"u"&&(o=null),this._bindings=new $i([]),this._flags=l,n!=""&&(Kn(n.indexOf(":")>=0,"Document URI not absolute: "+n),this._bindings[""]=n+"#"),this._store=e,s&&e.setGenPrefix(s),this._thisDoc=n,this.source=e.sym(n),this.lines=0,this.statementCount=0,this.hasNil=!1,this.startOfLine=0,this.previousLine=0,this._genPrefix=s,this.keywords=new fr(["a","this","bind","has","is","of","true","false"]),this.keywordsSet=0,this._anonymousNodes=new $i([]),this._variables=new $i([]),this._parentVariables=new $i([]),this._reason=o,this._reason2=null,r?this._baseURI=r:n?this._baseURI=n:this._baseURI=null,Kn(!this._baseURI||this._baseURI.indexOf(":")>=0),this._genPrefix||(this._thisDoc?this._genPrefix=this._thisDoc+"#_g":this._genPrefix=RDFSink_uniqueURI()),t==null?this._thisDoc?this._formula=e.formula(n+"#_formula"):this._formula=e.formula():this._formula=t,this._context=this._formula,this._parentContext=null}return Yt(i,[{key:"here",value:function(t){return this._genPrefix+"_L"+this.lines+"C"+(t-this.startOfLine+1)}},{key:"formula",value:function(){return this._formula}},{key:"loadStream",value:function(t){return this.loadBuf(t.read())}},{key:"loadBuf",value:function(t){return this.startDoc(),this.feed(t),this.endDoc()}},{key:"feed",value:function(t){for(var n=t.decode("utf-8"),r=0;r>=0;){var s=this.skipSpace(n,r);if(s<0)return;var r=this.directiveOrStatement(n,s);if(r<0)throw lt(this._thisDoc,this.lines,n,s,"expected directive or statement")}}},{key:"directiveOrStatement",value:function(t,n){var r=this.skipSpace(t,n);if(r<0)return r;var s=this.directive(t,r);if(s>=0)return this.checkDot(t,s);var s=this.statement(t,r);return s>=0?this.checkDot(t,s):s}},{key:"tok",value:function(t,n,r){if(n.slice(r,r+1)=="@")var r=r+1;else if(qr(this.keywords,t)<0)return-1;var s=r+Lr(t);return n.slice(r,s)==t&&t_.indexOf(n.charAt(s))>=0?s:-1}},{key:"directive",value:function(t,n){var u=this.skipSpace(t,n);if(u<0)return u;var r=new fr([]),u=this.tok("bind",t,n);if(u>0)throw lt(this._thisDoc,this.lines,t,n,"keyword bind is obsolete: use @prefix");var u=this.tok("keywords",t,n);if(u>0){var n=this.commaSeparatedList(t,u,r,!1);if(n<0)throw lt(this._thisDoc,this.lines,t,n,"'@keywords' needs comma separated list of words");return this.setKeywords(Hs(r,null,null)),n}var u=this.tok("forAll",t,n);if(u>0){var n=this.commaSeparatedList(t,u,r,!0);if(n<0)throw lt(this._thisDoc,this.lines,t,n,"Bad variable list after @forAll");var s=new Ba(r);try{for(;;){var a=s.next();(qr(this._variables,a)<0||qr(this._parentVariables,a)>=0)&&(this._variables[a]=this._context.newUniversal(a))}}catch(h){if(h!=Yi)throw h}return n}var u=this.tok("forSome",t,n);if(u>0){var n=this.commaSeparatedList(t,u,r,this.uri_ref2);if(n<0)throw lt(this._thisDoc,this.lines,t,n,"Bad variable list after @forSome");var s=new Ba(r);try{for(;;){var a=s.next();this._context.declareExistential(a)}}catch(d){if(d!=Yi)throw d}return n}var u=this.tok("prefix",t,n);if(u>=0){var l=new fr([]),n=this.qname(t,u,l);if(n<0)throw lt(this._thisDoc,this.lines,t,u,"expected qname after @prefix");var u=this.uri_ref2(t,n,l);if(u<0)throw lt(this._thisDoc,this.lines,t,n,"expected <uriref> after @prefix _qname_");var o=l[1].uri;if(this._baseURI)var o=Xs(this._baseURI,o);else Kn(o.indexOf(":")>=0,"With no base URI, cannot handle relative URI for NS");return Kn(o.indexOf(":")>=0),this._bindings[l[0][0]]=o,this.bind(l[0][0],z2(o)),u}var u=this.tok("base",t,n);if(u>=0){var l=new fr([]),n=this.uri_ref2(t,u,l);if(n<0)throw lt(this._thisDoc,this.lines,t,u,"expected <uri> after @base ");var o=l[0].uri;if(this._baseURI)var o=Xs(this._baseURI,o);else throw lt(this._thisDoc,this.lines,t,u,"With no previous base URI, cannot use relative URI in @base  <"+o+">");return Kn(o.indexOf(":")>=0),this._baseURI=o,n}return-1}},{key:"bind",value:function(t,n){t==""||this._store.setPrefixForURI(t,n)}},{key:"setKeywords",value:function(t){t==null?this.keywordsSet=0:(this.keywords=t,this.keywordsSet=1)}},{key:"startDoc",value:function(){}},{key:"endDoc",value:function(){return this.hasNil&&this._store.rdfFactory.supports.COLLECTIONS&&V2(this._store,this.source),this._formula}},{key:"makeStatement",value:function(t){t[0].add(t[2],t[1],t[3],this.source),(t[2].uri&&t[2].uri===Qu||t[3].uri&&t[3].uri===Qu)&&(this.hasNil=!0),this.statementCount+=1}},{key:"statement",value:function(t,s){var r=new fr([]),s=this.object(t,s,r);if(s<0)return s;var a=this.property_list(t,s,r[0]);if(a<0)throw lt(this._thisDoc,this.lines,t,s,"expected propertylist");return a}},{key:"subject",value:function(t,n,r){return this.item(t,n,r)}},{key:"verb",value:function(t,n,r){var a=this.skipSpace(t,n);if(a<0)return a;var s=new fr([]),a=this.tok("has",t,n);if(a>=0){var n=this.prop(t,a,s);if(n<0)throw lt(this._thisDoc,this.lines,t,a,"expected property after 'has'");return r.push(new ur(["->",s[0]])),n}var a=this.tok("is",t,n);if(a>=0){var n=this.prop(t,a,s);if(n<0)throw lt(this._thisDoc,this.lines,t,a,"expected <property> after 'is'");var a=this.skipSpace(t,n);if(a<0)throw lt(this._thisDoc,this.lines,t,n,"End of file found, expected property after 'is'");var n=a,a=this.tok("of",t,n);if(a<0)throw lt(this._thisDoc,this.lines,t,n,"expected 'of' after 'is' <prop>");return r.push(new ur(["<-",s[0]])),a}var a=this.tok("a",t,n);if(a>=0)return r.push(new ur(["->",this._store.sym(G2)])),a;if(t.slice(n,n+2)=="<=")return r.push(new ur(["<-",this._store.sym(zs+"implies")])),n+2;if(t.slice(n,n+1)=="=")return t.slice(n+1,n+2)==">"?(r.push(new ur(["->",this._store.sym(zs+"implies")])),n+2):(r.push(new ur(["->",this._store.sym(Wu)])),n+1);if(t.slice(n,n+2)==":=")return r.push(new ur(["->",zs+"becomes"])),n+2;var a=this.prop(t,n,s);if(a>=0)return r.push(new ur(["->",s[0]])),a;if(t.slice(n,n+2)==">-"||t.slice(n,n+2)=="<-")throw lt(this._thisDoc,this.lines,t,a,">- ... -> syntax is obsolete.");return-1}},{key:"prop",value:function(t,n,r){return this.item(t,n,r)}},{key:"item",value:function(t,n,r){return this.path(t,n,r)}},{key:"blankNode",value:function(t){return this._context.bnode(t,this._reason2)}},{key:"path",value:function(t,n,r){var s=this.nodeOrLiteral(t,n,r);if(s<0)return s;for(;"!^.".indexOf(t.slice(s,s+1))>=0;){var a=t.slice(s,s+1);if(a=="."){var l=t.slice(s+1,s+2);if(!l||Zn.indexOf(l)>=0&&":?<[{(".indexOf(l)<0)break}var o=r.pop(),u=this.blankNode(this.here(s)),s=this.node(t,s+1,r);if(s<0)throw lt(this._thisDoc,this.lines,t,s,"EOF found in middle of path syntax");var f=r.pop();a=="^"?this.makeStatement(new ur([this._context,f,u,o])):this.makeStatement(new ur([this._context,f,o,u])),r.push(u)}return s}},{key:"anonymousNode",value:function(t){var n=this._anonymousNodes[t];if(n)return n;var n=this._store.bnode(t);return this._anonymousNodes[t]=n,n}},{key:"node",value:function(t,l,r,s){typeof s>"u"&&(s=null);var a=s,k=this.skipSpace(t,l);if(k<0)return k;var l=k,o=t.slice(l,l+1);if(o=="["){var u=this.here(l),k=this.skipSpace(t,l+1);if(k<0)throw lt(this._thisDoc,this.lines,t,l,"EOF after '['");if(t.slice(k,k+1)=="="){var l=k+1,f=new fr([]),k=this.objectList(t,l,f);if(k>=0){var a=f[0];if(Lr(f)>1){var h=new Ba(f);try{for(;;){var d=h.next();this.makeStatement(new ur([this._context,this._store.sym(Wu),a,d]))}}catch(A){if(A!=Yi)throw A}}var k=this.skipSpace(t,k);if(k<0)throw lt(this._thisDoc,this.lines,t,l,"EOF when objectList expected after [ = ");if(t.slice(k,k+1)==";")var k=k+1}else throw lt(this._thisDoc,this.lines,t,l,"objectList expected after [= ")}if(a==null)var a=this.blankNode(u);var l=this.property_list(t,k,a);if(l<0)throw lt(this._thisDoc,this.lines,t,k,"property_list expected");var k=this.skipSpace(t,l);if(k<0)throw lt(this._thisDoc,this.lines,t,l,"EOF when ']' expected after [ <propertyList>");if(t.slice(k,k+1)!="]")throw lt(this._thisDoc,this.lines,t,k,"']' expected");return r.push(a),k+1}if(o=="{"){var c=t.slice(l+1,l+2);if(c=="$"){l+=1;for(var k=l+1,p=new fr([]),_=!0;;){var l=this.skipSpace(t,k);if(l<0)throw lt(this._thisDoc,this.lines,t,l,"needed '$}', found end.");if(t.slice(l,l+2)=="$}"){var k=l+2;break}if(_)var _=!1;else if(t.slice(l,l+1)==",")l+=1;else throw lt(this._thisDoc,this.lines,t,l,"expected: ','");var m=new fr([]),k=this.item(t,l,m);if(k<0)throw lt(this._thisDoc,this.lines,t,l,"expected item in set or '$}'");p.push(m[0])}return r.push(this._store.newSet(p,this._context)),k}else{var k=l+1,y=this._parentContext;this._parentContext=this._context;var O=this._anonymousNodes,T=this._parentVariables;this._parentVariables=this._variables,this._anonymousNodes=new $i([]),this._variables=this._variables.slice();var N=this._reason2;if(this._reason2=X2,a==null)var a=this._store.formula();for(this._context=a;;){var l=this.skipSpace(t,k);if(l<0)throw lt(this._thisDoc,this.lines,t,l,"needed '}', found end.");if(t.slice(l,l+1)=="}"){var k=l+1;break}var k=this.directiveOrStatement(t,l);if(k<0)throw lt(this._thisDoc,this.lines,t,l,"expected statement or '}'")}return this._anonymousNodes=O,this._variables=this._parentVariables,this._parentVariables=T,this._context=this._parentContext,this._reason2=N,this._parentContext=y,r.push(a.close()),k}}if(o=="("){var g=this._store.list,c=t.slice(l+1,l+2);if(c=="$"){var g=this._store.newSet;l+=1}for(var k=l+1,p=new fr([]);;){var l=this.skipSpace(t,k);if(l<0)throw lt(this._thisDoc,this.lines,t,l,"needed ')', found end.");if(t.slice(l,l+1)==")"){var k=l+1;break}var m=new fr([]),k=this.item(t,l,m);if(k<0)throw lt(this._thisDoc,this.lines,t,l,"expected item in list or ')'");p.push(m[0])}return r.push(g(p,this._context)),k}var k=this.tok("this",t,l);if(k>=0)throw lt(this._thisDoc,this.lines,t,l,"Keyword 'this' was ancient N3. Now use @forSome and @forAll keywords.");var k=this.tok("true",t,l);if(k>=0)return r.push(!0),k;var k=this.tok("false",t,l);if(k>=0)return r.push(!1),k;if(a==null){var k=this.uri_ref2(t,l,r);if(k>=0)return k}return-1}},{key:"property_list",value:function(t,n,r){for(;;){var c=this.skipSpace(t,n);if(c<0)throw lt(this._thisDoc,this.lines,t,n,"EOF found when expected verb in property list");if(t.slice(c,c+2)==":-"){var n=c+2,s=new fr([]),c=this.node(t,n,s,r);if(c<0)throw lt(this._thisDoc,this.lines,t,n,"bad {} or () or [] node after :- ");var n=c;continue}var n=c,a=new fr([]),c=this.verb(t,n,a);if(c<=0)return n;var l=new fr([]),n=this.objectList(t,c,l);if(n<0)throw lt(this._thisDoc,this.lines,t,c,"objectList expected");var o=new Ba(l);try{for(;;){var u=o.next(),f=a[0],h=f[0],d=f[1];h=="->"?this.makeStatement(new ur([this._context,d,r,u])):this.makeStatement(new ur([this._context,d,u,r]))}}catch(_){if(_!=Yi)throw _}var c=this.skipSpace(t,n);if(c<0)throw lt(this._thisDoc,this.lines,t,c,"EOF found in list of objects");if(t.slice(n,n+1)!=";")return n;var n=n+1}}},{key:"commaSeparatedList",value:function(t,n,r,s){var a=this.skipSpace(t,n);if(a<0)throw lt(this._thisDoc,this.lines,t,a,"EOF found expecting comma sep list");if(t.charAt(a)==".")return n;if(s)var a=this.uri_ref2(t,a,r);else var a=this.bareWord(t,a,r);if(a<0)return-1;for(;;){var n=this.skipSpace(t,a);if(n<0)return n;var l=t.slice(n,n+1);if(l!=",")return l!="."?-1:n;if(s)var a=this.uri_ref2(t,n+1,r);else var a=this.bareWord(t,n+1,r);if(a<0)throw lt(this._thisDoc,this.lines,t,a,"bad list content")}}},{key:"objectList",value:function(t,s,r){var s=this.object(t,s,r);if(s<0)return-1;for(;;){var a=this.skipSpace(t,s);if(a<0)throw lt(this._thisDoc,this.lines,t,a,"EOF found after object");if(t.slice(a,a+1)!=",")return a;var s=this.object(t,a+1,r);if(s<0)return s}}},{key:"checkDot",value:function(t,n){var r=this.skipSpace(t,n);if(r<0)return r;if(t.slice(r,r+1)==".")return r+1;if(t.slice(r,r+1)=="}"||t.slice(r,r+1)=="]")return r;throw lt(this._thisDoc,this.lines,t,r,"expected '.' or '}' or ']' at end of statement")}},{key:"uri_ref2",value:function(t,d,r){var s=new fr([]),a=this.qname(t,d,s);if(a>=0){var l=s[0],o=l[0],u=l[1];if(o==null){Kn(0,"not used?");var f=this._baseURI+$2}else{var f=this._bindings[o];if(!f){if(o=="_")return r.push(this.anonymousNode(u)),a;throw lt(this._thisDoc,this.lines,t,d,"Prefix "+o+" not bound.")}}var h=this._store.sym(f+u);return qr(this._variables,h)>=0?r.push(this._variables[h]):r.push(h),a}var d=this.skipSpace(t,d);if(d<0)return-1;if(t.charAt(d)=="?"){var c=new fr([]),a=this.variable(t,d,c);return a>0?(r.push(c[0]),a):-1}else if(t.charAt(d)=="<"){for(var d=d+1,p=d;d<Lr(t);){if(t.charAt(d)==">"){var _=t.slice(p,d);if(this._baseURI)var _=Xs(this._baseURI,_);else Kn(_.indexOf(":")>=0,"With no base URI, cannot deal with relative URIs");if(t.slice(d-1,d)=="#"&&Hs(_,-1,null)!="#")var _=_+"#";var h=this._store.sym(_);return qr(this._variables,h)>=0?r.push(this._variables[h]):r.push(h),d+1}var d=d+1}throw lt(this._thisDoc,this.lines,t,a,"unterminated URI reference")}else if(this.keywordsSet){var c=new fr([]),a=this.bareWord(t,d,c);if(a<0)return-1;if(qr(this.keywords,c[0])>=0)throw lt(this._thisDoc,this.lines,t,d,'Keyword "'+c[0]+'" not allowed here.');return r.push(this._store.sym(this._bindings[""]+c[0])),a}else return-1}},{key:"skipSpace",value:function(t,n){for(var r=` 
\r	\f\v            ​\u2028\u2029　`,s=n||0;s<t.length;s++){var a=t.charAt(s);if(r.indexOf(a)<0)if(t.charAt(s)==="#")for(;;s++){if(s===t.length)return-1;if(t.charAt(s)===`
`){this.lines=this.lines+1;break}}else return s;else t.charAt(s)===`
`&&(this.lines=this.lines+1)}return-1}},{key:"variable",value:function(t,a,r){var s=this.skipSpace(t,a);if(s<0||t.slice(s,s+1)!="?")return-1;var s=s+1,a=s;if("0123456789-".indexOf(t.charAt(s))>=0)throw lt(this._thisDoc,this.lines,t,s,"Varible name can't start with '"+t.charAt(s)+"s'");for(;a<Lr(t)&&Zn.indexOf(t.charAt(a))<0;)var a=a+1;if(this._parentContext==null)throw lt(this._thisDoc,this.lines,t,s,"Can't use ?xxx syntax for variable in outermost level: "+t.slice(s-1,a));return r.push(this._store.variable(t.slice(s,a))),a}},{key:"bareWord",value:function(t,l,r){var s=this.skipSpace(t,l);if(s<0)return-1;var a=t.charAt(s);if("0123456789-".indexOf(a)>=0||Zn.indexOf(a)>=0)return-1;for(var l=s;l<Lr(t)&&Zn.indexOf(t.charAt(l))<0;)var l=l+1;return r.push(t.slice(s,l)),l}},{key:"qname",value:function(t,s,r){var s=this.skipSpace(t,s);if(s<0)return-1;var a=t.charAt(s);if("0123456789-+".indexOf(a)>=0)return-1;if(Zn.indexOf(a)<0)for(var l=a,s=s+1;s<Lr(t);){var a=t.charAt(s);if(Zn.indexOf(a)<0)var l=l+a,s=s+1;else break}else var l="";if(s<Lr(t)&&t.charAt(s)==":"){for(var o=l,s=s+1,l="";s<Lr(t);){var a=t.charAt(s);if(Zn.indexOf(a)<0)var l=l+a,s=s+1;else break}return r.push(new ur([o,l])),s}else return l&&this.keywordsSet&&qr(this.keywords,l)<0?(r.push(new ur(["",l])),s):-1}},{key:"object",value:function(t,n,r){var s=this.subject(t,n,r);if(s>=0)return s;var s=this.skipSpace(t,n);if(s<0)return-1;var n=s,a=null,l=t.charAt(n);if(l=='"'||l=="'"){t.slice(n,n+3==l+l)?a=l+l+l:a=l;var n=n+Lr(a),o=this.strconst(t,n,a),s=o[0],u=o[1];return r.push(this._store.literal(u)),s}else return-1}},{key:"nodeOrLiteral",value:function(t,n,r){var s=this.node(t,n,r);if(s>=0)return s;var s=this.skipSpace(t,n);if(s<0)return-1;var n=s,a=t.charAt(n);if("-+0987654321".indexOf(a)>=0){Yu.lastIndex=0;var l=Yu.exec(t.slice(n));if(l!=null){var o=l[0];s=n+o.length,o.indexOf("T")>=0?r.push(this._store.literal(o,this._store.sym(K2))):r.push(this._store.literal(o,this._store.sym(J2)))}else{Gs.lastIndex=0;var l=Gs.exec(t.slice(n));if(l==null)throw lt(this._thisDoc,this.lines,t,n,"Bad number or date syntax");s=n+Gs.lastIndex;var o=t.slice(n,s);o.indexOf("e")>=0?r.push(this._store.literal(parseFloat(o),this._store.sym(W2))):t.slice(n,s).indexOf(".")>=0?r.push(this._store.literal(parseFloat(o),this._store.sym(Y2))):r.push(this._store.literal(parseInt(o),this._store.sym(Q2)))}return s}if(t.charAt(n)=='"'){if(t.slice(n,n+3)=='"""')var u='"""';else var u='"';var n=n+Lr(u),f=null,h=this.strconst(t,n,u),s=h[0],d=h[1],c=null;if(t.slice(s,s+1)=="@"){Qs.lastIndex=0;var l=Qs.exec(t.slice(s+1));if(l==null)throw lt(this._thisDoc,startline,t,n,"Bad language code syntax on string literal, after @");var n=Qs.lastIndex+s+1,c=t.slice(s+1,n),s=n}if(t.slice(s,s+2)=="^^")var p=new fr([]),s=this.uri_ref2(t,s+2,p),f=p[0];return r.push(this._store.literal(d,c||f)),s}else return-1}},{key:"strconst",value:function(t,n,r){for(var s=n,a="",l=this.lines;s<Lr(t);){var n=s+Lr(r);if(t.slice(s,n)==r)return new ur([n,a]);if(t.charAt(s)=='"'){var a=a+'"',s=s+1;continue}$s.lastIndex=0;var o=$s.exec(t.slice(s));if(!o)throw lt(this._thisDoc,l,t,s,"Closing quote missing in string at ^ in "+t.slice(s-20,s)+"^"+t.slice(s,s+20));var n=s+$s.lastIndex-1,a=a+t.slice(s,n),u=t.charAt(n);if(u=='"'){var s=n;continue}else if(u=="\r"){var s=n+1;continue}else if(u==`
`){if(r=='"')throw lt(this._thisDoc,l,t,n,"newline found in string literal");this.lines=this.lines+1;var a=a+u,s=n+1;this.previousLine=this.startOfLine,this.startOfLine=s}else if(u=="\\"){var s=n+1,u=t.slice(s,s+1);if(!u)throw lt(this._thisDoc,l,t,n,"unterminated string literal (2)");var f=xs('abfrtvn\\"',u);if(f>=0)var h=`a\b\f\r	\v
\\"`.charAt(f),a=a+h,s=s+1;else if(u=="u")var d=this.uEscape(t,s+1,l),s=d[0],u=d[1],a=a+u;else if(u=="U")var d=this.UEscape(t,s+1,l),s=d[0],u=d[1],a=a+u;else throw lt(this._thisDoc,this.lines,t,n,"bad escape")}}throw lt(this._thisDoc,this.lines,t,n,"unterminated string literal")}},{key:"uEscape",value:function(t,n,r){for(var s=n,a=0,l=0;a<4;){var o=t.slice(s,s+1),u=o.toLowerCase(),s=s+1;if(u=="")throw lt(this._thisDoc,r,t,n,"unterminated string literal(3)");var f=xs("0123456789abcdef",u);if(f<0)throw lt(this._thisDoc,r,t,n,"bad string literal hex escape");var l=l*16+f,a=a+1}var h=String.fromCharCode(l);return new ur([s,h])}},{key:"UEscape",value:function(t,n,r){for(var s=n,a=0,l="\\U";a<8;){var o=t.slice(s,s+1),u=o.toLowerCase(),s=s+1;if(u=="")throw lt(this._thisDoc,r,t,n,"unterminated string literal(3)");var f=xs("0123456789abcdef",u);if(f<0)throw lt(this._thisDoc,r,t,n,"bad string literal hex escape");var l=l+u,a=a+1}var h=x2("0x"+Hs(l,2,10)-0);return new ur([s,h])}}])}();function lt(i,e,t,n,r){var s=e+1,a="Line "+s+" of <"+i+">: Bad syntax: "+r+`
at: "`+t.slice(n,n+30)+'"',l=new SyntaxError(a,i,s);return l.lineNo=s,l.characterInFile=n,l.syntaxProblem=r,l}function Ju(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function Ku(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ju(Object(t),!0).forEach(function(n){qe(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Ju(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}var bl=Ku(Ku({},Hr),{},{supports:qe(qe(qe(qe(qe(qe(qe({},Cr.collections,!0),Cr.defaultGraphType,!1),Cr.equalsMethod,!0),Cr.identity,!1),Cr.id,!0),Cr.reversibleId,!1),Cr.variableType,!0),collection:function(e){return new qn(e)},id:function(e){var t=this;return Ul(e)?"( ".concat(e.elements.map(function(n){return t.id(n)}).join(", ")," )"):Pg(e)?li.toString(e):Hr.id(e)},termToNQ:function(e){return e.termType===Hn?qn.toNT(e):Hr.termToNQ(e)}});function Yl(i,e){return typeof e=="string"?i.rdfFactory.literal(e):Object.prototype.hasOwnProperty.call(e,"@list")?i.rdfFactory.supports.COLLECTIONS===!0?tb(i,e["@list"]):eb(i,e):Object.prototype.hasOwnProperty.call(e,"@id")?Jl(i,e):Object.prototype.hasOwnProperty.call(e,"@language")?i.rdfFactory.literal(e["@value"],e["@language"]):Object.prototype.hasOwnProperty.call(e,"@type")?i.rdfFactory.literal(e["@value"],i.rdfFactory.namedNode(e["@type"])):Object.prototype.hasOwnProperty.call(e,"@value")?i.rdfFactory.literal(e["@value"]):i.rdfFactory.literal(e)}function eb(i,e){var t=e["@id"]?Jl(i,e):i.rdfFactory.blankNode(),n=e["@list"].map(function(s){return Yl(i,s)}),r=Yp(i.rdfFactory,t,n);return i.addAll(r),t}function tb(i,e){if(!Array.isArray(e))throw new TypeError("Object must be an array");return i.rdfFactory.collection(e.map(function(t){return Yl(i,t)}))}function r_(i,e,t,n){var r=t&&Object.prototype.hasOwnProperty.call(t,"termType")?t.value:t;return Nm(()=>import("../chunks/jsonld.CYnguqZs.js").then(s=>s.j),__vite__mapDeps([0,1,2]),import.meta.url).then(function(s){return s.flatten(JSON.parse(i),null,{base:r})}).then(function(s){return s.reduce(function(a,l){return e=n_(e,t,l),e},e)}).then(n).catch(n)}function Jl(i,e){return e["@id"].startsWith("_:")?i.rdfFactory.blankNode(e["@id"].substring(2)):i.rdfFactory.namedNode(e["@id"])}function n_(i,e,t){for(var n=t["@id"]?Jl(i,t):i.rdfFactory.blankNode(),r=0,s=Object.keys(t);r<s.length;r++){var a=s[r];if(a!=="@id"){if(a=="@graph")for(var l=n,o=t[a],u=0;u<o.length;u++)i=n_(i,l,o[u]);var f=t[a];if(Array.isArray(f))for(var h=0;h<f.length;h++)i.addStatement(Zu(i,n,a,f[h],e));else i.addStatement(Zu(i,n,a,f,e))}}return i}function Zu(i,e,t,n,r){var s,a;return t==="@type"?(s=i.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),a=i.rdfFactory.namedNode(n)):(s=i.rdfFactory.namedNode(t),a=Yl(i,n)),i.rdfFactory.quad(e,s,a,i.rdfFactory.namedNode(r))}var i_={},vs={};vs.byteLength=ib;vs.toByteArray=sb;vs.fromByteArray=ub;var sn=[],jr=[],rb=typeof Uint8Array<"u"?Uint8Array:Array,Ws="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var gi=0,nb=Ws.length;gi<nb;++gi)sn[gi]=Ws[gi],jr[Ws.charCodeAt(gi)]=gi;jr[45]=62;jr[95]=63;function a_(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=i.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function ib(i){var e=a_(i),t=e[0],n=e[1];return(t+n)*3/4-n}function ab(i,e,t){return(e+t)*3/4-t}function sb(i){var e,t=a_(i),n=t[0],r=t[1],s=new rb(ab(i,n,r)),a=0,l=r>0?n-4:n,o;for(o=0;o<l;o+=4)e=jr[i.charCodeAt(o)]<<18|jr[i.charCodeAt(o+1)]<<12|jr[i.charCodeAt(o+2)]<<6|jr[i.charCodeAt(o+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return r===2&&(e=jr[i.charCodeAt(o)]<<2|jr[i.charCodeAt(o+1)]>>4,s[a++]=e&255),r===1&&(e=jr[i.charCodeAt(o)]<<10|jr[i.charCodeAt(o+1)]<<4|jr[i.charCodeAt(o+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function lb(i){return sn[i>>18&63]+sn[i>>12&63]+sn[i>>6&63]+sn[i&63]}function ob(i,e,t){for(var n,r=[],s=e;s<t;s+=3)n=(i[s]<<16&16711680)+(i[s+1]<<8&65280)+(i[s+2]&255),r.push(lb(n));return r.join("")}function ub(i){for(var e,t=i.length,n=t%3,r=[],s=16383,a=0,l=t-n;a<l;a+=s)r.push(ob(i,a,a+s>l?l:a+s));return n===1?(e=i[t-1],r.push(sn[e>>2]+sn[e<<4&63]+"==")):n===2&&(e=(i[t-2]<<8)+i[t-1],r.push(sn[e>>10]+sn[e>>4&63]+sn[e<<2&63]+"=")),r.join("")}var Kl={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Kl.read=function(i,e,t,n,r){var s,a,l=r*8-n-1,o=(1<<l)-1,u=o>>1,f=-7,h=t?r-1:0,d=t?-1:1,c=i[e+h];for(h+=d,s=c&(1<<-f)-1,c>>=-f,f+=l;f>0;s=s*256+i[e+h],h+=d,f-=8);for(a=s&(1<<-f)-1,s>>=-f,f+=n;f>0;a=a*256+i[e+h],h+=d,f-=8);if(s===0)s=1-u;else{if(s===o)return a?NaN:(c?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-u}return(c?-1:1)*a*Math.pow(2,s-n)};Kl.write=function(i,e,t,n,r,s){var a,l,o,u=s*8-r-1,f=(1<<u)-1,h=f>>1,d=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=n?0:s-1,p=n?1:-1,_=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(o=Math.pow(2,-a))<1&&(a--,o*=2),a+h>=1?e+=d/o:e+=d*Math.pow(2,1-h),e*o>=2&&(a++,o/=2),a+h>=f?(l=0,a=f):a+h>=1?(l=(e*o-1)*Math.pow(2,r),a=a+h):(l=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;i[t+c]=l&255,c+=p,l/=256,r-=8);for(a=a<<r|l,u+=r;u>0;i[t+c]=a&255,c+=p,a/=256,u-=8);i[t+c-p]|=_*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){const e=vs,t=Kl,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=l,i.SlowBuffer=O,i.INSPECT_MAX_BYTES=50;const r=2147483647;i.kMaxLength=r,l.TYPED_ARRAY_SUPPORT=s(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const z=new Uint8Array(1),P={foo:function(){return 42}};return Object.setPrototypeOf(P,Uint8Array.prototype),Object.setPrototypeOf(z,P),z.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function a(z){if(z>r)throw new RangeError('The value "'+z+'" is invalid for option "size"');const P=new Uint8Array(z);return Object.setPrototypeOf(P,l.prototype),P}function l(z,P,F){if(typeof z=="number"){if(typeof P=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(z)}return o(z,P,F)}l.poolSize=8192;function o(z,P,F){if(typeof z=="string")return d(z,P);if(ArrayBuffer.isView(z))return p(z);if(z==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z);if(_t(z,ArrayBuffer)||z&&_t(z.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(_t(z,SharedArrayBuffer)||z&&_t(z.buffer,SharedArrayBuffer)))return _(z,P,F);if(typeof z=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const W=z.valueOf&&z.valueOf();if(W!=null&&W!==z)return l.from(W,P,F);const ce=m(z);if(ce)return ce;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof z[Symbol.toPrimitive]=="function")return l.from(z[Symbol.toPrimitive]("string"),P,F);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z)}l.from=function(z,P,F){return o(z,P,F)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function u(z){if(typeof z!="number")throw new TypeError('"size" argument must be of type number');if(z<0)throw new RangeError('The value "'+z+'" is invalid for option "size"')}function f(z,P,F){return u(z),z<=0?a(z):P!==void 0?typeof F=="string"?a(z).fill(P,F):a(z).fill(P):a(z)}l.alloc=function(z,P,F){return f(z,P,F)};function h(z){return u(z),a(z<0?0:y(z)|0)}l.allocUnsafe=function(z){return h(z)},l.allocUnsafeSlow=function(z){return h(z)};function d(z,P){if((typeof P!="string"||P==="")&&(P="utf8"),!l.isEncoding(P))throw new TypeError("Unknown encoding: "+P);const F=T(z,P)|0;let W=a(F);const ce=W.write(z,P);return ce!==F&&(W=W.slice(0,ce)),W}function c(z){const P=z.length<0?0:y(z.length)|0,F=a(P);for(let W=0;W<P;W+=1)F[W]=z[W]&255;return F}function p(z){if(_t(z,Uint8Array)){const P=new Uint8Array(z);return _(P.buffer,P.byteOffset,P.byteLength)}return c(z)}function _(z,P,F){if(P<0||z.byteLength<P)throw new RangeError('"offset" is outside of buffer bounds');if(z.byteLength<P+(F||0))throw new RangeError('"length" is outside of buffer bounds');let W;return P===void 0&&F===void 0?W=new Uint8Array(z):F===void 0?W=new Uint8Array(z,P):W=new Uint8Array(z,P,F),Object.setPrototypeOf(W,l.prototype),W}function m(z){if(l.isBuffer(z)){const P=y(z.length)|0,F=a(P);return F.length===0||z.copy(F,0,0,P),F}if(z.length!==void 0)return typeof z.length!="number"||Ct(z.length)?a(0):c(z);if(z.type==="Buffer"&&Array.isArray(z.data))return c(z.data)}function y(z){if(z>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return z|0}function O(z){return+z!=z&&(z=0),l.alloc(+z)}l.isBuffer=function(P){return P!=null&&P._isBuffer===!0&&P!==l.prototype},l.compare=function(P,F){if(_t(P,Uint8Array)&&(P=l.from(P,P.offset,P.byteLength)),_t(F,Uint8Array)&&(F=l.from(F,F.offset,F.byteLength)),!l.isBuffer(P)||!l.isBuffer(F))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(P===F)return 0;let W=P.length,ce=F.length;for(let Ee=0,Ae=Math.min(W,ce);Ee<Ae;++Ee)if(P[Ee]!==F[Ee]){W=P[Ee],ce=F[Ee];break}return W<ce?-1:ce<W?1:0},l.isEncoding=function(P){switch(String(P).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(P,F){if(!Array.isArray(P))throw new TypeError('"list" argument must be an Array of Buffers');if(P.length===0)return l.alloc(0);let W;if(F===void 0)for(F=0,W=0;W<P.length;++W)F+=P[W].length;const ce=l.allocUnsafe(F);let Ee=0;for(W=0;W<P.length;++W){let Ae=P[W];if(_t(Ae,Uint8Array))Ee+Ae.length>ce.length?(l.isBuffer(Ae)||(Ae=l.from(Ae)),Ae.copy(ce,Ee)):Uint8Array.prototype.set.call(ce,Ae,Ee);else if(l.isBuffer(Ae))Ae.copy(ce,Ee);else throw new TypeError('"list" argument must be an Array of Buffers');Ee+=Ae.length}return ce};function T(z,P){if(l.isBuffer(z))return z.length;if(ArrayBuffer.isView(z)||_t(z,ArrayBuffer))return z.byteLength;if(typeof z!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof z);const F=z.length,W=arguments.length>2&&arguments[2]===!0;if(!W&&F===0)return 0;let ce=!1;for(;;)switch(P){case"ascii":case"latin1":case"binary":return F;case"utf8":case"utf-8":return Ot(z).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F*2;case"hex":return F>>>1;case"base64":return $t(z).length;default:if(ce)return W?-1:Ot(z).length;P=(""+P).toLowerCase(),ce=!0}}l.byteLength=T;function N(z,P,F){let W=!1;if((P===void 0||P<0)&&(P=0),P>this.length||((F===void 0||F>this.length)&&(F=this.length),F<=0)||(F>>>=0,P>>>=0,F<=P))return"";for(z||(z="utf8");;)switch(z){case"hex":return $(this,P,F);case"utf8":case"utf-8":return I(this,P,F);case"ascii":return re(this,P,F);case"latin1":case"binary":return Z(this,P,F);case"base64":return A(this,P,F);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,P,F);default:if(W)throw new TypeError("Unknown encoding: "+z);z=(z+"").toLowerCase(),W=!0}}l.prototype._isBuffer=!0;function g(z,P,F){const W=z[P];z[P]=z[F],z[F]=W}l.prototype.swap16=function(){const P=this.length;if(P%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let F=0;F<P;F+=2)g(this,F,F+1);return this},l.prototype.swap32=function(){const P=this.length;if(P%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let F=0;F<P;F+=4)g(this,F,F+3),g(this,F+1,F+2);return this},l.prototype.swap64=function(){const P=this.length;if(P%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let F=0;F<P;F+=8)g(this,F,F+7),g(this,F+1,F+6),g(this,F+2,F+5),g(this,F+3,F+4);return this},l.prototype.toString=function(){const P=this.length;return P===0?"":arguments.length===0?I(this,0,P):N.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(P){if(!l.isBuffer(P))throw new TypeError("Argument must be a Buffer");return this===P?!0:l.compare(this,P)===0},l.prototype.inspect=function(){let P="";const F=i.INSPECT_MAX_BYTES;return P=this.toString("hex",0,F).replace(/(.{2})/g,"$1 ").trim(),this.length>F&&(P+=" ... "),"<Buffer "+P+">"},n&&(l.prototype[n]=l.prototype.inspect),l.prototype.compare=function(P,F,W,ce,Ee){if(_t(P,Uint8Array)&&(P=l.from(P,P.offset,P.byteLength)),!l.isBuffer(P))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof P);if(F===void 0&&(F=0),W===void 0&&(W=P?P.length:0),ce===void 0&&(ce=0),Ee===void 0&&(Ee=this.length),F<0||W>P.length||ce<0||Ee>this.length)throw new RangeError("out of range index");if(ce>=Ee&&F>=W)return 0;if(ce>=Ee)return-1;if(F>=W)return 1;if(F>>>=0,W>>>=0,ce>>>=0,Ee>>>=0,this===P)return 0;let Ae=Ee-ce,Ze=W-F;const at=Math.min(Ae,Ze),Pe=this.slice(ce,Ee),Xe=P.slice(F,W);for(let et=0;et<at;++et)if(Pe[et]!==Xe[et]){Ae=Pe[et],Ze=Xe[et];break}return Ae<Ze?-1:Ze<Ae?1:0};function k(z,P,F,W,ce){if(z.length===0)return-1;if(typeof F=="string"?(W=F,F=0):F>2147483647?F=2147483647:F<-2147483648&&(F=-2147483648),F=+F,Ct(F)&&(F=ce?0:z.length-1),F<0&&(F=z.length+F),F>=z.length){if(ce)return-1;F=z.length-1}else if(F<0)if(ce)F=0;else return-1;if(typeof P=="string"&&(P=l.from(P,W)),l.isBuffer(P))return P.length===0?-1:w(z,P,F,W,ce);if(typeof P=="number")return P=P&255,typeof Uint8Array.prototype.indexOf=="function"?ce?Uint8Array.prototype.indexOf.call(z,P,F):Uint8Array.prototype.lastIndexOf.call(z,P,F):w(z,[P],F,W,ce);throw new TypeError("val must be string, number or Buffer")}function w(z,P,F,W,ce){let Ee=1,Ae=z.length,Ze=P.length;if(W!==void 0&&(W=String(W).toLowerCase(),W==="ucs2"||W==="ucs-2"||W==="utf16le"||W==="utf-16le")){if(z.length<2||P.length<2)return-1;Ee=2,Ae/=2,Ze/=2,F/=2}function at(Xe,et){return Ee===1?Xe[et]:Xe.readUInt16BE(et*Ee)}let Pe;if(ce){let Xe=-1;for(Pe=F;Pe<Ae;Pe++)if(at(z,Pe)===at(P,Xe===-1?0:Pe-Xe)){if(Xe===-1&&(Xe=Pe),Pe-Xe+1===Ze)return Xe*Ee}else Xe!==-1&&(Pe-=Pe-Xe),Xe=-1}else for(F+Ze>Ae&&(F=Ae-Ze),Pe=F;Pe>=0;Pe--){let Xe=!0;for(let et=0;et<Ze;et++)if(at(z,Pe+et)!==at(P,et)){Xe=!1;break}if(Xe)return Pe}return-1}l.prototype.includes=function(P,F,W){return this.indexOf(P,F,W)!==-1},l.prototype.indexOf=function(P,F,W){return k(this,P,F,W,!0)},l.prototype.lastIndexOf=function(P,F,W){return k(this,P,F,W,!1)};function R(z,P,F,W){F=Number(F)||0;const ce=z.length-F;W?(W=Number(W),W>ce&&(W=ce)):W=ce;const Ee=P.length;W>Ee/2&&(W=Ee/2);let Ae;for(Ae=0;Ae<W;++Ae){const Ze=parseInt(P.substr(Ae*2,2),16);if(Ct(Ze))return Ae;z[F+Ae]=Ze}return Ae}function S(z,P,F,W){return Kt(Ot(P,z.length-F),z,F,W)}function B(z,P,F,W){return Kt(tr(P),z,F,W)}function D(z,P,F,W){return Kt($t(P),z,F,W)}function L(z,P,F,W){return Kt(At(P,z.length-F),z,F,W)}l.prototype.write=function(P,F,W,ce){if(F===void 0)ce="utf8",W=this.length,F=0;else if(W===void 0&&typeof F=="string")ce=F,W=this.length,F=0;else if(isFinite(F))F=F>>>0,isFinite(W)?(W=W>>>0,ce===void 0&&(ce="utf8")):(ce=W,W=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ee=this.length-F;if((W===void 0||W>Ee)&&(W=Ee),P.length>0&&(W<0||F<0)||F>this.length)throw new RangeError("Attempt to write outside buffer bounds");ce||(ce="utf8");let Ae=!1;for(;;)switch(ce){case"hex":return R(this,P,F,W);case"utf8":case"utf-8":return S(this,P,F,W);case"ascii":case"latin1":case"binary":return B(this,P,F,W);case"base64":return D(this,P,F,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,P,F,W);default:if(Ae)throw new TypeError("Unknown encoding: "+ce);ce=(""+ce).toLowerCase(),Ae=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(z,P,F){return P===0&&F===z.length?e.fromByteArray(z):e.fromByteArray(z.slice(P,F))}function I(z,P,F){F=Math.min(z.length,F);const W=[];let ce=P;for(;ce<F;){const Ee=z[ce];let Ae=null,Ze=Ee>239?4:Ee>223?3:Ee>191?2:1;if(ce+Ze<=F){let at,Pe,Xe,et;switch(Ze){case 1:Ee<128&&(Ae=Ee);break;case 2:at=z[ce+1],(at&192)===128&&(et=(Ee&31)<<6|at&63,et>127&&(Ae=et));break;case 3:at=z[ce+1],Pe=z[ce+2],(at&192)===128&&(Pe&192)===128&&(et=(Ee&15)<<12|(at&63)<<6|Pe&63,et>2047&&(et<55296||et>57343)&&(Ae=et));break;case 4:at=z[ce+1],Pe=z[ce+2],Xe=z[ce+3],(at&192)===128&&(Pe&192)===128&&(Xe&192)===128&&(et=(Ee&15)<<18|(at&63)<<12|(Pe&63)<<6|Xe&63,et>65535&&et<1114112&&(Ae=et))}}Ae===null?(Ae=65533,Ze=1):Ae>65535&&(Ae-=65536,W.push(Ae>>>10&1023|55296),Ae=56320|Ae&1023),W.push(Ae),ce+=Ze}return j(W)}const x=4096;function j(z){const P=z.length;if(P<=x)return String.fromCharCode.apply(String,z);let F="",W=0;for(;W<P;)F+=String.fromCharCode.apply(String,z.slice(W,W+=x));return F}function re(z,P,F){let W="";F=Math.min(z.length,F);for(let ce=P;ce<F;++ce)W+=String.fromCharCode(z[ce]&127);return W}function Z(z,P,F){let W="";F=Math.min(z.length,F);for(let ce=P;ce<F;++ce)W+=String.fromCharCode(z[ce]);return W}function $(z,P,F){const W=z.length;(!P||P<0)&&(P=0),(!F||F<0||F>W)&&(F=W);let ce="";for(let Ee=P;Ee<F;++Ee)ce+=Ut[z[Ee]];return ce}function G(z,P,F){const W=z.slice(P,F);let ce="";for(let Ee=0;Ee<W.length-1;Ee+=2)ce+=String.fromCharCode(W[Ee]+W[Ee+1]*256);return ce}l.prototype.slice=function(P,F){const W=this.length;P=~~P,F=F===void 0?W:~~F,P<0?(P+=W,P<0&&(P=0)):P>W&&(P=W),F<0?(F+=W,F<0&&(F=0)):F>W&&(F=W),F<P&&(F=P);const ce=this.subarray(P,F);return Object.setPrototypeOf(ce,l.prototype),ce};function X(z,P,F){if(z%1!==0||z<0)throw new RangeError("offset is not uint");if(z+P>F)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(P,F,W){P=P>>>0,F=F>>>0,W||X(P,F,this.length);let ce=this[P],Ee=1,Ae=0;for(;++Ae<F&&(Ee*=256);)ce+=this[P+Ae]*Ee;return ce},l.prototype.readUintBE=l.prototype.readUIntBE=function(P,F,W){P=P>>>0,F=F>>>0,W||X(P,F,this.length);let ce=this[P+--F],Ee=1;for(;F>0&&(Ee*=256);)ce+=this[P+--F]*Ee;return ce},l.prototype.readUint8=l.prototype.readUInt8=function(P,F){return P=P>>>0,F||X(P,1,this.length),this[P]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(P,F){return P=P>>>0,F||X(P,2,this.length),this[P]|this[P+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(P,F){return P=P>>>0,F||X(P,2,this.length),this[P]<<8|this[P+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(P,F){return P=P>>>0,F||X(P,4,this.length),(this[P]|this[P+1]<<8|this[P+2]<<16)+this[P+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(P,F){return P=P>>>0,F||X(P,4,this.length),this[P]*16777216+(this[P+1]<<16|this[P+2]<<8|this[P+3])},l.prototype.readBigUInt64LE=Zt(function(P){P=P>>>0,He(P,"offset");const F=this[P],W=this[P+7];(F===void 0||W===void 0)&&fe(P,this.length-8);const ce=F+this[++P]*2**8+this[++P]*2**16+this[++P]*2**24,Ee=this[++P]+this[++P]*2**8+this[++P]*2**16+W*2**24;return BigInt(ce)+(BigInt(Ee)<<BigInt(32))}),l.prototype.readBigUInt64BE=Zt(function(P){P=P>>>0,He(P,"offset");const F=this[P],W=this[P+7];(F===void 0||W===void 0)&&fe(P,this.length-8);const ce=F*2**24+this[++P]*2**16+this[++P]*2**8+this[++P],Ee=this[++P]*2**24+this[++P]*2**16+this[++P]*2**8+W;return(BigInt(ce)<<BigInt(32))+BigInt(Ee)}),l.prototype.readIntLE=function(P,F,W){P=P>>>0,F=F>>>0,W||X(P,F,this.length);let ce=this[P],Ee=1,Ae=0;for(;++Ae<F&&(Ee*=256);)ce+=this[P+Ae]*Ee;return Ee*=128,ce>=Ee&&(ce-=Math.pow(2,8*F)),ce},l.prototype.readIntBE=function(P,F,W){P=P>>>0,F=F>>>0,W||X(P,F,this.length);let ce=F,Ee=1,Ae=this[P+--ce];for(;ce>0&&(Ee*=256);)Ae+=this[P+--ce]*Ee;return Ee*=128,Ae>=Ee&&(Ae-=Math.pow(2,8*F)),Ae},l.prototype.readInt8=function(P,F){return P=P>>>0,F||X(P,1,this.length),this[P]&128?(255-this[P]+1)*-1:this[P]},l.prototype.readInt16LE=function(P,F){P=P>>>0,F||X(P,2,this.length);const W=this[P]|this[P+1]<<8;return W&32768?W|4294901760:W},l.prototype.readInt16BE=function(P,F){P=P>>>0,F||X(P,2,this.length);const W=this[P+1]|this[P]<<8;return W&32768?W|4294901760:W},l.prototype.readInt32LE=function(P,F){return P=P>>>0,F||X(P,4,this.length),this[P]|this[P+1]<<8|this[P+2]<<16|this[P+3]<<24},l.prototype.readInt32BE=function(P,F){return P=P>>>0,F||X(P,4,this.length),this[P]<<24|this[P+1]<<16|this[P+2]<<8|this[P+3]},l.prototype.readBigInt64LE=Zt(function(P){P=P>>>0,He(P,"offset");const F=this[P],W=this[P+7];(F===void 0||W===void 0)&&fe(P,this.length-8);const ce=this[P+4]+this[P+5]*2**8+this[P+6]*2**16+(W<<24);return(BigInt(ce)<<BigInt(32))+BigInt(F+this[++P]*2**8+this[++P]*2**16+this[++P]*2**24)}),l.prototype.readBigInt64BE=Zt(function(P){P=P>>>0,He(P,"offset");const F=this[P],W=this[P+7];(F===void 0||W===void 0)&&fe(P,this.length-8);const ce=(F<<24)+this[++P]*2**16+this[++P]*2**8+this[++P];return(BigInt(ce)<<BigInt(32))+BigInt(this[++P]*2**24+this[++P]*2**16+this[++P]*2**8+W)}),l.prototype.readFloatLE=function(P,F){return P=P>>>0,F||X(P,4,this.length),t.read(this,P,!0,23,4)},l.prototype.readFloatBE=function(P,F){return P=P>>>0,F||X(P,4,this.length),t.read(this,P,!1,23,4)},l.prototype.readDoubleLE=function(P,F){return P=P>>>0,F||X(P,8,this.length),t.read(this,P,!0,52,8)},l.prototype.readDoubleBE=function(P,F){return P=P>>>0,F||X(P,8,this.length),t.read(this,P,!1,52,8)};function oe(z,P,F,W,ce,Ee){if(!l.isBuffer(z))throw new TypeError('"buffer" argument must be a Buffer instance');if(P>ce||P<Ee)throw new RangeError('"value" argument is out of bounds');if(F+W>z.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(P,F,W,ce){if(P=+P,F=F>>>0,W=W>>>0,!ce){const Ze=Math.pow(2,8*W)-1;oe(this,P,F,W,Ze,0)}let Ee=1,Ae=0;for(this[F]=P&255;++Ae<W&&(Ee*=256);)this[F+Ae]=P/Ee&255;return F+W},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(P,F,W,ce){if(P=+P,F=F>>>0,W=W>>>0,!ce){const Ze=Math.pow(2,8*W)-1;oe(this,P,F,W,Ze,0)}let Ee=W-1,Ae=1;for(this[F+Ee]=P&255;--Ee>=0&&(Ae*=256);)this[F+Ee]=P/Ae&255;return F+W},l.prototype.writeUint8=l.prototype.writeUInt8=function(P,F,W){return P=+P,F=F>>>0,W||oe(this,P,F,1,255,0),this[F]=P&255,F+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(P,F,W){return P=+P,F=F>>>0,W||oe(this,P,F,2,65535,0),this[F]=P&255,this[F+1]=P>>>8,F+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(P,F,W){return P=+P,F=F>>>0,W||oe(this,P,F,2,65535,0),this[F]=P>>>8,this[F+1]=P&255,F+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(P,F,W){return P=+P,F=F>>>0,W||oe(this,P,F,4,4294967295,0),this[F+3]=P>>>24,this[F+2]=P>>>16,this[F+1]=P>>>8,this[F]=P&255,F+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(P,F,W){return P=+P,F=F>>>0,W||oe(this,P,F,4,4294967295,0),this[F]=P>>>24,this[F+1]=P>>>16,this[F+2]=P>>>8,this[F+3]=P&255,F+4};function Q(z,P,F,W,ce){ot(P,W,ce,z,F,7);let Ee=Number(P&BigInt(4294967295));z[F++]=Ee,Ee=Ee>>8,z[F++]=Ee,Ee=Ee>>8,z[F++]=Ee,Ee=Ee>>8,z[F++]=Ee;let Ae=Number(P>>BigInt(32)&BigInt(4294967295));return z[F++]=Ae,Ae=Ae>>8,z[F++]=Ae,Ae=Ae>>8,z[F++]=Ae,Ae=Ae>>8,z[F++]=Ae,F}function le(z,P,F,W,ce){ot(P,W,ce,z,F,7);let Ee=Number(P&BigInt(4294967295));z[F+7]=Ee,Ee=Ee>>8,z[F+6]=Ee,Ee=Ee>>8,z[F+5]=Ee,Ee=Ee>>8,z[F+4]=Ee;let Ae=Number(P>>BigInt(32)&BigInt(4294967295));return z[F+3]=Ae,Ae=Ae>>8,z[F+2]=Ae,Ae=Ae>>8,z[F+1]=Ae,Ae=Ae>>8,z[F]=Ae,F+8}l.prototype.writeBigUInt64LE=Zt(function(P,F=0){return Q(this,P,F,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Zt(function(P,F=0){return le(this,P,F,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(P,F,W,ce){if(P=+P,F=F>>>0,!ce){const at=Math.pow(2,8*W-1);oe(this,P,F,W,at-1,-at)}let Ee=0,Ae=1,Ze=0;for(this[F]=P&255;++Ee<W&&(Ae*=256);)P<0&&Ze===0&&this[F+Ee-1]!==0&&(Ze=1),this[F+Ee]=(P/Ae>>0)-Ze&255;return F+W},l.prototype.writeIntBE=function(P,F,W,ce){if(P=+P,F=F>>>0,!ce){const at=Math.pow(2,8*W-1);oe(this,P,F,W,at-1,-at)}let Ee=W-1,Ae=1,Ze=0;for(this[F+Ee]=P&255;--Ee>=0&&(Ae*=256);)P<0&&Ze===0&&this[F+Ee+1]!==0&&(Ze=1),this[F+Ee]=(P/Ae>>0)-Ze&255;return F+W},l.prototype.writeInt8=function(P,F,W){return P=+P,F=F>>>0,W||oe(this,P,F,1,127,-128),P<0&&(P=255+P+1),this[F]=P&255,F+1},l.prototype.writeInt16LE=function(P,F,W){return P=+P,F=F>>>0,W||oe(this,P,F,2,32767,-32768),this[F]=P&255,this[F+1]=P>>>8,F+2},l.prototype.writeInt16BE=function(P,F,W){return P=+P,F=F>>>0,W||oe(this,P,F,2,32767,-32768),this[F]=P>>>8,this[F+1]=P&255,F+2},l.prototype.writeInt32LE=function(P,F,W){return P=+P,F=F>>>0,W||oe(this,P,F,4,2147483647,-2147483648),this[F]=P&255,this[F+1]=P>>>8,this[F+2]=P>>>16,this[F+3]=P>>>24,F+4},l.prototype.writeInt32BE=function(P,F,W){return P=+P,F=F>>>0,W||oe(this,P,F,4,2147483647,-2147483648),P<0&&(P=4294967295+P+1),this[F]=P>>>24,this[F+1]=P>>>16,this[F+2]=P>>>8,this[F+3]=P&255,F+4},l.prototype.writeBigInt64LE=Zt(function(P,F=0){return Q(this,P,F,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Zt(function(P,F=0){return le(this,P,F,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ve(z,P,F,W,ce,Ee){if(F+W>z.length)throw new RangeError("Index out of range");if(F<0)throw new RangeError("Index out of range")}function ze(z,P,F,W,ce){return P=+P,F=F>>>0,ce||Ve(z,P,F,4),t.write(z,P,F,W,23,4),F+4}l.prototype.writeFloatLE=function(P,F,W){return ze(this,P,F,!0,W)},l.prototype.writeFloatBE=function(P,F,W){return ze(this,P,F,!1,W)};function ke(z,P,F,W,ce){return P=+P,F=F>>>0,ce||Ve(z,P,F,8),t.write(z,P,F,W,52,8),F+8}l.prototype.writeDoubleLE=function(P,F,W){return ke(this,P,F,!0,W)},l.prototype.writeDoubleBE=function(P,F,W){return ke(this,P,F,!1,W)},l.prototype.copy=function(P,F,W,ce){if(!l.isBuffer(P))throw new TypeError("argument should be a Buffer");if(W||(W=0),!ce&&ce!==0&&(ce=this.length),F>=P.length&&(F=P.length),F||(F=0),ce>0&&ce<W&&(ce=W),ce===W||P.length===0||this.length===0)return 0;if(F<0)throw new RangeError("targetStart out of bounds");if(W<0||W>=this.length)throw new RangeError("Index out of range");if(ce<0)throw new RangeError("sourceEnd out of bounds");ce>this.length&&(ce=this.length),P.length-F<ce-W&&(ce=P.length-F+W);const Ee=ce-W;return this===P&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(F,W,ce):Uint8Array.prototype.set.call(P,this.subarray(W,ce),F),Ee},l.prototype.fill=function(P,F,W,ce){if(typeof P=="string"){if(typeof F=="string"?(ce=F,F=0,W=this.length):typeof W=="string"&&(ce=W,W=this.length),ce!==void 0&&typeof ce!="string")throw new TypeError("encoding must be a string");if(typeof ce=="string"&&!l.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);if(P.length===1){const Ae=P.charCodeAt(0);(ce==="utf8"&&Ae<128||ce==="latin1")&&(P=Ae)}}else typeof P=="number"?P=P&255:typeof P=="boolean"&&(P=Number(P));if(F<0||this.length<F||this.length<W)throw new RangeError("Out of range index");if(W<=F)return this;F=F>>>0,W=W===void 0?this.length:W>>>0,P||(P=0);let Ee;if(typeof P=="number")for(Ee=F;Ee<W;++Ee)this[Ee]=P;else{const Ae=l.isBuffer(P)?P:l.from(P,ce),Ze=Ae.length;if(Ze===0)throw new TypeError('The value "'+P+'" is invalid for argument "value"');for(Ee=0;Ee<W-F;++Ee)this[Ee+F]=Ae[Ee%Ze]}return this};const Ie={};function ve(z,P,F){Ie[z]=class extends F{constructor(){super(),Object.defineProperty(this,"message",{value:P.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${z}]`,this.stack,delete this.name}get code(){return z}set code(ce){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ce,writable:!0})}toString(){return`${this.name} [${z}]: ${this.message}`}}}ve("ERR_BUFFER_OUT_OF_BOUNDS",function(z){return z?`${z} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ve("ERR_INVALID_ARG_TYPE",function(z,P){return`The "${z}" argument must be of type number. Received type ${typeof P}`},TypeError),ve("ERR_OUT_OF_RANGE",function(z,P,F){let W=`The value of "${z}" is out of range.`,ce=F;return Number.isInteger(F)&&Math.abs(F)>2**32?ce=he(String(F)):typeof F=="bigint"&&(ce=String(F),(F>BigInt(2)**BigInt(32)||F<-(BigInt(2)**BigInt(32)))&&(ce=he(ce)),ce+="n"),W+=` It must be ${P}. Received ${ce}`,W},RangeError);function he(z){let P="",F=z.length;const W=z[0]==="-"?1:0;for(;F>=W+4;F-=3)P=`_${z.slice(F-3,F)}${P}`;return`${z.slice(0,F)}${P}`}function Fe(z,P,F){He(P,"offset"),(z[P]===void 0||z[P+F]===void 0)&&fe(P,z.length-(F+1))}function ot(z,P,F,W,ce,Ee){if(z>F||z<P){const Ae=typeof P=="bigint"?"n":"";let Ze;throw P===0||P===BigInt(0)?Ze=`>= 0${Ae} and < 2${Ae} ** ${(Ee+1)*8}${Ae}`:Ze=`>= -(2${Ae} ** ${(Ee+1)*8-1}${Ae}) and < 2 ** ${(Ee+1)*8-1}${Ae}`,new Ie.ERR_OUT_OF_RANGE("value",Ze,z)}Fe(W,ce,Ee)}function He(z,P){if(typeof z!="number")throw new Ie.ERR_INVALID_ARG_TYPE(P,"number",z)}function fe(z,P,F){throw Math.floor(z)!==z?(He(z,F),new Ie.ERR_OUT_OF_RANGE("offset","an integer",z)):P<0?new Ie.ERR_BUFFER_OUT_OF_BOUNDS:new Ie.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${P}`,z)}const Te=/[^+/0-9A-Za-z-_]/g;function dt(z){if(z=z.split("=")[0],z=z.trim().replace(Te,""),z.length<2)return"";for(;z.length%4!==0;)z=z+"=";return z}function Ot(z,P){P=P||1/0;let F;const W=z.length;let ce=null;const Ee=[];for(let Ae=0;Ae<W;++Ae){if(F=z.charCodeAt(Ae),F>55295&&F<57344){if(!ce){if(F>56319){(P-=3)>-1&&Ee.push(239,191,189);continue}else if(Ae+1===W){(P-=3)>-1&&Ee.push(239,191,189);continue}ce=F;continue}if(F<56320){(P-=3)>-1&&Ee.push(239,191,189),ce=F;continue}F=(ce-55296<<10|F-56320)+65536}else ce&&(P-=3)>-1&&Ee.push(239,191,189);if(ce=null,F<128){if((P-=1)<0)break;Ee.push(F)}else if(F<2048){if((P-=2)<0)break;Ee.push(F>>6|192,F&63|128)}else if(F<65536){if((P-=3)<0)break;Ee.push(F>>12|224,F>>6&63|128,F&63|128)}else if(F<1114112){if((P-=4)<0)break;Ee.push(F>>18|240,F>>12&63|128,F>>6&63|128,F&63|128)}else throw new Error("Invalid code point")}return Ee}function tr(z){const P=[];for(let F=0;F<z.length;++F)P.push(z.charCodeAt(F)&255);return P}function At(z,P){let F,W,ce;const Ee=[];for(let Ae=0;Ae<z.length&&!((P-=2)<0);++Ae)F=z.charCodeAt(Ae),W=F>>8,ce=F%256,Ee.push(ce),Ee.push(W);return Ee}function $t(z){return e.toByteArray(dt(z))}function Kt(z,P,F,W){let ce;for(ce=0;ce<W&&!(ce+F>=P.length||ce>=z.length);++ce)P[ce+F]=z[ce];return ce}function _t(z,P){return z instanceof P||z!=null&&z.constructor!=null&&z.constructor.name!=null&&z.constructor.name===P.name}function Ct(z){return z!==z}const Ut=function(){const z="0123456789abcdef",P=new Array(256);for(let F=0;F<16;++F){const W=F*16;for(let ce=0;ce<16;++ce)P[W+ce]=z[F]+z[ce]}return P}();function Zt(z){return typeof BigInt>"u"?hr:z}function hr(){throw new Error("BigInt not supported")}})(i_);/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let ef;var fb=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:ls):i=>(ef||(ef=Promise.resolve())).then(i).catch(e=>setTimeout(()=>{throw e},0));const cb=oa(fb),Qi="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Wi="http://www.w3.org/2001/XMLSchema#",Ys="http://www.w3.org/2000/10/swap/",nn={xsd:{decimal:`${Wi}decimal`,boolean:`${Wi}boolean`,double:`${Wi}double`,integer:`${Wi}integer`,string:`${Wi}string`},rdf:{type:`${Qi}type`,nil:`${Qi}nil`,first:`${Qi}first`,rest:`${Qi}rest`,langString:`${Qi}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${Ys}reify#forSome`,forAll:`${Ys}reify#forAll`},log:{implies:`${Ys}log#implies`}},{xsd:La}=nn,db=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,tf={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},hb=/[\x00-\x20<>\\"\{\}\|\^\`]/,pb={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},_b=/$0^/;class mb{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const t in this)!(t in pb)&&this[t]instanceof RegExp&&(this[t]=_b)}else this._n3Mode=e.n3!==!1;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let n=this._input,r=n.length;for(;;){let l,o;for(;l=this._newline.exec(n);)this._comments&&(o=this._comment.exec(l[0]))&&s("comment",o[1],"",this._line,l[0].length),n=n.substr(l[0].length,n.length),r=n.length,this._line++;if(!l&&(l=this._whitespace.exec(n))&&(n=n.substr(l[0].length,n.length)),this._endOfFile.test(n))return t&&(this._comments&&(o=this._comment.exec(n))&&s("comment",o[1],"",this._line,n.length),n=null,s("eof","","",this._line,0)),this._input=n;const u=this._line,f=n[0];let h="",d="",c="",p=null,_=0,m=!1;switch(f){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){m=!0;break}}else{this._n3Mode&&(_=1,h="^");break}case"<":if(p=this._unescapedIri.exec(n))h="IRI",d=p[1];else if(p=this._iri.exec(n)){if(d=this._unescape(p[1]),d===null||hb.test(d))return a(this);h="IRI"}else n.length>1&&n[1]==="<"?(h="<<",_=2):this._n3Mode&&n.length>1&&n[1]==="="&&(h="inverse",_=2,d=">");break;case">":n.length>1&&n[1]===">"&&(h=">>",_=2);break;case"_":((p=this._blank.exec(n))||t&&(p=this._blank.exec(`${n} `)))&&(h="blank",c="_",d=p[1]);break;case'"':if(p=this._simpleQuotedString.exec(n))d=p[1];else if({value:d,matchLength:_}=this._parseLiteral(n),d===null)return a(this);(p!==null||_!==0)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(p=this._simpleApostropheString.exec(n))d=p[1];else if({value:d,matchLength:_}=this._parseLiteral(n),d===null)return a(this);(p!==null||_!==0)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(p=this._variable.exec(n))&&(h="var",d=p[0]);break;case"@":this._previousMarker==="literal"&&(p=this._langcode.exec(n))?(h="langcode",d=p[1]):(p=this._keyword.exec(n))&&(h=p[0]);break;case".":if(n.length===1?t:n[1]<"0"||n[1]>"9"){h=".",_=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(p=this._number.exec(n)||t&&(p=this._number.exec(`${n} `)))&&(h="literal",d=p[0],c=typeof p[1]=="string"?La.double:typeof p[2]=="string"?La.decimal:La.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(p=this._sparqlKeyword.exec(n))?h=p[0].toUpperCase():m=!0;break;case"f":case"t":(p=this._boolean.exec(n))?(h="literal",d=p[0],c=La.boolean):m=!0;break;case"a":(p=this._shortPredicates.exec(n))?(h="abbreviation",d="a"):m=!0;break;case"=":this._n3Mode&&n.length>1&&(h="abbreviation",n[1]!==">"?(_=1,d="="):(_=2,d=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(_=1,h=f);break;case"{":!this._lineMode&&n.length>=2&&(n[1]==="|"?(h="{|",_=2):(h=f,_=1));break;case"|":n.length>=2&&n[1]==="}"&&(h="|}",_=2);break;default:m=!0}if(m&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(p=this._prefix.exec(n))?(h="prefix",d=p[1]||""):((p=this._prefixed.exec(n))||t&&(p=this._prefixed.exec(`${n} `)))&&(h="prefixed",c=p[1]||"",d=this._unescape(p[2]))),this._previousMarker==="^^")switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return t||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?a(this):this._input=n;const y=_||p[0].length,O=s(h,d,c,u,y);this.previousToken=O,this._previousMarker=h,n=n.substr(y,n.length)}function s(l,o,u,f,h){const d=n?r-n.length:r,c=d+h,p={type:l,value:o,prefix:u,line:f,start:d,end:c};return e(null,p),p}function a(l){e(l._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let t=!1;const n=e.replace(db,(r,s,a,l)=>{if(typeof s=="string")return String.fromCharCode(Number.parseInt(s,16));if(typeof a=="string"){let o=Number.parseInt(a,16);return o<=65535?String.fromCharCode(Number.parseInt(a,16)):String.fromCharCode(55296+((o-=65536)>>10),56320+(o&1023))}return l in tf?tf[l]:(t=!0,"")});return t?null:n}_parseLiteral(e){if(e.length>=3){const t=e.match(/^(?:"""|"|'''|'|)/)[0],n=t.length;let r=Math.max(this._literalClosingPos,n);for(;(r=e.indexOf(t,r))>0;){let s=0;for(;e[r-s-1]==="\\";)s++;if(s%2===0){const a=e.substring(n,r),l=a.split(/\r\n|\r|\n/).length-1,o=r+n;if(n===1&&l!==0||n===3&&this._lineMode)break;return this._line+=l,{value:this._unescape(a),matchLength:o}}r++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,t){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof t=="function")cb(()=>this._tokenizeToEnd(t,!0));else{const n=[];let r;if(this._tokenizeToEnd((s,a)=>s?r=s:n.push(a),!0),r)throw r;return n}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=i_.Buffer.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(t,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(t,!0)}),e.on("error",t)}}const{rdf:vb,xsd:yi}=nn;let gs,gb=0;const bb={namedNode:Db,blankNode:Ab,variable:Tb,literal:Cb,defaultGraph:Nb,quad:rf,triple:rf};class Xn{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Xn?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}let s_=class extends Xn{get termType(){return"NamedNode"}},Js=class l_ extends Xn{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let t=e.lastIndexOf('"')+1;return t<e.length&&e[t++]==="@"?e.substr(t).toLowerCase():""}get datatype(){return new s_(this.datatypeString)}get datatypeString(){const e=this.id,t=e.lastIndexOf('"')+1,n=t<e.length?e[t]:"";return n==="^"?e.substr(t+2):n!=="@"?yi.string:vb.langString}equals(e){return e instanceof l_?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}},wb=class extends Xn{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}},yb=class extends Xn{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}},Eb=class extends Xn{constructor(){return super(""),gs||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};gs=new Eb;let kb=class extends Xn{constructor(e,t,n,r){super(""),this._subject=e,this._predicate=t,this._object=n,this._graph=r||gs}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}};function Db(i){return new s_(i)}function Ab(i){return new wb(i||`n3-${gb++}`)}function Cb(i,e){if(typeof e=="string")return new Js(`"${i}"@${e.toLowerCase()}`);let t=e?e.value:"";return t===""&&(typeof i=="boolean"?t=yi.boolean:typeof i=="number"&&(Number.isFinite(i)?t=Number.isInteger(i)?yi.integer:yi.double:(t=yi.double,Number.isNaN(i)||(i=i>0?"INF":"-INF")))),t===""||t===yi.string?new Js(`"${i}"`):new Js(`"${i}"^^${t}`)}function Tb(i){return new yb(i)}function Nb(){return gs}function rf(i,e,t,n){return new kb(i,e,t,n)}let nf=0;class o_{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&u_(this,e.factory);const t=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(t),r=/trig/.test(t),s=/triple/.test(t),a=/quad/.test(t),l=this._n3Mode=/n3/.test(t),o=s||a;(this._supportsNamedGraphs=!(n||l))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||r||s||l),this._supportsRDFStar=t===""||/star|\*$/.test(t),o&&(this._resolveRelativeIRI=u=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new mb({lineMode:o,n3:l}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){nf=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,t,n,r,s){const a=this._n3Mode;this._contextStack.push({type:e,subject:n,predicate:r,object:s,graph:t,inverse:a?this._inversePredicate:!1,blankPrefix:a?this._prefixes._:"",quantified:a?this._quantified:null}),a&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,t){const n=this._contextStack.pop();if(!n||n.type!==e)return this._error(`Unexpected ${t.type}`,t);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let n;switch(e.type){case"IRI":case"typeIRI":const r=this._resolveIRI(e.value);if(r===null)return this._error("Invalid IRI",e);n=this._namedNode(r);break;case"type":case"prefixed":const s=this._prefixes[e.prefix];if(s===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._namedNode(s+e.value);break;case"blank":n=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${t}`,e):(this._subject=null,t==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const t=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,n=null,r=this._readListItem;const s=this._subject,a=this._contextStack,l=a[a.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._blankNode(),this.RDF_FIRST,this._subject=t=this._blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),a.length!==0&&a[a.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;n=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,r=this._readListItemDataTypeOrLang):(t=this._literal(e.value,this._namedNode(e.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((t=this._readEntity(e))===void 0)return}if(n===null&&(this._subject=n=this._blankNode()),s===null?l.predicate===null?l.subject=n:l.object=n:this._emit(s,this.RDF_REST,n,this._graph),t!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,t,this._graph)}return r}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const n=this._readEntity(e);if(n===void 0)return;t=this._literal(this._literalValue,n),e=null;break;case"langcode":t=this._literal(this._literalValue,e.value),e=null;break}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){const n=this._completeLiteral(e);if(n)return this._object=n.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),n.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,n=this._graph;const r=this._subject,s=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);const a=this._predicate,l=this._object;this._subject=this._quad(r,a,l,this.DEFAULTGRAPH),t=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,t=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(e))!==void 0){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(r!==null){const a=this._predicate,l=this._object;s?this._emit(l,a,r,n):this._emit(r,a,l,n)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){const t=e.type==="IRI"&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if((t=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const t=this._contextStack,n=t.length&&t[t.length-1];if(n&&n.type==="item"){const r=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,r,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,n;const r=this._blankNode();if((n=this._readEntity(e))!==void 0)return this._predicate===null?(t=this._subject,this._subject=r):(t=this._object,this._object=r),this._emit(t,n,r,this._graph),this._readPath}_readBackwardPath(e){const t=this._blankNode();let n,r;if((n=this._readEntity(e))!==void 0)return this._predicate===null?(r=this._subject,this._subject=t):(r=this._object,this._object=t),this._emit(t,n,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const t=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,n,r){this._callback(null,this._quad(e,t,n,r||this.DEFAULTGRAPH))}_error(e,t){const n=new Error(`${e} on line ${t.line}.`);n.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=Ks}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const t=e.length;let n="",r=-1,s=-1,a=0,l="/";for(;r<t;){switch(l){case":":if(s<0&&e[++r]==="/"&&e[++r]==="/")for(;(s=r+1)<t&&e[s]!=="/";)r=s;break;case"?":case"#":r=t;break;case"/":if(e[r+1]===".")switch(l=e[++r+1],l){case"/":n+=e.substring(a,r-1),a=r+1;break;case void 0:case"?":case"#":return n+e.substring(a,r)+e.substr(r+1);case".":if(l=e[++r+1],l===void 0||l==="/"||l==="?"||l==="#"){if(n+=e.substring(a,r-2),(a=n.lastIndexOf("/"))>=s&&(n=n.substr(0,a)),l!=="/")return`${n}/${e.substr(r+1)}`;a=r+1}}}l=e[++r]}return n+e.substring(a)}parse(e,t,n){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${nf++}_`,this._prefixCallback=n||Ks,this._inversePredicate=!1,this._quantified=Object.create(null),!t){const r=[];let s;if(this._callback=(a,l)=>{a?s=a:l&&r.push(l)},this._lexer.tokenize(e).every(a=>this._readCallback=this._readCallback(a)),s)throw s;return r}this._callback=t,this._lexer.tokenize(e,(r,s)=>{r!==null?(this._callback(r),this._callback=Ks):this._readCallback&&(this._readCallback=this._readCallback(s))})}}function Ks(){}function u_(i,e){const t=e.namedNode;i._namedNode=t,i._blankNode=e.blankNode,i._literal=e.literal,i._variable=e.variable,i._quad=e.quad,i.DEFAULTGRAPH=e.defaultGraph(),i.RDF_FIRST=t(nn.rdf.first),i.RDF_REST=t(nn.rdf.rest),i.RDF_NIL=t(nn.rdf.nil),i.N3_FORALL=t(nn.r.forAll),i.N3_FORSOME=t(nn.r.forSome),i.ABBREVIATIONS={a:t(nn.rdf.type),"=":t(nn.owl.sameAs),">":t(nn.log.implies)},i.QUANTIFIERS_GRAPH=t("urn:n3:quantifiers")}u_(o_.prototype,bb);if(typeof Bn>"u")var Bn={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};var Vr=function(){function i(e,t){Jt(this,i),this.options=t||{},this.kb=e,this.target=t.target||{graph:{subjects:{},prefixes:{},terms:{}}},this.blankNodes=[],this.htmlOptions={selfClosing:"br img input area base basefont col colgroup source wbr isindex link meta param hr"},this.theOne="_:"+new Date().getTime(),this.language=null,this.vocabulary=null,this.blankCounter=0,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}],this.inXHTMLMode=!1,this.absURIRE=/[\w\_\-]+:\S+/,this.finishedHandlers=[],this.init()}return Yt(i,[{key:"addTriple",value:function(t,n,r,s){var a,l,o,u;typeof n>"u"?a=Hr.namedNode(this.options.base):a=this.toRDFNodeObject(n),o=this.toRDFNodeObject(r),l=this.toRDFNodeObject(s),u=Hr.namedNode(this.options.base),this.kb.add(a,o,l,u)}},{key:"ancestorPath",value:function(t){for(var n="";t&&t.nodeType!==Bn.DOCUMENT_NODE;)n="/"+t.localName+n,t=t.parentNode;return n}},{key:"copyMappings",value:function(t){var n={};for(var r in t)n[r]=t[r];return n}},{key:"copyProperties",value:function(){}},{key:"deriveDateTimeType",value:function(t){for(var n=0;n<i.dateTimeTypes.length;n++){var r=i.dateTimeTypes[n].pattern.exec(t);if(r&&r[0].length===t.length)return i.dateTimeTypes[n].type}return null}},{key:"init",value:function(){}},{key:"newBlankNode",value:function(){return this.blankCounter++,"_:"+this.blankCounter}},{key:"newSubjectOrigin",value:function(t,n){}},{key:"parseCURIE",value:function(t,n,r){var s=t.indexOf(":"),a;if(s>=0){var l=t.substring(0,s);if(l==="")return a=n[""],a?a+t.substring(s+1):null;if(l==="_")return"_:"+t.substring(s+1);if(i.NCNAME.test(l)&&(a=n[l],a))return a+t.substring(s+1)}return null}},{key:"parseCURIEOrURI",value:function(t,n,r){var s=this.parseCURIE(t,n,r);return s||this.resolveAndNormalize(r,t)}},{key:"parsePredicate",value:function(t,n,r,s,a,l){if(t==="")return null;var o=this.parseTermOrCURIEOrAbsURI(t,n,l?null:r,s,a);return o&&o.indexOf("_:")===0?null:o}},{key:"parsePrefixMappings",value:function(t,n){for(var r=this.tokenize(t),s=null,a=0;a<r.length;a++)r[a][r[a].length-1]===":"?s=r[a].substring(0,r[a].length-1):s&&(n[s]=this.options.base?Mr(r[a],this.options.base):r[a],s=null)}},{key:"parseSafeCURIEOrCURIEOrURI",value:function(t,n,r){return t=this.trim(t),t.charAt(0)==="["&&t.charAt(t.length-1)==="]"?(t=t.substring(1,t.length-1),t=t.trim(t),t.length===0?null:t==="_:"?this.theOne:this.parseCURIE(t,n,r)):this.parseCURIEOrURI(t,n,r)}},{key:"parseTermOrCURIEOrAbsURI",value:function(t,n,r,s,a){t=this.trim(t);var l=this.parseCURIE(t,s,a);if(l)return l;if(r){if(n&&!this.absURIRE.exec(t))return n+t;var o=r[t];if(o)return o;var u=t.toLowerCase();if(o=r[u],o)return o}return this.absURIRE.exec(t)?this.resolveAndNormalize(a,t):null}},{key:"parseTermOrCURIEOrURI",value:function(t,n,r,s,a){t=this.trim(t);var l=this.parseCURIE(t,s,a);if(l)return l;var o=r[t];if(o)return o;var u=t.toLowerCase();return o=r[u],o||(n&&!this.absURIRE.exec(t)?n+t:this.resolveAndNormalize(a,t))}},{key:"parseURI",value:function(t){return t}},{key:"process",value:function(t,n){n=n||{};var r;t.nodeType===Bn.DOCUMENT_NODE?(t.baseURI&&!n.baseURI&&(n.baseURI=t.baseURI),r=t.baseURI,t=t.documentElement,t.baseURI||(t.baseURI=r),this.setContext(t)):t.parentNode.nodeType===Bn.DOCUMENT_NODE&&this.setContext(t);var s=[],a=function(lr){if(!lr&&n&&n.baseURI)return n.baseURI;var vr=lr.indexOf("#");return vr>=0&&(lr=lr.substring(0,vr)),n&&n.baseURIMap&&(lr=n.baseURIMap(lr)),lr};for(s.push({current:t,context:this.push(null,a(t.baseURI))});s.length>0;){var l=s.shift();if(l.parent){if(l.context.parent&&l.context.parent.listMapping===l.listMapping)continue;for(var o in l.listMapping){var u=l.listMapping[o];if(u.length===0){this.addTriple(l.parent,l.subject,o,{type:i.objectURI,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});continue}for(var f=[],h=0;h<u.length;h++)f.push(this.newBlankNode());for(var d=0;d<f.length;d++)this.addTriple(l.parent,f[d],"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",u[d]),this.addTriple(l.parent,f[d],"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",{type:i.objectURI,value:d+1<f.length?f[d+1]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});this.addTriple(l.parent,l.subject,o,{type:i.objectURI,value:f[0]})}continue}var c=l.current,p=l.context,_=!1,m=null,y=null,O=null,T=p.prefixes,N=!1,g=[],k=p.listMapping,w=!p.parent,R=p.language,S=p.vocabulary;r=this.parseURI(a(c.baseURI)),c.item=null;var B=c.getAttributeNode("vocab");if(B){var D=this.trim(B.value);if(D.length>0){S=D;var L=r.spec;this.addTriple(c,L,"http://www.w3.org/ns/rdfa#usesVocabulary",{type:i.objectURI,value:S})}else S=this.vocabulary}for(var A=0;A<c.attributes.length;A++){var I=c.attributes[A];if(I.nodeName.charAt(0)==="x"&&I.nodeName.indexOf("xmlns:")===0){N||(T=this.copyMappings(T),N=!0);var x=I.nodeName.substring(6),j=i.trim(I.value);T[x]=this.options.base?Mr(j,this.options.base):j}}var re=c.getAttributeNode("prefix");re&&(N||(T=this.copyMappings(T),N=!0),this.parsePrefixMappings(re.value,T));for(var Z=null,$=0;!Z&&$<this.langAttributes.length;$++)Z=c.getAttributeNodeNS(this.langAttributes[$].namespaceURI,this.langAttributes[$].localName);if(Z){var G=i.trim(Z.value);G.length>0?R=G:R=null}var X=c.getAttributeNode("rel"),oe=c.getAttributeNode("rev"),Q=c.getAttributeNode("typeof"),le=c.getAttributeNode("property"),Ve=c.getAttributeNode("datatype"),ze=this.inHTMLMode?c.getAttributeNode("datetime"):null,ke=c.getAttributeNode("content"),Ie=c.getAttributeNode("about"),ve=c.getAttributeNode("src"),he=c.getAttributeNode("resource"),Fe=c.getAttributeNode("href"),ot=c.getAttributeNode("inlist"),He=[],fe,Te;if(X){Te=this.tokenize(X.value);for(var dt=0;dt<Te.length;dt++)fe=this.parsePredicate(Te[dt],S,p.terms,T,r,this.inHTMLMode&&le!==null),fe&&He.push(fe)}var Ot=[];if(oe){Te=this.tokenize(oe.value);for(var tr=0;tr<Te.length;tr++)fe=this.parsePredicate(Te[tr],S,p.terms,T,r,this.inHTMLMode&&le),fe&&Ot.push(fe)}if(this.inHTMLMode&&(X||oe)&&le&&(He.length===0&&(X=null),Ot.length===0&&(oe=null)),X||oe?(Ie&&(m=this.parseSafeCURIEOrCURIEOrURI(Ie.value,T,r)),Q&&(O=m),m||(c.parentNode.nodeType===Bn.DOCUMENT_NODE?m=a(c.baseURI):p.parentObject&&(m=a(c.parentNode.baseURI)===p.parentObject?a(c.baseURI):p.parentObject)),he&&(y=this.parseSafeCURIEOrCURIEOrURI(he.value,T,r)),y||(Fe?y=this.resolveAndNormalize(r,encodeURI(Fe.value)):ve?y=this.resolveAndNormalize(r,encodeURI(ve.value)):Q&&!Ie&&!(this.inXHTMLMode&&(c.localName==="head"||c.localName==="body"))&&(y=this.newBlankNode())),Q&&!Ie&&this.inXHTMLMode&&(c.localName==="head"||c.localName==="body")?O=m:Q&&!Ie&&(O=y)):le&&!ke&&!Ve?(Ie&&(m=this.parseSafeCURIEOrCURIEOrURI(Ie.value,T,r),Q&&(O=m)),!m&&c.parentNode.nodeType===Bn.DOCUMENT_NODE?(m=a(c.baseURI),Q&&(O=m)):!m&&p.parentObject&&(m=a(c.parentNode.baseURI)===p.parentObject?a(c.baseURI):p.parentObject),Q&&!O&&(he&&(O=this.parseSafeCURIEOrCURIEOrURI(he.value,T,r)),!O&&Fe&&(O=this.resolveAndNormalize(r,encodeURI(Fe.value))),!O&&ve&&(O=this.resolveAndNormalize(r,encodeURI(ve.value))),!O&&(this.inXHTMLMode||this.inHTMLMode)&&(c.localName==="head"||c.localName==="body")&&(O=m),O||(O=this.newBlankNode()),y=O)):(Ie&&(m=this.parseSafeCURIEOrCURIEOrURI(Ie.value,T,r)),!m&&he&&(m=this.parseSafeCURIEOrCURIEOrURI(he.value,T,r)),!m&&Fe&&(m=this.resolveAndNormalize(r,encodeURI(Fe.value))),!m&&ve&&(m=this.resolveAndNormalize(r,encodeURI(ve.value))),m||(c.parentNode.nodeType===Bn.DOCUMENT_NODE?m=a(c.baseURI):(this.inXHTMLMode||this.inHTMLMode)&&(c.localName==="head"||c.localName==="body")?m=a(c.parentNode.baseURI)===p.parentObject?a(c.baseURI):p.parentObject:Q?m=this.newBlankNode():p.parentObject&&(m=a(c.parentNode.baseURI)===p.parentObject?a(c.baseURI):p.parentObject,le||(_=!0))),Q&&(O=m)),m&&(Ie||he||O)){var At=m;Q&&!Ie&&!he&&y&&(At=y),this.newSubjectOrigin(c,At)}if(O){Te=this.tokenize(Q.value);for(var $t=0;$t<Te.length;$t++){var Kt=this.parseTermOrCURIEOrAbsURI(Te[$t],S,p.terms,T,r);Kt&&this.addTriple(c,O,i.typeURI,{type:i.objectURI,value:Kt})}}if(m&&m!==p.parentObject&&(k={},w=!0),y){if(X&&ot)for(var _t=0;_t<He.length;_t++){var Ct=k[He[_t]];Ct||(Ct=[],k[He[_t]]=Ct),Ct.push({type:i.objectURI,value:y})}else if(X)for(var Ut=0;Ut<He.length;Ut++)this.addTriple(c,m,He[Ut],{type:i.objectURI,value:y});if(oe)for(var Zt=0;Zt<Ot.length;Zt++)this.addTriple(c,y,Ot[Zt],{type:i.objectURI,value:m})}else{if(m&&!y&&(X||oe)&&(y=this.newBlankNode()),X&&ot)for(var hr=0;hr<He.length;hr++){var z=k[He[hr]];z||(z=[],k[fe]=z),g.push({predicate:He[hr],list:z})}else if(X)for(var P=0;P<He.length;P++)g.push({predicate:He[P],forward:!0});if(oe)for(var F=0;F<Ot.length;F++)g.push({predicate:Ot[F],forward:!1})}if(le){var W=null,ce=null;Ve?(W=Ve.value===""?i.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(Ve.value,S,p.terms,T,r),ze&&!ke?ce=ze.value:ce=W===i.XMLLiteralURI||W===i.HTMLLiteralURI?null:ke?ke.value:c.textContent):ke?(W=i.PlainLiteralURI,ce=ke.value):ze?(ce=ze.value,W=i.deriveDateTimeType(ce),W||(W=i.PlainLiteralURI)):!X&&!oe&&(he&&(ce=this.parseSafeCURIEOrCURIEOrURI(he.value,T,r)),!ce&&Fe?ce=this.resolveAndNormalize(r,encodeURI(Fe.value)):!ce&&ve&&(ce=this.resolveAndNormalize(r,encodeURI(ve.value))),ce&&(W=i.objectURI)),W||(Q&&!Ie?(W=i.objectURI,ce=O):(ce=c.textContent,this.inHTMLMode&&c.localName==="time"&&(W=i.deriveDateTimeType(ce)),W||(W=i.PlainLiteralURI))),Te=this.tokenize(le.value);for(var Ee=0;Ee<Te.length;Ee++){var Ae=this.parsePredicate(Te[Ee],S,p.terms,T,r);if(Ae)if(ot){var Ze=k[Ae];Ze||(Ze=[],k[Ae]=Ze),Ze.push(W===i.XMLLiteralURI||W===i.HTMLLiteralURI?{type:W,value:c.childNodes}:{type:W||i.PlainLiteralURI,value:ce,language:R})}else W===i.XMLLiteralURI||W===i.HTMLLiteralURI?this.addTriple(c,m,Ae,{type:W,value:c.childNodes}):this.addTriple(c,m,Ae,{type:W||i.PlainLiteralURI,value:ce,language:R})}}if(m&&!_)for(var at=0;at<p.incomplete.length;at++)p.incomplete[at].list?p.incomplete[at].list.push({type:i.objectURI,value:m}):p.incomplete[at].forward?this.addTriple(c,p.subject,p.incomplete[at].predicate,{type:i.objectURI,value:m}):this.addTriple(c,m,p.incomplete[at].predicate,{type:i.objectURI,value:p.subject});var Pe=null,Xe=m;_?(Pe=this.push(p,p.subject),Pe.parentObject=a(c.parentNode.baseURI)===p.parentObject?a(c.baseURI):p.parentObject,Pe.incomplete=p.incomplete,Pe.language=R,Pe.prefixes=T,Pe.vocabulary=S):(Pe=this.push(p,m),Pe.parentObject=y||m||p.subject,Pe.prefixes=T,Pe.incomplete=g,y&&(Xe=y,k={},w=!0),Pe.listMapping=k,Pe.language=R,Pe.vocabulary=S),w&&s.unshift({parent:c,context:p,subject:Xe,listMapping:k});for(var et=c.lastChild;et;et=et.previousSibling)et.nodeType===Bn.ELEMENT_NODE&&s.unshift({current:et,context:Pe})}this.inHTMLMode&&this.copyProperties();for(var ar=0;ar<this.finishedHandlers.length;ar++)this.finishedHandlers[ar](t)}},{key:"push",value:function(t,n){return{parent:t,subject:n||(t?t.subject:null),parentObject:null,incomplete:[],listMapping:t?t.listMapping:{},language:t?t.language:this.language,prefixes:t?t.prefixes:this.target.graph.prefixes,terms:t?t.terms:this.target.graph.terms,vocabulary:t?t.vocabulary:this.vocabulary}}},{key:"resolveAndNormalize",value:function(t,n){return Mr(n,t)}},{key:"setContext",value:function(t){t.localName==="html"&&t.getAttribute("version")==="XHTML+RDFa 1.1"?this.setXHTMLContext():t.localName==="html"||t.namespaceURI==="http://www.w3.org/1999/xhtml"?typeof document<"u"&&document.doctype?document.doctype.publicId==="-//W3C//DTD XHTML+RDFa 1.0//EN"&&document.doctype.systemId==="http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"?(console.log("WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode."),this.setHTMLContext()):document.doctype.publicId==="-//W3C//DTD XHTML+RDFa 1.1//EN"&&document.doctype.systemId==="http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"?this.setXHTMLContext():this.setHTMLContext():this.setHTMLContext():this.setXMLContext()}},{key:"setHTMLContext",value:function(){this.setInitialContext(),this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.inXHTMLMode=!1,this.inHTMLMode=!0}},{key:"setInitialContext",value:function(){this.vocabulary=null,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}]}},{key:"setXHTMLContext",value:function(){this.setInitialContext(),this.inXHTMLMode=!0,this.inHTMLMode=!1,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.target.graph.terms.alternate="http://www.w3.org/1999/xhtml/vocab#alternate",this.target.graph.terms.appendix="http://www.w3.org/1999/xhtml/vocab#appendix",this.target.graph.terms.bookmark="http://www.w3.org/1999/xhtml/vocab#bookmark",this.target.graph.terms.cite="http://www.w3.org/1999/xhtml/vocab#cite",this.target.graph.terms.chapter="http://www.w3.org/1999/xhtml/vocab#chapter",this.target.graph.terms.contents="http://www.w3.org/1999/xhtml/vocab#contents",this.target.graph.terms.copyright="http://www.w3.org/1999/xhtml/vocab#copyright",this.target.graph.terms.first="http://www.w3.org/1999/xhtml/vocab#first",this.target.graph.terms.glossary="http://www.w3.org/1999/xhtml/vocab#glossary",this.target.graph.terms.help="http://www.w3.org/1999/xhtml/vocab#help",this.target.graph.terms.icon="http://www.w3.org/1999/xhtml/vocab#icon",this.target.graph.terms.index="http://www.w3.org/1999/xhtml/vocab#index",this.target.graph.terms.last="http://www.w3.org/1999/xhtml/vocab#last",this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license",this.target.graph.terms.meta="http://www.w3.org/1999/xhtml/vocab#meta",this.target.graph.terms.next="http://www.w3.org/1999/xhtml/vocab#next",this.target.graph.terms.prev="http://www.w3.org/1999/xhtml/vocab#prev",this.target.graph.terms.previous="http://www.w3.org/1999/xhtml/vocab#previous",this.target.graph.terms.section="http://www.w3.org/1999/xhtml/vocab#section",this.target.graph.terms.stylesheet="http://www.w3.org/1999/xhtml/vocab#stylesheet",this.target.graph.terms.subsection="http://www.w3.org/1999/xhtml/vocab#subsection",this.target.graph.terms.start="http://www.w3.org/1999/xhtml/vocab#start",this.target.graph.terms.top="http://www.w3.org/1999/xhtml/vocab#top",this.target.graph.terms.up="http://www.w3.org/1999/xhtml/vocab#up",this.target.graph.terms.p3pv1="http://www.w3.org/1999/xhtml/vocab#p3pv1",this.target.graph.terms.related="http://www.w3.org/1999/xhtml/vocab#related",this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role",this.target.graph.terms.transformation="http://www.w3.org/1999/xhtml/vocab#transformation"}},{key:"setXMLContext",value:function(){this.setInitialContext(),this.inXHTMLMode=!1,this.inHTMLMode=!1}},{key:"tokenize",value:function(t){return this.trim(t).split(/\s+/)}},{key:"toRDFNodeObject",value:function(t){var n=this;if(!(typeof t>"u")){if(typeof t=="string")return t.substring(0,2)==="_:"?(typeof this.blankNodes[t.substring(2)]>"u"&&(this.blankNodes[t.substring(2)]=new un(t.substring(2))),this.blankNodes[t.substring(2)]):Hr.namedNode(t);switch(t.type){case i.objectURI:return t.value.substring(0,2)==="_:"?(typeof this.blankNodes[t.value.substring(2)]>"u"&&(this.blankNodes[t.value.substring(2)]=new un(t.value.substring(2))),this.blankNodes[t.value.substring(2)]):Hr.namedNode(t.value);case i.PlainLiteralURI:return new an(t.value,t.language||"");case i.XMLLiteralURI:case i.HTMLLiteralURI:var r="";return Object.keys(t.value).forEach(function(s){r+=g2(t.value[s],n.htmlOptions)}),new an(r,"",new dr(t.type));default:return new an(t.value,"",new dr(t.type))}}}},{key:"trim",value:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}],[{key:"parseRDFaDOM",value:function(t,n,r){var s=new i(n,{base:r});t.baseURI||(t.baseURI=r),s.process(t,{baseURI:r})}},{key:"tokenize",value:function(t){return this.trim(t).split(/\s+/)}},{key:"trim",value:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}])}();Vr.XMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral";Vr.HTMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML";Vr.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral";Vr.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object";Vr.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";Vr.nameChar="[-A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�က0-F.0-9·̀-ͯ‿-⁀]";Vr.nameStartChar="[A-Za-zÀ-ÖØ-öø-ÿĀ-ıĴ-ľŁ-ňŊ-žƀ-ǃǍ-ǰǴ-ǵǺ-ȗɐ-ʨʻ-ˁΆΈ-ΊΌΎ-ΡΣ-ώϐ-ϖϚϜϞϠϢ-ϳЁ-ЌЎ-яё-ќў-ҁҐ-ӄӇ-ӈӋ-ӌӐ-ӫӮ-ӵӸ-ӹԱ-Ֆՙա-ֆא-תװ-ײء-غف-يٱ-ڷں-ھۀ-ێې-ۓەۥ-ۦअ-हऽक़-ॡঅ-ঌএ-ঐও-নপ-রলশ-হড়-ঢ়য়-ৡৰ-ৱਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઋઍએ-ઑઓ-નપ-રલ-ળવ-હઽૠଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଶ-ହଽଡ଼-ଢ଼ୟ-ୡஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-வஷ-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠ-ౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹೞೠ-ೡഅ-ഌഎ-ഐഒ-നപ-ഹൠ-ൡก-ฮะา-ำเ-ๅກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ຮະາ-ຳຽເ-ໄཀ-ཇཉ-ཀྵႠ-Ⴥა-ჶᄀᄂ-ᄃᄅ-ᄇᄉᄋ-ᄌᄎ-ᄒᄼᄾᅀᅌᅎᅐᅔ-ᅕᅙᅟ-ᅡᅣᅥᅧᅩᅭ-ᅮᅲ-ᅳᅵᆞᆨᆫᆮ-ᆯᆷ-ᆸᆺᆼ-ᇂᇫᇰᇹḀ-ẛẠ-ỹἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼΩK-Å℮ↀ-ↂぁ-ゔァ-ヺㄅ-ㄬ가-힣一-龥〇〡-〩_]";Vr.NCNAME=new RegExp("^"+Vr.nameStartChar+Vr.nameChar+"*$");Vr.dateTimeTypes=[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:"http://www.w3.org/2001/XMLSchema#duration"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#dateTime"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#date"},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#time"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:"http://www.w3.org/2001/XMLSchema#gYearMonth"},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:"http://www.w3.org/2001/XMLSchema#gYear"}];var rs=Vr.parseRDFaDOM,bs=function(){function i(e){Jt(this,i),this.store=e,this.bnodes={},this.why=null,this.reify=!1}return Yt(i,[{key:"frameFactory",value:function(t,n,r){return{NODE:1,ARC:2,parent:n,parser:t,store:t.store,element:r,lastChild:0,base:null,lang:null,node:null,nodeType:null,listIndex:1,rdfid:null,datatype:null,collection:!1,terminateFrame:function(){this.collection&&this.node.close()},addSymbol:function(a,l){l=Mr(l,this.base),this.node=this.store.sym(l),this.nodeType=a},loadTriple:function(){if(this.parent.parent.collection?this.parent.parent.node.append(this.node):this.store.add(this.parent.parent.node,this.parent.node,this.node,this.parser.why),this.parent.rdfid!=null){var a=this.store.sym(Mr("#"+this.parent.rdfid,this.base));this.store.add(a,this.store.sym(i.ns.RDF+"type"),this.store.sym(i.ns.RDF+"Statement"),this.parser.why),this.store.add(a,this.store.sym(i.ns.RDF+"subject"),this.parent.parent.node,this.parser.why),this.store.add(a,this.store.sym(i.ns.RDF+"predicate"),this.parent.node,this.parser.why),this.store.add(a,this.store.sym(i.ns.RDF+"object"),this.node,this.parser.why)}},isTripleToLoad:function(){return this.parent!=null&&this.parent.parent!=null&&this.nodeType===this.NODE&&this.parent.nodeType===this.ARC&&this.parent.parent.nodeType===this.NODE},addNode:function(a){this.addSymbol(this.NODE,a),this.isTripleToLoad()&&this.loadTriple()},addCollection:function(){this.nodeType=this.NODE,this.node=this.store.collection(),this.collection=!0,this.isTripleToLoad()&&this.loadTriple()},addCollectionArc:function(){this.nodeType=this.ARC},addBNode:function(a){a!=null?this.parser.bnodes[a]!=null?this.node=this.parser.bnodes[a]:this.node=this.parser.bnodes[a]=this.store.bnode():this.node=this.store.bnode(),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()},addArc:function(a){a===i.ns.RDF+"li"&&(a=i.ns.RDF+"_"+this.parent.listIndex,this.parent.listIndex++),this.addSymbol(this.ARC,a)},addLiteral:function(a){this.parent.datatype&&this.parent.datatype!==i.ns.RDF+"langString"?this.node=this.store.literal(a,this.store.sym(this.parent.datatype)):this.node=this.store.literal(a,this.lang),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()}}}},{key:"getAttributeNodeNS",value:function(t,n,r){var s=null;if(t.getAttributeNodeNS)s=t.getAttributeNodeNS(n,r);else for(var a=t.attributes,l,o,u=0;u<a.length;++u)if(l=a[u],l.namespaceURI===n&&(o=l.prefix?l.prefix+":"+r:r,o===l.nodeName)){s=l;break}return s}},{key:"parse",value:function(t,n,r){var s=t.childNodes;this.cleanParser();var a;if(t.nodeType===i.nodeType.DOCUMENT){for(var l=0;l<s.length;l++)if(s[l].nodeType===i.nodeType.ELEMENT){a=s[l];break}}else if(t.nodeType===i.nodeType.ELEMENT)a=t;else throw new Error("RDFParser: can't find root in "+n+". Halting. ");this.why=r;var o=this.frameFactory(this);return this.base=n,o.base=n,o.lang=null,this.parseDOM(this.buildFrame(o,a)),!0}},{key:"parseDOM",value:function(t){for(var n,r=(function(g){var k="";if(g.namespaceURI==null)throw new Error("RDF/XML syntax error: No namespace for "+g.localName+" in "+this.base);return g.namespaceURI&&(k=k+g.namespaceURI),g.localName?k=k+g.localName:g.nodeName&&(g.nodeName.indexOf(":")>=0?k=k+g.nodeName.split(":")[1]:k=k+g.nodeName),k}).bind(this),s=!0;t.parent;){var a=t.element,l=a.attributes;if(a.nodeType===i.nodeType.TEXT||a.nodeType===i.nodeType.CDATA_SECTION)t.parent.nodeType===t.NODE&&(t.addArc(i.ns.RDF+"value"),t=this.buildFrame(t)),t.addLiteral(a.nodeValue);else if(r(a)!==i.ns.RDF+"RDF")if(t.parent&&t.parent.collection&&(t.addCollectionArc(),t=this.buildFrame(t,t.element),t.parent.element=null),!t.parent||!t.parent.nodeType||t.parent.nodeType===t.ARC){var o=this.getAttributeNodeNS(a,i.ns.RDF,"about");if(n=this.getAttributeNodeNS(a,i.ns.RDF,"ID"),o&&n)throw new Error("RDFParser: "+a.nodeName+" has both rdf:id and rdf:about. Halting. Only one of these properties may be specified on a node.");if(!o&&n)t.addNode("#"+n.nodeValue),a.removeAttributeNode(n);else if(o==null&&n==null){var u=this.getAttributeNodeNS(a,i.ns.RDF,"nodeID");u?(t.addBNode(u.nodeValue),a.removeAttributeNode(u)):t.addBNode()}else t.addNode(o.nodeValue),a.removeAttributeNode(o);var f=this.getAttributeNodeNS(a,i.ns.RDF,"type");i.ns.RDF+"Description"!==r(a)&&(f={nodeValue:r(a)}),f!=null&&(this.store.add(t.node,this.store.sym(i.ns.RDF+"type"),this.store.sym(Mr(f.nodeValue,t.base)),this.why),f.nodeName&&a.removeAttributeNode(f));for(var h=l.length-1;h>=0;h--)this.store.add(t.node,this.store.sym(r(l[h])),this.store.literal(l[h].nodeValue,t.lang),this.why)}else{t.addArc(r(a)),this.reify&&(n=this.getAttributeNodeNS(a,i.ns.RDF,"ID"),n&&(t.rdfid=n.nodeValue,a.removeAttributeNode(n)));var d=this.getAttributeNodeNS(a,i.ns.RDF,"parseType"),c=this.getAttributeNodeNS(a,i.ns.RDF,"datatype");if(c&&(t.datatype=c.nodeValue,a.removeAttributeNode(c)),d){var p=d.nodeValue;p==="Literal"?(t.datatype=i.ns.RDF+"XMLLiteral",t=this.buildFrame(t),t.addLiteral(a.innerHTML||a.childNodes),s=!1):p==="Resource"?(t=this.buildFrame(t,t.element),t.parent.element=null,t.addBNode()):p==="Collection"&&(t=this.buildFrame(t,t.element),t.parent.element=null,t.addCollection()),a.removeAttributeNode(d)}if(l.length!==0){var _=this.getAttributeNodeNS(a,i.ns.RDF,"resource"),m=this.getAttributeNodeNS(a,i.ns.RDF,"nodeID");t=this.buildFrame(t),_?(t.addNode(_.nodeValue),a.removeAttributeNode(_)):m?(t.addBNode(m.nodeValue),a.removeAttributeNode(m)):t.addBNode();for(var y=l.length-1;y>=0;y--){var O=this.buildFrame(t);O.addArc(r(l[y])),r(l[y])===i.ns.RDF+"type"?this.buildFrame(O).addNode(l[y].nodeValue):this.buildFrame(O).addLiteral(l[y].nodeValue)}}else a.childNodes.length===0&&this.buildFrame(t).addLiteral("")}for(a=t.element;t.parent;){for(var T=t;a==null;)t=t.parent,a=t.element;var N=a.childNodes&&a.childNodes[t.lastChild];if(!N||!s){if(t.terminateFrame(),!(t=t.parent))break;a=t.element,s=!0}else if(N.nodeType!==i.nodeType.ELEMENT&&N.nodeType!==i.nodeType.TEXT&&N.nodeType!==i.nodeType.CDATA_SECTION||(N.nodeType===i.nodeType.TEXT||N.nodeType===i.nodeType.CDATA_SECTION)&&a.childNodes.length!==1)t.lastChild++;else{t.lastChild++,t=this.buildFrame(T,a.childNodes[t.lastChild-1]);break}}}}},{key:"cleanParser",value:function(){this.bnodes={},this.why=null}},{key:"buildFrame",value:function(t,n){var r=this.frameFactory(this,t,n);if(t&&(r.base=t.base,r.lang=t.lang),!n||n.nodeType===i.nodeType.TEXT||n.nodeType===i.nodeType.CDATA_SECTION)return r;var s=n.attributes,a=n.getAttributeNode("xml:base");a!=null&&(r.base=a.nodeValue,n.removeAttribute("xml:base"));var l=n.getAttributeNode("xml:lang");l!=null&&(r.lang=l.nodeValue,n.removeAttribute("xml:lang"));for(var o=s.length-1;o>=0;o--)if(s[o].nodeName.substr(0,3)==="xml"){if(s[o].name.slice(0,6)==="xmlns:"){var u=s[o].nodeValue;this.base&&(u=Mr(u,this.base)),this.store.setPrefixForURI(s[o].name.slice(6),u)}n.removeAttributeNode(s[o])}return r}}])}();qe(bs,"ns",{RDF:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDFS:"http://www.w3.org/2000/01/rdf-schema#"});qe(bs,"nodeType",{ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12});function Sb(i,e,t){var n,r,s,a=["INSERT","DELETE","WHERE"],l=wr("http://www.w3.org/ns/pim/patch#"),o=Wl(e,e,t,t,null,null,"",null),u={},f=function(m,y,O,T,N){return"Line "+(y+1)+" of <"+m+`>: Bad syntax:
   `+N+`
   at: "`+O.slice(T,T+30)+'"'};n=0;var h=e.sym(t+"#query");for(u.query=h;;){if(r=o.skipSpace(i,n),r<0)return u;if(i[r]===";"){if(n=o.skipSpace(i,r+1),n<0)return u;r=n}var d=!1;for(s=0;s<a.length;s++){var c=a[s];if(i.slice(r,r+c.length)===c){if(n=o.skipSpace(i,r+c.length),n<0)throw f(o._thisDoc,o.lines,i,r+c.length,"found EOF, needed {...} after "+c);if((c==="INSERT"||c==="DELETE")&&i.slice(n,n+4)==="DATA"){if(r=o.skipSpace(i,n+4),r<0)throw f(o._thisDoc,o.lines,i,n+4,"needed {...} after INSERT DATA "+c);n=r}var p=[];if(r=o.node(i,n,p),r<0)throw f(o._thisDoc,o.lines,i,n,"bad syntax or EOF in {...} after "+c);u[c.toLowerCase()]=p[0],e.add(h,l(c.toLowerCase()),p[0]),d=!0,n=r}}if(!d&&i.slice(r,r+7)==="@prefix"){if(n=o.directive(i,r),n<0)throw f(o._thisDoc,o.lines,i,n,"bad syntax or EOF after @prefix ");n=o.checkDot(i,n),d=!0}if(!d)throw f(o._thisDoc,o.lines,i,r,"Unknown syntax at start of statememt: '"+i.slice(r).slice(0,20)+"'")}}function wl(i,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"text/turtle",r=arguments.length>4?arguments[4]:void 0;n=n||ri,n=n.split(";")[0];try{if(n===sp||n===ri){var s=Wl(e,e,t,t,null,null,"",null);s.loadBuf(i),o()}else if(n===ta){var a=new bs(e);a.parse(Di(i),t,e.sym(t)),o()}else if(n===_l)rs(Di(i,{contentType:_l}),e,t),o();else if(n===gu)rs(Di(i,{contentType:gu}),e,t),o();else if(n===kg||n===Dg)Sb(i,e,t),o();else if(n===dl)r_(i,e,t,o);else if(n===pl||n===hl){var l=new o_({factory:bl});f(null,i)}else throw n===void 0?new Error("contentType is undefined"):new Error("Don't know how to parse "+n+" yet")}catch(d){u(d)}wl.handled={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/sparql-update":!0,"application/sparql-update-single-match":!0,"application/ld+json":!0,"application/nquads":!0,"application/n-quads":!0};function o(){if(r)r(null,e);else return}function u(d){if(n!==dl||n!==pl||n!==hl)if(r)r(d,e);else{var c=new Error(""+d+" while trying to parse <"+t+"> as "+n);throw c.cause=d,c}}function f(d,c){try{l.parse(c,h)}catch(p){r(p,e)}}function h(d,c){c?e.add(c.subject,c.predicate,c.object,c.graph):r(d,e)}}var yl={exports:{}};(function(i,e){var t=typeof self<"u"?self:ls,n=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(a){var l={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function o(I){return I&&DataView.prototype.isPrototypeOf(I)}if(l.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(I){return I&&u.indexOf(Object.prototype.toString.call(I))>-1};function h(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(I))throw new TypeError("Invalid character in header field name");return I.toLowerCase()}function d(I){return typeof I!="string"&&(I=String(I)),I}function c(I){var x={next:function(){var j=I.shift();return{done:j===void 0,value:j}}};return l.iterable&&(x[Symbol.iterator]=function(){return x}),x}function p(I){this.map={},I instanceof p?I.forEach(function(x,j){this.append(j,x)},this):Array.isArray(I)?I.forEach(function(x){this.append(x[0],x[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(x){this.append(x,I[x])},this)}p.prototype.append=function(I,x){I=h(I),x=d(x);var j=this.map[I];this.map[I]=j?j+", "+x:x},p.prototype.delete=function(I){delete this.map[h(I)]},p.prototype.get=function(I){return I=h(I),this.has(I)?this.map[I]:null},p.prototype.has=function(I){return this.map.hasOwnProperty(h(I))},p.prototype.set=function(I,x){this.map[h(I)]=d(x)},p.prototype.forEach=function(I,x){for(var j in this.map)this.map.hasOwnProperty(j)&&I.call(x,this.map[j],j,this)},p.prototype.keys=function(){var I=[];return this.forEach(function(x,j){I.push(j)}),c(I)},p.prototype.values=function(){var I=[];return this.forEach(function(x){I.push(x)}),c(I)},p.prototype.entries=function(){var I=[];return this.forEach(function(x,j){I.push([j,x])}),c(I)},l.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function _(I){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}function m(I){return new Promise(function(x,j){I.onload=function(){x(I.result)},I.onerror=function(){j(I.error)}})}function y(I){var x=new FileReader,j=m(x);return x.readAsArrayBuffer(I),j}function O(I){var x=new FileReader,j=m(x);return x.readAsText(I),j}function T(I){for(var x=new Uint8Array(I),j=new Array(x.length),re=0;re<x.length;re++)j[re]=String.fromCharCode(x[re]);return j.join("")}function N(I){if(I.slice)return I.slice(0);var x=new Uint8Array(I.byteLength);return x.set(new Uint8Array(I)),x.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(I){this._bodyInit=I,I?typeof I=="string"?this._bodyText=I:l.blob&&Blob.prototype.isPrototypeOf(I)?this._bodyBlob=I:l.formData&&FormData.prototype.isPrototypeOf(I)?this._bodyFormData=I:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)?this._bodyText=I.toString():l.arrayBuffer&&l.blob&&o(I)?(this._bodyArrayBuffer=N(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(I)||f(I))?this._bodyArrayBuffer=N(I):this._bodyText=I=Object.prototype.toString.call(I):this._bodyText="",this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var I=_(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?_(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var I=_(this);if(I)return I;if(this._bodyBlob)return O(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(T(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(S)}),this.json=function(){return this.text().then(JSON.parse)},this}var k=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(I){var x=I.toUpperCase();return k.indexOf(x)>-1?x:I}function R(I,x){x=x||{};var j=x.body;if(I instanceof R){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,x.headers||(this.headers=new p(I.headers)),this.method=I.method,this.mode=I.mode,this.signal=I.signal,!j&&I._bodyInit!=null&&(j=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=x.credentials||this.credentials||"same-origin",(x.headers||!this.headers)&&(this.headers=new p(x.headers)),this.method=w(x.method||this.method||"GET"),this.mode=x.mode||this.mode||null,this.signal=x.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&j)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(j)}R.prototype.clone=function(){return new R(this,{body:this._bodyInit})};function S(I){var x=new FormData;return I.trim().split("&").forEach(function(j){if(j){var re=j.split("="),Z=re.shift().replace(/\+/g," "),$=re.join("=").replace(/\+/g," ");x.append(decodeURIComponent(Z),decodeURIComponent($))}}),x}function B(I){var x=new p,j=I.replace(/\r?\n[\t ]+/g," ");return j.split(/\r?\n/).forEach(function(re){var Z=re.split(":"),$=Z.shift().trim();if($){var G=Z.join(":").trim();x.append($,G)}}),x}g.call(R.prototype);function D(I,x){x||(x={}),this.type="default",this.status=x.status===void 0?200:x.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in x?x.statusText:"OK",this.headers=new p(x.headers),this.url=x.url||"",this._initBody(I)}g.call(D.prototype),D.prototype.clone=function(){return new D(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},D.error=function(){var I=new D(null,{status:0,statusText:""});return I.type="error",I};var L=[301,302,303,307,308];D.redirect=function(I,x){if(L.indexOf(x)===-1)throw new RangeError("Invalid status code");return new D(null,{status:x,headers:{location:I}})},a.DOMException=s.DOMException;try{new a.DOMException}catch{a.DOMException=function(x,j){this.message=x,this.name=j;var re=Error(x);this.stack=re.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function A(I,x){return new Promise(function(j,re){var Z=new R(I,x);if(Z.signal&&Z.signal.aborted)return re(new a.DOMException("Aborted","AbortError"));var $=new XMLHttpRequest;function G(){$.abort()}$.onload=function(){var X={status:$.status,statusText:$.statusText,headers:B($.getAllResponseHeaders()||"")};X.url="responseURL"in $?$.responseURL:X.headers.get("X-Request-URL");var oe="response"in $?$.response:$.responseText;j(new D(oe,X))},$.onerror=function(){re(new TypeError("Network request failed"))},$.ontimeout=function(){re(new TypeError("Network request failed"))},$.onabort=function(){re(new a.DOMException("Aborted","AbortError"))},$.open(Z.method,Z.url,!0),Z.credentials==="include"?$.withCredentials=!0:Z.credentials==="omit"&&($.withCredentials=!1),"responseType"in $&&l.blob&&($.responseType="blob"),Z.headers.forEach(function(X,oe){$.setRequestHeader(oe,X)}),Z.signal&&(Z.signal.addEventListener("abort",G),$.onreadystatechange=function(){$.readyState===4&&Z.signal.removeEventListener("abort",G)}),$.send(typeof Z._bodyInit>"u"?null:Z._bodyInit)})}return A.polyfill=!0,s.fetch||(s.fetch=A,s.Headers=p,s.Request=R,s.Response=D),a.Headers=p,a.Request=R,a.Response=D,a.fetch=A,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var r=n;e=r.fetch,e.default=r.fetch,e.fetch=r.fetch,e.Headers=r.Headers,e.Request=r.Request,e.Response=r.Response,i.exports=e})(yl,yl.exports);var Va=yl.exports;const Ib=oa(Va);function Pb(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=Rb(i))||e){t&&(i=t);var n=0,r=function(){};return{s:r,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(u){throw u},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){t=t.call(i)},n:function(){var u=t.next();return s=u.done,u},e:function(u){a=!0,l=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(a)throw l}}}}function Rb(i,e){if(i){if(typeof i=="string")return af(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return af(i,e)}}function af(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function ci(i,e,t){return e=sr(e),Tn(i,f_()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function f_(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f_=function(){return!!i})()}var Fb={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/ld+json":!0},c_={rdf:ta,owl:ta,n3:"text/n3",ttl:"text/turtle",nt:"text/n3",acl:"text/n3",html:"text/html",xml:"text/xml"},d_=function(e){return{link:wr("http://www.w3.org/2007/ont/link#",e),http:wr("http://www.w3.org/2007/ont/http#",e),httph:wr("http://www.w3.org/2007/ont/httph#",e),rdf:wr("http://www.w3.org/1999/02/22-rdf-syntax-ns#",e),rdfs:wr("http://www.w3.org/2000/01/rdf-schema#",e),dc:wr("http://purl.org/dc/elements/1.1/",e),ldp:wr("http://www.w3.org/ns/ldp#",e)}},dn=d_(),Gn=Yt(function i(e,t){Jt(this,i),qe(this,"response",void 0),qe(this,"dom",void 0),this.response=e,this.dom=t});qe(Gn,"pattern",void 0);var Zl=function(i){function e(){return Jt(this,e),ci(this,e,arguments)}return Er(e,i),Yt(e,[{key:"parse",value:function(n,r,s){var a=n.store;this.dom||(this.dom=Di(r));var l=this.dom.documentElement;if(l.nodeName==="parsererror")return n.failFetch(s,"Badly formed XML in "+s.resource.value,"parse_error");var o=new bs(a);try{o.parse(this.dom,s.original.value,s.original)}catch(u){return n.failFetch(s,"Syntax error parsing RDF/XML! "+u,"parse_error")}return s.noMeta||a.add(s.original,dn.rdf("type"),dn.link("RDFDocument"),n.appNode),n.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"RDFXMLHandler"}},{key:"register",value:function(n){n.mediatypes[ta]={q:.9}}}])}(Gn);Zl.pattern=new RegExp("application/rdf\\+xml");var ii=function(i){function e(){return Jt(this,e),ci(this,e,arguments)}return Er(e,i),Yt(e,[{key:"parse",value:function(n,r,s){var a,l;this.dom||(this.dom=Di(r));var o=n.store,u=this.dom.getElementsByTagName("title");u.length>0&&o.add(s.resource,dn.dc("title"),o.rdfFactory.literal(u[0].textContent),s.resource);for(var f=this.dom.getElementsByTagName("link"),h=f.length-1;h>=0;h--)a=f[h].getAttribute("rel"),l=!1,a||(a=f[h].getAttribute("rev"),l=!0),a&&n.linkData(s.original,a,f[h].getAttribute("href"),s.resource,l);for(var d=this.dom.getElementsByTagName("script"),c=0;c<d.length;c++){var p=d[c].getAttribute("type");Fb[p]&&(wl(d[c].textContent,o,s.original.value,p),wl(d[c].textContent,o,s.original.value,p))}if(s.noMeta||o.add(s.resource,dn.rdf("type"),dn.link("WebPage"),n.appNode),!s.noRDFa&&rs)try{rs(this.dom,o,s.original.value)}catch(m){var _="Error trying to parse "+s.resource+` as RDFa:
`+m+`:
`+m.stack;return n.failFetch(s,_,"parse_error")}return n.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"XHTMLHandler"}},{key:"register",value:function(n){n.mediatypes[_l]={}}}])}(Gn);ii.pattern=new RegExp("application/xhtml");var ns=function(i){function e(){return Jt(this,e),ci(this,e,arguments)}return Er(e,i),Yt(e,[{key:"parse",value:function(n,r,s){for(var a=Di(r),l=0;l<a.childNodes.length;l++){var o=a.childNodes[l];if(e.isElement(o)){var u=o.namespaceURI;if(u&&u===u.rdf){n.addStatus(s.req,"Has XML root element in the RDF namespace, so assume RDF/XML.");var f=new Zl(this.response,a);return f.parse(n,r,s)}break}}if(a.doctype&&a.doctype.name==="html"&&a.doctype.publicId.match(/^-\/\/W3C\/\/DTD XHTML/)&&a.doctype.systemId.match(/http:\/\/www.w3.org\/TR\/xhtml/)){n.addStatus(s.req,`Has XHTML DOCTYPE. Switching to XHTML Handler.
`);var h=new ii(this.response,a);return h.parse(n,r,s)}var d=a.getElementsByTagName("html")[0];if(d){var c=d.getAttribute("xmlns");if(c&&c.match(/^http:\/\/www.w3.org\/1999\/xhtml/)){n.addStatus(s.req,`Has a default namespace for XHTML. Switching to XHTMLHandler.
`);var p=new ii(this.response,a);return p.parse(n,r,s)}}return n.failFetch(s,`Unsupported dialect of XML: not RDF or XHTML namespace, etc.
`+r.slice(0,80),901)}}],[{key:"toString",value:function(){return"XMLHandler"}},{key:"register",value:function(n){n.mediatypes["text/xml"]={q:.5},n.mediatypes["application/xml"]={q:.5}}},{key:"isElement",value:function(n){return n.nodeType===Node.ELEMENT_NODE}}])}(Gn);ns.pattern=new RegExp("(text|application)/(.*)xml");var h_=function(i){function e(){return Jt(this,e),ci(this,e,arguments)}return Er(e,i),Yt(e,[{key:"parse",value:function(n,r,s){var a=n.store;if(v_(r)){n.addStatus(s.req,`Has an XML declaration. We'll assume it's XHTML as the content-type was text/html.
`);var l=new ii(this.response);return l.parse(n,r,s)}if(Ob(r)){n.addStatus(s.req,`Has XHTML DOCTYPE. Switching to XHTMLHandler.
`);var o=new ii(this.response);return o.parse(n,r,s)}if(Bb(r)){n.addStatus(s.req,`Has default namespace for XHTML, so switching to XHTMLHandler.
`);var u=new ii(this.response);return u.parse(n,r,s)}var f=new RegExp("<title>([\\s\\S]+?)</title>","im").exec(r);return f&&a.add(s.resource,dn.dc("title"),a.rdfFactory.literal(f[1]),s.resource),a.add(s.resource,dn.rdf("type"),dn.link("WebPage"),n.appNode),n.addStatus(s.req,"non-XML HTML document, not parsed for data."),n.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"HTMLHandler"}},{key:"register",value:function(n){n.mediatypes["text/html"]={q:.9}}}])}(Gn);h_.pattern=new RegExp("text/html");var p_=function(i){function e(){return Jt(this,e),ci(this,e,arguments)}return Er(e,i),Yt(e,[{key:"parse",value:function(n,r,s,a){var l=n.store;return new Promise(function(o,u){try{r_(r,l,s.original.value,function(){o(n.doneFetch(s,a))})}catch(h){var f="Error trying to parse "+s.resource+` as JSON-LD:
`+h;o(n.failFetch(s,f,"parse_error",a))}})}}],[{key:"toString",value:function(){return"JsonLdHandler"}},{key:"register",value:function(n){n.mediatypes["application/ld+json"]={q:.9}}}])}(Gn);p_.pattern=/application\/ld\+json/;var __=function(i){function e(){return Jt(this,e),ci(this,e,arguments)}return Er(e,i),Yt(e,[{key:"parse",value:function(n,r,s){if(v_(r)){n.addStatus(s.req,"Warning: "+s.resource+` has an XML declaration. We'll assume it's XML but its content-type wasn't XML.
`);var a=new ns(this.response);return a.parse(n,r,s)}if(r.slice(0,500).match(/xmlns:/)){n.addStatus(s.req,`May have an XML namespace. We'll assume it's XML but its content-type wasn't XML.
`);var l=new ns(this.response);return l.parse(n,r,s)}return n.addStatus(s.req,"Plain text document, no known RDF semantics."),n.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"TextHandler"}},{key:"register",value:function(n){n.mediatypes["text/plain"]={q:.5}}}])}(Gn);__.pattern=new RegExp("text/plain");var m_=function(i){function e(){return Jt(this,e),ci(this,e,arguments)}return Er(e,i),Yt(e,[{key:"parse",value:function(n,r,s,a){var l=n.store,o=Wl(l,l,s.original.value,s.original.value,null,null,"",null);try{o.loadBuf(r)}catch(f){var u="Error trying to parse "+s.resource+` as Notation3:
`+f;return n.failFetch(s,u,"parse_error",a)}return n.addStatus(s.req,"N3 parsed: "+o.statementCount+" triples in "+o.lines+" lines."),n.store.add(s.original,dn.rdf("type"),dn.link("RDFDocument"),n.appNode),n.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"N3Handler"}},{key:"register",value:function(n){n.mediatypes["text/n3"]={q:"1.0"},n.mediatypes["text/turtle"]={q:1}}}])}(Gn);m_.pattern=new RegExp("(application|text)/(x-)?(rdf\\+)?(n3|turtle)");var El={RDFXMLHandler:Zl,XHTMLHandler:ii,XMLHandler:ns,HTMLHandler:h_,TextHandler:__,N3Handler:m_,JsonLdHandler:p_};function Ob(i){var e=i.indexOf("<!DOCTYPE html"),t=i.indexOf(">");return e===-1||t===-1||e>t?!1:i.substr(e,t-e).indexOf("XHTML")!==-1}function v_(i){var e=i.match(/\s*<\?xml\s+version\s*=[^<>]+\?>/);return!!e}function Bb(i){var e=i.match(/[^(<html)]*<html\s+[^<]*xmlns=['"]http:\/\/www.w3.org\/1999\/xhtml["'][^<]*>/);return!!e}var Fi=function(){function i(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Jt(this,i),qe(this,"store",void 0),qe(this,"timeout",void 0),qe(this,"_fetch",void 0),qe(this,"mediatypes",void 0),qe(this,"appNode",void 0),qe(this,"requested",void 0),qe(this,"timeouts",void 0),qe(this,"redirectedTo",void 0),qe(this,"fetchQueue",void 0),qe(this,"fetchCallbacks",void 0),qe(this,"nonexistent",void 0),qe(this,"lookedUp",void 0),qe(this,"handlers",void 0),qe(this,"ns",void 0),qe(this,"fireCallbacks",void 0),this.store=e||new _a,this.ns=d_(this.store.rdfFactory),this.timeout=n.timeout||3e4,this._fetch=n.fetch||typeof global<"u"&&(global.solidFetcher||global.solidFetch)||typeof window<"u"&&(window.solidFetcher||window.solidFetch)||Ib,!this._fetch)throw new Error("No _fetch function available for Fetcher");this.appNode=this.store.sym("chrome://TheCurrentSession"),this.store.fetcher=this,this.requested={},this.timeouts={},this.redirectedTo={},this.fetchQueue={},this.fetchCallbacks={},this.nonexistent={},this.lookedUp={},this.handlers=[],this.mediatypes={"image/*":{q:.9},"*/*":{q:.1}},v2(this,["request","fail","refresh","retract","done"]),Object.keys(n.handlers||El).map(function(r){return t.addHandler(El[r])})}return Yt(i,[{key:"load",value:function(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r=Object.assign({},r),t instanceof Array)return Promise.all(t.map(function(m){return n.load(m,Object.assign({},r))}));var s=t,a=bi(s);a=a.split("#")[0],r=this.initFetchOptions(a,r);var l=this.appNode,o=this.store,u=o.statementsMatching(void 0,this.ns.link("requestedURI"),o.sym(a),l).map(function(m){return m.subject}),f=Pb(u),h;try{for(f.s();!(h=f.n()).done;){var d=h.value,c=o.any(d,this.ns.link("response"),null,l);if(c!=null){var p=o.statementsMatching(c,this.ns.link("outOfDate"),!0,l);o.remove(p),r.force=!0,r.clearPreviousData=!0}}}catch(m){f.e(m)}finally{f.f()}var _=this.initFetchOptions(a,r);return this.pendingFetchPromise(a,_.baseURI,_)}},{key:"pendingFetchPromise",value:function(){var e=Eu(Pa.mark(function n(r,s,a){var l=this,o;return Pa.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(f.t0=!a.force,!f.t0){f.next=5;break}return f.next=4,this.fetchQueue[s];case 4:f.t0=f.sent;case 5:if(!f.t0){f.next=9;break}o=this.fetchQueue[s],f.next=12;break;case 9:o=Promise.race([this.setRequestTimeout(r,a),this.fetchUri(r,a)]),this.fetchQueue[s]=o,this.cleanupFetchRequest(s,void 0,this.timeout);case 12:return f.abrupt("return",o.then(function(h){return r in l.timeouts&&(l.timeouts[r].forEach(clearTimeout),delete l.timeouts[r]),h}));case 13:case"end":return f.stop()}},n,this)}));function t(n,r,s){return e.apply(this,arguments)}return t}()},{key:"cleanupFetchRequest",value:function(t,n,r){var s=this;n!==void 0&&console.warn("_options is deprecated"),this.timeouts[t]=(this.timeouts[t]||[]).concat(setTimeout(function(){s.isPending(t)||delete s.fetchQueue[t]},r))}},{key:"initFetchOptions",value:function(t,n){var r=this.store,s=!n.method||n.method.toUpperCase()==="GET";s||(n.force=!0),n.resource=r.rdfFactory.namedNode(t),n.baseURI=n.baseURI||t,n.original=r.rdfFactory.namedNode(n.baseURI),n.req=r.bnode(),n.headers=n.headers||new Va.Headers,n.contentType&&(n.headers["content-type"]=n.contentType),n.force&&(n.cache="no-cache");var a=this.acceptString();n.headers.accept=a;var l=i.offlineOverride(t);n.requestedURI=l,i.setCredentials(l,n);var o=i.proxyIfNecessary(l);return l!==o&&(n.proxyUsed=!0),n.actualProxyURI=o,n}},{key:"fetchUri",value:function(t,n){var r=this;if(!t)return Promise.reject(new Error("Cannot fetch an empty uri"));if(i.unsupportedProtocol(t))return this.failFetch(n,"fetcher: Unsupported protocol","unsupported_protocol");var s=this.getState(t);if(n.force)delete this.nonexistent[t];else{if(s==="fetched")return Promise.resolve(this.doneFetch(n,{status:200,ok:!0,statusText:"Already loaded into quadstore."}));if(s==="failed"&&this.requested[t]===404){var a="Previously failed: "+this.requested[t],l={url:t,status:this.requested[t],statusText:a,responseText:a,headers:new Va.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return this.failFetch(n,a,this.requested[t],l)}}this.fireCallbacks("request",[t]),this.requested[t]=!0,n.noMeta||this.saveRequestMetadata(t,n);var o=n.actualProxyURI;return this._fetch(o,n).then(function(u){return r.handleResponse(u,t,n)},function(u){var f={url:o,status:999,statusText:(u.name||"network failure")+": "+(u.errno||u.code||u.type),responseText:u.message,headers:new Va.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return r.handleError(f,t,n)})}},{key:"nowOrWhenFetched",value:function(t,n,r){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=bi(t);typeof n=="function"?r=n:typeof n>"u"||(wu(n)?s.referringTerm=n:s=n),this.load(a,s).then(function(l){if(r)if(l)if(l.ok)r(!0,"OK",l);else{var o="HTTP error: Status "+l.status+" ("+l.statusText+")";l.responseText&&(o+=" "+l.responseText),r(!1,o,l)}else{var u="@@ nowOrWhenFetched:  no response object!";r(!1,u)}},function(l){var o=l.message||l.statusText;o="Failed to load  <"+a+"> "+o,l.response&&l.response.status&&(o+=" status: "+l.response.status),r(!1,o,l.response)})}},{key:"addStatus",value:function(t,n){var r=new Date;n="["+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds()+"."+r.getMilliseconds()+"] "+n;var s=this.store,a=s.the(t,this.ns.link("status"));Ul(a)&&a.append(s.rdfFactory.literal(n))}},{key:"failFetch",value:function(t,n,r,s){this.addStatus(t.req,n),t.noMeta||this.store.add(t.original,this.ns.link("error"),this.store.rdfFactory.literal(n));var a=(t.method||"GET").toUpperCase(),l=a==="GET"||a==="HEAD";l&&(t.resource.equals(t.original),this.requested[Ei(t.original.value)]=r,this.fireCallbacks("fail",[t.original.value,n]));var o=new Error("Fetcher: "+n);return o.status=r,o.statusText=n,o.response=s,Promise.reject(o)}},{key:"linkData",value:function(t,n,r,s,a){if(r){var l=this.store,o,u=l.rdfFactory.namedNode(Mr(r,t.value));if(n==="alternate"||n==="seeAlso"||n==="meta"||n==="describedby"){if(u.value===t.value)return;o=this.ns.rdfs("seeAlso")}else n==="type"?o=l.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):o=l.rdfFactory.namedNode(Mr(encodeURIComponent(n),"http://www.iana.org/assignments/link-relations/"));a?l.add(u,o,t,s):l.add(t,o,u,s)}}},{key:"parseLinkHeader",value:function(t,n,r){if(t){var s=/<[^>]*>\s*(\s*;\s*[^()<>@,;:"/[\]?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*")))*(,|$)/g,a=/[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*"))/g,l=t.match(s);if(l!=null)for(var o=0;o<l.length;o++){var u=l[o].split(">"),f=u[0].substring(1),h=u[1],d=h.match(a);if(d==null)return;for(var c=0;c<d.length;c++){var p=d[c],_=p.split("="),m=_[1].replace(/["']/g,"");this.linkData(n,m,f,r)}}}}},{key:"doneFetch",value:function(t,n){return this.addStatus(t.req,"Done."),this.requested[t.original.value]="done",this.fireCallbacks("done",[t.original.value]),n.req=t.req,n}},{key:"nowKnownAs",value:function(t,n){this.lookedUp[t.value]?this.lookedUp[n.value]||this.lookUpThing(n,t):this.lookedUp[n.value]&&(this.lookedUp[t.value]||this.lookUpThing(t,n))}},{key:"putBack",value:function(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=bi(t),a=new dr(s).doc();return r.contentType=r["content-type"]||r["Content-Type"]||r.contentType||ri,r.contentType==="application/ld+json"?new Promise(function(l,o){sa(a,n.store,a.uri,r.contentType,function(u,f){u?o(u):(r.data=f,n.webOperation("PUT",t,r).then(function(h){return l(h)}).catch(function(h){return o(h)}))})}):(r.data=sa(a,this.store,a.value,r.contentType),this.webOperation("PUT",s,r))}},{key:"webCopy",value:function(t,n,r){var s=this;return this.webOperation("GET",t).then(function(a){return s.webOperation("PUT",n,{data:a.responseText,contentType:r})})}},{key:"delete",value:function(t,n){var r=this;return this.webOperation("DELETE",t,n).then(function(s){return r.requested[t]=404,r.nonexistent[t]=!0,r.unload(r.store.rdfFactory.namedNode(t)),s})}},{key:"createIfNotExists",value:function(){var e=Eu(Pa.mark(function n(r){var s,a,l,o,u=arguments;return Pa.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return s=u.length>1&&u[1]!==void 0?u[1]:ri,a=u.length>2&&u[2]!==void 0?u[2]:"",l=this,h.prev=3,h.next=6,l.load(r);case 6:o=h.sent,h.next=26;break;case 9:if(h.prev=9,h.t0=h.catch(3),h.t0.response.status!==404){h.next=25;break}return h.prev=12,h.next=15,l.webOperation("PUT",r.value,{data:a,contentType:s});case 15:o=h.sent,h.next=21;break;case 18:throw h.prev=18,h.t1=h.catch(12),h.t1;case 21:return delete l.requested[r.value],h.abrupt("return",o);case 25:throw h.t0;case 26:return h.abrupt("return",o);case 27:case"end":return h.stop()}},n,this,[[3,9],[12,18]])}));function t(n){return e.apply(this,arguments)}return t}()},{key:"createContainer",value:function(t,n,r){var s={"content-type":ri,link:this.ns.ldp("BasicContainer")+'; rel="type"'};n&&(s.slug=n);var a={headers:s};return r&&(a.body=r),this.webOperation("POST",t,a)}},{key:"invalidateCache",value:function(t){var n=bi(t),r=this;if(r.fetchQueue&&r.fetchQueue[n]){var s=r.fetchQueue[n];s.PromiseStatus,delete r.fetchQueue[n]}if(r.requested[n]&&r.requested[n]!=="done"&&r.requested[n]!=="failed"&&r.requested[n]!==404){var a="Rdflib: fetcher: Destructive operation on <".concat(r.requested[n],"> file being fetched! ")+n;console.error(a)}else delete r.requested[n],delete r.nonexistent[n]}},{key:"webOperation",value:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=bi(n);r.method=t,r.body=r.data||r.body,r.force=!0;var a=this;if(r.body&&!r.contentType)throw new Error("Web operation sending data must have a defined contentType.");return r.contentType&&(r.headers=r.headers||{},r.headers["content-type"]=r.contentType),i.setCredentials(s,r),new Promise(function(l,o){a._fetch(s,r).then(function(u){if(u.ok)(t==="PUT"||t==="PATCH"||t==="POST"||t==="DELETE")&&a.invalidateCache(s),u.text?u.text().then(function(d){u.responseText=d,l(u)}):l(u);else{var f="Web error: "+u.status;u.statusText&&(f+=" ("+u.statusText+")"),f+=" on "+t+" of <"+s+">",u.responseText&&(f+=": "+u.responseText);var h=new Error(f);h.response=u,o(h)}},function(u){var f="Fetch error for "+t+" of <"+s+">:"+u;o(new Error(f))})})}},{key:"lookUpThing",value:function(t,n){var r=this,s=this.store.uris(t);return s=s.map(function(a){return Ei(a)}),s.forEach(function(a){r.lookedUp[a]=!0}),this.load(s,{referringTerm:n})}},{key:"getHeader",value:function(t,n){for(var r=this.store,s=t.value,a=r.each(void 0,this.ns.link("requestedURI"),r.rdfFactory.literal(s)),l=0;l<a.length;l++){var o=a[l];if(o!==void 0){var u=r.any(o,this.ns.link("response"));if(u!==void 0&&r.anyValue(u,this.ns.http("status"))&&r.anyValue(u,this.ns.http("status")).startsWith("2")){var f=r.each(u,this.ns.httph(n.toLowerCase()));return f.length?f.map(function(h){return h.value}):[]}}}}},{key:"saveRequestMetadata",value:function(t,n){var r=n.req,s=this.store,a=n.referringTerm;this.addStatus(n.req,"Accept: "+n.headers.accept),wu(a)&&s.add(s.rdfFactory.namedNode(t),this.ns.link("requestedBy"),a,this.appNode),n.original&&n.original.value!==t&&s.add(r,this.ns.link("orginalURI"),s.rdfFactory.literal(n.original.value),this.appNode);var l=new Date,o="["+l.getHours()+":"+l.getMinutes()+":"+l.getSeconds()+"] ";s.add(r,this.ns.rdfs("label"),s.rdfFactory.literal(o+" Request for "+t),this.appNode),s.add(r,this.ns.link("requestedURI"),s.rdfFactory.literal(t),this.appNode),s.add(r,this.ns.link("status"),s.collection(),this.appNode)}},{key:"saveResponseMetadata",value:function(t,n){var r=this,s=this.store,a=s.bnode();return s.add(n.req,this.ns.link("response"),a,this.appNode),s.add(a,this.ns.http("status"),s.rdfFactory.literal(t.status),this.appNode),s.add(a,this.ns.http("statusText"),s.rdfFactory.literal(t.statusText),this.appNode),t.headers.forEach(function(l,o){s.add(a,r.ns.httph(o),r.store.rdfFactory.literal(l),r.appNode),o==="content-type"&&s.add(n.resource,r.ns.rdf("type"),s.rdfFactory.namedNode(m2(l).value),r.appNode)}),a}},{key:"objectRefresh",value:function(t){var n=this.store.uris(t);if(typeof n<"u")for(var r=0;r<n.length;r++)this.refresh(this.store.rdfFactory.namedNode(Ei(n[r])))}},{key:"refresh",value:function(t,n){this.fireCallbacks("refresh",arguments),this.nowOrWhenFetched(t,{force:!0,clearPreviousData:!0},n)}},{key:"refreshIfExpired",value:function(t,n){var r=this.getHeader(t,"Expires");!r||new Date(r[0]).getTime()<=new Date().getTime()?this.refresh(t,n):n(!0,"Not expired",{})}},{key:"retract",value:function(t){this.store.removeMany(void 0,void 0,void 0,t),t.value&&delete this.requested[Ei(t.value)],this.fireCallbacks("retract",arguments)}},{key:"getState",value:function(t){return typeof this.requested[t]>"u"?"unrequested":this.requested[t]===!0?"requested":this.requested[t]==="done"?"fetched":this.requested[t]==="redirected"?this.getState(this.redirectedTo[t]):"failed"}},{key:"isPending",value:function(t){return this.requested[t]===!0}},{key:"unload",value:function(t){this.store.removeDocument(t),delete this.requested[t.value]}},{key:"addHandler",value:function(t){this.handlers.push(t),t.register(this)}},{key:"retryNoCredentials",value:function(t,n){n.retriedWithNoCredentials=!0,delete this.requested[t],delete this.fetchQueue[t];var r=Object.assign({},n,{credentials:"omit"});return this.addStatus(n.req,"Abort: Will retry with credentials SUPPRESSED to see if that helps"),this.load(t,r)}},{key:"isCrossSite",value:function(t){if(typeof document>"u"||!document.location)return!1;var n=Vg,r=""+document.location;return(n(r)&&n(t)&&n(r))!==n(t)}},{key:"handleError",value:function(t,n,r){if(this.isCrossSite(n)){if(r.credentials&&r.credentials==="include"&&!r.retriedWithNoCredentials)return this.retryNoCredentials(n,r);var s=i.crossSiteProxy(n);if(s&&!r.proxyUsed)return this.redirectToProxy(s,r)}var a;return t instanceof Error?a="Fetch error: "+t.message:(a=t.statusText,t.responseText&&(a+=" ".concat(t.responseText))),this.failFetch(r,a,t.status||998,t)}},{key:"addType",value:function(t,n,r,s){var a=n;if(s){var l=r.any(a,this.ns.link("requestedURI"));l&&l.value!==s&&r.add(r.rdfFactory.namedNode(s),this.ns.rdf("type"),t,this.appNode)}for(;;){var o=r.any(a,this.ns.link("requestedURI"));if(o&&o.value&&r.add(r.rdfFactory.namedNode(o.value),this.ns.rdf("type"),t,this.appNode),a=r.any(void 0,r.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#redirectedRequest"),a),!a)break;var u=r.any(a,r.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#response"));if(!u)break;var f=r.any(u,r.rdfFactory.namedNode("http://www.w3.org/2007/ont/http#status"));if(!f||f!=="301"&&f!=="302")break}}},{key:"handleResponse",value:function(t,n,r){var s=this,a=this.store,l=t.headers,o=r.req,u=this.saveResponseMetadata(t,r),f=this.normalizedContentType(r,l)||"",h=l.get("content-location");if(t.status===0)return this.handleError(t,n,r);if(t.status>=400)return t.status===404&&(this.nonexistent[r.original.value]=!0,this.nonexistent[n]=!0),this.saveErrorResponse(t,u).then(function(){var O=r.resource+" "+t.statusText;return s.failFetch(r,O,t.status,t)});var d=null,c=null;if(h&&(c=Mr(h,n),c!==n&&(d=c)),t.status===200){if(this.addType(this.ns.link("Document"),o,a,n),d&&this.addType(this.ns.link("Document"),o,a,d),r.clearPreviousData)for(var p=a.statementsMatching(void 0,void 0,void 0,r.resource).slice(),_=0;_<p.length;_++)a.removeStatement(p[_]);var m=f.includes("image/")||f.includes("application/pdf");f&&m&&(this.addType(a.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),o,a,n),d&&this.addType(a.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),o,a,d))}if(h){if(!r.force&&d&&this.requested[c]==="done")return this.doneFetch(r,t);this.requested[c]=!0}this.parseLinkHeader(l.get("link"),r.original,o);var y=this.handlerForContentType(f,t);return y?t.text().then(function(O){return t.responseText=O,y.parse(s,O,r,t)}):(this.addStatus(o,"Fetch over. No data handled."),this.doneFetch(r,t))}},{key:"saveErrorResponse",value:function(t,n){var r=this,s=this.store;return t.text().then(function(a){a.length>10&&s.add(n,r.ns.http("content"),s.rdfFactory.literal(a),n)})}},{key:"handlerForContentType",value:function(t,n){if(!t)return null;var r=this.handlers.find(function(s){return t.match(s.pattern)});return r?new r(n):null}},{key:"guessContentType",value:function(t){return c_[t.split(".").pop()]}},{key:"normalizedContentType",value:function(t,n){if(t.forceContentType)return t.forceContentType;var r=n.get("content-type");if(!r||r.includes("application/octet-stream")){var s=this.guessContentType(t.resource.value);if(s)return s}var a=Du(t.resource.value);return!r&&["file","chrome"].includes(a)?"text/xml":r}},{key:"redirectToProxy",value:function(t,n){var r=this;this.addStatus(n.req,"BLOCKED -> Cross-site Proxy to <"+t+">"),n.proxyUsed=!0;var s=this.store,a=n.req;n.noMeta||(s.add(a,this.ns.link("redirectedTo"),s.rdfFactory.namedNode(t),a),this.addStatus(a,"redirected to new request")),this.requested[n.resource.value]="redirected",this.redirectedTo[n.resource.value]=t;var l=Object.assign({},n);return l.baseURI=n.resource.value,this.fetchUri(t,l).then(function(o){return l.noMeta||s.add(a,r.ns.link("redirectedRequest"),l.req,r.appNode),o})}},{key:"setRequestTimeout",value:function(t,n){var r=this;return new Promise(function(s){r.timeouts[t]=(r.timeouts[t]||[]).concat(setTimeout(function(){r.isPending(t)&&!n.retriedWithNoCredentials&&!n.proxyUsed&&s(r.failFetch(n,"Request to ".concat(t," timed out"),"timeout"))},r.timeout))})}},{key:"addFetchCallback",value:function(t,n){this.fetchCallbacks[t]?this.fetchCallbacks[t].push(n):this.fetchCallbacks[t]=[n]}},{key:"acceptString",value:function(){var t="";for(var n in this.mediatypes){t!==""&&(t+=", "),t+=n;for(var r in this.mediatypes[n])t+=";"+r+"="+this.mediatypes[n][r]}return t}}],[{key:"crossSiteProxy",value:function(t){if(i.crossSiteProxyTemplate)return i.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(t))}},{key:"offlineOverride",value:function(t){var n=t,r;return typeof window<"u"&&window.panes&&(r=window.panes.UI)&&r.preferences&&r.preferences.get("offlineModeUsingLocalhost")&&n.slice(0,7)==="http://"&&n.slice(7,17)!=="localhost/"&&(n="http://localhost/"+n.slice(7)),n}},{key:"proxyIfNecessary",value:function(t){var n;if(typeof window<"u"&&window.panes&&(n=window.panes.UI)&&n.isExtension)return t;if(typeof $SolidTestEnvironment<"u"&&$SolidTestEnvironment.localSiteMap){var r=t.split("/").slice(2),s=function l(o,u){var f=u[o.shift()];return f?typeof f=="string"?f+o.join("/"):o?l(o,f):null:null},a=s(r,$SolidTestEnvironment.localSiteMap);if(a)return a}return i.crossSiteProxyTemplate&&typeof document<"u"&&document.location&&(""+document.location).slice(0,6)==="https:"&&t.slice(0,5)==="http:"?i.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(t)):t}},{key:"unsupportedProtocol",value:function(t){var n=Du(t);return n==="tel"||n==="mailto"||n==="urn"}},{key:"setCredentials",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};n.credentials===void 0&&(n.withCredentials!==void 0?n.credentials=n.withCredentials?"include":"omit":n.credentials="include")}}])}();qe(Fi,"HANDLERS",void 0);qe(Fi,"CONTENT_TYPE_BY_EXT",void 0);qe(Fi,"crossSiteProxyTemplate",void 0);Fi.HANDLERS=El;Fi.CONTENT_TYPE_BY_EXT=c_;function sf(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function lf(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sf(Object(t),!0).forEach(function(n){qe(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):sf(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}var Ua=lf(lf({},bl),{},{fetcher:function(e,t){return new Fi(e,t)},graph:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return new _a(e,t||{rdfFactory:bl})},lit:function(e,t,n){return this.literal(""+e,t||n)},st:function(e,t,n,r){return this.quad(e,t,n,r)}}),ws={};for(var Zs in Ua)typeof Ua[Zs]=="function"&&(ws[Zs]=Ua[Zs].bind(Ua));var Lb=ws.graph,g_=ws.namedNode,Ub=ws.literal;new Kp;qt.fromValue;un.nextId;let be,Xr=0,Ji=null;function za(){return(Ji===null||Ji.byteLength===0)&&(Ji=new Uint8Array(be.memory.buffer)),Ji}const Ha=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},jb=typeof Ha.encodeInto=="function"?function(i,e){return Ha.encodeInto(i,e)}:function(i,e){const t=Ha.encode(i);return e.set(t),{read:i.length,written:t.length}};function wn(i,e,t){if(t===void 0){const l=Ha.encode(i),o=e(l.length,1)>>>0;return za().subarray(o,o+l.length).set(l),Xr=l.length,o}let n=i.length,r=e(n,1)>>>0;const s=za();let a=0;for(;a<n;a++){const l=i.charCodeAt(a);if(l>127)break;s[r+a]=l}if(a!==n){a!==0&&(i=i.slice(a)),r=t(r,n,n=a+i.length*3,1)>>>0;const l=za().subarray(r+a,r+n),o=jb(i,l);a+=o.written,r=t(r,n,a,1)>>>0}return Xr=a,r}function eo(i){return i==null}let Ki=null;function xe(){return(Ki===null||Ki.byteLength===0)&&(Ki=new Int32Array(be.memory.buffer)),Ki}const b_=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&b_.decode();function Ft(i,e){return i=i>>>0,b_.decode(za().subarray(i,i+e))}function nr(i){const e=be.__wbindgen_export_2.get(i);return be.__externref_table_dealloc(i),e}function qb(i){try{const r=be.__wbindgen_add_to_stack_pointer(-16),s=wn(i,be.__wbindgen_malloc,be.__wbindgen_realloc),a=Xr;be.namedNode(r,s,a);var e=xe()[r/4+0],t=xe()[r/4+1],n=xe()[r/4+2];if(n)throw nr(t);return Oi.__wrap(e)}finally{be.__wbindgen_add_to_stack_pointer(16)}}function Mb(i){try{const a=be.__wbindgen_add_to_stack_pointer(-16);var e=eo(i)?0:wn(i,be.__wbindgen_malloc,be.__wbindgen_realloc),t=Xr;be.blankNode(a,e,t);var n=xe()[a/4+0],r=xe()[a/4+1],s=xe()[a/4+2];if(s)throw nr(r);return ma.__wrap(n)}finally{be.__wbindgen_add_to_stack_pointer(16)}}function Vb(i,e){try{const l=be.__wbindgen_add_to_stack_pointer(-16);var t=eo(i)?0:wn(i,be.__wbindgen_malloc,be.__wbindgen_realloc),n=Xr;be.literal(l,t,n,e);var r=xe()[l/4+0],s=xe()[l/4+1],a=xe()[l/4+2];if(a)throw nr(s);return ga.__wrap(r)}finally{be.__wbindgen_add_to_stack_pointer(16)}}function zb(){const i=be.defaultGraph();return va.__wrap(i)}function Hb(i){try{const r=be.__wbindgen_add_to_stack_pointer(-16),s=wn(i,be.__wbindgen_malloc,be.__wbindgen_realloc),a=Xr;be.variable(r,s,a);var e=xe()[r/4+0],t=xe()[r/4+1],n=xe()[r/4+2];if(n)throw nr(t);return ba.__wrap(e)}finally{be.__wbindgen_add_to_stack_pointer(16)}}function xb(i,e,t){try{const a=be.__wbindgen_add_to_stack_pointer(-16);be.triple(a,i,e,t);var n=xe()[a/4+0],r=xe()[a/4+1],s=xe()[a/4+2];if(s)throw nr(r);return Bi.__wrap(n)}finally{be.__wbindgen_add_to_stack_pointer(16)}}function Xb(i,e,t,n){try{const l=be.__wbindgen_add_to_stack_pointer(-16);be.quad(l,i,e,t,n);var r=xe()[l/4+0],s=xe()[l/4+1],a=xe()[l/4+2];if(a)throw nr(s);return Bi.__wrap(r)}finally{be.__wbindgen_add_to_stack_pointer(16)}}function Gb(i){try{const r=be.__wbindgen_add_to_stack_pointer(-16);be.fromTerm(r,i);var e=xe()[r/4+0],t=xe()[r/4+1],n=xe()[r/4+2];if(n)throw nr(t);return nr(e)}finally{be.__wbindgen_add_to_stack_pointer(16)}}function $b(i){try{const r=be.__wbindgen_add_to_stack_pointer(-16);be.fromQuad(r,i);var e=xe()[r/4+0],t=xe()[r/4+1],n=xe()[r/4+2];if(n)throw nr(t);return nr(e)}finally{be.__wbindgen_add_to_stack_pointer(16)}}let Zi=null;function Qb(){return(Zi===null||Zi.byteLength===0)&&(Zi=new Uint32Array(be.memory.buffer)),Zi}function Wb(i,e){i=i>>>0;const n=Qb().subarray(i/4,i/4+e),r=[];for(let s=0;s<n.length;s++)r.push(be.__wbindgen_export_2.get(n[s]));return be.__externref_drop_slice(i,e),r}function Yb(){be.main()}function Jb(i){const e=be.__externref_table_alloc();return be.__wbindgen_export_2.set(e,i),e}function Ur(i,e){try{return i.apply(this,e)}catch(t){const n=Jb(t);be.__wbindgen_exn_store(n)}}const of=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>be.__wbg_blanknode_free(i>>>0));class ma{static __wrap(e){e=e>>>0;const t=Object.create(ma.prototype);return t.__wbg_ptr=e,of.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,of.unregister(this),e}free(){const e=this.__destroy_into_raw();be.__wbg_blanknode_free(e)}get termType(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.blanknode_term_type(s,this.__wbg_ptr);var n=xe()[s/4+0],r=xe()[s/4+1];return e=n,t=r,Ft(n,r)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}get value(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.blanknode_value(s,this.__wbg_ptr);var n=xe()[s/4+0],r=xe()[s/4+1];return e=n,t=r,Ft(n,r)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}toString(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.blanknode_toString(s,this.__wbg_ptr);var n=xe()[s/4+0],r=xe()[s/4+1];return e=n,t=r,Ft(n,r)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}equals(e){return be.blanknode_equals(this.__wbg_ptr,e)!==0}}const uf=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>be.__wbg_defaultgraph_free(i>>>0));class va{static __wrap(e){e=e>>>0;const t=Object.create(va.prototype);return t.__wbg_ptr=e,uf.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,uf.unregister(this),e}free(){const e=this.__destroy_into_raw();be.__wbg_defaultgraph_free(e)}get termType(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.defaultgraph_term_type(s,this.__wbg_ptr);var n=xe()[s/4+0],r=xe()[s/4+1];return e=n,t=r,Ft(n,r)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}get value(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.defaultgraph_value(s,this.__wbg_ptr);var n=xe()[s/4+0],r=xe()[s/4+1];return e=n,t=r,Ft(n,r)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}toString(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.defaultgraph_toString(s,this.__wbg_ptr);var n=xe()[s/4+0],r=xe()[s/4+1];return e=n,t=r,Ft(n,r)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}equals(e){return be.defaultgraph_equals(this.__wbg_ptr,e)!==0}}const ff=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>be.__wbg_literal_free(i>>>0));class ga{static __wrap(e){e=e>>>0;const t=Object.create(ga.prototype);return t.__wbg_ptr=e,ff.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,ff.unregister(this),e}free(){const e=this.__destroy_into_raw();be.__wbg_literal_free(e)}get termType(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.literal_term_type(s,this.__wbg_ptr);var n=xe()[s/4+0],r=xe()[s/4+1];return e=n,t=r,Ft(n,r)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}get value(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.literal_value(s,this.__wbg_ptr);var n=xe()[s/4+0],r=xe()[s/4+1];return e=n,t=r,Ft(n,r)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}get language(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.literal_language(s,this.__wbg_ptr);var n=xe()[s/4+0],r=xe()[s/4+1];return e=n,t=r,Ft(n,r)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}get datatype(){const e=be.literal_datatype(this.__wbg_ptr);return Oi.__wrap(e)}toString(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.literal_toString(s,this.__wbg_ptr);var n=xe()[s/4+0],r=xe()[s/4+1];return e=n,t=r,Ft(n,r)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}equals(e){return be.literal_equals(this.__wbg_ptr,e)!==0}}const cf=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>be.__wbg_namednode_free(i>>>0));class Oi{static __wrap(e){e=e>>>0;const t=Object.create(Oi.prototype);return t.__wbg_ptr=e,cf.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,cf.unregister(this),e}free(){const e=this.__destroy_into_raw();be.__wbg_namednode_free(e)}get termType(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.namednode_term_type(s,this.__wbg_ptr);var n=xe()[s/4+0],r=xe()[s/4+1];return e=n,t=r,Ft(n,r)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}get value(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.namednode_value(s,this.__wbg_ptr);var n=xe()[s/4+0],r=xe()[s/4+1];return e=n,t=r,Ft(n,r)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}toString(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.namednode_toString(s,this.__wbg_ptr);var n=xe()[s/4+0],r=xe()[s/4+1];return e=n,t=r,Ft(n,r)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}equals(e){return be.namednode_equals(this.__wbg_ptr,e)!==0}}const df=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>be.__wbg_quad_free(i>>>0));class Bi{static __wrap(e){e=e>>>0;const t=Object.create(Bi.prototype);return t.__wbg_ptr=e,df.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,df.unregister(this),e}free(){const e=this.__destroy_into_raw();be.__wbg_quad_free(e)}get termType(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.quad_term_type(s,this.__wbg_ptr);var n=xe()[s/4+0],r=xe()[s/4+1];return e=n,t=r,Ft(n,r)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}get value(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.defaultgraph_value(s,this.__wbg_ptr);var n=xe()[s/4+0],r=xe()[s/4+1];return e=n,t=r,Ft(n,r)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}get subject(){return be.quad_subject(this.__wbg_ptr)}get predicate(){return be.quad_predicate(this.__wbg_ptr)}get object(){return be.quad_object(this.__wbg_ptr)}get graph(){return be.quad_graph(this.__wbg_ptr)}toString(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.quad_toString(s,this.__wbg_ptr);var n=xe()[s/4+0],r=xe()[s/4+1];return e=n,t=r,Ft(n,r)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}equals(e){return be.quad_equals(this.__wbg_ptr,e)!==0}}const Kb=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>be.__wbg_store_free(i>>>0));class w_{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Kb.unregister(this),e}free(){const e=this.__destroy_into_raw();be.__wbg_store_free(e)}constructor(e){try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.store_new(s,e);var t=xe()[s/4+0],n=xe()[s/4+1],r=xe()[s/4+2];if(r)throw nr(n);return this.__wbg_ptr=t>>>0,this}finally{be.__wbindgen_add_to_stack_pointer(16)}}add(e){try{const r=be.__wbindgen_add_to_stack_pointer(-16);be.store_add(r,this.__wbg_ptr,e);var t=xe()[r/4+0],n=xe()[r/4+1];if(n)throw nr(t)}finally{be.__wbindgen_add_to_stack_pointer(16)}}delete(e){try{const r=be.__wbindgen_add_to_stack_pointer(-16);be.store_delete(r,this.__wbg_ptr,e);var t=xe()[r/4+0],n=xe()[r/4+1];if(n)throw nr(t)}finally{be.__wbindgen_add_to_stack_pointer(16)}}has(e){try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.store_has(s,this.__wbg_ptr,e);var t=xe()[s/4+0],n=xe()[s/4+1],r=xe()[s/4+2];if(r)throw nr(n);return t!==0}finally{be.__wbindgen_add_to_stack_pointer(16)}}get size(){try{const r=be.__wbindgen_add_to_stack_pointer(-16);be.store_size(r,this.__wbg_ptr);var e=xe()[r/4+0],t=xe()[r/4+1],n=xe()[r/4+2];if(n)throw nr(t);return e>>>0}finally{be.__wbindgen_add_to_stack_pointer(16)}}match(e,t,n,r){try{const f=be.__wbindgen_add_to_stack_pointer(-16);be.store_match(f,this.__wbg_ptr,e,t,n,r);var s=xe()[f/4+0],a=xe()[f/4+1],l=xe()[f/4+2],o=xe()[f/4+3];if(o)throw nr(l);var u=Wb(s,a).slice();return be.__wbindgen_free(s,a*4,4),u}finally{be.__wbindgen_add_to_stack_pointer(16)}}query(e,t){try{const a=be.__wbindgen_add_to_stack_pointer(-16),l=wn(e,be.__wbindgen_malloc,be.__wbindgen_realloc),o=Xr;be.store_query(a,this.__wbg_ptr,l,o,t);var n=xe()[a/4+0],r=xe()[a/4+1],s=xe()[a/4+2];if(s)throw nr(r);return nr(n)}finally{be.__wbindgen_add_to_stack_pointer(16)}}update(e,t){try{const s=be.__wbindgen_add_to_stack_pointer(-16),a=wn(e,be.__wbindgen_malloc,be.__wbindgen_realloc),l=Xr;be.store_update(s,this.__wbg_ptr,a,l,t);var n=xe()[s/4+0],r=xe()[s/4+1];if(r)throw nr(n)}finally{be.__wbindgen_add_to_stack_pointer(16)}}load(e,t,n,r){try{const l=be.__wbindgen_add_to_stack_pointer(-16),o=wn(e,be.__wbindgen_malloc,be.__wbindgen_realloc),u=Xr;be.store_load(l,this.__wbg_ptr,o,u,t,n,r);var s=xe()[l/4+0],a=xe()[l/4+1];if(a)throw nr(s)}finally{be.__wbindgen_add_to_stack_pointer(16)}}dump(e,t){let n,r;try{const h=be.__wbindgen_add_to_stack_pointer(-16);be.store_dump(h,this.__wbg_ptr,e,t);var s=xe()[h/4+0],a=xe()[h/4+1],l=xe()[h/4+2],o=xe()[h/4+3],u=s,f=a;if(o)throw u=0,f=0,nr(l);return n=u,r=f,Ft(u,f)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(n,r,1)}}}const hf=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>be.__wbg_variable_free(i>>>0));class ba{static __wrap(e){e=e>>>0;const t=Object.create(ba.prototype);return t.__wbg_ptr=e,hf.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,hf.unregister(this),e}free(){const e=this.__destroy_into_raw();be.__wbg_variable_free(e)}get termType(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.variable_term_type(s,this.__wbg_ptr);var n=xe()[s/4+0],r=xe()[s/4+1];return e=n,t=r,Ft(n,r)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}get value(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.variable_value(s,this.__wbg_ptr);var n=xe()[s/4+0],r=xe()[s/4+1];return e=n,t=r,Ft(n,r)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}toString(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.variable_toString(s,this.__wbg_ptr);var n=xe()[s/4+0],r=xe()[s/4+1];return e=n,t=r,Ft(n,r)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}equals(e){return be.variable_equals(this.__wbg_ptr,e)!==0}}async function Zb(i,e){if(typeof Response=="function"&&i instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(i,e)}catch(n){if(i.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n);else throw n}const t=await i.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{const t=await WebAssembly.instantiate(i,e);return t instanceof WebAssembly.Instance?{instance:t,module:i}:t}}function y_(){const i={};return i.wbg={},i.wbg.__wbindgen_is_undefined=function(e){return e===void 0},i.wbg.__wbindgen_is_null=function(e){return e===null},i.wbg.__wbindgen_string_get=function(e,t){const n=t,r=typeof n=="string"?n:void 0;var s=eo(r)?0:wn(r,be.__wbindgen_malloc,be.__wbindgen_realloc),a=Xr;xe()[e/4+1]=a,xe()[e/4+0]=s},i.wbg.__wbindgen_is_falsy=function(e){return!e},i.wbg.__wbindgen_error_new=function(e,t){return new Error(Ft(e,t))},i.wbg.__wbg_namednode_new=function(e){return Oi.__wrap(e)},i.wbg.__wbg_blanknode_new=function(e){return ma.__wrap(e)},i.wbg.__wbg_literal_new=function(e){return ga.__wrap(e)},i.wbg.__wbg_defaultgraph_new=function(e){return va.__wrap(e)},i.wbg.__wbg_variable_new=function(e){return ba.__wrap(e)},i.wbg.__wbg_quad_new=function(e){return Bi.__wrap(e)},i.wbg.__wbg_new_28c511d9baebfa89=function(e,t){return new Error(Ft(e,t))},i.wbg.__wbindgen_string_new=function(e,t){return Ft(e,t)},i.wbg.__wbg_new_57421e8974065233=function(e,t){return new URIError(Ft(e,t))},i.wbg.__wbindgen_is_string=function(e){return typeof e=="string"},i.wbg.__wbg_iterator_2cee6dadfd956dfa=function(){return Symbol.iterator},i.wbg.__wbg_get_e3c254076557e348=function(){return Ur(function(e,t){return Reflect.get(e,t)},arguments)},i.wbg.__wbindgen_is_function=function(e){return typeof e=="function"},i.wbg.__wbg_call_27c0f87801dedf93=function(){return Ur(function(e,t){return e.call(t)},arguments)},i.wbg.__wbindgen_is_object=function(e){const t=e;return typeof t=="object"&&t!==null},i.wbg.__wbg_next_40fc327bfc8770e6=function(e){return e.next},i.wbg.__wbg_next_196c84450b364254=function(){return Ur(function(e){return e.next()},arguments)},i.wbg.__wbg_done_298b57d23c0fc80c=function(e){return e.done},i.wbg.__wbg_value_d93c65011f51a456=function(e){return e.value},i.wbg.__wbg_new_16b304a2cfa7ff4a=function(){return new Array},i.wbg.__wbg_new_d9bc3a0147634640=function(){return new Map},i.wbg.__wbg_push_a5b05aedc7234f9f=function(e,t){return e.push(t)},i.wbg.__wbg_set_8417257aaedc936b=function(e,t,n){return e.set(t,n)},i.wbg.__wbg_warn_2b7fc46eb50827b6=function(e,t){console.warn(Ft(e,t))},i.wbg.__wbg_new_abda76e883ba8a5f=function(){return new Error},i.wbg.__wbg_stack_658279fe44541cf6=function(e,t){const n=t.stack,r=wn(n,be.__wbindgen_malloc,be.__wbindgen_realloc),s=Xr;xe()[e/4+1]=s,xe()[e/4+0]=r},i.wbg.__wbg_error_f851667af71bcfc6=function(e,t){let n,r;try{n=e,r=t,console.error(Ft(e,t))}finally{be.__wbindgen_free(n,r,1)}},i.wbg.__wbg_crypto_1d1f22824a6a080c=function(e){return e.crypto},i.wbg.__wbg_process_4a72847cc503995b=function(e){return e.process},i.wbg.__wbg_versions_f686565e586dd935=function(e){return e.versions},i.wbg.__wbg_node_104a2ff8d6ea03a2=function(e){return e.node},i.wbg.__wbg_require_cca90b1a94a0255b=function(){return Ur(function(){return module.require},arguments)},i.wbg.__wbg_msCrypto_eb05e62b530a1508=function(e){return e.msCrypto},i.wbg.__wbg_newwithlength_e9b4878cebadb3d3=function(e){return new Uint8Array(e>>>0)},i.wbg.__wbg_self_ce0dbfc45cf2f5be=function(){return Ur(function(){return self.self},arguments)},i.wbg.__wbg_window_c6fb939a7f436783=function(){return Ur(function(){return window.window},arguments)},i.wbg.__wbg_globalThis_d1e6af4856ba331b=function(){return Ur(function(){return globalThis.globalThis},arguments)},i.wbg.__wbg_global_207b558942527489=function(){return Ur(function(){return global.global},arguments)},i.wbg.__wbg_newnoargs_e258087cd0daa0ea=function(e,t){return new Function(Ft(e,t))},i.wbg.__wbg_call_b3ca7c6051f9bec1=function(){return Ur(function(e,t,n){return e.call(t,n)},arguments)},i.wbg.__wbg_has_0af94d20077affa2=function(){return Ur(function(e,t){return Reflect.has(e,t)},arguments)},i.wbg.__wbg_now_3014639a94423537=function(){return Date.now()},i.wbg.__wbindgen_memory=function(){return be.memory},i.wbg.__wbg_buffer_12d079cc21e14bdb=function(e){return e.buffer},i.wbg.__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb=function(e,t,n){return new Uint8Array(e,t>>>0,n>>>0)},i.wbg.__wbg_randomFillSync_5c9c955aa56b6049=function(){return Ur(function(e,t){e.randomFillSync(t)},arguments)},i.wbg.__wbg_subarray_a1f73cd4b5b42fe1=function(e,t,n){return e.subarray(t>>>0,n>>>0)},i.wbg.__wbg_getRandomValues_3aa56aa6edec874c=function(){return Ur(function(e,t){e.getRandomValues(t)},arguments)},i.wbg.__wbg_new_63b92bc8671ed464=function(e){return new Uint8Array(e)},i.wbg.__wbg_set_a47bac70306a19a7=function(e,t,n){e.set(t,n>>>0)},i.wbg.__wbindgen_throw=function(e,t){throw new Error(Ft(e,t))},i.wbg.__wbindgen_init_externref_table=function(){const e=be.__wbindgen_export_2,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)},i}function E_(i,e){return be=i.exports,is.__wbindgen_wasm_module=e,Ki=null,Zi=null,Ji=null,be.__wbindgen_start(),be}function ew(i){if(be!==void 0)return be;const e=y_();i instanceof WebAssembly.Module||(i=new WebAssembly.Module(i));const t=new WebAssembly.Instance(i,e);return E_(t,i)}async function is(i){if(be!==void 0)return be;typeof i>"u"&&(i=new URL(""+new URL("../assets/web_bg.DI8SoM3H.wasm",import.meta.url).href,import.meta.url));const e=y_();(typeof i=="string"||typeof Request=="function"&&i instanceof Request||typeof URL=="function"&&i instanceof URL)&&(i=fetch(i));const{instance:t,module:n}=await Zb(await i,e);return E_(t,n)}const tw=Object.freeze(Object.defineProperty({__proto__:null,BlankNode:ma,DefaultGraph:va,Literal:ga,NamedNode:Oi,Quad:Bi,Store:w_,Variable:ba,blankNode:Mb,default:is,defaultGraph:zb,fromQuad:$b,fromTerm:Gb,initSync:ew,literal:Vb,main:Yb,namedNode:qb,quad:Xb,triple:xb,variable:Hb},Symbol.toStringTag,{value:"Module"})),rw="/ontologies/d3fend.ttl",nw="http://d3fend.mitre.org/ontologies/d3fend.owl#",iw="http://d3fend.mitre.org/ontologies/cad/instances#",aw="cco",k_="d3f",sw="dct",D_="cad",lw="owl",A_="rdf",C_="rdfs",ow="skos",uw="xsd",Si={[k_]:nw,[D_]:iw,[lw]:"http://www.w3.org/2002/07/owl#",[A_]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",[C_]:"http://www.w3.org/2000/01/rdf-schema#",[uw]:"http://www.w3.org/2001/XMLSchema#",[sw]:"http://purl.org/dc/terms/",[ow]:"http://www.w3.org/2004/02/skos/core#",[aw]:"http://www.ontologyrepository.com/CommonCoreOntologies/"};function fw(){const{subscribe:i,set:e,update:t}=yr({initalized:!1,store:null,erorr:null});async function n(){try{console.log("Starting Oxigraph initialization"),console.time("Initialize Oxigraph"),console.log("Oxigraph module:",tw),console.log("Init function:",is),await is(),console.log("WebAssembly initialized successfully");const s=new w_;console.log("Oxigraph store created"),e({initialized:!0,store:s,error:null}),await r(s),console.log(`Oxigraph store initialized with ${s.size} triples.`)}catch(s){e({initialized:!1,store:null,error:s.message}),console.error("Failed to initialize Oxigraph store:",s)}}async function r(s){try{console.time("Load D3FEND ontology");const l=await(await fetch(rw)).text();s.load(l,{format:"ttl"}),console.timeEnd("Load D3FEND ontology"),console.log(`D3FEND ontology loaded, total triples: ${s.size}`)}catch(a){console.error("Failed to load D3FEND ontology:",a)}}return{subscribe:i,initialize:n,query:s=>new Promise((a,l)=>{t(o=>{if(!o.initialized)l(new Error("Oxigraph store not initialized"));else try{const u=o.store.query(s);a(u)}catch(u){l(u)}return o})})}}const to=fw();async function cw(i){let e=null;return console.log("Calling lookup_valid_property..."),e=await hw(i),console.log(`Property from lookup IRI ${e}`),e==null&&(console.log("Calling lookup_valid_property_by_label..."),e=await dw(i)),e}async function dw(i){const e="findValidPropertyByLabel("+i+")";console.info(e);const t=`PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX d3f: <http://d3fend.mitre.org/ontologies/d3fend.owl#>

SELECT ?property
WHERE
{
   ?property rdfs:subPropertyOf* d3f:may-be-associated-with .
   ?property rdfs:label "${i}" .
}
LIMIT 1`;console.log({valid_value_query:t});let n=null;try{const r=await to.query(t);r?(console.info(`Type of queryResult for property lookup by label ${i} is: `+Object.prototype.toString.call(r).slice(8,-1)),console.log({query_result:r}),Array.isArray(r)?r.length>0?n=r[0].get("property").value:console.warn(`Empty query results for valid property lookup by label ${i}.`):console.warn(`Query result not the expected Array type for property lookup by label of ${i}.`)):console.error(`Query results: ${r} for valid property lookup by label ${i}.`)}catch(r){console.warn(`Error executing oxigraph query for property lookup by label of: ${i}, error: ${r}`)}return console.info(n+" <- "+e),n}async function hw(i){const e="lookupValidPropertyByFragment("+i+")";console.info(e);const t=`PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX d3f: <http://d3fend.mitre.org/ontologies/d3fend.owl#>

SELECT ?property
WHERE
{
   VALUES ?property { ${i} }
   ?property rdfs:subPropertyOf* d3f:may-be-associated-with .
}
LIMIT 1`;let n=null;if(i.includes(":"))try{const r=await to.query(t);console.info({query_result:r}),r?Array.isArray(r)?r.length>0?n=r[0].get("property").value:console.warn(`Empty array returned for property lookup by iri of ${i}.`):console.warn(`Query result not the expected Array type for property lookup by iri of ${i}.`):console.warn(`Undefined query result returned for property lookup by iri of ${i}.`)}catch(r){console.warn(`Error executing oxigraph query for property lookup by iri of: ${i}, error: ${r}`)}else console.warn("Attempted lookup by iri of: "+i+" but iri has no ':' char");return console.info(n+" <- "+e),n}const On=wr(Si[k_]),T_=wr(Si[D_]),pw=wr(Si[A_]),_w=wr(Si[C_]);function xa(i,e){Nr.set(i),la.set(e)}function mw(){xa([],[])}const Nr=yr([]),nt=yr(null),la=yr([]);function vw(i,e){if(e.data.d3f_class){const t=e.data.d3f_class,[n,r]=t.split(":");return On(r)}else{const t=e.type;return{artifactSelectorNode:On("Artifact"),vulnerabilitySelectorNode:On("Vulnerability"),attackSelectorNode:On("OffensiveTechnique"),countermeasureSelectorNode:On("DefensiveTechnique"),informationSelectorNode:On("DigitalInformation"),agentSelectorNode:On("Agent"),eventNode:On("Event")}[t]}}async function gw(){const i=Lb();Object.keys(Si).forEach(a=>{const l=Si[a];console.info("Adding prefix ",a," for ",l),i.setPrefixForURI(a,l)}),console.info("Echo store.namespaces: "+i.namespaces);let e,t;const n=[],r=[];return Nr.subscribe(a=>{e=a})(),la.subscribe(a=>{t=a})(),console.info("Starting node processing..."),bw(e,i,n),console.info("Completed node processing."),console.info("Starting edge processing..."),await yw(t,i,r),console.info("Completed edge processing promise."),await new Promise((a,l)=>{sa(null,i,null,"text/turtle",(o,u)=>{if(o)l(o);else{let f=u;n.length>0&&(f+=`
# Skipped nodes (no d3f_class):
`,n.forEach(h=>{f+=`# Node ID: ${h.id}
`,JSON.stringify(h.data,null,2).split(`
`).forEach(p=>{f+=`# ${p}
`})})),r.length>0&&(f+=`#
# Skipped edges (no label lookup found.):
`,r.forEach(h=>{f+=`# Edge ID: ${h.id}
`,JSON.stringify(h.data,null,2).split(`
`).forEach(p=>{f+=`# ${p}
`})}),f+=`
`),a(f)}})})}function bw(i,e,t){console.info("Processing nodes..."),i.forEach(n=>{const r=n.id,s=n.type,a=n.data.label,l=vw(e,n);if(l){const o=N_(r),u=Ub(a.toString());ww("Processing node and data properties and using rdflib node name: ",l),e.add(o,pw("type"),l),e.add(o,_w("label"),u)}else t.push({id:r,type:s,data:n.data})}),console.info("Done processing nodes."),t.length>1&&console.warn("Skipped nodes:",t)}function N_(i){const e=i.replace(".","_");return T_(e)}function ww(i,e){const t=Object.prototype.toString.call(e).slice(8,-1);console.log(`${i} references ${e} of type ${t}`)}const yw=async(i,e,t)=>{console.info("Processing edges now!"),t.length=0;for(const n of i){const r=n.id,s=n.data.label,a=n.source,l=n.target;console.log(`edgeLabel: ${s}`);try{const o=await cw(s);if(o){console.log(`Found property ${o} for ${s}`),console.info(`Adding subject inst:${a} property ${o} object inst:${l}`);try{const u=N_(a),f=T_(l.replace(".","_"));e.add(u,g_(o),f),console.info(e.length)}catch{console.error(`Error adding triple for edgeId = ${r}, edgeLabel = ${s}`)}}else console.warn(`Bad property ${o} found for ${s}`),t.push({id:r,data:n.data})}catch(o){console.error(`Lookup error for edgeId: ${r} with edgeLabel: ${s} - ${o}`),t.push({id:r,data:n.data})}}console.info("Done processing edges."),t.length>1&&console.warn("Skipped edges:",t)};function Sn(i,e,t,n,r,s,a,l,o,u,f,h,d){const c={id:`${Math.random()}`,type:n,position:{x:l,y:o},data:{label:r,sequence:a,d3f_class:s},measured:{width:u,height:f},origin:[.5,0],selected:!1,dragging:!1};let p,_;d?(p=c.id,_=t.id):(p=t.id,_=c.id);const m={type:"editableEdge",data:{label:h},source:_,sourceHandle:"source",target:p,targetHandle:"target",id:`xy-edge__${_}source-${p}target`,selected:!1};e.update(y=>[...y,m]),i.update(y=>[...y,c])}function pf(i,e,t){const n=i.slice();return n[18]=e[t],n}const Ew=i=>({}),_f=i=>({});function kw(i){let e;return{c(){e=q("No related offensive techniques in this release.")},l(t){e=M(t,"No related offensive techniques in this release.")},m(t,n){C(t,e,n)},p:Me,i:Me,o:Me,d(t){t&&v(e)}}}function Dw(i){let e,t;return e=new An({props:{$$slots:{default:[Nw]},$$scope:{ctx:i}}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r&16394&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function Aw(i){let e,t="Loading...";return{c(){e=Y("div"),e.textContent=t},l(n){e=J(n,"DIV",{"data-svelte-h":!0}),Ke(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(n,r){C(n,e,r)},p:Me,i:Me,o:Me,d(n){n&&v(e)}}}function mf(i){let e=i[18].off_tech_id.value.replace(/ |\./g,"")+"",t,n,r=i[18].off_tech_label.value+"",s,a,l="-->",o,u,f=i[18].off_artifact_rel_label.value.replace(/ /g,"")+"",h,d,c=Oe(i[18].off_artifact.value)+"",p,_,m=i[18].off_artifact_label.value+"",y,O,T,N,g=Oe(i[18].off_artifact.value)+"",k,w,R=i[18].off_tech_id.value.replace(/ |\./g,"")+"",S,B,D=i[18].off_tech_id.value.replace(/ |\./g,"")+"",L,A,I=Oe(i[18].off_artifact.value)+"",x,j,re=Oe(i[18].off_artifact.value)+"",Z,$;function G(Q,le){return le&10&&(T=null),T==null&&(T=!!Q[3].includes(Q[18].off_tech_id.value.replace(/ |\./g,""))),T?Tw:Cw}let X=G(i,-1),oe=X(i);return{c(){t=q(e),n=q('["'),s=q(r),a=q('"] '),o=q(l),u=q(" |"),h=q(f),d=q("| "),p=q(c),_=q('["'),y=q(m),O=q(`"];
            `),oe.c(),N=q(`
            class `),k=q(g),w=q(" ArtifactNode; click "),S=q(R),B=q(` href "javascript:da_to_off_callback('`),L=q(D),A=q(`')"; click `),x=q(I),j=q(' href "/dao/artifact/d3f:'),Z=q(re),$=q('";')},l(Q){t=M(Q,e),n=M(Q,'["'),s=M(Q,r),a=M(Q,'"] '),o=M(Q,l),u=M(Q," |"),h=M(Q,f),d=M(Q,"| "),p=M(Q,c),_=M(Q,'["'),y=M(Q,m),O=M(Q,`"];
            `),oe.l(Q),N=M(Q,`
            class `),k=M(Q,g),w=M(Q," ArtifactNode; click "),S=M(Q,R),B=M(Q,` href "javascript:da_to_off_callback('`),L=M(Q,D),A=M(Q,`')"; click `),x=M(Q,I),j=M(Q,' href "/dao/artifact/d3f:'),Z=M(Q,re),$=M(Q,'";')},m(Q,le){C(Q,t,le),C(Q,n,le),C(Q,s,le),C(Q,a,le),C(Q,o,le),C(Q,u,le),C(Q,h,le),C(Q,d,le),C(Q,p,le),C(Q,_,le),C(Q,y,le),C(Q,O,le),oe.m(Q,le),C(Q,N,le),C(Q,k,le),C(Q,w,le),C(Q,S,le),C(Q,B,le),C(Q,L,le),C(Q,A,le),C(Q,x,le),C(Q,j,le),C(Q,Z,le),C(Q,$,le)},p(Q,le){le&2&&e!==(e=Q[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(t,e),le&2&&r!==(r=Q[18].off_tech_label.value+"")&&we(s,r),le&2&&f!==(f=Q[18].off_artifact_rel_label.value.replace(/ /g,"")+"")&&we(h,f),le&2&&c!==(c=Oe(Q[18].off_artifact.value)+"")&&we(p,c),le&2&&m!==(m=Q[18].off_artifact_label.value+"")&&we(y,m),X===(X=G(Q,le))&&oe?oe.p(Q,le):(oe.d(1),oe=X(Q),oe&&(oe.c(),oe.m(N.parentNode,N))),le&2&&g!==(g=Oe(Q[18].off_artifact.value)+"")&&we(k,g),le&2&&R!==(R=Q[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(S,R),le&2&&D!==(D=Q[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(L,D),le&2&&I!==(I=Oe(Q[18].off_artifact.value)+"")&&we(x,I),le&2&&re!==(re=Oe(Q[18].off_artifact.value)+"")&&we(Z,re)},d(Q){Q&&(v(t),v(n),v(s),v(a),v(o),v(u),v(h),v(d),v(p),v(_),v(y),v(O),v(N),v(k),v(w),v(S),v(B),v(L),v(A),v(x),v(j),v(Z),v($)),oe.d(Q)}}}function Cw(i){let e,t=i[18].off_tech_id.value.replace(/ |\./g,"")+"",n,r;return{c(){e=q("class "),n=q(t),r=q(" OffensiveTechniqueNode;")},l(s){e=M(s,"class "),n=M(s,t),r=M(s," OffensiveTechniqueNode;")},m(s,a){C(s,e,a),C(s,n,a),C(s,r,a)},p(s,a){a&2&&t!==(t=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(n,t)},d(s){s&&(v(e),v(n),v(r))}}}function Tw(i){let e,t=i[18].off_tech_id.value.replace(/ |\./g,"")+"",n,r;return{c(){e=q("class "),n=q(t),r=q(" SelectedOffensiveTechniqueNode;")},l(s){e=M(s,"class "),n=M(s,t),r=M(s," SelectedOffensiveTechniqueNode;")},m(s,a){C(s,e,a),C(s,n,a),C(s,r,a)},p(s,a){a&2&&t!==(t=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(n,t)},d(s){s&&(v(e),v(n),v(r))}}}function vf(i){let e=i[6].edge_is_unique(i[18].off_tech_label.value,i[18].off_artifact_rel_label.value,i[18].off_artifact_label.value),t,n=e&&mf(i);return{c(){n&&n.c(),t=Re()},l(r){n&&n.l(r),t=Re()},m(r,s){n&&n.m(r,s),C(r,t,s)},p(r,s){s&2&&(e=r[6].edge_is_unique(r[18].off_tech_label.value,r[18].off_artifact_rel_label.value,r[18].off_artifact_label.value)),e?n?n.p(r,s):(n=mf(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){r&&v(t),n&&n.d(r)}}}function Nw(i){let e,t,n=Ge(i[1].da_to_off.results.bindings),r=[];for(let s=0;s<n.length;s+=1)r[s]=vf(pf(i,n,s));return{c(){e=q(`graph LR;
        `);for(let s=0;s<r.length;s+=1)r[s].c();t=Re()},l(s){e=M(s,`graph LR;
        `);for(let a=0;a<r.length;a+=1)r[a].l(s);t=Re()},m(s,a){C(s,e,a);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(s,a);C(s,t,a)},p(s,a){if(a&74){n=Ge(s[1].da_to_off.results.bindings);let l;for(l=0;l<n.length;l+=1){const o=pf(s,n,l);r[l]?r[l].p(o,a):(r[l]=vf(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(s){s&&(v(e),v(t)),wt(r,s)}}}function Sw(i){let e,t,n,r,s,a,l,o,u,f,h,d,c,p=i[3].length+"",_,m,y,O,T;const N=i[9].header,g=Vt(N,i,i[14],_f),k=i[9].default,w=Vt(k,i,i[14],null),R=[Aw,Dw,kw],S=[];function B(D,L){return D[1]?D[1].da_to_off.results.bindings.length>0?1:2:0}return l=B(i),o=S[l]=R[l](i),{c(){e=Y("dialog"),t=Y("div"),g&&g.c(),n=q(`
    Select Attack Techniques
    `),w&&w.c(),r=ie(),s=Y("hr"),a=ie(),o.c(),u=ie(),f=Y("hr"),h=ie(),d=Y("button"),c=q("Insert ("),_=q(p),m=q(")"),this.h()},l(D){e=J(D,"DIALOG",{class:!0});var L=Ce(e);t=J(L,"DIV",{class:!0});var A=Ce(t);g&&g.l(A),n=M(A,`
    Select Attack Techniques
    `),w&&w.l(A),r=ae(A),s=J(A,"HR",{}),a=ae(A),o.l(A),u=ae(A),f=J(A,"HR",{}),h=ae(A),d=J(A,"BUTTON",{class:!0});var I=Ce(d);c=M(I,"Insert ("),_=M(I,p),m=M(I,")"),I.forEach(v),A.forEach(v),L.forEach(v),this.h()},h(){d.autofocus=!0,ee(d,"class","svelte-1ai9hff"),ee(t,"class","svelte-1ai9hff"),ee(e,"class","svelte-1ai9hff")},m(D,L){C(D,e,L),V(e,t),g&&g.m(t,null),V(t,n),w&&w.m(t,null),V(t,r),V(t,s),V(t,a),S[l].m(t,null),V(t,u),V(t,f),V(t,h),V(t,d),V(d,c),V(d,_),V(d,m),i[11](e),y=!0,d.focus(),O||(T=[ye(d,"click",i[7]),ye(t,"click",Wt(i[10])),ye(e,"close",i[12]),ye(e,"click",Dn(i[13]))],O=!0)},p(D,[L]){g&&g.p&&(!y||L&16384)&&zt(g,N,D,D[14],y?xt(N,D[14],L,Ew):Ht(D[14]),_f),w&&w.p&&(!y||L&16384)&&zt(w,k,D,D[14],y?xt(k,D[14],L,null):Ht(D[14]),null);let A=l;l=B(D),l===A?S[l].p(D,L):(ut(),de(S[A],1,1,()=>{S[A]=null}),ft(),o=S[l],o?o.p(D,L):(o=S[l]=R[l](D),o.c()),ue(o,1),o.m(t,u)),(!y||L&8)&&p!==(p=D[3].length+"")&&we(_,p)},i(D){y||(ue(g,D),ue(w,D),ue(o),y=!0)},o(D){de(g,D),de(w,D),de(o),y=!1},d(D){D&&v(e),g&&g.d(D),w&&w.d(D),S[l].d(),i[11](null),O=!1,ht(T)}}}function Iw(i,e,t){let n,r,s,{$$slots:a={},$$scope:l}=e,{show_attack_modal:o}=e,{parent_node:u}=e,{data:f}=e,h;const d=Gr();tt(i,d,g=>t(16,s=g));const c=$r();tt(i,c,g=>t(15,r=g));let p=new jn;function _(g){n.includes(g)?t(3,n=n.filter(k=>k!==g)):n.push(g),t(3,n)}window.da_to_off_callback=function(g){_(g)};function m(){let g=0,k=200,w=100;for(const R of n){let S=f.da_to_off.results.bindings.find(B=>B.off_tech_id.value.replace(/ |\./g,"")==R);S&&(Sn(d,c,u,"attackSelectorNode",S.off_tech_label.value,"d3f:"+S.off_tech_id.value,u.data.sequence,u.position.x+g*k,u.position.y+w,182,63,S.off_artifact_rel_label.value,!1),g+=1)}d.set(s),c.set(r),h&&h.close(),t(3,n=[])}function y(g){Fr.call(this,i,g)}function O(g){Mt[g?"unshift":"push"](()=>{h=g,t(2,h)})}const T=()=>t(0,o=!1),N=()=>{h.close(),t(3,n=[])};return i.$$set=g=>{"show_attack_modal"in g&&t(0,o=g.show_attack_modal),"parent_node"in g&&t(8,u=g.parent_node),"data"in g&&t(1,f=g.data),"$$scope"in g&&t(14,l=g.$$scope)},i.$$.update=()=>{i.$$.dirty&5&&o&&h&&(h.showModal(),p.reset()),i.$$.dirty&5&&!o&&h&&(h.close(),p.reset())},t(3,n=[]),[o,f,h,n,d,c,p,m,u,a,y,O,T,N,l]}class Pw extends yt{constructor(e){super(),Et(this,e,Iw,Sw,it,{show_attack_modal:0,parent_node:8,data:1})}}function gf(i,e,t){const n=i.slice();return n[23]=e[t],n}const Rw=i=>({}),bf=i=>({});function Fw(i){let e;return{c(){e=q("No related defensive techniques in this release.")},l(t){e=M(t,"No related defensive techniques in this release.")},m(t,n){C(t,e,n)},p:Me,i:Me,o:Me,d(t){t&&v(e)}}}function Ow(i){let e,t,n,r,s,a=i[4],l,o;function u(d){i[14](d)}let f={toggles:i[5]};i[4]!==void 0&&(f.selected=i[4]),n=new yh({props:f}),Mt.push(()=>_r(n,"selected",u));let h=kf(i);return{c(){e=Y("br"),t=ie(),Be(n.$$.fragment),s=ie(),h.c(),l=Re()},l(d){e=J(d,"BR",{}),t=ae(d),Le(n.$$.fragment,d),s=ae(d),h.l(d),l=Re()},m(d,c){C(d,e,c),C(d,t,c),Ue(n,d,c),C(d,s,c),h.m(d,c),C(d,l,c),o=!0},p(d,c){const p={};c&32&&(p.toggles=d[5]),!r&&c&16&&(r=!0,p.selected=d[4],pr(()=>r=!1)),n.$set(p),c&16&&it(a,a=d[4])?(ut(),de(h,1,1,Me),ft(),h=kf(d),h.c(),ue(h,1),h.m(l.parentNode,l)):h.p(d,c)},i(d){o||(ue(n.$$.fragment,d),ue(h),o=!0)},o(d){de(n.$$.fragment,d),de(h),o=!1},d(d){d&&(v(e),v(t),v(s),v(l)),je(n,d),h.d(d)}}}function Bw(i){let e,t="Loading...";return{c(){e=Y("div"),e.textContent=t},l(n){e=J(n,"DIV",{"data-svelte-h":!0}),Ke(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(n,r){C(n,e,r)},p:Me,i:Me,o:Me,d(n){n&&v(e)}}}function wf(i){let e=!i[4].includes(i[23].def_tactic_label.value),t,n=e&&yf(i);return{c(){n&&n.c(),t=Re()},l(r){n&&n.l(r),t=Re()},m(r,s){n&&n.m(r,s),C(r,t,s)},p(r,s){s&18&&(e=!r[4].includes(r[23].def_tactic_label.value)),e?n?n.p(r,s):(n=yf(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){r&&v(t),n&&n.d(r)}}}function yf(i){let e=Oe(i[23].def_tech.value)+"",t,n,r=i[23].def_tech_label.value+"",s,a,l="-->",o,u,f=i[23].def_artifact_rel_label.value.replace(/ /g,"")+"",h,d,c=Oe(i[23].def_artifact.value)+"",p,_,m=i[23].def_artifact_label.value+"",y,O,T,N,g=Oe(i[23].def_artifact.value)+"",k,w,R=Oe(i[23].def_tech.value)+"",S,B,D=Oe(i[23].def_tech.value)+"",L,A,I=Oe(i[23].def_artifact.value)+"",x,j,re=Oe(i[23].def_artifact.value)+"",Z,$;function G(Q,le){return le&66&&(T=null),T==null&&(T=!!Q[6].includes(Oe(Q[23].def_tech.value))),T?Uw:Lw}let X=G(i,-1),oe=X(i);return{c(){t=q(e),n=q('["'),s=q(r),a=q('"] '),o=q(l),u=q(`
                | `),h=q(f),d=q(" | "),p=q(c),_=q('["'),y=q(m),O=q(`"];
                `),oe.c(),N=q(` 
                class `),k=q(g),w=q(` ArtifactNode;
                click `),S=q(R),B=q(` href "javascript:da_to_def_callback('`),L=q(D),A=q(`')";
                click `),x=q(I),j=q(' href "/dao/artifact/d3f:'),Z=q(re),$=q('";')},l(Q){t=M(Q,e),n=M(Q,'["'),s=M(Q,r),a=M(Q,'"] '),o=M(Q,l),u=M(Q,`
                | `),h=M(Q,f),d=M(Q," | "),p=M(Q,c),_=M(Q,'["'),y=M(Q,m),O=M(Q,`"];
                `),oe.l(Q),N=M(Q,` 
                class `),k=M(Q,g),w=M(Q,` ArtifactNode;
                click `),S=M(Q,R),B=M(Q,` href "javascript:da_to_def_callback('`),L=M(Q,D),A=M(Q,`')";
                click `),x=M(Q,I),j=M(Q,' href "/dao/artifact/d3f:'),Z=M(Q,re),$=M(Q,'";')},m(Q,le){C(Q,t,le),C(Q,n,le),C(Q,s,le),C(Q,a,le),C(Q,o,le),C(Q,u,le),C(Q,h,le),C(Q,d,le),C(Q,p,le),C(Q,_,le),C(Q,y,le),C(Q,O,le),oe.m(Q,le),C(Q,N,le),C(Q,k,le),C(Q,w,le),C(Q,S,le),C(Q,B,le),C(Q,L,le),C(Q,A,le),C(Q,x,le),C(Q,j,le),C(Q,Z,le),C(Q,$,le)},p(Q,le){le&2&&e!==(e=Oe(Q[23].def_tech.value)+"")&&we(t,e),le&2&&r!==(r=Q[23].def_tech_label.value+"")&&we(s,r),le&2&&f!==(f=Q[23].def_artifact_rel_label.value.replace(/ /g,"")+"")&&we(h,f),le&2&&c!==(c=Oe(Q[23].def_artifact.value)+"")&&we(p,c),le&2&&m!==(m=Q[23].def_artifact_label.value+"")&&we(y,m),X===(X=G(Q,le))&&oe?oe.p(Q,le):(oe.d(1),oe=X(Q),oe&&(oe.c(),oe.m(N.parentNode,N))),le&2&&g!==(g=Oe(Q[23].def_artifact.value)+"")&&we(k,g),le&2&&R!==(R=Oe(Q[23].def_tech.value)+"")&&we(S,R),le&2&&D!==(D=Oe(Q[23].def_tech.value)+"")&&we(L,D),le&2&&I!==(I=Oe(Q[23].def_artifact.value)+"")&&we(x,I),le&2&&re!==(re=Oe(Q[23].def_artifact.value)+"")&&we(Z,re)},d(Q){Q&&(v(t),v(n),v(s),v(a),v(o),v(u),v(h),v(d),v(p),v(_),v(y),v(O),v(N),v(k),v(w),v(S),v(B),v(L),v(A),v(x),v(j),v(Z),v($)),oe.d(Q)}}}function Lw(i){let e,t=Oe(i[23].def_tech.value)+"",n,r;return{c(){e=q("class "),n=q(t),r=q(" DefensiveTechniqueNode;")},l(s){e=M(s,"class "),n=M(s,t),r=M(s," DefensiveTechniqueNode;")},m(s,a){C(s,e,a),C(s,n,a),C(s,r,a)},p(s,a){a&2&&t!==(t=Oe(s[23].def_tech.value)+"")&&we(n,t)},d(s){s&&(v(e),v(n),v(r))}}}function Uw(i){let e,t=Oe(i[23].def_tech.value)+"",n,r;return{c(){e=q("class "),n=q(t),r=q(" SelectedDefensiveTechniqueNode;")},l(s){e=M(s,"class "),n=M(s,t),r=M(s," SelectedDefensiveTechniqueNode;")},m(s,a){C(s,e,a),C(s,n,a),C(s,r,a)},p(s,a){a&2&&t!==(t=Oe(s[23].def_tech.value)+"")&&we(n,t)},d(s){s&&(v(e),v(n),v(r))}}}function Ef(i){let e=i[3].edge_is_unique(i[23].def_tech_label.value,i[23].def_artifact_rel_label.value,i[23].def_artifact_label.value),t,n=e&&wf(i);return{c(){n&&n.c(),t=Re()},l(r){n&&n.l(r),t=Re()},m(r,s){n&&n.m(r,s),C(r,t,s)},p(r,s){s&10&&(e=r[3].edge_is_unique(r[23].def_tech_label.value,r[23].def_artifact_rel_label.value,r[23].def_artifact_label.value)),e?n?n.p(r,s):(n=wf(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){r&&v(t),n&&n.d(r)}}}function jw(i){let e,t,n=Ge(i[1].da_to_def.results.bindings),r=[];for(let s=0;s<n.length;s+=1)r[s]=Ef(gf(i,n,s));return{c(){e=q(`graph LR;
          `);for(let s=0;s<r.length;s+=1)r[s].c();t=Re()},l(s){e=M(s,`graph LR;
          `);for(let a=0;a<r.length;a+=1)r[a].l(s);t=Re()},m(s,a){C(s,e,a);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(s,a);C(s,t,a)},p(s,a){if(a&90){n=Ge(s[1].da_to_def.results.bindings);let l;for(l=0;l<n.length;l+=1){const o=gf(s,n,l);r[l]?r[l].p(o,a):(r[l]=Ef(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(s){s&&(v(e),v(t)),wt(r,s)}}}function kf(i){let e,t;return e=new An({props:{$$slots:{default:[jw]},$$scope:{ctx:i}}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r&262234&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function qw(i){let e,t,n,r,s,a,l,o,u,f,h,d,c,p=i[6].length+"",_,m,y,O,T;const N=i[12].header,g=Vt(N,i,i[18],bf),k=i[12].default,w=Vt(k,i,i[18],null),R=[Bw,Ow,Fw],S=[];function B(D,L){return D[1]?D[1].da_to_def.results.bindings.length>0?1:2:0}return l=B(i),o=S[l]=R[l](i),{c(){e=Y("dialog"),t=Y("div"),g&&g.c(),n=q(`
    Select Countermeasure Techniques
    `),w&&w.c(),r=ie(),s=Y("hr"),a=ie(),o.c(),u=ie(),f=Y("hr"),h=ie(),d=Y("button"),c=q("Insert ("),_=q(p),m=q(")"),this.h()},l(D){e=J(D,"DIALOG",{class:!0});var L=Ce(e);t=J(L,"DIV",{class:!0});var A=Ce(t);g&&g.l(A),n=M(A,`
    Select Countermeasure Techniques
    `),w&&w.l(A),r=ae(A),s=J(A,"HR",{}),a=ae(A),o.l(A),u=ae(A),f=J(A,"HR",{}),h=ae(A),d=J(A,"BUTTON",{class:!0});var I=Ce(d);c=M(I,"Insert ("),_=M(I,p),m=M(I,")"),I.forEach(v),A.forEach(v),L.forEach(v),this.h()},h(){d.autofocus=!0,ee(d,"class","svelte-1yq7x1p"),ee(t,"class","svelte-1yq7x1p"),ee(e,"class","svelte-1yq7x1p")},m(D,L){C(D,e,L),V(e,t),g&&g.m(t,null),V(t,n),w&&w.m(t,null),V(t,r),V(t,s),V(t,a),S[l].m(t,null),V(t,u),V(t,f),V(t,h),V(t,d),V(d,c),V(d,_),V(d,m),i[15](e),y=!0,d.focus(),O||(T=[ye(d,"click",i[9]),ye(t,"click",Wt(i[13])),ye(e,"close",i[16]),ye(e,"click",Dn(i[17]))],O=!0)},p(D,[L]){g&&g.p&&(!y||L&262144)&&zt(g,N,D,D[18],y?xt(N,D[18],L,Rw):Ht(D[18]),bf),w&&w.p&&(!y||L&262144)&&zt(w,k,D,D[18],y?xt(k,D[18],L,null):Ht(D[18]),null);let A=l;l=B(D),l===A?S[l].p(D,L):(ut(),de(S[A],1,1,()=>{S[A]=null}),ft(),o=S[l],o?o.p(D,L):(o=S[l]=R[l](D),o.c()),ue(o,1),o.m(t,u)),(!y||L&64)&&p!==(p=D[6].length+"")&&we(_,p)},i(D){y||(ue(g,D),ue(w,D),ue(o),y=!0)},o(D){de(g,D),de(w,D),de(o),y=!1},d(D){D&&v(e),g&&g.d(D),w&&w.d(D),S[l].d(),i[15](null),O=!1,ht(T)}}}function Mw(i,e,t){let n,r,s,{$$slots:a={},$$scope:l}=e,{show_defend_modal:o}=e,{parent_node:u}=e,{data:f}=e,h;const d=Gr();tt(i,d,B=>t(20,s=B));const c=$r();tt(i,c,B=>t(19,r=B));let p=new jn;function _(B){n.includes(B)?t(6,n=n.filter(D=>D!==B)):n.push(B),t(6,n)}window.da_to_def_callback=function(B){_(B)};function m(){let B=0,D=200,L=100;for(const A of n){let I=f.da_to_def.results.bindings.find(x=>Oe(x.def_tech.value)==A);I&&(Sn(d,c,u,"countermeasureSelectorNode",I.def_tech_label.value,"d3f:"+Oe(I.def_tech.value),u.data.sequence,u.position.x+B*D,u.position.y-L,182,63,I.def_artifact_rel_label.value,!1),B+=1)}d.set(s),c.set(r),h&&h.close(),t(6,n=[])}let y=new Set,O=[],T=[];bh(O,T)&&(T=[]);function N(B){for(const D of n){let L=f.da_to_def.results.bindings.find(A=>Oe(A.def_tech.value)==D);B.includes(L.def_tactic_label.value)&&t(6,n=n.filter(A=>A!==D))}t(6,n)}function g(B){Fr.call(this,i,B)}function k(B){T=B,t(4,T)}function w(B){Mt[B?"unshift":"push"](()=>{h=B,t(2,h)})}const R=()=>t(0,o=!1),S=()=>{h.close(),t(6,n=[])};return i.$$set=B=>{"show_defend_modal"in B&&t(0,o=B.show_defend_modal),"parent_node"in B&&t(10,u=B.parent_node),"data"in B&&t(1,f=B.data),"$$scope"in B&&t(18,l=B.$$scope)},i.$$.update=()=>{i.$$.dirty&5&&o&&h&&(h.showModal(),t(3,p=new jn)),i.$$.dirty&5&&!o&&h&&h.close(),i.$$.dirty&2050&&f&&(f.da_to_def.results.bindings.forEach(B=>{y.add(B.def_tactic_label.value)}),t(11,y),t(1,f)),i.$$.dirty&2048&&t(5,O=Array.from(y).sort(function(B,D){return Ga[B]-Ga[D]})),i.$$.dirty&16&&N(T),i.$$.dirty&24&&p.reset(T)},t(6,n=[]),[o,f,h,p,T,O,n,d,c,m,u,y,a,g,k,w,R,S,l]}class Vw extends yt{constructor(e){super(),Et(this,e,Mw,qw,it,{show_defend_modal:0,parent_node:10,data:1})}}function Df(i,e,t){const n=i.slice();return n[26]=e[t],n}function Af(i,e,t){const n=i.slice();return n[29]=e[t],n}function Cf(i,e,t){const n=i.slice();return n[32]=e[t],n}function Tf(i,e,t){const n=i.slice();return n[26]=e[t],n}function Nf(i,e,t){const n=i.slice();return n[29]=e[t],n}const zw=i=>({}),Sf=i=>({});function Hw(i){let e;return{c(){e=q("No related weaknesses in this release.")},l(t){e=M(t,"No related weaknesses in this release.")},m(t,n){C(t,e,n)},p:Me,i:Me,o:Me,d(t){t&&v(e)}}}function xw(i){let e,t;return e=new An({props:{$$slots:{default:[Gw]},$$scope:{ctx:i}}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r[0]&4194750&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function Xw(i){let e,t="Loading...";return{c(){e=Y("div"),e.textContent=t},l(n){e=J(n,"DIV",{"data-svelte-h":!0}),Ke(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(n,r){C(n,e,r)},p:Me,i:Me,o:Me,d(n){n&&v(e)}}}function If(i){let e,t=Ge(i[32]["d3f:outbound"]),n=[];for(let r=0;r<t.length;r+=1)n[r]=Ff(Tf(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Re()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Re()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);C(r,e,s)},p(r,s){if(s[0]&430){t=Ge(r[32]["d3f:outbound"]);let a;for(a=0;a<t.length;a+=1){const l=Tf(r,t,a);n[a]?n[a].p(l,s):(n[a]=Ff(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&v(e),wt(n,r)}}}function Pf(i){let e,t=i[32]["@id"]+"",n,r;return{c(){e=q("class "),n=q(t),r=q(" selected_inbound_node;")},l(s){e=M(s,"class "),n=M(s,t),r=M(s," selected_inbound_node;")},m(s,a){C(s,e,a),C(s,n,a),C(s,r,a)},p(s,a){a[0]&160&&t!==(t=s[32]["@id"]+"")&&we(n,t)},d(s){s&&(v(e),v(n),v(r))}}}function Rf(i){let e=i[32]["@id"]+"",t,n,r=i[32]["rdfs:label"][0]+"",s,a,l="-->",o,u,f=Oe(i[26]["@id"])+"",h,d,c=i[29]["@id"]+"",p,_,m=i[7].i(i[29]["@id"])["rdfs:label"][0]+"",y,O,T=i[32]["@id"]+"",N,g,k=i[32]["@id"]+"",w,R,S,B,D=i[8].includes(i[32]["@id"]),L,A=i[29]["@id"]+"",I,x,j=i[29]["@id"]+"",re,Z,$,G,X=i[32]["@id"]+"",oe,Q,le=i[32]["@id"]+"",Ve,ze,ke=i[29]["@id"]+"",Ie,ve,he=i[3](i[29])+"",Fe,ot,He=D&&Pf(i);return{c(){t=q(e),n=q('["'),s=q(r),a=q('"] '),o=q(l),u=q(" | "),h=q(f),d=q(" | "),p=q(c),_=q('["'),y=q(m),O=q(`"];
                class `),N=q(T),g=q(" inbound_node; style "),w=q(k),R=q(" fill:"),S=q(i[1]),B=q(`;
                `),He&&He.c(),L=q(`
                class `),I=q(A),x=q(" RootArtifactNode; style "),re=q(j),Z=q(" fill:"),$=q(i[2]),G=q(`;
                click `),oe=q(X),Q=q(` href "javascript:da_to_weak_callback('`),Ve=q(le),ze=q(`')"; click `),Ie=q(ke),ve=q(' href "'),Fe=q(he),ot=q('";')},l(fe){t=M(fe,e),n=M(fe,'["'),s=M(fe,r),a=M(fe,'"] '),o=M(fe,l),u=M(fe," | "),h=M(fe,f),d=M(fe," | "),p=M(fe,c),_=M(fe,'["'),y=M(fe,m),O=M(fe,`"];
                class `),N=M(fe,T),g=M(fe," inbound_node; style "),w=M(fe,k),R=M(fe," fill:"),S=M(fe,i[1]),B=M(fe,`;
                `),He&&He.l(fe),L=M(fe,`
                class `),I=M(fe,A),x=M(fe," RootArtifactNode; style "),re=M(fe,j),Z=M(fe," fill:"),$=M(fe,i[2]),G=M(fe,`;
                click `),oe=M(fe,X),Q=M(fe,` href "javascript:da_to_weak_callback('`),Ve=M(fe,le),ze=M(fe,`')"; click `),Ie=M(fe,ke),ve=M(fe,' href "'),Fe=M(fe,he),ot=M(fe,'";')},m(fe,Te){C(fe,t,Te),C(fe,n,Te),C(fe,s,Te),C(fe,a,Te),C(fe,o,Te),C(fe,u,Te),C(fe,h,Te),C(fe,d,Te),C(fe,p,Te),C(fe,_,Te),C(fe,y,Te),C(fe,O,Te),C(fe,N,Te),C(fe,g,Te),C(fe,w,Te),C(fe,R,Te),C(fe,S,Te),C(fe,B,Te),He&&He.m(fe,Te),C(fe,L,Te),C(fe,I,Te),C(fe,x,Te),C(fe,re,Te),C(fe,Z,Te),C(fe,$,Te),C(fe,G,Te),C(fe,oe,Te),C(fe,Q,Te),C(fe,Ve,Te),C(fe,ze,Te),C(fe,Ie,Te),C(fe,ve,Te),C(fe,Fe,Te),C(fe,ot,Te)},p(fe,Te){Te[0]&160&&e!==(e=fe[32]["@id"]+"")&&we(t,e),Te[0]&160&&r!==(r=fe[32]["rdfs:label"][0]+"")&&we(s,r),Te[0]&160&&f!==(f=Oe(fe[26]["@id"])+"")&&we(h,f),Te[0]&160&&c!==(c=fe[29]["@id"]+"")&&we(p,c),Te[0]&160&&m!==(m=fe[7].i(fe[29]["@id"])["rdfs:label"][0]+"")&&we(y,m),Te[0]&160&&T!==(T=fe[32]["@id"]+"")&&we(N,T),Te[0]&160&&k!==(k=fe[32]["@id"]+"")&&we(w,k),Te[0]&2&&we(S,fe[1]),Te[0]&416&&(D=fe[8].includes(fe[32]["@id"])),D?He?He.p(fe,Te):(He=Pf(fe),He.c(),He.m(L.parentNode,L)):He&&(He.d(1),He=null),Te[0]&160&&A!==(A=fe[29]["@id"]+"")&&we(I,A),Te[0]&160&&j!==(j=fe[29]["@id"]+"")&&we(re,j),Te[0]&4&&we($,fe[2]),Te[0]&160&&X!==(X=fe[32]["@id"]+"")&&we(oe,X),Te[0]&160&&le!==(le=fe[32]["@id"]+"")&&we(Ve,le),Te[0]&160&&ke!==(ke=fe[29]["@id"]+"")&&we(Ie,ke),Te[0]&168&&he!==(he=fe[3](fe[29])+"")&&we(Fe,he)},d(fe){fe&&(v(t),v(n),v(s),v(a),v(o),v(u),v(h),v(d),v(p),v(_),v(y),v(O),v(N),v(g),v(w),v(R),v(S),v(B),v(L),v(I),v(x),v(re),v(Z),v($),v(G),v(oe),v(Q),v(Ve),v(ze),v(Ie),v(ve),v(Fe),v(ot)),He&&He.d(fe)}}}function Ff(i){let e,t=Ge(i[32][i[26]["@id"]]),n=[];for(let r=0;r<t.length;r+=1)n[r]=Rf(Nf(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Re()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Re()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);C(r,e,s)},p(r,s){if(s[0]&430){t=Ge(r[32][r[26]["@id"]]);let a;for(a=0;a<t.length;a+=1){const l=Nf(r,t,a);n[a]?n[a].p(l,s):(n[a]=Rf(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&v(e),wt(n,r)}}}function Of(i){let e,t=i[32]["d3f:outbound"]&&If(i);return{c(){t&&t.c(),e=Re()},l(n){t&&t.l(n),e=Re()},m(n,r){t&&t.m(n,r),C(n,e,r)},p(n,r){n[32]["d3f:outbound"]?t?t.p(n,r):(t=If(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&v(e),t&&t.d(n)}}}function Bf(i){let e,t=Ge(i[7].i(i[5].description["@id"])["d3f:outbound"]),n=[];for(let r=0;r<t.length;r+=1)n[r]=Uf(Df(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Re()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Re()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);C(r,e,s)},p(r,s){if(s[0]&184){t=Ge(r[7].i(r[5].description["@id"])["d3f:outbound"]);let a;for(a=0;a<t.length;a+=1){const l=Df(r,t,a);n[a]?n[a].p(l,s):(n[a]=Uf(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&v(e),wt(n,r)}}}function Lf(i){let e=i[5].description["@id"]+"",t,n,r=i[7].i(i[5].description["@id"])["rdfs:label"][0]+"",s,a,l="-->",o,u,f=Oe(i[26]["@id"])+"",h,d,c=i[29]["@id"]+"",p,_,m=i[7].graph[i[7].index[i[29]["@id"]]]["rdfs:label"][0]+"",y,O,T=i[5].description["@id"]+"",N,g,k=i[29]["@id"]+"",w,R,S=i[5].description["@id"]+"",B,D,L=i[3](i[5].description["@id"])+"",A,I,x=i[29]["@id"]+"",j,re,Z=i[4](i[29])+"",$,G;return{c(){t=q(e),n=q('["'),s=q(r),a=q('"] '),o=q(l),u=q(" | "),h=q(f),d=q(" | "),p=q(c),_=q('["'),y=q(m),O=q('"]; class '),N=q(T),g=q(" RootArtifactNode; class "),w=q(k),R=q(` ArtifactNode;
              click `),B=q(S),D=q(' href "'),A=q(L),I=q('"; click '),j=q(x),re=q(' href "'),$=q(Z),G=q('";')},l(X){t=M(X,e),n=M(X,'["'),s=M(X,r),a=M(X,'"] '),o=M(X,l),u=M(X," | "),h=M(X,f),d=M(X," | "),p=M(X,c),_=M(X,'["'),y=M(X,m),O=M(X,'"]; class '),N=M(X,T),g=M(X," RootArtifactNode; class "),w=M(X,k),R=M(X,` ArtifactNode;
              click `),B=M(X,S),D=M(X,' href "'),A=M(X,L),I=M(X,'"; click '),j=M(X,x),re=M(X,' href "'),$=M(X,Z),G=M(X,'";')},m(X,oe){C(X,t,oe),C(X,n,oe),C(X,s,oe),C(X,a,oe),C(X,o,oe),C(X,u,oe),C(X,h,oe),C(X,d,oe),C(X,p,oe),C(X,_,oe),C(X,y,oe),C(X,O,oe),C(X,N,oe),C(X,g,oe),C(X,w,oe),C(X,R,oe),C(X,B,oe),C(X,D,oe),C(X,A,oe),C(X,I,oe),C(X,j,oe),C(X,re,oe),C(X,$,oe),C(X,G,oe)},p(X,oe){oe[0]&32&&e!==(e=X[5].description["@id"]+"")&&we(t,e),oe[0]&160&&r!==(r=X[7].i(X[5].description["@id"])["rdfs:label"][0]+"")&&we(s,r),oe[0]&160&&f!==(f=Oe(X[26]["@id"])+"")&&we(h,f),oe[0]&160&&c!==(c=X[29]["@id"]+"")&&we(p,c),oe[0]&160&&m!==(m=X[7].graph[X[7].index[X[29]["@id"]]]["rdfs:label"][0]+"")&&we(y,m),oe[0]&32&&T!==(T=X[5].description["@id"]+"")&&we(N,T),oe[0]&160&&k!==(k=X[29]["@id"]+"")&&we(w,k),oe[0]&32&&S!==(S=X[5].description["@id"]+"")&&we(B,S),oe[0]&40&&L!==(L=X[3](X[5].description["@id"])+"")&&we(A,L),oe[0]&160&&x!==(x=X[29]["@id"]+"")&&we(j,x),oe[0]&176&&Z!==(Z=X[4](X[29])+"")&&we($,Z)},d(X){X&&(v(t),v(n),v(s),v(a),v(o),v(u),v(h),v(d),v(p),v(_),v(y),v(O),v(N),v(g),v(w),v(R),v(B),v(D),v(A),v(I),v(j),v(re),v($),v(G))}}}function Uf(i){let e,t=Ge(i[7].i(i[5].description["@id"])[i[26]["@id"]]),n=[];for(let r=0;r<t.length;r+=1)n[r]=Lf(Af(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Re()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Re()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);C(r,e,s)},p(r,s){if(s[0]&184){t=Ge(r[7].i(r[5].description["@id"])[r[26]["@id"]]);let a;for(a=0;a<t.length;a+=1){const l=Af(r,t,a);n[a]?n[a].p(l,s):(n[a]=Lf(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&v(e),wt(n,r)}}}function Gw(i){let e,t,n=i[7].i(i[5].description["@id"])&&i[7].i(i[5].description["@id"])["d3f:outbound"],r,s=Ge(i[7].graph.filter(i[18])),a=[];for(let o=0;o<s.length;o+=1)a[o]=Of(Cf(i,s,o));let l=n&&Bf(i);return{c(){e=q(`graph LR;
        `);for(let o=0;o<a.length;o+=1)a[o].c();t=ie(),l&&l.c(),r=Re()},l(o){e=M(o,`graph LR;
        `);for(let u=0;u<a.length;u+=1)a[u].l(o);t=ae(o),l&&l.l(o),r=Re()},m(o,u){C(o,e,u);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(o,u);C(o,t,u),l&&l.m(o,u),C(o,r,u)},p(o,u){if(u[0]&430){s=Ge(o[7].graph.filter(o[18]));let f;for(f=0;f<s.length;f+=1){const h=Cf(o,s,f);a[f]?a[f].p(h,u):(a[f]=Of(h),a[f].c(),a[f].m(t.parentNode,t))}for(;f<a.length;f+=1)a[f].d(1);a.length=s.length}u[0]&160&&(n=o[7].i(o[5].description["@id"])&&o[7].i(o[5].description["@id"])["d3f:outbound"]),n?l?l.p(o,u):(l=Bf(o),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(o){o&&(v(e),v(t),v(r)),wt(a,o),l&&l.d(o)}}}function $w(i){let e,t,n,r,s,a,l,o,u,f,h,d,c,p=i[8].length+"",_,m,y,O,T;const N=i[16].header,g=Vt(N,i,i[22],Sf),k=i[16].default,w=Vt(k,i,i[22],null),R=[Xw,xw,Hw],S=[];function B(D,L){return D[5]?D[7].graph.length>0?1:2:0}return l=B(i),o=S[l]=R[l](i),{c(){e=Y("dialog"),t=Y("div"),g&&g.c(),n=q(`
    Select Weaknesses
    `),w&&w.c(),r=ie(),s=Y("hr"),a=ie(),o.c(),u=ie(),f=Y("hr"),h=ie(),d=Y("button"),c=q("Insert ("),_=q(p),m=q(")"),this.h()},l(D){e=J(D,"DIALOG",{class:!0});var L=Ce(e);t=J(L,"DIV",{class:!0});var A=Ce(t);g&&g.l(A),n=M(A,`
    Select Weaknesses
    `),w&&w.l(A),r=ae(A),s=J(A,"HR",{}),a=ae(A),o.l(A),u=ae(A),f=J(A,"HR",{}),h=ae(A),d=J(A,"BUTTON",{class:!0});var I=Ce(d);c=M(I,"Insert ("),_=M(I,p),m=M(I,")"),I.forEach(v),A.forEach(v),L.forEach(v),this.h()},h(){d.autofocus=!0,ee(d,"class","svelte-1resfch"),ee(t,"class","svelte-1resfch"),ee(e,"class","svelte-1resfch")},m(D,L){C(D,e,L),V(e,t),g&&g.m(t,null),V(t,n),w&&w.m(t,null),V(t,r),V(t,s),V(t,a),S[l].m(t,null),V(t,u),V(t,f),V(t,h),V(t,d),V(d,c),V(d,_),V(d,m),i[19](e),y=!0,d.focus(),O||(T=[ye(d,"click",i[11]),ye(t,"click",Wt(i[17])),ye(e,"close",i[20]),ye(e,"click",Dn(i[21]))],O=!0)},p(D,L){g&&g.p&&(!y||L[0]&4194304)&&zt(g,N,D,D[22],y?xt(N,D[22],L,zw):Ht(D[22]),Sf),w&&w.p&&(!y||L[0]&4194304)&&zt(w,k,D,D[22],y?xt(k,D[22],L,null):Ht(D[22]),null);let A=l;l=B(D),l===A?S[l].p(D,L):(ut(),de(S[A],1,1,()=>{S[A]=null}),ft(),o=S[l],o?o.p(D,L):(o=S[l]=R[l](D),o.c()),ue(o,1),o.m(t,u)),(!y||L[0]&256)&&p!==(p=D[8].length+"")&&we(_,p)},i(D){y||(ue(g,D),ue(w,D),ue(o),y=!0)},o(D){de(g,D),de(w,D),de(o),y=!1},d(D){D&&v(e),g&&g.d(D),w&&w.d(D),S[l].d(),i[19](null),O=!1,ht(T)}}}function Qw(i,e,t){let n,r,s,{$$slots:a={},$$scope:l}=e,{outbound_color:o="#fff4dd"}=e,{inbound_color:u="#fff4dd"}=e,{root_color:f="#fff4dd"}=e,{link_function:h=A=>`/dao/artifact/${A["@id"]}`}=e,{inbound_link_function:d=h}=e,{root_link_function:c=A=>`/dao/artifact/${A["@id"]}`}=e,{outbound_link_function:p=h}=e,{show_weakness_modal:_}=e,{parent_node:m}=e,{data:y}=e,O;const T=Gr();tt(i,T,A=>t(24,s=A));const N=$r();tt(i,N,A=>t(23,r=A));let g;function k(A){n.includes(A)?t(8,n=n.filter(I=>I!==A)):n.push(A),t(8,n),t(8,n)}window.da_to_weak_callback=function(A){k(A)};function w(){let A=0,I=200,x=100;for(const j of n){let re=y.da_to_weak["@graph"].find(Z=>Z["@id"]==j);re&&(Sn(T,N,m,"vulnerabilitySelectorNode",re["rdfs:label"],re["d3f:cwe-id"],m.data.sequence,m.position.x+A*I,m.position.y+x,182,63,re["d3f:outbound"][0]["@id"].replace("d3f:",""),!1),A+=1)}T.set(s),N.set(r),O&&O.close(),t(8,n=[])}function R(A){Fr.call(this,i,A)}const S=A=>A["@id"]!=y.description["@id"];function B(A){Mt[A?"unshift":"push"](()=>{O=A,t(6,O)})}const D=()=>t(0,_=!1),L=()=>{O.close(),t(8,n=[])};return i.$$set=A=>{"outbound_color"in A&&t(12,o=A.outbound_color),"inbound_color"in A&&t(1,u=A.inbound_color),"root_color"in A&&t(2,f=A.root_color),"link_function"in A&&t(13,h=A.link_function),"inbound_link_function"in A&&t(14,d=A.inbound_link_function),"root_link_function"in A&&t(3,c=A.root_link_function),"outbound_link_function"in A&&t(4,p=A.outbound_link_function),"show_weakness_modal"in A&&t(0,_=A.show_weakness_modal),"parent_node"in A&&t(15,m=A.parent_node),"data"in A&&t(5,y=A.data),"$$scope"in A&&t(22,l=A.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&65&&_&&O&&O.showModal(),i.$$.dirty[0]&65&&!_&&O&&O.close(),i.$$.dirty[0]&32&&y&&t(7,g=new Al(y.da_to_weak,{index:!0}))},t(8,n=[]),[_,u,f,c,p,y,O,g,n,T,N,w,o,h,d,m,a,R,S,B,D,L,l]}class Ww extends yt{constructor(e){super(),Et(this,e,Qw,$w,it,{outbound_color:12,inbound_color:1,root_color:2,link_function:13,inbound_link_function:14,root_link_function:3,outbound_link_function:4,show_weakness_modal:0,parent_node:15,data:5},null,[-1,-1])}}function jf(i,e,t){const n=i.slice();return n[31]=e[t],n}function qf(i,e,t){const n=i.slice();return n[34]=e[t],n}function Mf(i,e,t){const n=i.slice();return n[37]=e[t],n}const Yw=i=>({}),Vf=i=>({});function Jw(i){let e;return{c(){e=q("No related parts/control in this release")},l(t){e=M(t,"No related parts/control in this release")},m(t,n){C(t,e,n)},p:Me,i:Me,o:Me,d(t){t&&v(e)}}}function Kw(i){let e,t;return e=new An({props:{$$slots:{default:[ey]},$$scope:{ctx:i}}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r[0]&134217934&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function Zw(i){let e,t="Loading...";return{c(){e=Y("div"),e.textContent=t},l(n){e=J(n,"DIV",{"data-svelte-h":!0}),Ke(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(n,r){C(n,e,r)},p:Me,i:Me,o:Me,d(n){n&&v(e)}}}function zf(i){let e,t=Ge(i[31]["d3f:outbound"].filter(i[23])),n=[];for(let r=0;r<t.length;r+=1)n[r]=Wf(qf(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Re()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Re()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);C(r,e,s)},p(r,s){if(s[0]&206){t=Ge(r[31]["d3f:outbound"].filter(r[23]));let a;for(a=0;a<t.length;a+=1){const l=qf(r,t,a);n[a]?n[a].p(l,s):(n[a]=Wf(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&v(e),wt(n,r)}}}function Hf(i){let e,t,n=i[31]["@id"]!=i[2].data.d3f_class&&xf(i),r=i[37]["@id"]!=i[2].data.d3f_class&&Xf(i);return{c(){n&&n.c(),e=ie(),r&&r.c(),t=Re()},l(s){n&&n.l(s),e=ae(s),r&&r.l(s),t=Re()},m(s,a){n&&n.m(s,a),C(s,e,a),r&&r.m(s,a),C(s,t,a)},p(s,a){s[31]["@id"]!=s[2].data.d3f_class?n?n.p(s,a):(n=xf(s),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),s[37]["@id"]!=s[2].data.d3f_class?r?r.p(s,a):(r=Xf(s),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d(s){s&&(v(e),v(t)),n&&n.d(s),r&&r.d(s)}}}function xf(i){let e,t=i[31]["@id"]+"",n,r;return{c(){e=q("class "),n=q(t),r=q(" selected_outbound_node;")},l(s){e=M(s,"class "),n=M(s,t),r=M(s," selected_outbound_node;")},m(s,a){C(s,e,a),C(s,n,a),C(s,r,a)},p(s,a){a[0]&72&&t!==(t=s[31]["@id"]+"")&&we(n,t)},d(s){s&&(v(e),v(n),v(r))}}}function Xf(i){let e,t=i[37]["@id"]+"",n,r;return{c(){e=q("class "),n=q(t),r=q(" selected_outbound_node;")},l(s){e=M(s,"class "),n=M(s,t),r=M(s," selected_outbound_node;")},m(s,a){C(s,e,a),C(s,n,a),C(s,r,a)},p(s,a){a[0]&74&&t!==(t=s[37]["@id"]+"")&&we(n,t)},d(s){s&&(v(e),v(n),v(r))}}}function Gf(i){let e,t=i[31]["@id"]+"",n,r,s=i[31]["@id"]+"",a,l,o=Oe(i[34]["@id"])+"",u,f,h=i[37]["@id"]+"",d,c;return{c(){e=q("click "),n=q(t),r=q(` href "javascript:da_to_neighbors_callback('`),a=q(s),l=q("', '"),u=q(o),f=q("','"),d=q(h),c=q(`')";`)},l(p){e=M(p,"click "),n=M(p,t),r=M(p,` href "javascript:da_to_neighbors_callback('`),a=M(p,s),l=M(p,"', '"),u=M(p,o),f=M(p,"','"),d=M(p,h),c=M(p,`')";`)},m(p,_){C(p,e,_),C(p,n,_),C(p,r,_),C(p,a,_),C(p,l,_),C(p,u,_),C(p,f,_),C(p,d,_),C(p,c,_)},p(p,_){_[0]&72&&t!==(t=p[31]["@id"]+"")&&we(n,t),_[0]&72&&s!==(s=p[31]["@id"]+"")&&we(a,s),_[0]&74&&o!==(o=Oe(p[34]["@id"])+"")&&we(u,o),_[0]&74&&h!==(h=p[37]["@id"]+"")&&we(d,h)},d(p){p&&(v(e),v(n),v(r),v(a),v(l),v(u),v(f),v(d),v(c))}}}function $f(i){let e,t=i[37]["@id"]+"",n,r,s=i[31]["@id"]+"",a,l,o=Oe(i[34]["@id"])+"",u,f,h=i[37]["@id"]+"",d,c;return{c(){e=q("click "),n=q(t),r=q(` href "javascript:da_to_neighbors_callback('`),a=q(s),l=q("', '"),u=q(o),f=q("','"),d=q(h),c=q(`')";`)},l(p){e=M(p,"click "),n=M(p,t),r=M(p,` href "javascript:da_to_neighbors_callback('`),a=M(p,s),l=M(p,"', '"),u=M(p,o),f=M(p,"','"),d=M(p,h),c=M(p,`')";`)},m(p,_){C(p,e,_),C(p,n,_),C(p,r,_),C(p,a,_),C(p,l,_),C(p,u,_),C(p,f,_),C(p,d,_),C(p,c,_)},p(p,_){_[0]&74&&t!==(t=p[37]["@id"]+"")&&we(n,t),_[0]&72&&s!==(s=p[31]["@id"]+"")&&we(a,s),_[0]&74&&o!==(o=Oe(p[34]["@id"])+"")&&we(u,o),_[0]&74&&h!==(h=p[37]["@id"]+"")&&we(d,h)},d(p){p&&(v(e),v(n),v(r),v(a),v(l),v(u),v(f),v(d),v(c))}}}function Qf(i){let e=i[31]["@id"]+"",t,n,r=i[31]["rdfs:label"][0]+"",s,a,l="-->",o,u,f=Oe(i[34]["@id"])+"",h,d,c=i[37]["@id"]+"",p,_,m=i[6].i(i[37]["@id"])["rdfs:label"][0]+"",y,O,T=i[37]["@id"]+"",N,g,k=i[7].some(B),w,R,S;function B(...I){return i[21](i[31],i[34],i[37],...I)}let D=k&&Hf(i),L=i[31]["@id"]!=i[2].data.d3f_class&&Gf(i),A=i[37]["@id"]!=i[2].data.d3f_class&&$f(i);return{c(){t=q(e),n=q('["'),s=q(r),a=q('"] '),o=q(l),u=q(" | "),h=q(f),d=q(" | "),p=q(c),_=q('["'),y=q(m),O=q(`"];
                class `),N=q(T),g=q(` outbound;
                `),D&&D.c(),w=ie(),L&&L.c(),R=ie(),A&&A.c(),S=Re()},l(I){t=M(I,e),n=M(I,'["'),s=M(I,r),a=M(I,'"] '),o=M(I,l),u=M(I," | "),h=M(I,f),d=M(I," | "),p=M(I,c),_=M(I,'["'),y=M(I,m),O=M(I,`"];
                class `),N=M(I,T),g=M(I,` outbound;
                `),D&&D.l(I),w=ae(I),L&&L.l(I),R=ae(I),A&&A.l(I),S=Re()},m(I,x){C(I,t,x),C(I,n,x),C(I,s,x),C(I,a,x),C(I,o,x),C(I,u,x),C(I,h,x),C(I,d,x),C(I,p,x),C(I,_,x),C(I,y,x),C(I,O,x),C(I,N,x),C(I,g,x),D&&D.m(I,x),C(I,w,x),L&&L.m(I,x),C(I,R,x),A&&A.m(I,x),C(I,S,x)},p(I,x){i=I,x[0]&72&&e!==(e=i[31]["@id"]+"")&&we(t,e),x[0]&72&&r!==(r=i[31]["rdfs:label"][0]+"")&&we(s,r),x[0]&74&&f!==(f=Oe(i[34]["@id"])+"")&&we(h,f),x[0]&74&&c!==(c=i[37]["@id"]+"")&&we(p,c),x[0]&74&&m!==(m=i[6].i(i[37]["@id"])["rdfs:label"][0]+"")&&we(y,m),x[0]&74&&T!==(T=i[37]["@id"]+"")&&we(N,T),x[0]&202&&(k=i[7].some(B)),k?D?D.p(i,x):(D=Hf(i),D.c(),D.m(w.parentNode,w)):D&&(D.d(1),D=null),i[31]["@id"]!=i[2].data.d3f_class?L?L.p(i,x):(L=Gf(i),L.c(),L.m(R.parentNode,R)):L&&(L.d(1),L=null),i[37]["@id"]!=i[2].data.d3f_class?A?A.p(i,x):(A=$f(i),A.c(),A.m(S.parentNode,S)):A&&(A.d(1),A=null)},d(I){I&&(v(t),v(n),v(s),v(a),v(o),v(u),v(h),v(d),v(p),v(_),v(y),v(O),v(N),v(g),v(w),v(R),v(S)),D&&D.d(I),L&&L.d(I),A&&A.d(I)}}}function Wf(i){let e,t=Ge(i[31][i[34]["@id"]]),n=[];for(let r=0;r<t.length;r+=1)n[r]=Qf(Mf(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Re()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Re()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);C(r,e,s)},p(r,s){if(s[0]&206){t=Ge(r[31][r[34]["@id"]]);let a;for(a=0;a<t.length;a+=1){const l=Mf(r,t,a);n[a]?n[a].p(l,s):(n[a]=Qf(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&v(e),wt(n,r)}}}function Yf(i){let e,t=i[31]["d3f:outbound"]&&zf(i);return{c(){t&&t.c(),e=Re()},l(n){t&&t.l(n),e=Re()},m(n,r){t&&t.m(n,r),C(n,e,r)},p(n,r){n[31]["d3f:outbound"]?t?t.p(n,r):(t=zf(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&v(e),t&&t.d(n)}}}function ey(i){let e,t,n=Ge(i[6].graph.filter(i[22])),r=[];for(let s=0;s<n.length;s+=1)r[s]=Yf(jf(i,n,s));return{c(){e=q(`graph LR;
        `);for(let s=0;s<r.length;s+=1)r[s].c();t=Re()},l(s){e=M(s,`graph LR;
        `);for(let a=0;a<r.length;a+=1)r[a].l(s);t=Re()},m(s,a){C(s,e,a);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(s,a);C(s,t,a)},p(s,a){if(a[0]&206){n=Ge(s[6].graph.filter(s[22]));let l;for(l=0;l<n.length;l+=1){const o=jf(s,n,l);r[l]?r[l].p(o,a):(r[l]=Yf(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(s){s&&(v(e),v(t)),wt(r,s)}}}function ty(i){let e,t,n,r,s,a,l,o,u,f,h,d,c,p=i[7].length+"",_,m,y,O,T;const N=i[19].header,g=Vt(N,i,i[27],Vf),k=i[19].default,w=Vt(k,i,i[27],null),R=[Zw,Kw,Jw],S=[];function B(D,L){return D[3]?D[5]&&D[6].graph.length>0?1:2:0}return l=B(i),o=S[l]=R[l](i),{c(){e=Y("dialog"),t=Y("div"),g&&g.c(),n=q(`
    Select Parts/Control Neighbors
    `),w&&w.c(),r=ie(),s=Y("hr"),a=ie(),o.c(),u=ie(),f=Y("hr"),h=ie(),d=Y("button"),c=q("Insert ("),_=q(p),m=q(")"),this.h()},l(D){e=J(D,"DIALOG",{class:!0});var L=Ce(e);t=J(L,"DIV",{class:!0});var A=Ce(t);g&&g.l(A),n=M(A,`
    Select Parts/Control Neighbors
    `),w&&w.l(A),r=ae(A),s=J(A,"HR",{}),a=ae(A),o.l(A),u=ae(A),f=J(A,"HR",{}),h=ae(A),d=J(A,"BUTTON",{class:!0});var I=Ce(d);c=M(I,"Insert ("),_=M(I,p),m=M(I,")"),I.forEach(v),A.forEach(v),L.forEach(v),this.h()},h(){d.autofocus=!0,ee(d,"class","svelte-x2no78"),ee(t,"class","svelte-x2no78"),ee(e,"class","svelte-x2no78")},m(D,L){C(D,e,L),V(e,t),g&&g.m(t,null),V(t,n),w&&w.m(t,null),V(t,r),V(t,s),V(t,a),S[l].m(t,null),V(t,u),V(t,f),V(t,h),V(t,d),V(d,c),V(d,_),V(d,m),i[24](e),y=!0,d.focus(),O||(T=[ye(d,"click",i[10]),ye(t,"click",Wt(i[20])),ye(e,"close",i[25]),ye(e,"click",Dn(i[26]))],O=!0)},p(D,L){g&&g.p&&(!y||L[0]&134217728)&&zt(g,N,D,D[27],y?xt(N,D[27],L,Yw):Ht(D[27]),Vf),w&&w.p&&(!y||L[0]&134217728)&&zt(w,k,D,D[27],y?xt(k,D[27],L,null):Ht(D[27]),null);let A=l;l=B(D),l===A?S[l].p(D,L):(ut(),de(S[A],1,1,()=>{S[A]=null}),ft(),o=S[l],o?o.p(D,L):(o=S[l]=R[l](D),o.c()),ue(o,1),o.m(t,u)),(!y||L[0]&128)&&p!==(p=D[7].length+"")&&we(_,p)},i(D){y||(ue(g,D),ue(w,D),ue(o),y=!0)},o(D){de(g,D),de(w,D),de(o),y=!1},d(D){D&&v(e),g&&g.d(D),w&&w.d(D),S[l].d(),i[24](null),O=!1,ht(T)}}}function ry(i,e,t){let n,r,s,{$$slots:a={},$$scope:l}=e,{empty_message:o="has no direct neighbors in this release."}=e,{outbound_color:u="#fff4dd"}=e,{inbound_color:f="#fff4dd"}=e,{root_color:h="#fff4dd"}=e,{link_function:d=Z=>`/dao/artifact/${Z["@id"]}`}=e,{inbound_link_function:c=d}=e,{root_link_function:p=Z=>`/dao/artifact/${Z["@id"]}`}=e,{outbound_link_function:_=d}=e,{show_neighbors_modal:m}=e,{neighbor_filter_labels:y}=e,{parent_node:O}=e,{data:T}=e,N,g=!1;const k=Gr();tt(i,k,Z=>t(29,s=Z));const w=$r();tt(i,w,Z=>t(28,r=Z));let R;function S(Z){n.some($=>$.source==Z.source&&$.relation==Z.relation&&$.target==Z.target)?t(7,n=n.filter($=>$.source!=Z.source||$.relation!=Z.relation||$.target!=Z.target)):n.push(Z),t(7,n),t(7,n)}window.da_to_neighbors_callback=function(Z,$,G){S({source:Z,relation:$,target:G})};function B(){let Z=0,$=200,G=100;for(const X of n){let oe=T.neighbors["@graph"].find(le=>le["@id"]==X.source),Q=T.neighbors["@graph"].find(le=>le["@id"]==X.target);if(oe&&Q){let le=O.data.d3f_class==oe["@id"],Ve=le?Q:oe;Sn(k,w,O,"artifactSelectorNode",Ve["rdfs:label"][0],Ve["@id"],O.data.sequence,O.position.x+Z*$,le?O.position.y+G:O.position.y-G,182,63,X.relation,le),Z+=1}}k.set(s),w.set(r),N&&(N.close(),t(5,g=!1)),t(7,n=[])}function D(Z){Fr.call(this,i,Z)}const L=(Z,$,G,X)=>X.source==Z["@id"]&&X.relation==Oe($["@id"])&&X.target==G["@id"],A=Z=>Z["@id"]!=T.description["@id"],I=Z=>y.includes(Z["@id"]);function x(Z){Mt[Z?"unshift":"push"](()=>{N=Z,t(4,N)})}const j=()=>t(0,m=!1),re=()=>{N.close(),t(7,n=[])};return i.$$set=Z=>{"empty_message"in Z&&t(11,o=Z.empty_message),"outbound_color"in Z&&t(12,u=Z.outbound_color),"inbound_color"in Z&&t(13,f=Z.inbound_color),"root_color"in Z&&t(14,h=Z.root_color),"link_function"in Z&&t(15,d=Z.link_function),"inbound_link_function"in Z&&t(16,c=Z.inbound_link_function),"root_link_function"in Z&&t(17,p=Z.root_link_function),"outbound_link_function"in Z&&t(18,_=Z.outbound_link_function),"show_neighbors_modal"in Z&&t(0,m=Z.show_neighbors_modal),"neighbor_filter_labels"in Z&&t(1,y=Z.neighbor_filter_labels),"parent_node"in Z&&t(2,O=Z.parent_node),"data"in Z&&t(3,T=Z.data),"$$scope"in Z&&t(27,l=Z.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&17&&m&&N&&N.showModal(),i.$$.dirty[0]&17&&!m&&N&&N.close(),i.$$.dirty[0]&14&&T&&(t(5,g=!1),T.neighbors["@graph"].find(Z=>Z["@id"]==O.data.d3f_class),T.neighbors["@graph"].some(Z=>Z["d3f:outbound"]&&y.some($=>Z["d3f:outbound"].some(G=>G["@id"]==$)))&&(t(5,g=!0),t(6,R=new Al(T.neighbors,{index:!0}))))},t(7,n=[]),[m,y,O,T,N,g,R,n,k,w,B,o,u,f,h,d,c,p,_,a,D,L,A,I,x,j,re,l]}class ny extends yt{constructor(e){super(),Et(this,e,ry,ty,it,{empty_message:11,outbound_color:12,inbound_color:13,root_color:14,link_function:15,inbound_link_function:16,root_link_function:17,outbound_link_function:18,show_neighbors_modal:0,neighbor_filter_labels:1,parent_node:2,data:3},null,[-1,-1])}}function Jf(i,e,t){const n=i.slice();return n[26]=e[t],n}function Kf(i,e,t){const n=i.slice();return n[29]=e[t],n}function Zf(i,e,t){const n=i.slice();return n[32]=e[t],n}function ec(i,e,t){const n=i.slice();return n[26]=e[t],n}function tc(i,e,t){const n=i.slice();return n[29]=e[t],n}const iy=i=>({}),rc=i=>({});function ay(i){let e;return{c(){e=q("No related sensors in this release.")},l(t){e=M(t,"No related sensors in this release.")},m(t,n){C(t,e,n)},p:Me,i:Me,o:Me,d(t){t&&v(e)}}}function sy(i){let e,t;return e=new An({props:{$$slots:{default:[oy]},$$scope:{ctx:i}}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r[0]&4194750&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function ly(i){let e,t="Loading...";return{c(){e=Y("div"),e.textContent=t},l(n){e=J(n,"DIV",{"data-svelte-h":!0}),Ke(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(n,r){C(n,e,r)},p:Me,i:Me,o:Me,d(n){n&&v(e)}}}function nc(i){let e,t=Ge(i[32]["d3f:outbound"]),n=[];for(let r=0;r<t.length;r+=1)n[r]=sc(ec(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Re()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Re()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);C(r,e,s)},p(r,s){if(s[0]&430){t=Ge(r[32]["d3f:outbound"]);let a;for(a=0;a<t.length;a+=1){const l=ec(r,t,a);n[a]?n[a].p(l,s):(n[a]=sc(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&v(e),wt(n,r)}}}function ic(i){let e,t=i[32]["@id"]+"",n,r;return{c(){e=q("class "),n=q(t),r=q(" selected_inbound_node;")},l(s){e=M(s,"class "),n=M(s,t),r=M(s," selected_inbound_node;")},m(s,a){C(s,e,a),C(s,n,a),C(s,r,a)},p(s,a){a[0]&160&&t!==(t=s[32]["@id"]+"")&&we(n,t)},d(s){s&&(v(e),v(n),v(r))}}}function ac(i){let e=i[32]["@id"]+"",t,n,r=i[32]["rdfs:label"][0]+"",s,a,l="-->",o,u,f=Oe(i[26]["@id"])+"",h,d,c=i[29]["@id"]+"",p,_,m=i[7].i(i[29]["@id"])["rdfs:label"][0]+"",y,O,T=i[32]["@id"]+"",N,g,k=i[32]["@id"]+"",w,R,S,B,D=i[8].includes(i[32]["@id"]),L,A=i[29]["@id"]+"",I,x,j=i[29]["@id"]+"",re,Z,$,G,X=i[32]["@id"]+"",oe,Q,le=i[32]["@id"]+"",Ve,ze,ke=i[29]["@id"]+"",Ie,ve,he=i[3](i[29])+"",Fe,ot,He=D&&ic(i);return{c(){t=q(e),n=q('["'),s=q(r),a=q('"] '),o=q(l),u=q(" | "),h=q(f),d=q(" | "),p=q(c),_=q('["'),y=q(m),O=q(`"];
                  class `),N=q(T),g=q(" inbound_node; style "),w=q(k),R=q(" fill:"),S=q(i[1]),B=q(`;
                  `),He&&He.c(),L=q(`
                  class `),I=q(A),x=q(" RootArtifactNode; style "),re=q(j),Z=q(" fill:"),$=q(i[2]),G=q(`;
                  click `),oe=q(X),Q=q(` href "javascript:da_to_sensor_callback('`),Ve=q(le),ze=q(`')"; click `),Ie=q(ke),ve=q(' href "'),Fe=q(he),ot=q('";')},l(fe){t=M(fe,e),n=M(fe,'["'),s=M(fe,r),a=M(fe,'"] '),o=M(fe,l),u=M(fe," | "),h=M(fe,f),d=M(fe," | "),p=M(fe,c),_=M(fe,'["'),y=M(fe,m),O=M(fe,`"];
                  class `),N=M(fe,T),g=M(fe," inbound_node; style "),w=M(fe,k),R=M(fe," fill:"),S=M(fe,i[1]),B=M(fe,`;
                  `),He&&He.l(fe),L=M(fe,`
                  class `),I=M(fe,A),x=M(fe," RootArtifactNode; style "),re=M(fe,j),Z=M(fe," fill:"),$=M(fe,i[2]),G=M(fe,`;
                  click `),oe=M(fe,X),Q=M(fe,` href "javascript:da_to_sensor_callback('`),Ve=M(fe,le),ze=M(fe,`')"; click `),Ie=M(fe,ke),ve=M(fe,' href "'),Fe=M(fe,he),ot=M(fe,'";')},m(fe,Te){C(fe,t,Te),C(fe,n,Te),C(fe,s,Te),C(fe,a,Te),C(fe,o,Te),C(fe,u,Te),C(fe,h,Te),C(fe,d,Te),C(fe,p,Te),C(fe,_,Te),C(fe,y,Te),C(fe,O,Te),C(fe,N,Te),C(fe,g,Te),C(fe,w,Te),C(fe,R,Te),C(fe,S,Te),C(fe,B,Te),He&&He.m(fe,Te),C(fe,L,Te),C(fe,I,Te),C(fe,x,Te),C(fe,re,Te),C(fe,Z,Te),C(fe,$,Te),C(fe,G,Te),C(fe,oe,Te),C(fe,Q,Te),C(fe,Ve,Te),C(fe,ze,Te),C(fe,Ie,Te),C(fe,ve,Te),C(fe,Fe,Te),C(fe,ot,Te)},p(fe,Te){Te[0]&160&&e!==(e=fe[32]["@id"]+"")&&we(t,e),Te[0]&160&&r!==(r=fe[32]["rdfs:label"][0]+"")&&we(s,r),Te[0]&160&&f!==(f=Oe(fe[26]["@id"])+"")&&we(h,f),Te[0]&160&&c!==(c=fe[29]["@id"]+"")&&we(p,c),Te[0]&160&&m!==(m=fe[7].i(fe[29]["@id"])["rdfs:label"][0]+"")&&we(y,m),Te[0]&160&&T!==(T=fe[32]["@id"]+"")&&we(N,T),Te[0]&160&&k!==(k=fe[32]["@id"]+"")&&we(w,k),Te[0]&2&&we(S,fe[1]),Te[0]&416&&(D=fe[8].includes(fe[32]["@id"])),D?He?He.p(fe,Te):(He=ic(fe),He.c(),He.m(L.parentNode,L)):He&&(He.d(1),He=null),Te[0]&160&&A!==(A=fe[29]["@id"]+"")&&we(I,A),Te[0]&160&&j!==(j=fe[29]["@id"]+"")&&we(re,j),Te[0]&4&&we($,fe[2]),Te[0]&160&&X!==(X=fe[32]["@id"]+"")&&we(oe,X),Te[0]&160&&le!==(le=fe[32]["@id"]+"")&&we(Ve,le),Te[0]&160&&ke!==(ke=fe[29]["@id"]+"")&&we(Ie,ke),Te[0]&168&&he!==(he=fe[3](fe[29])+"")&&we(Fe,he)},d(fe){fe&&(v(t),v(n),v(s),v(a),v(o),v(u),v(h),v(d),v(p),v(_),v(y),v(O),v(N),v(g),v(w),v(R),v(S),v(B),v(L),v(I),v(x),v(re),v(Z),v($),v(G),v(oe),v(Q),v(Ve),v(ze),v(Ie),v(ve),v(Fe),v(ot)),He&&He.d(fe)}}}function sc(i){let e,t=Ge(i[32][i[26]["@id"]]),n=[];for(let r=0;r<t.length;r+=1)n[r]=ac(tc(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Re()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Re()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);C(r,e,s)},p(r,s){if(s[0]&430){t=Ge(r[32][r[26]["@id"]]);let a;for(a=0;a<t.length;a+=1){const l=tc(r,t,a);n[a]?n[a].p(l,s):(n[a]=ac(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&v(e),wt(n,r)}}}function lc(i){let e,t=i[32]["d3f:outbound"]&&nc(i);return{c(){t&&t.c(),e=Re()},l(n){t&&t.l(n),e=Re()},m(n,r){t&&t.m(n,r),C(n,e,r)},p(n,r){n[32]["d3f:outbound"]?t?t.p(n,r):(t=nc(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&v(e),t&&t.d(n)}}}function oc(i){let e,t=Ge(i[7].i(i[5].description["@id"])["d3f:outbound"]),n=[];for(let r=0;r<t.length;r+=1)n[r]=fc(Jf(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Re()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Re()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);C(r,e,s)},p(r,s){if(s[0]&184){t=Ge(r[7].i(r[5].description["@id"])["d3f:outbound"]);let a;for(a=0;a<t.length;a+=1){const l=Jf(r,t,a);n[a]?n[a].p(l,s):(n[a]=fc(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&v(e),wt(n,r)}}}function uc(i){let e=i[5].description["@id"]+"",t,n,r=i[7].i(i[5].description["@id"])["rdfs:label"][0]+"",s,a,l="-->",o,u,f=Oe(i[26]["@id"])+"",h,d,c=i[29]["@id"]+"",p,_,m=i[7].graph[i[7].index[i[29]["@id"]]]["rdfs:label"][0]+"",y,O,T=i[5].description["@id"]+"",N,g,k=i[29]["@id"]+"",w,R,S=i[5].description["@id"]+"",B,D,L=i[3](i[5].description["@id"])+"",A,I,x=i[29]["@id"]+"",j,re,Z=i[4](i[29])+"",$,G;return{c(){t=q(e),n=q('["'),s=q(r),a=q('"] '),o=q(l),u=q(" | "),h=q(f),d=q(" | "),p=q(c),_=q('["'),y=q(m),O=q('"]; class '),N=q(T),g=q(" RootArtifactNode; class "),w=q(k),R=q(` ArtifactNode;
                click `),B=q(S),D=q(' href "'),A=q(L),I=q('"; click '),j=q(x),re=q(' href "'),$=q(Z),G=q('";')},l(X){t=M(X,e),n=M(X,'["'),s=M(X,r),a=M(X,'"] '),o=M(X,l),u=M(X," | "),h=M(X,f),d=M(X," | "),p=M(X,c),_=M(X,'["'),y=M(X,m),O=M(X,'"]; class '),N=M(X,T),g=M(X," RootArtifactNode; class "),w=M(X,k),R=M(X,` ArtifactNode;
                click `),B=M(X,S),D=M(X,' href "'),A=M(X,L),I=M(X,'"; click '),j=M(X,x),re=M(X,' href "'),$=M(X,Z),G=M(X,'";')},m(X,oe){C(X,t,oe),C(X,n,oe),C(X,s,oe),C(X,a,oe),C(X,o,oe),C(X,u,oe),C(X,h,oe),C(X,d,oe),C(X,p,oe),C(X,_,oe),C(X,y,oe),C(X,O,oe),C(X,N,oe),C(X,g,oe),C(X,w,oe),C(X,R,oe),C(X,B,oe),C(X,D,oe),C(X,A,oe),C(X,I,oe),C(X,j,oe),C(X,re,oe),C(X,$,oe),C(X,G,oe)},p(X,oe){oe[0]&32&&e!==(e=X[5].description["@id"]+"")&&we(t,e),oe[0]&160&&r!==(r=X[7].i(X[5].description["@id"])["rdfs:label"][0]+"")&&we(s,r),oe[0]&160&&f!==(f=Oe(X[26]["@id"])+"")&&we(h,f),oe[0]&160&&c!==(c=X[29]["@id"]+"")&&we(p,c),oe[0]&160&&m!==(m=X[7].graph[X[7].index[X[29]["@id"]]]["rdfs:label"][0]+"")&&we(y,m),oe[0]&32&&T!==(T=X[5].description["@id"]+"")&&we(N,T),oe[0]&160&&k!==(k=X[29]["@id"]+"")&&we(w,k),oe[0]&32&&S!==(S=X[5].description["@id"]+"")&&we(B,S),oe[0]&40&&L!==(L=X[3](X[5].description["@id"])+"")&&we(A,L),oe[0]&160&&x!==(x=X[29]["@id"]+"")&&we(j,x),oe[0]&176&&Z!==(Z=X[4](X[29])+"")&&we($,Z)},d(X){X&&(v(t),v(n),v(s),v(a),v(o),v(u),v(h),v(d),v(p),v(_),v(y),v(O),v(N),v(g),v(w),v(R),v(B),v(D),v(A),v(I),v(j),v(re),v($),v(G))}}}function fc(i){let e,t=Ge(i[7].i(i[5].description["@id"])[i[26]["@id"]]),n=[];for(let r=0;r<t.length;r+=1)n[r]=uc(Kf(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Re()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Re()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);C(r,e,s)},p(r,s){if(s[0]&184){t=Ge(r[7].i(r[5].description["@id"])[r[26]["@id"]]);let a;for(a=0;a<t.length;a+=1){const l=Kf(r,t,a);n[a]?n[a].p(l,s):(n[a]=uc(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&v(e),wt(n,r)}}}function oy(i){let e,t,n=i[7].i(i[5].description["@id"])&&i[7].i(i[5].description["@id"])["d3f:outbound"],r,s=Ge(i[7].graph.filter(i[18])),a=[];for(let o=0;o<s.length;o+=1)a[o]=lc(Zf(i,s,o));let l=n&&oc(i);return{c(){e=q(`graph LR;
          `);for(let o=0;o<a.length;o+=1)a[o].c();t=ie(),l&&l.c(),r=Re()},l(o){e=M(o,`graph LR;
          `);for(let u=0;u<a.length;u+=1)a[u].l(o);t=ae(o),l&&l.l(o),r=Re()},m(o,u){C(o,e,u);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(o,u);C(o,t,u),l&&l.m(o,u),C(o,r,u)},p(o,u){if(u[0]&430){s=Ge(o[7].graph.filter(o[18]));let f;for(f=0;f<s.length;f+=1){const h=Zf(o,s,f);a[f]?a[f].p(h,u):(a[f]=lc(h),a[f].c(),a[f].m(t.parentNode,t))}for(;f<a.length;f+=1)a[f].d(1);a.length=s.length}u[0]&160&&(n=o[7].i(o[5].description["@id"])&&o[7].i(o[5].description["@id"])["d3f:outbound"]),n?l?l.p(o,u):(l=oc(o),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(o){o&&(v(e),v(t),v(r)),wt(a,o),l&&l.d(o)}}}function uy(i){let e,t,n,r,s,a,l,o,u,f,h,d,c,p=i[8].length+"",_,m,y,O,T;const N=i[16].header,g=Vt(N,i,i[22],rc),k=i[16].default,w=Vt(k,i,i[22],null),R=[ly,sy,ay],S=[];function B(D,L){return D[5]?D[7].graph.length>0?1:2:0}return l=B(i),o=S[l]=R[l](i),{c(){e=Y("dialog"),t=Y("div"),g&&g.c(),n=q(`
      Select Sensors
      `),w&&w.c(),r=ie(),s=Y("hr"),a=ie(),o.c(),u=ie(),f=Y("hr"),h=ie(),d=Y("button"),c=q("Insert ("),_=q(p),m=q(")"),this.h()},l(D){e=J(D,"DIALOG",{class:!0});var L=Ce(e);t=J(L,"DIV",{class:!0});var A=Ce(t);g&&g.l(A),n=M(A,`
      Select Sensors
      `),w&&w.l(A),r=ae(A),s=J(A,"HR",{}),a=ae(A),o.l(A),u=ae(A),f=J(A,"HR",{}),h=ae(A),d=J(A,"BUTTON",{class:!0});var I=Ce(d);c=M(I,"Insert ("),_=M(I,p),m=M(I,")"),I.forEach(v),A.forEach(v),L.forEach(v),this.h()},h(){d.autofocus=!0,ee(d,"class","svelte-akhii9"),ee(t,"class","svelte-akhii9"),ee(e,"class","svelte-akhii9")},m(D,L){C(D,e,L),V(e,t),g&&g.m(t,null),V(t,n),w&&w.m(t,null),V(t,r),V(t,s),V(t,a),S[l].m(t,null),V(t,u),V(t,f),V(t,h),V(t,d),V(d,c),V(d,_),V(d,m),i[19](e),y=!0,d.focus(),O||(T=[ye(d,"click",i[11]),ye(t,"click",Wt(i[17])),ye(e,"close",i[20]),ye(e,"click",Dn(i[21]))],O=!0)},p(D,L){g&&g.p&&(!y||L[0]&4194304)&&zt(g,N,D,D[22],y?xt(N,D[22],L,iy):Ht(D[22]),rc),w&&w.p&&(!y||L[0]&4194304)&&zt(w,k,D,D[22],y?xt(k,D[22],L,null):Ht(D[22]),null);let A=l;l=B(D),l===A?S[l].p(D,L):(ut(),de(S[A],1,1,()=>{S[A]=null}),ft(),o=S[l],o?o.p(D,L):(o=S[l]=R[l](D),o.c()),ue(o,1),o.m(t,u)),(!y||L[0]&256)&&p!==(p=D[8].length+"")&&we(_,p)},i(D){y||(ue(g,D),ue(w,D),ue(o),y=!0)},o(D){de(g,D),de(w,D),de(o),y=!1},d(D){D&&v(e),g&&g.d(D),w&&w.d(D),S[l].d(),i[19](null),O=!1,ht(T)}}}function fy(i,e,t){let n,r,s,{$$slots:a={},$$scope:l}=e,{outbound_color:o="#fff4dd"}=e,{inbound_color:u="#fff4dd"}=e,{root_color:f="#fff4dd"}=e,{link_function:h=A=>`/dao/artifact/${A["@id"]}`}=e,{inbound_link_function:d=h}=e,{root_link_function:c=A=>`/dao/artifact/${A["@id"]}`}=e,{outbound_link_function:p=h}=e,{show_sensor_modal:_}=e,{parent_node:m}=e,{data:y}=e,O;const T=Gr();tt(i,T,A=>t(24,s=A));const N=$r();tt(i,N,A=>t(23,r=A));let g;function k(A){n.includes(A)?t(8,n=n.filter(I=>I!==A)):n.push(A),t(8,n),t(8,n)}window.da_to_sensor_callback=function(A){k(A)};function w(){let A=0,I=200,x=100;for(const j of n){let re=y.sensors["@graph"].find(Z=>Z["@id"]==j);re&&(Sn(T,N,m,"artifactSelectorNode",re["rdfs:label"],re["@id"],m.data.sequence,m.position.x+A*I,m.position.y+x,182,63,re["d3f:outbound"][0]["@id"].replace("d3f:",""),!1),A+=1)}T.set(s),N.set(r),O&&O.close(),t(8,n=[])}function R(A){Fr.call(this,i,A)}const S=A=>A["@id"]!=y.description["@id"];function B(A){Mt[A?"unshift":"push"](()=>{O=A,t(6,O)})}const D=()=>t(0,_=!1),L=()=>{O.close(),t(8,n=[])};return i.$$set=A=>{"outbound_color"in A&&t(12,o=A.outbound_color),"inbound_color"in A&&t(1,u=A.inbound_color),"root_color"in A&&t(2,f=A.root_color),"link_function"in A&&t(13,h=A.link_function),"inbound_link_function"in A&&t(14,d=A.inbound_link_function),"root_link_function"in A&&t(3,c=A.root_link_function),"outbound_link_function"in A&&t(4,p=A.outbound_link_function),"show_sensor_modal"in A&&t(0,_=A.show_sensor_modal),"parent_node"in A&&t(15,m=A.parent_node),"data"in A&&t(5,y=A.data),"$$scope"in A&&t(22,l=A.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&65&&_&&O&&O.showModal(),i.$$.dirty[0]&65&&!_&&O&&O.close(),i.$$.dirty[0]&32&&y&&y.sensors&&t(7,g=new Al(y.sensors,{index:!0}))},t(8,n=[]),[_,u,f,c,p,y,O,g,n,T,N,w,o,h,d,m,a,R,S,B,D,L,l]}class cy extends yt{constructor(e){super(),Et(this,e,fy,uy,it,{outbound_color:12,inbound_color:1,root_color:2,link_function:13,inbound_link_function:14,root_link_function:3,outbound_link_function:4,show_sensor_modal:0,parent_node:15,data:5},null,[-1,-1])}}function dy(i){let e,t="attack the node",n,r,s,a,l,o="defend the node",u,f,h,d,c,p="add weaknesses",_,m,y,O,T,N="add sensors",g,k,w,R,S,B="explode parts",D,L,A="explode control",I,x,j,re,Z,$;function G(he){i[11](he)}let X={parent_node:i[0],data:i[1]};i[7]!==void 0&&(X.show_attack_modal=i[7]),r=new Pw({props:X}),Mt.push(()=>_r(r,"show_attack_modal",G));function oe(he){i[13](he)}let Q={parent_node:i[0],data:i[1]};i[6]!==void 0&&(Q.show_defend_modal=i[6]),f=new Vw({props:Q}),Mt.push(()=>_r(f,"show_defend_modal",oe));function le(he){i[15](he)}let Ve={parent_node:i[0],inbound_color:"#f9d999",inbound_link_function:i[9],data:i[1]};i[5]!==void 0&&(Ve.show_weakness_modal=i[5]),m=new Ww({props:Ve}),Mt.push(()=>_r(m,"show_weakness_modal",le));function ze(he){i[17](he)}let ke={parent_node:i[0],inbound_color:"#f9d999",data:i[1]};i[3]!==void 0&&(ke.show_sensor_modal=i[3]),k=new cy({props:ke}),Mt.push(()=>_r(k,"show_sensor_modal",ze));function Ie(he){i[20](he)}let ve={neighbor_filter_labels:i[2],parent_node:i[0],empty_message:"has no related parts in this release.",inbound_color:"#f9d999",inbound_link_function:i[9],data:i[1]};return i[4]!==void 0&&(ve.show_neighbors_modal=i[4]),x=new ny({props:ve}),Mt.push(()=>_r(x,"show_neighbors_modal",Ie)),{c(){e=Y("button"),e.textContent=t,n=ie(),Be(r.$$.fragment),a=ie(),l=Y("button"),l.textContent=o,u=ie(),Be(f.$$.fragment),d=ie(),c=Y("button"),c.textContent=p,_=ie(),Be(m.$$.fragment),O=ie(),T=Y("button"),T.textContent=N,g=ie(),Be(k.$$.fragment),R=ie(),S=Y("button"),S.textContent=B,D=ie(),L=Y("button"),L.textContent=A,I=ie(),Be(x.$$.fragment),this.h()},l(he){e=J(he,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(e)!=="svelte-1dkmztx"&&(e.textContent=t),n=ae(he),Le(r.$$.fragment,he),a=ae(he),l=J(he,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(l)!=="svelte-22hxkb"&&(l.textContent=o),u=ae(he),Le(f.$$.fragment,he),d=ae(he),c=J(he,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(c)!=="svelte-urtcr7"&&(c.textContent=p),_=ae(he),Le(m.$$.fragment,he),O=ae(he),T=J(he,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(T)!=="svelte-1xhii68"&&(T.textContent=N),g=ae(he),Le(k.$$.fragment,he),R=ae(he),S=J(he,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(S)!=="svelte-1hluius"&&(S.textContent=B),D=ae(he),L=J(he,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(L)!=="svelte-183zqvn"&&(L.textContent=A),I=ae(he),Le(x.$$.fragment,he),this.h()},h(){ee(e,"class","svelte-5he3i1"),ee(l,"class","svelte-5he3i1"),ee(c,"class","svelte-5he3i1"),ee(T,"class","svelte-5he3i1"),ee(S,"class","svelte-5he3i1"),ee(L,"class","svelte-5he3i1")},m(he,Fe){C(he,e,Fe),C(he,n,Fe),Ue(r,he,Fe),C(he,a,Fe),C(he,l,Fe),C(he,u,Fe),Ue(f,he,Fe),C(he,d,Fe),C(he,c,Fe),C(he,_,Fe),Ue(m,he,Fe),C(he,O,Fe),C(he,T,Fe),C(he,g,Fe),Ue(k,he,Fe),C(he,R,Fe),C(he,S,Fe),C(he,D,Fe),C(he,L,Fe),C(he,I,Fe),Ue(x,he,Fe),re=!0,Z||($=[ye(e,"click",i[10]),ye(l,"click",i[12]),ye(c,"click",i[14]),ye(T,"click",i[16]),ye(S,"click",i[18]),ye(L,"click",i[19])],Z=!0)},p(he,[Fe]){const ot={};Fe&1&&(ot.parent_node=he[0]),Fe&2&&(ot.data=he[1]),!s&&Fe&128&&(s=!0,ot.show_attack_modal=he[7],pr(()=>s=!1)),r.$set(ot);const He={};Fe&1&&(He.parent_node=he[0]),Fe&2&&(He.data=he[1]),!h&&Fe&64&&(h=!0,He.show_defend_modal=he[6],pr(()=>h=!1)),f.$set(He);const fe={};Fe&1&&(fe.parent_node=he[0]),Fe&2&&(fe.data=he[1]),!y&&Fe&32&&(y=!0,fe.show_weakness_modal=he[5],pr(()=>y=!1)),m.$set(fe);const Te={};Fe&1&&(Te.parent_node=he[0]),Fe&2&&(Te.data=he[1]),!w&&Fe&8&&(w=!0,Te.show_sensor_modal=he[3],pr(()=>w=!1)),k.$set(Te);const dt={};Fe&4&&(dt.neighbor_filter_labels=he[2]),Fe&1&&(dt.parent_node=he[0]),Fe&2&&(dt.data=he[1]),!j&&Fe&16&&(j=!0,dt.show_neighbors_modal=he[4],pr(()=>j=!1)),x.$set(dt)},i(he){re||(ue(r.$$.fragment,he),ue(f.$$.fragment,he),ue(m.$$.fragment,he),ue(k.$$.fragment,he),ue(x.$$.fragment,he),re=!0)},o(he){de(r.$$.fragment,he),de(f.$$.fragment,he),de(m.$$.fragment,he),de(k.$$.fragment,he),de(x.$$.fragment,he),re=!1},d(he){he&&(v(e),v(n),v(a),v(l),v(u),v(d),v(c),v(_),v(O),v(T),v(g),v(R),v(S),v(D),v(L),v(I)),je(r,he),je(f,he),je(m,he),je(k,he),je(x,he),Z=!1,ht($)}}}function hy(i,e,t){let n,r,s,a,l;var o=this&&this.__awaiter||function(B,D,L,A){function I(x){return x instanceof L?x:new L(function(j){j(x)})}return new(L||(L=Promise))(function(x,j){function re(G){try{$(A.next(G))}catch(X){j(X)}}function Z(G){try{$(A.throw(G))}catch(X){j(X)}}function $(G){G.done?x(G.value):I(G.value).then(re,Z)}$((A=A.apply(B,D||[])).next())})};let{node:u}=e,f,h=[];function d(B){alert(B),t(7,n=!1),t(6,r=!1),t(5,s=!1),t(4,a=!1),t(3,l=!1)}function c(B){return o(this,void 0,void 0,function*(){if(B.data.d3f_class&&B.data.d3f_class.includes("d3f:")){const D=B.data.d3f_class,L=yield fetch(`/api/dao/artifact/${D}.json`),A=yield L.json();if(L.status!=200||A.description["@graph"].length==0)d(`D3FEND Artifact: "${D.replace("d3f:","")}" not found in ontology`);else return A}else d("Please specify a D3FEND Class for this node to enable inferential mapping")})}function p(B){return um(B["d3f:cwe-id"][0])}const _=async()=>{t(1,f=null),t(7,n=!0),t(1,f=await c(u))};function m(B){n=B,t(7,n)}const y=async()=>{t(1,f=null),t(6,r=!0),t(1,f=await c(u))};function O(B){r=B,t(6,r)}const T=async()=>{t(1,f=null),t(5,s=!0),t(1,f=await c(u))};function N(B){s=B,t(5,s)}const g=async()=>{t(1,f=null),t(3,l=!0),t(1,f=await c(u))};function k(B){l=B,t(3,l)}const w=async()=>{t(1,f=null),t(4,a=!0),t(2,h=["d3f:contains","d3f:may-contains"]),t(1,f=await c(u))},R=async()=>{t(1,f=null),t(4,a=!0),t(2,h=["d3f:runs","d3f:loads","d3f:manages"]),t(1,f=await c(u))};function S(B){a=B,t(4,a)}return i.$$set=B=>{"node"in B&&t(0,u=B.node)},t(7,n=!1),t(6,r=!1),t(5,s=!1),t(4,a=!1),t(3,l=!1),[u,f,h,l,a,s,r,n,c,p,_,m,y,O,T,N,g,k,w,R,S]}class py extends yt{constructor(e){super(),Et(this,e,hy,dy,it,{node:0})}}function cc(i,e,t){const n=i.slice();return n[18]=e[t],n[20]=t,n}const _y=i=>({}),dc=i=>({});function my(i){let e;return{c(){e=q("No related defensive techniques in this release.")},l(t){e=M(t,"No related defensive techniques in this release.")},m(t,n){C(t,e,n)},p:Me,i:Me,o:Me,d(t){t&&v(e)}}}function vy(i){let e,t;return e=new An({props:{$$slots:{default:[yy]},$$scope:{ctx:i}}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r&16406&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function gy(i){let e,t="Loading...";return{c(){e=Y("div"),e.textContent=t},l(n){e=J(n,"DIV",{"data-svelte-h":!0}),Ke(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(n,r){C(n,e,r)},p:Me,i:Me,o:Me,d(n){n&&v(e)}}}function by(i){let e,t=Oe(i[18].def_artifact.value)+"",n,r;return{c(){e=q("class "),n=q(t),r=q(" ArtifactNode;")},l(s){e=M(s,"class "),n=M(s,t),r=M(s," ArtifactNode;")},m(s,a){C(s,e,a),C(s,n,a),C(s,r,a)},p(s,a){a&4&&t!==(t=Oe(s[18].def_artifact.value)+"")&&we(n,t)},d(s){s&&(v(e),v(n),v(r))}}}function wy(i){let e,t=Oe(i[18].def_artifact.value)+"",n,r;return{c(){e=q("class "),n=q(t),r=q(" SelectedArtifactNode;")},l(s){e=M(s,"class "),n=M(s,t),r=M(s," SelectedArtifactNode;")},m(s,a){C(s,e,a),C(s,n,a),C(s,r,a)},p(s,a){a&4&&t!==(t=Oe(s[18].def_artifact.value)+"")&&we(n,t)},d(s){s&&(v(e),v(n),v(r))}}}function hc(i){let e=i[1].data.d3f_class+"",t,n,r=i[2].description["@graph"][0]["rdfs:label"]+"",s,a,l="-->",o,u,f=i[18].def_artifact_rel_label.value+"",h,d,c=Oe(i[18].def_artifact.value)+"",p,_,m=i[18].def_artifact_label.value+"",y,O,T=i[1].data.d3f_class+"",N,g,k,w,R=Oe(i[18].def_artifact.value)+"",S,B,D=Oe(i[18].def_artifact.value)+"",L,A,I=`
`,x;function j($,G){return G&20&&(k=null),k==null&&(k=!!$[4].includes(Oe($[18].def_artifact.value))),k?wy:by}let re=j(i,-1),Z=re(i);return{c(){t=q(e),n=q('["'),s=q(r),a=q('"] '),o=q(l),u=q(' |"'),h=q(f),d=q('" | '),p=q(c),_=q('["'),y=q(m),O=q(`"];
          class `),N=q(T),g=q(` DefensiveTechniqueNode;
          `),Z.c(),w=q(`
          click `),S=q(R),B=q(` href "javascript:def_to_art_callback('`),L=q(D),A=q(`')";`),x=q(I)},l($){t=M($,e),n=M($,'["'),s=M($,r),a=M($,'"] '),o=M($,l),u=M($,' |"'),h=M($,f),d=M($,'" | '),p=M($,c),_=M($,'["'),y=M($,m),O=M($,`"];
          class `),N=M($,T),g=M($,` DefensiveTechniqueNode;
          `),Z.l($),w=M($,`
          click `),S=M($,R),B=M($,` href "javascript:def_to_art_callback('`),L=M($,D),A=M($,`')";`),x=M($,I)},m($,G){C($,t,G),C($,n,G),C($,s,G),C($,a,G),C($,o,G),C($,u,G),C($,h,G),C($,d,G),C($,p,G),C($,_,G),C($,y,G),C($,O,G),C($,N,G),C($,g,G),Z.m($,G),C($,w,G),C($,S,G),C($,B,G),C($,L,G),C($,A,G),C($,x,G)},p($,G){G&2&&e!==(e=$[1].data.d3f_class+"")&&we(t,e),G&4&&r!==(r=$[2].description["@graph"][0]["rdfs:label"]+"")&&we(s,r),G&4&&f!==(f=$[18].def_artifact_rel_label.value+"")&&we(h,f),G&4&&c!==(c=Oe($[18].def_artifact.value)+"")&&we(p,c),G&4&&m!==(m=$[18].def_artifact_label.value+"")&&we(y,m),G&2&&T!==(T=$[1].data.d3f_class+"")&&we(N,T),re===(re=j($,G))&&Z?Z.p($,G):(Z.d(1),Z=re($),Z&&(Z.c(),Z.m(w.parentNode,w))),G&4&&R!==(R=Oe($[18].def_artifact.value)+"")&&we(S,R),G&4&&D!==(D=Oe($[18].def_artifact.value)+"")&&we(L,D)},d($){$&&(v(t),v(n),v(s),v(a),v(o),v(u),v(h),v(d),v(p),v(_),v(y),v(O),v(N),v(g),v(w),v(S),v(B),v(L),v(A),v(x)),Z.d($)}}}function yy(i){let e,t,n=Ge(i[2].digital_artifacts.results.bindings),r=[];for(let s=0;s<n.length;s+=1)r[s]=hc(cc(i,n,s));return{c(){e=q(`graph LR
        `);for(let s=0;s<r.length;s+=1)r[s].c();t=Re()},l(s){e=M(s,`graph LR
        `);for(let a=0;a<r.length;a+=1)r[a].l(s);t=Re()},m(s,a){C(s,e,a);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(s,a);C(s,t,a)},p(s,a){if(a&22){n=Ge(s[2].digital_artifacts.results.bindings);let l;for(l=0;l<n.length;l+=1){const o=cc(s,n,l);r[l]?r[l].p(o,a):(r[l]=hc(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(s){s&&(v(e),v(t)),wt(r,s)}}}function Ey(i){let e,t,n,r,s,a,l,o,u,f,h,d,c,p=i[4].length+"",_,m,y,O,T;const N=i[9].header,g=Vt(N,i,i[14],dc),k=i[9].default,w=Vt(k,i,i[14],null),R=[gy,vy,my],S=[];function B(D,L){return D[2]?D[2].digital_artifacts.results.bindings.length>0?1:2:0}return l=B(i),o=S[l]=R[l](i),{c(){e=Y("dialog"),t=Y("div"),g&&g.c(),n=q(`
    Select Related Artifacts To Insert
    `),w&&w.c(),r=ie(),s=Y("hr"),a=ie(),o.c(),u=ie(),f=Y("hr"),h=ie(),d=Y("button"),c=q("Insert ("),_=q(p),m=q(")"),this.h()},l(D){e=J(D,"DIALOG",{class:!0});var L=Ce(e);t=J(L,"DIV",{class:!0});var A=Ce(t);g&&g.l(A),n=M(A,`
    Select Related Artifacts To Insert
    `),w&&w.l(A),r=ae(A),s=J(A,"HR",{}),a=ae(A),o.l(A),u=ae(A),f=J(A,"HR",{}),h=ae(A),d=J(A,"BUTTON",{class:!0});var I=Ce(d);c=M(I,"Insert ("),_=M(I,p),m=M(I,")"),I.forEach(v),A.forEach(v),L.forEach(v),this.h()},h(){d.autofocus=!0,ee(d,"class","svelte-x0618k"),ee(t,"class","svelte-x0618k"),ee(e,"class","svelte-x0618k")},m(D,L){C(D,e,L),V(e,t),g&&g.m(t,null),V(t,n),w&&w.m(t,null),V(t,r),V(t,s),V(t,a),S[l].m(t,null),V(t,u),V(t,f),V(t,h),V(t,d),V(d,c),V(d,_),V(d,m),i[11](e),y=!0,d.focus(),O||(T=[ye(d,"click",i[7]),ye(t,"click",Wt(i[10])),ye(e,"close",i[12]),ye(e,"click",Dn(i[13]))],O=!0)},p(D,[L]){g&&g.p&&(!y||L&16384)&&zt(g,N,D,D[14],y?xt(N,D[14],L,_y):Ht(D[14]),dc),w&&w.p&&(!y||L&16384)&&zt(w,k,D,D[14],y?xt(k,D[14],L,null):Ht(D[14]),null);let A=l;l=B(D),l===A?S[l].p(D,L):(ut(),de(S[A],1,1,()=>{S[A]=null}),ft(),o=S[l],o?o.p(D,L):(o=S[l]=R[l](D),o.c()),ue(o,1),o.m(t,u)),(!y||L&16)&&p!==(p=D[4].length+"")&&we(_,p)},i(D){y||(ue(g,D),ue(w,D),ue(o),y=!0)},o(D){de(g,D),de(w,D),de(o),y=!1},d(D){D&&v(e),g&&g.d(D),w&&w.d(D),S[l].d(),i[11](null),O=!1,ht(T)}}}function ky(i,e,t){let n,r,s,{$$slots:a={},$$scope:l}=e,{show_artifacts_modal:o}=e,{parent_node:u}=e,{data:f}=e,h;const d=Gr();tt(i,d,g=>t(16,s=g));const c=$r();tt(i,c,g=>t(15,r=g));let p=new jn;function _(g){n.includes(g)?t(4,n=n.filter(k=>k!==g)):n.push(g),t(4,n)}window.def_to_art_callback=function(g){_(g)};function m(){let g=0,k=200,w=100;for(const R of n){let S=f.digital_artifacts.results.bindings.find(B=>Oe(B.def_artifact.value)==R);S&&(Sn(d,c,u,"artifactSelectorNode",S.def_artifact_label.value,"d3f:"+Oe(S.def_artifact.value),u.data.sequence,u.position.x+g*k,u.position.y+w,182,82,S.def_artifact_rel_label.value,!0),g+=1)}d.set(s),c.set(r),h&&h.close(),t(4,n=[])}function y(g){Fr.call(this,i,g)}function O(g){Mt[g?"unshift":"push"](()=>{h=g,t(3,h)})}const T=()=>t(0,o=!1),N=()=>{h.close(),t(4,n=[])};return i.$$set=g=>{"show_artifacts_modal"in g&&t(0,o=g.show_artifacts_modal),"parent_node"in g&&t(1,u=g.parent_node),"data"in g&&t(2,f=g.data),"$$scope"in g&&t(14,l=g.$$scope)},i.$$.update=()=>{i.$$.dirty&9&&o&&h&&(h.showModal(),t(8,p=new jn)),i.$$.dirty&265&&!o&&h&&(h.close(),p.reset())},t(4,n=[]),[o,u,f,h,n,d,c,m,p,a,y,O,T,N,l]}class Dy extends yt{constructor(e){super(),Et(this,e,ky,Ey,it,{show_artifacts_modal:0,parent_node:1,data:2})}}function pc(i,e,t){const n=i.slice();return n[18]=e[t],n}const Ay=i=>({}),_c=i=>({});function Cy(i){let e;return{c(){e=q("No related offensive techniques in this release.")},l(t){e=M(t,"No related offensive techniques in this release.")},m(t,n){C(t,e,n)},p:Me,i:Me,o:Me,d(t){t&&v(e)}}}function Ty(i){let e,t;return e=new An({props:{$$slots:{default:[Py]},$$scope:{ctx:i}}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r&16394&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function Ny(i){let e,t="Loading...";return{c(){e=Y("div"),e.textContent=t},l(n){e=J(n,"DIV",{"data-svelte-h":!0}),Ke(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(n,r){C(n,e,r)},p:Me,i:Me,o:Me,d(n){n&&v(e)}}}function mc(i){let e=Oe(i[18].def_tech.value).replace(/ |\./g,"")+"",t,n,r=i[18].def_tech_label.value+"",s,a,l="-->",o,u,f="May "+i[18].def_tactic_label.value.replace(/ /g,""),h,d,c=i[18].off_tech_id.value.replace(/ |\./g,"")+"",p,_,m=i[18].off_tech_label.value+"",y,O,T,N,g=Oe(i[18].def_tech.value)+"",k,w,R=i[18].off_tech_id.value.replace(/ |\./g,"")+"",S,B,D=i[18].off_tech_id.value.replace(/ |\./g,"")+"",L,A,I=Oe(i[18].def_tech.value)+"",x,j,re=Oe(i[18].def_tech.value)+"",Z,$;function G(Q,le){return le&10&&(T=null),T==null&&(T=!!Q[3].includes(Q[18].off_tech_id.value.replace(/ |\./g,""))),T?Iy:Sy}let X=G(i,-1),oe=X(i);return{c(){t=q(e),n=q('["'),s=q(r),a=q('"] '),o=q(l),u=q(" | "),h=q(f),d=q("| "),p=q(c),_=q('["'),y=q(m),O=q(`"];
            `),oe.c(),N=q(`
            class `),k=q(g),w=q(" CountermeasureNode; click "),S=q(R),B=q(` href "javascript:def_to_off_callback('`),L=q(D),A=q(`')"; click `),x=q(I),j=q(' href "/technique/d3f:'),Z=q(re),$=q('";')},l(Q){t=M(Q,e),n=M(Q,'["'),s=M(Q,r),a=M(Q,'"] '),o=M(Q,l),u=M(Q," | "),h=M(Q,f),d=M(Q,"| "),p=M(Q,c),_=M(Q,'["'),y=M(Q,m),O=M(Q,`"];
            `),oe.l(Q),N=M(Q,`
            class `),k=M(Q,g),w=M(Q," CountermeasureNode; click "),S=M(Q,R),B=M(Q,` href "javascript:def_to_off_callback('`),L=M(Q,D),A=M(Q,`')"; click `),x=M(Q,I),j=M(Q,' href "/technique/d3f:'),Z=M(Q,re),$=M(Q,'";')},m(Q,le){C(Q,t,le),C(Q,n,le),C(Q,s,le),C(Q,a,le),C(Q,o,le),C(Q,u,le),C(Q,h,le),C(Q,d,le),C(Q,p,le),C(Q,_,le),C(Q,y,le),C(Q,O,le),oe.m(Q,le),C(Q,N,le),C(Q,k,le),C(Q,w,le),C(Q,S,le),C(Q,B,le),C(Q,L,le),C(Q,A,le),C(Q,x,le),C(Q,j,le),C(Q,Z,le),C(Q,$,le)},p(Q,le){le&2&&e!==(e=Oe(Q[18].def_tech.value).replace(/ |\./g,"")+"")&&we(t,e),le&2&&r!==(r=Q[18].def_tech_label.value+"")&&we(s,r),le&2&&f!==(f="May "+Q[18].def_tactic_label.value.replace(/ /g,""))&&we(h,f),le&2&&c!==(c=Q[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(p,c),le&2&&m!==(m=Q[18].off_tech_label.value+"")&&we(y,m),X===(X=G(Q,le))&&oe?oe.p(Q,le):(oe.d(1),oe=X(Q),oe&&(oe.c(),oe.m(N.parentNode,N))),le&2&&g!==(g=Oe(Q[18].def_tech.value)+"")&&we(k,g),le&2&&R!==(R=Q[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(S,R),le&2&&D!==(D=Q[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(L,D),le&2&&I!==(I=Oe(Q[18].def_tech.value)+"")&&we(x,I),le&2&&re!==(re=Oe(Q[18].def_tech.value)+"")&&we(Z,re)},d(Q){Q&&(v(t),v(n),v(s),v(a),v(o),v(u),v(h),v(d),v(p),v(_),v(y),v(O),v(N),v(k),v(w),v(S),v(B),v(L),v(A),v(x),v(j),v(Z),v($)),oe.d(Q)}}}function Sy(i){let e,t=i[18].off_tech_id.value.replace(/ |\./g,"")+"",n,r;return{c(){e=q("class "),n=q(t),r=q(" OffensiveTechniqueNode;")},l(s){e=M(s,"class "),n=M(s,t),r=M(s," OffensiveTechniqueNode;")},m(s,a){C(s,e,a),C(s,n,a),C(s,r,a)},p(s,a){a&2&&t!==(t=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(n,t)},d(s){s&&(v(e),v(n),v(r))}}}function Iy(i){let e,t=i[18].off_tech_id.value.replace(/ |\./g,"")+"",n,r;return{c(){e=q("class "),n=q(t),r=q(" SelectedOffensiveTechniqueNode;")},l(s){e=M(s,"class "),n=M(s,t),r=M(s," SelectedOffensiveTechniqueNode;")},m(s,a){C(s,e,a),C(s,n,a),C(s,r,a)},p(s,a){a&2&&t!==(t=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(n,t)},d(s){s&&(v(e),v(n),v(r))}}}function vc(i){let e=i[6].edge_is_unique(i[18].def_tech_label.value,i[18].off_artifact_rel_label.value,i[18].off_artifact_label.value),t,n=e&&mc(i);return{c(){n&&n.c(),t=Re()},l(r){n&&n.l(r),t=Re()},m(r,s){n&&n.m(r,s),C(r,t,s)},p(r,s){s&2&&(e=r[6].edge_is_unique(r[18].def_tech_label.value,r[18].off_artifact_rel_label.value,r[18].off_artifact_label.value)),e?n?n.p(r,s):(n=mc(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){r&&v(t),n&&n.d(r)}}}function Py(i){let e,t,n=Ge(i[1].def_to_off.results.bindings),r=[];for(let s=0;s<n.length;s+=1)r[s]=vc(pc(i,n,s));return{c(){e=q(`graph LR;
        `);for(let s=0;s<r.length;s+=1)r[s].c();t=Re()},l(s){e=M(s,`graph LR;
        `);for(let a=0;a<r.length;a+=1)r[a].l(s);t=Re()},m(s,a){C(s,e,a);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(s,a);C(s,t,a)},p(s,a){if(a&74){n=Ge(s[1].def_to_off.results.bindings);let l;for(l=0;l<n.length;l+=1){const o=pc(s,n,l);r[l]?r[l].p(o,a):(r[l]=vc(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(s){s&&(v(e),v(t)),wt(r,s)}}}function Ry(i){let e,t,n,r,s,a,l,o,u,f,h,d,c,p=i[3].length+"",_,m,y,O,T;const N=i[9].header,g=Vt(N,i,i[14],_c),k=i[9].default,w=Vt(k,i,i[14],null),R=[Ny,Ty,Cy],S=[];function B(D,L){return D[1]?D[1].def_to_off.results.bindings.length>0?1:2:0}return l=B(i),o=S[l]=R[l](i),{c(){e=Y("dialog"),t=Y("div"),g&&g.c(),n=q(`
    Select Attack Techniques
    `),w&&w.c(),r=ie(),s=Y("hr"),a=ie(),o.c(),u=ie(),f=Y("hr"),h=ie(),d=Y("button"),c=q("Insert ("),_=q(p),m=q(")"),this.h()},l(D){e=J(D,"DIALOG",{class:!0});var L=Ce(e);t=J(L,"DIV",{class:!0});var A=Ce(t);g&&g.l(A),n=M(A,`
    Select Attack Techniques
    `),w&&w.l(A),r=ae(A),s=J(A,"HR",{}),a=ae(A),o.l(A),u=ae(A),f=J(A,"HR",{}),h=ae(A),d=J(A,"BUTTON",{class:!0});var I=Ce(d);c=M(I,"Insert ("),_=M(I,p),m=M(I,")"),I.forEach(v),A.forEach(v),L.forEach(v),this.h()},h(){d.autofocus=!0,ee(d,"class","svelte-1ai9hff"),ee(t,"class","svelte-1ai9hff"),ee(e,"class","svelte-1ai9hff")},m(D,L){C(D,e,L),V(e,t),g&&g.m(t,null),V(t,n),w&&w.m(t,null),V(t,r),V(t,s),V(t,a),S[l].m(t,null),V(t,u),V(t,f),V(t,h),V(t,d),V(d,c),V(d,_),V(d,m),i[11](e),y=!0,d.focus(),O||(T=[ye(d,"click",i[7]),ye(t,"click",Wt(i[10])),ye(e,"close",i[12]),ye(e,"click",Dn(i[13]))],O=!0)},p(D,[L]){g&&g.p&&(!y||L&16384)&&zt(g,N,D,D[14],y?xt(N,D[14],L,Ay):Ht(D[14]),_c),w&&w.p&&(!y||L&16384)&&zt(w,k,D,D[14],y?xt(k,D[14],L,null):Ht(D[14]),null);let A=l;l=B(D),l===A?S[l].p(D,L):(ut(),de(S[A],1,1,()=>{S[A]=null}),ft(),o=S[l],o?o.p(D,L):(o=S[l]=R[l](D),o.c()),ue(o,1),o.m(t,u)),(!y||L&8)&&p!==(p=D[3].length+"")&&we(_,p)},i(D){y||(ue(g,D),ue(w,D),ue(o),y=!0)},o(D){de(g,D),de(w,D),de(o),y=!1},d(D){D&&v(e),g&&g.d(D),w&&w.d(D),S[l].d(),i[11](null),O=!1,ht(T)}}}function Fy(i,e,t){let n,r,s,{$$slots:a={},$$scope:l}=e,{show_attack_modal:o}=e,{parent_node:u}=e,{data:f}=e,h;const d=Gr();tt(i,d,g=>t(16,s=g));const c=$r();tt(i,c,g=>t(15,r=g));let p=new jn;function _(g){n.includes(g)?t(3,n=n.filter(k=>k!==g)):n.push(g),t(3,n)}window.def_to_off_callback=function(g){_(g)};function m(){let g=0,k=200,w=100;for(const R of n){let S=f.def_to_off.results.bindings.find(B=>B.off_tech_id.value.replace(/ |\./g,"")==R);S&&(Sn(d,c,u,"attackSelectorNode",S.off_tech_label.value,"d3f:"+S.off_tech_id.value,u.data.sequence,u.position.x+g*k,u.position.y+w,182,63,"May "+S.def_tactic_label.value,!0),g+=1)}d.set(s),c.set(r),h&&h.close(),t(3,n=[])}function y(g){Fr.call(this,i,g)}function O(g){Mt[g?"unshift":"push"](()=>{h=g,t(2,h)})}const T=()=>t(0,o=!1),N=()=>{h.close(),t(3,n=[])};return i.$$set=g=>{"show_attack_modal"in g&&t(0,o=g.show_attack_modal),"parent_node"in g&&t(8,u=g.parent_node),"data"in g&&t(1,f=g.data),"$$scope"in g&&t(14,l=g.$$scope)},i.$$.update=()=>{i.$$.dirty&5&&o&&h&&(h.showModal(),p.reset()),i.$$.dirty&5&&!o&&h&&(h.close(),p.reset())},t(3,n=[]),[o,f,h,n,d,c,p,m,u,a,y,O,T,N,l]}class Oy extends yt{constructor(e){super(),Et(this,e,Fy,Ry,it,{show_attack_modal:0,parent_node:8,data:1})}}function By(i){let e,t="artifacts",n,r,s,a,l,o="offensive techniques",u,f,h,d,c,p="weaknesses (coming soon)",_,m,y;function O(k){i[6](k)}let T={parent_node:i[0],data:i[1]};i[3]!==void 0&&(T.show_artifacts_modal=i[3]),r=new Dy({props:T}),Mt.push(()=>_r(r,"show_artifacts_modal",O));function N(k){i[8](k)}let g={parent_node:i[0],data:i[1]};return i[2]!==void 0&&(g.show_attack_modal=i[2]),f=new Oy({props:g}),Mt.push(()=>_r(f,"show_attack_modal",N)),{c(){e=Y("button"),e.textContent=t,n=ie(),Be(r.$$.fragment),a=ie(),l=Y("button"),l.textContent=o,u=ie(),Be(f.$$.fragment),d=ie(),c=Y("button"),c.textContent=p,this.h()},l(k){e=J(k,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(e)!=="svelte-isgkpy"&&(e.textContent=t),n=ae(k),Le(r.$$.fragment,k),a=ae(k),l=J(k,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(l)!=="svelte-17h5zge"&&(l.textContent=o),u=ae(k),Le(f.$$.fragment,k),d=ae(k),c=J(k,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(c)!=="svelte-ivhbdc"&&(c.textContent=p),this.h()},h(){ee(e,"class","svelte-1x5dcdh"),ee(l,"class","svelte-1x5dcdh"),c.disabled=!0,ee(c,"class","svelte-1x5dcdh")},m(k,w){C(k,e,w),C(k,n,w),Ue(r,k,w),C(k,a,w),C(k,l,w),C(k,u,w),Ue(f,k,w),C(k,d,w),C(k,c,w),_=!0,m||(y=[ye(e,"click",i[5]),ye(l,"click",i[7])],m=!0)},p(k,[w]){const R={};w&1&&(R.parent_node=k[0]),w&2&&(R.data=k[1]),!s&&w&8&&(s=!0,R.show_artifacts_modal=k[3],pr(()=>s=!1)),r.$set(R);const S={};w&1&&(S.parent_node=k[0]),w&2&&(S.data=k[1]),!h&&w&4&&(h=!0,S.show_attack_modal=k[2],pr(()=>h=!1)),f.$set(S)},i(k){_||(ue(r.$$.fragment,k),ue(f.$$.fragment,k),_=!0)},o(k){de(r.$$.fragment,k),de(f.$$.fragment,k),_=!1},d(k){k&&(v(e),v(n),v(a),v(l),v(u),v(d),v(c)),je(r,k),je(f,k),m=!1,ht(y)}}}function Ly(i,e,t){let n,r;var s=this&&this.__awaiter||function(p,_,m,y){function O(T){return T instanceof m?T:new m(function(N){N(T)})}return new(m||(m=Promise))(function(T,N){function g(R){try{w(y.next(R))}catch(S){N(S)}}function k(R){try{w(y.throw(R))}catch(S){N(S)}}function w(R){R.done?T(R.value):O(R.value).then(g,k)}w((y=y.apply(p,_||[])).next())})};let{node:a}=e,l;function o(p){alert(p),t(3,n=!1),t(2,r=!1)}function u(p){return s(this,void 0,void 0,function*(){if(p.data.d3f_class&&p.data.d3f_class.includes("d3f:")){const _=p.data.d3f_class,m=yield fetch(`/api/technique/${_}.json`),y=yield m.json();if(m.status!=200||y.description["@graph"].length==0)o(`D3FEND Technique: "${_.replace("d3f:","")}" not found in ontology`);else return y}else o("Please specify a D3FEND Class for this node to enable inferential mapping")})}const f=async()=>{t(1,l=null),t(3,n=!0),t(1,l=await u(a))};function h(p){n=p,t(3,n)}const d=async()=>{t(1,l=null),t(2,r=!0),t(1,l=await u(a))};function c(p){r=p,t(2,r)}return i.$$set=p=>{"node"in p&&t(0,a=p.node)},t(3,n=!1),t(2,r=!1),[a,l,r,n,u,f,h,d,c]}class Uy extends yt{constructor(e){super(),Et(this,e,Ly,By,it,{node:0})}}function gc(i,e,t){const n=i.slice();return n[18]=e[t],n}const jy=i=>({}),bc=i=>({});function qy(i){let e;return{c(){e=q("No related artifacts in this release.")},l(t){e=M(t,"No related artifacts in this release.")},m(t,n){C(t,e,n)},p:Me,i:Me,o:Me,d(t){t&&v(e)}}}function My(i){let e,t;return e=new An({props:{$$slots:{default:[xy]},$$scope:{ctx:i}}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r&16394&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function Vy(i){let e,t="Loading...";return{c(){e=Y("div"),e.textContent=t},l(n){e=J(n,"DIV",{"data-svelte-h":!0}),Ke(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(n,r){C(n,e,r)},p:Me,i:Me,o:Me,d(n){n&&v(e)}}}function wc(i){let e=i[18].off_tech_id.value.replace(/ |\./g,"")+"",t,n,r=i[18].off_tech_label.value+"",s,a,l="-->",o,u,f=i[18].off_artifact_rel_label.value.replace(/ /g,"")+"",h,d,c=Oe(i[18].off_artifact.value)+"",p,_,m=i[18].off_artifact_label.value+"",y,O,T=i[18].off_tech_id.value.replace(/ |\./g,"")+"",N,g,k,w,R=Oe(i[18].off_artifact.value)+"",S,B,D=Oe(i[18].off_artifact.value)+"",L,A,I=i[18].off_tech_id.value.replace(/ |\./g,"")+"",x,j,re=Xa(i[18].off_tech_id.value)+"",Z,$,G=Oe(i[18].off_artifact.value)+"",X,oe,Q=Oe(i[18].off_artifact.value)+"",le,Ve;function ze(ve,he){return he&10&&(k=null),k==null&&(k=!!ve[3].includes(Oe(ve[18].off_artifact.value))),k?Hy:zy}let ke=ze(i,-1),Ie=ke(i);return{c(){t=q(e),n=q('["'),s=q(r),a=q('"] '),o=q(l),u=q(" |"),h=q(f),d=q("| "),p=q(c),_=q('["'),y=q(m),O=q('"]; class '),N=q(T),g=q(` OffensiveTechniqueNode;
            `),Ie.c(),w=q(" ; click "),S=q(R),B=q(' href "/dao/artifact/d3f:'),L=q(D),A=q('"; click '),x=q(I),j=q(' href "'),Z=q(re),$=q('"; click '),X=q(G),oe=q(` href "javascript:off_to_art_callback('`),le=q(Q),Ve=q(`')";`)},l(ve){t=M(ve,e),n=M(ve,'["'),s=M(ve,r),a=M(ve,'"] '),o=M(ve,l),u=M(ve," |"),h=M(ve,f),d=M(ve,"| "),p=M(ve,c),_=M(ve,'["'),y=M(ve,m),O=M(ve,'"]; class '),N=M(ve,T),g=M(ve,` OffensiveTechniqueNode;
            `),Ie.l(ve),w=M(ve," ; click "),S=M(ve,R),B=M(ve,' href "/dao/artifact/d3f:'),L=M(ve,D),A=M(ve,'"; click '),x=M(ve,I),j=M(ve,' href "'),Z=M(ve,re),$=M(ve,'"; click '),X=M(ve,G),oe=M(ve,` href "javascript:off_to_art_callback('`),le=M(ve,Q),Ve=M(ve,`')";`)},m(ve,he){C(ve,t,he),C(ve,n,he),C(ve,s,he),C(ve,a,he),C(ve,o,he),C(ve,u,he),C(ve,h,he),C(ve,d,he),C(ve,p,he),C(ve,_,he),C(ve,y,he),C(ve,O,he),C(ve,N,he),C(ve,g,he),Ie.m(ve,he),C(ve,w,he),C(ve,S,he),C(ve,B,he),C(ve,L,he),C(ve,A,he),C(ve,x,he),C(ve,j,he),C(ve,Z,he),C(ve,$,he),C(ve,X,he),C(ve,oe,he),C(ve,le,he),C(ve,Ve,he)},p(ve,he){he&2&&e!==(e=ve[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(t,e),he&2&&r!==(r=ve[18].off_tech_label.value+"")&&we(s,r),he&2&&f!==(f=ve[18].off_artifact_rel_label.value.replace(/ /g,"")+"")&&we(h,f),he&2&&c!==(c=Oe(ve[18].off_artifact.value)+"")&&we(p,c),he&2&&m!==(m=ve[18].off_artifact_label.value+"")&&we(y,m),he&2&&T!==(T=ve[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(N,T),ke===(ke=ze(ve,he))&&Ie?Ie.p(ve,he):(Ie.d(1),Ie=ke(ve),Ie&&(Ie.c(),Ie.m(w.parentNode,w))),he&2&&R!==(R=Oe(ve[18].off_artifact.value)+"")&&we(S,R),he&2&&D!==(D=Oe(ve[18].off_artifact.value)+"")&&we(L,D),he&2&&I!==(I=ve[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(x,I),he&2&&re!==(re=Xa(ve[18].off_tech_id.value)+"")&&we(Z,re),he&2&&G!==(G=Oe(ve[18].off_artifact.value)+"")&&we(X,G),he&2&&Q!==(Q=Oe(ve[18].off_artifact.value)+"")&&we(le,Q)},d(ve){ve&&(v(t),v(n),v(s),v(a),v(o),v(u),v(h),v(d),v(p),v(_),v(y),v(O),v(N),v(g),v(w),v(S),v(B),v(L),v(A),v(x),v(j),v(Z),v($),v(X),v(oe),v(le),v(Ve)),Ie.d(ve)}}}function zy(i){let e,t=Oe(i[18].off_artifact.value)+"",n,r;return{c(){e=q("class "),n=q(t),r=q(" ArtifactNode;")},l(s){e=M(s,"class "),n=M(s,t),r=M(s," ArtifactNode;")},m(s,a){C(s,e,a),C(s,n,a),C(s,r,a)},p(s,a){a&2&&t!==(t=Oe(s[18].off_artifact.value)+"")&&we(n,t)},d(s){s&&(v(e),v(n),v(r))}}}function Hy(i){let e,t=Oe(i[18].off_artifact.value)+"",n,r;return{c(){e=q("class "),n=q(t),r=q(" SelectedArtifactNode;")},l(s){e=M(s,"class "),n=M(s,t),r=M(s," SelectedArtifactNode;")},m(s,a){C(s,e,a),C(s,n,a),C(s,r,a)},p(s,a){a&2&&t!==(t=Oe(s[18].off_artifact.value)+"")&&we(n,t)},d(s){s&&(v(e),v(n),v(r))}}}function yc(i){let e=i[6].edge_is_unique(i[18].off_tech_label.value,i[18].off_artifact_rel_label.value,i[18].off_artifact_label.value),t,n=e&&wc(i);return{c(){n&&n.c(),t=Re()},l(r){n&&n.l(r),t=Re()},m(r,s){n&&n.m(r,s),C(r,t,s)},p(r,s){s&2&&(e=r[6].edge_is_unique(r[18].off_tech_label.value,r[18].off_artifact_rel_label.value,r[18].off_artifact_label.value)),e?n?n.p(r,s):(n=wc(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){r&&v(t),n&&n.d(r)}}}function xy(i){let e,t,n=Ge(i[1].off_to_def.results.bindings),r=[];for(let s=0;s<n.length;s+=1)r[s]=yc(gc(i,n,s));return{c(){e=q(`graph LR;
        `);for(let s=0;s<r.length;s+=1)r[s].c();t=Re()},l(s){e=M(s,`graph LR;
        `);for(let a=0;a<r.length;a+=1)r[a].l(s);t=Re()},m(s,a){C(s,e,a);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(s,a);C(s,t,a)},p(s,a){if(a&74){n=Ge(s[1].off_to_def.results.bindings);let l;for(l=0;l<n.length;l+=1){const o=gc(s,n,l);r[l]?r[l].p(o,a):(r[l]=yc(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(s){s&&(v(e),v(t)),wt(r,s)}}}function Xy(i){let e,t,n,r,s,a,l,o,u,f,h,d,c,p=i[3].length+"",_,m,y,O,T;const N=i[9].header,g=Vt(N,i,i[14],bc),k=i[9].default,w=Vt(k,i,i[14],null),R=[Vy,My,qy],S=[];function B(D,L){return D[1]?D[1].off_to_def.results.bindings.length>0?1:2:0}return l=B(i),o=S[l]=R[l](i),{c(){e=Y("dialog"),t=Y("div"),g&&g.c(),n=q(`
    Select Related Artifacts To Insert
    `),w&&w.c(),r=ie(),s=Y("hr"),a=ie(),o.c(),u=ie(),f=Y("hr"),h=ie(),d=Y("button"),c=q("Insert ("),_=q(p),m=q(")"),this.h()},l(D){e=J(D,"DIALOG",{class:!0});var L=Ce(e);t=J(L,"DIV",{class:!0});var A=Ce(t);g&&g.l(A),n=M(A,`
    Select Related Artifacts To Insert
    `),w&&w.l(A),r=ae(A),s=J(A,"HR",{}),a=ae(A),o.l(A),u=ae(A),f=J(A,"HR",{}),h=ae(A),d=J(A,"BUTTON",{class:!0});var I=Ce(d);c=M(I,"Insert ("),_=M(I,p),m=M(I,")"),I.forEach(v),A.forEach(v),L.forEach(v),this.h()},h(){d.autofocus=!0,ee(d,"class","svelte-x0618k"),ee(t,"class","svelte-x0618k"),ee(e,"class","svelte-x0618k")},m(D,L){C(D,e,L),V(e,t),g&&g.m(t,null),V(t,n),w&&w.m(t,null),V(t,r),V(t,s),V(t,a),S[l].m(t,null),V(t,u),V(t,f),V(t,h),V(t,d),V(d,c),V(d,_),V(d,m),i[11](e),y=!0,d.focus(),O||(T=[ye(d,"click",i[7]),ye(t,"click",Wt(i[10])),ye(e,"close",i[12]),ye(e,"click",Dn(i[13]))],O=!0)},p(D,[L]){g&&g.p&&(!y||L&16384)&&zt(g,N,D,D[14],y?xt(N,D[14],L,jy):Ht(D[14]),bc),w&&w.p&&(!y||L&16384)&&zt(w,k,D,D[14],y?xt(k,D[14],L,null):Ht(D[14]),null);let A=l;l=B(D),l===A?S[l].p(D,L):(ut(),de(S[A],1,1,()=>{S[A]=null}),ft(),o=S[l],o?o.p(D,L):(o=S[l]=R[l](D),o.c()),ue(o,1),o.m(t,u)),(!y||L&8)&&p!==(p=D[3].length+"")&&we(_,p)},i(D){y||(ue(g,D),ue(w,D),ue(o),y=!0)},o(D){de(g,D),de(w,D),de(o),y=!1},d(D){D&&v(e),g&&g.d(D),w&&w.d(D),S[l].d(),i[11](null),O=!1,ht(T)}}}function Gy(i,e,t){let n,r,s,{$$slots:a={},$$scope:l}=e,{show_artifacts_modal:o}=e,{parent_node:u}=e,{data:f}=e,h;const d=Gr();tt(i,d,g=>t(16,s=g));const c=$r();tt(i,c,g=>t(15,r=g));let p=new jn;function _(g){n.includes(g)?t(3,n=n.filter(k=>k!==g)):n.push(g),t(3,n)}window.off_to_art_callback=function(g){_(g)};function m(){let g=0,k=200,w=100;for(const R of n){let S=f.off_to_def.results.bindings.find(B=>Oe(B.off_artifact.value)==R);S&&(Sn(d,c,u,"artifactSelectorNode",S.off_artifact_label.value,"d3f:"+Oe(S.off_artifact.value),u.data.sequence,u.position.x+g*k,u.position.y+w,182,63,S.off_artifact_rel_label.value,!0),g+=1)}d.set(s),c.set(r),h&&h.close(),t(3,n=[])}function y(g){Fr.call(this,i,g)}function O(g){Mt[g?"unshift":"push"](()=>{h=g,t(2,h)})}const T=()=>t(0,o=!1),N=()=>{h.close(),t(3,n=[])};return i.$$set=g=>{"show_artifacts_modal"in g&&t(0,o=g.show_artifacts_modal),"parent_node"in g&&t(8,u=g.parent_node),"data"in g&&t(1,f=g.data),"$$scope"in g&&t(14,l=g.$$scope)},i.$$.update=()=>{i.$$.dirty&5&&o&&h&&(h.showModal(),p.reset()),i.$$.dirty&5&&!o&&h&&(h.close(),p.reset())},t(3,n=[]),[o,f,h,n,d,c,p,m,u,a,y,O,T,N,l]}class $y extends yt{constructor(e){super(),Et(this,e,Gy,Xy,it,{show_artifacts_modal:0,parent_node:8,data:1})}}function Ec(i,e,t){const n=i.slice();return n[23]=e[t],n}const Qy=i=>({}),kc=i=>({});function Wy(i){let e;return{c(){e=q("No related artifacts in this release.")},l(t){e=M(t,"No related artifacts in this release.")},m(t,n){C(t,e,n)},p:Me,i:Me,o:Me,d(t){t&&v(e)}}}function Yy(i){let e,t,n,r,s,a,l,o,u,f;function h(c){i[14](c)}let d={toggles:i[4]};return i[3]!==void 0&&(d.selected=i[3]),t=new yh({props:d}),Mt.push(()=>_r(t,"selected",h)),u=new An({props:{$$slots:{default:[e3]},$$scope:{ctx:i}}}),{c(){e=Y("div"),Be(t.$$.fragment),r=ie(),s=Y("br"),a=ie(),l=Y("br"),o=ie(),Be(u.$$.fragment),this.h()},l(c){e=J(c,"DIV",{class:!0});var p=Ce(e);Le(t.$$.fragment,p),p.forEach(v),r=ae(c),s=J(c,"BR",{}),a=ae(c),l=J(c,"BR",{}),o=ae(c),Le(u.$$.fragment,c),this.h()},h(){ee(e,"class","center shrink")},m(c,p){C(c,e,p),Ue(t,e,null),C(c,r,p),C(c,s,p),C(c,a,p),C(c,l,p),C(c,o,p),Ue(u,c,p),f=!0},p(c,p){const _={};p&16&&(_.toggles=c[4]),!n&&p&8&&(n=!0,_.selected=c[3],pr(()=>n=!1)),t.$set(_);const m={};p&262186&&(m.$$scope={dirty:p,ctx:c}),u.$set(m)},i(c){f||(ue(t.$$.fragment,c),ue(u.$$.fragment,c),f=!0)},o(c){de(t.$$.fragment,c),de(u.$$.fragment,c),f=!1},d(c){c&&(v(e),v(r),v(s),v(a),v(l),v(o)),je(t),je(u,c)}}}function Jy(i){let e,t="Loading...";return{c(){e=Y("div"),e.textContent=t},l(n){e=J(n,"DIV",{"data-svelte-h":!0}),Ke(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(n,r){C(n,e,r)},p:Me,i:Me,o:Me,d(n){n&&v(e)}}}function Dc(i){let e=i[8].edge_is_unique(i[23].def_tech_label.value,i[23].def_artifact_rel_label.value,i[23].off_artifact_label.value),t,n=e&&Ac(i);return{c(){n&&n.c(),t=Re()},l(r){n&&n.l(r),t=Re()},m(r,s){n&&n.m(r,s),C(r,t,s)},p(r,s){s&2&&(e=r[8].edge_is_unique(r[23].def_tech_label.value,r[23].def_artifact_rel_label.value,r[23].off_artifact_label.value)),e?n?n.p(r,s):(n=Ac(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){r&&v(t),n&&n.d(r)}}}function Ac(i){let e=!i[3].includes(i[23].def_tactic_label.value),t,n=e&&Cc(i);return{c(){n&&n.c(),t=Re()},l(r){n&&n.l(r),t=Re()},m(r,s){n&&n.m(r,s),C(r,t,s)},p(r,s){s&10&&(e=!r[3].includes(r[23].def_tactic_label.value)),e?n?n.p(r,s):(n=Cc(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){r&&v(t),n&&n.d(r)}}}function Cc(i){let e=Oe(i[23].def_tech.value)+"",t,n,r=i[23].def_tech_label.value+"",s,a,l="-->",o,u,f=i[23].def_artifact_rel_label.value.replace(/ /g,"")+"",h,d,c=Oe(i[23].off_artifact.value)+"",p,_,m=i[23].off_artifact_label.value+"",y,O,T=i[8].edge_is_unique(i[23].def_tech.value,i[23].def_tactic_label.value,i[23].off_tech_id.value),N,g,k,w=i[23].off_artifact_label.value.replace(/ /g,"")+"",R,S,B=Oe(i[23].def_tech.value)+"",D,L,A=i[23].def_tech_label.value.replace(/ |\./g,"")+"",I,x,j=T&&Tc(i);function re(G,X){return X&34&&(g=null),g==null&&(g=!!G[5].includes(Oe(G[23].def_tech.value))),g?Zy:Ky}let Z=re(i,-1),$=Z(i);return{c(){t=q(e),n=q('["'),s=q(r),a=q('"] '),o=q(l),u=q(`
                | `),h=q(f),d=q(" | "),p=q(c),_=q('["'),y=q(m),O=q(`"];

                `),j&&j.c(),N=ie(),$.c(),k=q(` 
                class `),R=q(w),S=q(` ArtifactNode;
                click `),D=q(B),L=q(` href "javascript:off_to_def_callback('`),I=q(A),x=q(`')";`)},l(G){t=M(G,e),n=M(G,'["'),s=M(G,r),a=M(G,'"] '),o=M(G,l),u=M(G,`
                | `),h=M(G,f),d=M(G," | "),p=M(G,c),_=M(G,'["'),y=M(G,m),O=M(G,`"];

                `),j&&j.l(G),N=ae(G),$.l(G),k=M(G,` 
                class `),R=M(G,w),S=M(G,` ArtifactNode;
                click `),D=M(G,B),L=M(G,` href "javascript:off_to_def_callback('`),I=M(G,A),x=M(G,`')";`)},m(G,X){C(G,t,X),C(G,n,X),C(G,s,X),C(G,a,X),C(G,o,X),C(G,u,X),C(G,h,X),C(G,d,X),C(G,p,X),C(G,_,X),C(G,y,X),C(G,O,X),j&&j.m(G,X),C(G,N,X),$.m(G,X),C(G,k,X),C(G,R,X),C(G,S,X),C(G,D,X),C(G,L,X),C(G,I,X),C(G,x,X)},p(G,X){X&2&&e!==(e=Oe(G[23].def_tech.value)+"")&&we(t,e),X&2&&r!==(r=G[23].def_tech_label.value+"")&&we(s,r),X&2&&f!==(f=G[23].def_artifact_rel_label.value.replace(/ /g,"")+"")&&we(h,f),X&2&&c!==(c=Oe(G[23].off_artifact.value)+"")&&we(p,c),X&2&&m!==(m=G[23].off_artifact_label.value+"")&&we(y,m),X&2&&(T=G[8].edge_is_unique(G[23].def_tech.value,G[23].def_tactic_label.value,G[23].off_tech_id.value)),T?j?j.p(G,X):(j=Tc(G),j.c(),j.m(N.parentNode,N)):j&&(j.d(1),j=null),Z===(Z=re(G,X))&&$?$.p(G,X):($.d(1),$=Z(G),$&&($.c(),$.m(k.parentNode,k))),X&2&&w!==(w=G[23].off_artifact_label.value.replace(/ /g,"")+"")&&we(R,w),X&2&&B!==(B=Oe(G[23].def_tech.value)+"")&&we(D,B),X&2&&A!==(A=G[23].def_tech_label.value.replace(/ |\./g,"")+"")&&we(I,A)},d(G){G&&(v(t),v(n),v(s),v(a),v(o),v(u),v(h),v(d),v(p),v(_),v(y),v(O),v(N),v(k),v(R),v(S),v(D),v(L),v(I),v(x)),j&&j.d(G),$.d(G)}}}function Tc(i){let e=Oe(i[23].def_tech.value)+"",t,n,r=i[23].def_tech_label.value+"",s,a,l="-.->",o,u,f="May "+i[23].def_tactic_label.value,h,d,c=i[23].off_tech_id.value.replace(/ |\./g,"")+"",p,_,m=i[23].off_tech_label.value+"",y,O;return{c(){t=q(e),n=q('["'),s=q(r),a=q('"] '),o=q(l),u=q(`
                  | `),h=q(f),d=q(" | "),p=q(c),_=q('["'),y=q(m),O=q('"] ;')},l(T){t=M(T,e),n=M(T,'["'),s=M(T,r),a=M(T,'"] '),o=M(T,l),u=M(T,`
                  | `),h=M(T,f),d=M(T," | "),p=M(T,c),_=M(T,'["'),y=M(T,m),O=M(T,'"] ;')},m(T,N){C(T,t,N),C(T,n,N),C(T,s,N),C(T,a,N),C(T,o,N),C(T,u,N),C(T,h,N),C(T,d,N),C(T,p,N),C(T,_,N),C(T,y,N),C(T,O,N)},p(T,N){N&2&&e!==(e=Oe(T[23].def_tech.value)+"")&&we(t,e),N&2&&r!==(r=T[23].def_tech_label.value+"")&&we(s,r),N&2&&f!==(f="May "+T[23].def_tactic_label.value)&&we(h,f),N&2&&c!==(c=T[23].off_tech_id.value.replace(/ |\./g,"")+"")&&we(p,c),N&2&&m!==(m=T[23].off_tech_label.value+"")&&we(y,m)},d(T){T&&(v(t),v(n),v(s),v(a),v(o),v(u),v(h),v(d),v(p),v(_),v(y),v(O))}}}function Ky(i){let e,t=Oe(i[23].def_tech.value)+"",n,r;return{c(){e=q("class "),n=q(t),r=q(" DefensiveTechniqueNode;")},l(s){e=M(s,"class "),n=M(s,t),r=M(s," DefensiveTechniqueNode;")},m(s,a){C(s,e,a),C(s,n,a),C(s,r,a)},p(s,a){a&2&&t!==(t=Oe(s[23].def_tech.value)+"")&&we(n,t)},d(s){s&&(v(e),v(n),v(r))}}}function Zy(i){let e,t=Oe(i[23].def_tech.value)+"",n,r;return{c(){e=q("class "),n=q(t),r=q(" SelectedDefensiveTechniqueNode;")},l(s){e=M(s,"class "),n=M(s,t),r=M(s," SelectedDefensiveTechniqueNode;")},m(s,a){C(s,e,a),C(s,n,a),C(s,r,a)},p(s,a){a&2&&t!==(t=Oe(s[23].def_tech.value)+"")&&we(n,t)},d(s){s&&(v(e),v(n),v(r))}}}function Nc(i){let e=i[23].off_tech_id.value.replace(/ |\./g,"")+"",t,n,r=i[23].off_tech_label.value+"",s,a,l="-->",o,u,f=i[23].off_artifact_rel_label.value.replace(/ /g,"")+"",h,d,c=Oe(i[23].off_artifact.value)+"",p,_,m=i[23].off_artifact_label.value+"",y,O,T=i[23].off_tech_id.value.replace(/ |\./g,"")+"",N,g,k=Oe(i[23].off_artifact.value)+"",w,R,S=Oe(i[23].off_artifact.value)+"",B,D,L=Oe(i[23].off_artifact.value)+"",A,I,x=i[23].off_tech_id.value.replace(/ |\./g,"")+"",j,re,Z=Xa(i[23].off_tech_id.value)+"",$,G,X=Oe(i[23].off_artifact.value)+"",oe,Q,le=Oe(i[23].off_artifact.value)+"",Ve,ze;return{c(){t=q(e),n=q('["'),s=q(r),a=q('"] '),o=q(l),u=q(" |"),h=q(f),d=q("| "),p=q(c),_=q('["'),y=q(m),O=q('"]; class '),N=q(T),g=q(` OffensiveTechniqueNode;
            class `),w=q(k),R=q(" ArtifactNode; click "),B=q(S),D=q(' href "/dao/artifact/d3f:'),A=q(L),I=q(`";
            click `),j=q(x),re=q(' href "'),$=q(Z),G=q('"; click '),oe=q(X),Q=q(' href "/dao/artifact/d3f:'),Ve=q(le),ze=q('";')},l(ke){t=M(ke,e),n=M(ke,'["'),s=M(ke,r),a=M(ke,'"] '),o=M(ke,l),u=M(ke," |"),h=M(ke,f),d=M(ke,"| "),p=M(ke,c),_=M(ke,'["'),y=M(ke,m),O=M(ke,'"]; class '),N=M(ke,T),g=M(ke,` OffensiveTechniqueNode;
            class `),w=M(ke,k),R=M(ke," ArtifactNode; click "),B=M(ke,S),D=M(ke,' href "/dao/artifact/d3f:'),A=M(ke,L),I=M(ke,`";
            click `),j=M(ke,x),re=M(ke,' href "'),$=M(ke,Z),G=M(ke,'"; click '),oe=M(ke,X),Q=M(ke,' href "/dao/artifact/d3f:'),Ve=M(ke,le),ze=M(ke,'";')},m(ke,Ie){C(ke,t,Ie),C(ke,n,Ie),C(ke,s,Ie),C(ke,a,Ie),C(ke,o,Ie),C(ke,u,Ie),C(ke,h,Ie),C(ke,d,Ie),C(ke,p,Ie),C(ke,_,Ie),C(ke,y,Ie),C(ke,O,Ie),C(ke,N,Ie),C(ke,g,Ie),C(ke,w,Ie),C(ke,R,Ie),C(ke,B,Ie),C(ke,D,Ie),C(ke,A,Ie),C(ke,I,Ie),C(ke,j,Ie),C(ke,re,Ie),C(ke,$,Ie),C(ke,G,Ie),C(ke,oe,Ie),C(ke,Q,Ie),C(ke,Ve,Ie),C(ke,ze,Ie)},p(ke,Ie){Ie&2&&e!==(e=ke[23].off_tech_id.value.replace(/ |\./g,"")+"")&&we(t,e),Ie&2&&r!==(r=ke[23].off_tech_label.value+"")&&we(s,r),Ie&2&&f!==(f=ke[23].off_artifact_rel_label.value.replace(/ /g,"")+"")&&we(h,f),Ie&2&&c!==(c=Oe(ke[23].off_artifact.value)+"")&&we(p,c),Ie&2&&m!==(m=ke[23].off_artifact_label.value+"")&&we(y,m),Ie&2&&T!==(T=ke[23].off_tech_id.value.replace(/ |\./g,"")+"")&&we(N,T),Ie&2&&k!==(k=Oe(ke[23].off_artifact.value)+"")&&we(w,k),Ie&2&&S!==(S=Oe(ke[23].off_artifact.value)+"")&&we(B,S),Ie&2&&L!==(L=Oe(ke[23].off_artifact.value)+"")&&we(A,L),Ie&2&&x!==(x=ke[23].off_tech_id.value.replace(/ |\./g,"")+"")&&we(j,x),Ie&2&&Z!==(Z=Xa(ke[23].off_tech_id.value)+"")&&we($,Z),Ie&2&&X!==(X=Oe(ke[23].off_artifact.value)+"")&&we(oe,X),Ie&2&&le!==(le=Oe(ke[23].off_artifact.value)+"")&&we(Ve,le)},d(ke){ke&&(v(t),v(n),v(s),v(a),v(o),v(u),v(h),v(d),v(p),v(_),v(y),v(O),v(N),v(g),v(w),v(R),v(B),v(D),v(A),v(I),v(j),v(re),v($),v(G),v(oe),v(Q),v(Ve),v(ze))}}}function Sc(i){let e,t=i[8].edge_is_unique(i[23].off_tech_label.value,i[23].off_artifact_rel_label.value,i[23].off_artifact_label.value),n,r="def_tech"in i[23]&&Dc(i),s=t&&Nc(i);return{c(){r&&r.c(),e=ie(),s&&s.c(),n=Re()},l(a){r&&r.l(a),e=ae(a),s&&s.l(a),n=Re()},m(a,l){r&&r.m(a,l),C(a,e,l),s&&s.m(a,l),C(a,n,l)},p(a,l){"def_tech"in a[23]?r?r.p(a,l):(r=Dc(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),l&2&&(t=a[8].edge_is_unique(a[23].off_tech_label.value,a[23].off_artifact_rel_label.value,a[23].off_artifact_label.value)),t?s?s.p(a,l):(s=Nc(a),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},d(a){a&&(v(e),v(n)),r&&r.d(a),s&&s.d(a)}}}function e3(i){let e,t,n=Ge(i[1].off_to_def.results.bindings),r=[];for(let s=0;s<n.length;s+=1)r[s]=Sc(Ec(i,n,s));return{c(){e=q(`graph LR;
        `);for(let s=0;s<r.length;s+=1)r[s].c();t=Re()},l(s){e=M(s,`graph LR;
        `);for(let a=0;a<r.length;a+=1)r[a].l(s);t=Re()},m(s,a){C(s,e,a);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(s,a);C(s,t,a)},p(s,a){if(a&298){n=Ge(s[1].off_to_def.results.bindings);let l;for(l=0;l<n.length;l+=1){const o=Ec(s,n,l);r[l]?r[l].p(o,a):(r[l]=Sc(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(s){s&&(v(e),v(t)),wt(r,s)}}}function t3(i){let e,t,n,r,s,a,l,o,u,f,h,d,c,p=i[5].length+"",_,m,y,O,T;const N=i[12].header,g=Vt(N,i,i[18],kc),k=i[12].default,w=Vt(k,i,i[18],null),R=[Jy,Yy,Wy],S=[];function B(D,L){return D[1]?D[1].off_to_def.results.bindings.length>0?1:2:0}return l=B(i),o=S[l]=R[l](i),{c(){e=Y("dialog"),t=Y("div"),g&&g.c(),n=q(`
    Select Related Artifacts To Insert
    `),w&&w.c(),r=ie(),s=Y("hr"),a=ie(),o.c(),u=ie(),f=Y("hr"),h=ie(),d=Y("button"),c=q("Insert ("),_=q(p),m=q(")"),this.h()},l(D){e=J(D,"DIALOG",{class:!0});var L=Ce(e);t=J(L,"DIV",{class:!0});var A=Ce(t);g&&g.l(A),n=M(A,`
    Select Related Artifacts To Insert
    `),w&&w.l(A),r=ae(A),s=J(A,"HR",{}),a=ae(A),o.l(A),u=ae(A),f=J(A,"HR",{}),h=ae(A),d=J(A,"BUTTON",{class:!0});var I=Ce(d);c=M(I,"Insert ("),_=M(I,p),m=M(I,")"),I.forEach(v),A.forEach(v),L.forEach(v),this.h()},h(){d.autofocus=!0,ee(d,"class","svelte-x0618k"),ee(t,"class","svelte-x0618k"),ee(e,"class","svelte-x0618k")},m(D,L){C(D,e,L),V(e,t),g&&g.m(t,null),V(t,n),w&&w.m(t,null),V(t,r),V(t,s),V(t,a),S[l].m(t,null),V(t,u),V(t,f),V(t,h),V(t,d),V(d,c),V(d,_),V(d,m),i[15](e),y=!0,d.focus(),O||(T=[ye(d,"click",i[9]),ye(t,"click",Wt(i[13])),ye(e,"close",i[16]),ye(e,"click",Dn(i[17]))],O=!0)},p(D,[L]){g&&g.p&&(!y||L&262144)&&zt(g,N,D,D[18],y?xt(N,D[18],L,Qy):Ht(D[18]),kc),w&&w.p&&(!y||L&262144)&&zt(w,k,D,D[18],y?xt(k,D[18],L,null):Ht(D[18]),null);let A=l;l=B(D),l===A?S[l].p(D,L):(ut(),de(S[A],1,1,()=>{S[A]=null}),ft(),o=S[l],o?o.p(D,L):(o=S[l]=R[l](D),o.c()),ue(o,1),o.m(t,u)),(!y||L&32)&&p!==(p=D[5].length+"")&&we(_,p)},i(D){y||(ue(g,D),ue(w,D),ue(o),y=!0)},o(D){de(g,D),de(w,D),de(o),y=!1},d(D){D&&v(e),g&&g.d(D),w&&w.d(D),S[l].d(),i[15](null),O=!1,ht(T)}}}function r3(i,e,t){let n,r,s,{$$slots:a={},$$scope:l}=e,{show_defend_modal:o}=e,{parent_node:u}=e,{data:f}=e,h;const d=Gr();tt(i,d,B=>t(20,s=B));const c=$r();tt(i,c,B=>t(19,r=B));let p=new jn;function _(B){n.includes(B)?t(5,n=n.filter(D=>D!==B)):n.push(B),t(5,n)}window.off_to_def_callback=function(B){_(B)};function m(){let B=0,D=200,L=100;for(const A of n){let I=f.off_to_def.results.bindings.find(x=>"def_tech"in x&&Oe(x.def_tech.value)==A);I&&(Sn(d,c,u,"countermeasureSelectorNode",I.def_tech_label.value,"d3f:"+Oe(I.def_tech.value),u.data.sequence,u.position.x+B*D,u.position.y+L,182,63,"May "+I.def_tactic_label.value,!1),B+=1)}d.set(s),c.set(r),h&&h.close(),t(5,n=[])}let y=new Set,O=[],T=[];bh(O,T)&&(T=[]);function N(B){for(const D of n){let L=f.off_to_def.results.bindings.find(A=>"def_tech"in A&&Oe(A.def_tech.value)==D);B.includes(L.def_tactic_label.value)&&t(5,n=n.filter(A=>A!==D))}t(5,n)}function g(B){Fr.call(this,i,B)}function k(B){T=B,t(3,T)}function w(B){Mt[B?"unshift":"push"](()=>{h=B,t(2,h)})}const R=()=>t(0,o=!1),S=()=>{h.close(),t(5,n=[])};return i.$$set=B=>{"show_defend_modal"in B&&t(0,o=B.show_defend_modal),"parent_node"in B&&t(10,u=B.parent_node),"data"in B&&t(1,f=B.data),"$$scope"in B&&t(18,l=B.$$scope)},i.$$.update=()=>{i.$$.dirty&5&&o&&h&&(h.showModal(),p.reset()),i.$$.dirty&5&&!o&&h&&(h.close(),p.reset()),i.$$.dirty&2050&&f&&(f.off_to_def.results.bindings.forEach(B=>{"def_tactic_label"in B&&y.add(B.def_tactic_label.value)}),t(11,y),t(1,f)),i.$$.dirty&2048&&t(4,O=Array.from(y).sort(function(B,D){return Ga[B]-Ga[D]})),i.$$.dirty&8&&N(T),i.$$.dirty&8&&p.reset(T)},t(5,n=[]),[o,f,h,T,O,n,d,c,p,m,u,y,a,g,k,w,R,S,l]}class n3 extends yt{constructor(e){super(),Et(this,e,r3,t3,it,{show_defend_modal:0,parent_node:10,data:1})}}function i3(i){let e,t="artifacts",n,r,s,a,l,o="defensive techniques",u,f,h,d,c,p;function _(T){i[6](T)}let m={parent_node:i[0],data:i[1]};i[3]!==void 0&&(m.show_artifacts_modal=i[3]),r=new $y({props:m}),Mt.push(()=>_r(r,"show_artifacts_modal",_));function y(T){i[8](T)}let O={parent_node:i[0],data:i[1]};return i[2]!==void 0&&(O.show_defend_modal=i[2]),f=new n3({props:O}),Mt.push(()=>_r(f,"show_defend_modal",y)),{c(){e=Y("button"),e.textContent=t,n=ie(),Be(r.$$.fragment),a=ie(),l=Y("button"),l.textContent=o,u=ie(),Be(f.$$.fragment),this.h()},l(T){e=J(T,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(e)!=="svelte-1t14z6m"&&(e.textContent=t),n=ae(T),Le(r.$$.fragment,T),a=ae(T),l=J(T,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(l)!=="svelte-o3we0s"&&(l.textContent=o),u=ae(T),Le(f.$$.fragment,T),this.h()},h(){ee(e,"class","svelte-1x5dcdh"),ee(l,"class","svelte-1x5dcdh")},m(T,N){C(T,e,N),C(T,n,N),Ue(r,T,N),C(T,a,N),C(T,l,N),C(T,u,N),Ue(f,T,N),d=!0,c||(p=[ye(e,"click",i[5]),ye(l,"click",i[7])],c=!0)},p(T,[N]){const g={};N&1&&(g.parent_node=T[0]),N&2&&(g.data=T[1]),!s&&N&8&&(s=!0,g.show_artifacts_modal=T[3],pr(()=>s=!1)),r.$set(g);const k={};N&1&&(k.parent_node=T[0]),N&2&&(k.data=T[1]),!h&&N&4&&(h=!0,k.show_defend_modal=T[2],pr(()=>h=!1)),f.$set(k)},i(T){d||(ue(r.$$.fragment,T),ue(f.$$.fragment,T),d=!0)},o(T){de(r.$$.fragment,T),de(f.$$.fragment,T),d=!1},d(T){T&&(v(e),v(n),v(a),v(l),v(u)),je(r,T),je(f,T),c=!1,ht(p)}}}function a3(i,e,t){let n,r;var s=this&&this.__awaiter||function(p,_,m,y){function O(T){return T instanceof m?T:new m(function(N){N(T)})}return new(m||(m=Promise))(function(T,N){function g(R){try{w(y.next(R))}catch(S){N(S)}}function k(R){try{w(y.throw(R))}catch(S){N(S)}}function w(R){R.done?T(R.value):O(R.value).then(g,k)}w((y=y.apply(p,_||[])).next())})};let{node:a}=e,l;function o(p){alert(p),t(3,n=!1),t(2,r=!1)}function u(p){return s(this,void 0,void 0,function*(){if(p.data.d3f_class&&p.data.d3f_class.includes("d3f:")){const _=p.data.d3f_class,m=yield fetch(`/api/offensive-technique/attack/${_.replace("d3f:","")}.json`),y=yield m.json();if(m.status!=200||y.description["@graph"].length==0)o(`Offensive Technique: "${_.replace("d3f:","")}" not found in ontology`);else return y}else o("Please specify a D3FEND Class for this node to enable inferential mapping")})}const f=async()=>{t(1,l=null),t(3,n=!0),t(1,l=await u(a))};function h(p){n=p,t(3,n)}const d=async()=>{t(1,l=null),t(2,r=!0),t(1,l=await u(a))};function c(p){r=p,t(2,r)}return i.$$set=p=>{"node"in p&&t(0,a=p.node)},t(3,n=!1),t(2,r=!1),[a,l,r,n,u,f,h,d,c]}class s3 extends yt{constructor(e){super(),Et(this,e,a3,i3,it,{node:0})}}function Ic(i){let e,t;return e=new s3({props:{node:i[1]}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r&2&&(s.node=n[1]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function Pc(i){let e,t;return e=new Uy({props:{node:i[1]}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r&2&&(s.node=n[1]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function Rc(i){let e,t;return e=new py({props:{node:i[1]}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r&2&&(s.node=n[1]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function l3(i){let e,t,n,r,s,a,l,o,u,f,h="duplicate",d,c,p="delete",_,m,y,O,T=i[1]&&i[1].type=="attackSelectorNode"&&Ic(i),N=i[1]&&i[1].type=="countermeasureSelectorNode"&&Pc(i),g=i[1]&&i[1].type=="artifactSelectorNode"&&Rc(i);return{c(){e=Y("div"),t=Y("p"),n=Y("small"),r=q("node: "),s=q(i[0]),a=ie(),T&&T.c(),l=ie(),N&&N.c(),o=ie(),g&&g.c(),u=ie(),f=Y("button"),f.textContent=h,d=ie(),c=Y("button"),c.textContent=p,this.h()},l(k){e=J(k,"DIV",{style:!0,class:!0});var w=Ce(e);t=J(w,"P",{style:!0});var R=Ce(t);n=J(R,"SMALL",{});var S=Ce(n);r=M(S,"node: "),s=M(S,i[0]),S.forEach(v),R.forEach(v),a=ae(w),T&&T.l(w),l=ae(w),N&&N.l(w),o=ae(w),g&&g.l(w),u=ae(w),f=J(w,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(f)!=="svelte-1spbqw1"&&(f.textContent=h),d=ae(w),c=J(w,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(c)!=="svelte-1pyou7z"&&(c.textContent=p),w.forEach(v),this.h()},h(){gt(t,"margin","0.5em"),ee(f,"class","svelte-1o17oqa"),ee(c,"class","svelte-1o17oqa"),ee(e,"style",_=i[2]()),ee(e,"class","context-menu svelte-1o17oqa")},m(k,w){C(k,e,w),V(e,t),V(t,n),V(n,r),V(n,s),V(e,a),T&&T.m(e,null),V(e,l),N&&N.m(e,null),V(e,o),g&&g.m(e,null),V(e,u),V(e,f),V(e,d),V(e,c),m=!0,y||(O=[ye(f,"click",i[5]),ye(c,"click",i[6])],y=!0)},p(k,[w]){(!m||w&1)&&we(s,k[0]),k[1]&&k[1].type=="attackSelectorNode"?T?(T.p(k,w),w&2&&ue(T,1)):(T=Ic(k),T.c(),ue(T,1),T.m(e,l)):T&&(ut(),de(T,1,1,()=>{T=null}),ft()),k[1]&&k[1].type=="countermeasureSelectorNode"?N?(N.p(k,w),w&2&&ue(N,1)):(N=Pc(k),N.c(),ue(N,1),N.m(e,o)):N&&(ut(),de(N,1,1,()=>{N=null}),ft()),k[1]&&k[1].type=="artifactSelectorNode"?g?(g.p(k,w),w&2&&ue(g,1)):(g=Rc(k),g.c(),ue(g,1),g.m(e,u)):g&&(ut(),de(g,1,1,()=>{g=null}),ft()),(!m||w&4&&_!==(_=k[2]()))&&ee(e,"style",_)},i(k){m||(ue(T),ue(N),ue(g),m=!0)},o(k){de(T),de(N),de(g),m=!1},d(k){k&&v(e),T&&T.d(),N&&N.d(),g&&g.d(),y=!1,ht(O)}}}function o3(i,e,t){let n,r,s,a,{id:l}=e,{top:o}=e,{left:u}=e,{right:f}=e,{bottom:h}=e;const d=Gr();tt(i,d,m=>t(11,a=m));const c=$r();tt(i,c,m=>t(12,s=m));function p(){const m=a.find(y=>y.id===l);m&&(console.log(m),a.push(Object.assign(Object.assign({},m),{id:`${l}-copy${Math.random()}`.slice(-24),position:{x:m.position.x,y:m.position.y+50}}))),d.set(a)}function _(){mt(d,a=a.filter(m=>m.id!==l),a),mt(c,s=s.filter(m=>m.source!==l&&m.target!==l),s),d.set(a),c.set(s)}return i.$$set=m=>{"id"in m&&t(0,l=m.id),"top"in m&&t(7,o=m.top),"left"in m&&t(8,u=m.left),"right"in m&&t(9,f=m.right),"bottom"in m&&t(10,h=m.bottom)},i.$$.update=()=>{i.$$.dirty&2049&&t(1,n=a.find(m=>m.id===l)),i.$$.dirty&1920&&t(2,r=()=>{let m="";return o&&(m+=`top:${o}px;`),h&&(m+=`bottom:${h}px;`),u&&(m+=`left:${u}px;`),f&&(m+=`right:${f}px;`),m})},[l,n,r,d,c,p,_,o,u,f,h,a]}class u3 extends yt{constructor(e){super(),Et(this,e,o3,l3,it,{id:0,top:7,left:8,right:9,bottom:10})}}function Fc(i,e,t){const n=i.slice();return n[12]=e[t],n}function Oc(i){let e,t,n,r,s,a,l,o,u,f,h,d,c;const p=i[8].default,_=Vt(p,i,i[7],null);let m=Ge(i[3]),y=[];for(let O=0;O<m.length;O+=1)y[O]=Bc(Fc(i,m,O));return{c(){e=Y("div"),t=Y("div"),n=Y("h2"),r=q(i[1]),s=ie(),a=Y("p"),l=q(i[2]),o=ie(),_&&_.c(),u=ie(),f=Y("div");for(let O=0;O<y.length;O+=1)y[O].c();this.h()},l(O){e=J(O,"DIV",{class:!0});var T=Ce(e);t=J(T,"DIV",{class:!0});var N=Ce(t);n=J(N,"H2",{});var g=Ce(n);r=M(g,i[1]),g.forEach(v),s=ae(N),a=J(N,"P",{});var k=Ce(a);l=M(k,i[2]),k.forEach(v),o=ae(N),_&&_.l(N),u=ae(N),f=J(N,"DIV",{class:!0});var w=Ce(f);for(let R=0;R<y.length;R+=1)y[R].l(w);w.forEach(v),N.forEach(v),T.forEach(v),this.h()},h(){ee(f,"class","options svelte-zbcx3u"),ee(t,"class","modal-content center text-center svelte-zbcx3u"),ee(e,"class","modal-overlay svelte-zbcx3u")},m(O,T){C(O,e,T),V(e,t),V(t,n),V(n,r),V(t,s),V(t,a),V(a,l),V(t,o),_&&_.m(t,null),V(t,u),V(t,f);for(let N=0;N<y.length;N+=1)y[N]&&y[N].m(f,null);h=!0,d||(c=[ye(t,"click",Wt(i[9])),ye(e,"click",i[4])],d=!0)},p(O,T){if((!h||T&2)&&we(r,O[1]),(!h||T&4)&&we(l,O[2]),_&&_.p&&(!h||T&128)&&zt(_,p,O,O[7],h?xt(p,O[7],T,null):Ht(O[7]),null),T&40){m=Ge(O[3]);let N;for(N=0;N<m.length;N+=1){const g=Fc(O,m,N);y[N]?y[N].p(g,T):(y[N]=Bc(g),y[N].c(),y[N].m(f,null))}for(;N<y.length;N+=1)y[N].d(1);y.length=m.length}},i(O){h||(ue(_,O),h=!0)},o(O){de(_,O),h=!1},d(O){O&&v(e),_&&_.d(O),wt(y,O),d=!1,ht(c)}}}function Bc(i){let e,t=i[12].label+"",n,r,s,a;function l(){return i[10](i[12])}return{c(){e=Y("button"),n=q(t),r=ie(),this.h()},l(o){e=J(o,"BUTTON",{class:!0});var u=Ce(e);n=M(u,t),r=ae(u),u.forEach(v),this.h()},h(){ee(e,"class","svelte-zbcx3u")},m(o,u){C(o,e,u),V(e,n),V(e,r),s||(a=ye(e,"click",l),s=!0)},p(o,u){i=o,u&8&&t!==(t=i[12].label+"")&&we(n,t)},d(o){o&&v(e),s=!1,a()}}}function f3(i){let e,t,n=i[0]&&Oc(i);return{c(){n&&n.c(),e=Re()},l(r){n&&n.l(r),e=Re()},m(r,s){n&&n.m(r,s),C(r,e,s),t=!0},p(r,[s]){r[0]?n?(n.p(r,s),s&1&&ue(n,1)):(n=Oc(r),n.c(),ue(n,1),n.m(e.parentNode,e)):n&&(ut(),de(n,1,1,()=>{n=null}),ft())},i(r){t||(ue(n),t=!0)},o(r){de(n),t=!1},d(r){r&&v(e),n&&n.d(r)}}}function c3(i,e,t){let{$$slots:n={},$$scope:r}=e,{is_open:s=!1}=e,{title:a=""}=e,{content:l=""}=e,{imageSrc:o=""}=e,{options:u=[]}=e;const f=ss();function h(){t(0,s=!1)}function d(_){f("optionSelected",_),h()}function c(_){Fr.call(this,i,_)}const p=_=>d(_);return i.$$set=_=>{"is_open"in _&&t(0,s=_.is_open),"title"in _&&t(1,a=_.title),"content"in _&&t(2,l=_.content),"imageSrc"in _&&t(6,o=_.imageSrc),"options"in _&&t(3,u=_.options),"$$scope"in _&&t(7,r=_.$$scope)},[s,a,l,u,h,d,o,r,n,c,p]}class Lc extends yt{constructor(e){super(),Et(this,e,c3,f3,it,{is_open:0,title:1,content:2,imageSrc:6,options:3})}}function Uc(i,e,t){const n=i.slice();return n[11]=e[t],n}function jc(i){let e,t,n,r,s,a,l,o,u,f,h,d,c;const p=i[7].default,_=Vt(p,i,i[6],null);let m=Ge(i[3]),y=[];for(let O=0;O<m.length;O+=1)y[O]=qc(Uc(i,m,O));return{c(){e=Y("div"),t=Y("div"),n=Y("h2"),r=q(i[1]),s=ie(),a=Y("p"),l=q(i[2]),o=ie(),_&&_.c(),u=ie(),f=Y("div");for(let O=0;O<y.length;O+=1)y[O].c();this.h()},l(O){e=J(O,"DIV",{class:!0});var T=Ce(e);t=J(T,"DIV",{class:!0});var N=Ce(t);n=J(N,"H2",{});var g=Ce(n);r=M(g,i[1]),g.forEach(v),s=ae(N),a=J(N,"P",{});var k=Ce(a);l=M(k,i[2]),k.forEach(v),o=ae(N),_&&_.l(N),u=ae(N),f=J(N,"DIV",{class:!0});var w=Ce(f);for(let R=0;R<y.length;R+=1)y[R].l(w);w.forEach(v),N.forEach(v),T.forEach(v),this.h()},h(){ee(f,"class","options svelte-2iwk9m"),ee(t,"class","modal-content center text-center svelte-2iwk9m"),ee(e,"class","modal-overlay svelte-2iwk9m")},m(O,T){C(O,e,T),V(e,t),V(t,n),V(n,r),V(t,s),V(t,a),V(a,l),V(t,o),_&&_.m(t,null),V(t,u),V(t,f);for(let N=0;N<y.length;N+=1)y[N]&&y[N].m(f,null);h=!0,d||(c=[ye(t,"click",Wt(i[8])),ye(e,"click",i[4])],d=!0)},p(O,T){if((!h||T&2)&&we(r,O[1]),(!h||T&4)&&we(l,O[2]),_&&_.p&&(!h||T&64)&&zt(_,p,O,O[6],h?xt(p,O[6],T,null):Ht(O[6]),null),T&40){m=Ge(O[3]);let N;for(N=0;N<m.length;N+=1){const g=Uc(O,m,N);y[N]?y[N].p(g,T):(y[N]=qc(g),y[N].c(),y[N].m(f,null))}for(;N<y.length;N+=1)y[N].d(1);y.length=m.length}},i(O){h||(ue(_,O),h=!0)},o(O){de(_,O),h=!1},d(O){O&&v(e),_&&_.d(O),wt(y,O),d=!1,ht(c)}}}function qc(i){let e,t=i[11].label+"",n,r,s,a;function l(){return i[9](i[11])}return{c(){e=Y("button"),n=q(t),r=ie(),this.h()},l(o){e=J(o,"BUTTON",{class:!0});var u=Ce(e);n=M(u,t),r=ae(u),u.forEach(v),this.h()},h(){ee(e,"class","svelte-2iwk9m")},m(o,u){C(o,e,u),V(e,n),V(e,r),s||(a=ye(e,"click",l),s=!0)},p(o,u){i=o,u&8&&t!==(t=i[11].label+"")&&we(n,t)},d(o){o&&v(e),s=!1,a()}}}function d3(i){let e,t,n=i[0]&&jc(i);return{c(){n&&n.c(),e=Re()},l(r){n&&n.l(r),e=Re()},m(r,s){n&&n.m(r,s),C(r,e,s),t=!0},p(r,[s]){r[0]?n?(n.p(r,s),s&1&&ue(n,1)):(n=jc(r),n.c(),ue(n,1),n.m(e.parentNode,e)):n&&(ut(),de(n,1,1,()=>{n=null}),ft())},i(r){t||(ue(n),t=!0)},o(r){de(n),t=!1},d(r){r&&v(e),n&&n.d(r)}}}function h3(i,e,t){let{$$slots:n={},$$scope:r}=e,{is_open:s=!1}=e,{title:a=""}=e,{content:l=""}=e,{options:o=[{label:"Cancel",value:"cancel"}]}=e;const u=ss();function f(){t(0,s=!1)}function h(p){u("model_shared",p),f()}function d(p){Fr.call(this,i,p)}const c=p=>h(p);return i.$$set=p=>{"is_open"in p&&t(0,s=p.is_open),"title"in p&&t(1,a=p.title),"content"in p&&t(2,l=p.content),"options"in p&&t(3,o=p.options),"$$scope"in p&&t(6,r=p.$$scope)},[s,a,l,o,f,h,r,n,d,c]}class p3 extends yt{constructor(e){super(),Et(this,e,h3,d3,it,{is_open:0,title:1,content:2,options:3})}}function _3(i){let e,t="❐";return{c(){e=Y("icon"),e.textContent=t,this.h()},l(n){e=J(n,"ICON",{title:!0,"data-svelte-h":!0}),Ke(e)!=="svelte-10dwkvf"&&(e.textContent=t),this.h()},h(){ee(e,"title","Full Screen Mode")},m(n,r){C(n,e,r)},d(n){n&&v(e)}}}function m3(i){let e,t="⧉ Exit Fullscreen";return{c(){e=Y("icon"),e.textContent=t,this.h()},l(n){e=J(n,"ICON",{title:!0,"data-svelte-h":!0}),Ke(e)!=="svelte-2wnxo3"&&(e.textContent=t),this.h()},h(){ee(e,"title","Exit Full Screen Mode")},m(n,r){C(n,e,r)},d(n){n&&v(e)}}}function v3(i){let e,t,n,r,s,a;function l(d,c){return d[1]?m3:_3}let o=l(i),u=o(i);const f=i[4].default,h=Vt(f,i,i[3],null);return{c(){e=Y("div"),t=Y("button"),u.c(),n=ie(),h&&h.c(),this.h()},l(d){e=J(d,"DIV",{id:!0,class:!0});var c=Ce(e);t=J(c,"BUTTON",{class:!0});var p=Ce(t);u.l(p),p.forEach(v),n=ae(c),h&&h.l(c),c.forEach(v),this.h()},h(){ee(t,"class","fullscreen-toggle svelte-1jzyezl"),ln(t,"left",i[0]==="left"),ln(t,"right",i[0]==="right"),ee(e,"id","fullscreen-parent"),ee(e,"class","svelte-1jzyezl")},m(d,c){C(d,e,c),V(e,t),u.m(t,null),V(e,n),h&&h.m(e,null),r=!0,s||(a=ye(t,"click",i[2]),s=!0)},p(d,[c]){o!==(o=l(d))&&(u.d(1),u=o(d),u&&(u.c(),u.m(t,null))),(!r||c&1)&&ln(t,"left",d[0]==="left"),(!r||c&1)&&ln(t,"right",d[0]==="right"),h&&h.p&&(!r||c&8)&&zt(h,f,d,d[3],r?xt(f,d[3],c,null):Ht(d[3]),null)},i(d){r||(ue(h,d),r=!0)},o(d){de(h,d),r=!1},d(d){d&&v(e),u.d(),h&&h.d(d),s=!1,a()}}}function g3(i,e,t){let{$$slots:n={},$$scope:r}=e,{position:s="right"}=e,a=!1,l;as(()=>(l=document.getElementById("fullscreen-parent"),document.addEventListener("fullscreenchange",o),()=>{document.removeEventListener("fullscreenchange",o)}));function o(){t(1,a=!!document.fullscreenElement)}async function u(){if(a)try{await document.exitFullscreen()}catch(f){console.error("Error attempting to exit fullscreen:",f)}else try{await l.requestFullscreen()}catch(f){console.error("Error attempting to enable fullscreen:",f)}}return i.$$set=f=>{"position"in f&&t(0,s=f.position),"$$scope"in f&&t(3,r=f.$$scope)},[s,a,u,r,n]}class b3 extends yt{constructor(e){super(),Et(this,e,g3,v3,it,{position:0})}}function w3(i){let e,t,n="drag these nodes to the canvas below",r,s,a,l,o="Action",u,f,h="Event",d,c,p="Attack",_,m,y="Countermeasure",O,T,N,g="Endurant",k,w,R="Artifact",S,B,D="Information",L,A,I="Agent",x,j,re,Z="State",$,G,X="Vulnerability",oe,Q,le="Condition",Ve,ze;return{c(){e=Y("aside"),t=Y("div"),t.textContent=n,r=ie(),s=Y("div"),a=Y("div"),l=Y("div"),l.textContent=o,u=ie(),f=Y("div"),f.textContent=h,d=ie(),c=Y("div"),c.textContent=p,_=ie(),m=Y("div"),m.textContent=y,O=ie(),T=Y("div"),N=Y("div"),N.textContent=g,k=ie(),w=Y("div"),w.textContent=R,S=ie(),B=Y("div"),B.textContent=D,L=ie(),A=Y("div"),A.textContent=I,x=ie(),j=Y("div"),re=Y("div"),re.textContent=Z,$=ie(),G=Y("div"),G.textContent=X,oe=ie(),Q=Y("div"),Q.textContent=le,this.h()},l(ke){e=J(ke,"ASIDE",{class:!0});var Ie=Ce(e);t=J(Ie,"DIV",{class:!0,"data-svelte-h":!0}),Ke(t)!=="svelte-1gs57dm"&&(t.textContent=n),r=ae(Ie),s=J(Ie,"DIV",{class:!0});var ve=Ce(s);a=J(ve,"DIV",{class:!0});var he=Ce(a);l=J(he,"DIV",{class:!0,"data-svelte-h":!0}),Ke(l)!=="svelte-1yk6dej"&&(l.textContent=o),u=ae(he),f=J(he,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),Ke(f)!=="svelte-1hxo6k5"&&(f.textContent=h),d=ae(he),c=J(he,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),Ke(c)!=="svelte-1m30nhf"&&(c.textContent=p),_=ae(he),m=J(he,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),Ke(m)!=="svelte-xvztkt"&&(m.textContent=y),he.forEach(v),O=ae(ve),T=J(ve,"DIV",{class:!0});var Fe=Ce(T);N=J(Fe,"DIV",{class:!0,"data-svelte-h":!0}),Ke(N)!=="svelte-13fxc4g"&&(N.textContent=g),k=ae(Fe),w=J(Fe,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Ke(w)!=="svelte-p6iki9"&&(w.textContent=R),S=ae(Fe),B=J(Fe,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Ke(B)!=="svelte-gfucir"&&(B.textContent=D),L=ae(Fe),A=J(Fe,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Ke(A)!=="svelte-1k1k96h"&&(A.textContent=I),Fe.forEach(v),x=ae(ve),j=J(ve,"DIV",{class:!0});var ot=Ce(j);re=J(ot,"DIV",{class:!0,"data-svelte-h":!0}),Ke(re)!=="svelte-82roym"&&(re.textContent=Z),$=ae(ot),G=J(ot,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Ke(G)!=="svelte-tj9qj"&&(G.textContent=X),oe=ae(ot),Q=J(ot,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Ke(Q)!=="svelte-1mwlumu"&&(Q.textContent=le),ot.forEach(v),ve.forEach(v),Ie.forEach(v),this.h()},h(){ee(t,"class","label svelte-1ubw31k"),ee(l,"class","text-center font-medium"),ee(f,"class","actionNode example-node svelte-1ubw31k"),ee(f,"draggable",!0),gt(f,"text-align","center"),gt(f,"background","white"),ee(f,"title","d3f:Event"),ee(c,"class","attackSelectorNode example-node svelte-1ubw31k"),ee(c,"draggable",!0),gt(c,"text-align","center"),gt(c,"background","#FFD0D0"),ee(c,"title","d3f:OffensiveTechnique"),ee(m,"class","countermeasureSelectorNode example-node svelte-1ubw31k"),ee(m,"draggable",!0),gt(m,"text-align","center"),gt(m,"background","#d6eaff"),ee(m,"title","d3f:DefensiveTechnique"),ee(a,"class","nodes-column svelte-1ubw31k"),ee(N,"class","text-center font-medium"),ee(w,"class","artifactSelectorNode art-node example-node svelte-1ubw31k"),ee(w,"draggable",!0),gt(w,"text-align","center"),gt(w,"background","#fff4dd"),ee(B,"class","informationSelectorNode example-node svelte-1ubw31k"),ee(B,"draggable",!0),gt(B,"text-align","center"),gt(B,"background","#e8f4ea"),ee(A,"class","agentSelectorNode example-node svelte-1ubw31k"),ee(A,"draggable",!0),gt(A,"text-align","center"),gt(A,"background","#f0e6e6"),ee(T,"class","nodes-column svelte-1ubw31k"),ee(re,"class","text-center font-medium"),ee(G,"class","vulnerabilitySelectorNode example-node svelte-1ubw31k"),ee(G,"draggable",!0),gt(G,"text-align","center"),gt(G,"background","#f9d999"),ee(Q,"class","conditionDefinitionNode example-node svelte-1ubw31k"),ee(Q,"draggable",!0),gt(Q,"text-align","center"),gt(Q,"background","#ece6ff"),ee(j,"class","nodes-column svelte-1ubw31k"),ee(s,"class","nodes-container svelte-1ubw31k"),ee(e,"class","svelte-1ubw31k")},m(ke,Ie){C(ke,e,Ie),V(e,t),V(e,r),V(e,s),V(s,a),V(a,l),V(a,u),V(a,f),V(a,d),V(a,c),V(a,_),V(a,m),V(s,O),V(s,T),V(T,N),V(T,k),V(T,w),V(T,S),V(T,B),V(T,L),V(T,A),V(s,x),V(s,j),V(j,re),V(j,$),V(j,G),V(j,oe),V(j,Q),Ve||(ze=[ye(f,"dragstart",i[1]),ye(c,"dragstart",i[2]),ye(m,"dragstart",i[3]),ye(w,"dragstart",i[4]),ye(B,"dragstart",i[5]),ye(A,"dragstart",i[6]),ye(G,"dragstart",i[7]),ye(Q,"dragstart",i[8])],Ve=!0)},p:Me,i:Me,o:Me,d(ke){ke&&v(e),Ve=!1,ht(ze)}}}function y3(i){const e=(f,h)=>{if(!f.dataTransfer)return null;f.dataTransfer.setData("application/svelteflow",h),f.dataTransfer.effectAllowed="move"};return[e,f=>e(f,"eventNode"),f=>e(f,"attackSelectorNode"),f=>e(f,"countermeasureSelectorNode"),f=>e(f,"artifactSelectorNode"),f=>e(f,"informationSelectorNode"),f=>e(f,"agentSelectorNode"),f=>e(f,"vulnerabilitySelectorNode"),f=>e(f,"conditionDefinitionNode")]}class E3 extends yt{constructor(e){super(),Et(this,e,y3,w3,it,{})}}function Mc(i,e,t){const n=i.slice();return n[16]=e[t],n[20]=e,n[18]=t,n}function Vc(i,e,t){const n=i.slice();return n[16]=e[t],n[19]=e,n[18]=t,n}function zc(i,e,t){const n=i.slice();return n[16]=e[t],n[17]=e,n[18]=t,n}function Hc(i){let e,t,n=i[0].id+"",r,s,a;function l(f,h){return f[0].type=="attackSelectorNode"?A3:f[0].type=="vulnerabilitySelectorNode"?D3:k3}let o=l(i),u=o(i);return{c(){e=Y("p"),t=q("id: "),r=q(n),s=ie(),u.c(),a=Re(),this.h()},l(f){e=J(f,"P",{class:!0});var h=Ce(e);t=M(h,"id: "),r=M(h,n),h.forEach(v),s=ae(f),u.l(f),a=Re(),this.h()},h(){ee(e,"class","text-center")},m(f,h){C(f,e,h),V(e,t),V(e,r),C(f,s,h),u.m(f,h),C(f,a,h)},p(f,h){h&1&&n!==(n=f[0].id+"")&&we(r,n),o===(o=l(f))&&u?u.p(f,h):(u.d(1),u=o(f),u&&(u.c(),u.m(a.parentNode,a)))},d(f){f&&(v(e),v(s),v(a)),u.d(f)}}}function k3(i){let e,t,n,r,s,a,l,o,u,f,h,d,c,p,_,m,y,O="+",T,N,g=Ge(i[0].data.user_properties),k=[];for(let w=0;w<g.length;w+=1)k[w]=xc(Mc(i,g,w));return{c(){e=Y("p"),t=q("sequence: "),n=Y("br"),r=Y("input"),s=ie(),a=Y("br"),l=ie(),o=Y("br"),u=q(`
                label:`),f=Y("br"),h=Y("input"),d=Y("br"),c=ie(),p=Y("br"),_=ie();for(let w=0;w<k.length;w+=1)k[w].c();m=ie(),y=Y("button"),y.textContent=O,this.h()},l(w){e=J(w,"P",{class:!0});var R=Ce(e);t=M(R,"sequence: "),n=J(R,"BR",{}),r=J(R,"INPUT",{placeholder:!0,type:!0,name:!0}),s=ae(R),a=J(R,"BR",{}),l=ae(R),o=J(R,"BR",{}),u=M(R,`
                label:`),f=J(R,"BR",{}),h=J(R,"INPUT",{type:!0,name:!0}),d=J(R,"BR",{}),c=ae(R),p=J(R,"BR",{}),_=ae(R);for(let S=0;S<k.length;S+=1)k[S].l(R);m=ae(R),y=J(R,"BUTTON",{"data-svelte-h":!0}),Ke(y)!=="svelte-y9choq"&&(y.textContent=O),R.forEach(v),this.h()},h(){ee(r,"placeholder","property"),ee(r,"type","text"),ee(r,"name","editableInput"),ee(h,"type","text"),ee(h,"name","editableInput"),ee(e,"class","text-center")},m(w,R){C(w,e,R),V(e,t),V(e,n),V(e,r),$e(r,i[0].data.sequence),V(e,s),V(e,a),V(e,l),V(e,o),V(e,u),V(e,f),V(e,h),$e(h,i[0].data.label),V(e,d),V(e,c),V(e,p),V(e,_);for(let S=0;S<k.length;S+=1)k[S]&&k[S].m(e,null);V(e,m),V(e,y),T||(N=[ye(r,"input",i[12]),ye(h,"input",i[13]),ye(y,"click",i[1])],T=!0)},p(w,R){if(R&1&&r.value!==w[0].data.sequence&&$e(r,w[0].data.sequence),R&1&&h.value!==w[0].data.label&&$e(h,w[0].data.label),R&1){g=Ge(w[0].data.user_properties);let S;for(S=0;S<g.length;S+=1){const B=Mc(w,g,S);k[S]?k[S].p(B,R):(k[S]=xc(B),k[S].c(),k[S].m(e,m))}for(;S<k.length;S+=1)k[S].d(1);k.length=g.length}},d(w){w&&v(e),wt(k,w),T=!1,ht(N)}}}function D3(i){let e,t,n,r,s,a,l,o,u,f,h,d,c,p,_,m,y,O,T="+",N,g,k=Ge(i[0].data.user_properties),w=[];for(let R=0;R<k.length;R+=1)w[R]=Xc(Vc(i,k,R));return{c(){e=Y("p"),t=q("weakness: "),n=Y("br"),r=Y("input"),s=Y("br"),a=ie(),l=Y("br"),o=ie(),u=Y("br"),f=q(`
                label:`),h=Y("br"),d=Y("input"),c=Y("br"),p=ie(),_=Y("br"),m=ie();for(let R=0;R<w.length;R+=1)w[R].c();y=ie(),O=Y("button"),O.textContent=T,this.h()},l(R){e=J(R,"P",{class:!0});var S=Ce(e);t=M(S,"weakness: "),n=J(S,"BR",{}),r=J(S,"INPUT",{placeholder:!0,type:!0,name:!0}),s=J(S,"BR",{}),a=ae(S),l=J(S,"BR",{}),o=ae(S),u=J(S,"BR",{}),f=M(S,`
                label:`),h=J(S,"BR",{}),d=J(S,"INPUT",{type:!0,name:!0}),c=J(S,"BR",{}),p=ae(S),_=J(S,"BR",{}),m=ae(S);for(let B=0;B<w.length;B+=1)w[B].l(S);y=ae(S),O=J(S,"BUTTON",{"data-svelte-h":!0}),Ke(O)!=="svelte-y9choq"&&(O.textContent=T),S.forEach(v),this.h()},h(){ee(r,"placeholder","weakness"),ee(r,"type","text"),ee(r,"name","editableInput"),ee(d,"type","text"),ee(d,"name","editableInput"),ee(e,"class","text-center")},m(R,S){C(R,e,S),V(e,t),V(e,n),V(e,r),$e(r,i[0].data.weakness),V(e,s),V(e,a),V(e,l),V(e,o),V(e,u),V(e,f),V(e,h),V(e,d),$e(d,i[0].data.label),V(e,c),V(e,p),V(e,_),V(e,m);for(let B=0;B<w.length;B+=1)w[B]&&w[B].m(e,null);V(e,y),V(e,O),N||(g=[ye(r,"input",i[8]),ye(d,"input",i[9]),ye(O,"click",i[1])],N=!0)},p(R,S){if(S&1&&r.value!==R[0].data.weakness&&$e(r,R[0].data.weakness),S&1&&d.value!==R[0].data.label&&$e(d,R[0].data.label),S&1){k=Ge(R[0].data.user_properties);let B;for(B=0;B<k.length;B+=1){const D=Vc(R,k,B);w[B]?w[B].p(D,S):(w[B]=Xc(D),w[B].c(),w[B].m(e,y))}for(;B<w.length;B+=1)w[B].d(1);w.length=k.length}},d(R){R&&v(e),wt(w,R),N=!1,ht(g)}}}function A3(i){let e,t,n,r,s,a,l,o,u,f,h,d,c,p,_,m,y,O="+",T,N,g=Ge(i[0].data.user_properties),k=[];for(let w=0;w<g.length;w+=1)k[w]=Gc(zc(i,g,w));return{c(){e=Y("p"),t=q("sequence: "),n=Y("br"),r=Y("input"),s=ie(),a=Y("br"),l=ie(),o=Y("br"),u=q(`
                label:`),f=Y("br"),h=Y("input"),d=Y("br"),c=ie(),p=Y("br"),_=ie();for(let w=0;w<k.length;w+=1)k[w].c();m=ie(),y=Y("button"),y.textContent=O,this.h()},l(w){e=J(w,"P",{class:!0});var R=Ce(e);t=M(R,"sequence: "),n=J(R,"BR",{}),r=J(R,"INPUT",{placeholder:!0,type:!0,name:!0}),s=ae(R),a=J(R,"BR",{}),l=ae(R),o=J(R,"BR",{}),u=M(R,`
                label:`),f=J(R,"BR",{}),h=J(R,"INPUT",{type:!0,name:!0}),d=J(R,"BR",{}),c=ae(R),p=J(R,"BR",{}),_=ae(R);for(let S=0;S<k.length;S+=1)k[S].l(R);m=ae(R),y=J(R,"BUTTON",{"data-svelte-h":!0}),Ke(y)!=="svelte-y9choq"&&(y.textContent=O),R.forEach(v),this.h()},h(){ee(r,"placeholder","property"),ee(r,"type","text"),ee(r,"name","editableInput"),ee(h,"type","text"),ee(h,"name","editableInput"),ee(e,"class","text-center")},m(w,R){C(w,e,R),V(e,t),V(e,n),V(e,r),$e(r,i[0].data.sequence),V(e,s),V(e,a),V(e,l),V(e,o),V(e,u),V(e,f),V(e,h),$e(h,i[0].data.label),V(e,d),V(e,c),V(e,p),V(e,_);for(let S=0;S<k.length;S+=1)k[S]&&k[S].m(e,null);V(e,m),V(e,y),T||(N=[ye(r,"input",i[4]),ye(h,"input",i[5]),ye(y,"click",i[1])],T=!0)},p(w,R){if(R&1&&r.value!==w[0].data.sequence&&$e(r,w[0].data.sequence),R&1&&h.value!==w[0].data.label&&$e(h,w[0].data.label),R&1){g=Ge(w[0].data.user_properties);let S;for(S=0;S<g.length;S+=1){const B=zc(w,g,S);k[S]?k[S].p(B,R):(k[S]=Gc(B),k[S].c(),k[S].m(e,m))}for(;S<k.length;S+=1)k[S].d(1);k.length=g.length}},d(w){w&&v(e),wt(k,w),T=!1,ht(N)}}}function xc(i){let e,t,n,r,s,a,l,o,u;function f(){i[14].call(e,i[18])}function h(){i[15].call(r,i[18])}return{c(){e=Y("input"),t=ie(),n=Y("br"),r=Y("input"),s=ie(),a=Y("br"),l=Y("br"),this.h()},l(d){e=J(d,"INPUT",{placeholder:!0,type:!0,name:!0}),t=ae(d),n=J(d,"BR",{}),r=J(d,"INPUT",{placeholder:!0,type:!0,name:!0}),s=ae(d),a=J(d,"BR",{}),l=J(d,"BR",{}),this.h()},h(){ee(e,"placeholder","property"),ee(e,"type","text"),ee(e,"name","editableInput"),ee(r,"placeholder","value"),ee(r,"type","text"),ee(r,"name","editableInput")},m(d,c){C(d,e,c),$e(e,i[0].data.user_properties[i[18]][0]),C(d,t,c),C(d,n,c),C(d,r,c),$e(r,i[0].data.user_properties[i[18]][1]),C(d,s,c),C(d,a,c),C(d,l,c),o||(u=[ye(e,"input",f),ye(r,"input",h)],o=!0)},p(d,c){i=d,c&1&&e.value!==i[0].data.user_properties[i[18]][0]&&$e(e,i[0].data.user_properties[i[18]][0]),c&1&&r.value!==i[0].data.user_properties[i[18]][1]&&$e(r,i[0].data.user_properties[i[18]][1])},d(d){d&&(v(e),v(t),v(n),v(r),v(s),v(a),v(l)),o=!1,ht(u)}}}function Xc(i){let e,t,n,r,s,a,l,o,u;function f(){i[10].call(e,i[18])}function h(){i[11].call(r,i[18])}return{c(){e=Y("input"),t=ie(),n=Y("br"),r=Y("input"),s=ie(),a=Y("br"),l=Y("br"),this.h()},l(d){e=J(d,"INPUT",{placeholder:!0,type:!0,name:!0}),t=ae(d),n=J(d,"BR",{}),r=J(d,"INPUT",{placeholder:!0,type:!0,name:!0}),s=ae(d),a=J(d,"BR",{}),l=J(d,"BR",{}),this.h()},h(){ee(e,"placeholder","property"),ee(e,"type","text"),ee(e,"name","editableInput"),ee(r,"placeholder","value"),ee(r,"type","text"),ee(r,"name","editableInput")},m(d,c){C(d,e,c),$e(e,i[0].data.user_properties[i[18]][0]),C(d,t,c),C(d,n,c),C(d,r,c),$e(r,i[0].data.user_properties[i[18]][1]),C(d,s,c),C(d,a,c),C(d,l,c),o||(u=[ye(e,"input",f),ye(r,"input",h)],o=!0)},p(d,c){i=d,c&1&&e.value!==i[0].data.user_properties[i[18]][0]&&$e(e,i[0].data.user_properties[i[18]][0]),c&1&&r.value!==i[0].data.user_properties[i[18]][1]&&$e(r,i[0].data.user_properties[i[18]][1])},d(d){d&&(v(e),v(t),v(n),v(r),v(s),v(a),v(l)),o=!1,ht(u)}}}function Gc(i){let e,t,n,r,s,a,l,o,u;function f(){i[6].call(e,i[18])}function h(){i[7].call(r,i[18])}return{c(){e=Y("input"),t=ie(),n=Y("br"),r=Y("input"),s=ie(),a=Y("br"),l=Y("br"),this.h()},l(d){e=J(d,"INPUT",{placeholder:!0,type:!0,name:!0}),t=ae(d),n=J(d,"BR",{}),r=J(d,"INPUT",{placeholder:!0,type:!0,name:!0}),s=ae(d),a=J(d,"BR",{}),l=J(d,"BR",{}),this.h()},h(){ee(e,"placeholder","property"),ee(e,"type","text"),ee(e,"name","editableInput"),ee(r,"placeholder","value"),ee(r,"type","text"),ee(r,"name","editableInput")},m(d,c){C(d,e,c),$e(e,i[0].data.user_properties[i[18]][0]),C(d,t,c),C(d,n,c),C(d,r,c),$e(r,i[0].data.user_properties[i[18]][1]),C(d,s,c),C(d,a,c),C(d,l,c),o||(u=[ye(e,"input",f),ye(r,"input",h)],o=!0)},p(d,c){i=d,c&1&&e.value!==i[0].data.user_properties[i[18]][0]&&$e(e,i[0].data.user_properties[i[18]][0]),c&1&&r.value!==i[0].data.user_properties[i[18]][1]&&$e(r,i[0].data.user_properties[i[18]][1])},d(d){d&&(v(e),v(t),v(n),v(r),v(s),v(a),v(l)),o=!1,ht(u)}}}function C3(i){let e,t,n,r=i[0]&&Hc(i);const s=i[3].default,a=Vt(s,i,i[2],null);return{c(){e=Y("div"),r&&r.c(),t=ie(),a&&a.c(),this.h()},l(l){e=J(l,"DIV",{class:!0});var o=Ce(e);r&&r.l(o),t=ae(o),a&&a.l(o),o.forEach(v),this.h()},h(){ee(e,"class","side-panel svelte-17hpejv")},m(l,o){C(l,e,o),r&&r.m(e,null),V(e,t),a&&a.m(e,null),n=!0},p(l,[o]){l[0]?r?r.p(l,o):(r=Hc(l),r.c(),r.m(e,t)):r&&(r.d(1),r=null),a&&a.p&&(!n||o&4)&&zt(a,s,l,l[2],n?xt(s,l[2],o,null):Ht(l[2]),null)},i(l){n||(ue(a,l),n=!0)},o(l){de(a,l),n=!1},d(l){l&&v(e),r&&r.d(),a&&a.d(l)}}}function T3(i,e,t){let n;tt(i,nt,T=>t(0,n=T));let{$$slots:r={},$$scope:s}=e;function a(){n.data.user_properties.push(["",""]),nt.set(n)}function l(){n.data.sequence=this.value,nt.set(n)}function o(){n.data.label=this.value,nt.set(n)}function u(T){n.data.user_properties[T][0]=this.value,nt.set(n)}function f(T){n.data.user_properties[T][1]=this.value,nt.set(n)}function h(){n.data.weakness=this.value,nt.set(n)}function d(){n.data.label=this.value,nt.set(n)}function c(T){n.data.user_properties[T][0]=this.value,nt.set(n)}function p(T){n.data.user_properties[T][1]=this.value,nt.set(n)}function _(){n.data.sequence=this.value,nt.set(n)}function m(){n.data.label=this.value,nt.set(n)}function y(T){n.data.user_properties[T][0]=this.value,nt.set(n)}function O(T){n.data.user_properties[T][1]=this.value,nt.set(n)}return i.$$set=T=>{"$$scope"in T&&t(2,s=T.$$scope)},[n,a,s,r,l,o,u,f,h,d,c,p,_,m,y,O]}class N3 extends yt{constructor(e){super(),Et(this,e,T3,C3,it,{})}}function $c(i,e,t){const n=i.slice();return n[9]=e[t],n}function Qc(i){let e,t=i[9]["rdfs:label"]+"",n,r,s,a,l;function o(...f){return i[7](i[9],...f)}function u(...f){return i[8](i[9],...f)}return{c(){e=Y("div"),n=q(t),r=ie(),this.h()},l(f){e=J(f,"DIV",{class:!0,title:!0,tabindex:!0,role:!0});var h=Ce(e);n=M(h,t),r=ae(h),h.forEach(v),this.h()},h(){ee(e,"class","select-technique"),ee(e,"title",s=i[9]["d3f:definition"]),ee(e,"tabindex","0"),ee(e,"role","button")},m(f,h){C(f,e,h),V(e,n),V(e,r),a||(l=[ye(e,"click",Wt(ai(o))),ye(e,"keydown",Wt(u))],a=!0)},p(f,h){i=f,h&8&&t!==(t=i[9]["rdfs:label"]+"")&&we(n,t),h&8&&s!==(s=i[9]["d3f:definition"])&&ee(e,"title",s)},d(f){f&&v(e),a=!1,ht(l)}}}function S3(i){let e,t=Ge(i[3]),n=[];for(let r=0;r<t.length;r+=1)n[r]=Qc($c(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Re()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Re()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);C(r,e,s)},p(r,[s]){if(s&12){t=Ge(r[3]);let a;for(a=0;a<t.length;a+=1){const l=$c(r,t,a);n[a]?n[a].p(l,s):(n[a]=Qc(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},i:Me,o:Me,d(r){r&&v(e),wt(n,r)}}}function I3(i,e,t){let n,r=Me,s=()=>(r(),r=hn(f,m=>t(5,n=m)),f),a,l=Me,o=()=>(l(),l=hn(u,m=>t(6,a=m)),u);i.$$.on_destroy.push(()=>r()),i.$$.on_destroy.push(()=>l());let{list:u}=e;o();let{filter_value_store:f}=e;s();let{select_item:h}=e,{regex_search_keys:d=["rdfs:label","@id"]}=e,c=[];const p=(m,y)=>h(y,m),_=(m,y)=>Ai(y,h,m);return i.$$set=m=>{"list"in m&&o(t(0,u=m.list)),"filter_value_store"in m&&s(t(1,f=m.filter_value_store)),"select_item"in m&&t(2,h=m.select_item),"regex_search_keys"in m&&t(4,d=m.regex_search_keys)},i.$$.update=()=>{i.$$.dirty&112&&t(3,c=Fm(a,n,d))},[u,f,h,c,d,n,a,p,_]}class P3 extends yt{constructor(e){super(),Et(this,e,I3,S3,it,{list:0,filter_value_store:1,select_item:2,regex_search_keys:4})}}function Wc(i,e,t){const n=i.slice();return n[12]=e[t],n}function Yc(i,e,t){const n=i.slice();return n[15]=e[t],n}function Jc(i){let e,t=Ge(i[12].children),n=[];for(let r=0;r<t.length;r+=1)n[r]=Kc(Yc(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Re()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Re()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);C(r,e,s)},p(r,s){if(s&20){t=Ge(r[12].children);let a;for(a=0;a<t.length;a+=1){const l=Yc(r,t,a);n[a]?n[a].p(l,s):(n[a]=Kc(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&v(e),wt(n,r)}}}function Kc(i){let e,t=i[15]["rdfs:label"]+"",n,r,s,a,l;function o(...f){return i[10](i[15],...f)}function u(...f){return i[11](i[15],...f)}return{c(){e=Y("div"),n=q(t),r=ie(),this.h()},l(f){e=J(f,"DIV",{class:!0,title:!0,tabindex:!0,role:!0});var h=Ce(e);n=M(h,t),r=ae(h),h.forEach(v),this.h()},h(){ee(e,"class","select-technique"),ee(e,"title",s=i[15]["d3f:definition"]),ee(e,"tabindex","0"),ee(e,"role","button")},m(f,h){C(f,e,h),V(e,n),V(e,r),a||(l=[ye(e,"click",Wt(ai(o))),ye(e,"keydown",Wt(u))],a=!0)},p(f,h){i=f,h&16&&t!==(t=i[15]["rdfs:label"]+"")&&we(n,t),h&16&&s!==(s=i[15]["d3f:definition"])&&ee(e,"title",s)},d(f){f&&v(e),a=!1,ht(l)}}}function Zc(i){let e,t,n=i[12]["rdfs:label"]+"",r,s,a,l,o,u,f,h=(i[3]===i[12]["@id"]||i[5])&&Jc(i);return{c(){e=Y("details"),t=Y("summary"),r=q(n),a=ie(),h&&h.c(),l=ie(),this.h()},l(d){e=J(d,"DETAILS",{});var c=Ce(e);t=J(c,"SUMMARY",{id:!0});var p=Ce(t);r=M(p,n),p.forEach(v),a=ae(c),h&&h.l(c),l=ae(c),c.forEach(v),this.h()},h(){ee(t,"id",s=i[12]["@id"]),e.open=o=i[3]===i[12]["@id"]||i[5]},m(d,c){C(d,e,c),V(e,t),V(t,r),V(e,a),h&&h.m(e,null),V(e,l),u||(f=ye(t,"click",Wt(ai(i[6]))),u=!0)},p(d,c){c&16&&n!==(n=d[12]["rdfs:label"]+"")&&we(r,n),c&16&&s!==(s=d[12]["@id"])&&ee(t,"id",s),d[3]===d[12]["@id"]||d[5]?h?h.p(d,c):(h=Jc(d),h.c(),h.m(e,l)):h&&(h.d(1),h=null),c&56&&o!==(o=d[3]===d[12]["@id"]||d[5])&&(e.open=o)},d(d){d&&v(e),h&&h.d(),u=!1,f()}}}function R3(i){let e,t=Ge(i[4]),n=[];for(let r=0;r<t.length;r+=1)n[r]=Zc(Wc(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Re()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Re()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);C(r,e,s)},p(r,[s]){if(s&124){t=Ge(r[4]);let a;for(a=0;a<t.length;a+=1){const l=Wc(r,t,a);n[a]?n[a].p(l,s):(n[a]=Zc(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},i:Me,o:Me,d(r){r&&v(e),wt(n,r)}}}function F3(i,e,t){let n,r,s=Me,a=()=>(s(),s=hn(h,T=>t(8,r=T)),h),l,o=Me,u=()=>(o(),o=hn(f,T=>t(9,l=T)),f);i.$$.on_destroy.push(()=>s()),i.$$.on_destroy.push(()=>o());let{list:f}=e;u();let{filter_value_store:h}=e;a();let{select_item:d}=e,{regex_search_keys:c=["d3f:definition","rdfs:label","@id","d3f:d3fend-id"]}=e,p=null,_=[];function m(T){const{id:N}=T.target;p===N?t(3,p=null):t(3,p=N)}const y=(T,N)=>d(N,T),O=(T,N)=>Ai(N,d,T);return i.$$set=T=>{"list"in T&&u(t(0,f=T.list)),"filter_value_store"in T&&a(t(1,h=T.filter_value_store)),"select_item"in T&&t(2,d=T.select_item),"regex_search_keys"in T&&t(7,c=T.regex_search_keys)},i.$$.update=()=>{i.$$.dirty&896&&t(4,_=Om(l,r,c)),i.$$.dirty&256&&t(5,n=!!r)},[f,h,d,p,_,n,m,c,r,l,y,O]}class O3 extends yt{constructor(e){super(),Et(this,e,F3,R3,it,{list:0,filter_value_store:1,select_item:2,regex_search_keys:7})}}function ed(i,e,t){const n=i.slice();return n[16]=e[t],n}function B3(i){let e,t,n,r;return{c(){e=Y("div"),t=q(i[6]),this.h()},l(s){e=J(s,"DIV",{id:!0,class:!0,role:!0,tabindex:!0});var a=Ce(e);t=M(a,i[6]),a.forEach(v),this.h()},h(){var s;ee(e,"id","selectable-technique"),ee(e,"class","no-arrow svelte-1t0ebq3"),ee(e,"role","tree"),ee(e,"tabindex","0"),ln(e,"current-selected",((s=i[8])==null?void 0:s["@id"])===i[0]["@id"])},m(s,a){C(s,e,a),V(e,t),n||(r=[ye(e,"click",Wt(ai(i[13]))),ye(e,"keydown",Wt(ai(i[14])))],n=!0)},p(s,a){var l;a&64&&we(t,s[6]),a&257&&ln(e,"current-selected",((l=s[8])==null?void 0:l["@id"])===s[0]["@id"])},i:Me,o:Me,d(s){s&&v(e),n=!1,ht(r)}}}function L3(i){let e,t,n="▶",r,s,a,l,o,u,f,h,d=i[4]&&td(i);return{c(){e=Y("span"),t=Y("span"),t.textContent=n,r=ie(),s=Y("span"),a=q(i[6]),l=ie(),d&&d.c(),o=Re(),this.h()},l(c){e=J(c,"SPAN",{class:!0,role:!0,tabindex:!0});var p=Ce(e);t=J(p,"SPAN",{class:!0,"data-svelte-h":!0}),Ke(t)!=="svelte-1xn7s3"&&(t.textContent=n),r=ae(p),s=J(p,"SPAN",{id:!0,class:!0});var _=Ce(s);a=M(_,i[6]),_.forEach(v),p.forEach(v),l=ae(c),d&&d.l(c),o=Re(),this.h()},h(){var c;ee(t,"class","arrow svelte-1t0ebq3"),ln(t,"arrowDown",i[5]),ee(s,"id","parent-selectable-technique"),ee(s,"class","label svelte-1t0ebq3"),ee(e,"class","parent-technique svelte-1t0ebq3"),ee(e,"role","tree"),ee(e,"tabindex","0"),ln(e,"current-selected",((c=i[8])==null?void 0:c["@id"])===i[0]["@id"])},m(c,p){C(c,e,p),V(e,t),V(e,r),V(e,s),V(s,a),C(c,l,p),d&&d.m(c,p),C(c,o,p),u=!0,f||(h=[ye(e,"click",Wt(ai(i[11]))),ye(e,"keydown",Wt(ai(i[12])))],f=!0)},p(c,p){var _;(!u||p&32)&&ln(t,"arrowDown",c[5]),(!u||p&64)&&we(a,c[6]),(!u||p&257)&&ln(e,"current-selected",((_=c[8])==null?void 0:_["@id"])===c[0]["@id"]),c[4]?d?(d.p(c,p),p&16&&ue(d,1)):(d=td(c),d.c(),ue(d,1),d.m(o.parentNode,o)):d&&(ut(),de(d,1,1,()=>{d=null}),ft())},i(c){u||(ue(d),u=!0)},o(c){de(d),u=!1},d(c){c&&(v(e),v(l),v(o)),d&&d.d(c),f=!1,ht(h)}}}function td(i){let e,t,n=Ge(i[7]),r=[];for(let a=0;a<n.length;a+=1)r[a]=rd(ed(i,n,a));const s=a=>de(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Re()},l(a){for(let l=0;l<r.length;l+=1)r[l].l(a);e=Re()},m(a,l){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(a,l);C(a,e,l),t=!0},p(a,l){if(l&134){n=Ge(a[7]);let o;for(o=0;o<n.length;o+=1){const u=ed(a,n,o);r[o]?(r[o].p(u,l),ue(r[o],1)):(r[o]=rd(u),r[o].c(),ue(r[o],1),r[o].m(e.parentNode,e))}for(ut(),o=n.length;o<r.length;o+=1)s(o);ft()}},i(a){if(!t){for(let l=0;l<n.length;l+=1)ue(r[l]);t=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)de(r[l]);t=!1},d(a){a&&v(e),wt(r,a)}}}function rd(i){let e,t;return e=new S_({props:{tree:i[16],expanded_nodes:i[1],selected_node:i[2],first_node:!1}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r&128&&(s.tree=n[16]),r&2&&(s.expanded_nodes=n[1]),r&4&&(s.selected_node=n[2]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function U3(i){let e,t,n,r,s;const a=[L3,B3],l=[];function o(u,f){return u[7]?0:1}return n=o(i),r=l[n]=a[n](i),{c(){e=Y("ul"),t=Y("li"),r.c(),this.h()},l(u){e=J(u,"UL",{style:!0,class:!0});var f=Ce(e);t=J(f,"LI",{});var h=Ce(t);r.l(h),h.forEach(v),f.forEach(v),this.h()},h(){gt(e,"--first-node",i[3]?"0rem":"0.6rem"),ee(e,"class","svelte-1t0ebq3")},m(u,f){C(u,e,f),V(e,t),l[n].m(t,null),s=!0},p(u,[f]){let h=n;n=o(u),n===h?l[n].p(u,f):(ut(),de(l[h],1,1,()=>{l[h]=null}),ft(),r=l[n],r?r.p(u,f):(r=l[n]=a[n](u),r.c()),ue(r,1),r.m(t,null)),(!s||f&8)&&gt(e,"--first-node",u[3]?"0rem":"0.6rem")},i(u){s||(ue(r),s=!0)},o(u){de(r),s=!1},d(u){u&&v(e),l[n].d()}}}function j3(i,e,t){let n,r,s,a,l=Me,o=()=>(l(),l=hn(p,w=>t(8,a=w)),p),u,f=Me,h=()=>(f(),f=hn(c,w=>t(15,u=w)),c);i.$$.on_destroy.push(()=>l()),i.$$.on_destroy.push(()=>f());let{tree:d}=e,{expanded_nodes:c}=e;h();let{selected_node:p}=e;o();let{first_node:_=!0}=e,m=u[n]||!1;function y(w,R){t(4,m=!m),mt(p,a=R,a)}function O(w,R){mt(p,a=R,a)}const T=w=>y(w,d),N=w=>Ai(w,y,d),g=w=>O(w,d),k=w=>Ai(w,O,d);return i.$$set=w=>{"tree"in w&&t(0,d=w.tree),"expanded_nodes"in w&&h(t(1,c=w.expanded_nodes)),"selected_node"in w&&o(t(2,p=w.selected_node)),"first_node"in w&&t(3,_=w.first_node)},i.$$.update=()=>{var w;i.$$.dirty&1&&t(6,n=((w=d==null?void 0:d["rdfs:label"])==null?void 0:w[0])??d["@id"]),i.$$.dirty&1&&t(7,r=d.children),i.$$.dirty&16&&t(5,s=m)},[d,c,p,_,m,s,n,r,a,y,O,T,N,g,k]}class S_ extends yt{constructor(e){super(),Et(this,e,j3,U3,it,{tree:0,expanded_nodes:1,selected_node:2,first_node:3})}}function nd(i,e,t){const n=i.slice();return n[10]=e[t],n}function id(i){let e,t;return e=new S_({props:{tree:i[10],expanded_nodes:i[4],selected_node:i[5],select_item:i[2]}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r&8&&(s.tree=n[10]),r&4&&(s.select_item=n[2]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function q3(i){let e,t,n=Ge(i[3]),r=[];for(let a=0;a<n.length;a+=1)r[a]=id(nd(i,n,a));const s=a=>de(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Re()},l(a){for(let l=0;l<r.length;l+=1)r[l].l(a);e=Re()},m(a,l){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(a,l);C(a,e,l),t=!0},p(a,[l]){if(l&60){n=Ge(a[3]);let o;for(o=0;o<n.length;o+=1){const u=nd(a,n,o);r[o]?(r[o].p(u,l),ue(r[o],1)):(r[o]=id(u),r[o].c(),ue(r[o],1),r[o].m(e.parentNode,e))}for(ut(),o=n.length;o<r.length;o+=1)s(o);ft()}},i(a){if(!t){for(let l=0;l<n.length;l+=1)ue(r[l]);t=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)de(r[l]);t=!1},d(a){a&&v(e),wt(r,a)}}}function M3(i,e,t){let n,r=Me,s=()=>(r(),r=hn(h,y=>t(7,n=y)),h),a,l=Me,o=()=>(l(),l=hn(f,y=>t(8,a=y)),f),u;i.$$.on_destroy.push(()=>r()),i.$$.on_destroy.push(()=>l());let{list:f}=e;o();let{filter_value_store:h}=e;s();let{select_item:d}=e,{regex_search_keys:c=["rdfs:label","@id"]}=e,p=[];const _=yr({}),m=yr(null);return tt(i,m,y=>t(9,u=y)),Dl(()=>{u&&d(null,u,"d3f_property")}),i.$$set=y=>{"list"in y&&o(t(0,f=y.list)),"filter_value_store"in y&&s(t(1,h=y.filter_value_store)),"select_item"in y&&t(2,d=y.select_item),"regex_search_keys"in y&&t(6,c=y.regex_search_keys)},i.$$.update=()=>{i.$$.dirty&448&&t(3,p=Lm(a.associated,n,c))},[f,h,d,p,_,m,c,n,a]}class V3 extends yt{constructor(e){super(),Et(this,e,M3,q3,it,{list:0,filter_value_store:1,select_item:2,regex_search_keys:6})}}const z3=i=>({}),ad=i=>({R:i[6],filter_value_store:i[4],select_item:i[9]});function sd(i){let e,t,n,r,s,a,l;const o=i[18].default,u=Vt(o,i,i[17],ad);return{c(){e=Y("ul"),t=Y("input"),n=ie(),u&&u.c(),this.h()},l(f){e=J(f,"UL",{id:!0,class:!0});var h=Ce(e);t=J(h,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0,class:!0}),n=ae(h),u&&u.l(h),h.forEach(v),this.h()},h(){ee(t,"type","text"),ee(t,"id","filter"),ee(t,"name","filter"),ee(t,"placeholder","Filter / Save"),ee(t,"class","svelte-134tvrp"),ee(e,"id","d3fend-container"),ee(e,"class","dropdown-menu svelte-134tvrp")},m(f,h){C(f,e,h),V(e,t),V(e,n),u&&u.m(e,null),s=!0,a||(l=[Oo(Sm.call(null,t)),ye(t,"click",Wt(i[19])),ye(t,"keyup",Wt(i[20])),ye(t,"keydown",Wt(i[21])),Oo(Im.call(null,e)),ye(e,"outsideclick",i[7])],a=!0)},p(f,h){u&&u.p&&(!s||h&131072)&&zt(u,o,f,f[17],s?xt(o,f[17],h,z3):Ht(f[17]),ad)},i(f){s||(ue(u,f),f&&tl(()=>{s&&(r||(r=jo(e,Qo,{delay:50,duration:200,axis:"y"},!0)),r.run(1))}),s=!0)},o(f){de(u,f),f&&(r||(r=jo(e,Qo,{delay:50,duration:200,axis:"y"},!1)),r.run(0)),s=!1},d(f){f&&v(e),u&&u.d(f),f&&r&&r.end(),a=!1,ht(l)}}}function H3(i){let e,t,n,r,s,a,l,o,u,f,h=i[2]&&sd(i);return{c(){e=Y("div"),t=Y("div"),n=Y("div"),r=Y("span"),s=q(i[1]),a=ie(),h&&h.c(),this.h()},l(d){e=J(d,"DIV",{class:!0,style:!0});var c=Ce(e);t=J(c,"DIV",{class:!0,role:!0,tabindex:!0});var p=Ce(t);n=J(p,"DIV",{class:!0});var _=Ce(n);r=J(_,"SPAN",{class:!0});var m=Ce(r);s=M(m,i[1]),m.forEach(v),_.forEach(v),a=ae(p),h&&h.l(p),p.forEach(v),c.forEach(v),this.h()},h(){ee(r,"class","selected svelte-134tvrp"),ee(n,"class","select autocomplete-dropdown svelte-134tvrp"),ee(t,"class",l="dropdown "+(i[2]?"active":"")+" svelte-134tvrp"),ee(t,"role","button"),ee(t,"tabindex","0"),ee(e,"class","container svelte-134tvrp"),gt(e,"--input-color",i[0])},m(d,c){C(d,e,c),V(e,t),V(t,n),V(n,r),V(r,s),V(t,a),h&&h.m(t,null),o=!0,u||(f=[ye(t,"click",i[8]),ye(t,"keydown",i[22])],u=!0)},p(d,[c]){(!o||c&2)&&we(s,d[1]),d[2]?h?(h.p(d,c),c&4&&ue(h,1)):(h=sd(d),h.c(),ue(h,1),h.m(t,null)):h&&(ut(),de(h,1,1,()=>{h=null}),ft()),(!o||c&4&&l!==(l="dropdown "+(d[2]?"active":"")+" svelte-134tvrp"))&&ee(t,"class",l),(!o||c&1)&&gt(e,"--input-color",d[0])},i(d){o||(ue(h),o=!0)},o(d){de(h),o=!1},d(d){d&&v(e),h&&h.d(),u=!1,ht(f)}}}function x3(i,e,t){let n,r,s,a,{$$slots:l={},$$scope:o}=e,{node_id:u}=e,{element_id:f}=e,{input_color:h="white"}=e,{place_holder:d="< d3fend class >"}=e,{flow_store_hook:c=Gr}=e,{data_save_key:p="d3f_class"}=e;const _=yr(!1);tt(i,_,A=>t(2,a=A));const m=yr(null);tt(i,m,A=>t(24,r=A));const y=c();tt(i,y,A=>t(25,s=A));const O={ItemTree:O3,ItemList:P3,ItemProperty:V3};let T;Dl(()=>{mt(m,r="",r)});function N(){mt(_,a=!1,a),mt(m,r="",r)}function g(A){a?N():mt(_,a=!0,a)}function k(A,I,x="d3f_class"){let j=I["rdfs:label"];Array.isArray(I["rdfs:label"])&&(j=I["rdfs:label"][0]),s.forEach(re=>{re.id===u&&(re.data=Object.assign(Object.assign({},re.data),{[x]:I["@id"],label:j}))}),y.set(s),N()}function w(A){clearTimeout(T),T=setTimeout(()=>{mt(m,r=A.target.value,r)},400)}function R(A){const I=A.target.value;k(A,{"rdfs:label":I,"@id":I},p)}function S(A){Fr.call(this,i,A)}const B=A=>w(A),D=A=>Ai(A,R),L=A=>Ai(A,g);return i.$$set=A=>{"node_id"in A&&t(12,u=A.node_id),"element_id"in A&&t(13,f=A.element_id),"input_color"in A&&t(0,h=A.input_color),"place_holder"in A&&t(14,d=A.place_holder),"flow_store_hook"in A&&t(15,c=A.flow_store_hook),"data_save_key"in A&&t(16,p=A.data_save_key),"$$scope"in A&&t(17,o=A.$$scope)},i.$$.update=()=>{i.$$.dirty&24576&&t(1,n=f||d)},[h,n,a,_,m,y,O,N,g,k,w,R,u,f,d,c,p,o,l,S,B,D,L]}class Li extends yt{constructor(e){super(),Et(this,e,x3,H3,it,{node_id:12,element_id:13,input_color:0,place_holder:14,flow_store_hook:15,data_save_key:16})}}function ld(i,e,t){const n=i.slice();return n[33]=e[t],n[34]=e,n[35]=t,n}function od(i){let e,t;return e=new bt({props:{type:"target",class:"customHandle",position:pt.Left,id:"target",style:i[17](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r[0]&2&&(s.isConnectable=n[1]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function ud(i){let e=i[7],t,n,r=fd(i);return{c(){r.c(),t=Re()},l(s){r.l(s),t=Re()},m(s,a){r.m(s,a),C(s,t,a),n=!0},p(s,a){a[0]&128&&it(e,e=s[7])?(ut(),de(r,1,1,Me),ft(),r=fd(s),r.c(),ue(r,1),r.m(t.parentNode,t)):r.p(s,a)},i(s){n||(ue(r),n=!0)},o(s){de(r),n=!1},d(s){s&&v(t),r.d(s)}}}function fd(i){let e,t,n,r,s,a,l,o;return e=new bt({props:{type:"source",position:pt.Top,id:"source",style:i[18](),isConnectable:i[1]}}),n=new bt({props:{type:"source",position:pt.Left,id:"source",style:i[18](),isConnectable:i[1]}}),s=new bt({props:{type:"source",position:pt.Right,id:"source",style:i[18](),isConnectable:i[1]}}),l=new bt({props:{type:"source",position:pt.Bottom,id:"source",style:i[18](),isConnectable:i[1]}}),{c(){Be(e.$$.fragment),t=ie(),Be(n.$$.fragment),r=ie(),Be(s.$$.fragment),a=ie(),Be(l.$$.fragment)},l(u){Le(e.$$.fragment,u),t=ae(u),Le(n.$$.fragment,u),r=ae(u),Le(s.$$.fragment,u),a=ae(u),Le(l.$$.fragment,u)},m(u,f){Ue(e,u,f),C(u,t,f),Ue(n,u,f),C(u,r,f),Ue(s,u,f),C(u,a,f),Ue(l,u,f),o=!0},p(u,f){const h={};f[0]&2&&(h.isConnectable=u[1]),e.$set(h);const d={};f[0]&2&&(d.isConnectable=u[1]),n.$set(d);const c={};f[0]&2&&(c.isConnectable=u[1]),s.$set(c);const p={};f[0]&2&&(p.isConnectable=u[1]),l.$set(p)},i(u){o||(ue(e.$$.fragment,u),ue(n.$$.fragment,u),ue(s.$$.fragment,u),ue(l.$$.fragment,u),o=!0)},o(u){de(e.$$.fragment,u),de(n.$$.fragment,u),de(s.$$.fragment,u),de(l.$$.fragment,u),o=!1},d(u){u&&(v(t),v(r),v(a)),je(e,u),je(n,u),je(s,u),je(l,u)}}}function X3(i){let e,t;return e=new i[36].ItemList({props:{list:Ah,filter_value_store:i[37],select_item:i[38]}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r[1]&64&&(s.filter_value_store=n[37]),r[1]&128&&(s.select_item=n[38]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function cd(i){let e,t=Ge(i[0].user_properties),n=[];for(let r=0;r<t.length;r+=1)n[r]=dd(ld(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Re()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Re()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);C(r,e,s)},p(r,s){if(s[0]&801){t=Ge(r[0].user_properties);let a;for(a=0;a<t.length;a+=1){const l=ld(r,t,a);n[a]?n[a].p(l,s):(n[a]=dd(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&v(e),wt(n,r)}}}function dd(i){let e,t,n,r,s,a,l,o,u;function f(...p){return i[28](i[35],...p)}function h(){i[29].call(n,i[35])}function d(...p){return i[30](i[35],...p)}function c(){i[31].call(a,i[35])}return{c(){e=Y("div"),t=Y("div"),n=Y("input"),r=ie(),s=Y("div"),a=Y("input"),l=ie(),this.h()},l(p){e=J(p,"DIV",{class:!0});var _=Ce(e);t=J(_,"DIV",{class:!0});var m=Ce(t);n=J(m,"INPUT",{placeholder:!0}),m.forEach(v),r=ae(_),s=J(_,"DIV",{class:!0});var y=Ce(s);a=J(y,"INPUT",{placeholder:!0}),y.forEach(v),l=ae(_),_.forEach(v),this.h()},h(){ee(n,"placeholder","property"),ee(t,"class","user-property flex-column"),ee(a,"placeholder","value"),ee(s,"class","user-value flex-column flex-grow-3"),ee(e,"class","user-properties flex")},m(p,_){C(p,e,_),V(e,t),V(t,n),$e(n,i[9][i[35]][0]),V(e,r),V(e,s),V(s,a),$e(a,i[8][i[35]][1]),V(e,l),o||(u=[ye(n,"input",f),ye(n,"input",h),ye(a,"input",d),ye(a,"input",c)],o=!0)},p(p,_){i=p,_[0]&512&&n.value!==i[9][i[35]][0]&&$e(n,i[9][i[35]][0]),_[0]&256&&a.value!==i[8][i[35]][1]&&$e(a,i[8][i[35]][1])},d(p){p&&v(e),o=!1,ht(u)}}}function G3(i){let e=i[4].inProgress,t,n,r,s,a,l,o,u,f,h,d,c,p,_,m,y,O,T,N,g,k,w="+",R,S,B,D=od(i),L=!i[6]&&ud(i);a=new Mn({props:{isVisible:i[2]}}),p=new Li({props:{node_id:i[3],element_id:i[0].d3f_class,input_color:"#ffc3c7",$$slots:{default:[X3,({R:I,filter_value_store:x,select_item:j})=>({36:I,37:x,38:j}),({R:I,filter_value_store:x,select_item:j})=>[0,(I?32:0)|(x?64:0)|(j?128:0)]]},$$scope:{ctx:i}}});let A=i[0].user_properties&&cd(i);return{c(){D.c(),t=ie(),n=Y("div"),L&&L.c(),r=ie(),s=Y("div"),Be(a.$$.fragment),l=ie(),o=Y("i"),u=q(`Attack Action
        `),f=Y("input"),h=ie(),d=Y("br"),c=ie(),Be(p.$$.fragment),_=ie(),m=Y("div"),y=Y("input"),O=ie(),T=Y("br"),N=ie(),A&&A.c(),g=ie(),k=Y("button"),k.textContent=w,this.h()},l(I){D.l(I),t=ae(I),n=J(I,"DIV",{class:!0});var x=Ce(n);L&&L.l(x),r=ae(x),s=J(x,"DIV",{class:!0});var j=Ce(s);Le(a.$$.fragment,j),l=ae(j),o=J(j,"I",{});var re=Ce(o);u=M(re,`Attack Action
        `),f=J(re,"INPUT",{class:!0,type:!0,style:!0}),re.forEach(v),h=ae(j),d=J(j,"BR",{}),c=ae(j),Le(p.$$.fragment,j),_=ae(j),m=J(j,"DIV",{});var Z=Ce(m);y=J(Z,"INPUT",{class:!0,type:!0,style:!0}),Z.forEach(v),O=ae(j),T=J(j,"BR",{}),N=ae(j),A&&A.l(j),g=ae(j),k=J(j,"BUTTON",{"data-svelte-h":!0}),Ke(k)!=="svelte-y9choq"&&(k.textContent=w),j.forEach(v),x.forEach(v),this.h()},h(){ee(f,"class","nodrag sequence"),ee(f,"type","text"),gt(f,"background","#ffc3c7"),ee(y,"class","nodrag"),ee(y,"type","text"),gt(y,"text-align","center"),gt(y,"background","#ffc3c7"),gt(y,"font-weight","bold"),ee(s,"class","attack-node node-inner svelte-pkj1to"),ee(n,"class","attack-node node svelte-pkj1to")},m(I,x){D.m(I,x),C(I,t,x),C(I,n,x),L&&L.m(n,null),V(n,r),V(n,s),Ue(a,s,null),V(s,l),V(s,o),V(o,u),V(o,f),$e(f,i[10]),V(s,h),V(s,d),V(s,c),Ue(p,s,null),V(s,_),V(s,m),V(m,y),$e(y,i[11]),V(s,O),V(s,T),V(s,N),A&&A.m(s,null),V(s,g),V(s,k),R=!0,S||(B=[ye(f,"input",i[24]),ye(f,"input",i[25]),ye(y,"input",i[26]),ye(y,"input",i[27]),ye(k,"click",i[12]),ye(n,"click",i[13]),ye(n,"mouseenter",i[15]),ye(n,"mouseleave",i[16])],S=!0)},p(I,x){x[0]&16&&it(e,e=I[4].inProgress)?(ut(),de(D,1,1,Me),ft(),D=od(I),D.c(),ue(D,1),D.m(t.parentNode,t)):D.p(I,x),I[6]?L&&(ut(),de(L,1,1,()=>{L=null}),ft()):L?(L.p(I,x),x[0]&64&&ue(L,1)):(L=ud(I),L.c(),ue(L,1),L.m(n,r));const j={};x[0]&4&&(j.isVisible=I[2]),a.$set(j),x[0]&1024&&f.value!==I[10]&&$e(f,I[10]);const re={};x[0]&8&&(re.node_id=I[3]),x[0]&1&&(re.element_id=I[0].d3f_class),x[1]&448&&(re.$$scope={dirty:x,ctx:I}),p.$set(re),x[0]&2048&&y.value!==I[11]&&$e(y,I[11]),I[0].user_properties?A?A.p(I,x):(A=cd(I),A.c(),A.m(s,g)):A&&(A.d(1),A=null)},i(I){R||(ue(D),ue(L),ue(a.$$.fragment,I),ue(p.$$.fragment,I),R=!0)},o(I){de(D),de(L),de(a.$$.fragment,I),de(p.$$.fragment,I),R=!1},d(I){I&&(v(t),v(n)),D.d(I),L&&L.d(),je(a),je(p),A&&A.d(),S=!1,ht(B)}}}function $3(i,e,t){let n,r,s,a,l,o,u;tt(i,Nr,G=>t(32,o=G)),tt(i,nt,G=>t(5,u=G));var f,h,d,c,p;let{data:_}=e,{isConnectable:m}=e,{selected:y=void 0}=e,{id:O}=e;function T(){N(),_.user_properties.push(["",""])}function N(){for(let G=0;G<o.length;G++)o[G].data==_&&mt(nt,u=o[G],u)}const g=Cn();tt(i,g,G=>t(4,l=G));let k=!1,w=!1;function R(){t(7,w=!0)}function S(){t(7,w=!1)}function B(){return l.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function D(){return w?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const L=G=>{t(0,_.sequence=G.currentTarget.value,_),mt(nt,u.data.sequence=_.sequence,u)};function A(){r=this.value,t(10,r),t(0,_),t(5,u),t(20,h)}const I=G=>{t(0,_.label=G.currentTarget.value,_),mt(nt,u.data.label=_.label,u)};function x(){n=this.value,t(11,n),t(0,_),t(5,u),t(19,f)}const j=(G,X)=>{t(0,_.user_properties[G][0]=X.currentTarget.value,_),mt(nt,u.data.user_properties[G][0]=X.currentTarget.value,u)};function re(G){s[G][0]=this.value,t(9,s),t(0,_),t(5,u),t(21,d)}const Z=(G,X)=>{t(0,_.user_properties[G][1]=X.currentTarget.value,_),mt(nt,u.data.user_properties[G][1]=X.currentTarget.value,u)};function $(G){a[G][1]=this.value,t(8,a),t(0,_),t(5,u),t(22,c)}return i.$$set=G=>{"data"in G&&t(0,_=G.data),"isConnectable"in G&&t(1,m=G.isConnectable),"selected"in G&&t(2,y=G.selected),"id"in G&&t(3,O=G.id)},i.$$.update=()=>{i.$$.dirty[0]&524321&&t(11,n=(_==null?void 0:_.label)||(t(19,f=u==null?void 0:u.data)===null||f===void 0?void 0:f.label)||"< label >"),i.$$.dirty[0]&1048609&&t(10,r=(_==null?void 0:_.sequence)||"#"),i.$$.dirty[0]&2097185&&t(9,s=(_==null?void 0:_.user_properties)||(t(21,d=u==null?void 0:u.data)===null||d===void 0?void 0:d.user_properties)||"< Property >"),i.$$.dirty[0]&4194337&&t(8,a=(_==null?void 0:_.user_properties)||(t(22,c=u==null?void 0:u.data)===null||c===void 0?void 0:c.user_properties)||"< Value >"),i.$$.dirty[0]&8388632&&t(6,k=(t(23,p=l.toHandle)===null||p===void 0?void 0:p.nodeId)==O)},[_,m,y,O,l,u,k,w,a,s,r,n,T,N,g,R,S,B,D,f,h,d,c,p,L,A,I,x,j,re,Z,$]}class Q3 extends yt{constructor(e){super(),Et(this,e,$3,G3,it,{data:0,isConnectable:1,selected:2,id:3},null,[-1,-1])}}function hd(i,e,t){const n=i.slice();return n[29]=e[t],n[30]=e,n[31]=t,n}function pd(i){let e,t;return e=new bt({props:{type:"target",class:"customHandle",position:pt.Left,id:"target",style:i[16](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r[0]&2&&(s.isConnectable=n[1]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function _d(i){let e=i[7],t,n,r=md(i);return{c(){r.c(),t=Re()},l(s){r.l(s),t=Re()},m(s,a){r.m(s,a),C(s,t,a),n=!0},p(s,a){a[0]&128&&it(e,e=s[7])?(ut(),de(r,1,1,Me),ft(),r=md(s),r.c(),ue(r,1),r.m(t.parentNode,t)):r.p(s,a)},i(s){n||(ue(r),n=!0)},o(s){de(r),n=!1},d(s){s&&v(t),r.d(s)}}}function md(i){let e,t,n,r,s,a,l,o;return e=new bt({props:{type:"source",position:pt.Top,id:"source",style:i[17](),isConnectable:i[1]}}),n=new bt({props:{type:"source",position:pt.Left,id:"source",style:i[17](),isConnectable:i[1]}}),s=new bt({props:{type:"source",position:pt.Right,id:"source",style:i[17](),isConnectable:i[1]}}),l=new bt({props:{type:"source",position:pt.Bottom,id:"source",style:i[17](),isConnectable:i[1]}}),{c(){Be(e.$$.fragment),t=ie(),Be(n.$$.fragment),r=ie(),Be(s.$$.fragment),a=ie(),Be(l.$$.fragment)},l(u){Le(e.$$.fragment,u),t=ae(u),Le(n.$$.fragment,u),r=ae(u),Le(s.$$.fragment,u),a=ae(u),Le(l.$$.fragment,u)},m(u,f){Ue(e,u,f),C(u,t,f),Ue(n,u,f),C(u,r,f),Ue(s,u,f),C(u,a,f),Ue(l,u,f),o=!0},p(u,f){const h={};f[0]&2&&(h.isConnectable=u[1]),e.$set(h);const d={};f[0]&2&&(d.isConnectable=u[1]),n.$set(d);const c={};f[0]&2&&(c.isConnectable=u[1]),s.$set(c);const p={};f[0]&2&&(p.isConnectable=u[1]),l.$set(p)},i(u){o||(ue(e.$$.fragment,u),ue(n.$$.fragment,u),ue(s.$$.fragment,u),ue(l.$$.fragment,u),o=!0)},o(u){de(e.$$.fragment,u),de(n.$$.fragment,u),de(s.$$.fragment,u),de(l.$$.fragment,u),o=!1},d(u){u&&(v(t),v(r),v(a)),je(e,u),je(n,u),je(s,u),je(l,u)}}}function W3(i){let e,t;return e=new i[32].ItemList({props:{list:Th,filter_value_store:i[33],select_item:i[34]}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r[1]&4&&(s.filter_value_store=n[33]),r[1]&8&&(s.select_item=n[34]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function vd(i){let e,t=Ge(i[0].user_properties),n=[];for(let r=0;r<t.length;r+=1)n[r]=gd(hd(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Re()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Re()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);C(r,e,s)},p(r,s){if(s[0]&801){t=Ge(r[0].user_properties);let a;for(a=0;a<t.length;a+=1){const l=hd(r,t,a);n[a]?n[a].p(l,s):(n[a]=gd(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&v(e),wt(n,r)}}}function gd(i){let e,t,n,r,s,a,l,o,u;function f(...p){return i[24](i[31],...p)}function h(){i[25].call(n,i[31])}function d(...p){return i[26](i[31],...p)}function c(){i[27].call(a,i[31])}return{c(){e=Y("div"),t=Y("div"),n=Y("input"),r=ie(),s=Y("div"),a=Y("input"),l=ie(),this.h()},l(p){e=J(p,"DIV",{class:!0});var _=Ce(e);t=J(_,"DIV",{class:!0});var m=Ce(t);n=J(m,"INPUT",{placeholder:!0}),m.forEach(v),r=ae(_),s=J(_,"DIV",{class:!0});var y=Ce(s);a=J(y,"INPUT",{placeholder:!0}),y.forEach(v),l=ae(_),_.forEach(v),this.h()},h(){ee(n,"placeholder","property"),ee(t,"class","user-property flex-column"),ee(a,"placeholder","value"),ee(s,"class","user-value flex-column flex-grow-3"),ee(e,"class","user-properties flex")},m(p,_){C(p,e,_),V(e,t),V(t,n),$e(n,i[9][i[31]][0]),V(e,r),V(e,s),V(s,a),$e(a,i[8][i[31]][1]),V(e,l),o||(u=[ye(n,"input",f),ye(n,"input",h),ye(a,"input",d),ye(a,"input",c)],o=!0)},p(p,_){i=p,_[0]&512&&n.value!==i[9][i[31]][0]&&$e(n,i[9][i[31]][0]),_[0]&256&&a.value!==i[8][i[31]][1]&&$e(a,i[8][i[31]][1])},d(p){p&&v(e),o=!1,ht(u)}}}function Y3(i){let e=i[4].inProgress,t,n,r,s,a,l,o,u="Vulnerability",f,h,d,c,p,_,m,y,O,T,N,g="+",k,w,R,S=pd(i),B=!i[6]&&_d(i);a=new Mn({props:{isVisible:i[2]}}),p=new Li({props:{node_id:i[3],element_id:i[0].d3f_class,input_color:"#f9d999",place_holder:"< weakness >",$$slots:{default:[W3,({R:L,filter_value_store:A,select_item:I})=>({32:L,33:A,34:I}),({R:L,filter_value_store:A,select_item:I})=>[0,(L?2:0)|(A?4:0)|(I?8:0)]]},$$scope:{ctx:i}}});let D=i[0].user_properties&&vd(i);return{c(){S.c(),t=ie(),n=Y("div"),B&&B.c(),r=ie(),s=Y("div"),Be(a.$$.fragment),l=ie(),o=Y("i"),o.textContent=u,f=ie(),h=Y("br"),d=ie(),c=Y("div"),Be(p.$$.fragment),_=ie(),m=Y("div"),y=Y("input"),O=ie(),D&&D.c(),T=ie(),N=Y("button"),N.textContent=g,this.h()},l(L){S.l(L),t=ae(L),n=J(L,"DIV",{class:!0});var A=Ce(n);B&&B.l(A),r=ae(A),s=J(A,"DIV",{class:!0});var I=Ce(s);Le(a.$$.fragment,I),l=ae(I),o=J(I,"I",{"data-svelte-h":!0}),Ke(o)!=="svelte-qgxj0w"&&(o.textContent=u),f=ae(I),h=J(I,"BR",{}),d=ae(I),c=J(I,"DIV",{});var x=Ce(c);Le(p.$$.fragment,x),x.forEach(v),_=ae(I),m=J(I,"DIV",{});var j=Ce(m);y=J(j,"INPUT",{class:!0,type:!0,style:!0}),O=ae(j),D&&D.l(j),T=ae(j),N=J(j,"BUTTON",{"data-svelte-h":!0}),Ke(N)!=="svelte-y9choq"&&(N.textContent=g),j.forEach(v),I.forEach(v),A.forEach(v),this.h()},h(){ee(y,"class","nodrag label"),ee(y,"type","text"),gt(y,"background","#f9d999"),ee(s,"class","vulnerability node-inner svelte-17a4qd7"),ee(n,"class","vulnerability node svelte-17a4qd7")},m(L,A){S.m(L,A),C(L,t,A),C(L,n,A),B&&B.m(n,null),V(n,r),V(n,s),Ue(a,s,null),V(s,l),V(s,o),V(s,f),V(s,h),V(s,d),V(s,c),Ue(p,c,null),V(s,_),V(s,m),V(m,y),$e(y,i[10]),V(m,O),D&&D.m(m,null),V(m,T),V(m,N),k=!0,w||(R=[ye(y,"input",i[22]),ye(y,"input",i[23]),ye(N,"click",i[11]),ye(n,"click",i[12]),ye(n,"mouseenter",i[14]),ye(n,"mouseleave",i[15])],w=!0)},p(L,A){A[0]&16&&it(e,e=L[4].inProgress)?(ut(),de(S,1,1,Me),ft(),S=pd(L),S.c(),ue(S,1),S.m(t.parentNode,t)):S.p(L,A),L[6]?B&&(ut(),de(B,1,1,()=>{B=null}),ft()):B?(B.p(L,A),A[0]&64&&ue(B,1)):(B=_d(L),B.c(),ue(B,1),B.m(n,r));const I={};A[0]&4&&(I.isVisible=L[2]),a.$set(I);const x={};A[0]&8&&(x.node_id=L[3]),A[0]&1&&(x.element_id=L[0].d3f_class),A[1]&28&&(x.$$scope={dirty:A,ctx:L}),p.$set(x),A[0]&1024&&y.value!==L[10]&&$e(y,L[10]),L[0].user_properties?D?D.p(L,A):(D=vd(L),D.c(),D.m(m,T)):D&&(D.d(1),D=null)},i(L){k||(ue(S),ue(B),ue(a.$$.fragment,L),ue(p.$$.fragment,L),k=!0)},o(L){de(S),de(B),de(a.$$.fragment,L),de(p.$$.fragment,L),k=!1},d(L){L&&(v(t),v(n)),S.d(L),B&&B.d(),je(a),je(p),D&&D.d(),w=!1,ht(R)}}}function J3(i,e,t){let n,r,s,a,l,o;tt(i,Nr,j=>t(28,l=j)),tt(i,nt,j=>t(5,o=j));var u,f,h,d;let{data:c}=e,{isConnectable:p}=e,{selected:_=void 0}=e,{id:m}=e;function y(){O(),c.user_properties.push(["",""])}function O(){for(let j=0;j<l.length;j++)l[j].data==c&&mt(nt,o=l[j],o)}const T=Cn();tt(i,T,j=>t(4,a=j));let N=!1,g=!1;function k(){t(7,g=!0)}function w(){t(7,g=!1)}function R(){return a.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function S(){return g?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const B=j=>{t(0,c.label=j.currentTarget.value,c),mt(nt,o.data.label=c.label,o)};function D(){n=this.value,t(10,n),t(0,c),t(5,o),t(18,u)}const L=(j,re)=>{t(0,c.user_properties[j][0]=re.currentTarget.value,c),mt(nt,o.data.user_properties[j][0]=re.currentTarget.value,o)};function A(j){r[j][0]=this.value,t(9,r),t(0,c),t(5,o),t(19,f)}const I=(j,re)=>{t(0,c.user_properties[j][1]=re.currentTarget.value,c),mt(nt,o.data.user_properties[j][1]=re.currentTarget.value,o)};function x(j){s[j][1]=this.value,t(8,s),t(0,c),t(5,o),t(20,h)}return i.$$set=j=>{"data"in j&&t(0,c=j.data),"isConnectable"in j&&t(1,p=j.isConnectable),"selected"in j&&t(2,_=j.selected),"id"in j&&t(3,m=j.id)},i.$$.update=()=>{i.$$.dirty[0]&262177&&t(10,n=(c==null?void 0:c.label)||(t(18,u=o==null?void 0:o.data)===null||u===void 0?void 0:u.label)||"< label >"),i.$$.dirty[0]&524321&&t(9,r=(c==null?void 0:c.user_properties)||(t(19,f=o==null?void 0:o.data)===null||f===void 0?void 0:f.user_properties)||"< Property >"),i.$$.dirty[0]&1048609&&t(8,s=(c==null?void 0:c.user_properties)||(t(20,h=o==null?void 0:o.data)===null||h===void 0?void 0:h.user_properties)||"< Value >"),i.$$.dirty[0]&2097176&&t(6,N=(t(21,d=a.toHandle)===null||d===void 0?void 0:d.nodeId)==m)},[c,p,_,m,a,o,N,g,s,r,n,y,O,T,k,w,R,S,u,f,h,d,B,D,L,A,I,x]}class K3 extends yt{constructor(e){super(),Et(this,e,J3,Y3,it,{data:0,isConnectable:1,selected:2,id:3},null,[-1,-1])}}function bd(i,e,t){const n=i.slice();return n[29]=e[t],n[30]=e,n[31]=t,n}function wd(i){let e,t;return e=new bt({props:{type:"target",class:"customHandle",position:pt.Left,id:"target",style:i[16](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r[0]&2&&(s.isConnectable=n[1]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function yd(i){let e=i[7],t,n,r=Ed(i);return{c(){r.c(),t=Re()},l(s){r.l(s),t=Re()},m(s,a){r.m(s,a),C(s,t,a),n=!0},p(s,a){a[0]&128&&it(e,e=s[7])?(ut(),de(r,1,1,Me),ft(),r=Ed(s),r.c(),ue(r,1),r.m(t.parentNode,t)):r.p(s,a)},i(s){n||(ue(r),n=!0)},o(s){de(r),n=!1},d(s){s&&v(t),r.d(s)}}}function Ed(i){let e,t,n,r,s,a,l,o;return e=new bt({props:{type:"source",position:pt.Top,id:"source",style:i[17](),isConnectable:i[1]}}),n=new bt({props:{type:"source",position:pt.Left,id:"source",style:i[17](),isConnectable:i[1]}}),s=new bt({props:{type:"source",position:pt.Right,id:"source",style:i[17](),isConnectable:i[1]}}),l=new bt({props:{type:"source",position:pt.Bottom,id:"source",style:i[17](),isConnectable:i[1]}}),{c(){Be(e.$$.fragment),t=ie(),Be(n.$$.fragment),r=ie(),Be(s.$$.fragment),a=ie(),Be(l.$$.fragment)},l(u){Le(e.$$.fragment,u),t=ae(u),Le(n.$$.fragment,u),r=ae(u),Le(s.$$.fragment,u),a=ae(u),Le(l.$$.fragment,u)},m(u,f){Ue(e,u,f),C(u,t,f),Ue(n,u,f),C(u,r,f),Ue(s,u,f),C(u,a,f),Ue(l,u,f),o=!0},p(u,f){const h={};f[0]&2&&(h.isConnectable=u[1]),e.$set(h);const d={};f[0]&2&&(d.isConnectable=u[1]),n.$set(d);const c={};f[0]&2&&(c.isConnectable=u[1]),s.$set(c);const p={};f[0]&2&&(p.isConnectable=u[1]),l.$set(p)},i(u){o||(ue(e.$$.fragment,u),ue(n.$$.fragment,u),ue(s.$$.fragment,u),ue(l.$$.fragment,u),o=!0)},o(u){de(e.$$.fragment,u),de(n.$$.fragment,u),de(s.$$.fragment,u),de(l.$$.fragment,u),o=!1},d(u){u&&(v(t),v(r),v(a)),je(e,u),je(n,u),je(s,u),je(l,u)}}}function Z3(i){let e,t;return e=new i[32].ItemList({props:{list:Dh,filter_value_store:i[33],select_item:i[34]}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r[1]&4&&(s.filter_value_store=n[33]),r[1]&8&&(s.select_item=n[34]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function kd(i){let e,t=Ge(i[0].user_properties),n=[];for(let r=0;r<t.length;r+=1)n[r]=Dd(bd(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Re()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Re()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);C(r,e,s)},p(r,s){if(s[0]&801){t=Ge(r[0].user_properties);let a;for(a=0;a<t.length;a+=1){const l=bd(r,t,a);n[a]?n[a].p(l,s):(n[a]=Dd(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&v(e),wt(n,r)}}}function Dd(i){let e,t,n,r,s,a,l,o,u;function f(...p){return i[24](i[31],...p)}function h(){i[25].call(n,i[31])}function d(...p){return i[26](i[31],...p)}function c(){i[27].call(a,i[31])}return{c(){e=Y("div"),t=Y("div"),n=Y("input"),r=ie(),s=Y("div"),a=Y("input"),l=ie(),this.h()},l(p){e=J(p,"DIV",{class:!0});var _=Ce(e);t=J(_,"DIV",{class:!0});var m=Ce(t);n=J(m,"INPUT",{placeholder:!0}),m.forEach(v),r=ae(_),s=J(_,"DIV",{class:!0});var y=Ce(s);a=J(y,"INPUT",{placeholder:!0}),y.forEach(v),l=ae(_),_.forEach(v),this.h()},h(){ee(n,"placeholder","property"),ee(t,"class","user-property flex-column"),ee(a,"placeholder","value"),ee(s,"class","user-value flex-column flex-grow-3"),ee(e,"class","user-properties flex")},m(p,_){C(p,e,_),V(e,t),V(t,n),$e(n,i[9][i[31]][0]),V(e,r),V(e,s),V(s,a),$e(a,i[8][i[31]][1]),V(e,l),o||(u=[ye(n,"input",f),ye(n,"input",h),ye(a,"input",d),ye(a,"input",c)],o=!0)},p(p,_){i=p,_[0]&512&&n.value!==i[9][i[31]][0]&&$e(n,i[9][i[31]][0]),_[0]&256&&a.value!==i[8][i[31]][1]&&$e(a,i[8][i[31]][1])},d(p){p&&v(e),o=!1,ht(u)}}}function eE(i){let e=i[4].inProgress,t,n,r,s,a,l="Artifact",o,u,f,h,d,c,p,_,m,y,O="+",T,N,g,k=wd(i),w=!i[6]&&yd(i);f=new Mn({props:{isVisible:i[2]}}),d=new Li({props:{node_id:i[3],element_id:i[0].d3f_class,input_color:"#fff4dd",$$slots:{default:[Z3,({R:S,filter_value_store:B,select_item:D})=>({32:S,33:B,34:D}),({R:S,filter_value_store:B,select_item:D})=>[0,(S?2:0)|(B?4:0)|(D?8:0)]]},$$scope:{ctx:i}}});let R=i[0].user_properties&&kd(i);return{c(){k.c(),t=ie(),n=Y("div"),w&&w.c(),r=ie(),s=Y("div"),a=Y("i"),a.textContent=l,o=Y("br"),u=ie(),Be(f.$$.fragment),h=ie(),Be(d.$$.fragment),c=ie(),p=Y("input"),_=ie(),R&&R.c(),m=ie(),y=Y("button"),y.textContent=O,this.h()},l(S){k.l(S),t=ae(S),n=J(S,"DIV",{class:!0});var B=Ce(n);w&&w.l(B),r=ae(B),s=J(B,"DIV",{class:!0});var D=Ce(s);a=J(D,"I",{"data-svelte-h":!0}),Ke(a)!=="svelte-148na2y"&&(a.textContent=l),o=J(D,"BR",{}),u=ae(D),Le(f.$$.fragment,D),h=ae(D),Le(d.$$.fragment,D),c=ae(D),p=J(D,"INPUT",{class:!0,type:!0,style:!0}),_=ae(D),R&&R.l(D),m=ae(D),y=J(D,"BUTTON",{"data-svelte-h":!0}),Ke(y)!=="svelte-y9choq"&&(y.textContent=O),D.forEach(v),B.forEach(v),this.h()},h(){ee(p,"class","nodrag label"),ee(p,"type","text"),gt(p,"background","#fff4dd"),ee(s,"class","node-inner"),ee(n,"class","artifact node svelte-1q2d78v")},m(S,B){k.m(S,B),C(S,t,B),C(S,n,B),w&&w.m(n,null),V(n,r),V(n,s),V(s,a),V(s,o),V(s,u),Ue(f,s,null),V(s,h),Ue(d,s,null),V(s,c),V(s,p),$e(p,i[10]),V(s,_),R&&R.m(s,null),V(s,m),V(s,y),T=!0,N||(g=[ye(p,"input",i[22]),ye(p,"input",i[23]),ye(y,"click",i[11]),ye(n,"click",i[12]),ye(n,"mouseenter",i[14]),ye(n,"mouseleave",i[15])],N=!0)},p(S,B){B[0]&16&&it(e,e=S[4].inProgress)?(ut(),de(k,1,1,Me),ft(),k=wd(S),k.c(),ue(k,1),k.m(t.parentNode,t)):k.p(S,B),S[6]?w&&(ut(),de(w,1,1,()=>{w=null}),ft()):w?(w.p(S,B),B[0]&64&&ue(w,1)):(w=yd(S),w.c(),ue(w,1),w.m(n,r));const D={};B[0]&4&&(D.isVisible=S[2]),f.$set(D);const L={};B[0]&8&&(L.node_id=S[3]),B[0]&1&&(L.element_id=S[0].d3f_class),B[1]&28&&(L.$$scope={dirty:B,ctx:S}),d.$set(L),B[0]&1024&&p.value!==S[10]&&$e(p,S[10]),S[0].user_properties?R?R.p(S,B):(R=kd(S),R.c(),R.m(s,m)):R&&(R.d(1),R=null)},i(S){T||(ue(k),ue(w),ue(f.$$.fragment,S),ue(d.$$.fragment,S),T=!0)},o(S){de(k),de(w),de(f.$$.fragment,S),de(d.$$.fragment,S),T=!1},d(S){S&&(v(t),v(n)),k.d(S),w&&w.d(),je(f),je(d),R&&R.d(),N=!1,ht(g)}}}function tE(i,e,t){let n,r,s,a,l,o;tt(i,Nr,j=>t(28,l=j)),tt(i,nt,j=>t(5,o=j));var u,f,h,d;let{data:c}=e,{isConnectable:p}=e,{selected:_=void 0}=e,{id:m}=e;function y(){O(),c.user_properties.push(["",""])}function O(){for(let j=0;j<l.length;j++)l[j].data==c&&mt(nt,o=l[j],o)}const T=Cn();tt(i,T,j=>t(4,a=j));let N=!1,g=!1;function k(){t(7,g=!0)}function w(){t(7,g=!1)}function R(){return a.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function S(){return g?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const B=j=>{t(0,c.label=j.currentTarget.value,c),mt(nt,o.data.label=c.label,o)};function D(){n=this.value,t(10,n),t(0,c),t(5,o),t(18,u)}const L=(j,re)=>{t(0,c.user_properties[j][0]=re.currentTarget.value,c),mt(nt,o.data.user_properties[j][0]=re.currentTarget.value,o)};function A(j){r[j][0]=this.value,t(9,r),t(0,c),t(5,o),t(19,f)}const I=(j,re)=>{t(0,c.user_properties[j][1]=re.currentTarget.value,c),mt(nt,o.data.user_properties[j][1]=re.currentTarget.value,o)};function x(j){s[j][1]=this.value,t(8,s),t(0,c),t(5,o),t(20,h)}return i.$$set=j=>{"data"in j&&t(0,c=j.data),"isConnectable"in j&&t(1,p=j.isConnectable),"selected"in j&&t(2,_=j.selected),"id"in j&&t(3,m=j.id)},i.$$.update=()=>{i.$$.dirty[0]&262177&&t(10,n=(c==null?void 0:c.label)||(t(18,u=o==null?void 0:o.data)===null||u===void 0?void 0:u.label)||"< label >"),i.$$.dirty[0]&524321&&t(9,r=(c==null?void 0:c.user_properties)||(t(19,f=o==null?void 0:o.data)===null||f===void 0?void 0:f.user_properties)||"< Property >"),i.$$.dirty[0]&1048609&&t(8,s=(c==null?void 0:c.user_properties)||(t(20,h=o==null?void 0:o.data)===null||h===void 0?void 0:h.user_properties)||"< Value >"),i.$$.dirty[0]&2097176&&t(6,N=(t(21,d=a.toHandle)===null||d===void 0?void 0:d.nodeId)==m)},[c,p,_,m,a,o,N,g,s,r,n,y,O,T,k,w,R,S,u,f,h,d,B,D,L,A,I,x]}class rE extends yt{constructor(e){super(),Et(this,e,tE,eE,it,{data:0,isConnectable:1,selected:2,id:3},null,[-1,-1])}}function Ad(i,e,t){const n=i.slice();return n[33]=e[t],n[34]=e,n[35]=t,n}function Cd(i){let e,t;return e=new bt({props:{type:"target",class:"customHandle",position:pt.Left,id:"target",style:i[17](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r[0]&2&&(s.isConnectable=n[1]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function Td(i){let e=i[7],t,n,r=Nd(i);return{c(){r.c(),t=Re()},l(s){r.l(s),t=Re()},m(s,a){r.m(s,a),C(s,t,a),n=!0},p(s,a){a[0]&128&&it(e,e=s[7])?(ut(),de(r,1,1,Me),ft(),r=Nd(s),r.c(),ue(r,1),r.m(t.parentNode,t)):r.p(s,a)},i(s){n||(ue(r),n=!0)},o(s){de(r),n=!1},d(s){s&&v(t),r.d(s)}}}function Nd(i){let e,t,n,r,s,a,l,o;return e=new bt({props:{type:"source",position:pt.Top,id:"source",style:i[18](),isConnectable:i[1]}}),n=new bt({props:{type:"source",position:pt.Left,id:"source",style:i[18](),isConnectable:i[1]}}),s=new bt({props:{type:"source",position:pt.Right,id:"source",style:i[18](),isConnectable:i[1]}}),l=new bt({props:{type:"source",position:pt.Bottom,id:"source",style:i[18](),isConnectable:i[1]}}),{c(){Be(e.$$.fragment),t=ie(),Be(n.$$.fragment),r=ie(),Be(s.$$.fragment),a=ie(),Be(l.$$.fragment)},l(u){Le(e.$$.fragment,u),t=ae(u),Le(n.$$.fragment,u),r=ae(u),Le(s.$$.fragment,u),a=ae(u),Le(l.$$.fragment,u)},m(u,f){Ue(e,u,f),C(u,t,f),Ue(n,u,f),C(u,r,f),Ue(s,u,f),C(u,a,f),Ue(l,u,f),o=!0},p(u,f){const h={};f[0]&2&&(h.isConnectable=u[1]),e.$set(h);const d={};f[0]&2&&(d.isConnectable=u[1]),n.$set(d);const c={};f[0]&2&&(c.isConnectable=u[1]),s.$set(c);const p={};f[0]&2&&(p.isConnectable=u[1]),l.$set(p)},i(u){o||(ue(e.$$.fragment,u),ue(n.$$.fragment,u),ue(s.$$.fragment,u),ue(l.$$.fragment,u),o=!0)},o(u){de(e.$$.fragment,u),de(n.$$.fragment,u),de(s.$$.fragment,u),de(l.$$.fragment,u),o=!1},d(u){u&&(v(t),v(r),v(a)),je(e,u),je(n,u),je(s,u),je(l,u)}}}function nE(i){let e,t;return e=new i[36].ItemTree({props:{list:kh,filter_value_store:i[37],select_item:i[38]}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r[1]&64&&(s.filter_value_store=n[37]),r[1]&128&&(s.select_item=n[38]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function Sd(i){let e,t=Ge(i[0].user_properties),n=[];for(let r=0;r<t.length;r+=1)n[r]=Id(Ad(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Re()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Re()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);C(r,e,s)},p(r,s){if(s[0]&801){t=Ge(r[0].user_properties);let a;for(a=0;a<t.length;a+=1){const l=Ad(r,t,a);n[a]?n[a].p(l,s):(n[a]=Id(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&v(e),wt(n,r)}}}function Id(i){let e,t,n,r,s,a,l,o,u;function f(...p){return i[27](i[35],...p)}function h(){i[28].call(n,i[35])}function d(...p){return i[29](i[35],...p)}function c(){i[30].call(a,i[35])}return{c(){e=Y("div"),t=Y("div"),n=Y("input"),r=ie(),s=Y("div"),a=Y("input"),l=ie(),this.h()},l(p){e=J(p,"DIV",{class:!0});var _=Ce(e);t=J(_,"DIV",{class:!0});var m=Ce(t);n=J(m,"INPUT",{placeholder:!0}),m.forEach(v),r=ae(_),s=J(_,"DIV",{class:!0});var y=Ce(s);a=J(y,"INPUT",{placeholder:!0}),y.forEach(v),l=ae(_),_.forEach(v),this.h()},h(){ee(n,"placeholder","property"),ee(t,"class","user-property flex-column"),ee(a,"placeholder","value"),ee(s,"class","user-value flex-column flex-grow-3"),ee(e,"class","user-properties flex")},m(p,_){C(p,e,_),V(e,t),V(t,n),$e(n,i[9][i[35]][0]),V(e,r),V(e,s),V(s,a),$e(a,i[8][i[35]][1]),V(e,l),o||(u=[ye(n,"input",f),ye(n,"input",h),ye(a,"input",d),ye(a,"input",c)],o=!0)},p(p,_){i=p,_[0]&512&&n.value!==i[9][i[35]][0]&&$e(n,i[9][i[35]][0]),_[0]&256&&a.value!==i[8][i[35]][1]&&$e(a,i[8][i[35]][1])},d(p){p&&v(e),o=!1,ht(u)}}}function iE(i){let e=i[4].inProgress,t,n,r,s,a,l,o,u="Defense Action",f,h,d,c,p,_,m,y,O,T,N,g,k,w="+",R,S,B,D=Cd(i),L=!i[6]&&Td(i);a=new Mn({props:{isVisible:i[2]}}),m=new Li({props:{node_id:i[3],element_id:i[0].d3f_class,input_color:"#d6eaff",$$slots:{default:[nE,({R:I,filter_value_store:x,select_item:j})=>({36:I,37:x,38:j}),({R:I,filter_value_store:x,select_item:j})=>[0,(I?32:0)|(x?64:0)|(j?128:0)]]},$$scope:{ctx:i}}});let A=i[0].user_properties&&Sd(i);return{c(){D.c(),t=ie(),n=Y("div"),L&&L.c(),r=ie(),s=Y("div"),Be(a.$$.fragment),l=ie(),o=Y("i"),o.textContent=u,f=ie(),h=Y("input"),d=ie(),c=Y("br"),p=ie(),_=Y("div"),Be(m.$$.fragment),y=ie(),O=Y("div"),T=Y("input"),N=ie(),A&&A.c(),g=ie(),k=Y("button"),k.textContent=w,this.h()},l(I){D.l(I),t=ae(I),n=J(I,"DIV",{class:!0});var x=Ce(n);L&&L.l(x),r=ae(x),s=J(x,"DIV",{class:!0});var j=Ce(s);Le(a.$$.fragment,j),l=ae(j),o=J(j,"I",{"data-svelte-h":!0}),Ke(o)!=="svelte-1x9m2lq"&&(o.textContent=u),f=ae(j),h=J(j,"INPUT",{class:!0,type:!0,style:!0}),d=ae(j),c=J(j,"BR",{}),p=ae(j),_=J(j,"DIV",{});var re=Ce(_);Le(m.$$.fragment,re),re.forEach(v),y=ae(j),O=J(j,"DIV",{});var Z=Ce(O);T=J(Z,"INPUT",{class:!0,type:!0,style:!0}),N=ae(Z),A&&A.l(Z),g=ae(Z),k=J(Z,"BUTTON",{"data-svelte-h":!0}),Ke(k)!=="svelte-y9choq"&&(k.textContent=w),Z.forEach(v),j.forEach(v),x.forEach(v),this.h()},h(){ee(h,"class","nodrag sequence"),ee(h,"type","text"),gt(h,"background","#d6eaff"),ee(T,"class","nodrag label"),ee(T,"type","text"),gt(T,"background","#d6eaff"),ee(s,"class","node-inner"),ee(n,"class","countermeasure node svelte-cdgs6j")},m(I,x){D.m(I,x),C(I,t,x),C(I,n,x),L&&L.m(n,null),V(n,r),V(n,s),Ue(a,s,null),V(s,l),V(s,o),V(s,f),V(s,h),$e(h,i[10]),V(s,d),V(s,c),V(s,p),V(s,_),Ue(m,_,null),V(s,y),V(s,O),V(O,T),$e(T,i[11]),V(O,N),A&&A.m(O,null),V(O,g),V(O,k),R=!0,S||(B=[ye(h,"input",i[23]),ye(h,"input",i[24]),ye(T,"input",i[25]),ye(T,"input",i[26]),ye(k,"click",i[12]),ye(n,"click",i[13]),ye(n,"mouseenter",i[15]),ye(n,"mouseleave",i[16])],S=!0)},p(I,x){x[0]&16&&it(e,e=I[4].inProgress)?(ut(),de(D,1,1,Me),ft(),D=Cd(I),D.c(),ue(D,1),D.m(t.parentNode,t)):D.p(I,x),I[6]?L&&(ut(),de(L,1,1,()=>{L=null}),ft()):L?(L.p(I,x),x[0]&64&&ue(L,1)):(L=Td(I),L.c(),ue(L,1),L.m(n,r));const j={};x[0]&4&&(j.isVisible=I[2]),a.$set(j),x[0]&1024&&h.value!==I[10]&&$e(h,I[10]);const re={};x[0]&8&&(re.node_id=I[3]),x[0]&1&&(re.element_id=I[0].d3f_class),x[1]&448&&(re.$$scope={dirty:x,ctx:I}),m.$set(re),x[0]&2048&&T.value!==I[11]&&$e(T,I[11]),I[0].user_properties?A?A.p(I,x):(A=Sd(I),A.c(),A.m(O,g)):A&&(A.d(1),A=null)},i(I){R||(ue(D),ue(L),ue(a.$$.fragment,I),ue(m.$$.fragment,I),R=!0)},o(I){de(D),de(L),de(a.$$.fragment,I),de(m.$$.fragment,I),R=!1},d(I){I&&(v(t),v(n)),D.d(I),L&&L.d(),je(a),je(m),A&&A.d(),S=!1,ht(B)}}}function aE(i,e,t){let n,r,s,a,l,o,u;tt(i,Nr,$=>t(31,o=$)),tt(i,nt,$=>t(5,u=$));var f,h,d,c;let{data:p}=e,{isConnectable:_}=e,{selected:m=void 0}=e,{id:y}=e;function O(){T(),p.user_properties.push(["",""])}function T(){for(let $=0;$<o.length;$++)o[$].data==p&&mt(nt,u=o[$],u)}const N=Cn();tt(i,N,$=>t(4,l=$));let g=!1,k=!1;function w(){t(7,k=!0)}function R(){t(7,k=!1)}function S(){return l.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function B(){return k?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const D=$=>{t(0,p.sequence=$.currentTarget.value,p),mt(nt,u.data.sequence=p.sequence,u)};function L(){r=this.value,t(10,r),t(0,p)}const A=$=>{t(0,p.label=$.currentTarget.value,p),mt(nt,u.data.label=p.label,u)};function I(){n=this.value,t(11,n),t(0,p),t(19,f)}const x=($,G)=>{t(0,p.user_properties[$][0]=G.currentTarget.value,p),mt(nt,u.data.user_properties[$][0]=G.currentTarget.value,u)};function j($){s[$][0]=this.value,t(9,s),t(0,p),t(5,u),t(20,h)}const re=($,G)=>{t(0,p.user_properties[$][1]=G.currentTarget.value,p),mt(nt,u.data.user_properties[$][1]=G.currentTarget.value,u)};function Z($){a[$][1]=this.value,t(8,a),t(0,p),t(5,u),t(21,d)}return i.$$set=$=>{"data"in $&&t(0,p=$.data),"isConnectable"in $&&t(1,_=$.isConnectable),"selected"in $&&t(2,m=$.selected),"id"in $&&t(3,y=$.id)},i.$$.update=()=>{i.$$.dirty[0]&524289&&t(11,n=t(19,f=p==null?void 0:p.label)!==null&&f!==void 0?f:"< label >"),i.$$.dirty[0]&1&&t(10,r=(p==null?void 0:p.sequence)||"#"),i.$$.dirty[0]&1048609&&t(9,s=(p==null?void 0:p.user_properties)||(t(20,h=u==null?void 0:u.data)===null||h===void 0?void 0:h.user_properties)||"< Property >"),i.$$.dirty[0]&2097185&&t(8,a=(p==null?void 0:p.user_properties)||(t(21,d=u==null?void 0:u.data)===null||d===void 0?void 0:d.user_properties)||"< Value >"),i.$$.dirty[0]&4194328&&t(6,g=(t(22,c=l.toHandle)===null||c===void 0?void 0:c.nodeId)==y)},[p,_,m,y,l,u,g,k,a,s,r,n,O,T,N,w,R,S,B,f,h,d,c,D,L,A,I,x,j,re,Z]}class sE extends yt{constructor(e){super(),Et(this,e,aE,iE,it,{data:0,isConnectable:1,selected:2,id:3},null,[-1,-1])}}function Pd(i,e,t){const n=i.slice();return n[30]=e[t],n[31]=e,n[32]=t,n}function Rd(i){let e,t;return e=new bt({props:{type:"target",class:"customHandle",position:pt.Left,id:"target",style:i[15](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r[0]&2&&(s.isConnectable=n[1]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function Fd(i){let e=i[6],t,n,r=Od(i);return{c(){r.c(),t=Re()},l(s){r.l(s),t=Re()},m(s,a){r.m(s,a),C(s,t,a),n=!0},p(s,a){a[0]&64&&it(e,e=s[6])?(ut(),de(r,1,1,Me),ft(),r=Od(s),r.c(),ue(r,1),r.m(t.parentNode,t)):r.p(s,a)},i(s){n||(ue(r),n=!0)},o(s){de(r),n=!1},d(s){s&&v(t),r.d(s)}}}function Od(i){let e,t,n,r,s,a,l,o;return e=new bt({props:{type:"source",position:pt.Top,id:"source",style:i[16](),isConnectable:i[1]}}),n=new bt({props:{type:"source",position:pt.Left,id:"source",style:i[16](),isConnectable:i[1]}}),s=new bt({props:{type:"source",position:pt.Right,id:"source",style:i[16](),isConnectable:i[1]}}),l=new bt({props:{type:"source",position:pt.Bottom,id:"source",style:i[16](),isConnectable:i[1]}}),{c(){Be(e.$$.fragment),t=ie(),Be(n.$$.fragment),r=ie(),Be(s.$$.fragment),a=ie(),Be(l.$$.fragment)},l(u){Le(e.$$.fragment,u),t=ae(u),Le(n.$$.fragment,u),r=ae(u),Le(s.$$.fragment,u),a=ae(u),Le(l.$$.fragment,u)},m(u,f){Ue(e,u,f),C(u,t,f),Ue(n,u,f),C(u,r,f),Ue(s,u,f),C(u,a,f),Ue(l,u,f),o=!0},p(u,f){const h={};f[0]&2&&(h.isConnectable=u[1]),e.$set(h);const d={};f[0]&2&&(d.isConnectable=u[1]),n.$set(d);const c={};f[0]&2&&(c.isConnectable=u[1]),s.$set(c);const p={};f[0]&2&&(p.isConnectable=u[1]),l.$set(p)},i(u){o||(ue(e.$$.fragment,u),ue(n.$$.fragment,u),ue(s.$$.fragment,u),ue(l.$$.fragment,u),o=!0)},o(u){de(e.$$.fragment,u),de(n.$$.fragment,u),de(s.$$.fragment,u),de(l.$$.fragment,u),o=!1},d(u){u&&(v(t),v(r),v(a)),je(e,u),je(n,u),je(s,u),je(l,u)}}}function Bd(i){let e,t=Ge(i[0].user_properties),n=[];for(let r=0;r<t.length;r+=1)n[r]=Ld(Pd(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Re()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Re()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);C(r,e,s)},p(r,s){if(s[0]&401){t=Ge(r[0].user_properties);let a;for(a=0;a<t.length;a+=1){const l=Pd(r,t,a);n[a]?n[a].p(l,s):(n[a]=Ld(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&v(e),wt(n,r)}}}function Ld(i){let e,t,n,r,s,a,l,o,u;function f(...p){return i[24](i[32],...p)}function h(){i[25].call(n,i[32])}function d(...p){return i[26](i[32],...p)}function c(){i[27].call(a,i[32])}return{c(){e=Y("div"),t=Y("div"),n=Y("input"),r=ie(),s=Y("div"),a=Y("input"),l=ie(),this.h()},l(p){e=J(p,"DIV",{class:!0});var _=Ce(e);t=J(_,"DIV",{class:!0});var m=Ce(t);n=J(m,"INPUT",{placeholder:!0}),m.forEach(v),r=ae(_),s=J(_,"DIV",{class:!0});var y=Ce(s);a=J(y,"INPUT",{placeholder:!0}),y.forEach(v),l=ae(_),_.forEach(v),this.h()},h(){ee(n,"placeholder","property"),ee(t,"class","user-property flex-column"),ee(a,"placeholder","value"),ee(s,"class","user-value flex-column flex-grow-3"),ee(e,"class","user-properties flex")},m(p,_){C(p,e,_),V(e,t),V(t,n),$e(n,i[8][i[32]][0]),V(e,r),V(e,s),V(s,a),$e(a,i[7][i[32]][1]),V(e,l),o||(u=[ye(n,"input",f),ye(n,"input",h),ye(a,"input",d),ye(a,"input",c)],o=!0)},p(p,_){i=p,_[0]&256&&n.value!==i[8][i[32]][0]&&$e(n,i[8][i[32]][0]),_[0]&128&&a.value!==i[7][i[32]][1]&&$e(a,i[7][i[32]][1])},d(p){p&&v(e),o=!1,ht(u)}}}function lE(i){let e=i[3].inProgress,t,n,r,s,a,l="Information",o,u,f,h,d,c,p,_,m="+",y,O,T,N=Rd(i),g=!i[5]&&Fd(i);f=new Mn({props:{isVisible:i[2]}});let k=i[0].user_properties&&Bd(i);return{c(){N.c(),t=ie(),n=Y("div"),g&&g.c(),r=ie(),s=Y("div"),a=Y("i"),a.textContent=l,o=Y("br"),u=ie(),Be(f.$$.fragment),h=ie(),d=Y("input"),c=ie(),k&&k.c(),p=ie(),_=Y("button"),_.textContent=m,this.h()},l(w){N.l(w),t=ae(w),n=J(w,"DIV",{class:!0});var R=Ce(n);g&&g.l(R),r=ae(R),s=J(R,"DIV",{class:!0});var S=Ce(s);a=J(S,"I",{"data-svelte-h":!0}),Ke(a)!=="svelte-1ocpiyk"&&(a.textContent=l),o=J(S,"BR",{}),u=ae(S),Le(f.$$.fragment,S),h=ae(S),d=J(S,"INPUT",{class:!0,type:!0,style:!0}),c=ae(S),k&&k.l(S),p=ae(S),_=J(S,"BUTTON",{"data-svelte-h":!0}),Ke(_)!=="svelte-y9choq"&&(_.textContent=m),S.forEach(v),R.forEach(v),this.h()},h(){ee(d,"class","nodrag label"),ee(d,"type","text"),gt(d,"background","#e8f4ea"),ee(s,"class","information node-inner svelte-1wgy9qw"),ee(n,"class","information node svelte-1wgy9qw")},m(w,R){N.m(w,R),C(w,t,R),C(w,n,R),g&&g.m(n,null),V(n,r),V(n,s),V(s,a),V(s,o),V(s,u),Ue(f,s,null),V(s,h),V(s,d),$e(d,i[9]),V(s,c),k&&k.m(s,null),V(s,p),V(s,_),y=!0,O||(T=[ye(d,"input",i[22]),ye(d,"input",i[23]),ye(_,"click",i[10]),ye(n,"click",i[11]),ye(n,"mouseenter",i[13]),ye(n,"mouseleave",i[14])],O=!0)},p(w,R){R[0]&8&&it(e,e=w[3].inProgress)?(ut(),de(N,1,1,Me),ft(),N=Rd(w),N.c(),ue(N,1),N.m(t.parentNode,t)):N.p(w,R),w[5]?g&&(ut(),de(g,1,1,()=>{g=null}),ft()):g?(g.p(w,R),R[0]&32&&ue(g,1)):(g=Fd(w),g.c(),ue(g,1),g.m(n,r));const S={};R[0]&4&&(S.isVisible=w[2]),f.$set(S),R[0]&512&&d.value!==w[9]&&$e(d,w[9]),w[0].user_properties?k?k.p(w,R):(k=Bd(w),k.c(),k.m(s,p)):k&&(k.d(1),k=null)},i(w){y||(ue(N),ue(g),ue(f.$$.fragment,w),y=!0)},o(w){de(N),de(g),de(f.$$.fragment,w),y=!1},d(w){w&&(v(t),v(n)),N.d(w),g&&g.d(),je(f),k&&k.d(),O=!1,ht(T)}}}function oE(i,e,t){let n,r,s,a,l,o;tt(i,Nr,j=>t(28,l=j)),tt(i,nt,j=>t(4,o=j));var u,f,h,d;let{data:c}=e,{isConnectable:p}=e,{selected:_=void 0}=e;function m(){y(),c.user_properties.push(["",""])}function y(){for(let j=0;j<l.length;j++)l[j].data==c&&mt(nt,o=l[j],o)}let{id:O}=e;const T=Cn();tt(i,T,j=>t(3,a=j));let N=!1,g=!1;function k(){t(6,g=!0)}function w(){t(6,g=!1)}function R(){return a.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function S(){return g?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const B=j=>{t(0,c.label=j.currentTarget.value,c),mt(nt,o.data.label=c.label,o)};function D(){n=this.value,t(9,n),t(0,c),t(4,o),t(18,u)}const L=(j,re)=>{t(0,c.user_properties[j][0]=re.currentTarget.value,c),mt(nt,o.data.user_properties[j][0]=re.currentTarget.value,o)};function A(j){r[j][0]=this.value,t(8,r),t(0,c),t(4,o),t(19,f)}const I=(j,re)=>{t(0,c.user_properties[j][1]=re.currentTarget.value,c),mt(nt,o.data.user_properties[j][1]=re.currentTarget.value,o)};function x(j){s[j][1]=this.value,t(7,s),t(0,c),t(4,o),t(20,h)}return i.$$set=j=>{"data"in j&&t(0,c=j.data),"isConnectable"in j&&t(1,p=j.isConnectable),"selected"in j&&t(2,_=j.selected),"id"in j&&t(17,O=j.id)},i.$$.update=()=>{i.$$.dirty[0]&262161&&t(9,n=(c==null?void 0:c.label)||(t(18,u=o==null?void 0:o.data)===null||u===void 0?void 0:u.label)||"< label >"),i.$$.dirty[0]&524305&&t(8,r=(c==null?void 0:c.user_properties)||(t(19,f=o==null?void 0:o.data)===null||f===void 0?void 0:f.user_properties)||"< Property >"),i.$$.dirty[0]&1048593&&t(7,s=(c==null?void 0:c.user_properties)||(t(20,h=o==null?void 0:o.data)===null||h===void 0?void 0:h.user_properties)||"< Value >"),i.$$.dirty[0]&2228232&&t(5,N=(t(21,d=a.toHandle)===null||d===void 0?void 0:d.nodeId)==O)},[c,p,_,a,o,N,g,s,r,n,m,y,T,k,w,R,S,O,u,f,h,d,B,D,L,A,I,x]}class uE extends yt{constructor(e){super(),Et(this,e,oE,lE,it,{data:0,isConnectable:1,selected:2,id:17},null,[-1,-1])}}function Ud(i,e,t){const n=i.slice();return n[30]=e[t],n[31]=e,n[32]=t,n}function jd(i){let e,t;return e=new bt({props:{type:"target",class:"customHandle",position:pt.Left,id:"target",style:i[13](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r[0]&2&&(s.isConnectable=n[1]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function qd(i){let e=i[6],t,n,r=Md(i);return{c(){r.c(),t=Re()},l(s){r.l(s),t=Re()},m(s,a){r.m(s,a),C(s,t,a),n=!0},p(s,a){a[0]&64&&it(e,e=s[6])?(ut(),de(r,1,1,Me),ft(),r=Md(s),r.c(),ue(r,1),r.m(t.parentNode,t)):r.p(s,a)},i(s){n||(ue(r),n=!0)},o(s){de(r),n=!1},d(s){s&&v(t),r.d(s)}}}function Md(i){let e,t,n,r,s,a,l,o;return e=new bt({props:{type:"source",position:pt.Top,id:"source",style:i[14](),isConnectable:i[1]}}),n=new bt({props:{type:"source",position:pt.Left,id:"source",style:i[14](),isConnectable:i[1]}}),s=new bt({props:{type:"source",position:pt.Right,id:"source",style:i[14](),isConnectable:i[1]}}),l=new bt({props:{type:"source",position:pt.Bottom,id:"source",style:i[14](),isConnectable:i[1]}}),{c(){Be(e.$$.fragment),t=ie(),Be(n.$$.fragment),r=ie(),Be(s.$$.fragment),a=ie(),Be(l.$$.fragment)},l(u){Le(e.$$.fragment,u),t=ae(u),Le(n.$$.fragment,u),r=ae(u),Le(s.$$.fragment,u),a=ae(u),Le(l.$$.fragment,u)},m(u,f){Ue(e,u,f),C(u,t,f),Ue(n,u,f),C(u,r,f),Ue(s,u,f),C(u,a,f),Ue(l,u,f),o=!0},p(u,f){const h={};f[0]&2&&(h.isConnectable=u[1]),e.$set(h);const d={};f[0]&2&&(d.isConnectable=u[1]),n.$set(d);const c={};f[0]&2&&(c.isConnectable=u[1]),s.$set(c);const p={};f[0]&2&&(p.isConnectable=u[1]),l.$set(p)},i(u){o||(ue(e.$$.fragment,u),ue(n.$$.fragment,u),ue(s.$$.fragment,u),ue(l.$$.fragment,u),o=!0)},o(u){de(e.$$.fragment,u),de(n.$$.fragment,u),de(s.$$.fragment,u),de(l.$$.fragment,u),o=!1},d(u){u&&(v(t),v(r),v(a)),je(e,u),je(n,u),je(s,u),je(l,u)}}}function Vd(i){let e,t=Ge(i[0].user_properties),n=[];for(let r=0;r<t.length;r+=1)n[r]=zd(Ud(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Re()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Re()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);C(r,e,s)},p(r,s){if(s[0]&393){t=Ge(r[0].user_properties);let a;for(a=0;a<t.length;a+=1){const l=Ud(r,t,a);n[a]?n[a].p(l,s):(n[a]=zd(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&v(e),wt(n,r)}}}function zd(i){let e,t,n,r,s,a,l,o,u;function f(...p){return i[24](i[32],...p)}function h(){i[25].call(n,i[32])}function d(...p){return i[26](i[32],...p)}function c(){i[27].call(a,i[32])}return{c(){e=Y("div"),t=Y("div"),n=Y("input"),r=ie(),s=Y("div"),a=Y("input"),l=ie(),this.h()},l(p){e=J(p,"DIV",{class:!0});var _=Ce(e);t=J(_,"DIV",{class:!0});var m=Ce(t);n=J(m,"INPUT",{placeholder:!0}),m.forEach(v),r=ae(_),s=J(_,"DIV",{class:!0});var y=Ce(s);a=J(y,"INPUT",{placeholder:!0}),y.forEach(v),l=ae(_),_.forEach(v),this.h()},h(){ee(n,"placeholder","property"),ee(t,"class","user-property flex-column"),ee(a,"placeholder","value"),ee(s,"class","user-value flex-column flex-grow-3"),ee(e,"class","user-properties flex")},m(p,_){C(p,e,_),V(e,t),V(t,n),$e(n,i[8][i[32]][0]),V(e,r),V(e,s),V(s,a),$e(a,i[7][i[32]][1]),V(e,l),o||(u=[ye(n,"input",f),ye(n,"input",h),ye(a,"input",d),ye(a,"input",c)],o=!0)},p(p,_){i=p,_[0]&256&&n.value!==i[8][i[32]][0]&&$e(n,i[8][i[32]][0]),_[0]&128&&a.value!==i[7][i[32]][1]&&$e(a,i[7][i[32]][1])},d(p){p&&v(e),o=!1,ht(u)}}}function fE(i){let e=i[4].inProgress,t,n,r,s,a,l,o,u="Condition",f,h,d,c,p,_,m="+",y,O,T,N=jd(i),g=!i[5]&&qd(i);a=new Mn({props:{isVisible:i[2]}});let k=i[0].user_properties&&Vd(i);return{c(){N.c(),t=ie(),n=Y("div"),g&&g.c(),r=ie(),s=Y("div"),Be(a.$$.fragment),l=ie(),o=Y("i"),o.textContent=u,f=Y("br"),h=ie(),d=Y("input"),c=ie(),k&&k.c(),p=ie(),_=Y("button"),_.textContent=m,this.h()},l(w){N.l(w),t=ae(w),n=J(w,"DIV",{class:!0});var R=Ce(n);g&&g.l(R),r=ae(R),s=J(R,"DIV",{class:!0});var S=Ce(s);Le(a.$$.fragment,S),l=ae(S),o=J(S,"I",{"data-svelte-h":!0}),Ke(o)!=="svelte-26somz"&&(o.textContent=u),f=J(S,"BR",{}),h=ae(S),d=J(S,"INPUT",{class:!0,type:!0,style:!0}),c=ae(S),k&&k.l(S),p=ae(S),_=J(S,"BUTTON",{"data-svelte-h":!0}),Ke(_)!=="svelte-y9choq"&&(_.textContent=m),S.forEach(v),R.forEach(v),this.h()},h(){ee(d,"class","nodrag label"),ee(d,"type","text"),gt(d,"background","#ece6ff"),ee(s,"class","condition node-inner svelte-d75hej"),ee(n,"class","condition node svelte-d75hej")},m(w,R){N.m(w,R),C(w,t,R),C(w,n,R),g&&g.m(n,null),V(n,r),V(n,s),Ue(a,s,null),V(s,l),V(s,o),V(s,f),V(s,h),V(s,d),$e(d,i[9]),V(s,c),k&&k.m(s,null),V(s,p),V(s,_),y=!0,O||(T=[ye(d,"input",i[22]),ye(d,"input",i[23]),ye(_,"click",i[15]),ye(n,"click",i[16]),ye(n,"mouseenter",i[11]),ye(n,"mouseleave",i[12])],O=!0)},p(w,R){R[0]&16&&it(e,e=w[4].inProgress)?(ut(),de(N,1,1,Me),ft(),N=jd(w),N.c(),ue(N,1),N.m(t.parentNode,t)):N.p(w,R),w[5]?g&&(ut(),de(g,1,1,()=>{g=null}),ft()):g?(g.p(w,R),R[0]&32&&ue(g,1)):(g=qd(w),g.c(),ue(g,1),g.m(n,r));const S={};R[0]&4&&(S.isVisible=w[2]),a.$set(S),R[0]&512&&d.value!==w[9]&&$e(d,w[9]),w[0].user_properties?k?k.p(w,R):(k=Vd(w),k.c(),k.m(s,p)):k&&(k.d(1),k=null)},i(w){y||(ue(N),ue(g),ue(a.$$.fragment,w),y=!0)},o(w){de(N),de(g),de(a.$$.fragment,w),y=!1},d(w){w&&(v(t),v(n)),N.d(w),g&&g.d(),je(a),k&&k.d(),O=!1,ht(T)}}}function cE(i,e,t){let n,r,s,a,l,o;tt(i,Nr,j=>t(28,a=j)),tt(i,nt,j=>t(3,l=j));var u,f,h,d;let{data:c}=e,{isConnectable:p}=e,{selected:_=void 0}=e,{id:m}=e;const y=Cn();tt(i,y,j=>t(4,o=j));let O=!1,T=!1;function N(){t(6,T=!0)}function g(){t(6,T=!1)}function k(){return o.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function w(){return T?"z-index: 2;":"visibility:hidden; pointer-events: none;"}function R(){S(),c.user_properties.push(["",""])}function S(){for(let j=0;j<a.length;j++)a[j].data==c&&mt(nt,l=a[j],l)}const B=j=>{t(0,c.label=j.currentTarget.value,c),mt(nt,l.data.label=c.label,l)};function D(){n=this.value,t(9,n),t(0,c),t(3,l),t(19,f)}const L=(j,re)=>{t(0,c.user_properties[j][0]=re.currentTarget.value,c),mt(nt,l.data.user_properties[j][0]=re.currentTarget.value,l)};function A(j){r[j][0]=this.value,t(8,r),t(0,c),t(3,l),t(20,h)}const I=(j,re)=>{t(0,c.user_properties[j][1]=re.currentTarget.value,c),mt(nt,l.data.user_properties[j][1]=re.currentTarget.value,l)};function x(j){s[j][1]=this.value,t(7,s),t(0,c),t(3,l),t(21,d)}return i.$$set=j=>{"data"in j&&t(0,c=j.data),"isConnectable"in j&&t(1,p=j.isConnectable),"selected"in j&&t(2,_=j.selected),"id"in j&&t(17,m=j.id)},i.$$.update=()=>{i.$$.dirty[0]&393232&&t(5,O=(t(18,u=o.toHandle)===null||u===void 0?void 0:u.nodeId)==m),i.$$.dirty[0]&524297&&t(9,n=(c==null?void 0:c.label)||(t(19,f=l==null?void 0:l.data)===null||f===void 0?void 0:f.label)||"< label >"),i.$$.dirty[0]&1048585&&t(8,r=(c==null?void 0:c.user_properties)||(t(20,h=l==null?void 0:l.data)===null||h===void 0?void 0:h.user_properties)||"< Property >"),i.$$.dirty[0]&2097161&&t(7,s=(c==null?void 0:c.user_properties)||(t(21,d=l==null?void 0:l.data)===null||d===void 0?void 0:d.user_properties)||"< Value >")},[c,p,_,l,o,O,T,s,r,n,y,N,g,k,w,R,S,m,u,f,h,d,B,D,L,A,I,x]}class dE extends yt{constructor(e){super(),Et(this,e,cE,fE,it,{data:0,isConnectable:1,selected:2,id:17},null,[-1,-1])}}function Hd(i,e,t){const n=i.slice();return n[30]=e[t],n[31]=e,n[32]=t,n}function xd(i){let e,t;return e=new bt({props:{type:"target",class:"customHandle",position:pt.Left,id:"target",style:i[15](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r[0]&2&&(s.isConnectable=n[1]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function Xd(i){let e=i[6],t,n,r=Gd(i);return{c(){r.c(),t=Re()},l(s){r.l(s),t=Re()},m(s,a){r.m(s,a),C(s,t,a),n=!0},p(s,a){a[0]&64&&it(e,e=s[6])?(ut(),de(r,1,1,Me),ft(),r=Gd(s),r.c(),ue(r,1),r.m(t.parentNode,t)):r.p(s,a)},i(s){n||(ue(r),n=!0)},o(s){de(r),n=!1},d(s){s&&v(t),r.d(s)}}}function Gd(i){let e,t,n,r,s,a,l,o;return e=new bt({props:{type:"source",position:pt.Top,id:"source",style:i[16](),isConnectable:i[1]}}),n=new bt({props:{type:"source",position:pt.Left,id:"source",style:i[16](),isConnectable:i[1]}}),s=new bt({props:{type:"source",position:pt.Right,id:"source",style:i[16](),isConnectable:i[1]}}),l=new bt({props:{type:"source",position:pt.Bottom,id:"source",style:i[16](),isConnectable:i[1]}}),{c(){Be(e.$$.fragment),t=ie(),Be(n.$$.fragment),r=ie(),Be(s.$$.fragment),a=ie(),Be(l.$$.fragment)},l(u){Le(e.$$.fragment,u),t=ae(u),Le(n.$$.fragment,u),r=ae(u),Le(s.$$.fragment,u),a=ae(u),Le(l.$$.fragment,u)},m(u,f){Ue(e,u,f),C(u,t,f),Ue(n,u,f),C(u,r,f),Ue(s,u,f),C(u,a,f),Ue(l,u,f),o=!0},p(u,f){const h={};f[0]&2&&(h.isConnectable=u[1]),e.$set(h);const d={};f[0]&2&&(d.isConnectable=u[1]),n.$set(d);const c={};f[0]&2&&(c.isConnectable=u[1]),s.$set(c);const p={};f[0]&2&&(p.isConnectable=u[1]),l.$set(p)},i(u){o||(ue(e.$$.fragment,u),ue(n.$$.fragment,u),ue(s.$$.fragment,u),ue(l.$$.fragment,u),o=!0)},o(u){de(e.$$.fragment,u),de(n.$$.fragment,u),de(s.$$.fragment,u),de(l.$$.fragment,u),o=!1},d(u){u&&(v(t),v(r),v(a)),je(e,u),je(n,u),je(s,u),je(l,u)}}}function $d(i){let e,t=Ge(i[0].user_properties),n=[];for(let r=0;r<t.length;r+=1)n[r]=Qd(Hd(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Re()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Re()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);C(r,e,s)},p(r,s){if(s[0]&401){t=Ge(r[0].user_properties);let a;for(a=0;a<t.length;a+=1){const l=Hd(r,t,a);n[a]?n[a].p(l,s):(n[a]=Qd(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&v(e),wt(n,r)}}}function Qd(i){let e,t,n,r,s,a,l,o,u;function f(...p){return i[24](i[32],...p)}function h(){i[25].call(n,i[32])}function d(...p){return i[26](i[32],...p)}function c(){i[27].call(a,i[32])}return{c(){e=Y("div"),t=Y("div"),n=Y("input"),r=ie(),s=Y("div"),a=Y("input"),l=ie(),this.h()},l(p){e=J(p,"DIV",{class:!0});var _=Ce(e);t=J(_,"DIV",{class:!0});var m=Ce(t);n=J(m,"INPUT",{placeholder:!0}),m.forEach(v),r=ae(_),s=J(_,"DIV",{class:!0});var y=Ce(s);a=J(y,"INPUT",{placeholder:!0}),y.forEach(v),l=ae(_),_.forEach(v),this.h()},h(){ee(n,"placeholder","property"),ee(t,"class","user-property flex-column"),ee(a,"placeholder","value"),ee(s,"class","user-value flex-column flex-grow-3"),ee(e,"class","user-properties flex")},m(p,_){C(p,e,_),V(e,t),V(t,n),$e(n,i[8][i[32]][0]),V(e,r),V(e,s),V(s,a),$e(a,i[7][i[32]][1]),V(e,l),o||(u=[ye(n,"input",f),ye(n,"input",h),ye(a,"input",d),ye(a,"input",c)],o=!0)},p(p,_){i=p,_[0]&256&&n.value!==i[8][i[32]][0]&&$e(n,i[8][i[32]][0]),_[0]&128&&a.value!==i[7][i[32]][1]&&$e(a,i[7][i[32]][1])},d(p){p&&v(e),o=!1,ht(u)}}}function hE(i){let e=i[3].inProgress,t,n,r,s,a,l="Agent",o,u,f,h,d,c,p,_,m,y="+",O,T,N,g=xd(i),k=!i[5]&&Xd(i);f=new Mn({props:{isVisible:i[2]}});let w=i[0].user_properties&&$d(i);return{c(){g.c(),t=ie(),n=Y("div"),k&&k.c(),r=ie(),s=Y("div"),a=Y("i"),a.textContent=l,o=Y("br"),u=ie(),Be(f.$$.fragment),h=ie(),d=Y("input"),c=Y("br"),p=ie(),w&&w.c(),_=ie(),m=Y("button"),m.textContent=y,this.h()},l(R){g.l(R),t=ae(R),n=J(R,"DIV",{class:!0});var S=Ce(n);k&&k.l(S),r=ae(S),s=J(S,"DIV",{class:!0});var B=Ce(s);a=J(B,"I",{"data-svelte-h":!0}),Ke(a)!=="svelte-13s1fb"&&(a.textContent=l),o=J(B,"BR",{}),u=ae(B),Le(f.$$.fragment,B),h=ae(B),d=J(B,"INPUT",{class:!0,type:!0,style:!0}),c=J(B,"BR",{}),p=ae(B),w&&w.l(B),_=ae(B),m=J(B,"BUTTON",{"data-svelte-h":!0}),Ke(m)!=="svelte-y9choq"&&(m.textContent=y),B.forEach(v),S.forEach(v),this.h()},h(){ee(d,"class","nodrag label"),ee(d,"type","text"),gt(d,"background","#f0e6e6"),ee(s,"class","agent-inner node-inner"),ee(n,"class","agent node svelte-n06ybh")},m(R,S){g.m(R,S),C(R,t,S),C(R,n,S),k&&k.m(n,null),V(n,r),V(n,s),V(s,a),V(s,o),V(s,u),Ue(f,s,null),V(s,h),V(s,d),$e(d,i[9]),V(s,c),V(s,p),w&&w.m(s,null),V(s,_),V(s,m),O=!0,T||(N=[ye(d,"input",i[22]),ye(d,"input",i[23]),ye(m,"click",i[10]),ye(n,"click",i[11]),ye(n,"mouseenter",i[13]),ye(n,"mouseleave",i[14])],T=!0)},p(R,S){S[0]&8&&it(e,e=R[3].inProgress)?(ut(),de(g,1,1,Me),ft(),g=xd(R),g.c(),ue(g,1),g.m(t.parentNode,t)):g.p(R,S),R[5]?k&&(ut(),de(k,1,1,()=>{k=null}),ft()):k?(k.p(R,S),S[0]&32&&ue(k,1)):(k=Xd(R),k.c(),ue(k,1),k.m(n,r));const B={};S[0]&4&&(B.isVisible=R[2]),f.$set(B),S[0]&512&&d.value!==R[9]&&$e(d,R[9]),R[0].user_properties?w?w.p(R,S):(w=$d(R),w.c(),w.m(s,_)):w&&(w.d(1),w=null)},i(R){O||(ue(g),ue(k),ue(f.$$.fragment,R),O=!0)},o(R){de(g),de(k),de(f.$$.fragment,R),O=!1},d(R){R&&(v(t),v(n)),g.d(R),k&&k.d(),je(f),w&&w.d(),T=!1,ht(N)}}}function pE(i,e,t){let n,r,s,a,l,o;tt(i,Nr,j=>t(28,l=j)),tt(i,nt,j=>t(4,o=j));var u,f,h,d;let{data:c}=e,{isConnectable:p}=e,{selected:_=void 0}=e,{id:m}=e;function y(){O(),c.user_properties.push(["",""])}function O(){for(let j=0;j<l.length;j++)l[j].data==c&&mt(nt,o=l[j],o)}const T=Cn();tt(i,T,j=>t(3,a=j));let N=!1,g=!1;function k(){t(6,g=!0)}function w(){t(6,g=!1)}function R(){return a.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function S(){return g?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const B=j=>{t(0,c.label=j.currentTarget.value,c),mt(nt,o.data.label=c.label,o)};function D(){n=this.value,t(9,n),t(0,c),t(4,o),t(18,u)}const L=(j,re)=>{t(0,c.user_properties[j][0]=re.currentTarget.value,c),mt(nt,o.data.user_properties[j][0]=re.currentTarget.value,o)};function A(j){r[j][0]=this.value,t(8,r),t(0,c),t(4,o),t(19,f)}const I=(j,re)=>{t(0,c.user_properties[j][1]=re.currentTarget.value,c),mt(nt,o.data.user_properties[j][1]=re.currentTarget.value,o)};function x(j){s[j][1]=this.value,t(7,s),t(0,c),t(4,o),t(20,h)}return i.$$set=j=>{"data"in j&&t(0,c=j.data),"isConnectable"in j&&t(1,p=j.isConnectable),"selected"in j&&t(2,_=j.selected),"id"in j&&t(17,m=j.id)},i.$$.update=()=>{i.$$.dirty[0]&262161&&t(9,n=(c==null?void 0:c.label)||(t(18,u=o==null?void 0:o.data)===null||u===void 0?void 0:u.label)||"< label >"),i.$$.dirty[0]&524305&&t(8,r=(c==null?void 0:c.user_properties)||(t(19,f=o==null?void 0:o.data)===null||f===void 0?void 0:f.user_properties)),i.$$.dirty[0]&1048593&&t(7,s=(c==null?void 0:c.user_properties)||(t(20,h=o==null?void 0:o.data)===null||h===void 0?void 0:h.user_properties)),i.$$.dirty[0]&2228232&&t(5,N=(t(21,d=a.toHandle)===null||d===void 0?void 0:d.nodeId)==m)},[c,p,_,a,o,N,g,s,r,n,y,O,T,k,w,R,S,m,u,f,h,d,B,D,L,A,I,x]}class _E extends yt{constructor(e){super(),Et(this,e,pE,hE,it,{data:0,isConnectable:1,selected:2,id:17},null,[-1,-1])}}function Wd(i,e,t){const n=i.slice();return n[31]=e[t],n[32]=e,n[33]=t,n}function Yd(i){let e,t;return e=new bt({props:{type:"target",class:"customHandle",position:pt.Left,id:"target",style:i[17](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r[0]&2&&(s.isConnectable=n[1]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function Jd(i){let e=i[8],t,n,r=Kd(i);return{c(){r.c(),t=Re()},l(s){r.l(s),t=Re()},m(s,a){r.m(s,a),C(s,t,a),n=!0},p(s,a){a[0]&256&&it(e,e=s[8])?(ut(),de(r,1,1,Me),ft(),r=Kd(s),r.c(),ue(r,1),r.m(t.parentNode,t)):r.p(s,a)},i(s){n||(ue(r),n=!0)},o(s){de(r),n=!1},d(s){s&&v(t),r.d(s)}}}function Kd(i){let e,t,n,r,s,a,l,o;return e=new bt({props:{type:"source",position:pt.Top,id:"source",style:i[18](),isConnectable:i[1]}}),n=new bt({props:{type:"source",position:pt.Left,id:"source",style:i[18](),isConnectable:i[1]}}),s=new bt({props:{type:"source",position:pt.Right,id:"source",style:i[18](),isConnectable:i[1]}}),l=new bt({props:{type:"source",position:pt.Bottom,id:"source",style:i[18](),isConnectable:i[1]}}),{c(){Be(e.$$.fragment),t=ie(),Be(n.$$.fragment),r=ie(),Be(s.$$.fragment),a=ie(),Be(l.$$.fragment)},l(u){Le(e.$$.fragment,u),t=ae(u),Le(n.$$.fragment,u),r=ae(u),Le(s.$$.fragment,u),a=ae(u),Le(l.$$.fragment,u)},m(u,f){Ue(e,u,f),C(u,t,f),Ue(n,u,f),C(u,r,f),Ue(s,u,f),C(u,a,f),Ue(l,u,f),o=!0},p(u,f){const h={};f[0]&2&&(h.isConnectable=u[1]),e.$set(h);const d={};f[0]&2&&(d.isConnectable=u[1]),n.$set(d);const c={};f[0]&2&&(c.isConnectable=u[1]),s.$set(c);const p={};f[0]&2&&(p.isConnectable=u[1]),l.$set(p)},i(u){o||(ue(e.$$.fragment,u),ue(n.$$.fragment,u),ue(s.$$.fragment,u),ue(l.$$.fragment,u),o=!0)},o(u){de(e.$$.fragment,u),de(n.$$.fragment,u),de(s.$$.fragment,u),de(l.$$.fragment,u),o=!1},d(u){u&&(v(t),v(r),v(a)),je(e,u),je(n,u),je(s,u),je(l,u)}}}function mE(i){let e,t;return e=new i[34].ItemTree({props:{list:Ch,filter_value_store:i[35],select_item:i[36]}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r[1]&16&&(s.filter_value_store=n[35]),r[1]&32&&(s.select_item=n[36]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function Zd(i){let e,t=Ge(i[0].user_properties),n=[];for(let r=0;r<t.length;r+=1)n[r]=eh(Wd(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Re()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Re()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);C(r,e,s)},p(r,s){if(s[0]&1601){t=Ge(r[0].user_properties);let a;for(a=0;a<t.length;a+=1){const l=Wd(r,t,a);n[a]?n[a].p(l,s):(n[a]=eh(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&v(e),wt(n,r)}}}function eh(i){let e,t,n,r,s,a,l,o,u;function f(...p){return i[26](i[33],...p)}function h(){i[27].call(n,i[33])}function d(...p){return i[28](i[33],...p)}function c(){i[29].call(a,i[33])}return{c(){e=Y("div"),t=Y("div"),n=Y("input"),r=ie(),s=Y("div"),a=Y("input"),l=ie(),this.h()},l(p){e=J(p,"DIV",{class:!0});var _=Ce(e);t=J(_,"DIV",{class:!0});var m=Ce(t);n=J(m,"INPUT",{placeholder:!0}),m.forEach(v),r=ae(_),s=J(_,"DIV",{class:!0});var y=Ce(s);a=J(y,"INPUT",{placeholder:!0}),y.forEach(v),l=ae(_),_.forEach(v),this.h()},h(){ee(n,"placeholder","property"),ee(t,"class","user-property flex-column"),ee(a,"placeholder","value"),ee(s,"class","user-value flex-column flex-grow-3"),ee(e,"class","user-properties flex")},m(p,_){C(p,e,_),V(e,t),V(t,n),$e(n,i[10][i[33]][0]),V(e,r),V(e,s),V(s,a),$e(a,i[9][i[33]][1]),V(e,l),o||(u=[ye(n,"input",f),ye(n,"input",h),ye(a,"input",d),ye(a,"input",c)],o=!0)},p(p,_){i=p,_[0]&1024&&n.value!==i[10][i[33]][0]&&$e(n,i[10][i[33]][0]),_[0]&512&&a.value!==i[9][i[33]][1]&&$e(a,i[9][i[33]][1])},d(p){p&&v(e),o=!1,ht(u)}}}function vE(i){let e=i[5].inProgress,t,n,r,s,a,l,o,u,f,h,d,c,p,_,m,y,O,T,N="+",g,k,w,R=Yd(i),S=!i[7]&&Jd(i);a=new Mn({props:{isVisible:i[4]}}),p=new Li({props:{node_id:i[2],element_id:i[0].d3f_class,input_color:"white",$$slots:{default:[mE,({R:D,filter_value_store:L,select_item:A})=>({34:D,35:L,36:A}),({R:D,filter_value_store:L,select_item:A})=>[0,(D?8:0)|(L?16:0)|(A?32:0)]]},$$scope:{ctx:i}}});let B=i[0].user_properties&&Zd(i);return{c(){R.c(),t=ie(),n=Y("div"),S&&S.c(),r=ie(),s=Y("div"),Be(a.$$.fragment),l=ie(),o=Y("i"),u=q(i[3]),f=Y("br"),h=ie(),d=Y("br"),c=ie(),Be(p.$$.fragment),_=ie(),m=Y("input"),y=ie(),B&&B.c(),O=ie(),T=Y("button"),T.textContent=N,this.h()},l(D){R.l(D),t=ae(D),n=J(D,"DIV",{class:!0});var L=Ce(n);S&&S.l(L),r=ae(L),s=J(L,"DIV",{class:!0});var A=Ce(s);Le(a.$$.fragment,A),l=ae(A),o=J(A,"I",{});var I=Ce(o);u=M(I,i[3]),I.forEach(v),f=J(A,"BR",{}),h=ae(A),d=J(A,"BR",{}),c=ae(A),Le(p.$$.fragment,A),_=ae(A),m=J(A,"INPUT",{class:!0,type:!0,style:!0}),y=ae(A),B&&B.l(A),O=ae(A),T=J(A,"BUTTON",{"data-svelte-h":!0}),Ke(T)!=="svelte-y9choq"&&(T.textContent=N),A.forEach(v),L.forEach(v),this.h()},h(){ee(m,"class","nodrag label"),ee(m,"type","text"),gt(m,"background","white"),ee(s,"class","event node-inner svelte-r7gabh"),ee(n,"class","event node svelte-r7gabh")},m(D,L){R.m(D,L),C(D,t,L),C(D,n,L),S&&S.m(n,null),V(n,r),V(n,s),Ue(a,s,null),V(s,l),V(s,o),V(o,u),V(s,f),V(s,h),V(s,d),V(s,c),Ue(p,s,null),V(s,_),V(s,m),$e(m,i[11]),V(s,y),B&&B.m(s,null),V(s,O),V(s,T),g=!0,k||(w=[ye(m,"input",i[24]),ye(m,"input",i[25]),ye(T,"click",i[12]),ye(n,"click",i[13]),ye(n,"mouseenter",i[15]),ye(n,"mouseleave",i[16])],k=!0)},p(D,L){L[0]&32&&it(e,e=D[5].inProgress)?(ut(),de(R,1,1,Me),ft(),R=Yd(D),R.c(),ue(R,1),R.m(t.parentNode,t)):R.p(D,L),D[7]?S&&(ut(),de(S,1,1,()=>{S=null}),ft()):S?(S.p(D,L),L[0]&128&&ue(S,1)):(S=Jd(D),S.c(),ue(S,1),S.m(n,r));const A={};L[0]&16&&(A.isVisible=D[4]),a.$set(A),(!g||L[0]&8)&&we(u,D[3]);const I={};L[0]&4&&(I.node_id=D[2]),L[0]&1&&(I.element_id=D[0].d3f_class),L[1]&112&&(I.$$scope={dirty:L,ctx:D}),p.$set(I),L[0]&2048&&m.value!==D[11]&&$e(m,D[11]),D[0].user_properties?B?B.p(D,L):(B=Zd(D),B.c(),B.m(s,O)):B&&(B.d(1),B=null)},i(D){g||(ue(R),ue(S),ue(a.$$.fragment,D),ue(p.$$.fragment,D),g=!0)},o(D){de(R),de(S),de(a.$$.fragment,D),de(p.$$.fragment,D),g=!1},d(D){D&&(v(t),v(n)),R.d(D),S&&S.d(),je(a),je(p),B&&B.d(),k=!1,ht(w)}}}function gE(i,e,t){let n,r,s,a,l,o;tt(i,Nr,Z=>t(30,l=Z)),tt(i,nt,Z=>t(6,o=Z));var u,f,h,d;let{data:c}=e,{isConnectable:p}=e,{id:_}=e,{nodeType:m="EventNode"}=e,{nodeTypeLabel:y="Event"}=e,{selected:O=void 0}=e;function T(){N(),c.user_properties.push(["",""])}function N(){for(let Z=0;Z<l.length;Z++)l[Z].data==c&&mt(nt,o=l[Z],o)}const g=Cn();tt(i,g,Z=>t(5,a=Z));let k=!1,w=!1;function R(){t(8,w=!0)}function S(){t(8,w=!1)}function B(){return a.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function D(){return w?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const L=Z=>{t(0,c.label=Z.currentTarget.value,c),mt(nt,o.data.label=c.label,o)};function A(){n=this.value,t(11,n),t(0,c),t(6,o),t(20,u)}const I=(Z,$)=>{t(0,c.user_properties[Z][0]=$.currentTarget.value,c),mt(nt,o.data.user_properties[Z][0]=$.currentTarget.value,o)};function x(Z){r[Z][0]=this.value,t(10,r),t(0,c),t(6,o),t(21,f)}const j=(Z,$)=>{t(0,c.user_properties[Z][1]=$.currentTarget.value,c),mt(nt,o.data.user_properties[Z][1]=$.currentTarget.value,o)};function re(Z){s[Z][1]=this.value,t(9,s),t(0,c),t(6,o),t(22,h)}return i.$$set=Z=>{"data"in Z&&t(0,c=Z.data),"isConnectable"in Z&&t(1,p=Z.isConnectable),"id"in Z&&t(2,_=Z.id),"nodeType"in Z&&t(19,m=Z.nodeType),"nodeTypeLabel"in Z&&t(3,y=Z.nodeTypeLabel),"selected"in Z&&t(4,O=Z.selected)},i.$$.update=()=>{i.$$.dirty[0]&1048641&&t(11,n=(c==null?void 0:c.label)||(t(20,u=o==null?void 0:o.data)===null||u===void 0?void 0:u.label)||"< label >"),i.$$.dirty[0]&2097217&&t(10,r=(c==null?void 0:c.user_properties)||(t(21,f=o==null?void 0:o.data)===null||f===void 0?void 0:f.user_properties)||"< Property >"),i.$$.dirty[0]&4194369&&t(9,s=(c==null?void 0:c.user_properties)||(t(22,h=o==null?void 0:o.data)===null||h===void 0?void 0:h.user_properties)||"< Value >"),i.$$.dirty[0]&8388644&&t(7,k=(t(23,d=a.toHandle)===null||d===void 0?void 0:d.nodeId)==_)},[c,p,_,y,O,a,o,k,w,s,r,n,T,N,g,R,S,B,D,m,u,f,h,d,L,A,I,x,j,re]}class bE extends yt{constructor(e){super(),Et(this,e,gE,vE,it,{data:0,isConnectable:1,id:2,nodeType:19,nodeTypeLabel:3,selected:4},null,[-1,-1])}}function th(i,e){const t=i.internals.positionAbsolute||{x:0,y:0},n=e.internals.positionAbsolute||{x:0,y:0},r=(i.measured.width??0)/2,s=(i.measured.height??0)/2,a=t.x+r,l=t.y+s,o=n.x+(e.measured.width??0)/2,u=n.y+(e.measured.height??0)/2,f=(o-a)/(2*r)-(u-l)/(2*s),h=(o-a)/(2*r)+(u-l)/(2*s),d=1/(Math.abs(f)+Math.abs(h)),c=d*f,p=d*h,_=r*(c+p)+a,m=s*(-c+p)+l;return{x:_,y:m}}function rh(i,e){var a,l;if(!i.measured.width||!i.measured.height)return null;const t=Math.round(((a=i.internals.positionAbsolute)==null?void 0:a.x)??0),n=Math.round(((l=i.internals.positionAbsolute)==null?void 0:l.y)??0),r=Math.round(e.x),s=Math.round(e.y);return r<=t+1?pt.Left:r>=t+i.measured.width-1?pt.Right:s<=n+1?pt.Top:s>=n+i.measured.height-1?pt.Bottom:pt.Top}function kl(i,e){const t=th(i,e),n=th(e,i),r=rh(i,t),s=rh(e,n);return{sx:t.x,sy:t.y,tx:n.x,ty:n.y,sourcePos:r,targetPos:s}}function wE(i){let e,t;return e=new i[19].ItemProperty({props:{list:Nh,filter_value_store:i[20],select_item:i[21]}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r&1048576&&(s.filter_value_store=n[20]),r&2097152&&(s.select_item=n[21]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function yE(i){let e,t,n=`translate(-50%, -50%) translate(${i[5]}px,${i[6]}px)`,r;return t=new Li({props:{node_id:i[0],element_id:i[1].label,input_color:"#ffffff00",place_holder:String(i[1].label),flow_store_hook:$r,data_save_key:"d3f_property",$$slots:{default:[wE,({R:s,filter_value_store:a,select_item:l})=>({19:s,20:a,21:l}),({R:s,filter_value_store:a,select_item:l})=>(s?524288:0)|(a?1048576:0)|(l?2097152:0)]},$$scope:{ctx:i}}}),{c(){e=Y("div"),Be(t.$$.fragment),this.h()},l(s){e=J(s,"DIV",{class:!0});var a=Ce(e);Le(t.$$.fragment,a),a.forEach(v),this.h()},h(){ee(e,"class","edge-label-container svelte-566npr"),gt(e,"transform",n)},m(s,a){C(s,e,a),Ue(t,e,null),r=!0},p(s,a){const l={};a&1&&(l.node_id=s[0]),a&2&&(l.element_id=s[1].label),a&2&&(l.place_holder=String(s[1].label)),a&7340032&&(l.$$scope={dirty:a,ctx:s}),t.$set(l),a&96&&n!==(n=`translate(-50%, -50%) translate(${s[5]}px,${s[6]}px)`)&&gt(e,"transform",n)},i(s){r||(ue(t.$$.fragment,s),r=!0)},o(s){de(t.$$.fragment,s),r=!1},d(s){s&&v(e),je(t)}}}function EE(i){let e,t,n,r;return e=new wm({props:{path:i[4],markerEnd:i[2],style:i[3]}}),n=new ym({props:{$$slots:{default:[yE]},$$scope:{ctx:i}}}),{c(){Be(e.$$.fragment),t=ie(),Be(n.$$.fragment)},l(s){Le(e.$$.fragment,s),t=ae(s),Le(n.$$.fragment,s)},m(s,a){Ue(e,s,a),C(s,t,a),Ue(n,s,a),r=!0},p(s,[a]){const l={};a&16&&(l.path=s[4]),a&4&&(l.markerEnd=s[2]),a&8&&(l.style=s[3]),e.$set(l);const o={};a&4194403&&(o.$$scope={dirty:a,ctx:s}),n.$set(o)},i(s){r||(ue(e.$$.fragment,s),ue(n.$$.fragment,s),r=!0)},o(s){de(e.$$.fragment,s),de(n.$$.fragment,s),r=!1},d(s){s&&v(t),je(e,s),je(n,s)}}}function kE(i,e,t){let n,r,s,a=Me,l=()=>(a(),a=hn(r,B=>t(17,s=B)),r),o,u=Me,f=()=>(u(),u=hn(n,B=>t(18,o=B)),n);i.$$.on_destroy.push(()=>a()),i.$$.on_destroy.push(()=>u());let{id:h}=e,{data:d}=e,{sourceX:c}=e,{sourceY:p}=e,{source:_}=e,{sourcePosition:m}=e,{targetX:y}=e,{targetY:O}=e,{target:T}=e,{targetPosition:N}=e,{markerEnd:g=wh.ArrowClosed}=e,{style:k="stroke-width: 2px"}=e,w,R,S;return i.$$set=B=>{"id"in B&&t(0,h=B.id),"data"in B&&t(1,d=B.data),"sourceX"in B&&t(9,c=B.sourceX),"sourceY"in B&&t(10,p=B.sourceY),"source"in B&&t(11,_=B.source),"sourcePosition"in B&&t(12,m=B.sourcePosition),"targetX"in B&&t(13,y=B.targetX),"targetY"in B&&t(14,O=B.targetY),"target"in B&&t(15,T=B.target),"targetPosition"in B&&t(16,N=B.targetPosition),"markerEnd"in B&&t(2,g=B.markerEnd),"style"in B&&t(3,k=B.style)},i.$$.update=()=>{if(i.$$.dirty&2048&&f(t(8,n=iu(_))),i.$$.dirty&32768&&l(t(7,r=iu(T))),i.$$.dirty&393216)if(o&&s){const B=kl(o,s);t(4,[w,R,S]=rl({sourceX:B.sx,sourceY:B.sy,sourcePosition:B.sourcePos,targetX:B.tx,targetY:B.ty,targetPosition:B.targetPos}),w,(t(5,R),t(18,o),t(17,s)),(t(6,S),t(18,o),t(17,s)))}else t(4,w=void 0)},[h,d,g,k,w,R,S,r,n,c,p,_,m,y,O,T,N,s,o]}class DE extends yt{constructor(e){super(),Et(this,e,kE,EE,it,{id:0,data:1,sourceX:9,sourceY:10,source:11,sourcePosition:12,targetX:13,targetY:14,target:15,targetPosition:16,markerEnd:2,style:3})}}function nh(i,e,t){const n=i.slice();return n[7]=e[t],n}function ih(i){let e,t=Ge(i[2]),n=[];for(let r=0;r<t.length;r+=1)n[r]=ah(nh(i,t,r));return{c(){e=Y("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=J(r,"DIV",{class:!0});var s=Ce(e);for(let a=0;a<n.length;a+=1)n[a].l(s);s.forEach(v),this.h()},h(){ee(e,"class","file-list svelte-9u10j")},m(r,s){C(r,e,s);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null)},p(r,s){if(s&20){t=Ge(r[2]);let a;for(a=0;a<t.length;a+=1){const l=nh(r,t,a);n[a]?n[a].p(l,s):(n[a]=ah(l),n[a].c(),n[a].m(e,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&v(e),wt(n,r)}}}function ah(i){let e,t=i[7].name+"",n,r,s=i[7].nodeCount+"",a,l,o=i[7].edgeCount+"",u,f,h,d;function c(){return i[5](i[7])}return{c(){e=Y("div"),n=q(t),r=q(" ("),a=q(s),l=q(" nodes, "),u=q(o),f=q(` edges)
          `),this.h()},l(p){e=J(p,"DIV",{class:!0});var _=Ce(e);n=M(_,t),r=M(_," ("),a=M(_,s),l=M(_," nodes, "),u=M(_,o),f=M(_,` edges)
          `),_.forEach(v),this.h()},h(){ee(e,"class","file-item svelte-9u10j")},m(p,_){C(p,e,_),V(e,n),V(e,r),V(e,a),V(e,l),V(e,u),V(e,f),h||(d=ye(e,"click",c),h=!0)},p(p,_){i=p,_&4&&t!==(t=i[7].name+"")&&we(n,t),_&4&&s!==(s=i[7].nodeCount+"")&&we(a,s),_&4&&o!==(o=i[7].edgeCount+"")&&we(u,o)},d(p){p&&v(e),h=!1,d()}}}function AE(i){let e,t,n,r,s,a,l=i[1]&&ih(i);return{c(){e=Y("div"),t=Y("button"),n=q(i[0]),r=ie(),l&&l.c(),this.h()},l(o){e=J(o,"DIV",{class:!0});var u=Ce(e);t=J(u,"BUTTON",{class:!0});var f=Ce(t);n=M(f,i[0]),f.forEach(v),r=ae(u),l&&l.l(u),u.forEach(v),this.h()},h(){ee(t,"class","svelte-9u10j"),ee(e,"class","pick-list-container svelte-9u10j")},m(o,u){C(o,e,u),V(e,t),V(t,n),V(e,r),l&&l.m(e,null),s||(a=ye(t,"click",i[3]),s=!0)},p(o,[u]){u&1&&we(n,o[0]),o[1]?l?l.p(o,u):(l=ih(o),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:Me,o:Me,d(o){o&&v(e),l&&l.d(),s=!1,a()}}}async function CE(){return await(await fetch("/cad/examples.json")).json()}function TE(i,e,t){const n=ss();let r=!1,{selectedFile:s="Example Graphs"}=e,a=[];function l(){t(1,r=!r)}function o(f){t(0,s=f),t(1,r=!1),n("fileSelected",f)}as(async()=>{t(2,a=await CE())});const u=f=>o(f.name);return i.$$set=f=>{"selectedFile"in f&&t(0,s=f.selectedFile)},[s,r,a,l,o,u]}class NE extends yt{constructor(e){super(),Et(this,e,TE,AE,it,{selectedFile:0})}}function sh(i){let e,t,n,r,s;return{c(){e=Bo("path"),t=ie(),n=Bo("circle"),this.h()},l(a){e=Lo(a,"path",{fill:!0,"stroke-width":!0,class:!0,stroke:!0,d:!0}),Ce(e).forEach(v),t=ae(a),n=Lo(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),Ce(n).forEach(v),this.h()},h(){ee(e,"fill","transparent"),ee(e,"stroke-width",2.5),ee(e,"class","animated"),ee(e,"stroke","black"),ee(e,"d",i[2]),ee(n,"cx",r=i[0].tx),ee(n,"cy",s=i[0].ty),ee(n,"r",3),ee(n,"stroke","black"),ee(n,"stroke-width",1.5)},m(a,l){C(a,e,l),C(a,t,l),C(a,n,l)},p(a,l){l&4&&ee(e,"d",a[2]),l&1&&r!==(r=a[0].tx)&&ee(n,"cx",r),l&1&&s!==(s=a[0].ty)&&ee(n,"cy",s)},d(a){a&&(v(e),v(t),v(n))}}}function SE(i){let e,t=i[1].inProgress&&sh(i);return{c(){t&&t.c(),e=Re()},l(n){t&&t.l(n),e=Re()},m(n,r){t&&t.m(n,r),C(n,e,r)},p(n,[r]){n[1].inProgress?t?t.p(n,r):(t=sh(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Me,o:Me,d(n){n&&v(e),t&&t.d(n)}}}function IE(i,e,t){let n;const r=Cn();tt(i,r,l=>t(1,n=l));let s,a;return i.$$.update=()=>{if(i.$$.dirty&3){const l=structuredClone(n.fromNode);n.isValid?(t(0,a=kl(n.fromNode,n.toNode)),t(2,s=rl({sourceX:a.sx,sourceY:a.sy,sourcePosition:a.sourcePos,targetX:a.tx,targetY:a.ty,targetPosition:a.targetPos})[0])):(l.id="-1",l.measured={width:1,height:1},l.position={x:n.to.x,y:n.to.y},l.internals.positionAbsolute={x:n.to.x,y:n.to.y},t(0,a=kl(n.fromNode,l)),t(2,s=rl({sourceX:a.sx,sourceY:a.sy,sourcePosition:a.sourcePos,targetX:a.tx,targetY:a.ty,targetPosition:a.targetPos})[0]))}},[a,n,s,r]}class PE extends yt{constructor(e){super(),Et(this,e,IE,SE,it,{})}}function lh(i,e,t){const n=i.slice();return n[11]=e[t],n}function oh(i){let e,t,n,r,s,a,l,o,u,f,h,d,c;const p=i[7].default,_=Vt(p,i,i[6],null);let m=Ge(i[3]),y=[];for(let O=0;O<m.length;O+=1)y[O]=uh(lh(i,m,O));return{c(){e=Y("div"),t=Y("div"),n=Y("h2"),r=q(i[1]),s=ie(),a=Y("p"),l=q(i[2]),o=ie(),_&&_.c(),u=ie(),f=Y("div");for(let O=0;O<y.length;O+=1)y[O].c();this.h()},l(O){e=J(O,"DIV",{class:!0});var T=Ce(e);t=J(T,"DIV",{class:!0});var N=Ce(t);n=J(N,"H2",{});var g=Ce(n);r=M(g,i[1]),g.forEach(v),s=ae(N),a=J(N,"P",{});var k=Ce(a);l=M(k,i[2]),k.forEach(v),o=ae(N),_&&_.l(N),u=ae(N),f=J(N,"DIV",{class:!0});var w=Ce(f);for(let R=0;R<y.length;R+=1)y[R].l(w);w.forEach(v),N.forEach(v),T.forEach(v),this.h()},h(){ee(f,"class","options svelte-zbcx3u"),ee(t,"class","modal-content center text-center svelte-zbcx3u"),ee(e,"class","modal-overlay svelte-zbcx3u")},m(O,T){C(O,e,T),V(e,t),V(t,n),V(n,r),V(t,s),V(t,a),V(a,l),V(t,o),_&&_.m(t,null),V(t,u),V(t,f);for(let N=0;N<y.length;N+=1)y[N]&&y[N].m(f,null);h=!0,d||(c=[ye(t,"click",Wt(i[8])),ye(e,"click",i[4])],d=!0)},p(O,T){if((!h||T&2)&&we(r,O[1]),(!h||T&4)&&we(l,O[2]),_&&_.p&&(!h||T&64)&&zt(_,p,O,O[6],h?xt(p,O[6],T,null):Ht(O[6]),null),T&40){m=Ge(O[3]);let N;for(N=0;N<m.length;N+=1){const g=lh(O,m,N);y[N]?y[N].p(g,T):(y[N]=uh(g),y[N].c(),y[N].m(f,null))}for(;N<y.length;N+=1)y[N].d(1);y.length=m.length}},i(O){h||(ue(_,O),h=!0)},o(O){de(_,O),h=!1},d(O){O&&v(e),_&&_.d(O),wt(y,O),d=!1,ht(c)}}}function uh(i){let e,t=i[11].label+"",n,r,s,a;function l(){return i[9](i[11])}return{c(){e=Y("button"),n=q(t),r=ie(),this.h()},l(o){e=J(o,"BUTTON",{class:!0});var u=Ce(e);n=M(u,t),r=ae(u),u.forEach(v),this.h()},h(){ee(e,"class","svelte-zbcx3u")},m(o,u){C(o,e,u),V(e,n),V(e,r),s||(a=ye(e,"click",l),s=!0)},p(o,u){i=o,u&8&&t!==(t=i[11].label+"")&&we(n,t)},d(o){o&&v(e),s=!1,a()}}}function RE(i){let e,t,n=i[0]&&oh(i);return{c(){n&&n.c(),e=Re()},l(r){n&&n.l(r),e=Re()},m(r,s){n&&n.m(r,s),C(r,e,s),t=!0},p(r,[s]){r[0]?n?(n.p(r,s),s&1&&ue(n,1)):(n=oh(r),n.c(),ue(n,1),n.m(e.parentNode,e)):n&&(ut(),de(n,1,1,()=>{n=null}),ft())},i(r){t||(ue(n),t=!0)},o(r){de(n),t=!1},d(r){r&&v(e),n&&n.d(r)}}}function FE(i,e,t){let{$$slots:n={},$$scope:r}=e,{is_open:s=!1}=e,{title:a=""}=e,{content:l=""}=e,{options:o=[{label:"Cancel",value:"cancel"}]}=e;const u=ss();function f(){t(0,s=!1)}function h(p){u("close_button_modal",p),f()}function d(p){Fr.call(this,i,p)}const c=p=>h(p);return i.$$set=p=>{"is_open"in p&&t(0,s=p.is_open),"title"in p&&t(1,a=p.title),"content"in p&&t(2,l=p.content),"options"in p&&t(3,o=p.options),"$$scope"in p&&t(6,r=p.$$scope)},[s,a,l,o,f,h,r,n,d,c]}class OE extends yt{constructor(e){super(),Et(this,e,FE,RE,it,{is_open:0,title:1,content:2,options:3})}}function fh(i,e,t){const n=i.slice();return n[63]=e[t],n[65]=t,n}function BE(i){let e,t='This is an (very) alpha-level preview release. Please review and file bugs <a href="https://github.com/d3fend/d3fend/issues/14">here. </a>Early stage <a href="./docs">docs.</a>';return{c(){e=Y("div"),e.innerHTML=t,this.h()},l(n){e=J(n,"DIV",{class:!0,"data-svelte-h":!0}),Ke(e)!=="svelte-x19ykg"&&(e.innerHTML=t),this.h()},h(){ee(e,"class","font-small")},m(n,r){C(n,e,r)},p:Me,d(n){n&&v(e)}}}function ch(i){let e=i[63].message+"",t,n;return{c(){t=q(e),n=Y("br")},l(r){t=M(r,e),n=J(r,"BR",{})},m(r,s){C(r,t,s),C(r,n,s)},p(r,s){s[0]&32&&e!==(e=r[63].message+"")&&we(t,e)},d(r){r&&(v(t),v(n))}}}function LE(i){let e,t="<code>The tool fixed the errors needed to run but here is list of all import errors and warnings.</code>",n,r,s,a,l,o,u,f,h,d=Ge(i[5]),c=[];for(let p=0;p<d.length;p+=1)c[p]=ch(fh(i,d,p));return{c(){e=Y("div"),e.innerHTML=t,n=ie(),r=Y("br"),s=ie(),a=Y("br"),l=ie();for(let p=0;p<c.length;p+=1)c[p].c();o=ie(),u=Y("br"),f=ie(),h=Y("br")},l(p){e=J(p,"DIV",{"data-svelte-h":!0}),Ke(e)!=="svelte-7el432"&&(e.innerHTML=t),n=ae(p),r=J(p,"BR",{}),s=ae(p),a=J(p,"BR",{}),l=ae(p);for(let _=0;_<c.length;_+=1)c[_].l(p);o=ae(p),u=J(p,"BR",{}),f=ae(p),h=J(p,"BR",{})},m(p,_){C(p,e,_),C(p,n,_),C(p,r,_),C(p,s,_),C(p,a,_),C(p,l,_);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(p,_);C(p,o,_),C(p,u,_),C(p,f,_),C(p,h,_)},p(p,_){if(_[0]&32){d=Ge(p[5]);let m;for(m=0;m<d.length;m+=1){const y=fh(p,d,m);c[m]?c[m].p(y,_):(c[m]=ch(y),c[m].c(),c[m].m(o.parentNode,o))}for(;m<c.length;m+=1)c[m].d(1);c.length=d.length}},d(p){p&&(v(e),v(n),v(r),v(s),v(a),v(l),v(o),v(u),v(f),v(h)),wt(c,p)}}}function UE(i){let e;return{c(){e=q("Please only load models from URLs you trust!")},l(t){e=M(t,"Please only load models from URLs you trust!")},m(t,n){C(t,e,n)},d(t){t&&v(e)}}}function jE(i){let e,t,n,r,s,a,l,o,u,f,h;return f=new os({props:{$$slots:{default:[UE]},$$scope:{ctx:i}}}),{c(){e=Y("br"),t=ie(),n=Y("code"),r=q(i[4]),s=ie(),a=Y("br"),l=ie(),o=Y("br"),u=ie(),Be(f.$$.fragment),this.h()},l(d){e=J(d,"BR",{}),t=ae(d),n=J(d,"CODE",{class:!0});var c=Ce(n);r=M(c,i[4]),c.forEach(v),s=ae(d),a=J(d,"BR",{}),l=ae(d),o=J(d,"BR",{}),u=ae(d),Le(f.$$.fragment,d),this.h()},h(){ee(n,"class","center text-center")},m(d,c){C(d,e,c),C(d,t,c),C(d,n,c),V(n,r),C(d,s,c),C(d,a,c),C(d,l,c),C(d,o,c),C(d,u,c),Ue(f,d,c),h=!0},p(d,c){(!h||c[0]&16)&&we(r,d[4]);const p={};c[2]&16&&(p.$$scope={dirty:c,ctx:d}),f.$set(p)},i(d){h||(ue(f.$$.fragment,d),h=!0)},o(d){de(f.$$.fragment,d),h=!1},d(d){d&&(v(e),v(t),v(n),v(s),v(a),v(l),v(o),v(u)),je(f,d)}}}function qE(i){let e;return{c(){e=q("Please only load models from URLs you trust!")},l(t){e=M(t,"Please only load models from URLs you trust!")},m(t,n){C(t,e,n)},d(t){t&&v(e)}}}function ME(i){let e,t,n,r,s,a;return s=new os({props:{$$slots:{default:[qE]},$$scope:{ctx:i}}}),{c(){e=Y("br"),t=ie(),n=Y("br"),r=ie(),Be(s.$$.fragment)},l(l){e=J(l,"BR",{}),t=ae(l),n=J(l,"BR",{}),r=ae(l),Le(s.$$.fragment,l)},m(l,o){C(l,e,o),C(l,t,o),C(l,n,o),C(l,r,o),Ue(s,l,o),a=!0},p(l,o){const u={};o[2]&16&&(u.$$scope={dirty:o,ctx:l}),s.$set(u)},i(l){a||(ue(s.$$.fragment,l),a=!0)},o(l){de(s.$$.fragment,l),a=!1},d(l){l&&(v(e),v(t),v(n),v(r)),je(s,l)}}}function dh(i){let e,t,n,r;return e=new os({props:{alert_type:"warning",$$slots:{default:[VE]},$$scope:{ctx:i}}}),{c(){Be(e.$$.fragment),t=ie(),n=Y("br")},l(s){Le(e.$$.fragment,s),t=ae(s),n=J(s,"BR",{})},m(s,a){Ue(e,s,a),C(s,t,a),C(s,n,a),r=!0},i(s){r||(ue(e.$$.fragment,s),r=!0)},o(s){de(e.$$.fragment,s),r=!1},d(s){s&&(v(t),v(n)),je(e,s)}}}function VE(i){let e;return{c(){e=q("Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},l(t){e=M(t,"Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},m(t,n){C(t,e,n)},d(t){t&&v(e)}}}function zE(i){let e,t,n,r,s=i[15].length+"",a,l,o,u,f,h,d,c,p,_,m="copy",y,O,T,N=i[15].length>2048&&dh(i);return{c(){N&&N.c(),e=ie(),t=Y("div"),n=Y("code"),r=q("The encoded model has a string length of "),a=q(s),l=q(" characters."),o=ie(),u=Y("p"),f=Y("button"),h=Y("a"),d=q("Share URL"),c=ie(),p=Y("span"),_=Y("button"),_.textContent=m,this.h()},l(g){N&&N.l(g),e=ae(g),t=J(g,"DIV",{});var k=Ce(t);n=J(k,"CODE",{});var w=Ce(n);r=M(w,"The encoded model has a string length of "),a=M(w,s),l=M(w," characters."),w.forEach(v),k.forEach(v),o=ae(g),u=J(g,"P",{});var R=Ce(u);f=J(R,"BUTTON",{class:!0});var S=Ce(f);h=J(S,"A",{href:!0});var B=Ce(h);d=M(B,"Share URL"),B.forEach(v),S.forEach(v),c=ae(R),p=J(R,"SPAN",{});var D=Ce(p);_=J(D,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(_)!=="svelte-1uua65l"&&(_.textContent=m),D.forEach(v),R.forEach(v),this.h()},h(){ee(h,"href",i[16]),ee(f,"class","svelte-1vt03ij"),ee(_,"class","svelte-1vt03ij")},m(g,k){N&&N.m(g,k),C(g,e,k),C(g,t,k),V(t,n),V(n,r),V(n,a),V(n,l),C(g,o,k),C(g,u,k),V(u,f),V(f,h),V(h,d),V(u,c),V(u,p),V(p,_),y=!0,O||(T=ye(_,"click",i[38]),O=!0)},p(g,k){g[15].length>2048?N?k[0]&32768&&ue(N,1):(N=dh(g),N.c(),ue(N,1),N.m(e.parentNode,e)):N&&(ut(),de(N,1,1,()=>{N=null}),ft()),(!y||k[0]&32768)&&s!==(s=g[15].length+"")&&we(a,s),(!y||k[0]&65536)&&ee(h,"href",g[16])},i(g){y||(ue(N),y=!0)},o(g){de(N),y=!1},d(g){g&&(v(e),v(t),v(o),v(u)),N&&N.d(g),O=!1,T()}}}function hh(i){let e,t,n,r,s,a=i[6]>1&&ph();return{c(){e=Y("button"),t=q(i[6]),n=q(" import alert"),a&&a.c(),this.h()},l(l){e=J(l,"BUTTON",{class:!0});var o=Ce(e);t=M(o,i[6]),n=M(o," import alert"),a&&a.l(o),o.forEach(v),this.h()},h(){ee(e,"class","svelte-1vt03ij")},m(l,o){C(l,e,o),V(e,t),V(e,n),a&&a.m(e,null),r||(s=ye(e,"click",i[24]),r=!0)},p(l,o){o[0]&64&&we(t,l[6]),l[6]>1?a||(a=ph(),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(l){l&&v(e),a&&a.d(),r=!1,s()}}}function ph(i){let e;return{c(){e=q("s")},l(t){e=M(t,"s")},m(t,n){C(t,e,n)},d(t){t&&v(e)}}}function _h(i){let e,t,n,r,s,a,l;return n=new Pm({props:{display:"inline"}}),{c(){e=Y("span"),t=Y("span"),Be(n.$$.fragment),r=ie(),s=Y("span"),a=q(i[18]),this.h()},l(o){e=J(o,"SPAN",{class:!0});var u=Ce(e);t=J(u,"SPAN",{});var f=Ce(t);Le(n.$$.fragment,f),f.forEach(v),r=ae(u),s=J(u,"SPAN",{});var h=Ce(s);a=M(h,i[18]),h.forEach(v),u.forEach(v),this.h()},h(){ee(e,"class","right")},m(o,u){C(o,e,u),V(e,t),Ue(n,t,null),V(e,r),V(e,s),V(s,a),l=!0},p(o,u){(!l||u[0]&262144)&&we(a,o[18])},i(o){l||(ue(n.$$.fragment,o),l=!0)},o(o){de(n.$$.fragment,o),l=!1},d(o){o&&v(e),je(n)}}}function mh(i){let e,t;return e=new u3({props:{onClick:i[33],id:i[10].id,top:i[10].top,left:i[10].left,right:i[10].right,bottom:i[10].bottom}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,r){const s={};r[0]&1024&&(s.id=n[10].id),r[0]&1024&&(s.top=n[10].top),r[0]&1024&&(s.left=n[10].left),r[0]&1024&&(s.right=n[10].right),r[0]&1024&&(s.bottom=n[10].bottom),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function HE(i){let e,t,n,r,s,a,l;e=new km({props:{position:"top-left"}}),n=new Dm({props:{variant:Am.Dots}});let o=i[10]&&mh(i);return a=new Cm({props:{position:"top-right"}}),{c(){Be(e.$$.fragment),t=ie(),Be(n.$$.fragment),r=ie(),o&&o.c(),s=ie(),Be(a.$$.fragment)},l(u){Le(e.$$.fragment,u),t=ae(u),Le(n.$$.fragment,u),r=ae(u),o&&o.l(u),s=ae(u),Le(a.$$.fragment,u)},m(u,f){Ue(e,u,f),C(u,t,f),Ue(n,u,f),C(u,r,f),o&&o.m(u,f),C(u,s,f),Ue(a,u,f),l=!0},p(u,f){u[10]?o?(o.p(u,f),f[0]&1024&&ue(o,1)):(o=mh(u),o.c(),ue(o,1),o.m(s.parentNode,s)):o&&(ut(),de(o,1,1,()=>{o=null}),ft())},i(u){l||(ue(e.$$.fragment,u),ue(n.$$.fragment,u),ue(o),ue(a.$$.fragment,u),l=!0)},o(u){de(e.$$.fragment,u),de(n.$$.fragment,u),de(o),de(a.$$.fragment,u),l=!1},d(u){u&&(v(t),v(r),v(s)),je(e,u),je(n,u),o&&o.d(u),je(a,u)}}}function xE(i){let e,t;return e=new PE({props:{slot:"connectionLine"}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p:Me,i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function vh(i){let e,t="<b>-</b>",n,r,s="node properties",a,l;return{c(){e=Y("button"),e.innerHTML=t,n=ie(),r=Y("code"),r.textContent=s,this.h()},l(o){e=J(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(e)!=="svelte-1nlkb58"&&(e.innerHTML=t),n=ae(o),r=J(o,"CODE",{class:!0,"data-svelte-h":!0}),Ke(r)!=="svelte-1xrwlep"&&(r.textContent=s),this.h()},h(){ee(e,"class","svelte-1vt03ij"),ee(r,"class","text-center")},m(o,u){C(o,e,u),C(o,n,u),C(o,r,u),a||(l=ye(e,"click",i[44]),a=!0)},p:Me,d(o){o&&(v(e),v(n),v(r)),a=!1,l()}}}function gh(i){let e,t="<b>+</b>",n,r;return{c(){e=Y("button"),e.innerHTML=t,this.h()},l(s){e=J(s,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(e)!=="svelte-efi5au"&&(e.innerHTML=t),this.h()},h(){ee(e,"class","svelte-1vt03ij")},m(s,a){C(s,e,a),n||(r=ye(e,"click",i[45]),n=!0)},p:Me,d(s){s&&v(e),n=!1,r()}}}function XE(i){let e,t,n,r,s,a,l,o,u,f,h,d,c,p,_,m,y,O="Load",T,N,g="Merge",k,w,R="Clear",S,B,D="Save",L,A,I,x="Save As...",j,re="Save As JSON...",Z,$="Save As Turtle...",G,X,oe="Share",Q,le,Ve,ze,ke,Ie,ve,he,Fe,ot,He,fe,Te,dt,Ot,tr,At,$t,Kt,_t,Ct;function Ut(Pe){i[36](Pe)}let Zt={title:i[2].title,content:i[2].content,options:i[2].options,$$slots:{default:[jE]},$$scope:{ctx:i}};i[2].is_open!==void 0&&(Zt.is_open=i[2].is_open),e=new Lc({props:Zt}),Mt.push(()=>_r(e,"is_open",Ut)),e.$on("optionSelected",i[19]);function hr(Pe){i[37](Pe)}let z={title:i[3].title,content:i[3].content,options:i[3].options,$$slots:{default:[ME]},$$scope:{ctx:i}};i[3].is_open!==void 0&&(z.is_open=i[3].is_open),r=new Lc({props:z}),Mt.push(()=>_r(r,"is_open",hr)),r.$on("optionSelected",i[20]);function P(Pe){i[39](Pe)}let F={title:"Share this model with a URL",$$slots:{default:[zE]},$$scope:{ctx:i}};i[14]!==void 0&&(F.is_open=i[14]),l=new p3({props:F}),Mt.push(()=>_r(l,"is_open",P));function W(Pe){i[40](Pe)}let ce={};i[9]!==void 0&&(ce.selectedFile=i[9]),h=new NE({props:ce}),Mt.push(()=>_r(h,"selectedFile",W)),h.$on("fileSelected",i[30]);let Ee=i[6]&&hh(i),Ae=i[18]&&_h(i);Fe=new Em({props:{nodes:Nr,nodeTypes:i[0],edges:la,edgeTypes:i[1],fitView:!0,defaultEdgeOptions:i[21],maxZoom:3,minZoom:.2,$$slots:{connectionLine:[xE],default:[HE]},$$scope:{ctx:i}}}),Fe.$on("dragover",i[27]),Fe.$on("drop",i[29]),Fe.$on("connect",i[28]),Fe.$on("nodecontextmenu",i[32]),Fe.$on("paneclick",i[33]),Fe.$on("onedgecreate",$E),He=new E3({});let Ze=i[17]&&vh(i),at=!i[17]&&gh(i);return At=new N3({}),{c(){Be(e.$$.fragment),n=ie(),Be(r.$$.fragment),a=ie(),Be(l.$$.fragment),u=ie(),f=Y("div"),Be(h.$$.fragment),c=ie(),p=Y("br"),_=ie(),m=Y("div"),y=Y("button"),y.textContent=O,T=ie(),N=Y("button"),N.textContent=g,k=ie(),w=Y("button"),w.textContent=R,S=ie(),B=Y("button"),B.textContent=D,L=ie(),A=Y("select"),I=Y("option"),I.textContent=x,j=Y("option"),j.textContent=re,Z=Y("option"),Z.textContent=$,G=ie(),X=Y("button"),X.textContent=oe,Q=q(`
        filename:    `),le=Y("input"),Ve=ie(),Ee&&Ee.c(),ze=ie(),Ae&&Ae.c(),ke=ie(),Ie=Y("main"),ve=Y("div"),he=Y("div"),Be(Fe.$$.fragment),ot=ie(),Be(He.$$.fragment),Te=ie(),dt=Y("div"),Ze&&Ze.c(),Ot=ie(),at&&at.c(),tr=ie(),Be(At.$$.fragment),this.h()},l(Pe){Le(e.$$.fragment,Pe),n=ae(Pe),Le(r.$$.fragment,Pe),a=ae(Pe),Le(l.$$.fragment,Pe),u=ae(Pe),f=J(Pe,"DIV",{class:!0});var Xe=Ce(f);Le(h.$$.fragment,Xe),Xe.forEach(v),c=ae(Pe),p=J(Pe,"BR",{}),_=ae(Pe),m=J(Pe,"DIV",{id:!0,class:!0});var et=Ce(m);y=J(et,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(y)!=="svelte-r4end6"&&(y.textContent=O),T=ae(et),N=J(et,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(N)!=="svelte-1s1l97g"&&(N.textContent=g),k=ae(et),w=J(et,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(w)!=="svelte-1o4uly3"&&(w.textContent=R),S=ae(et),B=J(et,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(B)!=="svelte-qm8vdx"&&(B.textContent=D),L=ae(et),A=J(et,"SELECT",{class:!0});var ar=Ce(A);I=J(ar,"OPTION",{"data-svelte-h":!0}),Ke(I)!=="svelte-hmrlsb"&&(I.textContent=x),j=J(ar,"OPTION",{"data-svelte-h":!0}),Ke(j)!=="svelte-1q30tr1"&&(j.textContent=re),Z=J(ar,"OPTION",{"data-svelte-h":!0}),Ke(Z)!=="svelte-pf55hp"&&(Z.textContent=$),ar.forEach(v),G=ae(et),X=J(et,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(X)!=="svelte-mqt2ui"&&(X.textContent=oe),Q=M(et,`
        filename:    `),le=J(et,"INPUT",{style:!0,type:!0}),Ve=ae(et),Ee&&Ee.l(et),ze=ae(et),Ae&&Ae.l(et),et.forEach(v),ke=ae(Pe),Ie=J(Pe,"MAIN",{class:!0});var zr=Ce(Ie);ve=J(zr,"DIV",{id:!0,class:!0});var lr=Ce(ve);he=J(lr,"DIV",{id:!0,class:!0});var vr=Ce(he);Le(Fe.$$.fragment,vr),ot=ae(vr),Le(He.$$.fragment,vr),vr.forEach(v),Te=ae(lr),dt=J(lr,"DIV",{class:!0});var Qr=Ce(dt);Ze&&Ze.l(Qr),Ot=ae(Qr),at&&at.l(Qr),tr=ae(Qr),Le(At.$$.fragment,Qr),Qr.forEach(v),lr.forEach(v),zr.forEach(v),this.h()},h(){ee(f,"class","toolbar-examples"),ee(y,"class","svelte-1vt03ij"),ee(N,"class","svelte-1vt03ij"),ee(w,"class","svelte-1vt03ij"),ee(B,"class","svelte-1vt03ij"),I.__value="",$e(I,I.__value),j.__value="json",$e(j,j.__value),Z.__value="turtle",$e(Z,Z.__value),ee(A,"class","save-as-dropdown svelte-1vt03ij"),i[8]===void 0&&tl(()=>i[41].call(A)),ee(X,"class"," svelte-1vt03ij"),gt(le,"width","275px"),ee(le,"type","text"),ee(m,"id","toolbar"),ee(m,"class","svelte-1vt03ij"),ee(he,"id","flow"),ee(he,"class","svelte-1vt03ij"),tl(()=>i[43].call(he)),ee(dt,"class",$t="side-panel "+(i[17]?"open":"close")+" svelte-1vt03ij"),ee(ve,"id","main-container"),ee(ve,"class","svelte-1vt03ij"),ee(Ie,"class","svelte-1vt03ij")},m(Pe,Xe){Ue(e,Pe,Xe),C(Pe,n,Xe),Ue(r,Pe,Xe),C(Pe,a,Xe),Ue(l,Pe,Xe),C(Pe,u,Xe),C(Pe,f,Xe),Ue(h,f,null),C(Pe,c,Xe),C(Pe,p,Xe),C(Pe,_,Xe),C(Pe,m,Xe),V(m,y),V(m,T),V(m,N),V(m,k),V(m,w),V(m,S),V(m,B),V(m,L),V(m,A),V(A,I),V(A,j),V(A,Z),Uo(A,i[8],!0),V(m,G),V(m,X),V(m,Q),V(m,le),$e(le,i[7]),V(m,Ve),Ee&&Ee.m(m,null),V(m,ze),Ae&&Ae.m(m,null),C(Pe,ke,Xe),C(Pe,Ie,Xe),V(Ie,ve),V(ve,he),Ue(Fe,he,null),V(he,ot),Ue(He,he,null),fe=am(he,i[43].bind(he)),V(ve,Te),V(ve,dt),Ze&&Ze.m(dt,null),V(dt,Ot),at&&at.m(dt,null),V(dt,tr),Ue(At,dt,null),Kt=!0,_t||(Ct=[ye(y,"click",i[25]),ye(N,"click",i[26]),ye(w,"click",i[31]),ye(B,"click",i[22]),ye(A,"change",i[41]),ye(A,"change",i[23]),ye(X,"click",i[34]),ye(le,"input",i[42])],_t=!0)},p(Pe,Xe){const et={};Xe[0]&4&&(et.title=Pe[2].title),Xe[0]&4&&(et.content=Pe[2].content),Xe[0]&4&&(et.options=Pe[2].options),Xe[0]&16|Xe[2]&16&&(et.$$scope={dirty:Xe,ctx:Pe}),!t&&Xe[0]&4&&(t=!0,et.is_open=Pe[2].is_open,pr(()=>t=!1)),e.$set(et);const ar={};Xe[0]&8&&(ar.title=Pe[3].title),Xe[0]&8&&(ar.content=Pe[3].content),Xe[0]&8&&(ar.options=Pe[3].options),Xe[2]&16&&(ar.$$scope={dirty:Xe,ctx:Pe}),!s&&Xe[0]&8&&(s=!0,ar.is_open=Pe[3].is_open,pr(()=>s=!1)),r.$set(ar);const zr={};Xe[0]&98304|Xe[2]&16&&(zr.$$scope={dirty:Xe,ctx:Pe}),!o&&Xe[0]&16384&&(o=!0,zr.is_open=Pe[14],pr(()=>o=!1)),l.$set(zr);const lr={};!d&&Xe[0]&512&&(d=!0,lr.selectedFile=Pe[9],pr(()=>d=!1)),h.$set(lr),Xe[0]&256&&Uo(A,Pe[8]),Xe[0]&128&&le.value!==Pe[7]&&$e(le,Pe[7]),Pe[6]?Ee?Ee.p(Pe,Xe):(Ee=hh(Pe),Ee.c(),Ee.m(m,ze)):Ee&&(Ee.d(1),Ee=null),Pe[18]?Ae?(Ae.p(Pe,Xe),Xe[0]&262144&&ue(Ae,1)):(Ae=_h(Pe),Ae.c(),ue(Ae,1),Ae.m(m,null)):Ae&&(ut(),de(Ae,1,1,()=>{Ae=null}),ft());const vr={};Xe[0]&1024|Xe[2]&16&&(vr.$$scope={dirty:Xe,ctx:Pe}),Fe.$set(vr),Pe[17]?Ze?Ze.p(Pe,Xe):(Ze=vh(Pe),Ze.c(),Ze.m(dt,Ot)):Ze&&(Ze.d(1),Ze=null),Pe[17]?at&&(at.d(1),at=null):at?at.p(Pe,Xe):(at=gh(Pe),at.c(),at.m(dt,tr)),(!Kt||Xe[0]&131072&&$t!==($t="side-panel "+(Pe[17]?"open":"close")+" svelte-1vt03ij"))&&ee(dt,"class",$t)},i(Pe){Kt||(ue(e.$$.fragment,Pe),ue(r.$$.fragment,Pe),ue(l.$$.fragment,Pe),ue(h.$$.fragment,Pe),ue(Ae),ue(Fe.$$.fragment,Pe),ue(He.$$.fragment,Pe),ue(At.$$.fragment,Pe),Kt=!0)},o(Pe){de(e.$$.fragment,Pe),de(r.$$.fragment,Pe),de(l.$$.fragment,Pe),de(h.$$.fragment,Pe),de(Ae),de(Fe.$$.fragment,Pe),de(He.$$.fragment,Pe),de(At.$$.fragment,Pe),Kt=!1},d(Pe){Pe&&(v(n),v(a),v(u),v(f),v(c),v(p),v(_),v(m),v(ke),v(Ie)),je(e,Pe),je(r,Pe),je(l,Pe),je(h),Ee&&Ee.d(),Ae&&Ae.d(),je(Fe),je(He),fe(),Ze&&Ze.d(),at&&at.d(),je(At),_t=!1,ht(Ct)}}}function GE(i){let e,t,n,r,s,a,l='D3FEND <span class="snakes">☤</span> <span class="CAD"><span style="color:#e62929;">C</span><span class="A svelte-1vt03ij" style="color:white;text-border:1px;">A</span><span style="color:blue;">D</span></span>',o,u,f,h,d,c,p,_;e=new Rm({props:{title:"D3FEND CAD Tool",og_title:"D3FEND CAD Tool",og_description:"Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios",og_type:"app"}}),u=new os({props:{alert_type:"warning",$$slots:{default:[BE]},$$scope:{ctx:i}}});function m(O){i[35](O)}let y={title:i[6]+" import alerts",$$slots:{default:[LE]},$$scope:{ctx:i}};return i[13]!==void 0&&(y.is_open=i[13]),h=new OE({props:y}),Mt.push(()=>_r(h,"is_open",m)),p=new b3({props:{position:"right",$$slots:{default:[XE]},$$scope:{ctx:i}}}),{c(){Be(e.$$.fragment),t=ie(),n=Y("div"),r=Y("div"),s=Y("div"),a=Y("h1"),a.innerHTML=l,o=ie(),Be(u.$$.fragment),f=ie(),Be(h.$$.fragment),c=ie(),Be(p.$$.fragment),this.h()},l(O){Le(e.$$.fragment,O),t=ae(O),n=J(O,"DIV",{class:!0});var T=Ce(n);r=J(T,"DIV",{style:!0});var N=Ce(r);s=J(N,"DIV",{style:!0});var g=Ce(s);a=J(g,"H1",{class:!0,title:!0,"data-svelte-h":!0}),Ke(a)!=="svelte-xxt2o6"&&(a.innerHTML=l),o=ae(g),Le(u.$$.fragment,g),g.forEach(v),N.forEach(v),T.forEach(v),f=ae(O),Le(h.$$.fragment,O),c=ae(O),Le(p.$$.fragment,O),this.h()},h(){ee(a,"class","fancy-font svelte-1vt03ij"),ee(a,"title","Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios"),gt(s,"text-align","center"),gt(s,"flex-grow","1"),gt(r,"display","flex"),gt(r,"just-content","space-between"),gt(r,"align-items","center"),ee(n,"class","title-egg svelte-1vt03ij")},m(O,T){Ue(e,O,T),C(O,t,T),C(O,n,T),V(n,r),V(r,s),V(s,a),V(s,o),Ue(u,s,null),C(O,f,T),Ue(h,O,T),C(O,c,T),Ue(p,O,T),_=!0},p(O,T){const N={};T[2]&16&&(N.$$scope={dirty:T,ctx:O}),u.$set(N);const g={};T[0]&64&&(g.title=O[6]+" import alerts"),T[0]&32|T[2]&16&&(g.$$scope={dirty:T,ctx:O}),!d&&T[0]&8192&&(d=!0,g.is_open=O[13],pr(()=>d=!1)),h.$set(g);const k={};T[0]&516060|T[2]&16&&(k.$$scope={dirty:T,ctx:O}),p.$set(k)},i(O){_||(ue(e.$$.fragment,O),ue(u.$$.fragment,O),ue(h.$$.fragment,O),ue(p.$$.fragment,O),_=!0)},o(O){de(e.$$.fragment,O),de(u.$$.fragment,O),de(h.$$.fragment,O),de(p.$$.fragment,O),_=!1},d(O){O&&(v(t),v(n),v(f),v(c)),je(e,O),je(u),je(h,O),je(p,O)}}}function $E(i){console.log(i),console.log(i)}function QE(i,e,t){let n,r,s,a;tt(i,om,z=>t(47,n=z)),tt(i,la,z=>t(48,r=z)),tt(i,Nr,z=>t(49,s=z)),tt(i,Pr,z=>t(18,a=z));var l=this&&this.__awaiter||function(z,P,F,W){function ce(Ee){return Ee instanceof F?Ee:new F(function(Ae){Ae(Ee)})}return new(F||(F=Promise))(function(Ee,Ae){function Ze(Xe){try{Pe(W.next(Xe))}catch(et){Ae(et)}}function at(Xe){try{Pe(W.throw(Xe))}catch(et){Ae(et)}}function Pe(Xe){Xe.done?Ee(Xe.value):ce(Xe.value).then(Ze,at)}Pe((W=W.apply(z,P||[])).next())})};const o=new gg({useDefaults:!0,allErrors:!0});let u={is_open:!1,title:"Confirmation to load remote model from URL",content:"This page is instructing D3FEND to remotely load a CAD model from this URL:",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},f={is_open:!1,title:"Confirmation to load remote model from compressed URL",content:"This page is instructing D3FEND to load a CAD model from this URL",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},h;n.url.searchParams.get("load")&&(h=n.url.searchParams.get("load"),u.is_open=!0),n.url.searchParams.get("loadg")&&(f.is_open=!0);function d(z){const P=z.detail;P.value==="load"?(Pr.add("loading remote URL"),I(h),Pr.clear()):P.value}function c(z){const P=z.detail;if(P.value==="load"){Pr.add("loading graph from URL");const F=n.url.searchParams.get("loadg"),W=Wo.uncrush(F);let ce=JSON.parse(W);S(ce),Pr.clear()}else P.value}as(()=>{Pr.add("Mounting app...");try{to.initialize(),Pr.clear()}catch(z){console.error("Failed to initialize Oxigraph in +layout.svelte",z),z.message}});const p={artifactSelectorNode:rE,vulnerabilitySelectorNode:K3,attackSelectorNode:Q3,countermeasureSelectorNode:sE,informationSelectorNode:uE,conditionDefinitionNode:dE,agentSelectorNode:_E,eventNode:bE},_={editableEdge:DE};let m={type:"editableEdge",data:{label:void 0},markerEnd:{type:wh.ArrowClosed}},y,O,T="d3fend-cad.json",N="";function g(){const z=JSON.stringify({nodes:s,edges:r},null,4),P=new Blob([z],{type:"application/json"}),F=window.URL.createObjectURL(P),W=document.createElement("a");W.href=F,W.download=T,t(6,O=0),document.body.appendChild(W),W.click(),document.body.removeChild(W),window.URL.revokeObjectURL(F)}function k(){N==="json"?R():N==="turtle"&&w(),t(8,N="")}function w(){Pr.add("generating ttl file"),console.log("!!! Turtle export engaged !!!"),gw().then(z=>{Pr.clear();const P=new Blob([z],{type:"text/turtle"}),F=window.URL.createObjectURL(P),W=document.createElement("a");W.href=F;let ce=prompt("Enter filename to save as Turtle file",T.replace("json","ttl"));t(6,O=0),ce&&(W.download=ce,document.body.appendChild(W),W.click(),document.body.removeChild(W)),window.URL.revokeObjectURL(F)}).catch(z=>{console.error("Error serializing graph to Turtle: ",z)})}function R(){const z=JSON.stringify({nodes:s,edges:r},null,4),P=new Blob([z],{type:"application/json"}),F=window.URL.createObjectURL(P),W=document.createElement("a");W.href=F;let ce=prompt("Enter filename to save as JSON file",T);t(6,O=0),t(7,T=ce),ce&&(W.download=ce,document.body.appendChild(W),W.click(),document.body.removeChild(W)),window.URL.revokeObjectURL(F)}function S(z){try{const P=o.compile(Vo),F=P(z);t(5,y=P.errors),F||(z=B(P.errors,z));const W=z.nodes,ce=z.edges;Pr.add("loading graph from data..."),xa(W,ce),Pr.clear()}catch(P){console.error("Error parsing JSON:",P)}}function B(z,P){var F=0;t(6,O=z.length),console.log(z);for(var W=0;W<z.length;W++)z[W].params.missingProperty=="user_properties"&&(P.nodes[F].data.user_properties=[],F=F+1);return P}function D(){t(13,he=!0)}function L(z){const P=z.target.files[0];if(P){const F=new FileReader;F.onload=W=>{if(typeof W.target.result=="string"){console.log(W.target.result),t(7,T=P.name),t(7,T=P.name);try{let ce=JSON.parse(W.target.result);const Ee=o.compile(Vo),Ae=Ee(ce);t(5,y=Ee.errors),Ae||(ce=B(Ee.errors,ce));const Ze=ce.nodes,at=ce.edges;xa(Ze,at)}catch(ce){console.error("Error parsing JSON:",ce)}}else console.error("File content is not a string.")},F.onerror=()=>{console.error("Error reading file:",F.error)},F.readAsText(P)}}function A(z){const P=z.target.files[0];if(P){const F=new FileReader;F.onload=W=>{if(typeof W.target.result=="string"){console.log(W.target.result);try{const ce=JSON.parse(W.target.result);Nr.set([...s,...ce.nodes]),la.set([...r,...ce.edges]),alert(` added ${ce.nodes.length} nodes and ${ce.edges.length} edges to the current graph `)}catch(ce){console.error("Error parsing JSON:",ce),alert(`Error parsing JSON:", ${ce}`)}}else console.error("File content is not a string."),alert("File content is not a string.")},F.onerror=()=>{console.error("Error reading file:",F.error),alert(`Error reading file: ${F.error}`)},F.readAsText(P)}}function I(z){return l(this,void 0,void 0,function*(){if(z)try{const F=yield(yield fetch(z)).json(),W=F.nodes,ce=F.edges;xa(W,ce)}catch(P){console.error("Error parsing JSON:",P)}})}function x(){const z=document.createElement("input");z.type="file",z.accept=".json",z.onchange=P=>{L(P)},z.click()}function j(){const z=document.createElement("input");z.type="file",z.accept=".json",z.onchange=P=>{A(P)},z.click()}const{screenToFlowPosition:re}=$m(),Z=z=>{z.preventDefault(),z.dataTransfer&&(z.dataTransfer.dropEffect="move")},$=z=>console.log("handle onConnect",z),G=z=>{if(z.preventDefault(),!z.dataTransfer)return null;const P=z.dataTransfer.getData("application/svelteflow"),F=re({x:z.clientX,y:z.clientY}),W={id:`${Math.random()}`,type:P,position:F,data:{label:null,sequence:"0",user_properties:[]},origin:[.5,0]};s.push(W),Nr.set(s)};function X(z){return l(this,void 0,void 0,function*(){const P=z.detail;t(7,T=P);try{const F=yield fetch(`/resources/cad/examples/${P}`);if(!F.ok)throw new Error(`HTTP error! status: ${F.status}`);const W=yield F.json();console.log("Selected file contents:",W),S(W)}catch(F){console.error("Error fetching JSON file:",F)}})}let oe;function Q(){mw(),t(6,O=0),t(9,oe="Example Graphs"),t(7,T="d3fend-cad.json")}let le,Ve,ze;function ke({detail:{event:z,node:P}}){z.preventDefault();let F=50;t(10,le={id:P.id,top:z.clientY<ze-F?z.clientY:void 0,left:z.clientX<Ve-F?z.clientX:void 0,right:z.clientX>=Ve-F?Ve-z.clientX:void 0,bottom:z.clientY>=ze-F?ze-z.clientY:void 0}),ve({detail:{event:z,node:P}})}function Ie(){t(10,le=null),nt.set(null)}function ve({detail:{event:z,node:P}}){nt.set(P)}let he=!1,Fe=!1,ot,He;function fe(){Pr.add("compressing graph to string..."),t(14,Fe=!0);const z=Wo.crush(JSON.stringify({nodes:s,edges:r}));t(15,ot=encodeURIComponent(z)),t(16,He=n.url.origin+`/cad/?loadg=${ot}`),Pr.clear()}let Te=!1;function dt(z){he=z,t(13,he)}function Ot(z){i.$$.not_equal(u.is_open,z)&&(u.is_open=z,t(2,u))}function tr(z){i.$$.not_equal(f.is_open,z)&&(f.is_open=z,t(3,f))}const At=()=>fm(He);function $t(z){Fe=z,t(14,Fe)}function Kt(z){oe=z,t(9,oe)}function _t(){N=sm(this),t(8,N)}function Ct(){T=this.value,t(7,T)}function Ut(){Ve=this.clientWidth,ze=this.clientHeight,t(11,Ve),t(12,ze)}return[p,_,u,f,h,y,O,T,N,oe,le,Ve,ze,he,Fe,ot,He,Te,a,d,c,m,g,k,D,x,j,Z,$,G,X,Q,ke,Ie,fe,dt,Ot,tr,At,$t,Kt,_t,Ct,Ut,()=>t(17,Te=!Te),()=>t(17,Te=!Te)]}class WE extends yt{constructor(e){super(),Et(this,e,QE,GE,it,{nodeTypes:0,edgeTypes:1},null,[-1,-1,-1])}get nodeTypes(){return this.$$.ctx[0]}get edgeTypes(){return this.$$.ctx[1]}}function YE(i){let e,t;return e=new WE({}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function JE(i){let e,t;return e=new zm({props:{$$slots:{default:[YE]},$$scope:{ctx:i}}}),{c(){Be(e.$$.fragment)},l(n){Le(e.$$.fragment,n)},m(n,r){Ue(e,n,r),t=!0},p(n,[r]){const s={};r&4&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){de(e.$$.fragment,n),t=!1},d(n){je(e,n)}}}function KE(i,e,t){let n,{data:r}=e;return i.$$set=s=>{"data"in s&&t(0,r=s.data)},i.$$.update=()=>{i.$$.dirty&1&&t(1,n=r.remote_d3fend_tree?r.remote_d3fend_tree.map(s=>({...s,children:Cl(s.children,s["rdfs:label"])})):[]),i.$$.dirty&3&&(kh.set(n),Ah.set(r.attack),Dh.set(r.dao),Ch.set(r.events),Th.set(r.weaknesses),Nh.set(r.properties))},[r,n]}class Ck extends yt{constructor(e){super(),Et(this,e,KE,JE,it,{data:0})}}export{Ck as component,bk as universal};

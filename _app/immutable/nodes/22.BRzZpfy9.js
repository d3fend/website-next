const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/jsonld.OPIS_L8g.js","../chunks/_commonjsHelpers.BosuxZz1.js","../chunks/index.HGyOB-Dh.js"])))=>i.map(i=>d[i]);
import{s as Wl}from"../chunks/sortBy.ChsTRid8.js";import{s as Ve,c as Dt,u as Et,g as Tt,a as Ct,am as $_,I as us,e as G,d as W,f as _e,i as m,r as J,k as E,o as Me,ao as ep,E as fl,J as kt,p as pe,b as ee,j as te,as as st,t as M,h as j,l as P,P as fe,a4 as At,ar as en,m as ce,x as xe,W as br,n as Ne,v as qe,L as ot,V as er,D as Ze,O as Ke,Y as os,F as Ir,N as Ie,a3 as bn,w as Pr,al as ba,a0 as Ql,Q as wa,R as ya,ap as ka,ak as tp,aq as rp}from"../chunks/scheduler.xR-uXgLO.js";import{S as it,i as lt,t as re,a as le,g as Xe,e as Ge,c as ve,b as be,m as we,d as ye,f as tr,p as Da}from"../chunks/index.BpaDVXPB.js";import{d as np,w as Wt}from"../chunks/index.iaz6iIjv.js";import{p as ip}from"../chunks/stores.D0jlkqTo.js";import{A as cl}from"../chunks/Alert.BOpypHFQ.js";import{T as qn,b as ke,a as Tc,G as Cc,m as lp,d as tl,o as sp}from"../chunks/lib.Dnh5UBzP.js";import{c as ap,k as up,b as Ea,R as xi,u as zn,X as op,d as Ta,e as Ca,i as fp,g as cp,f as Na,n as Aa,h as Sa,j as dp,p as hp,l as _p,r as pp,H as nt,P as Ye,m as gp,E as mp,o as Nc,q as Yl,S as vp,C as bp,B as wp,a as yp,M as kp}from"../chunks/style.CaV8822o.js";import{g as dl,c as fs}from"../chunks/_commonjsHelpers.BosuxZz1.js";import{r as Dp,b as Ep}from"../chunks/index.HGyOB-Dh.js";import{_ as Tp}from"../chunks/preload-helper.D6kgxu3v.js";import{e as Pe,u as Ia,o as Ra}from"../chunks/each.BfH-wj2E.js";import{G as tn}from"../chunks/_Graph.DX-9CS8B.js";import{t as rl,T as Ac}from"../chunks/ToggleBar.ChYzQEkc.js";import{s as Fa}from"../chunks/index.BxqCZUUx.js";import{f as Un}from"../chunks/utils.xEKteSAW.js";import{f as Cp,c as Np,L as Ap}from"../chunks/Loading.B5hKdNm6.js";import{J as Oa}from"../chunks/JSONCrush.BlUS0oeb.js";import{T as Sp}from"../chunks/Title.lz_tL8Gl.js";function cs(n,r,e=[]){const t=Wl(n,i=>i["rdfs:label"]);for(const i of t)e.push({...i,rootLabel:r}),i.children&&cs(i.children,r,e);return e}function ds(n,r,e){for(const t of e)if(r.test(n[t]))return!0;return!1}function Ip(n,r,e){if(!r)return n||[];const t=r?new RegExp(r,"i"):null,i=s=>t?ds(s,t,e):!0;return n.filter(i)}function Rp(n,r,e){if(!r)return n||[];const t=r?new RegExp(r,"i"):null,i=l=>t?ds(l,t,e):!0;return n.reduce((l,a)=>(l.push({...a,children:a.children.filter(i)}),l),[]).filter(l=>l.children.length>0)}function Fp(n,r,e){const t=[];function i(s){if(ds(s,r,e)&&t.push(s),s.children)for(const l of s.children)i(l)}for(const s of n)i(s);return t}function Op(n,r,e){if(!r)return n||[];const t=new RegExp(r,"i");return Fp(n,t,e)}function Ba(n,r){return[...new Map(n.map(e=>[e[r],e])).values()]}function Bp(n){const r=n.reduce((i,s)=>(i[s["@id"]]=s,i),{});return n.reduce((i,s)=>(s.hasOwnProperty("rdfs:hasSubClass")&&(s.children=s["rdfs:hasSubClass"].map(l=>r[l["@id"]]),i.push(s)),i),[]).filter(i=>i["rdfs:subClassOf"].some(s=>s["@id"]==="d3f:DigitalEvent"))}function Lp(n){const r=n.reduce((t,i)=>(t[i["@id"]]=i,t),{});return n.forEach(t=>{const i=t["rdfs:subPropertyOf"];if(i)for(const s of i)r[s["@id"]]&&(r[s["@id"]].children?r[s["@id"]].children.push(t):r[s["@id"]].children=[t])}),{associated:n.filter(t=>t["rdfs:subPropertyOf"].some(i=>i["@id"]==="d3f:associated-with"))}}async function Pp({fetch:n}){const r=["/api/offensive-technique/all.json","/api/dao/artifacts.json","/api/taxonomies/d3f:DigitalEvent.json","/api/weakness/all.json","/api/ontology/properties/object/all.json"],[{value:{["@graph"]:e}},{value:{["@graph"]:t}},{value:{["@graph"]:i}},{value:{["@graph"]:s}},{value:{["@graph"]:l}}]=await Promise.allSettled(r.map(c=>n(c).then(d=>d.json()))),a=Wl(Ba(e,"rdfs:label"),c=>c["rdfs:label"]),o=Bp(i).map(c=>({...c,children:Ba(cs(c.children,c["rdfs:label"]),"rdfs:label")})),f=Wl(s,c=>c["rdfs:label"]),h=Lp(l);return{attack:a,dao:t,events:o,weaknesses:f,properties:h}}const Db=Object.freeze(Object.defineProperty({__proto__:null,load:Pp},Symbol.toStringTag,{value:"Module"}));function qp(n){let r;const e=n[7].default,t=Dt(e,n,n[6],null);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,s){t&&t.m(i,s),r=!0},p(i,[s]){t&&t.p&&(!r||s&64)&&Et(t,e,i,i[6],r?Ct(e,i[6],s,null):Tt(i[6]),null)},i(i){r||(re(t,i),r=!0)},o(i){le(t,i),r=!1},d(i){t&&t.d(i)}}}function Up(n,r,e){let{$$slots:t={},$$scope:i}=r,{initialNodes:s=void 0}=r,{initialEdges:l=void 0}=r,{initialWidth:a=void 0}=r,{initialHeight:u=void 0}=r,{fitView:o=void 0}=r,{nodeOrigin:f=void 0}=r;const h=ap({nodes:s,edges:l,width:a,height:u,nodeOrigin:f,fitView:o});return $_(up,{getStore:()=>h}),us(()=>{h.reset()}),n.$$set=c=>{"initialNodes"in c&&e(0,s=c.initialNodes),"initialEdges"in c&&e(1,l=c.initialEdges),"initialWidth"in c&&e(2,a=c.initialWidth),"initialHeight"in c&&e(3,u=c.initialHeight),"fitView"in c&&e(4,o=c.fitView),"nodeOrigin"in c&&e(5,f=c.nodeOrigin),"$$scope"in c&&e(6,i=c.$$scope)},[s,l,a,u,o,f,i,t]}class Mp extends it{constructor(r){super(),lt(this,r,Up,qp,Ve,{initialNodes:0,initialEdges:1,initialWidth:2,initialHeight:3,fitView:4,nodeOrigin:5})}}function jp(n){let r,e,t;const i=n[33].default,s=Dt(i,n,n[32],null);return{c(){r=G("div"),s&&s.c(),this.h()},l(l){r=W(l,"DIV",{class:!0,style:!0});var a=_e(r);s&&s.l(a),a.forEach(m),this.h()},h(){J(r,"class",e=Ea(["svelte-flow__resize-control","nodrag",...n[4],n[0],n[1]])),J(r,"style",n[3])},m(l,a){E(l,r,a),s&&s.m(r,null),n[34](r),t=!0},p(l,a){s&&s.p&&(!t||a[1]&2)&&Et(s,i,l,l[32],t?Ct(i,l[32],a,null):Tt(l[32]),null),(!t||a[0]&19&&e!==(e=Ea(["svelte-flow__resize-control","nodrag",...l[4],l[0],l[1]])))&&J(r,"class",e),(!t||a[0]&8)&&J(r,"style",l[3])},i(l){t||(re(s,l),t=!0)},o(l){le(s,l),t=!1},d(l){l&&m(r),s&&s.d(l),n[34](null)}}}function Vp(n,r,e){let t,i,s,l,a,u,o,f,h,c,d,_,w,k,C,U,{$$slots:I={},$$scope:A}=r,{nodeId:b=void 0}=r,{position:y=void 0}=r,{variant:v=xi.Handle}=r,{color:R=void 0}=r,{minWidth:T=10}=r,{minHeight:B=10}=r,{maxWidth:D=Number.MAX_VALUE}=r,{maxHeight:L=Number.MAX_VALUE}=r,{keepAspectRatio:F=!1}=r,{shouldResize:N=void 0}=r,{onResizeStart:H=void 0}=r,{onResize:O=void 0}=r,{onResizeEnd:ne=void 0}=r,{style:Q=""}=r,{class:z=""}=r;const{nodeLookup:Y,snapGrid:x,viewport:$,nodes:V,nodeOrigin:ie}=zn();Me(n,Y,oe=>e(37,w=oe)),Me(n,x,oe=>e(39,C=oe)),Me(n,$,oe=>e(40,U=oe)),Me(n,V,oe=>e(36,_=oe)),Me(n,ie,oe=>e(38,k=oe));const Re=ep("svelteflow__node_id");let Le,he=null;fl(()=>(Le&&e(23,he=op({domNode:Le,nodeId:a,getStoreItems:()=>({nodeLookup:w,transform:[U.x,U.y,U.zoom],snapGrid:C??void 0,snapToGrid:!!C,nodeOrigin:k}),onChange:(oe,Ee)=>{var ft,rt;const $e=(ft=w.get(a))==null?void 0:ft.internals.userNode;if($e){oe.x!==void 0&&oe.y!==void 0&&($e.position={x:oe.x,y:oe.y}),oe.width!==void 0&&oe.height!==void 0&&($e.width=oe.width,$e.height=oe.height);for(const ge of Ee){const Se=(rt=w.get(ge.id))==null?void 0:rt.internals.userNode;Se&&(Se.position=ge.position)}V.set(_)}}})),()=>{he==null||he.destroy()}));function me(oe){kt[oe?"unshift":"push"](()=>{Le=oe,e(2,Le)})}return n.$$set=oe=>{"nodeId"in oe&&e(10,b=oe.nodeId),"position"in oe&&e(11,y=oe.position),"variant"in oe&&e(0,v=oe.variant),"color"in oe&&e(12,R=oe.color),"minWidth"in oe&&e(13,T=oe.minWidth),"minHeight"in oe&&e(14,B=oe.minHeight),"maxWidth"in oe&&e(15,D=oe.maxWidth),"maxHeight"in oe&&e(16,L=oe.maxHeight),"keepAspectRatio"in oe&&e(17,F=oe.keepAspectRatio),"shouldResize"in oe&&e(18,N=oe.shouldResize),"onResizeStart"in oe&&e(19,H=oe.onResizeStart),"onResize"in oe&&e(20,O=oe.onResize),"onResizeEnd"in oe&&e(21,ne=oe.onResizeEnd),"style"in oe&&e(22,Q=oe.style),"class"in oe&&e(1,z=oe.class),"$$scope"in oe&&e(32,A=oe.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&8192&&e(27,t=T??10),n.$$.dirty[0]&16384&&e(26,i=B??10),n.$$.dirty[0]&32768&&e(25,s=D??Number.MAX_VALUE),n.$$.dirty[0]&65536&&e(24,l=L??Number.MAX_VALUE),n.$$.dirty[0]&1024&&(a=typeof b=="string"?b:Re),n.$$.dirty[0]&1&&e(31,u=v===xi.Line?"right":"bottom-right"),n.$$.dirty[0]&2048|n.$$.dirty[1]&1&&e(28,o=y??u),n.$$.dirty[0]&268435456&&e(4,f=o.split("-")),n.$$.dirty[0]&1&&e(30,h=v===xi.Line?"border-color":"background-color"),n.$$.dirty[0]&4194304&&e(29,c=Q??""),n.$$.dirty[0]&1610616832&&e(3,d=R?`${c} ${h}: ${R};`:c),n.$$.dirty[0]&532545536&&(he==null||he.update({controlPosition:o,boundaries:{minWidth:t,minHeight:i,maxWidth:s,maxHeight:l},keepAspectRatio:!!F,onResizeStart:H,onResize:O,onResizeEnd:ne,shouldResize:N}))},[v,z,Le,d,f,Y,x,$,V,ie,b,y,R,T,B,D,L,F,N,H,O,ne,Q,he,l,s,i,t,o,c,h,u,A,I,me]}class Sc extends it{constructor(r){super(),lt(this,r,Vp,jp,Ve,{nodeId:10,position:11,variant:0,color:12,minWidth:13,minHeight:14,maxWidth:15,maxHeight:16,keepAspectRatio:17,shouldResize:18,onResizeStart:19,onResize:20,onResizeEnd:21,style:22,class:1},null,[-1,-1])}}function La(n,r,e){const t=n.slice();return t[20]=r[e],t}function Pa(n,r,e){const t=n.slice();return t[20]=r[e],t}function qa(n){let r=[],e=new Map,t,i=[],s=new Map,l,a,u=Pe(Ta);const o=c=>c[20];for(let c=0;c<u.length;c+=1){let d=Pa(n,u,c),_=o(d);e.set(_,r[c]=Ua(_,d))}let f=Pe(Ca);const h=c=>c[20];for(let c=0;c<f.length;c+=1){let d=La(n,f,c),_=h(d);s.set(_,i[c]=Ma(_,d))}return{c(){for(let c=0;c<r.length;c+=1)r[c].c();t=ee();for(let c=0;c<i.length;c+=1)i[c].c();l=pe()},l(c){for(let d=0;d<r.length;d+=1)r[d].l(c);t=te(c);for(let d=0;d<i.length;d+=1)i[d].l(c);l=pe()},m(c,d){for(let _=0;_<r.length;_+=1)r[_]&&r[_].m(c,d);E(c,t,d);for(let _=0;_<i.length;_+=1)i[_]&&i[_].m(c,d);E(c,l,d),a=!0},p(c,d){d&65521&&(u=Pe(Ta),Xe(),r=Ia(r,d,o,1,c,u,e,t.parentNode,Ra,Ua,t,Pa),Ge()),d&65485&&(f=Pe(Ca),Xe(),i=Ia(i,d,h,1,c,f,s,l.parentNode,Ra,Ma,l,La),Ge())},i(c){if(!a){for(let d=0;d<u.length;d+=1)re(r[d]);for(let d=0;d<f.length;d+=1)re(i[d]);a=!0}},o(c){for(let d=0;d<r.length;d+=1)le(r[d]);for(let d=0;d<i.length;d+=1)le(i[d]);a=!1},d(c){c&&(m(t),m(l));for(let d=0;d<r.length;d+=1)r[d].d(c);for(let d=0;d<i.length;d+=1)i[d].d(c)}}}function Ua(n,r){let e,t,i;return t=new Sc({props:{class:r[4],style:r[5],nodeId:r[0],position:r[20],variant:xi.Line,color:r[6],minWidth:r[12],minHeight:r[13],maxWidth:r[14],maxHeight:r[15],onResizeStart:r[9],keepAspectRatio:r[7],shouldResize:r[8],onResize:r[10],onResizeEnd:r[11]}}),{key:n,first:null,c(){e=pe(),ve(t.$$.fragment),this.h()},l(s){e=pe(),be(t.$$.fragment,s),this.h()},h(){this.first=e},m(s,l){E(s,e,l),we(t,s,l),i=!0},p(s,l){r=s;const a={};l&16&&(a.class=r[4]),l&32&&(a.style=r[5]),l&1&&(a.nodeId=r[0]),l&64&&(a.color=r[6]),l&512&&(a.onResizeStart=r[9]),l&128&&(a.keepAspectRatio=r[7]),l&256&&(a.shouldResize=r[8]),l&1024&&(a.onResize=r[10]),l&2048&&(a.onResizeEnd=r[11]),t.$set(a)},i(s){i||(re(t.$$.fragment,s),i=!0)},o(s){le(t.$$.fragment,s),i=!1},d(s){s&&m(e),ye(t,s)}}}function Ma(n,r){let e,t,i;return t=new Sc({props:{class:r[2],style:r[3],nodeId:r[0],position:r[20],color:r[6],minWidth:r[12],minHeight:r[13],maxWidth:r[14],maxHeight:r[15],onResizeStart:r[9],keepAspectRatio:r[7],shouldResize:r[8],onResize:r[10],onResizeEnd:r[11]}}),{key:n,first:null,c(){e=pe(),ve(t.$$.fragment),this.h()},l(s){e=pe(),be(t.$$.fragment,s),this.h()},h(){this.first=e},m(s,l){E(s,e,l),we(t,s,l),i=!0},p(s,l){r=s;const a={};l&4&&(a.class=r[2]),l&8&&(a.style=r[3]),l&1&&(a.nodeId=r[0]),l&64&&(a.color=r[6]),l&512&&(a.onResizeStart=r[9]),l&128&&(a.keepAspectRatio=r[7]),l&256&&(a.shouldResize=r[8]),l&1024&&(a.onResize=r[10]),l&2048&&(a.onResizeEnd=r[11]),t.$set(a)},i(s){i||(re(t.$$.fragment,s),i=!0)},o(s){le(t.$$.fragment,s),i=!1},d(s){s&&m(e),ye(t,s)}}}function Hp(n){let r,e,t=n[1]&&qa(n);return{c(){t&&t.c(),r=pe()},l(i){t&&t.l(i),r=pe()},m(i,s){t&&t.m(i,s),E(i,r,s),e=!0},p(i,[s]){i[1]?t?(t.p(i,s),s&2&&re(t,1)):(t=qa(i),t.c(),re(t,1),t.m(r.parentNode,r)):t&&(Xe(),le(t,1,1,()=>{t=null}),Ge())},i(i){e||(re(t),e=!0)},o(i){le(t),e=!1},d(i){i&&m(r),t&&t.d(i)}}}function zp(n,r,e){let{nodeId:t=void 0}=r,{isVisible:i=!0}=r,{handleClass:s=void 0}=r,{handleStyle:l=void 0}=r,{lineClass:a=void 0}=r,{lineStyle:u=void 0}=r,{color:o=void 0}=r,{minWidth:f=10}=r,{minHeight:h=10}=r,{maxWidth:c=Number.MAX_VALUE}=r,{maxHeight:d=Number.MAX_VALUE}=r,{keepAspectRatio:_=!1}=r,{shouldResize:w=void 0}=r,{onResizeStart:k=void 0}=r,{onResize:C=void 0}=r,{onResizeEnd:U=void 0}=r,I=f||10,A=h||10,b=c||Number.MAX_VALUE,y=d||Number.MAX_VALUE;return n.$$set=v=>{"nodeId"in v&&e(0,t=v.nodeId),"isVisible"in v&&e(1,i=v.isVisible),"handleClass"in v&&e(2,s=v.handleClass),"handleStyle"in v&&e(3,l=v.handleStyle),"lineClass"in v&&e(4,a=v.lineClass),"lineStyle"in v&&e(5,u=v.lineStyle),"color"in v&&e(6,o=v.color),"minWidth"in v&&e(16,f=v.minWidth),"minHeight"in v&&e(17,h=v.minHeight),"maxWidth"in v&&e(18,c=v.maxWidth),"maxHeight"in v&&e(19,d=v.maxHeight),"keepAspectRatio"in v&&e(7,_=v.keepAspectRatio),"shouldResize"in v&&e(8,w=v.shouldResize),"onResizeStart"in v&&e(9,k=v.onResizeStart),"onResize"in v&&e(10,C=v.onResize),"onResizeEnd"in v&&e(11,U=v.onResizeEnd)},[t,i,s,l,a,u,o,_,w,k,C,U,I,A,b,y,f,h,c,d]}class rn extends it{constructor(r){super(),lt(this,r,zp,Hp,Ve,{nodeId:0,isVisible:1,handleClass:2,handleStyle:3,lineClass:4,lineStyle:5,color:6,minWidth:16,minHeight:17,maxWidth:18,maxHeight:19,keepAspectRatio:7,shouldResize:8,onResizeStart:9,onResize:10,onResizeEnd:11})}}const ja=n=>fp(n);function Xp(){const{zoomIn:n,zoomOut:r,fitView:e,onbeforedelete:t,snapGrid:i,viewport:s,width:l,height:a,minZoom:u,maxZoom:o,panZoom:f,nodes:h,edges:c,domNode:d,nodeLookup:_,edgeLookup:w,nodeOrigin:k}=zn(),C=A=>{var T,B;const b=st(_),y=ja(A)?A:b.get(A.id),v=y.parentId?_p(y.position,y.measured,y.parentId,b,st(k)):y.position,R={id:y.id,position:v,width:((T=y.measured)==null?void 0:T.width)??y.width,height:((B=y.measured)==null?void 0:B.height)??y.height,data:y.data};return Aa(R)},U=(A,b,y={replace:!1})=>{var T;const v=(T=st(_).get(A))==null?void 0:T.internals.userNode;if(!v)return;const R=typeof b=="function"?b(v):b;y.replace?h.update(B=>B.map(D=>D.id===A?ja(R)?R:{...D,...R}:D)):(Object.assign(v,R),h.update(B=>B))},I=A=>st(_).get(A);return{zoomIn:n,zoomOut:r,getInternalNode:I,getNode:A=>{var b;return(b=I(A))==null?void 0:b.internals.userNode},getNodes:A=>A===void 0?st(h):Va(st(_),A),getEdge:A=>st(w).get(A),getEdges:A=>A===void 0?st(c):Va(st(w),A),setZoom:(A,b)=>{const y=st(f);return y?y.scaleTo(A,{duration:b==null?void 0:b.duration}):Promise.resolve(!1)},getZoom:()=>st(s).zoom,setViewport:async(A,b)=>{const y=st(s),v=st(f);return v?(await v.setViewport({x:A.x??y.x,y:A.y??y.y,zoom:A.zoom??y.zoom},{duration:b==null?void 0:b.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>st(s),setCenter:async(A,b,y)=>{const v=typeof(y==null?void 0:y.zoom)<"u"?y.zoom:st(o),R=st(f);return R?(await R.setViewport({x:st(l)/2-A*v,y:st(a)/2-b*v,zoom:v},{duration:y==null?void 0:y.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:e,fitBounds:async(A,b)=>{const y=st(f);if(!y)return Promise.resolve(!1);const v=cp(A,st(l),st(a),st(u),st(o),(b==null?void 0:b.padding)??.1);return await y.setViewport(v,{duration:b==null?void 0:b.duration}),Promise.resolve(!0)},getIntersectingNodes:(A,b=!0,y)=>{const v=Na(A),R=v?A:C(A);return R?(y||st(h)).filter(T=>{const B=st(_).get(T.id);if(!B||!v&&T.id===A.id)return!1;const D=Aa(B),L=Sa(D,R);return b&&L>0||L>=R.width*R.height}):[]},isNodeIntersecting:(A,b,y=!0)=>{const R=Na(A)?A:C(A);if(!R)return!1;const T=Sa(R,b);return y&&T>0||T>=R.width*R.height},deleteElements:async({nodes:A=[],edges:b=[]})=>{const{nodes:y,edges:v}=await dp({nodesToRemove:A,edgesToRemove:b,nodes:st(h),edges:st(c),onBeforeDelete:st(t)});return y&&h.update(R=>R.filter(T=>!y.some(({id:B})=>B===T.id))),v&&c.update(R=>R.filter(T=>!v.some(({id:B})=>B===T.id))),{deletedNodes:y,deletedEdges:v}},screenToFlowPosition:(A,b={snapToGrid:!0})=>{const y=st(d);if(!y)return A;const v=b.snapToGrid?st(i):!1,{x:R,y:T,zoom:B}=st(s),{x:D,y:L}=y.getBoundingClientRect(),F={x:A.x-D,y:A.y-L};return hp(F,[R,T,B],v!==null,v||[1,1])},flowToScreenPosition:A=>{const b=st(d);if(!b)return A;const{x:y,y:v,zoom:R}=st(s),{x:T,y:B}=b.getBoundingClientRect(),D=pp(A,[y,v,R]);return{x:D.x+T,y:D.y+B}},toObject:()=>({nodes:st(h).map(A=>({...A,position:{...A.position},data:{...A.data}})),edges:st(c).map(A=>({...A})),viewport:{...st(s)}}),updateNode:U,updateNodeData:(A,b,y)=>{var T;const v=(T=st(_).get(A))==null?void 0:T.internals.userNode;if(!v)return;const R=typeof b=="function"?b(v):b;v.data=y!=null&&y.replace?R:{...v.data,...R},h.update(B=>B)},viewport:s}}function Va(n,r){var t;const e=[];for(const i of r){const s=n.get(i);if(s){const l="internals"in s?(t=s.internals)==null?void 0:t.userNode:s;e.push(l)}}return e}function Qr(){const{connection:n}=zn();return n}function qr(){const{nodes:n}=zn();return n}function Ur(){const{edges:n}=zn();return n}function Ha(n){const{nodeLookup:r,nodes:e}=zn();return np([r,e],([t])=>t.get(n))}let Ic=Wt([]),Rc=Wt([]),Fc=Wt([]),Oc=Wt([]),Bc=Wt([]),Lc=Wt([]);function Gp(){const{subscribe:n,set:r,update:e}=Wt();return{subscribe:n,update:e,add:t=>r(t),clear:()=>r()}}const sr=Gp();function ar(n){"@babel/helpers - typeof";return ar=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ar(n)}function Wp(n,r){if(ar(n)!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var t=e.call(n,r||"default");if(ar(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function Pc(n){var r=Wp(n,"string");return ar(r)=="symbol"?r:r+""}function za(n,r){for(var e=0;e<r.length;e++){var t=r[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,Pc(t.key),t)}}function wt(n,r,e){return r&&za(n.prototype,r),e&&za(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function yt(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function Qp(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Yr(n,r){if(r&&(ar(r)=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qp(n)}function Rt(n){return Rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rt(n)}function xl(n,r){return xl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xl(n,r)}function Qt(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&xl(n,r)}function De(n,r,e){return(r=Pc(r))in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}var Rr={Literal:1,Collection:3,Graph:4,NamedNode:5,BlankNode:6,Variable:7},mt=function(){function n(r){yt(this,n),De(this,"termType",void 0),De(this,"classOrder",void 0),De(this,"value",void 0),this.value=r}return wt(n,[{key:"substitute",value:function(e){return this}},{key:"compareTerm",value:function(e){return this.classOrder<e.classOrder?-1:this.classOrder>e.classOrder?1:this.value<e.value?-1:this.value>e.value?1:0}},{key:"equals",value:function(e){return e?this.termType===e.termType&&this.value===e.value:!1}},{key:"hashString",value:function(){return this.toCanonical()}},{key:"sameTerm",value:function(e){return this.equals(e)}},{key:"toCanonical",value:function(){return this.toNT()}},{key:"toNT",value:function(){return this.toString()}},{key:"toNQ",value:function(){return this.toNT()}},{key:"toString",value:function(){throw new Error("Node.toString() is abstract - see the subclasses instead")}}])}();De(mt,"fromValue",void 0);De(mt,"toJS",void 0);var Dn="NamedNode",En="BlankNode",Xn="Literal",nn="Variable",wn="DefaultGraph",ln="Collection",qc="Empty",mi="Graph",Xa="text/html",Jl="application/ld+json",Uc="text/n3",Yp="application/n3",Zl="application/nquads",Kl="application/n-quads",xp="application/n-triples",fi="application/rdf+xml",Jp="application/sparql-update",Zp="application/sparql-update-single-match",gn="text/turtle",Kp="application/x-turtle",$l="application/xhtml+xml";function $p(n,r,e){return r=Rt(r),Yr(n,Mc()?Reflect.construct(r,e||[],Rt(n).constructor):r.apply(n,e))}function Mc(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mc=function(){return!!n})()}var Fr=function(n){function r(e){var t;return yt(this,r),t=$p(this,r,[r.getId(e)]),De(t,"termType",En),De(t,"classOrder",Rr.BlankNode),De(t,"isBlank",1),De(t,"isVar",1),t}return Qt(r,n),wt(r,[{key:"id",get:function(){return this.value},set:function(t){this.value=t}},{key:"compareTerm",value:function(t){return this.classOrder<t.classOrder?-1:this.classOrder>t.classOrder?1:this.id<t.id?-1:this.id>t.id?1:0}},{key:"copy",value:function(t){var i=new r;return t.copyTo(this,i),i}},{key:"toCanonical",value:function(){return r.NTAnonymousNodePrefix+this.value}},{key:"toString",value:function(){return r.NTAnonymousNodePrefix+this.id}}],[{key:"getId",value:function(t){if(t){if(typeof t!="string")throw new Error("Bad id argument to new blank node: "+t);if(t.includes("#")){var i=t.split("#");return i[i.length-1]}return t}return"n"+r.nextId++}}])}(mt);De(Fr,"nextId",0);De(Fr,"NTAnonymousNodePrefix","_:");function Rn(n){return typeof n=="string"?n:n.value}function e0(n){return ar(n)==="object"&&n!==null&&"subject"in n}function Ga(n){return ar(n)==="object"&&n!==null&&"statements"in n}function hs(n){return Xr(n)&&n.termType===ln}function t0(n){return n&&Object.prototype.hasOwnProperty.call(n,"termType")&&(n.termType===Dn||n.termType===nn||n.termType===En||n.termType===ln||n.termType===Xn||n.termType===mi)}function r0(n){return n&&Object.prototype.hasOwnProperty.call(n,"termType")&&(n.termType===Dn||n.termType===nn||n.termType===En||n.termType===ln||n.termType===Xn||n.termType===mi)}function n0(n){return Xr(n)&&(n.termType===Dn||n.termType===En||n.termType===nn)}function i0(n){return Xr(n)&&n.termType===nn}function Xr(n){return ar(n)==="object"&&n!==null&&"termType"in n}function jc(n){return n.termType===Xn}function Fn(n){return ar(n)==="object"&&n!==null&&"subject"in n&&"predicate"in n&&"object"in n}function Wa(n){return Xr(n)&&n.termType==="NamedNode"}function l0(n){return Xr(n)&&(n.termType===Dn||n.termType===nn||n.termType===En||n.termType===wn)}function s0(n,r,e){return r=Rt(r),Yr(n,Vc()?Reflect.construct(r,e||[],Rt(n).constructor):r.apply(n,e))}function Vc(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vc=function(){return!!n})()}var Mt=function(n){function r(e){var t;if(yt(this,r),t=s0(this,r,[Rn(e)]),De(t,"termType",Dn),De(t,"classOrder",Rr.NamedNode),!t.value)throw new Error("Missing IRI for NamedNode");if(!t.value.includes(":"))throw new Error('NamedNode IRI "'+e+'" must be absolute.');if(t.value.includes(" ")){var i='Error: NamedNode IRI "'+e+'" must not contain unencoded spaces.';throw new Error(i)}return t}return Qt(r,n),wt(r,[{key:"dir",value:function(){var t=this.value.split("#")[0],i=t.slice(0,-1).lastIndexOf("/"),s=t.indexOf("//");return s>=0&&i<s+2||i<0?null:new r(t.slice(0,i+1))}},{key:"site",value:function(){var t=this.value.split("#")[0],i=t.indexOf("//");if(i<0)throw new Error("This URI does not have a web site part (origin)");var s=t.indexOf("/",i+2);return s<0?new r(t.slice(0)+"/"):new r(t.slice(0,s+1))}},{key:"doc",value:function(){return this.value.indexOf("#")<0?this:new r(this.value.split("#")[0])}},{key:"toString",value:function(){return"<"+this.value+">"}},{key:"id",value:function(){return this.value.split("#")[1]}},{key:"uri",get:function(){return this.value},set:function(t){this.value=t}}],[{key:"fromValue",value:function(t){return typeof t>"u"||t===null||Xr(t)?t:new r(t)}}])}(mt);const Vr={boolean:new Mt("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:new Mt("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:new Mt("http://www.w3.org/2001/XMLSchema#decimal"),double:new Mt("http://www.w3.org/2001/XMLSchema#double"),integer:new Mt("http://www.w3.org/2001/XMLSchema#integer"),langString:new Mt("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:new Mt("http://www.w3.org/2001/XMLSchema#string")};function a0(n,r,e){return r=Rt(r),Yr(n,Hc()?Reflect.construct(r,e||[],Rt(n).constructor):r.apply(n,e))}function Hc(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hc=function(){return!!n})()}var Sr=function(n){function r(e,t,i){var s;return yt(this,r),s=a0(this,r,[e]),De(s,"termType",Xn),De(s,"classOrder",Rr.Literal),De(s,"datatype",Vr.string),De(s,"isVar",0),De(s,"language",""),t?(s.language=t,s.datatype=Vr.langString):i?s.datatype=Mt.fromValue(i):s.datatype=Vr.string,s}return Qt(r,n),wt(r,[{key:"copy",value:function(){return new r(this.value,this.lang,this.datatype)}},{key:"equals",value:function(t){return t?this.termType===t.termType&&this.value===t.value&&this.language===t.language&&(!this.datatype&&!t.datatype||this.datatype&&this.datatype.equals(t.datatype)):!1}},{key:"lang",get:function(){return this.language},set:function(t){this.language=t||""}},{key:"toNT",value:function(){return r.toNT(this)}},{key:"toString",value:function(){return""+this.value}}],[{key:"toNT",value:function(t){if(typeof t.value=="number")return""+t.value;if(typeof t.value!="string")throw new Error("Value of RDF literal is not string or number: "+t.value);var i=t.value;return i=i.replace(/\\/g,"\\\\"),i=i.replace(/\"/g,'\\"'),i=i.replace(/\n/g,"\\n"),i=i.replace(/\r/g,"\\r"),i='"'+i+'"',t.language?i+="@"+t.language:t.datatype.equals(Vr.string)||(i+="^^"+t.datatype.toCanonical()),i}},{key:"fromBoolean",value:function(t){var i=t?"1":"0";return new r(i,null,Vr.boolean)}},{key:"fromDate",value:function(t){if(!(t instanceof Date))throw new TypeError("Invalid argument to Literal.fromDate()");var i=function(a){return(""+(100+a)).slice(1,3)},s=""+t.getUTCFullYear()+"-"+i(t.getUTCMonth()+1)+"-"+i(t.getUTCDate())+"T"+i(t.getUTCHours())+":"+i(t.getUTCMinutes())+":"+i(t.getUTCSeconds())+"Z";return new r(s,null,Vr.dateTime)}},{key:"fromNumber",value:function(t){if(typeof t!="number")throw new TypeError("Invalid argument to Literal.fromNumber()");var i,s=t.toString();return s.indexOf("e")<0&&Math.abs(t)<=Number.MAX_SAFE_INTEGER?i=Number.isInteger(t)?Vr.integer:Vr.decimal:i=Vr.double,new r(s,null,i)}},{key:"fromValue",value:function(t){if(jc(t))return t;switch(ar(t)){case"object":if(t instanceof Date)return r.fromDate(t);case"boolean":return r.fromBoolean(t);case"number":return r.fromNumber(t);case"string":return new r(t)}throw new Error("Can't make literal from "+t+" of type "+ar(t))}}])}(mt);function u0(n,r,e){return r=Rt(r),Yr(n,zc()?Reflect.construct(r,e||[],Rt(n).constructor):r.apply(n,e))}function zc(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zc=function(){return!!n})()}function Xc(n){return typeof n>"u"||n===null||Xr(n)?n:Array.isArray(n)?new $r(n):Sr.fromValue(n)}var $r=function(n){function r(e){var t;return yt(this,r),t=u0(this,r,[(Fr.nextId++).toString()]),De(t,"termType",ln),De(t,"classOrder",Rr.Collection),De(t,"closed",!1),De(t,"compareTerm",Fr.prototype.compareTerm),De(t,"elements",[]),De(t,"isVar",0),e&&e.length>0&&e.forEach(function(i){t.elements.push(Xc(i))}),t}return Qt(r,n),wt(r,[{key:"id",get:function(){return this.value},set:function(t){this.value=t}},{key:"append",value:function(t){return this.elements.push(t)}},{key:"close",value:function(){return this.closed=!0,this.closed}},{key:"shift",value:function(){return this.elements.shift()}},{key:"substitute",value:function(t){var i=this.elements.map(function(s){return s.substitute(t)});return new r(i)}},{key:"toNT",value:function(){return r.toNT(this)}},{key:"toString",value:function(){return"("+this.elements.join(" ")+")"}},{key:"unshift",value:function(t){return this.elements.unshift(t)}}],[{key:"toNT",value:function(t){return Fr.NTAnonymousNodePrefix+t.id}}])}(mt);De($r,"termType",ln);function Qa(n,r,e,t,i,s,l){try{var a=n[s](l),u=a.value}catch(o){return void e(o)}a.done?r(u):Promise.resolve(u).then(t,i)}function Ya(n){return function(){var r=this,e=arguments;return new Promise(function(t,i){var s=n.apply(r,e);function l(u){Qa(s,t,i,l,a,"next",u)}function a(u){Qa(s,t,i,l,a,"throw",u)}l(void 0)})}}var Gc={exports:{}},Wc={exports:{}};(function(n){function r(e){"@babel/helpers - typeof";return n.exports=r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n.exports.__esModule=!0,n.exports.default=n.exports,r(e)}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports})(Wc);var o0=Wc.exports;(function(n){var r=o0.default;function e(){n.exports=e=function(){return i},n.exports.__esModule=!0,n.exports.default=n.exports;var t,i={},s=Object.prototype,l=s.hasOwnProperty,a=Object.defineProperty||function(z,Y,x){z[Y]=x.value},u=typeof Symbol=="function"?Symbol:{},o=u.iterator||"@@iterator",f=u.asyncIterator||"@@asyncIterator",h=u.toStringTag||"@@toStringTag";function c(z,Y,x){return Object.defineProperty(z,Y,{value:x,enumerable:!0,configurable:!0,writable:!0}),z[Y]}try{c({},"")}catch{c=function(x,$,V){return x[$]=V}}function d(z,Y,x,$){var V=Y&&Y.prototype instanceof A?Y:A,ie=Object.create(V.prototype),Re=new ne($||[]);return a(ie,"_invoke",{value:F(z,x,Re)}),ie}function _(z,Y,x){try{return{type:"normal",arg:z.call(Y,x)}}catch($){return{type:"throw",arg:$}}}i.wrap=d;var w="suspendedStart",k="suspendedYield",C="executing",U="completed",I={};function A(){}function b(){}function y(){}var v={};c(v,o,function(){return this});var R=Object.getPrototypeOf,T=R&&R(R(Q([])));T&&T!==s&&l.call(T,o)&&(v=T);var B=y.prototype=A.prototype=Object.create(v);function D(z){["next","throw","return"].forEach(function(Y){c(z,Y,function(x){return this._invoke(Y,x)})})}function L(z,Y){function x(V,ie,Re,Le){var he=_(z[V],z,ie);if(he.type!=="throw"){var me=he.arg,oe=me.value;return oe&&r(oe)=="object"&&l.call(oe,"__await")?Y.resolve(oe.__await).then(function(Ee){x("next",Ee,Re,Le)},function(Ee){x("throw",Ee,Re,Le)}):Y.resolve(oe).then(function(Ee){me.value=Ee,Re(me)},function(Ee){return x("throw",Ee,Re,Le)})}Le(he.arg)}var $;a(this,"_invoke",{value:function(ie,Re){function Le(){return new Y(function(he,me){x(ie,Re,he,me)})}return $=$?$.then(Le,Le):Le()}})}function F(z,Y,x){var $=w;return function(V,ie){if($===C)throw Error("Generator is already running");if($===U){if(V==="throw")throw ie;return{value:t,done:!0}}for(x.method=V,x.arg=ie;;){var Re=x.delegate;if(Re){var Le=N(Re,x);if(Le){if(Le===I)continue;return Le}}if(x.method==="next")x.sent=x._sent=x.arg;else if(x.method==="throw"){if($===w)throw $=U,x.arg;x.dispatchException(x.arg)}else x.method==="return"&&x.abrupt("return",x.arg);$=C;var he=_(z,Y,x);if(he.type==="normal"){if($=x.done?U:k,he.arg===I)continue;return{value:he.arg,done:x.done}}he.type==="throw"&&($=U,x.method="throw",x.arg=he.arg)}}}function N(z,Y){var x=Y.method,$=z.iterator[x];if($===t)return Y.delegate=null,x==="throw"&&z.iterator.return&&(Y.method="return",Y.arg=t,N(z,Y),Y.method==="throw")||x!=="return"&&(Y.method="throw",Y.arg=new TypeError("The iterator does not provide a '"+x+"' method")),I;var V=_($,z.iterator,Y.arg);if(V.type==="throw")return Y.method="throw",Y.arg=V.arg,Y.delegate=null,I;var ie=V.arg;return ie?ie.done?(Y[z.resultName]=ie.value,Y.next=z.nextLoc,Y.method!=="return"&&(Y.method="next",Y.arg=t),Y.delegate=null,I):ie:(Y.method="throw",Y.arg=new TypeError("iterator result is not an object"),Y.delegate=null,I)}function H(z){var Y={tryLoc:z[0]};1 in z&&(Y.catchLoc=z[1]),2 in z&&(Y.finallyLoc=z[2],Y.afterLoc=z[3]),this.tryEntries.push(Y)}function O(z){var Y=z.completion||{};Y.type="normal",delete Y.arg,z.completion=Y}function ne(z){this.tryEntries=[{tryLoc:"root"}],z.forEach(H,this),this.reset(!0)}function Q(z){if(z||z===""){var Y=z[o];if(Y)return Y.call(z);if(typeof z.next=="function")return z;if(!isNaN(z.length)){var x=-1,$=function V(){for(;++x<z.length;)if(l.call(z,x))return V.value=z[x],V.done=!1,V;return V.value=t,V.done=!0,V};return $.next=$}}throw new TypeError(r(z)+" is not iterable")}return b.prototype=y,a(B,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:b,configurable:!0}),b.displayName=c(y,h,"GeneratorFunction"),i.isGeneratorFunction=function(z){var Y=typeof z=="function"&&z.constructor;return!!Y&&(Y===b||(Y.displayName||Y.name)==="GeneratorFunction")},i.mark=function(z){return Object.setPrototypeOf?Object.setPrototypeOf(z,y):(z.__proto__=y,c(z,h,"GeneratorFunction")),z.prototype=Object.create(B),z},i.awrap=function(z){return{__await:z}},D(L.prototype),c(L.prototype,f,function(){return this}),i.AsyncIterator=L,i.async=function(z,Y,x,$,V){V===void 0&&(V=Promise);var ie=new L(d(z,Y,x,$),V);return i.isGeneratorFunction(Y)?ie:ie.next().then(function(Re){return Re.done?Re.value:ie.next()})},D(B),c(B,h,"Generator"),c(B,o,function(){return this}),c(B,"toString",function(){return"[object Generator]"}),i.keys=function(z){var Y=Object(z),x=[];for(var $ in Y)x.push($);return x.reverse(),function V(){for(;x.length;){var ie=x.pop();if(ie in Y)return V.value=ie,V.done=!1,V}return V.done=!0,V}},i.values=Q,ne.prototype={constructor:ne,reset:function(Y){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!Y)for(var x in this)x.charAt(0)==="t"&&l.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=t)},stop:function(){this.done=!0;var Y=this.tryEntries[0].completion;if(Y.type==="throw")throw Y.arg;return this.rval},dispatchException:function(Y){if(this.done)throw Y;var x=this;function $(me,oe){return Re.type="throw",Re.arg=Y,x.next=me,oe&&(x.method="next",x.arg=t),!!oe}for(var V=this.tryEntries.length-1;V>=0;--V){var ie=this.tryEntries[V],Re=ie.completion;if(ie.tryLoc==="root")return $("end");if(ie.tryLoc<=this.prev){var Le=l.call(ie,"catchLoc"),he=l.call(ie,"finallyLoc");if(Le&&he){if(this.prev<ie.catchLoc)return $(ie.catchLoc,!0);if(this.prev<ie.finallyLoc)return $(ie.finallyLoc)}else if(Le){if(this.prev<ie.catchLoc)return $(ie.catchLoc,!0)}else{if(!he)throw Error("try statement without catch or finally");if(this.prev<ie.finallyLoc)return $(ie.finallyLoc)}}}},abrupt:function(Y,x){for(var $=this.tryEntries.length-1;$>=0;--$){var V=this.tryEntries[$];if(V.tryLoc<=this.prev&&l.call(V,"finallyLoc")&&this.prev<V.finallyLoc){var ie=V;break}}ie&&(Y==="break"||Y==="continue")&&ie.tryLoc<=x&&x<=ie.finallyLoc&&(ie=null);var Re=ie?ie.completion:{};return Re.type=Y,Re.arg=x,ie?(this.method="next",this.next=ie.finallyLoc,I):this.complete(Re)},complete:function(Y,x){if(Y.type==="throw")throw Y.arg;return Y.type==="break"||Y.type==="continue"?this.next=Y.arg:Y.type==="return"?(this.rval=this.arg=Y.arg,this.method="return",this.next="end"):Y.type==="normal"&&x&&(this.next=x),I},finish:function(Y){for(var x=this.tryEntries.length-1;x>=0;--x){var $=this.tryEntries[x];if($.finallyLoc===Y)return this.complete($.completion,$.afterLoc),O($),I}},catch:function(Y){for(var x=this.tryEntries.length-1;x>=0;--x){var $=this.tryEntries[x];if($.tryLoc===Y){var V=$.completion;if(V.type==="throw"){var ie=V.arg;O($)}return ie}}throw Error("illegal catch attempt")},delegateYield:function(Y,x,$){return this.delegate={iterator:Q(Y),resultName:x,nextLoc:$},this.method==="next"&&(this.arg=t),I}},i}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(Gc);var f0=Gc.exports,Ji=f0(),c0=Ji;try{regeneratorRuntime=Ji}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Ji:Function("r","regeneratorRuntime = r")(Ji)}const Hi=dl(c0);var ci="chrome:theSession";new Mt(ci);function d0(n,r,e){return r=Rt(r),Yr(n,Qc()?Reflect.construct(r,e||[],Rt(n).constructor):r.apply(n,e))}function Qc(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qc=function(){return!!n})()}var _s=function(n){function r(){var e;return yt(this,r),e=d0(this,r,[""]),De(e,"value",""),De(e,"termType",wn),De(e,"uri",ci),e}return Qt(r,n),wt(r,[{key:"toCanonical",value:function(){return this.value}},{key:"toString",value:function(){return"DefaultGraph"}}])}(mt);function xa(n){return!!n&&n.termType===wn}var h0=new _s,mn=function(){function n(r,e,t,i){yt(this,n),De(this,"subject",void 0),De(this,"predicate",void 0),De(this,"object",void 0),De(this,"graph",void 0),this.subject=mt.fromValue(r),this.predicate=mt.fromValue(e),this.object=mt.fromValue(t),this.graph=i==null?h0:mt.fromValue(i)}return wt(n,[{key:"why",get:function(){return this.graph},set:function(e){this.graph=e}},{key:"equals",value:function(e){return e.subject.equals(this.subject)&&e.predicate.equals(this.predicate)&&e.object.equals(this.object)&&e.graph.equals(this.graph)}},{key:"substitute",value:function(e){var t=new n(this.subject.substitute(e),this.predicate.substitute(e),this.object.substitute(e),xa(this.graph)?this.graph:this.graph.substitute(e));return t}},{key:"toCanonical",value:function(){var e=[this.subject.toCanonical(),this.predicate.toCanonical(),this.object.toCanonical()];return this.graph&&this.graph.termType!==wn&&e.push(this.graph.toCanonical()),e.join(" ")+" ."}},{key:"toNT",value:function(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT()].join(" ")+" ."}},{key:"toNQ",value:function(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT(),xa(this.graph)?"":this.graph.toNT()].join(" ")+" ."}},{key:"toString",value:function(){return this.toNT()}}])}(),Yc=Yc||console.log;function Bn(n){var r;return r=n.indexOf("#"),r<0?n:n.slice(0,r)}function _0(n){var r=/[^\/]*\/\/([^\/]*)\//.exec(n);return r?r[1]:""}function dr(n,r){var e,t,i,s,l,a,u=r.indexOf("#");if(u>0&&(r=r.slice(0,u)),n.length===0)return r;if(n.indexOf("#")===0)return r+n;if(s=n.indexOf(":"),s>=0||(e=r.indexOf(":"),r.length===0))return n;if(e<0)return Yc("Invalid base: "+r+" in join with given: "+n),n;if(t=r.slice(0,+e+1||9e9),n.indexOf("//")===0)return t+n;if(r.indexOf("//",e)===e+1){if(i=r.indexOf("/",e+3),i<0)return r.length-e-3>0?r+"/"+n:t+n}else if(i=r.indexOf("/",e+1),i<0)return r.length-e-1>0?r+"/"+n:t+n;if(n.indexOf("/")===0)return r.slice(0,i)+n;if(a=r.slice(i),l=a.lastIndexOf("/"),l<0)return t+n;for(l>=0&&l<a.length-1&&(a=a.slice(0,+l+1||9e9)),a+=n;a.match(/[^\/]*\/\.\.\//);)a=a.replace(/[^\/]*\/\.\.\//,"");return a=a.replace(/\.\//g,""),a=a.replace(/\/\.$/,"/"),r.slice(0,i)+a}function Ja(n){var r=n.indexOf(":");return r<0?null:n.slice(0,r)}function Rl(n,r){var e,t,i,s,l,a,u,o,f,h,c,d,_,w=new RegExp("^[-_a-zA-Z0-9.]+:(//[^/]*)?/[^/]*$");if(!n)return r;if(n===r)return"";for(t=o=0,l=r.length;o<l;t=++o){var k=r[t];if(k!==n[t])break}if(n.slice(0,t).match(w)&&(i=r.indexOf("//"),i<0&&(i=-2),s=r.indexOf("/",i+2),r[s+1]!=="/"&&n[s+1]!=="/"&&r.slice(0,s)===n.slice(0,s)))return r.slice(s);if(r[t]==="#"&&n.length===t)return r.slice(t);for(;t>0&&r[t-1]!=="/";)t--;if(t<3||n.indexOf("//",t-2)>0||r.indexOf("//",t-2)>0||n.indexOf(":",t)>0)return r;for(u=0,c=n.slice(t),f=0,a=c.length;f<a;f++)e=c[f],e==="/"&&u++;if(u===0&&t<r.length&&r[t]==="#")return"./"+r.slice(t);if(u===0&&t===r.length)return"./";if(_="",u>0)for(h=1,d=u;d>=1?h<=d:h>=d;d>=1?++h:--h)_+="../";return _+r.slice(t)}function p0(n,r,e){return r=Rt(r),Yr(n,xc()?Reflect.construct(r,e||[],Rt(n).constructor):r.apply(n,e))}function xc(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xc=function(){return!!n})()}var yn=function(n){function r(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return yt(this,r),e=p0(this,r,[t]),De(e,"termType",nn),De(e,"base","varid:"),De(e,"classOrder",Rr.Variable),De(e,"isVar",1),De(e,"uri",void 0),e.base="varid:",e.uri=dr(t,e.base),e}return Qt(r,n),wt(r,[{key:"equals",value:function(t){return t?this.termType===t.termType&&this.value===t.value:!1}},{key:"hashString",value:function(){return this.toString()}},{key:"substitute",value:function(t){var i;return(i=t[this.toNT()])!=null?i:this}},{key:"toString",value:function(){return r.toString(this)}}],[{key:"toString",value:function(t){return t.uri.slice(0,t.base.length)===t.base?"?".concat(t.uri.slice(t.base.length)):"?".concat(t.uri)}}])}(mt),Kt=function(n){return n.collections="COLLECTIONS",n.defaultGraphType="DEFAULT_GRAPH_TYPE",n.equalsMethod="EQUALS_METHOD",n.id="ID",n.identity="IDENTITY",n.reversibleId="REVERSIBLE_ID",n.variableType="VARIABLE_TYPE",n}({}),Za=new _s,gr={supports:De(De(De(De(De(De(De({},Kt.collections,!1),Kt.defaultGraphType,!1),Kt.equalsMethod,!0),Kt.identity,!1),Kt.id,!0),Kt.reversibleId,!1),Kt.variableType,!0),blankNode:function(r){return new Fr(r)},defaultGraph:function(){return Za},equals:function(r,e){return r===e||!r||!e?!0:Fn(r)||Fn(e)?Fn(r)&&Fn(e)?this.equals(r.subject,e.subject)&&this.equals(r.predicate,e.predicate)&&this.equals(r.object,e.object)&&this.equals(r.graph,e.graph):!1:Xr(r)&&Xr(e)?this.id(r)===this.id(e):!1},id:function(r){if(!r)return"undefined";if(Fn(r))return this.quadToNQ(r);switch(r.termType){case wn:return"defaultGraph";case nn:return yn.toString(r);default:var e=this.termToNQ(r);if(e)return e;throw new Error("Can't id term with type '".concat(r.termType,"'"))}},isQuad:function(r){return r instanceof mn},literal:function(r,e){if(typeof r!="string"&&!e)return Sr.fromValue(r);var t=typeof r=="string"?r:""+r;return typeof e=="string"?e.indexOf(":")===-1?new Sr(t,e):new Sr(t,null,this.namedNode(e)):new Sr(t,null,e)},namedNode:function(r){return new Mt(r)},quad:function(r,e,t,i){return new mn(r,e,t,i||Za)},triple:function(r,e,t,i){return this.quad(r,e,t,i)},quadToNQ:function(r){return"".concat(this.termToNQ(r.subject)," ").concat(this.termToNQ(r.predicate)," ").concat(this.termToNQ(r.object)," ").concat(this.termToNQ(r.graph)," .")},termToNQ:function(r){var e=this;switch(r.termType){case En:return"_:"+r.value;case wn:return"";case qc:return"<http://www.w3.org/1999/02/22-rdf-syntax-ns#nil>";case Xn:return Sr.toNT(r);case mi:case Dn:return"<"+r.value+">";case ln:return"("+r.elements.map(function(t){return e.termToNQ(t)}).join(" ")+")";default:throw new Error("Can't serialize nonstandard term type (was '".concat(r.termType,"')"))}},toNQ:function(r){return this.isQuad(r)?this.quadToNQ(r):this.termToNQ(r)},variable:function(r){return new yn(r)}},Nr={debug:function(r){},warn:function(r){},info:function(r){},error:function(r){},success:function(r){},msg:function(r){}};function Gt(n,r){var e=r||{namedNode:function(i){return new Mt(i)}};return function(t){return e.namedNode(n+(t||""))}}var sn={},xr={};function g0(n,r,e){if(e===void 0&&(e=Array.prototype),n&&typeof e.find=="function")return e.find.call(n,r);for(var t=0;t<n.length;t++)if(Object.prototype.hasOwnProperty.call(n,t)){var i=n[t];if(r.call(void 0,i,t,n))return i}}function ps(n,r){return r===void 0&&(r=Object),r&&typeof r.freeze=="function"?r.freeze(n):n}function m0(n,r){if(n===null||typeof n!="object")throw new TypeError("target is not an object");for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e]);return n}var Jc=ps({HTML:"text/html",isHTML:function(n){return n===Jc.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),Zc=ps({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(n){return n===Zc.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});xr.assign=m0;xr.find=g0;xr.freeze=ps;xr.MIME_TYPE=Jc;xr.NAMESPACE=Zc;var Kc=xr,Or=Kc.find,di=Kc.NAMESPACE;function v0(n){return n!==""}function b0(n){return n?n.split(/[\t\n\f\r ]+/).filter(v0):[]}function w0(n,r){return n.hasOwnProperty(r)||(n[r]=!0),n}function Ka(n){if(!n)return[];var r=b0(n);return Object.keys(r.reduce(w0,{}))}function y0(n){return function(r){return n&&n.indexOf(r)!==-1}}function vi(n,r){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(r[e]=n[e])}function nr(n,r){var e=n.prototype;if(!(e instanceof r)){let t=function(){};t.prototype=r.prototype,t=new t,vi(e,t),n.prototype=e=t}e.constructor!=n&&(typeof n!="function"&&console.error("unknown Class:"+n),e.constructor=n)}var ir={},mr=ir.ELEMENT_NODE=1,Mn=ir.ATTRIBUTE_NODE=2,nl=ir.TEXT_NODE=3,$c=ir.CDATA_SECTION_NODE=4,ed=ir.ENTITY_REFERENCE_NODE=5,k0=ir.ENTITY_NODE=6,td=ir.PROCESSING_INSTRUCTION_NODE=7,rd=ir.COMMENT_NODE=8,nd=ir.DOCUMENT_NODE=9,id=ir.DOCUMENT_TYPE_NODE=10,Gr=ir.DOCUMENT_FRAGMENT_NODE=11,D0=ir.NOTATION_NODE=12,zt={},qt={};zt.INDEX_SIZE_ERR=(qt[1]="Index size error",1);zt.DOMSTRING_SIZE_ERR=(qt[2]="DOMString size error",2);var $t=zt.HIERARCHY_REQUEST_ERR=(qt[3]="Hierarchy request error",3);zt.WRONG_DOCUMENT_ERR=(qt[4]="Wrong document",4);zt.INVALID_CHARACTER_ERR=(qt[5]="Invalid character",5);zt.NO_DATA_ALLOWED_ERR=(qt[6]="No data allowed",6);zt.NO_MODIFICATION_ALLOWED_ERR=(qt[7]="No modification allowed",7);var ld=zt.NOT_FOUND_ERR=(qt[8]="Not found",8);zt.NOT_SUPPORTED_ERR=(qt[9]="Not supported",9);var $a=zt.INUSE_ATTRIBUTE_ERR=(qt[10]="Attribute in use",10);zt.INVALID_STATE_ERR=(qt[11]="Invalid state",11);zt.SYNTAX_ERR=(qt[12]="Syntax error",12);zt.INVALID_MODIFICATION_ERR=(qt[13]="Invalid modification",13);zt.NAMESPACE_ERR=(qt[14]="Invalid namespace",14);zt.INVALID_ACCESS_ERR=(qt[15]="Invalid access",15);function It(n,r){if(r instanceof Error)var e=r;else e=this,Error.call(this,qt[n]),this.message=qt[n],Error.captureStackTrace&&Error.captureStackTrace(this,It);return e.code=n,r&&(this.message=this.message+": "+r),e}It.prototype=Error.prototype;vi(zt,It);function Hr(){}Hr.prototype={length:0,item:function(n){return n>=0&&n<this.length?this[n]:null},toString:function(n,r){for(var e=[],t=0;t<this.length;t++)Ln(this[t],e,n,r);return e.join("")},filter:function(n){return Array.prototype.filter.call(this,n)},indexOf:function(n){return Array.prototype.indexOf.call(this,n)}};function jn(n,r){this._node=n,this._refresh=r,gs(this)}function gs(n){var r=n._node._inc||n._node.ownerDocument._inc;if(n._inc!==r){var e=n._refresh(n._node);if(md(n,"length",e.length),!n.$$length||e.length<n.$$length)for(var t=e.length;t in n;t++)Object.prototype.hasOwnProperty.call(n,t)&&delete n[t];vi(e,n),n._inc=r}}jn.prototype.item=function(n){return gs(this),this[n]||null};nr(jn,Hr);function il(){}function sd(n,r){for(var e=n.length;e--;)if(n[e]===r)return e}function eu(n,r,e,t){if(t?r[sd(r,t)]=e:r[r.length++]=e,n){e.ownerElement=n;var i=n.ownerDocument;i&&(t&&od(i,n,t),E0(i,n,e))}}function tu(n,r,e){var t=sd(r,e);if(t>=0){for(var i=r.length-1;t<i;)r[t]=r[++t];if(r.length=i,n){var s=n.ownerDocument;s&&(od(s,n,e),e.ownerElement=null)}}else throw new It(ld,new Error(n.tagName+"@"+e))}il.prototype={length:0,item:Hr.prototype.item,getNamedItem:function(n){for(var r=this.length;r--;){var e=this[r];if(e.nodeName==n)return e}},setNamedItem:function(n){var r=n.ownerElement;if(r&&r!=this._ownerElement)throw new It($a);var e=this.getNamedItem(n.nodeName);return eu(this._ownerElement,this,n,e),e},setNamedItemNS:function(n){var r=n.ownerElement,e;if(r&&r!=this._ownerElement)throw new It($a);return e=this.getNamedItemNS(n.namespaceURI,n.localName),eu(this._ownerElement,this,n,e),e},removeNamedItem:function(n){var r=this.getNamedItem(n);return tu(this._ownerElement,this,r),r},removeNamedItemNS:function(n,r){var e=this.getNamedItemNS(n,r);return tu(this._ownerElement,this,e),e},getNamedItemNS:function(n,r){for(var e=this.length;e--;){var t=this[e];if(t.localName==r&&t.namespaceURI==n)return t}return null}};function ad(){}ad.prototype={hasFeature:function(n,r){return!0},createDocument:function(n,r,e){var t=new bi;if(t.implementation=this,t.childNodes=new Hr,t.doctype=e||null,e&&t.appendChild(e),r){var i=t.createElementNS(n,r);t.appendChild(i)}return t},createDocumentType:function(n,r,e){var t=new hl;return t.name=n,t.nodeName=n,t.publicId=r||"",t.systemId=e||"",t}};function ht(){}ht.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(n,r){return ll(this,n,r)},replaceChild:function(n,r){ll(this,n,r,cd),r&&this.removeChild(r)},removeChild:function(n){return fd(this,n)},appendChild:function(n){return this.insertBefore(n,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(n){return es(this.ownerDocument||this,this,n)},normalize:function(){for(var n=this.firstChild;n;){var r=n.nextSibling;r&&r.nodeType==nl&&n.nodeType==nl?(this.removeChild(r),n.appendData(r.data)):(n.normalize(),n=r)}},isSupported:function(n,r){return this.ownerDocument.implementation.hasFeature(n,r)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(n){for(var r=this;r;){var e=r._nsMap;if(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]===n)return t}r=r.nodeType==Mn?r.ownerDocument:r.parentNode}return null},lookupNamespaceURI:function(n){for(var r=this;r;){var e=r._nsMap;if(e&&Object.prototype.hasOwnProperty.call(e,n))return e[n];r=r.nodeType==Mn?r.ownerDocument:r.parentNode}return null},isDefaultNamespace:function(n){var r=this.lookupPrefix(n);return r==null}};function ud(n){return n=="<"&&"&lt;"||n==">"&&"&gt;"||n=="&"&&"&amp;"||n=='"'&&"&quot;"||"&#"+n.charCodeAt()+";"}vi(ir,ht);vi(ir,ht.prototype);function hi(n,r){if(r(n))return!0;if(n=n.firstChild)do if(hi(n,r))return!0;while(n=n.nextSibling)}function bi(){this.ownerDocument=this}function E0(n,r,e){n&&n._inc++;var t=e.namespaceURI;t===di.XMLNS&&(r._nsMap[e.prefix?e.localName:""]=e.value)}function od(n,r,e,t){n&&n._inc++;var i=e.namespaceURI;i===di.XMLNS&&delete r._nsMap[e.prefix?e.localName:""]}function ms(n,r,e){if(n&&n._inc){n._inc++;var t=r.childNodes;if(e)t[t.length++]=e;else{for(var i=r.firstChild,s=0;i;)t[s++]=i,i=i.nextSibling;t.length=s,delete t[t.length]}}}function fd(n,r){var e=r.previousSibling,t=r.nextSibling;return e?e.nextSibling=t:n.firstChild=t,t?t.previousSibling=e:n.lastChild=e,r.parentNode=null,r.previousSibling=null,r.nextSibling=null,ms(n.ownerDocument,n),r}function T0(n){return n&&(n.nodeType===ht.DOCUMENT_NODE||n.nodeType===ht.DOCUMENT_FRAGMENT_NODE||n.nodeType===ht.ELEMENT_NODE)}function C0(n){return n&&(Br(n)||vs(n)||Wr(n)||n.nodeType===ht.DOCUMENT_FRAGMENT_NODE||n.nodeType===ht.COMMENT_NODE||n.nodeType===ht.PROCESSING_INSTRUCTION_NODE)}function Wr(n){return n&&n.nodeType===ht.DOCUMENT_TYPE_NODE}function Br(n){return n&&n.nodeType===ht.ELEMENT_NODE}function vs(n){return n&&n.nodeType===ht.TEXT_NODE}function ru(n,r){var e=n.childNodes||[];if(Or(e,Br)||Wr(r))return!1;var t=Or(e,Wr);return!(r&&t&&e.indexOf(t)>e.indexOf(r))}function nu(n,r){var e=n.childNodes||[];function t(s){return Br(s)&&s!==r}if(Or(e,t))return!1;var i=Or(e,Wr);return!(r&&i&&e.indexOf(i)>e.indexOf(r))}function N0(n,r,e){if(!T0(n))throw new It($t,"Unexpected parent node type "+n.nodeType);if(e&&e.parentNode!==n)throw new It(ld,"child not in parent");if(!C0(r)||Wr(r)&&n.nodeType!==ht.DOCUMENT_NODE)throw new It($t,"Unexpected node type "+r.nodeType+" for parent node type "+n.nodeType)}function A0(n,r,e){var t=n.childNodes||[],i=r.childNodes||[];if(r.nodeType===ht.DOCUMENT_FRAGMENT_NODE){var s=i.filter(Br);if(s.length>1||Or(i,vs))throw new It($t,"More than one element or text in fragment");if(s.length===1&&!ru(n,e))throw new It($t,"Element in fragment can not be inserted before doctype")}if(Br(r)&&!ru(n,e))throw new It($t,"Only one element can be added and only after doctype");if(Wr(r)){if(Or(t,Wr))throw new It($t,"Only one doctype is allowed");var l=Or(t,Br);if(e&&t.indexOf(l)<t.indexOf(e))throw new It($t,"Doctype can only be inserted before an element");if(!e&&l)throw new It($t,"Doctype can not be appended since element is present")}}function cd(n,r,e){var t=n.childNodes||[],i=r.childNodes||[];if(r.nodeType===ht.DOCUMENT_FRAGMENT_NODE){var s=i.filter(Br);if(s.length>1||Or(i,vs))throw new It($t,"More than one element or text in fragment");if(s.length===1&&!nu(n,e))throw new It($t,"Element in fragment can not be inserted before doctype")}if(Br(r)&&!nu(n,e))throw new It($t,"Only one element can be added and only after doctype");if(Wr(r)){if(Or(t,function(u){return Wr(u)&&u!==e}))throw new It($t,"Only one doctype is allowed");var l=Or(t,Br);if(e&&t.indexOf(l)<t.indexOf(e))throw new It($t,"Doctype can only be inserted before an element")}}function ll(n,r,e,t){N0(n,r,e),n.nodeType===ht.DOCUMENT_NODE&&(t||A0)(n,r,e);var i=r.parentNode;if(i&&i.removeChild(r),r.nodeType===Gr){var s=r.firstChild;if(s==null)return r;var l=r.lastChild}else s=l=r;var a=e?e.previousSibling:n.lastChild;s.previousSibling=a,l.nextSibling=e,a?a.nextSibling=s:n.firstChild=s,e==null?n.lastChild=l:e.previousSibling=l;do s.parentNode=n;while(s!==l&&(s=s.nextSibling));return ms(n.ownerDocument||n,n),r.nodeType==Gr&&(r.firstChild=r.lastChild=null),r}function S0(n,r){return r.parentNode&&r.parentNode.removeChild(r),r.parentNode=n,r.previousSibling=n.lastChild,r.nextSibling=null,r.previousSibling?r.previousSibling.nextSibling=r:n.firstChild=r,n.lastChild=r,ms(n.ownerDocument,n,r),r}bi.prototype={nodeName:"#document",nodeType:nd,doctype:null,documentElement:null,_inc:1,insertBefore:function(n,r){if(n.nodeType==Gr){for(var e=n.firstChild;e;){var t=e.nextSibling;this.insertBefore(e,r),e=t}return n}return ll(this,n,r),n.ownerDocument=this,this.documentElement===null&&n.nodeType===mr&&(this.documentElement=n),n},removeChild:function(n){return this.documentElement==n&&(this.documentElement=null),fd(this,n)},replaceChild:function(n,r){ll(this,n,r,cd),n.ownerDocument=this,r&&this.removeChild(r),Br(n)&&(this.documentElement=n)},importNode:function(n,r){return gd(this,n,r)},getElementById:function(n){var r=null;return hi(this.documentElement,function(e){if(e.nodeType==mr&&e.getAttribute("id")==n)return r=e,!0}),r},getElementsByClassName:function(n){var r=Ka(n);return new jn(this,function(e){var t=[];return r.length>0&&hi(e.documentElement,function(i){if(i!==e&&i.nodeType===mr){var s=i.getAttribute("class");if(s){var l=n===s;if(!l){var a=Ka(s);l=r.every(y0(a))}l&&t.push(i)}}}),t})},createElement:function(n){var r=new kn;r.ownerDocument=this,r.nodeName=n,r.tagName=n,r.localName=n,r.childNodes=new Hr;var e=r.attributes=new il;return e._ownerElement=r,r},createDocumentFragment:function(){var n=new _l;return n.ownerDocument=this,n.childNodes=new Hr,n},createTextNode:function(n){var r=new bs;return r.ownerDocument=this,r.appendData(n),r},createComment:function(n){var r=new ws;return r.ownerDocument=this,r.appendData(n),r},createCDATASection:function(n){var r=new ys;return r.ownerDocument=this,r.appendData(n),r},createProcessingInstruction:function(n,r){var e=new Ds;return e.ownerDocument=this,e.tagName=e.nodeName=e.target=n,e.nodeValue=e.data=r,e},createAttribute:function(n){var r=new sl;return r.ownerDocument=this,r.name=n,r.nodeName=n,r.localName=n,r.specified=!0,r},createEntityReference:function(n){var r=new ks;return r.ownerDocument=this,r.nodeName=n,r},createElementNS:function(n,r){var e=new kn,t=r.split(":"),i=e.attributes=new il;return e.childNodes=new Hr,e.ownerDocument=this,e.nodeName=r,e.tagName=r,e.namespaceURI=n,t.length==2?(e.prefix=t[0],e.localName=t[1]):e.localName=r,i._ownerElement=e,e},createAttributeNS:function(n,r){var e=new sl,t=r.split(":");return e.ownerDocument=this,e.nodeName=r,e.name=r,e.namespaceURI=n,e.specified=!0,t.length==2?(e.prefix=t[0],e.localName=t[1]):e.localName=r,e}};nr(bi,ht);function kn(){this._nsMap={}}kn.prototype={nodeType:mr,hasAttribute:function(n){return this.getAttributeNode(n)!=null},getAttribute:function(n){var r=this.getAttributeNode(n);return r&&r.value||""},getAttributeNode:function(n){return this.attributes.getNamedItem(n)},setAttribute:function(n,r){var e=this.ownerDocument.createAttribute(n);e.value=e.nodeValue=""+r,this.setAttributeNode(e)},removeAttribute:function(n){var r=this.getAttributeNode(n);r&&this.removeAttributeNode(r)},appendChild:function(n){return n.nodeType===Gr?this.insertBefore(n,null):S0(this,n)},setAttributeNode:function(n){return this.attributes.setNamedItem(n)},setAttributeNodeNS:function(n){return this.attributes.setNamedItemNS(n)},removeAttributeNode:function(n){return this.attributes.removeNamedItem(n.nodeName)},removeAttributeNS:function(n,r){var e=this.getAttributeNodeNS(n,r);e&&this.removeAttributeNode(e)},hasAttributeNS:function(n,r){return this.getAttributeNodeNS(n,r)!=null},getAttributeNS:function(n,r){var e=this.getAttributeNodeNS(n,r);return e&&e.value||""},setAttributeNS:function(n,r,e){var t=this.ownerDocument.createAttributeNS(n,r);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},getAttributeNodeNS:function(n,r){return this.attributes.getNamedItemNS(n,r)},getElementsByTagName:function(n){return new jn(this,function(r){var e=[];return hi(r,function(t){t!==r&&t.nodeType==mr&&(n==="*"||t.tagName==n)&&e.push(t)}),e})},getElementsByTagNameNS:function(n,r){return new jn(this,function(e){var t=[];return hi(e,function(i){i!==e&&i.nodeType===mr&&(n==="*"||i.namespaceURI===n)&&(r==="*"||i.localName==r)&&t.push(i)}),t})}};bi.prototype.getElementsByTagName=kn.prototype.getElementsByTagName;bi.prototype.getElementsByTagNameNS=kn.prototype.getElementsByTagNameNS;nr(kn,ht);function sl(){}sl.prototype.nodeType=Mn;nr(sl,ht);function wi(){}wi.prototype={data:"",substringData:function(n,r){return this.data.substring(n,n+r)},appendData:function(n){n=this.data+n,this.nodeValue=this.data=n,this.length=n.length},insertData:function(n,r){this.replaceData(n,0,r)},appendChild:function(n){throw new Error(qt[$t])},deleteData:function(n,r){this.replaceData(n,r,"")},replaceData:function(n,r,e){var t=this.data.substring(0,n),i=this.data.substring(n+r);e=t+e+i,this.nodeValue=this.data=e,this.length=e.length}};nr(wi,ht);function bs(){}bs.prototype={nodeName:"#text",nodeType:nl,splitText:function(n){var r=this.data,e=r.substring(n);r=r.substring(0,n),this.data=this.nodeValue=r,this.length=r.length;var t=this.ownerDocument.createTextNode(e);return this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling),t}};nr(bs,wi);function ws(){}ws.prototype={nodeName:"#comment",nodeType:rd};nr(ws,wi);function ys(){}ys.prototype={nodeName:"#cdata-section",nodeType:$c};nr(ys,wi);function hl(){}hl.prototype.nodeType=id;nr(hl,ht);function dd(){}dd.prototype.nodeType=D0;nr(dd,ht);function hd(){}hd.prototype.nodeType=k0;nr(hd,ht);function ks(){}ks.prototype.nodeType=ed;nr(ks,ht);function _l(){}_l.prototype.nodeName="#document-fragment";_l.prototype.nodeType=Gr;nr(_l,ht);function Ds(){}Ds.prototype.nodeType=td;nr(Ds,ht);function _d(){}_d.prototype.serializeToString=function(n,r,e){return pd.call(n,r,e)};ht.prototype.toString=pd;function pd(n,r){var e=[],t=this.nodeType==9&&this.documentElement||this,i=t.prefix,s=t.namespaceURI;if(s&&i==null){var i=t.lookupPrefix(s);if(i==null)var l=[{namespace:s,prefix:null}]}return Ln(this,e,n,r,l),e.join("")}function iu(n,r,e){var t=n.prefix||"",i=n.namespaceURI;if(!i||t==="xml"&&i===di.XML||i===di.XMLNS)return!1;for(var s=e.length;s--;){var l=e[s];if(l.prefix===t)return l.namespace!==i}return!0}function Fl(n,r,e){n.push(" ",r,'="',e.replace(/[<>&"\t\n\r]/g,ud),'"')}function Ln(n,r,e,t,i){if(i||(i=[]),t)if(n=t(n),n){if(typeof n=="string"){r.push(n);return}}else return;switch(n.nodeType){case mr:var s=n.attributes,l=s.length,C=n.firstChild,a=n.tagName;e=di.isHTML(n.namespaceURI)||e;var u=a;if(!e&&!n.prefix&&n.namespaceURI){for(var o,f=0;f<s.length;f++)if(s.item(f).name==="xmlns"){o=s.item(f).value;break}if(!o)for(var h=i.length-1;h>=0;h--){var c=i[h];if(c.prefix===""&&c.namespace===n.namespaceURI){o=c.namespace;break}}if(o!==n.namespaceURI)for(var h=i.length-1;h>=0;h--){var c=i[h];if(c.namespace===n.namespaceURI){c.prefix&&(u=c.prefix+":"+a);break}}}r.push("<",u);for(var d=0;d<l;d++){var _=s.item(d);_.prefix=="xmlns"?i.push({prefix:_.localName,namespace:_.value}):_.nodeName=="xmlns"&&i.push({prefix:"",namespace:_.value})}for(var d=0;d<l;d++){var _=s.item(d);if(iu(_,e,i)){var w=_.prefix||"",k=_.namespaceURI;Fl(r,w?"xmlns:"+w:"xmlns",k),i.push({prefix:w,namespace:k})}Ln(_,r,e,t,i)}if(a===u&&iu(n,e,i)){var w=n.prefix||"",k=n.namespaceURI;Fl(r,w?"xmlns:"+w:"xmlns",k),i.push({prefix:w,namespace:k})}if(C||e&&!/^(?:meta|link|img|br|hr|input)$/i.test(a)){if(r.push(">"),e&&/^script$/i.test(a))for(;C;)C.data?r.push(C.data):Ln(C,r,e,t,i.slice()),C=C.nextSibling;else for(;C;)Ln(C,r,e,t,i.slice()),C=C.nextSibling;r.push("</",u,">")}else r.push("/>");return;case nd:case Gr:for(var C=n.firstChild;C;)Ln(C,r,e,t,i.slice()),C=C.nextSibling;return;case Mn:return Fl(r,n.name,n.value);case nl:return r.push(n.data.replace(/[<&>]/g,ud));case $c:return r.push("<![CDATA[",n.data,"]]>");case rd:return r.push("<!--",n.data,"-->");case id:var U=n.publicId,I=n.systemId;if(r.push("<!DOCTYPE ",n.name),U)r.push(" PUBLIC ",U),I&&I!="."&&r.push(" ",I),r.push(">");else if(I&&I!=".")r.push(" SYSTEM ",I,">");else{var A=n.internalSubset;A&&r.push(" [",A,"]"),r.push(">")}return;case td:return r.push("<?",n.target," ",n.data,"?>");case ed:return r.push("&",n.nodeName,";");default:r.push("??",n.nodeName)}}function gd(n,r,e){var t;switch(r.nodeType){case mr:t=r.cloneNode(!1),t.ownerDocument=n;case Gr:break;case Mn:e=!0;break}if(t||(t=r.cloneNode(!1)),t.ownerDocument=n,t.parentNode=null,e)for(var i=r.firstChild;i;)t.appendChild(gd(n,i,e)),i=i.nextSibling;return t}function es(n,r,e){var t=new r.constructor;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var s=r[i];typeof s!="object"&&s!=t[i]&&(t[i]=s)}switch(r.childNodes&&(t.childNodes=new Hr),t.ownerDocument=n,t.nodeType){case mr:var l=r.attributes,a=t.attributes=new il,u=l.length;a._ownerElement=t;for(var o=0;o<u;o++)t.setAttributeNode(es(n,l.item(o),!0));break;case Mn:e=!0}if(e)for(var f=r.firstChild;f;)t.appendChild(es(n,f,e)),f=f.nextSibling;return t}function md(n,r,e){n[r]=e}try{if(Object.defineProperty){let n=function(r){switch(r.nodeType){case mr:case Gr:var e=[];for(r=r.firstChild;r;)r.nodeType!==7&&r.nodeType!==8&&e.push(n(r)),r=r.nextSibling;return e.join("");default:return r.nodeValue}};Object.defineProperty(jn.prototype,"length",{get:function(){return gs(this),this.$$length}}),Object.defineProperty(ht.prototype,"textContent",{get:function(){return n(this)},set:function(r){switch(this.nodeType){case mr:case Gr:for(;this.firstChild;)this.removeChild(this.firstChild);(r||String(r))&&this.appendChild(this.ownerDocument.createTextNode(r));break;default:this.data=r,this.value=r,this.nodeValue=r}}}),md=function(r,e,t){r["$$"+e]=t}}}catch{}sn.DocumentType=hl;sn.DOMException=It;sn.DOMImplementation=ad;sn.Element=kn;sn.Node=ht;sn.NodeList=Hr;sn.XMLSerializer=_d;var pl={},vd={};(function(n){var r=xr.freeze;n.XML_ENTITIES=r({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),n.HTML_ENTITIES=r({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),n.entityMap=n.HTML_ENTITIES})(vd);var Es={},_i=xr.NAMESPACE,ts=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,lu=new RegExp("[\\-\\.0-9"+ts.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),su=new RegExp("^"+ts.source+lu.source+"*(?::"+ts.source+lu.source+"*)?$"),Kn=0,Jr=1,Cn=2,$n=3,Nn=4,An=5,ei=6,zi=7;function Vn(n,r){this.message=n,this.locator=r,Error.captureStackTrace&&Error.captureStackTrace(this,Vn)}Vn.prototype=new Error;Vn.prototype.name=Vn.name;function bd(){}bd.prototype={parse:function(n,r,e){var t=this.domBuilder;t.startDocument(),wd(r,r={}),I0(n,r,e,t,this.errorHandler),t.endDocument()}};function I0(n,r,e,t,i){function s(O){if(O>65535){O-=65536;var ne=55296+(O>>10),Q=56320+(O&1023);return String.fromCharCode(ne,Q)}else return String.fromCharCode(O)}function l(O){var ne=O.slice(1,-1);return Object.hasOwnProperty.call(e,ne)?e[ne]:ne.charAt(0)==="#"?s(parseInt(ne.substr(1).replace("x","0x"))):(i.error("entity not found:"+O),O)}function a(O){if(O>w){var ne=n.substring(w,O).replace(/&#?\w+;/g,l);c&&u(w),t.characters(ne,0,O-w),w=O}}function u(O,ne){for(;O>=f&&(ne=h.exec(n));)o=ne.index,f=o+ne[0].length,c.lineNumber++;c.columnNumber=O-o+1}for(var o=0,f=0,h=/.*(?:\r\n?|\n)|.*$/g,c=t.locator,d=[{currentNSMap:r}],_={},w=0;;){try{var k=n.indexOf("<",w);if(k<0){if(!n.substr(w).match(/^\s*$/)){var C=t.doc,U=C.createTextNode(n.substr(w));C.appendChild(U),t.currentElement=U}return}switch(k>w&&a(k),n.charAt(k+1)){case"/":var D=n.indexOf(">",k+3),I=n.substring(k+2,D).replace(/[ \t\n\r]+$/g,""),A=d.pop();D<0?(I=n.substring(k+2).replace(/[\s<].*/,""),i.error("end tag name: "+I+" is not complete:"+A.tagName),D=k+1+I.length):I.match(/\s</)&&(I=I.replace(/[\s<].*/,""),i.error("end tag name: "+I+" maybe not complete"),D=k+1+I.length);var b=A.localNSMap,y=A.tagName==I,v=y||A.tagName&&A.tagName.toLowerCase()==I.toLowerCase();if(v){if(t.endElement(A.uri,A.localName,I),b)for(var R in b)Object.prototype.hasOwnProperty.call(b,R)&&t.endPrefixMapping(R);y||i.fatalError("end tag name: "+I+" is not match the current start tagName:"+A.tagName)}else d.push(A);D++;break;case"?":c&&u(k),D=L0(n,k,t);break;case"!":c&&u(k),D=B0(n,k,t,i);break;default:c&&u(k);var T=new yd,B=d[d.length-1].currentNSMap,D=R0(n,k,T,B,l,i),L=T.length;if(!T.closed&&O0(n,D,T.tagName,_)&&(T.closed=!0,e.nbsp||i.warning("unclosed xml attribute")),c&&L){for(var F=au(c,{}),N=0;N<L;N++){var H=T[N];u(H.offset),H.locator=au(c,{})}t.locator=F,uu(T,t,B)&&d.push(T),t.locator=c}else uu(T,t,B)&&d.push(T);_i.isHTML(T.uri)&&!T.closed?D=F0(n,D,T.tagName,l,t):D++}}catch(O){if(O instanceof Vn)throw O;i.error("element parse error: "+O),D=-1}D>w?w=D:a(Math.max(k,w)+1)}}function au(n,r){return r.lineNumber=n.lineNumber,r.columnNumber=n.columnNumber,r}function R0(n,r,e,t,i,s){function l(c,d,_){e.attributeNames.hasOwnProperty(c)&&s.fatalError("Attribute "+c+" redefined"),e.addValue(c,d.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,i),_)}for(var a,u,o=++r,f=Kn;;){var h=n.charAt(o);switch(h){case"=":if(f===Jr)a=n.slice(r,o),f=$n;else if(f===Cn)f=$n;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(f===$n||f===Jr)if(f===Jr&&(s.warning('attribute value must after "="'),a=n.slice(r,o)),r=o+1,o=n.indexOf(h,r),o>0)u=n.slice(r,o),l(a,u,r-1),f=An;else throw new Error("attribute value no end '"+h+"' match");else if(f==Nn)u=n.slice(r,o),l(a,u,r),s.warning('attribute "'+a+'" missed start quot('+h+")!!"),r=o+1,f=An;else throw new Error('attribute value must after "="');break;case"/":switch(f){case Kn:e.setTagName(n.slice(r,o));case An:case ei:case zi:f=zi,e.closed=!0;case Nn:case Jr:break;case Cn:e.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),f==Kn&&e.setTagName(n.slice(r,o)),o;case">":switch(f){case Kn:e.setTagName(n.slice(r,o));case An:case ei:case zi:break;case Nn:case Jr:u=n.slice(r,o),u.slice(-1)==="/"&&(e.closed=!0,u=u.slice(0,-1));case Cn:f===Cn&&(u=a),f==Nn?(s.warning('attribute "'+u+'" missed quot(")!'),l(a,u,r)):((!_i.isHTML(t[""])||!u.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+u+'" missed value!! "'+u+'" instead!!'),l(u,u,r));break;case $n:throw new Error("attribute value missed!!")}return o;case"":h=" ";default:if(h<=" ")switch(f){case Kn:e.setTagName(n.slice(r,o)),f=ei;break;case Jr:a=n.slice(r,o),f=Cn;break;case Nn:var u=n.slice(r,o);s.warning('attribute "'+u+'" missed quot(")!!'),l(a,u,r);case An:f=ei;break}else switch(f){case Cn:e.tagName,(!_i.isHTML(t[""])||!a.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),l(a,a,r),r=o,f=Jr;break;case An:s.warning('attribute space is required"'+a+'"!!');case ei:f=Jr,r=o;break;case $n:f=Nn,r=o;break;case zi:throw new Error("elements closed character '/' and '>' must be connected to")}}o++}}function uu(n,r,e){for(var t=n.tagName,i=null,h=n.length;h--;){var s=n[h],l=s.qName,a=s.value,c=l.indexOf(":");if(c>0)var u=s.prefix=l.slice(0,c),o=l.slice(c+1),f=u==="xmlns"&&o;else o=l,u=null,f=l==="xmlns"&&"";s.localName=o,f!==!1&&(i==null&&(i={},wd(e,e={})),e[f]=i[f]=a,s.uri=_i.XMLNS,r.startPrefixMapping(f,a))}for(var h=n.length;h--;){s=n[h];var u=s.prefix;u&&(u==="xml"&&(s.uri=_i.XML),u!=="xmlns"&&(s.uri=e[u||""]))}var c=t.indexOf(":");c>0?(u=n.prefix=t.slice(0,c),o=n.localName=t.slice(c+1)):(u=null,o=n.localName=t);var d=n.uri=e[u||""];if(r.startElement(d,o,t,n),n.closed){if(r.endElement(d,o,t),i)for(u in i)Object.prototype.hasOwnProperty.call(i,u)&&r.endPrefixMapping(u)}else return n.currentNSMap=e,n.localNSMap=i,!0}function F0(n,r,e,t,i){if(/^(?:script|textarea)$/i.test(e)){var s=n.indexOf("</"+e+">",r),l=n.substring(r+1,s);if(/[&<]/.test(l))return/^script$/i.test(e)?(i.characters(l,0,l.length),s):(l=l.replace(/&#?\w+;/g,t),i.characters(l,0,l.length),s)}return r+1}function O0(n,r,e,t){var i=t[e];return i==null&&(i=n.lastIndexOf("</"+e+">"),i<r&&(i=n.lastIndexOf("</"+e)),t[e]=i),i<r}function wd(n,r){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(r[e]=n[e])}function B0(n,r,e,t){var i=n.charAt(r+2);switch(i){case"-":if(n.charAt(r+3)==="-"){var s=n.indexOf("-->",r+4);return s>r?(e.comment(n,r+4,s-r-4),s+3):(t.error("Unclosed comment"),-1)}else return-1;default:if(n.substr(r+3,6)=="CDATA["){var s=n.indexOf("]]>",r+9);return e.startCDATA(),e.characters(n,r+9,s-r-9),e.endCDATA(),s+3}var l=P0(n,r),a=l.length;if(a>1&&/!doctype/i.test(l[0][0])){var u=l[1][0],o=!1,f=!1;a>3&&(/^public$/i.test(l[2][0])?(o=l[3][0],f=a>4&&l[4][0]):/^system$/i.test(l[2][0])&&(f=l[3][0]));var h=l[a-1];return e.startDTD(u,o,f),e.endDTD(),h.index+h[0].length}}return-1}function L0(n,r,e){var t=n.indexOf("?>",r);if(t){var i=n.substring(r,t).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,e.processingInstruction(i[1],i[2]),t+2):-1}return-1}function yd(){this.attributeNames={}}yd.prototype={setTagName:function(n){if(!su.test(n))throw new Error("invalid tagName:"+n);this.tagName=n},addValue:function(n,r,e){if(!su.test(n))throw new Error("invalid attribute:"+n);this.attributeNames[n]=this.length,this[this.length++]={qName:n,value:r,offset:e}},length:0,getLocalName:function(n){return this[n].localName},getLocator:function(n){return this[n].locator},getQName:function(n){return this[n].qName},getURI:function(n){return this[n].uri},getValue:function(n){return this[n].value}};function P0(n,r){var e,t=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=r,i.exec(n);e=i.exec(n);)if(t.push(e),e[1])return t}Es.XMLReader=bd;Es.ParseError=Vn;var q0=xr,U0=sn,ou=vd,kd=Es,M0=U0.DOMImplementation,fu=q0.NAMESPACE,j0=kd.ParseError,V0=kd.XMLReader;function Dd(n){return n.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function Ed(n){this.options=n||{locator:{}}}Ed.prototype.parseFromString=function(n,r){var e=this.options,t=new V0,i=e.domBuilder||new yi,s=e.errorHandler,l=e.locator,a=e.xmlns||{},u=/\/x?html?$/.test(r),o=u?ou.HTML_ENTITIES:ou.XML_ENTITIES;l&&i.setDocumentLocator(l),t.errorHandler=H0(s,i,l),t.domBuilder=e.domBuilder||i,u&&(a[""]=fu.HTML),a.xml=a.xml||fu.XML;var f=e.normalizeLineEndings||Dd;return n&&typeof n=="string"?t.parse(f(n),a,o):t.errorHandler.error("invalid doc source"),i.doc};function H0(n,r,e){if(!n){if(r instanceof yi)return r;n=r}var t={},i=n instanceof Function;e=e||{};function s(l){var a=n[l];!a&&i&&(a=n.length==2?function(u){n(l,u)}:n),t[l]=a&&function(u){a("[xmldom "+l+"]	"+u+rs(e))}||function(){}}return s("warning"),s("error"),s("fatalError"),t}function yi(){this.cdata=!1}function Sn(n,r){r.lineNumber=n.lineNumber,r.columnNumber=n.columnNumber}yi.prototype={startDocument:function(){this.doc=new M0().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(n,r,e,t){var i=this.doc,s=i.createElementNS(n,e||r),l=t.length;Xi(this,s),this.currentElement=s,this.locator&&Sn(this.locator,s);for(var a=0;a<l;a++){var n=t.getURI(a),u=t.getValue(a),e=t.getQName(a),o=i.createAttributeNS(n,e);this.locator&&Sn(t.getLocator(a),o),o.value=o.nodeValue=u,s.setAttributeNode(o)}},endElement:function(n,r,e){var t=this.currentElement;t.tagName,this.currentElement=t.parentNode},startPrefixMapping:function(n,r){},endPrefixMapping:function(n){},processingInstruction:function(n,r){var e=this.doc.createProcessingInstruction(n,r);this.locator&&Sn(this.locator,e),Xi(this,e)},ignorableWhitespace:function(n,r,e){},characters:function(n,r,e){if(n=cu.apply(this,arguments),n){if(this.cdata)var t=this.doc.createCDATASection(n);else var t=this.doc.createTextNode(n);this.currentElement?this.currentElement.appendChild(t):/^\s*$/.test(n)&&this.doc.appendChild(t),this.locator&&Sn(this.locator,t)}},skippedEntity:function(n){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(n){(this.locator=n)&&(n.lineNumber=0)},comment:function(n,r,e){n=cu.apply(this,arguments);var t=this.doc.createComment(n);this.locator&&Sn(this.locator,t),Xi(this,t)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(n,r,e){var t=this.doc.implementation;if(t&&t.createDocumentType){var i=t.createDocumentType(n,r,e);this.locator&&Sn(this.locator,i),Xi(this,i),this.doc.doctype=i}},warning:function(n){console.warn("[xmldom warning]	"+n,rs(this.locator))},error:function(n){console.error("[xmldom error]	"+n,rs(this.locator))},fatalError:function(n){throw new j0(n,this.locator)}};function rs(n){if(n)return`
@`+(n.systemId||"")+"#[line:"+n.lineNumber+",col:"+n.columnNumber+"]"}function cu(n,r,e){return typeof n=="string"?n.substr(r,e):n.length>=r+e||r?new java.lang.String(n,r,e)+"":n}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(n){yi.prototype[n]=function(){return null}});function Xi(n,r){n.currentElement?n.currentElement.appendChild(r):n.doc.appendChild(r)}pl.__DOMHandler=yi;pl.normalizeLineEndings=Dd;pl.DOMParser=Ed;var du=pl.DOMParser;function z0(n){return n=n.split(";")[0].trim(),new Mt("http://www.w3.org/ns/iana/media-types/"+n+"#Resource")}function X0(n,r){n.callbacks={};for(var e=r.length-1;e>=0;e--)n.callbacks[r[e]]=[];n.addHook=function(t){n.callbacks[t]||(n.callbacks[t]=[])},n.addCallback=function(t,i){n.callbacks[t].push(i)},n.removeCallback=function(t,i){for(var s=0;s<n.callbacks[t].length;s++)if(n.callbacks[t][s].name===i)return n.callbacks[t].splice(s,1),!0;return!1},n.insertCallback=function(t,i){n.callbacks[t].unshift(i)},n.fireCallbacks=function(i,s){var l=[],a=[],u=n.callbacks[i].length,o,f;for(o=u-1;o>=0;o--)f=n.callbacks[i][o],f&&f.apply(n,s)&&l.push(f);for(o=l.length-1;o>=0;o--)a.push(l[o]);for(o=u;o<n.callbacks[i].length;o++)a.push(n.callbacks[i][o]);n.callbacks[i]=a}}function G0(n,r){r=r||{};var e=[];r&&r.selfClosing&&r.selfClosing.split(" ").forEach(function(i){e[i]=!0});var t=[];return r&&r.skipAttributes&&r.skipAttributes.split(" ").forEach(function(i){t[i]=!0}),Td(n,r,e,t)}function Td(n,r,e,t){var i,s="",l=[!1];if(typeof n.nodeType>"u")return s;if(n.nodeType===1){if(n.hasAttribute("class")&&r&&r.classWithChildText&&n.matches(r.classWithChildText.class))s+=n.querySelector(r.classWithChildText.element).textContent;else if(!(r&&r.skipNodeWithClass&&n.matches("."+r.skipNodeWithClass))){var a=n.nodeName.toLowerCase();s+="<"+a;var u=[];for(i=n.attributes.length-1;i>=0;i--){var o=n.attributes[i];if(!(t&&t.length>0&&t[o.name])&&!/^\d+$/.test(o.name)){if(o.name==="class"&&r&&r.replaceClassItemWith&&o.value.split(" ").indexOf(r.replaceClassItemWith.source)>-1){var f=new RegExp(r.replaceClassItemWith.source,"g");o.value=o.value.replace(f,r.replaceClassItemWith.target).trim()}o.name==="class"&&r&&r.skipClassWithValue&&r.skipClassWithValue===o.value||u.push(o.name+"='"+o.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;")+"'")}}if(u.length>0&&(r&&r.sortAttributes&&u.sort(function(c,d){return c.toLowerCase().localeCompare(d.toLowerCase())}),s+=" "+u.join(" ")),e&&e.ename)s+=" />";else{for(s+=">",s+=a==="html"?`
  `:"",l.push(a==="style"||a==="script"),i=0;i<n.childNodes.length;i++)s+=Td(n.childNodes[i]);l.pop(),s+=a==="body"?"</"+a+`>
`:"</"+a+">"}}}else if(n.nodeType===8)s+="<!--"+n.nodeValue+"-->";else if(n.nodeType===3||n.nodeType===4){var h=n.nodeValue.replace(/\n+$/,"");s+=l[l.length-1]?h:h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}else console.log("Warning; Cannot handle serialising nodes of type: "+n.nodeType),console.log(n);return s}function Ol(n,r,e,t){var i=function(u){return u.termType==="BlankNode"?null:u},s=function(u){var o=e.statementsMatching(u).map(function(f){return""+i(f.subject)+" "+i(f.predicate)+" "+i(f.object)}).concat(e.statementsMatching(void 0,void 0,u).map(function(f){return""+i(f.subject)+" "+i(f.predicate)+" "+i(f.object)}));return o.sort(),o.join(`
`)},l=Object.prototype.hasOwnProperty.call(e,"compareTerms")?e.compareTerms(n,r):n.compareTerm(r);return n.termType==="BlankNode"&&r.termType==="BlankNode"?l===0?0:s(n)>s(r)?1:s(n)<s(r)?-1:l:t&&n.uri&&r.uri?(t[n.uri]||n.uri).localeCompare(t[r.uri]||r.uri):l}function W0(n,r,e,t){return Ol(n.subject,r.subject,e,t)||Ol(n.predicate,r.predicate,e,t)||Ol(n.object,r.object,e,t)}function Pn(n,r){var e;if(r=r||{},typeof module<"u"&&module&&module.exports){var t=new du().parseFromString(n,r.contentType||"application/xhtml+xml");return t}else typeof window<"u"&&window.DOMParser?e=new window.DOMParser:e=new du;return e.parseFromString(n,"application/xml")}function Q0(n,r){for(var e=0;e<n.length;e++)if(n[e].subject.equals(r.subject)&&n[e].predicate.equals(r.predicate)&&n[e].object.equals(r.object)&&n[e].why.equals(r.why)){n.splice(e,1);return}throw new Error("RDFArrayRemove: Array did not contain "+r+" "+r.why)}function Cd(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gr;return{boolean:n.namedNode("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:n.namedNode("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:n.namedNode("http://www.w3.org/2001/XMLSchema#decimal"),double:n.namedNode("http://www.w3.org/2001/XMLSchema#double"),integer:n.namedNode("http://www.w3.org/2001/XMLSchema#integer"),langString:n.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:n.namedNode("http://www.w3.org/2001/XMLSchema#string")}}Cd(gr);const hu={acl:"http://www.w3.org/ns/auth/acl#",arg:"http://www.w3.org/ns/pim/arg#",as:"https://www.w3.org/ns/activitystreams#",cal:"http://www.w3.org/2002/12/cal/ical#",cert:"http://www.w3.org/ns/auth/cert#",contact:"http://www.w3.org/2000/10/swap/pim/contact#",dc:"http://purl.org/dc/elements/1.1/",dct:"http://purl.org/dc/terms/",doap:"http://usefulinc.com/ns/doap#",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",gpx:"http://www.w3.org/ns/pim/gpx#",http:"http://www.w3.org/2007/ont/http#",httph:"http://www.w3.org/2007/ont/httph#",icalTZ:"http://www.w3.org/2002/12/cal/icaltzd#",ldp:"http://www.w3.org/ns/ldp#",link:"http://www.w3.org/2007/ont/link#",log:"http://www.w3.org/2000/10/swap/log#",meeting:"http://www.w3.org/ns/pim/meeting#",mo:"http://purl.org/ontology/mo/",org:"http://www.w3.org/ns/org#",owl:"http://www.w3.org/2002/07/owl#",pad:"http://www.w3.org/ns/pim/pad#",patch:"http://www.w3.org/ns/pim/patch#",prov:"http://www.w3.org/ns/prov#",qu:"http://www.w3.org/2000/10/swap/pim/qif#",trip:"http://www.w3.org/ns/pim/trip#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rss:"http://purl.org/rss/1.0/",sched:"http://www.w3.org/ns/pim/schedule#",schema:"http://schema.org/",sioc:"http://rdfs.org/sioc/ns#",solid:"http://www.w3.org/ns/solid/terms#",space:"http://www.w3.org/ns/pim/space#",stat:"http://www.w3.org/ns/posix/stat#",tab:"http://www.w3.org/2007/ont/link#",tabont:"http://www.w3.org/2007/ont/link#",ui:"http://www.w3.org/ns/ui#",vcard:"http://www.w3.org/2006/vcard/ns#",wf:"http://www.w3.org/2005/01/wf/flow#",xsd:"http://www.w3.org/2001/XMLSchema#",cco:"http://www.ontologyrepository.com/CommonCoreOntologies/",skos:"http://www.w3.org/2004/02/skos/core#",bookmark:"http://www.w3.org/2002/01/bookmark#",vann:"http://purl.org/vocab/vann/"};function Y0(n={namedNode:r=>r}){const r={};for(const e in hu){const t=hu[e];r[e]=function(i=""){return n.namedNode(t+i)}}return r}var x0=Y0;const _u=dl(x0);var Nd={exports:{}};(function(n){(function(r,e){n.exports?n.exports=e():r.ttl2jsonld=e()})(fs,function(){function r(i,s){function l(){this.constructor=i}l.prototype=s.prototype,i.prototype=new l}function e(i,s,l,a){this.message=i,this.expected=s,this.found=l,this.location=a,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,e)}r(e,Error),e.buildMessage=function(i,s){var l={literal:function(d){return'"'+u(d.text)+'"'},class:function(d){var _="",w;for(w=0;w<d.parts.length;w++)_+=d.parts[w]instanceof Array?o(d.parts[w][0])+"-"+o(d.parts[w][1]):o(d.parts[w]);return"["+(d.inverted?"^":"")+_+"]"},any:function(d){return"any character"},end:function(d){return"end of input"},other:function(d){return d.description}};function a(d){return d.charCodeAt(0).toString(16).toUpperCase()}function u(d){return d.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+a(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+a(_)})}function o(d){return d.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+a(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+a(_)})}function f(d){return l[d.type](d)}function h(d){var _=new Array(d.length),w,k;for(w=0;w<d.length;w++)_[w]=f(d[w]);if(_.sort(),_.length>0){for(w=1,k=1;w<_.length;w++)_[w-1]!==_[w]&&(_[k]=_[w],k++);_.length=k}switch(_.length){case 1:return _[0];case 2:return _[0]+" or "+_[1];default:return _.slice(0,-1).join(", ")+", or "+_[_.length-1]}}function c(d){return d?'"'+u(d)+'"':"end of input"}return"Expected "+h(i)+" but "+c(s)+" found."};function t(i,s){s=s!==void 0?s:{};var l={},a={turtleDoc:ua},u=ua,o=function(p){var S=ct.toJSON();return S["@graph"]=[],p.filter(q=>Array.isArray(q)).forEach(q=>{q.forEach(X=>{S["@graph"].push(X)})}),S["@graph"].length===1&&(Object.assign(S,S["@graph"][0]),delete S["@graph"]),S},f=".",h=tt(".",!1),c=function(p){return p},d="#",_=tt("#",!1),w=/^[^\n]/,k=_t([`
`],!0,!1),C=`
`,U=tt(`
`,!1),I=function(p){return p.join("")},A="@prefix",b=tt("@prefix",!1),y=function(p,S){return ct.addPrefix(p===""?"0":p,S),{}},v="@base",R=tt("@base",!1),T=function(p){return ct.addBase(p),{}},B=/^[Bb]/,D=_t(["B","b"],!1,!1),L=/^[Aa]/,F=_t(["A","a"],!1,!1),N=/^[Ss]/,H=_t(["S","s"],!1,!1),O=/^[Ee]/,ne=_t(["E","e"],!1,!1),Q=/^[Pp]/,z=_t(["P","p"],!1,!1),Y=/^[Rr]/,x=_t(["R","r"],!1,!1),$=/^[Ff]/,V=_t(["F","f"],!1,!1),ie=/^[Ii]/,Re=_t(["I","i"],!1,!1),Le=/^[Xx]/,he=_t(["X","x"],!1,!1),me=function(p,S){var q={};return typeof p=="string"&&p!=="[]"?q["@id"]=p:typeof p=="object"&&Object.assign(q,p),S&&Object.assign(q,S),[q]},oe=function(p,S){var q={};return p&&Object.assign(q,p),S&&Object.assign(q,S),[q]},Ee=";",$e=tt(";",!1),ft=function(p,S,q,X){var Z={};return Z[q]=X,Z},rt=function(p,S,q){return q},ge=function(p,S,q){var X={};return q.unshift(K_(p,S)),q.forEach(Z=>{Z&&Object.keys(Z).forEach(se=>{Z[se].forEach(ae=>{se==="@type"&&ae["@id"]!==void 0&&(ae=ae["@id"]),X[se]===void 0?X[se]=ae:Array.isArray(X[se])?X[se].push(ae):X[se]=[X[se],ae]})})}),X},Se=",",lr=tt(",",!1),jt=function(p,S){return S},Yt=function(p,S){return S.unshift(p),S},wr="a",Te=tt("a",!1),We=function(){return"@type"},He=function(p){return Il(p,!0)},Qe=function(p){return Il(p,!1)},at=function(p){return p==="[]"?{}:{"@id":p}},Xt=function(p){return{"@id":p}},Ut="[",_r=tt("[",!1),pr="]",ur=tt("]",!1),ut="(",Je=tt("(",!1),Nt=")",vt=tt(")",!1),Ae=function(p){return{"@list":p}},je=function(p,S){return{"@value":p,"@language":S}},et="^^",Vt=tt("^^",!1),xt=function(p,S){if(S==="http://www.w3.org/2001/XMLSchema#boolean"&&p==="true")return!0;if(S==="http://www.w3.org/2001/XMLSchema#boolean"&&p==="false")return!1;if(S==="http://www.w3.org/2001/XMLSchema#integer")return parseInt(p);if(S==="http://www.w3.org/2001/XMLSchema#double")return parseFloat(p);const q=ct.resolve(S,!0);if(q){const X=S.split(":")[0];if(q==="http://www.w3.org/2001/XMLSchema#boolean"&&p==="true")return ct.decrement(X),!0;if(q==="http://www.w3.org/2001/XMLSchema#boolean"&&p==="false")return ct.decrement(X),!1;if(q==="http://www.w3.org/2001/XMLSchema#integer")return ct.decrement(X),parseInt(p);if(q==="http://www.w3.org/2001/XMLSchema#double")return ct.decrement(X),parseFloat(p)}return{"@value":p,"@type":S}},Jt="true",yr=tt("true",!1),Ht=function(){return!0},xn="false",sh=tt("false",!1),ah=function(){return!1},uh=function(p){return p+":"},oh="<",fh=tt("<",!1),Rs=/^[^\0- <>"{}|\^`\\]/,Fs=_t([["\0"," "],"<",">",'"',"{","}","|","^","`","\\"],!0,!1),ch=">",dh=tt(">",!1),hh=function(p){const S=p.map(X=>65536<=X.codePointAt(0)&&X.codePointAt(0)<=983039?"a":X.length===1?X:X.length===6?String.fromCharCode("0x"+X.substring(2)):X.length===10?String.fromCodePoint("0x"+X.substring(2)):X).join("");if(S.match(/^[^\u0000-\u0020<>"{}|^`\\]*$/)){var q=p.join("");try{return ct.resolve(q)}catch{kl("Invalid IRIREF "+q)}}else kl("Invalid IRIREF "+p.join("")+" / "+S)},Mr=":",jr=tt(":",!1),_h=function(p){return p=p||"0",ct.hasPrefix(p)===!1&&kl("undefined prefix "+p),p},ph=function(p){return p||""},gh=function(p,S){return ct.increment(p),ct.resolve(p+":"+S)},Os="_:",mh=tt("_:",!1),Ft=/^[0-9]/,Ot=_t([["0","9"]],!1,!1),vh="@",bh=tt("@",!1),Bs=/^[a-zA-Z]/,Ls=_t([["a","z"],["A","Z"]],!1,!1),bl="-",wl=tt("-",!1),Ni=/^[a-zA-Z0-9]/,Ai=_t([["a","z"],["A","Z"],["0","9"]],!1,!1),Ps=function(p,S){return"-"+S.join("")},wh=function(p,S){return p.join("")+S.join("")},Si=/^[+\-]/,Ii=_t(["+","-"],!1,!1),yh=function(p){return p.match(/^[0+][0-9]+$/)?{"@value":p,"@type":"http://www.w3.org/2001/XMLSchema#integer"}:parseInt(p)},kh=function(p){return{"@value":p,"@type":"http://www.w3.org/2001/XMLSchema#decimal"}},Dh=function(p){return{"@value":p,"@type":"http://www.w3.org/2001/XMLSchema#double"}},Eh=/^[eE]/,Th=_t(["e","E"],!1,!1),Ri='"',Fi=tt('"',!1),qs=/^[^"\\\n\r]/,Us=_t(['"',"\\",`
`,"\r"],!0,!1),Oi="'",Bi=tt("'",!1),Ms=/^[^'\\\n\r]/,js=_t(["'","\\",`
`,"\r"],!0,!1),Li="'''",Vs=tt("'''",!1),kr=/^[^'\\]/,Dr=_t(["'","\\"],!0,!1),Pi="''",Hs=tt("''",!1),zs=function(p,S){return"''"+S.join("")},Xs=function(p,S){return"'"+S.join("")},Gs=function(p,S){return p.join("")+S.join("")},qi='"""',Ws=tt('"""',!1),Er=/^[^"\\]/,Tr=_t(['"',"\\"],!0,!1),Ui='""',Qs=tt('""',!1),Ys=function(p,S){return'""'+S.join("")},xs=function(p,S){return'"'+S.join("")},Js="\\U",Ch=tt("\\U",!1),Nh=function(p){return String.fromCodePoint(parseInt(p.join(""),16))},Zs="\\u",Ah=tt("\\u",!1),Sh=function(p){return String.fromCharCode(parseInt(p.join(""),16))},Ks="\\t",Ih=tt("\\t",!1),Rh=function(){return"	"},$s="\\b",Fh=tt("\\b",!1),Oh=function(){return"\b"},ea="\\n",Bh=tt("\\n",!1),Lh=function(){return`
`},ta="\\r",Ph=tt("\\r",!1),qh=function(){return"\r"},ra="\\f",Uh=tt("\\f",!1),Mh=function(){return"\f"},na='\\"',jh=tt('\\"',!1),Vh=function(){return'"'},ia="\\'",Hh=tt("\\'",!1),zh=function(){return"'"},la="\\\\",Xh=tt("\\\\",!1),Gh=function(){return"\\"},Wh=/^[ \t\r\n]/,Qh=_t([" ","	","\r",`
`],!1,!1),Yh=function(){return"[]"},xh=/^[\uD800-\uDBFF]/,Jh=_t([["\uD800","\uDBFF"]],!1,!1),Zh=/^[\uDC00-\uDFFF]/,Kh=_t([["\uDC00","\uDFFF"]],!1,!1),$h=function(p,S){return p+S},e_=/^[A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,t_=_t([["A","Z"],["a","z"],["À","Ö"],["Ø","ö"],["ø","˿"],["Ͱ","ͽ"],["Ϳ","῿"],["‌","‍"],["⁰","↏"],["Ⰰ","⿯"],["、","퟿"],["豈","﷏"],["ﷰ","�"]],!1,!1),r_="_",n_=tt("_",!1),i_="·",l_=tt("·",!1),s_=/^[\u0300-\u036F]/,a_=_t([["̀","ͯ"]],!1,!1),u_=/^[\u203F-\u2040]/,o_=_t([["‿","⁀"]],!1,!1),sa=function(p,S,q,X){return q.join("")+X.join("")},f_=function(p,S,q){return p+S.join("")+q.join("")},c_="%",d_=tt("%",!1),h_=/^[0-9A-Fa-f]/,__=_t([["0","9"],["A","F"],["a","f"]],!1,!1),p_="\\",g_=tt("\\",!1),m_=/^[_~.!$&'()*+,;=\/?#@%\-]/,v_=_t(["_","~",".","!","$","&","'","(",")","*","+",",",";","=","/","?","#","@","%","-"],!1,!1),g=0,Fe=0,Mi=[{line:1,column:1}],Cr=0,yl=[],ji;if("startRule"in s){if(!(s.startRule in a))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');u=a[s.startRule]}function kl(p,S){throw S=S!==void 0?S:Dl(Fe,g),w_(p,S)}function tt(p,S){return{type:"literal",text:p,ignoreCase:S}}function _t(p,S,q){return{type:"class",parts:p,inverted:S,ignoreCase:q}}function b_(){return{type:"end"}}function aa(p){var S=Mi[p],q;if(S)return S;for(q=p-1;!Mi[q];)q--;for(S=Mi[q],S={line:S.line,column:S.column};q<p;)i.charCodeAt(q)===10?(S.line++,S.column=1):S.column++,q++;return Mi[p]=S,S}function Dl(p,S){var q=aa(p),X=aa(S);return{start:{offset:p,line:q.line,column:q.column},end:{offset:S,line:X.line,column:X.column}}}function de(p){g<Cr||(g>Cr&&(Cr=g,yl=[]),yl.push(p))}function w_(p,S){return new e(p,null,null,S)}function y_(p,S,q){return new e(e.buildMessage(p,S),p,S,q)}function ua(){var p,S,q,X;for(p=g,S=[],q=oa();q!==l;)S.push(q),q=oa();if(S!==l){for(q=[],X=Oe();X!==l;)q.push(X),X=Oe();q!==l?(Fe=p,S=o(S),p=S):(g=p,p=l)}else g=p,p=l;return p}function oa(){var p,S,q,X;if(p=D_(),p===l)if(p=g,S=A_(),S!==l){for(q=[],X=Oe();X!==l;)q.push(X),X=Oe();q!==l?(i.charCodeAt(g)===46?(X=f,g++):(X=l,de(h)),X!==l?(Fe=p,S=c(S),p=S):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;return p}function k_(){var p,S,q,X;if(p=g,i.charCodeAt(g)===35?(S=d,g++):(S=l,de(_)),S!==l){for(q=[],w.test(i.charAt(g))?(X=i.charAt(g),g++):(X=l,de(k));X!==l;)q.push(X),w.test(i.charAt(g))?(X=i.charAt(g),g++):(X=l,de(k));q!==l?(i.charCodeAt(g)===10?(X=C,g++):(X=l,de(U)),X!==l?(Fe=p,S=I(q),p=S):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;return p}function Oe(){var p;return p=W_(),p===l&&(p=k_()),p}function D_(){var p;return p=E_(),p===l&&(p=T_(),p===l&&(p=N_(),p===l&&(p=C_()))),p}function E_(){var p,S,q,X,Z,se,ae,K,Be;for(p=g,S=[],q=Oe();q!==l;)S.push(q),q=Oe();if(S!==l)if(i.substr(g,7)===A?(q=A,g+=7):(q=l,de(b)),q!==l){for(X=[],Z=Oe();Z!==l;)X.push(Z),Z=Oe();if(X!==l)if(Z=_a(),Z!==l){for(se=[],ae=Oe();ae!==l;)se.push(ae),ae=Oe();if(se!==l)if(ae=Zn(),ae!==l){for(K=[],Be=Oe();Be!==l;)K.push(Be),Be=Oe();K!==l?(i.charCodeAt(g)===46?(Be=f,g++):(Be=l,de(h)),Be!==l?(Fe=p,S=y(Z,ae),p=S):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;else g=p,p=l}else g=p,p=l;else g=p,p=l}else g=p,p=l;else g=p,p=l;return p}function T_(){var p,S,q,X,Z,se,ae;for(p=g,S=[],q=Oe();q!==l;)S.push(q),q=Oe();if(S!==l)if(i.substr(g,5)===v?(q=v,g+=5):(q=l,de(R)),q!==l){for(X=[],Z=Oe();Z!==l;)X.push(Z),Z=Oe();if(X!==l)if(Z=Zn(),Z!==l){for(se=[],ae=Oe();ae!==l;)se.push(ae),ae=Oe();se!==l?(i.charCodeAt(g)===46?(ae=f,g++):(ae=l,de(h)),ae!==l?(Fe=p,S=T(Z),p=S):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;else g=p,p=l}else g=p,p=l;else g=p,p=l;return p}function C_(){var p,S,q,X,Z,se,ae,K;for(p=g,S=[],q=Oe();q!==l;)S.push(q),q=Oe();if(S!==l)if(B.test(i.charAt(g))?(q=i.charAt(g),g++):(q=l,de(D)),q!==l)if(L.test(i.charAt(g))?(X=i.charAt(g),g++):(X=l,de(F)),X!==l)if(N.test(i.charAt(g))?(Z=i.charAt(g),g++):(Z=l,de(H)),Z!==l)if(O.test(i.charAt(g))?(se=i.charAt(g),g++):(se=l,de(ne)),se!==l){for(ae=[],K=Oe();K!==l;)ae.push(K),K=Oe();ae!==l?(K=Zn(),K!==l?(Fe=p,S=T(K),p=S):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;else g=p,p=l;else g=p,p=l;else g=p,p=l;else g=p,p=l;return p}function N_(){var p,S,q,X,Z,se,ae,K,Be,dt,cn,dn;for(p=g,S=[],q=Oe();q!==l;)S.push(q),q=Oe();if(S!==l)if(Q.test(i.charAt(g))?(q=i.charAt(g),g++):(q=l,de(z)),q!==l)if(Y.test(i.charAt(g))?(X=i.charAt(g),g++):(X=l,de(x)),X!==l)if(O.test(i.charAt(g))?(Z=i.charAt(g),g++):(Z=l,de(ne)),Z!==l)if($.test(i.charAt(g))?(se=i.charAt(g),g++):(se=l,de(V)),se!==l)if(ie.test(i.charAt(g))?(ae=i.charAt(g),g++):(ae=l,de(Re)),ae!==l)if(Le.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(he)),K!==l){for(Be=[],dt=Oe();dt!==l;)Be.push(dt),dt=Oe();if(Be!==l)if(dt=_a(),dt!==l){for(cn=[],dn=Oe();dn!==l;)cn.push(dn),dn=Oe();cn!==l?(dn=Zn(),dn!==l?(Fe=p,S=y(dt,dn),p=S):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;else g=p,p=l}else g=p,p=l;else g=p,p=l;else g=p,p=l;else g=p,p=l;else g=p,p=l;else g=p,p=l;else g=p,p=l;return p}function A_(){var p,S,q;return p=g,S=S_(),S!==l?(q=El(),q!==l?(Fe=p,S=me(S,q),p=S):(g=p,p=l)):(g=p,p=l),p===l&&(p=g,S=fa(),S!==l?(q=El(),q===l&&(q=null),q!==l?(Fe=p,S=oe(S,q),p=S):(g=p,p=l)):(g=p,p=l)),p}function El(){var p,S,q,X,Z,se,ae,K,Be,dt;if(p=g,S=Cl(),S!==l)if(q=Tl(),q!==l){for(X=[],Z=g,se=[],ae=Oe();ae!==l;)se.push(ae),ae=Oe();for(se!==l?(i.charCodeAt(g)===59?(ae=Ee,g++):(ae=l,de($e)),ae!==l?(K=g,Be=Cl(),Be!==l?(dt=Tl(),dt!==l?(Fe=K,Be=ft(S,q,Be,dt),K=Be):(g=K,K=l)):(g=K,K=l),K===l&&(K=null),K!==l?(Fe=Z,se=rt(S,q,K),Z=se):(g=Z,Z=l)):(g=Z,Z=l)):(g=Z,Z=l);Z!==l;){for(X.push(Z),Z=g,se=[],ae=Oe();ae!==l;)se.push(ae),ae=Oe();se!==l?(i.charCodeAt(g)===59?(ae=Ee,g++):(ae=l,de($e)),ae!==l?(K=g,Be=Cl(),Be!==l?(dt=Tl(),dt!==l?(Fe=K,Be=ft(S,q,Be,dt),K=Be):(g=K,K=l)):(g=K,K=l),K===l&&(K=null),K!==l?(Fe=Z,se=rt(S,q,K),Z=se):(g=Z,Z=l)):(g=Z,Z=l)):(g=Z,Z=l)}X!==l?(Fe=p,S=ge(S,q,X),p=S):(g=p,p=l)}else g=p,p=l;else g=p,p=l;return p}function Tl(){var p,S,q,X,Z,se,ae;if(p=g,S=Jn(),S!==l){for(q=[],X=g,Z=[],se=Oe();se!==l;)Z.push(se),se=Oe();for(Z!==l?(i.charCodeAt(g)===44?(se=Se,g++):(se=l,de(lr)),se!==l?(ae=Jn(),ae!==l?(Fe=X,Z=jt(S,ae),X=Z):(g=X,X=l)):(g=X,X=l)):(g=X,X=l);X!==l;){for(q.push(X),X=g,Z=[],se=Oe();se!==l;)Z.push(se),se=Oe();Z!==l?(i.charCodeAt(g)===44?(se=Se,g++):(se=l,de(lr)),se!==l?(ae=Jn(),ae!==l?(Fe=X,Z=jt(S,ae),X=Z):(g=X,X=l)):(g=X,X=l)):(g=X,X=l)}q!==l?(Fe=p,S=Yt(S,q),p=S):(g=p,p=l)}else g=p,p=l;return p}function Cl(){var p,S,q;if(p=g,S=I_(),S!==l&&(Fe=p,S=c(S)),p=S,p===l){for(p=g,S=[],q=Oe();q!==l;)S.push(q),q=Oe();S!==l?(i.charCodeAt(g)===97?(q=wr,g++):(q=l,de(Te)),q!==l?(Fe=p,S=We(),p=S):(g=p,p=l)):(g=p,p=l)}return p}function S_(){var p,S;return p=g,S=ca(),S!==l&&(Fe=p,S=He(S)),p=S,p===l&&(p=da(),p===l&&(p=Vi())),p}function I_(){var p,S,q;for(p=g,S=[],q=Oe();q!==l;)S.push(q),q=Oe();return S!==l?(q=Vi(),q!==l?(Fe=p,S=c(q),p=S):(g=p,p=l)):(g=p,p=l),p}function Jn(){var p,S;return p=R_(),p===l&&(p=g,S=ca(),S!==l&&(Fe=p,S=Qe(S)),p=S,p===l&&(p=g,S=da(),S!==l&&(Fe=p,S=at(S)),p=S,p===l&&(p=g,S=fa(),S!==l&&(Fe=p,S=c(S)),p=S,p===l&&(p=g,S=Vi(),S!==l&&(Fe=p,S=Xt(S)),p=S)))),p}function R_(){var p;return p=O_(),p===l&&(p=F_(),p===l&&(p=B_())),p}function fa(){var p,S,q,X,Z,se;for(p=g,S=[],q=Oe();q!==l;)S.push(q),q=Oe();if(S!==l)if(i.charCodeAt(g)===91?(q=Ut,g++):(q=l,de(_r)),q!==l)if(X=El(),X!==l){for(Z=[],se=Oe();se!==l;)Z.push(se),se=Oe();Z!==l?(i.charCodeAt(g)===93?(se=pr,g++):(se=l,de(ur)),se!==l?(Fe=p,S=c(X),p=S):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;else g=p,p=l;else g=p,p=l;return p}function ca(){var p,S,q,X,Z,se;for(p=g,S=[],q=Oe();q!==l;)S.push(q),q=Oe();if(S!==l)if(i.charCodeAt(g)===40?(q=ut,g++):(q=l,de(Je)),q!==l){for(X=[],Z=Jn();Z!==l;)X.push(Z),Z=Jn();if(X!==l){for(Z=[],se=Oe();se!==l;)Z.push(se),se=Oe();Z!==l?(i.charCodeAt(g)===41?(se=Nt,g++):(se=l,de(vt)),se!==l?(Fe=p,S=Ae(X),p=S):(g=p,p=l)):(g=p,p=l)}else g=p,p=l}else g=p,p=l;else g=p,p=l;return p}function F_(){var p,S,q;for(p=g,S=[],q=Oe();q!==l;)S.push(q),q=Oe();return S!==l?(q=V_(),q===l&&(q=j_(),q===l&&(q=M_())),q!==l?(Fe=p,S=c(q),p=S):(g=p,p=l)):(g=p,p=l),p}function O_(){var p,S,q,X,Z,se,ae;for(p=g,S=[],q=Oe();q!==l;)S.push(q),q=Oe();if(S!==l)if(q=Nl(),q!==l){for(X=[],Z=Oe();Z!==l;)X.push(Z),Z=Oe();X!==l?(Z=U_(),Z!==l?(Fe=p,S=je(q,Z),p=S):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;else g=p,p=l;if(p===l){for(p=g,S=[],q=Oe();q!==l;)S.push(q),q=Oe();if(S!==l)if(q=Nl(),q!==l){for(X=[],Z=Oe();Z!==l;)X.push(Z),Z=Oe();if(X!==l)if(i.substr(g,2)===et?(Z=et,g+=2):(Z=l,de(Vt)),Z!==l){for(se=[],ae=Oe();ae!==l;)se.push(ae),ae=Oe();se!==l?(ae=Vi(),ae!==l?(Fe=p,S=xt(q,ae),p=S):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;else g=p,p=l}else g=p,p=l;else g=p,p=l;if(p===l){for(p=g,S=[],q=Oe();q!==l;)S.push(q),q=Oe();S!==l?(q=Nl(),q!==l?(Fe=p,S=c(q),p=S):(g=p,p=l)):(g=p,p=l)}}return p}function B_(){var p,S,q;for(p=g,S=[],q=Oe();q!==l;)S.push(q),q=Oe();if(S!==l?(i.substr(g,4)===Jt?(q=Jt,g+=4):(q=l,de(yr)),q!==l?(Fe=p,S=Ht(),p=S):(g=p,p=l)):(g=p,p=l),p===l){for(p=g,S=[],q=Oe();q!==l;)S.push(q),q=Oe();S!==l?(i.substr(g,5)===xn?(q=xn,g+=5):(q=l,de(sh)),q!==l?(Fe=p,S=ah(),p=S):(g=p,p=l)):(g=p,p=l)}return p}function Nl(){var p,S,q;for(p=g,S=[],q=Oe();q!==l;)S.push(q),q=Oe();return S!==l?(q=X_(),q===l&&(q=G_(),q===l&&(q=z_(),q===l&&(q=H_()))),q!==l?(Fe=p,S=c(q),p=S):(g=p,p=l)):(g=p,p=l),p}function Vi(){var p,S,q;for(p=g,S=[],q=Oe();q!==l;)S.push(q),q=Oe();if(S!==l?(q=Zn(),q!==l?(Fe=p,S=c(q),p=S):(g=p,p=l)):(g=p,p=l),p===l){for(p=g,S=[],q=Oe();q!==l;)S.push(q),q=Oe();S!==l?(q=L_(),q!==l?(Fe=p,S=c(q),p=S):(g=p,p=l)):(g=p,p=l)}return p}function L_(){var p,S;return p=P_(),p===l&&(p=g,S=ha(),S!==l&&(Fe=p,S=uh(S)),p=S),p}function da(){var p,S,q;for(p=g,S=[],q=Oe();q!==l;)S.push(q),q=Oe();if(S!==l?(q=q_(),q!==l?(Fe=p,S=c(q),p=S):(g=p,p=l)):(g=p,p=l),p===l){for(p=g,S=[],q=Oe();q!==l;)S.push(q),q=Oe();S!==l?(q=Q_(),q!==l?(Fe=p,S=c(q),p=S):(g=p,p=l)):(g=p,p=l)}return p}function Zn(){var p,S,q,X;if(p=g,i.charCodeAt(g)===60?(S=oh,g++):(S=l,de(fh)),S!==l){for(q=[],Rs.test(i.charAt(g))?(X=i.charAt(g),g++):(X=l,de(Fs)),X===l&&(X=gt());X!==l;)q.push(X),Rs.test(i.charAt(g))?(X=i.charAt(g),g++):(X=l,de(Fs)),X===l&&(X=gt());q!==l?(i.charCodeAt(g)===62?(X=ch,g++):(X=l,de(dh)),X!==l?(Fe=p,S=hh(q),p=S):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;return p}function ha(){var p,S,q;return p=g,S=ga(),S===l&&(S=null),S!==l?(i.charCodeAt(g)===58?(q=Mr,g++):(q=l,de(jr)),q!==l?(Fe=p,S=_h(S),p=S):(g=p,p=l)):(g=p,p=l),p}function _a(){var p,S,q;return p=g,S=ga(),S===l&&(S=null),S!==l?(i.charCodeAt(g)===58?(q=Mr,g++):(q=l,de(jr)),q!==l?(Fe=p,S=ph(S),p=S):(g=p,p=l)):(g=p,p=l),p}function P_(){var p,S,q;return p=g,S=ha(),S!==l?(q=Y_(),q!==l?(Fe=p,S=gh(S,q),p=S):(g=p,p=l)):(g=p,p=l),p}function q_(){var p,S,q,X,Z,se,ae,K,Be,dt;if(p=g,S=g,i.substr(g,2)===Os?(q=Os,g+=2):(q=l,de(mh)),q!==l)if(X=Sl(),X===l&&(Ft.test(i.charAt(g))?(X=i.charAt(g),g++):(X=l,de(Ot))),X!==l){for(Z=[],se=Bt();se!==l;)Z.push(se),se=Bt();if(Z!==l){if(se=[],ae=g,K=[],i.charCodeAt(g)===46?(Be=f,g++):(Be=l,de(h)),Be!==l)for(;Be!==l;)K.push(Be),i.charCodeAt(g)===46?(Be=f,g++):(Be=l,de(h));else K=l;if(K!==l){if(Be=[],dt=Bt(),dt!==l)for(;dt!==l;)Be.push(dt),dt=Bt();else Be=l;Be!==l?(K=[K,Be],ae=K):(g=ae,ae=l)}else g=ae,ae=l;for(;ae!==l;){if(se.push(ae),ae=g,K=[],i.charCodeAt(g)===46?(Be=f,g++):(Be=l,de(h)),Be!==l)for(;Be!==l;)K.push(Be),i.charCodeAt(g)===46?(Be=f,g++):(Be=l,de(h));else K=l;if(K!==l){if(Be=[],dt=Bt(),dt!==l)for(;dt!==l;)Be.push(dt),dt=Bt();else Be=l;Be!==l?(K=[K,Be],ae=K):(g=ae,ae=l)}else g=ae,ae=l}se!==l?(q=[q,X,Z,se],S=q):(g=S,S=l)}else g=S,S=l}else g=S,S=l;else g=S,S=l;return S!==l?p=i.substring(p,g):p=S,p}function U_(){var p,S,q,X,Z,se,ae,K;if(p=g,i.charCodeAt(g)===64?(S=vh,g++):(S=l,de(bh)),S!==l){if(q=[],Bs.test(i.charAt(g))?(X=i.charAt(g),g++):(X=l,de(Ls)),X!==l)for(;X!==l;)q.push(X),Bs.test(i.charAt(g))?(X=i.charAt(g),g++):(X=l,de(Ls));else q=l;if(q!==l){if(X=[],Z=g,i.charCodeAt(g)===45?(se=bl,g++):(se=l,de(wl)),se!==l){if(ae=[],Ni.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(Ai)),K!==l)for(;K!==l;)ae.push(K),Ni.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(Ai));else ae=l;ae!==l?(Fe=Z,se=Ps(q,ae),Z=se):(g=Z,Z=l)}else g=Z,Z=l;for(;Z!==l;)if(X.push(Z),Z=g,i.charCodeAt(g)===45?(se=bl,g++):(se=l,de(wl)),se!==l){if(ae=[],Ni.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(Ai)),K!==l)for(;K!==l;)ae.push(K),Ni.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(Ai));else ae=l;ae!==l?(Fe=Z,se=Ps(q,ae),Z=se):(g=Z,Z=l)}else g=Z,Z=l;X!==l?(Fe=p,S=wh(q,X),p=S):(g=p,p=l)}else g=p,p=l}else g=p,p=l;return p}function M_(){var p,S,q,X,Z,se;if(p=g,S=g,q=g,Si.test(i.charAt(g))?(X=i.charAt(g),g++):(X=l,de(Ii)),X===l&&(X=null),X!==l){if(Z=[],Ft.test(i.charAt(g))?(se=i.charAt(g),g++):(se=l,de(Ot)),se!==l)for(;se!==l;)Z.push(se),Ft.test(i.charAt(g))?(se=i.charAt(g),g++):(se=l,de(Ot));else Z=l;Z!==l?(X=[X,Z],q=X):(g=q,q=l)}else g=q,q=l;return q!==l?S=i.substring(S,g):S=q,S!==l&&(Fe=p,S=yh(S)),p=S,p}function j_(){var p,S,q,X,Z,se,ae,K;if(p=g,S=g,q=g,Si.test(i.charAt(g))?(X=i.charAt(g),g++):(X=l,de(Ii)),X===l&&(X=null),X!==l){for(Z=[],Ft.test(i.charAt(g))?(se=i.charAt(g),g++):(se=l,de(Ot));se!==l;)Z.push(se),Ft.test(i.charAt(g))?(se=i.charAt(g),g++):(se=l,de(Ot));if(Z!==l)if(i.charCodeAt(g)===46?(se=f,g++):(se=l,de(h)),se!==l){if(ae=[],Ft.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(Ot)),K!==l)for(;K!==l;)ae.push(K),Ft.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(Ot));else ae=l;ae!==l?(X=[X,Z,se,ae],q=X):(g=q,q=l)}else g=q,q=l;else g=q,q=l}else g=q,q=l;return q!==l?S=i.substring(S,g):S=q,S!==l&&(Fe=p,S=kh(S)),p=S,p}function V_(){var p,S,q,X,Z,se,ae,K,Be;if(p=g,S=g,q=g,Si.test(i.charAt(g))?(X=i.charAt(g),g++):(X=l,de(Ii)),X===l&&(X=null),X!==l){if(Z=g,se=[],Ft.test(i.charAt(g))?(ae=i.charAt(g),g++):(ae=l,de(Ot)),ae!==l)for(;ae!==l;)se.push(ae),Ft.test(i.charAt(g))?(ae=i.charAt(g),g++):(ae=l,de(Ot));else se=l;if(se!==l)if(i.charCodeAt(g)===46?(ae=f,g++):(ae=l,de(h)),ae!==l){for(K=[],Ft.test(i.charAt(g))?(Be=i.charAt(g),g++):(Be=l,de(Ot));Be!==l;)K.push(Be),Ft.test(i.charAt(g))?(Be=i.charAt(g),g++):(Be=l,de(Ot));K!==l?(Be=Al(),Be!==l?(se=[se,ae,K,Be],Z=se):(g=Z,Z=l)):(g=Z,Z=l)}else g=Z,Z=l;else g=Z,Z=l;if(Z===l){if(Z=g,i.charCodeAt(g)===46?(se=f,g++):(se=l,de(h)),se!==l){if(ae=[],Ft.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(Ot)),K!==l)for(;K!==l;)ae.push(K),Ft.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(Ot));else ae=l;ae!==l?(K=Al(),K!==l?(se=[se,ae,K],Z=se):(g=Z,Z=l)):(g=Z,Z=l)}else g=Z,Z=l;if(Z===l){if(Z=g,se=[],Ft.test(i.charAt(g))?(ae=i.charAt(g),g++):(ae=l,de(Ot)),ae!==l)for(;ae!==l;)se.push(ae),Ft.test(i.charAt(g))?(ae=i.charAt(g),g++):(ae=l,de(Ot));else se=l;se!==l?(ae=Al(),ae!==l?(se=[se,ae],Z=se):(g=Z,Z=l)):(g=Z,Z=l)}}Z!==l?(X=[X,Z],q=X):(g=q,q=l)}else g=q,q=l;return q!==l?S=i.substring(S,g):S=q,S!==l&&(Fe=p,S=Dh(S)),p=S,p}function Al(){var p,S,q,X,Z,se;if(p=g,S=g,Eh.test(i.charAt(g))?(q=i.charAt(g),g++):(q=l,de(Th)),q!==l)if(Si.test(i.charAt(g))?(X=i.charAt(g),g++):(X=l,de(Ii)),X===l&&(X=null),X!==l){if(Z=[],Ft.test(i.charAt(g))?(se=i.charAt(g),g++):(se=l,de(Ot)),se!==l)for(;se!==l;)Z.push(se),Ft.test(i.charAt(g))?(se=i.charAt(g),g++):(se=l,de(Ot));else Z=l;Z!==l?(q=[q,X,Z],S=q):(g=S,S=l)}else g=S,S=l;else g=S,S=l;return S!==l?p=i.substring(p,g):p=S,p}function H_(){var p,S,q,X;if(p=g,i.charCodeAt(g)===34?(S=Ri,g++):(S=l,de(Fi)),S!==l){for(q=[],qs.test(i.charAt(g))?(X=i.charAt(g),g++):(X=l,de(Us)),X===l&&(X=bt(),X===l&&(X=gt()));X!==l;)q.push(X),qs.test(i.charAt(g))?(X=i.charAt(g),g++):(X=l,de(Us)),X===l&&(X=bt(),X===l&&(X=gt()));q!==l?(i.charCodeAt(g)===34?(X=Ri,g++):(X=l,de(Fi)),X!==l?(Fe=p,S=I(q),p=S):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;return p}function z_(){var p,S,q,X;if(p=g,i.charCodeAt(g)===39?(S=Oi,g++):(S=l,de(Bi)),S!==l){for(q=[],Ms.test(i.charAt(g))?(X=i.charAt(g),g++):(X=l,de(js)),X===l&&(X=bt(),X===l&&(X=gt()));X!==l;)q.push(X),Ms.test(i.charAt(g))?(X=i.charAt(g),g++):(X=l,de(js)),X===l&&(X=bt(),X===l&&(X=gt()));q!==l?(i.charCodeAt(g)===39?(X=Oi,g++):(X=l,de(Bi)),X!==l?(Fe=p,S=I(q),p=S):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;return p}function X_(){var p,S,q,X,Z,se,ae,K;if(p=g,i.substr(g,3)===Li?(S=Li,g+=3):(S=l,de(Vs)),S!==l){for(q=[],kr.test(i.charAt(g))?(X=i.charAt(g),g++):(X=l,de(Dr)),X===l&&(X=bt(),X===l&&(X=gt()));X!==l;)q.push(X),kr.test(i.charAt(g))?(X=i.charAt(g),g++):(X=l,de(Dr)),X===l&&(X=bt(),X===l&&(X=gt()));if(q!==l){if(X=[],Z=g,i.substr(g,2)===Pi?(se=Pi,g+=2):(se=l,de(Hs)),se!==l){if(ae=[],kr.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(Dr)),K===l&&(K=bt(),K===l&&(K=gt())),K!==l)for(;K!==l;)ae.push(K),kr.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(Dr)),K===l&&(K=bt(),K===l&&(K=gt()));else ae=l;ae!==l?(Fe=Z,se=zs(q,ae),Z=se):(g=Z,Z=l)}else g=Z,Z=l;if(Z===l)if(Z=g,i.charCodeAt(g)===39?(se=Oi,g++):(se=l,de(Bi)),se!==l){if(ae=[],kr.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(Dr)),K===l&&(K=bt(),K===l&&(K=gt())),K!==l)for(;K!==l;)ae.push(K),kr.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(Dr)),K===l&&(K=bt(),K===l&&(K=gt()));else ae=l;ae!==l?(Fe=Z,se=Xs(q,ae),Z=se):(g=Z,Z=l)}else g=Z,Z=l;for(;Z!==l;){if(X.push(Z),Z=g,i.substr(g,2)===Pi?(se=Pi,g+=2):(se=l,de(Hs)),se!==l){if(ae=[],kr.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(Dr)),K===l&&(K=bt(),K===l&&(K=gt())),K!==l)for(;K!==l;)ae.push(K),kr.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(Dr)),K===l&&(K=bt(),K===l&&(K=gt()));else ae=l;ae!==l?(Fe=Z,se=zs(q,ae),Z=se):(g=Z,Z=l)}else g=Z,Z=l;if(Z===l)if(Z=g,i.charCodeAt(g)===39?(se=Oi,g++):(se=l,de(Bi)),se!==l){if(ae=[],kr.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(Dr)),K===l&&(K=bt(),K===l&&(K=gt())),K!==l)for(;K!==l;)ae.push(K),kr.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(Dr)),K===l&&(K=bt(),K===l&&(K=gt()));else ae=l;ae!==l?(Fe=Z,se=Xs(q,ae),Z=se):(g=Z,Z=l)}else g=Z,Z=l}X!==l?(i.substr(g,3)===Li?(Z=Li,g+=3):(Z=l,de(Vs)),Z!==l?(Fe=p,S=Gs(q,X),p=S):(g=p,p=l)):(g=p,p=l)}else g=p,p=l}else g=p,p=l;return p}function G_(){var p,S,q,X,Z,se,ae,K;if(p=g,i.substr(g,3)===qi?(S=qi,g+=3):(S=l,de(Ws)),S!==l){for(q=[],Er.test(i.charAt(g))?(X=i.charAt(g),g++):(X=l,de(Tr)),X===l&&(X=bt(),X===l&&(X=gt()));X!==l;)q.push(X),Er.test(i.charAt(g))?(X=i.charAt(g),g++):(X=l,de(Tr)),X===l&&(X=bt(),X===l&&(X=gt()));if(q!==l){if(X=[],Z=g,i.substr(g,2)===Ui?(se=Ui,g+=2):(se=l,de(Qs)),se!==l){if(ae=[],Er.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(Tr)),K===l&&(K=bt(),K===l&&(K=gt())),K!==l)for(;K!==l;)ae.push(K),Er.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(Tr)),K===l&&(K=bt(),K===l&&(K=gt()));else ae=l;ae!==l?(Fe=Z,se=Ys(q,ae),Z=se):(g=Z,Z=l)}else g=Z,Z=l;if(Z===l)if(Z=g,i.charCodeAt(g)===34?(se=Ri,g++):(se=l,de(Fi)),se!==l){if(ae=[],Er.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(Tr)),K===l&&(K=bt(),K===l&&(K=gt())),K!==l)for(;K!==l;)ae.push(K),Er.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(Tr)),K===l&&(K=bt(),K===l&&(K=gt()));else ae=l;ae!==l?(Fe=Z,se=xs(q,ae),Z=se):(g=Z,Z=l)}else g=Z,Z=l;for(;Z!==l;){if(X.push(Z),Z=g,i.substr(g,2)===Ui?(se=Ui,g+=2):(se=l,de(Qs)),se!==l){if(ae=[],Er.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(Tr)),K===l&&(K=bt(),K===l&&(K=gt())),K!==l)for(;K!==l;)ae.push(K),Er.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(Tr)),K===l&&(K=bt(),K===l&&(K=gt()));else ae=l;ae!==l?(Fe=Z,se=Ys(q,ae),Z=se):(g=Z,Z=l)}else g=Z,Z=l;if(Z===l)if(Z=g,i.charCodeAt(g)===34?(se=Ri,g++):(se=l,de(Fi)),se!==l){if(ae=[],Er.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(Tr)),K===l&&(K=bt(),K===l&&(K=gt())),K!==l)for(;K!==l;)ae.push(K),Er.test(i.charAt(g))?(K=i.charAt(g),g++):(K=l,de(Tr)),K===l&&(K=bt(),K===l&&(K=gt()));else ae=l;ae!==l?(Fe=Z,se=xs(q,ae),Z=se):(g=Z,Z=l)}else g=Z,Z=l}X!==l?(i.substr(g,3)===qi?(Z=qi,g+=3):(Z=l,de(Ws)),Z!==l?(Fe=p,S=Gs(q,X),p=S):(g=p,p=l)):(g=p,p=l)}else g=p,p=l}else g=p,p=l;return p}function gt(){var p,S,q,X,Z,se,ae,K,Be,dt,cn;return p=g,i.substr(g,2)===Js?(S=Js,g+=2):(S=l,de(Ch)),S!==l?(q=g,X=Zt(),X!==l?(Z=Zt(),Z!==l?(se=Zt(),se!==l?(ae=Zt(),ae!==l?(K=Zt(),K!==l?(Be=Zt(),Be!==l?(dt=Zt(),dt!==l?(cn=Zt(),cn!==l?(X=[X,Z,se,ae,K,Be,dt,cn],q=X):(g=q,q=l)):(g=q,q=l)):(g=q,q=l)):(g=q,q=l)):(g=q,q=l)):(g=q,q=l)):(g=q,q=l)):(g=q,q=l),q!==l?(Fe=p,S=Nh(q),p=S):(g=p,p=l)):(g=p,p=l),p===l&&(p=g,i.substr(g,2)===Zs?(S=Zs,g+=2):(S=l,de(Ah)),S!==l?(q=g,X=Zt(),X!==l?(Z=Zt(),Z!==l?(se=Zt(),se!==l?(ae=Zt(),ae!==l?(X=[X,Z,se,ae],q=X):(g=q,q=l)):(g=q,q=l)):(g=q,q=l)):(g=q,q=l),q!==l?(Fe=p,S=Sh(q),p=S):(g=p,p=l)):(g=p,p=l)),p}function bt(){var p,S;return p=g,i.substr(g,2)===Ks?(S=Ks,g+=2):(S=l,de(Ih)),S!==l&&(Fe=p,S=Rh()),p=S,p===l&&(p=g,i.substr(g,2)===$s?(S=$s,g+=2):(S=l,de(Fh)),S!==l&&(Fe=p,S=Oh()),p=S,p===l&&(p=g,i.substr(g,2)===ea?(S=ea,g+=2):(S=l,de(Bh)),S!==l&&(Fe=p,S=Lh()),p=S,p===l&&(p=g,i.substr(g,2)===ta?(S=ta,g+=2):(S=l,de(Ph)),S!==l&&(Fe=p,S=qh()),p=S,p===l&&(p=g,i.substr(g,2)===ra?(S=ra,g+=2):(S=l,de(Uh)),S!==l&&(Fe=p,S=Mh()),p=S,p===l&&(p=g,i.substr(g,2)===na?(S=na,g+=2):(S=l,de(jh)),S!==l&&(Fe=p,S=Vh()),p=S,p===l&&(p=g,i.substr(g,2)===ia?(S=ia,g+=2):(S=l,de(Hh)),S!==l&&(Fe=p,S=zh()),p=S,p===l&&(p=g,i.substr(g,2)===la?(S=la,g+=2):(S=l,de(Xh)),S!==l&&(Fe=p,S=Gh()),p=S))))))),p}function W_(){var p;return Wh.test(i.charAt(g))?(p=i.charAt(g),g++):(p=l,de(Qh)),p}function Q_(){var p,S,q,X;if(p=g,i.charCodeAt(g)===91?(S=Ut,g++):(S=l,de(_r)),S!==l){for(q=[],X=Oe();X!==l;)q.push(X),X=Oe();q!==l?(i.charCodeAt(g)===93?(X=pr,g++):(X=l,de(ur)),X!==l?(Fe=p,S=Yh(),p=S):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;return p}function pa(){var p,S,q;return p=g,xh.test(i.charAt(g))?(S=i.charAt(g),g++):(S=l,de(Jh)),S!==l?(Zh.test(i.charAt(g))?(q=i.charAt(g),g++):(q=l,de(Kh)),q!==l?(Fe=p,S=$h(S,q),p=S):(g=p,p=l)):(g=p,p=l),p===l&&(e_.test(i.charAt(g))?(p=i.charAt(g),g++):(p=l,de(t_))),p}function Sl(){var p;return p=pa(),p===l&&(i.charCodeAt(g)===95?(p=r_,g++):(p=l,de(n_))),p}function Bt(){var p;return p=Sl(),p===l&&(i.charCodeAt(g)===45?(p=bl,g++):(p=l,de(wl)),p===l&&(Ft.test(i.charAt(g))?(p=i.charAt(g),g++):(p=l,de(Ot)),p===l&&(i.charCodeAt(g)===183?(p=i_,g++):(p=l,de(l_)),p===l&&(s_.test(i.charAt(g))?(p=i.charAt(g),g++):(p=l,de(a_)),p===l&&(u_.test(i.charAt(g))?(p=i.charAt(g),g++):(p=l,de(o_))))))),p}function ga(){var p,S,q,X,Z,se,ae,K,Be;if(p=g,S=g,q=pa(),q!==l){for(X=[],Z=Bt();Z!==l;)X.push(Z),Z=Bt();if(X!==l){if(Z=[],se=g,ae=[],i.charCodeAt(g)===46?(K=f,g++):(K=l,de(h)),K!==l)for(;K!==l;)ae.push(K),i.charCodeAt(g)===46?(K=f,g++):(K=l,de(h));else ae=l;if(ae!==l){if(K=[],Be=Bt(),Be!==l)for(;Be!==l;)K.push(Be),Be=Bt();else K=l;K!==l?(ae=[ae,K],se=ae):(g=se,se=l)}else g=se,se=l;for(;se!==l;){if(Z.push(se),se=g,ae=[],i.charCodeAt(g)===46?(K=f,g++):(K=l,de(h)),K!==l)for(;K!==l;)ae.push(K),i.charCodeAt(g)===46?(K=f,g++):(K=l,de(h));else ae=l;if(ae!==l){if(K=[],Be=Bt(),Be!==l)for(;Be!==l;)K.push(Be),Be=Bt();else K=l;K!==l?(ae=[ae,K],se=ae):(g=se,se=l)}else g=se,se=l}Z!==l?(q=[q,X,Z],S=q):(g=S,S=l)}else g=S,S=l}else g=S,S=l;return S!==l?p=i.substring(p,g):p=S,p}function Y_(){var p,S,q,X,Z,se,ae,K;if(p=g,S=Sl(),S===l&&(i.charCodeAt(g)===58?(S=Mr,g++):(S=l,de(jr)),S===l&&(Ft.test(i.charAt(g))?(S=i.charAt(g),g++):(S=l,de(Ot)),S===l&&(S=fn()))),S!==l){for(q=[],X=Bt(),X===l&&(i.charCodeAt(g)===58?(X=Mr,g++):(X=l,de(jr)),X===l&&(X=fn()));X!==l;)q.push(X),X=Bt(),X===l&&(i.charCodeAt(g)===58?(X=Mr,g++):(X=l,de(jr)),X===l&&(X=fn()));if(q!==l){if(X=[],Z=g,se=[],i.charCodeAt(g)===46?(ae=f,g++):(ae=l,de(h)),ae!==l)for(;ae!==l;)se.push(ae),i.charCodeAt(g)===46?(ae=f,g++):(ae=l,de(h));else se=l;if(se!==l){if(ae=[],K=Bt(),K===l&&(i.charCodeAt(g)===58?(K=Mr,g++):(K=l,de(jr)),K===l&&(K=fn())),K!==l)for(;K!==l;)ae.push(K),K=Bt(),K===l&&(i.charCodeAt(g)===58?(K=Mr,g++):(K=l,de(jr)),K===l&&(K=fn()));else ae=l;ae!==l?(Fe=Z,se=sa(S,q,se,ae),Z=se):(g=Z,Z=l)}else g=Z,Z=l;for(;Z!==l;){if(X.push(Z),Z=g,se=[],i.charCodeAt(g)===46?(ae=f,g++):(ae=l,de(h)),ae!==l)for(;ae!==l;)se.push(ae),i.charCodeAt(g)===46?(ae=f,g++):(ae=l,de(h));else se=l;if(se!==l){if(ae=[],K=Bt(),K===l&&(i.charCodeAt(g)===58?(K=Mr,g++):(K=l,de(jr)),K===l&&(K=fn())),K!==l)for(;K!==l;)ae.push(K),K=Bt(),K===l&&(i.charCodeAt(g)===58?(K=Mr,g++):(K=l,de(jr)),K===l&&(K=fn()));else ae=l;ae!==l?(Fe=Z,se=sa(S,q,se,ae),Z=se):(g=Z,Z=l)}else g=Z,Z=l}X!==l?(Fe=p,S=f_(S,q,X),p=S):(g=p,p=l)}else g=p,p=l}else g=p,p=l;return p}function fn(){var p;return p=x_(),p===l&&(p=J_()),p}function x_(){var p,S,q,X,Z;return p=g,S=g,i.charCodeAt(g)===37?(q=c_,g++):(q=l,de(d_)),q!==l?(X=Zt(),X!==l?(Z=Zt(),Z!==l?(q=[q,X,Z],S=q):(g=S,S=l)):(g=S,S=l)):(g=S,S=l),S!==l?p=i.substring(p,g):p=S,p}function Zt(){var p;return h_.test(i.charAt(g))?(p=i.charAt(g),g++):(p=l,de(__)),p}function J_(){var p,S,q;return p=g,i.charCodeAt(g)===92?(S=p_,g++):(S=l,de(g_)),S!==l?(m_.test(i.charAt(g))?(q=i.charAt(g),g++):(q=l,de(v_)),q!==l?(Fe=p,S=c(q),p=S):(g=p,p=l)):(g=p,p=l),p}var Z_=new Function("try {return this===window;}catch(e){ return false;}"),ma=Z_()?window.URL:Dp.URL,va=function(p){return p.match(/^[a-z](.*?):(.+?)/g)};function K_(p,S){var q={};return q[p]=S,q}var ct={base:[],data:{},addBase:function(p){if(ct.base.length===0){ct.base.push(p);return}const S=ct.base[ct.base.length-1];S!==p&&ct.base.push(new ma(p,S).toString())},addPrefix:function(p,S){const q=ct.data[p];q===void 0?ct.data[p]=[{uri:S,count:0}]:q[q.length-1].uri!==S&&q.push({uri:S,count:0})},hasPrefix:function(p){return this.data[p]!==void 0},resolve:function(p,S){const q=Object.keys(ct.data).find(Z=>p.indexOf(Z+":")===0);if(q!==void 0){const Z=ct.data[q];if(Z.length===1&&S!==!0&&va(Z[0].uri))return p;const se=Z[Z.length-1].uri;return p.replace(q+":",se)}else{var X=ct.base.length===0?s.baseIRI:ct.base[ct.base.length-1];return!X||p.match(/^(http:|https:|urn:|file:)/)?p:p.indexOf("//")===0&&X?X.split("//")[0]+p:new ma(p,X).toString()}},increment:function(p){const S=ct.data[p];S!==void 0&&S[S.length-1].count++},decrement:function(p){const S=ct.data[p];S!==void 0&&S[S.length-1].count--},toJSON:function(){const p={};return ct.base.length>0&&(p["@context"]===void 0&&(p["@context"]={}),p["@context"]["@base"]=ct.base[0]),Object.keys(ct.data).forEach(S=>{const q=ct.data[S][0];q.uri==="http://www.w3.org/2001/XMLSchema#"&&q.count<1||va(q.uri)&&(p["@context"]===void 0&&(p["@context"]={}),p["@context"][S]=q.uri)}),p}};function Il(p,S){if(p["@list"]===void 0||!S&&!p["@list"].find(Z=>Z["@list"]!==void 0))return p;if(p["@list"].length===0)return{"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};var q={},X=null;return p["@list"].forEach(Z=>{X===null?X=q:(X["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={},X=X["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]),X["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"]=Il(Z,!0),X["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}),q}if(ji=u(),ji!==l&&g===i.length)return ji;throw ji!==l&&g<i.length&&de(b_()),y_(yl,Cr<i.length?i.charAt(Cr):null,Cr<i.length?Dl(Cr,Cr+1):Dl(Cr,Cr))}return{SyntaxError:e,parse:t}})})(Nd);var J0=Nd.exports;function Z0(n){return new K0(n)}var K0=function(){function n(r){yt(this,n),De(this,"_notQNameChars",`	\r
 !"#$%&'()*.,+/;<=>?@[\\]^\`{|}~`),De(this,"_notNameChars",this._notQNameChars+":"),De(this,"validPrefix",new RegExp(/^[a-zA-Z][a-zA-Z0-9]*$/)),De(this,"forbidden1",new RegExp(/[\\"\b\f\r\v\t\n\u0080-\uffff]/gm)),De(this,"forbidden3",new RegExp(/[\\"\b\f\r\v\u0080-\uffff]/gm)),this.flags="",this.base=null,this.prefixes=[],this.namespaces=[];var e=Object.keys(_u());for(var t in e){var i=_u()[e[t]](""),s=e[t];this.prefixes[i]=s,this.namespaces[s]=i}this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.suggestPrefix("xml","reserved:reservedForFutureUse"),this.namespacesUsed=[],this.keywords=["a"],this.prefixchars="abcdefghijklmnopqustuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",this.incoming=null,this.formulas=[],this.store=r,this.rdfFactory=r.rdfFactory||gr,this.xsd=Cd(this.rdfFactory)}return wt(n,[{key:"setBase",value:function(e){return this.base=e,this}},{key:"setFlags",value:function(e){return this.flags=e||"",this}},{key:"toStr",value:function(e){var t=e.toNT();return e.termType==="Graph"&&(this.formulas[t]=e),t}},{key:"fromStr",value:function(e){if(e[0]==="{"){var t=this.formulas[e];return t||console.log("No formula object for "+e),t}return this.store.fromNT(e)}},{key:"setNamespaces",value:function(e){for(var t in e)this.setPrefix(t,e[t]);return this}},{key:"setPrefix",value:function(e,t){if(e.slice(0,7)!=="default"&&e.slice(0,2)!=="ns"&&!(!e||!t)){for(var i in this.prefixes)this.prefixes[i]==e&&delete this.prefixes[i];this.prefixes[t]=e,this.namespaces[e]=t}}},{key:"suggestPrefix",value:function(e,t){e.slice(0,7)!=="default"&&e.slice(0,2)!=="ns"&&(!e||!t||e in this.namespaces||t in this.prefixes||(this.prefixes[t]=e,this.namespaces[e]=t))}},{key:"suggestNamespaces",value:function(e){for(var t in e)this.suggestPrefix(t,e[t]);return this}},{key:"checkIntegrity",value:function(){var e,t;for(e in this.namespaces)if(this.prefixes[this.namespaces[e]]!==e)throw new Error("Serializer integity error 1: "+e+", "+this.namespaces[e]+", "+this.prefixes[this.namespaces[e]]+"!");for(t in this.prefixes)if(this.namespaces[this.prefixes[t]]!==t)throw new Error("Serializer integity error 2: "+t+", "+this.prefixs[t]+", "+this.namespaces[this.prefixes[t]]+"!")}},{key:"makeUpPrefix",value:function(e){var t=e;function i(o){return!this.validPrefix.test(o)||o==="ns"||o in this.namespaces?!1:(this.prefixes[e]=o,this.namespaces[o]=e,o)}var s=i.bind(this);"#/".indexOf(t[t.length-1])>=0&&(t=t.slice(0,-1));var l=t.lastIndexOf("/");l>=0&&(t=t.slice(l+1));for(var a=0;a<t.length&&this.prefixchars.indexOf(t[a]);)a++;if(t=t.slice(0,a),t.length<6&&s(t))return t;if(s(t.slice(0,3)))return t.slice(0,3);if(s(t.slice(0,2)))return t.slice(0,2);if(s(t.slice(0,4)))return t.slice(0,4);if(s(t.slice(0,1)))return t.slice(0,1);if(s(t.slice(0,5)))return t.slice(0,5);this.validPrefix.test(t)||(t="n");for(var u=0;;u++)if(s(t.slice(0,3)+u))return t.slice(0,3)+u}},{key:"rootSubjects",value:function(e){for(var t={},i={},s={},l=0;l<e.length;l++){var a=e[l],u=function(C){t.hasOwnProperty(C)||(t[C]=[]),t[C].push(a.subject)},o=[a.subject,a.predicate,a.object];o.map(function(k){k.termType==="BlankNode"?s[k.toNT()]=!0:k.termType==="Collection"&&k.elements.forEach(function(C){u(C)})}),u(e[l].object);var f=i[this.toStr(a.subject)];f||(f=[]),f.push(a),i[this.toStr(a.subject)]=f}var h=[];for(var c in i)if(i.hasOwnProperty(c)){var d=this.fromStr(c);if(d.termType!=="BlankNode"||!t[d]||t[d].length!==1){h.push(d);continue}}this.incoming=t;for(var _={},w=0;w<h.length;w++)_[h[w].toNT()]=!0;return{roots:h,subjects:i,rootsHash:_,incoming:t}}},{key:"toN3",value:function(e){return this.statementsToN3(e.statements)}},{key:"explicitURI",value:function(e){return this.flags.indexOf("r")<0&&this.base?e=Rl(this.base,e):this.flags.indexOf("u")>=0?e=e1(e):e=$0(decodeURI(e)),"<"+e+">"}},{key:"statementsToNTriples",value:function(e){var t=e.slice();t.sort();for(var i="",s="http://www.w3.org/1999/02/22-rdf-syntax-ns#",l=this,a=this.store,u=this.rdfFactory,o=function d(_){if(_.termType!=="Collection")return l.atomicTermToN3(_);for(var w=_.elements,k=a.sym(s+"nill"),C=w.length-1;C>=0;C--){var U=u.blankNode();i+=d(U)+" "+d(a.sym(s+"first"))+" "+d(w[C])+`.
`,i+=d(U)+" "+d(a.sym(s+"rest"))+" "+d(k)+`.
`,k=U}return l.atomicTermToN3(k)},f=0;f<t.length;f++){var h=t[f],c="";c+=o(h.subject)+" ",c+=o(h.predicate)+" ",c+=o(h.object)+" ",this.flags.indexOf("q")>=0&&(c+=o(h.why)+" "),c+=`.
`,i+=c}return i}},{key:"statementsToN3",value:function(e){var t=4,i=80,s=this.store,l={"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":"aaa:00"},a=function(T,B){return W0(T,B,s,l)};e.sort(a),this.base&&!this.defaultNamespace&&(this.defaultNamespace=this.base+"#");var u={};this.flags.indexOf("s")<0&&(u["http://www.w3.org/2002/07/owl#sameAs"]="="),this.flags.indexOf("t")<0&&(u["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"]="a"),this.flags.indexOf("i")<0&&(u["http://www.w3.org/2000/10/swap/log#implies"]="=>");var o=function(T){for(var B="",D=0;D<T;D++)B+=" ";return B},f=function R(T){for(var B="",D=0;D<T.length;D++){var L=T[D],F=typeof L=="string"?L:R(L);if(D!==0){var N=B.slice(-1)||" ";F===","||F===";"||F==="."&&!"0123456789.:".includes(N)||(B+=" ")}B+=F}return B},h=function R(T,B){var D="",L=1e5;B===void 0&&(B=-1);for(var F=0;F<T.length;F++){var N=T[F];if(typeof N!="string"){var H=R(N,B+1);if(H.length<10*(i-t*B)&&H.indexOf('"""')<0){var O=f(N);O.length<i-t*B&&(N=O,H="")}H&&(L=1e4),D+=H}if(typeof N=="string"){if(N.length===1&&D.slice(-1)===`
`&&",.;".indexOf(N)>=0){D=D.slice(0,-1),N=="."&&"0123456789.:".includes(D.charAt(D.length-1))&&(D+=" ",L+=1),D+=N+`
`,L+=1;continue}if(L<t*B+4||L+N.length+1<i&&";.".indexOf(D[D.length-2])<0)D=D.slice(0,-1)+" "+N+`
`,L+=N.length+1;else{var ne=o(t*B)+N;D+=ne+`
`,L=ne.length,B<0&&(D+=`
`,L=1e5)}}}return D};function c(R){for(var T=this.rootSubjects(R),B=T.roots,D=[],L=0;L<B.length;L++){var F=B[L];D.push(_(F,T))}return D}var d=c.bind(this);function _(R,T){return R.termType==="BlankNode"&&!T.incoming[R]?U(R,T,!0).concat(["."]):[A(R,T)].concat([k(R,T)]).concat(["."])}function w(R,T){var B=[],D=null,L=T.subjects[this.toStr(R)]||[];if(typeof L>"u")throw new Error("Cant find statements for "+R);for(var F=[],N=0;N<L.length;N++){var H=L[N];H.predicate.uri===D?F.push(","):(D&&(B=B.concat([F]).concat([";"]),F=[]),B.push(u[H.predicate.uri]?u[H.predicate.uri]:A(H.predicate,T))),D=H.predicate.uri,F.push(U(H.object,T))}return B=B.concat([F]),B}var k=w.bind(this);function C(R,T,B){return R.termType==="BlankNode"&&(B||T.rootsHash[R.toNT()]===void 0)?T.subjects[this.toStr(R)]?["[",k(R,T),"]"]:"[]":A(R,T)}var U=C.bind(this);function I(R,T){var B,D;switch(R.termType){case"Graph":return D=["{"],D=D.concat(d(R.statements)),D.concat(["}"]);case"Collection":for(D=["("],B=0;B<R.elements.length;B++)D.push([U(R.elements[B],T)]);return D.push(")"),D;default:return this.atomicTermToN3(R)}}n.prototype.termToN3=A;var A=I.bind(this);function b(){var R="";this.flags.indexOf("d")<0&&this.defaultNamespace&&(R+="@prefix : "+this.explicitURI(this.defaultNamespace)+`.
`);for(var T in this.prefixes)this.prefixes.hasOwnProperty(T)&&this.namespacesUsed[T]&&(R+="@prefix "+this.prefixes[T]+": "+this.explicitURI(T)+`.
`);return R+`
`}var y=b.bind(this),v=d(e);return y()+h(v)}},{key:"atomicTermToN3",value:function(e,t){switch(e.termType){case"BlankNode":case"Variable":return e.toNT();case"Literal":var i=e.value;if(typeof i!="string")throw new TypeError("Value of RDF literal node must be a string");if(e.datatype&&this.flags.indexOf("x")<0)switch(e.datatype.uri){case"http://www.w3.org/2001/XMLSchema#integer":return i;case"http://www.w3.org/2001/XMLSchema#decimal":return i.indexOf(".")<0&&(i+=".0"),i;case"http://www.w3.org/2001/XMLSchema#double":{var s=i.toLowerCase().indexOf("e")>0;return i.indexOf(".")<0&&!s&&(i+=".0"),s||(i+="e0"),i}case"http://www.w3.org/2001/XMLSchema#boolean":return e.value==="1"?"true":"false"}var l=this.stringToN3(e.value);return e.language?l+="@"+e.language:e.datatype.equals(this.xsd.string)||(l+="^^"+this.atomicTermToN3(e.datatype,t)),l;case"NamedNode":return this.symbolToN3(e);case"DefaultGraph":return"";default:throw new Error("Internal: atomicTermToN3 cannot handle "+e+" of termType: "+e.termType)}}},{key:"stringToN3",value:function(e,t){t||(t="e");var i="",s,l,a,u,o;for(e.length>20&&e.slice(-1)!=='"'&&t.indexOf("n")<0&&(e.indexOf(`
`)>0||e.indexOf('"')>0)?(u='"""',o=this.forbidden3):(u='"',o=this.forbidden1),s=0;s<e.length;){o.lastIndex=0;var f=o.exec(e.slice(s));if(f==null)break;l=s+o.lastIndex-1,i+=e.slice(s,l);var h=e[l];h==='"'&&u==='"""'&&e.slice(l,l+3)!=='"""'?i+=h:(a=`\b\f\r	\v
\\"`.indexOf(h),a>=0?i+="\\"+'bfrtvn\\"'[a]:t.indexOf("e")>=0?i+="\\u"+("000"+h.charCodeAt(0).toString(16).toLowerCase()).slice(-4):i+=h),s=l+1}return u+i+e.slice(s)+u}},{key:"symbolToN3",value:function(e){var t=e.uri,i=t.indexOf("#");if(i<0&&this.flags.indexOf("/")<0&&(i=t.lastIndexOf("/")),i>=0&&this.flags.indexOf("p")<0&&(t.indexOf("http")===0||t.indexOf("ws")===0||t.indexOf("file")===0)){for(var s=!0,l=i+1;l<t.length;l++)if(this._notNameChars.indexOf(t[l])>=0){s=!1;break}if(s){var a=t.slice(i+1),u=t.slice(0,i+1);if(this.defaultNamespace&&this.defaultNamespace===u&&this.flags.indexOf("d")<0)return this.flags.indexOf("k")>=0&&this.keyords.indexOf(a)<0?a:":"+a;var o=this.prefixes[u];if(o||(o=this.makeUpPrefix(u)),o)return this.namespacesUsed[u]=!0,o+":"+a}}return this.explicitURI(t)}},{key:"writeStore",value:function(e){var t=this.store,i=t.fetcher,s=i&&i.appNode,l=this.store.index[3];for(var a in l){var u=t.fromNT(a);s&&u.equals(s)||e(`
`+this.atomicTermToN3(u)+" "+this.atomicTermToN3(t.sym("http://www.w3.org/2000/10/swap/log#semantics"))+" { "+this.statementsToN3(t.statementsMatching(void 0,void 0,void 0,u))+` }.
`)}t.statementsMatching(void 0,t.sym("http://www.w3.org/2007/ont/link#requestedURI")).map(function(h){e(`
<`+h.object.value+`> log:metadata {
`);var c=t.statementsMatching(void 0,void 0,void 0,h.subject);e(this.statementsToN3(this.statementsToN3(c))),e(`}.
`)});var o=[];s&&o.push(s);var f=[];o.map(function(h){f=f.concat(t.statementsMatching(void 0,void 0,void 0,h))}),e(this.statementsToN3(f))}},{key:"statementsToXML",value:function(e){var t=4,i=80,s=[];s["http://www.w3.org/1999/02/22-rdf-syntax-ns#"]=!0;var l="http://www.w3.org/1999/02/22-rdf-syntax-ns#_",a=function(L){for(var F="",N=0;N<L;N++)F+=" ";return F},u=function D(L){for(var F="",N=0;N<L.length;N++){var H=L[N],O=typeof H=="string"?H:D(H);F+=O}return F},o=function D(L,F){var N="",H,O=1e5;F||(F=0);for(var ne=0;ne<L.length;ne++){var Q=L[ne];if(typeof Q!="string"){var z=D(Q,F+1);z.length<10*(i-t*F)&&z.indexOf('"""')<0&&(H=u(Q),H.length<i-t*F&&(Q="   "+H,z="")),z&&(O=1e4),N+=z}typeof Q=="string"&&(O<t*F+4?(N=N.slice(0,-1)+" "+Q+`
`,O+=Q.length+1):(H=a(t*F)+Q,N+=H+`
`,O=H.length))}return N};function f(D){this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#");for(var L=this.rootSubjects(D),F=L.roots,N=[],H=0;H<F.length;H++){var O=F[H];N.push(k(O,L))}return N}var h=f.bind(this);function c(D){return typeof D>"u"?"@@@undefined@@@@":D.replace(/[&<"]/g,function(L){switch(L[0]){case"&":return"&amp;";case"<":return"&lt;";case'"':return"&quot;"}})}function d(D){return c(this.base?Rl(this.base,D.uri):D.uri)}var _=d.bind(this);function w(D,L){var F=[],N,H,O,ne,Q=L.subjects[this.toStr(D)];if(typeof Q>"u")return I(D,L);Q.sort(function(ie,Re){var Le=ie.predicate.uri,he=Re.predicate.uri;if(Le.substring(0,l.length)===l||he.substring(0,l.length)===l)return Le.localeCompare(he);var me=Le.substring(l.length),oe=he.substring(l.length),Ee=parseInt(me,10),$e=parseInt(oe,10);return isNaN(Ee)||isNaN($e)||Ee!==me||$e!==oe?Le.localeCompare(he):Ee-$e});for(var z=0;z<Q.length;z++){if(O=Q[z],O.predicate.uri==="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"&&!N&&O.object.termType==="NamedNode"){N=O.object;continue}if(ne=O.predicate,ne.uri.substr(0,l.length)===l){var Y=ne.uri.substr(l.length),x=parseInt(Y,10);Y===x.toString()&&(ne=this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#li"))}switch(H=b(ne),O.object.termType){case"BlankNode":L.incoming[O.object].length===1?F=F.concat(["<"+H+' rdf:parseType="Resource">',k(O.object,L),"</"+H+">"]):F=F.concat(["<"+H+' rdf:nodeID="'+O.object.toNT().slice(2)+'"/>']);break;case"NamedNode":F=F.concat(["<"+H+' rdf:resource="'+_(O.object)+'"/>']);break;case"Literal":F=F.concat(["<"+H+(O.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+c(O.object.datatype.uri)+'"')+(O.object.language?' xml:lang="'+O.object.language+'"':"")+">"+c(O.object.value)+"</"+H+">"]);break;case"Collection":F=F.concat(["<"+H+' rdf:parseType="Collection">',C(O.object,L),"</"+H+">"]);break;default:throw new Error("Can't serialize object of type "+O.object.termType+" into XML")}}var $=N?b(N):"rdf:Description",V="";return D.termType==="BlankNode"?(!L.incoming[D]||L.incoming[D].length!==1)&&(V=' rdf:nodeID="'+D.toNT().slice(2)+'"'):V=' rdf:about="'+_(D)+'"',["<"+$+V+">"].concat([F]).concat(["</"+$+">"])}var k=w.bind(this);function C(D,L){for(var F=[],N=0;N<D.elements.length;N++)F.push(k(D.elements[N],L));return F}function U(D,L){var F=[],N=L.subjects[this.toStr(D)];if(!N)return F;N.sort();for(var H=0;H<N.length;H++){var O=N[H];switch(O.object.termType){case"BlankNode":L.rootsHash[O.object.toNT()]?F=F.concat(["<"+b(O.predicate)+' rdf:nodeID="'+O.object.toNT().slice(2)+'">',"</"+b(O.predicate)+">"]):F=F.concat(["<"+b(O.predicate)+' rdf:parseType="Resource">',I(O.object,L),"</"+b(O.predicate)+">"]);break;case"NamedNode":F=F.concat(["<"+b(O.predicate)+' rdf:resource="'+_(O.object)+'"/>']);break;case"Literal":F=F.concat(["<"+b(O.predicate)+(O.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+c(O.object.datatype.value)+'"')+(O.object.language?' xml:lang="'+O.object.language+'"':"")+">"+c(O.object.value)+"</"+b(O.predicate)+">"]);break;case"Collection":F=F.concat(["<"+b(O.predicate)+' rdf:parseType="Collection">',C(O.object,L),"</"+b(O.predicate)+">"]);break;default:throw new Error("Can't serialize object of type "+O.object.termType+" into XML")}}return F}var I=U.bind(this);function A(D){var L=D.uri,F=L.indexOf("#");if(F<0&&this.flags.indexOf("/")<0&&(F=L.lastIndexOf("/")),F<0)throw new Error("Cannot make qname out of <"+L+">");for(var N=F+1;N<L.length;N++)if(this._notNameChars.indexOf(L[N])>=0)throw new Error('Invalid character "'+L[N]+'" cannot be in XML qname for URI: '+L);var H=L.slice(F+1),O=L.slice(0,F+1);if(this.defaultNamespace&&this.defaultNamespace===O&&this.flags.indexOf("d")<0)return H;var ne=this.prefixes[O];return ne||(ne=this.makeUpPrefix(O)),s[O]=!0,ne+":"+H}var b=A.bind(this),y=h(e),v="<rdf:RDF";this.defaultNamespace&&(v+=' xmlns="'+c(this.defaultNamespace)+'"');for(var R in s)if(s.hasOwnProperty(R)){var T=this.base&&this.flags.includes("z")?Rl(this.base,R):R;v+=`
 xmlns:`+this.prefixes[R]+'="'+c(T)+'"'}v+=">";var B=[v,y,"</rdf:RDF>"];return o(B,-1)}},{key:"statementsToJsonld",value:function(e){var t=this.statementsToN3(e),i=J0.parse(t);return JSON.stringify(i,null,2)}}])}();function $0(n){return encodeURI(n)}function e1(n){for(var r="",e,t=0;t<n.length;t++)e=n.charCodeAt(t),e>65535?r+="\\U"+("00000000"+e.toString(16)).slice(-8):e>126?r+="\\u"+("0000"+e.toString(16)).slice(-4):r+=n[t];return r}function pi(n,r,e,t,i,s){e=e||(n==null?void 0:n.value);var l=s||{};t=t||gn;var a=void 0;try{var u=Z0(r);l.flags&&u.setFlags(l.flags);var o=r.statementsMatching(void 0,void 0,void 0,n);switch("namespaces"in r&&u.suggestNamespaces(r.namespaces),l.namespaces&&u.setNamespaces(l.namespaces),u.setBase(e),t){case fi:return a=u.statementsToXML(o),f(null,a);case Uc:case Yp:return a=u.statementsToN3(o),f(null,a);case gn:case Kp:return u.setFlags("si"),a=u.statementsToN3(o),f(null,a);case xp:return u.setFlags("deinprstux"),a=u.statementsToNTriples(o),f(null,a);case Jl:return u.setFlags("si dr"),a=u.statementsToJsonld(o),f(null,a);case Kl:case Zl:return u.setFlags("deinprstux q"),a=u.statementsToNTriples(o),f(null,a);default:throw new Error("Serialize: Content-type "+t+" not supported for data write.")}}catch(h){if(i)return i(h,void 0);throw h}function f(h,c){if(i){i(h,c);return}else return c}}var t1=["blankNode","defaultGraph","literal","namedNode","quad","variable","supports"],Gi={first:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",rest:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",nil:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};function Ad(n,r,e){var t=[];return e.reduce(function(i,s,l,a){t.push(n.quad(i,n.namedNode(Gi.first),a[l]));var u;return l<a.length-1?(u=n.blankNode(),t.push(n.quad(i,n.namedNode(Gi.rest),u))):t.push(n.quad(i,n.namedNode(Gi.rest),n.namedNode(Gi.nil))),u},r),t}function cr(n,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=n.length;for(e<0&&(e=t+e);e<t;e++)if(n[e]===r)return e;return-1}function r1(n,r){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=n1(n))||r){e&&(n=e);var t=0,i=function(){};return{s:i,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(o){throw o},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,l=!1,a;return{s:function(){e=e.call(n)},n:function(){var o=e.next();return s=o.done,o},e:function(o){l=!0,a=o},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(l)throw a}}}}function n1(n,r){if(n){if(typeof n=="string")return pu(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return pu(n,r)}}function pu(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}function i1(n,r,e){return r=Rt(r),Yr(n,Sd()?Reflect.construct(r,e||[],Rt(n).constructor):r.apply(n,e))}function Sd(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Sd=function(){return!!n})()}var Id=function(n){function r(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};yt(this,r),e=i1(this,r,[""]),e.statements=t,e.constraints=i,e.initBindings=s,e.optional=l,De(e,"termType",mi),De(e,"classOrder",Rr.Graph),De(e,"fetcher",void 0),De(e,"isVar",0),De(e,"ns",Gt),De(e,"rdfFactory",void 0),e.rdfFactory=a&&a.rdfFactory||gr;var u=r1(t1),o;try{var f=function(){var c=o.value;e[c]=function(){var d;return(d=e.rdfFactory)[c].apply(d,arguments)}};for(u.s();!(o=u.n()).done;)f()}catch(h){u.e(h)}finally{u.f()}return e}return Qt(r,n),wt(r,[{key:"add",value:function(t,i,s,l){var a=this;return arguments.length===1&&t.forEach(function(u){return a.add(u.subject,u.predicate,u.object,u.graph)}),this.statements.push(this.rdfFactory.quad(t,i,s,l))}},{key:"addStatement",value:function(t){return this.add(t)}},{key:"bnode",value:function(t){return this.rdfFactory.blankNode(t)}},{key:"addAll",value:function(t){var i=this;t.forEach(function(s){i.add(s.subject,s.predicate,s.object,s.graph)})}},{key:"any",value:function(t,i,s,l){var a=this.anyStatementMatching(t,i,s,l);return a==null?null:t==null?a.subject:i==null?a.predicate:s==null?a.object:null}},{key:"anyValue",value:function(t,i,s,l){var a=this.any(t,i,s,l);return a?a.value:void 0}},{key:"anyJS",value:function(t,i,s,l){var a=this.any(t,i,s,l);return a?mt.toJS(a):void 0}},{key:"anyStatementMatching",value:function(t,i,s,l){var a=this.statementsMatching(t,i,s,l,!0);if(!(!a||a.length===0))return a[0]}},{key:"id",value:function(t){return this.rdfFactory.id(t)}},{key:"statementsMatching",value:function(t,i,s,l,a){var u=this.statements.filter(function(o){return(!t||t.equals(o.subject))&&(!i||i.equals(o.predicate))&&(!s||s.equals(o.object))&&(!l||l.equals(o.graph))});return a?u.length===0?[]:[u[0]]:u}},{key:"bottomTypeURIs",value:function(t){var i,s,l,a,u,o,f,h;i=[];for(var c in t)if(t.hasOwnProperty(c)){for(h=t[c],f=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),this.rdfFactory.namedNode(c)),s=!0,a=0,u=f.length;a<u;a++)if(l=f[a],o=l.uri,o in t){s=!1;break}s&&(i[c]=h)}return i}},{key:"collection",value:function(){return new $r}},{key:"each",value:function(t,i,s,l){var a=[],u=this.statementsMatching(t,i,s,l,!1);if(t==null)for(var o=0,f=u.length;o<f;o++)a.push(u[o].subject);else if(i==null)for(var h=0,c=u.length;h<c;h++)a.push(u[h].predicate);else if(s==null)for(var d=0,_=u.length;d<_;d++)a.push(u[d].object);else if(l==null)for(var w=0,k=u.length;w<k;w++)a.push(new Mt(u[w].graph.value));return a}},{key:"equals",value:function(t){return t?this.hashString()===t.hashString():!1}},{key:"findMembersNT",value:function(t){var i,s,l,a,u,o,f,h,c,d,_,w,k,C;w={},w[t.toNT()]=!0,a={},o=this.transitiveClosure(w,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0);for(var U in o)if(o.hasOwnProperty(U)){f=this.statementsMatching(void 0,this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.fromNT(U));for(var I=0,A=f.length;I<A;I++)k=f[I],a[k.subject.toNT()]=k;h=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"),this.fromNT(U));for(var b=0,y=h.length;b<y;b++)for(u=h[b],c=this.statementsMatching(void 0,u),l=0,i=c.length;l<i;l++)k=c[l],a[k.subject.toNT()]=k;d=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"),this.fromNT(U));for(var v=0,R=d.length;v<R;v++)for(u=d[v],_=this.statementsMatching(void 0,u),C=0,s=_.length;C<s;C++)k=_[C],a[k.object.toNT()]=k}return a}},{key:"findMemberURIs",value:function(t){return this.NTtoURI(this.findMembersNT(t))}},{key:"findSubClassesNT",value:function(t){var i={};return i[t.toNT()]=!0,this.transitiveClosure(i,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0)}},{key:"findSuperClassesNT",value:function(t){var i={};return i[t.toNT()]=!0,this.transitiveClosure(i,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}},{key:"findTypesNT",value:function(t){var i,s,l,a,u,o,f,h,c;l="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",c=[],a=this.statementsMatching(t,void 0,void 0);for(var d=0,_=a.length;d<_;d++)if(h=a[d],h.predicate.uri===l)c[h.object.toNT()]=h;else{u=this.each(h.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"));for(var w=0,k=u.length;w<k;w++)s=u[w],c[s.toNT()]=h}o=this.statementsMatching(void 0,void 0,t);for(var C=0,U=o.length;C<U;C++){h=o[C],f=this.each(h.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"));for(var I=0,A=f.length;I<A;I++)i=f[I],c[i.toNT()]=h}return this.transitiveClosure(c,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}},{key:"findTypeURIs",value:function(t){return this.NTtoURI(this.findTypesNT(t))}},{key:"connectedStatements",value:function(t,i,s){s=s||[];for(var l=[t],a={},u={},o=[],f=this,h=function(d){var _=function(C){C.termType==="BlankNode"&&!a[C.value]&&(a[C.value]=!0,l.push(C))},w=f.statementsMatching(null,null,d,i).concat(f.statementsMatching(d,null,null,i));w=w.filter(function(k){if(s[k.predicate.value])return!1;var C=k.toNT();return u[C]?!1:(u[C]=!0,!0)}),w.forEach(function(k){_(k.subject),_(k.object)}),o=o.concat(w)};l.length;)h(l.shift());return o}},{key:"formula",value:function(t){return new r}},{key:"fromNT",value:function(t){var i,s,l;switch(t[0]){case"<":return this.sym(t.slice(1,-1));case'"':if(l=void 0,i=void 0,s=t.lastIndexOf('"'),s<t.length-1)if(t[s+1]==="@")l=t.slice(s+2);else if(t.slice(s+1,s+3)==="^^")i=this.fromNT(t.slice(s+3));else throw new Error("Can't convert string from NT: "+t);return t=t.slice(1,s),t=t.replace(/\\"/g,'"'),t=t.replace(/\\n/g,`
`),t=t.replace(/\\\\/g,"\\"),this.rdfFactory.literal(t,l||i);case"_":return this.rdfFactory.blankNode(t.slice(2));case"?":return new yn(t.slice(1))}throw new Error("Can't convert from NT: "+t)}},{key:"holds",value:function(t,i,s,l){var a;if(arguments.length===1){if(!t)return!0;if(t instanceof Array){for(a=0;a<t.length;a++)if(!this.holds(t[a]))return!1;return!0}else{if(e0(t))return this.holds(t.subject,t.predicate,t.object,t.graph);if(t.statements)return this.holds(t.statements)}}var u=this.anyStatementMatching(t,i,s,l);return u!=null}},{key:"holdsStatement",value:function(t){return this.holds(t.subject,t.predicate,t.object,t.graph)}},{key:"list",value:function(t,i){if(i.rdfFactory.supports.COLLECTIONS){var s=i.rdfFactory.collection();return t.forEach(function(u){s.append(u)}),s}else{var l=i.rdfFactory.blankNode(),a=Ad(i.rdfFactory,l,t);return i.addAll(a),l}}},{key:"NTtoURI",value:function(t){var i,s,l={};for(i in t)t.hasOwnProperty(i)&&(s=t[i],i[0]==="<"&&(l[i.slice(1,-1)]=s));return l}},{key:"serialize",value:function(t,i,s,l){return pi(s,this,t,i,void 0,l)}},{key:"substitute",value:function(t){var i=this.statements.map(function(l){return l.substitute(t)}),s=new r;return s.addAll(i),s}},{key:"sym",value:function(t,i){if(i)throw new Error("This feature (kb.sym with 2 args) is removed. Do not assume prefix mappings.");return this.rdfFactory.namedNode(t)}},{key:"the",value:function(t,i,s,l){var a=this.any(t,i,s,l);return a}},{key:"transitiveClosure",value:function(t,i,s){var l,a,u,o,f,h,c={};Object.assign(c,t);for(var d={};;){if(h=function(){for(var _ in c)if(c.hasOwnProperty(_))return _}(),h==null)return d;for(f=s?this.each(void 0,i,this.fromNT(h)):this.each(this.fromNT(h),i),a=0,u=f.length;a<u;a++)l=f[a],o=l.toNT(),!(o in d)&&(o in c||(c[o]=c[h]));d[h]=c[h],delete c[h]}}},{key:"topTypeURIs",value:function(t){var i,s,l,a,u,o,f,h;f=[];for(l in t)if(t.hasOwnProperty(l)){for(h=t[l],u=0,o=this.each(this.rdfFactory.namedNode(l),this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf")),i=0,a=o.length;i<a;i++)if(s=o[i],s.uri!=="http://www.w3.org/2000/01/rdf-schema#Resource"){u++;break}u||(f[l]=h)}return f["http://www.w3.org/2000/01/rdf-schema#Resource"]&&delete f["http://www.w3.org/2000/01/rdf-schema#Resource"],f["http://www.w3.org/2002/07/owl#Thing"]&&delete f["http://www.w3.org/2002/07/owl#Thing"],f}},{key:"toString",value:function(){return"{"+this.statements.join(`
`)+"}"}},{key:"variable",value:function(t){return new yn(t)}},{key:"whether",value:function(t,i,s,l){return this.statementsMatching(t,i,s,l,!1).length}}])}(mt);mt.fromValue=Xc;var In={xsd:Gt("http://www.w3.org/2001/XMLSchema#")};mt.toJS=function(n){return hs(n)?n.elements.map(mt.toJS):jc(n)?n.datatype.equals(In.xsd("boolean"))?n.value==="1"||n.value==="true":n.datatype.equals(In.xsd("dateTime"))||n.datatype.equals(In.xsd("date"))?new Date(n.value):n.datatype.equals(In.xsd("integer"))||n.datatype.equals(In.xsd("float"))||n.datatype.equals(In.xsd("decimal"))?Number(n.value):n.value:n};var l1=wt(function n(r,e){yt(this,n),this.pat=new ki,this.vars=[],this.name=r,this.id=e});function gu(n,r,e,t){function i(b){var y="",v;for(v in b)b.hasOwnProperty(v)&&(y+="    "+v+" -> "+b[v]);return y}function s(b){var y="Bindings: ",v,R=b.length;for(v=0;v<R;v++)y+=i(b[v][0])+`;
	`;return y}function l(b,y,v,R){var T=v[b];if(T===void 0){if(b.isVar){var B=[];return B[b]=y,[[B,null]]}T=b}if(!T.complexType)return R.redirections[T]&&(T=R.redirections[T]),R.redirections[y]&&(y=R.redirections[y]),T.equals(y)||T.uri&&T.uri===ci?[[[],null]]:[];if(b instanceof Array)return y instanceof Array?a(b,y,v):[];throw new Error("query.js: oops - code not written yet")}function a(b,y,v,R){var T;if(b.length!==y.length)return[];if(!b.length)return[[[],null]];var B=l(b[0],y[0],v,R);if(B.length===0)return B;var D=[],L,F=B.length,N,H,O,ne,Q,z;for(L=0;L<F;L++){N=B[L][0],z=[];for(ne in N)N.hasOwnProperty(ne)&&(z[ne]=N[ne]);for(ne in v)v.hasOwnProperty(ne)&&(z[ne]=v[ne]);for(T=a(b.slice(1),y.slice(1),z,R),O=T.length,H=0;H<O;H++){Q=T[H][0];for(ne in N)N.hasOwnProperty(ne)&&(Q[ne]=N[ne]);D.push([Q,null])}}return D}function u(b,y){var v=y[b];return v===void 0?b:v}function o(b,y){var v={},R;for(R in b)b.hasOwnProperty(R)&&(v[R]=b[R]);for(R in y)y.hasOwnProperty(R)&&(v[R]=y[R]);return v}function f(b,y){return this.trunkBindings=y,this.originalCallback=b,this.branches=[],this}f.prototype.checkAllDone=function(){var b;for(b=0;b<this.branches.length;b++)if(!this.branches[b].done)return;this.doCallBacks(this.branches.length-1,this.trunkBindings)},f.prototype.doCallBacks=function(b,y){var v;if(b<0)return this.originalCallback(y);for(v=0;v<this.branches[b].results.length;v++)this.doCallBacks(b-1,o(y,this.branches[b].results[v]))};function h(b,y){return this.count=0,this.success=!1,this.done=!1,this.callback=b,this.onDone=y,this}h.prototype.reportMatch=function(b){this.callback(b),this.success=!0},h.prototype.reportDone=function(){this.done=!0,this.onDone!==void 0&&this.onDone()};var c=function(y){return this.count=0,this.done=!1,this.results=[],this.junction=y,y.branches.push(this),this};c.prototype.reportMatch=function(b){this.results.push(b)},c.prototype.reportDone=function(){Nr.debug("Optional branch finished - results.length = "+this.results.length),this.results.length===0&&this.results.push({}),this.done=!0,this.junction.checkAllDone()};function d(b,y,v){var R,T,B,D;for(y.nvars=0,y.index=null,R=[y.subject,y.predicate,y.object,y.why],D=[b.subjectIndex,b.predicateIndex,b.objectIndex,b.whyIndex],B=0;B<4;B++){var L=R[B];if(!(L.uri&&L.uri===ci))if(L.isVar&&v[L]===void 0)y.nvars++;else{if(L=u(R[B],v),b.redirections[b.id(L)]&&(L=b.redirections[b.id(L)]),T=D[B][b.id(L)],!T)return y.index=[],!1;(y.index===null||y.index.length>T.length)&&(y.index=T)}}return y.index===null&&(y.index=b.statements),!0}function _(b,y){return b.nvars!==y.nvars?b.nvars-y.nvars:b.index.length-y.index.length}var w=0,k=function b(y,v,R,T,B,D,L){Nr.debug("Match begins, Branch count now: "+L.count+" for "+L.pattern_debug);var F=v.statements;if(F.length===0){if(Nr.debug("FOUND MATCH WITH BINDINGS:"+i(R)),v.optional.length===0)L.reportMatch(R);else{Nr.debug("OPTIONAL: "+v.optional);var N=new f(r,R),H=[],O;for(O=0;O<v.optional.length;O++)H[O]=new c(N),H[O].pattern_debug=v.optional[O];for(O=0;O<v.optional.length;O++)H[O].count=H[O].count+1,b(y,v.optional[O],R,"",B,r,H[O])}L.count--,Nr.debug("Match ends -- success , Branch count now: "+L.count+" for "+L.pattern_debug);return}var ne,Q,z=F.length;if(B){var Y="match"+w++,x=function(V,ie){var Re=V.uri.split("#")[0];B.nowOrWhenFetched(Re,void 0,function(Le,he,me){Le||console.log("Error following link to <"+V.uri+"> in query: "+he),b(y,v,R,T,B,D,L)})};for(Q=0;Q<z;Q++){if(ne=F[Q],R[ne.subject]!==void 0&&R[ne.subject].uri&&B&&B.getState(Bn(R[ne.subject].uri))==="unrequested"){x(R[ne.subject],Y);return}if(R[ne.object]!==void 0&&R[ne.object].uri&&B&&B.getState(Bn(R[ne.object].uri))==="unrequested"){x(R[ne.object],Y);return}}}U(y,v,R,T,B,D,L)},C=function(y,v){var R=!0,T,B;for(T in y)y.hasOwnProperty(T)&&v[T]&&(B=v[T].test,B&&!B(y[T])&&(R=!1));return R},U=function(y,v,R,T,B,D,L){var F=v.statements,N=F.length,H,O,ne,Q,z,Y,x;for(H=0;H<N;H++)x=F[H],d(y,x,R);F.sort(_),x=F[0];var $=y.formula();$.optional=v.optional,$.constraints=v.constraints,$.statements=F.slice(1),Nr.debug(T+"match2 searching "+x.index.length+" for "+x+"; bindings so far="+i(R));var V,ie=x.index.length,Re,Le;for(V=0;V<ie;V++)for(Le=x.index[V],Re=a([x.subject,x.predicate,x.object,x.why],[Le.subject,Le.predicate,Le.object,Le.why],R,y),Nr.info(T+" From first: "+Re.length+": "+s(Re)),ne=Re.length,O=0;O<ne;O++)if(z=[],Y=Re[O][0],!C(Y,v.constraints))Nr.debug("Branch count CS: "+L.count);else{for(Q in Y)Y.hasOwnProperty(Q)&&(z[Q]=Y[Q]);for(Q in R)R.hasOwnProperty(Q)&&(z[Q]=R[Q]);L.count++,k(y,$,z,T+"  ",B,D,L)}L.count--,Nr.debug("Match2 ends, Branch count: "+L.count+" for "+L.pattern_debug),L.count===0&&L.reportDone()},I=this;Nr.debug("Query on "+this.statements.length);var A=new h(r,t);A.count++,n.sync?k(I,n.pat,n.pat.initBindings,"",e,r,A):setTimeout(function(){k(I,n.pat,n.pat.initBindings,"",e,r,A)},0)}function mu(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,t)}return e}function ti(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?mu(Object(e),!0).forEach(function(t){De(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):mu(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function s1(n,r){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=a1(n))||r){e&&(n=e);var t=0,i=function(){};return{s:i,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(o){throw o},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,l=!1,a;return{s:function(){e=e.call(n)},n:function(){var o=e.next();return s=o.done,o},e:function(o){l=!0,a=o},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(l)throw a}}}}function a1(n,r){if(n){if(typeof n=="string")return vu(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return vu(n,r)}}function vu(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}function u1(n,r,e){return r=Rt(r),Yr(n,Rd()?Reflect.construct(r,e||[],Rt(n).constructor):r.apply(n,e))}function Rd(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rd=function(){return!!n})()}var Bl="http://www.w3.org/2002/07/owl#";function o1(n,r,e,t){var i=n.any(r,e,void 0);return i?(n.equate(i,t),!0):!1}function f1(n,r,e,t){var i=n.any(void 0,e,t);return i?(n.equate(i,r),!0):!1}function Fd(n,r,e,t,i){n.typeCallback&&n.typeCallback(n,t,i);var s=n.classActions[n.id(t)],l=!1;if(s)for(var a=0;a<s.length;a++)l=l||s[a](n,r,e,t,i);return l}var ki=function(n){function r(e){var t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return yt(this,r),t=u1(this,r,[void 0,void 0,void 0,void 0,i]),De(t,"updater",void 0),De(t,"namespaces",void 0),De(t,"classActions",void 0),De(t,"propertyActions",void 0),De(t,"redirections",void 0),De(t,"aliases",void 0),De(t,"HTTPRedirects",void 0),De(t,"subjectIndex",void 0),De(t,"predicateIndex",void 0),De(t,"objectIndex",void 0),De(t,"whyIndex",void 0),De(t,"index",void 0),De(t,"features",void 0),De(t,"_universalVariables",void 0),De(t,"_existentialVariables",void 0),De(t,"rdfArrayRemove",void 0),De(t,"dataCallbacks",void 0),t.propertyActions={},t.classActions={},t.redirections=[],t.aliases=[],t.HTTPRedirects=[],t.subjectIndex=[],t.predicateIndex=[],t.objectIndex=[],t.whyIndex=[],t.index=[t.subjectIndex,t.predicateIndex,t.objectIndex,t.whyIndex],t.namespaces={},t.features=e||[],t.rdfArrayRemove=i.rdfArrayRemove||Q0,i.dataCallback&&(t.dataCallbacks=[i.dataCallback]),t.initPropertyActions(t.features),t}return Qt(r,n),wt(r,[{key:"substitute",value:function(t){var i=this.statements.map(function(l){return l.substitute(t)}),s=new r;return s.add(i),s}},{key:"addDataCallback",value:function(t){this.dataCallbacks||(this.dataCallbacks=[]),this.dataCallbacks.push(t)}},{key:"applyPatch",value:function(t,i,s){var l=this,a,u=null;function o(c){if(t.delete){a=t.delete,u&&(a=a.substitute(u)),a=a.statements;var d=[],_=a.map(function(w){var k=l.statementsMatching(w.subject,w.predicate,w.object,i);return k.length===0?(d.push(w),null):k[0]});if(d.length)return s("Could not find to delete: "+d.join(`
 or `));_.map(function(w){l.remove(w)})}t.insert&&(a=t.insert,u&&(a=a.substitute(u)),a=a.statements,a.map(function(w){w.graph=i,l.add(w.subject,w.predicate,w.object,w.graph)})),c()}if(t.where){var f=new l1("patch");f.pat=t.where,f.pat.statements.map(function(c){c.graph=Yd(i.value)}),f.sync=!0;var h=[];l.query(f,function(d){h.push(d)},l.fetcher,function(){if(h.length===0)return s("No match found to be patched:"+t.where);if(h.length>1)return s("Patch ambiguous. No patch done.");u=h[0],o(s)})}else o(s)}},{key:"declareExistential",value:function(t){return this._existentialVariables||(this._existentialVariables=[]),this._existentialVariables.push(t),t}},{key:"initPropertyActions",value:function(t){this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"))]=[Fd],cr(t,"sameAs")>=0&&(this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode("".concat(Bl,"sameAs")))]=[function(i,s,l,a,u){return i.equate(s,a),!0}]),cr(t,"InverseFunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode("".concat(Bl,"InverseFunctionalProperty")))]=[function(i,s,l,a,u){return i.newPropertyAction(s,f1)}]),cr(t,"FunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode("".concat(Bl,"FunctionalProperty")))]=[function(i,s,l,a,u){return i.newPropertyAction(s,o1)}])}},{key:"addStatement",value:function(t){return this.add(t.subject,t.predicate,t.object,t.graph),this.statements.length}},{key:"add",value:function(t,i,s,l){var a;if(arguments.length===1){if(t instanceof Array)for(a=0;a<t.length;a++)this.add(t[a]);else Fn(t)?this.add(t.subject,t.predicate,t.object,t.graph):Ga(t)&&this.add(t.statements);return this}var u,o;l||(l=this.fetcher?this.fetcher.appNode:this.rdfFactory.defaultGraph()),typeof t=="string"&&(t=this.rdfFactory.namedNode(t)),i=mt.fromValue(i);var f=mt.fromValue(s);if(l=mt.fromValue(l),!r0(t))throw new Error("Subject is not a subject type");if(!n0(i))throw new Error("Predicate ".concat(i," is not a predicate type"));if(!t0(f))throw new Error("Object ".concat(f," is not an object type"));if(!l0(l))throw new Error("Why is not a graph type");this.predicateCallback&&this.predicateCallback(this,i,l);var h=this.id(this.canon(i));u=this.propertyActions[h];var c=!1;if(u)for(a=0;a<u.length;a++)c=c||u[a](this,t,i,f,l);if(this.holds(t,i,f,l))return null;var d=[this.id(this.canon(t)),h,this.id(this.canon(f)),this.id(this.canon(l))];for(o=this.rdfFactory.quad(t,i,f,l),a=0;a<4;a++){var _=this.index[a],w=d[a];_[w]||(_[w]=[]),_[w].push(o)}if(this.statements.push(o),this.dataCallbacks){var k=s1(this.dataCallbacks),C;try{for(k.s();!(C=k.n()).done;){var U=C.value;U(o)}}catch(I){k.e(I)}finally{k.f()}}return o}},{key:"canon",value:function(t){if(!t)return t;var i=this.redirections[this.id(t)];if(i)return i;switch(t.termType){case En:return new Fr(t.value);case ln:return t;case wn:return new _s;case qc:return t;case mi:return t;case Xn:return new Sr(t.value,t.language,t.datatype);case Dn:return new Mt(t.value);case nn:return new yn(t.value);default:throw new Error("Term Type not recognized for canonization: ".concat(t.termType))}}},{key:"check",value:function(){this.checkStatementList(this.statements);for(var t=0;t<4;t++){var i=this.index[t];for(var s in i)i.hasOwnProperty(s)&&this.checkStatementList(i[s],t)}}},{key:"checkStatementList",value:function(t,i){i===void 0&&(i=0);for(var s=["subject","predicate","object","why"],l=" found in "+s[i]+" index.",a,u=0;u<t.length;u++){a=t[u];for(var o=[a.subject,a.predicate,a.object,a.graph],f=function(w,k){for(var C=0;C<w.length;C++)if(w[C].subject.equals(k.subject)&&w[C].predicate.equals(k.predicate)&&w[C].object.equals(k.object)&&w[C].why.equals(k.graph))return!0},h=0;h<4;h++){var c=this.canon(o[h]),d=this.id(c);this.index[h][d]&&f(this.index[h][d],a)}if(!f(this.statements,a))throw new Error("Statement list does not statement "+a+"@"+a.graph+l)}}},{key:"close",value:function(){return this}},{key:"compareTerms",value:function(t,i){return Object.prototype.hasOwnProperty.call(t,"compareTerm")?t.compareTerm(i):Rr[t.termType]<Rr[i.termType]?-1:Rr[t.termType]>Rr[i.termType]?1:t.value<i.value?-1:t.value>i.value?1:0}},{key:"copyTo",value:function(t,i,s){s||(s=[]);var l=this.statementsMatching(t);cr(s,"two-direction")!==-1&&l.concat(this.statementsMatching(void 0,void 0,t));for(var a=0;a<l.length;a++){var u=l[a];switch(u.object.termType){case"NamedNode":this.add(i,u.predicate,u.object);break;case"Literal":case"BlankNode":case"Collection":this.add(i,u.predicate,u.object.copy(this))}cr(s,"delete")!==-1&&this.remove(u)}}},{key:"equate",value:function(t,i){var s=this.canon(t),l=this.canon(i),a=this.compareTerms(s,l);return a?a<0?this.replaceWith(l,s):this.replaceWith(s,l):!0}},{key:"formula",value:function(t){return new r(t)}},{key:"length",get:function(){return this.statements.length}},{key:"match",value:function(t,i,s,l){return this.statementsMatching(mt.fromValue(t),mt.fromValue(i),mt.fromValue(s),mt.fromValue(l))}},{key:"mentionsURI",value:function(t){var i="<"+t+">";return!!this.subjectIndex[i]||!!this.objectIndex[i]||!!this.predicateIndex[i]}},{key:"newExistential",value:function(t){if(!t)return this.bnode();var i=this.sym(t);return this.declareExistential(i)}},{key:"newPropertyAction",value:function(t,i){var s=this.id(t);this.propertyActions[s]||(this.propertyActions[s]=[]),this.propertyActions[s].push(i);for(var l=this.statementsMatching(void 0,t,void 0),a=!1,u=0;u<l.length;u++)a=a||i(this,l[u].subject,t,l[u].object);return a}},{key:"newUniversal",value:function(t){var i=this.sym(t);return this._universalVariables||(this._universalVariables=[]),this._universalVariables.push(i),i}},{key:"variable",value:function(t){return new yn(t)}},{key:"nextSymbol",value:function(t){for(var i=0;;i++){var s=t.value+"#n"+i;if(!this.mentionsURI(s))return this.sym(s)}}},{key:"query",value:function(t,i,s,l){return gu.call(this,t,i,s,l)}},{key:"querySync",value:function(t){var i=[];function s(u){i.push(u)}function l(){a=!0}var a=!1;if(t.sync=!0,gu.call(this,t,s,null,l),!a)throw new Error("Sync query should have called done function");return i}},{key:"remove",value:function(t){if(t instanceof Array){for(var i=0;i<t.length;i++)this.remove(t[i]);return this}if(Ga(t))return this.remove(t.statements);var s=this.statementsMatching(t.subject,t.predicate,t.object,t.graph);if(!s.length)throw new Error("Statement to be removed is not on store: "+t);return this.removeStatement(s[0]),this}},{key:"removeDocument",value:function(t){this.removeMetadata(t);for(var i=this.statementsMatching(void 0,void 0,void 0,t).slice(),s=0;s<i.length;s++)this.removeStatement(i[s]);return this.removeMatches(t,null,null),this}},{key:"removeMetadata",value:function(t){for(var i=this.sym("chrome://TheCurrentSession"),s="http://www.w3.org/2007/ont/link#",l=this.statementsMatching(void 0,this.sym("".concat(s,"requestedURI")),this.rdfFactory.literal(t.value),i).map(function(d){return d.subject}),a=0;a<l.length;a++){var u=l[a];if(u!=null){var o=void 0,f=this.any(u,this.sym("".concat(s,"status")),null,i);if(f!=null){o=this.statementsMatching(f,this.sym("".concat(s,"status")),null,i).slice();for(var h=0;h<o.length;h++)this.removeStatement(o[h])}var c=this.any(u,this.sym("".concat(s,"response")),null,i);if(c!=null){o=this.statementsMatching(c,null,null,i).slice();for(var h=0;h<o.length;h++)this.removeStatement(o[h])}o=this.statementsMatching(u,null,null,i).slice();for(var h=0;h<o.length;h++)this.removeStatement(o[h])}}return this.removeMatches(this.sym(t.value),null,null,i),this}},{key:"removeMany",value:function(t,i,s,l,a){for(var u=this.statementsMatching(t,i,s,l,!1),o=[],f=0;f<u.length;f++)o.push(u[f]);for(a&&(o=o.slice(0,a)),f=0;f<o.length;f++)this.remove(o[f])}},{key:"removeMatches",value:function(t,i,s,l){return this.removeMany(t,i,s,l),this}},{key:"removeStatement",value:function(t){for(var i=[t.subject,t.predicate,t.object,t.graph],s=0;s<4;s++){var l=this.canon(i[s]),a=this.id(l);this.index[s][a]&&this.rdfArrayRemove(this.index[s][a],t)}return this.rdfArrayRemove(this.statements,t),this}},{key:"removeStatements",value:function(t){for(var i=0;i<t.length;i++)this.remove(t[i]);return this}},{key:"replaceWith",value:function(t,i){for(var s=this.id(t),l=this.id(i),a=function(f){var h=f[s];if(h){var c=f[l];c?f[l]=h.concat(c):f[l]=h,delete f[s]}},u=0;u<4;u++)a(this.index[u]);if(this.redirections[s]=i,t.value){if(this.aliases[l]||(this.aliases[l]=[]),this.aliases[l].push(t),this.aliases[s])for(u=0;u<this.aliases[s].length;u++)this.redirections[this.id(this.aliases[s][u])]=i,this.aliases[l].push(this.aliases[s][u]);this.add(i,this.sym("http://www.w3.org/2007/ont/link#uri"),t),this.fetcher&&this.fetcher.nowKnownAs(t,i)}return a(this.classActions),a(this.propertyActions),!0}},{key:"allAliases",value:function(t){var i=this.aliases[this.id(this.canon(t))]||[];return i.push(this.canon(t)),i}},{key:"sameThings",value:function(t,i){if(t.equals(i))return!0;var s=this.canon(t);if(!s)return!1;var l=this.canon(i);return l?s.value===l.value:!1}},{key:"setPrefixForURI",value:function(t,i){if(!(t==="tab"&&this.namespaces.tab)&&!(t.slice(0,2)==="ns"||t.slice(0,7)==="default")){for(var s in this.namespaces)this.namespaces[s]==i&&delete this.namespaces[s];this.namespaces[t]=i}}},{key:"statementsMatching",value:function(t,i,s,l,a){var u=[t,i,s,l],o=[],f=[],h=[],c,d;for(c=0;c<4;c++)o[c]=this.canon(mt.fromValue(u[c])),o[c]&&(h.push(c),f[c]=this.id(o[c]));if(h.length===0)return this.statements;if(h.length===1)return c=h[0],d=this.index[c][f[c]],d&&a&&d.length>1&&(d=d.slice(0,1)),d=d||[],d;var _=1e10,w,k;for(k=0;k<h.length;k++){if(c=h[k],d=this.index[c][f[c]],!d)return[];d.length<_&&(_=d.length,w=k)}for(var C=h[w],U=this.index[C][f[C]],I=h.slice(0,w).concat(h.slice(w+1)),A=[],b=["subject","predicate","object","why"],y=0;y<U.length;y++){var v=U[y];for(k=0;k<I.length;k++)if(c=I[k],!this.canon(v[b[c]]).equals(o[c])){v=null;break}if(v!=null&&(A.push(v),a))break}return A}},{key:"uris",value:function(t){var i=this.canon(t),s=this.aliases[this.id(i)];if(!i.value)return[];var l=[i.value];if(s)for(var a=0;a<s.length;a++)l.push(s[a].uri);return l}},{key:"serialize",value:function(t,i,s,l){var a,u=(a=l)!==null&&a!==void 0&&a.namespaces?ti(ti({},this.namespaces),l.namespaces):ti({},this.namespaces);return l=ti(ti({},l||{}),{},{namespaces:u}),pi(s,this,t,i,void 0,l)}}],[{key:"defaultGraphURI",get:function(){return ci}}])}(Id);De(ki,"handleRDFType",void 0);ki.handleRDFType=Fd;function oi(n,r){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=c1(n))||r){e&&(n=e);var t=0,i=function(){};return{s:i,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(o){throw o},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,l=!1,a;return{s:function(){e=e.call(n)},n:function(){var o=e.next();return s=o.done,o},e:function(o){l=!0,a=o},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(l)throw a}}}}function c1(n,r){if(n){if(typeof n=="string")return bu(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return bu(n,r)}}function bu(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}var pn=Gt("http://www.w3.org/1999/02/22-rdf-syntax-ns#");function d1(n,r,e,t){var i=oi(n.statementsMatching(e,null,null,t)),s;try{for(i.s();!(s=i.n()).done;){var l=s.value,a=new mn(r,l.predicate,l.object,t);n.remove(l),n.add(a)}}catch(_){i.e(_)}finally{i.f()}var u=oi(n.statementsMatching(null,e,null,t)),o;try{for(u.s();!(o=u.n()).done;){var f=o.value;n.remove(f),n.add(new mn(f.subject,r,f.object,t))}}catch(_){u.e(_)}finally{u.f()}var h=oi(n.statementsMatching(null,null,e,t)),c;try{for(h.s();!(c=h.n()).done;){var d=c.value;n.remove(d),n.add(new mn(d.subject,d.predicate,r,t))}}catch(_){h.e(_)}finally{h.f()}}function h1(n,r){var e=pn("nil"),t=oi(n.statementsMatching(e,null,null,r)),i;try{for(t.s();!(i=t.n()).done;){var s=i.value;n.remove(s);var l=new $r;n.add(new mn(l,s.predicate,s.object,r))}}catch(h){t.e(h)}finally{t.f()}var a=oi(n.statementsMatching(null,null,e,r)),u;try{for(a.s();!(u=a.n()).done;){var o=u.value;if(!o.predicate.sameTerm(pn("rest"))){n.remove(o);var f=new $r;n.add(new mn(o.subject,o.predicate,f,r))}}}catch(h){a.e(h)}finally{a.f()}}function _1(n,r){function e(i,s,l){var a=n.statementsMatching(i,pn("rest"),null,r);if(a.length!==1)throw new Error("Bad list structure: no rest at ".concat(i));var u=n.statementsMatching(i,pn("first"),null,r);if(u.length!==1)throw new Error("Bad list structure: rest but ".concat(u.length," firsts at ").concat(i));var o=u[0].object,f=[o].concat(s),h=l.concat(a).concat(u),c=n.statementsMatching(null,pn("rest"),i,r);if(c.length===0){var d=new $r(f);n.remove(h),d1(n,d,i,r);return}if(c.length!==1)throw new Error("Bad list structure: ".concat(c.length," pres at ").concat(i));var _=c[0].subject;if(_.termType!=="BlankNode")throw new Error("Bad list element node ".concat(_," type: ").concat(_.termType," "));e(_,f,h)}h1(n,r);var t=n.statementsMatching(null,pn("rest"),pn("nil"),r);t.forEach(function(i){if(i.subject.termType!=="BlankNode")throw new Error("Bad list element node ".concat(i.subject," type: ").concat(i.subject.termType," "));e(i.subject,[],[])})}function p1(n){return encodeURI(n)}var g1={encode:function(r){r=r.replace(/\r\n/g,`
`);for(var e="",t=0;t<r.length;t++){var i=r.charCodeAt(t);i<128?e+=String.fromCharCode(i):i>127&&i<2048?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(i&63|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(i&63|128))}return e},decode:function(r){for(var e="",t=0;t<r.length;){var i=r.charCodeAt(t);i<128?(e+=String.fromCharCode(i),t++):i>191&&i<224?(e+=String.fromCharCode((i&31)<<6|r.charCodeAt(t+1)&63),t+=2):(e+=String.fromCharCode((i&15)<<12|(r.charCodeAt(t+1)&63)<<6|r.charCodeAt(t+2)&63),t+=3)}return e}},Ll="http://www.w3.org/2000/10/swap/log#",Lt=function(r){return r},Pt=function(r){return r},ri=function(r){if(r.length>0)throw"missing.js: oops nnonempty dict not imp";return[]},or=function(r){return r.length},Pl=function(r,e,t){if(typeof r.slice>"u")throw"@@ mising.js: No .slice function for "+r+" of type "+ar(r);return typeof t>"u"||t==null?r.slice(e):r.slice(e,t)},li=Error("dummy error stop iteration"),Wi=function(r){return this.last=0,this.li=r,this.next=function(){if(this.last==this.li.length)throw li;return this.li[this.last++]},this},ql=function(r,e){return r.indexOf(e)},hn=function(r,e){if(!r)throw e?"python Assertion failed: "+e:"(python) Assertion failed."},m1=function(r){return String.fromCharCode(r)};String.prototype.encode=function(n){if(n!="utf-8")throw"UTF8_converter: can only do utf-8";return g1.encode(this)};String.prototype.decode=function(n){if(n!="utf-8")throw"UTF8_converter: can only do utf-8";return this};var Ul=function(r,e){return dr(e,r)},v1=null,b1="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",wu="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",yu="http://www.w3.org/2002/07/owl#sameAs",w1="#",y1="http://www.w3.org/2001/XMLSchema#integer",k1="http://www.w3.org/2001/XMLSchema#double",D1="http://www.w3.org/2001/XMLSchema#decimal",E1="http://www.w3.org/2001/XMLSchema#date",T1="http://www.w3.org/2001/XMLSchema#dateTime",Od=`	\r
 !"#$%&'()*.,+/;<=>?@[\\]^\`{|}~`,_n=Od+":",Ml=new RegExp("^([-+]?[0-9]+)(\\.[0-9]+)?(e[-+]?[0-9]+)?","g"),ku=new RegExp("^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9](T[0-9][0-9]:[0-9][0-9](:[0-9][0-9](\\.[0-9]*)?)?)?Z?"),jl=new RegExp('[\\\\\\r\\n\\"]',"g"),Vl=new RegExp("^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*","g");function Ts(n,r,e,t,i,s,l,a){return new C1(n,r,e,t,i,s,l,a)}var C1=function(){function n(r,e,t,i,s,l,a,u){yt(this,n),typeof e>"u"&&(e=null),typeof t>"u"&&(t=""),typeof i>"u"&&(i=null),typeof s>"u"&&(s=""),typeof a>"u"&&(a=""),typeof u>"u"&&(u=null),this._bindings=new ri([]),this._flags=a,t!=""&&(hn(t.indexOf(":")>=0,"Document URI not absolute: "+t),this._bindings[""]=t+"#"),this._store=r,s&&r.setGenPrefix(s),this._thisDoc=t,this.source=r.sym(t),this.lines=0,this.statementCount=0,this.hasNil=!1,this.startOfLine=0,this.previousLine=0,this._genPrefix=s,this.keywords=new Pt(["a","this","bind","has","is","of","true","false"]),this.keywordsSet=0,this._anonymousNodes=new ri([]),this._variables=new ri([]),this._parentVariables=new ri([]),this._reason=u,this._reason2=null,i?this._baseURI=i:t?this._baseURI=t:this._baseURI=null,hn(!this._baseURI||this._baseURI.indexOf(":")>=0),this._genPrefix||(this._thisDoc?this._genPrefix=this._thisDoc+"#_g":this._genPrefix=RDFSink_uniqueURI()),e==null?this._thisDoc?this._formula=r.formula(t+"#_formula"):this._formula=r.formula():this._formula=e,this._context=this._formula,this._parentContext=null}return wt(n,[{key:"here",value:function(e){return this._genPrefix+"_L"+this.lines+"C"+(e-this.startOfLine+1)}},{key:"formula",value:function(){return this._formula}},{key:"loadStream",value:function(e){return this.loadBuf(e.read())}},{key:"loadBuf",value:function(e){return this.startDoc(),this.feed(e),this.endDoc()}},{key:"feed",value:function(e){for(var t=e.decode("utf-8"),i=0;i>=0;){var s=this.skipSpace(t,i);if(s<0)return;var i=this.directiveOrStatement(t,s);if(i<0)throw ze(this._thisDoc,this.lines,t,s,"expected directive or statement")}}},{key:"directiveOrStatement",value:function(e,t){var i=this.skipSpace(e,t);if(i<0)return i;var s=this.directive(e,i);if(s>=0)return this.checkDot(e,s);var s=this.statement(e,i);return s>=0?this.checkDot(e,s):s}},{key:"tok",value:function(e,t,i){if(t.slice(i,i+1)=="@")var i=i+1;else if(cr(this.keywords,e)<0)return-1;var s=i+or(e);return t.slice(i,s)==e&&Od.indexOf(t.charAt(s))>=0?s:-1}},{key:"directive",value:function(e,t){var o=this.skipSpace(e,t);if(o<0)return o;var i=new Pt([]),o=this.tok("bind",e,t);if(o>0)throw ze(this._thisDoc,this.lines,e,t,"keyword bind is obsolete: use @prefix");var o=this.tok("keywords",e,t);if(o>0){var t=this.commaSeparatedList(e,o,i,!1);if(t<0)throw ze(this._thisDoc,this.lines,e,t,"'@keywords' needs comma separated list of words");return this.setKeywords(Pl(i,null,null)),t}var o=this.tok("forAll",e,t);if(o>0){var t=this.commaSeparatedList(e,o,i,!0);if(t<0)throw ze(this._thisDoc,this.lines,e,t,"Bad variable list after @forAll");var s=new Wi(i);try{for(;;){var l=s.next();(cr(this._variables,l)<0||cr(this._parentVariables,l)>=0)&&(this._variables[l]=this._context.newUniversal(l))}}catch(h){if(h!=li)throw h}return t}var o=this.tok("forSome",e,t);if(o>0){var t=this.commaSeparatedList(e,o,i,this.uri_ref2);if(t<0)throw ze(this._thisDoc,this.lines,e,t,"Bad variable list after @forSome");var s=new Wi(i);try{for(;;){var l=s.next();this._context.declareExistential(l)}}catch(c){if(c!=li)throw c}return t}var o=this.tok("prefix",e,t);if(o>=0){var a=new Pt([]),t=this.qname(e,o,a);if(t<0)throw ze(this._thisDoc,this.lines,e,o,"expected qname after @prefix");var o=this.uri_ref2(e,t,a);if(o<0)throw ze(this._thisDoc,this.lines,e,t,"expected <uriref> after @prefix _qname_");var u=a[1].uri;if(this._baseURI)var u=Ul(this._baseURI,u);else hn(u.indexOf(":")>=0,"With no base URI, cannot handle relative URI for NS");return hn(u.indexOf(":")>=0),this._bindings[a[0][0]]=u,this.bind(a[0][0],p1(u)),o}var o=this.tok("base",e,t);if(o>=0){var a=new Pt([]),t=this.uri_ref2(e,o,a);if(t<0)throw ze(this._thisDoc,this.lines,e,o,"expected <uri> after @base ");var u=a[0].uri;if(this._baseURI)var u=Ul(this._baseURI,u);else throw ze(this._thisDoc,this.lines,e,o,"With no previous base URI, cannot use relative URI in @base  <"+u+">");return hn(u.indexOf(":")>=0),this._baseURI=u,t}return-1}},{key:"bind",value:function(e,t){e==""||this._store.setPrefixForURI(e,t)}},{key:"setKeywords",value:function(e){e==null?this.keywordsSet=0:(this.keywords=e,this.keywordsSet=1)}},{key:"startDoc",value:function(){}},{key:"endDoc",value:function(){return this.hasNil&&this._store.rdfFactory.supports.COLLECTIONS&&_1(this._store,this.source),this._formula}},{key:"makeStatement",value:function(e){e[0].add(e[2],e[1],e[3],this.source),(e[2].uri&&e[2].uri===wu||e[3].uri&&e[3].uri===wu)&&(this.hasNil=!0),this.statementCount+=1}},{key:"statement",value:function(e,s){var i=new Pt([]),s=this.object(e,s,i);if(s<0)return s;var l=this.property_list(e,s,i[0]);if(l<0)throw ze(this._thisDoc,this.lines,e,s,"expected propertylist");return l}},{key:"subject",value:function(e,t,i){return this.item(e,t,i)}},{key:"verb",value:function(e,t,i){var l=this.skipSpace(e,t);if(l<0)return l;var s=new Pt([]),l=this.tok("has",e,t);if(l>=0){var t=this.prop(e,l,s);if(t<0)throw ze(this._thisDoc,this.lines,e,l,"expected property after 'has'");return i.push(new Lt(["->",s[0]])),t}var l=this.tok("is",e,t);if(l>=0){var t=this.prop(e,l,s);if(t<0)throw ze(this._thisDoc,this.lines,e,l,"expected <property> after 'is'");var l=this.skipSpace(e,t);if(l<0)throw ze(this._thisDoc,this.lines,e,t,"End of file found, expected property after 'is'");var t=l,l=this.tok("of",e,t);if(l<0)throw ze(this._thisDoc,this.lines,e,t,"expected 'of' after 'is' <prop>");return i.push(new Lt(["<-",s[0]])),l}var l=this.tok("a",e,t);if(l>=0)return i.push(new Lt(["->",this._store.sym(b1)])),l;if(e.slice(t,t+2)=="<=")return i.push(new Lt(["<-",this._store.sym(Ll+"implies")])),t+2;if(e.slice(t,t+1)=="=")return e.slice(t+1,t+2)==">"?(i.push(new Lt(["->",this._store.sym(Ll+"implies")])),t+2):(i.push(new Lt(["->",this._store.sym(yu)])),t+1);if(e.slice(t,t+2)==":=")return i.push(new Lt(["->",Ll+"becomes"])),t+2;var l=this.prop(e,t,s);if(l>=0)return i.push(new Lt(["->",s[0]])),l;if(e.slice(t,t+2)==">-"||e.slice(t,t+2)=="<-")throw ze(this._thisDoc,this.lines,e,l,">- ... -> syntax is obsolete.");return-1}},{key:"prop",value:function(e,t,i){return this.item(e,t,i)}},{key:"item",value:function(e,t,i){return this.path(e,t,i)}},{key:"blankNode",value:function(e){return this._context.bnode(e,this._reason2)}},{key:"path",value:function(e,t,i){var s=this.nodeOrLiteral(e,t,i);if(s<0)return s;for(;"!^.".indexOf(e.slice(s,s+1))>=0;){var l=e.slice(s,s+1);if(l=="."){var a=e.slice(s+1,s+2);if(!a||_n.indexOf(a)>=0&&":?<[{(".indexOf(a)<0)break}var u=i.pop(),o=this.blankNode(this.here(s)),s=this.node(e,s+1,i);if(s<0)throw ze(this._thisDoc,this.lines,e,s,"EOF found in middle of path syntax");var f=i.pop();l=="^"?this.makeStatement(new Lt([this._context,f,o,u])):this.makeStatement(new Lt([this._context,f,u,o])),i.push(o)}return s}},{key:"anonymousNode",value:function(e){var t=this._anonymousNodes[e];if(t)return t;var t=this._store.bnode(e);return this._anonymousNodes[e]=t,t}},{key:"node",value:function(e,a,i,s){typeof s>"u"&&(s=null);var l=s,y=this.skipSpace(e,a);if(y<0)return y;var a=y,u=e.slice(a,a+1);if(u=="["){var o=this.here(a),y=this.skipSpace(e,a+1);if(y<0)throw ze(this._thisDoc,this.lines,e,a,"EOF after '['");if(e.slice(y,y+1)=="="){var a=y+1,f=new Pt([]),y=this.objectList(e,a,f);if(y>=0){var l=f[0];if(or(f)>1){var h=new Wi(f);try{for(;;){var c=h.next();this.makeStatement(new Lt([this._context,this._store.sym(yu),l,c]))}}catch(F){if(F!=li)throw F}}var y=this.skipSpace(e,y);if(y<0)throw ze(this._thisDoc,this.lines,e,a,"EOF when objectList expected after [ = ");if(e.slice(y,y+1)==";")var y=y+1}else throw ze(this._thisDoc,this.lines,e,a,"objectList expected after [= ")}if(l==null)var l=this.blankNode(o);var a=this.property_list(e,y,l);if(a<0)throw ze(this._thisDoc,this.lines,e,y,"property_list expected");var y=this.skipSpace(e,a);if(y<0)throw ze(this._thisDoc,this.lines,e,a,"EOF when ']' expected after [ <propertyList>");if(e.slice(y,y+1)!="]")throw ze(this._thisDoc,this.lines,e,y,"']' expected");return i.push(l),y+1}if(u=="{"){var d=e.slice(a+1,a+2);if(d=="$"){a+=1;for(var y=a+1,_=new Pt([]),w=!0;;){var a=this.skipSpace(e,y);if(a<0)throw ze(this._thisDoc,this.lines,e,a,"needed '$}', found end.");if(e.slice(a,a+2)=="$}"){var y=a+2;break}if(w)var w=!1;else if(e.slice(a,a+1)==",")a+=1;else throw ze(this._thisDoc,this.lines,e,a,"expected: ','");var k=new Pt([]),y=this.item(e,a,k);if(y<0)throw ze(this._thisDoc,this.lines,e,a,"expected item in set or '$}'");_.push(k[0])}return i.push(this._store.newSet(_,this._context)),y}else{var y=a+1,C=this._parentContext;this._parentContext=this._context;var U=this._anonymousNodes,I=this._parentVariables;this._parentVariables=this._variables,this._anonymousNodes=new ri([]),this._variables=this._variables.slice();var A=this._reason2;if(this._reason2=v1,l==null)var l=this._store.formula();for(this._context=l;;){var a=this.skipSpace(e,y);if(a<0)throw ze(this._thisDoc,this.lines,e,a,"needed '}', found end.");if(e.slice(a,a+1)=="}"){var y=a+1;break}var y=this.directiveOrStatement(e,a);if(y<0)throw ze(this._thisDoc,this.lines,e,a,"expected statement or '}'")}return this._anonymousNodes=U,this._variables=this._parentVariables,this._parentVariables=I,this._context=this._parentContext,this._reason2=A,this._parentContext=C,i.push(l.close()),y}}if(u=="("){var b=this._store.list,d=e.slice(a+1,a+2);if(d=="$"){var b=this._store.newSet;a+=1}for(var y=a+1,_=new Pt([]);;){var a=this.skipSpace(e,y);if(a<0)throw ze(this._thisDoc,this.lines,e,a,"needed ')', found end.");if(e.slice(a,a+1)==")"){var y=a+1;break}var k=new Pt([]),y=this.item(e,a,k);if(y<0)throw ze(this._thisDoc,this.lines,e,a,"expected item in list or ')'");_.push(k[0])}return i.push(b(_,this._context)),y}var y=this.tok("this",e,a);if(y>=0)throw ze(this._thisDoc,this.lines,e,a,"Keyword 'this' was ancient N3. Now use @forSome and @forAll keywords.");var y=this.tok("true",e,a);if(y>=0)return i.push(!0),y;var y=this.tok("false",e,a);if(y>=0)return i.push(!1),y;if(l==null){var y=this.uri_ref2(e,a,i);if(y>=0)return y}return-1}},{key:"property_list",value:function(e,t,i){for(;;){var d=this.skipSpace(e,t);if(d<0)throw ze(this._thisDoc,this.lines,e,t,"EOF found when expected verb in property list");if(e.slice(d,d+2)==":-"){var t=d+2,s=new Pt([]),d=this.node(e,t,s,i);if(d<0)throw ze(this._thisDoc,this.lines,e,t,"bad {} or () or [] node after :- ");var t=d;continue}var t=d,l=new Pt([]),d=this.verb(e,t,l);if(d<=0)return t;var a=new Pt([]),t=this.objectList(e,d,a);if(t<0)throw ze(this._thisDoc,this.lines,e,d,"objectList expected");var u=new Wi(a);try{for(;;){var o=u.next(),f=l[0],h=f[0],c=f[1];h=="->"?this.makeStatement(new Lt([this._context,c,i,o])):this.makeStatement(new Lt([this._context,c,o,i]))}}catch(w){if(w!=li)throw w}var d=this.skipSpace(e,t);if(d<0)throw ze(this._thisDoc,this.lines,e,d,"EOF found in list of objects");if(e.slice(t,t+1)!=";")return t;var t=t+1}}},{key:"commaSeparatedList",value:function(e,t,i,s){var l=this.skipSpace(e,t);if(l<0)throw ze(this._thisDoc,this.lines,e,l,"EOF found expecting comma sep list");if(e.charAt(l)==".")return t;if(s)var l=this.uri_ref2(e,l,i);else var l=this.bareWord(e,l,i);if(l<0)return-1;for(;;){var t=this.skipSpace(e,l);if(t<0)return t;var a=e.slice(t,t+1);if(a!=",")return a!="."?-1:t;if(s)var l=this.uri_ref2(e,t+1,i);else var l=this.bareWord(e,t+1,i);if(l<0)throw ze(this._thisDoc,this.lines,e,l,"bad list content")}}},{key:"objectList",value:function(e,s,i){var s=this.object(e,s,i);if(s<0)return-1;for(;;){var l=this.skipSpace(e,s);if(l<0)throw ze(this._thisDoc,this.lines,e,l,"EOF found after object");if(e.slice(l,l+1)!=",")return l;var s=this.object(e,l+1,i);if(s<0)return s}}},{key:"checkDot",value:function(e,t){var i=this.skipSpace(e,t);if(i<0)return i;if(e.slice(i,i+1)==".")return i+1;if(e.slice(i,i+1)=="}"||e.slice(i,i+1)=="]")return i;throw ze(this._thisDoc,this.lines,e,i,"expected '.' or '}' or ']' at end of statement")}},{key:"uri_ref2",value:function(e,c,i){var s=new Pt([]),l=this.qname(e,c,s);if(l>=0){var a=s[0],u=a[0],o=a[1];if(u==null){hn(0,"not used?");var f=this._baseURI+w1}else{var f=this._bindings[u];if(!f){if(u=="_")return i.push(this.anonymousNode(o)),l;throw ze(this._thisDoc,this.lines,e,c,"Prefix "+u+" not bound.")}}var h=this._store.sym(f+o);return cr(this._variables,h)>=0?i.push(this._variables[h]):i.push(h),l}var c=this.skipSpace(e,c);if(c<0)return-1;if(e.charAt(c)=="?"){var d=new Pt([]),l=this.variable(e,c,d);return l>0?(i.push(d[0]),l):-1}else if(e.charAt(c)=="<"){for(var c=c+1,_=c;c<or(e);){if(e.charAt(c)==">"){var w=e.slice(_,c);if(this._baseURI)var w=Ul(this._baseURI,w);else hn(w.indexOf(":")>=0,"With no base URI, cannot deal with relative URIs");if(e.slice(c-1,c)=="#"&&Pl(w,-1,null)!="#")var w=w+"#";var h=this._store.sym(w);return cr(this._variables,h)>=0?i.push(this._variables[h]):i.push(h),c+1}var c=c+1}throw ze(this._thisDoc,this.lines,e,l,"unterminated URI reference")}else if(this.keywordsSet){var d=new Pt([]),l=this.bareWord(e,c,d);if(l<0)return-1;if(cr(this.keywords,d[0])>=0)throw ze(this._thisDoc,this.lines,e,c,'Keyword "'+d[0]+'" not allowed here.');return i.push(this._store.sym(this._bindings[""]+d[0])),l}else return-1}},{key:"skipSpace",value:function(e,t){for(var i=` 
\r	\f\v            ​\u2028\u2029　`,s=t||0;s<e.length;s++){var l=e.charAt(s);if(i.indexOf(l)<0)if(e.charAt(s)==="#")for(;;s++){if(s===e.length)return-1;if(e.charAt(s)===`
`){this.lines=this.lines+1;break}}else return s;else e.charAt(s)===`
`&&(this.lines=this.lines+1)}return-1}},{key:"variable",value:function(e,l,i){var s=this.skipSpace(e,l);if(s<0||e.slice(s,s+1)!="?")return-1;var s=s+1,l=s;if("0123456789-".indexOf(e.charAt(s))>=0)throw ze(this._thisDoc,this.lines,e,s,"Varible name can't start with '"+e.charAt(s)+"s'");for(;l<or(e)&&_n.indexOf(e.charAt(l))<0;)var l=l+1;if(this._parentContext==null)throw ze(this._thisDoc,this.lines,e,s,"Can't use ?xxx syntax for variable in outermost level: "+e.slice(s-1,l));return i.push(this._store.variable(e.slice(s,l))),l}},{key:"bareWord",value:function(e,a,i){var s=this.skipSpace(e,a);if(s<0)return-1;var l=e.charAt(s);if("0123456789-".indexOf(l)>=0||_n.indexOf(l)>=0)return-1;for(var a=s;a<or(e)&&_n.indexOf(e.charAt(a))<0;)var a=a+1;return i.push(e.slice(s,a)),a}},{key:"qname",value:function(e,s,i){var s=this.skipSpace(e,s);if(s<0)return-1;var l=e.charAt(s);if("0123456789-+".indexOf(l)>=0)return-1;if(_n.indexOf(l)<0)for(var a=l,s=s+1;s<or(e);){var l=e.charAt(s);if(_n.indexOf(l)<0)var a=a+l,s=s+1;else break}else var a="";if(s<or(e)&&e.charAt(s)==":"){for(var u=a,s=s+1,a="";s<or(e);){var l=e.charAt(s);if(_n.indexOf(l)<0)var a=a+l,s=s+1;else break}return i.push(new Lt([u,a])),s}else return a&&this.keywordsSet&&cr(this.keywords,a)<0?(i.push(new Lt(["",a])),s):-1}},{key:"object",value:function(e,t,i){var s=this.subject(e,t,i);if(s>=0)return s;var s=this.skipSpace(e,t);if(s<0)return-1;var t=s,l=null,a=e.charAt(t);if(a=='"'||a=="'"){e.slice(t,t+3==a+a)?l=a+a+a:l=a;var t=t+or(l),u=this.strconst(e,t,l),s=u[0],o=u[1];return i.push(this._store.literal(o)),s}else return-1}},{key:"nodeOrLiteral",value:function(e,t,i){var s=this.node(e,t,i);if(s>=0)return s;var s=this.skipSpace(e,t);if(s<0)return-1;var t=s,l=e.charAt(t);if("-+0987654321".indexOf(l)>=0){ku.lastIndex=0;var a=ku.exec(e.slice(t));if(a!=null){var u=a[0];s=t+u.length,u.indexOf("T")>=0?i.push(this._store.literal(u,this._store.sym(T1))):i.push(this._store.literal(u,this._store.sym(E1)))}else{Ml.lastIndex=0;var a=Ml.exec(e.slice(t));if(a==null)throw ze(this._thisDoc,this.lines,e,t,"Bad number or date syntax");s=t+Ml.lastIndex;var u=e.slice(t,s);u.indexOf("e")>=0?i.push(this._store.literal(parseFloat(u),this._store.sym(k1))):e.slice(t,s).indexOf(".")>=0?i.push(this._store.literal(parseFloat(u),this._store.sym(D1))):i.push(this._store.literal(parseInt(u),this._store.sym(y1)))}return s}if(e.charAt(t)=='"'){if(e.slice(t,t+3)=='"""')var o='"""';else var o='"';var t=t+or(o),f=null,h=this.strconst(e,t,o),s=h[0],c=h[1],d=null;if(e.slice(s,s+1)=="@"){Vl.lastIndex=0;var a=Vl.exec(e.slice(s+1));if(a==null)throw ze(this._thisDoc,startline,e,t,"Bad language code syntax on string literal, after @");var t=Vl.lastIndex+s+1,d=e.slice(s+1,t),s=t}if(e.slice(s,s+2)=="^^")var _=new Pt([]),s=this.uri_ref2(e,s+2,_),f=_[0];return i.push(this._store.literal(c,d||f)),s}else return-1}},{key:"strconst",value:function(e,t,i){for(var s=t,l="",a=this.lines;s<or(e);){var t=s+or(i);if(e.slice(s,t)==i)return new Lt([t,l]);if(e.charAt(s)=='"'){var l=l+'"',s=s+1;continue}jl.lastIndex=0;var u=jl.exec(e.slice(s));if(!u)throw ze(this._thisDoc,a,e,s,"Closing quote missing in string at ^ in "+e.slice(s-20,s)+"^"+e.slice(s,s+20));var t=s+jl.lastIndex-1,l=l+e.slice(s,t),o=e.charAt(t);if(o=='"'){var s=t;continue}else if(o=="\r"){var s=t+1;continue}else if(o==`
`){if(i=='"')throw ze(this._thisDoc,a,e,t,"newline found in string literal");this.lines=this.lines+1;var l=l+o,s=t+1;this.previousLine=this.startOfLine,this.startOfLine=s}else if(o=="\\"){var s=t+1,o=e.slice(s,s+1);if(!o)throw ze(this._thisDoc,a,e,t,"unterminated string literal (2)");var f=ql('abfrtvn\\"',o);if(f>=0)var h=`a\b\f\r	\v
\\"`.charAt(f),l=l+h,s=s+1;else if(o=="u")var c=this.uEscape(e,s+1,a),s=c[0],o=c[1],l=l+o;else if(o=="U")var c=this.UEscape(e,s+1,a),s=c[0],o=c[1],l=l+o;else throw ze(this._thisDoc,this.lines,e,t,"bad escape")}}throw ze(this._thisDoc,this.lines,e,t,"unterminated string literal")}},{key:"uEscape",value:function(e,t,i){for(var s=t,l=0,a=0;l<4;){var u=e.slice(s,s+1),o=u.toLowerCase(),s=s+1;if(o=="")throw ze(this._thisDoc,i,e,t,"unterminated string literal(3)");var f=ql("0123456789abcdef",o);if(f<0)throw ze(this._thisDoc,i,e,t,"bad string literal hex escape");var a=a*16+f,l=l+1}var h=String.fromCharCode(a);return new Lt([s,h])}},{key:"UEscape",value:function(e,t,i){for(var s=t,l=0,a="\\U";l<8;){var u=e.slice(s,s+1),o=u.toLowerCase(),s=s+1;if(o=="")throw ze(this._thisDoc,i,e,t,"unterminated string literal(3)");var f=ql("0123456789abcdef",o);if(f<0)throw ze(this._thisDoc,i,e,t,"bad string literal hex escape");var a=a+o,l=l+1}var h=m1("0x"+Pl(a,2,10)-0);return new Lt([s,h])}}])}();function ze(n,r,e,t,i){var s=r+1,l="Line "+s+" of <"+n+">: Bad syntax: "+i+`
at: "`+e.slice(t,t+30)+'"',a=new SyntaxError(l,n,s);return a.lineNo=s,a.characterInFile=t,a.syntaxProblem=i,a}function Du(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,t)}return e}function Eu(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Du(Object(e),!0).forEach(function(t){De(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Du(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}var ns=Eu(Eu({},gr),{},{supports:De(De(De(De(De(De(De({},Kt.collections,!0),Kt.defaultGraphType,!1),Kt.equalsMethod,!0),Kt.identity,!1),Kt.id,!0),Kt.reversibleId,!1),Kt.variableType,!0),collection:function(r){return new $r(r)},id:function(r){var e=this;return hs(r)?"( ".concat(r.elements.map(function(t){return e.id(t)}).join(", ")," )"):i0(r)?yn.toString(r):gr.id(r)},termToNQ:function(r){return r.termType===ln?$r.toNT(r):gr.termToNQ(r)}});function Cs(n,r){return typeof r=="string"?n.rdfFactory.literal(r):Object.prototype.hasOwnProperty.call(r,"@list")?n.rdfFactory.supports.COLLECTIONS===!0?A1(n,r["@list"]):N1(n,r):Object.prototype.hasOwnProperty.call(r,"@id")?Ns(n,r):Object.prototype.hasOwnProperty.call(r,"@language")?n.rdfFactory.literal(r["@value"],r["@language"]):Object.prototype.hasOwnProperty.call(r,"@type")?n.rdfFactory.literal(r["@value"],n.rdfFactory.namedNode(r["@type"])):Object.prototype.hasOwnProperty.call(r,"@value")?n.rdfFactory.literal(r["@value"]):n.rdfFactory.literal(r)}function N1(n,r){var e=r["@id"]?Ns(n,r):n.rdfFactory.blankNode(),t=r["@list"].map(function(s){return Cs(n,s)}),i=Ad(n.rdfFactory,e,t);return n.addAll(i),e}function A1(n,r){if(!Array.isArray(r))throw new TypeError("Object must be an array");return n.rdfFactory.collection(r.map(function(e){return Cs(n,e)}))}function Bd(n,r,e,t){var i=e&&Object.prototype.hasOwnProperty.call(e,"termType")?e.value:e;return Tp(()=>import("../chunks/jsonld.OPIS_L8g.js").then(s=>s.j),__vite__mapDeps([0,1,2]),import.meta.url).then(function(s){return s.flatten(JSON.parse(n),null,{base:i})}).then(function(s){return s.reduce(function(l,a){return r=Ld(r,e,a),r},r)}).then(t).catch(t)}function Ns(n,r){return r["@id"].startsWith("_:")?n.rdfFactory.blankNode(r["@id"].substring(2)):n.rdfFactory.namedNode(r["@id"])}function Ld(n,r,e){for(var t=e["@id"]?Ns(n,e):n.rdfFactory.blankNode(),i=0,s=Object.keys(e);i<s.length;i++){var l=s[i];if(l!=="@id"){if(l=="@graph")for(var a=t,u=e[l],o=0;o<u.length;o++)n=Ld(n,a,u[o]);var f=e[l];if(Array.isArray(f))for(var h=0;h<f.length;h++)n.addStatement(Tu(n,t,l,f[h],r));else n.addStatement(Tu(n,t,l,f,r))}}return n}function Tu(n,r,e,t,i){var s,l;return e==="@type"?(s=n.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),l=n.rdfFactory.namedNode(t)):(s=n.rdfFactory.namedNode(e),l=Cs(n,t)),n.rdfFactory.quad(r,s,l,n.rdfFactory.namedNode(i))}/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let Cu;var S1=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:fs):n=>(Cu||(Cu=Promise.resolve())).then(n).catch(r=>setTimeout(()=>{throw r},0));const I1=dl(S1),ni="http://www.w3.org/1999/02/22-rdf-syntax-ns#",ii="http://www.w3.org/2001/XMLSchema#",Hl="http://www.w3.org/2000/10/swap/",Ar={xsd:{decimal:`${ii}decimal`,boolean:`${ii}boolean`,double:`${ii}double`,integer:`${ii}integer`,string:`${ii}string`},rdf:{type:`${ni}type`,nil:`${ni}nil`,first:`${ni}first`,rest:`${ni}rest`,langString:`${ni}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${Hl}reify#forSome`,forAll:`${Hl}reify#forAll`},log:{implies:`${Hl}log#implies`}},{xsd:Qi}=Ar,R1=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,Nu={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},F1=/[\x00-\x20<>\\"\{\}\|\^\`]/,O1={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},B1=/$0^/;class L1{constructor(r){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,r=r||{},this._lineMode=!!r.lineMode){this._n3Mode=!1;for(const e in this)!(e in O1)&&this[e]instanceof RegExp&&(this[e]=B1)}else this._n3Mode=r.n3!==!1;this._comments=!!r.comments,this._literalClosingPos=0}_tokenizeToEnd(r,e){let t=this._input,i=t.length;for(;;){let a,u;for(;a=this._newline.exec(t);)this._comments&&(u=this._comment.exec(a[0]))&&s("comment",u[1],"",this._line,a[0].length),t=t.substr(a[0].length,t.length),i=t.length,this._line++;if(!a&&(a=this._whitespace.exec(t))&&(t=t.substr(a[0].length,t.length)),this._endOfFile.test(t))return e&&(this._comments&&(u=this._comment.exec(t))&&s("comment",u[1],"",this._line,t.length),t=null,s("eof","","",this._line,0)),this._input=t;const o=this._line,f=t[0];let h="",c="",d="",_=null,w=0,k=!1;switch(f){case"^":if(t.length<3)break;if(t[1]==="^"){if(this._previousMarker="^^",t=t.substr(2),t[0]!=="<"){k=!0;break}}else{this._n3Mode&&(w=1,h="^");break}case"<":if(_=this._unescapedIri.exec(t))h="IRI",c=_[1];else if(_=this._iri.exec(t)){if(c=this._unescape(_[1]),c===null||F1.test(c))return l(this);h="IRI"}else t.length>1&&t[1]==="<"?(h="<<",w=2):this._n3Mode&&t.length>1&&t[1]==="="&&(h="inverse",w=2,c=">");break;case">":t.length>1&&t[1]===">"&&(h=">>",w=2);break;case"_":((_=this._blank.exec(t))||e&&(_=this._blank.exec(`${t} `)))&&(h="blank",d="_",c=_[1]);break;case'"':if(_=this._simpleQuotedString.exec(t))c=_[1];else if({value:c,matchLength:w}=this._parseLiteral(t),c===null)return l(this);(_!==null||w!==0)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(_=this._simpleApostropheString.exec(t))c=_[1];else if({value:c,matchLength:w}=this._parseLiteral(t),c===null)return l(this);(_!==null||w!==0)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(_=this._variable.exec(t))&&(h="var",c=_[0]);break;case"@":this._previousMarker==="literal"&&(_=this._langcode.exec(t))?(h="langcode",c=_[1]):(_=this._keyword.exec(t))&&(h=_[0]);break;case".":if(t.length===1?e:t[1]<"0"||t[1]>"9"){h=".",w=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(_=this._number.exec(t)||e&&(_=this._number.exec(`${t} `)))&&(h="literal",c=_[0],d=typeof _[1]=="string"?Qi.double:typeof _[2]=="string"?Qi.decimal:Qi.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(_=this._sparqlKeyword.exec(t))?h=_[0].toUpperCase():k=!0;break;case"f":case"t":(_=this._boolean.exec(t))?(h="literal",c=_[0],d=Qi.boolean):k=!0;break;case"a":(_=this._shortPredicates.exec(t))?(h="abbreviation",c="a"):k=!0;break;case"=":this._n3Mode&&t.length>1&&(h="abbreviation",t[1]!==">"?(w=1,c="="):(w=2,c=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(w=1,h=f);break;case"{":!this._lineMode&&t.length>=2&&(t[1]==="|"?(h="{|",w=2):(h=f,w=1));break;case"|":t.length>=2&&t[1]==="}"&&(h="|}",w=2);break;default:k=!0}if(k&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(_=this._prefix.exec(t))?(h="prefix",c=_[1]||""):((_=this._prefixed.exec(t))||e&&(_=this._prefixed.exec(`${t} `)))&&(h="prefixed",d=_[1]||"",c=this._unescape(_[2]))),this._previousMarker==="^^")switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return e||!/^'''|^"""/.test(t)&&/\n|\r/.test(t)?l(this):this._input=t;const C=w||_[0].length,U=s(h,c,d,o,C);this.previousToken=U,this._previousMarker=h,t=t.substr(C,t.length)}function s(a,u,o,f,h){const c=t?i-t.length:i,d=c+h,_={type:a,value:u,prefix:o,line:f,start:c,end:d};return r(null,_),_}function l(a){r(a._syntaxError(/^\S*/.exec(t)[0]))}}_unescape(r){let e=!1;const t=r.replace(R1,(i,s,l,a)=>{if(typeof s=="string")return String.fromCharCode(Number.parseInt(s,16));if(typeof l=="string"){let u=Number.parseInt(l,16);return u<=65535?String.fromCharCode(Number.parseInt(l,16)):String.fromCharCode(55296+((u-=65536)>>10),56320+(u&1023))}return a in Nu?Nu[a]:(e=!0,"")});return e?null:t}_parseLiteral(r){if(r.length>=3){const e=r.match(/^(?:"""|"|'''|'|)/)[0],t=e.length;let i=Math.max(this._literalClosingPos,t);for(;(i=r.indexOf(e,i))>0;){let s=0;for(;r[i-s-1]==="\\";)s++;if(s%2===0){const l=r.substring(t,i),a=l.split(/\r\n|\r|\n/).length-1,u=i+t;if(t===1&&a!==0||t===3&&this._lineMode)break;return this._line+=a,{value:this._unescape(l),matchLength:u}}i++}this._literalClosingPos=r.length-t+1}return{value:"",matchLength:0}}_syntaxError(r){this._input=null;const e=new Error(`Unexpected "${r}" on line ${this._line}.`);return e.context={token:void 0,line:this._line,previousToken:this.previousToken},e}_readStartingBom(r){return r.startsWith("\uFEFF")?r.substr(1):r}tokenize(r,e){if(this._line=1,typeof r=="string")if(this._input=this._readStartingBom(r),typeof e=="function")I1(()=>this._tokenizeToEnd(e,!0));else{const t=[];let i;if(this._tokenizeToEnd((s,l)=>s?i=s:t.push(l),!0),i)throw i;return t}else this._pendingBuffer=null,typeof r.setEncoding=="function"&&r.setEncoding("utf8"),r.on("data",t=>{this._input!==null&&t.length!==0&&(this._pendingBuffer&&(t=Ep.Buffer.concat([this._pendingBuffer,t]),this._pendingBuffer=null),t[t.length-1]&128?this._pendingBuffer=t:(typeof this._input>"u"?this._input=this._readStartingBom(typeof t=="string"?t:t.toString()):this._input+=t,this._tokenizeToEnd(e,!1)))}),r.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(e,!0)}),r.on("error",e)}}const{rdf:P1,xsd:On}=Ar;let gl,q1=0;const U1={namedNode:z1,blankNode:X1,variable:W1,literal:G1,defaultGraph:Q1,quad:Au,triple:Au};class an{constructor(r){this.id=r}get value(){return this.id}equals(r){return r instanceof an?this.id===r.id:!!r&&this.termType===r.termType&&this.value===r.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}let Pd=class extends an{get termType(){return"NamedNode"}},zl=class qd extends an{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const r=this.id;let e=r.lastIndexOf('"')+1;return e<r.length&&r[e++]==="@"?r.substr(e).toLowerCase():""}get datatype(){return new Pd(this.datatypeString)}get datatypeString(){const r=this.id,e=r.lastIndexOf('"')+1,t=e<r.length?r[e]:"";return t==="^"?r.substr(e+2):t!=="@"?On.string:P1.langString}equals(r){return r instanceof qd?this.id===r.id:!!r&&!!r.datatype&&this.termType===r.termType&&this.value===r.value&&this.language===r.language&&this.datatype.value===r.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}},M1=class extends an{constructor(r){super(`_:${r}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}},j1=class extends an{constructor(r){super(`?${r}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}},V1=class extends an{constructor(){return super(""),gl||this}get termType(){return"DefaultGraph"}equals(r){return this===r||!!r&&this.termType===r.termType}};gl=new V1;let H1=class extends an{constructor(r,e,t,i){super(""),this._subject=r,this._predicate=e,this._object=t,this._graph=i||gl}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(r){return!!r&&this._subject.equals(r.subject)&&this._predicate.equals(r.predicate)&&this._object.equals(r.object)&&this._graph.equals(r.graph)}};function z1(n){return new Pd(n)}function X1(n){return new M1(n||`n3-${q1++}`)}function G1(n,r){if(typeof r=="string")return new zl(`"${n}"@${r.toLowerCase()}`);let e=r?r.value:"";return e===""&&(typeof n=="boolean"?e=On.boolean:typeof n=="number"&&(Number.isFinite(n)?e=Number.isInteger(n)?On.integer:On.double:(e=On.double,Number.isNaN(n)||(n=n>0?"INF":"-INF")))),e===""||e===On.string?new zl(`"${n}"`):new zl(`"${n}"^^${e}`)}function W1(n){return new j1(n)}function Q1(){return gl}function Au(n,r,e,t){return new H1(n,r,e,t)}let Su=0;class Ud{constructor(r){this._contextStack=[],this._graph=null,r=r||{},this._setBase(r.baseIRI),r.factory&&Md(this,r.factory);const e=typeof r.format=="string"?r.format.match(/\w*$/)[0].toLowerCase():"",t=/turtle/.test(e),i=/trig/.test(e),s=/triple/.test(e),l=/quad/.test(e),a=this._n3Mode=/n3/.test(e),u=s||l;(this._supportsNamedGraphs=!(t||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(t||i||s||a),this._supportsRDFStar=e===""||/star|\*$/.test(e),u&&(this._resolveRelativeIRI=o=>null),this._blankNodePrefix=typeof r.blankNodePrefix!="string"?"":r.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=r.lexer||new L1({lineMode:u,n3:a}),this._explicitQuantifiers=!!r.explicitQuantifiers}static _resetBlankNodePrefix(){Su=0}_setBase(r){if(!r)this._base="",this._basePath="";else{const e=r.indexOf("#");e>=0&&(r=r.substr(0,e)),this._base=r,this._basePath=r.indexOf("/")<0?r:r.replace(/[^\/?]*(?:\?.*)?$/,""),r=r.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=r[0],this._baseScheme=r[1]}}_saveContext(r,e,t,i,s){const l=this._n3Mode;this._contextStack.push({type:r,subject:t,predicate:i,object:s,graph:e,inverse:l?this._inversePredicate:!1,blankPrefix:l?this._prefixes._:"",quantified:l?this._quantified:null}),l&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(r,e){const t=this._contextStack.pop();if(!t||t.type!==r)return this._error(`Unexpected ${e.type}`,e);this._subject=t.subject,this._predicate=t.predicate,this._object=t.object,this._graph=t.graph,this._n3Mode&&(this._inversePredicate=t.inverse,this._prefixes._=t.blankPrefix,this._quantified=t.quantified)}_readInTopContext(r){switch(r.type){case"eof":return this._graph!==null?this._error("Unclosed graph",r):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(r)}}_readEntity(r,e){let t;switch(r.type){case"IRI":case"typeIRI":const i=this._resolveIRI(r.value);if(i===null)return this._error("Invalid IRI",r);t=this._namedNode(i);break;case"type":case"prefixed":const s=this._prefixes[r.prefix];if(s===void 0)return this._error(`Undefined prefix "${r.prefix}:"`,r);t=this._namedNode(s+r.value);break;case"blank":t=this._blankNode(this._prefixes[r.prefix]+r.value);break;case"var":t=this._variable(r.value.substr(1));break;default:return this._error(`Expected entity but got ${r.type}`,r)}return!e&&this._n3Mode&&t.id in this._quantified&&(t=this._quantified[t.id]),t}_readSubject(r){switch(this._predicate=null,r.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",r);case"}":return this._readPunctuation(r);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',r);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',r);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",r);if(r.prefix.length===0)return this._literalValue=r.value,this._completeSubjectLiteral;this._subject=this._literal(r.value,this._namedNode(r.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",r);default:if((this._subject=this._readEntity(r))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(r){const e=r.type;switch(e){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[r.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${e}`,r):(this._subject=null,e==="]"?this._readBlankNodeTail(r):this._readPunctuation(r));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",r);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",r);default:if((this._predicate=this._readEntity(r))===void 0)return}return this._readObject}_readObject(r){switch(r.type){case"literal":if(r.prefix.length===0)return this._literalValue=r.value,this._readDataTypeOrLang;this._object=this._literal(r.value,this._namedNode(r.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",r);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",r);default:if((this._object=this._readEntity(r))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(r){return r.type==="{"?this._readGraph(r):this._readPredicate(r)}_readGraph(r){return r.type!=="{"?this._error(`Expected graph but got ${r.type}`,r):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(r){return r.type==="]"?(this._subject=null,this._readBlankNodeTail(r)):(this._predicate=null,this._readPredicate(r))}_readBlankNodeTail(r){if(r.type!=="]")return this._readBlankNodePunctuation(r);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const e=this._predicate===null;return this._restoreContext("blank",r),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:e?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(r){switch(r.type){case".":case"}":return this._subject=null,this._readPunctuation(r);default:return this._readPredicate(r)}}_readListItem(r){let e=null,t=null,i=this._readListItem;const s=this._subject,l=this._contextStack,a=l[l.length-1];switch(r.type){case"[":this._saveContext("blank",this._graph,t=this._blankNode(),this.RDF_FIRST,this._subject=e=this._blankNode()),i=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,t=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",r),l.length!==0&&l[l.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(i=this._readPredicate,this._subject===this.RDF_NIL)return i}else if(i=this._getContextEndReader(),this._object===this.RDF_NIL)return i;t=this.RDF_NIL;break;case"literal":r.prefix.length===0?(this._literalValue=r.value,i=this._readListItemDataTypeOrLang):(e=this._literal(r.value,this._namedNode(r.prefix)),i=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",r);default:if((e=this._readEntity(r))===void 0)return}if(t===null&&(this._subject=t=this._blankNode()),s===null?a.predicate===null?a.subject=t:a.object=t:this._emit(s,this.RDF_REST,t,this._graph),e!==null){if(this._n3Mode&&(r.type==="IRI"||r.type==="prefixed"))return this._saveContext("item",this._graph,t,this.RDF_FIRST,e),this._subject=e,this._predicate=null,this._getPathReader(this._readListItem);this._emit(t,this.RDF_FIRST,e,this._graph)}return i}_readDataTypeOrLang(r){return this._completeObjectLiteral(r,!1)}_readListItemDataTypeOrLang(r){return this._completeObjectLiteral(r,!0)}_completeLiteral(r){let e=this._literal(this._literalValue);switch(r.type){case"type":case"typeIRI":const t=this._readEntity(r);if(t===void 0)return;e=this._literal(this._literalValue,t),r=null;break;case"langcode":e=this._literal(this._literalValue,r.value),r=null;break}return{token:r,literal:e}}_completeSubjectLiteral(r){return this._subject=this._completeLiteral(r).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(r,e){const t=this._completeLiteral(r);if(t)return this._object=t.literal,e&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),t.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(t.token))}_readFormulaTail(r){return r.type!=="}"?this._readPunctuation(r):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",r),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(r){let e,t=this._graph;const i=this._subject,s=this._inversePredicate;switch(r.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",r);if(this._n3Mode)return this._readFormulaTail(r);this._graph=null;case".":this._subject=null,e=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":e=this._readPredicate;break;case",":e=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",r);const l=this._predicate,a=this._object;this._subject=this._quad(i,l,a,this.DEFAULTGRAPH),e=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",r);this._subject=null,e=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(t=this._readEntity(r))!==void 0){e=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,r)}if(i!==null){const l=this._predicate,a=this._object;s?this._emit(a,l,i,t):this._emit(i,l,a,t)}return e}_readBlankNodePunctuation(r){let e;switch(r.type){case";":e=this._readPredicate;break;case",":e=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,r)}return this._emit(this._subject,this._predicate,this._object,this._graph),e}_readQuadPunctuation(r){return r.type!=="."?this._error("Expected dot to follow quad",r):this._readInTopContext}_readPrefix(r){return r.type!=="prefix"?this._error("Expected prefix to follow @prefix",r):(this._prefix=r.value,this._readPrefixIRI)}_readPrefixIRI(r){if(r.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,r);const e=this._readEntity(r);return this._prefixes[this._prefix]=e.value,this._prefixCallback(this._prefix,e),this._readDeclarationPunctuation}_readBaseIRI(r){const e=r.type==="IRI"&&this._resolveIRI(r.value);return e?(this._setBase(e),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",r)}_readNamedGraphLabel(r){switch(r.type){case"IRI":case"blank":case"prefixed":return this._readSubject(r),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",r)}}_readNamedGraphBlankLabel(r){return r.type!=="]"?this._error("Invalid graph label",r):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(r){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(r)):r.type!=="."?this._error("Expected declaration to end with a dot",r):this._readInTopContext}_readQuantifierList(r){let e;switch(r.type){case"IRI":case"prefixed":if((e=this._readEntity(r,!0))!==void 0)break;default:return this._error(`Unexpected ${r.type}`,r)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,e,this.QUANTIFIERS_GRAPH)):this._quantified[e.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(r){return r.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(r))}_getPathReader(r){return this._afterPath=r,this._readPath}_readPath(r){switch(r.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const e=this._contextStack,t=e.length&&e[e.length-1];if(t&&t.type==="item"){const i=this._subject;this._restoreContext("item",r),this._emit(this._subject,this.RDF_FIRST,i,this._graph)}return this._afterPath(r)}}_readForwardPath(r){let e,t;const i=this._blankNode();if((t=this._readEntity(r))!==void 0)return this._predicate===null?(e=this._subject,this._subject=i):(e=this._object,this._object=i),this._emit(e,t,i,this._graph),this._readPath}_readBackwardPath(r){const e=this._blankNode();let t,i;if((t=this._readEntity(r))!==void 0)return this._predicate===null?(i=this._subject,this._subject=e):(i=this._object,this._object=e),this._emit(e,t,i,this._graph),this._readPath}_readRDFStarTailOrGraph(r){return r.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(r))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,r):this._readRDFStarTail(r)}_readRDFStarTail(r){if(r.type!==">>")return this._error(`Expected >> but got ${r.type}`,r);const e=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",r),this._subject===null?(this._subject=e,this._readPredicate):(this._object=e,this._getContextEndReader())}_getContextEndReader(){const r=this._contextStack;if(!r.length)return this._readPunctuation;switch(r[r.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(r,e,t,i){this._callback(null,this._quad(r,e,t,i||this.DEFAULTGRAPH))}_error(r,e){const t=new Error(`${r} on line ${e.line}.`);t.context={token:e,line:e.line,previousToken:this._lexer.previousToken},this._callback(t),this._callback=Xl}_resolveIRI(r){return/^[a-z][a-z0-9+.-]*:/i.test(r)?r:this._resolveRelativeIRI(r)}_resolveRelativeIRI(r){if(!r.length)return this._base;switch(r[0]){case"#":return this._base+r;case"?":return this._base.replace(/(?:\?.*)?$/,r);case"/":return(r[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(r);default:return/^[^/:]*:/.test(r)?null:this._removeDotSegments(this._basePath+r)}}_removeDotSegments(r){if(!/(^|\/)\.\.?($|[/#?])/.test(r))return r;const e=r.length;let t="",i=-1,s=-1,l=0,a="/";for(;i<e;){switch(a){case":":if(s<0&&r[++i]==="/"&&r[++i]==="/")for(;(s=i+1)<e&&r[s]!=="/";)i=s;break;case"?":case"#":i=e;break;case"/":if(r[i+1]===".")switch(a=r[++i+1],a){case"/":t+=r.substring(l,i-1),l=i+1;break;case void 0:case"?":case"#":return t+r.substring(l,i)+r.substr(i+1);case".":if(a=r[++i+1],a===void 0||a==="/"||a==="?"||a==="#"){if(t+=r.substring(l,i-2),(l=t.lastIndexOf("/"))>=s&&(t=t.substr(0,l)),a!=="/")return`${t}/${r.substr(i+1)}`;l=i+1}}}a=r[++i]}return t+r.substring(l)}parse(r,e,t){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${Su++}_`,this._prefixCallback=t||Xl,this._inversePredicate=!1,this._quantified=Object.create(null),!e){const i=[];let s;if(this._callback=(l,a)=>{l?s=l:a&&i.push(a)},this._lexer.tokenize(r).every(l=>this._readCallback=this._readCallback(l)),s)throw s;return i}this._callback=e,this._lexer.tokenize(r,(i,s)=>{i!==null?(this._callback(i),this._callback=Xl):this._readCallback&&(this._readCallback=this._readCallback(s))})}}function Xl(){}function Md(n,r){const e=r.namedNode;n._namedNode=e,n._blankNode=r.blankNode,n._literal=r.literal,n._variable=r.variable,n._quad=r.quad,n.DEFAULTGRAPH=r.defaultGraph(),n.RDF_FIRST=e(Ar.rdf.first),n.RDF_REST=e(Ar.rdf.rest),n.RDF_NIL=e(Ar.rdf.nil),n.N3_FORALL=e(Ar.r.forAll),n.N3_FORSOME=e(Ar.r.forSome),n.ABBREVIATIONS={a:e(Ar.rdf.type),"=":e(Ar.owl.sameAs),">":e(Ar.log.implies)},n.QUANTIFIERS_GRAPH=e("urn:n3:quantifiers")}Md(Ud.prototype,U1);if(typeof Kr>"u")var Kr={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};var hr=function(){function n(r,e){yt(this,n),this.options=e||{},this.kb=r,this.target=e.target||{graph:{subjects:{},prefixes:{},terms:{}}},this.blankNodes=[],this.htmlOptions={selfClosing:"br img input area base basefont col colgroup source wbr isindex link meta param hr"},this.theOne="_:"+new Date().getTime(),this.language=null,this.vocabulary=null,this.blankCounter=0,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}],this.inXHTMLMode=!1,this.absURIRE=/[\w\_\-]+:\S+/,this.finishedHandlers=[],this.init()}return wt(n,[{key:"addTriple",value:function(e,t,i,s){var l,a,u,o;typeof t>"u"?l=gr.namedNode(this.options.base):l=this.toRDFNodeObject(t),u=this.toRDFNodeObject(i),a=this.toRDFNodeObject(s),o=gr.namedNode(this.options.base),this.kb.add(l,u,a,o)}},{key:"ancestorPath",value:function(e){for(var t="";e&&e.nodeType!==Kr.DOCUMENT_NODE;)t="/"+e.localName+t,e=e.parentNode;return t}},{key:"copyMappings",value:function(e){var t={};for(var i in e)t[i]=e[i];return t}},{key:"copyProperties",value:function(){}},{key:"deriveDateTimeType",value:function(e){for(var t=0;t<n.dateTimeTypes.length;t++){var i=n.dateTimeTypes[t].pattern.exec(e);if(i&&i[0].length===e.length)return n.dateTimeTypes[t].type}return null}},{key:"init",value:function(){}},{key:"newBlankNode",value:function(){return this.blankCounter++,"_:"+this.blankCounter}},{key:"newSubjectOrigin",value:function(e,t){}},{key:"parseCURIE",value:function(e,t,i){var s=e.indexOf(":"),l;if(s>=0){var a=e.substring(0,s);if(a==="")return l=t[""],l?l+e.substring(s+1):null;if(a==="_")return"_:"+e.substring(s+1);if(n.NCNAME.test(a)&&(l=t[a],l))return l+e.substring(s+1)}return null}},{key:"parseCURIEOrURI",value:function(e,t,i){var s=this.parseCURIE(e,t,i);return s||this.resolveAndNormalize(i,e)}},{key:"parsePredicate",value:function(e,t,i,s,l,a){if(e==="")return null;var u=this.parseTermOrCURIEOrAbsURI(e,t,a?null:i,s,l);return u&&u.indexOf("_:")===0?null:u}},{key:"parsePrefixMappings",value:function(e,t){for(var i=this.tokenize(e),s=null,l=0;l<i.length;l++)i[l][i[l].length-1]===":"?s=i[l].substring(0,i[l].length-1):s&&(t[s]=this.options.base?dr(i[l],this.options.base):i[l],s=null)}},{key:"parseSafeCURIEOrCURIEOrURI",value:function(e,t,i){return e=this.trim(e),e.charAt(0)==="["&&e.charAt(e.length-1)==="]"?(e=e.substring(1,e.length-1),e=e.trim(e),e.length===0?null:e==="_:"?this.theOne:this.parseCURIE(e,t,i)):this.parseCURIEOrURI(e,t,i)}},{key:"parseTermOrCURIEOrAbsURI",value:function(e,t,i,s,l){e=this.trim(e);var a=this.parseCURIE(e,s,l);if(a)return a;if(i){if(t&&!this.absURIRE.exec(e))return t+e;var u=i[e];if(u)return u;var o=e.toLowerCase();if(u=i[o],u)return u}return this.absURIRE.exec(e)?this.resolveAndNormalize(l,e):null}},{key:"parseTermOrCURIEOrURI",value:function(e,t,i,s,l){e=this.trim(e);var a=this.parseCURIE(e,s,l);if(a)return a;var u=i[e];if(u)return u;var o=e.toLowerCase();return u=i[o],u||(t&&!this.absURIRE.exec(e)?t+e:this.resolveAndNormalize(l,e))}},{key:"parseURI",value:function(e){return e}},{key:"process",value:function(e,t){t=t||{};var i;e.nodeType===Kr.DOCUMENT_NODE?(e.baseURI&&!t.baseURI&&(t.baseURI=e.baseURI),i=e.baseURI,e=e.documentElement,e.baseURI||(e.baseURI=i),this.setContext(e)):e.parentNode.nodeType===Kr.DOCUMENT_NODE&&this.setContext(e);var s=[],l=function(Ht){if(!Ht&&t&&t.baseURI)return t.baseURI;var xn=Ht.indexOf("#");return xn>=0&&(Ht=Ht.substring(0,xn)),t&&t.baseURIMap&&(Ht=t.baseURIMap(Ht)),Ht};for(s.push({current:e,context:this.push(null,l(e.baseURI))});s.length>0;){var a=s.shift();if(a.parent){if(a.context.parent&&a.context.parent.listMapping===a.listMapping)continue;for(var u in a.listMapping){var o=a.listMapping[u];if(o.length===0){this.addTriple(a.parent,a.subject,u,{type:n.objectURI,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});continue}for(var f=[],h=0;h<o.length;h++)f.push(this.newBlankNode());for(var c=0;c<f.length;c++)this.addTriple(a.parent,f[c],"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",o[c]),this.addTriple(a.parent,f[c],"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",{type:n.objectURI,value:c+1<f.length?f[c+1]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});this.addTriple(a.parent,a.subject,u,{type:n.objectURI,value:f[0]})}continue}var d=a.current,_=a.context,w=!1,k=null,C=null,U=null,I=_.prefixes,A=!1,b=[],y=_.listMapping,v=!_.parent,R=_.language,T=_.vocabulary;i=this.parseURI(l(d.baseURI)),d.item=null;var B=d.getAttributeNode("vocab");if(B){var D=this.trim(B.value);if(D.length>0){T=D;var L=i.spec;this.addTriple(d,L,"http://www.w3.org/ns/rdfa#usesVocabulary",{type:n.objectURI,value:T})}else T=this.vocabulary}for(var F=0;F<d.attributes.length;F++){var N=d.attributes[F];if(N.nodeName.charAt(0)==="x"&&N.nodeName.indexOf("xmlns:")===0){A||(I=this.copyMappings(I),A=!0);var H=N.nodeName.substring(6),O=n.trim(N.value);I[H]=this.options.base?dr(O,this.options.base):O}}var ne=d.getAttributeNode("prefix");ne&&(A||(I=this.copyMappings(I),A=!0),this.parsePrefixMappings(ne.value,I));for(var Q=null,z=0;!Q&&z<this.langAttributes.length;z++)Q=d.getAttributeNodeNS(this.langAttributes[z].namespaceURI,this.langAttributes[z].localName);if(Q){var Y=n.trim(Q.value);Y.length>0?R=Y:R=null}var x=d.getAttributeNode("rel"),$=d.getAttributeNode("rev"),V=d.getAttributeNode("typeof"),ie=d.getAttributeNode("property"),Re=d.getAttributeNode("datatype"),Le=this.inHTMLMode?d.getAttributeNode("datetime"):null,he=d.getAttributeNode("content"),me=d.getAttributeNode("about"),oe=d.getAttributeNode("src"),Ee=d.getAttributeNode("resource"),$e=d.getAttributeNode("href"),ft=d.getAttributeNode("inlist"),rt=[],ge,Se;if(x){Se=this.tokenize(x.value);for(var lr=0;lr<Se.length;lr++)ge=this.parsePredicate(Se[lr],T,_.terms,I,i,this.inHTMLMode&&ie!==null),ge&&rt.push(ge)}var jt=[];if($){Se=this.tokenize($.value);for(var Yt=0;Yt<Se.length;Yt++)ge=this.parsePredicate(Se[Yt],T,_.terms,I,i,this.inHTMLMode&&ie),ge&&jt.push(ge)}if(this.inHTMLMode&&(x||$)&&ie&&(rt.length===0&&(x=null),jt.length===0&&($=null)),x||$?(me&&(k=this.parseSafeCURIEOrCURIEOrURI(me.value,I,i)),V&&(U=k),k||(d.parentNode.nodeType===Kr.DOCUMENT_NODE?k=l(d.baseURI):_.parentObject&&(k=l(d.parentNode.baseURI)===_.parentObject?l(d.baseURI):_.parentObject)),Ee&&(C=this.parseSafeCURIEOrCURIEOrURI(Ee.value,I,i)),C||($e?C=this.resolveAndNormalize(i,encodeURI($e.value)):oe?C=this.resolveAndNormalize(i,encodeURI(oe.value)):V&&!me&&!(this.inXHTMLMode&&(d.localName==="head"||d.localName==="body"))&&(C=this.newBlankNode())),V&&!me&&this.inXHTMLMode&&(d.localName==="head"||d.localName==="body")?U=k:V&&!me&&(U=C)):ie&&!he&&!Re?(me&&(k=this.parseSafeCURIEOrCURIEOrURI(me.value,I,i),V&&(U=k)),!k&&d.parentNode.nodeType===Kr.DOCUMENT_NODE?(k=l(d.baseURI),V&&(U=k)):!k&&_.parentObject&&(k=l(d.parentNode.baseURI)===_.parentObject?l(d.baseURI):_.parentObject),V&&!U&&(Ee&&(U=this.parseSafeCURIEOrCURIEOrURI(Ee.value,I,i)),!U&&$e&&(U=this.resolveAndNormalize(i,encodeURI($e.value))),!U&&oe&&(U=this.resolveAndNormalize(i,encodeURI(oe.value))),!U&&(this.inXHTMLMode||this.inHTMLMode)&&(d.localName==="head"||d.localName==="body")&&(U=k),U||(U=this.newBlankNode()),C=U)):(me&&(k=this.parseSafeCURIEOrCURIEOrURI(me.value,I,i)),!k&&Ee&&(k=this.parseSafeCURIEOrCURIEOrURI(Ee.value,I,i)),!k&&$e&&(k=this.resolveAndNormalize(i,encodeURI($e.value))),!k&&oe&&(k=this.resolveAndNormalize(i,encodeURI(oe.value))),k||(d.parentNode.nodeType===Kr.DOCUMENT_NODE?k=l(d.baseURI):(this.inXHTMLMode||this.inHTMLMode)&&(d.localName==="head"||d.localName==="body")?k=l(d.parentNode.baseURI)===_.parentObject?l(d.baseURI):_.parentObject:V?k=this.newBlankNode():_.parentObject&&(k=l(d.parentNode.baseURI)===_.parentObject?l(d.baseURI):_.parentObject,ie||(w=!0))),V&&(U=k)),k&&(me||Ee||U)){var wr=k;V&&!me&&!Ee&&C&&(wr=C),this.newSubjectOrigin(d,wr)}if(U){Se=this.tokenize(V.value);for(var Te=0;Te<Se.length;Te++){var We=this.parseTermOrCURIEOrAbsURI(Se[Te],T,_.terms,I,i);We&&this.addTriple(d,U,n.typeURI,{type:n.objectURI,value:We})}}if(k&&k!==_.parentObject&&(y={},v=!0),C){if(x&&ft)for(var He=0;He<rt.length;He++){var Qe=y[rt[He]];Qe||(Qe=[],y[rt[He]]=Qe),Qe.push({type:n.objectURI,value:C})}else if(x)for(var at=0;at<rt.length;at++)this.addTriple(d,k,rt[at],{type:n.objectURI,value:C});if($)for(var Xt=0;Xt<jt.length;Xt++)this.addTriple(d,C,jt[Xt],{type:n.objectURI,value:k})}else{if(k&&!C&&(x||$)&&(C=this.newBlankNode()),x&&ft)for(var Ut=0;Ut<rt.length;Ut++){var _r=y[rt[Ut]];_r||(_r=[],y[ge]=_r),b.push({predicate:rt[Ut],list:_r})}else if(x)for(var pr=0;pr<rt.length;pr++)b.push({predicate:rt[pr],forward:!0});if($)for(var ur=0;ur<jt.length;ur++)b.push({predicate:jt[ur],forward:!1})}if(ie){var ut=null,Je=null;Re?(ut=Re.value===""?n.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(Re.value,T,_.terms,I,i),Le&&!he?Je=Le.value:Je=ut===n.XMLLiteralURI||ut===n.HTMLLiteralURI?null:he?he.value:d.textContent):he?(ut=n.PlainLiteralURI,Je=he.value):Le?(Je=Le.value,ut=n.deriveDateTimeType(Je),ut||(ut=n.PlainLiteralURI)):!x&&!$&&(Ee&&(Je=this.parseSafeCURIEOrCURIEOrURI(Ee.value,I,i)),!Je&&$e?Je=this.resolveAndNormalize(i,encodeURI($e.value)):!Je&&oe&&(Je=this.resolveAndNormalize(i,encodeURI(oe.value))),Je&&(ut=n.objectURI)),ut||(V&&!me?(ut=n.objectURI,Je=U):(Je=d.textContent,this.inHTMLMode&&d.localName==="time"&&(ut=n.deriveDateTimeType(Je)),ut||(ut=n.PlainLiteralURI))),Se=this.tokenize(ie.value);for(var Nt=0;Nt<Se.length;Nt++){var vt=this.parsePredicate(Se[Nt],T,_.terms,I,i);if(vt)if(ft){var Ae=y[vt];Ae||(Ae=[],y[vt]=Ae),Ae.push(ut===n.XMLLiteralURI||ut===n.HTMLLiteralURI?{type:ut,value:d.childNodes}:{type:ut||n.PlainLiteralURI,value:Je,language:R})}else ut===n.XMLLiteralURI||ut===n.HTMLLiteralURI?this.addTriple(d,k,vt,{type:ut,value:d.childNodes}):this.addTriple(d,k,vt,{type:ut||n.PlainLiteralURI,value:Je,language:R})}}if(k&&!w)for(var je=0;je<_.incomplete.length;je++)_.incomplete[je].list?_.incomplete[je].list.push({type:n.objectURI,value:k}):_.incomplete[je].forward?this.addTriple(d,_.subject,_.incomplete[je].predicate,{type:n.objectURI,value:k}):this.addTriple(d,k,_.incomplete[je].predicate,{type:n.objectURI,value:_.subject});var et=null,Vt=k;w?(et=this.push(_,_.subject),et.parentObject=l(d.parentNode.baseURI)===_.parentObject?l(d.baseURI):_.parentObject,et.incomplete=_.incomplete,et.language=R,et.prefixes=I,et.vocabulary=T):(et=this.push(_,k),et.parentObject=C||k||_.subject,et.prefixes=I,et.incomplete=b,C&&(Vt=C,y={},v=!0),et.listMapping=y,et.language=R,et.vocabulary=T),v&&s.unshift({parent:d,context:_,subject:Vt,listMapping:y});for(var xt=d.lastChild;xt;xt=xt.previousSibling)xt.nodeType===Kr.ELEMENT_NODE&&s.unshift({current:xt,context:et})}this.inHTMLMode&&this.copyProperties();for(var Jt=0;Jt<this.finishedHandlers.length;Jt++)this.finishedHandlers[Jt](e)}},{key:"push",value:function(e,t){return{parent:e,subject:t||(e?e.subject:null),parentObject:null,incomplete:[],listMapping:e?e.listMapping:{},language:e?e.language:this.language,prefixes:e?e.prefixes:this.target.graph.prefixes,terms:e?e.terms:this.target.graph.terms,vocabulary:e?e.vocabulary:this.vocabulary}}},{key:"resolveAndNormalize",value:function(e,t){return dr(t,e)}},{key:"setContext",value:function(e){e.localName==="html"&&e.getAttribute("version")==="XHTML+RDFa 1.1"?this.setXHTMLContext():e.localName==="html"||e.namespaceURI==="http://www.w3.org/1999/xhtml"?typeof document<"u"&&document.doctype?document.doctype.publicId==="-//W3C//DTD XHTML+RDFa 1.0//EN"&&document.doctype.systemId==="http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"?(console.log("WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode."),this.setHTMLContext()):document.doctype.publicId==="-//W3C//DTD XHTML+RDFa 1.1//EN"&&document.doctype.systemId==="http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"?this.setXHTMLContext():this.setHTMLContext():this.setHTMLContext():this.setXMLContext()}},{key:"setHTMLContext",value:function(){this.setInitialContext(),this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.inXHTMLMode=!1,this.inHTMLMode=!0}},{key:"setInitialContext",value:function(){this.vocabulary=null,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}]}},{key:"setXHTMLContext",value:function(){this.setInitialContext(),this.inXHTMLMode=!0,this.inHTMLMode=!1,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.target.graph.terms.alternate="http://www.w3.org/1999/xhtml/vocab#alternate",this.target.graph.terms.appendix="http://www.w3.org/1999/xhtml/vocab#appendix",this.target.graph.terms.bookmark="http://www.w3.org/1999/xhtml/vocab#bookmark",this.target.graph.terms.cite="http://www.w3.org/1999/xhtml/vocab#cite",this.target.graph.terms.chapter="http://www.w3.org/1999/xhtml/vocab#chapter",this.target.graph.terms.contents="http://www.w3.org/1999/xhtml/vocab#contents",this.target.graph.terms.copyright="http://www.w3.org/1999/xhtml/vocab#copyright",this.target.graph.terms.first="http://www.w3.org/1999/xhtml/vocab#first",this.target.graph.terms.glossary="http://www.w3.org/1999/xhtml/vocab#glossary",this.target.graph.terms.help="http://www.w3.org/1999/xhtml/vocab#help",this.target.graph.terms.icon="http://www.w3.org/1999/xhtml/vocab#icon",this.target.graph.terms.index="http://www.w3.org/1999/xhtml/vocab#index",this.target.graph.terms.last="http://www.w3.org/1999/xhtml/vocab#last",this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license",this.target.graph.terms.meta="http://www.w3.org/1999/xhtml/vocab#meta",this.target.graph.terms.next="http://www.w3.org/1999/xhtml/vocab#next",this.target.graph.terms.prev="http://www.w3.org/1999/xhtml/vocab#prev",this.target.graph.terms.previous="http://www.w3.org/1999/xhtml/vocab#previous",this.target.graph.terms.section="http://www.w3.org/1999/xhtml/vocab#section",this.target.graph.terms.stylesheet="http://www.w3.org/1999/xhtml/vocab#stylesheet",this.target.graph.terms.subsection="http://www.w3.org/1999/xhtml/vocab#subsection",this.target.graph.terms.start="http://www.w3.org/1999/xhtml/vocab#start",this.target.graph.terms.top="http://www.w3.org/1999/xhtml/vocab#top",this.target.graph.terms.up="http://www.w3.org/1999/xhtml/vocab#up",this.target.graph.terms.p3pv1="http://www.w3.org/1999/xhtml/vocab#p3pv1",this.target.graph.terms.related="http://www.w3.org/1999/xhtml/vocab#related",this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role",this.target.graph.terms.transformation="http://www.w3.org/1999/xhtml/vocab#transformation"}},{key:"setXMLContext",value:function(){this.setInitialContext(),this.inXHTMLMode=!1,this.inHTMLMode=!1}},{key:"tokenize",value:function(e){return this.trim(e).split(/\s+/)}},{key:"toRDFNodeObject",value:function(e){var t=this;if(!(typeof e>"u")){if(typeof e=="string")return e.substring(0,2)==="_:"?(typeof this.blankNodes[e.substring(2)]>"u"&&(this.blankNodes[e.substring(2)]=new Fr(e.substring(2))),this.blankNodes[e.substring(2)]):gr.namedNode(e);switch(e.type){case n.objectURI:return e.value.substring(0,2)==="_:"?(typeof this.blankNodes[e.value.substring(2)]>"u"&&(this.blankNodes[e.value.substring(2)]=new Fr(e.value.substring(2))),this.blankNodes[e.value.substring(2)]):gr.namedNode(e.value);case n.PlainLiteralURI:return new Sr(e.value,e.language||"");case n.XMLLiteralURI:case n.HTMLLiteralURI:var i="";return Object.keys(e.value).forEach(function(s){i+=G0(e.value[s],t.htmlOptions)}),new Sr(i,"",new Mt(e.type));default:return new Sr(e.value,"",new Mt(e.type))}}}},{key:"trim",value:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}],[{key:"parseRDFaDOM",value:function(e,t,i){var s=new n(t,{base:i});e.baseURI||(e.baseURI=i),s.process(e,{baseURI:i})}},{key:"tokenize",value:function(e){return this.trim(e).split(/\s+/)}},{key:"trim",value:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}])}();hr.XMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral";hr.HTMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML";hr.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral";hr.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object";hr.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";hr.nameChar="[-A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�က0-F.0-9·̀-ͯ‿-⁀]";hr.nameStartChar="[A-Za-zÀ-ÖØ-öø-ÿĀ-ıĴ-ľŁ-ňŊ-žƀ-ǃǍ-ǰǴ-ǵǺ-ȗɐ-ʨʻ-ˁΆΈ-ΊΌΎ-ΡΣ-ώϐ-ϖϚϜϞϠϢ-ϳЁ-ЌЎ-яё-ќў-ҁҐ-ӄӇ-ӈӋ-ӌӐ-ӫӮ-ӵӸ-ӹԱ-Ֆՙա-ֆא-תװ-ײء-غف-يٱ-ڷں-ھۀ-ێې-ۓەۥ-ۦअ-हऽक़-ॡঅ-ঌএ-ঐও-নপ-রলশ-হড়-ঢ়য়-ৡৰ-ৱਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઋઍએ-ઑઓ-નપ-રલ-ળવ-હઽૠଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଶ-ହଽଡ଼-ଢ଼ୟ-ୡஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-வஷ-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠ-ౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹೞೠ-ೡഅ-ഌഎ-ഐഒ-നപ-ഹൠ-ൡก-ฮะา-ำเ-ๅກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ຮະາ-ຳຽເ-ໄཀ-ཇཉ-ཀྵႠ-Ⴥა-ჶᄀᄂ-ᄃᄅ-ᄇᄉᄋ-ᄌᄎ-ᄒᄼᄾᅀᅌᅎᅐᅔ-ᅕᅙᅟ-ᅡᅣᅥᅧᅩᅭ-ᅮᅲ-ᅳᅵᆞᆨᆫᆮ-ᆯᆷ-ᆸᆺᆼ-ᇂᇫᇰᇹḀ-ẛẠ-ỹἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼΩK-Å℮ↀ-ↂぁ-ゔァ-ヺㄅ-ㄬ가-힣一-龥〇〡-〩_]";hr.NCNAME=new RegExp("^"+hr.nameStartChar+hr.nameChar+"*$");hr.dateTimeTypes=[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:"http://www.w3.org/2001/XMLSchema#duration"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#dateTime"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#date"},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#time"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:"http://www.w3.org/2001/XMLSchema#gYearMonth"},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:"http://www.w3.org/2001/XMLSchema#gYear"}];var al=hr.parseRDFaDOM,ml=function(){function n(r){yt(this,n),this.store=r,this.bnodes={},this.why=null,this.reify=!1}return wt(n,[{key:"frameFactory",value:function(e,t,i){return{NODE:1,ARC:2,parent:t,parser:e,store:e.store,element:i,lastChild:0,base:null,lang:null,node:null,nodeType:null,listIndex:1,rdfid:null,datatype:null,collection:!1,terminateFrame:function(){this.collection&&this.node.close()},addSymbol:function(l,a){a=dr(a,this.base),this.node=this.store.sym(a),this.nodeType=l},loadTriple:function(){if(this.parent.parent.collection?this.parent.parent.node.append(this.node):this.store.add(this.parent.parent.node,this.parent.node,this.node,this.parser.why),this.parent.rdfid!=null){var l=this.store.sym(dr("#"+this.parent.rdfid,this.base));this.store.add(l,this.store.sym(n.ns.RDF+"type"),this.store.sym(n.ns.RDF+"Statement"),this.parser.why),this.store.add(l,this.store.sym(n.ns.RDF+"subject"),this.parent.parent.node,this.parser.why),this.store.add(l,this.store.sym(n.ns.RDF+"predicate"),this.parent.node,this.parser.why),this.store.add(l,this.store.sym(n.ns.RDF+"object"),this.node,this.parser.why)}},isTripleToLoad:function(){return this.parent!=null&&this.parent.parent!=null&&this.nodeType===this.NODE&&this.parent.nodeType===this.ARC&&this.parent.parent.nodeType===this.NODE},addNode:function(l){this.addSymbol(this.NODE,l),this.isTripleToLoad()&&this.loadTriple()},addCollection:function(){this.nodeType=this.NODE,this.node=this.store.collection(),this.collection=!0,this.isTripleToLoad()&&this.loadTriple()},addCollectionArc:function(){this.nodeType=this.ARC},addBNode:function(l){l!=null?this.parser.bnodes[l]!=null?this.node=this.parser.bnodes[l]:this.node=this.parser.bnodes[l]=this.store.bnode():this.node=this.store.bnode(),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()},addArc:function(l){l===n.ns.RDF+"li"&&(l=n.ns.RDF+"_"+this.parent.listIndex,this.parent.listIndex++),this.addSymbol(this.ARC,l)},addLiteral:function(l){this.parent.datatype&&this.parent.datatype!==n.ns.RDF+"langString"?this.node=this.store.literal(l,this.store.sym(this.parent.datatype)):this.node=this.store.literal(l,this.lang),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()}}}},{key:"getAttributeNodeNS",value:function(e,t,i){var s=null;if(e.getAttributeNodeNS)s=e.getAttributeNodeNS(t,i);else for(var l=e.attributes,a,u,o=0;o<l.length;++o)if(a=l[o],a.namespaceURI===t&&(u=a.prefix?a.prefix+":"+i:i,u===a.nodeName)){s=a;break}return s}},{key:"parse",value:function(e,t,i){var s=e.childNodes;this.cleanParser();var l;if(e.nodeType===n.nodeType.DOCUMENT){for(var a=0;a<s.length;a++)if(s[a].nodeType===n.nodeType.ELEMENT){l=s[a];break}}else if(e.nodeType===n.nodeType.ELEMENT)l=e;else throw new Error("RDFParser: can't find root in "+t+". Halting. ");this.why=i;var u=this.frameFactory(this);return this.base=t,u.base=t,u.lang=null,this.parseDOM(this.buildFrame(u,l)),!0}},{key:"parseDOM",value:function(e){for(var t,i=(function(b){var y="";if(b.namespaceURI==null)throw new Error("RDF/XML syntax error: No namespace for "+b.localName+" in "+this.base);return b.namespaceURI&&(y=y+b.namespaceURI),b.localName?y=y+b.localName:b.nodeName&&(b.nodeName.indexOf(":")>=0?y=y+b.nodeName.split(":")[1]:y=y+b.nodeName),y}).bind(this),s=!0;e.parent;){var l=e.element,a=l.attributes;if(l.nodeType===n.nodeType.TEXT||l.nodeType===n.nodeType.CDATA_SECTION)e.parent.nodeType===e.NODE&&(e.addArc(n.ns.RDF+"value"),e=this.buildFrame(e)),e.addLiteral(l.nodeValue);else if(i(l)!==n.ns.RDF+"RDF")if(e.parent&&e.parent.collection&&(e.addCollectionArc(),e=this.buildFrame(e,e.element),e.parent.element=null),!e.parent||!e.parent.nodeType||e.parent.nodeType===e.ARC){var u=this.getAttributeNodeNS(l,n.ns.RDF,"about");if(t=this.getAttributeNodeNS(l,n.ns.RDF,"ID"),u&&t)throw new Error("RDFParser: "+l.nodeName+" has both rdf:id and rdf:about. Halting. Only one of these properties may be specified on a node.");if(!u&&t)e.addNode("#"+t.nodeValue),l.removeAttributeNode(t);else if(u==null&&t==null){var o=this.getAttributeNodeNS(l,n.ns.RDF,"nodeID");o?(e.addBNode(o.nodeValue),l.removeAttributeNode(o)):e.addBNode()}else e.addNode(u.nodeValue),l.removeAttributeNode(u);var f=this.getAttributeNodeNS(l,n.ns.RDF,"type");n.ns.RDF+"Description"!==i(l)&&(f={nodeValue:i(l)}),f!=null&&(this.store.add(e.node,this.store.sym(n.ns.RDF+"type"),this.store.sym(dr(f.nodeValue,e.base)),this.why),f.nodeName&&l.removeAttributeNode(f));for(var h=a.length-1;h>=0;h--)this.store.add(e.node,this.store.sym(i(a[h])),this.store.literal(a[h].nodeValue,e.lang),this.why)}else{e.addArc(i(l)),this.reify&&(t=this.getAttributeNodeNS(l,n.ns.RDF,"ID"),t&&(e.rdfid=t.nodeValue,l.removeAttributeNode(t)));var c=this.getAttributeNodeNS(l,n.ns.RDF,"parseType"),d=this.getAttributeNodeNS(l,n.ns.RDF,"datatype");if(d&&(e.datatype=d.nodeValue,l.removeAttributeNode(d)),c){var _=c.nodeValue;_==="Literal"?(e.datatype=n.ns.RDF+"XMLLiteral",e=this.buildFrame(e),e.addLiteral(l.innerHTML||l.childNodes),s=!1):_==="Resource"?(e=this.buildFrame(e,e.element),e.parent.element=null,e.addBNode()):_==="Collection"&&(e=this.buildFrame(e,e.element),e.parent.element=null,e.addCollection()),l.removeAttributeNode(c)}if(a.length!==0){var w=this.getAttributeNodeNS(l,n.ns.RDF,"resource"),k=this.getAttributeNodeNS(l,n.ns.RDF,"nodeID");e=this.buildFrame(e),w?(e.addNode(w.nodeValue),l.removeAttributeNode(w)):k?(e.addBNode(k.nodeValue),l.removeAttributeNode(k)):e.addBNode();for(var C=a.length-1;C>=0;C--){var U=this.buildFrame(e);U.addArc(i(a[C])),i(a[C])===n.ns.RDF+"type"?this.buildFrame(U).addNode(a[C].nodeValue):this.buildFrame(U).addLiteral(a[C].nodeValue)}}else l.childNodes.length===0&&this.buildFrame(e).addLiteral("")}for(l=e.element;e.parent;){for(var I=e;l==null;)e=e.parent,l=e.element;var A=l.childNodes&&l.childNodes[e.lastChild];if(!A||!s){if(e.terminateFrame(),!(e=e.parent))break;l=e.element,s=!0}else if(A.nodeType!==n.nodeType.ELEMENT&&A.nodeType!==n.nodeType.TEXT&&A.nodeType!==n.nodeType.CDATA_SECTION||(A.nodeType===n.nodeType.TEXT||A.nodeType===n.nodeType.CDATA_SECTION)&&l.childNodes.length!==1)e.lastChild++;else{e.lastChild++,e=this.buildFrame(I,l.childNodes[e.lastChild-1]);break}}}}},{key:"cleanParser",value:function(){this.bnodes={},this.why=null}},{key:"buildFrame",value:function(e,t){var i=this.frameFactory(this,e,t);if(e&&(i.base=e.base,i.lang=e.lang),!t||t.nodeType===n.nodeType.TEXT||t.nodeType===n.nodeType.CDATA_SECTION)return i;var s=t.attributes,l=t.getAttributeNode("xml:base");l!=null&&(i.base=l.nodeValue,t.removeAttribute("xml:base"));var a=t.getAttributeNode("xml:lang");a!=null&&(i.lang=a.nodeValue,t.removeAttribute("xml:lang"));for(var u=s.length-1;u>=0;u--)if(s[u].nodeName.substr(0,3)==="xml"){if(s[u].name.slice(0,6)==="xmlns:"){var o=s[u].nodeValue;this.base&&(o=dr(o,this.base)),this.store.setPrefixForURI(s[u].name.slice(6),o)}t.removeAttributeNode(s[u])}return i}}])}();De(ml,"ns",{RDF:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDFS:"http://www.w3.org/2000/01/rdf-schema#"});De(ml,"nodeType",{ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12});function Y1(n,r,e){var t,i,s,l=["INSERT","DELETE","WHERE"],a=Gt("http://www.w3.org/ns/pim/patch#"),u=Ts(r,r,e,e,null,null,"",null),o={},f=function(k,C,U,I,A){return"Line "+(C+1)+" of <"+k+`>: Bad syntax:
   `+A+`
   at: "`+U.slice(I,I+30)+'"'};t=0;var h=r.sym(e+"#query");for(o.query=h;;){if(i=u.skipSpace(n,t),i<0)return o;if(n[i]===";"){if(t=u.skipSpace(n,i+1),t<0)return o;i=t}var c=!1;for(s=0;s<l.length;s++){var d=l[s];if(n.slice(i,i+d.length)===d){if(t=u.skipSpace(n,i+d.length),t<0)throw f(u._thisDoc,u.lines,n,i+d.length,"found EOF, needed {...} after "+d);if((d==="INSERT"||d==="DELETE")&&n.slice(t,t+4)==="DATA"){if(i=u.skipSpace(n,t+4),i<0)throw f(u._thisDoc,u.lines,n,t+4,"needed {...} after INSERT DATA "+d);t=i}var _=[];if(i=u.node(n,t,_),i<0)throw f(u._thisDoc,u.lines,n,t,"bad syntax or EOF in {...} after "+d);o[d.toLowerCase()]=_[0],r.add(h,a(d.toLowerCase()),_[0]),c=!0,t=i}}if(!c&&n.slice(i,i+7)==="@prefix"){if(t=u.directive(n,i),t<0)throw f(u._thisDoc,u.lines,n,t,"bad syntax or EOF after @prefix ");t=u.checkDot(n,t),c=!0}if(!c)throw f(u._thisDoc,u.lines,n,i,"Unknown syntax at start of statememt: '"+n.slice(i).slice(0,20)+"'")}}function is(n,r,e){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"text/turtle",i=arguments.length>4?arguments[4]:void 0;t=t||gn,t=t.split(";")[0];try{if(t===Uc||t===gn){var s=Ts(r,r,e,e,null,null,"",null);s.loadBuf(n),u()}else if(t===fi){var l=new ml(r);l.parse(Pn(n),e,r.sym(e)),u()}else if(t===$l)al(Pn(n,{contentType:$l}),r,e),u();else if(t===Xa)al(Pn(n,{contentType:Xa}),r,e),u();else if(t===Jp||t===Zp)Y1(n,r,e),u();else if(t===Jl)Bd(n,r,e,u);else if(t===Kl||t===Zl){var a=new Ud({factory:ns});f(null,n)}else throw t===void 0?new Error("contentType is undefined"):new Error("Don't know how to parse "+t+" yet")}catch(c){o(c)}is.handled={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/sparql-update":!0,"application/sparql-update-single-match":!0,"application/ld+json":!0,"application/nquads":!0,"application/n-quads":!0};function u(){if(i)i(null,r);else return}function o(c){if(t!==Jl||t!==Kl||t!==Zl)if(i)i(c,r);else{var d=new Error(""+c+" while trying to parse <"+e+"> as "+t);throw d.cause=c,d}}function f(c,d){try{a.parse(d,h)}catch(_){i(_,r)}}function h(c,d){d?r.add(d.subject,d.predicate,d.object,d.graph):i(c,r)}}var ls={exports:{}};(function(n,r){var e=typeof self<"u"?self:fs,t=function(){function s(){this.fetch=!1,this.DOMException=e.DOMException}return s.prototype=e,new s}();(function(s){(function(l){var a={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function u(N){return N&&DataView.prototype.isPrototypeOf(N)}if(a.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(N){return N&&o.indexOf(Object.prototype.toString.call(N))>-1};function h(N){if(typeof N!="string"&&(N=String(N)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(N))throw new TypeError("Invalid character in header field name");return N.toLowerCase()}function c(N){return typeof N!="string"&&(N=String(N)),N}function d(N){var H={next:function(){var O=N.shift();return{done:O===void 0,value:O}}};return a.iterable&&(H[Symbol.iterator]=function(){return H}),H}function _(N){this.map={},N instanceof _?N.forEach(function(H,O){this.append(O,H)},this):Array.isArray(N)?N.forEach(function(H){this.append(H[0],H[1])},this):N&&Object.getOwnPropertyNames(N).forEach(function(H){this.append(H,N[H])},this)}_.prototype.append=function(N,H){N=h(N),H=c(H);var O=this.map[N];this.map[N]=O?O+", "+H:H},_.prototype.delete=function(N){delete this.map[h(N)]},_.prototype.get=function(N){return N=h(N),this.has(N)?this.map[N]:null},_.prototype.has=function(N){return this.map.hasOwnProperty(h(N))},_.prototype.set=function(N,H){this.map[h(N)]=c(H)},_.prototype.forEach=function(N,H){for(var O in this.map)this.map.hasOwnProperty(O)&&N.call(H,this.map[O],O,this)},_.prototype.keys=function(){var N=[];return this.forEach(function(H,O){N.push(O)}),d(N)},_.prototype.values=function(){var N=[];return this.forEach(function(H){N.push(H)}),d(N)},_.prototype.entries=function(){var N=[];return this.forEach(function(H,O){N.push([O,H])}),d(N)},a.iterable&&(_.prototype[Symbol.iterator]=_.prototype.entries);function w(N){if(N.bodyUsed)return Promise.reject(new TypeError("Already read"));N.bodyUsed=!0}function k(N){return new Promise(function(H,O){N.onload=function(){H(N.result)},N.onerror=function(){O(N.error)}})}function C(N){var H=new FileReader,O=k(H);return H.readAsArrayBuffer(N),O}function U(N){var H=new FileReader,O=k(H);return H.readAsText(N),O}function I(N){for(var H=new Uint8Array(N),O=new Array(H.length),ne=0;ne<H.length;ne++)O[ne]=String.fromCharCode(H[ne]);return O.join("")}function A(N){if(N.slice)return N.slice(0);var H=new Uint8Array(N.byteLength);return H.set(new Uint8Array(N)),H.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(N){this._bodyInit=N,N?typeof N=="string"?this._bodyText=N:a.blob&&Blob.prototype.isPrototypeOf(N)?this._bodyBlob=N:a.formData&&FormData.prototype.isPrototypeOf(N)?this._bodyFormData=N:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)?this._bodyText=N.toString():a.arrayBuffer&&a.blob&&u(N)?(this._bodyArrayBuffer=A(N.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(N)||f(N))?this._bodyArrayBuffer=A(N):this._bodyText=N=Object.prototype.toString.call(N):this._bodyText="",this.headers.get("content-type")||(typeof N=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var N=w(this);if(N)return N;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?w(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(C)}),this.text=function(){var N=w(this);if(N)return N;if(this._bodyBlob)return U(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(I(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(T)}),this.json=function(){return this.text().then(JSON.parse)},this}var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(N){var H=N.toUpperCase();return y.indexOf(H)>-1?H:N}function R(N,H){H=H||{};var O=H.body;if(N instanceof R){if(N.bodyUsed)throw new TypeError("Already read");this.url=N.url,this.credentials=N.credentials,H.headers||(this.headers=new _(N.headers)),this.method=N.method,this.mode=N.mode,this.signal=N.signal,!O&&N._bodyInit!=null&&(O=N._bodyInit,N.bodyUsed=!0)}else this.url=String(N);if(this.credentials=H.credentials||this.credentials||"same-origin",(H.headers||!this.headers)&&(this.headers=new _(H.headers)),this.method=v(H.method||this.method||"GET"),this.mode=H.mode||this.mode||null,this.signal=H.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&O)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(O)}R.prototype.clone=function(){return new R(this,{body:this._bodyInit})};function T(N){var H=new FormData;return N.trim().split("&").forEach(function(O){if(O){var ne=O.split("="),Q=ne.shift().replace(/\+/g," "),z=ne.join("=").replace(/\+/g," ");H.append(decodeURIComponent(Q),decodeURIComponent(z))}}),H}function B(N){var H=new _,O=N.replace(/\r?\n[\t ]+/g," ");return O.split(/\r?\n/).forEach(function(ne){var Q=ne.split(":"),z=Q.shift().trim();if(z){var Y=Q.join(":").trim();H.append(z,Y)}}),H}b.call(R.prototype);function D(N,H){H||(H={}),this.type="default",this.status=H.status===void 0?200:H.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in H?H.statusText:"OK",this.headers=new _(H.headers),this.url=H.url||"",this._initBody(N)}b.call(D.prototype),D.prototype.clone=function(){return new D(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new _(this.headers),url:this.url})},D.error=function(){var N=new D(null,{status:0,statusText:""});return N.type="error",N};var L=[301,302,303,307,308];D.redirect=function(N,H){if(L.indexOf(H)===-1)throw new RangeError("Invalid status code");return new D(null,{status:H,headers:{location:N}})},l.DOMException=s.DOMException;try{new l.DOMException}catch{l.DOMException=function(H,O){this.message=H,this.name=O;var ne=Error(H);this.stack=ne.stack},l.DOMException.prototype=Object.create(Error.prototype),l.DOMException.prototype.constructor=l.DOMException}function F(N,H){return new Promise(function(O,ne){var Q=new R(N,H);if(Q.signal&&Q.signal.aborted)return ne(new l.DOMException("Aborted","AbortError"));var z=new XMLHttpRequest;function Y(){z.abort()}z.onload=function(){var x={status:z.status,statusText:z.statusText,headers:B(z.getAllResponseHeaders()||"")};x.url="responseURL"in z?z.responseURL:x.headers.get("X-Request-URL");var $="response"in z?z.response:z.responseText;O(new D($,x))},z.onerror=function(){ne(new TypeError("Network request failed"))},z.ontimeout=function(){ne(new TypeError("Network request failed"))},z.onabort=function(){ne(new l.DOMException("Aborted","AbortError"))},z.open(Q.method,Q.url,!0),Q.credentials==="include"?z.withCredentials=!0:Q.credentials==="omit"&&(z.withCredentials=!1),"responseType"in z&&a.blob&&(z.responseType="blob"),Q.headers.forEach(function(x,$){z.setRequestHeader($,x)}),Q.signal&&(Q.signal.addEventListener("abort",Y),z.onreadystatechange=function(){z.readyState===4&&Q.signal.removeEventListener("abort",Y)}),z.send(typeof Q._bodyInit>"u"?null:Q._bodyInit)})}return F.polyfill=!0,s.fetch||(s.fetch=F,s.Headers=_,s.Request=R,s.Response=D),l.Headers=_,l.Request=R,l.Response=D,l.fetch=F,Object.defineProperty(l,"__esModule",{value:!0}),l})({})})(t),t.fetch.ponyfill=!0,delete t.fetch.polyfill;var i=t;r=i.fetch,r.default=i.fetch,r.fetch=i.fetch,r.Headers=i.Headers,r.Request=i.Request,r.Response=i.Response,n.exports=r})(ls,ls.exports);var Zi=ls.exports;const x1=dl(Zi);function J1(n,r){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=Z1(n))||r){e&&(n=e);var t=0,i=function(){};return{s:i,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(o){throw o},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,l=!1,a;return{s:function(){e=e.call(n)},n:function(){var o=e.next();return s=o.done,o},e:function(o){l=!0,a=o},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(l)throw a}}}}function Z1(n,r){if(n){if(typeof n=="string")return Iu(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Iu(n,r)}}function Iu(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}function Tn(n,r,e){return r=Rt(r),Yr(n,jd()?Reflect.construct(r,e||[],Rt(n).constructor):r.apply(n,e))}function jd(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jd=function(){return!!n})()}var K1={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/ld+json":!0},Vd={rdf:fi,owl:fi,n3:"text/n3",ttl:"text/turtle",nt:"text/n3",acl:"text/n3",html:"text/html",xml:"text/xml"},Hd=function(r){return{link:Gt("http://www.w3.org/2007/ont/link#",r),http:Gt("http://www.w3.org/2007/ont/http#",r),httph:Gt("http://www.w3.org/2007/ont/httph#",r),rdf:Gt("http://www.w3.org/1999/02/22-rdf-syntax-ns#",r),rdfs:Gt("http://www.w3.org/2000/01/rdf-schema#",r),dc:Gt("http://purl.org/dc/elements/1.1/",r),ldp:Gt("http://www.w3.org/ns/ldp#",r)}},Lr=Hd(),un=wt(function n(r,e){yt(this,n),De(this,"response",void 0),De(this,"dom",void 0),this.response=r,this.dom=e});De(un,"pattern",void 0);var As=function(n){function r(){return yt(this,r),Tn(this,r,arguments)}return Qt(r,n),wt(r,[{key:"parse",value:function(t,i,s){var l=t.store;this.dom||(this.dom=Pn(i));var a=this.dom.documentElement;if(a.nodeName==="parsererror")return t.failFetch(s,"Badly formed XML in "+s.resource.value,"parse_error");var u=new ml(l);try{u.parse(this.dom,s.original.value,s.original)}catch(o){return t.failFetch(s,"Syntax error parsing RDF/XML! "+o,"parse_error")}return s.noMeta||l.add(s.original,Lr.rdf("type"),Lr.link("RDFDocument"),t.appNode),t.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"RDFXMLHandler"}},{key:"register",value:function(t){t.mediatypes[fi]={q:.9}}}])}(un);As.pattern=new RegExp("application/rdf\\+xml");var vn=function(n){function r(){return yt(this,r),Tn(this,r,arguments)}return Qt(r,n),wt(r,[{key:"parse",value:function(t,i,s){var l,a;this.dom||(this.dom=Pn(i));var u=t.store,o=this.dom.getElementsByTagName("title");o.length>0&&u.add(s.resource,Lr.dc("title"),u.rdfFactory.literal(o[0].textContent),s.resource);for(var f=this.dom.getElementsByTagName("link"),h=f.length-1;h>=0;h--)l=f[h].getAttribute("rel"),a=!1,l||(l=f[h].getAttribute("rev"),a=!0),l&&t.linkData(s.original,l,f[h].getAttribute("href"),s.resource,a);for(var c=this.dom.getElementsByTagName("script"),d=0;d<c.length;d++){var _=c[d].getAttribute("type");K1[_]&&(is(c[d].textContent,u,s.original.value,_),is(c[d].textContent,u,s.original.value,_))}if(s.noMeta||u.add(s.resource,Lr.rdf("type"),Lr.link("WebPage"),t.appNode),!s.noRDFa&&al)try{al(this.dom,u,s.original.value)}catch(k){var w="Error trying to parse "+s.resource+` as RDFa:
`+k+`:
`+k.stack;return t.failFetch(s,w,"parse_error")}return t.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"XHTMLHandler"}},{key:"register",value:function(t){t.mediatypes[$l]={}}}])}(un);vn.pattern=new RegExp("application/xhtml");var ul=function(n){function r(){return yt(this,r),Tn(this,r,arguments)}return Qt(r,n),wt(r,[{key:"parse",value:function(t,i,s){for(var l=Pn(i),a=0;a<l.childNodes.length;a++){var u=l.childNodes[a];if(r.isElement(u)){var o=u.namespaceURI;if(o&&o===o.rdf){t.addStatus(s.req,"Has XML root element in the RDF namespace, so assume RDF/XML.");var f=new As(this.response,l);return f.parse(t,i,s)}break}}if(l.doctype&&l.doctype.name==="html"&&l.doctype.publicId.match(/^-\/\/W3C\/\/DTD XHTML/)&&l.doctype.systemId.match(/http:\/\/www.w3.org\/TR\/xhtml/)){t.addStatus(s.req,`Has XHTML DOCTYPE. Switching to XHTML Handler.
`);var h=new vn(this.response,l);return h.parse(t,i,s)}var c=l.getElementsByTagName("html")[0];if(c){var d=c.getAttribute("xmlns");if(d&&d.match(/^http:\/\/www.w3.org\/1999\/xhtml/)){t.addStatus(s.req,`Has a default namespace for XHTML. Switching to XHTMLHandler.
`);var _=new vn(this.response,l);return _.parse(t,i,s)}}return t.failFetch(s,`Unsupported dialect of XML: not RDF or XHTML namespace, etc.
`+i.slice(0,80),901)}}],[{key:"toString",value:function(){return"XMLHandler"}},{key:"register",value:function(t){t.mediatypes["text/xml"]={q:.5},t.mediatypes["application/xml"]={q:.5}}},{key:"isElement",value:function(t){return t.nodeType===Node.ELEMENT_NODE}}])}(un);ul.pattern=new RegExp("(text|application)/(.*)xml");var zd=function(n){function r(){return yt(this,r),Tn(this,r,arguments)}return Qt(r,n),wt(r,[{key:"parse",value:function(t,i,s){var l=t.store;if(Qd(i)){t.addStatus(s.req,`Has an XML declaration. We'll assume it's XHTML as the content-type was text/html.
`);var a=new vn(this.response);return a.parse(t,i,s)}if($1(i)){t.addStatus(s.req,`Has XHTML DOCTYPE. Switching to XHTMLHandler.
`);var u=new vn(this.response);return u.parse(t,i,s)}if(e2(i)){t.addStatus(s.req,`Has default namespace for XHTML, so switching to XHTMLHandler.
`);var o=new vn(this.response);return o.parse(t,i,s)}var f=new RegExp("<title>([\\s\\S]+?)</title>","im").exec(i);return f&&l.add(s.resource,Lr.dc("title"),l.rdfFactory.literal(f[1]),s.resource),l.add(s.resource,Lr.rdf("type"),Lr.link("WebPage"),t.appNode),t.addStatus(s.req,"non-XML HTML document, not parsed for data."),t.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"HTMLHandler"}},{key:"register",value:function(t){t.mediatypes["text/html"]={q:.9}}}])}(un);zd.pattern=new RegExp("text/html");var Xd=function(n){function r(){return yt(this,r),Tn(this,r,arguments)}return Qt(r,n),wt(r,[{key:"parse",value:function(t,i,s,l){var a=t.store;return new Promise(function(u,o){try{Bd(i,a,s.original.value,function(){u(t.doneFetch(s,l))})}catch(h){var f="Error trying to parse "+s.resource+` as JSON-LD:
`+h;u(t.failFetch(s,f,"parse_error",l))}})}}],[{key:"toString",value:function(){return"JsonLdHandler"}},{key:"register",value:function(t){t.mediatypes["application/ld+json"]={q:.9}}}])}(un);Xd.pattern=/application\/ld\+json/;var Gd=function(n){function r(){return yt(this,r),Tn(this,r,arguments)}return Qt(r,n),wt(r,[{key:"parse",value:function(t,i,s){if(Qd(i)){t.addStatus(s.req,"Warning: "+s.resource+` has an XML declaration. We'll assume it's XML but its content-type wasn't XML.
`);var l=new ul(this.response);return l.parse(t,i,s)}if(i.slice(0,500).match(/xmlns:/)){t.addStatus(s.req,`May have an XML namespace. We'll assume it's XML but its content-type wasn't XML.
`);var a=new ul(this.response);return a.parse(t,i,s)}return t.addStatus(s.req,"Plain text document, no known RDF semantics."),t.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"TextHandler"}},{key:"register",value:function(t){t.mediatypes["text/plain"]={q:.5}}}])}(un);Gd.pattern=new RegExp("text/plain");var Wd=function(n){function r(){return yt(this,r),Tn(this,r,arguments)}return Qt(r,n),wt(r,[{key:"parse",value:function(t,i,s,l){var a=t.store,u=Ts(a,a,s.original.value,s.original.value,null,null,"",null);try{u.loadBuf(i)}catch(f){var o="Error trying to parse "+s.resource+` as Notation3:
`+f;return t.failFetch(s,o,"parse_error",l)}return t.addStatus(s.req,"N3 parsed: "+u.statementCount+" triples in "+u.lines+" lines."),t.store.add(s.original,Lr.rdf("type"),Lr.link("RDFDocument"),t.appNode),t.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"N3Handler"}},{key:"register",value:function(t){t.mediatypes["text/n3"]={q:"1.0"},t.mediatypes["text/turtle"]={q:1}}}])}(un);Wd.pattern=new RegExp("(application|text)/(x-)?(rdf\\+)?(n3|turtle)");var ss={RDFXMLHandler:As,XHTMLHandler:vn,XMLHandler:ul,HTMLHandler:zd,TextHandler:Gd,N3Handler:Wd,JsonLdHandler:Xd};function $1(n){var r=n.indexOf("<!DOCTYPE html"),e=n.indexOf(">");return r===-1||e===-1||r>e?!1:n.substr(r,e-r).indexOf("XHTML")!==-1}function Qd(n){var r=n.match(/\s*<\?xml\s+version\s*=[^<>]+\?>/);return!!r}function e2(n){var r=n.match(/[^(<html)]*<html\s+[^<]*xmlns=['"]http:\/\/www.w3.org\/1999\/xhtml["'][^<]*>/);return!!r}var Gn=function(){function n(r){var e=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(yt(this,n),De(this,"store",void 0),De(this,"timeout",void 0),De(this,"_fetch",void 0),De(this,"mediatypes",void 0),De(this,"appNode",void 0),De(this,"requested",void 0),De(this,"timeouts",void 0),De(this,"redirectedTo",void 0),De(this,"fetchQueue",void 0),De(this,"fetchCallbacks",void 0),De(this,"nonexistent",void 0),De(this,"lookedUp",void 0),De(this,"handlers",void 0),De(this,"ns",void 0),De(this,"fireCallbacks",void 0),this.store=r||new ki,this.ns=Hd(this.store.rdfFactory),this.timeout=t.timeout||3e4,this._fetch=t.fetch||typeof global<"u"&&(global.solidFetcher||global.solidFetch)||typeof window<"u"&&(window.solidFetcher||window.solidFetch)||x1,!this._fetch)throw new Error("No _fetch function available for Fetcher");this.appNode=this.store.sym("chrome://TheCurrentSession"),this.store.fetcher=this,this.requested={},this.timeouts={},this.redirectedTo={},this.fetchQueue={},this.fetchCallbacks={},this.nonexistent={},this.lookedUp={},this.handlers=[],this.mediatypes={"image/*":{q:.9},"*/*":{q:.1}},X0(this,["request","fail","refresh","retract","done"]),Object.keys(t.handlers||ss).map(function(i){return e.addHandler(ss[i])})}return wt(n,[{key:"load",value:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i=Object.assign({},i),e instanceof Array)return Promise.all(e.map(function(k){return t.load(k,Object.assign({},i))}));var s=e,l=Rn(s);l=l.split("#")[0],i=this.initFetchOptions(l,i);var a=this.appNode,u=this.store,o=u.statementsMatching(void 0,this.ns.link("requestedURI"),u.sym(l),a).map(function(k){return k.subject}),f=J1(o),h;try{for(f.s();!(h=f.n()).done;){var c=h.value,d=u.any(c,this.ns.link("response"),null,a);if(d!=null){var _=u.statementsMatching(d,this.ns.link("outOfDate"),!0,a);u.remove(_),i.force=!0,i.clearPreviousData=!0}}}catch(k){f.e(k)}finally{f.f()}var w=this.initFetchOptions(l,i);return this.pendingFetchPromise(l,w.baseURI,w)}},{key:"pendingFetchPromise",value:function(){var r=Ya(Hi.mark(function t(i,s,l){var a=this,u;return Hi.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(f.t0=!l.force,!f.t0){f.next=5;break}return f.next=4,this.fetchQueue[s];case 4:f.t0=f.sent;case 5:if(!f.t0){f.next=9;break}u=this.fetchQueue[s],f.next=12;break;case 9:u=Promise.race([this.setRequestTimeout(i,l),this.fetchUri(i,l)]),this.fetchQueue[s]=u,this.cleanupFetchRequest(s,void 0,this.timeout);case 12:return f.abrupt("return",u.then(function(h){return i in a.timeouts&&(a.timeouts[i].forEach(clearTimeout),delete a.timeouts[i]),h}));case 13:case"end":return f.stop()}},t,this)}));function e(t,i,s){return r.apply(this,arguments)}return e}()},{key:"cleanupFetchRequest",value:function(e,t,i){var s=this;t!==void 0&&console.warn("_options is deprecated"),this.timeouts[e]=(this.timeouts[e]||[]).concat(setTimeout(function(){s.isPending(e)||delete s.fetchQueue[e]},i))}},{key:"initFetchOptions",value:function(e,t){var i=this.store,s=!t.method||t.method.toUpperCase()==="GET";s||(t.force=!0),t.resource=i.rdfFactory.namedNode(e),t.baseURI=t.baseURI||e,t.original=i.rdfFactory.namedNode(t.baseURI),t.req=i.bnode(),t.headers=t.headers||new Zi.Headers,t.contentType&&(t.headers["content-type"]=t.contentType),t.force&&(t.cache="no-cache");var l=this.acceptString();t.headers.accept=l;var a=n.offlineOverride(e);t.requestedURI=a,n.setCredentials(a,t);var u=n.proxyIfNecessary(a);return a!==u&&(t.proxyUsed=!0),t.actualProxyURI=u,t}},{key:"fetchUri",value:function(e,t){var i=this;if(!e)return Promise.reject(new Error("Cannot fetch an empty uri"));if(n.unsupportedProtocol(e))return this.failFetch(t,"fetcher: Unsupported protocol","unsupported_protocol");var s=this.getState(e);if(t.force)delete this.nonexistent[e];else{if(s==="fetched")return Promise.resolve(this.doneFetch(t,{status:200,ok:!0,statusText:"Already loaded into quadstore."}));if(s==="failed"&&this.requested[e]===404){var l="Previously failed: "+this.requested[e],a={url:e,status:this.requested[e],statusText:l,responseText:l,headers:new Zi.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return this.failFetch(t,l,this.requested[e],a)}}this.fireCallbacks("request",[e]),this.requested[e]=!0,t.noMeta||this.saveRequestMetadata(e,t);var u=t.actualProxyURI;return this._fetch(u,t).then(function(o){return i.handleResponse(o,e,t)},function(o){var f={url:u,status:999,statusText:(o.name||"network failure")+": "+(o.errno||o.code||o.type),responseText:o.message,headers:new Zi.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return i.handleError(f,e,t)})}},{key:"nowOrWhenFetched",value:function(e,t,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=Rn(e);typeof t=="function"?i=t:typeof t>"u"||(Wa(t)?s.referringTerm=t:s=t),this.load(l,s).then(function(a){if(i)if(a)if(a.ok)i(!0,"OK",a);else{var u="HTTP error: Status "+a.status+" ("+a.statusText+")";a.responseText&&(u+=" "+a.responseText),i(!1,u,a)}else{var o="@@ nowOrWhenFetched:  no response object!";i(!1,o)}},function(a){var u=a.message||a.statusText;u="Failed to load  <"+l+"> "+u,a.response&&a.response.status&&(u+=" status: "+a.response.status),i(!1,u,a.response)})}},{key:"addStatus",value:function(e,t){var i=new Date;t="["+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()+"."+i.getMilliseconds()+"] "+t;var s=this.store,l=s.the(e,this.ns.link("status"));hs(l)&&l.append(s.rdfFactory.literal(t))}},{key:"failFetch",value:function(e,t,i,s){this.addStatus(e.req,t),e.noMeta||this.store.add(e.original,this.ns.link("error"),this.store.rdfFactory.literal(t));var l=(e.method||"GET").toUpperCase(),a=l==="GET"||l==="HEAD";a&&(e.resource.equals(e.original),this.requested[Bn(e.original.value)]=i,this.fireCallbacks("fail",[e.original.value,t]));var u=new Error("Fetcher: "+t);return u.status=i,u.statusText=t,u.response=s,Promise.reject(u)}},{key:"linkData",value:function(e,t,i,s,l){if(i){var a=this.store,u,o=a.rdfFactory.namedNode(dr(i,e.value));if(t==="alternate"||t==="seeAlso"||t==="meta"||t==="describedby"){if(o.value===e.value)return;u=this.ns.rdfs("seeAlso")}else t==="type"?u=a.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):u=a.rdfFactory.namedNode(dr(encodeURIComponent(t),"http://www.iana.org/assignments/link-relations/"));l?a.add(o,u,e,s):a.add(e,u,o,s)}}},{key:"parseLinkHeader",value:function(e,t,i){if(e){var s=/<[^>]*>\s*(\s*;\s*[^()<>@,;:"/[\]?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*")))*(,|$)/g,l=/[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*"))/g,a=e.match(s);if(a!=null)for(var u=0;u<a.length;u++){var o=a[u].split(">"),f=o[0].substring(1),h=o[1],c=h.match(l);if(c==null)return;for(var d=0;d<c.length;d++){var _=c[d],w=_.split("="),k=w[1].replace(/["']/g,"");this.linkData(t,k,f,i)}}}}},{key:"doneFetch",value:function(e,t){return this.addStatus(e.req,"Done."),this.requested[e.original.value]="done",this.fireCallbacks("done",[e.original.value]),t.req=e.req,t}},{key:"nowKnownAs",value:function(e,t){this.lookedUp[e.value]?this.lookedUp[t.value]||this.lookUpThing(t,e):this.lookedUp[t.value]&&(this.lookedUp[e.value]||this.lookUpThing(e,t))}},{key:"putBack",value:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=Rn(e),l=new Mt(s).doc();return i.contentType=i["content-type"]||i["Content-Type"]||i.contentType||gn,i.contentType==="application/ld+json"?new Promise(function(a,u){pi(l,t.store,l.uri,i.contentType,function(o,f){o?u(o):(i.data=f,t.webOperation("PUT",e,i).then(function(h){return a(h)}).catch(function(h){return u(h)}))})}):(i.data=pi(l,this.store,l.value,i.contentType),this.webOperation("PUT",s,i))}},{key:"webCopy",value:function(e,t,i){var s=this;return this.webOperation("GET",e).then(function(l){return s.webOperation("PUT",t,{data:l.responseText,contentType:i})})}},{key:"delete",value:function(e,t){var i=this;return this.webOperation("DELETE",e,t).then(function(s){return i.requested[e]=404,i.nonexistent[e]=!0,i.unload(i.store.rdfFactory.namedNode(e)),s})}},{key:"createIfNotExists",value:function(){var r=Ya(Hi.mark(function t(i){var s,l,a,u,o=arguments;return Hi.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return s=o.length>1&&o[1]!==void 0?o[1]:gn,l=o.length>2&&o[2]!==void 0?o[2]:"",a=this,h.prev=3,h.next=6,a.load(i);case 6:u=h.sent,h.next=26;break;case 9:if(h.prev=9,h.t0=h.catch(3),h.t0.response.status!==404){h.next=25;break}return h.prev=12,h.next=15,a.webOperation("PUT",i.value,{data:l,contentType:s});case 15:u=h.sent,h.next=21;break;case 18:throw h.prev=18,h.t1=h.catch(12),h.t1;case 21:return delete a.requested[i.value],h.abrupt("return",u);case 25:throw h.t0;case 26:return h.abrupt("return",u);case 27:case"end":return h.stop()}},t,this,[[3,9],[12,18]])}));function e(t){return r.apply(this,arguments)}return e}()},{key:"createContainer",value:function(e,t,i){var s={"content-type":gn,link:this.ns.ldp("BasicContainer")+'; rel="type"'};t&&(s.slug=t);var l={headers:s};return i&&(l.body=i),this.webOperation("POST",e,l)}},{key:"invalidateCache",value:function(e){var t=Rn(e),i=this;if(i.fetchQueue&&i.fetchQueue[t]){var s=i.fetchQueue[t];s.PromiseStatus,delete i.fetchQueue[t]}if(i.requested[t]&&i.requested[t]!=="done"&&i.requested[t]!=="failed"&&i.requested[t]!==404){var l="Rdflib: fetcher: Destructive operation on <".concat(i.requested[t],"> file being fetched! ")+t;console.error(l)}else delete i.requested[t],delete i.nonexistent[t]}},{key:"webOperation",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=Rn(t);i.method=e,i.body=i.data||i.body,i.force=!0;var l=this;if(i.body&&!i.contentType)throw new Error("Web operation sending data must have a defined contentType.");return i.contentType&&(i.headers=i.headers||{},i.headers["content-type"]=i.contentType),n.setCredentials(s,i),new Promise(function(a,u){l._fetch(s,i).then(function(o){if(o.ok)(e==="PUT"||e==="PATCH"||e==="POST"||e==="DELETE")&&l.invalidateCache(s),o.text?o.text().then(function(c){o.responseText=c,a(o)}):a(o);else{var f="Web error: "+o.status;o.statusText&&(f+=" ("+o.statusText+")"),f+=" on "+e+" of <"+s+">",o.responseText&&(f+=": "+o.responseText);var h=new Error(f);h.response=o,u(h)}},function(o){var f="Fetch error for "+e+" of <"+s+">:"+o;u(new Error(f))})})}},{key:"lookUpThing",value:function(e,t){var i=this,s=this.store.uris(e);return s=s.map(function(l){return Bn(l)}),s.forEach(function(l){i.lookedUp[l]=!0}),this.load(s,{referringTerm:t})}},{key:"getHeader",value:function(e,t){for(var i=this.store,s=e.value,l=i.each(void 0,this.ns.link("requestedURI"),i.rdfFactory.literal(s)),a=0;a<l.length;a++){var u=l[a];if(u!==void 0){var o=i.any(u,this.ns.link("response"));if(o!==void 0&&i.anyValue(o,this.ns.http("status"))&&i.anyValue(o,this.ns.http("status")).startsWith("2")){var f=i.each(o,this.ns.httph(t.toLowerCase()));return f.length?f.map(function(h){return h.value}):[]}}}}},{key:"saveRequestMetadata",value:function(e,t){var i=t.req,s=this.store,l=t.referringTerm;this.addStatus(t.req,"Accept: "+t.headers.accept),Wa(l)&&s.add(s.rdfFactory.namedNode(e),this.ns.link("requestedBy"),l,this.appNode),t.original&&t.original.value!==e&&s.add(i,this.ns.link("orginalURI"),s.rdfFactory.literal(t.original.value),this.appNode);var a=new Date,u="["+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()+"] ";s.add(i,this.ns.rdfs("label"),s.rdfFactory.literal(u+" Request for "+e),this.appNode),s.add(i,this.ns.link("requestedURI"),s.rdfFactory.literal(e),this.appNode),s.add(i,this.ns.link("status"),s.collection(),this.appNode)}},{key:"saveResponseMetadata",value:function(e,t){var i=this,s=this.store,l=s.bnode();return s.add(t.req,this.ns.link("response"),l,this.appNode),s.add(l,this.ns.http("status"),s.rdfFactory.literal(e.status),this.appNode),s.add(l,this.ns.http("statusText"),s.rdfFactory.literal(e.statusText),this.appNode),e.headers.forEach(function(a,u){s.add(l,i.ns.httph(u),i.store.rdfFactory.literal(a),i.appNode),u==="content-type"&&s.add(t.resource,i.ns.rdf("type"),s.rdfFactory.namedNode(z0(a).value),i.appNode)}),l}},{key:"objectRefresh",value:function(e){var t=this.store.uris(e);if(typeof t<"u")for(var i=0;i<t.length;i++)this.refresh(this.store.rdfFactory.namedNode(Bn(t[i])))}},{key:"refresh",value:function(e,t){this.fireCallbacks("refresh",arguments),this.nowOrWhenFetched(e,{force:!0,clearPreviousData:!0},t)}},{key:"refreshIfExpired",value:function(e,t){var i=this.getHeader(e,"Expires");!i||new Date(i[0]).getTime()<=new Date().getTime()?this.refresh(e,t):t(!0,"Not expired",{})}},{key:"retract",value:function(e){this.store.removeMany(void 0,void 0,void 0,e),e.value&&delete this.requested[Bn(e.value)],this.fireCallbacks("retract",arguments)}},{key:"getState",value:function(e){return typeof this.requested[e]>"u"?"unrequested":this.requested[e]===!0?"requested":this.requested[e]==="done"?"fetched":this.requested[e]==="redirected"?this.getState(this.redirectedTo[e]):"failed"}},{key:"isPending",value:function(e){return this.requested[e]===!0}},{key:"unload",value:function(e){this.store.removeDocument(e),delete this.requested[e.value]}},{key:"addHandler",value:function(e){this.handlers.push(e),e.register(this)}},{key:"retryNoCredentials",value:function(e,t){t.retriedWithNoCredentials=!0,delete this.requested[e],delete this.fetchQueue[e];var i=Object.assign({},t,{credentials:"omit"});return this.addStatus(t.req,"Abort: Will retry with credentials SUPPRESSED to see if that helps"),this.load(e,i)}},{key:"isCrossSite",value:function(e){if(typeof document>"u"||!document.location)return!1;var t=_0,i=""+document.location;return(t(i)&&t(e)&&t(i))!==t(e)}},{key:"handleError",value:function(e,t,i){if(this.isCrossSite(t)){if(i.credentials&&i.credentials==="include"&&!i.retriedWithNoCredentials)return this.retryNoCredentials(t,i);var s=n.crossSiteProxy(t);if(s&&!i.proxyUsed)return this.redirectToProxy(s,i)}var l;return e instanceof Error?l="Fetch error: "+e.message:(l=e.statusText,e.responseText&&(l+=" ".concat(e.responseText))),this.failFetch(i,l,e.status||998,e)}},{key:"addType",value:function(e,t,i,s){var l=t;if(s){var a=i.any(l,this.ns.link("requestedURI"));a&&a.value!==s&&i.add(i.rdfFactory.namedNode(s),this.ns.rdf("type"),e,this.appNode)}for(;;){var u=i.any(l,this.ns.link("requestedURI"));if(u&&u.value&&i.add(i.rdfFactory.namedNode(u.value),this.ns.rdf("type"),e,this.appNode),l=i.any(void 0,i.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#redirectedRequest"),l),!l)break;var o=i.any(l,i.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#response"));if(!o)break;var f=i.any(o,i.rdfFactory.namedNode("http://www.w3.org/2007/ont/http#status"));if(!f||f!=="301"&&f!=="302")break}}},{key:"handleResponse",value:function(e,t,i){var s=this,l=this.store,a=e.headers,u=i.req,o=this.saveResponseMetadata(e,i),f=this.normalizedContentType(i,a)||"",h=a.get("content-location");if(e.status===0)return this.handleError(e,t,i);if(e.status>=400)return e.status===404&&(this.nonexistent[i.original.value]=!0,this.nonexistent[t]=!0),this.saveErrorResponse(e,o).then(function(){var U=i.resource+" "+e.statusText;return s.failFetch(i,U,e.status,e)});var c=null,d=null;if(h&&(d=dr(h,t),d!==t&&(c=d)),e.status===200){if(this.addType(this.ns.link("Document"),u,l,t),c&&this.addType(this.ns.link("Document"),u,l,c),i.clearPreviousData)for(var _=l.statementsMatching(void 0,void 0,void 0,i.resource).slice(),w=0;w<_.length;w++)l.removeStatement(_[w]);var k=f.includes("image/")||f.includes("application/pdf");f&&k&&(this.addType(l.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),u,l,t),c&&this.addType(l.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),u,l,c))}if(h){if(!i.force&&c&&this.requested[d]==="done")return this.doneFetch(i,e);this.requested[d]=!0}this.parseLinkHeader(a.get("link"),i.original,u);var C=this.handlerForContentType(f,e);return C?e.text().then(function(U){return e.responseText=U,C.parse(s,U,i,e)}):(this.addStatus(u,"Fetch over. No data handled."),this.doneFetch(i,e))}},{key:"saveErrorResponse",value:function(e,t){var i=this,s=this.store;return e.text().then(function(l){l.length>10&&s.add(t,i.ns.http("content"),s.rdfFactory.literal(l),t)})}},{key:"handlerForContentType",value:function(e,t){if(!e)return null;var i=this.handlers.find(function(s){return e.match(s.pattern)});return i?new i(t):null}},{key:"guessContentType",value:function(e){return Vd[e.split(".").pop()]}},{key:"normalizedContentType",value:function(e,t){if(e.forceContentType)return e.forceContentType;var i=t.get("content-type");if(!i||i.includes("application/octet-stream")){var s=this.guessContentType(e.resource.value);if(s)return s}var l=Ja(e.resource.value);return!i&&["file","chrome"].includes(l)?"text/xml":i}},{key:"redirectToProxy",value:function(e,t){var i=this;this.addStatus(t.req,"BLOCKED -> Cross-site Proxy to <"+e+">"),t.proxyUsed=!0;var s=this.store,l=t.req;t.noMeta||(s.add(l,this.ns.link("redirectedTo"),s.rdfFactory.namedNode(e),l),this.addStatus(l,"redirected to new request")),this.requested[t.resource.value]="redirected",this.redirectedTo[t.resource.value]=e;var a=Object.assign({},t);return a.baseURI=t.resource.value,this.fetchUri(e,a).then(function(u){return a.noMeta||s.add(l,i.ns.link("redirectedRequest"),a.req,i.appNode),u})}},{key:"setRequestTimeout",value:function(e,t){var i=this;return new Promise(function(s){i.timeouts[e]=(i.timeouts[e]||[]).concat(setTimeout(function(){i.isPending(e)&&!t.retriedWithNoCredentials&&!t.proxyUsed&&s(i.failFetch(t,"Request to ".concat(e," timed out"),"timeout"))},i.timeout))})}},{key:"addFetchCallback",value:function(e,t){this.fetchCallbacks[e]?this.fetchCallbacks[e].push(t):this.fetchCallbacks[e]=[t]}},{key:"acceptString",value:function(){var e="";for(var t in this.mediatypes){e!==""&&(e+=", "),e+=t;for(var i in this.mediatypes[t])e+=";"+i+"="+this.mediatypes[t][i]}return e}}],[{key:"crossSiteProxy",value:function(e){if(n.crossSiteProxyTemplate)return n.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(e))}},{key:"offlineOverride",value:function(e){var t=e,i;return typeof window<"u"&&window.panes&&(i=window.panes.UI)&&i.preferences&&i.preferences.get("offlineModeUsingLocalhost")&&t.slice(0,7)==="http://"&&t.slice(7,17)!=="localhost/"&&(t="http://localhost/"+t.slice(7)),t}},{key:"proxyIfNecessary",value:function(e){var t;if(typeof window<"u"&&window.panes&&(t=window.panes.UI)&&t.isExtension)return e;if(typeof $SolidTestEnvironment<"u"&&$SolidTestEnvironment.localSiteMap){var i=e.split("/").slice(2),s=function a(u,o){var f=o[u.shift()];return f?typeof f=="string"?f+u.join("/"):u?a(u,f):null:null},l=s(i,$SolidTestEnvironment.localSiteMap);if(l)return l}return n.crossSiteProxyTemplate&&typeof document<"u"&&document.location&&(""+document.location).slice(0,6)==="https:"&&e.slice(0,5)==="http:"?n.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(e)):e}},{key:"unsupportedProtocol",value:function(e){var t=Ja(e);return t==="tel"||t==="mailto"||t==="urn"}},{key:"setCredentials",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.credentials===void 0&&(t.withCredentials!==void 0?t.credentials=t.withCredentials?"include":"omit":t.credentials="include")}}])}();De(Gn,"HANDLERS",void 0);De(Gn,"CONTENT_TYPE_BY_EXT",void 0);De(Gn,"crossSiteProxyTemplate",void 0);Gn.HANDLERS=ss;Gn.CONTENT_TYPE_BY_EXT=Vd;function Ru(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,t)}return e}function Fu(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Ru(Object(e),!0).forEach(function(t){De(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Ru(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}var Yi=Fu(Fu({},ns),{},{fetcher:function(r,e){return new Gn(r,e)},graph:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return new ki(r,e||{rdfFactory:ns})},lit:function(r,e,t){return this.literal(""+r,e||t)},st:function(r,e,t,i){return this.quad(r,e,t,i)}}),vl={};for(var Gl in Yi)typeof Yi[Gl]=="function"&&(vl[Gl]=Yi[Gl].bind(Yi));var t2=vl.graph,Yd=vl.namedNode,r2=vl.literal;new Id;mt.fromValue;Fr.nextId;let ue,vr=0,si=null;function Ki(){return(si===null||si.byteLength===0)&&(si=new Uint8Array(ue.memory.buffer)),si}const $i=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},n2=typeof $i.encodeInto=="function"?function(n,r){return $i.encodeInto(n,r)}:function(n,r){const e=$i.encode(n);return r.set(e),{read:n.length,written:e.length}};function zr(n,r,e){if(e===void 0){const a=$i.encode(n),u=r(a.length,1)>>>0;return Ki().subarray(u,u+a.length).set(a),vr=a.length,u}let t=n.length,i=r(t,1)>>>0;const s=Ki();let l=0;for(;l<t;l++){const a=n.charCodeAt(l);if(a>127)break;s[i+l]=a}if(l!==t){l!==0&&(n=n.slice(l)),i=e(i,t,t=l+n.length*3,1)>>>0;const a=Ki().subarray(i+l,i+t),u=n2(n,a);l+=u.written,i=e(i,t,l,1)>>>0}return vr=l,i}function Ss(n){return n==null}let ai=null;function Ce(){return(ai===null||ai.byteLength===0)&&(ai=new Int32Array(ue.memory.buffer)),ai}const xd=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&xd.decode();function pt(n,r){return n=n>>>0,xd.decode(Ki().subarray(n,n+r))}function St(n){const r=ue.__wbindgen_export_2.get(n);return ue.__externref_table_dealloc(n),r}function i2(n){try{const i=ue.__wbindgen_add_to_stack_pointer(-16),s=zr(n,ue.__wbindgen_malloc,ue.__wbindgen_realloc),l=vr;ue.namedNode(i,s,l);var r=Ce()[i/4+0],e=Ce()[i/4+1],t=Ce()[i/4+2];if(t)throw St(e);return Wn.__wrap(r)}finally{ue.__wbindgen_add_to_stack_pointer(16)}}function l2(n){try{const l=ue.__wbindgen_add_to_stack_pointer(-16);var r=Ss(n)?0:zr(n,ue.__wbindgen_malloc,ue.__wbindgen_realloc),e=vr;ue.blankNode(l,r,e);var t=Ce()[l/4+0],i=Ce()[l/4+1],s=Ce()[l/4+2];if(s)throw St(i);return Di.__wrap(t)}finally{ue.__wbindgen_add_to_stack_pointer(16)}}function s2(n,r){try{const a=ue.__wbindgen_add_to_stack_pointer(-16);var e=Ss(n)?0:zr(n,ue.__wbindgen_malloc,ue.__wbindgen_realloc),t=vr;ue.literal(a,e,t,r);var i=Ce()[a/4+0],s=Ce()[a/4+1],l=Ce()[a/4+2];if(l)throw St(s);return Ti.__wrap(i)}finally{ue.__wbindgen_add_to_stack_pointer(16)}}function a2(){const n=ue.defaultGraph();return Ei.__wrap(n)}function u2(n){try{const i=ue.__wbindgen_add_to_stack_pointer(-16),s=zr(n,ue.__wbindgen_malloc,ue.__wbindgen_realloc),l=vr;ue.variable(i,s,l);var r=Ce()[i/4+0],e=Ce()[i/4+1],t=Ce()[i/4+2];if(t)throw St(e);return Ci.__wrap(r)}finally{ue.__wbindgen_add_to_stack_pointer(16)}}function o2(n,r,e){try{const l=ue.__wbindgen_add_to_stack_pointer(-16);ue.triple(l,n,r,e);var t=Ce()[l/4+0],i=Ce()[l/4+1],s=Ce()[l/4+2];if(s)throw St(i);return Qn.__wrap(t)}finally{ue.__wbindgen_add_to_stack_pointer(16)}}function f2(n,r,e,t){try{const a=ue.__wbindgen_add_to_stack_pointer(-16);ue.quad(a,n,r,e,t);var i=Ce()[a/4+0],s=Ce()[a/4+1],l=Ce()[a/4+2];if(l)throw St(s);return Qn.__wrap(i)}finally{ue.__wbindgen_add_to_stack_pointer(16)}}function c2(n){try{const i=ue.__wbindgen_add_to_stack_pointer(-16);ue.fromTerm(i,n);var r=Ce()[i/4+0],e=Ce()[i/4+1],t=Ce()[i/4+2];if(t)throw St(e);return St(r)}finally{ue.__wbindgen_add_to_stack_pointer(16)}}function d2(n){try{const i=ue.__wbindgen_add_to_stack_pointer(-16);ue.fromQuad(i,n);var r=Ce()[i/4+0],e=Ce()[i/4+1],t=Ce()[i/4+2];if(t)throw St(e);return St(r)}finally{ue.__wbindgen_add_to_stack_pointer(16)}}let ui=null;function h2(){return(ui===null||ui.byteLength===0)&&(ui=new Uint32Array(ue.memory.buffer)),ui}function _2(n,r){n=n>>>0;const t=h2().subarray(n/4,n/4+r),i=[];for(let s=0;s<t.length;s++)i.push(ue.__wbindgen_export_2.get(t[s]));return ue.__externref_drop_slice(n,r),i}function p2(){ue.main()}function g2(n){const r=ue.__externref_table_alloc();return ue.__wbindgen_export_2.set(r,n),r}function fr(n,r){try{return n.apply(this,r)}catch(e){const t=g2(e);ue.__wbindgen_exn_store(t)}}const Ou=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>ue.__wbg_blanknode_free(n>>>0));class Di{static __wrap(r){r=r>>>0;const e=Object.create(Di.prototype);return e.__wbg_ptr=r,Ou.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,Ou.unregister(this),r}free(){const r=this.__destroy_into_raw();ue.__wbg_blanknode_free(r)}get termType(){let r,e;try{const s=ue.__wbindgen_add_to_stack_pointer(-16);ue.blanknode_term_type(s,this.__wbg_ptr);var t=Ce()[s/4+0],i=Ce()[s/4+1];return r=t,e=i,pt(t,i)}finally{ue.__wbindgen_add_to_stack_pointer(16),ue.__wbindgen_free(r,e,1)}}get value(){let r,e;try{const s=ue.__wbindgen_add_to_stack_pointer(-16);ue.blanknode_value(s,this.__wbg_ptr);var t=Ce()[s/4+0],i=Ce()[s/4+1];return r=t,e=i,pt(t,i)}finally{ue.__wbindgen_add_to_stack_pointer(16),ue.__wbindgen_free(r,e,1)}}toString(){let r,e;try{const s=ue.__wbindgen_add_to_stack_pointer(-16);ue.blanknode_toString(s,this.__wbg_ptr);var t=Ce()[s/4+0],i=Ce()[s/4+1];return r=t,e=i,pt(t,i)}finally{ue.__wbindgen_add_to_stack_pointer(16),ue.__wbindgen_free(r,e,1)}}equals(r){return ue.blanknode_equals(this.__wbg_ptr,r)!==0}}const Bu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>ue.__wbg_defaultgraph_free(n>>>0));class Ei{static __wrap(r){r=r>>>0;const e=Object.create(Ei.prototype);return e.__wbg_ptr=r,Bu.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,Bu.unregister(this),r}free(){const r=this.__destroy_into_raw();ue.__wbg_defaultgraph_free(r)}get termType(){let r,e;try{const s=ue.__wbindgen_add_to_stack_pointer(-16);ue.defaultgraph_term_type(s,this.__wbg_ptr);var t=Ce()[s/4+0],i=Ce()[s/4+1];return r=t,e=i,pt(t,i)}finally{ue.__wbindgen_add_to_stack_pointer(16),ue.__wbindgen_free(r,e,1)}}get value(){let r,e;try{const s=ue.__wbindgen_add_to_stack_pointer(-16);ue.defaultgraph_value(s,this.__wbg_ptr);var t=Ce()[s/4+0],i=Ce()[s/4+1];return r=t,e=i,pt(t,i)}finally{ue.__wbindgen_add_to_stack_pointer(16),ue.__wbindgen_free(r,e,1)}}toString(){let r,e;try{const s=ue.__wbindgen_add_to_stack_pointer(-16);ue.defaultgraph_toString(s,this.__wbg_ptr);var t=Ce()[s/4+0],i=Ce()[s/4+1];return r=t,e=i,pt(t,i)}finally{ue.__wbindgen_add_to_stack_pointer(16),ue.__wbindgen_free(r,e,1)}}equals(r){return ue.defaultgraph_equals(this.__wbg_ptr,r)!==0}}const Lu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>ue.__wbg_literal_free(n>>>0));class Ti{static __wrap(r){r=r>>>0;const e=Object.create(Ti.prototype);return e.__wbg_ptr=r,Lu.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,Lu.unregister(this),r}free(){const r=this.__destroy_into_raw();ue.__wbg_literal_free(r)}get termType(){let r,e;try{const s=ue.__wbindgen_add_to_stack_pointer(-16);ue.literal_term_type(s,this.__wbg_ptr);var t=Ce()[s/4+0],i=Ce()[s/4+1];return r=t,e=i,pt(t,i)}finally{ue.__wbindgen_add_to_stack_pointer(16),ue.__wbindgen_free(r,e,1)}}get value(){let r,e;try{const s=ue.__wbindgen_add_to_stack_pointer(-16);ue.literal_value(s,this.__wbg_ptr);var t=Ce()[s/4+0],i=Ce()[s/4+1];return r=t,e=i,pt(t,i)}finally{ue.__wbindgen_add_to_stack_pointer(16),ue.__wbindgen_free(r,e,1)}}get language(){let r,e;try{const s=ue.__wbindgen_add_to_stack_pointer(-16);ue.literal_language(s,this.__wbg_ptr);var t=Ce()[s/4+0],i=Ce()[s/4+1];return r=t,e=i,pt(t,i)}finally{ue.__wbindgen_add_to_stack_pointer(16),ue.__wbindgen_free(r,e,1)}}get datatype(){const r=ue.literal_datatype(this.__wbg_ptr);return Wn.__wrap(r)}toString(){let r,e;try{const s=ue.__wbindgen_add_to_stack_pointer(-16);ue.literal_toString(s,this.__wbg_ptr);var t=Ce()[s/4+0],i=Ce()[s/4+1];return r=t,e=i,pt(t,i)}finally{ue.__wbindgen_add_to_stack_pointer(16),ue.__wbindgen_free(r,e,1)}}equals(r){return ue.literal_equals(this.__wbg_ptr,r)!==0}}const Pu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>ue.__wbg_namednode_free(n>>>0));class Wn{static __wrap(r){r=r>>>0;const e=Object.create(Wn.prototype);return e.__wbg_ptr=r,Pu.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,Pu.unregister(this),r}free(){const r=this.__destroy_into_raw();ue.__wbg_namednode_free(r)}get termType(){let r,e;try{const s=ue.__wbindgen_add_to_stack_pointer(-16);ue.namednode_term_type(s,this.__wbg_ptr);var t=Ce()[s/4+0],i=Ce()[s/4+1];return r=t,e=i,pt(t,i)}finally{ue.__wbindgen_add_to_stack_pointer(16),ue.__wbindgen_free(r,e,1)}}get value(){let r,e;try{const s=ue.__wbindgen_add_to_stack_pointer(-16);ue.namednode_value(s,this.__wbg_ptr);var t=Ce()[s/4+0],i=Ce()[s/4+1];return r=t,e=i,pt(t,i)}finally{ue.__wbindgen_add_to_stack_pointer(16),ue.__wbindgen_free(r,e,1)}}toString(){let r,e;try{const s=ue.__wbindgen_add_to_stack_pointer(-16);ue.namednode_toString(s,this.__wbg_ptr);var t=Ce()[s/4+0],i=Ce()[s/4+1];return r=t,e=i,pt(t,i)}finally{ue.__wbindgen_add_to_stack_pointer(16),ue.__wbindgen_free(r,e,1)}}equals(r){return ue.namednode_equals(this.__wbg_ptr,r)!==0}}const qu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>ue.__wbg_quad_free(n>>>0));class Qn{static __wrap(r){r=r>>>0;const e=Object.create(Qn.prototype);return e.__wbg_ptr=r,qu.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,qu.unregister(this),r}free(){const r=this.__destroy_into_raw();ue.__wbg_quad_free(r)}get termType(){let r,e;try{const s=ue.__wbindgen_add_to_stack_pointer(-16);ue.quad_term_type(s,this.__wbg_ptr);var t=Ce()[s/4+0],i=Ce()[s/4+1];return r=t,e=i,pt(t,i)}finally{ue.__wbindgen_add_to_stack_pointer(16),ue.__wbindgen_free(r,e,1)}}get value(){let r,e;try{const s=ue.__wbindgen_add_to_stack_pointer(-16);ue.defaultgraph_value(s,this.__wbg_ptr);var t=Ce()[s/4+0],i=Ce()[s/4+1];return r=t,e=i,pt(t,i)}finally{ue.__wbindgen_add_to_stack_pointer(16),ue.__wbindgen_free(r,e,1)}}get subject(){return ue.quad_subject(this.__wbg_ptr)}get predicate(){return ue.quad_predicate(this.__wbg_ptr)}get object(){return ue.quad_object(this.__wbg_ptr)}get graph(){return ue.quad_graph(this.__wbg_ptr)}toString(){let r,e;try{const s=ue.__wbindgen_add_to_stack_pointer(-16);ue.quad_toString(s,this.__wbg_ptr);var t=Ce()[s/4+0],i=Ce()[s/4+1];return r=t,e=i,pt(t,i)}finally{ue.__wbindgen_add_to_stack_pointer(16),ue.__wbindgen_free(r,e,1)}}equals(r){return ue.quad_equals(this.__wbg_ptr,r)!==0}}const m2=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>ue.__wbg_store_free(n>>>0));class Jd{__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,m2.unregister(this),r}free(){const r=this.__destroy_into_raw();ue.__wbg_store_free(r)}constructor(r){try{const s=ue.__wbindgen_add_to_stack_pointer(-16);ue.store_new(s,r);var e=Ce()[s/4+0],t=Ce()[s/4+1],i=Ce()[s/4+2];if(i)throw St(t);return this.__wbg_ptr=e>>>0,this}finally{ue.__wbindgen_add_to_stack_pointer(16)}}add(r){try{const i=ue.__wbindgen_add_to_stack_pointer(-16);ue.store_add(i,this.__wbg_ptr,r);var e=Ce()[i/4+0],t=Ce()[i/4+1];if(t)throw St(e)}finally{ue.__wbindgen_add_to_stack_pointer(16)}}delete(r){try{const i=ue.__wbindgen_add_to_stack_pointer(-16);ue.store_delete(i,this.__wbg_ptr,r);var e=Ce()[i/4+0],t=Ce()[i/4+1];if(t)throw St(e)}finally{ue.__wbindgen_add_to_stack_pointer(16)}}has(r){try{const s=ue.__wbindgen_add_to_stack_pointer(-16);ue.store_has(s,this.__wbg_ptr,r);var e=Ce()[s/4+0],t=Ce()[s/4+1],i=Ce()[s/4+2];if(i)throw St(t);return e!==0}finally{ue.__wbindgen_add_to_stack_pointer(16)}}get size(){try{const i=ue.__wbindgen_add_to_stack_pointer(-16);ue.store_size(i,this.__wbg_ptr);var r=Ce()[i/4+0],e=Ce()[i/4+1],t=Ce()[i/4+2];if(t)throw St(e);return r>>>0}finally{ue.__wbindgen_add_to_stack_pointer(16)}}match(r,e,t,i){try{const f=ue.__wbindgen_add_to_stack_pointer(-16);ue.store_match(f,this.__wbg_ptr,r,e,t,i);var s=Ce()[f/4+0],l=Ce()[f/4+1],a=Ce()[f/4+2],u=Ce()[f/4+3];if(u)throw St(a);var o=_2(s,l).slice();return ue.__wbindgen_free(s,l*4,4),o}finally{ue.__wbindgen_add_to_stack_pointer(16)}}query(r,e){try{const l=ue.__wbindgen_add_to_stack_pointer(-16),a=zr(r,ue.__wbindgen_malloc,ue.__wbindgen_realloc),u=vr;ue.store_query(l,this.__wbg_ptr,a,u,e);var t=Ce()[l/4+0],i=Ce()[l/4+1],s=Ce()[l/4+2];if(s)throw St(i);return St(t)}finally{ue.__wbindgen_add_to_stack_pointer(16)}}update(r,e){try{const s=ue.__wbindgen_add_to_stack_pointer(-16),l=zr(r,ue.__wbindgen_malloc,ue.__wbindgen_realloc),a=vr;ue.store_update(s,this.__wbg_ptr,l,a,e);var t=Ce()[s/4+0],i=Ce()[s/4+1];if(i)throw St(t)}finally{ue.__wbindgen_add_to_stack_pointer(16)}}load(r,e,t,i){try{const a=ue.__wbindgen_add_to_stack_pointer(-16),u=zr(r,ue.__wbindgen_malloc,ue.__wbindgen_realloc),o=vr;ue.store_load(a,this.__wbg_ptr,u,o,e,t,i);var s=Ce()[a/4+0],l=Ce()[a/4+1];if(l)throw St(s)}finally{ue.__wbindgen_add_to_stack_pointer(16)}}dump(r,e){let t,i;try{const h=ue.__wbindgen_add_to_stack_pointer(-16);ue.store_dump(h,this.__wbg_ptr,r,e);var s=Ce()[h/4+0],l=Ce()[h/4+1],a=Ce()[h/4+2],u=Ce()[h/4+3],o=s,f=l;if(u)throw o=0,f=0,St(a);return t=o,i=f,pt(o,f)}finally{ue.__wbindgen_add_to_stack_pointer(16),ue.__wbindgen_free(t,i,1)}}}const Uu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>ue.__wbg_variable_free(n>>>0));class Ci{static __wrap(r){r=r>>>0;const e=Object.create(Ci.prototype);return e.__wbg_ptr=r,Uu.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,Uu.unregister(this),r}free(){const r=this.__destroy_into_raw();ue.__wbg_variable_free(r)}get termType(){let r,e;try{const s=ue.__wbindgen_add_to_stack_pointer(-16);ue.variable_term_type(s,this.__wbg_ptr);var t=Ce()[s/4+0],i=Ce()[s/4+1];return r=t,e=i,pt(t,i)}finally{ue.__wbindgen_add_to_stack_pointer(16),ue.__wbindgen_free(r,e,1)}}get value(){let r,e;try{const s=ue.__wbindgen_add_to_stack_pointer(-16);ue.variable_value(s,this.__wbg_ptr);var t=Ce()[s/4+0],i=Ce()[s/4+1];return r=t,e=i,pt(t,i)}finally{ue.__wbindgen_add_to_stack_pointer(16),ue.__wbindgen_free(r,e,1)}}toString(){let r,e;try{const s=ue.__wbindgen_add_to_stack_pointer(-16);ue.variable_toString(s,this.__wbg_ptr);var t=Ce()[s/4+0],i=Ce()[s/4+1];return r=t,e=i,pt(t,i)}finally{ue.__wbindgen_add_to_stack_pointer(16),ue.__wbindgen_free(r,e,1)}}equals(r){return ue.variable_equals(this.__wbg_ptr,r)!==0}}async function v2(n,r){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,r)}catch(t){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}const e=await n.arrayBuffer();return await WebAssembly.instantiate(e,r)}else{const e=await WebAssembly.instantiate(n,r);return e instanceof WebAssembly.Instance?{instance:e,module:n}:e}}function Zd(){const n={};return n.wbg={},n.wbg.__wbindgen_is_undefined=function(r){return r===void 0},n.wbg.__wbindgen_is_null=function(r){return r===null},n.wbg.__wbindgen_string_get=function(r,e){const t=e,i=typeof t=="string"?t:void 0;var s=Ss(i)?0:zr(i,ue.__wbindgen_malloc,ue.__wbindgen_realloc),l=vr;Ce()[r/4+1]=l,Ce()[r/4+0]=s},n.wbg.__wbindgen_is_falsy=function(r){return!r},n.wbg.__wbindgen_error_new=function(r,e){return new Error(pt(r,e))},n.wbg.__wbg_namednode_new=function(r){return Wn.__wrap(r)},n.wbg.__wbg_blanknode_new=function(r){return Di.__wrap(r)},n.wbg.__wbg_literal_new=function(r){return Ti.__wrap(r)},n.wbg.__wbg_defaultgraph_new=function(r){return Ei.__wrap(r)},n.wbg.__wbg_variable_new=function(r){return Ci.__wrap(r)},n.wbg.__wbg_quad_new=function(r){return Qn.__wrap(r)},n.wbg.__wbg_new_28c511d9baebfa89=function(r,e){return new Error(pt(r,e))},n.wbg.__wbindgen_string_new=function(r,e){return pt(r,e)},n.wbg.__wbg_new_57421e8974065233=function(r,e){return new URIError(pt(r,e))},n.wbg.__wbindgen_is_string=function(r){return typeof r=="string"},n.wbg.__wbg_iterator_2cee6dadfd956dfa=function(){return Symbol.iterator},n.wbg.__wbg_get_e3c254076557e348=function(){return fr(function(r,e){return Reflect.get(r,e)},arguments)},n.wbg.__wbindgen_is_function=function(r){return typeof r=="function"},n.wbg.__wbg_call_27c0f87801dedf93=function(){return fr(function(r,e){return r.call(e)},arguments)},n.wbg.__wbindgen_is_object=function(r){const e=r;return typeof e=="object"&&e!==null},n.wbg.__wbg_next_40fc327bfc8770e6=function(r){return r.next},n.wbg.__wbg_next_196c84450b364254=function(){return fr(function(r){return r.next()},arguments)},n.wbg.__wbg_done_298b57d23c0fc80c=function(r){return r.done},n.wbg.__wbg_value_d93c65011f51a456=function(r){return r.value},n.wbg.__wbg_new_16b304a2cfa7ff4a=function(){return new Array},n.wbg.__wbg_new_d9bc3a0147634640=function(){return new Map},n.wbg.__wbg_push_a5b05aedc7234f9f=function(r,e){return r.push(e)},n.wbg.__wbg_set_8417257aaedc936b=function(r,e,t){return r.set(e,t)},n.wbg.__wbg_warn_2b7fc46eb50827b6=function(r,e){console.warn(pt(r,e))},n.wbg.__wbg_new_abda76e883ba8a5f=function(){return new Error},n.wbg.__wbg_stack_658279fe44541cf6=function(r,e){const t=e.stack,i=zr(t,ue.__wbindgen_malloc,ue.__wbindgen_realloc),s=vr;Ce()[r/4+1]=s,Ce()[r/4+0]=i},n.wbg.__wbg_error_f851667af71bcfc6=function(r,e){let t,i;try{t=r,i=e,console.error(pt(r,e))}finally{ue.__wbindgen_free(t,i,1)}},n.wbg.__wbg_crypto_1d1f22824a6a080c=function(r){return r.crypto},n.wbg.__wbg_process_4a72847cc503995b=function(r){return r.process},n.wbg.__wbg_versions_f686565e586dd935=function(r){return r.versions},n.wbg.__wbg_node_104a2ff8d6ea03a2=function(r){return r.node},n.wbg.__wbg_require_cca90b1a94a0255b=function(){return fr(function(){return module.require},arguments)},n.wbg.__wbg_msCrypto_eb05e62b530a1508=function(r){return r.msCrypto},n.wbg.__wbg_newwithlength_e9b4878cebadb3d3=function(r){return new Uint8Array(r>>>0)},n.wbg.__wbg_self_ce0dbfc45cf2f5be=function(){return fr(function(){return self.self},arguments)},n.wbg.__wbg_window_c6fb939a7f436783=function(){return fr(function(){return window.window},arguments)},n.wbg.__wbg_globalThis_d1e6af4856ba331b=function(){return fr(function(){return globalThis.globalThis},arguments)},n.wbg.__wbg_global_207b558942527489=function(){return fr(function(){return global.global},arguments)},n.wbg.__wbg_newnoargs_e258087cd0daa0ea=function(r,e){return new Function(pt(r,e))},n.wbg.__wbg_call_b3ca7c6051f9bec1=function(){return fr(function(r,e,t){return r.call(e,t)},arguments)},n.wbg.__wbg_has_0af94d20077affa2=function(){return fr(function(r,e){return Reflect.has(r,e)},arguments)},n.wbg.__wbg_now_3014639a94423537=function(){return Date.now()},n.wbg.__wbindgen_memory=function(){return ue.memory},n.wbg.__wbg_buffer_12d079cc21e14bdb=function(r){return r.buffer},n.wbg.__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb=function(r,e,t){return new Uint8Array(r,e>>>0,t>>>0)},n.wbg.__wbg_randomFillSync_5c9c955aa56b6049=function(){return fr(function(r,e){r.randomFillSync(e)},arguments)},n.wbg.__wbg_subarray_a1f73cd4b5b42fe1=function(r,e,t){return r.subarray(e>>>0,t>>>0)},n.wbg.__wbg_getRandomValues_3aa56aa6edec874c=function(){return fr(function(r,e){r.getRandomValues(e)},arguments)},n.wbg.__wbg_new_63b92bc8671ed464=function(r){return new Uint8Array(r)},n.wbg.__wbg_set_a47bac70306a19a7=function(r,e,t){r.set(e,t>>>0)},n.wbg.__wbindgen_throw=function(r,e){throw new Error(pt(r,e))},n.wbg.__wbindgen_init_externref_table=function(){const r=ue.__wbindgen_export_2,e=r.grow(4);r.set(0,void 0),r.set(e+0,void 0),r.set(e+1,null),r.set(e+2,!0),r.set(e+3,!1)},n}function Kd(n,r){return ue=n.exports,ol.__wbindgen_wasm_module=r,ai=null,ui=null,si=null,ue.__wbindgen_start(),ue}function b2(n){if(ue!==void 0)return ue;const r=Zd();n instanceof WebAssembly.Module||(n=new WebAssembly.Module(n));const e=new WebAssembly.Instance(n,r);return Kd(e,n)}async function ol(n){if(ue!==void 0)return ue;typeof n>"u"&&(n=new URL(""+new URL("../assets/web_bg.DI8SoM3H.wasm",import.meta.url).href,import.meta.url));const r=Zd();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:e,module:t}=await v2(await n,r);return Kd(e,t)}const w2=Object.freeze(Object.defineProperty({__proto__:null,BlankNode:Di,DefaultGraph:Ei,Literal:Ti,NamedNode:Wn,Quad:Qn,Store:Jd,Variable:Ci,blankNode:l2,default:ol,defaultGraph:a2,fromQuad:d2,fromTerm:c2,initSync:b2,literal:s2,main:p2,namedNode:i2,quad:f2,triple:o2,variable:u2},Symbol.toStringTag,{value:"Module"})),y2="/ontologies/d3fend.ttl",k2="http://d3fend.mitre.org/ontologies/d3fend.owl#",D2="http://d3fend.mitre.org/ontologies/cad/instances#",E2="cco",$d="d3f",T2="dct",eh="cad",C2="owl",th="rdf",rh="rdfs",N2="skos",A2="xsd",Hn={[$d]:k2,[eh]:D2,[C2]:"http://www.w3.org/2002/07/owl#",[th]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",[rh]:"http://www.w3.org/2000/01/rdf-schema#",[A2]:"http://www.w3.org/2001/XMLSchema#",[T2]:"http://purl.org/dc/terms/",[N2]:"http://www.w3.org/2004/02/skos/core#",[E2]:"http://www.ontologyrepository.com/CommonCoreOntologies/"};function S2(){const{subscribe:n,set:r,update:e}=Wt({initalized:!1,store:null,erorr:null});async function t(){try{console.log("Starting Oxigraph initialization"),console.time("Initialize Oxigraph"),console.log("Oxigraph module:",w2),console.log("Init function:",ol),await ol(),console.log("WebAssembly initialized successfully");const s=new Jd;console.log("Oxigraph store created"),r({initialized:!0,store:s,error:null}),await i(s),console.log(`Oxigraph store initialized with ${s.size} triples.`)}catch(s){r({initialized:!1,store:null,error:s.message}),console.error("Failed to initialize Oxigraph store:",s)}}async function i(s){try{console.time("Load D3FEND ontology");const a=await(await fetch(y2)).text();s.load(a,{format:"ttl"}),console.timeEnd("Load D3FEND ontology"),console.log(`D3FEND ontology loaded, total triples: ${s.size}`)}catch(l){console.error("Failed to load D3FEND ontology:",l)}}return{subscribe:n,initialize:t,query:s=>new Promise((l,a)=>{e(u=>{if(!u.initialized)a(new Error("Oxigraph store not initialized"));else try{const o=u.store.query(s);l(o)}catch(o){a(o)}return u})})}}const Is=S2();async function I2(n){let r=null;return console.log("Calling lookup_valid_property..."),r=await F2(n),console.log(`Property from lookup IRI ${r}`),r==null&&(console.log("Calling lookup_valid_property_by_label..."),r=await R2(n)),r}async function R2(n){const r="findValidPropertyByLabel("+n+")";console.info(r);const e=`PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX d3f: <http://d3fend.mitre.org/ontologies/d3fend.owl#>

SELECT ?property
WHERE
{
   ?property rdfs:subPropertyOf* d3f:may-be-associated-with .
   ?property rdfs:label "${n}" .
}
LIMIT 1`;console.log({valid_value_query:e});let t=null;try{const i=await Is.query(e);i?(console.info(`Type of queryResult for property lookup by label ${n} is: `+Object.prototype.toString.call(i).slice(8,-1)),console.log({query_result:i}),Array.isArray(i)?i.length>0?t=i[0].get("property").value:console.warn(`Empty query results for valid property lookup by label ${n}.`):console.warn(`Query result not the expected Array type for property lookup by label of ${n}.`)):console.error(`Query results: ${i} for valid property lookup by label ${n}.`)}catch(i){console.warn(`Error executing oxigraph query for property lookup by label of: ${n}, error: ${i}`)}return console.info(t+" <- "+r),t}async function F2(n){const r="lookupValidPropertyByFragment("+n+")";console.info(r);const e=`PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX d3f: <http://d3fend.mitre.org/ontologies/d3fend.owl#>

SELECT ?property
WHERE
{
   VALUES ?property { ${n} }
   ?property rdfs:subPropertyOf* d3f:may-be-associated-with .
}
LIMIT 1`;let t=null;if(n.includes(":"))try{const i=await Is.query(e);console.info({query_result:i}),i?Array.isArray(i)?i.length>0?t=i[0].get("property").value:console.warn(`Empty array returned for property lookup by iri of ${n}.`):console.warn(`Query result not the expected Array type for property lookup by iri of ${n}.`):console.warn(`Undefined query result returned for property lookup by iri of ${n}.`)}catch(i){console.warn(`Error executing oxigraph query for property lookup by iri of: ${n}, error: ${i}`)}else console.warn("Attempted lookup by iri of: "+n+" but iri has no ':' char");return console.info(t+" <- "+r),t}const Zr=Gt(Hn[$d]),nh=Gt(Hn[eh]),O2=Gt(Hn[th]),B2=Gt(Hn[rh]);function el(n,r){rr.set(n),gi.set(r)}function L2(){el([],[])}const rr=Wt([]),Ue=Wt(null),gi=Wt([]);function P2(n,r){if(r.data.d3f_class){const e=r.data.d3f_class,[t,i]=e.split(":");return Zr(i)}else{const e=r.type;return{artifactSelectorNode:Zr("Artifact"),vulnerabilitySelectorNode:Zr("Vulnerability"),attackSelectorNode:Zr("OffensiveTechnique"),countermeasureSelectorNode:Zr("DefensiveTechnique"),informationSelectorNode:Zr("DigitalInformation"),agentSelectorNode:Zr("Agent"),eventNode:Zr("Event")}[e]}}async function q2(){const n=t2();Object.keys(Hn).forEach(l=>{const a=Hn[l];console.info("Adding prefix ",l," for ",a),n.setPrefixForURI(l,a)}),console.info("Echo store.namespaces: "+n.namespaces);let r,e;const t=[],i=[];return rr.subscribe(l=>{r=l})(),gi.subscribe(l=>{e=l})(),console.info("Starting node processing..."),U2(r,n,t),console.info("Completed node processing."),console.info("Starting edge processing..."),await j2(e,n,i),console.info("Completed edge processing promise."),await new Promise((l,a)=>{pi(null,n,null,"text/turtle",(u,o)=>{if(u)a(u);else{let f=o;t.length>0&&(f+=`
# Skipped nodes (no d3f_class):
`,t.forEach(h=>{f+=`# Node ID: ${h.id}
`,JSON.stringify(h.data,null,2).split(`
`).forEach(_=>{f+=`# ${_}
`})})),i.length>0&&(f+=`#
# Skipped edges (no label lookup found.):
`,i.forEach(h=>{f+=`# Edge ID: ${h.id}
`,JSON.stringify(h.data,null,2).split(`
`).forEach(_=>{f+=`# ${_}
`})}),f+=`
`),l(f)}})})}function U2(n,r,e){console.info("Processing nodes..."),n.forEach(t=>{const i=t.id,s=t.type,l=t.data.label,a=P2(r,t);if(a){const u=ih(i),o=r2(l.toString());M2("Processing node and data properties and using rdflib node name: ",a),r.add(u,O2("type"),a),r.add(u,B2("label"),o)}else e.push({id:i,type:s,data:t.data})}),console.info("Done processing nodes."),e.length>1&&console.warn("Skipped nodes:",e)}function ih(n){const r=n.replace(".","_");return nh(r)}function M2(n,r){const e=Object.prototype.toString.call(r).slice(8,-1);console.log(`${n} references ${r} of type ${e}`)}const j2=async(n,r,e)=>{console.info("Processing edges now!"),e.length=0;for(const t of n){const i=t.id,s=t.data.label,l=t.source,a=t.target;console.log(`edgeLabel: ${s}`);try{const u=await I2(s);if(u){console.log(`Found property ${u} for ${s}`),console.info(`Adding subject inst:${l} property ${u} object inst:${a}`);try{const o=ih(l),f=nh(a.replace(".","_"));r.add(o,Yd(u),f),console.info(r.length)}catch{console.error(`Error adding triple for edgeId = ${i}, edgeLabel = ${s}`)}}else console.warn(`Bad property ${u} found for ${s}`),e.push({id:i,data:t.data})}catch(u){console.error(`Lookup error for edgeId: ${i} with edgeLabel: ${s} - ${u}`),e.push({id:i,data:t.data})}}console.info("Done processing edges."),e.length>1&&console.warn("Skipped edges:",e)};function on(n,r,e,t,i,s,l,a,u,o,f,h,c){const d={id:`${Math.random()}`,type:t,position:{x:a,y:u},data:{label:i,sequence:l,d3f_class:s},measured:{width:o,height:f},origin:[.5,0],selected:!1,dragging:!1};let _,w;c?(_=d.id,w=e.id):(_=e.id,w=d.id);const k={type:"editableEdge",data:{label:h},source:w,sourceHandle:"source",target:_,targetHandle:"target",id:`xy-edge__${w}source-${_}target`,selected:!1};r.update(C=>[...C,k]),n.update(C=>[...C,d])}function Mu(n,r,e){const t=n.slice();return t[18]=r[e],t}const V2=n=>({}),ju=n=>({});function H2(n){let r;return{c(){r=M("No related offensive techniques in this release.")},l(e){r=j(e,"No related offensive techniques in this release.")},m(e,t){E(e,r,t)},p:Ne,i:Ne,o:Ne,d(e){e&&m(r)}}}function z2(n){let r,e;return r=new tn({props:{$$slots:{default:[Q2]},$$scope:{ctx:n}}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i&16394&&(s.$$scope={dirty:i,ctx:t}),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function X2(n){let r,e="Loading...";return{c(){r=G("div"),r.textContent=e},l(t){r=W(t,"DIV",{"data-svelte-h":!0}),qe(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,i){E(t,r,i)},p:Ne,i:Ne,o:Ne,d(t){t&&m(r)}}}function Vu(n){let r=n[18].off_tech_id.value.replace(/ |\./g,"")+"",e,t,i=n[18].off_tech_label.value+"",s,l,a="-->",u,o,f=n[18].off_artifact_rel_label.value.replace(/ /g,"")+"",h,c,d=ke(n[18].off_artifact.value)+"",_,w,k=n[18].off_artifact_label.value+"",C,U,I,A,b=ke(n[18].off_artifact.value)+"",y,v,R=n[18].off_tech_id.value.replace(/ |\./g,"")+"",T,B,D=n[18].off_tech_id.value.replace(/ |\./g,"")+"",L,F,N=ke(n[18].off_artifact.value)+"",H,O,ne=ke(n[18].off_artifact.value)+"",Q,z;function Y(V,ie){return ie&10&&(I=null),I==null&&(I=!!V[3].includes(V[18].off_tech_id.value.replace(/ |\./g,""))),I?W2:G2}let x=Y(n,-1),$=x(n);return{c(){e=M(r),t=M('["'),s=M(i),l=M('"] '),u=M(a),o=M(" |"),h=M(f),c=M("| "),_=M(d),w=M('["'),C=M(k),U=M(`"];
            `),$.c(),A=M(`
            class `),y=M(b),v=M(" ArtifactNode; click "),T=M(R),B=M(` href "javascript:da_to_off_callback('`),L=M(D),F=M(`')"; click `),H=M(N),O=M(' href "/dao/artifact/d3f:'),Q=M(ne),z=M('";')},l(V){e=j(V,r),t=j(V,'["'),s=j(V,i),l=j(V,'"] '),u=j(V,a),o=j(V," |"),h=j(V,f),c=j(V,"| "),_=j(V,d),w=j(V,'["'),C=j(V,k),U=j(V,`"];
            `),$.l(V),A=j(V,`
            class `),y=j(V,b),v=j(V," ArtifactNode; click "),T=j(V,R),B=j(V,` href "javascript:da_to_off_callback('`),L=j(V,D),F=j(V,`')"; click `),H=j(V,N),O=j(V,' href "/dao/artifact/d3f:'),Q=j(V,ne),z=j(V,'";')},m(V,ie){E(V,e,ie),E(V,t,ie),E(V,s,ie),E(V,l,ie),E(V,u,ie),E(V,o,ie),E(V,h,ie),E(V,c,ie),E(V,_,ie),E(V,w,ie),E(V,C,ie),E(V,U,ie),$.m(V,ie),E(V,A,ie),E(V,y,ie),E(V,v,ie),E(V,T,ie),E(V,B,ie),E(V,L,ie),E(V,F,ie),E(V,H,ie),E(V,O,ie),E(V,Q,ie),E(V,z,ie)},p(V,ie){ie&2&&r!==(r=V[18].off_tech_id.value.replace(/ |\./g,"")+"")&&ce(e,r),ie&2&&i!==(i=V[18].off_tech_label.value+"")&&ce(s,i),ie&2&&f!==(f=V[18].off_artifact_rel_label.value.replace(/ /g,"")+"")&&ce(h,f),ie&2&&d!==(d=ke(V[18].off_artifact.value)+"")&&ce(_,d),ie&2&&k!==(k=V[18].off_artifact_label.value+"")&&ce(C,k),x===(x=Y(V,ie))&&$?$.p(V,ie):($.d(1),$=x(V),$&&($.c(),$.m(A.parentNode,A))),ie&2&&b!==(b=ke(V[18].off_artifact.value)+"")&&ce(y,b),ie&2&&R!==(R=V[18].off_tech_id.value.replace(/ |\./g,"")+"")&&ce(T,R),ie&2&&D!==(D=V[18].off_tech_id.value.replace(/ |\./g,"")+"")&&ce(L,D),ie&2&&N!==(N=ke(V[18].off_artifact.value)+"")&&ce(H,N),ie&2&&ne!==(ne=ke(V[18].off_artifact.value)+"")&&ce(Q,ne)},d(V){V&&(m(e),m(t),m(s),m(l),m(u),m(o),m(h),m(c),m(_),m(w),m(C),m(U),m(A),m(y),m(v),m(T),m(B),m(L),m(F),m(H),m(O),m(Q),m(z)),$.d(V)}}}function G2(n){let r,e=n[18].off_tech_id.value.replace(/ |\./g,"")+"",t,i;return{c(){r=M("class "),t=M(e),i=M(" OffensiveTechniqueNode;")},l(s){r=j(s,"class "),t=j(s,e),i=j(s," OffensiveTechniqueNode;")},m(s,l){E(s,r,l),E(s,t,l),E(s,i,l)},p(s,l){l&2&&e!==(e=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&ce(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function W2(n){let r,e=n[18].off_tech_id.value.replace(/ |\./g,"")+"",t,i;return{c(){r=M("class "),t=M(e),i=M(" SelectedOffensiveTechniqueNode;")},l(s){r=j(s,"class "),t=j(s,e),i=j(s," SelectedOffensiveTechniqueNode;")},m(s,l){E(s,r,l),E(s,t,l),E(s,i,l)},p(s,l){l&2&&e!==(e=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&ce(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function Hu(n){let r=n[6].edge_is_unique(n[18].off_tech_label.value,n[18].off_artifact_rel_label.value,n[18].off_artifact_label.value),e,t=r&&Vu(n);return{c(){t&&t.c(),e=pe()},l(i){t&&t.l(i),e=pe()},m(i,s){t&&t.m(i,s),E(i,e,s)},p(i,s){s&2&&(r=i[6].edge_is_unique(i[18].off_tech_label.value,i[18].off_artifact_rel_label.value,i[18].off_artifact_label.value)),r?t?t.p(i,s):(t=Vu(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&m(e),t&&t.d(i)}}}function Q2(n){let r,e,t=Pe(n[1].da_to_off.results.bindings),i=[];for(let s=0;s<t.length;s+=1)i[s]=Hu(Mu(n,t,s));return{c(){r=M(`graph LR;
        `);for(let s=0;s<i.length;s+=1)i[s].c();e=pe()},l(s){r=j(s,`graph LR;
        `);for(let l=0;l<i.length;l+=1)i[l].l(s);e=pe()},m(s,l){E(s,r,l);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(s,l);E(s,e,l)},p(s,l){if(l&74){t=Pe(s[1].da_to_off.results.bindings);let a;for(a=0;a<t.length;a+=1){const u=Mu(s,t,a);i[a]?i[a].p(u,l):(i[a]=Hu(u),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}},d(s){s&&(m(r),m(e)),ot(i,s)}}}function Y2(n){let r,e,t,i,s,l,a,u,o,f,h,c,d,_=n[3].length+"",w,k,C,U,I;const A=n[9].header,b=Dt(A,n,n[14],ju),y=n[9].default,v=Dt(y,n,n[14],null),R=[X2,z2,H2],T=[];function B(D,L){return D[1]?D[1].da_to_off.results.bindings.length>0?1:2:0}return a=B(n),u=T[a]=R[a](n),{c(){r=G("dialog"),e=G("div"),b&&b.c(),t=M(`
    Select Attack Techniques
    `),v&&v.c(),i=ee(),s=G("hr"),l=ee(),u.c(),o=ee(),f=G("hr"),h=ee(),c=G("button"),d=M("Insert ("),w=M(_),k=M(")"),this.h()},l(D){r=W(D,"DIALOG",{class:!0});var L=_e(r);e=W(L,"DIV",{class:!0});var F=_e(e);b&&b.l(F),t=j(F,`
    Select Attack Techniques
    `),v&&v.l(F),i=te(F),s=W(F,"HR",{}),l=te(F),u.l(F),o=te(F),f=W(F,"HR",{}),h=te(F),c=W(F,"BUTTON",{class:!0});var N=_e(c);d=j(N,"Insert ("),w=j(N,_),k=j(N,")"),N.forEach(m),F.forEach(m),L.forEach(m),this.h()},h(){c.autofocus=!0,J(c,"class","svelte-1ai9hff"),J(e,"class","svelte-1ai9hff"),J(r,"class","svelte-1ai9hff")},m(D,L){E(D,r,L),P(r,e),b&&b.m(e,null),P(e,t),v&&v.m(e,null),P(e,i),P(e,s),P(e,l),T[a].m(e,null),P(e,o),P(e,f),P(e,h),P(e,c),P(c,d),P(c,w),P(c,k),n[11](r),C=!0,c.focus(),U||(I=[fe(c,"click",n[7]),fe(e,"click",At(n[10])),fe(r,"close",n[12]),fe(r,"click",en(n[13]))],U=!0)},p(D,[L]){b&&b.p&&(!C||L&16384)&&Et(b,A,D,D[14],C?Ct(A,D[14],L,V2):Tt(D[14]),ju),v&&v.p&&(!C||L&16384)&&Et(v,y,D,D[14],C?Ct(y,D[14],L,null):Tt(D[14]),null);let F=a;a=B(D),a===F?T[a].p(D,L):(Xe(),le(T[F],1,1,()=>{T[F]=null}),Ge(),u=T[a],u?u.p(D,L):(u=T[a]=R[a](D),u.c()),re(u,1),u.m(e,o)),(!C||L&8)&&_!==(_=D[3].length+"")&&ce(w,_)},i(D){C||(re(b,D),re(v,D),re(u),C=!0)},o(D){le(b,D),le(v,D),le(u),C=!1},d(D){D&&m(r),b&&b.d(D),v&&v.d(D),T[a].d(),n[11](null),U=!1,xe(I)}}}function x2(n,r,e){let t,i,s,{$$slots:l={},$$scope:a}=r,{show_attack_modal:u}=r,{parent_node:o}=r,{data:f}=r,h;const c=qr();Me(n,c,b=>e(16,s=b));const d=Ur();Me(n,d,b=>e(15,i=b));let _=new qn;function w(b){t.includes(b)?e(3,t=t.filter(y=>y!==b)):t.push(b),e(3,t)}window.da_to_off_callback=function(b){w(b)};function k(){let b=0,y=200,v=100;for(const R of t){let T=f.da_to_off.results.bindings.find(B=>B.off_tech_id.value.replace(/ |\./g,"")==R);T&&(on(c,d,o,"attackSelectorNode",T.off_tech_label.value,"d3f:"+T.off_tech_id.value,o.data.sequence,o.position.x+b*y,o.position.y+v,182,63,T.off_artifact_rel_label.value,!1),b+=1)}c.set(s),d.set(i),h&&h.close(),e(3,t=[])}function C(b){br.call(this,n,b)}function U(b){kt[b?"unshift":"push"](()=>{h=b,e(2,h)})}const I=()=>e(0,u=!1),A=()=>{h.close(),e(3,t=[])};return n.$$set=b=>{"show_attack_modal"in b&&e(0,u=b.show_attack_modal),"parent_node"in b&&e(8,o=b.parent_node),"data"in b&&e(1,f=b.data),"$$scope"in b&&e(14,a=b.$$scope)},n.$$.update=()=>{n.$$.dirty&5&&u&&h&&(h.showModal(),_.reset())},e(3,t=[]),[u,f,h,t,c,d,_,k,o,l,C,U,I,A,a]}class J2 extends it{constructor(r){super(),lt(this,r,x2,Y2,Ve,{show_attack_modal:0,parent_node:8,data:1})}}function zu(n,r,e){const t=n.slice();return t[23]=r[e],t}const Z2=n=>({}),Xu=n=>({});function K2(n){let r;return{c(){r=M("No related defensive techniques in this release.")},l(e){r=j(e,"No related defensive techniques in this release.")},m(e,t){E(e,r,t)},p:Ne,i:Ne,o:Ne,d(e){e&&m(r)}}}function $2(n){let r,e,t,i,s,l=n[4],a,u;function o(c){n[14](c)}let f={toggles:n[5]};n[4]!==void 0&&(f.selected=n[4]),t=new Ac({props:f}),kt.push(()=>tr(t,"selected",o));let h=Yu(n);return{c(){r=G("br"),e=ee(),ve(t.$$.fragment),s=ee(),h.c(),a=pe()},l(c){r=W(c,"BR",{}),e=te(c),be(t.$$.fragment,c),s=te(c),h.l(c),a=pe()},m(c,d){E(c,r,d),E(c,e,d),we(t,c,d),E(c,s,d),h.m(c,d),E(c,a,d),u=!0},p(c,d){const _={};d&32&&(_.toggles=c[5]),!i&&d&16&&(i=!0,_.selected=c[4],er(()=>i=!1)),t.$set(_),d&16&&Ve(l,l=c[4])?(Xe(),le(h,1,1,Ne),Ge(),h=Yu(c),h.c(),re(h,1),h.m(a.parentNode,a)):h.p(c,d)},i(c){u||(re(t.$$.fragment,c),re(h),u=!0)},o(c){le(t.$$.fragment,c),le(h),u=!1},d(c){c&&(m(r),m(e),m(s),m(a)),ye(t,c),h.d(c)}}}function eg(n){let r,e="Loading...";return{c(){r=G("div"),r.textContent=e},l(t){r=W(t,"DIV",{"data-svelte-h":!0}),qe(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,i){E(t,r,i)},p:Ne,i:Ne,o:Ne,d(t){t&&m(r)}}}function Gu(n){let r=!n[4].includes(n[23].def_tactic_label.value),e,t=r&&Wu(n);return{c(){t&&t.c(),e=pe()},l(i){t&&t.l(i),e=pe()},m(i,s){t&&t.m(i,s),E(i,e,s)},p(i,s){s&18&&(r=!i[4].includes(i[23].def_tactic_label.value)),r?t?t.p(i,s):(t=Wu(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&m(e),t&&t.d(i)}}}function Wu(n){let r=ke(n[23].def_tech.value)+"",e,t,i=n[23].def_tech_label.value+"",s,l,a="-->",u,o,f=n[23].def_artifact_rel_label.value.replace(/ /g,"")+"",h,c,d=ke(n[23].def_artifact.value)+"",_,w,k=n[23].def_artifact_label.value+"",C,U,I,A,b=ke(n[23].def_artifact.value)+"",y,v,R=ke(n[23].def_tech.value)+"",T,B,D=ke(n[23].def_tech.value)+"",L,F,N=ke(n[23].def_artifact.value)+"",H,O,ne=ke(n[23].def_artifact.value)+"",Q,z;function Y(V,ie){return ie&66&&(I=null),I==null&&(I=!!V[6].includes(ke(V[23].def_tech.value))),I?rg:tg}let x=Y(n,-1),$=x(n);return{c(){e=M(r),t=M('["'),s=M(i),l=M('"] '),u=M(a),o=M(`
                | `),h=M(f),c=M(" | "),_=M(d),w=M('["'),C=M(k),U=M(`"];
                `),$.c(),A=M(` 
                class `),y=M(b),v=M(` ArtifactNode;
                click `),T=M(R),B=M(` href "javascript:da_to_def_callback('`),L=M(D),F=M(`')";
                click `),H=M(N),O=M(' href "/dao/artifact/d3f:'),Q=M(ne),z=M('";')},l(V){e=j(V,r),t=j(V,'["'),s=j(V,i),l=j(V,'"] '),u=j(V,a),o=j(V,`
                | `),h=j(V,f),c=j(V," | "),_=j(V,d),w=j(V,'["'),C=j(V,k),U=j(V,`"];
                `),$.l(V),A=j(V,` 
                class `),y=j(V,b),v=j(V,` ArtifactNode;
                click `),T=j(V,R),B=j(V,` href "javascript:da_to_def_callback('`),L=j(V,D),F=j(V,`')";
                click `),H=j(V,N),O=j(V,' href "/dao/artifact/d3f:'),Q=j(V,ne),z=j(V,'";')},m(V,ie){E(V,e,ie),E(V,t,ie),E(V,s,ie),E(V,l,ie),E(V,u,ie),E(V,o,ie),E(V,h,ie),E(V,c,ie),E(V,_,ie),E(V,w,ie),E(V,C,ie),E(V,U,ie),$.m(V,ie),E(V,A,ie),E(V,y,ie),E(V,v,ie),E(V,T,ie),E(V,B,ie),E(V,L,ie),E(V,F,ie),E(V,H,ie),E(V,O,ie),E(V,Q,ie),E(V,z,ie)},p(V,ie){ie&2&&r!==(r=ke(V[23].def_tech.value)+"")&&ce(e,r),ie&2&&i!==(i=V[23].def_tech_label.value+"")&&ce(s,i),ie&2&&f!==(f=V[23].def_artifact_rel_label.value.replace(/ /g,"")+"")&&ce(h,f),ie&2&&d!==(d=ke(V[23].def_artifact.value)+"")&&ce(_,d),ie&2&&k!==(k=V[23].def_artifact_label.value+"")&&ce(C,k),x===(x=Y(V,ie))&&$?$.p(V,ie):($.d(1),$=x(V),$&&($.c(),$.m(A.parentNode,A))),ie&2&&b!==(b=ke(V[23].def_artifact.value)+"")&&ce(y,b),ie&2&&R!==(R=ke(V[23].def_tech.value)+"")&&ce(T,R),ie&2&&D!==(D=ke(V[23].def_tech.value)+"")&&ce(L,D),ie&2&&N!==(N=ke(V[23].def_artifact.value)+"")&&ce(H,N),ie&2&&ne!==(ne=ke(V[23].def_artifact.value)+"")&&ce(Q,ne)},d(V){V&&(m(e),m(t),m(s),m(l),m(u),m(o),m(h),m(c),m(_),m(w),m(C),m(U),m(A),m(y),m(v),m(T),m(B),m(L),m(F),m(H),m(O),m(Q),m(z)),$.d(V)}}}function tg(n){let r,e=ke(n[23].def_tech.value)+"",t,i;return{c(){r=M("class "),t=M(e),i=M(" DefensiveTechniqueNode;")},l(s){r=j(s,"class "),t=j(s,e),i=j(s," DefensiveTechniqueNode;")},m(s,l){E(s,r,l),E(s,t,l),E(s,i,l)},p(s,l){l&2&&e!==(e=ke(s[23].def_tech.value)+"")&&ce(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function rg(n){let r,e=ke(n[23].def_tech.value)+"",t,i;return{c(){r=M("class "),t=M(e),i=M(" SelectedDefensiveTechniqueNode;")},l(s){r=j(s,"class "),t=j(s,e),i=j(s," SelectedDefensiveTechniqueNode;")},m(s,l){E(s,r,l),E(s,t,l),E(s,i,l)},p(s,l){l&2&&e!==(e=ke(s[23].def_tech.value)+"")&&ce(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function Qu(n){let r=n[3].edge_is_unique(n[23].def_tech_label.value,n[23].def_artifact_rel_label.value,n[23].def_artifact_label.value),e,t=r&&Gu(n);return{c(){t&&t.c(),e=pe()},l(i){t&&t.l(i),e=pe()},m(i,s){t&&t.m(i,s),E(i,e,s)},p(i,s){s&10&&(r=i[3].edge_is_unique(i[23].def_tech_label.value,i[23].def_artifact_rel_label.value,i[23].def_artifact_label.value)),r?t?t.p(i,s):(t=Gu(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&m(e),t&&t.d(i)}}}function ng(n){let r,e,t=Pe(n[1].da_to_def.results.bindings),i=[];for(let s=0;s<t.length;s+=1)i[s]=Qu(zu(n,t,s));return{c(){r=M(`graph LR;
          `);for(let s=0;s<i.length;s+=1)i[s].c();e=pe()},l(s){r=j(s,`graph LR;
          `);for(let l=0;l<i.length;l+=1)i[l].l(s);e=pe()},m(s,l){E(s,r,l);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(s,l);E(s,e,l)},p(s,l){if(l&90){t=Pe(s[1].da_to_def.results.bindings);let a;for(a=0;a<t.length;a+=1){const u=zu(s,t,a);i[a]?i[a].p(u,l):(i[a]=Qu(u),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}},d(s){s&&(m(r),m(e)),ot(i,s)}}}function Yu(n){let r,e;return r=new tn({props:{$$slots:{default:[ng]},$$scope:{ctx:n}}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i&262234&&(s.$$scope={dirty:i,ctx:t}),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function ig(n){let r,e,t,i,s,l,a,u,o,f,h,c,d,_=n[6].length+"",w,k,C,U,I;const A=n[12].header,b=Dt(A,n,n[18],Xu),y=n[12].default,v=Dt(y,n,n[18],null),R=[eg,$2,K2],T=[];function B(D,L){return D[1]?D[1].da_to_def.results.bindings.length>0?1:2:0}return a=B(n),u=T[a]=R[a](n),{c(){r=G("dialog"),e=G("div"),b&&b.c(),t=M(`
    Select Countermeasure Techniques
    `),v&&v.c(),i=ee(),s=G("hr"),l=ee(),u.c(),o=ee(),f=G("hr"),h=ee(),c=G("button"),d=M("Insert ("),w=M(_),k=M(")"),this.h()},l(D){r=W(D,"DIALOG",{class:!0});var L=_e(r);e=W(L,"DIV",{class:!0});var F=_e(e);b&&b.l(F),t=j(F,`
    Select Countermeasure Techniques
    `),v&&v.l(F),i=te(F),s=W(F,"HR",{}),l=te(F),u.l(F),o=te(F),f=W(F,"HR",{}),h=te(F),c=W(F,"BUTTON",{class:!0});var N=_e(c);d=j(N,"Insert ("),w=j(N,_),k=j(N,")"),N.forEach(m),F.forEach(m),L.forEach(m),this.h()},h(){c.autofocus=!0,J(c,"class","svelte-1yq7x1p"),J(e,"class","svelte-1yq7x1p"),J(r,"class","svelte-1yq7x1p")},m(D,L){E(D,r,L),P(r,e),b&&b.m(e,null),P(e,t),v&&v.m(e,null),P(e,i),P(e,s),P(e,l),T[a].m(e,null),P(e,o),P(e,f),P(e,h),P(e,c),P(c,d),P(c,w),P(c,k),n[15](r),C=!0,c.focus(),U||(I=[fe(c,"click",n[9]),fe(e,"click",At(n[13])),fe(r,"close",n[16]),fe(r,"click",en(n[17]))],U=!0)},p(D,[L]){b&&b.p&&(!C||L&262144)&&Et(b,A,D,D[18],C?Ct(A,D[18],L,Z2):Tt(D[18]),Xu),v&&v.p&&(!C||L&262144)&&Et(v,y,D,D[18],C?Ct(y,D[18],L,null):Tt(D[18]),null);let F=a;a=B(D),a===F?T[a].p(D,L):(Xe(),le(T[F],1,1,()=>{T[F]=null}),Ge(),u=T[a],u?u.p(D,L):(u=T[a]=R[a](D),u.c()),re(u,1),u.m(e,o)),(!C||L&64)&&_!==(_=D[6].length+"")&&ce(w,_)},i(D){C||(re(b,D),re(v,D),re(u),C=!0)},o(D){le(b,D),le(v,D),le(u),C=!1},d(D){D&&m(r),b&&b.d(D),v&&v.d(D),T[a].d(),n[15](null),U=!1,xe(I)}}}function lg(n,r,e){let t,i,s,{$$slots:l={},$$scope:a}=r,{show_defend_modal:u}=r,{parent_node:o}=r,{data:f}=r,h;const c=qr();Me(n,c,B=>e(20,s=B));const d=Ur();Me(n,d,B=>e(19,i=B));let _=new qn;function w(B){t.includes(B)?e(6,t=t.filter(D=>D!==B)):t.push(B),e(6,t)}window.da_to_def_callback=function(B){w(B)};function k(){let B=0,D=200,L=100;for(const F of t){let N=f.da_to_def.results.bindings.find(H=>ke(H.def_tech.value)==F);N&&(on(c,d,o,"countermeasureSelectorNode",N.def_tech_label.value,"d3f:"+ke(N.def_tech.value),o.data.sequence,o.position.x+B*D,o.position.y-L,182,63,N.def_artifact_rel_label.value,!1),B+=1)}c.set(s),d.set(i),h&&h.close(),e(6,t=[])}let C=new Set,U=[],I=[];Tc(U,I)&&(I=[]);function A(B){for(const D of t){let L=f.da_to_def.results.bindings.find(F=>ke(F.def_tech.value)==D);B.includes(L.def_tactic_label.value)&&e(6,t=t.filter(F=>F!==D))}e(6,t)}function b(B){br.call(this,n,B)}function y(B){I=B,e(4,I)}function v(B){kt[B?"unshift":"push"](()=>{h=B,e(2,h)})}const R=()=>e(0,u=!1),T=()=>{h.close(),e(6,t=[])};return n.$$set=B=>{"show_defend_modal"in B&&e(0,u=B.show_defend_modal),"parent_node"in B&&e(10,o=B.parent_node),"data"in B&&e(1,f=B.data),"$$scope"in B&&e(18,a=B.$$scope)},n.$$.update=()=>{n.$$.dirty&5&&u&&h&&(h.showModal(),e(3,_=new qn)),n.$$.dirty&2050&&f&&(f.da_to_def.results.bindings.forEach(B=>{C.add(B.def_tactic_label.value)}),e(11,C),e(1,f)),n.$$.dirty&2048&&e(5,U=Array.from(C).sort(function(B,D){return rl[B]-rl[D]})),n.$$.dirty&16&&A(I),n.$$.dirty&24&&_.reset(I)},e(6,t=[]),[u,f,h,_,I,U,t,c,d,k,o,C,l,b,y,v,R,T,a]}class sg extends it{constructor(r){super(),lt(this,r,lg,ig,Ve,{show_defend_modal:0,parent_node:10,data:1})}}function xu(n,r,e){const t=n.slice();return t[27]=r[e],t}function Ju(n,r,e){const t=n.slice();return t[30]=r[e],t}function Zu(n,r,e){const t=n.slice();return t[33]=r[e],t}function Ku(n,r,e){const t=n.slice();return t[27]=r[e],t}function $u(n,r,e){const t=n.slice();return t[30]=r[e],t}const ag=n=>({}),eo=n=>({});function ug(n){let r;return{c(){r=M("No related weaknesses in this release")},l(e){r=j(e,"No related weaknesses in this release")},m(e,t){E(e,r,t)},p:Ne,i:Ne,o:Ne,d(e){e&&m(r)}}}function og(n){let r,e;return r=new tn({props:{$$slots:{default:[cg]},$$scope:{ctx:n}}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i[0]&8389054&&(s.$$scope={dirty:i,ctx:t}),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function fg(n){let r,e="Loading...";return{c(){r=G("div"),r.textContent=e},l(t){r=W(t,"DIV",{"data-svelte-h":!0}),qe(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,i){E(t,r,i)},p:Ne,i:Ne,o:Ne,d(t){t&&m(r)}}}function to(n){let r,e=Pe(n[33]["d3f:outbound"]),t=[];for(let i=0;i<e.length;i+=1)t[i]=io(Ku(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=pe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=pe()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);E(i,r,s)},p(i,s){if(s[0]&430){e=Pe(i[33]["d3f:outbound"]);let l;for(l=0;l<e.length;l+=1){const a=Ku(i,e,l);t[l]?t[l].p(a,s):(t[l]=io(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),ot(t,i)}}}function ro(n){let r,e=n[33]["@id"]+"",t,i;return{c(){r=M("class "),t=M(e),i=M(" selected_inbound_node;")},l(s){r=j(s,"class "),t=j(s,e),i=j(s," selected_inbound_node;")},m(s,l){E(s,r,l),E(s,t,l),E(s,i,l)},p(s,l){l[0]&160&&e!==(e=s[33]["@id"]+"")&&ce(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function no(n){let r=n[33]["@id"]+"",e,t,i=n[33]["rdfs:label"][0]+"",s,l,a="-->",u,o,f=ke(n[27]["@id"])+"",h,c,d=n[30]["@id"]+"",_,w,k=n[7].i(n[30]["@id"])["rdfs:label"][0]+"",C,U,I=n[33]["@id"]+"",A,b,y=n[33]["@id"]+"",v,R,T,B,D=n[8].includes(n[33]["@id"]),L,F=n[30]["@id"]+"",N,H,O=n[30]["@id"]+"",ne,Q,z,Y,x=n[33]["@id"]+"",$,V,ie=n[33]["@id"]+"",Re,Le,he=n[30]["@id"]+"",me,oe,Ee=n[3](n[30])+"",$e,ft,rt=D&&ro(n);return{c(){e=M(r),t=M('["'),s=M(i),l=M('"] '),u=M(a),o=M(" | "),h=M(f),c=M(" | "),_=M(d),w=M('["'),C=M(k),U=M(`"];
                class `),A=M(I),b=M(" inbound_node; style "),v=M(y),R=M(" fill:"),T=M(n[1]),B=M(`;
                `),rt&&rt.c(),L=M(`
                class `),N=M(F),H=M(" RootArtifactNode; style "),ne=M(O),Q=M(" fill:"),z=M(n[2]),Y=M(`;
                click `),$=M(x),V=M(` href "javascript:da_to_weak_callback('`),Re=M(ie),Le=M(`')"; click `),me=M(he),oe=M(' href "'),$e=M(Ee),ft=M('";')},l(ge){e=j(ge,r),t=j(ge,'["'),s=j(ge,i),l=j(ge,'"] '),u=j(ge,a),o=j(ge," | "),h=j(ge,f),c=j(ge," | "),_=j(ge,d),w=j(ge,'["'),C=j(ge,k),U=j(ge,`"];
                class `),A=j(ge,I),b=j(ge," inbound_node; style "),v=j(ge,y),R=j(ge," fill:"),T=j(ge,n[1]),B=j(ge,`;
                `),rt&&rt.l(ge),L=j(ge,`
                class `),N=j(ge,F),H=j(ge," RootArtifactNode; style "),ne=j(ge,O),Q=j(ge," fill:"),z=j(ge,n[2]),Y=j(ge,`;
                click `),$=j(ge,x),V=j(ge,` href "javascript:da_to_weak_callback('`),Re=j(ge,ie),Le=j(ge,`')"; click `),me=j(ge,he),oe=j(ge,' href "'),$e=j(ge,Ee),ft=j(ge,'";')},m(ge,Se){E(ge,e,Se),E(ge,t,Se),E(ge,s,Se),E(ge,l,Se),E(ge,u,Se),E(ge,o,Se),E(ge,h,Se),E(ge,c,Se),E(ge,_,Se),E(ge,w,Se),E(ge,C,Se),E(ge,U,Se),E(ge,A,Se),E(ge,b,Se),E(ge,v,Se),E(ge,R,Se),E(ge,T,Se),E(ge,B,Se),rt&&rt.m(ge,Se),E(ge,L,Se),E(ge,N,Se),E(ge,H,Se),E(ge,ne,Se),E(ge,Q,Se),E(ge,z,Se),E(ge,Y,Se),E(ge,$,Se),E(ge,V,Se),E(ge,Re,Se),E(ge,Le,Se),E(ge,me,Se),E(ge,oe,Se),E(ge,$e,Se),E(ge,ft,Se)},p(ge,Se){Se[0]&160&&r!==(r=ge[33]["@id"]+"")&&ce(e,r),Se[0]&160&&i!==(i=ge[33]["rdfs:label"][0]+"")&&ce(s,i),Se[0]&160&&f!==(f=ke(ge[27]["@id"])+"")&&ce(h,f),Se[0]&160&&d!==(d=ge[30]["@id"]+"")&&ce(_,d),Se[0]&160&&k!==(k=ge[7].i(ge[30]["@id"])["rdfs:label"][0]+"")&&ce(C,k),Se[0]&160&&I!==(I=ge[33]["@id"]+"")&&ce(A,I),Se[0]&160&&y!==(y=ge[33]["@id"]+"")&&ce(v,y),Se[0]&2&&ce(T,ge[1]),Se[0]&416&&(D=ge[8].includes(ge[33]["@id"])),D?rt?rt.p(ge,Se):(rt=ro(ge),rt.c(),rt.m(L.parentNode,L)):rt&&(rt.d(1),rt=null),Se[0]&160&&F!==(F=ge[30]["@id"]+"")&&ce(N,F),Se[0]&160&&O!==(O=ge[30]["@id"]+"")&&ce(ne,O),Se[0]&4&&ce(z,ge[2]),Se[0]&160&&x!==(x=ge[33]["@id"]+"")&&ce($,x),Se[0]&160&&ie!==(ie=ge[33]["@id"]+"")&&ce(Re,ie),Se[0]&160&&he!==(he=ge[30]["@id"]+"")&&ce(me,he),Se[0]&168&&Ee!==(Ee=ge[3](ge[30])+"")&&ce($e,Ee)},d(ge){ge&&(m(e),m(t),m(s),m(l),m(u),m(o),m(h),m(c),m(_),m(w),m(C),m(U),m(A),m(b),m(v),m(R),m(T),m(B),m(L),m(N),m(H),m(ne),m(Q),m(z),m(Y),m($),m(V),m(Re),m(Le),m(me),m(oe),m($e),m(ft)),rt&&rt.d(ge)}}}function io(n){let r,e=Pe(n[33][n[27]["@id"]]),t=[];for(let i=0;i<e.length;i+=1)t[i]=no($u(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=pe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=pe()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);E(i,r,s)},p(i,s){if(s[0]&430){e=Pe(i[33][i[27]["@id"]]);let l;for(l=0;l<e.length;l+=1){const a=$u(i,e,l);t[l]?t[l].p(a,s):(t[l]=no(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),ot(t,i)}}}function lo(n){let r,e=n[33]["d3f:outbound"]&&to(n);return{c(){e&&e.c(),r=pe()},l(t){e&&e.l(t),r=pe()},m(t,i){e&&e.m(t,i),E(t,r,i)},p(t,i){t[33]["d3f:outbound"]?e?e.p(t,i):(e=to(t),e.c(),e.m(r.parentNode,r)):e&&(e.d(1),e=null)},d(t){t&&m(r),e&&e.d(t)}}}function so(n){let r,e=Pe(n[7].i(n[5].description["@id"])["d3f:outbound"]),t=[];for(let i=0;i<e.length;i+=1)t[i]=uo(xu(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=pe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=pe()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);E(i,r,s)},p(i,s){if(s[0]&184){e=Pe(i[7].i(i[5].description["@id"])["d3f:outbound"]);let l;for(l=0;l<e.length;l+=1){const a=xu(i,e,l);t[l]?t[l].p(a,s):(t[l]=uo(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),ot(t,i)}}}function ao(n){let r=n[5].description["@id"]+"",e,t,i=n[7].i(n[5].description["@id"])["rdfs:label"][0]+"",s,l,a="-->",u,o,f=ke(n[27]["@id"])+"",h,c,d=n[30]["@id"]+"",_,w,k=n[7].graph[n[7].index[n[30]["@id"]]]["rdfs:label"][0]+"",C,U,I=n[5].description["@id"]+"",A,b,y=n[30]["@id"]+"",v,R,T=n[5].description["@id"]+"",B,D,L=n[3](n[5].description["@id"])+"",F,N,H=n[30]["@id"]+"",O,ne,Q=n[4](n[30])+"",z,Y;return{c(){e=M(r),t=M('["'),s=M(i),l=M('"] '),u=M(a),o=M(" | "),h=M(f),c=M(" | "),_=M(d),w=M('["'),C=M(k),U=M('"]; class '),A=M(I),b=M(" RootArtifactNode; class "),v=M(y),R=M(` ArtifactNode;
              click `),B=M(T),D=M(' href "'),F=M(L),N=M('"; click '),O=M(H),ne=M(' href "'),z=M(Q),Y=M('";')},l(x){e=j(x,r),t=j(x,'["'),s=j(x,i),l=j(x,'"] '),u=j(x,a),o=j(x," | "),h=j(x,f),c=j(x," | "),_=j(x,d),w=j(x,'["'),C=j(x,k),U=j(x,'"]; class '),A=j(x,I),b=j(x," RootArtifactNode; class "),v=j(x,y),R=j(x,` ArtifactNode;
              click `),B=j(x,T),D=j(x,' href "'),F=j(x,L),N=j(x,'"; click '),O=j(x,H),ne=j(x,' href "'),z=j(x,Q),Y=j(x,'";')},m(x,$){E(x,e,$),E(x,t,$),E(x,s,$),E(x,l,$),E(x,u,$),E(x,o,$),E(x,h,$),E(x,c,$),E(x,_,$),E(x,w,$),E(x,C,$),E(x,U,$),E(x,A,$),E(x,b,$),E(x,v,$),E(x,R,$),E(x,B,$),E(x,D,$),E(x,F,$),E(x,N,$),E(x,O,$),E(x,ne,$),E(x,z,$),E(x,Y,$)},p(x,$){$[0]&32&&r!==(r=x[5].description["@id"]+"")&&ce(e,r),$[0]&160&&i!==(i=x[7].i(x[5].description["@id"])["rdfs:label"][0]+"")&&ce(s,i),$[0]&160&&f!==(f=ke(x[27]["@id"])+"")&&ce(h,f),$[0]&160&&d!==(d=x[30]["@id"]+"")&&ce(_,d),$[0]&160&&k!==(k=x[7].graph[x[7].index[x[30]["@id"]]]["rdfs:label"][0]+"")&&ce(C,k),$[0]&32&&I!==(I=x[5].description["@id"]+"")&&ce(A,I),$[0]&160&&y!==(y=x[30]["@id"]+"")&&ce(v,y),$[0]&32&&T!==(T=x[5].description["@id"]+"")&&ce(B,T),$[0]&40&&L!==(L=x[3](x[5].description["@id"])+"")&&ce(F,L),$[0]&160&&H!==(H=x[30]["@id"]+"")&&ce(O,H),$[0]&176&&Q!==(Q=x[4](x[30])+"")&&ce(z,Q)},d(x){x&&(m(e),m(t),m(s),m(l),m(u),m(o),m(h),m(c),m(_),m(w),m(C),m(U),m(A),m(b),m(v),m(R),m(B),m(D),m(F),m(N),m(O),m(ne),m(z),m(Y))}}}function uo(n){let r,e=Pe(n[7].i(n[5].description["@id"])[n[27]["@id"]]),t=[];for(let i=0;i<e.length;i+=1)t[i]=ao(Ju(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=pe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=pe()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);E(i,r,s)},p(i,s){if(s[0]&184){e=Pe(i[7].i(i[5].description["@id"])[i[27]["@id"]]);let l;for(l=0;l<e.length;l+=1){const a=Ju(i,e,l);t[l]?t[l].p(a,s):(t[l]=ao(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),ot(t,i)}}}function cg(n){let r,e,t=n[7].i(n[5].description["@id"])&&n[7].i(n[5].description["@id"])["d3f:outbound"],i,s=Pe(n[7].graph.filter(n[19])),l=[];for(let u=0;u<s.length;u+=1)l[u]=lo(Zu(n,s,u));let a=t&&so(n);return{c(){r=M(`graph LR;
        `);for(let u=0;u<l.length;u+=1)l[u].c();e=ee(),a&&a.c(),i=pe()},l(u){r=j(u,`graph LR;
        `);for(let o=0;o<l.length;o+=1)l[o].l(u);e=te(u),a&&a.l(u),i=pe()},m(u,o){E(u,r,o);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(u,o);E(u,e,o),a&&a.m(u,o),E(u,i,o)},p(u,o){if(o[0]&430){s=Pe(u[7].graph.filter(u[19]));let f;for(f=0;f<s.length;f+=1){const h=Zu(u,s,f);l[f]?l[f].p(h,o):(l[f]=lo(h),l[f].c(),l[f].m(e.parentNode,e))}for(;f<l.length;f+=1)l[f].d(1);l.length=s.length}o[0]&160&&(t=u[7].i(u[5].description["@id"])&&u[7].i(u[5].description["@id"])["d3f:outbound"]),t?a?a.p(u,o):(a=so(u),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},d(u){u&&(m(r),m(e),m(i)),ot(l,u),a&&a.d(u)}}}function dg(n){let r,e,t,i,s,l,a,u,o,f,h,c,d,_=n[8].length+"",w,k,C,U,I;const A=n[17].header,b=Dt(A,n,n[23],eo),y=n[17].default,v=Dt(y,n,n[23],null),R=[fg,og,ug],T=[];function B(D,L){return D[5]?D[7].graph.length>0?1:2:0}return a=B(n),u=T[a]=R[a](n),{c(){r=G("dialog"),e=G("div"),b&&b.c(),t=M(`
    Select Weaknesses
    `),v&&v.c(),i=ee(),s=G("hr"),l=ee(),u.c(),o=ee(),f=G("hr"),h=ee(),c=G("button"),d=M("Insert ("),w=M(_),k=M(")"),this.h()},l(D){r=W(D,"DIALOG",{class:!0});var L=_e(r);e=W(L,"DIV",{class:!0});var F=_e(e);b&&b.l(F),t=j(F,`
    Select Weaknesses
    `),v&&v.l(F),i=te(F),s=W(F,"HR",{}),l=te(F),u.l(F),o=te(F),f=W(F,"HR",{}),h=te(F),c=W(F,"BUTTON",{class:!0});var N=_e(c);d=j(N,"Insert ("),w=j(N,_),k=j(N,")"),N.forEach(m),F.forEach(m),L.forEach(m),this.h()},h(){c.autofocus=!0,J(c,"class","svelte-1resfch"),J(e,"class","svelte-1resfch"),J(r,"class","svelte-1resfch")},m(D,L){E(D,r,L),P(r,e),b&&b.m(e,null),P(e,t),v&&v.m(e,null),P(e,i),P(e,s),P(e,l),T[a].m(e,null),P(e,o),P(e,f),P(e,h),P(e,c),P(c,d),P(c,w),P(c,k),n[20](r),C=!0,c.focus(),U||(I=[fe(c,"click",n[11]),fe(e,"click",At(n[18])),fe(r,"close",n[21]),fe(r,"click",en(n[22]))],U=!0)},p(D,L){b&&b.p&&(!C||L[0]&8388608)&&Et(b,A,D,D[23],C?Ct(A,D[23],L,ag):Tt(D[23]),eo),v&&v.p&&(!C||L[0]&8388608)&&Et(v,y,D,D[23],C?Ct(y,D[23],L,null):Tt(D[23]),null);let F=a;a=B(D),a===F?T[a].p(D,L):(Xe(),le(T[F],1,1,()=>{T[F]=null}),Ge(),u=T[a],u?u.p(D,L):(u=T[a]=R[a](D),u.c()),re(u,1),u.m(e,o)),(!C||L[0]&256)&&_!==(_=D[8].length+"")&&ce(w,_)},i(D){C||(re(b,D),re(v,D),re(u),C=!0)},o(D){le(b,D),le(v,D),le(u),C=!1},d(D){D&&m(r),b&&b.d(D),v&&v.d(D),T[a].d(),n[20](null),U=!1,xe(I)}}}function hg(n,r,e){let t,i,s,{$$slots:l={},$$scope:a}=r,{empty_message:u="has no direct neighbors in this release."}=r,{outbound_color:o="#fff4dd"}=r,{inbound_color:f="#fff4dd"}=r,{root_color:h="#fff4dd"}=r,{link_function:c=N=>`/dao/artifact/${N["@id"]}`}=r,{inbound_link_function:d=c}=r,{root_link_function:_=N=>`/dao/artifact/${N["@id"]}`}=r,{outbound_link_function:w=c}=r,{show_weakness_modal:k}=r,{parent_node:C}=r,{data:U}=r,I;const A=qr();Me(n,A,N=>e(25,s=N));const b=Ur();Me(n,b,N=>e(24,i=N));let y;function v(N){t.includes(N)?e(8,t=t.filter(H=>H!==N)):t.push(N),e(8,t),e(8,t)}window.da_to_weak_callback=function(N){v(N)};function R(){let N=0,H=200,O=100;for(const ne of t){let Q=U.da_to_weak["@graph"].find(z=>z["@id"]==ne);Q&&(on(A,b,C,"vulnerabilitySelectorNode",Q["rdfs:label"],Q["d3f:cwe-id"],C.data.sequence,C.position.x+N*H,C.position.y+O,182,63,Q["d3f:outbound"][0]["@id"].replace("d3f:",""),!1),N+=1)}A.set(s),b.set(i),I&&I.close(),e(8,t=[])}function T(N){br.call(this,n,N)}const B=N=>N["@id"]!=U.description["@id"];function D(N){kt[N?"unshift":"push"](()=>{I=N,e(6,I)})}const L=()=>e(0,k=!1),F=()=>{I.close(),e(8,t=[])};return n.$$set=N=>{"empty_message"in N&&e(12,u=N.empty_message),"outbound_color"in N&&e(13,o=N.outbound_color),"inbound_color"in N&&e(1,f=N.inbound_color),"root_color"in N&&e(2,h=N.root_color),"link_function"in N&&e(14,c=N.link_function),"inbound_link_function"in N&&e(15,d=N.inbound_link_function),"root_link_function"in N&&e(3,_=N.root_link_function),"outbound_link_function"in N&&e(4,w=N.outbound_link_function),"show_weakness_modal"in N&&e(0,k=N.show_weakness_modal),"parent_node"in N&&e(16,C=N.parent_node),"data"in N&&e(5,U=N.data),"$$scope"in N&&e(23,a=N.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&65&&k&&I&&I.showModal(),n.$$.dirty[0]&32&&U&&e(7,y=new Cc(U.da_to_weak,{index:!0}))},e(8,t=[]),[k,f,h,_,w,U,I,y,t,A,b,R,u,o,c,d,C,l,T,B,D,L,F,a]}class _g extends it{constructor(r){super(),lt(this,r,hg,dg,Ve,{empty_message:12,outbound_color:13,inbound_color:1,root_color:2,link_function:14,inbound_link_function:15,root_link_function:3,outbound_link_function:4,show_weakness_modal:0,parent_node:16,data:5},null,[-1,-1])}}function oo(n,r,e){const t=n.slice();return t[31]=r[e],t}function fo(n,r,e){const t=n.slice();return t[34]=r[e],t}function co(n,r,e){const t=n.slice();return t[37]=r[e],t}const pg=n=>({}),ho=n=>({});function gg(n){let r;return{c(){r=M("No related parts/control in this release")},l(e){r=j(e,"No related parts/control in this release")},m(e,t){E(e,r,t)},p:Ne,i:Ne,o:Ne,d(e){e&&m(r)}}}function mg(n){let r,e;return r=new tn({props:{$$slots:{default:[bg]},$$scope:{ctx:n}}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i[0]&134217934&&(s.$$scope={dirty:i,ctx:t}),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function vg(n){let r,e="Loading...";return{c(){r=G("div"),r.textContent=e},l(t){r=W(t,"DIV",{"data-svelte-h":!0}),qe(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,i){E(t,r,i)},p:Ne,i:Ne,o:Ne,d(t){t&&m(r)}}}function _o(n){let r,e=Pe(n[31]["d3f:outbound"].filter(n[23])),t=[];for(let i=0;i<e.length;i+=1)t[i]=yo(fo(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=pe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=pe()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);E(i,r,s)},p(i,s){if(s[0]&206){e=Pe(i[31]["d3f:outbound"].filter(i[23]));let l;for(l=0;l<e.length;l+=1){const a=fo(i,e,l);t[l]?t[l].p(a,s):(t[l]=yo(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),ot(t,i)}}}function po(n){let r,e,t=n[31]["@id"]!=n[2].data.d3f_class&&go(n),i=n[37]["@id"]!=n[2].data.d3f_class&&mo(n);return{c(){t&&t.c(),r=ee(),i&&i.c(),e=pe()},l(s){t&&t.l(s),r=te(s),i&&i.l(s),e=pe()},m(s,l){t&&t.m(s,l),E(s,r,l),i&&i.m(s,l),E(s,e,l)},p(s,l){s[31]["@id"]!=s[2].data.d3f_class?t?t.p(s,l):(t=go(s),t.c(),t.m(r.parentNode,r)):t&&(t.d(1),t=null),s[37]["@id"]!=s[2].data.d3f_class?i?i.p(s,l):(i=mo(s),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},d(s){s&&(m(r),m(e)),t&&t.d(s),i&&i.d(s)}}}function go(n){let r,e=n[31]["@id"]+"",t,i;return{c(){r=M("class "),t=M(e),i=M(" selected_outbound_node;")},l(s){r=j(s,"class "),t=j(s,e),i=j(s," selected_outbound_node;")},m(s,l){E(s,r,l),E(s,t,l),E(s,i,l)},p(s,l){l[0]&72&&e!==(e=s[31]["@id"]+"")&&ce(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function mo(n){let r,e=n[37]["@id"]+"",t,i;return{c(){r=M("class "),t=M(e),i=M(" selected_outbound_node;")},l(s){r=j(s,"class "),t=j(s,e),i=j(s," selected_outbound_node;")},m(s,l){E(s,r,l),E(s,t,l),E(s,i,l)},p(s,l){l[0]&74&&e!==(e=s[37]["@id"]+"")&&ce(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function vo(n){let r,e=n[31]["@id"]+"",t,i,s=n[31]["@id"]+"",l,a,u=ke(n[34]["@id"])+"",o,f,h=n[37]["@id"]+"",c,d;return{c(){r=M("click "),t=M(e),i=M(` href "javascript:da_to_neighbors_callback('`),l=M(s),a=M("', '"),o=M(u),f=M("','"),c=M(h),d=M(`')";`)},l(_){r=j(_,"click "),t=j(_,e),i=j(_,` href "javascript:da_to_neighbors_callback('`),l=j(_,s),a=j(_,"', '"),o=j(_,u),f=j(_,"','"),c=j(_,h),d=j(_,`')";`)},m(_,w){E(_,r,w),E(_,t,w),E(_,i,w),E(_,l,w),E(_,a,w),E(_,o,w),E(_,f,w),E(_,c,w),E(_,d,w)},p(_,w){w[0]&72&&e!==(e=_[31]["@id"]+"")&&ce(t,e),w[0]&72&&s!==(s=_[31]["@id"]+"")&&ce(l,s),w[0]&74&&u!==(u=ke(_[34]["@id"])+"")&&ce(o,u),w[0]&74&&h!==(h=_[37]["@id"]+"")&&ce(c,h)},d(_){_&&(m(r),m(t),m(i),m(l),m(a),m(o),m(f),m(c),m(d))}}}function bo(n){let r,e=n[37]["@id"]+"",t,i,s=n[31]["@id"]+"",l,a,u=ke(n[34]["@id"])+"",o,f,h=n[37]["@id"]+"",c,d;return{c(){r=M("click "),t=M(e),i=M(` href "javascript:da_to_neighbors_callback('`),l=M(s),a=M("', '"),o=M(u),f=M("','"),c=M(h),d=M(`')";`)},l(_){r=j(_,"click "),t=j(_,e),i=j(_,` href "javascript:da_to_neighbors_callback('`),l=j(_,s),a=j(_,"', '"),o=j(_,u),f=j(_,"','"),c=j(_,h),d=j(_,`')";`)},m(_,w){E(_,r,w),E(_,t,w),E(_,i,w),E(_,l,w),E(_,a,w),E(_,o,w),E(_,f,w),E(_,c,w),E(_,d,w)},p(_,w){w[0]&74&&e!==(e=_[37]["@id"]+"")&&ce(t,e),w[0]&72&&s!==(s=_[31]["@id"]+"")&&ce(l,s),w[0]&74&&u!==(u=ke(_[34]["@id"])+"")&&ce(o,u),w[0]&74&&h!==(h=_[37]["@id"]+"")&&ce(c,h)},d(_){_&&(m(r),m(t),m(i),m(l),m(a),m(o),m(f),m(c),m(d))}}}function wo(n){let r=n[31]["@id"]+"",e,t,i=n[31]["rdfs:label"][0]+"",s,l,a="-->",u,o,f=ke(n[34]["@id"])+"",h,c,d=n[37]["@id"]+"",_,w,k=n[6].i(n[37]["@id"])["rdfs:label"][0]+"",C,U,I=n[37]["@id"]+"",A,b,y=n[7].some(B),v,R,T;function B(...N){return n[21](n[31],n[34],n[37],...N)}let D=y&&po(n),L=n[31]["@id"]!=n[2].data.d3f_class&&vo(n),F=n[37]["@id"]!=n[2].data.d3f_class&&bo(n);return{c(){e=M(r),t=M('["'),s=M(i),l=M('"] '),u=M(a),o=M(" | "),h=M(f),c=M(" | "),_=M(d),w=M('["'),C=M(k),U=M(`"];
                class `),A=M(I),b=M(` outbound;
                `),D&&D.c(),v=ee(),L&&L.c(),R=ee(),F&&F.c(),T=pe()},l(N){e=j(N,r),t=j(N,'["'),s=j(N,i),l=j(N,'"] '),u=j(N,a),o=j(N," | "),h=j(N,f),c=j(N," | "),_=j(N,d),w=j(N,'["'),C=j(N,k),U=j(N,`"];
                class `),A=j(N,I),b=j(N,` outbound;
                `),D&&D.l(N),v=te(N),L&&L.l(N),R=te(N),F&&F.l(N),T=pe()},m(N,H){E(N,e,H),E(N,t,H),E(N,s,H),E(N,l,H),E(N,u,H),E(N,o,H),E(N,h,H),E(N,c,H),E(N,_,H),E(N,w,H),E(N,C,H),E(N,U,H),E(N,A,H),E(N,b,H),D&&D.m(N,H),E(N,v,H),L&&L.m(N,H),E(N,R,H),F&&F.m(N,H),E(N,T,H)},p(N,H){n=N,H[0]&72&&r!==(r=n[31]["@id"]+"")&&ce(e,r),H[0]&72&&i!==(i=n[31]["rdfs:label"][0]+"")&&ce(s,i),H[0]&74&&f!==(f=ke(n[34]["@id"])+"")&&ce(h,f),H[0]&74&&d!==(d=n[37]["@id"]+"")&&ce(_,d),H[0]&74&&k!==(k=n[6].i(n[37]["@id"])["rdfs:label"][0]+"")&&ce(C,k),H[0]&74&&I!==(I=n[37]["@id"]+"")&&ce(A,I),H[0]&202&&(y=n[7].some(B)),y?D?D.p(n,H):(D=po(n),D.c(),D.m(v.parentNode,v)):D&&(D.d(1),D=null),n[31]["@id"]!=n[2].data.d3f_class?L?L.p(n,H):(L=vo(n),L.c(),L.m(R.parentNode,R)):L&&(L.d(1),L=null),n[37]["@id"]!=n[2].data.d3f_class?F?F.p(n,H):(F=bo(n),F.c(),F.m(T.parentNode,T)):F&&(F.d(1),F=null)},d(N){N&&(m(e),m(t),m(s),m(l),m(u),m(o),m(h),m(c),m(_),m(w),m(C),m(U),m(A),m(b),m(v),m(R),m(T)),D&&D.d(N),L&&L.d(N),F&&F.d(N)}}}function yo(n){let r,e=Pe(n[31][n[34]["@id"]]),t=[];for(let i=0;i<e.length;i+=1)t[i]=wo(co(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=pe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=pe()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);E(i,r,s)},p(i,s){if(s[0]&206){e=Pe(i[31][i[34]["@id"]]);let l;for(l=0;l<e.length;l+=1){const a=co(i,e,l);t[l]?t[l].p(a,s):(t[l]=wo(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),ot(t,i)}}}function ko(n){let r,e=n[31]["d3f:outbound"]&&_o(n);return{c(){e&&e.c(),r=pe()},l(t){e&&e.l(t),r=pe()},m(t,i){e&&e.m(t,i),E(t,r,i)},p(t,i){t[31]["d3f:outbound"]?e?e.p(t,i):(e=_o(t),e.c(),e.m(r.parentNode,r)):e&&(e.d(1),e=null)},d(t){t&&m(r),e&&e.d(t)}}}function bg(n){let r,e,t=Pe(n[6].graph.filter(n[22])),i=[];for(let s=0;s<t.length;s+=1)i[s]=ko(oo(n,t,s));return{c(){r=M(`graph LR;
        `);for(let s=0;s<i.length;s+=1)i[s].c();e=pe()},l(s){r=j(s,`graph LR;
        `);for(let l=0;l<i.length;l+=1)i[l].l(s);e=pe()},m(s,l){E(s,r,l);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(s,l);E(s,e,l)},p(s,l){if(l[0]&206){t=Pe(s[6].graph.filter(s[22]));let a;for(a=0;a<t.length;a+=1){const u=oo(s,t,a);i[a]?i[a].p(u,l):(i[a]=ko(u),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}},d(s){s&&(m(r),m(e)),ot(i,s)}}}function wg(n){let r,e,t,i,s,l,a,u,o,f,h,c,d,_=n[7].length+"",w,k,C,U,I;const A=n[19].header,b=Dt(A,n,n[27],ho),y=n[19].default,v=Dt(y,n,n[27],null),R=[vg,mg,gg],T=[];function B(D,L){return D[3]?D[5]&&D[6].graph.length>0?1:2:0}return a=B(n),u=T[a]=R[a](n),{c(){r=G("dialog"),e=G("div"),b&&b.c(),t=M(`
    Select Parts/Control Neighbors
    `),v&&v.c(),i=ee(),s=G("hr"),l=ee(),u.c(),o=ee(),f=G("hr"),h=ee(),c=G("button"),d=M("Insert ("),w=M(_),k=M(")"),this.h()},l(D){r=W(D,"DIALOG",{class:!0});var L=_e(r);e=W(L,"DIV",{class:!0});var F=_e(e);b&&b.l(F),t=j(F,`
    Select Parts/Control Neighbors
    `),v&&v.l(F),i=te(F),s=W(F,"HR",{}),l=te(F),u.l(F),o=te(F),f=W(F,"HR",{}),h=te(F),c=W(F,"BUTTON",{class:!0});var N=_e(c);d=j(N,"Insert ("),w=j(N,_),k=j(N,")"),N.forEach(m),F.forEach(m),L.forEach(m),this.h()},h(){c.autofocus=!0,J(c,"class","svelte-x2no78"),J(e,"class","svelte-x2no78"),J(r,"class","svelte-x2no78")},m(D,L){E(D,r,L),P(r,e),b&&b.m(e,null),P(e,t),v&&v.m(e,null),P(e,i),P(e,s),P(e,l),T[a].m(e,null),P(e,o),P(e,f),P(e,h),P(e,c),P(c,d),P(c,w),P(c,k),n[24](r),C=!0,c.focus(),U||(I=[fe(c,"click",n[10]),fe(e,"click",At(n[20])),fe(r,"close",n[25]),fe(r,"click",en(n[26]))],U=!0)},p(D,L){b&&b.p&&(!C||L[0]&134217728)&&Et(b,A,D,D[27],C?Ct(A,D[27],L,pg):Tt(D[27]),ho),v&&v.p&&(!C||L[0]&134217728)&&Et(v,y,D,D[27],C?Ct(y,D[27],L,null):Tt(D[27]),null);let F=a;a=B(D),a===F?T[a].p(D,L):(Xe(),le(T[F],1,1,()=>{T[F]=null}),Ge(),u=T[a],u?u.p(D,L):(u=T[a]=R[a](D),u.c()),re(u,1),u.m(e,o)),(!C||L[0]&128)&&_!==(_=D[7].length+"")&&ce(w,_)},i(D){C||(re(b,D),re(v,D),re(u),C=!0)},o(D){le(b,D),le(v,D),le(u),C=!1},d(D){D&&m(r),b&&b.d(D),v&&v.d(D),T[a].d(),n[24](null),U=!1,xe(I)}}}function yg(n,r,e){let t,i,s,{$$slots:l={},$$scope:a}=r,{empty_message:u="has no direct neighbors in this release."}=r,{outbound_color:o="#fff4dd"}=r,{inbound_color:f="#fff4dd"}=r,{root_color:h="#fff4dd"}=r,{link_function:c=Q=>`/dao/artifact/${Q["@id"]}`}=r,{inbound_link_function:d=c}=r,{root_link_function:_=Q=>`/dao/artifact/${Q["@id"]}`}=r,{outbound_link_function:w=c}=r,{show_neighbors_modal:k}=r,{neighbor_filter_labels:C}=r,{parent_node:U}=r,{data:I}=r,A,b=!1;const y=qr();Me(n,y,Q=>e(29,s=Q));const v=Ur();Me(n,v,Q=>e(28,i=Q));let R;function T(Q){t.some(z=>z.source==Q.source&&z.relation==Q.relation&&z.target==Q.target)?e(7,t=t.filter(z=>z.source!=Q.source||z.relation!=Q.relation||z.target!=Q.target)):t.push(Q),e(7,t),e(7,t)}window.da_to_neighbors_callback=function(Q,z,Y){T({source:Q,relation:z,target:Y})};function B(){let Q=0,z=200,Y=100;for(const x of t){let $=I.neighbors["@graph"].find(ie=>ie["@id"]==x.source),V=I.neighbors["@graph"].find(ie=>ie["@id"]==x.target);if($&&V){let ie=U.data.d3f_class==$["@id"],Re=ie?V:$;on(y,v,U,"artifactSelectorNode",Re["rdfs:label"][0],Re["@id"],U.data.sequence,U.position.x+Q*z,ie?U.position.y+Y:U.position.y-Y,182,63,x.relation,ie),Q+=1}}y.set(s),v.set(i),A&&(A.close(),e(5,b=!1)),e(7,t=[])}function D(Q){br.call(this,n,Q)}const L=(Q,z,Y,x)=>x.source==Q["@id"]&&x.relation==ke(z["@id"])&&x.target==Y["@id"],F=Q=>Q["@id"]!=I.description["@id"],N=Q=>C.includes(Q["@id"]);function H(Q){kt[Q?"unshift":"push"](()=>{A=Q,e(4,A)})}const O=()=>e(0,k=!1),ne=()=>{A.close(),e(7,t=[])};return n.$$set=Q=>{"empty_message"in Q&&e(11,u=Q.empty_message),"outbound_color"in Q&&e(12,o=Q.outbound_color),"inbound_color"in Q&&e(13,f=Q.inbound_color),"root_color"in Q&&e(14,h=Q.root_color),"link_function"in Q&&e(15,c=Q.link_function),"inbound_link_function"in Q&&e(16,d=Q.inbound_link_function),"root_link_function"in Q&&e(17,_=Q.root_link_function),"outbound_link_function"in Q&&e(18,w=Q.outbound_link_function),"show_neighbors_modal"in Q&&e(0,k=Q.show_neighbors_modal),"neighbor_filter_labels"in Q&&e(1,C=Q.neighbor_filter_labels),"parent_node"in Q&&e(2,U=Q.parent_node),"data"in Q&&e(3,I=Q.data),"$$scope"in Q&&e(27,a=Q.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&17&&k&&A&&A.showModal(),n.$$.dirty[0]&14&&I&&(e(5,b=!1),I.neighbors["@graph"].find(Q=>Q["@id"]==U.data.d3f_class),I.neighbors["@graph"].some(Q=>Q["d3f:outbound"]&&C.some(z=>Q["d3f:outbound"].some(Y=>Y["@id"]==z)))&&(e(5,b=!0),e(6,R=new Cc(I.neighbors,{index:!0}))))},e(7,t=[]),[k,C,U,I,A,b,R,t,y,v,B,u,o,f,h,c,d,_,w,l,D,L,F,N,H,O,ne,a]}class kg extends it{constructor(r){super(),lt(this,r,yg,wg,Ve,{empty_message:11,outbound_color:12,inbound_color:13,root_color:14,link_function:15,inbound_link_function:16,root_link_function:17,outbound_link_function:18,show_neighbors_modal:0,neighbor_filter_labels:1,parent_node:2,data:3},null,[-1,-1])}}function Dg(n){let r,e="attack the node",t,i,s,l,a,u="defend the node",o,f,h,c,d,_="weaknesses",w,k,C,U,I,A="explode parts",b,y,v="explode control",R,T,B,D,L,F;function N($){n[10]($)}let H={parent_node:n[0],data:n[1]};n[6]!==void 0&&(H.show_attack_modal=n[6]),i=new J2({props:H}),kt.push(()=>tr(i,"show_attack_modal",N));function O($){n[12]($)}let ne={parent_node:n[0],data:n[1]};n[5]!==void 0&&(ne.show_defend_modal=n[5]),f=new sg({props:ne}),kt.push(()=>tr(f,"show_defend_modal",O));function Q($){n[14]($)}let z={parent_node:n[0],empty_message:"has no related weaknesses in this release.",inbound_color:"#f9d999",inbound_link_function:n[8],data:n[1]};n[4]!==void 0&&(z.show_weakness_modal=n[4]),k=new _g({props:z}),kt.push(()=>tr(k,"show_weakness_modal",Q));function Y($){n[17]($)}let x={neighbor_filter_labels:n[2],parent_node:n[0],empty_message:"has no related parts in this release.",inbound_color:"#f9d999",inbound_link_function:n[8],data:n[1]};return n[3]!==void 0&&(x.show_neighbors_modal=n[3]),T=new kg({props:x}),kt.push(()=>tr(T,"show_neighbors_modal",Y)),{c(){r=G("button"),r.textContent=e,t=ee(),ve(i.$$.fragment),l=ee(),a=G("button"),a.textContent=u,o=ee(),ve(f.$$.fragment),c=ee(),d=G("button"),d.textContent=_,w=ee(),ve(k.$$.fragment),U=ee(),I=G("button"),I.textContent=A,b=ee(),y=G("button"),y.textContent=v,R=ee(),ve(T.$$.fragment),this.h()},l($){r=W($,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(r)!=="svelte-1dkmztx"&&(r.textContent=e),t=te($),be(i.$$.fragment,$),l=te($),a=W($,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(a)!=="svelte-22hxkb"&&(a.textContent=u),o=te($),be(f.$$.fragment,$),c=te($),d=W($,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(d)!=="svelte-12lar74"&&(d.textContent=_),w=te($),be(k.$$.fragment,$),U=te($),I=W($,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(I)!=="svelte-1hluius"&&(I.textContent=A),b=te($),y=W($,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(y)!=="svelte-183zqvn"&&(y.textContent=v),R=te($),be(T.$$.fragment,$),this.h()},h(){J(r,"class","svelte-5he3i1"),J(a,"class","svelte-5he3i1"),J(d,"class","svelte-5he3i1"),J(I,"class","svelte-5he3i1"),J(y,"class","svelte-5he3i1")},m($,V){E($,r,V),E($,t,V),we(i,$,V),E($,l,V),E($,a,V),E($,o,V),we(f,$,V),E($,c,V),E($,d,V),E($,w,V),we(k,$,V),E($,U,V),E($,I,V),E($,b,V),E($,y,V),E($,R,V),we(T,$,V),D=!0,L||(F=[fe(r,"click",n[9]),fe(a,"click",n[11]),fe(d,"click",n[13]),fe(I,"click",n[15]),fe(y,"click",n[16])],L=!0)},p($,[V]){const ie={};V&1&&(ie.parent_node=$[0]),V&2&&(ie.data=$[1]),!s&&V&64&&(s=!0,ie.show_attack_modal=$[6],er(()=>s=!1)),i.$set(ie);const Re={};V&1&&(Re.parent_node=$[0]),V&2&&(Re.data=$[1]),!h&&V&32&&(h=!0,Re.show_defend_modal=$[5],er(()=>h=!1)),f.$set(Re);const Le={};V&1&&(Le.parent_node=$[0]),V&2&&(Le.data=$[1]),!C&&V&16&&(C=!0,Le.show_weakness_modal=$[4],er(()=>C=!1)),k.$set(Le);const he={};V&4&&(he.neighbor_filter_labels=$[2]),V&1&&(he.parent_node=$[0]),V&2&&(he.data=$[1]),!B&&V&8&&(B=!0,he.show_neighbors_modal=$[3],er(()=>B=!1)),T.$set(he)},i($){D||(re(i.$$.fragment,$),re(f.$$.fragment,$),re(k.$$.fragment,$),re(T.$$.fragment,$),D=!0)},o($){le(i.$$.fragment,$),le(f.$$.fragment,$),le(k.$$.fragment,$),le(T.$$.fragment,$),D=!1},d($){$&&(m(r),m(t),m(l),m(a),m(o),m(c),m(d),m(w),m(U),m(I),m(b),m(y),m(R)),ye(i,$),ye(f,$),ye(k,$),ye(T,$),L=!1,xe(F)}}}function Eg(n,r,e){let t,i,s,l;var a=this&&this.__awaiter||function(y,v,R,T){function B(D){return D instanceof R?D:new R(function(L){L(D)})}return new(R||(R=Promise))(function(D,L){function F(O){try{H(T.next(O))}catch(ne){L(ne)}}function N(O){try{H(T.throw(O))}catch(ne){L(ne)}}function H(O){O.done?D(O.value):B(O.value).then(F,N)}H((T=T.apply(y,v||[])).next())})};let{node:u}=r,o,f=[];function h(y){return a(this,void 0,void 0,function*(){if(y.data.d3f_class){const v=y.data.d3f_class;return yield(yield fetch(`/api/dao/artifact/${v}.json`)).json()}else alert("Please specify a D3FEND Class for this node to enable inferential mapping"),e(6,t=!1),e(5,i=!1),e(4,s=!1),e(3,l=!1)})}function c(y){return lp(y["d3f:cwe-id"][0])}const d=async()=>{e(1,o=null),e(6,t=!0),e(1,o=await h(u))};function _(y){t=y,e(6,t)}const w=async()=>{e(1,o=null),e(5,i=!0),e(1,o=await h(u))};function k(y){i=y,e(5,i)}const C=async()=>{e(1,o=null),e(4,s=!0),e(1,o=await h(u))};function U(y){s=y,e(4,s)}const I=async()=>{e(1,o=null),e(3,l=!0),e(2,f=["d3f:contains","d3f:may-contains"]),e(1,o=await h(u))},A=async()=>{e(1,o=null),e(3,l=!0),e(2,f=["d3f:runs","d3f:loads","d3f:manages"]),e(1,o=await h(u))};function b(y){l=y,e(3,l)}return n.$$set=y=>{"node"in y&&e(0,u=y.node)},e(6,t=!1),e(5,i=!1),e(4,s=!1),e(3,l=!1),[u,o,f,l,s,i,t,h,c,d,_,w,k,C,U,I,A,b]}class Tg extends it{constructor(r){super(),lt(this,r,Eg,Dg,Ve,{node:0})}}function Do(n,r,e){const t=n.slice();return t[18]=r[e],t[20]=e,t}const Cg=n=>({}),Eo=n=>({});function Ng(n){let r;return{c(){r=M("No related defensive techniques in this release.")},l(e){r=j(e,"No related defensive techniques in this release.")},m(e,t){E(e,r,t)},p:Ne,i:Ne,o:Ne,d(e){e&&m(r)}}}function Ag(n){let r,e;return r=new tn({props:{$$slots:{default:[Fg]},$$scope:{ctx:n}}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i&8214&&(s.$$scope={dirty:i,ctx:t}),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Sg(n){let r,e="Loading...";return{c(){r=G("div"),r.textContent=e},l(t){r=W(t,"DIV",{"data-svelte-h":!0}),qe(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,i){E(t,r,i)},p:Ne,i:Ne,o:Ne,d(t){t&&m(r)}}}function Ig(n){let r,e=ke(n[18].def_artifact.value)+"",t,i;return{c(){r=M("class "),t=M(e),i=M(" ArtifactNode;")},l(s){r=j(s,"class "),t=j(s,e),i=j(s," ArtifactNode;")},m(s,l){E(s,r,l),E(s,t,l),E(s,i,l)},p(s,l){l&4&&e!==(e=ke(s[18].def_artifact.value)+"")&&ce(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function Rg(n){let r,e=ke(n[18].def_artifact.value)+"",t,i;return{c(){r=M("class "),t=M(e),i=M(" SelectedArtifactNode;")},l(s){r=j(s,"class "),t=j(s,e),i=j(s," SelectedArtifactNode;")},m(s,l){E(s,r,l),E(s,t,l),E(s,i,l)},p(s,l){l&4&&e!==(e=ke(s[18].def_artifact.value)+"")&&ce(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function To(n){let r=n[1].data.d3f_class+"",e,t,i=n[2].description["@graph"][0]["rdfs:label"]+"",s,l,a="-->",u,o,f=n[18].def_artifact_rel_label.value+"",h,c,d=ke(n[18].def_artifact.value)+"",_,w,k=n[18].def_artifact_label.value+"",C,U,I=n[1].data.d3f_class+"",A,b,y,v,R=ke(n[18].def_artifact.value)+"",T,B,D=ke(n[18].def_artifact.value)+"",L,F,N=`
`,H;function O(z,Y){return Y&20&&(y=null),y==null&&(y=!!z[4].includes(ke(z[18].def_artifact.value))),y?Rg:Ig}let ne=O(n,-1),Q=ne(n);return{c(){e=M(r),t=M('["'),s=M(i),l=M('"] '),u=M(a),o=M(' |"'),h=M(f),c=M('" | '),_=M(d),w=M('["'),C=M(k),U=M(`"];
          class `),A=M(I),b=M(` DefensiveTechniqueNode;
          `),Q.c(),v=M(`
          click `),T=M(R),B=M(` href "javascript:def_to_art_callback('`),L=M(D),F=M(`')";`),H=M(N)},l(z){e=j(z,r),t=j(z,'["'),s=j(z,i),l=j(z,'"] '),u=j(z,a),o=j(z,' |"'),h=j(z,f),c=j(z,'" | '),_=j(z,d),w=j(z,'["'),C=j(z,k),U=j(z,`"];
          class `),A=j(z,I),b=j(z,` DefensiveTechniqueNode;
          `),Q.l(z),v=j(z,`
          click `),T=j(z,R),B=j(z,` href "javascript:def_to_art_callback('`),L=j(z,D),F=j(z,`')";`),H=j(z,N)},m(z,Y){E(z,e,Y),E(z,t,Y),E(z,s,Y),E(z,l,Y),E(z,u,Y),E(z,o,Y),E(z,h,Y),E(z,c,Y),E(z,_,Y),E(z,w,Y),E(z,C,Y),E(z,U,Y),E(z,A,Y),E(z,b,Y),Q.m(z,Y),E(z,v,Y),E(z,T,Y),E(z,B,Y),E(z,L,Y),E(z,F,Y),E(z,H,Y)},p(z,Y){Y&2&&r!==(r=z[1].data.d3f_class+"")&&ce(e,r),Y&4&&i!==(i=z[2].description["@graph"][0]["rdfs:label"]+"")&&ce(s,i),Y&4&&f!==(f=z[18].def_artifact_rel_label.value+"")&&ce(h,f),Y&4&&d!==(d=ke(z[18].def_artifact.value)+"")&&ce(_,d),Y&4&&k!==(k=z[18].def_artifact_label.value+"")&&ce(C,k),Y&2&&I!==(I=z[1].data.d3f_class+"")&&ce(A,I),ne===(ne=O(z,Y))&&Q?Q.p(z,Y):(Q.d(1),Q=ne(z),Q&&(Q.c(),Q.m(v.parentNode,v))),Y&4&&R!==(R=ke(z[18].def_artifact.value)+"")&&ce(T,R),Y&4&&D!==(D=ke(z[18].def_artifact.value)+"")&&ce(L,D)},d(z){z&&(m(e),m(t),m(s),m(l),m(u),m(o),m(h),m(c),m(_),m(w),m(C),m(U),m(A),m(b),m(v),m(T),m(B),m(L),m(F),m(H)),Q.d(z)}}}function Fg(n){let r,e,t=Pe(n[2].digital_artifacts.results.bindings),i=[];for(let s=0;s<t.length;s+=1)i[s]=To(Do(n,t,s));return{c(){r=M(`graph LR
        `);for(let s=0;s<i.length;s+=1)i[s].c();e=pe()},l(s){r=j(s,`graph LR
        `);for(let l=0;l<i.length;l+=1)i[l].l(s);e=pe()},m(s,l){E(s,r,l);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(s,l);E(s,e,l)},p(s,l){if(l&22){t=Pe(s[2].digital_artifacts.results.bindings);let a;for(a=0;a<t.length;a+=1){const u=Do(s,t,a);i[a]?i[a].p(u,l):(i[a]=To(u),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}},d(s){s&&(m(r),m(e)),ot(i,s)}}}function Og(n){let r,e,t,i,s,l,a,u,o,f,h,c,d,_=n[4].length+"",w,k,C,U,I;const A=n[8].header,b=Dt(A,n,n[13],Eo),y=n[8].default,v=Dt(y,n,n[13],null),R=[Sg,Ag,Ng],T=[];function B(D,L){return D[2]?D[2].digital_artifacts.results.bindings.length>0?1:2:0}return a=B(n),u=T[a]=R[a](n),{c(){r=G("dialog"),e=G("div"),b&&b.c(),t=M(`
    Select Related Artifacts To Insert
    `),v&&v.c(),i=ee(),s=G("hr"),l=ee(),u.c(),o=ee(),f=G("hr"),h=ee(),c=G("button"),d=M("Insert ("),w=M(_),k=M(")"),this.h()},l(D){r=W(D,"DIALOG",{class:!0});var L=_e(r);e=W(L,"DIV",{class:!0});var F=_e(e);b&&b.l(F),t=j(F,`
    Select Related Artifacts To Insert
    `),v&&v.l(F),i=te(F),s=W(F,"HR",{}),l=te(F),u.l(F),o=te(F),f=W(F,"HR",{}),h=te(F),c=W(F,"BUTTON",{class:!0});var N=_e(c);d=j(N,"Insert ("),w=j(N,_),k=j(N,")"),N.forEach(m),F.forEach(m),L.forEach(m),this.h()},h(){c.autofocus=!0,J(c,"class","svelte-x0618k"),J(e,"class","svelte-x0618k"),J(r,"class","svelte-x0618k")},m(D,L){E(D,r,L),P(r,e),b&&b.m(e,null),P(e,t),v&&v.m(e,null),P(e,i),P(e,s),P(e,l),T[a].m(e,null),P(e,o),P(e,f),P(e,h),P(e,c),P(c,d),P(c,w),P(c,k),n[10](r),C=!0,c.focus(),U||(I=[fe(c,"click",n[7]),fe(e,"click",At(n[9])),fe(r,"close",n[11]),fe(r,"click",en(n[12]))],U=!0)},p(D,[L]){b&&b.p&&(!C||L&8192)&&Et(b,A,D,D[13],C?Ct(A,D[13],L,Cg):Tt(D[13]),Eo),v&&v.p&&(!C||L&8192)&&Et(v,y,D,D[13],C?Ct(y,D[13],L,null):Tt(D[13]),null);let F=a;a=B(D),a===F?T[a].p(D,L):(Xe(),le(T[F],1,1,()=>{T[F]=null}),Ge(),u=T[a],u?u.p(D,L):(u=T[a]=R[a](D),u.c()),re(u,1),u.m(e,o)),(!C||L&16)&&_!==(_=D[4].length+"")&&ce(w,_)},i(D){C||(re(b,D),re(v,D),re(u),C=!0)},o(D){le(b,D),le(v,D),le(u),C=!1},d(D){D&&m(r),b&&b.d(D),v&&v.d(D),T[a].d(),n[10](null),U=!1,xe(I)}}}function Bg(n,r,e){let t,i,s,{$$slots:l={},$$scope:a}=r,{show_artifacts_modal:u}=r,{parent_node:o}=r,{data:f}=r,h;const c=qr();Me(n,c,A=>e(16,s=A));const d=Ur();Me(n,d,A=>e(15,i=A));function _(A){t.includes(A)?e(4,t=t.filter(b=>b!==A)):t.push(A),e(4,t)}window.def_to_art_callback=function(A){_(A)};function w(){let A=0,b=200,y=100;for(const v of t){let R=f.digital_artifacts.results.bindings.find(T=>ke(T.def_artifact.value)==v);R&&(on(c,d,o,"artifactSelectorNode",R.def_artifact_label.value,"d3f:"+ke(R.def_artifact.value),o.data.sequence,o.position.x+A*b,o.position.y+y,182,82,R.def_artifact_rel_label.value,!0),A+=1)}c.set(s),d.set(i),h&&h.close(),e(4,t=[])}function k(A){br.call(this,n,A)}function C(A){kt[A?"unshift":"push"](()=>{h=A,e(3,h)})}const U=()=>e(0,u=!1),I=()=>{h.close(),e(4,t=[])};return n.$$set=A=>{"show_artifacts_modal"in A&&e(0,u=A.show_artifacts_modal),"parent_node"in A&&e(1,o=A.parent_node),"data"in A&&e(2,f=A.data),"$$scope"in A&&e(13,a=A.$$scope)},n.$$.update=()=>{n.$$.dirty&9&&u&&h&&h.showModal()},e(4,t=[]),[u,o,f,h,t,c,d,w,l,k,C,U,I,a]}class Lg extends it{constructor(r){super(),lt(this,r,Bg,Og,Ve,{show_artifacts_modal:0,parent_node:1,data:2})}}function Co(n,r,e){const t=n.slice();return t[18]=r[e],t}const Pg=n=>({}),No=n=>({});function qg(n){let r;return{c(){r=M("No related offensive techniques in this release.")},l(e){r=j(e,"No related offensive techniques in this release.")},m(e,t){E(e,r,t)},p:Ne,i:Ne,o:Ne,d(e){e&&m(r)}}}function Ug(n){let r,e;return r=new tn({props:{$$slots:{default:[Hg]},$$scope:{ctx:n}}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i&16394&&(s.$$scope={dirty:i,ctx:t}),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Mg(n){let r,e="Loading...";return{c(){r=G("div"),r.textContent=e},l(t){r=W(t,"DIV",{"data-svelte-h":!0}),qe(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,i){E(t,r,i)},p:Ne,i:Ne,o:Ne,d(t){t&&m(r)}}}function Ao(n){let r=ke(n[18].def_tech.value).replace(/ |\./g,"")+"",e,t,i=n[18].def_tech_label.value+"",s,l,a="-->",u,o,f="May "+n[18].def_tactic_label.value.replace(/ /g,""),h,c,d=n[18].off_tech_id.value.replace(/ |\./g,"")+"",_,w,k=n[18].off_tech_label.value+"",C,U,I,A,b=ke(n[18].def_tech.value)+"",y,v,R=n[18].off_tech_id.value.replace(/ |\./g,"")+"",T,B,D=n[18].off_tech_id.value.replace(/ |\./g,"")+"",L,F,N=ke(n[18].def_tech.value)+"",H,O,ne=ke(n[18].def_tech.value)+"",Q,z;function Y(V,ie){return ie&10&&(I=null),I==null&&(I=!!V[3].includes(V[18].off_tech_id.value.replace(/ |\./g,""))),I?Vg:jg}let x=Y(n,-1),$=x(n);return{c(){e=M(r),t=M('["'),s=M(i),l=M('"] '),u=M(a),o=M(" | "),h=M(f),c=M("| "),_=M(d),w=M('["'),C=M(k),U=M(`"];
            `),$.c(),A=M(`
            class `),y=M(b),v=M(" CountermeasureNode; click "),T=M(R),B=M(` href "javascript:def_to_off_callback('`),L=M(D),F=M(`')"; click `),H=M(N),O=M(' href "/technique/d3f:'),Q=M(ne),z=M('";')},l(V){e=j(V,r),t=j(V,'["'),s=j(V,i),l=j(V,'"] '),u=j(V,a),o=j(V," | "),h=j(V,f),c=j(V,"| "),_=j(V,d),w=j(V,'["'),C=j(V,k),U=j(V,`"];
            `),$.l(V),A=j(V,`
            class `),y=j(V,b),v=j(V," CountermeasureNode; click "),T=j(V,R),B=j(V,` href "javascript:def_to_off_callback('`),L=j(V,D),F=j(V,`')"; click `),H=j(V,N),O=j(V,' href "/technique/d3f:'),Q=j(V,ne),z=j(V,'";')},m(V,ie){E(V,e,ie),E(V,t,ie),E(V,s,ie),E(V,l,ie),E(V,u,ie),E(V,o,ie),E(V,h,ie),E(V,c,ie),E(V,_,ie),E(V,w,ie),E(V,C,ie),E(V,U,ie),$.m(V,ie),E(V,A,ie),E(V,y,ie),E(V,v,ie),E(V,T,ie),E(V,B,ie),E(V,L,ie),E(V,F,ie),E(V,H,ie),E(V,O,ie),E(V,Q,ie),E(V,z,ie)},p(V,ie){ie&2&&r!==(r=ke(V[18].def_tech.value).replace(/ |\./g,"")+"")&&ce(e,r),ie&2&&i!==(i=V[18].def_tech_label.value+"")&&ce(s,i),ie&2&&f!==(f="May "+V[18].def_tactic_label.value.replace(/ /g,""))&&ce(h,f),ie&2&&d!==(d=V[18].off_tech_id.value.replace(/ |\./g,"")+"")&&ce(_,d),ie&2&&k!==(k=V[18].off_tech_label.value+"")&&ce(C,k),x===(x=Y(V,ie))&&$?$.p(V,ie):($.d(1),$=x(V),$&&($.c(),$.m(A.parentNode,A))),ie&2&&b!==(b=ke(V[18].def_tech.value)+"")&&ce(y,b),ie&2&&R!==(R=V[18].off_tech_id.value.replace(/ |\./g,"")+"")&&ce(T,R),ie&2&&D!==(D=V[18].off_tech_id.value.replace(/ |\./g,"")+"")&&ce(L,D),ie&2&&N!==(N=ke(V[18].def_tech.value)+"")&&ce(H,N),ie&2&&ne!==(ne=ke(V[18].def_tech.value)+"")&&ce(Q,ne)},d(V){V&&(m(e),m(t),m(s),m(l),m(u),m(o),m(h),m(c),m(_),m(w),m(C),m(U),m(A),m(y),m(v),m(T),m(B),m(L),m(F),m(H),m(O),m(Q),m(z)),$.d(V)}}}function jg(n){let r,e=n[18].off_tech_id.value.replace(/ |\./g,"")+"",t,i;return{c(){r=M("class "),t=M(e),i=M(" OffensiveTechniqueNode;")},l(s){r=j(s,"class "),t=j(s,e),i=j(s," OffensiveTechniqueNode;")},m(s,l){E(s,r,l),E(s,t,l),E(s,i,l)},p(s,l){l&2&&e!==(e=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&ce(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function Vg(n){let r,e=n[18].off_tech_id.value.replace(/ |\./g,"")+"",t,i;return{c(){r=M("class "),t=M(e),i=M(" SelectedOffensiveTechniqueNode;")},l(s){r=j(s,"class "),t=j(s,e),i=j(s," SelectedOffensiveTechniqueNode;")},m(s,l){E(s,r,l),E(s,t,l),E(s,i,l)},p(s,l){l&2&&e!==(e=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&ce(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function So(n){let r=n[6].edge_is_unique(n[18].def_tech_label.value,n[18].off_artifact_rel_label.value,n[18].off_artifact_label.value),e,t=r&&Ao(n);return{c(){t&&t.c(),e=pe()},l(i){t&&t.l(i),e=pe()},m(i,s){t&&t.m(i,s),E(i,e,s)},p(i,s){s&2&&(r=i[6].edge_is_unique(i[18].def_tech_label.value,i[18].off_artifact_rel_label.value,i[18].off_artifact_label.value)),r?t?t.p(i,s):(t=Ao(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&m(e),t&&t.d(i)}}}function Hg(n){let r,e,t=Pe(n[1].def_to_off.results.bindings),i=[];for(let s=0;s<t.length;s+=1)i[s]=So(Co(n,t,s));return{c(){r=M(`graph LR;
        `);for(let s=0;s<i.length;s+=1)i[s].c();e=pe()},l(s){r=j(s,`graph LR;
        `);for(let l=0;l<i.length;l+=1)i[l].l(s);e=pe()},m(s,l){E(s,r,l);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(s,l);E(s,e,l)},p(s,l){if(l&74){t=Pe(s[1].def_to_off.results.bindings);let a;for(a=0;a<t.length;a+=1){const u=Co(s,t,a);i[a]?i[a].p(u,l):(i[a]=So(u),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}},d(s){s&&(m(r),m(e)),ot(i,s)}}}function zg(n){let r,e,t,i,s,l,a,u,o,f,h,c,d,_=n[3].length+"",w,k,C,U,I;const A=n[9].header,b=Dt(A,n,n[14],No),y=n[9].default,v=Dt(y,n,n[14],null),R=[Mg,Ug,qg],T=[];function B(D,L){return D[1]?D[1].def_to_off.results.bindings.length>0?1:2:0}return a=B(n),u=T[a]=R[a](n),{c(){r=G("dialog"),e=G("div"),b&&b.c(),t=M(`
    Select Attack Techniques
    `),v&&v.c(),i=ee(),s=G("hr"),l=ee(),u.c(),o=ee(),f=G("hr"),h=ee(),c=G("button"),d=M("Insert ("),w=M(_),k=M(")"),this.h()},l(D){r=W(D,"DIALOG",{class:!0});var L=_e(r);e=W(L,"DIV",{class:!0});var F=_e(e);b&&b.l(F),t=j(F,`
    Select Attack Techniques
    `),v&&v.l(F),i=te(F),s=W(F,"HR",{}),l=te(F),u.l(F),o=te(F),f=W(F,"HR",{}),h=te(F),c=W(F,"BUTTON",{class:!0});var N=_e(c);d=j(N,"Insert ("),w=j(N,_),k=j(N,")"),N.forEach(m),F.forEach(m),L.forEach(m),this.h()},h(){c.autofocus=!0,J(c,"class","svelte-1ai9hff"),J(e,"class","svelte-1ai9hff"),J(r,"class","svelte-1ai9hff")},m(D,L){E(D,r,L),P(r,e),b&&b.m(e,null),P(e,t),v&&v.m(e,null),P(e,i),P(e,s),P(e,l),T[a].m(e,null),P(e,o),P(e,f),P(e,h),P(e,c),P(c,d),P(c,w),P(c,k),n[11](r),C=!0,c.focus(),U||(I=[fe(c,"click",n[7]),fe(e,"click",At(n[10])),fe(r,"close",n[12]),fe(r,"click",en(n[13]))],U=!0)},p(D,[L]){b&&b.p&&(!C||L&16384)&&Et(b,A,D,D[14],C?Ct(A,D[14],L,Pg):Tt(D[14]),No),v&&v.p&&(!C||L&16384)&&Et(v,y,D,D[14],C?Ct(y,D[14],L,null):Tt(D[14]),null);let F=a;a=B(D),a===F?T[a].p(D,L):(Xe(),le(T[F],1,1,()=>{T[F]=null}),Ge(),u=T[a],u?u.p(D,L):(u=T[a]=R[a](D),u.c()),re(u,1),u.m(e,o)),(!C||L&8)&&_!==(_=D[3].length+"")&&ce(w,_)},i(D){C||(re(b,D),re(v,D),re(u),C=!0)},o(D){le(b,D),le(v,D),le(u),C=!1},d(D){D&&m(r),b&&b.d(D),v&&v.d(D),T[a].d(),n[11](null),U=!1,xe(I)}}}function Xg(n,r,e){let t,i,s,{$$slots:l={},$$scope:a}=r,{show_attack_modal:u}=r,{parent_node:o}=r,{data:f}=r,h;const c=qr();Me(n,c,b=>e(16,s=b));const d=Ur();Me(n,d,b=>e(15,i=b));let _=new qn;function w(b){t.includes(b)?e(3,t=t.filter(y=>y!==b)):t.push(b),e(3,t)}window.def_to_off_callback=function(b){w(b)};function k(){let b=0,y=200,v=100;for(const R of t){let T=f.def_to_off.results.bindings.find(B=>B.off_tech_id.value.replace(/ |\./g,"")==R);T&&(on(c,d,o,"attackSelectorNode",T.off_tech_label.value,"d3f:"+T.off_tech_id.value,o.data.sequence,o.position.x+b*y,o.position.y+v,182,63,"May "+T.def_tactic_label.value,!0),b+=1)}c.set(s),d.set(i),h&&h.close(),e(3,t=[])}function C(b){br.call(this,n,b)}function U(b){kt[b?"unshift":"push"](()=>{h=b,e(2,h)})}const I=()=>e(0,u=!1),A=()=>{h.close(),e(3,t=[])};return n.$$set=b=>{"show_attack_modal"in b&&e(0,u=b.show_attack_modal),"parent_node"in b&&e(8,o=b.parent_node),"data"in b&&e(1,f=b.data),"$$scope"in b&&e(14,a=b.$$scope)},n.$$.update=()=>{n.$$.dirty&5&&u&&h&&(h.showModal(),_.reset())},e(3,t=[]),[u,f,h,t,c,d,_,k,o,l,C,U,I,A,a]}class Gg extends it{constructor(r){super(),lt(this,r,Xg,zg,Ve,{show_attack_modal:0,parent_node:8,data:1})}}function Wg(n){let r,e="artifacts",t,i,s,l,a,u="offensive techniques",o,f,h,c,d,_="weaknesses (coming soon)",w,k,C;function U(y){n[6](y)}let I={parent_node:n[0],data:n[1]};n[2]!==void 0&&(I.show_artifacts_modal=n[2]),i=new Lg({props:I}),kt.push(()=>tr(i,"show_artifacts_modal",U));function A(y){n[8](y)}let b={parent_node:n[0],data:n[1]};return n[3]!==void 0&&(b.show_attack_modal=n[3]),f=new Gg({props:b}),kt.push(()=>tr(f,"show_attack_modal",A)),{c(){r=G("button"),r.textContent=e,t=ee(),ve(i.$$.fragment),l=ee(),a=G("button"),a.textContent=u,o=ee(),ve(f.$$.fragment),c=ee(),d=G("button"),d.textContent=_,this.h()},l(y){r=W(y,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(r)!=="svelte-isgkpy"&&(r.textContent=e),t=te(y),be(i.$$.fragment,y),l=te(y),a=W(y,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(a)!=="svelte-17h5zge"&&(a.textContent=u),o=te(y),be(f.$$.fragment,y),c=te(y),d=W(y,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(d)!=="svelte-ivhbdc"&&(d.textContent=_),this.h()},h(){J(r,"class","svelte-1x5dcdh"),J(a,"class","svelte-1x5dcdh"),d.disabled=!0,J(d,"class","svelte-1x5dcdh")},m(y,v){E(y,r,v),E(y,t,v),we(i,y,v),E(y,l,v),E(y,a,v),E(y,o,v),we(f,y,v),E(y,c,v),E(y,d,v),w=!0,k||(C=[fe(r,"click",n[5]),fe(a,"click",n[7])],k=!0)},p(y,[v]){const R={};v&1&&(R.parent_node=y[0]),v&2&&(R.data=y[1]),!s&&v&4&&(s=!0,R.show_artifacts_modal=y[2],er(()=>s=!1)),i.$set(R);const T={};v&1&&(T.parent_node=y[0]),v&2&&(T.data=y[1]),!h&&v&8&&(h=!0,T.show_attack_modal=y[3],er(()=>h=!1)),f.$set(T)},i(y){w||(re(i.$$.fragment,y),re(f.$$.fragment,y),w=!0)},o(y){le(i.$$.fragment,y),le(f.$$.fragment,y),w=!1},d(y){y&&(m(r),m(t),m(l),m(a),m(o),m(c),m(d)),ye(i,y),ye(f,y),k=!1,xe(C)}}}function Qg(n,r,e){let t,i;var s=this&&this.__awaiter||function(d,_,w,k){function C(U){return U instanceof w?U:new w(function(I){I(U)})}return new(w||(w=Promise))(function(U,I){function A(v){try{y(k.next(v))}catch(R){I(R)}}function b(v){try{y(k.throw(v))}catch(R){I(R)}}function y(v){v.done?U(v.value):C(v.value).then(A,b)}y((k=k.apply(d,_||[])).next())})};let{node:l}=r,a;function u(d){return s(this,void 0,void 0,function*(){if(d.data.d3f_class){const _=d.data.d3f_class;return yield(yield fetch(`/api/technique/${_}.json`)).json()}else alert("Please specify a D3FEND Class for this node to enable inferential mapping"),e(2,t=!1)})}const o=async()=>{e(1,a=null),e(2,t=!0),e(1,a=await u(l))};function f(d){t=d,e(2,t)}const h=async()=>{e(1,a=null),e(3,i=!0),e(1,a=await u(l))};function c(d){i=d,e(3,i)}return n.$$set=d=>{"node"in d&&e(0,l=d.node)},e(2,t=!1),e(3,i=!1),[l,a,t,i,u,o,f,h,c]}class Yg extends it{constructor(r){super(),lt(this,r,Qg,Wg,Ve,{node:0})}}function Io(n,r,e){const t=n.slice();return t[18]=r[e],t}const xg=n=>({}),Ro=n=>({});function Jg(n){let r;return{c(){r=M("No related artifacts in this release.")},l(e){r=j(e,"No related artifacts in this release.")},m(e,t){E(e,r,t)},p:Ne,i:Ne,o:Ne,d(e){e&&m(r)}}}function Zg(n){let r,e;return r=new tn({props:{$$slots:{default:[tm]},$$scope:{ctx:n}}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i&16394&&(s.$$scope={dirty:i,ctx:t}),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Kg(n){let r,e="Loading...";return{c(){r=G("div"),r.textContent=e},l(t){r=W(t,"DIV",{"data-svelte-h":!0}),qe(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,i){E(t,r,i)},p:Ne,i:Ne,o:Ne,d(t){t&&m(r)}}}function Fo(n){let r=n[18].off_tech_id.value.replace(/ |\./g,"")+"",e,t,i=n[18].off_tech_label.value+"",s,l,a="-->",u,o,f=n[18].off_artifact_rel_label.value.replace(/ /g,"")+"",h,c,d=ke(n[18].off_artifact.value)+"",_,w,k=n[18].off_artifact_label.value+"",C,U,I=n[18].off_tech_id.value.replace(/ |\./g,"")+"",A,b,y,v,R=ke(n[18].off_artifact.value)+"",T,B,D=ke(n[18].off_artifact.value)+"",L,F,N=n[18].off_tech_id.value.replace(/ |\./g,"")+"",H,O,ne=tl(n[18].off_tech_id.value)+"",Q,z,Y=ke(n[18].off_artifact.value)+"",x,$,V=ke(n[18].off_artifact.value)+"",ie,Re;function Le(oe,Ee){return Ee&10&&(y=null),y==null&&(y=!!oe[3].includes(ke(oe[18].off_artifact.value))),y?em:$g}let he=Le(n,-1),me=he(n);return{c(){e=M(r),t=M('["'),s=M(i),l=M('"] '),u=M(a),o=M(" |"),h=M(f),c=M("| "),_=M(d),w=M('["'),C=M(k),U=M('"]; class '),A=M(I),b=M(` OffensiveTechniqueNode;
            `),me.c(),v=M(" ; click "),T=M(R),B=M(' href "/dao/artifact/d3f:'),L=M(D),F=M('"; click '),H=M(N),O=M(' href "'),Q=M(ne),z=M('"; click '),x=M(Y),$=M(` href "javascript:off_to_art_callback('`),ie=M(V),Re=M(`')";`)},l(oe){e=j(oe,r),t=j(oe,'["'),s=j(oe,i),l=j(oe,'"] '),u=j(oe,a),o=j(oe," |"),h=j(oe,f),c=j(oe,"| "),_=j(oe,d),w=j(oe,'["'),C=j(oe,k),U=j(oe,'"]; class '),A=j(oe,I),b=j(oe,` OffensiveTechniqueNode;
            `),me.l(oe),v=j(oe," ; click "),T=j(oe,R),B=j(oe,' href "/dao/artifact/d3f:'),L=j(oe,D),F=j(oe,'"; click '),H=j(oe,N),O=j(oe,' href "'),Q=j(oe,ne),z=j(oe,'"; click '),x=j(oe,Y),$=j(oe,` href "javascript:off_to_art_callback('`),ie=j(oe,V),Re=j(oe,`')";`)},m(oe,Ee){E(oe,e,Ee),E(oe,t,Ee),E(oe,s,Ee),E(oe,l,Ee),E(oe,u,Ee),E(oe,o,Ee),E(oe,h,Ee),E(oe,c,Ee),E(oe,_,Ee),E(oe,w,Ee),E(oe,C,Ee),E(oe,U,Ee),E(oe,A,Ee),E(oe,b,Ee),me.m(oe,Ee),E(oe,v,Ee),E(oe,T,Ee),E(oe,B,Ee),E(oe,L,Ee),E(oe,F,Ee),E(oe,H,Ee),E(oe,O,Ee),E(oe,Q,Ee),E(oe,z,Ee),E(oe,x,Ee),E(oe,$,Ee),E(oe,ie,Ee),E(oe,Re,Ee)},p(oe,Ee){Ee&2&&r!==(r=oe[18].off_tech_id.value.replace(/ |\./g,"")+"")&&ce(e,r),Ee&2&&i!==(i=oe[18].off_tech_label.value+"")&&ce(s,i),Ee&2&&f!==(f=oe[18].off_artifact_rel_label.value.replace(/ /g,"")+"")&&ce(h,f),Ee&2&&d!==(d=ke(oe[18].off_artifact.value)+"")&&ce(_,d),Ee&2&&k!==(k=oe[18].off_artifact_label.value+"")&&ce(C,k),Ee&2&&I!==(I=oe[18].off_tech_id.value.replace(/ |\./g,"")+"")&&ce(A,I),he===(he=Le(oe,Ee))&&me?me.p(oe,Ee):(me.d(1),me=he(oe),me&&(me.c(),me.m(v.parentNode,v))),Ee&2&&R!==(R=ke(oe[18].off_artifact.value)+"")&&ce(T,R),Ee&2&&D!==(D=ke(oe[18].off_artifact.value)+"")&&ce(L,D),Ee&2&&N!==(N=oe[18].off_tech_id.value.replace(/ |\./g,"")+"")&&ce(H,N),Ee&2&&ne!==(ne=tl(oe[18].off_tech_id.value)+"")&&ce(Q,ne),Ee&2&&Y!==(Y=ke(oe[18].off_artifact.value)+"")&&ce(x,Y),Ee&2&&V!==(V=ke(oe[18].off_artifact.value)+"")&&ce(ie,V)},d(oe){oe&&(m(e),m(t),m(s),m(l),m(u),m(o),m(h),m(c),m(_),m(w),m(C),m(U),m(A),m(b),m(v),m(T),m(B),m(L),m(F),m(H),m(O),m(Q),m(z),m(x),m($),m(ie),m(Re)),me.d(oe)}}}function $g(n){let r,e=ke(n[18].off_artifact.value)+"",t,i;return{c(){r=M("class "),t=M(e),i=M(" ArtifactNode;")},l(s){r=j(s,"class "),t=j(s,e),i=j(s," ArtifactNode;")},m(s,l){E(s,r,l),E(s,t,l),E(s,i,l)},p(s,l){l&2&&e!==(e=ke(s[18].off_artifact.value)+"")&&ce(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function em(n){let r,e=ke(n[18].off_artifact.value)+"",t,i;return{c(){r=M("class "),t=M(e),i=M(" SelectedArtifactNode;")},l(s){r=j(s,"class "),t=j(s,e),i=j(s," SelectedArtifactNode;")},m(s,l){E(s,r,l),E(s,t,l),E(s,i,l)},p(s,l){l&2&&e!==(e=ke(s[18].off_artifact.value)+"")&&ce(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function Oo(n){let r=n[6].edge_is_unique(n[18].off_tech_label.value,n[18].off_artifact_rel_label.value,n[18].off_artifact_label.value),e,t=r&&Fo(n);return{c(){t&&t.c(),e=pe()},l(i){t&&t.l(i),e=pe()},m(i,s){t&&t.m(i,s),E(i,e,s)},p(i,s){s&2&&(r=i[6].edge_is_unique(i[18].off_tech_label.value,i[18].off_artifact_rel_label.value,i[18].off_artifact_label.value)),r?t?t.p(i,s):(t=Fo(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&m(e),t&&t.d(i)}}}function tm(n){let r,e,t=Pe(n[1].off_to_def.results.bindings),i=[];for(let s=0;s<t.length;s+=1)i[s]=Oo(Io(n,t,s));return{c(){r=M(`graph LR;
        `);for(let s=0;s<i.length;s+=1)i[s].c();e=pe()},l(s){r=j(s,`graph LR;
        `);for(let l=0;l<i.length;l+=1)i[l].l(s);e=pe()},m(s,l){E(s,r,l);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(s,l);E(s,e,l)},p(s,l){if(l&74){t=Pe(s[1].off_to_def.results.bindings);let a;for(a=0;a<t.length;a+=1){const u=Io(s,t,a);i[a]?i[a].p(u,l):(i[a]=Oo(u),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}},d(s){s&&(m(r),m(e)),ot(i,s)}}}function rm(n){let r,e,t,i,s,l,a,u,o,f,h,c,d,_=n[3].length+"",w,k,C,U,I;const A=n[9].header,b=Dt(A,n,n[14],Ro),y=n[9].default,v=Dt(y,n,n[14],null),R=[Kg,Zg,Jg],T=[];function B(D,L){return D[1]?D[1].off_to_def.results.bindings.length>0?1:2:0}return a=B(n),u=T[a]=R[a](n),{c(){r=G("dialog"),e=G("div"),b&&b.c(),t=M(`
    Select Related Artifacts To Insert
    `),v&&v.c(),i=ee(),s=G("hr"),l=ee(),u.c(),o=ee(),f=G("hr"),h=ee(),c=G("button"),d=M("Insert ("),w=M(_),k=M(")"),this.h()},l(D){r=W(D,"DIALOG",{class:!0});var L=_e(r);e=W(L,"DIV",{class:!0});var F=_e(e);b&&b.l(F),t=j(F,`
    Select Related Artifacts To Insert
    `),v&&v.l(F),i=te(F),s=W(F,"HR",{}),l=te(F),u.l(F),o=te(F),f=W(F,"HR",{}),h=te(F),c=W(F,"BUTTON",{class:!0});var N=_e(c);d=j(N,"Insert ("),w=j(N,_),k=j(N,")"),N.forEach(m),F.forEach(m),L.forEach(m),this.h()},h(){c.autofocus=!0,J(c,"class","svelte-x0618k"),J(e,"class","svelte-x0618k"),J(r,"class","svelte-x0618k")},m(D,L){E(D,r,L),P(r,e),b&&b.m(e,null),P(e,t),v&&v.m(e,null),P(e,i),P(e,s),P(e,l),T[a].m(e,null),P(e,o),P(e,f),P(e,h),P(e,c),P(c,d),P(c,w),P(c,k),n[11](r),C=!0,c.focus(),U||(I=[fe(c,"click",n[7]),fe(e,"click",At(n[10])),fe(r,"close",n[12]),fe(r,"click",en(n[13]))],U=!0)},p(D,[L]){b&&b.p&&(!C||L&16384)&&Et(b,A,D,D[14],C?Ct(A,D[14],L,xg):Tt(D[14]),Ro),v&&v.p&&(!C||L&16384)&&Et(v,y,D,D[14],C?Ct(y,D[14],L,null):Tt(D[14]),null);let F=a;a=B(D),a===F?T[a].p(D,L):(Xe(),le(T[F],1,1,()=>{T[F]=null}),Ge(),u=T[a],u?u.p(D,L):(u=T[a]=R[a](D),u.c()),re(u,1),u.m(e,o)),(!C||L&8)&&_!==(_=D[3].length+"")&&ce(w,_)},i(D){C||(re(b,D),re(v,D),re(u),C=!0)},o(D){le(b,D),le(v,D),le(u),C=!1},d(D){D&&m(r),b&&b.d(D),v&&v.d(D),T[a].d(),n[11](null),U=!1,xe(I)}}}function nm(n,r,e){let t,i,s,{$$slots:l={},$$scope:a}=r,{show_artifacts_modal:u}=r,{parent_node:o}=r,{data:f}=r,h;const c=qr();Me(n,c,b=>e(16,s=b));const d=Ur();Me(n,d,b=>e(15,i=b));let _=new qn;function w(b){t.includes(b)?e(3,t=t.filter(y=>y!==b)):t.push(b),e(3,t)}window.off_to_art_callback=function(b){w(b)};function k(){let b=0,y=200,v=100;for(const R of t){let T=f.off_to_def.results.bindings.find(B=>ke(B.off_artifact.value)==R);T&&(on(c,d,o,"artifactSelectorNode",T.off_artifact_label.value,"d3f:"+ke(T.off_artifact.value),o.data.sequence,o.position.x+b*y,o.position.y+v,182,63,T.off_artifact_rel_label.value,!0),b+=1)}c.set(s),d.set(i),h&&h.close(),e(3,t=[])}function C(b){br.call(this,n,b)}function U(b){kt[b?"unshift":"push"](()=>{h=b,e(2,h)})}const I=()=>e(0,u=!1),A=()=>{h.close(),e(3,t=[])};return n.$$set=b=>{"show_artifacts_modal"in b&&e(0,u=b.show_artifacts_modal),"parent_node"in b&&e(8,o=b.parent_node),"data"in b&&e(1,f=b.data),"$$scope"in b&&e(14,a=b.$$scope)},n.$$.update=()=>{n.$$.dirty&5&&u&&h&&(h.showModal(),_.reset())},e(3,t=[]),[u,f,h,t,c,d,_,k,o,l,C,U,I,A,a]}class im extends it{constructor(r){super(),lt(this,r,nm,rm,Ve,{show_artifacts_modal:0,parent_node:8,data:1})}}function Bo(n,r,e){const t=n.slice();return t[23]=r[e],t}const lm=n=>({}),Lo=n=>({});function sm(n){let r;return{c(){r=M("No related artifacts in this release.")},l(e){r=j(e,"No related artifacts in this release.")},m(e,t){E(e,r,t)},p:Ne,i:Ne,o:Ne,d(e){e&&m(r)}}}function am(n){let r,e,t,i,s,l,a,u,o,f;function h(d){n[14](d)}let c={toggles:n[4]};return n[3]!==void 0&&(c.selected=n[3]),e=new Ac({props:c}),kt.push(()=>tr(e,"selected",h)),o=new tn({props:{$$slots:{default:[cm]},$$scope:{ctx:n}}}),{c(){r=G("div"),ve(e.$$.fragment),i=ee(),s=G("br"),l=ee(),a=G("br"),u=ee(),ve(o.$$.fragment),this.h()},l(d){r=W(d,"DIV",{class:!0});var _=_e(r);be(e.$$.fragment,_),_.forEach(m),i=te(d),s=W(d,"BR",{}),l=te(d),a=W(d,"BR",{}),u=te(d),be(o.$$.fragment,d),this.h()},h(){J(r,"class","center shrink")},m(d,_){E(d,r,_),we(e,r,null),E(d,i,_),E(d,s,_),E(d,l,_),E(d,a,_),E(d,u,_),we(o,d,_),f=!0},p(d,_){const w={};_&16&&(w.toggles=d[4]),!t&&_&8&&(t=!0,w.selected=d[3],er(()=>t=!1)),e.$set(w);const k={};_&262186&&(k.$$scope={dirty:_,ctx:d}),o.$set(k)},i(d){f||(re(e.$$.fragment,d),re(o.$$.fragment,d),f=!0)},o(d){le(e.$$.fragment,d),le(o.$$.fragment,d),f=!1},d(d){d&&(m(r),m(i),m(s),m(l),m(a),m(u)),ye(e),ye(o,d)}}}function um(n){let r,e="Loading...";return{c(){r=G("div"),r.textContent=e},l(t){r=W(t,"DIV",{"data-svelte-h":!0}),qe(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,i){E(t,r,i)},p:Ne,i:Ne,o:Ne,d(t){t&&m(r)}}}function Po(n){let r=n[8].edge_is_unique(n[23].def_tech_label.value,n[23].def_artifact_rel_label.value,n[23].off_artifact_label.value),e,t=r&&qo(n);return{c(){t&&t.c(),e=pe()},l(i){t&&t.l(i),e=pe()},m(i,s){t&&t.m(i,s),E(i,e,s)},p(i,s){s&2&&(r=i[8].edge_is_unique(i[23].def_tech_label.value,i[23].def_artifact_rel_label.value,i[23].off_artifact_label.value)),r?t?t.p(i,s):(t=qo(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&m(e),t&&t.d(i)}}}function qo(n){let r=!n[3].includes(n[23].def_tactic_label.value),e,t=r&&Uo(n);return{c(){t&&t.c(),e=pe()},l(i){t&&t.l(i),e=pe()},m(i,s){t&&t.m(i,s),E(i,e,s)},p(i,s){s&10&&(r=!i[3].includes(i[23].def_tactic_label.value)),r?t?t.p(i,s):(t=Uo(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&m(e),t&&t.d(i)}}}function Uo(n){let r=ke(n[23].def_tech.value)+"",e,t,i=n[23].def_tech_label.value+"",s,l,a="-->",u,o,f=n[23].def_artifact_rel_label.value.replace(/ /g,"")+"",h,c,d=ke(n[23].off_artifact.value)+"",_,w,k=n[23].off_artifact_label.value+"",C,U,I=n[8].edge_is_unique(n[23].def_tech.value,n[23].def_tactic_label.value,n[23].off_tech_id.value),A,b,y,v=n[23].off_artifact_label.value.replace(/ /g,"")+"",R,T,B=ke(n[23].def_tech.value)+"",D,L,F=n[23].def_tech_label.value.replace(/ |\./g,"")+"",N,H,O=I&&Mo(n);function ne(Y,x){return x&34&&(b=null),b==null&&(b=!!Y[5].includes(ke(Y[23].def_tech.value))),b?fm:om}let Q=ne(n,-1),z=Q(n);return{c(){e=M(r),t=M('["'),s=M(i),l=M('"] '),u=M(a),o=M(`
                | `),h=M(f),c=M(" | "),_=M(d),w=M('["'),C=M(k),U=M(`"];

                `),O&&O.c(),A=ee(),z.c(),y=M(` 
                class `),R=M(v),T=M(` ArtifactNode;
                click `),D=M(B),L=M(` href "javascript:off_to_def_callback('`),N=M(F),H=M(`')";`)},l(Y){e=j(Y,r),t=j(Y,'["'),s=j(Y,i),l=j(Y,'"] '),u=j(Y,a),o=j(Y,`
                | `),h=j(Y,f),c=j(Y," | "),_=j(Y,d),w=j(Y,'["'),C=j(Y,k),U=j(Y,`"];

                `),O&&O.l(Y),A=te(Y),z.l(Y),y=j(Y,` 
                class `),R=j(Y,v),T=j(Y,` ArtifactNode;
                click `),D=j(Y,B),L=j(Y,` href "javascript:off_to_def_callback('`),N=j(Y,F),H=j(Y,`')";`)},m(Y,x){E(Y,e,x),E(Y,t,x),E(Y,s,x),E(Y,l,x),E(Y,u,x),E(Y,o,x),E(Y,h,x),E(Y,c,x),E(Y,_,x),E(Y,w,x),E(Y,C,x),E(Y,U,x),O&&O.m(Y,x),E(Y,A,x),z.m(Y,x),E(Y,y,x),E(Y,R,x),E(Y,T,x),E(Y,D,x),E(Y,L,x),E(Y,N,x),E(Y,H,x)},p(Y,x){x&2&&r!==(r=ke(Y[23].def_tech.value)+"")&&ce(e,r),x&2&&i!==(i=Y[23].def_tech_label.value+"")&&ce(s,i),x&2&&f!==(f=Y[23].def_artifact_rel_label.value.replace(/ /g,"")+"")&&ce(h,f),x&2&&d!==(d=ke(Y[23].off_artifact.value)+"")&&ce(_,d),x&2&&k!==(k=Y[23].off_artifact_label.value+"")&&ce(C,k),x&2&&(I=Y[8].edge_is_unique(Y[23].def_tech.value,Y[23].def_tactic_label.value,Y[23].off_tech_id.value)),I?O?O.p(Y,x):(O=Mo(Y),O.c(),O.m(A.parentNode,A)):O&&(O.d(1),O=null),Q===(Q=ne(Y,x))&&z?z.p(Y,x):(z.d(1),z=Q(Y),z&&(z.c(),z.m(y.parentNode,y))),x&2&&v!==(v=Y[23].off_artifact_label.value.replace(/ /g,"")+"")&&ce(R,v),x&2&&B!==(B=ke(Y[23].def_tech.value)+"")&&ce(D,B),x&2&&F!==(F=Y[23].def_tech_label.value.replace(/ |\./g,"")+"")&&ce(N,F)},d(Y){Y&&(m(e),m(t),m(s),m(l),m(u),m(o),m(h),m(c),m(_),m(w),m(C),m(U),m(A),m(y),m(R),m(T),m(D),m(L),m(N),m(H)),O&&O.d(Y),z.d(Y)}}}function Mo(n){let r=ke(n[23].def_tech.value)+"",e,t,i=n[23].def_tech_label.value+"",s,l,a="-.->",u,o,f="May "+n[23].def_tactic_label.value,h,c,d=n[23].off_tech_id.value.replace(/ |\./g,"")+"",_,w,k=n[23].off_tech_label.value+"",C,U;return{c(){e=M(r),t=M('["'),s=M(i),l=M('"] '),u=M(a),o=M(`
                  | `),h=M(f),c=M(" | "),_=M(d),w=M('["'),C=M(k),U=M('"] ;')},l(I){e=j(I,r),t=j(I,'["'),s=j(I,i),l=j(I,'"] '),u=j(I,a),o=j(I,`
                  | `),h=j(I,f),c=j(I," | "),_=j(I,d),w=j(I,'["'),C=j(I,k),U=j(I,'"] ;')},m(I,A){E(I,e,A),E(I,t,A),E(I,s,A),E(I,l,A),E(I,u,A),E(I,o,A),E(I,h,A),E(I,c,A),E(I,_,A),E(I,w,A),E(I,C,A),E(I,U,A)},p(I,A){A&2&&r!==(r=ke(I[23].def_tech.value)+"")&&ce(e,r),A&2&&i!==(i=I[23].def_tech_label.value+"")&&ce(s,i),A&2&&f!==(f="May "+I[23].def_tactic_label.value)&&ce(h,f),A&2&&d!==(d=I[23].off_tech_id.value.replace(/ |\./g,"")+"")&&ce(_,d),A&2&&k!==(k=I[23].off_tech_label.value+"")&&ce(C,k)},d(I){I&&(m(e),m(t),m(s),m(l),m(u),m(o),m(h),m(c),m(_),m(w),m(C),m(U))}}}function om(n){let r,e=ke(n[23].def_tech.value)+"",t,i;return{c(){r=M("class "),t=M(e),i=M(" DefensiveTechniqueNode;")},l(s){r=j(s,"class "),t=j(s,e),i=j(s," DefensiveTechniqueNode;")},m(s,l){E(s,r,l),E(s,t,l),E(s,i,l)},p(s,l){l&2&&e!==(e=ke(s[23].def_tech.value)+"")&&ce(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function fm(n){let r,e=ke(n[23].def_tech.value)+"",t,i;return{c(){r=M("class "),t=M(e),i=M(" SelectedDefensiveTechniqueNode;")},l(s){r=j(s,"class "),t=j(s,e),i=j(s," SelectedDefensiveTechniqueNode;")},m(s,l){E(s,r,l),E(s,t,l),E(s,i,l)},p(s,l){l&2&&e!==(e=ke(s[23].def_tech.value)+"")&&ce(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function jo(n){let r=n[23].off_tech_id.value.replace(/ |\./g,"")+"",e,t,i=n[23].off_tech_label.value+"",s,l,a="-->",u,o,f=n[23].off_artifact_rel_label.value.replace(/ /g,"")+"",h,c,d=ke(n[23].off_artifact.value)+"",_,w,k=n[23].off_artifact_label.value+"",C,U,I=n[23].off_tech_id.value.replace(/ |\./g,"")+"",A,b,y=ke(n[23].off_artifact.value)+"",v,R,T=ke(n[23].off_artifact.value)+"",B,D,L=ke(n[23].off_artifact.value)+"",F,N,H=n[23].off_tech_id.value.replace(/ |\./g,"")+"",O,ne,Q=tl(n[23].off_tech_id.value)+"",z,Y,x=ke(n[23].off_artifact.value)+"",$,V,ie=ke(n[23].off_artifact.value)+"",Re,Le;return{c(){e=M(r),t=M('["'),s=M(i),l=M('"] '),u=M(a),o=M(" |"),h=M(f),c=M("| "),_=M(d),w=M('["'),C=M(k),U=M('"]; class '),A=M(I),b=M(` OffensiveTechniqueNode;
            class `),v=M(y),R=M(" ArtifactNode; click "),B=M(T),D=M(' href "/dao/artifact/d3f:'),F=M(L),N=M(`";
            click `),O=M(H),ne=M(' href "'),z=M(Q),Y=M('"; click '),$=M(x),V=M(' href "/dao/artifact/d3f:'),Re=M(ie),Le=M('";')},l(he){e=j(he,r),t=j(he,'["'),s=j(he,i),l=j(he,'"] '),u=j(he,a),o=j(he," |"),h=j(he,f),c=j(he,"| "),_=j(he,d),w=j(he,'["'),C=j(he,k),U=j(he,'"]; class '),A=j(he,I),b=j(he,` OffensiveTechniqueNode;
            class `),v=j(he,y),R=j(he," ArtifactNode; click "),B=j(he,T),D=j(he,' href "/dao/artifact/d3f:'),F=j(he,L),N=j(he,`";
            click `),O=j(he,H),ne=j(he,' href "'),z=j(he,Q),Y=j(he,'"; click '),$=j(he,x),V=j(he,' href "/dao/artifact/d3f:'),Re=j(he,ie),Le=j(he,'";')},m(he,me){E(he,e,me),E(he,t,me),E(he,s,me),E(he,l,me),E(he,u,me),E(he,o,me),E(he,h,me),E(he,c,me),E(he,_,me),E(he,w,me),E(he,C,me),E(he,U,me),E(he,A,me),E(he,b,me),E(he,v,me),E(he,R,me),E(he,B,me),E(he,D,me),E(he,F,me),E(he,N,me),E(he,O,me),E(he,ne,me),E(he,z,me),E(he,Y,me),E(he,$,me),E(he,V,me),E(he,Re,me),E(he,Le,me)},p(he,me){me&2&&r!==(r=he[23].off_tech_id.value.replace(/ |\./g,"")+"")&&ce(e,r),me&2&&i!==(i=he[23].off_tech_label.value+"")&&ce(s,i),me&2&&f!==(f=he[23].off_artifact_rel_label.value.replace(/ /g,"")+"")&&ce(h,f),me&2&&d!==(d=ke(he[23].off_artifact.value)+"")&&ce(_,d),me&2&&k!==(k=he[23].off_artifact_label.value+"")&&ce(C,k),me&2&&I!==(I=he[23].off_tech_id.value.replace(/ |\./g,"")+"")&&ce(A,I),me&2&&y!==(y=ke(he[23].off_artifact.value)+"")&&ce(v,y),me&2&&T!==(T=ke(he[23].off_artifact.value)+"")&&ce(B,T),me&2&&L!==(L=ke(he[23].off_artifact.value)+"")&&ce(F,L),me&2&&H!==(H=he[23].off_tech_id.value.replace(/ |\./g,"")+"")&&ce(O,H),me&2&&Q!==(Q=tl(he[23].off_tech_id.value)+"")&&ce(z,Q),me&2&&x!==(x=ke(he[23].off_artifact.value)+"")&&ce($,x),me&2&&ie!==(ie=ke(he[23].off_artifact.value)+"")&&ce(Re,ie)},d(he){he&&(m(e),m(t),m(s),m(l),m(u),m(o),m(h),m(c),m(_),m(w),m(C),m(U),m(A),m(b),m(v),m(R),m(B),m(D),m(F),m(N),m(O),m(ne),m(z),m(Y),m($),m(V),m(Re),m(Le))}}}function Vo(n){let r,e=n[8].edge_is_unique(n[23].off_tech_label.value,n[23].off_artifact_rel_label.value,n[23].off_artifact_label.value),t,i="def_tech"in n[23]&&Po(n),s=e&&jo(n);return{c(){i&&i.c(),r=ee(),s&&s.c(),t=pe()},l(l){i&&i.l(l),r=te(l),s&&s.l(l),t=pe()},m(l,a){i&&i.m(l,a),E(l,r,a),s&&s.m(l,a),E(l,t,a)},p(l,a){"def_tech"in l[23]?i?i.p(l,a):(i=Po(l),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null),a&2&&(e=l[8].edge_is_unique(l[23].off_tech_label.value,l[23].off_artifact_rel_label.value,l[23].off_artifact_label.value)),e?s?s.p(l,a):(s=jo(l),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(l){l&&(m(r),m(t)),i&&i.d(l),s&&s.d(l)}}}function cm(n){let r,e,t=Pe(n[1].off_to_def.results.bindings),i=[];for(let s=0;s<t.length;s+=1)i[s]=Vo(Bo(n,t,s));return{c(){r=M(`graph LR;
        `);for(let s=0;s<i.length;s+=1)i[s].c();e=pe()},l(s){r=j(s,`graph LR;
        `);for(let l=0;l<i.length;l+=1)i[l].l(s);e=pe()},m(s,l){E(s,r,l);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(s,l);E(s,e,l)},p(s,l){if(l&298){t=Pe(s[1].off_to_def.results.bindings);let a;for(a=0;a<t.length;a+=1){const u=Bo(s,t,a);i[a]?i[a].p(u,l):(i[a]=Vo(u),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}},d(s){s&&(m(r),m(e)),ot(i,s)}}}function dm(n){let r,e,t,i,s,l,a,u,o,f,h,c,d,_=n[5].length+"",w,k,C,U,I;const A=n[12].header,b=Dt(A,n,n[18],Lo),y=n[12].default,v=Dt(y,n,n[18],null),R=[um,am,sm],T=[];function B(D,L){return D[1]?D[1].off_to_def.results.bindings.length>0?1:2:0}return a=B(n),u=T[a]=R[a](n),{c(){r=G("dialog"),e=G("div"),b&&b.c(),t=M(`
    Select Related Artifacts To Insert
    `),v&&v.c(),i=ee(),s=G("hr"),l=ee(),u.c(),o=ee(),f=G("hr"),h=ee(),c=G("button"),d=M("Insert ("),w=M(_),k=M(")"),this.h()},l(D){r=W(D,"DIALOG",{class:!0});var L=_e(r);e=W(L,"DIV",{class:!0});var F=_e(e);b&&b.l(F),t=j(F,`
    Select Related Artifacts To Insert
    `),v&&v.l(F),i=te(F),s=W(F,"HR",{}),l=te(F),u.l(F),o=te(F),f=W(F,"HR",{}),h=te(F),c=W(F,"BUTTON",{class:!0});var N=_e(c);d=j(N,"Insert ("),w=j(N,_),k=j(N,")"),N.forEach(m),F.forEach(m),L.forEach(m),this.h()},h(){c.autofocus=!0,J(c,"class","svelte-x0618k"),J(e,"class","svelte-x0618k"),J(r,"class","svelte-x0618k")},m(D,L){E(D,r,L),P(r,e),b&&b.m(e,null),P(e,t),v&&v.m(e,null),P(e,i),P(e,s),P(e,l),T[a].m(e,null),P(e,o),P(e,f),P(e,h),P(e,c),P(c,d),P(c,w),P(c,k),n[15](r),C=!0,c.focus(),U||(I=[fe(c,"click",n[9]),fe(e,"click",At(n[13])),fe(r,"close",n[16]),fe(r,"click",en(n[17]))],U=!0)},p(D,[L]){b&&b.p&&(!C||L&262144)&&Et(b,A,D,D[18],C?Ct(A,D[18],L,lm):Tt(D[18]),Lo),v&&v.p&&(!C||L&262144)&&Et(v,y,D,D[18],C?Ct(y,D[18],L,null):Tt(D[18]),null);let F=a;a=B(D),a===F?T[a].p(D,L):(Xe(),le(T[F],1,1,()=>{T[F]=null}),Ge(),u=T[a],u?u.p(D,L):(u=T[a]=R[a](D),u.c()),re(u,1),u.m(e,o)),(!C||L&32)&&_!==(_=D[5].length+"")&&ce(w,_)},i(D){C||(re(b,D),re(v,D),re(u),C=!0)},o(D){le(b,D),le(v,D),le(u),C=!1},d(D){D&&m(r),b&&b.d(D),v&&v.d(D),T[a].d(),n[15](null),U=!1,xe(I)}}}function hm(n,r,e){let t,i,s,{$$slots:l={},$$scope:a}=r,{show_defend_modal:u}=r,{parent_node:o}=r,{data:f}=r,h;const c=qr();Me(n,c,B=>e(20,s=B));const d=Ur();Me(n,d,B=>e(19,i=B));let _=new qn;function w(B){t.includes(B)?e(5,t=t.filter(D=>D!==B)):t.push(B),e(5,t)}window.off_to_def_callback=function(B){w(B)};function k(){let B=0,D=200,L=100;for(const F of t){let N=f.off_to_def.results.bindings.find(H=>"def_tech"in H&&ke(H.def_tech.value)==F);N&&(on(c,d,o,"countermeasureSelectorNode",N.def_tech_label.value,"d3f:"+ke(N.def_tech.value),o.data.sequence,o.position.x+B*D,o.position.y+L,182,63,"May "+N.def_tactic_label.value,!1),B+=1)}c.set(s),d.set(i),h&&h.close(),e(5,t=[])}let C=new Set,U=[],I=[];Tc(U,I)&&(I=[]);function A(B){for(const D of t){let L=f.off_to_def.results.bindings.find(F=>"def_tech"in F&&ke(F.def_tech.value)==D);B.includes(L.def_tactic_label.value)&&e(5,t=t.filter(F=>F!==D))}e(5,t)}function b(B){br.call(this,n,B)}function y(B){I=B,e(3,I)}function v(B){kt[B?"unshift":"push"](()=>{h=B,e(2,h)})}const R=()=>e(0,u=!1),T=()=>{h.close(),e(5,t=[])};return n.$$set=B=>{"show_defend_modal"in B&&e(0,u=B.show_defend_modal),"parent_node"in B&&e(10,o=B.parent_node),"data"in B&&e(1,f=B.data),"$$scope"in B&&e(18,a=B.$$scope)},n.$$.update=()=>{n.$$.dirty&5&&u&&h&&(h.showModal(),_.reset()),n.$$.dirty&2050&&f&&(f.off_to_def.results.bindings.forEach(B=>{"def_tactic_label"in B&&C.add(B.def_tactic_label.value)}),e(11,C),e(1,f)),n.$$.dirty&2048&&e(4,U=Array.from(C).sort(function(B,D){return rl[B]-rl[D]})),n.$$.dirty&8&&A(I),n.$$.dirty&8&&_.reset(I)},e(5,t=[]),[u,f,h,I,U,t,c,d,_,k,o,C,l,b,y,v,R,T,a]}class _m extends it{constructor(r){super(),lt(this,r,hm,dm,Ve,{show_defend_modal:0,parent_node:10,data:1})}}function pm(n){let r,e="artifacts",t,i,s,l,a,u="defensive techniques",o,f,h,c,d,_;function w(I){n[6](I)}let k={parent_node:n[0],data:n[1]};n[2]!==void 0&&(k.show_artifacts_modal=n[2]),i=new im({props:k}),kt.push(()=>tr(i,"show_artifacts_modal",w));function C(I){n[8](I)}let U={parent_node:n[0],data:n[1]};return n[3]!==void 0&&(U.show_defend_modal=n[3]),f=new _m({props:U}),kt.push(()=>tr(f,"show_defend_modal",C)),{c(){r=G("button"),r.textContent=e,t=ee(),ve(i.$$.fragment),l=ee(),a=G("button"),a.textContent=u,o=ee(),ve(f.$$.fragment),this.h()},l(I){r=W(I,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(r)!=="svelte-1t14z6m"&&(r.textContent=e),t=te(I),be(i.$$.fragment,I),l=te(I),a=W(I,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(a)!=="svelte-o3we0s"&&(a.textContent=u),o=te(I),be(f.$$.fragment,I),this.h()},h(){J(r,"class","svelte-1x5dcdh"),J(a,"class","svelte-1x5dcdh")},m(I,A){E(I,r,A),E(I,t,A),we(i,I,A),E(I,l,A),E(I,a,A),E(I,o,A),we(f,I,A),c=!0,d||(_=[fe(r,"click",n[5]),fe(a,"click",n[7])],d=!0)},p(I,[A]){const b={};A&1&&(b.parent_node=I[0]),A&2&&(b.data=I[1]),!s&&A&4&&(s=!0,b.show_artifacts_modal=I[2],er(()=>s=!1)),i.$set(b);const y={};A&1&&(y.parent_node=I[0]),A&2&&(y.data=I[1]),!h&&A&8&&(h=!0,y.show_defend_modal=I[3],er(()=>h=!1)),f.$set(y)},i(I){c||(re(i.$$.fragment,I),re(f.$$.fragment,I),c=!0)},o(I){le(i.$$.fragment,I),le(f.$$.fragment,I),c=!1},d(I){I&&(m(r),m(t),m(l),m(a),m(o)),ye(i,I),ye(f,I),d=!1,xe(_)}}}function gm(n,r,e){let t,i;var s=this&&this.__awaiter||function(d,_,w,k){function C(U){return U instanceof w?U:new w(function(I){I(U)})}return new(w||(w=Promise))(function(U,I){function A(v){try{y(k.next(v))}catch(R){I(R)}}function b(v){try{y(k.throw(v))}catch(R){I(R)}}function y(v){v.done?U(v.value):C(v.value).then(A,b)}y((k=k.apply(d,_||[])).next())})};let{node:l}=r,a;function u(d){return s(this,void 0,void 0,function*(){if(d.data.d3f_class){const _=d.data.d3f_class;return yield(yield fetch(`/api/offensive-technique/attack/${_.replace("d3f:","")}.json`)).json()}else alert("Please specify a D3FEND Class for this node to enable inferential mapping"),e(3,i=!1),e(2,t=!1)})}const o=async()=>{e(1,a=null),e(2,t=!0),e(1,a=await u(l))};function f(d){t=d,e(2,t)}const h=async()=>{e(1,a=null),e(3,i=!0),e(1,a=await u(l))};function c(d){i=d,e(3,i)}return n.$$set=d=>{"node"in d&&e(0,l=d.node)},e(2,t=!1),e(3,i=!1),[l,a,t,i,u,o,f,h,c]}class mm extends it{constructor(r){super(),lt(this,r,gm,pm,Ve,{node:0})}}function Ho(n){let r,e;return r=new mm({props:{node:n[1]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i&2&&(s.node=t[1]),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function zo(n){let r,e;return r=new Yg({props:{node:n[1]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i&2&&(s.node=t[1]),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Xo(n){let r,e;return r=new Tg({props:{node:n[1]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i&2&&(s.node=t[1]),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function vm(n){let r,e,t,i,s,l,a,u,o,f,h="duplicate",c,d,_="delete",w,k,C,U,I=n[1]&&n[1].type=="attackSelectorNode"&&Ho(n),A=n[1]&&n[1].type=="countermeasureSelectorNode"&&zo(n),b=n[1]&&n[1].type=="artifactSelectorNode"&&Xo(n);return{c(){r=G("div"),e=G("p"),t=G("small"),i=M("node: "),s=M(n[0]),l=ee(),I&&I.c(),a=ee(),A&&A.c(),u=ee(),b&&b.c(),o=ee(),f=G("button"),f.textContent=h,c=ee(),d=G("button"),d.textContent=_,this.h()},l(y){r=W(y,"DIV",{style:!0,class:!0});var v=_e(r);e=W(v,"P",{style:!0});var R=_e(e);t=W(R,"SMALL",{});var T=_e(t);i=j(T,"node: "),s=j(T,n[0]),T.forEach(m),R.forEach(m),l=te(v),I&&I.l(v),a=te(v),A&&A.l(v),u=te(v),b&&b.l(v),o=te(v),f=W(v,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(f)!=="svelte-1spbqw1"&&(f.textContent=h),c=te(v),d=W(v,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(d)!=="svelte-1pyou7z"&&(d.textContent=_),v.forEach(m),this.h()},h(){Ze(e,"margin","0.5em"),J(f,"class","svelte-1o17oqa"),J(d,"class","svelte-1o17oqa"),J(r,"style",w=n[2]()),J(r,"class","context-menu svelte-1o17oqa")},m(y,v){E(y,r,v),P(r,e),P(e,t),P(t,i),P(t,s),P(r,l),I&&I.m(r,null),P(r,a),A&&A.m(r,null),P(r,u),b&&b.m(r,null),P(r,o),P(r,f),P(r,c),P(r,d),k=!0,C||(U=[fe(f,"click",n[5]),fe(d,"click",n[6])],C=!0)},p(y,[v]){(!k||v&1)&&ce(s,y[0]),y[1]&&y[1].type=="attackSelectorNode"?I?(I.p(y,v),v&2&&re(I,1)):(I=Ho(y),I.c(),re(I,1),I.m(r,a)):I&&(Xe(),le(I,1,1,()=>{I=null}),Ge()),y[1]&&y[1].type=="countermeasureSelectorNode"?A?(A.p(y,v),v&2&&re(A,1)):(A=zo(y),A.c(),re(A,1),A.m(r,u)):A&&(Xe(),le(A,1,1,()=>{A=null}),Ge()),y[1]&&y[1].type=="artifactSelectorNode"?b?(b.p(y,v),v&2&&re(b,1)):(b=Xo(y),b.c(),re(b,1),b.m(r,o)):b&&(Xe(),le(b,1,1,()=>{b=null}),Ge()),(!k||v&4&&w!==(w=y[2]()))&&J(r,"style",w)},i(y){k||(re(I),re(A),re(b),k=!0)},o(y){le(I),le(A),le(b),k=!1},d(y){y&&m(r),I&&I.d(),A&&A.d(),b&&b.d(),C=!1,xe(U)}}}function bm(n,r,e){let t,i,s,l,{id:a}=r,{top:u}=r,{left:o}=r,{right:f}=r,{bottom:h}=r;const c=qr();Me(n,c,k=>e(11,l=k));const d=Ur();Me(n,d,k=>e(12,s=k));function _(){const k=l.find(C=>C.id===a);k&&(console.log(k),l.push(Object.assign(Object.assign({},k),{id:`${a}-copy${Math.random()}`.slice(-24),position:{x:k.position.x,y:k.position.y+50}}))),c.set(l)}function w(){Ke(c,l=l.filter(k=>k.id!==a),l),Ke(d,s=s.filter(k=>k.source!==a&&k.target!==a),s),c.set(l),d.set(s)}return n.$$set=k=>{"id"in k&&e(0,a=k.id),"top"in k&&e(7,u=k.top),"left"in k&&e(8,o=k.left),"right"in k&&e(9,f=k.right),"bottom"in k&&e(10,h=k.bottom)},n.$$.update=()=>{n.$$.dirty&2049&&e(1,t=l.find(k=>k.id===a)),n.$$.dirty&1920&&e(2,i=()=>{let k="";return u&&(k+=`top:${u}px;`),h&&(k+=`bottom:${h}px;`),o&&(k+=`left:${o}px;`),f&&(k+=`right:${f}px;`),k})},[a,t,i,c,d,_,w,u,o,f,h,l]}class wm extends it{constructor(r){super(),lt(this,r,bm,vm,Ve,{id:0,top:7,left:8,right:9,bottom:10})}}function Go(n,r,e){const t=n.slice();return t[12]=r[e],t}function Wo(n){let r,e,t,i,s,l,a,u,o,f,h,c,d;const _=n[8].default,w=Dt(_,n,n[7],null);let k=Pe(n[3]),C=[];for(let U=0;U<k.length;U+=1)C[U]=Qo(Go(n,k,U));return{c(){r=G("div"),e=G("div"),t=G("h2"),i=M(n[1]),s=ee(),l=G("p"),a=M(n[2]),u=ee(),w&&w.c(),o=ee(),f=G("div");for(let U=0;U<C.length;U+=1)C[U].c();this.h()},l(U){r=W(U,"DIV",{class:!0});var I=_e(r);e=W(I,"DIV",{class:!0});var A=_e(e);t=W(A,"H2",{});var b=_e(t);i=j(b,n[1]),b.forEach(m),s=te(A),l=W(A,"P",{});var y=_e(l);a=j(y,n[2]),y.forEach(m),u=te(A),w&&w.l(A),o=te(A),f=W(A,"DIV",{class:!0});var v=_e(f);for(let R=0;R<C.length;R+=1)C[R].l(v);v.forEach(m),A.forEach(m),I.forEach(m),this.h()},h(){J(f,"class","options svelte-zbcx3u"),J(e,"class","modal-content center text-center svelte-zbcx3u"),J(r,"class","modal-overlay svelte-zbcx3u")},m(U,I){E(U,r,I),P(r,e),P(e,t),P(t,i),P(e,s),P(e,l),P(l,a),P(e,u),w&&w.m(e,null),P(e,o),P(e,f);for(let A=0;A<C.length;A+=1)C[A]&&C[A].m(f,null);h=!0,c||(d=[fe(e,"click",At(n[9])),fe(r,"click",n[4])],c=!0)},p(U,I){if((!h||I&2)&&ce(i,U[1]),(!h||I&4)&&ce(a,U[2]),w&&w.p&&(!h||I&128)&&Et(w,_,U,U[7],h?Ct(_,U[7],I,null):Tt(U[7]),null),I&40){k=Pe(U[3]);let A;for(A=0;A<k.length;A+=1){const b=Go(U,k,A);C[A]?C[A].p(b,I):(C[A]=Qo(b),C[A].c(),C[A].m(f,null))}for(;A<C.length;A+=1)C[A].d(1);C.length=k.length}},i(U){h||(re(w,U),h=!0)},o(U){le(w,U),h=!1},d(U){U&&m(r),w&&w.d(U),ot(C,U),c=!1,xe(d)}}}function Qo(n){let r,e=n[12].label+"",t,i,s,l;function a(){return n[10](n[12])}return{c(){r=G("button"),t=M(e),i=ee(),this.h()},l(u){r=W(u,"BUTTON",{class:!0});var o=_e(r);t=j(o,e),i=te(o),o.forEach(m),this.h()},h(){J(r,"class","svelte-zbcx3u")},m(u,o){E(u,r,o),P(r,t),P(r,i),s||(l=fe(r,"click",a),s=!0)},p(u,o){n=u,o&8&&e!==(e=n[12].label+"")&&ce(t,e)},d(u){u&&m(r),s=!1,l()}}}function ym(n){let r,e,t=n[0]&&Wo(n);return{c(){t&&t.c(),r=pe()},l(i){t&&t.l(i),r=pe()},m(i,s){t&&t.m(i,s),E(i,r,s),e=!0},p(i,[s]){i[0]?t?(t.p(i,s),s&1&&re(t,1)):(t=Wo(i),t.c(),re(t,1),t.m(r.parentNode,r)):t&&(Xe(),le(t,1,1,()=>{t=null}),Ge())},i(i){e||(re(t),e=!0)},o(i){le(t),e=!1},d(i){i&&m(r),t&&t.d(i)}}}function km(n,r,e){let{$$slots:t={},$$scope:i}=r,{is_open:s=!1}=r,{title:l=""}=r,{content:a=""}=r,{imageSrc:u=""}=r,{options:o=[]}=r;const f=os();function h(){e(0,s=!1)}function c(w){f("optionSelected",w),h()}function d(w){br.call(this,n,w)}const _=w=>c(w);return n.$$set=w=>{"is_open"in w&&e(0,s=w.is_open),"title"in w&&e(1,l=w.title),"content"in w&&e(2,a=w.content),"imageSrc"in w&&e(6,u=w.imageSrc),"options"in w&&e(3,o=w.options),"$$scope"in w&&e(7,i=w.$$scope)},[s,l,a,o,h,c,u,i,t,d,_]}class Yo extends it{constructor(r){super(),lt(this,r,km,ym,Ve,{is_open:0,title:1,content:2,imageSrc:6,options:3})}}function xo(n,r,e){const t=n.slice();return t[11]=r[e],t}function Jo(n){let r,e,t,i,s,l,a,u,o,f,h,c,d;const _=n[7].default,w=Dt(_,n,n[6],null);let k=Pe(n[3]),C=[];for(let U=0;U<k.length;U+=1)C[U]=Zo(xo(n,k,U));return{c(){r=G("div"),e=G("div"),t=G("h2"),i=M(n[1]),s=ee(),l=G("p"),a=M(n[2]),u=ee(),w&&w.c(),o=ee(),f=G("div");for(let U=0;U<C.length;U+=1)C[U].c();this.h()},l(U){r=W(U,"DIV",{class:!0});var I=_e(r);e=W(I,"DIV",{class:!0});var A=_e(e);t=W(A,"H2",{});var b=_e(t);i=j(b,n[1]),b.forEach(m),s=te(A),l=W(A,"P",{});var y=_e(l);a=j(y,n[2]),y.forEach(m),u=te(A),w&&w.l(A),o=te(A),f=W(A,"DIV",{class:!0});var v=_e(f);for(let R=0;R<C.length;R+=1)C[R].l(v);v.forEach(m),A.forEach(m),I.forEach(m),this.h()},h(){J(f,"class","options svelte-2iwk9m"),J(e,"class","modal-content center text-center svelte-2iwk9m"),J(r,"class","modal-overlay svelte-2iwk9m")},m(U,I){E(U,r,I),P(r,e),P(e,t),P(t,i),P(e,s),P(e,l),P(l,a),P(e,u),w&&w.m(e,null),P(e,o),P(e,f);for(let A=0;A<C.length;A+=1)C[A]&&C[A].m(f,null);h=!0,c||(d=[fe(e,"click",At(n[8])),fe(r,"click",n[4])],c=!0)},p(U,I){if((!h||I&2)&&ce(i,U[1]),(!h||I&4)&&ce(a,U[2]),w&&w.p&&(!h||I&64)&&Et(w,_,U,U[6],h?Ct(_,U[6],I,null):Tt(U[6]),null),I&40){k=Pe(U[3]);let A;for(A=0;A<k.length;A+=1){const b=xo(U,k,A);C[A]?C[A].p(b,I):(C[A]=Zo(b),C[A].c(),C[A].m(f,null))}for(;A<C.length;A+=1)C[A].d(1);C.length=k.length}},i(U){h||(re(w,U),h=!0)},o(U){le(w,U),h=!1},d(U){U&&m(r),w&&w.d(U),ot(C,U),c=!1,xe(d)}}}function Zo(n){let r,e=n[11].label+"",t,i,s,l;function a(){return n[9](n[11])}return{c(){r=G("button"),t=M(e),i=ee(),this.h()},l(u){r=W(u,"BUTTON",{class:!0});var o=_e(r);t=j(o,e),i=te(o),o.forEach(m),this.h()},h(){J(r,"class","svelte-2iwk9m")},m(u,o){E(u,r,o),P(r,t),P(r,i),s||(l=fe(r,"click",a),s=!0)},p(u,o){n=u,o&8&&e!==(e=n[11].label+"")&&ce(t,e)},d(u){u&&m(r),s=!1,l()}}}function Dm(n){let r,e,t=n[0]&&Jo(n);return{c(){t&&t.c(),r=pe()},l(i){t&&t.l(i),r=pe()},m(i,s){t&&t.m(i,s),E(i,r,s),e=!0},p(i,[s]){i[0]?t?(t.p(i,s),s&1&&re(t,1)):(t=Jo(i),t.c(),re(t,1),t.m(r.parentNode,r)):t&&(Xe(),le(t,1,1,()=>{t=null}),Ge())},i(i){e||(re(t),e=!0)},o(i){le(t),e=!1},d(i){i&&m(r),t&&t.d(i)}}}function Em(n,r,e){let{$$slots:t={},$$scope:i}=r,{is_open:s=!1}=r,{title:l=""}=r,{content:a=""}=r,{options:u=[{label:"Cancel",value:"cancel"}]}=r;const o=os();function f(){e(0,s=!1)}function h(_){o("model_shared",_),f()}function c(_){br.call(this,n,_)}const d=_=>h(_);return n.$$set=_=>{"is_open"in _&&e(0,s=_.is_open),"title"in _&&e(1,l=_.title),"content"in _&&e(2,a=_.content),"options"in _&&e(3,u=_.options),"$$scope"in _&&e(6,i=_.$$scope)},[s,l,a,u,f,h,i,t,c,d]}class Tm extends it{constructor(r){super(),lt(this,r,Em,Dm,Ve,{is_open:0,title:1,content:2,options:3})}}function Cm(n){let r,e,t=n[1]?"Exit Fullscreen":"Fullscreen",i,s,l,a,u;const o=n[4].default,f=Dt(o,n,n[3],null);return{c(){r=G("div"),e=G("button"),i=M(t),s=ee(),f&&f.c(),this.h()},l(h){r=W(h,"DIV",{id:!0,class:!0});var c=_e(r);e=W(c,"BUTTON",{class:!0});var d=_e(e);i=j(d,t),d.forEach(m),s=te(c),f&&f.l(c),c.forEach(m),this.h()},h(){J(e,"class","fullscreen-toggle svelte-1t28a4x"),Ir(e,"left",n[0]==="left"),Ir(e,"right",n[0]==="right"),J(r,"id","fullscreen-parent"),J(r,"class","svelte-1t28a4x")},m(h,c){E(h,r,c),P(r,e),P(e,i),P(r,s),f&&f.m(r,null),l=!0,a||(u=fe(e,"click",n[2]),a=!0)},p(h,[c]){(!l||c&2)&&t!==(t=h[1]?"Exit Fullscreen":"Fullscreen")&&ce(i,t),(!l||c&1)&&Ir(e,"left",h[0]==="left"),(!l||c&1)&&Ir(e,"right",h[0]==="right"),f&&f.p&&(!l||c&8)&&Et(f,o,h,h[3],l?Ct(o,h[3],c,null):Tt(h[3]),null)},i(h){l||(re(f,h),l=!0)},o(h){le(f,h),l=!1},d(h){h&&m(r),f&&f.d(h),a=!1,u()}}}function Nm(n,r,e){let{$$slots:t={},$$scope:i}=r,{position:s="right"}=r,l=!1,a;fl(()=>(a=document.getElementById("fullscreen-parent"),document.addEventListener("fullscreenchange",u),()=>{document.removeEventListener("fullscreenchange",u)}));function u(){e(1,l=!!document.fullscreenElement)}async function o(){if(l)try{await document.exitFullscreen()}catch(f){console.error("Error attempting to exit fullscreen:",f)}else try{await a.requestFullscreen()}catch(f){console.error("Error attempting to enable fullscreen:",f)}}return n.$$set=f=>{"position"in f&&e(0,s=f.position),"$$scope"in f&&e(3,i=f.$$scope)},[s,l,o,i,t]}class Am extends it{constructor(r){super(),lt(this,r,Nm,Cm,Ve,{position:0})}}function Sm(n){let r,e,t="You can drag these nodes to the pane below.",i,s,l,a,u="Action",o,f,h="Event",c,d,_="Attack",w,k,C="Countermeasure",U,I,A,b="Endurant",y,v,R="Artifact",T,B,D="Information",L,F,N="Agent",H,O,ne,Q="State",z,Y,x="Vulnerability",$,V,ie="Condition",Re,Le;return{c(){r=G("aside"),e=G("div"),e.textContent=t,i=ee(),s=G("div"),l=G("div"),a=G("div"),a.textContent=u,o=ee(),f=G("div"),f.textContent=h,c=ee(),d=G("div"),d.textContent=_,w=ee(),k=G("div"),k.textContent=C,U=ee(),I=G("div"),A=G("div"),A.textContent=b,y=ee(),v=G("div"),v.textContent=R,T=ee(),B=G("div"),B.textContent=D,L=ee(),F=G("div"),F.textContent=N,H=ee(),O=G("div"),ne=G("div"),ne.textContent=Q,z=ee(),Y=G("div"),Y.textContent=x,$=ee(),V=G("div"),V.textContent=ie,this.h()},l(he){r=W(he,"ASIDE",{class:!0});var me=_e(r);e=W(me,"DIV",{class:!0,"data-svelte-h":!0}),qe(e)!=="svelte-1go4e39"&&(e.textContent=t),i=te(me),s=W(me,"DIV",{class:!0});var oe=_e(s);l=W(oe,"DIV",{class:!0});var Ee=_e(l);a=W(Ee,"DIV",{class:!0,"data-svelte-h":!0}),qe(a)!=="svelte-1yk6dej"&&(a.textContent=u),o=te(Ee),f=W(Ee,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),qe(f)!=="svelte-1hxo6k5"&&(f.textContent=h),c=te(Ee),d=W(Ee,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),qe(d)!=="svelte-1m30nhf"&&(d.textContent=_),w=te(Ee),k=W(Ee,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),qe(k)!=="svelte-xvztkt"&&(k.textContent=C),Ee.forEach(m),U=te(oe),I=W(oe,"DIV",{class:!0});var $e=_e(I);A=W($e,"DIV",{class:!0,"data-svelte-h":!0}),qe(A)!=="svelte-13fxc4g"&&(A.textContent=b),y=te($e),v=W($e,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),qe(v)!=="svelte-p6iki9"&&(v.textContent=R),T=te($e),B=W($e,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),qe(B)!=="svelte-gfucir"&&(B.textContent=D),L=te($e),F=W($e,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),qe(F)!=="svelte-1k1k96h"&&(F.textContent=N),$e.forEach(m),H=te(oe),O=W(oe,"DIV",{class:!0});var ft=_e(O);ne=W(ft,"DIV",{class:!0,"data-svelte-h":!0}),qe(ne)!=="svelte-82roym"&&(ne.textContent=Q),z=te(ft),Y=W(ft,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),qe(Y)!=="svelte-tj9qj"&&(Y.textContent=x),$=te(ft),V=W(ft,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),qe(V)!=="svelte-1mwlumu"&&(V.textContent=ie),ft.forEach(m),oe.forEach(m),me.forEach(m),this.h()},h(){J(e,"class","label svelte-1vosa9g"),J(a,"class","text-center font-medium"),J(f,"class","actionNode example-node svelte-1vosa9g"),J(f,"draggable",!0),Ze(f,"text-align","center"),Ze(f,"background","white"),J(f,"title","d3f:Event"),J(d,"class","attackSelectorNode example-node svelte-1vosa9g"),J(d,"draggable",!0),Ze(d,"text-align","center"),Ze(d,"background","#FFD0D0"),J(d,"title","d3f:OffensiveTechnique"),J(k,"class","countermeasureSelectorNode example-node svelte-1vosa9g"),J(k,"draggable",!0),Ze(k,"text-align","center"),Ze(k,"background","#d6eaff"),J(k,"title","d3f:DefensiveTechnique"),J(l,"class","nodes-column svelte-1vosa9g"),J(A,"class","text-center font-medium"),J(v,"class","artifactSelectorNode art-node example-node svelte-1vosa9g"),J(v,"draggable",!0),Ze(v,"text-align","center"),Ze(v,"background","#fff4dd"),J(B,"class","informationSelectorNode example-node svelte-1vosa9g"),J(B,"draggable",!0),Ze(B,"text-align","center"),Ze(B,"background","#e8f4ea"),J(F,"class","agentSelectorNode example-node svelte-1vosa9g"),J(F,"draggable",!0),Ze(F,"text-align","center"),Ze(F,"background","#f0e6e6"),J(I,"class","nodes-column svelte-1vosa9g"),J(ne,"class","text-center font-medium"),J(Y,"class","vulnerabilitySelectorNode example-node svelte-1vosa9g"),J(Y,"draggable",!0),Ze(Y,"text-align","center"),Ze(Y,"background","#f9d999"),J(V,"class","conditionDefinitionNode example-node svelte-1vosa9g"),J(V,"draggable",!0),Ze(V,"text-align","center"),Ze(V,"background","#ece6ff"),J(O,"class","nodes-column svelte-1vosa9g"),J(s,"class","nodes-container svelte-1vosa9g"),J(r,"class","svelte-1vosa9g")},m(he,me){E(he,r,me),P(r,e),P(r,i),P(r,s),P(s,l),P(l,a),P(l,o),P(l,f),P(l,c),P(l,d),P(l,w),P(l,k),P(s,U),P(s,I),P(I,A),P(I,y),P(I,v),P(I,T),P(I,B),P(I,L),P(I,F),P(s,H),P(s,O),P(O,ne),P(O,z),P(O,Y),P(O,$),P(O,V),Re||(Le=[fe(f,"dragstart",n[1]),fe(d,"dragstart",n[2]),fe(k,"dragstart",n[3]),fe(v,"dragstart",n[4]),fe(B,"dragstart",n[5]),fe(F,"dragstart",n[6]),fe(Y,"dragstart",n[7]),fe(V,"dragstart",n[8])],Re=!0)},p:Ne,i:Ne,o:Ne,d(he){he&&m(r),Re=!1,xe(Le)}}}function Im(n){const r=(f,h)=>{if(!f.dataTransfer)return null;f.dataTransfer.setData("application/svelteflow",h),f.dataTransfer.effectAllowed="move"};return[r,f=>r(f,"eventNode"),f=>r(f,"attackSelectorNode"),f=>r(f,"countermeasureSelectorNode"),f=>r(f,"artifactSelectorNode"),f=>r(f,"informationSelectorNode"),f=>r(f,"agentSelectorNode"),f=>r(f,"vulnerabilitySelectorNode"),f=>r(f,"conditionDefinitionNode")]}class Rm extends it{constructor(r){super(),lt(this,r,Im,Sm,Ve,{})}}function Ko(n,r,e){const t=n.slice();return t[16]=r[e],t[20]=r,t[18]=e,t}function $o(n,r,e){const t=n.slice();return t[16]=r[e],t[19]=r,t[18]=e,t}function ef(n,r,e){const t=n.slice();return t[16]=r[e],t[17]=r,t[18]=e,t}function tf(n){let r,e,t=n[0].id+"",i,s,l;function a(f,h){return f[0].type=="attackSelectorNode"?Bm:f[0].type=="vulnerabilitySelectorNode"?Om:Fm}let u=a(n),o=u(n);return{c(){r=G("p"),e=M("id: "),i=M(t),s=ee(),o.c(),l=pe(),this.h()},l(f){r=W(f,"P",{class:!0});var h=_e(r);e=j(h,"id: "),i=j(h,t),h.forEach(m),s=te(f),o.l(f),l=pe(),this.h()},h(){J(r,"class","text-center")},m(f,h){E(f,r,h),P(r,e),P(r,i),E(f,s,h),o.m(f,h),E(f,l,h)},p(f,h){h&1&&t!==(t=f[0].id+"")&&ce(i,t),u===(u=a(f))&&o?o.p(f,h):(o.d(1),o=u(f),o&&(o.c(),o.m(l.parentNode,l)))},d(f){f&&(m(r),m(s),m(l)),o.d(f)}}}function Fm(n){let r,e,t,i,s,l,a,u,o,f,h,c,d,_,w,k,C,U="+",I,A,b=Pe(n[0].data.user_properties),y=[];for(let v=0;v<b.length;v+=1)y[v]=rf(Ko(n,b,v));return{c(){r=G("p"),e=M("sequence: "),t=G("br"),i=G("input"),s=ee(),l=G("br"),a=ee(),u=G("br"),o=M(`
                label:`),f=G("br"),h=G("input"),c=G("br"),d=ee(),_=G("br"),w=ee();for(let v=0;v<y.length;v+=1)y[v].c();k=ee(),C=G("button"),C.textContent=U,this.h()},l(v){r=W(v,"P",{class:!0});var R=_e(r);e=j(R,"sequence: "),t=W(R,"BR",{}),i=W(R,"INPUT",{placeholder:!0,type:!0,name:!0}),s=te(R),l=W(R,"BR",{}),a=te(R),u=W(R,"BR",{}),o=j(R,`
                label:`),f=W(R,"BR",{}),h=W(R,"INPUT",{type:!0,name:!0}),c=W(R,"BR",{}),d=te(R),_=W(R,"BR",{}),w=te(R);for(let T=0;T<y.length;T+=1)y[T].l(R);k=te(R),C=W(R,"BUTTON",{"data-svelte-h":!0}),qe(C)!=="svelte-y9choq"&&(C.textContent=U),R.forEach(m),this.h()},h(){J(i,"placeholder","property"),J(i,"type","text"),J(i,"name","editableInput"),J(h,"type","text"),J(h,"name","editableInput"),J(r,"class","text-center")},m(v,R){E(v,r,R),P(r,e),P(r,t),P(r,i),Ie(i,n[0].data.sequence),P(r,s),P(r,l),P(r,a),P(r,u),P(r,o),P(r,f),P(r,h),Ie(h,n[0].data.label),P(r,c),P(r,d),P(r,_),P(r,w);for(let T=0;T<y.length;T+=1)y[T]&&y[T].m(r,null);P(r,k),P(r,C),I||(A=[fe(i,"input",n[12]),fe(h,"input",n[13]),fe(C,"click",n[1])],I=!0)},p(v,R){if(R&1&&i.value!==v[0].data.sequence&&Ie(i,v[0].data.sequence),R&1&&h.value!==v[0].data.label&&Ie(h,v[0].data.label),R&1){b=Pe(v[0].data.user_properties);let T;for(T=0;T<b.length;T+=1){const B=Ko(v,b,T);y[T]?y[T].p(B,R):(y[T]=rf(B),y[T].c(),y[T].m(r,k))}for(;T<y.length;T+=1)y[T].d(1);y.length=b.length}},d(v){v&&m(r),ot(y,v),I=!1,xe(A)}}}function Om(n){let r,e,t,i,s,l,a,u,o,f,h,c,d,_,w,k,C,U,I="+",A,b,y=Pe(n[0].data.user_properties),v=[];for(let R=0;R<y.length;R+=1)v[R]=nf($o(n,y,R));return{c(){r=G("p"),e=M("weakness: "),t=G("br"),i=G("input"),s=G("br"),l=ee(),a=G("br"),u=ee(),o=G("br"),f=M(`
                label:`),h=G("br"),c=G("input"),d=G("br"),_=ee(),w=G("br"),k=ee();for(let R=0;R<v.length;R+=1)v[R].c();C=ee(),U=G("button"),U.textContent=I,this.h()},l(R){r=W(R,"P",{class:!0});var T=_e(r);e=j(T,"weakness: "),t=W(T,"BR",{}),i=W(T,"INPUT",{placeholder:!0,type:!0,name:!0}),s=W(T,"BR",{}),l=te(T),a=W(T,"BR",{}),u=te(T),o=W(T,"BR",{}),f=j(T,`
                label:`),h=W(T,"BR",{}),c=W(T,"INPUT",{type:!0,name:!0}),d=W(T,"BR",{}),_=te(T),w=W(T,"BR",{}),k=te(T);for(let B=0;B<v.length;B+=1)v[B].l(T);C=te(T),U=W(T,"BUTTON",{"data-svelte-h":!0}),qe(U)!=="svelte-y9choq"&&(U.textContent=I),T.forEach(m),this.h()},h(){J(i,"placeholder","weakness"),J(i,"type","text"),J(i,"name","editableInput"),J(c,"type","text"),J(c,"name","editableInput"),J(r,"class","text-center")},m(R,T){E(R,r,T),P(r,e),P(r,t),P(r,i),Ie(i,n[0].data.weakness),P(r,s),P(r,l),P(r,a),P(r,u),P(r,o),P(r,f),P(r,h),P(r,c),Ie(c,n[0].data.label),P(r,d),P(r,_),P(r,w),P(r,k);for(let B=0;B<v.length;B+=1)v[B]&&v[B].m(r,null);P(r,C),P(r,U),A||(b=[fe(i,"input",n[8]),fe(c,"input",n[9]),fe(U,"click",n[1])],A=!0)},p(R,T){if(T&1&&i.value!==R[0].data.weakness&&Ie(i,R[0].data.weakness),T&1&&c.value!==R[0].data.label&&Ie(c,R[0].data.label),T&1){y=Pe(R[0].data.user_properties);let B;for(B=0;B<y.length;B+=1){const D=$o(R,y,B);v[B]?v[B].p(D,T):(v[B]=nf(D),v[B].c(),v[B].m(r,C))}for(;B<v.length;B+=1)v[B].d(1);v.length=y.length}},d(R){R&&m(r),ot(v,R),A=!1,xe(b)}}}function Bm(n){let r,e,t,i,s,l,a,u,o,f,h,c,d,_,w,k,C,U="+",I,A,b=Pe(n[0].data.user_properties),y=[];for(let v=0;v<b.length;v+=1)y[v]=lf(ef(n,b,v));return{c(){r=G("p"),e=M("sequence: "),t=G("br"),i=G("input"),s=ee(),l=G("br"),a=ee(),u=G("br"),o=M(`
                label:`),f=G("br"),h=G("input"),c=G("br"),d=ee(),_=G("br"),w=ee();for(let v=0;v<y.length;v+=1)y[v].c();k=ee(),C=G("button"),C.textContent=U,this.h()},l(v){r=W(v,"P",{class:!0});var R=_e(r);e=j(R,"sequence: "),t=W(R,"BR",{}),i=W(R,"INPUT",{placeholder:!0,type:!0,name:!0}),s=te(R),l=W(R,"BR",{}),a=te(R),u=W(R,"BR",{}),o=j(R,`
                label:`),f=W(R,"BR",{}),h=W(R,"INPUT",{type:!0,name:!0}),c=W(R,"BR",{}),d=te(R),_=W(R,"BR",{}),w=te(R);for(let T=0;T<y.length;T+=1)y[T].l(R);k=te(R),C=W(R,"BUTTON",{"data-svelte-h":!0}),qe(C)!=="svelte-y9choq"&&(C.textContent=U),R.forEach(m),this.h()},h(){J(i,"placeholder","property"),J(i,"type","text"),J(i,"name","editableInput"),J(h,"type","text"),J(h,"name","editableInput"),h.readOnly=!0,J(r,"class","text-center")},m(v,R){E(v,r,R),P(r,e),P(r,t),P(r,i),Ie(i,n[0].data.sequence),P(r,s),P(r,l),P(r,a),P(r,u),P(r,o),P(r,f),P(r,h),Ie(h,n[0].data.label),P(r,c),P(r,d),P(r,_),P(r,w);for(let T=0;T<y.length;T+=1)y[T]&&y[T].m(r,null);P(r,k),P(r,C),I||(A=[fe(i,"input",n[4]),fe(h,"input",n[5]),fe(C,"click",n[1])],I=!0)},p(v,R){if(R&1&&i.value!==v[0].data.sequence&&Ie(i,v[0].data.sequence),R&1&&h.value!==v[0].data.label&&Ie(h,v[0].data.label),R&1){b=Pe(v[0].data.user_properties);let T;for(T=0;T<b.length;T+=1){const B=ef(v,b,T);y[T]?y[T].p(B,R):(y[T]=lf(B),y[T].c(),y[T].m(r,k))}for(;T<y.length;T+=1)y[T].d(1);y.length=b.length}},d(v){v&&m(r),ot(y,v),I=!1,xe(A)}}}function rf(n){let r,e,t,i,s,l,a,u,o;function f(){n[14].call(r,n[18])}function h(){n[15].call(i,n[18])}return{c(){r=G("input"),e=ee(),t=G("br"),i=G("input"),s=ee(),l=G("br"),a=G("br"),this.h()},l(c){r=W(c,"INPUT",{placeholder:!0,type:!0,name:!0}),e=te(c),t=W(c,"BR",{}),i=W(c,"INPUT",{placeholder:!0,type:!0,name:!0}),s=te(c),l=W(c,"BR",{}),a=W(c,"BR",{}),this.h()},h(){J(r,"placeholder","property"),J(r,"type","text"),J(r,"name","editableInput"),J(i,"placeholder","value"),J(i,"type","text"),J(i,"name","editableInput")},m(c,d){E(c,r,d),Ie(r,n[0].data.user_properties[n[18]][0]),E(c,e,d),E(c,t,d),E(c,i,d),Ie(i,n[0].data.user_properties[n[18]][1]),E(c,s,d),E(c,l,d),E(c,a,d),u||(o=[fe(r,"input",f),fe(i,"input",h)],u=!0)},p(c,d){n=c,d&1&&r.value!==n[0].data.user_properties[n[18]][0]&&Ie(r,n[0].data.user_properties[n[18]][0]),d&1&&i.value!==n[0].data.user_properties[n[18]][1]&&Ie(i,n[0].data.user_properties[n[18]][1])},d(c){c&&(m(r),m(e),m(t),m(i),m(s),m(l),m(a)),u=!1,xe(o)}}}function nf(n){let r,e,t,i,s,l,a,u,o;function f(){n[10].call(r,n[18])}function h(){n[11].call(i,n[18])}return{c(){r=G("input"),e=ee(),t=G("br"),i=G("input"),s=ee(),l=G("br"),a=G("br"),this.h()},l(c){r=W(c,"INPUT",{placeholder:!0,type:!0,name:!0}),e=te(c),t=W(c,"BR",{}),i=W(c,"INPUT",{placeholder:!0,type:!0,name:!0}),s=te(c),l=W(c,"BR",{}),a=W(c,"BR",{}),this.h()},h(){J(r,"placeholder","property"),J(r,"type","text"),J(r,"name","editableInput"),J(i,"placeholder","value"),J(i,"type","text"),J(i,"name","editableInput")},m(c,d){E(c,r,d),Ie(r,n[0].data.user_properties[n[18]][0]),E(c,e,d),E(c,t,d),E(c,i,d),Ie(i,n[0].data.user_properties[n[18]][1]),E(c,s,d),E(c,l,d),E(c,a,d),u||(o=[fe(r,"input",f),fe(i,"input",h)],u=!0)},p(c,d){n=c,d&1&&r.value!==n[0].data.user_properties[n[18]][0]&&Ie(r,n[0].data.user_properties[n[18]][0]),d&1&&i.value!==n[0].data.user_properties[n[18]][1]&&Ie(i,n[0].data.user_properties[n[18]][1])},d(c){c&&(m(r),m(e),m(t),m(i),m(s),m(l),m(a)),u=!1,xe(o)}}}function lf(n){let r,e,t,i,s,l,a,u,o;function f(){n[6].call(r,n[18])}function h(){n[7].call(i,n[18])}return{c(){r=G("input"),e=ee(),t=G("br"),i=G("input"),s=ee(),l=G("br"),a=G("br"),this.h()},l(c){r=W(c,"INPUT",{placeholder:!0,type:!0,name:!0}),e=te(c),t=W(c,"BR",{}),i=W(c,"INPUT",{placeholder:!0,type:!0,name:!0}),s=te(c),l=W(c,"BR",{}),a=W(c,"BR",{}),this.h()},h(){J(r,"placeholder","property"),J(r,"type","text"),J(r,"name","editableInput"),J(i,"placeholder","value"),J(i,"type","text"),J(i,"name","editableInput")},m(c,d){E(c,r,d),Ie(r,n[0].data.user_properties[n[18]][0]),E(c,e,d),E(c,t,d),E(c,i,d),Ie(i,n[0].data.user_properties[n[18]][1]),E(c,s,d),E(c,l,d),E(c,a,d),u||(o=[fe(r,"input",f),fe(i,"input",h)],u=!0)},p(c,d){n=c,d&1&&r.value!==n[0].data.user_properties[n[18]][0]&&Ie(r,n[0].data.user_properties[n[18]][0]),d&1&&i.value!==n[0].data.user_properties[n[18]][1]&&Ie(i,n[0].data.user_properties[n[18]][1])},d(c){c&&(m(r),m(e),m(t),m(i),m(s),m(l),m(a)),u=!1,xe(o)}}}function Lm(n){let r,e,t='<code class="">node properties</code>',i,s,l,a=n[0]&&tf(n);const u=n[3].default,o=Dt(u,n,n[2],null);return{c(){r=G("div"),e=G("div"),e.innerHTML=t,i=ee(),a&&a.c(),s=ee(),o&&o.c(),this.h()},l(f){r=W(f,"DIV",{class:!0});var h=_e(r);e=W(h,"DIV",{class:!0,"data-svelte-h":!0}),qe(e)!=="svelte-txsgvp"&&(e.innerHTML=t),i=te(h),a&&a.l(h),s=te(h),o&&o.l(h),h.forEach(m),this.h()},h(){J(e,"class","text-center"),J(r,"class","side-panel svelte-17hpejv")},m(f,h){E(f,r,h),P(r,e),P(r,i),a&&a.m(r,null),P(r,s),o&&o.m(r,null),l=!0},p(f,[h]){f[0]?a?a.p(f,h):(a=tf(f),a.c(),a.m(r,s)):a&&(a.d(1),a=null),o&&o.p&&(!l||h&4)&&Et(o,u,f,f[2],l?Ct(u,f[2],h,null):Tt(f[2]),null)},i(f){l||(re(o,f),l=!0)},o(f){le(o,f),l=!1},d(f){f&&m(r),a&&a.d(),o&&o.d(f)}}}function Pm(n,r,e){let t;Me(n,Ue,I=>e(0,t=I));let{$$slots:i={},$$scope:s}=r;function l(){t.data.user_properties.push(["",""]),Ue.set(t)}function a(){t.data.sequence=this.value,Ue.set(t)}function u(){t.data.label=this.value,Ue.set(t)}function o(I){t.data.user_properties[I][0]=this.value,Ue.set(t)}function f(I){t.data.user_properties[I][1]=this.value,Ue.set(t)}function h(){t.data.weakness=this.value,Ue.set(t)}function c(){t.data.label=this.value,Ue.set(t)}function d(I){t.data.user_properties[I][0]=this.value,Ue.set(t)}function _(I){t.data.user_properties[I][1]=this.value,Ue.set(t)}function w(){t.data.sequence=this.value,Ue.set(t)}function k(){t.data.label=this.value,Ue.set(t)}function C(I){t.data.user_properties[I][0]=this.value,Ue.set(t)}function U(I){t.data.user_properties[I][1]=this.value,Ue.set(t)}return n.$$set=I=>{"$$scope"in I&&e(2,s=I.$$scope)},[t,l,s,i,a,u,o,f,h,c,d,_,w,k,C,U]}class qm extends it{constructor(r){super(),lt(this,r,Pm,Lm,Ve,{})}}function sf(n,r,e){const t=n.slice();return t[9]=r[e],t}function af(n){let r,e=n[9]["rdfs:label"]+"",t,i,s,l,a;function u(...f){return n[7](n[9],...f)}function o(...f){return n[8](n[9],...f)}return{c(){r=G("div"),t=M(e),i=ee(),this.h()},l(f){r=W(f,"DIV",{class:!0,title:!0,tabindex:!0,role:!0});var h=_e(r);t=j(h,e),i=te(h),h.forEach(m),this.h()},h(){J(r,"class","select-technique"),J(r,"title",s=n[9]["d3f:definition"]),J(r,"tabindex","0"),J(r,"role","button")},m(f,h){E(f,r,h),P(r,t),P(r,i),l||(a=[fe(r,"click",At(bn(u))),fe(r,"keydown",At(o))],l=!0)},p(f,h){n=f,h&8&&e!==(e=n[9]["rdfs:label"]+"")&&ce(t,e),h&8&&s!==(s=n[9]["d3f:definition"])&&J(r,"title",s)},d(f){f&&m(r),l=!1,xe(a)}}}function Um(n){let r,e=Pe(n[3]),t=[];for(let i=0;i<e.length;i+=1)t[i]=af(sf(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=pe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=pe()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);E(i,r,s)},p(i,[s]){if(s&12){e=Pe(i[3]);let l;for(l=0;l<e.length;l+=1){const a=sf(i,e,l);t[l]?t[l].p(a,s):(t[l]=af(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},i:Ne,o:Ne,d(i){i&&m(r),ot(t,i)}}}function Mm(n,r,e){let t,i=Ne,s=()=>(i(),i=Pr(f,k=>e(5,t=k)),f),l,a=Ne,u=()=>(a(),a=Pr(o,k=>e(6,l=k)),o);n.$$.on_destroy.push(()=>i()),n.$$.on_destroy.push(()=>a());let{list:o}=r;u();let{filter_value_store:f}=r;s();let{select_item:h}=r,{regex_search_keys:c=["rdfs:label","@id"]}=r,d=[];const _=(k,C)=>h(C,k),w=(k,C)=>Un(C,h,k);return n.$$set=k=>{"list"in k&&u(e(0,o=k.list)),"filter_value_store"in k&&s(e(1,f=k.filter_value_store)),"select_item"in k&&e(2,h=k.select_item),"regex_search_keys"in k&&e(4,c=k.regex_search_keys)},n.$$.update=()=>{n.$$.dirty&112&&e(3,d=Ip(l,t,c))},[o,f,h,d,c,t,l,_,w]}class jm extends it{constructor(r){super(),lt(this,r,Mm,Um,Ve,{list:0,filter_value_store:1,select_item:2,regex_search_keys:4})}}function uf(n,r,e){const t=n.slice();return t[12]=r[e],t}function of(n,r,e){const t=n.slice();return t[15]=r[e],t}function ff(n){let r,e=Pe(n[12].children),t=[];for(let i=0;i<e.length;i+=1)t[i]=cf(of(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=pe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=pe()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);E(i,r,s)},p(i,s){if(s&20){e=Pe(i[12].children);let l;for(l=0;l<e.length;l+=1){const a=of(i,e,l);t[l]?t[l].p(a,s):(t[l]=cf(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),ot(t,i)}}}function cf(n){let r,e=n[15]["rdfs:label"]+"",t,i,s,l,a;function u(...f){return n[10](n[15],...f)}function o(...f){return n[11](n[15],...f)}return{c(){r=G("div"),t=M(e),i=ee(),this.h()},l(f){r=W(f,"DIV",{class:!0,title:!0,tabindex:!0,role:!0});var h=_e(r);t=j(h,e),i=te(h),h.forEach(m),this.h()},h(){J(r,"class","select-technique"),J(r,"title",s=n[15]["d3f:definition"]),J(r,"tabindex","0"),J(r,"role","button")},m(f,h){E(f,r,h),P(r,t),P(r,i),l||(a=[fe(r,"click",At(bn(u))),fe(r,"keydown",At(o))],l=!0)},p(f,h){n=f,h&16&&e!==(e=n[15]["rdfs:label"]+"")&&ce(t,e),h&16&&s!==(s=n[15]["d3f:definition"])&&J(r,"title",s)},d(f){f&&m(r),l=!1,xe(a)}}}function df(n){let r,e,t=n[12]["rdfs:label"]+"",i,s,l,a,u,o,f,h=(n[3]===n[12]["@id"]||n[5])&&ff(n);return{c(){r=G("details"),e=G("summary"),i=M(t),l=ee(),h&&h.c(),a=ee(),this.h()},l(c){r=W(c,"DETAILS",{});var d=_e(r);e=W(d,"SUMMARY",{id:!0});var _=_e(e);i=j(_,t),_.forEach(m),l=te(d),h&&h.l(d),a=te(d),d.forEach(m),this.h()},h(){J(e,"id",s=n[12]["@id"]),r.open=u=n[3]===n[12]["@id"]||n[5]},m(c,d){E(c,r,d),P(r,e),P(e,i),P(r,l),h&&h.m(r,null),P(r,a),o||(f=fe(e,"click",At(bn(n[6]))),o=!0)},p(c,d){d&16&&t!==(t=c[12]["rdfs:label"]+"")&&ce(i,t),d&16&&s!==(s=c[12]["@id"])&&J(e,"id",s),c[3]===c[12]["@id"]||c[5]?h?h.p(c,d):(h=ff(c),h.c(),h.m(r,a)):h&&(h.d(1),h=null),d&56&&u!==(u=c[3]===c[12]["@id"]||c[5])&&(r.open=u)},d(c){c&&m(r),h&&h.d(),o=!1,f()}}}function Vm(n){let r,e=Pe(n[4]),t=[];for(let i=0;i<e.length;i+=1)t[i]=df(uf(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=pe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=pe()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);E(i,r,s)},p(i,[s]){if(s&124){e=Pe(i[4]);let l;for(l=0;l<e.length;l+=1){const a=uf(i,e,l);t[l]?t[l].p(a,s):(t[l]=df(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},i:Ne,o:Ne,d(i){i&&m(r),ot(t,i)}}}function Hm(n,r,e){let t,i,s=Ne,l=()=>(s(),s=Pr(h,I=>e(8,i=I)),h),a,u=Ne,o=()=>(u(),u=Pr(f,I=>e(9,a=I)),f);n.$$.on_destroy.push(()=>s()),n.$$.on_destroy.push(()=>u());let{list:f}=r;o();let{filter_value_store:h}=r;l();let{select_item:c}=r,{regex_search_keys:d=["d3f:definition","rdfs:label","@id","d3f:d3fend-id"]}=r,_=null,w=[];function k(I){const{id:A}=I.target;_===A?e(3,_=null):e(3,_=A)}const C=(I,A)=>c(A,I),U=(I,A)=>Un(A,c,I);return n.$$set=I=>{"list"in I&&o(e(0,f=I.list)),"filter_value_store"in I&&l(e(1,h=I.filter_value_store)),"select_item"in I&&e(2,c=I.select_item),"regex_search_keys"in I&&e(7,d=I.regex_search_keys)},n.$$.update=()=>{n.$$.dirty&896&&e(4,w=Rp(a,i,d)),n.$$.dirty&256&&e(5,t=!!i)},[f,h,c,_,w,t,k,d,i,a,C,U]}class zm extends it{constructor(r){super(),lt(this,r,Hm,Vm,Ve,{list:0,filter_value_store:1,select_item:2,regex_search_keys:7})}}function hf(n,r,e){const t=n.slice();return t[16]=r[e],t}function Xm(n){let r,e,t,i;return{c(){r=G("div"),e=M(n[6]),this.h()},l(s){r=W(s,"DIV",{id:!0,class:!0,role:!0,tabindex:!0});var l=_e(r);e=j(l,n[6]),l.forEach(m),this.h()},h(){var s;J(r,"id","selectable-technique"),J(r,"class","no-arrow svelte-1t0ebq3"),J(r,"role","tree"),J(r,"tabindex","0"),Ir(r,"current-selected",((s=n[8])==null?void 0:s["@id"])===n[0]["@id"])},m(s,l){E(s,r,l),P(r,e),t||(i=[fe(r,"click",At(bn(n[13]))),fe(r,"keydown",At(bn(n[14])))],t=!0)},p(s,l){var a;l&64&&ce(e,s[6]),l&257&&Ir(r,"current-selected",((a=s[8])==null?void 0:a["@id"])===s[0]["@id"])},i:Ne,o:Ne,d(s){s&&m(r),t=!1,xe(i)}}}function Gm(n){let r,e,t="▶",i,s,l,a,u,o,f,h,c=n[4]&&_f(n);return{c(){r=G("span"),e=G("span"),e.textContent=t,i=ee(),s=G("span"),l=M(n[6]),a=ee(),c&&c.c(),u=pe(),this.h()},l(d){r=W(d,"SPAN",{class:!0,role:!0,tabindex:!0});var _=_e(r);e=W(_,"SPAN",{class:!0,"data-svelte-h":!0}),qe(e)!=="svelte-1xn7s3"&&(e.textContent=t),i=te(_),s=W(_,"SPAN",{id:!0,class:!0});var w=_e(s);l=j(w,n[6]),w.forEach(m),_.forEach(m),a=te(d),c&&c.l(d),u=pe(),this.h()},h(){var d;J(e,"class","arrow svelte-1t0ebq3"),Ir(e,"arrowDown",n[5]),J(s,"id","parent-selectable-technique"),J(s,"class","label svelte-1t0ebq3"),J(r,"class","parent-technique svelte-1t0ebq3"),J(r,"role","tree"),J(r,"tabindex","0"),Ir(r,"current-selected",((d=n[8])==null?void 0:d["@id"])===n[0]["@id"])},m(d,_){E(d,r,_),P(r,e),P(r,i),P(r,s),P(s,l),E(d,a,_),c&&c.m(d,_),E(d,u,_),o=!0,f||(h=[fe(r,"click",At(bn(n[11]))),fe(r,"keydown",At(bn(n[12])))],f=!0)},p(d,_){var w;(!o||_&32)&&Ir(e,"arrowDown",d[5]),(!o||_&64)&&ce(l,d[6]),(!o||_&257)&&Ir(r,"current-selected",((w=d[8])==null?void 0:w["@id"])===d[0]["@id"]),d[4]?c?(c.p(d,_),_&16&&re(c,1)):(c=_f(d),c.c(),re(c,1),c.m(u.parentNode,u)):c&&(Xe(),le(c,1,1,()=>{c=null}),Ge())},i(d){o||(re(c),o=!0)},o(d){le(c),o=!1},d(d){d&&(m(r),m(a),m(u)),c&&c.d(d),f=!1,xe(h)}}}function _f(n){let r,e,t=Pe(n[7]),i=[];for(let l=0;l<t.length;l+=1)i[l]=pf(hf(n,t,l));const s=l=>le(i[l],1,1,()=>{i[l]=null});return{c(){for(let l=0;l<i.length;l+=1)i[l].c();r=pe()},l(l){for(let a=0;a<i.length;a+=1)i[a].l(l);r=pe()},m(l,a){for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(l,a);E(l,r,a),e=!0},p(l,a){if(a&134){t=Pe(l[7]);let u;for(u=0;u<t.length;u+=1){const o=hf(l,t,u);i[u]?(i[u].p(o,a),re(i[u],1)):(i[u]=pf(o),i[u].c(),re(i[u],1),i[u].m(r.parentNode,r))}for(Xe(),u=t.length;u<i.length;u+=1)s(u);Ge()}},i(l){if(!e){for(let a=0;a<t.length;a+=1)re(i[a]);e=!0}},o(l){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)le(i[a]);e=!1},d(l){l&&m(r),ot(i,l)}}}function pf(n){let r,e;return r=new lh({props:{tree:n[16],expanded_nodes:n[1],selected_node:n[2],first_node:!1}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i&128&&(s.tree=t[16]),i&2&&(s.expanded_nodes=t[1]),i&4&&(s.selected_node=t[2]),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Wm(n){let r,e,t,i,s;const l=[Gm,Xm],a=[];function u(o,f){return o[7]?0:1}return t=u(n),i=a[t]=l[t](n),{c(){r=G("ul"),e=G("li"),i.c(),this.h()},l(o){r=W(o,"UL",{style:!0,class:!0});var f=_e(r);e=W(f,"LI",{});var h=_e(e);i.l(h),h.forEach(m),f.forEach(m),this.h()},h(){Ze(r,"--first-node",n[3]?"0rem":"0.6rem"),J(r,"class","svelte-1t0ebq3")},m(o,f){E(o,r,f),P(r,e),a[t].m(e,null),s=!0},p(o,[f]){let h=t;t=u(o),t===h?a[t].p(o,f):(Xe(),le(a[h],1,1,()=>{a[h]=null}),Ge(),i=a[t],i?i.p(o,f):(i=a[t]=l[t](o),i.c()),re(i,1),i.m(e,null)),(!s||f&8)&&Ze(r,"--first-node",o[3]?"0rem":"0.6rem")},i(o){s||(re(i),s=!0)},o(o){le(i),s=!1},d(o){o&&m(r),a[t].d()}}}function Qm(n,r,e){let t,i,s,l,a=Ne,u=()=>(a(),a=Pr(_,v=>e(8,l=v)),_),o,f=Ne,h=()=>(f(),f=Pr(d,v=>e(15,o=v)),d);n.$$.on_destroy.push(()=>a()),n.$$.on_destroy.push(()=>f());let{tree:c}=r,{expanded_nodes:d}=r;h();let{selected_node:_}=r;u();let{first_node:w=!0}=r,k=o[t]||!1;function C(v,R){e(4,k=!k),Ke(_,l=R,l)}function U(v,R){Ke(_,l=R,l)}const I=v=>C(v,c),A=v=>Un(v,C,c),b=v=>U(v,c),y=v=>Un(v,U,c);return n.$$set=v=>{"tree"in v&&e(0,c=v.tree),"expanded_nodes"in v&&h(e(1,d=v.expanded_nodes)),"selected_node"in v&&u(e(2,_=v.selected_node)),"first_node"in v&&e(3,w=v.first_node)},n.$$.update=()=>{var v;n.$$.dirty&1&&e(6,t=((v=c==null?void 0:c["rdfs:label"])==null?void 0:v[0])??c["@id"]),n.$$.dirty&1&&e(7,i=c.children),n.$$.dirty&16&&e(5,s=k)},[c,d,_,w,k,s,t,i,l,C,U,I,A,b,y]}class lh extends it{constructor(r){super(),lt(this,r,Qm,Wm,Ve,{tree:0,expanded_nodes:1,selected_node:2,first_node:3})}}function gf(n,r,e){const t=n.slice();return t[10]=r[e],t}function mf(n){let r,e;return r=new lh({props:{tree:n[10],expanded_nodes:n[4],selected_node:n[5],select_item:n[2]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i&8&&(s.tree=t[10]),i&4&&(s.select_item=t[2]),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Ym(n){let r,e,t=Pe(n[3]),i=[];for(let l=0;l<t.length;l+=1)i[l]=mf(gf(n,t,l));const s=l=>le(i[l],1,1,()=>{i[l]=null});return{c(){for(let l=0;l<i.length;l+=1)i[l].c();r=pe()},l(l){for(let a=0;a<i.length;a+=1)i[a].l(l);r=pe()},m(l,a){for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(l,a);E(l,r,a),e=!0},p(l,[a]){if(a&60){t=Pe(l[3]);let u;for(u=0;u<t.length;u+=1){const o=gf(l,t,u);i[u]?(i[u].p(o,a),re(i[u],1)):(i[u]=mf(o),i[u].c(),re(i[u],1),i[u].m(r.parentNode,r))}for(Xe(),u=t.length;u<i.length;u+=1)s(u);Ge()}},i(l){if(!e){for(let a=0;a<t.length;a+=1)re(i[a]);e=!0}},o(l){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)le(i[a]);e=!1},d(l){l&&m(r),ot(i,l)}}}function xm(n,r,e){let t,i=Ne,s=()=>(i(),i=Pr(h,C=>e(7,t=C)),h),l,a=Ne,u=()=>(a(),a=Pr(f,C=>e(8,l=C)),f),o;n.$$.on_destroy.push(()=>i()),n.$$.on_destroy.push(()=>a());let{list:f}=r;u();let{filter_value_store:h}=r;s();let{select_item:c}=r,{regex_search_keys:d=["rdfs:label","@id"]}=r,_=[];const w=Wt({}),k=Wt(null);return Me(n,k,C=>e(9,o=C)),us(()=>{o&&c(null,o,"d3f_property")}),n.$$set=C=>{"list"in C&&u(e(0,f=C.list)),"filter_value_store"in C&&s(e(1,h=C.filter_value_store)),"select_item"in C&&e(2,c=C.select_item),"regex_search_keys"in C&&e(6,d=C.regex_search_keys)},n.$$.update=()=>{n.$$.dirty&448&&e(3,_=Op(l.associated,t,d))},[f,h,c,_,w,k,d,t,l]}class Jm extends it{constructor(r){super(),lt(this,r,xm,Ym,Ve,{list:0,filter_value_store:1,select_item:2,regex_search_keys:6})}}const Zm=n=>({}),vf=n=>({R:n[6],filter_value_store:n[4],select_item:n[9]});function bf(n){let r,e,t,i,s,l,a;const u=n[18].default,o=Dt(u,n,n[17],vf);return{c(){r=G("ul"),e=G("input"),t=ee(),o&&o.c(),this.h()},l(f){r=W(f,"UL",{id:!0,class:!0});var h=_e(r);e=W(h,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0,class:!0}),t=te(h),o&&o.l(h),h.forEach(m),this.h()},h(){J(e,"type","text"),J(e,"id","filter"),J(e,"name","filter"),J(e,"placeholder","Filter / Save"),J(e,"class","svelte-134tvrp"),J(r,"id","d3fend-container"),J(r,"class","dropdown-menu svelte-134tvrp")},m(f,h){E(f,r,h),P(r,e),P(r,t),o&&o.m(r,null),s=!0,l||(a=[ba(Cp.call(null,e)),fe(e,"click",At(n[19])),fe(e,"keyup",At(n[20])),fe(e,"keydown",At(n[21])),ba(Np.call(null,r)),fe(r,"outsideclick",n[7])],l=!0)},p(f,h){o&&o.p&&(!s||h&131072)&&Et(o,u,f,f[17],s?Ct(u,f[17],h,Zm):Tt(f[17]),vf)},i(f){s||(re(o,f),f&&Ql(()=>{s&&(i||(i=Da(r,Fa,{delay:50,duration:200,axis:"y"},!0)),i.run(1))}),s=!0)},o(f){le(o,f),f&&(i||(i=Da(r,Fa,{delay:50,duration:200,axis:"y"},!1)),i.run(0)),s=!1},d(f){f&&m(r),o&&o.d(f),f&&i&&i.end(),l=!1,xe(a)}}}function Km(n){let r,e,t,i,s,l,a,u,o,f,h=n[2]&&bf(n);return{c(){r=G("div"),e=G("div"),t=G("div"),i=G("span"),s=M(n[1]),l=ee(),h&&h.c(),this.h()},l(c){r=W(c,"DIV",{class:!0,style:!0});var d=_e(r);e=W(d,"DIV",{class:!0,role:!0,tabindex:!0});var _=_e(e);t=W(_,"DIV",{class:!0});var w=_e(t);i=W(w,"SPAN",{class:!0});var k=_e(i);s=j(k,n[1]),k.forEach(m),w.forEach(m),l=te(_),h&&h.l(_),_.forEach(m),d.forEach(m),this.h()},h(){J(i,"class","selected svelte-134tvrp"),J(t,"class","select autocomplete-dropdown svelte-134tvrp"),J(e,"class",a="dropdown "+(n[2]?"active":"")+" svelte-134tvrp"),J(e,"role","button"),J(e,"tabindex","0"),J(r,"class","container svelte-134tvrp"),Ze(r,"--input-color",n[0])},m(c,d){E(c,r,d),P(r,e),P(e,t),P(t,i),P(i,s),P(e,l),h&&h.m(e,null),u=!0,o||(f=[fe(e,"click",n[8]),fe(e,"keydown",n[22])],o=!0)},p(c,[d]){(!u||d&2)&&ce(s,c[1]),c[2]?h?(h.p(c,d),d&4&&re(h,1)):(h=bf(c),h.c(),re(h,1),h.m(e,null)):h&&(Xe(),le(h,1,1,()=>{h=null}),Ge()),(!u||d&4&&a!==(a="dropdown "+(c[2]?"active":"")+" svelte-134tvrp"))&&J(e,"class",a),(!u||d&1)&&Ze(r,"--input-color",c[0])},i(c){u||(re(h),u=!0)},o(c){le(h),u=!1},d(c){c&&m(r),h&&h.d(),o=!1,xe(f)}}}function $m(n,r,e){let t,i,s,l,{$$slots:a={},$$scope:u}=r,{node_id:o}=r,{element_id:f}=r,{input_color:h="white"}=r,{place_holder:c="< d3fend class >"}=r,{flow_store_hook:d=qr}=r,{data_save_key:_="d3f_class"}=r;const w=Wt(!1);Me(n,w,F=>e(2,l=F));const k=Wt(null);Me(n,k,F=>e(24,i=F));const C=d();Me(n,C,F=>e(25,s=F));const U={ItemTree:zm,ItemList:jm,ItemProperty:Jm};let I;us(()=>{Ke(k,i="",i)});function A(){Ke(w,l=!1,l),Ke(k,i="",i)}function b(F){l?A():Ke(w,l=!0,l)}function y(F,N,H="d3f_class"){let O=N["rdfs:label"];Array.isArray(N["rdfs:label"])&&(O=N["rdfs:label"][0]),s.forEach(ne=>{ne.id===o&&(ne.data=Object.assign(Object.assign({},ne.data),{[H]:N["@id"],label:O}))}),C.set(s),A()}function v(F){clearTimeout(I),I=setTimeout(()=>{Ke(k,i=F.target.value,i)},400)}function R(F){const N=F.target.value;y(F,{"rdfs:label":N,"@id":N},_)}function T(F){br.call(this,n,F)}const B=F=>v(F),D=F=>Un(F,R),L=F=>Un(F,b);return n.$$set=F=>{"node_id"in F&&e(12,o=F.node_id),"element_id"in F&&e(13,f=F.element_id),"input_color"in F&&e(0,h=F.input_color),"place_holder"in F&&e(14,c=F.place_holder),"flow_store_hook"in F&&e(15,d=F.flow_store_hook),"data_save_key"in F&&e(16,_=F.data_save_key),"$$scope"in F&&e(17,u=F.$$scope)},n.$$.update=()=>{n.$$.dirty&24576&&e(1,t=f||c)},[h,t,l,w,k,C,U,A,b,y,v,R,o,f,c,d,_,u,a,T,B,D,L]}class Yn extends it{constructor(r){super(),lt(this,r,$m,Km,Ve,{node_id:12,element_id:13,input_color:0,place_holder:14,flow_store_hook:15,data_save_key:16})}}function wf(n,r,e){const t=n.slice();return t[32]=r[e],t[33]=r,t[34]=e,t}function yf(n){let r,e;return r=new nt({props:{type:"target",class:"customHandle",position:Ye.Left,id:"target",style:n[16](),isConnectableStart:!1,isConnectable:n[1]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i[0]&2&&(s.isConnectable=t[1]),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function kf(n){let r=n[7],e,t,i=Df(n);return{c(){i.c(),e=pe()},l(s){i.l(s),e=pe()},m(s,l){i.m(s,l),E(s,e,l),t=!0},p(s,l){l[0]&128&&Ve(r,r=s[7])?(Xe(),le(i,1,1,Ne),Ge(),i=Df(s),i.c(),re(i,1),i.m(e.parentNode,e)):i.p(s,l)},i(s){t||(re(i),t=!0)},o(s){le(i),t=!1},d(s){s&&m(e),i.d(s)}}}function Df(n){let r,e,t,i,s,l,a,u;return r=new nt({props:{type:"source",position:Ye.Top,id:"source",style:n[17](),isConnectable:n[1]}}),t=new nt({props:{type:"source",position:Ye.Left,id:"source",style:n[17](),isConnectable:n[1]}}),s=new nt({props:{type:"source",position:Ye.Right,id:"source",style:n[17](),isConnectable:n[1]}}),a=new nt({props:{type:"source",position:Ye.Bottom,id:"source",style:n[17](),isConnectable:n[1]}}),{c(){ve(r.$$.fragment),e=ee(),ve(t.$$.fragment),i=ee(),ve(s.$$.fragment),l=ee(),ve(a.$$.fragment)},l(o){be(r.$$.fragment,o),e=te(o),be(t.$$.fragment,o),i=te(o),be(s.$$.fragment,o),l=te(o),be(a.$$.fragment,o)},m(o,f){we(r,o,f),E(o,e,f),we(t,o,f),E(o,i,f),we(s,o,f),E(o,l,f),we(a,o,f),u=!0},p(o,f){const h={};f[0]&2&&(h.isConnectable=o[1]),r.$set(h);const c={};f[0]&2&&(c.isConnectable=o[1]),t.$set(c);const d={};f[0]&2&&(d.isConnectable=o[1]),s.$set(d);const _={};f[0]&2&&(_.isConnectable=o[1]),a.$set(_)},i(o){u||(re(r.$$.fragment,o),re(t.$$.fragment,o),re(s.$$.fragment,o),re(a.$$.fragment,o),u=!0)},o(o){le(r.$$.fragment,o),le(t.$$.fragment,o),le(s.$$.fragment,o),le(a.$$.fragment,o),u=!1},d(o){o&&(m(e),m(i),m(l)),ye(r,o),ye(t,o),ye(s,o),ye(a,o)}}}function ev(n){let r,e;return r=new n[35].ItemList({props:{list:Fc,filter_value_store:n[36],select_item:n[37]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i[1]&32&&(s.filter_value_store=t[36]),i[1]&64&&(s.select_item=t[37]),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Ef(n){let r,e=Pe(n[0].user_properties),t=[];for(let i=0;i<e.length;i+=1)t[i]=Tf(wf(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=pe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=pe()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);E(i,r,s)},p(i,s){if(s[0]&801){e=Pe(i[0].user_properties);let l;for(l=0;l<e.length;l+=1){const a=wf(i,e,l);t[l]?t[l].p(a,s):(t[l]=Tf(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),ot(t,i)}}}function Tf(n){let r,e,t,i,s,l,a,u,o;function f(..._){return n[26](n[34],..._)}function h(){n[27].call(t,n[34])}function c(..._){return n[28](n[34],..._)}function d(){n[29].call(l,n[34])}return{c(){r=G("div"),e=G("div"),t=G("input"),i=ee(),s=G("div"),l=G("input"),a=ee(),this.h()},l(_){r=W(_,"DIV",{class:!0});var w=_e(r);e=W(w,"DIV",{class:!0});var k=_e(e);t=W(k,"INPUT",{placeholder:!0}),k.forEach(m),i=te(w),s=W(w,"DIV",{class:!0});var C=_e(s);l=W(C,"INPUT",{placeholder:!0}),C.forEach(m),a=te(w),w.forEach(m),this.h()},h(){J(t,"placeholder","property"),J(e,"class","user-property flex-column"),J(l,"placeholder","value"),J(s,"class","user-value flex-column flex-grow-3"),J(r,"class","user-properties flex")},m(_,w){E(_,r,w),P(r,e),P(e,t),Ie(t,n[9][n[34]][0]),P(r,i),P(r,s),P(s,l),Ie(l,n[8][n[34]][1]),P(r,a),u||(o=[fe(t,"input",f),fe(t,"input",h),fe(l,"input",c),fe(l,"input",d)],u=!0)},p(_,w){n=_,w[0]&512&&t.value!==n[9][n[34]][0]&&Ie(t,n[9][n[34]][0]),w[0]&256&&l.value!==n[8][n[34]][1]&&Ie(l,n[8][n[34]][1])},d(_){_&&m(r),u=!1,xe(o)}}}function tv(n){let r=n[4].inProgress,e,t,i,s,l,a,u,o,f,h,c,d,_,w,k,C,U,I,A,b,y,v,R="+",T,B,D,L=yf(n),F=!n[6]&&kf(n);l=new rn({props:{isVisible:n[2]}}),_=new Yn({props:{node_id:n[3],element_id:n[0].d3f_class,input_color:"#ffc3c7",$$slots:{default:[ev,({R:H,filter_value_store:O,select_item:ne})=>({35:H,36:O,37:ne}),({R:H,filter_value_store:O,select_item:ne})=>[0,(H?16:0)|(O?32:0)|(ne?64:0)]]},$$scope:{ctx:n}}});let N=n[0].user_properties&&Ef(n);return{c(){L.c(),e=ee(),t=G("div"),F&&F.c(),i=ee(),s=G("div"),ve(l.$$.fragment),a=ee(),u=G("i"),o=M(`Attack Action
        `),f=G("input"),h=ee(),c=G("br"),d=ee(),ve(_.$$.fragment),w=ee(),k=G("div"),C=G("input"),I=ee(),A=G("br"),b=ee(),N&&N.c(),y=ee(),v=G("button"),v.textContent=R,this.h()},l(H){L.l(H),e=te(H),t=W(H,"DIV",{class:!0});var O=_e(t);F&&F.l(O),i=te(O),s=W(O,"DIV",{class:!0});var ne=_e(s);be(l.$$.fragment,ne),a=te(ne),u=W(ne,"I",{});var Q=_e(u);o=j(Q,`Attack Action
        `),f=W(Q,"INPUT",{class:!0,type:!0,style:!0}),Q.forEach(m),h=te(ne),c=W(ne,"BR",{}),d=te(ne),be(_.$$.fragment,ne),w=te(ne),k=W(ne,"DIV",{});var z=_e(k);C=W(z,"INPUT",{class:!0,type:!0,style:!0}),z.forEach(m),I=te(ne),A=W(ne,"BR",{}),b=te(ne),N&&N.l(ne),y=te(ne),v=W(ne,"BUTTON",{"data-svelte-h":!0}),qe(v)!=="svelte-y9choq"&&(v.textContent=R),ne.forEach(m),O.forEach(m),this.h()},h(){J(f,"class","nodrag sequence"),J(f,"type","text"),Ze(f,"background","#ffc3c7"),J(C,"class","nodrag"),J(C,"type","text"),Ze(C,"text-align","center"),Ze(C,"background","#ffc3c7"),Ze(C,"font-weight","bold"),C.value=U=n[0].label||" < label >",J(s,"class","attack-node node-inner svelte-pkj1to"),J(t,"class","attack-node node svelte-pkj1to")},m(H,O){L.m(H,O),E(H,e,O),E(H,t,O),F&&F.m(t,null),P(t,i),P(t,s),we(l,s,null),P(s,a),P(s,u),P(u,o),P(u,f),Ie(f,n[10]),P(s,h),P(s,c),P(s,d),we(_,s,null),P(s,w),P(s,k),P(k,C),P(s,I),P(s,A),P(s,b),N&&N.m(s,null),P(s,y),P(s,v),T=!0,B||(D=[fe(f,"input",n[23]),fe(f,"input",n[24]),fe(C,"input",n[25]),fe(v,"click",n[11]),fe(t,"click",n[12]),fe(t,"mouseenter",n[14]),fe(t,"mouseleave",n[15])],B=!0)},p(H,O){O[0]&16&&Ve(r,r=H[4].inProgress)?(Xe(),le(L,1,1,Ne),Ge(),L=yf(H),L.c(),re(L,1),L.m(e.parentNode,e)):L.p(H,O),H[6]?F&&(Xe(),le(F,1,1,()=>{F=null}),Ge()):F?(F.p(H,O),O[0]&64&&re(F,1)):(F=kf(H),F.c(),re(F,1),F.m(t,i));const ne={};O[0]&4&&(ne.isVisible=H[2]),l.$set(ne),O[0]&1024&&f.value!==H[10]&&Ie(f,H[10]);const Q={};O[0]&8&&(Q.node_id=H[3]),O[0]&1&&(Q.element_id=H[0].d3f_class),O[1]&224&&(Q.$$scope={dirty:O,ctx:H}),_.$set(Q),(!T||O[0]&1&&U!==(U=H[0].label||" < label >")&&C.value!==U)&&(C.value=U),H[0].user_properties?N?N.p(H,O):(N=Ef(H),N.c(),N.m(s,y)):N&&(N.d(1),N=null)},i(H){T||(re(L),re(F),re(l.$$.fragment,H),re(_.$$.fragment,H),T=!0)},o(H){le(L),le(F),le(l.$$.fragment,H),le(_.$$.fragment,H),T=!1},d(H){H&&(m(e),m(t)),L.d(H),F&&F.d(),ye(l),ye(_),N&&N.d(),B=!1,xe(D)}}}function rv(n,r,e){let t,i,s,l,a,u;Me(n,rr,Q=>e(31,a=Q)),Me(n,Ue,Q=>e(5,u=Q));var o,f,h,c,d;let{data:_}=r,{isConnectable:w}=r,{selected:k=void 0}=r;_.user_properties=[];let{id:C}=r;function U(){I(),_.user_properties.push(["",""])}function I(){for(let Q=0;Q<a.length;Q++)a[Q].data==_&&Ke(Ue,u=a[Q],u)}const A=Qr();Me(n,A,Q=>e(4,l=Q));let b=!1,y=!1;function v(){e(7,y=!0)}function R(){e(7,y=!1)}function T(){return l.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function B(){return y?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const D=Q=>{e(0,_.sequence=Q.currentTarget.value,_),Ke(Ue,u.data.sequence=_.sequence,u)};function L(){t=this.value,e(10,t),e(0,_),e(5,u),e(19,f)}const F=Q=>{e(0,_.label=Q.currentTarget.value,_)},N=(Q,z)=>{e(0,_.user_properties[Q][0]=z.currentTarget.value,_),Ke(Ue,u.data.user_properties[Q][0]=z.currentTarget.value,u)};function H(Q){i[Q][0]=this.value,e(9,i),e(0,_),e(5,u),e(20,h)}const O=(Q,z)=>{e(0,_.user_properties[Q][1]=z.currentTarget.value,_),Ke(Ue,u.data.user_properties[Q][1]=z.currentTarget.value,u)};function ne(Q){s[Q][1]=this.value,e(8,s),e(0,_),e(5,u),e(21,c)}return n.$$set=Q=>{"data"in Q&&e(0,_=Q.data),"isConnectable"in Q&&e(1,w=Q.isConnectable),"selected"in Q&&e(2,k=Q.selected),"id"in Q&&e(3,C=Q.id)},n.$$.update=()=>{n.$$.dirty[0]&262177&&_!=null&&_.label,n.$$.dirty[0]&524321&&e(10,t=(_==null?void 0:_.sequence)||"#"),n.$$.dirty[0]&1048609&&e(9,i=(_==null?void 0:_.user_properties)||(e(20,h=u==null?void 0:u.data)===null||h===void 0?void 0:h.user_properties)||"< Property >"),n.$$.dirty[0]&2097185&&e(8,s=(_==null?void 0:_.user_properties)||(e(21,c=u==null?void 0:u.data)===null||c===void 0?void 0:c.user_properties)||"< Value >"),n.$$.dirty[0]&4194328&&e(6,b=(e(22,d=l.toHandle)===null||d===void 0?void 0:d.nodeId)==C)},[_,w,k,C,l,u,b,y,s,i,t,U,I,A,v,R,T,B,o,f,h,c,d,D,L,F,N,H,O,ne]}class nv extends it{constructor(r){super(),lt(this,r,rv,tv,Ve,{data:0,isConnectable:1,selected:2,id:3},null,[-1,-1])}}function Cf(n,r,e){const t=n.slice();return t[29]=r[e],t[30]=r,t[31]=e,t}function Nf(n){let r,e;return r=new nt({props:{type:"target",class:"customHandle",position:Ye.Left,id:"target",style:n[16](),isConnectableStart:!1,isConnectable:n[1]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i[0]&2&&(s.isConnectable=t[1]),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Af(n){let r=n[7],e,t,i=Sf(n);return{c(){i.c(),e=pe()},l(s){i.l(s),e=pe()},m(s,l){i.m(s,l),E(s,e,l),t=!0},p(s,l){l[0]&128&&Ve(r,r=s[7])?(Xe(),le(i,1,1,Ne),Ge(),i=Sf(s),i.c(),re(i,1),i.m(e.parentNode,e)):i.p(s,l)},i(s){t||(re(i),t=!0)},o(s){le(i),t=!1},d(s){s&&m(e),i.d(s)}}}function Sf(n){let r,e,t,i,s,l,a,u;return r=new nt({props:{type:"source",position:Ye.Top,id:"source",style:n[17](),isConnectable:n[1]}}),t=new nt({props:{type:"source",position:Ye.Left,id:"source",style:n[17](),isConnectable:n[1]}}),s=new nt({props:{type:"source",position:Ye.Right,id:"source",style:n[17](),isConnectable:n[1]}}),a=new nt({props:{type:"source",position:Ye.Bottom,id:"source",style:n[17](),isConnectable:n[1]}}),{c(){ve(r.$$.fragment),e=ee(),ve(t.$$.fragment),i=ee(),ve(s.$$.fragment),l=ee(),ve(a.$$.fragment)},l(o){be(r.$$.fragment,o),e=te(o),be(t.$$.fragment,o),i=te(o),be(s.$$.fragment,o),l=te(o),be(a.$$.fragment,o)},m(o,f){we(r,o,f),E(o,e,f),we(t,o,f),E(o,i,f),we(s,o,f),E(o,l,f),we(a,o,f),u=!0},p(o,f){const h={};f[0]&2&&(h.isConnectable=o[1]),r.$set(h);const c={};f[0]&2&&(c.isConnectable=o[1]),t.$set(c);const d={};f[0]&2&&(d.isConnectable=o[1]),s.$set(d);const _={};f[0]&2&&(_.isConnectable=o[1]),a.$set(_)},i(o){u||(re(r.$$.fragment,o),re(t.$$.fragment,o),re(s.$$.fragment,o),re(a.$$.fragment,o),u=!0)},o(o){le(r.$$.fragment,o),le(t.$$.fragment,o),le(s.$$.fragment,o),le(a.$$.fragment,o),u=!1},d(o){o&&(m(e),m(i),m(l)),ye(r,o),ye(t,o),ye(s,o),ye(a,o)}}}function iv(n){let r,e;return r=new n[32].ItemList({props:{list:Bc,filter_value_store:n[33],select_item:n[34]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i[1]&4&&(s.filter_value_store=t[33]),i[1]&8&&(s.select_item=t[34]),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function If(n){let r,e=Pe(n[0].user_properties),t=[];for(let i=0;i<e.length;i+=1)t[i]=Rf(Cf(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=pe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=pe()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);E(i,r,s)},p(i,s){if(s[0]&801){e=Pe(i[0].user_properties);let l;for(l=0;l<e.length;l+=1){const a=Cf(i,e,l);t[l]?t[l].p(a,s):(t[l]=Rf(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),ot(t,i)}}}function Rf(n){let r,e,t,i,s,l,a,u,o;function f(..._){return n[24](n[31],..._)}function h(){n[25].call(t,n[31])}function c(..._){return n[26](n[31],..._)}function d(){n[27].call(l,n[31])}return{c(){r=G("div"),e=G("div"),t=G("input"),i=ee(),s=G("div"),l=G("input"),a=ee(),this.h()},l(_){r=W(_,"DIV",{class:!0});var w=_e(r);e=W(w,"DIV",{class:!0});var k=_e(e);t=W(k,"INPUT",{placeholder:!0}),k.forEach(m),i=te(w),s=W(w,"DIV",{class:!0});var C=_e(s);l=W(C,"INPUT",{placeholder:!0}),C.forEach(m),a=te(w),w.forEach(m),this.h()},h(){J(t,"placeholder","property"),J(e,"class","user-property flex-column"),J(l,"placeholder","value"),J(s,"class","user-value flex-column flex-grow-3"),J(r,"class","user-properties flex")},m(_,w){E(_,r,w),P(r,e),P(e,t),Ie(t,n[9][n[31]][0]),P(r,i),P(r,s),P(s,l),Ie(l,n[8][n[31]][1]),P(r,a),u||(o=[fe(t,"input",f),fe(t,"input",h),fe(l,"input",c),fe(l,"input",d)],u=!0)},p(_,w){n=_,w[0]&512&&t.value!==n[9][n[31]][0]&&Ie(t,n[9][n[31]][0]),w[0]&256&&l.value!==n[8][n[31]][1]&&Ie(l,n[8][n[31]][1])},d(_){_&&m(r),u=!1,xe(o)}}}function lv(n){let r=n[4].inProgress,e,t,i,s,l,a,u,o="Vulnerability",f,h,c,d,_,w,k,C,U,I,A,b="+",y,v,R,T=Nf(n),B=!n[6]&&Af(n);l=new rn({props:{isVisible:n[2]}}),_=new Yn({props:{node_id:n[3],element_id:n[0].d3f_class,input_color:"#f9d999",place_holder:"< weakness >",$$slots:{default:[iv,({R:L,filter_value_store:F,select_item:N})=>({32:L,33:F,34:N}),({R:L,filter_value_store:F,select_item:N})=>[0,(L?2:0)|(F?4:0)|(N?8:0)]]},$$scope:{ctx:n}}});let D=n[0].user_properties&&If(n);return{c(){T.c(),e=ee(),t=G("div"),B&&B.c(),i=ee(),s=G("div"),ve(l.$$.fragment),a=ee(),u=G("i"),u.textContent=o,f=ee(),h=G("br"),c=ee(),d=G("div"),ve(_.$$.fragment),w=ee(),k=G("div"),C=G("input"),U=ee(),D&&D.c(),I=ee(),A=G("button"),A.textContent=b,this.h()},l(L){T.l(L),e=te(L),t=W(L,"DIV",{class:!0});var F=_e(t);B&&B.l(F),i=te(F),s=W(F,"DIV",{class:!0});var N=_e(s);be(l.$$.fragment,N),a=te(N),u=W(N,"I",{"data-svelte-h":!0}),qe(u)!=="svelte-qgxj0w"&&(u.textContent=o),f=te(N),h=W(N,"BR",{}),c=te(N),d=W(N,"DIV",{});var H=_e(d);be(_.$$.fragment,H),H.forEach(m),w=te(N),k=W(N,"DIV",{});var O=_e(k);C=W(O,"INPUT",{class:!0,type:!0,style:!0}),U=te(O),D&&D.l(O),I=te(O),A=W(O,"BUTTON",{"data-svelte-h":!0}),qe(A)!=="svelte-y9choq"&&(A.textContent=b),O.forEach(m),N.forEach(m),F.forEach(m),this.h()},h(){J(C,"class","nodrag label"),J(C,"type","text"),Ze(C,"background","#f9d999"),J(s,"class","vulnerability node-inner svelte-17a4qd7"),J(t,"class","vulnerability node svelte-17a4qd7")},m(L,F){T.m(L,F),E(L,e,F),E(L,t,F),B&&B.m(t,null),P(t,i),P(t,s),we(l,s,null),P(s,a),P(s,u),P(s,f),P(s,h),P(s,c),P(s,d),we(_,d,null),P(s,w),P(s,k),P(k,C),Ie(C,n[10]),P(k,U),D&&D.m(k,null),P(k,I),P(k,A),y=!0,v||(R=[fe(C,"input",n[22]),fe(C,"input",n[23]),fe(A,"click",n[11]),fe(t,"click",n[12]),fe(t,"mouseenter",n[14]),fe(t,"mouseleave",n[15])],v=!0)},p(L,F){F[0]&16&&Ve(r,r=L[4].inProgress)?(Xe(),le(T,1,1,Ne),Ge(),T=Nf(L),T.c(),re(T,1),T.m(e.parentNode,e)):T.p(L,F),L[6]?B&&(Xe(),le(B,1,1,()=>{B=null}),Ge()):B?(B.p(L,F),F[0]&64&&re(B,1)):(B=Af(L),B.c(),re(B,1),B.m(t,i));const N={};F[0]&4&&(N.isVisible=L[2]),l.$set(N);const H={};F[0]&8&&(H.node_id=L[3]),F[0]&1&&(H.element_id=L[0].d3f_class),F[1]&28&&(H.$$scope={dirty:F,ctx:L}),_.$set(H),F[0]&1024&&C.value!==L[10]&&Ie(C,L[10]),L[0].user_properties?D?D.p(L,F):(D=If(L),D.c(),D.m(k,I)):D&&(D.d(1),D=null)},i(L){y||(re(T),re(B),re(l.$$.fragment,L),re(_.$$.fragment,L),y=!0)},o(L){le(T),le(B),le(l.$$.fragment,L),le(_.$$.fragment,L),y=!1},d(L){L&&(m(e),m(t)),T.d(L),B&&B.d(),ye(l),ye(_),D&&D.d(),v=!1,xe(R)}}}function sv(n,r,e){let t,i,s,l,a,u;Me(n,rr,O=>e(28,a=O)),Me(n,Ue,O=>e(5,u=O));var o,f,h,c;let{data:d}=r,{isConnectable:_}=r,{selected:w=void 0}=r,{id:k}=r;d.user_properties=[];function C(){U(),d.user_properties.push(["",""])}function U(){for(let O=0;O<a.length;O++)a[O].data==d&&Ke(Ue,u=a[O],u)}const I=Qr();Me(n,I,O=>e(4,l=O));let A=!1,b=!1;function y(){e(7,b=!0)}function v(){e(7,b=!1)}function R(){return l.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function T(){return b?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const B=O=>{e(0,d.label=O.currentTarget.value,d),Ke(Ue,u.data.label=d.label,u)};function D(){t=this.value,e(10,t),e(0,d),e(5,u),e(18,o)}const L=(O,ne)=>{e(0,d.user_properties[O][0]=ne.currentTarget.value,d),Ke(Ue,u.data.user_properties[O][0]=ne.currentTarget.value,u)};function F(O){i[O][0]=this.value,e(9,i),e(0,d),e(5,u),e(19,f)}const N=(O,ne)=>{e(0,d.user_properties[O][1]=ne.currentTarget.value,d),Ke(Ue,u.data.user_properties[O][1]=ne.currentTarget.value,u)};function H(O){s[O][1]=this.value,e(8,s),e(0,d),e(5,u),e(20,h)}return n.$$set=O=>{"data"in O&&e(0,d=O.data),"isConnectable"in O&&e(1,_=O.isConnectable),"selected"in O&&e(2,w=O.selected),"id"in O&&e(3,k=O.id)},n.$$.update=()=>{n.$$.dirty[0]&262177&&e(10,t=(d==null?void 0:d.label)||"< label >"),n.$$.dirty[0]&524321&&e(9,i=(d==null?void 0:d.user_properties)||(e(19,f=u==null?void 0:u.data)===null||f===void 0?void 0:f.user_properties)||"< Property >"),n.$$.dirty[0]&1048609&&e(8,s=(d==null?void 0:d.user_properties)||(e(20,h=u==null?void 0:u.data)===null||h===void 0?void 0:h.user_properties)||"< Value >"),n.$$.dirty[0]&2097176&&e(6,A=(e(21,c=l.toHandle)===null||c===void 0?void 0:c.nodeId)==k)},[d,_,w,k,l,u,A,b,s,i,t,C,U,I,y,v,R,T,o,f,h,c,B,D,L,F,N,H]}class av extends it{constructor(r){super(),lt(this,r,sv,lv,Ve,{data:0,isConnectable:1,selected:2,id:3},null,[-1,-1])}}function Ff(n,r,e){const t=n.slice();return t[29]=r[e],t[30]=r,t[31]=e,t}function Of(n){let r,e;return r=new nt({props:{type:"target",class:"customHandle",position:Ye.Left,id:"target",style:n[16](),isConnectableStart:!1,isConnectable:n[1]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i[0]&2&&(s.isConnectable=t[1]),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Bf(n){let r=n[7],e,t,i=Lf(n);return{c(){i.c(),e=pe()},l(s){i.l(s),e=pe()},m(s,l){i.m(s,l),E(s,e,l),t=!0},p(s,l){l[0]&128&&Ve(r,r=s[7])?(Xe(),le(i,1,1,Ne),Ge(),i=Lf(s),i.c(),re(i,1),i.m(e.parentNode,e)):i.p(s,l)},i(s){t||(re(i),t=!0)},o(s){le(i),t=!1},d(s){s&&m(e),i.d(s)}}}function Lf(n){let r,e,t,i,s,l,a,u;return r=new nt({props:{type:"source",position:Ye.Top,id:"source",style:n[17](),isConnectable:n[1]}}),t=new nt({props:{type:"source",position:Ye.Left,id:"source",style:n[17](),isConnectable:n[1]}}),s=new nt({props:{type:"source",position:Ye.Right,id:"source",style:n[17](),isConnectable:n[1]}}),a=new nt({props:{type:"source",position:Ye.Bottom,id:"source",style:n[17](),isConnectable:n[1]}}),{c(){ve(r.$$.fragment),e=ee(),ve(t.$$.fragment),i=ee(),ve(s.$$.fragment),l=ee(),ve(a.$$.fragment)},l(o){be(r.$$.fragment,o),e=te(o),be(t.$$.fragment,o),i=te(o),be(s.$$.fragment,o),l=te(o),be(a.$$.fragment,o)},m(o,f){we(r,o,f),E(o,e,f),we(t,o,f),E(o,i,f),we(s,o,f),E(o,l,f),we(a,o,f),u=!0},p(o,f){const h={};f[0]&2&&(h.isConnectable=o[1]),r.$set(h);const c={};f[0]&2&&(c.isConnectable=o[1]),t.$set(c);const d={};f[0]&2&&(d.isConnectable=o[1]),s.$set(d);const _={};f[0]&2&&(_.isConnectable=o[1]),a.$set(_)},i(o){u||(re(r.$$.fragment,o),re(t.$$.fragment,o),re(s.$$.fragment,o),re(a.$$.fragment,o),u=!0)},o(o){le(r.$$.fragment,o),le(t.$$.fragment,o),le(s.$$.fragment,o),le(a.$$.fragment,o),u=!1},d(o){o&&(m(e),m(i),m(l)),ye(r,o),ye(t,o),ye(s,o),ye(a,o)}}}function uv(n){let r,e;return r=new n[32].ItemList({props:{list:Rc,filter_value_store:n[33],select_item:n[34]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i[1]&4&&(s.filter_value_store=t[33]),i[1]&8&&(s.select_item=t[34]),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Pf(n){let r,e=Pe(n[0].user_properties),t=[];for(let i=0;i<e.length;i+=1)t[i]=qf(Ff(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=pe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=pe()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);E(i,r,s)},p(i,s){if(s[0]&801){e=Pe(i[0].user_properties);let l;for(l=0;l<e.length;l+=1){const a=Ff(i,e,l);t[l]?t[l].p(a,s):(t[l]=qf(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),ot(t,i)}}}function qf(n){let r,e,t,i,s,l,a,u,o;function f(..._){return n[24](n[31],..._)}function h(){n[25].call(t,n[31])}function c(..._){return n[26](n[31],..._)}function d(){n[27].call(l,n[31])}return{c(){r=G("div"),e=G("div"),t=G("input"),i=ee(),s=G("div"),l=G("input"),a=ee(),this.h()},l(_){r=W(_,"DIV",{class:!0});var w=_e(r);e=W(w,"DIV",{class:!0});var k=_e(e);t=W(k,"INPUT",{placeholder:!0}),k.forEach(m),i=te(w),s=W(w,"DIV",{class:!0});var C=_e(s);l=W(C,"INPUT",{placeholder:!0}),C.forEach(m),a=te(w),w.forEach(m),this.h()},h(){J(t,"placeholder","property"),J(e,"class","user-property flex-column"),J(l,"placeholder","value"),J(s,"class","user-value flex-column flex-grow-3"),J(r,"class","user-properties flex")},m(_,w){E(_,r,w),P(r,e),P(e,t),Ie(t,n[9][n[31]][0]),P(r,i),P(r,s),P(s,l),Ie(l,n[8][n[31]][1]),P(r,a),u||(o=[fe(t,"input",f),fe(t,"input",h),fe(l,"input",c),fe(l,"input",d)],u=!0)},p(_,w){n=_,w[0]&512&&t.value!==n[9][n[31]][0]&&Ie(t,n[9][n[31]][0]),w[0]&256&&l.value!==n[8][n[31]][1]&&Ie(l,n[8][n[31]][1])},d(_){_&&m(r),u=!1,xe(o)}}}function ov(n){let r=n[4].inProgress,e,t,i,s,l,a="Artifact",u,o,f,h,c,d,_,w,k,C,U="+",I,A,b,y=Of(n),v=!n[6]&&Bf(n);f=new rn({props:{isVisible:n[2]}}),c=new Yn({props:{node_id:n[3],element_id:n[0].d3f_class,input_color:"#fff4dd",$$slots:{default:[uv,({R:T,filter_value_store:B,select_item:D})=>({32:T,33:B,34:D}),({R:T,filter_value_store:B,select_item:D})=>[0,(T?2:0)|(B?4:0)|(D?8:0)]]},$$scope:{ctx:n}}});let R=n[0].user_properties&&Pf(n);return{c(){y.c(),e=ee(),t=G("div"),v&&v.c(),i=ee(),s=G("div"),l=G("i"),l.textContent=a,u=G("br"),o=ee(),ve(f.$$.fragment),h=ee(),ve(c.$$.fragment),d=ee(),_=G("input"),w=ee(),R&&R.c(),k=ee(),C=G("button"),C.textContent=U,this.h()},l(T){y.l(T),e=te(T),t=W(T,"DIV",{class:!0});var B=_e(t);v&&v.l(B),i=te(B),s=W(B,"DIV",{class:!0});var D=_e(s);l=W(D,"I",{"data-svelte-h":!0}),qe(l)!=="svelte-148na2y"&&(l.textContent=a),u=W(D,"BR",{}),o=te(D),be(f.$$.fragment,D),h=te(D),be(c.$$.fragment,D),d=te(D),_=W(D,"INPUT",{class:!0,type:!0,style:!0}),w=te(D),R&&R.l(D),k=te(D),C=W(D,"BUTTON",{"data-svelte-h":!0}),qe(C)!=="svelte-y9choq"&&(C.textContent=U),D.forEach(m),B.forEach(m),this.h()},h(){J(_,"class","nodrag label"),J(_,"type","text"),Ze(_,"background","#fff4dd"),J(s,"class","node-inner"),J(t,"class","artifact node svelte-1q2d78v")},m(T,B){y.m(T,B),E(T,e,B),E(T,t,B),v&&v.m(t,null),P(t,i),P(t,s),P(s,l),P(s,u),P(s,o),we(f,s,null),P(s,h),we(c,s,null),P(s,d),P(s,_),Ie(_,n[10]),P(s,w),R&&R.m(s,null),P(s,k),P(s,C),I=!0,A||(b=[fe(_,"input",n[22]),fe(_,"input",n[23]),fe(C,"click",n[11]),fe(t,"click",n[12]),fe(t,"mouseenter",n[14]),fe(t,"mouseleave",n[15])],A=!0)},p(T,B){B[0]&16&&Ve(r,r=T[4].inProgress)?(Xe(),le(y,1,1,Ne),Ge(),y=Of(T),y.c(),re(y,1),y.m(e.parentNode,e)):y.p(T,B),T[6]?v&&(Xe(),le(v,1,1,()=>{v=null}),Ge()):v?(v.p(T,B),B[0]&64&&re(v,1)):(v=Bf(T),v.c(),re(v,1),v.m(t,i));const D={};B[0]&4&&(D.isVisible=T[2]),f.$set(D);const L={};B[0]&8&&(L.node_id=T[3]),B[0]&1&&(L.element_id=T[0].d3f_class),B[1]&28&&(L.$$scope={dirty:B,ctx:T}),c.$set(L),B[0]&1024&&_.value!==T[10]&&Ie(_,T[10]),T[0].user_properties?R?R.p(T,B):(R=Pf(T),R.c(),R.m(s,k)):R&&(R.d(1),R=null)},i(T){I||(re(y),re(v),re(f.$$.fragment,T),re(c.$$.fragment,T),I=!0)},o(T){le(y),le(v),le(f.$$.fragment,T),le(c.$$.fragment,T),I=!1},d(T){T&&(m(e),m(t)),y.d(T),v&&v.d(),ye(f),ye(c),R&&R.d(),A=!1,xe(b)}}}function fv(n,r,e){let t,i,s,l,a,u;Me(n,rr,O=>e(28,a=O)),Me(n,Ue,O=>e(5,u=O));var o,f,h,c;let{data:d}=r,{isConnectable:_}=r,{selected:w=void 0}=r;d.user_properties=[];let{id:k}=r;function C(){U(),d.user_properties.push(["",""])}function U(){for(let O=0;O<a.length;O++)a[O].data==d&&Ke(Ue,u=a[O],u)}const I=Qr();Me(n,I,O=>e(4,l=O));let A=!1,b=!1;function y(){e(7,b=!0)}function v(){e(7,b=!1)}function R(){return l.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function T(){return b?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const B=O=>{e(0,d.label=O.currentTarget.value,d),Ke(Ue,u.data.label=d.label,u)};function D(){t=this.value,e(10,t),e(0,d),e(5,u),e(18,o)}const L=(O,ne)=>{e(0,d.user_properties[O][0]=ne.currentTarget.value,d),Ke(Ue,u.data.user_properties[O][0]=ne.currentTarget.value,u)};function F(O){i[O][0]=this.value,e(9,i),e(0,d),e(5,u),e(19,f)}const N=(O,ne)=>{e(0,d.user_properties[O][1]=ne.currentTarget.value,d),Ke(Ue,u.data.user_properties[O][1]=ne.currentTarget.value,u)};function H(O){s[O][1]=this.value,e(8,s),e(0,d),e(5,u),e(20,h)}return n.$$set=O=>{"data"in O&&e(0,d=O.data),"isConnectable"in O&&e(1,_=O.isConnectable),"selected"in O&&e(2,w=O.selected),"id"in O&&e(3,k=O.id)},n.$$.update=()=>{n.$$.dirty[0]&262177&&e(10,t=(d==null?void 0:d.label)||"< label >"),n.$$.dirty[0]&524321&&e(9,i=(d==null?void 0:d.user_properties)||(e(19,f=u==null?void 0:u.data)===null||f===void 0?void 0:f.user_properties)||"< Property >"),n.$$.dirty[0]&1048609&&e(8,s=(d==null?void 0:d.user_properties)||(e(20,h=u==null?void 0:u.data)===null||h===void 0?void 0:h.user_properties)||"< Value >"),n.$$.dirty[0]&2097176&&e(6,A=(e(21,c=l.toHandle)===null||c===void 0?void 0:c.nodeId)==k)},[d,_,w,k,l,u,A,b,s,i,t,C,U,I,y,v,R,T,o,f,h,c,B,D,L,F,N,H]}class cv extends it{constructor(r){super(),lt(this,r,fv,ov,Ve,{data:0,isConnectable:1,selected:2,id:3},null,[-1,-1])}}function Uf(n,r,e){const t=n.slice();return t[33]=r[e],t[34]=r,t[35]=e,t}function Mf(n){let r,e;return r=new nt({props:{type:"target",class:"customHandle",position:Ye.Left,id:"target",style:n[17](),isConnectableStart:!1,isConnectable:n[1]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i[0]&2&&(s.isConnectable=t[1]),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function jf(n){let r=n[7],e,t,i=Vf(n);return{c(){i.c(),e=pe()},l(s){i.l(s),e=pe()},m(s,l){i.m(s,l),E(s,e,l),t=!0},p(s,l){l[0]&128&&Ve(r,r=s[7])?(Xe(),le(i,1,1,Ne),Ge(),i=Vf(s),i.c(),re(i,1),i.m(e.parentNode,e)):i.p(s,l)},i(s){t||(re(i),t=!0)},o(s){le(i),t=!1},d(s){s&&m(e),i.d(s)}}}function Vf(n){let r,e,t,i,s,l,a,u;return r=new nt({props:{type:"source",position:Ye.Top,id:"source",style:n[18](),isConnectable:n[1]}}),t=new nt({props:{type:"source",position:Ye.Left,id:"source",style:n[18](),isConnectable:n[1]}}),s=new nt({props:{type:"source",position:Ye.Right,id:"source",style:n[18](),isConnectable:n[1]}}),a=new nt({props:{type:"source",position:Ye.Bottom,id:"source",style:n[18](),isConnectable:n[1]}}),{c(){ve(r.$$.fragment),e=ee(),ve(t.$$.fragment),i=ee(),ve(s.$$.fragment),l=ee(),ve(a.$$.fragment)},l(o){be(r.$$.fragment,o),e=te(o),be(t.$$.fragment,o),i=te(o),be(s.$$.fragment,o),l=te(o),be(a.$$.fragment,o)},m(o,f){we(r,o,f),E(o,e,f),we(t,o,f),E(o,i,f),we(s,o,f),E(o,l,f),we(a,o,f),u=!0},p(o,f){const h={};f[0]&2&&(h.isConnectable=o[1]),r.$set(h);const c={};f[0]&2&&(c.isConnectable=o[1]),t.$set(c);const d={};f[0]&2&&(d.isConnectable=o[1]),s.$set(d);const _={};f[0]&2&&(_.isConnectable=o[1]),a.$set(_)},i(o){u||(re(r.$$.fragment,o),re(t.$$.fragment,o),re(s.$$.fragment,o),re(a.$$.fragment,o),u=!0)},o(o){le(r.$$.fragment,o),le(t.$$.fragment,o),le(s.$$.fragment,o),le(a.$$.fragment,o),u=!1},d(o){o&&(m(e),m(i),m(l)),ye(r,o),ye(t,o),ye(s,o),ye(a,o)}}}function dv(n){let r,e;return r=new n[36].ItemTree({props:{list:Ic,filter_value_store:n[37],select_item:n[38]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i[1]&64&&(s.filter_value_store=t[37]),i[1]&128&&(s.select_item=t[38]),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Hf(n){let r,e=Pe(n[0].user_properties),t=[];for(let i=0;i<e.length;i+=1)t[i]=zf(Uf(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=pe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=pe()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);E(i,r,s)},p(i,s){if(s[0]&801){e=Pe(i[0].user_properties);let l;for(l=0;l<e.length;l+=1){const a=Uf(i,e,l);t[l]?t[l].p(a,s):(t[l]=zf(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),ot(t,i)}}}function zf(n){let r,e,t,i,s,l,a,u,o;function f(..._){return n[27](n[35],..._)}function h(){n[28].call(t,n[35])}function c(..._){return n[29](n[35],..._)}function d(){n[30].call(l,n[35])}return{c(){r=G("div"),e=G("div"),t=G("input"),i=ee(),s=G("div"),l=G("input"),a=ee(),this.h()},l(_){r=W(_,"DIV",{class:!0});var w=_e(r);e=W(w,"DIV",{class:!0});var k=_e(e);t=W(k,"INPUT",{placeholder:!0}),k.forEach(m),i=te(w),s=W(w,"DIV",{class:!0});var C=_e(s);l=W(C,"INPUT",{placeholder:!0}),C.forEach(m),a=te(w),w.forEach(m),this.h()},h(){J(t,"placeholder","property"),J(e,"class","user-property flex-column"),J(l,"placeholder","value"),J(s,"class","user-value flex-column flex-grow-3"),J(r,"class","user-properties flex")},m(_,w){E(_,r,w),P(r,e),P(e,t),Ie(t,n[9][n[35]][0]),P(r,i),P(r,s),P(s,l),Ie(l,n[8][n[35]][1]),P(r,a),u||(o=[fe(t,"input",f),fe(t,"input",h),fe(l,"input",c),fe(l,"input",d)],u=!0)},p(_,w){n=_,w[0]&512&&t.value!==n[9][n[35]][0]&&Ie(t,n[9][n[35]][0]),w[0]&256&&l.value!==n[8][n[35]][1]&&Ie(l,n[8][n[35]][1])},d(_){_&&m(r),u=!1,xe(o)}}}function hv(n){let r=n[4].inProgress,e,t,i,s,l,a,u,o="Defense Action",f,h,c,d,_,w,k,C,U,I,A,b,y,v="+",R,T,B,D=Mf(n),L=!n[6]&&jf(n);l=new rn({props:{isVisible:n[2]}}),k=new Yn({props:{node_id:n[3],element_id:n[0].d3f_class,input_color:"#d6eaff",$$slots:{default:[dv,({R:N,filter_value_store:H,select_item:O})=>({36:N,37:H,38:O}),({R:N,filter_value_store:H,select_item:O})=>[0,(N?32:0)|(H?64:0)|(O?128:0)]]},$$scope:{ctx:n}}});let F=n[0].user_properties&&Hf(n);return{c(){D.c(),e=ee(),t=G("div"),L&&L.c(),i=ee(),s=G("div"),ve(l.$$.fragment),a=ee(),u=G("i"),u.textContent=o,f=ee(),h=G("input"),c=ee(),d=G("br"),_=ee(),w=G("div"),ve(k.$$.fragment),C=ee(),U=G("div"),I=G("input"),A=ee(),F&&F.c(),b=ee(),y=G("button"),y.textContent=v,this.h()},l(N){D.l(N),e=te(N),t=W(N,"DIV",{class:!0});var H=_e(t);L&&L.l(H),i=te(H),s=W(H,"DIV",{class:!0});var O=_e(s);be(l.$$.fragment,O),a=te(O),u=W(O,"I",{"data-svelte-h":!0}),qe(u)!=="svelte-1x9m2lq"&&(u.textContent=o),f=te(O),h=W(O,"INPUT",{class:!0,type:!0,style:!0}),c=te(O),d=W(O,"BR",{}),_=te(O),w=W(O,"DIV",{});var ne=_e(w);be(k.$$.fragment,ne),ne.forEach(m),C=te(O),U=W(O,"DIV",{});var Q=_e(U);I=W(Q,"INPUT",{class:!0,type:!0,style:!0}),A=te(Q),F&&F.l(Q),b=te(Q),y=W(Q,"BUTTON",{"data-svelte-h":!0}),qe(y)!=="svelte-y9choq"&&(y.textContent=v),Q.forEach(m),O.forEach(m),H.forEach(m),this.h()},h(){J(h,"class","nodrag sequence"),J(h,"type","text"),Ze(h,"background","#d6eaff"),J(I,"class","nodrag label"),J(I,"type","text"),Ze(I,"background","#d6eaff"),J(s,"class","node-inner"),J(t,"class","countermeasure node svelte-cdgs6j")},m(N,H){D.m(N,H),E(N,e,H),E(N,t,H),L&&L.m(t,null),P(t,i),P(t,s),we(l,s,null),P(s,a),P(s,u),P(s,f),P(s,h),Ie(h,n[10]),P(s,c),P(s,d),P(s,_),P(s,w),we(k,w,null),P(s,C),P(s,U),P(U,I),Ie(I,n[11]),P(U,A),F&&F.m(U,null),P(U,b),P(U,y),R=!0,T||(B=[fe(h,"input",n[23]),fe(h,"input",n[24]),fe(I,"input",n[25]),fe(I,"input",n[26]),fe(y,"click",n[12]),fe(t,"click",n[13]),fe(t,"mouseenter",n[15]),fe(t,"mouseleave",n[16])],T=!0)},p(N,H){H[0]&16&&Ve(r,r=N[4].inProgress)?(Xe(),le(D,1,1,Ne),Ge(),D=Mf(N),D.c(),re(D,1),D.m(e.parentNode,e)):D.p(N,H),N[6]?L&&(Xe(),le(L,1,1,()=>{L=null}),Ge()):L?(L.p(N,H),H[0]&64&&re(L,1)):(L=jf(N),L.c(),re(L,1),L.m(t,i));const O={};H[0]&4&&(O.isVisible=N[2]),l.$set(O),H[0]&1024&&h.value!==N[10]&&Ie(h,N[10]);const ne={};H[0]&8&&(ne.node_id=N[3]),H[0]&1&&(ne.element_id=N[0].d3f_class),H[1]&448&&(ne.$$scope={dirty:H,ctx:N}),k.$set(ne),H[0]&2048&&I.value!==N[11]&&Ie(I,N[11]),N[0].user_properties?F?F.p(N,H):(F=Hf(N),F.c(),F.m(U,b)):F&&(F.d(1),F=null)},i(N){R||(re(D),re(L),re(l.$$.fragment,N),re(k.$$.fragment,N),R=!0)},o(N){le(D),le(L),le(l.$$.fragment,N),le(k.$$.fragment,N),R=!1},d(N){N&&(m(e),m(t)),D.d(N),L&&L.d(),ye(l),ye(k),F&&F.d(),T=!1,xe(B)}}}function _v(n,r,e){let t,i,s,l,a,u,o;Me(n,rr,z=>e(31,u=z)),Me(n,Ue,z=>e(5,o=z));var f,h,c,d;let{data:_}=r,{isConnectable:w}=r,{selected:k=void 0}=r,{id:C}=r;_.user_properties=[];function U(){I(),_.user_properties.push(["",""])}function I(){for(let z=0;z<u.length;z++)u[z].data==_&&Ke(Ue,o=u[z],o)}const A=Qr();Me(n,A,z=>e(4,a=z));let b=!1,y=!1;function v(){e(7,y=!0)}function R(){e(7,y=!1)}function T(){return a.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function B(){return y?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const D=z=>{e(0,_.sequence=z.currentTarget.value,_),Ke(Ue,o.data.sequence=_.sequence,o)};function L(){i=this.value,e(10,i),e(0,_)}const F=z=>{e(0,_.label=z.currentTarget.value,_),Ke(Ue,o.data.label=_.label,o)};function N(){t=this.value,e(11,t),e(0,_),e(19,f)}const H=(z,Y)=>{e(0,_.user_properties[z][0]=Y.currentTarget.value,_),Ke(Ue,o.data.user_properties[z][0]=Y.currentTarget.value,o)};function O(z){s[z][0]=this.value,e(9,s),e(0,_),e(5,o),e(20,h)}const ne=(z,Y)=>{e(0,_.user_properties[z][1]=Y.currentTarget.value,_),Ke(Ue,o.data.user_properties[z][1]=Y.currentTarget.value,o)};function Q(z){l[z][1]=this.value,e(8,l),e(0,_),e(5,o),e(21,c)}return n.$$set=z=>{"data"in z&&e(0,_=z.data),"isConnectable"in z&&e(1,w=z.isConnectable),"selected"in z&&e(2,k=z.selected),"id"in z&&e(3,C=z.id)},n.$$.update=()=>{n.$$.dirty[0]&524289&&e(11,t=e(19,f=_==null?void 0:_.label)!==null&&f!==void 0?f:"< label >"),n.$$.dirty[0]&1&&e(10,i=(_==null?void 0:_.sequence)||"#"),n.$$.dirty[0]&1048609&&e(9,s=(_==null?void 0:_.user_properties)||(e(20,h=o==null?void 0:o.data)===null||h===void 0?void 0:h.user_properties)||"< Property >"),n.$$.dirty[0]&2097185&&e(8,l=(_==null?void 0:_.user_properties)||(e(21,c=o==null?void 0:o.data)===null||c===void 0?void 0:c.user_properties)||"< Value >"),n.$$.dirty[0]&4194328&&e(6,b=(e(22,d=a.toHandle)===null||d===void 0?void 0:d.nodeId)==C)},[_,w,k,C,a,o,b,y,l,s,i,t,U,I,A,v,R,T,B,f,h,c,d,D,L,F,N,H,O,ne,Q]}class pv extends it{constructor(r){super(),lt(this,r,_v,hv,Ve,{data:0,isConnectable:1,selected:2,id:3},null,[-1,-1])}}function Xf(n,r,e){const t=n.slice();return t[30]=r[e],t[31]=r,t[32]=e,t}function Gf(n){let r,e;return r=new nt({props:{type:"target",class:"customHandle",position:Ye.Left,id:"target",style:n[15](),isConnectableStart:!1,isConnectable:n[1]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i[0]&2&&(s.isConnectable=t[1]),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Wf(n){let r=n[6],e,t,i=Qf(n);return{c(){i.c(),e=pe()},l(s){i.l(s),e=pe()},m(s,l){i.m(s,l),E(s,e,l),t=!0},p(s,l){l[0]&64&&Ve(r,r=s[6])?(Xe(),le(i,1,1,Ne),Ge(),i=Qf(s),i.c(),re(i,1),i.m(e.parentNode,e)):i.p(s,l)},i(s){t||(re(i),t=!0)},o(s){le(i),t=!1},d(s){s&&m(e),i.d(s)}}}function Qf(n){let r,e,t,i,s,l,a,u;return r=new nt({props:{type:"source",position:Ye.Top,id:"source",style:n[16](),isConnectable:n[1]}}),t=new nt({props:{type:"source",position:Ye.Left,id:"source",style:n[16](),isConnectable:n[1]}}),s=new nt({props:{type:"source",position:Ye.Right,id:"source",style:n[16](),isConnectable:n[1]}}),a=new nt({props:{type:"source",position:Ye.Bottom,id:"source",style:n[16](),isConnectable:n[1]}}),{c(){ve(r.$$.fragment),e=ee(),ve(t.$$.fragment),i=ee(),ve(s.$$.fragment),l=ee(),ve(a.$$.fragment)},l(o){be(r.$$.fragment,o),e=te(o),be(t.$$.fragment,o),i=te(o),be(s.$$.fragment,o),l=te(o),be(a.$$.fragment,o)},m(o,f){we(r,o,f),E(o,e,f),we(t,o,f),E(o,i,f),we(s,o,f),E(o,l,f),we(a,o,f),u=!0},p(o,f){const h={};f[0]&2&&(h.isConnectable=o[1]),r.$set(h);const c={};f[0]&2&&(c.isConnectable=o[1]),t.$set(c);const d={};f[0]&2&&(d.isConnectable=o[1]),s.$set(d);const _={};f[0]&2&&(_.isConnectable=o[1]),a.$set(_)},i(o){u||(re(r.$$.fragment,o),re(t.$$.fragment,o),re(s.$$.fragment,o),re(a.$$.fragment,o),u=!0)},o(o){le(r.$$.fragment,o),le(t.$$.fragment,o),le(s.$$.fragment,o),le(a.$$.fragment,o),u=!1},d(o){o&&(m(e),m(i),m(l)),ye(r,o),ye(t,o),ye(s,o),ye(a,o)}}}function Yf(n){let r,e=Pe(n[0].user_properties),t=[];for(let i=0;i<e.length;i+=1)t[i]=xf(Xf(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=pe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=pe()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);E(i,r,s)},p(i,s){if(s[0]&401){e=Pe(i[0].user_properties);let l;for(l=0;l<e.length;l+=1){const a=Xf(i,e,l);t[l]?t[l].p(a,s):(t[l]=xf(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),ot(t,i)}}}function xf(n){let r,e,t,i,s,l,a,u,o;function f(..._){return n[24](n[32],..._)}function h(){n[25].call(t,n[32])}function c(..._){return n[26](n[32],..._)}function d(){n[27].call(l,n[32])}return{c(){r=G("div"),e=G("div"),t=G("input"),i=ee(),s=G("div"),l=G("input"),a=ee(),this.h()},l(_){r=W(_,"DIV",{class:!0});var w=_e(r);e=W(w,"DIV",{class:!0});var k=_e(e);t=W(k,"INPUT",{placeholder:!0}),k.forEach(m),i=te(w),s=W(w,"DIV",{class:!0});var C=_e(s);l=W(C,"INPUT",{placeholder:!0}),C.forEach(m),a=te(w),w.forEach(m),this.h()},h(){J(t,"placeholder","property"),J(e,"class","user-property flex-column"),J(l,"placeholder","value"),J(s,"class","user-value flex-column flex-grow-3"),J(r,"class","user-properties flex")},m(_,w){E(_,r,w),P(r,e),P(e,t),Ie(t,n[8][n[32]][0]),P(r,i),P(r,s),P(s,l),Ie(l,n[7][n[32]][1]),P(r,a),u||(o=[fe(t,"input",f),fe(t,"input",h),fe(l,"input",c),fe(l,"input",d)],u=!0)},p(_,w){n=_,w[0]&256&&t.value!==n[8][n[32]][0]&&Ie(t,n[8][n[32]][0]),w[0]&128&&l.value!==n[7][n[32]][1]&&Ie(l,n[7][n[32]][1])},d(_){_&&m(r),u=!1,xe(o)}}}function gv(n){let r=n[3].inProgress,e,t,i,s,l,a="Information",u,o,f,h,c,d,_,w,k="+",C,U,I,A=Gf(n),b=!n[5]&&Wf(n);f=new rn({props:{isVisible:n[2]}});let y=n[0].user_properties&&Yf(n);return{c(){A.c(),e=ee(),t=G("div"),b&&b.c(),i=ee(),s=G("div"),l=G("i"),l.textContent=a,u=G("br"),o=ee(),ve(f.$$.fragment),h=ee(),c=G("input"),d=ee(),y&&y.c(),_=ee(),w=G("button"),w.textContent=k,this.h()},l(v){A.l(v),e=te(v),t=W(v,"DIV",{class:!0});var R=_e(t);b&&b.l(R),i=te(R),s=W(R,"DIV",{class:!0});var T=_e(s);l=W(T,"I",{"data-svelte-h":!0}),qe(l)!=="svelte-1ocpiyk"&&(l.textContent=a),u=W(T,"BR",{}),o=te(T),be(f.$$.fragment,T),h=te(T),c=W(T,"INPUT",{class:!0,type:!0,style:!0}),d=te(T),y&&y.l(T),_=te(T),w=W(T,"BUTTON",{"data-svelte-h":!0}),qe(w)!=="svelte-y9choq"&&(w.textContent=k),T.forEach(m),R.forEach(m),this.h()},h(){J(c,"class","nodrag label"),J(c,"type","text"),Ze(c,"background","#e8f4ea"),J(s,"class","information node-inner svelte-1wgy9qw"),J(t,"class","information node svelte-1wgy9qw")},m(v,R){A.m(v,R),E(v,e,R),E(v,t,R),b&&b.m(t,null),P(t,i),P(t,s),P(s,l),P(s,u),P(s,o),we(f,s,null),P(s,h),P(s,c),Ie(c,n[9]),P(s,d),y&&y.m(s,null),P(s,_),P(s,w),C=!0,U||(I=[fe(c,"input",n[22]),fe(c,"input",n[23]),fe(w,"click",n[10]),fe(t,"click",n[11]),fe(t,"mouseenter",n[13]),fe(t,"mouseleave",n[14])],U=!0)},p(v,R){R[0]&8&&Ve(r,r=v[3].inProgress)?(Xe(),le(A,1,1,Ne),Ge(),A=Gf(v),A.c(),re(A,1),A.m(e.parentNode,e)):A.p(v,R),v[5]?b&&(Xe(),le(b,1,1,()=>{b=null}),Ge()):b?(b.p(v,R),R[0]&32&&re(b,1)):(b=Wf(v),b.c(),re(b,1),b.m(t,i));const T={};R[0]&4&&(T.isVisible=v[2]),f.$set(T),R[0]&512&&c.value!==v[9]&&Ie(c,v[9]),v[0].user_properties?y?y.p(v,R):(y=Yf(v),y.c(),y.m(s,_)):y&&(y.d(1),y=null)},i(v){C||(re(A),re(b),re(f.$$.fragment,v),C=!0)},o(v){le(A),le(b),le(f.$$.fragment,v),C=!1},d(v){v&&(m(e),m(t)),A.d(v),b&&b.d(),ye(f),y&&y.d(),U=!1,xe(I)}}}function mv(n,r,e){let t,i,s,l,a,u;Me(n,rr,O=>e(28,a=O)),Me(n,Ue,O=>e(4,u=O));var o,f,h,c;let{data:d}=r,{isConnectable:_}=r,{selected:w=void 0}=r;d.user_properties=[];function k(){C(),d.user_properties.push(["",""])}function C(){for(let O=0;O<a.length;O++)a[O].data==d&&Ke(Ue,u=a[O],u)}let{id:U}=r;const I=Qr();Me(n,I,O=>e(3,l=O));let A=!1,b=!1;function y(){e(6,b=!0)}function v(){e(6,b=!1)}function R(){return l.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function T(){return b?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const B=O=>{e(0,d.label=O.currentTarget.value,d),Ke(Ue,u.data.label=d.label,u)};function D(){t=this.value,e(9,t),e(0,d),e(4,u),e(18,o)}const L=(O,ne)=>{e(0,d.user_properties[O][0]=ne.currentTarget.value,d),Ke(Ue,u.data.user_properties[O][0]=ne.currentTarget.value,u)};function F(O){i[O][0]=this.value,e(8,i),e(0,d),e(4,u),e(19,f)}const N=(O,ne)=>{e(0,d.user_properties[O][1]=ne.currentTarget.value,d),Ke(Ue,u.data.user_properties[O][1]=ne.currentTarget.value,u)};function H(O){s[O][1]=this.value,e(7,s),e(0,d),e(4,u),e(20,h)}return n.$$set=O=>{"data"in O&&e(0,d=O.data),"isConnectable"in O&&e(1,_=O.isConnectable),"selected"in O&&e(2,w=O.selected),"id"in O&&e(17,U=O.id)},n.$$.update=()=>{n.$$.dirty[0]&262161&&e(9,t=(d==null?void 0:d.label)||"< label >"),n.$$.dirty[0]&524305&&e(8,i=(d==null?void 0:d.user_properties)||(e(19,f=u==null?void 0:u.data)===null||f===void 0?void 0:f.user_properties)||"< Property >"),n.$$.dirty[0]&1048593&&e(7,s=(d==null?void 0:d.user_properties)||(e(20,h=u==null?void 0:u.data)===null||h===void 0?void 0:h.user_properties)||"< Value >"),n.$$.dirty[0]&2228232&&e(5,A=(e(21,c=l.toHandle)===null||c===void 0?void 0:c.nodeId)==U)},[d,_,w,l,u,A,b,s,i,t,k,C,I,y,v,R,T,U,o,f,h,c,B,D,L,F,N,H]}class vv extends it{constructor(r){super(),lt(this,r,mv,gv,Ve,{data:0,isConnectable:1,selected:2,id:17},null,[-1,-1])}}function Jf(n,r,e){const t=n.slice();return t[30]=r[e],t[31]=r,t[32]=e,t}function Zf(n){let r,e;return r=new nt({props:{type:"target",class:"customHandle",position:Ye.Left,id:"target",style:n[13](),isConnectableStart:!1,isConnectable:n[1]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i[0]&2&&(s.isConnectable=t[1]),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Kf(n){let r=n[6],e,t,i=$f(n);return{c(){i.c(),e=pe()},l(s){i.l(s),e=pe()},m(s,l){i.m(s,l),E(s,e,l),t=!0},p(s,l){l[0]&64&&Ve(r,r=s[6])?(Xe(),le(i,1,1,Ne),Ge(),i=$f(s),i.c(),re(i,1),i.m(e.parentNode,e)):i.p(s,l)},i(s){t||(re(i),t=!0)},o(s){le(i),t=!1},d(s){s&&m(e),i.d(s)}}}function $f(n){let r,e,t,i,s,l,a,u;return r=new nt({props:{type:"source",position:Ye.Top,id:"source",style:n[14](),isConnectable:n[1]}}),t=new nt({props:{type:"source",position:Ye.Left,id:"source",style:n[14](),isConnectable:n[1]}}),s=new nt({props:{type:"source",position:Ye.Right,id:"source",style:n[14](),isConnectable:n[1]}}),a=new nt({props:{type:"source",position:Ye.Bottom,id:"source",style:n[14](),isConnectable:n[1]}}),{c(){ve(r.$$.fragment),e=ee(),ve(t.$$.fragment),i=ee(),ve(s.$$.fragment),l=ee(),ve(a.$$.fragment)},l(o){be(r.$$.fragment,o),e=te(o),be(t.$$.fragment,o),i=te(o),be(s.$$.fragment,o),l=te(o),be(a.$$.fragment,o)},m(o,f){we(r,o,f),E(o,e,f),we(t,o,f),E(o,i,f),we(s,o,f),E(o,l,f),we(a,o,f),u=!0},p(o,f){const h={};f[0]&2&&(h.isConnectable=o[1]),r.$set(h);const c={};f[0]&2&&(c.isConnectable=o[1]),t.$set(c);const d={};f[0]&2&&(d.isConnectable=o[1]),s.$set(d);const _={};f[0]&2&&(_.isConnectable=o[1]),a.$set(_)},i(o){u||(re(r.$$.fragment,o),re(t.$$.fragment,o),re(s.$$.fragment,o),re(a.$$.fragment,o),u=!0)},o(o){le(r.$$.fragment,o),le(t.$$.fragment,o),le(s.$$.fragment,o),le(a.$$.fragment,o),u=!1},d(o){o&&(m(e),m(i),m(l)),ye(r,o),ye(t,o),ye(s,o),ye(a,o)}}}function ec(n){let r,e=Pe(n[0].user_properties),t=[];for(let i=0;i<e.length;i+=1)t[i]=tc(Jf(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=pe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=pe()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);E(i,r,s)},p(i,s){if(s[0]&393){e=Pe(i[0].user_properties);let l;for(l=0;l<e.length;l+=1){const a=Jf(i,e,l);t[l]?t[l].p(a,s):(t[l]=tc(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),ot(t,i)}}}function tc(n){let r,e,t,i,s,l,a,u,o;function f(..._){return n[24](n[32],..._)}function h(){n[25].call(t,n[32])}function c(..._){return n[26](n[32],..._)}function d(){n[27].call(l,n[32])}return{c(){r=G("div"),e=G("div"),t=G("input"),i=ee(),s=G("div"),l=G("input"),a=ee(),this.h()},l(_){r=W(_,"DIV",{class:!0});var w=_e(r);e=W(w,"DIV",{class:!0});var k=_e(e);t=W(k,"INPUT",{placeholder:!0}),k.forEach(m),i=te(w),s=W(w,"DIV",{class:!0});var C=_e(s);l=W(C,"INPUT",{placeholder:!0}),C.forEach(m),a=te(w),w.forEach(m),this.h()},h(){J(t,"placeholder","property"),J(e,"class","user-property flex-column"),J(l,"placeholder","value"),J(s,"class","user-value flex-column flex-grow-3"),J(r,"class","user-properties flex")},m(_,w){E(_,r,w),P(r,e),P(e,t),Ie(t,n[8][n[32]][0]),P(r,i),P(r,s),P(s,l),Ie(l,n[7][n[32]][1]),P(r,a),u||(o=[fe(t,"input",f),fe(t,"input",h),fe(l,"input",c),fe(l,"input",d)],u=!0)},p(_,w){n=_,w[0]&256&&t.value!==n[8][n[32]][0]&&Ie(t,n[8][n[32]][0]),w[0]&128&&l.value!==n[7][n[32]][1]&&Ie(l,n[7][n[32]][1])},d(_){_&&m(r),u=!1,xe(o)}}}function bv(n){let r=n[4].inProgress,e,t,i,s,l,a,u,o="Condition",f,h,c,d,_,w,k="+",C,U,I,A=Zf(n),b=!n[5]&&Kf(n);l=new rn({props:{isVisible:n[2]}});let y=n[0].user_properties&&ec(n);return{c(){A.c(),e=ee(),t=G("div"),b&&b.c(),i=ee(),s=G("div"),ve(l.$$.fragment),a=ee(),u=G("i"),u.textContent=o,f=G("br"),h=ee(),c=G("input"),d=ee(),y&&y.c(),_=ee(),w=G("button"),w.textContent=k,this.h()},l(v){A.l(v),e=te(v),t=W(v,"DIV",{class:!0});var R=_e(t);b&&b.l(R),i=te(R),s=W(R,"DIV",{class:!0});var T=_e(s);be(l.$$.fragment,T),a=te(T),u=W(T,"I",{"data-svelte-h":!0}),qe(u)!=="svelte-26somz"&&(u.textContent=o),f=W(T,"BR",{}),h=te(T),c=W(T,"INPUT",{class:!0,type:!0,style:!0}),d=te(T),y&&y.l(T),_=te(T),w=W(T,"BUTTON",{"data-svelte-h":!0}),qe(w)!=="svelte-y9choq"&&(w.textContent=k),T.forEach(m),R.forEach(m),this.h()},h(){J(c,"class","nodrag label"),J(c,"type","text"),Ze(c,"background","#ece6ff"),J(s,"class","condition node-inner svelte-d75hej"),J(t,"class","condition node svelte-d75hej")},m(v,R){A.m(v,R),E(v,e,R),E(v,t,R),b&&b.m(t,null),P(t,i),P(t,s),we(l,s,null),P(s,a),P(s,u),P(s,f),P(s,h),P(s,c),Ie(c,n[9]),P(s,d),y&&y.m(s,null),P(s,_),P(s,w),C=!0,U||(I=[fe(c,"input",n[22]),fe(c,"input",n[23]),fe(w,"click",n[15]),fe(t,"click",n[16]),fe(t,"mouseenter",n[11]),fe(t,"mouseleave",n[12])],U=!0)},p(v,R){R[0]&16&&Ve(r,r=v[4].inProgress)?(Xe(),le(A,1,1,Ne),Ge(),A=Zf(v),A.c(),re(A,1),A.m(e.parentNode,e)):A.p(v,R),v[5]?b&&(Xe(),le(b,1,1,()=>{b=null}),Ge()):b?(b.p(v,R),R[0]&32&&re(b,1)):(b=Kf(v),b.c(),re(b,1),b.m(t,i));const T={};R[0]&4&&(T.isVisible=v[2]),l.$set(T),R[0]&512&&c.value!==v[9]&&Ie(c,v[9]),v[0].user_properties?y?y.p(v,R):(y=ec(v),y.c(),y.m(s,_)):y&&(y.d(1),y=null)},i(v){C||(re(A),re(b),re(l.$$.fragment,v),C=!0)},o(v){le(A),le(b),le(l.$$.fragment,v),C=!1},d(v){v&&(m(e),m(t)),A.d(v),b&&b.d(),ye(l),y&&y.d(),U=!1,xe(I)}}}function wv(n,r,e){let t,i,s,l,a,u;Me(n,rr,O=>e(28,l=O)),Me(n,Ue,O=>e(3,a=O));var o,f,h,c;let{data:d}=r,{isConnectable:_}=r,{selected:w=void 0}=r,{id:k}=r;const C=Qr();Me(n,C,O=>e(4,u=O));let U=!1,I=!1;function A(){e(6,I=!0)}function b(){e(6,I=!1)}function y(){return u.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function v(){return I?"z-index: 2;":"visibility:hidden; pointer-events: none;"}d.user_properties=[];function R(){T(),d.user_properties.push(["",""])}function T(){for(let O=0;O<l.length;O++)l[O].data==d&&Ke(Ue,a=l[O],a)}const B=O=>{e(0,d.label=O.currentTarget.value,d),Ke(Ue,a.data.label=d.label,a)};function D(){t=this.value,e(9,t),e(0,d),e(3,a),e(19,f)}const L=(O,ne)=>{e(0,d.user_properties[O][0]=ne.currentTarget.value,d),Ke(Ue,a.data.user_properties[O][0]=ne.currentTarget.value,a)};function F(O){i[O][0]=this.value,e(8,i),e(0,d),e(3,a),e(20,h)}const N=(O,ne)=>{e(0,d.user_properties[O][1]=ne.currentTarget.value,d),Ke(Ue,a.data.user_properties[O][1]=ne.currentTarget.value,a)};function H(O){s[O][1]=this.value,e(7,s),e(0,d),e(3,a),e(21,c)}return n.$$set=O=>{"data"in O&&e(0,d=O.data),"isConnectable"in O&&e(1,_=O.isConnectable),"selected"in O&&e(2,w=O.selected),"id"in O&&e(17,k=O.id)},n.$$.update=()=>{n.$$.dirty[0]&393232&&e(5,U=(e(18,o=u.toHandle)===null||o===void 0?void 0:o.nodeId)==k),n.$$.dirty[0]&524297&&e(9,t=(d==null?void 0:d.label)||"< label >"),n.$$.dirty[0]&1048585&&e(8,i=(d==null?void 0:d.user_properties)||(e(20,h=a==null?void 0:a.data)===null||h===void 0?void 0:h.user_properties)||"< Property >"),n.$$.dirty[0]&2097161&&e(7,s=(d==null?void 0:d.user_properties)||(e(21,c=a==null?void 0:a.data)===null||c===void 0?void 0:c.user_properties)||"< Value >")},[d,_,w,a,u,U,I,s,i,t,C,A,b,y,v,R,T,k,o,f,h,c,B,D,L,F,N,H]}class yv extends it{constructor(r){super(),lt(this,r,wv,bv,Ve,{data:0,isConnectable:1,selected:2,id:17},null,[-1,-1])}}function rc(n,r,e){const t=n.slice();return t[30]=r[e],t[31]=r,t[32]=e,t}function nc(n){let r,e;return r=new nt({props:{type:"target",class:"customHandle",position:Ye.Left,id:"target",style:n[15](),isConnectableStart:!1,isConnectable:n[1]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i[0]&2&&(s.isConnectable=t[1]),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function ic(n){let r=n[6],e,t,i=lc(n);return{c(){i.c(),e=pe()},l(s){i.l(s),e=pe()},m(s,l){i.m(s,l),E(s,e,l),t=!0},p(s,l){l[0]&64&&Ve(r,r=s[6])?(Xe(),le(i,1,1,Ne),Ge(),i=lc(s),i.c(),re(i,1),i.m(e.parentNode,e)):i.p(s,l)},i(s){t||(re(i),t=!0)},o(s){le(i),t=!1},d(s){s&&m(e),i.d(s)}}}function lc(n){let r,e,t,i,s,l,a,u;return r=new nt({props:{type:"source",position:Ye.Top,id:"source",style:n[16](),isConnectable:n[1]}}),t=new nt({props:{type:"source",position:Ye.Left,id:"source",style:n[16](),isConnectable:n[1]}}),s=new nt({props:{type:"source",position:Ye.Right,id:"source",style:n[16](),isConnectable:n[1]}}),a=new nt({props:{type:"source",position:Ye.Bottom,id:"source",style:n[16](),isConnectable:n[1]}}),{c(){ve(r.$$.fragment),e=ee(),ve(t.$$.fragment),i=ee(),ve(s.$$.fragment),l=ee(),ve(a.$$.fragment)},l(o){be(r.$$.fragment,o),e=te(o),be(t.$$.fragment,o),i=te(o),be(s.$$.fragment,o),l=te(o),be(a.$$.fragment,o)},m(o,f){we(r,o,f),E(o,e,f),we(t,o,f),E(o,i,f),we(s,o,f),E(o,l,f),we(a,o,f),u=!0},p(o,f){const h={};f[0]&2&&(h.isConnectable=o[1]),r.$set(h);const c={};f[0]&2&&(c.isConnectable=o[1]),t.$set(c);const d={};f[0]&2&&(d.isConnectable=o[1]),s.$set(d);const _={};f[0]&2&&(_.isConnectable=o[1]),a.$set(_)},i(o){u||(re(r.$$.fragment,o),re(t.$$.fragment,o),re(s.$$.fragment,o),re(a.$$.fragment,o),u=!0)},o(o){le(r.$$.fragment,o),le(t.$$.fragment,o),le(s.$$.fragment,o),le(a.$$.fragment,o),u=!1},d(o){o&&(m(e),m(i),m(l)),ye(r,o),ye(t,o),ye(s,o),ye(a,o)}}}function sc(n){let r,e=Pe(n[0].user_properties),t=[];for(let i=0;i<e.length;i+=1)t[i]=ac(rc(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=pe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=pe()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);E(i,r,s)},p(i,s){if(s[0]&401){e=Pe(i[0].user_properties);let l;for(l=0;l<e.length;l+=1){const a=rc(i,e,l);t[l]?t[l].p(a,s):(t[l]=ac(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),ot(t,i)}}}function ac(n){let r,e,t,i,s,l,a,u,o;function f(..._){return n[24](n[32],..._)}function h(){n[25].call(t,n[32])}function c(..._){return n[26](n[32],..._)}function d(){n[27].call(l,n[32])}return{c(){r=G("div"),e=G("div"),t=G("input"),i=ee(),s=G("div"),l=G("input"),a=ee(),this.h()},l(_){r=W(_,"DIV",{class:!0});var w=_e(r);e=W(w,"DIV",{class:!0});var k=_e(e);t=W(k,"INPUT",{placeholder:!0}),k.forEach(m),i=te(w),s=W(w,"DIV",{class:!0});var C=_e(s);l=W(C,"INPUT",{placeholder:!0}),C.forEach(m),a=te(w),w.forEach(m),this.h()},h(){J(t,"placeholder","property"),J(e,"class","user-property flex-column"),J(l,"placeholder","value"),J(s,"class","user-value flex-column flex-grow-3"),J(r,"class","user-properties flex")},m(_,w){E(_,r,w),P(r,e),P(e,t),Ie(t,n[8][n[32]][0]),P(r,i),P(r,s),P(s,l),Ie(l,n[7][n[32]][1]),P(r,a),u||(o=[fe(t,"input",f),fe(t,"input",h),fe(l,"input",c),fe(l,"input",d)],u=!0)},p(_,w){n=_,w[0]&256&&t.value!==n[8][n[32]][0]&&Ie(t,n[8][n[32]][0]),w[0]&128&&l.value!==n[7][n[32]][1]&&Ie(l,n[7][n[32]][1])},d(_){_&&m(r),u=!1,xe(o)}}}function kv(n){let r=n[3].inProgress,e,t,i,s,l,a="Agent",u,o,f,h,c,d,_,w,k,C="+",U,I,A,b=nc(n),y=!n[5]&&ic(n);f=new rn({props:{isVisible:n[2]}});let v=n[0].user_properties&&sc(n);return{c(){b.c(),e=ee(),t=G("div"),y&&y.c(),i=ee(),s=G("div"),l=G("i"),l.textContent=a,u=G("br"),o=ee(),ve(f.$$.fragment),h=ee(),c=G("input"),d=G("br"),_=ee(),v&&v.c(),w=ee(),k=G("button"),k.textContent=C,this.h()},l(R){b.l(R),e=te(R),t=W(R,"DIV",{class:!0});var T=_e(t);y&&y.l(T),i=te(T),s=W(T,"DIV",{class:!0});var B=_e(s);l=W(B,"I",{"data-svelte-h":!0}),qe(l)!=="svelte-13s1fb"&&(l.textContent=a),u=W(B,"BR",{}),o=te(B),be(f.$$.fragment,B),h=te(B),c=W(B,"INPUT",{class:!0,type:!0,style:!0}),d=W(B,"BR",{}),_=te(B),v&&v.l(B),w=te(B),k=W(B,"BUTTON",{"data-svelte-h":!0}),qe(k)!=="svelte-y9choq"&&(k.textContent=C),B.forEach(m),T.forEach(m),this.h()},h(){J(c,"class","nodrag label"),J(c,"type","text"),Ze(c,"background","#f0e6e6"),J(s,"class","agent-inner node-inner"),J(t,"class","agent node svelte-n06ybh")},m(R,T){b.m(R,T),E(R,e,T),E(R,t,T),y&&y.m(t,null),P(t,i),P(t,s),P(s,l),P(s,u),P(s,o),we(f,s,null),P(s,h),P(s,c),Ie(c,n[9]),P(s,d),P(s,_),v&&v.m(s,null),P(s,w),P(s,k),U=!0,I||(A=[fe(c,"input",n[22]),fe(c,"input",n[23]),fe(k,"click",n[10]),fe(t,"click",n[11]),fe(t,"mouseenter",n[13]),fe(t,"mouseleave",n[14])],I=!0)},p(R,T){T[0]&8&&Ve(r,r=R[3].inProgress)?(Xe(),le(b,1,1,Ne),Ge(),b=nc(R),b.c(),re(b,1),b.m(e.parentNode,e)):b.p(R,T),R[5]?y&&(Xe(),le(y,1,1,()=>{y=null}),Ge()):y?(y.p(R,T),T[0]&32&&re(y,1)):(y=ic(R),y.c(),re(y,1),y.m(t,i));const B={};T[0]&4&&(B.isVisible=R[2]),f.$set(B),T[0]&512&&c.value!==R[9]&&Ie(c,R[9]),R[0].user_properties?v?v.p(R,T):(v=sc(R),v.c(),v.m(s,w)):v&&(v.d(1),v=null)},i(R){U||(re(b),re(y),re(f.$$.fragment,R),U=!0)},o(R){le(b),le(y),le(f.$$.fragment,R),U=!1},d(R){R&&(m(e),m(t)),b.d(R),y&&y.d(),ye(f),v&&v.d(),I=!1,xe(A)}}}function Dv(n,r,e){let t,i,s,l,a,u;Me(n,rr,O=>e(28,a=O)),Me(n,Ue,O=>e(4,u=O));var o,f,h,c;let{data:d}=r,{isConnectable:_}=r,{selected:w=void 0}=r,{id:k}=r;d.user_properties=[];function C(){U(),d.user_properties.push(["",""])}function U(){for(let O=0;O<a.length;O++)a[O].data==d&&Ke(Ue,u=a[O],u)}const I=Qr();Me(n,I,O=>e(3,l=O));let A=!1,b=!1;function y(){e(6,b=!0)}function v(){e(6,b=!1)}function R(){return l.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function T(){return b?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const B=O=>{e(0,d.label=O.currentTarget.value,d),Ke(Ue,u.data.label=d.label,u)};function D(){t=this.value,e(9,t),e(0,d),e(4,u),e(18,o)}const L=(O,ne)=>{e(0,d.user_properties[O][0]=ne.currentTarget.value,d),Ke(Ue,u.data.user_properties[O][0]=ne.currentTarget.value,u)};function F(O){i[O][0]=this.value,e(8,i),e(0,d),e(4,u),e(19,f)}const N=(O,ne)=>{e(0,d.user_properties[O][1]=ne.currentTarget.value,d),Ke(Ue,u.data.user_properties[O][1]=ne.currentTarget.value,u)};function H(O){s[O][1]=this.value,e(7,s),e(0,d),e(4,u),e(20,h)}return n.$$set=O=>{"data"in O&&e(0,d=O.data),"isConnectable"in O&&e(1,_=O.isConnectable),"selected"in O&&e(2,w=O.selected),"id"in O&&e(17,k=O.id)},n.$$.update=()=>{n.$$.dirty[0]&262161&&e(9,t=(d==null?void 0:d.label)||"< label >"),n.$$.dirty[0]&524305&&e(8,i=(d==null?void 0:d.user_properties)||(e(19,f=u==null?void 0:u.data)===null||f===void 0?void 0:f.user_properties)),n.$$.dirty[0]&1048593&&e(7,s=(d==null?void 0:d.user_properties)||(e(20,h=u==null?void 0:u.data)===null||h===void 0?void 0:h.user_properties)),n.$$.dirty[0]&2228232&&e(5,A=(e(21,c=l.toHandle)===null||c===void 0?void 0:c.nodeId)==k)},[d,_,w,l,u,A,b,s,i,t,C,U,I,y,v,R,T,k,o,f,h,c,B,D,L,F,N,H]}class Ev extends it{constructor(r){super(),lt(this,r,Dv,kv,Ve,{data:0,isConnectable:1,selected:2,id:17},null,[-1,-1])}}function uc(n,r,e){const t=n.slice();return t[31]=r[e],t[32]=r,t[33]=e,t}function oc(n){let r,e;return r=new nt({props:{type:"target",class:"customHandle",position:Ye.Left,id:"target",style:n[17](),isConnectableStart:!1,isConnectable:n[1]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i[0]&2&&(s.isConnectable=t[1]),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function fc(n){let r=n[8],e,t,i=cc(n);return{c(){i.c(),e=pe()},l(s){i.l(s),e=pe()},m(s,l){i.m(s,l),E(s,e,l),t=!0},p(s,l){l[0]&256&&Ve(r,r=s[8])?(Xe(),le(i,1,1,Ne),Ge(),i=cc(s),i.c(),re(i,1),i.m(e.parentNode,e)):i.p(s,l)},i(s){t||(re(i),t=!0)},o(s){le(i),t=!1},d(s){s&&m(e),i.d(s)}}}function cc(n){let r,e,t,i,s,l,a,u;return r=new nt({props:{type:"source",position:Ye.Top,id:"source",style:n[18](),isConnectable:n[1]}}),t=new nt({props:{type:"source",position:Ye.Left,id:"source",style:n[18](),isConnectable:n[1]}}),s=new nt({props:{type:"source",position:Ye.Right,id:"source",style:n[18](),isConnectable:n[1]}}),a=new nt({props:{type:"source",position:Ye.Bottom,id:"source",style:n[18](),isConnectable:n[1]}}),{c(){ve(r.$$.fragment),e=ee(),ve(t.$$.fragment),i=ee(),ve(s.$$.fragment),l=ee(),ve(a.$$.fragment)},l(o){be(r.$$.fragment,o),e=te(o),be(t.$$.fragment,o),i=te(o),be(s.$$.fragment,o),l=te(o),be(a.$$.fragment,o)},m(o,f){we(r,o,f),E(o,e,f),we(t,o,f),E(o,i,f),we(s,o,f),E(o,l,f),we(a,o,f),u=!0},p(o,f){const h={};f[0]&2&&(h.isConnectable=o[1]),r.$set(h);const c={};f[0]&2&&(c.isConnectable=o[1]),t.$set(c);const d={};f[0]&2&&(d.isConnectable=o[1]),s.$set(d);const _={};f[0]&2&&(_.isConnectable=o[1]),a.$set(_)},i(o){u||(re(r.$$.fragment,o),re(t.$$.fragment,o),re(s.$$.fragment,o),re(a.$$.fragment,o),u=!0)},o(o){le(r.$$.fragment,o),le(t.$$.fragment,o),le(s.$$.fragment,o),le(a.$$.fragment,o),u=!1},d(o){o&&(m(e),m(i),m(l)),ye(r,o),ye(t,o),ye(s,o),ye(a,o)}}}function Tv(n){let r,e;return r=new n[34].ItemTree({props:{list:Oc,filter_value_store:n[35],select_item:n[36]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i[1]&16&&(s.filter_value_store=t[35]),i[1]&32&&(s.select_item=t[36]),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function dc(n){let r,e=Pe(n[0].user_properties),t=[];for(let i=0;i<e.length;i+=1)t[i]=hc(uc(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=pe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=pe()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);E(i,r,s)},p(i,s){if(s[0]&1601){e=Pe(i[0].user_properties);let l;for(l=0;l<e.length;l+=1){const a=uc(i,e,l);t[l]?t[l].p(a,s):(t[l]=hc(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),ot(t,i)}}}function hc(n){let r,e,t,i,s,l,a,u,o;function f(..._){return n[26](n[33],..._)}function h(){n[27].call(t,n[33])}function c(..._){return n[28](n[33],..._)}function d(){n[29].call(l,n[33])}return{c(){r=G("div"),e=G("div"),t=G("input"),i=ee(),s=G("div"),l=G("input"),a=ee(),this.h()},l(_){r=W(_,"DIV",{class:!0});var w=_e(r);e=W(w,"DIV",{class:!0});var k=_e(e);t=W(k,"INPUT",{placeholder:!0}),k.forEach(m),i=te(w),s=W(w,"DIV",{class:!0});var C=_e(s);l=W(C,"INPUT",{placeholder:!0}),C.forEach(m),a=te(w),w.forEach(m),this.h()},h(){J(t,"placeholder","property"),J(e,"class","user-property flex-column"),J(l,"placeholder","value"),J(s,"class","user-value flex-column flex-grow-3"),J(r,"class","user-properties flex")},m(_,w){E(_,r,w),P(r,e),P(e,t),Ie(t,n[10][n[33]][0]),P(r,i),P(r,s),P(s,l),Ie(l,n[9][n[33]][1]),P(r,a),u||(o=[fe(t,"input",f),fe(t,"input",h),fe(l,"input",c),fe(l,"input",d)],u=!0)},p(_,w){n=_,w[0]&1024&&t.value!==n[10][n[33]][0]&&Ie(t,n[10][n[33]][0]),w[0]&512&&l.value!==n[9][n[33]][1]&&Ie(l,n[9][n[33]][1])},d(_){_&&m(r),u=!1,xe(o)}}}function Cv(n){let r=n[5].inProgress,e,t,i,s,l,a,u,o,f,h,c,d,_,w,k,C,U,I,A="+",b,y,v,R=oc(n),T=!n[7]&&fc(n);l=new rn({props:{isVisible:n[4]}}),_=new Yn({props:{node_id:n[2],element_id:n[0].d3f_class,input_color:"white",$$slots:{default:[Tv,({R:D,filter_value_store:L,select_item:F})=>({34:D,35:L,36:F}),({R:D,filter_value_store:L,select_item:F})=>[0,(D?8:0)|(L?16:0)|(F?32:0)]]},$$scope:{ctx:n}}});let B=n[0].user_properties&&dc(n);return{c(){R.c(),e=ee(),t=G("div"),T&&T.c(),i=ee(),s=G("div"),ve(l.$$.fragment),a=ee(),u=G("i"),o=M(n[3]),f=G("br"),h=ee(),c=G("br"),d=ee(),ve(_.$$.fragment),w=ee(),k=G("input"),C=ee(),B&&B.c(),U=ee(),I=G("button"),I.textContent=A,this.h()},l(D){R.l(D),e=te(D),t=W(D,"DIV",{class:!0});var L=_e(t);T&&T.l(L),i=te(L),s=W(L,"DIV",{class:!0});var F=_e(s);be(l.$$.fragment,F),a=te(F),u=W(F,"I",{});var N=_e(u);o=j(N,n[3]),N.forEach(m),f=W(F,"BR",{}),h=te(F),c=W(F,"BR",{}),d=te(F),be(_.$$.fragment,F),w=te(F),k=W(F,"INPUT",{class:!0,type:!0,style:!0}),C=te(F),B&&B.l(F),U=te(F),I=W(F,"BUTTON",{"data-svelte-h":!0}),qe(I)!=="svelte-y9choq"&&(I.textContent=A),F.forEach(m),L.forEach(m),this.h()},h(){J(k,"class","nodrag label"),J(k,"type","text"),Ze(k,"background","white"),J(s,"class","event node-inner svelte-r7gabh"),J(t,"class","event node svelte-r7gabh")},m(D,L){R.m(D,L),E(D,e,L),E(D,t,L),T&&T.m(t,null),P(t,i),P(t,s),we(l,s,null),P(s,a),P(s,u),P(u,o),P(s,f),P(s,h),P(s,c),P(s,d),we(_,s,null),P(s,w),P(s,k),Ie(k,n[11]),P(s,C),B&&B.m(s,null),P(s,U),P(s,I),b=!0,y||(v=[fe(k,"input",n[24]),fe(k,"input",n[25]),fe(I,"click",n[12]),fe(t,"click",n[13]),fe(t,"mouseenter",n[15]),fe(t,"mouseleave",n[16])],y=!0)},p(D,L){L[0]&32&&Ve(r,r=D[5].inProgress)?(Xe(),le(R,1,1,Ne),Ge(),R=oc(D),R.c(),re(R,1),R.m(e.parentNode,e)):R.p(D,L),D[7]?T&&(Xe(),le(T,1,1,()=>{T=null}),Ge()):T?(T.p(D,L),L[0]&128&&re(T,1)):(T=fc(D),T.c(),re(T,1),T.m(t,i));const F={};L[0]&16&&(F.isVisible=D[4]),l.$set(F),(!b||L[0]&8)&&ce(o,D[3]);const N={};L[0]&4&&(N.node_id=D[2]),L[0]&1&&(N.element_id=D[0].d3f_class),L[1]&112&&(N.$$scope={dirty:L,ctx:D}),_.$set(N),L[0]&2048&&k.value!==D[11]&&Ie(k,D[11]),D[0].user_properties?B?B.p(D,L):(B=dc(D),B.c(),B.m(s,U)):B&&(B.d(1),B=null)},i(D){b||(re(R),re(T),re(l.$$.fragment,D),re(_.$$.fragment,D),b=!0)},o(D){le(R),le(T),le(l.$$.fragment,D),le(_.$$.fragment,D),b=!1},d(D){D&&(m(e),m(t)),R.d(D),T&&T.d(),ye(l),ye(_),B&&B.d(),y=!1,xe(v)}}}function Nv(n,r,e){let t,i,s,l,a,u;Me(n,rr,Q=>e(30,a=Q)),Me(n,Ue,Q=>e(6,u=Q));var o,f,h,c;let{data:d}=r,{isConnectable:_}=r,{id:w}=r;d.user_properties=[];let{nodeType:k="EventNode"}=r,{nodeTypeLabel:C="Event"}=r,{selected:U=void 0}=r;function I(){A(),d.user_properties.push(["",""])}function A(){for(let Q=0;Q<a.length;Q++)a[Q].data==d&&Ke(Ue,u=a[Q],u)}const b=Qr();Me(n,b,Q=>e(5,l=Q));let y=!1,v=!1;function R(){e(8,v=!0)}function T(){e(8,v=!1)}function B(){return l.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function D(){return v?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const L=Q=>{e(0,d.label=Q.currentTarget.value,d),Ke(Ue,u.data.label=d.label,u)};function F(){t=this.value,e(11,t),e(0,d),e(6,u),e(20,o)}const N=(Q,z)=>{e(0,d.user_properties[Q][0]=z.currentTarget.value,d),Ke(Ue,u.data.user_properties[Q][0]=z.currentTarget.value,u)};function H(Q){i[Q][0]=this.value,e(10,i),e(0,d),e(6,u),e(21,f)}const O=(Q,z)=>{e(0,d.user_properties[Q][1]=z.currentTarget.value,d),Ke(Ue,u.data.user_properties[Q][1]=z.currentTarget.value,u)};function ne(Q){s[Q][1]=this.value,e(9,s),e(0,d),e(6,u),e(22,h)}return n.$$set=Q=>{"data"in Q&&e(0,d=Q.data),"isConnectable"in Q&&e(1,_=Q.isConnectable),"id"in Q&&e(2,w=Q.id),"nodeType"in Q&&e(19,k=Q.nodeType),"nodeTypeLabel"in Q&&e(3,C=Q.nodeTypeLabel),"selected"in Q&&e(4,U=Q.selected)},n.$$.update=()=>{n.$$.dirty[0]&1048641&&e(11,t=(d==null?void 0:d.label)||"< label >"),n.$$.dirty[0]&2097217&&e(10,i=(d==null?void 0:d.user_properties)||(e(21,f=u==null?void 0:u.data)===null||f===void 0?void 0:f.user_properties)||"< Property >"),n.$$.dirty[0]&4194369&&e(9,s=(d==null?void 0:d.user_properties)||(e(22,h=u==null?void 0:u.data)===null||h===void 0?void 0:h.user_properties)||"< Value >"),n.$$.dirty[0]&8388644&&e(7,y=(e(23,c=l.toHandle)===null||c===void 0?void 0:c.nodeId)==w)},[d,_,w,C,U,l,u,y,v,s,i,t,I,A,b,R,T,B,D,k,o,f,h,c,L,F,N,H,O,ne]}class Av extends it{constructor(r){super(),lt(this,r,Nv,Cv,Ve,{data:0,isConnectable:1,id:2,nodeType:19,nodeTypeLabel:3,selected:4},null,[-1,-1])}}function _c(n,r){const e=n.internals.positionAbsolute||{x:0,y:0},t=r.internals.positionAbsolute||{x:0,y:0},i=(n.measured.width??0)/2,s=(n.measured.height??0)/2,l=e.x+i,a=e.y+s,u=t.x+(r.measured.width??0)/2,o=t.y+(r.measured.height??0)/2,f=(u-l)/(2*i)-(o-a)/(2*s),h=(u-l)/(2*i)+(o-a)/(2*s),c=1/(Math.abs(f)+Math.abs(h)),d=c*f,_=c*h,w=i*(d+_)+l,k=s*(-d+_)+a;return{x:w,y:k}}function pc(n,r){var l,a;if(!n.measured.width||!n.measured.height)return null;const e=Math.round(((l=n.internals.positionAbsolute)==null?void 0:l.x)??0),t=Math.round(((a=n.internals.positionAbsolute)==null?void 0:a.y)??0),i=Math.round(r.x),s=Math.round(r.y);return i<=e+1?Ye.Left:i>=e+n.measured.width-1?Ye.Right:s<=t+1?Ye.Top:s>=t+n.measured.height-1?Ye.Bottom:Ye.Top}function as(n,r){const e=_c(n,r),t=_c(r,n),i=pc(n,e),s=pc(r,t);return{sx:e.x,sy:e.y,tx:t.x,ty:t.y,sourcePos:i,targetPos:s}}function Sv(n){let r,e;return r=new n[19].ItemProperty({props:{list:Lc,filter_value_store:n[20],select_item:n[21]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i&1048576&&(s.filter_value_store=t[20]),i&2097152&&(s.select_item=t[21]),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Iv(n){let r,e,t=`translate(-50%, -50%) translate(${n[5]}px,${n[6]}px)`,i;return e=new Yn({props:{node_id:n[0],element_id:n[1].label,input_color:"#ffffff00",place_holder:String(n[1].label),flow_store_hook:Ur,data_save_key:"d3f_property",$$slots:{default:[Sv,({R:s,filter_value_store:l,select_item:a})=>({19:s,20:l,21:a}),({R:s,filter_value_store:l,select_item:a})=>(s?524288:0)|(l?1048576:0)|(a?2097152:0)]},$$scope:{ctx:n}}}),{c(){r=G("div"),ve(e.$$.fragment),this.h()},l(s){r=W(s,"DIV",{class:!0});var l=_e(r);be(e.$$.fragment,l),l.forEach(m),this.h()},h(){J(r,"class","edge-label-container svelte-566npr"),Ze(r,"transform",t)},m(s,l){E(s,r,l),we(e,r,null),i=!0},p(s,l){const a={};l&1&&(a.node_id=s[0]),l&2&&(a.element_id=s[1].label),l&2&&(a.place_holder=String(s[1].label)),l&7340032&&(a.$$scope={dirty:l,ctx:s}),e.$set(a),l&96&&t!==(t=`translate(-50%, -50%) translate(${s[5]}px,${s[6]}px)`)&&Ze(r,"transform",t)},i(s){i||(re(e.$$.fragment,s),i=!0)},o(s){le(e.$$.fragment,s),i=!1},d(s){s&&m(r),ye(e)}}}function Rv(n){let r,e,t,i;return r=new gp({props:{path:n[4],markerEnd:n[2],style:n[3]}}),t=new mp({props:{$$slots:{default:[Iv]},$$scope:{ctx:n}}}),{c(){ve(r.$$.fragment),e=ee(),ve(t.$$.fragment)},l(s){be(r.$$.fragment,s),e=te(s),be(t.$$.fragment,s)},m(s,l){we(r,s,l),E(s,e,l),we(t,s,l),i=!0},p(s,[l]){const a={};l&16&&(a.path=s[4]),l&4&&(a.markerEnd=s[2]),l&8&&(a.style=s[3]),r.$set(a);const u={};l&4194403&&(u.$$scope={dirty:l,ctx:s}),t.$set(u)},i(s){i||(re(r.$$.fragment,s),re(t.$$.fragment,s),i=!0)},o(s){le(r.$$.fragment,s),le(t.$$.fragment,s),i=!1},d(s){s&&m(e),ye(r,s),ye(t,s)}}}function Fv(n,r,e){let t,i,s,l=Ne,a=()=>(l(),l=Pr(i,B=>e(17,s=B)),i),u,o=Ne,f=()=>(o(),o=Pr(t,B=>e(18,u=B)),t);n.$$.on_destroy.push(()=>l()),n.$$.on_destroy.push(()=>o());let{id:h}=r,{data:c}=r,{sourceX:d}=r,{sourceY:_}=r,{source:w}=r,{sourcePosition:k}=r,{targetX:C}=r,{targetY:U}=r,{target:I}=r,{targetPosition:A}=r,{markerEnd:b=Nc.ArrowClosed}=r,{style:y="stroke-width: 2px"}=r,v,R,T;return n.$$set=B=>{"id"in B&&e(0,h=B.id),"data"in B&&e(1,c=B.data),"sourceX"in B&&e(9,d=B.sourceX),"sourceY"in B&&e(10,_=B.sourceY),"source"in B&&e(11,w=B.source),"sourcePosition"in B&&e(12,k=B.sourcePosition),"targetX"in B&&e(13,C=B.targetX),"targetY"in B&&e(14,U=B.targetY),"target"in B&&e(15,I=B.target),"targetPosition"in B&&e(16,A=B.targetPosition),"markerEnd"in B&&e(2,b=B.markerEnd),"style"in B&&e(3,y=B.style)},n.$$.update=()=>{if(n.$$.dirty&2048&&f(e(8,t=Ha(w))),n.$$.dirty&32768&&a(e(7,i=Ha(I))),n.$$.dirty&393216)if(u&&s){const B=as(u,s);e(4,[v,R,T]=Yl({sourceX:B.sx,sourceY:B.sy,sourcePosition:B.sourcePos,targetX:B.tx,targetY:B.ty,targetPosition:B.targetPos}),v,(e(5,R),e(18,u),e(17,s)),(e(6,T),e(18,u),e(17,s)))}else e(4,v=void 0)},[h,c,b,y,v,R,T,i,t,d,_,w,k,C,U,I,A,s,u]}class Ov extends it{constructor(r){super(),lt(this,r,Fv,Rv,Ve,{id:0,data:1,sourceX:9,sourceY:10,source:11,sourcePosition:12,targetX:13,targetY:14,target:15,targetPosition:16,markerEnd:2,style:3})}}function gc(n,r,e){const t=n.slice();return t[7]=r[e],t}function mc(n){let r,e=Pe(n[2]),t=[];for(let i=0;i<e.length;i+=1)t[i]=vc(gc(n,e,i));return{c(){r=G("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){r=W(i,"DIV",{class:!0});var s=_e(r);for(let l=0;l<t.length;l+=1)t[l].l(s);s.forEach(m),this.h()},h(){J(r,"class","file-list svelte-9u10j")},m(i,s){E(i,r,s);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(r,null)},p(i,s){if(s&20){e=Pe(i[2]);let l;for(l=0;l<e.length;l+=1){const a=gc(i,e,l);t[l]?t[l].p(a,s):(t[l]=vc(a),t[l].c(),t[l].m(r,null))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),ot(t,i)}}}function vc(n){let r,e=n[7].name+"",t,i,s=n[7].nodeCount+"",l,a,u=n[7].edgeCount+"",o,f,h,c;function d(){return n[5](n[7])}return{c(){r=G("div"),t=M(e),i=M(" ("),l=M(s),a=M(" nodes, "),o=M(u),f=M(` edges)
          `),this.h()},l(_){r=W(_,"DIV",{class:!0});var w=_e(r);t=j(w,e),i=j(w," ("),l=j(w,s),a=j(w," nodes, "),o=j(w,u),f=j(w,` edges)
          `),w.forEach(m),this.h()},h(){J(r,"class","file-item svelte-9u10j")},m(_,w){E(_,r,w),P(r,t),P(r,i),P(r,l),P(r,a),P(r,o),P(r,f),h||(c=fe(r,"click",d),h=!0)},p(_,w){n=_,w&4&&e!==(e=n[7].name+"")&&ce(t,e),w&4&&s!==(s=n[7].nodeCount+"")&&ce(l,s),w&4&&u!==(u=n[7].edgeCount+"")&&ce(o,u)},d(_){_&&m(r),h=!1,c()}}}function Bv(n){let r,e,t,i,s,l,a=n[1]&&mc(n);return{c(){r=G("div"),e=G("button"),t=M(n[0]),i=ee(),a&&a.c(),this.h()},l(u){r=W(u,"DIV",{class:!0});var o=_e(r);e=W(o,"BUTTON",{class:!0});var f=_e(e);t=j(f,n[0]),f.forEach(m),i=te(o),a&&a.l(o),o.forEach(m),this.h()},h(){J(e,"class","svelte-9u10j"),J(r,"class","pick-list-container svelte-9u10j")},m(u,o){E(u,r,o),P(r,e),P(e,t),P(r,i),a&&a.m(r,null),s||(l=fe(e,"click",n[3]),s=!0)},p(u,[o]){o&1&&ce(t,u[0]),u[1]?a?a.p(u,o):(a=mc(u),a.c(),a.m(r,null)):a&&(a.d(1),a=null)},i:Ne,o:Ne,d(u){u&&m(r),a&&a.d(),s=!1,l()}}}async function Lv(){return await(await fetch("/cad/examples.json")).json()}function Pv(n,r,e){const t=os();let i=!1,{selectedFile:s="Example Graphs"}=r,l=[];function a(){e(1,i=!i)}function u(f){e(0,s=f),e(1,i=!1),t("fileSelected",f)}fl(async()=>{e(2,l=await Lv())});const o=f=>u(f.name);return n.$$set=f=>{"selectedFile"in f&&e(0,s=f.selectedFile)},[s,i,l,a,u,o]}class qv extends it{constructor(r){super(),lt(this,r,Pv,Bv,Ve,{selectedFile:0})}}function bc(n){let r,e,t,i,s;return{c(){r=wa("path"),e=ee(),t=wa("circle"),this.h()},l(l){r=ya(l,"path",{fill:!0,"stroke-width":!0,class:!0,stroke:!0,d:!0}),_e(r).forEach(m),e=te(l),t=ya(l,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),_e(t).forEach(m),this.h()},h(){J(r,"fill","transparent"),J(r,"stroke-width",2.5),J(r,"class","animated"),J(r,"stroke","black"),J(r,"d",n[2]),J(t,"cx",i=n[0].tx),J(t,"cy",s=n[0].ty),J(t,"r",3),J(t,"stroke","black"),J(t,"stroke-width",1.5)},m(l,a){E(l,r,a),E(l,e,a),E(l,t,a)},p(l,a){a&4&&J(r,"d",l[2]),a&1&&i!==(i=l[0].tx)&&J(t,"cx",i),a&1&&s!==(s=l[0].ty)&&J(t,"cy",s)},d(l){l&&(m(r),m(e),m(t))}}}function Uv(n){let r,e=n[1].inProgress&&bc(n);return{c(){e&&e.c(),r=pe()},l(t){e&&e.l(t),r=pe()},m(t,i){e&&e.m(t,i),E(t,r,i)},p(t,[i]){t[1].inProgress?e?e.p(t,i):(e=bc(t),e.c(),e.m(r.parentNode,r)):e&&(e.d(1),e=null)},i:Ne,o:Ne,d(t){t&&m(r),e&&e.d(t)}}}function Mv(n,r,e){let t;const i=Qr();Me(n,i,a=>e(1,t=a));let s,l;return n.$$.update=()=>{if(n.$$.dirty&3){const a=structuredClone(t.fromNode);t.isValid?(e(0,l=as(t.fromNode,t.toNode)),e(2,s=Yl({sourceX:l.sx,sourceY:l.sy,sourcePosition:l.sourcePos,targetX:l.tx,targetY:l.ty,targetPosition:l.targetPos})[0])):(a.id="-1",a.measured={width:1,height:1},a.position={x:t.to.x,y:t.to.y},a.internals.positionAbsolute={x:t.to.x,y:t.to.y},e(0,l=as(t.fromNode,a)),e(2,s=Yl({sourceX:l.sx,sourceY:l.sy,sourcePosition:l.sourcePos,targetX:l.tx,targetY:l.ty,targetPosition:l.targetPos})[0]))}},[l,t,s,i]}class jv extends it{constructor(r){super(),lt(this,r,Mv,Uv,Ve,{})}}function Vv(n){let r,e='This is an (very) alpha-level preview release. Please review and file bugs <a href="https://github.com/d3fend/d3fend/issues/14">here. </a>Early stage <a href="./docs">docs.</a>';return{c(){r=G("div"),r.innerHTML=e,this.h()},l(t){r=W(t,"DIV",{class:!0,"data-svelte-h":!0}),qe(r)!=="svelte-hoyi2c"&&(r.innerHTML=e),this.h()},h(){J(r,"class","font-medium")},m(t,i){E(t,r,i)},p:Ne,d(t){t&&m(r)}}}function Hv(n){let r;return{c(){r=M("Please only load models from URLs you trust!")},l(e){r=j(e,"Please only load models from URLs you trust!")},m(e,t){E(e,r,t)},d(e){e&&m(r)}}}function zv(n){let r,e,t,i,s,l,a,u,o,f,h;return f=new cl({props:{$$slots:{default:[Hv]},$$scope:{ctx:n}}}),{c(){r=G("br"),e=ee(),t=G("code"),i=M(n[4]),s=ee(),l=G("br"),a=ee(),u=G("br"),o=ee(),ve(f.$$.fragment),this.h()},l(c){r=W(c,"BR",{}),e=te(c),t=W(c,"CODE",{class:!0});var d=_e(t);i=j(d,n[4]),d.forEach(m),s=te(c),l=W(c,"BR",{}),a=te(c),u=W(c,"BR",{}),o=te(c),be(f.$$.fragment,c),this.h()},h(){J(t,"class","center text-center")},m(c,d){E(c,r,d),E(c,e,d),E(c,t,d),P(t,i),E(c,s,d),E(c,l,d),E(c,a,d),E(c,u,d),E(c,o,d),we(f,c,d),h=!0},p(c,d){(!h||d[0]&16)&&ce(i,c[4]);const _={};d[1]&33554432&&(_.$$scope={dirty:d,ctx:c}),f.$set(_)},i(c){h||(re(f.$$.fragment,c),h=!0)},o(c){le(f.$$.fragment,c),h=!1},d(c){c&&(m(r),m(e),m(t),m(s),m(l),m(a),m(u),m(o)),ye(f,c)}}}function Xv(n){let r;return{c(){r=M("Please only load models from URLs you trust!")},l(e){r=j(e,"Please only load models from URLs you trust!")},m(e,t){E(e,r,t)},d(e){e&&m(r)}}}function Gv(n){let r,e,t,i,s,l;return s=new cl({props:{$$slots:{default:[Xv]},$$scope:{ctx:n}}}),{c(){r=G("br"),e=ee(),t=G("br"),i=ee(),ve(s.$$.fragment)},l(a){r=W(a,"BR",{}),e=te(a),t=W(a,"BR",{}),i=te(a),be(s.$$.fragment,a)},m(a,u){E(a,r,u),E(a,e,u),E(a,t,u),E(a,i,u),we(s,a,u),l=!0},p(a,u){const o={};u[1]&33554432&&(o.$$scope={dirty:u,ctx:a}),s.$set(o)},i(a){l||(re(s.$$.fragment,a),l=!0)},o(a){le(s.$$.fragment,a),l=!1},d(a){a&&(m(r),m(e),m(t),m(i)),ye(s,a)}}}function wc(n){let r,e,t,i;return r=new cl({props:{alert_type:"warning",$$slots:{default:[Wv]},$$scope:{ctx:n}}}),{c(){ve(r.$$.fragment),e=ee(),t=G("br")},l(s){be(r.$$.fragment,s),e=te(s),t=W(s,"BR",{})},m(s,l){we(r,s,l),E(s,e,l),E(s,t,l),i=!0},i(s){i||(re(r.$$.fragment,s),i=!0)},o(s){le(r.$$.fragment,s),i=!1},d(s){s&&(m(e),m(t)),ye(r,s)}}}function Wv(n){let r;return{c(){r=M("Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},l(e){r=j(e,"Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},m(e,t){E(e,r,t)},d(e){e&&m(r)}}}function Qv(n){let r,e,t,i,s=n[12].length+"",l,a,u,o,f,h,c,d,_,w,k="copy",C,U,I,A=n[12].length>2048&&wc(n);return{c(){A&&A.c(),r=ee(),e=G("div"),t=G("code"),i=M("The encoded model has a string length of "),l=M(s),a=M(" characters."),u=ee(),o=G("p"),f=G("button"),h=G("a"),c=M("Share URL"),d=ee(),_=G("span"),w=G("button"),w.textContent=k,this.h()},l(b){A&&A.l(b),r=te(b),e=W(b,"DIV",{});var y=_e(e);t=W(y,"CODE",{});var v=_e(t);i=j(v,"The encoded model has a string length of "),l=j(v,s),a=j(v," characters."),v.forEach(m),y.forEach(m),u=te(b),o=W(b,"P",{});var R=_e(o);f=W(R,"BUTTON",{class:!0});var T=_e(f);h=W(T,"A",{href:!0});var B=_e(h);c=j(B,"Share URL"),B.forEach(m),T.forEach(m),d=te(R),_=W(R,"SPAN",{});var D=_e(_);w=W(D,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(w)!=="svelte-1uua65l"&&(w.textContent=k),D.forEach(m),R.forEach(m),this.h()},h(){J(h,"href",n[13]),J(f,"class","svelte-a67pct"),J(w,"class","svelte-a67pct")},m(b,y){A&&A.m(b,y),E(b,r,y),E(b,e,y),P(e,t),P(t,i),P(t,l),P(t,a),E(b,u,y),E(b,o,y),P(o,f),P(f,h),P(h,c),P(o,d),P(o,_),P(_,w),C=!0,U||(I=fe(w,"click",n[33]),U=!0)},p(b,y){b[12].length>2048?A?y[0]&4096&&re(A,1):(A=wc(b),A.c(),re(A,1),A.m(r.parentNode,r)):A&&(Xe(),le(A,1,1,()=>{A=null}),Ge()),(!C||y[0]&4096)&&s!==(s=b[12].length+"")&&ce(l,s),(!C||y[0]&8192)&&J(h,"href",b[13])},i(b){C||(re(A),C=!0)},o(b){le(A),C=!1},d(b){b&&(m(r),m(e),m(u),m(o)),A&&A.d(b),U=!1,I()}}}function yc(n){let r,e,t,i,s,l,a;return t=new Ap({props:{display:"inline"}}),{c(){r=G("span"),e=G("span"),ve(t.$$.fragment),i=ee(),s=G("span"),l=M(n[15]),this.h()},l(u){r=W(u,"SPAN",{class:!0});var o=_e(r);e=W(o,"SPAN",{});var f=_e(e);be(t.$$.fragment,f),f.forEach(m),i=te(o),s=W(o,"SPAN",{});var h=_e(s);l=j(h,n[15]),h.forEach(m),o.forEach(m),this.h()},h(){J(r,"class","right")},m(u,o){E(u,r,o),P(r,e),we(t,e,null),P(r,i),P(r,s),P(s,l),a=!0},p(u,o){(!a||o[0]&32768)&&ce(l,u[15])},i(u){a||(re(t.$$.fragment,u),a=!0)},o(u){le(t.$$.fragment,u),a=!1},d(u){u&&m(r),ye(t)}}}function kc(n){let r,e;return r=new wm({props:{onClick:n[29],id:n[8].id,top:n[8].top,left:n[8].left,right:n[8].right,bottom:n[8].bottom}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,i){const s={};i[0]&256&&(s.id=t[8].id),i[0]&256&&(s.top=t[8].top),i[0]&256&&(s.left=t[8].left),i[0]&256&&(s.right=t[8].right),i[0]&256&&(s.bottom=t[8].bottom),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Yv(n){let r,e,t,i,s,l,a;r=new bp({props:{position:"top-left"}}),t=new wp({props:{variant:yp.Dots}});let u=n[8]&&kc(n);return l=new kp({props:{position:"top-right"}}),{c(){ve(r.$$.fragment),e=ee(),ve(t.$$.fragment),i=ee(),u&&u.c(),s=ee(),ve(l.$$.fragment)},l(o){be(r.$$.fragment,o),e=te(o),be(t.$$.fragment,o),i=te(o),u&&u.l(o),s=te(o),be(l.$$.fragment,o)},m(o,f){we(r,o,f),E(o,e,f),we(t,o,f),E(o,i,f),u&&u.m(o,f),E(o,s,f),we(l,o,f),a=!0},p(o,f){o[8]?u?(u.p(o,f),f[0]&256&&re(u,1)):(u=kc(o),u.c(),re(u,1),u.m(s.parentNode,s)):u&&(Xe(),le(u,1,1,()=>{u=null}),Ge())},i(o){a||(re(r.$$.fragment,o),re(t.$$.fragment,o),re(u),re(l.$$.fragment,o),a=!0)},o(o){le(r.$$.fragment,o),le(t.$$.fragment,o),le(u),le(l.$$.fragment,o),a=!1},d(o){o&&(m(e),m(i),m(s)),ye(r,o),ye(t,o),u&&u.d(o),ye(l,o)}}}function xv(n){let r,e;return r=new jv({props:{slot:"connectionLine"}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p:Ne,i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Dc(n){let r,e="<b>-</b>",t,i;return{c(){r=G("button"),r.innerHTML=e,this.h()},l(s){r=W(s,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(r)!=="svelte-1nlkb58"&&(r.innerHTML=e),this.h()},h(){J(r,"class","svelte-a67pct")},m(s,l){E(s,r,l),t||(i=fe(r,"click",n[39]),t=!0)},p:Ne,d(s){s&&m(r),t=!1,i()}}}function Ec(n){let r,e="<b>+</b>",t,i;return{c(){r=G("button"),r.innerHTML=e,this.h()},l(s){r=W(s,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(r)!=="svelte-efi5au"&&(r.innerHTML=e),this.h()},h(){J(r,"class","svelte-a67pct")},m(s,l){E(s,r,l),t||(i=fe(r,"click",n[40]),t=!0)},p:Ne,d(s){s&&m(r),t=!1,i()}}}function Jv(n){let r,e,t,i,s,l,a,u,o,f,h,c,d,_,w,k,C,U="Load",I,A,b="Merge",y,v,R="Clear",T,B,D="Save",L,F,N,H="Save As...",O,ne="Save As JSON...",Q,z="Save As Turtle...",Y,x,$="Share",V,ie,Re,Le,he,me,oe,Ee,$e,ft,rt,ge,Se,lr,jt,Yt,wr,Te,We,He;function Qe(Ae){n[31](Ae)}let at={title:n[2].title,content:n[2].content,options:n[2].options,$$slots:{default:[zv]},$$scope:{ctx:n}};n[2].is_open!==void 0&&(at.is_open=n[2].is_open),r=new Yo({props:at}),kt.push(()=>tr(r,"is_open",Qe)),r.$on("optionSelected",n[16]);function Xt(Ae){n[32](Ae)}let Ut={title:n[3].title,content:n[3].content,options:n[3].options,$$slots:{default:[Gv]},$$scope:{ctx:n}};n[3].is_open!==void 0&&(Ut.is_open=n[3].is_open),i=new Yo({props:Ut}),kt.push(()=>tr(i,"is_open",Xt)),i.$on("optionSelected",n[17]);function _r(Ae){n[34](Ae)}let pr={title:"Share this model with a URL",$$slots:{default:[Qv]},$$scope:{ctx:n}};n[11]!==void 0&&(pr.is_open=n[11]),a=new Tm({props:pr}),kt.push(()=>tr(a,"is_open",_r));function ur(Ae){n[35](Ae)}let ut={};n[7]!==void 0&&(ut.selectedFile=n[7]),h=new qv({props:ut}),kt.push(()=>tr(h,"selectedFile",ur)),h.$on("fileSelected",n[26]);let Je=n[15]&&yc(n);Ee=new vp({props:{nodes:rr,nodeTypes:n[0],edges:gi,edgeTypes:n[1],fitView:!0,defaultEdgeOptions:n[18],$$slots:{connectionLine:[xv],default:[Yv]},$$scope:{ctx:n}}}),Ee.$on("dragover",n[23]),Ee.$on("drop",n[25]),Ee.$on("connect",n[24]),Ee.$on("nodecontextmenu",n[28]),Ee.$on("paneclick",n[29]),Ee.$on("onedgecreate",Kv),ft=new Rm({});let Nt=n[14]&&Dc(n),vt=!n[14]&&Ec(n);return Yt=new qm({}),{c(){ve(r.$$.fragment),t=ee(),ve(i.$$.fragment),l=ee(),ve(a.$$.fragment),o=ee(),f=G("div"),ve(h.$$.fragment),d=ee(),_=G("br"),w=ee(),k=G("div"),C=G("button"),C.textContent=U,I=ee(),A=G("button"),A.textContent=b,y=ee(),v=G("button"),v.textContent=R,T=ee(),B=G("button"),B.textContent=D,L=ee(),F=G("select"),N=G("option"),N.textContent=H,O=G("option"),O.textContent=ne,Q=G("option"),Q.textContent=z,Y=ee(),x=G("button"),x.textContent=$,V=M(`
        filename:    `),ie=G("input"),Re=ee(),Je&&Je.c(),Le=ee(),he=G("main"),me=G("div"),oe=G("div"),ve(Ee.$$.fragment),$e=ee(),ve(ft.$$.fragment),ge=ee(),Se=G("div"),Nt&&Nt.c(),lr=ee(),vt&&vt.c(),jt=ee(),ve(Yt.$$.fragment),this.h()},l(Ae){be(r.$$.fragment,Ae),t=te(Ae),be(i.$$.fragment,Ae),l=te(Ae),be(a.$$.fragment,Ae),o=te(Ae),f=W(Ae,"DIV",{class:!0});var je=_e(f);be(h.$$.fragment,je),je.forEach(m),d=te(Ae),_=W(Ae,"BR",{}),w=te(Ae),k=W(Ae,"DIV",{id:!0,class:!0});var et=_e(k);C=W(et,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(C)!=="svelte-r4end6"&&(C.textContent=U),I=te(et),A=W(et,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(A)!=="svelte-1s1l97g"&&(A.textContent=b),y=te(et),v=W(et,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(v)!=="svelte-1o4uly3"&&(v.textContent=R),T=te(et),B=W(et,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(B)!=="svelte-qm8vdx"&&(B.textContent=D),L=te(et),F=W(et,"SELECT",{class:!0});var Vt=_e(F);N=W(Vt,"OPTION",{"data-svelte-h":!0}),qe(N)!=="svelte-hmrlsb"&&(N.textContent=H),O=W(Vt,"OPTION",{"data-svelte-h":!0}),qe(O)!=="svelte-1q30tr1"&&(O.textContent=ne),Q=W(Vt,"OPTION",{"data-svelte-h":!0}),qe(Q)!=="svelte-pf55hp"&&(Q.textContent=z),Vt.forEach(m),Y=te(et),x=W(et,"BUTTON",{class:!0,"data-svelte-h":!0}),qe(x)!=="svelte-mqt2ui"&&(x.textContent=$),V=j(et,`
        filename:    `),ie=W(et,"INPUT",{style:!0,type:!0}),Re=te(et),Je&&Je.l(et),et.forEach(m),Le=te(Ae),he=W(Ae,"MAIN",{});var xt=_e(he);me=W(xt,"DIV",{id:!0,class:!0});var Jt=_e(me);oe=W(Jt,"DIV",{id:!0,class:!0});var yr=_e(oe);be(Ee.$$.fragment,yr),$e=te(yr),be(ft.$$.fragment,yr),yr.forEach(m),ge=te(Jt),Se=W(Jt,"DIV",{class:!0});var Ht=_e(Se);Nt&&Nt.l(Ht),lr=te(Ht),vt&&vt.l(Ht),jt=te(Ht),be(Yt.$$.fragment,Ht),Ht.forEach(m),Jt.forEach(m),xt.forEach(m),this.h()},h(){J(f,"class","toolbar-examples"),J(C,"class","svelte-a67pct"),J(A,"class","svelte-a67pct"),J(v,"class","svelte-a67pct"),J(B,"class","svelte-a67pct"),N.__value="",Ie(N,N.__value),O.__value="json",Ie(O,O.__value),Q.__value="turtle",Ie(Q,Q.__value),J(F,"class","save-as-dropdown svelte-a67pct"),n[6]===void 0&&Ql(()=>n[36].call(F)),J(x,"class"," svelte-a67pct"),Ze(ie,"width","275px"),J(ie,"type","text"),J(k,"id","toolbar"),J(k,"class","svelte-a67pct"),J(oe,"id","flow"),J(oe,"class","svelte-a67pct"),Ql(()=>n[38].call(oe)),J(Se,"class",wr="side-panel "+(n[14]?"open":"close")+" svelte-a67pct"),J(me,"id","main-container"),J(me,"class","svelte-a67pct")},m(Ae,je){we(r,Ae,je),E(Ae,t,je),we(i,Ae,je),E(Ae,l,je),we(a,Ae,je),E(Ae,o,je),E(Ae,f,je),we(h,f,null),E(Ae,d,je),E(Ae,_,je),E(Ae,w,je),E(Ae,k,je),P(k,C),P(k,I),P(k,A),P(k,y),P(k,v),P(k,T),P(k,B),P(k,L),P(k,F),P(F,N),P(F,O),P(F,Q),ka(F,n[6],!0),P(k,Y),P(k,x),P(k,V),P(k,ie),Ie(ie,n[5]),P(k,Re),Je&&Je.m(k,null),E(Ae,Le,je),E(Ae,he,je),P(he,me),P(me,oe),we(Ee,oe,null),P(oe,$e),we(ft,oe,null),rt=tp(oe,n[38].bind(oe)),P(me,ge),P(me,Se),Nt&&Nt.m(Se,null),P(Se,lr),vt&&vt.m(Se,null),P(Se,jt),we(Yt,Se,null),Te=!0,We||(He=[fe(C,"click",n[21]),fe(A,"click",n[22]),fe(v,"click",n[27]),fe(B,"click",n[19]),fe(F,"change",n[36]),fe(F,"change",n[20]),fe(x,"click",n[30]),fe(ie,"input",n[37])],We=!0)},p(Ae,je){const et={};je[0]&4&&(et.title=Ae[2].title),je[0]&4&&(et.content=Ae[2].content),je[0]&4&&(et.options=Ae[2].options),je[0]&16|je[1]&33554432&&(et.$$scope={dirty:je,ctx:Ae}),!e&&je[0]&4&&(e=!0,et.is_open=Ae[2].is_open,er(()=>e=!1)),r.$set(et);const Vt={};je[0]&8&&(Vt.title=Ae[3].title),je[0]&8&&(Vt.content=Ae[3].content),je[0]&8&&(Vt.options=Ae[3].options),je[1]&33554432&&(Vt.$$scope={dirty:je,ctx:Ae}),!s&&je[0]&8&&(s=!0,Vt.is_open=Ae[3].is_open,er(()=>s=!1)),i.$set(Vt);const xt={};je[0]&12288|je[1]&33554432&&(xt.$$scope={dirty:je,ctx:Ae}),!u&&je[0]&2048&&(u=!0,xt.is_open=Ae[11],er(()=>u=!1)),a.$set(xt);const Jt={};!c&&je[0]&128&&(c=!0,Jt.selectedFile=Ae[7],er(()=>c=!1)),h.$set(Jt),je[0]&64&&ka(F,Ae[6]),je[0]&32&&ie.value!==Ae[5]&&Ie(ie,Ae[5]),Ae[15]?Je?(Je.p(Ae,je),je[0]&32768&&re(Je,1)):(Je=yc(Ae),Je.c(),re(Je,1),Je.m(k,null)):Je&&(Xe(),le(Je,1,1,()=>{Je=null}),Ge());const yr={};je[0]&256|je[1]&33554432&&(yr.$$scope={dirty:je,ctx:Ae}),Ee.$set(yr),Ae[14]?Nt?Nt.p(Ae,je):(Nt=Dc(Ae),Nt.c(),Nt.m(Se,lr)):Nt&&(Nt.d(1),Nt=null),Ae[14]?vt&&(vt.d(1),vt=null):vt?vt.p(Ae,je):(vt=Ec(Ae),vt.c(),vt.m(Se,jt)),(!Te||je[0]&16384&&wr!==(wr="side-panel "+(Ae[14]?"open":"close")+" svelte-a67pct"))&&J(Se,"class",wr)},i(Ae){Te||(re(r.$$.fragment,Ae),re(i.$$.fragment,Ae),re(a.$$.fragment,Ae),re(h.$$.fragment,Ae),re(Je),re(Ee.$$.fragment,Ae),re(ft.$$.fragment,Ae),re(Yt.$$.fragment,Ae),Te=!0)},o(Ae){le(r.$$.fragment,Ae),le(i.$$.fragment,Ae),le(a.$$.fragment,Ae),le(h.$$.fragment,Ae),le(Je),le(Ee.$$.fragment,Ae),le(ft.$$.fragment,Ae),le(Yt.$$.fragment,Ae),Te=!1},d(Ae){Ae&&(m(t),m(l),m(o),m(f),m(d),m(_),m(w),m(k),m(Le),m(he)),ye(r,Ae),ye(i,Ae),ye(a,Ae),ye(h),Je&&Je.d(),ye(Ee),ye(ft),rt(),Nt&&Nt.d(),vt&&vt.d(),ye(Yt),We=!1,xe(He)}}}function Zv(n){let r,e,t,i,s,l,a='D3FEND <span class="snakes">☤</span> <span class="CAD"><span style="color:#e62929;">C</span><span class="A svelte-a67pct" style="color:white;text-border:1px;">A</span><span style="color:blue;">D</span></span>',u,o,f="<i>Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios</i>",h,c,d,_,w,k,C;return r=new Sp({props:{title:"D3FEND CAD Tool",og_title:"D3FEND CAD Tool",og_description:"Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios",og_type:"app"}}),_=new cl({props:{alert_type:"warning",$$slots:{default:[Vv]},$$scope:{ctx:n}}}),k=new Am({props:{position:"right",$$slots:{default:[Jv]},$$scope:{ctx:n}}}),{c(){ve(r.$$.fragment),e=ee(),t=G("div"),i=G("div"),s=G("div"),l=G("h1"),l.innerHTML=a,u=ee(),o=G("div"),o.innerHTML=f,h=ee(),c=G("br"),d=ee(),ve(_.$$.fragment),w=ee(),ve(k.$$.fragment),this.h()},l(U){be(r.$$.fragment,U),e=te(U),t=W(U,"DIV",{class:!0});var I=_e(t);i=W(I,"DIV",{style:!0});var A=_e(i);s=W(A,"DIV",{style:!0});var b=_e(s);l=W(b,"H1",{class:!0,"data-svelte-h":!0}),qe(l)!=="svelte-1hfeq8z"&&(l.innerHTML=a),u=te(b),o=W(b,"DIV",{style:!0,"data-svelte-h":!0}),qe(o)!=="svelte-1adqejh"&&(o.innerHTML=f),h=te(b),c=W(b,"BR",{}),d=te(b),be(_.$$.fragment,b),b.forEach(m),A.forEach(m),I.forEach(m),w=te(U),be(k.$$.fragment,U),this.h()},h(){J(l,"class","fancy-font svelte-a67pct"),Ze(o,"text-align","center"),Ze(o,"padding","0 px"),Ze(s,"text-align","center"),Ze(s,"flex-grow","1"),Ze(i,"display","flex"),Ze(i,"just-content","space-between"),Ze(i,"align-items","center"),J(t,"class","title-egg")},m(U,I){we(r,U,I),E(U,e,I),E(U,t,I),P(t,i),P(i,s),P(s,l),P(s,u),P(s,o),P(s,h),P(s,c),P(s,d),we(_,s,null),E(U,w,I),we(k,U,I),C=!0},p(U,I){const A={};I[1]&33554432&&(A.$$scope={dirty:I,ctx:U}),_.$set(A);const b={};I[0]&65532|I[1]&33554432&&(b.$$scope={dirty:I,ctx:U}),k.$set(b)},i(U){C||(re(r.$$.fragment,U),re(_.$$.fragment,U),re(k.$$.fragment,U),C=!0)},o(U){le(r.$$.fragment,U),le(_.$$.fragment,U),le(k.$$.fragment,U),C=!1},d(U){U&&(m(e),m(t),m(w)),ye(r,U),ye(_),ye(k,U)}}}function Kv(n){console.log(n),console.log(n)}function $v(n,r,e){let t,i,s,l;Me(n,ip,Te=>e(42,t=Te)),Me(n,gi,Te=>e(43,i=Te)),Me(n,rr,Te=>e(44,s=Te)),Me(n,sr,Te=>e(15,l=Te));var a=this&&this.__awaiter||function(Te,We,He,Qe){function at(Xt){return Xt instanceof He?Xt:new He(function(Ut){Ut(Xt)})}return new(He||(He=Promise))(function(Xt,Ut){function _r(ut){try{ur(Qe.next(ut))}catch(Je){Ut(Je)}}function pr(ut){try{ur(Qe.throw(ut))}catch(Je){Ut(Je)}}function ur(ut){ut.done?Xt(ut.value):at(ut.value).then(_r,pr)}ur((Qe=Qe.apply(Te,We||[])).next())})};let u={is_open:!1,title:"Confirmation to load remote model from URL",content:"This page is instructing D3FEND to remotely load a CAD model from this URL:",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},o={is_open:!1,title:"Confirmation to load remote model from compressed URL",content:"This page is instructing D3FEND to load a CAD model from this URL",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},f;t.url.searchParams.get("load")&&(f=t.url.searchParams.get("load"),u.is_open=!0),t.url.searchParams.get("loadg")&&(o.is_open=!0);function h(Te){const We=Te.detail;We.value==="load"?(sr.add("loading remote URL"),T(f),sr.clear()):We.value}function c(Te){const We=Te.detail;if(We.value==="load"){sr.add("loading graph from URL");const He=t.url.searchParams.get("loadg"),Qe=Oa.uncrush(He);let at=JSON.parse(Qe);y(at),sr.clear()}else We.value}fl(()=>{sr.add("Mounting app...");try{Is.initialize(),sr.clear()}catch(Te){console.error("Failed to initialize Oxigraph in +layout.svelte",Te),Te.message}});const d={artifactSelectorNode:cv,vulnerabilitySelectorNode:av,attackSelectorNode:nv,countermeasureSelectorNode:pv,informationSelectorNode:vv,conditionDefinitionNode:yv,agentSelectorNode:Ev,eventNode:Av},_={editableEdge:Ov};let w={type:"editableEdge",data:{label:void 0},markerEnd:{type:Nc.ArrowClosed}},k="d3fend-cad.json",C="";function U(){const Te=JSON.stringify({nodes:s,edges:i},null,4),We=new Blob([Te],{type:"application/json"}),He=window.URL.createObjectURL(We),Qe=document.createElement("a");Qe.href=He,Qe.download=k,document.body.appendChild(Qe),Qe.click(),document.body.removeChild(Qe),window.URL.revokeObjectURL(He)}function I(){C==="json"?b():C==="turtle"&&A(),e(6,C="")}function A(){sr.add("generating ttl file"),console.log("!!! Turtle export engaged !!!"),q2().then(Te=>{sr.clear();const We=new Blob([Te],{type:"text/turtle"}),He=window.URL.createObjectURL(We),Qe=document.createElement("a");Qe.href=He;let at=prompt("Enter filename to save as Turtle file",k.replace("json","ttl"));at&&(Qe.download=at,document.body.appendChild(Qe),Qe.click(),document.body.removeChild(Qe)),window.URL.revokeObjectURL(He)}).catch(Te=>{console.error("Error serializing graph to Turtle: ",Te)})}function b(){const Te=JSON.stringify({nodes:s,edges:i},null,4),We=new Blob([Te],{type:"application/json"}),He=window.URL.createObjectURL(We),Qe=document.createElement("a");Qe.href=He;let at=prompt("Enter filename to save as JSON file",k);e(5,k=at),at&&(Qe.download=at,document.body.appendChild(Qe),Qe.click(),document.body.removeChild(Qe)),window.URL.revokeObjectURL(He)}function y(Te){try{const We=Te.nodes,He=Te.edges;sr.add("loading graph from data..."),el(We,He),sr.clear()}catch(We){console.error("Error parsing JSON:",We)}}function v(Te){const We=Te.target.files[0];if(We){const He=new FileReader;He.onload=Qe=>{if(typeof Qe.target.result=="string"){console.log(Qe.target.result);try{const at=JSON.parse(Qe.target.result),Xt=at.nodes,Ut=at.edges;el(Xt,Ut)}catch(at){console.error("Error parsing JSON:",at)}}else console.error("File content is not a string.")},He.onerror=()=>{console.error("Error reading file:",He.error)},He.readAsText(We)}}function R(Te){const We=Te.target.files[0];if(We){const He=new FileReader;He.onload=Qe=>{if(typeof Qe.target.result=="string"){console.log(Qe.target.result);try{const at=JSON.parse(Qe.target.result);rr.set([...s,...at.nodes]),gi.set([...i,...at.edges]),alert(` added ${at.nodes.length} nodes and ${at.edges.length} edges to the current graph `)}catch(at){console.error("Error parsing JSON:",at),alert(`Error parsing JSON:", ${at}`)}}else console.error("File content is not a string."),alert("File content is not a string.")},He.onerror=()=>{console.error("Error reading file:",He.error),alert(`Error reading file: ${He.error}`)},He.readAsText(We)}}function T(Te){return a(this,void 0,void 0,function*(){if(Te)try{const He=yield(yield fetch(Te)).json(),Qe=He.nodes,at=He.edges;el(Qe,at)}catch(We){console.error("Error parsing JSON:",We)}})}function B(){const Te=document.createElement("input");Te.type="file",Te.accept=".json",Te.onchange=We=>{v(We)},Te.click()}function D(){const Te=document.createElement("input");Te.type="file",Te.accept=".json",Te.onchange=We=>{R(We)},Te.click()}const{screenToFlowPosition:L}=Xp(),F=Te=>{Te.preventDefault(),Te.dataTransfer&&(Te.dataTransfer.dropEffect="move")},N=Te=>console.log("handle onConnect",Te),H=Te=>{if(Te.preventDefault(),!Te.dataTransfer)return null;const We=Te.dataTransfer.getData("application/svelteflow"),He=L({x:Te.clientX,y:Te.clientY}),Qe={id:`${Math.random()}`,type:We,position:He,data:{label:null,sequence:"0"},origin:[.5,0]};s.push(Qe),rr.set(s)};function O(Te){return a(this,void 0,void 0,function*(){const We=Te.detail;try{const He=yield fetch(`/resources/cad/examples/${We}`);if(!He.ok)throw new Error(`HTTP error! status: ${He.status}`);const Qe=yield He.json();console.log("Selected file contents:",Qe),y(Qe)}catch(He){console.error("Error fetching JSON file:",He)}})}let ne;function Q(){L2(),e(7,ne="Example Graphs")}let z,Y,x;function $({detail:{event:Te,node:We}}){Te.preventDefault();let He=50;e(8,z={id:We.id,top:Te.clientY<x-He?Te.clientY:void 0,left:Te.clientX<Y-He?Te.clientX:void 0,right:Te.clientX>=Y-He?Y-Te.clientX:void 0,bottom:Te.clientY>=x-He?x-Te.clientY:void 0}),ie({detail:{event:Te,node:We}})}function V(){e(8,z=null),Ue.set(null)}function ie({detail:{event:Te,node:We}}){Ue.set(We)}let Re=!1,Le,he;function me(){sr.add("compressing graph to string..."),e(11,Re=!0);const Te=Oa.crush(JSON.stringify({nodes:s,edges:i}));e(12,Le=encodeURIComponent(Te)),e(13,he=t.url.origin+`/cad/?loadg=${Le}`),sr.clear()}let oe=!0;function Ee(Te){n.$$.not_equal(u.is_open,Te)&&(u.is_open=Te,e(2,u))}function $e(Te){n.$$.not_equal(o.is_open,Te)&&(o.is_open=Te,e(3,o))}const ft=()=>sp(he);function rt(Te){Re=Te,e(11,Re)}function ge(Te){ne=Te,e(7,ne)}function Se(){C=rp(this),e(6,C)}function lr(){k=this.value,e(5,k)}function jt(){Y=this.clientWidth,x=this.clientHeight,e(9,Y),e(10,x)}return[d,_,u,o,f,k,C,ne,z,Y,x,Re,Le,he,oe,l,h,c,w,U,I,B,D,F,N,H,O,Q,$,V,me,Ee,$e,ft,rt,ge,Se,lr,jt,()=>e(14,oe=!oe),()=>e(14,oe=!oe)]}class eb extends it{constructor(r){super(),lt(this,r,$v,Zv,Ve,{nodeTypes:0,edgeTypes:1},null,[-1,-1])}get nodeTypes(){return this.$$.ctx[0]}get edgeTypes(){return this.$$.ctx[1]}}function tb(n){let r,e;return r=new eb({}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function rb(n){let r,e;return r=new Mp({props:{$$slots:{default:[tb]},$$scope:{ctx:n}}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,i){we(r,t,i),e=!0},p(t,[i]){const s={};i&4&&(s.$$scope={dirty:i,ctx:t}),r.$set(s)},i(t){e||(re(r.$$.fragment,t),e=!0)},o(t){le(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function nb(n,r,e){let t,{data:i}=r;return n.$$set=s=>{"data"in s&&e(0,i=s.data)},n.$$.update=()=>{n.$$.dirty&1&&e(1,t=i.remote_d3fend_tree?i.remote_d3fend_tree.map(s=>({...s,children:cs(s.children,s["rdfs:label"])})):[]),n.$$.dirty&3&&(Ic.set(t),Fc.set(i.attack),Rc.set(i.dao),Oc.set(i.events),Bc.set(i.weaknesses),Lc.set(i.properties))},[i,t]}class Sb extends it{constructor(r){super(),lt(this,r,nb,rb,Ve,{data:0})}}export{Sb as component,Db as universal};

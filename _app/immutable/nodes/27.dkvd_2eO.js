import{s as H,t as P,e as $,h as T,d as k,f as b,i as c,G as O,k as v,b as V,j as x,n as A,y as Q,x as S,l as g,R as L,p as F,A as J,m as Z,v as B}from"../chunks/scheduler.DDVliNtX.js";import{h as U,u as ee}from"../chunks/await_block.eDnGvKeC.js";import{S as W,i as Y,c as R,b as D,m as q,t as w,a as E,d as G,g as te,e as ne}from"../chunks/index.iWffroUJ.js";/* empty css                                                     */import{G as z}from"../chunks/lib.DSnscA8f.js";import{w as j}from"../chunks/index.C6plYK4b.js";import{S as re,B as le,a as oe,b as ae}from"../chunks/style.CoMyASxi.js";import{C as se}from"../chunks/Controls.CAcLyyHp.js";function ie(s){let t,l,e,r,n,a;return t=new se({}),e=new le({props:{variant:oe.Dots}}),n=new ae({}),{c(){R(t.$$.fragment),l=V(),R(e.$$.fragment),r=V(),R(n.$$.fragment)},l(o){D(t.$$.fragment,o),l=x(o),D(e.$$.fragment,o),r=x(o),D(n.$$.fragment,o)},m(o,p){q(t,o,p),v(o,l,p),q(e,o,p),v(o,r,p),q(n,o,p),a=!0},p:A,i(o){a||(w(t.$$.fragment,o),w(e.$$.fragment,o),w(n.$$.fragment,o),a=!0)},o(o){E(t.$$.fragment,o),E(e.$$.fragment,o),E(n.$$.fragment,o),a=!1},d(o){o&&(c(l),c(r)),G(t,o),G(e,o),G(n,o)}}}function ce(s){let t,l,e,r;return e=new re({props:{nodes:s[0],edges:s[1],snapGrid:s[2],fitView:!0,$$slots:{default:[ie]},$$scope:{ctx:s}}}),e.$on("nodeclick",s[4]),{c(){t=P(`DIAGRAM
  
  `),l=$("div"),R(e.$$.fragment),this.h()},l(n){t=T(n,`DIAGRAM
  
  `),l=k(n,"DIV",{});var a=b(l);D(e.$$.fragment,a),a.forEach(c),this.h()},h(){O(l,"height","1000px"),O(l,"width","1000px")},m(n,a){v(n,t,a),v(n,l,a),q(e,l,null),r=!0},p(n,[a]){const o={};a&4096&&(o.$$scope={dirty:a,ctx:n}),e.$set(o)},i(n){r||(w(e.$$.fragment,n),r=!0)},o(n){E(e.$$.fragment,n),r=!1},d(n){n&&(c(t),c(l)),G(e)}}}function fe(s,t,l){let{graph:e}=t,r=new z(e);console.log(r);let n=[],a=0,o=0;e.graph.forEach(f=>{a=a+0,o=o+50;let d={id:f["@id"]};d.data={label:d.id},d.position={x:a,y:o},d.type="default",d.class="tactic",n.push(d)});let p=[];e.graph.forEach(f=>{let d="d3f:contains";d in f&&f[d].forEach(i=>{let u={};u.id=f["@id"]+i["@id"],u.source=f["@id"],u.target=i["@id"],u.label=d,u.type="default",p.push(u)})});const y=j(n),_=j(p),m=[25,25],I=f=>console.log("on node click",f.detail.node);return s.$$set=f=>{"graph"in f&&l(3,e=f.graph)},[y,_,m,e,I]}class ue extends W{constructor(t){super(),Y(this,t,fe,ce,H,{graph:3})}}function de(s){let t,l,e=s[3]+"",r;return{c(){t=$("p"),l=P("Error: "),r=P(e),this.h()},l(n){t=k(n,"P",{class:!0});var a=b(t);l=T(a,"Error: "),r=T(a,e),a.forEach(c),this.h()},h(){S(t,"class","error svelte-521b0l")},m(n,a){v(n,t,a),g(t,l),g(t,r)},p(n,a){a&2&&e!==(e=n[3]+"")&&Z(r,e)},i:A,o:A,d(n){n&&c(t)}}}function pe(s){let t,l,e=s[8]&&K(s);return{c(){e&&e.c(),t=B()},l(r){e&&e.l(r),t=B()},m(r,n){e&&e.m(r,n),v(r,t,n),l=!0},p(r,n){r[8]?e?(e.p(r,n),n&2&&w(e,1)):(e=K(r),e.c(),w(e,1),e.m(t.parentNode,t)):e&&(te(),E(e,1,1,()=>{e=null}),ne())},i(r){l||(w(e),l=!0)},o(r){E(e),l=!1},d(r){r&&c(t),e&&e.d(r)}}}function K(s){let t,l;return t=new ue({props:{graph:s[8]}}),{c(){R(t.$$.fragment)},l(e){D(t.$$.fragment,e)},m(e,r){q(t,e,r),l=!0},p(e,r){const n={};r&2&&(n.graph=e[8]),t.$set(n)},i(e){l||(w(t.$$.fragment,e),l=!0)},o(e){E(t.$$.fragment,e),l=!1},d(e){G(t,e)}}}function me(s){let t;function l(n,a){return n[2]?_e:he}let e=l(s),r=e(s);return{c(){r.c(),t=B()},l(n){r.l(n),t=B()},m(n,a){r.m(n,a),v(n,t,a)},p(n,a){e!==(e=l(n))&&(r.d(1),r=e(n),r&&(r.c(),r.m(t.parentNode,t)))},i:A,o:A,d(n){n&&c(t),r.d(n)}}}function he(s){let t,l="Loading...";return{c(){t=$("p"),t.textContent=l},l(e){t=k(e,"P",{"data-svelte-h":!0}),Q(t)!=="svelte-qdsr2u"&&(t.textContent=l)},m(e,r){v(e,t,r)},d(e){e&&c(t)}}}function _e(s){let t;return{c(){t=P("hit go!")},l(l){t=T(l,"hit go!")},m(l,e){v(l,t,e)},d(l){l&&c(t)}}}function ge(s){let t,l,e,r,n,a,o,p="Run Query",y,_,m,I,f,d,i={ctx:s,current:null,token:null,hasCatch:!0,pending:me,then:pe,catch:de,value:8,error:3,blocks:[,,,]};return U(m=s[1],i),{c(){t=$("div"),l=$("div"),e=$("div"),r=$("textarea"),n=V(),a=$("div"),o=$("button"),o.textContent=p,y=V(),_=$("div"),i.block.c(),this.h()},l(u){t=k(u,"DIV",{class:!0});var h=b(t);l=k(h,"DIV",{});var C=b(l);e=k(C,"DIV",{});var X=b(e);r=k(X,"TEXTAREA",{class:!0}),b(r).forEach(c),X.forEach(c),n=x(C),a=k(C,"DIV",{});var M=b(a);o=k(M,"BUTTON",{"data-svelte-h":!0}),Q(o)!=="svelte-1qn4pan"&&(o.textContent=p),M.forEach(c),C.forEach(c),y=x(h),_=k(h,"DIV",{});var N=b(_);i.block.l(N),N.forEach(c),h.forEach(c),this.h()},h(){S(r,"class","svelte-521b0l"),S(t,"class","flex")},m(u,h){v(u,t,h),g(t,l),g(l,e),g(e,r),L(r,s[0]),g(l,n),g(l,a),g(a,o),g(t,y),g(t,_),i.block.m(_,i.anchor=null),i.mount=()=>_,i.anchor=null,I=!0,f||(d=[F(r,"input",s[6]),F(r,"keypress",s[5]),F(o,"click",s[4])],f=!0)},p(u,[h]){s=u,h&1&&L(r,s[0]),i.ctx=s,h&2&&m!==(m=s[1])&&U(m,i)||ee(i,s,h)},i(u){I||(w(i.block),I=!0)},o(u){for(let h=0;h<3;h+=1){const C=i.blocks[h];E(C)}I=!1},d(u){u&&c(t),i.block.d(),i.token=null,i=null,f=!1,J(d)}}}function $e(s,t,l){let e=`PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
  PREFIX owl: <http://www.w3.org/2002/07/owl#>
  PREFIX d3f: <http://d3fend.mitre.org/ontologies/d3fend.owl#>
  PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
  
  CONSTRUCT {
    ?s d3f:contains ?o .
  }
  WHERE {
    ?s rdfs:subClassOf* d3f:DigitalArtifact .
    ?s d3f:contains ?o .
    FILTER (!isBlank(?o))
  }
  ORDER BY ?p
  LIMIT 50
  `,r=null,n=o(),a=!0;async function o(){try{l(2,a=!1),console.log("making request");let m="/api/sparql?query="+encodeURIComponent(e);console.log(m);const f=await(await fetch(m)).json();let d=new z(f);l(1,n=d)}catch(m){l(3,r=m.message)}}function p(){l(1,n=o())}function y(m){m.ctrlKey==!0&&m.keyCode==13&&p()}function _(){e=this.value,l(0,e)}return[e,n,a,r,p,y,_]}class Re extends W{constructor(t){super(),Y(this,t,$e,ge,H,{})}}export{Re as component};

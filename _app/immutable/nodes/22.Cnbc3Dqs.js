const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/jsonld.CYnguqZs.js","../chunks/_commonjsHelpers.C4iS2aBk.js","../chunks/___vite-browser-external_commonjs-proxy.B2SwpVhP.js"])))=>i.map(i=>d[i]);
import{s as Zl}from"../chunks/sortBy.ChsTRid8.js";import{s as Je,c as Ft,u as Rt,g as St,a as Bt,am as ap,I as hs,e as Q,d as Y,f as we,i as m,r as ee,k as A,o as Ye,ao as up,E as hl,J as It,p as Ae,b as ie,j as le,as as _t,t as V,h as H,l as M,P as pe,a4 as Ot,ar as rn,m as me,x as it,W as yr,n as Le,v as We,L as mt,V as ir,D as st,O as ut,Y as _s,F as Sr,N as Me,a3 as yn,w as Mr,al as Aa,a0 as Kl,Q as Ta,R as Ca,ap as Na,ak as op,aq as fp}from"../chunks/scheduler.xR-uXgLO.js";import{S as dt,i as ht,t as se,a as fe,g as et,e as tt,c as Ce,b as Ne,m as Ie,d as Fe,f as lr,p as Ia}from"../chunks/index.BpaDVXPB.js";import{d as cp,w as Kt}from"../chunks/index.iaz6iIjv.js";import{p as dp}from"../chunks/stores.dODlWcec.js";import{A as _l}from"../chunks/Alert.BOpypHFQ.js";import{T as jn,b as Re,a as Rc,G as Sc,m as hp,d as il,o as _p}from"../chunks/lib._70Mlgse.js";import{c as pp,k as gp,b as Fa,R as Ki,u as Gn,X as mp,d as Ra,e as Sa,i as vp,g as bp,f as Ba,n as Oa,h as La,j as wp,p as yp,l as kp,r as Ep,H as ft,P as nt,m as Dp,E as Ap,o as Bc,q as $l,S as Tp,C as Cp,B as Np,a as Ip,M as Fp}from"../chunks/style.CaV8822o.js";import{a as pl,c as ps}from"../chunks/_commonjsHelpers.C4iS2aBk.js";import{r as Rp}from"../chunks/___vite-browser-external_commonjs-proxy.B2SwpVhP.js";import{_ as Sp}from"../chunks/preload-helper.D6kgxu3v.js";import{e as xe,u as Ua,o as Pa}from"../chunks/each.BfH-wj2E.js";import{G as nn}from"../chunks/_Graph.B1ixJej4.js";import{t as ll,T as Oc}from"../chunks/ToggleBar.ChYzQEkc.js";import{s as Ma}from"../chunks/index.BxqCZUUx.js";import{f as Vn}from"../chunks/utils.xEKteSAW.js";import{f as Bp,c as Op,L as Lp}from"../chunks/Loading.B5hKdNm6.js";import{J as qa}from"../chunks/JSONCrush.BlUS0oeb.js";import{T as Up}from"../chunks/Title.lz_tL8Gl.js";function gs(n,r,e=[]){const t=Zl(n,i=>i["rdfs:label"]);for(const i of t)e.push({...i,rootLabel:r}),i.children&&gs(i.children,r,e);return e}function ms(n,r,e){for(const t of e)if(r.test(n[t]))return!0;return!1}function Pp(n,r,e){if(!r)return n||[];const t=r?new RegExp(r,"i"):null,i=s=>t?ms(s,t,e):!0;return n.filter(i)}function Mp(n,r,e){if(!r)return n||[];const t=r?new RegExp(r,"i"):null,i=l=>t?ms(l,t,e):!0;return n.reduce((l,a)=>(l.push({...a,children:a.children.filter(i)}),l),[]).filter(l=>l.children.length>0)}function qp(n,r,e){const t=[];function i(s){if(ms(s,r,e)&&t.push(s),s.children)for(const l of s.children)i(l)}for(const s of n)i(s);return t}function jp(n,r,e){if(!r)return n||[];const t=new RegExp(r,"i");return qp(n,t,e)}function ja(n,r){return[...new Map(n.map(e=>[e[r],e])).values()]}function Vp(n){const r=n.reduce((i,s)=>(i[s["@id"]]=s,i),{});return n.reduce((i,s)=>(s.hasOwnProperty("rdfs:hasSubClass")&&(s.children=s["rdfs:hasSubClass"].map(l=>r[l["@id"]]),i.push(s)),i),[]).filter(i=>i["rdfs:subClassOf"].some(s=>s["@id"]==="d3f:DigitalEvent"))}function Hp(n){const r=n.reduce((t,i)=>(t[i["@id"]]=i,t),{});return n.forEach(t=>{const i=t["rdfs:subPropertyOf"];if(i)for(const s of i)r[s["@id"]]&&(r[s["@id"]].children?r[s["@id"]].children.push(t):r[s["@id"]].children=[t])}),{associated:n.filter(t=>t["rdfs:subPropertyOf"].some(i=>i["@id"]==="d3f:associated-with"))}}async function zp({fetch:n}){const r=["/api/offensive-technique/all.json","/api/dao/artifacts.json","/api/taxonomies/d3f:DigitalEvent.json","/api/weakness/all.json","/api/ontology/properties/object/all.json"],[{value:{["@graph"]:e}},{value:{["@graph"]:t}},{value:{["@graph"]:i}},{value:{["@graph"]:s}},{value:{["@graph"]:l}}]=await Promise.allSettled(r.map(d=>n(d).then(c=>c.json()))),a=Zl(ja(e,"rdfs:label"),d=>d["rdfs:label"]),o=Vp(i).map(d=>({...d,children:ja(gs(d.children,d["rdfs:label"]),"rdfs:label")})),f=Zl(s,d=>d["rdfs:label"]),h=Hp(l);return{attack:a,dao:t,events:o,weaknesses:f,properties:h}}const Mb=Object.freeze(Object.defineProperty({__proto__:null,load:zp},Symbol.toStringTag,{value:"Module"}));function xp(n){let r;const e=n[7].default,t=Ft(e,n,n[6],null);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,s){t&&t.m(i,s),r=!0},p(i,[s]){t&&t.p&&(!r||s&64)&&Rt(t,e,i,i[6],r?Bt(e,i[6],s,null):St(i[6]),null)},i(i){r||(se(t,i),r=!0)},o(i){fe(t,i),r=!1},d(i){t&&t.d(i)}}}function Xp(n,r,e){let{$$slots:t={},$$scope:i}=r,{initialNodes:s=void 0}=r,{initialEdges:l=void 0}=r,{initialWidth:a=void 0}=r,{initialHeight:u=void 0}=r,{fitView:o=void 0}=r,{nodeOrigin:f=void 0}=r;const h=pp({nodes:s,edges:l,width:a,height:u,nodeOrigin:f,fitView:o});return ap(gp,{getStore:()=>h}),hs(()=>{h.reset()}),n.$$set=d=>{"initialNodes"in d&&e(0,s=d.initialNodes),"initialEdges"in d&&e(1,l=d.initialEdges),"initialWidth"in d&&e(2,a=d.initialWidth),"initialHeight"in d&&e(3,u=d.initialHeight),"fitView"in d&&e(4,o=d.fitView),"nodeOrigin"in d&&e(5,f=d.nodeOrigin),"$$scope"in d&&e(6,i=d.$$scope)},[s,l,a,u,o,f,i,t]}class Gp extends dt{constructor(r){super(),ht(this,r,Xp,xp,Je,{initialNodes:0,initialEdges:1,initialWidth:2,initialHeight:3,fitView:4,nodeOrigin:5})}}function Wp(n){let r,e,t;const i=n[33].default,s=Ft(i,n,n[32],null);return{c(){r=Q("div"),s&&s.c(),this.h()},l(l){r=Y(l,"DIV",{class:!0,style:!0});var a=we(r);s&&s.l(a),a.forEach(m),this.h()},h(){ee(r,"class",e=Fa(["svelte-flow__resize-control","nodrag",...n[4],n[0],n[1]])),ee(r,"style",n[3])},m(l,a){A(l,r,a),s&&s.m(r,null),n[34](r),t=!0},p(l,a){s&&s.p&&(!t||a[1]&2)&&Rt(s,i,l,l[32],t?Bt(i,l[32],a,null):St(l[32]),null),(!t||a[0]&19&&e!==(e=Fa(["svelte-flow__resize-control","nodrag",...l[4],l[0],l[1]])))&&ee(r,"class",e),(!t||a[0]&8)&&ee(r,"style",l[3])},i(l){t||(se(s,l),t=!0)},o(l){fe(s,l),t=!1},d(l){l&&m(r),s&&s.d(l),n[34](null)}}}function Qp(n,r,e){let t,i,s,l,a,u,o,f,h,d,c,_,w,k,C,j,{$$slots:S={},$$scope:F}=r,{nodeId:b=void 0}=r,{position:y=void 0}=r,{variant:v=Ki.Handle}=r,{color:B=void 0}=r,{minWidth:T=10}=r,{minHeight:U=10}=r,{maxWidth:E=Number.MAX_VALUE}=r,{maxHeight:P=Number.MAX_VALUE}=r,{keepAspectRatio:O=!1}=r,{shouldResize:N=void 0}=r,{onResizeStart:X=void 0}=r,{onResize:L=void 0}=r,{onResizeEnd:ae=void 0}=r,{style:K=""}=r,{class:G=""}=r;const{nodeLookup:$,snapGrid:J,viewport:ne,nodes:z,nodeOrigin:ue}=Gn();Ye(n,$,_e=>e(37,w=_e)),Ye(n,J,_e=>e(39,C=_e)),Ye(n,ne,_e=>e(40,j=_e)),Ye(n,z,_e=>e(36,_=_e)),Ye(n,ue,_e=>e(38,k=_e));const Pe=up("svelteflow__node_id");let He,be=null;hl(()=>(He&&e(23,be=mp({domNode:He,nodeId:a,getStoreItems:()=>({nodeLookup:w,transform:[j.x,j.y,j.zoom],snapGrid:C??void 0,snapToGrid:!!C,nodeOrigin:k}),onChange:(_e,Te)=>{var gt,rt;const lt=(gt=w.get(a))==null?void 0:gt.internals.userNode;if(lt){_e.x!==void 0&&_e.y!==void 0&&(lt.position={x:_e.x,y:_e.y}),_e.width!==void 0&&_e.height!==void 0&&(lt.width=_e.width,lt.height=_e.height);for(const Ee of Te){const Ue=(rt=w.get(Ee.id))==null?void 0:rt.internals.userNode;Ue&&(Ue.position=Ee.position)}z.set(_)}}})),()=>{be==null||be.destroy()}));function De(_e){It[_e?"unshift":"push"](()=>{He=_e,e(2,He)})}return n.$$set=_e=>{"nodeId"in _e&&e(10,b=_e.nodeId),"position"in _e&&e(11,y=_e.position),"variant"in _e&&e(0,v=_e.variant),"color"in _e&&e(12,B=_e.color),"minWidth"in _e&&e(13,T=_e.minWidth),"minHeight"in _e&&e(14,U=_e.minHeight),"maxWidth"in _e&&e(15,E=_e.maxWidth),"maxHeight"in _e&&e(16,P=_e.maxHeight),"keepAspectRatio"in _e&&e(17,O=_e.keepAspectRatio),"shouldResize"in _e&&e(18,N=_e.shouldResize),"onResizeStart"in _e&&e(19,X=_e.onResizeStart),"onResize"in _e&&e(20,L=_e.onResize),"onResizeEnd"in _e&&e(21,ae=_e.onResizeEnd),"style"in _e&&e(22,K=_e.style),"class"in _e&&e(1,G=_e.class),"$$scope"in _e&&e(32,F=_e.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&8192&&e(27,t=T??10),n.$$.dirty[0]&16384&&e(26,i=U??10),n.$$.dirty[0]&32768&&e(25,s=E??Number.MAX_VALUE),n.$$.dirty[0]&65536&&e(24,l=P??Number.MAX_VALUE),n.$$.dirty[0]&1024&&(a=typeof b=="string"?b:Pe),n.$$.dirty[0]&1&&e(31,u=v===Ki.Line?"right":"bottom-right"),n.$$.dirty[0]&2048|n.$$.dirty[1]&1&&e(28,o=y??u),n.$$.dirty[0]&268435456&&e(4,f=o.split("-")),n.$$.dirty[0]&1&&e(30,h=v===Ki.Line?"border-color":"background-color"),n.$$.dirty[0]&4194304&&e(29,d=K??""),n.$$.dirty[0]&1610616832&&e(3,c=B?`${d} ${h}: ${B};`:d),n.$$.dirty[0]&532545536&&(be==null||be.update({controlPosition:o,boundaries:{minWidth:t,minHeight:i,maxWidth:s,maxHeight:l},keepAspectRatio:!!O,onResizeStart:X,onResize:L,onResizeEnd:ae,shouldResize:N}))},[v,G,He,c,f,$,J,ne,z,ue,b,y,B,T,U,E,P,O,N,X,L,ae,K,be,l,s,i,t,o,d,h,u,F,S,De]}class Lc extends dt{constructor(r){super(),ht(this,r,Qp,Wp,Je,{nodeId:10,position:11,variant:0,color:12,minWidth:13,minHeight:14,maxWidth:15,maxHeight:16,keepAspectRatio:17,shouldResize:18,onResizeStart:19,onResize:20,onResizeEnd:21,style:22,class:1},null,[-1,-1])}}function Va(n,r,e){const t=n.slice();return t[20]=r[e],t}function Ha(n,r,e){const t=n.slice();return t[20]=r[e],t}function za(n){let r=[],e=new Map,t,i=[],s=new Map,l,a,u=xe(Ra);const o=d=>d[20];for(let d=0;d<u.length;d+=1){let c=Ha(n,u,d),_=o(c);e.set(_,r[d]=xa(_,c))}let f=xe(Sa);const h=d=>d[20];for(let d=0;d<f.length;d+=1){let c=Va(n,f,d),_=h(c);s.set(_,i[d]=Xa(_,c))}return{c(){for(let d=0;d<r.length;d+=1)r[d].c();t=ie();for(let d=0;d<i.length;d+=1)i[d].c();l=Ae()},l(d){for(let c=0;c<r.length;c+=1)r[c].l(d);t=le(d);for(let c=0;c<i.length;c+=1)i[c].l(d);l=Ae()},m(d,c){for(let _=0;_<r.length;_+=1)r[_]&&r[_].m(d,c);A(d,t,c);for(let _=0;_<i.length;_+=1)i[_]&&i[_].m(d,c);A(d,l,c),a=!0},p(d,c){c&65521&&(u=xe(Ra),et(),r=Ua(r,c,o,1,d,u,e,t.parentNode,Pa,xa,t,Ha),tt()),c&65485&&(f=xe(Sa),et(),i=Ua(i,c,h,1,d,f,s,l.parentNode,Pa,Xa,l,Va),tt())},i(d){if(!a){for(let c=0;c<u.length;c+=1)se(r[c]);for(let c=0;c<f.length;c+=1)se(i[c]);a=!0}},o(d){for(let c=0;c<r.length;c+=1)fe(r[c]);for(let c=0;c<i.length;c+=1)fe(i[c]);a=!1},d(d){d&&(m(t),m(l));for(let c=0;c<r.length;c+=1)r[c].d(d);for(let c=0;c<i.length;c+=1)i[c].d(d)}}}function xa(n,r){let e,t,i;return t=new Lc({props:{class:r[4],style:r[5],nodeId:r[0],position:r[20],variant:Ki.Line,color:r[6],minWidth:r[12],minHeight:r[13],maxWidth:r[14],maxHeight:r[15],onResizeStart:r[9],keepAspectRatio:r[7],shouldResize:r[8],onResize:r[10],onResizeEnd:r[11]}}),{key:n,first:null,c(){e=Ae(),Ce(t.$$.fragment),this.h()},l(s){e=Ae(),Ne(t.$$.fragment,s),this.h()},h(){this.first=e},m(s,l){A(s,e,l),Ie(t,s,l),i=!0},p(s,l){r=s;const a={};l&16&&(a.class=r[4]),l&32&&(a.style=r[5]),l&1&&(a.nodeId=r[0]),l&64&&(a.color=r[6]),l&512&&(a.onResizeStart=r[9]),l&128&&(a.keepAspectRatio=r[7]),l&256&&(a.shouldResize=r[8]),l&1024&&(a.onResize=r[10]),l&2048&&(a.onResizeEnd=r[11]),t.$set(a)},i(s){i||(se(t.$$.fragment,s),i=!0)},o(s){fe(t.$$.fragment,s),i=!1},d(s){s&&m(e),Fe(t,s)}}}function Xa(n,r){let e,t,i;return t=new Lc({props:{class:r[2],style:r[3],nodeId:r[0],position:r[20],color:r[6],minWidth:r[12],minHeight:r[13],maxWidth:r[14],maxHeight:r[15],onResizeStart:r[9],keepAspectRatio:r[7],shouldResize:r[8],onResize:r[10],onResizeEnd:r[11]}}),{key:n,first:null,c(){e=Ae(),Ce(t.$$.fragment),this.h()},l(s){e=Ae(),Ne(t.$$.fragment,s),this.h()},h(){this.first=e},m(s,l){A(s,e,l),Ie(t,s,l),i=!0},p(s,l){r=s;const a={};l&4&&(a.class=r[2]),l&8&&(a.style=r[3]),l&1&&(a.nodeId=r[0]),l&64&&(a.color=r[6]),l&512&&(a.onResizeStart=r[9]),l&128&&(a.keepAspectRatio=r[7]),l&256&&(a.shouldResize=r[8]),l&1024&&(a.onResize=r[10]),l&2048&&(a.onResizeEnd=r[11]),t.$set(a)},i(s){i||(se(t.$$.fragment,s),i=!0)},o(s){fe(t.$$.fragment,s),i=!1},d(s){s&&m(e),Fe(t,s)}}}function Yp(n){let r,e,t=n[1]&&za(n);return{c(){t&&t.c(),r=Ae()},l(i){t&&t.l(i),r=Ae()},m(i,s){t&&t.m(i,s),A(i,r,s),e=!0},p(i,[s]){i[1]?t?(t.p(i,s),s&2&&se(t,1)):(t=za(i),t.c(),se(t,1),t.m(r.parentNode,r)):t&&(et(),fe(t,1,1,()=>{t=null}),tt())},i(i){e||(se(t),e=!0)},o(i){fe(t),e=!1},d(i){i&&m(r),t&&t.d(i)}}}function Jp(n,r,e){let{nodeId:t=void 0}=r,{isVisible:i=!0}=r,{handleClass:s=void 0}=r,{handleStyle:l=void 0}=r,{lineClass:a=void 0}=r,{lineStyle:u=void 0}=r,{color:o=void 0}=r,{minWidth:f=10}=r,{minHeight:h=10}=r,{maxWidth:d=Number.MAX_VALUE}=r,{maxHeight:c=Number.MAX_VALUE}=r,{keepAspectRatio:_=!1}=r,{shouldResize:w=void 0}=r,{onResizeStart:k=void 0}=r,{onResize:C=void 0}=r,{onResizeEnd:j=void 0}=r,S=f||10,F=h||10,b=d||Number.MAX_VALUE,y=c||Number.MAX_VALUE;return n.$$set=v=>{"nodeId"in v&&e(0,t=v.nodeId),"isVisible"in v&&e(1,i=v.isVisible),"handleClass"in v&&e(2,s=v.handleClass),"handleStyle"in v&&e(3,l=v.handleStyle),"lineClass"in v&&e(4,a=v.lineClass),"lineStyle"in v&&e(5,u=v.lineStyle),"color"in v&&e(6,o=v.color),"minWidth"in v&&e(16,f=v.minWidth),"minHeight"in v&&e(17,h=v.minHeight),"maxWidth"in v&&e(18,d=v.maxWidth),"maxHeight"in v&&e(19,c=v.maxHeight),"keepAspectRatio"in v&&e(7,_=v.keepAspectRatio),"shouldResize"in v&&e(8,w=v.shouldResize),"onResizeStart"in v&&e(9,k=v.onResizeStart),"onResize"in v&&e(10,C=v.onResize),"onResizeEnd"in v&&e(11,j=v.onResizeEnd)},[t,i,s,l,a,u,o,_,w,k,C,j,S,F,b,y,f,h,d,c]}class ln extends dt{constructor(r){super(),ht(this,r,Jp,Yp,Je,{nodeId:0,isVisible:1,handleClass:2,handleStyle:3,lineClass:4,lineStyle:5,color:6,minWidth:16,minHeight:17,maxWidth:18,maxHeight:19,keepAspectRatio:7,shouldResize:8,onResizeStart:9,onResize:10,onResizeEnd:11})}}const Ga=n=>vp(n);function Zp(){const{zoomIn:n,zoomOut:r,fitView:e,onbeforedelete:t,snapGrid:i,viewport:s,width:l,height:a,minZoom:u,maxZoom:o,panZoom:f,nodes:h,edges:d,domNode:c,nodeLookup:_,edgeLookup:w,nodeOrigin:k}=Gn(),C=F=>{var T,U;const b=_t(_),y=Ga(F)?F:b.get(F.id),v=y.parentId?kp(y.position,y.measured,y.parentId,b,_t(k)):y.position,B={id:y.id,position:v,width:((T=y.measured)==null?void 0:T.width)??y.width,height:((U=y.measured)==null?void 0:U.height)??y.height,data:y.data};return Oa(B)},j=(F,b,y={replace:!1})=>{var T;const v=(T=_t(_).get(F))==null?void 0:T.internals.userNode;if(!v)return;const B=typeof b=="function"?b(v):b;y.replace?h.update(U=>U.map(E=>E.id===F?Ga(B)?B:{...E,...B}:E)):(Object.assign(v,B),h.update(U=>U))},S=F=>_t(_).get(F);return{zoomIn:n,zoomOut:r,getInternalNode:S,getNode:F=>{var b;return(b=S(F))==null?void 0:b.internals.userNode},getNodes:F=>F===void 0?_t(h):Wa(_t(_),F),getEdge:F=>_t(w).get(F),getEdges:F=>F===void 0?_t(d):Wa(_t(w),F),setZoom:(F,b)=>{const y=_t(f);return y?y.scaleTo(F,{duration:b==null?void 0:b.duration}):Promise.resolve(!1)},getZoom:()=>_t(s).zoom,setViewport:async(F,b)=>{const y=_t(s),v=_t(f);return v?(await v.setViewport({x:F.x??y.x,y:F.y??y.y,zoom:F.zoom??y.zoom},{duration:b==null?void 0:b.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>_t(s),setCenter:async(F,b,y)=>{const v=typeof(y==null?void 0:y.zoom)<"u"?y.zoom:_t(o),B=_t(f);return B?(await B.setViewport({x:_t(l)/2-F*v,y:_t(a)/2-b*v,zoom:v},{duration:y==null?void 0:y.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:e,fitBounds:async(F,b)=>{const y=_t(f);if(!y)return Promise.resolve(!1);const v=bp(F,_t(l),_t(a),_t(u),_t(o),(b==null?void 0:b.padding)??.1);return await y.setViewport(v,{duration:b==null?void 0:b.duration}),Promise.resolve(!0)},getIntersectingNodes:(F,b=!0,y)=>{const v=Ba(F),B=v?F:C(F);return B?(y||_t(h)).filter(T=>{const U=_t(_).get(T.id);if(!U||!v&&T.id===F.id)return!1;const E=Oa(U),P=La(E,B);return b&&P>0||P>=B.width*B.height}):[]},isNodeIntersecting:(F,b,y=!0)=>{const B=Ba(F)?F:C(F);if(!B)return!1;const T=La(B,b);return y&&T>0||T>=B.width*B.height},deleteElements:async({nodes:F=[],edges:b=[]})=>{const{nodes:y,edges:v}=await wp({nodesToRemove:F,edgesToRemove:b,nodes:_t(h),edges:_t(d),onBeforeDelete:_t(t)});return y&&h.update(B=>B.filter(T=>!y.some(({id:U})=>U===T.id))),v&&d.update(B=>B.filter(T=>!v.some(({id:U})=>U===T.id))),{deletedNodes:y,deletedEdges:v}},screenToFlowPosition:(F,b={snapToGrid:!0})=>{const y=_t(c);if(!y)return F;const v=b.snapToGrid?_t(i):!1,{x:B,y:T,zoom:U}=_t(s),{x:E,y:P}=y.getBoundingClientRect(),O={x:F.x-E,y:F.y-P};return yp(O,[B,T,U],v!==null,v||[1,1])},flowToScreenPosition:F=>{const b=_t(c);if(!b)return F;const{x:y,y:v,zoom:B}=_t(s),{x:T,y:U}=b.getBoundingClientRect(),E=Ep(F,[y,v,B]);return{x:E.x+T,y:E.y+U}},toObject:()=>({nodes:_t(h).map(F=>({...F,position:{...F.position},data:{...F.data}})),edges:_t(d).map(F=>({...F})),viewport:{..._t(s)}}),updateNode:j,updateNodeData:(F,b,y)=>{var T;const v=(T=_t(_).get(F))==null?void 0:T.internals.userNode;if(!v)return;const B=typeof b=="function"?b(v):b;v.data=y!=null&&y.replace?B:{...v.data,...B},h.update(U=>U)},viewport:s}}function Wa(n,r){var t;const e=[];for(const i of r){const s=n.get(i);if(s){const l="internals"in s?(t=s.internals)==null?void 0:t.userNode:s;e.push(l)}}return e}function Yr(){const{connection:n}=Gn();return n}function qr(){const{nodes:n}=Gn();return n}function jr(){const{edges:n}=Gn();return n}function Qa(n){const{nodeLookup:r,nodes:e}=Gn();return cp([r,e],([t])=>t.get(n))}let Uc=Kt([]),Pc=Kt([]),Mc=Kt([]),qc=Kt([]),jc=Kt([]),Vc=Kt([]);function Kp(){const{subscribe:n,set:r,update:e}=Kt();return{subscribe:n,update:e,add:t=>r(t),clear:()=>r()}}const or=Kp();function fr(n){"@babel/helpers - typeof";return fr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},fr(n)}function $p(n,r){if(fr(n)!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var t=e.call(n,r||"default");if(fr(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function Hc(n){var r=$p(n,"string");return fr(r)=="symbol"?r:r+""}function Ya(n,r){for(var e=0;e<r.length;e++){var t=r[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,Hc(t.key),t)}}function Ct(n,r,e){return r&&Ya(n.prototype,r),e&&Ya(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Nt(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function e0(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Jr(n,r){if(r&&(fr(r)=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e0(n)}function Mt(n){return Mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mt(n)}function es(n,r){return es=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},es(n,r)}function $t(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&es(n,r)}function Se(n,r,e){return(r=Hc(r))in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}var Br={Literal:1,Collection:3,Graph:4,NamedNode:5,BlankNode:6,Variable:7},Dt=function(){function n(r){Nt(this,n),Se(this,"termType",void 0),Se(this,"classOrder",void 0),Se(this,"value",void 0),this.value=r}return Ct(n,[{key:"substitute",value:function(e){return this}},{key:"compareTerm",value:function(e){return this.classOrder<e.classOrder?-1:this.classOrder>e.classOrder?1:this.value<e.value?-1:this.value>e.value?1:0}},{key:"equals",value:function(e){return e?this.termType===e.termType&&this.value===e.value:!1}},{key:"hashString",value:function(){return this.toCanonical()}},{key:"sameTerm",value:function(e){return this.equals(e)}},{key:"toCanonical",value:function(){return this.toNT()}},{key:"toNT",value:function(){return this.toString()}},{key:"toNQ",value:function(){return this.toNT()}},{key:"toString",value:function(){throw new Error("Node.toString() is abstract - see the subclasses instead")}}])}();Se(Dt,"fromValue",void 0);Se(Dt,"toJS",void 0);var An="NamedNode",Tn="BlankNode",Wn="Literal",sn="Variable",kn="DefaultGraph",an="Collection",zc="Empty",wi="Graph",Ja="text/html",ts="application/ld+json",xc="text/n3",t0="application/n3",rs="application/nquads",ns="application/n-quads",r0="application/n-triples",hi="application/rdf+xml",n0="application/sparql-update",i0="application/sparql-update-single-match",vn="text/turtle",l0="application/x-turtle",is="application/xhtml+xml";function s0(n,r,e){return r=Mt(r),Jr(n,Xc()?Reflect.construct(r,e||[],Mt(n).constructor):r.apply(n,e))}function Xc(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xc=function(){return!!n})()}var Or=function(n){function r(e){var t;return Nt(this,r),t=s0(this,r,[r.getId(e)]),Se(t,"termType",Tn),Se(t,"classOrder",Br.BlankNode),Se(t,"isBlank",1),Se(t,"isVar",1),t}return $t(r,n),Ct(r,[{key:"id",get:function(){return this.value},set:function(t){this.value=t}},{key:"compareTerm",value:function(t){return this.classOrder<t.classOrder?-1:this.classOrder>t.classOrder?1:this.id<t.id?-1:this.id>t.id?1:0}},{key:"copy",value:function(t){var i=new r;return t.copyTo(this,i),i}},{key:"toCanonical",value:function(){return r.NTAnonymousNodePrefix+this.value}},{key:"toString",value:function(){return r.NTAnonymousNodePrefix+this.id}}],[{key:"getId",value:function(t){if(t){if(typeof t!="string")throw new Error("Bad id argument to new blank node: "+t);if(t.includes("#")){var i=t.split("#");return i[i.length-1]}return t}return"n"+r.nextId++}}])}(Dt);Se(Or,"nextId",0);Se(Or,"NTAnonymousNodePrefix","_:");function On(n){return typeof n=="string"?n:n.value}function a0(n){return fr(n)==="object"&&n!==null&&"subject"in n}function Za(n){return fr(n)==="object"&&n!==null&&"statements"in n}function vs(n){return Gr(n)&&n.termType===an}function u0(n){return n&&Object.prototype.hasOwnProperty.call(n,"termType")&&(n.termType===An||n.termType===sn||n.termType===Tn||n.termType===an||n.termType===Wn||n.termType===wi)}function o0(n){return n&&Object.prototype.hasOwnProperty.call(n,"termType")&&(n.termType===An||n.termType===sn||n.termType===Tn||n.termType===an||n.termType===Wn||n.termType===wi)}function f0(n){return Gr(n)&&(n.termType===An||n.termType===Tn||n.termType===sn)}function c0(n){return Gr(n)&&n.termType===sn}function Gr(n){return fr(n)==="object"&&n!==null&&"termType"in n}function Gc(n){return n.termType===Wn}function Ln(n){return fr(n)==="object"&&n!==null&&"subject"in n&&"predicate"in n&&"object"in n}function Ka(n){return Gr(n)&&n.termType==="NamedNode"}function d0(n){return Gr(n)&&(n.termType===An||n.termType===sn||n.termType===Tn||n.termType===kn)}function h0(n,r,e){return r=Mt(r),Jr(n,Wc()?Reflect.construct(r,e||[],Mt(n).constructor):r.apply(n,e))}function Wc(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wc=function(){return!!n})()}var Gt=function(n){function r(e){var t;if(Nt(this,r),t=h0(this,r,[On(e)]),Se(t,"termType",An),Se(t,"classOrder",Br.NamedNode),!t.value)throw new Error("Missing IRI for NamedNode");if(!t.value.includes(":"))throw new Error('NamedNode IRI "'+e+'" must be absolute.');if(t.value.includes(" ")){var i='Error: NamedNode IRI "'+e+'" must not contain unencoded spaces.';throw new Error(i)}return t}return $t(r,n),Ct(r,[{key:"dir",value:function(){var t=this.value.split("#")[0],i=t.slice(0,-1).lastIndexOf("/"),s=t.indexOf("//");return s>=0&&i<s+2||i<0?null:new r(t.slice(0,i+1))}},{key:"site",value:function(){var t=this.value.split("#")[0],i=t.indexOf("//");if(i<0)throw new Error("This URI does not have a web site part (origin)");var s=t.indexOf("/",i+2);return s<0?new r(t.slice(0)+"/"):new r(t.slice(0,s+1))}},{key:"doc",value:function(){return this.value.indexOf("#")<0?this:new r(this.value.split("#")[0])}},{key:"toString",value:function(){return"<"+this.value+">"}},{key:"id",value:function(){return this.value.split("#")[1]}},{key:"uri",get:function(){return this.value},set:function(t){this.value=t}}],[{key:"fromValue",value:function(t){return typeof t>"u"||t===null||Gr(t)?t:new r(t)}}])}(Dt);const zr={boolean:new Gt("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:new Gt("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:new Gt("http://www.w3.org/2001/XMLSchema#decimal"),double:new Gt("http://www.w3.org/2001/XMLSchema#double"),integer:new Gt("http://www.w3.org/2001/XMLSchema#integer"),langString:new Gt("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:new Gt("http://www.w3.org/2001/XMLSchema#string")};function _0(n,r,e){return r=Mt(r),Jr(n,Qc()?Reflect.construct(r,e||[],Mt(n).constructor):r.apply(n,e))}function Qc(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qc=function(){return!!n})()}var Fr=function(n){function r(e,t,i){var s;return Nt(this,r),s=_0(this,r,[e]),Se(s,"termType",Wn),Se(s,"classOrder",Br.Literal),Se(s,"datatype",zr.string),Se(s,"isVar",0),Se(s,"language",""),t?(s.language=t,s.datatype=zr.langString):i?s.datatype=Gt.fromValue(i):s.datatype=zr.string,s}return $t(r,n),Ct(r,[{key:"copy",value:function(){return new r(this.value,this.lang,this.datatype)}},{key:"equals",value:function(t){return t?this.termType===t.termType&&this.value===t.value&&this.language===t.language&&(!this.datatype&&!t.datatype||this.datatype&&this.datatype.equals(t.datatype)):!1}},{key:"lang",get:function(){return this.language},set:function(t){this.language=t||""}},{key:"toNT",value:function(){return r.toNT(this)}},{key:"toString",value:function(){return""+this.value}}],[{key:"toNT",value:function(t){if(typeof t.value=="number")return""+t.value;if(typeof t.value!="string")throw new Error("Value of RDF literal is not string or number: "+t.value);var i=t.value;return i=i.replace(/\\/g,"\\\\"),i=i.replace(/\"/g,'\\"'),i=i.replace(/\n/g,"\\n"),i=i.replace(/\r/g,"\\r"),i='"'+i+'"',t.language?i+="@"+t.language:t.datatype.equals(zr.string)||(i+="^^"+t.datatype.toCanonical()),i}},{key:"fromBoolean",value:function(t){var i=t?"1":"0";return new r(i,null,zr.boolean)}},{key:"fromDate",value:function(t){if(!(t instanceof Date))throw new TypeError("Invalid argument to Literal.fromDate()");var i=function(a){return(""+(100+a)).slice(1,3)},s=""+t.getUTCFullYear()+"-"+i(t.getUTCMonth()+1)+"-"+i(t.getUTCDate())+"T"+i(t.getUTCHours())+":"+i(t.getUTCMinutes())+":"+i(t.getUTCSeconds())+"Z";return new r(s,null,zr.dateTime)}},{key:"fromNumber",value:function(t){if(typeof t!="number")throw new TypeError("Invalid argument to Literal.fromNumber()");var i,s=t.toString();return s.indexOf("e")<0&&Math.abs(t)<=Number.MAX_SAFE_INTEGER?i=Number.isInteger(t)?zr.integer:zr.decimal:i=zr.double,new r(s,null,i)}},{key:"fromValue",value:function(t){if(Gc(t))return t;switch(fr(t)){case"object":if(t instanceof Date)return r.fromDate(t);case"boolean":return r.fromBoolean(t);case"number":return r.fromNumber(t);case"string":return new r(t)}throw new Error("Can't make literal from "+t+" of type "+fr(t))}}])}(Dt);function p0(n,r,e){return r=Mt(r),Jr(n,Yc()?Reflect.construct(r,e||[],Mt(n).constructor):r.apply(n,e))}function Yc(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Yc=function(){return!!n})()}function Jc(n){return typeof n>"u"||n===null||Gr(n)?n:Array.isArray(n)?new tn(n):Fr.fromValue(n)}var tn=function(n){function r(e){var t;return Nt(this,r),t=p0(this,r,[(Or.nextId++).toString()]),Se(t,"termType",an),Se(t,"classOrder",Br.Collection),Se(t,"closed",!1),Se(t,"compareTerm",Or.prototype.compareTerm),Se(t,"elements",[]),Se(t,"isVar",0),e&&e.length>0&&e.forEach(function(i){t.elements.push(Jc(i))}),t}return $t(r,n),Ct(r,[{key:"id",get:function(){return this.value},set:function(t){this.value=t}},{key:"append",value:function(t){return this.elements.push(t)}},{key:"close",value:function(){return this.closed=!0,this.closed}},{key:"shift",value:function(){return this.elements.shift()}},{key:"substitute",value:function(t){var i=this.elements.map(function(s){return s.substitute(t)});return new r(i)}},{key:"toNT",value:function(){return r.toNT(this)}},{key:"toString",value:function(){return"("+this.elements.join(" ")+")"}},{key:"unshift",value:function(t){return this.elements.unshift(t)}}],[{key:"toNT",value:function(t){return Or.NTAnonymousNodePrefix+t.id}}])}(Dt);Se(tn,"termType",an);function $a(n,r,e,t,i,s,l){try{var a=n[s](l),u=a.value}catch(o){return void e(o)}a.done?r(u):Promise.resolve(u).then(t,i)}function eu(n){return function(){var r=this,e=arguments;return new Promise(function(t,i){var s=n.apply(r,e);function l(u){$a(s,t,i,l,a,"next",u)}function a(u){$a(s,t,i,l,a,"throw",u)}l(void 0)})}}var Zc={exports:{}},Kc={exports:{}};(function(n){function r(e){"@babel/helpers - typeof";return n.exports=r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n.exports.__esModule=!0,n.exports.default=n.exports,r(e)}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports})(Kc);var g0=Kc.exports;(function(n){var r=g0.default;function e(){n.exports=e=function(){return i},n.exports.__esModule=!0,n.exports.default=n.exports;var t,i={},s=Object.prototype,l=s.hasOwnProperty,a=Object.defineProperty||function(G,$,J){G[$]=J.value},u=typeof Symbol=="function"?Symbol:{},o=u.iterator||"@@iterator",f=u.asyncIterator||"@@asyncIterator",h=u.toStringTag||"@@toStringTag";function d(G,$,J){return Object.defineProperty(G,$,{value:J,enumerable:!0,configurable:!0,writable:!0}),G[$]}try{d({},"")}catch{d=function(J,ne,z){return J[ne]=z}}function c(G,$,J,ne){var z=$&&$.prototype instanceof F?$:F,ue=Object.create(z.prototype),Pe=new ae(ne||[]);return a(ue,"_invoke",{value:O(G,J,Pe)}),ue}function _(G,$,J){try{return{type:"normal",arg:G.call($,J)}}catch(ne){return{type:"throw",arg:ne}}}i.wrap=c;var w="suspendedStart",k="suspendedYield",C="executing",j="completed",S={};function F(){}function b(){}function y(){}var v={};d(v,o,function(){return this});var B=Object.getPrototypeOf,T=B&&B(B(K([])));T&&T!==s&&l.call(T,o)&&(v=T);var U=y.prototype=F.prototype=Object.create(v);function E(G){["next","throw","return"].forEach(function($){d(G,$,function(J){return this._invoke($,J)})})}function P(G,$){function J(z,ue,Pe,He){var be=_(G[z],G,ue);if(be.type!=="throw"){var De=be.arg,_e=De.value;return _e&&r(_e)=="object"&&l.call(_e,"__await")?$.resolve(_e.__await).then(function(Te){J("next",Te,Pe,He)},function(Te){J("throw",Te,Pe,He)}):$.resolve(_e).then(function(Te){De.value=Te,Pe(De)},function(Te){return J("throw",Te,Pe,He)})}He(be.arg)}var ne;a(this,"_invoke",{value:function(ue,Pe){function He(){return new $(function(be,De){J(ue,Pe,be,De)})}return ne=ne?ne.then(He,He):He()}})}function O(G,$,J){var ne=w;return function(z,ue){if(ne===C)throw Error("Generator is already running");if(ne===j){if(z==="throw")throw ue;return{value:t,done:!0}}for(J.method=z,J.arg=ue;;){var Pe=J.delegate;if(Pe){var He=N(Pe,J);if(He){if(He===S)continue;return He}}if(J.method==="next")J.sent=J._sent=J.arg;else if(J.method==="throw"){if(ne===w)throw ne=j,J.arg;J.dispatchException(J.arg)}else J.method==="return"&&J.abrupt("return",J.arg);ne=C;var be=_(G,$,J);if(be.type==="normal"){if(ne=J.done?j:k,be.arg===S)continue;return{value:be.arg,done:J.done}}be.type==="throw"&&(ne=j,J.method="throw",J.arg=be.arg)}}}function N(G,$){var J=$.method,ne=G.iterator[J];if(ne===t)return $.delegate=null,J==="throw"&&G.iterator.return&&($.method="return",$.arg=t,N(G,$),$.method==="throw")||J!=="return"&&($.method="throw",$.arg=new TypeError("The iterator does not provide a '"+J+"' method")),S;var z=_(ne,G.iterator,$.arg);if(z.type==="throw")return $.method="throw",$.arg=z.arg,$.delegate=null,S;var ue=z.arg;return ue?ue.done?($[G.resultName]=ue.value,$.next=G.nextLoc,$.method!=="return"&&($.method="next",$.arg=t),$.delegate=null,S):ue:($.method="throw",$.arg=new TypeError("iterator result is not an object"),$.delegate=null,S)}function X(G){var $={tryLoc:G[0]};1 in G&&($.catchLoc=G[1]),2 in G&&($.finallyLoc=G[2],$.afterLoc=G[3]),this.tryEntries.push($)}function L(G){var $=G.completion||{};$.type="normal",delete $.arg,G.completion=$}function ae(G){this.tryEntries=[{tryLoc:"root"}],G.forEach(X,this),this.reset(!0)}function K(G){if(G||G===""){var $=G[o];if($)return $.call(G);if(typeof G.next=="function")return G;if(!isNaN(G.length)){var J=-1,ne=function z(){for(;++J<G.length;)if(l.call(G,J))return z.value=G[J],z.done=!1,z;return z.value=t,z.done=!0,z};return ne.next=ne}}throw new TypeError(r(G)+" is not iterable")}return b.prototype=y,a(U,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:b,configurable:!0}),b.displayName=d(y,h,"GeneratorFunction"),i.isGeneratorFunction=function(G){var $=typeof G=="function"&&G.constructor;return!!$&&($===b||($.displayName||$.name)==="GeneratorFunction")},i.mark=function(G){return Object.setPrototypeOf?Object.setPrototypeOf(G,y):(G.__proto__=y,d(G,h,"GeneratorFunction")),G.prototype=Object.create(U),G},i.awrap=function(G){return{__await:G}},E(P.prototype),d(P.prototype,f,function(){return this}),i.AsyncIterator=P,i.async=function(G,$,J,ne,z){z===void 0&&(z=Promise);var ue=new P(c(G,$,J,ne),z);return i.isGeneratorFunction($)?ue:ue.next().then(function(Pe){return Pe.done?Pe.value:ue.next()})},E(U),d(U,h,"Generator"),d(U,o,function(){return this}),d(U,"toString",function(){return"[object Generator]"}),i.keys=function(G){var $=Object(G),J=[];for(var ne in $)J.push(ne);return J.reverse(),function z(){for(;J.length;){var ue=J.pop();if(ue in $)return z.value=ue,z.done=!1,z}return z.done=!0,z}},i.values=K,ae.prototype={constructor:ae,reset:function($){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!$)for(var J in this)J.charAt(0)==="t"&&l.call(this,J)&&!isNaN(+J.slice(1))&&(this[J]=t)},stop:function(){this.done=!0;var $=this.tryEntries[0].completion;if($.type==="throw")throw $.arg;return this.rval},dispatchException:function($){if(this.done)throw $;var J=this;function ne(De,_e){return Pe.type="throw",Pe.arg=$,J.next=De,_e&&(J.method="next",J.arg=t),!!_e}for(var z=this.tryEntries.length-1;z>=0;--z){var ue=this.tryEntries[z],Pe=ue.completion;if(ue.tryLoc==="root")return ne("end");if(ue.tryLoc<=this.prev){var He=l.call(ue,"catchLoc"),be=l.call(ue,"finallyLoc");if(He&&be){if(this.prev<ue.catchLoc)return ne(ue.catchLoc,!0);if(this.prev<ue.finallyLoc)return ne(ue.finallyLoc)}else if(He){if(this.prev<ue.catchLoc)return ne(ue.catchLoc,!0)}else{if(!be)throw Error("try statement without catch or finally");if(this.prev<ue.finallyLoc)return ne(ue.finallyLoc)}}}},abrupt:function($,J){for(var ne=this.tryEntries.length-1;ne>=0;--ne){var z=this.tryEntries[ne];if(z.tryLoc<=this.prev&&l.call(z,"finallyLoc")&&this.prev<z.finallyLoc){var ue=z;break}}ue&&($==="break"||$==="continue")&&ue.tryLoc<=J&&J<=ue.finallyLoc&&(ue=null);var Pe=ue?ue.completion:{};return Pe.type=$,Pe.arg=J,ue?(this.method="next",this.next=ue.finallyLoc,S):this.complete(Pe)},complete:function($,J){if($.type==="throw")throw $.arg;return $.type==="break"||$.type==="continue"?this.next=$.arg:$.type==="return"?(this.rval=this.arg=$.arg,this.method="return",this.next="end"):$.type==="normal"&&J&&(this.next=J),S},finish:function($){for(var J=this.tryEntries.length-1;J>=0;--J){var ne=this.tryEntries[J];if(ne.finallyLoc===$)return this.complete(ne.completion,ne.afterLoc),L(ne),S}},catch:function($){for(var J=this.tryEntries.length-1;J>=0;--J){var ne=this.tryEntries[J];if(ne.tryLoc===$){var z=ne.completion;if(z.type==="throw"){var ue=z.arg;L(ne)}return ue}}throw Error("illegal catch attempt")},delegateYield:function($,J,ne){return this.delegate={iterator:K($),resultName:J,nextLoc:ne},this.method==="next"&&(this.arg=t),S}},i}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(Zc);var m0=Zc.exports,$i=m0(),v0=$i;try{regeneratorRuntime=$i}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=$i:Function("r","regeneratorRuntime = r")($i)}const Xi=pl(v0);var _i="chrome:theSession";new Gt(_i);function b0(n,r,e){return r=Mt(r),Jr(n,$c()?Reflect.construct(r,e||[],Mt(n).constructor):r.apply(n,e))}function $c(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($c=function(){return!!n})()}var bs=function(n){function r(){var e;return Nt(this,r),e=b0(this,r,[""]),Se(e,"value",""),Se(e,"termType",kn),Se(e,"uri",_i),e}return $t(r,n),Ct(r,[{key:"toCanonical",value:function(){return this.value}},{key:"toString",value:function(){return"DefaultGraph"}}])}(Dt);function tu(n){return!!n&&n.termType===kn}var w0=new bs,bn=function(){function n(r,e,t,i){Nt(this,n),Se(this,"subject",void 0),Se(this,"predicate",void 0),Se(this,"object",void 0),Se(this,"graph",void 0),this.subject=Dt.fromValue(r),this.predicate=Dt.fromValue(e),this.object=Dt.fromValue(t),this.graph=i==null?w0:Dt.fromValue(i)}return Ct(n,[{key:"why",get:function(){return this.graph},set:function(e){this.graph=e}},{key:"equals",value:function(e){return e.subject.equals(this.subject)&&e.predicate.equals(this.predicate)&&e.object.equals(this.object)&&e.graph.equals(this.graph)}},{key:"substitute",value:function(e){var t=new n(this.subject.substitute(e),this.predicate.substitute(e),this.object.substitute(e),tu(this.graph)?this.graph:this.graph.substitute(e));return t}},{key:"toCanonical",value:function(){var e=[this.subject.toCanonical(),this.predicate.toCanonical(),this.object.toCanonical()];return this.graph&&this.graph.termType!==kn&&e.push(this.graph.toCanonical()),e.join(" ")+" ."}},{key:"toNT",value:function(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT()].join(" ")+" ."}},{key:"toNQ",value:function(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT(),tu(this.graph)?"":this.graph.toNT()].join(" ")+" ."}},{key:"toString",value:function(){return this.toNT()}}])}(),ed=ed||console.log;function Pn(n){var r;return r=n.indexOf("#"),r<0?n:n.slice(0,r)}function y0(n){var r=/[^\/]*\/\/([^\/]*)\//.exec(n);return r?r[1]:""}function gr(n,r){var e,t,i,s,l,a,u=r.indexOf("#");if(u>0&&(r=r.slice(0,u)),n.length===0)return r;if(n.indexOf("#")===0)return r+n;if(s=n.indexOf(":"),s>=0||(e=r.indexOf(":"),r.length===0))return n;if(e<0)return ed("Invalid base: "+r+" in join with given: "+n),n;if(t=r.slice(0,+e+1||9e9),n.indexOf("//")===0)return t+n;if(r.indexOf("//",e)===e+1){if(i=r.indexOf("/",e+3),i<0)return r.length-e-3>0?r+"/"+n:t+n}else if(i=r.indexOf("/",e+1),i<0)return r.length-e-1>0?r+"/"+n:t+n;if(n.indexOf("/")===0)return r.slice(0,i)+n;if(a=r.slice(i),l=a.lastIndexOf("/"),l<0)return t+n;for(l>=0&&l<a.length-1&&(a=a.slice(0,+l+1||9e9)),a+=n;a.match(/[^\/]*\/\.\.\//);)a=a.replace(/[^\/]*\/\.\.\//,"");return a=a.replace(/\.\//g,""),a=a.replace(/\/\.$/,"/"),r.slice(0,i)+a}function ru(n){var r=n.indexOf(":");return r<0?null:n.slice(0,r)}function Ll(n,r){var e,t,i,s,l,a,u,o,f,h,d,c,_,w=new RegExp("^[-_a-zA-Z0-9.]+:(//[^/]*)?/[^/]*$");if(!n)return r;if(n===r)return"";for(t=o=0,l=r.length;o<l;t=++o){var k=r[t];if(k!==n[t])break}if(n.slice(0,t).match(w)&&(i=r.indexOf("//"),i<0&&(i=-2),s=r.indexOf("/",i+2),r[s+1]!=="/"&&n[s+1]!=="/"&&r.slice(0,s)===n.slice(0,s)))return r.slice(s);if(r[t]==="#"&&n.length===t)return r.slice(t);for(;t>0&&r[t-1]!=="/";)t--;if(t<3||n.indexOf("//",t-2)>0||r.indexOf("//",t-2)>0||n.indexOf(":",t)>0)return r;for(u=0,d=n.slice(t),f=0,a=d.length;f<a;f++)e=d[f],e==="/"&&u++;if(u===0&&t<r.length&&r[t]==="#")return"./"+r.slice(t);if(u===0&&t===r.length)return"./";if(_="",u>0)for(h=1,c=u;c>=1?h<=c:h>=c;c>=1?++h:--h)_+="../";return _+r.slice(t)}function k0(n,r,e){return r=Mt(r),Jr(n,td()?Reflect.construct(r,e||[],Mt(n).constructor):r.apply(n,e))}function td(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(td=function(){return!!n})()}var En=function(n){function r(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return Nt(this,r),e=k0(this,r,[t]),Se(e,"termType",sn),Se(e,"base","varid:"),Se(e,"classOrder",Br.Variable),Se(e,"isVar",1),Se(e,"uri",void 0),e.base="varid:",e.uri=gr(t,e.base),e}return $t(r,n),Ct(r,[{key:"equals",value:function(t){return t?this.termType===t.termType&&this.value===t.value:!1}},{key:"hashString",value:function(){return this.toString()}},{key:"substitute",value:function(t){var i;return(i=t[this.toNT()])!=null?i:this}},{key:"toString",value:function(){return r.toString(this)}}],[{key:"toString",value:function(t){return t.uri.slice(0,t.base.length)===t.base?"?".concat(t.uri.slice(t.base.length)):"?".concat(t.uri)}}])}(Dt),rr=function(n){return n.collections="COLLECTIONS",n.defaultGraphType="DEFAULT_GRAPH_TYPE",n.equalsMethod="EQUALS_METHOD",n.id="ID",n.identity="IDENTITY",n.reversibleId="REVERSIBLE_ID",n.variableType="VARIABLE_TYPE",n}({}),nu=new bs,vr={supports:Se(Se(Se(Se(Se(Se(Se({},rr.collections,!1),rr.defaultGraphType,!1),rr.equalsMethod,!0),rr.identity,!1),rr.id,!0),rr.reversibleId,!1),rr.variableType,!0),blankNode:function(r){return new Or(r)},defaultGraph:function(){return nu},equals:function(r,e){return r===e||!r||!e?!0:Ln(r)||Ln(e)?Ln(r)&&Ln(e)?this.equals(r.subject,e.subject)&&this.equals(r.predicate,e.predicate)&&this.equals(r.object,e.object)&&this.equals(r.graph,e.graph):!1:Gr(r)&&Gr(e)?this.id(r)===this.id(e):!1},id:function(r){if(!r)return"undefined";if(Ln(r))return this.quadToNQ(r);switch(r.termType){case kn:return"defaultGraph";case sn:return En.toString(r);default:var e=this.termToNQ(r);if(e)return e;throw new Error("Can't id term with type '".concat(r.termType,"'"))}},isQuad:function(r){return r instanceof bn},literal:function(r,e){if(typeof r!="string"&&!e)return Fr.fromValue(r);var t=typeof r=="string"?r:""+r;return typeof e=="string"?e.indexOf(":")===-1?new Fr(t,e):new Fr(t,null,this.namedNode(e)):new Fr(t,null,e)},namedNode:function(r){return new Gt(r)},quad:function(r,e,t,i){return new bn(r,e,t,i||nu)},triple:function(r,e,t,i){return this.quad(r,e,t,i)},quadToNQ:function(r){return"".concat(this.termToNQ(r.subject)," ").concat(this.termToNQ(r.predicate)," ").concat(this.termToNQ(r.object)," ").concat(this.termToNQ(r.graph)," .")},termToNQ:function(r){var e=this;switch(r.termType){case Tn:return"_:"+r.value;case kn:return"";case zc:return"<http://www.w3.org/1999/02/22-rdf-syntax-ns#nil>";case Wn:return Fr.toNT(r);case wi:case An:return"<"+r.value+">";case an:return"("+r.elements.map(function(t){return e.termToNQ(t)}).join(" ")+")";default:throw new Error("Can't serialize nonstandard term type (was '".concat(r.termType,"')"))}},toNQ:function(r){return this.isQuad(r)?this.quadToNQ(r):this.termToNQ(r)},variable:function(r){return new En(r)}},Nr={debug:function(r){},warn:function(r){},info:function(r){},error:function(r){},success:function(r){},msg:function(r){}};function Zt(n,r){var e=r||{namedNode:function(i){return new Gt(i)}};return function(t){return e.namedNode(n+(t||""))}}var un={},Zr={};function E0(n,r,e){if(e===void 0&&(e=Array.prototype),n&&typeof e.find=="function")return e.find.call(n,r);for(var t=0;t<n.length;t++)if(Object.prototype.hasOwnProperty.call(n,t)){var i=n[t];if(r.call(void 0,i,t,n))return i}}function ws(n,r){return r===void 0&&(r=Object),r&&typeof r.freeze=="function"?r.freeze(n):n}function D0(n,r){if(n===null||typeof n!="object")throw new TypeError("target is not an object");for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e]);return n}var rd=ws({HTML:"text/html",isHTML:function(n){return n===rd.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),nd=ws({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(n){return n===nd.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Zr.assign=D0;Zr.find=E0;Zr.freeze=ws;Zr.MIME_TYPE=rd;Zr.NAMESPACE=nd;var id=Zr,Lr=id.find,pi=id.NAMESPACE;function A0(n){return n!==""}function T0(n){return n?n.split(/[\t\n\f\r ]+/).filter(A0):[]}function C0(n,r){return n.hasOwnProperty(r)||(n[r]=!0),n}function iu(n){if(!n)return[];var r=T0(n);return Object.keys(r.reduce(C0,{}))}function N0(n){return function(r){return n&&n.indexOf(r)!==-1}}function yi(n,r){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(r[e]=n[e])}function ar(n,r){var e=n.prototype;if(!(e instanceof r)){let t=function(){};t.prototype=r.prototype,t=new t,yi(e,t),n.prototype=e=t}e.constructor!=n&&(typeof n!="function"&&console.error("unknown Class:"+n),e.constructor=n)}var ur={},br=ur.ELEMENT_NODE=1,Hn=ur.ATTRIBUTE_NODE=2,sl=ur.TEXT_NODE=3,ld=ur.CDATA_SECTION_NODE=4,sd=ur.ENTITY_REFERENCE_NODE=5,I0=ur.ENTITY_NODE=6,ad=ur.PROCESSING_INSTRUCTION_NODE=7,ud=ur.COMMENT_NODE=8,od=ur.DOCUMENT_NODE=9,fd=ur.DOCUMENT_TYPE_NODE=10,Wr=ur.DOCUMENT_FRAGMENT_NODE=11,F0=ur.NOTATION_NODE=12,Yt={},Xt={};Yt.INDEX_SIZE_ERR=(Xt[1]="Index size error",1);Yt.DOMSTRING_SIZE_ERR=(Xt[2]="DOMString size error",2);var nr=Yt.HIERARCHY_REQUEST_ERR=(Xt[3]="Hierarchy request error",3);Yt.WRONG_DOCUMENT_ERR=(Xt[4]="Wrong document",4);Yt.INVALID_CHARACTER_ERR=(Xt[5]="Invalid character",5);Yt.NO_DATA_ALLOWED_ERR=(Xt[6]="No data allowed",6);Yt.NO_MODIFICATION_ALLOWED_ERR=(Xt[7]="No modification allowed",7);var cd=Yt.NOT_FOUND_ERR=(Xt[8]="Not found",8);Yt.NOT_SUPPORTED_ERR=(Xt[9]="Not supported",9);var lu=Yt.INUSE_ATTRIBUTE_ERR=(Xt[10]="Attribute in use",10);Yt.INVALID_STATE_ERR=(Xt[11]="Invalid state",11);Yt.SYNTAX_ERR=(Xt[12]="Syntax error",12);Yt.INVALID_MODIFICATION_ERR=(Xt[13]="Invalid modification",13);Yt.NAMESPACE_ERR=(Xt[14]="Invalid namespace",14);Yt.INVALID_ACCESS_ERR=(Xt[15]="Invalid access",15);function Ut(n,r){if(r instanceof Error)var e=r;else e=this,Error.call(this,Xt[n]),this.message=Xt[n],Error.captureStackTrace&&Error.captureStackTrace(this,Ut);return e.code=n,r&&(this.message=this.message+": "+r),e}Ut.prototype=Error.prototype;yi(Yt,Ut);function xr(){}xr.prototype={length:0,item:function(n){return n>=0&&n<this.length?this[n]:null},toString:function(n,r){for(var e=[],t=0;t<this.length;t++)Mn(this[t],e,n,r);return e.join("")},filter:function(n){return Array.prototype.filter.call(this,n)},indexOf:function(n){return Array.prototype.indexOf.call(this,n)}};function zn(n,r){this._node=n,this._refresh=r,ys(this)}function ys(n){var r=n._node._inc||n._node.ownerDocument._inc;if(n._inc!==r){var e=n._refresh(n._node);if(Ed(n,"length",e.length),!n.$$length||e.length<n.$$length)for(var t=e.length;t in n;t++)Object.prototype.hasOwnProperty.call(n,t)&&delete n[t];yi(e,n),n._inc=r}}zn.prototype.item=function(n){return ys(this),this[n]||null};ar(zn,xr);function al(){}function dd(n,r){for(var e=n.length;e--;)if(n[e]===r)return e}function su(n,r,e,t){if(t?r[dd(r,t)]=e:r[r.length++]=e,n){e.ownerElement=n;var i=n.ownerDocument;i&&(t&&pd(i,n,t),R0(i,n,e))}}function au(n,r,e){var t=dd(r,e);if(t>=0){for(var i=r.length-1;t<i;)r[t]=r[++t];if(r.length=i,n){var s=n.ownerDocument;s&&(pd(s,n,e),e.ownerElement=null)}}else throw new Ut(cd,new Error(n.tagName+"@"+e))}al.prototype={length:0,item:xr.prototype.item,getNamedItem:function(n){for(var r=this.length;r--;){var e=this[r];if(e.nodeName==n)return e}},setNamedItem:function(n){var r=n.ownerElement;if(r&&r!=this._ownerElement)throw new Ut(lu);var e=this.getNamedItem(n.nodeName);return su(this._ownerElement,this,n,e),e},setNamedItemNS:function(n){var r=n.ownerElement,e;if(r&&r!=this._ownerElement)throw new Ut(lu);return e=this.getNamedItemNS(n.namespaceURI,n.localName),su(this._ownerElement,this,n,e),e},removeNamedItem:function(n){var r=this.getNamedItem(n);return au(this._ownerElement,this,r),r},removeNamedItemNS:function(n,r){var e=this.getNamedItemNS(n,r);return au(this._ownerElement,this,e),e},getNamedItemNS:function(n,r){for(var e=this.length;e--;){var t=this[e];if(t.localName==r&&t.namespaceURI==n)return t}return null}};function hd(){}hd.prototype={hasFeature:function(n,r){return!0},createDocument:function(n,r,e){var t=new ki;if(t.implementation=this,t.childNodes=new xr,t.doctype=e||null,e&&t.appendChild(e),r){var i=t.createElementNS(n,r);t.appendChild(i)}return t},createDocumentType:function(n,r,e){var t=new gl;return t.name=n,t.nodeName=n,t.publicId=r||"",t.systemId=e||"",t}};function wt(){}wt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(n,r){return ul(this,n,r)},replaceChild:function(n,r){ul(this,n,r,md),r&&this.removeChild(r)},removeChild:function(n){return gd(this,n)},appendChild:function(n){return this.insertBefore(n,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(n){return ls(this.ownerDocument||this,this,n)},normalize:function(){for(var n=this.firstChild;n;){var r=n.nextSibling;r&&r.nodeType==sl&&n.nodeType==sl?(this.removeChild(r),n.appendData(r.data)):(n.normalize(),n=r)}},isSupported:function(n,r){return this.ownerDocument.implementation.hasFeature(n,r)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(n){for(var r=this;r;){var e=r._nsMap;if(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]===n)return t}r=r.nodeType==Hn?r.ownerDocument:r.parentNode}return null},lookupNamespaceURI:function(n){for(var r=this;r;){var e=r._nsMap;if(e&&Object.prototype.hasOwnProperty.call(e,n))return e[n];r=r.nodeType==Hn?r.ownerDocument:r.parentNode}return null},isDefaultNamespace:function(n){var r=this.lookupPrefix(n);return r==null}};function _d(n){return n=="<"&&"&lt;"||n==">"&&"&gt;"||n=="&"&&"&amp;"||n=='"'&&"&quot;"||"&#"+n.charCodeAt()+";"}yi(ur,wt);yi(ur,wt.prototype);function gi(n,r){if(r(n))return!0;if(n=n.firstChild)do if(gi(n,r))return!0;while(n=n.nextSibling)}function ki(){this.ownerDocument=this}function R0(n,r,e){n&&n._inc++;var t=e.namespaceURI;t===pi.XMLNS&&(r._nsMap[e.prefix?e.localName:""]=e.value)}function pd(n,r,e,t){n&&n._inc++;var i=e.namespaceURI;i===pi.XMLNS&&delete r._nsMap[e.prefix?e.localName:""]}function ks(n,r,e){if(n&&n._inc){n._inc++;var t=r.childNodes;if(e)t[t.length++]=e;else{for(var i=r.firstChild,s=0;i;)t[s++]=i,i=i.nextSibling;t.length=s,delete t[t.length]}}}function gd(n,r){var e=r.previousSibling,t=r.nextSibling;return e?e.nextSibling=t:n.firstChild=t,t?t.previousSibling=e:n.lastChild=e,r.parentNode=null,r.previousSibling=null,r.nextSibling=null,ks(n.ownerDocument,n),r}function S0(n){return n&&(n.nodeType===wt.DOCUMENT_NODE||n.nodeType===wt.DOCUMENT_FRAGMENT_NODE||n.nodeType===wt.ELEMENT_NODE)}function B0(n){return n&&(Ur(n)||Es(n)||Qr(n)||n.nodeType===wt.DOCUMENT_FRAGMENT_NODE||n.nodeType===wt.COMMENT_NODE||n.nodeType===wt.PROCESSING_INSTRUCTION_NODE)}function Qr(n){return n&&n.nodeType===wt.DOCUMENT_TYPE_NODE}function Ur(n){return n&&n.nodeType===wt.ELEMENT_NODE}function Es(n){return n&&n.nodeType===wt.TEXT_NODE}function uu(n,r){var e=n.childNodes||[];if(Lr(e,Ur)||Qr(r))return!1;var t=Lr(e,Qr);return!(r&&t&&e.indexOf(t)>e.indexOf(r))}function ou(n,r){var e=n.childNodes||[];function t(s){return Ur(s)&&s!==r}if(Lr(e,t))return!1;var i=Lr(e,Qr);return!(r&&i&&e.indexOf(i)>e.indexOf(r))}function O0(n,r,e){if(!S0(n))throw new Ut(nr,"Unexpected parent node type "+n.nodeType);if(e&&e.parentNode!==n)throw new Ut(cd,"child not in parent");if(!B0(r)||Qr(r)&&n.nodeType!==wt.DOCUMENT_NODE)throw new Ut(nr,"Unexpected node type "+r.nodeType+" for parent node type "+n.nodeType)}function L0(n,r,e){var t=n.childNodes||[],i=r.childNodes||[];if(r.nodeType===wt.DOCUMENT_FRAGMENT_NODE){var s=i.filter(Ur);if(s.length>1||Lr(i,Es))throw new Ut(nr,"More than one element or text in fragment");if(s.length===1&&!uu(n,e))throw new Ut(nr,"Element in fragment can not be inserted before doctype")}if(Ur(r)&&!uu(n,e))throw new Ut(nr,"Only one element can be added and only after doctype");if(Qr(r)){if(Lr(t,Qr))throw new Ut(nr,"Only one doctype is allowed");var l=Lr(t,Ur);if(e&&t.indexOf(l)<t.indexOf(e))throw new Ut(nr,"Doctype can only be inserted before an element");if(!e&&l)throw new Ut(nr,"Doctype can not be appended since element is present")}}function md(n,r,e){var t=n.childNodes||[],i=r.childNodes||[];if(r.nodeType===wt.DOCUMENT_FRAGMENT_NODE){var s=i.filter(Ur);if(s.length>1||Lr(i,Es))throw new Ut(nr,"More than one element or text in fragment");if(s.length===1&&!ou(n,e))throw new Ut(nr,"Element in fragment can not be inserted before doctype")}if(Ur(r)&&!ou(n,e))throw new Ut(nr,"Only one element can be added and only after doctype");if(Qr(r)){if(Lr(t,function(u){return Qr(u)&&u!==e}))throw new Ut(nr,"Only one doctype is allowed");var l=Lr(t,Ur);if(e&&t.indexOf(l)<t.indexOf(e))throw new Ut(nr,"Doctype can only be inserted before an element")}}function ul(n,r,e,t){O0(n,r,e),n.nodeType===wt.DOCUMENT_NODE&&(t||L0)(n,r,e);var i=r.parentNode;if(i&&i.removeChild(r),r.nodeType===Wr){var s=r.firstChild;if(s==null)return r;var l=r.lastChild}else s=l=r;var a=e?e.previousSibling:n.lastChild;s.previousSibling=a,l.nextSibling=e,a?a.nextSibling=s:n.firstChild=s,e==null?n.lastChild=l:e.previousSibling=l;do s.parentNode=n;while(s!==l&&(s=s.nextSibling));return ks(n.ownerDocument||n,n),r.nodeType==Wr&&(r.firstChild=r.lastChild=null),r}function U0(n,r){return r.parentNode&&r.parentNode.removeChild(r),r.parentNode=n,r.previousSibling=n.lastChild,r.nextSibling=null,r.previousSibling?r.previousSibling.nextSibling=r:n.firstChild=r,n.lastChild=r,ks(n.ownerDocument,n,r),r}ki.prototype={nodeName:"#document",nodeType:od,doctype:null,documentElement:null,_inc:1,insertBefore:function(n,r){if(n.nodeType==Wr){for(var e=n.firstChild;e;){var t=e.nextSibling;this.insertBefore(e,r),e=t}return n}return ul(this,n,r),n.ownerDocument=this,this.documentElement===null&&n.nodeType===br&&(this.documentElement=n),n},removeChild:function(n){return this.documentElement==n&&(this.documentElement=null),gd(this,n)},replaceChild:function(n,r){ul(this,n,r,md),n.ownerDocument=this,r&&this.removeChild(r),Ur(n)&&(this.documentElement=n)},importNode:function(n,r){return kd(this,n,r)},getElementById:function(n){var r=null;return gi(this.documentElement,function(e){if(e.nodeType==br&&e.getAttribute("id")==n)return r=e,!0}),r},getElementsByClassName:function(n){var r=iu(n);return new zn(this,function(e){var t=[];return r.length>0&&gi(e.documentElement,function(i){if(i!==e&&i.nodeType===br){var s=i.getAttribute("class");if(s){var l=n===s;if(!l){var a=iu(s);l=r.every(N0(a))}l&&t.push(i)}}}),t})},createElement:function(n){var r=new Dn;r.ownerDocument=this,r.nodeName=n,r.tagName=n,r.localName=n,r.childNodes=new xr;var e=r.attributes=new al;return e._ownerElement=r,r},createDocumentFragment:function(){var n=new ml;return n.ownerDocument=this,n.childNodes=new xr,n},createTextNode:function(n){var r=new Ds;return r.ownerDocument=this,r.appendData(n),r},createComment:function(n){var r=new As;return r.ownerDocument=this,r.appendData(n),r},createCDATASection:function(n){var r=new Ts;return r.ownerDocument=this,r.appendData(n),r},createProcessingInstruction:function(n,r){var e=new Ns;return e.ownerDocument=this,e.tagName=e.nodeName=e.target=n,e.nodeValue=e.data=r,e},createAttribute:function(n){var r=new ol;return r.ownerDocument=this,r.name=n,r.nodeName=n,r.localName=n,r.specified=!0,r},createEntityReference:function(n){var r=new Cs;return r.ownerDocument=this,r.nodeName=n,r},createElementNS:function(n,r){var e=new Dn,t=r.split(":"),i=e.attributes=new al;return e.childNodes=new xr,e.ownerDocument=this,e.nodeName=r,e.tagName=r,e.namespaceURI=n,t.length==2?(e.prefix=t[0],e.localName=t[1]):e.localName=r,i._ownerElement=e,e},createAttributeNS:function(n,r){var e=new ol,t=r.split(":");return e.ownerDocument=this,e.nodeName=r,e.name=r,e.namespaceURI=n,e.specified=!0,t.length==2?(e.prefix=t[0],e.localName=t[1]):e.localName=r,e}};ar(ki,wt);function Dn(){this._nsMap={}}Dn.prototype={nodeType:br,hasAttribute:function(n){return this.getAttributeNode(n)!=null},getAttribute:function(n){var r=this.getAttributeNode(n);return r&&r.value||""},getAttributeNode:function(n){return this.attributes.getNamedItem(n)},setAttribute:function(n,r){var e=this.ownerDocument.createAttribute(n);e.value=e.nodeValue=""+r,this.setAttributeNode(e)},removeAttribute:function(n){var r=this.getAttributeNode(n);r&&this.removeAttributeNode(r)},appendChild:function(n){return n.nodeType===Wr?this.insertBefore(n,null):U0(this,n)},setAttributeNode:function(n){return this.attributes.setNamedItem(n)},setAttributeNodeNS:function(n){return this.attributes.setNamedItemNS(n)},removeAttributeNode:function(n){return this.attributes.removeNamedItem(n.nodeName)},removeAttributeNS:function(n,r){var e=this.getAttributeNodeNS(n,r);e&&this.removeAttributeNode(e)},hasAttributeNS:function(n,r){return this.getAttributeNodeNS(n,r)!=null},getAttributeNS:function(n,r){var e=this.getAttributeNodeNS(n,r);return e&&e.value||""},setAttributeNS:function(n,r,e){var t=this.ownerDocument.createAttributeNS(n,r);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},getAttributeNodeNS:function(n,r){return this.attributes.getNamedItemNS(n,r)},getElementsByTagName:function(n){return new zn(this,function(r){var e=[];return gi(r,function(t){t!==r&&t.nodeType==br&&(n==="*"||t.tagName==n)&&e.push(t)}),e})},getElementsByTagNameNS:function(n,r){return new zn(this,function(e){var t=[];return gi(e,function(i){i!==e&&i.nodeType===br&&(n==="*"||i.namespaceURI===n)&&(r==="*"||i.localName==r)&&t.push(i)}),t})}};ki.prototype.getElementsByTagName=Dn.prototype.getElementsByTagName;ki.prototype.getElementsByTagNameNS=Dn.prototype.getElementsByTagNameNS;ar(Dn,wt);function ol(){}ol.prototype.nodeType=Hn;ar(ol,wt);function Ei(){}Ei.prototype={data:"",substringData:function(n,r){return this.data.substring(n,n+r)},appendData:function(n){n=this.data+n,this.nodeValue=this.data=n,this.length=n.length},insertData:function(n,r){this.replaceData(n,0,r)},appendChild:function(n){throw new Error(Xt[nr])},deleteData:function(n,r){this.replaceData(n,r,"")},replaceData:function(n,r,e){var t=this.data.substring(0,n),i=this.data.substring(n+r);e=t+e+i,this.nodeValue=this.data=e,this.length=e.length}};ar(Ei,wt);function Ds(){}Ds.prototype={nodeName:"#text",nodeType:sl,splitText:function(n){var r=this.data,e=r.substring(n);r=r.substring(0,n),this.data=this.nodeValue=r,this.length=r.length;var t=this.ownerDocument.createTextNode(e);return this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling),t}};ar(Ds,Ei);function As(){}As.prototype={nodeName:"#comment",nodeType:ud};ar(As,Ei);function Ts(){}Ts.prototype={nodeName:"#cdata-section",nodeType:ld};ar(Ts,Ei);function gl(){}gl.prototype.nodeType=fd;ar(gl,wt);function vd(){}vd.prototype.nodeType=F0;ar(vd,wt);function bd(){}bd.prototype.nodeType=I0;ar(bd,wt);function Cs(){}Cs.prototype.nodeType=sd;ar(Cs,wt);function ml(){}ml.prototype.nodeName="#document-fragment";ml.prototype.nodeType=Wr;ar(ml,wt);function Ns(){}Ns.prototype.nodeType=ad;ar(Ns,wt);function wd(){}wd.prototype.serializeToString=function(n,r,e){return yd.call(n,r,e)};wt.prototype.toString=yd;function yd(n,r){var e=[],t=this.nodeType==9&&this.documentElement||this,i=t.prefix,s=t.namespaceURI;if(s&&i==null){var i=t.lookupPrefix(s);if(i==null)var l=[{namespace:s,prefix:null}]}return Mn(this,e,n,r,l),e.join("")}function fu(n,r,e){var t=n.prefix||"",i=n.namespaceURI;if(!i||t==="xml"&&i===pi.XML||i===pi.XMLNS)return!1;for(var s=e.length;s--;){var l=e[s];if(l.prefix===t)return l.namespace!==i}return!0}function Ul(n,r,e){n.push(" ",r,'="',e.replace(/[<>&"\t\n\r]/g,_d),'"')}function Mn(n,r,e,t,i){if(i||(i=[]),t)if(n=t(n),n){if(typeof n=="string"){r.push(n);return}}else return;switch(n.nodeType){case br:var s=n.attributes,l=s.length,C=n.firstChild,a=n.tagName;e=pi.isHTML(n.namespaceURI)||e;var u=a;if(!e&&!n.prefix&&n.namespaceURI){for(var o,f=0;f<s.length;f++)if(s.item(f).name==="xmlns"){o=s.item(f).value;break}if(!o)for(var h=i.length-1;h>=0;h--){var d=i[h];if(d.prefix===""&&d.namespace===n.namespaceURI){o=d.namespace;break}}if(o!==n.namespaceURI)for(var h=i.length-1;h>=0;h--){var d=i[h];if(d.namespace===n.namespaceURI){d.prefix&&(u=d.prefix+":"+a);break}}}r.push("<",u);for(var c=0;c<l;c++){var _=s.item(c);_.prefix=="xmlns"?i.push({prefix:_.localName,namespace:_.value}):_.nodeName=="xmlns"&&i.push({prefix:"",namespace:_.value})}for(var c=0;c<l;c++){var _=s.item(c);if(fu(_,e,i)){var w=_.prefix||"",k=_.namespaceURI;Ul(r,w?"xmlns:"+w:"xmlns",k),i.push({prefix:w,namespace:k})}Mn(_,r,e,t,i)}if(a===u&&fu(n,e,i)){var w=n.prefix||"",k=n.namespaceURI;Ul(r,w?"xmlns:"+w:"xmlns",k),i.push({prefix:w,namespace:k})}if(C||e&&!/^(?:meta|link|img|br|hr|input)$/i.test(a)){if(r.push(">"),e&&/^script$/i.test(a))for(;C;)C.data?r.push(C.data):Mn(C,r,e,t,i.slice()),C=C.nextSibling;else for(;C;)Mn(C,r,e,t,i.slice()),C=C.nextSibling;r.push("</",u,">")}else r.push("/>");return;case od:case Wr:for(var C=n.firstChild;C;)Mn(C,r,e,t,i.slice()),C=C.nextSibling;return;case Hn:return Ul(r,n.name,n.value);case sl:return r.push(n.data.replace(/[<&>]/g,_d));case ld:return r.push("<![CDATA[",n.data,"]]>");case ud:return r.push("<!--",n.data,"-->");case fd:var j=n.publicId,S=n.systemId;if(r.push("<!DOCTYPE ",n.name),j)r.push(" PUBLIC ",j),S&&S!="."&&r.push(" ",S),r.push(">");else if(S&&S!=".")r.push(" SYSTEM ",S,">");else{var F=n.internalSubset;F&&r.push(" [",F,"]"),r.push(">")}return;case ad:return r.push("<?",n.target," ",n.data,"?>");case sd:return r.push("&",n.nodeName,";");default:r.push("??",n.nodeName)}}function kd(n,r,e){var t;switch(r.nodeType){case br:t=r.cloneNode(!1),t.ownerDocument=n;case Wr:break;case Hn:e=!0;break}if(t||(t=r.cloneNode(!1)),t.ownerDocument=n,t.parentNode=null,e)for(var i=r.firstChild;i;)t.appendChild(kd(n,i,e)),i=i.nextSibling;return t}function ls(n,r,e){var t=new r.constructor;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var s=r[i];typeof s!="object"&&s!=t[i]&&(t[i]=s)}switch(r.childNodes&&(t.childNodes=new xr),t.ownerDocument=n,t.nodeType){case br:var l=r.attributes,a=t.attributes=new al,u=l.length;a._ownerElement=t;for(var o=0;o<u;o++)t.setAttributeNode(ls(n,l.item(o),!0));break;case Hn:e=!0}if(e)for(var f=r.firstChild;f;)t.appendChild(ls(n,f,e)),f=f.nextSibling;return t}function Ed(n,r,e){n[r]=e}try{if(Object.defineProperty){let n=function(r){switch(r.nodeType){case br:case Wr:var e=[];for(r=r.firstChild;r;)r.nodeType!==7&&r.nodeType!==8&&e.push(n(r)),r=r.nextSibling;return e.join("");default:return r.nodeValue}};Object.defineProperty(zn.prototype,"length",{get:function(){return ys(this),this.$$length}}),Object.defineProperty(wt.prototype,"textContent",{get:function(){return n(this)},set:function(r){switch(this.nodeType){case br:case Wr:for(;this.firstChild;)this.removeChild(this.firstChild);(r||String(r))&&this.appendChild(this.ownerDocument.createTextNode(r));break;default:this.data=r,this.value=r,this.nodeValue=r}}}),Ed=function(r,e,t){r["$$"+e]=t}}}catch{}un.DocumentType=gl;un.DOMException=Ut;un.DOMImplementation=hd;un.Element=Dn;un.Node=wt;un.NodeList=xr;un.XMLSerializer=wd;var vl={},Dd={};(function(n){var r=Zr.freeze;n.XML_ENTITIES=r({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),n.HTML_ENTITIES=r({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),n.entityMap=n.HTML_ENTITIES})(Dd);var Is={},mi=Zr.NAMESPACE,ss=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,cu=new RegExp("[\\-\\.0-9"+ss.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),du=new RegExp("^"+ss.source+cu.source+"*(?::"+ss.source+cu.source+"*)?$"),ti=0,Kr=1,Nn=2,ri=3,In=4,Fn=5,ni=6,Gi=7;function xn(n,r){this.message=n,this.locator=r,Error.captureStackTrace&&Error.captureStackTrace(this,xn)}xn.prototype=new Error;xn.prototype.name=xn.name;function Ad(){}Ad.prototype={parse:function(n,r,e){var t=this.domBuilder;t.startDocument(),Td(r,r={}),P0(n,r,e,t,this.errorHandler),t.endDocument()}};function P0(n,r,e,t,i){function s(L){if(L>65535){L-=65536;var ae=55296+(L>>10),K=56320+(L&1023);return String.fromCharCode(ae,K)}else return String.fromCharCode(L)}function l(L){var ae=L.slice(1,-1);return Object.hasOwnProperty.call(e,ae)?e[ae]:ae.charAt(0)==="#"?s(parseInt(ae.substr(1).replace("x","0x"))):(i.error("entity not found:"+L),L)}function a(L){if(L>w){var ae=n.substring(w,L).replace(/&#?\w+;/g,l);d&&u(w),t.characters(ae,0,L-w),w=L}}function u(L,ae){for(;L>=f&&(ae=h.exec(n));)o=ae.index,f=o+ae[0].length,d.lineNumber++;d.columnNumber=L-o+1}for(var o=0,f=0,h=/.*(?:\r\n?|\n)|.*$/g,d=t.locator,c=[{currentNSMap:r}],_={},w=0;;){try{var k=n.indexOf("<",w);if(k<0){if(!n.substr(w).match(/^\s*$/)){var C=t.doc,j=C.createTextNode(n.substr(w));C.appendChild(j),t.currentElement=j}return}switch(k>w&&a(k),n.charAt(k+1)){case"/":var E=n.indexOf(">",k+3),S=n.substring(k+2,E).replace(/[ \t\n\r]+$/g,""),F=c.pop();E<0?(S=n.substring(k+2).replace(/[\s<].*/,""),i.error("end tag name: "+S+" is not complete:"+F.tagName),E=k+1+S.length):S.match(/\s</)&&(S=S.replace(/[\s<].*/,""),i.error("end tag name: "+S+" maybe not complete"),E=k+1+S.length);var b=F.localNSMap,y=F.tagName==S,v=y||F.tagName&&F.tagName.toLowerCase()==S.toLowerCase();if(v){if(t.endElement(F.uri,F.localName,S),b)for(var B in b)Object.prototype.hasOwnProperty.call(b,B)&&t.endPrefixMapping(B);y||i.fatalError("end tag name: "+S+" is not match the current start tagName:"+F.tagName)}else c.push(F);E++;break;case"?":d&&u(k),E=H0(n,k,t);break;case"!":d&&u(k),E=V0(n,k,t,i);break;default:d&&u(k);var T=new Cd,U=c[c.length-1].currentNSMap,E=M0(n,k,T,U,l,i),P=T.length;if(!T.closed&&j0(n,E,T.tagName,_)&&(T.closed=!0,e.nbsp||i.warning("unclosed xml attribute")),d&&P){for(var O=hu(d,{}),N=0;N<P;N++){var X=T[N];u(X.offset),X.locator=hu(d,{})}t.locator=O,_u(T,t,U)&&c.push(T),t.locator=d}else _u(T,t,U)&&c.push(T);mi.isHTML(T.uri)&&!T.closed?E=q0(n,E,T.tagName,l,t):E++}}catch(L){if(L instanceof xn)throw L;i.error("element parse error: "+L),E=-1}E>w?w=E:a(Math.max(k,w)+1)}}function hu(n,r){return r.lineNumber=n.lineNumber,r.columnNumber=n.columnNumber,r}function M0(n,r,e,t,i,s){function l(d,c,_){e.attributeNames.hasOwnProperty(d)&&s.fatalError("Attribute "+d+" redefined"),e.addValue(d,c.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,i),_)}for(var a,u,o=++r,f=ti;;){var h=n.charAt(o);switch(h){case"=":if(f===Kr)a=n.slice(r,o),f=ri;else if(f===Nn)f=ri;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(f===ri||f===Kr)if(f===Kr&&(s.warning('attribute value must after "="'),a=n.slice(r,o)),r=o+1,o=n.indexOf(h,r),o>0)u=n.slice(r,o),l(a,u,r-1),f=Fn;else throw new Error("attribute value no end '"+h+"' match");else if(f==In)u=n.slice(r,o),l(a,u,r),s.warning('attribute "'+a+'" missed start quot('+h+")!!"),r=o+1,f=Fn;else throw new Error('attribute value must after "="');break;case"/":switch(f){case ti:e.setTagName(n.slice(r,o));case Fn:case ni:case Gi:f=Gi,e.closed=!0;case In:case Kr:break;case Nn:e.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),f==ti&&e.setTagName(n.slice(r,o)),o;case">":switch(f){case ti:e.setTagName(n.slice(r,o));case Fn:case ni:case Gi:break;case In:case Kr:u=n.slice(r,o),u.slice(-1)==="/"&&(e.closed=!0,u=u.slice(0,-1));case Nn:f===Nn&&(u=a),f==In?(s.warning('attribute "'+u+'" missed quot(")!'),l(a,u,r)):((!mi.isHTML(t[""])||!u.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+u+'" missed value!! "'+u+'" instead!!'),l(u,u,r));break;case ri:throw new Error("attribute value missed!!")}return o;case"":h=" ";default:if(h<=" ")switch(f){case ti:e.setTagName(n.slice(r,o)),f=ni;break;case Kr:a=n.slice(r,o),f=Nn;break;case In:var u=n.slice(r,o);s.warning('attribute "'+u+'" missed quot(")!!'),l(a,u,r);case Fn:f=ni;break}else switch(f){case Nn:e.tagName,(!mi.isHTML(t[""])||!a.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),l(a,a,r),r=o,f=Kr;break;case Fn:s.warning('attribute space is required"'+a+'"!!');case ni:f=Kr,r=o;break;case ri:f=In,r=o;break;case Gi:throw new Error("elements closed character '/' and '>' must be connected to")}}o++}}function _u(n,r,e){for(var t=n.tagName,i=null,h=n.length;h--;){var s=n[h],l=s.qName,a=s.value,d=l.indexOf(":");if(d>0)var u=s.prefix=l.slice(0,d),o=l.slice(d+1),f=u==="xmlns"&&o;else o=l,u=null,f=l==="xmlns"&&"";s.localName=o,f!==!1&&(i==null&&(i={},Td(e,e={})),e[f]=i[f]=a,s.uri=mi.XMLNS,r.startPrefixMapping(f,a))}for(var h=n.length;h--;){s=n[h];var u=s.prefix;u&&(u==="xml"&&(s.uri=mi.XML),u!=="xmlns"&&(s.uri=e[u||""]))}var d=t.indexOf(":");d>0?(u=n.prefix=t.slice(0,d),o=n.localName=t.slice(d+1)):(u=null,o=n.localName=t);var c=n.uri=e[u||""];if(r.startElement(c,o,t,n),n.closed){if(r.endElement(c,o,t),i)for(u in i)Object.prototype.hasOwnProperty.call(i,u)&&r.endPrefixMapping(u)}else return n.currentNSMap=e,n.localNSMap=i,!0}function q0(n,r,e,t,i){if(/^(?:script|textarea)$/i.test(e)){var s=n.indexOf("</"+e+">",r),l=n.substring(r+1,s);if(/[&<]/.test(l))return/^script$/i.test(e)?(i.characters(l,0,l.length),s):(l=l.replace(/&#?\w+;/g,t),i.characters(l,0,l.length),s)}return r+1}function j0(n,r,e,t){var i=t[e];return i==null&&(i=n.lastIndexOf("</"+e+">"),i<r&&(i=n.lastIndexOf("</"+e)),t[e]=i),i<r}function Td(n,r){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(r[e]=n[e])}function V0(n,r,e,t){var i=n.charAt(r+2);switch(i){case"-":if(n.charAt(r+3)==="-"){var s=n.indexOf("-->",r+4);return s>r?(e.comment(n,r+4,s-r-4),s+3):(t.error("Unclosed comment"),-1)}else return-1;default:if(n.substr(r+3,6)=="CDATA["){var s=n.indexOf("]]>",r+9);return e.startCDATA(),e.characters(n,r+9,s-r-9),e.endCDATA(),s+3}var l=z0(n,r),a=l.length;if(a>1&&/!doctype/i.test(l[0][0])){var u=l[1][0],o=!1,f=!1;a>3&&(/^public$/i.test(l[2][0])?(o=l[3][0],f=a>4&&l[4][0]):/^system$/i.test(l[2][0])&&(f=l[3][0]));var h=l[a-1];return e.startDTD(u,o,f),e.endDTD(),h.index+h[0].length}}return-1}function H0(n,r,e){var t=n.indexOf("?>",r);if(t){var i=n.substring(r,t).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,e.processingInstruction(i[1],i[2]),t+2):-1}return-1}function Cd(){this.attributeNames={}}Cd.prototype={setTagName:function(n){if(!du.test(n))throw new Error("invalid tagName:"+n);this.tagName=n},addValue:function(n,r,e){if(!du.test(n))throw new Error("invalid attribute:"+n);this.attributeNames[n]=this.length,this[this.length++]={qName:n,value:r,offset:e}},length:0,getLocalName:function(n){return this[n].localName},getLocator:function(n){return this[n].locator},getQName:function(n){return this[n].qName},getURI:function(n){return this[n].uri},getValue:function(n){return this[n].value}};function z0(n,r){var e,t=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=r,i.exec(n);e=i.exec(n);)if(t.push(e),e[1])return t}Is.XMLReader=Ad;Is.ParseError=xn;var x0=Zr,X0=un,pu=Dd,Nd=Is,G0=X0.DOMImplementation,gu=x0.NAMESPACE,W0=Nd.ParseError,Q0=Nd.XMLReader;function Id(n){return n.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function Fd(n){this.options=n||{locator:{}}}Fd.prototype.parseFromString=function(n,r){var e=this.options,t=new Q0,i=e.domBuilder||new Di,s=e.errorHandler,l=e.locator,a=e.xmlns||{},u=/\/x?html?$/.test(r),o=u?pu.HTML_ENTITIES:pu.XML_ENTITIES;l&&i.setDocumentLocator(l),t.errorHandler=Y0(s,i,l),t.domBuilder=e.domBuilder||i,u&&(a[""]=gu.HTML),a.xml=a.xml||gu.XML;var f=e.normalizeLineEndings||Id;return n&&typeof n=="string"?t.parse(f(n),a,o):t.errorHandler.error("invalid doc source"),i.doc};function Y0(n,r,e){if(!n){if(r instanceof Di)return r;n=r}var t={},i=n instanceof Function;e=e||{};function s(l){var a=n[l];!a&&i&&(a=n.length==2?function(u){n(l,u)}:n),t[l]=a&&function(u){a("[xmldom "+l+"]	"+u+as(e))}||function(){}}return s("warning"),s("error"),s("fatalError"),t}function Di(){this.cdata=!1}function Rn(n,r){r.lineNumber=n.lineNumber,r.columnNumber=n.columnNumber}Di.prototype={startDocument:function(){this.doc=new G0().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(n,r,e,t){var i=this.doc,s=i.createElementNS(n,e||r),l=t.length;Wi(this,s),this.currentElement=s,this.locator&&Rn(this.locator,s);for(var a=0;a<l;a++){var n=t.getURI(a),u=t.getValue(a),e=t.getQName(a),o=i.createAttributeNS(n,e);this.locator&&Rn(t.getLocator(a),o),o.value=o.nodeValue=u,s.setAttributeNode(o)}},endElement:function(n,r,e){var t=this.currentElement;t.tagName,this.currentElement=t.parentNode},startPrefixMapping:function(n,r){},endPrefixMapping:function(n){},processingInstruction:function(n,r){var e=this.doc.createProcessingInstruction(n,r);this.locator&&Rn(this.locator,e),Wi(this,e)},ignorableWhitespace:function(n,r,e){},characters:function(n,r,e){if(n=mu.apply(this,arguments),n){if(this.cdata)var t=this.doc.createCDATASection(n);else var t=this.doc.createTextNode(n);this.currentElement?this.currentElement.appendChild(t):/^\s*$/.test(n)&&this.doc.appendChild(t),this.locator&&Rn(this.locator,t)}},skippedEntity:function(n){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(n){(this.locator=n)&&(n.lineNumber=0)},comment:function(n,r,e){n=mu.apply(this,arguments);var t=this.doc.createComment(n);this.locator&&Rn(this.locator,t),Wi(this,t)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(n,r,e){var t=this.doc.implementation;if(t&&t.createDocumentType){var i=t.createDocumentType(n,r,e);this.locator&&Rn(this.locator,i),Wi(this,i),this.doc.doctype=i}},warning:function(n){console.warn("[xmldom warning]	"+n,as(this.locator))},error:function(n){console.error("[xmldom error]	"+n,as(this.locator))},fatalError:function(n){throw new W0(n,this.locator)}};function as(n){if(n)return`
@`+(n.systemId||"")+"#[line:"+n.lineNumber+",col:"+n.columnNumber+"]"}function mu(n,r,e){return typeof n=="string"?n.substr(r,e):n.length>=r+e||r?new java.lang.String(n,r,e)+"":n}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(n){Di.prototype[n]=function(){return null}});function Wi(n,r){n.currentElement?n.currentElement.appendChild(r):n.doc.appendChild(r)}vl.__DOMHandler=Di;vl.normalizeLineEndings=Id;vl.DOMParser=Fd;var vu=vl.DOMParser;function J0(n){return n=n.split(";")[0].trim(),new Gt("http://www.w3.org/ns/iana/media-types/"+n+"#Resource")}function Z0(n,r){n.callbacks={};for(var e=r.length-1;e>=0;e--)n.callbacks[r[e]]=[];n.addHook=function(t){n.callbacks[t]||(n.callbacks[t]=[])},n.addCallback=function(t,i){n.callbacks[t].push(i)},n.removeCallback=function(t,i){for(var s=0;s<n.callbacks[t].length;s++)if(n.callbacks[t][s].name===i)return n.callbacks[t].splice(s,1),!0;return!1},n.insertCallback=function(t,i){n.callbacks[t].unshift(i)},n.fireCallbacks=function(i,s){var l=[],a=[],u=n.callbacks[i].length,o,f;for(o=u-1;o>=0;o--)f=n.callbacks[i][o],f&&f.apply(n,s)&&l.push(f);for(o=l.length-1;o>=0;o--)a.push(l[o]);for(o=u;o<n.callbacks[i].length;o++)a.push(n.callbacks[i][o]);n.callbacks[i]=a}}function K0(n,r){r=r||{};var e=[];r&&r.selfClosing&&r.selfClosing.split(" ").forEach(function(i){e[i]=!0});var t=[];return r&&r.skipAttributes&&r.skipAttributes.split(" ").forEach(function(i){t[i]=!0}),Rd(n,r,e,t)}function Rd(n,r,e,t){var i,s="",l=[!1];if(typeof n.nodeType>"u")return s;if(n.nodeType===1){if(n.hasAttribute("class")&&r&&r.classWithChildText&&n.matches(r.classWithChildText.class))s+=n.querySelector(r.classWithChildText.element).textContent;else if(!(r&&r.skipNodeWithClass&&n.matches("."+r.skipNodeWithClass))){var a=n.nodeName.toLowerCase();s+="<"+a;var u=[];for(i=n.attributes.length-1;i>=0;i--){var o=n.attributes[i];if(!(t&&t.length>0&&t[o.name])&&!/^\d+$/.test(o.name)){if(o.name==="class"&&r&&r.replaceClassItemWith&&o.value.split(" ").indexOf(r.replaceClassItemWith.source)>-1){var f=new RegExp(r.replaceClassItemWith.source,"g");o.value=o.value.replace(f,r.replaceClassItemWith.target).trim()}o.name==="class"&&r&&r.skipClassWithValue&&r.skipClassWithValue===o.value||u.push(o.name+"='"+o.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;")+"'")}}if(u.length>0&&(r&&r.sortAttributes&&u.sort(function(d,c){return d.toLowerCase().localeCompare(c.toLowerCase())}),s+=" "+u.join(" ")),e&&e.ename)s+=" />";else{for(s+=">",s+=a==="html"?`
  `:"",l.push(a==="style"||a==="script"),i=0;i<n.childNodes.length;i++)s+=Rd(n.childNodes[i]);l.pop(),s+=a==="body"?"</"+a+`>
`:"</"+a+">"}}}else if(n.nodeType===8)s+="<!--"+n.nodeValue+"-->";else if(n.nodeType===3||n.nodeType===4){var h=n.nodeValue.replace(/\n+$/,"");s+=l[l.length-1]?h:h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}else console.log("Warning; Cannot handle serialising nodes of type: "+n.nodeType),console.log(n);return s}function Pl(n,r,e,t){var i=function(u){return u.termType==="BlankNode"?null:u},s=function(u){var o=e.statementsMatching(u).map(function(f){return""+i(f.subject)+" "+i(f.predicate)+" "+i(f.object)}).concat(e.statementsMatching(void 0,void 0,u).map(function(f){return""+i(f.subject)+" "+i(f.predicate)+" "+i(f.object)}));return o.sort(),o.join(`
`)},l=Object.prototype.hasOwnProperty.call(e,"compareTerms")?e.compareTerms(n,r):n.compareTerm(r);return n.termType==="BlankNode"&&r.termType==="BlankNode"?l===0?0:s(n)>s(r)?1:s(n)<s(r)?-1:l:t&&n.uri&&r.uri?(t[n.uri]||n.uri).localeCompare(t[r.uri]||r.uri):l}function $0(n,r,e,t){return Pl(n.subject,r.subject,e,t)||Pl(n.predicate,r.predicate,e,t)||Pl(n.object,r.object,e,t)}function qn(n,r){var e;if(r=r||{},typeof module<"u"&&module&&module.exports){var t=new vu().parseFromString(n,r.contentType||"application/xhtml+xml");return t}else typeof window<"u"&&window.DOMParser?e=new window.DOMParser:e=new vu;return e.parseFromString(n,"application/xml")}function e1(n,r){for(var e=0;e<n.length;e++)if(n[e].subject.equals(r.subject)&&n[e].predicate.equals(r.predicate)&&n[e].object.equals(r.object)&&n[e].why.equals(r.why)){n.splice(e,1);return}throw new Error("RDFArrayRemove: Array did not contain "+r+" "+r.why)}function Sd(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:vr;return{boolean:n.namedNode("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:n.namedNode("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:n.namedNode("http://www.w3.org/2001/XMLSchema#decimal"),double:n.namedNode("http://www.w3.org/2001/XMLSchema#double"),integer:n.namedNode("http://www.w3.org/2001/XMLSchema#integer"),langString:n.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:n.namedNode("http://www.w3.org/2001/XMLSchema#string")}}Sd(vr);const bu={acl:"http://www.w3.org/ns/auth/acl#",arg:"http://www.w3.org/ns/pim/arg#",as:"https://www.w3.org/ns/activitystreams#",cal:"http://www.w3.org/2002/12/cal/ical#",cert:"http://www.w3.org/ns/auth/cert#",contact:"http://www.w3.org/2000/10/swap/pim/contact#",dc:"http://purl.org/dc/elements/1.1/",dct:"http://purl.org/dc/terms/",doap:"http://usefulinc.com/ns/doap#",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",gpx:"http://www.w3.org/ns/pim/gpx#",http:"http://www.w3.org/2007/ont/http#",httph:"http://www.w3.org/2007/ont/httph#",icalTZ:"http://www.w3.org/2002/12/cal/icaltzd#",ldp:"http://www.w3.org/ns/ldp#",link:"http://www.w3.org/2007/ont/link#",log:"http://www.w3.org/2000/10/swap/log#",meeting:"http://www.w3.org/ns/pim/meeting#",mo:"http://purl.org/ontology/mo/",org:"http://www.w3.org/ns/org#",owl:"http://www.w3.org/2002/07/owl#",pad:"http://www.w3.org/ns/pim/pad#",patch:"http://www.w3.org/ns/pim/patch#",prov:"http://www.w3.org/ns/prov#",qu:"http://www.w3.org/2000/10/swap/pim/qif#",trip:"http://www.w3.org/ns/pim/trip#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rss:"http://purl.org/rss/1.0/",sched:"http://www.w3.org/ns/pim/schedule#",schema:"http://schema.org/",sioc:"http://rdfs.org/sioc/ns#",solid:"http://www.w3.org/ns/solid/terms#",space:"http://www.w3.org/ns/pim/space#",stat:"http://www.w3.org/ns/posix/stat#",tab:"http://www.w3.org/2007/ont/link#",tabont:"http://www.w3.org/2007/ont/link#",ui:"http://www.w3.org/ns/ui#",vcard:"http://www.w3.org/2006/vcard/ns#",wf:"http://www.w3.org/2005/01/wf/flow#",xsd:"http://www.w3.org/2001/XMLSchema#",cco:"http://www.ontologyrepository.com/CommonCoreOntologies/",skos:"http://www.w3.org/2004/02/skos/core#",bookmark:"http://www.w3.org/2002/01/bookmark#",vann:"http://purl.org/vocab/vann/"};function t1(n={namedNode:r=>r}){const r={};for(const e in bu){const t=bu[e];r[e]=function(i=""){return n.namedNode(t+i)}}return r}var r1=t1;const wu=pl(r1);var Bd={exports:{}};(function(n){(function(r,e){n.exports?n.exports=e():r.ttl2jsonld=e()})(ps,function(){function r(i,s){function l(){this.constructor=i}l.prototype=s.prototype,i.prototype=new l}function e(i,s,l,a){this.message=i,this.expected=s,this.found=l,this.location=a,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,e)}r(e,Error),e.buildMessage=function(i,s){var l={literal:function(c){return'"'+u(c.text)+'"'},class:function(c){var _="",w;for(w=0;w<c.parts.length;w++)_+=c.parts[w]instanceof Array?o(c.parts[w][0])+"-"+o(c.parts[w][1]):o(c.parts[w]);return"["+(c.inverted?"^":"")+_+"]"},any:function(c){return"any character"},end:function(c){return"end of input"},other:function(c){return c.description}};function a(c){return c.charCodeAt(0).toString(16).toUpperCase()}function u(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+a(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+a(_)})}function o(c){return c.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+a(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+a(_)})}function f(c){return l[c.type](c)}function h(c){var _=new Array(c.length),w,k;for(w=0;w<c.length;w++)_[w]=f(c[w]);if(_.sort(),_.length>0){for(w=1,k=1;w<_.length;w++)_[w-1]!==_[w]&&(_[k]=_[w],k++);_.length=k}switch(_.length){case 1:return _[0];case 2:return _[0]+" or "+_[1];default:return _.slice(0,-1).join(", ")+", or "+_[_.length-1]}}function d(c){return c?'"'+u(c)+'"':"end of input"}return"Expected "+h(i)+" but "+d(s)+" found."};function t(i,s){s=s!==void 0?s:{};var l={},a={turtleDoc:_a},u=_a,o=function(p){var R=vt.toJSON();return R["@graph"]=[],p.filter(q=>Array.isArray(q)).forEach(q=>{q.forEach(W=>{R["@graph"].push(W)})}),R["@graph"].length===1&&(Object.assign(R,R["@graph"][0]),delete R["@graph"]),R},f=".",h=ot(".",!1),d=function(p){return p},c="#",_=ot("#",!1),w=/^[^\n]/,k=yt([`
`],!0,!1),C=`
`,j=ot(`
`,!1),S=function(p){return p.join("")},F="@prefix",b=ot("@prefix",!1),y=function(p,R){return vt.addPrefix(p===""?"0":p,R),{}},v="@base",B=ot("@base",!1),T=function(p){return vt.addBase(p),{}},U=/^[Bb]/,E=yt(["B","b"],!1,!1),P=/^[Aa]/,O=yt(["A","a"],!1,!1),N=/^[Ss]/,X=yt(["S","s"],!1,!1),L=/^[Ee]/,ae=yt(["E","e"],!1,!1),K=/^[Pp]/,G=yt(["P","p"],!1,!1),$=/^[Rr]/,J=yt(["R","r"],!1,!1),ne=/^[Ff]/,z=yt(["F","f"],!1,!1),ue=/^[Ii]/,Pe=yt(["I","i"],!1,!1),He=/^[Xx]/,be=yt(["X","x"],!1,!1),De=function(p,R){var q={};return typeof p=="string"&&p!=="[]"?q["@id"]=p:typeof p=="object"&&Object.assign(q,p),R&&Object.assign(q,R),[q]},_e=function(p,R){var q={};return p&&Object.assign(q,p),R&&Object.assign(q,R),[q]},Te=";",lt=ot(";",!1),gt=function(p,R,q,W){var te={};return te[q]=W,te},rt=function(p,R,q){return q},Ee=function(p,R,q){var W={};return q.unshift(sp(p,R)),q.forEach(te=>{te&&Object.keys(te).forEach(ce=>{te[ce].forEach(de=>{ce==="@type"&&de["@id"]!==void 0&&(de=de["@id"]),W[ce]===void 0?W[ce]=de:Array.isArray(W[ce])?W[ce].push(de):W[ce]=[W[ce],de]})})}),W},Ue=",",Jt=ot(",",!1),Pt=function(p,R){return R},Wt=function(p,R){return R.unshift(p),R},cr="a",Be=ot("a",!1),Ke=function(){return"@type"},Ge=function(p){return Ol(p,!0)},$e=function(p){return Ol(p,!1)},pt=function(p){return p==="[]"?{}:{"@id":p}},At=function(p){return{"@id":p}},qt="[",x=ot("[",!1),D="]",I=ot("]",!1),Z="(",oe=ot("(",!1),ge=")",ye=ot(")",!1),ke=function(p){return{"@list":p}},qe=function(p,R){return{"@value":p,"@language":R}},Xe="^^",ct=ot("^^",!1),at=function(p,R){if(R==="http://www.w3.org/2001/XMLSchema#boolean"&&p==="true")return!0;if(R==="http://www.w3.org/2001/XMLSchema#boolean"&&p==="false")return!1;if(R==="http://www.w3.org/2001/XMLSchema#integer")return parseInt(p);if(R==="http://www.w3.org/2001/XMLSchema#double")return parseFloat(p);const q=vt.resolve(R,!0);if(q){const W=R.split(":")[0];if(q==="http://www.w3.org/2001/XMLSchema#boolean"&&p==="true")return vt.decrement(W),!0;if(q==="http://www.w3.org/2001/XMLSchema#boolean"&&p==="false")return vt.decrement(W),!1;if(q==="http://www.w3.org/2001/XMLSchema#integer")return vt.decrement(W),parseInt(p);if(q==="http://www.w3.org/2001/XMLSchema#double")return vt.decrement(W),parseFloat(p)}return{"@value":p,"@type":R}},er="true",kr=ot("true",!1),Qt=function(){return!0},Kn="false",_h=ot("false",!1),ph=function(){return!1},gh=function(p){return p+":"},mh="<",vh=ot("<",!1),Ps=/^[^\0- <>"{}|\^`\\]/,Ms=yt([["\0"," "],"<",">",'"',"{","}","|","^","`","\\"],!0,!1),bh=">",wh=ot(">",!1),yh=function(p){const R=p.map(W=>65536<=W.codePointAt(0)&&W.codePointAt(0)<=983039?"a":W.length===1?W:W.length===6?String.fromCharCode("0x"+W.substring(2)):W.length===10?String.fromCodePoint("0x"+W.substring(2)):W).join("");if(R.match(/^[^\u0000-\u0020<>"{}|^`\\]*$/)){var q=p.join("");try{return vt.resolve(q)}catch{Tl("Invalid IRIREF "+q)}}else Tl("Invalid IRIREF "+p.join("")+" / "+R)},Vr=":",Hr=ot(":",!1),kh=function(p){return p=p||"0",vt.hasPrefix(p)===!1&&Tl("undefined prefix "+p),p},Eh=function(p){return p||""},Dh=function(p,R){return vt.increment(p),vt.resolve(p+":"+R)},qs="_:",Ah=ot("_:",!1),jt=/^[0-9]/,Vt=yt([["0","9"]],!1,!1),Th="@",Ch=ot("@",!1),js=/^[a-zA-Z]/,Vs=yt([["a","z"],["A","Z"]],!1,!1),El="-",Dl=ot("-",!1),Fi=/^[a-zA-Z0-9]/,Ri=yt([["a","z"],["A","Z"],["0","9"]],!1,!1),Hs=function(p,R){return"-"+R.join("")},Nh=function(p,R){return p.join("")+R.join("")},Si=/^[+\-]/,Bi=yt(["+","-"],!1,!1),Ih=function(p){return p.match(/^[0+][0-9]+$/)?{"@value":p,"@type":"http://www.w3.org/2001/XMLSchema#integer"}:parseInt(p)},Fh=function(p){return{"@value":p,"@type":"http://www.w3.org/2001/XMLSchema#decimal"}},Rh=function(p){return{"@value":p,"@type":"http://www.w3.org/2001/XMLSchema#double"}},Sh=/^[eE]/,Bh=yt(["e","E"],!1,!1),Oi='"',Li=ot('"',!1),zs=/^[^"\\\n\r]/,xs=yt(['"',"\\",`
`,"\r"],!0,!1),Ui="'",Pi=ot("'",!1),Xs=/^[^'\\\n\r]/,Gs=yt(["'","\\",`
`,"\r"],!0,!1),Mi="'''",Ws=ot("'''",!1),Er=/^[^'\\]/,Dr=yt(["'","\\"],!0,!1),qi="''",Qs=ot("''",!1),Ys=function(p,R){return"''"+R.join("")},Js=function(p,R){return"'"+R.join("")},Zs=function(p,R){return p.join("")+R.join("")},ji='"""',Ks=ot('"""',!1),Ar=/^[^"\\]/,Tr=yt(['"',"\\"],!0,!1),Vi='""',$s=ot('""',!1),ea=function(p,R){return'""'+R.join("")},ta=function(p,R){return'"'+R.join("")},ra="\\U",Oh=ot("\\U",!1),Lh=function(p){return String.fromCodePoint(parseInt(p.join(""),16))},na="\\u",Uh=ot("\\u",!1),Ph=function(p){return String.fromCharCode(parseInt(p.join(""),16))},ia="\\t",Mh=ot("\\t",!1),qh=function(){return"	"},la="\\b",jh=ot("\\b",!1),Vh=function(){return"\b"},sa="\\n",Hh=ot("\\n",!1),zh=function(){return`
`},aa="\\r",xh=ot("\\r",!1),Xh=function(){return"\r"},ua="\\f",Gh=ot("\\f",!1),Wh=function(){return"\f"},oa='\\"',Qh=ot('\\"',!1),Yh=function(){return'"'},fa="\\'",Jh=ot("\\'",!1),Zh=function(){return"'"},ca="\\\\",Kh=ot("\\\\",!1),$h=function(){return"\\"},e_=/^[ \t\r\n]/,t_=yt([" ","	","\r",`
`],!1,!1),r_=function(){return"[]"},n_=/^[\uD800-\uDBFF]/,i_=yt([["\uD800","\uDBFF"]],!1,!1),l_=/^[\uDC00-\uDFFF]/,s_=yt([["\uDC00","\uDFFF"]],!1,!1),a_=function(p,R){return p+R},u_=/^[A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,o_=yt([["A","Z"],["a","z"],["À","Ö"],["Ø","ö"],["ø","˿"],["Ͱ","ͽ"],["Ϳ","῿"],["‌","‍"],["⁰","↏"],["Ⰰ","⿯"],["、","퟿"],["豈","﷏"],["ﷰ","�"]],!1,!1),f_="_",c_=ot("_",!1),d_="·",h_=ot("·",!1),__=/^[\u0300-\u036F]/,p_=yt([["̀","ͯ"]],!1,!1),g_=/^[\u203F-\u2040]/,m_=yt([["‿","⁀"]],!1,!1),da=function(p,R,q,W){return q.join("")+W.join("")},v_=function(p,R,q){return p+R.join("")+q.join("")},b_="%",w_=ot("%",!1),y_=/^[0-9A-Fa-f]/,k_=yt([["0","9"],["A","F"],["a","f"]],!1,!1),E_="\\",D_=ot("\\",!1),A_=/^[_~.!$&'()*+,;=\/?#@%\-]/,T_=yt(["_","~",".","!","$","&","'","(",")","*","+",",",";","=","/","?","#","@","%","-"],!1,!1),g=0,je=0,Hi=[{line:1,column:1}],Cr=0,Al=[],zi;if("startRule"in s){if(!(s.startRule in a))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');u=a[s.startRule]}function Tl(p,R){throw R=R!==void 0?R:Cl(je,g),N_(p,R)}function ot(p,R){return{type:"literal",text:p,ignoreCase:R}}function yt(p,R,q){return{type:"class",parts:p,inverted:R,ignoreCase:q}}function C_(){return{type:"end"}}function ha(p){var R=Hi[p],q;if(R)return R;for(q=p-1;!Hi[q];)q--;for(R=Hi[q],R={line:R.line,column:R.column};q<p;)i.charCodeAt(q)===10?(R.line++,R.column=1):R.column++,q++;return Hi[p]=R,R}function Cl(p,R){var q=ha(p),W=ha(R);return{start:{offset:p,line:q.line,column:q.column},end:{offset:R,line:W.line,column:W.column}}}function ve(p){g<Cr||(g>Cr&&(Cr=g,Al=[]),Al.push(p))}function N_(p,R){return new e(p,null,null,R)}function I_(p,R,q){return new e(e.buildMessage(p,R),p,R,q)}function _a(){var p,R,q,W;for(p=g,R=[],q=pa();q!==l;)R.push(q),q=pa();if(R!==l){for(q=[],W=Ve();W!==l;)q.push(W),W=Ve();q!==l?(je=p,R=o(R),p=R):(g=p,p=l)}else g=p,p=l;return p}function pa(){var p,R,q,W;if(p=R_(),p===l)if(p=g,R=U_(),R!==l){for(q=[],W=Ve();W!==l;)q.push(W),W=Ve();q!==l?(i.charCodeAt(g)===46?(W=f,g++):(W=l,ve(h)),W!==l?(je=p,R=d(R),p=R):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;return p}function F_(){var p,R,q,W;if(p=g,i.charCodeAt(g)===35?(R=c,g++):(R=l,ve(_)),R!==l){for(q=[],w.test(i.charAt(g))?(W=i.charAt(g),g++):(W=l,ve(k));W!==l;)q.push(W),w.test(i.charAt(g))?(W=i.charAt(g),g++):(W=l,ve(k));q!==l?(i.charCodeAt(g)===10?(W=C,g++):(W=l,ve(j)),W!==l?(je=p,R=S(q),p=R):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;return p}function Ve(){var p;return p=ep(),p===l&&(p=F_()),p}function R_(){var p;return p=S_(),p===l&&(p=B_(),p===l&&(p=L_(),p===l&&(p=O_()))),p}function S_(){var p,R,q,W,te,ce,de,re,ze;for(p=g,R=[],q=Ve();q!==l;)R.push(q),q=Ve();if(R!==l)if(i.substr(g,7)===F?(q=F,g+=7):(q=l,ve(b)),q!==l){for(W=[],te=Ve();te!==l;)W.push(te),te=Ve();if(W!==l)if(te=wa(),te!==l){for(ce=[],de=Ve();de!==l;)ce.push(de),de=Ve();if(ce!==l)if(de=ei(),de!==l){for(re=[],ze=Ve();ze!==l;)re.push(ze),ze=Ve();re!==l?(i.charCodeAt(g)===46?(ze=f,g++):(ze=l,ve(h)),ze!==l?(je=p,R=y(te,de),p=R):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;else g=p,p=l}else g=p,p=l;else g=p,p=l}else g=p,p=l;else g=p,p=l;return p}function B_(){var p,R,q,W,te,ce,de;for(p=g,R=[],q=Ve();q!==l;)R.push(q),q=Ve();if(R!==l)if(i.substr(g,5)===v?(q=v,g+=5):(q=l,ve(B)),q!==l){for(W=[],te=Ve();te!==l;)W.push(te),te=Ve();if(W!==l)if(te=ei(),te!==l){for(ce=[],de=Ve();de!==l;)ce.push(de),de=Ve();ce!==l?(i.charCodeAt(g)===46?(de=f,g++):(de=l,ve(h)),de!==l?(je=p,R=T(te),p=R):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;else g=p,p=l}else g=p,p=l;else g=p,p=l;return p}function O_(){var p,R,q,W,te,ce,de,re;for(p=g,R=[],q=Ve();q!==l;)R.push(q),q=Ve();if(R!==l)if(U.test(i.charAt(g))?(q=i.charAt(g),g++):(q=l,ve(E)),q!==l)if(P.test(i.charAt(g))?(W=i.charAt(g),g++):(W=l,ve(O)),W!==l)if(N.test(i.charAt(g))?(te=i.charAt(g),g++):(te=l,ve(X)),te!==l)if(L.test(i.charAt(g))?(ce=i.charAt(g),g++):(ce=l,ve(ae)),ce!==l){for(de=[],re=Ve();re!==l;)de.push(re),re=Ve();de!==l?(re=ei(),re!==l?(je=p,R=T(re),p=R):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;else g=p,p=l;else g=p,p=l;else g=p,p=l;else g=p,p=l;return p}function L_(){var p,R,q,W,te,ce,de,re,ze,bt,hn,_n;for(p=g,R=[],q=Ve();q!==l;)R.push(q),q=Ve();if(R!==l)if(K.test(i.charAt(g))?(q=i.charAt(g),g++):(q=l,ve(G)),q!==l)if($.test(i.charAt(g))?(W=i.charAt(g),g++):(W=l,ve(J)),W!==l)if(L.test(i.charAt(g))?(te=i.charAt(g),g++):(te=l,ve(ae)),te!==l)if(ne.test(i.charAt(g))?(ce=i.charAt(g),g++):(ce=l,ve(z)),ce!==l)if(ue.test(i.charAt(g))?(de=i.charAt(g),g++):(de=l,ve(Pe)),de!==l)if(He.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(be)),re!==l){for(ze=[],bt=Ve();bt!==l;)ze.push(bt),bt=Ve();if(ze!==l)if(bt=wa(),bt!==l){for(hn=[],_n=Ve();_n!==l;)hn.push(_n),_n=Ve();hn!==l?(_n=ei(),_n!==l?(je=p,R=y(bt,_n),p=R):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;else g=p,p=l}else g=p,p=l;else g=p,p=l;else g=p,p=l;else g=p,p=l;else g=p,p=l;else g=p,p=l;else g=p,p=l;return p}function U_(){var p,R,q;return p=g,R=P_(),R!==l?(q=Nl(),q!==l?(je=p,R=De(R,q),p=R):(g=p,p=l)):(g=p,p=l),p===l&&(p=g,R=ga(),R!==l?(q=Nl(),q===l&&(q=null),q!==l?(je=p,R=_e(R,q),p=R):(g=p,p=l)):(g=p,p=l)),p}function Nl(){var p,R,q,W,te,ce,de,re,ze,bt;if(p=g,R=Fl(),R!==l)if(q=Il(),q!==l){for(W=[],te=g,ce=[],de=Ve();de!==l;)ce.push(de),de=Ve();for(ce!==l?(i.charCodeAt(g)===59?(de=Te,g++):(de=l,ve(lt)),de!==l?(re=g,ze=Fl(),ze!==l?(bt=Il(),bt!==l?(je=re,ze=gt(R,q,ze,bt),re=ze):(g=re,re=l)):(g=re,re=l),re===l&&(re=null),re!==l?(je=te,ce=rt(R,q,re),te=ce):(g=te,te=l)):(g=te,te=l)):(g=te,te=l);te!==l;){for(W.push(te),te=g,ce=[],de=Ve();de!==l;)ce.push(de),de=Ve();ce!==l?(i.charCodeAt(g)===59?(de=Te,g++):(de=l,ve(lt)),de!==l?(re=g,ze=Fl(),ze!==l?(bt=Il(),bt!==l?(je=re,ze=gt(R,q,ze,bt),re=ze):(g=re,re=l)):(g=re,re=l),re===l&&(re=null),re!==l?(je=te,ce=rt(R,q,re),te=ce):(g=te,te=l)):(g=te,te=l)):(g=te,te=l)}W!==l?(je=p,R=Ee(R,q,W),p=R):(g=p,p=l)}else g=p,p=l;else g=p,p=l;return p}function Il(){var p,R,q,W,te,ce,de;if(p=g,R=$n(),R!==l){for(q=[],W=g,te=[],ce=Ve();ce!==l;)te.push(ce),ce=Ve();for(te!==l?(i.charCodeAt(g)===44?(ce=Ue,g++):(ce=l,ve(Jt)),ce!==l?(de=$n(),de!==l?(je=W,te=Pt(R,de),W=te):(g=W,W=l)):(g=W,W=l)):(g=W,W=l);W!==l;){for(q.push(W),W=g,te=[],ce=Ve();ce!==l;)te.push(ce),ce=Ve();te!==l?(i.charCodeAt(g)===44?(ce=Ue,g++):(ce=l,ve(Jt)),ce!==l?(de=$n(),de!==l?(je=W,te=Pt(R,de),W=te):(g=W,W=l)):(g=W,W=l)):(g=W,W=l)}q!==l?(je=p,R=Wt(R,q),p=R):(g=p,p=l)}else g=p,p=l;return p}function Fl(){var p,R,q;if(p=g,R=M_(),R!==l&&(je=p,R=d(R)),p=R,p===l){for(p=g,R=[],q=Ve();q!==l;)R.push(q),q=Ve();R!==l?(i.charCodeAt(g)===97?(q=cr,g++):(q=l,ve(Be)),q!==l?(je=p,R=Ke(),p=R):(g=p,p=l)):(g=p,p=l)}return p}function P_(){var p,R;return p=g,R=ma(),R!==l&&(je=p,R=Ge(R)),p=R,p===l&&(p=va(),p===l&&(p=xi())),p}function M_(){var p,R,q;for(p=g,R=[],q=Ve();q!==l;)R.push(q),q=Ve();return R!==l?(q=xi(),q!==l?(je=p,R=d(q),p=R):(g=p,p=l)):(g=p,p=l),p}function $n(){var p,R;return p=q_(),p===l&&(p=g,R=ma(),R!==l&&(je=p,R=$e(R)),p=R,p===l&&(p=g,R=va(),R!==l&&(je=p,R=pt(R)),p=R,p===l&&(p=g,R=ga(),R!==l&&(je=p,R=d(R)),p=R,p===l&&(p=g,R=xi(),R!==l&&(je=p,R=At(R)),p=R)))),p}function q_(){var p;return p=V_(),p===l&&(p=j_(),p===l&&(p=H_())),p}function ga(){var p,R,q,W,te,ce;for(p=g,R=[],q=Ve();q!==l;)R.push(q),q=Ve();if(R!==l)if(i.charCodeAt(g)===91?(q=qt,g++):(q=l,ve(x)),q!==l)if(W=Nl(),W!==l){for(te=[],ce=Ve();ce!==l;)te.push(ce),ce=Ve();te!==l?(i.charCodeAt(g)===93?(ce=D,g++):(ce=l,ve(I)),ce!==l?(je=p,R=d(W),p=R):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;else g=p,p=l;else g=p,p=l;return p}function ma(){var p,R,q,W,te,ce;for(p=g,R=[],q=Ve();q!==l;)R.push(q),q=Ve();if(R!==l)if(i.charCodeAt(g)===40?(q=Z,g++):(q=l,ve(oe)),q!==l){for(W=[],te=$n();te!==l;)W.push(te),te=$n();if(W!==l){for(te=[],ce=Ve();ce!==l;)te.push(ce),ce=Ve();te!==l?(i.charCodeAt(g)===41?(ce=ge,g++):(ce=l,ve(ye)),ce!==l?(je=p,R=ke(W),p=R):(g=p,p=l)):(g=p,p=l)}else g=p,p=l}else g=p,p=l;else g=p,p=l;return p}function j_(){var p,R,q;for(p=g,R=[],q=Ve();q!==l;)R.push(q),q=Ve();return R!==l?(q=Y_(),q===l&&(q=Q_(),q===l&&(q=W_())),q!==l?(je=p,R=d(q),p=R):(g=p,p=l)):(g=p,p=l),p}function V_(){var p,R,q,W,te,ce,de;for(p=g,R=[],q=Ve();q!==l;)R.push(q),q=Ve();if(R!==l)if(q=Rl(),q!==l){for(W=[],te=Ve();te!==l;)W.push(te),te=Ve();W!==l?(te=G_(),te!==l?(je=p,R=qe(q,te),p=R):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;else g=p,p=l;if(p===l){for(p=g,R=[],q=Ve();q!==l;)R.push(q),q=Ve();if(R!==l)if(q=Rl(),q!==l){for(W=[],te=Ve();te!==l;)W.push(te),te=Ve();if(W!==l)if(i.substr(g,2)===Xe?(te=Xe,g+=2):(te=l,ve(ct)),te!==l){for(ce=[],de=Ve();de!==l;)ce.push(de),de=Ve();ce!==l?(de=xi(),de!==l?(je=p,R=at(q,de),p=R):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;else g=p,p=l}else g=p,p=l;else g=p,p=l;if(p===l){for(p=g,R=[],q=Ve();q!==l;)R.push(q),q=Ve();R!==l?(q=Rl(),q!==l?(je=p,R=d(q),p=R):(g=p,p=l)):(g=p,p=l)}}return p}function H_(){var p,R,q;for(p=g,R=[],q=Ve();q!==l;)R.push(q),q=Ve();if(R!==l?(i.substr(g,4)===er?(q=er,g+=4):(q=l,ve(kr)),q!==l?(je=p,R=Qt(),p=R):(g=p,p=l)):(g=p,p=l),p===l){for(p=g,R=[],q=Ve();q!==l;)R.push(q),q=Ve();R!==l?(i.substr(g,5)===Kn?(q=Kn,g+=5):(q=l,ve(_h)),q!==l?(je=p,R=ph(),p=R):(g=p,p=l)):(g=p,p=l)}return p}function Rl(){var p,R,q;for(p=g,R=[],q=Ve();q!==l;)R.push(q),q=Ve();return R!==l?(q=K_(),q===l&&(q=$_(),q===l&&(q=Z_(),q===l&&(q=J_()))),q!==l?(je=p,R=d(q),p=R):(g=p,p=l)):(g=p,p=l),p}function xi(){var p,R,q;for(p=g,R=[],q=Ve();q!==l;)R.push(q),q=Ve();if(R!==l?(q=ei(),q!==l?(je=p,R=d(q),p=R):(g=p,p=l)):(g=p,p=l),p===l){for(p=g,R=[],q=Ve();q!==l;)R.push(q),q=Ve();R!==l?(q=z_(),q!==l?(je=p,R=d(q),p=R):(g=p,p=l)):(g=p,p=l)}return p}function z_(){var p,R;return p=x_(),p===l&&(p=g,R=ba(),R!==l&&(je=p,R=gh(R)),p=R),p}function va(){var p,R,q;for(p=g,R=[],q=Ve();q!==l;)R.push(q),q=Ve();if(R!==l?(q=X_(),q!==l?(je=p,R=d(q),p=R):(g=p,p=l)):(g=p,p=l),p===l){for(p=g,R=[],q=Ve();q!==l;)R.push(q),q=Ve();R!==l?(q=tp(),q!==l?(je=p,R=d(q),p=R):(g=p,p=l)):(g=p,p=l)}return p}function ei(){var p,R,q,W;if(p=g,i.charCodeAt(g)===60?(R=mh,g++):(R=l,ve(vh)),R!==l){for(q=[],Ps.test(i.charAt(g))?(W=i.charAt(g),g++):(W=l,ve(Ms)),W===l&&(W=Et());W!==l;)q.push(W),Ps.test(i.charAt(g))?(W=i.charAt(g),g++):(W=l,ve(Ms)),W===l&&(W=Et());q!==l?(i.charCodeAt(g)===62?(W=bh,g++):(W=l,ve(wh)),W!==l?(je=p,R=yh(q),p=R):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;return p}function ba(){var p,R,q;return p=g,R=ka(),R===l&&(R=null),R!==l?(i.charCodeAt(g)===58?(q=Vr,g++):(q=l,ve(Hr)),q!==l?(je=p,R=kh(R),p=R):(g=p,p=l)):(g=p,p=l),p}function wa(){var p,R,q;return p=g,R=ka(),R===l&&(R=null),R!==l?(i.charCodeAt(g)===58?(q=Vr,g++):(q=l,ve(Hr)),q!==l?(je=p,R=Eh(R),p=R):(g=p,p=l)):(g=p,p=l),p}function x_(){var p,R,q;return p=g,R=ba(),R!==l?(q=rp(),q!==l?(je=p,R=Dh(R,q),p=R):(g=p,p=l)):(g=p,p=l),p}function X_(){var p,R,q,W,te,ce,de,re,ze,bt;if(p=g,R=g,i.substr(g,2)===qs?(q=qs,g+=2):(q=l,ve(Ah)),q!==l)if(W=Bl(),W===l&&(jt.test(i.charAt(g))?(W=i.charAt(g),g++):(W=l,ve(Vt))),W!==l){for(te=[],ce=Ht();ce!==l;)te.push(ce),ce=Ht();if(te!==l){if(ce=[],de=g,re=[],i.charCodeAt(g)===46?(ze=f,g++):(ze=l,ve(h)),ze!==l)for(;ze!==l;)re.push(ze),i.charCodeAt(g)===46?(ze=f,g++):(ze=l,ve(h));else re=l;if(re!==l){if(ze=[],bt=Ht(),bt!==l)for(;bt!==l;)ze.push(bt),bt=Ht();else ze=l;ze!==l?(re=[re,ze],de=re):(g=de,de=l)}else g=de,de=l;for(;de!==l;){if(ce.push(de),de=g,re=[],i.charCodeAt(g)===46?(ze=f,g++):(ze=l,ve(h)),ze!==l)for(;ze!==l;)re.push(ze),i.charCodeAt(g)===46?(ze=f,g++):(ze=l,ve(h));else re=l;if(re!==l){if(ze=[],bt=Ht(),bt!==l)for(;bt!==l;)ze.push(bt),bt=Ht();else ze=l;ze!==l?(re=[re,ze],de=re):(g=de,de=l)}else g=de,de=l}ce!==l?(q=[q,W,te,ce],R=q):(g=R,R=l)}else g=R,R=l}else g=R,R=l;else g=R,R=l;return R!==l?p=i.substring(p,g):p=R,p}function G_(){var p,R,q,W,te,ce,de,re;if(p=g,i.charCodeAt(g)===64?(R=Th,g++):(R=l,ve(Ch)),R!==l){if(q=[],js.test(i.charAt(g))?(W=i.charAt(g),g++):(W=l,ve(Vs)),W!==l)for(;W!==l;)q.push(W),js.test(i.charAt(g))?(W=i.charAt(g),g++):(W=l,ve(Vs));else q=l;if(q!==l){if(W=[],te=g,i.charCodeAt(g)===45?(ce=El,g++):(ce=l,ve(Dl)),ce!==l){if(de=[],Fi.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(Ri)),re!==l)for(;re!==l;)de.push(re),Fi.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(Ri));else de=l;de!==l?(je=te,ce=Hs(q,de),te=ce):(g=te,te=l)}else g=te,te=l;for(;te!==l;)if(W.push(te),te=g,i.charCodeAt(g)===45?(ce=El,g++):(ce=l,ve(Dl)),ce!==l){if(de=[],Fi.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(Ri)),re!==l)for(;re!==l;)de.push(re),Fi.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(Ri));else de=l;de!==l?(je=te,ce=Hs(q,de),te=ce):(g=te,te=l)}else g=te,te=l;W!==l?(je=p,R=Nh(q,W),p=R):(g=p,p=l)}else g=p,p=l}else g=p,p=l;return p}function W_(){var p,R,q,W,te,ce;if(p=g,R=g,q=g,Si.test(i.charAt(g))?(W=i.charAt(g),g++):(W=l,ve(Bi)),W===l&&(W=null),W!==l){if(te=[],jt.test(i.charAt(g))?(ce=i.charAt(g),g++):(ce=l,ve(Vt)),ce!==l)for(;ce!==l;)te.push(ce),jt.test(i.charAt(g))?(ce=i.charAt(g),g++):(ce=l,ve(Vt));else te=l;te!==l?(W=[W,te],q=W):(g=q,q=l)}else g=q,q=l;return q!==l?R=i.substring(R,g):R=q,R!==l&&(je=p,R=Ih(R)),p=R,p}function Q_(){var p,R,q,W,te,ce,de,re;if(p=g,R=g,q=g,Si.test(i.charAt(g))?(W=i.charAt(g),g++):(W=l,ve(Bi)),W===l&&(W=null),W!==l){for(te=[],jt.test(i.charAt(g))?(ce=i.charAt(g),g++):(ce=l,ve(Vt));ce!==l;)te.push(ce),jt.test(i.charAt(g))?(ce=i.charAt(g),g++):(ce=l,ve(Vt));if(te!==l)if(i.charCodeAt(g)===46?(ce=f,g++):(ce=l,ve(h)),ce!==l){if(de=[],jt.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(Vt)),re!==l)for(;re!==l;)de.push(re),jt.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(Vt));else de=l;de!==l?(W=[W,te,ce,de],q=W):(g=q,q=l)}else g=q,q=l;else g=q,q=l}else g=q,q=l;return q!==l?R=i.substring(R,g):R=q,R!==l&&(je=p,R=Fh(R)),p=R,p}function Y_(){var p,R,q,W,te,ce,de,re,ze;if(p=g,R=g,q=g,Si.test(i.charAt(g))?(W=i.charAt(g),g++):(W=l,ve(Bi)),W===l&&(W=null),W!==l){if(te=g,ce=[],jt.test(i.charAt(g))?(de=i.charAt(g),g++):(de=l,ve(Vt)),de!==l)for(;de!==l;)ce.push(de),jt.test(i.charAt(g))?(de=i.charAt(g),g++):(de=l,ve(Vt));else ce=l;if(ce!==l)if(i.charCodeAt(g)===46?(de=f,g++):(de=l,ve(h)),de!==l){for(re=[],jt.test(i.charAt(g))?(ze=i.charAt(g),g++):(ze=l,ve(Vt));ze!==l;)re.push(ze),jt.test(i.charAt(g))?(ze=i.charAt(g),g++):(ze=l,ve(Vt));re!==l?(ze=Sl(),ze!==l?(ce=[ce,de,re,ze],te=ce):(g=te,te=l)):(g=te,te=l)}else g=te,te=l;else g=te,te=l;if(te===l){if(te=g,i.charCodeAt(g)===46?(ce=f,g++):(ce=l,ve(h)),ce!==l){if(de=[],jt.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(Vt)),re!==l)for(;re!==l;)de.push(re),jt.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(Vt));else de=l;de!==l?(re=Sl(),re!==l?(ce=[ce,de,re],te=ce):(g=te,te=l)):(g=te,te=l)}else g=te,te=l;if(te===l){if(te=g,ce=[],jt.test(i.charAt(g))?(de=i.charAt(g),g++):(de=l,ve(Vt)),de!==l)for(;de!==l;)ce.push(de),jt.test(i.charAt(g))?(de=i.charAt(g),g++):(de=l,ve(Vt));else ce=l;ce!==l?(de=Sl(),de!==l?(ce=[ce,de],te=ce):(g=te,te=l)):(g=te,te=l)}}te!==l?(W=[W,te],q=W):(g=q,q=l)}else g=q,q=l;return q!==l?R=i.substring(R,g):R=q,R!==l&&(je=p,R=Rh(R)),p=R,p}function Sl(){var p,R,q,W,te,ce;if(p=g,R=g,Sh.test(i.charAt(g))?(q=i.charAt(g),g++):(q=l,ve(Bh)),q!==l)if(Si.test(i.charAt(g))?(W=i.charAt(g),g++):(W=l,ve(Bi)),W===l&&(W=null),W!==l){if(te=[],jt.test(i.charAt(g))?(ce=i.charAt(g),g++):(ce=l,ve(Vt)),ce!==l)for(;ce!==l;)te.push(ce),jt.test(i.charAt(g))?(ce=i.charAt(g),g++):(ce=l,ve(Vt));else te=l;te!==l?(q=[q,W,te],R=q):(g=R,R=l)}else g=R,R=l;else g=R,R=l;return R!==l?p=i.substring(p,g):p=R,p}function J_(){var p,R,q,W;if(p=g,i.charCodeAt(g)===34?(R=Oi,g++):(R=l,ve(Li)),R!==l){for(q=[],zs.test(i.charAt(g))?(W=i.charAt(g),g++):(W=l,ve(xs)),W===l&&(W=Tt(),W===l&&(W=Et()));W!==l;)q.push(W),zs.test(i.charAt(g))?(W=i.charAt(g),g++):(W=l,ve(xs)),W===l&&(W=Tt(),W===l&&(W=Et()));q!==l?(i.charCodeAt(g)===34?(W=Oi,g++):(W=l,ve(Li)),W!==l?(je=p,R=S(q),p=R):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;return p}function Z_(){var p,R,q,W;if(p=g,i.charCodeAt(g)===39?(R=Ui,g++):(R=l,ve(Pi)),R!==l){for(q=[],Xs.test(i.charAt(g))?(W=i.charAt(g),g++):(W=l,ve(Gs)),W===l&&(W=Tt(),W===l&&(W=Et()));W!==l;)q.push(W),Xs.test(i.charAt(g))?(W=i.charAt(g),g++):(W=l,ve(Gs)),W===l&&(W=Tt(),W===l&&(W=Et()));q!==l?(i.charCodeAt(g)===39?(W=Ui,g++):(W=l,ve(Pi)),W!==l?(je=p,R=S(q),p=R):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;return p}function K_(){var p,R,q,W,te,ce,de,re;if(p=g,i.substr(g,3)===Mi?(R=Mi,g+=3):(R=l,ve(Ws)),R!==l){for(q=[],Er.test(i.charAt(g))?(W=i.charAt(g),g++):(W=l,ve(Dr)),W===l&&(W=Tt(),W===l&&(W=Et()));W!==l;)q.push(W),Er.test(i.charAt(g))?(W=i.charAt(g),g++):(W=l,ve(Dr)),W===l&&(W=Tt(),W===l&&(W=Et()));if(q!==l){if(W=[],te=g,i.substr(g,2)===qi?(ce=qi,g+=2):(ce=l,ve(Qs)),ce!==l){if(de=[],Er.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(Dr)),re===l&&(re=Tt(),re===l&&(re=Et())),re!==l)for(;re!==l;)de.push(re),Er.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(Dr)),re===l&&(re=Tt(),re===l&&(re=Et()));else de=l;de!==l?(je=te,ce=Ys(q,de),te=ce):(g=te,te=l)}else g=te,te=l;if(te===l)if(te=g,i.charCodeAt(g)===39?(ce=Ui,g++):(ce=l,ve(Pi)),ce!==l){if(de=[],Er.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(Dr)),re===l&&(re=Tt(),re===l&&(re=Et())),re!==l)for(;re!==l;)de.push(re),Er.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(Dr)),re===l&&(re=Tt(),re===l&&(re=Et()));else de=l;de!==l?(je=te,ce=Js(q,de),te=ce):(g=te,te=l)}else g=te,te=l;for(;te!==l;){if(W.push(te),te=g,i.substr(g,2)===qi?(ce=qi,g+=2):(ce=l,ve(Qs)),ce!==l){if(de=[],Er.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(Dr)),re===l&&(re=Tt(),re===l&&(re=Et())),re!==l)for(;re!==l;)de.push(re),Er.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(Dr)),re===l&&(re=Tt(),re===l&&(re=Et()));else de=l;de!==l?(je=te,ce=Ys(q,de),te=ce):(g=te,te=l)}else g=te,te=l;if(te===l)if(te=g,i.charCodeAt(g)===39?(ce=Ui,g++):(ce=l,ve(Pi)),ce!==l){if(de=[],Er.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(Dr)),re===l&&(re=Tt(),re===l&&(re=Et())),re!==l)for(;re!==l;)de.push(re),Er.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(Dr)),re===l&&(re=Tt(),re===l&&(re=Et()));else de=l;de!==l?(je=te,ce=Js(q,de),te=ce):(g=te,te=l)}else g=te,te=l}W!==l?(i.substr(g,3)===Mi?(te=Mi,g+=3):(te=l,ve(Ws)),te!==l?(je=p,R=Zs(q,W),p=R):(g=p,p=l)):(g=p,p=l)}else g=p,p=l}else g=p,p=l;return p}function $_(){var p,R,q,W,te,ce,de,re;if(p=g,i.substr(g,3)===ji?(R=ji,g+=3):(R=l,ve(Ks)),R!==l){for(q=[],Ar.test(i.charAt(g))?(W=i.charAt(g),g++):(W=l,ve(Tr)),W===l&&(W=Tt(),W===l&&(W=Et()));W!==l;)q.push(W),Ar.test(i.charAt(g))?(W=i.charAt(g),g++):(W=l,ve(Tr)),W===l&&(W=Tt(),W===l&&(W=Et()));if(q!==l){if(W=[],te=g,i.substr(g,2)===Vi?(ce=Vi,g+=2):(ce=l,ve($s)),ce!==l){if(de=[],Ar.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(Tr)),re===l&&(re=Tt(),re===l&&(re=Et())),re!==l)for(;re!==l;)de.push(re),Ar.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(Tr)),re===l&&(re=Tt(),re===l&&(re=Et()));else de=l;de!==l?(je=te,ce=ea(q,de),te=ce):(g=te,te=l)}else g=te,te=l;if(te===l)if(te=g,i.charCodeAt(g)===34?(ce=Oi,g++):(ce=l,ve(Li)),ce!==l){if(de=[],Ar.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(Tr)),re===l&&(re=Tt(),re===l&&(re=Et())),re!==l)for(;re!==l;)de.push(re),Ar.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(Tr)),re===l&&(re=Tt(),re===l&&(re=Et()));else de=l;de!==l?(je=te,ce=ta(q,de),te=ce):(g=te,te=l)}else g=te,te=l;for(;te!==l;){if(W.push(te),te=g,i.substr(g,2)===Vi?(ce=Vi,g+=2):(ce=l,ve($s)),ce!==l){if(de=[],Ar.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(Tr)),re===l&&(re=Tt(),re===l&&(re=Et())),re!==l)for(;re!==l;)de.push(re),Ar.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(Tr)),re===l&&(re=Tt(),re===l&&(re=Et()));else de=l;de!==l?(je=te,ce=ea(q,de),te=ce):(g=te,te=l)}else g=te,te=l;if(te===l)if(te=g,i.charCodeAt(g)===34?(ce=Oi,g++):(ce=l,ve(Li)),ce!==l){if(de=[],Ar.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(Tr)),re===l&&(re=Tt(),re===l&&(re=Et())),re!==l)for(;re!==l;)de.push(re),Ar.test(i.charAt(g))?(re=i.charAt(g),g++):(re=l,ve(Tr)),re===l&&(re=Tt(),re===l&&(re=Et()));else de=l;de!==l?(je=te,ce=ta(q,de),te=ce):(g=te,te=l)}else g=te,te=l}W!==l?(i.substr(g,3)===ji?(te=ji,g+=3):(te=l,ve(Ks)),te!==l?(je=p,R=Zs(q,W),p=R):(g=p,p=l)):(g=p,p=l)}else g=p,p=l}else g=p,p=l;return p}function Et(){var p,R,q,W,te,ce,de,re,ze,bt,hn;return p=g,i.substr(g,2)===ra?(R=ra,g+=2):(R=l,ve(Oh)),R!==l?(q=g,W=tr(),W!==l?(te=tr(),te!==l?(ce=tr(),ce!==l?(de=tr(),de!==l?(re=tr(),re!==l?(ze=tr(),ze!==l?(bt=tr(),bt!==l?(hn=tr(),hn!==l?(W=[W,te,ce,de,re,ze,bt,hn],q=W):(g=q,q=l)):(g=q,q=l)):(g=q,q=l)):(g=q,q=l)):(g=q,q=l)):(g=q,q=l)):(g=q,q=l)):(g=q,q=l),q!==l?(je=p,R=Lh(q),p=R):(g=p,p=l)):(g=p,p=l),p===l&&(p=g,i.substr(g,2)===na?(R=na,g+=2):(R=l,ve(Uh)),R!==l?(q=g,W=tr(),W!==l?(te=tr(),te!==l?(ce=tr(),ce!==l?(de=tr(),de!==l?(W=[W,te,ce,de],q=W):(g=q,q=l)):(g=q,q=l)):(g=q,q=l)):(g=q,q=l),q!==l?(je=p,R=Ph(q),p=R):(g=p,p=l)):(g=p,p=l)),p}function Tt(){var p,R;return p=g,i.substr(g,2)===ia?(R=ia,g+=2):(R=l,ve(Mh)),R!==l&&(je=p,R=qh()),p=R,p===l&&(p=g,i.substr(g,2)===la?(R=la,g+=2):(R=l,ve(jh)),R!==l&&(je=p,R=Vh()),p=R,p===l&&(p=g,i.substr(g,2)===sa?(R=sa,g+=2):(R=l,ve(Hh)),R!==l&&(je=p,R=zh()),p=R,p===l&&(p=g,i.substr(g,2)===aa?(R=aa,g+=2):(R=l,ve(xh)),R!==l&&(je=p,R=Xh()),p=R,p===l&&(p=g,i.substr(g,2)===ua?(R=ua,g+=2):(R=l,ve(Gh)),R!==l&&(je=p,R=Wh()),p=R,p===l&&(p=g,i.substr(g,2)===oa?(R=oa,g+=2):(R=l,ve(Qh)),R!==l&&(je=p,R=Yh()),p=R,p===l&&(p=g,i.substr(g,2)===fa?(R=fa,g+=2):(R=l,ve(Jh)),R!==l&&(je=p,R=Zh()),p=R,p===l&&(p=g,i.substr(g,2)===ca?(R=ca,g+=2):(R=l,ve(Kh)),R!==l&&(je=p,R=$h()),p=R))))))),p}function ep(){var p;return e_.test(i.charAt(g))?(p=i.charAt(g),g++):(p=l,ve(t_)),p}function tp(){var p,R,q,W;if(p=g,i.charCodeAt(g)===91?(R=qt,g++):(R=l,ve(x)),R!==l){for(q=[],W=Ve();W!==l;)q.push(W),W=Ve();q!==l?(i.charCodeAt(g)===93?(W=D,g++):(W=l,ve(I)),W!==l?(je=p,R=r_(),p=R):(g=p,p=l)):(g=p,p=l)}else g=p,p=l;return p}function ya(){var p,R,q;return p=g,n_.test(i.charAt(g))?(R=i.charAt(g),g++):(R=l,ve(i_)),R!==l?(l_.test(i.charAt(g))?(q=i.charAt(g),g++):(q=l,ve(s_)),q!==l?(je=p,R=a_(R,q),p=R):(g=p,p=l)):(g=p,p=l),p===l&&(u_.test(i.charAt(g))?(p=i.charAt(g),g++):(p=l,ve(o_))),p}function Bl(){var p;return p=ya(),p===l&&(i.charCodeAt(g)===95?(p=f_,g++):(p=l,ve(c_))),p}function Ht(){var p;return p=Bl(),p===l&&(i.charCodeAt(g)===45?(p=El,g++):(p=l,ve(Dl)),p===l&&(jt.test(i.charAt(g))?(p=i.charAt(g),g++):(p=l,ve(Vt)),p===l&&(i.charCodeAt(g)===183?(p=d_,g++):(p=l,ve(h_)),p===l&&(__.test(i.charAt(g))?(p=i.charAt(g),g++):(p=l,ve(p_)),p===l&&(g_.test(i.charAt(g))?(p=i.charAt(g),g++):(p=l,ve(m_))))))),p}function ka(){var p,R,q,W,te,ce,de,re,ze;if(p=g,R=g,q=ya(),q!==l){for(W=[],te=Ht();te!==l;)W.push(te),te=Ht();if(W!==l){if(te=[],ce=g,de=[],i.charCodeAt(g)===46?(re=f,g++):(re=l,ve(h)),re!==l)for(;re!==l;)de.push(re),i.charCodeAt(g)===46?(re=f,g++):(re=l,ve(h));else de=l;if(de!==l){if(re=[],ze=Ht(),ze!==l)for(;ze!==l;)re.push(ze),ze=Ht();else re=l;re!==l?(de=[de,re],ce=de):(g=ce,ce=l)}else g=ce,ce=l;for(;ce!==l;){if(te.push(ce),ce=g,de=[],i.charCodeAt(g)===46?(re=f,g++):(re=l,ve(h)),re!==l)for(;re!==l;)de.push(re),i.charCodeAt(g)===46?(re=f,g++):(re=l,ve(h));else de=l;if(de!==l){if(re=[],ze=Ht(),ze!==l)for(;ze!==l;)re.push(ze),ze=Ht();else re=l;re!==l?(de=[de,re],ce=de):(g=ce,ce=l)}else g=ce,ce=l}te!==l?(q=[q,W,te],R=q):(g=R,R=l)}else g=R,R=l}else g=R,R=l;return R!==l?p=i.substring(p,g):p=R,p}function rp(){var p,R,q,W,te,ce,de,re;if(p=g,R=Bl(),R===l&&(i.charCodeAt(g)===58?(R=Vr,g++):(R=l,ve(Hr)),R===l&&(jt.test(i.charAt(g))?(R=i.charAt(g),g++):(R=l,ve(Vt)),R===l&&(R=dn()))),R!==l){for(q=[],W=Ht(),W===l&&(i.charCodeAt(g)===58?(W=Vr,g++):(W=l,ve(Hr)),W===l&&(W=dn()));W!==l;)q.push(W),W=Ht(),W===l&&(i.charCodeAt(g)===58?(W=Vr,g++):(W=l,ve(Hr)),W===l&&(W=dn()));if(q!==l){if(W=[],te=g,ce=[],i.charCodeAt(g)===46?(de=f,g++):(de=l,ve(h)),de!==l)for(;de!==l;)ce.push(de),i.charCodeAt(g)===46?(de=f,g++):(de=l,ve(h));else ce=l;if(ce!==l){if(de=[],re=Ht(),re===l&&(i.charCodeAt(g)===58?(re=Vr,g++):(re=l,ve(Hr)),re===l&&(re=dn())),re!==l)for(;re!==l;)de.push(re),re=Ht(),re===l&&(i.charCodeAt(g)===58?(re=Vr,g++):(re=l,ve(Hr)),re===l&&(re=dn()));else de=l;de!==l?(je=te,ce=da(R,q,ce,de),te=ce):(g=te,te=l)}else g=te,te=l;for(;te!==l;){if(W.push(te),te=g,ce=[],i.charCodeAt(g)===46?(de=f,g++):(de=l,ve(h)),de!==l)for(;de!==l;)ce.push(de),i.charCodeAt(g)===46?(de=f,g++):(de=l,ve(h));else ce=l;if(ce!==l){if(de=[],re=Ht(),re===l&&(i.charCodeAt(g)===58?(re=Vr,g++):(re=l,ve(Hr)),re===l&&(re=dn())),re!==l)for(;re!==l;)de.push(re),re=Ht(),re===l&&(i.charCodeAt(g)===58?(re=Vr,g++):(re=l,ve(Hr)),re===l&&(re=dn()));else de=l;de!==l?(je=te,ce=da(R,q,ce,de),te=ce):(g=te,te=l)}else g=te,te=l}W!==l?(je=p,R=v_(R,q,W),p=R):(g=p,p=l)}else g=p,p=l}else g=p,p=l;return p}function dn(){var p;return p=np(),p===l&&(p=ip()),p}function np(){var p,R,q,W,te;return p=g,R=g,i.charCodeAt(g)===37?(q=b_,g++):(q=l,ve(w_)),q!==l?(W=tr(),W!==l?(te=tr(),te!==l?(q=[q,W,te],R=q):(g=R,R=l)):(g=R,R=l)):(g=R,R=l),R!==l?p=i.substring(p,g):p=R,p}function tr(){var p;return y_.test(i.charAt(g))?(p=i.charAt(g),g++):(p=l,ve(k_)),p}function ip(){var p,R,q;return p=g,i.charCodeAt(g)===92?(R=E_,g++):(R=l,ve(D_)),R!==l?(A_.test(i.charAt(g))?(q=i.charAt(g),g++):(q=l,ve(T_)),q!==l?(je=p,R=d(q),p=R):(g=p,p=l)):(g=p,p=l),p}var lp=new Function("try {return this===window;}catch(e){ return false;}"),Ea=lp()?window.URL:Rp.URL,Da=function(p){return p.match(/^[a-z](.*?):(.+?)/g)};function sp(p,R){var q={};return q[p]=R,q}var vt={base:[],data:{},addBase:function(p){if(vt.base.length===0){vt.base.push(p);return}const R=vt.base[vt.base.length-1];R!==p&&vt.base.push(new Ea(p,R).toString())},addPrefix:function(p,R){const q=vt.data[p];q===void 0?vt.data[p]=[{uri:R,count:0}]:q[q.length-1].uri!==R&&q.push({uri:R,count:0})},hasPrefix:function(p){return this.data[p]!==void 0},resolve:function(p,R){const q=Object.keys(vt.data).find(te=>p.indexOf(te+":")===0);if(q!==void 0){const te=vt.data[q];if(te.length===1&&R!==!0&&Da(te[0].uri))return p;const ce=te[te.length-1].uri;return p.replace(q+":",ce)}else{var W=vt.base.length===0?s.baseIRI:vt.base[vt.base.length-1];return!W||p.match(/^(http:|https:|urn:|file:)/)?p:p.indexOf("//")===0&&W?W.split("//")[0]+p:new Ea(p,W).toString()}},increment:function(p){const R=vt.data[p];R!==void 0&&R[R.length-1].count++},decrement:function(p){const R=vt.data[p];R!==void 0&&R[R.length-1].count--},toJSON:function(){const p={};return vt.base.length>0&&(p["@context"]===void 0&&(p["@context"]={}),p["@context"]["@base"]=vt.base[0]),Object.keys(vt.data).forEach(R=>{const q=vt.data[R][0];q.uri==="http://www.w3.org/2001/XMLSchema#"&&q.count<1||Da(q.uri)&&(p["@context"]===void 0&&(p["@context"]={}),p["@context"][R]=q.uri)}),p}};function Ol(p,R){if(p["@list"]===void 0||!R&&!p["@list"].find(te=>te["@list"]!==void 0))return p;if(p["@list"].length===0)return{"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};var q={},W=null;return p["@list"].forEach(te=>{W===null?W=q:(W["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={},W=W["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]),W["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"]=Ol(te,!0),W["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}),q}if(zi=u(),zi!==l&&g===i.length)return zi;throw zi!==l&&g<i.length&&ve(C_()),I_(Al,Cr<i.length?i.charAt(Cr):null,Cr<i.length?Cl(Cr,Cr+1):Cl(Cr,Cr))}return{SyntaxError:e,parse:t}})})(Bd);var n1=Bd.exports;function i1(n){return new l1(n)}var l1=function(){function n(r){Nt(this,n),Se(this,"_notQNameChars",`	\r
 !"#$%&'()*.,+/;<=>?@[\\]^\`{|}~`),Se(this,"_notNameChars",this._notQNameChars+":"),Se(this,"validPrefix",new RegExp(/^[a-zA-Z][a-zA-Z0-9]*$/)),Se(this,"forbidden1",new RegExp(/[\\"\b\f\r\v\t\n\u0080-\uffff]/gm)),Se(this,"forbidden3",new RegExp(/[\\"\b\f\r\v\u0080-\uffff]/gm)),this.flags="",this.base=null,this.prefixes=[],this.namespaces=[];var e=Object.keys(wu());for(var t in e){var i=wu()[e[t]](""),s=e[t];this.prefixes[i]=s,this.namespaces[s]=i}this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.suggestPrefix("xml","reserved:reservedForFutureUse"),this.namespacesUsed=[],this.keywords=["a"],this.prefixchars="abcdefghijklmnopqustuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",this.incoming=null,this.formulas=[],this.store=r,this.rdfFactory=r.rdfFactory||vr,this.xsd=Sd(this.rdfFactory)}return Ct(n,[{key:"setBase",value:function(e){return this.base=e,this}},{key:"setFlags",value:function(e){return this.flags=e||"",this}},{key:"toStr",value:function(e){var t=e.toNT();return e.termType==="Graph"&&(this.formulas[t]=e),t}},{key:"fromStr",value:function(e){if(e[0]==="{"){var t=this.formulas[e];return t||console.log("No formula object for "+e),t}return this.store.fromNT(e)}},{key:"setNamespaces",value:function(e){for(var t in e)this.setPrefix(t,e[t]);return this}},{key:"setPrefix",value:function(e,t){if(e.slice(0,7)!=="default"&&e.slice(0,2)!=="ns"&&!(!e||!t)){for(var i in this.prefixes)this.prefixes[i]==e&&delete this.prefixes[i];this.prefixes[t]=e,this.namespaces[e]=t}}},{key:"suggestPrefix",value:function(e,t){e.slice(0,7)!=="default"&&e.slice(0,2)!=="ns"&&(!e||!t||e in this.namespaces||t in this.prefixes||(this.prefixes[t]=e,this.namespaces[e]=t))}},{key:"suggestNamespaces",value:function(e){for(var t in e)this.suggestPrefix(t,e[t]);return this}},{key:"checkIntegrity",value:function(){var e,t;for(e in this.namespaces)if(this.prefixes[this.namespaces[e]]!==e)throw new Error("Serializer integity error 1: "+e+", "+this.namespaces[e]+", "+this.prefixes[this.namespaces[e]]+"!");for(t in this.prefixes)if(this.namespaces[this.prefixes[t]]!==t)throw new Error("Serializer integity error 2: "+t+", "+this.prefixs[t]+", "+this.namespaces[this.prefixes[t]]+"!")}},{key:"makeUpPrefix",value:function(e){var t=e;function i(o){return!this.validPrefix.test(o)||o==="ns"||o in this.namespaces?!1:(this.prefixes[e]=o,this.namespaces[o]=e,o)}var s=i.bind(this);"#/".indexOf(t[t.length-1])>=0&&(t=t.slice(0,-1));var l=t.lastIndexOf("/");l>=0&&(t=t.slice(l+1));for(var a=0;a<t.length&&this.prefixchars.indexOf(t[a]);)a++;if(t=t.slice(0,a),t.length<6&&s(t))return t;if(s(t.slice(0,3)))return t.slice(0,3);if(s(t.slice(0,2)))return t.slice(0,2);if(s(t.slice(0,4)))return t.slice(0,4);if(s(t.slice(0,1)))return t.slice(0,1);if(s(t.slice(0,5)))return t.slice(0,5);this.validPrefix.test(t)||(t="n");for(var u=0;;u++)if(s(t.slice(0,3)+u))return t.slice(0,3)+u}},{key:"rootSubjects",value:function(e){for(var t={},i={},s={},l=0;l<e.length;l++){var a=e[l],u=function(C){t.hasOwnProperty(C)||(t[C]=[]),t[C].push(a.subject)},o=[a.subject,a.predicate,a.object];o.map(function(k){k.termType==="BlankNode"?s[k.toNT()]=!0:k.termType==="Collection"&&k.elements.forEach(function(C){u(C)})}),u(e[l].object);var f=i[this.toStr(a.subject)];f||(f=[]),f.push(a),i[this.toStr(a.subject)]=f}var h=[];for(var d in i)if(i.hasOwnProperty(d)){var c=this.fromStr(d);if(c.termType!=="BlankNode"||!t[c]||t[c].length!==1){h.push(c);continue}}this.incoming=t;for(var _={},w=0;w<h.length;w++)_[h[w].toNT()]=!0;return{roots:h,subjects:i,rootsHash:_,incoming:t}}},{key:"toN3",value:function(e){return this.statementsToN3(e.statements)}},{key:"explicitURI",value:function(e){return this.flags.indexOf("r")<0&&this.base?e=Ll(this.base,e):this.flags.indexOf("u")>=0?e=a1(e):e=s1(decodeURI(e)),"<"+e+">"}},{key:"statementsToNTriples",value:function(e){var t=e.slice();t.sort();for(var i="",s="http://www.w3.org/1999/02/22-rdf-syntax-ns#",l=this,a=this.store,u=this.rdfFactory,o=function c(_){if(_.termType!=="Collection")return l.atomicTermToN3(_);for(var w=_.elements,k=a.sym(s+"nill"),C=w.length-1;C>=0;C--){var j=u.blankNode();i+=c(j)+" "+c(a.sym(s+"first"))+" "+c(w[C])+`.
`,i+=c(j)+" "+c(a.sym(s+"rest"))+" "+c(k)+`.
`,k=j}return l.atomicTermToN3(k)},f=0;f<t.length;f++){var h=t[f],d="";d+=o(h.subject)+" ",d+=o(h.predicate)+" ",d+=o(h.object)+" ",this.flags.indexOf("q")>=0&&(d+=o(h.why)+" "),d+=`.
`,i+=d}return i}},{key:"statementsToN3",value:function(e){var t=4,i=80,s=this.store,l={"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":"aaa:00"},a=function(T,U){return $0(T,U,s,l)};e.sort(a),this.base&&!this.defaultNamespace&&(this.defaultNamespace=this.base+"#");var u={};this.flags.indexOf("s")<0&&(u["http://www.w3.org/2002/07/owl#sameAs"]="="),this.flags.indexOf("t")<0&&(u["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"]="a"),this.flags.indexOf("i")<0&&(u["http://www.w3.org/2000/10/swap/log#implies"]="=>");var o=function(T){for(var U="",E=0;E<T;E++)U+=" ";return U},f=function B(T){for(var U="",E=0;E<T.length;E++){var P=T[E],O=typeof P=="string"?P:B(P);if(E!==0){var N=U.slice(-1)||" ";O===","||O===";"||O==="."&&!"0123456789.:".includes(N)||(U+=" ")}U+=O}return U},h=function B(T,U){var E="",P=1e5;U===void 0&&(U=-1);for(var O=0;O<T.length;O++){var N=T[O];if(typeof N!="string"){var X=B(N,U+1);if(X.length<10*(i-t*U)&&X.indexOf('"""')<0){var L=f(N);L.length<i-t*U&&(N=L,X="")}X&&(P=1e4),E+=X}if(typeof N=="string"){if(N.length===1&&E.slice(-1)===`
`&&",.;".indexOf(N)>=0){E=E.slice(0,-1),N=="."&&"0123456789.:".includes(E.charAt(E.length-1))&&(E+=" ",P+=1),E+=N+`
`,P+=1;continue}if(P<t*U+4||P+N.length+1<i&&";.".indexOf(E[E.length-2])<0)E=E.slice(0,-1)+" "+N+`
`,P+=N.length+1;else{var ae=o(t*U)+N;E+=ae+`
`,P=ae.length,U<0&&(E+=`
`,P=1e5)}}}return E};function d(B){for(var T=this.rootSubjects(B),U=T.roots,E=[],P=0;P<U.length;P++){var O=U[P];E.push(_(O,T))}return E}var c=d.bind(this);function _(B,T){return B.termType==="BlankNode"&&!T.incoming[B]?j(B,T,!0).concat(["."]):[F(B,T)].concat([k(B,T)]).concat(["."])}function w(B,T){var U=[],E=null,P=T.subjects[this.toStr(B)]||[];if(typeof P>"u")throw new Error("Cant find statements for "+B);for(var O=[],N=0;N<P.length;N++){var X=P[N];X.predicate.uri===E?O.push(","):(E&&(U=U.concat([O]).concat([";"]),O=[]),U.push(u[X.predicate.uri]?u[X.predicate.uri]:F(X.predicate,T))),E=X.predicate.uri,O.push(j(X.object,T))}return U=U.concat([O]),U}var k=w.bind(this);function C(B,T,U){return B.termType==="BlankNode"&&(U||T.rootsHash[B.toNT()]===void 0)?T.subjects[this.toStr(B)]?["[",k(B,T),"]"]:"[]":F(B,T)}var j=C.bind(this);function S(B,T){var U,E;switch(B.termType){case"Graph":return E=["{"],E=E.concat(c(B.statements)),E.concat(["}"]);case"Collection":for(E=["("],U=0;U<B.elements.length;U++)E.push([j(B.elements[U],T)]);return E.push(")"),E;default:return this.atomicTermToN3(B)}}n.prototype.termToN3=F;var F=S.bind(this);function b(){var B="";this.flags.indexOf("d")<0&&this.defaultNamespace&&(B+="@prefix : "+this.explicitURI(this.defaultNamespace)+`.
`);for(var T in this.prefixes)this.prefixes.hasOwnProperty(T)&&this.namespacesUsed[T]&&(B+="@prefix "+this.prefixes[T]+": "+this.explicitURI(T)+`.
`);return B+`
`}var y=b.bind(this),v=c(e);return y()+h(v)}},{key:"atomicTermToN3",value:function(e,t){switch(e.termType){case"BlankNode":case"Variable":return e.toNT();case"Literal":var i=e.value;if(typeof i!="string")throw new TypeError("Value of RDF literal node must be a string");if(e.datatype&&this.flags.indexOf("x")<0)switch(e.datatype.uri){case"http://www.w3.org/2001/XMLSchema#integer":return i;case"http://www.w3.org/2001/XMLSchema#decimal":return i.indexOf(".")<0&&(i+=".0"),i;case"http://www.w3.org/2001/XMLSchema#double":{var s=i.toLowerCase().indexOf("e")>0;return i.indexOf(".")<0&&!s&&(i+=".0"),s||(i+="e0"),i}case"http://www.w3.org/2001/XMLSchema#boolean":return e.value==="1"?"true":"false"}var l=this.stringToN3(e.value);return e.language?l+="@"+e.language:e.datatype.equals(this.xsd.string)||(l+="^^"+this.atomicTermToN3(e.datatype,t)),l;case"NamedNode":return this.symbolToN3(e);case"DefaultGraph":return"";default:throw new Error("Internal: atomicTermToN3 cannot handle "+e+" of termType: "+e.termType)}}},{key:"stringToN3",value:function(e,t){t||(t="e");var i="",s,l,a,u,o;for(e.length>20&&e.slice(-1)!=='"'&&t.indexOf("n")<0&&(e.indexOf(`
`)>0||e.indexOf('"')>0)?(u='"""',o=this.forbidden3):(u='"',o=this.forbidden1),s=0;s<e.length;){o.lastIndex=0;var f=o.exec(e.slice(s));if(f==null)break;l=s+o.lastIndex-1,i+=e.slice(s,l);var h=e[l];h==='"'&&u==='"""'&&e.slice(l,l+3)!=='"""'?i+=h:(a=`\b\f\r	\v
\\"`.indexOf(h),a>=0?i+="\\"+'bfrtvn\\"'[a]:t.indexOf("e")>=0?i+="\\u"+("000"+h.charCodeAt(0).toString(16).toLowerCase()).slice(-4):i+=h),s=l+1}return u+i+e.slice(s)+u}},{key:"symbolToN3",value:function(e){var t=e.uri,i=t.indexOf("#");if(i<0&&this.flags.indexOf("/")<0&&(i=t.lastIndexOf("/")),i>=0&&this.flags.indexOf("p")<0&&(t.indexOf("http")===0||t.indexOf("ws")===0||t.indexOf("file")===0)){for(var s=!0,l=i+1;l<t.length;l++)if(this._notNameChars.indexOf(t[l])>=0){s=!1;break}if(s){var a=t.slice(i+1),u=t.slice(0,i+1);if(this.defaultNamespace&&this.defaultNamespace===u&&this.flags.indexOf("d")<0)return this.flags.indexOf("k")>=0&&this.keyords.indexOf(a)<0?a:":"+a;var o=this.prefixes[u];if(o||(o=this.makeUpPrefix(u)),o)return this.namespacesUsed[u]=!0,o+":"+a}}return this.explicitURI(t)}},{key:"writeStore",value:function(e){var t=this.store,i=t.fetcher,s=i&&i.appNode,l=this.store.index[3];for(var a in l){var u=t.fromNT(a);s&&u.equals(s)||e(`
`+this.atomicTermToN3(u)+" "+this.atomicTermToN3(t.sym("http://www.w3.org/2000/10/swap/log#semantics"))+" { "+this.statementsToN3(t.statementsMatching(void 0,void 0,void 0,u))+` }.
`)}t.statementsMatching(void 0,t.sym("http://www.w3.org/2007/ont/link#requestedURI")).map(function(h){e(`
<`+h.object.value+`> log:metadata {
`);var d=t.statementsMatching(void 0,void 0,void 0,h.subject);e(this.statementsToN3(this.statementsToN3(d))),e(`}.
`)});var o=[];s&&o.push(s);var f=[];o.map(function(h){f=f.concat(t.statementsMatching(void 0,void 0,void 0,h))}),e(this.statementsToN3(f))}},{key:"statementsToXML",value:function(e){var t=4,i=80,s=[];s["http://www.w3.org/1999/02/22-rdf-syntax-ns#"]=!0;var l="http://www.w3.org/1999/02/22-rdf-syntax-ns#_",a=function(P){for(var O="",N=0;N<P;N++)O+=" ";return O},u=function E(P){for(var O="",N=0;N<P.length;N++){var X=P[N],L=typeof X=="string"?X:E(X);O+=L}return O},o=function E(P,O){var N="",X,L=1e5;O||(O=0);for(var ae=0;ae<P.length;ae++){var K=P[ae];if(typeof K!="string"){var G=E(K,O+1);G.length<10*(i-t*O)&&G.indexOf('"""')<0&&(X=u(K),X.length<i-t*O&&(K="   "+X,G="")),G&&(L=1e4),N+=G}typeof K=="string"&&(L<t*O+4?(N=N.slice(0,-1)+" "+K+`
`,L+=K.length+1):(X=a(t*O)+K,N+=X+`
`,L=X.length))}return N};function f(E){this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#");for(var P=this.rootSubjects(E),O=P.roots,N=[],X=0;X<O.length;X++){var L=O[X];N.push(k(L,P))}return N}var h=f.bind(this);function d(E){return typeof E>"u"?"@@@undefined@@@@":E.replace(/[&<"]/g,function(P){switch(P[0]){case"&":return"&amp;";case"<":return"&lt;";case'"':return"&quot;"}})}function c(E){return d(this.base?Ll(this.base,E.uri):E.uri)}var _=c.bind(this);function w(E,P){var O=[],N,X,L,ae,K=P.subjects[this.toStr(E)];if(typeof K>"u")return S(E,P);K.sort(function(ue,Pe){var He=ue.predicate.uri,be=Pe.predicate.uri;if(He.substring(0,l.length)===l||be.substring(0,l.length)===l)return He.localeCompare(be);var De=He.substring(l.length),_e=be.substring(l.length),Te=parseInt(De,10),lt=parseInt(_e,10);return isNaN(Te)||isNaN(lt)||Te!==De||lt!==_e?He.localeCompare(be):Te-lt});for(var G=0;G<K.length;G++){if(L=K[G],L.predicate.uri==="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"&&!N&&L.object.termType==="NamedNode"){N=L.object;continue}if(ae=L.predicate,ae.uri.substr(0,l.length)===l){var $=ae.uri.substr(l.length),J=parseInt($,10);$===J.toString()&&(ae=this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#li"))}switch(X=b(ae),L.object.termType){case"BlankNode":P.incoming[L.object].length===1?O=O.concat(["<"+X+' rdf:parseType="Resource">',k(L.object,P),"</"+X+">"]):O=O.concat(["<"+X+' rdf:nodeID="'+L.object.toNT().slice(2)+'"/>']);break;case"NamedNode":O=O.concat(["<"+X+' rdf:resource="'+_(L.object)+'"/>']);break;case"Literal":O=O.concat(["<"+X+(L.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+d(L.object.datatype.uri)+'"')+(L.object.language?' xml:lang="'+L.object.language+'"':"")+">"+d(L.object.value)+"</"+X+">"]);break;case"Collection":O=O.concat(["<"+X+' rdf:parseType="Collection">',C(L.object,P),"</"+X+">"]);break;default:throw new Error("Can't serialize object of type "+L.object.termType+" into XML")}}var ne=N?b(N):"rdf:Description",z="";return E.termType==="BlankNode"?(!P.incoming[E]||P.incoming[E].length!==1)&&(z=' rdf:nodeID="'+E.toNT().slice(2)+'"'):z=' rdf:about="'+_(E)+'"',["<"+ne+z+">"].concat([O]).concat(["</"+ne+">"])}var k=w.bind(this);function C(E,P){for(var O=[],N=0;N<E.elements.length;N++)O.push(k(E.elements[N],P));return O}function j(E,P){var O=[],N=P.subjects[this.toStr(E)];if(!N)return O;N.sort();for(var X=0;X<N.length;X++){var L=N[X];switch(L.object.termType){case"BlankNode":P.rootsHash[L.object.toNT()]?O=O.concat(["<"+b(L.predicate)+' rdf:nodeID="'+L.object.toNT().slice(2)+'">',"</"+b(L.predicate)+">"]):O=O.concat(["<"+b(L.predicate)+' rdf:parseType="Resource">',S(L.object,P),"</"+b(L.predicate)+">"]);break;case"NamedNode":O=O.concat(["<"+b(L.predicate)+' rdf:resource="'+_(L.object)+'"/>']);break;case"Literal":O=O.concat(["<"+b(L.predicate)+(L.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+d(L.object.datatype.value)+'"')+(L.object.language?' xml:lang="'+L.object.language+'"':"")+">"+d(L.object.value)+"</"+b(L.predicate)+">"]);break;case"Collection":O=O.concat(["<"+b(L.predicate)+' rdf:parseType="Collection">',C(L.object,P),"</"+b(L.predicate)+">"]);break;default:throw new Error("Can't serialize object of type "+L.object.termType+" into XML")}}return O}var S=j.bind(this);function F(E){var P=E.uri,O=P.indexOf("#");if(O<0&&this.flags.indexOf("/")<0&&(O=P.lastIndexOf("/")),O<0)throw new Error("Cannot make qname out of <"+P+">");for(var N=O+1;N<P.length;N++)if(this._notNameChars.indexOf(P[N])>=0)throw new Error('Invalid character "'+P[N]+'" cannot be in XML qname for URI: '+P);var X=P.slice(O+1),L=P.slice(0,O+1);if(this.defaultNamespace&&this.defaultNamespace===L&&this.flags.indexOf("d")<0)return X;var ae=this.prefixes[L];return ae||(ae=this.makeUpPrefix(L)),s[L]=!0,ae+":"+X}var b=F.bind(this),y=h(e),v="<rdf:RDF";this.defaultNamespace&&(v+=' xmlns="'+d(this.defaultNamespace)+'"');for(var B in s)if(s.hasOwnProperty(B)){var T=this.base&&this.flags.includes("z")?Ll(this.base,B):B;v+=`
 xmlns:`+this.prefixes[B]+'="'+d(T)+'"'}v+=">";var U=[v,y,"</rdf:RDF>"];return o(U,-1)}},{key:"statementsToJsonld",value:function(e){var t=this.statementsToN3(e),i=n1.parse(t);return JSON.stringify(i,null,2)}}])}();function s1(n){return encodeURI(n)}function a1(n){for(var r="",e,t=0;t<n.length;t++)e=n.charCodeAt(t),e>65535?r+="\\U"+("00000000"+e.toString(16)).slice(-8):e>126?r+="\\u"+("0000"+e.toString(16)).slice(-4):r+=n[t];return r}function vi(n,r,e,t,i,s){e=e||(n==null?void 0:n.value);var l=s||{};t=t||vn;var a=void 0;try{var u=i1(r);l.flags&&u.setFlags(l.flags);var o=r.statementsMatching(void 0,void 0,void 0,n);switch("namespaces"in r&&u.suggestNamespaces(r.namespaces),l.namespaces&&u.setNamespaces(l.namespaces),u.setBase(e),t){case hi:return a=u.statementsToXML(o),f(null,a);case xc:case t0:return a=u.statementsToN3(o),f(null,a);case vn:case l0:return u.setFlags("si"),a=u.statementsToN3(o),f(null,a);case r0:return u.setFlags("deinprstux"),a=u.statementsToNTriples(o),f(null,a);case ts:return u.setFlags("si dr"),a=u.statementsToJsonld(o),f(null,a);case ns:case rs:return u.setFlags("deinprstux q"),a=u.statementsToNTriples(o),f(null,a);default:throw new Error("Serialize: Content-type "+t+" not supported for data write.")}}catch(h){if(i)return i(h,void 0);throw h}function f(h,d){if(i){i(h,d);return}else return d}}var u1=["blankNode","defaultGraph","literal","namedNode","quad","variable","supports"],Qi={first:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",rest:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",nil:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};function Od(n,r,e){var t=[];return e.reduce(function(i,s,l,a){t.push(n.quad(i,n.namedNode(Qi.first),a[l]));var u;return l<a.length-1?(u=n.blankNode(),t.push(n.quad(i,n.namedNode(Qi.rest),u))):t.push(n.quad(i,n.namedNode(Qi.rest),n.namedNode(Qi.nil))),u},r),t}function pr(n,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=n.length;for(e<0&&(e=t+e);e<t;e++)if(n[e]===r)return e;return-1}function o1(n,r){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=f1(n))||r){e&&(n=e);var t=0,i=function(){};return{s:i,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(o){throw o},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,l=!1,a;return{s:function(){e=e.call(n)},n:function(){var o=e.next();return s=o.done,o},e:function(o){l=!0,a=o},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(l)throw a}}}}function f1(n,r){if(n){if(typeof n=="string")return yu(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return yu(n,r)}}function yu(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}function c1(n,r,e){return r=Mt(r),Jr(n,Ld()?Reflect.construct(r,e||[],Mt(n).constructor):r.apply(n,e))}function Ld(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ld=function(){return!!n})()}var Ud=function(n){function r(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};Nt(this,r),e=c1(this,r,[""]),e.statements=t,e.constraints=i,e.initBindings=s,e.optional=l,Se(e,"termType",wi),Se(e,"classOrder",Br.Graph),Se(e,"fetcher",void 0),Se(e,"isVar",0),Se(e,"ns",Zt),Se(e,"rdfFactory",void 0),e.rdfFactory=a&&a.rdfFactory||vr;var u=o1(u1),o;try{var f=function(){var d=o.value;e[d]=function(){var c;return(c=e.rdfFactory)[d].apply(c,arguments)}};for(u.s();!(o=u.n()).done;)f()}catch(h){u.e(h)}finally{u.f()}return e}return $t(r,n),Ct(r,[{key:"add",value:function(t,i,s,l){var a=this;return arguments.length===1&&t.forEach(function(u){return a.add(u.subject,u.predicate,u.object,u.graph)}),this.statements.push(this.rdfFactory.quad(t,i,s,l))}},{key:"addStatement",value:function(t){return this.add(t)}},{key:"bnode",value:function(t){return this.rdfFactory.blankNode(t)}},{key:"addAll",value:function(t){var i=this;t.forEach(function(s){i.add(s.subject,s.predicate,s.object,s.graph)})}},{key:"any",value:function(t,i,s,l){var a=this.anyStatementMatching(t,i,s,l);return a==null?null:t==null?a.subject:i==null?a.predicate:s==null?a.object:null}},{key:"anyValue",value:function(t,i,s,l){var a=this.any(t,i,s,l);return a?a.value:void 0}},{key:"anyJS",value:function(t,i,s,l){var a=this.any(t,i,s,l);return a?Dt.toJS(a):void 0}},{key:"anyStatementMatching",value:function(t,i,s,l){var a=this.statementsMatching(t,i,s,l,!0);if(!(!a||a.length===0))return a[0]}},{key:"id",value:function(t){return this.rdfFactory.id(t)}},{key:"statementsMatching",value:function(t,i,s,l,a){var u=this.statements.filter(function(o){return(!t||t.equals(o.subject))&&(!i||i.equals(o.predicate))&&(!s||s.equals(o.object))&&(!l||l.equals(o.graph))});return a?u.length===0?[]:[u[0]]:u}},{key:"bottomTypeURIs",value:function(t){var i,s,l,a,u,o,f,h;i=[];for(var d in t)if(t.hasOwnProperty(d)){for(h=t[d],f=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),this.rdfFactory.namedNode(d)),s=!0,a=0,u=f.length;a<u;a++)if(l=f[a],o=l.uri,o in t){s=!1;break}s&&(i[d]=h)}return i}},{key:"collection",value:function(){return new tn}},{key:"each",value:function(t,i,s,l){var a=[],u=this.statementsMatching(t,i,s,l,!1);if(t==null)for(var o=0,f=u.length;o<f;o++)a.push(u[o].subject);else if(i==null)for(var h=0,d=u.length;h<d;h++)a.push(u[h].predicate);else if(s==null)for(var c=0,_=u.length;c<_;c++)a.push(u[c].object);else if(l==null)for(var w=0,k=u.length;w<k;w++)a.push(new Gt(u[w].graph.value));return a}},{key:"equals",value:function(t){return t?this.hashString()===t.hashString():!1}},{key:"findMembersNT",value:function(t){var i,s,l,a,u,o,f,h,d,c,_,w,k,C;w={},w[t.toNT()]=!0,a={},o=this.transitiveClosure(w,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0);for(var j in o)if(o.hasOwnProperty(j)){f=this.statementsMatching(void 0,this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.fromNT(j));for(var S=0,F=f.length;S<F;S++)k=f[S],a[k.subject.toNT()]=k;h=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"),this.fromNT(j));for(var b=0,y=h.length;b<y;b++)for(u=h[b],d=this.statementsMatching(void 0,u),l=0,i=d.length;l<i;l++)k=d[l],a[k.subject.toNT()]=k;c=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"),this.fromNT(j));for(var v=0,B=c.length;v<B;v++)for(u=c[v],_=this.statementsMatching(void 0,u),C=0,s=_.length;C<s;C++)k=_[C],a[k.object.toNT()]=k}return a}},{key:"findMemberURIs",value:function(t){return this.NTtoURI(this.findMembersNT(t))}},{key:"findSubClassesNT",value:function(t){var i={};return i[t.toNT()]=!0,this.transitiveClosure(i,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0)}},{key:"findSuperClassesNT",value:function(t){var i={};return i[t.toNT()]=!0,this.transitiveClosure(i,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}},{key:"findTypesNT",value:function(t){var i,s,l,a,u,o,f,h,d;l="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",d=[],a=this.statementsMatching(t,void 0,void 0);for(var c=0,_=a.length;c<_;c++)if(h=a[c],h.predicate.uri===l)d[h.object.toNT()]=h;else{u=this.each(h.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"));for(var w=0,k=u.length;w<k;w++)s=u[w],d[s.toNT()]=h}o=this.statementsMatching(void 0,void 0,t);for(var C=0,j=o.length;C<j;C++){h=o[C],f=this.each(h.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"));for(var S=0,F=f.length;S<F;S++)i=f[S],d[i.toNT()]=h}return this.transitiveClosure(d,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}},{key:"findTypeURIs",value:function(t){return this.NTtoURI(this.findTypesNT(t))}},{key:"connectedStatements",value:function(t,i,s){s=s||[];for(var l=[t],a={},u={},o=[],f=this,h=function(c){var _=function(C){C.termType==="BlankNode"&&!a[C.value]&&(a[C.value]=!0,l.push(C))},w=f.statementsMatching(null,null,c,i).concat(f.statementsMatching(c,null,null,i));w=w.filter(function(k){if(s[k.predicate.value])return!1;var C=k.toNT();return u[C]?!1:(u[C]=!0,!0)}),w.forEach(function(k){_(k.subject),_(k.object)}),o=o.concat(w)};l.length;)h(l.shift());return o}},{key:"formula",value:function(t){return new r}},{key:"fromNT",value:function(t){var i,s,l;switch(t[0]){case"<":return this.sym(t.slice(1,-1));case'"':if(l=void 0,i=void 0,s=t.lastIndexOf('"'),s<t.length-1)if(t[s+1]==="@")l=t.slice(s+2);else if(t.slice(s+1,s+3)==="^^")i=this.fromNT(t.slice(s+3));else throw new Error("Can't convert string from NT: "+t);return t=t.slice(1,s),t=t.replace(/\\"/g,'"'),t=t.replace(/\\n/g,`
`),t=t.replace(/\\\\/g,"\\"),this.rdfFactory.literal(t,l||i);case"_":return this.rdfFactory.blankNode(t.slice(2));case"?":return new En(t.slice(1))}throw new Error("Can't convert from NT: "+t)}},{key:"holds",value:function(t,i,s,l){var a;if(arguments.length===1){if(!t)return!0;if(t instanceof Array){for(a=0;a<t.length;a++)if(!this.holds(t[a]))return!1;return!0}else{if(a0(t))return this.holds(t.subject,t.predicate,t.object,t.graph);if(t.statements)return this.holds(t.statements)}}var u=this.anyStatementMatching(t,i,s,l);return u!=null}},{key:"holdsStatement",value:function(t){return this.holds(t.subject,t.predicate,t.object,t.graph)}},{key:"list",value:function(t,i){if(i.rdfFactory.supports.COLLECTIONS){var s=i.rdfFactory.collection();return t.forEach(function(u){s.append(u)}),s}else{var l=i.rdfFactory.blankNode(),a=Od(i.rdfFactory,l,t);return i.addAll(a),l}}},{key:"NTtoURI",value:function(t){var i,s,l={};for(i in t)t.hasOwnProperty(i)&&(s=t[i],i[0]==="<"&&(l[i.slice(1,-1)]=s));return l}},{key:"serialize",value:function(t,i,s,l){return vi(s,this,t,i,void 0,l)}},{key:"substitute",value:function(t){var i=this.statements.map(function(l){return l.substitute(t)}),s=new r;return s.addAll(i),s}},{key:"sym",value:function(t,i){if(i)throw new Error("This feature (kb.sym with 2 args) is removed. Do not assume prefix mappings.");return this.rdfFactory.namedNode(t)}},{key:"the",value:function(t,i,s,l){var a=this.any(t,i,s,l);return a}},{key:"transitiveClosure",value:function(t,i,s){var l,a,u,o,f,h,d={};Object.assign(d,t);for(var c={};;){if(h=function(){for(var _ in d)if(d.hasOwnProperty(_))return _}(),h==null)return c;for(f=s?this.each(void 0,i,this.fromNT(h)):this.each(this.fromNT(h),i),a=0,u=f.length;a<u;a++)l=f[a],o=l.toNT(),!(o in c)&&(o in d||(d[o]=d[h]));c[h]=d[h],delete d[h]}}},{key:"topTypeURIs",value:function(t){var i,s,l,a,u,o,f,h;f=[];for(l in t)if(t.hasOwnProperty(l)){for(h=t[l],u=0,o=this.each(this.rdfFactory.namedNode(l),this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf")),i=0,a=o.length;i<a;i++)if(s=o[i],s.uri!=="http://www.w3.org/2000/01/rdf-schema#Resource"){u++;break}u||(f[l]=h)}return f["http://www.w3.org/2000/01/rdf-schema#Resource"]&&delete f["http://www.w3.org/2000/01/rdf-schema#Resource"],f["http://www.w3.org/2002/07/owl#Thing"]&&delete f["http://www.w3.org/2002/07/owl#Thing"],f}},{key:"toString",value:function(){return"{"+this.statements.join(`
`)+"}"}},{key:"variable",value:function(t){return new En(t)}},{key:"whether",value:function(t,i,s,l){return this.statementsMatching(t,i,s,l,!1).length}}])}(Dt);Dt.fromValue=Jc;var Sn={xsd:Zt("http://www.w3.org/2001/XMLSchema#")};Dt.toJS=function(n){return vs(n)?n.elements.map(Dt.toJS):Gc(n)?n.datatype.equals(Sn.xsd("boolean"))?n.value==="1"||n.value==="true":n.datatype.equals(Sn.xsd("dateTime"))||n.datatype.equals(Sn.xsd("date"))?new Date(n.value):n.datatype.equals(Sn.xsd("integer"))||n.datatype.equals(Sn.xsd("float"))||n.datatype.equals(Sn.xsd("decimal"))?Number(n.value):n.value:n};var d1=Ct(function n(r,e){Nt(this,n),this.pat=new Ai,this.vars=[],this.name=r,this.id=e});function ku(n,r,e,t){function i(b){var y="",v;for(v in b)b.hasOwnProperty(v)&&(y+="    "+v+" -> "+b[v]);return y}function s(b){var y="Bindings: ",v,B=b.length;for(v=0;v<B;v++)y+=i(b[v][0])+`;
	`;return y}function l(b,y,v,B){var T=v[b];if(T===void 0){if(b.isVar){var U=[];return U[b]=y,[[U,null]]}T=b}if(!T.complexType)return B.redirections[T]&&(T=B.redirections[T]),B.redirections[y]&&(y=B.redirections[y]),T.equals(y)||T.uri&&T.uri===_i?[[[],null]]:[];if(b instanceof Array)return y instanceof Array?a(b,y,v):[];throw new Error("query.js: oops - code not written yet")}function a(b,y,v,B){var T;if(b.length!==y.length)return[];if(!b.length)return[[[],null]];var U=l(b[0],y[0],v,B);if(U.length===0)return U;var E=[],P,O=U.length,N,X,L,ae,K,G;for(P=0;P<O;P++){N=U[P][0],G=[];for(ae in N)N.hasOwnProperty(ae)&&(G[ae]=N[ae]);for(ae in v)v.hasOwnProperty(ae)&&(G[ae]=v[ae]);for(T=a(b.slice(1),y.slice(1),G,B),L=T.length,X=0;X<L;X++){K=T[X][0];for(ae in N)N.hasOwnProperty(ae)&&(K[ae]=N[ae]);E.push([K,null])}}return E}function u(b,y){var v=y[b];return v===void 0?b:v}function o(b,y){var v={},B;for(B in b)b.hasOwnProperty(B)&&(v[B]=b[B]);for(B in y)y.hasOwnProperty(B)&&(v[B]=y[B]);return v}function f(b,y){return this.trunkBindings=y,this.originalCallback=b,this.branches=[],this}f.prototype.checkAllDone=function(){var b;for(b=0;b<this.branches.length;b++)if(!this.branches[b].done)return;this.doCallBacks(this.branches.length-1,this.trunkBindings)},f.prototype.doCallBacks=function(b,y){var v;if(b<0)return this.originalCallback(y);for(v=0;v<this.branches[b].results.length;v++)this.doCallBacks(b-1,o(y,this.branches[b].results[v]))};function h(b,y){return this.count=0,this.success=!1,this.done=!1,this.callback=b,this.onDone=y,this}h.prototype.reportMatch=function(b){this.callback(b),this.success=!0},h.prototype.reportDone=function(){this.done=!0,this.onDone!==void 0&&this.onDone()};var d=function(y){return this.count=0,this.done=!1,this.results=[],this.junction=y,y.branches.push(this),this};d.prototype.reportMatch=function(b){this.results.push(b)},d.prototype.reportDone=function(){Nr.debug("Optional branch finished - results.length = "+this.results.length),this.results.length===0&&this.results.push({}),this.done=!0,this.junction.checkAllDone()};function c(b,y,v){var B,T,U,E;for(y.nvars=0,y.index=null,B=[y.subject,y.predicate,y.object,y.why],E=[b.subjectIndex,b.predicateIndex,b.objectIndex,b.whyIndex],U=0;U<4;U++){var P=B[U];if(!(P.uri&&P.uri===_i))if(P.isVar&&v[P]===void 0)y.nvars++;else{if(P=u(B[U],v),b.redirections[b.id(P)]&&(P=b.redirections[b.id(P)]),T=E[U][b.id(P)],!T)return y.index=[],!1;(y.index===null||y.index.length>T.length)&&(y.index=T)}}return y.index===null&&(y.index=b.statements),!0}function _(b,y){return b.nvars!==y.nvars?b.nvars-y.nvars:b.index.length-y.index.length}var w=0,k=function b(y,v,B,T,U,E,P){Nr.debug("Match begins, Branch count now: "+P.count+" for "+P.pattern_debug);var O=v.statements;if(O.length===0){if(Nr.debug("FOUND MATCH WITH BINDINGS:"+i(B)),v.optional.length===0)P.reportMatch(B);else{Nr.debug("OPTIONAL: "+v.optional);var N=new f(r,B),X=[],L;for(L=0;L<v.optional.length;L++)X[L]=new d(N),X[L].pattern_debug=v.optional[L];for(L=0;L<v.optional.length;L++)X[L].count=X[L].count+1,b(y,v.optional[L],B,"",U,r,X[L])}P.count--,Nr.debug("Match ends -- success , Branch count now: "+P.count+" for "+P.pattern_debug);return}var ae,K,G=O.length;if(U){var $="match"+w++,J=function(z,ue){var Pe=z.uri.split("#")[0];U.nowOrWhenFetched(Pe,void 0,function(He,be,De){He||console.log("Error following link to <"+z.uri+"> in query: "+be),b(y,v,B,T,U,E,P)})};for(K=0;K<G;K++){if(ae=O[K],B[ae.subject]!==void 0&&B[ae.subject].uri&&U&&U.getState(Pn(B[ae.subject].uri))==="unrequested"){J(B[ae.subject],$);return}if(B[ae.object]!==void 0&&B[ae.object].uri&&U&&U.getState(Pn(B[ae.object].uri))==="unrequested"){J(B[ae.object],$);return}}}j(y,v,B,T,U,E,P)},C=function(y,v){var B=!0,T,U;for(T in y)y.hasOwnProperty(T)&&v[T]&&(U=v[T].test,U&&!U(y[T])&&(B=!1));return B},j=function(y,v,B,T,U,E,P){var O=v.statements,N=O.length,X,L,ae,K,G,$,J;for(X=0;X<N;X++)J=O[X],c(y,J,B);O.sort(_),J=O[0];var ne=y.formula();ne.optional=v.optional,ne.constraints=v.constraints,ne.statements=O.slice(1),Nr.debug(T+"match2 searching "+J.index.length+" for "+J+"; bindings so far="+i(B));var z,ue=J.index.length,Pe,He;for(z=0;z<ue;z++)for(He=J.index[z],Pe=a([J.subject,J.predicate,J.object,J.why],[He.subject,He.predicate,He.object,He.why],B,y),Nr.info(T+" From first: "+Pe.length+": "+s(Pe)),ae=Pe.length,L=0;L<ae;L++)if(G=[],$=Pe[L][0],!C($,v.constraints))Nr.debug("Branch count CS: "+P.count);else{for(K in $)$.hasOwnProperty(K)&&(G[K]=$[K]);for(K in B)B.hasOwnProperty(K)&&(G[K]=B[K]);P.count++,k(y,ne,G,T+"  ",U,E,P)}P.count--,Nr.debug("Match2 ends, Branch count: "+P.count+" for "+P.pattern_debug),P.count===0&&P.reportDone()},S=this;Nr.debug("Query on "+this.statements.length);var F=new h(r,t);F.count++,n.sync?k(S,n.pat,n.pat.initBindings,"",e,r,F):setTimeout(function(){k(S,n.pat,n.pat.initBindings,"",e,r,F)},0)}function Eu(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,t)}return e}function ii(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Eu(Object(e),!0).forEach(function(t){Se(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Eu(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function h1(n,r){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=_1(n))||r){e&&(n=e);var t=0,i=function(){};return{s:i,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(o){throw o},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,l=!1,a;return{s:function(){e=e.call(n)},n:function(){var o=e.next();return s=o.done,o},e:function(o){l=!0,a=o},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(l)throw a}}}}function _1(n,r){if(n){if(typeof n=="string")return Du(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Du(n,r)}}function Du(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}function p1(n,r,e){return r=Mt(r),Jr(n,Pd()?Reflect.construct(r,e||[],Mt(n).constructor):r.apply(n,e))}function Pd(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Pd=function(){return!!n})()}var Ml="http://www.w3.org/2002/07/owl#";function g1(n,r,e,t){var i=n.any(r,e,void 0);return i?(n.equate(i,t),!0):!1}function m1(n,r,e,t){var i=n.any(void 0,e,t);return i?(n.equate(i,r),!0):!1}function Md(n,r,e,t,i){n.typeCallback&&n.typeCallback(n,t,i);var s=n.classActions[n.id(t)],l=!1;if(s)for(var a=0;a<s.length;a++)l=l||s[a](n,r,e,t,i);return l}var Ai=function(n){function r(e){var t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Nt(this,r),t=p1(this,r,[void 0,void 0,void 0,void 0,i]),Se(t,"updater",void 0),Se(t,"namespaces",void 0),Se(t,"classActions",void 0),Se(t,"propertyActions",void 0),Se(t,"redirections",void 0),Se(t,"aliases",void 0),Se(t,"HTTPRedirects",void 0),Se(t,"subjectIndex",void 0),Se(t,"predicateIndex",void 0),Se(t,"objectIndex",void 0),Se(t,"whyIndex",void 0),Se(t,"index",void 0),Se(t,"features",void 0),Se(t,"_universalVariables",void 0),Se(t,"_existentialVariables",void 0),Se(t,"rdfArrayRemove",void 0),Se(t,"dataCallbacks",void 0),t.propertyActions={},t.classActions={},t.redirections=[],t.aliases=[],t.HTTPRedirects=[],t.subjectIndex=[],t.predicateIndex=[],t.objectIndex=[],t.whyIndex=[],t.index=[t.subjectIndex,t.predicateIndex,t.objectIndex,t.whyIndex],t.namespaces={},t.features=e||[],t.rdfArrayRemove=i.rdfArrayRemove||e1,i.dataCallback&&(t.dataCallbacks=[i.dataCallback]),t.initPropertyActions(t.features),t}return $t(r,n),Ct(r,[{key:"substitute",value:function(t){var i=this.statements.map(function(l){return l.substitute(t)}),s=new r;return s.add(i),s}},{key:"addDataCallback",value:function(t){this.dataCallbacks||(this.dataCallbacks=[]),this.dataCallbacks.push(t)}},{key:"applyPatch",value:function(t,i,s){var l=this,a,u=null;function o(d){if(t.delete){a=t.delete,u&&(a=a.substitute(u)),a=a.statements;var c=[],_=a.map(function(w){var k=l.statementsMatching(w.subject,w.predicate,w.object,i);return k.length===0?(c.push(w),null):k[0]});if(c.length)return s("Could not find to delete: "+c.join(`
 or `));_.map(function(w){l.remove(w)})}t.insert&&(a=t.insert,u&&(a=a.substitute(u)),a=a.statements,a.map(function(w){w.graph=i,l.add(w.subject,w.predicate,w.object,w.graph)})),d()}if(t.where){var f=new d1("patch");f.pat=t.where,f.pat.statements.map(function(d){d.graph=rh(i.value)}),f.sync=!0;var h=[];l.query(f,function(c){h.push(c)},l.fetcher,function(){if(h.length===0)return s("No match found to be patched:"+t.where);if(h.length>1)return s("Patch ambiguous. No patch done.");u=h[0],o(s)})}else o(s)}},{key:"declareExistential",value:function(t){return this._existentialVariables||(this._existentialVariables=[]),this._existentialVariables.push(t),t}},{key:"initPropertyActions",value:function(t){this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"))]=[Md],pr(t,"sameAs")>=0&&(this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode("".concat(Ml,"sameAs")))]=[function(i,s,l,a,u){return i.equate(s,a),!0}]),pr(t,"InverseFunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode("".concat(Ml,"InverseFunctionalProperty")))]=[function(i,s,l,a,u){return i.newPropertyAction(s,m1)}]),pr(t,"FunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode("".concat(Ml,"FunctionalProperty")))]=[function(i,s,l,a,u){return i.newPropertyAction(s,g1)}])}},{key:"addStatement",value:function(t){return this.add(t.subject,t.predicate,t.object,t.graph),this.statements.length}},{key:"add",value:function(t,i,s,l){var a;if(arguments.length===1){if(t instanceof Array)for(a=0;a<t.length;a++)this.add(t[a]);else Ln(t)?this.add(t.subject,t.predicate,t.object,t.graph):Za(t)&&this.add(t.statements);return this}var u,o;l||(l=this.fetcher?this.fetcher.appNode:this.rdfFactory.defaultGraph()),typeof t=="string"&&(t=this.rdfFactory.namedNode(t)),i=Dt.fromValue(i);var f=Dt.fromValue(s);if(l=Dt.fromValue(l),!o0(t))throw new Error("Subject is not a subject type");if(!f0(i))throw new Error("Predicate ".concat(i," is not a predicate type"));if(!u0(f))throw new Error("Object ".concat(f," is not an object type"));if(!d0(l))throw new Error("Why is not a graph type");this.predicateCallback&&this.predicateCallback(this,i,l);var h=this.id(this.canon(i));u=this.propertyActions[h];var d=!1;if(u)for(a=0;a<u.length;a++)d=d||u[a](this,t,i,f,l);if(this.holds(t,i,f,l))return null;var c=[this.id(this.canon(t)),h,this.id(this.canon(f)),this.id(this.canon(l))];for(o=this.rdfFactory.quad(t,i,f,l),a=0;a<4;a++){var _=this.index[a],w=c[a];_[w]||(_[w]=[]),_[w].push(o)}if(this.statements.push(o),this.dataCallbacks){var k=h1(this.dataCallbacks),C;try{for(k.s();!(C=k.n()).done;){var j=C.value;j(o)}}catch(S){k.e(S)}finally{k.f()}}return o}},{key:"canon",value:function(t){if(!t)return t;var i=this.redirections[this.id(t)];if(i)return i;switch(t.termType){case Tn:return new Or(t.value);case an:return t;case kn:return new bs;case zc:return t;case wi:return t;case Wn:return new Fr(t.value,t.language,t.datatype);case An:return new Gt(t.value);case sn:return new En(t.value);default:throw new Error("Term Type not recognized for canonization: ".concat(t.termType))}}},{key:"check",value:function(){this.checkStatementList(this.statements);for(var t=0;t<4;t++){var i=this.index[t];for(var s in i)i.hasOwnProperty(s)&&this.checkStatementList(i[s],t)}}},{key:"checkStatementList",value:function(t,i){i===void 0&&(i=0);for(var s=["subject","predicate","object","why"],l=" found in "+s[i]+" index.",a,u=0;u<t.length;u++){a=t[u];for(var o=[a.subject,a.predicate,a.object,a.graph],f=function(w,k){for(var C=0;C<w.length;C++)if(w[C].subject.equals(k.subject)&&w[C].predicate.equals(k.predicate)&&w[C].object.equals(k.object)&&w[C].why.equals(k.graph))return!0},h=0;h<4;h++){var d=this.canon(o[h]),c=this.id(d);this.index[h][c]&&f(this.index[h][c],a)}if(!f(this.statements,a))throw new Error("Statement list does not statement "+a+"@"+a.graph+l)}}},{key:"close",value:function(){return this}},{key:"compareTerms",value:function(t,i){return Object.prototype.hasOwnProperty.call(t,"compareTerm")?t.compareTerm(i):Br[t.termType]<Br[i.termType]?-1:Br[t.termType]>Br[i.termType]?1:t.value<i.value?-1:t.value>i.value?1:0}},{key:"copyTo",value:function(t,i,s){s||(s=[]);var l=this.statementsMatching(t);pr(s,"two-direction")!==-1&&l.concat(this.statementsMatching(void 0,void 0,t));for(var a=0;a<l.length;a++){var u=l[a];switch(u.object.termType){case"NamedNode":this.add(i,u.predicate,u.object);break;case"Literal":case"BlankNode":case"Collection":this.add(i,u.predicate,u.object.copy(this))}pr(s,"delete")!==-1&&this.remove(u)}}},{key:"equate",value:function(t,i){var s=this.canon(t),l=this.canon(i),a=this.compareTerms(s,l);return a?a<0?this.replaceWith(l,s):this.replaceWith(s,l):!0}},{key:"formula",value:function(t){return new r(t)}},{key:"length",get:function(){return this.statements.length}},{key:"match",value:function(t,i,s,l){return this.statementsMatching(Dt.fromValue(t),Dt.fromValue(i),Dt.fromValue(s),Dt.fromValue(l))}},{key:"mentionsURI",value:function(t){var i="<"+t+">";return!!this.subjectIndex[i]||!!this.objectIndex[i]||!!this.predicateIndex[i]}},{key:"newExistential",value:function(t){if(!t)return this.bnode();var i=this.sym(t);return this.declareExistential(i)}},{key:"newPropertyAction",value:function(t,i){var s=this.id(t);this.propertyActions[s]||(this.propertyActions[s]=[]),this.propertyActions[s].push(i);for(var l=this.statementsMatching(void 0,t,void 0),a=!1,u=0;u<l.length;u++)a=a||i(this,l[u].subject,t,l[u].object);return a}},{key:"newUniversal",value:function(t){var i=this.sym(t);return this._universalVariables||(this._universalVariables=[]),this._universalVariables.push(i),i}},{key:"variable",value:function(t){return new En(t)}},{key:"nextSymbol",value:function(t){for(var i=0;;i++){var s=t.value+"#n"+i;if(!this.mentionsURI(s))return this.sym(s)}}},{key:"query",value:function(t,i,s,l){return ku.call(this,t,i,s,l)}},{key:"querySync",value:function(t){var i=[];function s(u){i.push(u)}function l(){a=!0}var a=!1;if(t.sync=!0,ku.call(this,t,s,null,l),!a)throw new Error("Sync query should have called done function");return i}},{key:"remove",value:function(t){if(t instanceof Array){for(var i=0;i<t.length;i++)this.remove(t[i]);return this}if(Za(t))return this.remove(t.statements);var s=this.statementsMatching(t.subject,t.predicate,t.object,t.graph);if(!s.length)throw new Error("Statement to be removed is not on store: "+t);return this.removeStatement(s[0]),this}},{key:"removeDocument",value:function(t){this.removeMetadata(t);for(var i=this.statementsMatching(void 0,void 0,void 0,t).slice(),s=0;s<i.length;s++)this.removeStatement(i[s]);return this.removeMatches(t,null,null),this}},{key:"removeMetadata",value:function(t){for(var i=this.sym("chrome://TheCurrentSession"),s="http://www.w3.org/2007/ont/link#",l=this.statementsMatching(void 0,this.sym("".concat(s,"requestedURI")),this.rdfFactory.literal(t.value),i).map(function(c){return c.subject}),a=0;a<l.length;a++){var u=l[a];if(u!=null){var o=void 0,f=this.any(u,this.sym("".concat(s,"status")),null,i);if(f!=null){o=this.statementsMatching(f,this.sym("".concat(s,"status")),null,i).slice();for(var h=0;h<o.length;h++)this.removeStatement(o[h])}var d=this.any(u,this.sym("".concat(s,"response")),null,i);if(d!=null){o=this.statementsMatching(d,null,null,i).slice();for(var h=0;h<o.length;h++)this.removeStatement(o[h])}o=this.statementsMatching(u,null,null,i).slice();for(var h=0;h<o.length;h++)this.removeStatement(o[h])}}return this.removeMatches(this.sym(t.value),null,null,i),this}},{key:"removeMany",value:function(t,i,s,l,a){for(var u=this.statementsMatching(t,i,s,l,!1),o=[],f=0;f<u.length;f++)o.push(u[f]);for(a&&(o=o.slice(0,a)),f=0;f<o.length;f++)this.remove(o[f])}},{key:"removeMatches",value:function(t,i,s,l){return this.removeMany(t,i,s,l),this}},{key:"removeStatement",value:function(t){for(var i=[t.subject,t.predicate,t.object,t.graph],s=0;s<4;s++){var l=this.canon(i[s]),a=this.id(l);this.index[s][a]&&this.rdfArrayRemove(this.index[s][a],t)}return this.rdfArrayRemove(this.statements,t),this}},{key:"removeStatements",value:function(t){for(var i=0;i<t.length;i++)this.remove(t[i]);return this}},{key:"replaceWith",value:function(t,i){for(var s=this.id(t),l=this.id(i),a=function(f){var h=f[s];if(h){var d=f[l];d?f[l]=h.concat(d):f[l]=h,delete f[s]}},u=0;u<4;u++)a(this.index[u]);if(this.redirections[s]=i,t.value){if(this.aliases[l]||(this.aliases[l]=[]),this.aliases[l].push(t),this.aliases[s])for(u=0;u<this.aliases[s].length;u++)this.redirections[this.id(this.aliases[s][u])]=i,this.aliases[l].push(this.aliases[s][u]);this.add(i,this.sym("http://www.w3.org/2007/ont/link#uri"),t),this.fetcher&&this.fetcher.nowKnownAs(t,i)}return a(this.classActions),a(this.propertyActions),!0}},{key:"allAliases",value:function(t){var i=this.aliases[this.id(this.canon(t))]||[];return i.push(this.canon(t)),i}},{key:"sameThings",value:function(t,i){if(t.equals(i))return!0;var s=this.canon(t);if(!s)return!1;var l=this.canon(i);return l?s.value===l.value:!1}},{key:"setPrefixForURI",value:function(t,i){if(!(t==="tab"&&this.namespaces.tab)&&!(t.slice(0,2)==="ns"||t.slice(0,7)==="default")){for(var s in this.namespaces)this.namespaces[s]==i&&delete this.namespaces[s];this.namespaces[t]=i}}},{key:"statementsMatching",value:function(t,i,s,l,a){var u=[t,i,s,l],o=[],f=[],h=[],d,c;for(d=0;d<4;d++)o[d]=this.canon(Dt.fromValue(u[d])),o[d]&&(h.push(d),f[d]=this.id(o[d]));if(h.length===0)return this.statements;if(h.length===1)return d=h[0],c=this.index[d][f[d]],c&&a&&c.length>1&&(c=c.slice(0,1)),c=c||[],c;var _=1e10,w,k;for(k=0;k<h.length;k++){if(d=h[k],c=this.index[d][f[d]],!c)return[];c.length<_&&(_=c.length,w=k)}for(var C=h[w],j=this.index[C][f[C]],S=h.slice(0,w).concat(h.slice(w+1)),F=[],b=["subject","predicate","object","why"],y=0;y<j.length;y++){var v=j[y];for(k=0;k<S.length;k++)if(d=S[k],!this.canon(v[b[d]]).equals(o[d])){v=null;break}if(v!=null&&(F.push(v),a))break}return F}},{key:"uris",value:function(t){var i=this.canon(t),s=this.aliases[this.id(i)];if(!i.value)return[];var l=[i.value];if(s)for(var a=0;a<s.length;a++)l.push(s[a].uri);return l}},{key:"serialize",value:function(t,i,s,l){var a,u=(a=l)!==null&&a!==void 0&&a.namespaces?ii(ii({},this.namespaces),l.namespaces):ii({},this.namespaces);return l=ii(ii({},l||{}),{},{namespaces:u}),vi(s,this,t,i,void 0,l)}}],[{key:"defaultGraphURI",get:function(){return _i}}])}(Ud);Se(Ai,"handleRDFType",void 0);Ai.handleRDFType=Md;function di(n,r){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=v1(n))||r){e&&(n=e);var t=0,i=function(){};return{s:i,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(o){throw o},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,l=!1,a;return{s:function(){e=e.call(n)},n:function(){var o=e.next();return s=o.done,o},e:function(o){l=!0,a=o},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(l)throw a}}}}function v1(n,r){if(n){if(typeof n=="string")return Au(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Au(n,r)}}function Au(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}var mn=Zt("http://www.w3.org/1999/02/22-rdf-syntax-ns#");function b1(n,r,e,t){var i=di(n.statementsMatching(e,null,null,t)),s;try{for(i.s();!(s=i.n()).done;){var l=s.value,a=new bn(r,l.predicate,l.object,t);n.remove(l),n.add(a)}}catch(_){i.e(_)}finally{i.f()}var u=di(n.statementsMatching(null,e,null,t)),o;try{for(u.s();!(o=u.n()).done;){var f=o.value;n.remove(f),n.add(new bn(f.subject,r,f.object,t))}}catch(_){u.e(_)}finally{u.f()}var h=di(n.statementsMatching(null,null,e,t)),d;try{for(h.s();!(d=h.n()).done;){var c=d.value;n.remove(c),n.add(new bn(c.subject,c.predicate,r,t))}}catch(_){h.e(_)}finally{h.f()}}function w1(n,r){var e=mn("nil"),t=di(n.statementsMatching(e,null,null,r)),i;try{for(t.s();!(i=t.n()).done;){var s=i.value;n.remove(s);var l=new tn;n.add(new bn(l,s.predicate,s.object,r))}}catch(h){t.e(h)}finally{t.f()}var a=di(n.statementsMatching(null,null,e,r)),u;try{for(a.s();!(u=a.n()).done;){var o=u.value;if(!o.predicate.sameTerm(mn("rest"))){n.remove(o);var f=new tn;n.add(new bn(o.subject,o.predicate,f,r))}}}catch(h){a.e(h)}finally{a.f()}}function y1(n,r){function e(i,s,l){var a=n.statementsMatching(i,mn("rest"),null,r);if(a.length!==1)throw new Error("Bad list structure: no rest at ".concat(i));var u=n.statementsMatching(i,mn("first"),null,r);if(u.length!==1)throw new Error("Bad list structure: rest but ".concat(u.length," firsts at ").concat(i));var o=u[0].object,f=[o].concat(s),h=l.concat(a).concat(u),d=n.statementsMatching(null,mn("rest"),i,r);if(d.length===0){var c=new tn(f);n.remove(h),b1(n,c,i,r);return}if(d.length!==1)throw new Error("Bad list structure: ".concat(d.length," pres at ").concat(i));var _=d[0].subject;if(_.termType!=="BlankNode")throw new Error("Bad list element node ".concat(_," type: ").concat(_.termType," "));e(_,f,h)}w1(n,r);var t=n.statementsMatching(null,mn("rest"),mn("nil"),r);t.forEach(function(i){if(i.subject.termType!=="BlankNode")throw new Error("Bad list element node ".concat(i.subject," type: ").concat(i.subject.termType," "));e(i.subject,[],[])})}function k1(n){return encodeURI(n)}var E1={encode:function(r){r=r.replace(/\r\n/g,`
`);for(var e="",t=0;t<r.length;t++){var i=r.charCodeAt(t);i<128?e+=String.fromCharCode(i):i>127&&i<2048?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(i&63|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(i&63|128))}return e},decode:function(r){for(var e="",t=0;t<r.length;){var i=r.charCodeAt(t);i<128?(e+=String.fromCharCode(i),t++):i>191&&i<224?(e+=String.fromCharCode((i&31)<<6|r.charCodeAt(t+1)&63),t+=2):(e+=String.fromCharCode((i&15)<<12|(r.charCodeAt(t+1)&63)<<6|r.charCodeAt(t+2)&63),t+=3)}return e}},ql="http://www.w3.org/2000/10/swap/log#",zt=function(r){return r},xt=function(r){return r},li=function(r){if(r.length>0)throw"missing.js: oops nnonempty dict not imp";return[]},dr=function(r){return r.length},jl=function(r,e,t){if(typeof r.slice>"u")throw"@@ mising.js: No .slice function for "+r+" of type "+fr(r);return typeof t>"u"||t==null?r.slice(e):r.slice(e,t)},ui=Error("dummy error stop iteration"),Yi=function(r){return this.last=0,this.li=r,this.next=function(){if(this.last==this.li.length)throw ui;return this.li[this.last++]},this},Vl=function(r,e){return r.indexOf(e)},pn=function(r,e){if(!r)throw e?"python Assertion failed: "+e:"(python) Assertion failed."},D1=function(r){return String.fromCharCode(r)};String.prototype.encode=function(n){if(n!="utf-8")throw"UTF8_converter: can only do utf-8";return E1.encode(this)};String.prototype.decode=function(n){if(n!="utf-8")throw"UTF8_converter: can only do utf-8";return this};var Hl=function(r,e){return gr(e,r)},A1=null,T1="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",Tu="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",Cu="http://www.w3.org/2002/07/owl#sameAs",C1="#",N1="http://www.w3.org/2001/XMLSchema#integer",I1="http://www.w3.org/2001/XMLSchema#double",F1="http://www.w3.org/2001/XMLSchema#decimal",R1="http://www.w3.org/2001/XMLSchema#date",S1="http://www.w3.org/2001/XMLSchema#dateTime",qd=`	\r
 !"#$%&'()*.,+/;<=>?@[\\]^\`{|}~`,gn=qd+":",zl=new RegExp("^([-+]?[0-9]+)(\\.[0-9]+)?(e[-+]?[0-9]+)?","g"),Nu=new RegExp("^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9](T[0-9][0-9]:[0-9][0-9](:[0-9][0-9](\\.[0-9]*)?)?)?Z?"),xl=new RegExp('[\\\\\\r\\n\\"]',"g"),Xl=new RegExp("^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*","g");function Fs(n,r,e,t,i,s,l,a){return new B1(n,r,e,t,i,s,l,a)}var B1=function(){function n(r,e,t,i,s,l,a,u){Nt(this,n),typeof e>"u"&&(e=null),typeof t>"u"&&(t=""),typeof i>"u"&&(i=null),typeof s>"u"&&(s=""),typeof a>"u"&&(a=""),typeof u>"u"&&(u=null),this._bindings=new li([]),this._flags=a,t!=""&&(pn(t.indexOf(":")>=0,"Document URI not absolute: "+t),this._bindings[""]=t+"#"),this._store=r,s&&r.setGenPrefix(s),this._thisDoc=t,this.source=r.sym(t),this.lines=0,this.statementCount=0,this.hasNil=!1,this.startOfLine=0,this.previousLine=0,this._genPrefix=s,this.keywords=new xt(["a","this","bind","has","is","of","true","false"]),this.keywordsSet=0,this._anonymousNodes=new li([]),this._variables=new li([]),this._parentVariables=new li([]),this._reason=u,this._reason2=null,i?this._baseURI=i:t?this._baseURI=t:this._baseURI=null,pn(!this._baseURI||this._baseURI.indexOf(":")>=0),this._genPrefix||(this._thisDoc?this._genPrefix=this._thisDoc+"#_g":this._genPrefix=RDFSink_uniqueURI()),e==null?this._thisDoc?this._formula=r.formula(t+"#_formula"):this._formula=r.formula():this._formula=e,this._context=this._formula,this._parentContext=null}return Ct(n,[{key:"here",value:function(e){return this._genPrefix+"_L"+this.lines+"C"+(e-this.startOfLine+1)}},{key:"formula",value:function(){return this._formula}},{key:"loadStream",value:function(e){return this.loadBuf(e.read())}},{key:"loadBuf",value:function(e){return this.startDoc(),this.feed(e),this.endDoc()}},{key:"feed",value:function(e){for(var t=e.decode("utf-8"),i=0;i>=0;){var s=this.skipSpace(t,i);if(s<0)return;var i=this.directiveOrStatement(t,s);if(i<0)throw Ze(this._thisDoc,this.lines,t,s,"expected directive or statement")}}},{key:"directiveOrStatement",value:function(e,t){var i=this.skipSpace(e,t);if(i<0)return i;var s=this.directive(e,i);if(s>=0)return this.checkDot(e,s);var s=this.statement(e,i);return s>=0?this.checkDot(e,s):s}},{key:"tok",value:function(e,t,i){if(t.slice(i,i+1)=="@")var i=i+1;else if(pr(this.keywords,e)<0)return-1;var s=i+dr(e);return t.slice(i,s)==e&&qd.indexOf(t.charAt(s))>=0?s:-1}},{key:"directive",value:function(e,t){var o=this.skipSpace(e,t);if(o<0)return o;var i=new xt([]),o=this.tok("bind",e,t);if(o>0)throw Ze(this._thisDoc,this.lines,e,t,"keyword bind is obsolete: use @prefix");var o=this.tok("keywords",e,t);if(o>0){var t=this.commaSeparatedList(e,o,i,!1);if(t<0)throw Ze(this._thisDoc,this.lines,e,t,"'@keywords' needs comma separated list of words");return this.setKeywords(jl(i,null,null)),t}var o=this.tok("forAll",e,t);if(o>0){var t=this.commaSeparatedList(e,o,i,!0);if(t<0)throw Ze(this._thisDoc,this.lines,e,t,"Bad variable list after @forAll");var s=new Yi(i);try{for(;;){var l=s.next();(pr(this._variables,l)<0||pr(this._parentVariables,l)>=0)&&(this._variables[l]=this._context.newUniversal(l))}}catch(h){if(h!=ui)throw h}return t}var o=this.tok("forSome",e,t);if(o>0){var t=this.commaSeparatedList(e,o,i,this.uri_ref2);if(t<0)throw Ze(this._thisDoc,this.lines,e,t,"Bad variable list after @forSome");var s=new Yi(i);try{for(;;){var l=s.next();this._context.declareExistential(l)}}catch(d){if(d!=ui)throw d}return t}var o=this.tok("prefix",e,t);if(o>=0){var a=new xt([]),t=this.qname(e,o,a);if(t<0)throw Ze(this._thisDoc,this.lines,e,o,"expected qname after @prefix");var o=this.uri_ref2(e,t,a);if(o<0)throw Ze(this._thisDoc,this.lines,e,t,"expected <uriref> after @prefix _qname_");var u=a[1].uri;if(this._baseURI)var u=Hl(this._baseURI,u);else pn(u.indexOf(":")>=0,"With no base URI, cannot handle relative URI for NS");return pn(u.indexOf(":")>=0),this._bindings[a[0][0]]=u,this.bind(a[0][0],k1(u)),o}var o=this.tok("base",e,t);if(o>=0){var a=new xt([]),t=this.uri_ref2(e,o,a);if(t<0)throw Ze(this._thisDoc,this.lines,e,o,"expected <uri> after @base ");var u=a[0].uri;if(this._baseURI)var u=Hl(this._baseURI,u);else throw Ze(this._thisDoc,this.lines,e,o,"With no previous base URI, cannot use relative URI in @base  <"+u+">");return pn(u.indexOf(":")>=0),this._baseURI=u,t}return-1}},{key:"bind",value:function(e,t){e==""||this._store.setPrefixForURI(e,t)}},{key:"setKeywords",value:function(e){e==null?this.keywordsSet=0:(this.keywords=e,this.keywordsSet=1)}},{key:"startDoc",value:function(){}},{key:"endDoc",value:function(){return this.hasNil&&this._store.rdfFactory.supports.COLLECTIONS&&y1(this._store,this.source),this._formula}},{key:"makeStatement",value:function(e){e[0].add(e[2],e[1],e[3],this.source),(e[2].uri&&e[2].uri===Tu||e[3].uri&&e[3].uri===Tu)&&(this.hasNil=!0),this.statementCount+=1}},{key:"statement",value:function(e,s){var i=new xt([]),s=this.object(e,s,i);if(s<0)return s;var l=this.property_list(e,s,i[0]);if(l<0)throw Ze(this._thisDoc,this.lines,e,s,"expected propertylist");return l}},{key:"subject",value:function(e,t,i){return this.item(e,t,i)}},{key:"verb",value:function(e,t,i){var l=this.skipSpace(e,t);if(l<0)return l;var s=new xt([]),l=this.tok("has",e,t);if(l>=0){var t=this.prop(e,l,s);if(t<0)throw Ze(this._thisDoc,this.lines,e,l,"expected property after 'has'");return i.push(new zt(["->",s[0]])),t}var l=this.tok("is",e,t);if(l>=0){var t=this.prop(e,l,s);if(t<0)throw Ze(this._thisDoc,this.lines,e,l,"expected <property> after 'is'");var l=this.skipSpace(e,t);if(l<0)throw Ze(this._thisDoc,this.lines,e,t,"End of file found, expected property after 'is'");var t=l,l=this.tok("of",e,t);if(l<0)throw Ze(this._thisDoc,this.lines,e,t,"expected 'of' after 'is' <prop>");return i.push(new zt(["<-",s[0]])),l}var l=this.tok("a",e,t);if(l>=0)return i.push(new zt(["->",this._store.sym(T1)])),l;if(e.slice(t,t+2)=="<=")return i.push(new zt(["<-",this._store.sym(ql+"implies")])),t+2;if(e.slice(t,t+1)=="=")return e.slice(t+1,t+2)==">"?(i.push(new zt(["->",this._store.sym(ql+"implies")])),t+2):(i.push(new zt(["->",this._store.sym(Cu)])),t+1);if(e.slice(t,t+2)==":=")return i.push(new zt(["->",ql+"becomes"])),t+2;var l=this.prop(e,t,s);if(l>=0)return i.push(new zt(["->",s[0]])),l;if(e.slice(t,t+2)==">-"||e.slice(t,t+2)=="<-")throw Ze(this._thisDoc,this.lines,e,l,">- ... -> syntax is obsolete.");return-1}},{key:"prop",value:function(e,t,i){return this.item(e,t,i)}},{key:"item",value:function(e,t,i){return this.path(e,t,i)}},{key:"blankNode",value:function(e){return this._context.bnode(e,this._reason2)}},{key:"path",value:function(e,t,i){var s=this.nodeOrLiteral(e,t,i);if(s<0)return s;for(;"!^.".indexOf(e.slice(s,s+1))>=0;){var l=e.slice(s,s+1);if(l=="."){var a=e.slice(s+1,s+2);if(!a||gn.indexOf(a)>=0&&":?<[{(".indexOf(a)<0)break}var u=i.pop(),o=this.blankNode(this.here(s)),s=this.node(e,s+1,i);if(s<0)throw Ze(this._thisDoc,this.lines,e,s,"EOF found in middle of path syntax");var f=i.pop();l=="^"?this.makeStatement(new zt([this._context,f,o,u])):this.makeStatement(new zt([this._context,f,u,o])),i.push(o)}return s}},{key:"anonymousNode",value:function(e){var t=this._anonymousNodes[e];if(t)return t;var t=this._store.bnode(e);return this._anonymousNodes[e]=t,t}},{key:"node",value:function(e,a,i,s){typeof s>"u"&&(s=null);var l=s,y=this.skipSpace(e,a);if(y<0)return y;var a=y,u=e.slice(a,a+1);if(u=="["){var o=this.here(a),y=this.skipSpace(e,a+1);if(y<0)throw Ze(this._thisDoc,this.lines,e,a,"EOF after '['");if(e.slice(y,y+1)=="="){var a=y+1,f=new xt([]),y=this.objectList(e,a,f);if(y>=0){var l=f[0];if(dr(f)>1){var h=new Yi(f);try{for(;;){var d=h.next();this.makeStatement(new zt([this._context,this._store.sym(Cu),l,d]))}}catch(O){if(O!=ui)throw O}}var y=this.skipSpace(e,y);if(y<0)throw Ze(this._thisDoc,this.lines,e,a,"EOF when objectList expected after [ = ");if(e.slice(y,y+1)==";")var y=y+1}else throw Ze(this._thisDoc,this.lines,e,a,"objectList expected after [= ")}if(l==null)var l=this.blankNode(o);var a=this.property_list(e,y,l);if(a<0)throw Ze(this._thisDoc,this.lines,e,y,"property_list expected");var y=this.skipSpace(e,a);if(y<0)throw Ze(this._thisDoc,this.lines,e,a,"EOF when ']' expected after [ <propertyList>");if(e.slice(y,y+1)!="]")throw Ze(this._thisDoc,this.lines,e,y,"']' expected");return i.push(l),y+1}if(u=="{"){var c=e.slice(a+1,a+2);if(c=="$"){a+=1;for(var y=a+1,_=new xt([]),w=!0;;){var a=this.skipSpace(e,y);if(a<0)throw Ze(this._thisDoc,this.lines,e,a,"needed '$}', found end.");if(e.slice(a,a+2)=="$}"){var y=a+2;break}if(w)var w=!1;else if(e.slice(a,a+1)==",")a+=1;else throw Ze(this._thisDoc,this.lines,e,a,"expected: ','");var k=new xt([]),y=this.item(e,a,k);if(y<0)throw Ze(this._thisDoc,this.lines,e,a,"expected item in set or '$}'");_.push(k[0])}return i.push(this._store.newSet(_,this._context)),y}else{var y=a+1,C=this._parentContext;this._parentContext=this._context;var j=this._anonymousNodes,S=this._parentVariables;this._parentVariables=this._variables,this._anonymousNodes=new li([]),this._variables=this._variables.slice();var F=this._reason2;if(this._reason2=A1,l==null)var l=this._store.formula();for(this._context=l;;){var a=this.skipSpace(e,y);if(a<0)throw Ze(this._thisDoc,this.lines,e,a,"needed '}', found end.");if(e.slice(a,a+1)=="}"){var y=a+1;break}var y=this.directiveOrStatement(e,a);if(y<0)throw Ze(this._thisDoc,this.lines,e,a,"expected statement or '}'")}return this._anonymousNodes=j,this._variables=this._parentVariables,this._parentVariables=S,this._context=this._parentContext,this._reason2=F,this._parentContext=C,i.push(l.close()),y}}if(u=="("){var b=this._store.list,c=e.slice(a+1,a+2);if(c=="$"){var b=this._store.newSet;a+=1}for(var y=a+1,_=new xt([]);;){var a=this.skipSpace(e,y);if(a<0)throw Ze(this._thisDoc,this.lines,e,a,"needed ')', found end.");if(e.slice(a,a+1)==")"){var y=a+1;break}var k=new xt([]),y=this.item(e,a,k);if(y<0)throw Ze(this._thisDoc,this.lines,e,a,"expected item in list or ')'");_.push(k[0])}return i.push(b(_,this._context)),y}var y=this.tok("this",e,a);if(y>=0)throw Ze(this._thisDoc,this.lines,e,a,"Keyword 'this' was ancient N3. Now use @forSome and @forAll keywords.");var y=this.tok("true",e,a);if(y>=0)return i.push(!0),y;var y=this.tok("false",e,a);if(y>=0)return i.push(!1),y;if(l==null){var y=this.uri_ref2(e,a,i);if(y>=0)return y}return-1}},{key:"property_list",value:function(e,t,i){for(;;){var c=this.skipSpace(e,t);if(c<0)throw Ze(this._thisDoc,this.lines,e,t,"EOF found when expected verb in property list");if(e.slice(c,c+2)==":-"){var t=c+2,s=new xt([]),c=this.node(e,t,s,i);if(c<0)throw Ze(this._thisDoc,this.lines,e,t,"bad {} or () or [] node after :- ");var t=c;continue}var t=c,l=new xt([]),c=this.verb(e,t,l);if(c<=0)return t;var a=new xt([]),t=this.objectList(e,c,a);if(t<0)throw Ze(this._thisDoc,this.lines,e,c,"objectList expected");var u=new Yi(a);try{for(;;){var o=u.next(),f=l[0],h=f[0],d=f[1];h=="->"?this.makeStatement(new zt([this._context,d,i,o])):this.makeStatement(new zt([this._context,d,o,i]))}}catch(w){if(w!=ui)throw w}var c=this.skipSpace(e,t);if(c<0)throw Ze(this._thisDoc,this.lines,e,c,"EOF found in list of objects");if(e.slice(t,t+1)!=";")return t;var t=t+1}}},{key:"commaSeparatedList",value:function(e,t,i,s){var l=this.skipSpace(e,t);if(l<0)throw Ze(this._thisDoc,this.lines,e,l,"EOF found expecting comma sep list");if(e.charAt(l)==".")return t;if(s)var l=this.uri_ref2(e,l,i);else var l=this.bareWord(e,l,i);if(l<0)return-1;for(;;){var t=this.skipSpace(e,l);if(t<0)return t;var a=e.slice(t,t+1);if(a!=",")return a!="."?-1:t;if(s)var l=this.uri_ref2(e,t+1,i);else var l=this.bareWord(e,t+1,i);if(l<0)throw Ze(this._thisDoc,this.lines,e,l,"bad list content")}}},{key:"objectList",value:function(e,s,i){var s=this.object(e,s,i);if(s<0)return-1;for(;;){var l=this.skipSpace(e,s);if(l<0)throw Ze(this._thisDoc,this.lines,e,l,"EOF found after object");if(e.slice(l,l+1)!=",")return l;var s=this.object(e,l+1,i);if(s<0)return s}}},{key:"checkDot",value:function(e,t){var i=this.skipSpace(e,t);if(i<0)return i;if(e.slice(i,i+1)==".")return i+1;if(e.slice(i,i+1)=="}"||e.slice(i,i+1)=="]")return i;throw Ze(this._thisDoc,this.lines,e,i,"expected '.' or '}' or ']' at end of statement")}},{key:"uri_ref2",value:function(e,d,i){var s=new xt([]),l=this.qname(e,d,s);if(l>=0){var a=s[0],u=a[0],o=a[1];if(u==null){pn(0,"not used?");var f=this._baseURI+C1}else{var f=this._bindings[u];if(!f){if(u=="_")return i.push(this.anonymousNode(o)),l;throw Ze(this._thisDoc,this.lines,e,d,"Prefix "+u+" not bound.")}}var h=this._store.sym(f+o);return pr(this._variables,h)>=0?i.push(this._variables[h]):i.push(h),l}var d=this.skipSpace(e,d);if(d<0)return-1;if(e.charAt(d)=="?"){var c=new xt([]),l=this.variable(e,d,c);return l>0?(i.push(c[0]),l):-1}else if(e.charAt(d)=="<"){for(var d=d+1,_=d;d<dr(e);){if(e.charAt(d)==">"){var w=e.slice(_,d);if(this._baseURI)var w=Hl(this._baseURI,w);else pn(w.indexOf(":")>=0,"With no base URI, cannot deal with relative URIs");if(e.slice(d-1,d)=="#"&&jl(w,-1,null)!="#")var w=w+"#";var h=this._store.sym(w);return pr(this._variables,h)>=0?i.push(this._variables[h]):i.push(h),d+1}var d=d+1}throw Ze(this._thisDoc,this.lines,e,l,"unterminated URI reference")}else if(this.keywordsSet){var c=new xt([]),l=this.bareWord(e,d,c);if(l<0)return-1;if(pr(this.keywords,c[0])>=0)throw Ze(this._thisDoc,this.lines,e,d,'Keyword "'+c[0]+'" not allowed here.');return i.push(this._store.sym(this._bindings[""]+c[0])),l}else return-1}},{key:"skipSpace",value:function(e,t){for(var i=` 
\r	\f\v            ​\u2028\u2029　`,s=t||0;s<e.length;s++){var l=e.charAt(s);if(i.indexOf(l)<0)if(e.charAt(s)==="#")for(;;s++){if(s===e.length)return-1;if(e.charAt(s)===`
`){this.lines=this.lines+1;break}}else return s;else e.charAt(s)===`
`&&(this.lines=this.lines+1)}return-1}},{key:"variable",value:function(e,l,i){var s=this.skipSpace(e,l);if(s<0||e.slice(s,s+1)!="?")return-1;var s=s+1,l=s;if("0123456789-".indexOf(e.charAt(s))>=0)throw Ze(this._thisDoc,this.lines,e,s,"Varible name can't start with '"+e.charAt(s)+"s'");for(;l<dr(e)&&gn.indexOf(e.charAt(l))<0;)var l=l+1;if(this._parentContext==null)throw Ze(this._thisDoc,this.lines,e,s,"Can't use ?xxx syntax for variable in outermost level: "+e.slice(s-1,l));return i.push(this._store.variable(e.slice(s,l))),l}},{key:"bareWord",value:function(e,a,i){var s=this.skipSpace(e,a);if(s<0)return-1;var l=e.charAt(s);if("0123456789-".indexOf(l)>=0||gn.indexOf(l)>=0)return-1;for(var a=s;a<dr(e)&&gn.indexOf(e.charAt(a))<0;)var a=a+1;return i.push(e.slice(s,a)),a}},{key:"qname",value:function(e,s,i){var s=this.skipSpace(e,s);if(s<0)return-1;var l=e.charAt(s);if("0123456789-+".indexOf(l)>=0)return-1;if(gn.indexOf(l)<0)for(var a=l,s=s+1;s<dr(e);){var l=e.charAt(s);if(gn.indexOf(l)<0)var a=a+l,s=s+1;else break}else var a="";if(s<dr(e)&&e.charAt(s)==":"){for(var u=a,s=s+1,a="";s<dr(e);){var l=e.charAt(s);if(gn.indexOf(l)<0)var a=a+l,s=s+1;else break}return i.push(new zt([u,a])),s}else return a&&this.keywordsSet&&pr(this.keywords,a)<0?(i.push(new zt(["",a])),s):-1}},{key:"object",value:function(e,t,i){var s=this.subject(e,t,i);if(s>=0)return s;var s=this.skipSpace(e,t);if(s<0)return-1;var t=s,l=null,a=e.charAt(t);if(a=='"'||a=="'"){e.slice(t,t+3==a+a)?l=a+a+a:l=a;var t=t+dr(l),u=this.strconst(e,t,l),s=u[0],o=u[1];return i.push(this._store.literal(o)),s}else return-1}},{key:"nodeOrLiteral",value:function(e,t,i){var s=this.node(e,t,i);if(s>=0)return s;var s=this.skipSpace(e,t);if(s<0)return-1;var t=s,l=e.charAt(t);if("-+0987654321".indexOf(l)>=0){Nu.lastIndex=0;var a=Nu.exec(e.slice(t));if(a!=null){var u=a[0];s=t+u.length,u.indexOf("T")>=0?i.push(this._store.literal(u,this._store.sym(S1))):i.push(this._store.literal(u,this._store.sym(R1)))}else{zl.lastIndex=0;var a=zl.exec(e.slice(t));if(a==null)throw Ze(this._thisDoc,this.lines,e,t,"Bad number or date syntax");s=t+zl.lastIndex;var u=e.slice(t,s);u.indexOf("e")>=0?i.push(this._store.literal(parseFloat(u),this._store.sym(I1))):e.slice(t,s).indexOf(".")>=0?i.push(this._store.literal(parseFloat(u),this._store.sym(F1))):i.push(this._store.literal(parseInt(u),this._store.sym(N1)))}return s}if(e.charAt(t)=='"'){if(e.slice(t,t+3)=='"""')var o='"""';else var o='"';var t=t+dr(o),f=null,h=this.strconst(e,t,o),s=h[0],d=h[1],c=null;if(e.slice(s,s+1)=="@"){Xl.lastIndex=0;var a=Xl.exec(e.slice(s+1));if(a==null)throw Ze(this._thisDoc,startline,e,t,"Bad language code syntax on string literal, after @");var t=Xl.lastIndex+s+1,c=e.slice(s+1,t),s=t}if(e.slice(s,s+2)=="^^")var _=new xt([]),s=this.uri_ref2(e,s+2,_),f=_[0];return i.push(this._store.literal(d,c||f)),s}else return-1}},{key:"strconst",value:function(e,t,i){for(var s=t,l="",a=this.lines;s<dr(e);){var t=s+dr(i);if(e.slice(s,t)==i)return new zt([t,l]);if(e.charAt(s)=='"'){var l=l+'"',s=s+1;continue}xl.lastIndex=0;var u=xl.exec(e.slice(s));if(!u)throw Ze(this._thisDoc,a,e,s,"Closing quote missing in string at ^ in "+e.slice(s-20,s)+"^"+e.slice(s,s+20));var t=s+xl.lastIndex-1,l=l+e.slice(s,t),o=e.charAt(t);if(o=='"'){var s=t;continue}else if(o=="\r"){var s=t+1;continue}else if(o==`
`){if(i=='"')throw Ze(this._thisDoc,a,e,t,"newline found in string literal");this.lines=this.lines+1;var l=l+o,s=t+1;this.previousLine=this.startOfLine,this.startOfLine=s}else if(o=="\\"){var s=t+1,o=e.slice(s,s+1);if(!o)throw Ze(this._thisDoc,a,e,t,"unterminated string literal (2)");var f=Vl('abfrtvn\\"',o);if(f>=0)var h=`a\b\f\r	\v
\\"`.charAt(f),l=l+h,s=s+1;else if(o=="u")var d=this.uEscape(e,s+1,a),s=d[0],o=d[1],l=l+o;else if(o=="U")var d=this.UEscape(e,s+1,a),s=d[0],o=d[1],l=l+o;else throw Ze(this._thisDoc,this.lines,e,t,"bad escape")}}throw Ze(this._thisDoc,this.lines,e,t,"unterminated string literal")}},{key:"uEscape",value:function(e,t,i){for(var s=t,l=0,a=0;l<4;){var u=e.slice(s,s+1),o=u.toLowerCase(),s=s+1;if(o=="")throw Ze(this._thisDoc,i,e,t,"unterminated string literal(3)");var f=Vl("0123456789abcdef",o);if(f<0)throw Ze(this._thisDoc,i,e,t,"bad string literal hex escape");var a=a*16+f,l=l+1}var h=String.fromCharCode(a);return new zt([s,h])}},{key:"UEscape",value:function(e,t,i){for(var s=t,l=0,a="\\U";l<8;){var u=e.slice(s,s+1),o=u.toLowerCase(),s=s+1;if(o=="")throw Ze(this._thisDoc,i,e,t,"unterminated string literal(3)");var f=Vl("0123456789abcdef",o);if(f<0)throw Ze(this._thisDoc,i,e,t,"bad string literal hex escape");var a=a+o,l=l+1}var h=D1("0x"+jl(a,2,10)-0);return new zt([s,h])}}])}();function Ze(n,r,e,t,i){var s=r+1,l="Line "+s+" of <"+n+">: Bad syntax: "+i+`
at: "`+e.slice(t,t+30)+'"',a=new SyntaxError(l,n,s);return a.lineNo=s,a.characterInFile=t,a.syntaxProblem=i,a}function Iu(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,t)}return e}function Fu(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Iu(Object(e),!0).forEach(function(t){Se(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Iu(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}var us=Fu(Fu({},vr),{},{supports:Se(Se(Se(Se(Se(Se(Se({},rr.collections,!0),rr.defaultGraphType,!1),rr.equalsMethod,!0),rr.identity,!1),rr.id,!0),rr.reversibleId,!1),rr.variableType,!0),collection:function(r){return new tn(r)},id:function(r){var e=this;return vs(r)?"( ".concat(r.elements.map(function(t){return e.id(t)}).join(", ")," )"):c0(r)?En.toString(r):vr.id(r)},termToNQ:function(r){return r.termType===an?tn.toNT(r):vr.termToNQ(r)}});function Rs(n,r){return typeof r=="string"?n.rdfFactory.literal(r):Object.prototype.hasOwnProperty.call(r,"@list")?n.rdfFactory.supports.COLLECTIONS===!0?L1(n,r["@list"]):O1(n,r):Object.prototype.hasOwnProperty.call(r,"@id")?Ss(n,r):Object.prototype.hasOwnProperty.call(r,"@language")?n.rdfFactory.literal(r["@value"],r["@language"]):Object.prototype.hasOwnProperty.call(r,"@type")?n.rdfFactory.literal(r["@value"],n.rdfFactory.namedNode(r["@type"])):Object.prototype.hasOwnProperty.call(r,"@value")?n.rdfFactory.literal(r["@value"]):n.rdfFactory.literal(r)}function O1(n,r){var e=r["@id"]?Ss(n,r):n.rdfFactory.blankNode(),t=r["@list"].map(function(s){return Rs(n,s)}),i=Od(n.rdfFactory,e,t);return n.addAll(i),e}function L1(n,r){if(!Array.isArray(r))throw new TypeError("Object must be an array");return n.rdfFactory.collection(r.map(function(e){return Rs(n,e)}))}function jd(n,r,e,t){var i=e&&Object.prototype.hasOwnProperty.call(e,"termType")?e.value:e;return Sp(()=>import("../chunks/jsonld.CYnguqZs.js").then(s=>s.j),__vite__mapDeps([0,1,2]),import.meta.url).then(function(s){return s.flatten(JSON.parse(n),null,{base:i})}).then(function(s){return s.reduce(function(l,a){return r=Vd(r,e,a),r},r)}).then(t).catch(t)}function Ss(n,r){return r["@id"].startsWith("_:")?n.rdfFactory.blankNode(r["@id"].substring(2)):n.rdfFactory.namedNode(r["@id"])}function Vd(n,r,e){for(var t=e["@id"]?Ss(n,e):n.rdfFactory.blankNode(),i=0,s=Object.keys(e);i<s.length;i++){var l=s[i];if(l!=="@id"){if(l=="@graph")for(var a=t,u=e[l],o=0;o<u.length;o++)n=Vd(n,a,u[o]);var f=e[l];if(Array.isArray(f))for(var h=0;h<f.length;h++)n.addStatement(Ru(n,t,l,f[h],r));else n.addStatement(Ru(n,t,l,f,r))}}return n}function Ru(n,r,e,t,i){var s,l;return e==="@type"?(s=n.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),l=n.rdfFactory.namedNode(t)):(s=n.rdfFactory.namedNode(e),l=Rs(n,t)),n.rdfFactory.quad(r,s,l,n.rdfFactory.namedNode(i))}var Hd={},bl={};bl.byteLength=M1;bl.toByteArray=j1;bl.fromByteArray=z1;var Rr=[],_r=[],U1=typeof Uint8Array<"u"?Uint8Array:Array,Gl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Bn=0,P1=Gl.length;Bn<P1;++Bn)Rr[Bn]=Gl[Bn],_r[Gl.charCodeAt(Bn)]=Bn;_r[45]=62;_r[95]=63;function zd(n){var r=n.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=n.indexOf("=");e===-1&&(e=r);var t=e===r?0:4-e%4;return[e,t]}function M1(n){var r=zd(n),e=r[0],t=r[1];return(e+t)*3/4-t}function q1(n,r,e){return(r+e)*3/4-e}function j1(n){var r,e=zd(n),t=e[0],i=e[1],s=new U1(q1(n,t,i)),l=0,a=i>0?t-4:t,u;for(u=0;u<a;u+=4)r=_r[n.charCodeAt(u)]<<18|_r[n.charCodeAt(u+1)]<<12|_r[n.charCodeAt(u+2)]<<6|_r[n.charCodeAt(u+3)],s[l++]=r>>16&255,s[l++]=r>>8&255,s[l++]=r&255;return i===2&&(r=_r[n.charCodeAt(u)]<<2|_r[n.charCodeAt(u+1)]>>4,s[l++]=r&255),i===1&&(r=_r[n.charCodeAt(u)]<<10|_r[n.charCodeAt(u+1)]<<4|_r[n.charCodeAt(u+2)]>>2,s[l++]=r>>8&255,s[l++]=r&255),s}function V1(n){return Rr[n>>18&63]+Rr[n>>12&63]+Rr[n>>6&63]+Rr[n&63]}function H1(n,r,e){for(var t,i=[],s=r;s<e;s+=3)t=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),i.push(V1(t));return i.join("")}function z1(n){for(var r,e=n.length,t=e%3,i=[],s=16383,l=0,a=e-t;l<a;l+=s)i.push(H1(n,l,l+s>a?a:l+s));return t===1?(r=n[e-1],i.push(Rr[r>>2]+Rr[r<<4&63]+"==")):t===2&&(r=(n[e-2]<<8)+n[e-1],i.push(Rr[r>>10]+Rr[r>>4&63]+Rr[r<<2&63]+"=")),i.join("")}var Bs={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Bs.read=function(n,r,e,t,i){var s,l,a=i*8-t-1,u=(1<<a)-1,o=u>>1,f=-7,h=e?i-1:0,d=e?-1:1,c=n[r+h];for(h+=d,s=c&(1<<-f)-1,c>>=-f,f+=a;f>0;s=s*256+n[r+h],h+=d,f-=8);for(l=s&(1<<-f)-1,s>>=-f,f+=t;f>0;l=l*256+n[r+h],h+=d,f-=8);if(s===0)s=1-o;else{if(s===u)return l?NaN:(c?-1:1)*(1/0);l=l+Math.pow(2,t),s=s-o}return(c?-1:1)*l*Math.pow(2,s-t)};Bs.write=function(n,r,e,t,i,s){var l,a,u,o=s*8-i-1,f=(1<<o)-1,h=f>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=t?0:s-1,_=t?1:-1,w=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(a=isNaN(r)?1:0,l=f):(l=Math.floor(Math.log(r)/Math.LN2),r*(u=Math.pow(2,-l))<1&&(l--,u*=2),l+h>=1?r+=d/u:r+=d*Math.pow(2,1-h),r*u>=2&&(l++,u/=2),l+h>=f?(a=0,l=f):l+h>=1?(a=(r*u-1)*Math.pow(2,i),l=l+h):(a=r*Math.pow(2,h-1)*Math.pow(2,i),l=0));i>=8;n[e+c]=a&255,c+=_,a/=256,i-=8);for(l=l<<i|a,o+=i;o>0;n[e+c]=l&255,c+=_,l/=256,o-=8);n[e+c-_]|=w*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const r=bl,e=Bs,t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=j,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const x=new Uint8Array(1),D={foo:function(){return 42}};return Object.setPrototypeOf(D,Uint8Array.prototype),Object.setPrototypeOf(x,D),x.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function l(x){if(x>i)throw new RangeError('The value "'+x+'" is invalid for option "size"');const D=new Uint8Array(x);return Object.setPrototypeOf(D,a.prototype),D}function a(x,D,I){if(typeof x=="number"){if(typeof D=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(x)}return u(x,D,I)}a.poolSize=8192;function u(x,D,I){if(typeof x=="string")return d(x,D);if(ArrayBuffer.isView(x))return _(x);if(x==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x);if(Ge(x,ArrayBuffer)||x&&Ge(x.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ge(x,SharedArrayBuffer)||x&&Ge(x.buffer,SharedArrayBuffer)))return w(x,D,I);if(typeof x=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Z=x.valueOf&&x.valueOf();if(Z!=null&&Z!==x)return a.from(Z,D,I);const oe=k(x);if(oe)return oe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof x[Symbol.toPrimitive]=="function")return a.from(x[Symbol.toPrimitive]("string"),D,I);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x)}a.from=function(x,D,I){return u(x,D,I)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function o(x){if(typeof x!="number")throw new TypeError('"size" argument must be of type number');if(x<0)throw new RangeError('The value "'+x+'" is invalid for option "size"')}function f(x,D,I){return o(x),x<=0?l(x):D!==void 0?typeof I=="string"?l(x).fill(D,I):l(x).fill(D):l(x)}a.alloc=function(x,D,I){return f(x,D,I)};function h(x){return o(x),l(x<0?0:C(x)|0)}a.allocUnsafe=function(x){return h(x)},a.allocUnsafeSlow=function(x){return h(x)};function d(x,D){if((typeof D!="string"||D==="")&&(D="utf8"),!a.isEncoding(D))throw new TypeError("Unknown encoding: "+D);const I=S(x,D)|0;let Z=l(I);const oe=Z.write(x,D);return oe!==I&&(Z=Z.slice(0,oe)),Z}function c(x){const D=x.length<0?0:C(x.length)|0,I=l(D);for(let Z=0;Z<D;Z+=1)I[Z]=x[Z]&255;return I}function _(x){if(Ge(x,Uint8Array)){const D=new Uint8Array(x);return w(D.buffer,D.byteOffset,D.byteLength)}return c(x)}function w(x,D,I){if(D<0||x.byteLength<D)throw new RangeError('"offset" is outside of buffer bounds');if(x.byteLength<D+(I||0))throw new RangeError('"length" is outside of buffer bounds');let Z;return D===void 0&&I===void 0?Z=new Uint8Array(x):I===void 0?Z=new Uint8Array(x,D):Z=new Uint8Array(x,D,I),Object.setPrototypeOf(Z,a.prototype),Z}function k(x){if(a.isBuffer(x)){const D=C(x.length)|0,I=l(D);return I.length===0||x.copy(I,0,0,D),I}if(x.length!==void 0)return typeof x.length!="number"||$e(x.length)?l(0):c(x);if(x.type==="Buffer"&&Array.isArray(x.data))return c(x.data)}function C(x){if(x>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return x|0}function j(x){return+x!=x&&(x=0),a.alloc(+x)}a.isBuffer=function(D){return D!=null&&D._isBuffer===!0&&D!==a.prototype},a.compare=function(D,I){if(Ge(D,Uint8Array)&&(D=a.from(D,D.offset,D.byteLength)),Ge(I,Uint8Array)&&(I=a.from(I,I.offset,I.byteLength)),!a.isBuffer(D)||!a.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(D===I)return 0;let Z=D.length,oe=I.length;for(let ge=0,ye=Math.min(Z,oe);ge<ye;++ge)if(D[ge]!==I[ge]){Z=D[ge],oe=I[ge];break}return Z<oe?-1:oe<Z?1:0},a.isEncoding=function(D){switch(String(D).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(D,I){if(!Array.isArray(D))throw new TypeError('"list" argument must be an Array of Buffers');if(D.length===0)return a.alloc(0);let Z;if(I===void 0)for(I=0,Z=0;Z<D.length;++Z)I+=D[Z].length;const oe=a.allocUnsafe(I);let ge=0;for(Z=0;Z<D.length;++Z){let ye=D[Z];if(Ge(ye,Uint8Array))ge+ye.length>oe.length?(a.isBuffer(ye)||(ye=a.from(ye)),ye.copy(oe,ge)):Uint8Array.prototype.set.call(oe,ye,ge);else if(a.isBuffer(ye))ye.copy(oe,ge);else throw new TypeError('"list" argument must be an Array of Buffers');ge+=ye.length}return oe};function S(x,D){if(a.isBuffer(x))return x.length;if(ArrayBuffer.isView(x)||Ge(x,ArrayBuffer))return x.byteLength;if(typeof x!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof x);const I=x.length,Z=arguments.length>2&&arguments[2]===!0;if(!Z&&I===0)return 0;let oe=!1;for(;;)switch(D){case"ascii":case"latin1":case"binary":return I;case"utf8":case"utf-8":return Pt(x).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I*2;case"hex":return I>>>1;case"base64":return Be(x).length;default:if(oe)return Z?-1:Pt(x).length;D=(""+D).toLowerCase(),oe=!0}}a.byteLength=S;function F(x,D,I){let Z=!1;if((D===void 0||D<0)&&(D=0),D>this.length||((I===void 0||I>this.length)&&(I=this.length),I<=0)||(I>>>=0,D>>>=0,I<=D))return"";for(x||(x="utf8");;)switch(x){case"hex":return G(this,D,I);case"utf8":case"utf-8":return N(this,D,I);case"ascii":return ae(this,D,I);case"latin1":case"binary":return K(this,D,I);case"base64":return O(this,D,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,D,I);default:if(Z)throw new TypeError("Unknown encoding: "+x);x=(x+"").toLowerCase(),Z=!0}}a.prototype._isBuffer=!0;function b(x,D,I){const Z=x[D];x[D]=x[I],x[I]=Z}a.prototype.swap16=function(){const D=this.length;if(D%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let I=0;I<D;I+=2)b(this,I,I+1);return this},a.prototype.swap32=function(){const D=this.length;if(D%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let I=0;I<D;I+=4)b(this,I,I+3),b(this,I+1,I+2);return this},a.prototype.swap64=function(){const D=this.length;if(D%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let I=0;I<D;I+=8)b(this,I,I+7),b(this,I+1,I+6),b(this,I+2,I+5),b(this,I+3,I+4);return this},a.prototype.toString=function(){const D=this.length;return D===0?"":arguments.length===0?N(this,0,D):F.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(D){if(!a.isBuffer(D))throw new TypeError("Argument must be a Buffer");return this===D?!0:a.compare(this,D)===0},a.prototype.inspect=function(){let D="";const I=n.INSPECT_MAX_BYTES;return D=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim(),this.length>I&&(D+=" ... "),"<Buffer "+D+">"},t&&(a.prototype[t]=a.prototype.inspect),a.prototype.compare=function(D,I,Z,oe,ge){if(Ge(D,Uint8Array)&&(D=a.from(D,D.offset,D.byteLength)),!a.isBuffer(D))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof D);if(I===void 0&&(I=0),Z===void 0&&(Z=D?D.length:0),oe===void 0&&(oe=0),ge===void 0&&(ge=this.length),I<0||Z>D.length||oe<0||ge>this.length)throw new RangeError("out of range index");if(oe>=ge&&I>=Z)return 0;if(oe>=ge)return-1;if(I>=Z)return 1;if(I>>>=0,Z>>>=0,oe>>>=0,ge>>>=0,this===D)return 0;let ye=ge-oe,ke=Z-I;const qe=Math.min(ye,ke),Xe=this.slice(oe,ge),ct=D.slice(I,Z);for(let at=0;at<qe;++at)if(Xe[at]!==ct[at]){ye=Xe[at],ke=ct[at];break}return ye<ke?-1:ke<ye?1:0};function y(x,D,I,Z,oe){if(x.length===0)return-1;if(typeof I=="string"?(Z=I,I=0):I>2147483647?I=2147483647:I<-2147483648&&(I=-2147483648),I=+I,$e(I)&&(I=oe?0:x.length-1),I<0&&(I=x.length+I),I>=x.length){if(oe)return-1;I=x.length-1}else if(I<0)if(oe)I=0;else return-1;if(typeof D=="string"&&(D=a.from(D,Z)),a.isBuffer(D))return D.length===0?-1:v(x,D,I,Z,oe);if(typeof D=="number")return D=D&255,typeof Uint8Array.prototype.indexOf=="function"?oe?Uint8Array.prototype.indexOf.call(x,D,I):Uint8Array.prototype.lastIndexOf.call(x,D,I):v(x,[D],I,Z,oe);throw new TypeError("val must be string, number or Buffer")}function v(x,D,I,Z,oe){let ge=1,ye=x.length,ke=D.length;if(Z!==void 0&&(Z=String(Z).toLowerCase(),Z==="ucs2"||Z==="ucs-2"||Z==="utf16le"||Z==="utf-16le")){if(x.length<2||D.length<2)return-1;ge=2,ye/=2,ke/=2,I/=2}function qe(ct,at){return ge===1?ct[at]:ct.readUInt16BE(at*ge)}let Xe;if(oe){let ct=-1;for(Xe=I;Xe<ye;Xe++)if(qe(x,Xe)===qe(D,ct===-1?0:Xe-ct)){if(ct===-1&&(ct=Xe),Xe-ct+1===ke)return ct*ge}else ct!==-1&&(Xe-=Xe-ct),ct=-1}else for(I+ke>ye&&(I=ye-ke),Xe=I;Xe>=0;Xe--){let ct=!0;for(let at=0;at<ke;at++)if(qe(x,Xe+at)!==qe(D,at)){ct=!1;break}if(ct)return Xe}return-1}a.prototype.includes=function(D,I,Z){return this.indexOf(D,I,Z)!==-1},a.prototype.indexOf=function(D,I,Z){return y(this,D,I,Z,!0)},a.prototype.lastIndexOf=function(D,I,Z){return y(this,D,I,Z,!1)};function B(x,D,I,Z){I=Number(I)||0;const oe=x.length-I;Z?(Z=Number(Z),Z>oe&&(Z=oe)):Z=oe;const ge=D.length;Z>ge/2&&(Z=ge/2);let ye;for(ye=0;ye<Z;++ye){const ke=parseInt(D.substr(ye*2,2),16);if($e(ke))return ye;x[I+ye]=ke}return ye}function T(x,D,I,Z){return Ke(Pt(D,x.length-I),x,I,Z)}function U(x,D,I,Z){return Ke(Wt(D),x,I,Z)}function E(x,D,I,Z){return Ke(Be(D),x,I,Z)}function P(x,D,I,Z){return Ke(cr(D,x.length-I),x,I,Z)}a.prototype.write=function(D,I,Z,oe){if(I===void 0)oe="utf8",Z=this.length,I=0;else if(Z===void 0&&typeof I=="string")oe=I,Z=this.length,I=0;else if(isFinite(I))I=I>>>0,isFinite(Z)?(Z=Z>>>0,oe===void 0&&(oe="utf8")):(oe=Z,Z=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ge=this.length-I;if((Z===void 0||Z>ge)&&(Z=ge),D.length>0&&(Z<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");oe||(oe="utf8");let ye=!1;for(;;)switch(oe){case"hex":return B(this,D,I,Z);case"utf8":case"utf-8":return T(this,D,I,Z);case"ascii":case"latin1":case"binary":return U(this,D,I,Z);case"base64":return E(this,D,I,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,D,I,Z);default:if(ye)throw new TypeError("Unknown encoding: "+oe);oe=(""+oe).toLowerCase(),ye=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(x,D,I){return D===0&&I===x.length?r.fromByteArray(x):r.fromByteArray(x.slice(D,I))}function N(x,D,I){I=Math.min(x.length,I);const Z=[];let oe=D;for(;oe<I;){const ge=x[oe];let ye=null,ke=ge>239?4:ge>223?3:ge>191?2:1;if(oe+ke<=I){let qe,Xe,ct,at;switch(ke){case 1:ge<128&&(ye=ge);break;case 2:qe=x[oe+1],(qe&192)===128&&(at=(ge&31)<<6|qe&63,at>127&&(ye=at));break;case 3:qe=x[oe+1],Xe=x[oe+2],(qe&192)===128&&(Xe&192)===128&&(at=(ge&15)<<12|(qe&63)<<6|Xe&63,at>2047&&(at<55296||at>57343)&&(ye=at));break;case 4:qe=x[oe+1],Xe=x[oe+2],ct=x[oe+3],(qe&192)===128&&(Xe&192)===128&&(ct&192)===128&&(at=(ge&15)<<18|(qe&63)<<12|(Xe&63)<<6|ct&63,at>65535&&at<1114112&&(ye=at))}}ye===null?(ye=65533,ke=1):ye>65535&&(ye-=65536,Z.push(ye>>>10&1023|55296),ye=56320|ye&1023),Z.push(ye),oe+=ke}return L(Z)}const X=4096;function L(x){const D=x.length;if(D<=X)return String.fromCharCode.apply(String,x);let I="",Z=0;for(;Z<D;)I+=String.fromCharCode.apply(String,x.slice(Z,Z+=X));return I}function ae(x,D,I){let Z="";I=Math.min(x.length,I);for(let oe=D;oe<I;++oe)Z+=String.fromCharCode(x[oe]&127);return Z}function K(x,D,I){let Z="";I=Math.min(x.length,I);for(let oe=D;oe<I;++oe)Z+=String.fromCharCode(x[oe]);return Z}function G(x,D,I){const Z=x.length;(!D||D<0)&&(D=0),(!I||I<0||I>Z)&&(I=Z);let oe="";for(let ge=D;ge<I;++ge)oe+=pt[x[ge]];return oe}function $(x,D,I){const Z=x.slice(D,I);let oe="";for(let ge=0;ge<Z.length-1;ge+=2)oe+=String.fromCharCode(Z[ge]+Z[ge+1]*256);return oe}a.prototype.slice=function(D,I){const Z=this.length;D=~~D,I=I===void 0?Z:~~I,D<0?(D+=Z,D<0&&(D=0)):D>Z&&(D=Z),I<0?(I+=Z,I<0&&(I=0)):I>Z&&(I=Z),I<D&&(I=D);const oe=this.subarray(D,I);return Object.setPrototypeOf(oe,a.prototype),oe};function J(x,D,I){if(x%1!==0||x<0)throw new RangeError("offset is not uint");if(x+D>I)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(D,I,Z){D=D>>>0,I=I>>>0,Z||J(D,I,this.length);let oe=this[D],ge=1,ye=0;for(;++ye<I&&(ge*=256);)oe+=this[D+ye]*ge;return oe},a.prototype.readUintBE=a.prototype.readUIntBE=function(D,I,Z){D=D>>>0,I=I>>>0,Z||J(D,I,this.length);let oe=this[D+--I],ge=1;for(;I>0&&(ge*=256);)oe+=this[D+--I]*ge;return oe},a.prototype.readUint8=a.prototype.readUInt8=function(D,I){return D=D>>>0,I||J(D,1,this.length),this[D]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(D,I){return D=D>>>0,I||J(D,2,this.length),this[D]|this[D+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(D,I){return D=D>>>0,I||J(D,2,this.length),this[D]<<8|this[D+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(D,I){return D=D>>>0,I||J(D,4,this.length),(this[D]|this[D+1]<<8|this[D+2]<<16)+this[D+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(D,I){return D=D>>>0,I||J(D,4,this.length),this[D]*16777216+(this[D+1]<<16|this[D+2]<<8|this[D+3])},a.prototype.readBigUInt64LE=At(function(D){D=D>>>0,rt(D,"offset");const I=this[D],Z=this[D+7];(I===void 0||Z===void 0)&&Ee(D,this.length-8);const oe=I+this[++D]*2**8+this[++D]*2**16+this[++D]*2**24,ge=this[++D]+this[++D]*2**8+this[++D]*2**16+Z*2**24;return BigInt(oe)+(BigInt(ge)<<BigInt(32))}),a.prototype.readBigUInt64BE=At(function(D){D=D>>>0,rt(D,"offset");const I=this[D],Z=this[D+7];(I===void 0||Z===void 0)&&Ee(D,this.length-8);const oe=I*2**24+this[++D]*2**16+this[++D]*2**8+this[++D],ge=this[++D]*2**24+this[++D]*2**16+this[++D]*2**8+Z;return(BigInt(oe)<<BigInt(32))+BigInt(ge)}),a.prototype.readIntLE=function(D,I,Z){D=D>>>0,I=I>>>0,Z||J(D,I,this.length);let oe=this[D],ge=1,ye=0;for(;++ye<I&&(ge*=256);)oe+=this[D+ye]*ge;return ge*=128,oe>=ge&&(oe-=Math.pow(2,8*I)),oe},a.prototype.readIntBE=function(D,I,Z){D=D>>>0,I=I>>>0,Z||J(D,I,this.length);let oe=I,ge=1,ye=this[D+--oe];for(;oe>0&&(ge*=256);)ye+=this[D+--oe]*ge;return ge*=128,ye>=ge&&(ye-=Math.pow(2,8*I)),ye},a.prototype.readInt8=function(D,I){return D=D>>>0,I||J(D,1,this.length),this[D]&128?(255-this[D]+1)*-1:this[D]},a.prototype.readInt16LE=function(D,I){D=D>>>0,I||J(D,2,this.length);const Z=this[D]|this[D+1]<<8;return Z&32768?Z|4294901760:Z},a.prototype.readInt16BE=function(D,I){D=D>>>0,I||J(D,2,this.length);const Z=this[D+1]|this[D]<<8;return Z&32768?Z|4294901760:Z},a.prototype.readInt32LE=function(D,I){return D=D>>>0,I||J(D,4,this.length),this[D]|this[D+1]<<8|this[D+2]<<16|this[D+3]<<24},a.prototype.readInt32BE=function(D,I){return D=D>>>0,I||J(D,4,this.length),this[D]<<24|this[D+1]<<16|this[D+2]<<8|this[D+3]},a.prototype.readBigInt64LE=At(function(D){D=D>>>0,rt(D,"offset");const I=this[D],Z=this[D+7];(I===void 0||Z===void 0)&&Ee(D,this.length-8);const oe=this[D+4]+this[D+5]*2**8+this[D+6]*2**16+(Z<<24);return(BigInt(oe)<<BigInt(32))+BigInt(I+this[++D]*2**8+this[++D]*2**16+this[++D]*2**24)}),a.prototype.readBigInt64BE=At(function(D){D=D>>>0,rt(D,"offset");const I=this[D],Z=this[D+7];(I===void 0||Z===void 0)&&Ee(D,this.length-8);const oe=(I<<24)+this[++D]*2**16+this[++D]*2**8+this[++D];return(BigInt(oe)<<BigInt(32))+BigInt(this[++D]*2**24+this[++D]*2**16+this[++D]*2**8+Z)}),a.prototype.readFloatLE=function(D,I){return D=D>>>0,I||J(D,4,this.length),e.read(this,D,!0,23,4)},a.prototype.readFloatBE=function(D,I){return D=D>>>0,I||J(D,4,this.length),e.read(this,D,!1,23,4)},a.prototype.readDoubleLE=function(D,I){return D=D>>>0,I||J(D,8,this.length),e.read(this,D,!0,52,8)},a.prototype.readDoubleBE=function(D,I){return D=D>>>0,I||J(D,8,this.length),e.read(this,D,!1,52,8)};function ne(x,D,I,Z,oe,ge){if(!a.isBuffer(x))throw new TypeError('"buffer" argument must be a Buffer instance');if(D>oe||D<ge)throw new RangeError('"value" argument is out of bounds');if(I+Z>x.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(D,I,Z,oe){if(D=+D,I=I>>>0,Z=Z>>>0,!oe){const ke=Math.pow(2,8*Z)-1;ne(this,D,I,Z,ke,0)}let ge=1,ye=0;for(this[I]=D&255;++ye<Z&&(ge*=256);)this[I+ye]=D/ge&255;return I+Z},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(D,I,Z,oe){if(D=+D,I=I>>>0,Z=Z>>>0,!oe){const ke=Math.pow(2,8*Z)-1;ne(this,D,I,Z,ke,0)}let ge=Z-1,ye=1;for(this[I+ge]=D&255;--ge>=0&&(ye*=256);)this[I+ge]=D/ye&255;return I+Z},a.prototype.writeUint8=a.prototype.writeUInt8=function(D,I,Z){return D=+D,I=I>>>0,Z||ne(this,D,I,1,255,0),this[I]=D&255,I+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(D,I,Z){return D=+D,I=I>>>0,Z||ne(this,D,I,2,65535,0),this[I]=D&255,this[I+1]=D>>>8,I+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(D,I,Z){return D=+D,I=I>>>0,Z||ne(this,D,I,2,65535,0),this[I]=D>>>8,this[I+1]=D&255,I+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(D,I,Z){return D=+D,I=I>>>0,Z||ne(this,D,I,4,4294967295,0),this[I+3]=D>>>24,this[I+2]=D>>>16,this[I+1]=D>>>8,this[I]=D&255,I+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(D,I,Z){return D=+D,I=I>>>0,Z||ne(this,D,I,4,4294967295,0),this[I]=D>>>24,this[I+1]=D>>>16,this[I+2]=D>>>8,this[I+3]=D&255,I+4};function z(x,D,I,Z,oe){gt(D,Z,oe,x,I,7);let ge=Number(D&BigInt(4294967295));x[I++]=ge,ge=ge>>8,x[I++]=ge,ge=ge>>8,x[I++]=ge,ge=ge>>8,x[I++]=ge;let ye=Number(D>>BigInt(32)&BigInt(4294967295));return x[I++]=ye,ye=ye>>8,x[I++]=ye,ye=ye>>8,x[I++]=ye,ye=ye>>8,x[I++]=ye,I}function ue(x,D,I,Z,oe){gt(D,Z,oe,x,I,7);let ge=Number(D&BigInt(4294967295));x[I+7]=ge,ge=ge>>8,x[I+6]=ge,ge=ge>>8,x[I+5]=ge,ge=ge>>8,x[I+4]=ge;let ye=Number(D>>BigInt(32)&BigInt(4294967295));return x[I+3]=ye,ye=ye>>8,x[I+2]=ye,ye=ye>>8,x[I+1]=ye,ye=ye>>8,x[I]=ye,I+8}a.prototype.writeBigUInt64LE=At(function(D,I=0){return z(this,D,I,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=At(function(D,I=0){return ue(this,D,I,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(D,I,Z,oe){if(D=+D,I=I>>>0,!oe){const qe=Math.pow(2,8*Z-1);ne(this,D,I,Z,qe-1,-qe)}let ge=0,ye=1,ke=0;for(this[I]=D&255;++ge<Z&&(ye*=256);)D<0&&ke===0&&this[I+ge-1]!==0&&(ke=1),this[I+ge]=(D/ye>>0)-ke&255;return I+Z},a.prototype.writeIntBE=function(D,I,Z,oe){if(D=+D,I=I>>>0,!oe){const qe=Math.pow(2,8*Z-1);ne(this,D,I,Z,qe-1,-qe)}let ge=Z-1,ye=1,ke=0;for(this[I+ge]=D&255;--ge>=0&&(ye*=256);)D<0&&ke===0&&this[I+ge+1]!==0&&(ke=1),this[I+ge]=(D/ye>>0)-ke&255;return I+Z},a.prototype.writeInt8=function(D,I,Z){return D=+D,I=I>>>0,Z||ne(this,D,I,1,127,-128),D<0&&(D=255+D+1),this[I]=D&255,I+1},a.prototype.writeInt16LE=function(D,I,Z){return D=+D,I=I>>>0,Z||ne(this,D,I,2,32767,-32768),this[I]=D&255,this[I+1]=D>>>8,I+2},a.prototype.writeInt16BE=function(D,I,Z){return D=+D,I=I>>>0,Z||ne(this,D,I,2,32767,-32768),this[I]=D>>>8,this[I+1]=D&255,I+2},a.prototype.writeInt32LE=function(D,I,Z){return D=+D,I=I>>>0,Z||ne(this,D,I,4,2147483647,-2147483648),this[I]=D&255,this[I+1]=D>>>8,this[I+2]=D>>>16,this[I+3]=D>>>24,I+4},a.prototype.writeInt32BE=function(D,I,Z){return D=+D,I=I>>>0,Z||ne(this,D,I,4,2147483647,-2147483648),D<0&&(D=4294967295+D+1),this[I]=D>>>24,this[I+1]=D>>>16,this[I+2]=D>>>8,this[I+3]=D&255,I+4},a.prototype.writeBigInt64LE=At(function(D,I=0){return z(this,D,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=At(function(D,I=0){return ue(this,D,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Pe(x,D,I,Z,oe,ge){if(I+Z>x.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("Index out of range")}function He(x,D,I,Z,oe){return D=+D,I=I>>>0,oe||Pe(x,D,I,4),e.write(x,D,I,Z,23,4),I+4}a.prototype.writeFloatLE=function(D,I,Z){return He(this,D,I,!0,Z)},a.prototype.writeFloatBE=function(D,I,Z){return He(this,D,I,!1,Z)};function be(x,D,I,Z,oe){return D=+D,I=I>>>0,oe||Pe(x,D,I,8),e.write(x,D,I,Z,52,8),I+8}a.prototype.writeDoubleLE=function(D,I,Z){return be(this,D,I,!0,Z)},a.prototype.writeDoubleBE=function(D,I,Z){return be(this,D,I,!1,Z)},a.prototype.copy=function(D,I,Z,oe){if(!a.isBuffer(D))throw new TypeError("argument should be a Buffer");if(Z||(Z=0),!oe&&oe!==0&&(oe=this.length),I>=D.length&&(I=D.length),I||(I=0),oe>0&&oe<Z&&(oe=Z),oe===Z||D.length===0||this.length===0)return 0;if(I<0)throw new RangeError("targetStart out of bounds");if(Z<0||Z>=this.length)throw new RangeError("Index out of range");if(oe<0)throw new RangeError("sourceEnd out of bounds");oe>this.length&&(oe=this.length),D.length-I<oe-Z&&(oe=D.length-I+Z);const ge=oe-Z;return this===D&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(I,Z,oe):Uint8Array.prototype.set.call(D,this.subarray(Z,oe),I),ge},a.prototype.fill=function(D,I,Z,oe){if(typeof D=="string"){if(typeof I=="string"?(oe=I,I=0,Z=this.length):typeof Z=="string"&&(oe=Z,Z=this.length),oe!==void 0&&typeof oe!="string")throw new TypeError("encoding must be a string");if(typeof oe=="string"&&!a.isEncoding(oe))throw new TypeError("Unknown encoding: "+oe);if(D.length===1){const ye=D.charCodeAt(0);(oe==="utf8"&&ye<128||oe==="latin1")&&(D=ye)}}else typeof D=="number"?D=D&255:typeof D=="boolean"&&(D=Number(D));if(I<0||this.length<I||this.length<Z)throw new RangeError("Out of range index");if(Z<=I)return this;I=I>>>0,Z=Z===void 0?this.length:Z>>>0,D||(D=0);let ge;if(typeof D=="number")for(ge=I;ge<Z;++ge)this[ge]=D;else{const ye=a.isBuffer(D)?D:a.from(D,oe),ke=ye.length;if(ke===0)throw new TypeError('The value "'+D+'" is invalid for argument "value"');for(ge=0;ge<Z-I;++ge)this[ge+I]=ye[ge%ke]}return this};const De={};function _e(x,D,I){De[x]=class extends I{constructor(){super(),Object.defineProperty(this,"message",{value:D.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${x}]`,this.stack,delete this.name}get code(){return x}set code(oe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:oe,writable:!0})}toString(){return`${this.name} [${x}]: ${this.message}`}}}_e("ERR_BUFFER_OUT_OF_BOUNDS",function(x){return x?`${x} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),_e("ERR_INVALID_ARG_TYPE",function(x,D){return`The "${x}" argument must be of type number. Received type ${typeof D}`},TypeError),_e("ERR_OUT_OF_RANGE",function(x,D,I){let Z=`The value of "${x}" is out of range.`,oe=I;return Number.isInteger(I)&&Math.abs(I)>2**32?oe=Te(String(I)):typeof I=="bigint"&&(oe=String(I),(I>BigInt(2)**BigInt(32)||I<-(BigInt(2)**BigInt(32)))&&(oe=Te(oe)),oe+="n"),Z+=` It must be ${D}. Received ${oe}`,Z},RangeError);function Te(x){let D="",I=x.length;const Z=x[0]==="-"?1:0;for(;I>=Z+4;I-=3)D=`_${x.slice(I-3,I)}${D}`;return`${x.slice(0,I)}${D}`}function lt(x,D,I){rt(D,"offset"),(x[D]===void 0||x[D+I]===void 0)&&Ee(D,x.length-(I+1))}function gt(x,D,I,Z,oe,ge){if(x>I||x<D){const ye=typeof D=="bigint"?"n":"";let ke;throw D===0||D===BigInt(0)?ke=`>= 0${ye} and < 2${ye} ** ${(ge+1)*8}${ye}`:ke=`>= -(2${ye} ** ${(ge+1)*8-1}${ye}) and < 2 ** ${(ge+1)*8-1}${ye}`,new De.ERR_OUT_OF_RANGE("value",ke,x)}lt(Z,oe,ge)}function rt(x,D){if(typeof x!="number")throw new De.ERR_INVALID_ARG_TYPE(D,"number",x)}function Ee(x,D,I){throw Math.floor(x)!==x?(rt(x,I),new De.ERR_OUT_OF_RANGE("offset","an integer",x)):D<0?new De.ERR_BUFFER_OUT_OF_BOUNDS:new De.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${D}`,x)}const Ue=/[^+/0-9A-Za-z-_]/g;function Jt(x){if(x=x.split("=")[0],x=x.trim().replace(Ue,""),x.length<2)return"";for(;x.length%4!==0;)x=x+"=";return x}function Pt(x,D){D=D||1/0;let I;const Z=x.length;let oe=null;const ge=[];for(let ye=0;ye<Z;++ye){if(I=x.charCodeAt(ye),I>55295&&I<57344){if(!oe){if(I>56319){(D-=3)>-1&&ge.push(239,191,189);continue}else if(ye+1===Z){(D-=3)>-1&&ge.push(239,191,189);continue}oe=I;continue}if(I<56320){(D-=3)>-1&&ge.push(239,191,189),oe=I;continue}I=(oe-55296<<10|I-56320)+65536}else oe&&(D-=3)>-1&&ge.push(239,191,189);if(oe=null,I<128){if((D-=1)<0)break;ge.push(I)}else if(I<2048){if((D-=2)<0)break;ge.push(I>>6|192,I&63|128)}else if(I<65536){if((D-=3)<0)break;ge.push(I>>12|224,I>>6&63|128,I&63|128)}else if(I<1114112){if((D-=4)<0)break;ge.push(I>>18|240,I>>12&63|128,I>>6&63|128,I&63|128)}else throw new Error("Invalid code point")}return ge}function Wt(x){const D=[];for(let I=0;I<x.length;++I)D.push(x.charCodeAt(I)&255);return D}function cr(x,D){let I,Z,oe;const ge=[];for(let ye=0;ye<x.length&&!((D-=2)<0);++ye)I=x.charCodeAt(ye),Z=I>>8,oe=I%256,ge.push(oe),ge.push(Z);return ge}function Be(x){return r.toByteArray(Jt(x))}function Ke(x,D,I,Z){let oe;for(oe=0;oe<Z&&!(oe+I>=D.length||oe>=x.length);++oe)D[oe+I]=x[oe];return oe}function Ge(x,D){return x instanceof D||x!=null&&x.constructor!=null&&x.constructor.name!=null&&x.constructor.name===D.name}function $e(x){return x!==x}const pt=function(){const x="0123456789abcdef",D=new Array(256);for(let I=0;I<16;++I){const Z=I*16;for(let oe=0;oe<16;++oe)D[Z+oe]=x[I]+x[oe]}return D}();function At(x){return typeof BigInt>"u"?qt:x}function qt(){throw new Error("BigInt not supported")}})(Hd);/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let Su;var x1=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:ps):n=>(Su||(Su=Promise.resolve())).then(n).catch(r=>setTimeout(()=>{throw r},0));const X1=pl(x1),si="http://www.w3.org/1999/02/22-rdf-syntax-ns#",ai="http://www.w3.org/2001/XMLSchema#",Wl="http://www.w3.org/2000/10/swap/",Ir={xsd:{decimal:`${ai}decimal`,boolean:`${ai}boolean`,double:`${ai}double`,integer:`${ai}integer`,string:`${ai}string`},rdf:{type:`${si}type`,nil:`${si}nil`,first:`${si}first`,rest:`${si}rest`,langString:`${si}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${Wl}reify#forSome`,forAll:`${Wl}reify#forAll`},log:{implies:`${Wl}log#implies`}},{xsd:Ji}=Ir,G1=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,Bu={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},W1=/[\x00-\x20<>\\"\{\}\|\^\`]/,Q1={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},Y1=/$0^/;class J1{constructor(r){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,r=r||{},this._lineMode=!!r.lineMode){this._n3Mode=!1;for(const e in this)!(e in Q1)&&this[e]instanceof RegExp&&(this[e]=Y1)}else this._n3Mode=r.n3!==!1;this._comments=!!r.comments,this._literalClosingPos=0}_tokenizeToEnd(r,e){let t=this._input,i=t.length;for(;;){let a,u;for(;a=this._newline.exec(t);)this._comments&&(u=this._comment.exec(a[0]))&&s("comment",u[1],"",this._line,a[0].length),t=t.substr(a[0].length,t.length),i=t.length,this._line++;if(!a&&(a=this._whitespace.exec(t))&&(t=t.substr(a[0].length,t.length)),this._endOfFile.test(t))return e&&(this._comments&&(u=this._comment.exec(t))&&s("comment",u[1],"",this._line,t.length),t=null,s("eof","","",this._line,0)),this._input=t;const o=this._line,f=t[0];let h="",d="",c="",_=null,w=0,k=!1;switch(f){case"^":if(t.length<3)break;if(t[1]==="^"){if(this._previousMarker="^^",t=t.substr(2),t[0]!=="<"){k=!0;break}}else{this._n3Mode&&(w=1,h="^");break}case"<":if(_=this._unescapedIri.exec(t))h="IRI",d=_[1];else if(_=this._iri.exec(t)){if(d=this._unescape(_[1]),d===null||W1.test(d))return l(this);h="IRI"}else t.length>1&&t[1]==="<"?(h="<<",w=2):this._n3Mode&&t.length>1&&t[1]==="="&&(h="inverse",w=2,d=">");break;case">":t.length>1&&t[1]===">"&&(h=">>",w=2);break;case"_":((_=this._blank.exec(t))||e&&(_=this._blank.exec(`${t} `)))&&(h="blank",c="_",d=_[1]);break;case'"':if(_=this._simpleQuotedString.exec(t))d=_[1];else if({value:d,matchLength:w}=this._parseLiteral(t),d===null)return l(this);(_!==null||w!==0)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(_=this._simpleApostropheString.exec(t))d=_[1];else if({value:d,matchLength:w}=this._parseLiteral(t),d===null)return l(this);(_!==null||w!==0)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(_=this._variable.exec(t))&&(h="var",d=_[0]);break;case"@":this._previousMarker==="literal"&&(_=this._langcode.exec(t))?(h="langcode",d=_[1]):(_=this._keyword.exec(t))&&(h=_[0]);break;case".":if(t.length===1?e:t[1]<"0"||t[1]>"9"){h=".",w=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(_=this._number.exec(t)||e&&(_=this._number.exec(`${t} `)))&&(h="literal",d=_[0],c=typeof _[1]=="string"?Ji.double:typeof _[2]=="string"?Ji.decimal:Ji.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(_=this._sparqlKeyword.exec(t))?h=_[0].toUpperCase():k=!0;break;case"f":case"t":(_=this._boolean.exec(t))?(h="literal",d=_[0],c=Ji.boolean):k=!0;break;case"a":(_=this._shortPredicates.exec(t))?(h="abbreviation",d="a"):k=!0;break;case"=":this._n3Mode&&t.length>1&&(h="abbreviation",t[1]!==">"?(w=1,d="="):(w=2,d=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(w=1,h=f);break;case"{":!this._lineMode&&t.length>=2&&(t[1]==="|"?(h="{|",w=2):(h=f,w=1));break;case"|":t.length>=2&&t[1]==="}"&&(h="|}",w=2);break;default:k=!0}if(k&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(_=this._prefix.exec(t))?(h="prefix",d=_[1]||""):((_=this._prefixed.exec(t))||e&&(_=this._prefixed.exec(`${t} `)))&&(h="prefixed",c=_[1]||"",d=this._unescape(_[2]))),this._previousMarker==="^^")switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return e||!/^'''|^"""/.test(t)&&/\n|\r/.test(t)?l(this):this._input=t;const C=w||_[0].length,j=s(h,d,c,o,C);this.previousToken=j,this._previousMarker=h,t=t.substr(C,t.length)}function s(a,u,o,f,h){const d=t?i-t.length:i,c=d+h,_={type:a,value:u,prefix:o,line:f,start:d,end:c};return r(null,_),_}function l(a){r(a._syntaxError(/^\S*/.exec(t)[0]))}}_unescape(r){let e=!1;const t=r.replace(G1,(i,s,l,a)=>{if(typeof s=="string")return String.fromCharCode(Number.parseInt(s,16));if(typeof l=="string"){let u=Number.parseInt(l,16);return u<=65535?String.fromCharCode(Number.parseInt(l,16)):String.fromCharCode(55296+((u-=65536)>>10),56320+(u&1023))}return a in Bu?Bu[a]:(e=!0,"")});return e?null:t}_parseLiteral(r){if(r.length>=3){const e=r.match(/^(?:"""|"|'''|'|)/)[0],t=e.length;let i=Math.max(this._literalClosingPos,t);for(;(i=r.indexOf(e,i))>0;){let s=0;for(;r[i-s-1]==="\\";)s++;if(s%2===0){const l=r.substring(t,i),a=l.split(/\r\n|\r|\n/).length-1,u=i+t;if(t===1&&a!==0||t===3&&this._lineMode)break;return this._line+=a,{value:this._unescape(l),matchLength:u}}i++}this._literalClosingPos=r.length-t+1}return{value:"",matchLength:0}}_syntaxError(r){this._input=null;const e=new Error(`Unexpected "${r}" on line ${this._line}.`);return e.context={token:void 0,line:this._line,previousToken:this.previousToken},e}_readStartingBom(r){return r.startsWith("\uFEFF")?r.substr(1):r}tokenize(r,e){if(this._line=1,typeof r=="string")if(this._input=this._readStartingBom(r),typeof e=="function")X1(()=>this._tokenizeToEnd(e,!0));else{const t=[];let i;if(this._tokenizeToEnd((s,l)=>s?i=s:t.push(l),!0),i)throw i;return t}else this._pendingBuffer=null,typeof r.setEncoding=="function"&&r.setEncoding("utf8"),r.on("data",t=>{this._input!==null&&t.length!==0&&(this._pendingBuffer&&(t=Hd.Buffer.concat([this._pendingBuffer,t]),this._pendingBuffer=null),t[t.length-1]&128?this._pendingBuffer=t:(typeof this._input>"u"?this._input=this._readStartingBom(typeof t=="string"?t:t.toString()):this._input+=t,this._tokenizeToEnd(e,!1)))}),r.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(e,!0)}),r.on("error",e)}}const{rdf:Z1,xsd:Un}=Ir;let wl,K1=0;const $1={namedNode:i2,blankNode:l2,variable:a2,literal:s2,defaultGraph:u2,quad:Ou,triple:Ou};class on{constructor(r){this.id=r}get value(){return this.id}equals(r){return r instanceof on?this.id===r.id:!!r&&this.termType===r.termType&&this.value===r.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}let xd=class extends on{get termType(){return"NamedNode"}},Ql=class Xd extends on{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const r=this.id;let e=r.lastIndexOf('"')+1;return e<r.length&&r[e++]==="@"?r.substr(e).toLowerCase():""}get datatype(){return new xd(this.datatypeString)}get datatypeString(){const r=this.id,e=r.lastIndexOf('"')+1,t=e<r.length?r[e]:"";return t==="^"?r.substr(e+2):t!=="@"?Un.string:Z1.langString}equals(r){return r instanceof Xd?this.id===r.id:!!r&&!!r.datatype&&this.termType===r.termType&&this.value===r.value&&this.language===r.language&&this.datatype.value===r.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}},e2=class extends on{constructor(r){super(`_:${r}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}},t2=class extends on{constructor(r){super(`?${r}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}},r2=class extends on{constructor(){return super(""),wl||this}get termType(){return"DefaultGraph"}equals(r){return this===r||!!r&&this.termType===r.termType}};wl=new r2;let n2=class extends on{constructor(r,e,t,i){super(""),this._subject=r,this._predicate=e,this._object=t,this._graph=i||wl}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(r){return!!r&&this._subject.equals(r.subject)&&this._predicate.equals(r.predicate)&&this._object.equals(r.object)&&this._graph.equals(r.graph)}};function i2(n){return new xd(n)}function l2(n){return new e2(n||`n3-${K1++}`)}function s2(n,r){if(typeof r=="string")return new Ql(`"${n}"@${r.toLowerCase()}`);let e=r?r.value:"";return e===""&&(typeof n=="boolean"?e=Un.boolean:typeof n=="number"&&(Number.isFinite(n)?e=Number.isInteger(n)?Un.integer:Un.double:(e=Un.double,Number.isNaN(n)||(n=n>0?"INF":"-INF")))),e===""||e===Un.string?new Ql(`"${n}"`):new Ql(`"${n}"^^${e}`)}function a2(n){return new t2(n)}function u2(){return wl}function Ou(n,r,e,t){return new n2(n,r,e,t)}let Lu=0;class Gd{constructor(r){this._contextStack=[],this._graph=null,r=r||{},this._setBase(r.baseIRI),r.factory&&Wd(this,r.factory);const e=typeof r.format=="string"?r.format.match(/\w*$/)[0].toLowerCase():"",t=/turtle/.test(e),i=/trig/.test(e),s=/triple/.test(e),l=/quad/.test(e),a=this._n3Mode=/n3/.test(e),u=s||l;(this._supportsNamedGraphs=!(t||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(t||i||s||a),this._supportsRDFStar=e===""||/star|\*$/.test(e),u&&(this._resolveRelativeIRI=o=>null),this._blankNodePrefix=typeof r.blankNodePrefix!="string"?"":r.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=r.lexer||new J1({lineMode:u,n3:a}),this._explicitQuantifiers=!!r.explicitQuantifiers}static _resetBlankNodePrefix(){Lu=0}_setBase(r){if(!r)this._base="",this._basePath="";else{const e=r.indexOf("#");e>=0&&(r=r.substr(0,e)),this._base=r,this._basePath=r.indexOf("/")<0?r:r.replace(/[^\/?]*(?:\?.*)?$/,""),r=r.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=r[0],this._baseScheme=r[1]}}_saveContext(r,e,t,i,s){const l=this._n3Mode;this._contextStack.push({type:r,subject:t,predicate:i,object:s,graph:e,inverse:l?this._inversePredicate:!1,blankPrefix:l?this._prefixes._:"",quantified:l?this._quantified:null}),l&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(r,e){const t=this._contextStack.pop();if(!t||t.type!==r)return this._error(`Unexpected ${e.type}`,e);this._subject=t.subject,this._predicate=t.predicate,this._object=t.object,this._graph=t.graph,this._n3Mode&&(this._inversePredicate=t.inverse,this._prefixes._=t.blankPrefix,this._quantified=t.quantified)}_readInTopContext(r){switch(r.type){case"eof":return this._graph!==null?this._error("Unclosed graph",r):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(r)}}_readEntity(r,e){let t;switch(r.type){case"IRI":case"typeIRI":const i=this._resolveIRI(r.value);if(i===null)return this._error("Invalid IRI",r);t=this._namedNode(i);break;case"type":case"prefixed":const s=this._prefixes[r.prefix];if(s===void 0)return this._error(`Undefined prefix "${r.prefix}:"`,r);t=this._namedNode(s+r.value);break;case"blank":t=this._blankNode(this._prefixes[r.prefix]+r.value);break;case"var":t=this._variable(r.value.substr(1));break;default:return this._error(`Expected entity but got ${r.type}`,r)}return!e&&this._n3Mode&&t.id in this._quantified&&(t=this._quantified[t.id]),t}_readSubject(r){switch(this._predicate=null,r.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",r);case"}":return this._readPunctuation(r);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',r);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',r);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",r);if(r.prefix.length===0)return this._literalValue=r.value,this._completeSubjectLiteral;this._subject=this._literal(r.value,this._namedNode(r.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",r);default:if((this._subject=this._readEntity(r))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(r){const e=r.type;switch(e){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[r.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${e}`,r):(this._subject=null,e==="]"?this._readBlankNodeTail(r):this._readPunctuation(r));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",r);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",r);default:if((this._predicate=this._readEntity(r))===void 0)return}return this._readObject}_readObject(r){switch(r.type){case"literal":if(r.prefix.length===0)return this._literalValue=r.value,this._readDataTypeOrLang;this._object=this._literal(r.value,this._namedNode(r.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",r);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",r);default:if((this._object=this._readEntity(r))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(r){return r.type==="{"?this._readGraph(r):this._readPredicate(r)}_readGraph(r){return r.type!=="{"?this._error(`Expected graph but got ${r.type}`,r):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(r){return r.type==="]"?(this._subject=null,this._readBlankNodeTail(r)):(this._predicate=null,this._readPredicate(r))}_readBlankNodeTail(r){if(r.type!=="]")return this._readBlankNodePunctuation(r);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const e=this._predicate===null;return this._restoreContext("blank",r),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:e?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(r){switch(r.type){case".":case"}":return this._subject=null,this._readPunctuation(r);default:return this._readPredicate(r)}}_readListItem(r){let e=null,t=null,i=this._readListItem;const s=this._subject,l=this._contextStack,a=l[l.length-1];switch(r.type){case"[":this._saveContext("blank",this._graph,t=this._blankNode(),this.RDF_FIRST,this._subject=e=this._blankNode()),i=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,t=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",r),l.length!==0&&l[l.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(i=this._readPredicate,this._subject===this.RDF_NIL)return i}else if(i=this._getContextEndReader(),this._object===this.RDF_NIL)return i;t=this.RDF_NIL;break;case"literal":r.prefix.length===0?(this._literalValue=r.value,i=this._readListItemDataTypeOrLang):(e=this._literal(r.value,this._namedNode(r.prefix)),i=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",r);default:if((e=this._readEntity(r))===void 0)return}if(t===null&&(this._subject=t=this._blankNode()),s===null?a.predicate===null?a.subject=t:a.object=t:this._emit(s,this.RDF_REST,t,this._graph),e!==null){if(this._n3Mode&&(r.type==="IRI"||r.type==="prefixed"))return this._saveContext("item",this._graph,t,this.RDF_FIRST,e),this._subject=e,this._predicate=null,this._getPathReader(this._readListItem);this._emit(t,this.RDF_FIRST,e,this._graph)}return i}_readDataTypeOrLang(r){return this._completeObjectLiteral(r,!1)}_readListItemDataTypeOrLang(r){return this._completeObjectLiteral(r,!0)}_completeLiteral(r){let e=this._literal(this._literalValue);switch(r.type){case"type":case"typeIRI":const t=this._readEntity(r);if(t===void 0)return;e=this._literal(this._literalValue,t),r=null;break;case"langcode":e=this._literal(this._literalValue,r.value),r=null;break}return{token:r,literal:e}}_completeSubjectLiteral(r){return this._subject=this._completeLiteral(r).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(r,e){const t=this._completeLiteral(r);if(t)return this._object=t.literal,e&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),t.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(t.token))}_readFormulaTail(r){return r.type!=="}"?this._readPunctuation(r):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",r),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(r){let e,t=this._graph;const i=this._subject,s=this._inversePredicate;switch(r.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",r);if(this._n3Mode)return this._readFormulaTail(r);this._graph=null;case".":this._subject=null,e=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":e=this._readPredicate;break;case",":e=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",r);const l=this._predicate,a=this._object;this._subject=this._quad(i,l,a,this.DEFAULTGRAPH),e=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",r);this._subject=null,e=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(t=this._readEntity(r))!==void 0){e=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,r)}if(i!==null){const l=this._predicate,a=this._object;s?this._emit(a,l,i,t):this._emit(i,l,a,t)}return e}_readBlankNodePunctuation(r){let e;switch(r.type){case";":e=this._readPredicate;break;case",":e=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,r)}return this._emit(this._subject,this._predicate,this._object,this._graph),e}_readQuadPunctuation(r){return r.type!=="."?this._error("Expected dot to follow quad",r):this._readInTopContext}_readPrefix(r){return r.type!=="prefix"?this._error("Expected prefix to follow @prefix",r):(this._prefix=r.value,this._readPrefixIRI)}_readPrefixIRI(r){if(r.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,r);const e=this._readEntity(r);return this._prefixes[this._prefix]=e.value,this._prefixCallback(this._prefix,e),this._readDeclarationPunctuation}_readBaseIRI(r){const e=r.type==="IRI"&&this._resolveIRI(r.value);return e?(this._setBase(e),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",r)}_readNamedGraphLabel(r){switch(r.type){case"IRI":case"blank":case"prefixed":return this._readSubject(r),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",r)}}_readNamedGraphBlankLabel(r){return r.type!=="]"?this._error("Invalid graph label",r):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(r){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(r)):r.type!=="."?this._error("Expected declaration to end with a dot",r):this._readInTopContext}_readQuantifierList(r){let e;switch(r.type){case"IRI":case"prefixed":if((e=this._readEntity(r,!0))!==void 0)break;default:return this._error(`Unexpected ${r.type}`,r)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,e,this.QUANTIFIERS_GRAPH)):this._quantified[e.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(r){return r.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(r))}_getPathReader(r){return this._afterPath=r,this._readPath}_readPath(r){switch(r.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const e=this._contextStack,t=e.length&&e[e.length-1];if(t&&t.type==="item"){const i=this._subject;this._restoreContext("item",r),this._emit(this._subject,this.RDF_FIRST,i,this._graph)}return this._afterPath(r)}}_readForwardPath(r){let e,t;const i=this._blankNode();if((t=this._readEntity(r))!==void 0)return this._predicate===null?(e=this._subject,this._subject=i):(e=this._object,this._object=i),this._emit(e,t,i,this._graph),this._readPath}_readBackwardPath(r){const e=this._blankNode();let t,i;if((t=this._readEntity(r))!==void 0)return this._predicate===null?(i=this._subject,this._subject=e):(i=this._object,this._object=e),this._emit(e,t,i,this._graph),this._readPath}_readRDFStarTailOrGraph(r){return r.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(r))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,r):this._readRDFStarTail(r)}_readRDFStarTail(r){if(r.type!==">>")return this._error(`Expected >> but got ${r.type}`,r);const e=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",r),this._subject===null?(this._subject=e,this._readPredicate):(this._object=e,this._getContextEndReader())}_getContextEndReader(){const r=this._contextStack;if(!r.length)return this._readPunctuation;switch(r[r.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(r,e,t,i){this._callback(null,this._quad(r,e,t,i||this.DEFAULTGRAPH))}_error(r,e){const t=new Error(`${r} on line ${e.line}.`);t.context={token:e,line:e.line,previousToken:this._lexer.previousToken},this._callback(t),this._callback=Yl}_resolveIRI(r){return/^[a-z][a-z0-9+.-]*:/i.test(r)?r:this._resolveRelativeIRI(r)}_resolveRelativeIRI(r){if(!r.length)return this._base;switch(r[0]){case"#":return this._base+r;case"?":return this._base.replace(/(?:\?.*)?$/,r);case"/":return(r[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(r);default:return/^[^/:]*:/.test(r)?null:this._removeDotSegments(this._basePath+r)}}_removeDotSegments(r){if(!/(^|\/)\.\.?($|[/#?])/.test(r))return r;const e=r.length;let t="",i=-1,s=-1,l=0,a="/";for(;i<e;){switch(a){case":":if(s<0&&r[++i]==="/"&&r[++i]==="/")for(;(s=i+1)<e&&r[s]!=="/";)i=s;break;case"?":case"#":i=e;break;case"/":if(r[i+1]===".")switch(a=r[++i+1],a){case"/":t+=r.substring(l,i-1),l=i+1;break;case void 0:case"?":case"#":return t+r.substring(l,i)+r.substr(i+1);case".":if(a=r[++i+1],a===void 0||a==="/"||a==="?"||a==="#"){if(t+=r.substring(l,i-2),(l=t.lastIndexOf("/"))>=s&&(t=t.substr(0,l)),a!=="/")return`${t}/${r.substr(i+1)}`;l=i+1}}}a=r[++i]}return t+r.substring(l)}parse(r,e,t){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${Lu++}_`,this._prefixCallback=t||Yl,this._inversePredicate=!1,this._quantified=Object.create(null),!e){const i=[];let s;if(this._callback=(l,a)=>{l?s=l:a&&i.push(a)},this._lexer.tokenize(r).every(l=>this._readCallback=this._readCallback(l)),s)throw s;return i}this._callback=e,this._lexer.tokenize(r,(i,s)=>{i!==null?(this._callback(i),this._callback=Yl):this._readCallback&&(this._readCallback=this._readCallback(s))})}}function Yl(){}function Wd(n,r){const e=r.namedNode;n._namedNode=e,n._blankNode=r.blankNode,n._literal=r.literal,n._variable=r.variable,n._quad=r.quad,n.DEFAULTGRAPH=r.defaultGraph(),n.RDF_FIRST=e(Ir.rdf.first),n.RDF_REST=e(Ir.rdf.rest),n.RDF_NIL=e(Ir.rdf.nil),n.N3_FORALL=e(Ir.r.forAll),n.N3_FORSOME=e(Ir.r.forSome),n.ABBREVIATIONS={a:e(Ir.rdf.type),"=":e(Ir.owl.sameAs),">":e(Ir.log.implies)},n.QUANTIFIERS_GRAPH=e("urn:n3:quantifiers")}Wd(Gd.prototype,$1);if(typeof en>"u")var en={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};var mr=function(){function n(r,e){Nt(this,n),this.options=e||{},this.kb=r,this.target=e.target||{graph:{subjects:{},prefixes:{},terms:{}}},this.blankNodes=[],this.htmlOptions={selfClosing:"br img input area base basefont col colgroup source wbr isindex link meta param hr"},this.theOne="_:"+new Date().getTime(),this.language=null,this.vocabulary=null,this.blankCounter=0,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}],this.inXHTMLMode=!1,this.absURIRE=/[\w\_\-]+:\S+/,this.finishedHandlers=[],this.init()}return Ct(n,[{key:"addTriple",value:function(e,t,i,s){var l,a,u,o;typeof t>"u"?l=vr.namedNode(this.options.base):l=this.toRDFNodeObject(t),u=this.toRDFNodeObject(i),a=this.toRDFNodeObject(s),o=vr.namedNode(this.options.base),this.kb.add(l,u,a,o)}},{key:"ancestorPath",value:function(e){for(var t="";e&&e.nodeType!==en.DOCUMENT_NODE;)t="/"+e.localName+t,e=e.parentNode;return t}},{key:"copyMappings",value:function(e){var t={};for(var i in e)t[i]=e[i];return t}},{key:"copyProperties",value:function(){}},{key:"deriveDateTimeType",value:function(e){for(var t=0;t<n.dateTimeTypes.length;t++){var i=n.dateTimeTypes[t].pattern.exec(e);if(i&&i[0].length===e.length)return n.dateTimeTypes[t].type}return null}},{key:"init",value:function(){}},{key:"newBlankNode",value:function(){return this.blankCounter++,"_:"+this.blankCounter}},{key:"newSubjectOrigin",value:function(e,t){}},{key:"parseCURIE",value:function(e,t,i){var s=e.indexOf(":"),l;if(s>=0){var a=e.substring(0,s);if(a==="")return l=t[""],l?l+e.substring(s+1):null;if(a==="_")return"_:"+e.substring(s+1);if(n.NCNAME.test(a)&&(l=t[a],l))return l+e.substring(s+1)}return null}},{key:"parseCURIEOrURI",value:function(e,t,i){var s=this.parseCURIE(e,t,i);return s||this.resolveAndNormalize(i,e)}},{key:"parsePredicate",value:function(e,t,i,s,l,a){if(e==="")return null;var u=this.parseTermOrCURIEOrAbsURI(e,t,a?null:i,s,l);return u&&u.indexOf("_:")===0?null:u}},{key:"parsePrefixMappings",value:function(e,t){for(var i=this.tokenize(e),s=null,l=0;l<i.length;l++)i[l][i[l].length-1]===":"?s=i[l].substring(0,i[l].length-1):s&&(t[s]=this.options.base?gr(i[l],this.options.base):i[l],s=null)}},{key:"parseSafeCURIEOrCURIEOrURI",value:function(e,t,i){return e=this.trim(e),e.charAt(0)==="["&&e.charAt(e.length-1)==="]"?(e=e.substring(1,e.length-1),e=e.trim(e),e.length===0?null:e==="_:"?this.theOne:this.parseCURIE(e,t,i)):this.parseCURIEOrURI(e,t,i)}},{key:"parseTermOrCURIEOrAbsURI",value:function(e,t,i,s,l){e=this.trim(e);var a=this.parseCURIE(e,s,l);if(a)return a;if(i){if(t&&!this.absURIRE.exec(e))return t+e;var u=i[e];if(u)return u;var o=e.toLowerCase();if(u=i[o],u)return u}return this.absURIRE.exec(e)?this.resolveAndNormalize(l,e):null}},{key:"parseTermOrCURIEOrURI",value:function(e,t,i,s,l){e=this.trim(e);var a=this.parseCURIE(e,s,l);if(a)return a;var u=i[e];if(u)return u;var o=e.toLowerCase();return u=i[o],u||(t&&!this.absURIRE.exec(e)?t+e:this.resolveAndNormalize(l,e))}},{key:"parseURI",value:function(e){return e}},{key:"process",value:function(e,t){t=t||{};var i;e.nodeType===en.DOCUMENT_NODE?(e.baseURI&&!t.baseURI&&(t.baseURI=e.baseURI),i=e.baseURI,e=e.documentElement,e.baseURI||(e.baseURI=i),this.setContext(e)):e.parentNode.nodeType===en.DOCUMENT_NODE&&this.setContext(e);var s=[],l=function(Qt){if(!Qt&&t&&t.baseURI)return t.baseURI;var Kn=Qt.indexOf("#");return Kn>=0&&(Qt=Qt.substring(0,Kn)),t&&t.baseURIMap&&(Qt=t.baseURIMap(Qt)),Qt};for(s.push({current:e,context:this.push(null,l(e.baseURI))});s.length>0;){var a=s.shift();if(a.parent){if(a.context.parent&&a.context.parent.listMapping===a.listMapping)continue;for(var u in a.listMapping){var o=a.listMapping[u];if(o.length===0){this.addTriple(a.parent,a.subject,u,{type:n.objectURI,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});continue}for(var f=[],h=0;h<o.length;h++)f.push(this.newBlankNode());for(var d=0;d<f.length;d++)this.addTriple(a.parent,f[d],"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",o[d]),this.addTriple(a.parent,f[d],"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",{type:n.objectURI,value:d+1<f.length?f[d+1]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});this.addTriple(a.parent,a.subject,u,{type:n.objectURI,value:f[0]})}continue}var c=a.current,_=a.context,w=!1,k=null,C=null,j=null,S=_.prefixes,F=!1,b=[],y=_.listMapping,v=!_.parent,B=_.language,T=_.vocabulary;i=this.parseURI(l(c.baseURI)),c.item=null;var U=c.getAttributeNode("vocab");if(U){var E=this.trim(U.value);if(E.length>0){T=E;var P=i.spec;this.addTriple(c,P,"http://www.w3.org/ns/rdfa#usesVocabulary",{type:n.objectURI,value:T})}else T=this.vocabulary}for(var O=0;O<c.attributes.length;O++){var N=c.attributes[O];if(N.nodeName.charAt(0)==="x"&&N.nodeName.indexOf("xmlns:")===0){F||(S=this.copyMappings(S),F=!0);var X=N.nodeName.substring(6),L=n.trim(N.value);S[X]=this.options.base?gr(L,this.options.base):L}}var ae=c.getAttributeNode("prefix");ae&&(F||(S=this.copyMappings(S),F=!0),this.parsePrefixMappings(ae.value,S));for(var K=null,G=0;!K&&G<this.langAttributes.length;G++)K=c.getAttributeNodeNS(this.langAttributes[G].namespaceURI,this.langAttributes[G].localName);if(K){var $=n.trim(K.value);$.length>0?B=$:B=null}var J=c.getAttributeNode("rel"),ne=c.getAttributeNode("rev"),z=c.getAttributeNode("typeof"),ue=c.getAttributeNode("property"),Pe=c.getAttributeNode("datatype"),He=this.inHTMLMode?c.getAttributeNode("datetime"):null,be=c.getAttributeNode("content"),De=c.getAttributeNode("about"),_e=c.getAttributeNode("src"),Te=c.getAttributeNode("resource"),lt=c.getAttributeNode("href"),gt=c.getAttributeNode("inlist"),rt=[],Ee,Ue;if(J){Ue=this.tokenize(J.value);for(var Jt=0;Jt<Ue.length;Jt++)Ee=this.parsePredicate(Ue[Jt],T,_.terms,S,i,this.inHTMLMode&&ue!==null),Ee&&rt.push(Ee)}var Pt=[];if(ne){Ue=this.tokenize(ne.value);for(var Wt=0;Wt<Ue.length;Wt++)Ee=this.parsePredicate(Ue[Wt],T,_.terms,S,i,this.inHTMLMode&&ue),Ee&&Pt.push(Ee)}if(this.inHTMLMode&&(J||ne)&&ue&&(rt.length===0&&(J=null),Pt.length===0&&(ne=null)),J||ne?(De&&(k=this.parseSafeCURIEOrCURIEOrURI(De.value,S,i)),z&&(j=k),k||(c.parentNode.nodeType===en.DOCUMENT_NODE?k=l(c.baseURI):_.parentObject&&(k=l(c.parentNode.baseURI)===_.parentObject?l(c.baseURI):_.parentObject)),Te&&(C=this.parseSafeCURIEOrCURIEOrURI(Te.value,S,i)),C||(lt?C=this.resolveAndNormalize(i,encodeURI(lt.value)):_e?C=this.resolveAndNormalize(i,encodeURI(_e.value)):z&&!De&&!(this.inXHTMLMode&&(c.localName==="head"||c.localName==="body"))&&(C=this.newBlankNode())),z&&!De&&this.inXHTMLMode&&(c.localName==="head"||c.localName==="body")?j=k:z&&!De&&(j=C)):ue&&!be&&!Pe?(De&&(k=this.parseSafeCURIEOrCURIEOrURI(De.value,S,i),z&&(j=k)),!k&&c.parentNode.nodeType===en.DOCUMENT_NODE?(k=l(c.baseURI),z&&(j=k)):!k&&_.parentObject&&(k=l(c.parentNode.baseURI)===_.parentObject?l(c.baseURI):_.parentObject),z&&!j&&(Te&&(j=this.parseSafeCURIEOrCURIEOrURI(Te.value,S,i)),!j&&lt&&(j=this.resolveAndNormalize(i,encodeURI(lt.value))),!j&&_e&&(j=this.resolveAndNormalize(i,encodeURI(_e.value))),!j&&(this.inXHTMLMode||this.inHTMLMode)&&(c.localName==="head"||c.localName==="body")&&(j=k),j||(j=this.newBlankNode()),C=j)):(De&&(k=this.parseSafeCURIEOrCURIEOrURI(De.value,S,i)),!k&&Te&&(k=this.parseSafeCURIEOrCURIEOrURI(Te.value,S,i)),!k&&lt&&(k=this.resolveAndNormalize(i,encodeURI(lt.value))),!k&&_e&&(k=this.resolveAndNormalize(i,encodeURI(_e.value))),k||(c.parentNode.nodeType===en.DOCUMENT_NODE?k=l(c.baseURI):(this.inXHTMLMode||this.inHTMLMode)&&(c.localName==="head"||c.localName==="body")?k=l(c.parentNode.baseURI)===_.parentObject?l(c.baseURI):_.parentObject:z?k=this.newBlankNode():_.parentObject&&(k=l(c.parentNode.baseURI)===_.parentObject?l(c.baseURI):_.parentObject,ue||(w=!0))),z&&(j=k)),k&&(De||Te||j)){var cr=k;z&&!De&&!Te&&C&&(cr=C),this.newSubjectOrigin(c,cr)}if(j){Ue=this.tokenize(z.value);for(var Be=0;Be<Ue.length;Be++){var Ke=this.parseTermOrCURIEOrAbsURI(Ue[Be],T,_.terms,S,i);Ke&&this.addTriple(c,j,n.typeURI,{type:n.objectURI,value:Ke})}}if(k&&k!==_.parentObject&&(y={},v=!0),C){if(J&&gt)for(var Ge=0;Ge<rt.length;Ge++){var $e=y[rt[Ge]];$e||($e=[],y[rt[Ge]]=$e),$e.push({type:n.objectURI,value:C})}else if(J)for(var pt=0;pt<rt.length;pt++)this.addTriple(c,k,rt[pt],{type:n.objectURI,value:C});if(ne)for(var At=0;At<Pt.length;At++)this.addTriple(c,C,Pt[At],{type:n.objectURI,value:k})}else{if(k&&!C&&(J||ne)&&(C=this.newBlankNode()),J&&gt)for(var qt=0;qt<rt.length;qt++){var x=y[rt[qt]];x||(x=[],y[Ee]=x),b.push({predicate:rt[qt],list:x})}else if(J)for(var D=0;D<rt.length;D++)b.push({predicate:rt[D],forward:!0});if(ne)for(var I=0;I<Pt.length;I++)b.push({predicate:Pt[I],forward:!1})}if(ue){var Z=null,oe=null;Pe?(Z=Pe.value===""?n.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(Pe.value,T,_.terms,S,i),He&&!be?oe=He.value:oe=Z===n.XMLLiteralURI||Z===n.HTMLLiteralURI?null:be?be.value:c.textContent):be?(Z=n.PlainLiteralURI,oe=be.value):He?(oe=He.value,Z=n.deriveDateTimeType(oe),Z||(Z=n.PlainLiteralURI)):!J&&!ne&&(Te&&(oe=this.parseSafeCURIEOrCURIEOrURI(Te.value,S,i)),!oe&&lt?oe=this.resolveAndNormalize(i,encodeURI(lt.value)):!oe&&_e&&(oe=this.resolveAndNormalize(i,encodeURI(_e.value))),oe&&(Z=n.objectURI)),Z||(z&&!De?(Z=n.objectURI,oe=j):(oe=c.textContent,this.inHTMLMode&&c.localName==="time"&&(Z=n.deriveDateTimeType(oe)),Z||(Z=n.PlainLiteralURI))),Ue=this.tokenize(ue.value);for(var ge=0;ge<Ue.length;ge++){var ye=this.parsePredicate(Ue[ge],T,_.terms,S,i);if(ye)if(gt){var ke=y[ye];ke||(ke=[],y[ye]=ke),ke.push(Z===n.XMLLiteralURI||Z===n.HTMLLiteralURI?{type:Z,value:c.childNodes}:{type:Z||n.PlainLiteralURI,value:oe,language:B})}else Z===n.XMLLiteralURI||Z===n.HTMLLiteralURI?this.addTriple(c,k,ye,{type:Z,value:c.childNodes}):this.addTriple(c,k,ye,{type:Z||n.PlainLiteralURI,value:oe,language:B})}}if(k&&!w)for(var qe=0;qe<_.incomplete.length;qe++)_.incomplete[qe].list?_.incomplete[qe].list.push({type:n.objectURI,value:k}):_.incomplete[qe].forward?this.addTriple(c,_.subject,_.incomplete[qe].predicate,{type:n.objectURI,value:k}):this.addTriple(c,k,_.incomplete[qe].predicate,{type:n.objectURI,value:_.subject});var Xe=null,ct=k;w?(Xe=this.push(_,_.subject),Xe.parentObject=l(c.parentNode.baseURI)===_.parentObject?l(c.baseURI):_.parentObject,Xe.incomplete=_.incomplete,Xe.language=B,Xe.prefixes=S,Xe.vocabulary=T):(Xe=this.push(_,k),Xe.parentObject=C||k||_.subject,Xe.prefixes=S,Xe.incomplete=b,C&&(ct=C,y={},v=!0),Xe.listMapping=y,Xe.language=B,Xe.vocabulary=T),v&&s.unshift({parent:c,context:_,subject:ct,listMapping:y});for(var at=c.lastChild;at;at=at.previousSibling)at.nodeType===en.ELEMENT_NODE&&s.unshift({current:at,context:Xe})}this.inHTMLMode&&this.copyProperties();for(var er=0;er<this.finishedHandlers.length;er++)this.finishedHandlers[er](e)}},{key:"push",value:function(e,t){return{parent:e,subject:t||(e?e.subject:null),parentObject:null,incomplete:[],listMapping:e?e.listMapping:{},language:e?e.language:this.language,prefixes:e?e.prefixes:this.target.graph.prefixes,terms:e?e.terms:this.target.graph.terms,vocabulary:e?e.vocabulary:this.vocabulary}}},{key:"resolveAndNormalize",value:function(e,t){return gr(t,e)}},{key:"setContext",value:function(e){e.localName==="html"&&e.getAttribute("version")==="XHTML+RDFa 1.1"?this.setXHTMLContext():e.localName==="html"||e.namespaceURI==="http://www.w3.org/1999/xhtml"?typeof document<"u"&&document.doctype?document.doctype.publicId==="-//W3C//DTD XHTML+RDFa 1.0//EN"&&document.doctype.systemId==="http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"?(console.log("WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode."),this.setHTMLContext()):document.doctype.publicId==="-//W3C//DTD XHTML+RDFa 1.1//EN"&&document.doctype.systemId==="http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"?this.setXHTMLContext():this.setHTMLContext():this.setHTMLContext():this.setXMLContext()}},{key:"setHTMLContext",value:function(){this.setInitialContext(),this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.inXHTMLMode=!1,this.inHTMLMode=!0}},{key:"setInitialContext",value:function(){this.vocabulary=null,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}]}},{key:"setXHTMLContext",value:function(){this.setInitialContext(),this.inXHTMLMode=!0,this.inHTMLMode=!1,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.target.graph.terms.alternate="http://www.w3.org/1999/xhtml/vocab#alternate",this.target.graph.terms.appendix="http://www.w3.org/1999/xhtml/vocab#appendix",this.target.graph.terms.bookmark="http://www.w3.org/1999/xhtml/vocab#bookmark",this.target.graph.terms.cite="http://www.w3.org/1999/xhtml/vocab#cite",this.target.graph.terms.chapter="http://www.w3.org/1999/xhtml/vocab#chapter",this.target.graph.terms.contents="http://www.w3.org/1999/xhtml/vocab#contents",this.target.graph.terms.copyright="http://www.w3.org/1999/xhtml/vocab#copyright",this.target.graph.terms.first="http://www.w3.org/1999/xhtml/vocab#first",this.target.graph.terms.glossary="http://www.w3.org/1999/xhtml/vocab#glossary",this.target.graph.terms.help="http://www.w3.org/1999/xhtml/vocab#help",this.target.graph.terms.icon="http://www.w3.org/1999/xhtml/vocab#icon",this.target.graph.terms.index="http://www.w3.org/1999/xhtml/vocab#index",this.target.graph.terms.last="http://www.w3.org/1999/xhtml/vocab#last",this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license",this.target.graph.terms.meta="http://www.w3.org/1999/xhtml/vocab#meta",this.target.graph.terms.next="http://www.w3.org/1999/xhtml/vocab#next",this.target.graph.terms.prev="http://www.w3.org/1999/xhtml/vocab#prev",this.target.graph.terms.previous="http://www.w3.org/1999/xhtml/vocab#previous",this.target.graph.terms.section="http://www.w3.org/1999/xhtml/vocab#section",this.target.graph.terms.stylesheet="http://www.w3.org/1999/xhtml/vocab#stylesheet",this.target.graph.terms.subsection="http://www.w3.org/1999/xhtml/vocab#subsection",this.target.graph.terms.start="http://www.w3.org/1999/xhtml/vocab#start",this.target.graph.terms.top="http://www.w3.org/1999/xhtml/vocab#top",this.target.graph.terms.up="http://www.w3.org/1999/xhtml/vocab#up",this.target.graph.terms.p3pv1="http://www.w3.org/1999/xhtml/vocab#p3pv1",this.target.graph.terms.related="http://www.w3.org/1999/xhtml/vocab#related",this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role",this.target.graph.terms.transformation="http://www.w3.org/1999/xhtml/vocab#transformation"}},{key:"setXMLContext",value:function(){this.setInitialContext(),this.inXHTMLMode=!1,this.inHTMLMode=!1}},{key:"tokenize",value:function(e){return this.trim(e).split(/\s+/)}},{key:"toRDFNodeObject",value:function(e){var t=this;if(!(typeof e>"u")){if(typeof e=="string")return e.substring(0,2)==="_:"?(typeof this.blankNodes[e.substring(2)]>"u"&&(this.blankNodes[e.substring(2)]=new Or(e.substring(2))),this.blankNodes[e.substring(2)]):vr.namedNode(e);switch(e.type){case n.objectURI:return e.value.substring(0,2)==="_:"?(typeof this.blankNodes[e.value.substring(2)]>"u"&&(this.blankNodes[e.value.substring(2)]=new Or(e.value.substring(2))),this.blankNodes[e.value.substring(2)]):vr.namedNode(e.value);case n.PlainLiteralURI:return new Fr(e.value,e.language||"");case n.XMLLiteralURI:case n.HTMLLiteralURI:var i="";return Object.keys(e.value).forEach(function(s){i+=K0(e.value[s],t.htmlOptions)}),new Fr(i,"",new Gt(e.type));default:return new Fr(e.value,"",new Gt(e.type))}}}},{key:"trim",value:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}],[{key:"parseRDFaDOM",value:function(e,t,i){var s=new n(t,{base:i});e.baseURI||(e.baseURI=i),s.process(e,{baseURI:i})}},{key:"tokenize",value:function(e){return this.trim(e).split(/\s+/)}},{key:"trim",value:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}])}();mr.XMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral";mr.HTMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML";mr.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral";mr.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object";mr.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";mr.nameChar="[-A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�က0-F.0-9·̀-ͯ‿-⁀]";mr.nameStartChar="[A-Za-zÀ-ÖØ-öø-ÿĀ-ıĴ-ľŁ-ňŊ-žƀ-ǃǍ-ǰǴ-ǵǺ-ȗɐ-ʨʻ-ˁΆΈ-ΊΌΎ-ΡΣ-ώϐ-ϖϚϜϞϠϢ-ϳЁ-ЌЎ-яё-ќў-ҁҐ-ӄӇ-ӈӋ-ӌӐ-ӫӮ-ӵӸ-ӹԱ-Ֆՙա-ֆא-תװ-ײء-غف-يٱ-ڷں-ھۀ-ێې-ۓەۥ-ۦअ-हऽक़-ॡঅ-ঌএ-ঐও-নপ-রলশ-হড়-ঢ়য়-ৡৰ-ৱਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઋઍએ-ઑઓ-નપ-રલ-ળવ-હઽૠଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଶ-ହଽଡ଼-ଢ଼ୟ-ୡஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-வஷ-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠ-ౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹೞೠ-ೡഅ-ഌഎ-ഐഒ-നപ-ഹൠ-ൡก-ฮะา-ำเ-ๅກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ຮະາ-ຳຽເ-ໄཀ-ཇཉ-ཀྵႠ-Ⴥა-ჶᄀᄂ-ᄃᄅ-ᄇᄉᄋ-ᄌᄎ-ᄒᄼᄾᅀᅌᅎᅐᅔ-ᅕᅙᅟ-ᅡᅣᅥᅧᅩᅭ-ᅮᅲ-ᅳᅵᆞᆨᆫᆮ-ᆯᆷ-ᆸᆺᆼ-ᇂᇫᇰᇹḀ-ẛẠ-ỹἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼΩK-Å℮ↀ-ↂぁ-ゔァ-ヺㄅ-ㄬ가-힣一-龥〇〡-〩_]";mr.NCNAME=new RegExp("^"+mr.nameStartChar+mr.nameChar+"*$");mr.dateTimeTypes=[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:"http://www.w3.org/2001/XMLSchema#duration"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#dateTime"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#date"},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#time"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:"http://www.w3.org/2001/XMLSchema#gYearMonth"},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:"http://www.w3.org/2001/XMLSchema#gYear"}];var fl=mr.parseRDFaDOM,yl=function(){function n(r){Nt(this,n),this.store=r,this.bnodes={},this.why=null,this.reify=!1}return Ct(n,[{key:"frameFactory",value:function(e,t,i){return{NODE:1,ARC:2,parent:t,parser:e,store:e.store,element:i,lastChild:0,base:null,lang:null,node:null,nodeType:null,listIndex:1,rdfid:null,datatype:null,collection:!1,terminateFrame:function(){this.collection&&this.node.close()},addSymbol:function(l,a){a=gr(a,this.base),this.node=this.store.sym(a),this.nodeType=l},loadTriple:function(){if(this.parent.parent.collection?this.parent.parent.node.append(this.node):this.store.add(this.parent.parent.node,this.parent.node,this.node,this.parser.why),this.parent.rdfid!=null){var l=this.store.sym(gr("#"+this.parent.rdfid,this.base));this.store.add(l,this.store.sym(n.ns.RDF+"type"),this.store.sym(n.ns.RDF+"Statement"),this.parser.why),this.store.add(l,this.store.sym(n.ns.RDF+"subject"),this.parent.parent.node,this.parser.why),this.store.add(l,this.store.sym(n.ns.RDF+"predicate"),this.parent.node,this.parser.why),this.store.add(l,this.store.sym(n.ns.RDF+"object"),this.node,this.parser.why)}},isTripleToLoad:function(){return this.parent!=null&&this.parent.parent!=null&&this.nodeType===this.NODE&&this.parent.nodeType===this.ARC&&this.parent.parent.nodeType===this.NODE},addNode:function(l){this.addSymbol(this.NODE,l),this.isTripleToLoad()&&this.loadTriple()},addCollection:function(){this.nodeType=this.NODE,this.node=this.store.collection(),this.collection=!0,this.isTripleToLoad()&&this.loadTriple()},addCollectionArc:function(){this.nodeType=this.ARC},addBNode:function(l){l!=null?this.parser.bnodes[l]!=null?this.node=this.parser.bnodes[l]:this.node=this.parser.bnodes[l]=this.store.bnode():this.node=this.store.bnode(),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()},addArc:function(l){l===n.ns.RDF+"li"&&(l=n.ns.RDF+"_"+this.parent.listIndex,this.parent.listIndex++),this.addSymbol(this.ARC,l)},addLiteral:function(l){this.parent.datatype&&this.parent.datatype!==n.ns.RDF+"langString"?this.node=this.store.literal(l,this.store.sym(this.parent.datatype)):this.node=this.store.literal(l,this.lang),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()}}}},{key:"getAttributeNodeNS",value:function(e,t,i){var s=null;if(e.getAttributeNodeNS)s=e.getAttributeNodeNS(t,i);else for(var l=e.attributes,a,u,o=0;o<l.length;++o)if(a=l[o],a.namespaceURI===t&&(u=a.prefix?a.prefix+":"+i:i,u===a.nodeName)){s=a;break}return s}},{key:"parse",value:function(e,t,i){var s=e.childNodes;this.cleanParser();var l;if(e.nodeType===n.nodeType.DOCUMENT){for(var a=0;a<s.length;a++)if(s[a].nodeType===n.nodeType.ELEMENT){l=s[a];break}}else if(e.nodeType===n.nodeType.ELEMENT)l=e;else throw new Error("RDFParser: can't find root in "+t+". Halting. ");this.why=i;var u=this.frameFactory(this);return this.base=t,u.base=t,u.lang=null,this.parseDOM(this.buildFrame(u,l)),!0}},{key:"parseDOM",value:function(e){for(var t,i=(function(b){var y="";if(b.namespaceURI==null)throw new Error("RDF/XML syntax error: No namespace for "+b.localName+" in "+this.base);return b.namespaceURI&&(y=y+b.namespaceURI),b.localName?y=y+b.localName:b.nodeName&&(b.nodeName.indexOf(":")>=0?y=y+b.nodeName.split(":")[1]:y=y+b.nodeName),y}).bind(this),s=!0;e.parent;){var l=e.element,a=l.attributes;if(l.nodeType===n.nodeType.TEXT||l.nodeType===n.nodeType.CDATA_SECTION)e.parent.nodeType===e.NODE&&(e.addArc(n.ns.RDF+"value"),e=this.buildFrame(e)),e.addLiteral(l.nodeValue);else if(i(l)!==n.ns.RDF+"RDF")if(e.parent&&e.parent.collection&&(e.addCollectionArc(),e=this.buildFrame(e,e.element),e.parent.element=null),!e.parent||!e.parent.nodeType||e.parent.nodeType===e.ARC){var u=this.getAttributeNodeNS(l,n.ns.RDF,"about");if(t=this.getAttributeNodeNS(l,n.ns.RDF,"ID"),u&&t)throw new Error("RDFParser: "+l.nodeName+" has both rdf:id and rdf:about. Halting. Only one of these properties may be specified on a node.");if(!u&&t)e.addNode("#"+t.nodeValue),l.removeAttributeNode(t);else if(u==null&&t==null){var o=this.getAttributeNodeNS(l,n.ns.RDF,"nodeID");o?(e.addBNode(o.nodeValue),l.removeAttributeNode(o)):e.addBNode()}else e.addNode(u.nodeValue),l.removeAttributeNode(u);var f=this.getAttributeNodeNS(l,n.ns.RDF,"type");n.ns.RDF+"Description"!==i(l)&&(f={nodeValue:i(l)}),f!=null&&(this.store.add(e.node,this.store.sym(n.ns.RDF+"type"),this.store.sym(gr(f.nodeValue,e.base)),this.why),f.nodeName&&l.removeAttributeNode(f));for(var h=a.length-1;h>=0;h--)this.store.add(e.node,this.store.sym(i(a[h])),this.store.literal(a[h].nodeValue,e.lang),this.why)}else{e.addArc(i(l)),this.reify&&(t=this.getAttributeNodeNS(l,n.ns.RDF,"ID"),t&&(e.rdfid=t.nodeValue,l.removeAttributeNode(t)));var d=this.getAttributeNodeNS(l,n.ns.RDF,"parseType"),c=this.getAttributeNodeNS(l,n.ns.RDF,"datatype");if(c&&(e.datatype=c.nodeValue,l.removeAttributeNode(c)),d){var _=d.nodeValue;_==="Literal"?(e.datatype=n.ns.RDF+"XMLLiteral",e=this.buildFrame(e),e.addLiteral(l.innerHTML||l.childNodes),s=!1):_==="Resource"?(e=this.buildFrame(e,e.element),e.parent.element=null,e.addBNode()):_==="Collection"&&(e=this.buildFrame(e,e.element),e.parent.element=null,e.addCollection()),l.removeAttributeNode(d)}if(a.length!==0){var w=this.getAttributeNodeNS(l,n.ns.RDF,"resource"),k=this.getAttributeNodeNS(l,n.ns.RDF,"nodeID");e=this.buildFrame(e),w?(e.addNode(w.nodeValue),l.removeAttributeNode(w)):k?(e.addBNode(k.nodeValue),l.removeAttributeNode(k)):e.addBNode();for(var C=a.length-1;C>=0;C--){var j=this.buildFrame(e);j.addArc(i(a[C])),i(a[C])===n.ns.RDF+"type"?this.buildFrame(j).addNode(a[C].nodeValue):this.buildFrame(j).addLiteral(a[C].nodeValue)}}else l.childNodes.length===0&&this.buildFrame(e).addLiteral("")}for(l=e.element;e.parent;){for(var S=e;l==null;)e=e.parent,l=e.element;var F=l.childNodes&&l.childNodes[e.lastChild];if(!F||!s){if(e.terminateFrame(),!(e=e.parent))break;l=e.element,s=!0}else if(F.nodeType!==n.nodeType.ELEMENT&&F.nodeType!==n.nodeType.TEXT&&F.nodeType!==n.nodeType.CDATA_SECTION||(F.nodeType===n.nodeType.TEXT||F.nodeType===n.nodeType.CDATA_SECTION)&&l.childNodes.length!==1)e.lastChild++;else{e.lastChild++,e=this.buildFrame(S,l.childNodes[e.lastChild-1]);break}}}}},{key:"cleanParser",value:function(){this.bnodes={},this.why=null}},{key:"buildFrame",value:function(e,t){var i=this.frameFactory(this,e,t);if(e&&(i.base=e.base,i.lang=e.lang),!t||t.nodeType===n.nodeType.TEXT||t.nodeType===n.nodeType.CDATA_SECTION)return i;var s=t.attributes,l=t.getAttributeNode("xml:base");l!=null&&(i.base=l.nodeValue,t.removeAttribute("xml:base"));var a=t.getAttributeNode("xml:lang");a!=null&&(i.lang=a.nodeValue,t.removeAttribute("xml:lang"));for(var u=s.length-1;u>=0;u--)if(s[u].nodeName.substr(0,3)==="xml"){if(s[u].name.slice(0,6)==="xmlns:"){var o=s[u].nodeValue;this.base&&(o=gr(o,this.base)),this.store.setPrefixForURI(s[u].name.slice(6),o)}t.removeAttributeNode(s[u])}return i}}])}();Se(yl,"ns",{RDF:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDFS:"http://www.w3.org/2000/01/rdf-schema#"});Se(yl,"nodeType",{ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12});function o2(n,r,e){var t,i,s,l=["INSERT","DELETE","WHERE"],a=Zt("http://www.w3.org/ns/pim/patch#"),u=Fs(r,r,e,e,null,null,"",null),o={},f=function(k,C,j,S,F){return"Line "+(C+1)+" of <"+k+`>: Bad syntax:
   `+F+`
   at: "`+j.slice(S,S+30)+'"'};t=0;var h=r.sym(e+"#query");for(o.query=h;;){if(i=u.skipSpace(n,t),i<0)return o;if(n[i]===";"){if(t=u.skipSpace(n,i+1),t<0)return o;i=t}var d=!1;for(s=0;s<l.length;s++){var c=l[s];if(n.slice(i,i+c.length)===c){if(t=u.skipSpace(n,i+c.length),t<0)throw f(u._thisDoc,u.lines,n,i+c.length,"found EOF, needed {...} after "+c);if((c==="INSERT"||c==="DELETE")&&n.slice(t,t+4)==="DATA"){if(i=u.skipSpace(n,t+4),i<0)throw f(u._thisDoc,u.lines,n,t+4,"needed {...} after INSERT DATA "+c);t=i}var _=[];if(i=u.node(n,t,_),i<0)throw f(u._thisDoc,u.lines,n,t,"bad syntax or EOF in {...} after "+c);o[c.toLowerCase()]=_[0],r.add(h,a(c.toLowerCase()),_[0]),d=!0,t=i}}if(!d&&n.slice(i,i+7)==="@prefix"){if(t=u.directive(n,i),t<0)throw f(u._thisDoc,u.lines,n,t,"bad syntax or EOF after @prefix ");t=u.checkDot(n,t),d=!0}if(!d)throw f(u._thisDoc,u.lines,n,i,"Unknown syntax at start of statememt: '"+n.slice(i).slice(0,20)+"'")}}function os(n,r,e){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"text/turtle",i=arguments.length>4?arguments[4]:void 0;t=t||vn,t=t.split(";")[0];try{if(t===xc||t===vn){var s=Fs(r,r,e,e,null,null,"",null);s.loadBuf(n),u()}else if(t===hi){var l=new yl(r);l.parse(qn(n),e,r.sym(e)),u()}else if(t===is)fl(qn(n,{contentType:is}),r,e),u();else if(t===Ja)fl(qn(n,{contentType:Ja}),r,e),u();else if(t===n0||t===i0)o2(n,r,e),u();else if(t===ts)jd(n,r,e,u);else if(t===ns||t===rs){var a=new Gd({factory:us});f(null,n)}else throw t===void 0?new Error("contentType is undefined"):new Error("Don't know how to parse "+t+" yet")}catch(d){o(d)}os.handled={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/sparql-update":!0,"application/sparql-update-single-match":!0,"application/ld+json":!0,"application/nquads":!0,"application/n-quads":!0};function u(){if(i)i(null,r);else return}function o(d){if(t!==ts||t!==ns||t!==rs)if(i)i(d,r);else{var c=new Error(""+d+" while trying to parse <"+e+"> as "+t);throw c.cause=d,c}}function f(d,c){try{a.parse(c,h)}catch(_){i(_,r)}}function h(d,c){c?r.add(c.subject,c.predicate,c.object,c.graph):i(d,r)}}var fs={exports:{}};(function(n,r){var e=typeof self<"u"?self:ps,t=function(){function s(){this.fetch=!1,this.DOMException=e.DOMException}return s.prototype=e,new s}();(function(s){(function(l){var a={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function u(N){return N&&DataView.prototype.isPrototypeOf(N)}if(a.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(N){return N&&o.indexOf(Object.prototype.toString.call(N))>-1};function h(N){if(typeof N!="string"&&(N=String(N)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(N))throw new TypeError("Invalid character in header field name");return N.toLowerCase()}function d(N){return typeof N!="string"&&(N=String(N)),N}function c(N){var X={next:function(){var L=N.shift();return{done:L===void 0,value:L}}};return a.iterable&&(X[Symbol.iterator]=function(){return X}),X}function _(N){this.map={},N instanceof _?N.forEach(function(X,L){this.append(L,X)},this):Array.isArray(N)?N.forEach(function(X){this.append(X[0],X[1])},this):N&&Object.getOwnPropertyNames(N).forEach(function(X){this.append(X,N[X])},this)}_.prototype.append=function(N,X){N=h(N),X=d(X);var L=this.map[N];this.map[N]=L?L+", "+X:X},_.prototype.delete=function(N){delete this.map[h(N)]},_.prototype.get=function(N){return N=h(N),this.has(N)?this.map[N]:null},_.prototype.has=function(N){return this.map.hasOwnProperty(h(N))},_.prototype.set=function(N,X){this.map[h(N)]=d(X)},_.prototype.forEach=function(N,X){for(var L in this.map)this.map.hasOwnProperty(L)&&N.call(X,this.map[L],L,this)},_.prototype.keys=function(){var N=[];return this.forEach(function(X,L){N.push(L)}),c(N)},_.prototype.values=function(){var N=[];return this.forEach(function(X){N.push(X)}),c(N)},_.prototype.entries=function(){var N=[];return this.forEach(function(X,L){N.push([L,X])}),c(N)},a.iterable&&(_.prototype[Symbol.iterator]=_.prototype.entries);function w(N){if(N.bodyUsed)return Promise.reject(new TypeError("Already read"));N.bodyUsed=!0}function k(N){return new Promise(function(X,L){N.onload=function(){X(N.result)},N.onerror=function(){L(N.error)}})}function C(N){var X=new FileReader,L=k(X);return X.readAsArrayBuffer(N),L}function j(N){var X=new FileReader,L=k(X);return X.readAsText(N),L}function S(N){for(var X=new Uint8Array(N),L=new Array(X.length),ae=0;ae<X.length;ae++)L[ae]=String.fromCharCode(X[ae]);return L.join("")}function F(N){if(N.slice)return N.slice(0);var X=new Uint8Array(N.byteLength);return X.set(new Uint8Array(N)),X.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(N){this._bodyInit=N,N?typeof N=="string"?this._bodyText=N:a.blob&&Blob.prototype.isPrototypeOf(N)?this._bodyBlob=N:a.formData&&FormData.prototype.isPrototypeOf(N)?this._bodyFormData=N:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)?this._bodyText=N.toString():a.arrayBuffer&&a.blob&&u(N)?(this._bodyArrayBuffer=F(N.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(N)||f(N))?this._bodyArrayBuffer=F(N):this._bodyText=N=Object.prototype.toString.call(N):this._bodyText="",this.headers.get("content-type")||(typeof N=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var N=w(this);if(N)return N;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?w(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(C)}),this.text=function(){var N=w(this);if(N)return N;if(this._bodyBlob)return j(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(S(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(T)}),this.json=function(){return this.text().then(JSON.parse)},this}var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(N){var X=N.toUpperCase();return y.indexOf(X)>-1?X:N}function B(N,X){X=X||{};var L=X.body;if(N instanceof B){if(N.bodyUsed)throw new TypeError("Already read");this.url=N.url,this.credentials=N.credentials,X.headers||(this.headers=new _(N.headers)),this.method=N.method,this.mode=N.mode,this.signal=N.signal,!L&&N._bodyInit!=null&&(L=N._bodyInit,N.bodyUsed=!0)}else this.url=String(N);if(this.credentials=X.credentials||this.credentials||"same-origin",(X.headers||!this.headers)&&(this.headers=new _(X.headers)),this.method=v(X.method||this.method||"GET"),this.mode=X.mode||this.mode||null,this.signal=X.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&L)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(L)}B.prototype.clone=function(){return new B(this,{body:this._bodyInit})};function T(N){var X=new FormData;return N.trim().split("&").forEach(function(L){if(L){var ae=L.split("="),K=ae.shift().replace(/\+/g," "),G=ae.join("=").replace(/\+/g," ");X.append(decodeURIComponent(K),decodeURIComponent(G))}}),X}function U(N){var X=new _,L=N.replace(/\r?\n[\t ]+/g," ");return L.split(/\r?\n/).forEach(function(ae){var K=ae.split(":"),G=K.shift().trim();if(G){var $=K.join(":").trim();X.append(G,$)}}),X}b.call(B.prototype);function E(N,X){X||(X={}),this.type="default",this.status=X.status===void 0?200:X.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in X?X.statusText:"OK",this.headers=new _(X.headers),this.url=X.url||"",this._initBody(N)}b.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new _(this.headers),url:this.url})},E.error=function(){var N=new E(null,{status:0,statusText:""});return N.type="error",N};var P=[301,302,303,307,308];E.redirect=function(N,X){if(P.indexOf(X)===-1)throw new RangeError("Invalid status code");return new E(null,{status:X,headers:{location:N}})},l.DOMException=s.DOMException;try{new l.DOMException}catch{l.DOMException=function(X,L){this.message=X,this.name=L;var ae=Error(X);this.stack=ae.stack},l.DOMException.prototype=Object.create(Error.prototype),l.DOMException.prototype.constructor=l.DOMException}function O(N,X){return new Promise(function(L,ae){var K=new B(N,X);if(K.signal&&K.signal.aborted)return ae(new l.DOMException("Aborted","AbortError"));var G=new XMLHttpRequest;function $(){G.abort()}G.onload=function(){var J={status:G.status,statusText:G.statusText,headers:U(G.getAllResponseHeaders()||"")};J.url="responseURL"in G?G.responseURL:J.headers.get("X-Request-URL");var ne="response"in G?G.response:G.responseText;L(new E(ne,J))},G.onerror=function(){ae(new TypeError("Network request failed"))},G.ontimeout=function(){ae(new TypeError("Network request failed"))},G.onabort=function(){ae(new l.DOMException("Aborted","AbortError"))},G.open(K.method,K.url,!0),K.credentials==="include"?G.withCredentials=!0:K.credentials==="omit"&&(G.withCredentials=!1),"responseType"in G&&a.blob&&(G.responseType="blob"),K.headers.forEach(function(J,ne){G.setRequestHeader(ne,J)}),K.signal&&(K.signal.addEventListener("abort",$),G.onreadystatechange=function(){G.readyState===4&&K.signal.removeEventListener("abort",$)}),G.send(typeof K._bodyInit>"u"?null:K._bodyInit)})}return O.polyfill=!0,s.fetch||(s.fetch=O,s.Headers=_,s.Request=B,s.Response=E),l.Headers=_,l.Request=B,l.Response=E,l.fetch=O,Object.defineProperty(l,"__esModule",{value:!0}),l})({})})(t),t.fetch.ponyfill=!0,delete t.fetch.polyfill;var i=t;r=i.fetch,r.default=i.fetch,r.fetch=i.fetch,r.Headers=i.Headers,r.Request=i.Request,r.Response=i.Response,n.exports=r})(fs,fs.exports);var el=fs.exports;const f2=pl(el);function c2(n,r){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=d2(n))||r){e&&(n=e);var t=0,i=function(){};return{s:i,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(o){throw o},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,l=!1,a;return{s:function(){e=e.call(n)},n:function(){var o=e.next();return s=o.done,o},e:function(o){l=!0,a=o},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(l)throw a}}}}function d2(n,r){if(n){if(typeof n=="string")return Uu(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Uu(n,r)}}function Uu(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}function Cn(n,r,e){return r=Mt(r),Jr(n,Qd()?Reflect.construct(r,e||[],Mt(n).constructor):r.apply(n,e))}function Qd(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qd=function(){return!!n})()}var h2={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/ld+json":!0},Yd={rdf:hi,owl:hi,n3:"text/n3",ttl:"text/turtle",nt:"text/n3",acl:"text/n3",html:"text/html",xml:"text/xml"},Jd=function(r){return{link:Zt("http://www.w3.org/2007/ont/link#",r),http:Zt("http://www.w3.org/2007/ont/http#",r),httph:Zt("http://www.w3.org/2007/ont/httph#",r),rdf:Zt("http://www.w3.org/1999/02/22-rdf-syntax-ns#",r),rdfs:Zt("http://www.w3.org/2000/01/rdf-schema#",r),dc:Zt("http://purl.org/dc/elements/1.1/",r),ldp:Zt("http://www.w3.org/ns/ldp#",r)}},Pr=Jd(),fn=Ct(function n(r,e){Nt(this,n),Se(this,"response",void 0),Se(this,"dom",void 0),this.response=r,this.dom=e});Se(fn,"pattern",void 0);var Os=function(n){function r(){return Nt(this,r),Cn(this,r,arguments)}return $t(r,n),Ct(r,[{key:"parse",value:function(t,i,s){var l=t.store;this.dom||(this.dom=qn(i));var a=this.dom.documentElement;if(a.nodeName==="parsererror")return t.failFetch(s,"Badly formed XML in "+s.resource.value,"parse_error");var u=new yl(l);try{u.parse(this.dom,s.original.value,s.original)}catch(o){return t.failFetch(s,"Syntax error parsing RDF/XML! "+o,"parse_error")}return s.noMeta||l.add(s.original,Pr.rdf("type"),Pr.link("RDFDocument"),t.appNode),t.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"RDFXMLHandler"}},{key:"register",value:function(t){t.mediatypes[hi]={q:.9}}}])}(fn);Os.pattern=new RegExp("application/rdf\\+xml");var wn=function(n){function r(){return Nt(this,r),Cn(this,r,arguments)}return $t(r,n),Ct(r,[{key:"parse",value:function(t,i,s){var l,a;this.dom||(this.dom=qn(i));var u=t.store,o=this.dom.getElementsByTagName("title");o.length>0&&u.add(s.resource,Pr.dc("title"),u.rdfFactory.literal(o[0].textContent),s.resource);for(var f=this.dom.getElementsByTagName("link"),h=f.length-1;h>=0;h--)l=f[h].getAttribute("rel"),a=!1,l||(l=f[h].getAttribute("rev"),a=!0),l&&t.linkData(s.original,l,f[h].getAttribute("href"),s.resource,a);for(var d=this.dom.getElementsByTagName("script"),c=0;c<d.length;c++){var _=d[c].getAttribute("type");h2[_]&&(os(d[c].textContent,u,s.original.value,_),os(d[c].textContent,u,s.original.value,_))}if(s.noMeta||u.add(s.resource,Pr.rdf("type"),Pr.link("WebPage"),t.appNode),!s.noRDFa&&fl)try{fl(this.dom,u,s.original.value)}catch(k){var w="Error trying to parse "+s.resource+` as RDFa:
`+k+`:
`+k.stack;return t.failFetch(s,w,"parse_error")}return t.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"XHTMLHandler"}},{key:"register",value:function(t){t.mediatypes[is]={}}}])}(fn);wn.pattern=new RegExp("application/xhtml");var cl=function(n){function r(){return Nt(this,r),Cn(this,r,arguments)}return $t(r,n),Ct(r,[{key:"parse",value:function(t,i,s){for(var l=qn(i),a=0;a<l.childNodes.length;a++){var u=l.childNodes[a];if(r.isElement(u)){var o=u.namespaceURI;if(o&&o===o.rdf){t.addStatus(s.req,"Has XML root element in the RDF namespace, so assume RDF/XML.");var f=new Os(this.response,l);return f.parse(t,i,s)}break}}if(l.doctype&&l.doctype.name==="html"&&l.doctype.publicId.match(/^-\/\/W3C\/\/DTD XHTML/)&&l.doctype.systemId.match(/http:\/\/www.w3.org\/TR\/xhtml/)){t.addStatus(s.req,`Has XHTML DOCTYPE. Switching to XHTML Handler.
`);var h=new wn(this.response,l);return h.parse(t,i,s)}var d=l.getElementsByTagName("html")[0];if(d){var c=d.getAttribute("xmlns");if(c&&c.match(/^http:\/\/www.w3.org\/1999\/xhtml/)){t.addStatus(s.req,`Has a default namespace for XHTML. Switching to XHTMLHandler.
`);var _=new wn(this.response,l);return _.parse(t,i,s)}}return t.failFetch(s,`Unsupported dialect of XML: not RDF or XHTML namespace, etc.
`+i.slice(0,80),901)}}],[{key:"toString",value:function(){return"XMLHandler"}},{key:"register",value:function(t){t.mediatypes["text/xml"]={q:.5},t.mediatypes["application/xml"]={q:.5}}},{key:"isElement",value:function(t){return t.nodeType===Node.ELEMENT_NODE}}])}(fn);cl.pattern=new RegExp("(text|application)/(.*)xml");var Zd=function(n){function r(){return Nt(this,r),Cn(this,r,arguments)}return $t(r,n),Ct(r,[{key:"parse",value:function(t,i,s){var l=t.store;if(th(i)){t.addStatus(s.req,`Has an XML declaration. We'll assume it's XHTML as the content-type was text/html.
`);var a=new wn(this.response);return a.parse(t,i,s)}if(_2(i)){t.addStatus(s.req,`Has XHTML DOCTYPE. Switching to XHTMLHandler.
`);var u=new wn(this.response);return u.parse(t,i,s)}if(p2(i)){t.addStatus(s.req,`Has default namespace for XHTML, so switching to XHTMLHandler.
`);var o=new wn(this.response);return o.parse(t,i,s)}var f=new RegExp("<title>([\\s\\S]+?)</title>","im").exec(i);return f&&l.add(s.resource,Pr.dc("title"),l.rdfFactory.literal(f[1]),s.resource),l.add(s.resource,Pr.rdf("type"),Pr.link("WebPage"),t.appNode),t.addStatus(s.req,"non-XML HTML document, not parsed for data."),t.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"HTMLHandler"}},{key:"register",value:function(t){t.mediatypes["text/html"]={q:.9}}}])}(fn);Zd.pattern=new RegExp("text/html");var Kd=function(n){function r(){return Nt(this,r),Cn(this,r,arguments)}return $t(r,n),Ct(r,[{key:"parse",value:function(t,i,s,l){var a=t.store;return new Promise(function(u,o){try{jd(i,a,s.original.value,function(){u(t.doneFetch(s,l))})}catch(h){var f="Error trying to parse "+s.resource+` as JSON-LD:
`+h;u(t.failFetch(s,f,"parse_error",l))}})}}],[{key:"toString",value:function(){return"JsonLdHandler"}},{key:"register",value:function(t){t.mediatypes["application/ld+json"]={q:.9}}}])}(fn);Kd.pattern=/application\/ld\+json/;var $d=function(n){function r(){return Nt(this,r),Cn(this,r,arguments)}return $t(r,n),Ct(r,[{key:"parse",value:function(t,i,s){if(th(i)){t.addStatus(s.req,"Warning: "+s.resource+` has an XML declaration. We'll assume it's XML but its content-type wasn't XML.
`);var l=new cl(this.response);return l.parse(t,i,s)}if(i.slice(0,500).match(/xmlns:/)){t.addStatus(s.req,`May have an XML namespace. We'll assume it's XML but its content-type wasn't XML.
`);var a=new cl(this.response);return a.parse(t,i,s)}return t.addStatus(s.req,"Plain text document, no known RDF semantics."),t.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"TextHandler"}},{key:"register",value:function(t){t.mediatypes["text/plain"]={q:.5}}}])}(fn);$d.pattern=new RegExp("text/plain");var eh=function(n){function r(){return Nt(this,r),Cn(this,r,arguments)}return $t(r,n),Ct(r,[{key:"parse",value:function(t,i,s,l){var a=t.store,u=Fs(a,a,s.original.value,s.original.value,null,null,"",null);try{u.loadBuf(i)}catch(f){var o="Error trying to parse "+s.resource+` as Notation3:
`+f;return t.failFetch(s,o,"parse_error",l)}return t.addStatus(s.req,"N3 parsed: "+u.statementCount+" triples in "+u.lines+" lines."),t.store.add(s.original,Pr.rdf("type"),Pr.link("RDFDocument"),t.appNode),t.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"N3Handler"}},{key:"register",value:function(t){t.mediatypes["text/n3"]={q:"1.0"},t.mediatypes["text/turtle"]={q:1}}}])}(fn);eh.pattern=new RegExp("(application|text)/(x-)?(rdf\\+)?(n3|turtle)");var cs={RDFXMLHandler:Os,XHTMLHandler:wn,XMLHandler:cl,HTMLHandler:Zd,TextHandler:$d,N3Handler:eh,JsonLdHandler:Kd};function _2(n){var r=n.indexOf("<!DOCTYPE html"),e=n.indexOf(">");return r===-1||e===-1||r>e?!1:n.substr(r,e-r).indexOf("XHTML")!==-1}function th(n){var r=n.match(/\s*<\?xml\s+version\s*=[^<>]+\?>/);return!!r}function p2(n){var r=n.match(/[^(<html)]*<html\s+[^<]*xmlns=['"]http:\/\/www.w3.org\/1999\/xhtml["'][^<]*>/);return!!r}var Qn=function(){function n(r){var e=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Nt(this,n),Se(this,"store",void 0),Se(this,"timeout",void 0),Se(this,"_fetch",void 0),Se(this,"mediatypes",void 0),Se(this,"appNode",void 0),Se(this,"requested",void 0),Se(this,"timeouts",void 0),Se(this,"redirectedTo",void 0),Se(this,"fetchQueue",void 0),Se(this,"fetchCallbacks",void 0),Se(this,"nonexistent",void 0),Se(this,"lookedUp",void 0),Se(this,"handlers",void 0),Se(this,"ns",void 0),Se(this,"fireCallbacks",void 0),this.store=r||new Ai,this.ns=Jd(this.store.rdfFactory),this.timeout=t.timeout||3e4,this._fetch=t.fetch||typeof global<"u"&&(global.solidFetcher||global.solidFetch)||typeof window<"u"&&(window.solidFetcher||window.solidFetch)||f2,!this._fetch)throw new Error("No _fetch function available for Fetcher");this.appNode=this.store.sym("chrome://TheCurrentSession"),this.store.fetcher=this,this.requested={},this.timeouts={},this.redirectedTo={},this.fetchQueue={},this.fetchCallbacks={},this.nonexistent={},this.lookedUp={},this.handlers=[],this.mediatypes={"image/*":{q:.9},"*/*":{q:.1}},Z0(this,["request","fail","refresh","retract","done"]),Object.keys(t.handlers||cs).map(function(i){return e.addHandler(cs[i])})}return Ct(n,[{key:"load",value:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i=Object.assign({},i),e instanceof Array)return Promise.all(e.map(function(k){return t.load(k,Object.assign({},i))}));var s=e,l=On(s);l=l.split("#")[0],i=this.initFetchOptions(l,i);var a=this.appNode,u=this.store,o=u.statementsMatching(void 0,this.ns.link("requestedURI"),u.sym(l),a).map(function(k){return k.subject}),f=c2(o),h;try{for(f.s();!(h=f.n()).done;){var d=h.value,c=u.any(d,this.ns.link("response"),null,a);if(c!=null){var _=u.statementsMatching(c,this.ns.link("outOfDate"),!0,a);u.remove(_),i.force=!0,i.clearPreviousData=!0}}}catch(k){f.e(k)}finally{f.f()}var w=this.initFetchOptions(l,i);return this.pendingFetchPromise(l,w.baseURI,w)}},{key:"pendingFetchPromise",value:function(){var r=eu(Xi.mark(function t(i,s,l){var a=this,u;return Xi.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(f.t0=!l.force,!f.t0){f.next=5;break}return f.next=4,this.fetchQueue[s];case 4:f.t0=f.sent;case 5:if(!f.t0){f.next=9;break}u=this.fetchQueue[s],f.next=12;break;case 9:u=Promise.race([this.setRequestTimeout(i,l),this.fetchUri(i,l)]),this.fetchQueue[s]=u,this.cleanupFetchRequest(s,void 0,this.timeout);case 12:return f.abrupt("return",u.then(function(h){return i in a.timeouts&&(a.timeouts[i].forEach(clearTimeout),delete a.timeouts[i]),h}));case 13:case"end":return f.stop()}},t,this)}));function e(t,i,s){return r.apply(this,arguments)}return e}()},{key:"cleanupFetchRequest",value:function(e,t,i){var s=this;t!==void 0&&console.warn("_options is deprecated"),this.timeouts[e]=(this.timeouts[e]||[]).concat(setTimeout(function(){s.isPending(e)||delete s.fetchQueue[e]},i))}},{key:"initFetchOptions",value:function(e,t){var i=this.store,s=!t.method||t.method.toUpperCase()==="GET";s||(t.force=!0),t.resource=i.rdfFactory.namedNode(e),t.baseURI=t.baseURI||e,t.original=i.rdfFactory.namedNode(t.baseURI),t.req=i.bnode(),t.headers=t.headers||new el.Headers,t.contentType&&(t.headers["content-type"]=t.contentType),t.force&&(t.cache="no-cache");var l=this.acceptString();t.headers.accept=l;var a=n.offlineOverride(e);t.requestedURI=a,n.setCredentials(a,t);var u=n.proxyIfNecessary(a);return a!==u&&(t.proxyUsed=!0),t.actualProxyURI=u,t}},{key:"fetchUri",value:function(e,t){var i=this;if(!e)return Promise.reject(new Error("Cannot fetch an empty uri"));if(n.unsupportedProtocol(e))return this.failFetch(t,"fetcher: Unsupported protocol","unsupported_protocol");var s=this.getState(e);if(t.force)delete this.nonexistent[e];else{if(s==="fetched")return Promise.resolve(this.doneFetch(t,{status:200,ok:!0,statusText:"Already loaded into quadstore."}));if(s==="failed"&&this.requested[e]===404){var l="Previously failed: "+this.requested[e],a={url:e,status:this.requested[e],statusText:l,responseText:l,headers:new el.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return this.failFetch(t,l,this.requested[e],a)}}this.fireCallbacks("request",[e]),this.requested[e]=!0,t.noMeta||this.saveRequestMetadata(e,t);var u=t.actualProxyURI;return this._fetch(u,t).then(function(o){return i.handleResponse(o,e,t)},function(o){var f={url:u,status:999,statusText:(o.name||"network failure")+": "+(o.errno||o.code||o.type),responseText:o.message,headers:new el.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return i.handleError(f,e,t)})}},{key:"nowOrWhenFetched",value:function(e,t,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=On(e);typeof t=="function"?i=t:typeof t>"u"||(Ka(t)?s.referringTerm=t:s=t),this.load(l,s).then(function(a){if(i)if(a)if(a.ok)i(!0,"OK",a);else{var u="HTTP error: Status "+a.status+" ("+a.statusText+")";a.responseText&&(u+=" "+a.responseText),i(!1,u,a)}else{var o="@@ nowOrWhenFetched:  no response object!";i(!1,o)}},function(a){var u=a.message||a.statusText;u="Failed to load  <"+l+"> "+u,a.response&&a.response.status&&(u+=" status: "+a.response.status),i(!1,u,a.response)})}},{key:"addStatus",value:function(e,t){var i=new Date;t="["+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()+"."+i.getMilliseconds()+"] "+t;var s=this.store,l=s.the(e,this.ns.link("status"));vs(l)&&l.append(s.rdfFactory.literal(t))}},{key:"failFetch",value:function(e,t,i,s){this.addStatus(e.req,t),e.noMeta||this.store.add(e.original,this.ns.link("error"),this.store.rdfFactory.literal(t));var l=(e.method||"GET").toUpperCase(),a=l==="GET"||l==="HEAD";a&&(e.resource.equals(e.original),this.requested[Pn(e.original.value)]=i,this.fireCallbacks("fail",[e.original.value,t]));var u=new Error("Fetcher: "+t);return u.status=i,u.statusText=t,u.response=s,Promise.reject(u)}},{key:"linkData",value:function(e,t,i,s,l){if(i){var a=this.store,u,o=a.rdfFactory.namedNode(gr(i,e.value));if(t==="alternate"||t==="seeAlso"||t==="meta"||t==="describedby"){if(o.value===e.value)return;u=this.ns.rdfs("seeAlso")}else t==="type"?u=a.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):u=a.rdfFactory.namedNode(gr(encodeURIComponent(t),"http://www.iana.org/assignments/link-relations/"));l?a.add(o,u,e,s):a.add(e,u,o,s)}}},{key:"parseLinkHeader",value:function(e,t,i){if(e){var s=/<[^>]*>\s*(\s*;\s*[^()<>@,;:"/[\]?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*")))*(,|$)/g,l=/[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*"))/g,a=e.match(s);if(a!=null)for(var u=0;u<a.length;u++){var o=a[u].split(">"),f=o[0].substring(1),h=o[1],d=h.match(l);if(d==null)return;for(var c=0;c<d.length;c++){var _=d[c],w=_.split("="),k=w[1].replace(/["']/g,"");this.linkData(t,k,f,i)}}}}},{key:"doneFetch",value:function(e,t){return this.addStatus(e.req,"Done."),this.requested[e.original.value]="done",this.fireCallbacks("done",[e.original.value]),t.req=e.req,t}},{key:"nowKnownAs",value:function(e,t){this.lookedUp[e.value]?this.lookedUp[t.value]||this.lookUpThing(t,e):this.lookedUp[t.value]&&(this.lookedUp[e.value]||this.lookUpThing(e,t))}},{key:"putBack",value:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=On(e),l=new Gt(s).doc();return i.contentType=i["content-type"]||i["Content-Type"]||i.contentType||vn,i.contentType==="application/ld+json"?new Promise(function(a,u){vi(l,t.store,l.uri,i.contentType,function(o,f){o?u(o):(i.data=f,t.webOperation("PUT",e,i).then(function(h){return a(h)}).catch(function(h){return u(h)}))})}):(i.data=vi(l,this.store,l.value,i.contentType),this.webOperation("PUT",s,i))}},{key:"webCopy",value:function(e,t,i){var s=this;return this.webOperation("GET",e).then(function(l){return s.webOperation("PUT",t,{data:l.responseText,contentType:i})})}},{key:"delete",value:function(e,t){var i=this;return this.webOperation("DELETE",e,t).then(function(s){return i.requested[e]=404,i.nonexistent[e]=!0,i.unload(i.store.rdfFactory.namedNode(e)),s})}},{key:"createIfNotExists",value:function(){var r=eu(Xi.mark(function t(i){var s,l,a,u,o=arguments;return Xi.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return s=o.length>1&&o[1]!==void 0?o[1]:vn,l=o.length>2&&o[2]!==void 0?o[2]:"",a=this,h.prev=3,h.next=6,a.load(i);case 6:u=h.sent,h.next=26;break;case 9:if(h.prev=9,h.t0=h.catch(3),h.t0.response.status!==404){h.next=25;break}return h.prev=12,h.next=15,a.webOperation("PUT",i.value,{data:l,contentType:s});case 15:u=h.sent,h.next=21;break;case 18:throw h.prev=18,h.t1=h.catch(12),h.t1;case 21:return delete a.requested[i.value],h.abrupt("return",u);case 25:throw h.t0;case 26:return h.abrupt("return",u);case 27:case"end":return h.stop()}},t,this,[[3,9],[12,18]])}));function e(t){return r.apply(this,arguments)}return e}()},{key:"createContainer",value:function(e,t,i){var s={"content-type":vn,link:this.ns.ldp("BasicContainer")+'; rel="type"'};t&&(s.slug=t);var l={headers:s};return i&&(l.body=i),this.webOperation("POST",e,l)}},{key:"invalidateCache",value:function(e){var t=On(e),i=this;if(i.fetchQueue&&i.fetchQueue[t]){var s=i.fetchQueue[t];s.PromiseStatus,delete i.fetchQueue[t]}if(i.requested[t]&&i.requested[t]!=="done"&&i.requested[t]!=="failed"&&i.requested[t]!==404){var l="Rdflib: fetcher: Destructive operation on <".concat(i.requested[t],"> file being fetched! ")+t;console.error(l)}else delete i.requested[t],delete i.nonexistent[t]}},{key:"webOperation",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=On(t);i.method=e,i.body=i.data||i.body,i.force=!0;var l=this;if(i.body&&!i.contentType)throw new Error("Web operation sending data must have a defined contentType.");return i.contentType&&(i.headers=i.headers||{},i.headers["content-type"]=i.contentType),n.setCredentials(s,i),new Promise(function(a,u){l._fetch(s,i).then(function(o){if(o.ok)(e==="PUT"||e==="PATCH"||e==="POST"||e==="DELETE")&&l.invalidateCache(s),o.text?o.text().then(function(d){o.responseText=d,a(o)}):a(o);else{var f="Web error: "+o.status;o.statusText&&(f+=" ("+o.statusText+")"),f+=" on "+e+" of <"+s+">",o.responseText&&(f+=": "+o.responseText);var h=new Error(f);h.response=o,u(h)}},function(o){var f="Fetch error for "+e+" of <"+s+">:"+o;u(new Error(f))})})}},{key:"lookUpThing",value:function(e,t){var i=this,s=this.store.uris(e);return s=s.map(function(l){return Pn(l)}),s.forEach(function(l){i.lookedUp[l]=!0}),this.load(s,{referringTerm:t})}},{key:"getHeader",value:function(e,t){for(var i=this.store,s=e.value,l=i.each(void 0,this.ns.link("requestedURI"),i.rdfFactory.literal(s)),a=0;a<l.length;a++){var u=l[a];if(u!==void 0){var o=i.any(u,this.ns.link("response"));if(o!==void 0&&i.anyValue(o,this.ns.http("status"))&&i.anyValue(o,this.ns.http("status")).startsWith("2")){var f=i.each(o,this.ns.httph(t.toLowerCase()));return f.length?f.map(function(h){return h.value}):[]}}}}},{key:"saveRequestMetadata",value:function(e,t){var i=t.req,s=this.store,l=t.referringTerm;this.addStatus(t.req,"Accept: "+t.headers.accept),Ka(l)&&s.add(s.rdfFactory.namedNode(e),this.ns.link("requestedBy"),l,this.appNode),t.original&&t.original.value!==e&&s.add(i,this.ns.link("orginalURI"),s.rdfFactory.literal(t.original.value),this.appNode);var a=new Date,u="["+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()+"] ";s.add(i,this.ns.rdfs("label"),s.rdfFactory.literal(u+" Request for "+e),this.appNode),s.add(i,this.ns.link("requestedURI"),s.rdfFactory.literal(e),this.appNode),s.add(i,this.ns.link("status"),s.collection(),this.appNode)}},{key:"saveResponseMetadata",value:function(e,t){var i=this,s=this.store,l=s.bnode();return s.add(t.req,this.ns.link("response"),l,this.appNode),s.add(l,this.ns.http("status"),s.rdfFactory.literal(e.status),this.appNode),s.add(l,this.ns.http("statusText"),s.rdfFactory.literal(e.statusText),this.appNode),e.headers.forEach(function(a,u){s.add(l,i.ns.httph(u),i.store.rdfFactory.literal(a),i.appNode),u==="content-type"&&s.add(t.resource,i.ns.rdf("type"),s.rdfFactory.namedNode(J0(a).value),i.appNode)}),l}},{key:"objectRefresh",value:function(e){var t=this.store.uris(e);if(typeof t<"u")for(var i=0;i<t.length;i++)this.refresh(this.store.rdfFactory.namedNode(Pn(t[i])))}},{key:"refresh",value:function(e,t){this.fireCallbacks("refresh",arguments),this.nowOrWhenFetched(e,{force:!0,clearPreviousData:!0},t)}},{key:"refreshIfExpired",value:function(e,t){var i=this.getHeader(e,"Expires");!i||new Date(i[0]).getTime()<=new Date().getTime()?this.refresh(e,t):t(!0,"Not expired",{})}},{key:"retract",value:function(e){this.store.removeMany(void 0,void 0,void 0,e),e.value&&delete this.requested[Pn(e.value)],this.fireCallbacks("retract",arguments)}},{key:"getState",value:function(e){return typeof this.requested[e]>"u"?"unrequested":this.requested[e]===!0?"requested":this.requested[e]==="done"?"fetched":this.requested[e]==="redirected"?this.getState(this.redirectedTo[e]):"failed"}},{key:"isPending",value:function(e){return this.requested[e]===!0}},{key:"unload",value:function(e){this.store.removeDocument(e),delete this.requested[e.value]}},{key:"addHandler",value:function(e){this.handlers.push(e),e.register(this)}},{key:"retryNoCredentials",value:function(e,t){t.retriedWithNoCredentials=!0,delete this.requested[e],delete this.fetchQueue[e];var i=Object.assign({},t,{credentials:"omit"});return this.addStatus(t.req,"Abort: Will retry with credentials SUPPRESSED to see if that helps"),this.load(e,i)}},{key:"isCrossSite",value:function(e){if(typeof document>"u"||!document.location)return!1;var t=y0,i=""+document.location;return(t(i)&&t(e)&&t(i))!==t(e)}},{key:"handleError",value:function(e,t,i){if(this.isCrossSite(t)){if(i.credentials&&i.credentials==="include"&&!i.retriedWithNoCredentials)return this.retryNoCredentials(t,i);var s=n.crossSiteProxy(t);if(s&&!i.proxyUsed)return this.redirectToProxy(s,i)}var l;return e instanceof Error?l="Fetch error: "+e.message:(l=e.statusText,e.responseText&&(l+=" ".concat(e.responseText))),this.failFetch(i,l,e.status||998,e)}},{key:"addType",value:function(e,t,i,s){var l=t;if(s){var a=i.any(l,this.ns.link("requestedURI"));a&&a.value!==s&&i.add(i.rdfFactory.namedNode(s),this.ns.rdf("type"),e,this.appNode)}for(;;){var u=i.any(l,this.ns.link("requestedURI"));if(u&&u.value&&i.add(i.rdfFactory.namedNode(u.value),this.ns.rdf("type"),e,this.appNode),l=i.any(void 0,i.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#redirectedRequest"),l),!l)break;var o=i.any(l,i.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#response"));if(!o)break;var f=i.any(o,i.rdfFactory.namedNode("http://www.w3.org/2007/ont/http#status"));if(!f||f!=="301"&&f!=="302")break}}},{key:"handleResponse",value:function(e,t,i){var s=this,l=this.store,a=e.headers,u=i.req,o=this.saveResponseMetadata(e,i),f=this.normalizedContentType(i,a)||"",h=a.get("content-location");if(e.status===0)return this.handleError(e,t,i);if(e.status>=400)return e.status===404&&(this.nonexistent[i.original.value]=!0,this.nonexistent[t]=!0),this.saveErrorResponse(e,o).then(function(){var j=i.resource+" "+e.statusText;return s.failFetch(i,j,e.status,e)});var d=null,c=null;if(h&&(c=gr(h,t),c!==t&&(d=c)),e.status===200){if(this.addType(this.ns.link("Document"),u,l,t),d&&this.addType(this.ns.link("Document"),u,l,d),i.clearPreviousData)for(var _=l.statementsMatching(void 0,void 0,void 0,i.resource).slice(),w=0;w<_.length;w++)l.removeStatement(_[w]);var k=f.includes("image/")||f.includes("application/pdf");f&&k&&(this.addType(l.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),u,l,t),d&&this.addType(l.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),u,l,d))}if(h){if(!i.force&&d&&this.requested[c]==="done")return this.doneFetch(i,e);this.requested[c]=!0}this.parseLinkHeader(a.get("link"),i.original,u);var C=this.handlerForContentType(f,e);return C?e.text().then(function(j){return e.responseText=j,C.parse(s,j,i,e)}):(this.addStatus(u,"Fetch over. No data handled."),this.doneFetch(i,e))}},{key:"saveErrorResponse",value:function(e,t){var i=this,s=this.store;return e.text().then(function(l){l.length>10&&s.add(t,i.ns.http("content"),s.rdfFactory.literal(l),t)})}},{key:"handlerForContentType",value:function(e,t){if(!e)return null;var i=this.handlers.find(function(s){return e.match(s.pattern)});return i?new i(t):null}},{key:"guessContentType",value:function(e){return Yd[e.split(".").pop()]}},{key:"normalizedContentType",value:function(e,t){if(e.forceContentType)return e.forceContentType;var i=t.get("content-type");if(!i||i.includes("application/octet-stream")){var s=this.guessContentType(e.resource.value);if(s)return s}var l=ru(e.resource.value);return!i&&["file","chrome"].includes(l)?"text/xml":i}},{key:"redirectToProxy",value:function(e,t){var i=this;this.addStatus(t.req,"BLOCKED -> Cross-site Proxy to <"+e+">"),t.proxyUsed=!0;var s=this.store,l=t.req;t.noMeta||(s.add(l,this.ns.link("redirectedTo"),s.rdfFactory.namedNode(e),l),this.addStatus(l,"redirected to new request")),this.requested[t.resource.value]="redirected",this.redirectedTo[t.resource.value]=e;var a=Object.assign({},t);return a.baseURI=t.resource.value,this.fetchUri(e,a).then(function(u){return a.noMeta||s.add(l,i.ns.link("redirectedRequest"),a.req,i.appNode),u})}},{key:"setRequestTimeout",value:function(e,t){var i=this;return new Promise(function(s){i.timeouts[e]=(i.timeouts[e]||[]).concat(setTimeout(function(){i.isPending(e)&&!t.retriedWithNoCredentials&&!t.proxyUsed&&s(i.failFetch(t,"Request to ".concat(e," timed out"),"timeout"))},i.timeout))})}},{key:"addFetchCallback",value:function(e,t){this.fetchCallbacks[e]?this.fetchCallbacks[e].push(t):this.fetchCallbacks[e]=[t]}},{key:"acceptString",value:function(){var e="";for(var t in this.mediatypes){e!==""&&(e+=", "),e+=t;for(var i in this.mediatypes[t])e+=";"+i+"="+this.mediatypes[t][i]}return e}}],[{key:"crossSiteProxy",value:function(e){if(n.crossSiteProxyTemplate)return n.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(e))}},{key:"offlineOverride",value:function(e){var t=e,i;return typeof window<"u"&&window.panes&&(i=window.panes.UI)&&i.preferences&&i.preferences.get("offlineModeUsingLocalhost")&&t.slice(0,7)==="http://"&&t.slice(7,17)!=="localhost/"&&(t="http://localhost/"+t.slice(7)),t}},{key:"proxyIfNecessary",value:function(e){var t;if(typeof window<"u"&&window.panes&&(t=window.panes.UI)&&t.isExtension)return e;if(typeof $SolidTestEnvironment<"u"&&$SolidTestEnvironment.localSiteMap){var i=e.split("/").slice(2),s=function a(u,o){var f=o[u.shift()];return f?typeof f=="string"?f+u.join("/"):u?a(u,f):null:null},l=s(i,$SolidTestEnvironment.localSiteMap);if(l)return l}return n.crossSiteProxyTemplate&&typeof document<"u"&&document.location&&(""+document.location).slice(0,6)==="https:"&&e.slice(0,5)==="http:"?n.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(e)):e}},{key:"unsupportedProtocol",value:function(e){var t=ru(e);return t==="tel"||t==="mailto"||t==="urn"}},{key:"setCredentials",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.credentials===void 0&&(t.withCredentials!==void 0?t.credentials=t.withCredentials?"include":"omit":t.credentials="include")}}])}();Se(Qn,"HANDLERS",void 0);Se(Qn,"CONTENT_TYPE_BY_EXT",void 0);Se(Qn,"crossSiteProxyTemplate",void 0);Qn.HANDLERS=cs;Qn.CONTENT_TYPE_BY_EXT=Yd;function Pu(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,t)}return e}function Mu(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Pu(Object(e),!0).forEach(function(t){Se(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Pu(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}var Zi=Mu(Mu({},us),{},{fetcher:function(r,e){return new Qn(r,e)},graph:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return new Ai(r,e||{rdfFactory:us})},lit:function(r,e,t){return this.literal(""+r,e||t)},st:function(r,e,t,i){return this.quad(r,e,t,i)}}),kl={};for(var Jl in Zi)typeof Zi[Jl]=="function"&&(kl[Jl]=Zi[Jl].bind(Zi));var g2=kl.graph,rh=kl.namedNode,m2=kl.literal;new Ud;Dt.fromValue;Or.nextId;let he,wr=0,oi=null;function tl(){return(oi===null||oi.byteLength===0)&&(oi=new Uint8Array(he.memory.buffer)),oi}const rl=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},v2=typeof rl.encodeInto=="function"?function(n,r){return rl.encodeInto(n,r)}:function(n,r){const e=rl.encode(n);return r.set(e),{read:n.length,written:e.length}};function Xr(n,r,e){if(e===void 0){const a=rl.encode(n),u=r(a.length,1)>>>0;return tl().subarray(u,u+a.length).set(a),wr=a.length,u}let t=n.length,i=r(t,1)>>>0;const s=tl();let l=0;for(;l<t;l++){const a=n.charCodeAt(l);if(a>127)break;s[i+l]=a}if(l!==t){l!==0&&(n=n.slice(l)),i=e(i,t,t=l+n.length*3,1)>>>0;const a=tl().subarray(i+l,i+t),u=v2(n,a);l+=u.written,i=e(i,t,l,1)>>>0}return wr=l,i}function Ls(n){return n==null}let fi=null;function Oe(){return(fi===null||fi.byteLength===0)&&(fi=new Int32Array(he.memory.buffer)),fi}const nh=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&nh.decode();function kt(n,r){return n=n>>>0,nh.decode(tl().subarray(n,n+r))}function Lt(n){const r=he.__wbindgen_export_2.get(n);return he.__externref_table_dealloc(n),r}function b2(n){try{const i=he.__wbindgen_add_to_stack_pointer(-16),s=Xr(n,he.__wbindgen_malloc,he.__wbindgen_realloc),l=wr;he.namedNode(i,s,l);var r=Oe()[i/4+0],e=Oe()[i/4+1],t=Oe()[i/4+2];if(t)throw Lt(e);return Yn.__wrap(r)}finally{he.__wbindgen_add_to_stack_pointer(16)}}function w2(n){try{const l=he.__wbindgen_add_to_stack_pointer(-16);var r=Ls(n)?0:Xr(n,he.__wbindgen_malloc,he.__wbindgen_realloc),e=wr;he.blankNode(l,r,e);var t=Oe()[l/4+0],i=Oe()[l/4+1],s=Oe()[l/4+2];if(s)throw Lt(i);return Ti.__wrap(t)}finally{he.__wbindgen_add_to_stack_pointer(16)}}function y2(n,r){try{const a=he.__wbindgen_add_to_stack_pointer(-16);var e=Ls(n)?0:Xr(n,he.__wbindgen_malloc,he.__wbindgen_realloc),t=wr;he.literal(a,e,t,r);var i=Oe()[a/4+0],s=Oe()[a/4+1],l=Oe()[a/4+2];if(l)throw Lt(s);return Ni.__wrap(i)}finally{he.__wbindgen_add_to_stack_pointer(16)}}function k2(){const n=he.defaultGraph();return Ci.__wrap(n)}function E2(n){try{const i=he.__wbindgen_add_to_stack_pointer(-16),s=Xr(n,he.__wbindgen_malloc,he.__wbindgen_realloc),l=wr;he.variable(i,s,l);var r=Oe()[i/4+0],e=Oe()[i/4+1],t=Oe()[i/4+2];if(t)throw Lt(e);return Ii.__wrap(r)}finally{he.__wbindgen_add_to_stack_pointer(16)}}function D2(n,r,e){try{const l=he.__wbindgen_add_to_stack_pointer(-16);he.triple(l,n,r,e);var t=Oe()[l/4+0],i=Oe()[l/4+1],s=Oe()[l/4+2];if(s)throw Lt(i);return Jn.__wrap(t)}finally{he.__wbindgen_add_to_stack_pointer(16)}}function A2(n,r,e,t){try{const a=he.__wbindgen_add_to_stack_pointer(-16);he.quad(a,n,r,e,t);var i=Oe()[a/4+0],s=Oe()[a/4+1],l=Oe()[a/4+2];if(l)throw Lt(s);return Jn.__wrap(i)}finally{he.__wbindgen_add_to_stack_pointer(16)}}function T2(n){try{const i=he.__wbindgen_add_to_stack_pointer(-16);he.fromTerm(i,n);var r=Oe()[i/4+0],e=Oe()[i/4+1],t=Oe()[i/4+2];if(t)throw Lt(e);return Lt(r)}finally{he.__wbindgen_add_to_stack_pointer(16)}}function C2(n){try{const i=he.__wbindgen_add_to_stack_pointer(-16);he.fromQuad(i,n);var r=Oe()[i/4+0],e=Oe()[i/4+1],t=Oe()[i/4+2];if(t)throw Lt(e);return Lt(r)}finally{he.__wbindgen_add_to_stack_pointer(16)}}let ci=null;function N2(){return(ci===null||ci.byteLength===0)&&(ci=new Uint32Array(he.memory.buffer)),ci}function I2(n,r){n=n>>>0;const t=N2().subarray(n/4,n/4+r),i=[];for(let s=0;s<t.length;s++)i.push(he.__wbindgen_export_2.get(t[s]));return he.__externref_drop_slice(n,r),i}function F2(){he.main()}function R2(n){const r=he.__externref_table_alloc();return he.__wbindgen_export_2.set(r,n),r}function hr(n,r){try{return n.apply(this,r)}catch(e){const t=R2(e);he.__wbindgen_exn_store(t)}}const qu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>he.__wbg_blanknode_free(n>>>0));class Ti{static __wrap(r){r=r>>>0;const e=Object.create(Ti.prototype);return e.__wbg_ptr=r,qu.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,qu.unregister(this),r}free(){const r=this.__destroy_into_raw();he.__wbg_blanknode_free(r)}get termType(){let r,e;try{const s=he.__wbindgen_add_to_stack_pointer(-16);he.blanknode_term_type(s,this.__wbg_ptr);var t=Oe()[s/4+0],i=Oe()[s/4+1];return r=t,e=i,kt(t,i)}finally{he.__wbindgen_add_to_stack_pointer(16),he.__wbindgen_free(r,e,1)}}get value(){let r,e;try{const s=he.__wbindgen_add_to_stack_pointer(-16);he.blanknode_value(s,this.__wbg_ptr);var t=Oe()[s/4+0],i=Oe()[s/4+1];return r=t,e=i,kt(t,i)}finally{he.__wbindgen_add_to_stack_pointer(16),he.__wbindgen_free(r,e,1)}}toString(){let r,e;try{const s=he.__wbindgen_add_to_stack_pointer(-16);he.blanknode_toString(s,this.__wbg_ptr);var t=Oe()[s/4+0],i=Oe()[s/4+1];return r=t,e=i,kt(t,i)}finally{he.__wbindgen_add_to_stack_pointer(16),he.__wbindgen_free(r,e,1)}}equals(r){return he.blanknode_equals(this.__wbg_ptr,r)!==0}}const ju=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>he.__wbg_defaultgraph_free(n>>>0));class Ci{static __wrap(r){r=r>>>0;const e=Object.create(Ci.prototype);return e.__wbg_ptr=r,ju.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,ju.unregister(this),r}free(){const r=this.__destroy_into_raw();he.__wbg_defaultgraph_free(r)}get termType(){let r,e;try{const s=he.__wbindgen_add_to_stack_pointer(-16);he.defaultgraph_term_type(s,this.__wbg_ptr);var t=Oe()[s/4+0],i=Oe()[s/4+1];return r=t,e=i,kt(t,i)}finally{he.__wbindgen_add_to_stack_pointer(16),he.__wbindgen_free(r,e,1)}}get value(){let r,e;try{const s=he.__wbindgen_add_to_stack_pointer(-16);he.defaultgraph_value(s,this.__wbg_ptr);var t=Oe()[s/4+0],i=Oe()[s/4+1];return r=t,e=i,kt(t,i)}finally{he.__wbindgen_add_to_stack_pointer(16),he.__wbindgen_free(r,e,1)}}toString(){let r,e;try{const s=he.__wbindgen_add_to_stack_pointer(-16);he.defaultgraph_toString(s,this.__wbg_ptr);var t=Oe()[s/4+0],i=Oe()[s/4+1];return r=t,e=i,kt(t,i)}finally{he.__wbindgen_add_to_stack_pointer(16),he.__wbindgen_free(r,e,1)}}equals(r){return he.defaultgraph_equals(this.__wbg_ptr,r)!==0}}const Vu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>he.__wbg_literal_free(n>>>0));class Ni{static __wrap(r){r=r>>>0;const e=Object.create(Ni.prototype);return e.__wbg_ptr=r,Vu.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,Vu.unregister(this),r}free(){const r=this.__destroy_into_raw();he.__wbg_literal_free(r)}get termType(){let r,e;try{const s=he.__wbindgen_add_to_stack_pointer(-16);he.literal_term_type(s,this.__wbg_ptr);var t=Oe()[s/4+0],i=Oe()[s/4+1];return r=t,e=i,kt(t,i)}finally{he.__wbindgen_add_to_stack_pointer(16),he.__wbindgen_free(r,e,1)}}get value(){let r,e;try{const s=he.__wbindgen_add_to_stack_pointer(-16);he.literal_value(s,this.__wbg_ptr);var t=Oe()[s/4+0],i=Oe()[s/4+1];return r=t,e=i,kt(t,i)}finally{he.__wbindgen_add_to_stack_pointer(16),he.__wbindgen_free(r,e,1)}}get language(){let r,e;try{const s=he.__wbindgen_add_to_stack_pointer(-16);he.literal_language(s,this.__wbg_ptr);var t=Oe()[s/4+0],i=Oe()[s/4+1];return r=t,e=i,kt(t,i)}finally{he.__wbindgen_add_to_stack_pointer(16),he.__wbindgen_free(r,e,1)}}get datatype(){const r=he.literal_datatype(this.__wbg_ptr);return Yn.__wrap(r)}toString(){let r,e;try{const s=he.__wbindgen_add_to_stack_pointer(-16);he.literal_toString(s,this.__wbg_ptr);var t=Oe()[s/4+0],i=Oe()[s/4+1];return r=t,e=i,kt(t,i)}finally{he.__wbindgen_add_to_stack_pointer(16),he.__wbindgen_free(r,e,1)}}equals(r){return he.literal_equals(this.__wbg_ptr,r)!==0}}const Hu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>he.__wbg_namednode_free(n>>>0));class Yn{static __wrap(r){r=r>>>0;const e=Object.create(Yn.prototype);return e.__wbg_ptr=r,Hu.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,Hu.unregister(this),r}free(){const r=this.__destroy_into_raw();he.__wbg_namednode_free(r)}get termType(){let r,e;try{const s=he.__wbindgen_add_to_stack_pointer(-16);he.namednode_term_type(s,this.__wbg_ptr);var t=Oe()[s/4+0],i=Oe()[s/4+1];return r=t,e=i,kt(t,i)}finally{he.__wbindgen_add_to_stack_pointer(16),he.__wbindgen_free(r,e,1)}}get value(){let r,e;try{const s=he.__wbindgen_add_to_stack_pointer(-16);he.namednode_value(s,this.__wbg_ptr);var t=Oe()[s/4+0],i=Oe()[s/4+1];return r=t,e=i,kt(t,i)}finally{he.__wbindgen_add_to_stack_pointer(16),he.__wbindgen_free(r,e,1)}}toString(){let r,e;try{const s=he.__wbindgen_add_to_stack_pointer(-16);he.namednode_toString(s,this.__wbg_ptr);var t=Oe()[s/4+0],i=Oe()[s/4+1];return r=t,e=i,kt(t,i)}finally{he.__wbindgen_add_to_stack_pointer(16),he.__wbindgen_free(r,e,1)}}equals(r){return he.namednode_equals(this.__wbg_ptr,r)!==0}}const zu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>he.__wbg_quad_free(n>>>0));class Jn{static __wrap(r){r=r>>>0;const e=Object.create(Jn.prototype);return e.__wbg_ptr=r,zu.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,zu.unregister(this),r}free(){const r=this.__destroy_into_raw();he.__wbg_quad_free(r)}get termType(){let r,e;try{const s=he.__wbindgen_add_to_stack_pointer(-16);he.quad_term_type(s,this.__wbg_ptr);var t=Oe()[s/4+0],i=Oe()[s/4+1];return r=t,e=i,kt(t,i)}finally{he.__wbindgen_add_to_stack_pointer(16),he.__wbindgen_free(r,e,1)}}get value(){let r,e;try{const s=he.__wbindgen_add_to_stack_pointer(-16);he.defaultgraph_value(s,this.__wbg_ptr);var t=Oe()[s/4+0],i=Oe()[s/4+1];return r=t,e=i,kt(t,i)}finally{he.__wbindgen_add_to_stack_pointer(16),he.__wbindgen_free(r,e,1)}}get subject(){return he.quad_subject(this.__wbg_ptr)}get predicate(){return he.quad_predicate(this.__wbg_ptr)}get object(){return he.quad_object(this.__wbg_ptr)}get graph(){return he.quad_graph(this.__wbg_ptr)}toString(){let r,e;try{const s=he.__wbindgen_add_to_stack_pointer(-16);he.quad_toString(s,this.__wbg_ptr);var t=Oe()[s/4+0],i=Oe()[s/4+1];return r=t,e=i,kt(t,i)}finally{he.__wbindgen_add_to_stack_pointer(16),he.__wbindgen_free(r,e,1)}}equals(r){return he.quad_equals(this.__wbg_ptr,r)!==0}}const S2=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>he.__wbg_store_free(n>>>0));class ih{__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,S2.unregister(this),r}free(){const r=this.__destroy_into_raw();he.__wbg_store_free(r)}constructor(r){try{const s=he.__wbindgen_add_to_stack_pointer(-16);he.store_new(s,r);var e=Oe()[s/4+0],t=Oe()[s/4+1],i=Oe()[s/4+2];if(i)throw Lt(t);return this.__wbg_ptr=e>>>0,this}finally{he.__wbindgen_add_to_stack_pointer(16)}}add(r){try{const i=he.__wbindgen_add_to_stack_pointer(-16);he.store_add(i,this.__wbg_ptr,r);var e=Oe()[i/4+0],t=Oe()[i/4+1];if(t)throw Lt(e)}finally{he.__wbindgen_add_to_stack_pointer(16)}}delete(r){try{const i=he.__wbindgen_add_to_stack_pointer(-16);he.store_delete(i,this.__wbg_ptr,r);var e=Oe()[i/4+0],t=Oe()[i/4+1];if(t)throw Lt(e)}finally{he.__wbindgen_add_to_stack_pointer(16)}}has(r){try{const s=he.__wbindgen_add_to_stack_pointer(-16);he.store_has(s,this.__wbg_ptr,r);var e=Oe()[s/4+0],t=Oe()[s/4+1],i=Oe()[s/4+2];if(i)throw Lt(t);return e!==0}finally{he.__wbindgen_add_to_stack_pointer(16)}}get size(){try{const i=he.__wbindgen_add_to_stack_pointer(-16);he.store_size(i,this.__wbg_ptr);var r=Oe()[i/4+0],e=Oe()[i/4+1],t=Oe()[i/4+2];if(t)throw Lt(e);return r>>>0}finally{he.__wbindgen_add_to_stack_pointer(16)}}match(r,e,t,i){try{const f=he.__wbindgen_add_to_stack_pointer(-16);he.store_match(f,this.__wbg_ptr,r,e,t,i);var s=Oe()[f/4+0],l=Oe()[f/4+1],a=Oe()[f/4+2],u=Oe()[f/4+3];if(u)throw Lt(a);var o=I2(s,l).slice();return he.__wbindgen_free(s,l*4,4),o}finally{he.__wbindgen_add_to_stack_pointer(16)}}query(r,e){try{const l=he.__wbindgen_add_to_stack_pointer(-16),a=Xr(r,he.__wbindgen_malloc,he.__wbindgen_realloc),u=wr;he.store_query(l,this.__wbg_ptr,a,u,e);var t=Oe()[l/4+0],i=Oe()[l/4+1],s=Oe()[l/4+2];if(s)throw Lt(i);return Lt(t)}finally{he.__wbindgen_add_to_stack_pointer(16)}}update(r,e){try{const s=he.__wbindgen_add_to_stack_pointer(-16),l=Xr(r,he.__wbindgen_malloc,he.__wbindgen_realloc),a=wr;he.store_update(s,this.__wbg_ptr,l,a,e);var t=Oe()[s/4+0],i=Oe()[s/4+1];if(i)throw Lt(t)}finally{he.__wbindgen_add_to_stack_pointer(16)}}load(r,e,t,i){try{const a=he.__wbindgen_add_to_stack_pointer(-16),u=Xr(r,he.__wbindgen_malloc,he.__wbindgen_realloc),o=wr;he.store_load(a,this.__wbg_ptr,u,o,e,t,i);var s=Oe()[a/4+0],l=Oe()[a/4+1];if(l)throw Lt(s)}finally{he.__wbindgen_add_to_stack_pointer(16)}}dump(r,e){let t,i;try{const h=he.__wbindgen_add_to_stack_pointer(-16);he.store_dump(h,this.__wbg_ptr,r,e);var s=Oe()[h/4+0],l=Oe()[h/4+1],a=Oe()[h/4+2],u=Oe()[h/4+3],o=s,f=l;if(u)throw o=0,f=0,Lt(a);return t=o,i=f,kt(o,f)}finally{he.__wbindgen_add_to_stack_pointer(16),he.__wbindgen_free(t,i,1)}}}const xu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>he.__wbg_variable_free(n>>>0));class Ii{static __wrap(r){r=r>>>0;const e=Object.create(Ii.prototype);return e.__wbg_ptr=r,xu.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,xu.unregister(this),r}free(){const r=this.__destroy_into_raw();he.__wbg_variable_free(r)}get termType(){let r,e;try{const s=he.__wbindgen_add_to_stack_pointer(-16);he.variable_term_type(s,this.__wbg_ptr);var t=Oe()[s/4+0],i=Oe()[s/4+1];return r=t,e=i,kt(t,i)}finally{he.__wbindgen_add_to_stack_pointer(16),he.__wbindgen_free(r,e,1)}}get value(){let r,e;try{const s=he.__wbindgen_add_to_stack_pointer(-16);he.variable_value(s,this.__wbg_ptr);var t=Oe()[s/4+0],i=Oe()[s/4+1];return r=t,e=i,kt(t,i)}finally{he.__wbindgen_add_to_stack_pointer(16),he.__wbindgen_free(r,e,1)}}toString(){let r,e;try{const s=he.__wbindgen_add_to_stack_pointer(-16);he.variable_toString(s,this.__wbg_ptr);var t=Oe()[s/4+0],i=Oe()[s/4+1];return r=t,e=i,kt(t,i)}finally{he.__wbindgen_add_to_stack_pointer(16),he.__wbindgen_free(r,e,1)}}equals(r){return he.variable_equals(this.__wbg_ptr,r)!==0}}async function B2(n,r){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,r)}catch(t){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}const e=await n.arrayBuffer();return await WebAssembly.instantiate(e,r)}else{const e=await WebAssembly.instantiate(n,r);return e instanceof WebAssembly.Instance?{instance:e,module:n}:e}}function lh(){const n={};return n.wbg={},n.wbg.__wbindgen_is_undefined=function(r){return r===void 0},n.wbg.__wbindgen_is_null=function(r){return r===null},n.wbg.__wbindgen_string_get=function(r,e){const t=e,i=typeof t=="string"?t:void 0;var s=Ls(i)?0:Xr(i,he.__wbindgen_malloc,he.__wbindgen_realloc),l=wr;Oe()[r/4+1]=l,Oe()[r/4+0]=s},n.wbg.__wbindgen_is_falsy=function(r){return!r},n.wbg.__wbindgen_error_new=function(r,e){return new Error(kt(r,e))},n.wbg.__wbg_namednode_new=function(r){return Yn.__wrap(r)},n.wbg.__wbg_blanknode_new=function(r){return Ti.__wrap(r)},n.wbg.__wbg_literal_new=function(r){return Ni.__wrap(r)},n.wbg.__wbg_defaultgraph_new=function(r){return Ci.__wrap(r)},n.wbg.__wbg_variable_new=function(r){return Ii.__wrap(r)},n.wbg.__wbg_quad_new=function(r){return Jn.__wrap(r)},n.wbg.__wbg_new_28c511d9baebfa89=function(r,e){return new Error(kt(r,e))},n.wbg.__wbindgen_string_new=function(r,e){return kt(r,e)},n.wbg.__wbg_new_57421e8974065233=function(r,e){return new URIError(kt(r,e))},n.wbg.__wbindgen_is_string=function(r){return typeof r=="string"},n.wbg.__wbg_iterator_2cee6dadfd956dfa=function(){return Symbol.iterator},n.wbg.__wbg_get_e3c254076557e348=function(){return hr(function(r,e){return Reflect.get(r,e)},arguments)},n.wbg.__wbindgen_is_function=function(r){return typeof r=="function"},n.wbg.__wbg_call_27c0f87801dedf93=function(){return hr(function(r,e){return r.call(e)},arguments)},n.wbg.__wbindgen_is_object=function(r){const e=r;return typeof e=="object"&&e!==null},n.wbg.__wbg_next_40fc327bfc8770e6=function(r){return r.next},n.wbg.__wbg_next_196c84450b364254=function(){return hr(function(r){return r.next()},arguments)},n.wbg.__wbg_done_298b57d23c0fc80c=function(r){return r.done},n.wbg.__wbg_value_d93c65011f51a456=function(r){return r.value},n.wbg.__wbg_new_16b304a2cfa7ff4a=function(){return new Array},n.wbg.__wbg_new_d9bc3a0147634640=function(){return new Map},n.wbg.__wbg_push_a5b05aedc7234f9f=function(r,e){return r.push(e)},n.wbg.__wbg_set_8417257aaedc936b=function(r,e,t){return r.set(e,t)},n.wbg.__wbg_warn_2b7fc46eb50827b6=function(r,e){console.warn(kt(r,e))},n.wbg.__wbg_new_abda76e883ba8a5f=function(){return new Error},n.wbg.__wbg_stack_658279fe44541cf6=function(r,e){const t=e.stack,i=Xr(t,he.__wbindgen_malloc,he.__wbindgen_realloc),s=wr;Oe()[r/4+1]=s,Oe()[r/4+0]=i},n.wbg.__wbg_error_f851667af71bcfc6=function(r,e){let t,i;try{t=r,i=e,console.error(kt(r,e))}finally{he.__wbindgen_free(t,i,1)}},n.wbg.__wbg_crypto_1d1f22824a6a080c=function(r){return r.crypto},n.wbg.__wbg_process_4a72847cc503995b=function(r){return r.process},n.wbg.__wbg_versions_f686565e586dd935=function(r){return r.versions},n.wbg.__wbg_node_104a2ff8d6ea03a2=function(r){return r.node},n.wbg.__wbg_require_cca90b1a94a0255b=function(){return hr(function(){return module.require},arguments)},n.wbg.__wbg_msCrypto_eb05e62b530a1508=function(r){return r.msCrypto},n.wbg.__wbg_newwithlength_e9b4878cebadb3d3=function(r){return new Uint8Array(r>>>0)},n.wbg.__wbg_self_ce0dbfc45cf2f5be=function(){return hr(function(){return self.self},arguments)},n.wbg.__wbg_window_c6fb939a7f436783=function(){return hr(function(){return window.window},arguments)},n.wbg.__wbg_globalThis_d1e6af4856ba331b=function(){return hr(function(){return globalThis.globalThis},arguments)},n.wbg.__wbg_global_207b558942527489=function(){return hr(function(){return global.global},arguments)},n.wbg.__wbg_newnoargs_e258087cd0daa0ea=function(r,e){return new Function(kt(r,e))},n.wbg.__wbg_call_b3ca7c6051f9bec1=function(){return hr(function(r,e,t){return r.call(e,t)},arguments)},n.wbg.__wbg_has_0af94d20077affa2=function(){return hr(function(r,e){return Reflect.has(r,e)},arguments)},n.wbg.__wbg_now_3014639a94423537=function(){return Date.now()},n.wbg.__wbindgen_memory=function(){return he.memory},n.wbg.__wbg_buffer_12d079cc21e14bdb=function(r){return r.buffer},n.wbg.__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb=function(r,e,t){return new Uint8Array(r,e>>>0,t>>>0)},n.wbg.__wbg_randomFillSync_5c9c955aa56b6049=function(){return hr(function(r,e){r.randomFillSync(e)},arguments)},n.wbg.__wbg_subarray_a1f73cd4b5b42fe1=function(r,e,t){return r.subarray(e>>>0,t>>>0)},n.wbg.__wbg_getRandomValues_3aa56aa6edec874c=function(){return hr(function(r,e){r.getRandomValues(e)},arguments)},n.wbg.__wbg_new_63b92bc8671ed464=function(r){return new Uint8Array(r)},n.wbg.__wbg_set_a47bac70306a19a7=function(r,e,t){r.set(e,t>>>0)},n.wbg.__wbindgen_throw=function(r,e){throw new Error(kt(r,e))},n.wbg.__wbindgen_init_externref_table=function(){const r=he.__wbindgen_export_2,e=r.grow(4);r.set(0,void 0),r.set(e+0,void 0),r.set(e+1,null),r.set(e+2,!0),r.set(e+3,!1)},n}function sh(n,r){return he=n.exports,dl.__wbindgen_wasm_module=r,fi=null,ci=null,oi=null,he.__wbindgen_start(),he}function O2(n){if(he!==void 0)return he;const r=lh();n instanceof WebAssembly.Module||(n=new WebAssembly.Module(n));const e=new WebAssembly.Instance(n,r);return sh(e,n)}async function dl(n){if(he!==void 0)return he;typeof n>"u"&&(n=new URL(""+new URL("../assets/web_bg.DI8SoM3H.wasm",import.meta.url).href,import.meta.url));const r=lh();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:e,module:t}=await B2(await n,r);return sh(e,t)}const L2=Object.freeze(Object.defineProperty({__proto__:null,BlankNode:Ti,DefaultGraph:Ci,Literal:Ni,NamedNode:Yn,Quad:Jn,Store:ih,Variable:Ii,blankNode:w2,default:dl,defaultGraph:k2,fromQuad:C2,fromTerm:T2,initSync:O2,literal:y2,main:F2,namedNode:b2,quad:A2,triple:D2,variable:E2},Symbol.toStringTag,{value:"Module"})),U2="/ontologies/d3fend.ttl",P2="http://d3fend.mitre.org/ontologies/d3fend.owl#",M2="http://d3fend.mitre.org/ontologies/cad/instances#",q2="cco",ah="d3f",j2="dct",uh="cad",V2="owl",oh="rdf",fh="rdfs",H2="skos",z2="xsd",Xn={[ah]:P2,[uh]:M2,[V2]:"http://www.w3.org/2002/07/owl#",[oh]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",[fh]:"http://www.w3.org/2000/01/rdf-schema#",[z2]:"http://www.w3.org/2001/XMLSchema#",[j2]:"http://purl.org/dc/terms/",[H2]:"http://www.w3.org/2004/02/skos/core#",[q2]:"http://www.ontologyrepository.com/CommonCoreOntologies/"};function x2(){const{subscribe:n,set:r,update:e}=Kt({initalized:!1,store:null,erorr:null});async function t(){try{console.log("Starting Oxigraph initialization"),console.time("Initialize Oxigraph"),console.log("Oxigraph module:",L2),console.log("Init function:",dl),await dl(),console.log("WebAssembly initialized successfully");const s=new ih;console.log("Oxigraph store created"),r({initialized:!0,store:s,error:null}),await i(s),console.log(`Oxigraph store initialized with ${s.size} triples.`)}catch(s){r({initialized:!1,store:null,error:s.message}),console.error("Failed to initialize Oxigraph store:",s)}}async function i(s){try{console.time("Load D3FEND ontology");const a=await(await fetch(U2)).text();s.load(a,{format:"ttl"}),console.timeEnd("Load D3FEND ontology"),console.log(`D3FEND ontology loaded, total triples: ${s.size}`)}catch(l){console.error("Failed to load D3FEND ontology:",l)}}return{subscribe:n,initialize:t,query:s=>new Promise((l,a)=>{e(u=>{if(!u.initialized)a(new Error("Oxigraph store not initialized"));else try{const o=u.store.query(s);l(o)}catch(o){a(o)}return u})})}}const Us=x2();async function X2(n){let r=null;return console.log("Calling lookup_valid_property..."),r=await W2(n),console.log(`Property from lookup IRI ${r}`),r==null&&(console.log("Calling lookup_valid_property_by_label..."),r=await G2(n)),r}async function G2(n){const r="findValidPropertyByLabel("+n+")";console.info(r);const e=`PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX d3f: <http://d3fend.mitre.org/ontologies/d3fend.owl#>

SELECT ?property
WHERE
{
   ?property rdfs:subPropertyOf* d3f:may-be-associated-with .
   ?property rdfs:label "${n}" .
}
LIMIT 1`;console.log({valid_value_query:e});let t=null;try{const i=await Us.query(e);i?(console.info(`Type of queryResult for property lookup by label ${n} is: `+Object.prototype.toString.call(i).slice(8,-1)),console.log({query_result:i}),Array.isArray(i)?i.length>0?t=i[0].get("property").value:console.warn(`Empty query results for valid property lookup by label ${n}.`):console.warn(`Query result not the expected Array type for property lookup by label of ${n}.`)):console.error(`Query results: ${i} for valid property lookup by label ${n}.`)}catch(i){console.warn(`Error executing oxigraph query for property lookup by label of: ${n}, error: ${i}`)}return console.info(t+" <- "+r),t}async function W2(n){const r="lookupValidPropertyByFragment("+n+")";console.info(r);const e=`PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX d3f: <http://d3fend.mitre.org/ontologies/d3fend.owl#>

SELECT ?property
WHERE
{
   VALUES ?property { ${n} }
   ?property rdfs:subPropertyOf* d3f:may-be-associated-with .
}
LIMIT 1`;let t=null;if(n.includes(":"))try{const i=await Us.query(e);console.info({query_result:i}),i?Array.isArray(i)?i.length>0?t=i[0].get("property").value:console.warn(`Empty array returned for property lookup by iri of ${n}.`):console.warn(`Query result not the expected Array type for property lookup by iri of ${n}.`):console.warn(`Undefined query result returned for property lookup by iri of ${n}.`)}catch(i){console.warn(`Error executing oxigraph query for property lookup by iri of: ${n}, error: ${i}`)}else console.warn("Attempted lookup by iri of: "+n+" but iri has no ':' char");return console.info(t+" <- "+r),t}const $r=Zt(Xn[ah]),ch=Zt(Xn[uh]),Q2=Zt(Xn[oh]),Y2=Zt(Xn[fh]);function nl(n,r){sr.set(n),bi.set(r)}function J2(){nl([],[])}const sr=Kt([]),Qe=Kt(null),bi=Kt([]);function Z2(n,r){if(r.data.d3f_class){const e=r.data.d3f_class,[t,i]=e.split(":");return $r(i)}else{const e=r.type;return{artifactSelectorNode:$r("Artifact"),vulnerabilitySelectorNode:$r("Vulnerability"),attackSelectorNode:$r("OffensiveTechnique"),countermeasureSelectorNode:$r("DefensiveTechnique"),informationSelectorNode:$r("DigitalInformation"),agentSelectorNode:$r("Agent"),eventNode:$r("Event")}[e]}}async function K2(){const n=g2();Object.keys(Xn).forEach(l=>{const a=Xn[l];console.info("Adding prefix ",l," for ",a),n.setPrefixForURI(l,a)}),console.info("Echo store.namespaces: "+n.namespaces);let r,e;const t=[],i=[];return sr.subscribe(l=>{r=l})(),bi.subscribe(l=>{e=l})(),console.info("Starting node processing..."),$2(r,n,t),console.info("Completed node processing."),console.info("Starting edge processing..."),await tg(e,n,i),console.info("Completed edge processing promise."),await new Promise((l,a)=>{vi(null,n,null,"text/turtle",(u,o)=>{if(u)a(u);else{let f=o;t.length>0&&(f+=`
# Skipped nodes (no d3f_class):
`,t.forEach(h=>{f+=`# Node ID: ${h.id}
`,JSON.stringify(h.data,null,2).split(`
`).forEach(_=>{f+=`# ${_}
`})})),i.length>0&&(f+=`#
# Skipped edges (no label lookup found.):
`,i.forEach(h=>{f+=`# Edge ID: ${h.id}
`,JSON.stringify(h.data,null,2).split(`
`).forEach(_=>{f+=`# ${_}
`})}),f+=`
`),l(f)}})})}function $2(n,r,e){console.info("Processing nodes..."),n.forEach(t=>{const i=t.id,s=t.type,l=t.data.label,a=Z2(r,t);if(a){const u=dh(i),o=m2(l.toString());eg("Processing node and data properties and using rdflib node name: ",a),r.add(u,Q2("type"),a),r.add(u,Y2("label"),o)}else e.push({id:i,type:s,data:t.data})}),console.info("Done processing nodes."),e.length>1&&console.warn("Skipped nodes:",e)}function dh(n){const r=n.replace(".","_");return ch(r)}function eg(n,r){const e=Object.prototype.toString.call(r).slice(8,-1);console.log(`${n} references ${r} of type ${e}`)}const tg=async(n,r,e)=>{console.info("Processing edges now!"),e.length=0;for(const t of n){const i=t.id,s=t.data.label,l=t.source,a=t.target;console.log(`edgeLabel: ${s}`);try{const u=await X2(s);if(u){console.log(`Found property ${u} for ${s}`),console.info(`Adding subject inst:${l} property ${u} object inst:${a}`);try{const o=dh(l),f=ch(a.replace(".","_"));r.add(o,rh(u),f),console.info(r.length)}catch{console.error(`Error adding triple for edgeId = ${i}, edgeLabel = ${s}`)}}else console.warn(`Bad property ${u} found for ${s}`),e.push({id:i,data:t.data})}catch(u){console.error(`Lookup error for edgeId: ${i} with edgeLabel: ${s} - ${u}`),e.push({id:i,data:t.data})}}console.info("Done processing edges."),e.length>1&&console.warn("Skipped edges:",e)};function cn(n,r,e,t,i,s,l,a,u,o,f,h,d){const c={id:`${Math.random()}`,type:t,position:{x:a,y:u},data:{label:i,sequence:l,d3f_class:s},measured:{width:o,height:f},origin:[.5,0],selected:!1,dragging:!1};let _,w;d?(_=c.id,w=e.id):(_=e.id,w=c.id);const k={type:"editableEdge",data:{label:h},source:w,sourceHandle:"source",target:_,targetHandle:"target",id:`xy-edge__${w}source-${_}target`,selected:!1};r.update(C=>[...C,k]),n.update(C=>[...C,c])}function Xu(n,r,e){const t=n.slice();return t[18]=r[e],t}const rg=n=>({}),Gu=n=>({});function ng(n){let r;return{c(){r=V("No related offensive techniques in this release.")},l(e){r=H(e,"No related offensive techniques in this release.")},m(e,t){A(e,r,t)},p:Le,i:Le,o:Le,d(e){e&&m(r)}}}function ig(n){let r,e;return r=new nn({props:{$$slots:{default:[ug]},$$scope:{ctx:n}}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i&16394&&(s.$$scope={dirty:i,ctx:t}),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function lg(n){let r,e="Loading...";return{c(){r=Q("div"),r.textContent=e},l(t){r=Y(t,"DIV",{"data-svelte-h":!0}),We(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,i){A(t,r,i)},p:Le,i:Le,o:Le,d(t){t&&m(r)}}}function Wu(n){let r=n[18].off_tech_id.value.replace(/ |\./g,"")+"",e,t,i=n[18].off_tech_label.value+"",s,l,a="-->",u,o,f=n[18].off_artifact_rel_label.value.replace(/ /g,"")+"",h,d,c=Re(n[18].off_artifact.value)+"",_,w,k=n[18].off_artifact_label.value+"",C,j,S,F,b=Re(n[18].off_artifact.value)+"",y,v,B=n[18].off_tech_id.value.replace(/ |\./g,"")+"",T,U,E=n[18].off_tech_id.value.replace(/ |\./g,"")+"",P,O,N=Re(n[18].off_artifact.value)+"",X,L,ae=Re(n[18].off_artifact.value)+"",K,G;function $(z,ue){return ue&10&&(S=null),S==null&&(S=!!z[3].includes(z[18].off_tech_id.value.replace(/ |\./g,""))),S?ag:sg}let J=$(n,-1),ne=J(n);return{c(){e=V(r),t=V('["'),s=V(i),l=V('"] '),u=V(a),o=V(" |"),h=V(f),d=V("| "),_=V(c),w=V('["'),C=V(k),j=V(`"];
            `),ne.c(),F=V(`
            class `),y=V(b),v=V(" ArtifactNode; click "),T=V(B),U=V(` href "javascript:da_to_off_callback('`),P=V(E),O=V(`')"; click `),X=V(N),L=V(' href "/dao/artifact/d3f:'),K=V(ae),G=V('";')},l(z){e=H(z,r),t=H(z,'["'),s=H(z,i),l=H(z,'"] '),u=H(z,a),o=H(z," |"),h=H(z,f),d=H(z,"| "),_=H(z,c),w=H(z,'["'),C=H(z,k),j=H(z,`"];
            `),ne.l(z),F=H(z,`
            class `),y=H(z,b),v=H(z," ArtifactNode; click "),T=H(z,B),U=H(z,` href "javascript:da_to_off_callback('`),P=H(z,E),O=H(z,`')"; click `),X=H(z,N),L=H(z,' href "/dao/artifact/d3f:'),K=H(z,ae),G=H(z,'";')},m(z,ue){A(z,e,ue),A(z,t,ue),A(z,s,ue),A(z,l,ue),A(z,u,ue),A(z,o,ue),A(z,h,ue),A(z,d,ue),A(z,_,ue),A(z,w,ue),A(z,C,ue),A(z,j,ue),ne.m(z,ue),A(z,F,ue),A(z,y,ue),A(z,v,ue),A(z,T,ue),A(z,U,ue),A(z,P,ue),A(z,O,ue),A(z,X,ue),A(z,L,ue),A(z,K,ue),A(z,G,ue)},p(z,ue){ue&2&&r!==(r=z[18].off_tech_id.value.replace(/ |\./g,"")+"")&&me(e,r),ue&2&&i!==(i=z[18].off_tech_label.value+"")&&me(s,i),ue&2&&f!==(f=z[18].off_artifact_rel_label.value.replace(/ /g,"")+"")&&me(h,f),ue&2&&c!==(c=Re(z[18].off_artifact.value)+"")&&me(_,c),ue&2&&k!==(k=z[18].off_artifact_label.value+"")&&me(C,k),J===(J=$(z,ue))&&ne?ne.p(z,ue):(ne.d(1),ne=J(z),ne&&(ne.c(),ne.m(F.parentNode,F))),ue&2&&b!==(b=Re(z[18].off_artifact.value)+"")&&me(y,b),ue&2&&B!==(B=z[18].off_tech_id.value.replace(/ |\./g,"")+"")&&me(T,B),ue&2&&E!==(E=z[18].off_tech_id.value.replace(/ |\./g,"")+"")&&me(P,E),ue&2&&N!==(N=Re(z[18].off_artifact.value)+"")&&me(X,N),ue&2&&ae!==(ae=Re(z[18].off_artifact.value)+"")&&me(K,ae)},d(z){z&&(m(e),m(t),m(s),m(l),m(u),m(o),m(h),m(d),m(_),m(w),m(C),m(j),m(F),m(y),m(v),m(T),m(U),m(P),m(O),m(X),m(L),m(K),m(G)),ne.d(z)}}}function sg(n){let r,e=n[18].off_tech_id.value.replace(/ |\./g,"")+"",t,i;return{c(){r=V("class "),t=V(e),i=V(" OffensiveTechniqueNode;")},l(s){r=H(s,"class "),t=H(s,e),i=H(s," OffensiveTechniqueNode;")},m(s,l){A(s,r,l),A(s,t,l),A(s,i,l)},p(s,l){l&2&&e!==(e=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&me(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function ag(n){let r,e=n[18].off_tech_id.value.replace(/ |\./g,"")+"",t,i;return{c(){r=V("class "),t=V(e),i=V(" SelectedOffensiveTechniqueNode;")},l(s){r=H(s,"class "),t=H(s,e),i=H(s," SelectedOffensiveTechniqueNode;")},m(s,l){A(s,r,l),A(s,t,l),A(s,i,l)},p(s,l){l&2&&e!==(e=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&me(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function Qu(n){let r=n[6].edge_is_unique(n[18].off_tech_label.value,n[18].off_artifact_rel_label.value,n[18].off_artifact_label.value),e,t=r&&Wu(n);return{c(){t&&t.c(),e=Ae()},l(i){t&&t.l(i),e=Ae()},m(i,s){t&&t.m(i,s),A(i,e,s)},p(i,s){s&2&&(r=i[6].edge_is_unique(i[18].off_tech_label.value,i[18].off_artifact_rel_label.value,i[18].off_artifact_label.value)),r?t?t.p(i,s):(t=Wu(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&m(e),t&&t.d(i)}}}function ug(n){let r,e,t=xe(n[1].da_to_off.results.bindings),i=[];for(let s=0;s<t.length;s+=1)i[s]=Qu(Xu(n,t,s));return{c(){r=V(`graph LR;
        `);for(let s=0;s<i.length;s+=1)i[s].c();e=Ae()},l(s){r=H(s,`graph LR;
        `);for(let l=0;l<i.length;l+=1)i[l].l(s);e=Ae()},m(s,l){A(s,r,l);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(s,l);A(s,e,l)},p(s,l){if(l&74){t=xe(s[1].da_to_off.results.bindings);let a;for(a=0;a<t.length;a+=1){const u=Xu(s,t,a);i[a]?i[a].p(u,l):(i[a]=Qu(u),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}},d(s){s&&(m(r),m(e)),mt(i,s)}}}function og(n){let r,e,t,i,s,l,a,u,o,f,h,d,c,_=n[3].length+"",w,k,C,j,S;const F=n[9].header,b=Ft(F,n,n[14],Gu),y=n[9].default,v=Ft(y,n,n[14],null),B=[lg,ig,ng],T=[];function U(E,P){return E[1]?E[1].da_to_off.results.bindings.length>0?1:2:0}return a=U(n),u=T[a]=B[a](n),{c(){r=Q("dialog"),e=Q("div"),b&&b.c(),t=V(`
    Select Attack Techniques
    `),v&&v.c(),i=ie(),s=Q("hr"),l=ie(),u.c(),o=ie(),f=Q("hr"),h=ie(),d=Q("button"),c=V("Insert ("),w=V(_),k=V(")"),this.h()},l(E){r=Y(E,"DIALOG",{class:!0});var P=we(r);e=Y(P,"DIV",{class:!0});var O=we(e);b&&b.l(O),t=H(O,`
    Select Attack Techniques
    `),v&&v.l(O),i=le(O),s=Y(O,"HR",{}),l=le(O),u.l(O),o=le(O),f=Y(O,"HR",{}),h=le(O),d=Y(O,"BUTTON",{class:!0});var N=we(d);c=H(N,"Insert ("),w=H(N,_),k=H(N,")"),N.forEach(m),O.forEach(m),P.forEach(m),this.h()},h(){d.autofocus=!0,ee(d,"class","svelte-1ai9hff"),ee(e,"class","svelte-1ai9hff"),ee(r,"class","svelte-1ai9hff")},m(E,P){A(E,r,P),M(r,e),b&&b.m(e,null),M(e,t),v&&v.m(e,null),M(e,i),M(e,s),M(e,l),T[a].m(e,null),M(e,o),M(e,f),M(e,h),M(e,d),M(d,c),M(d,w),M(d,k),n[11](r),C=!0,d.focus(),j||(S=[pe(d,"click",n[7]),pe(e,"click",Ot(n[10])),pe(r,"close",n[12]),pe(r,"click",rn(n[13]))],j=!0)},p(E,[P]){b&&b.p&&(!C||P&16384)&&Rt(b,F,E,E[14],C?Bt(F,E[14],P,rg):St(E[14]),Gu),v&&v.p&&(!C||P&16384)&&Rt(v,y,E,E[14],C?Bt(y,E[14],P,null):St(E[14]),null);let O=a;a=U(E),a===O?T[a].p(E,P):(et(),fe(T[O],1,1,()=>{T[O]=null}),tt(),u=T[a],u?u.p(E,P):(u=T[a]=B[a](E),u.c()),se(u,1),u.m(e,o)),(!C||P&8)&&_!==(_=E[3].length+"")&&me(w,_)},i(E){C||(se(b,E),se(v,E),se(u),C=!0)},o(E){fe(b,E),fe(v,E),fe(u),C=!1},d(E){E&&m(r),b&&b.d(E),v&&v.d(E),T[a].d(),n[11](null),j=!1,it(S)}}}function fg(n,r,e){let t,i,s,{$$slots:l={},$$scope:a}=r,{show_attack_modal:u}=r,{parent_node:o}=r,{data:f}=r,h;const d=qr();Ye(n,d,b=>e(16,s=b));const c=jr();Ye(n,c,b=>e(15,i=b));let _=new jn;function w(b){t.includes(b)?e(3,t=t.filter(y=>y!==b)):t.push(b),e(3,t)}window.da_to_off_callback=function(b){w(b)};function k(){let b=0,y=200,v=100;for(const B of t){let T=f.da_to_off.results.bindings.find(U=>U.off_tech_id.value.replace(/ |\./g,"")==B);T&&(cn(d,c,o,"attackSelectorNode",T.off_tech_label.value,"d3f:"+T.off_tech_id.value,o.data.sequence,o.position.x+b*y,o.position.y+v,182,63,T.off_artifact_rel_label.value,!1),b+=1)}d.set(s),c.set(i),h&&h.close(),e(3,t=[])}function C(b){yr.call(this,n,b)}function j(b){It[b?"unshift":"push"](()=>{h=b,e(2,h)})}const S=()=>e(0,u=!1),F=()=>{h.close(),e(3,t=[])};return n.$$set=b=>{"show_attack_modal"in b&&e(0,u=b.show_attack_modal),"parent_node"in b&&e(8,o=b.parent_node),"data"in b&&e(1,f=b.data),"$$scope"in b&&e(14,a=b.$$scope)},n.$$.update=()=>{n.$$.dirty&5&&u&&h&&(h.showModal(),_.reset())},e(3,t=[]),[u,f,h,t,d,c,_,k,o,l,C,j,S,F,a]}class cg extends dt{constructor(r){super(),ht(this,r,fg,og,Je,{show_attack_modal:0,parent_node:8,data:1})}}function Yu(n,r,e){const t=n.slice();return t[23]=r[e],t}const dg=n=>({}),Ju=n=>({});function hg(n){let r;return{c(){r=V("No related defensive techniques in this release.")},l(e){r=H(e,"No related defensive techniques in this release.")},m(e,t){A(e,r,t)},p:Le,i:Le,o:Le,d(e){e&&m(r)}}}function _g(n){let r,e,t,i,s,l=n[4],a,u;function o(d){n[14](d)}let f={toggles:n[5]};n[4]!==void 0&&(f.selected=n[4]),t=new Oc({props:f}),It.push(()=>lr(t,"selected",o));let h=eo(n);return{c(){r=Q("br"),e=ie(),Ce(t.$$.fragment),s=ie(),h.c(),a=Ae()},l(d){r=Y(d,"BR",{}),e=le(d),Ne(t.$$.fragment,d),s=le(d),h.l(d),a=Ae()},m(d,c){A(d,r,c),A(d,e,c),Ie(t,d,c),A(d,s,c),h.m(d,c),A(d,a,c),u=!0},p(d,c){const _={};c&32&&(_.toggles=d[5]),!i&&c&16&&(i=!0,_.selected=d[4],ir(()=>i=!1)),t.$set(_),c&16&&Je(l,l=d[4])?(et(),fe(h,1,1,Le),tt(),h=eo(d),h.c(),se(h,1),h.m(a.parentNode,a)):h.p(d,c)},i(d){u||(se(t.$$.fragment,d),se(h),u=!0)},o(d){fe(t.$$.fragment,d),fe(h),u=!1},d(d){d&&(m(r),m(e),m(s),m(a)),Fe(t,d),h.d(d)}}}function pg(n){let r,e="Loading...";return{c(){r=Q("div"),r.textContent=e},l(t){r=Y(t,"DIV",{"data-svelte-h":!0}),We(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,i){A(t,r,i)},p:Le,i:Le,o:Le,d(t){t&&m(r)}}}function Zu(n){let r=!n[4].includes(n[23].def_tactic_label.value),e,t=r&&Ku(n);return{c(){t&&t.c(),e=Ae()},l(i){t&&t.l(i),e=Ae()},m(i,s){t&&t.m(i,s),A(i,e,s)},p(i,s){s&18&&(r=!i[4].includes(i[23].def_tactic_label.value)),r?t?t.p(i,s):(t=Ku(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&m(e),t&&t.d(i)}}}function Ku(n){let r=Re(n[23].def_tech.value)+"",e,t,i=n[23].def_tech_label.value+"",s,l,a="-->",u,o,f=n[23].def_artifact_rel_label.value.replace(/ /g,"")+"",h,d,c=Re(n[23].def_artifact.value)+"",_,w,k=n[23].def_artifact_label.value+"",C,j,S,F,b=Re(n[23].def_artifact.value)+"",y,v,B=Re(n[23].def_tech.value)+"",T,U,E=Re(n[23].def_tech.value)+"",P,O,N=Re(n[23].def_artifact.value)+"",X,L,ae=Re(n[23].def_artifact.value)+"",K,G;function $(z,ue){return ue&66&&(S=null),S==null&&(S=!!z[6].includes(Re(z[23].def_tech.value))),S?mg:gg}let J=$(n,-1),ne=J(n);return{c(){e=V(r),t=V('["'),s=V(i),l=V('"] '),u=V(a),o=V(`
                | `),h=V(f),d=V(" | "),_=V(c),w=V('["'),C=V(k),j=V(`"];
                `),ne.c(),F=V(` 
                class `),y=V(b),v=V(` ArtifactNode;
                click `),T=V(B),U=V(` href "javascript:da_to_def_callback('`),P=V(E),O=V(`')";
                click `),X=V(N),L=V(' href "/dao/artifact/d3f:'),K=V(ae),G=V('";')},l(z){e=H(z,r),t=H(z,'["'),s=H(z,i),l=H(z,'"] '),u=H(z,a),o=H(z,`
                | `),h=H(z,f),d=H(z," | "),_=H(z,c),w=H(z,'["'),C=H(z,k),j=H(z,`"];
                `),ne.l(z),F=H(z,` 
                class `),y=H(z,b),v=H(z,` ArtifactNode;
                click `),T=H(z,B),U=H(z,` href "javascript:da_to_def_callback('`),P=H(z,E),O=H(z,`')";
                click `),X=H(z,N),L=H(z,' href "/dao/artifact/d3f:'),K=H(z,ae),G=H(z,'";')},m(z,ue){A(z,e,ue),A(z,t,ue),A(z,s,ue),A(z,l,ue),A(z,u,ue),A(z,o,ue),A(z,h,ue),A(z,d,ue),A(z,_,ue),A(z,w,ue),A(z,C,ue),A(z,j,ue),ne.m(z,ue),A(z,F,ue),A(z,y,ue),A(z,v,ue),A(z,T,ue),A(z,U,ue),A(z,P,ue),A(z,O,ue),A(z,X,ue),A(z,L,ue),A(z,K,ue),A(z,G,ue)},p(z,ue){ue&2&&r!==(r=Re(z[23].def_tech.value)+"")&&me(e,r),ue&2&&i!==(i=z[23].def_tech_label.value+"")&&me(s,i),ue&2&&f!==(f=z[23].def_artifact_rel_label.value.replace(/ /g,"")+"")&&me(h,f),ue&2&&c!==(c=Re(z[23].def_artifact.value)+"")&&me(_,c),ue&2&&k!==(k=z[23].def_artifact_label.value+"")&&me(C,k),J===(J=$(z,ue))&&ne?ne.p(z,ue):(ne.d(1),ne=J(z),ne&&(ne.c(),ne.m(F.parentNode,F))),ue&2&&b!==(b=Re(z[23].def_artifact.value)+"")&&me(y,b),ue&2&&B!==(B=Re(z[23].def_tech.value)+"")&&me(T,B),ue&2&&E!==(E=Re(z[23].def_tech.value)+"")&&me(P,E),ue&2&&N!==(N=Re(z[23].def_artifact.value)+"")&&me(X,N),ue&2&&ae!==(ae=Re(z[23].def_artifact.value)+"")&&me(K,ae)},d(z){z&&(m(e),m(t),m(s),m(l),m(u),m(o),m(h),m(d),m(_),m(w),m(C),m(j),m(F),m(y),m(v),m(T),m(U),m(P),m(O),m(X),m(L),m(K),m(G)),ne.d(z)}}}function gg(n){let r,e=Re(n[23].def_tech.value)+"",t,i;return{c(){r=V("class "),t=V(e),i=V(" DefensiveTechniqueNode;")},l(s){r=H(s,"class "),t=H(s,e),i=H(s," DefensiveTechniqueNode;")},m(s,l){A(s,r,l),A(s,t,l),A(s,i,l)},p(s,l){l&2&&e!==(e=Re(s[23].def_tech.value)+"")&&me(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function mg(n){let r,e=Re(n[23].def_tech.value)+"",t,i;return{c(){r=V("class "),t=V(e),i=V(" SelectedDefensiveTechniqueNode;")},l(s){r=H(s,"class "),t=H(s,e),i=H(s," SelectedDefensiveTechniqueNode;")},m(s,l){A(s,r,l),A(s,t,l),A(s,i,l)},p(s,l){l&2&&e!==(e=Re(s[23].def_tech.value)+"")&&me(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function $u(n){let r=n[3].edge_is_unique(n[23].def_tech_label.value,n[23].def_artifact_rel_label.value,n[23].def_artifact_label.value),e,t=r&&Zu(n);return{c(){t&&t.c(),e=Ae()},l(i){t&&t.l(i),e=Ae()},m(i,s){t&&t.m(i,s),A(i,e,s)},p(i,s){s&10&&(r=i[3].edge_is_unique(i[23].def_tech_label.value,i[23].def_artifact_rel_label.value,i[23].def_artifact_label.value)),r?t?t.p(i,s):(t=Zu(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&m(e),t&&t.d(i)}}}function vg(n){let r,e,t=xe(n[1].da_to_def.results.bindings),i=[];for(let s=0;s<t.length;s+=1)i[s]=$u(Yu(n,t,s));return{c(){r=V(`graph LR;
          `);for(let s=0;s<i.length;s+=1)i[s].c();e=Ae()},l(s){r=H(s,`graph LR;
          `);for(let l=0;l<i.length;l+=1)i[l].l(s);e=Ae()},m(s,l){A(s,r,l);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(s,l);A(s,e,l)},p(s,l){if(l&90){t=xe(s[1].da_to_def.results.bindings);let a;for(a=0;a<t.length;a+=1){const u=Yu(s,t,a);i[a]?i[a].p(u,l):(i[a]=$u(u),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}},d(s){s&&(m(r),m(e)),mt(i,s)}}}function eo(n){let r,e;return r=new nn({props:{$$slots:{default:[vg]},$$scope:{ctx:n}}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i&262234&&(s.$$scope={dirty:i,ctx:t}),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function bg(n){let r,e,t,i,s,l,a,u,o,f,h,d,c,_=n[6].length+"",w,k,C,j,S;const F=n[12].header,b=Ft(F,n,n[18],Ju),y=n[12].default,v=Ft(y,n,n[18],null),B=[pg,_g,hg],T=[];function U(E,P){return E[1]?E[1].da_to_def.results.bindings.length>0?1:2:0}return a=U(n),u=T[a]=B[a](n),{c(){r=Q("dialog"),e=Q("div"),b&&b.c(),t=V(`
    Select Countermeasure Techniques
    `),v&&v.c(),i=ie(),s=Q("hr"),l=ie(),u.c(),o=ie(),f=Q("hr"),h=ie(),d=Q("button"),c=V("Insert ("),w=V(_),k=V(")"),this.h()},l(E){r=Y(E,"DIALOG",{class:!0});var P=we(r);e=Y(P,"DIV",{class:!0});var O=we(e);b&&b.l(O),t=H(O,`
    Select Countermeasure Techniques
    `),v&&v.l(O),i=le(O),s=Y(O,"HR",{}),l=le(O),u.l(O),o=le(O),f=Y(O,"HR",{}),h=le(O),d=Y(O,"BUTTON",{class:!0});var N=we(d);c=H(N,"Insert ("),w=H(N,_),k=H(N,")"),N.forEach(m),O.forEach(m),P.forEach(m),this.h()},h(){d.autofocus=!0,ee(d,"class","svelte-1yq7x1p"),ee(e,"class","svelte-1yq7x1p"),ee(r,"class","svelte-1yq7x1p")},m(E,P){A(E,r,P),M(r,e),b&&b.m(e,null),M(e,t),v&&v.m(e,null),M(e,i),M(e,s),M(e,l),T[a].m(e,null),M(e,o),M(e,f),M(e,h),M(e,d),M(d,c),M(d,w),M(d,k),n[15](r),C=!0,d.focus(),j||(S=[pe(d,"click",n[9]),pe(e,"click",Ot(n[13])),pe(r,"close",n[16]),pe(r,"click",rn(n[17]))],j=!0)},p(E,[P]){b&&b.p&&(!C||P&262144)&&Rt(b,F,E,E[18],C?Bt(F,E[18],P,dg):St(E[18]),Ju),v&&v.p&&(!C||P&262144)&&Rt(v,y,E,E[18],C?Bt(y,E[18],P,null):St(E[18]),null);let O=a;a=U(E),a===O?T[a].p(E,P):(et(),fe(T[O],1,1,()=>{T[O]=null}),tt(),u=T[a],u?u.p(E,P):(u=T[a]=B[a](E),u.c()),se(u,1),u.m(e,o)),(!C||P&64)&&_!==(_=E[6].length+"")&&me(w,_)},i(E){C||(se(b,E),se(v,E),se(u),C=!0)},o(E){fe(b,E),fe(v,E),fe(u),C=!1},d(E){E&&m(r),b&&b.d(E),v&&v.d(E),T[a].d(),n[15](null),j=!1,it(S)}}}function wg(n,r,e){let t,i,s,{$$slots:l={},$$scope:a}=r,{show_defend_modal:u}=r,{parent_node:o}=r,{data:f}=r,h;const d=qr();Ye(n,d,U=>e(20,s=U));const c=jr();Ye(n,c,U=>e(19,i=U));let _=new jn;function w(U){t.includes(U)?e(6,t=t.filter(E=>E!==U)):t.push(U),e(6,t)}window.da_to_def_callback=function(U){w(U)};function k(){let U=0,E=200,P=100;for(const O of t){let N=f.da_to_def.results.bindings.find(X=>Re(X.def_tech.value)==O);N&&(cn(d,c,o,"countermeasureSelectorNode",N.def_tech_label.value,"d3f:"+Re(N.def_tech.value),o.data.sequence,o.position.x+U*E,o.position.y-P,182,63,N.def_artifact_rel_label.value,!1),U+=1)}d.set(s),c.set(i),h&&h.close(),e(6,t=[])}let C=new Set,j=[],S=[];Rc(j,S)&&(S=[]);function F(U){for(const E of t){let P=f.da_to_def.results.bindings.find(O=>Re(O.def_tech.value)==E);U.includes(P.def_tactic_label.value)&&e(6,t=t.filter(O=>O!==E))}e(6,t)}function b(U){yr.call(this,n,U)}function y(U){S=U,e(4,S)}function v(U){It[U?"unshift":"push"](()=>{h=U,e(2,h)})}const B=()=>e(0,u=!1),T=()=>{h.close(),e(6,t=[])};return n.$$set=U=>{"show_defend_modal"in U&&e(0,u=U.show_defend_modal),"parent_node"in U&&e(10,o=U.parent_node),"data"in U&&e(1,f=U.data),"$$scope"in U&&e(18,a=U.$$scope)},n.$$.update=()=>{n.$$.dirty&5&&u&&h&&(h.showModal(),e(3,_=new jn)),n.$$.dirty&2050&&f&&(f.da_to_def.results.bindings.forEach(U=>{C.add(U.def_tactic_label.value)}),e(11,C),e(1,f)),n.$$.dirty&2048&&e(5,j=Array.from(C).sort(function(U,E){return ll[U]-ll[E]})),n.$$.dirty&16&&F(S),n.$$.dirty&24&&_.reset(S)},e(6,t=[]),[u,f,h,_,S,j,t,d,c,k,o,C,l,b,y,v,B,T,a]}class yg extends dt{constructor(r){super(),ht(this,r,wg,bg,Je,{show_defend_modal:0,parent_node:10,data:1})}}function to(n,r,e){const t=n.slice();return t[27]=r[e],t}function ro(n,r,e){const t=n.slice();return t[30]=r[e],t}function no(n,r,e){const t=n.slice();return t[33]=r[e],t}function io(n,r,e){const t=n.slice();return t[27]=r[e],t}function lo(n,r,e){const t=n.slice();return t[30]=r[e],t}const kg=n=>({}),so=n=>({});function Eg(n){let r;return{c(){r=V("No related weaknesses in this release")},l(e){r=H(e,"No related weaknesses in this release")},m(e,t){A(e,r,t)},p:Le,i:Le,o:Le,d(e){e&&m(r)}}}function Dg(n){let r,e;return r=new nn({props:{$$slots:{default:[Tg]},$$scope:{ctx:n}}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i[0]&8389054&&(s.$$scope={dirty:i,ctx:t}),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function Ag(n){let r,e="Loading...";return{c(){r=Q("div"),r.textContent=e},l(t){r=Y(t,"DIV",{"data-svelte-h":!0}),We(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,i){A(t,r,i)},p:Le,i:Le,o:Le,d(t){t&&m(r)}}}function ao(n){let r,e=xe(n[33]["d3f:outbound"]),t=[];for(let i=0;i<e.length;i+=1)t[i]=fo(io(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Ae()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Ae()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);A(i,r,s)},p(i,s){if(s[0]&430){e=xe(i[33]["d3f:outbound"]);let l;for(l=0;l<e.length;l+=1){const a=io(i,e,l);t[l]?t[l].p(a,s):(t[l]=fo(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),mt(t,i)}}}function uo(n){let r,e=n[33]["@id"]+"",t,i;return{c(){r=V("class "),t=V(e),i=V(" selected_inbound_node;")},l(s){r=H(s,"class "),t=H(s,e),i=H(s," selected_inbound_node;")},m(s,l){A(s,r,l),A(s,t,l),A(s,i,l)},p(s,l){l[0]&160&&e!==(e=s[33]["@id"]+"")&&me(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function oo(n){let r=n[33]["@id"]+"",e,t,i=n[33]["rdfs:label"][0]+"",s,l,a="-->",u,o,f=Re(n[27]["@id"])+"",h,d,c=n[30]["@id"]+"",_,w,k=n[7].i(n[30]["@id"])["rdfs:label"][0]+"",C,j,S=n[33]["@id"]+"",F,b,y=n[33]["@id"]+"",v,B,T,U,E=n[8].includes(n[33]["@id"]),P,O=n[30]["@id"]+"",N,X,L=n[30]["@id"]+"",ae,K,G,$,J=n[33]["@id"]+"",ne,z,ue=n[33]["@id"]+"",Pe,He,be=n[30]["@id"]+"",De,_e,Te=n[3](n[30])+"",lt,gt,rt=E&&uo(n);return{c(){e=V(r),t=V('["'),s=V(i),l=V('"] '),u=V(a),o=V(" | "),h=V(f),d=V(" | "),_=V(c),w=V('["'),C=V(k),j=V(`"];
                class `),F=V(S),b=V(" inbound_node; style "),v=V(y),B=V(" fill:"),T=V(n[1]),U=V(`;
                `),rt&&rt.c(),P=V(`
                class `),N=V(O),X=V(" RootArtifactNode; style "),ae=V(L),K=V(" fill:"),G=V(n[2]),$=V(`;
                click `),ne=V(J),z=V(` href "javascript:da_to_weak_callback('`),Pe=V(ue),He=V(`')"; click `),De=V(be),_e=V(' href "'),lt=V(Te),gt=V('";')},l(Ee){e=H(Ee,r),t=H(Ee,'["'),s=H(Ee,i),l=H(Ee,'"] '),u=H(Ee,a),o=H(Ee," | "),h=H(Ee,f),d=H(Ee," | "),_=H(Ee,c),w=H(Ee,'["'),C=H(Ee,k),j=H(Ee,`"];
                class `),F=H(Ee,S),b=H(Ee," inbound_node; style "),v=H(Ee,y),B=H(Ee," fill:"),T=H(Ee,n[1]),U=H(Ee,`;
                `),rt&&rt.l(Ee),P=H(Ee,`
                class `),N=H(Ee,O),X=H(Ee," RootArtifactNode; style "),ae=H(Ee,L),K=H(Ee," fill:"),G=H(Ee,n[2]),$=H(Ee,`;
                click `),ne=H(Ee,J),z=H(Ee,` href "javascript:da_to_weak_callback('`),Pe=H(Ee,ue),He=H(Ee,`')"; click `),De=H(Ee,be),_e=H(Ee,' href "'),lt=H(Ee,Te),gt=H(Ee,'";')},m(Ee,Ue){A(Ee,e,Ue),A(Ee,t,Ue),A(Ee,s,Ue),A(Ee,l,Ue),A(Ee,u,Ue),A(Ee,o,Ue),A(Ee,h,Ue),A(Ee,d,Ue),A(Ee,_,Ue),A(Ee,w,Ue),A(Ee,C,Ue),A(Ee,j,Ue),A(Ee,F,Ue),A(Ee,b,Ue),A(Ee,v,Ue),A(Ee,B,Ue),A(Ee,T,Ue),A(Ee,U,Ue),rt&&rt.m(Ee,Ue),A(Ee,P,Ue),A(Ee,N,Ue),A(Ee,X,Ue),A(Ee,ae,Ue),A(Ee,K,Ue),A(Ee,G,Ue),A(Ee,$,Ue),A(Ee,ne,Ue),A(Ee,z,Ue),A(Ee,Pe,Ue),A(Ee,He,Ue),A(Ee,De,Ue),A(Ee,_e,Ue),A(Ee,lt,Ue),A(Ee,gt,Ue)},p(Ee,Ue){Ue[0]&160&&r!==(r=Ee[33]["@id"]+"")&&me(e,r),Ue[0]&160&&i!==(i=Ee[33]["rdfs:label"][0]+"")&&me(s,i),Ue[0]&160&&f!==(f=Re(Ee[27]["@id"])+"")&&me(h,f),Ue[0]&160&&c!==(c=Ee[30]["@id"]+"")&&me(_,c),Ue[0]&160&&k!==(k=Ee[7].i(Ee[30]["@id"])["rdfs:label"][0]+"")&&me(C,k),Ue[0]&160&&S!==(S=Ee[33]["@id"]+"")&&me(F,S),Ue[0]&160&&y!==(y=Ee[33]["@id"]+"")&&me(v,y),Ue[0]&2&&me(T,Ee[1]),Ue[0]&416&&(E=Ee[8].includes(Ee[33]["@id"])),E?rt?rt.p(Ee,Ue):(rt=uo(Ee),rt.c(),rt.m(P.parentNode,P)):rt&&(rt.d(1),rt=null),Ue[0]&160&&O!==(O=Ee[30]["@id"]+"")&&me(N,O),Ue[0]&160&&L!==(L=Ee[30]["@id"]+"")&&me(ae,L),Ue[0]&4&&me(G,Ee[2]),Ue[0]&160&&J!==(J=Ee[33]["@id"]+"")&&me(ne,J),Ue[0]&160&&ue!==(ue=Ee[33]["@id"]+"")&&me(Pe,ue),Ue[0]&160&&be!==(be=Ee[30]["@id"]+"")&&me(De,be),Ue[0]&168&&Te!==(Te=Ee[3](Ee[30])+"")&&me(lt,Te)},d(Ee){Ee&&(m(e),m(t),m(s),m(l),m(u),m(o),m(h),m(d),m(_),m(w),m(C),m(j),m(F),m(b),m(v),m(B),m(T),m(U),m(P),m(N),m(X),m(ae),m(K),m(G),m($),m(ne),m(z),m(Pe),m(He),m(De),m(_e),m(lt),m(gt)),rt&&rt.d(Ee)}}}function fo(n){let r,e=xe(n[33][n[27]["@id"]]),t=[];for(let i=0;i<e.length;i+=1)t[i]=oo(lo(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Ae()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Ae()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);A(i,r,s)},p(i,s){if(s[0]&430){e=xe(i[33][i[27]["@id"]]);let l;for(l=0;l<e.length;l+=1){const a=lo(i,e,l);t[l]?t[l].p(a,s):(t[l]=oo(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),mt(t,i)}}}function co(n){let r,e=n[33]["d3f:outbound"]&&ao(n);return{c(){e&&e.c(),r=Ae()},l(t){e&&e.l(t),r=Ae()},m(t,i){e&&e.m(t,i),A(t,r,i)},p(t,i){t[33]["d3f:outbound"]?e?e.p(t,i):(e=ao(t),e.c(),e.m(r.parentNode,r)):e&&(e.d(1),e=null)},d(t){t&&m(r),e&&e.d(t)}}}function ho(n){let r,e=xe(n[7].i(n[5].description["@id"])["d3f:outbound"]),t=[];for(let i=0;i<e.length;i+=1)t[i]=po(to(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Ae()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Ae()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);A(i,r,s)},p(i,s){if(s[0]&184){e=xe(i[7].i(i[5].description["@id"])["d3f:outbound"]);let l;for(l=0;l<e.length;l+=1){const a=to(i,e,l);t[l]?t[l].p(a,s):(t[l]=po(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),mt(t,i)}}}function _o(n){let r=n[5].description["@id"]+"",e,t,i=n[7].i(n[5].description["@id"])["rdfs:label"][0]+"",s,l,a="-->",u,o,f=Re(n[27]["@id"])+"",h,d,c=n[30]["@id"]+"",_,w,k=n[7].graph[n[7].index[n[30]["@id"]]]["rdfs:label"][0]+"",C,j,S=n[5].description["@id"]+"",F,b,y=n[30]["@id"]+"",v,B,T=n[5].description["@id"]+"",U,E,P=n[3](n[5].description["@id"])+"",O,N,X=n[30]["@id"]+"",L,ae,K=n[4](n[30])+"",G,$;return{c(){e=V(r),t=V('["'),s=V(i),l=V('"] '),u=V(a),o=V(" | "),h=V(f),d=V(" | "),_=V(c),w=V('["'),C=V(k),j=V('"]; class '),F=V(S),b=V(" RootArtifactNode; class "),v=V(y),B=V(` ArtifactNode;
              click `),U=V(T),E=V(' href "'),O=V(P),N=V('"; click '),L=V(X),ae=V(' href "'),G=V(K),$=V('";')},l(J){e=H(J,r),t=H(J,'["'),s=H(J,i),l=H(J,'"] '),u=H(J,a),o=H(J," | "),h=H(J,f),d=H(J," | "),_=H(J,c),w=H(J,'["'),C=H(J,k),j=H(J,'"]; class '),F=H(J,S),b=H(J," RootArtifactNode; class "),v=H(J,y),B=H(J,` ArtifactNode;
              click `),U=H(J,T),E=H(J,' href "'),O=H(J,P),N=H(J,'"; click '),L=H(J,X),ae=H(J,' href "'),G=H(J,K),$=H(J,'";')},m(J,ne){A(J,e,ne),A(J,t,ne),A(J,s,ne),A(J,l,ne),A(J,u,ne),A(J,o,ne),A(J,h,ne),A(J,d,ne),A(J,_,ne),A(J,w,ne),A(J,C,ne),A(J,j,ne),A(J,F,ne),A(J,b,ne),A(J,v,ne),A(J,B,ne),A(J,U,ne),A(J,E,ne),A(J,O,ne),A(J,N,ne),A(J,L,ne),A(J,ae,ne),A(J,G,ne),A(J,$,ne)},p(J,ne){ne[0]&32&&r!==(r=J[5].description["@id"]+"")&&me(e,r),ne[0]&160&&i!==(i=J[7].i(J[5].description["@id"])["rdfs:label"][0]+"")&&me(s,i),ne[0]&160&&f!==(f=Re(J[27]["@id"])+"")&&me(h,f),ne[0]&160&&c!==(c=J[30]["@id"]+"")&&me(_,c),ne[0]&160&&k!==(k=J[7].graph[J[7].index[J[30]["@id"]]]["rdfs:label"][0]+"")&&me(C,k),ne[0]&32&&S!==(S=J[5].description["@id"]+"")&&me(F,S),ne[0]&160&&y!==(y=J[30]["@id"]+"")&&me(v,y),ne[0]&32&&T!==(T=J[5].description["@id"]+"")&&me(U,T),ne[0]&40&&P!==(P=J[3](J[5].description["@id"])+"")&&me(O,P),ne[0]&160&&X!==(X=J[30]["@id"]+"")&&me(L,X),ne[0]&176&&K!==(K=J[4](J[30])+"")&&me(G,K)},d(J){J&&(m(e),m(t),m(s),m(l),m(u),m(o),m(h),m(d),m(_),m(w),m(C),m(j),m(F),m(b),m(v),m(B),m(U),m(E),m(O),m(N),m(L),m(ae),m(G),m($))}}}function po(n){let r,e=xe(n[7].i(n[5].description["@id"])[n[27]["@id"]]),t=[];for(let i=0;i<e.length;i+=1)t[i]=_o(ro(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Ae()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Ae()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);A(i,r,s)},p(i,s){if(s[0]&184){e=xe(i[7].i(i[5].description["@id"])[i[27]["@id"]]);let l;for(l=0;l<e.length;l+=1){const a=ro(i,e,l);t[l]?t[l].p(a,s):(t[l]=_o(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),mt(t,i)}}}function Tg(n){let r,e,t=n[7].i(n[5].description["@id"])&&n[7].i(n[5].description["@id"])["d3f:outbound"],i,s=xe(n[7].graph.filter(n[19])),l=[];for(let u=0;u<s.length;u+=1)l[u]=co(no(n,s,u));let a=t&&ho(n);return{c(){r=V(`graph LR;
        `);for(let u=0;u<l.length;u+=1)l[u].c();e=ie(),a&&a.c(),i=Ae()},l(u){r=H(u,`graph LR;
        `);for(let o=0;o<l.length;o+=1)l[o].l(u);e=le(u),a&&a.l(u),i=Ae()},m(u,o){A(u,r,o);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(u,o);A(u,e,o),a&&a.m(u,o),A(u,i,o)},p(u,o){if(o[0]&430){s=xe(u[7].graph.filter(u[19]));let f;for(f=0;f<s.length;f+=1){const h=no(u,s,f);l[f]?l[f].p(h,o):(l[f]=co(h),l[f].c(),l[f].m(e.parentNode,e))}for(;f<l.length;f+=1)l[f].d(1);l.length=s.length}o[0]&160&&(t=u[7].i(u[5].description["@id"])&&u[7].i(u[5].description["@id"])["d3f:outbound"]),t?a?a.p(u,o):(a=ho(u),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},d(u){u&&(m(r),m(e),m(i)),mt(l,u),a&&a.d(u)}}}function Cg(n){let r,e,t,i,s,l,a,u,o,f,h,d,c,_=n[8].length+"",w,k,C,j,S;const F=n[17].header,b=Ft(F,n,n[23],so),y=n[17].default,v=Ft(y,n,n[23],null),B=[Ag,Dg,Eg],T=[];function U(E,P){return E[5]?E[7].graph.length>0?1:2:0}return a=U(n),u=T[a]=B[a](n),{c(){r=Q("dialog"),e=Q("div"),b&&b.c(),t=V(`
    Select Weaknesses
    `),v&&v.c(),i=ie(),s=Q("hr"),l=ie(),u.c(),o=ie(),f=Q("hr"),h=ie(),d=Q("button"),c=V("Insert ("),w=V(_),k=V(")"),this.h()},l(E){r=Y(E,"DIALOG",{class:!0});var P=we(r);e=Y(P,"DIV",{class:!0});var O=we(e);b&&b.l(O),t=H(O,`
    Select Weaknesses
    `),v&&v.l(O),i=le(O),s=Y(O,"HR",{}),l=le(O),u.l(O),o=le(O),f=Y(O,"HR",{}),h=le(O),d=Y(O,"BUTTON",{class:!0});var N=we(d);c=H(N,"Insert ("),w=H(N,_),k=H(N,")"),N.forEach(m),O.forEach(m),P.forEach(m),this.h()},h(){d.autofocus=!0,ee(d,"class","svelte-1resfch"),ee(e,"class","svelte-1resfch"),ee(r,"class","svelte-1resfch")},m(E,P){A(E,r,P),M(r,e),b&&b.m(e,null),M(e,t),v&&v.m(e,null),M(e,i),M(e,s),M(e,l),T[a].m(e,null),M(e,o),M(e,f),M(e,h),M(e,d),M(d,c),M(d,w),M(d,k),n[20](r),C=!0,d.focus(),j||(S=[pe(d,"click",n[11]),pe(e,"click",Ot(n[18])),pe(r,"close",n[21]),pe(r,"click",rn(n[22]))],j=!0)},p(E,P){b&&b.p&&(!C||P[0]&8388608)&&Rt(b,F,E,E[23],C?Bt(F,E[23],P,kg):St(E[23]),so),v&&v.p&&(!C||P[0]&8388608)&&Rt(v,y,E,E[23],C?Bt(y,E[23],P,null):St(E[23]),null);let O=a;a=U(E),a===O?T[a].p(E,P):(et(),fe(T[O],1,1,()=>{T[O]=null}),tt(),u=T[a],u?u.p(E,P):(u=T[a]=B[a](E),u.c()),se(u,1),u.m(e,o)),(!C||P[0]&256)&&_!==(_=E[8].length+"")&&me(w,_)},i(E){C||(se(b,E),se(v,E),se(u),C=!0)},o(E){fe(b,E),fe(v,E),fe(u),C=!1},d(E){E&&m(r),b&&b.d(E),v&&v.d(E),T[a].d(),n[20](null),j=!1,it(S)}}}function Ng(n,r,e){let t,i,s,{$$slots:l={},$$scope:a}=r,{empty_message:u="has no direct neighbors in this release."}=r,{outbound_color:o="#fff4dd"}=r,{inbound_color:f="#fff4dd"}=r,{root_color:h="#fff4dd"}=r,{link_function:d=N=>`/dao/artifact/${N["@id"]}`}=r,{inbound_link_function:c=d}=r,{root_link_function:_=N=>`/dao/artifact/${N["@id"]}`}=r,{outbound_link_function:w=d}=r,{show_weakness_modal:k}=r,{parent_node:C}=r,{data:j}=r,S;const F=qr();Ye(n,F,N=>e(25,s=N));const b=jr();Ye(n,b,N=>e(24,i=N));let y;function v(N){t.includes(N)?e(8,t=t.filter(X=>X!==N)):t.push(N),e(8,t),e(8,t)}window.da_to_weak_callback=function(N){v(N)};function B(){let N=0,X=200,L=100;for(const ae of t){let K=j.da_to_weak["@graph"].find(G=>G["@id"]==ae);K&&(cn(F,b,C,"vulnerabilitySelectorNode",K["rdfs:label"],K["d3f:cwe-id"],C.data.sequence,C.position.x+N*X,C.position.y+L,182,63,K["d3f:outbound"][0]["@id"].replace("d3f:",""),!1),N+=1)}F.set(s),b.set(i),S&&S.close(),e(8,t=[])}function T(N){yr.call(this,n,N)}const U=N=>N["@id"]!=j.description["@id"];function E(N){It[N?"unshift":"push"](()=>{S=N,e(6,S)})}const P=()=>e(0,k=!1),O=()=>{S.close(),e(8,t=[])};return n.$$set=N=>{"empty_message"in N&&e(12,u=N.empty_message),"outbound_color"in N&&e(13,o=N.outbound_color),"inbound_color"in N&&e(1,f=N.inbound_color),"root_color"in N&&e(2,h=N.root_color),"link_function"in N&&e(14,d=N.link_function),"inbound_link_function"in N&&e(15,c=N.inbound_link_function),"root_link_function"in N&&e(3,_=N.root_link_function),"outbound_link_function"in N&&e(4,w=N.outbound_link_function),"show_weakness_modal"in N&&e(0,k=N.show_weakness_modal),"parent_node"in N&&e(16,C=N.parent_node),"data"in N&&e(5,j=N.data),"$$scope"in N&&e(23,a=N.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&65&&k&&S&&S.showModal(),n.$$.dirty[0]&32&&j&&e(7,y=new Sc(j.da_to_weak,{index:!0}))},e(8,t=[]),[k,f,h,_,w,j,S,y,t,F,b,B,u,o,d,c,C,l,T,U,E,P,O,a]}class Ig extends dt{constructor(r){super(),ht(this,r,Ng,Cg,Je,{empty_message:12,outbound_color:13,inbound_color:1,root_color:2,link_function:14,inbound_link_function:15,root_link_function:3,outbound_link_function:4,show_weakness_modal:0,parent_node:16,data:5},null,[-1,-1])}}function go(n,r,e){const t=n.slice();return t[31]=r[e],t}function mo(n,r,e){const t=n.slice();return t[34]=r[e],t}function vo(n,r,e){const t=n.slice();return t[37]=r[e],t}const Fg=n=>({}),bo=n=>({});function Rg(n){let r;return{c(){r=V("No related parts/control in this release")},l(e){r=H(e,"No related parts/control in this release")},m(e,t){A(e,r,t)},p:Le,i:Le,o:Le,d(e){e&&m(r)}}}function Sg(n){let r,e;return r=new nn({props:{$$slots:{default:[Og]},$$scope:{ctx:n}}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i[0]&134217934&&(s.$$scope={dirty:i,ctx:t}),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function Bg(n){let r,e="Loading...";return{c(){r=Q("div"),r.textContent=e},l(t){r=Y(t,"DIV",{"data-svelte-h":!0}),We(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,i){A(t,r,i)},p:Le,i:Le,o:Le,d(t){t&&m(r)}}}function wo(n){let r,e=xe(n[31]["d3f:outbound"].filter(n[23])),t=[];for(let i=0;i<e.length;i+=1)t[i]=Co(mo(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Ae()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Ae()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);A(i,r,s)},p(i,s){if(s[0]&206){e=xe(i[31]["d3f:outbound"].filter(i[23]));let l;for(l=0;l<e.length;l+=1){const a=mo(i,e,l);t[l]?t[l].p(a,s):(t[l]=Co(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),mt(t,i)}}}function yo(n){let r,e,t=n[31]["@id"]!=n[2].data.d3f_class&&ko(n),i=n[37]["@id"]!=n[2].data.d3f_class&&Eo(n);return{c(){t&&t.c(),r=ie(),i&&i.c(),e=Ae()},l(s){t&&t.l(s),r=le(s),i&&i.l(s),e=Ae()},m(s,l){t&&t.m(s,l),A(s,r,l),i&&i.m(s,l),A(s,e,l)},p(s,l){s[31]["@id"]!=s[2].data.d3f_class?t?t.p(s,l):(t=ko(s),t.c(),t.m(r.parentNode,r)):t&&(t.d(1),t=null),s[37]["@id"]!=s[2].data.d3f_class?i?i.p(s,l):(i=Eo(s),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},d(s){s&&(m(r),m(e)),t&&t.d(s),i&&i.d(s)}}}function ko(n){let r,e=n[31]["@id"]+"",t,i;return{c(){r=V("class "),t=V(e),i=V(" selected_outbound_node;")},l(s){r=H(s,"class "),t=H(s,e),i=H(s," selected_outbound_node;")},m(s,l){A(s,r,l),A(s,t,l),A(s,i,l)},p(s,l){l[0]&72&&e!==(e=s[31]["@id"]+"")&&me(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function Eo(n){let r,e=n[37]["@id"]+"",t,i;return{c(){r=V("class "),t=V(e),i=V(" selected_outbound_node;")},l(s){r=H(s,"class "),t=H(s,e),i=H(s," selected_outbound_node;")},m(s,l){A(s,r,l),A(s,t,l),A(s,i,l)},p(s,l){l[0]&74&&e!==(e=s[37]["@id"]+"")&&me(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function Do(n){let r,e=n[31]["@id"]+"",t,i,s=n[31]["@id"]+"",l,a,u=Re(n[34]["@id"])+"",o,f,h=n[37]["@id"]+"",d,c;return{c(){r=V("click "),t=V(e),i=V(` href "javascript:da_to_neighbors_callback('`),l=V(s),a=V("', '"),o=V(u),f=V("','"),d=V(h),c=V(`')";`)},l(_){r=H(_,"click "),t=H(_,e),i=H(_,` href "javascript:da_to_neighbors_callback('`),l=H(_,s),a=H(_,"', '"),o=H(_,u),f=H(_,"','"),d=H(_,h),c=H(_,`')";`)},m(_,w){A(_,r,w),A(_,t,w),A(_,i,w),A(_,l,w),A(_,a,w),A(_,o,w),A(_,f,w),A(_,d,w),A(_,c,w)},p(_,w){w[0]&72&&e!==(e=_[31]["@id"]+"")&&me(t,e),w[0]&72&&s!==(s=_[31]["@id"]+"")&&me(l,s),w[0]&74&&u!==(u=Re(_[34]["@id"])+"")&&me(o,u),w[0]&74&&h!==(h=_[37]["@id"]+"")&&me(d,h)},d(_){_&&(m(r),m(t),m(i),m(l),m(a),m(o),m(f),m(d),m(c))}}}function Ao(n){let r,e=n[37]["@id"]+"",t,i,s=n[31]["@id"]+"",l,a,u=Re(n[34]["@id"])+"",o,f,h=n[37]["@id"]+"",d,c;return{c(){r=V("click "),t=V(e),i=V(` href "javascript:da_to_neighbors_callback('`),l=V(s),a=V("', '"),o=V(u),f=V("','"),d=V(h),c=V(`')";`)},l(_){r=H(_,"click "),t=H(_,e),i=H(_,` href "javascript:da_to_neighbors_callback('`),l=H(_,s),a=H(_,"', '"),o=H(_,u),f=H(_,"','"),d=H(_,h),c=H(_,`')";`)},m(_,w){A(_,r,w),A(_,t,w),A(_,i,w),A(_,l,w),A(_,a,w),A(_,o,w),A(_,f,w),A(_,d,w),A(_,c,w)},p(_,w){w[0]&74&&e!==(e=_[37]["@id"]+"")&&me(t,e),w[0]&72&&s!==(s=_[31]["@id"]+"")&&me(l,s),w[0]&74&&u!==(u=Re(_[34]["@id"])+"")&&me(o,u),w[0]&74&&h!==(h=_[37]["@id"]+"")&&me(d,h)},d(_){_&&(m(r),m(t),m(i),m(l),m(a),m(o),m(f),m(d),m(c))}}}function To(n){let r=n[31]["@id"]+"",e,t,i=n[31]["rdfs:label"][0]+"",s,l,a="-->",u,o,f=Re(n[34]["@id"])+"",h,d,c=n[37]["@id"]+"",_,w,k=n[6].i(n[37]["@id"])["rdfs:label"][0]+"",C,j,S=n[37]["@id"]+"",F,b,y=n[7].some(U),v,B,T;function U(...N){return n[21](n[31],n[34],n[37],...N)}let E=y&&yo(n),P=n[31]["@id"]!=n[2].data.d3f_class&&Do(n),O=n[37]["@id"]!=n[2].data.d3f_class&&Ao(n);return{c(){e=V(r),t=V('["'),s=V(i),l=V('"] '),u=V(a),o=V(" | "),h=V(f),d=V(" | "),_=V(c),w=V('["'),C=V(k),j=V(`"];
                class `),F=V(S),b=V(` outbound;
                `),E&&E.c(),v=ie(),P&&P.c(),B=ie(),O&&O.c(),T=Ae()},l(N){e=H(N,r),t=H(N,'["'),s=H(N,i),l=H(N,'"] '),u=H(N,a),o=H(N," | "),h=H(N,f),d=H(N," | "),_=H(N,c),w=H(N,'["'),C=H(N,k),j=H(N,`"];
                class `),F=H(N,S),b=H(N,` outbound;
                `),E&&E.l(N),v=le(N),P&&P.l(N),B=le(N),O&&O.l(N),T=Ae()},m(N,X){A(N,e,X),A(N,t,X),A(N,s,X),A(N,l,X),A(N,u,X),A(N,o,X),A(N,h,X),A(N,d,X),A(N,_,X),A(N,w,X),A(N,C,X),A(N,j,X),A(N,F,X),A(N,b,X),E&&E.m(N,X),A(N,v,X),P&&P.m(N,X),A(N,B,X),O&&O.m(N,X),A(N,T,X)},p(N,X){n=N,X[0]&72&&r!==(r=n[31]["@id"]+"")&&me(e,r),X[0]&72&&i!==(i=n[31]["rdfs:label"][0]+"")&&me(s,i),X[0]&74&&f!==(f=Re(n[34]["@id"])+"")&&me(h,f),X[0]&74&&c!==(c=n[37]["@id"]+"")&&me(_,c),X[0]&74&&k!==(k=n[6].i(n[37]["@id"])["rdfs:label"][0]+"")&&me(C,k),X[0]&74&&S!==(S=n[37]["@id"]+"")&&me(F,S),X[0]&202&&(y=n[7].some(U)),y?E?E.p(n,X):(E=yo(n),E.c(),E.m(v.parentNode,v)):E&&(E.d(1),E=null),n[31]["@id"]!=n[2].data.d3f_class?P?P.p(n,X):(P=Do(n),P.c(),P.m(B.parentNode,B)):P&&(P.d(1),P=null),n[37]["@id"]!=n[2].data.d3f_class?O?O.p(n,X):(O=Ao(n),O.c(),O.m(T.parentNode,T)):O&&(O.d(1),O=null)},d(N){N&&(m(e),m(t),m(s),m(l),m(u),m(o),m(h),m(d),m(_),m(w),m(C),m(j),m(F),m(b),m(v),m(B),m(T)),E&&E.d(N),P&&P.d(N),O&&O.d(N)}}}function Co(n){let r,e=xe(n[31][n[34]["@id"]]),t=[];for(let i=0;i<e.length;i+=1)t[i]=To(vo(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Ae()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Ae()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);A(i,r,s)},p(i,s){if(s[0]&206){e=xe(i[31][i[34]["@id"]]);let l;for(l=0;l<e.length;l+=1){const a=vo(i,e,l);t[l]?t[l].p(a,s):(t[l]=To(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),mt(t,i)}}}function No(n){let r,e=n[31]["d3f:outbound"]&&wo(n);return{c(){e&&e.c(),r=Ae()},l(t){e&&e.l(t),r=Ae()},m(t,i){e&&e.m(t,i),A(t,r,i)},p(t,i){t[31]["d3f:outbound"]?e?e.p(t,i):(e=wo(t),e.c(),e.m(r.parentNode,r)):e&&(e.d(1),e=null)},d(t){t&&m(r),e&&e.d(t)}}}function Og(n){let r,e,t=xe(n[6].graph.filter(n[22])),i=[];for(let s=0;s<t.length;s+=1)i[s]=No(go(n,t,s));return{c(){r=V(`graph LR;
        `);for(let s=0;s<i.length;s+=1)i[s].c();e=Ae()},l(s){r=H(s,`graph LR;
        `);for(let l=0;l<i.length;l+=1)i[l].l(s);e=Ae()},m(s,l){A(s,r,l);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(s,l);A(s,e,l)},p(s,l){if(l[0]&206){t=xe(s[6].graph.filter(s[22]));let a;for(a=0;a<t.length;a+=1){const u=go(s,t,a);i[a]?i[a].p(u,l):(i[a]=No(u),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}},d(s){s&&(m(r),m(e)),mt(i,s)}}}function Lg(n){let r,e,t,i,s,l,a,u,o,f,h,d,c,_=n[7].length+"",w,k,C,j,S;const F=n[19].header,b=Ft(F,n,n[27],bo),y=n[19].default,v=Ft(y,n,n[27],null),B=[Bg,Sg,Rg],T=[];function U(E,P){return E[3]?E[5]&&E[6].graph.length>0?1:2:0}return a=U(n),u=T[a]=B[a](n),{c(){r=Q("dialog"),e=Q("div"),b&&b.c(),t=V(`
    Select Parts/Control Neighbors
    `),v&&v.c(),i=ie(),s=Q("hr"),l=ie(),u.c(),o=ie(),f=Q("hr"),h=ie(),d=Q("button"),c=V("Insert ("),w=V(_),k=V(")"),this.h()},l(E){r=Y(E,"DIALOG",{class:!0});var P=we(r);e=Y(P,"DIV",{class:!0});var O=we(e);b&&b.l(O),t=H(O,`
    Select Parts/Control Neighbors
    `),v&&v.l(O),i=le(O),s=Y(O,"HR",{}),l=le(O),u.l(O),o=le(O),f=Y(O,"HR",{}),h=le(O),d=Y(O,"BUTTON",{class:!0});var N=we(d);c=H(N,"Insert ("),w=H(N,_),k=H(N,")"),N.forEach(m),O.forEach(m),P.forEach(m),this.h()},h(){d.autofocus=!0,ee(d,"class","svelte-x2no78"),ee(e,"class","svelte-x2no78"),ee(r,"class","svelte-x2no78")},m(E,P){A(E,r,P),M(r,e),b&&b.m(e,null),M(e,t),v&&v.m(e,null),M(e,i),M(e,s),M(e,l),T[a].m(e,null),M(e,o),M(e,f),M(e,h),M(e,d),M(d,c),M(d,w),M(d,k),n[24](r),C=!0,d.focus(),j||(S=[pe(d,"click",n[10]),pe(e,"click",Ot(n[20])),pe(r,"close",n[25]),pe(r,"click",rn(n[26]))],j=!0)},p(E,P){b&&b.p&&(!C||P[0]&134217728)&&Rt(b,F,E,E[27],C?Bt(F,E[27],P,Fg):St(E[27]),bo),v&&v.p&&(!C||P[0]&134217728)&&Rt(v,y,E,E[27],C?Bt(y,E[27],P,null):St(E[27]),null);let O=a;a=U(E),a===O?T[a].p(E,P):(et(),fe(T[O],1,1,()=>{T[O]=null}),tt(),u=T[a],u?u.p(E,P):(u=T[a]=B[a](E),u.c()),se(u,1),u.m(e,o)),(!C||P[0]&128)&&_!==(_=E[7].length+"")&&me(w,_)},i(E){C||(se(b,E),se(v,E),se(u),C=!0)},o(E){fe(b,E),fe(v,E),fe(u),C=!1},d(E){E&&m(r),b&&b.d(E),v&&v.d(E),T[a].d(),n[24](null),j=!1,it(S)}}}function Ug(n,r,e){let t,i,s,{$$slots:l={},$$scope:a}=r,{empty_message:u="has no direct neighbors in this release."}=r,{outbound_color:o="#fff4dd"}=r,{inbound_color:f="#fff4dd"}=r,{root_color:h="#fff4dd"}=r,{link_function:d=K=>`/dao/artifact/${K["@id"]}`}=r,{inbound_link_function:c=d}=r,{root_link_function:_=K=>`/dao/artifact/${K["@id"]}`}=r,{outbound_link_function:w=d}=r,{show_neighbors_modal:k}=r,{neighbor_filter_labels:C}=r,{parent_node:j}=r,{data:S}=r,F,b=!1;const y=qr();Ye(n,y,K=>e(29,s=K));const v=jr();Ye(n,v,K=>e(28,i=K));let B;function T(K){t.some(G=>G.source==K.source&&G.relation==K.relation&&G.target==K.target)?e(7,t=t.filter(G=>G.source!=K.source||G.relation!=K.relation||G.target!=K.target)):t.push(K),e(7,t),e(7,t)}window.da_to_neighbors_callback=function(K,G,$){T({source:K,relation:G,target:$})};function U(){let K=0,G=200,$=100;for(const J of t){let ne=S.neighbors["@graph"].find(ue=>ue["@id"]==J.source),z=S.neighbors["@graph"].find(ue=>ue["@id"]==J.target);if(ne&&z){let ue=j.data.d3f_class==ne["@id"],Pe=ue?z:ne;cn(y,v,j,"artifactSelectorNode",Pe["rdfs:label"][0],Pe["@id"],j.data.sequence,j.position.x+K*G,ue?j.position.y+$:j.position.y-$,182,63,J.relation,ue),K+=1}}y.set(s),v.set(i),F&&(F.close(),e(5,b=!1)),e(7,t=[])}function E(K){yr.call(this,n,K)}const P=(K,G,$,J)=>J.source==K["@id"]&&J.relation==Re(G["@id"])&&J.target==$["@id"],O=K=>K["@id"]!=S.description["@id"],N=K=>C.includes(K["@id"]);function X(K){It[K?"unshift":"push"](()=>{F=K,e(4,F)})}const L=()=>e(0,k=!1),ae=()=>{F.close(),e(7,t=[])};return n.$$set=K=>{"empty_message"in K&&e(11,u=K.empty_message),"outbound_color"in K&&e(12,o=K.outbound_color),"inbound_color"in K&&e(13,f=K.inbound_color),"root_color"in K&&e(14,h=K.root_color),"link_function"in K&&e(15,d=K.link_function),"inbound_link_function"in K&&e(16,c=K.inbound_link_function),"root_link_function"in K&&e(17,_=K.root_link_function),"outbound_link_function"in K&&e(18,w=K.outbound_link_function),"show_neighbors_modal"in K&&e(0,k=K.show_neighbors_modal),"neighbor_filter_labels"in K&&e(1,C=K.neighbor_filter_labels),"parent_node"in K&&e(2,j=K.parent_node),"data"in K&&e(3,S=K.data),"$$scope"in K&&e(27,a=K.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&17&&k&&F&&F.showModal(),n.$$.dirty[0]&14&&S&&(e(5,b=!1),S.neighbors["@graph"].find(K=>K["@id"]==j.data.d3f_class),S.neighbors["@graph"].some(K=>K["d3f:outbound"]&&C.some(G=>K["d3f:outbound"].some($=>$["@id"]==G)))&&(e(5,b=!0),e(6,B=new Sc(S.neighbors,{index:!0}))))},e(7,t=[]),[k,C,j,S,F,b,B,t,y,v,U,u,o,f,h,d,c,_,w,l,E,P,O,N,X,L,ae,a]}class Pg extends dt{constructor(r){super(),ht(this,r,Ug,Lg,Je,{empty_message:11,outbound_color:12,inbound_color:13,root_color:14,link_function:15,inbound_link_function:16,root_link_function:17,outbound_link_function:18,show_neighbors_modal:0,neighbor_filter_labels:1,parent_node:2,data:3},null,[-1,-1])}}function Mg(n){let r,e="attack the node",t,i,s,l,a,u="defend the node",o,f,h,d,c,_="weaknesses",w,k,C,j,S,F="explode parts",b,y,v="explode control",B,T,U,E,P,O;function N(ne){n[10](ne)}let X={parent_node:n[0],data:n[1]};n[6]!==void 0&&(X.show_attack_modal=n[6]),i=new cg({props:X}),It.push(()=>lr(i,"show_attack_modal",N));function L(ne){n[12](ne)}let ae={parent_node:n[0],data:n[1]};n[5]!==void 0&&(ae.show_defend_modal=n[5]),f=new yg({props:ae}),It.push(()=>lr(f,"show_defend_modal",L));function K(ne){n[14](ne)}let G={parent_node:n[0],empty_message:"has no related weaknesses in this release.",inbound_color:"#f9d999",inbound_link_function:n[8],data:n[1]};n[4]!==void 0&&(G.show_weakness_modal=n[4]),k=new Ig({props:G}),It.push(()=>lr(k,"show_weakness_modal",K));function $(ne){n[17](ne)}let J={neighbor_filter_labels:n[2],parent_node:n[0],empty_message:"has no related parts in this release.",inbound_color:"#f9d999",inbound_link_function:n[8],data:n[1]};return n[3]!==void 0&&(J.show_neighbors_modal=n[3]),T=new Pg({props:J}),It.push(()=>lr(T,"show_neighbors_modal",$)),{c(){r=Q("button"),r.textContent=e,t=ie(),Ce(i.$$.fragment),l=ie(),a=Q("button"),a.textContent=u,o=ie(),Ce(f.$$.fragment),d=ie(),c=Q("button"),c.textContent=_,w=ie(),Ce(k.$$.fragment),j=ie(),S=Q("button"),S.textContent=F,b=ie(),y=Q("button"),y.textContent=v,B=ie(),Ce(T.$$.fragment),this.h()},l(ne){r=Y(ne,"BUTTON",{class:!0,"data-svelte-h":!0}),We(r)!=="svelte-1dkmztx"&&(r.textContent=e),t=le(ne),Ne(i.$$.fragment,ne),l=le(ne),a=Y(ne,"BUTTON",{class:!0,"data-svelte-h":!0}),We(a)!=="svelte-22hxkb"&&(a.textContent=u),o=le(ne),Ne(f.$$.fragment,ne),d=le(ne),c=Y(ne,"BUTTON",{class:!0,"data-svelte-h":!0}),We(c)!=="svelte-12lar74"&&(c.textContent=_),w=le(ne),Ne(k.$$.fragment,ne),j=le(ne),S=Y(ne,"BUTTON",{class:!0,"data-svelte-h":!0}),We(S)!=="svelte-1hluius"&&(S.textContent=F),b=le(ne),y=Y(ne,"BUTTON",{class:!0,"data-svelte-h":!0}),We(y)!=="svelte-183zqvn"&&(y.textContent=v),B=le(ne),Ne(T.$$.fragment,ne),this.h()},h(){ee(r,"class","svelte-5he3i1"),ee(a,"class","svelte-5he3i1"),ee(c,"class","svelte-5he3i1"),ee(S,"class","svelte-5he3i1"),ee(y,"class","svelte-5he3i1")},m(ne,z){A(ne,r,z),A(ne,t,z),Ie(i,ne,z),A(ne,l,z),A(ne,a,z),A(ne,o,z),Ie(f,ne,z),A(ne,d,z),A(ne,c,z),A(ne,w,z),Ie(k,ne,z),A(ne,j,z),A(ne,S,z),A(ne,b,z),A(ne,y,z),A(ne,B,z),Ie(T,ne,z),E=!0,P||(O=[pe(r,"click",n[9]),pe(a,"click",n[11]),pe(c,"click",n[13]),pe(S,"click",n[15]),pe(y,"click",n[16])],P=!0)},p(ne,[z]){const ue={};z&1&&(ue.parent_node=ne[0]),z&2&&(ue.data=ne[1]),!s&&z&64&&(s=!0,ue.show_attack_modal=ne[6],ir(()=>s=!1)),i.$set(ue);const Pe={};z&1&&(Pe.parent_node=ne[0]),z&2&&(Pe.data=ne[1]),!h&&z&32&&(h=!0,Pe.show_defend_modal=ne[5],ir(()=>h=!1)),f.$set(Pe);const He={};z&1&&(He.parent_node=ne[0]),z&2&&(He.data=ne[1]),!C&&z&16&&(C=!0,He.show_weakness_modal=ne[4],ir(()=>C=!1)),k.$set(He);const be={};z&4&&(be.neighbor_filter_labels=ne[2]),z&1&&(be.parent_node=ne[0]),z&2&&(be.data=ne[1]),!U&&z&8&&(U=!0,be.show_neighbors_modal=ne[3],ir(()=>U=!1)),T.$set(be)},i(ne){E||(se(i.$$.fragment,ne),se(f.$$.fragment,ne),se(k.$$.fragment,ne),se(T.$$.fragment,ne),E=!0)},o(ne){fe(i.$$.fragment,ne),fe(f.$$.fragment,ne),fe(k.$$.fragment,ne),fe(T.$$.fragment,ne),E=!1},d(ne){ne&&(m(r),m(t),m(l),m(a),m(o),m(d),m(c),m(w),m(j),m(S),m(b),m(y),m(B)),Fe(i,ne),Fe(f,ne),Fe(k,ne),Fe(T,ne),P=!1,it(O)}}}function qg(n,r,e){let t,i,s,l;var a=this&&this.__awaiter||function(y,v,B,T){function U(E){return E instanceof B?E:new B(function(P){P(E)})}return new(B||(B=Promise))(function(E,P){function O(L){try{X(T.next(L))}catch(ae){P(ae)}}function N(L){try{X(T.throw(L))}catch(ae){P(ae)}}function X(L){L.done?E(L.value):U(L.value).then(O,N)}X((T=T.apply(y,v||[])).next())})};let{node:u}=r,o,f=[];function h(y){return a(this,void 0,void 0,function*(){if(y.data.d3f_class){const v=y.data.d3f_class;return yield(yield fetch(`/api/dao/artifact/${v}.json`)).json()}else alert("Please specify a D3FEND Class for this node to enable inferential mapping"),e(6,t=!1),e(5,i=!1),e(4,s=!1),e(3,l=!1)})}function d(y){return hp(y["d3f:cwe-id"][0])}const c=async()=>{e(1,o=null),e(6,t=!0),e(1,o=await h(u))};function _(y){t=y,e(6,t)}const w=async()=>{e(1,o=null),e(5,i=!0),e(1,o=await h(u))};function k(y){i=y,e(5,i)}const C=async()=>{e(1,o=null),e(4,s=!0),e(1,o=await h(u))};function j(y){s=y,e(4,s)}const S=async()=>{e(1,o=null),e(3,l=!0),e(2,f=["d3f:contains","d3f:may-contains"]),e(1,o=await h(u))},F=async()=>{e(1,o=null),e(3,l=!0),e(2,f=["d3f:runs","d3f:loads","d3f:manages"]),e(1,o=await h(u))};function b(y){l=y,e(3,l)}return n.$$set=y=>{"node"in y&&e(0,u=y.node)},e(6,t=!1),e(5,i=!1),e(4,s=!1),e(3,l=!1),[u,o,f,l,s,i,t,h,d,c,_,w,k,C,j,S,F,b]}class jg extends dt{constructor(r){super(),ht(this,r,qg,Mg,Je,{node:0})}}function Io(n,r,e){const t=n.slice();return t[18]=r[e],t[20]=e,t}const Vg=n=>({}),Fo=n=>({});function Hg(n){let r;return{c(){r=V("No related defensive techniques in this release.")},l(e){r=H(e,"No related defensive techniques in this release.")},m(e,t){A(e,r,t)},p:Le,i:Le,o:Le,d(e){e&&m(r)}}}function zg(n){let r,e;return r=new nn({props:{$$slots:{default:[Wg]},$$scope:{ctx:n}}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i&8214&&(s.$$scope={dirty:i,ctx:t}),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function xg(n){let r,e="Loading...";return{c(){r=Q("div"),r.textContent=e},l(t){r=Y(t,"DIV",{"data-svelte-h":!0}),We(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,i){A(t,r,i)},p:Le,i:Le,o:Le,d(t){t&&m(r)}}}function Xg(n){let r,e=Re(n[18].def_artifact.value)+"",t,i;return{c(){r=V("class "),t=V(e),i=V(" ArtifactNode;")},l(s){r=H(s,"class "),t=H(s,e),i=H(s," ArtifactNode;")},m(s,l){A(s,r,l),A(s,t,l),A(s,i,l)},p(s,l){l&4&&e!==(e=Re(s[18].def_artifact.value)+"")&&me(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function Gg(n){let r,e=Re(n[18].def_artifact.value)+"",t,i;return{c(){r=V("class "),t=V(e),i=V(" SelectedArtifactNode;")},l(s){r=H(s,"class "),t=H(s,e),i=H(s," SelectedArtifactNode;")},m(s,l){A(s,r,l),A(s,t,l),A(s,i,l)},p(s,l){l&4&&e!==(e=Re(s[18].def_artifact.value)+"")&&me(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function Ro(n){let r=n[1].data.d3f_class+"",e,t,i=n[2].description["@graph"][0]["rdfs:label"]+"",s,l,a="-->",u,o,f=n[18].def_artifact_rel_label.value+"",h,d,c=Re(n[18].def_artifact.value)+"",_,w,k=n[18].def_artifact_label.value+"",C,j,S=n[1].data.d3f_class+"",F,b,y,v,B=Re(n[18].def_artifact.value)+"",T,U,E=Re(n[18].def_artifact.value)+"",P,O,N=`
`,X;function L(G,$){return $&20&&(y=null),y==null&&(y=!!G[4].includes(Re(G[18].def_artifact.value))),y?Gg:Xg}let ae=L(n,-1),K=ae(n);return{c(){e=V(r),t=V('["'),s=V(i),l=V('"] '),u=V(a),o=V(' |"'),h=V(f),d=V('" | '),_=V(c),w=V('["'),C=V(k),j=V(`"];
          class `),F=V(S),b=V(` DefensiveTechniqueNode;
          `),K.c(),v=V(`
          click `),T=V(B),U=V(` href "javascript:def_to_art_callback('`),P=V(E),O=V(`')";`),X=V(N)},l(G){e=H(G,r),t=H(G,'["'),s=H(G,i),l=H(G,'"] '),u=H(G,a),o=H(G,' |"'),h=H(G,f),d=H(G,'" | '),_=H(G,c),w=H(G,'["'),C=H(G,k),j=H(G,`"];
          class `),F=H(G,S),b=H(G,` DefensiveTechniqueNode;
          `),K.l(G),v=H(G,`
          click `),T=H(G,B),U=H(G,` href "javascript:def_to_art_callback('`),P=H(G,E),O=H(G,`')";`),X=H(G,N)},m(G,$){A(G,e,$),A(G,t,$),A(G,s,$),A(G,l,$),A(G,u,$),A(G,o,$),A(G,h,$),A(G,d,$),A(G,_,$),A(G,w,$),A(G,C,$),A(G,j,$),A(G,F,$),A(G,b,$),K.m(G,$),A(G,v,$),A(G,T,$),A(G,U,$),A(G,P,$),A(G,O,$),A(G,X,$)},p(G,$){$&2&&r!==(r=G[1].data.d3f_class+"")&&me(e,r),$&4&&i!==(i=G[2].description["@graph"][0]["rdfs:label"]+"")&&me(s,i),$&4&&f!==(f=G[18].def_artifact_rel_label.value+"")&&me(h,f),$&4&&c!==(c=Re(G[18].def_artifact.value)+"")&&me(_,c),$&4&&k!==(k=G[18].def_artifact_label.value+"")&&me(C,k),$&2&&S!==(S=G[1].data.d3f_class+"")&&me(F,S),ae===(ae=L(G,$))&&K?K.p(G,$):(K.d(1),K=ae(G),K&&(K.c(),K.m(v.parentNode,v))),$&4&&B!==(B=Re(G[18].def_artifact.value)+"")&&me(T,B),$&4&&E!==(E=Re(G[18].def_artifact.value)+"")&&me(P,E)},d(G){G&&(m(e),m(t),m(s),m(l),m(u),m(o),m(h),m(d),m(_),m(w),m(C),m(j),m(F),m(b),m(v),m(T),m(U),m(P),m(O),m(X)),K.d(G)}}}function Wg(n){let r,e,t=xe(n[2].digital_artifacts.results.bindings),i=[];for(let s=0;s<t.length;s+=1)i[s]=Ro(Io(n,t,s));return{c(){r=V(`graph LR
        `);for(let s=0;s<i.length;s+=1)i[s].c();e=Ae()},l(s){r=H(s,`graph LR
        `);for(let l=0;l<i.length;l+=1)i[l].l(s);e=Ae()},m(s,l){A(s,r,l);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(s,l);A(s,e,l)},p(s,l){if(l&22){t=xe(s[2].digital_artifacts.results.bindings);let a;for(a=0;a<t.length;a+=1){const u=Io(s,t,a);i[a]?i[a].p(u,l):(i[a]=Ro(u),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}},d(s){s&&(m(r),m(e)),mt(i,s)}}}function Qg(n){let r,e,t,i,s,l,a,u,o,f,h,d,c,_=n[4].length+"",w,k,C,j,S;const F=n[8].header,b=Ft(F,n,n[13],Fo),y=n[8].default,v=Ft(y,n,n[13],null),B=[xg,zg,Hg],T=[];function U(E,P){return E[2]?E[2].digital_artifacts.results.bindings.length>0?1:2:0}return a=U(n),u=T[a]=B[a](n),{c(){r=Q("dialog"),e=Q("div"),b&&b.c(),t=V(`
    Select Related Artifacts To Insert
    `),v&&v.c(),i=ie(),s=Q("hr"),l=ie(),u.c(),o=ie(),f=Q("hr"),h=ie(),d=Q("button"),c=V("Insert ("),w=V(_),k=V(")"),this.h()},l(E){r=Y(E,"DIALOG",{class:!0});var P=we(r);e=Y(P,"DIV",{class:!0});var O=we(e);b&&b.l(O),t=H(O,`
    Select Related Artifacts To Insert
    `),v&&v.l(O),i=le(O),s=Y(O,"HR",{}),l=le(O),u.l(O),o=le(O),f=Y(O,"HR",{}),h=le(O),d=Y(O,"BUTTON",{class:!0});var N=we(d);c=H(N,"Insert ("),w=H(N,_),k=H(N,")"),N.forEach(m),O.forEach(m),P.forEach(m),this.h()},h(){d.autofocus=!0,ee(d,"class","svelte-x0618k"),ee(e,"class","svelte-x0618k"),ee(r,"class","svelte-x0618k")},m(E,P){A(E,r,P),M(r,e),b&&b.m(e,null),M(e,t),v&&v.m(e,null),M(e,i),M(e,s),M(e,l),T[a].m(e,null),M(e,o),M(e,f),M(e,h),M(e,d),M(d,c),M(d,w),M(d,k),n[10](r),C=!0,d.focus(),j||(S=[pe(d,"click",n[7]),pe(e,"click",Ot(n[9])),pe(r,"close",n[11]),pe(r,"click",rn(n[12]))],j=!0)},p(E,[P]){b&&b.p&&(!C||P&8192)&&Rt(b,F,E,E[13],C?Bt(F,E[13],P,Vg):St(E[13]),Fo),v&&v.p&&(!C||P&8192)&&Rt(v,y,E,E[13],C?Bt(y,E[13],P,null):St(E[13]),null);let O=a;a=U(E),a===O?T[a].p(E,P):(et(),fe(T[O],1,1,()=>{T[O]=null}),tt(),u=T[a],u?u.p(E,P):(u=T[a]=B[a](E),u.c()),se(u,1),u.m(e,o)),(!C||P&16)&&_!==(_=E[4].length+"")&&me(w,_)},i(E){C||(se(b,E),se(v,E),se(u),C=!0)},o(E){fe(b,E),fe(v,E),fe(u),C=!1},d(E){E&&m(r),b&&b.d(E),v&&v.d(E),T[a].d(),n[10](null),j=!1,it(S)}}}function Yg(n,r,e){let t,i,s,{$$slots:l={},$$scope:a}=r,{show_artifacts_modal:u}=r,{parent_node:o}=r,{data:f}=r,h;const d=qr();Ye(n,d,F=>e(16,s=F));const c=jr();Ye(n,c,F=>e(15,i=F));function _(F){t.includes(F)?e(4,t=t.filter(b=>b!==F)):t.push(F),e(4,t)}window.def_to_art_callback=function(F){_(F)};function w(){let F=0,b=200,y=100;for(const v of t){let B=f.digital_artifacts.results.bindings.find(T=>Re(T.def_artifact.value)==v);B&&(cn(d,c,o,"artifactSelectorNode",B.def_artifact_label.value,"d3f:"+Re(B.def_artifact.value),o.data.sequence,o.position.x+F*b,o.position.y+y,182,82,B.def_artifact_rel_label.value,!0),F+=1)}d.set(s),c.set(i),h&&h.close(),e(4,t=[])}function k(F){yr.call(this,n,F)}function C(F){It[F?"unshift":"push"](()=>{h=F,e(3,h)})}const j=()=>e(0,u=!1),S=()=>{h.close(),e(4,t=[])};return n.$$set=F=>{"show_artifacts_modal"in F&&e(0,u=F.show_artifacts_modal),"parent_node"in F&&e(1,o=F.parent_node),"data"in F&&e(2,f=F.data),"$$scope"in F&&e(13,a=F.$$scope)},n.$$.update=()=>{n.$$.dirty&9&&u&&h&&h.showModal()},e(4,t=[]),[u,o,f,h,t,d,c,w,l,k,C,j,S,a]}class Jg extends dt{constructor(r){super(),ht(this,r,Yg,Qg,Je,{show_artifacts_modal:0,parent_node:1,data:2})}}function So(n,r,e){const t=n.slice();return t[18]=r[e],t}const Zg=n=>({}),Bo=n=>({});function Kg(n){let r;return{c(){r=V("No related offensive techniques in this release.")},l(e){r=H(e,"No related offensive techniques in this release.")},m(e,t){A(e,r,t)},p:Le,i:Le,o:Le,d(e){e&&m(r)}}}function $g(n){let r,e;return r=new nn({props:{$$slots:{default:[nm]},$$scope:{ctx:n}}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i&16394&&(s.$$scope={dirty:i,ctx:t}),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function em(n){let r,e="Loading...";return{c(){r=Q("div"),r.textContent=e},l(t){r=Y(t,"DIV",{"data-svelte-h":!0}),We(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,i){A(t,r,i)},p:Le,i:Le,o:Le,d(t){t&&m(r)}}}function Oo(n){let r=Re(n[18].def_tech.value).replace(/ |\./g,"")+"",e,t,i=n[18].def_tech_label.value+"",s,l,a="-->",u,o,f="May "+n[18].def_tactic_label.value.replace(/ /g,""),h,d,c=n[18].off_tech_id.value.replace(/ |\./g,"")+"",_,w,k=n[18].off_tech_label.value+"",C,j,S,F,b=Re(n[18].def_tech.value)+"",y,v,B=n[18].off_tech_id.value.replace(/ |\./g,"")+"",T,U,E=n[18].off_tech_id.value.replace(/ |\./g,"")+"",P,O,N=Re(n[18].def_tech.value)+"",X,L,ae=Re(n[18].def_tech.value)+"",K,G;function $(z,ue){return ue&10&&(S=null),S==null&&(S=!!z[3].includes(z[18].off_tech_id.value.replace(/ |\./g,""))),S?rm:tm}let J=$(n,-1),ne=J(n);return{c(){e=V(r),t=V('["'),s=V(i),l=V('"] '),u=V(a),o=V(" | "),h=V(f),d=V("| "),_=V(c),w=V('["'),C=V(k),j=V(`"];
            `),ne.c(),F=V(`
            class `),y=V(b),v=V(" CountermeasureNode; click "),T=V(B),U=V(` href "javascript:def_to_off_callback('`),P=V(E),O=V(`')"; click `),X=V(N),L=V(' href "/technique/d3f:'),K=V(ae),G=V('";')},l(z){e=H(z,r),t=H(z,'["'),s=H(z,i),l=H(z,'"] '),u=H(z,a),o=H(z," | "),h=H(z,f),d=H(z,"| "),_=H(z,c),w=H(z,'["'),C=H(z,k),j=H(z,`"];
            `),ne.l(z),F=H(z,`
            class `),y=H(z,b),v=H(z," CountermeasureNode; click "),T=H(z,B),U=H(z,` href "javascript:def_to_off_callback('`),P=H(z,E),O=H(z,`')"; click `),X=H(z,N),L=H(z,' href "/technique/d3f:'),K=H(z,ae),G=H(z,'";')},m(z,ue){A(z,e,ue),A(z,t,ue),A(z,s,ue),A(z,l,ue),A(z,u,ue),A(z,o,ue),A(z,h,ue),A(z,d,ue),A(z,_,ue),A(z,w,ue),A(z,C,ue),A(z,j,ue),ne.m(z,ue),A(z,F,ue),A(z,y,ue),A(z,v,ue),A(z,T,ue),A(z,U,ue),A(z,P,ue),A(z,O,ue),A(z,X,ue),A(z,L,ue),A(z,K,ue),A(z,G,ue)},p(z,ue){ue&2&&r!==(r=Re(z[18].def_tech.value).replace(/ |\./g,"")+"")&&me(e,r),ue&2&&i!==(i=z[18].def_tech_label.value+"")&&me(s,i),ue&2&&f!==(f="May "+z[18].def_tactic_label.value.replace(/ /g,""))&&me(h,f),ue&2&&c!==(c=z[18].off_tech_id.value.replace(/ |\./g,"")+"")&&me(_,c),ue&2&&k!==(k=z[18].off_tech_label.value+"")&&me(C,k),J===(J=$(z,ue))&&ne?ne.p(z,ue):(ne.d(1),ne=J(z),ne&&(ne.c(),ne.m(F.parentNode,F))),ue&2&&b!==(b=Re(z[18].def_tech.value)+"")&&me(y,b),ue&2&&B!==(B=z[18].off_tech_id.value.replace(/ |\./g,"")+"")&&me(T,B),ue&2&&E!==(E=z[18].off_tech_id.value.replace(/ |\./g,"")+"")&&me(P,E),ue&2&&N!==(N=Re(z[18].def_tech.value)+"")&&me(X,N),ue&2&&ae!==(ae=Re(z[18].def_tech.value)+"")&&me(K,ae)},d(z){z&&(m(e),m(t),m(s),m(l),m(u),m(o),m(h),m(d),m(_),m(w),m(C),m(j),m(F),m(y),m(v),m(T),m(U),m(P),m(O),m(X),m(L),m(K),m(G)),ne.d(z)}}}function tm(n){let r,e=n[18].off_tech_id.value.replace(/ |\./g,"")+"",t,i;return{c(){r=V("class "),t=V(e),i=V(" OffensiveTechniqueNode;")},l(s){r=H(s,"class "),t=H(s,e),i=H(s," OffensiveTechniqueNode;")},m(s,l){A(s,r,l),A(s,t,l),A(s,i,l)},p(s,l){l&2&&e!==(e=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&me(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function rm(n){let r,e=n[18].off_tech_id.value.replace(/ |\./g,"")+"",t,i;return{c(){r=V("class "),t=V(e),i=V(" SelectedOffensiveTechniqueNode;")},l(s){r=H(s,"class "),t=H(s,e),i=H(s," SelectedOffensiveTechniqueNode;")},m(s,l){A(s,r,l),A(s,t,l),A(s,i,l)},p(s,l){l&2&&e!==(e=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&me(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function Lo(n){let r=n[6].edge_is_unique(n[18].def_tech_label.value,n[18].off_artifact_rel_label.value,n[18].off_artifact_label.value),e,t=r&&Oo(n);return{c(){t&&t.c(),e=Ae()},l(i){t&&t.l(i),e=Ae()},m(i,s){t&&t.m(i,s),A(i,e,s)},p(i,s){s&2&&(r=i[6].edge_is_unique(i[18].def_tech_label.value,i[18].off_artifact_rel_label.value,i[18].off_artifact_label.value)),r?t?t.p(i,s):(t=Oo(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&m(e),t&&t.d(i)}}}function nm(n){let r,e,t=xe(n[1].def_to_off.results.bindings),i=[];for(let s=0;s<t.length;s+=1)i[s]=Lo(So(n,t,s));return{c(){r=V(`graph LR;
        `);for(let s=0;s<i.length;s+=1)i[s].c();e=Ae()},l(s){r=H(s,`graph LR;
        `);for(let l=0;l<i.length;l+=1)i[l].l(s);e=Ae()},m(s,l){A(s,r,l);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(s,l);A(s,e,l)},p(s,l){if(l&74){t=xe(s[1].def_to_off.results.bindings);let a;for(a=0;a<t.length;a+=1){const u=So(s,t,a);i[a]?i[a].p(u,l):(i[a]=Lo(u),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}},d(s){s&&(m(r),m(e)),mt(i,s)}}}function im(n){let r,e,t,i,s,l,a,u,o,f,h,d,c,_=n[3].length+"",w,k,C,j,S;const F=n[9].header,b=Ft(F,n,n[14],Bo),y=n[9].default,v=Ft(y,n,n[14],null),B=[em,$g,Kg],T=[];function U(E,P){return E[1]?E[1].def_to_off.results.bindings.length>0?1:2:0}return a=U(n),u=T[a]=B[a](n),{c(){r=Q("dialog"),e=Q("div"),b&&b.c(),t=V(`
    Select Attack Techniques
    `),v&&v.c(),i=ie(),s=Q("hr"),l=ie(),u.c(),o=ie(),f=Q("hr"),h=ie(),d=Q("button"),c=V("Insert ("),w=V(_),k=V(")"),this.h()},l(E){r=Y(E,"DIALOG",{class:!0});var P=we(r);e=Y(P,"DIV",{class:!0});var O=we(e);b&&b.l(O),t=H(O,`
    Select Attack Techniques
    `),v&&v.l(O),i=le(O),s=Y(O,"HR",{}),l=le(O),u.l(O),o=le(O),f=Y(O,"HR",{}),h=le(O),d=Y(O,"BUTTON",{class:!0});var N=we(d);c=H(N,"Insert ("),w=H(N,_),k=H(N,")"),N.forEach(m),O.forEach(m),P.forEach(m),this.h()},h(){d.autofocus=!0,ee(d,"class","svelte-1ai9hff"),ee(e,"class","svelte-1ai9hff"),ee(r,"class","svelte-1ai9hff")},m(E,P){A(E,r,P),M(r,e),b&&b.m(e,null),M(e,t),v&&v.m(e,null),M(e,i),M(e,s),M(e,l),T[a].m(e,null),M(e,o),M(e,f),M(e,h),M(e,d),M(d,c),M(d,w),M(d,k),n[11](r),C=!0,d.focus(),j||(S=[pe(d,"click",n[7]),pe(e,"click",Ot(n[10])),pe(r,"close",n[12]),pe(r,"click",rn(n[13]))],j=!0)},p(E,[P]){b&&b.p&&(!C||P&16384)&&Rt(b,F,E,E[14],C?Bt(F,E[14],P,Zg):St(E[14]),Bo),v&&v.p&&(!C||P&16384)&&Rt(v,y,E,E[14],C?Bt(y,E[14],P,null):St(E[14]),null);let O=a;a=U(E),a===O?T[a].p(E,P):(et(),fe(T[O],1,1,()=>{T[O]=null}),tt(),u=T[a],u?u.p(E,P):(u=T[a]=B[a](E),u.c()),se(u,1),u.m(e,o)),(!C||P&8)&&_!==(_=E[3].length+"")&&me(w,_)},i(E){C||(se(b,E),se(v,E),se(u),C=!0)},o(E){fe(b,E),fe(v,E),fe(u),C=!1},d(E){E&&m(r),b&&b.d(E),v&&v.d(E),T[a].d(),n[11](null),j=!1,it(S)}}}function lm(n,r,e){let t,i,s,{$$slots:l={},$$scope:a}=r,{show_attack_modal:u}=r,{parent_node:o}=r,{data:f}=r,h;const d=qr();Ye(n,d,b=>e(16,s=b));const c=jr();Ye(n,c,b=>e(15,i=b));let _=new jn;function w(b){t.includes(b)?e(3,t=t.filter(y=>y!==b)):t.push(b),e(3,t)}window.def_to_off_callback=function(b){w(b)};function k(){let b=0,y=200,v=100;for(const B of t){let T=f.def_to_off.results.bindings.find(U=>U.off_tech_id.value.replace(/ |\./g,"")==B);T&&(cn(d,c,o,"attackSelectorNode",T.off_tech_label.value,"d3f:"+T.off_tech_id.value,o.data.sequence,o.position.x+b*y,o.position.y+v,182,63,"May "+T.def_tactic_label.value,!0),b+=1)}d.set(s),c.set(i),h&&h.close(),e(3,t=[])}function C(b){yr.call(this,n,b)}function j(b){It[b?"unshift":"push"](()=>{h=b,e(2,h)})}const S=()=>e(0,u=!1),F=()=>{h.close(),e(3,t=[])};return n.$$set=b=>{"show_attack_modal"in b&&e(0,u=b.show_attack_modal),"parent_node"in b&&e(8,o=b.parent_node),"data"in b&&e(1,f=b.data),"$$scope"in b&&e(14,a=b.$$scope)},n.$$.update=()=>{n.$$.dirty&5&&u&&h&&(h.showModal(),_.reset())},e(3,t=[]),[u,f,h,t,d,c,_,k,o,l,C,j,S,F,a]}class sm extends dt{constructor(r){super(),ht(this,r,lm,im,Je,{show_attack_modal:0,parent_node:8,data:1})}}function am(n){let r,e="artifacts",t,i,s,l,a,u="offensive techniques",o,f,h,d,c,_="weaknesses (coming soon)",w,k,C;function j(y){n[6](y)}let S={parent_node:n[0],data:n[1]};n[2]!==void 0&&(S.show_artifacts_modal=n[2]),i=new Jg({props:S}),It.push(()=>lr(i,"show_artifacts_modal",j));function F(y){n[8](y)}let b={parent_node:n[0],data:n[1]};return n[3]!==void 0&&(b.show_attack_modal=n[3]),f=new sm({props:b}),It.push(()=>lr(f,"show_attack_modal",F)),{c(){r=Q("button"),r.textContent=e,t=ie(),Ce(i.$$.fragment),l=ie(),a=Q("button"),a.textContent=u,o=ie(),Ce(f.$$.fragment),d=ie(),c=Q("button"),c.textContent=_,this.h()},l(y){r=Y(y,"BUTTON",{class:!0,"data-svelte-h":!0}),We(r)!=="svelte-isgkpy"&&(r.textContent=e),t=le(y),Ne(i.$$.fragment,y),l=le(y),a=Y(y,"BUTTON",{class:!0,"data-svelte-h":!0}),We(a)!=="svelte-17h5zge"&&(a.textContent=u),o=le(y),Ne(f.$$.fragment,y),d=le(y),c=Y(y,"BUTTON",{class:!0,"data-svelte-h":!0}),We(c)!=="svelte-ivhbdc"&&(c.textContent=_),this.h()},h(){ee(r,"class","svelte-1x5dcdh"),ee(a,"class","svelte-1x5dcdh"),c.disabled=!0,ee(c,"class","svelte-1x5dcdh")},m(y,v){A(y,r,v),A(y,t,v),Ie(i,y,v),A(y,l,v),A(y,a,v),A(y,o,v),Ie(f,y,v),A(y,d,v),A(y,c,v),w=!0,k||(C=[pe(r,"click",n[5]),pe(a,"click",n[7])],k=!0)},p(y,[v]){const B={};v&1&&(B.parent_node=y[0]),v&2&&(B.data=y[1]),!s&&v&4&&(s=!0,B.show_artifacts_modal=y[2],ir(()=>s=!1)),i.$set(B);const T={};v&1&&(T.parent_node=y[0]),v&2&&(T.data=y[1]),!h&&v&8&&(h=!0,T.show_attack_modal=y[3],ir(()=>h=!1)),f.$set(T)},i(y){w||(se(i.$$.fragment,y),se(f.$$.fragment,y),w=!0)},o(y){fe(i.$$.fragment,y),fe(f.$$.fragment,y),w=!1},d(y){y&&(m(r),m(t),m(l),m(a),m(o),m(d),m(c)),Fe(i,y),Fe(f,y),k=!1,it(C)}}}function um(n,r,e){let t,i;var s=this&&this.__awaiter||function(c,_,w,k){function C(j){return j instanceof w?j:new w(function(S){S(j)})}return new(w||(w=Promise))(function(j,S){function F(v){try{y(k.next(v))}catch(B){S(B)}}function b(v){try{y(k.throw(v))}catch(B){S(B)}}function y(v){v.done?j(v.value):C(v.value).then(F,b)}y((k=k.apply(c,_||[])).next())})};let{node:l}=r,a;function u(c){return s(this,void 0,void 0,function*(){if(c.data.d3f_class){const _=c.data.d3f_class;return yield(yield fetch(`/api/technique/${_}.json`)).json()}else alert("Please specify a D3FEND Class for this node to enable inferential mapping"),e(2,t=!1)})}const o=async()=>{e(1,a=null),e(2,t=!0),e(1,a=await u(l))};function f(c){t=c,e(2,t)}const h=async()=>{e(1,a=null),e(3,i=!0),e(1,a=await u(l))};function d(c){i=c,e(3,i)}return n.$$set=c=>{"node"in c&&e(0,l=c.node)},e(2,t=!1),e(3,i=!1),[l,a,t,i,u,o,f,h,d]}class om extends dt{constructor(r){super(),ht(this,r,um,am,Je,{node:0})}}function Uo(n,r,e){const t=n.slice();return t[18]=r[e],t}const fm=n=>({}),Po=n=>({});function cm(n){let r;return{c(){r=V("No related artifacts in this release.")},l(e){r=H(e,"No related artifacts in this release.")},m(e,t){A(e,r,t)},p:Le,i:Le,o:Le,d(e){e&&m(r)}}}function dm(n){let r,e;return r=new nn({props:{$$slots:{default:[gm]},$$scope:{ctx:n}}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i&16394&&(s.$$scope={dirty:i,ctx:t}),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function hm(n){let r,e="Loading...";return{c(){r=Q("div"),r.textContent=e},l(t){r=Y(t,"DIV",{"data-svelte-h":!0}),We(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,i){A(t,r,i)},p:Le,i:Le,o:Le,d(t){t&&m(r)}}}function Mo(n){let r=n[18].off_tech_id.value.replace(/ |\./g,"")+"",e,t,i=n[18].off_tech_label.value+"",s,l,a="-->",u,o,f=n[18].off_artifact_rel_label.value.replace(/ /g,"")+"",h,d,c=Re(n[18].off_artifact.value)+"",_,w,k=n[18].off_artifact_label.value+"",C,j,S=n[18].off_tech_id.value.replace(/ |\./g,"")+"",F,b,y,v,B=Re(n[18].off_artifact.value)+"",T,U,E=Re(n[18].off_artifact.value)+"",P,O,N=n[18].off_tech_id.value.replace(/ |\./g,"")+"",X,L,ae=il(n[18].off_tech_id.value)+"",K,G,$=Re(n[18].off_artifact.value)+"",J,ne,z=Re(n[18].off_artifact.value)+"",ue,Pe;function He(_e,Te){return Te&10&&(y=null),y==null&&(y=!!_e[3].includes(Re(_e[18].off_artifact.value))),y?pm:_m}let be=He(n,-1),De=be(n);return{c(){e=V(r),t=V('["'),s=V(i),l=V('"] '),u=V(a),o=V(" |"),h=V(f),d=V("| "),_=V(c),w=V('["'),C=V(k),j=V('"]; class '),F=V(S),b=V(` OffensiveTechniqueNode;
            `),De.c(),v=V(" ; click "),T=V(B),U=V(' href "/dao/artifact/d3f:'),P=V(E),O=V('"; click '),X=V(N),L=V(' href "'),K=V(ae),G=V('"; click '),J=V($),ne=V(` href "javascript:off_to_art_callback('`),ue=V(z),Pe=V(`')";`)},l(_e){e=H(_e,r),t=H(_e,'["'),s=H(_e,i),l=H(_e,'"] '),u=H(_e,a),o=H(_e," |"),h=H(_e,f),d=H(_e,"| "),_=H(_e,c),w=H(_e,'["'),C=H(_e,k),j=H(_e,'"]; class '),F=H(_e,S),b=H(_e,` OffensiveTechniqueNode;
            `),De.l(_e),v=H(_e," ; click "),T=H(_e,B),U=H(_e,' href "/dao/artifact/d3f:'),P=H(_e,E),O=H(_e,'"; click '),X=H(_e,N),L=H(_e,' href "'),K=H(_e,ae),G=H(_e,'"; click '),J=H(_e,$),ne=H(_e,` href "javascript:off_to_art_callback('`),ue=H(_e,z),Pe=H(_e,`')";`)},m(_e,Te){A(_e,e,Te),A(_e,t,Te),A(_e,s,Te),A(_e,l,Te),A(_e,u,Te),A(_e,o,Te),A(_e,h,Te),A(_e,d,Te),A(_e,_,Te),A(_e,w,Te),A(_e,C,Te),A(_e,j,Te),A(_e,F,Te),A(_e,b,Te),De.m(_e,Te),A(_e,v,Te),A(_e,T,Te),A(_e,U,Te),A(_e,P,Te),A(_e,O,Te),A(_e,X,Te),A(_e,L,Te),A(_e,K,Te),A(_e,G,Te),A(_e,J,Te),A(_e,ne,Te),A(_e,ue,Te),A(_e,Pe,Te)},p(_e,Te){Te&2&&r!==(r=_e[18].off_tech_id.value.replace(/ |\./g,"")+"")&&me(e,r),Te&2&&i!==(i=_e[18].off_tech_label.value+"")&&me(s,i),Te&2&&f!==(f=_e[18].off_artifact_rel_label.value.replace(/ /g,"")+"")&&me(h,f),Te&2&&c!==(c=Re(_e[18].off_artifact.value)+"")&&me(_,c),Te&2&&k!==(k=_e[18].off_artifact_label.value+"")&&me(C,k),Te&2&&S!==(S=_e[18].off_tech_id.value.replace(/ |\./g,"")+"")&&me(F,S),be===(be=He(_e,Te))&&De?De.p(_e,Te):(De.d(1),De=be(_e),De&&(De.c(),De.m(v.parentNode,v))),Te&2&&B!==(B=Re(_e[18].off_artifact.value)+"")&&me(T,B),Te&2&&E!==(E=Re(_e[18].off_artifact.value)+"")&&me(P,E),Te&2&&N!==(N=_e[18].off_tech_id.value.replace(/ |\./g,"")+"")&&me(X,N),Te&2&&ae!==(ae=il(_e[18].off_tech_id.value)+"")&&me(K,ae),Te&2&&$!==($=Re(_e[18].off_artifact.value)+"")&&me(J,$),Te&2&&z!==(z=Re(_e[18].off_artifact.value)+"")&&me(ue,z)},d(_e){_e&&(m(e),m(t),m(s),m(l),m(u),m(o),m(h),m(d),m(_),m(w),m(C),m(j),m(F),m(b),m(v),m(T),m(U),m(P),m(O),m(X),m(L),m(K),m(G),m(J),m(ne),m(ue),m(Pe)),De.d(_e)}}}function _m(n){let r,e=Re(n[18].off_artifact.value)+"",t,i;return{c(){r=V("class "),t=V(e),i=V(" ArtifactNode;")},l(s){r=H(s,"class "),t=H(s,e),i=H(s," ArtifactNode;")},m(s,l){A(s,r,l),A(s,t,l),A(s,i,l)},p(s,l){l&2&&e!==(e=Re(s[18].off_artifact.value)+"")&&me(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function pm(n){let r,e=Re(n[18].off_artifact.value)+"",t,i;return{c(){r=V("class "),t=V(e),i=V(" SelectedArtifactNode;")},l(s){r=H(s,"class "),t=H(s,e),i=H(s," SelectedArtifactNode;")},m(s,l){A(s,r,l),A(s,t,l),A(s,i,l)},p(s,l){l&2&&e!==(e=Re(s[18].off_artifact.value)+"")&&me(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function qo(n){let r=n[6].edge_is_unique(n[18].off_tech_label.value,n[18].off_artifact_rel_label.value,n[18].off_artifact_label.value),e,t=r&&Mo(n);return{c(){t&&t.c(),e=Ae()},l(i){t&&t.l(i),e=Ae()},m(i,s){t&&t.m(i,s),A(i,e,s)},p(i,s){s&2&&(r=i[6].edge_is_unique(i[18].off_tech_label.value,i[18].off_artifact_rel_label.value,i[18].off_artifact_label.value)),r?t?t.p(i,s):(t=Mo(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&m(e),t&&t.d(i)}}}function gm(n){let r,e,t=xe(n[1].off_to_def.results.bindings),i=[];for(let s=0;s<t.length;s+=1)i[s]=qo(Uo(n,t,s));return{c(){r=V(`graph LR;
        `);for(let s=0;s<i.length;s+=1)i[s].c();e=Ae()},l(s){r=H(s,`graph LR;
        `);for(let l=0;l<i.length;l+=1)i[l].l(s);e=Ae()},m(s,l){A(s,r,l);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(s,l);A(s,e,l)},p(s,l){if(l&74){t=xe(s[1].off_to_def.results.bindings);let a;for(a=0;a<t.length;a+=1){const u=Uo(s,t,a);i[a]?i[a].p(u,l):(i[a]=qo(u),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}},d(s){s&&(m(r),m(e)),mt(i,s)}}}function mm(n){let r,e,t,i,s,l,a,u,o,f,h,d,c,_=n[3].length+"",w,k,C,j,S;const F=n[9].header,b=Ft(F,n,n[14],Po),y=n[9].default,v=Ft(y,n,n[14],null),B=[hm,dm,cm],T=[];function U(E,P){return E[1]?E[1].off_to_def.results.bindings.length>0?1:2:0}return a=U(n),u=T[a]=B[a](n),{c(){r=Q("dialog"),e=Q("div"),b&&b.c(),t=V(`
    Select Related Artifacts To Insert
    `),v&&v.c(),i=ie(),s=Q("hr"),l=ie(),u.c(),o=ie(),f=Q("hr"),h=ie(),d=Q("button"),c=V("Insert ("),w=V(_),k=V(")"),this.h()},l(E){r=Y(E,"DIALOG",{class:!0});var P=we(r);e=Y(P,"DIV",{class:!0});var O=we(e);b&&b.l(O),t=H(O,`
    Select Related Artifacts To Insert
    `),v&&v.l(O),i=le(O),s=Y(O,"HR",{}),l=le(O),u.l(O),o=le(O),f=Y(O,"HR",{}),h=le(O),d=Y(O,"BUTTON",{class:!0});var N=we(d);c=H(N,"Insert ("),w=H(N,_),k=H(N,")"),N.forEach(m),O.forEach(m),P.forEach(m),this.h()},h(){d.autofocus=!0,ee(d,"class","svelte-x0618k"),ee(e,"class","svelte-x0618k"),ee(r,"class","svelte-x0618k")},m(E,P){A(E,r,P),M(r,e),b&&b.m(e,null),M(e,t),v&&v.m(e,null),M(e,i),M(e,s),M(e,l),T[a].m(e,null),M(e,o),M(e,f),M(e,h),M(e,d),M(d,c),M(d,w),M(d,k),n[11](r),C=!0,d.focus(),j||(S=[pe(d,"click",n[7]),pe(e,"click",Ot(n[10])),pe(r,"close",n[12]),pe(r,"click",rn(n[13]))],j=!0)},p(E,[P]){b&&b.p&&(!C||P&16384)&&Rt(b,F,E,E[14],C?Bt(F,E[14],P,fm):St(E[14]),Po),v&&v.p&&(!C||P&16384)&&Rt(v,y,E,E[14],C?Bt(y,E[14],P,null):St(E[14]),null);let O=a;a=U(E),a===O?T[a].p(E,P):(et(),fe(T[O],1,1,()=>{T[O]=null}),tt(),u=T[a],u?u.p(E,P):(u=T[a]=B[a](E),u.c()),se(u,1),u.m(e,o)),(!C||P&8)&&_!==(_=E[3].length+"")&&me(w,_)},i(E){C||(se(b,E),se(v,E),se(u),C=!0)},o(E){fe(b,E),fe(v,E),fe(u),C=!1},d(E){E&&m(r),b&&b.d(E),v&&v.d(E),T[a].d(),n[11](null),j=!1,it(S)}}}function vm(n,r,e){let t,i,s,{$$slots:l={},$$scope:a}=r,{show_artifacts_modal:u}=r,{parent_node:o}=r,{data:f}=r,h;const d=qr();Ye(n,d,b=>e(16,s=b));const c=jr();Ye(n,c,b=>e(15,i=b));let _=new jn;function w(b){t.includes(b)?e(3,t=t.filter(y=>y!==b)):t.push(b),e(3,t)}window.off_to_art_callback=function(b){w(b)};function k(){let b=0,y=200,v=100;for(const B of t){let T=f.off_to_def.results.bindings.find(U=>Re(U.off_artifact.value)==B);T&&(cn(d,c,o,"artifactSelectorNode",T.off_artifact_label.value,"d3f:"+Re(T.off_artifact.value),o.data.sequence,o.position.x+b*y,o.position.y+v,182,63,T.off_artifact_rel_label.value,!0),b+=1)}d.set(s),c.set(i),h&&h.close(),e(3,t=[])}function C(b){yr.call(this,n,b)}function j(b){It[b?"unshift":"push"](()=>{h=b,e(2,h)})}const S=()=>e(0,u=!1),F=()=>{h.close(),e(3,t=[])};return n.$$set=b=>{"show_artifacts_modal"in b&&e(0,u=b.show_artifacts_modal),"parent_node"in b&&e(8,o=b.parent_node),"data"in b&&e(1,f=b.data),"$$scope"in b&&e(14,a=b.$$scope)},n.$$.update=()=>{n.$$.dirty&5&&u&&h&&(h.showModal(),_.reset())},e(3,t=[]),[u,f,h,t,d,c,_,k,o,l,C,j,S,F,a]}class bm extends dt{constructor(r){super(),ht(this,r,vm,mm,Je,{show_artifacts_modal:0,parent_node:8,data:1})}}function jo(n,r,e){const t=n.slice();return t[23]=r[e],t}const wm=n=>({}),Vo=n=>({});function ym(n){let r;return{c(){r=V("No related artifacts in this release.")},l(e){r=H(e,"No related artifacts in this release.")},m(e,t){A(e,r,t)},p:Le,i:Le,o:Le,d(e){e&&m(r)}}}function km(n){let r,e,t,i,s,l,a,u,o,f;function h(c){n[14](c)}let d={toggles:n[4]};return n[3]!==void 0&&(d.selected=n[3]),e=new Oc({props:d}),It.push(()=>lr(e,"selected",h)),o=new nn({props:{$$slots:{default:[Tm]},$$scope:{ctx:n}}}),{c(){r=Q("div"),Ce(e.$$.fragment),i=ie(),s=Q("br"),l=ie(),a=Q("br"),u=ie(),Ce(o.$$.fragment),this.h()},l(c){r=Y(c,"DIV",{class:!0});var _=we(r);Ne(e.$$.fragment,_),_.forEach(m),i=le(c),s=Y(c,"BR",{}),l=le(c),a=Y(c,"BR",{}),u=le(c),Ne(o.$$.fragment,c),this.h()},h(){ee(r,"class","center shrink")},m(c,_){A(c,r,_),Ie(e,r,null),A(c,i,_),A(c,s,_),A(c,l,_),A(c,a,_),A(c,u,_),Ie(o,c,_),f=!0},p(c,_){const w={};_&16&&(w.toggles=c[4]),!t&&_&8&&(t=!0,w.selected=c[3],ir(()=>t=!1)),e.$set(w);const k={};_&262186&&(k.$$scope={dirty:_,ctx:c}),o.$set(k)},i(c){f||(se(e.$$.fragment,c),se(o.$$.fragment,c),f=!0)},o(c){fe(e.$$.fragment,c),fe(o.$$.fragment,c),f=!1},d(c){c&&(m(r),m(i),m(s),m(l),m(a),m(u)),Fe(e),Fe(o,c)}}}function Em(n){let r,e="Loading...";return{c(){r=Q("div"),r.textContent=e},l(t){r=Y(t,"DIV",{"data-svelte-h":!0}),We(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,i){A(t,r,i)},p:Le,i:Le,o:Le,d(t){t&&m(r)}}}function Ho(n){let r=n[8].edge_is_unique(n[23].def_tech_label.value,n[23].def_artifact_rel_label.value,n[23].off_artifact_label.value),e,t=r&&zo(n);return{c(){t&&t.c(),e=Ae()},l(i){t&&t.l(i),e=Ae()},m(i,s){t&&t.m(i,s),A(i,e,s)},p(i,s){s&2&&(r=i[8].edge_is_unique(i[23].def_tech_label.value,i[23].def_artifact_rel_label.value,i[23].off_artifact_label.value)),r?t?t.p(i,s):(t=zo(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&m(e),t&&t.d(i)}}}function zo(n){let r=!n[3].includes(n[23].def_tactic_label.value),e,t=r&&xo(n);return{c(){t&&t.c(),e=Ae()},l(i){t&&t.l(i),e=Ae()},m(i,s){t&&t.m(i,s),A(i,e,s)},p(i,s){s&10&&(r=!i[3].includes(i[23].def_tactic_label.value)),r?t?t.p(i,s):(t=xo(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&m(e),t&&t.d(i)}}}function xo(n){let r=Re(n[23].def_tech.value)+"",e,t,i=n[23].def_tech_label.value+"",s,l,a="-->",u,o,f=n[23].def_artifact_rel_label.value.replace(/ /g,"")+"",h,d,c=Re(n[23].off_artifact.value)+"",_,w,k=n[23].off_artifact_label.value+"",C,j,S=n[8].edge_is_unique(n[23].def_tech.value,n[23].def_tactic_label.value,n[23].off_tech_id.value),F,b,y,v=n[23].off_artifact_label.value.replace(/ /g,"")+"",B,T,U=Re(n[23].def_tech.value)+"",E,P,O=n[23].def_tech_label.value.replace(/ |\./g,"")+"",N,X,L=S&&Xo(n);function ae($,J){return J&34&&(b=null),b==null&&(b=!!$[5].includes(Re($[23].def_tech.value))),b?Am:Dm}let K=ae(n,-1),G=K(n);return{c(){e=V(r),t=V('["'),s=V(i),l=V('"] '),u=V(a),o=V(`
                | `),h=V(f),d=V(" | "),_=V(c),w=V('["'),C=V(k),j=V(`"];

                `),L&&L.c(),F=ie(),G.c(),y=V(` 
                class `),B=V(v),T=V(` ArtifactNode;
                click `),E=V(U),P=V(` href "javascript:off_to_def_callback('`),N=V(O),X=V(`')";`)},l($){e=H($,r),t=H($,'["'),s=H($,i),l=H($,'"] '),u=H($,a),o=H($,`
                | `),h=H($,f),d=H($," | "),_=H($,c),w=H($,'["'),C=H($,k),j=H($,`"];

                `),L&&L.l($),F=le($),G.l($),y=H($,` 
                class `),B=H($,v),T=H($,` ArtifactNode;
                click `),E=H($,U),P=H($,` href "javascript:off_to_def_callback('`),N=H($,O),X=H($,`')";`)},m($,J){A($,e,J),A($,t,J),A($,s,J),A($,l,J),A($,u,J),A($,o,J),A($,h,J),A($,d,J),A($,_,J),A($,w,J),A($,C,J),A($,j,J),L&&L.m($,J),A($,F,J),G.m($,J),A($,y,J),A($,B,J),A($,T,J),A($,E,J),A($,P,J),A($,N,J),A($,X,J)},p($,J){J&2&&r!==(r=Re($[23].def_tech.value)+"")&&me(e,r),J&2&&i!==(i=$[23].def_tech_label.value+"")&&me(s,i),J&2&&f!==(f=$[23].def_artifact_rel_label.value.replace(/ /g,"")+"")&&me(h,f),J&2&&c!==(c=Re($[23].off_artifact.value)+"")&&me(_,c),J&2&&k!==(k=$[23].off_artifact_label.value+"")&&me(C,k),J&2&&(S=$[8].edge_is_unique($[23].def_tech.value,$[23].def_tactic_label.value,$[23].off_tech_id.value)),S?L?L.p($,J):(L=Xo($),L.c(),L.m(F.parentNode,F)):L&&(L.d(1),L=null),K===(K=ae($,J))&&G?G.p($,J):(G.d(1),G=K($),G&&(G.c(),G.m(y.parentNode,y))),J&2&&v!==(v=$[23].off_artifact_label.value.replace(/ /g,"")+"")&&me(B,v),J&2&&U!==(U=Re($[23].def_tech.value)+"")&&me(E,U),J&2&&O!==(O=$[23].def_tech_label.value.replace(/ |\./g,"")+"")&&me(N,O)},d($){$&&(m(e),m(t),m(s),m(l),m(u),m(o),m(h),m(d),m(_),m(w),m(C),m(j),m(F),m(y),m(B),m(T),m(E),m(P),m(N),m(X)),L&&L.d($),G.d($)}}}function Xo(n){let r=Re(n[23].def_tech.value)+"",e,t,i=n[23].def_tech_label.value+"",s,l,a="-.->",u,o,f="May "+n[23].def_tactic_label.value,h,d,c=n[23].off_tech_id.value.replace(/ |\./g,"")+"",_,w,k=n[23].off_tech_label.value+"",C,j;return{c(){e=V(r),t=V('["'),s=V(i),l=V('"] '),u=V(a),o=V(`
                  | `),h=V(f),d=V(" | "),_=V(c),w=V('["'),C=V(k),j=V('"] ;')},l(S){e=H(S,r),t=H(S,'["'),s=H(S,i),l=H(S,'"] '),u=H(S,a),o=H(S,`
                  | `),h=H(S,f),d=H(S," | "),_=H(S,c),w=H(S,'["'),C=H(S,k),j=H(S,'"] ;')},m(S,F){A(S,e,F),A(S,t,F),A(S,s,F),A(S,l,F),A(S,u,F),A(S,o,F),A(S,h,F),A(S,d,F),A(S,_,F),A(S,w,F),A(S,C,F),A(S,j,F)},p(S,F){F&2&&r!==(r=Re(S[23].def_tech.value)+"")&&me(e,r),F&2&&i!==(i=S[23].def_tech_label.value+"")&&me(s,i),F&2&&f!==(f="May "+S[23].def_tactic_label.value)&&me(h,f),F&2&&c!==(c=S[23].off_tech_id.value.replace(/ |\./g,"")+"")&&me(_,c),F&2&&k!==(k=S[23].off_tech_label.value+"")&&me(C,k)},d(S){S&&(m(e),m(t),m(s),m(l),m(u),m(o),m(h),m(d),m(_),m(w),m(C),m(j))}}}function Dm(n){let r,e=Re(n[23].def_tech.value)+"",t,i;return{c(){r=V("class "),t=V(e),i=V(" DefensiveTechniqueNode;")},l(s){r=H(s,"class "),t=H(s,e),i=H(s," DefensiveTechniqueNode;")},m(s,l){A(s,r,l),A(s,t,l),A(s,i,l)},p(s,l){l&2&&e!==(e=Re(s[23].def_tech.value)+"")&&me(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function Am(n){let r,e=Re(n[23].def_tech.value)+"",t,i;return{c(){r=V("class "),t=V(e),i=V(" SelectedDefensiveTechniqueNode;")},l(s){r=H(s,"class "),t=H(s,e),i=H(s," SelectedDefensiveTechniqueNode;")},m(s,l){A(s,r,l),A(s,t,l),A(s,i,l)},p(s,l){l&2&&e!==(e=Re(s[23].def_tech.value)+"")&&me(t,e)},d(s){s&&(m(r),m(t),m(i))}}}function Go(n){let r=n[23].off_tech_id.value.replace(/ |\./g,"")+"",e,t,i=n[23].off_tech_label.value+"",s,l,a="-->",u,o,f=n[23].off_artifact_rel_label.value.replace(/ /g,"")+"",h,d,c=Re(n[23].off_artifact.value)+"",_,w,k=n[23].off_artifact_label.value+"",C,j,S=n[23].off_tech_id.value.replace(/ |\./g,"")+"",F,b,y=Re(n[23].off_artifact.value)+"",v,B,T=Re(n[23].off_artifact.value)+"",U,E,P=Re(n[23].off_artifact.value)+"",O,N,X=n[23].off_tech_id.value.replace(/ |\./g,"")+"",L,ae,K=il(n[23].off_tech_id.value)+"",G,$,J=Re(n[23].off_artifact.value)+"",ne,z,ue=Re(n[23].off_artifact.value)+"",Pe,He;return{c(){e=V(r),t=V('["'),s=V(i),l=V('"] '),u=V(a),o=V(" |"),h=V(f),d=V("| "),_=V(c),w=V('["'),C=V(k),j=V('"]; class '),F=V(S),b=V(` OffensiveTechniqueNode;
            class `),v=V(y),B=V(" ArtifactNode; click "),U=V(T),E=V(' href "/dao/artifact/d3f:'),O=V(P),N=V(`";
            click `),L=V(X),ae=V(' href "'),G=V(K),$=V('"; click '),ne=V(J),z=V(' href "/dao/artifact/d3f:'),Pe=V(ue),He=V('";')},l(be){e=H(be,r),t=H(be,'["'),s=H(be,i),l=H(be,'"] '),u=H(be,a),o=H(be," |"),h=H(be,f),d=H(be,"| "),_=H(be,c),w=H(be,'["'),C=H(be,k),j=H(be,'"]; class '),F=H(be,S),b=H(be,` OffensiveTechniqueNode;
            class `),v=H(be,y),B=H(be," ArtifactNode; click "),U=H(be,T),E=H(be,' href "/dao/artifact/d3f:'),O=H(be,P),N=H(be,`";
            click `),L=H(be,X),ae=H(be,' href "'),G=H(be,K),$=H(be,'"; click '),ne=H(be,J),z=H(be,' href "/dao/artifact/d3f:'),Pe=H(be,ue),He=H(be,'";')},m(be,De){A(be,e,De),A(be,t,De),A(be,s,De),A(be,l,De),A(be,u,De),A(be,o,De),A(be,h,De),A(be,d,De),A(be,_,De),A(be,w,De),A(be,C,De),A(be,j,De),A(be,F,De),A(be,b,De),A(be,v,De),A(be,B,De),A(be,U,De),A(be,E,De),A(be,O,De),A(be,N,De),A(be,L,De),A(be,ae,De),A(be,G,De),A(be,$,De),A(be,ne,De),A(be,z,De),A(be,Pe,De),A(be,He,De)},p(be,De){De&2&&r!==(r=be[23].off_tech_id.value.replace(/ |\./g,"")+"")&&me(e,r),De&2&&i!==(i=be[23].off_tech_label.value+"")&&me(s,i),De&2&&f!==(f=be[23].off_artifact_rel_label.value.replace(/ /g,"")+"")&&me(h,f),De&2&&c!==(c=Re(be[23].off_artifact.value)+"")&&me(_,c),De&2&&k!==(k=be[23].off_artifact_label.value+"")&&me(C,k),De&2&&S!==(S=be[23].off_tech_id.value.replace(/ |\./g,"")+"")&&me(F,S),De&2&&y!==(y=Re(be[23].off_artifact.value)+"")&&me(v,y),De&2&&T!==(T=Re(be[23].off_artifact.value)+"")&&me(U,T),De&2&&P!==(P=Re(be[23].off_artifact.value)+"")&&me(O,P),De&2&&X!==(X=be[23].off_tech_id.value.replace(/ |\./g,"")+"")&&me(L,X),De&2&&K!==(K=il(be[23].off_tech_id.value)+"")&&me(G,K),De&2&&J!==(J=Re(be[23].off_artifact.value)+"")&&me(ne,J),De&2&&ue!==(ue=Re(be[23].off_artifact.value)+"")&&me(Pe,ue)},d(be){be&&(m(e),m(t),m(s),m(l),m(u),m(o),m(h),m(d),m(_),m(w),m(C),m(j),m(F),m(b),m(v),m(B),m(U),m(E),m(O),m(N),m(L),m(ae),m(G),m($),m(ne),m(z),m(Pe),m(He))}}}function Wo(n){let r,e=n[8].edge_is_unique(n[23].off_tech_label.value,n[23].off_artifact_rel_label.value,n[23].off_artifact_label.value),t,i="def_tech"in n[23]&&Ho(n),s=e&&Go(n);return{c(){i&&i.c(),r=ie(),s&&s.c(),t=Ae()},l(l){i&&i.l(l),r=le(l),s&&s.l(l),t=Ae()},m(l,a){i&&i.m(l,a),A(l,r,a),s&&s.m(l,a),A(l,t,a)},p(l,a){"def_tech"in l[23]?i?i.p(l,a):(i=Ho(l),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null),a&2&&(e=l[8].edge_is_unique(l[23].off_tech_label.value,l[23].off_artifact_rel_label.value,l[23].off_artifact_label.value)),e?s?s.p(l,a):(s=Go(l),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(l){l&&(m(r),m(t)),i&&i.d(l),s&&s.d(l)}}}function Tm(n){let r,e,t=xe(n[1].off_to_def.results.bindings),i=[];for(let s=0;s<t.length;s+=1)i[s]=Wo(jo(n,t,s));return{c(){r=V(`graph LR;
        `);for(let s=0;s<i.length;s+=1)i[s].c();e=Ae()},l(s){r=H(s,`graph LR;
        `);for(let l=0;l<i.length;l+=1)i[l].l(s);e=Ae()},m(s,l){A(s,r,l);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(s,l);A(s,e,l)},p(s,l){if(l&298){t=xe(s[1].off_to_def.results.bindings);let a;for(a=0;a<t.length;a+=1){const u=jo(s,t,a);i[a]?i[a].p(u,l):(i[a]=Wo(u),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}},d(s){s&&(m(r),m(e)),mt(i,s)}}}function Cm(n){let r,e,t,i,s,l,a,u,o,f,h,d,c,_=n[5].length+"",w,k,C,j,S;const F=n[12].header,b=Ft(F,n,n[18],Vo),y=n[12].default,v=Ft(y,n,n[18],null),B=[Em,km,ym],T=[];function U(E,P){return E[1]?E[1].off_to_def.results.bindings.length>0?1:2:0}return a=U(n),u=T[a]=B[a](n),{c(){r=Q("dialog"),e=Q("div"),b&&b.c(),t=V(`
    Select Related Artifacts To Insert
    `),v&&v.c(),i=ie(),s=Q("hr"),l=ie(),u.c(),o=ie(),f=Q("hr"),h=ie(),d=Q("button"),c=V("Insert ("),w=V(_),k=V(")"),this.h()},l(E){r=Y(E,"DIALOG",{class:!0});var P=we(r);e=Y(P,"DIV",{class:!0});var O=we(e);b&&b.l(O),t=H(O,`
    Select Related Artifacts To Insert
    `),v&&v.l(O),i=le(O),s=Y(O,"HR",{}),l=le(O),u.l(O),o=le(O),f=Y(O,"HR",{}),h=le(O),d=Y(O,"BUTTON",{class:!0});var N=we(d);c=H(N,"Insert ("),w=H(N,_),k=H(N,")"),N.forEach(m),O.forEach(m),P.forEach(m),this.h()},h(){d.autofocus=!0,ee(d,"class","svelte-x0618k"),ee(e,"class","svelte-x0618k"),ee(r,"class","svelte-x0618k")},m(E,P){A(E,r,P),M(r,e),b&&b.m(e,null),M(e,t),v&&v.m(e,null),M(e,i),M(e,s),M(e,l),T[a].m(e,null),M(e,o),M(e,f),M(e,h),M(e,d),M(d,c),M(d,w),M(d,k),n[15](r),C=!0,d.focus(),j||(S=[pe(d,"click",n[9]),pe(e,"click",Ot(n[13])),pe(r,"close",n[16]),pe(r,"click",rn(n[17]))],j=!0)},p(E,[P]){b&&b.p&&(!C||P&262144)&&Rt(b,F,E,E[18],C?Bt(F,E[18],P,wm):St(E[18]),Vo),v&&v.p&&(!C||P&262144)&&Rt(v,y,E,E[18],C?Bt(y,E[18],P,null):St(E[18]),null);let O=a;a=U(E),a===O?T[a].p(E,P):(et(),fe(T[O],1,1,()=>{T[O]=null}),tt(),u=T[a],u?u.p(E,P):(u=T[a]=B[a](E),u.c()),se(u,1),u.m(e,o)),(!C||P&32)&&_!==(_=E[5].length+"")&&me(w,_)},i(E){C||(se(b,E),se(v,E),se(u),C=!0)},o(E){fe(b,E),fe(v,E),fe(u),C=!1},d(E){E&&m(r),b&&b.d(E),v&&v.d(E),T[a].d(),n[15](null),j=!1,it(S)}}}function Nm(n,r,e){let t,i,s,{$$slots:l={},$$scope:a}=r,{show_defend_modal:u}=r,{parent_node:o}=r,{data:f}=r,h;const d=qr();Ye(n,d,U=>e(20,s=U));const c=jr();Ye(n,c,U=>e(19,i=U));let _=new jn;function w(U){t.includes(U)?e(5,t=t.filter(E=>E!==U)):t.push(U),e(5,t)}window.off_to_def_callback=function(U){w(U)};function k(){let U=0,E=200,P=100;for(const O of t){let N=f.off_to_def.results.bindings.find(X=>"def_tech"in X&&Re(X.def_tech.value)==O);N&&(cn(d,c,o,"countermeasureSelectorNode",N.def_tech_label.value,"d3f:"+Re(N.def_tech.value),o.data.sequence,o.position.x+U*E,o.position.y+P,182,63,"May "+N.def_tactic_label.value,!1),U+=1)}d.set(s),c.set(i),h&&h.close(),e(5,t=[])}let C=new Set,j=[],S=[];Rc(j,S)&&(S=[]);function F(U){for(const E of t){let P=f.off_to_def.results.bindings.find(O=>"def_tech"in O&&Re(O.def_tech.value)==E);U.includes(P.def_tactic_label.value)&&e(5,t=t.filter(O=>O!==E))}e(5,t)}function b(U){yr.call(this,n,U)}function y(U){S=U,e(3,S)}function v(U){It[U?"unshift":"push"](()=>{h=U,e(2,h)})}const B=()=>e(0,u=!1),T=()=>{h.close(),e(5,t=[])};return n.$$set=U=>{"show_defend_modal"in U&&e(0,u=U.show_defend_modal),"parent_node"in U&&e(10,o=U.parent_node),"data"in U&&e(1,f=U.data),"$$scope"in U&&e(18,a=U.$$scope)},n.$$.update=()=>{n.$$.dirty&5&&u&&h&&(h.showModal(),_.reset()),n.$$.dirty&2050&&f&&(f.off_to_def.results.bindings.forEach(U=>{"def_tactic_label"in U&&C.add(U.def_tactic_label.value)}),e(11,C),e(1,f)),n.$$.dirty&2048&&e(4,j=Array.from(C).sort(function(U,E){return ll[U]-ll[E]})),n.$$.dirty&8&&F(S),n.$$.dirty&8&&_.reset(S)},e(5,t=[]),[u,f,h,S,j,t,d,c,_,k,o,C,l,b,y,v,B,T,a]}class Im extends dt{constructor(r){super(),ht(this,r,Nm,Cm,Je,{show_defend_modal:0,parent_node:10,data:1})}}function Fm(n){let r,e="artifacts",t,i,s,l,a,u="defensive techniques",o,f,h,d,c,_;function w(S){n[6](S)}let k={parent_node:n[0],data:n[1]};n[2]!==void 0&&(k.show_artifacts_modal=n[2]),i=new bm({props:k}),It.push(()=>lr(i,"show_artifacts_modal",w));function C(S){n[8](S)}let j={parent_node:n[0],data:n[1]};return n[3]!==void 0&&(j.show_defend_modal=n[3]),f=new Im({props:j}),It.push(()=>lr(f,"show_defend_modal",C)),{c(){r=Q("button"),r.textContent=e,t=ie(),Ce(i.$$.fragment),l=ie(),a=Q("button"),a.textContent=u,o=ie(),Ce(f.$$.fragment),this.h()},l(S){r=Y(S,"BUTTON",{class:!0,"data-svelte-h":!0}),We(r)!=="svelte-1t14z6m"&&(r.textContent=e),t=le(S),Ne(i.$$.fragment,S),l=le(S),a=Y(S,"BUTTON",{class:!0,"data-svelte-h":!0}),We(a)!=="svelte-o3we0s"&&(a.textContent=u),o=le(S),Ne(f.$$.fragment,S),this.h()},h(){ee(r,"class","svelte-1x5dcdh"),ee(a,"class","svelte-1x5dcdh")},m(S,F){A(S,r,F),A(S,t,F),Ie(i,S,F),A(S,l,F),A(S,a,F),A(S,o,F),Ie(f,S,F),d=!0,c||(_=[pe(r,"click",n[5]),pe(a,"click",n[7])],c=!0)},p(S,[F]){const b={};F&1&&(b.parent_node=S[0]),F&2&&(b.data=S[1]),!s&&F&4&&(s=!0,b.show_artifacts_modal=S[2],ir(()=>s=!1)),i.$set(b);const y={};F&1&&(y.parent_node=S[0]),F&2&&(y.data=S[1]),!h&&F&8&&(h=!0,y.show_defend_modal=S[3],ir(()=>h=!1)),f.$set(y)},i(S){d||(se(i.$$.fragment,S),se(f.$$.fragment,S),d=!0)},o(S){fe(i.$$.fragment,S),fe(f.$$.fragment,S),d=!1},d(S){S&&(m(r),m(t),m(l),m(a),m(o)),Fe(i,S),Fe(f,S),c=!1,it(_)}}}function Rm(n,r,e){let t,i;var s=this&&this.__awaiter||function(c,_,w,k){function C(j){return j instanceof w?j:new w(function(S){S(j)})}return new(w||(w=Promise))(function(j,S){function F(v){try{y(k.next(v))}catch(B){S(B)}}function b(v){try{y(k.throw(v))}catch(B){S(B)}}function y(v){v.done?j(v.value):C(v.value).then(F,b)}y((k=k.apply(c,_||[])).next())})};let{node:l}=r,a;function u(c){return s(this,void 0,void 0,function*(){if(c.data.d3f_class){const _=c.data.d3f_class;return yield(yield fetch(`/api/offensive-technique/attack/${_.replace("d3f:","")}.json`)).json()}else alert("Please specify a D3FEND Class for this node to enable inferential mapping"),e(3,i=!1),e(2,t=!1)})}const o=async()=>{e(1,a=null),e(2,t=!0),e(1,a=await u(l))};function f(c){t=c,e(2,t)}const h=async()=>{e(1,a=null),e(3,i=!0),e(1,a=await u(l))};function d(c){i=c,e(3,i)}return n.$$set=c=>{"node"in c&&e(0,l=c.node)},e(2,t=!1),e(3,i=!1),[l,a,t,i,u,o,f,h,d]}class Sm extends dt{constructor(r){super(),ht(this,r,Rm,Fm,Je,{node:0})}}function Qo(n){let r,e;return r=new Sm({props:{node:n[1]}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i&2&&(s.node=t[1]),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function Yo(n){let r,e;return r=new om({props:{node:n[1]}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i&2&&(s.node=t[1]),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function Jo(n){let r,e;return r=new jg({props:{node:n[1]}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i&2&&(s.node=t[1]),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function Bm(n){let r,e,t,i,s,l,a,u,o,f,h="duplicate",d,c,_="delete",w,k,C,j,S=n[1]&&n[1].type=="attackSelectorNode"&&Qo(n),F=n[1]&&n[1].type=="countermeasureSelectorNode"&&Yo(n),b=n[1]&&n[1].type=="artifactSelectorNode"&&Jo(n);return{c(){r=Q("div"),e=Q("p"),t=Q("small"),i=V("node: "),s=V(n[0]),l=ie(),S&&S.c(),a=ie(),F&&F.c(),u=ie(),b&&b.c(),o=ie(),f=Q("button"),f.textContent=h,d=ie(),c=Q("button"),c.textContent=_,this.h()},l(y){r=Y(y,"DIV",{style:!0,class:!0});var v=we(r);e=Y(v,"P",{style:!0});var B=we(e);t=Y(B,"SMALL",{});var T=we(t);i=H(T,"node: "),s=H(T,n[0]),T.forEach(m),B.forEach(m),l=le(v),S&&S.l(v),a=le(v),F&&F.l(v),u=le(v),b&&b.l(v),o=le(v),f=Y(v,"BUTTON",{class:!0,"data-svelte-h":!0}),We(f)!=="svelte-1spbqw1"&&(f.textContent=h),d=le(v),c=Y(v,"BUTTON",{class:!0,"data-svelte-h":!0}),We(c)!=="svelte-1pyou7z"&&(c.textContent=_),v.forEach(m),this.h()},h(){st(e,"margin","0.5em"),ee(f,"class","svelte-1o17oqa"),ee(c,"class","svelte-1o17oqa"),ee(r,"style",w=n[2]()),ee(r,"class","context-menu svelte-1o17oqa")},m(y,v){A(y,r,v),M(r,e),M(e,t),M(t,i),M(t,s),M(r,l),S&&S.m(r,null),M(r,a),F&&F.m(r,null),M(r,u),b&&b.m(r,null),M(r,o),M(r,f),M(r,d),M(r,c),k=!0,C||(j=[pe(f,"click",n[5]),pe(c,"click",n[6])],C=!0)},p(y,[v]){(!k||v&1)&&me(s,y[0]),y[1]&&y[1].type=="attackSelectorNode"?S?(S.p(y,v),v&2&&se(S,1)):(S=Qo(y),S.c(),se(S,1),S.m(r,a)):S&&(et(),fe(S,1,1,()=>{S=null}),tt()),y[1]&&y[1].type=="countermeasureSelectorNode"?F?(F.p(y,v),v&2&&se(F,1)):(F=Yo(y),F.c(),se(F,1),F.m(r,u)):F&&(et(),fe(F,1,1,()=>{F=null}),tt()),y[1]&&y[1].type=="artifactSelectorNode"?b?(b.p(y,v),v&2&&se(b,1)):(b=Jo(y),b.c(),se(b,1),b.m(r,o)):b&&(et(),fe(b,1,1,()=>{b=null}),tt()),(!k||v&4&&w!==(w=y[2]()))&&ee(r,"style",w)},i(y){k||(se(S),se(F),se(b),k=!0)},o(y){fe(S),fe(F),fe(b),k=!1},d(y){y&&m(r),S&&S.d(),F&&F.d(),b&&b.d(),C=!1,it(j)}}}function Om(n,r,e){let t,i,s,l,{id:a}=r,{top:u}=r,{left:o}=r,{right:f}=r,{bottom:h}=r;const d=qr();Ye(n,d,k=>e(11,l=k));const c=jr();Ye(n,c,k=>e(12,s=k));function _(){const k=l.find(C=>C.id===a);k&&(console.log(k),l.push(Object.assign(Object.assign({},k),{id:`${a}-copy${Math.random()}`.slice(-24),position:{x:k.position.x,y:k.position.y+50}}))),d.set(l)}function w(){ut(d,l=l.filter(k=>k.id!==a),l),ut(c,s=s.filter(k=>k.source!==a&&k.target!==a),s),d.set(l),c.set(s)}return n.$$set=k=>{"id"in k&&e(0,a=k.id),"top"in k&&e(7,u=k.top),"left"in k&&e(8,o=k.left),"right"in k&&e(9,f=k.right),"bottom"in k&&e(10,h=k.bottom)},n.$$.update=()=>{n.$$.dirty&2049&&e(1,t=l.find(k=>k.id===a)),n.$$.dirty&1920&&e(2,i=()=>{let k="";return u&&(k+=`top:${u}px;`),h&&(k+=`bottom:${h}px;`),o&&(k+=`left:${o}px;`),f&&(k+=`right:${f}px;`),k})},[a,t,i,d,c,_,w,u,o,f,h,l]}class Lm extends dt{constructor(r){super(),ht(this,r,Om,Bm,Je,{id:0,top:7,left:8,right:9,bottom:10})}}function Zo(n,r,e){const t=n.slice();return t[12]=r[e],t}function Ko(n){let r,e,t,i,s,l,a,u,o,f,h,d,c;const _=n[8].default,w=Ft(_,n,n[7],null);let k=xe(n[3]),C=[];for(let j=0;j<k.length;j+=1)C[j]=$o(Zo(n,k,j));return{c(){r=Q("div"),e=Q("div"),t=Q("h2"),i=V(n[1]),s=ie(),l=Q("p"),a=V(n[2]),u=ie(),w&&w.c(),o=ie(),f=Q("div");for(let j=0;j<C.length;j+=1)C[j].c();this.h()},l(j){r=Y(j,"DIV",{class:!0});var S=we(r);e=Y(S,"DIV",{class:!0});var F=we(e);t=Y(F,"H2",{});var b=we(t);i=H(b,n[1]),b.forEach(m),s=le(F),l=Y(F,"P",{});var y=we(l);a=H(y,n[2]),y.forEach(m),u=le(F),w&&w.l(F),o=le(F),f=Y(F,"DIV",{class:!0});var v=we(f);for(let B=0;B<C.length;B+=1)C[B].l(v);v.forEach(m),F.forEach(m),S.forEach(m),this.h()},h(){ee(f,"class","options svelte-zbcx3u"),ee(e,"class","modal-content center text-center svelte-zbcx3u"),ee(r,"class","modal-overlay svelte-zbcx3u")},m(j,S){A(j,r,S),M(r,e),M(e,t),M(t,i),M(e,s),M(e,l),M(l,a),M(e,u),w&&w.m(e,null),M(e,o),M(e,f);for(let F=0;F<C.length;F+=1)C[F]&&C[F].m(f,null);h=!0,d||(c=[pe(e,"click",Ot(n[9])),pe(r,"click",n[4])],d=!0)},p(j,S){if((!h||S&2)&&me(i,j[1]),(!h||S&4)&&me(a,j[2]),w&&w.p&&(!h||S&128)&&Rt(w,_,j,j[7],h?Bt(_,j[7],S,null):St(j[7]),null),S&40){k=xe(j[3]);let F;for(F=0;F<k.length;F+=1){const b=Zo(j,k,F);C[F]?C[F].p(b,S):(C[F]=$o(b),C[F].c(),C[F].m(f,null))}for(;F<C.length;F+=1)C[F].d(1);C.length=k.length}},i(j){h||(se(w,j),h=!0)},o(j){fe(w,j),h=!1},d(j){j&&m(r),w&&w.d(j),mt(C,j),d=!1,it(c)}}}function $o(n){let r,e=n[12].label+"",t,i,s,l;function a(){return n[10](n[12])}return{c(){r=Q("button"),t=V(e),i=ie(),this.h()},l(u){r=Y(u,"BUTTON",{class:!0});var o=we(r);t=H(o,e),i=le(o),o.forEach(m),this.h()},h(){ee(r,"class","svelte-zbcx3u")},m(u,o){A(u,r,o),M(r,t),M(r,i),s||(l=pe(r,"click",a),s=!0)},p(u,o){n=u,o&8&&e!==(e=n[12].label+"")&&me(t,e)},d(u){u&&m(r),s=!1,l()}}}function Um(n){let r,e,t=n[0]&&Ko(n);return{c(){t&&t.c(),r=Ae()},l(i){t&&t.l(i),r=Ae()},m(i,s){t&&t.m(i,s),A(i,r,s),e=!0},p(i,[s]){i[0]?t?(t.p(i,s),s&1&&se(t,1)):(t=Ko(i),t.c(),se(t,1),t.m(r.parentNode,r)):t&&(et(),fe(t,1,1,()=>{t=null}),tt())},i(i){e||(se(t),e=!0)},o(i){fe(t),e=!1},d(i){i&&m(r),t&&t.d(i)}}}function Pm(n,r,e){let{$$slots:t={},$$scope:i}=r,{is_open:s=!1}=r,{title:l=""}=r,{content:a=""}=r,{imageSrc:u=""}=r,{options:o=[]}=r;const f=_s();function h(){e(0,s=!1)}function d(w){f("optionSelected",w),h()}function c(w){yr.call(this,n,w)}const _=w=>d(w);return n.$$set=w=>{"is_open"in w&&e(0,s=w.is_open),"title"in w&&e(1,l=w.title),"content"in w&&e(2,a=w.content),"imageSrc"in w&&e(6,u=w.imageSrc),"options"in w&&e(3,o=w.options),"$$scope"in w&&e(7,i=w.$$scope)},[s,l,a,o,h,d,u,i,t,c,_]}class ef extends dt{constructor(r){super(),ht(this,r,Pm,Um,Je,{is_open:0,title:1,content:2,imageSrc:6,options:3})}}function tf(n,r,e){const t=n.slice();return t[11]=r[e],t}function rf(n){let r,e,t,i,s,l,a,u,o,f,h,d,c;const _=n[7].default,w=Ft(_,n,n[6],null);let k=xe(n[3]),C=[];for(let j=0;j<k.length;j+=1)C[j]=nf(tf(n,k,j));return{c(){r=Q("div"),e=Q("div"),t=Q("h2"),i=V(n[1]),s=ie(),l=Q("p"),a=V(n[2]),u=ie(),w&&w.c(),o=ie(),f=Q("div");for(let j=0;j<C.length;j+=1)C[j].c();this.h()},l(j){r=Y(j,"DIV",{class:!0});var S=we(r);e=Y(S,"DIV",{class:!0});var F=we(e);t=Y(F,"H2",{});var b=we(t);i=H(b,n[1]),b.forEach(m),s=le(F),l=Y(F,"P",{});var y=we(l);a=H(y,n[2]),y.forEach(m),u=le(F),w&&w.l(F),o=le(F),f=Y(F,"DIV",{class:!0});var v=we(f);for(let B=0;B<C.length;B+=1)C[B].l(v);v.forEach(m),F.forEach(m),S.forEach(m),this.h()},h(){ee(f,"class","options svelte-2iwk9m"),ee(e,"class","modal-content center text-center svelte-2iwk9m"),ee(r,"class","modal-overlay svelte-2iwk9m")},m(j,S){A(j,r,S),M(r,e),M(e,t),M(t,i),M(e,s),M(e,l),M(l,a),M(e,u),w&&w.m(e,null),M(e,o),M(e,f);for(let F=0;F<C.length;F+=1)C[F]&&C[F].m(f,null);h=!0,d||(c=[pe(e,"click",Ot(n[8])),pe(r,"click",n[4])],d=!0)},p(j,S){if((!h||S&2)&&me(i,j[1]),(!h||S&4)&&me(a,j[2]),w&&w.p&&(!h||S&64)&&Rt(w,_,j,j[6],h?Bt(_,j[6],S,null):St(j[6]),null),S&40){k=xe(j[3]);let F;for(F=0;F<k.length;F+=1){const b=tf(j,k,F);C[F]?C[F].p(b,S):(C[F]=nf(b),C[F].c(),C[F].m(f,null))}for(;F<C.length;F+=1)C[F].d(1);C.length=k.length}},i(j){h||(se(w,j),h=!0)},o(j){fe(w,j),h=!1},d(j){j&&m(r),w&&w.d(j),mt(C,j),d=!1,it(c)}}}function nf(n){let r,e=n[11].label+"",t,i,s,l;function a(){return n[9](n[11])}return{c(){r=Q("button"),t=V(e),i=ie(),this.h()},l(u){r=Y(u,"BUTTON",{class:!0});var o=we(r);t=H(o,e),i=le(o),o.forEach(m),this.h()},h(){ee(r,"class","svelte-2iwk9m")},m(u,o){A(u,r,o),M(r,t),M(r,i),s||(l=pe(r,"click",a),s=!0)},p(u,o){n=u,o&8&&e!==(e=n[11].label+"")&&me(t,e)},d(u){u&&m(r),s=!1,l()}}}function Mm(n){let r,e,t=n[0]&&rf(n);return{c(){t&&t.c(),r=Ae()},l(i){t&&t.l(i),r=Ae()},m(i,s){t&&t.m(i,s),A(i,r,s),e=!0},p(i,[s]){i[0]?t?(t.p(i,s),s&1&&se(t,1)):(t=rf(i),t.c(),se(t,1),t.m(r.parentNode,r)):t&&(et(),fe(t,1,1,()=>{t=null}),tt())},i(i){e||(se(t),e=!0)},o(i){fe(t),e=!1},d(i){i&&m(r),t&&t.d(i)}}}function qm(n,r,e){let{$$slots:t={},$$scope:i}=r,{is_open:s=!1}=r,{title:l=""}=r,{content:a=""}=r,{options:u=[{label:"Cancel",value:"cancel"}]}=r;const o=_s();function f(){e(0,s=!1)}function h(_){o("model_shared",_),f()}function d(_){yr.call(this,n,_)}const c=_=>h(_);return n.$$set=_=>{"is_open"in _&&e(0,s=_.is_open),"title"in _&&e(1,l=_.title),"content"in _&&e(2,a=_.content),"options"in _&&e(3,u=_.options),"$$scope"in _&&e(6,i=_.$$scope)},[s,l,a,u,f,h,i,t,d,c]}class jm extends dt{constructor(r){super(),ht(this,r,qm,Mm,Je,{is_open:0,title:1,content:2,options:3})}}function Vm(n){let r,e,t=n[1]?"Exit Fullscreen":"Fullscreen",i,s,l,a,u;const o=n[4].default,f=Ft(o,n,n[3],null);return{c(){r=Q("div"),e=Q("button"),i=V(t),s=ie(),f&&f.c(),this.h()},l(h){r=Y(h,"DIV",{id:!0,class:!0});var d=we(r);e=Y(d,"BUTTON",{class:!0});var c=we(e);i=H(c,t),c.forEach(m),s=le(d),f&&f.l(d),d.forEach(m),this.h()},h(){ee(e,"class","fullscreen-toggle svelte-1t28a4x"),Sr(e,"left",n[0]==="left"),Sr(e,"right",n[0]==="right"),ee(r,"id","fullscreen-parent"),ee(r,"class","svelte-1t28a4x")},m(h,d){A(h,r,d),M(r,e),M(e,i),M(r,s),f&&f.m(r,null),l=!0,a||(u=pe(e,"click",n[2]),a=!0)},p(h,[d]){(!l||d&2)&&t!==(t=h[1]?"Exit Fullscreen":"Fullscreen")&&me(i,t),(!l||d&1)&&Sr(e,"left",h[0]==="left"),(!l||d&1)&&Sr(e,"right",h[0]==="right"),f&&f.p&&(!l||d&8)&&Rt(f,o,h,h[3],l?Bt(o,h[3],d,null):St(h[3]),null)},i(h){l||(se(f,h),l=!0)},o(h){fe(f,h),l=!1},d(h){h&&m(r),f&&f.d(h),a=!1,u()}}}function Hm(n,r,e){let{$$slots:t={},$$scope:i}=r,{position:s="right"}=r,l=!1,a;hl(()=>(a=document.getElementById("fullscreen-parent"),document.addEventListener("fullscreenchange",u),()=>{document.removeEventListener("fullscreenchange",u)}));function u(){e(1,l=!!document.fullscreenElement)}async function o(){if(l)try{await document.exitFullscreen()}catch(f){console.error("Error attempting to exit fullscreen:",f)}else try{await a.requestFullscreen()}catch(f){console.error("Error attempting to enable fullscreen:",f)}}return n.$$set=f=>{"position"in f&&e(0,s=f.position),"$$scope"in f&&e(3,i=f.$$scope)},[s,l,o,i,t]}class zm extends dt{constructor(r){super(),ht(this,r,Hm,Vm,Je,{position:0})}}function xm(n){let r,e,t="You can drag these nodes to the pane below.",i,s,l,a,u="Action",o,f,h="Event",d,c,_="Attack",w,k,C="Countermeasure",j,S,F,b="Endurant",y,v,B="Artifact",T,U,E="Information",P,O,N="Agent",X,L,ae,K="State",G,$,J="Vulnerability",ne,z,ue="Condition",Pe,He;return{c(){r=Q("aside"),e=Q("div"),e.textContent=t,i=ie(),s=Q("div"),l=Q("div"),a=Q("div"),a.textContent=u,o=ie(),f=Q("div"),f.textContent=h,d=ie(),c=Q("div"),c.textContent=_,w=ie(),k=Q("div"),k.textContent=C,j=ie(),S=Q("div"),F=Q("div"),F.textContent=b,y=ie(),v=Q("div"),v.textContent=B,T=ie(),U=Q("div"),U.textContent=E,P=ie(),O=Q("div"),O.textContent=N,X=ie(),L=Q("div"),ae=Q("div"),ae.textContent=K,G=ie(),$=Q("div"),$.textContent=J,ne=ie(),z=Q("div"),z.textContent=ue,this.h()},l(be){r=Y(be,"ASIDE",{class:!0});var De=we(r);e=Y(De,"DIV",{class:!0,"data-svelte-h":!0}),We(e)!=="svelte-1go4e39"&&(e.textContent=t),i=le(De),s=Y(De,"DIV",{class:!0});var _e=we(s);l=Y(_e,"DIV",{class:!0});var Te=we(l);a=Y(Te,"DIV",{class:!0,"data-svelte-h":!0}),We(a)!=="svelte-1yk6dej"&&(a.textContent=u),o=le(Te),f=Y(Te,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),We(f)!=="svelte-1hxo6k5"&&(f.textContent=h),d=le(Te),c=Y(Te,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),We(c)!=="svelte-1m30nhf"&&(c.textContent=_),w=le(Te),k=Y(Te,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),We(k)!=="svelte-xvztkt"&&(k.textContent=C),Te.forEach(m),j=le(_e),S=Y(_e,"DIV",{class:!0});var lt=we(S);F=Y(lt,"DIV",{class:!0,"data-svelte-h":!0}),We(F)!=="svelte-13fxc4g"&&(F.textContent=b),y=le(lt),v=Y(lt,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),We(v)!=="svelte-p6iki9"&&(v.textContent=B),T=le(lt),U=Y(lt,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),We(U)!=="svelte-gfucir"&&(U.textContent=E),P=le(lt),O=Y(lt,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),We(O)!=="svelte-1k1k96h"&&(O.textContent=N),lt.forEach(m),X=le(_e),L=Y(_e,"DIV",{class:!0});var gt=we(L);ae=Y(gt,"DIV",{class:!0,"data-svelte-h":!0}),We(ae)!=="svelte-82roym"&&(ae.textContent=K),G=le(gt),$=Y(gt,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),We($)!=="svelte-tj9qj"&&($.textContent=J),ne=le(gt),z=Y(gt,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),We(z)!=="svelte-1mwlumu"&&(z.textContent=ue),gt.forEach(m),_e.forEach(m),De.forEach(m),this.h()},h(){ee(e,"class","label svelte-1vosa9g"),ee(a,"class","text-center font-medium"),ee(f,"class","actionNode example-node svelte-1vosa9g"),ee(f,"draggable",!0),st(f,"text-align","center"),st(f,"background","white"),ee(f,"title","d3f:Event"),ee(c,"class","attackSelectorNode example-node svelte-1vosa9g"),ee(c,"draggable",!0),st(c,"text-align","center"),st(c,"background","#FFD0D0"),ee(c,"title","d3f:OffensiveTechnique"),ee(k,"class","countermeasureSelectorNode example-node svelte-1vosa9g"),ee(k,"draggable",!0),st(k,"text-align","center"),st(k,"background","#d6eaff"),ee(k,"title","d3f:DefensiveTechnique"),ee(l,"class","nodes-column svelte-1vosa9g"),ee(F,"class","text-center font-medium"),ee(v,"class","artifactSelectorNode art-node example-node svelte-1vosa9g"),ee(v,"draggable",!0),st(v,"text-align","center"),st(v,"background","#fff4dd"),ee(U,"class","informationSelectorNode example-node svelte-1vosa9g"),ee(U,"draggable",!0),st(U,"text-align","center"),st(U,"background","#e8f4ea"),ee(O,"class","agentSelectorNode example-node svelte-1vosa9g"),ee(O,"draggable",!0),st(O,"text-align","center"),st(O,"background","#f0e6e6"),ee(S,"class","nodes-column svelte-1vosa9g"),ee(ae,"class","text-center font-medium"),ee($,"class","vulnerabilitySelectorNode example-node svelte-1vosa9g"),ee($,"draggable",!0),st($,"text-align","center"),st($,"background","#f9d999"),ee(z,"class","conditionDefinitionNode example-node svelte-1vosa9g"),ee(z,"draggable",!0),st(z,"text-align","center"),st(z,"background","#ece6ff"),ee(L,"class","nodes-column svelte-1vosa9g"),ee(s,"class","nodes-container svelte-1vosa9g"),ee(r,"class","svelte-1vosa9g")},m(be,De){A(be,r,De),M(r,e),M(r,i),M(r,s),M(s,l),M(l,a),M(l,o),M(l,f),M(l,d),M(l,c),M(l,w),M(l,k),M(s,j),M(s,S),M(S,F),M(S,y),M(S,v),M(S,T),M(S,U),M(S,P),M(S,O),M(s,X),M(s,L),M(L,ae),M(L,G),M(L,$),M(L,ne),M(L,z),Pe||(He=[pe(f,"dragstart",n[1]),pe(c,"dragstart",n[2]),pe(k,"dragstart",n[3]),pe(v,"dragstart",n[4]),pe(U,"dragstart",n[5]),pe(O,"dragstart",n[6]),pe($,"dragstart",n[7]),pe(z,"dragstart",n[8])],Pe=!0)},p:Le,i:Le,o:Le,d(be){be&&m(r),Pe=!1,it(He)}}}function Xm(n){const r=(f,h)=>{if(!f.dataTransfer)return null;f.dataTransfer.setData("application/svelteflow",h),f.dataTransfer.effectAllowed="move"};return[r,f=>r(f,"eventNode"),f=>r(f,"attackSelectorNode"),f=>r(f,"countermeasureSelectorNode"),f=>r(f,"artifactSelectorNode"),f=>r(f,"informationSelectorNode"),f=>r(f,"agentSelectorNode"),f=>r(f,"vulnerabilitySelectorNode"),f=>r(f,"conditionDefinitionNode")]}class Gm extends dt{constructor(r){super(),ht(this,r,Xm,xm,Je,{})}}function lf(n,r,e){const t=n.slice();return t[16]=r[e],t[20]=r,t[18]=e,t}function sf(n,r,e){const t=n.slice();return t[16]=r[e],t[19]=r,t[18]=e,t}function af(n,r,e){const t=n.slice();return t[16]=r[e],t[17]=r,t[18]=e,t}function uf(n){let r,e,t=n[0].id+"",i,s,l;function a(f,h){return f[0].type=="attackSelectorNode"?Ym:f[0].type=="vulnerabilitySelectorNode"?Qm:Wm}let u=a(n),o=u(n);return{c(){r=Q("p"),e=V("id: "),i=V(t),s=ie(),o.c(),l=Ae(),this.h()},l(f){r=Y(f,"P",{class:!0});var h=we(r);e=H(h,"id: "),i=H(h,t),h.forEach(m),s=le(f),o.l(f),l=Ae(),this.h()},h(){ee(r,"class","text-center")},m(f,h){A(f,r,h),M(r,e),M(r,i),A(f,s,h),o.m(f,h),A(f,l,h)},p(f,h){h&1&&t!==(t=f[0].id+"")&&me(i,t),u===(u=a(f))&&o?o.p(f,h):(o.d(1),o=u(f),o&&(o.c(),o.m(l.parentNode,l)))},d(f){f&&(m(r),m(s),m(l)),o.d(f)}}}function Wm(n){let r,e,t,i,s,l,a,u,o,f,h,d,c,_,w,k,C,j="+",S,F,b=xe(n[0].data.user_properties),y=[];for(let v=0;v<b.length;v+=1)y[v]=of(lf(n,b,v));return{c(){r=Q("p"),e=V("sequence: "),t=Q("br"),i=Q("input"),s=ie(),l=Q("br"),a=ie(),u=Q("br"),o=V(`
                label:`),f=Q("br"),h=Q("input"),d=Q("br"),c=ie(),_=Q("br"),w=ie();for(let v=0;v<y.length;v+=1)y[v].c();k=ie(),C=Q("button"),C.textContent=j,this.h()},l(v){r=Y(v,"P",{class:!0});var B=we(r);e=H(B,"sequence: "),t=Y(B,"BR",{}),i=Y(B,"INPUT",{placeholder:!0,type:!0,name:!0}),s=le(B),l=Y(B,"BR",{}),a=le(B),u=Y(B,"BR",{}),o=H(B,`
                label:`),f=Y(B,"BR",{}),h=Y(B,"INPUT",{type:!0,name:!0}),d=Y(B,"BR",{}),c=le(B),_=Y(B,"BR",{}),w=le(B);for(let T=0;T<y.length;T+=1)y[T].l(B);k=le(B),C=Y(B,"BUTTON",{"data-svelte-h":!0}),We(C)!=="svelte-y9choq"&&(C.textContent=j),B.forEach(m),this.h()},h(){ee(i,"placeholder","property"),ee(i,"type","text"),ee(i,"name","editableInput"),ee(h,"type","text"),ee(h,"name","editableInput"),h.readOnly=!0,ee(r,"class","text-center")},m(v,B){A(v,r,B),M(r,e),M(r,t),M(r,i),Me(i,n[0].data.sequence),M(r,s),M(r,l),M(r,a),M(r,u),M(r,o),M(r,f),M(r,h),Me(h,n[0].data.label),M(r,d),M(r,c),M(r,_),M(r,w);for(let T=0;T<y.length;T+=1)y[T]&&y[T].m(r,null);M(r,k),M(r,C),S||(F=[pe(i,"input",n[12]),pe(h,"input",n[13]),pe(C,"click",n[1])],S=!0)},p(v,B){if(B&1&&i.value!==v[0].data.sequence&&Me(i,v[0].data.sequence),B&1&&h.value!==v[0].data.label&&Me(h,v[0].data.label),B&1){b=xe(v[0].data.user_properties);let T;for(T=0;T<b.length;T+=1){const U=lf(v,b,T);y[T]?y[T].p(U,B):(y[T]=of(U),y[T].c(),y[T].m(r,k))}for(;T<y.length;T+=1)y[T].d(1);y.length=b.length}},d(v){v&&m(r),mt(y,v),S=!1,it(F)}}}function Qm(n){let r,e,t,i,s,l,a,u,o,f,h,d,c,_,w,k,C,j,S="+",F,b,y=xe(n[0].data.user_properties),v=[];for(let B=0;B<y.length;B+=1)v[B]=ff(sf(n,y,B));return{c(){r=Q("p"),e=V("weakness: "),t=Q("br"),i=Q("input"),s=Q("br"),l=ie(),a=Q("br"),u=ie(),o=Q("br"),f=V(`
                label:`),h=Q("br"),d=Q("input"),c=Q("br"),_=ie(),w=Q("br"),k=ie();for(let B=0;B<v.length;B+=1)v[B].c();C=ie(),j=Q("button"),j.textContent=S,this.h()},l(B){r=Y(B,"P",{class:!0});var T=we(r);e=H(T,"weakness: "),t=Y(T,"BR",{}),i=Y(T,"INPUT",{placeholder:!0,type:!0,name:!0}),s=Y(T,"BR",{}),l=le(T),a=Y(T,"BR",{}),u=le(T),o=Y(T,"BR",{}),f=H(T,`
                label:`),h=Y(T,"BR",{}),d=Y(T,"INPUT",{type:!0,name:!0}),c=Y(T,"BR",{}),_=le(T),w=Y(T,"BR",{}),k=le(T);for(let U=0;U<v.length;U+=1)v[U].l(T);C=le(T),j=Y(T,"BUTTON",{"data-svelte-h":!0}),We(j)!=="svelte-y9choq"&&(j.textContent=S),T.forEach(m),this.h()},h(){ee(i,"placeholder","weakness"),ee(i,"type","text"),ee(i,"name","editableInput"),ee(d,"type","text"),ee(d,"name","editableInput"),d.readOnly=!0,ee(r,"class","text-center")},m(B,T){A(B,r,T),M(r,e),M(r,t),M(r,i),Me(i,n[0].data.weakness),M(r,s),M(r,l),M(r,a),M(r,u),M(r,o),M(r,f),M(r,h),M(r,d),Me(d,n[0].data.label),M(r,c),M(r,_),M(r,w),M(r,k);for(let U=0;U<v.length;U+=1)v[U]&&v[U].m(r,null);M(r,C),M(r,j),F||(b=[pe(i,"input",n[8]),pe(d,"input",n[9]),pe(j,"click",n[1])],F=!0)},p(B,T){if(T&1&&i.value!==B[0].data.weakness&&Me(i,B[0].data.weakness),T&1&&d.value!==B[0].data.label&&Me(d,B[0].data.label),T&1){y=xe(B[0].data.user_properties);let U;for(U=0;U<y.length;U+=1){const E=sf(B,y,U);v[U]?v[U].p(E,T):(v[U]=ff(E),v[U].c(),v[U].m(r,C))}for(;U<v.length;U+=1)v[U].d(1);v.length=y.length}},d(B){B&&m(r),mt(v,B),F=!1,it(b)}}}function Ym(n){let r,e,t,i,s,l,a,u,o,f,h,d,c,_,w,k,C,j="+",S,F,b=xe(n[0].data.user_properties),y=[];for(let v=0;v<b.length;v+=1)y[v]=cf(af(n,b,v));return{c(){r=Q("p"),e=V("sequence: "),t=Q("br"),i=Q("input"),s=ie(),l=Q("br"),a=ie(),u=Q("br"),o=V(`
                label:`),f=Q("br"),h=Q("input"),d=Q("br"),c=ie(),_=Q("br"),w=ie();for(let v=0;v<y.length;v+=1)y[v].c();k=ie(),C=Q("button"),C.textContent=j,this.h()},l(v){r=Y(v,"P",{class:!0});var B=we(r);e=H(B,"sequence: "),t=Y(B,"BR",{}),i=Y(B,"INPUT",{placeholder:!0,type:!0,name:!0}),s=le(B),l=Y(B,"BR",{}),a=le(B),u=Y(B,"BR",{}),o=H(B,`
                label:`),f=Y(B,"BR",{}),h=Y(B,"INPUT",{type:!0,name:!0}),d=Y(B,"BR",{}),c=le(B),_=Y(B,"BR",{}),w=le(B);for(let T=0;T<y.length;T+=1)y[T].l(B);k=le(B),C=Y(B,"BUTTON",{"data-svelte-h":!0}),We(C)!=="svelte-y9choq"&&(C.textContent=j),B.forEach(m),this.h()},h(){ee(i,"placeholder","property"),ee(i,"type","text"),ee(i,"name","editableInput"),ee(h,"type","text"),ee(h,"name","editableInput"),h.readOnly=!0,ee(r,"class","text-center")},m(v,B){A(v,r,B),M(r,e),M(r,t),M(r,i),Me(i,n[0].data.sequence),M(r,s),M(r,l),M(r,a),M(r,u),M(r,o),M(r,f),M(r,h),Me(h,n[0].data.label),M(r,d),M(r,c),M(r,_),M(r,w);for(let T=0;T<y.length;T+=1)y[T]&&y[T].m(r,null);M(r,k),M(r,C),S||(F=[pe(i,"input",n[4]),pe(h,"input",n[5]),pe(C,"click",n[1])],S=!0)},p(v,B){if(B&1&&i.value!==v[0].data.sequence&&Me(i,v[0].data.sequence),B&1&&h.value!==v[0].data.label&&Me(h,v[0].data.label),B&1){b=xe(v[0].data.user_properties);let T;for(T=0;T<b.length;T+=1){const U=af(v,b,T);y[T]?y[T].p(U,B):(y[T]=cf(U),y[T].c(),y[T].m(r,k))}for(;T<y.length;T+=1)y[T].d(1);y.length=b.length}},d(v){v&&m(r),mt(y,v),S=!1,it(F)}}}function of(n){let r,e,t,i,s,l,a,u,o;function f(){n[14].call(r,n[18])}function h(){n[15].call(i,n[18])}return{c(){r=Q("input"),e=ie(),t=Q("br"),i=Q("input"),s=ie(),l=Q("br"),a=Q("br"),this.h()},l(d){r=Y(d,"INPUT",{placeholder:!0,type:!0,name:!0}),e=le(d),t=Y(d,"BR",{}),i=Y(d,"INPUT",{placeholder:!0,type:!0,name:!0}),s=le(d),l=Y(d,"BR",{}),a=Y(d,"BR",{}),this.h()},h(){ee(r,"placeholder","property"),ee(r,"type","text"),ee(r,"name","editableInput"),ee(i,"placeholder","value"),ee(i,"type","text"),ee(i,"name","editableInput")},m(d,c){A(d,r,c),Me(r,n[0].data.user_properties[n[18]][0]),A(d,e,c),A(d,t,c),A(d,i,c),Me(i,n[0].data.user_properties[n[18]][1]),A(d,s,c),A(d,l,c),A(d,a,c),u||(o=[pe(r,"input",f),pe(i,"input",h)],u=!0)},p(d,c){n=d,c&1&&r.value!==n[0].data.user_properties[n[18]][0]&&Me(r,n[0].data.user_properties[n[18]][0]),c&1&&i.value!==n[0].data.user_properties[n[18]][1]&&Me(i,n[0].data.user_properties[n[18]][1])},d(d){d&&(m(r),m(e),m(t),m(i),m(s),m(l),m(a)),u=!1,it(o)}}}function ff(n){let r,e,t,i,s,l,a,u,o;function f(){n[10].call(r,n[18])}function h(){n[11].call(i,n[18])}return{c(){r=Q("input"),e=ie(),t=Q("br"),i=Q("input"),s=ie(),l=Q("br"),a=Q("br"),this.h()},l(d){r=Y(d,"INPUT",{placeholder:!0,type:!0,name:!0}),e=le(d),t=Y(d,"BR",{}),i=Y(d,"INPUT",{placeholder:!0,type:!0,name:!0}),s=le(d),l=Y(d,"BR",{}),a=Y(d,"BR",{}),this.h()},h(){ee(r,"placeholder","property"),ee(r,"type","text"),ee(r,"name","editableInput"),ee(i,"placeholder","value"),ee(i,"type","text"),ee(i,"name","editableInput")},m(d,c){A(d,r,c),Me(r,n[0].data.user_properties[n[18]][0]),A(d,e,c),A(d,t,c),A(d,i,c),Me(i,n[0].data.user_properties[n[18]][1]),A(d,s,c),A(d,l,c),A(d,a,c),u||(o=[pe(r,"input",f),pe(i,"input",h)],u=!0)},p(d,c){n=d,c&1&&r.value!==n[0].data.user_properties[n[18]][0]&&Me(r,n[0].data.user_properties[n[18]][0]),c&1&&i.value!==n[0].data.user_properties[n[18]][1]&&Me(i,n[0].data.user_properties[n[18]][1])},d(d){d&&(m(r),m(e),m(t),m(i),m(s),m(l),m(a)),u=!1,it(o)}}}function cf(n){let r,e,t,i,s,l,a,u,o;function f(){n[6].call(r,n[18])}function h(){n[7].call(i,n[18])}return{c(){r=Q("input"),e=ie(),t=Q("br"),i=Q("input"),s=ie(),l=Q("br"),a=Q("br"),this.h()},l(d){r=Y(d,"INPUT",{placeholder:!0,type:!0,name:!0}),e=le(d),t=Y(d,"BR",{}),i=Y(d,"INPUT",{placeholder:!0,type:!0,name:!0}),s=le(d),l=Y(d,"BR",{}),a=Y(d,"BR",{}),this.h()},h(){ee(r,"placeholder","property"),ee(r,"type","text"),ee(r,"name","editableInput"),ee(i,"placeholder","value"),ee(i,"type","text"),ee(i,"name","editableInput")},m(d,c){A(d,r,c),Me(r,n[0].data.user_properties[n[18]][0]),A(d,e,c),A(d,t,c),A(d,i,c),Me(i,n[0].data.user_properties[n[18]][1]),A(d,s,c),A(d,l,c),A(d,a,c),u||(o=[pe(r,"input",f),pe(i,"input",h)],u=!0)},p(d,c){n=d,c&1&&r.value!==n[0].data.user_properties[n[18]][0]&&Me(r,n[0].data.user_properties[n[18]][0]),c&1&&i.value!==n[0].data.user_properties[n[18]][1]&&Me(i,n[0].data.user_properties[n[18]][1])},d(d){d&&(m(r),m(e),m(t),m(i),m(s),m(l),m(a)),u=!1,it(o)}}}function Jm(n){let r,e,t='<code class="">node properties</code>',i,s,l,a=n[0]&&uf(n);const u=n[3].default,o=Ft(u,n,n[2],null);return{c(){r=Q("div"),e=Q("div"),e.innerHTML=t,i=ie(),a&&a.c(),s=ie(),o&&o.c(),this.h()},l(f){r=Y(f,"DIV",{class:!0});var h=we(r);e=Y(h,"DIV",{class:!0,"data-svelte-h":!0}),We(e)!=="svelte-txsgvp"&&(e.innerHTML=t),i=le(h),a&&a.l(h),s=le(h),o&&o.l(h),h.forEach(m),this.h()},h(){ee(e,"class","text-center"),ee(r,"class","side-panel svelte-17hpejv")},m(f,h){A(f,r,h),M(r,e),M(r,i),a&&a.m(r,null),M(r,s),o&&o.m(r,null),l=!0},p(f,[h]){f[0]?a?a.p(f,h):(a=uf(f),a.c(),a.m(r,s)):a&&(a.d(1),a=null),o&&o.p&&(!l||h&4)&&Rt(o,u,f,f[2],l?Bt(u,f[2],h,null):St(f[2]),null)},i(f){l||(se(o,f),l=!0)},o(f){fe(o,f),l=!1},d(f){f&&m(r),a&&a.d(),o&&o.d(f)}}}function Zm(n,r,e){let t;Ye(n,Qe,S=>e(0,t=S));let{$$slots:i={},$$scope:s}=r;function l(){t.data.user_properties.push(["",""]),Qe.set(t)}function a(){t.data.sequence=this.value,Qe.set(t)}function u(){t.data.label=this.value,Qe.set(t)}function o(S){t.data.user_properties[S][0]=this.value,Qe.set(t)}function f(S){t.data.user_properties[S][1]=this.value,Qe.set(t)}function h(){t.data.weakness=this.value,Qe.set(t)}function d(){t.data.label=this.value,Qe.set(t)}function c(S){t.data.user_properties[S][0]=this.value,Qe.set(t)}function _(S){t.data.user_properties[S][1]=this.value,Qe.set(t)}function w(){t.data.sequence=this.value,Qe.set(t)}function k(){t.data.label=this.value,Qe.set(t)}function C(S){t.data.user_properties[S][0]=this.value,Qe.set(t)}function j(S){t.data.user_properties[S][1]=this.value,Qe.set(t)}return n.$$set=S=>{"$$scope"in S&&e(2,s=S.$$scope)},[t,l,s,i,a,u,o,f,h,d,c,_,w,k,C,j]}class Km extends dt{constructor(r){super(),ht(this,r,Zm,Jm,Je,{})}}function df(n,r,e){const t=n.slice();return t[9]=r[e],t}function hf(n){let r,e=n[9]["rdfs:label"]+"",t,i,s,l,a;function u(...f){return n[7](n[9],...f)}function o(...f){return n[8](n[9],...f)}return{c(){r=Q("div"),t=V(e),i=ie(),this.h()},l(f){r=Y(f,"DIV",{class:!0,title:!0,tabindex:!0,role:!0});var h=we(r);t=H(h,e),i=le(h),h.forEach(m),this.h()},h(){ee(r,"class","select-technique"),ee(r,"title",s=n[9]["d3f:definition"]),ee(r,"tabindex","0"),ee(r,"role","button")},m(f,h){A(f,r,h),M(r,t),M(r,i),l||(a=[pe(r,"click",Ot(yn(u))),pe(r,"keydown",Ot(o))],l=!0)},p(f,h){n=f,h&8&&e!==(e=n[9]["rdfs:label"]+"")&&me(t,e),h&8&&s!==(s=n[9]["d3f:definition"])&&ee(r,"title",s)},d(f){f&&m(r),l=!1,it(a)}}}function $m(n){let r,e=xe(n[3]),t=[];for(let i=0;i<e.length;i+=1)t[i]=hf(df(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Ae()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Ae()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);A(i,r,s)},p(i,[s]){if(s&12){e=xe(i[3]);let l;for(l=0;l<e.length;l+=1){const a=df(i,e,l);t[l]?t[l].p(a,s):(t[l]=hf(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},i:Le,o:Le,d(i){i&&m(r),mt(t,i)}}}function ev(n,r,e){let t,i=Le,s=()=>(i(),i=Mr(f,k=>e(5,t=k)),f),l,a=Le,u=()=>(a(),a=Mr(o,k=>e(6,l=k)),o);n.$$.on_destroy.push(()=>i()),n.$$.on_destroy.push(()=>a());let{list:o}=r;u();let{filter_value_store:f}=r;s();let{select_item:h}=r,{regex_search_keys:d=["rdfs:label","@id"]}=r,c=[];const _=(k,C)=>h(C,k),w=(k,C)=>Vn(C,h,k);return n.$$set=k=>{"list"in k&&u(e(0,o=k.list)),"filter_value_store"in k&&s(e(1,f=k.filter_value_store)),"select_item"in k&&e(2,h=k.select_item),"regex_search_keys"in k&&e(4,d=k.regex_search_keys)},n.$$.update=()=>{n.$$.dirty&112&&e(3,c=Pp(l,t,d))},[o,f,h,c,d,t,l,_,w]}class tv extends dt{constructor(r){super(),ht(this,r,ev,$m,Je,{list:0,filter_value_store:1,select_item:2,regex_search_keys:4})}}function _f(n,r,e){const t=n.slice();return t[12]=r[e],t}function pf(n,r,e){const t=n.slice();return t[15]=r[e],t}function gf(n){let r,e=xe(n[12].children),t=[];for(let i=0;i<e.length;i+=1)t[i]=mf(pf(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Ae()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Ae()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);A(i,r,s)},p(i,s){if(s&20){e=xe(i[12].children);let l;for(l=0;l<e.length;l+=1){const a=pf(i,e,l);t[l]?t[l].p(a,s):(t[l]=mf(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),mt(t,i)}}}function mf(n){let r,e=n[15]["rdfs:label"]+"",t,i,s,l,a;function u(...f){return n[10](n[15],...f)}function o(...f){return n[11](n[15],...f)}return{c(){r=Q("div"),t=V(e),i=ie(),this.h()},l(f){r=Y(f,"DIV",{class:!0,title:!0,tabindex:!0,role:!0});var h=we(r);t=H(h,e),i=le(h),h.forEach(m),this.h()},h(){ee(r,"class","select-technique"),ee(r,"title",s=n[15]["d3f:definition"]),ee(r,"tabindex","0"),ee(r,"role","button")},m(f,h){A(f,r,h),M(r,t),M(r,i),l||(a=[pe(r,"click",Ot(yn(u))),pe(r,"keydown",Ot(o))],l=!0)},p(f,h){n=f,h&16&&e!==(e=n[15]["rdfs:label"]+"")&&me(t,e),h&16&&s!==(s=n[15]["d3f:definition"])&&ee(r,"title",s)},d(f){f&&m(r),l=!1,it(a)}}}function vf(n){let r,e,t=n[12]["rdfs:label"]+"",i,s,l,a,u,o,f,h=(n[3]===n[12]["@id"]||n[5])&&gf(n);return{c(){r=Q("details"),e=Q("summary"),i=V(t),l=ie(),h&&h.c(),a=ie(),this.h()},l(d){r=Y(d,"DETAILS",{});var c=we(r);e=Y(c,"SUMMARY",{id:!0});var _=we(e);i=H(_,t),_.forEach(m),l=le(c),h&&h.l(c),a=le(c),c.forEach(m),this.h()},h(){ee(e,"id",s=n[12]["@id"]),r.open=u=n[3]===n[12]["@id"]||n[5]},m(d,c){A(d,r,c),M(r,e),M(e,i),M(r,l),h&&h.m(r,null),M(r,a),o||(f=pe(e,"click",Ot(yn(n[6]))),o=!0)},p(d,c){c&16&&t!==(t=d[12]["rdfs:label"]+"")&&me(i,t),c&16&&s!==(s=d[12]["@id"])&&ee(e,"id",s),d[3]===d[12]["@id"]||d[5]?h?h.p(d,c):(h=gf(d),h.c(),h.m(r,a)):h&&(h.d(1),h=null),c&56&&u!==(u=d[3]===d[12]["@id"]||d[5])&&(r.open=u)},d(d){d&&m(r),h&&h.d(),o=!1,f()}}}function rv(n){let r,e=xe(n[4]),t=[];for(let i=0;i<e.length;i+=1)t[i]=vf(_f(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Ae()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Ae()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);A(i,r,s)},p(i,[s]){if(s&124){e=xe(i[4]);let l;for(l=0;l<e.length;l+=1){const a=_f(i,e,l);t[l]?t[l].p(a,s):(t[l]=vf(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},i:Le,o:Le,d(i){i&&m(r),mt(t,i)}}}function nv(n,r,e){let t,i,s=Le,l=()=>(s(),s=Mr(h,S=>e(8,i=S)),h),a,u=Le,o=()=>(u(),u=Mr(f,S=>e(9,a=S)),f);n.$$.on_destroy.push(()=>s()),n.$$.on_destroy.push(()=>u());let{list:f}=r;o();let{filter_value_store:h}=r;l();let{select_item:d}=r,{regex_search_keys:c=["d3f:definition","rdfs:label","@id","d3f:d3fend-id"]}=r,_=null,w=[];function k(S){const{id:F}=S.target;_===F?e(3,_=null):e(3,_=F)}const C=(S,F)=>d(F,S),j=(S,F)=>Vn(F,d,S);return n.$$set=S=>{"list"in S&&o(e(0,f=S.list)),"filter_value_store"in S&&l(e(1,h=S.filter_value_store)),"select_item"in S&&e(2,d=S.select_item),"regex_search_keys"in S&&e(7,c=S.regex_search_keys)},n.$$.update=()=>{n.$$.dirty&896&&e(4,w=Mp(a,i,c)),n.$$.dirty&256&&e(5,t=!!i)},[f,h,d,_,w,t,k,c,i,a,C,j]}class iv extends dt{constructor(r){super(),ht(this,r,nv,rv,Je,{list:0,filter_value_store:1,select_item:2,regex_search_keys:7})}}function bf(n,r,e){const t=n.slice();return t[16]=r[e],t}function lv(n){let r,e,t,i;return{c(){r=Q("div"),e=V(n[6]),this.h()},l(s){r=Y(s,"DIV",{id:!0,class:!0,role:!0,tabindex:!0});var l=we(r);e=H(l,n[6]),l.forEach(m),this.h()},h(){var s;ee(r,"id","selectable-technique"),ee(r,"class","no-arrow svelte-1t0ebq3"),ee(r,"role","tree"),ee(r,"tabindex","0"),Sr(r,"current-selected",((s=n[8])==null?void 0:s["@id"])===n[0]["@id"])},m(s,l){A(s,r,l),M(r,e),t||(i=[pe(r,"click",Ot(yn(n[13]))),pe(r,"keydown",Ot(yn(n[14])))],t=!0)},p(s,l){var a;l&64&&me(e,s[6]),l&257&&Sr(r,"current-selected",((a=s[8])==null?void 0:a["@id"])===s[0]["@id"])},i:Le,o:Le,d(s){s&&m(r),t=!1,it(i)}}}function sv(n){let r,e,t="▶",i,s,l,a,u,o,f,h,d=n[4]&&wf(n);return{c(){r=Q("span"),e=Q("span"),e.textContent=t,i=ie(),s=Q("span"),l=V(n[6]),a=ie(),d&&d.c(),u=Ae(),this.h()},l(c){r=Y(c,"SPAN",{class:!0,role:!0,tabindex:!0});var _=we(r);e=Y(_,"SPAN",{class:!0,"data-svelte-h":!0}),We(e)!=="svelte-1xn7s3"&&(e.textContent=t),i=le(_),s=Y(_,"SPAN",{id:!0,class:!0});var w=we(s);l=H(w,n[6]),w.forEach(m),_.forEach(m),a=le(c),d&&d.l(c),u=Ae(),this.h()},h(){var c;ee(e,"class","arrow svelte-1t0ebq3"),Sr(e,"arrowDown",n[5]),ee(s,"id","parent-selectable-technique"),ee(s,"class","label svelte-1t0ebq3"),ee(r,"class","parent-technique svelte-1t0ebq3"),ee(r,"role","tree"),ee(r,"tabindex","0"),Sr(r,"current-selected",((c=n[8])==null?void 0:c["@id"])===n[0]["@id"])},m(c,_){A(c,r,_),M(r,e),M(r,i),M(r,s),M(s,l),A(c,a,_),d&&d.m(c,_),A(c,u,_),o=!0,f||(h=[pe(r,"click",Ot(yn(n[11]))),pe(r,"keydown",Ot(yn(n[12])))],f=!0)},p(c,_){var w;(!o||_&32)&&Sr(e,"arrowDown",c[5]),(!o||_&64)&&me(l,c[6]),(!o||_&257)&&Sr(r,"current-selected",((w=c[8])==null?void 0:w["@id"])===c[0]["@id"]),c[4]?d?(d.p(c,_),_&16&&se(d,1)):(d=wf(c),d.c(),se(d,1),d.m(u.parentNode,u)):d&&(et(),fe(d,1,1,()=>{d=null}),tt())},i(c){o||(se(d),o=!0)},o(c){fe(d),o=!1},d(c){c&&(m(r),m(a),m(u)),d&&d.d(c),f=!1,it(h)}}}function wf(n){let r,e,t=xe(n[7]),i=[];for(let l=0;l<t.length;l+=1)i[l]=yf(bf(n,t,l));const s=l=>fe(i[l],1,1,()=>{i[l]=null});return{c(){for(let l=0;l<i.length;l+=1)i[l].c();r=Ae()},l(l){for(let a=0;a<i.length;a+=1)i[a].l(l);r=Ae()},m(l,a){for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(l,a);A(l,r,a),e=!0},p(l,a){if(a&134){t=xe(l[7]);let u;for(u=0;u<t.length;u+=1){const o=bf(l,t,u);i[u]?(i[u].p(o,a),se(i[u],1)):(i[u]=yf(o),i[u].c(),se(i[u],1),i[u].m(r.parentNode,r))}for(et(),u=t.length;u<i.length;u+=1)s(u);tt()}},i(l){if(!e){for(let a=0;a<t.length;a+=1)se(i[a]);e=!0}},o(l){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)fe(i[a]);e=!1},d(l){l&&m(r),mt(i,l)}}}function yf(n){let r,e;return r=new hh({props:{tree:n[16],expanded_nodes:n[1],selected_node:n[2],first_node:!1}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i&128&&(s.tree=t[16]),i&2&&(s.expanded_nodes=t[1]),i&4&&(s.selected_node=t[2]),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function av(n){let r,e,t,i,s;const l=[sv,lv],a=[];function u(o,f){return o[7]?0:1}return t=u(n),i=a[t]=l[t](n),{c(){r=Q("ul"),e=Q("li"),i.c(),this.h()},l(o){r=Y(o,"UL",{style:!0,class:!0});var f=we(r);e=Y(f,"LI",{});var h=we(e);i.l(h),h.forEach(m),f.forEach(m),this.h()},h(){st(r,"--first-node",n[3]?"0rem":"0.6rem"),ee(r,"class","svelte-1t0ebq3")},m(o,f){A(o,r,f),M(r,e),a[t].m(e,null),s=!0},p(o,[f]){let h=t;t=u(o),t===h?a[t].p(o,f):(et(),fe(a[h],1,1,()=>{a[h]=null}),tt(),i=a[t],i?i.p(o,f):(i=a[t]=l[t](o),i.c()),se(i,1),i.m(e,null)),(!s||f&8)&&st(r,"--first-node",o[3]?"0rem":"0.6rem")},i(o){s||(se(i),s=!0)},o(o){fe(i),s=!1},d(o){o&&m(r),a[t].d()}}}function uv(n,r,e){let t,i,s,l,a=Le,u=()=>(a(),a=Mr(_,v=>e(8,l=v)),_),o,f=Le,h=()=>(f(),f=Mr(c,v=>e(15,o=v)),c);n.$$.on_destroy.push(()=>a()),n.$$.on_destroy.push(()=>f());let{tree:d}=r,{expanded_nodes:c}=r;h();let{selected_node:_}=r;u();let{first_node:w=!0}=r,k=o[t]||!1;function C(v,B){e(4,k=!k),ut(_,l=B,l)}function j(v,B){ut(_,l=B,l)}const S=v=>C(v,d),F=v=>Vn(v,C,d),b=v=>j(v,d),y=v=>Vn(v,j,d);return n.$$set=v=>{"tree"in v&&e(0,d=v.tree),"expanded_nodes"in v&&h(e(1,c=v.expanded_nodes)),"selected_node"in v&&u(e(2,_=v.selected_node)),"first_node"in v&&e(3,w=v.first_node)},n.$$.update=()=>{var v;n.$$.dirty&1&&e(6,t=((v=d==null?void 0:d["rdfs:label"])==null?void 0:v[0])??d["@id"]),n.$$.dirty&1&&e(7,i=d.children),n.$$.dirty&16&&e(5,s=k)},[d,c,_,w,k,s,t,i,l,C,j,S,F,b,y]}class hh extends dt{constructor(r){super(),ht(this,r,uv,av,Je,{tree:0,expanded_nodes:1,selected_node:2,first_node:3})}}function kf(n,r,e){const t=n.slice();return t[10]=r[e],t}function Ef(n){let r,e;return r=new hh({props:{tree:n[10],expanded_nodes:n[4],selected_node:n[5],select_item:n[2]}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i&8&&(s.tree=t[10]),i&4&&(s.select_item=t[2]),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function ov(n){let r,e,t=xe(n[3]),i=[];for(let l=0;l<t.length;l+=1)i[l]=Ef(kf(n,t,l));const s=l=>fe(i[l],1,1,()=>{i[l]=null});return{c(){for(let l=0;l<i.length;l+=1)i[l].c();r=Ae()},l(l){for(let a=0;a<i.length;a+=1)i[a].l(l);r=Ae()},m(l,a){for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(l,a);A(l,r,a),e=!0},p(l,[a]){if(a&60){t=xe(l[3]);let u;for(u=0;u<t.length;u+=1){const o=kf(l,t,u);i[u]?(i[u].p(o,a),se(i[u],1)):(i[u]=Ef(o),i[u].c(),se(i[u],1),i[u].m(r.parentNode,r))}for(et(),u=t.length;u<i.length;u+=1)s(u);tt()}},i(l){if(!e){for(let a=0;a<t.length;a+=1)se(i[a]);e=!0}},o(l){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)fe(i[a]);e=!1},d(l){l&&m(r),mt(i,l)}}}function fv(n,r,e){let t,i=Le,s=()=>(i(),i=Mr(h,C=>e(7,t=C)),h),l,a=Le,u=()=>(a(),a=Mr(f,C=>e(8,l=C)),f),o;n.$$.on_destroy.push(()=>i()),n.$$.on_destroy.push(()=>a());let{list:f}=r;u();let{filter_value_store:h}=r;s();let{select_item:d}=r,{regex_search_keys:c=["rdfs:label","@id"]}=r,_=[];const w=Kt({}),k=Kt(null);return Ye(n,k,C=>e(9,o=C)),hs(()=>{o&&d(null,o,"d3f_property")}),n.$$set=C=>{"list"in C&&u(e(0,f=C.list)),"filter_value_store"in C&&s(e(1,h=C.filter_value_store)),"select_item"in C&&e(2,d=C.select_item),"regex_search_keys"in C&&e(6,c=C.regex_search_keys)},n.$$.update=()=>{n.$$.dirty&448&&e(3,_=jp(l.associated,t,c))},[f,h,d,_,w,k,c,t,l]}class cv extends dt{constructor(r){super(),ht(this,r,fv,ov,Je,{list:0,filter_value_store:1,select_item:2,regex_search_keys:6})}}const dv=n=>({}),Df=n=>({R:n[6],filter_value_store:n[4],select_item:n[9]});function Af(n){let r,e,t,i,s,l,a;const u=n[18].default,o=Ft(u,n,n[17],Df);return{c(){r=Q("ul"),e=Q("input"),t=ie(),o&&o.c(),this.h()},l(f){r=Y(f,"UL",{id:!0,class:!0});var h=we(r);e=Y(h,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0,class:!0}),t=le(h),o&&o.l(h),h.forEach(m),this.h()},h(){ee(e,"type","text"),ee(e,"id","filter"),ee(e,"name","filter"),ee(e,"placeholder","Filter / Save"),ee(e,"class","svelte-134tvrp"),ee(r,"id","d3fend-container"),ee(r,"class","dropdown-menu svelte-134tvrp")},m(f,h){A(f,r,h),M(r,e),M(r,t),o&&o.m(r,null),s=!0,l||(a=[Aa(Bp.call(null,e)),pe(e,"click",Ot(n[19])),pe(e,"keyup",Ot(n[20])),pe(e,"keydown",Ot(n[21])),Aa(Op.call(null,r)),pe(r,"outsideclick",n[7])],l=!0)},p(f,h){o&&o.p&&(!s||h&131072)&&Rt(o,u,f,f[17],s?Bt(u,f[17],h,dv):St(f[17]),Df)},i(f){s||(se(o,f),f&&Kl(()=>{s&&(i||(i=Ia(r,Ma,{delay:50,duration:200,axis:"y"},!0)),i.run(1))}),s=!0)},o(f){fe(o,f),f&&(i||(i=Ia(r,Ma,{delay:50,duration:200,axis:"y"},!1)),i.run(0)),s=!1},d(f){f&&m(r),o&&o.d(f),f&&i&&i.end(),l=!1,it(a)}}}function hv(n){let r,e,t,i,s,l,a,u,o,f,h=n[2]&&Af(n);return{c(){r=Q("div"),e=Q("div"),t=Q("div"),i=Q("span"),s=V(n[1]),l=ie(),h&&h.c(),this.h()},l(d){r=Y(d,"DIV",{class:!0,style:!0});var c=we(r);e=Y(c,"DIV",{class:!0,role:!0,tabindex:!0});var _=we(e);t=Y(_,"DIV",{class:!0});var w=we(t);i=Y(w,"SPAN",{class:!0});var k=we(i);s=H(k,n[1]),k.forEach(m),w.forEach(m),l=le(_),h&&h.l(_),_.forEach(m),c.forEach(m),this.h()},h(){ee(i,"class","selected svelte-134tvrp"),ee(t,"class","select autocomplete-dropdown svelte-134tvrp"),ee(e,"class",a="dropdown "+(n[2]?"active":"")+" svelte-134tvrp"),ee(e,"role","button"),ee(e,"tabindex","0"),ee(r,"class","container svelte-134tvrp"),st(r,"--input-color",n[0])},m(d,c){A(d,r,c),M(r,e),M(e,t),M(t,i),M(i,s),M(e,l),h&&h.m(e,null),u=!0,o||(f=[pe(e,"click",n[8]),pe(e,"keydown",n[22])],o=!0)},p(d,[c]){(!u||c&2)&&me(s,d[1]),d[2]?h?(h.p(d,c),c&4&&se(h,1)):(h=Af(d),h.c(),se(h,1),h.m(e,null)):h&&(et(),fe(h,1,1,()=>{h=null}),tt()),(!u||c&4&&a!==(a="dropdown "+(d[2]?"active":"")+" svelte-134tvrp"))&&ee(e,"class",a),(!u||c&1)&&st(r,"--input-color",d[0])},i(d){u||(se(h),u=!0)},o(d){fe(h),u=!1},d(d){d&&m(r),h&&h.d(),o=!1,it(f)}}}function _v(n,r,e){let t,i,s,l,{$$slots:a={},$$scope:u}=r,{node_id:o}=r,{element_id:f}=r,{input_color:h="white"}=r,{place_holder:d="< d3fend class >"}=r,{flow_store_hook:c=qr}=r,{data_save_key:_="d3f_class"}=r;const w=Kt(!1);Ye(n,w,O=>e(2,l=O));const k=Kt(null);Ye(n,k,O=>e(24,i=O));const C=c();Ye(n,C,O=>e(25,s=O));const j={ItemTree:iv,ItemList:tv,ItemProperty:cv};let S;hs(()=>{ut(k,i="",i)});function F(){ut(w,l=!1,l),ut(k,i="",i)}function b(O){l?F():ut(w,l=!0,l)}function y(O,N,X="d3f_class"){let L=N["rdfs:label"];Array.isArray(N["rdfs:label"])&&(L=N["rdfs:label"][0]),s.forEach(ae=>{ae.id===o&&(ae.data=Object.assign(Object.assign({},ae.data),{[X]:N["@id"],label:L}))}),C.set(s),F()}function v(O){clearTimeout(S),S=setTimeout(()=>{ut(k,i=O.target.value,i)},400)}function B(O){const N=O.target.value;y(O,{"rdfs:label":N,"@id":N},_)}function T(O){yr.call(this,n,O)}const U=O=>v(O),E=O=>Vn(O,B),P=O=>Vn(O,b);return n.$$set=O=>{"node_id"in O&&e(12,o=O.node_id),"element_id"in O&&e(13,f=O.element_id),"input_color"in O&&e(0,h=O.input_color),"place_holder"in O&&e(14,d=O.place_holder),"flow_store_hook"in O&&e(15,c=O.flow_store_hook),"data_save_key"in O&&e(16,_=O.data_save_key),"$$scope"in O&&e(17,u=O.$$scope)},n.$$.update=()=>{n.$$.dirty&24576&&e(1,t=f||d)},[h,t,l,w,k,C,j,F,b,y,v,B,o,f,d,c,_,u,a,T,U,E,P]}class Zn extends dt{constructor(r){super(),ht(this,r,_v,hv,Je,{node_id:12,element_id:13,input_color:0,place_holder:14,flow_store_hook:15,data_save_key:16})}}function Tf(n,r,e){const t=n.slice();return t[32]=r[e],t[33]=r,t[34]=e,t}function Cf(n){let r,e;return r=new ft({props:{type:"target",class:"customHandle",position:nt.Left,id:"target",style:n[16](),isConnectableStart:!1,isConnectable:n[1]}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i[0]&2&&(s.isConnectable=t[1]),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function Nf(n){let r=n[7],e,t,i=If(n);return{c(){i.c(),e=Ae()},l(s){i.l(s),e=Ae()},m(s,l){i.m(s,l),A(s,e,l),t=!0},p(s,l){l[0]&128&&Je(r,r=s[7])?(et(),fe(i,1,1,Le),tt(),i=If(s),i.c(),se(i,1),i.m(e.parentNode,e)):i.p(s,l)},i(s){t||(se(i),t=!0)},o(s){fe(i),t=!1},d(s){s&&m(e),i.d(s)}}}function If(n){let r,e,t,i,s,l,a,u;return r=new ft({props:{type:"source",position:nt.Top,id:"source",style:n[17](),isConnectable:n[1]}}),t=new ft({props:{type:"source",position:nt.Left,id:"source",style:n[17](),isConnectable:n[1]}}),s=new ft({props:{type:"source",position:nt.Right,id:"source",style:n[17](),isConnectable:n[1]}}),a=new ft({props:{type:"source",position:nt.Bottom,id:"source",style:n[17](),isConnectable:n[1]}}),{c(){Ce(r.$$.fragment),e=ie(),Ce(t.$$.fragment),i=ie(),Ce(s.$$.fragment),l=ie(),Ce(a.$$.fragment)},l(o){Ne(r.$$.fragment,o),e=le(o),Ne(t.$$.fragment,o),i=le(o),Ne(s.$$.fragment,o),l=le(o),Ne(a.$$.fragment,o)},m(o,f){Ie(r,o,f),A(o,e,f),Ie(t,o,f),A(o,i,f),Ie(s,o,f),A(o,l,f),Ie(a,o,f),u=!0},p(o,f){const h={};f[0]&2&&(h.isConnectable=o[1]),r.$set(h);const d={};f[0]&2&&(d.isConnectable=o[1]),t.$set(d);const c={};f[0]&2&&(c.isConnectable=o[1]),s.$set(c);const _={};f[0]&2&&(_.isConnectable=o[1]),a.$set(_)},i(o){u||(se(r.$$.fragment,o),se(t.$$.fragment,o),se(s.$$.fragment,o),se(a.$$.fragment,o),u=!0)},o(o){fe(r.$$.fragment,o),fe(t.$$.fragment,o),fe(s.$$.fragment,o),fe(a.$$.fragment,o),u=!1},d(o){o&&(m(e),m(i),m(l)),Fe(r,o),Fe(t,o),Fe(s,o),Fe(a,o)}}}function pv(n){let r,e;return r=new n[35].ItemList({props:{list:Mc,filter_value_store:n[36],select_item:n[37]}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i[1]&32&&(s.filter_value_store=t[36]),i[1]&64&&(s.select_item=t[37]),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function Ff(n){let r,e=xe(n[0].user_properties),t=[];for(let i=0;i<e.length;i+=1)t[i]=Rf(Tf(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Ae()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Ae()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);A(i,r,s)},p(i,s){if(s[0]&801){e=xe(i[0].user_properties);let l;for(l=0;l<e.length;l+=1){const a=Tf(i,e,l);t[l]?t[l].p(a,s):(t[l]=Rf(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),mt(t,i)}}}function Rf(n){let r,e,t,i,s,l,a,u,o;function f(..._){return n[26](n[34],..._)}function h(){n[27].call(t,n[34])}function d(..._){return n[28](n[34],..._)}function c(){n[29].call(l,n[34])}return{c(){r=Q("div"),e=Q("div"),t=Q("input"),i=ie(),s=Q("div"),l=Q("input"),a=ie(),this.h()},l(_){r=Y(_,"DIV",{class:!0});var w=we(r);e=Y(w,"DIV",{class:!0});var k=we(e);t=Y(k,"INPUT",{placeholder:!0}),k.forEach(m),i=le(w),s=Y(w,"DIV",{class:!0});var C=we(s);l=Y(C,"INPUT",{placeholder:!0}),C.forEach(m),a=le(w),w.forEach(m),this.h()},h(){ee(t,"placeholder","property"),ee(e,"class","user-property flex-column"),ee(l,"placeholder","value"),ee(s,"class","user-value flex-column flex-grow-3"),ee(r,"class","user-properties flex")},m(_,w){A(_,r,w),M(r,e),M(e,t),Me(t,n[9][n[34]][0]),M(r,i),M(r,s),M(s,l),Me(l,n[8][n[34]][1]),M(r,a),u||(o=[pe(t,"input",f),pe(t,"input",h),pe(l,"input",d),pe(l,"input",c)],u=!0)},p(_,w){n=_,w[0]&512&&t.value!==n[9][n[34]][0]&&Me(t,n[9][n[34]][0]),w[0]&256&&l.value!==n[8][n[34]][1]&&Me(l,n[8][n[34]][1])},d(_){_&&m(r),u=!1,it(o)}}}function gv(n){let r=n[4].inProgress,e,t,i,s,l,a,u,o,f,h,d,c,_,w,k,C,j,S,F,b,y,v,B="+",T,U,E,P=Cf(n),O=!n[6]&&Nf(n);l=new ln({props:{isVisible:n[2]}}),_=new Zn({props:{node_id:n[3],element_id:n[0].d3f_class,input_color:"#ffc3c7",$$slots:{default:[pv,({R:X,filter_value_store:L,select_item:ae})=>({35:X,36:L,37:ae}),({R:X,filter_value_store:L,select_item:ae})=>[0,(X?16:0)|(L?32:0)|(ae?64:0)]]},$$scope:{ctx:n}}});let N=n[0].user_properties&&Ff(n);return{c(){P.c(),e=ie(),t=Q("div"),O&&O.c(),i=ie(),s=Q("div"),Ce(l.$$.fragment),a=ie(),u=Q("i"),o=V(`Attack Action
        `),f=Q("input"),h=ie(),d=Q("br"),c=ie(),Ce(_.$$.fragment),w=ie(),k=Q("div"),C=Q("input"),S=ie(),F=Q("br"),b=ie(),N&&N.c(),y=ie(),v=Q("button"),v.textContent=B,this.h()},l(X){P.l(X),e=le(X),t=Y(X,"DIV",{class:!0});var L=we(t);O&&O.l(L),i=le(L),s=Y(L,"DIV",{class:!0});var ae=we(s);Ne(l.$$.fragment,ae),a=le(ae),u=Y(ae,"I",{});var K=we(u);o=H(K,`Attack Action
        `),f=Y(K,"INPUT",{class:!0,type:!0,style:!0}),K.forEach(m),h=le(ae),d=Y(ae,"BR",{}),c=le(ae),Ne(_.$$.fragment,ae),w=le(ae),k=Y(ae,"DIV",{});var G=we(k);C=Y(G,"INPUT",{class:!0,type:!0,style:!0}),G.forEach(m),S=le(ae),F=Y(ae,"BR",{}),b=le(ae),N&&N.l(ae),y=le(ae),v=Y(ae,"BUTTON",{"data-svelte-h":!0}),We(v)!=="svelte-y9choq"&&(v.textContent=B),ae.forEach(m),L.forEach(m),this.h()},h(){ee(f,"class","nodrag sequence"),ee(f,"type","text"),st(f,"background","#ffc3c7"),ee(C,"class","nodrag"),ee(C,"type","text"),st(C,"text-align","center"),st(C,"background","#ffc3c7"),st(C,"font-weight","bold"),C.value=j=n[0].label||" < label >",ee(s,"class","attack-node node-inner svelte-pkj1to"),ee(t,"class","attack-node node svelte-pkj1to")},m(X,L){P.m(X,L),A(X,e,L),A(X,t,L),O&&O.m(t,null),M(t,i),M(t,s),Ie(l,s,null),M(s,a),M(s,u),M(u,o),M(u,f),Me(f,n[10]),M(s,h),M(s,d),M(s,c),Ie(_,s,null),M(s,w),M(s,k),M(k,C),M(s,S),M(s,F),M(s,b),N&&N.m(s,null),M(s,y),M(s,v),T=!0,U||(E=[pe(f,"input",n[23]),pe(f,"input",n[24]),pe(C,"input",n[25]),pe(v,"click",n[11]),pe(t,"click",n[12]),pe(t,"mouseenter",n[14]),pe(t,"mouseleave",n[15])],U=!0)},p(X,L){L[0]&16&&Je(r,r=X[4].inProgress)?(et(),fe(P,1,1,Le),tt(),P=Cf(X),P.c(),se(P,1),P.m(e.parentNode,e)):P.p(X,L),X[6]?O&&(et(),fe(O,1,1,()=>{O=null}),tt()):O?(O.p(X,L),L[0]&64&&se(O,1)):(O=Nf(X),O.c(),se(O,1),O.m(t,i));const ae={};L[0]&4&&(ae.isVisible=X[2]),l.$set(ae),L[0]&1024&&f.value!==X[10]&&Me(f,X[10]);const K={};L[0]&8&&(K.node_id=X[3]),L[0]&1&&(K.element_id=X[0].d3f_class),L[1]&224&&(K.$$scope={dirty:L,ctx:X}),_.$set(K),(!T||L[0]&1&&j!==(j=X[0].label||" < label >")&&C.value!==j)&&(C.value=j),X[0].user_properties?N?N.p(X,L):(N=Ff(X),N.c(),N.m(s,y)):N&&(N.d(1),N=null)},i(X){T||(se(P),se(O),se(l.$$.fragment,X),se(_.$$.fragment,X),T=!0)},o(X){fe(P),fe(O),fe(l.$$.fragment,X),fe(_.$$.fragment,X),T=!1},d(X){X&&(m(e),m(t)),P.d(X),O&&O.d(),Fe(l),Fe(_),N&&N.d(),U=!1,it(E)}}}function mv(n,r,e){let t,i,s,l,a,u;Ye(n,sr,K=>e(31,a=K)),Ye(n,Qe,K=>e(5,u=K));var o,f,h,d,c;let{data:_}=r,{isConnectable:w}=r,{selected:k=void 0}=r;_.user_properties=[];let{id:C}=r;function j(){S(),_.user_properties.push(["",""])}function S(){for(let K=0;K<a.length;K++)a[K].data==_&&ut(Qe,u=a[K],u)}const F=Yr();Ye(n,F,K=>e(4,l=K));let b=!1,y=!1;function v(){e(7,y=!0)}function B(){e(7,y=!1)}function T(){return l.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function U(){return y?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const E=K=>{e(0,_.sequence=K.currentTarget.value,_),ut(Qe,u.data.sequence=_.sequence,u)};function P(){t=this.value,e(10,t),e(0,_),e(5,u),e(19,f)}const O=K=>{e(0,_.label=K.currentTarget.value,_)},N=(K,G)=>{e(0,_.user_properties[K][0]=G.currentTarget.value,_),ut(Qe,u.data.user_properties[K][0]=G.currentTarget.value,u)};function X(K){i[K][0]=this.value,e(9,i),e(0,_),e(5,u),e(20,h)}const L=(K,G)=>{e(0,_.user_properties[K][1]=G.currentTarget.value,_),ut(Qe,u.data.user_properties[K][1]=G.currentTarget.value,u)};function ae(K){s[K][1]=this.value,e(8,s),e(0,_),e(5,u),e(21,d)}return n.$$set=K=>{"data"in K&&e(0,_=K.data),"isConnectable"in K&&e(1,w=K.isConnectable),"selected"in K&&e(2,k=K.selected),"id"in K&&e(3,C=K.id)},n.$$.update=()=>{n.$$.dirty[0]&262177&&_!=null&&_.label,n.$$.dirty[0]&524321&&e(10,t=(_==null?void 0:_.sequence)||"#"),n.$$.dirty[0]&1048609&&e(9,i=(_==null?void 0:_.user_properties)||(e(20,h=u==null?void 0:u.data)===null||h===void 0?void 0:h.user_properties)||"< Property >"),n.$$.dirty[0]&2097185&&e(8,s=(_==null?void 0:_.user_properties)||(e(21,d=u==null?void 0:u.data)===null||d===void 0?void 0:d.user_properties)||"< Value >"),n.$$.dirty[0]&4194328&&e(6,b=(e(22,c=l.toHandle)===null||c===void 0?void 0:c.nodeId)==C)},[_,w,k,C,l,u,b,y,s,i,t,j,S,F,v,B,T,U,o,f,h,d,c,E,P,O,N,X,L,ae]}class vv extends dt{constructor(r){super(),ht(this,r,mv,gv,Je,{data:0,isConnectable:1,selected:2,id:3},null,[-1,-1])}}function Sf(n,r,e){const t=n.slice();return t[29]=r[e],t[30]=r,t[31]=e,t}function Bf(n){let r,e;return r=new ft({props:{type:"target",class:"customHandle",position:nt.Left,id:"target",style:n[16](),isConnectableStart:!1,isConnectable:n[1]}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i[0]&2&&(s.isConnectable=t[1]),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function Of(n){let r=n[7],e,t,i=Lf(n);return{c(){i.c(),e=Ae()},l(s){i.l(s),e=Ae()},m(s,l){i.m(s,l),A(s,e,l),t=!0},p(s,l){l[0]&128&&Je(r,r=s[7])?(et(),fe(i,1,1,Le),tt(),i=Lf(s),i.c(),se(i,1),i.m(e.parentNode,e)):i.p(s,l)},i(s){t||(se(i),t=!0)},o(s){fe(i),t=!1},d(s){s&&m(e),i.d(s)}}}function Lf(n){let r,e,t,i,s,l,a,u;return r=new ft({props:{type:"source",position:nt.Top,id:"source",style:n[17](),isConnectable:n[1]}}),t=new ft({props:{type:"source",position:nt.Left,id:"source",style:n[17](),isConnectable:n[1]}}),s=new ft({props:{type:"source",position:nt.Right,id:"source",style:n[17](),isConnectable:n[1]}}),a=new ft({props:{type:"source",position:nt.Bottom,id:"source",style:n[17](),isConnectable:n[1]}}),{c(){Ce(r.$$.fragment),e=ie(),Ce(t.$$.fragment),i=ie(),Ce(s.$$.fragment),l=ie(),Ce(a.$$.fragment)},l(o){Ne(r.$$.fragment,o),e=le(o),Ne(t.$$.fragment,o),i=le(o),Ne(s.$$.fragment,o),l=le(o),Ne(a.$$.fragment,o)},m(o,f){Ie(r,o,f),A(o,e,f),Ie(t,o,f),A(o,i,f),Ie(s,o,f),A(o,l,f),Ie(a,o,f),u=!0},p(o,f){const h={};f[0]&2&&(h.isConnectable=o[1]),r.$set(h);const d={};f[0]&2&&(d.isConnectable=o[1]),t.$set(d);const c={};f[0]&2&&(c.isConnectable=o[1]),s.$set(c);const _={};f[0]&2&&(_.isConnectable=o[1]),a.$set(_)},i(o){u||(se(r.$$.fragment,o),se(t.$$.fragment,o),se(s.$$.fragment,o),se(a.$$.fragment,o),u=!0)},o(o){fe(r.$$.fragment,o),fe(t.$$.fragment,o),fe(s.$$.fragment,o),fe(a.$$.fragment,o),u=!1},d(o){o&&(m(e),m(i),m(l)),Fe(r,o),Fe(t,o),Fe(s,o),Fe(a,o)}}}function bv(n){let r,e;return r=new n[32].ItemList({props:{list:jc,filter_value_store:n[33],select_item:n[34]}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i[1]&4&&(s.filter_value_store=t[33]),i[1]&8&&(s.select_item=t[34]),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function Uf(n){let r,e=xe(n[0].user_properties),t=[];for(let i=0;i<e.length;i+=1)t[i]=Pf(Sf(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Ae()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Ae()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);A(i,r,s)},p(i,s){if(s[0]&801){e=xe(i[0].user_properties);let l;for(l=0;l<e.length;l+=1){const a=Sf(i,e,l);t[l]?t[l].p(a,s):(t[l]=Pf(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),mt(t,i)}}}function Pf(n){let r,e,t,i,s,l,a,u,o;function f(..._){return n[24](n[31],..._)}function h(){n[25].call(t,n[31])}function d(..._){return n[26](n[31],..._)}function c(){n[27].call(l,n[31])}return{c(){r=Q("div"),e=Q("div"),t=Q("input"),i=ie(),s=Q("div"),l=Q("input"),a=ie(),this.h()},l(_){r=Y(_,"DIV",{class:!0});var w=we(r);e=Y(w,"DIV",{class:!0});var k=we(e);t=Y(k,"INPUT",{placeholder:!0}),k.forEach(m),i=le(w),s=Y(w,"DIV",{class:!0});var C=we(s);l=Y(C,"INPUT",{placeholder:!0}),C.forEach(m),a=le(w),w.forEach(m),this.h()},h(){ee(t,"placeholder","property"),ee(e,"class","user-property flex-column"),ee(l,"placeholder","value"),ee(s,"class","user-value flex-column flex-grow-3"),ee(r,"class","user-properties flex")},m(_,w){A(_,r,w),M(r,e),M(e,t),Me(t,n[9][n[31]][0]),M(r,i),M(r,s),M(s,l),Me(l,n[8][n[31]][1]),M(r,a),u||(o=[pe(t,"input",f),pe(t,"input",h),pe(l,"input",d),pe(l,"input",c)],u=!0)},p(_,w){n=_,w[0]&512&&t.value!==n[9][n[31]][0]&&Me(t,n[9][n[31]][0]),w[0]&256&&l.value!==n[8][n[31]][1]&&Me(l,n[8][n[31]][1])},d(_){_&&m(r),u=!1,it(o)}}}function wv(n){let r=n[4].inProgress,e,t,i,s,l,a,u,o="Vulnerability",f,h,d,c,_,w,k,C,j,S,F,b="+",y,v,B,T=Bf(n),U=!n[6]&&Of(n);l=new ln({props:{isVisible:n[2]}}),_=new Zn({props:{node_id:n[3],element_id:n[0].d3f_class,input_color:"#f9d999",place_holder:"< weakness >",$$slots:{default:[bv,({R:P,filter_value_store:O,select_item:N})=>({32:P,33:O,34:N}),({R:P,filter_value_store:O,select_item:N})=>[0,(P?2:0)|(O?4:0)|(N?8:0)]]},$$scope:{ctx:n}}});let E=n[0].user_properties&&Uf(n);return{c(){T.c(),e=ie(),t=Q("div"),U&&U.c(),i=ie(),s=Q("div"),Ce(l.$$.fragment),a=ie(),u=Q("i"),u.textContent=o,f=ie(),h=Q("br"),d=ie(),c=Q("div"),Ce(_.$$.fragment),w=ie(),k=Q("div"),C=Q("input"),j=ie(),E&&E.c(),S=ie(),F=Q("button"),F.textContent=b,this.h()},l(P){T.l(P),e=le(P),t=Y(P,"DIV",{class:!0});var O=we(t);U&&U.l(O),i=le(O),s=Y(O,"DIV",{class:!0});var N=we(s);Ne(l.$$.fragment,N),a=le(N),u=Y(N,"I",{"data-svelte-h":!0}),We(u)!=="svelte-qgxj0w"&&(u.textContent=o),f=le(N),h=Y(N,"BR",{}),d=le(N),c=Y(N,"DIV",{});var X=we(c);Ne(_.$$.fragment,X),X.forEach(m),w=le(N),k=Y(N,"DIV",{});var L=we(k);C=Y(L,"INPUT",{class:!0,type:!0,style:!0}),j=le(L),E&&E.l(L),S=le(L),F=Y(L,"BUTTON",{"data-svelte-h":!0}),We(F)!=="svelte-y9choq"&&(F.textContent=b),L.forEach(m),N.forEach(m),O.forEach(m),this.h()},h(){ee(C,"class","nodrag label"),ee(C,"type","text"),st(C,"background","#f9d999"),ee(s,"class","vulnerability node-inner svelte-17a4qd7"),ee(t,"class","vulnerability node svelte-17a4qd7")},m(P,O){T.m(P,O),A(P,e,O),A(P,t,O),U&&U.m(t,null),M(t,i),M(t,s),Ie(l,s,null),M(s,a),M(s,u),M(s,f),M(s,h),M(s,d),M(s,c),Ie(_,c,null),M(s,w),M(s,k),M(k,C),Me(C,n[10]),M(k,j),E&&E.m(k,null),M(k,S),M(k,F),y=!0,v||(B=[pe(C,"input",n[22]),pe(C,"input",n[23]),pe(F,"click",n[11]),pe(t,"click",n[12]),pe(t,"mouseenter",n[14]),pe(t,"mouseleave",n[15])],v=!0)},p(P,O){O[0]&16&&Je(r,r=P[4].inProgress)?(et(),fe(T,1,1,Le),tt(),T=Bf(P),T.c(),se(T,1),T.m(e.parentNode,e)):T.p(P,O),P[6]?U&&(et(),fe(U,1,1,()=>{U=null}),tt()):U?(U.p(P,O),O[0]&64&&se(U,1)):(U=Of(P),U.c(),se(U,1),U.m(t,i));const N={};O[0]&4&&(N.isVisible=P[2]),l.$set(N);const X={};O[0]&8&&(X.node_id=P[3]),O[0]&1&&(X.element_id=P[0].d3f_class),O[1]&28&&(X.$$scope={dirty:O,ctx:P}),_.$set(X),O[0]&1024&&C.value!==P[10]&&Me(C,P[10]),P[0].user_properties?E?E.p(P,O):(E=Uf(P),E.c(),E.m(k,S)):E&&(E.d(1),E=null)},i(P){y||(se(T),se(U),se(l.$$.fragment,P),se(_.$$.fragment,P),y=!0)},o(P){fe(T),fe(U),fe(l.$$.fragment,P),fe(_.$$.fragment,P),y=!1},d(P){P&&(m(e),m(t)),T.d(P),U&&U.d(),Fe(l),Fe(_),E&&E.d(),v=!1,it(B)}}}function yv(n,r,e){let t,i,s,l,a,u;Ye(n,sr,L=>e(28,a=L)),Ye(n,Qe,L=>e(5,u=L));var o,f,h,d;let{data:c}=r,{isConnectable:_}=r,{selected:w=void 0}=r,{id:k}=r;c.user_properties=[];function C(){j(),c.user_properties.push(["",""])}function j(){for(let L=0;L<a.length;L++)a[L].data==c&&ut(Qe,u=a[L],u)}const S=Yr();Ye(n,S,L=>e(4,l=L));let F=!1,b=!1;function y(){e(7,b=!0)}function v(){e(7,b=!1)}function B(){return l.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function T(){return b?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const U=L=>{e(0,c.label=L.currentTarget.value,c),ut(Qe,u.data.label=c.label,u)};function E(){t=this.value,e(10,t),e(0,c),e(5,u),e(18,o)}const P=(L,ae)=>{e(0,c.user_properties[L][0]=ae.currentTarget.value,c),ut(Qe,u.data.user_properties[L][0]=ae.currentTarget.value,u)};function O(L){i[L][0]=this.value,e(9,i),e(0,c),e(5,u),e(19,f)}const N=(L,ae)=>{e(0,c.user_properties[L][1]=ae.currentTarget.value,c),ut(Qe,u.data.user_properties[L][1]=ae.currentTarget.value,u)};function X(L){s[L][1]=this.value,e(8,s),e(0,c),e(5,u),e(20,h)}return n.$$set=L=>{"data"in L&&e(0,c=L.data),"isConnectable"in L&&e(1,_=L.isConnectable),"selected"in L&&e(2,w=L.selected),"id"in L&&e(3,k=L.id)},n.$$.update=()=>{n.$$.dirty[0]&262177&&e(10,t=(c==null?void 0:c.label)||"< label >"),n.$$.dirty[0]&524321&&e(9,i=(c==null?void 0:c.user_properties)||(e(19,f=u==null?void 0:u.data)===null||f===void 0?void 0:f.user_properties)||"< Property >"),n.$$.dirty[0]&1048609&&e(8,s=(c==null?void 0:c.user_properties)||(e(20,h=u==null?void 0:u.data)===null||h===void 0?void 0:h.user_properties)||"< Value >"),n.$$.dirty[0]&2097176&&e(6,F=(e(21,d=l.toHandle)===null||d===void 0?void 0:d.nodeId)==k)},[c,_,w,k,l,u,F,b,s,i,t,C,j,S,y,v,B,T,o,f,h,d,U,E,P,O,N,X]}class kv extends dt{constructor(r){super(),ht(this,r,yv,wv,Je,{data:0,isConnectable:1,selected:2,id:3},null,[-1,-1])}}function Mf(n,r,e){const t=n.slice();return t[29]=r[e],t[30]=r,t[31]=e,t}function qf(n){let r,e;return r=new ft({props:{type:"target",class:"customHandle",position:nt.Left,id:"target",style:n[16](),isConnectableStart:!1,isConnectable:n[1]}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i[0]&2&&(s.isConnectable=t[1]),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function jf(n){let r=n[7],e,t,i=Vf(n);return{c(){i.c(),e=Ae()},l(s){i.l(s),e=Ae()},m(s,l){i.m(s,l),A(s,e,l),t=!0},p(s,l){l[0]&128&&Je(r,r=s[7])?(et(),fe(i,1,1,Le),tt(),i=Vf(s),i.c(),se(i,1),i.m(e.parentNode,e)):i.p(s,l)},i(s){t||(se(i),t=!0)},o(s){fe(i),t=!1},d(s){s&&m(e),i.d(s)}}}function Vf(n){let r,e,t,i,s,l,a,u;return r=new ft({props:{type:"source",position:nt.Top,id:"source",style:n[17](),isConnectable:n[1]}}),t=new ft({props:{type:"source",position:nt.Left,id:"source",style:n[17](),isConnectable:n[1]}}),s=new ft({props:{type:"source",position:nt.Right,id:"source",style:n[17](),isConnectable:n[1]}}),a=new ft({props:{type:"source",position:nt.Bottom,id:"source",style:n[17](),isConnectable:n[1]}}),{c(){Ce(r.$$.fragment),e=ie(),Ce(t.$$.fragment),i=ie(),Ce(s.$$.fragment),l=ie(),Ce(a.$$.fragment)},l(o){Ne(r.$$.fragment,o),e=le(o),Ne(t.$$.fragment,o),i=le(o),Ne(s.$$.fragment,o),l=le(o),Ne(a.$$.fragment,o)},m(o,f){Ie(r,o,f),A(o,e,f),Ie(t,o,f),A(o,i,f),Ie(s,o,f),A(o,l,f),Ie(a,o,f),u=!0},p(o,f){const h={};f[0]&2&&(h.isConnectable=o[1]),r.$set(h);const d={};f[0]&2&&(d.isConnectable=o[1]),t.$set(d);const c={};f[0]&2&&(c.isConnectable=o[1]),s.$set(c);const _={};f[0]&2&&(_.isConnectable=o[1]),a.$set(_)},i(o){u||(se(r.$$.fragment,o),se(t.$$.fragment,o),se(s.$$.fragment,o),se(a.$$.fragment,o),u=!0)},o(o){fe(r.$$.fragment,o),fe(t.$$.fragment,o),fe(s.$$.fragment,o),fe(a.$$.fragment,o),u=!1},d(o){o&&(m(e),m(i),m(l)),Fe(r,o),Fe(t,o),Fe(s,o),Fe(a,o)}}}function Ev(n){let r,e;return r=new n[32].ItemList({props:{list:Pc,filter_value_store:n[33],select_item:n[34]}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i[1]&4&&(s.filter_value_store=t[33]),i[1]&8&&(s.select_item=t[34]),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function Hf(n){let r,e=xe(n[0].user_properties),t=[];for(let i=0;i<e.length;i+=1)t[i]=zf(Mf(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Ae()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Ae()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);A(i,r,s)},p(i,s){if(s[0]&801){e=xe(i[0].user_properties);let l;for(l=0;l<e.length;l+=1){const a=Mf(i,e,l);t[l]?t[l].p(a,s):(t[l]=zf(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),mt(t,i)}}}function zf(n){let r,e,t,i,s,l,a,u,o;function f(..._){return n[24](n[31],..._)}function h(){n[25].call(t,n[31])}function d(..._){return n[26](n[31],..._)}function c(){n[27].call(l,n[31])}return{c(){r=Q("div"),e=Q("div"),t=Q("input"),i=ie(),s=Q("div"),l=Q("input"),a=ie(),this.h()},l(_){r=Y(_,"DIV",{class:!0});var w=we(r);e=Y(w,"DIV",{class:!0});var k=we(e);t=Y(k,"INPUT",{placeholder:!0}),k.forEach(m),i=le(w),s=Y(w,"DIV",{class:!0});var C=we(s);l=Y(C,"INPUT",{placeholder:!0}),C.forEach(m),a=le(w),w.forEach(m),this.h()},h(){ee(t,"placeholder","property"),ee(e,"class","user-property flex-column"),ee(l,"placeholder","value"),ee(s,"class","user-value flex-column flex-grow-3"),ee(r,"class","user-properties flex")},m(_,w){A(_,r,w),M(r,e),M(e,t),Me(t,n[9][n[31]][0]),M(r,i),M(r,s),M(s,l),Me(l,n[8][n[31]][1]),M(r,a),u||(o=[pe(t,"input",f),pe(t,"input",h),pe(l,"input",d),pe(l,"input",c)],u=!0)},p(_,w){n=_,w[0]&512&&t.value!==n[9][n[31]][0]&&Me(t,n[9][n[31]][0]),w[0]&256&&l.value!==n[8][n[31]][1]&&Me(l,n[8][n[31]][1])},d(_){_&&m(r),u=!1,it(o)}}}function Dv(n){let r=n[4].inProgress,e,t,i,s,l,a="Artifact",u,o,f,h,d,c,_,w,k,C,j="+",S,F,b,y=qf(n),v=!n[6]&&jf(n);f=new ln({props:{isVisible:n[2]}}),d=new Zn({props:{node_id:n[3],element_id:n[0].d3f_class,input_color:"#fff4dd",$$slots:{default:[Ev,({R:T,filter_value_store:U,select_item:E})=>({32:T,33:U,34:E}),({R:T,filter_value_store:U,select_item:E})=>[0,(T?2:0)|(U?4:0)|(E?8:0)]]},$$scope:{ctx:n}}});let B=n[0].user_properties&&Hf(n);return{c(){y.c(),e=ie(),t=Q("div"),v&&v.c(),i=ie(),s=Q("div"),l=Q("i"),l.textContent=a,u=Q("br"),o=ie(),Ce(f.$$.fragment),h=ie(),Ce(d.$$.fragment),c=ie(),_=Q("input"),w=ie(),B&&B.c(),k=ie(),C=Q("button"),C.textContent=j,this.h()},l(T){y.l(T),e=le(T),t=Y(T,"DIV",{class:!0});var U=we(t);v&&v.l(U),i=le(U),s=Y(U,"DIV",{class:!0});var E=we(s);l=Y(E,"I",{"data-svelte-h":!0}),We(l)!=="svelte-148na2y"&&(l.textContent=a),u=Y(E,"BR",{}),o=le(E),Ne(f.$$.fragment,E),h=le(E),Ne(d.$$.fragment,E),c=le(E),_=Y(E,"INPUT",{class:!0,type:!0,style:!0}),w=le(E),B&&B.l(E),k=le(E),C=Y(E,"BUTTON",{"data-svelte-h":!0}),We(C)!=="svelte-y9choq"&&(C.textContent=j),E.forEach(m),U.forEach(m),this.h()},h(){ee(_,"class","nodrag label"),ee(_,"type","text"),st(_,"background","#fff4dd"),_.readOnly=!0,ee(s,"class","node-inner"),ee(t,"class","artifact node svelte-1q2d78v")},m(T,U){y.m(T,U),A(T,e,U),A(T,t,U),v&&v.m(t,null),M(t,i),M(t,s),M(s,l),M(s,u),M(s,o),Ie(f,s,null),M(s,h),Ie(d,s,null),M(s,c),M(s,_),Me(_,n[10]),M(s,w),B&&B.m(s,null),M(s,k),M(s,C),S=!0,F||(b=[pe(_,"input",n[22]),pe(_,"input",n[23]),pe(C,"click",n[11]),pe(t,"click",n[12]),pe(t,"mouseenter",n[14]),pe(t,"mouseleave",n[15])],F=!0)},p(T,U){U[0]&16&&Je(r,r=T[4].inProgress)?(et(),fe(y,1,1,Le),tt(),y=qf(T),y.c(),se(y,1),y.m(e.parentNode,e)):y.p(T,U),T[6]?v&&(et(),fe(v,1,1,()=>{v=null}),tt()):v?(v.p(T,U),U[0]&64&&se(v,1)):(v=jf(T),v.c(),se(v,1),v.m(t,i));const E={};U[0]&4&&(E.isVisible=T[2]),f.$set(E);const P={};U[0]&8&&(P.node_id=T[3]),U[0]&1&&(P.element_id=T[0].d3f_class),U[1]&28&&(P.$$scope={dirty:U,ctx:T}),d.$set(P),U[0]&1024&&_.value!==T[10]&&Me(_,T[10]),T[0].user_properties?B?B.p(T,U):(B=Hf(T),B.c(),B.m(s,k)):B&&(B.d(1),B=null)},i(T){S||(se(y),se(v),se(f.$$.fragment,T),se(d.$$.fragment,T),S=!0)},o(T){fe(y),fe(v),fe(f.$$.fragment,T),fe(d.$$.fragment,T),S=!1},d(T){T&&(m(e),m(t)),y.d(T),v&&v.d(),Fe(f),Fe(d),B&&B.d(),F=!1,it(b)}}}function Av(n,r,e){let t,i,s,l,a,u;Ye(n,sr,L=>e(28,a=L)),Ye(n,Qe,L=>e(5,u=L));var o,f,h,d;let{data:c}=r,{isConnectable:_}=r,{selected:w=void 0}=r;c.user_properties=[];let{id:k}=r;function C(){j(),c.user_properties.push(["",""])}function j(){for(let L=0;L<a.length;L++)a[L].data==c&&ut(Qe,u=a[L],u)}const S=Yr();Ye(n,S,L=>e(4,l=L));let F=!1,b=!1;function y(){e(7,b=!0)}function v(){e(7,b=!1)}function B(){return l.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function T(){return b?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const U=L=>{e(0,c.label=L.currentTarget.value,c),ut(Qe,u.data.label=c.label,u)};function E(){t=this.value,e(10,t),e(0,c),e(5,u),e(18,o)}const P=(L,ae)=>{e(0,c.user_properties[L][0]=ae.currentTarget.value,c),ut(Qe,u.data.user_properties[L][0]=ae.currentTarget.value,u)};function O(L){i[L][0]=this.value,e(9,i),e(0,c),e(5,u),e(19,f)}const N=(L,ae)=>{e(0,c.user_properties[L][1]=ae.currentTarget.value,c),ut(Qe,u.data.user_properties[L][1]=ae.currentTarget.value,u)};function X(L){s[L][1]=this.value,e(8,s),e(0,c),e(5,u),e(20,h)}return n.$$set=L=>{"data"in L&&e(0,c=L.data),"isConnectable"in L&&e(1,_=L.isConnectable),"selected"in L&&e(2,w=L.selected),"id"in L&&e(3,k=L.id)},n.$$.update=()=>{n.$$.dirty[0]&262177&&e(10,t=(c==null?void 0:c.label)||"< label >"),n.$$.dirty[0]&524321&&e(9,i=(c==null?void 0:c.user_properties)||(e(19,f=u==null?void 0:u.data)===null||f===void 0?void 0:f.user_properties)||"< Property >"),n.$$.dirty[0]&1048609&&e(8,s=(c==null?void 0:c.user_properties)||(e(20,h=u==null?void 0:u.data)===null||h===void 0?void 0:h.user_properties)||"< Value >"),n.$$.dirty[0]&2097176&&e(6,F=(e(21,d=l.toHandle)===null||d===void 0?void 0:d.nodeId)==k)},[c,_,w,k,l,u,F,b,s,i,t,C,j,S,y,v,B,T,o,f,h,d,U,E,P,O,N,X]}class Tv extends dt{constructor(r){super(),ht(this,r,Av,Dv,Je,{data:0,isConnectable:1,selected:2,id:3},null,[-1,-1])}}function xf(n,r,e){const t=n.slice();return t[33]=r[e],t[34]=r,t[35]=e,t}function Xf(n){let r,e;return r=new ft({props:{type:"target",class:"customHandle",position:nt.Left,id:"target",style:n[17](),isConnectableStart:!1,isConnectable:n[1]}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i[0]&2&&(s.isConnectable=t[1]),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function Gf(n){let r=n[7],e,t,i=Wf(n);return{c(){i.c(),e=Ae()},l(s){i.l(s),e=Ae()},m(s,l){i.m(s,l),A(s,e,l),t=!0},p(s,l){l[0]&128&&Je(r,r=s[7])?(et(),fe(i,1,1,Le),tt(),i=Wf(s),i.c(),se(i,1),i.m(e.parentNode,e)):i.p(s,l)},i(s){t||(se(i),t=!0)},o(s){fe(i),t=!1},d(s){s&&m(e),i.d(s)}}}function Wf(n){let r,e,t,i,s,l,a,u;return r=new ft({props:{type:"source",position:nt.Top,id:"source",style:n[18](),isConnectable:n[1]}}),t=new ft({props:{type:"source",position:nt.Left,id:"source",style:n[18](),isConnectable:n[1]}}),s=new ft({props:{type:"source",position:nt.Right,id:"source",style:n[18](),isConnectable:n[1]}}),a=new ft({props:{type:"source",position:nt.Bottom,id:"source",style:n[18](),isConnectable:n[1]}}),{c(){Ce(r.$$.fragment),e=ie(),Ce(t.$$.fragment),i=ie(),Ce(s.$$.fragment),l=ie(),Ce(a.$$.fragment)},l(o){Ne(r.$$.fragment,o),e=le(o),Ne(t.$$.fragment,o),i=le(o),Ne(s.$$.fragment,o),l=le(o),Ne(a.$$.fragment,o)},m(o,f){Ie(r,o,f),A(o,e,f),Ie(t,o,f),A(o,i,f),Ie(s,o,f),A(o,l,f),Ie(a,o,f),u=!0},p(o,f){const h={};f[0]&2&&(h.isConnectable=o[1]),r.$set(h);const d={};f[0]&2&&(d.isConnectable=o[1]),t.$set(d);const c={};f[0]&2&&(c.isConnectable=o[1]),s.$set(c);const _={};f[0]&2&&(_.isConnectable=o[1]),a.$set(_)},i(o){u||(se(r.$$.fragment,o),se(t.$$.fragment,o),se(s.$$.fragment,o),se(a.$$.fragment,o),u=!0)},o(o){fe(r.$$.fragment,o),fe(t.$$.fragment,o),fe(s.$$.fragment,o),fe(a.$$.fragment,o),u=!1},d(o){o&&(m(e),m(i),m(l)),Fe(r,o),Fe(t,o),Fe(s,o),Fe(a,o)}}}function Cv(n){let r,e;return r=new n[36].ItemTree({props:{list:Uc,filter_value_store:n[37],select_item:n[38]}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i[1]&64&&(s.filter_value_store=t[37]),i[1]&128&&(s.select_item=t[38]),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function Qf(n){let r,e=xe(n[0].user_properties),t=[];for(let i=0;i<e.length;i+=1)t[i]=Yf(xf(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Ae()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Ae()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);A(i,r,s)},p(i,s){if(s[0]&801){e=xe(i[0].user_properties);let l;for(l=0;l<e.length;l+=1){const a=xf(i,e,l);t[l]?t[l].p(a,s):(t[l]=Yf(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),mt(t,i)}}}function Yf(n){let r,e,t,i,s,l,a,u,o;function f(..._){return n[27](n[35],..._)}function h(){n[28].call(t,n[35])}function d(..._){return n[29](n[35],..._)}function c(){n[30].call(l,n[35])}return{c(){r=Q("div"),e=Q("div"),t=Q("input"),i=ie(),s=Q("div"),l=Q("input"),a=ie(),this.h()},l(_){r=Y(_,"DIV",{class:!0});var w=we(r);e=Y(w,"DIV",{class:!0});var k=we(e);t=Y(k,"INPUT",{placeholder:!0}),k.forEach(m),i=le(w),s=Y(w,"DIV",{class:!0});var C=we(s);l=Y(C,"INPUT",{placeholder:!0}),C.forEach(m),a=le(w),w.forEach(m),this.h()},h(){ee(t,"placeholder","property"),ee(e,"class","user-property flex-column"),ee(l,"placeholder","value"),ee(s,"class","user-value flex-column flex-grow-3"),ee(r,"class","user-properties flex")},m(_,w){A(_,r,w),M(r,e),M(e,t),Me(t,n[9][n[35]][0]),M(r,i),M(r,s),M(s,l),Me(l,n[8][n[35]][1]),M(r,a),u||(o=[pe(t,"input",f),pe(t,"input",h),pe(l,"input",d),pe(l,"input",c)],u=!0)},p(_,w){n=_,w[0]&512&&t.value!==n[9][n[35]][0]&&Me(t,n[9][n[35]][0]),w[0]&256&&l.value!==n[8][n[35]][1]&&Me(l,n[8][n[35]][1])},d(_){_&&m(r),u=!1,it(o)}}}function Nv(n){let r=n[4].inProgress,e,t,i,s,l,a,u,o="Defense Action",f,h,d,c,_,w,k,C,j,S,F,b,y,v="+",B,T,U,E=Xf(n),P=!n[6]&&Gf(n);l=new ln({props:{isVisible:n[2]}}),k=new Zn({props:{node_id:n[3],element_id:n[0].d3f_class,input_color:"#d6eaff",$$slots:{default:[Cv,({R:N,filter_value_store:X,select_item:L})=>({36:N,37:X,38:L}),({R:N,filter_value_store:X,select_item:L})=>[0,(N?32:0)|(X?64:0)|(L?128:0)]]},$$scope:{ctx:n}}});let O=n[0].user_properties&&Qf(n);return{c(){E.c(),e=ie(),t=Q("div"),P&&P.c(),i=ie(),s=Q("div"),Ce(l.$$.fragment),a=ie(),u=Q("i"),u.textContent=o,f=ie(),h=Q("input"),d=ie(),c=Q("br"),_=ie(),w=Q("div"),Ce(k.$$.fragment),C=ie(),j=Q("div"),S=Q("input"),F=ie(),O&&O.c(),b=ie(),y=Q("button"),y.textContent=v,this.h()},l(N){E.l(N),e=le(N),t=Y(N,"DIV",{class:!0});var X=we(t);P&&P.l(X),i=le(X),s=Y(X,"DIV",{class:!0});var L=we(s);Ne(l.$$.fragment,L),a=le(L),u=Y(L,"I",{"data-svelte-h":!0}),We(u)!=="svelte-1x9m2lq"&&(u.textContent=o),f=le(L),h=Y(L,"INPUT",{class:!0,type:!0,style:!0}),d=le(L),c=Y(L,"BR",{}),_=le(L),w=Y(L,"DIV",{});var ae=we(w);Ne(k.$$.fragment,ae),ae.forEach(m),C=le(L),j=Y(L,"DIV",{});var K=we(j);S=Y(K,"INPUT",{class:!0,type:!0,style:!0}),F=le(K),O&&O.l(K),b=le(K),y=Y(K,"BUTTON",{"data-svelte-h":!0}),We(y)!=="svelte-y9choq"&&(y.textContent=v),K.forEach(m),L.forEach(m),X.forEach(m),this.h()},h(){ee(h,"class","nodrag sequence"),ee(h,"type","text"),st(h,"background","#d6eaff"),ee(S,"class","nodrag label"),ee(S,"type","text"),st(S,"background","#d6eaff"),ee(s,"class","node-inner"),ee(t,"class","countermeasure node svelte-cdgs6j")},m(N,X){E.m(N,X),A(N,e,X),A(N,t,X),P&&P.m(t,null),M(t,i),M(t,s),Ie(l,s,null),M(s,a),M(s,u),M(s,f),M(s,h),Me(h,n[10]),M(s,d),M(s,c),M(s,_),M(s,w),Ie(k,w,null),M(s,C),M(s,j),M(j,S),Me(S,n[11]),M(j,F),O&&O.m(j,null),M(j,b),M(j,y),B=!0,T||(U=[pe(h,"input",n[23]),pe(h,"input",n[24]),pe(S,"input",n[25]),pe(S,"input",n[26]),pe(y,"click",n[12]),pe(t,"click",n[13]),pe(t,"mouseenter",n[15]),pe(t,"mouseleave",n[16])],T=!0)},p(N,X){X[0]&16&&Je(r,r=N[4].inProgress)?(et(),fe(E,1,1,Le),tt(),E=Xf(N),E.c(),se(E,1),E.m(e.parentNode,e)):E.p(N,X),N[6]?P&&(et(),fe(P,1,1,()=>{P=null}),tt()):P?(P.p(N,X),X[0]&64&&se(P,1)):(P=Gf(N),P.c(),se(P,1),P.m(t,i));const L={};X[0]&4&&(L.isVisible=N[2]),l.$set(L),X[0]&1024&&h.value!==N[10]&&Me(h,N[10]);const ae={};X[0]&8&&(ae.node_id=N[3]),X[0]&1&&(ae.element_id=N[0].d3f_class),X[1]&448&&(ae.$$scope={dirty:X,ctx:N}),k.$set(ae),X[0]&2048&&S.value!==N[11]&&Me(S,N[11]),N[0].user_properties?O?O.p(N,X):(O=Qf(N),O.c(),O.m(j,b)):O&&(O.d(1),O=null)},i(N){B||(se(E),se(P),se(l.$$.fragment,N),se(k.$$.fragment,N),B=!0)},o(N){fe(E),fe(P),fe(l.$$.fragment,N),fe(k.$$.fragment,N),B=!1},d(N){N&&(m(e),m(t)),E.d(N),P&&P.d(),Fe(l),Fe(k),O&&O.d(),T=!1,it(U)}}}function Iv(n,r,e){let t,i,s,l,a,u,o;Ye(n,sr,G=>e(31,u=G)),Ye(n,Qe,G=>e(5,o=G));var f,h,d,c;let{data:_}=r,{isConnectable:w}=r,{selected:k=void 0}=r,{id:C}=r;_.user_properties=[];function j(){S(),_.user_properties.push(["",""])}function S(){for(let G=0;G<u.length;G++)u[G].data==_&&ut(Qe,o=u[G],o)}const F=Yr();Ye(n,F,G=>e(4,a=G));let b=!1,y=!1;function v(){e(7,y=!0)}function B(){e(7,y=!1)}function T(){return a.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function U(){return y?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const E=G=>{e(0,_.sequence=G.currentTarget.value,_),ut(Qe,o.data.sequence=_.sequence,o)};function P(){i=this.value,e(10,i),e(0,_)}const O=G=>{e(0,_.label=G.currentTarget.value,_),ut(Qe,o.data.label=_.label,o)};function N(){t=this.value,e(11,t),e(0,_),e(19,f)}const X=(G,$)=>{e(0,_.user_properties[G][0]=$.currentTarget.value,_),ut(Qe,o.data.user_properties[G][0]=$.currentTarget.value,o)};function L(G){s[G][0]=this.value,e(9,s),e(0,_),e(5,o),e(20,h)}const ae=(G,$)=>{e(0,_.user_properties[G][1]=$.currentTarget.value,_),ut(Qe,o.data.user_properties[G][1]=$.currentTarget.value,o)};function K(G){l[G][1]=this.value,e(8,l),e(0,_),e(5,o),e(21,d)}return n.$$set=G=>{"data"in G&&e(0,_=G.data),"isConnectable"in G&&e(1,w=G.isConnectable),"selected"in G&&e(2,k=G.selected),"id"in G&&e(3,C=G.id)},n.$$.update=()=>{n.$$.dirty[0]&524289&&e(11,t=e(19,f=_==null?void 0:_.label)!==null&&f!==void 0?f:"< label >"),n.$$.dirty[0]&1&&e(10,i=(_==null?void 0:_.sequence)||"#"),n.$$.dirty[0]&1048609&&e(9,s=(_==null?void 0:_.user_properties)||(e(20,h=o==null?void 0:o.data)===null||h===void 0?void 0:h.user_properties)||"< Property >"),n.$$.dirty[0]&2097185&&e(8,l=(_==null?void 0:_.user_properties)||(e(21,d=o==null?void 0:o.data)===null||d===void 0?void 0:d.user_properties)||"< Value >"),n.$$.dirty[0]&4194328&&e(6,b=(e(22,c=a.toHandle)===null||c===void 0?void 0:c.nodeId)==C)},[_,w,k,C,a,o,b,y,l,s,i,t,j,S,F,v,B,T,U,f,h,d,c,E,P,O,N,X,L,ae,K]}class Fv extends dt{constructor(r){super(),ht(this,r,Iv,Nv,Je,{data:0,isConnectable:1,selected:2,id:3},null,[-1,-1])}}function Jf(n,r,e){const t=n.slice();return t[30]=r[e],t[31]=r,t[32]=e,t}function Zf(n){let r,e;return r=new ft({props:{type:"target",class:"customHandle",position:nt.Left,id:"target",style:n[15](),isConnectableStart:!1,isConnectable:n[1]}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i[0]&2&&(s.isConnectable=t[1]),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function Kf(n){let r=n[6],e,t,i=$f(n);return{c(){i.c(),e=Ae()},l(s){i.l(s),e=Ae()},m(s,l){i.m(s,l),A(s,e,l),t=!0},p(s,l){l[0]&64&&Je(r,r=s[6])?(et(),fe(i,1,1,Le),tt(),i=$f(s),i.c(),se(i,1),i.m(e.parentNode,e)):i.p(s,l)},i(s){t||(se(i),t=!0)},o(s){fe(i),t=!1},d(s){s&&m(e),i.d(s)}}}function $f(n){let r,e,t,i,s,l,a,u;return r=new ft({props:{type:"source",position:nt.Top,id:"source",style:n[16](),isConnectable:n[1]}}),t=new ft({props:{type:"source",position:nt.Left,id:"source",style:n[16](),isConnectable:n[1]}}),s=new ft({props:{type:"source",position:nt.Right,id:"source",style:n[16](),isConnectable:n[1]}}),a=new ft({props:{type:"source",position:nt.Bottom,id:"source",style:n[16](),isConnectable:n[1]}}),{c(){Ce(r.$$.fragment),e=ie(),Ce(t.$$.fragment),i=ie(),Ce(s.$$.fragment),l=ie(),Ce(a.$$.fragment)},l(o){Ne(r.$$.fragment,o),e=le(o),Ne(t.$$.fragment,o),i=le(o),Ne(s.$$.fragment,o),l=le(o),Ne(a.$$.fragment,o)},m(o,f){Ie(r,o,f),A(o,e,f),Ie(t,o,f),A(o,i,f),Ie(s,o,f),A(o,l,f),Ie(a,o,f),u=!0},p(o,f){const h={};f[0]&2&&(h.isConnectable=o[1]),r.$set(h);const d={};f[0]&2&&(d.isConnectable=o[1]),t.$set(d);const c={};f[0]&2&&(c.isConnectable=o[1]),s.$set(c);const _={};f[0]&2&&(_.isConnectable=o[1]),a.$set(_)},i(o){u||(se(r.$$.fragment,o),se(t.$$.fragment,o),se(s.$$.fragment,o),se(a.$$.fragment,o),u=!0)},o(o){fe(r.$$.fragment,o),fe(t.$$.fragment,o),fe(s.$$.fragment,o),fe(a.$$.fragment,o),u=!1},d(o){o&&(m(e),m(i),m(l)),Fe(r,o),Fe(t,o),Fe(s,o),Fe(a,o)}}}function ec(n){let r,e=xe(n[0].user_properties),t=[];for(let i=0;i<e.length;i+=1)t[i]=tc(Jf(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Ae()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Ae()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);A(i,r,s)},p(i,s){if(s[0]&401){e=xe(i[0].user_properties);let l;for(l=0;l<e.length;l+=1){const a=Jf(i,e,l);t[l]?t[l].p(a,s):(t[l]=tc(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),mt(t,i)}}}function tc(n){let r,e,t,i,s,l,a,u,o;function f(..._){return n[24](n[32],..._)}function h(){n[25].call(t,n[32])}function d(..._){return n[26](n[32],..._)}function c(){n[27].call(l,n[32])}return{c(){r=Q("div"),e=Q("div"),t=Q("input"),i=ie(),s=Q("div"),l=Q("input"),a=ie(),this.h()},l(_){r=Y(_,"DIV",{class:!0});var w=we(r);e=Y(w,"DIV",{class:!0});var k=we(e);t=Y(k,"INPUT",{placeholder:!0}),k.forEach(m),i=le(w),s=Y(w,"DIV",{class:!0});var C=we(s);l=Y(C,"INPUT",{placeholder:!0}),C.forEach(m),a=le(w),w.forEach(m),this.h()},h(){ee(t,"placeholder","property"),ee(e,"class","user-property flex-column"),ee(l,"placeholder","value"),ee(s,"class","user-value flex-column flex-grow-3"),ee(r,"class","user-properties flex")},m(_,w){A(_,r,w),M(r,e),M(e,t),Me(t,n[8][n[32]][0]),M(r,i),M(r,s),M(s,l),Me(l,n[7][n[32]][1]),M(r,a),u||(o=[pe(t,"input",f),pe(t,"input",h),pe(l,"input",d),pe(l,"input",c)],u=!0)},p(_,w){n=_,w[0]&256&&t.value!==n[8][n[32]][0]&&Me(t,n[8][n[32]][0]),w[0]&128&&l.value!==n[7][n[32]][1]&&Me(l,n[7][n[32]][1])},d(_){_&&m(r),u=!1,it(o)}}}function Rv(n){let r=n[3].inProgress,e,t,i,s,l,a="Information",u,o,f,h,d,c,_,w,k="+",C,j,S,F=Zf(n),b=!n[5]&&Kf(n);f=new ln({props:{isVisible:n[2]}});let y=n[0].user_properties&&ec(n);return{c(){F.c(),e=ie(),t=Q("div"),b&&b.c(),i=ie(),s=Q("div"),l=Q("i"),l.textContent=a,u=Q("br"),o=ie(),Ce(f.$$.fragment),h=ie(),d=Q("input"),c=ie(),y&&y.c(),_=ie(),w=Q("button"),w.textContent=k,this.h()},l(v){F.l(v),e=le(v),t=Y(v,"DIV",{class:!0});var B=we(t);b&&b.l(B),i=le(B),s=Y(B,"DIV",{class:!0});var T=we(s);l=Y(T,"I",{"data-svelte-h":!0}),We(l)!=="svelte-1ocpiyk"&&(l.textContent=a),u=Y(T,"BR",{}),o=le(T),Ne(f.$$.fragment,T),h=le(T),d=Y(T,"INPUT",{class:!0,type:!0,style:!0}),c=le(T),y&&y.l(T),_=le(T),w=Y(T,"BUTTON",{"data-svelte-h":!0}),We(w)!=="svelte-y9choq"&&(w.textContent=k),T.forEach(m),B.forEach(m),this.h()},h(){ee(d,"class","nodrag label"),ee(d,"type","text"),st(d,"background","#e8f4ea"),ee(s,"class","information node-inner svelte-1wgy9qw"),ee(t,"class","information node svelte-1wgy9qw")},m(v,B){F.m(v,B),A(v,e,B),A(v,t,B),b&&b.m(t,null),M(t,i),M(t,s),M(s,l),M(s,u),M(s,o),Ie(f,s,null),M(s,h),M(s,d),Me(d,n[9]),M(s,c),y&&y.m(s,null),M(s,_),M(s,w),C=!0,j||(S=[pe(d,"input",n[22]),pe(d,"input",n[23]),pe(w,"click",n[10]),pe(t,"click",n[11]),pe(t,"mouseenter",n[13]),pe(t,"mouseleave",n[14])],j=!0)},p(v,B){B[0]&8&&Je(r,r=v[3].inProgress)?(et(),fe(F,1,1,Le),tt(),F=Zf(v),F.c(),se(F,1),F.m(e.parentNode,e)):F.p(v,B),v[5]?b&&(et(),fe(b,1,1,()=>{b=null}),tt()):b?(b.p(v,B),B[0]&32&&se(b,1)):(b=Kf(v),b.c(),se(b,1),b.m(t,i));const T={};B[0]&4&&(T.isVisible=v[2]),f.$set(T),B[0]&512&&d.value!==v[9]&&Me(d,v[9]),v[0].user_properties?y?y.p(v,B):(y=ec(v),y.c(),y.m(s,_)):y&&(y.d(1),y=null)},i(v){C||(se(F),se(b),se(f.$$.fragment,v),C=!0)},o(v){fe(F),fe(b),fe(f.$$.fragment,v),C=!1},d(v){v&&(m(e),m(t)),F.d(v),b&&b.d(),Fe(f),y&&y.d(),j=!1,it(S)}}}function Sv(n,r,e){let t,i,s,l,a,u;Ye(n,sr,L=>e(28,a=L)),Ye(n,Qe,L=>e(4,u=L));var o,f,h,d;let{data:c}=r,{isConnectable:_}=r,{selected:w=void 0}=r;c.user_properties=[];function k(){C(),c.user_properties.push(["",""])}function C(){for(let L=0;L<a.length;L++)a[L].data==c&&ut(Qe,u=a[L],u)}let{id:j}=r;const S=Yr();Ye(n,S,L=>e(3,l=L));let F=!1,b=!1;function y(){e(6,b=!0)}function v(){e(6,b=!1)}function B(){return l.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function T(){return b?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const U=L=>{e(0,c.label=L.currentTarget.value,c),ut(Qe,u.data.label=c.label,u)};function E(){t=this.value,e(9,t),e(0,c),e(4,u),e(18,o)}const P=(L,ae)=>{e(0,c.user_properties[L][0]=ae.currentTarget.value,c),ut(Qe,u.data.user_properties[L][0]=ae.currentTarget.value,u)};function O(L){i[L][0]=this.value,e(8,i),e(0,c),e(4,u),e(19,f)}const N=(L,ae)=>{e(0,c.user_properties[L][1]=ae.currentTarget.value,c),ut(Qe,u.data.user_properties[L][1]=ae.currentTarget.value,u)};function X(L){s[L][1]=this.value,e(7,s),e(0,c),e(4,u),e(20,h)}return n.$$set=L=>{"data"in L&&e(0,c=L.data),"isConnectable"in L&&e(1,_=L.isConnectable),"selected"in L&&e(2,w=L.selected),"id"in L&&e(17,j=L.id)},n.$$.update=()=>{n.$$.dirty[0]&262161&&e(9,t=(c==null?void 0:c.label)||"< label >"),n.$$.dirty[0]&524305&&e(8,i=(c==null?void 0:c.user_properties)||(e(19,f=u==null?void 0:u.data)===null||f===void 0?void 0:f.user_properties)||"< Property >"),n.$$.dirty[0]&1048593&&e(7,s=(c==null?void 0:c.user_properties)||(e(20,h=u==null?void 0:u.data)===null||h===void 0?void 0:h.user_properties)||"< Value >"),n.$$.dirty[0]&2228232&&e(5,F=(e(21,d=l.toHandle)===null||d===void 0?void 0:d.nodeId)==j)},[c,_,w,l,u,F,b,s,i,t,k,C,S,y,v,B,T,j,o,f,h,d,U,E,P,O,N,X]}class Bv extends dt{constructor(r){super(),ht(this,r,Sv,Rv,Je,{data:0,isConnectable:1,selected:2,id:17},null,[-1,-1])}}function rc(n,r,e){const t=n.slice();return t[30]=r[e],t[31]=r,t[32]=e,t}function nc(n){let r,e;return r=new ft({props:{type:"target",class:"customHandle",position:nt.Left,id:"target",style:n[13](),isConnectableStart:!1,isConnectable:n[1]}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i[0]&2&&(s.isConnectable=t[1]),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function ic(n){let r=n[6],e,t,i=lc(n);return{c(){i.c(),e=Ae()},l(s){i.l(s),e=Ae()},m(s,l){i.m(s,l),A(s,e,l),t=!0},p(s,l){l[0]&64&&Je(r,r=s[6])?(et(),fe(i,1,1,Le),tt(),i=lc(s),i.c(),se(i,1),i.m(e.parentNode,e)):i.p(s,l)},i(s){t||(se(i),t=!0)},o(s){fe(i),t=!1},d(s){s&&m(e),i.d(s)}}}function lc(n){let r,e,t,i,s,l,a,u;return r=new ft({props:{type:"source",position:nt.Top,id:"source",style:n[14](),isConnectable:n[1]}}),t=new ft({props:{type:"source",position:nt.Left,id:"source",style:n[14](),isConnectable:n[1]}}),s=new ft({props:{type:"source",position:nt.Right,id:"source",style:n[14](),isConnectable:n[1]}}),a=new ft({props:{type:"source",position:nt.Bottom,id:"source",style:n[14](),isConnectable:n[1]}}),{c(){Ce(r.$$.fragment),e=ie(),Ce(t.$$.fragment),i=ie(),Ce(s.$$.fragment),l=ie(),Ce(a.$$.fragment)},l(o){Ne(r.$$.fragment,o),e=le(o),Ne(t.$$.fragment,o),i=le(o),Ne(s.$$.fragment,o),l=le(o),Ne(a.$$.fragment,o)},m(o,f){Ie(r,o,f),A(o,e,f),Ie(t,o,f),A(o,i,f),Ie(s,o,f),A(o,l,f),Ie(a,o,f),u=!0},p(o,f){const h={};f[0]&2&&(h.isConnectable=o[1]),r.$set(h);const d={};f[0]&2&&(d.isConnectable=o[1]),t.$set(d);const c={};f[0]&2&&(c.isConnectable=o[1]),s.$set(c);const _={};f[0]&2&&(_.isConnectable=o[1]),a.$set(_)},i(o){u||(se(r.$$.fragment,o),se(t.$$.fragment,o),se(s.$$.fragment,o),se(a.$$.fragment,o),u=!0)},o(o){fe(r.$$.fragment,o),fe(t.$$.fragment,o),fe(s.$$.fragment,o),fe(a.$$.fragment,o),u=!1},d(o){o&&(m(e),m(i),m(l)),Fe(r,o),Fe(t,o),Fe(s,o),Fe(a,o)}}}function sc(n){let r,e=xe(n[0].user_properties),t=[];for(let i=0;i<e.length;i+=1)t[i]=ac(rc(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Ae()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Ae()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);A(i,r,s)},p(i,s){if(s[0]&393){e=xe(i[0].user_properties);let l;for(l=0;l<e.length;l+=1){const a=rc(i,e,l);t[l]?t[l].p(a,s):(t[l]=ac(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),mt(t,i)}}}function ac(n){let r,e,t,i,s,l,a,u,o;function f(..._){return n[24](n[32],..._)}function h(){n[25].call(t,n[32])}function d(..._){return n[26](n[32],..._)}function c(){n[27].call(l,n[32])}return{c(){r=Q("div"),e=Q("div"),t=Q("input"),i=ie(),s=Q("div"),l=Q("input"),a=ie(),this.h()},l(_){r=Y(_,"DIV",{class:!0});var w=we(r);e=Y(w,"DIV",{class:!0});var k=we(e);t=Y(k,"INPUT",{placeholder:!0}),k.forEach(m),i=le(w),s=Y(w,"DIV",{class:!0});var C=we(s);l=Y(C,"INPUT",{placeholder:!0}),C.forEach(m),a=le(w),w.forEach(m),this.h()},h(){ee(t,"placeholder","property"),ee(e,"class","user-property flex-column"),ee(l,"placeholder","value"),ee(s,"class","user-value flex-column flex-grow-3"),ee(r,"class","user-properties flex")},m(_,w){A(_,r,w),M(r,e),M(e,t),Me(t,n[8][n[32]][0]),M(r,i),M(r,s),M(s,l),Me(l,n[7][n[32]][1]),M(r,a),u||(o=[pe(t,"input",f),pe(t,"input",h),pe(l,"input",d),pe(l,"input",c)],u=!0)},p(_,w){n=_,w[0]&256&&t.value!==n[8][n[32]][0]&&Me(t,n[8][n[32]][0]),w[0]&128&&l.value!==n[7][n[32]][1]&&Me(l,n[7][n[32]][1])},d(_){_&&m(r),u=!1,it(o)}}}function Ov(n){let r=n[4].inProgress,e,t,i,s,l,a,u,o="Condition",f,h,d,c,_,w,k="+",C,j,S,F=nc(n),b=!n[5]&&ic(n);l=new ln({props:{isVisible:n[2]}});let y=n[0].user_properties&&sc(n);return{c(){F.c(),e=ie(),t=Q("div"),b&&b.c(),i=ie(),s=Q("div"),Ce(l.$$.fragment),a=ie(),u=Q("i"),u.textContent=o,f=Q("br"),h=ie(),d=Q("input"),c=ie(),y&&y.c(),_=ie(),w=Q("button"),w.textContent=k,this.h()},l(v){F.l(v),e=le(v),t=Y(v,"DIV",{class:!0});var B=we(t);b&&b.l(B),i=le(B),s=Y(B,"DIV",{class:!0});var T=we(s);Ne(l.$$.fragment,T),a=le(T),u=Y(T,"I",{"data-svelte-h":!0}),We(u)!=="svelte-26somz"&&(u.textContent=o),f=Y(T,"BR",{}),h=le(T),d=Y(T,"INPUT",{class:!0,type:!0,style:!0}),c=le(T),y&&y.l(T),_=le(T),w=Y(T,"BUTTON",{"data-svelte-h":!0}),We(w)!=="svelte-y9choq"&&(w.textContent=k),T.forEach(m),B.forEach(m),this.h()},h(){ee(d,"class","nodrag label"),ee(d,"type","text"),st(d,"background","#ece6ff"),ee(s,"class","condition node-inner svelte-d75hej"),ee(t,"class","condition node svelte-d75hej")},m(v,B){F.m(v,B),A(v,e,B),A(v,t,B),b&&b.m(t,null),M(t,i),M(t,s),Ie(l,s,null),M(s,a),M(s,u),M(s,f),M(s,h),M(s,d),Me(d,n[9]),M(s,c),y&&y.m(s,null),M(s,_),M(s,w),C=!0,j||(S=[pe(d,"input",n[22]),pe(d,"input",n[23]),pe(w,"click",n[15]),pe(t,"click",n[16]),pe(t,"mouseenter",n[11]),pe(t,"mouseleave",n[12])],j=!0)},p(v,B){B[0]&16&&Je(r,r=v[4].inProgress)?(et(),fe(F,1,1,Le),tt(),F=nc(v),F.c(),se(F,1),F.m(e.parentNode,e)):F.p(v,B),v[5]?b&&(et(),fe(b,1,1,()=>{b=null}),tt()):b?(b.p(v,B),B[0]&32&&se(b,1)):(b=ic(v),b.c(),se(b,1),b.m(t,i));const T={};B[0]&4&&(T.isVisible=v[2]),l.$set(T),B[0]&512&&d.value!==v[9]&&Me(d,v[9]),v[0].user_properties?y?y.p(v,B):(y=sc(v),y.c(),y.m(s,_)):y&&(y.d(1),y=null)},i(v){C||(se(F),se(b),se(l.$$.fragment,v),C=!0)},o(v){fe(F),fe(b),fe(l.$$.fragment,v),C=!1},d(v){v&&(m(e),m(t)),F.d(v),b&&b.d(),Fe(l),y&&y.d(),j=!1,it(S)}}}function Lv(n,r,e){let t,i,s,l,a,u;Ye(n,sr,L=>e(28,l=L)),Ye(n,Qe,L=>e(3,a=L));var o,f,h,d;let{data:c}=r,{isConnectable:_}=r,{selected:w=void 0}=r,{id:k}=r;const C=Yr();Ye(n,C,L=>e(4,u=L));let j=!1,S=!1;function F(){e(6,S=!0)}function b(){e(6,S=!1)}function y(){return u.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function v(){return S?"z-index: 2;":"visibility:hidden; pointer-events: none;"}c.user_properties=[];function B(){T(),c.user_properties.push(["",""])}function T(){for(let L=0;L<l.length;L++)l[L].data==c&&ut(Qe,a=l[L],a)}const U=L=>{e(0,c.label=L.currentTarget.value,c),ut(Qe,a.data.label=c.label,a)};function E(){t=this.value,e(9,t),e(0,c),e(3,a),e(19,f)}const P=(L,ae)=>{e(0,c.user_properties[L][0]=ae.currentTarget.value,c),ut(Qe,a.data.user_properties[L][0]=ae.currentTarget.value,a)};function O(L){i[L][0]=this.value,e(8,i),e(0,c),e(3,a),e(20,h)}const N=(L,ae)=>{e(0,c.user_properties[L][1]=ae.currentTarget.value,c),ut(Qe,a.data.user_properties[L][1]=ae.currentTarget.value,a)};function X(L){s[L][1]=this.value,e(7,s),e(0,c),e(3,a),e(21,d)}return n.$$set=L=>{"data"in L&&e(0,c=L.data),"isConnectable"in L&&e(1,_=L.isConnectable),"selected"in L&&e(2,w=L.selected),"id"in L&&e(17,k=L.id)},n.$$.update=()=>{n.$$.dirty[0]&393232&&e(5,j=(e(18,o=u.toHandle)===null||o===void 0?void 0:o.nodeId)==k),n.$$.dirty[0]&524297&&e(9,t=(c==null?void 0:c.label)||"< label >"),n.$$.dirty[0]&1048585&&e(8,i=(c==null?void 0:c.user_properties)||(e(20,h=a==null?void 0:a.data)===null||h===void 0?void 0:h.user_properties)||"< Property >"),n.$$.dirty[0]&2097161&&e(7,s=(c==null?void 0:c.user_properties)||(e(21,d=a==null?void 0:a.data)===null||d===void 0?void 0:d.user_properties)||"< Value >")},[c,_,w,a,u,j,S,s,i,t,C,F,b,y,v,B,T,k,o,f,h,d,U,E,P,O,N,X]}class Uv extends dt{constructor(r){super(),ht(this,r,Lv,Ov,Je,{data:0,isConnectable:1,selected:2,id:17},null,[-1,-1])}}function uc(n,r,e){const t=n.slice();return t[30]=r[e],t[31]=r,t[32]=e,t}function oc(n){let r,e;return r=new ft({props:{type:"target",class:"customHandle",position:nt.Left,id:"target",style:n[15](),isConnectableStart:!1,isConnectable:n[1]}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i[0]&2&&(s.isConnectable=t[1]),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function fc(n){let r=n[6],e,t,i=cc(n);return{c(){i.c(),e=Ae()},l(s){i.l(s),e=Ae()},m(s,l){i.m(s,l),A(s,e,l),t=!0},p(s,l){l[0]&64&&Je(r,r=s[6])?(et(),fe(i,1,1,Le),tt(),i=cc(s),i.c(),se(i,1),i.m(e.parentNode,e)):i.p(s,l)},i(s){t||(se(i),t=!0)},o(s){fe(i),t=!1},d(s){s&&m(e),i.d(s)}}}function cc(n){let r,e,t,i,s,l,a,u;return r=new ft({props:{type:"source",position:nt.Top,id:"source",style:n[16](),isConnectable:n[1]}}),t=new ft({props:{type:"source",position:nt.Left,id:"source",style:n[16](),isConnectable:n[1]}}),s=new ft({props:{type:"source",position:nt.Right,id:"source",style:n[16](),isConnectable:n[1]}}),a=new ft({props:{type:"source",position:nt.Bottom,id:"source",style:n[16](),isConnectable:n[1]}}),{c(){Ce(r.$$.fragment),e=ie(),Ce(t.$$.fragment),i=ie(),Ce(s.$$.fragment),l=ie(),Ce(a.$$.fragment)},l(o){Ne(r.$$.fragment,o),e=le(o),Ne(t.$$.fragment,o),i=le(o),Ne(s.$$.fragment,o),l=le(o),Ne(a.$$.fragment,o)},m(o,f){Ie(r,o,f),A(o,e,f),Ie(t,o,f),A(o,i,f),Ie(s,o,f),A(o,l,f),Ie(a,o,f),u=!0},p(o,f){const h={};f[0]&2&&(h.isConnectable=o[1]),r.$set(h);const d={};f[0]&2&&(d.isConnectable=o[1]),t.$set(d);const c={};f[0]&2&&(c.isConnectable=o[1]),s.$set(c);const _={};f[0]&2&&(_.isConnectable=o[1]),a.$set(_)},i(o){u||(se(r.$$.fragment,o),se(t.$$.fragment,o),se(s.$$.fragment,o),se(a.$$.fragment,o),u=!0)},o(o){fe(r.$$.fragment,o),fe(t.$$.fragment,o),fe(s.$$.fragment,o),fe(a.$$.fragment,o),u=!1},d(o){o&&(m(e),m(i),m(l)),Fe(r,o),Fe(t,o),Fe(s,o),Fe(a,o)}}}function dc(n){let r,e=xe(n[0].user_properties),t=[];for(let i=0;i<e.length;i+=1)t[i]=hc(uc(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Ae()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Ae()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);A(i,r,s)},p(i,s){if(s[0]&401){e=xe(i[0].user_properties);let l;for(l=0;l<e.length;l+=1){const a=uc(i,e,l);t[l]?t[l].p(a,s):(t[l]=hc(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),mt(t,i)}}}function hc(n){let r,e,t,i,s,l,a,u,o;function f(..._){return n[24](n[32],..._)}function h(){n[25].call(t,n[32])}function d(..._){return n[26](n[32],..._)}function c(){n[27].call(l,n[32])}return{c(){r=Q("div"),e=Q("div"),t=Q("input"),i=ie(),s=Q("div"),l=Q("input"),a=ie(),this.h()},l(_){r=Y(_,"DIV",{class:!0});var w=we(r);e=Y(w,"DIV",{class:!0});var k=we(e);t=Y(k,"INPUT",{placeholder:!0}),k.forEach(m),i=le(w),s=Y(w,"DIV",{class:!0});var C=we(s);l=Y(C,"INPUT",{placeholder:!0}),C.forEach(m),a=le(w),w.forEach(m),this.h()},h(){ee(t,"placeholder","property"),ee(e,"class","user-property flex-column"),ee(l,"placeholder","value"),ee(s,"class","user-value flex-column flex-grow-3"),ee(r,"class","user-properties flex")},m(_,w){A(_,r,w),M(r,e),M(e,t),Me(t,n[8][n[32]][0]),M(r,i),M(r,s),M(s,l),Me(l,n[7][n[32]][1]),M(r,a),u||(o=[pe(t,"input",f),pe(t,"input",h),pe(l,"input",d),pe(l,"input",c)],u=!0)},p(_,w){n=_,w[0]&256&&t.value!==n[8][n[32]][0]&&Me(t,n[8][n[32]][0]),w[0]&128&&l.value!==n[7][n[32]][1]&&Me(l,n[7][n[32]][1])},d(_){_&&m(r),u=!1,it(o)}}}function Pv(n){let r=n[3].inProgress,e,t,i,s,l,a="Agent",u,o,f,h,d,c,_,w,k,C="+",j,S,F,b=oc(n),y=!n[5]&&fc(n);f=new ln({props:{isVisible:n[2]}});let v=n[0].user_properties&&dc(n);return{c(){b.c(),e=ie(),t=Q("div"),y&&y.c(),i=ie(),s=Q("div"),l=Q("i"),l.textContent=a,u=Q("br"),o=ie(),Ce(f.$$.fragment),h=ie(),d=Q("input"),c=Q("br"),_=ie(),v&&v.c(),w=ie(),k=Q("button"),k.textContent=C,this.h()},l(B){b.l(B),e=le(B),t=Y(B,"DIV",{class:!0});var T=we(t);y&&y.l(T),i=le(T),s=Y(T,"DIV",{class:!0});var U=we(s);l=Y(U,"I",{"data-svelte-h":!0}),We(l)!=="svelte-13s1fb"&&(l.textContent=a),u=Y(U,"BR",{}),o=le(U),Ne(f.$$.fragment,U),h=le(U),d=Y(U,"INPUT",{class:!0,type:!0,style:!0}),c=Y(U,"BR",{}),_=le(U),v&&v.l(U),w=le(U),k=Y(U,"BUTTON",{"data-svelte-h":!0}),We(k)!=="svelte-y9choq"&&(k.textContent=C),U.forEach(m),T.forEach(m),this.h()},h(){ee(d,"class","nodrag label"),ee(d,"type","text"),st(d,"background","#f0e6e6"),ee(s,"class","agent-inner node-inner"),ee(t,"class","agent node svelte-n06ybh")},m(B,T){b.m(B,T),A(B,e,T),A(B,t,T),y&&y.m(t,null),M(t,i),M(t,s),M(s,l),M(s,u),M(s,o),Ie(f,s,null),M(s,h),M(s,d),Me(d,n[9]),M(s,c),M(s,_),v&&v.m(s,null),M(s,w),M(s,k),j=!0,S||(F=[pe(d,"input",n[22]),pe(d,"input",n[23]),pe(k,"click",n[10]),pe(t,"click",n[11]),pe(t,"mouseenter",n[13]),pe(t,"mouseleave",n[14])],S=!0)},p(B,T){T[0]&8&&Je(r,r=B[3].inProgress)?(et(),fe(b,1,1,Le),tt(),b=oc(B),b.c(),se(b,1),b.m(e.parentNode,e)):b.p(B,T),B[5]?y&&(et(),fe(y,1,1,()=>{y=null}),tt()):y?(y.p(B,T),T[0]&32&&se(y,1)):(y=fc(B),y.c(),se(y,1),y.m(t,i));const U={};T[0]&4&&(U.isVisible=B[2]),f.$set(U),T[0]&512&&d.value!==B[9]&&Me(d,B[9]),B[0].user_properties?v?v.p(B,T):(v=dc(B),v.c(),v.m(s,w)):v&&(v.d(1),v=null)},i(B){j||(se(b),se(y),se(f.$$.fragment,B),j=!0)},o(B){fe(b),fe(y),fe(f.$$.fragment,B),j=!1},d(B){B&&(m(e),m(t)),b.d(B),y&&y.d(),Fe(f),v&&v.d(),S=!1,it(F)}}}function Mv(n,r,e){let t,i,s,l,a,u;Ye(n,sr,L=>e(28,a=L)),Ye(n,Qe,L=>e(4,u=L));var o,f,h,d;let{data:c}=r,{isConnectable:_}=r,{selected:w=void 0}=r,{id:k}=r;c.user_properties=[];function C(){j(),c.user_properties.push(["",""])}function j(){for(let L=0;L<a.length;L++)a[L].data==c&&ut(Qe,u=a[L],u)}const S=Yr();Ye(n,S,L=>e(3,l=L));let F=!1,b=!1;function y(){e(6,b=!0)}function v(){e(6,b=!1)}function B(){return l.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function T(){return b?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const U=L=>{e(0,c.label=L.currentTarget.value,c),ut(Qe,u.data.label=c.label,u)};function E(){t=this.value,e(9,t),e(0,c),e(4,u),e(18,o)}const P=(L,ae)=>{e(0,c.user_properties[L][0]=ae.currentTarget.value,c),ut(Qe,u.data.user_properties[L][0]=ae.currentTarget.value,u)};function O(L){i[L][0]=this.value,e(8,i),e(0,c),e(4,u),e(19,f)}const N=(L,ae)=>{e(0,c.user_properties[L][1]=ae.currentTarget.value,c),ut(Qe,u.data.user_properties[L][1]=ae.currentTarget.value,u)};function X(L){s[L][1]=this.value,e(7,s),e(0,c),e(4,u),e(20,h)}return n.$$set=L=>{"data"in L&&e(0,c=L.data),"isConnectable"in L&&e(1,_=L.isConnectable),"selected"in L&&e(2,w=L.selected),"id"in L&&e(17,k=L.id)},n.$$.update=()=>{n.$$.dirty[0]&262161&&e(9,t=(c==null?void 0:c.label)||"< label >"),n.$$.dirty[0]&524305&&e(8,i=(c==null?void 0:c.user_properties)||(e(19,f=u==null?void 0:u.data)===null||f===void 0?void 0:f.user_properties)),n.$$.dirty[0]&1048593&&e(7,s=(c==null?void 0:c.user_properties)||(e(20,h=u==null?void 0:u.data)===null||h===void 0?void 0:h.user_properties)),n.$$.dirty[0]&2228232&&e(5,F=(e(21,d=l.toHandle)===null||d===void 0?void 0:d.nodeId)==k)},[c,_,w,l,u,F,b,s,i,t,C,j,S,y,v,B,T,k,o,f,h,d,U,E,P,O,N,X]}class qv extends dt{constructor(r){super(),ht(this,r,Mv,Pv,Je,{data:0,isConnectable:1,selected:2,id:17},null,[-1,-1])}}function _c(n,r,e){const t=n.slice();return t[31]=r[e],t[32]=r,t[33]=e,t}function pc(n){let r,e;return r=new ft({props:{type:"target",class:"customHandle",position:nt.Left,id:"target",style:n[17](),isConnectableStart:!1,isConnectable:n[1]}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i[0]&2&&(s.isConnectable=t[1]),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function gc(n){let r=n[8],e,t,i=mc(n);return{c(){i.c(),e=Ae()},l(s){i.l(s),e=Ae()},m(s,l){i.m(s,l),A(s,e,l),t=!0},p(s,l){l[0]&256&&Je(r,r=s[8])?(et(),fe(i,1,1,Le),tt(),i=mc(s),i.c(),se(i,1),i.m(e.parentNode,e)):i.p(s,l)},i(s){t||(se(i),t=!0)},o(s){fe(i),t=!1},d(s){s&&m(e),i.d(s)}}}function mc(n){let r,e,t,i,s,l,a,u;return r=new ft({props:{type:"source",position:nt.Top,id:"source",style:n[18](),isConnectable:n[1]}}),t=new ft({props:{type:"source",position:nt.Left,id:"source",style:n[18](),isConnectable:n[1]}}),s=new ft({props:{type:"source",position:nt.Right,id:"source",style:n[18](),isConnectable:n[1]}}),a=new ft({props:{type:"source",position:nt.Bottom,id:"source",style:n[18](),isConnectable:n[1]}}),{c(){Ce(r.$$.fragment),e=ie(),Ce(t.$$.fragment),i=ie(),Ce(s.$$.fragment),l=ie(),Ce(a.$$.fragment)},l(o){Ne(r.$$.fragment,o),e=le(o),Ne(t.$$.fragment,o),i=le(o),Ne(s.$$.fragment,o),l=le(o),Ne(a.$$.fragment,o)},m(o,f){Ie(r,o,f),A(o,e,f),Ie(t,o,f),A(o,i,f),Ie(s,o,f),A(o,l,f),Ie(a,o,f),u=!0},p(o,f){const h={};f[0]&2&&(h.isConnectable=o[1]),r.$set(h);const d={};f[0]&2&&(d.isConnectable=o[1]),t.$set(d);const c={};f[0]&2&&(c.isConnectable=o[1]),s.$set(c);const _={};f[0]&2&&(_.isConnectable=o[1]),a.$set(_)},i(o){u||(se(r.$$.fragment,o),se(t.$$.fragment,o),se(s.$$.fragment,o),se(a.$$.fragment,o),u=!0)},o(o){fe(r.$$.fragment,o),fe(t.$$.fragment,o),fe(s.$$.fragment,o),fe(a.$$.fragment,o),u=!1},d(o){o&&(m(e),m(i),m(l)),Fe(r,o),Fe(t,o),Fe(s,o),Fe(a,o)}}}function jv(n){let r,e;return r=new n[34].ItemTree({props:{list:qc,filter_value_store:n[35],select_item:n[36]}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i[1]&16&&(s.filter_value_store=t[35]),i[1]&32&&(s.select_item=t[36]),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function vc(n){let r,e=xe(n[0].user_properties),t=[];for(let i=0;i<e.length;i+=1)t[i]=bc(_c(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Ae()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Ae()},m(i,s){for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(i,s);A(i,r,s)},p(i,s){if(s[0]&1601){e=xe(i[0].user_properties);let l;for(l=0;l<e.length;l+=1){const a=_c(i,e,l);t[l]?t[l].p(a,s):(t[l]=bc(a),t[l].c(),t[l].m(r.parentNode,r))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),mt(t,i)}}}function bc(n){let r,e,t,i,s,l,a,u,o;function f(..._){return n[26](n[33],..._)}function h(){n[27].call(t,n[33])}function d(..._){return n[28](n[33],..._)}function c(){n[29].call(l,n[33])}return{c(){r=Q("div"),e=Q("div"),t=Q("input"),i=ie(),s=Q("div"),l=Q("input"),a=ie(),this.h()},l(_){r=Y(_,"DIV",{class:!0});var w=we(r);e=Y(w,"DIV",{class:!0});var k=we(e);t=Y(k,"INPUT",{placeholder:!0}),k.forEach(m),i=le(w),s=Y(w,"DIV",{class:!0});var C=we(s);l=Y(C,"INPUT",{placeholder:!0}),C.forEach(m),a=le(w),w.forEach(m),this.h()},h(){ee(t,"placeholder","property"),ee(e,"class","user-property flex-column"),ee(l,"placeholder","value"),ee(s,"class","user-value flex-column flex-grow-3"),ee(r,"class","user-properties flex")},m(_,w){A(_,r,w),M(r,e),M(e,t),Me(t,n[10][n[33]][0]),M(r,i),M(r,s),M(s,l),Me(l,n[9][n[33]][1]),M(r,a),u||(o=[pe(t,"input",f),pe(t,"input",h),pe(l,"input",d),pe(l,"input",c)],u=!0)},p(_,w){n=_,w[0]&1024&&t.value!==n[10][n[33]][0]&&Me(t,n[10][n[33]][0]),w[0]&512&&l.value!==n[9][n[33]][1]&&Me(l,n[9][n[33]][1])},d(_){_&&m(r),u=!1,it(o)}}}function Vv(n){let r=n[5].inProgress,e,t,i,s,l,a,u,o,f,h,d,c,_,w,k,C,j,S,F="+",b,y,v,B=pc(n),T=!n[7]&&gc(n);l=new ln({props:{isVisible:n[4]}}),_=new Zn({props:{node_id:n[2],element_id:n[0].d3f_class,input_color:"white",$$slots:{default:[jv,({R:E,filter_value_store:P,select_item:O})=>({34:E,35:P,36:O}),({R:E,filter_value_store:P,select_item:O})=>[0,(E?8:0)|(P?16:0)|(O?32:0)]]},$$scope:{ctx:n}}});let U=n[0].user_properties&&vc(n);return{c(){B.c(),e=ie(),t=Q("div"),T&&T.c(),i=ie(),s=Q("div"),Ce(l.$$.fragment),a=ie(),u=Q("i"),o=V(n[3]),f=Q("br"),h=ie(),d=Q("br"),c=ie(),Ce(_.$$.fragment),w=ie(),k=Q("input"),C=ie(),U&&U.c(),j=ie(),S=Q("button"),S.textContent=F,this.h()},l(E){B.l(E),e=le(E),t=Y(E,"DIV",{class:!0});var P=we(t);T&&T.l(P),i=le(P),s=Y(P,"DIV",{class:!0});var O=we(s);Ne(l.$$.fragment,O),a=le(O),u=Y(O,"I",{});var N=we(u);o=H(N,n[3]),N.forEach(m),f=Y(O,"BR",{}),h=le(O),d=Y(O,"BR",{}),c=le(O),Ne(_.$$.fragment,O),w=le(O),k=Y(O,"INPUT",{class:!0,type:!0,style:!0}),C=le(O),U&&U.l(O),j=le(O),S=Y(O,"BUTTON",{"data-svelte-h":!0}),We(S)!=="svelte-y9choq"&&(S.textContent=F),O.forEach(m),P.forEach(m),this.h()},h(){ee(k,"class","nodrag label"),ee(k,"type","text"),st(k,"background","white"),ee(s,"class","event node-inner svelte-r7gabh"),ee(t,"class","event node svelte-r7gabh")},m(E,P){B.m(E,P),A(E,e,P),A(E,t,P),T&&T.m(t,null),M(t,i),M(t,s),Ie(l,s,null),M(s,a),M(s,u),M(u,o),M(s,f),M(s,h),M(s,d),M(s,c),Ie(_,s,null),M(s,w),M(s,k),Me(k,n[11]),M(s,C),U&&U.m(s,null),M(s,j),M(s,S),b=!0,y||(v=[pe(k,"input",n[24]),pe(k,"input",n[25]),pe(S,"click",n[12]),pe(t,"click",n[13]),pe(t,"mouseenter",n[15]),pe(t,"mouseleave",n[16])],y=!0)},p(E,P){P[0]&32&&Je(r,r=E[5].inProgress)?(et(),fe(B,1,1,Le),tt(),B=pc(E),B.c(),se(B,1),B.m(e.parentNode,e)):B.p(E,P),E[7]?T&&(et(),fe(T,1,1,()=>{T=null}),tt()):T?(T.p(E,P),P[0]&128&&se(T,1)):(T=gc(E),T.c(),se(T,1),T.m(t,i));const O={};P[0]&16&&(O.isVisible=E[4]),l.$set(O),(!b||P[0]&8)&&me(o,E[3]);const N={};P[0]&4&&(N.node_id=E[2]),P[0]&1&&(N.element_id=E[0].d3f_class),P[1]&112&&(N.$$scope={dirty:P,ctx:E}),_.$set(N),P[0]&2048&&k.value!==E[11]&&Me(k,E[11]),E[0].user_properties?U?U.p(E,P):(U=vc(E),U.c(),U.m(s,j)):U&&(U.d(1),U=null)},i(E){b||(se(B),se(T),se(l.$$.fragment,E),se(_.$$.fragment,E),b=!0)},o(E){fe(B),fe(T),fe(l.$$.fragment,E),fe(_.$$.fragment,E),b=!1},d(E){E&&(m(e),m(t)),B.d(E),T&&T.d(),Fe(l),Fe(_),U&&U.d(),y=!1,it(v)}}}function Hv(n,r,e){let t,i,s,l,a,u;Ye(n,sr,K=>e(30,a=K)),Ye(n,Qe,K=>e(6,u=K));var o,f,h,d;let{data:c}=r,{isConnectable:_}=r,{id:w}=r;c.user_properties=[];let{nodeType:k="EventNode"}=r,{nodeTypeLabel:C="Event"}=r,{selected:j=void 0}=r;function S(){F(),c.user_properties.push(["",""])}function F(){for(let K=0;K<a.length;K++)a[K].data==c&&ut(Qe,u=a[K],u)}const b=Yr();Ye(n,b,K=>e(5,l=K));let y=!1,v=!1;function B(){e(8,v=!0)}function T(){e(8,v=!1)}function U(){return l.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function E(){return v?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const P=K=>{e(0,c.label=K.currentTarget.value,c),ut(Qe,u.data.label=c.label,u)};function O(){t=this.value,e(11,t),e(0,c),e(6,u),e(20,o)}const N=(K,G)=>{e(0,c.user_properties[K][0]=G.currentTarget.value,c),ut(Qe,u.data.user_properties[K][0]=G.currentTarget.value,u)};function X(K){i[K][0]=this.value,e(10,i),e(0,c),e(6,u),e(21,f)}const L=(K,G)=>{e(0,c.user_properties[K][1]=G.currentTarget.value,c),ut(Qe,u.data.user_properties[K][1]=G.currentTarget.value,u)};function ae(K){s[K][1]=this.value,e(9,s),e(0,c),e(6,u),e(22,h)}return n.$$set=K=>{"data"in K&&e(0,c=K.data),"isConnectable"in K&&e(1,_=K.isConnectable),"id"in K&&e(2,w=K.id),"nodeType"in K&&e(19,k=K.nodeType),"nodeTypeLabel"in K&&e(3,C=K.nodeTypeLabel),"selected"in K&&e(4,j=K.selected)},n.$$.update=()=>{n.$$.dirty[0]&1048641&&e(11,t=(c==null?void 0:c.label)||"< label >"),n.$$.dirty[0]&2097217&&e(10,i=(c==null?void 0:c.user_properties)||(e(21,f=u==null?void 0:u.data)===null||f===void 0?void 0:f.user_properties)||"< Property >"),n.$$.dirty[0]&4194369&&e(9,s=(c==null?void 0:c.user_properties)||(e(22,h=u==null?void 0:u.data)===null||h===void 0?void 0:h.user_properties)||"< Value >"),n.$$.dirty[0]&8388644&&e(7,y=(e(23,d=l.toHandle)===null||d===void 0?void 0:d.nodeId)==w)},[c,_,w,C,j,l,u,y,v,s,i,t,S,F,b,B,T,U,E,k,o,f,h,d,P,O,N,X,L,ae]}class zv extends dt{constructor(r){super(),ht(this,r,Hv,Vv,Je,{data:0,isConnectable:1,id:2,nodeType:19,nodeTypeLabel:3,selected:4},null,[-1,-1])}}function wc(n,r){const e=n.internals.positionAbsolute||{x:0,y:0},t=r.internals.positionAbsolute||{x:0,y:0},i=(n.measured.width??0)/2,s=(n.measured.height??0)/2,l=e.x+i,a=e.y+s,u=t.x+(r.measured.width??0)/2,o=t.y+(r.measured.height??0)/2,f=(u-l)/(2*i)-(o-a)/(2*s),h=(u-l)/(2*i)+(o-a)/(2*s),d=1/(Math.abs(f)+Math.abs(h)),c=d*f,_=d*h,w=i*(c+_)+l,k=s*(-c+_)+a;return{x:w,y:k}}function yc(n,r){var l,a;if(!n.measured.width||!n.measured.height)return null;const e=Math.round(((l=n.internals.positionAbsolute)==null?void 0:l.x)??0),t=Math.round(((a=n.internals.positionAbsolute)==null?void 0:a.y)??0),i=Math.round(r.x),s=Math.round(r.y);return i<=e+1?nt.Left:i>=e+n.measured.width-1?nt.Right:s<=t+1?nt.Top:s>=t+n.measured.height-1?nt.Bottom:nt.Top}function ds(n,r){const e=wc(n,r),t=wc(r,n),i=yc(n,e),s=yc(r,t);return{sx:e.x,sy:e.y,tx:t.x,ty:t.y,sourcePos:i,targetPos:s}}function xv(n){let r,e;return r=new n[19].ItemProperty({props:{list:Vc,filter_value_store:n[20],select_item:n[21]}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i&1048576&&(s.filter_value_store=t[20]),i&2097152&&(s.select_item=t[21]),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function Xv(n){let r,e,t=`translate(-50%, -50%) translate(${n[5]}px,${n[6]}px)`,i;return e=new Zn({props:{node_id:n[0],element_id:n[1].label,input_color:"#ffffff00",place_holder:String(n[1].label),flow_store_hook:jr,data_save_key:"d3f_property",$$slots:{default:[xv,({R:s,filter_value_store:l,select_item:a})=>({19:s,20:l,21:a}),({R:s,filter_value_store:l,select_item:a})=>(s?524288:0)|(l?1048576:0)|(a?2097152:0)]},$$scope:{ctx:n}}}),{c(){r=Q("div"),Ce(e.$$.fragment),this.h()},l(s){r=Y(s,"DIV",{class:!0});var l=we(r);Ne(e.$$.fragment,l),l.forEach(m),this.h()},h(){ee(r,"class","edge-label-container svelte-566npr"),st(r,"transform",t)},m(s,l){A(s,r,l),Ie(e,r,null),i=!0},p(s,l){const a={};l&1&&(a.node_id=s[0]),l&2&&(a.element_id=s[1].label),l&2&&(a.place_holder=String(s[1].label)),l&7340032&&(a.$$scope={dirty:l,ctx:s}),e.$set(a),l&96&&t!==(t=`translate(-50%, -50%) translate(${s[5]}px,${s[6]}px)`)&&st(r,"transform",t)},i(s){i||(se(e.$$.fragment,s),i=!0)},o(s){fe(e.$$.fragment,s),i=!1},d(s){s&&m(r),Fe(e)}}}function Gv(n){let r,e,t,i;return r=new Dp({props:{path:n[4],markerEnd:n[2],style:n[3]}}),t=new Ap({props:{$$slots:{default:[Xv]},$$scope:{ctx:n}}}),{c(){Ce(r.$$.fragment),e=ie(),Ce(t.$$.fragment)},l(s){Ne(r.$$.fragment,s),e=le(s),Ne(t.$$.fragment,s)},m(s,l){Ie(r,s,l),A(s,e,l),Ie(t,s,l),i=!0},p(s,[l]){const a={};l&16&&(a.path=s[4]),l&4&&(a.markerEnd=s[2]),l&8&&(a.style=s[3]),r.$set(a);const u={};l&4194403&&(u.$$scope={dirty:l,ctx:s}),t.$set(u)},i(s){i||(se(r.$$.fragment,s),se(t.$$.fragment,s),i=!0)},o(s){fe(r.$$.fragment,s),fe(t.$$.fragment,s),i=!1},d(s){s&&m(e),Fe(r,s),Fe(t,s)}}}function Wv(n,r,e){let t,i,s,l=Le,a=()=>(l(),l=Mr(i,U=>e(17,s=U)),i),u,o=Le,f=()=>(o(),o=Mr(t,U=>e(18,u=U)),t);n.$$.on_destroy.push(()=>l()),n.$$.on_destroy.push(()=>o());let{id:h}=r,{data:d}=r,{sourceX:c}=r,{sourceY:_}=r,{source:w}=r,{sourcePosition:k}=r,{targetX:C}=r,{targetY:j}=r,{target:S}=r,{targetPosition:F}=r,{markerEnd:b=Bc.ArrowClosed}=r,{style:y="stroke-width: 2px"}=r,v,B,T;return n.$$set=U=>{"id"in U&&e(0,h=U.id),"data"in U&&e(1,d=U.data),"sourceX"in U&&e(9,c=U.sourceX),"sourceY"in U&&e(10,_=U.sourceY),"source"in U&&e(11,w=U.source),"sourcePosition"in U&&e(12,k=U.sourcePosition),"targetX"in U&&e(13,C=U.targetX),"targetY"in U&&e(14,j=U.targetY),"target"in U&&e(15,S=U.target),"targetPosition"in U&&e(16,F=U.targetPosition),"markerEnd"in U&&e(2,b=U.markerEnd),"style"in U&&e(3,y=U.style)},n.$$.update=()=>{if(n.$$.dirty&2048&&f(e(8,t=Qa(w))),n.$$.dirty&32768&&a(e(7,i=Qa(S))),n.$$.dirty&393216)if(u&&s){const U=ds(u,s);e(4,[v,B,T]=$l({sourceX:U.sx,sourceY:U.sy,sourcePosition:U.sourcePos,targetX:U.tx,targetY:U.ty,targetPosition:U.targetPos}),v,(e(5,B),e(18,u),e(17,s)),(e(6,T),e(18,u),e(17,s)))}else e(4,v=void 0)},[h,d,b,y,v,B,T,i,t,c,_,w,k,C,j,S,F,s,u]}class Qv extends dt{constructor(r){super(),ht(this,r,Wv,Gv,Je,{id:0,data:1,sourceX:9,sourceY:10,source:11,sourcePosition:12,targetX:13,targetY:14,target:15,targetPosition:16,markerEnd:2,style:3})}}function kc(n,r,e){const t=n.slice();return t[7]=r[e],t}function Ec(n){let r,e=xe(n[2]),t=[];for(let i=0;i<e.length;i+=1)t[i]=Dc(kc(n,e,i));return{c(){r=Q("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){r=Y(i,"DIV",{class:!0});var s=we(r);for(let l=0;l<t.length;l+=1)t[l].l(s);s.forEach(m),this.h()},h(){ee(r,"class","file-list svelte-9u10j")},m(i,s){A(i,r,s);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(r,null)},p(i,s){if(s&20){e=xe(i[2]);let l;for(l=0;l<e.length;l+=1){const a=kc(i,e,l);t[l]?t[l].p(a,s):(t[l]=Dc(a),t[l].c(),t[l].m(r,null))}for(;l<t.length;l+=1)t[l].d(1);t.length=e.length}},d(i){i&&m(r),mt(t,i)}}}function Dc(n){let r,e=n[7].name+"",t,i,s=n[7].nodeCount+"",l,a,u=n[7].edgeCount+"",o,f,h,d;function c(){return n[5](n[7])}return{c(){r=Q("div"),t=V(e),i=V(" ("),l=V(s),a=V(" nodes, "),o=V(u),f=V(` edges)
          `),this.h()},l(_){r=Y(_,"DIV",{class:!0});var w=we(r);t=H(w,e),i=H(w," ("),l=H(w,s),a=H(w," nodes, "),o=H(w,u),f=H(w,` edges)
          `),w.forEach(m),this.h()},h(){ee(r,"class","file-item svelte-9u10j")},m(_,w){A(_,r,w),M(r,t),M(r,i),M(r,l),M(r,a),M(r,o),M(r,f),h||(d=pe(r,"click",c),h=!0)},p(_,w){n=_,w&4&&e!==(e=n[7].name+"")&&me(t,e),w&4&&s!==(s=n[7].nodeCount+"")&&me(l,s),w&4&&u!==(u=n[7].edgeCount+"")&&me(o,u)},d(_){_&&m(r),h=!1,d()}}}function Yv(n){let r,e,t,i,s,l,a=n[1]&&Ec(n);return{c(){r=Q("div"),e=Q("button"),t=V(n[0]),i=ie(),a&&a.c(),this.h()},l(u){r=Y(u,"DIV",{class:!0});var o=we(r);e=Y(o,"BUTTON",{class:!0});var f=we(e);t=H(f,n[0]),f.forEach(m),i=le(o),a&&a.l(o),o.forEach(m),this.h()},h(){ee(e,"class","svelte-9u10j"),ee(r,"class","pick-list-container svelte-9u10j")},m(u,o){A(u,r,o),M(r,e),M(e,t),M(r,i),a&&a.m(r,null),s||(l=pe(e,"click",n[3]),s=!0)},p(u,[o]){o&1&&me(t,u[0]),u[1]?a?a.p(u,o):(a=Ec(u),a.c(),a.m(r,null)):a&&(a.d(1),a=null)},i:Le,o:Le,d(u){u&&m(r),a&&a.d(),s=!1,l()}}}async function Jv(){return await(await fetch("/cad/examples.json")).json()}function Zv(n,r,e){const t=_s();let i=!1,{selectedFile:s="Example Graphs"}=r,l=[];function a(){e(1,i=!i)}function u(f){e(0,s=f),e(1,i=!1),t("fileSelected",f)}hl(async()=>{e(2,l=await Jv())});const o=f=>u(f.name);return n.$$set=f=>{"selectedFile"in f&&e(0,s=f.selectedFile)},[s,i,l,a,u,o]}class Kv extends dt{constructor(r){super(),ht(this,r,Zv,Yv,Je,{selectedFile:0})}}function Ac(n){let r,e,t,i,s;return{c(){r=Ta("path"),e=ie(),t=Ta("circle"),this.h()},l(l){r=Ca(l,"path",{fill:!0,"stroke-width":!0,class:!0,stroke:!0,d:!0}),we(r).forEach(m),e=le(l),t=Ca(l,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),we(t).forEach(m),this.h()},h(){ee(r,"fill","transparent"),ee(r,"stroke-width",2.5),ee(r,"class","animated"),ee(r,"stroke","black"),ee(r,"d",n[2]),ee(t,"cx",i=n[0].tx),ee(t,"cy",s=n[0].ty),ee(t,"r",3),ee(t,"stroke","black"),ee(t,"stroke-width",1.5)},m(l,a){A(l,r,a),A(l,e,a),A(l,t,a)},p(l,a){a&4&&ee(r,"d",l[2]),a&1&&i!==(i=l[0].tx)&&ee(t,"cx",i),a&1&&s!==(s=l[0].ty)&&ee(t,"cy",s)},d(l){l&&(m(r),m(e),m(t))}}}function $v(n){let r,e=n[1].inProgress&&Ac(n);return{c(){e&&e.c(),r=Ae()},l(t){e&&e.l(t),r=Ae()},m(t,i){e&&e.m(t,i),A(t,r,i)},p(t,[i]){t[1].inProgress?e?e.p(t,i):(e=Ac(t),e.c(),e.m(r.parentNode,r)):e&&(e.d(1),e=null)},i:Le,o:Le,d(t){t&&m(r),e&&e.d(t)}}}function eb(n,r,e){let t;const i=Yr();Ye(n,i,a=>e(1,t=a));let s,l;return n.$$.update=()=>{if(n.$$.dirty&3){const a=structuredClone(t.fromNode);t.isValid?(e(0,l=ds(t.fromNode,t.toNode)),e(2,s=$l({sourceX:l.sx,sourceY:l.sy,sourcePosition:l.sourcePos,targetX:l.tx,targetY:l.ty,targetPosition:l.targetPos})[0])):(a.id="-1",a.measured={width:1,height:1},a.position={x:t.to.x,y:t.to.y},a.internals.positionAbsolute={x:t.to.x,y:t.to.y},e(0,l=ds(t.fromNode,a)),e(2,s=$l({sourceX:l.sx,sourceY:l.sy,sourcePosition:l.sourcePos,targetX:l.tx,targetY:l.ty,targetPosition:l.targetPos})[0]))}},[l,t,s,i]}class tb extends dt{constructor(r){super(),ht(this,r,eb,$v,Je,{})}}function rb(n){let r,e='This is an (very) alpha-level preview release. Please review and file bugs <a href="https://github.com/d3fend/d3fend/issues/14">here. </a>Early stage <a href="./docs">docs.</a>';return{c(){r=Q("div"),r.innerHTML=e,this.h()},l(t){r=Y(t,"DIV",{class:!0,"data-svelte-h":!0}),We(r)!=="svelte-hoyi2c"&&(r.innerHTML=e),this.h()},h(){ee(r,"class","font-medium")},m(t,i){A(t,r,i)},p:Le,d(t){t&&m(r)}}}function nb(n){let r;return{c(){r=V("Please only load models from URLs you trust!")},l(e){r=H(e,"Please only load models from URLs you trust!")},m(e,t){A(e,r,t)},d(e){e&&m(r)}}}function ib(n){let r,e,t,i,s,l,a,u,o,f,h;return f=new _l({props:{$$slots:{default:[nb]},$$scope:{ctx:n}}}),{c(){r=Q("br"),e=ie(),t=Q("code"),i=V(n[4]),s=ie(),l=Q("br"),a=ie(),u=Q("br"),o=ie(),Ce(f.$$.fragment),this.h()},l(d){r=Y(d,"BR",{}),e=le(d),t=Y(d,"CODE",{class:!0});var c=we(t);i=H(c,n[4]),c.forEach(m),s=le(d),l=Y(d,"BR",{}),a=le(d),u=Y(d,"BR",{}),o=le(d),Ne(f.$$.fragment,d),this.h()},h(){ee(t,"class","center text-center")},m(d,c){A(d,r,c),A(d,e,c),A(d,t,c),M(t,i),A(d,s,c),A(d,l,c),A(d,a,c),A(d,u,c),A(d,o,c),Ie(f,d,c),h=!0},p(d,c){(!h||c[0]&16)&&me(i,d[4]);const _={};c[1]&33554432&&(_.$$scope={dirty:c,ctx:d}),f.$set(_)},i(d){h||(se(f.$$.fragment,d),h=!0)},o(d){fe(f.$$.fragment,d),h=!1},d(d){d&&(m(r),m(e),m(t),m(s),m(l),m(a),m(u),m(o)),Fe(f,d)}}}function lb(n){let r;return{c(){r=V("Please only load models from URLs you trust!")},l(e){r=H(e,"Please only load models from URLs you trust!")},m(e,t){A(e,r,t)},d(e){e&&m(r)}}}function sb(n){let r,e,t,i,s,l;return s=new _l({props:{$$slots:{default:[lb]},$$scope:{ctx:n}}}),{c(){r=Q("br"),e=ie(),t=Q("br"),i=ie(),Ce(s.$$.fragment)},l(a){r=Y(a,"BR",{}),e=le(a),t=Y(a,"BR",{}),i=le(a),Ne(s.$$.fragment,a)},m(a,u){A(a,r,u),A(a,e,u),A(a,t,u),A(a,i,u),Ie(s,a,u),l=!0},p(a,u){const o={};u[1]&33554432&&(o.$$scope={dirty:u,ctx:a}),s.$set(o)},i(a){l||(se(s.$$.fragment,a),l=!0)},o(a){fe(s.$$.fragment,a),l=!1},d(a){a&&(m(r),m(e),m(t),m(i)),Fe(s,a)}}}function Tc(n){let r,e,t,i;return r=new _l({props:{alert_type:"warning",$$slots:{default:[ab]},$$scope:{ctx:n}}}),{c(){Ce(r.$$.fragment),e=ie(),t=Q("br")},l(s){Ne(r.$$.fragment,s),e=le(s),t=Y(s,"BR",{})},m(s,l){Ie(r,s,l),A(s,e,l),A(s,t,l),i=!0},i(s){i||(se(r.$$.fragment,s),i=!0)},o(s){fe(r.$$.fragment,s),i=!1},d(s){s&&(m(e),m(t)),Fe(r,s)}}}function ab(n){let r;return{c(){r=V("Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},l(e){r=H(e,"Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},m(e,t){A(e,r,t)},d(e){e&&m(r)}}}function ub(n){let r,e,t,i,s=n[12].length+"",l,a,u,o,f,h,d,c,_,w,k="copy",C,j,S,F=n[12].length>2048&&Tc(n);return{c(){F&&F.c(),r=ie(),e=Q("div"),t=Q("code"),i=V("The encoded model has a string length of "),l=V(s),a=V(" characters."),u=ie(),o=Q("p"),f=Q("button"),h=Q("a"),d=V("Share URL"),c=ie(),_=Q("span"),w=Q("button"),w.textContent=k,this.h()},l(b){F&&F.l(b),r=le(b),e=Y(b,"DIV",{});var y=we(e);t=Y(y,"CODE",{});var v=we(t);i=H(v,"The encoded model has a string length of "),l=H(v,s),a=H(v," characters."),v.forEach(m),y.forEach(m),u=le(b),o=Y(b,"P",{});var B=we(o);f=Y(B,"BUTTON",{class:!0});var T=we(f);h=Y(T,"A",{href:!0});var U=we(h);d=H(U,"Share URL"),U.forEach(m),T.forEach(m),c=le(B),_=Y(B,"SPAN",{});var E=we(_);w=Y(E,"BUTTON",{class:!0,"data-svelte-h":!0}),We(w)!=="svelte-1uua65l"&&(w.textContent=k),E.forEach(m),B.forEach(m),this.h()},h(){ee(h,"href",n[13]),ee(f,"class","svelte-a67pct"),ee(w,"class","svelte-a67pct")},m(b,y){F&&F.m(b,y),A(b,r,y),A(b,e,y),M(e,t),M(t,i),M(t,l),M(t,a),A(b,u,y),A(b,o,y),M(o,f),M(f,h),M(h,d),M(o,c),M(o,_),M(_,w),C=!0,j||(S=pe(w,"click",n[33]),j=!0)},p(b,y){b[12].length>2048?F?y[0]&4096&&se(F,1):(F=Tc(b),F.c(),se(F,1),F.m(r.parentNode,r)):F&&(et(),fe(F,1,1,()=>{F=null}),tt()),(!C||y[0]&4096)&&s!==(s=b[12].length+"")&&me(l,s),(!C||y[0]&8192)&&ee(h,"href",b[13])},i(b){C||(se(F),C=!0)},o(b){fe(F),C=!1},d(b){b&&(m(r),m(e),m(u),m(o)),F&&F.d(b),j=!1,S()}}}function Cc(n){let r,e,t,i,s,l,a;return t=new Lp({props:{display:"inline"}}),{c(){r=Q("span"),e=Q("span"),Ce(t.$$.fragment),i=ie(),s=Q("span"),l=V(n[15]),this.h()},l(u){r=Y(u,"SPAN",{class:!0});var o=we(r);e=Y(o,"SPAN",{});var f=we(e);Ne(t.$$.fragment,f),f.forEach(m),i=le(o),s=Y(o,"SPAN",{});var h=we(s);l=H(h,n[15]),h.forEach(m),o.forEach(m),this.h()},h(){ee(r,"class","right")},m(u,o){A(u,r,o),M(r,e),Ie(t,e,null),M(r,i),M(r,s),M(s,l),a=!0},p(u,o){(!a||o[0]&32768)&&me(l,u[15])},i(u){a||(se(t.$$.fragment,u),a=!0)},o(u){fe(t.$$.fragment,u),a=!1},d(u){u&&m(r),Fe(t)}}}function Nc(n){let r,e;return r=new Lm({props:{onClick:n[29],id:n[8].id,top:n[8].top,left:n[8].left,right:n[8].right,bottom:n[8].bottom}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,i){const s={};i[0]&256&&(s.id=t[8].id),i[0]&256&&(s.top=t[8].top),i[0]&256&&(s.left=t[8].left),i[0]&256&&(s.right=t[8].right),i[0]&256&&(s.bottom=t[8].bottom),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function ob(n){let r,e,t,i,s,l,a;r=new Cp({props:{position:"top-left"}}),t=new Np({props:{variant:Ip.Dots}});let u=n[8]&&Nc(n);return l=new Fp({props:{position:"top-right"}}),{c(){Ce(r.$$.fragment),e=ie(),Ce(t.$$.fragment),i=ie(),u&&u.c(),s=ie(),Ce(l.$$.fragment)},l(o){Ne(r.$$.fragment,o),e=le(o),Ne(t.$$.fragment,o),i=le(o),u&&u.l(o),s=le(o),Ne(l.$$.fragment,o)},m(o,f){Ie(r,o,f),A(o,e,f),Ie(t,o,f),A(o,i,f),u&&u.m(o,f),A(o,s,f),Ie(l,o,f),a=!0},p(o,f){o[8]?u?(u.p(o,f),f[0]&256&&se(u,1)):(u=Nc(o),u.c(),se(u,1),u.m(s.parentNode,s)):u&&(et(),fe(u,1,1,()=>{u=null}),tt())},i(o){a||(se(r.$$.fragment,o),se(t.$$.fragment,o),se(u),se(l.$$.fragment,o),a=!0)},o(o){fe(r.$$.fragment,o),fe(t.$$.fragment,o),fe(u),fe(l.$$.fragment,o),a=!1},d(o){o&&(m(e),m(i),m(s)),Fe(r,o),Fe(t,o),u&&u.d(o),Fe(l,o)}}}function fb(n){let r,e;return r=new tb({props:{slot:"connectionLine"}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p:Le,i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function Ic(n){let r,e="<b>-</b>",t,i;return{c(){r=Q("button"),r.innerHTML=e,this.h()},l(s){r=Y(s,"BUTTON",{class:!0,"data-svelte-h":!0}),We(r)!=="svelte-1nlkb58"&&(r.innerHTML=e),this.h()},h(){ee(r,"class","svelte-a67pct")},m(s,l){A(s,r,l),t||(i=pe(r,"click",n[39]),t=!0)},p:Le,d(s){s&&m(r),t=!1,i()}}}function Fc(n){let r,e="<b>+</b>",t,i;return{c(){r=Q("button"),r.innerHTML=e,this.h()},l(s){r=Y(s,"BUTTON",{class:!0,"data-svelte-h":!0}),We(r)!=="svelte-efi5au"&&(r.innerHTML=e),this.h()},h(){ee(r,"class","svelte-a67pct")},m(s,l){A(s,r,l),t||(i=pe(r,"click",n[40]),t=!0)},p:Le,d(s){s&&m(r),t=!1,i()}}}function cb(n){let r,e,t,i,s,l,a,u,o,f,h,d,c,_,w,k,C,j="Load",S,F,b="Merge",y,v,B="Clear",T,U,E="Save",P,O,N,X="Save As...",L,ae="Save As JSON...",K,G="Save As Turtle...",$,J,ne="Share",z,ue,Pe,He,be,De,_e,Te,lt,gt,rt,Ee,Ue,Jt,Pt,Wt,cr,Be,Ke,Ge;function $e(ke){n[31](ke)}let pt={title:n[2].title,content:n[2].content,options:n[2].options,$$slots:{default:[ib]},$$scope:{ctx:n}};n[2].is_open!==void 0&&(pt.is_open=n[2].is_open),r=new ef({props:pt}),It.push(()=>lr(r,"is_open",$e)),r.$on("optionSelected",n[16]);function At(ke){n[32](ke)}let qt={title:n[3].title,content:n[3].content,options:n[3].options,$$slots:{default:[sb]},$$scope:{ctx:n}};n[3].is_open!==void 0&&(qt.is_open=n[3].is_open),i=new ef({props:qt}),It.push(()=>lr(i,"is_open",At)),i.$on("optionSelected",n[17]);function x(ke){n[34](ke)}let D={title:"Share this model with a URL",$$slots:{default:[ub]},$$scope:{ctx:n}};n[11]!==void 0&&(D.is_open=n[11]),a=new jm({props:D}),It.push(()=>lr(a,"is_open",x));function I(ke){n[35](ke)}let Z={};n[7]!==void 0&&(Z.selectedFile=n[7]),h=new Kv({props:Z}),It.push(()=>lr(h,"selectedFile",I)),h.$on("fileSelected",n[26]);let oe=n[15]&&Cc(n);Te=new Tp({props:{nodes:sr,nodeTypes:n[0],edges:bi,edgeTypes:n[1],fitView:!0,defaultEdgeOptions:n[18],$$slots:{connectionLine:[fb],default:[ob]},$$scope:{ctx:n}}}),Te.$on("dragover",n[23]),Te.$on("drop",n[25]),Te.$on("connect",n[24]),Te.$on("nodecontextmenu",n[28]),Te.$on("paneclick",n[29]),Te.$on("onedgecreate",hb),gt=new Gm({});let ge=n[14]&&Ic(n),ye=!n[14]&&Fc(n);return Wt=new Km({}),{c(){Ce(r.$$.fragment),t=ie(),Ce(i.$$.fragment),l=ie(),Ce(a.$$.fragment),o=ie(),f=Q("div"),Ce(h.$$.fragment),c=ie(),_=Q("br"),w=ie(),k=Q("div"),C=Q("button"),C.textContent=j,S=ie(),F=Q("button"),F.textContent=b,y=ie(),v=Q("button"),v.textContent=B,T=ie(),U=Q("button"),U.textContent=E,P=ie(),O=Q("select"),N=Q("option"),N.textContent=X,L=Q("option"),L.textContent=ae,K=Q("option"),K.textContent=G,$=ie(),J=Q("button"),J.textContent=ne,z=V(`
        filename:    `),ue=Q("input"),Pe=ie(),oe&&oe.c(),He=ie(),be=Q("main"),De=Q("div"),_e=Q("div"),Ce(Te.$$.fragment),lt=ie(),Ce(gt.$$.fragment),Ee=ie(),Ue=Q("div"),ge&&ge.c(),Jt=ie(),ye&&ye.c(),Pt=ie(),Ce(Wt.$$.fragment),this.h()},l(ke){Ne(r.$$.fragment,ke),t=le(ke),Ne(i.$$.fragment,ke),l=le(ke),Ne(a.$$.fragment,ke),o=le(ke),f=Y(ke,"DIV",{class:!0});var qe=we(f);Ne(h.$$.fragment,qe),qe.forEach(m),c=le(ke),_=Y(ke,"BR",{}),w=le(ke),k=Y(ke,"DIV",{id:!0,class:!0});var Xe=we(k);C=Y(Xe,"BUTTON",{class:!0,"data-svelte-h":!0}),We(C)!=="svelte-r4end6"&&(C.textContent=j),S=le(Xe),F=Y(Xe,"BUTTON",{class:!0,"data-svelte-h":!0}),We(F)!=="svelte-1s1l97g"&&(F.textContent=b),y=le(Xe),v=Y(Xe,"BUTTON",{class:!0,"data-svelte-h":!0}),We(v)!=="svelte-1o4uly3"&&(v.textContent=B),T=le(Xe),U=Y(Xe,"BUTTON",{class:!0,"data-svelte-h":!0}),We(U)!=="svelte-qm8vdx"&&(U.textContent=E),P=le(Xe),O=Y(Xe,"SELECT",{class:!0});var ct=we(O);N=Y(ct,"OPTION",{"data-svelte-h":!0}),We(N)!=="svelte-hmrlsb"&&(N.textContent=X),L=Y(ct,"OPTION",{"data-svelte-h":!0}),We(L)!=="svelte-1q30tr1"&&(L.textContent=ae),K=Y(ct,"OPTION",{"data-svelte-h":!0}),We(K)!=="svelte-pf55hp"&&(K.textContent=G),ct.forEach(m),$=le(Xe),J=Y(Xe,"BUTTON",{class:!0,"data-svelte-h":!0}),We(J)!=="svelte-mqt2ui"&&(J.textContent=ne),z=H(Xe,`
        filename:    `),ue=Y(Xe,"INPUT",{style:!0,type:!0}),Pe=le(Xe),oe&&oe.l(Xe),Xe.forEach(m),He=le(ke),be=Y(ke,"MAIN",{});var at=we(be);De=Y(at,"DIV",{id:!0,class:!0});var er=we(De);_e=Y(er,"DIV",{id:!0,class:!0});var kr=we(_e);Ne(Te.$$.fragment,kr),lt=le(kr),Ne(gt.$$.fragment,kr),kr.forEach(m),Ee=le(er),Ue=Y(er,"DIV",{class:!0});var Qt=we(Ue);ge&&ge.l(Qt),Jt=le(Qt),ye&&ye.l(Qt),Pt=le(Qt),Ne(Wt.$$.fragment,Qt),Qt.forEach(m),er.forEach(m),at.forEach(m),this.h()},h(){ee(f,"class","toolbar-examples"),ee(C,"class","svelte-a67pct"),ee(F,"class","svelte-a67pct"),ee(v,"class","svelte-a67pct"),ee(U,"class","svelte-a67pct"),N.__value="",Me(N,N.__value),L.__value="json",Me(L,L.__value),K.__value="turtle",Me(K,K.__value),ee(O,"class","save-as-dropdown svelte-a67pct"),n[6]===void 0&&Kl(()=>n[36].call(O)),ee(J,"class"," svelte-a67pct"),st(ue,"width","275px"),ee(ue,"type","text"),ee(k,"id","toolbar"),ee(k,"class","svelte-a67pct"),ee(_e,"id","flow"),ee(_e,"class","svelte-a67pct"),Kl(()=>n[38].call(_e)),ee(Ue,"class",cr="side-panel "+(n[14]?"open":"close")+" svelte-a67pct"),ee(De,"id","main-container"),ee(De,"class","svelte-a67pct")},m(ke,qe){Ie(r,ke,qe),A(ke,t,qe),Ie(i,ke,qe),A(ke,l,qe),Ie(a,ke,qe),A(ke,o,qe),A(ke,f,qe),Ie(h,f,null),A(ke,c,qe),A(ke,_,qe),A(ke,w,qe),A(ke,k,qe),M(k,C),M(k,S),M(k,F),M(k,y),M(k,v),M(k,T),M(k,U),M(k,P),M(k,O),M(O,N),M(O,L),M(O,K),Na(O,n[6],!0),M(k,$),M(k,J),M(k,z),M(k,ue),Me(ue,n[5]),M(k,Pe),oe&&oe.m(k,null),A(ke,He,qe),A(ke,be,qe),M(be,De),M(De,_e),Ie(Te,_e,null),M(_e,lt),Ie(gt,_e,null),rt=op(_e,n[38].bind(_e)),M(De,Ee),M(De,Ue),ge&&ge.m(Ue,null),M(Ue,Jt),ye&&ye.m(Ue,null),M(Ue,Pt),Ie(Wt,Ue,null),Be=!0,Ke||(Ge=[pe(C,"click",n[21]),pe(F,"click",n[22]),pe(v,"click",n[27]),pe(U,"click",n[19]),pe(O,"change",n[36]),pe(O,"change",n[20]),pe(J,"click",n[30]),pe(ue,"input",n[37])],Ke=!0)},p(ke,qe){const Xe={};qe[0]&4&&(Xe.title=ke[2].title),qe[0]&4&&(Xe.content=ke[2].content),qe[0]&4&&(Xe.options=ke[2].options),qe[0]&16|qe[1]&33554432&&(Xe.$$scope={dirty:qe,ctx:ke}),!e&&qe[0]&4&&(e=!0,Xe.is_open=ke[2].is_open,ir(()=>e=!1)),r.$set(Xe);const ct={};qe[0]&8&&(ct.title=ke[3].title),qe[0]&8&&(ct.content=ke[3].content),qe[0]&8&&(ct.options=ke[3].options),qe[1]&33554432&&(ct.$$scope={dirty:qe,ctx:ke}),!s&&qe[0]&8&&(s=!0,ct.is_open=ke[3].is_open,ir(()=>s=!1)),i.$set(ct);const at={};qe[0]&12288|qe[1]&33554432&&(at.$$scope={dirty:qe,ctx:ke}),!u&&qe[0]&2048&&(u=!0,at.is_open=ke[11],ir(()=>u=!1)),a.$set(at);const er={};!d&&qe[0]&128&&(d=!0,er.selectedFile=ke[7],ir(()=>d=!1)),h.$set(er),qe[0]&64&&Na(O,ke[6]),qe[0]&32&&ue.value!==ke[5]&&Me(ue,ke[5]),ke[15]?oe?(oe.p(ke,qe),qe[0]&32768&&se(oe,1)):(oe=Cc(ke),oe.c(),se(oe,1),oe.m(k,null)):oe&&(et(),fe(oe,1,1,()=>{oe=null}),tt());const kr={};qe[0]&256|qe[1]&33554432&&(kr.$$scope={dirty:qe,ctx:ke}),Te.$set(kr),ke[14]?ge?ge.p(ke,qe):(ge=Ic(ke),ge.c(),ge.m(Ue,Jt)):ge&&(ge.d(1),ge=null),ke[14]?ye&&(ye.d(1),ye=null):ye?ye.p(ke,qe):(ye=Fc(ke),ye.c(),ye.m(Ue,Pt)),(!Be||qe[0]&16384&&cr!==(cr="side-panel "+(ke[14]?"open":"close")+" svelte-a67pct"))&&ee(Ue,"class",cr)},i(ke){Be||(se(r.$$.fragment,ke),se(i.$$.fragment,ke),se(a.$$.fragment,ke),se(h.$$.fragment,ke),se(oe),se(Te.$$.fragment,ke),se(gt.$$.fragment,ke),se(Wt.$$.fragment,ke),Be=!0)},o(ke){fe(r.$$.fragment,ke),fe(i.$$.fragment,ke),fe(a.$$.fragment,ke),fe(h.$$.fragment,ke),fe(oe),fe(Te.$$.fragment,ke),fe(gt.$$.fragment,ke),fe(Wt.$$.fragment,ke),Be=!1},d(ke){ke&&(m(t),m(l),m(o),m(f),m(c),m(_),m(w),m(k),m(He),m(be)),Fe(r,ke),Fe(i,ke),Fe(a,ke),Fe(h),oe&&oe.d(),Fe(Te),Fe(gt),rt(),ge&&ge.d(),ye&&ye.d(),Fe(Wt),Ke=!1,it(Ge)}}}function db(n){let r,e,t,i,s,l,a='D3FEND <span class="snakes">☤</span> <span class="CAD"><span style="color:#e62929;">C</span><span class="A svelte-a67pct" style="color:white;text-border:1px;">A</span><span style="color:blue;">D</span></span>',u,o,f="<i>Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios</i>",h,d,c,_,w,k,C;return r=new Up({props:{title:"D3FEND CAD Tool",og_title:"D3FEND CAD Tool",og_description:"Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios",og_type:"app"}}),_=new _l({props:{alert_type:"warning",$$slots:{default:[rb]},$$scope:{ctx:n}}}),k=new zm({props:{position:"right",$$slots:{default:[cb]},$$scope:{ctx:n}}}),{c(){Ce(r.$$.fragment),e=ie(),t=Q("div"),i=Q("div"),s=Q("div"),l=Q("h1"),l.innerHTML=a,u=ie(),o=Q("div"),o.innerHTML=f,h=ie(),d=Q("br"),c=ie(),Ce(_.$$.fragment),w=ie(),Ce(k.$$.fragment),this.h()},l(j){Ne(r.$$.fragment,j),e=le(j),t=Y(j,"DIV",{class:!0});var S=we(t);i=Y(S,"DIV",{style:!0});var F=we(i);s=Y(F,"DIV",{style:!0});var b=we(s);l=Y(b,"H1",{class:!0,"data-svelte-h":!0}),We(l)!=="svelte-1hfeq8z"&&(l.innerHTML=a),u=le(b),o=Y(b,"DIV",{style:!0,"data-svelte-h":!0}),We(o)!=="svelte-1adqejh"&&(o.innerHTML=f),h=le(b),d=Y(b,"BR",{}),c=le(b),Ne(_.$$.fragment,b),b.forEach(m),F.forEach(m),S.forEach(m),w=le(j),Ne(k.$$.fragment,j),this.h()},h(){ee(l,"class","fancy-font svelte-a67pct"),st(o,"text-align","center"),st(o,"padding","0 px"),st(s,"text-align","center"),st(s,"flex-grow","1"),st(i,"display","flex"),st(i,"just-content","space-between"),st(i,"align-items","center"),ee(t,"class","title-egg")},m(j,S){Ie(r,j,S),A(j,e,S),A(j,t,S),M(t,i),M(i,s),M(s,l),M(s,u),M(s,o),M(s,h),M(s,d),M(s,c),Ie(_,s,null),A(j,w,S),Ie(k,j,S),C=!0},p(j,S){const F={};S[1]&33554432&&(F.$$scope={dirty:S,ctx:j}),_.$set(F);const b={};S[0]&65532|S[1]&33554432&&(b.$$scope={dirty:S,ctx:j}),k.$set(b)},i(j){C||(se(r.$$.fragment,j),se(_.$$.fragment,j),se(k.$$.fragment,j),C=!0)},o(j){fe(r.$$.fragment,j),fe(_.$$.fragment,j),fe(k.$$.fragment,j),C=!1},d(j){j&&(m(e),m(t),m(w)),Fe(r,j),Fe(_),Fe(k,j)}}}function hb(n){console.log(n),console.log(n)}function _b(n,r,e){let t,i,s,l;Ye(n,dp,Be=>e(42,t=Be)),Ye(n,bi,Be=>e(43,i=Be)),Ye(n,sr,Be=>e(44,s=Be)),Ye(n,or,Be=>e(15,l=Be));var a=this&&this.__awaiter||function(Be,Ke,Ge,$e){function pt(At){return At instanceof Ge?At:new Ge(function(qt){qt(At)})}return new(Ge||(Ge=Promise))(function(At,qt){function x(Z){try{I($e.next(Z))}catch(oe){qt(oe)}}function D(Z){try{I($e.throw(Z))}catch(oe){qt(oe)}}function I(Z){Z.done?At(Z.value):pt(Z.value).then(x,D)}I(($e=$e.apply(Be,Ke||[])).next())})};let u={is_open:!1,title:"Confirmation to load remote model from URL",content:"This page is instructing D3FEND to remotely load a CAD model from this URL:",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},o={is_open:!1,title:"Confirmation to load remote model from compressed URL",content:"This page is instructing D3FEND to load a CAD model from this URL",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},f;t.url.searchParams.get("load")&&(f=t.url.searchParams.get("load"),u.is_open=!0),t.url.searchParams.get("loadg")&&(o.is_open=!0);function h(Be){const Ke=Be.detail;Ke.value==="load"?(or.add("loading remote URL"),T(f),or.clear()):Ke.value}function d(Be){const Ke=Be.detail;if(Ke.value==="load"){or.add("loading graph from URL");const Ge=t.url.searchParams.get("loadg"),$e=qa.uncrush(Ge);let pt=JSON.parse($e);y(pt),or.clear()}else Ke.value}hl(()=>{or.add("Mounting app...");try{Us.initialize(),or.clear()}catch(Be){console.error("Failed to initialize Oxigraph in +layout.svelte",Be),Be.message}});const c={artifactSelectorNode:Tv,vulnerabilitySelectorNode:kv,attackSelectorNode:vv,countermeasureSelectorNode:Fv,informationSelectorNode:Bv,conditionDefinitionNode:Uv,agentSelectorNode:qv,eventNode:zv},_={editableEdge:Qv};let w={type:"editableEdge",data:{label:void 0},markerEnd:{type:Bc.ArrowClosed}},k="d3fend-cad.json",C="";function j(){const Be=JSON.stringify({nodes:s,edges:i},null,4),Ke=new Blob([Be],{type:"application/json"}),Ge=window.URL.createObjectURL(Ke),$e=document.createElement("a");$e.href=Ge,$e.download=k,document.body.appendChild($e),$e.click(),document.body.removeChild($e),window.URL.revokeObjectURL(Ge)}function S(){C==="json"?b():C==="turtle"&&F(),e(6,C="")}function F(){or.add("generating ttl file"),console.log("!!! Turtle export engaged !!!"),K2().then(Be=>{or.clear();const Ke=new Blob([Be],{type:"text/turtle"}),Ge=window.URL.createObjectURL(Ke),$e=document.createElement("a");$e.href=Ge;let pt=prompt("Enter filename to save as Turtle file",k.replace("json","ttl"));pt&&($e.download=pt,document.body.appendChild($e),$e.click(),document.body.removeChild($e)),window.URL.revokeObjectURL(Ge)}).catch(Be=>{console.error("Error serializing graph to Turtle: ",Be)})}function b(){const Be=JSON.stringify({nodes:s,edges:i},null,4),Ke=new Blob([Be],{type:"application/json"}),Ge=window.URL.createObjectURL(Ke),$e=document.createElement("a");$e.href=Ge;let pt=prompt("Enter filename to save as JSON file",k);e(5,k=pt),pt&&($e.download=pt,document.body.appendChild($e),$e.click(),document.body.removeChild($e)),window.URL.revokeObjectURL(Ge)}function y(Be){try{const Ke=Be.nodes,Ge=Be.edges;or.add("loading graph from data..."),nl(Ke,Ge),or.clear()}catch(Ke){console.error("Error parsing JSON:",Ke)}}function v(Be){const Ke=Be.target.files[0];if(Ke){const Ge=new FileReader;Ge.onload=$e=>{if(typeof $e.target.result=="string"){console.log($e.target.result);try{const pt=JSON.parse($e.target.result),At=pt.nodes,qt=pt.edges;nl(At,qt)}catch(pt){console.error("Error parsing JSON:",pt)}}else console.error("File content is not a string.")},Ge.onerror=()=>{console.error("Error reading file:",Ge.error)},Ge.readAsText(Ke)}}function B(Be){const Ke=Be.target.files[0];if(Ke){const Ge=new FileReader;Ge.onload=$e=>{if(typeof $e.target.result=="string"){console.log($e.target.result);try{const pt=JSON.parse($e.target.result);sr.set([...s,...pt.nodes]),bi.set([...i,...pt.edges]),alert(` added ${pt.nodes.length} nodes and ${pt.edges.length} edges to the current graph `)}catch(pt){console.error("Error parsing JSON:",pt),alert(`Error parsing JSON:", ${pt}`)}}else console.error("File content is not a string."),alert("File content is not a string.")},Ge.onerror=()=>{console.error("Error reading file:",Ge.error),alert(`Error reading file: ${Ge.error}`)},Ge.readAsText(Ke)}}function T(Be){return a(this,void 0,void 0,function*(){if(Be)try{const Ge=yield(yield fetch(Be)).json(),$e=Ge.nodes,pt=Ge.edges;nl($e,pt)}catch(Ke){console.error("Error parsing JSON:",Ke)}})}function U(){const Be=document.createElement("input");Be.type="file",Be.accept=".json",Be.onchange=Ke=>{v(Ke)},Be.click()}function E(){const Be=document.createElement("input");Be.type="file",Be.accept=".json",Be.onchange=Ke=>{B(Ke)},Be.click()}const{screenToFlowPosition:P}=Zp(),O=Be=>{Be.preventDefault(),Be.dataTransfer&&(Be.dataTransfer.dropEffect="move")},N=Be=>console.log("handle onConnect",Be),X=Be=>{if(Be.preventDefault(),!Be.dataTransfer)return null;const Ke=Be.dataTransfer.getData("application/svelteflow"),Ge=P({x:Be.clientX,y:Be.clientY}),$e={id:`${Math.random()}`,type:Ke,position:Ge,data:{label:null,sequence:"0"},origin:[.5,0]};s.push($e),sr.set(s)};function L(Be){return a(this,void 0,void 0,function*(){const Ke=Be.detail;try{const Ge=yield fetch(`/resources/cad/examples/${Ke}`);if(!Ge.ok)throw new Error(`HTTP error! status: ${Ge.status}`);const $e=yield Ge.json();console.log("Selected file contents:",$e),y($e)}catch(Ge){console.error("Error fetching JSON file:",Ge)}})}let ae;function K(){J2(),e(7,ae="Example Graphs")}let G,$,J;function ne({detail:{event:Be,node:Ke}}){Be.preventDefault();let Ge=50;e(8,G={id:Ke.id,top:Be.clientY<J-Ge?Be.clientY:void 0,left:Be.clientX<$-Ge?Be.clientX:void 0,right:Be.clientX>=$-Ge?$-Be.clientX:void 0,bottom:Be.clientY>=J-Ge?J-Be.clientY:void 0}),ue({detail:{event:Be,node:Ke}})}function z(){e(8,G=null),Qe.set(null)}function ue({detail:{event:Be,node:Ke}}){Qe.set(Ke)}let Pe=!1,He,be;function De(){or.add("compressing graph to string..."),e(11,Pe=!0);const Be=qa.crush(JSON.stringify({nodes:s,edges:i}));e(12,He=encodeURIComponent(Be)),e(13,be=t.url.origin+`/cad/?loadg=${He}`),or.clear()}let _e=!0;function Te(Be){n.$$.not_equal(u.is_open,Be)&&(u.is_open=Be,e(2,u))}function lt(Be){n.$$.not_equal(o.is_open,Be)&&(o.is_open=Be,e(3,o))}const gt=()=>_p(be);function rt(Be){Pe=Be,e(11,Pe)}function Ee(Be){ae=Be,e(7,ae)}function Ue(){C=fp(this),e(6,C)}function Jt(){k=this.value,e(5,k)}function Pt(){$=this.clientWidth,J=this.clientHeight,e(9,$),e(10,J)}return[c,_,u,o,f,k,C,ae,G,$,J,Pe,He,be,_e,l,h,d,w,j,S,U,E,O,N,X,L,K,ne,z,De,Te,lt,gt,rt,Ee,Ue,Jt,Pt,()=>e(14,_e=!_e),()=>e(14,_e=!_e)]}class pb extends dt{constructor(r){super(),ht(this,r,_b,db,Je,{nodeTypes:0,edgeTypes:1},null,[-1,-1])}get nodeTypes(){return this.$$.ctx[0]}get edgeTypes(){return this.$$.ctx[1]}}function gb(n){let r,e;return r=new pb({}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function mb(n){let r,e;return r=new Gp({props:{$$slots:{default:[gb]},$$scope:{ctx:n}}}),{c(){Ce(r.$$.fragment)},l(t){Ne(r.$$.fragment,t)},m(t,i){Ie(r,t,i),e=!0},p(t,[i]){const s={};i&4&&(s.$$scope={dirty:i,ctx:t}),r.$set(s)},i(t){e||(se(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){Fe(r,t)}}}function vb(n,r,e){let t,{data:i}=r;return n.$$set=s=>{"data"in s&&e(0,i=s.data)},n.$$.update=()=>{n.$$.dirty&1&&e(1,t=i.remote_d3fend_tree?i.remote_d3fend_tree.map(s=>({...s,children:gs(s.children,s["rdfs:label"])})):[]),n.$$.dirty&3&&(Uc.set(t),Mc.set(i.attack),Pc.set(i.dao),qc.set(i.events),jc.set(i.weaknesses),Vc.set(i.properties))},[i,t]}class Xb extends dt{constructor(r){super(),ht(this,r,vb,mb,Je,{data:0})}}export{Xb as component,Mb as universal};

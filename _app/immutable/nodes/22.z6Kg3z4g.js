const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/jsonld.OPIS_L8g.js","../chunks/_commonjsHelpers.BosuxZz1.js","../chunks/index.HGyOB-Dh.js"])))=>i.map(i=>d[i]);
import{s as zs}from"../chunks/sortBy.ChsTRid8.js";import{s as qe,c as bt,u as wt,g as yt,a as kt,am as b_,I as aa,e as re,d as ne,f as ge,i as m,r as se,k as C,o as Ye,ao as w_,E as us,J as mt,p as De,b as ae,j as le,as as Ze,t as P,h as q,l as x,P as pe,a4 as vt,ar as zr,m as fe,x as st,W as ur,n as Ce,v as Me,L as Dt,V as Xt,D as Ge,O as Fr,Y as la,F as mr,a3 as cn,w as Dr,al as vl,a0 as Xs,Q as bl,R as wl,N as Wn,ap as yl,ak as y_,aq as k_}from"../chunks/scheduler.xR-uXgLO.js";import{S as Ke,i as et,t as Y,a as Z,g as xe,e as Ve,c as ve,b as be,m as we,d as ye,f as $t,p as kl}from"../chunks/index.BpaDVXPB.js";import{d as D_,w as Gt}from"../chunks/index.iaz6iIjv.js";import{p as E_}from"../chunks/stores.BLnbKJAU.js";import{A as os}from"../chunks/Alert.BOpypHFQ.js";import{T as In,b as me,a as Xf,G as $f,m as A_,d as Ki,o as C_}from"../chunks/lib.Dnh5UBzP.js";import{c as N_,k as T_,b as Dl,R as Gi,u as jn,X as S_,d as El,e as Al,i as R_,g as F_,f as Cl,n as Nl,h as Tl,j as I_,p as O_,l as L_,r as B_,H as Je,P as $e,m as P_,E as q_,o as Gf,q as $s,S as j_,C as M_,B as U_,a as x_,M as V_}from"../chunks/style.CaV8822o.js";import{g as fs,c as ua}from"../chunks/_commonjsHelpers.BosuxZz1.js";import{r as H_,b as z_}from"../chunks/index.HGyOB-Dh.js";import{_ as X_}from"../chunks/preload-helper.D6kgxu3v.js";import{e as He,u as Sl,o as Rl}from"../chunks/each.BfH-wj2E.js";import{G as Xr}from"../chunks/_Graph.DX-9CS8B.js";import{t as es,T as Wf}from"../chunks/ToggleBar.ChYzQEkc.js";import{s as Fl}from"../chunks/index.BxqCZUUx.js";import{f as On}from"../chunks/utils.xEKteSAW.js";import{f as $_,c as G_,L as W_}from"../chunks/Loading.B5hKdNm6.js";import{J as Il}from"../chunks/JSONCrush.BlUS0oeb.js";import{T as Q_}from"../chunks/Title.lz_tL8Gl.js";function oa(i,r,e=[]){const t=zs(i,n=>n["rdfs:label"]);for(const n of t)e.push({...n,rootLabel:r}),n.children&&oa(n.children,r,e);return e}function fa(i,r,e){for(const t of e)if(r.test(i[t]))return!0;return!1}function Y_(i,r,e){if(!r)return i||[];const t=r?new RegExp(r,"i"):null,n=a=>t?fa(a,t,e):!0;return i.filter(n)}function J_(i,r,e){if(!r)return i||[];const t=r?new RegExp(r,"i"):null,n=s=>t?fa(s,t,e):!0;return i.reduce((s,l)=>(s.push({...l,children:l.children.filter(n)}),s),[]).filter(s=>s.children.length>0)}function Z_(i,r,e){const t=[];function n(a){if(fa(a,r,e)&&t.push(a),a.children)for(const s of a.children)n(s)}for(const a of i)n(a);return t}function K_(i,r,e){if(!r)return i||[];const t=new RegExp(r,"i");return Z_(i,t,e)}function Ol(i,r){return[...new Map(i.map(e=>[e[r],e])).values()]}function ep(i){const r=i.reduce((n,a)=>(n[a["@id"]]=a,n),{});return i.reduce((n,a)=>(a.hasOwnProperty("rdfs:hasSubClass")&&(a.children=a["rdfs:hasSubClass"].map(s=>r[s["@id"]]),n.push(a)),n),[]).filter(n=>n["rdfs:subClassOf"].some(a=>a["@id"]==="d3f:DigitalEvent"))}function tp(i){const r=i.reduce((t,n)=>(t[n["@id"]]=n,t),{});return i.forEach(t=>{const n=t["rdfs:subPropertyOf"];if(n)for(const a of n)r[a["@id"]]&&(r[a["@id"]].children?r[a["@id"]].children.push(t):r[a["@id"]].children=[t])}),{associated:i.filter(t=>t["rdfs:subPropertyOf"].some(n=>n["@id"]==="d3f:associated-with"))}}async function rp({fetch:i}){const r=["/api/offensive-technique/all.json","/api/dao/artifacts.json","/api/taxonomies/d3f:DigitalEvent.json","/api/weakness/all.json","/api/ontology/properties/object/all.json"],[{value:{["@graph"]:e}},{value:{["@graph"]:t}},{value:{["@graph"]:n}},{value:{["@graph"]:a}},{value:{["@graph"]:s}}]=await Promise.allSettled(r.map(c=>i(c).then(h=>h.json()))),l=zs(Ol(e,"rdfs:label"),c=>c["rdfs:label"]),u=ep(n).map(c=>({...c,children:Ol(oa(c.children,c["rdfs:label"]),"rdfs:label")})),f=zs(a,c=>c["rdfs:label"]),d=tp(s);return{attack:l,dao:t,events:u,weaknesses:f,properties:d}}const qv=Object.freeze(Object.defineProperty({__proto__:null,load:rp},Symbol.toStringTag,{value:"Module"}));function np(i){let r;const e=i[7].default,t=bt(e,i,i[6],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,a){t&&t.m(n,a),r=!0},p(n,[a]){t&&t.p&&(!r||a&64)&&wt(t,e,n,n[6],r?kt(e,n[6],a,null):yt(n[6]),null)},i(n){r||(Y(t,n),r=!0)},o(n){Z(t,n),r=!1},d(n){t&&t.d(n)}}}function ip(i,r,e){let{$$slots:t={},$$scope:n}=r,{initialNodes:a=void 0}=r,{initialEdges:s=void 0}=r,{initialWidth:l=void 0}=r,{initialHeight:o=void 0}=r,{fitView:u=void 0}=r,{nodeOrigin:f=void 0}=r;const d=N_({nodes:a,edges:s,width:l,height:o,nodeOrigin:f,fitView:u});return b_(T_,{getStore:()=>d}),aa(()=>{d.reset()}),i.$$set=c=>{"initialNodes"in c&&e(0,a=c.initialNodes),"initialEdges"in c&&e(1,s=c.initialEdges),"initialWidth"in c&&e(2,l=c.initialWidth),"initialHeight"in c&&e(3,o=c.initialHeight),"fitView"in c&&e(4,u=c.fitView),"nodeOrigin"in c&&e(5,f=c.nodeOrigin),"$$scope"in c&&e(6,n=c.$$scope)},[a,s,l,o,u,f,n,t]}class sp extends Ke{constructor(r){super(),et(this,r,ip,np,qe,{initialNodes:0,initialEdges:1,initialWidth:2,initialHeight:3,fitView:4,nodeOrigin:5})}}function ap(i){let r,e,t;const n=i[33].default,a=bt(n,i,i[32],null);return{c(){r=re("div"),a&&a.c(),this.h()},l(s){r=ne(s,"DIV",{class:!0,style:!0});var l=ge(r);a&&a.l(l),l.forEach(m),this.h()},h(){se(r,"class",e=Dl(["svelte-flow__resize-control","nodrag",...i[4],i[0],i[1]])),se(r,"style",i[3])},m(s,l){C(s,r,l),a&&a.m(r,null),i[34](r),t=!0},p(s,l){a&&a.p&&(!t||l[1]&2)&&wt(a,n,s,s[32],t?kt(n,s[32],l,null):yt(s[32]),null),(!t||l[0]&19&&e!==(e=Dl(["svelte-flow__resize-control","nodrag",...s[4],s[0],s[1]])))&&se(r,"class",e),(!t||l[0]&8)&&se(r,"style",s[3])},i(s){t||(Y(a,s),t=!0)},o(s){Z(a,s),t=!1},d(s){s&&m(r),a&&a.d(s),i[34](null)}}}function lp(i,r,e){let t,n,a,s,l,o,u,f,d,c,h,g,N,y,b,S,{$$slots:D={},$$scope:A}=r,{nodeId:v=void 0}=r,{position:E=void 0}=r,{variant:w=Gi.Handle}=r,{color:B=void 0}=r,{minWidth:I=10}=r,{minHeight:L=10}=r,{maxWidth:k=Number.MAX_VALUE}=r,{maxHeight:j=Number.MAX_VALUE}=r,{keepAspectRatio:O=!1}=r,{shouldResize:R=void 0}=r,{onResizeStart:G=void 0}=r,{onResize:Q=void 0}=r,{onResizeEnd:oe=void 0}=r,{style:ee=""}=r,{class:X=""}=r;const{nodeLookup:H,snapGrid:V,viewport:W,nodes:M,nodeOrigin:J}=jn();Ye(i,H,ue=>e(37,N=ue)),Ye(i,V,ue=>e(39,b=ue)),Ye(i,W,ue=>e(40,S=ue)),Ye(i,M,ue=>e(36,g=ue)),Ye(i,J,ue=>e(38,y=ue));const Fe=w_("svelteflow__node_id");let Le,de=null;us(()=>(Le&&e(23,de=S_({domNode:Le,nodeId:l,getStoreItems:()=>({nodeLookup:N,transform:[S.x,S.y,S.zoom],snapGrid:b??void 0,snapToGrid:!!b,nodeOrigin:y}),onChange:(ue,Ee)=>{var ct,We;const Xe=(ct=N.get(l))==null?void 0:ct.internals.userNode;if(Xe){ue.x!==void 0&&ue.y!==void 0&&(Xe.position={x:ue.x,y:ue.y}),ue.width!==void 0&&ue.height!==void 0&&(Xe.width=ue.width,Xe.height=ue.height);for(const he of Ee){const Ie=(We=N.get(he.id))==null?void 0:We.internals.userNode;Ie&&(Ie.position=he.position)}M.set(g)}}})),()=>{de==null||de.destroy()}));function _e(ue){mt[ue?"unshift":"push"](()=>{Le=ue,e(2,Le)})}return i.$$set=ue=>{"nodeId"in ue&&e(10,v=ue.nodeId),"position"in ue&&e(11,E=ue.position),"variant"in ue&&e(0,w=ue.variant),"color"in ue&&e(12,B=ue.color),"minWidth"in ue&&e(13,I=ue.minWidth),"minHeight"in ue&&e(14,L=ue.minHeight),"maxWidth"in ue&&e(15,k=ue.maxWidth),"maxHeight"in ue&&e(16,j=ue.maxHeight),"keepAspectRatio"in ue&&e(17,O=ue.keepAspectRatio),"shouldResize"in ue&&e(18,R=ue.shouldResize),"onResizeStart"in ue&&e(19,G=ue.onResizeStart),"onResize"in ue&&e(20,Q=ue.onResize),"onResizeEnd"in ue&&e(21,oe=ue.onResizeEnd),"style"in ue&&e(22,ee=ue.style),"class"in ue&&e(1,X=ue.class),"$$scope"in ue&&e(32,A=ue.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&8192&&e(27,t=I??10),i.$$.dirty[0]&16384&&e(26,n=L??10),i.$$.dirty[0]&32768&&e(25,a=k??Number.MAX_VALUE),i.$$.dirty[0]&65536&&e(24,s=j??Number.MAX_VALUE),i.$$.dirty[0]&1024&&(l=typeof v=="string"?v:Fe),i.$$.dirty[0]&1&&e(31,o=w===Gi.Line?"right":"bottom-right"),i.$$.dirty[0]&2048|i.$$.dirty[1]&1&&e(28,u=E??o),i.$$.dirty[0]&268435456&&e(4,f=u.split("-")),i.$$.dirty[0]&1&&e(30,d=w===Gi.Line?"border-color":"background-color"),i.$$.dirty[0]&4194304&&e(29,c=ee??""),i.$$.dirty[0]&1610616832&&e(3,h=B?`${c} ${d}: ${B};`:c),i.$$.dirty[0]&532545536&&(de==null||de.update({controlPosition:u,boundaries:{minWidth:t,minHeight:n,maxWidth:a,maxHeight:s},keepAspectRatio:!!O,onResizeStart:G,onResize:Q,onResizeEnd:oe,shouldResize:R}))},[w,X,Le,h,f,H,V,W,M,J,v,E,B,I,L,k,j,O,R,G,Q,oe,ee,de,s,a,n,t,u,c,d,o,A,D,_e]}class Qf extends Ke{constructor(r){super(),et(this,r,lp,ap,qe,{nodeId:10,position:11,variant:0,color:12,minWidth:13,minHeight:14,maxWidth:15,maxHeight:16,keepAspectRatio:17,shouldResize:18,onResizeStart:19,onResize:20,onResizeEnd:21,style:22,class:1},null,[-1,-1])}}function Ll(i,r,e){const t=i.slice();return t[20]=r[e],t}function Bl(i,r,e){const t=i.slice();return t[20]=r[e],t}function Pl(i){let r=[],e=new Map,t,n=[],a=new Map,s,l,o=He(El);const u=c=>c[20];for(let c=0;c<o.length;c+=1){let h=Bl(i,o,c),g=u(h);e.set(g,r[c]=ql(g,h))}let f=He(Al);const d=c=>c[20];for(let c=0;c<f.length;c+=1){let h=Ll(i,f,c),g=d(h);a.set(g,n[c]=jl(g,h))}return{c(){for(let c=0;c<r.length;c+=1)r[c].c();t=ae();for(let c=0;c<n.length;c+=1)n[c].c();s=De()},l(c){for(let h=0;h<r.length;h+=1)r[h].l(c);t=le(c);for(let h=0;h<n.length;h+=1)n[h].l(c);s=De()},m(c,h){for(let g=0;g<r.length;g+=1)r[g]&&r[g].m(c,h);C(c,t,h);for(let g=0;g<n.length;g+=1)n[g]&&n[g].m(c,h);C(c,s,h),l=!0},p(c,h){h&65521&&(o=He(El),xe(),r=Sl(r,h,u,1,c,o,e,t.parentNode,Rl,ql,t,Bl),Ve()),h&65485&&(f=He(Al),xe(),n=Sl(n,h,d,1,c,f,a,s.parentNode,Rl,jl,s,Ll),Ve())},i(c){if(!l){for(let h=0;h<o.length;h+=1)Y(r[h]);for(let h=0;h<f.length;h+=1)Y(n[h]);l=!0}},o(c){for(let h=0;h<r.length;h+=1)Z(r[h]);for(let h=0;h<n.length;h+=1)Z(n[h]);l=!1},d(c){c&&(m(t),m(s));for(let h=0;h<r.length;h+=1)r[h].d(c);for(let h=0;h<n.length;h+=1)n[h].d(c)}}}function ql(i,r){let e,t,n;return t=new Qf({props:{class:r[4],style:r[5],nodeId:r[0],position:r[20],variant:Gi.Line,color:r[6],minWidth:r[12],minHeight:r[13],maxWidth:r[14],maxHeight:r[15],onResizeStart:r[9],keepAspectRatio:r[7],shouldResize:r[8],onResize:r[10],onResizeEnd:r[11]}}),{key:i,first:null,c(){e=De(),ve(t.$$.fragment),this.h()},l(a){e=De(),be(t.$$.fragment,a),this.h()},h(){this.first=e},m(a,s){C(a,e,s),we(t,a,s),n=!0},p(a,s){r=a;const l={};s&16&&(l.class=r[4]),s&32&&(l.style=r[5]),s&1&&(l.nodeId=r[0]),s&64&&(l.color=r[6]),s&512&&(l.onResizeStart=r[9]),s&128&&(l.keepAspectRatio=r[7]),s&256&&(l.shouldResize=r[8]),s&1024&&(l.onResize=r[10]),s&2048&&(l.onResizeEnd=r[11]),t.$set(l)},i(a){n||(Y(t.$$.fragment,a),n=!0)},o(a){Z(t.$$.fragment,a),n=!1},d(a){a&&m(e),ye(t,a)}}}function jl(i,r){let e,t,n;return t=new Qf({props:{class:r[2],style:r[3],nodeId:r[0],position:r[20],color:r[6],minWidth:r[12],minHeight:r[13],maxWidth:r[14],maxHeight:r[15],onResizeStart:r[9],keepAspectRatio:r[7],shouldResize:r[8],onResize:r[10],onResizeEnd:r[11]}}),{key:i,first:null,c(){e=De(),ve(t.$$.fragment),this.h()},l(a){e=De(),be(t.$$.fragment,a),this.h()},h(){this.first=e},m(a,s){C(a,e,s),we(t,a,s),n=!0},p(a,s){r=a;const l={};s&4&&(l.class=r[2]),s&8&&(l.style=r[3]),s&1&&(l.nodeId=r[0]),s&64&&(l.color=r[6]),s&512&&(l.onResizeStart=r[9]),s&128&&(l.keepAspectRatio=r[7]),s&256&&(l.shouldResize=r[8]),s&1024&&(l.onResize=r[10]),s&2048&&(l.onResizeEnd=r[11]),t.$set(l)},i(a){n||(Y(t.$$.fragment,a),n=!0)},o(a){Z(t.$$.fragment,a),n=!1},d(a){a&&m(e),ye(t,a)}}}function up(i){let r,e,t=i[1]&&Pl(i);return{c(){t&&t.c(),r=De()},l(n){t&&t.l(n),r=De()},m(n,a){t&&t.m(n,a),C(n,r,a),e=!0},p(n,[a]){n[1]?t?(t.p(n,a),a&2&&Y(t,1)):(t=Pl(n),t.c(),Y(t,1),t.m(r.parentNode,r)):t&&(xe(),Z(t,1,1,()=>{t=null}),Ve())},i(n){e||(Y(t),e=!0)},o(n){Z(t),e=!1},d(n){n&&m(r),t&&t.d(n)}}}function op(i,r,e){let{nodeId:t=void 0}=r,{isVisible:n=!0}=r,{handleClass:a=void 0}=r,{handleStyle:s=void 0}=r,{lineClass:l=void 0}=r,{lineStyle:o=void 0}=r,{color:u=void 0}=r,{minWidth:f=10}=r,{minHeight:d=10}=r,{maxWidth:c=Number.MAX_VALUE}=r,{maxHeight:h=Number.MAX_VALUE}=r,{keepAspectRatio:g=!1}=r,{shouldResize:N=void 0}=r,{onResizeStart:y=void 0}=r,{onResize:b=void 0}=r,{onResizeEnd:S=void 0}=r,D=f||10,A=d||10,v=c||Number.MAX_VALUE,E=h||Number.MAX_VALUE;return i.$$set=w=>{"nodeId"in w&&e(0,t=w.nodeId),"isVisible"in w&&e(1,n=w.isVisible),"handleClass"in w&&e(2,a=w.handleClass),"handleStyle"in w&&e(3,s=w.handleStyle),"lineClass"in w&&e(4,l=w.lineClass),"lineStyle"in w&&e(5,o=w.lineStyle),"color"in w&&e(6,u=w.color),"minWidth"in w&&e(16,f=w.minWidth),"minHeight"in w&&e(17,d=w.minHeight),"maxWidth"in w&&e(18,c=w.maxWidth),"maxHeight"in w&&e(19,h=w.maxHeight),"keepAspectRatio"in w&&e(7,g=w.keepAspectRatio),"shouldResize"in w&&e(8,N=w.shouldResize),"onResizeStart"in w&&e(9,y=w.onResizeStart),"onResize"in w&&e(10,b=w.onResize),"onResizeEnd"in w&&e(11,S=w.onResizeEnd)},[t,n,a,s,l,o,u,g,N,y,b,S,D,A,v,E,f,d,c,h]}class $r extends Ke{constructor(r){super(),et(this,r,op,up,qe,{nodeId:0,isVisible:1,handleClass:2,handleStyle:3,lineClass:4,lineStyle:5,color:6,minWidth:16,minHeight:17,maxWidth:18,maxHeight:19,keepAspectRatio:7,shouldResize:8,onResizeStart:9,onResize:10,onResizeEnd:11})}}const Ml=i=>R_(i);function fp(){const{zoomIn:i,zoomOut:r,fitView:e,onbeforedelete:t,snapGrid:n,viewport:a,width:s,height:l,minZoom:o,maxZoom:u,panZoom:f,nodes:d,edges:c,domNode:h,nodeLookup:g,edgeLookup:N,nodeOrigin:y}=jn(),b=A=>{var I,L;const v=Ze(g),E=Ml(A)?A:v.get(A.id),w=E.parentId?L_(E.position,E.measured,E.parentId,v,Ze(y)):E.position,B={id:E.id,position:w,width:((I=E.measured)==null?void 0:I.width)??E.width,height:((L=E.measured)==null?void 0:L.height)??E.height,data:E.data};return Nl(B)},S=(A,v,E={replace:!1})=>{var I;const w=(I=Ze(g).get(A))==null?void 0:I.internals.userNode;if(!w)return;const B=typeof v=="function"?v(w):v;E.replace?d.update(L=>L.map(k=>k.id===A?Ml(B)?B:{...k,...B}:k)):(Object.assign(w,B),d.update(L=>L))},D=A=>Ze(g).get(A);return{zoomIn:i,zoomOut:r,getInternalNode:D,getNode:A=>{var v;return(v=D(A))==null?void 0:v.internals.userNode},getNodes:A=>A===void 0?Ze(d):Ul(Ze(g),A),getEdge:A=>Ze(N).get(A),getEdges:A=>A===void 0?Ze(c):Ul(Ze(N),A),setZoom:(A,v)=>{const E=Ze(f);return E?E.scaleTo(A,{duration:v==null?void 0:v.duration}):Promise.resolve(!1)},getZoom:()=>Ze(a).zoom,setViewport:async(A,v)=>{const E=Ze(a),w=Ze(f);return w?(await w.setViewport({x:A.x??E.x,y:A.y??E.y,zoom:A.zoom??E.zoom},{duration:v==null?void 0:v.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>Ze(a),setCenter:async(A,v,E)=>{const w=typeof(E==null?void 0:E.zoom)<"u"?E.zoom:Ze(u),B=Ze(f);return B?(await B.setViewport({x:Ze(s)/2-A*w,y:Ze(l)/2-v*w,zoom:w},{duration:E==null?void 0:E.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:e,fitBounds:async(A,v)=>{const E=Ze(f);if(!E)return Promise.resolve(!1);const w=F_(A,Ze(s),Ze(l),Ze(o),Ze(u),(v==null?void 0:v.padding)??.1);return await E.setViewport(w,{duration:v==null?void 0:v.duration}),Promise.resolve(!0)},getIntersectingNodes:(A,v=!0,E)=>{const w=Cl(A),B=w?A:b(A);return B?(E||Ze(d)).filter(I=>{const L=Ze(g).get(I.id);if(!L||!w&&I.id===A.id)return!1;const k=Nl(L),j=Tl(k,B);return v&&j>0||j>=B.width*B.height}):[]},isNodeIntersecting:(A,v,E=!0)=>{const B=Cl(A)?A:b(A);if(!B)return!1;const I=Tl(B,v);return E&&I>0||I>=B.width*B.height},deleteElements:async({nodes:A=[],edges:v=[]})=>{const{nodes:E,edges:w}=await I_({nodesToRemove:A,edgesToRemove:v,nodes:Ze(d),edges:Ze(c),onBeforeDelete:Ze(t)});return E&&d.update(B=>B.filter(I=>!E.some(({id:L})=>L===I.id))),w&&c.update(B=>B.filter(I=>!w.some(({id:L})=>L===I.id))),{deletedNodes:E,deletedEdges:w}},screenToFlowPosition:(A,v={snapToGrid:!0})=>{const E=Ze(h);if(!E)return A;const w=v.snapToGrid?Ze(n):!1,{x:B,y:I,zoom:L}=Ze(a),{x:k,y:j}=E.getBoundingClientRect(),O={x:A.x-k,y:A.y-j};return O_(O,[B,I,L],w!==null,w||[1,1])},flowToScreenPosition:A=>{const v=Ze(h);if(!v)return A;const{x:E,y:w,zoom:B}=Ze(a),{x:I,y:L}=v.getBoundingClientRect(),k=B_(A,[E,w,B]);return{x:k.x+I,y:k.y+L}},toObject:()=>({nodes:Ze(d).map(A=>({...A,position:{...A.position},data:{...A.data}})),edges:Ze(c).map(A=>({...A})),viewport:{...Ze(a)}}),updateNode:S,updateNodeData:(A,v,E)=>{var I;const w=(I=Ze(g).get(A))==null?void 0:I.internals.userNode;if(!w)return;const B=typeof v=="function"?v(w):v;w.data=E!=null&&E.replace?B:{...w.data,...B},d.update(L=>L)},viewport:a}}function Ul(i,r){var t;const e=[];for(const n of r){const a=i.get(n);if(a){const s="internals"in a?(t=a.internals)==null?void 0:t.userNode:a;e.push(s)}}return e}function qr(){const{connection:i}=jn();return i}function Er(){const{nodes:i}=jn();return i}function Ar(){const{edges:i}=jn();return i}function xl(i){const{nodeLookup:r,nodes:e}=jn();return D_([r,e],([t])=>t.get(i))}let Yf=Gt([]),Jf=Gt([]),Zf=Gt([]),Kf=Gt([]),ec=Gt([]),tc=Gt([]);function cp(){const{subscribe:i,set:r,update:e}=Gt();return{subscribe:i,update:e,add:t=>r(t),clear:()=>r()}}const Jt=cp();function Zt(i){"@babel/helpers - typeof";return Zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Zt(i)}function dp(i,r){if(Zt(i)!="object"||!i)return i;var e=i[Symbol.toPrimitive];if(e!==void 0){var t=e.call(i,r||"default");if(Zt(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(i)}function rc(i){var r=dp(i,"string");return Zt(r)=="symbol"?r:r+""}function Vl(i,r){for(var e=0;e<r.length;e++){var t=r[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(i,rc(t.key),t)}}function pt(i,r,e){return r&&Vl(i.prototype,r),e&&Vl(i,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function gt(i,r){if(!(i instanceof r))throw new TypeError("Cannot call a class as a function")}function hp(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function jr(i,r){if(r&&(Zt(r)=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hp(i)}function Nt(i){return Nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nt(i)}function Gs(i,r){return Gs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gs(i,r)}function xt(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(r&&r.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),r&&Gs(i,r)}function ke(i,r,e){return(r=rc(r))in i?Object.defineProperty(i,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[r]=e,i}var vr={Literal:1,Collection:3,Graph:4,NamedNode:5,BlankNode:6,Variable:7},ht=function(){function i(r){gt(this,i),ke(this,"termType",void 0),ke(this,"classOrder",void 0),ke(this,"value",void 0),this.value=r}return pt(i,[{key:"substitute",value:function(e){return this}},{key:"compareTerm",value:function(e){return this.classOrder<e.classOrder?-1:this.classOrder>e.classOrder?1:this.value<e.value?-1:this.value>e.value?1:0}},{key:"equals",value:function(e){return e?this.termType===e.termType&&this.value===e.value:!1}},{key:"hashString",value:function(){return this.toCanonical()}},{key:"sameTerm",value:function(e){return this.equals(e)}},{key:"toCanonical",value:function(){return this.toNT()}},{key:"toNT",value:function(){return this.toString()}},{key:"toNQ",value:function(){return this.toNT()}},{key:"toString",value:function(){throw new Error("Node.toString() is abstract - see the subclasses instead")}}])}();ke(ht,"fromValue",void 0);ke(ht,"toJS",void 0);var pn="NamedNode",gn="BlankNode",Mn="Literal",Gr="Variable",dn="DefaultGraph",Wr="Collection",nc="Empty",_i="Graph",Hl="text/html",Ws="application/ld+json",ic="text/n3",_p="application/n3",Qs="application/nquads",Ys="application/n-quads",pp="application/n-triples",li="application/rdf+xml",gp="application/sparql-update",mp="application/sparql-update-single-match",un="text/turtle",vp="application/x-turtle",Js="application/xhtml+xml";function bp(i,r,e){return r=Nt(r),jr(i,sc()?Reflect.construct(r,e||[],Nt(i).constructor):r.apply(i,e))}function sc(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sc=function(){return!!i})()}var br=function(i){function r(e){var t;return gt(this,r),t=bp(this,r,[r.getId(e)]),ke(t,"termType",gn),ke(t,"classOrder",vr.BlankNode),ke(t,"isBlank",1),ke(t,"isVar",1),t}return xt(r,i),pt(r,[{key:"id",get:function(){return this.value},set:function(t){this.value=t}},{key:"compareTerm",value:function(t){return this.classOrder<t.classOrder?-1:this.classOrder>t.classOrder?1:this.id<t.id?-1:this.id>t.id?1:0}},{key:"copy",value:function(t){var n=new r;return t.copyTo(this,n),n}},{key:"toCanonical",value:function(){return r.NTAnonymousNodePrefix+this.value}},{key:"toString",value:function(){return r.NTAnonymousNodePrefix+this.id}}],[{key:"getId",value:function(t){if(t){if(typeof t!="string")throw new Error("Bad id argument to new blank node: "+t);if(t.includes("#")){var n=t.split("#");return n[n.length-1]}return t}return"n"+r.nextId++}}])}(ht);ke(br,"nextId",0);ke(br,"NTAnonymousNodePrefix","_:");function An(i){return typeof i=="string"?i:i.value}function wp(i){return Zt(i)==="object"&&i!==null&&"subject"in i}function zl(i){return Zt(i)==="object"&&i!==null&&"statements"in i}function ca(i){return Lr(i)&&i.termType===Wr}function yp(i){return i&&Object.prototype.hasOwnProperty.call(i,"termType")&&(i.termType===pn||i.termType===Gr||i.termType===gn||i.termType===Wr||i.termType===Mn||i.termType===_i)}function kp(i){return i&&Object.prototype.hasOwnProperty.call(i,"termType")&&(i.termType===pn||i.termType===Gr||i.termType===gn||i.termType===Wr||i.termType===Mn||i.termType===_i)}function Dp(i){return Lr(i)&&(i.termType===pn||i.termType===gn||i.termType===Gr)}function Ep(i){return Lr(i)&&i.termType===Gr}function Lr(i){return Zt(i)==="object"&&i!==null&&"termType"in i}function ac(i){return i.termType===Mn}function Cn(i){return Zt(i)==="object"&&i!==null&&"subject"in i&&"predicate"in i&&"object"in i}function Xl(i){return Lr(i)&&i.termType==="NamedNode"}function Ap(i){return Lr(i)&&(i.termType===pn||i.termType===Gr||i.termType===gn||i.termType===dn)}function Cp(i,r,e){return r=Nt(r),jr(i,lc()?Reflect.construct(r,e||[],Nt(i).constructor):r.apply(i,e))}function lc(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lc=function(){return!!i})()}var Pt=function(i){function r(e){var t;if(gt(this,r),t=Cp(this,r,[An(e)]),ke(t,"termType",pn),ke(t,"classOrder",vr.NamedNode),!t.value)throw new Error("Missing IRI for NamedNode");if(!t.value.includes(":"))throw new Error('NamedNode IRI "'+e+'" must be absolute.');if(t.value.includes(" ")){var n='Error: NamedNode IRI "'+e+'" must not contain unencoded spaces.';throw new Error(n)}return t}return xt(r,i),pt(r,[{key:"dir",value:function(){var t=this.value.split("#")[0],n=t.slice(0,-1).lastIndexOf("/"),a=t.indexOf("//");return a>=0&&n<a+2||n<0?null:new r(t.slice(0,n+1))}},{key:"site",value:function(){var t=this.value.split("#")[0],n=t.indexOf("//");if(n<0)throw new Error("This URI does not have a web site part (origin)");var a=t.indexOf("/",n+2);return a<0?new r(t.slice(0)+"/"):new r(t.slice(0,a+1))}},{key:"doc",value:function(){return this.value.indexOf("#")<0?this:new r(this.value.split("#")[0])}},{key:"toString",value:function(){return"<"+this.value+">"}},{key:"id",value:function(){return this.value.split("#")[1]}},{key:"uri",get:function(){return this.value},set:function(t){this.value=t}}],[{key:"fromValue",value:function(t){return typeof t>"u"||t===null||Lr(t)?t:new r(t)}}])}(ht);const Rr={boolean:new Pt("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:new Pt("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:new Pt("http://www.w3.org/2001/XMLSchema#decimal"),double:new Pt("http://www.w3.org/2001/XMLSchema#double"),integer:new Pt("http://www.w3.org/2001/XMLSchema#integer"),langString:new Pt("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:new Pt("http://www.w3.org/2001/XMLSchema#string")};function Np(i,r,e){return r=Nt(r),jr(i,uc()?Reflect.construct(r,e||[],Nt(i).constructor):r.apply(i,e))}function uc(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uc=function(){return!!i})()}var gr=function(i){function r(e,t,n){var a;return gt(this,r),a=Np(this,r,[e]),ke(a,"termType",Mn),ke(a,"classOrder",vr.Literal),ke(a,"datatype",Rr.string),ke(a,"isVar",0),ke(a,"language",""),t?(a.language=t,a.datatype=Rr.langString):n?a.datatype=Pt.fromValue(n):a.datatype=Rr.string,a}return xt(r,i),pt(r,[{key:"copy",value:function(){return new r(this.value,this.lang,this.datatype)}},{key:"equals",value:function(t){return t?this.termType===t.termType&&this.value===t.value&&this.language===t.language&&(!this.datatype&&!t.datatype||this.datatype&&this.datatype.equals(t.datatype)):!1}},{key:"lang",get:function(){return this.language},set:function(t){this.language=t||""}},{key:"toNT",value:function(){return r.toNT(this)}},{key:"toString",value:function(){return""+this.value}}],[{key:"toNT",value:function(t){if(typeof t.value=="number")return""+t.value;if(typeof t.value!="string")throw new Error("Value of RDF literal is not string or number: "+t.value);var n=t.value;return n=n.replace(/\\/g,"\\\\"),n=n.replace(/\"/g,'\\"'),n=n.replace(/\n/g,"\\n"),n=n.replace(/\r/g,"\\r"),n='"'+n+'"',t.language?n+="@"+t.language:t.datatype.equals(Rr.string)||(n+="^^"+t.datatype.toCanonical()),n}},{key:"fromBoolean",value:function(t){var n=t?"1":"0";return new r(n,null,Rr.boolean)}},{key:"fromDate",value:function(t){if(!(t instanceof Date))throw new TypeError("Invalid argument to Literal.fromDate()");var n=function(l){return(""+(100+l)).slice(1,3)},a=""+t.getUTCFullYear()+"-"+n(t.getUTCMonth()+1)+"-"+n(t.getUTCDate())+"T"+n(t.getUTCHours())+":"+n(t.getUTCMinutes())+":"+n(t.getUTCSeconds())+"Z";return new r(a,null,Rr.dateTime)}},{key:"fromNumber",value:function(t){if(typeof t!="number")throw new TypeError("Invalid argument to Literal.fromNumber()");var n,a=t.toString();return a.indexOf("e")<0&&Math.abs(t)<=Number.MAX_SAFE_INTEGER?n=Number.isInteger(t)?Rr.integer:Rr.decimal:n=Rr.double,new r(a,null,n)}},{key:"fromValue",value:function(t){if(ac(t))return t;switch(Zt(t)){case"object":if(t instanceof Date)return r.fromDate(t);case"boolean":return r.fromBoolean(t);case"number":return r.fromNumber(t);case"string":return new r(t)}throw new Error("Can't make literal from "+t+" of type "+Zt(t))}}])}(ht);function Tp(i,r,e){return r=Nt(r),jr(i,oc()?Reflect.construct(r,e||[],Nt(i).constructor):r.apply(i,e))}function oc(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oc=function(){return!!i})()}function fc(i){return typeof i>"u"||i===null||Lr(i)?i:Array.isArray(i)?new Hr(i):gr.fromValue(i)}var Hr=function(i){function r(e){var t;return gt(this,r),t=Tp(this,r,[(br.nextId++).toString()]),ke(t,"termType",Wr),ke(t,"classOrder",vr.Collection),ke(t,"closed",!1),ke(t,"compareTerm",br.prototype.compareTerm),ke(t,"elements",[]),ke(t,"isVar",0),e&&e.length>0&&e.forEach(function(n){t.elements.push(fc(n))}),t}return xt(r,i),pt(r,[{key:"id",get:function(){return this.value},set:function(t){this.value=t}},{key:"append",value:function(t){return this.elements.push(t)}},{key:"close",value:function(){return this.closed=!0,this.closed}},{key:"shift",value:function(){return this.elements.shift()}},{key:"substitute",value:function(t){var n=this.elements.map(function(a){return a.substitute(t)});return new r(n)}},{key:"toNT",value:function(){return r.toNT(this)}},{key:"toString",value:function(){return"("+this.elements.join(" ")+")"}},{key:"unshift",value:function(t){return this.elements.unshift(t)}}],[{key:"toNT",value:function(t){return br.NTAnonymousNodePrefix+t.id}}])}(ht);ke(Hr,"termType",Wr);function $l(i,r,e,t,n,a,s){try{var l=i[a](s),o=l.value}catch(u){return void e(u)}l.done?r(o):Promise.resolve(o).then(t,n)}function Gl(i){return function(){var r=this,e=arguments;return new Promise(function(t,n){var a=i.apply(r,e);function s(o){$l(a,t,n,s,l,"next",o)}function l(o){$l(a,t,n,s,l,"throw",o)}s(void 0)})}}var cc={exports:{}},dc={exports:{}};(function(i){function r(e){"@babel/helpers - typeof";return i.exports=r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i.exports.__esModule=!0,i.exports.default=i.exports,r(e)}i.exports=r,i.exports.__esModule=!0,i.exports.default=i.exports})(dc);var Sp=dc.exports;(function(i){var r=Sp.default;function e(){i.exports=e=function(){return n},i.exports.__esModule=!0,i.exports.default=i.exports;var t,n={},a=Object.prototype,s=a.hasOwnProperty,l=Object.defineProperty||function(X,H,V){X[H]=V.value},o=typeof Symbol=="function"?Symbol:{},u=o.iterator||"@@iterator",f=o.asyncIterator||"@@asyncIterator",d=o.toStringTag||"@@toStringTag";function c(X,H,V){return Object.defineProperty(X,H,{value:V,enumerable:!0,configurable:!0,writable:!0}),X[H]}try{c({},"")}catch{c=function(V,W,M){return V[W]=M}}function h(X,H,V,W){var M=H&&H.prototype instanceof A?H:A,J=Object.create(M.prototype),Fe=new oe(W||[]);return l(J,"_invoke",{value:O(X,V,Fe)}),J}function g(X,H,V){try{return{type:"normal",arg:X.call(H,V)}}catch(W){return{type:"throw",arg:W}}}n.wrap=h;var N="suspendedStart",y="suspendedYield",b="executing",S="completed",D={};function A(){}function v(){}function E(){}var w={};c(w,u,function(){return this});var B=Object.getPrototypeOf,I=B&&B(B(ee([])));I&&I!==a&&s.call(I,u)&&(w=I);var L=E.prototype=A.prototype=Object.create(w);function k(X){["next","throw","return"].forEach(function(H){c(X,H,function(V){return this._invoke(H,V)})})}function j(X,H){function V(M,J,Fe,Le){var de=g(X[M],X,J);if(de.type!=="throw"){var _e=de.arg,ue=_e.value;return ue&&r(ue)=="object"&&s.call(ue,"__await")?H.resolve(ue.__await).then(function(Ee){V("next",Ee,Fe,Le)},function(Ee){V("throw",Ee,Fe,Le)}):H.resolve(ue).then(function(Ee){_e.value=Ee,Fe(_e)},function(Ee){return V("throw",Ee,Fe,Le)})}Le(de.arg)}var W;l(this,"_invoke",{value:function(J,Fe){function Le(){return new H(function(de,_e){V(J,Fe,de,_e)})}return W=W?W.then(Le,Le):Le()}})}function O(X,H,V){var W=N;return function(M,J){if(W===b)throw Error("Generator is already running");if(W===S){if(M==="throw")throw J;return{value:t,done:!0}}for(V.method=M,V.arg=J;;){var Fe=V.delegate;if(Fe){var Le=R(Fe,V);if(Le){if(Le===D)continue;return Le}}if(V.method==="next")V.sent=V._sent=V.arg;else if(V.method==="throw"){if(W===N)throw W=S,V.arg;V.dispatchException(V.arg)}else V.method==="return"&&V.abrupt("return",V.arg);W=b;var de=g(X,H,V);if(de.type==="normal"){if(W=V.done?S:y,de.arg===D)continue;return{value:de.arg,done:V.done}}de.type==="throw"&&(W=S,V.method="throw",V.arg=de.arg)}}}function R(X,H){var V=H.method,W=X.iterator[V];if(W===t)return H.delegate=null,V==="throw"&&X.iterator.return&&(H.method="return",H.arg=t,R(X,H),H.method==="throw")||V!=="return"&&(H.method="throw",H.arg=new TypeError("The iterator does not provide a '"+V+"' method")),D;var M=g(W,X.iterator,H.arg);if(M.type==="throw")return H.method="throw",H.arg=M.arg,H.delegate=null,D;var J=M.arg;return J?J.done?(H[X.resultName]=J.value,H.next=X.nextLoc,H.method!=="return"&&(H.method="next",H.arg=t),H.delegate=null,D):J:(H.method="throw",H.arg=new TypeError("iterator result is not an object"),H.delegate=null,D)}function G(X){var H={tryLoc:X[0]};1 in X&&(H.catchLoc=X[1]),2 in X&&(H.finallyLoc=X[2],H.afterLoc=X[3]),this.tryEntries.push(H)}function Q(X){var H=X.completion||{};H.type="normal",delete H.arg,X.completion=H}function oe(X){this.tryEntries=[{tryLoc:"root"}],X.forEach(G,this),this.reset(!0)}function ee(X){if(X||X===""){var H=X[u];if(H)return H.call(X);if(typeof X.next=="function")return X;if(!isNaN(X.length)){var V=-1,W=function M(){for(;++V<X.length;)if(s.call(X,V))return M.value=X[V],M.done=!1,M;return M.value=t,M.done=!0,M};return W.next=W}}throw new TypeError(r(X)+" is not iterable")}return v.prototype=E,l(L,"constructor",{value:E,configurable:!0}),l(E,"constructor",{value:v,configurable:!0}),v.displayName=c(E,d,"GeneratorFunction"),n.isGeneratorFunction=function(X){var H=typeof X=="function"&&X.constructor;return!!H&&(H===v||(H.displayName||H.name)==="GeneratorFunction")},n.mark=function(X){return Object.setPrototypeOf?Object.setPrototypeOf(X,E):(X.__proto__=E,c(X,d,"GeneratorFunction")),X.prototype=Object.create(L),X},n.awrap=function(X){return{__await:X}},k(j.prototype),c(j.prototype,f,function(){return this}),n.AsyncIterator=j,n.async=function(X,H,V,W,M){M===void 0&&(M=Promise);var J=new j(h(X,H,V,W),M);return n.isGeneratorFunction(H)?J:J.next().then(function(Fe){return Fe.done?Fe.value:J.next()})},k(L),c(L,d,"Generator"),c(L,u,function(){return this}),c(L,"toString",function(){return"[object Generator]"}),n.keys=function(X){var H=Object(X),V=[];for(var W in H)V.push(W);return V.reverse(),function M(){for(;V.length;){var J=V.pop();if(J in H)return M.value=J,M.done=!1,M}return M.done=!0,M}},n.values=ee,oe.prototype={constructor:oe,reset:function(H){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(Q),!H)for(var V in this)V.charAt(0)==="t"&&s.call(this,V)&&!isNaN(+V.slice(1))&&(this[V]=t)},stop:function(){this.done=!0;var H=this.tryEntries[0].completion;if(H.type==="throw")throw H.arg;return this.rval},dispatchException:function(H){if(this.done)throw H;var V=this;function W(_e,ue){return Fe.type="throw",Fe.arg=H,V.next=_e,ue&&(V.method="next",V.arg=t),!!ue}for(var M=this.tryEntries.length-1;M>=0;--M){var J=this.tryEntries[M],Fe=J.completion;if(J.tryLoc==="root")return W("end");if(J.tryLoc<=this.prev){var Le=s.call(J,"catchLoc"),de=s.call(J,"finallyLoc");if(Le&&de){if(this.prev<J.catchLoc)return W(J.catchLoc,!0);if(this.prev<J.finallyLoc)return W(J.finallyLoc)}else if(Le){if(this.prev<J.catchLoc)return W(J.catchLoc,!0)}else{if(!de)throw Error("try statement without catch or finally");if(this.prev<J.finallyLoc)return W(J.finallyLoc)}}}},abrupt:function(H,V){for(var W=this.tryEntries.length-1;W>=0;--W){var M=this.tryEntries[W];if(M.tryLoc<=this.prev&&s.call(M,"finallyLoc")&&this.prev<M.finallyLoc){var J=M;break}}J&&(H==="break"||H==="continue")&&J.tryLoc<=V&&V<=J.finallyLoc&&(J=null);var Fe=J?J.completion:{};return Fe.type=H,Fe.arg=V,J?(this.method="next",this.next=J.finallyLoc,D):this.complete(Fe)},complete:function(H,V){if(H.type==="throw")throw H.arg;return H.type==="break"||H.type==="continue"?this.next=H.arg:H.type==="return"?(this.rval=this.arg=H.arg,this.method="return",this.next="end"):H.type==="normal"&&V&&(this.next=V),D},finish:function(H){for(var V=this.tryEntries.length-1;V>=0;--V){var W=this.tryEntries[V];if(W.finallyLoc===H)return this.complete(W.completion,W.afterLoc),Q(W),D}},catch:function(H){for(var V=this.tryEntries.length-1;V>=0;--V){var W=this.tryEntries[V];if(W.tryLoc===H){var M=W.completion;if(M.type==="throw"){var J=M.arg;Q(W)}return J}}throw Error("illegal catch attempt")},delegateYield:function(H,V,W){return this.delegate={iterator:ee(H),resultName:V,nextLoc:W},this.method==="next"&&(this.arg=t),D}},n}i.exports=e,i.exports.__esModule=!0,i.exports.default=i.exports})(cc);var Rp=cc.exports,Wi=Rp(),Fp=Wi;try{regeneratorRuntime=Wi}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Wi:Function("r","regeneratorRuntime = r")(Wi)}const Ui=fs(Fp);var ui="chrome:theSession";new Pt(ui);function Ip(i,r,e){return r=Nt(r),jr(i,hc()?Reflect.construct(r,e||[],Nt(i).constructor):r.apply(i,e))}function hc(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hc=function(){return!!i})()}var da=function(i){function r(){var e;return gt(this,r),e=Ip(this,r,[""]),ke(e,"value",""),ke(e,"termType",dn),ke(e,"uri",ui),e}return xt(r,i),pt(r,[{key:"toCanonical",value:function(){return this.value}},{key:"toString",value:function(){return"DefaultGraph"}}])}(ht);function Wl(i){return!!i&&i.termType===dn}var Op=new da,on=function(){function i(r,e,t,n){gt(this,i),ke(this,"subject",void 0),ke(this,"predicate",void 0),ke(this,"object",void 0),ke(this,"graph",void 0),this.subject=ht.fromValue(r),this.predicate=ht.fromValue(e),this.object=ht.fromValue(t),this.graph=n==null?Op:ht.fromValue(n)}return pt(i,[{key:"why",get:function(){return this.graph},set:function(e){this.graph=e}},{key:"equals",value:function(e){return e.subject.equals(this.subject)&&e.predicate.equals(this.predicate)&&e.object.equals(this.object)&&e.graph.equals(this.graph)}},{key:"substitute",value:function(e){var t=new i(this.subject.substitute(e),this.predicate.substitute(e),this.object.substitute(e),Wl(this.graph)?this.graph:this.graph.substitute(e));return t}},{key:"toCanonical",value:function(){var e=[this.subject.toCanonical(),this.predicate.toCanonical(),this.object.toCanonical()];return this.graph&&this.graph.termType!==dn&&e.push(this.graph.toCanonical()),e.join(" ")+" ."}},{key:"toNT",value:function(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT()].join(" ")+" ."}},{key:"toNQ",value:function(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT(),Wl(this.graph)?"":this.graph.toNT()].join(" ")+" ."}},{key:"toString",value:function(){return this.toNT()}}])}(),_c=_c||console.log;function Tn(i){var r;return r=i.indexOf("#"),r<0?i:i.slice(0,r)}function Lp(i){var r=/[^\/]*\/\/([^\/]*)\//.exec(i);return r?r[1]:""}function rr(i,r){var e,t,n,a,s,l,o=r.indexOf("#");if(o>0&&(r=r.slice(0,o)),i.length===0)return r;if(i.indexOf("#")===0)return r+i;if(a=i.indexOf(":"),a>=0||(e=r.indexOf(":"),r.length===0))return i;if(e<0)return _c("Invalid base: "+r+" in join with given: "+i),i;if(t=r.slice(0,+e+1||9e9),i.indexOf("//")===0)return t+i;if(r.indexOf("//",e)===e+1){if(n=r.indexOf("/",e+3),n<0)return r.length-e-3>0?r+"/"+i:t+i}else if(n=r.indexOf("/",e+1),n<0)return r.length-e-1>0?r+"/"+i:t+i;if(i.indexOf("/")===0)return r.slice(0,n)+i;if(l=r.slice(n),s=l.lastIndexOf("/"),s<0)return t+i;for(s>=0&&s<l.length-1&&(l=l.slice(0,+s+1||9e9)),l+=i;l.match(/[^\/]*\/\.\.\//);)l=l.replace(/[^\/]*\/\.\.\//,"");return l=l.replace(/\.\//g,""),l=l.replace(/\/\.$/,"/"),r.slice(0,n)+l}function Ql(i){var r=i.indexOf(":");return r<0?null:i.slice(0,r)}function Ss(i,r){var e,t,n,a,s,l,o,u,f,d,c,h,g,N=new RegExp("^[-_a-zA-Z0-9.]+:(//[^/]*)?/[^/]*$");if(!i)return r;if(i===r)return"";for(t=u=0,s=r.length;u<s;t=++u){var y=r[t];if(y!==i[t])break}if(i.slice(0,t).match(N)&&(n=r.indexOf("//"),n<0&&(n=-2),a=r.indexOf("/",n+2),r[a+1]!=="/"&&i[a+1]!=="/"&&r.slice(0,a)===i.slice(0,a)))return r.slice(a);if(r[t]==="#"&&i.length===t)return r.slice(t);for(;t>0&&r[t-1]!=="/";)t--;if(t<3||i.indexOf("//",t-2)>0||r.indexOf("//",t-2)>0||i.indexOf(":",t)>0)return r;for(o=0,c=i.slice(t),f=0,l=c.length;f<l;f++)e=c[f],e==="/"&&o++;if(o===0&&t<r.length&&r[t]==="#")return"./"+r.slice(t);if(o===0&&t===r.length)return"./";if(g="",o>0)for(d=1,h=o;h>=1?d<=h:d>=h;h>=1?++d:--d)g+="../";return g+r.slice(t)}function Bp(i,r,e){return r=Nt(r),jr(i,pc()?Reflect.construct(r,e||[],Nt(i).constructor):r.apply(i,e))}function pc(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pc=function(){return!!i})()}var hn=function(i){function r(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return gt(this,r),e=Bp(this,r,[t]),ke(e,"termType",Gr),ke(e,"base","varid:"),ke(e,"classOrder",vr.Variable),ke(e,"isVar",1),ke(e,"uri",void 0),e.base="varid:",e.uri=rr(t,e.base),e}return xt(r,i),pt(r,[{key:"equals",value:function(t){return t?this.termType===t.termType&&this.value===t.value:!1}},{key:"hashString",value:function(){return this.toString()}},{key:"substitute",value:function(t){var n;return(n=t[this.toNT()])!=null?n:this}},{key:"toString",value:function(){return r.toString(this)}}],[{key:"toString",value:function(t){return t.uri.slice(0,t.base.length)===t.base?"?".concat(t.uri.slice(t.base.length)):"?".concat(t.uri)}}])}(ht),Ht=function(i){return i.collections="COLLECTIONS",i.defaultGraphType="DEFAULT_GRAPH_TYPE",i.equalsMethod="EQUALS_METHOD",i.id="ID",i.identity="IDENTITY",i.reversibleId="REVERSIBLE_ID",i.variableType="VARIABLE_TYPE",i}({}),Yl=new da,sr={supports:ke(ke(ke(ke(ke(ke(ke({},Ht.collections,!1),Ht.defaultGraphType,!1),Ht.equalsMethod,!0),Ht.identity,!1),Ht.id,!0),Ht.reversibleId,!1),Ht.variableType,!0),blankNode:function(r){return new br(r)},defaultGraph:function(){return Yl},equals:function(r,e){return r===e||!r||!e?!0:Cn(r)||Cn(e)?Cn(r)&&Cn(e)?this.equals(r.subject,e.subject)&&this.equals(r.predicate,e.predicate)&&this.equals(r.object,e.object)&&this.equals(r.graph,e.graph):!1:Lr(r)&&Lr(e)?this.id(r)===this.id(e):!1},id:function(r){if(!r)return"undefined";if(Cn(r))return this.quadToNQ(r);switch(r.termType){case dn:return"defaultGraph";case Gr:return hn.toString(r);default:var e=this.termToNQ(r);if(e)return e;throw new Error("Can't id term with type '".concat(r.termType,"'"))}},isQuad:function(r){return r instanceof on},literal:function(r,e){if(typeof r!="string"&&!e)return gr.fromValue(r);var t=typeof r=="string"?r:""+r;return typeof e=="string"?e.indexOf(":")===-1?new gr(t,e):new gr(t,null,this.namedNode(e)):new gr(t,null,e)},namedNode:function(r){return new Pt(r)},quad:function(r,e,t,n){return new on(r,e,t,n||Yl)},triple:function(r,e,t,n){return this.quad(r,e,t,n)},quadToNQ:function(r){return"".concat(this.termToNQ(r.subject)," ").concat(this.termToNQ(r.predicate)," ").concat(this.termToNQ(r.object)," ").concat(this.termToNQ(r.graph)," .")},termToNQ:function(r){var e=this;switch(r.termType){case gn:return"_:"+r.value;case dn:return"";case nc:return"<http://www.w3.org/1999/02/22-rdf-syntax-ns#nil>";case Mn:return gr.toNT(r);case _i:case pn:return"<"+r.value+">";case Wr:return"("+r.elements.map(function(t){return e.termToNQ(t)}).join(" ")+")";default:throw new Error("Can't serialize nonstandard term type (was '".concat(r.termType,"')"))}},toNQ:function(r){return this.isQuad(r)?this.quadToNQ(r):this.termToNQ(r)},variable:function(r){return new hn(r)}},_r={debug:function(r){},warn:function(r){},info:function(r){},error:function(r){},success:function(r){},msg:function(r){}};function Ut(i,r){var e=r||{namedNode:function(n){return new Pt(n)}};return function(t){return e.namedNode(i+(t||""))}}var Qr={},Mr={};function Pp(i,r,e){if(e===void 0&&(e=Array.prototype),i&&typeof e.find=="function")return e.find.call(i,r);for(var t=0;t<i.length;t++)if(Object.prototype.hasOwnProperty.call(i,t)){var n=i[t];if(r.call(void 0,n,t,i))return n}}function ha(i,r){return r===void 0&&(r=Object),r&&typeof r.freeze=="function"?r.freeze(i):i}function qp(i,r){if(i===null||typeof i!="object")throw new TypeError("target is not an object");for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(i[e]=r[e]);return i}var gc=ha({HTML:"text/html",isHTML:function(i){return i===gc.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),mc=ha({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(i){return i===mc.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Mr.assign=qp;Mr.find=Pp;Mr.freeze=ha;Mr.MIME_TYPE=gc;Mr.NAMESPACE=mc;var vc=Mr,wr=vc.find,oi=vc.NAMESPACE;function jp(i){return i!==""}function Mp(i){return i?i.split(/[\t\n\f\r ]+/).filter(jp):[]}function Up(i,r){return i.hasOwnProperty(r)||(i[r]=!0),i}function Jl(i){if(!i)return[];var r=Mp(i);return Object.keys(r.reduce(Up,{}))}function xp(i){return function(r){return i&&i.indexOf(r)!==-1}}function pi(i,r){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(r[e]=i[e])}function Wt(i,r){var e=i.prototype;if(!(e instanceof r)){let t=function(){};t.prototype=r.prototype,t=new t,pi(e,t),i.prototype=e=t}e.constructor!=i&&(typeof i!="function"&&console.error("unknown Class:"+i),e.constructor=i)}var Qt={},ar=Qt.ELEMENT_NODE=1,Ln=Qt.ATTRIBUTE_NODE=2,ts=Qt.TEXT_NODE=3,bc=Qt.CDATA_SECTION_NODE=4,wc=Qt.ENTITY_REFERENCE_NODE=5,Vp=Qt.ENTITY_NODE=6,yc=Qt.PROCESSING_INSTRUCTION_NODE=7,kc=Qt.COMMENT_NODE=8,Dc=Qt.DOCUMENT_NODE=9,Ec=Qt.DOCUMENT_TYPE_NODE=10,Br=Qt.DOCUMENT_FRAGMENT_NODE=11,Hp=Qt.NOTATION_NODE=12,qt={},Lt={};qt.INDEX_SIZE_ERR=(Lt[1]="Index size error",1);qt.DOMSTRING_SIZE_ERR=(Lt[2]="DOMString size error",2);var zt=qt.HIERARCHY_REQUEST_ERR=(Lt[3]="Hierarchy request error",3);qt.WRONG_DOCUMENT_ERR=(Lt[4]="Wrong document",4);qt.INVALID_CHARACTER_ERR=(Lt[5]="Invalid character",5);qt.NO_DATA_ALLOWED_ERR=(Lt[6]="No data allowed",6);qt.NO_MODIFICATION_ALLOWED_ERR=(Lt[7]="No modification allowed",7);var Ac=qt.NOT_FOUND_ERR=(Lt[8]="Not found",8);qt.NOT_SUPPORTED_ERR=(Lt[9]="Not supported",9);var Zl=qt.INUSE_ATTRIBUTE_ERR=(Lt[10]="Attribute in use",10);qt.INVALID_STATE_ERR=(Lt[11]="Invalid state",11);qt.SYNTAX_ERR=(Lt[12]="Syntax error",12);qt.INVALID_MODIFICATION_ERR=(Lt[13]="Invalid modification",13);qt.NAMESPACE_ERR=(Lt[14]="Invalid namespace",14);qt.INVALID_ACCESS_ERR=(Lt[15]="Invalid access",15);function Ct(i,r){if(r instanceof Error)var e=r;else e=this,Error.call(this,Lt[i]),this.message=Lt[i],Error.captureStackTrace&&Error.captureStackTrace(this,Ct);return e.code=i,r&&(this.message=this.message+": "+r),e}Ct.prototype=Error.prototype;pi(qt,Ct);function Ir(){}Ir.prototype={length:0,item:function(i){return i>=0&&i<this.length?this[i]:null},toString:function(i,r){for(var e=[],t=0;t<this.length;t++)Sn(this[t],e,i,r);return e.join("")},filter:function(i){return Array.prototype.filter.call(this,i)},indexOf:function(i){return Array.prototype.indexOf.call(this,i)}};function Bn(i,r){this._node=i,this._refresh=r,_a(this)}function _a(i){var r=i._node._inc||i._node.ownerDocument._inc;if(i._inc!==r){var e=i._refresh(i._node);if(qc(i,"length",e.length),!i.$$length||e.length<i.$$length)for(var t=e.length;t in i;t++)Object.prototype.hasOwnProperty.call(i,t)&&delete i[t];pi(e,i),i._inc=r}}Bn.prototype.item=function(i){return _a(this),this[i]||null};Wt(Bn,Ir);function rs(){}function Cc(i,r){for(var e=i.length;e--;)if(i[e]===r)return e}function Kl(i,r,e,t){if(t?r[Cc(r,t)]=e:r[r.length++]=e,i){e.ownerElement=i;var n=i.ownerDocument;n&&(t&&Sc(n,i,t),zp(n,i,e))}}function eu(i,r,e){var t=Cc(r,e);if(t>=0){for(var n=r.length-1;t<n;)r[t]=r[++t];if(r.length=n,i){var a=i.ownerDocument;a&&(Sc(a,i,e),e.ownerElement=null)}}else throw new Ct(Ac,new Error(i.tagName+"@"+e))}rs.prototype={length:0,item:Ir.prototype.item,getNamedItem:function(i){for(var r=this.length;r--;){var e=this[r];if(e.nodeName==i)return e}},setNamedItem:function(i){var r=i.ownerElement;if(r&&r!=this._ownerElement)throw new Ct(Zl);var e=this.getNamedItem(i.nodeName);return Kl(this._ownerElement,this,i,e),e},setNamedItemNS:function(i){var r=i.ownerElement,e;if(r&&r!=this._ownerElement)throw new Ct(Zl);return e=this.getNamedItemNS(i.namespaceURI,i.localName),Kl(this._ownerElement,this,i,e),e},removeNamedItem:function(i){var r=this.getNamedItem(i);return eu(this._ownerElement,this,r),r},removeNamedItemNS:function(i,r){var e=this.getNamedItemNS(i,r);return eu(this._ownerElement,this,e),e},getNamedItemNS:function(i,r){for(var e=this.length;e--;){var t=this[e];if(t.localName==r&&t.namespaceURI==i)return t}return null}};function Nc(){}Nc.prototype={hasFeature:function(i,r){return!0},createDocument:function(i,r,e){var t=new gi;if(t.implementation=this,t.childNodes=new Ir,t.doctype=e||null,e&&t.appendChild(e),r){var n=t.createElementNS(i,r);t.appendChild(n)}return t},createDocumentType:function(i,r,e){var t=new cs;return t.name=i,t.nodeName=i,t.publicId=r||"",t.systemId=e||"",t}};function lt(){}lt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(i,r){return ns(this,i,r)},replaceChild:function(i,r){ns(this,i,r,Fc),r&&this.removeChild(r)},removeChild:function(i){return Rc(this,i)},appendChild:function(i){return this.insertBefore(i,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(i){return Zs(this.ownerDocument||this,this,i)},normalize:function(){for(var i=this.firstChild;i;){var r=i.nextSibling;r&&r.nodeType==ts&&i.nodeType==ts?(this.removeChild(r),i.appendData(r.data)):(i.normalize(),i=r)}},isSupported:function(i,r){return this.ownerDocument.implementation.hasFeature(i,r)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(i){for(var r=this;r;){var e=r._nsMap;if(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]===i)return t}r=r.nodeType==Ln?r.ownerDocument:r.parentNode}return null},lookupNamespaceURI:function(i){for(var r=this;r;){var e=r._nsMap;if(e&&Object.prototype.hasOwnProperty.call(e,i))return e[i];r=r.nodeType==Ln?r.ownerDocument:r.parentNode}return null},isDefaultNamespace:function(i){var r=this.lookupPrefix(i);return r==null}};function Tc(i){return i=="<"&&"&lt;"||i==">"&&"&gt;"||i=="&"&&"&amp;"||i=='"'&&"&quot;"||"&#"+i.charCodeAt()+";"}pi(Qt,lt);pi(Qt,lt.prototype);function fi(i,r){if(r(i))return!0;if(i=i.firstChild)do if(fi(i,r))return!0;while(i=i.nextSibling)}function gi(){this.ownerDocument=this}function zp(i,r,e){i&&i._inc++;var t=e.namespaceURI;t===oi.XMLNS&&(r._nsMap[e.prefix?e.localName:""]=e.value)}function Sc(i,r,e,t){i&&i._inc++;var n=e.namespaceURI;n===oi.XMLNS&&delete r._nsMap[e.prefix?e.localName:""]}function pa(i,r,e){if(i&&i._inc){i._inc++;var t=r.childNodes;if(e)t[t.length++]=e;else{for(var n=r.firstChild,a=0;n;)t[a++]=n,n=n.nextSibling;t.length=a,delete t[t.length]}}}function Rc(i,r){var e=r.previousSibling,t=r.nextSibling;return e?e.nextSibling=t:i.firstChild=t,t?t.previousSibling=e:i.lastChild=e,r.parentNode=null,r.previousSibling=null,r.nextSibling=null,pa(i.ownerDocument,i),r}function Xp(i){return i&&(i.nodeType===lt.DOCUMENT_NODE||i.nodeType===lt.DOCUMENT_FRAGMENT_NODE||i.nodeType===lt.ELEMENT_NODE)}function $p(i){return i&&(yr(i)||ga(i)||Pr(i)||i.nodeType===lt.DOCUMENT_FRAGMENT_NODE||i.nodeType===lt.COMMENT_NODE||i.nodeType===lt.PROCESSING_INSTRUCTION_NODE)}function Pr(i){return i&&i.nodeType===lt.DOCUMENT_TYPE_NODE}function yr(i){return i&&i.nodeType===lt.ELEMENT_NODE}function ga(i){return i&&i.nodeType===lt.TEXT_NODE}function tu(i,r){var e=i.childNodes||[];if(wr(e,yr)||Pr(r))return!1;var t=wr(e,Pr);return!(r&&t&&e.indexOf(t)>e.indexOf(r))}function ru(i,r){var e=i.childNodes||[];function t(a){return yr(a)&&a!==r}if(wr(e,t))return!1;var n=wr(e,Pr);return!(r&&n&&e.indexOf(n)>e.indexOf(r))}function Gp(i,r,e){if(!Xp(i))throw new Ct(zt,"Unexpected parent node type "+i.nodeType);if(e&&e.parentNode!==i)throw new Ct(Ac,"child not in parent");if(!$p(r)||Pr(r)&&i.nodeType!==lt.DOCUMENT_NODE)throw new Ct(zt,"Unexpected node type "+r.nodeType+" for parent node type "+i.nodeType)}function Wp(i,r,e){var t=i.childNodes||[],n=r.childNodes||[];if(r.nodeType===lt.DOCUMENT_FRAGMENT_NODE){var a=n.filter(yr);if(a.length>1||wr(n,ga))throw new Ct(zt,"More than one element or text in fragment");if(a.length===1&&!tu(i,e))throw new Ct(zt,"Element in fragment can not be inserted before doctype")}if(yr(r)&&!tu(i,e))throw new Ct(zt,"Only one element can be added and only after doctype");if(Pr(r)){if(wr(t,Pr))throw new Ct(zt,"Only one doctype is allowed");var s=wr(t,yr);if(e&&t.indexOf(s)<t.indexOf(e))throw new Ct(zt,"Doctype can only be inserted before an element");if(!e&&s)throw new Ct(zt,"Doctype can not be appended since element is present")}}function Fc(i,r,e){var t=i.childNodes||[],n=r.childNodes||[];if(r.nodeType===lt.DOCUMENT_FRAGMENT_NODE){var a=n.filter(yr);if(a.length>1||wr(n,ga))throw new Ct(zt,"More than one element or text in fragment");if(a.length===1&&!ru(i,e))throw new Ct(zt,"Element in fragment can not be inserted before doctype")}if(yr(r)&&!ru(i,e))throw new Ct(zt,"Only one element can be added and only after doctype");if(Pr(r)){if(wr(t,function(o){return Pr(o)&&o!==e}))throw new Ct(zt,"Only one doctype is allowed");var s=wr(t,yr);if(e&&t.indexOf(s)<t.indexOf(e))throw new Ct(zt,"Doctype can only be inserted before an element")}}function ns(i,r,e,t){Gp(i,r,e),i.nodeType===lt.DOCUMENT_NODE&&(t||Wp)(i,r,e);var n=r.parentNode;if(n&&n.removeChild(r),r.nodeType===Br){var a=r.firstChild;if(a==null)return r;var s=r.lastChild}else a=s=r;var l=e?e.previousSibling:i.lastChild;a.previousSibling=l,s.nextSibling=e,l?l.nextSibling=a:i.firstChild=a,e==null?i.lastChild=s:e.previousSibling=s;do a.parentNode=i;while(a!==s&&(a=a.nextSibling));return pa(i.ownerDocument||i,i),r.nodeType==Br&&(r.firstChild=r.lastChild=null),r}function Qp(i,r){return r.parentNode&&r.parentNode.removeChild(r),r.parentNode=i,r.previousSibling=i.lastChild,r.nextSibling=null,r.previousSibling?r.previousSibling.nextSibling=r:i.firstChild=r,i.lastChild=r,pa(i.ownerDocument,i,r),r}gi.prototype={nodeName:"#document",nodeType:Dc,doctype:null,documentElement:null,_inc:1,insertBefore:function(i,r){if(i.nodeType==Br){for(var e=i.firstChild;e;){var t=e.nextSibling;this.insertBefore(e,r),e=t}return i}return ns(this,i,r),i.ownerDocument=this,this.documentElement===null&&i.nodeType===ar&&(this.documentElement=i),i},removeChild:function(i){return this.documentElement==i&&(this.documentElement=null),Rc(this,i)},replaceChild:function(i,r){ns(this,i,r,Fc),i.ownerDocument=this,r&&this.removeChild(r),yr(i)&&(this.documentElement=i)},importNode:function(i,r){return Pc(this,i,r)},getElementById:function(i){var r=null;return fi(this.documentElement,function(e){if(e.nodeType==ar&&e.getAttribute("id")==i)return r=e,!0}),r},getElementsByClassName:function(i){var r=Jl(i);return new Bn(this,function(e){var t=[];return r.length>0&&fi(e.documentElement,function(n){if(n!==e&&n.nodeType===ar){var a=n.getAttribute("class");if(a){var s=i===a;if(!s){var l=Jl(a);s=r.every(xp(l))}s&&t.push(n)}}}),t})},createElement:function(i){var r=new _n;r.ownerDocument=this,r.nodeName=i,r.tagName=i,r.localName=i,r.childNodes=new Ir;var e=r.attributes=new rs;return e._ownerElement=r,r},createDocumentFragment:function(){var i=new ds;return i.ownerDocument=this,i.childNodes=new Ir,i},createTextNode:function(i){var r=new ma;return r.ownerDocument=this,r.appendData(i),r},createComment:function(i){var r=new va;return r.ownerDocument=this,r.appendData(i),r},createCDATASection:function(i){var r=new ba;return r.ownerDocument=this,r.appendData(i),r},createProcessingInstruction:function(i,r){var e=new ya;return e.ownerDocument=this,e.tagName=e.nodeName=e.target=i,e.nodeValue=e.data=r,e},createAttribute:function(i){var r=new is;return r.ownerDocument=this,r.name=i,r.nodeName=i,r.localName=i,r.specified=!0,r},createEntityReference:function(i){var r=new wa;return r.ownerDocument=this,r.nodeName=i,r},createElementNS:function(i,r){var e=new _n,t=r.split(":"),n=e.attributes=new rs;return e.childNodes=new Ir,e.ownerDocument=this,e.nodeName=r,e.tagName=r,e.namespaceURI=i,t.length==2?(e.prefix=t[0],e.localName=t[1]):e.localName=r,n._ownerElement=e,e},createAttributeNS:function(i,r){var e=new is,t=r.split(":");return e.ownerDocument=this,e.nodeName=r,e.name=r,e.namespaceURI=i,e.specified=!0,t.length==2?(e.prefix=t[0],e.localName=t[1]):e.localName=r,e}};Wt(gi,lt);function _n(){this._nsMap={}}_n.prototype={nodeType:ar,hasAttribute:function(i){return this.getAttributeNode(i)!=null},getAttribute:function(i){var r=this.getAttributeNode(i);return r&&r.value||""},getAttributeNode:function(i){return this.attributes.getNamedItem(i)},setAttribute:function(i,r){var e=this.ownerDocument.createAttribute(i);e.value=e.nodeValue=""+r,this.setAttributeNode(e)},removeAttribute:function(i){var r=this.getAttributeNode(i);r&&this.removeAttributeNode(r)},appendChild:function(i){return i.nodeType===Br?this.insertBefore(i,null):Qp(this,i)},setAttributeNode:function(i){return this.attributes.setNamedItem(i)},setAttributeNodeNS:function(i){return this.attributes.setNamedItemNS(i)},removeAttributeNode:function(i){return this.attributes.removeNamedItem(i.nodeName)},removeAttributeNS:function(i,r){var e=this.getAttributeNodeNS(i,r);e&&this.removeAttributeNode(e)},hasAttributeNS:function(i,r){return this.getAttributeNodeNS(i,r)!=null},getAttributeNS:function(i,r){var e=this.getAttributeNodeNS(i,r);return e&&e.value||""},setAttributeNS:function(i,r,e){var t=this.ownerDocument.createAttributeNS(i,r);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},getAttributeNodeNS:function(i,r){return this.attributes.getNamedItemNS(i,r)},getElementsByTagName:function(i){return new Bn(this,function(r){var e=[];return fi(r,function(t){t!==r&&t.nodeType==ar&&(i==="*"||t.tagName==i)&&e.push(t)}),e})},getElementsByTagNameNS:function(i,r){return new Bn(this,function(e){var t=[];return fi(e,function(n){n!==e&&n.nodeType===ar&&(i==="*"||n.namespaceURI===i)&&(r==="*"||n.localName==r)&&t.push(n)}),t})}};gi.prototype.getElementsByTagName=_n.prototype.getElementsByTagName;gi.prototype.getElementsByTagNameNS=_n.prototype.getElementsByTagNameNS;Wt(_n,lt);function is(){}is.prototype.nodeType=Ln;Wt(is,lt);function mi(){}mi.prototype={data:"",substringData:function(i,r){return this.data.substring(i,i+r)},appendData:function(i){i=this.data+i,this.nodeValue=this.data=i,this.length=i.length},insertData:function(i,r){this.replaceData(i,0,r)},appendChild:function(i){throw new Error(Lt[zt])},deleteData:function(i,r){this.replaceData(i,r,"")},replaceData:function(i,r,e){var t=this.data.substring(0,i),n=this.data.substring(i+r);e=t+e+n,this.nodeValue=this.data=e,this.length=e.length}};Wt(mi,lt);function ma(){}ma.prototype={nodeName:"#text",nodeType:ts,splitText:function(i){var r=this.data,e=r.substring(i);r=r.substring(0,i),this.data=this.nodeValue=r,this.length=r.length;var t=this.ownerDocument.createTextNode(e);return this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling),t}};Wt(ma,mi);function va(){}va.prototype={nodeName:"#comment",nodeType:kc};Wt(va,mi);function ba(){}ba.prototype={nodeName:"#cdata-section",nodeType:bc};Wt(ba,mi);function cs(){}cs.prototype.nodeType=Ec;Wt(cs,lt);function Ic(){}Ic.prototype.nodeType=Hp;Wt(Ic,lt);function Oc(){}Oc.prototype.nodeType=Vp;Wt(Oc,lt);function wa(){}wa.prototype.nodeType=wc;Wt(wa,lt);function ds(){}ds.prototype.nodeName="#document-fragment";ds.prototype.nodeType=Br;Wt(ds,lt);function ya(){}ya.prototype.nodeType=yc;Wt(ya,lt);function Lc(){}Lc.prototype.serializeToString=function(i,r,e){return Bc.call(i,r,e)};lt.prototype.toString=Bc;function Bc(i,r){var e=[],t=this.nodeType==9&&this.documentElement||this,n=t.prefix,a=t.namespaceURI;if(a&&n==null){var n=t.lookupPrefix(a);if(n==null)var s=[{namespace:a,prefix:null}]}return Sn(this,e,i,r,s),e.join("")}function nu(i,r,e){var t=i.prefix||"",n=i.namespaceURI;if(!n||t==="xml"&&n===oi.XML||n===oi.XMLNS)return!1;for(var a=e.length;a--;){var s=e[a];if(s.prefix===t)return s.namespace!==n}return!0}function Rs(i,r,e){i.push(" ",r,'="',e.replace(/[<>&"\t\n\r]/g,Tc),'"')}function Sn(i,r,e,t,n){if(n||(n=[]),t)if(i=t(i),i){if(typeof i=="string"){r.push(i);return}}else return;switch(i.nodeType){case ar:var a=i.attributes,s=a.length,b=i.firstChild,l=i.tagName;e=oi.isHTML(i.namespaceURI)||e;var o=l;if(!e&&!i.prefix&&i.namespaceURI){for(var u,f=0;f<a.length;f++)if(a.item(f).name==="xmlns"){u=a.item(f).value;break}if(!u)for(var d=n.length-1;d>=0;d--){var c=n[d];if(c.prefix===""&&c.namespace===i.namespaceURI){u=c.namespace;break}}if(u!==i.namespaceURI)for(var d=n.length-1;d>=0;d--){var c=n[d];if(c.namespace===i.namespaceURI){c.prefix&&(o=c.prefix+":"+l);break}}}r.push("<",o);for(var h=0;h<s;h++){var g=a.item(h);g.prefix=="xmlns"?n.push({prefix:g.localName,namespace:g.value}):g.nodeName=="xmlns"&&n.push({prefix:"",namespace:g.value})}for(var h=0;h<s;h++){var g=a.item(h);if(nu(g,e,n)){var N=g.prefix||"",y=g.namespaceURI;Rs(r,N?"xmlns:"+N:"xmlns",y),n.push({prefix:N,namespace:y})}Sn(g,r,e,t,n)}if(l===o&&nu(i,e,n)){var N=i.prefix||"",y=i.namespaceURI;Rs(r,N?"xmlns:"+N:"xmlns",y),n.push({prefix:N,namespace:y})}if(b||e&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(r.push(">"),e&&/^script$/i.test(l))for(;b;)b.data?r.push(b.data):Sn(b,r,e,t,n.slice()),b=b.nextSibling;else for(;b;)Sn(b,r,e,t,n.slice()),b=b.nextSibling;r.push("</",o,">")}else r.push("/>");return;case Dc:case Br:for(var b=i.firstChild;b;)Sn(b,r,e,t,n.slice()),b=b.nextSibling;return;case Ln:return Rs(r,i.name,i.value);case ts:return r.push(i.data.replace(/[<&>]/g,Tc));case bc:return r.push("<![CDATA[",i.data,"]]>");case kc:return r.push("<!--",i.data,"-->");case Ec:var S=i.publicId,D=i.systemId;if(r.push("<!DOCTYPE ",i.name),S)r.push(" PUBLIC ",S),D&&D!="."&&r.push(" ",D),r.push(">");else if(D&&D!=".")r.push(" SYSTEM ",D,">");else{var A=i.internalSubset;A&&r.push(" [",A,"]"),r.push(">")}return;case yc:return r.push("<?",i.target," ",i.data,"?>");case wc:return r.push("&",i.nodeName,";");default:r.push("??",i.nodeName)}}function Pc(i,r,e){var t;switch(r.nodeType){case ar:t=r.cloneNode(!1),t.ownerDocument=i;case Br:break;case Ln:e=!0;break}if(t||(t=r.cloneNode(!1)),t.ownerDocument=i,t.parentNode=null,e)for(var n=r.firstChild;n;)t.appendChild(Pc(i,n,e)),n=n.nextSibling;return t}function Zs(i,r,e){var t=new r.constructor;for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var a=r[n];typeof a!="object"&&a!=t[n]&&(t[n]=a)}switch(r.childNodes&&(t.childNodes=new Ir),t.ownerDocument=i,t.nodeType){case ar:var s=r.attributes,l=t.attributes=new rs,o=s.length;l._ownerElement=t;for(var u=0;u<o;u++)t.setAttributeNode(Zs(i,s.item(u),!0));break;case Ln:e=!0}if(e)for(var f=r.firstChild;f;)t.appendChild(Zs(i,f,e)),f=f.nextSibling;return t}function qc(i,r,e){i[r]=e}try{if(Object.defineProperty){let i=function(r){switch(r.nodeType){case ar:case Br:var e=[];for(r=r.firstChild;r;)r.nodeType!==7&&r.nodeType!==8&&e.push(i(r)),r=r.nextSibling;return e.join("");default:return r.nodeValue}};Object.defineProperty(Bn.prototype,"length",{get:function(){return _a(this),this.$$length}}),Object.defineProperty(lt.prototype,"textContent",{get:function(){return i(this)},set:function(r){switch(this.nodeType){case ar:case Br:for(;this.firstChild;)this.removeChild(this.firstChild);(r||String(r))&&this.appendChild(this.ownerDocument.createTextNode(r));break;default:this.data=r,this.value=r,this.nodeValue=r}}}),qc=function(r,e,t){r["$$"+e]=t}}}catch{}Qr.DocumentType=cs;Qr.DOMException=Ct;Qr.DOMImplementation=Nc;Qr.Element=_n;Qr.Node=lt;Qr.NodeList=Ir;Qr.XMLSerializer=Lc;var hs={},jc={};(function(i){var r=Mr.freeze;i.XML_ENTITIES=r({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),i.HTML_ENTITIES=r({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),i.entityMap=i.HTML_ENTITIES})(jc);var ka={},ci=Mr.NAMESPACE,Ks=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,iu=new RegExp("[\\-\\.0-9"+Ks.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),su=new RegExp("^"+Ks.source+iu.source+"*(?::"+Ks.source+iu.source+"*)?$"),Qn=0,Ur=1,wn=2,Yn=3,yn=4,kn=5,Jn=6,xi=7;function Pn(i,r){this.message=i,this.locator=r,Error.captureStackTrace&&Error.captureStackTrace(this,Pn)}Pn.prototype=new Error;Pn.prototype.name=Pn.name;function Mc(){}Mc.prototype={parse:function(i,r,e){var t=this.domBuilder;t.startDocument(),Uc(r,r={}),Yp(i,r,e,t,this.errorHandler),t.endDocument()}};function Yp(i,r,e,t,n){function a(Q){if(Q>65535){Q-=65536;var oe=55296+(Q>>10),ee=56320+(Q&1023);return String.fromCharCode(oe,ee)}else return String.fromCharCode(Q)}function s(Q){var oe=Q.slice(1,-1);return Object.hasOwnProperty.call(e,oe)?e[oe]:oe.charAt(0)==="#"?a(parseInt(oe.substr(1).replace("x","0x"))):(n.error("entity not found:"+Q),Q)}function l(Q){if(Q>N){var oe=i.substring(N,Q).replace(/&#?\w+;/g,s);c&&o(N),t.characters(oe,0,Q-N),N=Q}}function o(Q,oe){for(;Q>=f&&(oe=d.exec(i));)u=oe.index,f=u+oe[0].length,c.lineNumber++;c.columnNumber=Q-u+1}for(var u=0,f=0,d=/.*(?:\r\n?|\n)|.*$/g,c=t.locator,h=[{currentNSMap:r}],g={},N=0;;){try{var y=i.indexOf("<",N);if(y<0){if(!i.substr(N).match(/^\s*$/)){var b=t.doc,S=b.createTextNode(i.substr(N));b.appendChild(S),t.currentElement=S}return}switch(y>N&&l(y),i.charAt(y+1)){case"/":var k=i.indexOf(">",y+3),D=i.substring(y+2,k).replace(/[ \t\n\r]+$/g,""),A=h.pop();k<0?(D=i.substring(y+2).replace(/[\s<].*/,""),n.error("end tag name: "+D+" is not complete:"+A.tagName),k=y+1+D.length):D.match(/\s</)&&(D=D.replace(/[\s<].*/,""),n.error("end tag name: "+D+" maybe not complete"),k=y+1+D.length);var v=A.localNSMap,E=A.tagName==D,w=E||A.tagName&&A.tagName.toLowerCase()==D.toLowerCase();if(w){if(t.endElement(A.uri,A.localName,D),v)for(var B in v)Object.prototype.hasOwnProperty.call(v,B)&&t.endPrefixMapping(B);E||n.fatalError("end tag name: "+D+" is not match the current start tagName:"+A.tagName)}else h.push(A);k++;break;case"?":c&&o(y),k=t0(i,y,t);break;case"!":c&&o(y),k=e0(i,y,t,n);break;default:c&&o(y);var I=new xc,L=h[h.length-1].currentNSMap,k=Jp(i,y,I,L,s,n),j=I.length;if(!I.closed&&Kp(i,k,I.tagName,g)&&(I.closed=!0,e.nbsp||n.warning("unclosed xml attribute")),c&&j){for(var O=au(c,{}),R=0;R<j;R++){var G=I[R];o(G.offset),G.locator=au(c,{})}t.locator=O,lu(I,t,L)&&h.push(I),t.locator=c}else lu(I,t,L)&&h.push(I);ci.isHTML(I.uri)&&!I.closed?k=Zp(i,k,I.tagName,s,t):k++}}catch(Q){if(Q instanceof Pn)throw Q;n.error("element parse error: "+Q),k=-1}k>N?N=k:l(Math.max(y,N)+1)}}function au(i,r){return r.lineNumber=i.lineNumber,r.columnNumber=i.columnNumber,r}function Jp(i,r,e,t,n,a){function s(c,h,g){e.attributeNames.hasOwnProperty(c)&&a.fatalError("Attribute "+c+" redefined"),e.addValue(c,h.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,n),g)}for(var l,o,u=++r,f=Qn;;){var d=i.charAt(u);switch(d){case"=":if(f===Ur)l=i.slice(r,u),f=Yn;else if(f===wn)f=Yn;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(f===Yn||f===Ur)if(f===Ur&&(a.warning('attribute value must after "="'),l=i.slice(r,u)),r=u+1,u=i.indexOf(d,r),u>0)o=i.slice(r,u),s(l,o,r-1),f=kn;else throw new Error("attribute value no end '"+d+"' match");else if(f==yn)o=i.slice(r,u),s(l,o,r),a.warning('attribute "'+l+'" missed start quot('+d+")!!"),r=u+1,f=kn;else throw new Error('attribute value must after "="');break;case"/":switch(f){case Qn:e.setTagName(i.slice(r,u));case kn:case Jn:case xi:f=xi,e.closed=!0;case yn:case Ur:break;case wn:e.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),f==Qn&&e.setTagName(i.slice(r,u)),u;case">":switch(f){case Qn:e.setTagName(i.slice(r,u));case kn:case Jn:case xi:break;case yn:case Ur:o=i.slice(r,u),o.slice(-1)==="/"&&(e.closed=!0,o=o.slice(0,-1));case wn:f===wn&&(o=l),f==yn?(a.warning('attribute "'+o+'" missed quot(")!'),s(l,o,r)):((!ci.isHTML(t[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+o+'" missed value!! "'+o+'" instead!!'),s(o,o,r));break;case Yn:throw new Error("attribute value missed!!")}return u;case"":d=" ";default:if(d<=" ")switch(f){case Qn:e.setTagName(i.slice(r,u)),f=Jn;break;case Ur:l=i.slice(r,u),f=wn;break;case yn:var o=i.slice(r,u);a.warning('attribute "'+o+'" missed quot(")!!'),s(l,o,r);case kn:f=Jn;break}else switch(f){case wn:e.tagName,(!ci.isHTML(t[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+l+'" missed value!! "'+l+'" instead2!!'),s(l,l,r),r=u,f=Ur;break;case kn:a.warning('attribute space is required"'+l+'"!!');case Jn:f=Ur,r=u;break;case Yn:f=yn,r=u;break;case xi:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function lu(i,r,e){for(var t=i.tagName,n=null,d=i.length;d--;){var a=i[d],s=a.qName,l=a.value,c=s.indexOf(":");if(c>0)var o=a.prefix=s.slice(0,c),u=s.slice(c+1),f=o==="xmlns"&&u;else u=s,o=null,f=s==="xmlns"&&"";a.localName=u,f!==!1&&(n==null&&(n={},Uc(e,e={})),e[f]=n[f]=l,a.uri=ci.XMLNS,r.startPrefixMapping(f,l))}for(var d=i.length;d--;){a=i[d];var o=a.prefix;o&&(o==="xml"&&(a.uri=ci.XML),o!=="xmlns"&&(a.uri=e[o||""]))}var c=t.indexOf(":");c>0?(o=i.prefix=t.slice(0,c),u=i.localName=t.slice(c+1)):(o=null,u=i.localName=t);var h=i.uri=e[o||""];if(r.startElement(h,u,t,i),i.closed){if(r.endElement(h,u,t),n)for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&r.endPrefixMapping(o)}else return i.currentNSMap=e,i.localNSMap=n,!0}function Zp(i,r,e,t,n){if(/^(?:script|textarea)$/i.test(e)){var a=i.indexOf("</"+e+">",r),s=i.substring(r+1,a);if(/[&<]/.test(s))return/^script$/i.test(e)?(n.characters(s,0,s.length),a):(s=s.replace(/&#?\w+;/g,t),n.characters(s,0,s.length),a)}return r+1}function Kp(i,r,e,t){var n=t[e];return n==null&&(n=i.lastIndexOf("</"+e+">"),n<r&&(n=i.lastIndexOf("</"+e)),t[e]=n),n<r}function Uc(i,r){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(r[e]=i[e])}function e0(i,r,e,t){var n=i.charAt(r+2);switch(n){case"-":if(i.charAt(r+3)==="-"){var a=i.indexOf("-->",r+4);return a>r?(e.comment(i,r+4,a-r-4),a+3):(t.error("Unclosed comment"),-1)}else return-1;default:if(i.substr(r+3,6)=="CDATA["){var a=i.indexOf("]]>",r+9);return e.startCDATA(),e.characters(i,r+9,a-r-9),e.endCDATA(),a+3}var s=r0(i,r),l=s.length;if(l>1&&/!doctype/i.test(s[0][0])){var o=s[1][0],u=!1,f=!1;l>3&&(/^public$/i.test(s[2][0])?(u=s[3][0],f=l>4&&s[4][0]):/^system$/i.test(s[2][0])&&(f=s[3][0]));var d=s[l-1];return e.startDTD(o,u,f),e.endDTD(),d.index+d[0].length}}return-1}function t0(i,r,e){var t=i.indexOf("?>",r);if(t){var n=i.substring(r,t).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return n?(n[0].length,e.processingInstruction(n[1],n[2]),t+2):-1}return-1}function xc(){this.attributeNames={}}xc.prototype={setTagName:function(i){if(!su.test(i))throw new Error("invalid tagName:"+i);this.tagName=i},addValue:function(i,r,e){if(!su.test(i))throw new Error("invalid attribute:"+i);this.attributeNames[i]=this.length,this[this.length++]={qName:i,value:r,offset:e}},length:0,getLocalName:function(i){return this[i].localName},getLocator:function(i){return this[i].locator},getQName:function(i){return this[i].qName},getURI:function(i){return this[i].uri},getValue:function(i){return this[i].value}};function r0(i,r){var e,t=[],n=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(n.lastIndex=r,n.exec(i);e=n.exec(i);)if(t.push(e),e[1])return t}ka.XMLReader=Mc;ka.ParseError=Pn;var n0=Mr,i0=Qr,uu=jc,Vc=ka,s0=i0.DOMImplementation,ou=n0.NAMESPACE,a0=Vc.ParseError,l0=Vc.XMLReader;function Hc(i){return i.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function zc(i){this.options=i||{locator:{}}}zc.prototype.parseFromString=function(i,r){var e=this.options,t=new l0,n=e.domBuilder||new vi,a=e.errorHandler,s=e.locator,l=e.xmlns||{},o=/\/x?html?$/.test(r),u=o?uu.HTML_ENTITIES:uu.XML_ENTITIES;s&&n.setDocumentLocator(s),t.errorHandler=u0(a,n,s),t.domBuilder=e.domBuilder||n,o&&(l[""]=ou.HTML),l.xml=l.xml||ou.XML;var f=e.normalizeLineEndings||Hc;return i&&typeof i=="string"?t.parse(f(i),l,u):t.errorHandler.error("invalid doc source"),n.doc};function u0(i,r,e){if(!i){if(r instanceof vi)return r;i=r}var t={},n=i instanceof Function;e=e||{};function a(s){var l=i[s];!l&&n&&(l=i.length==2?function(o){i(s,o)}:i),t[s]=l&&function(o){l("[xmldom "+s+"]	"+o+ea(e))}||function(){}}return a("warning"),a("error"),a("fatalError"),t}function vi(){this.cdata=!1}function Dn(i,r){r.lineNumber=i.lineNumber,r.columnNumber=i.columnNumber}vi.prototype={startDocument:function(){this.doc=new s0().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(i,r,e,t){var n=this.doc,a=n.createElementNS(i,e||r),s=t.length;Vi(this,a),this.currentElement=a,this.locator&&Dn(this.locator,a);for(var l=0;l<s;l++){var i=t.getURI(l),o=t.getValue(l),e=t.getQName(l),u=n.createAttributeNS(i,e);this.locator&&Dn(t.getLocator(l),u),u.value=u.nodeValue=o,a.setAttributeNode(u)}},endElement:function(i,r,e){var t=this.currentElement;t.tagName,this.currentElement=t.parentNode},startPrefixMapping:function(i,r){},endPrefixMapping:function(i){},processingInstruction:function(i,r){var e=this.doc.createProcessingInstruction(i,r);this.locator&&Dn(this.locator,e),Vi(this,e)},ignorableWhitespace:function(i,r,e){},characters:function(i,r,e){if(i=fu.apply(this,arguments),i){if(this.cdata)var t=this.doc.createCDATASection(i);else var t=this.doc.createTextNode(i);this.currentElement?this.currentElement.appendChild(t):/^\s*$/.test(i)&&this.doc.appendChild(t),this.locator&&Dn(this.locator,t)}},skippedEntity:function(i){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(i){(this.locator=i)&&(i.lineNumber=0)},comment:function(i,r,e){i=fu.apply(this,arguments);var t=this.doc.createComment(i);this.locator&&Dn(this.locator,t),Vi(this,t)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(i,r,e){var t=this.doc.implementation;if(t&&t.createDocumentType){var n=t.createDocumentType(i,r,e);this.locator&&Dn(this.locator,n),Vi(this,n),this.doc.doctype=n}},warning:function(i){console.warn("[xmldom warning]	"+i,ea(this.locator))},error:function(i){console.error("[xmldom error]	"+i,ea(this.locator))},fatalError:function(i){throw new a0(i,this.locator)}};function ea(i){if(i)return`
@`+(i.systemId||"")+"#[line:"+i.lineNumber+",col:"+i.columnNumber+"]"}function fu(i,r,e){return typeof i=="string"?i.substr(r,e):i.length>=r+e||r?new java.lang.String(i,r,e)+"":i}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(i){vi.prototype[i]=function(){return null}});function Vi(i,r){i.currentElement?i.currentElement.appendChild(r):i.doc.appendChild(r)}hs.__DOMHandler=vi;hs.normalizeLineEndings=Hc;hs.DOMParser=zc;var cu=hs.DOMParser;function o0(i){return i=i.split(";")[0].trim(),new Pt("http://www.w3.org/ns/iana/media-types/"+i+"#Resource")}function f0(i,r){i.callbacks={};for(var e=r.length-1;e>=0;e--)i.callbacks[r[e]]=[];i.addHook=function(t){i.callbacks[t]||(i.callbacks[t]=[])},i.addCallback=function(t,n){i.callbacks[t].push(n)},i.removeCallback=function(t,n){for(var a=0;a<i.callbacks[t].length;a++)if(i.callbacks[t][a].name===n)return i.callbacks[t].splice(a,1),!0;return!1},i.insertCallback=function(t,n){i.callbacks[t].unshift(n)},i.fireCallbacks=function(n,a){var s=[],l=[],o=i.callbacks[n].length,u,f;for(u=o-1;u>=0;u--)f=i.callbacks[n][u],f&&f.apply(i,a)&&s.push(f);for(u=s.length-1;u>=0;u--)l.push(s[u]);for(u=o;u<i.callbacks[n].length;u++)l.push(i.callbacks[n][u]);i.callbacks[n]=l}}function c0(i,r){r=r||{};var e=[];r&&r.selfClosing&&r.selfClosing.split(" ").forEach(function(n){e[n]=!0});var t=[];return r&&r.skipAttributes&&r.skipAttributes.split(" ").forEach(function(n){t[n]=!0}),Xc(i,r,e,t)}function Xc(i,r,e,t){var n,a="",s=[!1];if(typeof i.nodeType>"u")return a;if(i.nodeType===1){if(i.hasAttribute("class")&&r&&r.classWithChildText&&i.matches(r.classWithChildText.class))a+=i.querySelector(r.classWithChildText.element).textContent;else if(!(r&&r.skipNodeWithClass&&i.matches("."+r.skipNodeWithClass))){var l=i.nodeName.toLowerCase();a+="<"+l;var o=[];for(n=i.attributes.length-1;n>=0;n--){var u=i.attributes[n];if(!(t&&t.length>0&&t[u.name])&&!/^\d+$/.test(u.name)){if(u.name==="class"&&r&&r.replaceClassItemWith&&u.value.split(" ").indexOf(r.replaceClassItemWith.source)>-1){var f=new RegExp(r.replaceClassItemWith.source,"g");u.value=u.value.replace(f,r.replaceClassItemWith.target).trim()}u.name==="class"&&r&&r.skipClassWithValue&&r.skipClassWithValue===u.value||o.push(u.name+"='"+u.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;")+"'")}}if(o.length>0&&(r&&r.sortAttributes&&o.sort(function(c,h){return c.toLowerCase().localeCompare(h.toLowerCase())}),a+=" "+o.join(" ")),e&&e.ename)a+=" />";else{for(a+=">",a+=l==="html"?`
  `:"",s.push(l==="style"||l==="script"),n=0;n<i.childNodes.length;n++)a+=Xc(i.childNodes[n]);s.pop(),a+=l==="body"?"</"+l+`>
`:"</"+l+">"}}}else if(i.nodeType===8)a+="<!--"+i.nodeValue+"-->";else if(i.nodeType===3||i.nodeType===4){var d=i.nodeValue.replace(/\n+$/,"");a+=s[s.length-1]?d:d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}else console.log("Warning; Cannot handle serialising nodes of type: "+i.nodeType),console.log(i);return a}function Fs(i,r,e,t){var n=function(o){return o.termType==="BlankNode"?null:o},a=function(o){var u=e.statementsMatching(o).map(function(f){return""+n(f.subject)+" "+n(f.predicate)+" "+n(f.object)}).concat(e.statementsMatching(void 0,void 0,o).map(function(f){return""+n(f.subject)+" "+n(f.predicate)+" "+n(f.object)}));return u.sort(),u.join(`
`)},s=Object.prototype.hasOwnProperty.call(e,"compareTerms")?e.compareTerms(i,r):i.compareTerm(r);return i.termType==="BlankNode"&&r.termType==="BlankNode"?s===0?0:a(i)>a(r)?1:a(i)<a(r)?-1:s:t&&i.uri&&r.uri?(t[i.uri]||i.uri).localeCompare(t[r.uri]||r.uri):s}function d0(i,r,e,t){return Fs(i.subject,r.subject,e,t)||Fs(i.predicate,r.predicate,e,t)||Fs(i.object,r.object,e,t)}function Rn(i,r){var e;if(r=r||{},typeof module<"u"&&module&&module.exports){var t=new cu().parseFromString(i,r.contentType||"application/xhtml+xml");return t}else typeof window<"u"&&window.DOMParser?e=new window.DOMParser:e=new cu;return e.parseFromString(i,"application/xml")}function h0(i,r){for(var e=0;e<i.length;e++)if(i[e].subject.equals(r.subject)&&i[e].predicate.equals(r.predicate)&&i[e].object.equals(r.object)&&i[e].why.equals(r.why)){i.splice(e,1);return}throw new Error("RDFArrayRemove: Array did not contain "+r+" "+r.why)}function $c(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:sr;return{boolean:i.namedNode("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:i.namedNode("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:i.namedNode("http://www.w3.org/2001/XMLSchema#decimal"),double:i.namedNode("http://www.w3.org/2001/XMLSchema#double"),integer:i.namedNode("http://www.w3.org/2001/XMLSchema#integer"),langString:i.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:i.namedNode("http://www.w3.org/2001/XMLSchema#string")}}$c(sr);const du={acl:"http://www.w3.org/ns/auth/acl#",arg:"http://www.w3.org/ns/pim/arg#",as:"https://www.w3.org/ns/activitystreams#",cal:"http://www.w3.org/2002/12/cal/ical#",cert:"http://www.w3.org/ns/auth/cert#",contact:"http://www.w3.org/2000/10/swap/pim/contact#",dc:"http://purl.org/dc/elements/1.1/",dct:"http://purl.org/dc/terms/",doap:"http://usefulinc.com/ns/doap#",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",gpx:"http://www.w3.org/ns/pim/gpx#",http:"http://www.w3.org/2007/ont/http#",httph:"http://www.w3.org/2007/ont/httph#",icalTZ:"http://www.w3.org/2002/12/cal/icaltzd#",ldp:"http://www.w3.org/ns/ldp#",link:"http://www.w3.org/2007/ont/link#",log:"http://www.w3.org/2000/10/swap/log#",meeting:"http://www.w3.org/ns/pim/meeting#",mo:"http://purl.org/ontology/mo/",org:"http://www.w3.org/ns/org#",owl:"http://www.w3.org/2002/07/owl#",pad:"http://www.w3.org/ns/pim/pad#",patch:"http://www.w3.org/ns/pim/patch#",prov:"http://www.w3.org/ns/prov#",qu:"http://www.w3.org/2000/10/swap/pim/qif#",trip:"http://www.w3.org/ns/pim/trip#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rss:"http://purl.org/rss/1.0/",sched:"http://www.w3.org/ns/pim/schedule#",schema:"http://schema.org/",sioc:"http://rdfs.org/sioc/ns#",solid:"http://www.w3.org/ns/solid/terms#",space:"http://www.w3.org/ns/pim/space#",stat:"http://www.w3.org/ns/posix/stat#",tab:"http://www.w3.org/2007/ont/link#",tabont:"http://www.w3.org/2007/ont/link#",ui:"http://www.w3.org/ns/ui#",vcard:"http://www.w3.org/2006/vcard/ns#",wf:"http://www.w3.org/2005/01/wf/flow#",xsd:"http://www.w3.org/2001/XMLSchema#",cco:"http://www.ontologyrepository.com/CommonCoreOntologies/",skos:"http://www.w3.org/2004/02/skos/core#",bookmark:"http://www.w3.org/2002/01/bookmark#",vann:"http://purl.org/vocab/vann/"};function _0(i={namedNode:r=>r}){const r={};for(const e in du){const t=du[e];r[e]=function(n=""){return i.namedNode(t+n)}}return r}var p0=_0;const hu=fs(p0);var Gc={exports:{}};(function(i){(function(r,e){i.exports?i.exports=e():r.ttl2jsonld=e()})(ua,function(){function r(n,a){function s(){this.constructor=n}s.prototype=a.prototype,n.prototype=new s}function e(n,a,s,l){this.message=n,this.expected=a,this.found=s,this.location=l,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,e)}r(e,Error),e.buildMessage=function(n,a){var s={literal:function(h){return'"'+o(h.text)+'"'},class:function(h){var g="",N;for(N=0;N<h.parts.length;N++)g+=h.parts[N]instanceof Array?u(h.parts[N][0])+"-"+u(h.parts[N][1]):u(h.parts[N]);return"["+(h.inverted?"^":"")+g+"]"},any:function(h){return"any character"},end:function(h){return"end of input"},other:function(h){return h.description}};function l(h){return h.charCodeAt(0).toString(16).toUpperCase()}function o(h){return h.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+l(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+l(g)})}function u(h){return h.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+l(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+l(g)})}function f(h){return s[h.type](h)}function d(h){var g=new Array(h.length),N,y;for(N=0;N<h.length;N++)g[N]=f(h[N]);if(g.sort(),g.length>0){for(N=1,y=1;N<g.length;N++)g[N-1]!==g[N]&&(g[y]=g[N],y++);g.length=y}switch(g.length){case 1:return g[0];case 2:return g[0]+" or "+g[1];default:return g.slice(0,-1).join(", ")+", or "+g[g.length-1]}}function c(h){return h?'"'+o(h)+'"':"end of input"}return"Expected "+d(n)+" but "+c(a)+" found."};function t(n,a){a=a!==void 0?a:{};var s={},l={turtleDoc:ll},o=ll,u=function(_){var T=it.toJSON();return T["@graph"]=[],_.filter(F=>Array.isArray(F)).forEach(F=>{F.forEach(U=>{T["@graph"].push(U)})}),T["@graph"].length===1&&(Object.assign(T,T["@graph"][0]),delete T["@graph"]),T},f=".",d=Qe(".",!1),c=function(_){return _},h="#",g=Qe("#",!1),N=/^[^\n]/,y=ot([`
`],!0,!1),b=`
`,S=Qe(`
`,!1),D=function(_){return _.join("")},A="@prefix",v=Qe("@prefix",!1),E=function(_,T){return it.addPrefix(_===""?"0":_,T),{}},w="@base",B=Qe("@base",!1),I=function(_){return it.addBase(_),{}},L=/^[Bb]/,k=ot(["B","b"],!1,!1),j=/^[Aa]/,O=ot(["A","a"],!1,!1),R=/^[Ss]/,G=ot(["S","s"],!1,!1),Q=/^[Ee]/,oe=ot(["E","e"],!1,!1),ee=/^[Pp]/,X=ot(["P","p"],!1,!1),H=/^[Rr]/,V=ot(["R","r"],!1,!1),W=/^[Ff]/,M=ot(["F","f"],!1,!1),J=/^[Ii]/,Fe=ot(["I","i"],!1,!1),Le=/^[Xx]/,de=ot(["X","x"],!1,!1),_e=function(_,T){var F={};return typeof _=="string"&&_!=="[]"?F["@id"]=_:typeof _=="object"&&Object.assign(F,_),T&&Object.assign(F,T),[F]},ue=function(_,T){var F={};return _&&Object.assign(F,_),T&&Object.assign(F,T),[F]},Ee=";",Xe=Qe(";",!1),ct=function(_,T,F,U){var z={};return z[F]=U,z},We=function(_,T,F){return F},he=function(_,T,F){var U={};return F.unshift(v_(_,T)),F.forEach(z=>{z&&Object.keys(z).forEach(K=>{z[K].forEach(te=>{K==="@type"&&te["@id"]!==void 0&&(te=te["@id"]),U[K]===void 0?U[K]=te:Array.isArray(U[K])?U[K].push(te):U[K]=[U[K],te]})})}),U},Ie=",",Ne=Qe(",",!1),Ue=function(_,T){return T},je=function(_,T){return T.unshift(_),T},ze="a",rt=Qe("a",!1),jt=function(){return"@type"},Mt=function(_){return Ts(_,!0)},ir=function(_){return Ts(_,!1)},ut=function(_){return _==="[]"?{}:{"@id":_}},Te=function(_){return{"@id":_}},Be="[",tt=Qe("[",!1),Rt="]",Yt=Qe("]",!1),nt="(",Et=Qe("(",!1),zn=")",Kr=Qe(")",!1),vn=function(_){return{"@list":_}},Cr=function(_,T){return{"@value":_,"@language":T}},Bt="^^",Ei=Qe("^^",!1),en=function(_,T){if(T==="http://www.w3.org/2001/XMLSchema#boolean"&&_==="true")return!0;if(T==="http://www.w3.org/2001/XMLSchema#boolean"&&_==="false")return!1;if(T==="http://www.w3.org/2001/XMLSchema#integer")return parseInt(_);if(T==="http://www.w3.org/2001/XMLSchema#double")return parseFloat(_);const F=it.resolve(T,!0);if(F){const U=T.split(":")[0];if(F==="http://www.w3.org/2001/XMLSchema#boolean"&&_==="true")return it.decrement(U),!0;if(F==="http://www.w3.org/2001/XMLSchema#boolean"&&_==="false")return it.decrement(U),!1;if(F==="http://www.w3.org/2001/XMLSchema#integer")return it.decrement(U),parseInt(_);if(F==="http://www.w3.org/2001/XMLSchema#double")return it.decrement(U),parseFloat(_)}return{"@value":_,"@type":T}},bn="true",Sa=Qe("true",!1),Nr=function(){return!0},Xn="false",Cd=Qe("false",!1),Nd=function(){return!1},Td=function(_){return _+":"},Sd="<",Rd=Qe("<",!1),Ra=/^[^\0- <>"{}|\^`\\]/,Fa=ot([["\0"," "],"<",">",'"',"{","}","|","^","`","\\"],!0,!1),Fd=">",Id=Qe(">",!1),Od=function(_){const T=_.map(U=>65536<=U.codePointAt(0)&&U.codePointAt(0)<=983039?"a":U.length===1?U:U.length===6?String.fromCharCode("0x"+U.substring(2)):U.length===10?String.fromCodePoint("0x"+U.substring(2)):U).join("");if(T.match(/^[^\u0000-\u0020<>"{}|^`\\]*$/)){var F=_.join("");try{return it.resolve(F)}catch{ws("Invalid IRIREF "+F)}}else ws("Invalid IRIREF "+_.join("")+" / "+T)},Tr=":",Sr=Qe(":",!1),Ld=function(_){return _=_||"0",it.hasPrefix(_)===!1&&ws("undefined prefix "+_),_},Bd=function(_){return _||""},Pd=function(_,T){return it.increment(_),it.resolve(_+":"+T)},Ia="_:",qd=Qe("_:",!1),Tt=/^[0-9]/,St=ot([["0","9"]],!1,!1),jd="@",Md=Qe("@",!1),Oa=/^[a-zA-Z]/,La=ot([["a","z"],["A","Z"]],!1,!1),ms="-",vs=Qe("-",!1),Ai=/^[a-zA-Z0-9]/,Ci=ot([["a","z"],["A","Z"],["0","9"]],!1,!1),Ba=function(_,T){return"-"+T.join("")},Ud=function(_,T){return _.join("")+T.join("")},Ni=/^[+\-]/,Ti=ot(["+","-"],!1,!1),xd=function(_){return _.match(/^[0+][0-9]+$/)?{"@value":_,"@type":"http://www.w3.org/2001/XMLSchema#integer"}:parseInt(_)},Vd=function(_){return{"@value":_,"@type":"http://www.w3.org/2001/XMLSchema#decimal"}},Hd=function(_){return{"@value":_,"@type":"http://www.w3.org/2001/XMLSchema#double"}},zd=/^[eE]/,Xd=ot(["e","E"],!1,!1),Si='"',Ri=Qe('"',!1),Pa=/^[^"\\\n\r]/,qa=ot(['"',"\\",`
`,"\r"],!0,!1),Fi="'",Ii=Qe("'",!1),ja=/^[^'\\\n\r]/,Ma=ot(["'","\\",`
`,"\r"],!0,!1),Oi="'''",Ua=Qe("'''",!1),or=/^[^'\\]/,fr=ot(["'","\\"],!0,!1),Li="''",xa=Qe("''",!1),Va=function(_,T){return"''"+T.join("")},Ha=function(_,T){return"'"+T.join("")},za=function(_,T){return _.join("")+T.join("")},Bi='"""',Xa=Qe('"""',!1),cr=/^[^"\\]/,dr=ot(['"',"\\"],!0,!1),Pi='""',$a=Qe('""',!1),Ga=function(_,T){return'""'+T.join("")},Wa=function(_,T){return'"'+T.join("")},Qa="\\U",$d=Qe("\\U",!1),Gd=function(_){return String.fromCodePoint(parseInt(_.join(""),16))},Ya="\\u",Wd=Qe("\\u",!1),Qd=function(_){return String.fromCharCode(parseInt(_.join(""),16))},Ja="\\t",Yd=Qe("\\t",!1),Jd=function(){return"	"},Za="\\b",Zd=Qe("\\b",!1),Kd=function(){return"\b"},Ka="\\n",eh=Qe("\\n",!1),th=function(){return`
`},el="\\r",rh=Qe("\\r",!1),nh=function(){return"\r"},tl="\\f",ih=Qe("\\f",!1),sh=function(){return"\f"},rl='\\"',ah=Qe('\\"',!1),lh=function(){return'"'},nl="\\'",uh=Qe("\\'",!1),oh=function(){return"'"},il="\\\\",fh=Qe("\\\\",!1),ch=function(){return"\\"},dh=/^[ \t\r\n]/,hh=ot([" ","	","\r",`
`],!1,!1),_h=function(){return"[]"},ph=/^[\uD800-\uDBFF]/,gh=ot([["\uD800","\uDBFF"]],!1,!1),mh=/^[\uDC00-\uDFFF]/,vh=ot([["\uDC00","\uDFFF"]],!1,!1),bh=function(_,T){return _+T},wh=/^[A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,yh=ot([["A","Z"],["a","z"],["À","Ö"],["Ø","ö"],["ø","˿"],["Ͱ","ͽ"],["Ϳ","῿"],["‌","‍"],["⁰","↏"],["Ⰰ","⿯"],["、","퟿"],["豈","﷏"],["ﷰ","�"]],!1,!1),kh="_",Dh=Qe("_",!1),Eh="·",Ah=Qe("·",!1),Ch=/^[\u0300-\u036F]/,Nh=ot([["̀","ͯ"]],!1,!1),Th=/^[\u203F-\u2040]/,Sh=ot([["‿","⁀"]],!1,!1),sl=function(_,T,F,U){return F.join("")+U.join("")},Rh=function(_,T,F){return _+T.join("")+F.join("")},Fh="%",Ih=Qe("%",!1),Oh=/^[0-9A-Fa-f]/,Lh=ot([["0","9"],["A","F"],["a","f"]],!1,!1),Bh="\\",Ph=Qe("\\",!1),qh=/^[_~.!$&'()*+,;=\/?#@%\-]/,jh=ot(["_","~",".","!","$","&","'","(",")","*","+",",",";","=","/","?","#","@","%","-"],!1,!1),p=0,Se=0,qi=[{line:1,column:1}],hr=0,bs=[],ji;if("startRule"in a){if(!(a.startRule in l))throw new Error(`Can't start parsing from rule "`+a.startRule+'".');o=l[a.startRule]}function ws(_,T){throw T=T!==void 0?T:ys(Se,p),Uh(_,T)}function Qe(_,T){return{type:"literal",text:_,ignoreCase:T}}function ot(_,T,F){return{type:"class",parts:_,inverted:T,ignoreCase:F}}function Mh(){return{type:"end"}}function al(_){var T=qi[_],F;if(T)return T;for(F=_-1;!qi[F];)F--;for(T=qi[F],T={line:T.line,column:T.column};F<_;)n.charCodeAt(F)===10?(T.line++,T.column=1):T.column++,F++;return qi[_]=T,T}function ys(_,T){var F=al(_),U=al(T);return{start:{offset:_,line:F.line,column:F.column},end:{offset:T,line:U.line,column:U.column}}}function ce(_){p<hr||(p>hr&&(hr=p,bs=[]),bs.push(_))}function Uh(_,T){return new e(_,null,null,T)}function xh(_,T,F){return new e(e.buildMessage(_,T),_,T,F)}function ll(){var _,T,F,U;for(_=p,T=[],F=ul();F!==s;)T.push(F),F=ul();if(T!==s){for(F=[],U=Re();U!==s;)F.push(U),U=Re();F!==s?(Se=_,T=u(T),_=T):(p=_,_=s)}else p=_,_=s;return _}function ul(){var _,T,F,U;if(_=Hh(),_===s)if(_=p,T=Wh(),T!==s){for(F=[],U=Re();U!==s;)F.push(U),U=Re();F!==s?(n.charCodeAt(p)===46?(U=f,p++):(U=s,ce(d)),U!==s?(Se=_,T=c(T),_=T):(p=_,_=s)):(p=_,_=s)}else p=_,_=s;return _}function Vh(){var _,T,F,U;if(_=p,n.charCodeAt(p)===35?(T=h,p++):(T=s,ce(g)),T!==s){for(F=[],N.test(n.charAt(p))?(U=n.charAt(p),p++):(U=s,ce(y));U!==s;)F.push(U),N.test(n.charAt(p))?(U=n.charAt(p),p++):(U=s,ce(y));F!==s?(n.charCodeAt(p)===10?(U=b,p++):(U=s,ce(S)),U!==s?(Se=_,T=D(F),_=T):(p=_,_=s)):(p=_,_=s)}else p=_,_=s;return _}function Re(){var _;return _=d_(),_===s&&(_=Vh()),_}function Hh(){var _;return _=zh(),_===s&&(_=Xh(),_===s&&(_=Gh(),_===s&&(_=$h()))),_}function zh(){var _,T,F,U,z,K,te,$,Oe;for(_=p,T=[],F=Re();F!==s;)T.push(F),F=Re();if(T!==s)if(n.substr(p,7)===A?(F=A,p+=7):(F=s,ce(v)),F!==s){for(U=[],z=Re();z!==s;)U.push(z),z=Re();if(U!==s)if(z=hl(),z!==s){for(K=[],te=Re();te!==s;)K.push(te),te=Re();if(K!==s)if(te=Gn(),te!==s){for($=[],Oe=Re();Oe!==s;)$.push(Oe),Oe=Re();$!==s?(n.charCodeAt(p)===46?(Oe=f,p++):(Oe=s,ce(d)),Oe!==s?(Se=_,T=E(z,te),_=T):(p=_,_=s)):(p=_,_=s)}else p=_,_=s;else p=_,_=s}else p=_,_=s;else p=_,_=s}else p=_,_=s;else p=_,_=s;return _}function Xh(){var _,T,F,U,z,K,te;for(_=p,T=[],F=Re();F!==s;)T.push(F),F=Re();if(T!==s)if(n.substr(p,5)===w?(F=w,p+=5):(F=s,ce(B)),F!==s){for(U=[],z=Re();z!==s;)U.push(z),z=Re();if(U!==s)if(z=Gn(),z!==s){for(K=[],te=Re();te!==s;)K.push(te),te=Re();K!==s?(n.charCodeAt(p)===46?(te=f,p++):(te=s,ce(d)),te!==s?(Se=_,T=I(z),_=T):(p=_,_=s)):(p=_,_=s)}else p=_,_=s;else p=_,_=s}else p=_,_=s;else p=_,_=s;return _}function $h(){var _,T,F,U,z,K,te,$;for(_=p,T=[],F=Re();F!==s;)T.push(F),F=Re();if(T!==s)if(L.test(n.charAt(p))?(F=n.charAt(p),p++):(F=s,ce(k)),F!==s)if(j.test(n.charAt(p))?(U=n.charAt(p),p++):(U=s,ce(O)),U!==s)if(R.test(n.charAt(p))?(z=n.charAt(p),p++):(z=s,ce(G)),z!==s)if(Q.test(n.charAt(p))?(K=n.charAt(p),p++):(K=s,ce(oe)),K!==s){for(te=[],$=Re();$!==s;)te.push($),$=Re();te!==s?($=Gn(),$!==s?(Se=_,T=I($),_=T):(p=_,_=s)):(p=_,_=s)}else p=_,_=s;else p=_,_=s;else p=_,_=s;else p=_,_=s;else p=_,_=s;return _}function Gh(){var _,T,F,U,z,K,te,$,Oe,at,rn,nn;for(_=p,T=[],F=Re();F!==s;)T.push(F),F=Re();if(T!==s)if(ee.test(n.charAt(p))?(F=n.charAt(p),p++):(F=s,ce(X)),F!==s)if(H.test(n.charAt(p))?(U=n.charAt(p),p++):(U=s,ce(V)),U!==s)if(Q.test(n.charAt(p))?(z=n.charAt(p),p++):(z=s,ce(oe)),z!==s)if(W.test(n.charAt(p))?(K=n.charAt(p),p++):(K=s,ce(M)),K!==s)if(J.test(n.charAt(p))?(te=n.charAt(p),p++):(te=s,ce(Fe)),te!==s)if(Le.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(de)),$!==s){for(Oe=[],at=Re();at!==s;)Oe.push(at),at=Re();if(Oe!==s)if(at=hl(),at!==s){for(rn=[],nn=Re();nn!==s;)rn.push(nn),nn=Re();rn!==s?(nn=Gn(),nn!==s?(Se=_,T=E(at,nn),_=T):(p=_,_=s)):(p=_,_=s)}else p=_,_=s;else p=_,_=s}else p=_,_=s;else p=_,_=s;else p=_,_=s;else p=_,_=s;else p=_,_=s;else p=_,_=s;else p=_,_=s;return _}function Wh(){var _,T,F;return _=p,T=Qh(),T!==s?(F=ks(),F!==s?(Se=_,T=_e(T,F),_=T):(p=_,_=s)):(p=_,_=s),_===s&&(_=p,T=ol(),T!==s?(F=ks(),F===s&&(F=null),F!==s?(Se=_,T=ue(T,F),_=T):(p=_,_=s)):(p=_,_=s)),_}function ks(){var _,T,F,U,z,K,te,$,Oe,at;if(_=p,T=Es(),T!==s)if(F=Ds(),F!==s){for(U=[],z=p,K=[],te=Re();te!==s;)K.push(te),te=Re();for(K!==s?(n.charCodeAt(p)===59?(te=Ee,p++):(te=s,ce(Xe)),te!==s?($=p,Oe=Es(),Oe!==s?(at=Ds(),at!==s?(Se=$,Oe=ct(T,F,Oe,at),$=Oe):(p=$,$=s)):(p=$,$=s),$===s&&($=null),$!==s?(Se=z,K=We(T,F,$),z=K):(p=z,z=s)):(p=z,z=s)):(p=z,z=s);z!==s;){for(U.push(z),z=p,K=[],te=Re();te!==s;)K.push(te),te=Re();K!==s?(n.charCodeAt(p)===59?(te=Ee,p++):(te=s,ce(Xe)),te!==s?($=p,Oe=Es(),Oe!==s?(at=Ds(),at!==s?(Se=$,Oe=ct(T,F,Oe,at),$=Oe):(p=$,$=s)):(p=$,$=s),$===s&&($=null),$!==s?(Se=z,K=We(T,F,$),z=K):(p=z,z=s)):(p=z,z=s)):(p=z,z=s)}U!==s?(Se=_,T=he(T,F,U),_=T):(p=_,_=s)}else p=_,_=s;else p=_,_=s;return _}function Ds(){var _,T,F,U,z,K,te;if(_=p,T=$n(),T!==s){for(F=[],U=p,z=[],K=Re();K!==s;)z.push(K),K=Re();for(z!==s?(n.charCodeAt(p)===44?(K=Ie,p++):(K=s,ce(Ne)),K!==s?(te=$n(),te!==s?(Se=U,z=Ue(T,te),U=z):(p=U,U=s)):(p=U,U=s)):(p=U,U=s);U!==s;){for(F.push(U),U=p,z=[],K=Re();K!==s;)z.push(K),K=Re();z!==s?(n.charCodeAt(p)===44?(K=Ie,p++):(K=s,ce(Ne)),K!==s?(te=$n(),te!==s?(Se=U,z=Ue(T,te),U=z):(p=U,U=s)):(p=U,U=s)):(p=U,U=s)}F!==s?(Se=_,T=je(T,F),_=T):(p=_,_=s)}else p=_,_=s;return _}function Es(){var _,T,F;if(_=p,T=Yh(),T!==s&&(Se=_,T=c(T)),_=T,_===s){for(_=p,T=[],F=Re();F!==s;)T.push(F),F=Re();T!==s?(n.charCodeAt(p)===97?(F=ze,p++):(F=s,ce(rt)),F!==s?(Se=_,T=jt(),_=T):(p=_,_=s)):(p=_,_=s)}return _}function Qh(){var _,T;return _=p,T=fl(),T!==s&&(Se=_,T=Mt(T)),_=T,_===s&&(_=cl(),_===s&&(_=Mi())),_}function Yh(){var _,T,F;for(_=p,T=[],F=Re();F!==s;)T.push(F),F=Re();return T!==s?(F=Mi(),F!==s?(Se=_,T=c(F),_=T):(p=_,_=s)):(p=_,_=s),_}function $n(){var _,T;return _=Jh(),_===s&&(_=p,T=fl(),T!==s&&(Se=_,T=ir(T)),_=T,_===s&&(_=p,T=cl(),T!==s&&(Se=_,T=ut(T)),_=T,_===s&&(_=p,T=ol(),T!==s&&(Se=_,T=c(T)),_=T,_===s&&(_=p,T=Mi(),T!==s&&(Se=_,T=Te(T)),_=T)))),_}function Jh(){var _;return _=Kh(),_===s&&(_=Zh(),_===s&&(_=e_())),_}function ol(){var _,T,F,U,z,K;for(_=p,T=[],F=Re();F!==s;)T.push(F),F=Re();if(T!==s)if(n.charCodeAt(p)===91?(F=Be,p++):(F=s,ce(tt)),F!==s)if(U=ks(),U!==s){for(z=[],K=Re();K!==s;)z.push(K),K=Re();z!==s?(n.charCodeAt(p)===93?(K=Rt,p++):(K=s,ce(Yt)),K!==s?(Se=_,T=c(U),_=T):(p=_,_=s)):(p=_,_=s)}else p=_,_=s;else p=_,_=s;else p=_,_=s;return _}function fl(){var _,T,F,U,z,K;for(_=p,T=[],F=Re();F!==s;)T.push(F),F=Re();if(T!==s)if(n.charCodeAt(p)===40?(F=nt,p++):(F=s,ce(Et)),F!==s){for(U=[],z=$n();z!==s;)U.push(z),z=$n();if(U!==s){for(z=[],K=Re();K!==s;)z.push(K),K=Re();z!==s?(n.charCodeAt(p)===41?(K=zn,p++):(K=s,ce(Kr)),K!==s?(Se=_,T=vn(U),_=T):(p=_,_=s)):(p=_,_=s)}else p=_,_=s}else p=_,_=s;else p=_,_=s;return _}function Zh(){var _,T,F;for(_=p,T=[],F=Re();F!==s;)T.push(F),F=Re();return T!==s?(F=l_(),F===s&&(F=a_(),F===s&&(F=s_())),F!==s?(Se=_,T=c(F),_=T):(p=_,_=s)):(p=_,_=s),_}function Kh(){var _,T,F,U,z,K,te;for(_=p,T=[],F=Re();F!==s;)T.push(F),F=Re();if(T!==s)if(F=As(),F!==s){for(U=[],z=Re();z!==s;)U.push(z),z=Re();U!==s?(z=i_(),z!==s?(Se=_,T=Cr(F,z),_=T):(p=_,_=s)):(p=_,_=s)}else p=_,_=s;else p=_,_=s;if(_===s){for(_=p,T=[],F=Re();F!==s;)T.push(F),F=Re();if(T!==s)if(F=As(),F!==s){for(U=[],z=Re();z!==s;)U.push(z),z=Re();if(U!==s)if(n.substr(p,2)===Bt?(z=Bt,p+=2):(z=s,ce(Ei)),z!==s){for(K=[],te=Re();te!==s;)K.push(te),te=Re();K!==s?(te=Mi(),te!==s?(Se=_,T=en(F,te),_=T):(p=_,_=s)):(p=_,_=s)}else p=_,_=s;else p=_,_=s}else p=_,_=s;else p=_,_=s;if(_===s){for(_=p,T=[],F=Re();F!==s;)T.push(F),F=Re();T!==s?(F=As(),F!==s?(Se=_,T=c(F),_=T):(p=_,_=s)):(p=_,_=s)}}return _}function e_(){var _,T,F;for(_=p,T=[],F=Re();F!==s;)T.push(F),F=Re();if(T!==s?(n.substr(p,4)===bn?(F=bn,p+=4):(F=s,ce(Sa)),F!==s?(Se=_,T=Nr(),_=T):(p=_,_=s)):(p=_,_=s),_===s){for(_=p,T=[],F=Re();F!==s;)T.push(F),F=Re();T!==s?(n.substr(p,5)===Xn?(F=Xn,p+=5):(F=s,ce(Cd)),F!==s?(Se=_,T=Nd(),_=T):(p=_,_=s)):(p=_,_=s)}return _}function As(){var _,T,F;for(_=p,T=[],F=Re();F!==s;)T.push(F),F=Re();return T!==s?(F=f_(),F===s&&(F=c_(),F===s&&(F=o_(),F===s&&(F=u_()))),F!==s?(Se=_,T=c(F),_=T):(p=_,_=s)):(p=_,_=s),_}function Mi(){var _,T,F;for(_=p,T=[],F=Re();F!==s;)T.push(F),F=Re();if(T!==s?(F=Gn(),F!==s?(Se=_,T=c(F),_=T):(p=_,_=s)):(p=_,_=s),_===s){for(_=p,T=[],F=Re();F!==s;)T.push(F),F=Re();T!==s?(F=t_(),F!==s?(Se=_,T=c(F),_=T):(p=_,_=s)):(p=_,_=s)}return _}function t_(){var _,T;return _=r_(),_===s&&(_=p,T=dl(),T!==s&&(Se=_,T=Td(T)),_=T),_}function cl(){var _,T,F;for(_=p,T=[],F=Re();F!==s;)T.push(F),F=Re();if(T!==s?(F=n_(),F!==s?(Se=_,T=c(F),_=T):(p=_,_=s)):(p=_,_=s),_===s){for(_=p,T=[],F=Re();F!==s;)T.push(F),F=Re();T!==s?(F=h_(),F!==s?(Se=_,T=c(F),_=T):(p=_,_=s)):(p=_,_=s)}return _}function Gn(){var _,T,F,U;if(_=p,n.charCodeAt(p)===60?(T=Sd,p++):(T=s,ce(Rd)),T!==s){for(F=[],Ra.test(n.charAt(p))?(U=n.charAt(p),p++):(U=s,ce(Fa)),U===s&&(U=dt());U!==s;)F.push(U),Ra.test(n.charAt(p))?(U=n.charAt(p),p++):(U=s,ce(Fa)),U===s&&(U=dt());F!==s?(n.charCodeAt(p)===62?(U=Fd,p++):(U=s,ce(Id)),U!==s?(Se=_,T=Od(F),_=T):(p=_,_=s)):(p=_,_=s)}else p=_,_=s;return _}function dl(){var _,T,F;return _=p,T=pl(),T===s&&(T=null),T!==s?(n.charCodeAt(p)===58?(F=Tr,p++):(F=s,ce(Sr)),F!==s?(Se=_,T=Ld(T),_=T):(p=_,_=s)):(p=_,_=s),_}function hl(){var _,T,F;return _=p,T=pl(),T===s&&(T=null),T!==s?(n.charCodeAt(p)===58?(F=Tr,p++):(F=s,ce(Sr)),F!==s?(Se=_,T=Bd(T),_=T):(p=_,_=s)):(p=_,_=s),_}function r_(){var _,T,F;return _=p,T=dl(),T!==s?(F=__(),F!==s?(Se=_,T=Pd(T,F),_=T):(p=_,_=s)):(p=_,_=s),_}function n_(){var _,T,F,U,z,K,te,$,Oe,at;if(_=p,T=p,n.substr(p,2)===Ia?(F=Ia,p+=2):(F=s,ce(qd)),F!==s)if(U=Ns(),U===s&&(Tt.test(n.charAt(p))?(U=n.charAt(p),p++):(U=s,ce(St))),U!==s){for(z=[],K=Ft();K!==s;)z.push(K),K=Ft();if(z!==s){if(K=[],te=p,$=[],n.charCodeAt(p)===46?(Oe=f,p++):(Oe=s,ce(d)),Oe!==s)for(;Oe!==s;)$.push(Oe),n.charCodeAt(p)===46?(Oe=f,p++):(Oe=s,ce(d));else $=s;if($!==s){if(Oe=[],at=Ft(),at!==s)for(;at!==s;)Oe.push(at),at=Ft();else Oe=s;Oe!==s?($=[$,Oe],te=$):(p=te,te=s)}else p=te,te=s;for(;te!==s;){if(K.push(te),te=p,$=[],n.charCodeAt(p)===46?(Oe=f,p++):(Oe=s,ce(d)),Oe!==s)for(;Oe!==s;)$.push(Oe),n.charCodeAt(p)===46?(Oe=f,p++):(Oe=s,ce(d));else $=s;if($!==s){if(Oe=[],at=Ft(),at!==s)for(;at!==s;)Oe.push(at),at=Ft();else Oe=s;Oe!==s?($=[$,Oe],te=$):(p=te,te=s)}else p=te,te=s}K!==s?(F=[F,U,z,K],T=F):(p=T,T=s)}else p=T,T=s}else p=T,T=s;else p=T,T=s;return T!==s?_=n.substring(_,p):_=T,_}function i_(){var _,T,F,U,z,K,te,$;if(_=p,n.charCodeAt(p)===64?(T=jd,p++):(T=s,ce(Md)),T!==s){if(F=[],Oa.test(n.charAt(p))?(U=n.charAt(p),p++):(U=s,ce(La)),U!==s)for(;U!==s;)F.push(U),Oa.test(n.charAt(p))?(U=n.charAt(p),p++):(U=s,ce(La));else F=s;if(F!==s){if(U=[],z=p,n.charCodeAt(p)===45?(K=ms,p++):(K=s,ce(vs)),K!==s){if(te=[],Ai.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(Ci)),$!==s)for(;$!==s;)te.push($),Ai.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(Ci));else te=s;te!==s?(Se=z,K=Ba(F,te),z=K):(p=z,z=s)}else p=z,z=s;for(;z!==s;)if(U.push(z),z=p,n.charCodeAt(p)===45?(K=ms,p++):(K=s,ce(vs)),K!==s){if(te=[],Ai.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(Ci)),$!==s)for(;$!==s;)te.push($),Ai.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(Ci));else te=s;te!==s?(Se=z,K=Ba(F,te),z=K):(p=z,z=s)}else p=z,z=s;U!==s?(Se=_,T=Ud(F,U),_=T):(p=_,_=s)}else p=_,_=s}else p=_,_=s;return _}function s_(){var _,T,F,U,z,K;if(_=p,T=p,F=p,Ni.test(n.charAt(p))?(U=n.charAt(p),p++):(U=s,ce(Ti)),U===s&&(U=null),U!==s){if(z=[],Tt.test(n.charAt(p))?(K=n.charAt(p),p++):(K=s,ce(St)),K!==s)for(;K!==s;)z.push(K),Tt.test(n.charAt(p))?(K=n.charAt(p),p++):(K=s,ce(St));else z=s;z!==s?(U=[U,z],F=U):(p=F,F=s)}else p=F,F=s;return F!==s?T=n.substring(T,p):T=F,T!==s&&(Se=_,T=xd(T)),_=T,_}function a_(){var _,T,F,U,z,K,te,$;if(_=p,T=p,F=p,Ni.test(n.charAt(p))?(U=n.charAt(p),p++):(U=s,ce(Ti)),U===s&&(U=null),U!==s){for(z=[],Tt.test(n.charAt(p))?(K=n.charAt(p),p++):(K=s,ce(St));K!==s;)z.push(K),Tt.test(n.charAt(p))?(K=n.charAt(p),p++):(K=s,ce(St));if(z!==s)if(n.charCodeAt(p)===46?(K=f,p++):(K=s,ce(d)),K!==s){if(te=[],Tt.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(St)),$!==s)for(;$!==s;)te.push($),Tt.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(St));else te=s;te!==s?(U=[U,z,K,te],F=U):(p=F,F=s)}else p=F,F=s;else p=F,F=s}else p=F,F=s;return F!==s?T=n.substring(T,p):T=F,T!==s&&(Se=_,T=Vd(T)),_=T,_}function l_(){var _,T,F,U,z,K,te,$,Oe;if(_=p,T=p,F=p,Ni.test(n.charAt(p))?(U=n.charAt(p),p++):(U=s,ce(Ti)),U===s&&(U=null),U!==s){if(z=p,K=[],Tt.test(n.charAt(p))?(te=n.charAt(p),p++):(te=s,ce(St)),te!==s)for(;te!==s;)K.push(te),Tt.test(n.charAt(p))?(te=n.charAt(p),p++):(te=s,ce(St));else K=s;if(K!==s)if(n.charCodeAt(p)===46?(te=f,p++):(te=s,ce(d)),te!==s){for($=[],Tt.test(n.charAt(p))?(Oe=n.charAt(p),p++):(Oe=s,ce(St));Oe!==s;)$.push(Oe),Tt.test(n.charAt(p))?(Oe=n.charAt(p),p++):(Oe=s,ce(St));$!==s?(Oe=Cs(),Oe!==s?(K=[K,te,$,Oe],z=K):(p=z,z=s)):(p=z,z=s)}else p=z,z=s;else p=z,z=s;if(z===s){if(z=p,n.charCodeAt(p)===46?(K=f,p++):(K=s,ce(d)),K!==s){if(te=[],Tt.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(St)),$!==s)for(;$!==s;)te.push($),Tt.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(St));else te=s;te!==s?($=Cs(),$!==s?(K=[K,te,$],z=K):(p=z,z=s)):(p=z,z=s)}else p=z,z=s;if(z===s){if(z=p,K=[],Tt.test(n.charAt(p))?(te=n.charAt(p),p++):(te=s,ce(St)),te!==s)for(;te!==s;)K.push(te),Tt.test(n.charAt(p))?(te=n.charAt(p),p++):(te=s,ce(St));else K=s;K!==s?(te=Cs(),te!==s?(K=[K,te],z=K):(p=z,z=s)):(p=z,z=s)}}z!==s?(U=[U,z],F=U):(p=F,F=s)}else p=F,F=s;return F!==s?T=n.substring(T,p):T=F,T!==s&&(Se=_,T=Hd(T)),_=T,_}function Cs(){var _,T,F,U,z,K;if(_=p,T=p,zd.test(n.charAt(p))?(F=n.charAt(p),p++):(F=s,ce(Xd)),F!==s)if(Ni.test(n.charAt(p))?(U=n.charAt(p),p++):(U=s,ce(Ti)),U===s&&(U=null),U!==s){if(z=[],Tt.test(n.charAt(p))?(K=n.charAt(p),p++):(K=s,ce(St)),K!==s)for(;K!==s;)z.push(K),Tt.test(n.charAt(p))?(K=n.charAt(p),p++):(K=s,ce(St));else z=s;z!==s?(F=[F,U,z],T=F):(p=T,T=s)}else p=T,T=s;else p=T,T=s;return T!==s?_=n.substring(_,p):_=T,_}function u_(){var _,T,F,U;if(_=p,n.charCodeAt(p)===34?(T=Si,p++):(T=s,ce(Ri)),T!==s){for(F=[],Pa.test(n.charAt(p))?(U=n.charAt(p),p++):(U=s,ce(qa)),U===s&&(U=_t(),U===s&&(U=dt()));U!==s;)F.push(U),Pa.test(n.charAt(p))?(U=n.charAt(p),p++):(U=s,ce(qa)),U===s&&(U=_t(),U===s&&(U=dt()));F!==s?(n.charCodeAt(p)===34?(U=Si,p++):(U=s,ce(Ri)),U!==s?(Se=_,T=D(F),_=T):(p=_,_=s)):(p=_,_=s)}else p=_,_=s;return _}function o_(){var _,T,F,U;if(_=p,n.charCodeAt(p)===39?(T=Fi,p++):(T=s,ce(Ii)),T!==s){for(F=[],ja.test(n.charAt(p))?(U=n.charAt(p),p++):(U=s,ce(Ma)),U===s&&(U=_t(),U===s&&(U=dt()));U!==s;)F.push(U),ja.test(n.charAt(p))?(U=n.charAt(p),p++):(U=s,ce(Ma)),U===s&&(U=_t(),U===s&&(U=dt()));F!==s?(n.charCodeAt(p)===39?(U=Fi,p++):(U=s,ce(Ii)),U!==s?(Se=_,T=D(F),_=T):(p=_,_=s)):(p=_,_=s)}else p=_,_=s;return _}function f_(){var _,T,F,U,z,K,te,$;if(_=p,n.substr(p,3)===Oi?(T=Oi,p+=3):(T=s,ce(Ua)),T!==s){for(F=[],or.test(n.charAt(p))?(U=n.charAt(p),p++):(U=s,ce(fr)),U===s&&(U=_t(),U===s&&(U=dt()));U!==s;)F.push(U),or.test(n.charAt(p))?(U=n.charAt(p),p++):(U=s,ce(fr)),U===s&&(U=_t(),U===s&&(U=dt()));if(F!==s){if(U=[],z=p,n.substr(p,2)===Li?(K=Li,p+=2):(K=s,ce(xa)),K!==s){if(te=[],or.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(fr)),$===s&&($=_t(),$===s&&($=dt())),$!==s)for(;$!==s;)te.push($),or.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(fr)),$===s&&($=_t(),$===s&&($=dt()));else te=s;te!==s?(Se=z,K=Va(F,te),z=K):(p=z,z=s)}else p=z,z=s;if(z===s)if(z=p,n.charCodeAt(p)===39?(K=Fi,p++):(K=s,ce(Ii)),K!==s){if(te=[],or.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(fr)),$===s&&($=_t(),$===s&&($=dt())),$!==s)for(;$!==s;)te.push($),or.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(fr)),$===s&&($=_t(),$===s&&($=dt()));else te=s;te!==s?(Se=z,K=Ha(F,te),z=K):(p=z,z=s)}else p=z,z=s;for(;z!==s;){if(U.push(z),z=p,n.substr(p,2)===Li?(K=Li,p+=2):(K=s,ce(xa)),K!==s){if(te=[],or.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(fr)),$===s&&($=_t(),$===s&&($=dt())),$!==s)for(;$!==s;)te.push($),or.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(fr)),$===s&&($=_t(),$===s&&($=dt()));else te=s;te!==s?(Se=z,K=Va(F,te),z=K):(p=z,z=s)}else p=z,z=s;if(z===s)if(z=p,n.charCodeAt(p)===39?(K=Fi,p++):(K=s,ce(Ii)),K!==s){if(te=[],or.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(fr)),$===s&&($=_t(),$===s&&($=dt())),$!==s)for(;$!==s;)te.push($),or.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(fr)),$===s&&($=_t(),$===s&&($=dt()));else te=s;te!==s?(Se=z,K=Ha(F,te),z=K):(p=z,z=s)}else p=z,z=s}U!==s?(n.substr(p,3)===Oi?(z=Oi,p+=3):(z=s,ce(Ua)),z!==s?(Se=_,T=za(F,U),_=T):(p=_,_=s)):(p=_,_=s)}else p=_,_=s}else p=_,_=s;return _}function c_(){var _,T,F,U,z,K,te,$;if(_=p,n.substr(p,3)===Bi?(T=Bi,p+=3):(T=s,ce(Xa)),T!==s){for(F=[],cr.test(n.charAt(p))?(U=n.charAt(p),p++):(U=s,ce(dr)),U===s&&(U=_t(),U===s&&(U=dt()));U!==s;)F.push(U),cr.test(n.charAt(p))?(U=n.charAt(p),p++):(U=s,ce(dr)),U===s&&(U=_t(),U===s&&(U=dt()));if(F!==s){if(U=[],z=p,n.substr(p,2)===Pi?(K=Pi,p+=2):(K=s,ce($a)),K!==s){if(te=[],cr.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(dr)),$===s&&($=_t(),$===s&&($=dt())),$!==s)for(;$!==s;)te.push($),cr.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(dr)),$===s&&($=_t(),$===s&&($=dt()));else te=s;te!==s?(Se=z,K=Ga(F,te),z=K):(p=z,z=s)}else p=z,z=s;if(z===s)if(z=p,n.charCodeAt(p)===34?(K=Si,p++):(K=s,ce(Ri)),K!==s){if(te=[],cr.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(dr)),$===s&&($=_t(),$===s&&($=dt())),$!==s)for(;$!==s;)te.push($),cr.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(dr)),$===s&&($=_t(),$===s&&($=dt()));else te=s;te!==s?(Se=z,K=Wa(F,te),z=K):(p=z,z=s)}else p=z,z=s;for(;z!==s;){if(U.push(z),z=p,n.substr(p,2)===Pi?(K=Pi,p+=2):(K=s,ce($a)),K!==s){if(te=[],cr.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(dr)),$===s&&($=_t(),$===s&&($=dt())),$!==s)for(;$!==s;)te.push($),cr.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(dr)),$===s&&($=_t(),$===s&&($=dt()));else te=s;te!==s?(Se=z,K=Ga(F,te),z=K):(p=z,z=s)}else p=z,z=s;if(z===s)if(z=p,n.charCodeAt(p)===34?(K=Si,p++):(K=s,ce(Ri)),K!==s){if(te=[],cr.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(dr)),$===s&&($=_t(),$===s&&($=dt())),$!==s)for(;$!==s;)te.push($),cr.test(n.charAt(p))?($=n.charAt(p),p++):($=s,ce(dr)),$===s&&($=_t(),$===s&&($=dt()));else te=s;te!==s?(Se=z,K=Wa(F,te),z=K):(p=z,z=s)}else p=z,z=s}U!==s?(n.substr(p,3)===Bi?(z=Bi,p+=3):(z=s,ce(Xa)),z!==s?(Se=_,T=za(F,U),_=T):(p=_,_=s)):(p=_,_=s)}else p=_,_=s}else p=_,_=s;return _}function dt(){var _,T,F,U,z,K,te,$,Oe,at,rn;return _=p,n.substr(p,2)===Qa?(T=Qa,p+=2):(T=s,ce($d)),T!==s?(F=p,U=Vt(),U!==s?(z=Vt(),z!==s?(K=Vt(),K!==s?(te=Vt(),te!==s?($=Vt(),$!==s?(Oe=Vt(),Oe!==s?(at=Vt(),at!==s?(rn=Vt(),rn!==s?(U=[U,z,K,te,$,Oe,at,rn],F=U):(p=F,F=s)):(p=F,F=s)):(p=F,F=s)):(p=F,F=s)):(p=F,F=s)):(p=F,F=s)):(p=F,F=s)):(p=F,F=s),F!==s?(Se=_,T=Gd(F),_=T):(p=_,_=s)):(p=_,_=s),_===s&&(_=p,n.substr(p,2)===Ya?(T=Ya,p+=2):(T=s,ce(Wd)),T!==s?(F=p,U=Vt(),U!==s?(z=Vt(),z!==s?(K=Vt(),K!==s?(te=Vt(),te!==s?(U=[U,z,K,te],F=U):(p=F,F=s)):(p=F,F=s)):(p=F,F=s)):(p=F,F=s),F!==s?(Se=_,T=Qd(F),_=T):(p=_,_=s)):(p=_,_=s)),_}function _t(){var _,T;return _=p,n.substr(p,2)===Ja?(T=Ja,p+=2):(T=s,ce(Yd)),T!==s&&(Se=_,T=Jd()),_=T,_===s&&(_=p,n.substr(p,2)===Za?(T=Za,p+=2):(T=s,ce(Zd)),T!==s&&(Se=_,T=Kd()),_=T,_===s&&(_=p,n.substr(p,2)===Ka?(T=Ka,p+=2):(T=s,ce(eh)),T!==s&&(Se=_,T=th()),_=T,_===s&&(_=p,n.substr(p,2)===el?(T=el,p+=2):(T=s,ce(rh)),T!==s&&(Se=_,T=nh()),_=T,_===s&&(_=p,n.substr(p,2)===tl?(T=tl,p+=2):(T=s,ce(ih)),T!==s&&(Se=_,T=sh()),_=T,_===s&&(_=p,n.substr(p,2)===rl?(T=rl,p+=2):(T=s,ce(ah)),T!==s&&(Se=_,T=lh()),_=T,_===s&&(_=p,n.substr(p,2)===nl?(T=nl,p+=2):(T=s,ce(uh)),T!==s&&(Se=_,T=oh()),_=T,_===s&&(_=p,n.substr(p,2)===il?(T=il,p+=2):(T=s,ce(fh)),T!==s&&(Se=_,T=ch()),_=T))))))),_}function d_(){var _;return dh.test(n.charAt(p))?(_=n.charAt(p),p++):(_=s,ce(hh)),_}function h_(){var _,T,F,U;if(_=p,n.charCodeAt(p)===91?(T=Be,p++):(T=s,ce(tt)),T!==s){for(F=[],U=Re();U!==s;)F.push(U),U=Re();F!==s?(n.charCodeAt(p)===93?(U=Rt,p++):(U=s,ce(Yt)),U!==s?(Se=_,T=_h(),_=T):(p=_,_=s)):(p=_,_=s)}else p=_,_=s;return _}function _l(){var _,T,F;return _=p,ph.test(n.charAt(p))?(T=n.charAt(p),p++):(T=s,ce(gh)),T!==s?(mh.test(n.charAt(p))?(F=n.charAt(p),p++):(F=s,ce(vh)),F!==s?(Se=_,T=bh(T,F),_=T):(p=_,_=s)):(p=_,_=s),_===s&&(wh.test(n.charAt(p))?(_=n.charAt(p),p++):(_=s,ce(yh))),_}function Ns(){var _;return _=_l(),_===s&&(n.charCodeAt(p)===95?(_=kh,p++):(_=s,ce(Dh))),_}function Ft(){var _;return _=Ns(),_===s&&(n.charCodeAt(p)===45?(_=ms,p++):(_=s,ce(vs)),_===s&&(Tt.test(n.charAt(p))?(_=n.charAt(p),p++):(_=s,ce(St)),_===s&&(n.charCodeAt(p)===183?(_=Eh,p++):(_=s,ce(Ah)),_===s&&(Ch.test(n.charAt(p))?(_=n.charAt(p),p++):(_=s,ce(Nh)),_===s&&(Th.test(n.charAt(p))?(_=n.charAt(p),p++):(_=s,ce(Sh))))))),_}function pl(){var _,T,F,U,z,K,te,$,Oe;if(_=p,T=p,F=_l(),F!==s){for(U=[],z=Ft();z!==s;)U.push(z),z=Ft();if(U!==s){if(z=[],K=p,te=[],n.charCodeAt(p)===46?($=f,p++):($=s,ce(d)),$!==s)for(;$!==s;)te.push($),n.charCodeAt(p)===46?($=f,p++):($=s,ce(d));else te=s;if(te!==s){if($=[],Oe=Ft(),Oe!==s)for(;Oe!==s;)$.push(Oe),Oe=Ft();else $=s;$!==s?(te=[te,$],K=te):(p=K,K=s)}else p=K,K=s;for(;K!==s;){if(z.push(K),K=p,te=[],n.charCodeAt(p)===46?($=f,p++):($=s,ce(d)),$!==s)for(;$!==s;)te.push($),n.charCodeAt(p)===46?($=f,p++):($=s,ce(d));else te=s;if(te!==s){if($=[],Oe=Ft(),Oe!==s)for(;Oe!==s;)$.push(Oe),Oe=Ft();else $=s;$!==s?(te=[te,$],K=te):(p=K,K=s)}else p=K,K=s}z!==s?(F=[F,U,z],T=F):(p=T,T=s)}else p=T,T=s}else p=T,T=s;return T!==s?_=n.substring(_,p):_=T,_}function __(){var _,T,F,U,z,K,te,$;if(_=p,T=Ns(),T===s&&(n.charCodeAt(p)===58?(T=Tr,p++):(T=s,ce(Sr)),T===s&&(Tt.test(n.charAt(p))?(T=n.charAt(p),p++):(T=s,ce(St)),T===s&&(T=tn()))),T!==s){for(F=[],U=Ft(),U===s&&(n.charCodeAt(p)===58?(U=Tr,p++):(U=s,ce(Sr)),U===s&&(U=tn()));U!==s;)F.push(U),U=Ft(),U===s&&(n.charCodeAt(p)===58?(U=Tr,p++):(U=s,ce(Sr)),U===s&&(U=tn()));if(F!==s){if(U=[],z=p,K=[],n.charCodeAt(p)===46?(te=f,p++):(te=s,ce(d)),te!==s)for(;te!==s;)K.push(te),n.charCodeAt(p)===46?(te=f,p++):(te=s,ce(d));else K=s;if(K!==s){if(te=[],$=Ft(),$===s&&(n.charCodeAt(p)===58?($=Tr,p++):($=s,ce(Sr)),$===s&&($=tn())),$!==s)for(;$!==s;)te.push($),$=Ft(),$===s&&(n.charCodeAt(p)===58?($=Tr,p++):($=s,ce(Sr)),$===s&&($=tn()));else te=s;te!==s?(Se=z,K=sl(T,F,K,te),z=K):(p=z,z=s)}else p=z,z=s;for(;z!==s;){if(U.push(z),z=p,K=[],n.charCodeAt(p)===46?(te=f,p++):(te=s,ce(d)),te!==s)for(;te!==s;)K.push(te),n.charCodeAt(p)===46?(te=f,p++):(te=s,ce(d));else K=s;if(K!==s){if(te=[],$=Ft(),$===s&&(n.charCodeAt(p)===58?($=Tr,p++):($=s,ce(Sr)),$===s&&($=tn())),$!==s)for(;$!==s;)te.push($),$=Ft(),$===s&&(n.charCodeAt(p)===58?($=Tr,p++):($=s,ce(Sr)),$===s&&($=tn()));else te=s;te!==s?(Se=z,K=sl(T,F,K,te),z=K):(p=z,z=s)}else p=z,z=s}U!==s?(Se=_,T=Rh(T,F,U),_=T):(p=_,_=s)}else p=_,_=s}else p=_,_=s;return _}function tn(){var _;return _=p_(),_===s&&(_=g_()),_}function p_(){var _,T,F,U,z;return _=p,T=p,n.charCodeAt(p)===37?(F=Fh,p++):(F=s,ce(Ih)),F!==s?(U=Vt(),U!==s?(z=Vt(),z!==s?(F=[F,U,z],T=F):(p=T,T=s)):(p=T,T=s)):(p=T,T=s),T!==s?_=n.substring(_,p):_=T,_}function Vt(){var _;return Oh.test(n.charAt(p))?(_=n.charAt(p),p++):(_=s,ce(Lh)),_}function g_(){var _,T,F;return _=p,n.charCodeAt(p)===92?(T=Bh,p++):(T=s,ce(Ph)),T!==s?(qh.test(n.charAt(p))?(F=n.charAt(p),p++):(F=s,ce(jh)),F!==s?(Se=_,T=c(F),_=T):(p=_,_=s)):(p=_,_=s),_}var m_=new Function("try {return this===window;}catch(e){ return false;}"),gl=m_()?window.URL:H_.URL,ml=function(_){return _.match(/^[a-z](.*?):(.+?)/g)};function v_(_,T){var F={};return F[_]=T,F}var it={base:[],data:{},addBase:function(_){if(it.base.length===0){it.base.push(_);return}const T=it.base[it.base.length-1];T!==_&&it.base.push(new gl(_,T).toString())},addPrefix:function(_,T){const F=it.data[_];F===void 0?it.data[_]=[{uri:T,count:0}]:F[F.length-1].uri!==T&&F.push({uri:T,count:0})},hasPrefix:function(_){return this.data[_]!==void 0},resolve:function(_,T){const F=Object.keys(it.data).find(z=>_.indexOf(z+":")===0);if(F!==void 0){const z=it.data[F];if(z.length===1&&T!==!0&&ml(z[0].uri))return _;const K=z[z.length-1].uri;return _.replace(F+":",K)}else{var U=it.base.length===0?a.baseIRI:it.base[it.base.length-1];return!U||_.match(/^(http:|https:|urn:|file:)/)?_:_.indexOf("//")===0&&U?U.split("//")[0]+_:new gl(_,U).toString()}},increment:function(_){const T=it.data[_];T!==void 0&&T[T.length-1].count++},decrement:function(_){const T=it.data[_];T!==void 0&&T[T.length-1].count--},toJSON:function(){const _={};return it.base.length>0&&(_["@context"]===void 0&&(_["@context"]={}),_["@context"]["@base"]=it.base[0]),Object.keys(it.data).forEach(T=>{const F=it.data[T][0];F.uri==="http://www.w3.org/2001/XMLSchema#"&&F.count<1||ml(F.uri)&&(_["@context"]===void 0&&(_["@context"]={}),_["@context"][T]=F.uri)}),_}};function Ts(_,T){if(_["@list"]===void 0||!T&&!_["@list"].find(z=>z["@list"]!==void 0))return _;if(_["@list"].length===0)return{"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};var F={},U=null;return _["@list"].forEach(z=>{U===null?U=F:(U["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={},U=U["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]),U["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"]=Ts(z,!0),U["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}),F}if(ji=o(),ji!==s&&p===n.length)return ji;throw ji!==s&&p<n.length&&ce(Mh()),xh(bs,hr<n.length?n.charAt(hr):null,hr<n.length?ys(hr,hr+1):ys(hr,hr))}return{SyntaxError:e,parse:t}})})(Gc);var g0=Gc.exports;function m0(i){return new v0(i)}var v0=function(){function i(r){gt(this,i),ke(this,"_notQNameChars",`	\r
 !"#$%&'()*.,+/;<=>?@[\\]^\`{|}~`),ke(this,"_notNameChars",this._notQNameChars+":"),ke(this,"validPrefix",new RegExp(/^[a-zA-Z][a-zA-Z0-9]*$/)),ke(this,"forbidden1",new RegExp(/[\\"\b\f\r\v\t\n\u0080-\uffff]/gm)),ke(this,"forbidden3",new RegExp(/[\\"\b\f\r\v\u0080-\uffff]/gm)),this.flags="",this.base=null,this.prefixes=[],this.namespaces=[];var e=Object.keys(hu());for(var t in e){var n=hu()[e[t]](""),a=e[t];this.prefixes[n]=a,this.namespaces[a]=n}this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.suggestPrefix("xml","reserved:reservedForFutureUse"),this.namespacesUsed=[],this.keywords=["a"],this.prefixchars="abcdefghijklmnopqustuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",this.incoming=null,this.formulas=[],this.store=r,this.rdfFactory=r.rdfFactory||sr,this.xsd=$c(this.rdfFactory)}return pt(i,[{key:"setBase",value:function(e){return this.base=e,this}},{key:"setFlags",value:function(e){return this.flags=e||"",this}},{key:"toStr",value:function(e){var t=e.toNT();return e.termType==="Graph"&&(this.formulas[t]=e),t}},{key:"fromStr",value:function(e){if(e[0]==="{"){var t=this.formulas[e];return t||console.log("No formula object for "+e),t}return this.store.fromNT(e)}},{key:"setNamespaces",value:function(e){for(var t in e)this.setPrefix(t,e[t]);return this}},{key:"setPrefix",value:function(e,t){if(e.slice(0,7)!=="default"&&e.slice(0,2)!=="ns"&&!(!e||!t)){for(var n in this.prefixes)this.prefixes[n]==e&&delete this.prefixes[n];this.prefixes[t]=e,this.namespaces[e]=t}}},{key:"suggestPrefix",value:function(e,t){e.slice(0,7)!=="default"&&e.slice(0,2)!=="ns"&&(!e||!t||e in this.namespaces||t in this.prefixes||(this.prefixes[t]=e,this.namespaces[e]=t))}},{key:"suggestNamespaces",value:function(e){for(var t in e)this.suggestPrefix(t,e[t]);return this}},{key:"checkIntegrity",value:function(){var e,t;for(e in this.namespaces)if(this.prefixes[this.namespaces[e]]!==e)throw new Error("Serializer integity error 1: "+e+", "+this.namespaces[e]+", "+this.prefixes[this.namespaces[e]]+"!");for(t in this.prefixes)if(this.namespaces[this.prefixes[t]]!==t)throw new Error("Serializer integity error 2: "+t+", "+this.prefixs[t]+", "+this.namespaces[this.prefixes[t]]+"!")}},{key:"makeUpPrefix",value:function(e){var t=e;function n(u){return!this.validPrefix.test(u)||u==="ns"||u in this.namespaces?!1:(this.prefixes[e]=u,this.namespaces[u]=e,u)}var a=n.bind(this);"#/".indexOf(t[t.length-1])>=0&&(t=t.slice(0,-1));var s=t.lastIndexOf("/");s>=0&&(t=t.slice(s+1));for(var l=0;l<t.length&&this.prefixchars.indexOf(t[l]);)l++;if(t=t.slice(0,l),t.length<6&&a(t))return t;if(a(t.slice(0,3)))return t.slice(0,3);if(a(t.slice(0,2)))return t.slice(0,2);if(a(t.slice(0,4)))return t.slice(0,4);if(a(t.slice(0,1)))return t.slice(0,1);if(a(t.slice(0,5)))return t.slice(0,5);this.validPrefix.test(t)||(t="n");for(var o=0;;o++)if(a(t.slice(0,3)+o))return t.slice(0,3)+o}},{key:"rootSubjects",value:function(e){for(var t={},n={},a={},s=0;s<e.length;s++){var l=e[s],o=function(b){t.hasOwnProperty(b)||(t[b]=[]),t[b].push(l.subject)},u=[l.subject,l.predicate,l.object];u.map(function(y){y.termType==="BlankNode"?a[y.toNT()]=!0:y.termType==="Collection"&&y.elements.forEach(function(b){o(b)})}),o(e[s].object);var f=n[this.toStr(l.subject)];f||(f=[]),f.push(l),n[this.toStr(l.subject)]=f}var d=[];for(var c in n)if(n.hasOwnProperty(c)){var h=this.fromStr(c);if(h.termType!=="BlankNode"||!t[h]||t[h].length!==1){d.push(h);continue}}this.incoming=t;for(var g={},N=0;N<d.length;N++)g[d[N].toNT()]=!0;return{roots:d,subjects:n,rootsHash:g,incoming:t}}},{key:"toN3",value:function(e){return this.statementsToN3(e.statements)}},{key:"explicitURI",value:function(e){return this.flags.indexOf("r")<0&&this.base?e=Ss(this.base,e):this.flags.indexOf("u")>=0?e=w0(e):e=b0(decodeURI(e)),"<"+e+">"}},{key:"statementsToNTriples",value:function(e){var t=e.slice();t.sort();for(var n="",a="http://www.w3.org/1999/02/22-rdf-syntax-ns#",s=this,l=this.store,o=this.rdfFactory,u=function h(g){if(g.termType!=="Collection")return s.atomicTermToN3(g);for(var N=g.elements,y=l.sym(a+"nill"),b=N.length-1;b>=0;b--){var S=o.blankNode();n+=h(S)+" "+h(l.sym(a+"first"))+" "+h(N[b])+`.
`,n+=h(S)+" "+h(l.sym(a+"rest"))+" "+h(y)+`.
`,y=S}return s.atomicTermToN3(y)},f=0;f<t.length;f++){var d=t[f],c="";c+=u(d.subject)+" ",c+=u(d.predicate)+" ",c+=u(d.object)+" ",this.flags.indexOf("q")>=0&&(c+=u(d.why)+" "),c+=`.
`,n+=c}return n}},{key:"statementsToN3",value:function(e){var t=4,n=80,a=this.store,s={"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":"aaa:00"},l=function(I,L){return d0(I,L,a,s)};e.sort(l),this.base&&!this.defaultNamespace&&(this.defaultNamespace=this.base+"#");var o={};this.flags.indexOf("s")<0&&(o["http://www.w3.org/2002/07/owl#sameAs"]="="),this.flags.indexOf("t")<0&&(o["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"]="a"),this.flags.indexOf("i")<0&&(o["http://www.w3.org/2000/10/swap/log#implies"]="=>");var u=function(I){for(var L="",k=0;k<I;k++)L+=" ";return L},f=function B(I){for(var L="",k=0;k<I.length;k++){var j=I[k],O=typeof j=="string"?j:B(j);if(k!==0){var R=L.slice(-1)||" ";O===","||O===";"||O==="."&&!"0123456789.:".includes(R)||(L+=" ")}L+=O}return L},d=function B(I,L){var k="",j=1e5;L===void 0&&(L=-1);for(var O=0;O<I.length;O++){var R=I[O];if(typeof R!="string"){var G=B(R,L+1);if(G.length<10*(n-t*L)&&G.indexOf('"""')<0){var Q=f(R);Q.length<n-t*L&&(R=Q,G="")}G&&(j=1e4),k+=G}if(typeof R=="string"){if(R.length===1&&k.slice(-1)===`
`&&",.;".indexOf(R)>=0){k=k.slice(0,-1),R=="."&&"0123456789.:".includes(k.charAt(k.length-1))&&(k+=" ",j+=1),k+=R+`
`,j+=1;continue}if(j<t*L+4||j+R.length+1<n&&";.".indexOf(k[k.length-2])<0)k=k.slice(0,-1)+" "+R+`
`,j+=R.length+1;else{var oe=u(t*L)+R;k+=oe+`
`,j=oe.length,L<0&&(k+=`
`,j=1e5)}}}return k};function c(B){for(var I=this.rootSubjects(B),L=I.roots,k=[],j=0;j<L.length;j++){var O=L[j];k.push(g(O,I))}return k}var h=c.bind(this);function g(B,I){return B.termType==="BlankNode"&&!I.incoming[B]?S(B,I,!0).concat(["."]):[A(B,I)].concat([y(B,I)]).concat(["."])}function N(B,I){var L=[],k=null,j=I.subjects[this.toStr(B)]||[];if(typeof j>"u")throw new Error("Cant find statements for "+B);for(var O=[],R=0;R<j.length;R++){var G=j[R];G.predicate.uri===k?O.push(","):(k&&(L=L.concat([O]).concat([";"]),O=[]),L.push(o[G.predicate.uri]?o[G.predicate.uri]:A(G.predicate,I))),k=G.predicate.uri,O.push(S(G.object,I))}return L=L.concat([O]),L}var y=N.bind(this);function b(B,I,L){return B.termType==="BlankNode"&&(L||I.rootsHash[B.toNT()]===void 0)?I.subjects[this.toStr(B)]?["[",y(B,I),"]"]:"[]":A(B,I)}var S=b.bind(this);function D(B,I){var L,k;switch(B.termType){case"Graph":return k=["{"],k=k.concat(h(B.statements)),k.concat(["}"]);case"Collection":for(k=["("],L=0;L<B.elements.length;L++)k.push([S(B.elements[L],I)]);return k.push(")"),k;default:return this.atomicTermToN3(B)}}i.prototype.termToN3=A;var A=D.bind(this);function v(){var B="";this.flags.indexOf("d")<0&&this.defaultNamespace&&(B+="@prefix : "+this.explicitURI(this.defaultNamespace)+`.
`);for(var I in this.prefixes)this.prefixes.hasOwnProperty(I)&&this.namespacesUsed[I]&&(B+="@prefix "+this.prefixes[I]+": "+this.explicitURI(I)+`.
`);return B+`
`}var E=v.bind(this),w=h(e);return E()+d(w)}},{key:"atomicTermToN3",value:function(e,t){switch(e.termType){case"BlankNode":case"Variable":return e.toNT();case"Literal":var n=e.value;if(typeof n!="string")throw new TypeError("Value of RDF literal node must be a string");if(e.datatype&&this.flags.indexOf("x")<0)switch(e.datatype.uri){case"http://www.w3.org/2001/XMLSchema#integer":return n;case"http://www.w3.org/2001/XMLSchema#decimal":return n.indexOf(".")<0&&(n+=".0"),n;case"http://www.w3.org/2001/XMLSchema#double":{var a=n.toLowerCase().indexOf("e")>0;return n.indexOf(".")<0&&!a&&(n+=".0"),a||(n+="e0"),n}case"http://www.w3.org/2001/XMLSchema#boolean":return e.value==="1"?"true":"false"}var s=this.stringToN3(e.value);return e.language?s+="@"+e.language:e.datatype.equals(this.xsd.string)||(s+="^^"+this.atomicTermToN3(e.datatype,t)),s;case"NamedNode":return this.symbolToN3(e);case"DefaultGraph":return"";default:throw new Error("Internal: atomicTermToN3 cannot handle "+e+" of termType: "+e.termType)}}},{key:"stringToN3",value:function(e,t){t||(t="e");var n="",a,s,l,o,u;for(e.length>20&&e.slice(-1)!=='"'&&t.indexOf("n")<0&&(e.indexOf(`
`)>0||e.indexOf('"')>0)?(o='"""',u=this.forbidden3):(o='"',u=this.forbidden1),a=0;a<e.length;){u.lastIndex=0;var f=u.exec(e.slice(a));if(f==null)break;s=a+u.lastIndex-1,n+=e.slice(a,s);var d=e[s];d==='"'&&o==='"""'&&e.slice(s,s+3)!=='"""'?n+=d:(l=`\b\f\r	\v
\\"`.indexOf(d),l>=0?n+="\\"+'bfrtvn\\"'[l]:t.indexOf("e")>=0?n+="\\u"+("000"+d.charCodeAt(0).toString(16).toLowerCase()).slice(-4):n+=d),a=s+1}return o+n+e.slice(a)+o}},{key:"symbolToN3",value:function(e){var t=e.uri,n=t.indexOf("#");if(n<0&&this.flags.indexOf("/")<0&&(n=t.lastIndexOf("/")),n>=0&&this.flags.indexOf("p")<0&&(t.indexOf("http")===0||t.indexOf("ws")===0||t.indexOf("file")===0)){for(var a=!0,s=n+1;s<t.length;s++)if(this._notNameChars.indexOf(t[s])>=0){a=!1;break}if(a){var l=t.slice(n+1),o=t.slice(0,n+1);if(this.defaultNamespace&&this.defaultNamespace===o&&this.flags.indexOf("d")<0)return this.flags.indexOf("k")>=0&&this.keyords.indexOf(l)<0?l:":"+l;var u=this.prefixes[o];if(u||(u=this.makeUpPrefix(o)),u)return this.namespacesUsed[o]=!0,u+":"+l}}return this.explicitURI(t)}},{key:"writeStore",value:function(e){var t=this.store,n=t.fetcher,a=n&&n.appNode,s=this.store.index[3];for(var l in s){var o=t.fromNT(l);a&&o.equals(a)||e(`
`+this.atomicTermToN3(o)+" "+this.atomicTermToN3(t.sym("http://www.w3.org/2000/10/swap/log#semantics"))+" { "+this.statementsToN3(t.statementsMatching(void 0,void 0,void 0,o))+` }.
`)}t.statementsMatching(void 0,t.sym("http://www.w3.org/2007/ont/link#requestedURI")).map(function(d){e(`
<`+d.object.value+`> log:metadata {
`);var c=t.statementsMatching(void 0,void 0,void 0,d.subject);e(this.statementsToN3(this.statementsToN3(c))),e(`}.
`)});var u=[];a&&u.push(a);var f=[];u.map(function(d){f=f.concat(t.statementsMatching(void 0,void 0,void 0,d))}),e(this.statementsToN3(f))}},{key:"statementsToXML",value:function(e){var t=4,n=80,a=[];a["http://www.w3.org/1999/02/22-rdf-syntax-ns#"]=!0;var s="http://www.w3.org/1999/02/22-rdf-syntax-ns#_",l=function(j){for(var O="",R=0;R<j;R++)O+=" ";return O},o=function k(j){for(var O="",R=0;R<j.length;R++){var G=j[R],Q=typeof G=="string"?G:k(G);O+=Q}return O},u=function k(j,O){var R="",G,Q=1e5;O||(O=0);for(var oe=0;oe<j.length;oe++){var ee=j[oe];if(typeof ee!="string"){var X=k(ee,O+1);X.length<10*(n-t*O)&&X.indexOf('"""')<0&&(G=o(ee),G.length<n-t*O&&(ee="   "+G,X="")),X&&(Q=1e4),R+=X}typeof ee=="string"&&(Q<t*O+4?(R=R.slice(0,-1)+" "+ee+`
`,Q+=ee.length+1):(G=l(t*O)+ee,R+=G+`
`,Q=G.length))}return R};function f(k){this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#");for(var j=this.rootSubjects(k),O=j.roots,R=[],G=0;G<O.length;G++){var Q=O[G];R.push(y(Q,j))}return R}var d=f.bind(this);function c(k){return typeof k>"u"?"@@@undefined@@@@":k.replace(/[&<"]/g,function(j){switch(j[0]){case"&":return"&amp;";case"<":return"&lt;";case'"':return"&quot;"}})}function h(k){return c(this.base?Ss(this.base,k.uri):k.uri)}var g=h.bind(this);function N(k,j){var O=[],R,G,Q,oe,ee=j.subjects[this.toStr(k)];if(typeof ee>"u")return D(k,j);ee.sort(function(J,Fe){var Le=J.predicate.uri,de=Fe.predicate.uri;if(Le.substring(0,s.length)===s||de.substring(0,s.length)===s)return Le.localeCompare(de);var _e=Le.substring(s.length),ue=de.substring(s.length),Ee=parseInt(_e,10),Xe=parseInt(ue,10);return isNaN(Ee)||isNaN(Xe)||Ee!==_e||Xe!==ue?Le.localeCompare(de):Ee-Xe});for(var X=0;X<ee.length;X++){if(Q=ee[X],Q.predicate.uri==="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"&&!R&&Q.object.termType==="NamedNode"){R=Q.object;continue}if(oe=Q.predicate,oe.uri.substr(0,s.length)===s){var H=oe.uri.substr(s.length),V=parseInt(H,10);H===V.toString()&&(oe=this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#li"))}switch(G=v(oe),Q.object.termType){case"BlankNode":j.incoming[Q.object].length===1?O=O.concat(["<"+G+' rdf:parseType="Resource">',y(Q.object,j),"</"+G+">"]):O=O.concat(["<"+G+' rdf:nodeID="'+Q.object.toNT().slice(2)+'"/>']);break;case"NamedNode":O=O.concat(["<"+G+' rdf:resource="'+g(Q.object)+'"/>']);break;case"Literal":O=O.concat(["<"+G+(Q.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+c(Q.object.datatype.uri)+'"')+(Q.object.language?' xml:lang="'+Q.object.language+'"':"")+">"+c(Q.object.value)+"</"+G+">"]);break;case"Collection":O=O.concat(["<"+G+' rdf:parseType="Collection">',b(Q.object,j),"</"+G+">"]);break;default:throw new Error("Can't serialize object of type "+Q.object.termType+" into XML")}}var W=R?v(R):"rdf:Description",M="";return k.termType==="BlankNode"?(!j.incoming[k]||j.incoming[k].length!==1)&&(M=' rdf:nodeID="'+k.toNT().slice(2)+'"'):M=' rdf:about="'+g(k)+'"',["<"+W+M+">"].concat([O]).concat(["</"+W+">"])}var y=N.bind(this);function b(k,j){for(var O=[],R=0;R<k.elements.length;R++)O.push(y(k.elements[R],j));return O}function S(k,j){var O=[],R=j.subjects[this.toStr(k)];if(!R)return O;R.sort();for(var G=0;G<R.length;G++){var Q=R[G];switch(Q.object.termType){case"BlankNode":j.rootsHash[Q.object.toNT()]?O=O.concat(["<"+v(Q.predicate)+' rdf:nodeID="'+Q.object.toNT().slice(2)+'">',"</"+v(Q.predicate)+">"]):O=O.concat(["<"+v(Q.predicate)+' rdf:parseType="Resource">',D(Q.object,j),"</"+v(Q.predicate)+">"]);break;case"NamedNode":O=O.concat(["<"+v(Q.predicate)+' rdf:resource="'+g(Q.object)+'"/>']);break;case"Literal":O=O.concat(["<"+v(Q.predicate)+(Q.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+c(Q.object.datatype.value)+'"')+(Q.object.language?' xml:lang="'+Q.object.language+'"':"")+">"+c(Q.object.value)+"</"+v(Q.predicate)+">"]);break;case"Collection":O=O.concat(["<"+v(Q.predicate)+' rdf:parseType="Collection">',b(Q.object,j),"</"+v(Q.predicate)+">"]);break;default:throw new Error("Can't serialize object of type "+Q.object.termType+" into XML")}}return O}var D=S.bind(this);function A(k){var j=k.uri,O=j.indexOf("#");if(O<0&&this.flags.indexOf("/")<0&&(O=j.lastIndexOf("/")),O<0)throw new Error("Cannot make qname out of <"+j+">");for(var R=O+1;R<j.length;R++)if(this._notNameChars.indexOf(j[R])>=0)throw new Error('Invalid character "'+j[R]+'" cannot be in XML qname for URI: '+j);var G=j.slice(O+1),Q=j.slice(0,O+1);if(this.defaultNamespace&&this.defaultNamespace===Q&&this.flags.indexOf("d")<0)return G;var oe=this.prefixes[Q];return oe||(oe=this.makeUpPrefix(Q)),a[Q]=!0,oe+":"+G}var v=A.bind(this),E=d(e),w="<rdf:RDF";this.defaultNamespace&&(w+=' xmlns="'+c(this.defaultNamespace)+'"');for(var B in a)if(a.hasOwnProperty(B)){var I=this.base&&this.flags.includes("z")?Ss(this.base,B):B;w+=`
 xmlns:`+this.prefixes[B]+'="'+c(I)+'"'}w+=">";var L=[w,E,"</rdf:RDF>"];return u(L,-1)}},{key:"statementsToJsonld",value:function(e){var t=this.statementsToN3(e),n=g0.parse(t);return JSON.stringify(n,null,2)}}])}();function b0(i){return encodeURI(i)}function w0(i){for(var r="",e,t=0;t<i.length;t++)e=i.charCodeAt(t),e>65535?r+="\\U"+("00000000"+e.toString(16)).slice(-8):e>126?r+="\\u"+("0000"+e.toString(16)).slice(-4):r+=i[t];return r}function di(i,r,e,t,n,a){e=e||(i==null?void 0:i.value);var s=a||{};t=t||un;var l=void 0;try{var o=m0(r);s.flags&&o.setFlags(s.flags);var u=r.statementsMatching(void 0,void 0,void 0,i);switch("namespaces"in r&&o.suggestNamespaces(r.namespaces),s.namespaces&&o.setNamespaces(s.namespaces),o.setBase(e),t){case li:return l=o.statementsToXML(u),f(null,l);case ic:case _p:return l=o.statementsToN3(u),f(null,l);case un:case vp:return o.setFlags("si"),l=o.statementsToN3(u),f(null,l);case pp:return o.setFlags("deinprstux"),l=o.statementsToNTriples(u),f(null,l);case Ws:return o.setFlags("si dr"),l=o.statementsToJsonld(u),f(null,l);case Ys:case Qs:return o.setFlags("deinprstux q"),l=o.statementsToNTriples(u),f(null,l);default:throw new Error("Serialize: Content-type "+t+" not supported for data write.")}}catch(d){if(n)return n(d,void 0);throw d}function f(d,c){if(n){n(d,c);return}else return c}}var y0=["blankNode","defaultGraph","literal","namedNode","quad","variable","supports"],Hi={first:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",rest:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",nil:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};function Wc(i,r,e){var t=[];return e.reduce(function(n,a,s,l){t.push(i.quad(n,i.namedNode(Hi.first),l[s]));var o;return s<l.length-1?(o=i.blankNode(),t.push(i.quad(n,i.namedNode(Hi.rest),o))):t.push(i.quad(n,i.namedNode(Hi.rest),i.namedNode(Hi.nil))),o},r),t}function tr(i,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=i.length;for(e<0&&(e=t+e);e<t;e++)if(i[e]===r)return e;return-1}function k0(i,r){var e=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=D0(i))||r){e&&(i=e);var t=0,n=function(){};return{s:n,n:function(){return t>=i.length?{done:!0}:{done:!1,value:i[t++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,s=!1,l;return{s:function(){e=e.call(i)},n:function(){var u=e.next();return a=u.done,u},e:function(u){s=!0,l=u},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}}}function D0(i,r){if(i){if(typeof i=="string")return _u(i,r);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _u(i,r)}}function _u(i,r){(r==null||r>i.length)&&(r=i.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=i[e];return t}function E0(i,r,e){return r=Nt(r),jr(i,Qc()?Reflect.construct(r,e||[],Nt(i).constructor):r.apply(i,e))}function Qc(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qc=function(){return!!i})()}var Yc=function(i){function r(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};gt(this,r),e=E0(this,r,[""]),e.statements=t,e.constraints=n,e.initBindings=a,e.optional=s,ke(e,"termType",_i),ke(e,"classOrder",vr.Graph),ke(e,"fetcher",void 0),ke(e,"isVar",0),ke(e,"ns",Ut),ke(e,"rdfFactory",void 0),e.rdfFactory=l&&l.rdfFactory||sr;var o=k0(y0),u;try{var f=function(){var c=u.value;e[c]=function(){var h;return(h=e.rdfFactory)[c].apply(h,arguments)}};for(o.s();!(u=o.n()).done;)f()}catch(d){o.e(d)}finally{o.f()}return e}return xt(r,i),pt(r,[{key:"add",value:function(t,n,a,s){var l=this;return arguments.length===1&&t.forEach(function(o){return l.add(o.subject,o.predicate,o.object,o.graph)}),this.statements.push(this.rdfFactory.quad(t,n,a,s))}},{key:"addStatement",value:function(t){return this.add(t)}},{key:"bnode",value:function(t){return this.rdfFactory.blankNode(t)}},{key:"addAll",value:function(t){var n=this;t.forEach(function(a){n.add(a.subject,a.predicate,a.object,a.graph)})}},{key:"any",value:function(t,n,a,s){var l=this.anyStatementMatching(t,n,a,s);return l==null?null:t==null?l.subject:n==null?l.predicate:a==null?l.object:null}},{key:"anyValue",value:function(t,n,a,s){var l=this.any(t,n,a,s);return l?l.value:void 0}},{key:"anyJS",value:function(t,n,a,s){var l=this.any(t,n,a,s);return l?ht.toJS(l):void 0}},{key:"anyStatementMatching",value:function(t,n,a,s){var l=this.statementsMatching(t,n,a,s,!0);if(!(!l||l.length===0))return l[0]}},{key:"id",value:function(t){return this.rdfFactory.id(t)}},{key:"statementsMatching",value:function(t,n,a,s,l){var o=this.statements.filter(function(u){return(!t||t.equals(u.subject))&&(!n||n.equals(u.predicate))&&(!a||a.equals(u.object))&&(!s||s.equals(u.graph))});return l?o.length===0?[]:[o[0]]:o}},{key:"bottomTypeURIs",value:function(t){var n,a,s,l,o,u,f,d;n=[];for(var c in t)if(t.hasOwnProperty(c)){for(d=t[c],f=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),this.rdfFactory.namedNode(c)),a=!0,l=0,o=f.length;l<o;l++)if(s=f[l],u=s.uri,u in t){a=!1;break}a&&(n[c]=d)}return n}},{key:"collection",value:function(){return new Hr}},{key:"each",value:function(t,n,a,s){var l=[],o=this.statementsMatching(t,n,a,s,!1);if(t==null)for(var u=0,f=o.length;u<f;u++)l.push(o[u].subject);else if(n==null)for(var d=0,c=o.length;d<c;d++)l.push(o[d].predicate);else if(a==null)for(var h=0,g=o.length;h<g;h++)l.push(o[h].object);else if(s==null)for(var N=0,y=o.length;N<y;N++)l.push(new Pt(o[N].graph.value));return l}},{key:"equals",value:function(t){return t?this.hashString()===t.hashString():!1}},{key:"findMembersNT",value:function(t){var n,a,s,l,o,u,f,d,c,h,g,N,y,b;N={},N[t.toNT()]=!0,l={},u=this.transitiveClosure(N,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0);for(var S in u)if(u.hasOwnProperty(S)){f=this.statementsMatching(void 0,this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.fromNT(S));for(var D=0,A=f.length;D<A;D++)y=f[D],l[y.subject.toNT()]=y;d=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"),this.fromNT(S));for(var v=0,E=d.length;v<E;v++)for(o=d[v],c=this.statementsMatching(void 0,o),s=0,n=c.length;s<n;s++)y=c[s],l[y.subject.toNT()]=y;h=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"),this.fromNT(S));for(var w=0,B=h.length;w<B;w++)for(o=h[w],g=this.statementsMatching(void 0,o),b=0,a=g.length;b<a;b++)y=g[b],l[y.object.toNT()]=y}return l}},{key:"findMemberURIs",value:function(t){return this.NTtoURI(this.findMembersNT(t))}},{key:"findSubClassesNT",value:function(t){var n={};return n[t.toNT()]=!0,this.transitiveClosure(n,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0)}},{key:"findSuperClassesNT",value:function(t){var n={};return n[t.toNT()]=!0,this.transitiveClosure(n,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}},{key:"findTypesNT",value:function(t){var n,a,s,l,o,u,f,d,c;s="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",c=[],l=this.statementsMatching(t,void 0,void 0);for(var h=0,g=l.length;h<g;h++)if(d=l[h],d.predicate.uri===s)c[d.object.toNT()]=d;else{o=this.each(d.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"));for(var N=0,y=o.length;N<y;N++)a=o[N],c[a.toNT()]=d}u=this.statementsMatching(void 0,void 0,t);for(var b=0,S=u.length;b<S;b++){d=u[b],f=this.each(d.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"));for(var D=0,A=f.length;D<A;D++)n=f[D],c[n.toNT()]=d}return this.transitiveClosure(c,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}},{key:"findTypeURIs",value:function(t){return this.NTtoURI(this.findTypesNT(t))}},{key:"connectedStatements",value:function(t,n,a){a=a||[];for(var s=[t],l={},o={},u=[],f=this,d=function(h){var g=function(b){b.termType==="BlankNode"&&!l[b.value]&&(l[b.value]=!0,s.push(b))},N=f.statementsMatching(null,null,h,n).concat(f.statementsMatching(h,null,null,n));N=N.filter(function(y){if(a[y.predicate.value])return!1;var b=y.toNT();return o[b]?!1:(o[b]=!0,!0)}),N.forEach(function(y){g(y.subject),g(y.object)}),u=u.concat(N)};s.length;)d(s.shift());return u}},{key:"formula",value:function(t){return new r}},{key:"fromNT",value:function(t){var n,a,s;switch(t[0]){case"<":return this.sym(t.slice(1,-1));case'"':if(s=void 0,n=void 0,a=t.lastIndexOf('"'),a<t.length-1)if(t[a+1]==="@")s=t.slice(a+2);else if(t.slice(a+1,a+3)==="^^")n=this.fromNT(t.slice(a+3));else throw new Error("Can't convert string from NT: "+t);return t=t.slice(1,a),t=t.replace(/\\"/g,'"'),t=t.replace(/\\n/g,`
`),t=t.replace(/\\\\/g,"\\"),this.rdfFactory.literal(t,s||n);case"_":return this.rdfFactory.blankNode(t.slice(2));case"?":return new hn(t.slice(1))}throw new Error("Can't convert from NT: "+t)}},{key:"holds",value:function(t,n,a,s){var l;if(arguments.length===1){if(!t)return!0;if(t instanceof Array){for(l=0;l<t.length;l++)if(!this.holds(t[l]))return!1;return!0}else{if(wp(t))return this.holds(t.subject,t.predicate,t.object,t.graph);if(t.statements)return this.holds(t.statements)}}var o=this.anyStatementMatching(t,n,a,s);return o!=null}},{key:"holdsStatement",value:function(t){return this.holds(t.subject,t.predicate,t.object,t.graph)}},{key:"list",value:function(t,n){if(n.rdfFactory.supports.COLLECTIONS){var a=n.rdfFactory.collection();return t.forEach(function(o){a.append(o)}),a}else{var s=n.rdfFactory.blankNode(),l=Wc(n.rdfFactory,s,t);return n.addAll(l),s}}},{key:"NTtoURI",value:function(t){var n,a,s={};for(n in t)t.hasOwnProperty(n)&&(a=t[n],n[0]==="<"&&(s[n.slice(1,-1)]=a));return s}},{key:"serialize",value:function(t,n,a,s){return di(a,this,t,n,void 0,s)}},{key:"substitute",value:function(t){var n=this.statements.map(function(s){return s.substitute(t)}),a=new r;return a.addAll(n),a}},{key:"sym",value:function(t,n){if(n)throw new Error("This feature (kb.sym with 2 args) is removed. Do not assume prefix mappings.");return this.rdfFactory.namedNode(t)}},{key:"the",value:function(t,n,a,s){var l=this.any(t,n,a,s);return l}},{key:"transitiveClosure",value:function(t,n,a){var s,l,o,u,f,d,c={};Object.assign(c,t);for(var h={};;){if(d=function(){for(var g in c)if(c.hasOwnProperty(g))return g}(),d==null)return h;for(f=a?this.each(void 0,n,this.fromNT(d)):this.each(this.fromNT(d),n),l=0,o=f.length;l<o;l++)s=f[l],u=s.toNT(),!(u in h)&&(u in c||(c[u]=c[d]));h[d]=c[d],delete c[d]}}},{key:"topTypeURIs",value:function(t){var n,a,s,l,o,u,f,d;f=[];for(s in t)if(t.hasOwnProperty(s)){for(d=t[s],o=0,u=this.each(this.rdfFactory.namedNode(s),this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf")),n=0,l=u.length;n<l;n++)if(a=u[n],a.uri!=="http://www.w3.org/2000/01/rdf-schema#Resource"){o++;break}o||(f[s]=d)}return f["http://www.w3.org/2000/01/rdf-schema#Resource"]&&delete f["http://www.w3.org/2000/01/rdf-schema#Resource"],f["http://www.w3.org/2002/07/owl#Thing"]&&delete f["http://www.w3.org/2002/07/owl#Thing"],f}},{key:"toString",value:function(){return"{"+this.statements.join(`
`)+"}"}},{key:"variable",value:function(t){return new hn(t)}},{key:"whether",value:function(t,n,a,s){return this.statementsMatching(t,n,a,s,!1).length}}])}(ht);ht.fromValue=fc;var En={xsd:Ut("http://www.w3.org/2001/XMLSchema#")};ht.toJS=function(i){return ca(i)?i.elements.map(ht.toJS):ac(i)?i.datatype.equals(En.xsd("boolean"))?i.value==="1"||i.value==="true":i.datatype.equals(En.xsd("dateTime"))||i.datatype.equals(En.xsd("date"))?new Date(i.value):i.datatype.equals(En.xsd("integer"))||i.datatype.equals(En.xsd("float"))||i.datatype.equals(En.xsd("decimal"))?Number(i.value):i.value:i};var A0=pt(function i(r,e){gt(this,i),this.pat=new bi,this.vars=[],this.name=r,this.id=e});function pu(i,r,e,t){function n(v){var E="",w;for(w in v)v.hasOwnProperty(w)&&(E+="    "+w+" -> "+v[w]);return E}function a(v){var E="Bindings: ",w,B=v.length;for(w=0;w<B;w++)E+=n(v[w][0])+`;
	`;return E}function s(v,E,w,B){var I=w[v];if(I===void 0){if(v.isVar){var L=[];return L[v]=E,[[L,null]]}I=v}if(!I.complexType)return B.redirections[I]&&(I=B.redirections[I]),B.redirections[E]&&(E=B.redirections[E]),I.equals(E)||I.uri&&I.uri===ui?[[[],null]]:[];if(v instanceof Array)return E instanceof Array?l(v,E,w):[];throw new Error("query.js: oops - code not written yet")}function l(v,E,w,B){var I;if(v.length!==E.length)return[];if(!v.length)return[[[],null]];var L=s(v[0],E[0],w,B);if(L.length===0)return L;var k=[],j,O=L.length,R,G,Q,oe,ee,X;for(j=0;j<O;j++){R=L[j][0],X=[];for(oe in R)R.hasOwnProperty(oe)&&(X[oe]=R[oe]);for(oe in w)w.hasOwnProperty(oe)&&(X[oe]=w[oe]);for(I=l(v.slice(1),E.slice(1),X,B),Q=I.length,G=0;G<Q;G++){ee=I[G][0];for(oe in R)R.hasOwnProperty(oe)&&(ee[oe]=R[oe]);k.push([ee,null])}}return k}function o(v,E){var w=E[v];return w===void 0?v:w}function u(v,E){var w={},B;for(B in v)v.hasOwnProperty(B)&&(w[B]=v[B]);for(B in E)E.hasOwnProperty(B)&&(w[B]=E[B]);return w}function f(v,E){return this.trunkBindings=E,this.originalCallback=v,this.branches=[],this}f.prototype.checkAllDone=function(){var v;for(v=0;v<this.branches.length;v++)if(!this.branches[v].done)return;this.doCallBacks(this.branches.length-1,this.trunkBindings)},f.prototype.doCallBacks=function(v,E){var w;if(v<0)return this.originalCallback(E);for(w=0;w<this.branches[v].results.length;w++)this.doCallBacks(v-1,u(E,this.branches[v].results[w]))};function d(v,E){return this.count=0,this.success=!1,this.done=!1,this.callback=v,this.onDone=E,this}d.prototype.reportMatch=function(v){this.callback(v),this.success=!0},d.prototype.reportDone=function(){this.done=!0,this.onDone!==void 0&&this.onDone()};var c=function(E){return this.count=0,this.done=!1,this.results=[],this.junction=E,E.branches.push(this),this};c.prototype.reportMatch=function(v){this.results.push(v)},c.prototype.reportDone=function(){_r.debug("Optional branch finished - results.length = "+this.results.length),this.results.length===0&&this.results.push({}),this.done=!0,this.junction.checkAllDone()};function h(v,E,w){var B,I,L,k;for(E.nvars=0,E.index=null,B=[E.subject,E.predicate,E.object,E.why],k=[v.subjectIndex,v.predicateIndex,v.objectIndex,v.whyIndex],L=0;L<4;L++){var j=B[L];if(!(j.uri&&j.uri===ui))if(j.isVar&&w[j]===void 0)E.nvars++;else{if(j=o(B[L],w),v.redirections[v.id(j)]&&(j=v.redirections[v.id(j)]),I=k[L][v.id(j)],!I)return E.index=[],!1;(E.index===null||E.index.length>I.length)&&(E.index=I)}}return E.index===null&&(E.index=v.statements),!0}function g(v,E){return v.nvars!==E.nvars?v.nvars-E.nvars:v.index.length-E.index.length}var N=0,y=function v(E,w,B,I,L,k,j){_r.debug("Match begins, Branch count now: "+j.count+" for "+j.pattern_debug);var O=w.statements;if(O.length===0){if(_r.debug("FOUND MATCH WITH BINDINGS:"+n(B)),w.optional.length===0)j.reportMatch(B);else{_r.debug("OPTIONAL: "+w.optional);var R=new f(r,B),G=[],Q;for(Q=0;Q<w.optional.length;Q++)G[Q]=new c(R),G[Q].pattern_debug=w.optional[Q];for(Q=0;Q<w.optional.length;Q++)G[Q].count=G[Q].count+1,v(E,w.optional[Q],B,"",L,r,G[Q])}j.count--,_r.debug("Match ends -- success , Branch count now: "+j.count+" for "+j.pattern_debug);return}var oe,ee,X=O.length;if(L){var H="match"+N++,V=function(M,J){var Fe=M.uri.split("#")[0];L.nowOrWhenFetched(Fe,void 0,function(Le,de,_e){Le||console.log("Error following link to <"+M.uri+"> in query: "+de),v(E,w,B,I,L,k,j)})};for(ee=0;ee<X;ee++){if(oe=O[ee],B[oe.subject]!==void 0&&B[oe.subject].uri&&L&&L.getState(Tn(B[oe.subject].uri))==="unrequested"){V(B[oe.subject],H);return}if(B[oe.object]!==void 0&&B[oe.object].uri&&L&&L.getState(Tn(B[oe.object].uri))==="unrequested"){V(B[oe.object],H);return}}}S(E,w,B,I,L,k,j)},b=function(E,w){var B=!0,I,L;for(I in E)E.hasOwnProperty(I)&&w[I]&&(L=w[I].test,L&&!L(E[I])&&(B=!1));return B},S=function(E,w,B,I,L,k,j){var O=w.statements,R=O.length,G,Q,oe,ee,X,H,V;for(G=0;G<R;G++)V=O[G],h(E,V,B);O.sort(g),V=O[0];var W=E.formula();W.optional=w.optional,W.constraints=w.constraints,W.statements=O.slice(1),_r.debug(I+"match2 searching "+V.index.length+" for "+V+"; bindings so far="+n(B));var M,J=V.index.length,Fe,Le;for(M=0;M<J;M++)for(Le=V.index[M],Fe=l([V.subject,V.predicate,V.object,V.why],[Le.subject,Le.predicate,Le.object,Le.why],B,E),_r.info(I+" From first: "+Fe.length+": "+a(Fe)),oe=Fe.length,Q=0;Q<oe;Q++)if(X=[],H=Fe[Q][0],!b(H,w.constraints))_r.debug("Branch count CS: "+j.count);else{for(ee in H)H.hasOwnProperty(ee)&&(X[ee]=H[ee]);for(ee in B)B.hasOwnProperty(ee)&&(X[ee]=B[ee]);j.count++,y(E,W,X,I+"  ",L,k,j)}j.count--,_r.debug("Match2 ends, Branch count: "+j.count+" for "+j.pattern_debug),j.count===0&&j.reportDone()},D=this;_r.debug("Query on "+this.statements.length);var A=new d(r,t);A.count++,i.sync?y(D,i.pat,i.pat.initBindings,"",e,r,A):setTimeout(function(){y(D,i.pat,i.pat.initBindings,"",e,r,A)},0)}function gu(i,r){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(i);r&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),e.push.apply(e,t)}return e}function Zn(i){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?gu(Object(e),!0).forEach(function(t){ke(i,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):gu(Object(e)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(e,t))})}return i}function C0(i,r){var e=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=N0(i))||r){e&&(i=e);var t=0,n=function(){};return{s:n,n:function(){return t>=i.length?{done:!0}:{done:!1,value:i[t++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,s=!1,l;return{s:function(){e=e.call(i)},n:function(){var u=e.next();return a=u.done,u},e:function(u){s=!0,l=u},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}}}function N0(i,r){if(i){if(typeof i=="string")return mu(i,r);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return mu(i,r)}}function mu(i,r){(r==null||r>i.length)&&(r=i.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=i[e];return t}function T0(i,r,e){return r=Nt(r),jr(i,Jc()?Reflect.construct(r,e||[],Nt(i).constructor):r.apply(i,e))}function Jc(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jc=function(){return!!i})()}var Is="http://www.w3.org/2002/07/owl#";function S0(i,r,e,t){var n=i.any(r,e,void 0);return n?(i.equate(n,t),!0):!1}function R0(i,r,e,t){var n=i.any(void 0,e,t);return n?(i.equate(n,r),!0):!1}function Zc(i,r,e,t,n){i.typeCallback&&i.typeCallback(i,t,n);var a=i.classActions[i.id(t)],s=!1;if(a)for(var l=0;l<a.length;l++)s=s||a[l](i,r,e,t,n);return s}var bi=function(i){function r(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return gt(this,r),t=T0(this,r,[void 0,void 0,void 0,void 0,n]),ke(t,"updater",void 0),ke(t,"namespaces",void 0),ke(t,"classActions",void 0),ke(t,"propertyActions",void 0),ke(t,"redirections",void 0),ke(t,"aliases",void 0),ke(t,"HTTPRedirects",void 0),ke(t,"subjectIndex",void 0),ke(t,"predicateIndex",void 0),ke(t,"objectIndex",void 0),ke(t,"whyIndex",void 0),ke(t,"index",void 0),ke(t,"features",void 0),ke(t,"_universalVariables",void 0),ke(t,"_existentialVariables",void 0),ke(t,"rdfArrayRemove",void 0),ke(t,"dataCallbacks",void 0),t.propertyActions={},t.classActions={},t.redirections=[],t.aliases=[],t.HTTPRedirects=[],t.subjectIndex=[],t.predicateIndex=[],t.objectIndex=[],t.whyIndex=[],t.index=[t.subjectIndex,t.predicateIndex,t.objectIndex,t.whyIndex],t.namespaces={},t.features=e||[],t.rdfArrayRemove=n.rdfArrayRemove||h0,n.dataCallback&&(t.dataCallbacks=[n.dataCallback]),t.initPropertyActions(t.features),t}return xt(r,i),pt(r,[{key:"substitute",value:function(t){var n=this.statements.map(function(s){return s.substitute(t)}),a=new r;return a.add(n),a}},{key:"addDataCallback",value:function(t){this.dataCallbacks||(this.dataCallbacks=[]),this.dataCallbacks.push(t)}},{key:"applyPatch",value:function(t,n,a){var s=this,l,o=null;function u(c){if(t.delete){l=t.delete,o&&(l=l.substitute(o)),l=l.statements;var h=[],g=l.map(function(N){var y=s.statementsMatching(N.subject,N.predicate,N.object,n);return y.length===0?(h.push(N),null):y[0]});if(h.length)return a("Could not find to delete: "+h.join(`
 or `));g.map(function(N){s.remove(N)})}t.insert&&(l=t.insert,o&&(l=l.substitute(o)),l=l.statements,l.map(function(N){N.graph=n,s.add(N.subject,N.predicate,N.object,N.graph)})),c()}if(t.where){var f=new A0("patch");f.pat=t.where,f.pat.statements.map(function(c){c.graph=_d(n.value)}),f.sync=!0;var d=[];s.query(f,function(h){d.push(h)},s.fetcher,function(){if(d.length===0)return a("No match found to be patched:"+t.where);if(d.length>1)return a("Patch ambiguous. No patch done.");o=d[0],u(a)})}else u(a)}},{key:"declareExistential",value:function(t){return this._existentialVariables||(this._existentialVariables=[]),this._existentialVariables.push(t),t}},{key:"initPropertyActions",value:function(t){this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"))]=[Zc],tr(t,"sameAs")>=0&&(this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode("".concat(Is,"sameAs")))]=[function(n,a,s,l,o){return n.equate(a,l),!0}]),tr(t,"InverseFunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode("".concat(Is,"InverseFunctionalProperty")))]=[function(n,a,s,l,o){return n.newPropertyAction(a,R0)}]),tr(t,"FunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode("".concat(Is,"FunctionalProperty")))]=[function(n,a,s,l,o){return n.newPropertyAction(a,S0)}])}},{key:"addStatement",value:function(t){return this.add(t.subject,t.predicate,t.object,t.graph),this.statements.length}},{key:"add",value:function(t,n,a,s){var l;if(arguments.length===1){if(t instanceof Array)for(l=0;l<t.length;l++)this.add(t[l]);else Cn(t)?this.add(t.subject,t.predicate,t.object,t.graph):zl(t)&&this.add(t.statements);return this}var o,u;s||(s=this.fetcher?this.fetcher.appNode:this.rdfFactory.defaultGraph()),typeof t=="string"&&(t=this.rdfFactory.namedNode(t)),n=ht.fromValue(n);var f=ht.fromValue(a);if(s=ht.fromValue(s),!kp(t))throw new Error("Subject is not a subject type");if(!Dp(n))throw new Error("Predicate ".concat(n," is not a predicate type"));if(!yp(f))throw new Error("Object ".concat(f," is not an object type"));if(!Ap(s))throw new Error("Why is not a graph type");this.predicateCallback&&this.predicateCallback(this,n,s);var d=this.id(this.canon(n));o=this.propertyActions[d];var c=!1;if(o)for(l=0;l<o.length;l++)c=c||o[l](this,t,n,f,s);if(this.holds(t,n,f,s))return null;var h=[this.id(this.canon(t)),d,this.id(this.canon(f)),this.id(this.canon(s))];for(u=this.rdfFactory.quad(t,n,f,s),l=0;l<4;l++){var g=this.index[l],N=h[l];g[N]||(g[N]=[]),g[N].push(u)}if(this.statements.push(u),this.dataCallbacks){var y=C0(this.dataCallbacks),b;try{for(y.s();!(b=y.n()).done;){var S=b.value;S(u)}}catch(D){y.e(D)}finally{y.f()}}return u}},{key:"canon",value:function(t){if(!t)return t;var n=this.redirections[this.id(t)];if(n)return n;switch(t.termType){case gn:return new br(t.value);case Wr:return t;case dn:return new da;case nc:return t;case _i:return t;case Mn:return new gr(t.value,t.language,t.datatype);case pn:return new Pt(t.value);case Gr:return new hn(t.value);default:throw new Error("Term Type not recognized for canonization: ".concat(t.termType))}}},{key:"check",value:function(){this.checkStatementList(this.statements);for(var t=0;t<4;t++){var n=this.index[t];for(var a in n)n.hasOwnProperty(a)&&this.checkStatementList(n[a],t)}}},{key:"checkStatementList",value:function(t,n){n===void 0&&(n=0);for(var a=["subject","predicate","object","why"],s=" found in "+a[n]+" index.",l,o=0;o<t.length;o++){l=t[o];for(var u=[l.subject,l.predicate,l.object,l.graph],f=function(N,y){for(var b=0;b<N.length;b++)if(N[b].subject.equals(y.subject)&&N[b].predicate.equals(y.predicate)&&N[b].object.equals(y.object)&&N[b].why.equals(y.graph))return!0},d=0;d<4;d++){var c=this.canon(u[d]),h=this.id(c);this.index[d][h]&&f(this.index[d][h],l)}if(!f(this.statements,l))throw new Error("Statement list does not statement "+l+"@"+l.graph+s)}}},{key:"close",value:function(){return this}},{key:"compareTerms",value:function(t,n){return Object.prototype.hasOwnProperty.call(t,"compareTerm")?t.compareTerm(n):vr[t.termType]<vr[n.termType]?-1:vr[t.termType]>vr[n.termType]?1:t.value<n.value?-1:t.value>n.value?1:0}},{key:"copyTo",value:function(t,n,a){a||(a=[]);var s=this.statementsMatching(t);tr(a,"two-direction")!==-1&&s.concat(this.statementsMatching(void 0,void 0,t));for(var l=0;l<s.length;l++){var o=s[l];switch(o.object.termType){case"NamedNode":this.add(n,o.predicate,o.object);break;case"Literal":case"BlankNode":case"Collection":this.add(n,o.predicate,o.object.copy(this))}tr(a,"delete")!==-1&&this.remove(o)}}},{key:"equate",value:function(t,n){var a=this.canon(t),s=this.canon(n),l=this.compareTerms(a,s);return l?l<0?this.replaceWith(s,a):this.replaceWith(a,s):!0}},{key:"formula",value:function(t){return new r(t)}},{key:"length",get:function(){return this.statements.length}},{key:"match",value:function(t,n,a,s){return this.statementsMatching(ht.fromValue(t),ht.fromValue(n),ht.fromValue(a),ht.fromValue(s))}},{key:"mentionsURI",value:function(t){var n="<"+t+">";return!!this.subjectIndex[n]||!!this.objectIndex[n]||!!this.predicateIndex[n]}},{key:"newExistential",value:function(t){if(!t)return this.bnode();var n=this.sym(t);return this.declareExistential(n)}},{key:"newPropertyAction",value:function(t,n){var a=this.id(t);this.propertyActions[a]||(this.propertyActions[a]=[]),this.propertyActions[a].push(n);for(var s=this.statementsMatching(void 0,t,void 0),l=!1,o=0;o<s.length;o++)l=l||n(this,s[o].subject,t,s[o].object);return l}},{key:"newUniversal",value:function(t){var n=this.sym(t);return this._universalVariables||(this._universalVariables=[]),this._universalVariables.push(n),n}},{key:"variable",value:function(t){return new hn(t)}},{key:"nextSymbol",value:function(t){for(var n=0;;n++){var a=t.value+"#n"+n;if(!this.mentionsURI(a))return this.sym(a)}}},{key:"query",value:function(t,n,a,s){return pu.call(this,t,n,a,s)}},{key:"querySync",value:function(t){var n=[];function a(o){n.push(o)}function s(){l=!0}var l=!1;if(t.sync=!0,pu.call(this,t,a,null,s),!l)throw new Error("Sync query should have called done function");return n}},{key:"remove",value:function(t){if(t instanceof Array){for(var n=0;n<t.length;n++)this.remove(t[n]);return this}if(zl(t))return this.remove(t.statements);var a=this.statementsMatching(t.subject,t.predicate,t.object,t.graph);if(!a.length)throw new Error("Statement to be removed is not on store: "+t);return this.removeStatement(a[0]),this}},{key:"removeDocument",value:function(t){this.removeMetadata(t);for(var n=this.statementsMatching(void 0,void 0,void 0,t).slice(),a=0;a<n.length;a++)this.removeStatement(n[a]);return this.removeMatches(t,null,null),this}},{key:"removeMetadata",value:function(t){for(var n=this.sym("chrome://TheCurrentSession"),a="http://www.w3.org/2007/ont/link#",s=this.statementsMatching(void 0,this.sym("".concat(a,"requestedURI")),this.rdfFactory.literal(t.value),n).map(function(h){return h.subject}),l=0;l<s.length;l++){var o=s[l];if(o!=null){var u=void 0,f=this.any(o,this.sym("".concat(a,"status")),null,n);if(f!=null){u=this.statementsMatching(f,this.sym("".concat(a,"status")),null,n).slice();for(var d=0;d<u.length;d++)this.removeStatement(u[d])}var c=this.any(o,this.sym("".concat(a,"response")),null,n);if(c!=null){u=this.statementsMatching(c,null,null,n).slice();for(var d=0;d<u.length;d++)this.removeStatement(u[d])}u=this.statementsMatching(o,null,null,n).slice();for(var d=0;d<u.length;d++)this.removeStatement(u[d])}}return this.removeMatches(this.sym(t.value),null,null,n),this}},{key:"removeMany",value:function(t,n,a,s,l){for(var o=this.statementsMatching(t,n,a,s,!1),u=[],f=0;f<o.length;f++)u.push(o[f]);for(l&&(u=u.slice(0,l)),f=0;f<u.length;f++)this.remove(u[f])}},{key:"removeMatches",value:function(t,n,a,s){return this.removeMany(t,n,a,s),this}},{key:"removeStatement",value:function(t){for(var n=[t.subject,t.predicate,t.object,t.graph],a=0;a<4;a++){var s=this.canon(n[a]),l=this.id(s);this.index[a][l]&&this.rdfArrayRemove(this.index[a][l],t)}return this.rdfArrayRemove(this.statements,t),this}},{key:"removeStatements",value:function(t){for(var n=0;n<t.length;n++)this.remove(t[n]);return this}},{key:"replaceWith",value:function(t,n){for(var a=this.id(t),s=this.id(n),l=function(f){var d=f[a];if(d){var c=f[s];c?f[s]=d.concat(c):f[s]=d,delete f[a]}},o=0;o<4;o++)l(this.index[o]);if(this.redirections[a]=n,t.value){if(this.aliases[s]||(this.aliases[s]=[]),this.aliases[s].push(t),this.aliases[a])for(o=0;o<this.aliases[a].length;o++)this.redirections[this.id(this.aliases[a][o])]=n,this.aliases[s].push(this.aliases[a][o]);this.add(n,this.sym("http://www.w3.org/2007/ont/link#uri"),t),this.fetcher&&this.fetcher.nowKnownAs(t,n)}return l(this.classActions),l(this.propertyActions),!0}},{key:"allAliases",value:function(t){var n=this.aliases[this.id(this.canon(t))]||[];return n.push(this.canon(t)),n}},{key:"sameThings",value:function(t,n){if(t.equals(n))return!0;var a=this.canon(t);if(!a)return!1;var s=this.canon(n);return s?a.value===s.value:!1}},{key:"setPrefixForURI",value:function(t,n){if(!(t==="tab"&&this.namespaces.tab)&&!(t.slice(0,2)==="ns"||t.slice(0,7)==="default")){for(var a in this.namespaces)this.namespaces[a]==n&&delete this.namespaces[a];this.namespaces[t]=n}}},{key:"statementsMatching",value:function(t,n,a,s,l){var o=[t,n,a,s],u=[],f=[],d=[],c,h;for(c=0;c<4;c++)u[c]=this.canon(ht.fromValue(o[c])),u[c]&&(d.push(c),f[c]=this.id(u[c]));if(d.length===0)return this.statements;if(d.length===1)return c=d[0],h=this.index[c][f[c]],h&&l&&h.length>1&&(h=h.slice(0,1)),h=h||[],h;var g=1e10,N,y;for(y=0;y<d.length;y++){if(c=d[y],h=this.index[c][f[c]],!h)return[];h.length<g&&(g=h.length,N=y)}for(var b=d[N],S=this.index[b][f[b]],D=d.slice(0,N).concat(d.slice(N+1)),A=[],v=["subject","predicate","object","why"],E=0;E<S.length;E++){var w=S[E];for(y=0;y<D.length;y++)if(c=D[y],!this.canon(w[v[c]]).equals(u[c])){w=null;break}if(w!=null&&(A.push(w),l))break}return A}},{key:"uris",value:function(t){var n=this.canon(t),a=this.aliases[this.id(n)];if(!n.value)return[];var s=[n.value];if(a)for(var l=0;l<a.length;l++)s.push(a[l].uri);return s}},{key:"serialize",value:function(t,n,a,s){var l,o=(l=s)!==null&&l!==void 0&&l.namespaces?Zn(Zn({},this.namespaces),s.namespaces):Zn({},this.namespaces);return s=Zn(Zn({},s||{}),{},{namespaces:o}),di(a,this,t,n,void 0,s)}}],[{key:"defaultGraphURI",get:function(){return ui}}])}(Yc);ke(bi,"handleRDFType",void 0);bi.handleRDFType=Zc;function ai(i,r){var e=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=F0(i))||r){e&&(i=e);var t=0,n=function(){};return{s:n,n:function(){return t>=i.length?{done:!0}:{done:!1,value:i[t++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,s=!1,l;return{s:function(){e=e.call(i)},n:function(){var u=e.next();return a=u.done,u},e:function(u){s=!0,l=u},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}}}function F0(i,r){if(i){if(typeof i=="string")return vu(i,r);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return vu(i,r)}}function vu(i,r){(r==null||r>i.length)&&(r=i.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=i[e];return t}var ln=Ut("http://www.w3.org/1999/02/22-rdf-syntax-ns#");function I0(i,r,e,t){var n=ai(i.statementsMatching(e,null,null,t)),a;try{for(n.s();!(a=n.n()).done;){var s=a.value,l=new on(r,s.predicate,s.object,t);i.remove(s),i.add(l)}}catch(g){n.e(g)}finally{n.f()}var o=ai(i.statementsMatching(null,e,null,t)),u;try{for(o.s();!(u=o.n()).done;){var f=u.value;i.remove(f),i.add(new on(f.subject,r,f.object,t))}}catch(g){o.e(g)}finally{o.f()}var d=ai(i.statementsMatching(null,null,e,t)),c;try{for(d.s();!(c=d.n()).done;){var h=c.value;i.remove(h),i.add(new on(h.subject,h.predicate,r,t))}}catch(g){d.e(g)}finally{d.f()}}function O0(i,r){var e=ln("nil"),t=ai(i.statementsMatching(e,null,null,r)),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;i.remove(a);var s=new Hr;i.add(new on(s,a.predicate,a.object,r))}}catch(d){t.e(d)}finally{t.f()}var l=ai(i.statementsMatching(null,null,e,r)),o;try{for(l.s();!(o=l.n()).done;){var u=o.value;if(!u.predicate.sameTerm(ln("rest"))){i.remove(u);var f=new Hr;i.add(new on(u.subject,u.predicate,f,r))}}}catch(d){l.e(d)}finally{l.f()}}function L0(i,r){function e(n,a,s){var l=i.statementsMatching(n,ln("rest"),null,r);if(l.length!==1)throw new Error("Bad list structure: no rest at ".concat(n));var o=i.statementsMatching(n,ln("first"),null,r);if(o.length!==1)throw new Error("Bad list structure: rest but ".concat(o.length," firsts at ").concat(n));var u=o[0].object,f=[u].concat(a),d=s.concat(l).concat(o),c=i.statementsMatching(null,ln("rest"),n,r);if(c.length===0){var h=new Hr(f);i.remove(d),I0(i,h,n,r);return}if(c.length!==1)throw new Error("Bad list structure: ".concat(c.length," pres at ").concat(n));var g=c[0].subject;if(g.termType!=="BlankNode")throw new Error("Bad list element node ".concat(g," type: ").concat(g.termType," "));e(g,f,d)}O0(i,r);var t=i.statementsMatching(null,ln("rest"),ln("nil"),r);t.forEach(function(n){if(n.subject.termType!=="BlankNode")throw new Error("Bad list element node ".concat(n.subject," type: ").concat(n.subject.termType," "));e(n.subject,[],[])})}function B0(i){return encodeURI(i)}var P0={encode:function(r){r=r.replace(/\r\n/g,`
`);for(var e="",t=0;t<r.length;t++){var n=r.charCodeAt(t);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(n&63|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(n&63|128))}return e},decode:function(r){for(var e="",t=0;t<r.length;){var n=r.charCodeAt(t);n<128?(e+=String.fromCharCode(n),t++):n>191&&n<224?(e+=String.fromCharCode((n&31)<<6|r.charCodeAt(t+1)&63),t+=2):(e+=String.fromCharCode((n&15)<<12|(r.charCodeAt(t+1)&63)<<6|r.charCodeAt(t+2)&63),t+=3)}return e}},Os="http://www.w3.org/2000/10/swap/log#",It=function(r){return r},Ot=function(r){return r},Kn=function(r){if(r.length>0)throw"missing.js: oops nnonempty dict not imp";return[]},Kt=function(r){return r.length},Ls=function(r,e,t){if(typeof r.slice>"u")throw"@@ mising.js: No .slice function for "+r+" of type "+Zt(r);return typeof t>"u"||t==null?r.slice(e):r.slice(e,t)},ri=Error("dummy error stop iteration"),zi=function(r){return this.last=0,this.li=r,this.next=function(){if(this.last==this.li.length)throw ri;return this.li[this.last++]},this},Bs=function(r,e){return r.indexOf(e)},sn=function(r,e){if(!r)throw e?"python Assertion failed: "+e:"(python) Assertion failed."},q0=function(r){return String.fromCharCode(r)};String.prototype.encode=function(i){if(i!="utf-8")throw"UTF8_converter: can only do utf-8";return P0.encode(this)};String.prototype.decode=function(i){if(i!="utf-8")throw"UTF8_converter: can only do utf-8";return this};var Ps=function(r,e){return rr(e,r)},j0=null,M0="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",bu="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",wu="http://www.w3.org/2002/07/owl#sameAs",U0="#",x0="http://www.w3.org/2001/XMLSchema#integer",V0="http://www.w3.org/2001/XMLSchema#double",H0="http://www.w3.org/2001/XMLSchema#decimal",z0="http://www.w3.org/2001/XMLSchema#date",X0="http://www.w3.org/2001/XMLSchema#dateTime",Kc=`	\r
 !"#$%&'()*.,+/;<=>?@[\\]^\`{|}~`,an=Kc+":",qs=new RegExp("^([-+]?[0-9]+)(\\.[0-9]+)?(e[-+]?[0-9]+)?","g"),yu=new RegExp("^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9](T[0-9][0-9]:[0-9][0-9](:[0-9][0-9](\\.[0-9]*)?)?)?Z?"),js=new RegExp('[\\\\\\r\\n\\"]',"g"),Ms=new RegExp("^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*","g");function Da(i,r,e,t,n,a,s,l){return new $0(i,r,e,t,n,a,s,l)}var $0=function(){function i(r,e,t,n,a,s,l,o){gt(this,i),typeof e>"u"&&(e=null),typeof t>"u"&&(t=""),typeof n>"u"&&(n=null),typeof a>"u"&&(a=""),typeof l>"u"&&(l=""),typeof o>"u"&&(o=null),this._bindings=new Kn([]),this._flags=l,t!=""&&(sn(t.indexOf(":")>=0,"Document URI not absolute: "+t),this._bindings[""]=t+"#"),this._store=r,a&&r.setGenPrefix(a),this._thisDoc=t,this.source=r.sym(t),this.lines=0,this.statementCount=0,this.hasNil=!1,this.startOfLine=0,this.previousLine=0,this._genPrefix=a,this.keywords=new Ot(["a","this","bind","has","is","of","true","false"]),this.keywordsSet=0,this._anonymousNodes=new Kn([]),this._variables=new Kn([]),this._parentVariables=new Kn([]),this._reason=o,this._reason2=null,n?this._baseURI=n:t?this._baseURI=t:this._baseURI=null,sn(!this._baseURI||this._baseURI.indexOf(":")>=0),this._genPrefix||(this._thisDoc?this._genPrefix=this._thisDoc+"#_g":this._genPrefix=RDFSink_uniqueURI()),e==null?this._thisDoc?this._formula=r.formula(t+"#_formula"):this._formula=r.formula():this._formula=e,this._context=this._formula,this._parentContext=null}return pt(i,[{key:"here",value:function(e){return this._genPrefix+"_L"+this.lines+"C"+(e-this.startOfLine+1)}},{key:"formula",value:function(){return this._formula}},{key:"loadStream",value:function(e){return this.loadBuf(e.read())}},{key:"loadBuf",value:function(e){return this.startDoc(),this.feed(e),this.endDoc()}},{key:"feed",value:function(e){for(var t=e.decode("utf-8"),n=0;n>=0;){var a=this.skipSpace(t,n);if(a<0)return;var n=this.directiveOrStatement(t,a);if(n<0)throw Pe(this._thisDoc,this.lines,t,a,"expected directive or statement")}}},{key:"directiveOrStatement",value:function(e,t){var n=this.skipSpace(e,t);if(n<0)return n;var a=this.directive(e,n);if(a>=0)return this.checkDot(e,a);var a=this.statement(e,n);return a>=0?this.checkDot(e,a):a}},{key:"tok",value:function(e,t,n){if(t.slice(n,n+1)=="@")var n=n+1;else if(tr(this.keywords,e)<0)return-1;var a=n+Kt(e);return t.slice(n,a)==e&&Kc.indexOf(t.charAt(a))>=0?a:-1}},{key:"directive",value:function(e,t){var u=this.skipSpace(e,t);if(u<0)return u;var n=new Ot([]),u=this.tok("bind",e,t);if(u>0)throw Pe(this._thisDoc,this.lines,e,t,"keyword bind is obsolete: use @prefix");var u=this.tok("keywords",e,t);if(u>0){var t=this.commaSeparatedList(e,u,n,!1);if(t<0)throw Pe(this._thisDoc,this.lines,e,t,"'@keywords' needs comma separated list of words");return this.setKeywords(Ls(n,null,null)),t}var u=this.tok("forAll",e,t);if(u>0){var t=this.commaSeparatedList(e,u,n,!0);if(t<0)throw Pe(this._thisDoc,this.lines,e,t,"Bad variable list after @forAll");var a=new zi(n);try{for(;;){var s=a.next();(tr(this._variables,s)<0||tr(this._parentVariables,s)>=0)&&(this._variables[s]=this._context.newUniversal(s))}}catch(d){if(d!=ri)throw d}return t}var u=this.tok("forSome",e,t);if(u>0){var t=this.commaSeparatedList(e,u,n,this.uri_ref2);if(t<0)throw Pe(this._thisDoc,this.lines,e,t,"Bad variable list after @forSome");var a=new zi(n);try{for(;;){var s=a.next();this._context.declareExistential(s)}}catch(c){if(c!=ri)throw c}return t}var u=this.tok("prefix",e,t);if(u>=0){var l=new Ot([]),t=this.qname(e,u,l);if(t<0)throw Pe(this._thisDoc,this.lines,e,u,"expected qname after @prefix");var u=this.uri_ref2(e,t,l);if(u<0)throw Pe(this._thisDoc,this.lines,e,t,"expected <uriref> after @prefix _qname_");var o=l[1].uri;if(this._baseURI)var o=Ps(this._baseURI,o);else sn(o.indexOf(":")>=0,"With no base URI, cannot handle relative URI for NS");return sn(o.indexOf(":")>=0),this._bindings[l[0][0]]=o,this.bind(l[0][0],B0(o)),u}var u=this.tok("base",e,t);if(u>=0){var l=new Ot([]),t=this.uri_ref2(e,u,l);if(t<0)throw Pe(this._thisDoc,this.lines,e,u,"expected <uri> after @base ");var o=l[0].uri;if(this._baseURI)var o=Ps(this._baseURI,o);else throw Pe(this._thisDoc,this.lines,e,u,"With no previous base URI, cannot use relative URI in @base  <"+o+">");return sn(o.indexOf(":")>=0),this._baseURI=o,t}return-1}},{key:"bind",value:function(e,t){e==""||this._store.setPrefixForURI(e,t)}},{key:"setKeywords",value:function(e){e==null?this.keywordsSet=0:(this.keywords=e,this.keywordsSet=1)}},{key:"startDoc",value:function(){}},{key:"endDoc",value:function(){return this.hasNil&&this._store.rdfFactory.supports.COLLECTIONS&&L0(this._store,this.source),this._formula}},{key:"makeStatement",value:function(e){e[0].add(e[2],e[1],e[3],this.source),(e[2].uri&&e[2].uri===bu||e[3].uri&&e[3].uri===bu)&&(this.hasNil=!0),this.statementCount+=1}},{key:"statement",value:function(e,a){var n=new Ot([]),a=this.object(e,a,n);if(a<0)return a;var s=this.property_list(e,a,n[0]);if(s<0)throw Pe(this._thisDoc,this.lines,e,a,"expected propertylist");return s}},{key:"subject",value:function(e,t,n){return this.item(e,t,n)}},{key:"verb",value:function(e,t,n){var s=this.skipSpace(e,t);if(s<0)return s;var a=new Ot([]),s=this.tok("has",e,t);if(s>=0){var t=this.prop(e,s,a);if(t<0)throw Pe(this._thisDoc,this.lines,e,s,"expected property after 'has'");return n.push(new It(["->",a[0]])),t}var s=this.tok("is",e,t);if(s>=0){var t=this.prop(e,s,a);if(t<0)throw Pe(this._thisDoc,this.lines,e,s,"expected <property> after 'is'");var s=this.skipSpace(e,t);if(s<0)throw Pe(this._thisDoc,this.lines,e,t,"End of file found, expected property after 'is'");var t=s,s=this.tok("of",e,t);if(s<0)throw Pe(this._thisDoc,this.lines,e,t,"expected 'of' after 'is' <prop>");return n.push(new It(["<-",a[0]])),s}var s=this.tok("a",e,t);if(s>=0)return n.push(new It(["->",this._store.sym(M0)])),s;if(e.slice(t,t+2)=="<=")return n.push(new It(["<-",this._store.sym(Os+"implies")])),t+2;if(e.slice(t,t+1)=="=")return e.slice(t+1,t+2)==">"?(n.push(new It(["->",this._store.sym(Os+"implies")])),t+2):(n.push(new It(["->",this._store.sym(wu)])),t+1);if(e.slice(t,t+2)==":=")return n.push(new It(["->",Os+"becomes"])),t+2;var s=this.prop(e,t,a);if(s>=0)return n.push(new It(["->",a[0]])),s;if(e.slice(t,t+2)==">-"||e.slice(t,t+2)=="<-")throw Pe(this._thisDoc,this.lines,e,s,">- ... -> syntax is obsolete.");return-1}},{key:"prop",value:function(e,t,n){return this.item(e,t,n)}},{key:"item",value:function(e,t,n){return this.path(e,t,n)}},{key:"blankNode",value:function(e){return this._context.bnode(e,this._reason2)}},{key:"path",value:function(e,t,n){var a=this.nodeOrLiteral(e,t,n);if(a<0)return a;for(;"!^.".indexOf(e.slice(a,a+1))>=0;){var s=e.slice(a,a+1);if(s=="."){var l=e.slice(a+1,a+2);if(!l||an.indexOf(l)>=0&&":?<[{(".indexOf(l)<0)break}var o=n.pop(),u=this.blankNode(this.here(a)),a=this.node(e,a+1,n);if(a<0)throw Pe(this._thisDoc,this.lines,e,a,"EOF found in middle of path syntax");var f=n.pop();s=="^"?this.makeStatement(new It([this._context,f,u,o])):this.makeStatement(new It([this._context,f,o,u])),n.push(u)}return a}},{key:"anonymousNode",value:function(e){var t=this._anonymousNodes[e];if(t)return t;var t=this._store.bnode(e);return this._anonymousNodes[e]=t,t}},{key:"node",value:function(e,l,n,a){typeof a>"u"&&(a=null);var s=a,E=this.skipSpace(e,l);if(E<0)return E;var l=E,o=e.slice(l,l+1);if(o=="["){var u=this.here(l),E=this.skipSpace(e,l+1);if(E<0)throw Pe(this._thisDoc,this.lines,e,l,"EOF after '['");if(e.slice(E,E+1)=="="){var l=E+1,f=new Ot([]),E=this.objectList(e,l,f);if(E>=0){var s=f[0];if(Kt(f)>1){var d=new zi(f);try{for(;;){var c=d.next();this.makeStatement(new It([this._context,this._store.sym(wu),s,c]))}}catch(O){if(O!=ri)throw O}}var E=this.skipSpace(e,E);if(E<0)throw Pe(this._thisDoc,this.lines,e,l,"EOF when objectList expected after [ = ");if(e.slice(E,E+1)==";")var E=E+1}else throw Pe(this._thisDoc,this.lines,e,l,"objectList expected after [= ")}if(s==null)var s=this.blankNode(u);var l=this.property_list(e,E,s);if(l<0)throw Pe(this._thisDoc,this.lines,e,E,"property_list expected");var E=this.skipSpace(e,l);if(E<0)throw Pe(this._thisDoc,this.lines,e,l,"EOF when ']' expected after [ <propertyList>");if(e.slice(E,E+1)!="]")throw Pe(this._thisDoc,this.lines,e,E,"']' expected");return n.push(s),E+1}if(o=="{"){var h=e.slice(l+1,l+2);if(h=="$"){l+=1;for(var E=l+1,g=new Ot([]),N=!0;;){var l=this.skipSpace(e,E);if(l<0)throw Pe(this._thisDoc,this.lines,e,l,"needed '$}', found end.");if(e.slice(l,l+2)=="$}"){var E=l+2;break}if(N)var N=!1;else if(e.slice(l,l+1)==",")l+=1;else throw Pe(this._thisDoc,this.lines,e,l,"expected: ','");var y=new Ot([]),E=this.item(e,l,y);if(E<0)throw Pe(this._thisDoc,this.lines,e,l,"expected item in set or '$}'");g.push(y[0])}return n.push(this._store.newSet(g,this._context)),E}else{var E=l+1,b=this._parentContext;this._parentContext=this._context;var S=this._anonymousNodes,D=this._parentVariables;this._parentVariables=this._variables,this._anonymousNodes=new Kn([]),this._variables=this._variables.slice();var A=this._reason2;if(this._reason2=j0,s==null)var s=this._store.formula();for(this._context=s;;){var l=this.skipSpace(e,E);if(l<0)throw Pe(this._thisDoc,this.lines,e,l,"needed '}', found end.");if(e.slice(l,l+1)=="}"){var E=l+1;break}var E=this.directiveOrStatement(e,l);if(E<0)throw Pe(this._thisDoc,this.lines,e,l,"expected statement or '}'")}return this._anonymousNodes=S,this._variables=this._parentVariables,this._parentVariables=D,this._context=this._parentContext,this._reason2=A,this._parentContext=b,n.push(s.close()),E}}if(o=="("){var v=this._store.list,h=e.slice(l+1,l+2);if(h=="$"){var v=this._store.newSet;l+=1}for(var E=l+1,g=new Ot([]);;){var l=this.skipSpace(e,E);if(l<0)throw Pe(this._thisDoc,this.lines,e,l,"needed ')', found end.");if(e.slice(l,l+1)==")"){var E=l+1;break}var y=new Ot([]),E=this.item(e,l,y);if(E<0)throw Pe(this._thisDoc,this.lines,e,l,"expected item in list or ')'");g.push(y[0])}return n.push(v(g,this._context)),E}var E=this.tok("this",e,l);if(E>=0)throw Pe(this._thisDoc,this.lines,e,l,"Keyword 'this' was ancient N3. Now use @forSome and @forAll keywords.");var E=this.tok("true",e,l);if(E>=0)return n.push(!0),E;var E=this.tok("false",e,l);if(E>=0)return n.push(!1),E;if(s==null){var E=this.uri_ref2(e,l,n);if(E>=0)return E}return-1}},{key:"property_list",value:function(e,t,n){for(;;){var h=this.skipSpace(e,t);if(h<0)throw Pe(this._thisDoc,this.lines,e,t,"EOF found when expected verb in property list");if(e.slice(h,h+2)==":-"){var t=h+2,a=new Ot([]),h=this.node(e,t,a,n);if(h<0)throw Pe(this._thisDoc,this.lines,e,t,"bad {} or () or [] node after :- ");var t=h;continue}var t=h,s=new Ot([]),h=this.verb(e,t,s);if(h<=0)return t;var l=new Ot([]),t=this.objectList(e,h,l);if(t<0)throw Pe(this._thisDoc,this.lines,e,h,"objectList expected");var o=new zi(l);try{for(;;){var u=o.next(),f=s[0],d=f[0],c=f[1];d=="->"?this.makeStatement(new It([this._context,c,n,u])):this.makeStatement(new It([this._context,c,u,n]))}}catch(N){if(N!=ri)throw N}var h=this.skipSpace(e,t);if(h<0)throw Pe(this._thisDoc,this.lines,e,h,"EOF found in list of objects");if(e.slice(t,t+1)!=";")return t;var t=t+1}}},{key:"commaSeparatedList",value:function(e,t,n,a){var s=this.skipSpace(e,t);if(s<0)throw Pe(this._thisDoc,this.lines,e,s,"EOF found expecting comma sep list");if(e.charAt(s)==".")return t;if(a)var s=this.uri_ref2(e,s,n);else var s=this.bareWord(e,s,n);if(s<0)return-1;for(;;){var t=this.skipSpace(e,s);if(t<0)return t;var l=e.slice(t,t+1);if(l!=",")return l!="."?-1:t;if(a)var s=this.uri_ref2(e,t+1,n);else var s=this.bareWord(e,t+1,n);if(s<0)throw Pe(this._thisDoc,this.lines,e,s,"bad list content")}}},{key:"objectList",value:function(e,a,n){var a=this.object(e,a,n);if(a<0)return-1;for(;;){var s=this.skipSpace(e,a);if(s<0)throw Pe(this._thisDoc,this.lines,e,s,"EOF found after object");if(e.slice(s,s+1)!=",")return s;var a=this.object(e,s+1,n);if(a<0)return a}}},{key:"checkDot",value:function(e,t){var n=this.skipSpace(e,t);if(n<0)return n;if(e.slice(n,n+1)==".")return n+1;if(e.slice(n,n+1)=="}"||e.slice(n,n+1)=="]")return n;throw Pe(this._thisDoc,this.lines,e,n,"expected '.' or '}' or ']' at end of statement")}},{key:"uri_ref2",value:function(e,c,n){var a=new Ot([]),s=this.qname(e,c,a);if(s>=0){var l=a[0],o=l[0],u=l[1];if(o==null){sn(0,"not used?");var f=this._baseURI+U0}else{var f=this._bindings[o];if(!f){if(o=="_")return n.push(this.anonymousNode(u)),s;throw Pe(this._thisDoc,this.lines,e,c,"Prefix "+o+" not bound.")}}var d=this._store.sym(f+u);return tr(this._variables,d)>=0?n.push(this._variables[d]):n.push(d),s}var c=this.skipSpace(e,c);if(c<0)return-1;if(e.charAt(c)=="?"){var h=new Ot([]),s=this.variable(e,c,h);return s>0?(n.push(h[0]),s):-1}else if(e.charAt(c)=="<"){for(var c=c+1,g=c;c<Kt(e);){if(e.charAt(c)==">"){var N=e.slice(g,c);if(this._baseURI)var N=Ps(this._baseURI,N);else sn(N.indexOf(":")>=0,"With no base URI, cannot deal with relative URIs");if(e.slice(c-1,c)=="#"&&Ls(N,-1,null)!="#")var N=N+"#";var d=this._store.sym(N);return tr(this._variables,d)>=0?n.push(this._variables[d]):n.push(d),c+1}var c=c+1}throw Pe(this._thisDoc,this.lines,e,s,"unterminated URI reference")}else if(this.keywordsSet){var h=new Ot([]),s=this.bareWord(e,c,h);if(s<0)return-1;if(tr(this.keywords,h[0])>=0)throw Pe(this._thisDoc,this.lines,e,c,'Keyword "'+h[0]+'" not allowed here.');return n.push(this._store.sym(this._bindings[""]+h[0])),s}else return-1}},{key:"skipSpace",value:function(e,t){for(var n=` 
\r	\f\v            ​\u2028\u2029　`,a=t||0;a<e.length;a++){var s=e.charAt(a);if(n.indexOf(s)<0)if(e.charAt(a)==="#")for(;;a++){if(a===e.length)return-1;if(e.charAt(a)===`
`){this.lines=this.lines+1;break}}else return a;else e.charAt(a)===`
`&&(this.lines=this.lines+1)}return-1}},{key:"variable",value:function(e,s,n){var a=this.skipSpace(e,s);if(a<0||e.slice(a,a+1)!="?")return-1;var a=a+1,s=a;if("0123456789-".indexOf(e.charAt(a))>=0)throw Pe(this._thisDoc,this.lines,e,a,"Varible name can't start with '"+e.charAt(a)+"s'");for(;s<Kt(e)&&an.indexOf(e.charAt(s))<0;)var s=s+1;if(this._parentContext==null)throw Pe(this._thisDoc,this.lines,e,a,"Can't use ?xxx syntax for variable in outermost level: "+e.slice(a-1,s));return n.push(this._store.variable(e.slice(a,s))),s}},{key:"bareWord",value:function(e,l,n){var a=this.skipSpace(e,l);if(a<0)return-1;var s=e.charAt(a);if("0123456789-".indexOf(s)>=0||an.indexOf(s)>=0)return-1;for(var l=a;l<Kt(e)&&an.indexOf(e.charAt(l))<0;)var l=l+1;return n.push(e.slice(a,l)),l}},{key:"qname",value:function(e,a,n){var a=this.skipSpace(e,a);if(a<0)return-1;var s=e.charAt(a);if("0123456789-+".indexOf(s)>=0)return-1;if(an.indexOf(s)<0)for(var l=s,a=a+1;a<Kt(e);){var s=e.charAt(a);if(an.indexOf(s)<0)var l=l+s,a=a+1;else break}else var l="";if(a<Kt(e)&&e.charAt(a)==":"){for(var o=l,a=a+1,l="";a<Kt(e);){var s=e.charAt(a);if(an.indexOf(s)<0)var l=l+s,a=a+1;else break}return n.push(new It([o,l])),a}else return l&&this.keywordsSet&&tr(this.keywords,l)<0?(n.push(new It(["",l])),a):-1}},{key:"object",value:function(e,t,n){var a=this.subject(e,t,n);if(a>=0)return a;var a=this.skipSpace(e,t);if(a<0)return-1;var t=a,s=null,l=e.charAt(t);if(l=='"'||l=="'"){e.slice(t,t+3==l+l)?s=l+l+l:s=l;var t=t+Kt(s),o=this.strconst(e,t,s),a=o[0],u=o[1];return n.push(this._store.literal(u)),a}else return-1}},{key:"nodeOrLiteral",value:function(e,t,n){var a=this.node(e,t,n);if(a>=0)return a;var a=this.skipSpace(e,t);if(a<0)return-1;var t=a,s=e.charAt(t);if("-+0987654321".indexOf(s)>=0){yu.lastIndex=0;var l=yu.exec(e.slice(t));if(l!=null){var o=l[0];a=t+o.length,o.indexOf("T")>=0?n.push(this._store.literal(o,this._store.sym(X0))):n.push(this._store.literal(o,this._store.sym(z0)))}else{qs.lastIndex=0;var l=qs.exec(e.slice(t));if(l==null)throw Pe(this._thisDoc,this.lines,e,t,"Bad number or date syntax");a=t+qs.lastIndex;var o=e.slice(t,a);o.indexOf("e")>=0?n.push(this._store.literal(parseFloat(o),this._store.sym(V0))):e.slice(t,a).indexOf(".")>=0?n.push(this._store.literal(parseFloat(o),this._store.sym(H0))):n.push(this._store.literal(parseInt(o),this._store.sym(x0)))}return a}if(e.charAt(t)=='"'){if(e.slice(t,t+3)=='"""')var u='"""';else var u='"';var t=t+Kt(u),f=null,d=this.strconst(e,t,u),a=d[0],c=d[1],h=null;if(e.slice(a,a+1)=="@"){Ms.lastIndex=0;var l=Ms.exec(e.slice(a+1));if(l==null)throw Pe(this._thisDoc,startline,e,t,"Bad language code syntax on string literal, after @");var t=Ms.lastIndex+a+1,h=e.slice(a+1,t),a=t}if(e.slice(a,a+2)=="^^")var g=new Ot([]),a=this.uri_ref2(e,a+2,g),f=g[0];return n.push(this._store.literal(c,h||f)),a}else return-1}},{key:"strconst",value:function(e,t,n){for(var a=t,s="",l=this.lines;a<Kt(e);){var t=a+Kt(n);if(e.slice(a,t)==n)return new It([t,s]);if(e.charAt(a)=='"'){var s=s+'"',a=a+1;continue}js.lastIndex=0;var o=js.exec(e.slice(a));if(!o)throw Pe(this._thisDoc,l,e,a,"Closing quote missing in string at ^ in "+e.slice(a-20,a)+"^"+e.slice(a,a+20));var t=a+js.lastIndex-1,s=s+e.slice(a,t),u=e.charAt(t);if(u=='"'){var a=t;continue}else if(u=="\r"){var a=t+1;continue}else if(u==`
`){if(n=='"')throw Pe(this._thisDoc,l,e,t,"newline found in string literal");this.lines=this.lines+1;var s=s+u,a=t+1;this.previousLine=this.startOfLine,this.startOfLine=a}else if(u=="\\"){var a=t+1,u=e.slice(a,a+1);if(!u)throw Pe(this._thisDoc,l,e,t,"unterminated string literal (2)");var f=Bs('abfrtvn\\"',u);if(f>=0)var d=`a\b\f\r	\v
\\"`.charAt(f),s=s+d,a=a+1;else if(u=="u")var c=this.uEscape(e,a+1,l),a=c[0],u=c[1],s=s+u;else if(u=="U")var c=this.UEscape(e,a+1,l),a=c[0],u=c[1],s=s+u;else throw Pe(this._thisDoc,this.lines,e,t,"bad escape")}}throw Pe(this._thisDoc,this.lines,e,t,"unterminated string literal")}},{key:"uEscape",value:function(e,t,n){for(var a=t,s=0,l=0;s<4;){var o=e.slice(a,a+1),u=o.toLowerCase(),a=a+1;if(u=="")throw Pe(this._thisDoc,n,e,t,"unterminated string literal(3)");var f=Bs("0123456789abcdef",u);if(f<0)throw Pe(this._thisDoc,n,e,t,"bad string literal hex escape");var l=l*16+f,s=s+1}var d=String.fromCharCode(l);return new It([a,d])}},{key:"UEscape",value:function(e,t,n){for(var a=t,s=0,l="\\U";s<8;){var o=e.slice(a,a+1),u=o.toLowerCase(),a=a+1;if(u=="")throw Pe(this._thisDoc,n,e,t,"unterminated string literal(3)");var f=Bs("0123456789abcdef",u);if(f<0)throw Pe(this._thisDoc,n,e,t,"bad string literal hex escape");var l=l+u,s=s+1}var d=q0("0x"+Ls(l,2,10)-0);return new It([a,d])}}])}();function Pe(i,r,e,t,n){var a=r+1,s="Line "+a+" of <"+i+">: Bad syntax: "+n+`
at: "`+e.slice(t,t+30)+'"',l=new SyntaxError(s,i,a);return l.lineNo=a,l.characterInFile=t,l.syntaxProblem=n,l}function ku(i,r){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(i);r&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),e.push.apply(e,t)}return e}function Du(i){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?ku(Object(e),!0).forEach(function(t){ke(i,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):ku(Object(e)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(e,t))})}return i}var ta=Du(Du({},sr),{},{supports:ke(ke(ke(ke(ke(ke(ke({},Ht.collections,!0),Ht.defaultGraphType,!1),Ht.equalsMethod,!0),Ht.identity,!1),Ht.id,!0),Ht.reversibleId,!1),Ht.variableType,!0),collection:function(r){return new Hr(r)},id:function(r){var e=this;return ca(r)?"( ".concat(r.elements.map(function(t){return e.id(t)}).join(", ")," )"):Ep(r)?hn.toString(r):sr.id(r)},termToNQ:function(r){return r.termType===Wr?Hr.toNT(r):sr.termToNQ(r)}});function Ea(i,r){return typeof r=="string"?i.rdfFactory.literal(r):Object.prototype.hasOwnProperty.call(r,"@list")?i.rdfFactory.supports.COLLECTIONS===!0?W0(i,r["@list"]):G0(i,r):Object.prototype.hasOwnProperty.call(r,"@id")?Aa(i,r):Object.prototype.hasOwnProperty.call(r,"@language")?i.rdfFactory.literal(r["@value"],r["@language"]):Object.prototype.hasOwnProperty.call(r,"@type")?i.rdfFactory.literal(r["@value"],i.rdfFactory.namedNode(r["@type"])):Object.prototype.hasOwnProperty.call(r,"@value")?i.rdfFactory.literal(r["@value"]):i.rdfFactory.literal(r)}function G0(i,r){var e=r["@id"]?Aa(i,r):i.rdfFactory.blankNode(),t=r["@list"].map(function(a){return Ea(i,a)}),n=Wc(i.rdfFactory,e,t);return i.addAll(n),e}function W0(i,r){if(!Array.isArray(r))throw new TypeError("Object must be an array");return i.rdfFactory.collection(r.map(function(e){return Ea(i,e)}))}function ed(i,r,e,t){var n=e&&Object.prototype.hasOwnProperty.call(e,"termType")?e.value:e;return X_(()=>import("../chunks/jsonld.OPIS_L8g.js").then(a=>a.j),__vite__mapDeps([0,1,2]),import.meta.url).then(function(a){return a.flatten(JSON.parse(i),null,{base:n})}).then(function(a){return a.reduce(function(s,l){return r=td(r,e,l),r},r)}).then(t).catch(t)}function Aa(i,r){return r["@id"].startsWith("_:")?i.rdfFactory.blankNode(r["@id"].substring(2)):i.rdfFactory.namedNode(r["@id"])}function td(i,r,e){for(var t=e["@id"]?Aa(i,e):i.rdfFactory.blankNode(),n=0,a=Object.keys(e);n<a.length;n++){var s=a[n];if(s!=="@id"){if(s=="@graph")for(var l=t,o=e[s],u=0;u<o.length;u++)i=td(i,l,o[u]);var f=e[s];if(Array.isArray(f))for(var d=0;d<f.length;d++)i.addStatement(Eu(i,t,s,f[d],r));else i.addStatement(Eu(i,t,s,f,r))}}return i}function Eu(i,r,e,t,n){var a,s;return e==="@type"?(a=i.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),s=i.rdfFactory.namedNode(t)):(a=i.rdfFactory.namedNode(e),s=Ea(i,t)),i.rdfFactory.quad(r,a,s,i.rdfFactory.namedNode(n))}/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let Au;var Q0=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:ua):i=>(Au||(Au=Promise.resolve())).then(i).catch(r=>setTimeout(()=>{throw r},0));const Y0=fs(Q0),ei="http://www.w3.org/1999/02/22-rdf-syntax-ns#",ti="http://www.w3.org/2001/XMLSchema#",Us="http://www.w3.org/2000/10/swap/",pr={xsd:{decimal:`${ti}decimal`,boolean:`${ti}boolean`,double:`${ti}double`,integer:`${ti}integer`,string:`${ti}string`},rdf:{type:`${ei}type`,nil:`${ei}nil`,first:`${ei}first`,rest:`${ei}rest`,langString:`${ei}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${Us}reify#forSome`,forAll:`${Us}reify#forAll`},log:{implies:`${Us}log#implies`}},{xsd:Xi}=pr,J0=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,Cu={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},Z0=/[\x00-\x20<>\\"\{\}\|\^\`]/,K0={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},eg=/$0^/;class tg{constructor(r){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,r=r||{},this._lineMode=!!r.lineMode){this._n3Mode=!1;for(const e in this)!(e in K0)&&this[e]instanceof RegExp&&(this[e]=eg)}else this._n3Mode=r.n3!==!1;this._comments=!!r.comments,this._literalClosingPos=0}_tokenizeToEnd(r,e){let t=this._input,n=t.length;for(;;){let l,o;for(;l=this._newline.exec(t);)this._comments&&(o=this._comment.exec(l[0]))&&a("comment",o[1],"",this._line,l[0].length),t=t.substr(l[0].length,t.length),n=t.length,this._line++;if(!l&&(l=this._whitespace.exec(t))&&(t=t.substr(l[0].length,t.length)),this._endOfFile.test(t))return e&&(this._comments&&(o=this._comment.exec(t))&&a("comment",o[1],"",this._line,t.length),t=null,a("eof","","",this._line,0)),this._input=t;const u=this._line,f=t[0];let d="",c="",h="",g=null,N=0,y=!1;switch(f){case"^":if(t.length<3)break;if(t[1]==="^"){if(this._previousMarker="^^",t=t.substr(2),t[0]!=="<"){y=!0;break}}else{this._n3Mode&&(N=1,d="^");break}case"<":if(g=this._unescapedIri.exec(t))d="IRI",c=g[1];else if(g=this._iri.exec(t)){if(c=this._unescape(g[1]),c===null||Z0.test(c))return s(this);d="IRI"}else t.length>1&&t[1]==="<"?(d="<<",N=2):this._n3Mode&&t.length>1&&t[1]==="="&&(d="inverse",N=2,c=">");break;case">":t.length>1&&t[1]===">"&&(d=">>",N=2);break;case"_":((g=this._blank.exec(t))||e&&(g=this._blank.exec(`${t} `)))&&(d="blank",h="_",c=g[1]);break;case'"':if(g=this._simpleQuotedString.exec(t))c=g[1];else if({value:c,matchLength:N}=this._parseLiteral(t),c===null)return s(this);(g!==null||N!==0)&&(d="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(g=this._simpleApostropheString.exec(t))c=g[1];else if({value:c,matchLength:N}=this._parseLiteral(t),c===null)return s(this);(g!==null||N!==0)&&(d="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(g=this._variable.exec(t))&&(d="var",c=g[0]);break;case"@":this._previousMarker==="literal"&&(g=this._langcode.exec(t))?(d="langcode",c=g[1]):(g=this._keyword.exec(t))&&(d=g[0]);break;case".":if(t.length===1?e:t[1]<"0"||t[1]>"9"){d=".",N=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(g=this._number.exec(t)||e&&(g=this._number.exec(`${t} `)))&&(d="literal",c=g[0],h=typeof g[1]=="string"?Xi.double:typeof g[2]=="string"?Xi.decimal:Xi.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(g=this._sparqlKeyword.exec(t))?d=g[0].toUpperCase():y=!0;break;case"f":case"t":(g=this._boolean.exec(t))?(d="literal",c=g[0],h=Xi.boolean):y=!0;break;case"a":(g=this._shortPredicates.exec(t))?(d="abbreviation",c="a"):y=!0;break;case"=":this._n3Mode&&t.length>1&&(d="abbreviation",t[1]!==">"?(N=1,c="="):(N=2,c=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(N=1,d=f);break;case"{":!this._lineMode&&t.length>=2&&(t[1]==="|"?(d="{|",N=2):(d=f,N=1));break;case"|":t.length>=2&&t[1]==="}"&&(d="|}",N=2);break;default:y=!0}if(y&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(g=this._prefix.exec(t))?(d="prefix",c=g[1]||""):((g=this._prefixed.exec(t))||e&&(g=this._prefixed.exec(`${t} `)))&&(d="prefixed",h=g[1]||"",c=this._unescape(g[2]))),this._previousMarker==="^^")switch(d){case"prefixed":d="type";break;case"IRI":d="typeIRI";break;default:d=""}if(!d)return e||!/^'''|^"""/.test(t)&&/\n|\r/.test(t)?s(this):this._input=t;const b=N||g[0].length,S=a(d,c,h,u,b);this.previousToken=S,this._previousMarker=d,t=t.substr(b,t.length)}function a(l,o,u,f,d){const c=t?n-t.length:n,h=c+d,g={type:l,value:o,prefix:u,line:f,start:c,end:h};return r(null,g),g}function s(l){r(l._syntaxError(/^\S*/.exec(t)[0]))}}_unescape(r){let e=!1;const t=r.replace(J0,(n,a,s,l)=>{if(typeof a=="string")return String.fromCharCode(Number.parseInt(a,16));if(typeof s=="string"){let o=Number.parseInt(s,16);return o<=65535?String.fromCharCode(Number.parseInt(s,16)):String.fromCharCode(55296+((o-=65536)>>10),56320+(o&1023))}return l in Cu?Cu[l]:(e=!0,"")});return e?null:t}_parseLiteral(r){if(r.length>=3){const e=r.match(/^(?:"""|"|'''|'|)/)[0],t=e.length;let n=Math.max(this._literalClosingPos,t);for(;(n=r.indexOf(e,n))>0;){let a=0;for(;r[n-a-1]==="\\";)a++;if(a%2===0){const s=r.substring(t,n),l=s.split(/\r\n|\r|\n/).length-1,o=n+t;if(t===1&&l!==0||t===3&&this._lineMode)break;return this._line+=l,{value:this._unescape(s),matchLength:o}}n++}this._literalClosingPos=r.length-t+1}return{value:"",matchLength:0}}_syntaxError(r){this._input=null;const e=new Error(`Unexpected "${r}" on line ${this._line}.`);return e.context={token:void 0,line:this._line,previousToken:this.previousToken},e}_readStartingBom(r){return r.startsWith("\uFEFF")?r.substr(1):r}tokenize(r,e){if(this._line=1,typeof r=="string")if(this._input=this._readStartingBom(r),typeof e=="function")Y0(()=>this._tokenizeToEnd(e,!0));else{const t=[];let n;if(this._tokenizeToEnd((a,s)=>a?n=a:t.push(s),!0),n)throw n;return t}else this._pendingBuffer=null,typeof r.setEncoding=="function"&&r.setEncoding("utf8"),r.on("data",t=>{this._input!==null&&t.length!==0&&(this._pendingBuffer&&(t=z_.Buffer.concat([this._pendingBuffer,t]),this._pendingBuffer=null),t[t.length-1]&128?this._pendingBuffer=t:(typeof this._input>"u"?this._input=this._readStartingBom(typeof t=="string"?t:t.toString()):this._input+=t,this._tokenizeToEnd(e,!1)))}),r.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(e,!0)}),r.on("error",e)}}const{rdf:rg,xsd:Nn}=pr;let _s,ng=0;const ig={namedNode:og,blankNode:fg,variable:dg,literal:cg,defaultGraph:hg,quad:Nu,triple:Nu};class Yr{constructor(r){this.id=r}get value(){return this.id}equals(r){return r instanceof Yr?this.id===r.id:!!r&&this.termType===r.termType&&this.value===r.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}let rd=class extends Yr{get termType(){return"NamedNode"}},xs=class nd extends Yr{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const r=this.id;let e=r.lastIndexOf('"')+1;return e<r.length&&r[e++]==="@"?r.substr(e).toLowerCase():""}get datatype(){return new rd(this.datatypeString)}get datatypeString(){const r=this.id,e=r.lastIndexOf('"')+1,t=e<r.length?r[e]:"";return t==="^"?r.substr(e+2):t!=="@"?Nn.string:rg.langString}equals(r){return r instanceof nd?this.id===r.id:!!r&&!!r.datatype&&this.termType===r.termType&&this.value===r.value&&this.language===r.language&&this.datatype.value===r.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}},sg=class extends Yr{constructor(r){super(`_:${r}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}},ag=class extends Yr{constructor(r){super(`?${r}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}},lg=class extends Yr{constructor(){return super(""),_s||this}get termType(){return"DefaultGraph"}equals(r){return this===r||!!r&&this.termType===r.termType}};_s=new lg;let ug=class extends Yr{constructor(r,e,t,n){super(""),this._subject=r,this._predicate=e,this._object=t,this._graph=n||_s}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(r){return!!r&&this._subject.equals(r.subject)&&this._predicate.equals(r.predicate)&&this._object.equals(r.object)&&this._graph.equals(r.graph)}};function og(i){return new rd(i)}function fg(i){return new sg(i||`n3-${ng++}`)}function cg(i,r){if(typeof r=="string")return new xs(`"${i}"@${r.toLowerCase()}`);let e=r?r.value:"";return e===""&&(typeof i=="boolean"?e=Nn.boolean:typeof i=="number"&&(Number.isFinite(i)?e=Number.isInteger(i)?Nn.integer:Nn.double:(e=Nn.double,Number.isNaN(i)||(i=i>0?"INF":"-INF")))),e===""||e===Nn.string?new xs(`"${i}"`):new xs(`"${i}"^^${e}`)}function dg(i){return new ag(i)}function hg(){return _s}function Nu(i,r,e,t){return new ug(i,r,e,t)}let Tu=0;class id{constructor(r){this._contextStack=[],this._graph=null,r=r||{},this._setBase(r.baseIRI),r.factory&&sd(this,r.factory);const e=typeof r.format=="string"?r.format.match(/\w*$/)[0].toLowerCase():"",t=/turtle/.test(e),n=/trig/.test(e),a=/triple/.test(e),s=/quad/.test(e),l=this._n3Mode=/n3/.test(e),o=a||s;(this._supportsNamedGraphs=!(t||l))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(t||n||a||l),this._supportsRDFStar=e===""||/star|\*$/.test(e),o&&(this._resolveRelativeIRI=u=>null),this._blankNodePrefix=typeof r.blankNodePrefix!="string"?"":r.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=r.lexer||new tg({lineMode:o,n3:l}),this._explicitQuantifiers=!!r.explicitQuantifiers}static _resetBlankNodePrefix(){Tu=0}_setBase(r){if(!r)this._base="",this._basePath="";else{const e=r.indexOf("#");e>=0&&(r=r.substr(0,e)),this._base=r,this._basePath=r.indexOf("/")<0?r:r.replace(/[^\/?]*(?:\?.*)?$/,""),r=r.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=r[0],this._baseScheme=r[1]}}_saveContext(r,e,t,n,a){const s=this._n3Mode;this._contextStack.push({type:r,subject:t,predicate:n,object:a,graph:e,inverse:s?this._inversePredicate:!1,blankPrefix:s?this._prefixes._:"",quantified:s?this._quantified:null}),s&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(r,e){const t=this._contextStack.pop();if(!t||t.type!==r)return this._error(`Unexpected ${e.type}`,e);this._subject=t.subject,this._predicate=t.predicate,this._object=t.object,this._graph=t.graph,this._n3Mode&&(this._inversePredicate=t.inverse,this._prefixes._=t.blankPrefix,this._quantified=t.quantified)}_readInTopContext(r){switch(r.type){case"eof":return this._graph!==null?this._error("Unclosed graph",r):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(r)}}_readEntity(r,e){let t;switch(r.type){case"IRI":case"typeIRI":const n=this._resolveIRI(r.value);if(n===null)return this._error("Invalid IRI",r);t=this._namedNode(n);break;case"type":case"prefixed":const a=this._prefixes[r.prefix];if(a===void 0)return this._error(`Undefined prefix "${r.prefix}:"`,r);t=this._namedNode(a+r.value);break;case"blank":t=this._blankNode(this._prefixes[r.prefix]+r.value);break;case"var":t=this._variable(r.value.substr(1));break;default:return this._error(`Expected entity but got ${r.type}`,r)}return!e&&this._n3Mode&&t.id in this._quantified&&(t=this._quantified[t.id]),t}_readSubject(r){switch(this._predicate=null,r.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",r);case"}":return this._readPunctuation(r);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',r);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',r);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",r);if(r.prefix.length===0)return this._literalValue=r.value,this._completeSubjectLiteral;this._subject=this._literal(r.value,this._namedNode(r.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",r);default:if((this._subject=this._readEntity(r))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(r){const e=r.type;switch(e){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[r.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${e}`,r):(this._subject=null,e==="]"?this._readBlankNodeTail(r):this._readPunctuation(r));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",r);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",r);default:if((this._predicate=this._readEntity(r))===void 0)return}return this._readObject}_readObject(r){switch(r.type){case"literal":if(r.prefix.length===0)return this._literalValue=r.value,this._readDataTypeOrLang;this._object=this._literal(r.value,this._namedNode(r.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",r);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",r);default:if((this._object=this._readEntity(r))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(r){return r.type==="{"?this._readGraph(r):this._readPredicate(r)}_readGraph(r){return r.type!=="{"?this._error(`Expected graph but got ${r.type}`,r):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(r){return r.type==="]"?(this._subject=null,this._readBlankNodeTail(r)):(this._predicate=null,this._readPredicate(r))}_readBlankNodeTail(r){if(r.type!=="]")return this._readBlankNodePunctuation(r);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const e=this._predicate===null;return this._restoreContext("blank",r),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:e?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(r){switch(r.type){case".":case"}":return this._subject=null,this._readPunctuation(r);default:return this._readPredicate(r)}}_readListItem(r){let e=null,t=null,n=this._readListItem;const a=this._subject,s=this._contextStack,l=s[s.length-1];switch(r.type){case"[":this._saveContext("blank",this._graph,t=this._blankNode(),this.RDF_FIRST,this._subject=e=this._blankNode()),n=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,t=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",r),s.length!==0&&s[s.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(n=this._readPredicate,this._subject===this.RDF_NIL)return n}else if(n=this._getContextEndReader(),this._object===this.RDF_NIL)return n;t=this.RDF_NIL;break;case"literal":r.prefix.length===0?(this._literalValue=r.value,n=this._readListItemDataTypeOrLang):(e=this._literal(r.value,this._namedNode(r.prefix)),n=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",r);default:if((e=this._readEntity(r))===void 0)return}if(t===null&&(this._subject=t=this._blankNode()),a===null?l.predicate===null?l.subject=t:l.object=t:this._emit(a,this.RDF_REST,t,this._graph),e!==null){if(this._n3Mode&&(r.type==="IRI"||r.type==="prefixed"))return this._saveContext("item",this._graph,t,this.RDF_FIRST,e),this._subject=e,this._predicate=null,this._getPathReader(this._readListItem);this._emit(t,this.RDF_FIRST,e,this._graph)}return n}_readDataTypeOrLang(r){return this._completeObjectLiteral(r,!1)}_readListItemDataTypeOrLang(r){return this._completeObjectLiteral(r,!0)}_completeLiteral(r){let e=this._literal(this._literalValue);switch(r.type){case"type":case"typeIRI":const t=this._readEntity(r);if(t===void 0)return;e=this._literal(this._literalValue,t),r=null;break;case"langcode":e=this._literal(this._literalValue,r.value),r=null;break}return{token:r,literal:e}}_completeSubjectLiteral(r){return this._subject=this._completeLiteral(r).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(r,e){const t=this._completeLiteral(r);if(t)return this._object=t.literal,e&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),t.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(t.token))}_readFormulaTail(r){return r.type!=="}"?this._readPunctuation(r):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",r),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(r){let e,t=this._graph;const n=this._subject,a=this._inversePredicate;switch(r.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",r);if(this._n3Mode)return this._readFormulaTail(r);this._graph=null;case".":this._subject=null,e=this._contextStack.length?this._readSubject:this._readInTopContext,a&&(this._inversePredicate=!1);break;case";":e=this._readPredicate;break;case",":e=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",r);const s=this._predicate,l=this._object;this._subject=this._quad(n,s,l,this.DEFAULTGRAPH),e=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",r);this._subject=null,e=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(t=this._readEntity(r))!==void 0){e=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,r)}if(n!==null){const s=this._predicate,l=this._object;a?this._emit(l,s,n,t):this._emit(n,s,l,t)}return e}_readBlankNodePunctuation(r){let e;switch(r.type){case";":e=this._readPredicate;break;case",":e=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,r)}return this._emit(this._subject,this._predicate,this._object,this._graph),e}_readQuadPunctuation(r){return r.type!=="."?this._error("Expected dot to follow quad",r):this._readInTopContext}_readPrefix(r){return r.type!=="prefix"?this._error("Expected prefix to follow @prefix",r):(this._prefix=r.value,this._readPrefixIRI)}_readPrefixIRI(r){if(r.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,r);const e=this._readEntity(r);return this._prefixes[this._prefix]=e.value,this._prefixCallback(this._prefix,e),this._readDeclarationPunctuation}_readBaseIRI(r){const e=r.type==="IRI"&&this._resolveIRI(r.value);return e?(this._setBase(e),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",r)}_readNamedGraphLabel(r){switch(r.type){case"IRI":case"blank":case"prefixed":return this._readSubject(r),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",r)}}_readNamedGraphBlankLabel(r){return r.type!=="]"?this._error("Invalid graph label",r):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(r){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(r)):r.type!=="."?this._error("Expected declaration to end with a dot",r):this._readInTopContext}_readQuantifierList(r){let e;switch(r.type){case"IRI":case"prefixed":if((e=this._readEntity(r,!0))!==void 0)break;default:return this._error(`Unexpected ${r.type}`,r)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,e,this.QUANTIFIERS_GRAPH)):this._quantified[e.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(r){return r.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(r))}_getPathReader(r){return this._afterPath=r,this._readPath}_readPath(r){switch(r.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const e=this._contextStack,t=e.length&&e[e.length-1];if(t&&t.type==="item"){const n=this._subject;this._restoreContext("item",r),this._emit(this._subject,this.RDF_FIRST,n,this._graph)}return this._afterPath(r)}}_readForwardPath(r){let e,t;const n=this._blankNode();if((t=this._readEntity(r))!==void 0)return this._predicate===null?(e=this._subject,this._subject=n):(e=this._object,this._object=n),this._emit(e,t,n,this._graph),this._readPath}_readBackwardPath(r){const e=this._blankNode();let t,n;if((t=this._readEntity(r))!==void 0)return this._predicate===null?(n=this._subject,this._subject=e):(n=this._object,this._object=e),this._emit(e,t,n,this._graph),this._readPath}_readRDFStarTailOrGraph(r){return r.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(r))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,r):this._readRDFStarTail(r)}_readRDFStarTail(r){if(r.type!==">>")return this._error(`Expected >> but got ${r.type}`,r);const e=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",r),this._subject===null?(this._subject=e,this._readPredicate):(this._object=e,this._getContextEndReader())}_getContextEndReader(){const r=this._contextStack;if(!r.length)return this._readPunctuation;switch(r[r.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(r,e,t,n){this._callback(null,this._quad(r,e,t,n||this.DEFAULTGRAPH))}_error(r,e){const t=new Error(`${r} on line ${e.line}.`);t.context={token:e,line:e.line,previousToken:this._lexer.previousToken},this._callback(t),this._callback=Vs}_resolveIRI(r){return/^[a-z][a-z0-9+.-]*:/i.test(r)?r:this._resolveRelativeIRI(r)}_resolveRelativeIRI(r){if(!r.length)return this._base;switch(r[0]){case"#":return this._base+r;case"?":return this._base.replace(/(?:\?.*)?$/,r);case"/":return(r[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(r);default:return/^[^/:]*:/.test(r)?null:this._removeDotSegments(this._basePath+r)}}_removeDotSegments(r){if(!/(^|\/)\.\.?($|[/#?])/.test(r))return r;const e=r.length;let t="",n=-1,a=-1,s=0,l="/";for(;n<e;){switch(l){case":":if(a<0&&r[++n]==="/"&&r[++n]==="/")for(;(a=n+1)<e&&r[a]!=="/";)n=a;break;case"?":case"#":n=e;break;case"/":if(r[n+1]===".")switch(l=r[++n+1],l){case"/":t+=r.substring(s,n-1),s=n+1;break;case void 0:case"?":case"#":return t+r.substring(s,n)+r.substr(n+1);case".":if(l=r[++n+1],l===void 0||l==="/"||l==="?"||l==="#"){if(t+=r.substring(s,n-2),(s=t.lastIndexOf("/"))>=a&&(t=t.substr(0,s)),l!=="/")return`${t}/${r.substr(n+1)}`;s=n+1}}}l=r[++n]}return t+r.substring(s)}parse(r,e,t){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${Tu++}_`,this._prefixCallback=t||Vs,this._inversePredicate=!1,this._quantified=Object.create(null),!e){const n=[];let a;if(this._callback=(s,l)=>{s?a=s:l&&n.push(l)},this._lexer.tokenize(r).every(s=>this._readCallback=this._readCallback(s)),a)throw a;return n}this._callback=e,this._lexer.tokenize(r,(n,a)=>{n!==null?(this._callback(n),this._callback=Vs):this._readCallback&&(this._readCallback=this._readCallback(a))})}}function Vs(){}function sd(i,r){const e=r.namedNode;i._namedNode=e,i._blankNode=r.blankNode,i._literal=r.literal,i._variable=r.variable,i._quad=r.quad,i.DEFAULTGRAPH=r.defaultGraph(),i.RDF_FIRST=e(pr.rdf.first),i.RDF_REST=e(pr.rdf.rest),i.RDF_NIL=e(pr.rdf.nil),i.N3_FORALL=e(pr.r.forAll),i.N3_FORSOME=e(pr.r.forSome),i.ABBREVIATIONS={a:e(pr.rdf.type),"=":e(pr.owl.sameAs),">":e(pr.log.implies)},i.QUANTIFIERS_GRAPH=e("urn:n3:quantifiers")}sd(id.prototype,ig);if(typeof Vr>"u")var Vr={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};var nr=function(){function i(r,e){gt(this,i),this.options=e||{},this.kb=r,this.target=e.target||{graph:{subjects:{},prefixes:{},terms:{}}},this.blankNodes=[],this.htmlOptions={selfClosing:"br img input area base basefont col colgroup source wbr isindex link meta param hr"},this.theOne="_:"+new Date().getTime(),this.language=null,this.vocabulary=null,this.blankCounter=0,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}],this.inXHTMLMode=!1,this.absURIRE=/[\w\_\-]+:\S+/,this.finishedHandlers=[],this.init()}return pt(i,[{key:"addTriple",value:function(e,t,n,a){var s,l,o,u;typeof t>"u"?s=sr.namedNode(this.options.base):s=this.toRDFNodeObject(t),o=this.toRDFNodeObject(n),l=this.toRDFNodeObject(a),u=sr.namedNode(this.options.base),this.kb.add(s,o,l,u)}},{key:"ancestorPath",value:function(e){for(var t="";e&&e.nodeType!==Vr.DOCUMENT_NODE;)t="/"+e.localName+t,e=e.parentNode;return t}},{key:"copyMappings",value:function(e){var t={};for(var n in e)t[n]=e[n];return t}},{key:"copyProperties",value:function(){}},{key:"deriveDateTimeType",value:function(e){for(var t=0;t<i.dateTimeTypes.length;t++){var n=i.dateTimeTypes[t].pattern.exec(e);if(n&&n[0].length===e.length)return i.dateTimeTypes[t].type}return null}},{key:"init",value:function(){}},{key:"newBlankNode",value:function(){return this.blankCounter++,"_:"+this.blankCounter}},{key:"newSubjectOrigin",value:function(e,t){}},{key:"parseCURIE",value:function(e,t,n){var a=e.indexOf(":"),s;if(a>=0){var l=e.substring(0,a);if(l==="")return s=t[""],s?s+e.substring(a+1):null;if(l==="_")return"_:"+e.substring(a+1);if(i.NCNAME.test(l)&&(s=t[l],s))return s+e.substring(a+1)}return null}},{key:"parseCURIEOrURI",value:function(e,t,n){var a=this.parseCURIE(e,t,n);return a||this.resolveAndNormalize(n,e)}},{key:"parsePredicate",value:function(e,t,n,a,s,l){if(e==="")return null;var o=this.parseTermOrCURIEOrAbsURI(e,t,l?null:n,a,s);return o&&o.indexOf("_:")===0?null:o}},{key:"parsePrefixMappings",value:function(e,t){for(var n=this.tokenize(e),a=null,s=0;s<n.length;s++)n[s][n[s].length-1]===":"?a=n[s].substring(0,n[s].length-1):a&&(t[a]=this.options.base?rr(n[s],this.options.base):n[s],a=null)}},{key:"parseSafeCURIEOrCURIEOrURI",value:function(e,t,n){return e=this.trim(e),e.charAt(0)==="["&&e.charAt(e.length-1)==="]"?(e=e.substring(1,e.length-1),e=e.trim(e),e.length===0?null:e==="_:"?this.theOne:this.parseCURIE(e,t,n)):this.parseCURIEOrURI(e,t,n)}},{key:"parseTermOrCURIEOrAbsURI",value:function(e,t,n,a,s){e=this.trim(e);var l=this.parseCURIE(e,a,s);if(l)return l;if(n){if(t&&!this.absURIRE.exec(e))return t+e;var o=n[e];if(o)return o;var u=e.toLowerCase();if(o=n[u],o)return o}return this.absURIRE.exec(e)?this.resolveAndNormalize(s,e):null}},{key:"parseTermOrCURIEOrURI",value:function(e,t,n,a,s){e=this.trim(e);var l=this.parseCURIE(e,a,s);if(l)return l;var o=n[e];if(o)return o;var u=e.toLowerCase();return o=n[u],o||(t&&!this.absURIRE.exec(e)?t+e:this.resolveAndNormalize(s,e))}},{key:"parseURI",value:function(e){return e}},{key:"process",value:function(e,t){t=t||{};var n;e.nodeType===Vr.DOCUMENT_NODE?(e.baseURI&&!t.baseURI&&(t.baseURI=e.baseURI),n=e.baseURI,e=e.documentElement,e.baseURI||(e.baseURI=n),this.setContext(e)):e.parentNode.nodeType===Vr.DOCUMENT_NODE&&this.setContext(e);var a=[],s=function(Nr){if(!Nr&&t&&t.baseURI)return t.baseURI;var Xn=Nr.indexOf("#");return Xn>=0&&(Nr=Nr.substring(0,Xn)),t&&t.baseURIMap&&(Nr=t.baseURIMap(Nr)),Nr};for(a.push({current:e,context:this.push(null,s(e.baseURI))});a.length>0;){var l=a.shift();if(l.parent){if(l.context.parent&&l.context.parent.listMapping===l.listMapping)continue;for(var o in l.listMapping){var u=l.listMapping[o];if(u.length===0){this.addTriple(l.parent,l.subject,o,{type:i.objectURI,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});continue}for(var f=[],d=0;d<u.length;d++)f.push(this.newBlankNode());for(var c=0;c<f.length;c++)this.addTriple(l.parent,f[c],"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",u[c]),this.addTriple(l.parent,f[c],"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",{type:i.objectURI,value:c+1<f.length?f[c+1]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});this.addTriple(l.parent,l.subject,o,{type:i.objectURI,value:f[0]})}continue}var h=l.current,g=l.context,N=!1,y=null,b=null,S=null,D=g.prefixes,A=!1,v=[],E=g.listMapping,w=!g.parent,B=g.language,I=g.vocabulary;n=this.parseURI(s(h.baseURI)),h.item=null;var L=h.getAttributeNode("vocab");if(L){var k=this.trim(L.value);if(k.length>0){I=k;var j=n.spec;this.addTriple(h,j,"http://www.w3.org/ns/rdfa#usesVocabulary",{type:i.objectURI,value:I})}else I=this.vocabulary}for(var O=0;O<h.attributes.length;O++){var R=h.attributes[O];if(R.nodeName.charAt(0)==="x"&&R.nodeName.indexOf("xmlns:")===0){A||(D=this.copyMappings(D),A=!0);var G=R.nodeName.substring(6),Q=i.trim(R.value);D[G]=this.options.base?rr(Q,this.options.base):Q}}var oe=h.getAttributeNode("prefix");oe&&(A||(D=this.copyMappings(D),A=!0),this.parsePrefixMappings(oe.value,D));for(var ee=null,X=0;!ee&&X<this.langAttributes.length;X++)ee=h.getAttributeNodeNS(this.langAttributes[X].namespaceURI,this.langAttributes[X].localName);if(ee){var H=i.trim(ee.value);H.length>0?B=H:B=null}var V=h.getAttributeNode("rel"),W=h.getAttributeNode("rev"),M=h.getAttributeNode("typeof"),J=h.getAttributeNode("property"),Fe=h.getAttributeNode("datatype"),Le=this.inHTMLMode?h.getAttributeNode("datetime"):null,de=h.getAttributeNode("content"),_e=h.getAttributeNode("about"),ue=h.getAttributeNode("src"),Ee=h.getAttributeNode("resource"),Xe=h.getAttributeNode("href"),ct=h.getAttributeNode("inlist"),We=[],he,Ie;if(V){Ie=this.tokenize(V.value);for(var Ne=0;Ne<Ie.length;Ne++)he=this.parsePredicate(Ie[Ne],I,g.terms,D,n,this.inHTMLMode&&J!==null),he&&We.push(he)}var Ue=[];if(W){Ie=this.tokenize(W.value);for(var je=0;je<Ie.length;je++)he=this.parsePredicate(Ie[je],I,g.terms,D,n,this.inHTMLMode&&J),he&&Ue.push(he)}if(this.inHTMLMode&&(V||W)&&J&&(We.length===0&&(V=null),Ue.length===0&&(W=null)),V||W?(_e&&(y=this.parseSafeCURIEOrCURIEOrURI(_e.value,D,n)),M&&(S=y),y||(h.parentNode.nodeType===Vr.DOCUMENT_NODE?y=s(h.baseURI):g.parentObject&&(y=s(h.parentNode.baseURI)===g.parentObject?s(h.baseURI):g.parentObject)),Ee&&(b=this.parseSafeCURIEOrCURIEOrURI(Ee.value,D,n)),b||(Xe?b=this.resolveAndNormalize(n,encodeURI(Xe.value)):ue?b=this.resolveAndNormalize(n,encodeURI(ue.value)):M&&!_e&&!(this.inXHTMLMode&&(h.localName==="head"||h.localName==="body"))&&(b=this.newBlankNode())),M&&!_e&&this.inXHTMLMode&&(h.localName==="head"||h.localName==="body")?S=y:M&&!_e&&(S=b)):J&&!de&&!Fe?(_e&&(y=this.parseSafeCURIEOrCURIEOrURI(_e.value,D,n),M&&(S=y)),!y&&h.parentNode.nodeType===Vr.DOCUMENT_NODE?(y=s(h.baseURI),M&&(S=y)):!y&&g.parentObject&&(y=s(h.parentNode.baseURI)===g.parentObject?s(h.baseURI):g.parentObject),M&&!S&&(Ee&&(S=this.parseSafeCURIEOrCURIEOrURI(Ee.value,D,n)),!S&&Xe&&(S=this.resolveAndNormalize(n,encodeURI(Xe.value))),!S&&ue&&(S=this.resolveAndNormalize(n,encodeURI(ue.value))),!S&&(this.inXHTMLMode||this.inHTMLMode)&&(h.localName==="head"||h.localName==="body")&&(S=y),S||(S=this.newBlankNode()),b=S)):(_e&&(y=this.parseSafeCURIEOrCURIEOrURI(_e.value,D,n)),!y&&Ee&&(y=this.parseSafeCURIEOrCURIEOrURI(Ee.value,D,n)),!y&&Xe&&(y=this.resolveAndNormalize(n,encodeURI(Xe.value))),!y&&ue&&(y=this.resolveAndNormalize(n,encodeURI(ue.value))),y||(h.parentNode.nodeType===Vr.DOCUMENT_NODE?y=s(h.baseURI):(this.inXHTMLMode||this.inHTMLMode)&&(h.localName==="head"||h.localName==="body")?y=s(h.parentNode.baseURI)===g.parentObject?s(h.baseURI):g.parentObject:M?y=this.newBlankNode():g.parentObject&&(y=s(h.parentNode.baseURI)===g.parentObject?s(h.baseURI):g.parentObject,J||(N=!0))),M&&(S=y)),y&&(_e||Ee||S)){var ze=y;M&&!_e&&!Ee&&b&&(ze=b),this.newSubjectOrigin(h,ze)}if(S){Ie=this.tokenize(M.value);for(var rt=0;rt<Ie.length;rt++){var jt=this.parseTermOrCURIEOrAbsURI(Ie[rt],I,g.terms,D,n);jt&&this.addTriple(h,S,i.typeURI,{type:i.objectURI,value:jt})}}if(y&&y!==g.parentObject&&(E={},w=!0),b){if(V&&ct)for(var Mt=0;Mt<We.length;Mt++){var ir=E[We[Mt]];ir||(ir=[],E[We[Mt]]=ir),ir.push({type:i.objectURI,value:b})}else if(V)for(var ut=0;ut<We.length;ut++)this.addTriple(h,y,We[ut],{type:i.objectURI,value:b});if(W)for(var Te=0;Te<Ue.length;Te++)this.addTriple(h,b,Ue[Te],{type:i.objectURI,value:y})}else{if(y&&!b&&(V||W)&&(b=this.newBlankNode()),V&&ct)for(var Be=0;Be<We.length;Be++){var tt=E[We[Be]];tt||(tt=[],E[he]=tt),v.push({predicate:We[Be],list:tt})}else if(V)for(var Rt=0;Rt<We.length;Rt++)v.push({predicate:We[Rt],forward:!0});if(W)for(var Yt=0;Yt<Ue.length;Yt++)v.push({predicate:Ue[Yt],forward:!1})}if(J){var nt=null,Et=null;Fe?(nt=Fe.value===""?i.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(Fe.value,I,g.terms,D,n),Le&&!de?Et=Le.value:Et=nt===i.XMLLiteralURI||nt===i.HTMLLiteralURI?null:de?de.value:h.textContent):de?(nt=i.PlainLiteralURI,Et=de.value):Le?(Et=Le.value,nt=i.deriveDateTimeType(Et),nt||(nt=i.PlainLiteralURI)):!V&&!W&&(Ee&&(Et=this.parseSafeCURIEOrCURIEOrURI(Ee.value,D,n)),!Et&&Xe?Et=this.resolveAndNormalize(n,encodeURI(Xe.value)):!Et&&ue&&(Et=this.resolveAndNormalize(n,encodeURI(ue.value))),Et&&(nt=i.objectURI)),nt||(M&&!_e?(nt=i.objectURI,Et=S):(Et=h.textContent,this.inHTMLMode&&h.localName==="time"&&(nt=i.deriveDateTimeType(Et)),nt||(nt=i.PlainLiteralURI))),Ie=this.tokenize(J.value);for(var zn=0;zn<Ie.length;zn++){var Kr=this.parsePredicate(Ie[zn],I,g.terms,D,n);if(Kr)if(ct){var vn=E[Kr];vn||(vn=[],E[Kr]=vn),vn.push(nt===i.XMLLiteralURI||nt===i.HTMLLiteralURI?{type:nt,value:h.childNodes}:{type:nt||i.PlainLiteralURI,value:Et,language:B})}else nt===i.XMLLiteralURI||nt===i.HTMLLiteralURI?this.addTriple(h,y,Kr,{type:nt,value:h.childNodes}):this.addTriple(h,y,Kr,{type:nt||i.PlainLiteralURI,value:Et,language:B})}}if(y&&!N)for(var Cr=0;Cr<g.incomplete.length;Cr++)g.incomplete[Cr].list?g.incomplete[Cr].list.push({type:i.objectURI,value:y}):g.incomplete[Cr].forward?this.addTriple(h,g.subject,g.incomplete[Cr].predicate,{type:i.objectURI,value:y}):this.addTriple(h,y,g.incomplete[Cr].predicate,{type:i.objectURI,value:g.subject});var Bt=null,Ei=y;N?(Bt=this.push(g,g.subject),Bt.parentObject=s(h.parentNode.baseURI)===g.parentObject?s(h.baseURI):g.parentObject,Bt.incomplete=g.incomplete,Bt.language=B,Bt.prefixes=D,Bt.vocabulary=I):(Bt=this.push(g,y),Bt.parentObject=b||y||g.subject,Bt.prefixes=D,Bt.incomplete=v,b&&(Ei=b,E={},w=!0),Bt.listMapping=E,Bt.language=B,Bt.vocabulary=I),w&&a.unshift({parent:h,context:g,subject:Ei,listMapping:E});for(var en=h.lastChild;en;en=en.previousSibling)en.nodeType===Vr.ELEMENT_NODE&&a.unshift({current:en,context:Bt})}this.inHTMLMode&&this.copyProperties();for(var bn=0;bn<this.finishedHandlers.length;bn++)this.finishedHandlers[bn](e)}},{key:"push",value:function(e,t){return{parent:e,subject:t||(e?e.subject:null),parentObject:null,incomplete:[],listMapping:e?e.listMapping:{},language:e?e.language:this.language,prefixes:e?e.prefixes:this.target.graph.prefixes,terms:e?e.terms:this.target.graph.terms,vocabulary:e?e.vocabulary:this.vocabulary}}},{key:"resolveAndNormalize",value:function(e,t){return rr(t,e)}},{key:"setContext",value:function(e){e.localName==="html"&&e.getAttribute("version")==="XHTML+RDFa 1.1"?this.setXHTMLContext():e.localName==="html"||e.namespaceURI==="http://www.w3.org/1999/xhtml"?typeof document<"u"&&document.doctype?document.doctype.publicId==="-//W3C//DTD XHTML+RDFa 1.0//EN"&&document.doctype.systemId==="http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"?(console.log("WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode."),this.setHTMLContext()):document.doctype.publicId==="-//W3C//DTD XHTML+RDFa 1.1//EN"&&document.doctype.systemId==="http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"?this.setXHTMLContext():this.setHTMLContext():this.setHTMLContext():this.setXMLContext()}},{key:"setHTMLContext",value:function(){this.setInitialContext(),this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.inXHTMLMode=!1,this.inHTMLMode=!0}},{key:"setInitialContext",value:function(){this.vocabulary=null,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}]}},{key:"setXHTMLContext",value:function(){this.setInitialContext(),this.inXHTMLMode=!0,this.inHTMLMode=!1,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.target.graph.terms.alternate="http://www.w3.org/1999/xhtml/vocab#alternate",this.target.graph.terms.appendix="http://www.w3.org/1999/xhtml/vocab#appendix",this.target.graph.terms.bookmark="http://www.w3.org/1999/xhtml/vocab#bookmark",this.target.graph.terms.cite="http://www.w3.org/1999/xhtml/vocab#cite",this.target.graph.terms.chapter="http://www.w3.org/1999/xhtml/vocab#chapter",this.target.graph.terms.contents="http://www.w3.org/1999/xhtml/vocab#contents",this.target.graph.terms.copyright="http://www.w3.org/1999/xhtml/vocab#copyright",this.target.graph.terms.first="http://www.w3.org/1999/xhtml/vocab#first",this.target.graph.terms.glossary="http://www.w3.org/1999/xhtml/vocab#glossary",this.target.graph.terms.help="http://www.w3.org/1999/xhtml/vocab#help",this.target.graph.terms.icon="http://www.w3.org/1999/xhtml/vocab#icon",this.target.graph.terms.index="http://www.w3.org/1999/xhtml/vocab#index",this.target.graph.terms.last="http://www.w3.org/1999/xhtml/vocab#last",this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license",this.target.graph.terms.meta="http://www.w3.org/1999/xhtml/vocab#meta",this.target.graph.terms.next="http://www.w3.org/1999/xhtml/vocab#next",this.target.graph.terms.prev="http://www.w3.org/1999/xhtml/vocab#prev",this.target.graph.terms.previous="http://www.w3.org/1999/xhtml/vocab#previous",this.target.graph.terms.section="http://www.w3.org/1999/xhtml/vocab#section",this.target.graph.terms.stylesheet="http://www.w3.org/1999/xhtml/vocab#stylesheet",this.target.graph.terms.subsection="http://www.w3.org/1999/xhtml/vocab#subsection",this.target.graph.terms.start="http://www.w3.org/1999/xhtml/vocab#start",this.target.graph.terms.top="http://www.w3.org/1999/xhtml/vocab#top",this.target.graph.terms.up="http://www.w3.org/1999/xhtml/vocab#up",this.target.graph.terms.p3pv1="http://www.w3.org/1999/xhtml/vocab#p3pv1",this.target.graph.terms.related="http://www.w3.org/1999/xhtml/vocab#related",this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role",this.target.graph.terms.transformation="http://www.w3.org/1999/xhtml/vocab#transformation"}},{key:"setXMLContext",value:function(){this.setInitialContext(),this.inXHTMLMode=!1,this.inHTMLMode=!1}},{key:"tokenize",value:function(e){return this.trim(e).split(/\s+/)}},{key:"toRDFNodeObject",value:function(e){var t=this;if(!(typeof e>"u")){if(typeof e=="string")return e.substring(0,2)==="_:"?(typeof this.blankNodes[e.substring(2)]>"u"&&(this.blankNodes[e.substring(2)]=new br(e.substring(2))),this.blankNodes[e.substring(2)]):sr.namedNode(e);switch(e.type){case i.objectURI:return e.value.substring(0,2)==="_:"?(typeof this.blankNodes[e.value.substring(2)]>"u"&&(this.blankNodes[e.value.substring(2)]=new br(e.value.substring(2))),this.blankNodes[e.value.substring(2)]):sr.namedNode(e.value);case i.PlainLiteralURI:return new gr(e.value,e.language||"");case i.XMLLiteralURI:case i.HTMLLiteralURI:var n="";return Object.keys(e.value).forEach(function(a){n+=c0(e.value[a],t.htmlOptions)}),new gr(n,"",new Pt(e.type));default:return new gr(e.value,"",new Pt(e.type))}}}},{key:"trim",value:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}],[{key:"parseRDFaDOM",value:function(e,t,n){var a=new i(t,{base:n});e.baseURI||(e.baseURI=n),a.process(e,{baseURI:n})}},{key:"tokenize",value:function(e){return this.trim(e).split(/\s+/)}},{key:"trim",value:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}])}();nr.XMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral";nr.HTMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML";nr.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral";nr.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object";nr.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";nr.nameChar="[-A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�က0-F.0-9·̀-ͯ‿-⁀]";nr.nameStartChar="[A-Za-zÀ-ÖØ-öø-ÿĀ-ıĴ-ľŁ-ňŊ-žƀ-ǃǍ-ǰǴ-ǵǺ-ȗɐ-ʨʻ-ˁΆΈ-ΊΌΎ-ΡΣ-ώϐ-ϖϚϜϞϠϢ-ϳЁ-ЌЎ-яё-ќў-ҁҐ-ӄӇ-ӈӋ-ӌӐ-ӫӮ-ӵӸ-ӹԱ-Ֆՙա-ֆא-תװ-ײء-غف-يٱ-ڷں-ھۀ-ێې-ۓەۥ-ۦअ-हऽक़-ॡঅ-ঌএ-ঐও-নপ-রলশ-হড়-ঢ়য়-ৡৰ-ৱਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઋઍએ-ઑઓ-નપ-રલ-ળવ-હઽૠଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଶ-ହଽଡ଼-ଢ଼ୟ-ୡஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-வஷ-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠ-ౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹೞೠ-ೡഅ-ഌഎ-ഐഒ-നപ-ഹൠ-ൡก-ฮะา-ำเ-ๅກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ຮະາ-ຳຽເ-ໄཀ-ཇཉ-ཀྵႠ-Ⴥა-ჶᄀᄂ-ᄃᄅ-ᄇᄉᄋ-ᄌᄎ-ᄒᄼᄾᅀᅌᅎᅐᅔ-ᅕᅙᅟ-ᅡᅣᅥᅧᅩᅭ-ᅮᅲ-ᅳᅵᆞᆨᆫᆮ-ᆯᆷ-ᆸᆺᆼ-ᇂᇫᇰᇹḀ-ẛẠ-ỹἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼΩK-Å℮ↀ-ↂぁ-ゔァ-ヺㄅ-ㄬ가-힣一-龥〇〡-〩_]";nr.NCNAME=new RegExp("^"+nr.nameStartChar+nr.nameChar+"*$");nr.dateTimeTypes=[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:"http://www.w3.org/2001/XMLSchema#duration"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#dateTime"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#date"},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#time"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:"http://www.w3.org/2001/XMLSchema#gYearMonth"},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:"http://www.w3.org/2001/XMLSchema#gYear"}];var ss=nr.parseRDFaDOM,ps=function(){function i(r){gt(this,i),this.store=r,this.bnodes={},this.why=null,this.reify=!1}return pt(i,[{key:"frameFactory",value:function(e,t,n){return{NODE:1,ARC:2,parent:t,parser:e,store:e.store,element:n,lastChild:0,base:null,lang:null,node:null,nodeType:null,listIndex:1,rdfid:null,datatype:null,collection:!1,terminateFrame:function(){this.collection&&this.node.close()},addSymbol:function(s,l){l=rr(l,this.base),this.node=this.store.sym(l),this.nodeType=s},loadTriple:function(){if(this.parent.parent.collection?this.parent.parent.node.append(this.node):this.store.add(this.parent.parent.node,this.parent.node,this.node,this.parser.why),this.parent.rdfid!=null){var s=this.store.sym(rr("#"+this.parent.rdfid,this.base));this.store.add(s,this.store.sym(i.ns.RDF+"type"),this.store.sym(i.ns.RDF+"Statement"),this.parser.why),this.store.add(s,this.store.sym(i.ns.RDF+"subject"),this.parent.parent.node,this.parser.why),this.store.add(s,this.store.sym(i.ns.RDF+"predicate"),this.parent.node,this.parser.why),this.store.add(s,this.store.sym(i.ns.RDF+"object"),this.node,this.parser.why)}},isTripleToLoad:function(){return this.parent!=null&&this.parent.parent!=null&&this.nodeType===this.NODE&&this.parent.nodeType===this.ARC&&this.parent.parent.nodeType===this.NODE},addNode:function(s){this.addSymbol(this.NODE,s),this.isTripleToLoad()&&this.loadTriple()},addCollection:function(){this.nodeType=this.NODE,this.node=this.store.collection(),this.collection=!0,this.isTripleToLoad()&&this.loadTriple()},addCollectionArc:function(){this.nodeType=this.ARC},addBNode:function(s){s!=null?this.parser.bnodes[s]!=null?this.node=this.parser.bnodes[s]:this.node=this.parser.bnodes[s]=this.store.bnode():this.node=this.store.bnode(),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()},addArc:function(s){s===i.ns.RDF+"li"&&(s=i.ns.RDF+"_"+this.parent.listIndex,this.parent.listIndex++),this.addSymbol(this.ARC,s)},addLiteral:function(s){this.parent.datatype&&this.parent.datatype!==i.ns.RDF+"langString"?this.node=this.store.literal(s,this.store.sym(this.parent.datatype)):this.node=this.store.literal(s,this.lang),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()}}}},{key:"getAttributeNodeNS",value:function(e,t,n){var a=null;if(e.getAttributeNodeNS)a=e.getAttributeNodeNS(t,n);else for(var s=e.attributes,l,o,u=0;u<s.length;++u)if(l=s[u],l.namespaceURI===t&&(o=l.prefix?l.prefix+":"+n:n,o===l.nodeName)){a=l;break}return a}},{key:"parse",value:function(e,t,n){var a=e.childNodes;this.cleanParser();var s;if(e.nodeType===i.nodeType.DOCUMENT){for(var l=0;l<a.length;l++)if(a[l].nodeType===i.nodeType.ELEMENT){s=a[l];break}}else if(e.nodeType===i.nodeType.ELEMENT)s=e;else throw new Error("RDFParser: can't find root in "+t+". Halting. ");this.why=n;var o=this.frameFactory(this);return this.base=t,o.base=t,o.lang=null,this.parseDOM(this.buildFrame(o,s)),!0}},{key:"parseDOM",value:function(e){for(var t,n=(function(v){var E="";if(v.namespaceURI==null)throw new Error("RDF/XML syntax error: No namespace for "+v.localName+" in "+this.base);return v.namespaceURI&&(E=E+v.namespaceURI),v.localName?E=E+v.localName:v.nodeName&&(v.nodeName.indexOf(":")>=0?E=E+v.nodeName.split(":")[1]:E=E+v.nodeName),E}).bind(this),a=!0;e.parent;){var s=e.element,l=s.attributes;if(s.nodeType===i.nodeType.TEXT||s.nodeType===i.nodeType.CDATA_SECTION)e.parent.nodeType===e.NODE&&(e.addArc(i.ns.RDF+"value"),e=this.buildFrame(e)),e.addLiteral(s.nodeValue);else if(n(s)!==i.ns.RDF+"RDF")if(e.parent&&e.parent.collection&&(e.addCollectionArc(),e=this.buildFrame(e,e.element),e.parent.element=null),!e.parent||!e.parent.nodeType||e.parent.nodeType===e.ARC){var o=this.getAttributeNodeNS(s,i.ns.RDF,"about");if(t=this.getAttributeNodeNS(s,i.ns.RDF,"ID"),o&&t)throw new Error("RDFParser: "+s.nodeName+" has both rdf:id and rdf:about. Halting. Only one of these properties may be specified on a node.");if(!o&&t)e.addNode("#"+t.nodeValue),s.removeAttributeNode(t);else if(o==null&&t==null){var u=this.getAttributeNodeNS(s,i.ns.RDF,"nodeID");u?(e.addBNode(u.nodeValue),s.removeAttributeNode(u)):e.addBNode()}else e.addNode(o.nodeValue),s.removeAttributeNode(o);var f=this.getAttributeNodeNS(s,i.ns.RDF,"type");i.ns.RDF+"Description"!==n(s)&&(f={nodeValue:n(s)}),f!=null&&(this.store.add(e.node,this.store.sym(i.ns.RDF+"type"),this.store.sym(rr(f.nodeValue,e.base)),this.why),f.nodeName&&s.removeAttributeNode(f));for(var d=l.length-1;d>=0;d--)this.store.add(e.node,this.store.sym(n(l[d])),this.store.literal(l[d].nodeValue,e.lang),this.why)}else{e.addArc(n(s)),this.reify&&(t=this.getAttributeNodeNS(s,i.ns.RDF,"ID"),t&&(e.rdfid=t.nodeValue,s.removeAttributeNode(t)));var c=this.getAttributeNodeNS(s,i.ns.RDF,"parseType"),h=this.getAttributeNodeNS(s,i.ns.RDF,"datatype");if(h&&(e.datatype=h.nodeValue,s.removeAttributeNode(h)),c){var g=c.nodeValue;g==="Literal"?(e.datatype=i.ns.RDF+"XMLLiteral",e=this.buildFrame(e),e.addLiteral(s.innerHTML||s.childNodes),a=!1):g==="Resource"?(e=this.buildFrame(e,e.element),e.parent.element=null,e.addBNode()):g==="Collection"&&(e=this.buildFrame(e,e.element),e.parent.element=null,e.addCollection()),s.removeAttributeNode(c)}if(l.length!==0){var N=this.getAttributeNodeNS(s,i.ns.RDF,"resource"),y=this.getAttributeNodeNS(s,i.ns.RDF,"nodeID");e=this.buildFrame(e),N?(e.addNode(N.nodeValue),s.removeAttributeNode(N)):y?(e.addBNode(y.nodeValue),s.removeAttributeNode(y)):e.addBNode();for(var b=l.length-1;b>=0;b--){var S=this.buildFrame(e);S.addArc(n(l[b])),n(l[b])===i.ns.RDF+"type"?this.buildFrame(S).addNode(l[b].nodeValue):this.buildFrame(S).addLiteral(l[b].nodeValue)}}else s.childNodes.length===0&&this.buildFrame(e).addLiteral("")}for(s=e.element;e.parent;){for(var D=e;s==null;)e=e.parent,s=e.element;var A=s.childNodes&&s.childNodes[e.lastChild];if(!A||!a){if(e.terminateFrame(),!(e=e.parent))break;s=e.element,a=!0}else if(A.nodeType!==i.nodeType.ELEMENT&&A.nodeType!==i.nodeType.TEXT&&A.nodeType!==i.nodeType.CDATA_SECTION||(A.nodeType===i.nodeType.TEXT||A.nodeType===i.nodeType.CDATA_SECTION)&&s.childNodes.length!==1)e.lastChild++;else{e.lastChild++,e=this.buildFrame(D,s.childNodes[e.lastChild-1]);break}}}}},{key:"cleanParser",value:function(){this.bnodes={},this.why=null}},{key:"buildFrame",value:function(e,t){var n=this.frameFactory(this,e,t);if(e&&(n.base=e.base,n.lang=e.lang),!t||t.nodeType===i.nodeType.TEXT||t.nodeType===i.nodeType.CDATA_SECTION)return n;var a=t.attributes,s=t.getAttributeNode("xml:base");s!=null&&(n.base=s.nodeValue,t.removeAttribute("xml:base"));var l=t.getAttributeNode("xml:lang");l!=null&&(n.lang=l.nodeValue,t.removeAttribute("xml:lang"));for(var o=a.length-1;o>=0;o--)if(a[o].nodeName.substr(0,3)==="xml"){if(a[o].name.slice(0,6)==="xmlns:"){var u=a[o].nodeValue;this.base&&(u=rr(u,this.base)),this.store.setPrefixForURI(a[o].name.slice(6),u)}t.removeAttributeNode(a[o])}return n}}])}();ke(ps,"ns",{RDF:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDFS:"http://www.w3.org/2000/01/rdf-schema#"});ke(ps,"nodeType",{ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12});function _g(i,r,e){var t,n,a,s=["INSERT","DELETE","WHERE"],l=Ut("http://www.w3.org/ns/pim/patch#"),o=Da(r,r,e,e,null,null,"",null),u={},f=function(y,b,S,D,A){return"Line "+(b+1)+" of <"+y+`>: Bad syntax:
   `+A+`
   at: "`+S.slice(D,D+30)+'"'};t=0;var d=r.sym(e+"#query");for(u.query=d;;){if(n=o.skipSpace(i,t),n<0)return u;if(i[n]===";"){if(t=o.skipSpace(i,n+1),t<0)return u;n=t}var c=!1;for(a=0;a<s.length;a++){var h=s[a];if(i.slice(n,n+h.length)===h){if(t=o.skipSpace(i,n+h.length),t<0)throw f(o._thisDoc,o.lines,i,n+h.length,"found EOF, needed {...} after "+h);if((h==="INSERT"||h==="DELETE")&&i.slice(t,t+4)==="DATA"){if(n=o.skipSpace(i,t+4),n<0)throw f(o._thisDoc,o.lines,i,t+4,"needed {...} after INSERT DATA "+h);t=n}var g=[];if(n=o.node(i,t,g),n<0)throw f(o._thisDoc,o.lines,i,t,"bad syntax or EOF in {...} after "+h);u[h.toLowerCase()]=g[0],r.add(d,l(h.toLowerCase()),g[0]),c=!0,t=n}}if(!c&&i.slice(n,n+7)==="@prefix"){if(t=o.directive(i,n),t<0)throw f(o._thisDoc,o.lines,i,t,"bad syntax or EOF after @prefix ");t=o.checkDot(i,t),c=!0}if(!c)throw f(o._thisDoc,o.lines,i,n,"Unknown syntax at start of statememt: '"+i.slice(n).slice(0,20)+"'")}}function ra(i,r,e){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"text/turtle",n=arguments.length>4?arguments[4]:void 0;t=t||un,t=t.split(";")[0];try{if(t===ic||t===un){var a=Da(r,r,e,e,null,null,"",null);a.loadBuf(i),o()}else if(t===li){var s=new ps(r);s.parse(Rn(i),e,r.sym(e)),o()}else if(t===Js)ss(Rn(i,{contentType:Js}),r,e),o();else if(t===Hl)ss(Rn(i,{contentType:Hl}),r,e),o();else if(t===gp||t===mp)_g(i,r,e),o();else if(t===Ws)ed(i,r,e,o);else if(t===Ys||t===Qs){var l=new id({factory:ta});f(null,i)}else throw t===void 0?new Error("contentType is undefined"):new Error("Don't know how to parse "+t+" yet")}catch(c){u(c)}ra.handled={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/sparql-update":!0,"application/sparql-update-single-match":!0,"application/ld+json":!0,"application/nquads":!0,"application/n-quads":!0};function o(){if(n)n(null,r);else return}function u(c){if(t!==Ws||t!==Ys||t!==Qs)if(n)n(c,r);else{var h=new Error(""+c+" while trying to parse <"+e+"> as "+t);throw h.cause=c,h}}function f(c,h){try{l.parse(h,d)}catch(g){n(g,r)}}function d(c,h){h?r.add(h.subject,h.predicate,h.object,h.graph):n(c,r)}}var na={exports:{}};(function(i,r){var e=typeof self<"u"?self:ua,t=function(){function a(){this.fetch=!1,this.DOMException=e.DOMException}return a.prototype=e,new a}();(function(a){(function(s){var l={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function o(R){return R&&DataView.prototype.isPrototypeOf(R)}if(l.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(R){return R&&u.indexOf(Object.prototype.toString.call(R))>-1};function d(R){if(typeof R!="string"&&(R=String(R)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(R))throw new TypeError("Invalid character in header field name");return R.toLowerCase()}function c(R){return typeof R!="string"&&(R=String(R)),R}function h(R){var G={next:function(){var Q=R.shift();return{done:Q===void 0,value:Q}}};return l.iterable&&(G[Symbol.iterator]=function(){return G}),G}function g(R){this.map={},R instanceof g?R.forEach(function(G,Q){this.append(Q,G)},this):Array.isArray(R)?R.forEach(function(G){this.append(G[0],G[1])},this):R&&Object.getOwnPropertyNames(R).forEach(function(G){this.append(G,R[G])},this)}g.prototype.append=function(R,G){R=d(R),G=c(G);var Q=this.map[R];this.map[R]=Q?Q+", "+G:G},g.prototype.delete=function(R){delete this.map[d(R)]},g.prototype.get=function(R){return R=d(R),this.has(R)?this.map[R]:null},g.prototype.has=function(R){return this.map.hasOwnProperty(d(R))},g.prototype.set=function(R,G){this.map[d(R)]=c(G)},g.prototype.forEach=function(R,G){for(var Q in this.map)this.map.hasOwnProperty(Q)&&R.call(G,this.map[Q],Q,this)},g.prototype.keys=function(){var R=[];return this.forEach(function(G,Q){R.push(Q)}),h(R)},g.prototype.values=function(){var R=[];return this.forEach(function(G){R.push(G)}),h(R)},g.prototype.entries=function(){var R=[];return this.forEach(function(G,Q){R.push([Q,G])}),h(R)},l.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function N(R){if(R.bodyUsed)return Promise.reject(new TypeError("Already read"));R.bodyUsed=!0}function y(R){return new Promise(function(G,Q){R.onload=function(){G(R.result)},R.onerror=function(){Q(R.error)}})}function b(R){var G=new FileReader,Q=y(G);return G.readAsArrayBuffer(R),Q}function S(R){var G=new FileReader,Q=y(G);return G.readAsText(R),Q}function D(R){for(var G=new Uint8Array(R),Q=new Array(G.length),oe=0;oe<G.length;oe++)Q[oe]=String.fromCharCode(G[oe]);return Q.join("")}function A(R){if(R.slice)return R.slice(0);var G=new Uint8Array(R.byteLength);return G.set(new Uint8Array(R)),G.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(R){this._bodyInit=R,R?typeof R=="string"?this._bodyText=R:l.blob&&Blob.prototype.isPrototypeOf(R)?this._bodyBlob=R:l.formData&&FormData.prototype.isPrototypeOf(R)?this._bodyFormData=R:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(R)?this._bodyText=R.toString():l.arrayBuffer&&l.blob&&o(R)?(this._bodyArrayBuffer=A(R.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(R)||f(R))?this._bodyArrayBuffer=A(R):this._bodyText=R=Object.prototype.toString.call(R):this._bodyText="",this.headers.get("content-type")||(typeof R=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(R)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var R=N(this);if(R)return R;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?N(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(b)}),this.text=function(){var R=N(this);if(R)return R;if(this._bodyBlob)return S(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(D(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(I)}),this.json=function(){return this.text().then(JSON.parse)},this}var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(R){var G=R.toUpperCase();return E.indexOf(G)>-1?G:R}function B(R,G){G=G||{};var Q=G.body;if(R instanceof B){if(R.bodyUsed)throw new TypeError("Already read");this.url=R.url,this.credentials=R.credentials,G.headers||(this.headers=new g(R.headers)),this.method=R.method,this.mode=R.mode,this.signal=R.signal,!Q&&R._bodyInit!=null&&(Q=R._bodyInit,R.bodyUsed=!0)}else this.url=String(R);if(this.credentials=G.credentials||this.credentials||"same-origin",(G.headers||!this.headers)&&(this.headers=new g(G.headers)),this.method=w(G.method||this.method||"GET"),this.mode=G.mode||this.mode||null,this.signal=G.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Q)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Q)}B.prototype.clone=function(){return new B(this,{body:this._bodyInit})};function I(R){var G=new FormData;return R.trim().split("&").forEach(function(Q){if(Q){var oe=Q.split("="),ee=oe.shift().replace(/\+/g," "),X=oe.join("=").replace(/\+/g," ");G.append(decodeURIComponent(ee),decodeURIComponent(X))}}),G}function L(R){var G=new g,Q=R.replace(/\r?\n[\t ]+/g," ");return Q.split(/\r?\n/).forEach(function(oe){var ee=oe.split(":"),X=ee.shift().trim();if(X){var H=ee.join(":").trim();G.append(X,H)}}),G}v.call(B.prototype);function k(R,G){G||(G={}),this.type="default",this.status=G.status===void 0?200:G.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in G?G.statusText:"OK",this.headers=new g(G.headers),this.url=G.url||"",this._initBody(R)}v.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},k.error=function(){var R=new k(null,{status:0,statusText:""});return R.type="error",R};var j=[301,302,303,307,308];k.redirect=function(R,G){if(j.indexOf(G)===-1)throw new RangeError("Invalid status code");return new k(null,{status:G,headers:{location:R}})},s.DOMException=a.DOMException;try{new s.DOMException}catch{s.DOMException=function(G,Q){this.message=G,this.name=Q;var oe=Error(G);this.stack=oe.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException}function O(R,G){return new Promise(function(Q,oe){var ee=new B(R,G);if(ee.signal&&ee.signal.aborted)return oe(new s.DOMException("Aborted","AbortError"));var X=new XMLHttpRequest;function H(){X.abort()}X.onload=function(){var V={status:X.status,statusText:X.statusText,headers:L(X.getAllResponseHeaders()||"")};V.url="responseURL"in X?X.responseURL:V.headers.get("X-Request-URL");var W="response"in X?X.response:X.responseText;Q(new k(W,V))},X.onerror=function(){oe(new TypeError("Network request failed"))},X.ontimeout=function(){oe(new TypeError("Network request failed"))},X.onabort=function(){oe(new s.DOMException("Aborted","AbortError"))},X.open(ee.method,ee.url,!0),ee.credentials==="include"?X.withCredentials=!0:ee.credentials==="omit"&&(X.withCredentials=!1),"responseType"in X&&l.blob&&(X.responseType="blob"),ee.headers.forEach(function(V,W){X.setRequestHeader(W,V)}),ee.signal&&(ee.signal.addEventListener("abort",H),X.onreadystatechange=function(){X.readyState===4&&ee.signal.removeEventListener("abort",H)}),X.send(typeof ee._bodyInit>"u"?null:ee._bodyInit)})}return O.polyfill=!0,a.fetch||(a.fetch=O,a.Headers=g,a.Request=B,a.Response=k),s.Headers=g,s.Request=B,s.Response=k,s.fetch=O,Object.defineProperty(s,"__esModule",{value:!0}),s})({})})(t),t.fetch.ponyfill=!0,delete t.fetch.polyfill;var n=t;r=n.fetch,r.default=n.fetch,r.fetch=n.fetch,r.Headers=n.Headers,r.Request=n.Request,r.Response=n.Response,i.exports=r})(na,na.exports);var Qi=na.exports;const pg=fs(Qi);function gg(i,r){var e=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=mg(i))||r){e&&(i=e);var t=0,n=function(){};return{s:n,n:function(){return t>=i.length?{done:!0}:{done:!1,value:i[t++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,s=!1,l;return{s:function(){e=e.call(i)},n:function(){var u=e.next();return a=u.done,u},e:function(u){s=!0,l=u},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}}}function mg(i,r){if(i){if(typeof i=="string")return Su(i,r);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Su(i,r)}}function Su(i,r){(r==null||r>i.length)&&(r=i.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=i[e];return t}function mn(i,r,e){return r=Nt(r),jr(i,ad()?Reflect.construct(r,e||[],Nt(i).constructor):r.apply(i,e))}function ad(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ad=function(){return!!i})()}var vg={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/ld+json":!0},ld={rdf:li,owl:li,n3:"text/n3",ttl:"text/turtle",nt:"text/n3",acl:"text/n3",html:"text/html",xml:"text/xml"},ud=function(r){return{link:Ut("http://www.w3.org/2007/ont/link#",r),http:Ut("http://www.w3.org/2007/ont/http#",r),httph:Ut("http://www.w3.org/2007/ont/httph#",r),rdf:Ut("http://www.w3.org/1999/02/22-rdf-syntax-ns#",r),rdfs:Ut("http://www.w3.org/2000/01/rdf-schema#",r),dc:Ut("http://purl.org/dc/elements/1.1/",r),ldp:Ut("http://www.w3.org/ns/ldp#",r)}},kr=ud(),Jr=pt(function i(r,e){gt(this,i),ke(this,"response",void 0),ke(this,"dom",void 0),this.response=r,this.dom=e});ke(Jr,"pattern",void 0);var Ca=function(i){function r(){return gt(this,r),mn(this,r,arguments)}return xt(r,i),pt(r,[{key:"parse",value:function(t,n,a){var s=t.store;this.dom||(this.dom=Rn(n));var l=this.dom.documentElement;if(l.nodeName==="parsererror")return t.failFetch(a,"Badly formed XML in "+a.resource.value,"parse_error");var o=new ps(s);try{o.parse(this.dom,a.original.value,a.original)}catch(u){return t.failFetch(a,"Syntax error parsing RDF/XML! "+u,"parse_error")}return a.noMeta||s.add(a.original,kr.rdf("type"),kr.link("RDFDocument"),t.appNode),t.doneFetch(a,this.response)}}],[{key:"toString",value:function(){return"RDFXMLHandler"}},{key:"register",value:function(t){t.mediatypes[li]={q:.9}}}])}(Jr);Ca.pattern=new RegExp("application/rdf\\+xml");var fn=function(i){function r(){return gt(this,r),mn(this,r,arguments)}return xt(r,i),pt(r,[{key:"parse",value:function(t,n,a){var s,l;this.dom||(this.dom=Rn(n));var o=t.store,u=this.dom.getElementsByTagName("title");u.length>0&&o.add(a.resource,kr.dc("title"),o.rdfFactory.literal(u[0].textContent),a.resource);for(var f=this.dom.getElementsByTagName("link"),d=f.length-1;d>=0;d--)s=f[d].getAttribute("rel"),l=!1,s||(s=f[d].getAttribute("rev"),l=!0),s&&t.linkData(a.original,s,f[d].getAttribute("href"),a.resource,l);for(var c=this.dom.getElementsByTagName("script"),h=0;h<c.length;h++){var g=c[h].getAttribute("type");vg[g]&&(ra(c[h].textContent,o,a.original.value,g),ra(c[h].textContent,o,a.original.value,g))}if(a.noMeta||o.add(a.resource,kr.rdf("type"),kr.link("WebPage"),t.appNode),!a.noRDFa&&ss)try{ss(this.dom,o,a.original.value)}catch(y){var N="Error trying to parse "+a.resource+` as RDFa:
`+y+`:
`+y.stack;return t.failFetch(a,N,"parse_error")}return t.doneFetch(a,this.response)}}],[{key:"toString",value:function(){return"XHTMLHandler"}},{key:"register",value:function(t){t.mediatypes[Js]={}}}])}(Jr);fn.pattern=new RegExp("application/xhtml");var as=function(i){function r(){return gt(this,r),mn(this,r,arguments)}return xt(r,i),pt(r,[{key:"parse",value:function(t,n,a){for(var s=Rn(n),l=0;l<s.childNodes.length;l++){var o=s.childNodes[l];if(r.isElement(o)){var u=o.namespaceURI;if(u&&u===u.rdf){t.addStatus(a.req,"Has XML root element in the RDF namespace, so assume RDF/XML.");var f=new Ca(this.response,s);return f.parse(t,n,a)}break}}if(s.doctype&&s.doctype.name==="html"&&s.doctype.publicId.match(/^-\/\/W3C\/\/DTD XHTML/)&&s.doctype.systemId.match(/http:\/\/www.w3.org\/TR\/xhtml/)){t.addStatus(a.req,`Has XHTML DOCTYPE. Switching to XHTML Handler.
`);var d=new fn(this.response,s);return d.parse(t,n,a)}var c=s.getElementsByTagName("html")[0];if(c){var h=c.getAttribute("xmlns");if(h&&h.match(/^http:\/\/www.w3.org\/1999\/xhtml/)){t.addStatus(a.req,`Has a default namespace for XHTML. Switching to XHTMLHandler.
`);var g=new fn(this.response,s);return g.parse(t,n,a)}}return t.failFetch(a,`Unsupported dialect of XML: not RDF or XHTML namespace, etc.
`+n.slice(0,80),901)}}],[{key:"toString",value:function(){return"XMLHandler"}},{key:"register",value:function(t){t.mediatypes["text/xml"]={q:.5},t.mediatypes["application/xml"]={q:.5}}},{key:"isElement",value:function(t){return t.nodeType===Node.ELEMENT_NODE}}])}(Jr);as.pattern=new RegExp("(text|application)/(.*)xml");var od=function(i){function r(){return gt(this,r),mn(this,r,arguments)}return xt(r,i),pt(r,[{key:"parse",value:function(t,n,a){var s=t.store;if(hd(n)){t.addStatus(a.req,`Has an XML declaration. We'll assume it's XHTML as the content-type was text/html.
`);var l=new fn(this.response);return l.parse(t,n,a)}if(bg(n)){t.addStatus(a.req,`Has XHTML DOCTYPE. Switching to XHTMLHandler.
`);var o=new fn(this.response);return o.parse(t,n,a)}if(wg(n)){t.addStatus(a.req,`Has default namespace for XHTML, so switching to XHTMLHandler.
`);var u=new fn(this.response);return u.parse(t,n,a)}var f=new RegExp("<title>([\\s\\S]+?)</title>","im").exec(n);return f&&s.add(a.resource,kr.dc("title"),s.rdfFactory.literal(f[1]),a.resource),s.add(a.resource,kr.rdf("type"),kr.link("WebPage"),t.appNode),t.addStatus(a.req,"non-XML HTML document, not parsed for data."),t.doneFetch(a,this.response)}}],[{key:"toString",value:function(){return"HTMLHandler"}},{key:"register",value:function(t){t.mediatypes["text/html"]={q:.9}}}])}(Jr);od.pattern=new RegExp("text/html");var fd=function(i){function r(){return gt(this,r),mn(this,r,arguments)}return xt(r,i),pt(r,[{key:"parse",value:function(t,n,a,s){var l=t.store;return new Promise(function(o,u){try{ed(n,l,a.original.value,function(){o(t.doneFetch(a,s))})}catch(d){var f="Error trying to parse "+a.resource+` as JSON-LD:
`+d;o(t.failFetch(a,f,"parse_error",s))}})}}],[{key:"toString",value:function(){return"JsonLdHandler"}},{key:"register",value:function(t){t.mediatypes["application/ld+json"]={q:.9}}}])}(Jr);fd.pattern=/application\/ld\+json/;var cd=function(i){function r(){return gt(this,r),mn(this,r,arguments)}return xt(r,i),pt(r,[{key:"parse",value:function(t,n,a){if(hd(n)){t.addStatus(a.req,"Warning: "+a.resource+` has an XML declaration. We'll assume it's XML but its content-type wasn't XML.
`);var s=new as(this.response);return s.parse(t,n,a)}if(n.slice(0,500).match(/xmlns:/)){t.addStatus(a.req,`May have an XML namespace. We'll assume it's XML but its content-type wasn't XML.
`);var l=new as(this.response);return l.parse(t,n,a)}return t.addStatus(a.req,"Plain text document, no known RDF semantics."),t.doneFetch(a,this.response)}}],[{key:"toString",value:function(){return"TextHandler"}},{key:"register",value:function(t){t.mediatypes["text/plain"]={q:.5}}}])}(Jr);cd.pattern=new RegExp("text/plain");var dd=function(i){function r(){return gt(this,r),mn(this,r,arguments)}return xt(r,i),pt(r,[{key:"parse",value:function(t,n,a,s){var l=t.store,o=Da(l,l,a.original.value,a.original.value,null,null,"",null);try{o.loadBuf(n)}catch(f){var u="Error trying to parse "+a.resource+` as Notation3:
`+f;return t.failFetch(a,u,"parse_error",s)}return t.addStatus(a.req,"N3 parsed: "+o.statementCount+" triples in "+o.lines+" lines."),t.store.add(a.original,kr.rdf("type"),kr.link("RDFDocument"),t.appNode),t.doneFetch(a,this.response)}}],[{key:"toString",value:function(){return"N3Handler"}},{key:"register",value:function(t){t.mediatypes["text/n3"]={q:"1.0"},t.mediatypes["text/turtle"]={q:1}}}])}(Jr);dd.pattern=new RegExp("(application|text)/(x-)?(rdf\\+)?(n3|turtle)");var ia={RDFXMLHandler:Ca,XHTMLHandler:fn,XMLHandler:as,HTMLHandler:od,TextHandler:cd,N3Handler:dd,JsonLdHandler:fd};function bg(i){var r=i.indexOf("<!DOCTYPE html"),e=i.indexOf(">");return r===-1||e===-1||r>e?!1:i.substr(r,e-r).indexOf("XHTML")!==-1}function hd(i){var r=i.match(/\s*<\?xml\s+version\s*=[^<>]+\?>/);return!!r}function wg(i){var r=i.match(/[^(<html)]*<html\s+[^<]*xmlns=['"]http:\/\/www.w3.org\/1999\/xhtml["'][^<]*>/);return!!r}var Un=function(){function i(r){var e=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(gt(this,i),ke(this,"store",void 0),ke(this,"timeout",void 0),ke(this,"_fetch",void 0),ke(this,"mediatypes",void 0),ke(this,"appNode",void 0),ke(this,"requested",void 0),ke(this,"timeouts",void 0),ke(this,"redirectedTo",void 0),ke(this,"fetchQueue",void 0),ke(this,"fetchCallbacks",void 0),ke(this,"nonexistent",void 0),ke(this,"lookedUp",void 0),ke(this,"handlers",void 0),ke(this,"ns",void 0),ke(this,"fireCallbacks",void 0),this.store=r||new bi,this.ns=ud(this.store.rdfFactory),this.timeout=t.timeout||3e4,this._fetch=t.fetch||typeof global<"u"&&(global.solidFetcher||global.solidFetch)||typeof window<"u"&&(window.solidFetcher||window.solidFetch)||pg,!this._fetch)throw new Error("No _fetch function available for Fetcher");this.appNode=this.store.sym("chrome://TheCurrentSession"),this.store.fetcher=this,this.requested={},this.timeouts={},this.redirectedTo={},this.fetchQueue={},this.fetchCallbacks={},this.nonexistent={},this.lookedUp={},this.handlers=[],this.mediatypes={"image/*":{q:.9},"*/*":{q:.1}},f0(this,["request","fail","refresh","retract","done"]),Object.keys(t.handlers||ia).map(function(n){return e.addHandler(ia[n])})}return pt(i,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(n=Object.assign({},n),e instanceof Array)return Promise.all(e.map(function(y){return t.load(y,Object.assign({},n))}));var a=e,s=An(a);s=s.split("#")[0],n=this.initFetchOptions(s,n);var l=this.appNode,o=this.store,u=o.statementsMatching(void 0,this.ns.link("requestedURI"),o.sym(s),l).map(function(y){return y.subject}),f=gg(u),d;try{for(f.s();!(d=f.n()).done;){var c=d.value,h=o.any(c,this.ns.link("response"),null,l);if(h!=null){var g=o.statementsMatching(h,this.ns.link("outOfDate"),!0,l);o.remove(g),n.force=!0,n.clearPreviousData=!0}}}catch(y){f.e(y)}finally{f.f()}var N=this.initFetchOptions(s,n);return this.pendingFetchPromise(s,N.baseURI,N)}},{key:"pendingFetchPromise",value:function(){var r=Gl(Ui.mark(function t(n,a,s){var l=this,o;return Ui.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(f.t0=!s.force,!f.t0){f.next=5;break}return f.next=4,this.fetchQueue[a];case 4:f.t0=f.sent;case 5:if(!f.t0){f.next=9;break}o=this.fetchQueue[a],f.next=12;break;case 9:o=Promise.race([this.setRequestTimeout(n,s),this.fetchUri(n,s)]),this.fetchQueue[a]=o,this.cleanupFetchRequest(a,void 0,this.timeout);case 12:return f.abrupt("return",o.then(function(d){return n in l.timeouts&&(l.timeouts[n].forEach(clearTimeout),delete l.timeouts[n]),d}));case 13:case"end":return f.stop()}},t,this)}));function e(t,n,a){return r.apply(this,arguments)}return e}()},{key:"cleanupFetchRequest",value:function(e,t,n){var a=this;t!==void 0&&console.warn("_options is deprecated"),this.timeouts[e]=(this.timeouts[e]||[]).concat(setTimeout(function(){a.isPending(e)||delete a.fetchQueue[e]},n))}},{key:"initFetchOptions",value:function(e,t){var n=this.store,a=!t.method||t.method.toUpperCase()==="GET";a||(t.force=!0),t.resource=n.rdfFactory.namedNode(e),t.baseURI=t.baseURI||e,t.original=n.rdfFactory.namedNode(t.baseURI),t.req=n.bnode(),t.headers=t.headers||new Qi.Headers,t.contentType&&(t.headers["content-type"]=t.contentType),t.force&&(t.cache="no-cache");var s=this.acceptString();t.headers.accept=s;var l=i.offlineOverride(e);t.requestedURI=l,i.setCredentials(l,t);var o=i.proxyIfNecessary(l);return l!==o&&(t.proxyUsed=!0),t.actualProxyURI=o,t}},{key:"fetchUri",value:function(e,t){var n=this;if(!e)return Promise.reject(new Error("Cannot fetch an empty uri"));if(i.unsupportedProtocol(e))return this.failFetch(t,"fetcher: Unsupported protocol","unsupported_protocol");var a=this.getState(e);if(t.force)delete this.nonexistent[e];else{if(a==="fetched")return Promise.resolve(this.doneFetch(t,{status:200,ok:!0,statusText:"Already loaded into quadstore."}));if(a==="failed"&&this.requested[e]===404){var s="Previously failed: "+this.requested[e],l={url:e,status:this.requested[e],statusText:s,responseText:s,headers:new Qi.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return this.failFetch(t,s,this.requested[e],l)}}this.fireCallbacks("request",[e]),this.requested[e]=!0,t.noMeta||this.saveRequestMetadata(e,t);var o=t.actualProxyURI;return this._fetch(o,t).then(function(u){return n.handleResponse(u,e,t)},function(u){var f={url:o,status:999,statusText:(u.name||"network failure")+": "+(u.errno||u.code||u.type),responseText:u.message,headers:new Qi.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return n.handleError(f,e,t)})}},{key:"nowOrWhenFetched",value:function(e,t,n){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=An(e);typeof t=="function"?n=t:typeof t>"u"||(Xl(t)?a.referringTerm=t:a=t),this.load(s,a).then(function(l){if(n)if(l)if(l.ok)n(!0,"OK",l);else{var o="HTTP error: Status "+l.status+" ("+l.statusText+")";l.responseText&&(o+=" "+l.responseText),n(!1,o,l)}else{var u="@@ nowOrWhenFetched:  no response object!";n(!1,u)}},function(l){var o=l.message||l.statusText;o="Failed to load  <"+s+"> "+o,l.response&&l.response.status&&(o+=" status: "+l.response.status),n(!1,o,l.response)})}},{key:"addStatus",value:function(e,t){var n=new Date;t="["+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()+"."+n.getMilliseconds()+"] "+t;var a=this.store,s=a.the(e,this.ns.link("status"));ca(s)&&s.append(a.rdfFactory.literal(t))}},{key:"failFetch",value:function(e,t,n,a){this.addStatus(e.req,t),e.noMeta||this.store.add(e.original,this.ns.link("error"),this.store.rdfFactory.literal(t));var s=(e.method||"GET").toUpperCase(),l=s==="GET"||s==="HEAD";l&&(e.resource.equals(e.original),this.requested[Tn(e.original.value)]=n,this.fireCallbacks("fail",[e.original.value,t]));var o=new Error("Fetcher: "+t);return o.status=n,o.statusText=t,o.response=a,Promise.reject(o)}},{key:"linkData",value:function(e,t,n,a,s){if(n){var l=this.store,o,u=l.rdfFactory.namedNode(rr(n,e.value));if(t==="alternate"||t==="seeAlso"||t==="meta"||t==="describedby"){if(u.value===e.value)return;o=this.ns.rdfs("seeAlso")}else t==="type"?o=l.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):o=l.rdfFactory.namedNode(rr(encodeURIComponent(t),"http://www.iana.org/assignments/link-relations/"));s?l.add(u,o,e,a):l.add(e,o,u,a)}}},{key:"parseLinkHeader",value:function(e,t,n){if(e){var a=/<[^>]*>\s*(\s*;\s*[^()<>@,;:"/[\]?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*")))*(,|$)/g,s=/[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*"))/g,l=e.match(a);if(l!=null)for(var o=0;o<l.length;o++){var u=l[o].split(">"),f=u[0].substring(1),d=u[1],c=d.match(s);if(c==null)return;for(var h=0;h<c.length;h++){var g=c[h],N=g.split("="),y=N[1].replace(/["']/g,"");this.linkData(t,y,f,n)}}}}},{key:"doneFetch",value:function(e,t){return this.addStatus(e.req,"Done."),this.requested[e.original.value]="done",this.fireCallbacks("done",[e.original.value]),t.req=e.req,t}},{key:"nowKnownAs",value:function(e,t){this.lookedUp[e.value]?this.lookedUp[t.value]||this.lookUpThing(t,e):this.lookedUp[t.value]&&(this.lookedUp[e.value]||this.lookUpThing(e,t))}},{key:"putBack",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=An(e),s=new Pt(a).doc();return n.contentType=n["content-type"]||n["Content-Type"]||n.contentType||un,n.contentType==="application/ld+json"?new Promise(function(l,o){di(s,t.store,s.uri,n.contentType,function(u,f){u?o(u):(n.data=f,t.webOperation("PUT",e,n).then(function(d){return l(d)}).catch(function(d){return o(d)}))})}):(n.data=di(s,this.store,s.value,n.contentType),this.webOperation("PUT",a,n))}},{key:"webCopy",value:function(e,t,n){var a=this;return this.webOperation("GET",e).then(function(s){return a.webOperation("PUT",t,{data:s.responseText,contentType:n})})}},{key:"delete",value:function(e,t){var n=this;return this.webOperation("DELETE",e,t).then(function(a){return n.requested[e]=404,n.nonexistent[e]=!0,n.unload(n.store.rdfFactory.namedNode(e)),a})}},{key:"createIfNotExists",value:function(){var r=Gl(Ui.mark(function t(n){var a,s,l,o,u=arguments;return Ui.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return a=u.length>1&&u[1]!==void 0?u[1]:un,s=u.length>2&&u[2]!==void 0?u[2]:"",l=this,d.prev=3,d.next=6,l.load(n);case 6:o=d.sent,d.next=26;break;case 9:if(d.prev=9,d.t0=d.catch(3),d.t0.response.status!==404){d.next=25;break}return d.prev=12,d.next=15,l.webOperation("PUT",n.value,{data:s,contentType:a});case 15:o=d.sent,d.next=21;break;case 18:throw d.prev=18,d.t1=d.catch(12),d.t1;case 21:return delete l.requested[n.value],d.abrupt("return",o);case 25:throw d.t0;case 26:return d.abrupt("return",o);case 27:case"end":return d.stop()}},t,this,[[3,9],[12,18]])}));function e(t){return r.apply(this,arguments)}return e}()},{key:"createContainer",value:function(e,t,n){var a={"content-type":un,link:this.ns.ldp("BasicContainer")+'; rel="type"'};t&&(a.slug=t);var s={headers:a};return n&&(s.body=n),this.webOperation("POST",e,s)}},{key:"invalidateCache",value:function(e){var t=An(e),n=this;if(n.fetchQueue&&n.fetchQueue[t]){var a=n.fetchQueue[t];a.PromiseStatus,delete n.fetchQueue[t]}if(n.requested[t]&&n.requested[t]!=="done"&&n.requested[t]!=="failed"&&n.requested[t]!==404){var s="Rdflib: fetcher: Destructive operation on <".concat(n.requested[t],"> file being fetched! ")+t;console.error(s)}else delete n.requested[t],delete n.nonexistent[t]}},{key:"webOperation",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=An(t);n.method=e,n.body=n.data||n.body,n.force=!0;var s=this;if(n.body&&!n.contentType)throw new Error("Web operation sending data must have a defined contentType.");return n.contentType&&(n.headers=n.headers||{},n.headers["content-type"]=n.contentType),i.setCredentials(a,n),new Promise(function(l,o){s._fetch(a,n).then(function(u){if(u.ok)(e==="PUT"||e==="PATCH"||e==="POST"||e==="DELETE")&&s.invalidateCache(a),u.text?u.text().then(function(c){u.responseText=c,l(u)}):l(u);else{var f="Web error: "+u.status;u.statusText&&(f+=" ("+u.statusText+")"),f+=" on "+e+" of <"+a+">",u.responseText&&(f+=": "+u.responseText);var d=new Error(f);d.response=u,o(d)}},function(u){var f="Fetch error for "+e+" of <"+a+">:"+u;o(new Error(f))})})}},{key:"lookUpThing",value:function(e,t){var n=this,a=this.store.uris(e);return a=a.map(function(s){return Tn(s)}),a.forEach(function(s){n.lookedUp[s]=!0}),this.load(a,{referringTerm:t})}},{key:"getHeader",value:function(e,t){for(var n=this.store,a=e.value,s=n.each(void 0,this.ns.link("requestedURI"),n.rdfFactory.literal(a)),l=0;l<s.length;l++){var o=s[l];if(o!==void 0){var u=n.any(o,this.ns.link("response"));if(u!==void 0&&n.anyValue(u,this.ns.http("status"))&&n.anyValue(u,this.ns.http("status")).startsWith("2")){var f=n.each(u,this.ns.httph(t.toLowerCase()));return f.length?f.map(function(d){return d.value}):[]}}}}},{key:"saveRequestMetadata",value:function(e,t){var n=t.req,a=this.store,s=t.referringTerm;this.addStatus(t.req,"Accept: "+t.headers.accept),Xl(s)&&a.add(a.rdfFactory.namedNode(e),this.ns.link("requestedBy"),s,this.appNode),t.original&&t.original.value!==e&&a.add(n,this.ns.link("orginalURI"),a.rdfFactory.literal(t.original.value),this.appNode);var l=new Date,o="["+l.getHours()+":"+l.getMinutes()+":"+l.getSeconds()+"] ";a.add(n,this.ns.rdfs("label"),a.rdfFactory.literal(o+" Request for "+e),this.appNode),a.add(n,this.ns.link("requestedURI"),a.rdfFactory.literal(e),this.appNode),a.add(n,this.ns.link("status"),a.collection(),this.appNode)}},{key:"saveResponseMetadata",value:function(e,t){var n=this,a=this.store,s=a.bnode();return a.add(t.req,this.ns.link("response"),s,this.appNode),a.add(s,this.ns.http("status"),a.rdfFactory.literal(e.status),this.appNode),a.add(s,this.ns.http("statusText"),a.rdfFactory.literal(e.statusText),this.appNode),e.headers.forEach(function(l,o){a.add(s,n.ns.httph(o),n.store.rdfFactory.literal(l),n.appNode),o==="content-type"&&a.add(t.resource,n.ns.rdf("type"),a.rdfFactory.namedNode(o0(l).value),n.appNode)}),s}},{key:"objectRefresh",value:function(e){var t=this.store.uris(e);if(typeof t<"u")for(var n=0;n<t.length;n++)this.refresh(this.store.rdfFactory.namedNode(Tn(t[n])))}},{key:"refresh",value:function(e,t){this.fireCallbacks("refresh",arguments),this.nowOrWhenFetched(e,{force:!0,clearPreviousData:!0},t)}},{key:"refreshIfExpired",value:function(e,t){var n=this.getHeader(e,"Expires");!n||new Date(n[0]).getTime()<=new Date().getTime()?this.refresh(e,t):t(!0,"Not expired",{})}},{key:"retract",value:function(e){this.store.removeMany(void 0,void 0,void 0,e),e.value&&delete this.requested[Tn(e.value)],this.fireCallbacks("retract",arguments)}},{key:"getState",value:function(e){return typeof this.requested[e]>"u"?"unrequested":this.requested[e]===!0?"requested":this.requested[e]==="done"?"fetched":this.requested[e]==="redirected"?this.getState(this.redirectedTo[e]):"failed"}},{key:"isPending",value:function(e){return this.requested[e]===!0}},{key:"unload",value:function(e){this.store.removeDocument(e),delete this.requested[e.value]}},{key:"addHandler",value:function(e){this.handlers.push(e),e.register(this)}},{key:"retryNoCredentials",value:function(e,t){t.retriedWithNoCredentials=!0,delete this.requested[e],delete this.fetchQueue[e];var n=Object.assign({},t,{credentials:"omit"});return this.addStatus(t.req,"Abort: Will retry with credentials SUPPRESSED to see if that helps"),this.load(e,n)}},{key:"isCrossSite",value:function(e){if(typeof document>"u"||!document.location)return!1;var t=Lp,n=""+document.location;return(t(n)&&t(e)&&t(n))!==t(e)}},{key:"handleError",value:function(e,t,n){if(this.isCrossSite(t)){if(n.credentials&&n.credentials==="include"&&!n.retriedWithNoCredentials)return this.retryNoCredentials(t,n);var a=i.crossSiteProxy(t);if(a&&!n.proxyUsed)return this.redirectToProxy(a,n)}var s;return e instanceof Error?s="Fetch error: "+e.message:(s=e.statusText,e.responseText&&(s+=" ".concat(e.responseText))),this.failFetch(n,s,e.status||998,e)}},{key:"addType",value:function(e,t,n,a){var s=t;if(a){var l=n.any(s,this.ns.link("requestedURI"));l&&l.value!==a&&n.add(n.rdfFactory.namedNode(a),this.ns.rdf("type"),e,this.appNode)}for(;;){var o=n.any(s,this.ns.link("requestedURI"));if(o&&o.value&&n.add(n.rdfFactory.namedNode(o.value),this.ns.rdf("type"),e,this.appNode),s=n.any(void 0,n.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#redirectedRequest"),s),!s)break;var u=n.any(s,n.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#response"));if(!u)break;var f=n.any(u,n.rdfFactory.namedNode("http://www.w3.org/2007/ont/http#status"));if(!f||f!=="301"&&f!=="302")break}}},{key:"handleResponse",value:function(e,t,n){var a=this,s=this.store,l=e.headers,o=n.req,u=this.saveResponseMetadata(e,n),f=this.normalizedContentType(n,l)||"",d=l.get("content-location");if(e.status===0)return this.handleError(e,t,n);if(e.status>=400)return e.status===404&&(this.nonexistent[n.original.value]=!0,this.nonexistent[t]=!0),this.saveErrorResponse(e,u).then(function(){var S=n.resource+" "+e.statusText;return a.failFetch(n,S,e.status,e)});var c=null,h=null;if(d&&(h=rr(d,t),h!==t&&(c=h)),e.status===200){if(this.addType(this.ns.link("Document"),o,s,t),c&&this.addType(this.ns.link("Document"),o,s,c),n.clearPreviousData)for(var g=s.statementsMatching(void 0,void 0,void 0,n.resource).slice(),N=0;N<g.length;N++)s.removeStatement(g[N]);var y=f.includes("image/")||f.includes("application/pdf");f&&y&&(this.addType(s.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),o,s,t),c&&this.addType(s.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),o,s,c))}if(d){if(!n.force&&c&&this.requested[h]==="done")return this.doneFetch(n,e);this.requested[h]=!0}this.parseLinkHeader(l.get("link"),n.original,o);var b=this.handlerForContentType(f,e);return b?e.text().then(function(S){return e.responseText=S,b.parse(a,S,n,e)}):(this.addStatus(o,"Fetch over. No data handled."),this.doneFetch(n,e))}},{key:"saveErrorResponse",value:function(e,t){var n=this,a=this.store;return e.text().then(function(s){s.length>10&&a.add(t,n.ns.http("content"),a.rdfFactory.literal(s),t)})}},{key:"handlerForContentType",value:function(e,t){if(!e)return null;var n=this.handlers.find(function(a){return e.match(a.pattern)});return n?new n(t):null}},{key:"guessContentType",value:function(e){return ld[e.split(".").pop()]}},{key:"normalizedContentType",value:function(e,t){if(e.forceContentType)return e.forceContentType;var n=t.get("content-type");if(!n||n.includes("application/octet-stream")){var a=this.guessContentType(e.resource.value);if(a)return a}var s=Ql(e.resource.value);return!n&&["file","chrome"].includes(s)?"text/xml":n}},{key:"redirectToProxy",value:function(e,t){var n=this;this.addStatus(t.req,"BLOCKED -> Cross-site Proxy to <"+e+">"),t.proxyUsed=!0;var a=this.store,s=t.req;t.noMeta||(a.add(s,this.ns.link("redirectedTo"),a.rdfFactory.namedNode(e),s),this.addStatus(s,"redirected to new request")),this.requested[t.resource.value]="redirected",this.redirectedTo[t.resource.value]=e;var l=Object.assign({},t);return l.baseURI=t.resource.value,this.fetchUri(e,l).then(function(o){return l.noMeta||a.add(s,n.ns.link("redirectedRequest"),l.req,n.appNode),o})}},{key:"setRequestTimeout",value:function(e,t){var n=this;return new Promise(function(a){n.timeouts[e]=(n.timeouts[e]||[]).concat(setTimeout(function(){n.isPending(e)&&!t.retriedWithNoCredentials&&!t.proxyUsed&&a(n.failFetch(t,"Request to ".concat(e," timed out"),"timeout"))},n.timeout))})}},{key:"addFetchCallback",value:function(e,t){this.fetchCallbacks[e]?this.fetchCallbacks[e].push(t):this.fetchCallbacks[e]=[t]}},{key:"acceptString",value:function(){var e="";for(var t in this.mediatypes){e!==""&&(e+=", "),e+=t;for(var n in this.mediatypes[t])e+=";"+n+"="+this.mediatypes[t][n]}return e}}],[{key:"crossSiteProxy",value:function(e){if(i.crossSiteProxyTemplate)return i.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(e))}},{key:"offlineOverride",value:function(e){var t=e,n;return typeof window<"u"&&window.panes&&(n=window.panes.UI)&&n.preferences&&n.preferences.get("offlineModeUsingLocalhost")&&t.slice(0,7)==="http://"&&t.slice(7,17)!=="localhost/"&&(t="http://localhost/"+t.slice(7)),t}},{key:"proxyIfNecessary",value:function(e){var t;if(typeof window<"u"&&window.panes&&(t=window.panes.UI)&&t.isExtension)return e;if(typeof $SolidTestEnvironment<"u"&&$SolidTestEnvironment.localSiteMap){var n=e.split("/").slice(2),a=function l(o,u){var f=u[o.shift()];return f?typeof f=="string"?f+o.join("/"):o?l(o,f):null:null},s=a(n,$SolidTestEnvironment.localSiteMap);if(s)return s}return i.crossSiteProxyTemplate&&typeof document<"u"&&document.location&&(""+document.location).slice(0,6)==="https:"&&e.slice(0,5)==="http:"?i.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(e)):e}},{key:"unsupportedProtocol",value:function(e){var t=Ql(e);return t==="tel"||t==="mailto"||t==="urn"}},{key:"setCredentials",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.credentials===void 0&&(t.withCredentials!==void 0?t.credentials=t.withCredentials?"include":"omit":t.credentials="include")}}])}();ke(Un,"HANDLERS",void 0);ke(Un,"CONTENT_TYPE_BY_EXT",void 0);ke(Un,"crossSiteProxyTemplate",void 0);Un.HANDLERS=ia;Un.CONTENT_TYPE_BY_EXT=ld;function Ru(i,r){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(i);r&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),e.push.apply(e,t)}return e}function Fu(i){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Ru(Object(e),!0).forEach(function(t){ke(i,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):Ru(Object(e)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(e,t))})}return i}var $i=Fu(Fu({},ta),{},{fetcher:function(r,e){return new Un(r,e)},graph:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return new bi(r,e||{rdfFactory:ta})},lit:function(r,e,t){return this.literal(""+r,e||t)},st:function(r,e,t,n){return this.quad(r,e,t,n)}}),gs={};for(var Hs in $i)typeof $i[Hs]=="function"&&(gs[Hs]=$i[Hs].bind($i));var yg=gs.graph,_d=gs.namedNode,kg=gs.literal;new Yc;ht.fromValue;br.nextId;let ie,lr=0,ni=null;function Yi(){return(ni===null||ni.byteLength===0)&&(ni=new Uint8Array(ie.memory.buffer)),ni}const Ji=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},Dg=typeof Ji.encodeInto=="function"?function(i,r){return Ji.encodeInto(i,r)}:function(i,r){const e=Ji.encode(i);return r.set(e),{read:i.length,written:e.length}};function Or(i,r,e){if(e===void 0){const l=Ji.encode(i),o=r(l.length,1)>>>0;return Yi().subarray(o,o+l.length).set(l),lr=l.length,o}let t=i.length,n=r(t,1)>>>0;const a=Yi();let s=0;for(;s<t;s++){const l=i.charCodeAt(s);if(l>127)break;a[n+s]=l}if(s!==t){s!==0&&(i=i.slice(s)),n=e(n,t,t=s+i.length*3,1)>>>0;const l=Yi().subarray(n+s,n+t),o=Dg(i,l);s+=o.written,n=e(n,t,s,1)>>>0}return lr=s,n}function Na(i){return i==null}let ii=null;function Ae(){return(ii===null||ii.byteLength===0)&&(ii=new Int32Array(ie.memory.buffer)),ii}const pd=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&pd.decode();function ft(i,r){return i=i>>>0,pd.decode(Yi().subarray(i,i+r))}function At(i){const r=ie.__wbindgen_export_2.get(i);return ie.__externref_table_dealloc(i),r}function Eg(i){try{const n=ie.__wbindgen_add_to_stack_pointer(-16),a=Or(i,ie.__wbindgen_malloc,ie.__wbindgen_realloc),s=lr;ie.namedNode(n,a,s);var r=Ae()[n/4+0],e=Ae()[n/4+1],t=Ae()[n/4+2];if(t)throw At(e);return xn.__wrap(r)}finally{ie.__wbindgen_add_to_stack_pointer(16)}}function Ag(i){try{const s=ie.__wbindgen_add_to_stack_pointer(-16);var r=Na(i)?0:Or(i,ie.__wbindgen_malloc,ie.__wbindgen_realloc),e=lr;ie.blankNode(s,r,e);var t=Ae()[s/4+0],n=Ae()[s/4+1],a=Ae()[s/4+2];if(a)throw At(n);return wi.__wrap(t)}finally{ie.__wbindgen_add_to_stack_pointer(16)}}function Cg(i,r){try{const l=ie.__wbindgen_add_to_stack_pointer(-16);var e=Na(i)?0:Or(i,ie.__wbindgen_malloc,ie.__wbindgen_realloc),t=lr;ie.literal(l,e,t,r);var n=Ae()[l/4+0],a=Ae()[l/4+1],s=Ae()[l/4+2];if(s)throw At(a);return ki.__wrap(n)}finally{ie.__wbindgen_add_to_stack_pointer(16)}}function Ng(){const i=ie.defaultGraph();return yi.__wrap(i)}function Tg(i){try{const n=ie.__wbindgen_add_to_stack_pointer(-16),a=Or(i,ie.__wbindgen_malloc,ie.__wbindgen_realloc),s=lr;ie.variable(n,a,s);var r=Ae()[n/4+0],e=Ae()[n/4+1],t=Ae()[n/4+2];if(t)throw At(e);return Di.__wrap(r)}finally{ie.__wbindgen_add_to_stack_pointer(16)}}function Sg(i,r,e){try{const s=ie.__wbindgen_add_to_stack_pointer(-16);ie.triple(s,i,r,e);var t=Ae()[s/4+0],n=Ae()[s/4+1],a=Ae()[s/4+2];if(a)throw At(n);return Vn.__wrap(t)}finally{ie.__wbindgen_add_to_stack_pointer(16)}}function Rg(i,r,e,t){try{const l=ie.__wbindgen_add_to_stack_pointer(-16);ie.quad(l,i,r,e,t);var n=Ae()[l/4+0],a=Ae()[l/4+1],s=Ae()[l/4+2];if(s)throw At(a);return Vn.__wrap(n)}finally{ie.__wbindgen_add_to_stack_pointer(16)}}function Fg(i){try{const n=ie.__wbindgen_add_to_stack_pointer(-16);ie.fromTerm(n,i);var r=Ae()[n/4+0],e=Ae()[n/4+1],t=Ae()[n/4+2];if(t)throw At(e);return At(r)}finally{ie.__wbindgen_add_to_stack_pointer(16)}}function Ig(i){try{const n=ie.__wbindgen_add_to_stack_pointer(-16);ie.fromQuad(n,i);var r=Ae()[n/4+0],e=Ae()[n/4+1],t=Ae()[n/4+2];if(t)throw At(e);return At(r)}finally{ie.__wbindgen_add_to_stack_pointer(16)}}let si=null;function Og(){return(si===null||si.byteLength===0)&&(si=new Uint32Array(ie.memory.buffer)),si}function Lg(i,r){i=i>>>0;const t=Og().subarray(i/4,i/4+r),n=[];for(let a=0;a<t.length;a++)n.push(ie.__wbindgen_export_2.get(t[a]));return ie.__externref_drop_slice(i,r),n}function Bg(){ie.main()}function Pg(i){const r=ie.__externref_table_alloc();return ie.__wbindgen_export_2.set(r,i),r}function er(i,r){try{return i.apply(this,r)}catch(e){const t=Pg(e);ie.__wbindgen_exn_store(t)}}const Iu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>ie.__wbg_blanknode_free(i>>>0));class wi{static __wrap(r){r=r>>>0;const e=Object.create(wi.prototype);return e.__wbg_ptr=r,Iu.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,Iu.unregister(this),r}free(){const r=this.__destroy_into_raw();ie.__wbg_blanknode_free(r)}get termType(){let r,e;try{const a=ie.__wbindgen_add_to_stack_pointer(-16);ie.blanknode_term_type(a,this.__wbg_ptr);var t=Ae()[a/4+0],n=Ae()[a/4+1];return r=t,e=n,ft(t,n)}finally{ie.__wbindgen_add_to_stack_pointer(16),ie.__wbindgen_free(r,e,1)}}get value(){let r,e;try{const a=ie.__wbindgen_add_to_stack_pointer(-16);ie.blanknode_value(a,this.__wbg_ptr);var t=Ae()[a/4+0],n=Ae()[a/4+1];return r=t,e=n,ft(t,n)}finally{ie.__wbindgen_add_to_stack_pointer(16),ie.__wbindgen_free(r,e,1)}}toString(){let r,e;try{const a=ie.__wbindgen_add_to_stack_pointer(-16);ie.blanknode_toString(a,this.__wbg_ptr);var t=Ae()[a/4+0],n=Ae()[a/4+1];return r=t,e=n,ft(t,n)}finally{ie.__wbindgen_add_to_stack_pointer(16),ie.__wbindgen_free(r,e,1)}}equals(r){return ie.blanknode_equals(this.__wbg_ptr,r)!==0}}const Ou=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>ie.__wbg_defaultgraph_free(i>>>0));class yi{static __wrap(r){r=r>>>0;const e=Object.create(yi.prototype);return e.__wbg_ptr=r,Ou.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,Ou.unregister(this),r}free(){const r=this.__destroy_into_raw();ie.__wbg_defaultgraph_free(r)}get termType(){let r,e;try{const a=ie.__wbindgen_add_to_stack_pointer(-16);ie.defaultgraph_term_type(a,this.__wbg_ptr);var t=Ae()[a/4+0],n=Ae()[a/4+1];return r=t,e=n,ft(t,n)}finally{ie.__wbindgen_add_to_stack_pointer(16),ie.__wbindgen_free(r,e,1)}}get value(){let r,e;try{const a=ie.__wbindgen_add_to_stack_pointer(-16);ie.defaultgraph_value(a,this.__wbg_ptr);var t=Ae()[a/4+0],n=Ae()[a/4+1];return r=t,e=n,ft(t,n)}finally{ie.__wbindgen_add_to_stack_pointer(16),ie.__wbindgen_free(r,e,1)}}toString(){let r,e;try{const a=ie.__wbindgen_add_to_stack_pointer(-16);ie.defaultgraph_toString(a,this.__wbg_ptr);var t=Ae()[a/4+0],n=Ae()[a/4+1];return r=t,e=n,ft(t,n)}finally{ie.__wbindgen_add_to_stack_pointer(16),ie.__wbindgen_free(r,e,1)}}equals(r){return ie.defaultgraph_equals(this.__wbg_ptr,r)!==0}}const Lu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>ie.__wbg_literal_free(i>>>0));class ki{static __wrap(r){r=r>>>0;const e=Object.create(ki.prototype);return e.__wbg_ptr=r,Lu.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,Lu.unregister(this),r}free(){const r=this.__destroy_into_raw();ie.__wbg_literal_free(r)}get termType(){let r,e;try{const a=ie.__wbindgen_add_to_stack_pointer(-16);ie.literal_term_type(a,this.__wbg_ptr);var t=Ae()[a/4+0],n=Ae()[a/4+1];return r=t,e=n,ft(t,n)}finally{ie.__wbindgen_add_to_stack_pointer(16),ie.__wbindgen_free(r,e,1)}}get value(){let r,e;try{const a=ie.__wbindgen_add_to_stack_pointer(-16);ie.literal_value(a,this.__wbg_ptr);var t=Ae()[a/4+0],n=Ae()[a/4+1];return r=t,e=n,ft(t,n)}finally{ie.__wbindgen_add_to_stack_pointer(16),ie.__wbindgen_free(r,e,1)}}get language(){let r,e;try{const a=ie.__wbindgen_add_to_stack_pointer(-16);ie.literal_language(a,this.__wbg_ptr);var t=Ae()[a/4+0],n=Ae()[a/4+1];return r=t,e=n,ft(t,n)}finally{ie.__wbindgen_add_to_stack_pointer(16),ie.__wbindgen_free(r,e,1)}}get datatype(){const r=ie.literal_datatype(this.__wbg_ptr);return xn.__wrap(r)}toString(){let r,e;try{const a=ie.__wbindgen_add_to_stack_pointer(-16);ie.literal_toString(a,this.__wbg_ptr);var t=Ae()[a/4+0],n=Ae()[a/4+1];return r=t,e=n,ft(t,n)}finally{ie.__wbindgen_add_to_stack_pointer(16),ie.__wbindgen_free(r,e,1)}}equals(r){return ie.literal_equals(this.__wbg_ptr,r)!==0}}const Bu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>ie.__wbg_namednode_free(i>>>0));class xn{static __wrap(r){r=r>>>0;const e=Object.create(xn.prototype);return e.__wbg_ptr=r,Bu.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,Bu.unregister(this),r}free(){const r=this.__destroy_into_raw();ie.__wbg_namednode_free(r)}get termType(){let r,e;try{const a=ie.__wbindgen_add_to_stack_pointer(-16);ie.namednode_term_type(a,this.__wbg_ptr);var t=Ae()[a/4+0],n=Ae()[a/4+1];return r=t,e=n,ft(t,n)}finally{ie.__wbindgen_add_to_stack_pointer(16),ie.__wbindgen_free(r,e,1)}}get value(){let r,e;try{const a=ie.__wbindgen_add_to_stack_pointer(-16);ie.namednode_value(a,this.__wbg_ptr);var t=Ae()[a/4+0],n=Ae()[a/4+1];return r=t,e=n,ft(t,n)}finally{ie.__wbindgen_add_to_stack_pointer(16),ie.__wbindgen_free(r,e,1)}}toString(){let r,e;try{const a=ie.__wbindgen_add_to_stack_pointer(-16);ie.namednode_toString(a,this.__wbg_ptr);var t=Ae()[a/4+0],n=Ae()[a/4+1];return r=t,e=n,ft(t,n)}finally{ie.__wbindgen_add_to_stack_pointer(16),ie.__wbindgen_free(r,e,1)}}equals(r){return ie.namednode_equals(this.__wbg_ptr,r)!==0}}const Pu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>ie.__wbg_quad_free(i>>>0));class Vn{static __wrap(r){r=r>>>0;const e=Object.create(Vn.prototype);return e.__wbg_ptr=r,Pu.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,Pu.unregister(this),r}free(){const r=this.__destroy_into_raw();ie.__wbg_quad_free(r)}get termType(){let r,e;try{const a=ie.__wbindgen_add_to_stack_pointer(-16);ie.quad_term_type(a,this.__wbg_ptr);var t=Ae()[a/4+0],n=Ae()[a/4+1];return r=t,e=n,ft(t,n)}finally{ie.__wbindgen_add_to_stack_pointer(16),ie.__wbindgen_free(r,e,1)}}get value(){let r,e;try{const a=ie.__wbindgen_add_to_stack_pointer(-16);ie.defaultgraph_value(a,this.__wbg_ptr);var t=Ae()[a/4+0],n=Ae()[a/4+1];return r=t,e=n,ft(t,n)}finally{ie.__wbindgen_add_to_stack_pointer(16),ie.__wbindgen_free(r,e,1)}}get subject(){return ie.quad_subject(this.__wbg_ptr)}get predicate(){return ie.quad_predicate(this.__wbg_ptr)}get object(){return ie.quad_object(this.__wbg_ptr)}get graph(){return ie.quad_graph(this.__wbg_ptr)}toString(){let r,e;try{const a=ie.__wbindgen_add_to_stack_pointer(-16);ie.quad_toString(a,this.__wbg_ptr);var t=Ae()[a/4+0],n=Ae()[a/4+1];return r=t,e=n,ft(t,n)}finally{ie.__wbindgen_add_to_stack_pointer(16),ie.__wbindgen_free(r,e,1)}}equals(r){return ie.quad_equals(this.__wbg_ptr,r)!==0}}const qg=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>ie.__wbg_store_free(i>>>0));class gd{__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,qg.unregister(this),r}free(){const r=this.__destroy_into_raw();ie.__wbg_store_free(r)}constructor(r){try{const a=ie.__wbindgen_add_to_stack_pointer(-16);ie.store_new(a,r);var e=Ae()[a/4+0],t=Ae()[a/4+1],n=Ae()[a/4+2];if(n)throw At(t);return this.__wbg_ptr=e>>>0,this}finally{ie.__wbindgen_add_to_stack_pointer(16)}}add(r){try{const n=ie.__wbindgen_add_to_stack_pointer(-16);ie.store_add(n,this.__wbg_ptr,r);var e=Ae()[n/4+0],t=Ae()[n/4+1];if(t)throw At(e)}finally{ie.__wbindgen_add_to_stack_pointer(16)}}delete(r){try{const n=ie.__wbindgen_add_to_stack_pointer(-16);ie.store_delete(n,this.__wbg_ptr,r);var e=Ae()[n/4+0],t=Ae()[n/4+1];if(t)throw At(e)}finally{ie.__wbindgen_add_to_stack_pointer(16)}}has(r){try{const a=ie.__wbindgen_add_to_stack_pointer(-16);ie.store_has(a,this.__wbg_ptr,r);var e=Ae()[a/4+0],t=Ae()[a/4+1],n=Ae()[a/4+2];if(n)throw At(t);return e!==0}finally{ie.__wbindgen_add_to_stack_pointer(16)}}get size(){try{const n=ie.__wbindgen_add_to_stack_pointer(-16);ie.store_size(n,this.__wbg_ptr);var r=Ae()[n/4+0],e=Ae()[n/4+1],t=Ae()[n/4+2];if(t)throw At(e);return r>>>0}finally{ie.__wbindgen_add_to_stack_pointer(16)}}match(r,e,t,n){try{const f=ie.__wbindgen_add_to_stack_pointer(-16);ie.store_match(f,this.__wbg_ptr,r,e,t,n);var a=Ae()[f/4+0],s=Ae()[f/4+1],l=Ae()[f/4+2],o=Ae()[f/4+3];if(o)throw At(l);var u=Lg(a,s).slice();return ie.__wbindgen_free(a,s*4,4),u}finally{ie.__wbindgen_add_to_stack_pointer(16)}}query(r,e){try{const s=ie.__wbindgen_add_to_stack_pointer(-16),l=Or(r,ie.__wbindgen_malloc,ie.__wbindgen_realloc),o=lr;ie.store_query(s,this.__wbg_ptr,l,o,e);var t=Ae()[s/4+0],n=Ae()[s/4+1],a=Ae()[s/4+2];if(a)throw At(n);return At(t)}finally{ie.__wbindgen_add_to_stack_pointer(16)}}update(r,e){try{const a=ie.__wbindgen_add_to_stack_pointer(-16),s=Or(r,ie.__wbindgen_malloc,ie.__wbindgen_realloc),l=lr;ie.store_update(a,this.__wbg_ptr,s,l,e);var t=Ae()[a/4+0],n=Ae()[a/4+1];if(n)throw At(t)}finally{ie.__wbindgen_add_to_stack_pointer(16)}}load(r,e,t,n){try{const l=ie.__wbindgen_add_to_stack_pointer(-16),o=Or(r,ie.__wbindgen_malloc,ie.__wbindgen_realloc),u=lr;ie.store_load(l,this.__wbg_ptr,o,u,e,t,n);var a=Ae()[l/4+0],s=Ae()[l/4+1];if(s)throw At(a)}finally{ie.__wbindgen_add_to_stack_pointer(16)}}dump(r,e){let t,n;try{const d=ie.__wbindgen_add_to_stack_pointer(-16);ie.store_dump(d,this.__wbg_ptr,r,e);var a=Ae()[d/4+0],s=Ae()[d/4+1],l=Ae()[d/4+2],o=Ae()[d/4+3],u=a,f=s;if(o)throw u=0,f=0,At(l);return t=u,n=f,ft(u,f)}finally{ie.__wbindgen_add_to_stack_pointer(16),ie.__wbindgen_free(t,n,1)}}}const qu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>ie.__wbg_variable_free(i>>>0));class Di{static __wrap(r){r=r>>>0;const e=Object.create(Di.prototype);return e.__wbg_ptr=r,qu.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,qu.unregister(this),r}free(){const r=this.__destroy_into_raw();ie.__wbg_variable_free(r)}get termType(){let r,e;try{const a=ie.__wbindgen_add_to_stack_pointer(-16);ie.variable_term_type(a,this.__wbg_ptr);var t=Ae()[a/4+0],n=Ae()[a/4+1];return r=t,e=n,ft(t,n)}finally{ie.__wbindgen_add_to_stack_pointer(16),ie.__wbindgen_free(r,e,1)}}get value(){let r,e;try{const a=ie.__wbindgen_add_to_stack_pointer(-16);ie.variable_value(a,this.__wbg_ptr);var t=Ae()[a/4+0],n=Ae()[a/4+1];return r=t,e=n,ft(t,n)}finally{ie.__wbindgen_add_to_stack_pointer(16),ie.__wbindgen_free(r,e,1)}}toString(){let r,e;try{const a=ie.__wbindgen_add_to_stack_pointer(-16);ie.variable_toString(a,this.__wbg_ptr);var t=Ae()[a/4+0],n=Ae()[a/4+1];return r=t,e=n,ft(t,n)}finally{ie.__wbindgen_add_to_stack_pointer(16),ie.__wbindgen_free(r,e,1)}}equals(r){return ie.variable_equals(this.__wbg_ptr,r)!==0}}async function jg(i,r){if(typeof Response=="function"&&i instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(i,r)}catch(t){if(i.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}const e=await i.arrayBuffer();return await WebAssembly.instantiate(e,r)}else{const e=await WebAssembly.instantiate(i,r);return e instanceof WebAssembly.Instance?{instance:e,module:i}:e}}function md(){const i={};return i.wbg={},i.wbg.__wbindgen_is_undefined=function(r){return r===void 0},i.wbg.__wbindgen_is_null=function(r){return r===null},i.wbg.__wbindgen_string_get=function(r,e){const t=e,n=typeof t=="string"?t:void 0;var a=Na(n)?0:Or(n,ie.__wbindgen_malloc,ie.__wbindgen_realloc),s=lr;Ae()[r/4+1]=s,Ae()[r/4+0]=a},i.wbg.__wbindgen_is_falsy=function(r){return!r},i.wbg.__wbindgen_error_new=function(r,e){return new Error(ft(r,e))},i.wbg.__wbg_namednode_new=function(r){return xn.__wrap(r)},i.wbg.__wbg_blanknode_new=function(r){return wi.__wrap(r)},i.wbg.__wbg_literal_new=function(r){return ki.__wrap(r)},i.wbg.__wbg_defaultgraph_new=function(r){return yi.__wrap(r)},i.wbg.__wbg_variable_new=function(r){return Di.__wrap(r)},i.wbg.__wbg_quad_new=function(r){return Vn.__wrap(r)},i.wbg.__wbg_new_28c511d9baebfa89=function(r,e){return new Error(ft(r,e))},i.wbg.__wbindgen_string_new=function(r,e){return ft(r,e)},i.wbg.__wbg_new_57421e8974065233=function(r,e){return new URIError(ft(r,e))},i.wbg.__wbindgen_is_string=function(r){return typeof r=="string"},i.wbg.__wbg_iterator_2cee6dadfd956dfa=function(){return Symbol.iterator},i.wbg.__wbg_get_e3c254076557e348=function(){return er(function(r,e){return Reflect.get(r,e)},arguments)},i.wbg.__wbindgen_is_function=function(r){return typeof r=="function"},i.wbg.__wbg_call_27c0f87801dedf93=function(){return er(function(r,e){return r.call(e)},arguments)},i.wbg.__wbindgen_is_object=function(r){const e=r;return typeof e=="object"&&e!==null},i.wbg.__wbg_next_40fc327bfc8770e6=function(r){return r.next},i.wbg.__wbg_next_196c84450b364254=function(){return er(function(r){return r.next()},arguments)},i.wbg.__wbg_done_298b57d23c0fc80c=function(r){return r.done},i.wbg.__wbg_value_d93c65011f51a456=function(r){return r.value},i.wbg.__wbg_new_16b304a2cfa7ff4a=function(){return new Array},i.wbg.__wbg_new_d9bc3a0147634640=function(){return new Map},i.wbg.__wbg_push_a5b05aedc7234f9f=function(r,e){return r.push(e)},i.wbg.__wbg_set_8417257aaedc936b=function(r,e,t){return r.set(e,t)},i.wbg.__wbg_warn_2b7fc46eb50827b6=function(r,e){console.warn(ft(r,e))},i.wbg.__wbg_new_abda76e883ba8a5f=function(){return new Error},i.wbg.__wbg_stack_658279fe44541cf6=function(r,e){const t=e.stack,n=Or(t,ie.__wbindgen_malloc,ie.__wbindgen_realloc),a=lr;Ae()[r/4+1]=a,Ae()[r/4+0]=n},i.wbg.__wbg_error_f851667af71bcfc6=function(r,e){let t,n;try{t=r,n=e,console.error(ft(r,e))}finally{ie.__wbindgen_free(t,n,1)}},i.wbg.__wbg_crypto_1d1f22824a6a080c=function(r){return r.crypto},i.wbg.__wbg_process_4a72847cc503995b=function(r){return r.process},i.wbg.__wbg_versions_f686565e586dd935=function(r){return r.versions},i.wbg.__wbg_node_104a2ff8d6ea03a2=function(r){return r.node},i.wbg.__wbg_require_cca90b1a94a0255b=function(){return er(function(){return module.require},arguments)},i.wbg.__wbg_msCrypto_eb05e62b530a1508=function(r){return r.msCrypto},i.wbg.__wbg_newwithlength_e9b4878cebadb3d3=function(r){return new Uint8Array(r>>>0)},i.wbg.__wbg_self_ce0dbfc45cf2f5be=function(){return er(function(){return self.self},arguments)},i.wbg.__wbg_window_c6fb939a7f436783=function(){return er(function(){return window.window},arguments)},i.wbg.__wbg_globalThis_d1e6af4856ba331b=function(){return er(function(){return globalThis.globalThis},arguments)},i.wbg.__wbg_global_207b558942527489=function(){return er(function(){return global.global},arguments)},i.wbg.__wbg_newnoargs_e258087cd0daa0ea=function(r,e){return new Function(ft(r,e))},i.wbg.__wbg_call_b3ca7c6051f9bec1=function(){return er(function(r,e,t){return r.call(e,t)},arguments)},i.wbg.__wbg_has_0af94d20077affa2=function(){return er(function(r,e){return Reflect.has(r,e)},arguments)},i.wbg.__wbg_now_3014639a94423537=function(){return Date.now()},i.wbg.__wbindgen_memory=function(){return ie.memory},i.wbg.__wbg_buffer_12d079cc21e14bdb=function(r){return r.buffer},i.wbg.__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb=function(r,e,t){return new Uint8Array(r,e>>>0,t>>>0)},i.wbg.__wbg_randomFillSync_5c9c955aa56b6049=function(){return er(function(r,e){r.randomFillSync(e)},arguments)},i.wbg.__wbg_subarray_a1f73cd4b5b42fe1=function(r,e,t){return r.subarray(e>>>0,t>>>0)},i.wbg.__wbg_getRandomValues_3aa56aa6edec874c=function(){return er(function(r,e){r.getRandomValues(e)},arguments)},i.wbg.__wbg_new_63b92bc8671ed464=function(r){return new Uint8Array(r)},i.wbg.__wbg_set_a47bac70306a19a7=function(r,e,t){r.set(e,t>>>0)},i.wbg.__wbindgen_throw=function(r,e){throw new Error(ft(r,e))},i.wbg.__wbindgen_init_externref_table=function(){const r=ie.__wbindgen_export_2,e=r.grow(4);r.set(0,void 0),r.set(e+0,void 0),r.set(e+1,null),r.set(e+2,!0),r.set(e+3,!1)},i}function vd(i,r){return ie=i.exports,ls.__wbindgen_wasm_module=r,ii=null,si=null,ni=null,ie.__wbindgen_start(),ie}function Mg(i){if(ie!==void 0)return ie;const r=md();i instanceof WebAssembly.Module||(i=new WebAssembly.Module(i));const e=new WebAssembly.Instance(i,r);return vd(e,i)}async function ls(i){if(ie!==void 0)return ie;typeof i>"u"&&(i=new URL(""+new URL("../assets/web_bg.DI8SoM3H.wasm",import.meta.url).href,import.meta.url));const r=md();(typeof i=="string"||typeof Request=="function"&&i instanceof Request||typeof URL=="function"&&i instanceof URL)&&(i=fetch(i));const{instance:e,module:t}=await jg(await i,r);return vd(e,t)}const Ug=Object.freeze(Object.defineProperty({__proto__:null,BlankNode:wi,DefaultGraph:yi,Literal:ki,NamedNode:xn,Quad:Vn,Store:gd,Variable:Di,blankNode:Ag,default:ls,defaultGraph:Ng,fromQuad:Ig,fromTerm:Fg,initSync:Mg,literal:Cg,main:Bg,namedNode:Eg,quad:Rg,triple:Sg,variable:Tg},Symbol.toStringTag,{value:"Module"})),xg="/ontologies/d3fend.ttl",Vg="http://d3fend.mitre.org/ontologies/d3fend.owl#",Hg="http://d3fend.mitre.org/ontologies/cad/instances#",zg="cco",bd="d3f",Xg="dct",wd="cad",$g="owl",yd="rdf",kd="rdfs",Gg="skos",Wg="xsd",qn={[bd]:Vg,[wd]:Hg,[$g]:"http://www.w3.org/2002/07/owl#",[yd]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",[kd]:"http://www.w3.org/2000/01/rdf-schema#",[Wg]:"http://www.w3.org/2001/XMLSchema#",[Xg]:"http://purl.org/dc/terms/",[Gg]:"http://www.w3.org/2004/02/skos/core#",[zg]:"http://www.ontologyrepository.com/CommonCoreOntologies/"};function Qg(){const{subscribe:i,set:r,update:e}=Gt({initalized:!1,store:null,erorr:null});async function t(){try{console.log("Starting Oxigraph initialization"),console.time("Initialize Oxigraph"),console.log("Oxigraph module:",Ug),console.log("Init function:",ls),await ls(),console.log("WebAssembly initialized successfully");const a=new gd;console.log("Oxigraph store created"),r({initialized:!0,store:a,error:null}),await n(a),console.log(`Oxigraph store initialized with ${a.size} triples.`)}catch(a){r({initialized:!1,store:null,error:a.message}),console.error("Failed to initialize Oxigraph store:",a)}}async function n(a){try{console.time("Load D3FEND ontology");const l=await(await fetch(xg)).text();a.load(l,{format:"ttl"}),console.timeEnd("Load D3FEND ontology"),console.log(`D3FEND ontology loaded, total triples: ${a.size}`)}catch(s){console.error("Failed to load D3FEND ontology:",s)}}return{subscribe:i,initialize:t,query:a=>new Promise((s,l)=>{e(o=>{if(!o.initialized)l(new Error("Oxigraph store not initialized"));else try{const u=o.store.query(a);s(u)}catch(u){l(u)}return o})})}}const Ta=Qg();async function Yg(i){let r=null;return console.log("Calling lookup_valid_property..."),r=await Zg(i),console.log(`Property from lookup IRI ${r}`),r==null&&(console.log("Calling lookup_valid_property_by_label..."),r=await Jg(i)),r}async function Jg(i){const r="findValidPropertyByLabel("+i+")";console.info(r);const e=`PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX d3f: <http://d3fend.mitre.org/ontologies/d3fend.owl#>

SELECT ?property
WHERE
{
   ?property rdfs:subPropertyOf* d3f:may-be-associated-with .
   ?property rdfs:label "${i}" .
}
LIMIT 1`;console.log({valid_value_query:e});let t=null;try{const n=await Ta.query(e);n?(console.info(`Type of queryResult for property lookup by label ${i} is: `+Object.prototype.toString.call(n).slice(8,-1)),console.log({query_result:n}),Array.isArray(n)?n.length>0?t=n[0].get("property").value:console.warn(`Empty query results for valid property lookup by label ${i}.`):console.warn(`Query result not the expected Array type for property lookup by label of ${i}.`)):console.error(`Query results: ${n} for valid property lookup by label ${i}.`)}catch(n){console.warn(`Error executing oxigraph query for property lookup by label of: ${i}, error: ${n}`)}return console.info(t+" <- "+r),t}async function Zg(i){const r="lookupValidPropertyByFragment("+i+")";console.info(r);const e=`PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX d3f: <http://d3fend.mitre.org/ontologies/d3fend.owl#>

SELECT ?property
WHERE
{
   VALUES ?property { ${i} }
   ?property rdfs:subPropertyOf* d3f:may-be-associated-with .
}
LIMIT 1`;let t=null;if(i.includes(":"))try{const n=await Ta.query(e);console.info({query_result:n}),n?Array.isArray(n)?n.length>0?t=n[0].get("property").value:console.warn(`Empty array returned for property lookup by iri of ${i}.`):console.warn(`Query result not the expected Array type for property lookup by iri of ${i}.`):console.warn(`Undefined query result returned for property lookup by iri of ${i}.`)}catch(n){console.warn(`Error executing oxigraph query for property lookup by iri of: ${i}, error: ${n}`)}else console.warn("Attempted lookup by iri of: "+i+" but iri has no ':' char");return console.info(t+" <- "+r),t}const xr=Ut(qn[bd]),Dd=Ut(qn[wd]),Kg=Ut(qn[yd]),e1=Ut(qn[kd]);function Zi(i,r){Fn.set(i),hi.set(r)}function t1(){Zi([],[])}const Fn=Gt([]),hi=Gt([]);function r1(i,r){if(r.data.d3f_class){const e=r.data.d3f_class,[t,n]=e.split(":");return xr(n)}else{const e=r.type;return{artifactSelectorNode:xr("Artifact"),vulnerabilitySelectorNode:xr("Vulnerability"),attackSelectorNode:xr("OffensiveTechnique"),countermeasureSelectorNode:xr("DefensiveTechnique"),informationSelectorNode:xr("DigitalInformation"),agentSelectorNode:xr("Agent"),eventNode:xr("Event")}[e]}}async function n1(){const i=yg();Object.keys(qn).forEach(s=>{const l=qn[s];console.info("Adding prefix ",s," for ",l),i.setPrefixForURI(s,l)}),console.info("Echo store.namespaces: "+i.namespaces);let r,e;const t=[],n=[];return Fn.subscribe(s=>{r=s})(),hi.subscribe(s=>{e=s})(),console.info("Starting node processing..."),i1(r,i,t),console.info("Completed node processing."),console.info("Starting edge processing..."),await a1(e,i,n),console.info("Completed edge processing promise."),await new Promise((s,l)=>{di(null,i,null,"text/turtle",(o,u)=>{if(o)l(o);else{let f=u;t.length>0&&(f+=`
# Skipped nodes (no d3f_class):
`,t.forEach(d=>{f+=`# Node ID: ${d.id}
`,JSON.stringify(d.data,null,2).split(`
`).forEach(g=>{f+=`# ${g}
`})})),n.length>0&&(f+=`#
# Skipped edges (no label lookup found.):
`,n.forEach(d=>{f+=`# Edge ID: ${d.id}
`,JSON.stringify(d.data,null,2).split(`
`).forEach(g=>{f+=`# ${g}
`})}),f+=`
`),s(f)}})})}function i1(i,r,e){console.info("Processing nodes..."),i.forEach(t=>{const n=t.id,a=t.type,s=t.data.label,l=r1(r,t);if(l){const o=Ed(n),u=kg(s.toString());s1("Processing node and data properties and using rdflib node name: ",l),r.add(o,Kg("type"),l),r.add(o,e1("label"),u)}else e.push({id:n,type:a,data:t.data})}),console.info("Done processing nodes."),e.length>1&&console.warn("Skipped nodes:",e)}function Ed(i){const r=i.replace(".","_");return Dd(r)}function s1(i,r){const e=Object.prototype.toString.call(r).slice(8,-1);console.log(`${i} references ${r} of type ${e}`)}const a1=async(i,r,e)=>{console.info("Processing edges now!"),e.length=0;for(const t of i){const n=t.id,a=t.data.label,s=t.source,l=t.target;console.log(`edgeLabel: ${a}`);try{const o=await Yg(a);if(o){console.log(`Found property ${o} for ${a}`),console.info(`Adding subject inst:${s} property ${o} object inst:${l}`);try{const u=Ed(s),f=Dd(l.replace(".","_"));r.add(u,_d(o),f),console.info(r.length)}catch{console.error(`Error adding triple for edgeId = ${n}, edgeLabel = ${a}`)}}else console.warn(`Bad property ${o} found for ${a}`),e.push({id:n,data:t.data})}catch(o){console.error(`Lookup error for edgeId: ${n} with edgeLabel: ${a} - ${o}`),e.push({id:n,data:t.data})}}console.info("Done processing edges."),e.length>1&&console.warn("Skipped edges:",e)};function Zr(i,r,e,t,n,a,s,l,o,u,f,d,c,h,g){const N={id:`${Math.random()}`,type:t,position:{x:l,y:o},data:{label:n,sequence:s,d3f_class:a},measured:{width:u,height:f},origin:[.5,0],selected:!1,dragging:!1};let y,b;g?(y=N.id,b=e.id):(y=e.id,b=N.id);const S={type:"editableEdge",data:{label:d},source:b,sourceHandle:c,target:y,targetHandle:h,id:`xy-edge__${b}${c}-${y}${h}`,selected:!1};r.update(D=>[...D,S]),i.update(D=>[...D,N])}function ju(i,r,e){const t=i.slice();return t[18]=r[e],t}const l1=i=>({}),Mu=i=>({});function u1(i){let r;return{c(){r=P("No related offensive techniques in this release.")},l(e){r=q(e,"No related offensive techniques in this release.")},m(e,t){C(e,r,t)},p:Ce,i:Ce,o:Ce,d(e){e&&m(r)}}}function o1(i){let r,e;return r=new Xr({props:{$$slots:{default:[h1]},$$scope:{ctx:i}}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n&16394&&(a.$$scope={dirty:n,ctx:t}),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function f1(i){let r,e="Loading...";return{c(){r=re("div"),r.textContent=e},l(t){r=ne(t,"DIV",{"data-svelte-h":!0}),Me(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,n){C(t,r,n)},p:Ce,i:Ce,o:Ce,d(t){t&&m(r)}}}function Uu(i){let r=i[18].off_tech_id.value.replace(/ |\./g,"")+"",e,t,n=i[18].off_tech_label.value+"",a,s,l="-->",o,u,f=i[18].off_artifact_rel_label.value.replace(/ /g,"")+"",d,c,h=me(i[18].off_artifact.value)+"",g,N,y=i[18].off_artifact_label.value+"",b,S,D,A,v=me(i[18].off_artifact.value)+"",E,w,B=i[18].off_tech_id.value.replace(/ |\./g,"")+"",I,L,k=i[18].off_tech_id.value.replace(/ |\./g,"")+"",j,O,R=me(i[18].off_artifact.value)+"",G,Q,oe=me(i[18].off_artifact.value)+"",ee,X;function H(M,J){return J&10&&(D=null),D==null&&(D=!!M[3].includes(M[18].off_tech_id.value.replace(/ |\./g,""))),D?d1:c1}let V=H(i,-1),W=V(i);return{c(){e=P(r),t=P('["'),a=P(n),s=P('"] '),o=P(l),u=P(" |"),d=P(f),c=P("| "),g=P(h),N=P('["'),b=P(y),S=P(`"];
            `),W.c(),A=P(`
            class `),E=P(v),w=P(" ArtifactNode; click "),I=P(B),L=P(` href "javascript:da_to_off_callback('`),j=P(k),O=P(`')"; click `),G=P(R),Q=P(' href "/dao/artifact/d3f:'),ee=P(oe),X=P('";')},l(M){e=q(M,r),t=q(M,'["'),a=q(M,n),s=q(M,'"] '),o=q(M,l),u=q(M," |"),d=q(M,f),c=q(M,"| "),g=q(M,h),N=q(M,'["'),b=q(M,y),S=q(M,`"];
            `),W.l(M),A=q(M,`
            class `),E=q(M,v),w=q(M," ArtifactNode; click "),I=q(M,B),L=q(M,` href "javascript:da_to_off_callback('`),j=q(M,k),O=q(M,`')"; click `),G=q(M,R),Q=q(M,' href "/dao/artifact/d3f:'),ee=q(M,oe),X=q(M,'";')},m(M,J){C(M,e,J),C(M,t,J),C(M,a,J),C(M,s,J),C(M,o,J),C(M,u,J),C(M,d,J),C(M,c,J),C(M,g,J),C(M,N,J),C(M,b,J),C(M,S,J),W.m(M,J),C(M,A,J),C(M,E,J),C(M,w,J),C(M,I,J),C(M,L,J),C(M,j,J),C(M,O,J),C(M,G,J),C(M,Q,J),C(M,ee,J),C(M,X,J)},p(M,J){J&2&&r!==(r=M[18].off_tech_id.value.replace(/ |\./g,"")+"")&&fe(e,r),J&2&&n!==(n=M[18].off_tech_label.value+"")&&fe(a,n),J&2&&f!==(f=M[18].off_artifact_rel_label.value.replace(/ /g,"")+"")&&fe(d,f),J&2&&h!==(h=me(M[18].off_artifact.value)+"")&&fe(g,h),J&2&&y!==(y=M[18].off_artifact_label.value+"")&&fe(b,y),V===(V=H(M,J))&&W?W.p(M,J):(W.d(1),W=V(M),W&&(W.c(),W.m(A.parentNode,A))),J&2&&v!==(v=me(M[18].off_artifact.value)+"")&&fe(E,v),J&2&&B!==(B=M[18].off_tech_id.value.replace(/ |\./g,"")+"")&&fe(I,B),J&2&&k!==(k=M[18].off_tech_id.value.replace(/ |\./g,"")+"")&&fe(j,k),J&2&&R!==(R=me(M[18].off_artifact.value)+"")&&fe(G,R),J&2&&oe!==(oe=me(M[18].off_artifact.value)+"")&&fe(ee,oe)},d(M){M&&(m(e),m(t),m(a),m(s),m(o),m(u),m(d),m(c),m(g),m(N),m(b),m(S),m(A),m(E),m(w),m(I),m(L),m(j),m(O),m(G),m(Q),m(ee),m(X)),W.d(M)}}}function c1(i){let r,e=i[18].off_tech_id.value.replace(/ |\./g,"")+"",t,n;return{c(){r=P("class "),t=P(e),n=P(" OffensiveTechniqueNode;")},l(a){r=q(a,"class "),t=q(a,e),n=q(a," OffensiveTechniqueNode;")},m(a,s){C(a,r,s),C(a,t,s),C(a,n,s)},p(a,s){s&2&&e!==(e=a[18].off_tech_id.value.replace(/ |\./g,"")+"")&&fe(t,e)},d(a){a&&(m(r),m(t),m(n))}}}function d1(i){let r,e=i[18].off_tech_id.value.replace(/ |\./g,"")+"",t,n;return{c(){r=P("class "),t=P(e),n=P(" SelectedOffensiveTechniqueNode;")},l(a){r=q(a,"class "),t=q(a,e),n=q(a," SelectedOffensiveTechniqueNode;")},m(a,s){C(a,r,s),C(a,t,s),C(a,n,s)},p(a,s){s&2&&e!==(e=a[18].off_tech_id.value.replace(/ |\./g,"")+"")&&fe(t,e)},d(a){a&&(m(r),m(t),m(n))}}}function xu(i){let r=i[6].edge_is_unique(i[18].off_tech_label.value,i[18].off_artifact_rel_label.value,i[18].off_artifact_label.value),e,t=r&&Uu(i);return{c(){t&&t.c(),e=De()},l(n){t&&t.l(n),e=De()},m(n,a){t&&t.m(n,a),C(n,e,a)},p(n,a){a&2&&(r=n[6].edge_is_unique(n[18].off_tech_label.value,n[18].off_artifact_rel_label.value,n[18].off_artifact_label.value)),r?t?t.p(n,a):(t=Uu(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&m(e),t&&t.d(n)}}}function h1(i){let r,e,t=He(i[1].da_to_off.results.bindings),n=[];for(let a=0;a<t.length;a+=1)n[a]=xu(ju(i,t,a));return{c(){r=P(`graph LR;
        `);for(let a=0;a<n.length;a+=1)n[a].c();e=De()},l(a){r=q(a,`graph LR;
        `);for(let s=0;s<n.length;s+=1)n[s].l(a);e=De()},m(a,s){C(a,r,s);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(a,s);C(a,e,s)},p(a,s){if(s&74){t=He(a[1].da_to_off.results.bindings);let l;for(l=0;l<t.length;l+=1){const o=ju(a,t,l);n[l]?n[l].p(o,s):(n[l]=xu(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(a){a&&(m(r),m(e)),Dt(n,a)}}}function _1(i){let r,e,t,n,a,s,l,o,u,f,d,c,h,g=i[3].length+"",N,y,b,S,D;const A=i[9].header,v=bt(A,i,i[14],Mu),E=i[9].default,w=bt(E,i,i[14],null),B=[f1,o1,u1],I=[];function L(k,j){return k[1]?k[1].da_to_off.results.bindings.length>0?1:2:0}return l=L(i),o=I[l]=B[l](i),{c(){r=re("dialog"),e=re("div"),v&&v.c(),t=P(`
    Select Attack Techniques
    `),w&&w.c(),n=ae(),a=re("hr"),s=ae(),o.c(),u=ae(),f=re("hr"),d=ae(),c=re("button"),h=P("Insert ("),N=P(g),y=P(")"),this.h()},l(k){r=ne(k,"DIALOG",{class:!0});var j=ge(r);e=ne(j,"DIV",{class:!0});var O=ge(e);v&&v.l(O),t=q(O,`
    Select Attack Techniques
    `),w&&w.l(O),n=le(O),a=ne(O,"HR",{}),s=le(O),o.l(O),u=le(O),f=ne(O,"HR",{}),d=le(O),c=ne(O,"BUTTON",{class:!0});var R=ge(c);h=q(R,"Insert ("),N=q(R,g),y=q(R,")"),R.forEach(m),O.forEach(m),j.forEach(m),this.h()},h(){c.autofocus=!0,se(c,"class","svelte-1ai9hff"),se(e,"class","svelte-1ai9hff"),se(r,"class","svelte-1ai9hff")},m(k,j){C(k,r,j),x(r,e),v&&v.m(e,null),x(e,t),w&&w.m(e,null),x(e,n),x(e,a),x(e,s),I[l].m(e,null),x(e,u),x(e,f),x(e,d),x(e,c),x(c,h),x(c,N),x(c,y),i[11](r),b=!0,c.focus(),S||(D=[pe(c,"click",i[7]),pe(e,"click",vt(i[10])),pe(r,"close",i[12]),pe(r,"click",zr(i[13]))],S=!0)},p(k,[j]){v&&v.p&&(!b||j&16384)&&wt(v,A,k,k[14],b?kt(A,k[14],j,l1):yt(k[14]),Mu),w&&w.p&&(!b||j&16384)&&wt(w,E,k,k[14],b?kt(E,k[14],j,null):yt(k[14]),null);let O=l;l=L(k),l===O?I[l].p(k,j):(xe(),Z(I[O],1,1,()=>{I[O]=null}),Ve(),o=I[l],o?o.p(k,j):(o=I[l]=B[l](k),o.c()),Y(o,1),o.m(e,u)),(!b||j&8)&&g!==(g=k[3].length+"")&&fe(N,g)},i(k){b||(Y(v,k),Y(w,k),Y(o),b=!0)},o(k){Z(v,k),Z(w,k),Z(o),b=!1},d(k){k&&m(r),v&&v.d(k),w&&w.d(k),I[l].d(),i[11](null),S=!1,st(D)}}}function p1(i,r,e){let t,n,a,{$$slots:s={},$$scope:l}=r,{show_attack_modal:o}=r,{parent_node:u}=r,{data:f}=r,d;const c=Er();Ye(i,c,v=>e(16,a=v));const h=Ar();Ye(i,h,v=>e(15,n=v));let g=new In;function N(v){t.includes(v)?e(3,t=t.filter(E=>E!==v)):t.push(v),e(3,t)}window.da_to_off_callback=function(v){N(v)};function y(){let v=0,E=200,w=100;for(const B of t){let I=f.da_to_off.results.bindings.find(L=>L.off_tech_id.value.replace(/ |\./g,"")==B);I&&(Zr(c,h,u,"attackSelectorNode",I.off_tech_label.value,"d3f:"+I.off_tech_id.value,u.data.sequence,u.position.x+v*E,u.position.y+w,182,63,I.off_artifact_rel_label.value,"attackRightSource","attackLeftTarget",!1),v+=1)}c.set(a),h.set(n),d&&d.close(),e(3,t=[])}function b(v){ur.call(this,i,v)}function S(v){mt[v?"unshift":"push"](()=>{d=v,e(2,d)})}const D=()=>e(0,o=!1),A=()=>{d.close(),e(3,t=[])};return i.$$set=v=>{"show_attack_modal"in v&&e(0,o=v.show_attack_modal),"parent_node"in v&&e(8,u=v.parent_node),"data"in v&&e(1,f=v.data),"$$scope"in v&&e(14,l=v.$$scope)},i.$$.update=()=>{i.$$.dirty&5&&o&&d&&(d.showModal(),g.reset())},e(3,t=[]),[o,f,d,t,c,h,g,y,u,s,b,S,D,A,l]}class g1 extends Ke{constructor(r){super(),et(this,r,p1,_1,qe,{show_attack_modal:0,parent_node:8,data:1})}}function Vu(i,r,e){const t=i.slice();return t[23]=r[e],t}const m1=i=>({}),Hu=i=>({});function v1(i){let r;return{c(){r=P("No related defensive techniques in this release.")},l(e){r=q(e,"No related defensive techniques in this release.")},m(e,t){C(e,r,t)},p:Ce,i:Ce,o:Ce,d(e){e&&m(r)}}}function b1(i){let r,e,t,n,a,s=i[4],l,o;function u(c){i[14](c)}let f={toggles:i[5]};i[4]!==void 0&&(f.selected=i[4]),t=new Wf({props:f}),mt.push(()=>$t(t,"selected",u));let d=Gu(i);return{c(){r=re("br"),e=ae(),ve(t.$$.fragment),a=ae(),d.c(),l=De()},l(c){r=ne(c,"BR",{}),e=le(c),be(t.$$.fragment,c),a=le(c),d.l(c),l=De()},m(c,h){C(c,r,h),C(c,e,h),we(t,c,h),C(c,a,h),d.m(c,h),C(c,l,h),o=!0},p(c,h){const g={};h&32&&(g.toggles=c[5]),!n&&h&16&&(n=!0,g.selected=c[4],Xt(()=>n=!1)),t.$set(g),h&16&&qe(s,s=c[4])?(xe(),Z(d,1,1,Ce),Ve(),d=Gu(c),d.c(),Y(d,1),d.m(l.parentNode,l)):d.p(c,h)},i(c){o||(Y(t.$$.fragment,c),Y(d),o=!0)},o(c){Z(t.$$.fragment,c),Z(d),o=!1},d(c){c&&(m(r),m(e),m(a),m(l)),ye(t,c),d.d(c)}}}function w1(i){let r,e="Loading...";return{c(){r=re("div"),r.textContent=e},l(t){r=ne(t,"DIV",{"data-svelte-h":!0}),Me(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,n){C(t,r,n)},p:Ce,i:Ce,o:Ce,d(t){t&&m(r)}}}function zu(i){let r=!i[4].includes(i[23].def_tactic_label.value),e,t=r&&Xu(i);return{c(){t&&t.c(),e=De()},l(n){t&&t.l(n),e=De()},m(n,a){t&&t.m(n,a),C(n,e,a)},p(n,a){a&18&&(r=!n[4].includes(n[23].def_tactic_label.value)),r?t?t.p(n,a):(t=Xu(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&m(e),t&&t.d(n)}}}function Xu(i){let r=me(i[23].def_tech.value)+"",e,t,n=i[23].def_tech_label.value+"",a,s,l="-->",o,u,f=i[23].def_artifact_rel_label.value.replace(/ /g,"")+"",d,c,h=me(i[23].def_artifact.value)+"",g,N,y=i[23].def_artifact_label.value+"",b,S,D,A,v=me(i[23].def_artifact.value)+"",E,w,B=me(i[23].def_tech.value)+"",I,L,k=me(i[23].def_tech.value)+"",j,O,R=me(i[23].def_artifact.value)+"",G,Q,oe=me(i[23].def_artifact.value)+"",ee,X;function H(M,J){return J&66&&(D=null),D==null&&(D=!!M[6].includes(me(M[23].def_tech.value))),D?k1:y1}let V=H(i,-1),W=V(i);return{c(){e=P(r),t=P('["'),a=P(n),s=P('"] '),o=P(l),u=P(`
                | `),d=P(f),c=P(" | "),g=P(h),N=P('["'),b=P(y),S=P(`"];
                `),W.c(),A=P(` 
                class `),E=P(v),w=P(` ArtifactNode;
                click `),I=P(B),L=P(` href "javascript:da_to_def_callback('`),j=P(k),O=P(`')";
                click `),G=P(R),Q=P(' href "/dao/artifact/d3f:'),ee=P(oe),X=P('";')},l(M){e=q(M,r),t=q(M,'["'),a=q(M,n),s=q(M,'"] '),o=q(M,l),u=q(M,`
                | `),d=q(M,f),c=q(M," | "),g=q(M,h),N=q(M,'["'),b=q(M,y),S=q(M,`"];
                `),W.l(M),A=q(M,` 
                class `),E=q(M,v),w=q(M,` ArtifactNode;
                click `),I=q(M,B),L=q(M,` href "javascript:da_to_def_callback('`),j=q(M,k),O=q(M,`')";
                click `),G=q(M,R),Q=q(M,' href "/dao/artifact/d3f:'),ee=q(M,oe),X=q(M,'";')},m(M,J){C(M,e,J),C(M,t,J),C(M,a,J),C(M,s,J),C(M,o,J),C(M,u,J),C(M,d,J),C(M,c,J),C(M,g,J),C(M,N,J),C(M,b,J),C(M,S,J),W.m(M,J),C(M,A,J),C(M,E,J),C(M,w,J),C(M,I,J),C(M,L,J),C(M,j,J),C(M,O,J),C(M,G,J),C(M,Q,J),C(M,ee,J),C(M,X,J)},p(M,J){J&2&&r!==(r=me(M[23].def_tech.value)+"")&&fe(e,r),J&2&&n!==(n=M[23].def_tech_label.value+"")&&fe(a,n),J&2&&f!==(f=M[23].def_artifact_rel_label.value.replace(/ /g,"")+"")&&fe(d,f),J&2&&h!==(h=me(M[23].def_artifact.value)+"")&&fe(g,h),J&2&&y!==(y=M[23].def_artifact_label.value+"")&&fe(b,y),V===(V=H(M,J))&&W?W.p(M,J):(W.d(1),W=V(M),W&&(W.c(),W.m(A.parentNode,A))),J&2&&v!==(v=me(M[23].def_artifact.value)+"")&&fe(E,v),J&2&&B!==(B=me(M[23].def_tech.value)+"")&&fe(I,B),J&2&&k!==(k=me(M[23].def_tech.value)+"")&&fe(j,k),J&2&&R!==(R=me(M[23].def_artifact.value)+"")&&fe(G,R),J&2&&oe!==(oe=me(M[23].def_artifact.value)+"")&&fe(ee,oe)},d(M){M&&(m(e),m(t),m(a),m(s),m(o),m(u),m(d),m(c),m(g),m(N),m(b),m(S),m(A),m(E),m(w),m(I),m(L),m(j),m(O),m(G),m(Q),m(ee),m(X)),W.d(M)}}}function y1(i){let r,e=me(i[23].def_tech.value)+"",t,n;return{c(){r=P("class "),t=P(e),n=P(" DefensiveTechniqueNode;")},l(a){r=q(a,"class "),t=q(a,e),n=q(a," DefensiveTechniqueNode;")},m(a,s){C(a,r,s),C(a,t,s),C(a,n,s)},p(a,s){s&2&&e!==(e=me(a[23].def_tech.value)+"")&&fe(t,e)},d(a){a&&(m(r),m(t),m(n))}}}function k1(i){let r,e=me(i[23].def_tech.value)+"",t,n;return{c(){r=P("class "),t=P(e),n=P(" SelectedDefensiveTechniqueNode;")},l(a){r=q(a,"class "),t=q(a,e),n=q(a," SelectedDefensiveTechniqueNode;")},m(a,s){C(a,r,s),C(a,t,s),C(a,n,s)},p(a,s){s&2&&e!==(e=me(a[23].def_tech.value)+"")&&fe(t,e)},d(a){a&&(m(r),m(t),m(n))}}}function $u(i){let r=i[3].edge_is_unique(i[23].def_tech_label.value,i[23].def_artifact_rel_label.value,i[23].def_artifact_label.value),e,t=r&&zu(i);return{c(){t&&t.c(),e=De()},l(n){t&&t.l(n),e=De()},m(n,a){t&&t.m(n,a),C(n,e,a)},p(n,a){a&10&&(r=n[3].edge_is_unique(n[23].def_tech_label.value,n[23].def_artifact_rel_label.value,n[23].def_artifact_label.value)),r?t?t.p(n,a):(t=zu(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&m(e),t&&t.d(n)}}}function D1(i){let r,e,t=He(i[1].da_to_def.results.bindings),n=[];for(let a=0;a<t.length;a+=1)n[a]=$u(Vu(i,t,a));return{c(){r=P(`graph LR;
          `);for(let a=0;a<n.length;a+=1)n[a].c();e=De()},l(a){r=q(a,`graph LR;
          `);for(let s=0;s<n.length;s+=1)n[s].l(a);e=De()},m(a,s){C(a,r,s);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(a,s);C(a,e,s)},p(a,s){if(s&90){t=He(a[1].da_to_def.results.bindings);let l;for(l=0;l<t.length;l+=1){const o=Vu(a,t,l);n[l]?n[l].p(o,s):(n[l]=$u(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(a){a&&(m(r),m(e)),Dt(n,a)}}}function Gu(i){let r,e;return r=new Xr({props:{$$slots:{default:[D1]},$$scope:{ctx:i}}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n&262234&&(a.$$scope={dirty:n,ctx:t}),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function E1(i){let r,e,t,n,a,s,l,o,u,f,d,c,h,g=i[6].length+"",N,y,b,S,D;const A=i[12].header,v=bt(A,i,i[18],Hu),E=i[12].default,w=bt(E,i,i[18],null),B=[w1,b1,v1],I=[];function L(k,j){return k[1]?k[1].da_to_def.results.bindings.length>0?1:2:0}return l=L(i),o=I[l]=B[l](i),{c(){r=re("dialog"),e=re("div"),v&&v.c(),t=P(`
    Select Countermeasure Techniques
    `),w&&w.c(),n=ae(),a=re("hr"),s=ae(),o.c(),u=ae(),f=re("hr"),d=ae(),c=re("button"),h=P("Insert ("),N=P(g),y=P(")"),this.h()},l(k){r=ne(k,"DIALOG",{class:!0});var j=ge(r);e=ne(j,"DIV",{class:!0});var O=ge(e);v&&v.l(O),t=q(O,`
    Select Countermeasure Techniques
    `),w&&w.l(O),n=le(O),a=ne(O,"HR",{}),s=le(O),o.l(O),u=le(O),f=ne(O,"HR",{}),d=le(O),c=ne(O,"BUTTON",{class:!0});var R=ge(c);h=q(R,"Insert ("),N=q(R,g),y=q(R,")"),R.forEach(m),O.forEach(m),j.forEach(m),this.h()},h(){c.autofocus=!0,se(c,"class","svelte-1yq7x1p"),se(e,"class","svelte-1yq7x1p"),se(r,"class","svelte-1yq7x1p")},m(k,j){C(k,r,j),x(r,e),v&&v.m(e,null),x(e,t),w&&w.m(e,null),x(e,n),x(e,a),x(e,s),I[l].m(e,null),x(e,u),x(e,f),x(e,d),x(e,c),x(c,h),x(c,N),x(c,y),i[15](r),b=!0,c.focus(),S||(D=[pe(c,"click",i[9]),pe(e,"click",vt(i[13])),pe(r,"close",i[16]),pe(r,"click",zr(i[17]))],S=!0)},p(k,[j]){v&&v.p&&(!b||j&262144)&&wt(v,A,k,k[18],b?kt(A,k[18],j,m1):yt(k[18]),Hu),w&&w.p&&(!b||j&262144)&&wt(w,E,k,k[18],b?kt(E,k[18],j,null):yt(k[18]),null);let O=l;l=L(k),l===O?I[l].p(k,j):(xe(),Z(I[O],1,1,()=>{I[O]=null}),Ve(),o=I[l],o?o.p(k,j):(o=I[l]=B[l](k),o.c()),Y(o,1),o.m(e,u)),(!b||j&64)&&g!==(g=k[6].length+"")&&fe(N,g)},i(k){b||(Y(v,k),Y(w,k),Y(o),b=!0)},o(k){Z(v,k),Z(w,k),Z(o),b=!1},d(k){k&&m(r),v&&v.d(k),w&&w.d(k),I[l].d(),i[15](null),S=!1,st(D)}}}function A1(i,r,e){let t,n,a,{$$slots:s={},$$scope:l}=r,{show_defend_modal:o}=r,{parent_node:u}=r,{data:f}=r,d;const c=Er();Ye(i,c,L=>e(20,a=L));const h=Ar();Ye(i,h,L=>e(19,n=L));let g=new In;function N(L){t.includes(L)?e(6,t=t.filter(k=>k!==L)):t.push(L),e(6,t)}window.da_to_def_callback=function(L){N(L)};function y(){let L=0,k=200,j=100;for(const O of t){let R=f.da_to_def.results.bindings.find(G=>me(G.def_tech.value)==O);R&&(Zr(c,h,u,"countermeasureSelectorNode",R.def_tech_label.value,"d3f:"+me(R.def_tech.value),u.data.sequence,u.position.x+L*k,u.position.y-j,182,63,R.def_artifact_rel_label.value,"defenseBottomSource","defenseRightTarget",!1),L+=1)}c.set(a),h.set(n),d&&d.close(),e(6,t=[])}let b=new Set,S=[],D=[];Xf(S,D)&&(D=[]);function A(L){for(const k of t){let j=f.da_to_def.results.bindings.find(O=>me(O.def_tech.value)==k);L.includes(j.def_tactic_label.value)&&e(6,t=t.filter(O=>O!==k))}e(6,t)}function v(L){ur.call(this,i,L)}function E(L){D=L,e(4,D)}function w(L){mt[L?"unshift":"push"](()=>{d=L,e(2,d)})}const B=()=>e(0,o=!1),I=()=>{d.close(),e(6,t=[])};return i.$$set=L=>{"show_defend_modal"in L&&e(0,o=L.show_defend_modal),"parent_node"in L&&e(10,u=L.parent_node),"data"in L&&e(1,f=L.data),"$$scope"in L&&e(18,l=L.$$scope)},i.$$.update=()=>{i.$$.dirty&5&&o&&d&&(d.showModal(),e(3,g=new In)),i.$$.dirty&2050&&f&&(f.da_to_def.results.bindings.forEach(L=>{b.add(L.def_tactic_label.value)}),e(11,b),e(1,f)),i.$$.dirty&2048&&e(5,S=Array.from(b).sort(function(L,k){return es[L]-es[k]})),i.$$.dirty&16&&A(D),i.$$.dirty&24&&g.reset(D)},e(6,t=[]),[o,f,d,g,D,S,t,c,h,y,u,b,s,v,E,w,B,I,l]}class C1 extends Ke{constructor(r){super(),et(this,r,A1,E1,qe,{show_defend_modal:0,parent_node:10,data:1})}}function Wu(i,r,e){const t=i.slice();return t[27]=r[e],t}function Qu(i,r,e){const t=i.slice();return t[30]=r[e],t}function Yu(i,r,e){const t=i.slice();return t[33]=r[e],t}function Ju(i,r,e){const t=i.slice();return t[27]=r[e],t}function Zu(i,r,e){const t=i.slice();return t[30]=r[e],t}const N1=i=>({}),Ku=i=>({});function T1(i){let r;return{c(){r=P("No related weaknesses in this release")},l(e){r=q(e,"No related weaknesses in this release")},m(e,t){C(e,r,t)},p:Ce,i:Ce,o:Ce,d(e){e&&m(r)}}}function S1(i){let r,e;return r=new Xr({props:{$$slots:{default:[F1]},$$scope:{ctx:i}}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n[0]&8389054&&(a.$$scope={dirty:n,ctx:t}),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function R1(i){let r,e="Loading...";return{c(){r=re("div"),r.textContent=e},l(t){r=ne(t,"DIV",{"data-svelte-h":!0}),Me(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,n){C(t,r,n)},p:Ce,i:Ce,o:Ce,d(t){t&&m(r)}}}function eo(i){let r,e=He(i[33]["d3f:outbound"]),t=[];for(let n=0;n<e.length;n+=1)t[n]=no(Ju(i,e,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();r=De()},l(n){for(let a=0;a<t.length;a+=1)t[a].l(n);r=De()},m(n,a){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(n,a);C(n,r,a)},p(n,a){if(a[0]&430){e=He(n[33]["d3f:outbound"]);let s;for(s=0;s<e.length;s+=1){const l=Ju(n,e,s);t[s]?t[s].p(l,a):(t[s]=no(l),t[s].c(),t[s].m(r.parentNode,r))}for(;s<t.length;s+=1)t[s].d(1);t.length=e.length}},d(n){n&&m(r),Dt(t,n)}}}function to(i){let r,e=i[33]["@id"]+"",t,n;return{c(){r=P("class "),t=P(e),n=P(" selected_inbound_node;")},l(a){r=q(a,"class "),t=q(a,e),n=q(a," selected_inbound_node;")},m(a,s){C(a,r,s),C(a,t,s),C(a,n,s)},p(a,s){s[0]&160&&e!==(e=a[33]["@id"]+"")&&fe(t,e)},d(a){a&&(m(r),m(t),m(n))}}}function ro(i){let r=i[33]["@id"]+"",e,t,n=i[33]["rdfs:label"][0]+"",a,s,l="-->",o,u,f=me(i[27]["@id"])+"",d,c,h=i[30]["@id"]+"",g,N,y=i[7].i(i[30]["@id"])["rdfs:label"][0]+"",b,S,D=i[33]["@id"]+"",A,v,E=i[33]["@id"]+"",w,B,I,L,k=i[8].includes(i[33]["@id"]),j,O=i[30]["@id"]+"",R,G,Q=i[30]["@id"]+"",oe,ee,X,H,V=i[33]["@id"]+"",W,M,J=i[33]["@id"]+"",Fe,Le,de=i[30]["@id"]+"",_e,ue,Ee=i[3](i[30])+"",Xe,ct,We=k&&to(i);return{c(){e=P(r),t=P('["'),a=P(n),s=P('"] '),o=P(l),u=P(" | "),d=P(f),c=P(" | "),g=P(h),N=P('["'),b=P(y),S=P(`"];
                class `),A=P(D),v=P(" inbound_node; style "),w=P(E),B=P(" fill:"),I=P(i[1]),L=P(`;
                `),We&&We.c(),j=P(`
                class `),R=P(O),G=P(" RootArtifactNode; style "),oe=P(Q),ee=P(" fill:"),X=P(i[2]),H=P(`;
                click `),W=P(V),M=P(` href "javascript:da_to_weak_callback('`),Fe=P(J),Le=P(`')"; click `),_e=P(de),ue=P(' href "'),Xe=P(Ee),ct=P('";')},l(he){e=q(he,r),t=q(he,'["'),a=q(he,n),s=q(he,'"] '),o=q(he,l),u=q(he," | "),d=q(he,f),c=q(he," | "),g=q(he,h),N=q(he,'["'),b=q(he,y),S=q(he,`"];
                class `),A=q(he,D),v=q(he," inbound_node; style "),w=q(he,E),B=q(he," fill:"),I=q(he,i[1]),L=q(he,`;
                `),We&&We.l(he),j=q(he,`
                class `),R=q(he,O),G=q(he," RootArtifactNode; style "),oe=q(he,Q),ee=q(he," fill:"),X=q(he,i[2]),H=q(he,`;
                click `),W=q(he,V),M=q(he,` href "javascript:da_to_weak_callback('`),Fe=q(he,J),Le=q(he,`')"; click `),_e=q(he,de),ue=q(he,' href "'),Xe=q(he,Ee),ct=q(he,'";')},m(he,Ie){C(he,e,Ie),C(he,t,Ie),C(he,a,Ie),C(he,s,Ie),C(he,o,Ie),C(he,u,Ie),C(he,d,Ie),C(he,c,Ie),C(he,g,Ie),C(he,N,Ie),C(he,b,Ie),C(he,S,Ie),C(he,A,Ie),C(he,v,Ie),C(he,w,Ie),C(he,B,Ie),C(he,I,Ie),C(he,L,Ie),We&&We.m(he,Ie),C(he,j,Ie),C(he,R,Ie),C(he,G,Ie),C(he,oe,Ie),C(he,ee,Ie),C(he,X,Ie),C(he,H,Ie),C(he,W,Ie),C(he,M,Ie),C(he,Fe,Ie),C(he,Le,Ie),C(he,_e,Ie),C(he,ue,Ie),C(he,Xe,Ie),C(he,ct,Ie)},p(he,Ie){Ie[0]&160&&r!==(r=he[33]["@id"]+"")&&fe(e,r),Ie[0]&160&&n!==(n=he[33]["rdfs:label"][0]+"")&&fe(a,n),Ie[0]&160&&f!==(f=me(he[27]["@id"])+"")&&fe(d,f),Ie[0]&160&&h!==(h=he[30]["@id"]+"")&&fe(g,h),Ie[0]&160&&y!==(y=he[7].i(he[30]["@id"])["rdfs:label"][0]+"")&&fe(b,y),Ie[0]&160&&D!==(D=he[33]["@id"]+"")&&fe(A,D),Ie[0]&160&&E!==(E=he[33]["@id"]+"")&&fe(w,E),Ie[0]&2&&fe(I,he[1]),Ie[0]&416&&(k=he[8].includes(he[33]["@id"])),k?We?We.p(he,Ie):(We=to(he),We.c(),We.m(j.parentNode,j)):We&&(We.d(1),We=null),Ie[0]&160&&O!==(O=he[30]["@id"]+"")&&fe(R,O),Ie[0]&160&&Q!==(Q=he[30]["@id"]+"")&&fe(oe,Q),Ie[0]&4&&fe(X,he[2]),Ie[0]&160&&V!==(V=he[33]["@id"]+"")&&fe(W,V),Ie[0]&160&&J!==(J=he[33]["@id"]+"")&&fe(Fe,J),Ie[0]&160&&de!==(de=he[30]["@id"]+"")&&fe(_e,de),Ie[0]&168&&Ee!==(Ee=he[3](he[30])+"")&&fe(Xe,Ee)},d(he){he&&(m(e),m(t),m(a),m(s),m(o),m(u),m(d),m(c),m(g),m(N),m(b),m(S),m(A),m(v),m(w),m(B),m(I),m(L),m(j),m(R),m(G),m(oe),m(ee),m(X),m(H),m(W),m(M),m(Fe),m(Le),m(_e),m(ue),m(Xe),m(ct)),We&&We.d(he)}}}function no(i){let r,e=He(i[33][i[27]["@id"]]),t=[];for(let n=0;n<e.length;n+=1)t[n]=ro(Zu(i,e,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();r=De()},l(n){for(let a=0;a<t.length;a+=1)t[a].l(n);r=De()},m(n,a){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(n,a);C(n,r,a)},p(n,a){if(a[0]&430){e=He(n[33][n[27]["@id"]]);let s;for(s=0;s<e.length;s+=1){const l=Zu(n,e,s);t[s]?t[s].p(l,a):(t[s]=ro(l),t[s].c(),t[s].m(r.parentNode,r))}for(;s<t.length;s+=1)t[s].d(1);t.length=e.length}},d(n){n&&m(r),Dt(t,n)}}}function io(i){let r,e=i[33]["d3f:outbound"]&&eo(i);return{c(){e&&e.c(),r=De()},l(t){e&&e.l(t),r=De()},m(t,n){e&&e.m(t,n),C(t,r,n)},p(t,n){t[33]["d3f:outbound"]?e?e.p(t,n):(e=eo(t),e.c(),e.m(r.parentNode,r)):e&&(e.d(1),e=null)},d(t){t&&m(r),e&&e.d(t)}}}function so(i){let r,e=He(i[7].i(i[5].description["@id"])["d3f:outbound"]),t=[];for(let n=0;n<e.length;n+=1)t[n]=lo(Wu(i,e,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();r=De()},l(n){for(let a=0;a<t.length;a+=1)t[a].l(n);r=De()},m(n,a){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(n,a);C(n,r,a)},p(n,a){if(a[0]&184){e=He(n[7].i(n[5].description["@id"])["d3f:outbound"]);let s;for(s=0;s<e.length;s+=1){const l=Wu(n,e,s);t[s]?t[s].p(l,a):(t[s]=lo(l),t[s].c(),t[s].m(r.parentNode,r))}for(;s<t.length;s+=1)t[s].d(1);t.length=e.length}},d(n){n&&m(r),Dt(t,n)}}}function ao(i){let r=i[5].description["@id"]+"",e,t,n=i[7].i(i[5].description["@id"])["rdfs:label"][0]+"",a,s,l="-->",o,u,f=me(i[27]["@id"])+"",d,c,h=i[30]["@id"]+"",g,N,y=i[7].graph[i[7].index[i[30]["@id"]]]["rdfs:label"][0]+"",b,S,D=i[5].description["@id"]+"",A,v,E=i[30]["@id"]+"",w,B,I=i[5].description["@id"]+"",L,k,j=i[3](i[5].description["@id"])+"",O,R,G=i[30]["@id"]+"",Q,oe,ee=i[4](i[30])+"",X,H;return{c(){e=P(r),t=P('["'),a=P(n),s=P('"] '),o=P(l),u=P(" | "),d=P(f),c=P(" | "),g=P(h),N=P('["'),b=P(y),S=P('"]; class '),A=P(D),v=P(" RootArtifactNode; class "),w=P(E),B=P(` ArtifactNode;
              click `),L=P(I),k=P(' href "'),O=P(j),R=P('"; click '),Q=P(G),oe=P(' href "'),X=P(ee),H=P('";')},l(V){e=q(V,r),t=q(V,'["'),a=q(V,n),s=q(V,'"] '),o=q(V,l),u=q(V," | "),d=q(V,f),c=q(V," | "),g=q(V,h),N=q(V,'["'),b=q(V,y),S=q(V,'"]; class '),A=q(V,D),v=q(V," RootArtifactNode; class "),w=q(V,E),B=q(V,` ArtifactNode;
              click `),L=q(V,I),k=q(V,' href "'),O=q(V,j),R=q(V,'"; click '),Q=q(V,G),oe=q(V,' href "'),X=q(V,ee),H=q(V,'";')},m(V,W){C(V,e,W),C(V,t,W),C(V,a,W),C(V,s,W),C(V,o,W),C(V,u,W),C(V,d,W),C(V,c,W),C(V,g,W),C(V,N,W),C(V,b,W),C(V,S,W),C(V,A,W),C(V,v,W),C(V,w,W),C(V,B,W),C(V,L,W),C(V,k,W),C(V,O,W),C(V,R,W),C(V,Q,W),C(V,oe,W),C(V,X,W),C(V,H,W)},p(V,W){W[0]&32&&r!==(r=V[5].description["@id"]+"")&&fe(e,r),W[0]&160&&n!==(n=V[7].i(V[5].description["@id"])["rdfs:label"][0]+"")&&fe(a,n),W[0]&160&&f!==(f=me(V[27]["@id"])+"")&&fe(d,f),W[0]&160&&h!==(h=V[30]["@id"]+"")&&fe(g,h),W[0]&160&&y!==(y=V[7].graph[V[7].index[V[30]["@id"]]]["rdfs:label"][0]+"")&&fe(b,y),W[0]&32&&D!==(D=V[5].description["@id"]+"")&&fe(A,D),W[0]&160&&E!==(E=V[30]["@id"]+"")&&fe(w,E),W[0]&32&&I!==(I=V[5].description["@id"]+"")&&fe(L,I),W[0]&40&&j!==(j=V[3](V[5].description["@id"])+"")&&fe(O,j),W[0]&160&&G!==(G=V[30]["@id"]+"")&&fe(Q,G),W[0]&176&&ee!==(ee=V[4](V[30])+"")&&fe(X,ee)},d(V){V&&(m(e),m(t),m(a),m(s),m(o),m(u),m(d),m(c),m(g),m(N),m(b),m(S),m(A),m(v),m(w),m(B),m(L),m(k),m(O),m(R),m(Q),m(oe),m(X),m(H))}}}function lo(i){let r,e=He(i[7].i(i[5].description["@id"])[i[27]["@id"]]),t=[];for(let n=0;n<e.length;n+=1)t[n]=ao(Qu(i,e,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();r=De()},l(n){for(let a=0;a<t.length;a+=1)t[a].l(n);r=De()},m(n,a){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(n,a);C(n,r,a)},p(n,a){if(a[0]&184){e=He(n[7].i(n[5].description["@id"])[n[27]["@id"]]);let s;for(s=0;s<e.length;s+=1){const l=Qu(n,e,s);t[s]?t[s].p(l,a):(t[s]=ao(l),t[s].c(),t[s].m(r.parentNode,r))}for(;s<t.length;s+=1)t[s].d(1);t.length=e.length}},d(n){n&&m(r),Dt(t,n)}}}function F1(i){let r,e,t=i[7].i(i[5].description["@id"])&&i[7].i(i[5].description["@id"])["d3f:outbound"],n,a=He(i[7].graph.filter(i[19])),s=[];for(let o=0;o<a.length;o+=1)s[o]=io(Yu(i,a,o));let l=t&&so(i);return{c(){r=P(`graph LR;
        `);for(let o=0;o<s.length;o+=1)s[o].c();e=ae(),l&&l.c(),n=De()},l(o){r=q(o,`graph LR;
        `);for(let u=0;u<s.length;u+=1)s[u].l(o);e=le(o),l&&l.l(o),n=De()},m(o,u){C(o,r,u);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(o,u);C(o,e,u),l&&l.m(o,u),C(o,n,u)},p(o,u){if(u[0]&430){a=He(o[7].graph.filter(o[19]));let f;for(f=0;f<a.length;f+=1){const d=Yu(o,a,f);s[f]?s[f].p(d,u):(s[f]=io(d),s[f].c(),s[f].m(e.parentNode,e))}for(;f<s.length;f+=1)s[f].d(1);s.length=a.length}u[0]&160&&(t=o[7].i(o[5].description["@id"])&&o[7].i(o[5].description["@id"])["d3f:outbound"]),t?l?l.p(o,u):(l=so(o),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},d(o){o&&(m(r),m(e),m(n)),Dt(s,o),l&&l.d(o)}}}function I1(i){let r,e,t,n,a,s,l,o,u,f,d,c,h,g=i[8].length+"",N,y,b,S,D;const A=i[17].header,v=bt(A,i,i[23],Ku),E=i[17].default,w=bt(E,i,i[23],null),B=[R1,S1,T1],I=[];function L(k,j){return k[5]?k[7].graph.length>0?1:2:0}return l=L(i),o=I[l]=B[l](i),{c(){r=re("dialog"),e=re("div"),v&&v.c(),t=P(`
    Select Weaknesses
    `),w&&w.c(),n=ae(),a=re("hr"),s=ae(),o.c(),u=ae(),f=re("hr"),d=ae(),c=re("button"),h=P("Insert ("),N=P(g),y=P(")"),this.h()},l(k){r=ne(k,"DIALOG",{class:!0});var j=ge(r);e=ne(j,"DIV",{class:!0});var O=ge(e);v&&v.l(O),t=q(O,`
    Select Weaknesses
    `),w&&w.l(O),n=le(O),a=ne(O,"HR",{}),s=le(O),o.l(O),u=le(O),f=ne(O,"HR",{}),d=le(O),c=ne(O,"BUTTON",{class:!0});var R=ge(c);h=q(R,"Insert ("),N=q(R,g),y=q(R,")"),R.forEach(m),O.forEach(m),j.forEach(m),this.h()},h(){c.autofocus=!0,se(c,"class","svelte-1resfch"),se(e,"class","svelte-1resfch"),se(r,"class","svelte-1resfch")},m(k,j){C(k,r,j),x(r,e),v&&v.m(e,null),x(e,t),w&&w.m(e,null),x(e,n),x(e,a),x(e,s),I[l].m(e,null),x(e,u),x(e,f),x(e,d),x(e,c),x(c,h),x(c,N),x(c,y),i[20](r),b=!0,c.focus(),S||(D=[pe(c,"click",i[11]),pe(e,"click",vt(i[18])),pe(r,"close",i[21]),pe(r,"click",zr(i[22]))],S=!0)},p(k,j){v&&v.p&&(!b||j[0]&8388608)&&wt(v,A,k,k[23],b?kt(A,k[23],j,N1):yt(k[23]),Ku),w&&w.p&&(!b||j[0]&8388608)&&wt(w,E,k,k[23],b?kt(E,k[23],j,null):yt(k[23]),null);let O=l;l=L(k),l===O?I[l].p(k,j):(xe(),Z(I[O],1,1,()=>{I[O]=null}),Ve(),o=I[l],o?o.p(k,j):(o=I[l]=B[l](k),o.c()),Y(o,1),o.m(e,u)),(!b||j[0]&256)&&g!==(g=k[8].length+"")&&fe(N,g)},i(k){b||(Y(v,k),Y(w,k),Y(o),b=!0)},o(k){Z(v,k),Z(w,k),Z(o),b=!1},d(k){k&&m(r),v&&v.d(k),w&&w.d(k),I[l].d(),i[20](null),S=!1,st(D)}}}function O1(i,r,e){let t,n,a,{$$slots:s={},$$scope:l}=r,{empty_message:o="has no direct neighbors in this release."}=r,{outbound_color:u="#fff4dd"}=r,{inbound_color:f="#fff4dd"}=r,{root_color:d="#fff4dd"}=r,{link_function:c=R=>`/dao/artifact/${R["@id"]}`}=r,{inbound_link_function:h=c}=r,{root_link_function:g=R=>`/dao/artifact/${R["@id"]}`}=r,{outbound_link_function:N=c}=r,{show_weakness_modal:y}=r,{parent_node:b}=r,{data:S}=r,D;const A=Er();Ye(i,A,R=>e(25,a=R));const v=Ar();Ye(i,v,R=>e(24,n=R));let E;function w(R){t.includes(R)?e(8,t=t.filter(G=>G!==R)):t.push(R),e(8,t),e(8,t)}window.da_to_weak_callback=function(R){w(R)};function B(){let R=0,G=200,Q=100;for(const oe of t){let ee=S.da_to_weak["@graph"].find(X=>X["@id"]==oe);ee&&(Zr(A,v,b,"vulnerabilitySelectorNode",ee["rdfs:label"],ee["d3f:cwe-id"],b.data.sequence,b.position.x+R*G,b.position.y+Q,182,63,ee["d3f:outbound"][0]["@id"].replace("d3f:",""),"vulnerabilityRightSource","vulnerabilityLeftTarget",!1),R+=1)}A.set(a),v.set(n),D&&D.close(),e(8,t=[])}function I(R){ur.call(this,i,R)}const L=R=>R["@id"]!=S.description["@id"];function k(R){mt[R?"unshift":"push"](()=>{D=R,e(6,D)})}const j=()=>e(0,y=!1),O=()=>{D.close(),e(8,t=[])};return i.$$set=R=>{"empty_message"in R&&e(12,o=R.empty_message),"outbound_color"in R&&e(13,u=R.outbound_color),"inbound_color"in R&&e(1,f=R.inbound_color),"root_color"in R&&e(2,d=R.root_color),"link_function"in R&&e(14,c=R.link_function),"inbound_link_function"in R&&e(15,h=R.inbound_link_function),"root_link_function"in R&&e(3,g=R.root_link_function),"outbound_link_function"in R&&e(4,N=R.outbound_link_function),"show_weakness_modal"in R&&e(0,y=R.show_weakness_modal),"parent_node"in R&&e(16,b=R.parent_node),"data"in R&&e(5,S=R.data),"$$scope"in R&&e(23,l=R.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&65&&y&&D&&D.showModal(),i.$$.dirty[0]&32&&S&&e(7,E=new $f(S.da_to_weak,{index:!0}))},e(8,t=[]),[y,f,d,g,N,S,D,E,t,A,v,B,o,u,c,h,b,s,I,L,k,j,O,l]}class L1 extends Ke{constructor(r){super(),et(this,r,O1,I1,qe,{empty_message:12,outbound_color:13,inbound_color:1,root_color:2,link_function:14,inbound_link_function:15,root_link_function:3,outbound_link_function:4,show_weakness_modal:0,parent_node:16,data:5},null,[-1,-1])}}function uo(i,r,e){const t=i.slice();return t[31]=r[e],t}function oo(i,r,e){const t=i.slice();return t[34]=r[e],t}function fo(i,r,e){const t=i.slice();return t[37]=r[e],t}const B1=i=>({}),co=i=>({});function P1(i){let r;return{c(){r=P("No related parts/control in this release")},l(e){r=q(e,"No related parts/control in this release")},m(e,t){C(e,r,t)},p:Ce,i:Ce,o:Ce,d(e){e&&m(r)}}}function q1(i){let r,e;return r=new Xr({props:{$$slots:{default:[M1]},$$scope:{ctx:i}}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n[0]&134217934&&(a.$$scope={dirty:n,ctx:t}),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function j1(i){let r,e="Loading...";return{c(){r=re("div"),r.textContent=e},l(t){r=ne(t,"DIV",{"data-svelte-h":!0}),Me(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,n){C(t,r,n)},p:Ce,i:Ce,o:Ce,d(t){t&&m(r)}}}function ho(i){let r,e=He(i[31]["d3f:outbound"].filter(i[23])),t=[];for(let n=0;n<e.length;n+=1)t[n]=wo(oo(i,e,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();r=De()},l(n){for(let a=0;a<t.length;a+=1)t[a].l(n);r=De()},m(n,a){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(n,a);C(n,r,a)},p(n,a){if(a[0]&206){e=He(n[31]["d3f:outbound"].filter(n[23]));let s;for(s=0;s<e.length;s+=1){const l=oo(n,e,s);t[s]?t[s].p(l,a):(t[s]=wo(l),t[s].c(),t[s].m(r.parentNode,r))}for(;s<t.length;s+=1)t[s].d(1);t.length=e.length}},d(n){n&&m(r),Dt(t,n)}}}function _o(i){let r,e,t=i[31]["@id"]!=i[2].data.d3f_class&&po(i),n=i[37]["@id"]!=i[2].data.d3f_class&&go(i);return{c(){t&&t.c(),r=ae(),n&&n.c(),e=De()},l(a){t&&t.l(a),r=le(a),n&&n.l(a),e=De()},m(a,s){t&&t.m(a,s),C(a,r,s),n&&n.m(a,s),C(a,e,s)},p(a,s){a[31]["@id"]!=a[2].data.d3f_class?t?t.p(a,s):(t=po(a),t.c(),t.m(r.parentNode,r)):t&&(t.d(1),t=null),a[37]["@id"]!=a[2].data.d3f_class?n?n.p(a,s):(n=go(a),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(a){a&&(m(r),m(e)),t&&t.d(a),n&&n.d(a)}}}function po(i){let r,e=i[31]["@id"]+"",t,n;return{c(){r=P("class "),t=P(e),n=P(" selected_outbound_node;")},l(a){r=q(a,"class "),t=q(a,e),n=q(a," selected_outbound_node;")},m(a,s){C(a,r,s),C(a,t,s),C(a,n,s)},p(a,s){s[0]&72&&e!==(e=a[31]["@id"]+"")&&fe(t,e)},d(a){a&&(m(r),m(t),m(n))}}}function go(i){let r,e=i[37]["@id"]+"",t,n;return{c(){r=P("class "),t=P(e),n=P(" selected_outbound_node;")},l(a){r=q(a,"class "),t=q(a,e),n=q(a," selected_outbound_node;")},m(a,s){C(a,r,s),C(a,t,s),C(a,n,s)},p(a,s){s[0]&74&&e!==(e=a[37]["@id"]+"")&&fe(t,e)},d(a){a&&(m(r),m(t),m(n))}}}function mo(i){let r,e=i[31]["@id"]+"",t,n,a=i[31]["@id"]+"",s,l,o=me(i[34]["@id"])+"",u,f,d=i[37]["@id"]+"",c,h;return{c(){r=P("click "),t=P(e),n=P(` href "javascript:da_to_neighbors_callback('`),s=P(a),l=P("', '"),u=P(o),f=P("','"),c=P(d),h=P(`')";`)},l(g){r=q(g,"click "),t=q(g,e),n=q(g,` href "javascript:da_to_neighbors_callback('`),s=q(g,a),l=q(g,"', '"),u=q(g,o),f=q(g,"','"),c=q(g,d),h=q(g,`')";`)},m(g,N){C(g,r,N),C(g,t,N),C(g,n,N),C(g,s,N),C(g,l,N),C(g,u,N),C(g,f,N),C(g,c,N),C(g,h,N)},p(g,N){N[0]&72&&e!==(e=g[31]["@id"]+"")&&fe(t,e),N[0]&72&&a!==(a=g[31]["@id"]+"")&&fe(s,a),N[0]&74&&o!==(o=me(g[34]["@id"])+"")&&fe(u,o),N[0]&74&&d!==(d=g[37]["@id"]+"")&&fe(c,d)},d(g){g&&(m(r),m(t),m(n),m(s),m(l),m(u),m(f),m(c),m(h))}}}function vo(i){let r,e=i[37]["@id"]+"",t,n,a=i[31]["@id"]+"",s,l,o=me(i[34]["@id"])+"",u,f,d=i[37]["@id"]+"",c,h;return{c(){r=P("click "),t=P(e),n=P(` href "javascript:da_to_neighbors_callback('`),s=P(a),l=P("', '"),u=P(o),f=P("','"),c=P(d),h=P(`')";`)},l(g){r=q(g,"click "),t=q(g,e),n=q(g,` href "javascript:da_to_neighbors_callback('`),s=q(g,a),l=q(g,"', '"),u=q(g,o),f=q(g,"','"),c=q(g,d),h=q(g,`')";`)},m(g,N){C(g,r,N),C(g,t,N),C(g,n,N),C(g,s,N),C(g,l,N),C(g,u,N),C(g,f,N),C(g,c,N),C(g,h,N)},p(g,N){N[0]&74&&e!==(e=g[37]["@id"]+"")&&fe(t,e),N[0]&72&&a!==(a=g[31]["@id"]+"")&&fe(s,a),N[0]&74&&o!==(o=me(g[34]["@id"])+"")&&fe(u,o),N[0]&74&&d!==(d=g[37]["@id"]+"")&&fe(c,d)},d(g){g&&(m(r),m(t),m(n),m(s),m(l),m(u),m(f),m(c),m(h))}}}function bo(i){let r=i[31]["@id"]+"",e,t,n=i[31]["rdfs:label"][0]+"",a,s,l="-->",o,u,f=me(i[34]["@id"])+"",d,c,h=i[37]["@id"]+"",g,N,y=i[6].i(i[37]["@id"])["rdfs:label"][0]+"",b,S,D=i[37]["@id"]+"",A,v,E=i[7].some(L),w,B,I;function L(...R){return i[21](i[31],i[34],i[37],...R)}let k=E&&_o(i),j=i[31]["@id"]!=i[2].data.d3f_class&&mo(i),O=i[37]["@id"]!=i[2].data.d3f_class&&vo(i);return{c(){e=P(r),t=P('["'),a=P(n),s=P('"] '),o=P(l),u=P(" | "),d=P(f),c=P(" | "),g=P(h),N=P('["'),b=P(y),S=P(`"];
                class `),A=P(D),v=P(` outbound;
                `),k&&k.c(),w=ae(),j&&j.c(),B=ae(),O&&O.c(),I=De()},l(R){e=q(R,r),t=q(R,'["'),a=q(R,n),s=q(R,'"] '),o=q(R,l),u=q(R," | "),d=q(R,f),c=q(R," | "),g=q(R,h),N=q(R,'["'),b=q(R,y),S=q(R,`"];
                class `),A=q(R,D),v=q(R,` outbound;
                `),k&&k.l(R),w=le(R),j&&j.l(R),B=le(R),O&&O.l(R),I=De()},m(R,G){C(R,e,G),C(R,t,G),C(R,a,G),C(R,s,G),C(R,o,G),C(R,u,G),C(R,d,G),C(R,c,G),C(R,g,G),C(R,N,G),C(R,b,G),C(R,S,G),C(R,A,G),C(R,v,G),k&&k.m(R,G),C(R,w,G),j&&j.m(R,G),C(R,B,G),O&&O.m(R,G),C(R,I,G)},p(R,G){i=R,G[0]&72&&r!==(r=i[31]["@id"]+"")&&fe(e,r),G[0]&72&&n!==(n=i[31]["rdfs:label"][0]+"")&&fe(a,n),G[0]&74&&f!==(f=me(i[34]["@id"])+"")&&fe(d,f),G[0]&74&&h!==(h=i[37]["@id"]+"")&&fe(g,h),G[0]&74&&y!==(y=i[6].i(i[37]["@id"])["rdfs:label"][0]+"")&&fe(b,y),G[0]&74&&D!==(D=i[37]["@id"]+"")&&fe(A,D),G[0]&202&&(E=i[7].some(L)),E?k?k.p(i,G):(k=_o(i),k.c(),k.m(w.parentNode,w)):k&&(k.d(1),k=null),i[31]["@id"]!=i[2].data.d3f_class?j?j.p(i,G):(j=mo(i),j.c(),j.m(B.parentNode,B)):j&&(j.d(1),j=null),i[37]["@id"]!=i[2].data.d3f_class?O?O.p(i,G):(O=vo(i),O.c(),O.m(I.parentNode,I)):O&&(O.d(1),O=null)},d(R){R&&(m(e),m(t),m(a),m(s),m(o),m(u),m(d),m(c),m(g),m(N),m(b),m(S),m(A),m(v),m(w),m(B),m(I)),k&&k.d(R),j&&j.d(R),O&&O.d(R)}}}function wo(i){let r,e=He(i[31][i[34]["@id"]]),t=[];for(let n=0;n<e.length;n+=1)t[n]=bo(fo(i,e,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();r=De()},l(n){for(let a=0;a<t.length;a+=1)t[a].l(n);r=De()},m(n,a){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(n,a);C(n,r,a)},p(n,a){if(a[0]&206){e=He(n[31][n[34]["@id"]]);let s;for(s=0;s<e.length;s+=1){const l=fo(n,e,s);t[s]?t[s].p(l,a):(t[s]=bo(l),t[s].c(),t[s].m(r.parentNode,r))}for(;s<t.length;s+=1)t[s].d(1);t.length=e.length}},d(n){n&&m(r),Dt(t,n)}}}function yo(i){let r,e=i[31]["d3f:outbound"]&&ho(i);return{c(){e&&e.c(),r=De()},l(t){e&&e.l(t),r=De()},m(t,n){e&&e.m(t,n),C(t,r,n)},p(t,n){t[31]["d3f:outbound"]?e?e.p(t,n):(e=ho(t),e.c(),e.m(r.parentNode,r)):e&&(e.d(1),e=null)},d(t){t&&m(r),e&&e.d(t)}}}function M1(i){let r,e,t=He(i[6].graph.filter(i[22])),n=[];for(let a=0;a<t.length;a+=1)n[a]=yo(uo(i,t,a));return{c(){r=P(`graph LR;
        `);for(let a=0;a<n.length;a+=1)n[a].c();e=De()},l(a){r=q(a,`graph LR;
        `);for(let s=0;s<n.length;s+=1)n[s].l(a);e=De()},m(a,s){C(a,r,s);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(a,s);C(a,e,s)},p(a,s){if(s[0]&206){t=He(a[6].graph.filter(a[22]));let l;for(l=0;l<t.length;l+=1){const o=uo(a,t,l);n[l]?n[l].p(o,s):(n[l]=yo(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(a){a&&(m(r),m(e)),Dt(n,a)}}}function U1(i){let r,e,t,n,a,s,l,o,u,f,d,c,h,g=i[7].length+"",N,y,b,S,D;const A=i[19].header,v=bt(A,i,i[27],co),E=i[19].default,w=bt(E,i,i[27],null),B=[j1,q1,P1],I=[];function L(k,j){return k[3]?k[5]&&k[6].graph.length>0?1:2:0}return l=L(i),o=I[l]=B[l](i),{c(){r=re("dialog"),e=re("div"),v&&v.c(),t=P(`
    Select Parts/Control Neighbors
    `),w&&w.c(),n=ae(),a=re("hr"),s=ae(),o.c(),u=ae(),f=re("hr"),d=ae(),c=re("button"),h=P("Insert ("),N=P(g),y=P(")"),this.h()},l(k){r=ne(k,"DIALOG",{class:!0});var j=ge(r);e=ne(j,"DIV",{class:!0});var O=ge(e);v&&v.l(O),t=q(O,`
    Select Parts/Control Neighbors
    `),w&&w.l(O),n=le(O),a=ne(O,"HR",{}),s=le(O),o.l(O),u=le(O),f=ne(O,"HR",{}),d=le(O),c=ne(O,"BUTTON",{class:!0});var R=ge(c);h=q(R,"Insert ("),N=q(R,g),y=q(R,")"),R.forEach(m),O.forEach(m),j.forEach(m),this.h()},h(){c.autofocus=!0,se(c,"class","svelte-x2no78"),se(e,"class","svelte-x2no78"),se(r,"class","svelte-x2no78")},m(k,j){C(k,r,j),x(r,e),v&&v.m(e,null),x(e,t),w&&w.m(e,null),x(e,n),x(e,a),x(e,s),I[l].m(e,null),x(e,u),x(e,f),x(e,d),x(e,c),x(c,h),x(c,N),x(c,y),i[24](r),b=!0,c.focus(),S||(D=[pe(c,"click",i[10]),pe(e,"click",vt(i[20])),pe(r,"close",i[25]),pe(r,"click",zr(i[26]))],S=!0)},p(k,j){v&&v.p&&(!b||j[0]&134217728)&&wt(v,A,k,k[27],b?kt(A,k[27],j,B1):yt(k[27]),co),w&&w.p&&(!b||j[0]&134217728)&&wt(w,E,k,k[27],b?kt(E,k[27],j,null):yt(k[27]),null);let O=l;l=L(k),l===O?I[l].p(k,j):(xe(),Z(I[O],1,1,()=>{I[O]=null}),Ve(),o=I[l],o?o.p(k,j):(o=I[l]=B[l](k),o.c()),Y(o,1),o.m(e,u)),(!b||j[0]&128)&&g!==(g=k[7].length+"")&&fe(N,g)},i(k){b||(Y(v,k),Y(w,k),Y(o),b=!0)},o(k){Z(v,k),Z(w,k),Z(o),b=!1},d(k){k&&m(r),v&&v.d(k),w&&w.d(k),I[l].d(),i[24](null),S=!1,st(D)}}}function x1(i,r,e){let t,n,a,{$$slots:s={},$$scope:l}=r,{empty_message:o="has no direct neighbors in this release."}=r,{outbound_color:u="#fff4dd"}=r,{inbound_color:f="#fff4dd"}=r,{root_color:d="#fff4dd"}=r,{link_function:c=ee=>`/dao/artifact/${ee["@id"]}`}=r,{inbound_link_function:h=c}=r,{root_link_function:g=ee=>`/dao/artifact/${ee["@id"]}`}=r,{outbound_link_function:N=c}=r,{show_neighbors_modal:y}=r,{neighbor_filter_labels:b}=r,{parent_node:S}=r,{data:D}=r,A,v=!1;const E=Er();Ye(i,E,ee=>e(29,a=ee));const w=Ar();Ye(i,w,ee=>e(28,n=ee));let B;function I(ee){t.some(X=>X.source==ee.source&&X.relation==ee.relation&&X.target==ee.target)?e(7,t=t.filter(X=>X.source!=ee.source||X.relation!=ee.relation||X.target!=ee.target)):t.push(ee),e(7,t),e(7,t)}window.da_to_neighbors_callback=function(ee,X,H){I({source:ee,relation:X,target:H})};function L(){let ee=0,X=200,H=100;for(const V of t){let W=D.neighbors["@graph"].find(J=>J["@id"]==V.source),M=D.neighbors["@graph"].find(J=>J["@id"]==V.target);if(W&&M){let J=S.data.d3f_class==W["@id"],Fe=J?M:W;Zr(E,w,S,"artifactSelectorNode",Fe["rdfs:label"][0],Fe["@id"],S.data.sequence,S.position.x+ee*X,J?S.position.y+H:S.position.y-H,182,63,V.relation,"artBottomSource","artTopTarget",J),ee+=1}}E.set(a),w.set(n),A&&(A.close(),e(5,v=!1)),e(7,t=[])}function k(ee){ur.call(this,i,ee)}const j=(ee,X,H,V)=>V.source==ee["@id"]&&V.relation==me(X["@id"])&&V.target==H["@id"],O=ee=>ee["@id"]!=D.description["@id"],R=ee=>b.includes(ee["@id"]);function G(ee){mt[ee?"unshift":"push"](()=>{A=ee,e(4,A)})}const Q=()=>e(0,y=!1),oe=()=>{A.close(),e(7,t=[])};return i.$$set=ee=>{"empty_message"in ee&&e(11,o=ee.empty_message),"outbound_color"in ee&&e(12,u=ee.outbound_color),"inbound_color"in ee&&e(13,f=ee.inbound_color),"root_color"in ee&&e(14,d=ee.root_color),"link_function"in ee&&e(15,c=ee.link_function),"inbound_link_function"in ee&&e(16,h=ee.inbound_link_function),"root_link_function"in ee&&e(17,g=ee.root_link_function),"outbound_link_function"in ee&&e(18,N=ee.outbound_link_function),"show_neighbors_modal"in ee&&e(0,y=ee.show_neighbors_modal),"neighbor_filter_labels"in ee&&e(1,b=ee.neighbor_filter_labels),"parent_node"in ee&&e(2,S=ee.parent_node),"data"in ee&&e(3,D=ee.data),"$$scope"in ee&&e(27,l=ee.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&17&&y&&A&&A.showModal(),i.$$.dirty[0]&14&&D&&(e(5,v=!1),D.neighbors["@graph"].find(ee=>ee["@id"]==S.data.d3f_class),D.neighbors["@graph"].some(ee=>ee["d3f:outbound"]&&b.some(X=>ee["d3f:outbound"].some(H=>H["@id"]==X)))&&(e(5,v=!0),e(6,B=new $f(D.neighbors,{index:!0}))))},e(7,t=[]),[y,b,S,D,A,v,B,t,E,w,L,o,u,f,d,c,h,g,N,s,k,j,O,R,G,Q,oe,l]}class V1 extends Ke{constructor(r){super(),et(this,r,x1,U1,qe,{empty_message:11,outbound_color:12,inbound_color:13,root_color:14,link_function:15,inbound_link_function:16,root_link_function:17,outbound_link_function:18,show_neighbors_modal:0,neighbor_filter_labels:1,parent_node:2,data:3},null,[-1,-1])}}function H1(i){let r,e="attack the node",t,n,a,s,l,o="defend the node",u,f,d,c,h,g="weaknesses",N,y,b,S,D,A="explode parts",v,E,w="explode control",B,I,L,k,j,O;function R(W){i[10](W)}let G={parent_node:i[0],data:i[1]};i[6]!==void 0&&(G.show_attack_modal=i[6]),n=new g1({props:G}),mt.push(()=>$t(n,"show_attack_modal",R));function Q(W){i[12](W)}let oe={parent_node:i[0],data:i[1]};i[5]!==void 0&&(oe.show_defend_modal=i[5]),f=new C1({props:oe}),mt.push(()=>$t(f,"show_defend_modal",Q));function ee(W){i[14](W)}let X={parent_node:i[0],empty_message:"has no related weaknesses in this release.",inbound_color:"#f9d999",inbound_link_function:i[8],data:i[1]};i[4]!==void 0&&(X.show_weakness_modal=i[4]),y=new L1({props:X}),mt.push(()=>$t(y,"show_weakness_modal",ee));function H(W){i[17](W)}let V={neighbor_filter_labels:i[2],parent_node:i[0],empty_message:"has no related parts in this release.",inbound_color:"#f9d999",inbound_link_function:i[8],data:i[1]};return i[3]!==void 0&&(V.show_neighbors_modal=i[3]),I=new V1({props:V}),mt.push(()=>$t(I,"show_neighbors_modal",H)),{c(){r=re("button"),r.textContent=e,t=ae(),ve(n.$$.fragment),s=ae(),l=re("button"),l.textContent=o,u=ae(),ve(f.$$.fragment),c=ae(),h=re("button"),h.textContent=g,N=ae(),ve(y.$$.fragment),S=ae(),D=re("button"),D.textContent=A,v=ae(),E=re("button"),E.textContent=w,B=ae(),ve(I.$$.fragment),this.h()},l(W){r=ne(W,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(r)!=="svelte-1dkmztx"&&(r.textContent=e),t=le(W),be(n.$$.fragment,W),s=le(W),l=ne(W,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(l)!=="svelte-22hxkb"&&(l.textContent=o),u=le(W),be(f.$$.fragment,W),c=le(W),h=ne(W,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(h)!=="svelte-12lar74"&&(h.textContent=g),N=le(W),be(y.$$.fragment,W),S=le(W),D=ne(W,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(D)!=="svelte-1hluius"&&(D.textContent=A),v=le(W),E=ne(W,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(E)!=="svelte-183zqvn"&&(E.textContent=w),B=le(W),be(I.$$.fragment,W),this.h()},h(){se(r,"class","svelte-5he3i1"),se(l,"class","svelte-5he3i1"),se(h,"class","svelte-5he3i1"),se(D,"class","svelte-5he3i1"),se(E,"class","svelte-5he3i1")},m(W,M){C(W,r,M),C(W,t,M),we(n,W,M),C(W,s,M),C(W,l,M),C(W,u,M),we(f,W,M),C(W,c,M),C(W,h,M),C(W,N,M),we(y,W,M),C(W,S,M),C(W,D,M),C(W,v,M),C(W,E,M),C(W,B,M),we(I,W,M),k=!0,j||(O=[pe(r,"click",i[9]),pe(l,"click",i[11]),pe(h,"click",i[13]),pe(D,"click",i[15]),pe(E,"click",i[16])],j=!0)},p(W,[M]){const J={};M&1&&(J.parent_node=W[0]),M&2&&(J.data=W[1]),!a&&M&64&&(a=!0,J.show_attack_modal=W[6],Xt(()=>a=!1)),n.$set(J);const Fe={};M&1&&(Fe.parent_node=W[0]),M&2&&(Fe.data=W[1]),!d&&M&32&&(d=!0,Fe.show_defend_modal=W[5],Xt(()=>d=!1)),f.$set(Fe);const Le={};M&1&&(Le.parent_node=W[0]),M&2&&(Le.data=W[1]),!b&&M&16&&(b=!0,Le.show_weakness_modal=W[4],Xt(()=>b=!1)),y.$set(Le);const de={};M&4&&(de.neighbor_filter_labels=W[2]),M&1&&(de.parent_node=W[0]),M&2&&(de.data=W[1]),!L&&M&8&&(L=!0,de.show_neighbors_modal=W[3],Xt(()=>L=!1)),I.$set(de)},i(W){k||(Y(n.$$.fragment,W),Y(f.$$.fragment,W),Y(y.$$.fragment,W),Y(I.$$.fragment,W),k=!0)},o(W){Z(n.$$.fragment,W),Z(f.$$.fragment,W),Z(y.$$.fragment,W),Z(I.$$.fragment,W),k=!1},d(W){W&&(m(r),m(t),m(s),m(l),m(u),m(c),m(h),m(N),m(S),m(D),m(v),m(E),m(B)),ye(n,W),ye(f,W),ye(y,W),ye(I,W),j=!1,st(O)}}}function z1(i,r,e){let t,n,a,s;var l=this&&this.__awaiter||function(E,w,B,I){function L(k){return k instanceof B?k:new B(function(j){j(k)})}return new(B||(B=Promise))(function(k,j){function O(Q){try{G(I.next(Q))}catch(oe){j(oe)}}function R(Q){try{G(I.throw(Q))}catch(oe){j(oe)}}function G(Q){Q.done?k(Q.value):L(Q.value).then(O,R)}G((I=I.apply(E,w||[])).next())})};let{node:o}=r,u,f=[];function d(E){return l(this,void 0,void 0,function*(){if(E.data.d3f_class){const w=E.data.d3f_class;return yield(yield fetch(`/api/dao/artifact/${w}.json`)).json()}else alert("Please specify a D3FEND Class for this node to enable inferential mapping"),e(6,t=!1),e(5,n=!1),e(4,a=!1),e(3,s=!1)})}function c(E){return A_(E["d3f:cwe-id"][0])}const h=async()=>{e(1,u=null),e(6,t=!0),e(1,u=await d(o))};function g(E){t=E,e(6,t)}const N=async()=>{e(1,u=null),e(5,n=!0),e(1,u=await d(o))};function y(E){n=E,e(5,n)}const b=async()=>{e(1,u=null),e(4,a=!0),e(1,u=await d(o))};function S(E){a=E,e(4,a)}const D=async()=>{e(1,u=null),e(3,s=!0),e(2,f=["d3f:contains","d3f:may-contains"]),e(1,u=await d(o))},A=async()=>{e(1,u=null),e(3,s=!0),e(2,f=["d3f:runs","d3f:loads","d3f:manages"]),e(1,u=await d(o))};function v(E){s=E,e(3,s)}return i.$$set=E=>{"node"in E&&e(0,o=E.node)},e(6,t=!1),e(5,n=!1),e(4,a=!1),e(3,s=!1),[o,u,f,s,a,n,t,d,c,h,g,N,y,b,S,D,A,v]}class X1 extends Ke{constructor(r){super(),et(this,r,z1,H1,qe,{node:0})}}function ko(i,r,e){const t=i.slice();return t[18]=r[e],t[20]=e,t}const $1=i=>({}),Do=i=>({});function G1(i){let r;return{c(){r=P("No related defensive techniques in this release.")},l(e){r=q(e,"No related defensive techniques in this release.")},m(e,t){C(e,r,t)},p:Ce,i:Ce,o:Ce,d(e){e&&m(r)}}}function W1(i){let r,e;return r=new Xr({props:{$$slots:{default:[Z1]},$$scope:{ctx:i}}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n&8214&&(a.$$scope={dirty:n,ctx:t}),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Q1(i){let r,e="Loading...";return{c(){r=re("div"),r.textContent=e},l(t){r=ne(t,"DIV",{"data-svelte-h":!0}),Me(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,n){C(t,r,n)},p:Ce,i:Ce,o:Ce,d(t){t&&m(r)}}}function Y1(i){let r,e=me(i[18].def_artifact.value)+"",t,n;return{c(){r=P("class "),t=P(e),n=P(" ArtifactNode;")},l(a){r=q(a,"class "),t=q(a,e),n=q(a," ArtifactNode;")},m(a,s){C(a,r,s),C(a,t,s),C(a,n,s)},p(a,s){s&4&&e!==(e=me(a[18].def_artifact.value)+"")&&fe(t,e)},d(a){a&&(m(r),m(t),m(n))}}}function J1(i){let r,e=me(i[18].def_artifact.value)+"",t,n;return{c(){r=P("class "),t=P(e),n=P(" SelectedArtifactNode;")},l(a){r=q(a,"class "),t=q(a,e),n=q(a," SelectedArtifactNode;")},m(a,s){C(a,r,s),C(a,t,s),C(a,n,s)},p(a,s){s&4&&e!==(e=me(a[18].def_artifact.value)+"")&&fe(t,e)},d(a){a&&(m(r),m(t),m(n))}}}function Eo(i){let r=i[1].data.d3f_class+"",e,t,n=i[2].description["@graph"][0]["rdfs:label"]+"",a,s,l="-->",o,u,f=i[18].def_artifact_rel_label.value+"",d,c,h=me(i[18].def_artifact.value)+"",g,N,y=i[18].def_artifact_label.value+"",b,S,D=i[1].data.d3f_class+"",A,v,E,w,B=me(i[18].def_artifact.value)+"",I,L,k=me(i[18].def_artifact.value)+"",j,O,R=`
`,G;function Q(X,H){return H&20&&(E=null),E==null&&(E=!!X[4].includes(me(X[18].def_artifact.value))),E?J1:Y1}let oe=Q(i,-1),ee=oe(i);return{c(){e=P(r),t=P('["'),a=P(n),s=P('"] '),o=P(l),u=P(' |"'),d=P(f),c=P('" | '),g=P(h),N=P('["'),b=P(y),S=P(`"];
          class `),A=P(D),v=P(` DefensiveTechniqueNode;
          `),ee.c(),w=P(`
          click `),I=P(B),L=P(` href "javascript:def_to_art_callback('`),j=P(k),O=P(`')";`),G=P(R)},l(X){e=q(X,r),t=q(X,'["'),a=q(X,n),s=q(X,'"] '),o=q(X,l),u=q(X,' |"'),d=q(X,f),c=q(X,'" | '),g=q(X,h),N=q(X,'["'),b=q(X,y),S=q(X,`"];
          class `),A=q(X,D),v=q(X,` DefensiveTechniqueNode;
          `),ee.l(X),w=q(X,`
          click `),I=q(X,B),L=q(X,` href "javascript:def_to_art_callback('`),j=q(X,k),O=q(X,`')";`),G=q(X,R)},m(X,H){C(X,e,H),C(X,t,H),C(X,a,H),C(X,s,H),C(X,o,H),C(X,u,H),C(X,d,H),C(X,c,H),C(X,g,H),C(X,N,H),C(X,b,H),C(X,S,H),C(X,A,H),C(X,v,H),ee.m(X,H),C(X,w,H),C(X,I,H),C(X,L,H),C(X,j,H),C(X,O,H),C(X,G,H)},p(X,H){H&2&&r!==(r=X[1].data.d3f_class+"")&&fe(e,r),H&4&&n!==(n=X[2].description["@graph"][0]["rdfs:label"]+"")&&fe(a,n),H&4&&f!==(f=X[18].def_artifact_rel_label.value+"")&&fe(d,f),H&4&&h!==(h=me(X[18].def_artifact.value)+"")&&fe(g,h),H&4&&y!==(y=X[18].def_artifact_label.value+"")&&fe(b,y),H&2&&D!==(D=X[1].data.d3f_class+"")&&fe(A,D),oe===(oe=Q(X,H))&&ee?ee.p(X,H):(ee.d(1),ee=oe(X),ee&&(ee.c(),ee.m(w.parentNode,w))),H&4&&B!==(B=me(X[18].def_artifact.value)+"")&&fe(I,B),H&4&&k!==(k=me(X[18].def_artifact.value)+"")&&fe(j,k)},d(X){X&&(m(e),m(t),m(a),m(s),m(o),m(u),m(d),m(c),m(g),m(N),m(b),m(S),m(A),m(v),m(w),m(I),m(L),m(j),m(O),m(G)),ee.d(X)}}}function Z1(i){let r,e,t=He(i[2].digital_artifacts.results.bindings),n=[];for(let a=0;a<t.length;a+=1)n[a]=Eo(ko(i,t,a));return{c(){r=P(`graph LR
        `);for(let a=0;a<n.length;a+=1)n[a].c();e=De()},l(a){r=q(a,`graph LR
        `);for(let s=0;s<n.length;s+=1)n[s].l(a);e=De()},m(a,s){C(a,r,s);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(a,s);C(a,e,s)},p(a,s){if(s&22){t=He(a[2].digital_artifacts.results.bindings);let l;for(l=0;l<t.length;l+=1){const o=ko(a,t,l);n[l]?n[l].p(o,s):(n[l]=Eo(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(a){a&&(m(r),m(e)),Dt(n,a)}}}function K1(i){let r,e,t,n,a,s,l,o,u,f,d,c,h,g=i[4].length+"",N,y,b,S,D;const A=i[8].header,v=bt(A,i,i[13],Do),E=i[8].default,w=bt(E,i,i[13],null),B=[Q1,W1,G1],I=[];function L(k,j){return k[2]?k[2].digital_artifacts.results.bindings.length>0?1:2:0}return l=L(i),o=I[l]=B[l](i),{c(){r=re("dialog"),e=re("div"),v&&v.c(),t=P(`
    Select Related Artifacts To Insert
    `),w&&w.c(),n=ae(),a=re("hr"),s=ae(),o.c(),u=ae(),f=re("hr"),d=ae(),c=re("button"),h=P("Insert ("),N=P(g),y=P(")"),this.h()},l(k){r=ne(k,"DIALOG",{class:!0});var j=ge(r);e=ne(j,"DIV",{class:!0});var O=ge(e);v&&v.l(O),t=q(O,`
    Select Related Artifacts To Insert
    `),w&&w.l(O),n=le(O),a=ne(O,"HR",{}),s=le(O),o.l(O),u=le(O),f=ne(O,"HR",{}),d=le(O),c=ne(O,"BUTTON",{class:!0});var R=ge(c);h=q(R,"Insert ("),N=q(R,g),y=q(R,")"),R.forEach(m),O.forEach(m),j.forEach(m),this.h()},h(){c.autofocus=!0,se(c,"class","svelte-x0618k"),se(e,"class","svelte-x0618k"),se(r,"class","svelte-x0618k")},m(k,j){C(k,r,j),x(r,e),v&&v.m(e,null),x(e,t),w&&w.m(e,null),x(e,n),x(e,a),x(e,s),I[l].m(e,null),x(e,u),x(e,f),x(e,d),x(e,c),x(c,h),x(c,N),x(c,y),i[10](r),b=!0,c.focus(),S||(D=[pe(c,"click",i[7]),pe(e,"click",vt(i[9])),pe(r,"close",i[11]),pe(r,"click",zr(i[12]))],S=!0)},p(k,[j]){v&&v.p&&(!b||j&8192)&&wt(v,A,k,k[13],b?kt(A,k[13],j,$1):yt(k[13]),Do),w&&w.p&&(!b||j&8192)&&wt(w,E,k,k[13],b?kt(E,k[13],j,null):yt(k[13]),null);let O=l;l=L(k),l===O?I[l].p(k,j):(xe(),Z(I[O],1,1,()=>{I[O]=null}),Ve(),o=I[l],o?o.p(k,j):(o=I[l]=B[l](k),o.c()),Y(o,1),o.m(e,u)),(!b||j&16)&&g!==(g=k[4].length+"")&&fe(N,g)},i(k){b||(Y(v,k),Y(w,k),Y(o),b=!0)},o(k){Z(v,k),Z(w,k),Z(o),b=!1},d(k){k&&m(r),v&&v.d(k),w&&w.d(k),I[l].d(),i[10](null),S=!1,st(D)}}}function e2(i,r,e){let t,n,a,{$$slots:s={},$$scope:l}=r,{show_artifacts_modal:o}=r,{parent_node:u}=r,{data:f}=r,d;const c=Er();Ye(i,c,A=>e(16,a=A));const h=Ar();Ye(i,h,A=>e(15,n=A));function g(A){t.includes(A)?e(4,t=t.filter(v=>v!==A)):t.push(A),e(4,t)}window.def_to_art_callback=function(A){g(A)};function N(){let A=0,v=200,E=100;for(const w of t){let B=f.digital_artifacts.results.bindings.find(I=>me(I.def_artifact.value)==w);B&&(Zr(c,h,u,"artifactSelectorNode",B.def_artifact_label.value,"d3f:"+me(B.def_artifact.value),u.data.sequence,u.position.x+A*v,u.position.y+E,182,82,B.def_artifact_rel_label.value,"defenseBottomSource","defenseRightTarget",!0),A+=1)}c.set(a),h.set(n),d&&d.close(),e(4,t=[])}function y(A){ur.call(this,i,A)}function b(A){mt[A?"unshift":"push"](()=>{d=A,e(3,d)})}const S=()=>e(0,o=!1),D=()=>{d.close(),e(4,t=[])};return i.$$set=A=>{"show_artifacts_modal"in A&&e(0,o=A.show_artifacts_modal),"parent_node"in A&&e(1,u=A.parent_node),"data"in A&&e(2,f=A.data),"$$scope"in A&&e(13,l=A.$$scope)},i.$$.update=()=>{i.$$.dirty&9&&o&&d&&d.showModal()},e(4,t=[]),[o,u,f,d,t,c,h,N,s,y,b,S,D,l]}class t2 extends Ke{constructor(r){super(),et(this,r,e2,K1,qe,{show_artifacts_modal:0,parent_node:1,data:2})}}function Ao(i,r,e){const t=i.slice();return t[18]=r[e],t}const r2=i=>({}),Co=i=>({});function n2(i){let r;return{c(){r=P("No related offensive techniques in this release.")},l(e){r=q(e,"No related offensive techniques in this release.")},m(e,t){C(e,r,t)},p:Ce,i:Ce,o:Ce,d(e){e&&m(r)}}}function i2(i){let r,e;return r=new Xr({props:{$$slots:{default:[u2]},$$scope:{ctx:i}}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n&16394&&(a.$$scope={dirty:n,ctx:t}),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function s2(i){let r,e="Loading...";return{c(){r=re("div"),r.textContent=e},l(t){r=ne(t,"DIV",{"data-svelte-h":!0}),Me(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,n){C(t,r,n)},p:Ce,i:Ce,o:Ce,d(t){t&&m(r)}}}function No(i){let r=me(i[18].def_tech.value).replace(/ |\./g,"")+"",e,t,n=i[18].def_tech_label.value+"",a,s,l="-->",o,u,f="May "+i[18].def_tactic_label.value.replace(/ /g,""),d,c,h=i[18].off_tech_id.value.replace(/ |\./g,"")+"",g,N,y=i[18].off_tech_label.value+"",b,S,D,A,v=me(i[18].def_tech.value)+"",E,w,B=i[18].off_tech_id.value.replace(/ |\./g,"")+"",I,L,k=i[18].off_tech_id.value.replace(/ |\./g,"")+"",j,O,R=me(i[18].def_tech.value)+"",G,Q,oe=me(i[18].def_tech.value)+"",ee,X;function H(M,J){return J&10&&(D=null),D==null&&(D=!!M[3].includes(M[18].off_tech_id.value.replace(/ |\./g,""))),D?l2:a2}let V=H(i,-1),W=V(i);return{c(){e=P(r),t=P('["'),a=P(n),s=P('"] '),o=P(l),u=P(" | "),d=P(f),c=P("| "),g=P(h),N=P('["'),b=P(y),S=P(`"];
            `),W.c(),A=P(`
            class `),E=P(v),w=P(" CountermeasureNode; click "),I=P(B),L=P(` href "javascript:def_to_off_callback('`),j=P(k),O=P(`')"; click `),G=P(R),Q=P(' href "/technique/d3f:'),ee=P(oe),X=P('";')},l(M){e=q(M,r),t=q(M,'["'),a=q(M,n),s=q(M,'"] '),o=q(M,l),u=q(M," | "),d=q(M,f),c=q(M,"| "),g=q(M,h),N=q(M,'["'),b=q(M,y),S=q(M,`"];
            `),W.l(M),A=q(M,`
            class `),E=q(M,v),w=q(M," CountermeasureNode; click "),I=q(M,B),L=q(M,` href "javascript:def_to_off_callback('`),j=q(M,k),O=q(M,`')"; click `),G=q(M,R),Q=q(M,' href "/technique/d3f:'),ee=q(M,oe),X=q(M,'";')},m(M,J){C(M,e,J),C(M,t,J),C(M,a,J),C(M,s,J),C(M,o,J),C(M,u,J),C(M,d,J),C(M,c,J),C(M,g,J),C(M,N,J),C(M,b,J),C(M,S,J),W.m(M,J),C(M,A,J),C(M,E,J),C(M,w,J),C(M,I,J),C(M,L,J),C(M,j,J),C(M,O,J),C(M,G,J),C(M,Q,J),C(M,ee,J),C(M,X,J)},p(M,J){J&2&&r!==(r=me(M[18].def_tech.value).replace(/ |\./g,"")+"")&&fe(e,r),J&2&&n!==(n=M[18].def_tech_label.value+"")&&fe(a,n),J&2&&f!==(f="May "+M[18].def_tactic_label.value.replace(/ /g,""))&&fe(d,f),J&2&&h!==(h=M[18].off_tech_id.value.replace(/ |\./g,"")+"")&&fe(g,h),J&2&&y!==(y=M[18].off_tech_label.value+"")&&fe(b,y),V===(V=H(M,J))&&W?W.p(M,J):(W.d(1),W=V(M),W&&(W.c(),W.m(A.parentNode,A))),J&2&&v!==(v=me(M[18].def_tech.value)+"")&&fe(E,v),J&2&&B!==(B=M[18].off_tech_id.value.replace(/ |\./g,"")+"")&&fe(I,B),J&2&&k!==(k=M[18].off_tech_id.value.replace(/ |\./g,"")+"")&&fe(j,k),J&2&&R!==(R=me(M[18].def_tech.value)+"")&&fe(G,R),J&2&&oe!==(oe=me(M[18].def_tech.value)+"")&&fe(ee,oe)},d(M){M&&(m(e),m(t),m(a),m(s),m(o),m(u),m(d),m(c),m(g),m(N),m(b),m(S),m(A),m(E),m(w),m(I),m(L),m(j),m(O),m(G),m(Q),m(ee),m(X)),W.d(M)}}}function a2(i){let r,e=i[18].off_tech_id.value.replace(/ |\./g,"")+"",t,n;return{c(){r=P("class "),t=P(e),n=P(" OffensiveTechniqueNode;")},l(a){r=q(a,"class "),t=q(a,e),n=q(a," OffensiveTechniqueNode;")},m(a,s){C(a,r,s),C(a,t,s),C(a,n,s)},p(a,s){s&2&&e!==(e=a[18].off_tech_id.value.replace(/ |\./g,"")+"")&&fe(t,e)},d(a){a&&(m(r),m(t),m(n))}}}function l2(i){let r,e=i[18].off_tech_id.value.replace(/ |\./g,"")+"",t,n;return{c(){r=P("class "),t=P(e),n=P(" SelectedOffensiveTechniqueNode;")},l(a){r=q(a,"class "),t=q(a,e),n=q(a," SelectedOffensiveTechniqueNode;")},m(a,s){C(a,r,s),C(a,t,s),C(a,n,s)},p(a,s){s&2&&e!==(e=a[18].off_tech_id.value.replace(/ |\./g,"")+"")&&fe(t,e)},d(a){a&&(m(r),m(t),m(n))}}}function To(i){let r=i[6].edge_is_unique(i[18].def_tech_label.value,i[18].off_artifact_rel_label.value,i[18].off_artifact_label.value),e,t=r&&No(i);return{c(){t&&t.c(),e=De()},l(n){t&&t.l(n),e=De()},m(n,a){t&&t.m(n,a),C(n,e,a)},p(n,a){a&2&&(r=n[6].edge_is_unique(n[18].def_tech_label.value,n[18].off_artifact_rel_label.value,n[18].off_artifact_label.value)),r?t?t.p(n,a):(t=No(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&m(e),t&&t.d(n)}}}function u2(i){let r,e,t=He(i[1].def_to_off.results.bindings),n=[];for(let a=0;a<t.length;a+=1)n[a]=To(Ao(i,t,a));return{c(){r=P(`graph LR;
        `);for(let a=0;a<n.length;a+=1)n[a].c();e=De()},l(a){r=q(a,`graph LR;
        `);for(let s=0;s<n.length;s+=1)n[s].l(a);e=De()},m(a,s){C(a,r,s);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(a,s);C(a,e,s)},p(a,s){if(s&74){t=He(a[1].def_to_off.results.bindings);let l;for(l=0;l<t.length;l+=1){const o=Ao(a,t,l);n[l]?n[l].p(o,s):(n[l]=To(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(a){a&&(m(r),m(e)),Dt(n,a)}}}function o2(i){let r,e,t,n,a,s,l,o,u,f,d,c,h,g=i[3].length+"",N,y,b,S,D;const A=i[9].header,v=bt(A,i,i[14],Co),E=i[9].default,w=bt(E,i,i[14],null),B=[s2,i2,n2],I=[];function L(k,j){return k[1]?k[1].def_to_off.results.bindings.length>0?1:2:0}return l=L(i),o=I[l]=B[l](i),{c(){r=re("dialog"),e=re("div"),v&&v.c(),t=P(`
    Select Attack Techniques
    `),w&&w.c(),n=ae(),a=re("hr"),s=ae(),o.c(),u=ae(),f=re("hr"),d=ae(),c=re("button"),h=P("Insert ("),N=P(g),y=P(")"),this.h()},l(k){r=ne(k,"DIALOG",{class:!0});var j=ge(r);e=ne(j,"DIV",{class:!0});var O=ge(e);v&&v.l(O),t=q(O,`
    Select Attack Techniques
    `),w&&w.l(O),n=le(O),a=ne(O,"HR",{}),s=le(O),o.l(O),u=le(O),f=ne(O,"HR",{}),d=le(O),c=ne(O,"BUTTON",{class:!0});var R=ge(c);h=q(R,"Insert ("),N=q(R,g),y=q(R,")"),R.forEach(m),O.forEach(m),j.forEach(m),this.h()},h(){c.autofocus=!0,se(c,"class","svelte-1ai9hff"),se(e,"class","svelte-1ai9hff"),se(r,"class","svelte-1ai9hff")},m(k,j){C(k,r,j),x(r,e),v&&v.m(e,null),x(e,t),w&&w.m(e,null),x(e,n),x(e,a),x(e,s),I[l].m(e,null),x(e,u),x(e,f),x(e,d),x(e,c),x(c,h),x(c,N),x(c,y),i[11](r),b=!0,c.focus(),S||(D=[pe(c,"click",i[7]),pe(e,"click",vt(i[10])),pe(r,"close",i[12]),pe(r,"click",zr(i[13]))],S=!0)},p(k,[j]){v&&v.p&&(!b||j&16384)&&wt(v,A,k,k[14],b?kt(A,k[14],j,r2):yt(k[14]),Co),w&&w.p&&(!b||j&16384)&&wt(w,E,k,k[14],b?kt(E,k[14],j,null):yt(k[14]),null);let O=l;l=L(k),l===O?I[l].p(k,j):(xe(),Z(I[O],1,1,()=>{I[O]=null}),Ve(),o=I[l],o?o.p(k,j):(o=I[l]=B[l](k),o.c()),Y(o,1),o.m(e,u)),(!b||j&8)&&g!==(g=k[3].length+"")&&fe(N,g)},i(k){b||(Y(v,k),Y(w,k),Y(o),b=!0)},o(k){Z(v,k),Z(w,k),Z(o),b=!1},d(k){k&&m(r),v&&v.d(k),w&&w.d(k),I[l].d(),i[11](null),S=!1,st(D)}}}function f2(i,r,e){let t,n,a,{$$slots:s={},$$scope:l}=r,{show_attack_modal:o}=r,{parent_node:u}=r,{data:f}=r,d;const c=Er();Ye(i,c,v=>e(16,a=v));const h=Ar();Ye(i,h,v=>e(15,n=v));let g=new In;function N(v){t.includes(v)?e(3,t=t.filter(E=>E!==v)):t.push(v),e(3,t)}window.def_to_off_callback=function(v){N(v)};function y(){let v=0,E=200,w=100;for(const B of t){let I=f.def_to_off.results.bindings.find(L=>L.off_tech_id.value.replace(/ |\./g,"")==B);I&&(Zr(c,h,u,"attackSelectorNode",I.off_tech_label.value,"d3f:"+I.off_tech_id.value,u.data.sequence,u.position.x+v*E,u.position.y+w,182,63,"May "+I.def_tactic_label.value,"defenseBottomSource","attackTopTarget",!0),v+=1)}c.set(a),h.set(n),d&&d.close(),e(3,t=[])}function b(v){ur.call(this,i,v)}function S(v){mt[v?"unshift":"push"](()=>{d=v,e(2,d)})}const D=()=>e(0,o=!1),A=()=>{d.close(),e(3,t=[])};return i.$$set=v=>{"show_attack_modal"in v&&e(0,o=v.show_attack_modal),"parent_node"in v&&e(8,u=v.parent_node),"data"in v&&e(1,f=v.data),"$$scope"in v&&e(14,l=v.$$scope)},i.$$.update=()=>{i.$$.dirty&5&&o&&d&&(d.showModal(),g.reset())},e(3,t=[]),[o,f,d,t,c,h,g,y,u,s,b,S,D,A,l]}class c2 extends Ke{constructor(r){super(),et(this,r,f2,o2,qe,{show_attack_modal:0,parent_node:8,data:1})}}function d2(i){let r,e="artifacts",t,n,a,s,l,o="offensive techniques",u,f,d,c,h,g="weaknesses (coming soon)",N,y,b;function S(E){i[6](E)}let D={parent_node:i[0],data:i[1]};i[2]!==void 0&&(D.show_artifacts_modal=i[2]),n=new t2({props:D}),mt.push(()=>$t(n,"show_artifacts_modal",S));function A(E){i[8](E)}let v={parent_node:i[0],data:i[1]};return i[3]!==void 0&&(v.show_attack_modal=i[3]),f=new c2({props:v}),mt.push(()=>$t(f,"show_attack_modal",A)),{c(){r=re("button"),r.textContent=e,t=ae(),ve(n.$$.fragment),s=ae(),l=re("button"),l.textContent=o,u=ae(),ve(f.$$.fragment),c=ae(),h=re("button"),h.textContent=g,this.h()},l(E){r=ne(E,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(r)!=="svelte-isgkpy"&&(r.textContent=e),t=le(E),be(n.$$.fragment,E),s=le(E),l=ne(E,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(l)!=="svelte-17h5zge"&&(l.textContent=o),u=le(E),be(f.$$.fragment,E),c=le(E),h=ne(E,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(h)!=="svelte-ivhbdc"&&(h.textContent=g),this.h()},h(){se(r,"class","svelte-1x5dcdh"),se(l,"class","svelte-1x5dcdh"),h.disabled=!0,se(h,"class","svelte-1x5dcdh")},m(E,w){C(E,r,w),C(E,t,w),we(n,E,w),C(E,s,w),C(E,l,w),C(E,u,w),we(f,E,w),C(E,c,w),C(E,h,w),N=!0,y||(b=[pe(r,"click",i[5]),pe(l,"click",i[7])],y=!0)},p(E,[w]){const B={};w&1&&(B.parent_node=E[0]),w&2&&(B.data=E[1]),!a&&w&4&&(a=!0,B.show_artifacts_modal=E[2],Xt(()=>a=!1)),n.$set(B);const I={};w&1&&(I.parent_node=E[0]),w&2&&(I.data=E[1]),!d&&w&8&&(d=!0,I.show_attack_modal=E[3],Xt(()=>d=!1)),f.$set(I)},i(E){N||(Y(n.$$.fragment,E),Y(f.$$.fragment,E),N=!0)},o(E){Z(n.$$.fragment,E),Z(f.$$.fragment,E),N=!1},d(E){E&&(m(r),m(t),m(s),m(l),m(u),m(c),m(h)),ye(n,E),ye(f,E),y=!1,st(b)}}}function h2(i,r,e){let t,n;var a=this&&this.__awaiter||function(h,g,N,y){function b(S){return S instanceof N?S:new N(function(D){D(S)})}return new(N||(N=Promise))(function(S,D){function A(w){try{E(y.next(w))}catch(B){D(B)}}function v(w){try{E(y.throw(w))}catch(B){D(B)}}function E(w){w.done?S(w.value):b(w.value).then(A,v)}E((y=y.apply(h,g||[])).next())})};let{node:s}=r,l;function o(h){return a(this,void 0,void 0,function*(){if(h.data.d3f_class){const g=h.data.d3f_class;return yield(yield fetch(`/api/technique/${g}.json`)).json()}else alert("Please specify a D3FEND Class for this node to enable inferential mapping"),e(2,t=!1)})}const u=async()=>{e(1,l=null),e(2,t=!0),e(1,l=await o(s))};function f(h){t=h,e(2,t)}const d=async()=>{e(1,l=null),e(3,n=!0),e(1,l=await o(s))};function c(h){n=h,e(3,n)}return i.$$set=h=>{"node"in h&&e(0,s=h.node)},e(2,t=!1),e(3,n=!1),[s,l,t,n,o,u,f,d,c]}class _2 extends Ke{constructor(r){super(),et(this,r,h2,d2,qe,{node:0})}}function So(i,r,e){const t=i.slice();return t[18]=r[e],t}const p2=i=>({}),Ro=i=>({});function g2(i){let r;return{c(){r=P("No related artifacts in this release.")},l(e){r=q(e,"No related artifacts in this release.")},m(e,t){C(e,r,t)},p:Ce,i:Ce,o:Ce,d(e){e&&m(r)}}}function m2(i){let r,e;return r=new Xr({props:{$$slots:{default:[y2]},$$scope:{ctx:i}}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n&16394&&(a.$$scope={dirty:n,ctx:t}),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function v2(i){let r,e="Loading...";return{c(){r=re("div"),r.textContent=e},l(t){r=ne(t,"DIV",{"data-svelte-h":!0}),Me(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,n){C(t,r,n)},p:Ce,i:Ce,o:Ce,d(t){t&&m(r)}}}function Fo(i){let r=i[18].off_tech_id.value.replace(/ |\./g,"")+"",e,t,n=i[18].off_tech_label.value+"",a,s,l="-->",o,u,f=i[18].off_artifact_rel_label.value.replace(/ /g,"")+"",d,c,h=me(i[18].off_artifact.value)+"",g,N,y=i[18].off_artifact_label.value+"",b,S,D=i[18].off_tech_id.value.replace(/ |\./g,"")+"",A,v,E,w,B=me(i[18].off_artifact.value)+"",I,L,k=me(i[18].off_artifact.value)+"",j,O,R=i[18].off_tech_id.value.replace(/ |\./g,"")+"",G,Q,oe=Ki(i[18].off_tech_id.value)+"",ee,X,H=me(i[18].off_artifact.value)+"",V,W,M=me(i[18].off_artifact.value)+"",J,Fe;function Le(ue,Ee){return Ee&10&&(E=null),E==null&&(E=!!ue[3].includes(me(ue[18].off_artifact.value))),E?w2:b2}let de=Le(i,-1),_e=de(i);return{c(){e=P(r),t=P('["'),a=P(n),s=P('"] '),o=P(l),u=P(" |"),d=P(f),c=P("| "),g=P(h),N=P('["'),b=P(y),S=P('"]; class '),A=P(D),v=P(` OffensiveTechniqueNode;
            `),_e.c(),w=P(" ; click "),I=P(B),L=P(' href "/dao/artifact/d3f:'),j=P(k),O=P('"; click '),G=P(R),Q=P(' href "'),ee=P(oe),X=P('"; click '),V=P(H),W=P(` href "javascript:off_to_art_callback('`),J=P(M),Fe=P(`')";`)},l(ue){e=q(ue,r),t=q(ue,'["'),a=q(ue,n),s=q(ue,'"] '),o=q(ue,l),u=q(ue," |"),d=q(ue,f),c=q(ue,"| "),g=q(ue,h),N=q(ue,'["'),b=q(ue,y),S=q(ue,'"]; class '),A=q(ue,D),v=q(ue,` OffensiveTechniqueNode;
            `),_e.l(ue),w=q(ue," ; click "),I=q(ue,B),L=q(ue,' href "/dao/artifact/d3f:'),j=q(ue,k),O=q(ue,'"; click '),G=q(ue,R),Q=q(ue,' href "'),ee=q(ue,oe),X=q(ue,'"; click '),V=q(ue,H),W=q(ue,` href "javascript:off_to_art_callback('`),J=q(ue,M),Fe=q(ue,`')";`)},m(ue,Ee){C(ue,e,Ee),C(ue,t,Ee),C(ue,a,Ee),C(ue,s,Ee),C(ue,o,Ee),C(ue,u,Ee),C(ue,d,Ee),C(ue,c,Ee),C(ue,g,Ee),C(ue,N,Ee),C(ue,b,Ee),C(ue,S,Ee),C(ue,A,Ee),C(ue,v,Ee),_e.m(ue,Ee),C(ue,w,Ee),C(ue,I,Ee),C(ue,L,Ee),C(ue,j,Ee),C(ue,O,Ee),C(ue,G,Ee),C(ue,Q,Ee),C(ue,ee,Ee),C(ue,X,Ee),C(ue,V,Ee),C(ue,W,Ee),C(ue,J,Ee),C(ue,Fe,Ee)},p(ue,Ee){Ee&2&&r!==(r=ue[18].off_tech_id.value.replace(/ |\./g,"")+"")&&fe(e,r),Ee&2&&n!==(n=ue[18].off_tech_label.value+"")&&fe(a,n),Ee&2&&f!==(f=ue[18].off_artifact_rel_label.value.replace(/ /g,"")+"")&&fe(d,f),Ee&2&&h!==(h=me(ue[18].off_artifact.value)+"")&&fe(g,h),Ee&2&&y!==(y=ue[18].off_artifact_label.value+"")&&fe(b,y),Ee&2&&D!==(D=ue[18].off_tech_id.value.replace(/ |\./g,"")+"")&&fe(A,D),de===(de=Le(ue,Ee))&&_e?_e.p(ue,Ee):(_e.d(1),_e=de(ue),_e&&(_e.c(),_e.m(w.parentNode,w))),Ee&2&&B!==(B=me(ue[18].off_artifact.value)+"")&&fe(I,B),Ee&2&&k!==(k=me(ue[18].off_artifact.value)+"")&&fe(j,k),Ee&2&&R!==(R=ue[18].off_tech_id.value.replace(/ |\./g,"")+"")&&fe(G,R),Ee&2&&oe!==(oe=Ki(ue[18].off_tech_id.value)+"")&&fe(ee,oe),Ee&2&&H!==(H=me(ue[18].off_artifact.value)+"")&&fe(V,H),Ee&2&&M!==(M=me(ue[18].off_artifact.value)+"")&&fe(J,M)},d(ue){ue&&(m(e),m(t),m(a),m(s),m(o),m(u),m(d),m(c),m(g),m(N),m(b),m(S),m(A),m(v),m(w),m(I),m(L),m(j),m(O),m(G),m(Q),m(ee),m(X),m(V),m(W),m(J),m(Fe)),_e.d(ue)}}}function b2(i){let r,e=me(i[18].off_artifact.value)+"",t,n;return{c(){r=P("class "),t=P(e),n=P(" ArtifactNode;")},l(a){r=q(a,"class "),t=q(a,e),n=q(a," ArtifactNode;")},m(a,s){C(a,r,s),C(a,t,s),C(a,n,s)},p(a,s){s&2&&e!==(e=me(a[18].off_artifact.value)+"")&&fe(t,e)},d(a){a&&(m(r),m(t),m(n))}}}function w2(i){let r,e=me(i[18].off_artifact.value)+"",t,n;return{c(){r=P("class "),t=P(e),n=P(" SelectedArtifactNode;")},l(a){r=q(a,"class "),t=q(a,e),n=q(a," SelectedArtifactNode;")},m(a,s){C(a,r,s),C(a,t,s),C(a,n,s)},p(a,s){s&2&&e!==(e=me(a[18].off_artifact.value)+"")&&fe(t,e)},d(a){a&&(m(r),m(t),m(n))}}}function Io(i){let r=i[6].edge_is_unique(i[18].off_tech_label.value,i[18].off_artifact_rel_label.value,i[18].off_artifact_label.value),e,t=r&&Fo(i);return{c(){t&&t.c(),e=De()},l(n){t&&t.l(n),e=De()},m(n,a){t&&t.m(n,a),C(n,e,a)},p(n,a){a&2&&(r=n[6].edge_is_unique(n[18].off_tech_label.value,n[18].off_artifact_rel_label.value,n[18].off_artifact_label.value)),r?t?t.p(n,a):(t=Fo(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&m(e),t&&t.d(n)}}}function y2(i){let r,e,t=He(i[1].off_to_def.results.bindings),n=[];for(let a=0;a<t.length;a+=1)n[a]=Io(So(i,t,a));return{c(){r=P(`graph LR;
        `);for(let a=0;a<n.length;a+=1)n[a].c();e=De()},l(a){r=q(a,`graph LR;
        `);for(let s=0;s<n.length;s+=1)n[s].l(a);e=De()},m(a,s){C(a,r,s);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(a,s);C(a,e,s)},p(a,s){if(s&74){t=He(a[1].off_to_def.results.bindings);let l;for(l=0;l<t.length;l+=1){const o=So(a,t,l);n[l]?n[l].p(o,s):(n[l]=Io(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(a){a&&(m(r),m(e)),Dt(n,a)}}}function k2(i){let r,e,t,n,a,s,l,o,u,f,d,c,h,g=i[3].length+"",N,y,b,S,D;const A=i[9].header,v=bt(A,i,i[14],Ro),E=i[9].default,w=bt(E,i,i[14],null),B=[v2,m2,g2],I=[];function L(k,j){return k[1]?k[1].off_to_def.results.bindings.length>0?1:2:0}return l=L(i),o=I[l]=B[l](i),{c(){r=re("dialog"),e=re("div"),v&&v.c(),t=P(`
    Select Related Artifacts To Insert
    `),w&&w.c(),n=ae(),a=re("hr"),s=ae(),o.c(),u=ae(),f=re("hr"),d=ae(),c=re("button"),h=P("Insert ("),N=P(g),y=P(")"),this.h()},l(k){r=ne(k,"DIALOG",{class:!0});var j=ge(r);e=ne(j,"DIV",{class:!0});var O=ge(e);v&&v.l(O),t=q(O,`
    Select Related Artifacts To Insert
    `),w&&w.l(O),n=le(O),a=ne(O,"HR",{}),s=le(O),o.l(O),u=le(O),f=ne(O,"HR",{}),d=le(O),c=ne(O,"BUTTON",{class:!0});var R=ge(c);h=q(R,"Insert ("),N=q(R,g),y=q(R,")"),R.forEach(m),O.forEach(m),j.forEach(m),this.h()},h(){c.autofocus=!0,se(c,"class","svelte-x0618k"),se(e,"class","svelte-x0618k"),se(r,"class","svelte-x0618k")},m(k,j){C(k,r,j),x(r,e),v&&v.m(e,null),x(e,t),w&&w.m(e,null),x(e,n),x(e,a),x(e,s),I[l].m(e,null),x(e,u),x(e,f),x(e,d),x(e,c),x(c,h),x(c,N),x(c,y),i[11](r),b=!0,c.focus(),S||(D=[pe(c,"click",i[7]),pe(e,"click",vt(i[10])),pe(r,"close",i[12]),pe(r,"click",zr(i[13]))],S=!0)},p(k,[j]){v&&v.p&&(!b||j&16384)&&wt(v,A,k,k[14],b?kt(A,k[14],j,p2):yt(k[14]),Ro),w&&w.p&&(!b||j&16384)&&wt(w,E,k,k[14],b?kt(E,k[14],j,null):yt(k[14]),null);let O=l;l=L(k),l===O?I[l].p(k,j):(xe(),Z(I[O],1,1,()=>{I[O]=null}),Ve(),o=I[l],o?o.p(k,j):(o=I[l]=B[l](k),o.c()),Y(o,1),o.m(e,u)),(!b||j&8)&&g!==(g=k[3].length+"")&&fe(N,g)},i(k){b||(Y(v,k),Y(w,k),Y(o),b=!0)},o(k){Z(v,k),Z(w,k),Z(o),b=!1},d(k){k&&m(r),v&&v.d(k),w&&w.d(k),I[l].d(),i[11](null),S=!1,st(D)}}}function D2(i,r,e){let t,n,a,{$$slots:s={},$$scope:l}=r,{show_artifacts_modal:o}=r,{parent_node:u}=r,{data:f}=r,d;const c=Er();Ye(i,c,v=>e(16,a=v));const h=Ar();Ye(i,h,v=>e(15,n=v));let g=new In;function N(v){t.includes(v)?e(3,t=t.filter(E=>E!==v)):t.push(v),e(3,t)}window.off_to_art_callback=function(v){N(v)};function y(){let v=0,E=200,w=100;for(const B of t){let I=f.off_to_def.results.bindings.find(L=>me(L.off_artifact.value)==B);I&&(Zr(c,h,u,"artifactSelectorNode",I.off_artifact_label.value,"d3f:"+me(I.off_artifact.value),u.data.sequence,u.position.x+v*E,u.position.y+w,182,63,I.off_artifact_rel_label.value,"attackBottomSource","attackLeftTarget",!0),v+=1)}c.set(a),h.set(n),d&&d.close(),e(3,t=[])}function b(v){ur.call(this,i,v)}function S(v){mt[v?"unshift":"push"](()=>{d=v,e(2,d)})}const D=()=>e(0,o=!1),A=()=>{d.close(),e(3,t=[])};return i.$$set=v=>{"show_artifacts_modal"in v&&e(0,o=v.show_artifacts_modal),"parent_node"in v&&e(8,u=v.parent_node),"data"in v&&e(1,f=v.data),"$$scope"in v&&e(14,l=v.$$scope)},i.$$.update=()=>{i.$$.dirty&5&&o&&d&&(d.showModal(),g.reset())},e(3,t=[]),[o,f,d,t,c,h,g,y,u,s,b,S,D,A,l]}class E2 extends Ke{constructor(r){super(),et(this,r,D2,k2,qe,{show_artifacts_modal:0,parent_node:8,data:1})}}function Oo(i,r,e){const t=i.slice();return t[23]=r[e],t}const A2=i=>({}),Lo=i=>({});function C2(i){let r;return{c(){r=P("No related artifacts in this release.")},l(e){r=q(e,"No related artifacts in this release.")},m(e,t){C(e,r,t)},p:Ce,i:Ce,o:Ce,d(e){e&&m(r)}}}function N2(i){let r,e,t,n,a,s,l,o,u,f;function d(h){i[14](h)}let c={toggles:i[4]};return i[3]!==void 0&&(c.selected=i[3]),e=new Wf({props:c}),mt.push(()=>$t(e,"selected",d)),u=new Xr({props:{$$slots:{default:[F2]},$$scope:{ctx:i}}}),{c(){r=re("div"),ve(e.$$.fragment),n=ae(),a=re("br"),s=ae(),l=re("br"),o=ae(),ve(u.$$.fragment),this.h()},l(h){r=ne(h,"DIV",{class:!0});var g=ge(r);be(e.$$.fragment,g),g.forEach(m),n=le(h),a=ne(h,"BR",{}),s=le(h),l=ne(h,"BR",{}),o=le(h),be(u.$$.fragment,h),this.h()},h(){se(r,"class","center shrink")},m(h,g){C(h,r,g),we(e,r,null),C(h,n,g),C(h,a,g),C(h,s,g),C(h,l,g),C(h,o,g),we(u,h,g),f=!0},p(h,g){const N={};g&16&&(N.toggles=h[4]),!t&&g&8&&(t=!0,N.selected=h[3],Xt(()=>t=!1)),e.$set(N);const y={};g&262186&&(y.$$scope={dirty:g,ctx:h}),u.$set(y)},i(h){f||(Y(e.$$.fragment,h),Y(u.$$.fragment,h),f=!0)},o(h){Z(e.$$.fragment,h),Z(u.$$.fragment,h),f=!1},d(h){h&&(m(r),m(n),m(a),m(s),m(l),m(o)),ye(e),ye(u,h)}}}function T2(i){let r,e="Loading...";return{c(){r=re("div"),r.textContent=e},l(t){r=ne(t,"DIV",{"data-svelte-h":!0}),Me(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,n){C(t,r,n)},p:Ce,i:Ce,o:Ce,d(t){t&&m(r)}}}function Bo(i){let r=i[8].edge_is_unique(i[23].def_tech_label.value,i[23].def_artifact_rel_label.value,i[23].off_artifact_label.value),e,t=r&&Po(i);return{c(){t&&t.c(),e=De()},l(n){t&&t.l(n),e=De()},m(n,a){t&&t.m(n,a),C(n,e,a)},p(n,a){a&2&&(r=n[8].edge_is_unique(n[23].def_tech_label.value,n[23].def_artifact_rel_label.value,n[23].off_artifact_label.value)),r?t?t.p(n,a):(t=Po(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&m(e),t&&t.d(n)}}}function Po(i){let r=!i[3].includes(i[23].def_tactic_label.value),e,t=r&&qo(i);return{c(){t&&t.c(),e=De()},l(n){t&&t.l(n),e=De()},m(n,a){t&&t.m(n,a),C(n,e,a)},p(n,a){a&10&&(r=!n[3].includes(n[23].def_tactic_label.value)),r?t?t.p(n,a):(t=qo(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&m(e),t&&t.d(n)}}}function qo(i){let r=me(i[23].def_tech.value)+"",e,t,n=i[23].def_tech_label.value+"",a,s,l="-->",o,u,f=i[23].def_artifact_rel_label.value.replace(/ /g,"")+"",d,c,h=me(i[23].off_artifact.value)+"",g,N,y=i[23].off_artifact_label.value+"",b,S,D=i[8].edge_is_unique(i[23].def_tech.value,i[23].def_tactic_label.value,i[23].off_tech_id.value),A,v,E,w=i[23].off_artifact_label.value.replace(/ /g,"")+"",B,I,L=me(i[23].def_tech.value)+"",k,j,O=i[23].def_tech_label.value.replace(/ |\./g,"")+"",R,G,Q=D&&jo(i);function oe(H,V){return V&34&&(v=null),v==null&&(v=!!H[5].includes(me(H[23].def_tech.value))),v?R2:S2}let ee=oe(i,-1),X=ee(i);return{c(){e=P(r),t=P('["'),a=P(n),s=P('"] '),o=P(l),u=P(`
                | `),d=P(f),c=P(" | "),g=P(h),N=P('["'),b=P(y),S=P(`"];

                `),Q&&Q.c(),A=ae(),X.c(),E=P(` 
                class `),B=P(w),I=P(` ArtifactNode;
                click `),k=P(L),j=P(` href "javascript:off_to_def_callback('`),R=P(O),G=P(`')";`)},l(H){e=q(H,r),t=q(H,'["'),a=q(H,n),s=q(H,'"] '),o=q(H,l),u=q(H,`
                | `),d=q(H,f),c=q(H," | "),g=q(H,h),N=q(H,'["'),b=q(H,y),S=q(H,`"];

                `),Q&&Q.l(H),A=le(H),X.l(H),E=q(H,` 
                class `),B=q(H,w),I=q(H,` ArtifactNode;
                click `),k=q(H,L),j=q(H,` href "javascript:off_to_def_callback('`),R=q(H,O),G=q(H,`')";`)},m(H,V){C(H,e,V),C(H,t,V),C(H,a,V),C(H,s,V),C(H,o,V),C(H,u,V),C(H,d,V),C(H,c,V),C(H,g,V),C(H,N,V),C(H,b,V),C(H,S,V),Q&&Q.m(H,V),C(H,A,V),X.m(H,V),C(H,E,V),C(H,B,V),C(H,I,V),C(H,k,V),C(H,j,V),C(H,R,V),C(H,G,V)},p(H,V){V&2&&r!==(r=me(H[23].def_tech.value)+"")&&fe(e,r),V&2&&n!==(n=H[23].def_tech_label.value+"")&&fe(a,n),V&2&&f!==(f=H[23].def_artifact_rel_label.value.replace(/ /g,"")+"")&&fe(d,f),V&2&&h!==(h=me(H[23].off_artifact.value)+"")&&fe(g,h),V&2&&y!==(y=H[23].off_artifact_label.value+"")&&fe(b,y),V&2&&(D=H[8].edge_is_unique(H[23].def_tech.value,H[23].def_tactic_label.value,H[23].off_tech_id.value)),D?Q?Q.p(H,V):(Q=jo(H),Q.c(),Q.m(A.parentNode,A)):Q&&(Q.d(1),Q=null),ee===(ee=oe(H,V))&&X?X.p(H,V):(X.d(1),X=ee(H),X&&(X.c(),X.m(E.parentNode,E))),V&2&&w!==(w=H[23].off_artifact_label.value.replace(/ /g,"")+"")&&fe(B,w),V&2&&L!==(L=me(H[23].def_tech.value)+"")&&fe(k,L),V&2&&O!==(O=H[23].def_tech_label.value.replace(/ |\./g,"")+"")&&fe(R,O)},d(H){H&&(m(e),m(t),m(a),m(s),m(o),m(u),m(d),m(c),m(g),m(N),m(b),m(S),m(A),m(E),m(B),m(I),m(k),m(j),m(R),m(G)),Q&&Q.d(H),X.d(H)}}}function jo(i){let r=me(i[23].def_tech.value)+"",e,t,n=i[23].def_tech_label.value+"",a,s,l="-.->",o,u,f="May "+i[23].def_tactic_label.value,d,c,h=i[23].off_tech_id.value.replace(/ |\./g,"")+"",g,N,y=i[23].off_tech_label.value+"",b,S;return{c(){e=P(r),t=P('["'),a=P(n),s=P('"] '),o=P(l),u=P(`
                  | `),d=P(f),c=P(" | "),g=P(h),N=P('["'),b=P(y),S=P('"] ;')},l(D){e=q(D,r),t=q(D,'["'),a=q(D,n),s=q(D,'"] '),o=q(D,l),u=q(D,`
                  | `),d=q(D,f),c=q(D," | "),g=q(D,h),N=q(D,'["'),b=q(D,y),S=q(D,'"] ;')},m(D,A){C(D,e,A),C(D,t,A),C(D,a,A),C(D,s,A),C(D,o,A),C(D,u,A),C(D,d,A),C(D,c,A),C(D,g,A),C(D,N,A),C(D,b,A),C(D,S,A)},p(D,A){A&2&&r!==(r=me(D[23].def_tech.value)+"")&&fe(e,r),A&2&&n!==(n=D[23].def_tech_label.value+"")&&fe(a,n),A&2&&f!==(f="May "+D[23].def_tactic_label.value)&&fe(d,f),A&2&&h!==(h=D[23].off_tech_id.value.replace(/ |\./g,"")+"")&&fe(g,h),A&2&&y!==(y=D[23].off_tech_label.value+"")&&fe(b,y)},d(D){D&&(m(e),m(t),m(a),m(s),m(o),m(u),m(d),m(c),m(g),m(N),m(b),m(S))}}}function S2(i){let r,e=me(i[23].def_tech.value)+"",t,n;return{c(){r=P("class "),t=P(e),n=P(" DefensiveTechniqueNode;")},l(a){r=q(a,"class "),t=q(a,e),n=q(a," DefensiveTechniqueNode;")},m(a,s){C(a,r,s),C(a,t,s),C(a,n,s)},p(a,s){s&2&&e!==(e=me(a[23].def_tech.value)+"")&&fe(t,e)},d(a){a&&(m(r),m(t),m(n))}}}function R2(i){let r,e=me(i[23].def_tech.value)+"",t,n;return{c(){r=P("class "),t=P(e),n=P(" SelectedDefensiveTechniqueNode;")},l(a){r=q(a,"class "),t=q(a,e),n=q(a," SelectedDefensiveTechniqueNode;")},m(a,s){C(a,r,s),C(a,t,s),C(a,n,s)},p(a,s){s&2&&e!==(e=me(a[23].def_tech.value)+"")&&fe(t,e)},d(a){a&&(m(r),m(t),m(n))}}}function Mo(i){let r=i[23].off_tech_id.value.replace(/ |\./g,"")+"",e,t,n=i[23].off_tech_label.value+"",a,s,l="-->",o,u,f=i[23].off_artifact_rel_label.value.replace(/ /g,"")+"",d,c,h=me(i[23].off_artifact.value)+"",g,N,y=i[23].off_artifact_label.value+"",b,S,D=i[23].off_tech_id.value.replace(/ |\./g,"")+"",A,v,E=me(i[23].off_artifact.value)+"",w,B,I=me(i[23].off_artifact.value)+"",L,k,j=me(i[23].off_artifact.value)+"",O,R,G=i[23].off_tech_id.value.replace(/ |\./g,"")+"",Q,oe,ee=Ki(i[23].off_tech_id.value)+"",X,H,V=me(i[23].off_artifact.value)+"",W,M,J=me(i[23].off_artifact.value)+"",Fe,Le;return{c(){e=P(r),t=P('["'),a=P(n),s=P('"] '),o=P(l),u=P(" |"),d=P(f),c=P("| "),g=P(h),N=P('["'),b=P(y),S=P('"]; class '),A=P(D),v=P(` OffensiveTechniqueNode;
            class `),w=P(E),B=P(" ArtifactNode; click "),L=P(I),k=P(' href "/dao/artifact/d3f:'),O=P(j),R=P(`";
            click `),Q=P(G),oe=P(' href "'),X=P(ee),H=P('"; click '),W=P(V),M=P(' href "/dao/artifact/d3f:'),Fe=P(J),Le=P('";')},l(de){e=q(de,r),t=q(de,'["'),a=q(de,n),s=q(de,'"] '),o=q(de,l),u=q(de," |"),d=q(de,f),c=q(de,"| "),g=q(de,h),N=q(de,'["'),b=q(de,y),S=q(de,'"]; class '),A=q(de,D),v=q(de,` OffensiveTechniqueNode;
            class `),w=q(de,E),B=q(de," ArtifactNode; click "),L=q(de,I),k=q(de,' href "/dao/artifact/d3f:'),O=q(de,j),R=q(de,`";
            click `),Q=q(de,G),oe=q(de,' href "'),X=q(de,ee),H=q(de,'"; click '),W=q(de,V),M=q(de,' href "/dao/artifact/d3f:'),Fe=q(de,J),Le=q(de,'";')},m(de,_e){C(de,e,_e),C(de,t,_e),C(de,a,_e),C(de,s,_e),C(de,o,_e),C(de,u,_e),C(de,d,_e),C(de,c,_e),C(de,g,_e),C(de,N,_e),C(de,b,_e),C(de,S,_e),C(de,A,_e),C(de,v,_e),C(de,w,_e),C(de,B,_e),C(de,L,_e),C(de,k,_e),C(de,O,_e),C(de,R,_e),C(de,Q,_e),C(de,oe,_e),C(de,X,_e),C(de,H,_e),C(de,W,_e),C(de,M,_e),C(de,Fe,_e),C(de,Le,_e)},p(de,_e){_e&2&&r!==(r=de[23].off_tech_id.value.replace(/ |\./g,"")+"")&&fe(e,r),_e&2&&n!==(n=de[23].off_tech_label.value+"")&&fe(a,n),_e&2&&f!==(f=de[23].off_artifact_rel_label.value.replace(/ /g,"")+"")&&fe(d,f),_e&2&&h!==(h=me(de[23].off_artifact.value)+"")&&fe(g,h),_e&2&&y!==(y=de[23].off_artifact_label.value+"")&&fe(b,y),_e&2&&D!==(D=de[23].off_tech_id.value.replace(/ |\./g,"")+"")&&fe(A,D),_e&2&&E!==(E=me(de[23].off_artifact.value)+"")&&fe(w,E),_e&2&&I!==(I=me(de[23].off_artifact.value)+"")&&fe(L,I),_e&2&&j!==(j=me(de[23].off_artifact.value)+"")&&fe(O,j),_e&2&&G!==(G=de[23].off_tech_id.value.replace(/ |\./g,"")+"")&&fe(Q,G),_e&2&&ee!==(ee=Ki(de[23].off_tech_id.value)+"")&&fe(X,ee),_e&2&&V!==(V=me(de[23].off_artifact.value)+"")&&fe(W,V),_e&2&&J!==(J=me(de[23].off_artifact.value)+"")&&fe(Fe,J)},d(de){de&&(m(e),m(t),m(a),m(s),m(o),m(u),m(d),m(c),m(g),m(N),m(b),m(S),m(A),m(v),m(w),m(B),m(L),m(k),m(O),m(R),m(Q),m(oe),m(X),m(H),m(W),m(M),m(Fe),m(Le))}}}function Uo(i){let r,e=i[8].edge_is_unique(i[23].off_tech_label.value,i[23].off_artifact_rel_label.value,i[23].off_artifact_label.value),t,n="def_tech"in i[23]&&Bo(i),a=e&&Mo(i);return{c(){n&&n.c(),r=ae(),a&&a.c(),t=De()},l(s){n&&n.l(s),r=le(s),a&&a.l(s),t=De()},m(s,l){n&&n.m(s,l),C(s,r,l),a&&a.m(s,l),C(s,t,l)},p(s,l){"def_tech"in s[23]?n?n.p(s,l):(n=Bo(s),n.c(),n.m(r.parentNode,r)):n&&(n.d(1),n=null),l&2&&(e=s[8].edge_is_unique(s[23].off_tech_label.value,s[23].off_artifact_rel_label.value,s[23].off_artifact_label.value)),e?a?a.p(s,l):(a=Mo(s),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null)},d(s){s&&(m(r),m(t)),n&&n.d(s),a&&a.d(s)}}}function F2(i){let r,e,t=He(i[1].off_to_def.results.bindings),n=[];for(let a=0;a<t.length;a+=1)n[a]=Uo(Oo(i,t,a));return{c(){r=P(`graph LR;
        `);for(let a=0;a<n.length;a+=1)n[a].c();e=De()},l(a){r=q(a,`graph LR;
        `);for(let s=0;s<n.length;s+=1)n[s].l(a);e=De()},m(a,s){C(a,r,s);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(a,s);C(a,e,s)},p(a,s){if(s&298){t=He(a[1].off_to_def.results.bindings);let l;for(l=0;l<t.length;l+=1){const o=Oo(a,t,l);n[l]?n[l].p(o,s):(n[l]=Uo(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(a){a&&(m(r),m(e)),Dt(n,a)}}}function I2(i){let r,e,t,n,a,s,l,o,u,f,d,c,h,g=i[5].length+"",N,y,b,S,D;const A=i[12].header,v=bt(A,i,i[18],Lo),E=i[12].default,w=bt(E,i,i[18],null),B=[T2,N2,C2],I=[];function L(k,j){return k[1]?k[1].off_to_def.results.bindings.length>0?1:2:0}return l=L(i),o=I[l]=B[l](i),{c(){r=re("dialog"),e=re("div"),v&&v.c(),t=P(`
    Select Related Artifacts To Insert
    `),w&&w.c(),n=ae(),a=re("hr"),s=ae(),o.c(),u=ae(),f=re("hr"),d=ae(),c=re("button"),h=P("Insert ("),N=P(g),y=P(")"),this.h()},l(k){r=ne(k,"DIALOG",{class:!0});var j=ge(r);e=ne(j,"DIV",{class:!0});var O=ge(e);v&&v.l(O),t=q(O,`
    Select Related Artifacts To Insert
    `),w&&w.l(O),n=le(O),a=ne(O,"HR",{}),s=le(O),o.l(O),u=le(O),f=ne(O,"HR",{}),d=le(O),c=ne(O,"BUTTON",{class:!0});var R=ge(c);h=q(R,"Insert ("),N=q(R,g),y=q(R,")"),R.forEach(m),O.forEach(m),j.forEach(m),this.h()},h(){c.autofocus=!0,se(c,"class","svelte-x0618k"),se(e,"class","svelte-x0618k"),se(r,"class","svelte-x0618k")},m(k,j){C(k,r,j),x(r,e),v&&v.m(e,null),x(e,t),w&&w.m(e,null),x(e,n),x(e,a),x(e,s),I[l].m(e,null),x(e,u),x(e,f),x(e,d),x(e,c),x(c,h),x(c,N),x(c,y),i[15](r),b=!0,c.focus(),S||(D=[pe(c,"click",i[9]),pe(e,"click",vt(i[13])),pe(r,"close",i[16]),pe(r,"click",zr(i[17]))],S=!0)},p(k,[j]){v&&v.p&&(!b||j&262144)&&wt(v,A,k,k[18],b?kt(A,k[18],j,A2):yt(k[18]),Lo),w&&w.p&&(!b||j&262144)&&wt(w,E,k,k[18],b?kt(E,k[18],j,null):yt(k[18]),null);let O=l;l=L(k),l===O?I[l].p(k,j):(xe(),Z(I[O],1,1,()=>{I[O]=null}),Ve(),o=I[l],o?o.p(k,j):(o=I[l]=B[l](k),o.c()),Y(o,1),o.m(e,u)),(!b||j&32)&&g!==(g=k[5].length+"")&&fe(N,g)},i(k){b||(Y(v,k),Y(w,k),Y(o),b=!0)},o(k){Z(v,k),Z(w,k),Z(o),b=!1},d(k){k&&m(r),v&&v.d(k),w&&w.d(k),I[l].d(),i[15](null),S=!1,st(D)}}}function O2(i,r,e){let t,n,a,{$$slots:s={},$$scope:l}=r,{show_defend_modal:o}=r,{parent_node:u}=r,{data:f}=r,d;const c=Er();Ye(i,c,L=>e(20,a=L));const h=Ar();Ye(i,h,L=>e(19,n=L));let g=new In;function N(L){t.includes(L)?e(5,t=t.filter(k=>k!==L)):t.push(L),e(5,t)}window.off_to_def_callback=function(L){N(L)};function y(){let L=0,k=200,j=100;for(const O of t){let R=f.off_to_def.results.bindings.find(G=>"def_tech"in G&&me(G.def_tech.value)==O);R&&(Zr(c,h,u,"countermeasureSelectorNode",R.def_tech_label.value,"d3f:"+me(R.def_tech.value),u.data.sequence,u.position.x+L*k,u.position.y+j,182,63,"May "+R.def_tactic_label.value,"defenseBottomSource","attackTopTarget",!1),L+=1)}c.set(a),h.set(n),d&&d.close(),e(5,t=[])}let b=new Set,S=[],D=[];Xf(S,D)&&(D=[]);function A(L){for(const k of t){let j=f.off_to_def.results.bindings.find(O=>"def_tech"in O&&me(O.def_tech.value)==k);L.includes(j.def_tactic_label.value)&&e(5,t=t.filter(O=>O!==k))}e(5,t)}function v(L){ur.call(this,i,L)}function E(L){D=L,e(3,D)}function w(L){mt[L?"unshift":"push"](()=>{d=L,e(2,d)})}const B=()=>e(0,o=!1),I=()=>{d.close(),e(5,t=[])};return i.$$set=L=>{"show_defend_modal"in L&&e(0,o=L.show_defend_modal),"parent_node"in L&&e(10,u=L.parent_node),"data"in L&&e(1,f=L.data),"$$scope"in L&&e(18,l=L.$$scope)},i.$$.update=()=>{i.$$.dirty&5&&o&&d&&(d.showModal(),g.reset()),i.$$.dirty&2050&&f&&(f.off_to_def.results.bindings.forEach(L=>{"def_tactic_label"in L&&b.add(L.def_tactic_label.value)}),e(11,b),e(1,f)),i.$$.dirty&2048&&e(4,S=Array.from(b).sort(function(L,k){return es[L]-es[k]})),i.$$.dirty&8&&A(D),i.$$.dirty&8&&g.reset(D)},e(5,t=[]),[o,f,d,D,S,t,c,h,g,y,u,b,s,v,E,w,B,I,l]}class L2 extends Ke{constructor(r){super(),et(this,r,O2,I2,qe,{show_defend_modal:0,parent_node:10,data:1})}}function B2(i){let r,e="artifacts",t,n,a,s,l,o="defensive techniques",u,f,d,c,h,g;function N(D){i[6](D)}let y={parent_node:i[0],data:i[1]};i[2]!==void 0&&(y.show_artifacts_modal=i[2]),n=new E2({props:y}),mt.push(()=>$t(n,"show_artifacts_modal",N));function b(D){i[8](D)}let S={parent_node:i[0],data:i[1]};return i[3]!==void 0&&(S.show_defend_modal=i[3]),f=new L2({props:S}),mt.push(()=>$t(f,"show_defend_modal",b)),{c(){r=re("button"),r.textContent=e,t=ae(),ve(n.$$.fragment),s=ae(),l=re("button"),l.textContent=o,u=ae(),ve(f.$$.fragment),this.h()},l(D){r=ne(D,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(r)!=="svelte-1t14z6m"&&(r.textContent=e),t=le(D),be(n.$$.fragment,D),s=le(D),l=ne(D,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(l)!=="svelte-o3we0s"&&(l.textContent=o),u=le(D),be(f.$$.fragment,D),this.h()},h(){se(r,"class","svelte-1x5dcdh"),se(l,"class","svelte-1x5dcdh")},m(D,A){C(D,r,A),C(D,t,A),we(n,D,A),C(D,s,A),C(D,l,A),C(D,u,A),we(f,D,A),c=!0,h||(g=[pe(r,"click",i[5]),pe(l,"click",i[7])],h=!0)},p(D,[A]){const v={};A&1&&(v.parent_node=D[0]),A&2&&(v.data=D[1]),!a&&A&4&&(a=!0,v.show_artifacts_modal=D[2],Xt(()=>a=!1)),n.$set(v);const E={};A&1&&(E.parent_node=D[0]),A&2&&(E.data=D[1]),!d&&A&8&&(d=!0,E.show_defend_modal=D[3],Xt(()=>d=!1)),f.$set(E)},i(D){c||(Y(n.$$.fragment,D),Y(f.$$.fragment,D),c=!0)},o(D){Z(n.$$.fragment,D),Z(f.$$.fragment,D),c=!1},d(D){D&&(m(r),m(t),m(s),m(l),m(u)),ye(n,D),ye(f,D),h=!1,st(g)}}}function P2(i,r,e){let t,n;var a=this&&this.__awaiter||function(h,g,N,y){function b(S){return S instanceof N?S:new N(function(D){D(S)})}return new(N||(N=Promise))(function(S,D){function A(w){try{E(y.next(w))}catch(B){D(B)}}function v(w){try{E(y.throw(w))}catch(B){D(B)}}function E(w){w.done?S(w.value):b(w.value).then(A,v)}E((y=y.apply(h,g||[])).next())})};let{node:s}=r,l;function o(h){return a(this,void 0,void 0,function*(){if(h.data.d3f_class){const g=h.data.d3f_class;return yield(yield fetch(`/api/offensive-technique/attack/${g.replace("d3f:","")}.json`)).json()}else alert("Please specify a D3FEND Class for this node to enable inferential mapping"),e(3,n=!1),e(2,t=!1)})}const u=async()=>{e(1,l=null),e(2,t=!0),e(1,l=await o(s))};function f(h){t=h,e(2,t)}const d=async()=>{e(1,l=null),e(3,n=!0),e(1,l=await o(s))};function c(h){n=h,e(3,n)}return i.$$set=h=>{"node"in h&&e(0,s=h.node)},e(2,t=!1),e(3,n=!1),[s,l,t,n,o,u,f,d,c]}class q2 extends Ke{constructor(r){super(),et(this,r,P2,B2,qe,{node:0})}}function xo(i){let r,e;return r=new q2({props:{node:i[1]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n&2&&(a.node=t[1]),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Vo(i){let r,e;return r=new _2({props:{node:i[1]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n&2&&(a.node=t[1]),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Ho(i){let r,e;return r=new X1({props:{node:i[1]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n&2&&(a.node=t[1]),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function j2(i){let r,e,t,n,a,s,l,o,u,f,d="duplicate",c,h,g="delete",N,y,b,S,D=i[1]&&i[1].type=="attackSelectorNode"&&xo(i),A=i[1]&&i[1].type=="countermeasureSelectorNode"&&Vo(i),v=i[1]&&i[1].type=="artifactSelectorNode"&&Ho(i);return{c(){r=re("div"),e=re("p"),t=re("small"),n=P("node: "),a=P(i[0]),s=ae(),D&&D.c(),l=ae(),A&&A.c(),o=ae(),v&&v.c(),u=ae(),f=re("button"),f.textContent=d,c=ae(),h=re("button"),h.textContent=g,this.h()},l(E){r=ne(E,"DIV",{style:!0,class:!0});var w=ge(r);e=ne(w,"P",{style:!0});var B=ge(e);t=ne(B,"SMALL",{});var I=ge(t);n=q(I,"node: "),a=q(I,i[0]),I.forEach(m),B.forEach(m),s=le(w),D&&D.l(w),l=le(w),A&&A.l(w),o=le(w),v&&v.l(w),u=le(w),f=ne(w,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(f)!=="svelte-1spbqw1"&&(f.textContent=d),c=le(w),h=ne(w,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(h)!=="svelte-1pyou7z"&&(h.textContent=g),w.forEach(m),this.h()},h(){Ge(e,"margin","0.5em"),se(f,"class","svelte-1o17oqa"),se(h,"class","svelte-1o17oqa"),se(r,"style",N=i[2]()),se(r,"class","context-menu svelte-1o17oqa")},m(E,w){C(E,r,w),x(r,e),x(e,t),x(t,n),x(t,a),x(r,s),D&&D.m(r,null),x(r,l),A&&A.m(r,null),x(r,o),v&&v.m(r,null),x(r,u),x(r,f),x(r,c),x(r,h),y=!0,b||(S=[pe(f,"click",i[5]),pe(h,"click",i[6])],b=!0)},p(E,[w]){(!y||w&1)&&fe(a,E[0]),E[1]&&E[1].type=="attackSelectorNode"?D?(D.p(E,w),w&2&&Y(D,1)):(D=xo(E),D.c(),Y(D,1),D.m(r,l)):D&&(xe(),Z(D,1,1,()=>{D=null}),Ve()),E[1]&&E[1].type=="countermeasureSelectorNode"?A?(A.p(E,w),w&2&&Y(A,1)):(A=Vo(E),A.c(),Y(A,1),A.m(r,o)):A&&(xe(),Z(A,1,1,()=>{A=null}),Ve()),E[1]&&E[1].type=="artifactSelectorNode"?v?(v.p(E,w),w&2&&Y(v,1)):(v=Ho(E),v.c(),Y(v,1),v.m(r,u)):v&&(xe(),Z(v,1,1,()=>{v=null}),Ve()),(!y||w&4&&N!==(N=E[2]()))&&se(r,"style",N)},i(E){y||(Y(D),Y(A),Y(v),y=!0)},o(E){Z(D),Z(A),Z(v),y=!1},d(E){E&&m(r),D&&D.d(),A&&A.d(),v&&v.d(),b=!1,st(S)}}}function M2(i,r,e){let t,n,a,s,{id:l}=r,{top:o}=r,{left:u}=r,{right:f}=r,{bottom:d}=r;const c=Er();Ye(i,c,y=>e(11,s=y));const h=Ar();Ye(i,h,y=>e(12,a=y));function g(){const y=s.find(b=>b.id===l);y&&(console.log(y),s.push(Object.assign(Object.assign({},y),{id:`${l}-copy${Math.random()}`.slice(-24),position:{x:y.position.x,y:y.position.y+50}}))),c.set(s)}function N(){Fr(c,s=s.filter(y=>y.id!==l),s),Fr(h,a=a.filter(y=>y.source!==l&&y.target!==l),a),c.set(s),h.set(a)}return i.$$set=y=>{"id"in y&&e(0,l=y.id),"top"in y&&e(7,o=y.top),"left"in y&&e(8,u=y.left),"right"in y&&e(9,f=y.right),"bottom"in y&&e(10,d=y.bottom)},i.$$.update=()=>{i.$$.dirty&2049&&e(1,t=s.find(y=>y.id===l)),i.$$.dirty&1920&&e(2,n=()=>{let y="";return o&&(y+=`top:${o}px;`),d&&(y+=`bottom:${d}px;`),u&&(y+=`left:${u}px;`),f&&(y+=`right:${f}px;`),y})},[l,t,n,c,h,g,N,o,u,f,d,s]}class U2 extends Ke{constructor(r){super(),et(this,r,M2,j2,qe,{id:0,top:7,left:8,right:9,bottom:10})}}function zo(i,r,e){const t=i.slice();return t[12]=r[e],t}function Xo(i){let r,e,t,n,a,s,l,o,u,f,d,c,h;const g=i[8].default,N=bt(g,i,i[7],null);let y=He(i[3]),b=[];for(let S=0;S<y.length;S+=1)b[S]=$o(zo(i,y,S));return{c(){r=re("div"),e=re("div"),t=re("h2"),n=P(i[1]),a=ae(),s=re("p"),l=P(i[2]),o=ae(),N&&N.c(),u=ae(),f=re("div");for(let S=0;S<b.length;S+=1)b[S].c();this.h()},l(S){r=ne(S,"DIV",{class:!0});var D=ge(r);e=ne(D,"DIV",{class:!0});var A=ge(e);t=ne(A,"H2",{});var v=ge(t);n=q(v,i[1]),v.forEach(m),a=le(A),s=ne(A,"P",{});var E=ge(s);l=q(E,i[2]),E.forEach(m),o=le(A),N&&N.l(A),u=le(A),f=ne(A,"DIV",{class:!0});var w=ge(f);for(let B=0;B<b.length;B+=1)b[B].l(w);w.forEach(m),A.forEach(m),D.forEach(m),this.h()},h(){se(f,"class","options svelte-zbcx3u"),se(e,"class","modal-content center text-center svelte-zbcx3u"),se(r,"class","modal-overlay svelte-zbcx3u")},m(S,D){C(S,r,D),x(r,e),x(e,t),x(t,n),x(e,a),x(e,s),x(s,l),x(e,o),N&&N.m(e,null),x(e,u),x(e,f);for(let A=0;A<b.length;A+=1)b[A]&&b[A].m(f,null);d=!0,c||(h=[pe(e,"click",vt(i[9])),pe(r,"click",i[4])],c=!0)},p(S,D){if((!d||D&2)&&fe(n,S[1]),(!d||D&4)&&fe(l,S[2]),N&&N.p&&(!d||D&128)&&wt(N,g,S,S[7],d?kt(g,S[7],D,null):yt(S[7]),null),D&40){y=He(S[3]);let A;for(A=0;A<y.length;A+=1){const v=zo(S,y,A);b[A]?b[A].p(v,D):(b[A]=$o(v),b[A].c(),b[A].m(f,null))}for(;A<b.length;A+=1)b[A].d(1);b.length=y.length}},i(S){d||(Y(N,S),d=!0)},o(S){Z(N,S),d=!1},d(S){S&&m(r),N&&N.d(S),Dt(b,S),c=!1,st(h)}}}function $o(i){let r,e=i[12].label+"",t,n,a,s;function l(){return i[10](i[12])}return{c(){r=re("button"),t=P(e),n=ae(),this.h()},l(o){r=ne(o,"BUTTON",{class:!0});var u=ge(r);t=q(u,e),n=le(u),u.forEach(m),this.h()},h(){se(r,"class","svelte-zbcx3u")},m(o,u){C(o,r,u),x(r,t),x(r,n),a||(s=pe(r,"click",l),a=!0)},p(o,u){i=o,u&8&&e!==(e=i[12].label+"")&&fe(t,e)},d(o){o&&m(r),a=!1,s()}}}function x2(i){let r,e,t=i[0]&&Xo(i);return{c(){t&&t.c(),r=De()},l(n){t&&t.l(n),r=De()},m(n,a){t&&t.m(n,a),C(n,r,a),e=!0},p(n,[a]){n[0]?t?(t.p(n,a),a&1&&Y(t,1)):(t=Xo(n),t.c(),Y(t,1),t.m(r.parentNode,r)):t&&(xe(),Z(t,1,1,()=>{t=null}),Ve())},i(n){e||(Y(t),e=!0)},o(n){Z(t),e=!1},d(n){n&&m(r),t&&t.d(n)}}}function V2(i,r,e){let{$$slots:t={},$$scope:n}=r,{is_open:a=!1}=r,{title:s=""}=r,{content:l=""}=r,{imageSrc:o=""}=r,{options:u=[]}=r;const f=la();function d(){e(0,a=!1)}function c(N){f("optionSelected",N),d()}function h(N){ur.call(this,i,N)}const g=N=>c(N);return i.$$set=N=>{"is_open"in N&&e(0,a=N.is_open),"title"in N&&e(1,s=N.title),"content"in N&&e(2,l=N.content),"imageSrc"in N&&e(6,o=N.imageSrc),"options"in N&&e(3,u=N.options),"$$scope"in N&&e(7,n=N.$$scope)},[a,s,l,u,d,c,o,n,t,h,g]}class Go extends Ke{constructor(r){super(),et(this,r,V2,x2,qe,{is_open:0,title:1,content:2,imageSrc:6,options:3})}}function Wo(i,r,e){const t=i.slice();return t[11]=r[e],t}function Qo(i){let r,e,t,n,a,s,l,o,u,f,d,c,h;const g=i[7].default,N=bt(g,i,i[6],null);let y=He(i[3]),b=[];for(let S=0;S<y.length;S+=1)b[S]=Yo(Wo(i,y,S));return{c(){r=re("div"),e=re("div"),t=re("h2"),n=P(i[1]),a=ae(),s=re("p"),l=P(i[2]),o=ae(),N&&N.c(),u=ae(),f=re("div");for(let S=0;S<b.length;S+=1)b[S].c();this.h()},l(S){r=ne(S,"DIV",{class:!0});var D=ge(r);e=ne(D,"DIV",{class:!0});var A=ge(e);t=ne(A,"H2",{});var v=ge(t);n=q(v,i[1]),v.forEach(m),a=le(A),s=ne(A,"P",{});var E=ge(s);l=q(E,i[2]),E.forEach(m),o=le(A),N&&N.l(A),u=le(A),f=ne(A,"DIV",{class:!0});var w=ge(f);for(let B=0;B<b.length;B+=1)b[B].l(w);w.forEach(m),A.forEach(m),D.forEach(m),this.h()},h(){se(f,"class","options svelte-2iwk9m"),se(e,"class","modal-content center text-center svelte-2iwk9m"),se(r,"class","modal-overlay svelte-2iwk9m")},m(S,D){C(S,r,D),x(r,e),x(e,t),x(t,n),x(e,a),x(e,s),x(s,l),x(e,o),N&&N.m(e,null),x(e,u),x(e,f);for(let A=0;A<b.length;A+=1)b[A]&&b[A].m(f,null);d=!0,c||(h=[pe(e,"click",vt(i[8])),pe(r,"click",i[4])],c=!0)},p(S,D){if((!d||D&2)&&fe(n,S[1]),(!d||D&4)&&fe(l,S[2]),N&&N.p&&(!d||D&64)&&wt(N,g,S,S[6],d?kt(g,S[6],D,null):yt(S[6]),null),D&40){y=He(S[3]);let A;for(A=0;A<y.length;A+=1){const v=Wo(S,y,A);b[A]?b[A].p(v,D):(b[A]=Yo(v),b[A].c(),b[A].m(f,null))}for(;A<b.length;A+=1)b[A].d(1);b.length=y.length}},i(S){d||(Y(N,S),d=!0)},o(S){Z(N,S),d=!1},d(S){S&&m(r),N&&N.d(S),Dt(b,S),c=!1,st(h)}}}function Yo(i){let r,e=i[11].label+"",t,n,a,s;function l(){return i[9](i[11])}return{c(){r=re("button"),t=P(e),n=ae(),this.h()},l(o){r=ne(o,"BUTTON",{class:!0});var u=ge(r);t=q(u,e),n=le(u),u.forEach(m),this.h()},h(){se(r,"class","svelte-2iwk9m")},m(o,u){C(o,r,u),x(r,t),x(r,n),a||(s=pe(r,"click",l),a=!0)},p(o,u){i=o,u&8&&e!==(e=i[11].label+"")&&fe(t,e)},d(o){o&&m(r),a=!1,s()}}}function H2(i){let r,e,t=i[0]&&Qo(i);return{c(){t&&t.c(),r=De()},l(n){t&&t.l(n),r=De()},m(n,a){t&&t.m(n,a),C(n,r,a),e=!0},p(n,[a]){n[0]?t?(t.p(n,a),a&1&&Y(t,1)):(t=Qo(n),t.c(),Y(t,1),t.m(r.parentNode,r)):t&&(xe(),Z(t,1,1,()=>{t=null}),Ve())},i(n){e||(Y(t),e=!0)},o(n){Z(t),e=!1},d(n){n&&m(r),t&&t.d(n)}}}function z2(i,r,e){let{$$slots:t={},$$scope:n}=r,{is_open:a=!1}=r,{title:s=""}=r,{content:l=""}=r,{options:o=[{label:"Cancel",value:"cancel"}]}=r;const u=la();function f(){e(0,a=!1)}function d(g){u("model_shared",g),f()}function c(g){ur.call(this,i,g)}const h=g=>d(g);return i.$$set=g=>{"is_open"in g&&e(0,a=g.is_open),"title"in g&&e(1,s=g.title),"content"in g&&e(2,l=g.content),"options"in g&&e(3,o=g.options),"$$scope"in g&&e(6,n=g.$$scope)},[a,s,l,o,f,d,n,t,c,h]}class X2 extends Ke{constructor(r){super(),et(this,r,z2,H2,qe,{is_open:0,title:1,content:2,options:3})}}function $2(i){let r,e,t=i[1]?"Exit Fullscreen":"Fullscreen",n,a,s,l,o;const u=i[4].default,f=bt(u,i,i[3],null);return{c(){r=re("div"),e=re("button"),n=P(t),a=ae(),f&&f.c(),this.h()},l(d){r=ne(d,"DIV",{id:!0,class:!0});var c=ge(r);e=ne(c,"BUTTON",{class:!0});var h=ge(e);n=q(h,t),h.forEach(m),a=le(c),f&&f.l(c),c.forEach(m),this.h()},h(){se(e,"class","fullscreen-toggle svelte-1t28a4x"),mr(e,"left",i[0]==="left"),mr(e,"right",i[0]==="right"),se(r,"id","fullscreen-parent"),se(r,"class","svelte-1t28a4x")},m(d,c){C(d,r,c),x(r,e),x(e,n),x(r,a),f&&f.m(r,null),s=!0,l||(o=pe(e,"click",i[2]),l=!0)},p(d,[c]){(!s||c&2)&&t!==(t=d[1]?"Exit Fullscreen":"Fullscreen")&&fe(n,t),(!s||c&1)&&mr(e,"left",d[0]==="left"),(!s||c&1)&&mr(e,"right",d[0]==="right"),f&&f.p&&(!s||c&8)&&wt(f,u,d,d[3],s?kt(u,d[3],c,null):yt(d[3]),null)},i(d){s||(Y(f,d),s=!0)},o(d){Z(f,d),s=!1},d(d){d&&m(r),f&&f.d(d),l=!1,o()}}}function G2(i,r,e){let{$$slots:t={},$$scope:n}=r,{position:a="right"}=r,s=!1,l;us(()=>(l=document.getElementById("fullscreen-parent"),document.addEventListener("fullscreenchange",o),()=>{document.removeEventListener("fullscreenchange",o)}));function o(){e(1,s=!!document.fullscreenElement)}async function u(){if(s)try{await document.exitFullscreen()}catch(f){console.error("Error attempting to exit fullscreen:",f)}else try{await l.requestFullscreen()}catch(f){console.error("Error attempting to enable fullscreen:",f)}}return i.$$set=f=>{"position"in f&&e(0,a=f.position),"$$scope"in f&&e(3,n=f.$$scope)},[a,s,u,n,t]}class W2 extends Ke{constructor(r){super(),et(this,r,G2,$2,qe,{position:0})}}function Q2(i){let r,e,t="You can drag these nodes to the pane below.",n,a,s,l,o="Action",u,f,d="Event",c,h,g="Attack",N,y,b="Countermeasure",S,D,A,v="Endurant",E,w,B="Artifact",I,L,k="Information",j,O,R="Agent",G,Q,oe,ee="State",X,H,V="Vulnerability",W,M,J="Condition",Fe,Le;return{c(){r=re("aside"),e=re("div"),e.textContent=t,n=ae(),a=re("div"),s=re("div"),l=re("div"),l.textContent=o,u=ae(),f=re("div"),f.textContent=d,c=ae(),h=re("div"),h.textContent=g,N=ae(),y=re("div"),y.textContent=b,S=ae(),D=re("div"),A=re("div"),A.textContent=v,E=ae(),w=re("div"),w.textContent=B,I=ae(),L=re("div"),L.textContent=k,j=ae(),O=re("div"),O.textContent=R,G=ae(),Q=re("div"),oe=re("div"),oe.textContent=ee,X=ae(),H=re("div"),H.textContent=V,W=ae(),M=re("div"),M.textContent=J,this.h()},l(de){r=ne(de,"ASIDE",{class:!0});var _e=ge(r);e=ne(_e,"DIV",{class:!0,"data-svelte-h":!0}),Me(e)!=="svelte-1go4e39"&&(e.textContent=t),n=le(_e),a=ne(_e,"DIV",{class:!0});var ue=ge(a);s=ne(ue,"DIV",{class:!0});var Ee=ge(s);l=ne(Ee,"DIV",{class:!0,"data-svelte-h":!0}),Me(l)!=="svelte-1yk6dej"&&(l.textContent=o),u=le(Ee),f=ne(Ee,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),Me(f)!=="svelte-1hxo6k5"&&(f.textContent=d),c=le(Ee),h=ne(Ee,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),Me(h)!=="svelte-1m30nhf"&&(h.textContent=g),N=le(Ee),y=ne(Ee,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),Me(y)!=="svelte-xvztkt"&&(y.textContent=b),Ee.forEach(m),S=le(ue),D=ne(ue,"DIV",{class:!0});var Xe=ge(D);A=ne(Xe,"DIV",{class:!0,"data-svelte-h":!0}),Me(A)!=="svelte-13fxc4g"&&(A.textContent=v),E=le(Xe),w=ne(Xe,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Me(w)!=="svelte-p6iki9"&&(w.textContent=B),I=le(Xe),L=ne(Xe,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Me(L)!=="svelte-gfucir"&&(L.textContent=k),j=le(Xe),O=ne(Xe,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Me(O)!=="svelte-1k1k96h"&&(O.textContent=R),Xe.forEach(m),G=le(ue),Q=ne(ue,"DIV",{class:!0});var ct=ge(Q);oe=ne(ct,"DIV",{class:!0,"data-svelte-h":!0}),Me(oe)!=="svelte-82roym"&&(oe.textContent=ee),X=le(ct),H=ne(ct,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Me(H)!=="svelte-tj9qj"&&(H.textContent=V),W=le(ct),M=ne(ct,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Me(M)!=="svelte-1mwlumu"&&(M.textContent=J),ct.forEach(m),ue.forEach(m),_e.forEach(m),this.h()},h(){se(e,"class","label svelte-1vosa9g"),se(l,"class","text-center font-medium"),se(f,"class","actionNode example-node svelte-1vosa9g"),se(f,"draggable",!0),Ge(f,"text-align","center"),Ge(f,"background","white"),se(f,"title","d3f:Event"),se(h,"class","attackSelectorNode example-node svelte-1vosa9g"),se(h,"draggable",!0),Ge(h,"text-align","center"),Ge(h,"background","#FFD0D0"),se(h,"title","d3f:OffensiveTechnique"),se(y,"class","countermeasureSelectorNode example-node svelte-1vosa9g"),se(y,"draggable",!0),Ge(y,"text-align","center"),Ge(y,"background","#d6eaff"),se(y,"title","d3f:DefensiveTechnique"),se(s,"class","nodes-column svelte-1vosa9g"),se(A,"class","text-center font-medium"),se(w,"class","artifactSelectorNode art-node example-node svelte-1vosa9g"),se(w,"draggable",!0),Ge(w,"text-align","center"),Ge(w,"background","#fff4dd"),se(L,"class","informationSelectorNode example-node svelte-1vosa9g"),se(L,"draggable",!0),Ge(L,"text-align","center"),Ge(L,"background","#e8f4ea"),se(O,"class","agentSelectorNode example-node svelte-1vosa9g"),se(O,"draggable",!0),Ge(O,"text-align","center"),Ge(O,"background","#f0e6e6"),se(D,"class","nodes-column svelte-1vosa9g"),se(oe,"class","text-center font-medium"),se(H,"class","vulnerabilitySelectorNode example-node svelte-1vosa9g"),se(H,"draggable",!0),Ge(H,"text-align","center"),Ge(H,"background","#f9d999"),se(M,"class","conditionDefinitionNode example-node svelte-1vosa9g"),se(M,"draggable",!0),Ge(M,"text-align","center"),Ge(M,"background","#ece6ff"),se(Q,"class","nodes-column svelte-1vosa9g"),se(a,"class","nodes-container svelte-1vosa9g"),se(r,"class","svelte-1vosa9g")},m(de,_e){C(de,r,_e),x(r,e),x(r,n),x(r,a),x(a,s),x(s,l),x(s,u),x(s,f),x(s,c),x(s,h),x(s,N),x(s,y),x(a,S),x(a,D),x(D,A),x(D,E),x(D,w),x(D,I),x(D,L),x(D,j),x(D,O),x(a,G),x(a,Q),x(Q,oe),x(Q,X),x(Q,H),x(Q,W),x(Q,M),Fe||(Le=[pe(f,"dragstart",i[1]),pe(h,"dragstart",i[2]),pe(y,"dragstart",i[3]),pe(w,"dragstart",i[4]),pe(L,"dragstart",i[5]),pe(O,"dragstart",i[6]),pe(H,"dragstart",i[7]),pe(M,"dragstart",i[8])],Fe=!0)},p:Ce,i:Ce,o:Ce,d(de){de&&m(r),Fe=!1,st(Le)}}}function Y2(i){const r=(f,d)=>{if(!f.dataTransfer)return null;f.dataTransfer.setData("application/svelteflow",d),f.dataTransfer.effectAllowed="move"};return[r,f=>r(f,"eventNode"),f=>r(f,"attackSelectorNode"),f=>r(f,"countermeasureSelectorNode"),f=>r(f,"artifactSelectorNode"),f=>r(f,"informationSelectorNode"),f=>r(f,"agentSelectorNode"),f=>r(f,"vulnerabilitySelectorNode"),f=>r(f,"conditionDefinitionNode")]}class J2 extends Ke{constructor(r){super(),et(this,r,Y2,Q2,qe,{})}}function Jo(i,r,e){const t=i.slice();return t[9]=r[e],t}function Zo(i){let r,e=i[9]["rdfs:label"]+"",t,n,a,s,l;function o(...f){return i[7](i[9],...f)}function u(...f){return i[8](i[9],...f)}return{c(){r=re("div"),t=P(e),n=ae(),this.h()},l(f){r=ne(f,"DIV",{class:!0,title:!0,tabindex:!0,role:!0});var d=ge(r);t=q(d,e),n=le(d),d.forEach(m),this.h()},h(){se(r,"class","select-technique"),se(r,"title",a=i[9]["d3f:definition"]),se(r,"tabindex","0"),se(r,"role","button")},m(f,d){C(f,r,d),x(r,t),x(r,n),s||(l=[pe(r,"click",vt(cn(o))),pe(r,"keydown",vt(u))],s=!0)},p(f,d){i=f,d&8&&e!==(e=i[9]["rdfs:label"]+"")&&fe(t,e),d&8&&a!==(a=i[9]["d3f:definition"])&&se(r,"title",a)},d(f){f&&m(r),s=!1,st(l)}}}function Z2(i){let r,e=He(i[3]),t=[];for(let n=0;n<e.length;n+=1)t[n]=Zo(Jo(i,e,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();r=De()},l(n){for(let a=0;a<t.length;a+=1)t[a].l(n);r=De()},m(n,a){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(n,a);C(n,r,a)},p(n,[a]){if(a&12){e=He(n[3]);let s;for(s=0;s<e.length;s+=1){const l=Jo(n,e,s);t[s]?t[s].p(l,a):(t[s]=Zo(l),t[s].c(),t[s].m(r.parentNode,r))}for(;s<t.length;s+=1)t[s].d(1);t.length=e.length}},i:Ce,o:Ce,d(n){n&&m(r),Dt(t,n)}}}function K2(i,r,e){let t,n=Ce,a=()=>(n(),n=Dr(f,y=>e(5,t=y)),f),s,l=Ce,o=()=>(l(),l=Dr(u,y=>e(6,s=y)),u);i.$$.on_destroy.push(()=>n()),i.$$.on_destroy.push(()=>l());let{list:u}=r;o();let{filter_value_store:f}=r;a();let{select_item:d}=r,{regex_search_keys:c=["rdfs:label","@id"]}=r,h=[];const g=(y,b)=>d(b,y),N=(y,b)=>On(b,d,y);return i.$$set=y=>{"list"in y&&o(e(0,u=y.list)),"filter_value_store"in y&&a(e(1,f=y.filter_value_store)),"select_item"in y&&e(2,d=y.select_item),"regex_search_keys"in y&&e(4,c=y.regex_search_keys)},i.$$.update=()=>{i.$$.dirty&112&&e(3,h=Y_(s,t,c))},[u,f,d,h,c,t,s,g,N]}class em extends Ke{constructor(r){super(),et(this,r,K2,Z2,qe,{list:0,filter_value_store:1,select_item:2,regex_search_keys:4})}}function Ko(i,r,e){const t=i.slice();return t[12]=r[e],t}function ef(i,r,e){const t=i.slice();return t[15]=r[e],t}function tf(i){let r,e=He(i[12].children),t=[];for(let n=0;n<e.length;n+=1)t[n]=rf(ef(i,e,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();r=De()},l(n){for(let a=0;a<t.length;a+=1)t[a].l(n);r=De()},m(n,a){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(n,a);C(n,r,a)},p(n,a){if(a&20){e=He(n[12].children);let s;for(s=0;s<e.length;s+=1){const l=ef(n,e,s);t[s]?t[s].p(l,a):(t[s]=rf(l),t[s].c(),t[s].m(r.parentNode,r))}for(;s<t.length;s+=1)t[s].d(1);t.length=e.length}},d(n){n&&m(r),Dt(t,n)}}}function rf(i){let r,e=i[15]["rdfs:label"]+"",t,n,a,s,l;function o(...f){return i[10](i[15],...f)}function u(...f){return i[11](i[15],...f)}return{c(){r=re("div"),t=P(e),n=ae(),this.h()},l(f){r=ne(f,"DIV",{class:!0,title:!0,tabindex:!0,role:!0});var d=ge(r);t=q(d,e),n=le(d),d.forEach(m),this.h()},h(){se(r,"class","select-technique"),se(r,"title",a=i[15]["d3f:definition"]),se(r,"tabindex","0"),se(r,"role","button")},m(f,d){C(f,r,d),x(r,t),x(r,n),s||(l=[pe(r,"click",vt(cn(o))),pe(r,"keydown",vt(u))],s=!0)},p(f,d){i=f,d&16&&e!==(e=i[15]["rdfs:label"]+"")&&fe(t,e),d&16&&a!==(a=i[15]["d3f:definition"])&&se(r,"title",a)},d(f){f&&m(r),s=!1,st(l)}}}function nf(i){let r,e,t=i[12]["rdfs:label"]+"",n,a,s,l,o,u,f,d=(i[3]===i[12]["@id"]||i[5])&&tf(i);return{c(){r=re("details"),e=re("summary"),n=P(t),s=ae(),d&&d.c(),l=ae(),this.h()},l(c){r=ne(c,"DETAILS",{});var h=ge(r);e=ne(h,"SUMMARY",{id:!0});var g=ge(e);n=q(g,t),g.forEach(m),s=le(h),d&&d.l(h),l=le(h),h.forEach(m),this.h()},h(){se(e,"id",a=i[12]["@id"]),r.open=o=i[3]===i[12]["@id"]||i[5]},m(c,h){C(c,r,h),x(r,e),x(e,n),x(r,s),d&&d.m(r,null),x(r,l),u||(f=pe(e,"click",vt(cn(i[6]))),u=!0)},p(c,h){h&16&&t!==(t=c[12]["rdfs:label"]+"")&&fe(n,t),h&16&&a!==(a=c[12]["@id"])&&se(e,"id",a),c[3]===c[12]["@id"]||c[5]?d?d.p(c,h):(d=tf(c),d.c(),d.m(r,l)):d&&(d.d(1),d=null),h&56&&o!==(o=c[3]===c[12]["@id"]||c[5])&&(r.open=o)},d(c){c&&m(r),d&&d.d(),u=!1,f()}}}function tm(i){let r,e=He(i[4]),t=[];for(let n=0;n<e.length;n+=1)t[n]=nf(Ko(i,e,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();r=De()},l(n){for(let a=0;a<t.length;a+=1)t[a].l(n);r=De()},m(n,a){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(n,a);C(n,r,a)},p(n,[a]){if(a&124){e=He(n[4]);let s;for(s=0;s<e.length;s+=1){const l=Ko(n,e,s);t[s]?t[s].p(l,a):(t[s]=nf(l),t[s].c(),t[s].m(r.parentNode,r))}for(;s<t.length;s+=1)t[s].d(1);t.length=e.length}},i:Ce,o:Ce,d(n){n&&m(r),Dt(t,n)}}}function rm(i,r,e){let t,n,a=Ce,s=()=>(a(),a=Dr(d,D=>e(8,n=D)),d),l,o=Ce,u=()=>(o(),o=Dr(f,D=>e(9,l=D)),f);i.$$.on_destroy.push(()=>a()),i.$$.on_destroy.push(()=>o());let{list:f}=r;u();let{filter_value_store:d}=r;s();let{select_item:c}=r,{regex_search_keys:h=["d3f:definition","rdfs:label","@id","d3f:d3fend-id"]}=r,g=null,N=[];function y(D){const{id:A}=D.target;g===A?e(3,g=null):e(3,g=A)}const b=(D,A)=>c(A,D),S=(D,A)=>On(A,c,D);return i.$$set=D=>{"list"in D&&u(e(0,f=D.list)),"filter_value_store"in D&&s(e(1,d=D.filter_value_store)),"select_item"in D&&e(2,c=D.select_item),"regex_search_keys"in D&&e(7,h=D.regex_search_keys)},i.$$.update=()=>{i.$$.dirty&896&&e(4,N=J_(l,n,h)),i.$$.dirty&256&&e(5,t=!!n)},[f,d,c,g,N,t,y,h,n,l,b,S]}class nm extends Ke{constructor(r){super(),et(this,r,rm,tm,qe,{list:0,filter_value_store:1,select_item:2,regex_search_keys:7})}}function sf(i,r,e){const t=i.slice();return t[16]=r[e],t}function im(i){let r,e,t,n;return{c(){r=re("div"),e=P(i[6]),this.h()},l(a){r=ne(a,"DIV",{id:!0,class:!0,role:!0,tabindex:!0});var s=ge(r);e=q(s,i[6]),s.forEach(m),this.h()},h(){var a;se(r,"id","selectable-technique"),se(r,"class","no-arrow svelte-1jhpo7c"),se(r,"role","tree"),se(r,"tabindex","0"),mr(r,"current-selected",((a=i[8])==null?void 0:a["@id"])===i[0]["@id"])},m(a,s){C(a,r,s),x(r,e),t||(n=[pe(r,"click",vt(cn(i[13]))),pe(r,"keydown",vt(cn(i[14])))],t=!0)},p(a,s){var l;s&64&&fe(e,a[6]),s&257&&mr(r,"current-selected",((l=a[8])==null?void 0:l["@id"])===a[0]["@id"])},i:Ce,o:Ce,d(a){a&&m(r),t=!1,st(n)}}}function sm(i){let r,e,t="▶",n,a,s,l,o,u,f,d,c=i[4]&&af(i);return{c(){r=re("span"),e=re("span"),e.textContent=t,n=ae(),a=re("span"),s=P(i[6]),l=ae(),c&&c.c(),o=De(),this.h()},l(h){r=ne(h,"SPAN",{class:!0,role:!0,tabindex:!0});var g=ge(r);e=ne(g,"SPAN",{class:!0,"data-svelte-h":!0}),Me(e)!=="svelte-1xn7s3"&&(e.textContent=t),n=le(g),a=ne(g,"SPAN",{id:!0,class:!0});var N=ge(a);s=q(N,i[6]),N.forEach(m),g.forEach(m),l=le(h),c&&c.l(h),o=De(),this.h()},h(){var h;se(e,"class","arrow svelte-1jhpo7c"),mr(e,"arrowDown",i[5]),se(a,"id","parent-selectable-technique"),se(a,"class","label svelte-1jhpo7c"),se(r,"class","parent-technique svelte-1jhpo7c"),se(r,"role","tree"),se(r,"tabindex","0"),mr(r,"current-selected",((h=i[8])==null?void 0:h["@id"])===i[0]["@id"])},m(h,g){C(h,r,g),x(r,e),x(r,n),x(r,a),x(a,s),C(h,l,g),c&&c.m(h,g),C(h,o,g),u=!0,f||(d=[pe(r,"click",vt(cn(i[11]))),pe(r,"keydown",vt(cn(i[12])))],f=!0)},p(h,g){var N;(!u||g&32)&&mr(e,"arrowDown",h[5]),(!u||g&64)&&fe(s,h[6]),(!u||g&257)&&mr(r,"current-selected",((N=h[8])==null?void 0:N["@id"])===h[0]["@id"]),h[4]?c?(c.p(h,g),g&16&&Y(c,1)):(c=af(h),c.c(),Y(c,1),c.m(o.parentNode,o)):c&&(xe(),Z(c,1,1,()=>{c=null}),Ve())},i(h){u||(Y(c),u=!0)},o(h){Z(c),u=!1},d(h){h&&(m(r),m(l),m(o)),c&&c.d(h),f=!1,st(d)}}}function af(i){let r,e,t=He(i[7]),n=[];for(let s=0;s<t.length;s+=1)n[s]=lf(sf(i,t,s));const a=s=>Z(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();r=De()},l(s){for(let l=0;l<n.length;l+=1)n[l].l(s);r=De()},m(s,l){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,l);C(s,r,l),e=!0},p(s,l){if(l&134){t=He(s[7]);let o;for(o=0;o<t.length;o+=1){const u=sf(s,t,o);n[o]?(n[o].p(u,l),Y(n[o],1)):(n[o]=lf(u),n[o].c(),Y(n[o],1),n[o].m(r.parentNode,r))}for(xe(),o=t.length;o<n.length;o+=1)a(o);Ve()}},i(s){if(!e){for(let l=0;l<t.length;l+=1)Y(n[l]);e=!0}},o(s){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)Z(n[l]);e=!1},d(s){s&&m(r),Dt(n,s)}}}function lf(i){let r,e;return r=new Ad({props:{tree:i[16],expanded_nodes:i[1],selected_node:i[2],first_node:!1}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n&128&&(a.tree=t[16]),n&2&&(a.expanded_nodes=t[1]),n&4&&(a.selected_node=t[2]),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function am(i){let r,e,t,n,a;const s=[sm,im],l=[];function o(u,f){return u[7]?0:1}return t=o(i),n=l[t]=s[t](i),{c(){r=re("ul"),e=re("li"),n.c(),this.h()},l(u){r=ne(u,"UL",{style:!0,class:!0});var f=ge(r);e=ne(f,"LI",{});var d=ge(e);n.l(d),d.forEach(m),f.forEach(m),this.h()},h(){Ge(r,"--first-node",i[3]?"0rem":"0.6rem"),se(r,"class","svelte-1jhpo7c")},m(u,f){C(u,r,f),x(r,e),l[t].m(e,null),a=!0},p(u,[f]){let d=t;t=o(u),t===d?l[t].p(u,f):(xe(),Z(l[d],1,1,()=>{l[d]=null}),Ve(),n=l[t],n?n.p(u,f):(n=l[t]=s[t](u),n.c()),Y(n,1),n.m(e,null)),(!a||f&8)&&Ge(r,"--first-node",u[3]?"0rem":"0.6rem")},i(u){a||(Y(n),a=!0)},o(u){Z(n),a=!1},d(u){u&&m(r),l[t].d()}}}function lm(i,r,e){let t,n,a,s,l=Ce,o=()=>(l(),l=Dr(g,w=>e(8,s=w)),g),u,f=Ce,d=()=>(f(),f=Dr(h,w=>e(15,u=w)),h);i.$$.on_destroy.push(()=>l()),i.$$.on_destroy.push(()=>f());let{tree:c}=r,{expanded_nodes:h}=r;d();let{selected_node:g}=r;o();let{first_node:N=!0}=r,y=u[t]||!1;function b(w,B){e(4,y=!y),Fr(g,s=B,s)}function S(w,B){Fr(g,s=B,s)}const D=w=>b(w,c),A=w=>On(w,b,c),v=w=>S(w,c),E=w=>On(w,S,c);return i.$$set=w=>{"tree"in w&&e(0,c=w.tree),"expanded_nodes"in w&&d(e(1,h=w.expanded_nodes)),"selected_node"in w&&o(e(2,g=w.selected_node)),"first_node"in w&&e(3,N=w.first_node)},i.$$.update=()=>{var w;i.$$.dirty&1&&e(6,t=((w=c==null?void 0:c["rdfs:label"])==null?void 0:w[0])??c["@id"]),i.$$.dirty&1&&e(7,n=c.children),i.$$.dirty&16&&e(5,a=y)},[c,h,g,N,y,a,t,n,s,b,S,D,A,v,E]}class Ad extends Ke{constructor(r){super(),et(this,r,lm,am,qe,{tree:0,expanded_nodes:1,selected_node:2,first_node:3})}}function uf(i,r,e){const t=i.slice();return t[10]=r[e],t}function of(i){let r,e;return r=new Ad({props:{tree:i[10],expanded_nodes:i[4],selected_node:i[5],select_item:i[2]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n&8&&(a.tree=t[10]),n&4&&(a.select_item=t[2]),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function um(i){let r,e,t=He(i[3]),n=[];for(let s=0;s<t.length;s+=1)n[s]=of(uf(i,t,s));const a=s=>Z(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();r=De()},l(s){for(let l=0;l<n.length;l+=1)n[l].l(s);r=De()},m(s,l){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,l);C(s,r,l),e=!0},p(s,[l]){if(l&60){t=He(s[3]);let o;for(o=0;o<t.length;o+=1){const u=uf(s,t,o);n[o]?(n[o].p(u,l),Y(n[o],1)):(n[o]=of(u),n[o].c(),Y(n[o],1),n[o].m(r.parentNode,r))}for(xe(),o=t.length;o<n.length;o+=1)a(o);Ve()}},i(s){if(!e){for(let l=0;l<t.length;l+=1)Y(n[l]);e=!0}},o(s){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)Z(n[l]);e=!1},d(s){s&&m(r),Dt(n,s)}}}function om(i,r,e){let t,n=Ce,a=()=>(n(),n=Dr(d,b=>e(7,t=b)),d),s,l=Ce,o=()=>(l(),l=Dr(f,b=>e(8,s=b)),f),u;i.$$.on_destroy.push(()=>n()),i.$$.on_destroy.push(()=>l());let{list:f}=r;o();let{filter_value_store:d}=r;a();let{select_item:c}=r,{regex_search_keys:h=["rdfs:label","@id"]}=r,g=[];const N=Gt({}),y=Gt(null);return Ye(i,y,b=>e(9,u=b)),aa(()=>{u&&c(null,u,"d3f_property")}),i.$$set=b=>{"list"in b&&o(e(0,f=b.list)),"filter_value_store"in b&&a(e(1,d=b.filter_value_store)),"select_item"in b&&e(2,c=b.select_item),"regex_search_keys"in b&&e(6,h=b.regex_search_keys)},i.$$.update=()=>{i.$$.dirty&448&&e(3,g=K_(s.associated,t,h))},[f,d,c,g,N,y,h,t,s]}class fm extends Ke{constructor(r){super(),et(this,r,om,um,qe,{list:0,filter_value_store:1,select_item:2,regex_search_keys:6})}}const cm=i=>({}),ff=i=>({R:i[6],filter_value_store:i[4],select_item:i[9]});function cf(i){let r,e,t,n,a,s,l;const o=i[18].default,u=bt(o,i,i[17],ff);return{c(){r=re("ul"),e=re("input"),t=ae(),u&&u.c(),this.h()},l(f){r=ne(f,"UL",{id:!0,class:!0});var d=ge(r);e=ne(d,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0,class:!0}),t=le(d),u&&u.l(d),d.forEach(m),this.h()},h(){se(e,"type","text"),se(e,"id","filter"),se(e,"name","filter"),se(e,"placeholder","Filter / Save"),se(e,"class","svelte-1j5u7g7"),se(r,"id","d3fend-container"),se(r,"class","dropdown-menu svelte-1j5u7g7")},m(f,d){C(f,r,d),x(r,e),x(r,t),u&&u.m(r,null),a=!0,s||(l=[vl($_.call(null,e)),pe(e,"click",vt(i[19])),pe(e,"keyup",vt(i[20])),pe(e,"keydown",vt(i[21])),vl(G_.call(null,r)),pe(r,"outsideclick",i[7])],s=!0)},p(f,d){u&&u.p&&(!a||d&131072)&&wt(u,o,f,f[17],a?kt(o,f[17],d,cm):yt(f[17]),ff)},i(f){a||(Y(u,f),f&&Xs(()=>{a&&(n||(n=kl(r,Fl,{delay:50,duration:200,axis:"y"},!0)),n.run(1))}),a=!0)},o(f){Z(u,f),f&&(n||(n=kl(r,Fl,{delay:50,duration:200,axis:"y"},!1)),n.run(0)),a=!1},d(f){f&&m(r),u&&u.d(f),f&&n&&n.end(),s=!1,st(l)}}}function dm(i){let r,e,t,n,a,s,l,o,u,f,d=i[2]&&cf(i);return{c(){r=re("div"),e=re("div"),t=re("div"),n=re("span"),a=P(i[1]),s=ae(),d&&d.c(),this.h()},l(c){r=ne(c,"DIV",{class:!0,style:!0});var h=ge(r);e=ne(h,"DIV",{class:!0,role:!0,tabindex:!0});var g=ge(e);t=ne(g,"DIV",{class:!0});var N=ge(t);n=ne(N,"SPAN",{class:!0});var y=ge(n);a=q(y,i[1]),y.forEach(m),N.forEach(m),s=le(g),d&&d.l(g),g.forEach(m),h.forEach(m),this.h()},h(){se(n,"class","selected svelte-1j5u7g7"),se(t,"class","select autocomplete-dropdown svelte-1j5u7g7"),se(e,"class",l="dropdown "+(i[2]?"active":"")+" svelte-1j5u7g7"),se(e,"role","button"),se(e,"tabindex","0"),se(r,"class","container svelte-1j5u7g7"),Ge(r,"--input-color",i[0])},m(c,h){C(c,r,h),x(r,e),x(e,t),x(t,n),x(n,a),x(e,s),d&&d.m(e,null),o=!0,u||(f=[pe(e,"click",i[8]),pe(e,"keydown",i[22])],u=!0)},p(c,[h]){(!o||h&2)&&fe(a,c[1]),c[2]?d?(d.p(c,h),h&4&&Y(d,1)):(d=cf(c),d.c(),Y(d,1),d.m(e,null)):d&&(xe(),Z(d,1,1,()=>{d=null}),Ve()),(!o||h&4&&l!==(l="dropdown "+(c[2]?"active":"")+" svelte-1j5u7g7"))&&se(e,"class",l),(!o||h&1)&&Ge(r,"--input-color",c[0])},i(c){o||(Y(d),o=!0)},o(c){Z(d),o=!1},d(c){c&&m(r),d&&d.d(),u=!1,st(f)}}}function hm(i,r,e){let t,n,a,s,{$$slots:l={},$$scope:o}=r,{node_id:u}=r,{element_id:f}=r,{input_color:d="white"}=r,{place_holder:c="< d3fend class >"}=r,{flow_store_hook:h=Er}=r,{data_save_key:g="d3f_class"}=r;const N=Gt(!1);Ye(i,N,O=>e(2,s=O));const y=Gt(null);Ye(i,y,O=>e(24,n=O));const b=h();Ye(i,b,O=>e(25,a=O));const S={ItemTree:nm,ItemList:em,ItemProperty:fm};let D;aa(()=>{Fr(y,n="",n)});function A(){Fr(N,s=!1,s),Fr(y,n="",n)}function v(O){s?A():Fr(N,s=!0,s)}function E(O,R,G="d3f_class"){let Q=R["rdfs:label"];Array.isArray(R["rdfs:label"])&&(Q=R["rdfs:label"][0]),a.forEach(oe=>{oe.id===u&&(oe.data={...oe.data,[G]:R["@id"],label:Q})}),b.set(a),A()}function w(O){clearTimeout(D),D=setTimeout(()=>{Fr(y,n=O.target.value,n)},400)}function B(O){const R=O.target.value;E(O,{"rdfs:label":R,"@id":R},g)}function I(O){ur.call(this,i,O)}const L=O=>w(O),k=O=>On(O,B),j=O=>On(O,v);return i.$$set=O=>{"node_id"in O&&e(12,u=O.node_id),"element_id"in O&&e(13,f=O.element_id),"input_color"in O&&e(0,d=O.input_color),"place_holder"in O&&e(14,c=O.place_holder),"flow_store_hook"in O&&e(15,h=O.flow_store_hook),"data_save_key"in O&&e(16,g=O.data_save_key),"$$scope"in O&&e(17,o=O.$$scope)},i.$$.update=()=>{i.$$.dirty&24576&&e(1,t=f||c)},[d,t,s,N,y,b,S,A,v,E,w,B,u,f,c,h,g,o,l,I,L,k,j]}class Hn extends Ke{constructor(r){super(),et(this,r,hm,dm,qe,{node_id:12,element_id:13,input_color:0,place_holder:14,flow_store_hook:15,data_save_key:16})}}function df(i){let r,e;return r=new Je({props:{type:"target",class:"customHandle",position:$e.Left,id:"target",style:i[10](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n&2&&(a.isConnectable=t[1]),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function hf(i){let r=i[6],e,t,n=_f(i);return{c(){n.c(),e=De()},l(a){n.l(a),e=De()},m(a,s){n.m(a,s),C(a,e,s),t=!0},p(a,s){s&64&&qe(r,r=a[6])?(xe(),Z(n,1,1,Ce),Ve(),n=_f(a),n.c(),Y(n,1),n.m(e.parentNode,e)):n.p(a,s)},i(a){t||(Y(n),t=!0)},o(a){Z(n),t=!1},d(a){a&&m(e),n.d(a)}}}function _f(i){let r,e,t,n,a,s,l,o;return r=new Je({props:{type:"source",position:$e.Top,id:"source",style:i[11](),isConnectable:i[1]}}),t=new Je({props:{type:"source",position:$e.Left,id:"source",style:i[11](),isConnectable:i[1]}}),a=new Je({props:{type:"source",position:$e.Right,id:"source",style:i[11](),isConnectable:i[1]}}),l=new Je({props:{type:"source",position:$e.Bottom,id:"source",style:i[11](),isConnectable:i[1]}}),{c(){ve(r.$$.fragment),e=ae(),ve(t.$$.fragment),n=ae(),ve(a.$$.fragment),s=ae(),ve(l.$$.fragment)},l(u){be(r.$$.fragment,u),e=le(u),be(t.$$.fragment,u),n=le(u),be(a.$$.fragment,u),s=le(u),be(l.$$.fragment,u)},m(u,f){we(r,u,f),C(u,e,f),we(t,u,f),C(u,n,f),we(a,u,f),C(u,s,f),we(l,u,f),o=!0},p(u,f){const d={};f&2&&(d.isConnectable=u[1]),r.$set(d);const c={};f&2&&(c.isConnectable=u[1]),t.$set(c);const h={};f&2&&(h.isConnectable=u[1]),a.$set(h);const g={};f&2&&(g.isConnectable=u[1]),l.$set(g)},i(u){o||(Y(r.$$.fragment,u),Y(t.$$.fragment,u),Y(a.$$.fragment,u),Y(l.$$.fragment,u),o=!0)},o(u){Z(r.$$.fragment,u),Z(t.$$.fragment,u),Z(a.$$.fragment,u),Z(l.$$.fragment,u),o=!1},d(u){u&&(m(e),m(n),m(s)),ye(r,u),ye(t,u),ye(a,u),ye(l,u)}}}function _m(i){let r,e;return r=new i[15].ItemList({props:{list:Zf,filter_value_store:i[16],select_item:i[17]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n&65536&&(a.filter_value_store=t[16]),n&131072&&(a.select_item=t[17]),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function pm(i){let r=i[4].inProgress,e,t,n,a,s,l,o,u,f,d,c,h,g,N,y,b,S,D,A,v,E,w=df(i),B=!i[5]&&hf(i);return s=new $r({props:{isVisible:i[2]}}),N=new Hn({props:{node_id:i[3],element_id:i[0].d3f_class,input_color:"#ffc3c7",$$slots:{default:[_m,({R:I,filter_value_store:L,select_item:k})=>({15:I,16:L,17:k}),({R:I,filter_value_store:L,select_item:k})=>(I?32768:0)|(L?65536:0)|(k?131072:0)]},$$scope:{ctx:i}}}),{c(){w.c(),e=ae(),t=re("div"),B&&B.c(),n=ae(),a=re("div"),ve(s.$$.fragment),l=ae(),o=re("i"),u=P(`Attack Action
        `),f=re("input"),c=ae(),h=re("br"),g=ae(),ve(N.$$.fragment),y=ae(),b=re("div"),S=re("input"),this.h()},l(I){w.l(I),e=le(I),t=ne(I,"DIV",{class:!0});var L=ge(t);B&&B.l(L),n=le(L),a=ne(L,"DIV",{class:!0});var k=ge(a);be(s.$$.fragment,k),l=le(k),o=ne(k,"I",{});var j=ge(o);u=q(j,`Attack Action
        `),f=ne(j,"INPUT",{class:!0,type:!0,style:!0}),j.forEach(m),c=le(k),h=ne(k,"BR",{}),g=le(k),be(N.$$.fragment,k),y=le(k),b=ne(k,"DIV",{});var O=ge(b);S=ne(O,"INPUT",{class:!0,type:!0,style:!0}),O.forEach(m),k.forEach(m),L.forEach(m),this.h()},h(){se(f,"class","nodrag sequence"),se(f,"type","text"),Ge(f,"background","#ffc3c7"),f.value=d=i[0].sequence||"#",se(S,"class","nodrag"),se(S,"type","text"),Ge(S,"text-align","center"),Ge(S,"background","#ffc3c7"),Ge(S,"font-weight","bold"),S.value=D=i[0].label??"< label >",se(a,"class","attack-node node-inner svelte-pkj1to"),se(t,"class","attack-node node svelte-pkj1to")},m(I,L){w.m(I,L),C(I,e,L),C(I,t,L),B&&B.m(t,null),x(t,n),x(t,a),we(s,a,null),x(a,l),x(a,o),x(o,u),x(o,f),x(a,c),x(a,h),x(a,g),we(N,a,null),x(a,y),x(a,b),x(b,S),A=!0,v||(E=[pe(f,"input",i[13]),pe(S,"input",i[14]),pe(t,"mouseenter",i[8]),pe(t,"mouseleave",i[9])],v=!0)},p(I,[L]){L&16&&qe(r,r=I[4].inProgress)?(xe(),Z(w,1,1,Ce),Ve(),w=df(I),w.c(),Y(w,1),w.m(e.parentNode,e)):w.p(I,L),I[5]?B&&(xe(),Z(B,1,1,()=>{B=null}),Ve()):B?(B.p(I,L),L&32&&Y(B,1)):(B=hf(I),B.c(),Y(B,1),B.m(t,n));const k={};L&4&&(k.isVisible=I[2]),s.$set(k),(!A||L&1&&d!==(d=I[0].sequence||"#")&&f.value!==d)&&(f.value=d);const j={};L&8&&(j.node_id=I[3]),L&1&&(j.element_id=I[0].d3f_class),L&458752&&(j.$$scope={dirty:L,ctx:I}),N.$set(j),(!A||L&1&&D!==(D=I[0].label??"< label >")&&S.value!==D)&&(S.value=D)},i(I){A||(Y(w),Y(B),Y(s.$$.fragment,I),Y(N.$$.fragment,I),A=!0)},o(I){Z(w),Z(B),Z(s.$$.fragment,I),Z(N.$$.fragment,I),A=!1},d(I){I&&(m(e),m(t)),w.d(I),B&&B.d(),ye(s),ye(N),v=!1,st(E)}}}function gm(i,r,e){let t;var n;let{data:a}=r,{isConnectable:s}=r,{selected:l=void 0}=r,{id:o}=r;const u=qr();Ye(i,u,S=>e(4,t=S));let f=!1,d=!1;function c(){e(6,d=!0)}function h(){e(6,d=!1)}function g(){return t.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function N(){return d?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const y=S=>{e(0,a.sequence=S.currentTarget.value,a)},b=S=>{e(0,a.label=S.currentTarget.value,a)};return i.$$set=S=>{"data"in S&&e(0,a=S.data),"isConnectable"in S&&e(1,s=S.isConnectable),"selected"in S&&e(2,l=S.selected),"id"in S&&e(3,o=S.id)},i.$$.update=()=>{i.$$.dirty&4120&&e(5,f=(e(12,n=t.toHandle)===null||n===void 0?void 0:n.nodeId)==o)},[a,s,l,o,t,f,d,u,c,h,g,N,n,y,b]}class mm extends Ke{constructor(r){super(),et(this,r,gm,pm,qe,{data:0,isConnectable:1,selected:2,id:3})}}function pf(i){let r,e;return r=new Je({props:{type:"target",class:"customHandle",position:$e.Left,id:"target",style:i[10](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n&2&&(a.isConnectable=t[1]),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function gf(i){let r=i[6],e,t,n=mf(i);return{c(){n.c(),e=De()},l(a){n.l(a),e=De()},m(a,s){n.m(a,s),C(a,e,s),t=!0},p(a,s){s&64&&qe(r,r=a[6])?(xe(),Z(n,1,1,Ce),Ve(),n=mf(a),n.c(),Y(n,1),n.m(e.parentNode,e)):n.p(a,s)},i(a){t||(Y(n),t=!0)},o(a){Z(n),t=!1},d(a){a&&m(e),n.d(a)}}}function mf(i){let r,e,t,n,a,s,l,o;return r=new Je({props:{type:"source",position:$e.Top,id:"source",style:i[11](),isConnectable:i[1]}}),t=new Je({props:{type:"source",position:$e.Left,id:"source",style:i[11](),isConnectable:i[1]}}),a=new Je({props:{type:"source",position:$e.Right,id:"source",style:i[11](),isConnectable:i[1]}}),l=new Je({props:{type:"source",position:$e.Bottom,id:"source",style:i[11](),isConnectable:i[1]}}),{c(){ve(r.$$.fragment),e=ae(),ve(t.$$.fragment),n=ae(),ve(a.$$.fragment),s=ae(),ve(l.$$.fragment)},l(u){be(r.$$.fragment,u),e=le(u),be(t.$$.fragment,u),n=le(u),be(a.$$.fragment,u),s=le(u),be(l.$$.fragment,u)},m(u,f){we(r,u,f),C(u,e,f),we(t,u,f),C(u,n,f),we(a,u,f),C(u,s,f),we(l,u,f),o=!0},p(u,f){const d={};f&2&&(d.isConnectable=u[1]),r.$set(d);const c={};f&2&&(c.isConnectable=u[1]),t.$set(c);const h={};f&2&&(h.isConnectable=u[1]),a.$set(h);const g={};f&2&&(g.isConnectable=u[1]),l.$set(g)},i(u){o||(Y(r.$$.fragment,u),Y(t.$$.fragment,u),Y(a.$$.fragment,u),Y(l.$$.fragment,u),o=!0)},o(u){Z(r.$$.fragment,u),Z(t.$$.fragment,u),Z(a.$$.fragment,u),Z(l.$$.fragment,u),o=!1},d(u){u&&(m(e),m(n),m(s)),ye(r,u),ye(t,u),ye(a,u),ye(l,u)}}}function vm(i){let r,e;return r=new i[14].ItemList({props:{list:ec,filter_value_store:i[15],select_item:i[16]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n&32768&&(a.filter_value_store=t[15]),n&65536&&(a.select_item=t[16]),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function bm(i){let r=i[4].inProgress,e,t,n,a,s,l,o,u="Vulnerability",f,d,c,h,g,N,y,b,S,D,A,v,E=pf(i),w=!i[5]&&gf(i);return s=new $r({props:{isVisible:i[2]}}),g=new Hn({props:{node_id:i[3],element_id:i[0].d3f_class,input_color:"#f9d999",place_holder:"< weakness >",$$slots:{default:[vm,({R:B,filter_value_store:I,select_item:L})=>({14:B,15:I,16:L}),({R:B,filter_value_store:I,select_item:L})=>(B?16384:0)|(I?32768:0)|(L?65536:0)]},$$scope:{ctx:i}}}),{c(){E.c(),e=ae(),t=re("div"),w&&w.c(),n=ae(),a=re("div"),ve(s.$$.fragment),l=ae(),o=re("i"),o.textContent=u,f=ae(),d=re("br"),c=ae(),h=re("div"),ve(g.$$.fragment),N=ae(),y=re("div"),b=re("input"),this.h()},l(B){E.l(B),e=le(B),t=ne(B,"DIV",{class:!0});var I=ge(t);w&&w.l(I),n=le(I),a=ne(I,"DIV",{class:!0});var L=ge(a);be(s.$$.fragment,L),l=le(L),o=ne(L,"I",{"data-svelte-h":!0}),Me(o)!=="svelte-qgxj0w"&&(o.textContent=u),f=le(L),d=ne(L,"BR",{}),c=le(L),h=ne(L,"DIV",{});var k=ge(h);be(g.$$.fragment,k),k.forEach(m),N=le(L),y=ne(L,"DIV",{});var j=ge(y);b=ne(j,"INPUT",{class:!0,type:!0,style:!0}),j.forEach(m),L.forEach(m),I.forEach(m),this.h()},h(){se(b,"class","nodrag label"),se(b,"type","text"),Ge(b,"background","#f9d999"),b.value=S=i[0].label??"< label >",se(a,"class","vulnerability node-inner svelte-17a4qd7"),se(t,"class","vulnerability node svelte-17a4qd7")},m(B,I){E.m(B,I),C(B,e,I),C(B,t,I),w&&w.m(t,null),x(t,n),x(t,a),we(s,a,null),x(a,l),x(a,o),x(a,f),x(a,d),x(a,c),x(a,h),we(g,h,null),x(a,N),x(a,y),x(y,b),D=!0,A||(v=[pe(b,"input",i[13]),pe(t,"mouseenter",i[8]),pe(t,"mouseleave",i[9])],A=!0)},p(B,[I]){I&16&&qe(r,r=B[4].inProgress)?(xe(),Z(E,1,1,Ce),Ve(),E=pf(B),E.c(),Y(E,1),E.m(e.parentNode,e)):E.p(B,I),B[5]?w&&(xe(),Z(w,1,1,()=>{w=null}),Ve()):w?(w.p(B,I),I&32&&Y(w,1)):(w=gf(B),w.c(),Y(w,1),w.m(t,n));const L={};I&4&&(L.isVisible=B[2]),s.$set(L);const k={};I&8&&(k.node_id=B[3]),I&1&&(k.element_id=B[0].d3f_class),I&229376&&(k.$$scope={dirty:I,ctx:B}),g.$set(k),(!D||I&1&&S!==(S=B[0].label??"< label >")&&b.value!==S)&&(b.value=S)},i(B){D||(Y(E),Y(w),Y(s.$$.fragment,B),Y(g.$$.fragment,B),D=!0)},o(B){Z(E),Z(w),Z(s.$$.fragment,B),Z(g.$$.fragment,B),D=!1},d(B){B&&(m(e),m(t)),E.d(B),w&&w.d(),ye(s),ye(g),A=!1,st(v)}}}function wm(i,r,e){let t;var n;let{data:a}=r,{isConnectable:s}=r,{selected:l=void 0}=r,{id:o}=r;const u=qr();Ye(i,u,b=>e(4,t=b));let f=!1,d=!1;function c(){e(6,d=!0)}function h(){e(6,d=!1)}function g(){return t.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function N(){return d?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const y=b=>{e(0,a.label=b.currentTarget.value,a)};return i.$$set=b=>{"data"in b&&e(0,a=b.data),"isConnectable"in b&&e(1,s=b.isConnectable),"selected"in b&&e(2,l=b.selected),"id"in b&&e(3,o=b.id)},i.$$.update=()=>{i.$$.dirty&4120&&e(5,f=(e(12,n=t.toHandle)===null||n===void 0?void 0:n.nodeId)==o)},[a,s,l,o,t,f,d,u,c,h,g,N,n,y]}class ym extends Ke{constructor(r){super(),et(this,r,wm,bm,qe,{data:0,isConnectable:1,selected:2,id:3})}}function vf(i){let r,e;return r=new Je({props:{type:"target",class:"customHandle",position:$e.Left,id:"target",style:i[10](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n&2&&(a.isConnectable=t[1]),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function bf(i){let r=i[6],e,t,n=wf(i);return{c(){n.c(),e=De()},l(a){n.l(a),e=De()},m(a,s){n.m(a,s),C(a,e,s),t=!0},p(a,s){s&64&&qe(r,r=a[6])?(xe(),Z(n,1,1,Ce),Ve(),n=wf(a),n.c(),Y(n,1),n.m(e.parentNode,e)):n.p(a,s)},i(a){t||(Y(n),t=!0)},o(a){Z(n),t=!1},d(a){a&&m(e),n.d(a)}}}function wf(i){let r,e,t,n,a,s,l,o;return r=new Je({props:{type:"source",position:$e.Top,id:"source",style:i[11](),isConnectable:i[1]}}),t=new Je({props:{type:"source",position:$e.Left,id:"source",style:i[11](),isConnectable:i[1]}}),a=new Je({props:{type:"source",position:$e.Right,id:"source",style:i[11](),isConnectable:i[1]}}),l=new Je({props:{type:"source",position:$e.Bottom,id:"source",style:i[11](),isConnectable:i[1]}}),{c(){ve(r.$$.fragment),e=ae(),ve(t.$$.fragment),n=ae(),ve(a.$$.fragment),s=ae(),ve(l.$$.fragment)},l(u){be(r.$$.fragment,u),e=le(u),be(t.$$.fragment,u),n=le(u),be(a.$$.fragment,u),s=le(u),be(l.$$.fragment,u)},m(u,f){we(r,u,f),C(u,e,f),we(t,u,f),C(u,n,f),we(a,u,f),C(u,s,f),we(l,u,f),o=!0},p(u,f){const d={};f&2&&(d.isConnectable=u[1]),r.$set(d);const c={};f&2&&(c.isConnectable=u[1]),t.$set(c);const h={};f&2&&(h.isConnectable=u[1]),a.$set(h);const g={};f&2&&(g.isConnectable=u[1]),l.$set(g)},i(u){o||(Y(r.$$.fragment,u),Y(t.$$.fragment,u),Y(a.$$.fragment,u),Y(l.$$.fragment,u),o=!0)},o(u){Z(r.$$.fragment,u),Z(t.$$.fragment,u),Z(a.$$.fragment,u),Z(l.$$.fragment,u),o=!1},d(u){u&&(m(e),m(n),m(s)),ye(r,u),ye(t,u),ye(a,u),ye(l,u)}}}function km(i){let r,e;return r=new i[14].ItemList({props:{list:Jf,filter_value_store:i[15],select_item:i[16]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n&32768&&(a.filter_value_store=t[15]),n&65536&&(a.select_item=t[16]),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Dm(i){let r=i[4].inProgress,e,t,n,a,s,l="Artifact",o,u,f,d,c,h,g,N,y,b,S,D=vf(i),A=!i[5]&&bf(i);return f=new $r({props:{isVisible:i[2]}}),c=new Hn({props:{node_id:i[3],element_id:i[0].d3f_class,input_color:"#fff4dd",$$slots:{default:[km,({R:v,filter_value_store:E,select_item:w})=>({14:v,15:E,16:w}),({R:v,filter_value_store:E,select_item:w})=>(v?16384:0)|(E?32768:0)|(w?65536:0)]},$$scope:{ctx:i}}}),{c(){D.c(),e=ae(),t=re("div"),A&&A.c(),n=ae(),a=re("div"),s=re("i"),s.textContent=l,o=re("br"),u=ae(),ve(f.$$.fragment),d=ae(),ve(c.$$.fragment),h=ae(),g=re("input"),this.h()},l(v){D.l(v),e=le(v),t=ne(v,"DIV",{class:!0});var E=ge(t);A&&A.l(E),n=le(E),a=ne(E,"DIV",{class:!0});var w=ge(a);s=ne(w,"I",{"data-svelte-h":!0}),Me(s)!=="svelte-148na2y"&&(s.textContent=l),o=ne(w,"BR",{}),u=le(w),be(f.$$.fragment,w),d=le(w),be(c.$$.fragment,w),h=le(w),g=ne(w,"INPUT",{class:!0,type:!0,style:!0}),w.forEach(m),E.forEach(m),this.h()},h(){se(g,"class","nodrag label"),se(g,"type","text"),Ge(g,"background","#fff4dd"),g.value=N=i[0].label??"< label >",se(a,"class","node-inner"),se(t,"class","artifact node svelte-1q2d78v")},m(v,E){D.m(v,E),C(v,e,E),C(v,t,E),A&&A.m(t,null),x(t,n),x(t,a),x(a,s),x(a,o),x(a,u),we(f,a,null),x(a,d),we(c,a,null),x(a,h),x(a,g),y=!0,b||(S=[pe(g,"input",i[13]),pe(t,"mouseenter",i[8]),pe(t,"mouseleave",i[9])],b=!0)},p(v,[E]){E&16&&qe(r,r=v[4].inProgress)?(xe(),Z(D,1,1,Ce),Ve(),D=vf(v),D.c(),Y(D,1),D.m(e.parentNode,e)):D.p(v,E),v[5]?A&&(xe(),Z(A,1,1,()=>{A=null}),Ve()):A?(A.p(v,E),E&32&&Y(A,1)):(A=bf(v),A.c(),Y(A,1),A.m(t,n));const w={};E&4&&(w.isVisible=v[2]),f.$set(w);const B={};E&8&&(B.node_id=v[3]),E&1&&(B.element_id=v[0].d3f_class),E&229376&&(B.$$scope={dirty:E,ctx:v}),c.$set(B),(!y||E&1&&N!==(N=v[0].label??"< label >")&&g.value!==N)&&(g.value=N)},i(v){y||(Y(D),Y(A),Y(f.$$.fragment,v),Y(c.$$.fragment,v),y=!0)},o(v){Z(D),Z(A),Z(f.$$.fragment,v),Z(c.$$.fragment,v),y=!1},d(v){v&&(m(e),m(t)),D.d(v),A&&A.d(),ye(f),ye(c),b=!1,st(S)}}}function Em(i,r,e){let t;var n;let{data:a}=r,{isConnectable:s}=r,{selected:l=void 0}=r,{id:o}=r;const u=qr();Ye(i,u,b=>e(4,t=b));let f=!1,d=!1;function c(){e(6,d=!0)}function h(){e(6,d=!1)}function g(){return t.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function N(){return d?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const y=b=>{e(0,a.label=b.currentTarget.value,a)};return i.$$set=b=>{"data"in b&&e(0,a=b.data),"isConnectable"in b&&e(1,s=b.isConnectable),"selected"in b&&e(2,l=b.selected),"id"in b&&e(3,o=b.id)},i.$$.update=()=>{i.$$.dirty&4120&&e(5,f=(e(12,n=t.toHandle)===null||n===void 0?void 0:n.nodeId)==o)},[a,s,l,o,t,f,d,u,c,h,g,N,n,y]}class Am extends Ke{constructor(r){super(),et(this,r,Em,Dm,qe,{data:0,isConnectable:1,selected:2,id:3})}}function yf(i){let r,e;return r=new Je({props:{type:"target",class:"customHandle",position:$e.Left,id:"target",style:i[10](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n&2&&(a.isConnectable=t[1]),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function kf(i){let r=i[6],e,t,n=Df(i);return{c(){n.c(),e=De()},l(a){n.l(a),e=De()},m(a,s){n.m(a,s),C(a,e,s),t=!0},p(a,s){s&64&&qe(r,r=a[6])?(xe(),Z(n,1,1,Ce),Ve(),n=Df(a),n.c(),Y(n,1),n.m(e.parentNode,e)):n.p(a,s)},i(a){t||(Y(n),t=!0)},o(a){Z(n),t=!1},d(a){a&&m(e),n.d(a)}}}function Df(i){let r,e,t,n,a,s,l,o;return r=new Je({props:{type:"source",position:$e.Top,id:"source",style:i[11](),isConnectable:i[1]}}),t=new Je({props:{type:"source",position:$e.Left,id:"source",style:i[11](),isConnectable:i[1]}}),a=new Je({props:{type:"source",position:$e.Right,id:"source",style:i[11](),isConnectable:i[1]}}),l=new Je({props:{type:"source",position:$e.Bottom,id:"source",style:i[11](),isConnectable:i[1]}}),{c(){ve(r.$$.fragment),e=ae(),ve(t.$$.fragment),n=ae(),ve(a.$$.fragment),s=ae(),ve(l.$$.fragment)},l(u){be(r.$$.fragment,u),e=le(u),be(t.$$.fragment,u),n=le(u),be(a.$$.fragment,u),s=le(u),be(l.$$.fragment,u)},m(u,f){we(r,u,f),C(u,e,f),we(t,u,f),C(u,n,f),we(a,u,f),C(u,s,f),we(l,u,f),o=!0},p(u,f){const d={};f&2&&(d.isConnectable=u[1]),r.$set(d);const c={};f&2&&(c.isConnectable=u[1]),t.$set(c);const h={};f&2&&(h.isConnectable=u[1]),a.$set(h);const g={};f&2&&(g.isConnectable=u[1]),l.$set(g)},i(u){o||(Y(r.$$.fragment,u),Y(t.$$.fragment,u),Y(a.$$.fragment,u),Y(l.$$.fragment,u),o=!0)},o(u){Z(r.$$.fragment,u),Z(t.$$.fragment,u),Z(a.$$.fragment,u),Z(l.$$.fragment,u),o=!1},d(u){u&&(m(e),m(n),m(s)),ye(r,u),ye(t,u),ye(a,u),ye(l,u)}}}function Cm(i){let r,e;return r=new i[15].ItemTree({props:{list:Yf,filter_value_store:i[16],select_item:i[17]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n&65536&&(a.filter_value_store=t[16]),n&131072&&(a.select_item=t[17]),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Nm(i){let r=i[4].inProgress,e,t,n,a,s,l,o,u="Defense Action",f,d,c,h,g,N,y,b,S,D,A,v,E,w,B,I=yf(i),L=!i[5]&&kf(i);return s=new $r({props:{isVisible:i[2]}}),b=new Hn({props:{node_id:i[3],element_id:i[0].d3f_class,input_color:"#d6eaff",$$slots:{default:[Cm,({R:k,filter_value_store:j,select_item:O})=>({15:k,16:j,17:O}),({R:k,filter_value_store:j,select_item:O})=>(k?32768:0)|(j?65536:0)|(O?131072:0)]},$$scope:{ctx:i}}}),{c(){I.c(),e=ae(),t=re("div"),L&&L.c(),n=ae(),a=re("div"),ve(s.$$.fragment),l=ae(),o=re("i"),o.textContent=u,f=ae(),d=re("input"),h=ae(),g=re("br"),N=ae(),y=re("div"),ve(b.$$.fragment),S=ae(),D=re("div"),A=re("input"),this.h()},l(k){I.l(k),e=le(k),t=ne(k,"DIV",{class:!0});var j=ge(t);L&&L.l(j),n=le(j),a=ne(j,"DIV",{class:!0});var O=ge(a);be(s.$$.fragment,O),l=le(O),o=ne(O,"I",{"data-svelte-h":!0}),Me(o)!=="svelte-1x9m2lq"&&(o.textContent=u),f=le(O),d=ne(O,"INPUT",{class:!0,type:!0,style:!0}),h=le(O),g=ne(O,"BR",{}),N=le(O),y=ne(O,"DIV",{});var R=ge(y);be(b.$$.fragment,R),R.forEach(m),S=le(O),D=ne(O,"DIV",{});var G=ge(D);A=ne(G,"INPUT",{class:!0,type:!0,style:!0}),G.forEach(m),O.forEach(m),j.forEach(m),this.h()},h(){se(d,"class","nodrag sequence"),se(d,"type","text"),Ge(d,"background","#d6eaff"),d.value=c=i[0].sequence||"#",se(A,"class","nodrag label"),se(A,"type","text"),Ge(A,"background","#d6eaff"),A.value=v=i[0].label??"< label >",se(a,"class","node-inner"),se(t,"class","countermeasure node svelte-cdgs6j")},m(k,j){I.m(k,j),C(k,e,j),C(k,t,j),L&&L.m(t,null),x(t,n),x(t,a),we(s,a,null),x(a,l),x(a,o),x(a,f),x(a,d),x(a,h),x(a,g),x(a,N),x(a,y),we(b,y,null),x(a,S),x(a,D),x(D,A),E=!0,w||(B=[pe(d,"input",i[13]),pe(A,"input",i[14]),pe(t,"mouseenter",i[8]),pe(t,"mouseleave",i[9])],w=!0)},p(k,[j]){j&16&&qe(r,r=k[4].inProgress)?(xe(),Z(I,1,1,Ce),Ve(),I=yf(k),I.c(),Y(I,1),I.m(e.parentNode,e)):I.p(k,j),k[5]?L&&(xe(),Z(L,1,1,()=>{L=null}),Ve()):L?(L.p(k,j),j&32&&Y(L,1)):(L=kf(k),L.c(),Y(L,1),L.m(t,n));const O={};j&4&&(O.isVisible=k[2]),s.$set(O),(!E||j&1&&c!==(c=k[0].sequence||"#")&&d.value!==c)&&(d.value=c);const R={};j&8&&(R.node_id=k[3]),j&1&&(R.element_id=k[0].d3f_class),j&458752&&(R.$$scope={dirty:j,ctx:k}),b.$set(R),(!E||j&1&&v!==(v=k[0].label??"< label >")&&A.value!==v)&&(A.value=v)},i(k){E||(Y(I),Y(L),Y(s.$$.fragment,k),Y(b.$$.fragment,k),E=!0)},o(k){Z(I),Z(L),Z(s.$$.fragment,k),Z(b.$$.fragment,k),E=!1},d(k){k&&(m(e),m(t)),I.d(k),L&&L.d(),ye(s),ye(b),w=!1,st(B)}}}function Tm(i,r,e){let t;var n;let{data:a}=r,{isConnectable:s}=r,{selected:l=void 0}=r,{id:o}=r;const u=qr();Ye(i,u,S=>e(4,t=S));let f=!1,d=!1;function c(){e(6,d=!0)}function h(){e(6,d=!1)}function g(){return t.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function N(){return d?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const y=S=>{e(0,a.sequence=S.currentTarget.value,a)},b=S=>{e(0,a.label=S.currentTarget.value,a)};return i.$$set=S=>{"data"in S&&e(0,a=S.data),"isConnectable"in S&&e(1,s=S.isConnectable),"selected"in S&&e(2,l=S.selected),"id"in S&&e(3,o=S.id)},i.$$.update=()=>{i.$$.dirty&4120&&e(5,f=(e(12,n=t.toHandle)===null||n===void 0?void 0:n.nodeId)==o)},[a,s,l,o,t,f,d,u,c,h,g,N,n,y,b]}class Sm extends Ke{constructor(r){super(),et(this,r,Tm,Nm,qe,{data:0,isConnectable:1,selected:2,id:3})}}function Ef(i){let r,e;return r=new Je({props:{type:"target",class:"customHandle",position:$e.Left,id:"target",style:i[9](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n&2&&(a.isConnectable=t[1]),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Af(i){let r=i[5],e,t,n=Cf(i);return{c(){n.c(),e=De()},l(a){n.l(a),e=De()},m(a,s){n.m(a,s),C(a,e,s),t=!0},p(a,s){s&32&&qe(r,r=a[5])?(xe(),Z(n,1,1,Ce),Ve(),n=Cf(a),n.c(),Y(n,1),n.m(e.parentNode,e)):n.p(a,s)},i(a){t||(Y(n),t=!0)},o(a){Z(n),t=!1},d(a){a&&m(e),n.d(a)}}}function Cf(i){let r,e,t,n,a,s,l,o;return r=new Je({props:{type:"source",position:$e.Top,id:"source",style:i[10](),isConnectable:i[1]}}),t=new Je({props:{type:"source",position:$e.Left,id:"source",style:i[10](),isConnectable:i[1]}}),a=new Je({props:{type:"source",position:$e.Right,id:"source",style:i[10](),isConnectable:i[1]}}),l=new Je({props:{type:"source",position:$e.Bottom,id:"source",style:i[10](),isConnectable:i[1]}}),{c(){ve(r.$$.fragment),e=ae(),ve(t.$$.fragment),n=ae(),ve(a.$$.fragment),s=ae(),ve(l.$$.fragment)},l(u){be(r.$$.fragment,u),e=le(u),be(t.$$.fragment,u),n=le(u),be(a.$$.fragment,u),s=le(u),be(l.$$.fragment,u)},m(u,f){we(r,u,f),C(u,e,f),we(t,u,f),C(u,n,f),we(a,u,f),C(u,s,f),we(l,u,f),o=!0},p(u,f){const d={};f&2&&(d.isConnectable=u[1]),r.$set(d);const c={};f&2&&(c.isConnectable=u[1]),t.$set(c);const h={};f&2&&(h.isConnectable=u[1]),a.$set(h);const g={};f&2&&(g.isConnectable=u[1]),l.$set(g)},i(u){o||(Y(r.$$.fragment,u),Y(t.$$.fragment,u),Y(a.$$.fragment,u),Y(l.$$.fragment,u),o=!0)},o(u){Z(r.$$.fragment,u),Z(t.$$.fragment,u),Z(a.$$.fragment,u),Z(l.$$.fragment,u),o=!1},d(u){u&&(m(e),m(n),m(s)),ye(r,u),ye(t,u),ye(a,u),ye(l,u)}}}function Rm(i){let r=i[3].inProgress,e,t,n,a,s,l="Information",o,u,f,d,c,h,g,N,y,b=Ef(i),S=!i[4]&&Af(i);return f=new $r({props:{isVisible:i[2]}}),{c(){b.c(),e=ae(),t=re("div"),S&&S.c(),n=ae(),a=re("div"),s=re("i"),s.textContent=l,o=re("br"),u=ae(),ve(f.$$.fragment),d=ae(),c=re("input"),this.h()},l(D){b.l(D),e=le(D),t=ne(D,"DIV",{class:!0});var A=ge(t);S&&S.l(A),n=le(A),a=ne(A,"DIV",{class:!0});var v=ge(a);s=ne(v,"I",{"data-svelte-h":!0}),Me(s)!=="svelte-1ocpiyk"&&(s.textContent=l),o=ne(v,"BR",{}),u=le(v),be(f.$$.fragment,v),d=le(v),c=ne(v,"INPUT",{class:!0,type:!0,style:!0}),v.forEach(m),A.forEach(m),this.h()},h(){se(c,"class","nodrag label"),se(c,"type","text"),Ge(c,"background","#e8f4ea"),c.value=h=i[0].label||"< label >",se(a,"class","information node-inner svelte-1wgy9qw"),se(t,"class","information node svelte-1wgy9qw")},m(D,A){b.m(D,A),C(D,e,A),C(D,t,A),S&&S.m(t,null),x(t,n),x(t,a),x(a,s),x(a,o),x(a,u),we(f,a,null),x(a,d),x(a,c),g=!0,N||(y=[pe(c,"input",i[13]),pe(t,"mouseenter",i[7]),pe(t,"mouseleave",i[8])],N=!0)},p(D,[A]){A&8&&qe(r,r=D[3].inProgress)?(xe(),Z(b,1,1,Ce),Ve(),b=Ef(D),b.c(),Y(b,1),b.m(e.parentNode,e)):b.p(D,A),D[4]?S&&(xe(),Z(S,1,1,()=>{S=null}),Ve()):S?(S.p(D,A),A&16&&Y(S,1)):(S=Af(D),S.c(),Y(S,1),S.m(t,n));const v={};A&4&&(v.isVisible=D[2]),f.$set(v),(!g||A&1&&h!==(h=D[0].label||"< label >")&&c.value!==h)&&(c.value=h)},i(D){g||(Y(b),Y(S),Y(f.$$.fragment,D),g=!0)},o(D){Z(b),Z(S),Z(f.$$.fragment,D),g=!1},d(D){D&&(m(e),m(t)),b.d(D),S&&S.d(),ye(f),N=!1,st(y)}}}function Fm(i,r,e){let t;var n;let{data:a}=r,{isConnectable:s}=r,{selected:l=void 0}=r,{id:o}=r;const u=qr();Ye(i,u,b=>e(3,t=b));let f=!1,d=!1;function c(){e(5,d=!0)}function h(){e(5,d=!1)}function g(){return t.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function N(){return d?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const y=b=>{e(0,a.label=b.currentTarget.value,a)};return i.$$set=b=>{"data"in b&&e(0,a=b.data),"isConnectable"in b&&e(1,s=b.isConnectable),"selected"in b&&e(2,l=b.selected),"id"in b&&e(11,o=b.id)},i.$$.update=()=>{i.$$.dirty&6152&&e(4,f=(e(12,n=t.toHandle)===null||n===void 0?void 0:n.nodeId)==o)},[a,s,l,t,f,d,u,c,h,g,N,o,n,y]}class Im extends Ke{constructor(r){super(),et(this,r,Fm,Rm,qe,{data:0,isConnectable:1,selected:2,id:11})}}function Nf(i){let r,e;return r=new Je({props:{type:"target",class:"customHandle",position:$e.Left,id:"target",style:i[9](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n&2&&(a.isConnectable=t[1]),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Tf(i){let r=i[5],e,t,n=Sf(i);return{c(){n.c(),e=De()},l(a){n.l(a),e=De()},m(a,s){n.m(a,s),C(a,e,s),t=!0},p(a,s){s&32&&qe(r,r=a[5])?(xe(),Z(n,1,1,Ce),Ve(),n=Sf(a),n.c(),Y(n,1),n.m(e.parentNode,e)):n.p(a,s)},i(a){t||(Y(n),t=!0)},o(a){Z(n),t=!1},d(a){a&&m(e),n.d(a)}}}function Sf(i){let r,e,t,n,a,s,l,o;return r=new Je({props:{type:"source",position:$e.Top,id:"source",style:i[10](),isConnectable:i[1]}}),t=new Je({props:{type:"source",position:$e.Left,id:"source",style:i[10](),isConnectable:i[1]}}),a=new Je({props:{type:"source",position:$e.Right,id:"source",style:i[10](),isConnectable:i[1]}}),l=new Je({props:{type:"source",position:$e.Bottom,id:"source",style:i[10](),isConnectable:i[1]}}),{c(){ve(r.$$.fragment),e=ae(),ve(t.$$.fragment),n=ae(),ve(a.$$.fragment),s=ae(),ve(l.$$.fragment)},l(u){be(r.$$.fragment,u),e=le(u),be(t.$$.fragment,u),n=le(u),be(a.$$.fragment,u),s=le(u),be(l.$$.fragment,u)},m(u,f){we(r,u,f),C(u,e,f),we(t,u,f),C(u,n,f),we(a,u,f),C(u,s,f),we(l,u,f),o=!0},p(u,f){const d={};f&2&&(d.isConnectable=u[1]),r.$set(d);const c={};f&2&&(c.isConnectable=u[1]),t.$set(c);const h={};f&2&&(h.isConnectable=u[1]),a.$set(h);const g={};f&2&&(g.isConnectable=u[1]),l.$set(g)},i(u){o||(Y(r.$$.fragment,u),Y(t.$$.fragment,u),Y(a.$$.fragment,u),Y(l.$$.fragment,u),o=!0)},o(u){Z(r.$$.fragment,u),Z(t.$$.fragment,u),Z(a.$$.fragment,u),Z(l.$$.fragment,u),o=!1},d(u){u&&(m(e),m(n),m(s)),ye(r,u),ye(t,u),ye(a,u),ye(l,u)}}}function Om(i){let r=i[3].inProgress,e,t,n,a,s,l,o,u="Condition",f,d,c,h,g,N,y,b=Nf(i),S=!i[4]&&Tf(i);return s=new $r({props:{isVisible:i[2]}}),{c(){b.c(),e=ae(),t=re("div"),S&&S.c(),n=ae(),a=re("div"),ve(s.$$.fragment),l=ae(),o=re("i"),o.textContent=u,f=re("br"),d=ae(),c=re("input"),this.h()},l(D){b.l(D),e=le(D),t=ne(D,"DIV",{class:!0});var A=ge(t);S&&S.l(A),n=le(A),a=ne(A,"DIV",{class:!0});var v=ge(a);be(s.$$.fragment,v),l=le(v),o=ne(v,"I",{"data-svelte-h":!0}),Me(o)!=="svelte-26somz"&&(o.textContent=u),f=ne(v,"BR",{}),d=le(v),c=ne(v,"INPUT",{class:!0,type:!0,style:!0}),v.forEach(m),A.forEach(m),this.h()},h(){se(c,"class","nodrag label"),se(c,"type","text"),Ge(c,"background","#ece6ff"),c.value=h=i[0].label||"< label >",se(a,"class","artifact node-inner"),se(t,"class","condition node svelte-d75hej")},m(D,A){b.m(D,A),C(D,e,A),C(D,t,A),S&&S.m(t,null),x(t,n),x(t,a),we(s,a,null),x(a,l),x(a,o),x(a,f),x(a,d),x(a,c),g=!0,N||(y=[pe(c,"input",i[13]),pe(t,"mouseenter",i[7]),pe(t,"mouseleave",i[8])],N=!0)},p(D,[A]){A&8&&qe(r,r=D[3].inProgress)?(xe(),Z(b,1,1,Ce),Ve(),b=Nf(D),b.c(),Y(b,1),b.m(e.parentNode,e)):b.p(D,A),D[4]?S&&(xe(),Z(S,1,1,()=>{S=null}),Ve()):S?(S.p(D,A),A&16&&Y(S,1)):(S=Tf(D),S.c(),Y(S,1),S.m(t,n));const v={};A&4&&(v.isVisible=D[2]),s.$set(v),(!g||A&1&&h!==(h=D[0].label||"< label >")&&c.value!==h)&&(c.value=h)},i(D){g||(Y(b),Y(S),Y(s.$$.fragment,D),g=!0)},o(D){Z(b),Z(S),Z(s.$$.fragment,D),g=!1},d(D){D&&(m(e),m(t)),b.d(D),S&&S.d(),ye(s),N=!1,st(y)}}}function Lm(i,r,e){let t;var n;let{data:a}=r,{isConnectable:s}=r,{selected:l=void 0}=r,{id:o}=r;const u=qr();Ye(i,u,b=>e(3,t=b));let f=!1,d=!1;function c(){e(5,d=!0)}function h(){e(5,d=!1)}function g(){return t.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function N(){return d?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const y=b=>{e(0,a.label=b.currentTarget.value,a)};return i.$$set=b=>{"data"in b&&e(0,a=b.data),"isConnectable"in b&&e(1,s=b.isConnectable),"selected"in b&&e(2,l=b.selected),"id"in b&&e(11,o=b.id)},i.$$.update=()=>{i.$$.dirty&6152&&e(4,f=(e(12,n=t.toHandle)===null||n===void 0?void 0:n.nodeId)==o)},[a,s,l,t,f,d,u,c,h,g,N,o,n,y]}class Bm extends Ke{constructor(r){super(),et(this,r,Lm,Om,qe,{data:0,isConnectable:1,selected:2,id:11})}}function Rf(i){let r,e;return r=new Je({props:{type:"target",class:"customHandle",position:$e.Left,id:"target",style:i[9](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n&2&&(a.isConnectable=t[1]),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Ff(i){let r=i[5],e,t,n=If(i);return{c(){n.c(),e=De()},l(a){n.l(a),e=De()},m(a,s){n.m(a,s),C(a,e,s),t=!0},p(a,s){s&32&&qe(r,r=a[5])?(xe(),Z(n,1,1,Ce),Ve(),n=If(a),n.c(),Y(n,1),n.m(e.parentNode,e)):n.p(a,s)},i(a){t||(Y(n),t=!0)},o(a){Z(n),t=!1},d(a){a&&m(e),n.d(a)}}}function If(i){let r,e,t,n,a,s,l,o;return r=new Je({props:{type:"source",position:$e.Top,id:"source",style:i[10](),isConnectable:i[1]}}),t=new Je({props:{type:"source",position:$e.Left,id:"source",style:i[10](),isConnectable:i[1]}}),a=new Je({props:{type:"source",position:$e.Right,id:"source",style:i[10](),isConnectable:i[1]}}),l=new Je({props:{type:"source",position:$e.Bottom,id:"source",style:i[10](),isConnectable:i[1]}}),{c(){ve(r.$$.fragment),e=ae(),ve(t.$$.fragment),n=ae(),ve(a.$$.fragment),s=ae(),ve(l.$$.fragment)},l(u){be(r.$$.fragment,u),e=le(u),be(t.$$.fragment,u),n=le(u),be(a.$$.fragment,u),s=le(u),be(l.$$.fragment,u)},m(u,f){we(r,u,f),C(u,e,f),we(t,u,f),C(u,n,f),we(a,u,f),C(u,s,f),we(l,u,f),o=!0},p(u,f){const d={};f&2&&(d.isConnectable=u[1]),r.$set(d);const c={};f&2&&(c.isConnectable=u[1]),t.$set(c);const h={};f&2&&(h.isConnectable=u[1]),a.$set(h);const g={};f&2&&(g.isConnectable=u[1]),l.$set(g)},i(u){o||(Y(r.$$.fragment,u),Y(t.$$.fragment,u),Y(a.$$.fragment,u),Y(l.$$.fragment,u),o=!0)},o(u){Z(r.$$.fragment,u),Z(t.$$.fragment,u),Z(a.$$.fragment,u),Z(l.$$.fragment,u),o=!1},d(u){u&&(m(e),m(n),m(s)),ye(r,u),ye(t,u),ye(a,u),ye(l,u)}}}function Pm(i){let r=i[3].inProgress,e,t,n,a,s,l="Agent",o,u,f,d,c,h,g,N,y,b=Rf(i),S=!i[4]&&Ff(i);return f=new $r({props:{isVisible:i[2]}}),{c(){b.c(),e=ae(),t=re("div"),S&&S.c(),n=ae(),a=re("div"),s=re("i"),s.textContent=l,o=re("br"),u=ae(),ve(f.$$.fragment),d=ae(),c=re("input"),this.h()},l(D){b.l(D),e=le(D),t=ne(D,"DIV",{class:!0});var A=ge(t);S&&S.l(A),n=le(A),a=ne(A,"DIV",{class:!0});var v=ge(a);s=ne(v,"I",{"data-svelte-h":!0}),Me(s)!=="svelte-13s1fb"&&(s.textContent=l),o=ne(v,"BR",{}),u=le(v),be(f.$$.fragment,v),d=le(v),c=ne(v,"INPUT",{class:!0,type:!0,style:!0}),v.forEach(m),A.forEach(m),this.h()},h(){se(c,"class","nodrag label"),se(c,"type","text"),Ge(c,"background","#f0e6e6"),c.value=h=i[0].label||"< label >",se(a,"class","agent-inner node-inner"),se(t,"class","agent node svelte-n06ybh")},m(D,A){b.m(D,A),C(D,e,A),C(D,t,A),S&&S.m(t,null),x(t,n),x(t,a),x(a,s),x(a,o),x(a,u),we(f,a,null),x(a,d),x(a,c),g=!0,N||(y=[pe(c,"input",i[13]),pe(t,"mouseenter",i[7]),pe(t,"mouseleave",i[8])],N=!0)},p(D,[A]){A&8&&qe(r,r=D[3].inProgress)?(xe(),Z(b,1,1,Ce),Ve(),b=Rf(D),b.c(),Y(b,1),b.m(e.parentNode,e)):b.p(D,A),D[4]?S&&(xe(),Z(S,1,1,()=>{S=null}),Ve()):S?(S.p(D,A),A&16&&Y(S,1)):(S=Ff(D),S.c(),Y(S,1),S.m(t,n));const v={};A&4&&(v.isVisible=D[2]),f.$set(v),(!g||A&1&&h!==(h=D[0].label||"< label >")&&c.value!==h)&&(c.value=h)},i(D){g||(Y(b),Y(S),Y(f.$$.fragment,D),g=!0)},o(D){Z(b),Z(S),Z(f.$$.fragment,D),g=!1},d(D){D&&(m(e),m(t)),b.d(D),S&&S.d(),ye(f),N=!1,st(y)}}}function qm(i,r,e){let t;var n;let{data:a}=r,{isConnectable:s}=r,{selected:l=void 0}=r,{id:o}=r;const u=qr();Ye(i,u,b=>e(3,t=b));let f=!1,d=!1;function c(){e(5,d=!0)}function h(){e(5,d=!1)}function g(){return t.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function N(){return d?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const y=b=>{e(0,a.label=b.currentTarget.value,a)};return i.$$set=b=>{"data"in b&&e(0,a=b.data),"isConnectable"in b&&e(1,s=b.isConnectable),"selected"in b&&e(2,l=b.selected),"id"in b&&e(11,o=b.id)},i.$$.update=()=>{i.$$.dirty&6152&&e(4,f=(e(12,n=t.toHandle)===null||n===void 0?void 0:n.nodeId)==o)},[a,s,l,t,f,d,u,c,h,g,N,o,n,y]}class jm extends Ke{constructor(r){super(),et(this,r,qm,Pm,qe,{data:0,isConnectable:1,selected:2,id:11})}}function Of(i){let r,e;return r=new Je({props:{type:"target",class:"customHandle",position:$e.Left,id:"target",style:i[11](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n&2&&(a.isConnectable=t[1]),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Lf(i){let r=i[7],e,t,n=Bf(i);return{c(){n.c(),e=De()},l(a){n.l(a),e=De()},m(a,s){n.m(a,s),C(a,e,s),t=!0},p(a,s){s&128&&qe(r,r=a[7])?(xe(),Z(n,1,1,Ce),Ve(),n=Bf(a),n.c(),Y(n,1),n.m(e.parentNode,e)):n.p(a,s)},i(a){t||(Y(n),t=!0)},o(a){Z(n),t=!1},d(a){a&&m(e),n.d(a)}}}function Bf(i){let r,e,t,n,a,s,l,o;return r=new Je({props:{type:"source",position:$e.Top,id:"source",style:i[12](),isConnectable:i[1]}}),t=new Je({props:{type:"source",position:$e.Left,id:"source",style:i[12](),isConnectable:i[1]}}),a=new Je({props:{type:"source",position:$e.Right,id:"source",style:i[12](),isConnectable:i[1]}}),l=new Je({props:{type:"source",position:$e.Bottom,id:"source",style:i[12](),isConnectable:i[1]}}),{c(){ve(r.$$.fragment),e=ae(),ve(t.$$.fragment),n=ae(),ve(a.$$.fragment),s=ae(),ve(l.$$.fragment)},l(u){be(r.$$.fragment,u),e=le(u),be(t.$$.fragment,u),n=le(u),be(a.$$.fragment,u),s=le(u),be(l.$$.fragment,u)},m(u,f){we(r,u,f),C(u,e,f),we(t,u,f),C(u,n,f),we(a,u,f),C(u,s,f),we(l,u,f),o=!0},p(u,f){const d={};f&2&&(d.isConnectable=u[1]),r.$set(d);const c={};f&2&&(c.isConnectable=u[1]),t.$set(c);const h={};f&2&&(h.isConnectable=u[1]),a.$set(h);const g={};f&2&&(g.isConnectable=u[1]),l.$set(g)},i(u){o||(Y(r.$$.fragment,u),Y(t.$$.fragment,u),Y(a.$$.fragment,u),Y(l.$$.fragment,u),o=!0)},o(u){Z(r.$$.fragment,u),Z(t.$$.fragment,u),Z(a.$$.fragment,u),Z(l.$$.fragment,u),o=!1},d(u){u&&(m(e),m(n),m(s)),ye(r,u),ye(t,u),ye(a,u),ye(l,u)}}}function Mm(i){let r,e;return r=new i[16].ItemTree({props:{list:Kf,filter_value_store:i[17],select_item:i[18]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n&131072&&(a.filter_value_store=t[17]),n&262144&&(a.select_item=t[18]),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function Um(i){let r=i[5].inProgress,e,t,n,a,s,l,o,u,f,d,c,h,g,N,y,b,S,D,A,v=Of(i),E=!i[6]&&Lf(i);return s=new $r({props:{isVisible:i[4]}}),g=new Hn({props:{node_id:i[2],element_id:i[0].d3f_class,input_color:"white",$$slots:{default:[Mm,({R:w,filter_value_store:B,select_item:I})=>({16:w,17:B,18:I}),({R:w,filter_value_store:B,select_item:I})=>(w?65536:0)|(B?131072:0)|(I?262144:0)]},$$scope:{ctx:i}}}),{c(){v.c(),e=ae(),t=re("div"),E&&E.c(),n=ae(),a=re("div"),ve(s.$$.fragment),l=ae(),o=re("i"),u=P(i[3]),f=re("br"),d=ae(),c=re("br"),h=ae(),ve(g.$$.fragment),N=ae(),y=re("input"),this.h()},l(w){v.l(w),e=le(w),t=ne(w,"DIV",{class:!0});var B=ge(t);E&&E.l(B),n=le(B),a=ne(B,"DIV",{class:!0});var I=ge(a);be(s.$$.fragment,I),l=le(I),o=ne(I,"I",{});var L=ge(o);u=q(L,i[3]),L.forEach(m),f=ne(I,"BR",{}),d=le(I),c=ne(I,"BR",{}),h=le(I),be(g.$$.fragment,I),N=le(I),y=ne(I,"INPUT",{class:!0,type:!0,style:!0}),I.forEach(m),B.forEach(m),this.h()},h(){se(y,"class","nodrag label"),se(y,"type","text"),Ge(y,"background","white"),y.value=b=i[0].label??"< label >",se(a,"class","event node-inner svelte-r7gabh"),se(t,"class","event node svelte-r7gabh")},m(w,B){v.m(w,B),C(w,e,B),C(w,t,B),E&&E.m(t,null),x(t,n),x(t,a),we(s,a,null),x(a,l),x(a,o),x(o,u),x(a,f),x(a,d),x(a,c),x(a,h),we(g,a,null),x(a,N),x(a,y),S=!0,D||(A=[pe(y,"input",i[15]),pe(t,"mouseenter",i[9]),pe(t,"mouseleave",i[10])],D=!0)},p(w,[B]){B&32&&qe(r,r=w[5].inProgress)?(xe(),Z(v,1,1,Ce),Ve(),v=Of(w),v.c(),Y(v,1),v.m(e.parentNode,e)):v.p(w,B),w[6]?E&&(xe(),Z(E,1,1,()=>{E=null}),Ve()):E?(E.p(w,B),B&64&&Y(E,1)):(E=Lf(w),E.c(),Y(E,1),E.m(t,n));const I={};B&16&&(I.isVisible=w[4]),s.$set(I),(!S||B&8)&&fe(u,w[3]);const L={};B&4&&(L.node_id=w[2]),B&1&&(L.element_id=w[0].d3f_class),B&917504&&(L.$$scope={dirty:B,ctx:w}),g.$set(L),(!S||B&1&&b!==(b=w[0].label??"< label >")&&y.value!==b)&&(y.value=b)},i(w){S||(Y(v),Y(E),Y(s.$$.fragment,w),Y(g.$$.fragment,w),S=!0)},o(w){Z(v),Z(E),Z(s.$$.fragment,w),Z(g.$$.fragment,w),S=!1},d(w){w&&(m(e),m(t)),v.d(w),E&&E.d(),ye(s),ye(g),D=!1,st(A)}}}function xm(i,r,e){let t;var n;let{data:a}=r,{isConnectable:s}=r,{id:l}=r,{nodeType:o="EventNode"}=r,{nodeTypeLabel:u="Event"}=r,{selected:f=void 0}=r;const d=qr();Ye(i,d,D=>e(5,t=D));let c=!1,h=!1;function g(){e(7,h=!0)}function N(){e(7,h=!1)}function y(){return t.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function b(){return h?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const S=D=>{e(0,a.label=D.currentTarget.value,a)};return i.$$set=D=>{"data"in D&&e(0,a=D.data),"isConnectable"in D&&e(1,s=D.isConnectable),"id"in D&&e(2,l=D.id),"nodeType"in D&&e(13,o=D.nodeType),"nodeTypeLabel"in D&&e(3,u=D.nodeTypeLabel),"selected"in D&&e(4,f=D.selected)},i.$$.update=()=>{i.$$.dirty&16420&&e(6,c=(e(14,n=t.toHandle)===null||n===void 0?void 0:n.nodeId)==l)},[a,s,l,u,f,t,c,h,d,g,N,y,b,o,n,S]}class Vm extends Ke{constructor(r){super(),et(this,r,xm,Um,qe,{data:0,isConnectable:1,id:2,nodeType:13,nodeTypeLabel:3,selected:4})}}function Pf(i,r){const e=i.internals.positionAbsolute||{x:0,y:0},t=r.internals.positionAbsolute||{x:0,y:0},n=(i.measured.width??0)/2,a=(i.measured.height??0)/2,s=e.x+n,l=e.y+a,o=t.x+(r.measured.width??0)/2,u=t.y+(r.measured.height??0)/2,f=(o-s)/(2*n)-(u-l)/(2*a),d=(o-s)/(2*n)+(u-l)/(2*a),c=1/(Math.abs(f)+Math.abs(d)),h=c*f,g=c*d,N=n*(h+g)+s,y=a*(-h+g)+l;return{x:N,y}}function qf(i,r){var s,l;if(!i.measured.width||!i.measured.height)return null;const e=Math.round(((s=i.internals.positionAbsolute)==null?void 0:s.x)??0),t=Math.round(((l=i.internals.positionAbsolute)==null?void 0:l.y)??0),n=Math.round(r.x),a=Math.round(r.y);return n<=e+1?$e.Left:n>=e+i.measured.width-1?$e.Right:a<=t+1?$e.Top:a>=t+i.measured.height-1?$e.Bottom:$e.Top}function sa(i,r){const e=Pf(i,r),t=Pf(r,i),n=qf(i,e),a=qf(r,t);return{sx:e.x,sy:e.y,tx:t.x,ty:t.y,sourcePos:n,targetPos:a}}function Hm(i){let r,e;return r=new i[19].ItemProperty({props:{list:tc,filter_value_store:i[20],select_item:i[21]}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n&1048576&&(a.filter_value_store=t[20]),n&2097152&&(a.select_item=t[21]),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function zm(i){let r,e,t=`translate(-50%, -50%) translate(${i[5]}px,${i[6]}px)`,n;return e=new Hn({props:{node_id:i[0],element_id:i[1].label,input_color:"#ffffff00",place_holder:String(i[1].label),flow_store_hook:Ar,data_save_key:"d3f_property",$$slots:{default:[Hm,({R:a,filter_value_store:s,select_item:l})=>({19:a,20:s,21:l}),({R:a,filter_value_store:s,select_item:l})=>(a?524288:0)|(s?1048576:0)|(l?2097152:0)]},$$scope:{ctx:i}}}),{c(){r=re("div"),ve(e.$$.fragment),this.h()},l(a){r=ne(a,"DIV",{class:!0});var s=ge(r);be(e.$$.fragment,s),s.forEach(m),this.h()},h(){se(r,"class","edge-label-container svelte-566npr"),Ge(r,"transform",t)},m(a,s){C(a,r,s),we(e,r,null),n=!0},p(a,s){const l={};s&1&&(l.node_id=a[0]),s&2&&(l.element_id=a[1].label),s&2&&(l.place_holder=String(a[1].label)),s&7340032&&(l.$$scope={dirty:s,ctx:a}),e.$set(l),s&96&&t!==(t=`translate(-50%, -50%) translate(${a[5]}px,${a[6]}px)`)&&Ge(r,"transform",t)},i(a){n||(Y(e.$$.fragment,a),n=!0)},o(a){Z(e.$$.fragment,a),n=!1},d(a){a&&m(r),ye(e)}}}function Xm(i){let r,e,t,n;return r=new P_({props:{path:i[4],markerEnd:i[2],style:i[3]}}),t=new q_({props:{$$slots:{default:[zm]},$$scope:{ctx:i}}}),{c(){ve(r.$$.fragment),e=ae(),ve(t.$$.fragment)},l(a){be(r.$$.fragment,a),e=le(a),be(t.$$.fragment,a)},m(a,s){we(r,a,s),C(a,e,s),we(t,a,s),n=!0},p(a,[s]){const l={};s&16&&(l.path=a[4]),s&4&&(l.markerEnd=a[2]),s&8&&(l.style=a[3]),r.$set(l);const o={};s&4194403&&(o.$$scope={dirty:s,ctx:a}),t.$set(o)},i(a){n||(Y(r.$$.fragment,a),Y(t.$$.fragment,a),n=!0)},o(a){Z(r.$$.fragment,a),Z(t.$$.fragment,a),n=!1},d(a){a&&m(e),ye(r,a),ye(t,a)}}}function $m(i,r,e){let t,n,a,s=Ce,l=()=>(s(),s=Dr(n,L=>e(17,a=L)),n),o,u=Ce,f=()=>(u(),u=Dr(t,L=>e(18,o=L)),t);i.$$.on_destroy.push(()=>s()),i.$$.on_destroy.push(()=>u());let{id:d}=r,{data:c}=r,{sourceX:h}=r,{sourceY:g}=r,{source:N}=r,{sourcePosition:y}=r,{targetX:b}=r,{targetY:S}=r,{target:D}=r,{targetPosition:A}=r,{markerEnd:v=Gf.ArrowClosed}=r,{style:E="stroke-width: 2px"}=r,w,B,I;return i.$$set=L=>{"id"in L&&e(0,d=L.id),"data"in L&&e(1,c=L.data),"sourceX"in L&&e(9,h=L.sourceX),"sourceY"in L&&e(10,g=L.sourceY),"source"in L&&e(11,N=L.source),"sourcePosition"in L&&e(12,y=L.sourcePosition),"targetX"in L&&e(13,b=L.targetX),"targetY"in L&&e(14,S=L.targetY),"target"in L&&e(15,D=L.target),"targetPosition"in L&&e(16,A=L.targetPosition),"markerEnd"in L&&e(2,v=L.markerEnd),"style"in L&&e(3,E=L.style)},i.$$.update=()=>{if(i.$$.dirty&2048&&f(e(8,t=xl(N))),i.$$.dirty&32768&&l(e(7,n=xl(D))),i.$$.dirty&393216)if(o&&a){const L=sa(o,a);e(4,[w,B,I]=$s({sourceX:L.sx,sourceY:L.sy,sourcePosition:L.sourcePos,targetX:L.tx,targetY:L.ty,targetPosition:L.targetPos}),w,(e(5,B),e(18,o),e(17,a)),(e(6,I),e(18,o),e(17,a)))}else e(4,w=void 0)},[d,c,v,E,w,B,I,n,t,h,g,N,y,b,S,D,A,a,o]}class Gm extends Ke{constructor(r){super(),et(this,r,$m,Xm,qe,{id:0,data:1,sourceX:9,sourceY:10,source:11,sourcePosition:12,targetX:13,targetY:14,target:15,targetPosition:16,markerEnd:2,style:3})}}function jf(i,r,e){const t=i.slice();return t[7]=r[e],t}function Mf(i){let r,e=He(i[2]),t=[];for(let n=0;n<e.length;n+=1)t[n]=Uf(jf(i,e,n));return{c(){r=re("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){r=ne(n,"DIV",{class:!0});var a=ge(r);for(let s=0;s<t.length;s+=1)t[s].l(a);a.forEach(m),this.h()},h(){se(r,"class","file-list svelte-9u10j")},m(n,a){C(n,r,a);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(r,null)},p(n,a){if(a&20){e=He(n[2]);let s;for(s=0;s<e.length;s+=1){const l=jf(n,e,s);t[s]?t[s].p(l,a):(t[s]=Uf(l),t[s].c(),t[s].m(r,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=e.length}},d(n){n&&m(r),Dt(t,n)}}}function Uf(i){let r,e=i[7].name+"",t,n,a=i[7].nodeCount+"",s,l,o=i[7].edgeCount+"",u,f,d,c;function h(){return i[5](i[7])}return{c(){r=re("div"),t=P(e),n=P(" ("),s=P(a),l=P(" nodes, "),u=P(o),f=P(` edges)
          `),this.h()},l(g){r=ne(g,"DIV",{class:!0});var N=ge(r);t=q(N,e),n=q(N," ("),s=q(N,a),l=q(N," nodes, "),u=q(N,o),f=q(N,` edges)
          `),N.forEach(m),this.h()},h(){se(r,"class","file-item svelte-9u10j")},m(g,N){C(g,r,N),x(r,t),x(r,n),x(r,s),x(r,l),x(r,u),x(r,f),d||(c=pe(r,"click",h),d=!0)},p(g,N){i=g,N&4&&e!==(e=i[7].name+"")&&fe(t,e),N&4&&a!==(a=i[7].nodeCount+"")&&fe(s,a),N&4&&o!==(o=i[7].edgeCount+"")&&fe(u,o)},d(g){g&&m(r),d=!1,c()}}}function Wm(i){let r,e,t,n,a,s,l=i[1]&&Mf(i);return{c(){r=re("div"),e=re("button"),t=P(i[0]),n=ae(),l&&l.c(),this.h()},l(o){r=ne(o,"DIV",{class:!0});var u=ge(r);e=ne(u,"BUTTON",{class:!0});var f=ge(e);t=q(f,i[0]),f.forEach(m),n=le(u),l&&l.l(u),u.forEach(m),this.h()},h(){se(e,"class","svelte-9u10j"),se(r,"class","pick-list-container svelte-9u10j")},m(o,u){C(o,r,u),x(r,e),x(e,t),x(r,n),l&&l.m(r,null),a||(s=pe(e,"click",i[3]),a=!0)},p(o,[u]){u&1&&fe(t,o[0]),o[1]?l?l.p(o,u):(l=Mf(o),l.c(),l.m(r,null)):l&&(l.d(1),l=null)},i:Ce,o:Ce,d(o){o&&m(r),l&&l.d(),a=!1,s()}}}async function Qm(){return await(await fetch("/cad/examples.json")).json()}function Ym(i,r,e){const t=la();let n=!1,{selectedFile:a="Example Graphs"}=r,s=[];function l(){e(1,n=!n)}function o(f){e(0,a=f),e(1,n=!1),t("fileSelected",f)}us(async()=>{e(2,s=await Qm())});const u=f=>o(f.name);return i.$$set=f=>{"selectedFile"in f&&e(0,a=f.selectedFile)},[a,n,s,l,o,u]}class Jm extends Ke{constructor(r){super(),et(this,r,Ym,Wm,qe,{selectedFile:0})}}function xf(i){let r,e,t,n,a;return{c(){r=bl("path"),e=ae(),t=bl("circle"),this.h()},l(s){r=wl(s,"path",{fill:!0,"stroke-width":!0,class:!0,stroke:!0,d:!0}),ge(r).forEach(m),e=le(s),t=wl(s,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),ge(t).forEach(m),this.h()},h(){se(r,"fill","transparent"),se(r,"stroke-width",2.5),se(r,"class","animated"),se(r,"stroke","black"),se(r,"d",i[2]),se(t,"cx",n=i[0].tx),se(t,"cy",a=i[0].ty),se(t,"r",3),se(t,"stroke","black"),se(t,"stroke-width",1.5)},m(s,l){C(s,r,l),C(s,e,l),C(s,t,l)},p(s,l){l&4&&se(r,"d",s[2]),l&1&&n!==(n=s[0].tx)&&se(t,"cx",n),l&1&&a!==(a=s[0].ty)&&se(t,"cy",a)},d(s){s&&(m(r),m(e),m(t))}}}function Zm(i){let r,e=i[1].inProgress&&xf(i);return{c(){e&&e.c(),r=De()},l(t){e&&e.l(t),r=De()},m(t,n){e&&e.m(t,n),C(t,r,n)},p(t,[n]){t[1].inProgress?e?e.p(t,n):(e=xf(t),e.c(),e.m(r.parentNode,r)):e&&(e.d(1),e=null)},i:Ce,o:Ce,d(t){t&&m(r),e&&e.d(t)}}}function Km(i,r,e){let t;const n=qr();Ye(i,n,l=>e(1,t=l));let a,s;return i.$$.update=()=>{if(i.$$.dirty&3){const l=structuredClone(t.fromNode);t.isValid?(e(0,s=sa(t.fromNode,t.toNode)),e(2,a=$s({sourceX:s.sx,sourceY:s.sy,sourcePosition:s.sourcePos,targetX:s.tx,targetY:s.ty,targetPosition:s.targetPos})[0])):(l.id="-1",l.measured={width:1,height:1},l.position={x:t.to.x,y:t.to.y},l.internals.positionAbsolute={x:t.to.x,y:t.to.y},e(0,s=sa(t.fromNode,l)),e(2,a=$s({sourceX:s.sx,sourceY:s.sy,sourcePosition:s.sourcePos,targetX:s.tx,targetY:s.ty,targetPosition:s.targetPos})[0]))}},[s,t,a,n]}class ev extends Ke{constructor(r){super(),et(this,r,Km,Zm,qe,{})}}function tv(i){let r,e='This is an (very) alpha-level preview release. Please review and file bugs <a href="https://github.com/d3fend/d3fend/issues/14">here. </a>Early stage <a href="./docs">docs.</a>';return{c(){r=re("div"),r.innerHTML=e,this.h()},l(t){r=ne(t,"DIV",{class:!0,"data-svelte-h":!0}),Me(r)!=="svelte-hoyi2c"&&(r.innerHTML=e),this.h()},h(){se(r,"class","font-medium")},m(t,n){C(t,r,n)},p:Ce,d(t){t&&m(r)}}}function rv(i){let r;return{c(){r=P("Please only load models from URLs you trust!")},l(e){r=q(e,"Please only load models from URLs you trust!")},m(e,t){C(e,r,t)},d(e){e&&m(r)}}}function nv(i){let r,e,t,n,a,s,l,o,u,f,d;return f=new os({props:{$$slots:{default:[rv]},$$scope:{ctx:i}}}),{c(){r=re("br"),e=ae(),t=re("code"),n=P(i[4]),a=ae(),s=re("br"),l=ae(),o=re("br"),u=ae(),ve(f.$$.fragment),this.h()},l(c){r=ne(c,"BR",{}),e=le(c),t=ne(c,"CODE",{class:!0});var h=ge(t);n=q(h,i[4]),h.forEach(m),a=le(c),s=ne(c,"BR",{}),l=le(c),o=ne(c,"BR",{}),u=le(c),be(f.$$.fragment,c),this.h()},h(){se(t,"class","center text-center")},m(c,h){C(c,r,h),C(c,e,h),C(c,t,h),x(t,n),C(c,a,h),C(c,s,h),C(c,l,h),C(c,o,h),C(c,u,h),we(f,c,h),d=!0},p(c,h){(!d||h[0]&16)&&fe(n,c[4]);const g={};h[1]&2097152&&(g.$$scope={dirty:h,ctx:c}),f.$set(g)},i(c){d||(Y(f.$$.fragment,c),d=!0)},o(c){Z(f.$$.fragment,c),d=!1},d(c){c&&(m(r),m(e),m(t),m(a),m(s),m(l),m(o),m(u)),ye(f,c)}}}function iv(i){let r;return{c(){r=P("Please only load models from URLs you trust!")},l(e){r=q(e,"Please only load models from URLs you trust!")},m(e,t){C(e,r,t)},d(e){e&&m(r)}}}function sv(i){let r,e,t,n,a,s;return a=new os({props:{$$slots:{default:[iv]},$$scope:{ctx:i}}}),{c(){r=re("br"),e=ae(),t=re("br"),n=ae(),ve(a.$$.fragment)},l(l){r=ne(l,"BR",{}),e=le(l),t=ne(l,"BR",{}),n=le(l),be(a.$$.fragment,l)},m(l,o){C(l,r,o),C(l,e,o),C(l,t,o),C(l,n,o),we(a,l,o),s=!0},p(l,o){const u={};o[1]&2097152&&(u.$$scope={dirty:o,ctx:l}),a.$set(u)},i(l){s||(Y(a.$$.fragment,l),s=!0)},o(l){Z(a.$$.fragment,l),s=!1},d(l){l&&(m(r),m(e),m(t),m(n)),ye(a,l)}}}function Vf(i){let r,e,t,n;return r=new os({props:{alert_type:"warning",$$slots:{default:[av]},$$scope:{ctx:i}}}),{c(){ve(r.$$.fragment),e=ae(),t=re("br")},l(a){be(r.$$.fragment,a),e=le(a),t=ne(a,"BR",{})},m(a,s){we(r,a,s),C(a,e,s),C(a,t,s),n=!0},i(a){n||(Y(r.$$.fragment,a),n=!0)},o(a){Z(r.$$.fragment,a),n=!1},d(a){a&&(m(e),m(t)),ye(r,a)}}}function av(i){let r;return{c(){r=P("Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},l(e){r=q(e,"Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},m(e,t){C(e,r,t)},d(e){e&&m(r)}}}function lv(i){let r,e,t,n,a=i[12].length+"",s,l,o,u,f,d,c,h,g,N,y="copy",b,S,D,A=i[12].length>2048&&Vf(i);return{c(){A&&A.c(),r=ae(),e=re("div"),t=re("code"),n=P("The encoded model has a string length of "),s=P(a),l=P(" characters."),o=ae(),u=re("p"),f=re("button"),d=re("a"),c=P("Share URL"),h=ae(),g=re("span"),N=re("button"),N.textContent=y,this.h()},l(v){A&&A.l(v),r=le(v),e=ne(v,"DIV",{});var E=ge(e);t=ne(E,"CODE",{});var w=ge(t);n=q(w,"The encoded model has a string length of "),s=q(w,a),l=q(w," characters."),w.forEach(m),E.forEach(m),o=le(v),u=ne(v,"P",{});var B=ge(u);f=ne(B,"BUTTON",{class:!0});var I=ge(f);d=ne(I,"A",{href:!0});var L=ge(d);c=q(L,"Share URL"),L.forEach(m),I.forEach(m),h=le(B),g=ne(B,"SPAN",{});var k=ge(g);N=ne(k,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(N)!=="svelte-1uua65l"&&(N.textContent=y),k.forEach(m),B.forEach(m),this.h()},h(){se(d,"href",i[13]),se(f,"class","svelte-1sqgor0"),se(N,"class","svelte-1sqgor0")},m(v,E){A&&A.m(v,E),C(v,r,E),C(v,e,E),x(e,t),x(t,n),x(t,s),x(t,l),C(v,o,E),C(v,u,E),x(u,f),x(f,d),x(d,c),x(u,h),x(u,g),x(g,N),b=!0,S||(D=pe(N,"click",i[32]),S=!0)},p(v,E){v[12].length>2048?A?E[0]&4096&&Y(A,1):(A=Vf(v),A.c(),Y(A,1),A.m(r.parentNode,r)):A&&(xe(),Z(A,1,1,()=>{A=null}),Ve()),(!b||E[0]&4096)&&a!==(a=v[12].length+"")&&fe(s,a),(!b||E[0]&8192)&&se(d,"href",v[13])},i(v){b||(Y(A),b=!0)},o(v){Z(A),b=!1},d(v){v&&(m(r),m(e),m(o),m(u)),A&&A.d(v),S=!1,D()}}}function Hf(i){let r,e,t,n,a,s,l;return t=new W_({props:{display:"inline"}}),{c(){r=re("span"),e=re("span"),ve(t.$$.fragment),n=ae(),a=re("span"),s=P(i[14]),this.h()},l(o){r=ne(o,"SPAN",{class:!0});var u=ge(r);e=ne(u,"SPAN",{});var f=ge(e);be(t.$$.fragment,f),f.forEach(m),n=le(u),a=ne(u,"SPAN",{});var d=ge(a);s=q(d,i[14]),d.forEach(m),u.forEach(m),this.h()},h(){se(r,"class","right")},m(o,u){C(o,r,u),x(r,e),we(t,e,null),x(r,n),x(r,a),x(a,s),l=!0},p(o,u){(!l||u[0]&16384)&&fe(s,o[14])},i(o){l||(Y(t.$$.fragment,o),l=!0)},o(o){Z(t.$$.fragment,o),l=!1},d(o){o&&m(r),ye(t)}}}function zf(i){let r,e;return r=new U2({props:{id:i[8].id,top:i[8].top,left:i[8].left,right:i[8].right,bottom:i[8].bottom}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,n){const a={};n[0]&256&&(a.id=t[8].id),n[0]&256&&(a.top=t[8].top),n[0]&256&&(a.left=t[8].left),n[0]&256&&(a.right=t[8].right),n[0]&256&&(a.bottom=t[8].bottom),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function uv(i){let r,e,t,n,a,s,l;r=new M_({props:{position:"top-left"}}),t=new U_({props:{variant:x_.Dots}});let o=i[8]&&zf(i);return s=new V_({props:{position:"top-right"}}),{c(){ve(r.$$.fragment),e=ae(),ve(t.$$.fragment),n=ae(),o&&o.c(),a=ae(),ve(s.$$.fragment)},l(u){be(r.$$.fragment,u),e=le(u),be(t.$$.fragment,u),n=le(u),o&&o.l(u),a=le(u),be(s.$$.fragment,u)},m(u,f){we(r,u,f),C(u,e,f),we(t,u,f),C(u,n,f),o&&o.m(u,f),C(u,a,f),we(s,u,f),l=!0},p(u,f){u[8]?o?(o.p(u,f),f[0]&256&&Y(o,1)):(o=zf(u),o.c(),Y(o,1),o.m(a.parentNode,a)):o&&(xe(),Z(o,1,1,()=>{o=null}),Ve())},i(u){l||(Y(r.$$.fragment,u),Y(t.$$.fragment,u),Y(o),Y(s.$$.fragment,u),l=!0)},o(u){Z(r.$$.fragment,u),Z(t.$$.fragment,u),Z(o),Z(s.$$.fragment,u),l=!1},d(u){u&&(m(e),m(n),m(a)),ye(r,u),ye(t,u),o&&o.d(u),ye(s,u)}}}function ov(i){let r,e;return r=new ev({props:{slot:"connectionLine"}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p:Ce,i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function fv(i){let r,e,t,n,a,s,l,o,u,f,d,c,h,g,N,y,b,S="Load",D,A,v="Merge",E,w,B="Clear",I,L,k="Save",j,O,R,G="Save As...",Q,oe="Save As JSON...",ee,X="Save As Turtle...",H,V,W="Share",M,J,Fe,Le,de,_e,ue,Ee,Xe,ct,We,he,Ie;function Ne(Te){i[30](Te)}let Ue={title:i[2].title,content:i[2].content,options:i[2].options,$$slots:{default:[nv]},$$scope:{ctx:i}};i[2].is_open!==void 0&&(Ue.is_open=i[2].is_open),r=new Go({props:Ue}),mt.push(()=>$t(r,"is_open",Ne)),r.$on("optionSelected",i[15]);function je(Te){i[31](Te)}let ze={title:i[3].title,content:i[3].content,options:i[3].options,$$slots:{default:[sv]},$$scope:{ctx:i}};i[3].is_open!==void 0&&(ze.is_open=i[3].is_open),n=new Go({props:ze}),mt.push(()=>$t(n,"is_open",je)),n.$on("optionSelected",i[16]);function rt(Te){i[33](Te)}let jt={title:"Share this model with a URL",$$slots:{default:[lv]},$$scope:{ctx:i}};i[11]!==void 0&&(jt.is_open=i[11]),l=new X2({props:jt}),mt.push(()=>$t(l,"is_open",rt));function Mt(Te){i[34](Te)}let ir={};i[7]!==void 0&&(ir.selectedFile=i[7]),d=new Jm({props:ir}),mt.push(()=>$t(d,"selectedFile",Mt)),d.$on("fileSelected",i[25]);let ut=i[14]&&Hf(i);return ue=new j_({props:{nodes:Fn,nodeTypes:i[0],edges:hi,edgeTypes:i[1],fitView:!0,defaultEdgeOptions:i[17],$$slots:{connectionLine:[ov],default:[uv]},$$scope:{ctx:i}}}),ue.$on("dragover",i[22]),ue.$on("drop",i[24]),ue.$on("connect",i[23]),ue.$on("nodecontextmenu",i[27]),ue.$on("paneclick",i[28]),ue.$on("onedgecreate",dv),Xe=new J2({}),{c(){ve(r.$$.fragment),t=ae(),ve(n.$$.fragment),s=ae(),ve(l.$$.fragment),u=ae(),f=re("div"),ve(d.$$.fragment),h=ae(),g=re("br"),N=ae(),y=re("div"),b=re("button"),b.textContent=S,D=ae(),A=re("button"),A.textContent=v,E=ae(),w=re("button"),w.textContent=B,I=ae(),L=re("button"),L.textContent=k,j=ae(),O=re("select"),R=re("option"),R.textContent=G,Q=re("option"),Q.textContent=oe,ee=re("option"),ee.textContent=X,H=ae(),V=re("button"),V.textContent=W,M=P(`
        filename:    `),J=re("input"),Fe=ae(),ut&&ut.c(),Le=ae(),de=re("main"),_e=re("div"),ve(ue.$$.fragment),Ee=ae(),ve(Xe.$$.fragment),this.h()},l(Te){be(r.$$.fragment,Te),t=le(Te),be(n.$$.fragment,Te),s=le(Te),be(l.$$.fragment,Te),u=le(Te),f=ne(Te,"DIV",{class:!0});var Be=ge(f);be(d.$$.fragment,Be),Be.forEach(m),h=le(Te),g=ne(Te,"BR",{}),N=le(Te),y=ne(Te,"DIV",{id:!0,class:!0});var tt=ge(y);b=ne(tt,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(b)!=="svelte-r4end6"&&(b.textContent=S),D=le(tt),A=ne(tt,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(A)!=="svelte-1s1l97g"&&(A.textContent=v),E=le(tt),w=ne(tt,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(w)!=="svelte-1o4uly3"&&(w.textContent=B),I=le(tt),L=ne(tt,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(L)!=="svelte-qm8vdx"&&(L.textContent=k),j=le(tt),O=ne(tt,"SELECT",{class:!0});var Rt=ge(O);R=ne(Rt,"OPTION",{"data-svelte-h":!0}),Me(R)!=="svelte-hmrlsb"&&(R.textContent=G),Q=ne(Rt,"OPTION",{"data-svelte-h":!0}),Me(Q)!=="svelte-1q30tr1"&&(Q.textContent=oe),ee=ne(Rt,"OPTION",{"data-svelte-h":!0}),Me(ee)!=="svelte-pf55hp"&&(ee.textContent=X),Rt.forEach(m),H=le(tt),V=ne(tt,"BUTTON",{class:!0,"data-svelte-h":!0}),Me(V)!=="svelte-mqt2ui"&&(V.textContent=W),M=q(tt,`
        filename:    `),J=ne(tt,"INPUT",{style:!0,type:!0}),Fe=le(tt),ut&&ut.l(tt),tt.forEach(m),Le=le(Te),de=ne(Te,"MAIN",{id:!0,class:!0});var Yt=ge(de);_e=ne(Yt,"DIV",{id:!0,class:!0});var nt=ge(_e);be(ue.$$.fragment,nt),Ee=le(nt),be(Xe.$$.fragment,nt),nt.forEach(m),Yt.forEach(m),this.h()},h(){se(f,"class","toolbar-examples"),se(b,"class","svelte-1sqgor0"),se(A,"class","svelte-1sqgor0"),se(w,"class","svelte-1sqgor0"),se(L,"class","svelte-1sqgor0"),R.__value="",Wn(R,R.__value),Q.__value="json",Wn(Q,Q.__value),ee.__value="turtle",Wn(ee,ee.__value),se(O,"class","save-as-dropdown svelte-1sqgor0"),i[6]===void 0&&Xs(()=>i[35].call(O)),se(V,"class"," svelte-1sqgor0"),Ge(J,"width","275px"),se(J,"type","text"),se(y,"id","toolbar"),se(y,"class","svelte-1sqgor0"),se(_e,"id","flow"),se(_e,"class","svelte-1sqgor0"),Xs(()=>i[37].call(_e)),se(de,"id","main"),se(de,"class","svelte-1sqgor0")},m(Te,Be){we(r,Te,Be),C(Te,t,Be),we(n,Te,Be),C(Te,s,Be),we(l,Te,Be),C(Te,u,Be),C(Te,f,Be),we(d,f,null),C(Te,h,Be),C(Te,g,Be),C(Te,N,Be),C(Te,y,Be),x(y,b),x(y,D),x(y,A),x(y,E),x(y,w),x(y,I),x(y,L),x(y,j),x(y,O),x(O,R),x(O,Q),x(O,ee),yl(O,i[6],!0),x(y,H),x(y,V),x(y,M),x(y,J),Wn(J,i[5]),x(y,Fe),ut&&ut.m(y,null),C(Te,Le,Be),C(Te,de,Be),x(de,_e),we(ue,_e,null),x(_e,Ee),we(Xe,_e,null),ct=y_(_e,i[37].bind(_e)),We=!0,he||(Ie=[pe(b,"click",i[20]),pe(A,"click",i[21]),pe(w,"click",i[26]),pe(L,"click",i[18]),pe(O,"change",i[35]),pe(O,"change",i[19]),pe(V,"click",i[29]),pe(J,"input",i[36])],he=!0)},p(Te,Be){const tt={};Be[0]&4&&(tt.title=Te[2].title),Be[0]&4&&(tt.content=Te[2].content),Be[0]&4&&(tt.options=Te[2].options),Be[0]&16|Be[1]&2097152&&(tt.$$scope={dirty:Be,ctx:Te}),!e&&Be[0]&4&&(e=!0,tt.is_open=Te[2].is_open,Xt(()=>e=!1)),r.$set(tt);const Rt={};Be[0]&8&&(Rt.title=Te[3].title),Be[0]&8&&(Rt.content=Te[3].content),Be[0]&8&&(Rt.options=Te[3].options),Be[1]&2097152&&(Rt.$$scope={dirty:Be,ctx:Te}),!a&&Be[0]&8&&(a=!0,Rt.is_open=Te[3].is_open,Xt(()=>a=!1)),n.$set(Rt);const Yt={};Be[0]&12288|Be[1]&2097152&&(Yt.$$scope={dirty:Be,ctx:Te}),!o&&Be[0]&2048&&(o=!0,Yt.is_open=Te[11],Xt(()=>o=!1)),l.$set(Yt);const nt={};!c&&Be[0]&128&&(c=!0,nt.selectedFile=Te[7],Xt(()=>c=!1)),d.$set(nt),Be[0]&64&&yl(O,Te[6]),Be[0]&32&&J.value!==Te[5]&&Wn(J,Te[5]),Te[14]?ut?(ut.p(Te,Be),Be[0]&16384&&Y(ut,1)):(ut=Hf(Te),ut.c(),Y(ut,1),ut.m(y,null)):ut&&(xe(),Z(ut,1,1,()=>{ut=null}),Ve());const Et={};Be[0]&256|Be[1]&2097152&&(Et.$$scope={dirty:Be,ctx:Te}),ue.$set(Et)},i(Te){We||(Y(r.$$.fragment,Te),Y(n.$$.fragment,Te),Y(l.$$.fragment,Te),Y(d.$$.fragment,Te),Y(ut),Y(ue.$$.fragment,Te),Y(Xe.$$.fragment,Te),We=!0)},o(Te){Z(r.$$.fragment,Te),Z(n.$$.fragment,Te),Z(l.$$.fragment,Te),Z(d.$$.fragment,Te),Z(ut),Z(ue.$$.fragment,Te),Z(Xe.$$.fragment,Te),We=!1},d(Te){Te&&(m(t),m(s),m(u),m(f),m(h),m(g),m(N),m(y),m(Le),m(de)),ye(r,Te),ye(n,Te),ye(l,Te),ye(d),ut&&ut.d(),ye(ue),ye(Xe),ct(),he=!1,st(Ie)}}}function cv(i){let r,e,t,n,a,s,l='D3FEND <span class="snakes">☤</span> <span class="CAD"><span style="color:#e62929;">C</span><span class="A svelte-1sqgor0" style="color:white;text-border:1px;">A</span><span style="color:blue;">D</span></span>',o,u,f="<i>Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios</i>",d,c,h,g,N,y,b;return r=new Q_({props:{title:"D3FEND CAD Tool",og_title:"D3FEND CAD Tool",og_description:"Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios",og_type:"app"}}),g=new os({props:{alert_type:"warning",$$slots:{default:[tv]},$$scope:{ctx:i}}}),y=new W2({props:{position:"right",$$slots:{default:[fv]},$$scope:{ctx:i}}}),{c(){ve(r.$$.fragment),e=ae(),t=re("div"),n=re("div"),a=re("div"),s=re("h1"),s.innerHTML=l,o=ae(),u=re("div"),u.innerHTML=f,d=ae(),c=re("br"),h=ae(),ve(g.$$.fragment),N=ae(),ve(y.$$.fragment),this.h()},l(S){be(r.$$.fragment,S),e=le(S),t=ne(S,"DIV",{class:!0});var D=ge(t);n=ne(D,"DIV",{style:!0});var A=ge(n);a=ne(A,"DIV",{style:!0});var v=ge(a);s=ne(v,"H1",{class:!0,"data-svelte-h":!0}),Me(s)!=="svelte-1hfeq8z"&&(s.innerHTML=l),o=le(v),u=ne(v,"DIV",{style:!0,"data-svelte-h":!0}),Me(u)!=="svelte-1adqejh"&&(u.innerHTML=f),d=le(v),c=ne(v,"BR",{}),h=le(v),be(g.$$.fragment,v),v.forEach(m),A.forEach(m),D.forEach(m),N=le(S),be(y.$$.fragment,S),this.h()},h(){se(s,"class","fancy-font svelte-1sqgor0"),Ge(u,"text-align","center"),Ge(u,"padding","0 px"),Ge(a,"text-align","center"),Ge(a,"flex-grow","1"),Ge(n,"display","flex"),Ge(n,"just-content","space-between"),Ge(n,"align-items","center"),se(t,"class","title-egg")},m(S,D){we(r,S,D),C(S,e,D),C(S,t,D),x(t,n),x(n,a),x(a,s),x(a,o),x(a,u),x(a,d),x(a,c),x(a,h),we(g,a,null),C(S,N,D),we(y,S,D),b=!0},p(S,D){const A={};D[1]&2097152&&(A.$$scope={dirty:D,ctx:S}),g.$set(A);const v={};D[0]&32764|D[1]&2097152&&(v.$$scope={dirty:D,ctx:S}),y.$set(v)},i(S){b||(Y(r.$$.fragment,S),Y(g.$$.fragment,S),Y(y.$$.fragment,S),b=!0)},o(S){Z(r.$$.fragment,S),Z(g.$$.fragment,S),Z(y.$$.fragment,S),b=!1},d(S){S&&(m(e),m(t),m(N)),ye(r,S),ye(g),ye(y,S)}}}function dv(i){console.log(i),console.log(i)}function hv(i,r,e){let t,n,a,s;Ye(i,E_,Ne=>e(39,t=Ne)),Ye(i,hi,Ne=>e(40,n=Ne)),Ye(i,Fn,Ne=>e(41,a=Ne)),Ye(i,Jt,Ne=>e(14,s=Ne));var l=this&&this.__awaiter||function(Ne,Ue,je,ze){function rt(jt){return jt instanceof je?jt:new je(function(Mt){Mt(jt)})}return new(je||(je=Promise))(function(jt,Mt){function ir(Be){try{Te(ze.next(Be))}catch(tt){Mt(tt)}}function ut(Be){try{Te(ze.throw(Be))}catch(tt){Mt(tt)}}function Te(Be){Be.done?jt(Be.value):rt(Be.value).then(ir,ut)}Te((ze=ze.apply(Ne,Ue||[])).next())})};let o={is_open:!1,title:"Confirmation to load remote model from URL",content:"This page is instructing D3FEND to remotely load a CAD model from this URL:",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},u={is_open:!1,title:"Confirmation to load remote model from compressed URL",content:"This page is instructing D3FEND to load a CAD model from this URL",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},f;t.url.searchParams.get("load")&&(f=t.url.searchParams.get("load"),o.is_open=!0),t.url.searchParams.get("loadg")&&(u.is_open=!0);function d(Ne){const Ue=Ne.detail;Ue.value==="load"?(Jt.add("loading remote URL"),I(f),Jt.clear()):Ue.value}function c(Ne){const Ue=Ne.detail;if(Ue.value==="load"){Jt.add("loading graph from URL");const je=t.url.searchParams.get("loadg"),ze=Il.uncrush(je);let rt=JSON.parse(ze);E(rt),Jt.clear()}else Ue.value}us(()=>{Jt.add("Mounting app...");try{Ta.initialize(),Jt.clear()}catch(Ne){console.error("Failed to initialize Oxigraph in +layout.svelte",Ne),Ne.message}});const h={artifactSelectorNode:Am,vulnerabilitySelectorNode:ym,attackSelectorNode:mm,countermeasureSelectorNode:Sm,informationSelectorNode:Im,conditionDefinitionNode:Bm,agentSelectorNode:jm,eventNode:Vm},g={editableEdge:Gm};let N={type:"editableEdge",data:{label:void 0},markerEnd:{type:Gf.ArrowClosed}},y="d3fend-cad.json",b="";function S(){const Ne=JSON.stringify({nodes:a,edges:n},null,4),Ue=new Blob([Ne],{type:"application/json"}),je=window.URL.createObjectURL(Ue),ze=document.createElement("a");ze.href=je,ze.download=y,document.body.appendChild(ze),ze.click(),document.body.removeChild(ze),window.URL.revokeObjectURL(je)}function D(){b==="json"?v():b==="turtle"&&A(),e(6,b="")}function A(){Jt.add("generating ttl file"),console.log("!!! Turtle export engaged !!!"),n1().then(Ne=>{Jt.clear();const Ue=new Blob([Ne],{type:"text/turtle"}),je=window.URL.createObjectURL(Ue),ze=document.createElement("a");ze.href=je;let rt=prompt("Enter filename to save as Turtle file",y.replace("json","ttl"));rt&&(ze.download=rt,document.body.appendChild(ze),ze.click(),document.body.removeChild(ze)),window.URL.revokeObjectURL(je)}).catch(Ne=>{console.error("Error serializing graph to Turtle: ",Ne)})}function v(){const Ne=JSON.stringify({nodes:a,edges:n},null,4),Ue=new Blob([Ne],{type:"application/json"}),je=window.URL.createObjectURL(Ue),ze=document.createElement("a");ze.href=je;let rt=prompt("Enter filename to save as JSON file",y);e(5,y=rt),rt&&(ze.download=rt,document.body.appendChild(ze),ze.click(),document.body.removeChild(ze)),window.URL.revokeObjectURL(je)}function E(Ne){try{const Ue=Ne.nodes,je=Ne.edges;Jt.add("loading graph from data..."),Zi(Ue,je),Jt.clear()}catch(Ue){console.error("Error parsing JSON:",Ue)}}function w(Ne){const Ue=Ne.target.files[0];if(Ue){const je=new FileReader;je.onload=ze=>{if(typeof ze.target.result=="string"){console.log(ze.target.result);try{const rt=JSON.parse(ze.target.result),jt=rt.nodes,Mt=rt.edges;Zi(jt,Mt)}catch(rt){console.error("Error parsing JSON:",rt)}}else console.error("File content is not a string.")},je.onerror=()=>{console.error("Error reading file:",je.error)},je.readAsText(Ue)}}function B(Ne){const Ue=Ne.target.files[0];if(Ue){const je=new FileReader;je.onload=ze=>{if(typeof ze.target.result=="string"){console.log(ze.target.result);try{const rt=JSON.parse(ze.target.result);Fn.set([...a,...rt.nodes]),hi.set([...n,...rt.edges]),alert(` added ${rt.nodes.length} nodes and ${rt.edges.length} edges to the current graph `)}catch(rt){console.error("Error parsing JSON:",rt),alert(`Error parsing JSON:", ${rt}`)}}else console.error("File content is not a string."),alert("File content is not a string.")},je.onerror=()=>{console.error("Error reading file:",je.error),alert(`Error reading file: ${je.error}`)},je.readAsText(Ue)}}function I(Ne){return l(this,void 0,void 0,function*(){if(Ne)try{const je=yield(yield fetch(Ne)).json(),ze=je.nodes,rt=je.edges;Zi(ze,rt)}catch(Ue){console.error("Error parsing JSON:",Ue)}})}function L(){const Ne=document.createElement("input");Ne.type="file",Ne.accept=".json",Ne.onchange=Ue=>{w(Ue)},Ne.click()}function k(){const Ne=document.createElement("input");Ne.type="file",Ne.accept=".json",Ne.onchange=Ue=>{B(Ue)},Ne.click()}const{screenToFlowPosition:j}=fp(),O=Ne=>{Ne.preventDefault(),Ne.dataTransfer&&(Ne.dataTransfer.dropEffect="move")},R=Ne=>console.log("handle onConnect",Ne),G=Ne=>{if(Ne.preventDefault(),!Ne.dataTransfer)return null;const Ue=Ne.dataTransfer.getData("application/svelteflow"),je=j({x:Ne.clientX,y:Ne.clientY}),ze={id:`${Math.random()}`,type:Ue,position:je,data:{label:null,sequence:"0"},origin:[.5,0]};a.push(ze),Fn.set(a)};function Q(Ne){return l(this,void 0,void 0,function*(){const Ue=Ne.detail;try{const je=yield fetch(`/resources/cad/examples/${Ue}`);if(!je.ok)throw new Error(`HTTP error! status: ${je.status}`);const ze=yield je.json();console.log("Selected file contents:",ze),E(ze)}catch(je){console.error("Error fetching JSON file:",je)}})}let oe;function ee(){t1(),e(7,oe="Example Graphs")}let X,H,V;function W({detail:{event:Ne,node:Ue}}){Ne.preventDefault();let je=50;e(8,X={id:Ue.id,top:Ne.clientY<V-je?Ne.clientY:void 0,left:Ne.clientX<H-je?Ne.clientX:void 0,right:Ne.clientX>=H-je?H-Ne.clientX:void 0,bottom:Ne.clientY>=V-je?V-Ne.clientY:void 0})}function M(){e(8,X=null)}let J=!1,Fe,Le;function de(){Jt.add("compressing graph to string..."),e(11,J=!0);const Ne=Il.crush(JSON.stringify({nodes:a,edges:n}));e(12,Fe=encodeURIComponent(Ne)),e(13,Le=t.url.origin+`/cad/?loadg=${Fe}`),Jt.clear()}function _e(Ne){i.$$.not_equal(o.is_open,Ne)&&(o.is_open=Ne,e(2,o))}function ue(Ne){i.$$.not_equal(u.is_open,Ne)&&(u.is_open=Ne,e(3,u))}const Ee=()=>C_(Le);function Xe(Ne){J=Ne,e(11,J)}function ct(Ne){oe=Ne,e(7,oe)}function We(){b=k_(this),e(6,b)}function he(){y=this.value,e(5,y)}function Ie(){H=this.clientWidth,V=this.clientHeight,e(9,H),e(10,V)}return[h,g,o,u,f,y,b,oe,X,H,V,J,Fe,Le,s,d,c,N,S,D,L,k,O,R,G,Q,ee,W,M,de,_e,ue,Ee,Xe,ct,We,he,Ie]}class _v extends Ke{constructor(r){super(),et(this,r,hv,cv,qe,{nodeTypes:0,edgeTypes:1},null,[-1,-1])}get nodeTypes(){return this.$$.ctx[0]}get edgeTypes(){return this.$$.ctx[1]}}function pv(i){let r,e;return r=new _v({}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function gv(i){let r,e;return r=new sp({props:{$$slots:{default:[pv]},$$scope:{ctx:i}}}),{c(){ve(r.$$.fragment)},l(t){be(r.$$.fragment,t)},m(t,n){we(r,t,n),e=!0},p(t,[n]){const a={};n&4&&(a.$$scope={dirty:n,ctx:t}),r.$set(a)},i(t){e||(Y(r.$$.fragment,t),e=!0)},o(t){Z(r.$$.fragment,t),e=!1},d(t){ye(r,t)}}}function mv(i,r,e){let t,{data:n}=r;return i.$$set=a=>{"data"in a&&e(0,n=a.data)},i.$$.update=()=>{i.$$.dirty&1&&e(1,t=n.remote_d3fend_tree?n.remote_d3fend_tree.map(a=>({...a,children:oa(a.children,a["rdfs:label"])})):[]),i.$$.dirty&3&&(Yf.set(t),Zf.set(n.attack),Jf.set(n.dao),Kf.set(n.events),ec.set(n.weaknesses),tc.set(n.properties))},[n,t]}class Hv extends Ke{constructor(r){super(),et(this,r,mv,gv,qe,{data:0})}}export{Hv as component,qv as universal};

import{g as cl,b as dl,a as vn,f as mn,c as pn,u as qt,d as zt,h as gn,i as hl,j as kt,F as bn,n as En,e as Pn,P as wn,S as kn,k as yn,l as Sn,m as Dn,o as Cn,w as Nn,p as Rn,q as In}from"../chunks/PropertyPanel.BPIgUk3I.js";import{s as _l}from"../chunks/sortBy.ChsTRid8.js";import{as as Be,s as st,c as it,e as B,t as k,b as W,d as M,f as pe,h as y,j as x,i,x as Z,k as v,l as L,p as ge,a4 as Ct,ar as Mt,u as ft,g as ut,a as ct,m as J,A as mt,o as et,W as Nt,L as Ze,n as Se,y as we,v as Ee,P as We,V as bt,G as Xe,r as rr,Y as or,I as dr,q as Kr,M as vl,N as ml,R as at,a2 as Ts,ap as pl,aq as On,ak as Tn}from"../chunks/scheduler.DDVliNtX.js";import{S as nt,i as ot,g as pt,a as ve,e as gt,t as de,c as Te,b as Ae,m as Fe,d as Le,f as Et}from"../chunks/index.iWffroUJ.js";import{e as Oe}from"../chunks/each.BFyodu2L.js";import{c as An,a as Fn}from"../chunks/_commonjsHelpers.C4iS2aBk.js";import{c as Ln,s as Ar}from"../chunks/schema.CHP6_69y.js";import{p as jn}from"../chunks/stores.ZQnSlIV2.js";import{g as qn}from"../chunks/entry.B_AcPQ9S.js";import{A as Dr}from"../chunks/Alert.BsS8d9Dv.js";import{T as Xt,b as he,a as As,G as gr,m as zn,d as br,o as Un}from"../chunks/lib.DSnscA8f.js";/* empty css                     */import{j as Vn,u as Bn,l as Mn,m as gl,n as bl,o as El,p as $n,q as Hn,r as Qn,s as Gn,t as Kn,i as Pl,M as Jn,S as Yn,B as Xn,a as Zn,b as Wn}from"../chunks/style.CoMyASxi.js";import{d as Fs,e as zr,n as mr,m as nr,o as xn,i as Fr,c as eo,s as wl,a as to,b as ro}from"../chunks/graphStore.JDmpKD3W.js";import{G as $t}from"../chunks/_Graph.CGXTKsEb.js";import{t as Er,T as Ls}from"../chunks/ToggleBar.Dt3UQwWP.js";import{J as kl}from"../chunks/JSONCrush.BlUS0oeb.js";import{T as lo}from"../chunks/Title.geje0d_0.js";import{L as ao}from"../chunks/Loading.CSl94oYn.js";import{C as so}from"../chunks/Controls.CAcLyyHp.js";async function no({fetch:a}){const e=["/api/offensive-technique/all.json","/api/dao/artifacts.json","/api/taxonomies/d3f:DigitalEvent.json","/api/weakness/all.json","/api/ontology/properties/object/all.json","/api/dao/artifact/d3f:DigitalInformation.json"],[{value:{["@graph"]:r}},{value:{["@graph"]:l}},{value:{["@graph"]:t}},{value:{["@graph"]:s}},{value:{["@graph"]:n}},{value:{da_graph:{["@graph"]:o}}}]=await Promise.allSettled(e.map(E=>a(E).then(b=>b.json()))),f=_l(cl(r,"rdfs:label"),E=>E["rdfs:label"]),d=dl(l,"d3f:DigitalArtifact"),m=vn(t,"d3f:DigitalEvent").map(E=>({...E,children:cl(mn(E.children,E["rdfs:label"]),"rdfs:label")})),_=_l(s,E=>E["rdfs:label"]),c=pn(n),u=dl(o,"d3f:DigitalInformation");return{attack:f,dao:d,events:m,weaknesses:_,properties:c,digital_information:u}}const Fd=Object.freeze(Object.defineProperty({__proto__:null,load:no},Symbol.toStringTag,{value:"Module"})),yl=a=>Vn(a);function oo(){const{zoomIn:a,zoomOut:e,fitView:r,onbeforedelete:l,snapGrid:t,viewport:s,width:n,height:o,minZoom:f,maxZoom:d,panZoom:h,nodes:m,edges:_,domNode:c,nodeLookup:u,nodeOrigin:E,edgeLookup:b,connectionLookup:P}=Bn(),I=p=>{var T,g;const R=Be(u),C=yl(p)?p:R.get(p.id),F=C.parentId?Gn(C.position,C.measured,C.parentId,R,Be(E)):C.position,N={id:C.id,position:F,width:((T=C.measured)==null?void 0:T.width)??C.width,height:((g=C.measured)==null?void 0:g.height)??C.height,data:C.data};return bl(N)},D=(p,R,C={replace:!1})=>{var T;const F=(T=Be(u).get(p))==null?void 0:T.internals.userNode;if(!F)return;const N=typeof R=="function"?R(F):R;C.replace?m.update(g=>g.map(O=>O.id===p?yl(N)?N:{...O,...N}:O)):(Object.assign(F,N),m.update(g=>g))},S=p=>Be(u).get(p);return{zoomIn:a,zoomOut:e,getInternalNode:S,getNode:p=>{var R;return(R=S(p))==null?void 0:R.internals.userNode},getNodes:p=>p===void 0?Be(m):Sl(Be(u),p),getEdge:p=>Be(b).get(p),getEdges:p=>p===void 0?Be(_):Sl(Be(b),p),setZoom:(p,R)=>{const C=Be(h);return C?C.scaleTo(p,{duration:R==null?void 0:R.duration}):Promise.resolve(!1)},getZoom:()=>Be(s).zoom,setViewport:async(p,R)=>{const C=Be(s),F=Be(h);return F?(await F.setViewport({x:p.x??C.x,y:p.y??C.y,zoom:p.zoom??C.zoom},{duration:R==null?void 0:R.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>Be(s),setCenter:async(p,R,C)=>{const F=typeof(C==null?void 0:C.zoom)<"u"?C.zoom:Be(d),N=Be(h);return N?(await N.setViewport({x:Be(n)/2-p*F,y:Be(o)/2-R*F,zoom:F},{duration:C==null?void 0:C.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:r,fitBounds:async(p,R)=>{const C=Be(h);if(!C)return Promise.resolve(!1);const F=Mn(p,Be(n),Be(o),Be(f),Be(d),(R==null?void 0:R.padding)??.1);return await C.setViewport(F,{duration:R==null?void 0:R.duration}),Promise.resolve(!0)},getIntersectingNodes:(p,R=!0,C)=>{const F=gl(p),N=F?p:I(p);return N?(C||Be(m)).filter(T=>{const g=Be(u).get(T.id);if(!g||!F&&T.id===p.id)return!1;const O=bl(g),w=El(O,N);return R&&w>0||w>=N.width*N.height}):[]},isNodeIntersecting:(p,R,C=!0)=>{const N=gl(p)?p:I(p);if(!N)return!1;const T=El(N,R);return C&&T>0||T>=N.width*N.height},deleteElements:async({nodes:p=[],edges:R=[]})=>{const{nodes:C,edges:F}=await $n({nodesToRemove:p,edgesToRemove:R,nodes:Be(m),edges:Be(_),onBeforeDelete:Be(l)});return C&&m.update(N=>N.filter(T=>!C.some(({id:g})=>g===T.id))),F&&_.update(N=>N.filter(T=>!F.some(({id:g})=>g===T.id))),{deletedNodes:C,deletedEdges:F}},screenToFlowPosition:(p,R={snapToGrid:!0})=>{const C=Be(c);if(!C)return p;const F=R.snapToGrid?Be(t):!1,{x:N,y:T,zoom:g}=Be(s),{x:O,y:w}=C.getBoundingClientRect(),A={x:p.x-O,y:p.y-w};return Hn(A,[N,T,g],F!==null,F||[1,1])},flowToScreenPosition:p=>{const R=Be(c);if(!R)return p;const{x:C,y:F,zoom:N}=Be(s),{x:T,y:g}=R.getBoundingClientRect(),O=Kn(p,[C,F,N]);return{x:O.x+T,y:O.y+g}},toObject:()=>({nodes:Be(m).map(p=>({...p,position:{...p.position},data:{...p.data}})),edges:Be(_).map(p=>({...p})),viewport:{...Be(s)}}),updateNode:D,updateNodeData:(p,R,C)=>{var T;const F=(T=Be(u).get(p))==null?void 0:T.internals.userNode;if(!F)return;const N=typeof R=="function"?R(F):R;F.data=C!=null&&C.replace?N:{...F.data,...N},m.update(g=>g)},getNodesBounds:p=>{const R=Be(u),C=Be(E);return Qn(p,{nodeLookup:R,nodeOrigin:C})},getHandleConnections:({type:p,id:R,nodeId:C})=>{var F;return Array.from(((F=Be(P).get(`${C}-${p}-${R??null}`))==null?void 0:F.values())??[])},viewport:s}}function Sl(a,e){var l;const r=[];for(const t of e){const s=a.get(t);if(s){const n="internals"in s?(l=s.internals)==null?void 0:l.userNode:s;r.push(n)}}return r}var Ur={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(a,e){(function(r,l){l(e)})(An,function(r){function l(){for(var $=arguments.length,U=Array($),G=0;G<$;G++)U[G]=arguments[G];if(U.length>1){U[0]=U[0].slice(0,-1);for(var oe=U.length-1,ae=1;ae<oe;++ae)U[ae]=U[ae].slice(1,-1);return U[oe]=U[oe].slice(1),U.join("")}else return U[0]}function t($){return"(?:"+$+")"}function s($){return $===void 0?"undefined":$===null?"null":Object.prototype.toString.call($).split(" ").pop().split("]").shift().toLowerCase()}function n($){return $.toUpperCase()}function o($){return $!=null?$ instanceof Array?$:typeof $.length!="number"||$.split||$.setInterval||$.call?[$]:Array.prototype.slice.call($):[]}function f($,U){var G=$;if(U)for(var oe in U)G[oe]=U[oe];return G}function d($){var U="[A-Za-z]",G="[0-9]",oe=l(G,"[A-Fa-f]"),ae=t(t("%[EFef]"+oe+"%"+oe+oe+"%"+oe+oe)+"|"+t("%[89A-Fa-f]"+oe+"%"+oe+oe)+"|"+t("%"+oe+oe)),Re="[\\:\\/\\?\\#\\[\\]\\@]",Ie="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",He=l(Re,Ie),tt=$?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",ht=$?"[\\uE000-\\uF8FF]":"[]",Me=l(U,G,"[\\-\\.\\_\\~]",tt);t(U+l(U,G,"[\\+\\-\\.]")+"*"),t(t(ae+"|"+l(Me,Ie,"[\\:]"))+"*");var xe=t(t("25[0-5]")+"|"+t("2[0-4]"+G)+"|"+t("1"+G+G)+"|"+t("0?[1-9]"+G)+"|0?0?"+G),_t=t(xe+"\\."+xe+"\\."+xe+"\\."+xe),qe=t(oe+"{1,4}"),rt=t(t(qe+"\\:"+qe)+"|"+_t),vt=t(t(qe+"\\:")+"{6}"+rt),lt=t("\\:\\:"+t(qe+"\\:")+"{5}"+rt),Kt=t(t(qe)+"?\\:\\:"+t(qe+"\\:")+"{4}"+rt),Ft=t(t(t(qe+"\\:")+"{0,1}"+qe)+"?\\:\\:"+t(qe+"\\:")+"{3}"+rt),Lt=t(t(t(qe+"\\:")+"{0,2}"+qe)+"?\\:\\:"+t(qe+"\\:")+"{2}"+rt),tr=t(t(t(qe+"\\:")+"{0,3}"+qe)+"?\\:\\:"+qe+"\\:"+rt),Wt=t(t(t(qe+"\\:")+"{0,4}"+qe)+"?\\:\\:"+rt),Ot=t(t(t(qe+"\\:")+"{0,5}"+qe)+"?\\:\\:"+qe),jt=t(t(t(qe+"\\:")+"{0,6}"+qe)+"?\\:\\:"),xt=t([vt,lt,Kt,Ft,Lt,tr,Wt,Ot,jt].join("|")),Bt=t(t(Me+"|"+ae)+"+");t("[vV]"+oe+"+\\."+l(Me,Ie,"[\\:]")+"+"),t(t(ae+"|"+l(Me,Ie))+"*");var ar=t(ae+"|"+l(Me,Ie,"[\\:\\@]"));return t(t(ae+"|"+l(Me,Ie,"[\\@]"))+"+"),t(t(ar+"|"+l("[\\/\\?]",ht))+"*"),{NOT_SCHEME:new RegExp(l("[^]",U,G,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(l("[^\\%\\:]",Me,Ie),"g"),NOT_HOST:new RegExp(l("[^\\%\\[\\]\\:]",Me,Ie),"g"),NOT_PATH:new RegExp(l("[^\\%\\/\\:\\@]",Me,Ie),"g"),NOT_PATH_NOSCHEME:new RegExp(l("[^\\%\\/\\@]",Me,Ie),"g"),NOT_QUERY:new RegExp(l("[^\\%]",Me,Ie,"[\\:\\@\\/\\?]",ht),"g"),NOT_FRAGMENT:new RegExp(l("[^\\%]",Me,Ie,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(l("[^]",Me,Ie),"g"),UNRESERVED:new RegExp(Me,"g"),OTHER_CHARS:new RegExp(l("[^\\%]",Me,He),"g"),PCT_ENCODED:new RegExp(ae,"g"),IPV4ADDRESS:new RegExp("^("+_t+")$"),IPV6ADDRESS:new RegExp("^\\[?("+xt+")"+t(t("\\%25|\\%(?!"+oe+"{2})")+"("+Bt+")")+"?\\]?$")}}var h=d(!1),m=d(!0),_=function(){function $(U,G){var oe=[],ae=!0,Re=!1,Ie=void 0;try{for(var He=U[Symbol.iterator](),tt;!(ae=(tt=He.next()).done)&&(oe.push(tt.value),!(G&&oe.length===G));ae=!0);}catch(ht){Re=!0,Ie=ht}finally{try{!ae&&He.return&&He.return()}finally{if(Re)throw Ie}}return oe}return function(U,G){if(Array.isArray(U))return U;if(Symbol.iterator in Object(U))return $(U,G);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function($){if(Array.isArray($)){for(var U=0,G=Array($.length);U<$.length;U++)G[U]=$[U];return G}else return Array.from($)},u=2147483647,E=36,b=1,P=26,I=38,D=700,S=72,p=128,R="-",C=/^xn--/,F=/[^\0-\x7E]/,N=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=E-b,O=Math.floor,w=String.fromCharCode;function A($){throw new RangeError(T[$])}function X($,U){for(var G=[],oe=$.length;oe--;)G[oe]=U($[oe]);return G}function ie($,U){var G=$.split("@"),oe="";G.length>1&&(oe=G[0]+"@",$=G[1]),$=$.replace(N,".");var ae=$.split("."),Re=X(ae,U).join(".");return oe+Re}function re($){for(var U=[],G=0,oe=$.length;G<oe;){var ae=$.charCodeAt(G++);if(ae>=55296&&ae<=56319&&G<oe){var Re=$.charCodeAt(G++);(Re&64512)==56320?U.push(((ae&1023)<<10)+(Re&1023)+65536):(U.push(ae),G--)}else U.push(ae)}return U}var Q=function(U){return String.fromCodePoint.apply(String,c(U))},H=function(U){return U-48<10?U-22:U-65<26?U-65:U-97<26?U-97:E},V=function(U,G){return U+22+75*(U<26)-((G!=0)<<5)},z=function(U,G,oe){var ae=0;for(U=oe?O(U/D):U>>1,U+=O(U/G);U>g*P>>1;ae+=E)U=O(U/g);return O(ae+(g+1)*U/(U+I))},Y=function(U){var G=[],oe=U.length,ae=0,Re=p,Ie=S,He=U.lastIndexOf(R);He<0&&(He=0);for(var tt=0;tt<He;++tt)U.charCodeAt(tt)>=128&&A("not-basic"),G.push(U.charCodeAt(tt));for(var ht=He>0?He+1:0;ht<oe;){for(var Me=ae,xe=1,_t=E;;_t+=E){ht>=oe&&A("invalid-input");var qe=H(U.charCodeAt(ht++));(qe>=E||qe>O((u-ae)/xe))&&A("overflow"),ae+=qe*xe;var rt=_t<=Ie?b:_t>=Ie+P?P:_t-Ie;if(qe<rt)break;var vt=E-rt;xe>O(u/vt)&&A("overflow"),xe*=vt}var lt=G.length+1;Ie=z(ae-Me,lt,Me==0),O(ae/lt)>u-Re&&A("overflow"),Re+=O(ae/lt),ae%=lt,G.splice(ae++,0,Re)}return String.fromCodePoint.apply(String,G)},j=function(U){var G=[];U=re(U);var oe=U.length,ae=p,Re=0,Ie=S,He=!0,tt=!1,ht=void 0;try{for(var Me=U[Symbol.iterator](),xe;!(He=(xe=Me.next()).done);He=!0){var _t=xe.value;_t<128&&G.push(w(_t))}}catch(sr){tt=!0,ht=sr}finally{try{!He&&Me.return&&Me.return()}finally{if(tt)throw ht}}var qe=G.length,rt=qe;for(qe&&G.push(R);rt<oe;){var vt=u,lt=!0,Kt=!1,Ft=void 0;try{for(var Lt=U[Symbol.iterator](),tr;!(lt=(tr=Lt.next()).done);lt=!0){var Wt=tr.value;Wt>=ae&&Wt<vt&&(vt=Wt)}}catch(sr){Kt=!0,Ft=sr}finally{try{!lt&&Lt.return&&Lt.return()}finally{if(Kt)throw Ft}}var Ot=rt+1;vt-ae>O((u-Re)/Ot)&&A("overflow"),Re+=(vt-ae)*Ot,ae=vt;var jt=!0,xt=!1,Bt=void 0;try{for(var ar=U[Symbol.iterator](),ol;!(jt=(ol=ar.next()).done);jt=!0){var il=ol.value;if(il<ae&&++Re>u&&A("overflow"),il==ae){for(var fr=Re,ur=E;;ur+=E){var cr=ur<=Ie?b:ur>=Ie+P?P:ur-Ie;if(fr<cr)break;var fl=fr-cr,ul=E-cr;G.push(w(V(cr+fl%ul,0))),fr=O(fl/ul)}G.push(w(V(fr,0))),Ie=z(Re,Ot,rt==qe),Re=0,++rt}}}catch(sr){xt=!0,Bt=sr}finally{try{!jt&&ar.return&&ar.return()}finally{if(xt)throw Bt}}++Re,++ae}return G.join("")},K=function(U){return ie(U,function(G){return C.test(G)?Y(G.slice(4).toLowerCase()):G})},Ce=function(U){return ie(U,function(G){return F.test(G)?"xn--"+j(G):G})},ke={version:"2.1.0",ucs2:{decode:re,encode:Q},decode:Y,encode:j,toASCII:Ce,toUnicode:K},le={};function me($){var U=$.charCodeAt(0),G=void 0;return U<16?G="%0"+U.toString(16).toUpperCase():U<128?G="%"+U.toString(16).toUpperCase():U<2048?G="%"+(U>>6|192).toString(16).toUpperCase()+"%"+(U&63|128).toString(16).toUpperCase():G="%"+(U>>12|224).toString(16).toUpperCase()+"%"+(U>>6&63|128).toString(16).toUpperCase()+"%"+(U&63|128).toString(16).toUpperCase(),G}function ce($){for(var U="",G=0,oe=$.length;G<oe;){var ae=parseInt($.substr(G+1,2),16);if(ae<128)U+=String.fromCharCode(ae),G+=3;else if(ae>=194&&ae<224){if(oe-G>=6){var Re=parseInt($.substr(G+4,2),16);U+=String.fromCharCode((ae&31)<<6|Re&63)}else U+=$.substr(G,6);G+=6}else if(ae>=224){if(oe-G>=9){var Ie=parseInt($.substr(G+4,2),16),He=parseInt($.substr(G+7,2),16);U+=String.fromCharCode((ae&15)<<12|(Ie&63)<<6|He&63)}else U+=$.substr(G,9);G+=9}else U+=$.substr(G,3),G+=3}return U}function _e($,U){function G(oe){var ae=ce(oe);return ae.match(U.UNRESERVED)?ae:oe}return $.scheme&&($.scheme=String($.scheme).replace(U.PCT_ENCODED,G).toLowerCase().replace(U.NOT_SCHEME,"")),$.userinfo!==void 0&&($.userinfo=String($.userinfo).replace(U.PCT_ENCODED,G).replace(U.NOT_USERINFO,me).replace(U.PCT_ENCODED,n)),$.host!==void 0&&($.host=String($.host).replace(U.PCT_ENCODED,G).toLowerCase().replace(U.NOT_HOST,me).replace(U.PCT_ENCODED,n)),$.path!==void 0&&($.path=String($.path).replace(U.PCT_ENCODED,G).replace($.scheme?U.NOT_PATH:U.NOT_PATH_NOSCHEME,me).replace(U.PCT_ENCODED,n)),$.query!==void 0&&($.query=String($.query).replace(U.PCT_ENCODED,G).replace(U.NOT_QUERY,me).replace(U.PCT_ENCODED,n)),$.fragment!==void 0&&($.fragment=String($.fragment).replace(U.PCT_ENCODED,G).replace(U.NOT_FRAGMENT,me).replace(U.PCT_ENCODED,n)),$}function De($){return $.replace(/^0*(.*)/,"$1")||"0"}function je($,U){var G=$.match(U.IPV4ADDRESS)||[],oe=_(G,2),ae=oe[1];return ae?ae.split(".").map(De).join("."):$}function ee($,U){var G=$.match(U.IPV6ADDRESS)||[],oe=_(G,3),ae=oe[1],Re=oe[2];if(ae){for(var Ie=ae.toLowerCase().split("::").reverse(),He=_(Ie,2),tt=He[0],ht=He[1],Me=ht?ht.split(":").map(De):[],xe=tt.split(":").map(De),_t=U.IPV4ADDRESS.test(xe[xe.length-1]),qe=_t?7:8,rt=xe.length-qe,vt=Array(qe),lt=0;lt<qe;++lt)vt[lt]=Me[lt]||xe[rt+lt]||"";_t&&(vt[qe-1]=je(vt[qe-1],U));var Kt=vt.reduce(function(Ot,jt,xt){if(!jt||jt==="0"){var Bt=Ot[Ot.length-1];Bt&&Bt.index+Bt.length===xt?Bt.length++:Ot.push({index:xt,length:1})}return Ot},[]),Ft=Kt.sort(function(Ot,jt){return jt.length-Ot.length})[0],Lt=void 0;if(Ft&&Ft.length>1){var tr=vt.slice(0,Ft.index),Wt=vt.slice(Ft.index+Ft.length);Lt=tr.join(":")+"::"+Wt.join(":")}else Lt=vt.join(":");return Re&&(Lt+="%"+Re),Lt}else return $}var q=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,se="".match(/(){0}/)[1]===void 0;function Ue($){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},G={},oe=U.iri!==!1?m:h;U.reference==="suffix"&&($=(U.scheme?U.scheme+":":"")+"//"+$);var ae=$.match(q);if(ae){se?(G.scheme=ae[1],G.userinfo=ae[3],G.host=ae[4],G.port=parseInt(ae[5],10),G.path=ae[6]||"",G.query=ae[7],G.fragment=ae[8],isNaN(G.port)&&(G.port=ae[5])):(G.scheme=ae[1]||void 0,G.userinfo=$.indexOf("@")!==-1?ae[3]:void 0,G.host=$.indexOf("//")!==-1?ae[4]:void 0,G.port=parseInt(ae[5],10),G.path=ae[6]||"",G.query=$.indexOf("?")!==-1?ae[7]:void 0,G.fragment=$.indexOf("#")!==-1?ae[8]:void 0,isNaN(G.port)&&(G.port=$.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?ae[4]:void 0)),G.host&&(G.host=ee(je(G.host,oe),oe)),G.scheme===void 0&&G.userinfo===void 0&&G.host===void 0&&G.port===void 0&&!G.path&&G.query===void 0?G.reference="same-document":G.scheme===void 0?G.reference="relative":G.fragment===void 0?G.reference="absolute":G.reference="uri",U.reference&&U.reference!=="suffix"&&U.reference!==G.reference&&(G.error=G.error||"URI is not a "+U.reference+" reference.");var Re=le[(U.scheme||G.scheme||"").toLowerCase()];if(!U.unicodeSupport&&(!Re||!Re.unicodeSupport)){if(G.host&&(U.domainHost||Re&&Re.domainHost))try{G.host=ke.toASCII(G.host.replace(oe.PCT_ENCODED,ce).toLowerCase())}catch(Ie){G.error=G.error||"Host's domain name can not be converted to ASCII via punycode: "+Ie}_e(G,h)}else _e(G,oe);Re&&Re.parse&&Re.parse(G,U)}else G.error=G.error||"URI can not be parsed.";return G}function Ve($,U){var G=U.iri!==!1?m:h,oe=[];return $.userinfo!==void 0&&(oe.push($.userinfo),oe.push("@")),$.host!==void 0&&oe.push(ee(je(String($.host),G),G).replace(G.IPV6ADDRESS,function(ae,Re,Ie){return"["+Re+(Ie?"%25"+Ie:"")+"]"})),(typeof $.port=="number"||typeof $.port=="string")&&(oe.push(":"),oe.push(String($.port))),oe.length?oe.join(""):void 0}var Qe=/^\.\.?\//,ze=/^\/\.(\/|$)/,Ke=/^\/\.\.(\/|$)/,Rt=/^\/?(?:.|\n)*?(?=\/|$)/;function Je($){for(var U=[];$.length;)if($.match(Qe))$=$.replace(Qe,"");else if($.match(ze))$=$.replace(ze,"/");else if($.match(Ke))$=$.replace(Ke,"/"),U.pop();else if($==="."||$==="..")$="";else{var G=$.match(Rt);if(G){var oe=G[0];$=$.slice(oe.length),U.push(oe)}else throw new Error("Unexpected dot segment condition")}return U.join("")}function Ge($){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},G=U.iri?m:h,oe=[],ae=le[(U.scheme||$.scheme||"").toLowerCase()];if(ae&&ae.serialize&&ae.serialize($,U),$.host&&!G.IPV6ADDRESS.test($.host)){if(U.domainHost||ae&&ae.domainHost)try{$.host=U.iri?ke.toUnicode($.host):ke.toASCII($.host.replace(G.PCT_ENCODED,ce).toLowerCase())}catch(He){$.error=$.error||"Host's domain name can not be converted to "+(U.iri?"Unicode":"ASCII")+" via punycode: "+He}}_e($,G),U.reference!=="suffix"&&$.scheme&&(oe.push($.scheme),oe.push(":"));var Re=Ve($,U);if(Re!==void 0&&(U.reference!=="suffix"&&oe.push("//"),oe.push(Re),$.path&&$.path.charAt(0)!=="/"&&oe.push("/")),$.path!==void 0){var Ie=$.path;!U.absolutePath&&(!ae||!ae.absolutePath)&&(Ie=Je(Ie)),Re===void 0&&(Ie=Ie.replace(/^\/\//,"/%2F")),oe.push(Ie)}return $.query!==void 0&&(oe.push("?"),oe.push($.query)),$.fragment!==void 0&&(oe.push("#"),oe.push($.fragment)),oe.join("")}function Ye($,U){var G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},oe=arguments[3],ae={};return oe||($=Ue(Ge($,G),G),U=Ue(Ge(U,G),G)),G=G||{},!G.tolerant&&U.scheme?(ae.scheme=U.scheme,ae.userinfo=U.userinfo,ae.host=U.host,ae.port=U.port,ae.path=Je(U.path||""),ae.query=U.query):(U.userinfo!==void 0||U.host!==void 0||U.port!==void 0?(ae.userinfo=U.userinfo,ae.host=U.host,ae.port=U.port,ae.path=Je(U.path||""),ae.query=U.query):(U.path?(U.path.charAt(0)==="/"?ae.path=Je(U.path):(($.userinfo!==void 0||$.host!==void 0||$.port!==void 0)&&!$.path?ae.path="/"+U.path:$.path?ae.path=$.path.slice(0,$.path.lastIndexOf("/")+1)+U.path:ae.path=U.path,ae.path=Je(ae.path)),ae.query=U.query):(ae.path=$.path,U.query!==void 0?ae.query=U.query:ae.query=$.query),ae.userinfo=$.userinfo,ae.host=$.host,ae.port=$.port),ae.scheme=$.scheme),ae.fragment=U.fragment,ae}function Pt($,U,G){var oe=f({scheme:"null"},G);return Ge(Ye(Ue($,oe),Ue(U,oe),oe,!0),oe)}function Tt($,U){return typeof $=="string"?$=Ge(Ue($,U),U):s($)==="object"&&($=Ue(Ge($,U),U)),$}function At($,U,G){return typeof $=="string"?$=Ge(Ue($,G),G):s($)==="object"&&($=Ge($,G)),typeof U=="string"?U=Ge(Ue(U,G),G):s(U)==="object"&&(U=Ge(U,G)),$===U}function Ut($,U){return $&&$.toString().replace(!U||!U.iri?h.ESCAPE:m.ESCAPE,me)}function $e($,U){return $&&$.toString().replace(!U||!U.iri?h.PCT_ENCODED:m.PCT_ENCODED,ce)}var te={scheme:"http",domainHost:!0,parse:function(U,G){return U.host||(U.error=U.error||"HTTP URIs must have a host."),U},serialize:function(U,G){var oe=String(U.scheme).toLowerCase()==="https";return(U.port===(oe?443:80)||U.port==="")&&(U.port=void 0),U.path||(U.path="/"),U}},ne={scheme:"https",domainHost:te.domainHost,parse:te.parse,serialize:te.serialize};function ue($){return typeof $.secure=="boolean"?$.secure:String($.scheme).toLowerCase()==="wss"}var be={scheme:"ws",domainHost:!0,parse:function(U,G){var oe=U;return oe.secure=ue(oe),oe.resourceName=(oe.path||"/")+(oe.query?"?"+oe.query:""),oe.path=void 0,oe.query=void 0,oe},serialize:function(U,G){if((U.port===(ue(U)?443:80)||U.port==="")&&(U.port=void 0),typeof U.secure=="boolean"&&(U.scheme=U.secure?"wss":"ws",U.secure=void 0),U.resourceName){var oe=U.resourceName.split("?"),ae=_(oe,2),Re=ae[0],Ie=ae[1];U.path=Re&&Re!=="/"?Re:void 0,U.query=Ie,U.resourceName=void 0}return U.fragment=void 0,U}},ye={scheme:"wss",domainHost:be.domainHost,parse:be.parse,serialize:be.serialize},fe={},Ne="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Pe="[0-9A-Fa-f]",wt=t(t("%[EFef]"+Pe+"%"+Pe+Pe+"%"+Pe+Pe)+"|"+t("%[89A-Fa-f]"+Pe+"%"+Pe+Pe)+"|"+t("%"+Pe+Pe)),St="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",yt="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",It=l(yt,'[\\"\\\\]'),Qt="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Gt=new RegExp(Ne,"g"),Vt=new RegExp(wt,"g"),Dt=new RegExp(l("[^]",St,"[\\.]",'[\\"]',It),"g"),ll=new RegExp(l("[^]",Ne,Qt),"g"),dn=ll;function Tr($){var U=ce($);return U.match(Gt)?U:$}var al={scheme:"mailto",parse:function(U,G){var oe=U,ae=oe.to=oe.path?oe.path.split(","):[];if(oe.path=void 0,oe.query){for(var Re=!1,Ie={},He=oe.query.split("&"),tt=0,ht=He.length;tt<ht;++tt){var Me=He[tt].split("=");switch(Me[0]){case"to":for(var xe=Me[1].split(","),_t=0,qe=xe.length;_t<qe;++_t)ae.push(xe[_t]);break;case"subject":oe.subject=$e(Me[1],G);break;case"body":oe.body=$e(Me[1],G);break;default:Re=!0,Ie[$e(Me[0],G)]=$e(Me[1],G);break}}Re&&(oe.headers=Ie)}oe.query=void 0;for(var rt=0,vt=ae.length;rt<vt;++rt){var lt=ae[rt].split("@");if(lt[0]=$e(lt[0]),G.unicodeSupport)lt[1]=$e(lt[1],G).toLowerCase();else try{lt[1]=ke.toASCII($e(lt[1],G).toLowerCase())}catch(Kt){oe.error=oe.error||"Email address's domain name can not be converted to ASCII via punycode: "+Kt}ae[rt]=lt.join("@")}return oe},serialize:function(U,G){var oe=U,ae=o(U.to);if(ae){for(var Re=0,Ie=ae.length;Re<Ie;++Re){var He=String(ae[Re]),tt=He.lastIndexOf("@"),ht=He.slice(0,tt).replace(Vt,Tr).replace(Vt,n).replace(Dt,me),Me=He.slice(tt+1);try{Me=G.iri?ke.toUnicode(Me):ke.toASCII($e(Me,G).toLowerCase())}catch(rt){oe.error=oe.error||"Email address's domain name can not be converted to "+(G.iri?"Unicode":"ASCII")+" via punycode: "+rt}ae[Re]=ht+"@"+Me}oe.path=ae.join(",")}var xe=U.headers=U.headers||{};U.subject&&(xe.subject=U.subject),U.body&&(xe.body=U.body);var _t=[];for(var qe in xe)xe[qe]!==fe[qe]&&_t.push(qe.replace(Vt,Tr).replace(Vt,n).replace(ll,me)+"="+xe[qe].replace(Vt,Tr).replace(Vt,n).replace(dn,me));return _t.length&&(oe.query=_t.join("&")),oe}},hn=/^([^\:]+)\:(.*)/,sl={scheme:"urn",parse:function(U,G){var oe=U.path&&U.path.match(hn),ae=U;if(oe){var Re=G.scheme||ae.scheme||"urn",Ie=oe[1].toLowerCase(),He=oe[2],tt=Re+":"+(G.nid||Ie),ht=le[tt];ae.nid=Ie,ae.nss=He,ae.path=void 0,ht&&(ae=ht.parse(ae,G))}else ae.error=ae.error||"URN can not be parsed.";return ae},serialize:function(U,G){var oe=G.scheme||U.scheme||"urn",ae=U.nid,Re=oe+":"+(G.nid||ae),Ie=le[Re];Ie&&(U=Ie.serialize(U,G));var He=U,tt=U.nss;return He.path=(ae||G.nid)+":"+tt,He}},_n=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,nl={scheme:"urn:uuid",parse:function(U,G){var oe=U;return oe.uuid=oe.nss,oe.nss=void 0,!G.tolerant&&(!oe.uuid||!oe.uuid.match(_n))&&(oe.error=oe.error||"UUID is not valid."),oe},serialize:function(U,G){var oe=U;return oe.nss=(U.uuid||"").toLowerCase(),oe}};le[te.scheme]=te,le[ne.scheme]=ne,le[be.scheme]=be,le[ye.scheme]=ye,le[al.scheme]=al,le[sl.scheme]=sl,le[nl.scheme]=nl,r.SCHEMES=le,r.pctEncChar=me,r.pctDecChars=ce,r.parse=Ue,r.removeDotSegments=Je,r.serialize=Ge,r.resolveComponents=Ye,r.resolve=Pt,r.normalize=Tt,r.equal=At,r.escapeComponent=Ut,r.unescapeComponent=$e,Object.defineProperty(r,"__esModule",{value:!0})})})(Ur,Ur.exports);var io=Ur.exports,Jr=function a(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var l,t,s;if(Array.isArray(e)){if(l=e.length,l!=r.length)return!1;for(t=l;t--!==0;)if(!a(e[t],r[t]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(s=Object.keys(e),l=s.length,l!==Object.keys(r).length)return!1;for(t=l;t--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[t]))return!1;for(t=l;t--!==0;){var n=s[t];if(!a(e[n],r[n]))return!1}return!0}return e!==e&&r!==r},fo=function(e){for(var r=0,l=e.length,t=0,s;t<l;)r++,s=e.charCodeAt(t++),s>=55296&&s<=56319&&t<l&&(s=e.charCodeAt(t),(s&64512)==56320&&t++);return r},lr={copy:uo,checkDataType:Vr,checkDataTypes:co,coerceToTypes:ho,toHash:Yr,getProperty:Xr,escapeQuotes:Zr,equal:Jr,ucs2length:fo,varOccurences:mo,varReplace:po,schemaHasRules:go,schemaHasRulesExcept:bo,schemaUnknownRules:Eo,toQuotedString:Br,getPathExpr:Po,getPath:wo,getData:So,unescapeFragment:Do,unescapeJsonPointer:xr,escapeFragment:Co,escapeJsonPointer:Wr};function uo(a,e){e=e||{};for(var r in a)e[r]=a[r];return e}function Vr(a,e,r,l){var t=l?" !== ":" === ",s=l?" || ":" && ",n=l?"!":"",o=l?"":"!";switch(a){case"null":return e+t+"null";case"array":return n+"Array.isArray("+e+")";case"object":return"("+n+e+s+"typeof "+e+t+'"object"'+s+o+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+t+'"number"'+s+o+"("+e+" % 1)"+s+e+t+e+(r?s+n+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+t+'"'+a+'"'+(r?s+n+"isFinite("+e+")":"")+")";default:return"typeof "+e+t+'"'+a+'"'}}function co(a,e,r){switch(a.length){case 1:return Vr(a[0],e,r,!0);default:var l="",t=Yr(a);t.array&&t.object&&(l=t.null?"(":"(!"+e+" || ",l+="typeof "+e+' !== "object")',delete t.null,delete t.array,delete t.object),t.number&&delete t.integer;for(var s in t)l+=(l?" && ":"")+Vr(s,e,r,!0);return l}}var Dl=Yr(["string","number","integer","boolean","null"]);function ho(a,e){if(Array.isArray(e)){for(var r=[],l=0;l<e.length;l++){var t=e[l];(Dl[t]||a==="array"&&t==="array")&&(r[r.length]=t)}if(r.length)return r}else{if(Dl[e])return[e];if(a==="array"&&e==="array")return["array"]}}function Yr(a){for(var e={},r=0;r<a.length;r++)e[a[r]]=!0;return e}var _o=/^[a-z$_][a-z$_0-9]*$/i,vo=/'|\\/g;function Xr(a){return typeof a=="number"?"["+a+"]":_o.test(a)?"."+a:"['"+Zr(a)+"']"}function Zr(a){return a.replace(vo,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function mo(a,e){e+="[^0-9]";var r=a.match(new RegExp(e,"g"));return r?r.length:0}function po(a,e,r){return e+="([^0-9])",r=r.replace(/\$/g,"$$$$"),a.replace(new RegExp(e,"g"),r+"$1")}function go(a,e){if(typeof a=="boolean")return!a;for(var r in a)if(e[r])return!0}function bo(a,e,r){if(typeof a=="boolean")return!a&&r!="not";for(var l in a)if(l!=r&&e[l])return!0}function Eo(a,e){if(typeof a!="boolean"){for(var r in a)if(!e[r])return r}}function Br(a){return"'"+Zr(a)+"'"}function Po(a,e,r,l){var t=r?"'/' + "+e+(l?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):l?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return js(a,t)}function wo(a,e,r){var l=Br(r?"/"+Wr(e):Xr(e));return js(a,l)}var ko=/^\/(?:[^~]|~0|~1)*$/,yo=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function So(a,e,r){var l,t,s,n;if(a==="")return"rootData";if(a[0]=="/"){if(!ko.test(a))throw new Error("Invalid JSON-pointer: "+a);t=a,s="rootData"}else{if(n=a.match(yo),!n)throw new Error("Invalid JSON-pointer: "+a);if(l=+n[1],t=n[2],t=="#"){if(l>=e)throw new Error("Cannot access property/index "+l+" levels up, current level is "+e);return r[e-l]}if(l>e)throw new Error("Cannot access data "+l+" levels up, current level is "+e);if(s="data"+(e-l||""),!t)return s}for(var o=s,f=t.split("/"),d=0;d<f.length;d++){var h=f[d];h&&(s+=Xr(xr(h)),o+=" && "+s)}return o}function js(a,e){return a=='""'?e:(a+" + "+e).replace(/([^\\])' \+ '/g,"$1")}function Do(a){return xr(decodeURIComponent(a))}function Co(a){return encodeURIComponent(Wr(a))}function Wr(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}function xr(a){return a.replace(/~1/g,"/").replace(/~0/g,"~")}var No=lr,qs=Ro;function Ro(a){No.copy(a,this)}var zs={exports:{}},Jt=zs.exports=function(a,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var l=typeof r=="function"?r:r.pre||function(){},t=r.post||function(){};pr(e,l,t,a,"",a)};Jt.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};Jt.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Jt.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Jt.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function pr(a,e,r,l,t,s,n,o,f,d){if(l&&typeof l=="object"&&!Array.isArray(l)){e(l,t,s,n,o,f,d);for(var h in l){var m=l[h];if(Array.isArray(m)){if(h in Jt.arrayKeywords)for(var _=0;_<m.length;_++)pr(a,e,r,m[_],t+"/"+h+"/"+_,s,t,h,l,_)}else if(h in Jt.propsKeywords){if(m&&typeof m=="object")for(var c in m)pr(a,e,r,m[c],t+"/"+h+"/"+Io(c),s,t,h,l,c)}else(h in Jt.keywords||a.allKeys&&!(h in Jt.skipKeywords))&&pr(a,e,r,m,t+"/"+h,s,t,h,l)}r(l,t,s,n,o,f,d)}}function Io(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}var Oo=zs.exports,ir=io,Cl=Jr,Cr=lr,Pr=qs,To=Oo,el=Zt;Zt.normalizeId=Yt;Zt.fullPath=wr;Zt.url=kr;Zt.ids=qo;Zt.inlineRef=Mr;Zt.schema=Nr;function Zt(a,e,r){var l=this._refs[r];if(typeof l=="string")if(this._refs[l])l=this._refs[l];else return Zt.call(this,a,e,l);if(l=l||this._schemas[r],l instanceof Pr)return Mr(l.schema,this._opts.inlineRefs)?l.schema:l.validate||this._compile(l);var t=Nr.call(this,e,r),s,n,o;return t&&(s=t.schema,e=t.root,o=t.baseId),s instanceof Pr?n=s.validate||a.call(this,s.schema,e,void 0,o):s!==void 0&&(n=Mr(s,this._opts.inlineRefs)?s:a.call(this,s,e,void 0,o)),n}function Nr(a,e){var r=ir.parse(e),l=Vs(r),t=wr(this._getId(a.schema));if(Object.keys(a.schema).length===0||l!==t){var s=Yt(l),n=this._refs[s];if(typeof n=="string")return Ao.call(this,a,n,r);if(n instanceof Pr)n.validate||this._compile(n),a=n;else if(n=this._schemas[s],n instanceof Pr){if(n.validate||this._compile(n),s==Yt(e))return{schema:n,root:a,baseId:t};a=n}else return;if(!a.schema)return;t=wr(this._getId(a.schema))}return Us.call(this,r,t,a.schema,a)}function Ao(a,e,r){var l=Nr.call(this,a,e);if(l){var t=l.schema,s=l.baseId;a=l.root;var n=this._getId(t);return n&&(s=kr(s,n)),Us.call(this,r,s,t,a)}}var Fo=Cr.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function Us(a,e,r,l){if(a.fragment=a.fragment||"",a.fragment.slice(0,1)=="/"){for(var t=a.fragment.split("/"),s=1;s<t.length;s++){var n=t[s];if(n){if(n=Cr.unescapeFragment(n),r=r[n],r===void 0)break;var o;if(!Fo[n]&&(o=this._getId(r),o&&(e=kr(e,o)),r.$ref)){var f=kr(e,r.$ref),d=Nr.call(this,l,f);d&&(r=d.schema,l=d.root,e=d.baseId)}}}if(r!==void 0&&r!==l.schema)return{schema:r,root:l,baseId:e}}}var Lo=Cr.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function Mr(a,e){if(e===!1)return!1;if(e===void 0||e===!0)return $r(a);if(e)return Hr(a)<=e}function $r(a){var e;if(Array.isArray(a)){for(var r=0;r<a.length;r++)if(e=a[r],typeof e=="object"&&!$r(e))return!1}else for(var l in a)if(l=="$ref"||(e=a[l],typeof e=="object"&&!$r(e)))return!1;return!0}function Hr(a){var e=0,r;if(Array.isArray(a)){for(var l=0;l<a.length;l++)if(r=a[l],typeof r=="object"&&(e+=Hr(r)),e==1/0)return 1/0}else for(var t in a){if(t=="$ref")return 1/0;if(Lo[t])e++;else if(r=a[t],typeof r=="object"&&(e+=Hr(r)+1),e==1/0)return 1/0}return e}function wr(a,e){e!==!1&&(a=Yt(a));var r=ir.parse(a);return Vs(r)}function Vs(a){return ir.serialize(a).split("#")[0]+"#"}var jo=/#\/?$/;function Yt(a){return a?a.replace(jo,""):""}function kr(a,e){return e=Yt(e),ir.resolve(a,e)}function qo(a){var e=Yt(this._getId(a)),r={"":e},l={"":wr(e,!1)},t={},s=this;return To(a,{allKeys:!0},function(n,o,f,d,h,m,_){if(o!==""){var c=s._getId(n),u=r[d],E=l[d]+"/"+h;if(_!==void 0&&(E+="/"+(typeof _=="number"?_:Cr.escapeFragment(_))),typeof c=="string"){c=u=Yt(u?ir.resolve(u,c):c);var b=s._refs[c];if(typeof b=="string"&&(b=s._refs[b]),b&&b.schema){if(!Cl(n,b.schema))throw new Error('id "'+c+'" resolves to more than one schema')}else if(c!=Yt(E))if(c[0]=="#"){if(t[c]&&!Cl(n,t[c]))throw new Error('id "'+c+'" resolves to more than one schema');t[c]=n}else s._refs[c]=E}r[o]=u,l[o]=E}}),t}var Lr=el,tl={Validation:Nl(zo),MissingRef:Nl(rl)};function zo(a){this.message="validation failed",this.errors=a,this.ajv=this.validation=!0}rl.message=function(a,e){return"can't resolve reference "+e+" from id "+a};function rl(a,e,r){this.message=r||rl.message(a,e),this.missingRef=Lr.url(a,e),this.missingSchema=Lr.normalizeId(Lr.fullPath(this.missingRef))}function Nl(a){return a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a}var Bs=function(a,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=typeof e.cycles=="boolean"?e.cycles:!1,l=e.cmp&&function(s){return function(n){return function(o,f){var d={key:o,value:n[o]},h={key:f,value:n[f]};return s(d,h)}}}(e.cmp),t=[];return function s(n){if(n&&n.toJSON&&typeof n.toJSON=="function"&&(n=n.toJSON()),n!==void 0){if(typeof n=="number")return isFinite(n)?""+n:"null";if(typeof n!="object")return JSON.stringify(n);var o,f;if(Array.isArray(n)){for(f="[",o=0;o<n.length;o++)o&&(f+=","),f+=s(n[o])||"null";return f+"]"}if(n===null)return"null";if(t.indexOf(n)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var d=t.push(n)-1,h=Object.keys(n).sort(l&&l(n));for(f="",o=0;o<h.length;o++){var m=h[o],_=s(n[m]);_&&(f&&(f+=","),f+=JSON.stringify(m)+":"+_)}return t.splice(d,1),"{"+f+"}"}}(a)},Ms=function(e,r,l){var t="",s=e.schema.$async===!0,n=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),o=e.self._getId(e.schema);if(e.opts.strictKeywords){var f=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(f){var d="unknown keyword: "+f;if(e.opts.strictKeywords==="log")e.logger.warn(d);else throw new Error(d)}}if(e.isTop&&(t+=" var validate = ",s&&(e.async=!0,t+="async "),t+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",o&&(e.opts.sourceCode||e.opts.processCode)&&(t+=" "+("/*# sourceURL="+o+" */")+" ")),typeof e.schema=="boolean"||!(n||e.schema.$ref)){var r="false schema",h=e.level,m=e.dataLevel,_=e.schema[r],c=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,F,E="data"+(m||""),S="valid"+h;if(e.schema===!1){e.isTop?p=!0:t+=" var "+S+" = false; ";var b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(F||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'boolean schema is false' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),t+=" } "):t+=" {} ";var P=t;t=b.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?s?t+=" return data; ":t+=" validate.errors = null; return true; ":t+=" var "+S+" = true; ";return e.isTop&&(t+=" }; return validate; "),t}if(e.isTop){var I=e.isTop,h=e.level=0,m=e.dataLevel=0,E="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var D="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(D);else throw new Error(D)}t+=" var vErrors = null; ",t+=" var errors = 0;     ",t+=" if (rootData === undefined) rootData = data; "}else{var h=e.level,m=e.dataLevel,E="data"+(m||"");if(o&&(e.baseId=e.resolve.url(e.baseId,o)),s&&!e.async)throw new Error("async schema in sync schema");t+=" var errs_"+h+" = errors;"}var S="valid"+h,p=!e.opts.allErrors,R="",C="",F,N=e.schema.type,T=Array.isArray(N);if(N&&e.opts.nullable&&e.schema.nullable===!0&&(T?N.indexOf("null")==-1&&(N=N.concat("null")):N!="null"&&(N=[N,"null"],T=!0)),T&&N.length==1&&(N=N[0],T=!1),e.schema.$ref&&n){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(n=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(t+=" "+e.RULES.all.$comment.code(e,"$comment")),N){if(e.opts.coerceTypes)var g=e.util.coerceToTypes(e.opts.coerceTypes,N);var O=e.RULES.types[N];if(g||T||O===!0||O&&!ze(O)){var c=e.schemaPath+".type",u=e.errSchemaPath+"/type",c=e.schemaPath+".type",u=e.errSchemaPath+"/type",w=T?"checkDataTypes":"checkDataType";if(t+=" if ("+e.util[w](N,E,e.opts.strictNumbers,!0)+") { ",g){var A="dataType"+h,X="coerced"+h;t+=" var "+A+" = typeof "+E+"; var "+X+" = undefined; ",e.opts.coerceTypes=="array"&&(t+=" if ("+A+" == 'object' && Array.isArray("+E+") && "+E+".length == 1) { "+E+" = "+E+"[0]; "+A+" = typeof "+E+"; if ("+e.util.checkDataType(e.schema.type,E,e.opts.strictNumbers)+") "+X+" = "+E+"; } "),t+=" if ("+X+" !== undefined) ; ";var ie=g;if(ie)for(var re,Q=-1,H=ie.length-1;Q<H;)re=ie[Q+=1],re=="string"?t+=" else if ("+A+" == 'number' || "+A+" == 'boolean') "+X+" = '' + "+E+"; else if ("+E+" === null) "+X+" = ''; ":re=="number"||re=="integer"?(t+=" else if ("+A+" == 'boolean' || "+E+" === null || ("+A+" == 'string' && "+E+" && "+E+" == +"+E+" ",re=="integer"&&(t+=" && !("+E+" % 1)"),t+=")) "+X+" = +"+E+"; "):re=="boolean"?t+=" else if ("+E+" === 'false' || "+E+" === 0 || "+E+" === null) "+X+" = false; else if ("+E+" === 'true' || "+E+" === 1) "+X+" = true; ":re=="null"?t+=" else if ("+E+" === '' || "+E+" === 0 || "+E+" === false) "+X+" = null; ":e.opts.coerceTypes=="array"&&re=="array"&&(t+=" else if ("+A+" == 'string' || "+A+" == 'number' || "+A+" == 'boolean' || "+E+" == null) "+X+" = ["+E+"]; ");t+=" else {   ";var b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(F||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { type: '",T?t+=""+N.join(","):t+=""+N,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",T?t+=""+N.join(","):t+=""+N,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),t+=" } "):t+=" {} ";var P=t;t=b.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } if ("+X+" !== undefined) {  ";var V=m?"data"+(m-1||""):"parentData",z=m?e.dataPathArr[m]:"parentDataProperty";t+=" "+E+" = "+X+"; ",m||(t+="if ("+V+" !== undefined)"),t+=" "+V+"["+z+"] = "+X+"; } "}else{var b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(F||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { type: '",T?t+=""+N.join(","):t+=""+N,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",T?t+=""+N.join(","):t+=""+N,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),t+=" } "):t+=" {} ";var P=t;t=b.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}t+=" } "}}if(e.schema.$ref&&!n)t+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",p&&(t+=" } if (errors === ",I?t+="0":t+="errs_"+h,t+=") { ",C+="}");else{var Y=e.RULES;if(Y){for(var O,j=-1,K=Y.length-1;j<K;)if(O=Y[j+=1],ze(O)){if(O.type&&(t+=" if ("+e.util.checkDataType(O.type,E,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(O.type=="object"&&e.schema.properties){var _=e.schema.properties,Ce=Object.keys(_),ke=Ce;if(ke)for(var le,me=-1,ce=ke.length-1;me<ce;){le=ke[me+=1];var _e=_[le];if(_e.default!==void 0){var De=E+e.util.getProperty(le);if(e.compositeRule){if(e.opts.strictDefaults){var D="default is ignored for: "+De;if(e.opts.strictDefaults==="log")e.logger.warn(D);else throw new Error(D)}}else t+=" if ("+De+" === undefined ",e.opts.useDefaults=="empty"&&(t+=" || "+De+" === null || "+De+" === '' "),t+=" ) "+De+" = ",e.opts.useDefaults=="shared"?t+=" "+e.useDefault(_e.default)+" ":t+=" "+JSON.stringify(_e.default)+" ",t+="; "}}}else if(O.type=="array"&&Array.isArray(e.schema.items)){var je=e.schema.items;if(je){for(var _e,Q=-1,ee=je.length-1;Q<ee;)if(_e=je[Q+=1],_e.default!==void 0){var De=E+"["+Q+"]";if(e.compositeRule){if(e.opts.strictDefaults){var D="default is ignored for: "+De;if(e.opts.strictDefaults==="log")e.logger.warn(D);else throw new Error(D)}}else t+=" if ("+De+" === undefined ",e.opts.useDefaults=="empty"&&(t+=" || "+De+" === null || "+De+" === '' "),t+=" ) "+De+" = ",e.opts.useDefaults=="shared"?t+=" "+e.useDefault(_e.default)+" ":t+=" "+JSON.stringify(_e.default)+" ",t+="; "}}}}var q=O.rules;if(q){for(var se,Ue=-1,Ve=q.length-1;Ue<Ve;)if(se=q[Ue+=1],Ke(se)){var Qe=se.code(e,se.keyword,O.type);Qe&&(t+=" "+Qe+" ",p&&(R+="}"))}}if(p&&(t+=" "+R+" ",R=""),O.type&&(t+=" } ",N&&N===O.type&&!g)){t+=" else { ";var c=e.schemaPath+".type",u=e.errSchemaPath+"/type",b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(F||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { type: '",T?t+=""+N.join(","):t+=""+N,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",T?t+=""+N.join(","):t+=""+N,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),t+=" } "):t+=" {} ";var P=t;t=b.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } "}p&&(t+=" if (errors === ",I?t+="0":t+="errs_"+h,t+=") { ",C+="}")}}}p&&(t+=" "+C+" "),I?(s?(t+=" if (errors === 0) return data;           ",t+=" else throw new ValidationError(vErrors); "):(t+=" validate.errors = vErrors; ",t+=" return errors === 0;       "),t+=" }; return validate;"):t+=" var "+S+" = errors === errs_"+h+";";function ze(Je){for(var Ge=Je.rules,Ye=0;Ye<Ge.length;Ye++)if(Ke(Ge[Ye]))return!0}function Ke(Je){return e.schema[Je.keyword]!==void 0||Je.implements&&Rt(Je)}function Rt(Je){for(var Ge=Je.implements,Ye=0;Ye<Ge.length;Ye++)if(e.schema[Ge[Ye]]!==void 0)return!0}return t},hr=el,yr=lr,$s=tl,Uo=Bs,Rl=Ms,Vo=yr.ucs2length,Bo=Jr,Mo=$s.Validation,$o=Qr;function Qr(a,e,r,l){var t=this,s=this._opts,n=[void 0],o={},f=[],d={},h=[],m={},_=[];e=e||{schema:a,refVal:n,refs:o};var c=Ho.call(this,a,e,l),u=this._compilations[c.index];if(c.compiling)return u.callValidate=D;var E=this._formats,b=this.RULES;try{var P=S(a,e,r,l);u.validate=P;var I=u.callValidate;return I&&(I.schema=P.schema,I.errors=null,I.refs=P.refs,I.refVal=P.refVal,I.root=P.root,I.$async=P.$async,s.sourceCode&&(I.source=P.source)),P}finally{Qo.call(this,a,e,l)}function D(){var w=u.validate,A=w.apply(this,arguments);return D.errors=w.errors,A}function S(w,A,X,ie){var re=!A||A&&A.schema==w;if(A.schema!=e.schema)return Qr.call(t,w,A,X,ie);var Q=w.$async===!0,H=Rl({isTop:!0,schema:w,isRoot:re,baseId:ie,root:A,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:$s.MissingRef,RULES:b,validate:Rl,util:yr,resolve:hr,resolveRef:p,usePattern:T,useDefault:g,useCustomRule:O,opts:s,formats:E,logger:t.logger,self:t});H=_r(n,Jo)+_r(f,Go)+_r(h,Ko)+_r(_,Yo)+H,s.processCode&&(H=s.processCode(H,w));var V;try{var z=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",H);V=z(t,b,E,e,n,h,_,Bo,Vo,Mo),n[0]=V}catch(Y){throw t.logger.error("Error compiling schema, function code:",H),Y}return V.schema=w,V.errors=null,V.refs=o,V.refVal=n,V.root=re?V:A,Q&&(V.$async=!0),s.sourceCode===!0&&(V.source={code:H,patterns:f,defaults:h}),V}function p(w,A,X){A=hr.url(w,A);var ie=o[A],re,Q;if(ie!==void 0)return re=n[ie],Q="refVal["+ie+"]",N(re,Q);if(!X&&e.refs){var H=e.refs[A];if(H!==void 0)return re=e.refVal[H],Q=R(A,re),N(re,Q)}Q=R(A);var V=hr.call(t,S,e,A);if(V===void 0){var z=r&&r[A];z&&(V=hr.inlineRef(z,s.inlineRefs)?z:Qr.call(t,z,e,r,w))}if(V===void 0)C(A);else return F(A,V),N(V,Q)}function R(w,A){var X=n.length;return n[X]=A,o[w]=X,"refVal"+X}function C(w){delete o[w]}function F(w,A){var X=o[w];n[X]=A}function N(w,A){return typeof w=="object"||typeof w=="boolean"?{code:A,schema:w,inline:!0}:{code:A,$async:w&&!!w.$async}}function T(w){var A=d[w];return A===void 0&&(A=d[w]=f.length,f[A]=w),"pattern"+A}function g(w){switch(typeof w){case"boolean":case"number":return""+w;case"string":return yr.toQuotedString(w);case"object":if(w===null)return"null";var A=Uo(w),X=m[A];return X===void 0&&(X=m[A]=h.length,h[X]=w),"default"+X}}function O(w,A,X,ie){if(t._opts.validateSchema!==!1){var re=w.definition.dependencies;if(re&&!re.every(function(ke){return Object.prototype.hasOwnProperty.call(X,ke)}))throw new Error("parent schema must have all required keywords: "+re.join(","));var Q=w.definition.validateSchema;if(Q){var H=Q(A);if(!H){var V="keyword schema is invalid: "+t.errorsText(Q.errors);if(t._opts.validateSchema=="log")t.logger.error(V);else throw new Error(V)}}}var z=w.definition.compile,Y=w.definition.inline,j=w.definition.macro,K;if(z)K=z.call(t,A,X,ie);else if(j)K=j.call(t,A,X,ie),s.validateSchema!==!1&&t.validateSchema(K,!0);else if(Y)K=Y.call(t,ie,w.keyword,A,X);else if(K=w.definition.validate,!K)return;if(K===void 0)throw new Error('custom keyword "'+w.keyword+'"failed to compile');var Ce=_.length;return _[Ce]=K,{code:"customRule"+Ce,validate:K}}}function Ho(a,e,r){var l=Hs.call(this,a,e,r);return l>=0?{index:l,compiling:!0}:(l=this._compilations.length,this._compilations[l]={schema:a,root:e,baseId:r},{index:l,compiling:!1})}function Qo(a,e,r){var l=Hs.call(this,a,e,r);l>=0&&this._compilations.splice(l,1)}function Hs(a,e,r){for(var l=0;l<this._compilations.length;l++){var t=this._compilations[l];if(t.schema==a&&t.root==e&&t.baseId==r)return l}return-1}function Go(a,e){return"var pattern"+a+" = new RegExp("+yr.toQuotedString(e[a])+");"}function Ko(a){return"var default"+a+" = defaults["+a+"];"}function Jo(a,e){return e[a]===void 0?"":"var refVal"+a+" = refVal["+a+"];"}function Yo(a){return"var customRule"+a+" = customRules["+a+"];"}function _r(a,e){if(!a.length)return"";for(var r="",l=0;l<a.length;l++)r+=e(l,a);return r}var Qs={exports:{}},Rr=Qs.exports=function(){this._cache={}};Rr.prototype.put=function(e,r){this._cache[e]=r};Rr.prototype.get=function(e){return this._cache[e]};Rr.prototype.del=function(e){delete this._cache[e]};Rr.prototype.clear=function(){this._cache={}};var Xo=Qs.exports,Zo=lr,Wo=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,xo=[0,31,28,31,30,31,30,31,31,30,31,30,31],ei=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Gs=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ti=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,ri=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Ks=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Js=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,Ys=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,Xs=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Zs=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Ws=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,li=Ir;function Ir(a){return a=a=="full"?"full":"fast",Zo.copy(Ir[a])}Ir.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":Ks,url:Js,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:Gs,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:tn,uuid:Ys,"json-pointer":Xs,"json-pointer-uri-fragment":Zs,"relative-json-pointer":Ws};Ir.full={date:xs,time:en,"date-time":ni,uri:ii,"uri-reference":ri,"uri-template":Ks,url:Js,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:Gs,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:tn,uuid:Ys,"json-pointer":Xs,"json-pointer-uri-fragment":Zs,"relative-json-pointer":Ws};function ai(a){return a%4===0&&(a%100!==0||a%400===0)}function xs(a){var e=a.match(Wo);if(!e)return!1;var r=+e[1],l=+e[2],t=+e[3];return l>=1&&l<=12&&t>=1&&t<=(l==2&&ai(r)?29:xo[l])}function en(a,e){var r=a.match(ei);if(!r)return!1;var l=r[1],t=r[2],s=r[3],n=r[5];return(l<=23&&t<=59&&s<=59||l==23&&t==59&&s==60)&&(!e||n)}var si=/t|\s/i;function ni(a){var e=a.split(si);return e.length==2&&xs(e[0])&&en(e[1],!0)}var oi=/\/|:/;function ii(a){return oi.test(a)&&ti.test(a)}var fi=/[^\\]\\Z/;function tn(a){if(fi.test(a))return!1;try{return new RegExp(a),!0}catch{return!1}}var ui=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,h="data"+(n||""),m="valid"+s,_,c;if(o=="#"||o=="#/")e.isRoot?(_=e.async,c="validate"):(_=e.root.schema.$async===!0,c="root.refVal[0]");else{var u=e.resolveRef(e.baseId,o,e.isRoot);if(u===void 0){var E=e.MissingRefError.message(e.baseId,o);if(e.opts.missingRefs=="fail"){e.logger.error(E);var b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { ref: '"+e.util.escapeQuotes(o)+"' } ",e.opts.messages!==!1&&(t+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(o)+"' "),e.opts.verbose&&(t+=" , schema: "+e.util.toQuotedString(o)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ";var P=t;t=b.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d&&(t+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(E),d&&(t+=" if (true) { ");else throw new e.MissingRefError(e.baseId,o,E)}else if(u.inline){var I=e.util.copy(e);I.level++;var D="valid"+I.level;I.schema=u.schema,I.schemaPath="",I.errSchemaPath=o;var S=e.validate(I).replace(/validate\.schema/g,u.code);t+=" "+S+" ",d&&(t+=" if ("+D+") { ")}else _=u.$async===!0||e.async&&u.$async!==!1,c=u.code}if(c){var b=b||[];b.push(t),t="",e.opts.passContext?t+=" "+c+".call(this, ":t+=" "+c+"( ",t+=" "+h+", (dataPath || '')",e.errorPath!='""'&&(t+=" + "+e.errorPath);var p=n?"data"+(n-1||""):"parentData",R=n?e.dataPathArr[n]:"parentDataProperty";t+=" , "+p+" , "+R+", rootData)  ";var C=t;if(t=b.pop(),_){if(!e.async)throw new Error("async schema referenced by sync schema");d&&(t+=" var "+m+"; "),t+=" try { await "+C+"; ",d&&(t+=" "+m+" = true; "),t+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",d&&(t+=" "+m+" = false; "),t+=" } ",d&&(t+=" if ("+m+") { ")}else t+=" if (!"+C+") { if (vErrors === null) vErrors = "+c+".errors; else vErrors = vErrors.concat("+c+".errors); errors = vErrors.length; } ",d&&(t+=" else { ")}return t},ci=function(e,r,l){var t=" ",s=e.schema[r],n=e.schemaPath+e.util.getProperty(r),o=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,d=e.util.copy(e),h="";d.level++;var m="valid"+d.level,_=d.baseId,c=!0,u=s;if(u)for(var E,b=-1,P=u.length-1;b<P;)E=u[b+=1],(e.opts.strictKeywords?typeof E=="object"&&Object.keys(E).length>0||E===!1:e.util.schemaHasRules(E,e.RULES.all))&&(c=!1,d.schema=E,d.schemaPath=n+"["+b+"]",d.errSchemaPath=o+"/"+b,t+="  "+e.validate(d)+" ",d.baseId=_,f&&(t+=" if ("+m+") { ",h+="}"));return f&&(c?t+=" if (true) { ":t+=" "+h.slice(0,-1)+" "),t},di=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,m="data"+(n||""),_="valid"+s,c="errs__"+s,u=e.util.copy(e),E="";u.level++;var b="valid"+u.level,P=o.every(function(F){return e.opts.strictKeywords?typeof F=="object"&&Object.keys(F).length>0||F===!1:e.util.schemaHasRules(F,e.RULES.all)});if(P){var I=u.baseId;t+=" var "+c+" = errors; var "+_+" = false;  ";var D=e.compositeRule;e.compositeRule=u.compositeRule=!0;var S=o;if(S)for(var p,R=-1,C=S.length-1;R<C;)p=S[R+=1],u.schema=p,u.schemaPath=f+"["+R+"]",u.errSchemaPath=d+"/"+R,t+="  "+e.validate(u)+" ",u.baseId=I,t+=" "+_+" = "+_+" || "+b+"; if (!"+_+") { ",E+="}";e.compositeRule=u.compositeRule=D,t+=" "+E+" if (!"+_+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+=" } else {  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; } ",e.opts.allErrors&&(t+=" } ")}else h&&(t+=" if (true) { ");return t},hi=function(e,r,l){var t=" ",s=e.schema[r],n=e.errSchemaPath+"/"+r;e.opts.allErrors;var o=e.util.toQuotedString(s);return e.opts.$comment===!0?t+=" console.log("+o+");":typeof e.opts.$comment=="function"&&(t+=" self._opts.$comment("+o+", "+e.util.toQuotedString(n)+", validate.root.schema);"),t},_i=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,m="data"+(n||""),_="valid"+s,c=e.opts.$data&&o&&o.$data;c&&(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; "),c||(t+=" var schema"+s+" = validate.schema"+f+";"),t+="var "+_+" = equal("+m+", schema"+s+"); if (!"+_+") {   ";var u=u||[];u.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { allowedValue: schema"+s+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be equal to constant' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var E=t;return t=u.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+E+"]); ":t+=" validate.errors = ["+E+"]; return false; ":t+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" }",h&&(t+=" else { "),t},vi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,m="data"+(n||""),_="valid"+s,c="errs__"+s,u=e.util.copy(e),E="";u.level++;var b="valid"+u.level,P="i"+s,I=u.dataLevel=e.dataLevel+1,D="data"+I,S=e.baseId,p=e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all);if(t+="var "+c+" = errors;var "+_+";",p){var R=e.compositeRule;e.compositeRule=u.compositeRule=!0,u.schema=o,u.schemaPath=f,u.errSchemaPath=d,t+=" var "+b+" = false; for (var "+P+" = 0; "+P+" < "+m+".length; "+P+"++) { ",u.errorPath=e.util.getPathExpr(e.errorPath,P,e.opts.jsonPointers,!0);var C=m+"["+P+"]";u.dataPathArr[I]=P;var F=e.validate(u);u.baseId=S,e.util.varOccurences(F,D)<2?t+=" "+e.util.varReplace(F,D,C)+" ":t+=" var "+D+" = "+C+"; "+F+" ",t+=" if ("+b+") break; }  ",e.compositeRule=u.compositeRule=R,t+=" "+E+" if (!"+b+") {"}else t+=" if ("+m+".length == 0) {";var N=N||[];N.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should contain a valid item' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var T=t;return t=N.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+T+"]); ":t+=" validate.errors = ["+T+"]; return false; ":t+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { ",p&&(t+="  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; } "),e.opts.allErrors&&(t+=" } "),t},mi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,m="data"+(n||""),_="errs__"+s,c=e.util.copy(e),u="";c.level++;var E="valid"+c.level,b={},P={},I=e.opts.ownProperties;for(R in o)if(R!="__proto__"){var D=o[R],S=Array.isArray(D)?P:b;S[R]=D}t+="var "+_+" = errors;";var p=e.errorPath;t+="var missing"+s+";";for(var R in P)if(S=P[R],S.length){if(t+=" if ( "+m+e.util.getProperty(R)+" !== undefined ",I&&(t+=" && Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(R)+"') "),h){t+=" && ( ";var C=S;if(C)for(var F,N=-1,T=C.length-1;N<T;){F=C[N+=1],N&&(t+=" || ");var g=e.util.getProperty(F),O=m+g;t+=" ( ( "+O+" === undefined ",I&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(F)+"') "),t+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?F:g)+") ) "}t+=")) {  ";var w="missing"+s,A="' + "+w+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(p,w,!0):p+" + "+w);var X=X||[];X.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { property: '"+e.util.escapeQuotes(R)+"', missingProperty: '"+A+"', depsCount: "+S.length+", deps: '"+e.util.escapeQuotes(S.length==1?S[0]:S.join(", "))+"' } ",e.opts.messages!==!1&&(t+=" , message: 'should have ",S.length==1?t+="property "+e.util.escapeQuotes(S[0]):t+="properties "+e.util.escapeQuotes(S.join(", ")),t+=" when property "+e.util.escapeQuotes(R)+" is present' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var ie=t;t=X.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+ie+"]); ":t+=" validate.errors = ["+ie+"]; return false; ":t+=" var err = "+ie+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{t+=" ) { ";var re=S;if(re)for(var F,Q=-1,H=re.length-1;Q<H;){F=re[Q+=1];var g=e.util.getProperty(F),A=e.util.escapeQuotes(F),O=m+g;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(p,F,e.opts.jsonPointers)),t+=" if ( "+O+" === undefined ",I&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(F)+"') "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { property: '"+e.util.escapeQuotes(R)+"', missingProperty: '"+A+"', depsCount: "+S.length+", deps: '"+e.util.escapeQuotes(S.length==1?S[0]:S.join(", "))+"' } ",e.opts.messages!==!1&&(t+=" , message: 'should have ",S.length==1?t+="property "+e.util.escapeQuotes(S[0]):t+="properties "+e.util.escapeQuotes(S.join(", ")),t+=" when property "+e.util.escapeQuotes(R)+" is present' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}t+=" }   ",h&&(u+="}",t+=" else { ")}e.errorPath=p;var V=c.baseId;for(var R in b){var D=b[R];(e.opts.strictKeywords?typeof D=="object"&&Object.keys(D).length>0||D===!1:e.util.schemaHasRules(D,e.RULES.all))&&(t+=" "+E+" = true; if ( "+m+e.util.getProperty(R)+" !== undefined ",I&&(t+=" && Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(R)+"') "),t+=") { ",c.schema=D,c.schemaPath=f+e.util.getProperty(R),c.errSchemaPath=d+"/"+e.util.escapeFragment(R),t+="  "+e.validate(c)+" ",c.baseId=V,t+=" }  ",h&&(t+=" if ("+E+") { ",u+="}"))}return h&&(t+="   "+u+" if ("+_+" == errors) {"),t},pi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,m="data"+(n||""),_="valid"+s,c=e.opts.$data&&o&&o.$data;c&&(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ");var u="i"+s,E="schema"+s;c||(t+=" var "+E+" = validate.schema"+f+";"),t+="var "+_+";",c&&(t+=" if (schema"+s+" === undefined) "+_+" = true; else if (!Array.isArray(schema"+s+")) "+_+" = false; else {"),t+=""+_+" = false;for (var "+u+"=0; "+u+"<"+E+".length; "+u+"++) if (equal("+m+", "+E+"["+u+"])) { "+_+" = true; break; }",c&&(t+="  }  "),t+=" if (!"+_+") {   ";var b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { allowedValues: schema"+s+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var P=t;return t=b.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" }",h&&(t+=" else { "),t},gi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,m="data"+(n||"");if(e.opts.format===!1)return h&&(t+=" if (true) { "),t;var _=e.opts.$data&&o&&o.$data,c;_?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=o;var u=e.opts.unknownFormats,E=Array.isArray(u);if(_){var b="format"+s,P="isObject"+s,I="formatType"+s;t+=" var "+b+" = formats["+c+"]; var "+P+" = typeof "+b+" == 'object' && !("+b+" instanceof RegExp) && "+b+".validate; var "+I+" = "+P+" && "+b+".type || 'string'; if ("+P+") { ",e.async&&(t+=" var async"+s+" = "+b+".async; "),t+=" "+b+" = "+b+".validate; } if (  ",_&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'string') || "),t+=" (",u!="ignore"&&(t+=" ("+c+" && !"+b+" ",E&&(t+=" && self._opts.unknownFormats.indexOf("+c+") == -1 "),t+=") || "),t+=" ("+b+" && "+I+" == '"+l+"' && !(typeof "+b+" == 'function' ? ",e.async?t+=" (async"+s+" ? await "+b+"("+m+") : "+b+"("+m+")) ":t+=" "+b+"("+m+") ",t+=" : "+b+".test("+m+"))))) {"}else{var b=e.formats[o];if(!b){if(u=="ignore")return e.logger.warn('unknown format "'+o+'" ignored in schema at path "'+e.errSchemaPath+'"'),h&&(t+=" if (true) { "),t;if(E&&u.indexOf(o)>=0)return h&&(t+=" if (true) { "),t;throw new Error('unknown format "'+o+'" is used in schema at path "'+e.errSchemaPath+'"')}var P=typeof b=="object"&&!(b instanceof RegExp)&&b.validate,I=P&&b.type||"string";if(P){var D=b.async===!0;b=b.validate}if(I!=l)return h&&(t+=" if (true) { "),t;if(D){if(!e.async)throw new Error("async format in sync schema");var S="formats"+e.util.getProperty(o)+".validate";t+=" if (!(await "+S+"("+m+"))) { "}else{t+=" if (! ";var S="formats"+e.util.getProperty(o);P&&(S+=".validate"),typeof b=="function"?t+=" "+S+"("+m+") ":t+=" "+S+".test("+m+") ",t+=") { "}}var p=p||[];p.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { format:  ",_?t+=""+c:t+=""+e.util.toQuotedString(o),t+="  } ",e.opts.messages!==!1&&(t+=` , message: 'should match format "`,_?t+="' + "+c+" + '":t+=""+e.util.escapeQuotes(o),t+=`"' `),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+f:t+=""+e.util.toQuotedString(o),t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var R=t;return t=p.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+R+"]); ":t+=" validate.errors = ["+R+"]; return false; ":t+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",h&&(t+=" else { "),t},bi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,m="data"+(n||""),_="valid"+s,c="errs__"+s,u=e.util.copy(e);u.level++;var E="valid"+u.level,b=e.schema.then,P=e.schema.else,I=b!==void 0&&(e.opts.strictKeywords?typeof b=="object"&&Object.keys(b).length>0||b===!1:e.util.schemaHasRules(b,e.RULES.all)),D=P!==void 0&&(e.opts.strictKeywords?typeof P=="object"&&Object.keys(P).length>0||P===!1:e.util.schemaHasRules(P,e.RULES.all)),S=u.baseId;if(I||D){var p;u.createErrors=!1,u.schema=o,u.schemaPath=f,u.errSchemaPath=d,t+=" var "+c+" = errors; var "+_+" = true;  ";var R=e.compositeRule;e.compositeRule=u.compositeRule=!0,t+="  "+e.validate(u)+" ",u.baseId=S,u.createErrors=!0,t+="  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; }  ",e.compositeRule=u.compositeRule=R,I?(t+=" if ("+E+") {  ",u.schema=e.schema.then,u.schemaPath=e.schemaPath+".then",u.errSchemaPath=e.errSchemaPath+"/then",t+="  "+e.validate(u)+" ",u.baseId=S,t+=" "+_+" = "+E+"; ",I&&D?(p="ifClause"+s,t+=" var "+p+" = 'then'; "):p="'then'",t+=" } ",D&&(t+=" else { ")):t+=" if (!"+E+") { ",D&&(u.schema=e.schema.else,u.schemaPath=e.schemaPath+".else",u.errSchemaPath=e.errSchemaPath+"/else",t+="  "+e.validate(u)+" ",u.baseId=S,t+=" "+_+" = "+E+"; ",I&&D?(p="ifClause"+s,t+=" var "+p+" = 'else'; "):p="'else'",t+=" } "),t+=" if (!"+_+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { failingKeyword: "+p+" } ",e.opts.messages!==!1&&(t+=` , message: 'should match "' + `+p+` + '" schema' `),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+=" }   ",h&&(t+=" else { ")}else h&&(t+=" if (true) { ");return t},Ei=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,m="data"+(n||""),_="valid"+s,c="errs__"+s,u=e.util.copy(e),E="";u.level++;var b="valid"+u.level,P="i"+s,I=u.dataLevel=e.dataLevel+1,D="data"+I,S=e.baseId;if(t+="var "+c+" = errors;var "+_+";",Array.isArray(o)){var p=e.schema.additionalItems;if(p===!1){t+=" "+_+" = "+m+".length <= "+o.length+"; ";var R=d;d=e.errSchemaPath+"/additionalItems",t+="  if (!"+_+") {   ";var C=C||[];C.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { limit: "+o.length+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have more than "+o.length+" items' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var F=t;t=C.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+F+"]); ":t+=" validate.errors = ["+F+"]; return false; ":t+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",d=R,h&&(E+="}",t+=" else { ")}var N=o;if(N){for(var T,g=-1,O=N.length-1;g<O;)if(T=N[g+=1],e.opts.strictKeywords?typeof T=="object"&&Object.keys(T).length>0||T===!1:e.util.schemaHasRules(T,e.RULES.all)){t+=" "+b+" = true; if ("+m+".length > "+g+") { ";var w=m+"["+g+"]";u.schema=T,u.schemaPath=f+"["+g+"]",u.errSchemaPath=d+"/"+g,u.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0),u.dataPathArr[I]=g;var A=e.validate(u);u.baseId=S,e.util.varOccurences(A,D)<2?t+=" "+e.util.varReplace(A,D,w)+" ":t+=" var "+D+" = "+w+"; "+A+" ",t+=" }  ",h&&(t+=" if ("+b+") { ",E+="}")}}if(typeof p=="object"&&(e.opts.strictKeywords?typeof p=="object"&&Object.keys(p).length>0||p===!1:e.util.schemaHasRules(p,e.RULES.all))){u.schema=p,u.schemaPath=e.schemaPath+".additionalItems",u.errSchemaPath=e.errSchemaPath+"/additionalItems",t+=" "+b+" = true; if ("+m+".length > "+o.length+") {  for (var "+P+" = "+o.length+"; "+P+" < "+m+".length; "+P+"++) { ",u.errorPath=e.util.getPathExpr(e.errorPath,P,e.opts.jsonPointers,!0);var w=m+"["+P+"]";u.dataPathArr[I]=P;var A=e.validate(u);u.baseId=S,e.util.varOccurences(A,D)<2?t+=" "+e.util.varReplace(A,D,w)+" ":t+=" var "+D+" = "+w+"; "+A+" ",h&&(t+=" if (!"+b+") break; "),t+=" } }  ",h&&(t+=" if ("+b+") { ",E+="}")}}else if(e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all)){u.schema=o,u.schemaPath=f,u.errSchemaPath=d,t+="  for (var "+P+" = 0; "+P+" < "+m+".length; "+P+"++) { ",u.errorPath=e.util.getPathExpr(e.errorPath,P,e.opts.jsonPointers,!0);var w=m+"["+P+"]";u.dataPathArr[I]=P;var A=e.validate(u);u.baseId=S,e.util.varOccurences(A,D)<2?t+=" "+e.util.varReplace(A,D,w)+" ":t+=" var "+D+" = "+w+"; "+A+" ",h&&(t+=" if (!"+b+") break; "),t+=" }"}return h&&(t+=" "+E+" if ("+c+" == errors) {"),t},Il=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,S,m="data"+(n||""),_=e.opts.$data&&o&&o.$data,c;_?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=o;var u=r=="maximum",E=u?"exclusiveMaximum":"exclusiveMinimum",b=e.schema[E],P=e.opts.$data&&b&&b.$data,I=u?"<":">",D=u?">":"<",S=void 0;if(!(_||typeof o=="number"||o===void 0))throw new Error(r+" must be number");if(!(P||b===void 0||typeof b=="number"||typeof b=="boolean"))throw new Error(E+" must be number or boolean");if(P){var p=e.util.getData(b.$data,n,e.dataPathArr),R="exclusive"+s,C="exclType"+s,F="exclIsNumber"+s,N="op"+s,T="' + "+N+" + '";t+=" var schemaExcl"+s+" = "+p+"; ",p="schemaExcl"+s,t+=" var "+R+"; var "+C+" = typeof "+p+"; if ("+C+" != 'boolean' && "+C+" != 'undefined' && "+C+" != 'number') { ";var S=E,g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(S||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: '"+E+" should be boolean' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var O=t;t=g.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+O+"]); ":t+=" validate.errors = ["+O+"]; return false; ":t+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else if ( ",_&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),t+=" "+C+" == 'number' ? ( ("+R+" = "+c+" === undefined || "+p+" "+I+"= "+c+") ? "+m+" "+D+"= "+p+" : "+m+" "+D+" "+c+" ) : ( ("+R+" = "+p+" === true) ? "+m+" "+D+"= "+c+" : "+m+" "+D+" "+c+" ) || "+m+" !== "+m+") { var op"+s+" = "+R+" ? '"+I+"' : '"+I+"='; ",o===void 0&&(S=E,d=e.errSchemaPath+"/"+E,c=p,_=P)}else{var F=typeof b=="number",T=I;if(F&&_){var N="'"+T+"'";t+=" if ( ",_&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),t+=" ( "+c+" === undefined || "+b+" "+I+"= "+c+" ? "+m+" "+D+"= "+b+" : "+m+" "+D+" "+c+" ) || "+m+" !== "+m+") { "}else{F&&o===void 0?(R=!0,S=E,d=e.errSchemaPath+"/"+E,c=b,D+="="):(F&&(c=Math[u?"min":"max"](b,o)),b===(F?c:!0)?(R=!0,S=E,d=e.errSchemaPath+"/"+E,D+="="):(R=!1,T+="="));var N="'"+T+"'";t+=" if ( ",_&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),t+=" "+m+" "+D+" "+c+" || "+m+" !== "+m+") { "}}S=S||r;var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(S||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { comparison: "+N+", limit: "+c+", exclusive: "+R+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be "+T+" ",_?t+="' + "+c:t+=""+c+"'"),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+f:t+=""+o,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var O=t;return t=g.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+O+"]); ":t+=" validate.errors = ["+O+"]; return false; ":t+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",h&&(t+=" else { "),t},Ol=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,E,m="data"+(n||""),_=e.opts.$data&&o&&o.$data,c;if(_?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=o,!(_||typeof o=="number"))throw new Error(r+" must be number");var u=r=="maxItems"?">":"<";t+="if ( ",_&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),t+=" "+m+".length "+u+" "+c+") { ";var E=r,b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(E||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { limit: "+c+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have ",r=="maxItems"?t+="more":t+="fewer",t+=" than ",_?t+="' + "+c+" + '":t+=""+o,t+=" items' "),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+f:t+=""+o,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var P=t;return t=b.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",h&&(t+=" else { "),t},Tl=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,E,m="data"+(n||""),_=e.opts.$data&&o&&o.$data,c;if(_?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=o,!(_||typeof o=="number"))throw new Error(r+" must be number");var u=r=="maxLength"?">":"<";t+="if ( ",_&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),e.opts.unicode===!1?t+=" "+m+".length ":t+=" ucs2length("+m+") ",t+=" "+u+" "+c+") { ";var E=r,b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(E||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { limit: "+c+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be ",r=="maxLength"?t+="longer":t+="shorter",t+=" than ",_?t+="' + "+c+" + '":t+=""+o,t+=" characters' "),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+f:t+=""+o,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var P=t;return t=b.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",h&&(t+=" else { "),t},Al=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,E,m="data"+(n||""),_=e.opts.$data&&o&&o.$data,c;if(_?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=o,!(_||typeof o=="number"))throw new Error(r+" must be number");var u=r=="maxProperties"?">":"<";t+="if ( ",_&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),t+=" Object.keys("+m+").length "+u+" "+c+") { ";var E=r,b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(E||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { limit: "+c+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have ",r=="maxProperties"?t+="more":t+="fewer",t+=" than ",_?t+="' + "+c+" + '":t+=""+o,t+=" properties' "),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+f:t+=""+o,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var P=t;return t=b.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",h&&(t+=" else { "),t},Pi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,m="data"+(n||""),_=e.opts.$data&&o&&o.$data,c;if(_?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=o,!(_||typeof o=="number"))throw new Error(r+" must be number");t+="var division"+s+";if (",_&&(t+=" "+c+" !== undefined && ( typeof "+c+" != 'number' || "),t+=" (division"+s+" = "+m+" / "+c+", ",e.opts.multipleOfPrecision?t+=" Math.abs(Math.round(division"+s+") - division"+s+") > 1e-"+e.opts.multipleOfPrecision+" ":t+=" division"+s+" !== parseInt(division"+s+") ",t+=" ) ",_&&(t+="  )  "),t+=" ) {   ";var u=u||[];u.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { multipleOf: "+c+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be multiple of ",_?t+="' + "+c:t+=""+c+"'"),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+f:t+=""+o,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var E=t;return t=u.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+E+"]); ":t+=" validate.errors = ["+E+"]; return false; ":t+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",h&&(t+=" else { "),t},wi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,m="data"+(n||""),_="errs__"+s,c=e.util.copy(e);c.level++;var u="valid"+c.level;if(e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all)){c.schema=o,c.schemaPath=f,c.errSchemaPath=d,t+=" var "+_+" = errors;  ";var E=e.compositeRule;e.compositeRule=c.compositeRule=!0,c.createErrors=!1;var b;c.opts.allErrors&&(b=c.opts.allErrors,c.opts.allErrors=!1),t+=" "+e.validate(c)+" ",c.createErrors=!0,b&&(c.opts.allErrors=b),e.compositeRule=c.compositeRule=E,t+=" if ("+u+") {   ";var P=P||[];P.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be valid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var I=t;t=P.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+I+"]); ":t+=" validate.errors = ["+I+"]; return false; ":t+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else {  errors = "+_+"; if (vErrors !== null) { if ("+_+") vErrors.length = "+_+"; else vErrors = null; } ",e.opts.allErrors&&(t+=" } ")}else t+="  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be valid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h&&(t+=" if (false) { ");return t},ki=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,m="data"+(n||""),_="valid"+s,c="errs__"+s,u=e.util.copy(e),E="";u.level++;var b="valid"+u.level,P=u.baseId,I="prevValid"+s,D="passingSchemas"+s;t+="var "+c+" = errors , "+I+" = false , "+_+" = false , "+D+" = null; ";var S=e.compositeRule;e.compositeRule=u.compositeRule=!0;var p=o;if(p)for(var R,C=-1,F=p.length-1;C<F;)R=p[C+=1],(e.opts.strictKeywords?typeof R=="object"&&Object.keys(R).length>0||R===!1:e.util.schemaHasRules(R,e.RULES.all))?(u.schema=R,u.schemaPath=f+"["+C+"]",u.errSchemaPath=d+"/"+C,t+="  "+e.validate(u)+" ",u.baseId=P):t+=" var "+b+" = true; ",C&&(t+=" if ("+b+" && "+I+") { "+_+" = false; "+D+" = ["+D+", "+C+"]; } else { ",E+="}"),t+=" if ("+b+") { "+_+" = "+I+" = true; "+D+" = "+C+"; }";return e.compositeRule=u.compositeRule=S,t+=""+E+"if (!"+_+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { passingSchemas: "+D+" } ",e.opts.messages!==!1&&(t+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+="} else {  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; }",e.opts.allErrors&&(t+=" } "),t},yi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,m="data"+(n||""),_=e.opts.$data&&o&&o.$data,c;_?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=o;var u=_?"(new RegExp("+c+"))":e.usePattern(o);t+="if ( ",_&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'string') || "),t+=" !"+u+".test("+m+") ) {   ";var E=E||[];E.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { pattern:  ",_?t+=""+c:t+=""+e.util.toQuotedString(o),t+="  } ",e.opts.messages!==!1&&(t+=` , message: 'should match pattern "`,_?t+="' + "+c+" + '":t+=""+e.util.escapeQuotes(o),t+=`"' `),e.opts.verbose&&(t+=" , schema:  ",_?t+="validate.schema"+f:t+=""+e.util.toQuotedString(o),t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var b=t;return t=E.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+b+"]); ":t+=" validate.errors = ["+b+"]; return false; ":t+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",h&&(t+=" else { "),t},Si=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,m="data"+(n||""),_="errs__"+s,c=e.util.copy(e),u="";c.level++;var E="valid"+c.level,b="key"+s,P="idx"+s,I=c.dataLevel=e.dataLevel+1,D="data"+I,S="dataProperties"+s,p=Object.keys(o||{}).filter(Q),R=e.schema.patternProperties||{},C=Object.keys(R).filter(Q),F=e.schema.additionalProperties,N=p.length||C.length,T=F===!1,g=typeof F=="object"&&Object.keys(F).length,O=e.opts.removeAdditional,w=T||g||O,A=e.opts.ownProperties,X=e.baseId,ie=e.schema.required;if(ie&&!(e.opts.$data&&ie.$data)&&ie.length<e.opts.loopRequired)var re=e.util.toHash(ie);function Q(At){return At!=="__proto__"}if(t+="var "+_+" = errors;var "+E+" = true;",A&&(t+=" var "+S+" = undefined;"),w){if(A?t+=" "+S+" = "+S+" || Object.keys("+m+"); for (var "+P+"=0; "+P+"<"+S+".length; "+P+"++) { var "+b+" = "+S+"["+P+"]; ":t+=" for (var "+b+" in "+m+") { ",N){if(t+=" var isAdditional"+s+" = !(false ",p.length)if(p.length>8)t+=" || validate.schema"+f+".hasOwnProperty("+b+") ";else{var H=p;if(H)for(var V,z=-1,Y=H.length-1;z<Y;)V=H[z+=1],t+=" || "+b+" == "+e.util.toQuotedString(V)+" "}if(C.length){var j=C;if(j)for(var K,Ce=-1,ke=j.length-1;Ce<ke;)K=j[Ce+=1],t+=" || "+e.usePattern(K)+".test("+b+") "}t+=" ); if (isAdditional"+s+") { "}if(O=="all")t+=" delete "+m+"["+b+"]; ";else{var le=e.errorPath,me="' + "+b+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers)),T)if(O)t+=" delete "+m+"["+b+"]; ";else{t+=" "+E+" = false; ";var ce=d;d=e.errSchemaPath+"/additionalProperties";var _e=_e||[];_e.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { additionalProperty: '"+me+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is an invalid additional property":t+="should NOT have additional properties",t+="' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var De=t;t=_e.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+De+"]); ":t+=" validate.errors = ["+De+"]; return false; ":t+=" var err = "+De+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d=ce,h&&(t+=" break; ")}else if(g)if(O=="failing"){t+=" var "+_+" = errors;  ";var je=e.compositeRule;e.compositeRule=c.compositeRule=!0,c.schema=F,c.schemaPath=e.schemaPath+".additionalProperties",c.errSchemaPath=e.errSchemaPath+"/additionalProperties",c.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers);var ee=m+"["+b+"]";c.dataPathArr[I]=b;var q=e.validate(c);c.baseId=X,e.util.varOccurences(q,D)<2?t+=" "+e.util.varReplace(q,D,ee)+" ":t+=" var "+D+" = "+ee+"; "+q+" ",t+=" if (!"+E+") { errors = "+_+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+m+"["+b+"]; }  ",e.compositeRule=c.compositeRule=je}else{c.schema=F,c.schemaPath=e.schemaPath+".additionalProperties",c.errSchemaPath=e.errSchemaPath+"/additionalProperties",c.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers);var ee=m+"["+b+"]";c.dataPathArr[I]=b;var q=e.validate(c);c.baseId=X,e.util.varOccurences(q,D)<2?t+=" "+e.util.varReplace(q,D,ee)+" ":t+=" var "+D+" = "+ee+"; "+q+" ",h&&(t+=" if (!"+E+") break; ")}e.errorPath=le}N&&(t+=" } "),t+=" }  ",h&&(t+=" if ("+E+") { ",u+="}")}var se=e.opts.useDefaults&&!e.compositeRule;if(p.length){var Ue=p;if(Ue)for(var V,Ve=-1,Qe=Ue.length-1;Ve<Qe;){V=Ue[Ve+=1];var ze=o[V];if(e.opts.strictKeywords?typeof ze=="object"&&Object.keys(ze).length>0||ze===!1:e.util.schemaHasRules(ze,e.RULES.all)){var Ke=e.util.getProperty(V),ee=m+Ke,Rt=se&&ze.default!==void 0;c.schema=ze,c.schemaPath=f+Ke,c.errSchemaPath=d+"/"+e.util.escapeFragment(V),c.errorPath=e.util.getPath(e.errorPath,V,e.opts.jsonPointers),c.dataPathArr[I]=e.util.toQuotedString(V);var q=e.validate(c);if(c.baseId=X,e.util.varOccurences(q,D)<2){q=e.util.varReplace(q,D,ee);var Je=ee}else{var Je=D;t+=" var "+D+" = "+ee+"; "}if(Rt)t+=" "+q+" ";else{if(re&&re[V]){t+=" if ( "+Je+" === undefined ",A&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(V)+"') "),t+=") { "+E+" = false; ";var le=e.errorPath,ce=d,Ge=e.util.escapeQuotes(V);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(le,V,e.opts.jsonPointers)),d=e.errSchemaPath+"/required";var _e=_e||[];_e.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+Ge+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+Ge+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var De=t;t=_e.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+De+"]); ":t+=" validate.errors = ["+De+"]; return false; ":t+=" var err = "+De+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d=ce,e.errorPath=le,t+=" } else { "}else h?(t+=" if ( "+Je+" === undefined ",A&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(V)+"') "),t+=") { "+E+" = true; } else { "):(t+=" if ("+Je+" !== undefined ",A&&(t+=" &&   Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(V)+"') "),t+=" ) { ");t+=" "+q+" } "}}h&&(t+=" if ("+E+") { ",u+="}")}}if(C.length){var Ye=C;if(Ye)for(var K,Pt=-1,Tt=Ye.length-1;Pt<Tt;){K=Ye[Pt+=1];var ze=R[K];if(e.opts.strictKeywords?typeof ze=="object"&&Object.keys(ze).length>0||ze===!1:e.util.schemaHasRules(ze,e.RULES.all)){c.schema=ze,c.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(K),c.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(K),A?t+=" "+S+" = "+S+" || Object.keys("+m+"); for (var "+P+"=0; "+P+"<"+S+".length; "+P+"++) { var "+b+" = "+S+"["+P+"]; ":t+=" for (var "+b+" in "+m+") { ",t+=" if ("+e.usePattern(K)+".test("+b+")) { ",c.errorPath=e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers);var ee=m+"["+b+"]";c.dataPathArr[I]=b;var q=e.validate(c);c.baseId=X,e.util.varOccurences(q,D)<2?t+=" "+e.util.varReplace(q,D,ee)+" ":t+=" var "+D+" = "+ee+"; "+q+" ",h&&(t+=" if (!"+E+") break; "),t+=" } ",h&&(t+=" else "+E+" = true; "),t+=" }  ",h&&(t+=" if ("+E+") { ",u+="}")}}}return h&&(t+=" "+u+" if ("+_+" == errors) {"),t},Di=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,m="data"+(n||""),_="errs__"+s,c=e.util.copy(e),u="";c.level++;var E="valid"+c.level;if(t+="var "+_+" = errors;",e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all)){c.schema=o,c.schemaPath=f,c.errSchemaPath=d;var b="key"+s,P="idx"+s,I="i"+s,D="' + "+b+" + '",S=c.dataLevel=e.dataLevel+1,p="data"+S,R="dataProperties"+s,C=e.opts.ownProperties,F=e.baseId;C&&(t+=" var "+R+" = undefined; "),C?t+=" "+R+" = "+R+" || Object.keys("+m+"); for (var "+P+"=0; "+P+"<"+R+".length; "+P+"++) { var "+b+" = "+R+"["+P+"]; ":t+=" for (var "+b+" in "+m+") { ",t+=" var startErrs"+s+" = errors; ";var N=b,T=e.compositeRule;e.compositeRule=c.compositeRule=!0;var g=e.validate(c);c.baseId=F,e.util.varOccurences(g,p)<2?t+=" "+e.util.varReplace(g,p,N)+" ":t+=" var "+p+" = "+N+"; "+g+" ",e.compositeRule=c.compositeRule=T,t+=" if (!"+E+") { for (var "+I+"=startErrs"+s+"; "+I+"<errors; "+I+"++) { vErrors["+I+"].propertyName = "+b+"; }   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { propertyName: '"+D+"' } ",e.opts.messages!==!1&&(t+=" , message: 'property name \\'"+D+"\\' is invalid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),h&&(t+=" break; "),t+=" } }"}return h&&(t+=" "+u+" if ("+_+" == errors) {"),t},Ci=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,m="data"+(n||""),_="valid"+s,c=e.opts.$data&&o&&o.$data;c&&(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ");var u="schema"+s;if(!c)if(o.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var E=[],b=o;if(b)for(var P,I=-1,D=b.length-1;I<D;){P=b[I+=1];var S=e.schema.properties[P];S&&(e.opts.strictKeywords?typeof S=="object"&&Object.keys(S).length>0||S===!1:e.util.schemaHasRules(S,e.RULES.all))||(E[E.length]=P)}}else var E=o;if(c||E.length){var p=e.errorPath,R=c||E.length>=e.opts.loopRequired,C=e.opts.ownProperties;if(h)if(t+=" var missing"+s+"; ",R){c||(t+=" var "+u+" = validate.schema"+f+"; ");var F="i"+s,N="schema"+s+"["+F+"]",T="' + "+N+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(p,N,e.opts.jsonPointers)),t+=" var "+_+" = true; ",c&&(t+=" if (schema"+s+" === undefined) "+_+" = true; else if (!Array.isArray(schema"+s+")) "+_+" = false; else {"),t+=" for (var "+F+" = 0; "+F+" < "+u+".length; "+F+"++) { "+_+" = "+m+"["+u+"["+F+"]] !== undefined ",C&&(t+=" &&   Object.prototype.hasOwnProperty.call("+m+", "+u+"["+F+"]) "),t+="; if (!"+_+") break; } ",c&&(t+="  }  "),t+="  if (!"+_+") {   ";var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+T+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var O=t;t=g.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+O+"]); ":t+=" validate.errors = ["+O+"]; return false; ":t+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { "}else{t+=" if ( ";var w=E;if(w)for(var A,F=-1,X=w.length-1;F<X;){A=w[F+=1],F&&(t+=" || ");var ie=e.util.getProperty(A),re=m+ie;t+=" ( ( "+re+" === undefined ",C&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(A)+"') "),t+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?A:ie)+") ) "}t+=") {  ";var N="missing"+s,T="' + "+N+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(p,N,!0):p+" + "+N);var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+T+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var O=t;t=g.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+O+"]); ":t+=" validate.errors = ["+O+"]; return false; ":t+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { "}else if(R){c||(t+=" var "+u+" = validate.schema"+f+"; ");var F="i"+s,N="schema"+s+"["+F+"]",T="' + "+N+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(p,N,e.opts.jsonPointers)),c&&(t+=" if ("+u+" && !Array.isArray("+u+")) {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+T+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+u+" !== undefined) { "),t+=" for (var "+F+" = 0; "+F+" < "+u+".length; "+F+"++) { if ("+m+"["+u+"["+F+"]] === undefined ",C&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", "+u+"["+F+"]) "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+T+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",c&&(t+="  }  ")}else{var Q=E;if(Q)for(var A,H=-1,V=Q.length-1;H<V;){A=Q[H+=1];var ie=e.util.getProperty(A),T=e.util.escapeQuotes(A),re=m+ie;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(p,A,e.opts.jsonPointers)),t+=" if ( "+re+" === undefined ",C&&(t+=" || ! Object.prototype.hasOwnProperty.call("+m+", '"+e.util.escapeQuotes(A)+"') "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+T+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=p}else h&&(t+=" if (true) {");return t},Ni=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,m="data"+(n||""),_="valid"+s,c=e.opts.$data&&o&&o.$data,u;if(c?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",u="schema"+s):u=o,(o||c)&&e.opts.uniqueItems!==!1){c&&(t+=" var "+_+"; if ("+u+" === false || "+u+" === undefined) "+_+" = true; else if (typeof "+u+" != 'boolean') "+_+" = false; else { "),t+=" var i = "+m+".length , "+_+" = true , j; if (i > 1) { ";var E=e.schema.items&&e.schema.items.type,b=Array.isArray(E);if(!E||E=="object"||E=="array"||b&&(E.indexOf("object")>=0||E.indexOf("array")>=0))t+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+m+"[i], "+m+"[j])) { "+_+" = false; break outer; } } } ";else{t+=" var itemIndices = {}, item; for (;i--;) { var item = "+m+"[i]; ";var P="checkDataType"+(b?"s":"");t+=" if ("+e.util[P](E,"item",e.opts.strictNumbers,!0)+") continue; ",b&&(t+=` if (typeof item == 'string') item = '"' + item; `),t+=" if (typeof itemIndices[item] == 'number') { "+_+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}t+=" } ",c&&(t+="  }  "),t+=" if (!"+_+") {   ";var I=I||[];I.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(t+=" , schema:  ",c?t+="validate.schema"+f:t+=""+o,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var D=t;t=I.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+D+"]); ":t+=" validate.errors = ["+D+"]; return false; ":t+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",h&&(t+=" else { ")}else h&&(t+=" if (true) { ");return t},Ri={$ref:ui,allOf:ci,anyOf:di,$comment:hi,const:_i,contains:vi,dependencies:mi,enum:pi,format:gi,if:bi,items:Ei,maximum:Il,minimum:Il,maxItems:Ol,minItems:Ol,maxLength:Tl,minLength:Tl,maxProperties:Al,minProperties:Al,multipleOf:Pi,not:wi,oneOf:ki,pattern:yi,properties:Si,propertyNames:Di,required:Ci,uniqueItems:Ni,validate:Ms},Fl=Ri,jr=lr.toHash,Ii=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],r=["type","$comment"],l=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],t=["number","integer","string","array","object","boolean","null"];return e.all=jr(r),e.types=jr(t),e.forEach(function(s){s.rules=s.rules.map(function(n){var o;if(typeof n=="object"){var f=Object.keys(n)[0];o=n[f],n=f,o.forEach(function(h){r.push(h),e.all[h]=!0})}r.push(n);var d=e.all[n]={keyword:n,code:Fl[n],implements:o};return d}),e.all.$comment={keyword:"$comment",code:Fl.$comment},s.type&&(e.types[s.type]=s)}),e.keywords=jr(r.concat(l)),e.custom={},e},Ll=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],Oi=function(a,e){for(var r=0;r<e.length;r++){a=JSON.parse(JSON.stringify(a));var l=e[r].split("/"),t=a,s;for(s=1;s<l.length;s++)t=t[l[s]];for(s=0;s<Ll.length;s++){var n=Ll[s],o=t[n];o&&(t[n]={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return a},Ti=tl.MissingRef,Ai=rn;function rn(a,e,r){var l=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(r=e,e=void 0);var t=s(a).then(function(){var o=l._addSchema(a,void 0,e);return o.validate||n(o)});return r&&t.then(function(o){r(null,o)},r),t;function s(o){var f=o.$schema;return f&&!l.getSchema(f)?rn.call(l,{$ref:f},!0):Promise.resolve()}function n(o){try{return l._compile(o)}catch(d){if(d instanceof Ti)return f(d);throw d}function f(d){var h=d.missingSchema;if(c(h))throw new Error("Schema "+h+" is loaded but "+d.missingRef+" cannot be resolved");var m=l._loadingSchemas[h];return m||(m=l._loadingSchemas[h]=l._opts.loadSchema(h),m.then(_,_)),m.then(function(u){if(!c(h))return s(u).then(function(){c(h)||l.addSchema(u,h,void 0,e)})}).then(function(){return n(o)});function _(){delete l._loadingSchemas[h]}function c(u){return l._refs[u]||l._schemas[u]}}}}var Fi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),d=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,m,_="data"+(n||""),c="valid"+s,u="errs__"+s,E=e.opts.$data&&o&&o.$data,b;E?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",b="schema"+s):b=o;var P=this,I="definition"+s,D=P.definition,S="",p,R,C,F,N;if(E&&D.$data){N="keywordValidate"+s;var T=D.validateSchema;t+=" var "+I+" = RULES.custom['"+r+"'].definition; var "+N+" = "+I+".validate;"}else{if(F=e.useCustomRule(P,o,e.schema,e),!F)return;b="validate.schema"+f,N=F.code,p=D.compile,R=D.inline,C=D.macro}var g=N+".errors",O="i"+s,w="ruleErr"+s,A=D.async;if(A&&!e.async)throw new Error("async keyword in sync schema");if(R||C||(t+=""+g+" = null;"),t+="var "+u+" = errors;var "+c+";",E&&D.$data&&(S+="}",t+=" if ("+b+" === undefined) { "+c+" = true; } else { ",T&&(S+="}",t+=" "+c+" = "+I+".validateSchema("+b+"); if ("+c+") { ")),R)D.statements?t+=" "+F.validate+" ":t+=" "+c+" = "+F.validate+"; ";else if(C){var X=e.util.copy(e),S="";X.level++;var ie="valid"+X.level;X.schema=F.validate,X.schemaPath="";var re=e.compositeRule;e.compositeRule=X.compositeRule=!0;var Q=e.validate(X).replace(/validate\.schema/g,N);e.compositeRule=X.compositeRule=re,t+=" "+Q}else{var H=H||[];H.push(t),t="",t+="  "+N+".call( ",e.opts.passContext?t+="this":t+="self",p||D.schema===!1?t+=" , "+_+" ":t+=" , "+b+" , "+_+" , validate.schema"+e.schemaPath+" ",t+=" , (dataPath || '')",e.errorPath!='""'&&(t+=" + "+e.errorPath);var V=n?"data"+(n-1||""):"parentData",z=n?e.dataPathArr[n]:"parentDataProperty";t+=" , "+V+" , "+z+" , rootData )  ";var Y=t;t=H.pop(),D.errors===!1?(t+=" "+c+" = ",A&&(t+="await "),t+=""+Y+"; "):A?(g="customErrors"+s,t+=" var "+g+" = null; try { "+c+" = await "+Y+"; } catch (e) { "+c+" = false; if (e instanceof ValidationError) "+g+" = e.errors; else throw e; } "):t+=" "+g+" = null; "+c+" = "+Y+"; "}if(D.modifying&&(t+=" if ("+V+") "+_+" = "+V+"["+z+"];"),t+=""+S,D.valid)h&&(t+=" if (true) { ");else{t+=" if ( ",D.valid===void 0?(t+=" !",C?t+=""+ie:t+=""+c):t+=" "+!D.valid+" ",t+=") { ",m=P.keyword;var H=H||[];H.push(t),t="";var H=H||[];H.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(m||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { keyword: '"+P.keyword+"' } ",e.opts.messages!==!1&&(t+=` , message: 'should pass "`+P.keyword+`" keyword validation' `),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var j=t;t=H.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+j+"]); ":t+=" validate.errors = ["+j+"]; return false; ":t+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var K=t;t=H.pop(),R?D.errors?D.errors!="full"&&(t+="  for (var "+O+"="+u+"; "+O+"<errors; "+O+"++) { var "+w+" = vErrors["+O+"]; if ("+w+".dataPath === undefined) "+w+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+w+".schemaPath === undefined) { "+w+'.schemaPath = "'+d+'"; } ',e.opts.verbose&&(t+=" "+w+".schema = "+b+"; "+w+".data = "+_+"; "),t+=" } "):D.errors===!1?t+=" "+K+" ":(t+=" if ("+u+" == errors) { "+K+" } else {  for (var "+O+"="+u+"; "+O+"<errors; "+O+"++) { var "+w+" = vErrors["+O+"]; if ("+w+".dataPath === undefined) "+w+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+w+".schemaPath === undefined) { "+w+'.schemaPath = "'+d+'"; } ',e.opts.verbose&&(t+=" "+w+".schema = "+b+"; "+w+".data = "+_+"; "),t+=" } } "):C?(t+="   var err =   ",e.createErrors!==!1?(t+=" { keyword: '"+(m||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { keyword: '"+P.keyword+"' } ",e.opts.messages!==!1&&(t+=` , message: 'should pass "`+P.keyword+`" keyword validation' `),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; ")):D.errors===!1?t+=" "+K+" ":(t+=" if (Array.isArray("+g+")) { if (vErrors === null) vErrors = "+g+"; else vErrors = vErrors.concat("+g+"); errors = vErrors.length;  for (var "+O+"="+u+"; "+O+"<errors; "+O+"++) { var "+w+" = vErrors["+O+"]; if ("+w+".dataPath === undefined) "+w+".dataPath = (dataPath || '') + "+e.errorPath+";  "+w+'.schemaPath = "'+d+'";  ',e.opts.verbose&&(t+=" "+w+".schema = "+b+"; "+w+".data = "+_+"; "),t+=" } } else { "+K+" } "),t+=" } ",h&&(t+=" else { ")}return t};const Li="http://json-schema.org/draft-07/schema#",ji="http://json-schema.org/draft-07/schema#",qi="Core schema meta-schema",zi={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Ui=["object","boolean"],Vi={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},ln={$schema:Li,$id:ji,title:qi,definitions:zi,type:Ui,properties:Vi,default:!0};var jl=ln,Bi={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:jl.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:jl.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},Mi=/^[a-z_$][a-z0-9_$-]*$/i,$i=Fi,Hi=Bi,Qi={add:Gi,get:Ki,remove:Ji,validate:Gr};function Gi(a,e){var r=this.RULES;if(r.keywords[a])throw new Error("Keyword "+a+" is already defined");if(!Mi.test(a))throw new Error("Keyword "+a+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var l=e.type;if(Array.isArray(l))for(var t=0;t<l.length;t++)n(a,l[t],e);else n(a,l,e);var s=e.metaSchema;s&&(e.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(s,!0))}r.keywords[a]=r.all[a]=!0;function n(o,f,d){for(var h,m=0;m<r.length;m++){var _=r[m];if(_.type==f){h=_;break}}h||(h={type:f,rules:[]},r.push(h));var c={keyword:o,definition:d,custom:!0,code:$i,implements:d.implements};h.rules.push(c),r.custom[o]=c}return this}function Ki(a){var e=this.RULES.custom[a];return e?e.definition:this.RULES.keywords[a]||!1}function Ji(a){var e=this.RULES;delete e.keywords[a],delete e.all[a],delete e.custom[a];for(var r=0;r<e.length;r++)for(var l=e[r].rules,t=0;t<l.length;t++)if(l[t].keyword==a){l.splice(t,1);break}return this}function Gr(a,e){Gr.errors=null;var r=this._validateKeyword=this._validateKeyword||this.compile(Hi,!0);if(r(a))return!0;if(Gr.errors=r.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(r.errors));return!1}const Yi="http://json-schema.org/draft-07/schema#",Xi="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Zi="Meta-schema for $data reference (JSON Schema extension proposal)",Wi="object",xi=["$data"],ef={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},tf=!1,rf={$schema:Yi,$id:Xi,description:Zi,type:Wi,required:xi,properties:ef,additionalProperties:tf};var an=$o,er=el,lf=Xo,sn=qs,af=Bs,sf=li,nf=Ii,nn=Oi,on=lr,of=dt;dt.prototype.validate=uf;dt.prototype.compile=cf;dt.prototype.addSchema=df;dt.prototype.addMetaSchema=hf;dt.prototype.validateSchema=_f;dt.prototype.getSchema=mf;dt.prototype.removeSchema=gf;dt.prototype.addFormat=Df;dt.prototype.errorsText=Sf;dt.prototype._addSchema=bf;dt.prototype._compile=Ef;dt.prototype.compileAsync=Ai;var Or=Qi;dt.prototype.addKeyword=Or.add;dt.prototype.getKeyword=Or.get;dt.prototype.removeKeyword=Or.remove;dt.prototype.validateKeyword=Or.validate;var fn=tl;dt.ValidationError=fn.Validation;dt.MissingRefError=fn.MissingRef;dt.$dataMetaSchema=nn;var Sr="http://json-schema.org/draft-07/schema",ql=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],ff=["/properties"];function dt(a){if(!(this instanceof dt))return new dt(a);a=this._opts=on.copy(a)||{},Tf(this),this._schemas={},this._refs={},this._fragments={},this._formats=sf(a.format),this._cache=a.cache||new lf,this._loadingSchemas={},this._compilations=[],this.RULES=nf(),this._getId=Pf(a),a.loopRequired=a.loopRequired||1/0,a.errorDataPath=="property"&&(a._errorDataPathProperty=!0),a.serialize===void 0&&(a.serialize=af),this._metaOpts=Of(this),a.formats&&Rf(this),a.keywords&&If(this),Cf(this),typeof a.meta=="object"&&this.addMetaSchema(a.meta),a.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),Nf(this)}function uf(a,e){var r;if(typeof a=="string"){if(r=this.getSchema(a),!r)throw new Error('no schema with key or ref "'+a+'"')}else{var l=this._addSchema(a);r=l.validate||this._compile(l)}var t=r(e);return r.$async!==!0&&(this.errors=r.errors),t}function cf(a,e){var r=this._addSchema(a,void 0,e);return r.validate||this._compile(r)}function df(a,e,r,l){if(Array.isArray(a)){for(var t=0;t<a.length;t++)this.addSchema(a[t],void 0,r,l);return this}var s=this._getId(a);if(s!==void 0&&typeof s!="string")throw new Error("schema id must be string");return e=er.normalizeId(e||s),cn(this,e),this._schemas[e]=this._addSchema(a,r,l,!0),this}function hf(a,e,r){return this.addSchema(a,e,r,!0),this}function _f(a,e){var r=a.$schema;if(r!==void 0&&typeof r!="string")throw new Error("$schema must be a string");if(r=r||this._opts.defaultMeta||vf(this),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var l=this.validate(r,a);if(!l&&e){var t="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(t);else throw new Error(t)}return l}function vf(a){var e=a._opts.meta;return a._opts.defaultMeta=typeof e=="object"?a._getId(e)||e:a.getSchema(Sr)?Sr:void 0,a._opts.defaultMeta}function mf(a){var e=un(this,a);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return pf(this,a)}}function pf(a,e){var r=er.schema.call(a,{schema:{}},e);if(r){var l=r.schema,t=r.root,s=r.baseId,n=an.call(a,l,t,void 0,s);return a._fragments[e]=new sn({ref:e,fragment:!0,schema:l,root:t,baseId:s,validate:n}),n}}function un(a,e){return e=er.normalizeId(e),a._schemas[e]||a._refs[e]||a._fragments[e]}function gf(a){if(a instanceof RegExp)return vr(this,this._schemas,a),vr(this,this._refs,a),this;switch(typeof a){case"undefined":return vr(this,this._schemas),vr(this,this._refs),this._cache.clear(),this;case"string":var e=un(this,a);return e&&this._cache.del(e.cacheKey),delete this._schemas[a],delete this._refs[a],this;case"object":var r=this._opts.serialize,l=r?r(a):a;this._cache.del(l);var t=this._getId(a);t&&(t=er.normalizeId(t),delete this._schemas[t],delete this._refs[t])}return this}function vr(a,e,r){for(var l in e){var t=e[l];!t.meta&&(!r||r.test(l))&&(a._cache.del(t.cacheKey),delete e[l])}}function bf(a,e,r,l){if(typeof a!="object"&&typeof a!="boolean")throw new Error("schema should be object or boolean");var t=this._opts.serialize,s=t?t(a):a,n=this._cache.get(s);if(n)return n;l=l||this._opts.addUsedSchema!==!1;var o=er.normalizeId(this._getId(a));o&&l&&cn(this,o);var f=this._opts.validateSchema!==!1&&!e,d;f&&!(d=o&&o==er.normalizeId(a.$schema))&&this.validateSchema(a,!0);var h=er.ids.call(this,a),m=new sn({id:o,schema:a,localRefs:h,cacheKey:s,meta:r});return o[0]!="#"&&l&&(this._refs[o]=m),this._cache.put(s,m),f&&d&&this.validateSchema(a,!0),m}function Ef(a,e){if(a.compiling)return a.validate=t,t.schema=a.schema,t.errors=null,t.root=e||t,a.schema.$async===!0&&(t.$async=!0),t;a.compiling=!0;var r;a.meta&&(r=this._opts,this._opts=this._metaOpts);var l;try{l=an.call(this,a.schema,e,a.localRefs)}catch(s){throw delete a.validate,s}finally{a.compiling=!1,a.meta&&(this._opts=r)}return a.validate=l,a.refs=l.refs,a.refVal=l.refVal,a.root=l.root,l;function t(){var s=a.validate,n=s.apply(this,arguments);return t.errors=s.errors,n}}function Pf(a){switch(a.schemaId){case"auto":return yf;case"id":return wf;default:return kf}}function wf(a){return a.$id&&this.logger.warn("schema $id ignored",a.$id),a.id}function kf(a){return a.id&&this.logger.warn("schema id ignored",a.id),a.$id}function yf(a){if(a.$id&&a.id&&a.$id!=a.id)throw new Error("schema $id is different from id");return a.$id||a.id}function Sf(a,e){if(a=a||this.errors,!a)return"No errors";e=e||{};for(var r=e.separator===void 0?", ":e.separator,l=e.dataVar===void 0?"data":e.dataVar,t="",s=0;s<a.length;s++){var n=a[s];n&&(t+=l+n.dataPath+" "+n.message+r)}return t.slice(0,-r.length)}function Df(a,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[a]=e,this}function Cf(a){var e;if(a._opts.$data&&(e=rf,a.addMetaSchema(e,e.$id,!0)),a._opts.meta!==!1){var r=ln;a._opts.$data&&(r=nn(r,ff)),a.addMetaSchema(r,Sr,!0),a._refs["http://json-schema.org/schema"]=Sr}}function Nf(a){var e=a._opts.schemas;if(e)if(Array.isArray(e))a.addSchema(e);else for(var r in e)a.addSchema(e[r],r)}function Rf(a){for(var e in a._opts.formats){var r=a._opts.formats[e];a.addFormat(e,r)}}function If(a){for(var e in a._opts.keywords){var r=a._opts.keywords[e];a.addKeyword(e,r)}}function cn(a,e){if(a._schemas[e]||a._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function Of(a){for(var e=on.copy(a._opts),r=0;r<ql.length;r++)delete e[ql[r]];return e}function Tf(a){var e=a._opts.logger;if(e===!1)a.logger={log:qr,warn:qr,error:qr};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");a.logger=e}}function qr(){}const Af=Fn(of);function Ht(a,e,r,l,t,s,n,o,f,d,h,m,_){const c={id:`${Math.random()}`,type:l,position:{x:o,y:f},data:{label:t,sequence:n,d3f_class:s,user_properties:[]},measured:{width:d,height:h},origin:[.5,0],selected:!1,dragging:!1};let u,E;_?(u=c.id,E=r.id):(u=r.id,E=c.id);const b={type:"editableEdge",data:{label:m},source:E,sourceHandle:"source",target:u,targetHandle:"target",id:`xy-edge__${E}source-${u}target`,selected:!1};e.update(P=>[...P,b]),a.update(P=>[...P,c])}function zl(a,e,r){const l=a.slice();return l[18]=e[r],l}const Ff=a=>({}),Ul=a=>({});function Lf(a){let e;return{c(){e=k("No related offensive techniques in this release.")},l(r){e=y(r,"No related offensive techniques in this release.")},m(r,l){v(r,e,l)},p:Se,i:Se,o:Se,d(r){r&&i(e)}}}function jf(a){let e,r;return e=new $t({props:{$$slots:{default:[Vf]},$$scope:{ctx:a}}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t&16394&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){ve(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function qf(a){let e,r="Loading...";return{c(){e=B("div"),e.textContent=r},l(l){e=M(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:Se,i:Se,o:Se,d(l){l&&i(e)}}}function Vl(a){let e=a[18].off_tech_id.value.replace(/ |\./g,"")+"",r,l,t=a[18].off_tech_label.value+"",s,n,o="-->",f,d,h=a[18].off_artifact_rel_label.value.replace(/ /g,"")+"",m,_,c=he(a[18].off_artifact.value)+"",u,E,b=a[18].off_artifact_label.value+"",P,I,D,S,p=he(a[18].off_artifact.value)+"",R,C,F=a[18].off_tech_id.value.replace(/ |\./g,"")+"",N,T,g=a[18].off_tech_id.value.replace(/ |\./g,"")+"",O,w,A=he(a[18].off_artifact.value)+"",X,ie,re=he(a[18].off_artifact.value)+"",Q,H;function V(j,K){return K&10&&(D=null),D==null&&(D=!!j[3].includes(j[18].off_tech_id.value.replace(/ |\./g,""))),D?Uf:zf}let z=V(a,-1),Y=z(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),d=k(" |"),m=k(h),_=k("| "),u=k(c),E=k('["'),P=k(b),I=k(`"];
            `),Y.c(),S=k(`
            class `),R=k(p),C=k(" ArtifactNode; click "),N=k(F),T=k(` href "javascript:da_to_off_callback('`),O=k(g),w=k(`')"; click `),X=k(A),ie=k(' href "/dao/artifact/d3f:'),Q=k(re),H=k('";')},l(j){r=y(j,e),l=y(j,'["'),s=y(j,t),n=y(j,'"] '),f=y(j,o),d=y(j," |"),m=y(j,h),_=y(j,"| "),u=y(j,c),E=y(j,'["'),P=y(j,b),I=y(j,`"];
            `),Y.l(j),S=y(j,`
            class `),R=y(j,p),C=y(j," ArtifactNode; click "),N=y(j,F),T=y(j,` href "javascript:da_to_off_callback('`),O=y(j,g),w=y(j,`')"; click `),X=y(j,A),ie=y(j,' href "/dao/artifact/d3f:'),Q=y(j,re),H=y(j,'";')},m(j,K){v(j,r,K),v(j,l,K),v(j,s,K),v(j,n,K),v(j,f,K),v(j,d,K),v(j,m,K),v(j,_,K),v(j,u,K),v(j,E,K),v(j,P,K),v(j,I,K),Y.m(j,K),v(j,S,K),v(j,R,K),v(j,C,K),v(j,N,K),v(j,T,K),v(j,O,K),v(j,w,K),v(j,X,K),v(j,ie,K),v(j,Q,K),v(j,H,K)},p(j,K){K&2&&e!==(e=j[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(r,e),K&2&&t!==(t=j[18].off_tech_label.value+"")&&J(s,t),K&2&&h!==(h=j[18].off_artifact_rel_label.value.replace(/ /g,"")+"")&&J(m,h),K&2&&c!==(c=he(j[18].off_artifact.value)+"")&&J(u,c),K&2&&b!==(b=j[18].off_artifact_label.value+"")&&J(P,b),z===(z=V(j,K))&&Y?Y.p(j,K):(Y.d(1),Y=z(j),Y&&(Y.c(),Y.m(S.parentNode,S))),K&2&&p!==(p=he(j[18].off_artifact.value)+"")&&J(R,p),K&2&&F!==(F=j[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(N,F),K&2&&g!==(g=j[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(O,g),K&2&&A!==(A=he(j[18].off_artifact.value)+"")&&J(X,A),K&2&&re!==(re=he(j[18].off_artifact.value)+"")&&J(Q,re)},d(j){j&&(i(r),i(l),i(s),i(n),i(f),i(d),i(m),i(_),i(u),i(E),i(P),i(I),i(S),i(R),i(C),i(N),i(T),i(O),i(w),i(X),i(ie),i(Q),i(H)),Y.d(j)}}}function zf(a){let e,r=a[18].off_tech_id.value.replace(/ |\./g,"")+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" OffensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," OffensiveTechniqueNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function Uf(a){let e,r=a[18].off_tech_id.value.replace(/ |\./g,"")+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" SelectedOffensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," SelectedOffensiveTechniqueNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function Bl(a){let e=a[6].edge_is_unique(a[18].off_tech_label.value,a[18].off_artifact_rel_label.value,a[18].off_artifact_label.value),r,l=e&&Vl(a);return{c(){l&&l.c(),r=Ee()},l(t){l&&l.l(t),r=Ee()},m(t,s){l&&l.m(t,s),v(t,r,s)},p(t,s){s&2&&(e=t[6].edge_is_unique(t[18].off_tech_label.value,t[18].off_artifact_rel_label.value,t[18].off_artifact_label.value)),e?l?l.p(t,s):(l=Vl(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&i(r),l&&l.d(t)}}}function Vf(a){let e,r,l=Oe(a[1].da_to_off.results.bindings),t=[];for(let s=0;s<l.length;s+=1)t[s]=Bl(zl(a,l,s));return{c(){e=k(`graph LR;
        `);for(let s=0;s<t.length;s+=1)t[s].c();r=Ee()},l(s){e=y(s,`graph LR;
        `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=Ee()},m(s,n){v(s,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,n);v(s,r,n)},p(s,n){if(n&74){l=Oe(s[1].da_to_off.results.bindings);let o;for(o=0;o<l.length;o+=1){const f=zl(s,l,o);t[o]?t[o].p(f,n):(t[o]=Bl(f),t[o].c(),t[o].m(r.parentNode,r))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(s){s&&(i(e),i(r)),We(t,s)}}}function Bf(a){let e,r,l,t,s,n,o,f,d,h,m,_,c,u=a[3].length+"",E,b,P,I,D;const S=a[9].header,p=it(S,a,a[14],Ul),R=a[9].default,C=it(R,a,a[14],null),F=[qf,jf,Lf],N=[];function T(g,O){return g[1]?g[1].da_to_off.results.bindings.length>0?1:2:0}return o=T(a),f=N[o]=F[o](a),{c(){e=B("dialog"),r=B("div"),p&&p.c(),l=k(`
    Select Attack Techniques
    `),C&&C.c(),t=W(),s=B("hr"),n=W(),f.c(),d=W(),h=B("hr"),m=W(),_=B("button"),c=k("Insert ("),E=k(u),b=k(")"),this.h()},l(g){e=M(g,"DIALOG",{class:!0});var O=pe(e);r=M(O,"DIV",{class:!0});var w=pe(r);p&&p.l(w),l=y(w,`
    Select Attack Techniques
    `),C&&C.l(w),t=x(w),s=M(w,"HR",{}),n=x(w),f.l(w),d=x(w),h=M(w,"HR",{}),m=x(w),_=M(w,"BUTTON",{class:!0});var A=pe(_);c=y(A,"Insert ("),E=y(A,u),b=y(A,")"),A.forEach(i),w.forEach(i),O.forEach(i),this.h()},h(){_.autofocus=!0,Z(_,"class","svelte-1ai9hff"),Z(r,"class","svelte-1ai9hff"),Z(e,"class","svelte-1ai9hff")},m(g,O){v(g,e,O),L(e,r),p&&p.m(r,null),L(r,l),C&&C.m(r,null),L(r,t),L(r,s),L(r,n),N[o].m(r,null),L(r,d),L(r,h),L(r,m),L(r,_),L(_,c),L(_,E),L(_,b),a[11](e),P=!0,_.focus(),I||(D=[ge(_,"click",a[7]),ge(r,"click",Ct(a[10])),ge(e,"close",a[12]),ge(e,"click",Mt(a[13]))],I=!0)},p(g,[O]){p&&p.p&&(!P||O&16384)&&ft(p,S,g,g[14],P?ct(S,g[14],O,Ff):ut(g[14]),Ul),C&&C.p&&(!P||O&16384)&&ft(C,R,g,g[14],P?ct(R,g[14],O,null):ut(g[14]),null);let w=o;o=T(g),o===w?N[o].p(g,O):(pt(),ve(N[w],1,1,()=>{N[w]=null}),gt(),f=N[o],f?f.p(g,O):(f=N[o]=F[o](g),f.c()),de(f,1),f.m(r,d)),(!P||O&8)&&u!==(u=g[3].length+"")&&J(E,u)},i(g){P||(de(p,g),de(C,g),de(f),P=!0)},o(g){ve(p,g),ve(C,g),ve(f),P=!1},d(g){g&&i(e),p&&p.d(g),C&&C.d(g),N[o].d(),a[11](null),I=!1,mt(D)}}}function Mf(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{show_attack_modal:f}=e,{parent_node:d}=e,{data:h}=e,m;const _=qt();et(a,_,p=>r(16,s=p));const c=zt();et(a,c,p=>r(15,t=p));let u=new Xt;function E(p){l.includes(p)?r(3,l=l.filter(R=>R!==p)):l.push(p),r(3,l)}window.da_to_off_callback=function(p){E(p)};function b(){let p=0,R=200,C=100;for(const F of l){let N=h.da_to_off.results.bindings.find(T=>T.off_tech_id.value.replace(/ |\./g,"")==F);N&&(Ht(_,c,d,"attackSelectorNode",N.off_tech_label.value,"d3f:"+N.off_tech_id.value,d.data.sequence,d.position.x+p*R,d.position.y+C,182,63,N.off_artifact_rel_label.value,!1),p+=1)}_.set(s),c.set(t),m&&m.close(),r(3,l=[])}function P(p){Nt.call(this,a,p)}function I(p){Ze[p?"unshift":"push"](()=>{m=p,r(2,m)})}const D=()=>r(0,f=!1),S=()=>{m.close(),r(3,l=[])};return a.$$set=p=>{"show_attack_modal"in p&&r(0,f=p.show_attack_modal),"parent_node"in p&&r(8,d=p.parent_node),"data"in p&&r(1,h=p.data),"$$scope"in p&&r(14,o=p.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&f&&m&&(m.showModal(),u.reset()),a.$$.dirty&5&&!f&&m&&(m.close(),u.reset())},r(3,l=[]),[f,h,m,l,_,c,u,b,d,n,P,I,D,S,o]}class $f extends nt{constructor(e){super(),ot(this,e,Mf,Bf,st,{show_attack_modal:0,parent_node:8,data:1})}}function Ml(a,e,r){const l=a.slice();return l[23]=e[r],l}const Hf=a=>({}),$l=a=>({});function Qf(a){let e;return{c(){e=k("No related defensive techniques in this release.")},l(r){e=y(r,"No related defensive techniques in this release.")},m(r,l){v(r,e,l)},p:Se,i:Se,o:Se,d(r){r&&i(e)}}}function Gf(a){let e,r,l,t,s,n=a[4],o,f;function d(_){a[14](_)}let h={toggles:a[5]};a[4]!==void 0&&(h.selected=a[4]),l=new Ls({props:h}),Ze.push(()=>Et(l,"selected",d));let m=Kl(a);return{c(){e=B("br"),r=W(),Te(l.$$.fragment),s=W(),m.c(),o=Ee()},l(_){e=M(_,"BR",{}),r=x(_),Ae(l.$$.fragment,_),s=x(_),m.l(_),o=Ee()},m(_,c){v(_,e,c),v(_,r,c),Fe(l,_,c),v(_,s,c),m.m(_,c),v(_,o,c),f=!0},p(_,c){const u={};c&32&&(u.toggles=_[5]),!t&&c&16&&(t=!0,u.selected=_[4],bt(()=>t=!1)),l.$set(u),c&16&&st(n,n=_[4])?(pt(),ve(m,1,1,Se),gt(),m=Kl(_),m.c(),de(m,1),m.m(o.parentNode,o)):m.p(_,c)},i(_){f||(de(l.$$.fragment,_),de(m),f=!0)},o(_){ve(l.$$.fragment,_),ve(m),f=!1},d(_){_&&(i(e),i(r),i(s),i(o)),Le(l,_),m.d(_)}}}function Kf(a){let e,r="Loading...";return{c(){e=B("div"),e.textContent=r},l(l){e=M(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:Se,i:Se,o:Se,d(l){l&&i(e)}}}function Hl(a){let e=!a[4].includes(a[23].def_tactic_label.value),r,l=e&&Ql(a);return{c(){l&&l.c(),r=Ee()},l(t){l&&l.l(t),r=Ee()},m(t,s){l&&l.m(t,s),v(t,r,s)},p(t,s){s&18&&(e=!t[4].includes(t[23].def_tactic_label.value)),e?l?l.p(t,s):(l=Ql(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&i(r),l&&l.d(t)}}}function Ql(a){let e=he(a[23].def_tech.value)+"",r,l,t=a[23].def_tech_label.value+"",s,n,o="-->",f,d,h=a[23].def_artifact_rel_label.value.replace(/ /g,"")+"",m,_,c=he(a[23].def_artifact.value)+"",u,E,b=a[23].def_artifact_label.value+"",P,I,D,S,p=he(a[23].def_artifact.value)+"",R,C,F=he(a[23].def_tech.value)+"",N,T,g=he(a[23].def_tech.value)+"",O,w,A=he(a[23].def_artifact.value)+"",X,ie,re=he(a[23].def_artifact.value)+"",Q,H;function V(j,K){return K&66&&(D=null),D==null&&(D=!!j[6].includes(he(j[23].def_tech.value))),D?Yf:Jf}let z=V(a,-1),Y=z(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),d=k(`
                | `),m=k(h),_=k(" | "),u=k(c),E=k('["'),P=k(b),I=k(`"];
                `),Y.c(),S=k(` 
                class `),R=k(p),C=k(` ArtifactNode;
                click `),N=k(F),T=k(` href "javascript:da_to_def_callback('`),O=k(g),w=k(`')";
                click `),X=k(A),ie=k(' href "/dao/artifact/d3f:'),Q=k(re),H=k('";')},l(j){r=y(j,e),l=y(j,'["'),s=y(j,t),n=y(j,'"] '),f=y(j,o),d=y(j,`
                | `),m=y(j,h),_=y(j," | "),u=y(j,c),E=y(j,'["'),P=y(j,b),I=y(j,`"];
                `),Y.l(j),S=y(j,` 
                class `),R=y(j,p),C=y(j,` ArtifactNode;
                click `),N=y(j,F),T=y(j,` href "javascript:da_to_def_callback('`),O=y(j,g),w=y(j,`')";
                click `),X=y(j,A),ie=y(j,' href "/dao/artifact/d3f:'),Q=y(j,re),H=y(j,'";')},m(j,K){v(j,r,K),v(j,l,K),v(j,s,K),v(j,n,K),v(j,f,K),v(j,d,K),v(j,m,K),v(j,_,K),v(j,u,K),v(j,E,K),v(j,P,K),v(j,I,K),Y.m(j,K),v(j,S,K),v(j,R,K),v(j,C,K),v(j,N,K),v(j,T,K),v(j,O,K),v(j,w,K),v(j,X,K),v(j,ie,K),v(j,Q,K),v(j,H,K)},p(j,K){K&2&&e!==(e=he(j[23].def_tech.value)+"")&&J(r,e),K&2&&t!==(t=j[23].def_tech_label.value+"")&&J(s,t),K&2&&h!==(h=j[23].def_artifact_rel_label.value.replace(/ /g,"")+"")&&J(m,h),K&2&&c!==(c=he(j[23].def_artifact.value)+"")&&J(u,c),K&2&&b!==(b=j[23].def_artifact_label.value+"")&&J(P,b),z===(z=V(j,K))&&Y?Y.p(j,K):(Y.d(1),Y=z(j),Y&&(Y.c(),Y.m(S.parentNode,S))),K&2&&p!==(p=he(j[23].def_artifact.value)+"")&&J(R,p),K&2&&F!==(F=he(j[23].def_tech.value)+"")&&J(N,F),K&2&&g!==(g=he(j[23].def_tech.value)+"")&&J(O,g),K&2&&A!==(A=he(j[23].def_artifact.value)+"")&&J(X,A),K&2&&re!==(re=he(j[23].def_artifact.value)+"")&&J(Q,re)},d(j){j&&(i(r),i(l),i(s),i(n),i(f),i(d),i(m),i(_),i(u),i(E),i(P),i(I),i(S),i(R),i(C),i(N),i(T),i(O),i(w),i(X),i(ie),i(Q),i(H)),Y.d(j)}}}function Jf(a){let e,r=he(a[23].def_tech.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" DefensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," DefensiveTechniqueNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=he(s[23].def_tech.value)+"")&&J(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function Yf(a){let e,r=he(a[23].def_tech.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" SelectedDefensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," SelectedDefensiveTechniqueNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=he(s[23].def_tech.value)+"")&&J(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function Gl(a){let e=a[3].edge_is_unique(a[23].def_tech_label.value,a[23].def_artifact_rel_label.value,a[23].def_artifact_label.value),r,l=e&&Hl(a);return{c(){l&&l.c(),r=Ee()},l(t){l&&l.l(t),r=Ee()},m(t,s){l&&l.m(t,s),v(t,r,s)},p(t,s){s&10&&(e=t[3].edge_is_unique(t[23].def_tech_label.value,t[23].def_artifact_rel_label.value,t[23].def_artifact_label.value)),e?l?l.p(t,s):(l=Hl(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&i(r),l&&l.d(t)}}}function Xf(a){let e,r,l=Oe(a[1].da_to_def.results.bindings),t=[];for(let s=0;s<l.length;s+=1)t[s]=Gl(Ml(a,l,s));return{c(){e=k(`graph LR;
          `);for(let s=0;s<t.length;s+=1)t[s].c();r=Ee()},l(s){e=y(s,`graph LR;
          `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=Ee()},m(s,n){v(s,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,n);v(s,r,n)},p(s,n){if(n&90){l=Oe(s[1].da_to_def.results.bindings);let o;for(o=0;o<l.length;o+=1){const f=Ml(s,l,o);t[o]?t[o].p(f,n):(t[o]=Gl(f),t[o].c(),t[o].m(r.parentNode,r))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(s){s&&(i(e),i(r)),We(t,s)}}}function Kl(a){let e,r;return e=new $t({props:{$$slots:{default:[Xf]},$$scope:{ctx:a}}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t&262234&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){ve(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function Zf(a){let e,r,l,t,s,n,o,f,d,h,m,_,c,u=a[6].length+"",E,b,P,I,D;const S=a[12].header,p=it(S,a,a[18],$l),R=a[12].default,C=it(R,a,a[18],null),F=[Kf,Gf,Qf],N=[];function T(g,O){return g[1]?g[1].da_to_def.results.bindings.length>0?1:2:0}return o=T(a),f=N[o]=F[o](a),{c(){e=B("dialog"),r=B("div"),p&&p.c(),l=k(`
    Select Countermeasure Techniques
    `),C&&C.c(),t=W(),s=B("hr"),n=W(),f.c(),d=W(),h=B("hr"),m=W(),_=B("button"),c=k("Insert ("),E=k(u),b=k(")"),this.h()},l(g){e=M(g,"DIALOG",{class:!0});var O=pe(e);r=M(O,"DIV",{class:!0});var w=pe(r);p&&p.l(w),l=y(w,`
    Select Countermeasure Techniques
    `),C&&C.l(w),t=x(w),s=M(w,"HR",{}),n=x(w),f.l(w),d=x(w),h=M(w,"HR",{}),m=x(w),_=M(w,"BUTTON",{class:!0});var A=pe(_);c=y(A,"Insert ("),E=y(A,u),b=y(A,")"),A.forEach(i),w.forEach(i),O.forEach(i),this.h()},h(){_.autofocus=!0,Z(_,"class","svelte-1yq7x1p"),Z(r,"class","svelte-1yq7x1p"),Z(e,"class","svelte-1yq7x1p")},m(g,O){v(g,e,O),L(e,r),p&&p.m(r,null),L(r,l),C&&C.m(r,null),L(r,t),L(r,s),L(r,n),N[o].m(r,null),L(r,d),L(r,h),L(r,m),L(r,_),L(_,c),L(_,E),L(_,b),a[15](e),P=!0,_.focus(),I||(D=[ge(_,"click",a[9]),ge(r,"click",Ct(a[13])),ge(e,"close",a[16]),ge(e,"click",Mt(a[17]))],I=!0)},p(g,[O]){p&&p.p&&(!P||O&262144)&&ft(p,S,g,g[18],P?ct(S,g[18],O,Hf):ut(g[18]),$l),C&&C.p&&(!P||O&262144)&&ft(C,R,g,g[18],P?ct(R,g[18],O,null):ut(g[18]),null);let w=o;o=T(g),o===w?N[o].p(g,O):(pt(),ve(N[w],1,1,()=>{N[w]=null}),gt(),f=N[o],f?f.p(g,O):(f=N[o]=F[o](g),f.c()),de(f,1),f.m(r,d)),(!P||O&64)&&u!==(u=g[6].length+"")&&J(E,u)},i(g){P||(de(p,g),de(C,g),de(f),P=!0)},o(g){ve(p,g),ve(C,g),ve(f),P=!1},d(g){g&&i(e),p&&p.d(g),C&&C.d(g),N[o].d(),a[15](null),I=!1,mt(D)}}}function Wf(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{show_defend_modal:f}=e,{parent_node:d}=e,{data:h}=e,m;const _=qt();et(a,_,T=>r(20,s=T));const c=zt();et(a,c,T=>r(19,t=T));let u=new Xt;function E(T){l.includes(T)?r(6,l=l.filter(g=>g!==T)):l.push(T),r(6,l)}window.da_to_def_callback=function(T){E(T)};function b(){let T=0,g=200,O=100;for(const w of l){let A=h.da_to_def.results.bindings.find(X=>he(X.def_tech.value)==w);A&&(Ht(_,c,d,"countermeasureSelectorNode",A.def_tech_label.value,"d3f:"+he(A.def_tech.value),d.data.sequence,d.position.x+T*g,d.position.y-O,182,63,A.def_artifact_rel_label.value,!1),T+=1)}_.set(s),c.set(t),m&&m.close(),r(6,l=[])}let P=new Set,I=[],D=[];As(I,D)&&(D=[]);function S(T){for(const g of l){let O=h.da_to_def.results.bindings.find(w=>he(w.def_tech.value)==g);T.includes(O.def_tactic_label.value)&&r(6,l=l.filter(w=>w!==g))}r(6,l)}function p(T){Nt.call(this,a,T)}function R(T){D=T,r(4,D)}function C(T){Ze[T?"unshift":"push"](()=>{m=T,r(2,m)})}const F=()=>r(0,f=!1),N=()=>{m.close(),r(6,l=[])};return a.$$set=T=>{"show_defend_modal"in T&&r(0,f=T.show_defend_modal),"parent_node"in T&&r(10,d=T.parent_node),"data"in T&&r(1,h=T.data),"$$scope"in T&&r(18,o=T.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&f&&m&&(m.showModal(),r(3,u=new Xt)),a.$$.dirty&5&&!f&&m&&m.close(),a.$$.dirty&2050&&h&&(h.da_to_def.results.bindings.forEach(T=>{P.add(T.def_tactic_label.value)}),r(11,P),r(1,h)),a.$$.dirty&2048&&r(5,I=Array.from(P).sort(function(T,g){return Er[T]-Er[g]})),a.$$.dirty&16&&S(D),a.$$.dirty&24&&u.reset(D)},r(6,l=[]),[f,h,m,u,D,I,l,_,c,b,d,P,n,p,R,C,F,N,o]}class xf extends nt{constructor(e){super(),ot(this,e,Wf,Zf,st,{show_defend_modal:0,parent_node:10,data:1})}}function Jl(a,e,r){const l=a.slice();return l[26]=e[r],l}function Yl(a,e,r){const l=a.slice();return l[29]=e[r],l}function Xl(a,e,r){const l=a.slice();return l[32]=e[r],l}function Zl(a,e,r){const l=a.slice();return l[26]=e[r],l}function Wl(a,e,r){const l=a.slice();return l[29]=e[r],l}const eu=a=>({}),xl=a=>({});function tu(a){let e;return{c(){e=k("No related weaknesses in this release.")},l(r){e=y(r,"No related weaknesses in this release.")},m(r,l){v(r,e,l)},p:Se,i:Se,o:Se,d(r){r&&i(e)}}}function ru(a){let e,r;return e=new $t({props:{$$slots:{default:[au]},$$scope:{ctx:a}}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t[0]&4194750&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){ve(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function lu(a){let e,r="Loading...";return{c(){e=B("div"),e.textContent=r},l(l){e=M(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:Se,i:Se,o:Se,d(l){l&&i(e)}}}function ea(a){let e,r=Oe(a[32]["d3f:outbound"]),l=[];for(let t=0;t<r.length;t+=1)l[t]=la(Zl(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&430){r=Oe(t[32]["d3f:outbound"]);let n;for(n=0;n<r.length;n+=1){const o=Zl(t,r,n);l[n]?l[n].p(o,s):(l[n]=la(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&i(e),We(l,t)}}}function ta(a){let e,r=a[32]["@id"]+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" selected_inbound_node;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," selected_inbound_node;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n[0]&160&&r!==(r=s[32]["@id"]+"")&&J(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function ra(a){let e=a[32]["@id"]+"",r,l,t=a[32]["rdfs:label"][0]+"",s,n,o="-->",f,d,h=he(a[26]["@id"])+"",m,_,c=a[29]["@id"]+"",u,E,b=a[7].i(a[29]["@id"])["rdfs:label"][0]+"",P,I,D=a[32]["@id"]+"",S,p,R=a[32]["@id"]+"",C,F,N,T,g=a[8].includes(a[32]["@id"]),O,w=a[29]["@id"]+"",A,X,ie=a[29]["@id"]+"",re,Q,H,V,z=a[32]["@id"]+"",Y,j,K=a[32]["@id"]+"",Ce,ke,le=a[29]["@id"]+"",me,ce,_e=a[3](a[29])+"",De,je,ee=g&&ta(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),d=k(" | "),m=k(h),_=k(" | "),u=k(c),E=k('["'),P=k(b),I=k(`"];
                class `),S=k(D),p=k(" inbound_node; style "),C=k(R),F=k(" fill:"),N=k(a[1]),T=k(`;
                `),ee&&ee.c(),O=k(`
                class `),A=k(w),X=k(" RootArtifactNode; style "),re=k(ie),Q=k(" fill:"),H=k(a[2]),V=k(`;
                click `),Y=k(z),j=k(` href "javascript:da_to_weak_callback('`),Ce=k(K),ke=k(`')"; click `),me=k(le),ce=k(' href "'),De=k(_e),je=k('";')},l(q){r=y(q,e),l=y(q,'["'),s=y(q,t),n=y(q,'"] '),f=y(q,o),d=y(q," | "),m=y(q,h),_=y(q," | "),u=y(q,c),E=y(q,'["'),P=y(q,b),I=y(q,`"];
                class `),S=y(q,D),p=y(q," inbound_node; style "),C=y(q,R),F=y(q," fill:"),N=y(q,a[1]),T=y(q,`;
                `),ee&&ee.l(q),O=y(q,`
                class `),A=y(q,w),X=y(q," RootArtifactNode; style "),re=y(q,ie),Q=y(q," fill:"),H=y(q,a[2]),V=y(q,`;
                click `),Y=y(q,z),j=y(q,` href "javascript:da_to_weak_callback('`),Ce=y(q,K),ke=y(q,`')"; click `),me=y(q,le),ce=y(q,' href "'),De=y(q,_e),je=y(q,'";')},m(q,se){v(q,r,se),v(q,l,se),v(q,s,se),v(q,n,se),v(q,f,se),v(q,d,se),v(q,m,se),v(q,_,se),v(q,u,se),v(q,E,se),v(q,P,se),v(q,I,se),v(q,S,se),v(q,p,se),v(q,C,se),v(q,F,se),v(q,N,se),v(q,T,se),ee&&ee.m(q,se),v(q,O,se),v(q,A,se),v(q,X,se),v(q,re,se),v(q,Q,se),v(q,H,se),v(q,V,se),v(q,Y,se),v(q,j,se),v(q,Ce,se),v(q,ke,se),v(q,me,se),v(q,ce,se),v(q,De,se),v(q,je,se)},p(q,se){se[0]&160&&e!==(e=q[32]["@id"]+"")&&J(r,e),se[0]&160&&t!==(t=q[32]["rdfs:label"][0]+"")&&J(s,t),se[0]&160&&h!==(h=he(q[26]["@id"])+"")&&J(m,h),se[0]&160&&c!==(c=q[29]["@id"]+"")&&J(u,c),se[0]&160&&b!==(b=q[7].i(q[29]["@id"])["rdfs:label"][0]+"")&&J(P,b),se[0]&160&&D!==(D=q[32]["@id"]+"")&&J(S,D),se[0]&160&&R!==(R=q[32]["@id"]+"")&&J(C,R),se[0]&2&&J(N,q[1]),se[0]&416&&(g=q[8].includes(q[32]["@id"])),g?ee?ee.p(q,se):(ee=ta(q),ee.c(),ee.m(O.parentNode,O)):ee&&(ee.d(1),ee=null),se[0]&160&&w!==(w=q[29]["@id"]+"")&&J(A,w),se[0]&160&&ie!==(ie=q[29]["@id"]+"")&&J(re,ie),se[0]&4&&J(H,q[2]),se[0]&160&&z!==(z=q[32]["@id"]+"")&&J(Y,z),se[0]&160&&K!==(K=q[32]["@id"]+"")&&J(Ce,K),se[0]&160&&le!==(le=q[29]["@id"]+"")&&J(me,le),se[0]&168&&_e!==(_e=q[3](q[29])+"")&&J(De,_e)},d(q){q&&(i(r),i(l),i(s),i(n),i(f),i(d),i(m),i(_),i(u),i(E),i(P),i(I),i(S),i(p),i(C),i(F),i(N),i(T),i(O),i(A),i(X),i(re),i(Q),i(H),i(V),i(Y),i(j),i(Ce),i(ke),i(me),i(ce),i(De),i(je)),ee&&ee.d(q)}}}function la(a){let e,r=Oe(a[32][a[26]["@id"]]),l=[];for(let t=0;t<r.length;t+=1)l[t]=ra(Wl(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&430){r=Oe(t[32][t[26]["@id"]]);let n;for(n=0;n<r.length;n+=1){const o=Wl(t,r,n);l[n]?l[n].p(o,s):(l[n]=ra(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&i(e),We(l,t)}}}function aa(a){let e,r=a[32]["d3f:outbound"]&&ea(a);return{c(){r&&r.c(),e=Ee()},l(l){r&&r.l(l),e=Ee()},m(l,t){r&&r.m(l,t),v(l,e,t)},p(l,t){l[32]["d3f:outbound"]?r?r.p(l,t):(r=ea(l),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(l){l&&i(e),r&&r.d(l)}}}function sa(a){let e,r=Oe(a[7].i(a[5].description["@id"])["d3f:outbound"]),l=[];for(let t=0;t<r.length;t+=1)l[t]=oa(Jl(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&184){r=Oe(t[7].i(t[5].description["@id"])["d3f:outbound"]);let n;for(n=0;n<r.length;n+=1){const o=Jl(t,r,n);l[n]?l[n].p(o,s):(l[n]=oa(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&i(e),We(l,t)}}}function na(a){let e=a[5].description["@id"]+"",r,l,t=a[7].i(a[5].description["@id"])["rdfs:label"][0]+"",s,n,o="-->",f,d,h=he(a[26]["@id"])+"",m,_,c=a[29]["@id"]+"",u,E,b=a[7].graph[a[7].index[a[29]["@id"]]]["rdfs:label"][0]+"",P,I,D=a[5].description["@id"]+"",S,p,R=a[29]["@id"]+"",C,F,N=a[5].description["@id"]+"",T,g,O=a[3](a[5].description["@id"])+"",w,A,X=a[29]["@id"]+"",ie,re,Q=a[4](a[29])+"",H,V;return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),d=k(" | "),m=k(h),_=k(" | "),u=k(c),E=k('["'),P=k(b),I=k('"]; class '),S=k(D),p=k(" RootArtifactNode; class "),C=k(R),F=k(` ArtifactNode;
              click `),T=k(N),g=k(' href "'),w=k(O),A=k('"; click '),ie=k(X),re=k(' href "'),H=k(Q),V=k('";')},l(z){r=y(z,e),l=y(z,'["'),s=y(z,t),n=y(z,'"] '),f=y(z,o),d=y(z," | "),m=y(z,h),_=y(z," | "),u=y(z,c),E=y(z,'["'),P=y(z,b),I=y(z,'"]; class '),S=y(z,D),p=y(z," RootArtifactNode; class "),C=y(z,R),F=y(z,` ArtifactNode;
              click `),T=y(z,N),g=y(z,' href "'),w=y(z,O),A=y(z,'"; click '),ie=y(z,X),re=y(z,' href "'),H=y(z,Q),V=y(z,'";')},m(z,Y){v(z,r,Y),v(z,l,Y),v(z,s,Y),v(z,n,Y),v(z,f,Y),v(z,d,Y),v(z,m,Y),v(z,_,Y),v(z,u,Y),v(z,E,Y),v(z,P,Y),v(z,I,Y),v(z,S,Y),v(z,p,Y),v(z,C,Y),v(z,F,Y),v(z,T,Y),v(z,g,Y),v(z,w,Y),v(z,A,Y),v(z,ie,Y),v(z,re,Y),v(z,H,Y),v(z,V,Y)},p(z,Y){Y[0]&32&&e!==(e=z[5].description["@id"]+"")&&J(r,e),Y[0]&160&&t!==(t=z[7].i(z[5].description["@id"])["rdfs:label"][0]+"")&&J(s,t),Y[0]&160&&h!==(h=he(z[26]["@id"])+"")&&J(m,h),Y[0]&160&&c!==(c=z[29]["@id"]+"")&&J(u,c),Y[0]&160&&b!==(b=z[7].graph[z[7].index[z[29]["@id"]]]["rdfs:label"][0]+"")&&J(P,b),Y[0]&32&&D!==(D=z[5].description["@id"]+"")&&J(S,D),Y[0]&160&&R!==(R=z[29]["@id"]+"")&&J(C,R),Y[0]&32&&N!==(N=z[5].description["@id"]+"")&&J(T,N),Y[0]&40&&O!==(O=z[3](z[5].description["@id"])+"")&&J(w,O),Y[0]&160&&X!==(X=z[29]["@id"]+"")&&J(ie,X),Y[0]&176&&Q!==(Q=z[4](z[29])+"")&&J(H,Q)},d(z){z&&(i(r),i(l),i(s),i(n),i(f),i(d),i(m),i(_),i(u),i(E),i(P),i(I),i(S),i(p),i(C),i(F),i(T),i(g),i(w),i(A),i(ie),i(re),i(H),i(V))}}}function oa(a){let e,r=Oe(a[7].i(a[5].description["@id"])[a[26]["@id"]]),l=[];for(let t=0;t<r.length;t+=1)l[t]=na(Yl(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&184){r=Oe(t[7].i(t[5].description["@id"])[t[26]["@id"]]);let n;for(n=0;n<r.length;n+=1){const o=Yl(t,r,n);l[n]?l[n].p(o,s):(l[n]=na(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&i(e),We(l,t)}}}function au(a){let e,r,l=a[7].i(a[5].description["@id"])&&a[7].i(a[5].description["@id"])["d3f:outbound"],t,s=Oe(a[7].graph.filter(a[18])),n=[];for(let f=0;f<s.length;f+=1)n[f]=aa(Xl(a,s,f));let o=l&&sa(a);return{c(){e=k(`graph LR;
        `);for(let f=0;f<n.length;f+=1)n[f].c();r=W(),o&&o.c(),t=Ee()},l(f){e=y(f,`graph LR;
        `);for(let d=0;d<n.length;d+=1)n[d].l(f);r=x(f),o&&o.l(f),t=Ee()},m(f,d){v(f,e,d);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(f,d);v(f,r,d),o&&o.m(f,d),v(f,t,d)},p(f,d){if(d[0]&430){s=Oe(f[7].graph.filter(f[18]));let h;for(h=0;h<s.length;h+=1){const m=Xl(f,s,h);n[h]?n[h].p(m,d):(n[h]=aa(m),n[h].c(),n[h].m(r.parentNode,r))}for(;h<n.length;h+=1)n[h].d(1);n.length=s.length}d[0]&160&&(l=f[7].i(f[5].description["@id"])&&f[7].i(f[5].description["@id"])["d3f:outbound"]),l?o?o.p(f,d):(o=sa(f),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},d(f){f&&(i(e),i(r),i(t)),We(n,f),o&&o.d(f)}}}function su(a){let e,r,l,t,s,n,o,f,d,h,m,_,c,u=a[8].length+"",E,b,P,I,D;const S=a[16].header,p=it(S,a,a[22],xl),R=a[16].default,C=it(R,a,a[22],null),F=[lu,ru,tu],N=[];function T(g,O){return g[5]?g[7].graph.length>0?1:2:0}return o=T(a),f=N[o]=F[o](a),{c(){e=B("dialog"),r=B("div"),p&&p.c(),l=k(`
    Select Weaknesses
    `),C&&C.c(),t=W(),s=B("hr"),n=W(),f.c(),d=W(),h=B("hr"),m=W(),_=B("button"),c=k("Insert ("),E=k(u),b=k(")"),this.h()},l(g){e=M(g,"DIALOG",{class:!0});var O=pe(e);r=M(O,"DIV",{class:!0});var w=pe(r);p&&p.l(w),l=y(w,`
    Select Weaknesses
    `),C&&C.l(w),t=x(w),s=M(w,"HR",{}),n=x(w),f.l(w),d=x(w),h=M(w,"HR",{}),m=x(w),_=M(w,"BUTTON",{class:!0});var A=pe(_);c=y(A,"Insert ("),E=y(A,u),b=y(A,")"),A.forEach(i),w.forEach(i),O.forEach(i),this.h()},h(){_.autofocus=!0,Z(_,"class","svelte-1resfch"),Z(r,"class","svelte-1resfch"),Z(e,"class","svelte-1resfch")},m(g,O){v(g,e,O),L(e,r),p&&p.m(r,null),L(r,l),C&&C.m(r,null),L(r,t),L(r,s),L(r,n),N[o].m(r,null),L(r,d),L(r,h),L(r,m),L(r,_),L(_,c),L(_,E),L(_,b),a[19](e),P=!0,_.focus(),I||(D=[ge(_,"click",a[11]),ge(r,"click",Ct(a[17])),ge(e,"close",a[20]),ge(e,"click",Mt(a[21]))],I=!0)},p(g,O){p&&p.p&&(!P||O[0]&4194304)&&ft(p,S,g,g[22],P?ct(S,g[22],O,eu):ut(g[22]),xl),C&&C.p&&(!P||O[0]&4194304)&&ft(C,R,g,g[22],P?ct(R,g[22],O,null):ut(g[22]),null);let w=o;o=T(g),o===w?N[o].p(g,O):(pt(),ve(N[w],1,1,()=>{N[w]=null}),gt(),f=N[o],f?f.p(g,O):(f=N[o]=F[o](g),f.c()),de(f,1),f.m(r,d)),(!P||O[0]&256)&&u!==(u=g[8].length+"")&&J(E,u)},i(g){P||(de(p,g),de(C,g),de(f),P=!0)},o(g){ve(p,g),ve(C,g),ve(f),P=!1},d(g){g&&i(e),p&&p.d(g),C&&C.d(g),N[o].d(),a[19](null),I=!1,mt(D)}}}function nu(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{outbound_color:f="#fff4dd"}=e,{inbound_color:d="#fff4dd"}=e,{root_color:h="#fff4dd"}=e,{link_function:m=w=>`/dao/artifact/${w["@id"]}`}=e,{inbound_link_function:_=m}=e,{root_link_function:c=w=>`/dao/artifact/${w["@id"]}`}=e,{outbound_link_function:u=m}=e,{show_weakness_modal:E}=e,{parent_node:b}=e,{data:P}=e,I;const D=qt();et(a,D,w=>r(24,s=w));const S=zt();et(a,S,w=>r(23,t=w));let p;function R(w){l.includes(w)?r(8,l=l.filter(A=>A!==w)):l.push(w),r(8,l),r(8,l)}window.da_to_weak_callback=function(w){R(w)};function C(){let w=0,A=200,X=100;for(const ie of l){let re=P.da_to_weak["@graph"].find(Q=>Q["@id"]==ie);re&&(Ht(D,S,b,"vulnerabilitySelectorNode",re["rdfs:label"],re["d3f:cwe-id"],b.data.sequence,b.position.x+w*A,b.position.y+X,182,63,re["d3f:outbound"][0]["@id"].replace("d3f:",""),!1),w+=1)}D.set(s),S.set(t),I&&I.close(),r(8,l=[])}function F(w){Nt.call(this,a,w)}const N=w=>w["@id"]!=P.description["@id"];function T(w){Ze[w?"unshift":"push"](()=>{I=w,r(6,I)})}const g=()=>r(0,E=!1),O=()=>{I.close(),r(8,l=[])};return a.$$set=w=>{"outbound_color"in w&&r(12,f=w.outbound_color),"inbound_color"in w&&r(1,d=w.inbound_color),"root_color"in w&&r(2,h=w.root_color),"link_function"in w&&r(13,m=w.link_function),"inbound_link_function"in w&&r(14,_=w.inbound_link_function),"root_link_function"in w&&r(3,c=w.root_link_function),"outbound_link_function"in w&&r(4,u=w.outbound_link_function),"show_weakness_modal"in w&&r(0,E=w.show_weakness_modal),"parent_node"in w&&r(15,b=w.parent_node),"data"in w&&r(5,P=w.data),"$$scope"in w&&r(22,o=w.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&65&&E&&I&&I.showModal(),a.$$.dirty[0]&65&&!E&&I&&I.close(),a.$$.dirty[0]&32&&P&&r(7,p=new gr(P.da_to_weak,{index:!0}))},r(8,l=[]),[E,d,h,c,u,P,I,p,l,D,S,C,f,m,_,b,n,F,N,T,g,O,o]}class ou extends nt{constructor(e){super(),ot(this,e,nu,su,st,{outbound_color:12,inbound_color:1,root_color:2,link_function:13,inbound_link_function:14,root_link_function:3,outbound_link_function:4,show_weakness_modal:0,parent_node:15,data:5},null,[-1,-1])}}function ia(a,e,r){const l=a.slice();return l[31]=e[r],l}function fa(a,e,r){const l=a.slice();return l[34]=e[r],l}function ua(a,e,r){const l=a.slice();return l[37]=e[r],l}const iu=a=>({}),ca=a=>({});function fu(a){let e;return{c(){e=k("No related parts/control in this release")},l(r){e=y(r,"No related parts/control in this release")},m(r,l){v(r,e,l)},p:Se,i:Se,o:Se,d(r){r&&i(e)}}}function uu(a){let e,r;return e=new $t({props:{$$slots:{default:[du]},$$scope:{ctx:a}}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t[0]&134217934&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){ve(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function cu(a){let e,r="Loading...";return{c(){e=B("div"),e.textContent=r},l(l){e=M(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:Se,i:Se,o:Se,d(l){l&&i(e)}}}function da(a){let e,r=Oe(a[31]["d3f:outbound"].filter(a[23])),l=[];for(let t=0;t<r.length;t+=1)l[t]=ba(fa(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&206){r=Oe(t[31]["d3f:outbound"].filter(t[23]));let n;for(n=0;n<r.length;n+=1){const o=fa(t,r,n);l[n]?l[n].p(o,s):(l[n]=ba(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&i(e),We(l,t)}}}function ha(a){let e,r,l=a[31]["@id"]!=a[2].data.d3f_class&&_a(a),t=a[37]["@id"]!=a[2].data.d3f_class&&va(a);return{c(){l&&l.c(),e=W(),t&&t.c(),r=Ee()},l(s){l&&l.l(s),e=x(s),t&&t.l(s),r=Ee()},m(s,n){l&&l.m(s,n),v(s,e,n),t&&t.m(s,n),v(s,r,n)},p(s,n){s[31]["@id"]!=s[2].data.d3f_class?l?l.p(s,n):(l=_a(s),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),s[37]["@id"]!=s[2].data.d3f_class?t?t.p(s,n):(t=va(s),t.c(),t.m(r.parentNode,r)):t&&(t.d(1),t=null)},d(s){s&&(i(e),i(r)),l&&l.d(s),t&&t.d(s)}}}function _a(a){let e,r=a[31]["@id"]+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" selected_outbound_node;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," selected_outbound_node;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n[0]&72&&r!==(r=s[31]["@id"]+"")&&J(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function va(a){let e,r=a[37]["@id"]+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" selected_outbound_node;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," selected_outbound_node;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n[0]&74&&r!==(r=s[37]["@id"]+"")&&J(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function ma(a){let e,r=a[31]["@id"]+"",l,t,s=a[31]["@id"]+"",n,o,f=he(a[34]["@id"])+"",d,h,m=a[37]["@id"]+"",_,c;return{c(){e=k("click "),l=k(r),t=k(` href "javascript:da_to_neighbors_callback('`),n=k(s),o=k("', '"),d=k(f),h=k("','"),_=k(m),c=k(`')";`)},l(u){e=y(u,"click "),l=y(u,r),t=y(u,` href "javascript:da_to_neighbors_callback('`),n=y(u,s),o=y(u,"', '"),d=y(u,f),h=y(u,"','"),_=y(u,m),c=y(u,`')";`)},m(u,E){v(u,e,E),v(u,l,E),v(u,t,E),v(u,n,E),v(u,o,E),v(u,d,E),v(u,h,E),v(u,_,E),v(u,c,E)},p(u,E){E[0]&72&&r!==(r=u[31]["@id"]+"")&&J(l,r),E[0]&72&&s!==(s=u[31]["@id"]+"")&&J(n,s),E[0]&74&&f!==(f=he(u[34]["@id"])+"")&&J(d,f),E[0]&74&&m!==(m=u[37]["@id"]+"")&&J(_,m)},d(u){u&&(i(e),i(l),i(t),i(n),i(o),i(d),i(h),i(_),i(c))}}}function pa(a){let e,r=a[37]["@id"]+"",l,t,s=a[31]["@id"]+"",n,o,f=he(a[34]["@id"])+"",d,h,m=a[37]["@id"]+"",_,c;return{c(){e=k("click "),l=k(r),t=k(` href "javascript:da_to_neighbors_callback('`),n=k(s),o=k("', '"),d=k(f),h=k("','"),_=k(m),c=k(`')";`)},l(u){e=y(u,"click "),l=y(u,r),t=y(u,` href "javascript:da_to_neighbors_callback('`),n=y(u,s),o=y(u,"', '"),d=y(u,f),h=y(u,"','"),_=y(u,m),c=y(u,`')";`)},m(u,E){v(u,e,E),v(u,l,E),v(u,t,E),v(u,n,E),v(u,o,E),v(u,d,E),v(u,h,E),v(u,_,E),v(u,c,E)},p(u,E){E[0]&74&&r!==(r=u[37]["@id"]+"")&&J(l,r),E[0]&72&&s!==(s=u[31]["@id"]+"")&&J(n,s),E[0]&74&&f!==(f=he(u[34]["@id"])+"")&&J(d,f),E[0]&74&&m!==(m=u[37]["@id"]+"")&&J(_,m)},d(u){u&&(i(e),i(l),i(t),i(n),i(o),i(d),i(h),i(_),i(c))}}}function ga(a){let e=a[31]["@id"]+"",r,l,t=a[31]["rdfs:label"][0]+"",s,n,o="-->",f,d,h=he(a[34]["@id"])+"",m,_,c=a[37]["@id"]+"",u,E,b=a[6].i(a[37]["@id"])["rdfs:label"][0]+"",P,I,D=a[37]["@id"]+"",S,p,R=a[7].some(T),C,F,N;function T(...A){return a[21](a[31],a[34],a[37],...A)}let g=R&&ha(a),O=a[31]["@id"]!=a[2].data.d3f_class&&ma(a),w=a[37]["@id"]!=a[2].data.d3f_class&&pa(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),d=k(" | "),m=k(h),_=k(" | "),u=k(c),E=k('["'),P=k(b),I=k(`"];
                class `),S=k(D),p=k(` outbound;
                `),g&&g.c(),C=W(),O&&O.c(),F=W(),w&&w.c(),N=Ee()},l(A){r=y(A,e),l=y(A,'["'),s=y(A,t),n=y(A,'"] '),f=y(A,o),d=y(A," | "),m=y(A,h),_=y(A," | "),u=y(A,c),E=y(A,'["'),P=y(A,b),I=y(A,`"];
                class `),S=y(A,D),p=y(A,` outbound;
                `),g&&g.l(A),C=x(A),O&&O.l(A),F=x(A),w&&w.l(A),N=Ee()},m(A,X){v(A,r,X),v(A,l,X),v(A,s,X),v(A,n,X),v(A,f,X),v(A,d,X),v(A,m,X),v(A,_,X),v(A,u,X),v(A,E,X),v(A,P,X),v(A,I,X),v(A,S,X),v(A,p,X),g&&g.m(A,X),v(A,C,X),O&&O.m(A,X),v(A,F,X),w&&w.m(A,X),v(A,N,X)},p(A,X){a=A,X[0]&72&&e!==(e=a[31]["@id"]+"")&&J(r,e),X[0]&72&&t!==(t=a[31]["rdfs:label"][0]+"")&&J(s,t),X[0]&74&&h!==(h=he(a[34]["@id"])+"")&&J(m,h),X[0]&74&&c!==(c=a[37]["@id"]+"")&&J(u,c),X[0]&74&&b!==(b=a[6].i(a[37]["@id"])["rdfs:label"][0]+"")&&J(P,b),X[0]&74&&D!==(D=a[37]["@id"]+"")&&J(S,D),X[0]&202&&(R=a[7].some(T)),R?g?g.p(a,X):(g=ha(a),g.c(),g.m(C.parentNode,C)):g&&(g.d(1),g=null),a[31]["@id"]!=a[2].data.d3f_class?O?O.p(a,X):(O=ma(a),O.c(),O.m(F.parentNode,F)):O&&(O.d(1),O=null),a[37]["@id"]!=a[2].data.d3f_class?w?w.p(a,X):(w=pa(a),w.c(),w.m(N.parentNode,N)):w&&(w.d(1),w=null)},d(A){A&&(i(r),i(l),i(s),i(n),i(f),i(d),i(m),i(_),i(u),i(E),i(P),i(I),i(S),i(p),i(C),i(F),i(N)),g&&g.d(A),O&&O.d(A),w&&w.d(A)}}}function ba(a){let e,r=Oe(a[31][a[34]["@id"]]),l=[];for(let t=0;t<r.length;t+=1)l[t]=ga(ua(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&206){r=Oe(t[31][t[34]["@id"]]);let n;for(n=0;n<r.length;n+=1){const o=ua(t,r,n);l[n]?l[n].p(o,s):(l[n]=ga(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&i(e),We(l,t)}}}function Ea(a){let e,r=a[31]["d3f:outbound"]&&da(a);return{c(){r&&r.c(),e=Ee()},l(l){r&&r.l(l),e=Ee()},m(l,t){r&&r.m(l,t),v(l,e,t)},p(l,t){l[31]["d3f:outbound"]?r?r.p(l,t):(r=da(l),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(l){l&&i(e),r&&r.d(l)}}}function du(a){let e,r,l=Oe(a[6].graph.filter(a[22])),t=[];for(let s=0;s<l.length;s+=1)t[s]=Ea(ia(a,l,s));return{c(){e=k(`graph LR;
        `);for(let s=0;s<t.length;s+=1)t[s].c();r=Ee()},l(s){e=y(s,`graph LR;
        `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=Ee()},m(s,n){v(s,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,n);v(s,r,n)},p(s,n){if(n[0]&206){l=Oe(s[6].graph.filter(s[22]));let o;for(o=0;o<l.length;o+=1){const f=ia(s,l,o);t[o]?t[o].p(f,n):(t[o]=Ea(f),t[o].c(),t[o].m(r.parentNode,r))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(s){s&&(i(e),i(r)),We(t,s)}}}function hu(a){let e,r,l,t,s,n,o,f,d,h,m,_,c,u=a[7].length+"",E,b,P,I,D;const S=a[19].header,p=it(S,a,a[27],ca),R=a[19].default,C=it(R,a,a[27],null),F=[cu,uu,fu],N=[];function T(g,O){return g[3]?g[5]&&g[6].graph.length>0?1:2:0}return o=T(a),f=N[o]=F[o](a),{c(){e=B("dialog"),r=B("div"),p&&p.c(),l=k(`
    Select Parts/Control Neighbors
    `),C&&C.c(),t=W(),s=B("hr"),n=W(),f.c(),d=W(),h=B("hr"),m=W(),_=B("button"),c=k("Insert ("),E=k(u),b=k(")"),this.h()},l(g){e=M(g,"DIALOG",{class:!0});var O=pe(e);r=M(O,"DIV",{class:!0});var w=pe(r);p&&p.l(w),l=y(w,`
    Select Parts/Control Neighbors
    `),C&&C.l(w),t=x(w),s=M(w,"HR",{}),n=x(w),f.l(w),d=x(w),h=M(w,"HR",{}),m=x(w),_=M(w,"BUTTON",{class:!0});var A=pe(_);c=y(A,"Insert ("),E=y(A,u),b=y(A,")"),A.forEach(i),w.forEach(i),O.forEach(i),this.h()},h(){_.autofocus=!0,Z(_,"class","svelte-x2no78"),Z(r,"class","svelte-x2no78"),Z(e,"class","svelte-x2no78")},m(g,O){v(g,e,O),L(e,r),p&&p.m(r,null),L(r,l),C&&C.m(r,null),L(r,t),L(r,s),L(r,n),N[o].m(r,null),L(r,d),L(r,h),L(r,m),L(r,_),L(_,c),L(_,E),L(_,b),a[24](e),P=!0,_.focus(),I||(D=[ge(_,"click",a[10]),ge(r,"click",Ct(a[20])),ge(e,"close",a[25]),ge(e,"click",Mt(a[26]))],I=!0)},p(g,O){p&&p.p&&(!P||O[0]&134217728)&&ft(p,S,g,g[27],P?ct(S,g[27],O,iu):ut(g[27]),ca),C&&C.p&&(!P||O[0]&134217728)&&ft(C,R,g,g[27],P?ct(R,g[27],O,null):ut(g[27]),null);let w=o;o=T(g),o===w?N[o].p(g,O):(pt(),ve(N[w],1,1,()=>{N[w]=null}),gt(),f=N[o],f?f.p(g,O):(f=N[o]=F[o](g),f.c()),de(f,1),f.m(r,d)),(!P||O[0]&128)&&u!==(u=g[7].length+"")&&J(E,u)},i(g){P||(de(p,g),de(C,g),de(f),P=!0)},o(g){ve(p,g),ve(C,g),ve(f),P=!1},d(g){g&&i(e),p&&p.d(g),C&&C.d(g),N[o].d(),a[24](null),I=!1,mt(D)}}}function _u(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{empty_message:f="has no direct neighbors in this release."}=e,{outbound_color:d="#fff4dd"}=e,{inbound_color:h="#fff4dd"}=e,{root_color:m="#fff4dd"}=e,{link_function:_=Q=>`/dao/artifact/${Q["@id"]}`}=e,{inbound_link_function:c=_}=e,{root_link_function:u=Q=>`/dao/artifact/${Q["@id"]}`}=e,{outbound_link_function:E=_}=e,{show_neighbors_modal:b}=e,{neighbor_filter_labels:P}=e,{parent_node:I}=e,{data:D}=e,S,p=!1;const R=qt();et(a,R,Q=>r(29,s=Q));const C=zt();et(a,C,Q=>r(28,t=Q));let F;function N(Q){l.some(H=>H.source==Q.source&&H.relation==Q.relation&&H.target==Q.target)?r(7,l=l.filter(H=>H.source!=Q.source||H.relation!=Q.relation||H.target!=Q.target)):l.push(Q),r(7,l),r(7,l)}window.da_to_neighbors_callback=function(Q,H,V){N({source:Q,relation:H,target:V})};function T(){let Q=0,H=0,V=200,z=125;for(const Y of l){let j=D.neighbors["@graph"].find(Ce=>Ce["@id"]==Y.source),K=D.neighbors["@graph"].find(Ce=>Ce["@id"]==Y.target);if(j&&K){let Ce=I.data.d3f_class==j["@id"],ke=Ce?K:j;Ht(R,C,I,"artifactSelectorNode",ke["rdfs:label"][0],ke["@id"],I.data.sequence,I.position.x+(Ce?Q:H)*V,Ce?I.position.y+z:I.position.y-z,182,63,Y.relation,Ce),Ce?Q+=1:H+=1}}R.set(s),C.set(t),S&&(S.close(),r(5,p=!1)),r(7,l=[])}function g(Q){Nt.call(this,a,Q)}const O=(Q,H,V,z)=>z.source==Q["@id"]&&z.relation==he(H["@id"])&&z.target==V["@id"],w=Q=>Q["@id"]!=D.description["@id"],A=Q=>P.length==0||P.includes(Q["@id"]);function X(Q){Ze[Q?"unshift":"push"](()=>{S=Q,r(4,S)})}const ie=()=>r(0,b=!1),re=()=>{S.close(),r(7,l=[])};return a.$$set=Q=>{"empty_message"in Q&&r(11,f=Q.empty_message),"outbound_color"in Q&&r(12,d=Q.outbound_color),"inbound_color"in Q&&r(13,h=Q.inbound_color),"root_color"in Q&&r(14,m=Q.root_color),"link_function"in Q&&r(15,_=Q.link_function),"inbound_link_function"in Q&&r(16,c=Q.inbound_link_function),"root_link_function"in Q&&r(17,u=Q.root_link_function),"outbound_link_function"in Q&&r(18,E=Q.outbound_link_function),"show_neighbors_modal"in Q&&r(0,b=Q.show_neighbors_modal),"neighbor_filter_labels"in Q&&r(1,P=Q.neighbor_filter_labels),"parent_node"in Q&&r(2,I=Q.parent_node),"data"in Q&&r(3,D=Q.data),"$$scope"in Q&&r(27,o=Q.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&17&&b&&S&&S.showModal(),a.$$.dirty[0]&17&&!b&&S&&S.close(),a.$$.dirty[0]&14&&D&&(r(5,p=!1),D.neighbors["@graph"].find(Q=>Q["@id"]==I.data.d3f_class),P.length==0?(r(5,p=!0),r(6,F=new gr(D.neighbors,{index:!0}))):D.neighbors["@graph"].some(Q=>Q["d3f:outbound"]&&P.some(H=>Q["d3f:outbound"].some(V=>V["@id"]==H)))&&(r(5,p=!0),r(6,F=new gr(D.neighbors,{index:!0}))))},r(7,l=[]),[b,P,I,D,S,p,F,l,R,C,T,f,d,h,m,_,c,u,E,n,g,O,w,A,X,ie,re,o]}class vu extends nt{constructor(e){super(),ot(this,e,_u,hu,st,{empty_message:11,outbound_color:12,inbound_color:13,root_color:14,link_function:15,inbound_link_function:16,root_link_function:17,outbound_link_function:18,show_neighbors_modal:0,neighbor_filter_labels:1,parent_node:2,data:3},null,[-1,-1])}}function Pa(a,e,r){const l=a.slice();return l[26]=e[r],l}function wa(a,e,r){const l=a.slice();return l[29]=e[r],l}function ka(a,e,r){const l=a.slice();return l[32]=e[r],l}function ya(a,e,r){const l=a.slice();return l[26]=e[r],l}function Sa(a,e,r){const l=a.slice();return l[29]=e[r],l}const mu=a=>({}),Da=a=>({});function pu(a){let e;return{c(){e=k("No related sensors in this release.")},l(r){e=y(r,"No related sensors in this release.")},m(r,l){v(r,e,l)},p:Se,i:Se,o:Se,d(r){r&&i(e)}}}function gu(a){let e,r;return e=new $t({props:{$$slots:{default:[Eu]},$$scope:{ctx:a}}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t[0]&4194750&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){ve(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function bu(a){let e,r="Loading...";return{c(){e=B("div"),e.textContent=r},l(l){e=M(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:Se,i:Se,o:Se,d(l){l&&i(e)}}}function Ca(a){let e,r=Oe(a[32]["d3f:outbound"]),l=[];for(let t=0;t<r.length;t+=1)l[t]=Ia(ya(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&430){r=Oe(t[32]["d3f:outbound"]);let n;for(n=0;n<r.length;n+=1){const o=ya(t,r,n);l[n]?l[n].p(o,s):(l[n]=Ia(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&i(e),We(l,t)}}}function Na(a){let e,r=a[32]["@id"]+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" selected_inbound_node;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," selected_inbound_node;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n[0]&160&&r!==(r=s[32]["@id"]+"")&&J(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function Ra(a){let e=a[32]["@id"]+"",r,l,t=a[32]["rdfs:label"][0]+"",s,n,o="-->",f,d,h=he(a[26]["@id"])+"",m,_,c=a[29]["@id"]+"",u,E,b=a[7].i(a[29]["@id"])["rdfs:label"][0]+"",P,I,D=a[32]["@id"]+"",S,p,R=a[32]["@id"]+"",C,F,N,T,g=a[8].includes(a[32]["@id"]),O,w=a[29]["@id"]+"",A,X,ie=a[29]["@id"]+"",re,Q,H,V,z=a[32]["@id"]+"",Y,j,K=a[32]["@id"]+"",Ce,ke,le=a[29]["@id"]+"",me,ce,_e=a[3](a[29])+"",De,je,ee=g&&Na(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),d=k(" | "),m=k(h),_=k(" | "),u=k(c),E=k('["'),P=k(b),I=k(`"];
                  class `),S=k(D),p=k(" inbound_node; style "),C=k(R),F=k(" fill:"),N=k(a[1]),T=k(`;
                  `),ee&&ee.c(),O=k(`
                  class `),A=k(w),X=k(" RootArtifactNode; style "),re=k(ie),Q=k(" fill:"),H=k(a[2]),V=k(`;
                  click `),Y=k(z),j=k(` href "javascript:da_to_sensor_callback('`),Ce=k(K),ke=k(`')"; click `),me=k(le),ce=k(' href "'),De=k(_e),je=k('";')},l(q){r=y(q,e),l=y(q,'["'),s=y(q,t),n=y(q,'"] '),f=y(q,o),d=y(q," | "),m=y(q,h),_=y(q," | "),u=y(q,c),E=y(q,'["'),P=y(q,b),I=y(q,`"];
                  class `),S=y(q,D),p=y(q," inbound_node; style "),C=y(q,R),F=y(q," fill:"),N=y(q,a[1]),T=y(q,`;
                  `),ee&&ee.l(q),O=y(q,`
                  class `),A=y(q,w),X=y(q," RootArtifactNode; style "),re=y(q,ie),Q=y(q," fill:"),H=y(q,a[2]),V=y(q,`;
                  click `),Y=y(q,z),j=y(q,` href "javascript:da_to_sensor_callback('`),Ce=y(q,K),ke=y(q,`')"; click `),me=y(q,le),ce=y(q,' href "'),De=y(q,_e),je=y(q,'";')},m(q,se){v(q,r,se),v(q,l,se),v(q,s,se),v(q,n,se),v(q,f,se),v(q,d,se),v(q,m,se),v(q,_,se),v(q,u,se),v(q,E,se),v(q,P,se),v(q,I,se),v(q,S,se),v(q,p,se),v(q,C,se),v(q,F,se),v(q,N,se),v(q,T,se),ee&&ee.m(q,se),v(q,O,se),v(q,A,se),v(q,X,se),v(q,re,se),v(q,Q,se),v(q,H,se),v(q,V,se),v(q,Y,se),v(q,j,se),v(q,Ce,se),v(q,ke,se),v(q,me,se),v(q,ce,se),v(q,De,se),v(q,je,se)},p(q,se){se[0]&160&&e!==(e=q[32]["@id"]+"")&&J(r,e),se[0]&160&&t!==(t=q[32]["rdfs:label"][0]+"")&&J(s,t),se[0]&160&&h!==(h=he(q[26]["@id"])+"")&&J(m,h),se[0]&160&&c!==(c=q[29]["@id"]+"")&&J(u,c),se[0]&160&&b!==(b=q[7].i(q[29]["@id"])["rdfs:label"][0]+"")&&J(P,b),se[0]&160&&D!==(D=q[32]["@id"]+"")&&J(S,D),se[0]&160&&R!==(R=q[32]["@id"]+"")&&J(C,R),se[0]&2&&J(N,q[1]),se[0]&416&&(g=q[8].includes(q[32]["@id"])),g?ee?ee.p(q,se):(ee=Na(q),ee.c(),ee.m(O.parentNode,O)):ee&&(ee.d(1),ee=null),se[0]&160&&w!==(w=q[29]["@id"]+"")&&J(A,w),se[0]&160&&ie!==(ie=q[29]["@id"]+"")&&J(re,ie),se[0]&4&&J(H,q[2]),se[0]&160&&z!==(z=q[32]["@id"]+"")&&J(Y,z),se[0]&160&&K!==(K=q[32]["@id"]+"")&&J(Ce,K),se[0]&160&&le!==(le=q[29]["@id"]+"")&&J(me,le),se[0]&168&&_e!==(_e=q[3](q[29])+"")&&J(De,_e)},d(q){q&&(i(r),i(l),i(s),i(n),i(f),i(d),i(m),i(_),i(u),i(E),i(P),i(I),i(S),i(p),i(C),i(F),i(N),i(T),i(O),i(A),i(X),i(re),i(Q),i(H),i(V),i(Y),i(j),i(Ce),i(ke),i(me),i(ce),i(De),i(je)),ee&&ee.d(q)}}}function Ia(a){let e,r=Oe(a[32][a[26]["@id"]]),l=[];for(let t=0;t<r.length;t+=1)l[t]=Ra(Sa(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&430){r=Oe(t[32][t[26]["@id"]]);let n;for(n=0;n<r.length;n+=1){const o=Sa(t,r,n);l[n]?l[n].p(o,s):(l[n]=Ra(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&i(e),We(l,t)}}}function Oa(a){let e,r=a[32]["d3f:outbound"]&&Ca(a);return{c(){r&&r.c(),e=Ee()},l(l){r&&r.l(l),e=Ee()},m(l,t){r&&r.m(l,t),v(l,e,t)},p(l,t){l[32]["d3f:outbound"]?r?r.p(l,t):(r=Ca(l),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(l){l&&i(e),r&&r.d(l)}}}function Ta(a){let e,r=Oe(a[7].i(a[5].description["@id"])["d3f:outbound"]),l=[];for(let t=0;t<r.length;t+=1)l[t]=Fa(Pa(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&184){r=Oe(t[7].i(t[5].description["@id"])["d3f:outbound"]);let n;for(n=0;n<r.length;n+=1){const o=Pa(t,r,n);l[n]?l[n].p(o,s):(l[n]=Fa(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&i(e),We(l,t)}}}function Aa(a){let e=a[5].description["@id"]+"",r,l,t=a[7].i(a[5].description["@id"])["rdfs:label"][0]+"",s,n,o="-->",f,d,h=he(a[26]["@id"])+"",m,_,c=a[29]["@id"]+"",u,E,b=a[7].graph[a[7].index[a[29]["@id"]]]["rdfs:label"][0]+"",P,I,D=a[5].description["@id"]+"",S,p,R=a[29]["@id"]+"",C,F,N=a[5].description["@id"]+"",T,g,O=a[3](a[5].description["@id"])+"",w,A,X=a[29]["@id"]+"",ie,re,Q=a[4](a[29])+"",H,V;return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),d=k(" | "),m=k(h),_=k(" | "),u=k(c),E=k('["'),P=k(b),I=k('"]; class '),S=k(D),p=k(" RootArtifactNode; class "),C=k(R),F=k(` ArtifactNode;
                click `),T=k(N),g=k(' href "'),w=k(O),A=k('"; click '),ie=k(X),re=k(' href "'),H=k(Q),V=k('";')},l(z){r=y(z,e),l=y(z,'["'),s=y(z,t),n=y(z,'"] '),f=y(z,o),d=y(z," | "),m=y(z,h),_=y(z," | "),u=y(z,c),E=y(z,'["'),P=y(z,b),I=y(z,'"]; class '),S=y(z,D),p=y(z," RootArtifactNode; class "),C=y(z,R),F=y(z,` ArtifactNode;
                click `),T=y(z,N),g=y(z,' href "'),w=y(z,O),A=y(z,'"; click '),ie=y(z,X),re=y(z,' href "'),H=y(z,Q),V=y(z,'";')},m(z,Y){v(z,r,Y),v(z,l,Y),v(z,s,Y),v(z,n,Y),v(z,f,Y),v(z,d,Y),v(z,m,Y),v(z,_,Y),v(z,u,Y),v(z,E,Y),v(z,P,Y),v(z,I,Y),v(z,S,Y),v(z,p,Y),v(z,C,Y),v(z,F,Y),v(z,T,Y),v(z,g,Y),v(z,w,Y),v(z,A,Y),v(z,ie,Y),v(z,re,Y),v(z,H,Y),v(z,V,Y)},p(z,Y){Y[0]&32&&e!==(e=z[5].description["@id"]+"")&&J(r,e),Y[0]&160&&t!==(t=z[7].i(z[5].description["@id"])["rdfs:label"][0]+"")&&J(s,t),Y[0]&160&&h!==(h=he(z[26]["@id"])+"")&&J(m,h),Y[0]&160&&c!==(c=z[29]["@id"]+"")&&J(u,c),Y[0]&160&&b!==(b=z[7].graph[z[7].index[z[29]["@id"]]]["rdfs:label"][0]+"")&&J(P,b),Y[0]&32&&D!==(D=z[5].description["@id"]+"")&&J(S,D),Y[0]&160&&R!==(R=z[29]["@id"]+"")&&J(C,R),Y[0]&32&&N!==(N=z[5].description["@id"]+"")&&J(T,N),Y[0]&40&&O!==(O=z[3](z[5].description["@id"])+"")&&J(w,O),Y[0]&160&&X!==(X=z[29]["@id"]+"")&&J(ie,X),Y[0]&176&&Q!==(Q=z[4](z[29])+"")&&J(H,Q)},d(z){z&&(i(r),i(l),i(s),i(n),i(f),i(d),i(m),i(_),i(u),i(E),i(P),i(I),i(S),i(p),i(C),i(F),i(T),i(g),i(w),i(A),i(ie),i(re),i(H),i(V))}}}function Fa(a){let e,r=Oe(a[7].i(a[5].description["@id"])[a[26]["@id"]]),l=[];for(let t=0;t<r.length;t+=1)l[t]=Aa(wa(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&184){r=Oe(t[7].i(t[5].description["@id"])[t[26]["@id"]]);let n;for(n=0;n<r.length;n+=1){const o=wa(t,r,n);l[n]?l[n].p(o,s):(l[n]=Aa(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&i(e),We(l,t)}}}function Eu(a){let e,r,l=a[7].i(a[5].description["@id"])&&a[7].i(a[5].description["@id"])["d3f:outbound"],t,s=Oe(a[7].graph.filter(a[18])),n=[];for(let f=0;f<s.length;f+=1)n[f]=Oa(ka(a,s,f));let o=l&&Ta(a);return{c(){e=k(`graph LR;
          `);for(let f=0;f<n.length;f+=1)n[f].c();r=W(),o&&o.c(),t=Ee()},l(f){e=y(f,`graph LR;
          `);for(let d=0;d<n.length;d+=1)n[d].l(f);r=x(f),o&&o.l(f),t=Ee()},m(f,d){v(f,e,d);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(f,d);v(f,r,d),o&&o.m(f,d),v(f,t,d)},p(f,d){if(d[0]&430){s=Oe(f[7].graph.filter(f[18]));let h;for(h=0;h<s.length;h+=1){const m=ka(f,s,h);n[h]?n[h].p(m,d):(n[h]=Oa(m),n[h].c(),n[h].m(r.parentNode,r))}for(;h<n.length;h+=1)n[h].d(1);n.length=s.length}d[0]&160&&(l=f[7].i(f[5].description["@id"])&&f[7].i(f[5].description["@id"])["d3f:outbound"]),l?o?o.p(f,d):(o=Ta(f),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},d(f){f&&(i(e),i(r),i(t)),We(n,f),o&&o.d(f)}}}function Pu(a){let e,r,l,t,s,n,o,f,d,h,m,_,c,u=a[8].length+"",E,b,P,I,D;const S=a[16].header,p=it(S,a,a[22],Da),R=a[16].default,C=it(R,a,a[22],null),F=[bu,gu,pu],N=[];function T(g,O){return g[5]?g[7].graph.length>0?1:2:0}return o=T(a),f=N[o]=F[o](a),{c(){e=B("dialog"),r=B("div"),p&&p.c(),l=k(`
      Select Sensors
      `),C&&C.c(),t=W(),s=B("hr"),n=W(),f.c(),d=W(),h=B("hr"),m=W(),_=B("button"),c=k("Insert ("),E=k(u),b=k(")"),this.h()},l(g){e=M(g,"DIALOG",{class:!0});var O=pe(e);r=M(O,"DIV",{class:!0});var w=pe(r);p&&p.l(w),l=y(w,`
      Select Sensors
      `),C&&C.l(w),t=x(w),s=M(w,"HR",{}),n=x(w),f.l(w),d=x(w),h=M(w,"HR",{}),m=x(w),_=M(w,"BUTTON",{class:!0});var A=pe(_);c=y(A,"Insert ("),E=y(A,u),b=y(A,")"),A.forEach(i),w.forEach(i),O.forEach(i),this.h()},h(){_.autofocus=!0,Z(_,"class","svelte-akhii9"),Z(r,"class","svelte-akhii9"),Z(e,"class","svelte-akhii9")},m(g,O){v(g,e,O),L(e,r),p&&p.m(r,null),L(r,l),C&&C.m(r,null),L(r,t),L(r,s),L(r,n),N[o].m(r,null),L(r,d),L(r,h),L(r,m),L(r,_),L(_,c),L(_,E),L(_,b),a[19](e),P=!0,_.focus(),I||(D=[ge(_,"click",a[11]),ge(r,"click",Ct(a[17])),ge(e,"close",a[20]),ge(e,"click",Mt(a[21]))],I=!0)},p(g,O){p&&p.p&&(!P||O[0]&4194304)&&ft(p,S,g,g[22],P?ct(S,g[22],O,mu):ut(g[22]),Da),C&&C.p&&(!P||O[0]&4194304)&&ft(C,R,g,g[22],P?ct(R,g[22],O,null):ut(g[22]),null);let w=o;o=T(g),o===w?N[o].p(g,O):(pt(),ve(N[w],1,1,()=>{N[w]=null}),gt(),f=N[o],f?f.p(g,O):(f=N[o]=F[o](g),f.c()),de(f,1),f.m(r,d)),(!P||O[0]&256)&&u!==(u=g[8].length+"")&&J(E,u)},i(g){P||(de(p,g),de(C,g),de(f),P=!0)},o(g){ve(p,g),ve(C,g),ve(f),P=!1},d(g){g&&i(e),p&&p.d(g),C&&C.d(g),N[o].d(),a[19](null),I=!1,mt(D)}}}function wu(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{outbound_color:f="#fff4dd"}=e,{inbound_color:d="#fff4dd"}=e,{root_color:h="#fff4dd"}=e,{link_function:m=w=>`/dao/artifact/${w["@id"]}`}=e,{inbound_link_function:_=m}=e,{root_link_function:c=w=>`/dao/artifact/${w["@id"]}`}=e,{outbound_link_function:u=m}=e,{show_sensor_modal:E}=e,{parent_node:b}=e,{data:P}=e,I;const D=qt();et(a,D,w=>r(24,s=w));const S=zt();et(a,S,w=>r(23,t=w));let p;function R(w){l.includes(w)?r(8,l=l.filter(A=>A!==w)):l.push(w),r(8,l),r(8,l)}window.da_to_sensor_callback=function(w){R(w)};function C(){let w=0,A=200,X=100;for(const ie of l){let re=P.sensors["@graph"].find(Q=>Q["@id"]==ie);re&&(Ht(D,S,b,"artifactSelectorNode",re["rdfs:label"],re["@id"],b.data.sequence,b.position.x+w*A,b.position.y+X,182,63,re["d3f:outbound"][0]["@id"].replace("d3f:",""),!1),w+=1)}D.set(s),S.set(t),I&&I.close(),r(8,l=[])}function F(w){Nt.call(this,a,w)}const N=w=>w["@id"]!=P.description["@id"];function T(w){Ze[w?"unshift":"push"](()=>{I=w,r(6,I)})}const g=()=>r(0,E=!1),O=()=>{I.close(),r(8,l=[])};return a.$$set=w=>{"outbound_color"in w&&r(12,f=w.outbound_color),"inbound_color"in w&&r(1,d=w.inbound_color),"root_color"in w&&r(2,h=w.root_color),"link_function"in w&&r(13,m=w.link_function),"inbound_link_function"in w&&r(14,_=w.inbound_link_function),"root_link_function"in w&&r(3,c=w.root_link_function),"outbound_link_function"in w&&r(4,u=w.outbound_link_function),"show_sensor_modal"in w&&r(0,E=w.show_sensor_modal),"parent_node"in w&&r(15,b=w.parent_node),"data"in w&&r(5,P=w.data),"$$scope"in w&&r(22,o=w.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&65&&E&&I&&I.showModal(),a.$$.dirty[0]&65&&!E&&I&&I.close(),a.$$.dirty[0]&32&&P&&P.sensors&&r(7,p=new gr(P.sensors,{index:!0}))},r(8,l=[]),[E,d,h,c,u,P,I,p,l,D,S,C,f,m,_,b,n,F,N,T,g,O,o]}class ku extends nt{constructor(e){super(),ot(this,e,wu,Pu,st,{outbound_color:12,inbound_color:1,root_color:2,link_function:13,inbound_link_function:14,root_link_function:3,outbound_link_function:4,show_sensor_modal:0,parent_node:15,data:5},null,[-1,-1])}}function yu(a){let e,r="attack the node",l,t,s,n,o,f="defend the node",d,h,m,_,c,u="add weaknesses",E,b,P,I,D,S="add sensors",p,R,C,F,N,T="explode all",g,O,w="explode parts",A,X,ie="explode control",re,Q,H,V,z,Y;function j(ee){a[11](ee)}let K={parent_node:a[0],data:a[1]};a[7]!==void 0&&(K.show_attack_modal=a[7]),t=new $f({props:K}),Ze.push(()=>Et(t,"show_attack_modal",j));function Ce(ee){a[13](ee)}let ke={parent_node:a[0],data:a[1]};a[6]!==void 0&&(ke.show_defend_modal=a[6]),h=new xf({props:ke}),Ze.push(()=>Et(h,"show_defend_modal",Ce));function le(ee){a[15](ee)}let me={parent_node:a[0],inbound_color:"#f9d999",inbound_link_function:a[9],data:a[1]};a[5]!==void 0&&(me.show_weakness_modal=a[5]),b=new ou({props:me}),Ze.push(()=>Et(b,"show_weakness_modal",le));function ce(ee){a[17](ee)}let _e={parent_node:a[0],inbound_color:"#f9d999",data:a[1]};a[3]!==void 0&&(_e.show_sensor_modal=a[3]),R=new ku({props:_e}),Ze.push(()=>Et(R,"show_sensor_modal",ce));function De(ee){a[21](ee)}let je={neighbor_filter_labels:a[2],parent_node:a[0],empty_message:"has no related parts in this release.",inbound_color:"#f9d999",inbound_link_function:a[9],data:a[1]};return a[4]!==void 0&&(je.show_neighbors_modal=a[4]),Q=new vu({props:je}),Ze.push(()=>Et(Q,"show_neighbors_modal",De)),{c(){e=B("button"),e.textContent=r,l=W(),Te(t.$$.fragment),n=W(),o=B("button"),o.textContent=f,d=W(),Te(h.$$.fragment),_=W(),c=B("button"),c.textContent=u,E=W(),Te(b.$$.fragment),I=W(),D=B("button"),D.textContent=S,p=W(),Te(R.$$.fragment),F=W(),N=B("button"),N.textContent=T,g=W(),O=B("button"),O.textContent=w,A=W(),X=B("button"),X.textContent=ie,re=W(),Te(Q.$$.fragment),this.h()},l(ee){e=M(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),we(e)!=="svelte-1dkmztx"&&(e.textContent=r),l=x(ee),Ae(t.$$.fragment,ee),n=x(ee),o=M(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),we(o)!=="svelte-22hxkb"&&(o.textContent=f),d=x(ee),Ae(h.$$.fragment,ee),_=x(ee),c=M(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),we(c)!=="svelte-urtcr7"&&(c.textContent=u),E=x(ee),Ae(b.$$.fragment,ee),I=x(ee),D=M(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),we(D)!=="svelte-1xhii68"&&(D.textContent=S),p=x(ee),Ae(R.$$.fragment,ee),F=x(ee),N=M(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),we(N)!=="svelte-1vn2qvf"&&(N.textContent=T),g=x(ee),O=M(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),we(O)!=="svelte-1hluius"&&(O.textContent=w),A=x(ee),X=M(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),we(X)!=="svelte-183zqvn"&&(X.textContent=ie),re=x(ee),Ae(Q.$$.fragment,ee),this.h()},h(){Z(e,"class","svelte-5he3i1"),Z(o,"class","svelte-5he3i1"),Z(c,"class","svelte-5he3i1"),Z(D,"class","svelte-5he3i1"),Z(N,"class","svelte-5he3i1"),Z(O,"class","svelte-5he3i1"),Z(X,"class","svelte-5he3i1")},m(ee,q){v(ee,e,q),v(ee,l,q),Fe(t,ee,q),v(ee,n,q),v(ee,o,q),v(ee,d,q),Fe(h,ee,q),v(ee,_,q),v(ee,c,q),v(ee,E,q),Fe(b,ee,q),v(ee,I,q),v(ee,D,q),v(ee,p,q),Fe(R,ee,q),v(ee,F,q),v(ee,N,q),v(ee,g,q),v(ee,O,q),v(ee,A,q),v(ee,X,q),v(ee,re,q),Fe(Q,ee,q),V=!0,z||(Y=[ge(e,"click",a[10]),ge(o,"click",a[12]),ge(c,"click",a[14]),ge(D,"click",a[16]),ge(N,"click",a[18]),ge(O,"click",a[19]),ge(X,"click",a[20])],z=!0)},p(ee,[q]){const se={};q&1&&(se.parent_node=ee[0]),q&2&&(se.data=ee[1]),!s&&q&128&&(s=!0,se.show_attack_modal=ee[7],bt(()=>s=!1)),t.$set(se);const Ue={};q&1&&(Ue.parent_node=ee[0]),q&2&&(Ue.data=ee[1]),!m&&q&64&&(m=!0,Ue.show_defend_modal=ee[6],bt(()=>m=!1)),h.$set(Ue);const Ve={};q&1&&(Ve.parent_node=ee[0]),q&2&&(Ve.data=ee[1]),!P&&q&32&&(P=!0,Ve.show_weakness_modal=ee[5],bt(()=>P=!1)),b.$set(Ve);const Qe={};q&1&&(Qe.parent_node=ee[0]),q&2&&(Qe.data=ee[1]),!C&&q&8&&(C=!0,Qe.show_sensor_modal=ee[3],bt(()=>C=!1)),R.$set(Qe);const ze={};q&4&&(ze.neighbor_filter_labels=ee[2]),q&1&&(ze.parent_node=ee[0]),q&2&&(ze.data=ee[1]),!H&&q&16&&(H=!0,ze.show_neighbors_modal=ee[4],bt(()=>H=!1)),Q.$set(ze)},i(ee){V||(de(t.$$.fragment,ee),de(h.$$.fragment,ee),de(b.$$.fragment,ee),de(R.$$.fragment,ee),de(Q.$$.fragment,ee),V=!0)},o(ee){ve(t.$$.fragment,ee),ve(h.$$.fragment,ee),ve(b.$$.fragment,ee),ve(R.$$.fragment,ee),ve(Q.$$.fragment,ee),V=!1},d(ee){ee&&(i(e),i(l),i(n),i(o),i(d),i(_),i(c),i(E),i(I),i(D),i(p),i(F),i(N),i(g),i(O),i(A),i(X),i(re)),Le(t,ee),Le(h,ee),Le(b,ee),Le(R,ee),Le(Q,ee),z=!1,mt(Y)}}}function Su(a,e,r){let l,t,s,n,o;var f=this&&this.__awaiter||function(g,O,w,A){function X(ie){return ie instanceof w?ie:new w(function(re){re(ie)})}return new(w||(w=Promise))(function(ie,re){function Q(z){try{V(A.next(z))}catch(Y){re(Y)}}function H(z){try{V(A.throw(z))}catch(Y){re(Y)}}function V(z){z.done?ie(z.value):X(z.value).then(Q,H)}V((A=A.apply(g,O||[])).next())})};let{node:d}=e,h,m=[];function _(g){alert(g),r(7,l=!1),r(6,t=!1),r(5,s=!1),r(4,n=!1),r(3,o=!1)}function c(g){return f(this,void 0,void 0,function*(){if(g.data.d3f_class&&g.data.d3f_class.includes("d3f:")){const O=g.data.d3f_class,w=yield fetch(`/api/dao/artifact/${O}.json`),A=yield w.json();if(w.status!=200||A.description["@graph"].length==0)_(`D3FEND Artifact: "${O.replace("d3f:","")}" not found in ontology`);else return A}else _("Please specify a D3FEND Class for this node to enable inferential mapping")})}function u(g){return zn(g["d3f:cwe-id"][0])}const E=async()=>{r(1,h=null),r(7,l=!0),r(1,h=await c(d))};function b(g){l=g,r(7,l)}const P=async()=>{r(1,h=null),r(6,t=!0),r(1,h=await c(d))};function I(g){t=g,r(6,t)}const D=async()=>{r(1,h=null),r(5,s=!0),r(1,h=await c(d))};function S(g){s=g,r(5,s)}const p=async()=>{r(1,h=null),r(3,o=!0),r(1,h=await c(d))};function R(g){o=g,r(3,o)}const C=async()=>{r(1,h=null),r(4,n=!0),r(2,m=[]),r(1,h=await c(d))},F=async()=>{r(1,h=null),r(4,n=!0),r(2,m=["d3f:contains","d3f:may-contains"]),r(1,h=await c(d))},N=async()=>{r(1,h=null),r(4,n=!0),r(2,m=["d3f:runs","d3f:loads","d3f:manages"]),r(1,h=await c(d))};function T(g){n=g,r(4,n)}return a.$$set=g=>{"node"in g&&r(0,d=g.node)},r(7,l=!1),r(6,t=!1),r(5,s=!1),r(4,n=!1),r(3,o=!1),[d,h,m,o,n,s,t,l,c,u,E,b,P,I,D,S,p,R,C,F,N,T]}class Du extends nt{constructor(e){super(),ot(this,e,Su,yu,st,{node:0})}}function La(a,e,r){const l=a.slice();return l[18]=e[r],l[20]=r,l}const Cu=a=>({}),ja=a=>({});function Nu(a){let e;return{c(){e=k("No related defensive techniques in this release.")},l(r){e=y(r,"No related defensive techniques in this release.")},m(r,l){v(r,e,l)},p:Se,i:Se,o:Se,d(r){r&&i(e)}}}function Ru(a){let e,r;return e=new $t({props:{$$slots:{default:[Au]},$$scope:{ctx:a}}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t&16406&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){ve(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function Iu(a){let e,r="Loading...";return{c(){e=B("div"),e.textContent=r},l(l){e=M(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:Se,i:Se,o:Se,d(l){l&&i(e)}}}function Ou(a){let e,r=he(a[18].def_artifact.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" ArtifactNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," ArtifactNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&4&&r!==(r=he(s[18].def_artifact.value)+"")&&J(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function Tu(a){let e,r=he(a[18].def_artifact.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" SelectedArtifactNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," SelectedArtifactNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&4&&r!==(r=he(s[18].def_artifact.value)+"")&&J(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function qa(a){let e=a[1].data.d3f_class+"",r,l,t=a[2].description["@graph"][0]["rdfs:label"]+"",s,n,o="-->",f,d,h=a[18].def_artifact_rel_label.value+"",m,_,c=he(a[18].def_artifact.value)+"",u,E,b=a[18].def_artifact_label.value+"",P,I,D=a[1].data.d3f_class+"",S,p,R,C,F=he(a[18].def_artifact.value)+"",N,T,g=he(a[18].def_artifact.value)+"",O,w,A=`
`,X;function ie(H,V){return V&20&&(R=null),R==null&&(R=!!H[4].includes(he(H[18].def_artifact.value))),R?Tu:Ou}let re=ie(a,-1),Q=re(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),d=k(' |"'),m=k(h),_=k('" | '),u=k(c),E=k('["'),P=k(b),I=k(`"];
          class `),S=k(D),p=k(` DefensiveTechniqueNode;
          `),Q.c(),C=k(`
          click `),N=k(F),T=k(` href "javascript:def_to_art_callback('`),O=k(g),w=k(`')";`),X=k(A)},l(H){r=y(H,e),l=y(H,'["'),s=y(H,t),n=y(H,'"] '),f=y(H,o),d=y(H,' |"'),m=y(H,h),_=y(H,'" | '),u=y(H,c),E=y(H,'["'),P=y(H,b),I=y(H,`"];
          class `),S=y(H,D),p=y(H,` DefensiveTechniqueNode;
          `),Q.l(H),C=y(H,`
          click `),N=y(H,F),T=y(H,` href "javascript:def_to_art_callback('`),O=y(H,g),w=y(H,`')";`),X=y(H,A)},m(H,V){v(H,r,V),v(H,l,V),v(H,s,V),v(H,n,V),v(H,f,V),v(H,d,V),v(H,m,V),v(H,_,V),v(H,u,V),v(H,E,V),v(H,P,V),v(H,I,V),v(H,S,V),v(H,p,V),Q.m(H,V),v(H,C,V),v(H,N,V),v(H,T,V),v(H,O,V),v(H,w,V),v(H,X,V)},p(H,V){V&2&&e!==(e=H[1].data.d3f_class+"")&&J(r,e),V&4&&t!==(t=H[2].description["@graph"][0]["rdfs:label"]+"")&&J(s,t),V&4&&h!==(h=H[18].def_artifact_rel_label.value+"")&&J(m,h),V&4&&c!==(c=he(H[18].def_artifact.value)+"")&&J(u,c),V&4&&b!==(b=H[18].def_artifact_label.value+"")&&J(P,b),V&2&&D!==(D=H[1].data.d3f_class+"")&&J(S,D),re===(re=ie(H,V))&&Q?Q.p(H,V):(Q.d(1),Q=re(H),Q&&(Q.c(),Q.m(C.parentNode,C))),V&4&&F!==(F=he(H[18].def_artifact.value)+"")&&J(N,F),V&4&&g!==(g=he(H[18].def_artifact.value)+"")&&J(O,g)},d(H){H&&(i(r),i(l),i(s),i(n),i(f),i(d),i(m),i(_),i(u),i(E),i(P),i(I),i(S),i(p),i(C),i(N),i(T),i(O),i(w),i(X)),Q.d(H)}}}function Au(a){let e,r,l=Oe(a[2].digital_artifacts.results.bindings),t=[];for(let s=0;s<l.length;s+=1)t[s]=qa(La(a,l,s));return{c(){e=k(`graph LR
        `);for(let s=0;s<t.length;s+=1)t[s].c();r=Ee()},l(s){e=y(s,`graph LR
        `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=Ee()},m(s,n){v(s,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,n);v(s,r,n)},p(s,n){if(n&22){l=Oe(s[2].digital_artifacts.results.bindings);let o;for(o=0;o<l.length;o+=1){const f=La(s,l,o);t[o]?t[o].p(f,n):(t[o]=qa(f),t[o].c(),t[o].m(r.parentNode,r))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(s){s&&(i(e),i(r)),We(t,s)}}}function Fu(a){let e,r,l,t,s,n,o,f,d,h,m,_,c,u=a[4].length+"",E,b,P,I,D;const S=a[9].header,p=it(S,a,a[14],ja),R=a[9].default,C=it(R,a,a[14],null),F=[Iu,Ru,Nu],N=[];function T(g,O){return g[2]?g[2].digital_artifacts.results.bindings.length>0?1:2:0}return o=T(a),f=N[o]=F[o](a),{c(){e=B("dialog"),r=B("div"),p&&p.c(),l=k(`
    Select Related Artifacts To Insert
    `),C&&C.c(),t=W(),s=B("hr"),n=W(),f.c(),d=W(),h=B("hr"),m=W(),_=B("button"),c=k("Insert ("),E=k(u),b=k(")"),this.h()},l(g){e=M(g,"DIALOG",{class:!0});var O=pe(e);r=M(O,"DIV",{class:!0});var w=pe(r);p&&p.l(w),l=y(w,`
    Select Related Artifacts To Insert
    `),C&&C.l(w),t=x(w),s=M(w,"HR",{}),n=x(w),f.l(w),d=x(w),h=M(w,"HR",{}),m=x(w),_=M(w,"BUTTON",{class:!0});var A=pe(_);c=y(A,"Insert ("),E=y(A,u),b=y(A,")"),A.forEach(i),w.forEach(i),O.forEach(i),this.h()},h(){_.autofocus=!0,Z(_,"class","svelte-x0618k"),Z(r,"class","svelte-x0618k"),Z(e,"class","svelte-x0618k")},m(g,O){v(g,e,O),L(e,r),p&&p.m(r,null),L(r,l),C&&C.m(r,null),L(r,t),L(r,s),L(r,n),N[o].m(r,null),L(r,d),L(r,h),L(r,m),L(r,_),L(_,c),L(_,E),L(_,b),a[11](e),P=!0,_.focus(),I||(D=[ge(_,"click",a[7]),ge(r,"click",Ct(a[10])),ge(e,"close",a[12]),ge(e,"click",Mt(a[13]))],I=!0)},p(g,[O]){p&&p.p&&(!P||O&16384)&&ft(p,S,g,g[14],P?ct(S,g[14],O,Cu):ut(g[14]),ja),C&&C.p&&(!P||O&16384)&&ft(C,R,g,g[14],P?ct(R,g[14],O,null):ut(g[14]),null);let w=o;o=T(g),o===w?N[o].p(g,O):(pt(),ve(N[w],1,1,()=>{N[w]=null}),gt(),f=N[o],f?f.p(g,O):(f=N[o]=F[o](g),f.c()),de(f,1),f.m(r,d)),(!P||O&16)&&u!==(u=g[4].length+"")&&J(E,u)},i(g){P||(de(p,g),de(C,g),de(f),P=!0)},o(g){ve(p,g),ve(C,g),ve(f),P=!1},d(g){g&&i(e),p&&p.d(g),C&&C.d(g),N[o].d(),a[11](null),I=!1,mt(D)}}}function Lu(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{show_artifacts_modal:f}=e,{parent_node:d}=e,{data:h}=e,m;const _=qt();et(a,_,p=>r(16,s=p));const c=zt();et(a,c,p=>r(15,t=p));let u=new Xt;function E(p){l.includes(p)?r(4,l=l.filter(R=>R!==p)):l.push(p),r(4,l)}window.def_to_art_callback=function(p){E(p)};function b(){let p=0,R=200,C=100;for(const F of l){let N=h.digital_artifacts.results.bindings.find(T=>he(T.def_artifact.value)==F);N&&(Ht(_,c,d,"artifactSelectorNode",N.def_artifact_label.value,"d3f:"+he(N.def_artifact.value),d.data.sequence,d.position.x+p*R,d.position.y+C,182,82,N.def_artifact_rel_label.value,!0),p+=1)}_.set(s),c.set(t),m&&m.close(),r(4,l=[])}function P(p){Nt.call(this,a,p)}function I(p){Ze[p?"unshift":"push"](()=>{m=p,r(3,m)})}const D=()=>r(0,f=!1),S=()=>{m.close(),r(4,l=[])};return a.$$set=p=>{"show_artifacts_modal"in p&&r(0,f=p.show_artifacts_modal),"parent_node"in p&&r(1,d=p.parent_node),"data"in p&&r(2,h=p.data),"$$scope"in p&&r(14,o=p.$$scope)},a.$$.update=()=>{a.$$.dirty&9&&f&&m&&(m.showModal(),r(8,u=new Xt)),a.$$.dirty&265&&!f&&m&&(m.close(),u.reset())},r(4,l=[]),[f,d,h,m,l,_,c,b,u,n,P,I,D,S,o]}class ju extends nt{constructor(e){super(),ot(this,e,Lu,Fu,st,{show_artifacts_modal:0,parent_node:1,data:2})}}function za(a,e,r){const l=a.slice();return l[18]=e[r],l}const qu=a=>({}),Ua=a=>({});function zu(a){let e;return{c(){e=k("No related offensive techniques in this release.")},l(r){e=y(r,"No related offensive techniques in this release.")},m(r,l){v(r,e,l)},p:Se,i:Se,o:Se,d(r){r&&i(e)}}}function Uu(a){let e,r;return e=new $t({props:{$$slots:{default:[$u]},$$scope:{ctx:a}}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t&16394&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){ve(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function Vu(a){let e,r="Loading...";return{c(){e=B("div"),e.textContent=r},l(l){e=M(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:Se,i:Se,o:Se,d(l){l&&i(e)}}}function Va(a){let e=he(a[18].def_tech.value).replace(/ |\./g,"")+"",r,l,t=a[18].def_tech_label.value+"",s,n,o="-->",f,d,h="May "+a[18].def_tactic_label.value.replace(/ /g,""),m,_,c=a[18].off_tech_id.value.replace(/ |\./g,"")+"",u,E,b=a[18].off_tech_label.value+"",P,I,D,S,p=he(a[18].def_tech.value)+"",R,C,F=a[18].off_tech_id.value.replace(/ |\./g,"")+"",N,T,g=a[18].off_tech_id.value.replace(/ |\./g,"")+"",O,w,A=he(a[18].def_tech.value)+"",X,ie,re=he(a[18].def_tech.value)+"",Q,H;function V(j,K){return K&10&&(D=null),D==null&&(D=!!j[3].includes(j[18].off_tech_id.value.replace(/ |\./g,""))),D?Mu:Bu}let z=V(a,-1),Y=z(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),d=k(" | "),m=k(h),_=k("| "),u=k(c),E=k('["'),P=k(b),I=k(`"];
            `),Y.c(),S=k(`
            class `),R=k(p),C=k(" CountermeasureNode; click "),N=k(F),T=k(` href "javascript:def_to_off_callback('`),O=k(g),w=k(`')"; click `),X=k(A),ie=k(' href "/technique/d3f:'),Q=k(re),H=k('";')},l(j){r=y(j,e),l=y(j,'["'),s=y(j,t),n=y(j,'"] '),f=y(j,o),d=y(j," | "),m=y(j,h),_=y(j,"| "),u=y(j,c),E=y(j,'["'),P=y(j,b),I=y(j,`"];
            `),Y.l(j),S=y(j,`
            class `),R=y(j,p),C=y(j," CountermeasureNode; click "),N=y(j,F),T=y(j,` href "javascript:def_to_off_callback('`),O=y(j,g),w=y(j,`')"; click `),X=y(j,A),ie=y(j,' href "/technique/d3f:'),Q=y(j,re),H=y(j,'";')},m(j,K){v(j,r,K),v(j,l,K),v(j,s,K),v(j,n,K),v(j,f,K),v(j,d,K),v(j,m,K),v(j,_,K),v(j,u,K),v(j,E,K),v(j,P,K),v(j,I,K),Y.m(j,K),v(j,S,K),v(j,R,K),v(j,C,K),v(j,N,K),v(j,T,K),v(j,O,K),v(j,w,K),v(j,X,K),v(j,ie,K),v(j,Q,K),v(j,H,K)},p(j,K){K&2&&e!==(e=he(j[18].def_tech.value).replace(/ |\./g,"")+"")&&J(r,e),K&2&&t!==(t=j[18].def_tech_label.value+"")&&J(s,t),K&2&&h!==(h="May "+j[18].def_tactic_label.value.replace(/ /g,""))&&J(m,h),K&2&&c!==(c=j[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(u,c),K&2&&b!==(b=j[18].off_tech_label.value+"")&&J(P,b),z===(z=V(j,K))&&Y?Y.p(j,K):(Y.d(1),Y=z(j),Y&&(Y.c(),Y.m(S.parentNode,S))),K&2&&p!==(p=he(j[18].def_tech.value)+"")&&J(R,p),K&2&&F!==(F=j[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(N,F),K&2&&g!==(g=j[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(O,g),K&2&&A!==(A=he(j[18].def_tech.value)+"")&&J(X,A),K&2&&re!==(re=he(j[18].def_tech.value)+"")&&J(Q,re)},d(j){j&&(i(r),i(l),i(s),i(n),i(f),i(d),i(m),i(_),i(u),i(E),i(P),i(I),i(S),i(R),i(C),i(N),i(T),i(O),i(w),i(X),i(ie),i(Q),i(H)),Y.d(j)}}}function Bu(a){let e,r=a[18].off_tech_id.value.replace(/ |\./g,"")+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" OffensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," OffensiveTechniqueNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function Mu(a){let e,r=a[18].off_tech_id.value.replace(/ |\./g,"")+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" SelectedOffensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," SelectedOffensiveTechniqueNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function Ba(a){let e=a[6].edge_is_unique(a[18].def_tech_label.value,a[18].off_artifact_rel_label.value,a[18].off_artifact_label.value),r,l=e&&Va(a);return{c(){l&&l.c(),r=Ee()},l(t){l&&l.l(t),r=Ee()},m(t,s){l&&l.m(t,s),v(t,r,s)},p(t,s){s&2&&(e=t[6].edge_is_unique(t[18].def_tech_label.value,t[18].off_artifact_rel_label.value,t[18].off_artifact_label.value)),e?l?l.p(t,s):(l=Va(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&i(r),l&&l.d(t)}}}function $u(a){let e,r,l=Oe(a[1].def_to_off.results.bindings),t=[];for(let s=0;s<l.length;s+=1)t[s]=Ba(za(a,l,s));return{c(){e=k(`graph LR;
        `);for(let s=0;s<t.length;s+=1)t[s].c();r=Ee()},l(s){e=y(s,`graph LR;
        `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=Ee()},m(s,n){v(s,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,n);v(s,r,n)},p(s,n){if(n&74){l=Oe(s[1].def_to_off.results.bindings);let o;for(o=0;o<l.length;o+=1){const f=za(s,l,o);t[o]?t[o].p(f,n):(t[o]=Ba(f),t[o].c(),t[o].m(r.parentNode,r))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(s){s&&(i(e),i(r)),We(t,s)}}}function Hu(a){let e,r,l,t,s,n,o,f,d,h,m,_,c,u=a[3].length+"",E,b,P,I,D;const S=a[9].header,p=it(S,a,a[14],Ua),R=a[9].default,C=it(R,a,a[14],null),F=[Vu,Uu,zu],N=[];function T(g,O){return g[1]?g[1].def_to_off.results.bindings.length>0?1:2:0}return o=T(a),f=N[o]=F[o](a),{c(){e=B("dialog"),r=B("div"),p&&p.c(),l=k(`
    Select Attack Techniques
    `),C&&C.c(),t=W(),s=B("hr"),n=W(),f.c(),d=W(),h=B("hr"),m=W(),_=B("button"),c=k("Insert ("),E=k(u),b=k(")"),this.h()},l(g){e=M(g,"DIALOG",{class:!0});var O=pe(e);r=M(O,"DIV",{class:!0});var w=pe(r);p&&p.l(w),l=y(w,`
    Select Attack Techniques
    `),C&&C.l(w),t=x(w),s=M(w,"HR",{}),n=x(w),f.l(w),d=x(w),h=M(w,"HR",{}),m=x(w),_=M(w,"BUTTON",{class:!0});var A=pe(_);c=y(A,"Insert ("),E=y(A,u),b=y(A,")"),A.forEach(i),w.forEach(i),O.forEach(i),this.h()},h(){_.autofocus=!0,Z(_,"class","svelte-1ai9hff"),Z(r,"class","svelte-1ai9hff"),Z(e,"class","svelte-1ai9hff")},m(g,O){v(g,e,O),L(e,r),p&&p.m(r,null),L(r,l),C&&C.m(r,null),L(r,t),L(r,s),L(r,n),N[o].m(r,null),L(r,d),L(r,h),L(r,m),L(r,_),L(_,c),L(_,E),L(_,b),a[11](e),P=!0,_.focus(),I||(D=[ge(_,"click",a[7]),ge(r,"click",Ct(a[10])),ge(e,"close",a[12]),ge(e,"click",Mt(a[13]))],I=!0)},p(g,[O]){p&&p.p&&(!P||O&16384)&&ft(p,S,g,g[14],P?ct(S,g[14],O,qu):ut(g[14]),Ua),C&&C.p&&(!P||O&16384)&&ft(C,R,g,g[14],P?ct(R,g[14],O,null):ut(g[14]),null);let w=o;o=T(g),o===w?N[o].p(g,O):(pt(),ve(N[w],1,1,()=>{N[w]=null}),gt(),f=N[o],f?f.p(g,O):(f=N[o]=F[o](g),f.c()),de(f,1),f.m(r,d)),(!P||O&8)&&u!==(u=g[3].length+"")&&J(E,u)},i(g){P||(de(p,g),de(C,g),de(f),P=!0)},o(g){ve(p,g),ve(C,g),ve(f),P=!1},d(g){g&&i(e),p&&p.d(g),C&&C.d(g),N[o].d(),a[11](null),I=!1,mt(D)}}}function Qu(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{show_attack_modal:f}=e,{parent_node:d}=e,{data:h}=e,m;const _=qt();et(a,_,p=>r(16,s=p));const c=zt();et(a,c,p=>r(15,t=p));let u=new Xt;function E(p){l.includes(p)?r(3,l=l.filter(R=>R!==p)):l.push(p),r(3,l)}window.def_to_off_callback=function(p){E(p)};function b(){let p=0,R=200,C=100;for(const F of l){let N=h.def_to_off.results.bindings.find(T=>T.off_tech_id.value.replace(/ |\./g,"")==F);N&&(Ht(_,c,d,"attackSelectorNode",N.off_tech_label.value,"d3f:"+N.off_tech_id.value,d.data.sequence,d.position.x+p*R,d.position.y+C,182,63,"May "+N.def_tactic_label.value,!0),p+=1)}_.set(s),c.set(t),m&&m.close(),r(3,l=[])}function P(p){Nt.call(this,a,p)}function I(p){Ze[p?"unshift":"push"](()=>{m=p,r(2,m)})}const D=()=>r(0,f=!1),S=()=>{m.close(),r(3,l=[])};return a.$$set=p=>{"show_attack_modal"in p&&r(0,f=p.show_attack_modal),"parent_node"in p&&r(8,d=p.parent_node),"data"in p&&r(1,h=p.data),"$$scope"in p&&r(14,o=p.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&f&&m&&(m.showModal(),u.reset()),a.$$.dirty&5&&!f&&m&&(m.close(),u.reset())},r(3,l=[]),[f,h,m,l,_,c,u,b,d,n,P,I,D,S,o]}class Gu extends nt{constructor(e){super(),ot(this,e,Qu,Hu,st,{show_attack_modal:0,parent_node:8,data:1})}}function Ku(a){let e,r="artifacts",l,t,s,n,o,f="offensive techniques",d,h,m,_,c,u="weaknesses (coming soon)",E,b,P;function I(R){a[6](R)}let D={parent_node:a[0],data:a[1]};a[3]!==void 0&&(D.show_artifacts_modal=a[3]),t=new ju({props:D}),Ze.push(()=>Et(t,"show_artifacts_modal",I));function S(R){a[8](R)}let p={parent_node:a[0],data:a[1]};return a[2]!==void 0&&(p.show_attack_modal=a[2]),h=new Gu({props:p}),Ze.push(()=>Et(h,"show_attack_modal",S)),{c(){e=B("button"),e.textContent=r,l=W(),Te(t.$$.fragment),n=W(),o=B("button"),o.textContent=f,d=W(),Te(h.$$.fragment),_=W(),c=B("button"),c.textContent=u,this.h()},l(R){e=M(R,"BUTTON",{class:!0,"data-svelte-h":!0}),we(e)!=="svelte-isgkpy"&&(e.textContent=r),l=x(R),Ae(t.$$.fragment,R),n=x(R),o=M(R,"BUTTON",{class:!0,"data-svelte-h":!0}),we(o)!=="svelte-17h5zge"&&(o.textContent=f),d=x(R),Ae(h.$$.fragment,R),_=x(R),c=M(R,"BUTTON",{class:!0,"data-svelte-h":!0}),we(c)!=="svelte-ivhbdc"&&(c.textContent=u),this.h()},h(){Z(e,"class","svelte-1x5dcdh"),Z(o,"class","svelte-1x5dcdh"),c.disabled=!0,Z(c,"class","svelte-1x5dcdh")},m(R,C){v(R,e,C),v(R,l,C),Fe(t,R,C),v(R,n,C),v(R,o,C),v(R,d,C),Fe(h,R,C),v(R,_,C),v(R,c,C),E=!0,b||(P=[ge(e,"click",a[5]),ge(o,"click",a[7])],b=!0)},p(R,[C]){const F={};C&1&&(F.parent_node=R[0]),C&2&&(F.data=R[1]),!s&&C&8&&(s=!0,F.show_artifacts_modal=R[3],bt(()=>s=!1)),t.$set(F);const N={};C&1&&(N.parent_node=R[0]),C&2&&(N.data=R[1]),!m&&C&4&&(m=!0,N.show_attack_modal=R[2],bt(()=>m=!1)),h.$set(N)},i(R){E||(de(t.$$.fragment,R),de(h.$$.fragment,R),E=!0)},o(R){ve(t.$$.fragment,R),ve(h.$$.fragment,R),E=!1},d(R){R&&(i(e),i(l),i(n),i(o),i(d),i(_),i(c)),Le(t,R),Le(h,R),b=!1,mt(P)}}}function Ju(a,e,r){let l,t;var s=this&&this.__awaiter||function(u,E,b,P){function I(D){return D instanceof b?D:new b(function(S){S(D)})}return new(b||(b=Promise))(function(D,S){function p(F){try{C(P.next(F))}catch(N){S(N)}}function R(F){try{C(P.throw(F))}catch(N){S(N)}}function C(F){F.done?D(F.value):I(F.value).then(p,R)}C((P=P.apply(u,E||[])).next())})};let{node:n}=e,o;function f(u){alert(u),r(3,l=!1),r(2,t=!1)}function d(u){return s(this,void 0,void 0,function*(){if(u.data.d3f_class&&u.data.d3f_class.includes("d3f:")){const E=u.data.d3f_class,b=yield fetch(`/api/technique/${E}.json`),P=yield b.json();if(b.status!=200||P.description["@graph"].length==0)f(`D3FEND Technique: "${E.replace("d3f:","")}" not found in ontology`);else return P}else f("Please specify a D3FEND Class for this node to enable inferential mapping")})}const h=async()=>{r(1,o=null),r(3,l=!0),r(1,o=await d(n))};function m(u){l=u,r(3,l)}const _=async()=>{r(1,o=null),r(2,t=!0),r(1,o=await d(n))};function c(u){t=u,r(2,t)}return a.$$set=u=>{"node"in u&&r(0,n=u.node)},r(3,l=!1),r(2,t=!1),[n,o,t,l,d,h,m,_,c]}class Yu extends nt{constructor(e){super(),ot(this,e,Ju,Ku,st,{node:0})}}function Ma(a,e,r){const l=a.slice();return l[18]=e[r],l}const Xu=a=>({}),$a=a=>({});function Zu(a){let e;return{c(){e=k("No related artifacts in this release.")},l(r){e=y(r,"No related artifacts in this release.")},m(r,l){v(r,e,l)},p:Se,i:Se,o:Se,d(r){r&&i(e)}}}function Wu(a){let e,r;return e=new $t({props:{$$slots:{default:[rc]},$$scope:{ctx:a}}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t&16394&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){ve(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function xu(a){let e,r="Loading...";return{c(){e=B("div"),e.textContent=r},l(l){e=M(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:Se,i:Se,o:Se,d(l){l&&i(e)}}}function Ha(a){let e=a[18].off_tech_id.value.replace(/ |\./g,"")+"",r,l,t=a[18].off_tech_label.value+"",s,n,o="-->",f,d,h=a[18].off_artifact_rel_label.value.replace(/ /g,"")+"",m,_,c=he(a[18].off_artifact.value)+"",u,E,b=a[18].off_artifact_label.value+"",P,I,D=a[18].off_tech_id.value.replace(/ |\./g,"")+"",S,p,R,C,F=he(a[18].off_artifact.value)+"",N,T,g=he(a[18].off_artifact.value)+"",O,w,A=a[18].off_tech_id.value.replace(/ |\./g,"")+"",X,ie,re=br(a[18].off_tech_id.value)+"",Q,H,V=he(a[18].off_artifact.value)+"",z,Y,j=he(a[18].off_artifact.value)+"",K,Ce;function ke(ce,_e){return _e&10&&(R=null),R==null&&(R=!!ce[3].includes(he(ce[18].off_artifact.value))),R?tc:ec}let le=ke(a,-1),me=le(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),d=k(" |"),m=k(h),_=k("| "),u=k(c),E=k('["'),P=k(b),I=k('"]; class '),S=k(D),p=k(` OffensiveTechniqueNode;
            `),me.c(),C=k(" ; click "),N=k(F),T=k(' href "/dao/artifact/d3f:'),O=k(g),w=k('"; click '),X=k(A),ie=k(' href "'),Q=k(re),H=k('"; click '),z=k(V),Y=k(` href "javascript:off_to_art_callback('`),K=k(j),Ce=k(`')";`)},l(ce){r=y(ce,e),l=y(ce,'["'),s=y(ce,t),n=y(ce,'"] '),f=y(ce,o),d=y(ce," |"),m=y(ce,h),_=y(ce,"| "),u=y(ce,c),E=y(ce,'["'),P=y(ce,b),I=y(ce,'"]; class '),S=y(ce,D),p=y(ce,` OffensiveTechniqueNode;
            `),me.l(ce),C=y(ce," ; click "),N=y(ce,F),T=y(ce,' href "/dao/artifact/d3f:'),O=y(ce,g),w=y(ce,'"; click '),X=y(ce,A),ie=y(ce,' href "'),Q=y(ce,re),H=y(ce,'"; click '),z=y(ce,V),Y=y(ce,` href "javascript:off_to_art_callback('`),K=y(ce,j),Ce=y(ce,`')";`)},m(ce,_e){v(ce,r,_e),v(ce,l,_e),v(ce,s,_e),v(ce,n,_e),v(ce,f,_e),v(ce,d,_e),v(ce,m,_e),v(ce,_,_e),v(ce,u,_e),v(ce,E,_e),v(ce,P,_e),v(ce,I,_e),v(ce,S,_e),v(ce,p,_e),me.m(ce,_e),v(ce,C,_e),v(ce,N,_e),v(ce,T,_e),v(ce,O,_e),v(ce,w,_e),v(ce,X,_e),v(ce,ie,_e),v(ce,Q,_e),v(ce,H,_e),v(ce,z,_e),v(ce,Y,_e),v(ce,K,_e),v(ce,Ce,_e)},p(ce,_e){_e&2&&e!==(e=ce[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(r,e),_e&2&&t!==(t=ce[18].off_tech_label.value+"")&&J(s,t),_e&2&&h!==(h=ce[18].off_artifact_rel_label.value.replace(/ /g,"")+"")&&J(m,h),_e&2&&c!==(c=he(ce[18].off_artifact.value)+"")&&J(u,c),_e&2&&b!==(b=ce[18].off_artifact_label.value+"")&&J(P,b),_e&2&&D!==(D=ce[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(S,D),le===(le=ke(ce,_e))&&me?me.p(ce,_e):(me.d(1),me=le(ce),me&&(me.c(),me.m(C.parentNode,C))),_e&2&&F!==(F=he(ce[18].off_artifact.value)+"")&&J(N,F),_e&2&&g!==(g=he(ce[18].off_artifact.value)+"")&&J(O,g),_e&2&&A!==(A=ce[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(X,A),_e&2&&re!==(re=br(ce[18].off_tech_id.value)+"")&&J(Q,re),_e&2&&V!==(V=he(ce[18].off_artifact.value)+"")&&J(z,V),_e&2&&j!==(j=he(ce[18].off_artifact.value)+"")&&J(K,j)},d(ce){ce&&(i(r),i(l),i(s),i(n),i(f),i(d),i(m),i(_),i(u),i(E),i(P),i(I),i(S),i(p),i(C),i(N),i(T),i(O),i(w),i(X),i(ie),i(Q),i(H),i(z),i(Y),i(K),i(Ce)),me.d(ce)}}}function ec(a){let e,r=he(a[18].off_artifact.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" ArtifactNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," ArtifactNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=he(s[18].off_artifact.value)+"")&&J(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function tc(a){let e,r=he(a[18].off_artifact.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" SelectedArtifactNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," SelectedArtifactNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=he(s[18].off_artifact.value)+"")&&J(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function Qa(a){let e=a[6].edge_is_unique(a[18].off_tech_label.value,a[18].off_artifact_rel_label.value,a[18].off_artifact_label.value),r,l=e&&Ha(a);return{c(){l&&l.c(),r=Ee()},l(t){l&&l.l(t),r=Ee()},m(t,s){l&&l.m(t,s),v(t,r,s)},p(t,s){s&2&&(e=t[6].edge_is_unique(t[18].off_tech_label.value,t[18].off_artifact_rel_label.value,t[18].off_artifact_label.value)),e?l?l.p(t,s):(l=Ha(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&i(r),l&&l.d(t)}}}function rc(a){let e,r,l=Oe(a[1].off_to_def.results.bindings),t=[];for(let s=0;s<l.length;s+=1)t[s]=Qa(Ma(a,l,s));return{c(){e=k(`graph LR;
        `);for(let s=0;s<t.length;s+=1)t[s].c();r=Ee()},l(s){e=y(s,`graph LR;
        `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=Ee()},m(s,n){v(s,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,n);v(s,r,n)},p(s,n){if(n&74){l=Oe(s[1].off_to_def.results.bindings);let o;for(o=0;o<l.length;o+=1){const f=Ma(s,l,o);t[o]?t[o].p(f,n):(t[o]=Qa(f),t[o].c(),t[o].m(r.parentNode,r))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(s){s&&(i(e),i(r)),We(t,s)}}}function lc(a){let e,r,l,t,s,n,o,f,d,h,m,_,c,u=a[3].length+"",E,b,P,I,D;const S=a[9].header,p=it(S,a,a[14],$a),R=a[9].default,C=it(R,a,a[14],null),F=[xu,Wu,Zu],N=[];function T(g,O){return g[1]?g[1].off_to_def.results.bindings.length>0?1:2:0}return o=T(a),f=N[o]=F[o](a),{c(){e=B("dialog"),r=B("div"),p&&p.c(),l=k(`
    Select Related Artifacts To Insert
    `),C&&C.c(),t=W(),s=B("hr"),n=W(),f.c(),d=W(),h=B("hr"),m=W(),_=B("button"),c=k("Insert ("),E=k(u),b=k(")"),this.h()},l(g){e=M(g,"DIALOG",{class:!0});var O=pe(e);r=M(O,"DIV",{class:!0});var w=pe(r);p&&p.l(w),l=y(w,`
    Select Related Artifacts To Insert
    `),C&&C.l(w),t=x(w),s=M(w,"HR",{}),n=x(w),f.l(w),d=x(w),h=M(w,"HR",{}),m=x(w),_=M(w,"BUTTON",{class:!0});var A=pe(_);c=y(A,"Insert ("),E=y(A,u),b=y(A,")"),A.forEach(i),w.forEach(i),O.forEach(i),this.h()},h(){_.autofocus=!0,Z(_,"class","svelte-x0618k"),Z(r,"class","svelte-x0618k"),Z(e,"class","svelte-x0618k")},m(g,O){v(g,e,O),L(e,r),p&&p.m(r,null),L(r,l),C&&C.m(r,null),L(r,t),L(r,s),L(r,n),N[o].m(r,null),L(r,d),L(r,h),L(r,m),L(r,_),L(_,c),L(_,E),L(_,b),a[11](e),P=!0,_.focus(),I||(D=[ge(_,"click",a[7]),ge(r,"click",Ct(a[10])),ge(e,"close",a[12]),ge(e,"click",Mt(a[13]))],I=!0)},p(g,[O]){p&&p.p&&(!P||O&16384)&&ft(p,S,g,g[14],P?ct(S,g[14],O,Xu):ut(g[14]),$a),C&&C.p&&(!P||O&16384)&&ft(C,R,g,g[14],P?ct(R,g[14],O,null):ut(g[14]),null);let w=o;o=T(g),o===w?N[o].p(g,O):(pt(),ve(N[w],1,1,()=>{N[w]=null}),gt(),f=N[o],f?f.p(g,O):(f=N[o]=F[o](g),f.c()),de(f,1),f.m(r,d)),(!P||O&8)&&u!==(u=g[3].length+"")&&J(E,u)},i(g){P||(de(p,g),de(C,g),de(f),P=!0)},o(g){ve(p,g),ve(C,g),ve(f),P=!1},d(g){g&&i(e),p&&p.d(g),C&&C.d(g),N[o].d(),a[11](null),I=!1,mt(D)}}}function ac(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{show_artifacts_modal:f}=e,{parent_node:d}=e,{data:h}=e,m;const _=qt();et(a,_,p=>r(16,s=p));const c=zt();et(a,c,p=>r(15,t=p));let u=new Xt;function E(p){l.includes(p)?r(3,l=l.filter(R=>R!==p)):l.push(p),r(3,l)}window.off_to_art_callback=function(p){E(p)};function b(){let p=0,R=200,C=100;for(const F of l){let N=h.off_to_def.results.bindings.find(T=>he(T.off_artifact.value)==F);N&&(Ht(_,c,d,"artifactSelectorNode",N.off_artifact_label.value,"d3f:"+he(N.off_artifact.value),d.data.sequence,d.position.x+p*R,d.position.y+C,182,63,N.off_artifact_rel_label.value,!0),p+=1)}_.set(s),c.set(t),m&&m.close(),r(3,l=[])}function P(p){Nt.call(this,a,p)}function I(p){Ze[p?"unshift":"push"](()=>{m=p,r(2,m)})}const D=()=>r(0,f=!1),S=()=>{m.close(),r(3,l=[])};return a.$$set=p=>{"show_artifacts_modal"in p&&r(0,f=p.show_artifacts_modal),"parent_node"in p&&r(8,d=p.parent_node),"data"in p&&r(1,h=p.data),"$$scope"in p&&r(14,o=p.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&f&&m&&(m.showModal(),u.reset()),a.$$.dirty&5&&!f&&m&&(m.close(),u.reset())},r(3,l=[]),[f,h,m,l,_,c,u,b,d,n,P,I,D,S,o]}class sc extends nt{constructor(e){super(),ot(this,e,ac,lc,st,{show_artifacts_modal:0,parent_node:8,data:1})}}function Ga(a,e,r){const l=a.slice();return l[23]=e[r],l}const nc=a=>({}),Ka=a=>({});function oc(a){let e;return{c(){e=k("No related artifacts in this release.")},l(r){e=y(r,"No related artifacts in this release.")},m(r,l){v(r,e,l)},p:Se,i:Se,o:Se,d(r){r&&i(e)}}}function ic(a){let e,r,l,t,s,n,o,f,d,h;function m(c){a[14](c)}let _={toggles:a[4]};return a[3]!==void 0&&(_.selected=a[3]),r=new Ls({props:_}),Ze.push(()=>Et(r,"selected",m)),d=new $t({props:{$$slots:{default:[dc]},$$scope:{ctx:a}}}),{c(){e=B("div"),Te(r.$$.fragment),t=W(),s=B("br"),n=W(),o=B("br"),f=W(),Te(d.$$.fragment),this.h()},l(c){e=M(c,"DIV",{class:!0});var u=pe(e);Ae(r.$$.fragment,u),u.forEach(i),t=x(c),s=M(c,"BR",{}),n=x(c),o=M(c,"BR",{}),f=x(c),Ae(d.$$.fragment,c),this.h()},h(){Z(e,"class","center shrink")},m(c,u){v(c,e,u),Fe(r,e,null),v(c,t,u),v(c,s,u),v(c,n,u),v(c,o,u),v(c,f,u),Fe(d,c,u),h=!0},p(c,u){const E={};u&16&&(E.toggles=c[4]),!l&&u&8&&(l=!0,E.selected=c[3],bt(()=>l=!1)),r.$set(E);const b={};u&262186&&(b.$$scope={dirty:u,ctx:c}),d.$set(b)},i(c){h||(de(r.$$.fragment,c),de(d.$$.fragment,c),h=!0)},o(c){ve(r.$$.fragment,c),ve(d.$$.fragment,c),h=!1},d(c){c&&(i(e),i(t),i(s),i(n),i(o),i(f)),Le(r),Le(d,c)}}}function fc(a){let e,r="Loading...";return{c(){e=B("div"),e.textContent=r},l(l){e=M(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:Se,i:Se,o:Se,d(l){l&&i(e)}}}function Ja(a){let e=a[8].edge_is_unique(a[23].def_tech_label.value,a[23].def_artifact_rel_label.value,a[23].off_artifact_label.value),r,l=e&&Ya(a);return{c(){l&&l.c(),r=Ee()},l(t){l&&l.l(t),r=Ee()},m(t,s){l&&l.m(t,s),v(t,r,s)},p(t,s){s&2&&(e=t[8].edge_is_unique(t[23].def_tech_label.value,t[23].def_artifact_rel_label.value,t[23].off_artifact_label.value)),e?l?l.p(t,s):(l=Ya(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&i(r),l&&l.d(t)}}}function Ya(a){let e=!a[3].includes(a[23].def_tactic_label.value),r,l=e&&Xa(a);return{c(){l&&l.c(),r=Ee()},l(t){l&&l.l(t),r=Ee()},m(t,s){l&&l.m(t,s),v(t,r,s)},p(t,s){s&10&&(e=!t[3].includes(t[23].def_tactic_label.value)),e?l?l.p(t,s):(l=Xa(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&i(r),l&&l.d(t)}}}function Xa(a){let e=he(a[23].def_tech.value)+"",r,l,t=a[23].def_tech_label.value+"",s,n,o="-->",f,d,h=a[23].def_artifact_rel_label.value.replace(/ /g,"")+"",m,_,c=he(a[23].off_artifact.value)+"",u,E,b=a[23].off_artifact_label.value+"",P,I,D=a[8].edge_is_unique(a[23].def_tech.value,a[23].def_tactic_label.value,a[23].off_tech_id.value),S,p,R,C=a[23].off_artifact_label.value.replace(/ /g,"")+"",F,N,T=he(a[23].def_tech.value)+"",g,O,w=a[23].def_tech_label.value.replace(/ |\./g,"")+"",A,X,ie=D&&Za(a);function re(V,z){return z&34&&(p=null),p==null&&(p=!!V[5].includes(he(V[23].def_tech.value))),p?cc:uc}let Q=re(a,-1),H=Q(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),d=k(`
                | `),m=k(h),_=k(" | "),u=k(c),E=k('["'),P=k(b),I=k(`"];

                `),ie&&ie.c(),S=W(),H.c(),R=k(` 
                class `),F=k(C),N=k(` ArtifactNode;
                click `),g=k(T),O=k(` href "javascript:off_to_def_callback('`),A=k(w),X=k(`')";`)},l(V){r=y(V,e),l=y(V,'["'),s=y(V,t),n=y(V,'"] '),f=y(V,o),d=y(V,`
                | `),m=y(V,h),_=y(V," | "),u=y(V,c),E=y(V,'["'),P=y(V,b),I=y(V,`"];

                `),ie&&ie.l(V),S=x(V),H.l(V),R=y(V,` 
                class `),F=y(V,C),N=y(V,` ArtifactNode;
                click `),g=y(V,T),O=y(V,` href "javascript:off_to_def_callback('`),A=y(V,w),X=y(V,`')";`)},m(V,z){v(V,r,z),v(V,l,z),v(V,s,z),v(V,n,z),v(V,f,z),v(V,d,z),v(V,m,z),v(V,_,z),v(V,u,z),v(V,E,z),v(V,P,z),v(V,I,z),ie&&ie.m(V,z),v(V,S,z),H.m(V,z),v(V,R,z),v(V,F,z),v(V,N,z),v(V,g,z),v(V,O,z),v(V,A,z),v(V,X,z)},p(V,z){z&2&&e!==(e=he(V[23].def_tech.value)+"")&&J(r,e),z&2&&t!==(t=V[23].def_tech_label.value+"")&&J(s,t),z&2&&h!==(h=V[23].def_artifact_rel_label.value.replace(/ /g,"")+"")&&J(m,h),z&2&&c!==(c=he(V[23].off_artifact.value)+"")&&J(u,c),z&2&&b!==(b=V[23].off_artifact_label.value+"")&&J(P,b),z&2&&(D=V[8].edge_is_unique(V[23].def_tech.value,V[23].def_tactic_label.value,V[23].off_tech_id.value)),D?ie?ie.p(V,z):(ie=Za(V),ie.c(),ie.m(S.parentNode,S)):ie&&(ie.d(1),ie=null),Q===(Q=re(V,z))&&H?H.p(V,z):(H.d(1),H=Q(V),H&&(H.c(),H.m(R.parentNode,R))),z&2&&C!==(C=V[23].off_artifact_label.value.replace(/ /g,"")+"")&&J(F,C),z&2&&T!==(T=he(V[23].def_tech.value)+"")&&J(g,T),z&2&&w!==(w=V[23].def_tech_label.value.replace(/ |\./g,"")+"")&&J(A,w)},d(V){V&&(i(r),i(l),i(s),i(n),i(f),i(d),i(m),i(_),i(u),i(E),i(P),i(I),i(S),i(R),i(F),i(N),i(g),i(O),i(A),i(X)),ie&&ie.d(V),H.d(V)}}}function Za(a){let e=he(a[23].def_tech.value)+"",r,l,t=a[23].def_tech_label.value+"",s,n,o="-.->",f,d,h="May "+a[23].def_tactic_label.value,m,_,c=a[23].off_tech_id.value.replace(/ |\./g,"")+"",u,E,b=a[23].off_tech_label.value+"",P,I;return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),d=k(`
                  | `),m=k(h),_=k(" | "),u=k(c),E=k('["'),P=k(b),I=k('"] ;')},l(D){r=y(D,e),l=y(D,'["'),s=y(D,t),n=y(D,'"] '),f=y(D,o),d=y(D,`
                  | `),m=y(D,h),_=y(D," | "),u=y(D,c),E=y(D,'["'),P=y(D,b),I=y(D,'"] ;')},m(D,S){v(D,r,S),v(D,l,S),v(D,s,S),v(D,n,S),v(D,f,S),v(D,d,S),v(D,m,S),v(D,_,S),v(D,u,S),v(D,E,S),v(D,P,S),v(D,I,S)},p(D,S){S&2&&e!==(e=he(D[23].def_tech.value)+"")&&J(r,e),S&2&&t!==(t=D[23].def_tech_label.value+"")&&J(s,t),S&2&&h!==(h="May "+D[23].def_tactic_label.value)&&J(m,h),S&2&&c!==(c=D[23].off_tech_id.value.replace(/ |\./g,"")+"")&&J(u,c),S&2&&b!==(b=D[23].off_tech_label.value+"")&&J(P,b)},d(D){D&&(i(r),i(l),i(s),i(n),i(f),i(d),i(m),i(_),i(u),i(E),i(P),i(I))}}}function uc(a){let e,r=he(a[23].def_tech.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" DefensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," DefensiveTechniqueNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=he(s[23].def_tech.value)+"")&&J(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function cc(a){let e,r=he(a[23].def_tech.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" SelectedDefensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," SelectedDefensiveTechniqueNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=he(s[23].def_tech.value)+"")&&J(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function Wa(a){let e=a[23].off_tech_id.value.replace(/ |\./g,"")+"",r,l,t=a[23].off_tech_label.value+"",s,n,o="-->",f,d,h=a[23].off_artifact_rel_label.value.replace(/ /g,"")+"",m,_,c=he(a[23].off_artifact.value)+"",u,E,b=a[23].off_artifact_label.value+"",P,I,D=a[23].off_tech_id.value.replace(/ |\./g,"")+"",S,p,R=he(a[23].off_artifact.value)+"",C,F,N=he(a[23].off_artifact.value)+"",T,g,O=he(a[23].off_artifact.value)+"",w,A,X=a[23].off_tech_id.value.replace(/ |\./g,"")+"",ie,re,Q=br(a[23].off_tech_id.value)+"",H,V,z=he(a[23].off_artifact.value)+"",Y,j,K=he(a[23].off_artifact.value)+"",Ce,ke;return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),d=k(" |"),m=k(h),_=k("| "),u=k(c),E=k('["'),P=k(b),I=k('"]; class '),S=k(D),p=k(` OffensiveTechniqueNode;
            class `),C=k(R),F=k(" ArtifactNode; click "),T=k(N),g=k(' href "/dao/artifact/d3f:'),w=k(O),A=k(`";
            click `),ie=k(X),re=k(' href "'),H=k(Q),V=k('"; click '),Y=k(z),j=k(' href "/dao/artifact/d3f:'),Ce=k(K),ke=k('";')},l(le){r=y(le,e),l=y(le,'["'),s=y(le,t),n=y(le,'"] '),f=y(le,o),d=y(le," |"),m=y(le,h),_=y(le,"| "),u=y(le,c),E=y(le,'["'),P=y(le,b),I=y(le,'"]; class '),S=y(le,D),p=y(le,` OffensiveTechniqueNode;
            class `),C=y(le,R),F=y(le," ArtifactNode; click "),T=y(le,N),g=y(le,' href "/dao/artifact/d3f:'),w=y(le,O),A=y(le,`";
            click `),ie=y(le,X),re=y(le,' href "'),H=y(le,Q),V=y(le,'"; click '),Y=y(le,z),j=y(le,' href "/dao/artifact/d3f:'),Ce=y(le,K),ke=y(le,'";')},m(le,me){v(le,r,me),v(le,l,me),v(le,s,me),v(le,n,me),v(le,f,me),v(le,d,me),v(le,m,me),v(le,_,me),v(le,u,me),v(le,E,me),v(le,P,me),v(le,I,me),v(le,S,me),v(le,p,me),v(le,C,me),v(le,F,me),v(le,T,me),v(le,g,me),v(le,w,me),v(le,A,me),v(le,ie,me),v(le,re,me),v(le,H,me),v(le,V,me),v(le,Y,me),v(le,j,me),v(le,Ce,me),v(le,ke,me)},p(le,me){me&2&&e!==(e=le[23].off_tech_id.value.replace(/ |\./g,"")+"")&&J(r,e),me&2&&t!==(t=le[23].off_tech_label.value+"")&&J(s,t),me&2&&h!==(h=le[23].off_artifact_rel_label.value.replace(/ /g,"")+"")&&J(m,h),me&2&&c!==(c=he(le[23].off_artifact.value)+"")&&J(u,c),me&2&&b!==(b=le[23].off_artifact_label.value+"")&&J(P,b),me&2&&D!==(D=le[23].off_tech_id.value.replace(/ |\./g,"")+"")&&J(S,D),me&2&&R!==(R=he(le[23].off_artifact.value)+"")&&J(C,R),me&2&&N!==(N=he(le[23].off_artifact.value)+"")&&J(T,N),me&2&&O!==(O=he(le[23].off_artifact.value)+"")&&J(w,O),me&2&&X!==(X=le[23].off_tech_id.value.replace(/ |\./g,"")+"")&&J(ie,X),me&2&&Q!==(Q=br(le[23].off_tech_id.value)+"")&&J(H,Q),me&2&&z!==(z=he(le[23].off_artifact.value)+"")&&J(Y,z),me&2&&K!==(K=he(le[23].off_artifact.value)+"")&&J(Ce,K)},d(le){le&&(i(r),i(l),i(s),i(n),i(f),i(d),i(m),i(_),i(u),i(E),i(P),i(I),i(S),i(p),i(C),i(F),i(T),i(g),i(w),i(A),i(ie),i(re),i(H),i(V),i(Y),i(j),i(Ce),i(ke))}}}function xa(a){let e,r=a[8].edge_is_unique(a[23].off_tech_label.value,a[23].off_artifact_rel_label.value,a[23].off_artifact_label.value),l,t="def_tech"in a[23]&&Ja(a),s=r&&Wa(a);return{c(){t&&t.c(),e=W(),s&&s.c(),l=Ee()},l(n){t&&t.l(n),e=x(n),s&&s.l(n),l=Ee()},m(n,o){t&&t.m(n,o),v(n,e,o),s&&s.m(n,o),v(n,l,o)},p(n,o){"def_tech"in n[23]?t?t.p(n,o):(t=Ja(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null),o&2&&(r=n[8].edge_is_unique(n[23].off_tech_label.value,n[23].off_artifact_rel_label.value,n[23].off_artifact_label.value)),r?s?s.p(n,o):(s=Wa(n),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null)},d(n){n&&(i(e),i(l)),t&&t.d(n),s&&s.d(n)}}}function dc(a){let e,r,l=Oe(a[1].off_to_def.results.bindings),t=[];for(let s=0;s<l.length;s+=1)t[s]=xa(Ga(a,l,s));return{c(){e=k(`graph LR;
        `);for(let s=0;s<t.length;s+=1)t[s].c();r=Ee()},l(s){e=y(s,`graph LR;
        `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=Ee()},m(s,n){v(s,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,n);v(s,r,n)},p(s,n){if(n&298){l=Oe(s[1].off_to_def.results.bindings);let o;for(o=0;o<l.length;o+=1){const f=Ga(s,l,o);t[o]?t[o].p(f,n):(t[o]=xa(f),t[o].c(),t[o].m(r.parentNode,r))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(s){s&&(i(e),i(r)),We(t,s)}}}function hc(a){let e,r,l,t,s,n,o,f,d,h,m,_,c,u=a[5].length+"",E,b,P,I,D;const S=a[12].header,p=it(S,a,a[18],Ka),R=a[12].default,C=it(R,a,a[18],null),F=[fc,ic,oc],N=[];function T(g,O){return g[1]?g[1].off_to_def.results.bindings.length>0?1:2:0}return o=T(a),f=N[o]=F[o](a),{c(){e=B("dialog"),r=B("div"),p&&p.c(),l=k(`
    Select Related Artifacts To Insert
    `),C&&C.c(),t=W(),s=B("hr"),n=W(),f.c(),d=W(),h=B("hr"),m=W(),_=B("button"),c=k("Insert ("),E=k(u),b=k(")"),this.h()},l(g){e=M(g,"DIALOG",{class:!0});var O=pe(e);r=M(O,"DIV",{class:!0});var w=pe(r);p&&p.l(w),l=y(w,`
    Select Related Artifacts To Insert
    `),C&&C.l(w),t=x(w),s=M(w,"HR",{}),n=x(w),f.l(w),d=x(w),h=M(w,"HR",{}),m=x(w),_=M(w,"BUTTON",{class:!0});var A=pe(_);c=y(A,"Insert ("),E=y(A,u),b=y(A,")"),A.forEach(i),w.forEach(i),O.forEach(i),this.h()},h(){_.autofocus=!0,Z(_,"class","svelte-x0618k"),Z(r,"class","svelte-x0618k"),Z(e,"class","svelte-x0618k")},m(g,O){v(g,e,O),L(e,r),p&&p.m(r,null),L(r,l),C&&C.m(r,null),L(r,t),L(r,s),L(r,n),N[o].m(r,null),L(r,d),L(r,h),L(r,m),L(r,_),L(_,c),L(_,E),L(_,b),a[15](e),P=!0,_.focus(),I||(D=[ge(_,"click",a[9]),ge(r,"click",Ct(a[13])),ge(e,"close",a[16]),ge(e,"click",Mt(a[17]))],I=!0)},p(g,[O]){p&&p.p&&(!P||O&262144)&&ft(p,S,g,g[18],P?ct(S,g[18],O,nc):ut(g[18]),Ka),C&&C.p&&(!P||O&262144)&&ft(C,R,g,g[18],P?ct(R,g[18],O,null):ut(g[18]),null);let w=o;o=T(g),o===w?N[o].p(g,O):(pt(),ve(N[w],1,1,()=>{N[w]=null}),gt(),f=N[o],f?f.p(g,O):(f=N[o]=F[o](g),f.c()),de(f,1),f.m(r,d)),(!P||O&32)&&u!==(u=g[5].length+"")&&J(E,u)},i(g){P||(de(p,g),de(C,g),de(f),P=!0)},o(g){ve(p,g),ve(C,g),ve(f),P=!1},d(g){g&&i(e),p&&p.d(g),C&&C.d(g),N[o].d(),a[15](null),I=!1,mt(D)}}}function _c(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{show_defend_modal:f}=e,{parent_node:d}=e,{data:h}=e,m;const _=qt();et(a,_,T=>r(20,s=T));const c=zt();et(a,c,T=>r(19,t=T));let u=new Xt;function E(T){l.includes(T)?r(5,l=l.filter(g=>g!==T)):l.push(T),r(5,l)}window.off_to_def_callback=function(T){E(T)};function b(){let T=0,g=200,O=100;for(const w of l){let A=h.off_to_def.results.bindings.find(X=>"def_tech"in X&&he(X.def_tech.value)==w);A&&(Ht(_,c,d,"countermeasureSelectorNode",A.def_tech_label.value,"d3f:"+he(A.def_tech.value),d.data.sequence,d.position.x+T*g,d.position.y+O,182,63,"May "+A.def_tactic_label.value,!1),T+=1)}_.set(s),c.set(t),m&&m.close(),r(5,l=[])}let P=new Set,I=[],D=[];As(I,D)&&(D=[]);function S(T){for(const g of l){let O=h.off_to_def.results.bindings.find(w=>"def_tech"in w&&he(w.def_tech.value)==g);T.includes(O.def_tactic_label.value)&&r(5,l=l.filter(w=>w!==g))}r(5,l)}function p(T){Nt.call(this,a,T)}function R(T){D=T,r(3,D)}function C(T){Ze[T?"unshift":"push"](()=>{m=T,r(2,m)})}const F=()=>r(0,f=!1),N=()=>{m.close(),r(5,l=[])};return a.$$set=T=>{"show_defend_modal"in T&&r(0,f=T.show_defend_modal),"parent_node"in T&&r(10,d=T.parent_node),"data"in T&&r(1,h=T.data),"$$scope"in T&&r(18,o=T.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&f&&m&&(m.showModal(),u.reset()),a.$$.dirty&5&&!f&&m&&(m.close(),u.reset()),a.$$.dirty&2050&&h&&(h.off_to_def.results.bindings.forEach(T=>{"def_tactic_label"in T&&P.add(T.def_tactic_label.value)}),r(11,P),r(1,h)),a.$$.dirty&2048&&r(4,I=Array.from(P).sort(function(T,g){return Er[T]-Er[g]})),a.$$.dirty&8&&S(D),a.$$.dirty&8&&u.reset(D)},r(5,l=[]),[f,h,m,D,I,l,_,c,u,b,d,P,n,p,R,C,F,N,o]}class vc extends nt{constructor(e){super(),ot(this,e,_c,hc,st,{show_defend_modal:0,parent_node:10,data:1})}}function mc(a){let e,r="artifacts",l,t,s,n,o,f="defensive techniques",d,h,m,_,c,u;function E(D){a[6](D)}let b={parent_node:a[0],data:a[1]};a[3]!==void 0&&(b.show_artifacts_modal=a[3]),t=new sc({props:b}),Ze.push(()=>Et(t,"show_artifacts_modal",E));function P(D){a[8](D)}let I={parent_node:a[0],data:a[1]};return a[2]!==void 0&&(I.show_defend_modal=a[2]),h=new vc({props:I}),Ze.push(()=>Et(h,"show_defend_modal",P)),{c(){e=B("button"),e.textContent=r,l=W(),Te(t.$$.fragment),n=W(),o=B("button"),o.textContent=f,d=W(),Te(h.$$.fragment),this.h()},l(D){e=M(D,"BUTTON",{class:!0,"data-svelte-h":!0}),we(e)!=="svelte-1t14z6m"&&(e.textContent=r),l=x(D),Ae(t.$$.fragment,D),n=x(D),o=M(D,"BUTTON",{class:!0,"data-svelte-h":!0}),we(o)!=="svelte-o3we0s"&&(o.textContent=f),d=x(D),Ae(h.$$.fragment,D),this.h()},h(){Z(e,"class","svelte-1x5dcdh"),Z(o,"class","svelte-1x5dcdh")},m(D,S){v(D,e,S),v(D,l,S),Fe(t,D,S),v(D,n,S),v(D,o,S),v(D,d,S),Fe(h,D,S),_=!0,c||(u=[ge(e,"click",a[5]),ge(o,"click",a[7])],c=!0)},p(D,[S]){const p={};S&1&&(p.parent_node=D[0]),S&2&&(p.data=D[1]),!s&&S&8&&(s=!0,p.show_artifacts_modal=D[3],bt(()=>s=!1)),t.$set(p);const R={};S&1&&(R.parent_node=D[0]),S&2&&(R.data=D[1]),!m&&S&4&&(m=!0,R.show_defend_modal=D[2],bt(()=>m=!1)),h.$set(R)},i(D){_||(de(t.$$.fragment,D),de(h.$$.fragment,D),_=!0)},o(D){ve(t.$$.fragment,D),ve(h.$$.fragment,D),_=!1},d(D){D&&(i(e),i(l),i(n),i(o),i(d)),Le(t,D),Le(h,D),c=!1,mt(u)}}}function pc(a,e,r){let l,t;var s=this&&this.__awaiter||function(u,E,b,P){function I(D){return D instanceof b?D:new b(function(S){S(D)})}return new(b||(b=Promise))(function(D,S){function p(F){try{C(P.next(F))}catch(N){S(N)}}function R(F){try{C(P.throw(F))}catch(N){S(N)}}function C(F){F.done?D(F.value):I(F.value).then(p,R)}C((P=P.apply(u,E||[])).next())})};let{node:n}=e,o;function f(u){alert(u),r(3,l=!1),r(2,t=!1)}function d(u){return s(this,void 0,void 0,function*(){if(u.data.d3f_class&&u.data.d3f_class.includes("d3f:")){const E=u.data.d3f_class,b=yield fetch(`/api/offensive-technique/attack/${E.replace("d3f:","")}.json`),P=yield b.json();if(b.status!=200||P.description["@graph"].length==0)f(`Offensive Technique: "${E.replace("d3f:","")}" not found in ontology`);else return P}else f("Please specify a D3FEND Class for this node to enable inferential mapping")})}const h=async()=>{r(1,o=null),r(3,l=!0),r(1,o=await d(n))};function m(u){l=u,r(3,l)}const _=async()=>{r(1,o=null),r(2,t=!0),r(1,o=await d(n))};function c(u){t=u,r(2,t)}return a.$$set=u=>{"node"in u&&r(0,n=u.node)},r(3,l=!1),r(2,t=!1),[n,o,t,l,d,h,m,_,c]}class gc extends nt{constructor(e){super(),ot(this,e,pc,mc,st,{node:0})}}function es(a){let e,r;return e=new gc({props:{node:a[1]}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t&2&&(s.node=l[1]),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){ve(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function ts(a){let e,r;return e=new Yu({props:{node:a[1]}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t&2&&(s.node=l[1]),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){ve(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function rs(a){let e,r;return e=new Du({props:{node:a[1]}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t&2&&(s.node=l[1]),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){ve(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function bc(a){let e,r,l,t,s,n,o,f,d,h,m="duplicate",_,c,u="delete",E,b,P,I,D=a[1]&&a[1].type=="attackSelectorNode"&&es(a),S=a[1]&&a[1].type=="countermeasureSelectorNode"&&ts(a),p=a[1]&&a[1].type=="artifactSelectorNode"&&rs(a);return{c(){e=B("div"),r=B("p"),l=B("small"),t=k("node: "),s=k(a[0]),n=W(),D&&D.c(),o=W(),S&&S.c(),f=W(),p&&p.c(),d=W(),h=B("button"),h.textContent=m,_=W(),c=B("button"),c.textContent=u,this.h()},l(R){e=M(R,"DIV",{style:!0,class:!0});var C=pe(e);r=M(C,"P",{style:!0});var F=pe(r);l=M(F,"SMALL",{});var N=pe(l);t=y(N,"node: "),s=y(N,a[0]),N.forEach(i),F.forEach(i),n=x(C),D&&D.l(C),o=x(C),S&&S.l(C),f=x(C),p&&p.l(C),d=x(C),h=M(C,"BUTTON",{class:!0,"data-svelte-h":!0}),we(h)!=="svelte-1spbqw1"&&(h.textContent=m),_=x(C),c=M(C,"BUTTON",{class:!0,"data-svelte-h":!0}),we(c)!=="svelte-1pyou7z"&&(c.textContent=u),C.forEach(i),this.h()},h(){Xe(r,"margin","0.5em"),Z(h,"class","svelte-1o17oqa"),Z(c,"class","svelte-1o17oqa"),Z(e,"style",E=a[2]()),Z(e,"class","context-menu svelte-1o17oqa")},m(R,C){v(R,e,C),L(e,r),L(r,l),L(l,t),L(l,s),L(e,n),D&&D.m(e,null),L(e,o),S&&S.m(e,null),L(e,f),p&&p.m(e,null),L(e,d),L(e,h),L(e,_),L(e,c),b=!0,P||(I=[ge(h,"click",a[5]),ge(c,"click",a[6])],P=!0)},p(R,[C]){(!b||C&1)&&J(s,R[0]),R[1]&&R[1].type=="attackSelectorNode"?D?(D.p(R,C),C&2&&de(D,1)):(D=es(R),D.c(),de(D,1),D.m(e,o)):D&&(pt(),ve(D,1,1,()=>{D=null}),gt()),R[1]&&R[1].type=="countermeasureSelectorNode"?S?(S.p(R,C),C&2&&de(S,1)):(S=ts(R),S.c(),de(S,1),S.m(e,f)):S&&(pt(),ve(S,1,1,()=>{S=null}),gt()),R[1]&&R[1].type=="artifactSelectorNode"?p?(p.p(R,C),C&2&&de(p,1)):(p=rs(R),p.c(),de(p,1),p.m(e,d)):p&&(pt(),ve(p,1,1,()=>{p=null}),gt()),(!b||C&4&&E!==(E=R[2]()))&&Z(e,"style",E)},i(R){b||(de(D),de(S),de(p),b=!0)},o(R){ve(D),ve(S),ve(p),b=!1},d(R){R&&i(e),D&&D.d(),S&&S.d(),p&&p.d(),P=!1,mt(I)}}}function Ec(a,e,r){let l,t,s,n,{id:o}=e,{top:f}=e,{left:d}=e,{right:h}=e,{bottom:m}=e;const _=qt();et(a,_,b=>r(11,n=b));const c=zt();et(a,c,b=>r(12,s=b));function u(){const b=n.find(P=>P.id===o);if(b){console.log(b);let P=structuredClone(b);P.id=`${o}-copy${Math.random()}`.slice(-24),P.position={x:b.position.x,y:b.position.y+50},rr(_,n=[...n,P],n)}}function E(){rr(_,n=n.filter(b=>b.id!==o),n),rr(c,s=s.filter(b=>b.source!==o&&b.target!==o),s),_.set(n),c.set(s)}return a.$$set=b=>{"id"in b&&r(0,o=b.id),"top"in b&&r(7,f=b.top),"left"in b&&r(8,d=b.left),"right"in b&&r(9,h=b.right),"bottom"in b&&r(10,m=b.bottom)},a.$$.update=()=>{a.$$.dirty&2049&&r(1,l=n.find(b=>b.id===o)),a.$$.dirty&1920&&r(2,t=()=>{let b="";return f&&(b+=`top:${f}px;`),m&&(b+=`bottom:${m}px;`),d&&(b+=`left:${d}px;`),h&&(b+=`right:${h}px;`),b})},[o,l,t,_,c,u,E,f,d,h,m,n]}class Pc extends nt{constructor(e){super(),ot(this,e,Ec,bc,st,{id:0,top:7,left:8,right:9,bottom:10})}}function ls(a,e,r){const l=a.slice();return l[12]=e[r],l}function as(a){let e,r,l,t,s,n,o,f,d,h,m,_,c;const u=a[8].default,E=it(u,a,a[7],null);let b=Oe(a[3]),P=[];for(let I=0;I<b.length;I+=1)P[I]=ss(ls(a,b,I));return{c(){e=B("div"),r=B("div"),l=B("h2"),t=k(a[1]),s=W(),n=B("p"),o=k(a[2]),f=W(),E&&E.c(),d=W(),h=B("div");for(let I=0;I<P.length;I+=1)P[I].c();this.h()},l(I){e=M(I,"DIV",{class:!0});var D=pe(e);r=M(D,"DIV",{class:!0});var S=pe(r);l=M(S,"H2",{});var p=pe(l);t=y(p,a[1]),p.forEach(i),s=x(S),n=M(S,"P",{});var R=pe(n);o=y(R,a[2]),R.forEach(i),f=x(S),E&&E.l(S),d=x(S),h=M(S,"DIV",{class:!0});var C=pe(h);for(let F=0;F<P.length;F+=1)P[F].l(C);C.forEach(i),S.forEach(i),D.forEach(i),this.h()},h(){Z(h,"class","options svelte-zbcx3u"),Z(r,"class","modal-content center text-center svelte-zbcx3u"),Z(e,"class","modal-overlay svelte-zbcx3u")},m(I,D){v(I,e,D),L(e,r),L(r,l),L(l,t),L(r,s),L(r,n),L(n,o),L(r,f),E&&E.m(r,null),L(r,d),L(r,h);for(let S=0;S<P.length;S+=1)P[S]&&P[S].m(h,null);m=!0,_||(c=[ge(r,"click",Ct(a[9])),ge(e,"click",a[4])],_=!0)},p(I,D){if((!m||D&2)&&J(t,I[1]),(!m||D&4)&&J(o,I[2]),E&&E.p&&(!m||D&128)&&ft(E,u,I,I[7],m?ct(u,I[7],D,null):ut(I[7]),null),D&40){b=Oe(I[3]);let S;for(S=0;S<b.length;S+=1){const p=ls(I,b,S);P[S]?P[S].p(p,D):(P[S]=ss(p),P[S].c(),P[S].m(h,null))}for(;S<P.length;S+=1)P[S].d(1);P.length=b.length}},i(I){m||(de(E,I),m=!0)},o(I){ve(E,I),m=!1},d(I){I&&i(e),E&&E.d(I),We(P,I),_=!1,mt(c)}}}function ss(a){let e,r=a[12].label+"",l,t,s,n;function o(){return a[10](a[12])}return{c(){e=B("button"),l=k(r),t=W(),this.h()},l(f){e=M(f,"BUTTON",{class:!0});var d=pe(e);l=y(d,r),t=x(d),d.forEach(i),this.h()},h(){Z(e,"class","svelte-zbcx3u")},m(f,d){v(f,e,d),L(e,l),L(e,t),s||(n=ge(e,"click",o),s=!0)},p(f,d){a=f,d&8&&r!==(r=a[12].label+"")&&J(l,r)},d(f){f&&i(e),s=!1,n()}}}function wc(a){let e,r,l=a[0]&&as(a);return{c(){l&&l.c(),e=Ee()},l(t){l&&l.l(t),e=Ee()},m(t,s){l&&l.m(t,s),v(t,e,s),r=!0},p(t,[s]){t[0]?l?(l.p(t,s),s&1&&de(l,1)):(l=as(t),l.c(),de(l,1),l.m(e.parentNode,e)):l&&(pt(),ve(l,1,1,()=>{l=null}),gt())},i(t){r||(de(l),r=!0)},o(t){ve(l),r=!1},d(t){t&&i(e),l&&l.d(t)}}}function kc(a,e,r){let{$$slots:l={},$$scope:t}=e,{is_open:s=!1}=e,{title:n=""}=e,{content:o=""}=e,{imageSrc:f=""}=e,{options:d=[]}=e;const h=or();function m(){r(0,s=!1)}function _(E){h("optionSelected",E),m()}function c(E){Nt.call(this,a,E)}const u=E=>_(E);return a.$$set=E=>{"is_open"in E&&r(0,s=E.is_open),"title"in E&&r(1,n=E.title),"content"in E&&r(2,o=E.content),"imageSrc"in E&&r(6,f=E.imageSrc),"options"in E&&r(3,d=E.options),"$$scope"in E&&r(7,t=E.$$scope)},[s,n,o,d,m,_,f,t,l,c,u]}class ns extends nt{constructor(e){super(),ot(this,e,kc,wc,st,{is_open:0,title:1,content:2,imageSrc:6,options:3})}}function os(a,e,r){const l=a.slice();return l[11]=e[r],l}function is(a){let e,r,l,t,s,n,o,f,d,h,m,_,c;const u=a[7].default,E=it(u,a,a[6],null);let b=Oe(a[3]),P=[];for(let I=0;I<b.length;I+=1)P[I]=fs(os(a,b,I));return{c(){e=B("div"),r=B("div"),l=B("h2"),t=k(a[1]),s=W(),n=B("p"),o=k(a[2]),f=W(),E&&E.c(),d=W(),h=B("div");for(let I=0;I<P.length;I+=1)P[I].c();this.h()},l(I){e=M(I,"DIV",{class:!0});var D=pe(e);r=M(D,"DIV",{class:!0});var S=pe(r);l=M(S,"H2",{});var p=pe(l);t=y(p,a[1]),p.forEach(i),s=x(S),n=M(S,"P",{});var R=pe(n);o=y(R,a[2]),R.forEach(i),f=x(S),E&&E.l(S),d=x(S),h=M(S,"DIV",{class:!0});var C=pe(h);for(let F=0;F<P.length;F+=1)P[F].l(C);C.forEach(i),S.forEach(i),D.forEach(i),this.h()},h(){Z(h,"class","options svelte-2iwk9m"),Z(r,"class","modal-content center text-center svelte-2iwk9m"),Z(e,"class","modal-overlay svelte-2iwk9m")},m(I,D){v(I,e,D),L(e,r),L(r,l),L(l,t),L(r,s),L(r,n),L(n,o),L(r,f),E&&E.m(r,null),L(r,d),L(r,h);for(let S=0;S<P.length;S+=1)P[S]&&P[S].m(h,null);m=!0,_||(c=[ge(r,"click",Ct(a[8])),ge(e,"click",a[4])],_=!0)},p(I,D){if((!m||D&2)&&J(t,I[1]),(!m||D&4)&&J(o,I[2]),E&&E.p&&(!m||D&64)&&ft(E,u,I,I[6],m?ct(u,I[6],D,null):ut(I[6]),null),D&40){b=Oe(I[3]);let S;for(S=0;S<b.length;S+=1){const p=os(I,b,S);P[S]?P[S].p(p,D):(P[S]=fs(p),P[S].c(),P[S].m(h,null))}for(;S<P.length;S+=1)P[S].d(1);P.length=b.length}},i(I){m||(de(E,I),m=!0)},o(I){ve(E,I),m=!1},d(I){I&&i(e),E&&E.d(I),We(P,I),_=!1,mt(c)}}}function fs(a){let e,r=a[11].label+"",l,t,s,n;function o(){return a[9](a[11])}return{c(){e=B("button"),l=k(r),t=W(),this.h()},l(f){e=M(f,"BUTTON",{class:!0});var d=pe(e);l=y(d,r),t=x(d),d.forEach(i),this.h()},h(){Z(e,"class","svelte-2iwk9m")},m(f,d){v(f,e,d),L(e,l),L(e,t),s||(n=ge(e,"click",o),s=!0)},p(f,d){a=f,d&8&&r!==(r=a[11].label+"")&&J(l,r)},d(f){f&&i(e),s=!1,n()}}}function yc(a){let e,r,l=a[0]&&is(a);return{c(){l&&l.c(),e=Ee()},l(t){l&&l.l(t),e=Ee()},m(t,s){l&&l.m(t,s),v(t,e,s),r=!0},p(t,[s]){t[0]?l?(l.p(t,s),s&1&&de(l,1)):(l=is(t),l.c(),de(l,1),l.m(e.parentNode,e)):l&&(pt(),ve(l,1,1,()=>{l=null}),gt())},i(t){r||(de(l),r=!0)},o(t){ve(l),r=!1},d(t){t&&i(e),l&&l.d(t)}}}function Sc(a,e,r){let{$$slots:l={},$$scope:t}=e,{is_open:s=!1}=e,{title:n=""}=e,{content:o=""}=e,{options:f=[{label:"Cancel",value:"cancel"}]}=e;const d=or();function h(){r(0,s=!1)}function m(u){d("model_shared",u),h()}function _(u){Nt.call(this,a,u)}const c=u=>m(u);return a.$$set=u=>{"is_open"in u&&r(0,s=u.is_open),"title"in u&&r(1,n=u.title),"content"in u&&r(2,o=u.content),"options"in u&&r(3,f=u.options),"$$scope"in u&&r(6,t=u.$$scope)},[s,n,o,f,h,m,t,l,_,c]}class Dc extends nt{constructor(e){super(),ot(this,e,Sc,yc,st,{is_open:0,title:1,content:2,options:3})}}function Cc(a){let e,r="";return{c(){e=B("icon"),e.textContent=r,this.h()},l(l){e=M(l,"ICON",{title:!0,"data-svelte-h":!0}),we(e)!=="svelte-10dwkvf"&&(e.textContent=r),this.h()},h(){Z(e,"title","Full Screen Mode")},m(l,t){v(l,e,t)},d(l){l&&i(e)}}}function Nc(a){let e,r=" Exit Fullscreen";return{c(){e=B("icon"),e.textContent=r,this.h()},l(l){e=M(l,"ICON",{title:!0,"data-svelte-h":!0}),we(e)!=="svelte-2wnxo3"&&(e.textContent=r),this.h()},h(){Z(e,"title","Exit Full Screen Mode")},m(l,t){v(l,e,t)},d(l){l&&i(e)}}}function Rc(a){let e,r,l,t,s,n;function o(_,c){return _[1]?Nc:Cc}let f=o(a),d=f(a);const h=a[4].default,m=it(h,a,a[3],null);return{c(){e=B("div"),r=B("button"),d.c(),l=W(),m&&m.c(),this.h()},l(_){e=M(_,"DIV",{id:!0,class:!0});var c=pe(e);r=M(c,"BUTTON",{class:!0});var u=pe(r);d.l(u),u.forEach(i),l=x(c),m&&m.l(c),c.forEach(i),this.h()},h(){Z(r,"class","fullscreen-toggle svelte-1jzyezl"),dr(r,"left",a[0]==="left"),dr(r,"right",a[0]==="right"),Z(e,"id","fullscreen-parent"),Z(e,"class","svelte-1jzyezl")},m(_,c){v(_,e,c),L(e,r),d.m(r,null),L(e,l),m&&m.m(e,null),t=!0,s||(n=ge(r,"click",a[2]),s=!0)},p(_,[c]){f!==(f=o(_))&&(d.d(1),d=f(_),d&&(d.c(),d.m(r,null))),(!t||c&1)&&dr(r,"left",_[0]==="left"),(!t||c&1)&&dr(r,"right",_[0]==="right"),m&&m.p&&(!t||c&8)&&ft(m,h,_,_[3],t?ct(h,_[3],c,null):ut(_[3]),null)},i(_){t||(de(m,_),t=!0)},o(_){ve(m,_),t=!1},d(_){_&&i(e),d.d(),m&&m.d(_),s=!1,n()}}}function Ic(a,e,r){let{$$slots:l={},$$scope:t}=e,{position:s="right"}=e,n=!1,o;Kr(()=>(o=document.getElementById("fullscreen-parent"),document.addEventListener("fullscreenchange",f),()=>{document.removeEventListener("fullscreenchange",f)}));function f(){r(1,n=!!document.fullscreenElement)}async function d(){if(n)try{await document.exitFullscreen()}catch(h){console.error("Error attempting to exit fullscreen:",h)}else try{await o.requestFullscreen()}catch(h){console.error("Error attempting to enable fullscreen:",h)}}return a.$$set=h=>{"position"in h&&r(0,s=h.position),"$$scope"in h&&r(3,t=h.$$scope)},[s,n,d,t,l]}class Oc extends nt{constructor(e){super(),ot(this,e,Ic,Rc,st,{position:0})}}function Tc(a){let e,r,l,t,s="Action",n,o,f="Event",d,h,m="Attack",_,c,u="Countermeasure",E,b,P,I="Endurant",D,S,p="Artifact",R,C,F="Information",N,T,g="Agent",O,w,A,X="State",ie,re,Q="Vulnerability",H,V,z="Condition",Y,j,K,Ce="Misc",ke,le,me="Note",ce,_e,De="Thing",je,ee;return{c(){e=B("aside"),r=B("div"),l=B("div"),t=B("div"),t.textContent=s,n=W(),o=B("div"),o.textContent=f,d=W(),h=B("div"),h.textContent=m,_=W(),c=B("div"),c.textContent=u,E=W(),b=B("div"),P=B("div"),P.textContent=I,D=W(),S=B("div"),S.textContent=p,R=W(),C=B("div"),C.textContent=F,N=W(),T=B("div"),T.textContent=g,O=W(),w=B("div"),A=B("div"),A.textContent=X,ie=W(),re=B("div"),re.textContent=Q,H=W(),V=B("div"),V.textContent=z,Y=W(),j=B("div"),K=B("div"),K.textContent=Ce,ke=W(),le=B("div"),le.textContent=me,ce=W(),_e=B("div"),_e.textContent=De,this.h()},l(q){e=M(q,"ASIDE",{class:!0});var se=pe(e);r=M(se,"DIV",{class:!0});var Ue=pe(r);l=M(Ue,"DIV",{class:!0});var Ve=pe(l);t=M(Ve,"DIV",{class:!0,"data-svelte-h":!0}),we(t)!=="svelte-1yk6dej"&&(t.textContent=s),n=x(Ve),o=M(Ve,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),we(o)!=="svelte-1hxo6k5"&&(o.textContent=f),d=x(Ve),h=M(Ve,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),we(h)!=="svelte-1m30nhf"&&(h.textContent=m),_=x(Ve),c=M(Ve,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),we(c)!=="svelte-xvztkt"&&(c.textContent=u),Ve.forEach(i),E=x(Ue),b=M(Ue,"DIV",{class:!0});var Qe=pe(b);P=M(Qe,"DIV",{class:!0,"data-svelte-h":!0}),we(P)!=="svelte-13fxc4g"&&(P.textContent=I),D=x(Qe),S=M(Qe,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),we(S)!=="svelte-p6iki9"&&(S.textContent=p),R=x(Qe),C=M(Qe,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),we(C)!=="svelte-gfucir"&&(C.textContent=F),N=x(Qe),T=M(Qe,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),we(T)!=="svelte-1k1k96h"&&(T.textContent=g),Qe.forEach(i),O=x(Ue),w=M(Ue,"DIV",{class:!0});var ze=pe(w);A=M(ze,"DIV",{class:!0,"data-svelte-h":!0}),we(A)!=="svelte-82roym"&&(A.textContent=X),ie=x(ze),re=M(ze,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),we(re)!=="svelte-tj9qj"&&(re.textContent=Q),H=x(ze),V=M(ze,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),we(V)!=="svelte-1mwlumu"&&(V.textContent=z),ze.forEach(i),Y=x(Ue),j=M(Ue,"DIV",{class:!0});var Ke=pe(j);K=M(Ke,"DIV",{class:!0,"data-svelte-h":!0}),we(K)!=="svelte-o90l7d"&&(K.textContent=Ce),ke=x(Ke),le=M(Ke,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),we(le)!=="svelte-18cgcvt"&&(le.textContent=me),ce=x(Ke),_e=M(Ke,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),we(_e)!=="svelte-kl7q0i"&&(_e.textContent=De),Ke.forEach(i),Ue.forEach(i),se.forEach(i),this.h()},h(){Z(t,"class","text-center font-medium"),Z(o,"class","actionNode example-node svelte-1iswza3"),Z(o,"draggable",!0),Xe(o,"text-align","center"),Xe(o,"background","white"),Z(o,"title","d3f:Event"),Z(h,"class","attackSelectorNode example-node svelte-1iswza3"),Z(h,"draggable",!0),Xe(h,"text-align","center"),Xe(h,"background","#FFD0D0"),Z(h,"title","d3f:OffensiveTechnique"),Z(c,"class","countermeasureSelectorNode example-node svelte-1iswza3"),Z(c,"draggable",!0),Xe(c,"text-align","center"),Xe(c,"background","#d6eaff"),Z(c,"title","d3f:DefensiveTechnique"),Z(l,"class","nodes-column svelte-1iswza3"),Z(P,"class","text-center font-medium"),Z(S,"class","artifactSelectorNode art-node example-node svelte-1iswza3"),Z(S,"draggable",!0),Xe(S,"text-align","center"),Xe(S,"background","#fff4dd"),Z(C,"class","informationSelectorNode example-node svelte-1iswza3"),Z(C,"draggable",!0),Xe(C,"text-align","center"),Xe(C,"background","#e8f4ea"),Z(T,"class","agentSelectorNode example-node svelte-1iswza3"),Z(T,"draggable",!0),Xe(T,"text-align","center"),Xe(T,"background","#f0e6e6"),Z(b,"class","nodes-column svelte-1iswza3"),Z(A,"class","text-center font-medium"),Z(re,"class","vulnerabilitySelectorNode example-node svelte-1iswza3"),Z(re,"draggable",!0),Xe(re,"text-align","center"),Xe(re,"background","#f9d999"),Z(V,"class","conditionDefinitionNode example-node svelte-1iswza3"),Z(V,"draggable",!0),Xe(V,"text-align","center"),Xe(V,"background","#ece6ff"),Z(w,"class","nodes-column svelte-1iswza3"),Z(K,"class","text-center font-medium"),Z(le,"class","NoteNode example-node svelte-1iswza3"),Z(le,"draggable",!0),Xe(le,"text-align","center"),Xe(le,"background","lightgoldenrodyellow"),Z(_e,"class","ThingNode example-node svelte-1iswza3"),Z(_e,"draggable",!0),Xe(_e,"text-align","center"),Xe(_e,"background","#f4f4f4"),Z(j,"class","nodes-column svelte-1iswza3"),Z(r,"class","nodes-container svelte-1iswza3"),Z(e,"class","svelte-1iswza3")},m(q,se){v(q,e,se),L(e,r),L(r,l),L(l,t),L(l,n),L(l,o),L(l,d),L(l,h),L(l,_),L(l,c),L(r,E),L(r,b),L(b,P),L(b,D),L(b,S),L(b,R),L(b,C),L(b,N),L(b,T),L(r,O),L(r,w),L(w,A),L(w,ie),L(w,re),L(w,H),L(w,V),L(r,Y),L(r,j),L(j,K),L(j,ke),L(j,le),L(j,ce),L(j,_e),je||(ee=[ge(o,"dragstart",a[1]),ge(h,"dragstart",a[2]),ge(c,"dragstart",a[3]),ge(S,"dragstart",a[4]),ge(C,"dragstart",a[5]),ge(T,"dragstart",a[6]),ge(re,"dragstart",a[7]),ge(V,"dragstart",a[8]),ge(le,"dragstart",a[9]),ge(_e,"dragstart",a[10])],je=!0)},p:Se,i:Se,o:Se,d(q){q&&i(e),je=!1,mt(ee)}}}function Ac(a){const e=(_,c)=>{if(!_.dataTransfer)return null;_.dataTransfer.setData("application/svelteflow",c),_.dataTransfer.effectAllowed="move"};return[e,_=>e(_,"eventNode"),_=>e(_,"attackSelectorNode"),_=>e(_,"countermeasureSelectorNode"),_=>e(_,"artifactSelectorNode"),_=>e(_,"informationSelectorNode"),_=>e(_,"agentSelectorNode"),_=>e(_,"vulnerabilitySelectorNode"),_=>e(_,"conditionDefinitionNode"),_=>e(_,"noteNode"),_=>e(_,"thingNode")]}class Fc extends nt{constructor(e){super(),ot(this,e,Ac,Tc,st,{})}}function us(a,e,r){const l=a.slice();return l[7]=e[r],l}function cs(a){let e,r=Oe(a[2]),l=[];for(let t=0;t<r.length;t+=1)l[t]=ds(us(a,r,t));return{c(){e=B("div");for(let t=0;t<l.length;t+=1)l[t].c();this.h()},l(t){e=M(t,"DIV",{class:!0});var s=pe(e);for(let n=0;n<l.length;n+=1)l[n].l(s);s.forEach(i),this.h()},h(){Z(e,"class","file-list svelte-9u10j")},m(t,s){v(t,e,s);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(e,null)},p(t,s){if(s&20){r=Oe(t[2]);let n;for(n=0;n<r.length;n+=1){const o=us(t,r,n);l[n]?l[n].p(o,s):(l[n]=ds(o),l[n].c(),l[n].m(e,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&i(e),We(l,t)}}}function ds(a){let e,r=a[7].name+"",l,t,s=a[7].nodeCount+"",n,o,f=a[7].edgeCount+"",d,h,m,_;function c(){return a[5](a[7])}return{c(){e=B("div"),l=k(r),t=k(" ("),n=k(s),o=k(" nodes, "),d=k(f),h=k(` edges)
          `),this.h()},l(u){e=M(u,"DIV",{class:!0});var E=pe(e);l=y(E,r),t=y(E," ("),n=y(E,s),o=y(E," nodes, "),d=y(E,f),h=y(E,` edges)
          `),E.forEach(i),this.h()},h(){Z(e,"class","file-item svelte-9u10j")},m(u,E){v(u,e,E),L(e,l),L(e,t),L(e,n),L(e,o),L(e,d),L(e,h),m||(_=ge(e,"click",c),m=!0)},p(u,E){a=u,E&4&&r!==(r=a[7].name+"")&&J(l,r),E&4&&s!==(s=a[7].nodeCount+"")&&J(n,s),E&4&&f!==(f=a[7].edgeCount+"")&&J(d,f)},d(u){u&&i(e),m=!1,_()}}}function Lc(a){let e,r,l,t,s,n,o=a[1]&&cs(a);return{c(){e=B("div"),r=B("button"),l=k(a[0]),t=W(),o&&o.c(),this.h()},l(f){e=M(f,"DIV",{class:!0});var d=pe(e);r=M(d,"BUTTON",{class:!0});var h=pe(r);l=y(h,a[0]),h.forEach(i),t=x(d),o&&o.l(d),d.forEach(i),this.h()},h(){Z(r,"class","svelte-9u10j"),Z(e,"class","pick-list-container svelte-9u10j")},m(f,d){v(f,e,d),L(e,r),L(r,l),L(e,t),o&&o.m(e,null),s||(n=ge(r,"click",a[3]),s=!0)},p(f,[d]){d&1&&J(l,f[0]),f[1]?o?o.p(f,d):(o=cs(f),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i:Se,o:Se,d(f){f&&i(e),o&&o.d(),s=!1,n()}}}async function jc(){return await(await fetch("/cad/examples.json")).json()}function qc(a,e,r){const l=or();let t=!1,{selectedFile:s="Example Graphs"}=e,n=[];function o(){r(1,t=!t)}function f(h){r(0,s=h),r(1,t=!1),l("fileSelected",h)}Kr(async()=>{r(2,n=await jc())});const d=h=>f(h.name);return a.$$set=h=>{"selectedFile"in h&&r(0,s=h.selectedFile)},[s,t,n,o,f,d]}class zc extends nt{constructor(e){super(),ot(this,e,qc,Lc,st,{selectedFile:0})}}function hs(a){let e,r,l,t,s;return{c(){e=vl("path"),r=W(),l=vl("circle"),this.h()},l(n){e=ml(n,"path",{fill:!0,"stroke-width":!0,class:!0,stroke:!0,d:!0}),pe(e).forEach(i),r=x(n),l=ml(n,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),pe(l).forEach(i),this.h()},h(){Z(e,"fill","transparent"),Z(e,"stroke-width",2.5),Z(e,"class","animated"),Z(e,"stroke","black"),Z(e,"d",a[2]),Z(l,"cx",t=a[0].tx),Z(l,"cy",s=a[0].ty),Z(l,"r",3),Z(l,"stroke","black"),Z(l,"stroke-width",1.5)},m(n,o){v(n,e,o),v(n,r,o),v(n,l,o)},p(n,o){o&4&&Z(e,"d",n[2]),o&1&&t!==(t=n[0].tx)&&Z(l,"cx",t),o&1&&s!==(s=n[0].ty)&&Z(l,"cy",s)},d(n){n&&(i(e),i(r),i(l))}}}function Uc(a){let e,r=a[1].inProgress&&hs(a);return{c(){r&&r.c(),e=Ee()},l(l){r&&r.l(l),e=Ee()},m(l,t){r&&r.m(l,t),v(l,e,t)},p(l,[t]){l[1].inProgress?r?r.p(l,t):(r=hs(l),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:Se,o:Se,d(l){l&&i(e),r&&r.d(l)}}}function Vc(a,e,r){let l;const t=gn();et(a,t,o=>r(1,l=o));let s,n;return a.$$.update=()=>{if(a.$$.dirty&3){const o=structuredClone(l.fromNode);l.isValid?(r(0,n=hl(l.fromNode,l.toNode)),r(2,s=Pl({sourceX:n.sx,sourceY:n.sy,sourcePosition:n.sourcePos,targetX:n.tx,targetY:n.ty,targetPosition:n.targetPos})[0])):(o.id="-1",o.measured={width:1,height:1},o.position={x:l.to.x,y:l.to.y},o.internals.positionAbsolute={x:l.to.x,y:l.to.y},r(0,n=hl(l.fromNode,o)),r(2,s=Pl({sourceX:n.sx,sourceY:n.sy,sourcePosition:n.sourcePos,targetX:n.tx,targetY:n.ty,targetPosition:n.targetPos})[0]))}},[n,l,s,t]}class Bc extends nt{constructor(e){super(),ot(this,e,Vc,Uc,st,{})}}function _s(a,e,r){const l=a.slice();return l[11]=e[r],l}function vs(a){let e,r,l,t,s,n,o,f,d,h,m,_,c;const u=a[7].default,E=it(u,a,a[6],null);let b=Oe(a[3]),P=[];for(let I=0;I<b.length;I+=1)P[I]=ms(_s(a,b,I));return{c(){e=B("div"),r=B("div"),l=B("h2"),t=k(a[1]),s=W(),n=B("p"),o=k(a[2]),f=W(),E&&E.c(),d=W(),h=B("div");for(let I=0;I<P.length;I+=1)P[I].c();this.h()},l(I){e=M(I,"DIV",{class:!0});var D=pe(e);r=M(D,"DIV",{class:!0});var S=pe(r);l=M(S,"H2",{});var p=pe(l);t=y(p,a[1]),p.forEach(i),s=x(S),n=M(S,"P",{});var R=pe(n);o=y(R,a[2]),R.forEach(i),f=x(S),E&&E.l(S),d=x(S),h=M(S,"DIV",{class:!0});var C=pe(h);for(let F=0;F<P.length;F+=1)P[F].l(C);C.forEach(i),S.forEach(i),D.forEach(i),this.h()},h(){Z(h,"class","options svelte-zbcx3u"),Z(r,"class","modal-content center text-center svelte-zbcx3u"),Z(e,"class","modal-overlay svelte-zbcx3u")},m(I,D){v(I,e,D),L(e,r),L(r,l),L(l,t),L(r,s),L(r,n),L(n,o),L(r,f),E&&E.m(r,null),L(r,d),L(r,h);for(let S=0;S<P.length;S+=1)P[S]&&P[S].m(h,null);m=!0,_||(c=[ge(r,"click",Ct(a[8])),ge(e,"click",a[4])],_=!0)},p(I,D){if((!m||D&2)&&J(t,I[1]),(!m||D&4)&&J(o,I[2]),E&&E.p&&(!m||D&64)&&ft(E,u,I,I[6],m?ct(u,I[6],D,null):ut(I[6]),null),D&40){b=Oe(I[3]);let S;for(S=0;S<b.length;S+=1){const p=_s(I,b,S);P[S]?P[S].p(p,D):(P[S]=ms(p),P[S].c(),P[S].m(h,null))}for(;S<P.length;S+=1)P[S].d(1);P.length=b.length}},i(I){m||(de(E,I),m=!0)},o(I){ve(E,I),m=!1},d(I){I&&i(e),E&&E.d(I),We(P,I),_=!1,mt(c)}}}function ms(a){let e,r=a[11].label+"",l,t,s,n;function o(){return a[9](a[11])}return{c(){e=B("button"),l=k(r),t=W(),this.h()},l(f){e=M(f,"BUTTON",{class:!0});var d=pe(e);l=y(d,r),t=x(d),d.forEach(i),this.h()},h(){Z(e,"class","svelte-zbcx3u")},m(f,d){v(f,e,d),L(e,l),L(e,t),s||(n=ge(e,"click",o),s=!0)},p(f,d){a=f,d&8&&r!==(r=a[11].label+"")&&J(l,r)},d(f){f&&i(e),s=!1,n()}}}function Mc(a){let e,r,l=a[0]&&vs(a);return{c(){l&&l.c(),e=Ee()},l(t){l&&l.l(t),e=Ee()},m(t,s){l&&l.m(t,s),v(t,e,s),r=!0},p(t,[s]){t[0]?l?(l.p(t,s),s&1&&de(l,1)):(l=vs(t),l.c(),de(l,1),l.m(e.parentNode,e)):l&&(pt(),ve(l,1,1,()=>{l=null}),gt())},i(t){r||(de(l),r=!0)},o(t){ve(l),r=!1},d(t){t&&i(e),l&&l.d(t)}}}function $c(a,e,r){let{$$slots:l={},$$scope:t}=e,{is_open:s=!1}=e,{title:n=""}=e,{content:o=""}=e,{options:f=[{label:"Cancel",value:"cancel"}]}=e;const d=or();function h(){r(0,s=!1)}function m(u){d("close_button_modal",u),h()}function _(u){Nt.call(this,a,u)}const c=u=>m(u);return a.$$set=u=>{"is_open"in u&&r(0,s=u.is_open),"title"in u&&r(1,n=u.title),"content"in u&&r(2,o=u.content),"options"in u&&r(3,f=u.options),"$$scope"in u&&r(6,t=u.$$scope)},[s,n,o,f,h,m,t,l,_,c]}class Hc extends nt{constructor(e){super(),ot(this,e,$c,Mc,st,{is_open:0,title:1,content:2,options:3})}}function ps(a,e,r){const l=a.slice();return l[25]=e[r],l[26]=e,l[27]=r,l}function gs(a,e,r){const l=a.slice();return l[28]=e[r],l[29]=e,l[27]=r,l}function bs(a,e,r){const l=a.slice();return l[30]=e[r],l[31]=e,l[27]=r,l}function Es(a){let e,r,l,t,s,n,o,f,d,h,m,_,c="Save",u,E,b=`.form-row {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
  }

  .form-row label {
    width: 200px;
    text-align: right;
    margin-right: 10px;
  }

  .form-row input,
  .form-row textarea {
    flex-grow: 1;
  }`,P,I,D=a[0]&&Ps(a);return{c(){e=B("div"),r=B("div"),l=B("h2"),t=k(a[2]),s=W(),n=B("p"),o=k(a[3]),f=W(),d=B("form"),D&&D.c(),h=W(),m=B("div"),_=B("button"),_.textContent=c,u=W(),E=B("style"),E.textContent=b,this.h()},l(S){e=M(S,"DIV",{class:!0});var p=pe(e);r=M(p,"DIV",{class:!0});var R=pe(r);l=M(R,"H2",{});var C=pe(l);t=y(C,a[2]),C.forEach(i),s=x(R),n=M(R,"P",{});var F=pe(n);o=y(F,a[3]),F.forEach(i),f=x(R),d=M(R,"FORM",{});var N=pe(d);D&&D.l(N),h=x(N),m=M(N,"DIV",{class:!0});var T=pe(m);_=M(T,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),we(_)!=="svelte-ajsp9k"&&(_.textContent=c),T.forEach(i),N.forEach(i),u=x(R),E=M(R,"STYLE",{"data-svelte-h":!0}),we(E)!=="svelte-bu94yd"&&(E.textContent=b),R.forEach(i),p.forEach(i),this.h()},h(){Z(_,"type","submit"),Z(_,"class","svelte-k723th"),Z(m,"class","options svelte-k723th"),Z(r,"class","modal-content center text-center svelte-k723th"),Z(e,"class","modal-overlay svelte-k723th")},m(S,p){v(S,e,p),L(e,r),L(r,l),L(l,t),L(r,s),L(r,n),L(n,o),L(r,f),L(r,d),D&&D.m(d,null),L(d,h),L(d,m),L(m,_),L(r,u),L(r,E),P||(I=[ge(_,"click",a[5]),ge(r,"click",Ct(a[11])),ge(e,"click",a[4])],P=!0)},p(S,p){p[0]&4&&J(t,S[2]),p[0]&8&&J(o,S[3]),S[0]?D?D.p(S,p):(D=Ps(S),D.c(),D.m(d,h)):D&&(D.d(1),D=null)},d(S){S&&i(e),D&&D.d(),P=!1,mt(I)}}}function Ps(a){let e,r,l="Title:",t,s,n,o,f,d,h="+",m,_,c,u,E="+",b,P,I,D="Description:",S,p,R,C,F,N="Article:",T,g,O,w,A,X="D3FEND Version:",ie,re,Q,H,V="Get Current Version",z,Y,j,K="CAD Schema Version:",Ce,ke,le,me,ce="Set current version",_e,De,je,ee="Published Date:",q,se,Ue,Ve,Qe="Insert Current Time",ze,Ke,Rt='<code class="right">Example Date-Time format: 2023-10-05T14:30:00.000Z</code><br/>',Je,Ge,Ye,Pt,Tt="+",At,Ut,$e=Oe(a[0].authors),te=[];for(let fe=0;fe<$e.length;fe+=1)te[fe]=ws(bs(a,$e,fe));let ne=Oe(a[0].orgs),ue=[];for(let fe=0;fe<ne.length;fe+=1)ue[fe]=ks(gs(a,ne,fe));let be=Oe(a[0].references),ye=[];for(let fe=0;fe<be.length;fe+=1)ye[fe]=ys(ps(a,be,fe));return{c(){e=B("div"),r=B("label"),r.textContent=l,t=W(),s=B("input"),n=W();for(let fe=0;fe<te.length;fe+=1)te[fe].c();o=W(),f=B("div"),d=B("button"),d.textContent=h,m=W();for(let fe=0;fe<ue.length;fe+=1)ue[fe].c();_=W(),c=B("div"),u=B("button"),u.textContent=E,b=W(),P=B("div"),I=B("label"),I.textContent=D,S=W(),p=B("input"),R=W(),C=B("div"),F=B("label"),F.textContent=N,T=W(),g=B("textarea"),O=W(),w=B("div"),A=B("label"),A.textContent=X,ie=W(),re=B("input"),Q=W(),H=B("button"),H.textContent=V,z=W(),Y=B("div"),j=B("label"),j.textContent=K,Ce=W(),ke=B("input"),le=W(),me=B("button"),me.textContent=ce,_e=W(),De=B("div"),je=B("label"),je.textContent=ee,q=W(),se=B("input"),Ue=W(),Ve=B("button"),Ve.textContent=Qe,ze=W(),Ke=B("div"),Ke.innerHTML=Rt,Je=W();for(let fe=0;fe<ye.length;fe+=1)ye[fe].c();Ge=W(),Ye=B("div"),Pt=B("button"),Pt.textContent=Tt,this.h()},l(fe){e=M(fe,"DIV",{class:!0});var Ne=pe(e);r=M(Ne,"LABEL",{for:!0,"data-svelte-h":!0}),we(r)!=="svelte-kpfkpc"&&(r.textContent=l),t=x(Ne),s=M(Ne,"INPUT",{id:!0}),Ne.forEach(i),n=x(fe);for(let Dt=0;Dt<te.length;Dt+=1)te[Dt].l(fe);o=x(fe),f=M(fe,"DIV",{class:!0});var Pe=pe(f);d=M(Pe,"BUTTON",{class:!0,"data-svelte-h":!0}),we(d)!=="svelte-1uaie2g"&&(d.textContent=h),Pe.forEach(i),m=x(fe);for(let Dt=0;Dt<ue.length;Dt+=1)ue[Dt].l(fe);_=x(fe),c=M(fe,"DIV",{class:!0});var wt=pe(c);u=M(wt,"BUTTON",{class:!0,"data-svelte-h":!0}),we(u)!=="svelte-1cs3ez1"&&(u.textContent=E),wt.forEach(i),b=x(fe),P=M(fe,"DIV",{class:!0});var St=pe(P);I=M(St,"LABEL",{for:!0,"data-svelte-h":!0}),we(I)!=="svelte-1jjlhqk"&&(I.textContent=D),S=x(St),p=M(St,"INPUT",{id:!0}),St.forEach(i),R=x(fe),C=M(fe,"DIV",{class:!0});var yt=pe(C);F=M(yt,"LABEL",{for:!0,"data-svelte-h":!0}),we(F)!=="svelte-pvmkb4"&&(F.textContent=N),T=x(yt),g=M(yt,"TEXTAREA",{id:!0}),pe(g).forEach(i),yt.forEach(i),O=x(fe),w=M(fe,"DIV",{class:!0});var It=pe(w);A=M(It,"LABEL",{for:!0,"data-svelte-h":!0}),we(A)!=="svelte-kepuyl"&&(A.textContent=X),ie=x(It),re=M(It,"INPUT",{id:!0}),Q=x(It),H=M(It,"BUTTON",{class:!0,"data-svelte-h":!0}),we(H)!=="svelte-1ba12do"&&(H.textContent=V),It.forEach(i),z=x(fe),Y=M(fe,"DIV",{class:!0});var Qt=pe(Y);j=M(Qt,"LABEL",{for:!0,"data-svelte-h":!0}),we(j)!=="svelte-120m1i5"&&(j.textContent=K),Ce=x(Qt),ke=M(Qt,"INPUT",{id:!0}),le=x(Qt),me=M(Qt,"BUTTON",{class:!0,"data-svelte-h":!0}),we(me)!=="svelte-15xxh2g"&&(me.textContent=ce),Qt.forEach(i),_e=x(fe),De=M(fe,"DIV",{class:!0});var Gt=pe(De);je=M(Gt,"LABEL",{for:!0,"data-svelte-h":!0}),we(je)!=="svelte-1wye32r"&&(je.textContent=ee),q=x(Gt),se=M(Gt,"INPUT",{id:!0}),Ue=x(Gt),Ve=M(Gt,"BUTTON",{class:!0,"data-svelte-h":!0}),we(Ve)!=="svelte-tkzxpc"&&(Ve.textContent=Qe),Gt.forEach(i),ze=x(fe),Ke=M(fe,"DIV",{class:!0,"data-svelte-h":!0}),we(Ke)!=="svelte-108zlq4"&&(Ke.innerHTML=Rt),Je=x(fe);for(let Dt=0;Dt<ye.length;Dt+=1)ye[Dt].l(fe);Ge=x(fe),Ye=M(fe,"DIV",{class:!0});var Vt=pe(Ye);Pt=M(Vt,"BUTTON",{class:!0,"data-svelte-h":!0}),we(Pt)!=="svelte-rcymu8"&&(Pt.textContent=Tt),Vt.forEach(i),this.h()},h(){Z(r,"for","title"),Z(s,"id","title"),Z(e,"class","form-row"),Z(d,"class","svelte-k723th"),Z(f,"class","form-row"),Z(u,"class","svelte-k723th"),Z(c,"class","form-row"),Z(I,"for","description"),Z(p,"id","description"),Z(P,"class","form-row"),Z(F,"for","article"),Z(g,"id","article"),Z(C,"class","form-row"),Z(A,"for","d3fend-version"),Z(re,"id","d3fend-version"),Z(H,"class","svelte-k723th"),Z(w,"class","form-row"),Z(j,"for","cad-data-version"),Z(ke,"id","cad-data-version"),Z(me,"class","svelte-k723th"),Z(Y,"class","form-row"),Z(je,"for","published-date"),Z(se,"id","published-date"),Z(Ve,"class","svelte-k723th"),Z(De,"class","form-row"),Z(Ke,"class","form-row"),Z(Pt,"class","svelte-k723th"),Z(Ye,"class","form-row")},m(fe,Ne){v(fe,e,Ne),L(e,r),L(e,t),L(e,s),at(s,a[0].title),v(fe,n,Ne);for(let Pe=0;Pe<te.length;Pe+=1)te[Pe]&&te[Pe].m(fe,Ne);v(fe,o,Ne),v(fe,f,Ne),L(f,d),v(fe,m,Ne);for(let Pe=0;Pe<ue.length;Pe+=1)ue[Pe]&&ue[Pe].m(fe,Ne);v(fe,_,Ne),v(fe,c,Ne),L(c,u),v(fe,b,Ne),v(fe,P,Ne),L(P,I),L(P,S),L(P,p),at(p,a[0].description),v(fe,R,Ne),v(fe,C,Ne),L(C,F),L(C,T),L(C,g),at(g,a[0].article),v(fe,O,Ne),v(fe,w,Ne),L(w,A),L(w,ie),L(w,re),at(re,a[0].d3fend_version),L(w,Q),L(w,H),v(fe,z,Ne),v(fe,Y,Ne),L(Y,j),L(Y,Ce),L(Y,ke),at(ke,a[0].cad_data_version),L(Y,le),L(Y,me),v(fe,_e,Ne),v(fe,De,Ne),L(De,je),L(De,q),L(De,se),at(se,a[0].published_date),L(De,Ue),L(De,Ve),v(fe,ze,Ne),v(fe,Ke,Ne),v(fe,Je,Ne);for(let Pe=0;Pe<ye.length;Pe+=1)ye[Pe]&&ye[Pe].m(fe,Ne);v(fe,Ge,Ne),v(fe,Ye,Ne),L(Ye,Pt),At||(Ut=[ge(s,"input",a[12]),ge(d,"click",a[6]),ge(u,"click",a[7]),ge(p,"input",a[15]),ge(g,"input",a[16]),ge(re,"input",a[17]),ge(H,"click",a[9]),ge(ke,"input",a[18]),ge(me,"click",a[19]),ge(se,"input",a[20]),ge(Ve,"click",a[21]),ge(Pt,"click",a[8])],At=!0)},p(fe,Ne){if(Ne[0]&1&&s.value!==fe[0].title&&at(s,fe[0].title),Ne[0]&1){$e=Oe(fe[0].authors);let Pe;for(Pe=0;Pe<$e.length;Pe+=1){const wt=bs(fe,$e,Pe);te[Pe]?te[Pe].p(wt,Ne):(te[Pe]=ws(wt),te[Pe].c(),te[Pe].m(o.parentNode,o))}for(;Pe<te.length;Pe+=1)te[Pe].d(1);te.length=$e.length}if(Ne[0]&1){ne=Oe(fe[0].orgs);let Pe;for(Pe=0;Pe<ne.length;Pe+=1){const wt=gs(fe,ne,Pe);ue[Pe]?ue[Pe].p(wt,Ne):(ue[Pe]=ks(wt),ue[Pe].c(),ue[Pe].m(_.parentNode,_))}for(;Pe<ue.length;Pe+=1)ue[Pe].d(1);ue.length=ne.length}if(Ne[0]&1&&p.value!==fe[0].description&&at(p,fe[0].description),Ne[0]&1&&at(g,fe[0].article),Ne[0]&1&&re.value!==fe[0].d3fend_version&&at(re,fe[0].d3fend_version),Ne[0]&1&&ke.value!==fe[0].cad_data_version&&at(ke,fe[0].cad_data_version),Ne[0]&1&&se.value!==fe[0].published_date&&at(se,fe[0].published_date),Ne[0]&1){be=Oe(fe[0].references);let Pe;for(Pe=0;Pe<be.length;Pe+=1){const wt=ps(fe,be,Pe);ye[Pe]?ye[Pe].p(wt,Ne):(ye[Pe]=ys(wt),ye[Pe].c(),ye[Pe].m(Ge.parentNode,Ge))}for(;Pe<ye.length;Pe+=1)ye[Pe].d(1);ye.length=be.length}},d(fe){fe&&(i(e),i(n),i(o),i(f),i(m),i(_),i(c),i(b),i(P),i(R),i(C),i(O),i(w),i(z),i(Y),i(_e),i(De),i(ze),i(Ke),i(Je),i(Ge),i(Ye)),We(te,fe),We(ue,fe),We(ye,fe),At=!1,mt(Ut)}}}function ws(a){let e,r,l="Authors:",t,s,n,o;function f(){a[13].call(s,a[31],a[27])}return{c(){e=B("div"),r=B("label"),r.textContent=l,t=W(),s=B("input"),this.h()},l(d){e=M(d,"DIV",{class:!0});var h=pe(e);r=M(h,"LABEL",{for:!0,"data-svelte-h":!0}),we(r)!=="svelte-1q1t6ag"&&(r.textContent=l),t=x(h),s=M(h,"INPUT",{id:!0}),h.forEach(i),this.h()},h(){Z(r,"for","author-"+a[27]),Z(s,"id","author-"+a[27]),Z(e,"class","form-row")},m(d,h){v(d,e,h),L(e,r),L(e,t),L(e,s),at(s,a[30]),n||(o=ge(s,"input",f),n=!0)},p(d,h){a=d,h[0]&1&&s.value!==a[30]&&at(s,a[30])},d(d){d&&i(e),n=!1,o()}}}function ks(a){let e,r,l="Organization:",t,s,n,o;function f(){a[14].call(s,a[29],a[27])}return{c(){e=B("div"),r=B("label"),r.textContent=l,t=W(),s=B("input"),this.h()},l(d){e=M(d,"DIV",{class:!0});var h=pe(e);r=M(h,"LABEL",{for:!0,"data-svelte-h":!0}),we(r)!=="svelte-1b09fki"&&(r.textContent=l),t=x(h),s=M(h,"INPUT",{id:!0}),h.forEach(i),this.h()},h(){Z(r,"for","org-"+a[27]),Z(s,"id","org-"+a[27]),Z(e,"class","form-row")},m(d,h){v(d,e,h),L(e,r),L(e,t),L(e,s),at(s,a[28]),n||(o=ge(s,"input",f),n=!0)},p(d,h){a=d,h[0]&1&&s.value!==a[28]&&at(s,a[28])},d(d){d&&i(e),n=!1,o()}}}function ys(a){let e,r,l="Reference:",t,s,n,o;function f(){a[22].call(s,a[26],a[27])}return{c(){e=B("div"),r=B("label"),r.textContent=l,t=W(),s=B("input"),this.h()},l(d){e=M(d,"DIV",{class:!0});var h=pe(e);r=M(h,"LABEL",{for:!0,"data-svelte-h":!0}),we(r)!=="svelte-14qxm2v"&&(r.textContent=l),t=x(h),s=M(h,"INPUT",{id:!0}),h.forEach(i),this.h()},h(){Z(r,"for","ref-"+a[27]),Z(s,"id","ref-"+a[27]),Z(e,"class","form-row")},m(d,h){v(d,e,h),L(e,r),L(e,t),L(e,s),at(s,a[25]),n||(o=ge(s,"input",f),n=!0)},p(d,h){a=d,h[0]&1&&s.value!==a[25]&&at(s,a[25])},d(d){d&&i(e),n=!1,o()}}}function Qc(a){let e,r=a[1]&&Es(a);return{c(){r&&r.c(),e=Ee()},l(l){r&&r.l(l),e=Ee()},m(l,t){r&&r.m(l,t),v(l,e,t)},p(l,t){l[1]?r?r.p(l,t):(r=Es(l),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:Se,o:Se,d(l){l&&i(e),r&&r.d(l)}}}function Gc(a,e,r){let{meta:l}=e,{is_open:t=!1}=e,{title:s="CAD Graph Metadata Editor"}=e,{content:n=""}=e,{options:o=[{label:"Save",value:"save"}]}=e;or();function f(){r(1,t=!1)}function d(){document.querySelector("form").checkValidity()&&r(1,t=!1)}(l??!1)&&(l=Fs);function h(){l.authors.push(""),r(0,l)}function m(){l.orgs.push(""),r(0,l)}function _(){l.references.push(""),r(0,l)}async function c(){const g=await(await fetch("/api/version.json")).json();r(0,l.d3fend_version=g.version,l)}function u(T){Nt.call(this,a,T)}function E(){l.title=this.value,r(0,l)}function b(T,g){T[g]=this.value,r(0,l)}function P(T,g){T[g]=this.value,r(0,l)}function I(){l.description=this.value,r(0,l)}function D(){l.article=this.value,r(0,l)}function S(){l.d3fend_version=this.value,r(0,l)}function p(){l.cad_data_version=this.value,r(0,l)}const R=()=>r(0,l.cad_data_version=Ln,l);function C(){l.published_date=this.value,r(0,l)}const F=()=>{const g=new Date().toISOString();r(0,l.published_date=g,l)};function N(T,g){T[g]=this.value,r(0,l)}return a.$$set=T=>{"meta"in T&&r(0,l=T.meta),"is_open"in T&&r(1,t=T.is_open),"title"in T&&r(2,s=T.title),"content"in T&&r(3,n=T.content),"options"in T&&r(10,o=T.options)},[l,t,s,n,f,d,h,m,_,c,o,u,E,b,P,I,D,S,p,R,C,F,N]}class Kc extends nt{constructor(e){super(),ot(this,e,Gc,Qc,st,{meta:0,is_open:1,title:2,content:3,options:10},null,[-1,-1])}}function Ss(a,e,r){const l=a.slice();return l[66]=e[r],l[68]=r,l}function Jc(a){let e,r='This is an (very) alpha-level preview release. Please review and file bugs <a href="https://github.com/d3fend/d3fend/issues/14">here. </a>Early stage <a href="./docs">docs.</a>';return{c(){e=B("div"),e.innerHTML=r,this.h()},l(l){e=M(l,"DIV",{class:!0,"data-svelte-h":!0}),we(e)!=="svelte-x19ykg"&&(e.innerHTML=r),this.h()},h(){Z(e,"class","font-small")},m(l,t){v(l,e,t)},p:Se,d(l){l&&i(e)}}}function Ds(a){let e=a[66].message+"",r,l;return{c(){r=k(e),l=B("br")},l(t){r=y(t,e),l=M(t,"BR",{})},m(t,s){v(t,r,s),v(t,l,s)},p(t,s){s[0]&8&&e!==(e=t[66].message+"")&&J(r,e)},d(t){t&&(i(r),i(l))}}}function Yc(a){let e,r="<code>The tool fixed the errors needed to run but here is list of all import errors and warnings.</code>",l,t,s,n,o,f,d,h,m,_=Oe(a[3]),c=[];for(let u=0;u<_.length;u+=1)c[u]=Ds(Ss(a,_,u));return{c(){e=B("div"),e.innerHTML=r,l=W(),t=B("br"),s=W(),n=B("br"),o=W();for(let u=0;u<c.length;u+=1)c[u].c();f=W(),d=B("br"),h=W(),m=B("br")},l(u){e=M(u,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-7el432"&&(e.innerHTML=r),l=x(u),t=M(u,"BR",{}),s=x(u),n=M(u,"BR",{}),o=x(u);for(let E=0;E<c.length;E+=1)c[E].l(u);f=x(u),d=M(u,"BR",{}),h=x(u),m=M(u,"BR",{})},m(u,E){v(u,e,E),v(u,l,E),v(u,t,E),v(u,s,E),v(u,n,E),v(u,o,E);for(let b=0;b<c.length;b+=1)c[b]&&c[b].m(u,E);v(u,f,E),v(u,d,E),v(u,h,E),v(u,m,E)},p(u,E){if(E[0]&8){_=Oe(u[3]);let b;for(b=0;b<_.length;b+=1){const P=Ss(u,_,b);c[b]?c[b].p(P,E):(c[b]=Ds(P),c[b].c(),c[b].m(f.parentNode,f))}for(;b<c.length;b+=1)c[b].d(1);c.length=_.length}},d(u){u&&(i(e),i(l),i(t),i(s),i(n),i(o),i(f),i(d),i(h),i(m)),We(c,u)}}}function Xc(a){let e;return{c(){e=k("Please only load models from URLs you trust!")},l(r){e=y(r,"Please only load models from URLs you trust!")},m(r,l){v(r,e,l)},d(r){r&&i(e)}}}function Zc(a){let e,r,l,t,s,n,o,f,d,h,m;return h=new Dr({props:{$$slots:{default:[Xc]},$$scope:{ctx:a}}}),{c(){e=B("br"),r=W(),l=B("code"),t=k(a[2]),s=W(),n=B("br"),o=W(),f=B("br"),d=W(),Te(h.$$.fragment),this.h()},l(_){e=M(_,"BR",{}),r=x(_),l=M(_,"CODE",{class:!0});var c=pe(l);t=y(c,a[2]),c.forEach(i),s=x(_),n=M(_,"BR",{}),o=x(_),f=M(_,"BR",{}),d=x(_),Ae(h.$$.fragment,_),this.h()},h(){Z(l,"class","center text-center")},m(_,c){v(_,e,c),v(_,r,c),v(_,l,c),L(l,t),v(_,s,c),v(_,n,c),v(_,o,c),v(_,f,c),v(_,d,c),Fe(h,_,c),m=!0},p(_,c){(!m||c[0]&4)&&J(t,_[2]);const u={};c[2]&128&&(u.$$scope={dirty:c,ctx:_}),h.$set(u)},i(_){m||(de(h.$$.fragment,_),m=!0)},o(_){ve(h.$$.fragment,_),m=!1},d(_){_&&(i(e),i(r),i(l),i(s),i(n),i(o),i(f),i(d)),Le(h,_)}}}function Wc(a){let e;return{c(){e=k("Please only load models from URLs you trust!")},l(r){e=y(r,"Please only load models from URLs you trust!")},m(r,l){v(r,e,l)},d(r){r&&i(e)}}}function xc(a){let e,r,l,t,s,n;return s=new Dr({props:{$$slots:{default:[Wc]},$$scope:{ctx:a}}}),{c(){e=B("br"),r=W(),l=B("br"),t=W(),Te(s.$$.fragment)},l(o){e=M(o,"BR",{}),r=x(o),l=M(o,"BR",{}),t=x(o),Ae(s.$$.fragment,o)},m(o,f){v(o,e,f),v(o,r,f),v(o,l,f),v(o,t,f),Fe(s,o,f),n=!0},p(o,f){const d={};f[2]&128&&(d.$$scope={dirty:f,ctx:o}),s.$set(d)},i(o){n||(de(s.$$.fragment,o),n=!0)},o(o){ve(s.$$.fragment,o),n=!1},d(o){o&&(i(e),i(r),i(l),i(t)),Le(s,o)}}}function Cs(a){let e,r,l,t;return e=new Dr({props:{alert_type:"warning",$$slots:{default:[ed]},$$scope:{ctx:a}}}),{c(){Te(e.$$.fragment),r=W(),l=B("br")},l(s){Ae(e.$$.fragment,s),r=x(s),l=M(s,"BR",{})},m(s,n){Fe(e,s,n),v(s,r,n),v(s,l,n),t=!0},i(s){t||(de(e.$$.fragment,s),t=!0)},o(s){ve(e.$$.fragment,s),t=!1},d(s){s&&(i(r),i(l)),Le(e,s)}}}function ed(a){let e;return{c(){e=k("Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},l(r){e=y(r,"Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},m(r,l){v(r,e,l)},d(r){r&&i(e)}}}function td(a){let e,r,l,t,s=a[14].length+"",n,o,f,d,h,m,_,c,u,E,b="copy",P,I,D,S=a[14].length>2048&&Cs(a);return{c(){S&&S.c(),e=W(),r=B("div"),l=B("code"),t=k("The encoded model has a string length of "),n=k(s),o=k(" characters."),f=W(),d=B("p"),h=B("button"),m=B("a"),_=k("Share URL"),c=W(),u=B("span"),E=B("button"),E.textContent=b,this.h()},l(p){S&&S.l(p),e=x(p),r=M(p,"DIV",{});var R=pe(r);l=M(R,"CODE",{});var C=pe(l);t=y(C,"The encoded model has a string length of "),n=y(C,s),o=y(C," characters."),C.forEach(i),R.forEach(i),f=x(p),d=M(p,"P",{});var F=pe(d);h=M(F,"BUTTON",{class:!0});var N=pe(h);m=M(N,"A",{href:!0});var T=pe(m);_=y(T,"Share URL"),T.forEach(i),N.forEach(i),c=x(F),u=M(F,"SPAN",{});var g=pe(u);E=M(g,"BUTTON",{class:!0,"data-svelte-h":!0}),we(E)!=="svelte-1uua65l"&&(E.textContent=b),g.forEach(i),F.forEach(i),this.h()},h(){Z(m,"href",a[15]),Z(h,"class","svelte-q9zbzo"),Z(E,"class","svelte-q9zbzo")},m(p,R){S&&S.m(p,R),v(p,e,R),v(p,r,R),L(r,l),L(l,t),L(l,n),L(l,o),v(p,f,R),v(p,d,R),L(d,h),L(h,m),L(m,_),L(d,c),L(d,u),L(u,E),P=!0,I||(D=ge(E,"click",a[41]),I=!0)},p(p,R){p[14].length>2048?S?R[0]&16384&&de(S,1):(S=Cs(p),S.c(),de(S,1),S.m(e.parentNode,e)):S&&(pt(),ve(S,1,1,()=>{S=null}),gt()),(!P||R[0]&16384)&&s!==(s=p[14].length+"")&&J(n,s),(!P||R[0]&32768)&&Z(m,"href",p[15])},i(p){P||(de(S),P=!0)},o(p){ve(S),P=!1},d(p){p&&(i(e),i(r),i(f),i(d)),S&&S.d(p),I=!1,D()}}}function Ns(a){let e,r,l,t,s,n=a[4]>1&&Rs();return{c(){e=B("button"),r=k(a[4]),l=k(" import alert"),n&&n.c(),this.h()},l(o){e=M(o,"BUTTON",{class:!0});var f=pe(e);r=y(f,a[4]),l=y(f," import alert"),n&&n.l(f),f.forEach(i),this.h()},h(){Z(e,"class","svelte-q9zbzo")},m(o,f){v(o,e,f),L(e,r),L(e,l),n&&n.m(e,null),t||(s=ge(e,"click",a[24]),t=!0)},p(o,f){f[0]&16&&J(r,o[4]),o[4]>1?n||(n=Rs(),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},d(o){o&&i(e),n&&n.d(),t=!1,s()}}}function Rs(a){let e;return{c(){e=k("s")},l(r){e=y(r,"s")},m(r,l){v(r,e,l)},d(r){r&&i(e)}}}function Is(a){let e,r,l,t,s,n,o;return l=new ao({props:{display:"inline"}}),{c(){e=B("span"),r=B("span"),Te(l.$$.fragment),t=W(),s=B("span"),n=k(a[18]),this.h()},l(f){e=M(f,"SPAN",{class:!0});var d=pe(e);r=M(d,"SPAN",{});var h=pe(r);Ae(l.$$.fragment,h),h.forEach(i),t=x(d),s=M(d,"SPAN",{});var m=pe(s);n=y(m,a[18]),m.forEach(i),d.forEach(i),this.h()},h(){Z(e,"class","right")},m(f,d){v(f,e,d),L(e,r),Fe(l,r,null),L(e,t),L(e,s),L(s,n),o=!0},p(f,d){(!o||d[0]&262144)&&J(n,f[18])},i(f){o||(de(l.$$.fragment,f),o=!0)},o(f){ve(l.$$.fragment,f),o=!1},d(f){f&&i(e),Le(l)}}}function Os(a){let e,r;return e=new Pc({props:{onClick:a[33],id:a[8].id,top:a[8].top,left:a[8].left,right:a[8].right,bottom:a[8].bottom}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t[0]&256&&(s.id=l[8].id),t[0]&256&&(s.top=l[8].top),t[0]&256&&(s.left=l[8].left),t[0]&256&&(s.right=l[8].right),t[0]&256&&(s.bottom=l[8].bottom),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){ve(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function rd(a){let e,r,l,t,s,n,o;e=new so({props:{position:"top-left"}}),l=new Xn({props:{variant:Zn.Dots}});let f=a[8]&&Os(a);return n=new Wn({props:{position:"top-right"}}),{c(){Te(e.$$.fragment),r=W(),Te(l.$$.fragment),t=W(),f&&f.c(),s=W(),Te(n.$$.fragment)},l(d){Ae(e.$$.fragment,d),r=x(d),Ae(l.$$.fragment,d),t=x(d),f&&f.l(d),s=x(d),Ae(n.$$.fragment,d)},m(d,h){Fe(e,d,h),v(d,r,h),Fe(l,d,h),v(d,t,h),f&&f.m(d,h),v(d,s,h),Fe(n,d,h),o=!0},p(d,h){d[8]?f?(f.p(d,h),h[0]&256&&de(f,1)):(f=Os(d),f.c(),de(f,1),f.m(s.parentNode,s)):f&&(pt(),ve(f,1,1,()=>{f=null}),gt())},i(d){o||(de(e.$$.fragment,d),de(l.$$.fragment,d),de(f),de(n.$$.fragment,d),o=!0)},o(d){ve(e.$$.fragment,d),ve(l.$$.fragment,d),ve(f),ve(n.$$.fragment,d),o=!1},d(d){d&&(i(r),i(t),i(s)),Le(e,d),Le(l,d),f&&f.d(d),Le(n,d)}}}function ld(a){let e,r;return e=new Bc({props:{slot:"connectionLine"}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p:Se,i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){ve(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function ad(a){let e,r,l,t,s,n;return r=new Fc({}),t=new Yn({props:{nodes:mr,nodeTypes:En,edges:zr,edgeTypes:Pn,fitView:!0,defaultEdgeOptions:a[21],maxZoom:2,minZoom:.3,$$slots:{connectionLine:[ld],default:[rd]},$$scope:{ctx:a}}}),t.$on("dragover",a[27]),t.$on("drop",a[29]),t.$on("connect",a[28]),t.$on("nodecontextmenu",a[32]),t.$on("paneclick",a[33]),t.$on("onedgecreate",id),{c(){e=B("div"),Te(r.$$.fragment),l=W(),Te(t.$$.fragment),this.h()},l(o){e=M(o,"DIV",{slot:!0,id:!0,class:!0});var f=pe(e);Ae(r.$$.fragment,f),l=x(f),Ae(t.$$.fragment,f),f.forEach(i),this.h()},h(){Z(e,"slot","flow"),Z(e,"id","slotted-flow"),Z(e,"class","svelte-q9zbzo"),Ts(()=>a[47].call(e))},m(o,f){v(o,e,f),Fe(r,e,null),L(e,l),Fe(t,e,null),s=Tn(e,a[47].bind(e)),n=!0},p(o,f){const d={};f[0]&256|f[2]&128&&(d.$$scope={dirty:f,ctx:o}),t.$set(d)},i(o){n||(de(r.$$.fragment,o),de(t.$$.fragment,o),n=!0)},o(o){ve(r.$$.fragment,o),ve(t.$$.fragment,o),n=!1},d(o){o&&i(e),Le(r),Le(t),s()}}}function sd(a){let e,r,l;return r=new wn({}),{c(){e=B("div"),Te(r.$$.fragment),this.h()},l(t){e=M(t,"DIV",{slot:!0,class:!0});var s=pe(e);Ae(r.$$.fragment,s),s.forEach(i),this.h()},h(){Z(e,"slot","drawer"),Z(e,"class","side-panel close svelte-q9zbzo")},m(t,s){v(t,e,s),Fe(r,e,null),l=!0},p:Se,i(t){l||(de(r.$$.fragment,t),l=!0)},o(t){ve(r.$$.fragment,t),l=!1},d(t){t&&i(e),Le(r)}}}function nd(a){let e,r,l,t,s,n,o,f,d,h,m,_,c,u,E,b,P,I="Load",D,S,p="Merge",R,C,F="Clear",N,T,g="Save",O,w,A,X="Save As...",ie,re="Save As JSON...",Q,H="Save As Turtle...",V,z="Save As D3FEND Extension...",Y,j,K="Share",Ce,ke,le,me,ce,_e,De,je,ee,q,se="Graph Metadata",Ue,Ve,Qe,ze,Ke;function Rt(ne){a[39](ne)}let Je={title:a[0].title,content:a[0].content,options:a[0].options,$$slots:{default:[Zc]},$$scope:{ctx:a}};a[0].is_open!==void 0&&(Je.is_open=a[0].is_open),e=new ns({props:Je}),Ze.push(()=>Et(e,"is_open",Rt)),e.$on("optionSelected",a[19]);function Ge(ne){a[40](ne)}let Ye={title:a[1].title,content:a[1].content,options:a[1].options,$$slots:{default:[xc]},$$scope:{ctx:a}};a[1].is_open!==void 0&&(Ye.is_open=a[1].is_open),t=new ns({props:Ye}),Ze.push(()=>Et(t,"is_open",Ge)),t.$on("optionSelected",a[20]);function Pt(ne){a[42](ne)}let Tt={title:"Share this model with a URL",$$slots:{default:[td]},$$scope:{ctx:a}};a[13]!==void 0&&(Tt.is_open=a[13]),o=new Dc({props:Tt}),Ze.push(()=>Et(o,"is_open",Pt));function At(ne){a[43](ne)}let Ut={};a[7]!==void 0&&(Ut.selectedFile=a[7]),m=new zc({props:Ut}),Ze.push(()=>Et(m,"selectedFile",At)),m.$on("fileSelected",a[30]);let $e=a[4]&&Ns(a),te=a[18]&&Is(a);return Ve=new bn({props:{$$slots:{drawer:[sd],flow:[ad]},$$scope:{ctx:a}}}),{c(){Te(e.$$.fragment),l=W(),Te(t.$$.fragment),n=W(),Te(o.$$.fragment),d=W(),h=B("div"),Te(m.$$.fragment),c=W(),u=B("br"),E=W(),b=B("div"),P=B("button"),P.textContent=I,D=W(),S=B("button"),S.textContent=p,R=W(),C=B("button"),C.textContent=F,N=W(),T=B("button"),T.textContent=g,O=W(),w=B("select"),A=B("option"),A.textContent=X,ie=B("option"),ie.textContent=re,Q=B("option"),Q.textContent=H,V=B("option"),V.textContent=z,Y=W(),j=B("button"),j.textContent=K,Ce=W(),ke=B("button"),le=k("CAD Embed"),ce=k(`
     filename:   `),_e=B("input"),De=W(),$e&&$e.c(),je=W(),te&&te.c(),ee=W(),q=B("button"),q.textContent=se,Ue=W(),Te(Ve.$$.fragment),this.h()},l(ne){Ae(e.$$.fragment,ne),l=x(ne),Ae(t.$$.fragment,ne),n=x(ne),Ae(o.$$.fragment,ne),d=x(ne),h=M(ne,"DIV",{class:!0});var ue=pe(h);Ae(m.$$.fragment,ue),ue.forEach(i),c=x(ne),u=M(ne,"BR",{}),E=x(ne),b=M(ne,"DIV",{id:!0,class:!0});var be=pe(b);P=M(be,"BUTTON",{class:!0,"data-svelte-h":!0}),we(P)!=="svelte-r4end6"&&(P.textContent=I),D=x(be),S=M(be,"BUTTON",{class:!0,"data-svelte-h":!0}),we(S)!=="svelte-1s1l97g"&&(S.textContent=p),R=x(be),C=M(be,"BUTTON",{class:!0,"data-svelte-h":!0}),we(C)!=="svelte-1o4uly3"&&(C.textContent=F),N=x(be),T=M(be,"BUTTON",{class:!0,"data-svelte-h":!0}),we(T)!=="svelte-qm8vdx"&&(T.textContent=g),O=x(be),w=M(be,"SELECT",{class:!0});var ye=pe(w);A=M(ye,"OPTION",{"data-svelte-h":!0}),we(A)!=="svelte-hmrlsb"&&(A.textContent=X),ie=M(ye,"OPTION",{"data-svelte-h":!0}),we(ie)!=="svelte-1q30tr1"&&(ie.textContent=re),Q=M(ye,"OPTION",{"data-svelte-h":!0}),we(Q)!=="svelte-pf55hp"&&(Q.textContent=H),V=M(ye,"OPTION",{"data-svelte-h":!0}),we(V)!=="svelte-43fn33"&&(V.textContent=z),ye.forEach(i),Y=x(be),j=M(be,"BUTTON",{class:!0,"data-svelte-h":!0}),we(j)!=="svelte-mqt2ui"&&(j.textContent=K),Ce=x(be),ke=M(be,"BUTTON",{class:!0});var fe=pe(ke);le=y(fe,"CAD Embed"),fe.forEach(i),ce=y(be,`
     filename:   `),_e=M(be,"INPUT",{style:!0,type:!0}),De=x(be),$e&&$e.l(be),je=x(be),te&&te.l(be),ee=x(be),q=M(be,"BUTTON",{class:!0,"data-svelte-h":!0}),we(q)!=="svelte-d0yv6c"&&(q.textContent=se),be.forEach(i),Ue=x(ne),Ae(Ve.$$.fragment,ne),this.h()},h(){Z(h,"class","toolbar-examples"),Z(P,"class","svelte-q9zbzo"),Z(S,"class","svelte-q9zbzo"),Z(C,"class","svelte-q9zbzo"),Z(T,"class","svelte-q9zbzo"),A.__value="",at(A,A.__value),ie.__value="json",at(ie,ie.__value),Q.__value="turtle",at(Q,Q.__value),V.__value="extension",at(V,V.__value),Z(w,"class","save-as-dropdown svelte-q9zbzo"),a[6]===void 0&&Ts(()=>a[44].call(w)),Z(j,"class"," svelte-q9zbzo"),Z(ke,"class"," svelte-q9zbzo"),ke.disabled=me=!a[16].length,Xe(_e,"width","275px"),Z(_e,"type","text"),Z(q,"class","right svelte-q9zbzo"),Z(b,"id","toolbar"),Z(b,"class","svelte-q9zbzo")},m(ne,ue){Fe(e,ne,ue),v(ne,l,ue),Fe(t,ne,ue),v(ne,n,ue),Fe(o,ne,ue),v(ne,d,ue),v(ne,h,ue),Fe(m,h,null),v(ne,c,ue),v(ne,u,ue),v(ne,E,ue),v(ne,b,ue),L(b,P),L(b,D),L(b,S),L(b,R),L(b,C),L(b,N),L(b,T),L(b,O),L(b,w),L(w,A),L(w,ie),L(w,Q),L(w,V),pl(w,a[6],!0),L(b,Y),L(b,j),L(b,Ce),L(b,ke),L(ke,le),L(b,ce),L(b,_e),at(_e,a[5]),L(b,De),$e&&$e.m(b,null),L(b,je),te&&te.m(b,null),L(b,ee),L(b,q),v(ne,Ue,ue),Fe(Ve,ne,ue),Qe=!0,ze||(Ke=[ge(P,"click",a[25]),ge(S,"click",a[26]),ge(C,"click",a[31]),ge(T,"click",a[22]),ge(w,"change",a[44]),ge(w,"change",a[23]),ge(j,"click",a[34]),ge(ke,"click",a[35]),ge(_e,"input",a[45]),ge(q,"click",a[46])],ze=!0)},p(ne,ue){const be={};ue[0]&1&&(be.title=ne[0].title),ue[0]&1&&(be.content=ne[0].content),ue[0]&1&&(be.options=ne[0].options),ue[0]&4|ue[2]&128&&(be.$$scope={dirty:ue,ctx:ne}),!r&&ue[0]&1&&(r=!0,be.is_open=ne[0].is_open,bt(()=>r=!1)),e.$set(be);const ye={};ue[0]&2&&(ye.title=ne[1].title),ue[0]&2&&(ye.content=ne[1].content),ue[0]&2&&(ye.options=ne[1].options),ue[2]&128&&(ye.$$scope={dirty:ue,ctx:ne}),!s&&ue[0]&2&&(s=!0,ye.is_open=ne[1].is_open,bt(()=>s=!1)),t.$set(ye);const fe={};ue[0]&49152|ue[2]&128&&(fe.$$scope={dirty:ue,ctx:ne}),!f&&ue[0]&8192&&(f=!0,fe.is_open=ne[13],bt(()=>f=!1)),o.$set(fe);const Ne={};!_&&ue[0]&128&&(_=!0,Ne.selectedFile=ne[7],bt(()=>_=!1)),m.$set(Ne),ue[0]&64&&pl(w,ne[6]),(!Qe||ue[0]&65536&&me!==(me=!ne[16].length))&&(ke.disabled=me),ue[0]&32&&_e.value!==ne[5]&&at(_e,ne[5]),ne[4]?$e?$e.p(ne,ue):($e=Ns(ne),$e.c(),$e.m(b,je)):$e&&($e.d(1),$e=null),ne[18]?te?(te.p(ne,ue),ue[0]&262144&&de(te,1)):(te=Is(ne),te.c(),de(te,1),te.m(b,ee)):te&&(pt(),ve(te,1,1,()=>{te=null}),gt());const Pe={};ue[0]&1792|ue[2]&128&&(Pe.$$scope={dirty:ue,ctx:ne}),Ve.$set(Pe)},i(ne){Qe||(de(e.$$.fragment,ne),de(t.$$.fragment,ne),de(o.$$.fragment,ne),de(m.$$.fragment,ne),de(te),de(Ve.$$.fragment,ne),Qe=!0)},o(ne){ve(e.$$.fragment,ne),ve(t.$$.fragment,ne),ve(o.$$.fragment,ne),ve(m.$$.fragment,ne),ve(te),ve(Ve.$$.fragment,ne),Qe=!1},d(ne){ne&&(i(l),i(n),i(d),i(h),i(c),i(u),i(E),i(b),i(Ue)),Le(e,ne),Le(t,ne),Le(o,ne),Le(m),$e&&$e.d(),te&&te.d(),Le(Ve,ne),ze=!1,mt(Ke)}}}function od(a){let e,r,l,t,s,n,o='D3FEND <span class="snakes"></span> <span class="CAD"><span style="color:#e62929;">C</span><span class="A svelte-q9zbzo" style="color:white;text-border:1px;">A</span><span style="color:blue;">D</span></span>',f,d,h,m,_,c,u,E,b,P,I,D;e=new lo({props:{title:"D3FEND CAD Tool",og_title:"D3FEND CAD Tool",og_description:"Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios",og_type:"app",og_url:"",og_image:""}}),d=new Dr({props:{alert_type:"info",$$slots:{default:[Jc]},$$scope:{ctx:a}}});function S(N){a[36](N)}let p={title:a[4]+" import alerts",$$slots:{default:[Yc]},$$scope:{ctx:a}};a[12]!==void 0&&(p.is_open=a[12]),m=new Hc({props:p}),Ze.push(()=>Et(m,"is_open",S));function R(N){a[37](N)}function C(N){a[38](N)}let F={};return a[11]!==void 0&&(F.is_open=a[11]),a[17]!==void 0&&(F.meta=a[17]),u=new Kc({props:F}),Ze.push(()=>Et(u,"is_open",R)),Ze.push(()=>Et(u,"meta",C)),I=new Oc({props:{position:"right",$$slots:{default:[nd]},$$scope:{ctx:a}}}),{c(){Te(e.$$.fragment),r=W(),l=B("div"),t=B("div"),s=B("div"),n=B("h1"),n.innerHTML=o,f=W(),Te(d.$$.fragment),h=W(),Te(m.$$.fragment),c=W(),Te(u.$$.fragment),P=W(),Te(I.$$.fragment),this.h()},l(N){Ae(e.$$.fragment,N),r=x(N),l=M(N,"DIV",{class:!0});var T=pe(l);t=M(T,"DIV",{style:!0});var g=pe(t);s=M(g,"DIV",{style:!0});var O=pe(s);n=M(O,"H1",{class:!0,title:!0,"data-svelte-h":!0}),we(n)!=="svelte-xxt2o6"&&(n.innerHTML=o),f=x(O),Ae(d.$$.fragment,O),O.forEach(i),g.forEach(i),T.forEach(i),h=x(N),Ae(m.$$.fragment,N),c=x(N),Ae(u.$$.fragment,N),P=x(N),Ae(I.$$.fragment,N),this.h()},h(){Z(n,"class","fancy-font svelte-q9zbzo"),Z(n,"title","Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios"),Xe(s,"text-align","center"),Xe(s,"flex-grow","1"),Xe(t,"display","flex"),Xe(t,"just-content","space-between"),Xe(t,"align-items","center"),Z(l,"class","title-egg svelte-q9zbzo")},m(N,T){Fe(e,N,T),v(N,r,T),v(N,l,T),L(l,t),L(t,s),L(s,n),L(s,f),Fe(d,s,null),v(N,h,T),Fe(m,N,T),v(N,c,T),Fe(u,N,T),v(N,P,T),Fe(I,N,T),D=!0},p(N,T){const g={};T[2]&128&&(g.$$scope={dirty:T,ctx:N}),d.$set(g);const O={};T[0]&16&&(O.title=N[4]+" import alerts"),T[0]&8|T[2]&128&&(O.$$scope={dirty:T,ctx:N}),!_&&T[0]&4096&&(_=!0,O.is_open=N[12],bt(()=>_=!1)),m.$set(O);const w={};!E&&T[0]&2048&&(E=!0,w.is_open=N[11],bt(()=>E=!1)),!b&&T[0]&131072&&(b=!0,w.meta=N[17],bt(()=>b=!1)),u.$set(w);const A={};T[0]&389111|T[2]&128&&(A.$$scope={dirty:T,ctx:N}),I.$set(A)},i(N){D||(de(e.$$.fragment,N),de(d.$$.fragment,N),de(m.$$.fragment,N),de(u.$$.fragment,N),de(I.$$.fragment,N),D=!0)},o(N){ve(e.$$.fragment,N),ve(d.$$.fragment,N),ve(m.$$.fragment,N),ve(u.$$.fragment,N),ve(I.$$.fragment,N),D=!1},d(N){N&&(i(r),i(l),i(h),i(c),i(P)),Le(e,N),Le(d),Le(m,N),Le(u,N),Le(I,N)}}}function id(a){console.log(a),console.log(a)}function fd(a,e,r){let l,t,s,n,o;et(a,jn,te=>r(49,l=te)),et(a,zr,te=>r(50,t=te)),et(a,mr,te=>r(16,s=te)),et(a,nr,te=>r(17,n=te)),et(a,kt,te=>r(18,o=te));var f=this&&this.__awaiter||function(te,ne,ue,be){function ye(fe){return fe instanceof ue?fe:new ue(function(Ne){Ne(fe)})}return new(ue||(ue=Promise))(function(fe,Ne){function Pe(yt){try{St(be.next(yt))}catch(It){Ne(It)}}function wt(yt){try{St(be.throw(yt))}catch(It){Ne(It)}}function St(yt){yt.done?fe(yt.value):ye(yt.value).then(Pe,wt)}St((be=be.apply(te,ne||[])).next())})};const d=new Af({useDefaults:!0,allErrors:!0});let h={is_open:!1,title:"Confirmation to load remote model from URL",content:"This page is instructing D3FEND to remotely load a CAD model from this URL:",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},m={is_open:!1,title:"Confirmation to load remote model from compressed URL",content:"This page is instructing D3FEND to load a CAD model from this URL",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},_;l.url.searchParams.get("load")&&(_=l.url.searchParams.get("load"),h.is_open=!0),l.url.searchParams.get("loadg")&&(m.is_open=!0);function c(te){const ne=te.detail;ne.value==="load"?(kt.add("loading remote URL"),ie(_),kt.clear()):ne.value}function u(te){const ne=te.detail;if(ne.value==="load"){kt.add("loading graph from URL");const ue=l.url.searchParams.get("loadg"),be=kl.uncrush(ue);let ye=JSON.parse(be);N(ye),kt.clear()}else ne.value}Kr(()=>f(void 0,void 0,void 0,function*(){kt.add("Mounting app...");try{yield xn.initialize(),kt.clear()}catch(te){console.error("Failed to initialize Oxigraph in +layout.svelte",te),te.message}}));let E={type:"editableEdge",data:{label:void 0},markerEnd:{type:Jn.ArrowClosed}},b,P,I="d3fend-cad.json",D="";function S(){const te=JSON.stringify({meta:n,nodes:s,edges:t},null,4),ne=new Blob([te],{type:"application/json"}),ue=window.URL.createObjectURL(ne),be=document.createElement("a");be.href=ue,be.download=I,r(4,P=0),document.body.appendChild(be),be.click(),document.body.removeChild(be),window.URL.revokeObjectURL(ue)}function p(){console.log("Saving As D3FEND Ontology Extension..."),kt.add("Generating D3FEND Ontology Extension in Turtle file");let te=prompt("Enter extension name to save as D3FEND Ontology Extension Turtle file as d3fend-cad-ext-<extension-name-here>.ttl","my-extension");const ne="d3fend-cad-ext-"+te+".ttl";ro(te).then(ue=>{kt.clear();const be=new Blob([ue],{type:"text/turtle"}),ye=window.URL.createObjectURL(be),fe=document.createElement("a");fe.href=ye,ne&&(fe.download=ne,document.body.appendChild(fe),fe.click(),document.body.removeChild(fe)),window.URL.revokeObjectURL(ye)}).catch(ue=>{console.error("Error generating D3FEND Ontology Extension in Turtle: ",ue)})}function R(){D==="json"?F():D==="turtle"?C():D==="extension"&&p(),r(6,D="")}function C(){kt.add("generating ttl file"),console.log("!!! Turtle export engaged !!!"),to().then(te=>{kt.clear();const ne=new Blob([te],{type:"text/turtle"}),ue=window.URL.createObjectURL(ne),be=document.createElement("a");be.href=ue;let ye=prompt("Enter filename to save as Turtle file",I.replace("json","ttl"));r(4,P=0),ye&&(be.download=ye,document.body.appendChild(be),be.click(),document.body.removeChild(be)),window.URL.revokeObjectURL(ue)}).catch(te=>{console.error("Error serializing graph to Turtle: ",te)})}function F(){const te=JSON.stringify({meta:n,nodes:s,edges:t},null,4),ne=new Blob([te],{type:"application/json"}),ue=window.URL.createObjectURL(ne),be=document.createElement("a");be.href=ue;let ye=prompt("Enter filename to save as JSON file",I);r(4,P=0),r(5,I=ye),ye&&(be.download=ye,document.body.appendChild(be),be.click(),document.body.removeChild(be)),window.URL.revokeObjectURL(ue)}function N(te){try{const ne=d.compile(Ar),ue=ne(te);r(3,b=ne.errors),ue?r(4,P=0):te=T(ne.errors,te);const be=te.nodes,ye=te.edges;te.meta&&rr(nr,n=te.meta,n),kt.add("loading graph from data..."),Fr(be,ye),w(),window.addEventListener("beforeunload",fe=>{console.log("User is leaving the page"),fe.preventDefault(),fe.returnValue=""}),kt.clear()}catch(ne){console.error("Error parsing JSON:",ne)}}function T(te,ne){r(4,P=te.length);for(const ue of te){if(ue.params.missingProperty=="user_properties"){let be=ue.dataPath.replace(/\D/g,"");be=parseInt(be),ne.nodes[be].data.user_properties=[]}ue.params.missingProperty=="meta"&&(ne.meta=Object.assign(Object.assign({},Fs),ne.meta))}return ne}function g(){r(12,je=!0)}const{screenToFlowPosition:O,fitView:w}=oo();function A(te){const ne=te.target.files[0];if(ne){const ue=new FileReader;ue.onload=be=>{if(typeof be.target.result=="string"){r(5,I=ne.name);try{let ye=JSON.parse(be.target.result);const fe=d.compile(Ar),Ne=fe(ye);r(3,b=fe.errors),Ne?r(4,P=0):ye=T(fe.errors,ye),ye.meta&&rr(nr,n=ye.meta,n);const Pe=ye.nodes,wt=ye.edges;Fr(Pe,wt),w(),window.addEventListener("beforeunload",St=>{console.log("User is leaving the page"),St.preventDefault(),St.returnValue=""})}catch(ye){console.error("Error parsing JSON:",ye)}}else console.error("File content is not a string.")},ue.onerror=()=>{console.error("Error reading file:",ue.error)},ue.readAsText(ne)}}function X(te){const ne=te.target.files[0];if(ne){const ue=new FileReader;ue.onload=be=>{if(typeof be.target.result=="string"){console.log(be.target.result);try{const ye=JSON.parse(be.target.result);mr.set([...s,...ye.nodes]),zr.set([...t,...ye.edges]),alert(` added ${ye.nodes.length} nodes and ${ye.edges.length} edges to the current graph `)}catch(ye){console.error("Error parsing JSON:",ye),alert(`Error parsing JSON:", ${ye}`)}}else console.error("File content is not a string."),alert("File content is not a string.")},ue.onerror=()=>{console.error("Error reading file:",ue.error),alert(`Error reading file: ${ue.error}`)},ue.readAsText(ne)}}function ie(te){return f(this,void 0,void 0,function*(){if(te)try{let ue=yield(yield fetch(te)).json();const be=d.compile(Ar),ye=be(ue);r(3,b=be.errors),ye?r(4,P=0):ue=T(be.errors,ue),ue.meta&&rr(nr,n=ue.meta,n);const fe=ue.nodes,Ne=ue.edges;Fr(fe,Ne),w()}catch(ne){console.error("Error parsing JSON:",ne)}})}function re(){const te=document.createElement("input");te.type="file",te.accept=".json",te.onchange=ne=>{A(ne)},te.click()}function Q(){const te=document.createElement("input");te.type="file",te.accept=".json",te.onchange=ne=>{X(ne)},te.click()}const H=te=>{te.preventDefault(),te.dataTransfer&&(te.dataTransfer.dropEffect="move")},V=te=>console.log("handle onConnect",te),z=te=>{if(te.preventDefault(),!te.dataTransfer)return null;const ne=te.dataTransfer.getData("application/svelteflow"),ue=O({x:te.clientX,y:te.clientY}),be={id:`${Math.random()}`,type:ne,position:ue,data:{label:null,sequence:"0",user_properties:[]},origin:[.5,0]};s.push(be),mr.set(s)};function Y(te){return f(this,void 0,void 0,function*(){const ne=te.detail;r(5,I=ne);try{const ue=yield fetch(`/resources/cad/examples/${ne}`);if(!ue.ok)throw new Error(`HTTP error! status: ${ue.status}`);const be=yield ue.json();N(be)}catch(ue){console.error("Error fetching JSON file:",ue)}})}let j;function K(){eo(),r(4,P=0),r(7,j="Example Graphs"),r(5,I="d3fend-cad.json")}let Ce,ke,le;function me({detail:{event:te,node:ne}}){te.preventDefault();let ue=50;console.log({Y:te.clientY,X:te.clientX,height:le,width:ke}),r(8,Ce={id:ne.id,top:te.clientY<le-ue?te.clientY:void 0,left:te.clientX<ke-ue?te.clientX:void 0,right:te.clientX>=ke-ue?ke-te.clientX:void 0,bottom:te.clientY>=le-ue?le-te.clientY:void 0}),_e({detail:{event:te,node:ne}})}function ce(){r(8,Ce=null),wl.set(null)}function _e({detail:{event:te,node:ne}}){wl.set(ne)}let De=!1,je=!1,ee=!1,q,se;function Ue(){kt.add("compressing graph to string..."),r(13,ee=!0);const te=kl.crush(JSON.stringify({nodes:s,edges:t}));r(14,q=encodeURIComponent(te)),r(15,se=l.url.origin+`/cad/?loadg=${q}`),kt.clear()}function Ve(){qn("/cad-view/")}function Qe(te){je=te,r(12,je)}function ze(te){De=te,r(11,De)}function Ke(te){n=te,nr.set(n)}function Rt(te){a.$$.not_equal(h.is_open,te)&&(h.is_open=te,r(0,h))}function Je(te){a.$$.not_equal(m.is_open,te)&&(m.is_open=te,r(1,m))}const Ge=()=>Un(se);function Ye(te){ee=te,r(13,ee)}function Pt(te){j=te,r(7,j)}function Tt(){D=On(this),r(6,D)}function At(){I=this.value,r(5,I)}const Ut=()=>r(11,De=!De);function $e(){ke=this.clientWidth,le=this.clientHeight,r(9,ke),r(10,le)}return[h,m,_,b,P,I,D,j,Ce,ke,le,De,je,ee,q,se,s,n,o,c,u,E,S,R,g,re,Q,H,V,z,Y,K,me,ce,Ue,Ve,Qe,ze,Ke,Rt,Je,Ge,Ye,Pt,Tt,At,Ut,$e]}class ud extends nt{constructor(e){super(),ot(this,e,fd,od,st,{},null,[-1,-1,-1])}}function cd(a){let e,r;return e=new ud({}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){ve(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function dd(a){let e,r;return e=new kn({props:{$$slots:{default:[cd]},$$scope:{ctx:a}}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,[t]){const s={};t&2&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){ve(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function hd(a,e,r){let{data:l}=e;return a.$$set=t=>{"data"in t&&r(0,l=t.data)},a.$$.update=()=>{a.$$.dirty&1&&(yn.set(l.remote_d3fend_tree),Sn.set(l.attack),Dn.set(l.dao),Cn.set(l.events),Nn.set(l.weaknesses),Rn.set(l.properties),In.set(l.digital_information))},[l]}class Ld extends nt{constructor(e){super(),ot(this,e,hd,dd,st,{data:0})}}export{Ld as component,Fd as universal};

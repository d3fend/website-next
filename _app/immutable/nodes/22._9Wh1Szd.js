const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/jsonld.OPIS_L8g.js","../chunks/_commonjsHelpers.BosuxZz1.js","../chunks/index.HGyOB-Dh.js"])))=>i.map(i=>d[i]);
import{s as Va}from"../chunks/sortBy.ChsTRid8.js";import{s as Ye,c as pt,u as gt,g as mt,a as vt,am as Sh,F as Rh,e as te,d as re,f as ye,i as g,q as oe,k as A,o as nt,ao as Ih,C as aa,G as _t,H as Oe,b as ae,j as se,as as We,t as q,h as M,l as z,P as Ae,a4 as Ot,ar as Ur,m as de,v as bt,X as ur,n as Le,p as Ue,J as Tt,W as zt,B as He,O as kn,Z as ns,D as Li,a3 as is,r as Wi,al as _l,a0 as Ha,N as xn,ap as pl,ak as Fh,aq as Oh}from"../chunks/scheduler.CpyzObLs.js";import{S as Je,i as Ze,t as ue,a as fe,g as kt,e as Et,c as me,b as ve,m as be,d as we,f as Xt,p as gl}from"../chunks/index.CTZRj-VU.js";import{w as lr}from"../chunks/index.tqekIUNw.js";import{p as Lh}from"../chunks/stores.tU1GhOQs.js";import{A as sa}from"../chunks/Alert.DCn8aOL0.js";import{T as Nn,b as ke,a as ef,G as tf,m as Bh,d as Qi,o as qh}from"../chunks/lib.DCwHEN4o.js";import{c as Mh,k as jh,b as ml,R as $i,u as la,X as Ph,d as vl,e as bl,i as Uh,g as xh,f as wl,n as yl,h as Dl,j as $h,p as Vh,l as Hh,r as zh,m as as,H as ze,P as Xe,o as Xh,E as Gh,q as Wh,S as Qh,C as Yh,B as Jh,a as Zh,M as Kh}from"../chunks/style.Bss-mwyr.js";import{g as ua,c as ss}from"../chunks/_commonjsHelpers.BosuxZz1.js";import{r as e_,b as t_}from"../chunks/index.HGyOB-Dh.js";import{_ as r_}from"../chunks/preload-helper.D6kgxu3v.js";import{e as Ve,u as kl,o as El}from"../chunks/each.9QANBvbJ.js";import{G as xr}from"../chunks/_Graph.CEP-c7_b.js";import{t as Yi,T as rf}from"../chunks/ToggleBar.Dc6Ybkgj.js";import{s as Al}from"../chunks/index.CNpb2BhY.js";import{f as Ji}from"../chunks/utils.xEKteSAW.js";import{f as n_,c as i_,L as a_}from"../chunks/Loading.lvghZtzI.js";import{J as Tl}from"../chunks/JSONCrush.BlUS0oeb.js";import{T as s_}from"../chunks/Title.CJW-ouAc.js";function ls(n,r,e=[]){const t=Va(n,i=>i["rdfs:label"]);for(const i of t)e.push({...i,rootLabel:r}),i.children&&ls(i.children,r,e);return e}function nf(n,r,e){for(const t of e)if(r.test(n[t]))return!0;return!1}function l_(n,r,e){if(!r)return n||[];const t=r?new RegExp(r,"i"):null,i=s=>t?nf(s,t,e):!0;return n.filter(i)}function u_(n,r,e){if(!r)return n||[];const t=r?new RegExp(r,"i"):null,i=a=>t?nf(a,t,e):!0;return n.reduce((a,l)=>(a.push({...l,children:l.children.filter(i)}),a),[]).filter(a=>a.children.length>0)}async function o_({fetch:n}){const r=["/api/offensive-technique/all.json","/api/dao/artifacts.json","/api/taxonomies/d3f:DigitalEvent.json","/api/weakness/all.json"];function e(d,_){return[...new Map(d.map(m=>[m[_],m])).values()]}function t(d){const _=d.reduce((w,R)=>(w[R["@id"]]=R,w),{});return d.reduce((w,R)=>(R.hasOwnProperty("rdfs:hasSubClass")&&(R.children=R["rdfs:hasSubClass"].map(j=>_[j["@id"]]),w.push(R)),w),[]).filter(w=>w["rdfs:subClassOf"].some(R=>R["@id"]==="d3f:DigitalEvent"))}const[{value:{["@graph"]:i}},{value:{["@graph"]:s}},{value:{["@graph"]:a}},{value:{["@graph"]:l}}]=await Promise.allSettled(r.map(d=>n(d).then(_=>_.json()))),u=Va(e(i,"rdfs:label"),d=>d["rdfs:label"]),f=t(a).map(d=>({...d,children:e(ls(d.children,d["rdfs:label"]),"rdfs:label")})),c=Va(l,d=>d["rdfs:label"]);return{attack:u,dao:s,events:f,weaknesses:c}}const Iv=Object.freeze(Object.defineProperty({__proto__:null,load:o_},Symbol.toStringTag,{value:"Module"}));function f_(n){let r;const e=n[7].default,t=pt(e,n,n[6],null);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,s){t&&t.m(i,s),r=!0},p(i,[s]){t&&t.p&&(!r||s&64)&&gt(t,e,i,i[6],r?vt(e,i[6],s,null):mt(i[6]),null)},i(i){r||(ue(t,i),r=!0)},o(i){fe(t,i),r=!1},d(i){t&&t.d(i)}}}function c_(n,r,e){let{$$slots:t={},$$scope:i}=r,{initialNodes:s=void 0}=r,{initialEdges:a=void 0}=r,{initialWidth:l=void 0}=r,{initialHeight:u=void 0}=r,{fitView:o=void 0}=r,{nodeOrigin:f=void 0}=r;const c=Mh({nodes:s,edges:a,width:l,height:u,nodeOrigin:f,fitView:o});return Sh(jh,{getStore:()=>c}),Rh(()=>{c.reset()}),n.$$set=d=>{"initialNodes"in d&&e(0,s=d.initialNodes),"initialEdges"in d&&e(1,a=d.initialEdges),"initialWidth"in d&&e(2,l=d.initialWidth),"initialHeight"in d&&e(3,u=d.initialHeight),"fitView"in d&&e(4,o=d.fitView),"nodeOrigin"in d&&e(5,f=d.nodeOrigin),"$$scope"in d&&e(6,i=d.$$scope)},[s,a,l,u,o,f,i,t]}class d_ extends Je{constructor(r){super(),Ze(this,r,c_,f_,Ye,{initialNodes:0,initialEdges:1,initialWidth:2,initialHeight:3,fitView:4,nodeOrigin:5})}}function h_(n){let r,e,t;const i=n[33].default,s=pt(i,n,n[32],null);return{c(){r=te("div"),s&&s.c(),this.h()},l(a){r=re(a,"DIV",{class:!0,style:!0});var l=ye(r);s&&s.l(l),l.forEach(g),this.h()},h(){oe(r,"class",e=ml(["svelte-flow__resize-control","nodrag",...n[4],n[0],n[1]])),oe(r,"style",n[3])},m(a,l){A(a,r,l),s&&s.m(r,null),n[34](r),t=!0},p(a,l){s&&s.p&&(!t||l[1]&2)&&gt(s,i,a,a[32],t?vt(i,a[32],l,null):mt(a[32]),null),(!t||l[0]&19&&e!==(e=ml(["svelte-flow__resize-control","nodrag",...a[4],a[0],a[1]])))&&oe(r,"class",e),(!t||l[0]&8)&&oe(r,"style",a[3])},i(a){t||(ue(s,a),t=!0)},o(a){fe(s,a),t=!1},d(a){a&&g(r),s&&s.d(a),n[34](null)}}}function __(n,r,e){let t,i,s,a,l,u,o,f,c,d,_,m,N,w,R,j,{$$slots:T={},$$scope:S}=r,{nodeId:v=void 0}=r,{position:C=void 0}=r,{variant:D=$i.Handle}=r,{color:P=void 0}=r,{minWidth:B=10}=r,{minHeight:F=10}=r,{maxWidth:b=Number.MAX_VALUE}=r,{maxHeight:y=Number.MAX_VALUE}=r,{keepAspectRatio:I=!1}=r,{shouldResize:k=void 0}=r,{onResizeStart:V=void 0}=r,{onResize:L=void 0}=r,{onResizeEnd:H=void 0}=r,{style:le=""}=r,{class:Y=""}=r;const{nodeLookup:x,snapGrid:U,viewport:Q,nodes:X,nodeOrigin:ee}=la();nt(n,x,ie=>e(37,N=ie)),nt(n,U,ie=>e(39,R=ie)),nt(n,Q,ie=>e(40,j=ie)),nt(n,X,ie=>e(36,m=ie)),nt(n,ee,ie=>e(38,w=ie));const Ce=Ih("svelteflow__node_id");let Se,he=null;aa(()=>(Se&&e(23,he=Ph({domNode:Se,nodeId:l,getStoreItems:()=>({nodeLookup:N,transform:[j.x,j.y,j.zoom],snapGrid:R??void 0,snapToGrid:!!R,nodeOrigin:w}),onChange:(ie,De)=>{var et,Be;const Pe=(et=N.get(l))==null?void 0:et.internals.userNode;if(Pe){ie.x!==void 0&&ie.y!==void 0&&(Pe.position={x:ie.x,y:ie.y}),ie.width!==void 0&&ie.height!==void 0&&(Pe.width=ie.width,Pe.height=ie.height);for(const Z of De){const _e=(Be=N.get(Z.id))==null?void 0:Be.internals.userNode;_e&&(_e.position=Z.position)}X.set(m)}}})),()=>{he==null||he.destroy()}));function pe(ie){_t[ie?"unshift":"push"](()=>{Se=ie,e(2,Se)})}return n.$$set=ie=>{"nodeId"in ie&&e(10,v=ie.nodeId),"position"in ie&&e(11,C=ie.position),"variant"in ie&&e(0,D=ie.variant),"color"in ie&&e(12,P=ie.color),"minWidth"in ie&&e(13,B=ie.minWidth),"minHeight"in ie&&e(14,F=ie.minHeight),"maxWidth"in ie&&e(15,b=ie.maxWidth),"maxHeight"in ie&&e(16,y=ie.maxHeight),"keepAspectRatio"in ie&&e(17,I=ie.keepAspectRatio),"shouldResize"in ie&&e(18,k=ie.shouldResize),"onResizeStart"in ie&&e(19,V=ie.onResizeStart),"onResize"in ie&&e(20,L=ie.onResize),"onResizeEnd"in ie&&e(21,H=ie.onResizeEnd),"style"in ie&&e(22,le=ie.style),"class"in ie&&e(1,Y=ie.class),"$$scope"in ie&&e(32,S=ie.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&8192&&e(27,t=B??10),n.$$.dirty[0]&16384&&e(26,i=F??10),n.$$.dirty[0]&32768&&e(25,s=b??Number.MAX_VALUE),n.$$.dirty[0]&65536&&e(24,a=y??Number.MAX_VALUE),n.$$.dirty[0]&1024&&(l=typeof v=="string"?v:Ce),n.$$.dirty[0]&1&&e(31,u=D===$i.Line?"right":"bottom-right"),n.$$.dirty[0]&2048|n.$$.dirty[1]&1&&e(28,o=C??u),n.$$.dirty[0]&268435456&&e(4,f=o.split("-")),n.$$.dirty[0]&1&&e(30,c=D===$i.Line?"border-color":"background-color"),n.$$.dirty[0]&4194304&&e(29,d=le??""),n.$$.dirty[0]&1610616832&&e(3,_=P?`${d} ${c}: ${P};`:d),n.$$.dirty[0]&532545536&&(he==null||he.update({controlPosition:o,boundaries:{minWidth:t,minHeight:i,maxWidth:s,maxHeight:a},keepAspectRatio:!!I,onResizeStart:V,onResize:L,onResizeEnd:H,shouldResize:k}))},[D,Y,Se,_,f,x,U,Q,X,ee,v,C,P,B,F,b,y,I,k,V,L,H,le,he,a,s,i,t,o,d,c,u,S,T,pe]}class af extends Je{constructor(r){super(),Ze(this,r,__,h_,Ye,{nodeId:10,position:11,variant:0,color:12,minWidth:13,minHeight:14,maxWidth:15,maxHeight:16,keepAspectRatio:17,shouldResize:18,onResizeStart:19,onResize:20,onResizeEnd:21,style:22,class:1},null,[-1,-1])}}function Cl(n,r,e){const t=n.slice();return t[20]=r[e],t}function Nl(n,r,e){const t=n.slice();return t[20]=r[e],t}function Sl(n){let r=[],e=new Map,t,i=[],s=new Map,a,l,u=Ve(vl);const o=d=>d[20];for(let d=0;d<u.length;d+=1){let _=Nl(n,u,d),m=o(_);e.set(m,r[d]=Rl(m,_))}let f=Ve(bl);const c=d=>d[20];for(let d=0;d<f.length;d+=1){let _=Cl(n,f,d),m=c(_);s.set(m,i[d]=Il(m,_))}return{c(){for(let d=0;d<r.length;d+=1)r[d].c();t=ae();for(let d=0;d<i.length;d+=1)i[d].c();a=Oe()},l(d){for(let _=0;_<r.length;_+=1)r[_].l(d);t=se(d);for(let _=0;_<i.length;_+=1)i[_].l(d);a=Oe()},m(d,_){for(let m=0;m<r.length;m+=1)r[m]&&r[m].m(d,_);A(d,t,_);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(d,_);A(d,a,_),l=!0},p(d,_){_&65521&&(u=Ve(vl),kt(),r=kl(r,_,o,1,d,u,e,t.parentNode,El,Rl,t,Nl),Et()),_&65485&&(f=Ve(bl),kt(),i=kl(i,_,c,1,d,f,s,a.parentNode,El,Il,a,Cl),Et())},i(d){if(!l){for(let _=0;_<u.length;_+=1)ue(r[_]);for(let _=0;_<f.length;_+=1)ue(i[_]);l=!0}},o(d){for(let _=0;_<r.length;_+=1)fe(r[_]);for(let _=0;_<i.length;_+=1)fe(i[_]);l=!1},d(d){d&&(g(t),g(a));for(let _=0;_<r.length;_+=1)r[_].d(d);for(let _=0;_<i.length;_+=1)i[_].d(d)}}}function Rl(n,r){let e,t,i;return t=new af({props:{class:r[4],style:r[5],nodeId:r[0],position:r[20],variant:$i.Line,color:r[6],minWidth:r[12],minHeight:r[13],maxWidth:r[14],maxHeight:r[15],onResizeStart:r[9],keepAspectRatio:r[7],shouldResize:r[8],onResize:r[10],onResizeEnd:r[11]}}),{key:n,first:null,c(){e=Oe(),me(t.$$.fragment),this.h()},l(s){e=Oe(),ve(t.$$.fragment,s),this.h()},h(){this.first=e},m(s,a){A(s,e,a),be(t,s,a),i=!0},p(s,a){r=s;const l={};a&16&&(l.class=r[4]),a&32&&(l.style=r[5]),a&1&&(l.nodeId=r[0]),a&64&&(l.color=r[6]),a&512&&(l.onResizeStart=r[9]),a&128&&(l.keepAspectRatio=r[7]),a&256&&(l.shouldResize=r[8]),a&1024&&(l.onResize=r[10]),a&2048&&(l.onResizeEnd=r[11]),t.$set(l)},i(s){i||(ue(t.$$.fragment,s),i=!0)},o(s){fe(t.$$.fragment,s),i=!1},d(s){s&&g(e),we(t,s)}}}function Il(n,r){let e,t,i;return t=new af({props:{class:r[2],style:r[3],nodeId:r[0],position:r[20],color:r[6],minWidth:r[12],minHeight:r[13],maxWidth:r[14],maxHeight:r[15],onResizeStart:r[9],keepAspectRatio:r[7],shouldResize:r[8],onResize:r[10],onResizeEnd:r[11]}}),{key:n,first:null,c(){e=Oe(),me(t.$$.fragment),this.h()},l(s){e=Oe(),ve(t.$$.fragment,s),this.h()},h(){this.first=e},m(s,a){A(s,e,a),be(t,s,a),i=!0},p(s,a){r=s;const l={};a&4&&(l.class=r[2]),a&8&&(l.style=r[3]),a&1&&(l.nodeId=r[0]),a&64&&(l.color=r[6]),a&512&&(l.onResizeStart=r[9]),a&128&&(l.keepAspectRatio=r[7]),a&256&&(l.shouldResize=r[8]),a&1024&&(l.onResize=r[10]),a&2048&&(l.onResizeEnd=r[11]),t.$set(l)},i(s){i||(ue(t.$$.fragment,s),i=!0)},o(s){fe(t.$$.fragment,s),i=!1},d(s){s&&g(e),we(t,s)}}}function p_(n){let r,e,t=n[1]&&Sl(n);return{c(){t&&t.c(),r=Oe()},l(i){t&&t.l(i),r=Oe()},m(i,s){t&&t.m(i,s),A(i,r,s),e=!0},p(i,[s]){i[1]?t?(t.p(i,s),s&2&&ue(t,1)):(t=Sl(i),t.c(),ue(t,1),t.m(r.parentNode,r)):t&&(kt(),fe(t,1,1,()=>{t=null}),Et())},i(i){e||(ue(t),e=!0)},o(i){fe(t),e=!1},d(i){i&&g(r),t&&t.d(i)}}}function g_(n,r,e){let{nodeId:t=void 0}=r,{isVisible:i=!0}=r,{handleClass:s=void 0}=r,{handleStyle:a=void 0}=r,{lineClass:l=void 0}=r,{lineStyle:u=void 0}=r,{color:o=void 0}=r,{minWidth:f=10}=r,{minHeight:c=10}=r,{maxWidth:d=Number.MAX_VALUE}=r,{maxHeight:_=Number.MAX_VALUE}=r,{keepAspectRatio:m=!1}=r,{shouldResize:N=void 0}=r,{onResizeStart:w=void 0}=r,{onResize:R=void 0}=r,{onResizeEnd:j=void 0}=r,T=f||10,S=c||10,v=d||Number.MAX_VALUE,C=_||Number.MAX_VALUE;return n.$$set=D=>{"nodeId"in D&&e(0,t=D.nodeId),"isVisible"in D&&e(1,i=D.isVisible),"handleClass"in D&&e(2,s=D.handleClass),"handleStyle"in D&&e(3,a=D.handleStyle),"lineClass"in D&&e(4,l=D.lineClass),"lineStyle"in D&&e(5,u=D.lineStyle),"color"in D&&e(6,o=D.color),"minWidth"in D&&e(16,f=D.minWidth),"minHeight"in D&&e(17,c=D.minHeight),"maxWidth"in D&&e(18,d=D.maxWidth),"maxHeight"in D&&e(19,_=D.maxHeight),"keepAspectRatio"in D&&e(7,m=D.keepAspectRatio),"shouldResize"in D&&e(8,N=D.shouldResize),"onResizeStart"in D&&e(9,w=D.onResizeStart),"onResize"in D&&e(10,R=D.onResize),"onResizeEnd"in D&&e(11,j=D.onResizeEnd)},[t,i,s,a,l,u,o,m,N,w,R,j,T,S,v,C,f,c,d,_]}class $r extends Je{constructor(r){super(),Ze(this,r,g_,p_,Ye,{nodeId:0,isVisible:1,handleClass:2,handleStyle:3,lineClass:4,lineStyle:5,color:6,minWidth:16,minHeight:17,maxWidth:18,maxHeight:19,keepAspectRatio:7,shouldResize:8,onResizeStart:9,onResize:10,onResizeEnd:11})}}const Fl=n=>Uh(n);function m_(){const{zoomIn:n,zoomOut:r,fitView:e,onbeforedelete:t,snapGrid:i,viewport:s,width:a,height:l,minZoom:u,maxZoom:o,panZoom:f,nodes:c,edges:d,domNode:_,nodeLookup:m,edgeLookup:N}=la(),w=T=>{const S=Fl(T)&&Hh(T)?T:We(m).get(T.id);return S?yl(S):null},R=(T,S,v={replace:!1})=>{var P;const C=(P=We(m).get(T))==null?void 0:P.internals.userNode;if(!C)return;const D=typeof S=="function"?S(C):S;v.replace?c.update(B=>B.map(F=>F.id===T?Fl(D)?D:{...F,...D}:F)):(Object.assign(C,D),c.update(B=>B))},j=T=>We(m).get(T);return{zoomIn:n,zoomOut:r,getInternalNode:j,getNode:T=>{var S;return(S=j(T))==null?void 0:S.internals.userNode},getNodes:T=>T===void 0?We(c):Ol(We(m),T),getEdge:T=>We(N).get(T),getEdges:T=>T===void 0?We(d):Ol(We(N),T),setZoom:(T,S)=>{const v=We(f);return v?v.scaleTo(T,{duration:S==null?void 0:S.duration}):Promise.resolve(!1)},getZoom:()=>We(s).zoom,setViewport:async(T,S)=>{const v=We(s),C=We(f);return C?(await C.setViewport({x:T.x??v.x,y:T.y??v.y,zoom:T.zoom??v.zoom},{duration:S==null?void 0:S.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>We(s),setCenter:async(T,S,v)=>{const C=typeof(v==null?void 0:v.zoom)<"u"?v.zoom:We(o),D=We(f);return D?(await D.setViewport({x:We(a)/2-T*C,y:We(l)/2-S*C,zoom:C},{duration:v==null?void 0:v.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:e,fitBounds:async(T,S)=>{const v=We(f);if(!v)return Promise.resolve(!1);const C=xh(T,We(a),We(l),We(u),We(o),(S==null?void 0:S.padding)??.1);return await v.setViewport(C,{duration:S==null?void 0:S.duration}),Promise.resolve(!0)},getIntersectingNodes:(T,S=!0,v)=>{const C=wl(T),D=C?T:w(T);return D?(v||We(c)).filter(P=>{const B=We(m).get(P.id);if(!B||!C&&P.id===T.id)return!1;const F=yl(B),b=Dl(F,D);return S&&b>0||b>=D.width*D.height}):[]},isNodeIntersecting:(T,S,v=!0)=>{const D=wl(T)?T:w(T);if(!D)return!1;const P=Dl(D,S);return v&&P>0||P>=D.width*D.height},deleteElements:async({nodes:T=[],edges:S=[]})=>{const{nodes:v,edges:C}=await $h({nodesToRemove:T,edgesToRemove:S,nodes:We(c),edges:We(d),onBeforeDelete:We(t)});return v&&c.update(D=>D.filter(P=>!v.some(({id:B})=>B===P.id))),C&&d.update(D=>D.filter(P=>!C.some(({id:B})=>B===P.id))),{deletedNodes:v,deletedEdges:C}},screenToFlowPosition:(T,S={snapToGrid:!0})=>{const v=We(_);if(!v)return T;const C=S.snapToGrid?We(i):!1,{x:D,y:P,zoom:B}=We(s),{x:F,y:b}=v.getBoundingClientRect(),y={x:T.x-F,y:T.y-b};return Vh(y,[D,P,B],C!==null,C||[1,1])},flowToScreenPosition:T=>{const S=We(_);if(!S)return T;const{x:v,y:C,zoom:D}=We(s),{x:P,y:B}=S.getBoundingClientRect(),F=zh(T,[v,C,D]);return{x:F.x+P,y:F.y+B}},toObject:()=>({nodes:We(c).map(T=>({...T,position:{...T.position},data:{...T.data}})),edges:We(d).map(T=>({...T})),viewport:{...We(s)}}),updateNode:R,updateNodeData:(T,S,v)=>{var P;const C=(P=We(m).get(T))==null?void 0:P.internals.userNode;if(!C)return;const D=typeof S=="function"?S(C):S;C.data=v!=null&&v.replace?D:{...C.data,...D},c.update(B=>B)},viewport:s}}function Ol(n,r){var t;const e=[];for(const i of r){const s=n.get(i);if(s){const a="internals"in s?(t=s.internals)==null?void 0:t.userNode:s;e.push(a)}}return e}function Dr(){const{nodes:n}=la();return n}function Or(){const{edges:n}=la();return n}let sf=lr([]),lf=lr([]),uf=lr([]),of=lr([]),ff=lr([]);function v_(){const{subscribe:n,set:r,update:e}=lr();return{subscribe:n,update:e,add:t=>r(t),clear:()=>r()}}const Yt=v_();function Zt(n){"@babel/helpers - typeof";return Zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Zt(n)}function b_(n,r){if(Zt(n)!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var t=e.call(n,r||"default");if(Zt(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function cf(n){var r=b_(n,"string");return Zt(r)=="symbol"?r:r+""}function Ll(n,r){for(var e=0;e<r.length;e++){var t=r[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,cf(t.key),t)}}function dt(n,r,e){return r&&Ll(n.prototype,r),e&&Ll(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function ht(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function w_(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Lr(n,r){if(r&&(Zt(r)=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w_(n)}function At(n){return At=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},At(n)}function za(n,r){return za=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},za(n,r)}function xt(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&za(n,r)}function ge(n,r,e){return(r=cf(r))in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}var mr={Literal:1,Collection:3,Graph:4,NamedNode:5,BlankNode:6,Variable:7},ft=function(){function n(r){ht(this,n),ge(this,"termType",void 0),ge(this,"classOrder",void 0),ge(this,"value",void 0),this.value=r}return dt(n,[{key:"substitute",value:function(e){return this}},{key:"compareTerm",value:function(e){return this.classOrder<e.classOrder?-1:this.classOrder>e.classOrder?1:this.value<e.value?-1:this.value>e.value?1:0}},{key:"equals",value:function(e){return e?this.termType===e.termType&&this.value===e.value:!1}},{key:"hashString",value:function(){return this.toCanonical()}},{key:"sameTerm",value:function(e){return this.equals(e)}},{key:"toCanonical",value:function(){return this.toNT()}},{key:"toNT",value:function(){return this.toString()}},{key:"toNQ",value:function(){return this.toNT()}},{key:"toString",value:function(){throw new Error("Node.toString() is abstract - see the subclasses instead")}}])}();ge(ft,"fromValue",void 0);ge(ft,"toJS",void 0);var fn="NamedNode",cn="BlankNode",On="Literal",Vr="Variable",ln="DefaultGraph",Hr="Collection",df="Empty",li="Graph",Bl="text/html",Xa="application/ld+json",hf="text/n3",y_="application/n3",Ga="application/nquads",Wa="application/n-quads",D_="application/n-triples",ei="application/rdf+xml",k_="application/sparql-update",E_="application/sparql-update-single-match",nn="text/turtle",A_="application/x-turtle",Qa="application/xhtml+xml";function T_(n,r,e){return r=At(r),Lr(n,_f()?Reflect.construct(r,e||[],At(n).constructor):r.apply(n,e))}function _f(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_f=function(){return!!n})()}var vr=function(n){function r(e){var t;return ht(this,r),t=T_(this,r,[r.getId(e)]),ge(t,"termType",cn),ge(t,"classOrder",mr.BlankNode),ge(t,"isBlank",1),ge(t,"isVar",1),t}return xt(r,n),dt(r,[{key:"id",get:function(){return this.value},set:function(t){this.value=t}},{key:"compareTerm",value:function(t){return this.classOrder<t.classOrder?-1:this.classOrder>t.classOrder?1:this.id<t.id?-1:this.id>t.id?1:0}},{key:"copy",value:function(t){var i=new r;return t.copyTo(this,i),i}},{key:"toCanonical",value:function(){return r.NTAnonymousNodePrefix+this.value}},{key:"toString",value:function(){return r.NTAnonymousNodePrefix+this.id}}],[{key:"getId",value:function(t){if(t){if(typeof t!="string")throw new Error("Bad id argument to new blank node: "+t);if(t.includes("#")){var i=t.split("#");return i[i.length-1]}return t}return"n"+r.nextId++}}])}(ft);ge(vr,"nextId",0);ge(vr,"NTAnonymousNodePrefix","_:");function wn(n){return typeof n=="string"?n:n.value}function C_(n){return Zt(n)==="object"&&n!==null&&"subject"in n}function ql(n){return Zt(n)==="object"&&n!==null&&"statements"in n}function us(n){return Rr(n)&&n.termType===Hr}function N_(n){return n&&Object.prototype.hasOwnProperty.call(n,"termType")&&(n.termType===fn||n.termType===Vr||n.termType===cn||n.termType===Hr||n.termType===On||n.termType===li)}function S_(n){return n&&Object.prototype.hasOwnProperty.call(n,"termType")&&(n.termType===fn||n.termType===Vr||n.termType===cn||n.termType===Hr||n.termType===On||n.termType===li)}function R_(n){return Rr(n)&&(n.termType===fn||n.termType===cn||n.termType===Vr)}function I_(n){return Rr(n)&&n.termType===Vr}function Rr(n){return Zt(n)==="object"&&n!==null&&"termType"in n}function pf(n){return n.termType===On}function yn(n){return Zt(n)==="object"&&n!==null&&"subject"in n&&"predicate"in n&&"object"in n}function Ml(n){return Rr(n)&&n.termType==="NamedNode"}function F_(n){return Rr(n)&&(n.termType===fn||n.termType===Vr||n.termType===cn||n.termType===ln)}function O_(n,r,e){return r=At(r),Lr(n,gf()?Reflect.construct(r,e||[],At(n).constructor):r.apply(n,e))}function gf(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gf=function(){return!!n})()}var qt=function(n){function r(e){var t;if(ht(this,r),t=O_(this,r,[wn(e)]),ge(t,"termType",fn),ge(t,"classOrder",mr.NamedNode),!t.value)throw new Error("Missing IRI for NamedNode");if(!t.value.includes(":"))throw new Error('NamedNode IRI "'+e+'" must be absolute.');if(t.value.includes(" ")){var i='Error: NamedNode IRI "'+e+'" must not contain unencoded spaces.';throw new Error(i)}return t}return xt(r,n),dt(r,[{key:"dir",value:function(){var t=this.value.split("#")[0],i=t.slice(0,-1).lastIndexOf("/"),s=t.indexOf("//");return s>=0&&i<s+2||i<0?null:new r(t.slice(0,i+1))}},{key:"site",value:function(){var t=this.value.split("#")[0],i=t.indexOf("//");if(i<0)throw new Error("This URI does not have a web site part (origin)");var s=t.indexOf("/",i+2);return s<0?new r(t.slice(0)+"/"):new r(t.slice(0,s+1))}},{key:"doc",value:function(){return this.value.indexOf("#")<0?this:new r(this.value.split("#")[0])}},{key:"toString",value:function(){return"<"+this.value+">"}},{key:"id",value:function(){return this.value.split("#")[1]}},{key:"uri",get:function(){return this.value},set:function(t){this.value=t}}],[{key:"fromValue",value:function(t){return typeof t>"u"||t===null||Rr(t)?t:new r(t)}}])}(ft);const Cr={boolean:new qt("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:new qt("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:new qt("http://www.w3.org/2001/XMLSchema#decimal"),double:new qt("http://www.w3.org/2001/XMLSchema#double"),integer:new qt("http://www.w3.org/2001/XMLSchema#integer"),langString:new qt("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:new qt("http://www.w3.org/2001/XMLSchema#string")};function L_(n,r,e){return r=At(r),Lr(n,mf()?Reflect.construct(r,e||[],At(n).constructor):r.apply(n,e))}function mf(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mf=function(){return!!n})()}var gr=function(n){function r(e,t,i){var s;return ht(this,r),s=L_(this,r,[e]),ge(s,"termType",On),ge(s,"classOrder",mr.Literal),ge(s,"datatype",Cr.string),ge(s,"isVar",0),ge(s,"language",""),t?(s.language=t,s.datatype=Cr.langString):i?s.datatype=qt.fromValue(i):s.datatype=Cr.string,s}return xt(r,n),dt(r,[{key:"copy",value:function(){return new r(this.value,this.lang,this.datatype)}},{key:"equals",value:function(t){return t?this.termType===t.termType&&this.value===t.value&&this.language===t.language&&(!this.datatype&&!t.datatype||this.datatype&&this.datatype.equals(t.datatype)):!1}},{key:"lang",get:function(){return this.language},set:function(t){this.language=t||""}},{key:"toNT",value:function(){return r.toNT(this)}},{key:"toString",value:function(){return""+this.value}}],[{key:"toNT",value:function(t){if(typeof t.value=="number")return""+t.value;if(typeof t.value!="string")throw new Error("Value of RDF literal is not string or number: "+t.value);var i=t.value;return i=i.replace(/\\/g,"\\\\"),i=i.replace(/\"/g,'\\"'),i=i.replace(/\n/g,"\\n"),i=i.replace(/\r/g,"\\r"),i='"'+i+'"',t.language?i+="@"+t.language:t.datatype.equals(Cr.string)||(i+="^^"+t.datatype.toCanonical()),i}},{key:"fromBoolean",value:function(t){var i=t?"1":"0";return new r(i,null,Cr.boolean)}},{key:"fromDate",value:function(t){if(!(t instanceof Date))throw new TypeError("Invalid argument to Literal.fromDate()");var i=function(l){return(""+(100+l)).slice(1,3)},s=""+t.getUTCFullYear()+"-"+i(t.getUTCMonth()+1)+"-"+i(t.getUTCDate())+"T"+i(t.getUTCHours())+":"+i(t.getUTCMinutes())+":"+i(t.getUTCSeconds())+"Z";return new r(s,null,Cr.dateTime)}},{key:"fromNumber",value:function(t){if(typeof t!="number")throw new TypeError("Invalid argument to Literal.fromNumber()");var i,s=t.toString();return s.indexOf("e")<0&&Math.abs(t)<=Number.MAX_SAFE_INTEGER?i=Number.isInteger(t)?Cr.integer:Cr.decimal:i=Cr.double,new r(s,null,i)}},{key:"fromValue",value:function(t){if(pf(t))return t;switch(Zt(t)){case"object":if(t instanceof Date)return r.fromDate(t);case"boolean":return r.fromBoolean(t);case"number":return r.fromNumber(t);case"string":return new r(t)}throw new Error("Can't make literal from "+t+" of type "+Zt(t))}}])}(ft);function B_(n,r,e){return r=At(r),Lr(n,vf()?Reflect.construct(r,e||[],At(n).constructor):r.apply(n,e))}function vf(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vf=function(){return!!n})()}function bf(n){return typeof n>"u"||n===null||Rr(n)?n:Array.isArray(n)?new Pr(n):gr.fromValue(n)}var Pr=function(n){function r(e){var t;return ht(this,r),t=B_(this,r,[(vr.nextId++).toString()]),ge(t,"termType",Hr),ge(t,"classOrder",mr.Collection),ge(t,"closed",!1),ge(t,"compareTerm",vr.prototype.compareTerm),ge(t,"elements",[]),ge(t,"isVar",0),e&&e.length>0&&e.forEach(function(i){t.elements.push(bf(i))}),t}return xt(r,n),dt(r,[{key:"id",get:function(){return this.value},set:function(t){this.value=t}},{key:"append",value:function(t){return this.elements.push(t)}},{key:"close",value:function(){return this.closed=!0,this.closed}},{key:"shift",value:function(){return this.elements.shift()}},{key:"substitute",value:function(t){var i=this.elements.map(function(s){return s.substitute(t)});return new r(i)}},{key:"toNT",value:function(){return r.toNT(this)}},{key:"toString",value:function(){return"("+this.elements.join(" ")+")"}},{key:"unshift",value:function(t){return this.elements.unshift(t)}}],[{key:"toNT",value:function(t){return vr.NTAnonymousNodePrefix+t.id}}])}(ft);ge(Pr,"termType",Hr);function jl(n,r,e,t,i,s,a){try{var l=n[s](a),u=l.value}catch(o){return void e(o)}l.done?r(u):Promise.resolve(u).then(t,i)}function Pl(n){return function(){var r=this,e=arguments;return new Promise(function(t,i){var s=n.apply(r,e);function a(u){jl(s,t,i,a,l,"next",u)}function l(u){jl(s,t,i,a,l,"throw",u)}a(void 0)})}}var wf={exports:{}},yf={exports:{}};(function(n){function r(e){"@babel/helpers - typeof";return n.exports=r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n.exports.__esModule=!0,n.exports.default=n.exports,r(e)}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports})(yf);var q_=yf.exports;(function(n){var r=q_.default;function e(){n.exports=e=function(){return i},n.exports.__esModule=!0,n.exports.default=n.exports;var t,i={},s=Object.prototype,a=s.hasOwnProperty,l=Object.defineProperty||function(Y,x,U){Y[x]=U.value},u=typeof Symbol=="function"?Symbol:{},o=u.iterator||"@@iterator",f=u.asyncIterator||"@@asyncIterator",c=u.toStringTag||"@@toStringTag";function d(Y,x,U){return Object.defineProperty(Y,x,{value:U,enumerable:!0,configurable:!0,writable:!0}),Y[x]}try{d({},"")}catch{d=function(U,Q,X){return U[Q]=X}}function _(Y,x,U,Q){var X=x&&x.prototype instanceof S?x:S,ee=Object.create(X.prototype),Ce=new H(Q||[]);return l(ee,"_invoke",{value:I(Y,U,Ce)}),ee}function m(Y,x,U){try{return{type:"normal",arg:Y.call(x,U)}}catch(Q){return{type:"throw",arg:Q}}}i.wrap=_;var N="suspendedStart",w="suspendedYield",R="executing",j="completed",T={};function S(){}function v(){}function C(){}var D={};d(D,o,function(){return this});var P=Object.getPrototypeOf,B=P&&P(P(le([])));B&&B!==s&&a.call(B,o)&&(D=B);var F=C.prototype=S.prototype=Object.create(D);function b(Y){["next","throw","return"].forEach(function(x){d(Y,x,function(U){return this._invoke(x,U)})})}function y(Y,x){function U(X,ee,Ce,Se){var he=m(Y[X],Y,ee);if(he.type!=="throw"){var pe=he.arg,ie=pe.value;return ie&&r(ie)=="object"&&a.call(ie,"__await")?x.resolve(ie.__await).then(function(De){U("next",De,Ce,Se)},function(De){U("throw",De,Ce,Se)}):x.resolve(ie).then(function(De){pe.value=De,Ce(pe)},function(De){return U("throw",De,Ce,Se)})}Se(he.arg)}var Q;l(this,"_invoke",{value:function(ee,Ce){function Se(){return new x(function(he,pe){U(ee,Ce,he,pe)})}return Q=Q?Q.then(Se,Se):Se()}})}function I(Y,x,U){var Q=N;return function(X,ee){if(Q===R)throw Error("Generator is already running");if(Q===j){if(X==="throw")throw ee;return{value:t,done:!0}}for(U.method=X,U.arg=ee;;){var Ce=U.delegate;if(Ce){var Se=k(Ce,U);if(Se){if(Se===T)continue;return Se}}if(U.method==="next")U.sent=U._sent=U.arg;else if(U.method==="throw"){if(Q===N)throw Q=j,U.arg;U.dispatchException(U.arg)}else U.method==="return"&&U.abrupt("return",U.arg);Q=R;var he=m(Y,x,U);if(he.type==="normal"){if(Q=U.done?j:w,he.arg===T)continue;return{value:he.arg,done:U.done}}he.type==="throw"&&(Q=j,U.method="throw",U.arg=he.arg)}}}function k(Y,x){var U=x.method,Q=Y.iterator[U];if(Q===t)return x.delegate=null,U==="throw"&&Y.iterator.return&&(x.method="return",x.arg=t,k(Y,x),x.method==="throw")||U!=="return"&&(x.method="throw",x.arg=new TypeError("The iterator does not provide a '"+U+"' method")),T;var X=m(Q,Y.iterator,x.arg);if(X.type==="throw")return x.method="throw",x.arg=X.arg,x.delegate=null,T;var ee=X.arg;return ee?ee.done?(x[Y.resultName]=ee.value,x.next=Y.nextLoc,x.method!=="return"&&(x.method="next",x.arg=t),x.delegate=null,T):ee:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,T)}function V(Y){var x={tryLoc:Y[0]};1 in Y&&(x.catchLoc=Y[1]),2 in Y&&(x.finallyLoc=Y[2],x.afterLoc=Y[3]),this.tryEntries.push(x)}function L(Y){var x=Y.completion||{};x.type="normal",delete x.arg,Y.completion=x}function H(Y){this.tryEntries=[{tryLoc:"root"}],Y.forEach(V,this),this.reset(!0)}function le(Y){if(Y||Y===""){var x=Y[o];if(x)return x.call(Y);if(typeof Y.next=="function")return Y;if(!isNaN(Y.length)){var U=-1,Q=function X(){for(;++U<Y.length;)if(a.call(Y,U))return X.value=Y[U],X.done=!1,X;return X.value=t,X.done=!0,X};return Q.next=Q}}throw new TypeError(r(Y)+" is not iterable")}return v.prototype=C,l(F,"constructor",{value:C,configurable:!0}),l(C,"constructor",{value:v,configurable:!0}),v.displayName=d(C,c,"GeneratorFunction"),i.isGeneratorFunction=function(Y){var x=typeof Y=="function"&&Y.constructor;return!!x&&(x===v||(x.displayName||x.name)==="GeneratorFunction")},i.mark=function(Y){return Object.setPrototypeOf?Object.setPrototypeOf(Y,C):(Y.__proto__=C,d(Y,c,"GeneratorFunction")),Y.prototype=Object.create(F),Y},i.awrap=function(Y){return{__await:Y}},b(y.prototype),d(y.prototype,f,function(){return this}),i.AsyncIterator=y,i.async=function(Y,x,U,Q,X){X===void 0&&(X=Promise);var ee=new y(_(Y,x,U,Q),X);return i.isGeneratorFunction(x)?ee:ee.next().then(function(Ce){return Ce.done?Ce.value:ee.next()})},b(F),d(F,c,"Generator"),d(F,o,function(){return this}),d(F,"toString",function(){return"[object Generator]"}),i.keys=function(Y){var x=Object(Y),U=[];for(var Q in x)U.push(Q);return U.reverse(),function X(){for(;U.length;){var ee=U.pop();if(ee in x)return X.value=ee,X.done=!1,X}return X.done=!0,X}},i.values=le,H.prototype={constructor:H,reset:function(x){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!x)for(var U in this)U.charAt(0)==="t"&&a.call(this,U)&&!isNaN(+U.slice(1))&&(this[U]=t)},stop:function(){this.done=!0;var x=this.tryEntries[0].completion;if(x.type==="throw")throw x.arg;return this.rval},dispatchException:function(x){if(this.done)throw x;var U=this;function Q(pe,ie){return Ce.type="throw",Ce.arg=x,U.next=pe,ie&&(U.method="next",U.arg=t),!!ie}for(var X=this.tryEntries.length-1;X>=0;--X){var ee=this.tryEntries[X],Ce=ee.completion;if(ee.tryLoc==="root")return Q("end");if(ee.tryLoc<=this.prev){var Se=a.call(ee,"catchLoc"),he=a.call(ee,"finallyLoc");if(Se&&he){if(this.prev<ee.catchLoc)return Q(ee.catchLoc,!0);if(this.prev<ee.finallyLoc)return Q(ee.finallyLoc)}else if(Se){if(this.prev<ee.catchLoc)return Q(ee.catchLoc,!0)}else{if(!he)throw Error("try statement without catch or finally");if(this.prev<ee.finallyLoc)return Q(ee.finallyLoc)}}}},abrupt:function(x,U){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var X=this.tryEntries[Q];if(X.tryLoc<=this.prev&&a.call(X,"finallyLoc")&&this.prev<X.finallyLoc){var ee=X;break}}ee&&(x==="break"||x==="continue")&&ee.tryLoc<=U&&U<=ee.finallyLoc&&(ee=null);var Ce=ee?ee.completion:{};return Ce.type=x,Ce.arg=U,ee?(this.method="next",this.next=ee.finallyLoc,T):this.complete(Ce)},complete:function(x,U){if(x.type==="throw")throw x.arg;return x.type==="break"||x.type==="continue"?this.next=x.arg:x.type==="return"?(this.rval=this.arg=x.arg,this.method="return",this.next="end"):x.type==="normal"&&U&&(this.next=U),T},finish:function(x){for(var U=this.tryEntries.length-1;U>=0;--U){var Q=this.tryEntries[U];if(Q.finallyLoc===x)return this.complete(Q.completion,Q.afterLoc),L(Q),T}},catch:function(x){for(var U=this.tryEntries.length-1;U>=0;--U){var Q=this.tryEntries[U];if(Q.tryLoc===x){var X=Q.completion;if(X.type==="throw"){var ee=X.arg;L(Q)}return ee}}throw Error("illegal catch attempt")},delegateYield:function(x,U,Q){return this.delegate={iterator:le(x),resultName:U,nextLoc:Q},this.method==="next"&&(this.arg=t),T}},i}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(wf);var M_=wf.exports,Vi=M_(),j_=Vi;try{regeneratorRuntime=Vi}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Vi:Function("r","regeneratorRuntime = r")(Vi)}const Bi=ua(j_);var ti="chrome:theSession";new qt(ti);function P_(n,r,e){return r=At(r),Lr(n,Df()?Reflect.construct(r,e||[],At(n).constructor):r.apply(n,e))}function Df(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Df=function(){return!!n})()}var os=function(n){function r(){var e;return ht(this,r),e=P_(this,r,[""]),ge(e,"value",""),ge(e,"termType",ln),ge(e,"uri",ti),e}return xt(r,n),dt(r,[{key:"toCanonical",value:function(){return this.value}},{key:"toString",value:function(){return"DefaultGraph"}}])}(ft);function Ul(n){return!!n&&n.termType===ln}var U_=new os,an=function(){function n(r,e,t,i){ht(this,n),ge(this,"subject",void 0),ge(this,"predicate",void 0),ge(this,"object",void 0),ge(this,"graph",void 0),this.subject=ft.fromValue(r),this.predicate=ft.fromValue(e),this.object=ft.fromValue(t),this.graph=i==null?U_:ft.fromValue(i)}return dt(n,[{key:"why",get:function(){return this.graph},set:function(e){this.graph=e}},{key:"equals",value:function(e){return e.subject.equals(this.subject)&&e.predicate.equals(this.predicate)&&e.object.equals(this.object)&&e.graph.equals(this.graph)}},{key:"substitute",value:function(e){var t=new n(this.subject.substitute(e),this.predicate.substitute(e),this.object.substitute(e),Ul(this.graph)?this.graph:this.graph.substitute(e));return t}},{key:"toCanonical",value:function(){var e=[this.subject.toCanonical(),this.predicate.toCanonical(),this.object.toCanonical()];return this.graph&&this.graph.termType!==ln&&e.push(this.graph.toCanonical()),e.join(" ")+" ."}},{key:"toNT",value:function(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT()].join(" ")+" ."}},{key:"toNQ",value:function(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT(),Ul(this.graph)?"":this.graph.toNT()].join(" ")+" ."}},{key:"toString",value:function(){return this.toNT()}}])}(),kf=kf||console.log;function En(n){var r;return r=n.indexOf("#"),r<0?n:n.slice(0,r)}function x_(n){var r=/[^\/]*\/\/([^\/]*)\//.exec(n);return r?r[1]:""}function tr(n,r){var e,t,i,s,a,l,u=r.indexOf("#");if(u>0&&(r=r.slice(0,u)),n.length===0)return r;if(n.indexOf("#")===0)return r+n;if(s=n.indexOf(":"),s>=0||(e=r.indexOf(":"),r.length===0))return n;if(e<0)return kf("Invalid base: "+r+" in join with given: "+n),n;if(t=r.slice(0,+e+1||9e9),n.indexOf("//")===0)return t+n;if(r.indexOf("//",e)===e+1){if(i=r.indexOf("/",e+3),i<0)return r.length-e-3>0?r+"/"+n:t+n}else if(i=r.indexOf("/",e+1),i<0)return r.length-e-1>0?r+"/"+n:t+n;if(n.indexOf("/")===0)return r.slice(0,i)+n;if(l=r.slice(i),a=l.lastIndexOf("/"),a<0)return t+n;for(a>=0&&a<l.length-1&&(l=l.slice(0,+a+1||9e9)),l+=n;l.match(/[^\/]*\/\.\.\//);)l=l.replace(/[^\/]*\/\.\.\//,"");return l=l.replace(/\.\//g,""),l=l.replace(/\/\.$/,"/"),r.slice(0,i)+l}function xl(n){var r=n.indexOf(":");return r<0?null:n.slice(0,r)}function Na(n,r){var e,t,i,s,a,l,u,o,f,c,d,_,m,N=new RegExp("^[-_a-zA-Z0-9.]+:(//[^/]*)?/[^/]*$");if(!n)return r;if(n===r)return"";for(t=o=0,a=r.length;o<a;t=++o){var w=r[t];if(w!==n[t])break}if(n.slice(0,t).match(N)&&(i=r.indexOf("//"),i<0&&(i=-2),s=r.indexOf("/",i+2),r[s+1]!=="/"&&n[s+1]!=="/"&&r.slice(0,s)===n.slice(0,s)))return r.slice(s);if(r[t]==="#"&&n.length===t)return r.slice(t);for(;t>0&&r[t-1]!=="/";)t--;if(t<3||n.indexOf("//",t-2)>0||r.indexOf("//",t-2)>0||n.indexOf(":",t)>0)return r;for(u=0,d=n.slice(t),f=0,l=d.length;f<l;f++)e=d[f],e==="/"&&u++;if(u===0&&t<r.length&&r[t]==="#")return"./"+r.slice(t);if(u===0&&t===r.length)return"./";if(m="",u>0)for(c=1,_=u;_>=1?c<=_:c>=_;_>=1?++c:--c)m+="../";return m+r.slice(t)}function $_(n,r,e){return r=At(r),Lr(n,Ef()?Reflect.construct(r,e||[],At(n).constructor):r.apply(n,e))}function Ef(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ef=function(){return!!n})()}var un=function(n){function r(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return ht(this,r),e=$_(this,r,[t]),ge(e,"termType",Vr),ge(e,"base","varid:"),ge(e,"classOrder",mr.Variable),ge(e,"isVar",1),ge(e,"uri",void 0),e.base="varid:",e.uri=tr(t,e.base),e}return xt(r,n),dt(r,[{key:"equals",value:function(t){return t?this.termType===t.termType&&this.value===t.value:!1}},{key:"hashString",value:function(){return this.toString()}},{key:"substitute",value:function(t){var i;return(i=t[this.toNT()])!=null?i:this}},{key:"toString",value:function(){return r.toString(this)}}],[{key:"toString",value:function(t){return t.uri.slice(0,t.base.length)===t.base?"?".concat(t.uri.slice(t.base.length)):"?".concat(t.uri)}}])}(ft),Vt=function(n){return n.collections="COLLECTIONS",n.defaultGraphType="DEFAULT_GRAPH_TYPE",n.equalsMethod="EQUALS_METHOD",n.id="ID",n.identity="IDENTITY",n.reversibleId="REVERSIBLE_ID",n.variableType="VARIABLE_TYPE",n}({}),$l=new os,ar={supports:ge(ge(ge(ge(ge(ge(ge({},Vt.collections,!1),Vt.defaultGraphType,!1),Vt.equalsMethod,!0),Vt.identity,!1),Vt.id,!0),Vt.reversibleId,!1),Vt.variableType,!0),blankNode:function(r){return new vr(r)},defaultGraph:function(){return $l},equals:function(r,e){return r===e||!r||!e?!0:yn(r)||yn(e)?yn(r)&&yn(e)?this.equals(r.subject,e.subject)&&this.equals(r.predicate,e.predicate)&&this.equals(r.object,e.object)&&this.equals(r.graph,e.graph):!1:Rr(r)&&Rr(e)?this.id(r)===this.id(e):!1},id:function(r){if(!r)return"undefined";if(yn(r))return this.quadToNQ(r);switch(r.termType){case ln:return"defaultGraph";case Vr:return un.toString(r);default:var e=this.termToNQ(r);if(e)return e;throw new Error("Can't id term with type '".concat(r.termType,"'"))}},isQuad:function(r){return r instanceof an},literal:function(r,e){if(typeof r!="string"&&!e)return gr.fromValue(r);var t=typeof r=="string"?r:""+r;return typeof e=="string"?e.indexOf(":")===-1?new gr(t,e):new gr(t,null,this.namedNode(e)):new gr(t,null,e)},namedNode:function(r){return new qt(r)},quad:function(r,e,t,i){return new an(r,e,t,i||$l)},triple:function(r,e,t,i){return this.quad(r,e,t,i)},quadToNQ:function(r){return"".concat(this.termToNQ(r.subject)," ").concat(this.termToNQ(r.predicate)," ").concat(this.termToNQ(r.object)," ").concat(this.termToNQ(r.graph)," .")},termToNQ:function(r){var e=this;switch(r.termType){case cn:return"_:"+r.value;case ln:return"";case df:return"<http://www.w3.org/1999/02/22-rdf-syntax-ns#nil>";case On:return gr.toNT(r);case li:case fn:return"<"+r.value+">";case Hr:return"("+r.elements.map(function(t){return e.termToNQ(t)}).join(" ")+")";default:throw new Error("Can't serialize nonstandard term type (was '".concat(r.termType,"')"))}},toNQ:function(r){return this.isQuad(r)?this.quadToNQ(r):this.termToNQ(r)},variable:function(r){return new un(r)}},_r={debug:function(r){},warn:function(r){},info:function(r){},error:function(r){},success:function(r){},msg:function(r){}};function Ut(n,r){var e=r||{namedNode:function(i){return new qt(i)}};return function(t){return e.namedNode(n+(t||""))}}var zr={},Br={};function V_(n,r,e){if(e===void 0&&(e=Array.prototype),n&&typeof e.find=="function")return e.find.call(n,r);for(var t=0;t<n.length;t++)if(Object.prototype.hasOwnProperty.call(n,t)){var i=n[t];if(r.call(void 0,i,t,n))return i}}function fs(n,r){return r===void 0&&(r=Object),r&&typeof r.freeze=="function"?r.freeze(n):n}function H_(n,r){if(n===null||typeof n!="object")throw new TypeError("target is not an object");for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e]);return n}var Af=fs({HTML:"text/html",isHTML:function(n){return n===Af.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),Tf=fs({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(n){return n===Tf.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Br.assign=H_;Br.find=V_;Br.freeze=fs;Br.MIME_TYPE=Af;Br.NAMESPACE=Tf;var Cf=Br,br=Cf.find,ri=Cf.NAMESPACE;function z_(n){return n!==""}function X_(n){return n?n.split(/[\t\n\f\r ]+/).filter(z_):[]}function G_(n,r){return n.hasOwnProperty(r)||(n[r]=!0),n}function Vl(n){if(!n)return[];var r=X_(n);return Object.keys(r.reduce(G_,{}))}function W_(n){return function(r){return n&&n.indexOf(r)!==-1}}function ui(n,r){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(r[e]=n[e])}function Gt(n,r){var e=n.prototype;if(!(e instanceof r)){let t=function(){};t.prototype=r.prototype,t=new t,ui(e,t),n.prototype=e=t}e.constructor!=n&&(typeof n!="function"&&console.error("unknown Class:"+n),e.constructor=n)}var Wt={},sr=Wt.ELEMENT_NODE=1,Sn=Wt.ATTRIBUTE_NODE=2,Zi=Wt.TEXT_NODE=3,Nf=Wt.CDATA_SECTION_NODE=4,Sf=Wt.ENTITY_REFERENCE_NODE=5,Q_=Wt.ENTITY_NODE=6,Rf=Wt.PROCESSING_INSTRUCTION_NODE=7,If=Wt.COMMENT_NODE=8,Ff=Wt.DOCUMENT_NODE=9,Of=Wt.DOCUMENT_TYPE_NODE=10,Ir=Wt.DOCUMENT_FRAGMENT_NODE=11,Y_=Wt.NOTATION_NODE=12,Mt={},Lt={};Mt.INDEX_SIZE_ERR=(Lt[1]="Index size error",1);Mt.DOMSTRING_SIZE_ERR=(Lt[2]="DOMString size error",2);var Ht=Mt.HIERARCHY_REQUEST_ERR=(Lt[3]="Hierarchy request error",3);Mt.WRONG_DOCUMENT_ERR=(Lt[4]="Wrong document",4);Mt.INVALID_CHARACTER_ERR=(Lt[5]="Invalid character",5);Mt.NO_DATA_ALLOWED_ERR=(Lt[6]="No data allowed",6);Mt.NO_MODIFICATION_ALLOWED_ERR=(Lt[7]="No modification allowed",7);var Lf=Mt.NOT_FOUND_ERR=(Lt[8]="Not found",8);Mt.NOT_SUPPORTED_ERR=(Lt[9]="Not supported",9);var Hl=Mt.INUSE_ATTRIBUTE_ERR=(Lt[10]="Attribute in use",10);Mt.INVALID_STATE_ERR=(Lt[11]="Invalid state",11);Mt.SYNTAX_ERR=(Lt[12]="Syntax error",12);Mt.INVALID_MODIFICATION_ERR=(Lt[13]="Invalid modification",13);Mt.NAMESPACE_ERR=(Lt[14]="Invalid namespace",14);Mt.INVALID_ACCESS_ERR=(Lt[15]="Invalid access",15);function Dt(n,r){if(r instanceof Error)var e=r;else e=this,Error.call(this,Lt[n]),this.message=Lt[n],Error.captureStackTrace&&Error.captureStackTrace(this,Dt);return e.code=n,r&&(this.message=this.message+": "+r),e}Dt.prototype=Error.prototype;ui(Mt,Dt);function Nr(){}Nr.prototype={length:0,item:function(n){return n>=0&&n<this.length?this[n]:null},toString:function(n,r){for(var e=[],t=0;t<this.length;t++)An(this[t],e,n,r);return e.join("")},filter:function(n){return Array.prototype.filter.call(this,n)},indexOf:function(n){return Array.prototype.indexOf.call(this,n)}};function Rn(n,r){this._node=n,this._refresh=r,cs(this)}function cs(n){var r=n._node._inc||n._node.ownerDocument._inc;if(n._inc!==r){var e=n._refresh(n._node);if(Xf(n,"length",e.length),!n.$$length||e.length<n.$$length)for(var t=e.length;t in n;t++)Object.prototype.hasOwnProperty.call(n,t)&&delete n[t];ui(e,n),n._inc=r}}Rn.prototype.item=function(n){return cs(this),this[n]||null};Gt(Rn,Nr);function Ki(){}function Bf(n,r){for(var e=n.length;e--;)if(n[e]===r)return e}function zl(n,r,e,t){if(t?r[Bf(r,t)]=e:r[r.length++]=e,n){e.ownerElement=n;var i=n.ownerDocument;i&&(t&&jf(i,n,t),J_(i,n,e))}}function Xl(n,r,e){var t=Bf(r,e);if(t>=0){for(var i=r.length-1;t<i;)r[t]=r[++t];if(r.length=i,n){var s=n.ownerDocument;s&&(jf(s,n,e),e.ownerElement=null)}}else throw new Dt(Lf,new Error(n.tagName+"@"+e))}Ki.prototype={length:0,item:Nr.prototype.item,getNamedItem:function(n){for(var r=this.length;r--;){var e=this[r];if(e.nodeName==n)return e}},setNamedItem:function(n){var r=n.ownerElement;if(r&&r!=this._ownerElement)throw new Dt(Hl);var e=this.getNamedItem(n.nodeName);return zl(this._ownerElement,this,n,e),e},setNamedItemNS:function(n){var r=n.ownerElement,e;if(r&&r!=this._ownerElement)throw new Dt(Hl);return e=this.getNamedItemNS(n.namespaceURI,n.localName),zl(this._ownerElement,this,n,e),e},removeNamedItem:function(n){var r=this.getNamedItem(n);return Xl(this._ownerElement,this,r),r},removeNamedItemNS:function(n,r){var e=this.getNamedItemNS(n,r);return Xl(this._ownerElement,this,e),e},getNamedItemNS:function(n,r){for(var e=this.length;e--;){var t=this[e];if(t.localName==r&&t.namespaceURI==n)return t}return null}};function qf(){}qf.prototype={hasFeature:function(n,r){return!0},createDocument:function(n,r,e){var t=new oi;if(t.implementation=this,t.childNodes=new Nr,t.doctype=e||null,e&&t.appendChild(e),r){var i=t.createElementNS(n,r);t.appendChild(i)}return t},createDocumentType:function(n,r,e){var t=new oa;return t.name=n,t.nodeName=n,t.publicId=r||"",t.systemId=e||"",t}};function at(){}at.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(n,r){return ea(this,n,r)},replaceChild:function(n,r){ea(this,n,r,Uf),r&&this.removeChild(r)},removeChild:function(n){return Pf(this,n)},appendChild:function(n){return this.insertBefore(n,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(n){return Ya(this.ownerDocument||this,this,n)},normalize:function(){for(var n=this.firstChild;n;){var r=n.nextSibling;r&&r.nodeType==Zi&&n.nodeType==Zi?(this.removeChild(r),n.appendData(r.data)):(n.normalize(),n=r)}},isSupported:function(n,r){return this.ownerDocument.implementation.hasFeature(n,r)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(n){for(var r=this;r;){var e=r._nsMap;if(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]===n)return t}r=r.nodeType==Sn?r.ownerDocument:r.parentNode}return null},lookupNamespaceURI:function(n){for(var r=this;r;){var e=r._nsMap;if(e&&Object.prototype.hasOwnProperty.call(e,n))return e[n];r=r.nodeType==Sn?r.ownerDocument:r.parentNode}return null},isDefaultNamespace:function(n){var r=this.lookupPrefix(n);return r==null}};function Mf(n){return n=="<"&&"&lt;"||n==">"&&"&gt;"||n=="&"&&"&amp;"||n=='"'&&"&quot;"||"&#"+n.charCodeAt()+";"}ui(Wt,at);ui(Wt,at.prototype);function ni(n,r){if(r(n))return!0;if(n=n.firstChild)do if(ni(n,r))return!0;while(n=n.nextSibling)}function oi(){this.ownerDocument=this}function J_(n,r,e){n&&n._inc++;var t=e.namespaceURI;t===ri.XMLNS&&(r._nsMap[e.prefix?e.localName:""]=e.value)}function jf(n,r,e,t){n&&n._inc++;var i=e.namespaceURI;i===ri.XMLNS&&delete r._nsMap[e.prefix?e.localName:""]}function ds(n,r,e){if(n&&n._inc){n._inc++;var t=r.childNodes;if(e)t[t.length++]=e;else{for(var i=r.firstChild,s=0;i;)t[s++]=i,i=i.nextSibling;t.length=s,delete t[t.length]}}}function Pf(n,r){var e=r.previousSibling,t=r.nextSibling;return e?e.nextSibling=t:n.firstChild=t,t?t.previousSibling=e:n.lastChild=e,r.parentNode=null,r.previousSibling=null,r.nextSibling=null,ds(n.ownerDocument,n),r}function Z_(n){return n&&(n.nodeType===at.DOCUMENT_NODE||n.nodeType===at.DOCUMENT_FRAGMENT_NODE||n.nodeType===at.ELEMENT_NODE)}function K_(n){return n&&(wr(n)||hs(n)||Fr(n)||n.nodeType===at.DOCUMENT_FRAGMENT_NODE||n.nodeType===at.COMMENT_NODE||n.nodeType===at.PROCESSING_INSTRUCTION_NODE)}function Fr(n){return n&&n.nodeType===at.DOCUMENT_TYPE_NODE}function wr(n){return n&&n.nodeType===at.ELEMENT_NODE}function hs(n){return n&&n.nodeType===at.TEXT_NODE}function Gl(n,r){var e=n.childNodes||[];if(br(e,wr)||Fr(r))return!1;var t=br(e,Fr);return!(r&&t&&e.indexOf(t)>e.indexOf(r))}function Wl(n,r){var e=n.childNodes||[];function t(s){return wr(s)&&s!==r}if(br(e,t))return!1;var i=br(e,Fr);return!(r&&i&&e.indexOf(i)>e.indexOf(r))}function ep(n,r,e){if(!Z_(n))throw new Dt(Ht,"Unexpected parent node type "+n.nodeType);if(e&&e.parentNode!==n)throw new Dt(Lf,"child not in parent");if(!K_(r)||Fr(r)&&n.nodeType!==at.DOCUMENT_NODE)throw new Dt(Ht,"Unexpected node type "+r.nodeType+" for parent node type "+n.nodeType)}function tp(n,r,e){var t=n.childNodes||[],i=r.childNodes||[];if(r.nodeType===at.DOCUMENT_FRAGMENT_NODE){var s=i.filter(wr);if(s.length>1||br(i,hs))throw new Dt(Ht,"More than one element or text in fragment");if(s.length===1&&!Gl(n,e))throw new Dt(Ht,"Element in fragment can not be inserted before doctype")}if(wr(r)&&!Gl(n,e))throw new Dt(Ht,"Only one element can be added and only after doctype");if(Fr(r)){if(br(t,Fr))throw new Dt(Ht,"Only one doctype is allowed");var a=br(t,wr);if(e&&t.indexOf(a)<t.indexOf(e))throw new Dt(Ht,"Doctype can only be inserted before an element");if(!e&&a)throw new Dt(Ht,"Doctype can not be appended since element is present")}}function Uf(n,r,e){var t=n.childNodes||[],i=r.childNodes||[];if(r.nodeType===at.DOCUMENT_FRAGMENT_NODE){var s=i.filter(wr);if(s.length>1||br(i,hs))throw new Dt(Ht,"More than one element or text in fragment");if(s.length===1&&!Wl(n,e))throw new Dt(Ht,"Element in fragment can not be inserted before doctype")}if(wr(r)&&!Wl(n,e))throw new Dt(Ht,"Only one element can be added and only after doctype");if(Fr(r)){if(br(t,function(u){return Fr(u)&&u!==e}))throw new Dt(Ht,"Only one doctype is allowed");var a=br(t,wr);if(e&&t.indexOf(a)<t.indexOf(e))throw new Dt(Ht,"Doctype can only be inserted before an element")}}function ea(n,r,e,t){ep(n,r,e),n.nodeType===at.DOCUMENT_NODE&&(t||tp)(n,r,e);var i=r.parentNode;if(i&&i.removeChild(r),r.nodeType===Ir){var s=r.firstChild;if(s==null)return r;var a=r.lastChild}else s=a=r;var l=e?e.previousSibling:n.lastChild;s.previousSibling=l,a.nextSibling=e,l?l.nextSibling=s:n.firstChild=s,e==null?n.lastChild=a:e.previousSibling=a;do s.parentNode=n;while(s!==a&&(s=s.nextSibling));return ds(n.ownerDocument||n,n),r.nodeType==Ir&&(r.firstChild=r.lastChild=null),r}function rp(n,r){return r.parentNode&&r.parentNode.removeChild(r),r.parentNode=n,r.previousSibling=n.lastChild,r.nextSibling=null,r.previousSibling?r.previousSibling.nextSibling=r:n.firstChild=r,n.lastChild=r,ds(n.ownerDocument,n,r),r}oi.prototype={nodeName:"#document",nodeType:Ff,doctype:null,documentElement:null,_inc:1,insertBefore:function(n,r){if(n.nodeType==Ir){for(var e=n.firstChild;e;){var t=e.nextSibling;this.insertBefore(e,r),e=t}return n}return ea(this,n,r),n.ownerDocument=this,this.documentElement===null&&n.nodeType===sr&&(this.documentElement=n),n},removeChild:function(n){return this.documentElement==n&&(this.documentElement=null),Pf(this,n)},replaceChild:function(n,r){ea(this,n,r,Uf),n.ownerDocument=this,r&&this.removeChild(r),wr(n)&&(this.documentElement=n)},importNode:function(n,r){return zf(this,n,r)},getElementById:function(n){var r=null;return ni(this.documentElement,function(e){if(e.nodeType==sr&&e.getAttribute("id")==n)return r=e,!0}),r},getElementsByClassName:function(n){var r=Vl(n);return new Rn(this,function(e){var t=[];return r.length>0&&ni(e.documentElement,function(i){if(i!==e&&i.nodeType===sr){var s=i.getAttribute("class");if(s){var a=n===s;if(!a){var l=Vl(s);a=r.every(W_(l))}a&&t.push(i)}}}),t})},createElement:function(n){var r=new on;r.ownerDocument=this,r.nodeName=n,r.tagName=n,r.localName=n,r.childNodes=new Nr;var e=r.attributes=new Ki;return e._ownerElement=r,r},createDocumentFragment:function(){var n=new fa;return n.ownerDocument=this,n.childNodes=new Nr,n},createTextNode:function(n){var r=new _s;return r.ownerDocument=this,r.appendData(n),r},createComment:function(n){var r=new ps;return r.ownerDocument=this,r.appendData(n),r},createCDATASection:function(n){var r=new gs;return r.ownerDocument=this,r.appendData(n),r},createProcessingInstruction:function(n,r){var e=new vs;return e.ownerDocument=this,e.tagName=e.nodeName=e.target=n,e.nodeValue=e.data=r,e},createAttribute:function(n){var r=new ta;return r.ownerDocument=this,r.name=n,r.nodeName=n,r.localName=n,r.specified=!0,r},createEntityReference:function(n){var r=new ms;return r.ownerDocument=this,r.nodeName=n,r},createElementNS:function(n,r){var e=new on,t=r.split(":"),i=e.attributes=new Ki;return e.childNodes=new Nr,e.ownerDocument=this,e.nodeName=r,e.tagName=r,e.namespaceURI=n,t.length==2?(e.prefix=t[0],e.localName=t[1]):e.localName=r,i._ownerElement=e,e},createAttributeNS:function(n,r){var e=new ta,t=r.split(":");return e.ownerDocument=this,e.nodeName=r,e.name=r,e.namespaceURI=n,e.specified=!0,t.length==2?(e.prefix=t[0],e.localName=t[1]):e.localName=r,e}};Gt(oi,at);function on(){this._nsMap={}}on.prototype={nodeType:sr,hasAttribute:function(n){return this.getAttributeNode(n)!=null},getAttribute:function(n){var r=this.getAttributeNode(n);return r&&r.value||""},getAttributeNode:function(n){return this.attributes.getNamedItem(n)},setAttribute:function(n,r){var e=this.ownerDocument.createAttribute(n);e.value=e.nodeValue=""+r,this.setAttributeNode(e)},removeAttribute:function(n){var r=this.getAttributeNode(n);r&&this.removeAttributeNode(r)},appendChild:function(n){return n.nodeType===Ir?this.insertBefore(n,null):rp(this,n)},setAttributeNode:function(n){return this.attributes.setNamedItem(n)},setAttributeNodeNS:function(n){return this.attributes.setNamedItemNS(n)},removeAttributeNode:function(n){return this.attributes.removeNamedItem(n.nodeName)},removeAttributeNS:function(n,r){var e=this.getAttributeNodeNS(n,r);e&&this.removeAttributeNode(e)},hasAttributeNS:function(n,r){return this.getAttributeNodeNS(n,r)!=null},getAttributeNS:function(n,r){var e=this.getAttributeNodeNS(n,r);return e&&e.value||""},setAttributeNS:function(n,r,e){var t=this.ownerDocument.createAttributeNS(n,r);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},getAttributeNodeNS:function(n,r){return this.attributes.getNamedItemNS(n,r)},getElementsByTagName:function(n){return new Rn(this,function(r){var e=[];return ni(r,function(t){t!==r&&t.nodeType==sr&&(n==="*"||t.tagName==n)&&e.push(t)}),e})},getElementsByTagNameNS:function(n,r){return new Rn(this,function(e){var t=[];return ni(e,function(i){i!==e&&i.nodeType===sr&&(n==="*"||i.namespaceURI===n)&&(r==="*"||i.localName==r)&&t.push(i)}),t})}};oi.prototype.getElementsByTagName=on.prototype.getElementsByTagName;oi.prototype.getElementsByTagNameNS=on.prototype.getElementsByTagNameNS;Gt(on,at);function ta(){}ta.prototype.nodeType=Sn;Gt(ta,at);function fi(){}fi.prototype={data:"",substringData:function(n,r){return this.data.substring(n,n+r)},appendData:function(n){n=this.data+n,this.nodeValue=this.data=n,this.length=n.length},insertData:function(n,r){this.replaceData(n,0,r)},appendChild:function(n){throw new Error(Lt[Ht])},deleteData:function(n,r){this.replaceData(n,r,"")},replaceData:function(n,r,e){var t=this.data.substring(0,n),i=this.data.substring(n+r);e=t+e+i,this.nodeValue=this.data=e,this.length=e.length}};Gt(fi,at);function _s(){}_s.prototype={nodeName:"#text",nodeType:Zi,splitText:function(n){var r=this.data,e=r.substring(n);r=r.substring(0,n),this.data=this.nodeValue=r,this.length=r.length;var t=this.ownerDocument.createTextNode(e);return this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling),t}};Gt(_s,fi);function ps(){}ps.prototype={nodeName:"#comment",nodeType:If};Gt(ps,fi);function gs(){}gs.prototype={nodeName:"#cdata-section",nodeType:Nf};Gt(gs,fi);function oa(){}oa.prototype.nodeType=Of;Gt(oa,at);function xf(){}xf.prototype.nodeType=Y_;Gt(xf,at);function $f(){}$f.prototype.nodeType=Q_;Gt($f,at);function ms(){}ms.prototype.nodeType=Sf;Gt(ms,at);function fa(){}fa.prototype.nodeName="#document-fragment";fa.prototype.nodeType=Ir;Gt(fa,at);function vs(){}vs.prototype.nodeType=Rf;Gt(vs,at);function Vf(){}Vf.prototype.serializeToString=function(n,r,e){return Hf.call(n,r,e)};at.prototype.toString=Hf;function Hf(n,r){var e=[],t=this.nodeType==9&&this.documentElement||this,i=t.prefix,s=t.namespaceURI;if(s&&i==null){var i=t.lookupPrefix(s);if(i==null)var a=[{namespace:s,prefix:null}]}return An(this,e,n,r,a),e.join("")}function Ql(n,r,e){var t=n.prefix||"",i=n.namespaceURI;if(!i||t==="xml"&&i===ri.XML||i===ri.XMLNS)return!1;for(var s=e.length;s--;){var a=e[s];if(a.prefix===t)return a.namespace!==i}return!0}function Sa(n,r,e){n.push(" ",r,'="',e.replace(/[<>&"\t\n\r]/g,Mf),'"')}function An(n,r,e,t,i){if(i||(i=[]),t)if(n=t(n),n){if(typeof n=="string"){r.push(n);return}}else return;switch(n.nodeType){case sr:var s=n.attributes,a=s.length,R=n.firstChild,l=n.tagName;e=ri.isHTML(n.namespaceURI)||e;var u=l;if(!e&&!n.prefix&&n.namespaceURI){for(var o,f=0;f<s.length;f++)if(s.item(f).name==="xmlns"){o=s.item(f).value;break}if(!o)for(var c=i.length-1;c>=0;c--){var d=i[c];if(d.prefix===""&&d.namespace===n.namespaceURI){o=d.namespace;break}}if(o!==n.namespaceURI)for(var c=i.length-1;c>=0;c--){var d=i[c];if(d.namespace===n.namespaceURI){d.prefix&&(u=d.prefix+":"+l);break}}}r.push("<",u);for(var _=0;_<a;_++){var m=s.item(_);m.prefix=="xmlns"?i.push({prefix:m.localName,namespace:m.value}):m.nodeName=="xmlns"&&i.push({prefix:"",namespace:m.value})}for(var _=0;_<a;_++){var m=s.item(_);if(Ql(m,e,i)){var N=m.prefix||"",w=m.namespaceURI;Sa(r,N?"xmlns:"+N:"xmlns",w),i.push({prefix:N,namespace:w})}An(m,r,e,t,i)}if(l===u&&Ql(n,e,i)){var N=n.prefix||"",w=n.namespaceURI;Sa(r,N?"xmlns:"+N:"xmlns",w),i.push({prefix:N,namespace:w})}if(R||e&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(r.push(">"),e&&/^script$/i.test(l))for(;R;)R.data?r.push(R.data):An(R,r,e,t,i.slice()),R=R.nextSibling;else for(;R;)An(R,r,e,t,i.slice()),R=R.nextSibling;r.push("</",u,">")}else r.push("/>");return;case Ff:case Ir:for(var R=n.firstChild;R;)An(R,r,e,t,i.slice()),R=R.nextSibling;return;case Sn:return Sa(r,n.name,n.value);case Zi:return r.push(n.data.replace(/[<&>]/g,Mf));case Nf:return r.push("<![CDATA[",n.data,"]]>");case If:return r.push("<!--",n.data,"-->");case Of:var j=n.publicId,T=n.systemId;if(r.push("<!DOCTYPE ",n.name),j)r.push(" PUBLIC ",j),T&&T!="."&&r.push(" ",T),r.push(">");else if(T&&T!=".")r.push(" SYSTEM ",T,">");else{var S=n.internalSubset;S&&r.push(" [",S,"]"),r.push(">")}return;case Rf:return r.push("<?",n.target," ",n.data,"?>");case Sf:return r.push("&",n.nodeName,";");default:r.push("??",n.nodeName)}}function zf(n,r,e){var t;switch(r.nodeType){case sr:t=r.cloneNode(!1),t.ownerDocument=n;case Ir:break;case Sn:e=!0;break}if(t||(t=r.cloneNode(!1)),t.ownerDocument=n,t.parentNode=null,e)for(var i=r.firstChild;i;)t.appendChild(zf(n,i,e)),i=i.nextSibling;return t}function Ya(n,r,e){var t=new r.constructor;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var s=r[i];typeof s!="object"&&s!=t[i]&&(t[i]=s)}switch(r.childNodes&&(t.childNodes=new Nr),t.ownerDocument=n,t.nodeType){case sr:var a=r.attributes,l=t.attributes=new Ki,u=a.length;l._ownerElement=t;for(var o=0;o<u;o++)t.setAttributeNode(Ya(n,a.item(o),!0));break;case Sn:e=!0}if(e)for(var f=r.firstChild;f;)t.appendChild(Ya(n,f,e)),f=f.nextSibling;return t}function Xf(n,r,e){n[r]=e}try{if(Object.defineProperty){let n=function(r){switch(r.nodeType){case sr:case Ir:var e=[];for(r=r.firstChild;r;)r.nodeType!==7&&r.nodeType!==8&&e.push(n(r)),r=r.nextSibling;return e.join("");default:return r.nodeValue}};Object.defineProperty(Rn.prototype,"length",{get:function(){return cs(this),this.$$length}}),Object.defineProperty(at.prototype,"textContent",{get:function(){return n(this)},set:function(r){switch(this.nodeType){case sr:case Ir:for(;this.firstChild;)this.removeChild(this.firstChild);(r||String(r))&&this.appendChild(this.ownerDocument.createTextNode(r));break;default:this.data=r,this.value=r,this.nodeValue=r}}}),Xf=function(r,e,t){r["$$"+e]=t}}}catch{}zr.DocumentType=oa;zr.DOMException=Dt;zr.DOMImplementation=qf;zr.Element=on;zr.Node=at;zr.NodeList=Nr;zr.XMLSerializer=Vf;var ca={},Gf={};(function(n){var r=Br.freeze;n.XML_ENTITIES=r({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),n.HTML_ENTITIES=r({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),n.entityMap=n.HTML_ENTITIES})(Gf);var bs={},ii=Br.NAMESPACE,Ja=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Yl=new RegExp("[\\-\\.0-9"+Ja.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Jl=new RegExp("^"+Ja.source+Yl.source+"*(?::"+Ja.source+Yl.source+"*)?$"),$n=0,qr=1,pn=2,Vn=3,gn=4,mn=5,Hn=6,qi=7;function In(n,r){this.message=n,this.locator=r,Error.captureStackTrace&&Error.captureStackTrace(this,In)}In.prototype=new Error;In.prototype.name=In.name;function Wf(){}Wf.prototype={parse:function(n,r,e){var t=this.domBuilder;t.startDocument(),Qf(r,r={}),np(n,r,e,t,this.errorHandler),t.endDocument()}};function np(n,r,e,t,i){function s(L){if(L>65535){L-=65536;var H=55296+(L>>10),le=56320+(L&1023);return String.fromCharCode(H,le)}else return String.fromCharCode(L)}function a(L){var H=L.slice(1,-1);return Object.hasOwnProperty.call(e,H)?e[H]:H.charAt(0)==="#"?s(parseInt(H.substr(1).replace("x","0x"))):(i.error("entity not found:"+L),L)}function l(L){if(L>N){var H=n.substring(N,L).replace(/&#?\w+;/g,a);d&&u(N),t.characters(H,0,L-N),N=L}}function u(L,H){for(;L>=f&&(H=c.exec(n));)o=H.index,f=o+H[0].length,d.lineNumber++;d.columnNumber=L-o+1}for(var o=0,f=0,c=/.*(?:\r\n?|\n)|.*$/g,d=t.locator,_=[{currentNSMap:r}],m={},N=0;;){try{var w=n.indexOf("<",N);if(w<0){if(!n.substr(N).match(/^\s*$/)){var R=t.doc,j=R.createTextNode(n.substr(N));R.appendChild(j),t.currentElement=j}return}switch(w>N&&l(w),n.charAt(w+1)){case"/":var b=n.indexOf(">",w+3),T=n.substring(w+2,b).replace(/[ \t\n\r]+$/g,""),S=_.pop();b<0?(T=n.substring(w+2).replace(/[\s<].*/,""),i.error("end tag name: "+T+" is not complete:"+S.tagName),b=w+1+T.length):T.match(/\s</)&&(T=T.replace(/[\s<].*/,""),i.error("end tag name: "+T+" maybe not complete"),b=w+1+T.length);var v=S.localNSMap,C=S.tagName==T,D=C||S.tagName&&S.tagName.toLowerCase()==T.toLowerCase();if(D){if(t.endElement(S.uri,S.localName,T),v)for(var P in v)Object.prototype.hasOwnProperty.call(v,P)&&t.endPrefixMapping(P);C||i.fatalError("end tag name: "+T+" is not match the current start tagName:"+S.tagName)}else _.push(S);b++;break;case"?":d&&u(w),b=up(n,w,t);break;case"!":d&&u(w),b=lp(n,w,t,i);break;default:d&&u(w);var B=new Yf,F=_[_.length-1].currentNSMap,b=ip(n,w,B,F,a,i),y=B.length;if(!B.closed&&sp(n,b,B.tagName,m)&&(B.closed=!0,e.nbsp||i.warning("unclosed xml attribute")),d&&y){for(var I=Zl(d,{}),k=0;k<y;k++){var V=B[k];u(V.offset),V.locator=Zl(d,{})}t.locator=I,Kl(B,t,F)&&_.push(B),t.locator=d}else Kl(B,t,F)&&_.push(B);ii.isHTML(B.uri)&&!B.closed?b=ap(n,b,B.tagName,a,t):b++}}catch(L){if(L instanceof In)throw L;i.error("element parse error: "+L),b=-1}b>N?N=b:l(Math.max(w,N)+1)}}function Zl(n,r){return r.lineNumber=n.lineNumber,r.columnNumber=n.columnNumber,r}function ip(n,r,e,t,i,s){function a(d,_,m){e.attributeNames.hasOwnProperty(d)&&s.fatalError("Attribute "+d+" redefined"),e.addValue(d,_.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,i),m)}for(var l,u,o=++r,f=$n;;){var c=n.charAt(o);switch(c){case"=":if(f===qr)l=n.slice(r,o),f=Vn;else if(f===pn)f=Vn;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(f===Vn||f===qr)if(f===qr&&(s.warning('attribute value must after "="'),l=n.slice(r,o)),r=o+1,o=n.indexOf(c,r),o>0)u=n.slice(r,o),a(l,u,r-1),f=mn;else throw new Error("attribute value no end '"+c+"' match");else if(f==gn)u=n.slice(r,o),a(l,u,r),s.warning('attribute "'+l+'" missed start quot('+c+")!!"),r=o+1,f=mn;else throw new Error('attribute value must after "="');break;case"/":switch(f){case $n:e.setTagName(n.slice(r,o));case mn:case Hn:case qi:f=qi,e.closed=!0;case gn:case qr:break;case pn:e.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),f==$n&&e.setTagName(n.slice(r,o)),o;case">":switch(f){case $n:e.setTagName(n.slice(r,o));case mn:case Hn:case qi:break;case gn:case qr:u=n.slice(r,o),u.slice(-1)==="/"&&(e.closed=!0,u=u.slice(0,-1));case pn:f===pn&&(u=l),f==gn?(s.warning('attribute "'+u+'" missed quot(")!'),a(l,u,r)):((!ii.isHTML(t[""])||!u.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+u+'" missed value!! "'+u+'" instead!!'),a(u,u,r));break;case Vn:throw new Error("attribute value missed!!")}return o;case"":c=" ";default:if(c<=" ")switch(f){case $n:e.setTagName(n.slice(r,o)),f=Hn;break;case qr:l=n.slice(r,o),f=pn;break;case gn:var u=n.slice(r,o);s.warning('attribute "'+u+'" missed quot(")!!'),a(l,u,r);case mn:f=Hn;break}else switch(f){case pn:e.tagName,(!ii.isHTML(t[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+l+'" missed value!! "'+l+'" instead2!!'),a(l,l,r),r=o,f=qr;break;case mn:s.warning('attribute space is required"'+l+'"!!');case Hn:f=qr,r=o;break;case Vn:f=gn,r=o;break;case qi:throw new Error("elements closed character '/' and '>' must be connected to")}}o++}}function Kl(n,r,e){for(var t=n.tagName,i=null,c=n.length;c--;){var s=n[c],a=s.qName,l=s.value,d=a.indexOf(":");if(d>0)var u=s.prefix=a.slice(0,d),o=a.slice(d+1),f=u==="xmlns"&&o;else o=a,u=null,f=a==="xmlns"&&"";s.localName=o,f!==!1&&(i==null&&(i={},Qf(e,e={})),e[f]=i[f]=l,s.uri=ii.XMLNS,r.startPrefixMapping(f,l))}for(var c=n.length;c--;){s=n[c];var u=s.prefix;u&&(u==="xml"&&(s.uri=ii.XML),u!=="xmlns"&&(s.uri=e[u||""]))}var d=t.indexOf(":");d>0?(u=n.prefix=t.slice(0,d),o=n.localName=t.slice(d+1)):(u=null,o=n.localName=t);var _=n.uri=e[u||""];if(r.startElement(_,o,t,n),n.closed){if(r.endElement(_,o,t),i)for(u in i)Object.prototype.hasOwnProperty.call(i,u)&&r.endPrefixMapping(u)}else return n.currentNSMap=e,n.localNSMap=i,!0}function ap(n,r,e,t,i){if(/^(?:script|textarea)$/i.test(e)){var s=n.indexOf("</"+e+">",r),a=n.substring(r+1,s);if(/[&<]/.test(a))return/^script$/i.test(e)?(i.characters(a,0,a.length),s):(a=a.replace(/&#?\w+;/g,t),i.characters(a,0,a.length),s)}return r+1}function sp(n,r,e,t){var i=t[e];return i==null&&(i=n.lastIndexOf("</"+e+">"),i<r&&(i=n.lastIndexOf("</"+e)),t[e]=i),i<r}function Qf(n,r){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(r[e]=n[e])}function lp(n,r,e,t){var i=n.charAt(r+2);switch(i){case"-":if(n.charAt(r+3)==="-"){var s=n.indexOf("-->",r+4);return s>r?(e.comment(n,r+4,s-r-4),s+3):(t.error("Unclosed comment"),-1)}else return-1;default:if(n.substr(r+3,6)=="CDATA["){var s=n.indexOf("]]>",r+9);return e.startCDATA(),e.characters(n,r+9,s-r-9),e.endCDATA(),s+3}var a=op(n,r),l=a.length;if(l>1&&/!doctype/i.test(a[0][0])){var u=a[1][0],o=!1,f=!1;l>3&&(/^public$/i.test(a[2][0])?(o=a[3][0],f=l>4&&a[4][0]):/^system$/i.test(a[2][0])&&(f=a[3][0]));var c=a[l-1];return e.startDTD(u,o,f),e.endDTD(),c.index+c[0].length}}return-1}function up(n,r,e){var t=n.indexOf("?>",r);if(t){var i=n.substring(r,t).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,e.processingInstruction(i[1],i[2]),t+2):-1}return-1}function Yf(){this.attributeNames={}}Yf.prototype={setTagName:function(n){if(!Jl.test(n))throw new Error("invalid tagName:"+n);this.tagName=n},addValue:function(n,r,e){if(!Jl.test(n))throw new Error("invalid attribute:"+n);this.attributeNames[n]=this.length,this[this.length++]={qName:n,value:r,offset:e}},length:0,getLocalName:function(n){return this[n].localName},getLocator:function(n){return this[n].locator},getQName:function(n){return this[n].qName},getURI:function(n){return this[n].uri},getValue:function(n){return this[n].value}};function op(n,r){var e,t=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=r,i.exec(n);e=i.exec(n);)if(t.push(e),e[1])return t}bs.XMLReader=Wf;bs.ParseError=In;var fp=Br,cp=zr,eu=Gf,Jf=bs,dp=cp.DOMImplementation,tu=fp.NAMESPACE,hp=Jf.ParseError,_p=Jf.XMLReader;function Zf(n){return n.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function Kf(n){this.options=n||{locator:{}}}Kf.prototype.parseFromString=function(n,r){var e=this.options,t=new _p,i=e.domBuilder||new ci,s=e.errorHandler,a=e.locator,l=e.xmlns||{},u=/\/x?html?$/.test(r),o=u?eu.HTML_ENTITIES:eu.XML_ENTITIES;a&&i.setDocumentLocator(a),t.errorHandler=pp(s,i,a),t.domBuilder=e.domBuilder||i,u&&(l[""]=tu.HTML),l.xml=l.xml||tu.XML;var f=e.normalizeLineEndings||Zf;return n&&typeof n=="string"?t.parse(f(n),l,o):t.errorHandler.error("invalid doc source"),i.doc};function pp(n,r,e){if(!n){if(r instanceof ci)return r;n=r}var t={},i=n instanceof Function;e=e||{};function s(a){var l=n[a];!l&&i&&(l=n.length==2?function(u){n(a,u)}:n),t[a]=l&&function(u){l("[xmldom "+a+"]	"+u+Za(e))}||function(){}}return s("warning"),s("error"),s("fatalError"),t}function ci(){this.cdata=!1}function vn(n,r){r.lineNumber=n.lineNumber,r.columnNumber=n.columnNumber}ci.prototype={startDocument:function(){this.doc=new dp().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(n,r,e,t){var i=this.doc,s=i.createElementNS(n,e||r),a=t.length;Mi(this,s),this.currentElement=s,this.locator&&vn(this.locator,s);for(var l=0;l<a;l++){var n=t.getURI(l),u=t.getValue(l),e=t.getQName(l),o=i.createAttributeNS(n,e);this.locator&&vn(t.getLocator(l),o),o.value=o.nodeValue=u,s.setAttributeNode(o)}},endElement:function(n,r,e){var t=this.currentElement;t.tagName,this.currentElement=t.parentNode},startPrefixMapping:function(n,r){},endPrefixMapping:function(n){},processingInstruction:function(n,r){var e=this.doc.createProcessingInstruction(n,r);this.locator&&vn(this.locator,e),Mi(this,e)},ignorableWhitespace:function(n,r,e){},characters:function(n,r,e){if(n=ru.apply(this,arguments),n){if(this.cdata)var t=this.doc.createCDATASection(n);else var t=this.doc.createTextNode(n);this.currentElement?this.currentElement.appendChild(t):/^\s*$/.test(n)&&this.doc.appendChild(t),this.locator&&vn(this.locator,t)}},skippedEntity:function(n){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(n){(this.locator=n)&&(n.lineNumber=0)},comment:function(n,r,e){n=ru.apply(this,arguments);var t=this.doc.createComment(n);this.locator&&vn(this.locator,t),Mi(this,t)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(n,r,e){var t=this.doc.implementation;if(t&&t.createDocumentType){var i=t.createDocumentType(n,r,e);this.locator&&vn(this.locator,i),Mi(this,i),this.doc.doctype=i}},warning:function(n){console.warn("[xmldom warning]	"+n,Za(this.locator))},error:function(n){console.error("[xmldom error]	"+n,Za(this.locator))},fatalError:function(n){throw new hp(n,this.locator)}};function Za(n){if(n)return`
@`+(n.systemId||"")+"#[line:"+n.lineNumber+",col:"+n.columnNumber+"]"}function ru(n,r,e){return typeof n=="string"?n.substr(r,e):n.length>=r+e||r?new java.lang.String(n,r,e)+"":n}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(n){ci.prototype[n]=function(){return null}});function Mi(n,r){n.currentElement?n.currentElement.appendChild(r):n.doc.appendChild(r)}ca.__DOMHandler=ci;ca.normalizeLineEndings=Zf;ca.DOMParser=Kf;var nu=ca.DOMParser;function gp(n){return n=n.split(";")[0].trim(),new qt("http://www.w3.org/ns/iana/media-types/"+n+"#Resource")}function mp(n,r){n.callbacks={};for(var e=r.length-1;e>=0;e--)n.callbacks[r[e]]=[];n.addHook=function(t){n.callbacks[t]||(n.callbacks[t]=[])},n.addCallback=function(t,i){n.callbacks[t].push(i)},n.removeCallback=function(t,i){for(var s=0;s<n.callbacks[t].length;s++)if(n.callbacks[t][s].name===i)return n.callbacks[t].splice(s,1),!0;return!1},n.insertCallback=function(t,i){n.callbacks[t].unshift(i)},n.fireCallbacks=function(i,s){var a=[],l=[],u=n.callbacks[i].length,o,f;for(o=u-1;o>=0;o--)f=n.callbacks[i][o],f&&f.apply(n,s)&&a.push(f);for(o=a.length-1;o>=0;o--)l.push(a[o]);for(o=u;o<n.callbacks[i].length;o++)l.push(n.callbacks[i][o]);n.callbacks[i]=l}}function vp(n,r){r=r||{};var e=[];r&&r.selfClosing&&r.selfClosing.split(" ").forEach(function(i){e[i]=!0});var t=[];return r&&r.skipAttributes&&r.skipAttributes.split(" ").forEach(function(i){t[i]=!0}),ec(n,r,e,t)}function ec(n,r,e,t){var i,s="",a=[!1];if(typeof n.nodeType>"u")return s;if(n.nodeType===1){if(n.hasAttribute("class")&&r&&r.classWithChildText&&n.matches(r.classWithChildText.class))s+=n.querySelector(r.classWithChildText.element).textContent;else if(!(r&&r.skipNodeWithClass&&n.matches("."+r.skipNodeWithClass))){var l=n.nodeName.toLowerCase();s+="<"+l;var u=[];for(i=n.attributes.length-1;i>=0;i--){var o=n.attributes[i];if(!(t&&t.length>0&&t[o.name])&&!/^\d+$/.test(o.name)){if(o.name==="class"&&r&&r.replaceClassItemWith&&o.value.split(" ").indexOf(r.replaceClassItemWith.source)>-1){var f=new RegExp(r.replaceClassItemWith.source,"g");o.value=o.value.replace(f,r.replaceClassItemWith.target).trim()}o.name==="class"&&r&&r.skipClassWithValue&&r.skipClassWithValue===o.value||u.push(o.name+"='"+o.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;")+"'")}}if(u.length>0&&(r&&r.sortAttributes&&u.sort(function(d,_){return d.toLowerCase().localeCompare(_.toLowerCase())}),s+=" "+u.join(" ")),e&&e.ename)s+=" />";else{for(s+=">",s+=l==="html"?`
  `:"",a.push(l==="style"||l==="script"),i=0;i<n.childNodes.length;i++)s+=ec(n.childNodes[i]);a.pop(),s+=l==="body"?"</"+l+`>
`:"</"+l+">"}}}else if(n.nodeType===8)s+="<!--"+n.nodeValue+"-->";else if(n.nodeType===3||n.nodeType===4){var c=n.nodeValue.replace(/\n+$/,"");s+=a[a.length-1]?c:c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}else console.log("Warning; Cannot handle serialising nodes of type: "+n.nodeType),console.log(n);return s}function Ra(n,r,e,t){var i=function(u){return u.termType==="BlankNode"?null:u},s=function(u){var o=e.statementsMatching(u).map(function(f){return""+i(f.subject)+" "+i(f.predicate)+" "+i(f.object)}).concat(e.statementsMatching(void 0,void 0,u).map(function(f){return""+i(f.subject)+" "+i(f.predicate)+" "+i(f.object)}));return o.sort(),o.join(`
`)},a=Object.prototype.hasOwnProperty.call(e,"compareTerms")?e.compareTerms(n,r):n.compareTerm(r);return n.termType==="BlankNode"&&r.termType==="BlankNode"?a===0?0:s(n)>s(r)?1:s(n)<s(r)?-1:a:t&&n.uri&&r.uri?(t[n.uri]||n.uri).localeCompare(t[r.uri]||r.uri):a}function bp(n,r,e,t){return Ra(n.subject,r.subject,e,t)||Ra(n.predicate,r.predicate,e,t)||Ra(n.object,r.object,e,t)}function Tn(n,r){var e;if(r=r||{},typeof module<"u"&&module&&module.exports){var t=new nu().parseFromString(n,r.contentType||"application/xhtml+xml");return t}else typeof window<"u"&&window.DOMParser?e=new window.DOMParser:e=new nu;return e.parseFromString(n,"application/xml")}function wp(n,r){for(var e=0;e<n.length;e++)if(n[e].subject.equals(r.subject)&&n[e].predicate.equals(r.predicate)&&n[e].object.equals(r.object)&&n[e].why.equals(r.why)){n.splice(e,1);return}throw new Error("RDFArrayRemove: Array did not contain "+r+" "+r.why)}function tc(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ar;return{boolean:n.namedNode("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:n.namedNode("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:n.namedNode("http://www.w3.org/2001/XMLSchema#decimal"),double:n.namedNode("http://www.w3.org/2001/XMLSchema#double"),integer:n.namedNode("http://www.w3.org/2001/XMLSchema#integer"),langString:n.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:n.namedNode("http://www.w3.org/2001/XMLSchema#string")}}tc(ar);const iu={acl:"http://www.w3.org/ns/auth/acl#",arg:"http://www.w3.org/ns/pim/arg#",as:"https://www.w3.org/ns/activitystreams#",cal:"http://www.w3.org/2002/12/cal/ical#",cert:"http://www.w3.org/ns/auth/cert#",contact:"http://www.w3.org/2000/10/swap/pim/contact#",dc:"http://purl.org/dc/elements/1.1/",dct:"http://purl.org/dc/terms/",doap:"http://usefulinc.com/ns/doap#",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",gpx:"http://www.w3.org/ns/pim/gpx#",http:"http://www.w3.org/2007/ont/http#",httph:"http://www.w3.org/2007/ont/httph#",icalTZ:"http://www.w3.org/2002/12/cal/icaltzd#",ldp:"http://www.w3.org/ns/ldp#",link:"http://www.w3.org/2007/ont/link#",log:"http://www.w3.org/2000/10/swap/log#",meeting:"http://www.w3.org/ns/pim/meeting#",mo:"http://purl.org/ontology/mo/",org:"http://www.w3.org/ns/org#",owl:"http://www.w3.org/2002/07/owl#",pad:"http://www.w3.org/ns/pim/pad#",patch:"http://www.w3.org/ns/pim/patch#",prov:"http://www.w3.org/ns/prov#",qu:"http://www.w3.org/2000/10/swap/pim/qif#",trip:"http://www.w3.org/ns/pim/trip#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rss:"http://purl.org/rss/1.0/",sched:"http://www.w3.org/ns/pim/schedule#",schema:"http://schema.org/",sioc:"http://rdfs.org/sioc/ns#",solid:"http://www.w3.org/ns/solid/terms#",space:"http://www.w3.org/ns/pim/space#",stat:"http://www.w3.org/ns/posix/stat#",tab:"http://www.w3.org/2007/ont/link#",tabont:"http://www.w3.org/2007/ont/link#",ui:"http://www.w3.org/ns/ui#",vcard:"http://www.w3.org/2006/vcard/ns#",wf:"http://www.w3.org/2005/01/wf/flow#",xsd:"http://www.w3.org/2001/XMLSchema#",cco:"http://www.ontologyrepository.com/CommonCoreOntologies/",skos:"http://www.w3.org/2004/02/skos/core#",bookmark:"http://www.w3.org/2002/01/bookmark#",vann:"http://purl.org/vocab/vann/"};function yp(n={namedNode:r=>r}){const r={};for(const e in iu){const t=iu[e];r[e]=function(i=""){return n.namedNode(t+i)}}return r}var Dp=yp;const au=ua(Dp);var rc={exports:{}};(function(n){(function(r,e){n.exports?n.exports=e():r.ttl2jsonld=e()})(ss,function(){function r(i,s){function a(){this.constructor=i}a.prototype=s.prototype,i.prototype=new a}function e(i,s,a,l){this.message=i,this.expected=s,this.found=a,this.location=l,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,e)}r(e,Error),e.buildMessage=function(i,s){var a={literal:function(_){return'"'+u(_.text)+'"'},class:function(_){var m="",N;for(N=0;N<_.parts.length;N++)m+=_.parts[N]instanceof Array?o(_.parts[N][0])+"-"+o(_.parts[N][1]):o(_.parts[N]);return"["+(_.inverted?"^":"")+m+"]"},any:function(_){return"any character"},end:function(_){return"end of input"},other:function(_){return _.description}};function l(_){return _.charCodeAt(0).toString(16).toUpperCase()}function u(_){return _.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(m){return"\\x0"+l(m)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(m){return"\\x"+l(m)})}function o(_){return _.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(m){return"\\x0"+l(m)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(m){return"\\x"+l(m)})}function f(_){return a[_.type](_)}function c(_){var m=new Array(_.length),N,w;for(N=0;N<_.length;N++)m[N]=f(_[N]);if(m.sort(),m.length>0){for(N=1,w=1;N<m.length;N++)m[N-1]!==m[N]&&(m[w]=m[N],w++);m.length=w}switch(m.length){case 1:return m[0];case 2:return m[0]+" or "+m[1];default:return m.slice(0,-1).join(", ")+", or "+m[m.length-1]}}function d(_){return _?'"'+u(_)+'"':"end of input"}return"Expected "+c(i)+" but "+d(s)+" found."};function t(i,s){s=s!==void 0?s:{};var a={},l={turtleDoc:nl},u=nl,o=function(h){var E=rt.toJSON();return E["@graph"]=[],h.filter(O=>Array.isArray(O)).forEach(O=>{O.forEach($=>{E["@graph"].push($)})}),E["@graph"].length===1&&(Object.assign(E,E["@graph"][0]),delete E["@graph"]),E},f=".",c=Ge(".",!1),d=function(h){return h},_="#",m=Ge("#",!1),N=/^[^\n]/,w=lt([`
`],!0,!1),R=`
`,j=Ge(`
`,!1),T=function(h){return h.join("")},S="@prefix",v=Ge("@prefix",!1),C=function(h,E){return rt.addPrefix(h===""?"0":h,E),{}},D="@base",P=Ge("@base",!1),B=function(h){return rt.addBase(h),{}},F=/^[Bb]/,b=lt(["B","b"],!1,!1),y=/^[Aa]/,I=lt(["A","a"],!1,!1),k=/^[Ss]/,V=lt(["S","s"],!1,!1),L=/^[Ee]/,H=lt(["E","e"],!1,!1),le=/^[Pp]/,Y=lt(["P","p"],!1,!1),x=/^[Rr]/,U=lt(["R","r"],!1,!1),Q=/^[Ff]/,X=lt(["F","f"],!1,!1),ee=/^[Ii]/,Ce=lt(["I","i"],!1,!1),Se=/^[Xx]/,he=lt(["X","x"],!1,!1),pe=function(h,E){var O={};return typeof h=="string"&&h!=="[]"?O["@id"]=h:typeof h=="object"&&Object.assign(O,h),E&&Object.assign(O,E),[O]},ie=function(h,E){var O={};return h&&Object.assign(O,h),E&&Object.assign(O,E),[O]},De=";",Pe=Ge(";",!1),et=function(h,E,O,$){var G={};return G[O]=$,G},Be=function(h,E,O){return O},Z=function(h,E,O){var $={};return O.unshift(Nh(h,E)),O.forEach(G=>{G&&Object.keys(G).forEach(J=>{G[J].forEach(K=>{J==="@type"&&K["@id"]!==void 0&&(K=K["@id"]),$[J]===void 0?$[J]=K:Array.isArray($[J])?$[J].push(K):$[J]=[$[J],K]})})}),$},_e=",",Te=Ge(",",!1),xe=function(h,E){return E},je=function(h,E){return E.unshift(h),E},$e="a",Ke=Ge("a",!1),jt=function(){return"@type"},Pt=function(h){return Ca(h,!0)},nr=function(h){return Ca(h,!1)},st=function(h){return h==="[]"?{}:{"@id":h}},Ne=function(h){return{"@id":h}},qe="[",Qe=Ge("[",!1),St="]",Qt=Ge("]",!1),tt="(",wt=Ge("(",!1),Mn=")",Qr=Ge(")",!1),hn=function(h){return{"@list":h}},kr=function(h,E){return{"@value":h,"@language":E}},Bt="^^",vi=Ge("^^",!1),Yr=function(h,E){if(E==="http://www.w3.org/2001/XMLSchema#boolean"&&h==="true")return!0;if(E==="http://www.w3.org/2001/XMLSchema#boolean"&&h==="false")return!1;if(E==="http://www.w3.org/2001/XMLSchema#integer")return parseInt(h);if(E==="http://www.w3.org/2001/XMLSchema#double")return parseFloat(h);const O=rt.resolve(E,!0);if(O){const $=E.split(":")[0];if(O==="http://www.w3.org/2001/XMLSchema#boolean"&&h==="true")return rt.decrement($),!0;if(O==="http://www.w3.org/2001/XMLSchema#boolean"&&h==="false")return rt.decrement($),!1;if(O==="http://www.w3.org/2001/XMLSchema#integer")return rt.decrement($),parseInt(h);if(O==="http://www.w3.org/2001/XMLSchema#double")return rt.decrement($),parseFloat(h)}return{"@value":h,"@type":E}},_n="true",As=Ge("true",!1),Er=function(){return!0},jn="false",qc=Ge("false",!1),Mc=function(){return!1},jc=function(h){return h+":"},Pc="<",Uc=Ge("<",!1),Ts=/^[^\0- <>"{}|\^`\\]/,Cs=lt([["\0"," "],"<",">",'"',"{","}","|","^","`","\\"],!0,!1),xc=">",$c=Ge(">",!1),Vc=function(h){const E=h.map($=>65536<=$.codePointAt(0)&&$.codePointAt(0)<=983039?"a":$.length===1?$:$.length===6?String.fromCharCode("0x"+$.substring(2)):$.length===10?String.fromCodePoint("0x"+$.substring(2)):$).join("");if(E.match(/^[^\u0000-\u0020<>"{}|^`\\]*$/)){var O=h.join("");try{return rt.resolve(O)}catch{ba("Invalid IRIREF "+O)}}else ba("Invalid IRIREF "+h.join("")+" / "+E)},Ar=":",Tr=Ge(":",!1),Hc=function(h){return h=h||"0",rt.hasPrefix(h)===!1&&ba("undefined prefix "+h),h},zc=function(h){return h||""},Xc=function(h,E){return rt.increment(h),rt.resolve(h+":"+E)},Ns="_:",Gc=Ge("_:",!1),Ct=/^[0-9]/,Nt=lt([["0","9"]],!1,!1),Wc="@",Qc=Ge("@",!1),Ss=/^[a-zA-Z]/,Rs=lt([["a","z"],["A","Z"]],!1,!1),ga="-",ma=Ge("-",!1),bi=/^[a-zA-Z0-9]/,wi=lt([["a","z"],["A","Z"],["0","9"]],!1,!1),Is=function(h,E){return"-"+E.join("")},Yc=function(h,E){return h.join("")+E.join("")},yi=/^[+\-]/,Di=lt(["+","-"],!1,!1),Jc=function(h){return h.match(/^[0+][0-9]+$/)?{"@value":h,"@type":"http://www.w3.org/2001/XMLSchema#integer"}:parseInt(h)},Zc=function(h){return{"@value":h,"@type":"http://www.w3.org/2001/XMLSchema#decimal"}},Kc=function(h){return{"@value":h,"@type":"http://www.w3.org/2001/XMLSchema#double"}},ed=/^[eE]/,td=lt(["e","E"],!1,!1),ki='"',Ei=Ge('"',!1),Fs=/^[^"\\\n\r]/,Os=lt(['"',"\\",`
`,"\r"],!0,!1),Ai="'",Ti=Ge("'",!1),Ls=/^[^'\\\n\r]/,Bs=lt(["'","\\",`
`,"\r"],!0,!1),Ci="'''",qs=Ge("'''",!1),or=/^[^'\\]/,fr=lt(["'","\\"],!0,!1),Ni="''",Ms=Ge("''",!1),js=function(h,E){return"''"+E.join("")},Ps=function(h,E){return"'"+E.join("")},Us=function(h,E){return h.join("")+E.join("")},Si='"""',xs=Ge('"""',!1),cr=/^[^"\\]/,dr=lt(['"',"\\"],!0,!1),Ri='""',$s=Ge('""',!1),Vs=function(h,E){return'""'+E.join("")},Hs=function(h,E){return'"'+E.join("")},zs="\\U",rd=Ge("\\U",!1),nd=function(h){return String.fromCodePoint(parseInt(h.join(""),16))},Xs="\\u",id=Ge("\\u",!1),ad=function(h){return String.fromCharCode(parseInt(h.join(""),16))},Gs="\\t",sd=Ge("\\t",!1),ld=function(){return"	"},Ws="\\b",ud=Ge("\\b",!1),od=function(){return"\b"},Qs="\\n",fd=Ge("\\n",!1),cd=function(){return`
`},Ys="\\r",dd=Ge("\\r",!1),hd=function(){return"\r"},Js="\\f",_d=Ge("\\f",!1),pd=function(){return"\f"},Zs='\\"',gd=Ge('\\"',!1),md=function(){return'"'},Ks="\\'",vd=Ge("\\'",!1),bd=function(){return"'"},el="\\\\",wd=Ge("\\\\",!1),yd=function(){return"\\"},Dd=/^[ \t\r\n]/,kd=lt([" ","	","\r",`
`],!1,!1),Ed=function(){return"[]"},Ad=/^[\uD800-\uDBFF]/,Td=lt([["\uD800","\uDBFF"]],!1,!1),Cd=/^[\uDC00-\uDFFF]/,Nd=lt([["\uDC00","\uDFFF"]],!1,!1),Sd=function(h,E){return h+E},Rd=/^[A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Id=lt([["A","Z"],["a","z"],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],!1,!1),Fd="_",Od=Ge("_",!1),Ld="",Bd=Ge("",!1),qd=/^[\u0300-\u036F]/,Md=lt([["",""]],!1,!1),jd=/^[\u203F-\u2040]/,Pd=lt([["",""]],!1,!1),tl=function(h,E,O,$){return O.join("")+$.join("")},Ud=function(h,E,O){return h+E.join("")+O.join("")},xd="%",$d=Ge("%",!1),Vd=/^[0-9A-Fa-f]/,Hd=lt([["0","9"],["A","F"],["a","f"]],!1,!1),zd="\\",Xd=Ge("\\",!1),Gd=/^[_~.!$&'()*+,;=\/?#@%\-]/,Wd=lt(["_","~",".","!","$","&","'","(",")","*","+",",",";","=","/","?","#","@","%","-"],!1,!1),p=0,Re=0,Ii=[{line:1,column:1}],hr=0,va=[],Fi;if("startRule"in s){if(!(s.startRule in l))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');u=l[s.startRule]}function ba(h,E){throw E=E!==void 0?E:wa(Re,p),Yd(h,E)}function Ge(h,E){return{type:"literal",text:h,ignoreCase:E}}function lt(h,E,O){return{type:"class",parts:h,inverted:E,ignoreCase:O}}function Qd(){return{type:"end"}}function rl(h){var E=Ii[h],O;if(E)return E;for(O=h-1;!Ii[O];)O--;for(E=Ii[O],E={line:E.line,column:E.column};O<h;)i.charCodeAt(O)===10?(E.line++,E.column=1):E.column++,O++;return Ii[h]=E,E}function wa(h,E){var O=rl(h),$=rl(E);return{start:{offset:h,line:O.line,column:O.column},end:{offset:E,line:$.line,column:$.column}}}function ce(h){p<hr||(p>hr&&(hr=p,va=[]),va.push(h))}function Yd(h,E){return new e(h,null,null,E)}function Jd(h,E,O){return new e(e.buildMessage(h,E),h,E,O)}function nl(){var h,E,O,$;for(h=p,E=[],O=il();O!==a;)E.push(O),O=il();if(E!==a){for(O=[],$=Ie();$!==a;)O.push($),$=Ie();O!==a?(Re=h,E=o(E),h=E):(p=h,h=a)}else p=h,h=a;return h}function il(){var h,E,O,$;if(h=Kd(),h===a)if(h=p,E=ih(),E!==a){for(O=[],$=Ie();$!==a;)O.push($),$=Ie();O!==a?(i.charCodeAt(p)===46?($=f,p++):($=a,ce(c)),$!==a?(Re=h,E=d(E),h=E):(p=h,h=a)):(p=h,h=a)}else p=h,h=a;return h}function Zd(){var h,E,O,$;if(h=p,i.charCodeAt(p)===35?(E=_,p++):(E=a,ce(m)),E!==a){for(O=[],N.test(i.charAt(p))?($=i.charAt(p),p++):($=a,ce(w));$!==a;)O.push($),N.test(i.charAt(p))?($=i.charAt(p),p++):($=a,ce(w));O!==a?(i.charCodeAt(p)===10?($=R,p++):($=a,ce(j)),$!==a?(Re=h,E=T(O),h=E):(p=h,h=a)):(p=h,h=a)}else p=h,h=a;return h}function Ie(){var h;return h=Dh(),h===a&&(h=Zd()),h}function Kd(){var h;return h=eh(),h===a&&(h=th(),h===a&&(h=nh(),h===a&&(h=rh()))),h}function eh(){var h,E,O,$,G,J,K,W,Fe;for(h=p,E=[],O=Ie();O!==a;)E.push(O),O=Ie();if(E!==a)if(i.substr(p,7)===S?(O=S,p+=7):(O=a,ce(v)),O!==a){for($=[],G=Ie();G!==a;)$.push(G),G=Ie();if($!==a)if(G=ol(),G!==a){for(J=[],K=Ie();K!==a;)J.push(K),K=Ie();if(J!==a)if(K=Un(),K!==a){for(W=[],Fe=Ie();Fe!==a;)W.push(Fe),Fe=Ie();W!==a?(i.charCodeAt(p)===46?(Fe=f,p++):(Fe=a,ce(c)),Fe!==a?(Re=h,E=C(G,K),h=E):(p=h,h=a)):(p=h,h=a)}else p=h,h=a;else p=h,h=a}else p=h,h=a;else p=h,h=a}else p=h,h=a;else p=h,h=a;return h}function th(){var h,E,O,$,G,J,K;for(h=p,E=[],O=Ie();O!==a;)E.push(O),O=Ie();if(E!==a)if(i.substr(p,5)===D?(O=D,p+=5):(O=a,ce(P)),O!==a){for($=[],G=Ie();G!==a;)$.push(G),G=Ie();if($!==a)if(G=Un(),G!==a){for(J=[],K=Ie();K!==a;)J.push(K),K=Ie();J!==a?(i.charCodeAt(p)===46?(K=f,p++):(K=a,ce(c)),K!==a?(Re=h,E=B(G),h=E):(p=h,h=a)):(p=h,h=a)}else p=h,h=a;else p=h,h=a}else p=h,h=a;else p=h,h=a;return h}function rh(){var h,E,O,$,G,J,K,W;for(h=p,E=[],O=Ie();O!==a;)E.push(O),O=Ie();if(E!==a)if(F.test(i.charAt(p))?(O=i.charAt(p),p++):(O=a,ce(b)),O!==a)if(y.test(i.charAt(p))?($=i.charAt(p),p++):($=a,ce(I)),$!==a)if(k.test(i.charAt(p))?(G=i.charAt(p),p++):(G=a,ce(V)),G!==a)if(L.test(i.charAt(p))?(J=i.charAt(p),p++):(J=a,ce(H)),J!==a){for(K=[],W=Ie();W!==a;)K.push(W),W=Ie();K!==a?(W=Un(),W!==a?(Re=h,E=B(W),h=E):(p=h,h=a)):(p=h,h=a)}else p=h,h=a;else p=h,h=a;else p=h,h=a;else p=h,h=a;else p=h,h=a;return h}function nh(){var h,E,O,$,G,J,K,W,Fe,it,Zr,Kr;for(h=p,E=[],O=Ie();O!==a;)E.push(O),O=Ie();if(E!==a)if(le.test(i.charAt(p))?(O=i.charAt(p),p++):(O=a,ce(Y)),O!==a)if(x.test(i.charAt(p))?($=i.charAt(p),p++):($=a,ce(U)),$!==a)if(L.test(i.charAt(p))?(G=i.charAt(p),p++):(G=a,ce(H)),G!==a)if(Q.test(i.charAt(p))?(J=i.charAt(p),p++):(J=a,ce(X)),J!==a)if(ee.test(i.charAt(p))?(K=i.charAt(p),p++):(K=a,ce(Ce)),K!==a)if(Se.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(he)),W!==a){for(Fe=[],it=Ie();it!==a;)Fe.push(it),it=Ie();if(Fe!==a)if(it=ol(),it!==a){for(Zr=[],Kr=Ie();Kr!==a;)Zr.push(Kr),Kr=Ie();Zr!==a?(Kr=Un(),Kr!==a?(Re=h,E=C(it,Kr),h=E):(p=h,h=a)):(p=h,h=a)}else p=h,h=a;else p=h,h=a}else p=h,h=a;else p=h,h=a;else p=h,h=a;else p=h,h=a;else p=h,h=a;else p=h,h=a;else p=h,h=a;return h}function ih(){var h,E,O;return h=p,E=ah(),E!==a?(O=ya(),O!==a?(Re=h,E=pe(E,O),h=E):(p=h,h=a)):(p=h,h=a),h===a&&(h=p,E=al(),E!==a?(O=ya(),O===a&&(O=null),O!==a?(Re=h,E=ie(E,O),h=E):(p=h,h=a)):(p=h,h=a)),h}function ya(){var h,E,O,$,G,J,K,W,Fe,it;if(h=p,E=ka(),E!==a)if(O=Da(),O!==a){for($=[],G=p,J=[],K=Ie();K!==a;)J.push(K),K=Ie();for(J!==a?(i.charCodeAt(p)===59?(K=De,p++):(K=a,ce(Pe)),K!==a?(W=p,Fe=ka(),Fe!==a?(it=Da(),it!==a?(Re=W,Fe=et(E,O,Fe,it),W=Fe):(p=W,W=a)):(p=W,W=a),W===a&&(W=null),W!==a?(Re=G,J=Be(E,O,W),G=J):(p=G,G=a)):(p=G,G=a)):(p=G,G=a);G!==a;){for($.push(G),G=p,J=[],K=Ie();K!==a;)J.push(K),K=Ie();J!==a?(i.charCodeAt(p)===59?(K=De,p++):(K=a,ce(Pe)),K!==a?(W=p,Fe=ka(),Fe!==a?(it=Da(),it!==a?(Re=W,Fe=et(E,O,Fe,it),W=Fe):(p=W,W=a)):(p=W,W=a),W===a&&(W=null),W!==a?(Re=G,J=Be(E,O,W),G=J):(p=G,G=a)):(p=G,G=a)):(p=G,G=a)}$!==a?(Re=h,E=Z(E,O,$),h=E):(p=h,h=a)}else p=h,h=a;else p=h,h=a;return h}function Da(){var h,E,O,$,G,J,K;if(h=p,E=Pn(),E!==a){for(O=[],$=p,G=[],J=Ie();J!==a;)G.push(J),J=Ie();for(G!==a?(i.charCodeAt(p)===44?(J=_e,p++):(J=a,ce(Te)),J!==a?(K=Pn(),K!==a?(Re=$,G=xe(E,K),$=G):(p=$,$=a)):(p=$,$=a)):(p=$,$=a);$!==a;){for(O.push($),$=p,G=[],J=Ie();J!==a;)G.push(J),J=Ie();G!==a?(i.charCodeAt(p)===44?(J=_e,p++):(J=a,ce(Te)),J!==a?(K=Pn(),K!==a?(Re=$,G=xe(E,K),$=G):(p=$,$=a)):(p=$,$=a)):(p=$,$=a)}O!==a?(Re=h,E=je(E,O),h=E):(p=h,h=a)}else p=h,h=a;return h}function ka(){var h,E,O;if(h=p,E=sh(),E!==a&&(Re=h,E=d(E)),h=E,h===a){for(h=p,E=[],O=Ie();O!==a;)E.push(O),O=Ie();E!==a?(i.charCodeAt(p)===97?(O=$e,p++):(O=a,ce(Ke)),O!==a?(Re=h,E=jt(),h=E):(p=h,h=a)):(p=h,h=a)}return h}function ah(){var h,E;return h=p,E=sl(),E!==a&&(Re=h,E=Pt(E)),h=E,h===a&&(h=ll(),h===a&&(h=Oi())),h}function sh(){var h,E,O;for(h=p,E=[],O=Ie();O!==a;)E.push(O),O=Ie();return E!==a?(O=Oi(),O!==a?(Re=h,E=d(O),h=E):(p=h,h=a)):(p=h,h=a),h}function Pn(){var h,E;return h=lh(),h===a&&(h=p,E=sl(),E!==a&&(Re=h,E=nr(E)),h=E,h===a&&(h=p,E=ll(),E!==a&&(Re=h,E=st(E)),h=E,h===a&&(h=p,E=al(),E!==a&&(Re=h,E=d(E)),h=E,h===a&&(h=p,E=Oi(),E!==a&&(Re=h,E=Ne(E)),h=E)))),h}function lh(){var h;return h=oh(),h===a&&(h=uh(),h===a&&(h=fh())),h}function al(){var h,E,O,$,G,J;for(h=p,E=[],O=Ie();O!==a;)E.push(O),O=Ie();if(E!==a)if(i.charCodeAt(p)===91?(O=qe,p++):(O=a,ce(Qe)),O!==a)if($=ya(),$!==a){for(G=[],J=Ie();J!==a;)G.push(J),J=Ie();G!==a?(i.charCodeAt(p)===93?(J=St,p++):(J=a,ce(Qt)),J!==a?(Re=h,E=d($),h=E):(p=h,h=a)):(p=h,h=a)}else p=h,h=a;else p=h,h=a;else p=h,h=a;return h}function sl(){var h,E,O,$,G,J;for(h=p,E=[],O=Ie();O!==a;)E.push(O),O=Ie();if(E!==a)if(i.charCodeAt(p)===40?(O=tt,p++):(O=a,ce(wt)),O!==a){for($=[],G=Pn();G!==a;)$.push(G),G=Pn();if($!==a){for(G=[],J=Ie();J!==a;)G.push(J),J=Ie();G!==a?(i.charCodeAt(p)===41?(J=Mn,p++):(J=a,ce(Qr)),J!==a?(Re=h,E=hn($),h=E):(p=h,h=a)):(p=h,h=a)}else p=h,h=a}else p=h,h=a;else p=h,h=a;return h}function uh(){var h,E,O;for(h=p,E=[],O=Ie();O!==a;)E.push(O),O=Ie();return E!==a?(O=mh(),O===a&&(O=gh(),O===a&&(O=ph())),O!==a?(Re=h,E=d(O),h=E):(p=h,h=a)):(p=h,h=a),h}function oh(){var h,E,O,$,G,J,K;for(h=p,E=[],O=Ie();O!==a;)E.push(O),O=Ie();if(E!==a)if(O=Ea(),O!==a){for($=[],G=Ie();G!==a;)$.push(G),G=Ie();$!==a?(G=_h(),G!==a?(Re=h,E=kr(O,G),h=E):(p=h,h=a)):(p=h,h=a)}else p=h,h=a;else p=h,h=a;if(h===a){for(h=p,E=[],O=Ie();O!==a;)E.push(O),O=Ie();if(E!==a)if(O=Ea(),O!==a){for($=[],G=Ie();G!==a;)$.push(G),G=Ie();if($!==a)if(i.substr(p,2)===Bt?(G=Bt,p+=2):(G=a,ce(vi)),G!==a){for(J=[],K=Ie();K!==a;)J.push(K),K=Ie();J!==a?(K=Oi(),K!==a?(Re=h,E=Yr(O,K),h=E):(p=h,h=a)):(p=h,h=a)}else p=h,h=a;else p=h,h=a}else p=h,h=a;else p=h,h=a;if(h===a){for(h=p,E=[],O=Ie();O!==a;)E.push(O),O=Ie();E!==a?(O=Ea(),O!==a?(Re=h,E=d(O),h=E):(p=h,h=a)):(p=h,h=a)}}return h}function fh(){var h,E,O;for(h=p,E=[],O=Ie();O!==a;)E.push(O),O=Ie();if(E!==a?(i.substr(p,4)===_n?(O=_n,p+=4):(O=a,ce(As)),O!==a?(Re=h,E=Er(),h=E):(p=h,h=a)):(p=h,h=a),h===a){for(h=p,E=[],O=Ie();O!==a;)E.push(O),O=Ie();E!==a?(i.substr(p,5)===jn?(O=jn,p+=5):(O=a,ce(qc)),O!==a?(Re=h,E=Mc(),h=E):(p=h,h=a)):(p=h,h=a)}return h}function Ea(){var h,E,O;for(h=p,E=[],O=Ie();O!==a;)E.push(O),O=Ie();return E!==a?(O=wh(),O===a&&(O=yh(),O===a&&(O=bh(),O===a&&(O=vh()))),O!==a?(Re=h,E=d(O),h=E):(p=h,h=a)):(p=h,h=a),h}function Oi(){var h,E,O;for(h=p,E=[],O=Ie();O!==a;)E.push(O),O=Ie();if(E!==a?(O=Un(),O!==a?(Re=h,E=d(O),h=E):(p=h,h=a)):(p=h,h=a),h===a){for(h=p,E=[],O=Ie();O!==a;)E.push(O),O=Ie();E!==a?(O=ch(),O!==a?(Re=h,E=d(O),h=E):(p=h,h=a)):(p=h,h=a)}return h}function ch(){var h,E;return h=dh(),h===a&&(h=p,E=ul(),E!==a&&(Re=h,E=jc(E)),h=E),h}function ll(){var h,E,O;for(h=p,E=[],O=Ie();O!==a;)E.push(O),O=Ie();if(E!==a?(O=hh(),O!==a?(Re=h,E=d(O),h=E):(p=h,h=a)):(p=h,h=a),h===a){for(h=p,E=[],O=Ie();O!==a;)E.push(O),O=Ie();E!==a?(O=kh(),O!==a?(Re=h,E=d(O),h=E):(p=h,h=a)):(p=h,h=a)}return h}function Un(){var h,E,O,$;if(h=p,i.charCodeAt(p)===60?(E=Pc,p++):(E=a,ce(Uc)),E!==a){for(O=[],Ts.test(i.charAt(p))?($=i.charAt(p),p++):($=a,ce(Cs)),$===a&&($=ot());$!==a;)O.push($),Ts.test(i.charAt(p))?($=i.charAt(p),p++):($=a,ce(Cs)),$===a&&($=ot());O!==a?(i.charCodeAt(p)===62?($=xc,p++):($=a,ce($c)),$!==a?(Re=h,E=Vc(O),h=E):(p=h,h=a)):(p=h,h=a)}else p=h,h=a;return h}function ul(){var h,E,O;return h=p,E=cl(),E===a&&(E=null),E!==a?(i.charCodeAt(p)===58?(O=Ar,p++):(O=a,ce(Tr)),O!==a?(Re=h,E=Hc(E),h=E):(p=h,h=a)):(p=h,h=a),h}function ol(){var h,E,O;return h=p,E=cl(),E===a&&(E=null),E!==a?(i.charCodeAt(p)===58?(O=Ar,p++):(O=a,ce(Tr)),O!==a?(Re=h,E=zc(E),h=E):(p=h,h=a)):(p=h,h=a),h}function dh(){var h,E,O;return h=p,E=ul(),E!==a?(O=Eh(),O!==a?(Re=h,E=Xc(E,O),h=E):(p=h,h=a)):(p=h,h=a),h}function hh(){var h,E,O,$,G,J,K,W,Fe,it;if(h=p,E=p,i.substr(p,2)===Ns?(O=Ns,p+=2):(O=a,ce(Gc)),O!==a)if($=Ta(),$===a&&(Ct.test(i.charAt(p))?($=i.charAt(p),p++):($=a,ce(Nt))),$!==a){for(G=[],J=Rt();J!==a;)G.push(J),J=Rt();if(G!==a){if(J=[],K=p,W=[],i.charCodeAt(p)===46?(Fe=f,p++):(Fe=a,ce(c)),Fe!==a)for(;Fe!==a;)W.push(Fe),i.charCodeAt(p)===46?(Fe=f,p++):(Fe=a,ce(c));else W=a;if(W!==a){if(Fe=[],it=Rt(),it!==a)for(;it!==a;)Fe.push(it),it=Rt();else Fe=a;Fe!==a?(W=[W,Fe],K=W):(p=K,K=a)}else p=K,K=a;for(;K!==a;){if(J.push(K),K=p,W=[],i.charCodeAt(p)===46?(Fe=f,p++):(Fe=a,ce(c)),Fe!==a)for(;Fe!==a;)W.push(Fe),i.charCodeAt(p)===46?(Fe=f,p++):(Fe=a,ce(c));else W=a;if(W!==a){if(Fe=[],it=Rt(),it!==a)for(;it!==a;)Fe.push(it),it=Rt();else Fe=a;Fe!==a?(W=[W,Fe],K=W):(p=K,K=a)}else p=K,K=a}J!==a?(O=[O,$,G,J],E=O):(p=E,E=a)}else p=E,E=a}else p=E,E=a;else p=E,E=a;return E!==a?h=i.substring(h,p):h=E,h}function _h(){var h,E,O,$,G,J,K,W;if(h=p,i.charCodeAt(p)===64?(E=Wc,p++):(E=a,ce(Qc)),E!==a){if(O=[],Ss.test(i.charAt(p))?($=i.charAt(p),p++):($=a,ce(Rs)),$!==a)for(;$!==a;)O.push($),Ss.test(i.charAt(p))?($=i.charAt(p),p++):($=a,ce(Rs));else O=a;if(O!==a){if($=[],G=p,i.charCodeAt(p)===45?(J=ga,p++):(J=a,ce(ma)),J!==a){if(K=[],bi.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(wi)),W!==a)for(;W!==a;)K.push(W),bi.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(wi));else K=a;K!==a?(Re=G,J=Is(O,K),G=J):(p=G,G=a)}else p=G,G=a;for(;G!==a;)if($.push(G),G=p,i.charCodeAt(p)===45?(J=ga,p++):(J=a,ce(ma)),J!==a){if(K=[],bi.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(wi)),W!==a)for(;W!==a;)K.push(W),bi.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(wi));else K=a;K!==a?(Re=G,J=Is(O,K),G=J):(p=G,G=a)}else p=G,G=a;$!==a?(Re=h,E=Yc(O,$),h=E):(p=h,h=a)}else p=h,h=a}else p=h,h=a;return h}function ph(){var h,E,O,$,G,J;if(h=p,E=p,O=p,yi.test(i.charAt(p))?($=i.charAt(p),p++):($=a,ce(Di)),$===a&&($=null),$!==a){if(G=[],Ct.test(i.charAt(p))?(J=i.charAt(p),p++):(J=a,ce(Nt)),J!==a)for(;J!==a;)G.push(J),Ct.test(i.charAt(p))?(J=i.charAt(p),p++):(J=a,ce(Nt));else G=a;G!==a?($=[$,G],O=$):(p=O,O=a)}else p=O,O=a;return O!==a?E=i.substring(E,p):E=O,E!==a&&(Re=h,E=Jc(E)),h=E,h}function gh(){var h,E,O,$,G,J,K,W;if(h=p,E=p,O=p,yi.test(i.charAt(p))?($=i.charAt(p),p++):($=a,ce(Di)),$===a&&($=null),$!==a){for(G=[],Ct.test(i.charAt(p))?(J=i.charAt(p),p++):(J=a,ce(Nt));J!==a;)G.push(J),Ct.test(i.charAt(p))?(J=i.charAt(p),p++):(J=a,ce(Nt));if(G!==a)if(i.charCodeAt(p)===46?(J=f,p++):(J=a,ce(c)),J!==a){if(K=[],Ct.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(Nt)),W!==a)for(;W!==a;)K.push(W),Ct.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(Nt));else K=a;K!==a?($=[$,G,J,K],O=$):(p=O,O=a)}else p=O,O=a;else p=O,O=a}else p=O,O=a;return O!==a?E=i.substring(E,p):E=O,E!==a&&(Re=h,E=Zc(E)),h=E,h}function mh(){var h,E,O,$,G,J,K,W,Fe;if(h=p,E=p,O=p,yi.test(i.charAt(p))?($=i.charAt(p),p++):($=a,ce(Di)),$===a&&($=null),$!==a){if(G=p,J=[],Ct.test(i.charAt(p))?(K=i.charAt(p),p++):(K=a,ce(Nt)),K!==a)for(;K!==a;)J.push(K),Ct.test(i.charAt(p))?(K=i.charAt(p),p++):(K=a,ce(Nt));else J=a;if(J!==a)if(i.charCodeAt(p)===46?(K=f,p++):(K=a,ce(c)),K!==a){for(W=[],Ct.test(i.charAt(p))?(Fe=i.charAt(p),p++):(Fe=a,ce(Nt));Fe!==a;)W.push(Fe),Ct.test(i.charAt(p))?(Fe=i.charAt(p),p++):(Fe=a,ce(Nt));W!==a?(Fe=Aa(),Fe!==a?(J=[J,K,W,Fe],G=J):(p=G,G=a)):(p=G,G=a)}else p=G,G=a;else p=G,G=a;if(G===a){if(G=p,i.charCodeAt(p)===46?(J=f,p++):(J=a,ce(c)),J!==a){if(K=[],Ct.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(Nt)),W!==a)for(;W!==a;)K.push(W),Ct.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(Nt));else K=a;K!==a?(W=Aa(),W!==a?(J=[J,K,W],G=J):(p=G,G=a)):(p=G,G=a)}else p=G,G=a;if(G===a){if(G=p,J=[],Ct.test(i.charAt(p))?(K=i.charAt(p),p++):(K=a,ce(Nt)),K!==a)for(;K!==a;)J.push(K),Ct.test(i.charAt(p))?(K=i.charAt(p),p++):(K=a,ce(Nt));else J=a;J!==a?(K=Aa(),K!==a?(J=[J,K],G=J):(p=G,G=a)):(p=G,G=a)}}G!==a?($=[$,G],O=$):(p=O,O=a)}else p=O,O=a;return O!==a?E=i.substring(E,p):E=O,E!==a&&(Re=h,E=Kc(E)),h=E,h}function Aa(){var h,E,O,$,G,J;if(h=p,E=p,ed.test(i.charAt(p))?(O=i.charAt(p),p++):(O=a,ce(td)),O!==a)if(yi.test(i.charAt(p))?($=i.charAt(p),p++):($=a,ce(Di)),$===a&&($=null),$!==a){if(G=[],Ct.test(i.charAt(p))?(J=i.charAt(p),p++):(J=a,ce(Nt)),J!==a)for(;J!==a;)G.push(J),Ct.test(i.charAt(p))?(J=i.charAt(p),p++):(J=a,ce(Nt));else G=a;G!==a?(O=[O,$,G],E=O):(p=E,E=a)}else p=E,E=a;else p=E,E=a;return E!==a?h=i.substring(h,p):h=E,h}function vh(){var h,E,O,$;if(h=p,i.charCodeAt(p)===34?(E=ki,p++):(E=a,ce(Ei)),E!==a){for(O=[],Fs.test(i.charAt(p))?($=i.charAt(p),p++):($=a,ce(Os)),$===a&&($=ct(),$===a&&($=ot()));$!==a;)O.push($),Fs.test(i.charAt(p))?($=i.charAt(p),p++):($=a,ce(Os)),$===a&&($=ct(),$===a&&($=ot()));O!==a?(i.charCodeAt(p)===34?($=ki,p++):($=a,ce(Ei)),$!==a?(Re=h,E=T(O),h=E):(p=h,h=a)):(p=h,h=a)}else p=h,h=a;return h}function bh(){var h,E,O,$;if(h=p,i.charCodeAt(p)===39?(E=Ai,p++):(E=a,ce(Ti)),E!==a){for(O=[],Ls.test(i.charAt(p))?($=i.charAt(p),p++):($=a,ce(Bs)),$===a&&($=ct(),$===a&&($=ot()));$!==a;)O.push($),Ls.test(i.charAt(p))?($=i.charAt(p),p++):($=a,ce(Bs)),$===a&&($=ct(),$===a&&($=ot()));O!==a?(i.charCodeAt(p)===39?($=Ai,p++):($=a,ce(Ti)),$!==a?(Re=h,E=T(O),h=E):(p=h,h=a)):(p=h,h=a)}else p=h,h=a;return h}function wh(){var h,E,O,$,G,J,K,W;if(h=p,i.substr(p,3)===Ci?(E=Ci,p+=3):(E=a,ce(qs)),E!==a){for(O=[],or.test(i.charAt(p))?($=i.charAt(p),p++):($=a,ce(fr)),$===a&&($=ct(),$===a&&($=ot()));$!==a;)O.push($),or.test(i.charAt(p))?($=i.charAt(p),p++):($=a,ce(fr)),$===a&&($=ct(),$===a&&($=ot()));if(O!==a){if($=[],G=p,i.substr(p,2)===Ni?(J=Ni,p+=2):(J=a,ce(Ms)),J!==a){if(K=[],or.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(fr)),W===a&&(W=ct(),W===a&&(W=ot())),W!==a)for(;W!==a;)K.push(W),or.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(fr)),W===a&&(W=ct(),W===a&&(W=ot()));else K=a;K!==a?(Re=G,J=js(O,K),G=J):(p=G,G=a)}else p=G,G=a;if(G===a)if(G=p,i.charCodeAt(p)===39?(J=Ai,p++):(J=a,ce(Ti)),J!==a){if(K=[],or.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(fr)),W===a&&(W=ct(),W===a&&(W=ot())),W!==a)for(;W!==a;)K.push(W),or.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(fr)),W===a&&(W=ct(),W===a&&(W=ot()));else K=a;K!==a?(Re=G,J=Ps(O,K),G=J):(p=G,G=a)}else p=G,G=a;for(;G!==a;){if($.push(G),G=p,i.substr(p,2)===Ni?(J=Ni,p+=2):(J=a,ce(Ms)),J!==a){if(K=[],or.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(fr)),W===a&&(W=ct(),W===a&&(W=ot())),W!==a)for(;W!==a;)K.push(W),or.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(fr)),W===a&&(W=ct(),W===a&&(W=ot()));else K=a;K!==a?(Re=G,J=js(O,K),G=J):(p=G,G=a)}else p=G,G=a;if(G===a)if(G=p,i.charCodeAt(p)===39?(J=Ai,p++):(J=a,ce(Ti)),J!==a){if(K=[],or.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(fr)),W===a&&(W=ct(),W===a&&(W=ot())),W!==a)for(;W!==a;)K.push(W),or.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(fr)),W===a&&(W=ct(),W===a&&(W=ot()));else K=a;K!==a?(Re=G,J=Ps(O,K),G=J):(p=G,G=a)}else p=G,G=a}$!==a?(i.substr(p,3)===Ci?(G=Ci,p+=3):(G=a,ce(qs)),G!==a?(Re=h,E=Us(O,$),h=E):(p=h,h=a)):(p=h,h=a)}else p=h,h=a}else p=h,h=a;return h}function yh(){var h,E,O,$,G,J,K,W;if(h=p,i.substr(p,3)===Si?(E=Si,p+=3):(E=a,ce(xs)),E!==a){for(O=[],cr.test(i.charAt(p))?($=i.charAt(p),p++):($=a,ce(dr)),$===a&&($=ct(),$===a&&($=ot()));$!==a;)O.push($),cr.test(i.charAt(p))?($=i.charAt(p),p++):($=a,ce(dr)),$===a&&($=ct(),$===a&&($=ot()));if(O!==a){if($=[],G=p,i.substr(p,2)===Ri?(J=Ri,p+=2):(J=a,ce($s)),J!==a){if(K=[],cr.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(dr)),W===a&&(W=ct(),W===a&&(W=ot())),W!==a)for(;W!==a;)K.push(W),cr.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(dr)),W===a&&(W=ct(),W===a&&(W=ot()));else K=a;K!==a?(Re=G,J=Vs(O,K),G=J):(p=G,G=a)}else p=G,G=a;if(G===a)if(G=p,i.charCodeAt(p)===34?(J=ki,p++):(J=a,ce(Ei)),J!==a){if(K=[],cr.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(dr)),W===a&&(W=ct(),W===a&&(W=ot())),W!==a)for(;W!==a;)K.push(W),cr.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(dr)),W===a&&(W=ct(),W===a&&(W=ot()));else K=a;K!==a?(Re=G,J=Hs(O,K),G=J):(p=G,G=a)}else p=G,G=a;for(;G!==a;){if($.push(G),G=p,i.substr(p,2)===Ri?(J=Ri,p+=2):(J=a,ce($s)),J!==a){if(K=[],cr.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(dr)),W===a&&(W=ct(),W===a&&(W=ot())),W!==a)for(;W!==a;)K.push(W),cr.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(dr)),W===a&&(W=ct(),W===a&&(W=ot()));else K=a;K!==a?(Re=G,J=Vs(O,K),G=J):(p=G,G=a)}else p=G,G=a;if(G===a)if(G=p,i.charCodeAt(p)===34?(J=ki,p++):(J=a,ce(Ei)),J!==a){if(K=[],cr.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(dr)),W===a&&(W=ct(),W===a&&(W=ot())),W!==a)for(;W!==a;)K.push(W),cr.test(i.charAt(p))?(W=i.charAt(p),p++):(W=a,ce(dr)),W===a&&(W=ct(),W===a&&(W=ot()));else K=a;K!==a?(Re=G,J=Hs(O,K),G=J):(p=G,G=a)}else p=G,G=a}$!==a?(i.substr(p,3)===Si?(G=Si,p+=3):(G=a,ce(xs)),G!==a?(Re=h,E=Us(O,$),h=E):(p=h,h=a)):(p=h,h=a)}else p=h,h=a}else p=h,h=a;return h}function ot(){var h,E,O,$,G,J,K,W,Fe,it,Zr;return h=p,i.substr(p,2)===zs?(E=zs,p+=2):(E=a,ce(rd)),E!==a?(O=p,$=$t(),$!==a?(G=$t(),G!==a?(J=$t(),J!==a?(K=$t(),K!==a?(W=$t(),W!==a?(Fe=$t(),Fe!==a?(it=$t(),it!==a?(Zr=$t(),Zr!==a?($=[$,G,J,K,W,Fe,it,Zr],O=$):(p=O,O=a)):(p=O,O=a)):(p=O,O=a)):(p=O,O=a)):(p=O,O=a)):(p=O,O=a)):(p=O,O=a)):(p=O,O=a),O!==a?(Re=h,E=nd(O),h=E):(p=h,h=a)):(p=h,h=a),h===a&&(h=p,i.substr(p,2)===Xs?(E=Xs,p+=2):(E=a,ce(id)),E!==a?(O=p,$=$t(),$!==a?(G=$t(),G!==a?(J=$t(),J!==a?(K=$t(),K!==a?($=[$,G,J,K],O=$):(p=O,O=a)):(p=O,O=a)):(p=O,O=a)):(p=O,O=a),O!==a?(Re=h,E=ad(O),h=E):(p=h,h=a)):(p=h,h=a)),h}function ct(){var h,E;return h=p,i.substr(p,2)===Gs?(E=Gs,p+=2):(E=a,ce(sd)),E!==a&&(Re=h,E=ld()),h=E,h===a&&(h=p,i.substr(p,2)===Ws?(E=Ws,p+=2):(E=a,ce(ud)),E!==a&&(Re=h,E=od()),h=E,h===a&&(h=p,i.substr(p,2)===Qs?(E=Qs,p+=2):(E=a,ce(fd)),E!==a&&(Re=h,E=cd()),h=E,h===a&&(h=p,i.substr(p,2)===Ys?(E=Ys,p+=2):(E=a,ce(dd)),E!==a&&(Re=h,E=hd()),h=E,h===a&&(h=p,i.substr(p,2)===Js?(E=Js,p+=2):(E=a,ce(_d)),E!==a&&(Re=h,E=pd()),h=E,h===a&&(h=p,i.substr(p,2)===Zs?(E=Zs,p+=2):(E=a,ce(gd)),E!==a&&(Re=h,E=md()),h=E,h===a&&(h=p,i.substr(p,2)===Ks?(E=Ks,p+=2):(E=a,ce(vd)),E!==a&&(Re=h,E=bd()),h=E,h===a&&(h=p,i.substr(p,2)===el?(E=el,p+=2):(E=a,ce(wd)),E!==a&&(Re=h,E=yd()),h=E))))))),h}function Dh(){var h;return Dd.test(i.charAt(p))?(h=i.charAt(p),p++):(h=a,ce(kd)),h}function kh(){var h,E,O,$;if(h=p,i.charCodeAt(p)===91?(E=qe,p++):(E=a,ce(Qe)),E!==a){for(O=[],$=Ie();$!==a;)O.push($),$=Ie();O!==a?(i.charCodeAt(p)===93?($=St,p++):($=a,ce(Qt)),$!==a?(Re=h,E=Ed(),h=E):(p=h,h=a)):(p=h,h=a)}else p=h,h=a;return h}function fl(){var h,E,O;return h=p,Ad.test(i.charAt(p))?(E=i.charAt(p),p++):(E=a,ce(Td)),E!==a?(Cd.test(i.charAt(p))?(O=i.charAt(p),p++):(O=a,ce(Nd)),O!==a?(Re=h,E=Sd(E,O),h=E):(p=h,h=a)):(p=h,h=a),h===a&&(Rd.test(i.charAt(p))?(h=i.charAt(p),p++):(h=a,ce(Id))),h}function Ta(){var h;return h=fl(),h===a&&(i.charCodeAt(p)===95?(h=Fd,p++):(h=a,ce(Od))),h}function Rt(){var h;return h=Ta(),h===a&&(i.charCodeAt(p)===45?(h=ga,p++):(h=a,ce(ma)),h===a&&(Ct.test(i.charAt(p))?(h=i.charAt(p),p++):(h=a,ce(Nt)),h===a&&(i.charCodeAt(p)===183?(h=Ld,p++):(h=a,ce(Bd)),h===a&&(qd.test(i.charAt(p))?(h=i.charAt(p),p++):(h=a,ce(Md)),h===a&&(jd.test(i.charAt(p))?(h=i.charAt(p),p++):(h=a,ce(Pd))))))),h}function cl(){var h,E,O,$,G,J,K,W,Fe;if(h=p,E=p,O=fl(),O!==a){for($=[],G=Rt();G!==a;)$.push(G),G=Rt();if($!==a){if(G=[],J=p,K=[],i.charCodeAt(p)===46?(W=f,p++):(W=a,ce(c)),W!==a)for(;W!==a;)K.push(W),i.charCodeAt(p)===46?(W=f,p++):(W=a,ce(c));else K=a;if(K!==a){if(W=[],Fe=Rt(),Fe!==a)for(;Fe!==a;)W.push(Fe),Fe=Rt();else W=a;W!==a?(K=[K,W],J=K):(p=J,J=a)}else p=J,J=a;for(;J!==a;){if(G.push(J),J=p,K=[],i.charCodeAt(p)===46?(W=f,p++):(W=a,ce(c)),W!==a)for(;W!==a;)K.push(W),i.charCodeAt(p)===46?(W=f,p++):(W=a,ce(c));else K=a;if(K!==a){if(W=[],Fe=Rt(),Fe!==a)for(;Fe!==a;)W.push(Fe),Fe=Rt();else W=a;W!==a?(K=[K,W],J=K):(p=J,J=a)}else p=J,J=a}G!==a?(O=[O,$,G],E=O):(p=E,E=a)}else p=E,E=a}else p=E,E=a;return E!==a?h=i.substring(h,p):h=E,h}function Eh(){var h,E,O,$,G,J,K,W;if(h=p,E=Ta(),E===a&&(i.charCodeAt(p)===58?(E=Ar,p++):(E=a,ce(Tr)),E===a&&(Ct.test(i.charAt(p))?(E=i.charAt(p),p++):(E=a,ce(Nt)),E===a&&(E=Jr()))),E!==a){for(O=[],$=Rt(),$===a&&(i.charCodeAt(p)===58?($=Ar,p++):($=a,ce(Tr)),$===a&&($=Jr()));$!==a;)O.push($),$=Rt(),$===a&&(i.charCodeAt(p)===58?($=Ar,p++):($=a,ce(Tr)),$===a&&($=Jr()));if(O!==a){if($=[],G=p,J=[],i.charCodeAt(p)===46?(K=f,p++):(K=a,ce(c)),K!==a)for(;K!==a;)J.push(K),i.charCodeAt(p)===46?(K=f,p++):(K=a,ce(c));else J=a;if(J!==a){if(K=[],W=Rt(),W===a&&(i.charCodeAt(p)===58?(W=Ar,p++):(W=a,ce(Tr)),W===a&&(W=Jr())),W!==a)for(;W!==a;)K.push(W),W=Rt(),W===a&&(i.charCodeAt(p)===58?(W=Ar,p++):(W=a,ce(Tr)),W===a&&(W=Jr()));else K=a;K!==a?(Re=G,J=tl(E,O,J,K),G=J):(p=G,G=a)}else p=G,G=a;for(;G!==a;){if($.push(G),G=p,J=[],i.charCodeAt(p)===46?(K=f,p++):(K=a,ce(c)),K!==a)for(;K!==a;)J.push(K),i.charCodeAt(p)===46?(K=f,p++):(K=a,ce(c));else J=a;if(J!==a){if(K=[],W=Rt(),W===a&&(i.charCodeAt(p)===58?(W=Ar,p++):(W=a,ce(Tr)),W===a&&(W=Jr())),W!==a)for(;W!==a;)K.push(W),W=Rt(),W===a&&(i.charCodeAt(p)===58?(W=Ar,p++):(W=a,ce(Tr)),W===a&&(W=Jr()));else K=a;K!==a?(Re=G,J=tl(E,O,J,K),G=J):(p=G,G=a)}else p=G,G=a}$!==a?(Re=h,E=Ud(E,O,$),h=E):(p=h,h=a)}else p=h,h=a}else p=h,h=a;return h}function Jr(){var h;return h=Ah(),h===a&&(h=Th()),h}function Ah(){var h,E,O,$,G;return h=p,E=p,i.charCodeAt(p)===37?(O=xd,p++):(O=a,ce($d)),O!==a?($=$t(),$!==a?(G=$t(),G!==a?(O=[O,$,G],E=O):(p=E,E=a)):(p=E,E=a)):(p=E,E=a),E!==a?h=i.substring(h,p):h=E,h}function $t(){var h;return Vd.test(i.charAt(p))?(h=i.charAt(p),p++):(h=a,ce(Hd)),h}function Th(){var h,E,O;return h=p,i.charCodeAt(p)===92?(E=zd,p++):(E=a,ce(Xd)),E!==a?(Gd.test(i.charAt(p))?(O=i.charAt(p),p++):(O=a,ce(Wd)),O!==a?(Re=h,E=d(O),h=E):(p=h,h=a)):(p=h,h=a),h}var Ch=new Function("try {return this===window;}catch(e){ return false;}"),dl=Ch()?window.URL:e_.URL,hl=function(h){return h.match(/^[a-z](.*?):(.+?)/g)};function Nh(h,E){var O={};return O[h]=E,O}var rt={base:[],data:{},addBase:function(h){if(rt.base.length===0){rt.base.push(h);return}const E=rt.base[rt.base.length-1];E!==h&&rt.base.push(new dl(h,E).toString())},addPrefix:function(h,E){const O=rt.data[h];O===void 0?rt.data[h]=[{uri:E,count:0}]:O[O.length-1].uri!==E&&O.push({uri:E,count:0})},hasPrefix:function(h){return this.data[h]!==void 0},resolve:function(h,E){const O=Object.keys(rt.data).find(G=>h.indexOf(G+":")===0);if(O!==void 0){const G=rt.data[O];if(G.length===1&&E!==!0&&hl(G[0].uri))return h;const J=G[G.length-1].uri;return h.replace(O+":",J)}else{var $=rt.base.length===0?s.baseIRI:rt.base[rt.base.length-1];return!$||h.match(/^(http:|https:|urn:|file:)/)?h:h.indexOf("//")===0&&$?$.split("//")[0]+h:new dl(h,$).toString()}},increment:function(h){const E=rt.data[h];E!==void 0&&E[E.length-1].count++},decrement:function(h){const E=rt.data[h];E!==void 0&&E[E.length-1].count--},toJSON:function(){const h={};return rt.base.length>0&&(h["@context"]===void 0&&(h["@context"]={}),h["@context"]["@base"]=rt.base[0]),Object.keys(rt.data).forEach(E=>{const O=rt.data[E][0];O.uri==="http://www.w3.org/2001/XMLSchema#"&&O.count<1||hl(O.uri)&&(h["@context"]===void 0&&(h["@context"]={}),h["@context"][E]=O.uri)}),h}};function Ca(h,E){if(h["@list"]===void 0||!E&&!h["@list"].find(G=>G["@list"]!==void 0))return h;if(h["@list"].length===0)return{"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};var O={},$=null;return h["@list"].forEach(G=>{$===null?$=O:($["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={},$=$["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]),$["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"]=Ca(G,!0),$["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}),O}if(Fi=u(),Fi!==a&&p===i.length)return Fi;throw Fi!==a&&p<i.length&&ce(Qd()),Jd(va,hr<i.length?i.charAt(hr):null,hr<i.length?wa(hr,hr+1):wa(hr,hr))}return{SyntaxError:e,parse:t}})})(rc);var kp=rc.exports;function Ep(n){return new Ap(n)}var Ap=function(){function n(r){ht(this,n),ge(this,"_notQNameChars",`	\r
 !"#$%&'()*.,+/;<=>?@[\\]^\`{|}~`),ge(this,"_notNameChars",this._notQNameChars+":"),ge(this,"validPrefix",new RegExp(/^[a-zA-Z][a-zA-Z0-9]*$/)),ge(this,"forbidden1",new RegExp(/[\\"\b\f\r\v\t\n\u0080-\uffff]/gm)),ge(this,"forbidden3",new RegExp(/[\\"\b\f\r\v\u0080-\uffff]/gm)),this.flags="",this.base=null,this.prefixes=[],this.namespaces=[];var e=Object.keys(au());for(var t in e){var i=au()[e[t]](""),s=e[t];this.prefixes[i]=s,this.namespaces[s]=i}this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.suggestPrefix("xml","reserved:reservedForFutureUse"),this.namespacesUsed=[],this.keywords=["a"],this.prefixchars="abcdefghijklmnopqustuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",this.incoming=null,this.formulas=[],this.store=r,this.rdfFactory=r.rdfFactory||ar,this.xsd=tc(this.rdfFactory)}return dt(n,[{key:"setBase",value:function(e){return this.base=e,this}},{key:"setFlags",value:function(e){return this.flags=e||"",this}},{key:"toStr",value:function(e){var t=e.toNT();return e.termType==="Graph"&&(this.formulas[t]=e),t}},{key:"fromStr",value:function(e){if(e[0]==="{"){var t=this.formulas[e];return t||console.log("No formula object for "+e),t}return this.store.fromNT(e)}},{key:"setNamespaces",value:function(e){for(var t in e)this.setPrefix(t,e[t]);return this}},{key:"setPrefix",value:function(e,t){if(e.slice(0,7)!=="default"&&e.slice(0,2)!=="ns"&&!(!e||!t)){for(var i in this.prefixes)this.prefixes[i]==e&&delete this.prefixes[i];this.prefixes[t]=e,this.namespaces[e]=t}}},{key:"suggestPrefix",value:function(e,t){e.slice(0,7)!=="default"&&e.slice(0,2)!=="ns"&&(!e||!t||e in this.namespaces||t in this.prefixes||(this.prefixes[t]=e,this.namespaces[e]=t))}},{key:"suggestNamespaces",value:function(e){for(var t in e)this.suggestPrefix(t,e[t]);return this}},{key:"checkIntegrity",value:function(){var e,t;for(e in this.namespaces)if(this.prefixes[this.namespaces[e]]!==e)throw new Error("Serializer integity error 1: "+e+", "+this.namespaces[e]+", "+this.prefixes[this.namespaces[e]]+"!");for(t in this.prefixes)if(this.namespaces[this.prefixes[t]]!==t)throw new Error("Serializer integity error 2: "+t+", "+this.prefixs[t]+", "+this.namespaces[this.prefixes[t]]+"!")}},{key:"makeUpPrefix",value:function(e){var t=e;function i(o){return!this.validPrefix.test(o)||o==="ns"||o in this.namespaces?!1:(this.prefixes[e]=o,this.namespaces[o]=e,o)}var s=i.bind(this);"#/".indexOf(t[t.length-1])>=0&&(t=t.slice(0,-1));var a=t.lastIndexOf("/");a>=0&&(t=t.slice(a+1));for(var l=0;l<t.length&&this.prefixchars.indexOf(t[l]);)l++;if(t=t.slice(0,l),t.length<6&&s(t))return t;if(s(t.slice(0,3)))return t.slice(0,3);if(s(t.slice(0,2)))return t.slice(0,2);if(s(t.slice(0,4)))return t.slice(0,4);if(s(t.slice(0,1)))return t.slice(0,1);if(s(t.slice(0,5)))return t.slice(0,5);this.validPrefix.test(t)||(t="n");for(var u=0;;u++)if(s(t.slice(0,3)+u))return t.slice(0,3)+u}},{key:"rootSubjects",value:function(e){for(var t={},i={},s={},a=0;a<e.length;a++){var l=e[a],u=function(R){t.hasOwnProperty(R)||(t[R]=[]),t[R].push(l.subject)},o=[l.subject,l.predicate,l.object];o.map(function(w){w.termType==="BlankNode"?s[w.toNT()]=!0:w.termType==="Collection"&&w.elements.forEach(function(R){u(R)})}),u(e[a].object);var f=i[this.toStr(l.subject)];f||(f=[]),f.push(l),i[this.toStr(l.subject)]=f}var c=[];for(var d in i)if(i.hasOwnProperty(d)){var _=this.fromStr(d);if(_.termType!=="BlankNode"||!t[_]||t[_].length!==1){c.push(_);continue}}this.incoming=t;for(var m={},N=0;N<c.length;N++)m[c[N].toNT()]=!0;return{roots:c,subjects:i,rootsHash:m,incoming:t}}},{key:"toN3",value:function(e){return this.statementsToN3(e.statements)}},{key:"explicitURI",value:function(e){return this.flags.indexOf("r")<0&&this.base?e=Na(this.base,e):this.flags.indexOf("u")>=0?e=Cp(e):e=Tp(decodeURI(e)),"<"+e+">"}},{key:"statementsToNTriples",value:function(e){var t=e.slice();t.sort();for(var i="",s="http://www.w3.org/1999/02/22-rdf-syntax-ns#",a=this,l=this.store,u=this.rdfFactory,o=function _(m){if(m.termType!=="Collection")return a.atomicTermToN3(m);for(var N=m.elements,w=l.sym(s+"nill"),R=N.length-1;R>=0;R--){var j=u.blankNode();i+=_(j)+" "+_(l.sym(s+"first"))+" "+_(N[R])+`.
`,i+=_(j)+" "+_(l.sym(s+"rest"))+" "+_(w)+`.
`,w=j}return a.atomicTermToN3(w)},f=0;f<t.length;f++){var c=t[f],d="";d+=o(c.subject)+" ",d+=o(c.predicate)+" ",d+=o(c.object)+" ",this.flags.indexOf("q")>=0&&(d+=o(c.why)+" "),d+=`.
`,i+=d}return i}},{key:"statementsToN3",value:function(e){var t=4,i=80,s=this.store,a={"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":"aaa:00"},l=function(B,F){return bp(B,F,s,a)};e.sort(l),this.base&&!this.defaultNamespace&&(this.defaultNamespace=this.base+"#");var u={};this.flags.indexOf("s")<0&&(u["http://www.w3.org/2002/07/owl#sameAs"]="="),this.flags.indexOf("t")<0&&(u["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"]="a"),this.flags.indexOf("i")<0&&(u["http://www.w3.org/2000/10/swap/log#implies"]="=>");var o=function(B){for(var F="",b=0;b<B;b++)F+=" ";return F},f=function P(B){for(var F="",b=0;b<B.length;b++){var y=B[b],I=typeof y=="string"?y:P(y);if(b!==0){var k=F.slice(-1)||" ";I===","||I===";"||I==="."&&!"0123456789.:".includes(k)||(F+=" ")}F+=I}return F},c=function P(B,F){var b="",y=1e5;F===void 0&&(F=-1);for(var I=0;I<B.length;I++){var k=B[I];if(typeof k!="string"){var V=P(k,F+1);if(V.length<10*(i-t*F)&&V.indexOf('"""')<0){var L=f(k);L.length<i-t*F&&(k=L,V="")}V&&(y=1e4),b+=V}if(typeof k=="string"){if(k.length===1&&b.slice(-1)===`
`&&",.;".indexOf(k)>=0){b=b.slice(0,-1),k=="."&&"0123456789.:".includes(b.charAt(b.length-1))&&(b+=" ",y+=1),b+=k+`
`,y+=1;continue}if(y<t*F+4||y+k.length+1<i&&";.".indexOf(b[b.length-2])<0)b=b.slice(0,-1)+" "+k+`
`,y+=k.length+1;else{var H=o(t*F)+k;b+=H+`
`,y=H.length,F<0&&(b+=`
`,y=1e5)}}}return b};function d(P){for(var B=this.rootSubjects(P),F=B.roots,b=[],y=0;y<F.length;y++){var I=F[y];b.push(m(I,B))}return b}var _=d.bind(this);function m(P,B){return P.termType==="BlankNode"&&!B.incoming[P]?j(P,B,!0).concat(["."]):[S(P,B)].concat([w(P,B)]).concat(["."])}function N(P,B){var F=[],b=null,y=B.subjects[this.toStr(P)]||[];if(typeof y>"u")throw new Error("Cant find statements for "+P);for(var I=[],k=0;k<y.length;k++){var V=y[k];V.predicate.uri===b?I.push(","):(b&&(F=F.concat([I]).concat([";"]),I=[]),F.push(u[V.predicate.uri]?u[V.predicate.uri]:S(V.predicate,B))),b=V.predicate.uri,I.push(j(V.object,B))}return F=F.concat([I]),F}var w=N.bind(this);function R(P,B,F){return P.termType==="BlankNode"&&(F||B.rootsHash[P.toNT()]===void 0)?B.subjects[this.toStr(P)]?["[",w(P,B),"]"]:"[]":S(P,B)}var j=R.bind(this);function T(P,B){var F,b;switch(P.termType){case"Graph":return b=["{"],b=b.concat(_(P.statements)),b.concat(["}"]);case"Collection":for(b=["("],F=0;F<P.elements.length;F++)b.push([j(P.elements[F],B)]);return b.push(")"),b;default:return this.atomicTermToN3(P)}}n.prototype.termToN3=S;var S=T.bind(this);function v(){var P="";this.flags.indexOf("d")<0&&this.defaultNamespace&&(P+="@prefix : "+this.explicitURI(this.defaultNamespace)+`.
`);for(var B in this.prefixes)this.prefixes.hasOwnProperty(B)&&this.namespacesUsed[B]&&(P+="@prefix "+this.prefixes[B]+": "+this.explicitURI(B)+`.
`);return P+`
`}var C=v.bind(this),D=_(e);return C()+c(D)}},{key:"atomicTermToN3",value:function(e,t){switch(e.termType){case"BlankNode":case"Variable":return e.toNT();case"Literal":var i=e.value;if(typeof i!="string")throw new TypeError("Value of RDF literal node must be a string");if(e.datatype&&this.flags.indexOf("x")<0)switch(e.datatype.uri){case"http://www.w3.org/2001/XMLSchema#integer":return i;case"http://www.w3.org/2001/XMLSchema#decimal":return i.indexOf(".")<0&&(i+=".0"),i;case"http://www.w3.org/2001/XMLSchema#double":{var s=i.toLowerCase().indexOf("e")>0;return i.indexOf(".")<0&&!s&&(i+=".0"),s||(i+="e0"),i}case"http://www.w3.org/2001/XMLSchema#boolean":return e.value==="1"?"true":"false"}var a=this.stringToN3(e.value);return e.language?a+="@"+e.language:e.datatype.equals(this.xsd.string)||(a+="^^"+this.atomicTermToN3(e.datatype,t)),a;case"NamedNode":return this.symbolToN3(e);case"DefaultGraph":return"";default:throw new Error("Internal: atomicTermToN3 cannot handle "+e+" of termType: "+e.termType)}}},{key:"stringToN3",value:function(e,t){t||(t="e");var i="",s,a,l,u,o;for(e.length>20&&e.slice(-1)!=='"'&&t.indexOf("n")<0&&(e.indexOf(`
`)>0||e.indexOf('"')>0)?(u='"""',o=this.forbidden3):(u='"',o=this.forbidden1),s=0;s<e.length;){o.lastIndex=0;var f=o.exec(e.slice(s));if(f==null)break;a=s+o.lastIndex-1,i+=e.slice(s,a);var c=e[a];c==='"'&&u==='"""'&&e.slice(a,a+3)!=='"""'?i+=c:(l=`\b\f\r	\v
\\"`.indexOf(c),l>=0?i+="\\"+'bfrtvn\\"'[l]:t.indexOf("e")>=0?i+="\\u"+("000"+c.charCodeAt(0).toString(16).toLowerCase()).slice(-4):i+=c),s=a+1}return u+i+e.slice(s)+u}},{key:"symbolToN3",value:function(e){var t=e.uri,i=t.indexOf("#");if(i<0&&this.flags.indexOf("/")<0&&(i=t.lastIndexOf("/")),i>=0&&this.flags.indexOf("p")<0&&(t.indexOf("http")===0||t.indexOf("ws")===0||t.indexOf("file")===0)){for(var s=!0,a=i+1;a<t.length;a++)if(this._notNameChars.indexOf(t[a])>=0){s=!1;break}if(s){var l=t.slice(i+1),u=t.slice(0,i+1);if(this.defaultNamespace&&this.defaultNamespace===u&&this.flags.indexOf("d")<0)return this.flags.indexOf("k")>=0&&this.keyords.indexOf(l)<0?l:":"+l;var o=this.prefixes[u];if(o||(o=this.makeUpPrefix(u)),o)return this.namespacesUsed[u]=!0,o+":"+l}}return this.explicitURI(t)}},{key:"writeStore",value:function(e){var t=this.store,i=t.fetcher,s=i&&i.appNode,a=this.store.index[3];for(var l in a){var u=t.fromNT(l);s&&u.equals(s)||e(`
`+this.atomicTermToN3(u)+" "+this.atomicTermToN3(t.sym("http://www.w3.org/2000/10/swap/log#semantics"))+" { "+this.statementsToN3(t.statementsMatching(void 0,void 0,void 0,u))+` }.
`)}t.statementsMatching(void 0,t.sym("http://www.w3.org/2007/ont/link#requestedURI")).map(function(c){e(`
<`+c.object.value+`> log:metadata {
`);var d=t.statementsMatching(void 0,void 0,void 0,c.subject);e(this.statementsToN3(this.statementsToN3(d))),e(`}.
`)});var o=[];s&&o.push(s);var f=[];o.map(function(c){f=f.concat(t.statementsMatching(void 0,void 0,void 0,c))}),e(this.statementsToN3(f))}},{key:"statementsToXML",value:function(e){var t=4,i=80,s=[];s["http://www.w3.org/1999/02/22-rdf-syntax-ns#"]=!0;var a="http://www.w3.org/1999/02/22-rdf-syntax-ns#_",l=function(y){for(var I="",k=0;k<y;k++)I+=" ";return I},u=function b(y){for(var I="",k=0;k<y.length;k++){var V=y[k],L=typeof V=="string"?V:b(V);I+=L}return I},o=function b(y,I){var k="",V,L=1e5;I||(I=0);for(var H=0;H<y.length;H++){var le=y[H];if(typeof le!="string"){var Y=b(le,I+1);Y.length<10*(i-t*I)&&Y.indexOf('"""')<0&&(V=u(le),V.length<i-t*I&&(le="   "+V,Y="")),Y&&(L=1e4),k+=Y}typeof le=="string"&&(L<t*I+4?(k=k.slice(0,-1)+" "+le+`
`,L+=le.length+1):(V=l(t*I)+le,k+=V+`
`,L=V.length))}return k};function f(b){this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#");for(var y=this.rootSubjects(b),I=y.roots,k=[],V=0;V<I.length;V++){var L=I[V];k.push(w(L,y))}return k}var c=f.bind(this);function d(b){return typeof b>"u"?"@@@undefined@@@@":b.replace(/[&<"]/g,function(y){switch(y[0]){case"&":return"&amp;";case"<":return"&lt;";case'"':return"&quot;"}})}function _(b){return d(this.base?Na(this.base,b.uri):b.uri)}var m=_.bind(this);function N(b,y){var I=[],k,V,L,H,le=y.subjects[this.toStr(b)];if(typeof le>"u")return T(b,y);le.sort(function(ee,Ce){var Se=ee.predicate.uri,he=Ce.predicate.uri;if(Se.substring(0,a.length)===a||he.substring(0,a.length)===a)return Se.localeCompare(he);var pe=Se.substring(a.length),ie=he.substring(a.length),De=parseInt(pe,10),Pe=parseInt(ie,10);return isNaN(De)||isNaN(Pe)||De!==pe||Pe!==ie?Se.localeCompare(he):De-Pe});for(var Y=0;Y<le.length;Y++){if(L=le[Y],L.predicate.uri==="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"&&!k&&L.object.termType==="NamedNode"){k=L.object;continue}if(H=L.predicate,H.uri.substr(0,a.length)===a){var x=H.uri.substr(a.length),U=parseInt(x,10);x===U.toString()&&(H=this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#li"))}switch(V=v(H),L.object.termType){case"BlankNode":y.incoming[L.object].length===1?I=I.concat(["<"+V+' rdf:parseType="Resource">',w(L.object,y),"</"+V+">"]):I=I.concat(["<"+V+' rdf:nodeID="'+L.object.toNT().slice(2)+'"/>']);break;case"NamedNode":I=I.concat(["<"+V+' rdf:resource="'+m(L.object)+'"/>']);break;case"Literal":I=I.concat(["<"+V+(L.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+d(L.object.datatype.uri)+'"')+(L.object.language?' xml:lang="'+L.object.language+'"':"")+">"+d(L.object.value)+"</"+V+">"]);break;case"Collection":I=I.concat(["<"+V+' rdf:parseType="Collection">',R(L.object,y),"</"+V+">"]);break;default:throw new Error("Can't serialize object of type "+L.object.termType+" into XML")}}var Q=k?v(k):"rdf:Description",X="";return b.termType==="BlankNode"?(!y.incoming[b]||y.incoming[b].length!==1)&&(X=' rdf:nodeID="'+b.toNT().slice(2)+'"'):X=' rdf:about="'+m(b)+'"',["<"+Q+X+">"].concat([I]).concat(["</"+Q+">"])}var w=N.bind(this);function R(b,y){for(var I=[],k=0;k<b.elements.length;k++)I.push(w(b.elements[k],y));return I}function j(b,y){var I=[],k=y.subjects[this.toStr(b)];if(!k)return I;k.sort();for(var V=0;V<k.length;V++){var L=k[V];switch(L.object.termType){case"BlankNode":y.rootsHash[L.object.toNT()]?I=I.concat(["<"+v(L.predicate)+' rdf:nodeID="'+L.object.toNT().slice(2)+'">',"</"+v(L.predicate)+">"]):I=I.concat(["<"+v(L.predicate)+' rdf:parseType="Resource">',T(L.object,y),"</"+v(L.predicate)+">"]);break;case"NamedNode":I=I.concat(["<"+v(L.predicate)+' rdf:resource="'+m(L.object)+'"/>']);break;case"Literal":I=I.concat(["<"+v(L.predicate)+(L.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+d(L.object.datatype.value)+'"')+(L.object.language?' xml:lang="'+L.object.language+'"':"")+">"+d(L.object.value)+"</"+v(L.predicate)+">"]);break;case"Collection":I=I.concat(["<"+v(L.predicate)+' rdf:parseType="Collection">',R(L.object,y),"</"+v(L.predicate)+">"]);break;default:throw new Error("Can't serialize object of type "+L.object.termType+" into XML")}}return I}var T=j.bind(this);function S(b){var y=b.uri,I=y.indexOf("#");if(I<0&&this.flags.indexOf("/")<0&&(I=y.lastIndexOf("/")),I<0)throw new Error("Cannot make qname out of <"+y+">");for(var k=I+1;k<y.length;k++)if(this._notNameChars.indexOf(y[k])>=0)throw new Error('Invalid character "'+y[k]+'" cannot be in XML qname for URI: '+y);var V=y.slice(I+1),L=y.slice(0,I+1);if(this.defaultNamespace&&this.defaultNamespace===L&&this.flags.indexOf("d")<0)return V;var H=this.prefixes[L];return H||(H=this.makeUpPrefix(L)),s[L]=!0,H+":"+V}var v=S.bind(this),C=c(e),D="<rdf:RDF";this.defaultNamespace&&(D+=' xmlns="'+d(this.defaultNamespace)+'"');for(var P in s)if(s.hasOwnProperty(P)){var B=this.base&&this.flags.includes("z")?Na(this.base,P):P;D+=`
 xmlns:`+this.prefixes[P]+'="'+d(B)+'"'}D+=">";var F=[D,C,"</rdf:RDF>"];return o(F,-1)}},{key:"statementsToJsonld",value:function(e){var t=this.statementsToN3(e),i=kp.parse(t);return JSON.stringify(i,null,2)}}])}();function Tp(n){return encodeURI(n)}function Cp(n){for(var r="",e,t=0;t<n.length;t++)e=n.charCodeAt(t),e>65535?r+="\\U"+("00000000"+e.toString(16)).slice(-8):e>126?r+="\\u"+("0000"+e.toString(16)).slice(-4):r+=n[t];return r}function ai(n,r,e,t,i,s){e=e||(n==null?void 0:n.value);var a=s||{};t=t||nn;var l=void 0;try{var u=Ep(r);a.flags&&u.setFlags(a.flags);var o=r.statementsMatching(void 0,void 0,void 0,n);switch("namespaces"in r&&u.suggestNamespaces(r.namespaces),a.namespaces&&u.setNamespaces(a.namespaces),u.setBase(e),t){case ei:return l=u.statementsToXML(o),f(null,l);case hf:case y_:return l=u.statementsToN3(o),f(null,l);case nn:case A_:return u.setFlags("si"),l=u.statementsToN3(o),f(null,l);case D_:return u.setFlags("deinprstux"),l=u.statementsToNTriples(o),f(null,l);case Xa:return u.setFlags("si dr"),l=u.statementsToJsonld(o),f(null,l);case Wa:case Ga:return u.setFlags("deinprstux q"),l=u.statementsToNTriples(o),f(null,l);default:throw new Error("Serialize: Content-type "+t+" not supported for data write.")}}catch(c){if(i)return i(c,void 0);throw c}function f(c,d){if(i){i(c,d);return}else return d}}var Np=["blankNode","defaultGraph","literal","namedNode","quad","variable","supports"],ji={first:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",rest:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",nil:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};function nc(n,r,e){var t=[];return e.reduce(function(i,s,a,l){t.push(n.quad(i,n.namedNode(ji.first),l[a]));var u;return a<l.length-1?(u=n.blankNode(),t.push(n.quad(i,n.namedNode(ji.rest),u))):t.push(n.quad(i,n.namedNode(ji.rest),n.namedNode(ji.nil))),u},r),t}function er(n,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=n.length;for(e<0&&(e=t+e);e<t;e++)if(n[e]===r)return e;return-1}function Sp(n,r){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=Rp(n))||r){e&&(n=e);var t=0,i=function(){};return{s:i,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(o){throw o},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){e=e.call(n)},n:function(){var o=e.next();return s=o.done,o},e:function(o){a=!0,l=o},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(a)throw l}}}}function Rp(n,r){if(n){if(typeof n=="string")return su(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return su(n,r)}}function su(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}function Ip(n,r,e){return r=At(r),Lr(n,ic()?Reflect.construct(r,e||[],At(n).constructor):r.apply(n,e))}function ic(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ic=function(){return!!n})()}var ac=function(n){function r(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};ht(this,r),e=Ip(this,r,[""]),e.statements=t,e.constraints=i,e.initBindings=s,e.optional=a,ge(e,"termType",li),ge(e,"classOrder",mr.Graph),ge(e,"fetcher",void 0),ge(e,"isVar",0),ge(e,"ns",Ut),ge(e,"rdfFactory",void 0),e.rdfFactory=l&&l.rdfFactory||ar;var u=Sp(Np),o;try{var f=function(){var d=o.value;e[d]=function(){var _;return(_=e.rdfFactory)[d].apply(_,arguments)}};for(u.s();!(o=u.n()).done;)f()}catch(c){u.e(c)}finally{u.f()}return e}return xt(r,n),dt(r,[{key:"add",value:function(t,i,s,a){var l=this;return arguments.length===1&&t.forEach(function(u){return l.add(u.subject,u.predicate,u.object,u.graph)}),this.statements.push(this.rdfFactory.quad(t,i,s,a))}},{key:"addStatement",value:function(t){return this.add(t)}},{key:"bnode",value:function(t){return this.rdfFactory.blankNode(t)}},{key:"addAll",value:function(t){var i=this;t.forEach(function(s){i.add(s.subject,s.predicate,s.object,s.graph)})}},{key:"any",value:function(t,i,s,a){var l=this.anyStatementMatching(t,i,s,a);return l==null?null:t==null?l.subject:i==null?l.predicate:s==null?l.object:null}},{key:"anyValue",value:function(t,i,s,a){var l=this.any(t,i,s,a);return l?l.value:void 0}},{key:"anyJS",value:function(t,i,s,a){var l=this.any(t,i,s,a);return l?ft.toJS(l):void 0}},{key:"anyStatementMatching",value:function(t,i,s,a){var l=this.statementsMatching(t,i,s,a,!0);if(!(!l||l.length===0))return l[0]}},{key:"id",value:function(t){return this.rdfFactory.id(t)}},{key:"statementsMatching",value:function(t,i,s,a,l){var u=this.statements.filter(function(o){return(!t||t.equals(o.subject))&&(!i||i.equals(o.predicate))&&(!s||s.equals(o.object))&&(!a||a.equals(o.graph))});return l?u.length===0?[]:[u[0]]:u}},{key:"bottomTypeURIs",value:function(t){var i,s,a,l,u,o,f,c;i=[];for(var d in t)if(t.hasOwnProperty(d)){for(c=t[d],f=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),this.rdfFactory.namedNode(d)),s=!0,l=0,u=f.length;l<u;l++)if(a=f[l],o=a.uri,o in t){s=!1;break}s&&(i[d]=c)}return i}},{key:"collection",value:function(){return new Pr}},{key:"each",value:function(t,i,s,a){var l=[],u=this.statementsMatching(t,i,s,a,!1);if(t==null)for(var o=0,f=u.length;o<f;o++)l.push(u[o].subject);else if(i==null)for(var c=0,d=u.length;c<d;c++)l.push(u[c].predicate);else if(s==null)for(var _=0,m=u.length;_<m;_++)l.push(u[_].object);else if(a==null)for(var N=0,w=u.length;N<w;N++)l.push(new qt(u[N].graph.value));return l}},{key:"equals",value:function(t){return t?this.hashString()===t.hashString():!1}},{key:"findMembersNT",value:function(t){var i,s,a,l,u,o,f,c,d,_,m,N,w,R;N={},N[t.toNT()]=!0,l={},o=this.transitiveClosure(N,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0);for(var j in o)if(o.hasOwnProperty(j)){f=this.statementsMatching(void 0,this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.fromNT(j));for(var T=0,S=f.length;T<S;T++)w=f[T],l[w.subject.toNT()]=w;c=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"),this.fromNT(j));for(var v=0,C=c.length;v<C;v++)for(u=c[v],d=this.statementsMatching(void 0,u),a=0,i=d.length;a<i;a++)w=d[a],l[w.subject.toNT()]=w;_=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"),this.fromNT(j));for(var D=0,P=_.length;D<P;D++)for(u=_[D],m=this.statementsMatching(void 0,u),R=0,s=m.length;R<s;R++)w=m[R],l[w.object.toNT()]=w}return l}},{key:"findMemberURIs",value:function(t){return this.NTtoURI(this.findMembersNT(t))}},{key:"findSubClassesNT",value:function(t){var i={};return i[t.toNT()]=!0,this.transitiveClosure(i,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0)}},{key:"findSuperClassesNT",value:function(t){var i={};return i[t.toNT()]=!0,this.transitiveClosure(i,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}},{key:"findTypesNT",value:function(t){var i,s,a,l,u,o,f,c,d;a="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",d=[],l=this.statementsMatching(t,void 0,void 0);for(var _=0,m=l.length;_<m;_++)if(c=l[_],c.predicate.uri===a)d[c.object.toNT()]=c;else{u=this.each(c.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"));for(var N=0,w=u.length;N<w;N++)s=u[N],d[s.toNT()]=c}o=this.statementsMatching(void 0,void 0,t);for(var R=0,j=o.length;R<j;R++){c=o[R],f=this.each(c.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"));for(var T=0,S=f.length;T<S;T++)i=f[T],d[i.toNT()]=c}return this.transitiveClosure(d,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}},{key:"findTypeURIs",value:function(t){return this.NTtoURI(this.findTypesNT(t))}},{key:"connectedStatements",value:function(t,i,s){s=s||[];for(var a=[t],l={},u={},o=[],f=this,c=function(_){var m=function(R){R.termType==="BlankNode"&&!l[R.value]&&(l[R.value]=!0,a.push(R))},N=f.statementsMatching(null,null,_,i).concat(f.statementsMatching(_,null,null,i));N=N.filter(function(w){if(s[w.predicate.value])return!1;var R=w.toNT();return u[R]?!1:(u[R]=!0,!0)}),N.forEach(function(w){m(w.subject),m(w.object)}),o=o.concat(N)};a.length;)c(a.shift());return o}},{key:"formula",value:function(t){return new r}},{key:"fromNT",value:function(t){var i,s,a;switch(t[0]){case"<":return this.sym(t.slice(1,-1));case'"':if(a=void 0,i=void 0,s=t.lastIndexOf('"'),s<t.length-1)if(t[s+1]==="@")a=t.slice(s+2);else if(t.slice(s+1,s+3)==="^^")i=this.fromNT(t.slice(s+3));else throw new Error("Can't convert string from NT: "+t);return t=t.slice(1,s),t=t.replace(/\\"/g,'"'),t=t.replace(/\\n/g,`
`),t=t.replace(/\\\\/g,"\\"),this.rdfFactory.literal(t,a||i);case"_":return this.rdfFactory.blankNode(t.slice(2));case"?":return new un(t.slice(1))}throw new Error("Can't convert from NT: "+t)}},{key:"holds",value:function(t,i,s,a){var l;if(arguments.length===1){if(!t)return!0;if(t instanceof Array){for(l=0;l<t.length;l++)if(!this.holds(t[l]))return!1;return!0}else{if(C_(t))return this.holds(t.subject,t.predicate,t.object,t.graph);if(t.statements)return this.holds(t.statements)}}var u=this.anyStatementMatching(t,i,s,a);return u!=null}},{key:"holdsStatement",value:function(t){return this.holds(t.subject,t.predicate,t.object,t.graph)}},{key:"list",value:function(t,i){if(i.rdfFactory.supports.COLLECTIONS){var s=i.rdfFactory.collection();return t.forEach(function(u){s.append(u)}),s}else{var a=i.rdfFactory.blankNode(),l=nc(i.rdfFactory,a,t);return i.addAll(l),a}}},{key:"NTtoURI",value:function(t){var i,s,a={};for(i in t)t.hasOwnProperty(i)&&(s=t[i],i[0]==="<"&&(a[i.slice(1,-1)]=s));return a}},{key:"serialize",value:function(t,i,s,a){return ai(s,this,t,i,void 0,a)}},{key:"substitute",value:function(t){var i=this.statements.map(function(a){return a.substitute(t)}),s=new r;return s.addAll(i),s}},{key:"sym",value:function(t,i){if(i)throw new Error("This feature (kb.sym with 2 args) is removed. Do not assume prefix mappings.");return this.rdfFactory.namedNode(t)}},{key:"the",value:function(t,i,s,a){var l=this.any(t,i,s,a);return l}},{key:"transitiveClosure",value:function(t,i,s){var a,l,u,o,f,c,d={};Object.assign(d,t);for(var _={};;){if(c=function(){for(var m in d)if(d.hasOwnProperty(m))return m}(),c==null)return _;for(f=s?this.each(void 0,i,this.fromNT(c)):this.each(this.fromNT(c),i),l=0,u=f.length;l<u;l++)a=f[l],o=a.toNT(),!(o in _)&&(o in d||(d[o]=d[c]));_[c]=d[c],delete d[c]}}},{key:"topTypeURIs",value:function(t){var i,s,a,l,u,o,f,c;f=[];for(a in t)if(t.hasOwnProperty(a)){for(c=t[a],u=0,o=this.each(this.rdfFactory.namedNode(a),this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf")),i=0,l=o.length;i<l;i++)if(s=o[i],s.uri!=="http://www.w3.org/2000/01/rdf-schema#Resource"){u++;break}u||(f[a]=c)}return f["http://www.w3.org/2000/01/rdf-schema#Resource"]&&delete f["http://www.w3.org/2000/01/rdf-schema#Resource"],f["http://www.w3.org/2002/07/owl#Thing"]&&delete f["http://www.w3.org/2002/07/owl#Thing"],f}},{key:"toString",value:function(){return"{"+this.statements.join(`
`)+"}"}},{key:"variable",value:function(t){return new un(t)}},{key:"whether",value:function(t,i,s,a){return this.statementsMatching(t,i,s,a,!1).length}}])}(ft);ft.fromValue=bf;var bn={xsd:Ut("http://www.w3.org/2001/XMLSchema#")};ft.toJS=function(n){return us(n)?n.elements.map(ft.toJS):pf(n)?n.datatype.equals(bn.xsd("boolean"))?n.value==="1"||n.value==="true":n.datatype.equals(bn.xsd("dateTime"))||n.datatype.equals(bn.xsd("date"))?new Date(n.value):n.datatype.equals(bn.xsd("integer"))||n.datatype.equals(bn.xsd("float"))||n.datatype.equals(bn.xsd("decimal"))?Number(n.value):n.value:n};var Fp=dt(function n(r,e){ht(this,n),this.pat=new di,this.vars=[],this.name=r,this.id=e});function lu(n,r,e,t){function i(v){var C="",D;for(D in v)v.hasOwnProperty(D)&&(C+="    "+D+" -> "+v[D]);return C}function s(v){var C="Bindings: ",D,P=v.length;for(D=0;D<P;D++)C+=i(v[D][0])+`;
	`;return C}function a(v,C,D,P){var B=D[v];if(B===void 0){if(v.isVar){var F=[];return F[v]=C,[[F,null]]}B=v}if(!B.complexType)return P.redirections[B]&&(B=P.redirections[B]),P.redirections[C]&&(C=P.redirections[C]),B.equals(C)||B.uri&&B.uri===ti?[[[],null]]:[];if(v instanceof Array)return C instanceof Array?l(v,C,D):[];throw new Error("query.js: oops - code not written yet")}function l(v,C,D,P){var B;if(v.length!==C.length)return[];if(!v.length)return[[[],null]];var F=a(v[0],C[0],D,P);if(F.length===0)return F;var b=[],y,I=F.length,k,V,L,H,le,Y;for(y=0;y<I;y++){k=F[y][0],Y=[];for(H in k)k.hasOwnProperty(H)&&(Y[H]=k[H]);for(H in D)D.hasOwnProperty(H)&&(Y[H]=D[H]);for(B=l(v.slice(1),C.slice(1),Y,P),L=B.length,V=0;V<L;V++){le=B[V][0];for(H in k)k.hasOwnProperty(H)&&(le[H]=k[H]);b.push([le,null])}}return b}function u(v,C){var D=C[v];return D===void 0?v:D}function o(v,C){var D={},P;for(P in v)v.hasOwnProperty(P)&&(D[P]=v[P]);for(P in C)C.hasOwnProperty(P)&&(D[P]=C[P]);return D}function f(v,C){return this.trunkBindings=C,this.originalCallback=v,this.branches=[],this}f.prototype.checkAllDone=function(){var v;for(v=0;v<this.branches.length;v++)if(!this.branches[v].done)return;this.doCallBacks(this.branches.length-1,this.trunkBindings)},f.prototype.doCallBacks=function(v,C){var D;if(v<0)return this.originalCallback(C);for(D=0;D<this.branches[v].results.length;D++)this.doCallBacks(v-1,o(C,this.branches[v].results[D]))};function c(v,C){return this.count=0,this.success=!1,this.done=!1,this.callback=v,this.onDone=C,this}c.prototype.reportMatch=function(v){this.callback(v),this.success=!0},c.prototype.reportDone=function(){this.done=!0,this.onDone!==void 0&&this.onDone()};var d=function(C){return this.count=0,this.done=!1,this.results=[],this.junction=C,C.branches.push(this),this};d.prototype.reportMatch=function(v){this.results.push(v)},d.prototype.reportDone=function(){_r.debug("Optional branch finished - results.length = "+this.results.length),this.results.length===0&&this.results.push({}),this.done=!0,this.junction.checkAllDone()};function _(v,C,D){var P,B,F,b;for(C.nvars=0,C.index=null,P=[C.subject,C.predicate,C.object,C.why],b=[v.subjectIndex,v.predicateIndex,v.objectIndex,v.whyIndex],F=0;F<4;F++){var y=P[F];if(!(y.uri&&y.uri===ti))if(y.isVar&&D[y]===void 0)C.nvars++;else{if(y=u(P[F],D),v.redirections[v.id(y)]&&(y=v.redirections[v.id(y)]),B=b[F][v.id(y)],!B)return C.index=[],!1;(C.index===null||C.index.length>B.length)&&(C.index=B)}}return C.index===null&&(C.index=v.statements),!0}function m(v,C){return v.nvars!==C.nvars?v.nvars-C.nvars:v.index.length-C.index.length}var N=0,w=function v(C,D,P,B,F,b,y){_r.debug("Match begins, Branch count now: "+y.count+" for "+y.pattern_debug);var I=D.statements;if(I.length===0){if(_r.debug("FOUND MATCH WITH BINDINGS:"+i(P)),D.optional.length===0)y.reportMatch(P);else{_r.debug("OPTIONAL: "+D.optional);var k=new f(r,P),V=[],L;for(L=0;L<D.optional.length;L++)V[L]=new d(k),V[L].pattern_debug=D.optional[L];for(L=0;L<D.optional.length;L++)V[L].count=V[L].count+1,v(C,D.optional[L],P,"",F,r,V[L])}y.count--,_r.debug("Match ends -- success , Branch count now: "+y.count+" for "+y.pattern_debug);return}var H,le,Y=I.length;if(F){var x="match"+N++,U=function(X,ee){var Ce=X.uri.split("#")[0];F.nowOrWhenFetched(Ce,void 0,function(Se,he,pe){Se||console.log("Error following link to <"+X.uri+"> in query: "+he),v(C,D,P,B,F,b,y)})};for(le=0;le<Y;le++){if(H=I[le],P[H.subject]!==void 0&&P[H.subject].uri&&F&&F.getState(En(P[H.subject].uri))==="unrequested"){U(P[H.subject],x);return}if(P[H.object]!==void 0&&P[H.object].uri&&F&&F.getState(En(P[H.object].uri))==="unrequested"){U(P[H.object],x);return}}}j(C,D,P,B,F,b,y)},R=function(C,D){var P=!0,B,F;for(B in C)C.hasOwnProperty(B)&&D[B]&&(F=D[B].test,F&&!F(C[B])&&(P=!1));return P},j=function(C,D,P,B,F,b,y){var I=D.statements,k=I.length,V,L,H,le,Y,x,U;for(V=0;V<k;V++)U=I[V],_(C,U,P);I.sort(m),U=I[0];var Q=C.formula();Q.optional=D.optional,Q.constraints=D.constraints,Q.statements=I.slice(1),_r.debug(B+"match2 searching "+U.index.length+" for "+U+"; bindings so far="+i(P));var X,ee=U.index.length,Ce,Se;for(X=0;X<ee;X++)for(Se=U.index[X],Ce=l([U.subject,U.predicate,U.object,U.why],[Se.subject,Se.predicate,Se.object,Se.why],P,C),_r.info(B+" From first: "+Ce.length+": "+s(Ce)),H=Ce.length,L=0;L<H;L++)if(Y=[],x=Ce[L][0],!R(x,D.constraints))_r.debug("Branch count CS: "+y.count);else{for(le in x)x.hasOwnProperty(le)&&(Y[le]=x[le]);for(le in P)P.hasOwnProperty(le)&&(Y[le]=P[le]);y.count++,w(C,Q,Y,B+"  ",F,b,y)}y.count--,_r.debug("Match2 ends, Branch count: "+y.count+" for "+y.pattern_debug),y.count===0&&y.reportDone()},T=this;_r.debug("Query on "+this.statements.length);var S=new c(r,t);S.count++,n.sync?w(T,n.pat,n.pat.initBindings,"",e,r,S):setTimeout(function(){w(T,n.pat,n.pat.initBindings,"",e,r,S)},0)}function uu(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,t)}return e}function zn(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?uu(Object(e),!0).forEach(function(t){ge(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):uu(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function Op(n,r){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=Lp(n))||r){e&&(n=e);var t=0,i=function(){};return{s:i,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(o){throw o},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){e=e.call(n)},n:function(){var o=e.next();return s=o.done,o},e:function(o){a=!0,l=o},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(a)throw l}}}}function Lp(n,r){if(n){if(typeof n=="string")return ou(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ou(n,r)}}function ou(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}function Bp(n,r,e){return r=At(r),Lr(n,sc()?Reflect.construct(r,e||[],At(n).constructor):r.apply(n,e))}function sc(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sc=function(){return!!n})()}var Ia="http://www.w3.org/2002/07/owl#";function qp(n,r,e,t){var i=n.any(r,e,void 0);return i?(n.equate(i,t),!0):!1}function Mp(n,r,e,t){var i=n.any(void 0,e,t);return i?(n.equate(i,r),!0):!1}function lc(n,r,e,t,i){n.typeCallback&&n.typeCallback(n,t,i);var s=n.classActions[n.id(t)],a=!1;if(s)for(var l=0;l<s.length;l++)a=a||s[l](n,r,e,t,i);return a}var di=function(n){function r(e){var t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ht(this,r),t=Bp(this,r,[void 0,void 0,void 0,void 0,i]),ge(t,"updater",void 0),ge(t,"namespaces",void 0),ge(t,"classActions",void 0),ge(t,"propertyActions",void 0),ge(t,"redirections",void 0),ge(t,"aliases",void 0),ge(t,"HTTPRedirects",void 0),ge(t,"subjectIndex",void 0),ge(t,"predicateIndex",void 0),ge(t,"objectIndex",void 0),ge(t,"whyIndex",void 0),ge(t,"index",void 0),ge(t,"features",void 0),ge(t,"_universalVariables",void 0),ge(t,"_existentialVariables",void 0),ge(t,"rdfArrayRemove",void 0),ge(t,"dataCallbacks",void 0),t.propertyActions={},t.classActions={},t.redirections=[],t.aliases=[],t.HTTPRedirects=[],t.subjectIndex=[],t.predicateIndex=[],t.objectIndex=[],t.whyIndex=[],t.index=[t.subjectIndex,t.predicateIndex,t.objectIndex,t.whyIndex],t.namespaces={},t.features=e||[],t.rdfArrayRemove=i.rdfArrayRemove||wp,i.dataCallback&&(t.dataCallbacks=[i.dataCallback]),t.initPropertyActions(t.features),t}return xt(r,n),dt(r,[{key:"substitute",value:function(t){var i=this.statements.map(function(a){return a.substitute(t)}),s=new r;return s.add(i),s}},{key:"addDataCallback",value:function(t){this.dataCallbacks||(this.dataCallbacks=[]),this.dataCallbacks.push(t)}},{key:"applyPatch",value:function(t,i,s){var a=this,l,u=null;function o(d){if(t.delete){l=t.delete,u&&(l=l.substitute(u)),l=l.statements;var _=[],m=l.map(function(N){var w=a.statementsMatching(N.subject,N.predicate,N.object,i);return w.length===0?(_.push(N),null):w[0]});if(_.length)return s("Could not find to delete: "+_.join(`
 or `));m.map(function(N){a.remove(N)})}t.insert&&(l=t.insert,u&&(l=l.substitute(u)),l=l.statements,l.map(function(N){N.graph=i,a.add(N.subject,N.predicate,N.object,N.graph)})),d()}if(t.where){var f=new Fp("patch");f.pat=t.where,f.pat.statements.map(function(d){d.graph=kc(i.value)}),f.sync=!0;var c=[];a.query(f,function(_){c.push(_)},a.fetcher,function(){if(c.length===0)return s("No match found to be patched:"+t.where);if(c.length>1)return s("Patch ambiguous. No patch done.");u=c[0],o(s)})}else o(s)}},{key:"declareExistential",value:function(t){return this._existentialVariables||(this._existentialVariables=[]),this._existentialVariables.push(t),t}},{key:"initPropertyActions",value:function(t){this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"))]=[lc],er(t,"sameAs")>=0&&(this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode("".concat(Ia,"sameAs")))]=[function(i,s,a,l,u){return i.equate(s,l),!0}]),er(t,"InverseFunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode("".concat(Ia,"InverseFunctionalProperty")))]=[function(i,s,a,l,u){return i.newPropertyAction(s,Mp)}]),er(t,"FunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode("".concat(Ia,"FunctionalProperty")))]=[function(i,s,a,l,u){return i.newPropertyAction(s,qp)}])}},{key:"addStatement",value:function(t){return this.add(t.subject,t.predicate,t.object,t.graph),this.statements.length}},{key:"add",value:function(t,i,s,a){var l;if(arguments.length===1){if(t instanceof Array)for(l=0;l<t.length;l++)this.add(t[l]);else yn(t)?this.add(t.subject,t.predicate,t.object,t.graph):ql(t)&&this.add(t.statements);return this}var u,o;a||(a=this.fetcher?this.fetcher.appNode:this.rdfFactory.defaultGraph()),typeof t=="string"&&(t=this.rdfFactory.namedNode(t)),i=ft.fromValue(i);var f=ft.fromValue(s);if(a=ft.fromValue(a),!S_(t))throw new Error("Subject is not a subject type");if(!R_(i))throw new Error("Predicate ".concat(i," is not a predicate type"));if(!N_(f))throw new Error("Object ".concat(f," is not an object type"));if(!F_(a))throw new Error("Why is not a graph type");this.predicateCallback&&this.predicateCallback(this,i,a);var c=this.id(this.canon(i));u=this.propertyActions[c];var d=!1;if(u)for(l=0;l<u.length;l++)d=d||u[l](this,t,i,f,a);if(this.holds(t,i,f,a))return null;var _=[this.id(this.canon(t)),c,this.id(this.canon(f)),this.id(this.canon(a))];for(o=this.rdfFactory.quad(t,i,f,a),l=0;l<4;l++){var m=this.index[l],N=_[l];m[N]||(m[N]=[]),m[N].push(o)}if(this.statements.push(o),this.dataCallbacks){var w=Op(this.dataCallbacks),R;try{for(w.s();!(R=w.n()).done;){var j=R.value;j(o)}}catch(T){w.e(T)}finally{w.f()}}return o}},{key:"canon",value:function(t){if(!t)return t;var i=this.redirections[this.id(t)];if(i)return i;switch(t.termType){case cn:return new vr(t.value);case Hr:return t;case ln:return new os;case df:return t;case li:return t;case On:return new gr(t.value,t.language,t.datatype);case fn:return new qt(t.value);case Vr:return new un(t.value);default:throw new Error("Term Type not recognized for canonization: ".concat(t.termType))}}},{key:"check",value:function(){this.checkStatementList(this.statements);for(var t=0;t<4;t++){var i=this.index[t];for(var s in i)i.hasOwnProperty(s)&&this.checkStatementList(i[s],t)}}},{key:"checkStatementList",value:function(t,i){i===void 0&&(i=0);for(var s=["subject","predicate","object","why"],a=" found in "+s[i]+" index.",l,u=0;u<t.length;u++){l=t[u];for(var o=[l.subject,l.predicate,l.object,l.graph],f=function(N,w){for(var R=0;R<N.length;R++)if(N[R].subject.equals(w.subject)&&N[R].predicate.equals(w.predicate)&&N[R].object.equals(w.object)&&N[R].why.equals(w.graph))return!0},c=0;c<4;c++){var d=this.canon(o[c]),_=this.id(d);this.index[c][_]&&f(this.index[c][_],l)}if(!f(this.statements,l))throw new Error("Statement list does not statement "+l+"@"+l.graph+a)}}},{key:"close",value:function(){return this}},{key:"compareTerms",value:function(t,i){return Object.prototype.hasOwnProperty.call(t,"compareTerm")?t.compareTerm(i):mr[t.termType]<mr[i.termType]?-1:mr[t.termType]>mr[i.termType]?1:t.value<i.value?-1:t.value>i.value?1:0}},{key:"copyTo",value:function(t,i,s){s||(s=[]);var a=this.statementsMatching(t);er(s,"two-direction")!==-1&&a.concat(this.statementsMatching(void 0,void 0,t));for(var l=0;l<a.length;l++){var u=a[l];switch(u.object.termType){case"NamedNode":this.add(i,u.predicate,u.object);break;case"Literal":case"BlankNode":case"Collection":this.add(i,u.predicate,u.object.copy(this))}er(s,"delete")!==-1&&this.remove(u)}}},{key:"equate",value:function(t,i){var s=this.canon(t),a=this.canon(i),l=this.compareTerms(s,a);return l?l<0?this.replaceWith(a,s):this.replaceWith(s,a):!0}},{key:"formula",value:function(t){return new r(t)}},{key:"length",get:function(){return this.statements.length}},{key:"match",value:function(t,i,s,a){return this.statementsMatching(ft.fromValue(t),ft.fromValue(i),ft.fromValue(s),ft.fromValue(a))}},{key:"mentionsURI",value:function(t){var i="<"+t+">";return!!this.subjectIndex[i]||!!this.objectIndex[i]||!!this.predicateIndex[i]}},{key:"newExistential",value:function(t){if(!t)return this.bnode();var i=this.sym(t);return this.declareExistential(i)}},{key:"newPropertyAction",value:function(t,i){var s=this.id(t);this.propertyActions[s]||(this.propertyActions[s]=[]),this.propertyActions[s].push(i);for(var a=this.statementsMatching(void 0,t,void 0),l=!1,u=0;u<a.length;u++)l=l||i(this,a[u].subject,t,a[u].object);return l}},{key:"newUniversal",value:function(t){var i=this.sym(t);return this._universalVariables||(this._universalVariables=[]),this._universalVariables.push(i),i}},{key:"variable",value:function(t){return new un(t)}},{key:"nextSymbol",value:function(t){for(var i=0;;i++){var s=t.value+"#n"+i;if(!this.mentionsURI(s))return this.sym(s)}}},{key:"query",value:function(t,i,s,a){return lu.call(this,t,i,s,a)}},{key:"querySync",value:function(t){var i=[];function s(u){i.push(u)}function a(){l=!0}var l=!1;if(t.sync=!0,lu.call(this,t,s,null,a),!l)throw new Error("Sync query should have called done function");return i}},{key:"remove",value:function(t){if(t instanceof Array){for(var i=0;i<t.length;i++)this.remove(t[i]);return this}if(ql(t))return this.remove(t.statements);var s=this.statementsMatching(t.subject,t.predicate,t.object,t.graph);if(!s.length)throw new Error("Statement to be removed is not on store: "+t);return this.removeStatement(s[0]),this}},{key:"removeDocument",value:function(t){this.removeMetadata(t);for(var i=this.statementsMatching(void 0,void 0,void 0,t).slice(),s=0;s<i.length;s++)this.removeStatement(i[s]);return this.removeMatches(t,null,null),this}},{key:"removeMetadata",value:function(t){for(var i=this.sym("chrome://TheCurrentSession"),s="http://www.w3.org/2007/ont/link#",a=this.statementsMatching(void 0,this.sym("".concat(s,"requestedURI")),this.rdfFactory.literal(t.value),i).map(function(_){return _.subject}),l=0;l<a.length;l++){var u=a[l];if(u!=null){var o=void 0,f=this.any(u,this.sym("".concat(s,"status")),null,i);if(f!=null){o=this.statementsMatching(f,this.sym("".concat(s,"status")),null,i).slice();for(var c=0;c<o.length;c++)this.removeStatement(o[c])}var d=this.any(u,this.sym("".concat(s,"response")),null,i);if(d!=null){o=this.statementsMatching(d,null,null,i).slice();for(var c=0;c<o.length;c++)this.removeStatement(o[c])}o=this.statementsMatching(u,null,null,i).slice();for(var c=0;c<o.length;c++)this.removeStatement(o[c])}}return this.removeMatches(this.sym(t.value),null,null,i),this}},{key:"removeMany",value:function(t,i,s,a,l){for(var u=this.statementsMatching(t,i,s,a,!1),o=[],f=0;f<u.length;f++)o.push(u[f]);for(l&&(o=o.slice(0,l)),f=0;f<o.length;f++)this.remove(o[f])}},{key:"removeMatches",value:function(t,i,s,a){return this.removeMany(t,i,s,a),this}},{key:"removeStatement",value:function(t){for(var i=[t.subject,t.predicate,t.object,t.graph],s=0;s<4;s++){var a=this.canon(i[s]),l=this.id(a);this.index[s][l]&&this.rdfArrayRemove(this.index[s][l],t)}return this.rdfArrayRemove(this.statements,t),this}},{key:"removeStatements",value:function(t){for(var i=0;i<t.length;i++)this.remove(t[i]);return this}},{key:"replaceWith",value:function(t,i){for(var s=this.id(t),a=this.id(i),l=function(f){var c=f[s];if(c){var d=f[a];d?f[a]=c.concat(d):f[a]=c,delete f[s]}},u=0;u<4;u++)l(this.index[u]);if(this.redirections[s]=i,t.value){if(this.aliases[a]||(this.aliases[a]=[]),this.aliases[a].push(t),this.aliases[s])for(u=0;u<this.aliases[s].length;u++)this.redirections[this.id(this.aliases[s][u])]=i,this.aliases[a].push(this.aliases[s][u]);this.add(i,this.sym("http://www.w3.org/2007/ont/link#uri"),t),this.fetcher&&this.fetcher.nowKnownAs(t,i)}return l(this.classActions),l(this.propertyActions),!0}},{key:"allAliases",value:function(t){var i=this.aliases[this.id(this.canon(t))]||[];return i.push(this.canon(t)),i}},{key:"sameThings",value:function(t,i){if(t.equals(i))return!0;var s=this.canon(t);if(!s)return!1;var a=this.canon(i);return a?s.value===a.value:!1}},{key:"setPrefixForURI",value:function(t,i){if(!(t==="tab"&&this.namespaces.tab)&&!(t.slice(0,2)==="ns"||t.slice(0,7)==="default")){for(var s in this.namespaces)this.namespaces[s]==i&&delete this.namespaces[s];this.namespaces[t]=i}}},{key:"statementsMatching",value:function(t,i,s,a,l){var u=[t,i,s,a],o=[],f=[],c=[],d,_;for(d=0;d<4;d++)o[d]=this.canon(ft.fromValue(u[d])),o[d]&&(c.push(d),f[d]=this.id(o[d]));if(c.length===0)return this.statements;if(c.length===1)return d=c[0],_=this.index[d][f[d]],_&&l&&_.length>1&&(_=_.slice(0,1)),_=_||[],_;var m=1e10,N,w;for(w=0;w<c.length;w++){if(d=c[w],_=this.index[d][f[d]],!_)return[];_.length<m&&(m=_.length,N=w)}for(var R=c[N],j=this.index[R][f[R]],T=c.slice(0,N).concat(c.slice(N+1)),S=[],v=["subject","predicate","object","why"],C=0;C<j.length;C++){var D=j[C];for(w=0;w<T.length;w++)if(d=T[w],!this.canon(D[v[d]]).equals(o[d])){D=null;break}if(D!=null&&(S.push(D),l))break}return S}},{key:"uris",value:function(t){var i=this.canon(t),s=this.aliases[this.id(i)];if(!i.value)return[];var a=[i.value];if(s)for(var l=0;l<s.length;l++)a.push(s[l].uri);return a}},{key:"serialize",value:function(t,i,s,a){var l,u=(l=a)!==null&&l!==void 0&&l.namespaces?zn(zn({},this.namespaces),a.namespaces):zn({},this.namespaces);return a=zn(zn({},a||{}),{},{namespaces:u}),ai(s,this,t,i,void 0,a)}}],[{key:"defaultGraphURI",get:function(){return ti}}])}(ac);ge(di,"handleRDFType",void 0);di.handleRDFType=lc;function Kn(n,r){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=jp(n))||r){e&&(n=e);var t=0,i=function(){};return{s:i,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(o){throw o},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){e=e.call(n)},n:function(){var o=e.next();return s=o.done,o},e:function(o){a=!0,l=o},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(a)throw l}}}}function jp(n,r){if(n){if(typeof n=="string")return fu(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return fu(n,r)}}function fu(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}var rn=Ut("http://www.w3.org/1999/02/22-rdf-syntax-ns#");function Pp(n,r,e,t){var i=Kn(n.statementsMatching(e,null,null,t)),s;try{for(i.s();!(s=i.n()).done;){var a=s.value,l=new an(r,a.predicate,a.object,t);n.remove(a),n.add(l)}}catch(m){i.e(m)}finally{i.f()}var u=Kn(n.statementsMatching(null,e,null,t)),o;try{for(u.s();!(o=u.n()).done;){var f=o.value;n.remove(f),n.add(new an(f.subject,r,f.object,t))}}catch(m){u.e(m)}finally{u.f()}var c=Kn(n.statementsMatching(null,null,e,t)),d;try{for(c.s();!(d=c.n()).done;){var _=d.value;n.remove(_),n.add(new an(_.subject,_.predicate,r,t))}}catch(m){c.e(m)}finally{c.f()}}function Up(n,r){var e=rn("nil"),t=Kn(n.statementsMatching(e,null,null,r)),i;try{for(t.s();!(i=t.n()).done;){var s=i.value;n.remove(s);var a=new Pr;n.add(new an(a,s.predicate,s.object,r))}}catch(c){t.e(c)}finally{t.f()}var l=Kn(n.statementsMatching(null,null,e,r)),u;try{for(l.s();!(u=l.n()).done;){var o=u.value;if(!o.predicate.sameTerm(rn("rest"))){n.remove(o);var f=new Pr;n.add(new an(o.subject,o.predicate,f,r))}}}catch(c){l.e(c)}finally{l.f()}}function xp(n,r){function e(i,s,a){var l=n.statementsMatching(i,rn("rest"),null,r);if(l.length!==1)throw new Error("Bad list structure: no rest at ".concat(i));var u=n.statementsMatching(i,rn("first"),null,r);if(u.length!==1)throw new Error("Bad list structure: rest but ".concat(u.length," firsts at ").concat(i));var o=u[0].object,f=[o].concat(s),c=a.concat(l).concat(u),d=n.statementsMatching(null,rn("rest"),i,r);if(d.length===0){var _=new Pr(f);n.remove(c),Pp(n,_,i,r);return}if(d.length!==1)throw new Error("Bad list structure: ".concat(d.length," pres at ").concat(i));var m=d[0].subject;if(m.termType!=="BlankNode")throw new Error("Bad list element node ".concat(m," type: ").concat(m.termType," "));e(m,f,c)}Up(n,r);var t=n.statementsMatching(null,rn("rest"),rn("nil"),r);t.forEach(function(i){if(i.subject.termType!=="BlankNode")throw new Error("Bad list element node ".concat(i.subject," type: ").concat(i.subject.termType," "));e(i.subject,[],[])})}function $p(n){return encodeURI(n)}var Vp={encode:function(r){r=r.replace(/\r\n/g,`
`);for(var e="",t=0;t<r.length;t++){var i=r.charCodeAt(t);i<128?e+=String.fromCharCode(i):i>127&&i<2048?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(i&63|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(i&63|128))}return e},decode:function(r){for(var e="",t=0;t<r.length;){var i=r.charCodeAt(t);i<128?(e+=String.fromCharCode(i),t++):i>191&&i<224?(e+=String.fromCharCode((i&31)<<6|r.charCodeAt(t+1)&63),t+=2):(e+=String.fromCharCode((i&15)<<12|(r.charCodeAt(t+1)&63)<<6|r.charCodeAt(t+2)&63),t+=3)}return e}},Fa="http://www.w3.org/2000/10/swap/log#",It=function(r){return r},Ft=function(r){return r},Xn=function(r){if(r.length>0)throw"missing.js: oops nnonempty dict not imp";return[]},Kt=function(r){return r.length},Oa=function(r,e,t){if(typeof r.slice>"u")throw"@@ mising.js: No .slice function for "+r+" of type "+Zt(r);return typeof t>"u"||t==null?r.slice(e):r.slice(e,t)},Qn=Error("dummy error stop iteration"),Pi=function(r){return this.last=0,this.li=r,this.next=function(){if(this.last==this.li.length)throw Qn;return this.li[this.last++]},this},La=function(r,e){return r.indexOf(e)},en=function(r,e){if(!r)throw e?"python Assertion failed: "+e:"(python) Assertion failed."},Hp=function(r){return String.fromCharCode(r)};String.prototype.encode=function(n){if(n!="utf-8")throw"UTF8_converter: can only do utf-8";return Vp.encode(this)};String.prototype.decode=function(n){if(n!="utf-8")throw"UTF8_converter: can only do utf-8";return this};var Ba=function(r,e){return tr(e,r)},zp=null,Xp="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",cu="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",du="http://www.w3.org/2002/07/owl#sameAs",Gp="#",Wp="http://www.w3.org/2001/XMLSchema#integer",Qp="http://www.w3.org/2001/XMLSchema#double",Yp="http://www.w3.org/2001/XMLSchema#decimal",Jp="http://www.w3.org/2001/XMLSchema#date",Zp="http://www.w3.org/2001/XMLSchema#dateTime",uc=`	\r
 !"#$%&'()*.,+/;<=>?@[\\]^\`{|}~`,tn=uc+":",qa=new RegExp("^([-+]?[0-9]+)(\\.[0-9]+)?(e[-+]?[0-9]+)?","g"),hu=new RegExp("^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9](T[0-9][0-9]:[0-9][0-9](:[0-9][0-9](\\.[0-9]*)?)?)?Z?"),Ma=new RegExp('[\\\\\\r\\n\\"]',"g"),ja=new RegExp("^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*","g");function ws(n,r,e,t,i,s,a,l){return new Kp(n,r,e,t,i,s,a,l)}var Kp=function(){function n(r,e,t,i,s,a,l,u){ht(this,n),typeof e>"u"&&(e=null),typeof t>"u"&&(t=""),typeof i>"u"&&(i=null),typeof s>"u"&&(s=""),typeof l>"u"&&(l=""),typeof u>"u"&&(u=null),this._bindings=new Xn([]),this._flags=l,t!=""&&(en(t.indexOf(":")>=0,"Document URI not absolute: "+t),this._bindings[""]=t+"#"),this._store=r,s&&r.setGenPrefix(s),this._thisDoc=t,this.source=r.sym(t),this.lines=0,this.statementCount=0,this.hasNil=!1,this.startOfLine=0,this.previousLine=0,this._genPrefix=s,this.keywords=new Ft(["a","this","bind","has","is","of","true","false"]),this.keywordsSet=0,this._anonymousNodes=new Xn([]),this._variables=new Xn([]),this._parentVariables=new Xn([]),this._reason=u,this._reason2=null,i?this._baseURI=i:t?this._baseURI=t:this._baseURI=null,en(!this._baseURI||this._baseURI.indexOf(":")>=0),this._genPrefix||(this._thisDoc?this._genPrefix=this._thisDoc+"#_g":this._genPrefix=RDFSink_uniqueURI()),e==null?this._thisDoc?this._formula=r.formula(t+"#_formula"):this._formula=r.formula():this._formula=e,this._context=this._formula,this._parentContext=null}return dt(n,[{key:"here",value:function(e){return this._genPrefix+"_L"+this.lines+"C"+(e-this.startOfLine+1)}},{key:"formula",value:function(){return this._formula}},{key:"loadStream",value:function(e){return this.loadBuf(e.read())}},{key:"loadBuf",value:function(e){return this.startDoc(),this.feed(e),this.endDoc()}},{key:"feed",value:function(e){for(var t=e.decode("utf-8"),i=0;i>=0;){var s=this.skipSpace(t,i);if(s<0)return;var i=this.directiveOrStatement(t,s);if(i<0)throw Me(this._thisDoc,this.lines,t,s,"expected directive or statement")}}},{key:"directiveOrStatement",value:function(e,t){var i=this.skipSpace(e,t);if(i<0)return i;var s=this.directive(e,i);if(s>=0)return this.checkDot(e,s);var s=this.statement(e,i);return s>=0?this.checkDot(e,s):s}},{key:"tok",value:function(e,t,i){if(t.slice(i,i+1)=="@")var i=i+1;else if(er(this.keywords,e)<0)return-1;var s=i+Kt(e);return t.slice(i,s)==e&&uc.indexOf(t.charAt(s))>=0?s:-1}},{key:"directive",value:function(e,t){var o=this.skipSpace(e,t);if(o<0)return o;var i=new Ft([]),o=this.tok("bind",e,t);if(o>0)throw Me(this._thisDoc,this.lines,e,t,"keyword bind is obsolete: use @prefix");var o=this.tok("keywords",e,t);if(o>0){var t=this.commaSeparatedList(e,o,i,!1);if(t<0)throw Me(this._thisDoc,this.lines,e,t,"'@keywords' needs comma separated list of words");return this.setKeywords(Oa(i,null,null)),t}var o=this.tok("forAll",e,t);if(o>0){var t=this.commaSeparatedList(e,o,i,!0);if(t<0)throw Me(this._thisDoc,this.lines,e,t,"Bad variable list after @forAll");var s=new Pi(i);try{for(;;){var a=s.next();(er(this._variables,a)<0||er(this._parentVariables,a)>=0)&&(this._variables[a]=this._context.newUniversal(a))}}catch(c){if(c!=Qn)throw c}return t}var o=this.tok("forSome",e,t);if(o>0){var t=this.commaSeparatedList(e,o,i,this.uri_ref2);if(t<0)throw Me(this._thisDoc,this.lines,e,t,"Bad variable list after @forSome");var s=new Pi(i);try{for(;;){var a=s.next();this._context.declareExistential(a)}}catch(d){if(d!=Qn)throw d}return t}var o=this.tok("prefix",e,t);if(o>=0){var l=new Ft([]),t=this.qname(e,o,l);if(t<0)throw Me(this._thisDoc,this.lines,e,o,"expected qname after @prefix");var o=this.uri_ref2(e,t,l);if(o<0)throw Me(this._thisDoc,this.lines,e,t,"expected <uriref> after @prefix _qname_");var u=l[1].uri;if(this._baseURI)var u=Ba(this._baseURI,u);else en(u.indexOf(":")>=0,"With no base URI, cannot handle relative URI for NS");return en(u.indexOf(":")>=0),this._bindings[l[0][0]]=u,this.bind(l[0][0],$p(u)),o}var o=this.tok("base",e,t);if(o>=0){var l=new Ft([]),t=this.uri_ref2(e,o,l);if(t<0)throw Me(this._thisDoc,this.lines,e,o,"expected <uri> after @base ");var u=l[0].uri;if(this._baseURI)var u=Ba(this._baseURI,u);else throw Me(this._thisDoc,this.lines,e,o,"With no previous base URI, cannot use relative URI in @base  <"+u+">");return en(u.indexOf(":")>=0),this._baseURI=u,t}return-1}},{key:"bind",value:function(e,t){e==""||this._store.setPrefixForURI(e,t)}},{key:"setKeywords",value:function(e){e==null?this.keywordsSet=0:(this.keywords=e,this.keywordsSet=1)}},{key:"startDoc",value:function(){}},{key:"endDoc",value:function(){return this.hasNil&&this._store.rdfFactory.supports.COLLECTIONS&&xp(this._store,this.source),this._formula}},{key:"makeStatement",value:function(e){e[0].add(e[2],e[1],e[3],this.source),(e[2].uri&&e[2].uri===cu||e[3].uri&&e[3].uri===cu)&&(this.hasNil=!0),this.statementCount+=1}},{key:"statement",value:function(e,s){var i=new Ft([]),s=this.object(e,s,i);if(s<0)return s;var a=this.property_list(e,s,i[0]);if(a<0)throw Me(this._thisDoc,this.lines,e,s,"expected propertylist");return a}},{key:"subject",value:function(e,t,i){return this.item(e,t,i)}},{key:"verb",value:function(e,t,i){var a=this.skipSpace(e,t);if(a<0)return a;var s=new Ft([]),a=this.tok("has",e,t);if(a>=0){var t=this.prop(e,a,s);if(t<0)throw Me(this._thisDoc,this.lines,e,a,"expected property after 'has'");return i.push(new It(["->",s[0]])),t}var a=this.tok("is",e,t);if(a>=0){var t=this.prop(e,a,s);if(t<0)throw Me(this._thisDoc,this.lines,e,a,"expected <property> after 'is'");var a=this.skipSpace(e,t);if(a<0)throw Me(this._thisDoc,this.lines,e,t,"End of file found, expected property after 'is'");var t=a,a=this.tok("of",e,t);if(a<0)throw Me(this._thisDoc,this.lines,e,t,"expected 'of' after 'is' <prop>");return i.push(new It(["<-",s[0]])),a}var a=this.tok("a",e,t);if(a>=0)return i.push(new It(["->",this._store.sym(Xp)])),a;if(e.slice(t,t+2)=="<=")return i.push(new It(["<-",this._store.sym(Fa+"implies")])),t+2;if(e.slice(t,t+1)=="=")return e.slice(t+1,t+2)==">"?(i.push(new It(["->",this._store.sym(Fa+"implies")])),t+2):(i.push(new It(["->",this._store.sym(du)])),t+1);if(e.slice(t,t+2)==":=")return i.push(new It(["->",Fa+"becomes"])),t+2;var a=this.prop(e,t,s);if(a>=0)return i.push(new It(["->",s[0]])),a;if(e.slice(t,t+2)==">-"||e.slice(t,t+2)=="<-")throw Me(this._thisDoc,this.lines,e,a,">- ... -> syntax is obsolete.");return-1}},{key:"prop",value:function(e,t,i){return this.item(e,t,i)}},{key:"item",value:function(e,t,i){return this.path(e,t,i)}},{key:"blankNode",value:function(e){return this._context.bnode(e,this._reason2)}},{key:"path",value:function(e,t,i){var s=this.nodeOrLiteral(e,t,i);if(s<0)return s;for(;"!^.".indexOf(e.slice(s,s+1))>=0;){var a=e.slice(s,s+1);if(a=="."){var l=e.slice(s+1,s+2);if(!l||tn.indexOf(l)>=0&&":?<[{(".indexOf(l)<0)break}var u=i.pop(),o=this.blankNode(this.here(s)),s=this.node(e,s+1,i);if(s<0)throw Me(this._thisDoc,this.lines,e,s,"EOF found in middle of path syntax");var f=i.pop();a=="^"?this.makeStatement(new It([this._context,f,o,u])):this.makeStatement(new It([this._context,f,u,o])),i.push(o)}return s}},{key:"anonymousNode",value:function(e){var t=this._anonymousNodes[e];if(t)return t;var t=this._store.bnode(e);return this._anonymousNodes[e]=t,t}},{key:"node",value:function(e,l,i,s){typeof s>"u"&&(s=null);var a=s,C=this.skipSpace(e,l);if(C<0)return C;var l=C,u=e.slice(l,l+1);if(u=="["){var o=this.here(l),C=this.skipSpace(e,l+1);if(C<0)throw Me(this._thisDoc,this.lines,e,l,"EOF after '['");if(e.slice(C,C+1)=="="){var l=C+1,f=new Ft([]),C=this.objectList(e,l,f);if(C>=0){var a=f[0];if(Kt(f)>1){var c=new Pi(f);try{for(;;){var d=c.next();this.makeStatement(new It([this._context,this._store.sym(du),a,d]))}}catch(I){if(I!=Qn)throw I}}var C=this.skipSpace(e,C);if(C<0)throw Me(this._thisDoc,this.lines,e,l,"EOF when objectList expected after [ = ");if(e.slice(C,C+1)==";")var C=C+1}else throw Me(this._thisDoc,this.lines,e,l,"objectList expected after [= ")}if(a==null)var a=this.blankNode(o);var l=this.property_list(e,C,a);if(l<0)throw Me(this._thisDoc,this.lines,e,C,"property_list expected");var C=this.skipSpace(e,l);if(C<0)throw Me(this._thisDoc,this.lines,e,l,"EOF when ']' expected after [ <propertyList>");if(e.slice(C,C+1)!="]")throw Me(this._thisDoc,this.lines,e,C,"']' expected");return i.push(a),C+1}if(u=="{"){var _=e.slice(l+1,l+2);if(_=="$"){l+=1;for(var C=l+1,m=new Ft([]),N=!0;;){var l=this.skipSpace(e,C);if(l<0)throw Me(this._thisDoc,this.lines,e,l,"needed '$}', found end.");if(e.slice(l,l+2)=="$}"){var C=l+2;break}if(N)var N=!1;else if(e.slice(l,l+1)==",")l+=1;else throw Me(this._thisDoc,this.lines,e,l,"expected: ','");var w=new Ft([]),C=this.item(e,l,w);if(C<0)throw Me(this._thisDoc,this.lines,e,l,"expected item in set or '$}'");m.push(w[0])}return i.push(this._store.newSet(m,this._context)),C}else{var C=l+1,R=this._parentContext;this._parentContext=this._context;var j=this._anonymousNodes,T=this._parentVariables;this._parentVariables=this._variables,this._anonymousNodes=new Xn([]),this._variables=this._variables.slice();var S=this._reason2;if(this._reason2=zp,a==null)var a=this._store.formula();for(this._context=a;;){var l=this.skipSpace(e,C);if(l<0)throw Me(this._thisDoc,this.lines,e,l,"needed '}', found end.");if(e.slice(l,l+1)=="}"){var C=l+1;break}var C=this.directiveOrStatement(e,l);if(C<0)throw Me(this._thisDoc,this.lines,e,l,"expected statement or '}'")}return this._anonymousNodes=j,this._variables=this._parentVariables,this._parentVariables=T,this._context=this._parentContext,this._reason2=S,this._parentContext=R,i.push(a.close()),C}}if(u=="("){var v=this._store.list,_=e.slice(l+1,l+2);if(_=="$"){var v=this._store.newSet;l+=1}for(var C=l+1,m=new Ft([]);;){var l=this.skipSpace(e,C);if(l<0)throw Me(this._thisDoc,this.lines,e,l,"needed ')', found end.");if(e.slice(l,l+1)==")"){var C=l+1;break}var w=new Ft([]),C=this.item(e,l,w);if(C<0)throw Me(this._thisDoc,this.lines,e,l,"expected item in list or ')'");m.push(w[0])}return i.push(v(m,this._context)),C}var C=this.tok("this",e,l);if(C>=0)throw Me(this._thisDoc,this.lines,e,l,"Keyword 'this' was ancient N3. Now use @forSome and @forAll keywords.");var C=this.tok("true",e,l);if(C>=0)return i.push(!0),C;var C=this.tok("false",e,l);if(C>=0)return i.push(!1),C;if(a==null){var C=this.uri_ref2(e,l,i);if(C>=0)return C}return-1}},{key:"property_list",value:function(e,t,i){for(;;){var _=this.skipSpace(e,t);if(_<0)throw Me(this._thisDoc,this.lines,e,t,"EOF found when expected verb in property list");if(e.slice(_,_+2)==":-"){var t=_+2,s=new Ft([]),_=this.node(e,t,s,i);if(_<0)throw Me(this._thisDoc,this.lines,e,t,"bad {} or () or [] node after :- ");var t=_;continue}var t=_,a=new Ft([]),_=this.verb(e,t,a);if(_<=0)return t;var l=new Ft([]),t=this.objectList(e,_,l);if(t<0)throw Me(this._thisDoc,this.lines,e,_,"objectList expected");var u=new Pi(l);try{for(;;){var o=u.next(),f=a[0],c=f[0],d=f[1];c=="->"?this.makeStatement(new It([this._context,d,i,o])):this.makeStatement(new It([this._context,d,o,i]))}}catch(N){if(N!=Qn)throw N}var _=this.skipSpace(e,t);if(_<0)throw Me(this._thisDoc,this.lines,e,_,"EOF found in list of objects");if(e.slice(t,t+1)!=";")return t;var t=t+1}}},{key:"commaSeparatedList",value:function(e,t,i,s){var a=this.skipSpace(e,t);if(a<0)throw Me(this._thisDoc,this.lines,e,a,"EOF found expecting comma sep list");if(e.charAt(a)==".")return t;if(s)var a=this.uri_ref2(e,a,i);else var a=this.bareWord(e,a,i);if(a<0)return-1;for(;;){var t=this.skipSpace(e,a);if(t<0)return t;var l=e.slice(t,t+1);if(l!=",")return l!="."?-1:t;if(s)var a=this.uri_ref2(e,t+1,i);else var a=this.bareWord(e,t+1,i);if(a<0)throw Me(this._thisDoc,this.lines,e,a,"bad list content")}}},{key:"objectList",value:function(e,s,i){var s=this.object(e,s,i);if(s<0)return-1;for(;;){var a=this.skipSpace(e,s);if(a<0)throw Me(this._thisDoc,this.lines,e,a,"EOF found after object");if(e.slice(a,a+1)!=",")return a;var s=this.object(e,a+1,i);if(s<0)return s}}},{key:"checkDot",value:function(e,t){var i=this.skipSpace(e,t);if(i<0)return i;if(e.slice(i,i+1)==".")return i+1;if(e.slice(i,i+1)=="}"||e.slice(i,i+1)=="]")return i;throw Me(this._thisDoc,this.lines,e,i,"expected '.' or '}' or ']' at end of statement")}},{key:"uri_ref2",value:function(e,d,i){var s=new Ft([]),a=this.qname(e,d,s);if(a>=0){var l=s[0],u=l[0],o=l[1];if(u==null){en(0,"not used?");var f=this._baseURI+Gp}else{var f=this._bindings[u];if(!f){if(u=="_")return i.push(this.anonymousNode(o)),a;throw Me(this._thisDoc,this.lines,e,d,"Prefix "+u+" not bound.")}}var c=this._store.sym(f+o);return er(this._variables,c)>=0?i.push(this._variables[c]):i.push(c),a}var d=this.skipSpace(e,d);if(d<0)return-1;if(e.charAt(d)=="?"){var _=new Ft([]),a=this.variable(e,d,_);return a>0?(i.push(_[0]),a):-1}else if(e.charAt(d)=="<"){for(var d=d+1,m=d;d<Kt(e);){if(e.charAt(d)==">"){var N=e.slice(m,d);if(this._baseURI)var N=Ba(this._baseURI,N);else en(N.indexOf(":")>=0,"With no base URI, cannot deal with relative URIs");if(e.slice(d-1,d)=="#"&&Oa(N,-1,null)!="#")var N=N+"#";var c=this._store.sym(N);return er(this._variables,c)>=0?i.push(this._variables[c]):i.push(c),d+1}var d=d+1}throw Me(this._thisDoc,this.lines,e,a,"unterminated URI reference")}else if(this.keywordsSet){var _=new Ft([]),a=this.bareWord(e,d,_);if(a<0)return-1;if(er(this.keywords,_[0])>=0)throw Me(this._thisDoc,this.lines,e,d,'Keyword "'+_[0]+'" not allowed here.');return i.push(this._store.sym(this._bindings[""]+_[0])),a}else return-1}},{key:"skipSpace",value:function(e,t){for(var i=` 
\r	\f\v\u2028\u2029`,s=t||0;s<e.length;s++){var a=e.charAt(s);if(i.indexOf(a)<0)if(e.charAt(s)==="#")for(;;s++){if(s===e.length)return-1;if(e.charAt(s)===`
`){this.lines=this.lines+1;break}}else return s;else e.charAt(s)===`
`&&(this.lines=this.lines+1)}return-1}},{key:"variable",value:function(e,a,i){var s=this.skipSpace(e,a);if(s<0||e.slice(s,s+1)!="?")return-1;var s=s+1,a=s;if("0123456789-".indexOf(e.charAt(s))>=0)throw Me(this._thisDoc,this.lines,e,s,"Varible name can't start with '"+e.charAt(s)+"s'");for(;a<Kt(e)&&tn.indexOf(e.charAt(a))<0;)var a=a+1;if(this._parentContext==null)throw Me(this._thisDoc,this.lines,e,s,"Can't use ?xxx syntax for variable in outermost level: "+e.slice(s-1,a));return i.push(this._store.variable(e.slice(s,a))),a}},{key:"bareWord",value:function(e,l,i){var s=this.skipSpace(e,l);if(s<0)return-1;var a=e.charAt(s);if("0123456789-".indexOf(a)>=0||tn.indexOf(a)>=0)return-1;for(var l=s;l<Kt(e)&&tn.indexOf(e.charAt(l))<0;)var l=l+1;return i.push(e.slice(s,l)),l}},{key:"qname",value:function(e,s,i){var s=this.skipSpace(e,s);if(s<0)return-1;var a=e.charAt(s);if("0123456789-+".indexOf(a)>=0)return-1;if(tn.indexOf(a)<0)for(var l=a,s=s+1;s<Kt(e);){var a=e.charAt(s);if(tn.indexOf(a)<0)var l=l+a,s=s+1;else break}else var l="";if(s<Kt(e)&&e.charAt(s)==":"){for(var u=l,s=s+1,l="";s<Kt(e);){var a=e.charAt(s);if(tn.indexOf(a)<0)var l=l+a,s=s+1;else break}return i.push(new It([u,l])),s}else return l&&this.keywordsSet&&er(this.keywords,l)<0?(i.push(new It(["",l])),s):-1}},{key:"object",value:function(e,t,i){var s=this.subject(e,t,i);if(s>=0)return s;var s=this.skipSpace(e,t);if(s<0)return-1;var t=s,a=null,l=e.charAt(t);if(l=='"'||l=="'"){e.slice(t,t+3==l+l)?a=l+l+l:a=l;var t=t+Kt(a),u=this.strconst(e,t,a),s=u[0],o=u[1];return i.push(this._store.literal(o)),s}else return-1}},{key:"nodeOrLiteral",value:function(e,t,i){var s=this.node(e,t,i);if(s>=0)return s;var s=this.skipSpace(e,t);if(s<0)return-1;var t=s,a=e.charAt(t);if("-+0987654321".indexOf(a)>=0){hu.lastIndex=0;var l=hu.exec(e.slice(t));if(l!=null){var u=l[0];s=t+u.length,u.indexOf("T")>=0?i.push(this._store.literal(u,this._store.sym(Zp))):i.push(this._store.literal(u,this._store.sym(Jp)))}else{qa.lastIndex=0;var l=qa.exec(e.slice(t));if(l==null)throw Me(this._thisDoc,this.lines,e,t,"Bad number or date syntax");s=t+qa.lastIndex;var u=e.slice(t,s);u.indexOf("e")>=0?i.push(this._store.literal(parseFloat(u),this._store.sym(Qp))):e.slice(t,s).indexOf(".")>=0?i.push(this._store.literal(parseFloat(u),this._store.sym(Yp))):i.push(this._store.literal(parseInt(u),this._store.sym(Wp)))}return s}if(e.charAt(t)=='"'){if(e.slice(t,t+3)=='"""')var o='"""';else var o='"';var t=t+Kt(o),f=null,c=this.strconst(e,t,o),s=c[0],d=c[1],_=null;if(e.slice(s,s+1)=="@"){ja.lastIndex=0;var l=ja.exec(e.slice(s+1));if(l==null)throw Me(this._thisDoc,startline,e,t,"Bad language code syntax on string literal, after @");var t=ja.lastIndex+s+1,_=e.slice(s+1,t),s=t}if(e.slice(s,s+2)=="^^")var m=new Ft([]),s=this.uri_ref2(e,s+2,m),f=m[0];return i.push(this._store.literal(d,_||f)),s}else return-1}},{key:"strconst",value:function(e,t,i){for(var s=t,a="",l=this.lines;s<Kt(e);){var t=s+Kt(i);if(e.slice(s,t)==i)return new It([t,a]);if(e.charAt(s)=='"'){var a=a+'"',s=s+1;continue}Ma.lastIndex=0;var u=Ma.exec(e.slice(s));if(!u)throw Me(this._thisDoc,l,e,s,"Closing quote missing in string at ^ in "+e.slice(s-20,s)+"^"+e.slice(s,s+20));var t=s+Ma.lastIndex-1,a=a+e.slice(s,t),o=e.charAt(t);if(o=='"'){var s=t;continue}else if(o=="\r"){var s=t+1;continue}else if(o==`
`){if(i=='"')throw Me(this._thisDoc,l,e,t,"newline found in string literal");this.lines=this.lines+1;var a=a+o,s=t+1;this.previousLine=this.startOfLine,this.startOfLine=s}else if(o=="\\"){var s=t+1,o=e.slice(s,s+1);if(!o)throw Me(this._thisDoc,l,e,t,"unterminated string literal (2)");var f=La('abfrtvn\\"',o);if(f>=0)var c=`a\b\f\r	\v
\\"`.charAt(f),a=a+c,s=s+1;else if(o=="u")var d=this.uEscape(e,s+1,l),s=d[0],o=d[1],a=a+o;else if(o=="U")var d=this.UEscape(e,s+1,l),s=d[0],o=d[1],a=a+o;else throw Me(this._thisDoc,this.lines,e,t,"bad escape")}}throw Me(this._thisDoc,this.lines,e,t,"unterminated string literal")}},{key:"uEscape",value:function(e,t,i){for(var s=t,a=0,l=0;a<4;){var u=e.slice(s,s+1),o=u.toLowerCase(),s=s+1;if(o=="")throw Me(this._thisDoc,i,e,t,"unterminated string literal(3)");var f=La("0123456789abcdef",o);if(f<0)throw Me(this._thisDoc,i,e,t,"bad string literal hex escape");var l=l*16+f,a=a+1}var c=String.fromCharCode(l);return new It([s,c])}},{key:"UEscape",value:function(e,t,i){for(var s=t,a=0,l="\\U";a<8;){var u=e.slice(s,s+1),o=u.toLowerCase(),s=s+1;if(o=="")throw Me(this._thisDoc,i,e,t,"unterminated string literal(3)");var f=La("0123456789abcdef",o);if(f<0)throw Me(this._thisDoc,i,e,t,"bad string literal hex escape");var l=l+o,a=a+1}var c=Hp("0x"+Oa(l,2,10)-0);return new It([s,c])}}])}();function Me(n,r,e,t,i){var s=r+1,a="Line "+s+" of <"+n+">: Bad syntax: "+i+`
at: "`+e.slice(t,t+30)+'"',l=new SyntaxError(a,n,s);return l.lineNo=s,l.characterInFile=t,l.syntaxProblem=i,l}function _u(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,t)}return e}function pu(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?_u(Object(e),!0).forEach(function(t){ge(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):_u(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}var Ka=pu(pu({},ar),{},{supports:ge(ge(ge(ge(ge(ge(ge({},Vt.collections,!0),Vt.defaultGraphType,!1),Vt.equalsMethod,!0),Vt.identity,!1),Vt.id,!0),Vt.reversibleId,!1),Vt.variableType,!0),collection:function(r){return new Pr(r)},id:function(r){var e=this;return us(r)?"( ".concat(r.elements.map(function(t){return e.id(t)}).join(", ")," )"):I_(r)?un.toString(r):ar.id(r)},termToNQ:function(r){return r.termType===Hr?Pr.toNT(r):ar.termToNQ(r)}});function ys(n,r){return typeof r=="string"?n.rdfFactory.literal(r):Object.prototype.hasOwnProperty.call(r,"@list")?n.rdfFactory.supports.COLLECTIONS===!0?t0(n,r["@list"]):e0(n,r):Object.prototype.hasOwnProperty.call(r,"@id")?Ds(n,r):Object.prototype.hasOwnProperty.call(r,"@language")?n.rdfFactory.literal(r["@value"],r["@language"]):Object.prototype.hasOwnProperty.call(r,"@type")?n.rdfFactory.literal(r["@value"],n.rdfFactory.namedNode(r["@type"])):Object.prototype.hasOwnProperty.call(r,"@value")?n.rdfFactory.literal(r["@value"]):n.rdfFactory.literal(r)}function e0(n,r){var e=r["@id"]?Ds(n,r):n.rdfFactory.blankNode(),t=r["@list"].map(function(s){return ys(n,s)}),i=nc(n.rdfFactory,e,t);return n.addAll(i),e}function t0(n,r){if(!Array.isArray(r))throw new TypeError("Object must be an array");return n.rdfFactory.collection(r.map(function(e){return ys(n,e)}))}function oc(n,r,e,t){var i=e&&Object.prototype.hasOwnProperty.call(e,"termType")?e.value:e;return r_(()=>import("../chunks/jsonld.OPIS_L8g.js").then(s=>s.j),__vite__mapDeps([0,1,2]),import.meta.url).then(function(s){return s.flatten(JSON.parse(n),null,{base:i})}).then(function(s){return s.reduce(function(a,l){return r=fc(r,e,l),r},r)}).then(t).catch(t)}function Ds(n,r){return r["@id"].startsWith("_:")?n.rdfFactory.blankNode(r["@id"].substring(2)):n.rdfFactory.namedNode(r["@id"])}function fc(n,r,e){for(var t=e["@id"]?Ds(n,e):n.rdfFactory.blankNode(),i=0,s=Object.keys(e);i<s.length;i++){var a=s[i];if(a!=="@id"){if(a=="@graph")for(var l=t,u=e[a],o=0;o<u.length;o++)n=fc(n,l,u[o]);var f=e[a];if(Array.isArray(f))for(var c=0;c<f.length;c++)n.addStatement(gu(n,t,a,f[c],r));else n.addStatement(gu(n,t,a,f,r))}}return n}function gu(n,r,e,t,i){var s,a;return e==="@type"?(s=n.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),a=n.rdfFactory.namedNode(t)):(s=n.rdfFactory.namedNode(e),a=ys(n,t)),n.rdfFactory.quad(r,s,a,n.rdfFactory.namedNode(i))}/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let mu;var r0=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:ss):n=>(mu||(mu=Promise.resolve())).then(n).catch(r=>setTimeout(()=>{throw r},0));const n0=ua(r0),Gn="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Wn="http://www.w3.org/2001/XMLSchema#",Pa="http://www.w3.org/2000/10/swap/",pr={xsd:{decimal:`${Wn}decimal`,boolean:`${Wn}boolean`,double:`${Wn}double`,integer:`${Wn}integer`,string:`${Wn}string`},rdf:{type:`${Gn}type`,nil:`${Gn}nil`,first:`${Gn}first`,rest:`${Gn}rest`,langString:`${Gn}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${Pa}reify#forSome`,forAll:`${Pa}reify#forAll`},log:{implies:`${Pa}log#implies`}},{xsd:Ui}=pr,i0=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,vu={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},a0=/[\x00-\x20<>\\"\{\}\|\^\`]/,s0={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},l0=/$0^/;class u0{constructor(r){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,r=r||{},this._lineMode=!!r.lineMode){this._n3Mode=!1;for(const e in this)!(e in s0)&&this[e]instanceof RegExp&&(this[e]=l0)}else this._n3Mode=r.n3!==!1;this._comments=!!r.comments,this._literalClosingPos=0}_tokenizeToEnd(r,e){let t=this._input,i=t.length;for(;;){let l,u;for(;l=this._newline.exec(t);)this._comments&&(u=this._comment.exec(l[0]))&&s("comment",u[1],"",this._line,l[0].length),t=t.substr(l[0].length,t.length),i=t.length,this._line++;if(!l&&(l=this._whitespace.exec(t))&&(t=t.substr(l[0].length,t.length)),this._endOfFile.test(t))return e&&(this._comments&&(u=this._comment.exec(t))&&s("comment",u[1],"",this._line,t.length),t=null,s("eof","","",this._line,0)),this._input=t;const o=this._line,f=t[0];let c="",d="",_="",m=null,N=0,w=!1;switch(f){case"^":if(t.length<3)break;if(t[1]==="^"){if(this._previousMarker="^^",t=t.substr(2),t[0]!=="<"){w=!0;break}}else{this._n3Mode&&(N=1,c="^");break}case"<":if(m=this._unescapedIri.exec(t))c="IRI",d=m[1];else if(m=this._iri.exec(t)){if(d=this._unescape(m[1]),d===null||a0.test(d))return a(this);c="IRI"}else t.length>1&&t[1]==="<"?(c="<<",N=2):this._n3Mode&&t.length>1&&t[1]==="="&&(c="inverse",N=2,d=">");break;case">":t.length>1&&t[1]===">"&&(c=">>",N=2);break;case"_":((m=this._blank.exec(t))||e&&(m=this._blank.exec(`${t} `)))&&(c="blank",_="_",d=m[1]);break;case'"':if(m=this._simpleQuotedString.exec(t))d=m[1];else if({value:d,matchLength:N}=this._parseLiteral(t),d===null)return a(this);(m!==null||N!==0)&&(c="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(m=this._simpleApostropheString.exec(t))d=m[1];else if({value:d,matchLength:N}=this._parseLiteral(t),d===null)return a(this);(m!==null||N!==0)&&(c="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(m=this._variable.exec(t))&&(c="var",d=m[0]);break;case"@":this._previousMarker==="literal"&&(m=this._langcode.exec(t))?(c="langcode",d=m[1]):(m=this._keyword.exec(t))&&(c=m[0]);break;case".":if(t.length===1?e:t[1]<"0"||t[1]>"9"){c=".",N=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(m=this._number.exec(t)||e&&(m=this._number.exec(`${t} `)))&&(c="literal",d=m[0],_=typeof m[1]=="string"?Ui.double:typeof m[2]=="string"?Ui.decimal:Ui.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(m=this._sparqlKeyword.exec(t))?c=m[0].toUpperCase():w=!0;break;case"f":case"t":(m=this._boolean.exec(t))?(c="literal",d=m[0],_=Ui.boolean):w=!0;break;case"a":(m=this._shortPredicates.exec(t))?(c="abbreviation",d="a"):w=!0;break;case"=":this._n3Mode&&t.length>1&&(c="abbreviation",t[1]!==">"?(N=1,d="="):(N=2,d=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(N=1,c=f);break;case"{":!this._lineMode&&t.length>=2&&(t[1]==="|"?(c="{|",N=2):(c=f,N=1));break;case"|":t.length>=2&&t[1]==="}"&&(c="|}",N=2);break;default:w=!0}if(w&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(m=this._prefix.exec(t))?(c="prefix",d=m[1]||""):((m=this._prefixed.exec(t))||e&&(m=this._prefixed.exec(`${t} `)))&&(c="prefixed",_=m[1]||"",d=this._unescape(m[2]))),this._previousMarker==="^^")switch(c){case"prefixed":c="type";break;case"IRI":c="typeIRI";break;default:c=""}if(!c)return e||!/^'''|^"""/.test(t)&&/\n|\r/.test(t)?a(this):this._input=t;const R=N||m[0].length,j=s(c,d,_,o,R);this.previousToken=j,this._previousMarker=c,t=t.substr(R,t.length)}function s(l,u,o,f,c){const d=t?i-t.length:i,_=d+c,m={type:l,value:u,prefix:o,line:f,start:d,end:_};return r(null,m),m}function a(l){r(l._syntaxError(/^\S*/.exec(t)[0]))}}_unescape(r){let e=!1;const t=r.replace(i0,(i,s,a,l)=>{if(typeof s=="string")return String.fromCharCode(Number.parseInt(s,16));if(typeof a=="string"){let u=Number.parseInt(a,16);return u<=65535?String.fromCharCode(Number.parseInt(a,16)):String.fromCharCode(55296+((u-=65536)>>10),56320+(u&1023))}return l in vu?vu[l]:(e=!0,"")});return e?null:t}_parseLiteral(r){if(r.length>=3){const e=r.match(/^(?:"""|"|'''|'|)/)[0],t=e.length;let i=Math.max(this._literalClosingPos,t);for(;(i=r.indexOf(e,i))>0;){let s=0;for(;r[i-s-1]==="\\";)s++;if(s%2===0){const a=r.substring(t,i),l=a.split(/\r\n|\r|\n/).length-1,u=i+t;if(t===1&&l!==0||t===3&&this._lineMode)break;return this._line+=l,{value:this._unescape(a),matchLength:u}}i++}this._literalClosingPos=r.length-t+1}return{value:"",matchLength:0}}_syntaxError(r){this._input=null;const e=new Error(`Unexpected "${r}" on line ${this._line}.`);return e.context={token:void 0,line:this._line,previousToken:this.previousToken},e}_readStartingBom(r){return r.startsWith("\uFEFF")?r.substr(1):r}tokenize(r,e){if(this._line=1,typeof r=="string")if(this._input=this._readStartingBom(r),typeof e=="function")n0(()=>this._tokenizeToEnd(e,!0));else{const t=[];let i;if(this._tokenizeToEnd((s,a)=>s?i=s:t.push(a),!0),i)throw i;return t}else this._pendingBuffer=null,typeof r.setEncoding=="function"&&r.setEncoding("utf8"),r.on("data",t=>{this._input!==null&&t.length!==0&&(this._pendingBuffer&&(t=t_.Buffer.concat([this._pendingBuffer,t]),this._pendingBuffer=null),t[t.length-1]&128?this._pendingBuffer=t:(typeof this._input>"u"?this._input=this._readStartingBom(typeof t=="string"?t:t.toString()):this._input+=t,this._tokenizeToEnd(e,!1)))}),r.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(e,!0)}),r.on("error",e)}}const{rdf:o0,xsd:Dn}=pr;let da,f0=0;const c0={namedNode:g0,blankNode:m0,variable:b0,literal:v0,defaultGraph:w0,quad:bu,triple:bu};class Xr{constructor(r){this.id=r}get value(){return this.id}equals(r){return r instanceof Xr?this.id===r.id:!!r&&this.termType===r.termType&&this.value===r.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}let cc=class extends Xr{get termType(){return"NamedNode"}},Ua=class dc extends Xr{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const r=this.id;let e=r.lastIndexOf('"')+1;return e<r.length&&r[e++]==="@"?r.substr(e).toLowerCase():""}get datatype(){return new cc(this.datatypeString)}get datatypeString(){const r=this.id,e=r.lastIndexOf('"')+1,t=e<r.length?r[e]:"";return t==="^"?r.substr(e+2):t!=="@"?Dn.string:o0.langString}equals(r){return r instanceof dc?this.id===r.id:!!r&&!!r.datatype&&this.termType===r.termType&&this.value===r.value&&this.language===r.language&&this.datatype.value===r.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}},d0=class extends Xr{constructor(r){super(`_:${r}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}},h0=class extends Xr{constructor(r){super(`?${r}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}},_0=class extends Xr{constructor(){return super(""),da||this}get termType(){return"DefaultGraph"}equals(r){return this===r||!!r&&this.termType===r.termType}};da=new _0;let p0=class extends Xr{constructor(r,e,t,i){super(""),this._subject=r,this._predicate=e,this._object=t,this._graph=i||da}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(r){return!!r&&this._subject.equals(r.subject)&&this._predicate.equals(r.predicate)&&this._object.equals(r.object)&&this._graph.equals(r.graph)}};function g0(n){return new cc(n)}function m0(n){return new d0(n||`n3-${f0++}`)}function v0(n,r){if(typeof r=="string")return new Ua(`"${n}"@${r.toLowerCase()}`);let e=r?r.value:"";return e===""&&(typeof n=="boolean"?e=Dn.boolean:typeof n=="number"&&(Number.isFinite(n)?e=Number.isInteger(n)?Dn.integer:Dn.double:(e=Dn.double,Number.isNaN(n)||(n=n>0?"INF":"-INF")))),e===""||e===Dn.string?new Ua(`"${n}"`):new Ua(`"${n}"^^${e}`)}function b0(n){return new h0(n)}function w0(){return da}function bu(n,r,e,t){return new p0(n,r,e,t)}let wu=0;class hc{constructor(r){this._contextStack=[],this._graph=null,r=r||{},this._setBase(r.baseIRI),r.factory&&_c(this,r.factory);const e=typeof r.format=="string"?r.format.match(/\w*$/)[0].toLowerCase():"",t=/turtle/.test(e),i=/trig/.test(e),s=/triple/.test(e),a=/quad/.test(e),l=this._n3Mode=/n3/.test(e),u=s||a;(this._supportsNamedGraphs=!(t||l))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(t||i||s||l),this._supportsRDFStar=e===""||/star|\*$/.test(e),u&&(this._resolveRelativeIRI=o=>null),this._blankNodePrefix=typeof r.blankNodePrefix!="string"?"":r.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=r.lexer||new u0({lineMode:u,n3:l}),this._explicitQuantifiers=!!r.explicitQuantifiers}static _resetBlankNodePrefix(){wu=0}_setBase(r){if(!r)this._base="",this._basePath="";else{const e=r.indexOf("#");e>=0&&(r=r.substr(0,e)),this._base=r,this._basePath=r.indexOf("/")<0?r:r.replace(/[^\/?]*(?:\?.*)?$/,""),r=r.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=r[0],this._baseScheme=r[1]}}_saveContext(r,e,t,i,s){const a=this._n3Mode;this._contextStack.push({type:r,subject:t,predicate:i,object:s,graph:e,inverse:a?this._inversePredicate:!1,blankPrefix:a?this._prefixes._:"",quantified:a?this._quantified:null}),a&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(r,e){const t=this._contextStack.pop();if(!t||t.type!==r)return this._error(`Unexpected ${e.type}`,e);this._subject=t.subject,this._predicate=t.predicate,this._object=t.object,this._graph=t.graph,this._n3Mode&&(this._inversePredicate=t.inverse,this._prefixes._=t.blankPrefix,this._quantified=t.quantified)}_readInTopContext(r){switch(r.type){case"eof":return this._graph!==null?this._error("Unclosed graph",r):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(r)}}_readEntity(r,e){let t;switch(r.type){case"IRI":case"typeIRI":const i=this._resolveIRI(r.value);if(i===null)return this._error("Invalid IRI",r);t=this._namedNode(i);break;case"type":case"prefixed":const s=this._prefixes[r.prefix];if(s===void 0)return this._error(`Undefined prefix "${r.prefix}:"`,r);t=this._namedNode(s+r.value);break;case"blank":t=this._blankNode(this._prefixes[r.prefix]+r.value);break;case"var":t=this._variable(r.value.substr(1));break;default:return this._error(`Expected entity but got ${r.type}`,r)}return!e&&this._n3Mode&&t.id in this._quantified&&(t=this._quantified[t.id]),t}_readSubject(r){switch(this._predicate=null,r.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",r);case"}":return this._readPunctuation(r);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',r);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',r);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",r);if(r.prefix.length===0)return this._literalValue=r.value,this._completeSubjectLiteral;this._subject=this._literal(r.value,this._namedNode(r.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",r);default:if((this._subject=this._readEntity(r))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(r){const e=r.type;switch(e){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[r.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${e}`,r):(this._subject=null,e==="]"?this._readBlankNodeTail(r):this._readPunctuation(r));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",r);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",r);default:if((this._predicate=this._readEntity(r))===void 0)return}return this._readObject}_readObject(r){switch(r.type){case"literal":if(r.prefix.length===0)return this._literalValue=r.value,this._readDataTypeOrLang;this._object=this._literal(r.value,this._namedNode(r.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",r);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",r);default:if((this._object=this._readEntity(r))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(r){return r.type==="{"?this._readGraph(r):this._readPredicate(r)}_readGraph(r){return r.type!=="{"?this._error(`Expected graph but got ${r.type}`,r):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(r){return r.type==="]"?(this._subject=null,this._readBlankNodeTail(r)):(this._predicate=null,this._readPredicate(r))}_readBlankNodeTail(r){if(r.type!=="]")return this._readBlankNodePunctuation(r);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const e=this._predicate===null;return this._restoreContext("blank",r),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:e?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(r){switch(r.type){case".":case"}":return this._subject=null,this._readPunctuation(r);default:return this._readPredicate(r)}}_readListItem(r){let e=null,t=null,i=this._readListItem;const s=this._subject,a=this._contextStack,l=a[a.length-1];switch(r.type){case"[":this._saveContext("blank",this._graph,t=this._blankNode(),this.RDF_FIRST,this._subject=e=this._blankNode()),i=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,t=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",r),a.length!==0&&a[a.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(i=this._readPredicate,this._subject===this.RDF_NIL)return i}else if(i=this._getContextEndReader(),this._object===this.RDF_NIL)return i;t=this.RDF_NIL;break;case"literal":r.prefix.length===0?(this._literalValue=r.value,i=this._readListItemDataTypeOrLang):(e=this._literal(r.value,this._namedNode(r.prefix)),i=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",r);default:if((e=this._readEntity(r))===void 0)return}if(t===null&&(this._subject=t=this._blankNode()),s===null?l.predicate===null?l.subject=t:l.object=t:this._emit(s,this.RDF_REST,t,this._graph),e!==null){if(this._n3Mode&&(r.type==="IRI"||r.type==="prefixed"))return this._saveContext("item",this._graph,t,this.RDF_FIRST,e),this._subject=e,this._predicate=null,this._getPathReader(this._readListItem);this._emit(t,this.RDF_FIRST,e,this._graph)}return i}_readDataTypeOrLang(r){return this._completeObjectLiteral(r,!1)}_readListItemDataTypeOrLang(r){return this._completeObjectLiteral(r,!0)}_completeLiteral(r){let e=this._literal(this._literalValue);switch(r.type){case"type":case"typeIRI":const t=this._readEntity(r);if(t===void 0)return;e=this._literal(this._literalValue,t),r=null;break;case"langcode":e=this._literal(this._literalValue,r.value),r=null;break}return{token:r,literal:e}}_completeSubjectLiteral(r){return this._subject=this._completeLiteral(r).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(r,e){const t=this._completeLiteral(r);if(t)return this._object=t.literal,e&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),t.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(t.token))}_readFormulaTail(r){return r.type!=="}"?this._readPunctuation(r):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",r),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(r){let e,t=this._graph;const i=this._subject,s=this._inversePredicate;switch(r.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",r);if(this._n3Mode)return this._readFormulaTail(r);this._graph=null;case".":this._subject=null,e=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":e=this._readPredicate;break;case",":e=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF* syntax",r);const a=this._predicate,l=this._object;this._subject=this._quad(i,a,l,this.DEFAULTGRAPH),e=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",r);this._subject=null,e=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(t=this._readEntity(r))!==void 0){e=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,r)}if(i!==null){const a=this._predicate,l=this._object;s?this._emit(l,a,i,t):this._emit(i,a,l,t)}return e}_readBlankNodePunctuation(r){let e;switch(r.type){case";":e=this._readPredicate;break;case",":e=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,r)}return this._emit(this._subject,this._predicate,this._object,this._graph),e}_readQuadPunctuation(r){return r.type!=="."?this._error("Expected dot to follow quad",r):this._readInTopContext}_readPrefix(r){return r.type!=="prefix"?this._error("Expected prefix to follow @prefix",r):(this._prefix=r.value,this._readPrefixIRI)}_readPrefixIRI(r){if(r.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,r);const e=this._readEntity(r);return this._prefixes[this._prefix]=e.value,this._prefixCallback(this._prefix,e),this._readDeclarationPunctuation}_readBaseIRI(r){const e=r.type==="IRI"&&this._resolveIRI(r.value);return e?(this._setBase(e),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",r)}_readNamedGraphLabel(r){switch(r.type){case"IRI":case"blank":case"prefixed":return this._readSubject(r),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",r)}}_readNamedGraphBlankLabel(r){return r.type!=="]"?this._error("Invalid graph label",r):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(r){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(r)):r.type!=="."?this._error("Expected declaration to end with a dot",r):this._readInTopContext}_readQuantifierList(r){let e;switch(r.type){case"IRI":case"prefixed":if((e=this._readEntity(r,!0))!==void 0)break;default:return this._error(`Unexpected ${r.type}`,r)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,e,this.QUANTIFIERS_GRAPH)):this._quantified[e.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(r){return r.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(r))}_getPathReader(r){return this._afterPath=r,this._readPath}_readPath(r){switch(r.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const e=this._contextStack,t=e.length&&e[e.length-1];if(t&&t.type==="item"){const i=this._subject;this._restoreContext("item",r),this._emit(this._subject,this.RDF_FIRST,i,this._graph)}return this._afterPath(r)}}_readForwardPath(r){let e,t;const i=this._blankNode();if((t=this._readEntity(r))!==void 0)return this._predicate===null?(e=this._subject,this._subject=i):(e=this._object,this._object=i),this._emit(e,t,i,this._graph),this._readPath}_readBackwardPath(r){const e=this._blankNode();let t,i;if((t=this._readEntity(r))!==void 0)return this._predicate===null?(i=this._subject,this._subject=e):(i=this._object,this._object=e),this._emit(e,t,i,this._graph),this._readPath}_readRDFStarTailOrGraph(r){return r.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(r))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,r):this._readRDFStarTail(r)}_readRDFStarTail(r){if(r.type!==">>")return this._error(`Expected >> but got ${r.type}`,r);const e=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",r),this._subject===null?(this._subject=e,this._readPredicate):(this._object=e,this._getContextEndReader())}_getContextEndReader(){const r=this._contextStack;if(!r.length)return this._readPunctuation;switch(r[r.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(r,e,t,i){this._callback(null,this._quad(r,e,t,i||this.DEFAULTGRAPH))}_error(r,e){const t=new Error(`${r} on line ${e.line}.`);t.context={token:e,line:e.line,previousToken:this._lexer.previousToken},this._callback(t),this._callback=xa}_resolveIRI(r){return/^[a-z][a-z0-9+.-]*:/i.test(r)?r:this._resolveRelativeIRI(r)}_resolveRelativeIRI(r){if(!r.length)return this._base;switch(r[0]){case"#":return this._base+r;case"?":return this._base.replace(/(?:\?.*)?$/,r);case"/":return(r[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(r);default:return/^[^/:]*:/.test(r)?null:this._removeDotSegments(this._basePath+r)}}_removeDotSegments(r){if(!/(^|\/)\.\.?($|[/#?])/.test(r))return r;const e=r.length;let t="",i=-1,s=-1,a=0,l="/";for(;i<e;){switch(l){case":":if(s<0&&r[++i]==="/"&&r[++i]==="/")for(;(s=i+1)<e&&r[s]!=="/";)i=s;break;case"?":case"#":i=e;break;case"/":if(r[i+1]===".")switch(l=r[++i+1],l){case"/":t+=r.substring(a,i-1),a=i+1;break;case void 0:case"?":case"#":return t+r.substring(a,i)+r.substr(i+1);case".":if(l=r[++i+1],l===void 0||l==="/"||l==="?"||l==="#"){if(t+=r.substring(a,i-2),(a=t.lastIndexOf("/"))>=s&&(t=t.substr(0,a)),l!=="/")return`${t}/${r.substr(i+1)}`;a=i+1}}}l=r[++i]}return t+r.substring(a)}parse(r,e,t){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${wu++}_`,this._prefixCallback=t||xa,this._inversePredicate=!1,this._quantified=Object.create(null),!e){const i=[];let s;if(this._callback=(a,l)=>{a?s=a:l&&i.push(l)},this._lexer.tokenize(r).every(a=>this._readCallback=this._readCallback(a)),s)throw s;return i}this._callback=e,this._lexer.tokenize(r,(i,s)=>{i!==null?(this._callback(i),this._callback=xa):this._readCallback&&(this._readCallback=this._readCallback(s))})}}function xa(){}function _c(n,r){const e=r.namedNode;n._namedNode=e,n._blankNode=r.blankNode,n._literal=r.literal,n._variable=r.variable,n._quad=r.quad,n.DEFAULTGRAPH=r.defaultGraph(),n.RDF_FIRST=e(pr.rdf.first),n.RDF_REST=e(pr.rdf.rest),n.RDF_NIL=e(pr.rdf.nil),n.N3_FORALL=e(pr.r.forAll),n.N3_FORSOME=e(pr.r.forSome),n.ABBREVIATIONS={a:e(pr.rdf.type),"=":e(pr.owl.sameAs),">":e(pr.log.implies)},n.QUANTIFIERS_GRAPH=e("urn:n3:quantifiers")}_c(hc.prototype,c0);if(typeof jr>"u")var jr={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};var rr=function(){function n(r,e){ht(this,n),this.options=e||{},this.kb=r,this.target=e.target||{graph:{subjects:{},prefixes:{},terms:{}}},this.blankNodes=[],this.htmlOptions={selfClosing:"br img input area base basefont col colgroup source wbr isindex link meta param hr"},this.theOne="_:"+new Date().getTime(),this.language=null,this.vocabulary=null,this.blankCounter=0,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}],this.inXHTMLMode=!1,this.absURIRE=/[\w\_\-]+:\S+/,this.finishedHandlers=[],this.init()}return dt(n,[{key:"addTriple",value:function(e,t,i,s){var a,l,u,o;typeof t>"u"?a=ar.namedNode(this.options.base):a=this.toRDFNodeObject(t),u=this.toRDFNodeObject(i),l=this.toRDFNodeObject(s),o=ar.namedNode(this.options.base),this.kb.add(a,u,l,o)}},{key:"ancestorPath",value:function(e){for(var t="";e&&e.nodeType!==jr.DOCUMENT_NODE;)t="/"+e.localName+t,e=e.parentNode;return t}},{key:"copyMappings",value:function(e){var t={};for(var i in e)t[i]=e[i];return t}},{key:"copyProperties",value:function(){}},{key:"deriveDateTimeType",value:function(e){for(var t=0;t<n.dateTimeTypes.length;t++){var i=n.dateTimeTypes[t].pattern.exec(e);if(i&&i[0].length===e.length)return n.dateTimeTypes[t].type}return null}},{key:"init",value:function(){}},{key:"newBlankNode",value:function(){return this.blankCounter++,"_:"+this.blankCounter}},{key:"newSubjectOrigin",value:function(e,t){}},{key:"parseCURIE",value:function(e,t,i){var s=e.indexOf(":"),a;if(s>=0){var l=e.substring(0,s);if(l==="")return a=t[""],a?a+e.substring(s+1):null;if(l==="_")return"_:"+e.substring(s+1);if(n.NCNAME.test(l)&&(a=t[l],a))return a+e.substring(s+1)}return null}},{key:"parseCURIEOrURI",value:function(e,t,i){var s=this.parseCURIE(e,t,i);return s||this.resolveAndNormalize(i,e)}},{key:"parsePredicate",value:function(e,t,i,s,a,l){if(e==="")return null;var u=this.parseTermOrCURIEOrAbsURI(e,t,l?null:i,s,a);return u&&u.indexOf("_:")===0?null:u}},{key:"parsePrefixMappings",value:function(e,t){for(var i=this.tokenize(e),s=null,a=0;a<i.length;a++)i[a][i[a].length-1]===":"?s=i[a].substring(0,i[a].length-1):s&&(t[s]=this.options.base?tr(i[a],this.options.base):i[a],s=null)}},{key:"parseSafeCURIEOrCURIEOrURI",value:function(e,t,i){return e=this.trim(e),e.charAt(0)==="["&&e.charAt(e.length-1)==="]"?(e=e.substring(1,e.length-1),e=e.trim(e),e.length===0?null:e==="_:"?this.theOne:this.parseCURIE(e,t,i)):this.parseCURIEOrURI(e,t,i)}},{key:"parseTermOrCURIEOrAbsURI",value:function(e,t,i,s,a){e=this.trim(e);var l=this.parseCURIE(e,s,a);if(l)return l;if(i){if(t&&!this.absURIRE.exec(e))return t+e;var u=i[e];if(u)return u;var o=e.toLowerCase();if(u=i[o],u)return u}return this.absURIRE.exec(e)?this.resolveAndNormalize(a,e):null}},{key:"parseTermOrCURIEOrURI",value:function(e,t,i,s,a){e=this.trim(e);var l=this.parseCURIE(e,s,a);if(l)return l;var u=i[e];if(u)return u;var o=e.toLowerCase();return u=i[o],u||(t&&!this.absURIRE.exec(e)?t+e:this.resolveAndNormalize(a,e))}},{key:"parseURI",value:function(e){return e}},{key:"process",value:function(e,t){t=t||{};var i;e.nodeType===jr.DOCUMENT_NODE?(e.baseURI&&!t.baseURI&&(t.baseURI=e.baseURI),i=e.baseURI,e=e.documentElement,e.baseURI||(e.baseURI=i),this.setContext(e)):e.parentNode.nodeType===jr.DOCUMENT_NODE&&this.setContext(e);var s=[],a=function(Er){if(!Er&&t&&t.baseURI)return t.baseURI;var jn=Er.indexOf("#");return jn>=0&&(Er=Er.substring(0,jn)),t&&t.baseURIMap&&(Er=t.baseURIMap(Er)),Er};for(s.push({current:e,context:this.push(null,a(e.baseURI))});s.length>0;){var l=s.shift();if(l.parent){if(l.context.parent&&l.context.parent.listMapping===l.listMapping)continue;for(var u in l.listMapping){var o=l.listMapping[u];if(o.length===0){this.addTriple(l.parent,l.subject,u,{type:n.objectURI,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});continue}for(var f=[],c=0;c<o.length;c++)f.push(this.newBlankNode());for(var d=0;d<f.length;d++)this.addTriple(l.parent,f[d],"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",o[d]),this.addTriple(l.parent,f[d],"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",{type:n.objectURI,value:d+1<f.length?f[d+1]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});this.addTriple(l.parent,l.subject,u,{type:n.objectURI,value:f[0]})}continue}var _=l.current,m=l.context,N=!1,w=null,R=null,j=null,T=m.prefixes,S=!1,v=[],C=m.listMapping,D=!m.parent,P=m.language,B=m.vocabulary;i=this.parseURI(a(_.baseURI)),_.item=null;var F=_.getAttributeNode("vocab");if(F){var b=this.trim(F.value);if(b.length>0){B=b;var y=i.spec;this.addTriple(_,y,"http://www.w3.org/ns/rdfa#usesVocabulary",{type:n.objectURI,value:B})}else B=this.vocabulary}for(var I=0;I<_.attributes.length;I++){var k=_.attributes[I];if(k.nodeName.charAt(0)==="x"&&k.nodeName.indexOf("xmlns:")===0){S||(T=this.copyMappings(T),S=!0);var V=k.nodeName.substring(6),L=n.trim(k.value);T[V]=this.options.base?tr(L,this.options.base):L}}var H=_.getAttributeNode("prefix");H&&(S||(T=this.copyMappings(T),S=!0),this.parsePrefixMappings(H.value,T));for(var le=null,Y=0;!le&&Y<this.langAttributes.length;Y++)le=_.getAttributeNodeNS(this.langAttributes[Y].namespaceURI,this.langAttributes[Y].localName);if(le){var x=n.trim(le.value);x.length>0?P=x:P=null}var U=_.getAttributeNode("rel"),Q=_.getAttributeNode("rev"),X=_.getAttributeNode("typeof"),ee=_.getAttributeNode("property"),Ce=_.getAttributeNode("datatype"),Se=this.inHTMLMode?_.getAttributeNode("datetime"):null,he=_.getAttributeNode("content"),pe=_.getAttributeNode("about"),ie=_.getAttributeNode("src"),De=_.getAttributeNode("resource"),Pe=_.getAttributeNode("href"),et=_.getAttributeNode("inlist"),Be=[],Z,_e;if(U){_e=this.tokenize(U.value);for(var Te=0;Te<_e.length;Te++)Z=this.parsePredicate(_e[Te],B,m.terms,T,i,this.inHTMLMode&&ee!==null),Z&&Be.push(Z)}var xe=[];if(Q){_e=this.tokenize(Q.value);for(var je=0;je<_e.length;je++)Z=this.parsePredicate(_e[je],B,m.terms,T,i,this.inHTMLMode&&ee),Z&&xe.push(Z)}if(this.inHTMLMode&&(U||Q)&&ee&&(Be.length===0&&(U=null),xe.length===0&&(Q=null)),U||Q?(pe&&(w=this.parseSafeCURIEOrCURIEOrURI(pe.value,T,i)),X&&(j=w),w||(_.parentNode.nodeType===jr.DOCUMENT_NODE?w=a(_.baseURI):m.parentObject&&(w=a(_.parentNode.baseURI)===m.parentObject?a(_.baseURI):m.parentObject)),De&&(R=this.parseSafeCURIEOrCURIEOrURI(De.value,T,i)),R||(Pe?R=this.resolveAndNormalize(i,encodeURI(Pe.value)):ie?R=this.resolveAndNormalize(i,encodeURI(ie.value)):X&&!pe&&!(this.inXHTMLMode&&(_.localName==="head"||_.localName==="body"))&&(R=this.newBlankNode())),X&&!pe&&this.inXHTMLMode&&(_.localName==="head"||_.localName==="body")?j=w:X&&!pe&&(j=R)):ee&&!he&&!Ce?(pe&&(w=this.parseSafeCURIEOrCURIEOrURI(pe.value,T,i),X&&(j=w)),!w&&_.parentNode.nodeType===jr.DOCUMENT_NODE?(w=a(_.baseURI),X&&(j=w)):!w&&m.parentObject&&(w=a(_.parentNode.baseURI)===m.parentObject?a(_.baseURI):m.parentObject),X&&!j&&(De&&(j=this.parseSafeCURIEOrCURIEOrURI(De.value,T,i)),!j&&Pe&&(j=this.resolveAndNormalize(i,encodeURI(Pe.value))),!j&&ie&&(j=this.resolveAndNormalize(i,encodeURI(ie.value))),!j&&(this.inXHTMLMode||this.inHTMLMode)&&(_.localName==="head"||_.localName==="body")&&(j=w),j||(j=this.newBlankNode()),R=j)):(pe&&(w=this.parseSafeCURIEOrCURIEOrURI(pe.value,T,i)),!w&&De&&(w=this.parseSafeCURIEOrCURIEOrURI(De.value,T,i)),!w&&Pe&&(w=this.resolveAndNormalize(i,encodeURI(Pe.value))),!w&&ie&&(w=this.resolveAndNormalize(i,encodeURI(ie.value))),w||(_.parentNode.nodeType===jr.DOCUMENT_NODE?w=a(_.baseURI):(this.inXHTMLMode||this.inHTMLMode)&&(_.localName==="head"||_.localName==="body")?w=a(_.parentNode.baseURI)===m.parentObject?a(_.baseURI):m.parentObject:X?w=this.newBlankNode():m.parentObject&&(w=a(_.parentNode.baseURI)===m.parentObject?a(_.baseURI):m.parentObject,ee||(N=!0))),X&&(j=w)),w&&(pe||De||j)){var $e=w;X&&!pe&&!De&&R&&($e=R),this.newSubjectOrigin(_,$e)}if(j){_e=this.tokenize(X.value);for(var Ke=0;Ke<_e.length;Ke++){var jt=this.parseTermOrCURIEOrAbsURI(_e[Ke],B,m.terms,T,i);jt&&this.addTriple(_,j,n.typeURI,{type:n.objectURI,value:jt})}}if(w&&w!==m.parentObject&&(C={},D=!0),R){if(U&&et)for(var Pt=0;Pt<Be.length;Pt++){var nr=C[Be[Pt]];nr||(nr=[],C[Be[Pt]]=nr),nr.push({type:n.objectURI,value:R})}else if(U)for(var st=0;st<Be.length;st++)this.addTriple(_,w,Be[st],{type:n.objectURI,value:R});if(Q)for(var Ne=0;Ne<xe.length;Ne++)this.addTriple(_,R,xe[Ne],{type:n.objectURI,value:w})}else{if(w&&!R&&(U||Q)&&(R=this.newBlankNode()),U&&et)for(var qe=0;qe<Be.length;qe++){var Qe=C[Be[qe]];Qe||(Qe=[],C[Z]=Qe),v.push({predicate:Be[qe],list:Qe})}else if(U)for(var St=0;St<Be.length;St++)v.push({predicate:Be[St],forward:!0});if(Q)for(var Qt=0;Qt<xe.length;Qt++)v.push({predicate:xe[Qt],forward:!1})}if(ee){var tt=null,wt=null;Ce?(tt=Ce.value===""?n.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(Ce.value,B,m.terms,T,i),Se&&!he?wt=Se.value:wt=tt===n.XMLLiteralURI||tt===n.HTMLLiteralURI?null:he?he.value:_.textContent):he?(tt=n.PlainLiteralURI,wt=he.value):Se?(wt=Se.value,tt=n.deriveDateTimeType(wt),tt||(tt=n.PlainLiteralURI)):!U&&!Q&&(De&&(wt=this.parseSafeCURIEOrCURIEOrURI(De.value,T,i)),!wt&&Pe?wt=this.resolveAndNormalize(i,encodeURI(Pe.value)):!wt&&ie&&(wt=this.resolveAndNormalize(i,encodeURI(ie.value))),wt&&(tt=n.objectURI)),tt||(X&&!pe?(tt=n.objectURI,wt=j):(wt=_.textContent,this.inHTMLMode&&_.localName==="time"&&(tt=n.deriveDateTimeType(wt)),tt||(tt=n.PlainLiteralURI))),_e=this.tokenize(ee.value);for(var Mn=0;Mn<_e.length;Mn++){var Qr=this.parsePredicate(_e[Mn],B,m.terms,T,i);if(Qr)if(et){var hn=C[Qr];hn||(hn=[],C[Qr]=hn),hn.push(tt===n.XMLLiteralURI||tt===n.HTMLLiteralURI?{type:tt,value:_.childNodes}:{type:tt||n.PlainLiteralURI,value:wt,language:P})}else tt===n.XMLLiteralURI||tt===n.HTMLLiteralURI?this.addTriple(_,w,Qr,{type:tt,value:_.childNodes}):this.addTriple(_,w,Qr,{type:tt||n.PlainLiteralURI,value:wt,language:P})}}if(w&&!N)for(var kr=0;kr<m.incomplete.length;kr++)m.incomplete[kr].list?m.incomplete[kr].list.push({type:n.objectURI,value:w}):m.incomplete[kr].forward?this.addTriple(_,m.subject,m.incomplete[kr].predicate,{type:n.objectURI,value:w}):this.addTriple(_,w,m.incomplete[kr].predicate,{type:n.objectURI,value:m.subject});var Bt=null,vi=w;N?(Bt=this.push(m,m.subject),Bt.parentObject=a(_.parentNode.baseURI)===m.parentObject?a(_.baseURI):m.parentObject,Bt.incomplete=m.incomplete,Bt.language=P,Bt.prefixes=T,Bt.vocabulary=B):(Bt=this.push(m,w),Bt.parentObject=R||w||m.subject,Bt.prefixes=T,Bt.incomplete=v,R&&(vi=R,C={},D=!0),Bt.listMapping=C,Bt.language=P,Bt.vocabulary=B),D&&s.unshift({parent:_,context:m,subject:vi,listMapping:C});for(var Yr=_.lastChild;Yr;Yr=Yr.previousSibling)Yr.nodeType===jr.ELEMENT_NODE&&s.unshift({current:Yr,context:Bt})}this.inHTMLMode&&this.copyProperties();for(var _n=0;_n<this.finishedHandlers.length;_n++)this.finishedHandlers[_n](e)}},{key:"push",value:function(e,t){return{parent:e,subject:t||(e?e.subject:null),parentObject:null,incomplete:[],listMapping:e?e.listMapping:{},language:e?e.language:this.language,prefixes:e?e.prefixes:this.target.graph.prefixes,terms:e?e.terms:this.target.graph.terms,vocabulary:e?e.vocabulary:this.vocabulary}}},{key:"resolveAndNormalize",value:function(e,t){return tr(t,e)}},{key:"setContext",value:function(e){e.localName==="html"&&e.getAttribute("version")==="XHTML+RDFa 1.1"?this.setXHTMLContext():e.localName==="html"||e.namespaceURI==="http://www.w3.org/1999/xhtml"?typeof document<"u"&&document.doctype?document.doctype.publicId==="-//W3C//DTD XHTML+RDFa 1.0//EN"&&document.doctype.systemId==="http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"?(console.log("WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode."),this.setHTMLContext()):document.doctype.publicId==="-//W3C//DTD XHTML+RDFa 1.1//EN"&&document.doctype.systemId==="http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"?this.setXHTMLContext():this.setHTMLContext():this.setHTMLContext():this.setXMLContext()}},{key:"setHTMLContext",value:function(){this.setInitialContext(),this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.inXHTMLMode=!1,this.inHTMLMode=!0}},{key:"setInitialContext",value:function(){this.vocabulary=null,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}]}},{key:"setXHTMLContext",value:function(){this.setInitialContext(),this.inXHTMLMode=!0,this.inHTMLMode=!1,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.target.graph.terms.alternate="http://www.w3.org/1999/xhtml/vocab#alternate",this.target.graph.terms.appendix="http://www.w3.org/1999/xhtml/vocab#appendix",this.target.graph.terms.bookmark="http://www.w3.org/1999/xhtml/vocab#bookmark",this.target.graph.terms.cite="http://www.w3.org/1999/xhtml/vocab#cite",this.target.graph.terms.chapter="http://www.w3.org/1999/xhtml/vocab#chapter",this.target.graph.terms.contents="http://www.w3.org/1999/xhtml/vocab#contents",this.target.graph.terms.copyright="http://www.w3.org/1999/xhtml/vocab#copyright",this.target.graph.terms.first="http://www.w3.org/1999/xhtml/vocab#first",this.target.graph.terms.glossary="http://www.w3.org/1999/xhtml/vocab#glossary",this.target.graph.terms.help="http://www.w3.org/1999/xhtml/vocab#help",this.target.graph.terms.icon="http://www.w3.org/1999/xhtml/vocab#icon",this.target.graph.terms.index="http://www.w3.org/1999/xhtml/vocab#index",this.target.graph.terms.last="http://www.w3.org/1999/xhtml/vocab#last",this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license",this.target.graph.terms.meta="http://www.w3.org/1999/xhtml/vocab#meta",this.target.graph.terms.next="http://www.w3.org/1999/xhtml/vocab#next",this.target.graph.terms.prev="http://www.w3.org/1999/xhtml/vocab#prev",this.target.graph.terms.previous="http://www.w3.org/1999/xhtml/vocab#previous",this.target.graph.terms.section="http://www.w3.org/1999/xhtml/vocab#section",this.target.graph.terms.stylesheet="http://www.w3.org/1999/xhtml/vocab#stylesheet",this.target.graph.terms.subsection="http://www.w3.org/1999/xhtml/vocab#subsection",this.target.graph.terms.start="http://www.w3.org/1999/xhtml/vocab#start",this.target.graph.terms.top="http://www.w3.org/1999/xhtml/vocab#top",this.target.graph.terms.up="http://www.w3.org/1999/xhtml/vocab#up",this.target.graph.terms.p3pv1="http://www.w3.org/1999/xhtml/vocab#p3pv1",this.target.graph.terms.related="http://www.w3.org/1999/xhtml/vocab#related",this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role",this.target.graph.terms.transformation="http://www.w3.org/1999/xhtml/vocab#transformation"}},{key:"setXMLContext",value:function(){this.setInitialContext(),this.inXHTMLMode=!1,this.inHTMLMode=!1}},{key:"tokenize",value:function(e){return this.trim(e).split(/\s+/)}},{key:"toRDFNodeObject",value:function(e){var t=this;if(!(typeof e>"u")){if(typeof e=="string")return e.substring(0,2)==="_:"?(typeof this.blankNodes[e.substring(2)]>"u"&&(this.blankNodes[e.substring(2)]=new vr(e.substring(2))),this.blankNodes[e.substring(2)]):ar.namedNode(e);switch(e.type){case n.objectURI:return e.value.substring(0,2)==="_:"?(typeof this.blankNodes[e.value.substring(2)]>"u"&&(this.blankNodes[e.value.substring(2)]=new vr(e.value.substring(2))),this.blankNodes[e.value.substring(2)]):ar.namedNode(e.value);case n.PlainLiteralURI:return new gr(e.value,e.language||"");case n.XMLLiteralURI:case n.HTMLLiteralURI:var i="";return Object.keys(e.value).forEach(function(s){i+=vp(e.value[s],t.htmlOptions)}),new gr(i,"",new qt(e.type));default:return new gr(e.value,"",new qt(e.type))}}}},{key:"trim",value:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}],[{key:"parseRDFaDOM",value:function(e,t,i){var s=new n(t,{base:i});e.baseURI||(e.baseURI=i),s.process(e,{baseURI:i})}},{key:"tokenize",value:function(e){return this.trim(e).split(/\s+/)}},{key:"trim",value:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}])}();rr.XMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral";rr.HTMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML";rr.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral";rr.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object";rr.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";rr.nameChar="[-A-Z_a-z-----------0-F.0-9--]";rr.nameStartChar="[A-Za-z------------------------------------------------------------------------------------------------------------------------------------------------------_]";rr.NCNAME=new RegExp("^"+rr.nameStartChar+rr.nameChar+"*$");rr.dateTimeTypes=[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:"http://www.w3.org/2001/XMLSchema#duration"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#dateTime"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#date"},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#time"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:"http://www.w3.org/2001/XMLSchema#gYearMonth"},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:"http://www.w3.org/2001/XMLSchema#gYear"}];var ra=rr.parseRDFaDOM,ha=function(){function n(r){ht(this,n),this.store=r,this.bnodes={},this.why=null,this.reify=!1}return dt(n,[{key:"frameFactory",value:function(e,t,i){return{NODE:1,ARC:2,parent:t,parser:e,store:e.store,element:i,lastChild:0,base:null,lang:null,node:null,nodeType:null,listIndex:1,rdfid:null,datatype:null,collection:!1,terminateFrame:function(){this.collection&&this.node.close()},addSymbol:function(a,l){l=tr(l,this.base),this.node=this.store.sym(l),this.nodeType=a},loadTriple:function(){if(this.parent.parent.collection?this.parent.parent.node.append(this.node):this.store.add(this.parent.parent.node,this.parent.node,this.node,this.parser.why),this.parent.rdfid!=null){var a=this.store.sym(tr("#"+this.parent.rdfid,this.base));this.store.add(a,this.store.sym(n.ns.RDF+"type"),this.store.sym(n.ns.RDF+"Statement"),this.parser.why),this.store.add(a,this.store.sym(n.ns.RDF+"subject"),this.parent.parent.node,this.parser.why),this.store.add(a,this.store.sym(n.ns.RDF+"predicate"),this.parent.node,this.parser.why),this.store.add(a,this.store.sym(n.ns.RDF+"object"),this.node,this.parser.why)}},isTripleToLoad:function(){return this.parent!=null&&this.parent.parent!=null&&this.nodeType===this.NODE&&this.parent.nodeType===this.ARC&&this.parent.parent.nodeType===this.NODE},addNode:function(a){this.addSymbol(this.NODE,a),this.isTripleToLoad()&&this.loadTriple()},addCollection:function(){this.nodeType=this.NODE,this.node=this.store.collection(),this.collection=!0,this.isTripleToLoad()&&this.loadTriple()},addCollectionArc:function(){this.nodeType=this.ARC},addBNode:function(a){a!=null?this.parser.bnodes[a]!=null?this.node=this.parser.bnodes[a]:this.node=this.parser.bnodes[a]=this.store.bnode():this.node=this.store.bnode(),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()},addArc:function(a){a===n.ns.RDF+"li"&&(a=n.ns.RDF+"_"+this.parent.listIndex,this.parent.listIndex++),this.addSymbol(this.ARC,a)},addLiteral:function(a){this.parent.datatype&&this.parent.datatype!==n.ns.RDF+"langString"?this.node=this.store.literal(a,this.store.sym(this.parent.datatype)):this.node=this.store.literal(a,this.lang),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()}}}},{key:"getAttributeNodeNS",value:function(e,t,i){var s=null;if(e.getAttributeNodeNS)s=e.getAttributeNodeNS(t,i);else for(var a=e.attributes,l,u,o=0;o<a.length;++o)if(l=a[o],l.namespaceURI===t&&(u=l.prefix?l.prefix+":"+i:i,u===l.nodeName)){s=l;break}return s}},{key:"parse",value:function(e,t,i){var s=e.childNodes;this.cleanParser();var a;if(e.nodeType===n.nodeType.DOCUMENT){for(var l=0;l<s.length;l++)if(s[l].nodeType===n.nodeType.ELEMENT){a=s[l];break}}else if(e.nodeType===n.nodeType.ELEMENT)a=e;else throw new Error("RDFParser: can't find root in "+t+". Halting. ");this.why=i;var u=this.frameFactory(this);return this.base=t,u.base=t,u.lang=null,this.parseDOM(this.buildFrame(u,a)),!0}},{key:"parseDOM",value:function(e){for(var t,i=(function(v){var C="";if(v.namespaceURI==null)throw new Error("RDF/XML syntax error: No namespace for "+v.localName+" in "+this.base);return v.namespaceURI&&(C=C+v.namespaceURI),v.localName?C=C+v.localName:v.nodeName&&(v.nodeName.indexOf(":")>=0?C=C+v.nodeName.split(":")[1]:C=C+v.nodeName),C}).bind(this),s=!0;e.parent;){var a=e.element,l=a.attributes;if(a.nodeType===n.nodeType.TEXT||a.nodeType===n.nodeType.CDATA_SECTION)e.parent.nodeType===e.NODE&&(e.addArc(n.ns.RDF+"value"),e=this.buildFrame(e)),e.addLiteral(a.nodeValue);else if(i(a)!==n.ns.RDF+"RDF")if(e.parent&&e.parent.collection&&(e.addCollectionArc(),e=this.buildFrame(e,e.element),e.parent.element=null),!e.parent||!e.parent.nodeType||e.parent.nodeType===e.ARC){var u=this.getAttributeNodeNS(a,n.ns.RDF,"about");if(t=this.getAttributeNodeNS(a,n.ns.RDF,"ID"),u&&t)throw new Error("RDFParser: "+a.nodeName+" has both rdf:id and rdf:about. Halting. Only one of these properties may be specified on a node.");if(!u&&t)e.addNode("#"+t.nodeValue),a.removeAttributeNode(t);else if(u==null&&t==null){var o=this.getAttributeNodeNS(a,n.ns.RDF,"nodeID");o?(e.addBNode(o.nodeValue),a.removeAttributeNode(o)):e.addBNode()}else e.addNode(u.nodeValue),a.removeAttributeNode(u);var f=this.getAttributeNodeNS(a,n.ns.RDF,"type");n.ns.RDF+"Description"!==i(a)&&(f={nodeValue:i(a)}),f!=null&&(this.store.add(e.node,this.store.sym(n.ns.RDF+"type"),this.store.sym(tr(f.nodeValue,e.base)),this.why),f.nodeName&&a.removeAttributeNode(f));for(var c=l.length-1;c>=0;c--)this.store.add(e.node,this.store.sym(i(l[c])),this.store.literal(l[c].nodeValue,e.lang),this.why)}else{e.addArc(i(a)),this.reify&&(t=this.getAttributeNodeNS(a,n.ns.RDF,"ID"),t&&(e.rdfid=t.nodeValue,a.removeAttributeNode(t)));var d=this.getAttributeNodeNS(a,n.ns.RDF,"parseType"),_=this.getAttributeNodeNS(a,n.ns.RDF,"datatype");if(_&&(e.datatype=_.nodeValue,a.removeAttributeNode(_)),d){var m=d.nodeValue;m==="Literal"?(e.datatype=n.ns.RDF+"XMLLiteral",e=this.buildFrame(e),e.addLiteral(a.innerHTML||a.childNodes),s=!1):m==="Resource"?(e=this.buildFrame(e,e.element),e.parent.element=null,e.addBNode()):m==="Collection"&&(e=this.buildFrame(e,e.element),e.parent.element=null,e.addCollection()),a.removeAttributeNode(d)}if(l.length!==0){var N=this.getAttributeNodeNS(a,n.ns.RDF,"resource"),w=this.getAttributeNodeNS(a,n.ns.RDF,"nodeID");e=this.buildFrame(e),N?(e.addNode(N.nodeValue),a.removeAttributeNode(N)):w?(e.addBNode(w.nodeValue),a.removeAttributeNode(w)):e.addBNode();for(var R=l.length-1;R>=0;R--){var j=this.buildFrame(e);j.addArc(i(l[R])),i(l[R])===n.ns.RDF+"type"?this.buildFrame(j).addNode(l[R].nodeValue):this.buildFrame(j).addLiteral(l[R].nodeValue)}}else a.childNodes.length===0&&this.buildFrame(e).addLiteral("")}for(a=e.element;e.parent;){for(var T=e;a==null;)e=e.parent,a=e.element;var S=a.childNodes&&a.childNodes[e.lastChild];if(!S||!s){if(e.terminateFrame(),!(e=e.parent))break;a=e.element,s=!0}else if(S.nodeType!==n.nodeType.ELEMENT&&S.nodeType!==n.nodeType.TEXT&&S.nodeType!==n.nodeType.CDATA_SECTION||(S.nodeType===n.nodeType.TEXT||S.nodeType===n.nodeType.CDATA_SECTION)&&a.childNodes.length!==1)e.lastChild++;else{e.lastChild++,e=this.buildFrame(T,a.childNodes[e.lastChild-1]);break}}}}},{key:"cleanParser",value:function(){this.bnodes={},this.why=null}},{key:"buildFrame",value:function(e,t){var i=this.frameFactory(this,e,t);if(e&&(i.base=e.base,i.lang=e.lang),!t||t.nodeType===n.nodeType.TEXT||t.nodeType===n.nodeType.CDATA_SECTION)return i;var s=t.attributes,a=t.getAttributeNode("xml:base");a!=null&&(i.base=a.nodeValue,t.removeAttribute("xml:base"));var l=t.getAttributeNode("xml:lang");l!=null&&(i.lang=l.nodeValue,t.removeAttribute("xml:lang"));for(var u=s.length-1;u>=0;u--)if(s[u].nodeName.substr(0,3)==="xml"){if(s[u].name.slice(0,6)==="xmlns:"){var o=s[u].nodeValue;this.base&&(o=tr(o,this.base)),this.store.setPrefixForURI(s[u].name.slice(6),o)}t.removeAttributeNode(s[u])}return i}}])}();ge(ha,"ns",{RDF:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDFS:"http://www.w3.org/2000/01/rdf-schema#"});ge(ha,"nodeType",{ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12});function y0(n,r,e){var t,i,s,a=["INSERT","DELETE","WHERE"],l=Ut("http://www.w3.org/ns/pim/patch#"),u=ws(r,r,e,e,null,null,"",null),o={},f=function(w,R,j,T,S){return"Line "+(R+1)+" of <"+w+`>: Bad syntax:
   `+S+`
   at: "`+j.slice(T,T+30)+'"'};t=0;var c=r.sym(e+"#query");for(o.query=c;;){if(i=u.skipSpace(n,t),i<0)return o;if(n[i]===";"){if(t=u.skipSpace(n,i+1),t<0)return o;i=t}var d=!1;for(s=0;s<a.length;s++){var _=a[s];if(n.slice(i,i+_.length)===_){if(t=u.skipSpace(n,i+_.length),t<0)throw f(u._thisDoc,u.lines,n,i+_.length,"found EOF, needed {...} after "+_);if((_==="INSERT"||_==="DELETE")&&n.slice(t,t+4)==="DATA"){if(i=u.skipSpace(n,t+4),i<0)throw f(u._thisDoc,u.lines,n,t+4,"needed {...} after INSERT DATA "+_);t=i}var m=[];if(i=u.node(n,t,m),i<0)throw f(u._thisDoc,u.lines,n,t,"bad syntax or EOF in {...} after "+_);o[_.toLowerCase()]=m[0],r.add(c,l(_.toLowerCase()),m[0]),d=!0,t=i}}if(!d&&n.slice(i,i+7)==="@prefix"){if(t=u.directive(n,i),t<0)throw f(u._thisDoc,u.lines,n,t,"bad syntax or EOF after @prefix ");t=u.checkDot(n,t),d=!0}if(!d)throw f(u._thisDoc,u.lines,n,i,"Unknown syntax at start of statememt: '"+n.slice(i).slice(0,20)+"'")}}function es(n,r,e){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"text/turtle",i=arguments.length>4?arguments[4]:void 0;t=t||nn,t=t.split(";")[0];try{if(t===hf||t===nn){var s=ws(r,r,e,e,null,null,"",null);s.loadBuf(n),u()}else if(t===ei){var a=new ha(r);a.parse(Tn(n),e,r.sym(e)),u()}else if(t===Qa)ra(Tn(n,{contentType:Qa}),r,e),u();else if(t===Bl)ra(Tn(n,{contentType:Bl}),r,e),u();else if(t===k_||t===E_)y0(n,r,e),u();else if(t===Xa)oc(n,r,e,u);else if(t===Wa||t===Ga){var l=new hc({factory:Ka});f(null,n)}else throw t===void 0?new Error("contentType is undefined"):new Error("Don't know how to parse "+t+" yet")}catch(d){o(d)}es.handled={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/sparql-update":!0,"application/sparql-update-single-match":!0,"application/ld+json":!0,"application/nquads":!0,"application/n-quads":!0};function u(){if(i)i(null,r);else return}function o(d){if(t!==Xa||t!==Wa||t!==Ga)if(i)i(d,r);else{var _=new Error(""+d+" while trying to parse <"+e+"> as "+t);throw _.cause=d,_}}function f(d,_){try{l.parse(_,c)}catch(m){i(m,r)}}function c(d,_){_?r.add(_.subject,_.predicate,_.object,_.graph):i(d,r)}}var ts={exports:{}};(function(n,r){var e=typeof self<"u"?self:ss,t=function(){function s(){this.fetch=!1,this.DOMException=e.DOMException}return s.prototype=e,new s}();(function(s){(function(a){var l={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function u(k){return k&&DataView.prototype.isPrototypeOf(k)}if(l.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(k){return k&&o.indexOf(Object.prototype.toString.call(k))>-1};function c(k){if(typeof k!="string"&&(k=String(k)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(k))throw new TypeError("Invalid character in header field name");return k.toLowerCase()}function d(k){return typeof k!="string"&&(k=String(k)),k}function _(k){var V={next:function(){var L=k.shift();return{done:L===void 0,value:L}}};return l.iterable&&(V[Symbol.iterator]=function(){return V}),V}function m(k){this.map={},k instanceof m?k.forEach(function(V,L){this.append(L,V)},this):Array.isArray(k)?k.forEach(function(V){this.append(V[0],V[1])},this):k&&Object.getOwnPropertyNames(k).forEach(function(V){this.append(V,k[V])},this)}m.prototype.append=function(k,V){k=c(k),V=d(V);var L=this.map[k];this.map[k]=L?L+", "+V:V},m.prototype.delete=function(k){delete this.map[c(k)]},m.prototype.get=function(k){return k=c(k),this.has(k)?this.map[k]:null},m.prototype.has=function(k){return this.map.hasOwnProperty(c(k))},m.prototype.set=function(k,V){this.map[c(k)]=d(V)},m.prototype.forEach=function(k,V){for(var L in this.map)this.map.hasOwnProperty(L)&&k.call(V,this.map[L],L,this)},m.prototype.keys=function(){var k=[];return this.forEach(function(V,L){k.push(L)}),_(k)},m.prototype.values=function(){var k=[];return this.forEach(function(V){k.push(V)}),_(k)},m.prototype.entries=function(){var k=[];return this.forEach(function(V,L){k.push([L,V])}),_(k)},l.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function N(k){if(k.bodyUsed)return Promise.reject(new TypeError("Already read"));k.bodyUsed=!0}function w(k){return new Promise(function(V,L){k.onload=function(){V(k.result)},k.onerror=function(){L(k.error)}})}function R(k){var V=new FileReader,L=w(V);return V.readAsArrayBuffer(k),L}function j(k){var V=new FileReader,L=w(V);return V.readAsText(k),L}function T(k){for(var V=new Uint8Array(k),L=new Array(V.length),H=0;H<V.length;H++)L[H]=String.fromCharCode(V[H]);return L.join("")}function S(k){if(k.slice)return k.slice(0);var V=new Uint8Array(k.byteLength);return V.set(new Uint8Array(k)),V.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(k){this._bodyInit=k,k?typeof k=="string"?this._bodyText=k:l.blob&&Blob.prototype.isPrototypeOf(k)?this._bodyBlob=k:l.formData&&FormData.prototype.isPrototypeOf(k)?this._bodyFormData=k:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(k)?this._bodyText=k.toString():l.arrayBuffer&&l.blob&&u(k)?(this._bodyArrayBuffer=S(k.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(k)||f(k))?this._bodyArrayBuffer=S(k):this._bodyText=k=Object.prototype.toString.call(k):this._bodyText="",this.headers.get("content-type")||(typeof k=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(k)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var k=N(this);if(k)return k;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?N(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(R)}),this.text=function(){var k=N(this);if(k)return k;if(this._bodyBlob)return j(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(T(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(B)}),this.json=function(){return this.text().then(JSON.parse)},this}var C=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function D(k){var V=k.toUpperCase();return C.indexOf(V)>-1?V:k}function P(k,V){V=V||{};var L=V.body;if(k instanceof P){if(k.bodyUsed)throw new TypeError("Already read");this.url=k.url,this.credentials=k.credentials,V.headers||(this.headers=new m(k.headers)),this.method=k.method,this.mode=k.mode,this.signal=k.signal,!L&&k._bodyInit!=null&&(L=k._bodyInit,k.bodyUsed=!0)}else this.url=String(k);if(this.credentials=V.credentials||this.credentials||"same-origin",(V.headers||!this.headers)&&(this.headers=new m(V.headers)),this.method=D(V.method||this.method||"GET"),this.mode=V.mode||this.mode||null,this.signal=V.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&L)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(L)}P.prototype.clone=function(){return new P(this,{body:this._bodyInit})};function B(k){var V=new FormData;return k.trim().split("&").forEach(function(L){if(L){var H=L.split("="),le=H.shift().replace(/\+/g," "),Y=H.join("=").replace(/\+/g," ");V.append(decodeURIComponent(le),decodeURIComponent(Y))}}),V}function F(k){var V=new m,L=k.replace(/\r?\n[\t ]+/g," ");return L.split(/\r?\n/).forEach(function(H){var le=H.split(":"),Y=le.shift().trim();if(Y){var x=le.join(":").trim();V.append(Y,x)}}),V}v.call(P.prototype);function b(k,V){V||(V={}),this.type="default",this.status=V.status===void 0?200:V.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in V?V.statusText:"OK",this.headers=new m(V.headers),this.url=V.url||"",this._initBody(k)}v.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},b.error=function(){var k=new b(null,{status:0,statusText:""});return k.type="error",k};var y=[301,302,303,307,308];b.redirect=function(k,V){if(y.indexOf(V)===-1)throw new RangeError("Invalid status code");return new b(null,{status:V,headers:{location:k}})},a.DOMException=s.DOMException;try{new a.DOMException}catch{a.DOMException=function(V,L){this.message=V,this.name=L;var H=Error(V);this.stack=H.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function I(k,V){return new Promise(function(L,H){var le=new P(k,V);if(le.signal&&le.signal.aborted)return H(new a.DOMException("Aborted","AbortError"));var Y=new XMLHttpRequest;function x(){Y.abort()}Y.onload=function(){var U={status:Y.status,statusText:Y.statusText,headers:F(Y.getAllResponseHeaders()||"")};U.url="responseURL"in Y?Y.responseURL:U.headers.get("X-Request-URL");var Q="response"in Y?Y.response:Y.responseText;L(new b(Q,U))},Y.onerror=function(){H(new TypeError("Network request failed"))},Y.ontimeout=function(){H(new TypeError("Network request failed"))},Y.onabort=function(){H(new a.DOMException("Aborted","AbortError"))},Y.open(le.method,le.url,!0),le.credentials==="include"?Y.withCredentials=!0:le.credentials==="omit"&&(Y.withCredentials=!1),"responseType"in Y&&l.blob&&(Y.responseType="blob"),le.headers.forEach(function(U,Q){Y.setRequestHeader(Q,U)}),le.signal&&(le.signal.addEventListener("abort",x),Y.onreadystatechange=function(){Y.readyState===4&&le.signal.removeEventListener("abort",x)}),Y.send(typeof le._bodyInit>"u"?null:le._bodyInit)})}return I.polyfill=!0,s.fetch||(s.fetch=I,s.Headers=m,s.Request=P,s.Response=b),a.Headers=m,a.Request=P,a.Response=b,a.fetch=I,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(t),t.fetch.ponyfill=!0,delete t.fetch.polyfill;var i=t;r=i.fetch,r.default=i.fetch,r.fetch=i.fetch,r.Headers=i.Headers,r.Request=i.Request,r.Response=i.Response,n.exports=r})(ts,ts.exports);var Hi=ts.exports;const D0=ua(Hi);function k0(n,r){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!e){if(Array.isArray(n)||(e=E0(n))||r){e&&(n=e);var t=0,i=function(){};return{s:i,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(o){throw o},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){e=e.call(n)},n:function(){var o=e.next();return s=o.done,o},e:function(o){a=!0,l=o},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(a)throw l}}}}function E0(n,r){if(n){if(typeof n=="string")return yu(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return yu(n,r)}}function yu(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}function dn(n,r,e){return r=At(r),Lr(n,pc()?Reflect.construct(r,e||[],At(n).constructor):r.apply(n,e))}function pc(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pc=function(){return!!n})()}var A0={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/ld+json":!0},gc={rdf:ei,owl:ei,n3:"text/n3",ttl:"text/turtle",nt:"text/n3",acl:"text/n3",html:"text/html",xml:"text/xml"},mc=function(r){return{link:Ut("http://www.w3.org/2007/ont/link#",r),http:Ut("http://www.w3.org/2007/ont/http#",r),httph:Ut("http://www.w3.org/2007/ont/httph#",r),rdf:Ut("http://www.w3.org/1999/02/22-rdf-syntax-ns#",r),rdfs:Ut("http://www.w3.org/2000/01/rdf-schema#",r),dc:Ut("http://purl.org/dc/elements/1.1/",r),ldp:Ut("http://www.w3.org/ns/ldp#",r)}},yr=mc(),Gr=dt(function n(r,e){ht(this,n),ge(this,"response",void 0),ge(this,"dom",void 0),this.response=r,this.dom=e});ge(Gr,"pattern",void 0);var ks=function(n){function r(){return ht(this,r),dn(this,r,arguments)}return xt(r,n),dt(r,[{key:"parse",value:function(t,i,s){var a=t.store;this.dom||(this.dom=Tn(i));var l=this.dom.documentElement;if(l.nodeName==="parsererror")return t.failFetch(s,"Badly formed XML in "+s.resource.value,"parse_error");var u=new ha(a);try{u.parse(this.dom,s.original.value,s.original)}catch(o){return t.failFetch(s,"Syntax error parsing RDF/XML! "+o,"parse_error")}return s.noMeta||a.add(s.original,yr.rdf("type"),yr.link("RDFDocument"),t.appNode),t.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"RDFXMLHandler"}},{key:"register",value:function(t){t.mediatypes[ei]={q:.9}}}])}(Gr);ks.pattern=new RegExp("application/rdf\\+xml");var sn=function(n){function r(){return ht(this,r),dn(this,r,arguments)}return xt(r,n),dt(r,[{key:"parse",value:function(t,i,s){var a,l;this.dom||(this.dom=Tn(i));var u=t.store,o=this.dom.getElementsByTagName("title");o.length>0&&u.add(s.resource,yr.dc("title"),u.rdfFactory.literal(o[0].textContent),s.resource);for(var f=this.dom.getElementsByTagName("link"),c=f.length-1;c>=0;c--)a=f[c].getAttribute("rel"),l=!1,a||(a=f[c].getAttribute("rev"),l=!0),a&&t.linkData(s.original,a,f[c].getAttribute("href"),s.resource,l);for(var d=this.dom.getElementsByTagName("script"),_=0;_<d.length;_++){var m=d[_].getAttribute("type");A0[m]&&(es(d[_].textContent,u,s.original.value,m),es(d[_].textContent,u,s.original.value,m))}if(s.noMeta||u.add(s.resource,yr.rdf("type"),yr.link("WebPage"),t.appNode),!s.noRDFa&&ra)try{ra(this.dom,u,s.original.value)}catch(w){var N="Error trying to parse "+s.resource+` as RDFa:
`+w+`:
`+w.stack;return t.failFetch(s,N,"parse_error")}return t.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"XHTMLHandler"}},{key:"register",value:function(t){t.mediatypes[Qa]={}}}])}(Gr);sn.pattern=new RegExp("application/xhtml");var na=function(n){function r(){return ht(this,r),dn(this,r,arguments)}return xt(r,n),dt(r,[{key:"parse",value:function(t,i,s){for(var a=Tn(i),l=0;l<a.childNodes.length;l++){var u=a.childNodes[l];if(r.isElement(u)){var o=u.namespaceURI;if(o&&o===o.rdf){t.addStatus(s.req,"Has XML root element in the RDF namespace, so assume RDF/XML.");var f=new ks(this.response,a);return f.parse(t,i,s)}break}}if(a.doctype&&a.doctype.name==="html"&&a.doctype.publicId.match(/^-\/\/W3C\/\/DTD XHTML/)&&a.doctype.systemId.match(/http:\/\/www.w3.org\/TR\/xhtml/)){t.addStatus(s.req,`Has XHTML DOCTYPE. Switching to XHTML Handler.
`);var c=new sn(this.response,a);return c.parse(t,i,s)}var d=a.getElementsByTagName("html")[0];if(d){var _=d.getAttribute("xmlns");if(_&&_.match(/^http:\/\/www.w3.org\/1999\/xhtml/)){t.addStatus(s.req,`Has a default namespace for XHTML. Switching to XHTMLHandler.
`);var m=new sn(this.response,a);return m.parse(t,i,s)}}return t.failFetch(s,`Unsupported dialect of XML: not RDF or XHTML namespace, etc.
`+i.slice(0,80),901)}}],[{key:"toString",value:function(){return"XMLHandler"}},{key:"register",value:function(t){t.mediatypes["text/xml"]={q:.5},t.mediatypes["application/xml"]={q:.5}}},{key:"isElement",value:function(t){return t.nodeType===Node.ELEMENT_NODE}}])}(Gr);na.pattern=new RegExp("(text|application)/(.*)xml");var vc=function(n){function r(){return ht(this,r),dn(this,r,arguments)}return xt(r,n),dt(r,[{key:"parse",value:function(t,i,s){var a=t.store;if(Dc(i)){t.addStatus(s.req,`Has an XML declaration. We'll assume it's XHTML as the content-type was text/html.
`);var l=new sn(this.response);return l.parse(t,i,s)}if(T0(i)){t.addStatus(s.req,`Has XHTML DOCTYPE. Switching to XHTMLHandler.
`);var u=new sn(this.response);return u.parse(t,i,s)}if(C0(i)){t.addStatus(s.req,`Has default namespace for XHTML, so switching to XHTMLHandler.
`);var o=new sn(this.response);return o.parse(t,i,s)}var f=new RegExp("<title>([\\s\\S]+?)</title>","im").exec(i);return f&&a.add(s.resource,yr.dc("title"),a.rdfFactory.literal(f[1]),s.resource),a.add(s.resource,yr.rdf("type"),yr.link("WebPage"),t.appNode),t.addStatus(s.req,"non-XML HTML document, not parsed for data."),t.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"HTMLHandler"}},{key:"register",value:function(t){t.mediatypes["text/html"]={q:.9}}}])}(Gr);vc.pattern=new RegExp("text/html");var bc=function(n){function r(){return ht(this,r),dn(this,r,arguments)}return xt(r,n),dt(r,[{key:"parse",value:function(t,i,s,a){var l=t.store;return new Promise(function(u,o){try{oc(i,l,s.original.value,function(){u(t.doneFetch(s,a))})}catch(c){var f="Error trying to parse "+s.resource+` as JSON-LD:
`+c;u(t.failFetch(s,f,"parse_error",a))}})}}],[{key:"toString",value:function(){return"JsonLdHandler"}},{key:"register",value:function(t){t.mediatypes["application/ld+json"]={q:.9}}}])}(Gr);bc.pattern=/application\/ld\+json/;var wc=function(n){function r(){return ht(this,r),dn(this,r,arguments)}return xt(r,n),dt(r,[{key:"parse",value:function(t,i,s){if(Dc(i)){t.addStatus(s.req,"Warning: "+s.resource+` has an XML declaration. We'll assume it's XML but its content-type wasn't XML.
`);var a=new na(this.response);return a.parse(t,i,s)}if(i.slice(0,500).match(/xmlns:/)){t.addStatus(s.req,`May have an XML namespace. We'll assume it's XML but its content-type wasn't XML.
`);var l=new na(this.response);return l.parse(t,i,s)}return t.addStatus(s.req,"Plain text document, no known RDF semantics."),t.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"TextHandler"}},{key:"register",value:function(t){t.mediatypes["text/plain"]={q:.5}}}])}(Gr);wc.pattern=new RegExp("text/plain");var yc=function(n){function r(){return ht(this,r),dn(this,r,arguments)}return xt(r,n),dt(r,[{key:"parse",value:function(t,i,s,a){var l=t.store,u=ws(l,l,s.original.value,s.original.value,null,null,"",null);try{u.loadBuf(i)}catch(f){var o="Error trying to parse "+s.resource+` as Notation3:
`+f;return t.failFetch(s,o,"parse_error",a)}return t.addStatus(s.req,"N3 parsed: "+u.statementCount+" triples in "+u.lines+" lines."),t.store.add(s.original,yr.rdf("type"),yr.link("RDFDocument"),t.appNode),t.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"N3Handler"}},{key:"register",value:function(t){t.mediatypes["text/n3"]={q:"1.0"},t.mediatypes["text/turtle"]={q:1}}}])}(Gr);yc.pattern=new RegExp("(application|text)/(x-)?(rdf\\+)?(n3|turtle)");var rs={RDFXMLHandler:ks,XHTMLHandler:sn,XMLHandler:na,HTMLHandler:vc,TextHandler:wc,N3Handler:yc,JsonLdHandler:bc};function T0(n){var r=n.indexOf("<!DOCTYPE html"),e=n.indexOf(">");return r===-1||e===-1||r>e?!1:n.substr(r,e-r).indexOf("XHTML")!==-1}function Dc(n){var r=n.match(/\s*<\?xml\s+version\s*=[^<>]+\?>/);return!!r}function C0(n){var r=n.match(/[^(<html)]*<html\s+[^<]*xmlns=['"]http:\/\/www.w3.org\/1999\/xhtml["'][^<]*>/);return!!r}var Ln=function(){function n(r){var e=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ht(this,n),ge(this,"store",void 0),ge(this,"timeout",void 0),ge(this,"_fetch",void 0),ge(this,"mediatypes",void 0),ge(this,"appNode",void 0),ge(this,"requested",void 0),ge(this,"timeouts",void 0),ge(this,"redirectedTo",void 0),ge(this,"fetchQueue",void 0),ge(this,"fetchCallbacks",void 0),ge(this,"nonexistent",void 0),ge(this,"lookedUp",void 0),ge(this,"handlers",void 0),ge(this,"ns",void 0),ge(this,"fireCallbacks",void 0),this.store=r||new di,this.ns=mc(this.store.rdfFactory),this.timeout=t.timeout||3e4,this._fetch=t.fetch||typeof global<"u"&&(global.solidFetcher||global.solidFetch)||typeof window<"u"&&(window.solidFetcher||window.solidFetch)||D0,!this._fetch)throw new Error("No _fetch function available for Fetcher");this.appNode=this.store.sym("chrome://TheCurrentSession"),this.store.fetcher=this,this.requested={},this.timeouts={},this.redirectedTo={},this.fetchQueue={},this.fetchCallbacks={},this.nonexistent={},this.lookedUp={},this.handlers=[],this.mediatypes={"image/*":{q:.9},"*/*":{q:.1}},mp(this,["request","fail","refresh","retract","done"]),Object.keys(t.handlers||rs).map(function(i){return e.addHandler(rs[i])})}return dt(n,[{key:"load",value:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i=Object.assign({},i),e instanceof Array)return Promise.all(e.map(function(w){return t.load(w,Object.assign({},i))}));var s=e,a=wn(s);a=a.split("#")[0],i=this.initFetchOptions(a,i);var l=this.appNode,u=this.store,o=u.statementsMatching(void 0,this.ns.link("requestedURI"),u.sym(a),l).map(function(w){return w.subject}),f=k0(o),c;try{for(f.s();!(c=f.n()).done;){var d=c.value,_=u.any(d,this.ns.link("response"),null,l);if(_!=null){var m=u.statementsMatching(_,this.ns.link("outOfDate"),!0,l);u.remove(m),i.force=!0,i.clearPreviousData=!0}}}catch(w){f.e(w)}finally{f.f()}var N=this.initFetchOptions(a,i);return this.pendingFetchPromise(a,N.baseURI,N)}},{key:"pendingFetchPromise",value:function(){var r=Pl(Bi.mark(function t(i,s,a){var l=this,u;return Bi.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(f.t0=!a.force,!f.t0){f.next=5;break}return f.next=4,this.fetchQueue[s];case 4:f.t0=f.sent;case 5:if(!f.t0){f.next=9;break}u=this.fetchQueue[s],f.next=12;break;case 9:u=Promise.race([this.setRequestTimeout(i,a),this.fetchUri(i,a)]),this.fetchQueue[s]=u,this.cleanupFetchRequest(s,void 0,this.timeout);case 12:return f.abrupt("return",u.then(function(c){return i in l.timeouts&&(l.timeouts[i].forEach(clearTimeout),delete l.timeouts[i]),c}));case 13:case"end":return f.stop()}},t,this)}));function e(t,i,s){return r.apply(this,arguments)}return e}()},{key:"cleanupFetchRequest",value:function(e,t,i){var s=this;t!==void 0&&console.warn("_options is deprecated"),this.timeouts[e]=(this.timeouts[e]||[]).concat(setTimeout(function(){s.isPending(e)||delete s.fetchQueue[e]},i))}},{key:"initFetchOptions",value:function(e,t){var i=this.store,s=!t.method||t.method.toUpperCase()==="GET";s||(t.force=!0),t.resource=i.rdfFactory.namedNode(e),t.baseURI=t.baseURI||e,t.original=i.rdfFactory.namedNode(t.baseURI),t.req=i.bnode(),t.headers=t.headers||new Hi.Headers,t.contentType&&(t.headers["content-type"]=t.contentType),t.force&&(t.cache="no-cache");var a=this.acceptString();t.headers.accept=a;var l=n.offlineOverride(e);t.requestedURI=l,n.setCredentials(l,t);var u=n.proxyIfNecessary(l);return l!==u&&(t.proxyUsed=!0),t.actualProxyURI=u,t}},{key:"fetchUri",value:function(e,t){var i=this;if(!e)return Promise.reject(new Error("Cannot fetch an empty uri"));if(n.unsupportedProtocol(e))return this.failFetch(t,"fetcher: Unsupported protocol","unsupported_protocol");var s=this.getState(e);if(t.force)delete this.nonexistent[e];else{if(s==="fetched")return Promise.resolve(this.doneFetch(t,{status:200,ok:!0,statusText:"Already loaded into quadstore."}));if(s==="failed"&&this.requested[e]===404){var a="Previously failed: "+this.requested[e],l={url:e,status:this.requested[e],statusText:a,responseText:a,headers:new Hi.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return this.failFetch(t,a,this.requested[e],l)}}this.fireCallbacks("request",[e]),this.requested[e]=!0,t.noMeta||this.saveRequestMetadata(e,t);var u=t.actualProxyURI;return this._fetch(u,t).then(function(o){return i.handleResponse(o,e,t)},function(o){var f={url:u,status:999,statusText:(o.name||"network failure")+": "+(o.errno||o.code||o.type),responseText:o.message,headers:new Hi.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return i.handleError(f,e,t)})}},{key:"nowOrWhenFetched",value:function(e,t,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=wn(e);typeof t=="function"?i=t:typeof t>"u"||(Ml(t)?s.referringTerm=t:s=t),this.load(a,s).then(function(l){if(i)if(l)if(l.ok)i(!0,"OK",l);else{var u="HTTP error: Status "+l.status+" ("+l.statusText+")";l.responseText&&(u+=" "+l.responseText),i(!1,u,l)}else{var o="@@ nowOrWhenFetched:  no response object!";i(!1,o)}},function(l){var u=l.message||l.statusText;u="Failed to load  <"+a+"> "+u,l.response&&l.response.status&&(u+=" status: "+l.response.status),i(!1,u,l.response)})}},{key:"addStatus",value:function(e,t){var i=new Date;t="["+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()+"."+i.getMilliseconds()+"] "+t;var s=this.store,a=s.the(e,this.ns.link("status"));us(a)&&a.append(s.rdfFactory.literal(t))}},{key:"failFetch",value:function(e,t,i,s){this.addStatus(e.req,t),e.noMeta||this.store.add(e.original,this.ns.link("error"),this.store.rdfFactory.literal(t));var a=(e.method||"GET").toUpperCase(),l=a==="GET"||a==="HEAD";l&&(e.resource.equals(e.original),this.requested[En(e.original.value)]=i,this.fireCallbacks("fail",[e.original.value,t]));var u=new Error("Fetcher: "+t);return u.status=i,u.statusText=t,u.response=s,Promise.reject(u)}},{key:"linkData",value:function(e,t,i,s,a){if(i){var l=this.store,u,o=l.rdfFactory.namedNode(tr(i,e.value));if(t==="alternate"||t==="seeAlso"||t==="meta"||t==="describedby"){if(o.value===e.value)return;u=this.ns.rdfs("seeAlso")}else t==="type"?u=l.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):u=l.rdfFactory.namedNode(tr(encodeURIComponent(t),"http://www.iana.org/assignments/link-relations/"));a?l.add(o,u,e,s):l.add(e,u,o,s)}}},{key:"parseLinkHeader",value:function(e,t,i){if(e){var s=/<[^>]*>\s*(\s*;\s*[^()<>@,;:"/[\]?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*")))*(,|$)/g,a=/[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*"))/g,l=e.match(s);if(l!=null)for(var u=0;u<l.length;u++){var o=l[u].split(">"),f=o[0].substring(1),c=o[1],d=c.match(a);if(d==null)return;for(var _=0;_<d.length;_++){var m=d[_],N=m.split("="),w=N[1].replace(/["']/g,"");this.linkData(t,w,f,i)}}}}},{key:"doneFetch",value:function(e,t){return this.addStatus(e.req,"Done."),this.requested[e.original.value]="done",this.fireCallbacks("done",[e.original.value]),t.req=e.req,t}},{key:"nowKnownAs",value:function(e,t){this.lookedUp[e.value]?this.lookedUp[t.value]||this.lookUpThing(t,e):this.lookedUp[t.value]&&(this.lookedUp[e.value]||this.lookUpThing(e,t))}},{key:"putBack",value:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=wn(e),a=new qt(s).doc();return i.contentType=i["content-type"]||i["Content-Type"]||i.contentType||nn,i.contentType==="application/ld+json"?new Promise(function(l,u){ai(a,t.store,a.uri,i.contentType,function(o,f){o?u(o):(i.data=f,t.webOperation("PUT",e,i).then(function(c){return l(c)}).catch(function(c){return u(c)}))})}):(i.data=ai(a,this.store,a.value,i.contentType),this.webOperation("PUT",s,i))}},{key:"webCopy",value:function(e,t,i){var s=this;return this.webOperation("GET",e).then(function(a){return s.webOperation("PUT",t,{data:a.responseText,contentType:i})})}},{key:"delete",value:function(e,t){var i=this;return this.webOperation("DELETE",e,t).then(function(s){return i.requested[e]=404,i.nonexistent[e]=!0,i.unload(i.store.rdfFactory.namedNode(e)),s})}},{key:"createIfNotExists",value:function(){var r=Pl(Bi.mark(function t(i){var s,a,l,u,o=arguments;return Bi.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s=o.length>1&&o[1]!==void 0?o[1]:nn,a=o.length>2&&o[2]!==void 0?o[2]:"",l=this,c.prev=3,c.next=6,l.load(i);case 6:u=c.sent,c.next=26;break;case 9:if(c.prev=9,c.t0=c.catch(3),c.t0.response.status!==404){c.next=25;break}return c.prev=12,c.next=15,l.webOperation("PUT",i.value,{data:a,contentType:s});case 15:u=c.sent,c.next=21;break;case 18:throw c.prev=18,c.t1=c.catch(12),c.t1;case 21:return delete l.requested[i.value],c.abrupt("return",u);case 25:throw c.t0;case 26:return c.abrupt("return",u);case 27:case"end":return c.stop()}},t,this,[[3,9],[12,18]])}));function e(t){return r.apply(this,arguments)}return e}()},{key:"createContainer",value:function(e,t,i){var s={"content-type":nn,link:this.ns.ldp("BasicContainer")+'; rel="type"'};t&&(s.slug=t);var a={headers:s};return i&&(a.body=i),this.webOperation("POST",e,a)}},{key:"invalidateCache",value:function(e){var t=wn(e),i=this;if(i.fetchQueue&&i.fetchQueue[t]){var s=i.fetchQueue[t];s.PromiseStatus,delete i.fetchQueue[t]}if(i.requested[t]&&i.requested[t]!=="done"&&i.requested[t]!=="failed"&&i.requested[t]!==404){var a="Rdflib: fetcher: Destructive operation on <".concat(i.requested[t],"> file being fetched! ")+t;console.error(a)}else delete i.requested[t],delete i.nonexistent[t]}},{key:"webOperation",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=wn(t);i.method=e,i.body=i.data||i.body,i.force=!0;var a=this;if(i.body&&!i.contentType)throw new Error("Web operation sending data must have a defined contentType.");return i.contentType&&(i.headers=i.headers||{},i.headers["content-type"]=i.contentType),n.setCredentials(s,i),new Promise(function(l,u){a._fetch(s,i).then(function(o){if(o.ok)(e==="PUT"||e==="PATCH"||e==="POST"||e==="DELETE")&&a.invalidateCache(s),o.text?o.text().then(function(d){o.responseText=d,l(o)}):l(o);else{var f="Web error: "+o.status;o.statusText&&(f+=" ("+o.statusText+")"),f+=" on "+e+" of <"+s+">",o.responseText&&(f+=": "+o.responseText);var c=new Error(f);c.response=o,u(c)}},function(o){var f="Fetch error for "+e+" of <"+s+">:"+o;u(new Error(f))})})}},{key:"lookUpThing",value:function(e,t){var i=this,s=this.store.uris(e);return s=s.map(function(a){return En(a)}),s.forEach(function(a){i.lookedUp[a]=!0}),this.load(s,{referringTerm:t})}},{key:"getHeader",value:function(e,t){for(var i=this.store,s=e.value,a=i.each(void 0,this.ns.link("requestedURI"),i.rdfFactory.literal(s)),l=0;l<a.length;l++){var u=a[l];if(u!==void 0){var o=i.any(u,this.ns.link("response"));if(o!==void 0&&i.anyValue(o,this.ns.http("status"))&&i.anyValue(o,this.ns.http("status")).startsWith("2")){var f=i.each(o,this.ns.httph(t.toLowerCase()));return f.length?f.map(function(c){return c.value}):[]}}}}},{key:"saveRequestMetadata",value:function(e,t){var i=t.req,s=this.store,a=t.referringTerm;this.addStatus(t.req,"Accept: "+t.headers.accept),Ml(a)&&s.add(s.rdfFactory.namedNode(e),this.ns.link("requestedBy"),a,this.appNode),t.original&&t.original.value!==e&&s.add(i,this.ns.link("orginalURI"),s.rdfFactory.literal(t.original.value),this.appNode);var l=new Date,u="["+l.getHours()+":"+l.getMinutes()+":"+l.getSeconds()+"] ";s.add(i,this.ns.rdfs("label"),s.rdfFactory.literal(u+" Request for "+e),this.appNode),s.add(i,this.ns.link("requestedURI"),s.rdfFactory.literal(e),this.appNode),s.add(i,this.ns.link("status"),s.collection(),this.appNode)}},{key:"saveResponseMetadata",value:function(e,t){var i=this,s=this.store,a=s.bnode();return s.add(t.req,this.ns.link("response"),a,this.appNode),s.add(a,this.ns.http("status"),s.rdfFactory.literal(e.status),this.appNode),s.add(a,this.ns.http("statusText"),s.rdfFactory.literal(e.statusText),this.appNode),e.headers.forEach(function(l,u){s.add(a,i.ns.httph(u),i.store.rdfFactory.literal(l),i.appNode),u==="content-type"&&s.add(t.resource,i.ns.rdf("type"),s.rdfFactory.namedNode(gp(l).value),i.appNode)}),a}},{key:"objectRefresh",value:function(e){var t=this.store.uris(e);if(typeof t<"u")for(var i=0;i<t.length;i++)this.refresh(this.store.rdfFactory.namedNode(En(t[i])))}},{key:"refresh",value:function(e,t){this.fireCallbacks("refresh",arguments),this.nowOrWhenFetched(e,{force:!0,clearPreviousData:!0},t)}},{key:"refreshIfExpired",value:function(e,t){var i=this.getHeader(e,"Expires");!i||new Date(i[0]).getTime()<=new Date().getTime()?this.refresh(e,t):t(!0,"Not expired",{})}},{key:"retract",value:function(e){this.store.removeMany(void 0,void 0,void 0,e),e.value&&delete this.requested[En(e.value)],this.fireCallbacks("retract",arguments)}},{key:"getState",value:function(e){return typeof this.requested[e]>"u"?"unrequested":this.requested[e]===!0?"requested":this.requested[e]==="done"?"fetched":this.requested[e]==="redirected"?this.getState(this.redirectedTo[e]):"failed"}},{key:"isPending",value:function(e){return this.requested[e]===!0}},{key:"unload",value:function(e){this.store.removeDocument(e),delete this.requested[e.value]}},{key:"addHandler",value:function(e){this.handlers.push(e),e.register(this)}},{key:"retryNoCredentials",value:function(e,t){t.retriedWithNoCredentials=!0,delete this.requested[e],delete this.fetchQueue[e];var i=Object.assign({},t,{credentials:"omit"});return this.addStatus(t.req,"Abort: Will retry with credentials SUPPRESSED to see if that helps"),this.load(e,i)}},{key:"isCrossSite",value:function(e){if(typeof document>"u"||!document.location)return!1;var t=x_,i=""+document.location;return(t(i)&&t(e)&&t(i))!==t(e)}},{key:"handleError",value:function(e,t,i){if(this.isCrossSite(t)){if(i.credentials&&i.credentials==="include"&&!i.retriedWithNoCredentials)return this.retryNoCredentials(t,i);var s=n.crossSiteProxy(t);if(s&&!i.proxyUsed)return this.redirectToProxy(s,i)}var a;return e instanceof Error?a="Fetch error: "+e.message:(a=e.statusText,e.responseText&&(a+=" ".concat(e.responseText))),this.failFetch(i,a,e.status||998,e)}},{key:"addType",value:function(e,t,i,s){var a=t;if(s){var l=i.any(a,this.ns.link("requestedURI"));l&&l.value!==s&&i.add(i.rdfFactory.namedNode(s),this.ns.rdf("type"),e,this.appNode)}for(;;){var u=i.any(a,this.ns.link("requestedURI"));if(u&&u.value&&i.add(i.rdfFactory.namedNode(u.value),this.ns.rdf("type"),e,this.appNode),a=i.any(void 0,i.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#redirectedRequest"),a),!a)break;var o=i.any(a,i.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#response"));if(!o)break;var f=i.any(o,i.rdfFactory.namedNode("http://www.w3.org/2007/ont/http#status"));if(!f||f!=="301"&&f!=="302")break}}},{key:"handleResponse",value:function(e,t,i){var s=this,a=this.store,l=e.headers,u=i.req,o=this.saveResponseMetadata(e,i),f=this.normalizedContentType(i,l)||"",c=l.get("content-location");if(e.status===0)return this.handleError(e,t,i);if(e.status>=400)return e.status===404&&(this.nonexistent[i.original.value]=!0,this.nonexistent[t]=!0),this.saveErrorResponse(e,o).then(function(){var j=i.resource+" "+e.statusText;return s.failFetch(i,j,e.status,e)});var d=null,_=null;if(c&&(_=tr(c,t),_!==t&&(d=_)),e.status===200){if(this.addType(this.ns.link("Document"),u,a,t),d&&this.addType(this.ns.link("Document"),u,a,d),i.clearPreviousData)for(var m=a.statementsMatching(void 0,void 0,void 0,i.resource).slice(),N=0;N<m.length;N++)a.removeStatement(m[N]);var w=f.includes("image/")||f.includes("application/pdf");f&&w&&(this.addType(a.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),u,a,t),d&&this.addType(a.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),u,a,d))}if(c){if(!i.force&&d&&this.requested[_]==="done")return this.doneFetch(i,e);this.requested[_]=!0}this.parseLinkHeader(l.get("link"),i.original,u);var R=this.handlerForContentType(f,e);return R?e.text().then(function(j){return e.responseText=j,R.parse(s,j,i,e)}):(this.addStatus(u,"Fetch over. No data handled."),this.doneFetch(i,e))}},{key:"saveErrorResponse",value:function(e,t){var i=this,s=this.store;return e.text().then(function(a){a.length>10&&s.add(t,i.ns.http("content"),s.rdfFactory.literal(a),t)})}},{key:"handlerForContentType",value:function(e,t){if(!e)return null;var i=this.handlers.find(function(s){return e.match(s.pattern)});return i?new i(t):null}},{key:"guessContentType",value:function(e){return gc[e.split(".").pop()]}},{key:"normalizedContentType",value:function(e,t){if(e.forceContentType)return e.forceContentType;var i=t.get("content-type");if(!i||i.includes("application/octet-stream")){var s=this.guessContentType(e.resource.value);if(s)return s}var a=xl(e.resource.value);return!i&&["file","chrome"].includes(a)?"text/xml":i}},{key:"redirectToProxy",value:function(e,t){var i=this;this.addStatus(t.req,"BLOCKED -> Cross-site Proxy to <"+e+">"),t.proxyUsed=!0;var s=this.store,a=t.req;t.noMeta||(s.add(a,this.ns.link("redirectedTo"),s.rdfFactory.namedNode(e),a),this.addStatus(a,"redirected to new request")),this.requested[t.resource.value]="redirected",this.redirectedTo[t.resource.value]=e;var l=Object.assign({},t);return l.baseURI=t.resource.value,this.fetchUri(e,l).then(function(u){return l.noMeta||s.add(a,i.ns.link("redirectedRequest"),l.req,i.appNode),u})}},{key:"setRequestTimeout",value:function(e,t){var i=this;return new Promise(function(s){i.timeouts[e]=(i.timeouts[e]||[]).concat(setTimeout(function(){i.isPending(e)&&!t.retriedWithNoCredentials&&!t.proxyUsed&&s(i.failFetch(t,"Request to ".concat(e," timed out"),"timeout"))},i.timeout))})}},{key:"addFetchCallback",value:function(e,t){this.fetchCallbacks[e]?this.fetchCallbacks[e].push(t):this.fetchCallbacks[e]=[t]}},{key:"acceptString",value:function(){var e="";for(var t in this.mediatypes){e!==""&&(e+=", "),e+=t;for(var i in this.mediatypes[t])e+=";"+i+"="+this.mediatypes[t][i]}return e}}],[{key:"crossSiteProxy",value:function(e){if(n.crossSiteProxyTemplate)return n.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(e))}},{key:"offlineOverride",value:function(e){var t=e,i;return typeof window<"u"&&window.panes&&(i=window.panes.UI)&&i.preferences&&i.preferences.get("offlineModeUsingLocalhost")&&t.slice(0,7)==="http://"&&t.slice(7,17)!=="localhost/"&&(t="http://localhost/"+t.slice(7)),t}},{key:"proxyIfNecessary",value:function(e){var t;if(typeof window<"u"&&window.panes&&(t=window.panes.UI)&&t.isExtension)return e;if(typeof $SolidTestEnvironment<"u"&&$SolidTestEnvironment.localSiteMap){var i=e.split("/").slice(2),s=function l(u,o){var f=o[u.shift()];return f?typeof f=="string"?f+u.join("/"):u?l(u,f):null:null},a=s(i,$SolidTestEnvironment.localSiteMap);if(a)return a}return n.crossSiteProxyTemplate&&typeof document<"u"&&document.location&&(""+document.location).slice(0,6)==="https:"&&e.slice(0,5)==="http:"?n.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(e)):e}},{key:"unsupportedProtocol",value:function(e){var t=xl(e);return t==="tel"||t==="mailto"||t==="urn"}},{key:"setCredentials",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.credentials===void 0&&(t.withCredentials!==void 0?t.credentials=t.withCredentials?"include":"omit":t.credentials="include")}}])}();ge(Ln,"HANDLERS",void 0);ge(Ln,"CONTENT_TYPE_BY_EXT",void 0);ge(Ln,"crossSiteProxyTemplate",void 0);Ln.HANDLERS=rs;Ln.CONTENT_TYPE_BY_EXT=gc;function Du(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,t)}return e}function ku(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Du(Object(e),!0).forEach(function(t){ge(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Du(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}var xi=ku(ku({},Ka),{},{fetcher:function(r,e){return new Ln(r,e)},graph:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return new di(r,e||{rdfFactory:Ka})},lit:function(r,e,t){return this.literal(""+r,e||t)},st:function(r,e,t,i){return this.quad(r,e,t,i)}}),_a={};for(var $a in xi)typeof xi[$a]=="function"&&(_a[$a]=xi[$a].bind(xi));var N0=_a.graph,kc=_a.namedNode,S0=_a.literal;new ac;ft.fromValue;vr.nextId;let ne,Jt=0,Yn=null;function zi(){return(Yn===null||Yn.byteLength===0)&&(Yn=new Uint8Array(ne.memory.buffer)),Yn}const Xi=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},R0=typeof Xi.encodeInto=="function"?function(n,r){return Xi.encodeInto(n,r)}:function(n,r){const e=Xi.encode(n);return r.set(e),{read:n.length,written:e.length}};function Sr(n,r,e){if(e===void 0){const l=Xi.encode(n),u=r(l.length,1)>>>0;return zi().subarray(u,u+l.length).set(l),Jt=l.length,u}let t=n.length,i=r(t,1)>>>0;const s=zi();let a=0;for(;a<t;a++){const l=n.charCodeAt(a);if(l>127)break;s[i+a]=l}if(a!==t){a!==0&&(n=n.slice(a)),i=e(i,t,t=a+n.length*3,1)>>>0;const l=zi().subarray(i+a,i+t),u=R0(n,l);a+=u.written,i=e(i,t,a,1)>>>0}return Jt=a,i}function pa(n){return n==null}let Jn=null;function Ee(){return(Jn===null||Jn.byteLength===0)&&(Jn=new Int32Array(ne.memory.buffer)),Jn}const Ec=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Ec.decode();function ut(n,r){return n=n>>>0,Ec.decode(zi().subarray(n,n+r))}function yt(n){const r=ne.__wbindgen_export_2.get(n);return ne.__externref_table_dealloc(n),r}function I0(n){try{const i=ne.__wbindgen_add_to_stack_pointer(-16),s=Sr(n,ne.__wbindgen_malloc,ne.__wbindgen_realloc),a=Jt;ne.namedNode(i,s,a);var r=Ee()[i/4+0],e=Ee()[i/4+1],t=Ee()[i/4+2];if(t)throw yt(e);return Bn.__wrap(r)}finally{ne.__wbindgen_add_to_stack_pointer(16)}}function F0(n){try{const a=ne.__wbindgen_add_to_stack_pointer(-16);var r=pa(n)?0:Sr(n,ne.__wbindgen_malloc,ne.__wbindgen_realloc),e=Jt;ne.blankNode(a,r,e);var t=Ee()[a/4+0],i=Ee()[a/4+1],s=Ee()[a/4+2];if(s)throw yt(i);return hi.__wrap(t)}finally{ne.__wbindgen_add_to_stack_pointer(16)}}function O0(n,r){try{const l=ne.__wbindgen_add_to_stack_pointer(-16);var e=pa(n)?0:Sr(n,ne.__wbindgen_malloc,ne.__wbindgen_realloc),t=Jt;ne.literal(l,e,t,r);var i=Ee()[l/4+0],s=Ee()[l/4+1],a=Ee()[l/4+2];if(a)throw yt(s);return pi.__wrap(i)}finally{ne.__wbindgen_add_to_stack_pointer(16)}}function L0(){const n=ne.defaultGraph();return _i.__wrap(n)}function B0(n){try{const i=ne.__wbindgen_add_to_stack_pointer(-16),s=Sr(n,ne.__wbindgen_malloc,ne.__wbindgen_realloc),a=Jt;ne.variable(i,s,a);var r=Ee()[i/4+0],e=Ee()[i/4+1],t=Ee()[i/4+2];if(t)throw yt(e);return gi.__wrap(r)}finally{ne.__wbindgen_add_to_stack_pointer(16)}}function q0(n,r,e){try{const a=ne.__wbindgen_add_to_stack_pointer(-16);ne.triple(a,n,r,e);var t=Ee()[a/4+0],i=Ee()[a/4+1],s=Ee()[a/4+2];if(s)throw yt(i);return qn.__wrap(t)}finally{ne.__wbindgen_add_to_stack_pointer(16)}}function M0(n,r,e,t){try{const l=ne.__wbindgen_add_to_stack_pointer(-16);ne.quad(l,n,r,e,t);var i=Ee()[l/4+0],s=Ee()[l/4+1],a=Ee()[l/4+2];if(a)throw yt(s);return qn.__wrap(i)}finally{ne.__wbindgen_add_to_stack_pointer(16)}}function j0(n){try{const i=ne.__wbindgen_add_to_stack_pointer(-16);ne.fromTerm(i,n);var r=Ee()[i/4+0],e=Ee()[i/4+1],t=Ee()[i/4+2];if(t)throw yt(e);return yt(r)}finally{ne.__wbindgen_add_to_stack_pointer(16)}}function P0(n){try{const i=ne.__wbindgen_add_to_stack_pointer(-16);ne.fromQuad(i,n);var r=Ee()[i/4+0],e=Ee()[i/4+1],t=Ee()[i/4+2];if(t)throw yt(e);return yt(r)}finally{ne.__wbindgen_add_to_stack_pointer(16)}}let Zn=null;function Ac(){return(Zn===null||Zn.byteLength===0)&&(Zn=new Uint32Array(ne.memory.buffer)),Zn}function Tc(n){const r=ne.__externref_table_alloc();return ne.__wbindgen_export_2.set(r,n),r}function U0(n,r){const e=r(n.length*4,4)>>>0,t=Ac();for(let i=0;i<n.length;i++)t[e/4+i]=Tc(n[i]);return Jt=n.length,e}function x0(n,r){n=n>>>0;const t=Ac().subarray(n/4,n/4+r),i=[];for(let s=0;s<t.length;s++)i.push(ne.__wbindgen_export_2.get(t[s]));return ne.__externref_drop_slice(n,r),i}function $0(){ne.main()}function ir(n,r){try{return n.apply(this,r)}catch(e){const t=Tc(e);ne.__wbindgen_exn_store(t)}}const Eu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>ne.__wbg_blanknode_free(n>>>0));class hi{static __wrap(r){r=r>>>0;const e=Object.create(hi.prototype);return e.__wbg_ptr=r,Eu.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,Eu.unregister(this),r}free(){const r=this.__destroy_into_raw();ne.__wbg_blanknode_free(r)}get termType(){let r,e;try{const s=ne.__wbindgen_add_to_stack_pointer(-16);ne.blanknode_term_type(s,this.__wbg_ptr);var t=Ee()[s/4+0],i=Ee()[s/4+1];return r=t,e=i,ut(t,i)}finally{ne.__wbindgen_add_to_stack_pointer(16),ne.__wbindgen_free(r,e,1)}}get value(){let r,e;try{const s=ne.__wbindgen_add_to_stack_pointer(-16);ne.blanknode_value(s,this.__wbg_ptr);var t=Ee()[s/4+0],i=Ee()[s/4+1];return r=t,e=i,ut(t,i)}finally{ne.__wbindgen_add_to_stack_pointer(16),ne.__wbindgen_free(r,e,1)}}toString(){let r,e;try{const s=ne.__wbindgen_add_to_stack_pointer(-16);ne.blanknode_toString(s,this.__wbg_ptr);var t=Ee()[s/4+0],i=Ee()[s/4+1];return r=t,e=i,ut(t,i)}finally{ne.__wbindgen_add_to_stack_pointer(16),ne.__wbindgen_free(r,e,1)}}equals(r){return ne.blanknode_equals(this.__wbg_ptr,r)!==0}}const Au=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>ne.__wbg_defaultgraph_free(n>>>0));class _i{static __wrap(r){r=r>>>0;const e=Object.create(_i.prototype);return e.__wbg_ptr=r,Au.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,Au.unregister(this),r}free(){const r=this.__destroy_into_raw();ne.__wbg_defaultgraph_free(r)}get termType(){let r,e;try{const s=ne.__wbindgen_add_to_stack_pointer(-16);ne.defaultgraph_term_type(s,this.__wbg_ptr);var t=Ee()[s/4+0],i=Ee()[s/4+1];return r=t,e=i,ut(t,i)}finally{ne.__wbindgen_add_to_stack_pointer(16),ne.__wbindgen_free(r,e,1)}}get value(){let r,e;try{const s=ne.__wbindgen_add_to_stack_pointer(-16);ne.defaultgraph_value(s,this.__wbg_ptr);var t=Ee()[s/4+0],i=Ee()[s/4+1];return r=t,e=i,ut(t,i)}finally{ne.__wbindgen_add_to_stack_pointer(16),ne.__wbindgen_free(r,e,1)}}toString(){let r,e;try{const s=ne.__wbindgen_add_to_stack_pointer(-16);ne.defaultgraph_toString(s,this.__wbg_ptr);var t=Ee()[s/4+0],i=Ee()[s/4+1];return r=t,e=i,ut(t,i)}finally{ne.__wbindgen_add_to_stack_pointer(16),ne.__wbindgen_free(r,e,1)}}equals(r){return ne.defaultgraph_equals(this.__wbg_ptr,r)!==0}}const Tu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>ne.__wbg_literal_free(n>>>0));class pi{static __wrap(r){r=r>>>0;const e=Object.create(pi.prototype);return e.__wbg_ptr=r,Tu.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,Tu.unregister(this),r}free(){const r=this.__destroy_into_raw();ne.__wbg_literal_free(r)}get termType(){let r,e;try{const s=ne.__wbindgen_add_to_stack_pointer(-16);ne.literal_term_type(s,this.__wbg_ptr);var t=Ee()[s/4+0],i=Ee()[s/4+1];return r=t,e=i,ut(t,i)}finally{ne.__wbindgen_add_to_stack_pointer(16),ne.__wbindgen_free(r,e,1)}}get value(){let r,e;try{const s=ne.__wbindgen_add_to_stack_pointer(-16);ne.literal_value(s,this.__wbg_ptr);var t=Ee()[s/4+0],i=Ee()[s/4+1];return r=t,e=i,ut(t,i)}finally{ne.__wbindgen_add_to_stack_pointer(16),ne.__wbindgen_free(r,e,1)}}get language(){let r,e;try{const s=ne.__wbindgen_add_to_stack_pointer(-16);ne.literal_language(s,this.__wbg_ptr);var t=Ee()[s/4+0],i=Ee()[s/4+1];return r=t,e=i,ut(t,i)}finally{ne.__wbindgen_add_to_stack_pointer(16),ne.__wbindgen_free(r,e,1)}}get datatype(){const r=ne.literal_datatype(this.__wbg_ptr);return Bn.__wrap(r)}toString(){let r,e;try{const s=ne.__wbindgen_add_to_stack_pointer(-16);ne.literal_toString(s,this.__wbg_ptr);var t=Ee()[s/4+0],i=Ee()[s/4+1];return r=t,e=i,ut(t,i)}finally{ne.__wbindgen_add_to_stack_pointer(16),ne.__wbindgen_free(r,e,1)}}equals(r){return ne.literal_equals(this.__wbg_ptr,r)!==0}}const Cu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>ne.__wbg_namednode_free(n>>>0));class Bn{static __wrap(r){r=r>>>0;const e=Object.create(Bn.prototype);return e.__wbg_ptr=r,Cu.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,Cu.unregister(this),r}free(){const r=this.__destroy_into_raw();ne.__wbg_namednode_free(r)}get termType(){let r,e;try{const s=ne.__wbindgen_add_to_stack_pointer(-16);ne.namednode_term_type(s,this.__wbg_ptr);var t=Ee()[s/4+0],i=Ee()[s/4+1];return r=t,e=i,ut(t,i)}finally{ne.__wbindgen_add_to_stack_pointer(16),ne.__wbindgen_free(r,e,1)}}get value(){let r,e;try{const s=ne.__wbindgen_add_to_stack_pointer(-16);ne.namednode_value(s,this.__wbg_ptr);var t=Ee()[s/4+0],i=Ee()[s/4+1];return r=t,e=i,ut(t,i)}finally{ne.__wbindgen_add_to_stack_pointer(16),ne.__wbindgen_free(r,e,1)}}toString(){let r,e;try{const s=ne.__wbindgen_add_to_stack_pointer(-16);ne.namednode_toString(s,this.__wbg_ptr);var t=Ee()[s/4+0],i=Ee()[s/4+1];return r=t,e=i,ut(t,i)}finally{ne.__wbindgen_add_to_stack_pointer(16),ne.__wbindgen_free(r,e,1)}}equals(r){return ne.namednode_equals(this.__wbg_ptr,r)!==0}}const Nu=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>ne.__wbg_quad_free(n>>>0));class qn{static __wrap(r){r=r>>>0;const e=Object.create(qn.prototype);return e.__wbg_ptr=r,Nu.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,Nu.unregister(this),r}free(){const r=this.__destroy_into_raw();ne.__wbg_quad_free(r)}get termType(){let r,e;try{const s=ne.__wbindgen_add_to_stack_pointer(-16);ne.quad_term_type(s,this.__wbg_ptr);var t=Ee()[s/4+0],i=Ee()[s/4+1];return r=t,e=i,ut(t,i)}finally{ne.__wbindgen_add_to_stack_pointer(16),ne.__wbindgen_free(r,e,1)}}get value(){let r,e;try{const s=ne.__wbindgen_add_to_stack_pointer(-16);ne.defaultgraph_value(s,this.__wbg_ptr);var t=Ee()[s/4+0],i=Ee()[s/4+1];return r=t,e=i,ut(t,i)}finally{ne.__wbindgen_add_to_stack_pointer(16),ne.__wbindgen_free(r,e,1)}}get subject(){return ne.quad_subject(this.__wbg_ptr)}get predicate(){return ne.quad_predicate(this.__wbg_ptr)}get object(){return ne.quad_object(this.__wbg_ptr)}get graph(){return ne.quad_graph(this.__wbg_ptr)}toString(){let r,e;try{const s=ne.__wbindgen_add_to_stack_pointer(-16);ne.quad_toString(s,this.__wbg_ptr);var t=Ee()[s/4+0],i=Ee()[s/4+1];return r=t,e=i,ut(t,i)}finally{ne.__wbindgen_add_to_stack_pointer(16),ne.__wbindgen_free(r,e,1)}}equals(r){return ne.quad_equals(this.__wbg_ptr,r)!==0}}const V0=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>ne.__wbg_store_free(n>>>0));class Cc{__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,V0.unregister(this),r}free(){const r=this.__destroy_into_raw();ne.__wbg_store_free(r)}constructor(r){try{const l=ne.__wbindgen_add_to_stack_pointer(-16);var e=pa(r)?0:U0(r,ne.__wbindgen_malloc),t=Jt;ne.store_new(l,e,t);var i=Ee()[l/4+0],s=Ee()[l/4+1],a=Ee()[l/4+2];if(a)throw yt(s);return this.__wbg_ptr=i>>>0,this}finally{ne.__wbindgen_add_to_stack_pointer(16)}}add(r){try{const i=ne.__wbindgen_add_to_stack_pointer(-16);ne.store_add(i,this.__wbg_ptr,r);var e=Ee()[i/4+0],t=Ee()[i/4+1];if(t)throw yt(e)}finally{ne.__wbindgen_add_to_stack_pointer(16)}}delete(r){try{const i=ne.__wbindgen_add_to_stack_pointer(-16);ne.store_delete(i,this.__wbg_ptr,r);var e=Ee()[i/4+0],t=Ee()[i/4+1];if(t)throw yt(e)}finally{ne.__wbindgen_add_to_stack_pointer(16)}}has(r){try{const s=ne.__wbindgen_add_to_stack_pointer(-16);ne.store_has(s,this.__wbg_ptr,r);var e=Ee()[s/4+0],t=Ee()[s/4+1],i=Ee()[s/4+2];if(i)throw yt(t);return e!==0}finally{ne.__wbindgen_add_to_stack_pointer(16)}}get size(){try{const i=ne.__wbindgen_add_to_stack_pointer(-16);ne.store_size(i,this.__wbg_ptr);var r=Ee()[i/4+0],e=Ee()[i/4+1],t=Ee()[i/4+2];if(t)throw yt(e);return r>>>0}finally{ne.__wbindgen_add_to_stack_pointer(16)}}match(r,e,t,i){try{const f=ne.__wbindgen_add_to_stack_pointer(-16);ne.store_match(f,this.__wbg_ptr,r,e,t,i);var s=Ee()[f/4+0],a=Ee()[f/4+1],l=Ee()[f/4+2],u=Ee()[f/4+3];if(u)throw yt(l);var o=x0(s,a).slice();return ne.__wbindgen_free(s,a*4,4),o}finally{ne.__wbindgen_add_to_stack_pointer(16)}}query(r,e){try{const a=ne.__wbindgen_add_to_stack_pointer(-16),l=Sr(r,ne.__wbindgen_malloc,ne.__wbindgen_realloc),u=Jt;ne.store_query(a,this.__wbg_ptr,l,u,e);var t=Ee()[a/4+0],i=Ee()[a/4+1],s=Ee()[a/4+2];if(s)throw yt(i);return yt(t)}finally{ne.__wbindgen_add_to_stack_pointer(16)}}update(r,e){try{const s=ne.__wbindgen_add_to_stack_pointer(-16),a=Sr(r,ne.__wbindgen_malloc,ne.__wbindgen_realloc),l=Jt;ne.store_update(s,this.__wbg_ptr,a,l,e);var t=Ee()[s/4+0],i=Ee()[s/4+1];if(i)throw yt(t)}finally{ne.__wbindgen_add_to_stack_pointer(16)}}load(r,e,t,i){try{const l=ne.__wbindgen_add_to_stack_pointer(-16),u=Sr(r,ne.__wbindgen_malloc,ne.__wbindgen_realloc),o=Jt;ne.store_load(l,this.__wbg_ptr,u,o,e,t,i);var s=Ee()[l/4+0],a=Ee()[l/4+1];if(a)throw yt(s)}finally{ne.__wbindgen_add_to_stack_pointer(16)}}dump(r,e){let t,i;try{const c=ne.__wbindgen_add_to_stack_pointer(-16);ne.store_dump(c,this.__wbg_ptr,r,e);var s=Ee()[c/4+0],a=Ee()[c/4+1],l=Ee()[c/4+2],u=Ee()[c/4+3],o=s,f=a;if(u)throw o=0,f=0,yt(l);return t=o,i=f,ut(o,f)}finally{ne.__wbindgen_add_to_stack_pointer(16),ne.__wbindgen_free(t,i,1)}}}const Su=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>ne.__wbg_variable_free(n>>>0));class gi{static __wrap(r){r=r>>>0;const e=Object.create(gi.prototype);return e.__wbg_ptr=r,Su.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const r=this.__wbg_ptr;return this.__wbg_ptr=0,Su.unregister(this),r}free(){const r=this.__destroy_into_raw();ne.__wbg_variable_free(r)}get termType(){let r,e;try{const s=ne.__wbindgen_add_to_stack_pointer(-16);ne.variable_term_type(s,this.__wbg_ptr);var t=Ee()[s/4+0],i=Ee()[s/4+1];return r=t,e=i,ut(t,i)}finally{ne.__wbindgen_add_to_stack_pointer(16),ne.__wbindgen_free(r,e,1)}}get value(){let r,e;try{const s=ne.__wbindgen_add_to_stack_pointer(-16);ne.variable_value(s,this.__wbg_ptr);var t=Ee()[s/4+0],i=Ee()[s/4+1];return r=t,e=i,ut(t,i)}finally{ne.__wbindgen_add_to_stack_pointer(16),ne.__wbindgen_free(r,e,1)}}toString(){let r,e;try{const s=ne.__wbindgen_add_to_stack_pointer(-16);ne.variable_toString(s,this.__wbg_ptr);var t=Ee()[s/4+0],i=Ee()[s/4+1];return r=t,e=i,ut(t,i)}finally{ne.__wbindgen_add_to_stack_pointer(16),ne.__wbindgen_free(r,e,1)}}equals(r){return ne.variable_equals(this.__wbg_ptr,r)!==0}}async function H0(n,r){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,r)}catch(t){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}const e=await n.arrayBuffer();return await WebAssembly.instantiate(e,r)}else{const e=await WebAssembly.instantiate(n,r);return e instanceof WebAssembly.Instance?{instance:e,module:n}:e}}function Nc(){const n={};return n.wbg={},n.wbg.__wbindgen_is_undefined=function(r){return r===void 0},n.wbg.__wbindgen_is_null=function(r){return r===null},n.wbg.__wbindgen_string_get=function(r,e){const t=e,i=typeof t=="string"?t:void 0;var s=pa(i)?0:Sr(i,ne.__wbindgen_malloc,ne.__wbindgen_realloc),a=Jt;Ee()[r/4+1]=a,Ee()[r/4+0]=s},n.wbg.__wbindgen_is_falsy=function(r){return!r},n.wbg.__wbg_new_28c511d9baebfa89=function(r,e){return new Error(ut(r,e))},n.wbg.__wbg_quad_new=function(r){return qn.__wrap(r)},n.wbg.__wbg_namednode_new=function(r){return Bn.__wrap(r)},n.wbg.__wbg_blanknode_new=function(r){return hi.__wrap(r)},n.wbg.__wbg_literal_new=function(r){return pi.__wrap(r)},n.wbg.__wbg_defaultgraph_new=function(r){return _i.__wrap(r)},n.wbg.__wbg_variable_new=function(r){return gi.__wrap(r)},n.wbg.__wbindgen_string_new=function(r,e){return ut(r,e)},n.wbg.__wbg_new_57421e8974065233=function(r,e){return new URIError(ut(r,e))},n.wbg.__wbindgen_is_string=function(r){return typeof r=="string"},n.wbg.__wbg_new_16b304a2cfa7ff4a=function(){return new Array},n.wbg.__wbg_new_d9bc3a0147634640=function(){return new Map},n.wbg.__wbg_push_a5b05aedc7234f9f=function(r,e){return r.push(e)},n.wbg.__wbg_set_8417257aaedc936b=function(r,e,t){return r.set(e,t)},n.wbg.__wbg_warn_d573f396246f7cdf=function(r,e){console.warn(ut(r,e))},n.wbg.__wbg_new_abda76e883ba8a5f=function(){return new Error},n.wbg.__wbg_stack_658279fe44541cf6=function(r,e){const t=e.stack,i=Sr(t,ne.__wbindgen_malloc,ne.__wbindgen_realloc),s=Jt;Ee()[r/4+1]=s,Ee()[r/4+0]=i},n.wbg.__wbg_error_f851667af71bcfc6=function(r,e){let t,i;try{t=r,i=e,console.error(ut(r,e))}finally{ne.__wbindgen_free(t,i,1)}},n.wbg.__wbg_call_b3ca7c6051f9bec1=function(){return ir(function(r,e,t){return r.call(e,t)},arguments)},n.wbg.__wbg_get_e3c254076557e348=function(){return ir(function(r,e){return Reflect.get(r,e)},arguments)},n.wbg.__wbg_has_0af94d20077affa2=function(){return ir(function(r,e){return Reflect.has(r,e)},arguments)},n.wbg.__wbg_now_3014639a94423537=function(){return Date.now()},n.wbg.__wbg_self_ce0dbfc45cf2f5be=function(){return ir(function(){return self.self},arguments)},n.wbg.__wbg_window_c6fb939a7f436783=function(){return ir(function(){return window.window},arguments)},n.wbg.__wbg_globalThis_d1e6af4856ba331b=function(){return ir(function(){return globalThis.globalThis},arguments)},n.wbg.__wbg_global_207b558942527489=function(){return ir(function(){return global.global},arguments)},n.wbg.__wbg_newnoargs_e258087cd0daa0ea=function(r,e){return new Function(ut(r,e))},n.wbg.__wbg_call_27c0f87801dedf93=function(){return ir(function(r,e){return r.call(e)},arguments)},n.wbg.__wbg_crypto_1d1f22824a6a080c=function(r){return r.crypto},n.wbg.__wbindgen_is_object=function(r){const e=r;return typeof e=="object"&&e!==null},n.wbg.__wbg_process_4a72847cc503995b=function(r){return r.process},n.wbg.__wbg_versions_f686565e586dd935=function(r){return r.versions},n.wbg.__wbg_node_104a2ff8d6ea03a2=function(r){return r.node},n.wbg.__wbg_require_cca90b1a94a0255b=function(){return ir(function(){return module.require},arguments)},n.wbg.__wbindgen_is_function=function(r){return typeof r=="function"},n.wbg.__wbg_msCrypto_eb05e62b530a1508=function(r){return r.msCrypto},n.wbg.__wbg_newwithlength_e9b4878cebadb3d3=function(r){return new Uint8Array(r>>>0)},n.wbg.__wbindgen_memory=function(){return ne.memory},n.wbg.__wbg_buffer_12d079cc21e14bdb=function(r){return r.buffer},n.wbg.__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb=function(r,e,t){return new Uint8Array(r,e>>>0,t>>>0)},n.wbg.__wbg_randomFillSync_5c9c955aa56b6049=function(){return ir(function(r,e){r.randomFillSync(e)},arguments)},n.wbg.__wbg_subarray_a1f73cd4b5b42fe1=function(r,e,t){return r.subarray(e>>>0,t>>>0)},n.wbg.__wbg_getRandomValues_3aa56aa6edec874c=function(){return ir(function(r,e){r.getRandomValues(e)},arguments)},n.wbg.__wbg_new_63b92bc8671ed464=function(r){return new Uint8Array(r)},n.wbg.__wbg_set_a47bac70306a19a7=function(r,e,t){r.set(e,t>>>0)},n.wbg.__wbindgen_throw=function(r,e){throw new Error(ut(r,e))},n.wbg.__wbindgen_init_externref_table=function(){const r=ne.__wbindgen_export_2,e=r.grow(4);r.set(0,void 0),r.set(e+0,void 0),r.set(e+1,null),r.set(e+2,!0),r.set(e+3,!1)},n}function Sc(n,r){return ne=n.exports,ia.__wbindgen_wasm_module=r,Jn=null,Zn=null,Yn=null,ne.__wbindgen_start(),ne}function z0(n){if(ne!==void 0)return ne;const r=Nc();n instanceof WebAssembly.Module||(n=new WebAssembly.Module(n));const e=new WebAssembly.Instance(n,r);return Sc(e,n)}async function ia(n){if(ne!==void 0)return ne;typeof n>"u"&&(n=new URL(""+new URL("../assets/web_bg.AdZkENxH.wasm",import.meta.url).href,import.meta.url));const r=Nc();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:e,module:t}=await H0(await n,r);return Sc(e,t)}const X0=Object.freeze(Object.defineProperty({__proto__:null,BlankNode:hi,DefaultGraph:_i,Literal:pi,NamedNode:Bn,Quad:qn,Store:Cc,Variable:gi,blankNode:F0,default:ia,defaultGraph:L0,fromQuad:P0,fromTerm:j0,initSync:z0,literal:O0,main:$0,namedNode:I0,quad:M0,triple:q0,variable:B0},Symbol.toStringTag,{value:"Module"})),G0="/ontologies/d3fend.ttl",W0="http://d3fend.mitre.org/ontologies/d3fend.owl#",Q0="http://d3fend.mitre.org/ontologies/cad/instances#",Y0="cco",Rc="d3f",J0="dct",Ic="cad",Z0="owl",Fc="rdf",Oc="rdfs",K0="skos",eg="xsd",Fn={[Rc]:W0,[Ic]:Q0,[Z0]:"http://www.w3.org/2002/07/owl#",[Fc]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",[Oc]:"http://www.w3.org/2000/01/rdf-schema#",[eg]:"http://www.w3.org/2001/XMLSchema#",[J0]:"http://purl.org/dc/terms/",[K0]:"http://www.w3.org/2004/02/skos/core#",[Y0]:"http://www.ontologyrepository.com/CommonCoreOntologies/"};function tg(){const{subscribe:n,set:r,update:e}=lr({initalized:!1,store:null,erorr:null});async function t(){try{console.log("Starting Oxigraph initialization"),console.time("Initialize Oxigraph"),console.log("Oxigraph module:",X0),console.log("Init function:",ia),await ia(),console.log("WebAssembly initialized successfully");const s=new Cc;console.log("Oxigraph store created"),r({initialized:!0,store:s,error:null}),await i(s),console.log(`Oxigraph store initialized with ${s.size} triples.`)}catch(s){r({initialized:!1,store:null,error:s.message}),console.error("Failed to initialize Oxigraph store:",s)}}async function i(s){try{console.time("Load D3FEND ontology");const l=await(await fetch(G0)).text();s.load(l,{format:"ttl"}),console.timeEnd("Load D3FEND ontology"),console.log(`D3FEND ontology loaded, total triples: ${s.size}`)}catch(a){console.error("Failed to load D3FEND ontology:",a)}}return{subscribe:n,initialize:t,query:s=>new Promise((a,l)=>{e(u=>{if(!u.initialized)l(new Error("Oxigraph store not initialized"));else try{const o=u.store.query(s);a(o)}catch(o){l(o)}return u})})}}const Es=tg();async function rg(n){let r=null;return console.log("Calling lookup_valid_property..."),r=await ig(n),console.log(`Property from lookup IRI ${r}`),r==null&&(console.log("Calling lookup_valid_property_by_label..."),r=await ng(n)),r}async function ng(n){const r="findValidPropertyByLabel("+n+")";console.info(r);const e=`PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX d3f: <http://d3fend.mitre.org/ontologies/d3fend.owl#>

SELECT ?property
WHERE
{
   ?property rdfs:subPropertyOf* d3f:may-be-associated-with .
   ?property rdfs:label "${n}" .
}
LIMIT 1`;console.log({valid_value_query:e});let t=null;try{const i=await Es.query(e);i?(console.info(`Type of queryResult for property lookup by label ${n} is: `+Object.prototype.toString.call(i).slice(8,-1)),console.log({query_result:i}),Array.isArray(i)?i.length>0?t=i[0].get("property").value:console.warn(`Empty query results for valid property lookup by label ${n}.`):console.warn(`Query result not the expected Array type for property lookup by label of ${n}.`)):console.error(`Query results: ${i} for valid property lookup by label ${n}.`)}catch(i){console.warn(`Error executing oxigraph query for property lookup by label of: ${n}, error: ${i}`)}return console.info(t+" <- "+r),t}async function ig(n){const r="lookupValidPropertyByFragment("+n+")";console.info(r);const e=`PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX d3f: <http://d3fend.mitre.org/ontologies/d3fend.owl#>

SELECT ?property
WHERE
{
   VALUES ?property { ${n} }
   ?property rdfs:subPropertyOf* d3f:may-be-associated-with .
}
LIMIT 1`;let t=null;if(n.includes(":"))try{const i=await Es.query(e);console.info({query_result:i}),i?Array.isArray(i)?i.length>0?t=i[0].get("property").value:console.warn(`Empty array returned for property lookup by iri of ${n}.`):console.warn(`Query result not the expected Array type for property lookup by iri of ${n}.`):console.warn(`Undefined query result returned for property lookup by iri of ${n}.`)}catch(i){console.warn(`Error executing oxigraph query for property lookup by iri of: ${n}, error: ${i}`)}else console.warn("Attempted lookup by iri of: "+n+" but iri has no ':' char");return console.info(t+" <- "+r),t}const Mr=Ut(Fn[Rc]),Lc=Ut(Fn[Ic]),ag=Ut(Fn[Fc]),sg=Ut(Fn[Oc]);function Gi(n,r){Cn.set(n),si.set(r)}function lg(){Gi([],[])}const Cn=lr([]),si=lr([]);function ug(n,r){if(r.data.d3f_class){const e=r.data.d3f_class,[t,i]=e.split(":");return Mr(i)}else{const e=r.type;return{artifactSelectorNode:Mr("Artifact"),vulnerabilitySelectorNode:Mr("Vulnerability"),attackSelectorNode:Mr("OffensiveTechnique"),countermeasureSelectorNode:Mr("DefensiveTechnique"),informationSelectorNode:Mr("DigitalInformation"),agentSelectorNode:Mr("Agent"),eventNode:Mr("Event")}[e]}}async function og(){const n=N0();Object.keys(Fn).forEach(a=>{const l=Fn[a];console.info("Adding prefix ",a," for ",l),n.setPrefixForURI(a,l)}),console.info("Echo store.namespaces: "+n.namespaces);let r,e;const t=[],i=[];return Cn.subscribe(a=>{r=a})(),si.subscribe(a=>{e=a})(),console.info("Starting node processing..."),fg(r,n,t),console.info("Completed node processing."),console.info("Starting edge processing..."),await dg(e,n,i),console.info("Completed edge processing promise."),await new Promise((a,l)=>{ai(null,n,null,"text/turtle",(u,o)=>{if(u)l(u);else{let f=o;t.length>0&&(f+=`
# Skipped nodes (no d3f_class):
`,t.forEach(c=>{f+=`# Node ID: ${c.id}
`,JSON.stringify(c.data,null,2).split(`
`).forEach(m=>{f+=`# ${m}
`})})),i.length>0&&(f+=`#
# Skipped edges (no label lookup found.):
`,i.forEach(c=>{f+=`# Edge ID: ${c.id}
`,JSON.stringify(c.data,null,2).split(`
`).forEach(m=>{f+=`# ${m}
`})}),f+=`
`),a(f)}})})}function fg(n,r,e){console.info("Processing nodes..."),n.forEach(t=>{const i=t.id,s=t.type,a=t.data.label,l=ug(r,t);if(l){const u=Bc(i),o=S0(a.toString());cg("Processing node and data properties and using rdflib node name: ",l),r.add(u,ag("type"),l),r.add(u,sg("label"),o)}else e.push({id:i,type:s,data:t.data})}),console.info("Done processing nodes."),e.length>1&&console.warn("Skipped nodes:",e)}function Bc(n){const r=n.replace(".","_");return Lc(r)}function cg(n,r){const e=Object.prototype.toString.call(r).slice(8,-1);console.log(`${n} references ${r} of type ${e}`)}const dg=async(n,r,e)=>{console.info("Processing edges now!"),e.length=0;for(const t of n){const i=t.id,s=t.data.label,a=t.source,l=t.target;console.log(`edgeLabel: ${s}`);try{const u=await rg(s);if(u){console.log(`Found property ${u} for ${s}`),console.info(`Adding subject inst:${a} property ${u} object inst:${l}`);try{const o=Bc(a),f=Lc(l.replace(".","_"));r.add(o,kc(u),f),console.info(r.length)}catch{console.error(`Error adding triple for edgeId = ${i}, edgeLabel = ${s}`)}}else console.warn(`Bad property ${u} found for ${s}`),e.push({id:i,data:t.data})}catch(u){console.error(`Lookup error for edgeId: ${i} with edgeLabel: ${s} - ${u}`),e.push({id:i,data:t.data})}}console.info("Done processing edges."),e.length>1&&console.warn("Skipped edges:",e)};function Wr(n,r,e,t,i,s,a,l,u,o,f,c,d,_,m){const N={id:`${Math.random()}`,type:t,position:{x:l,y:u},data:{label:i,sequence:a,techniqueId:s},measured:{width:o,height:f},origin:[.5,0],selected:!1,dragging:!1};let w,R;m?(w=N.id,R=e.id):(w=e.id,R=N.id);const j={type:"editableEdge",data:{label:c},markerEnd:{type:as.ArrowClosed},source:R,sourceHandle:d,target:w,targetHandle:_,id:`xy-edge__${R}${d}-${w}${_}`,selected:!1};r.update(T=>[...T,j]),n.update(T=>[...T,N])}function Ru(n,r,e){const t=n.slice();return t[18]=r[e],t}const hg=n=>({}),Iu=n=>({});function _g(n){let r;return{c(){r=q("No related offensive techniques in this release.")},l(e){r=M(e,"No related offensive techniques in this release.")},m(e,t){A(e,r,t)},p:Le,i:Le,o:Le,d(e){e&&g(r)}}}function pg(n){let r,e;return r=new xr({props:{$$slots:{default:[bg]},$$scope:{ctx:n}}}),{c(){me(r.$$.fragment)},l(t){ve(r.$$.fragment,t)},m(t,i){be(r,t,i),e=!0},p(t,i){const s={};i&16394&&(s.$$scope={dirty:i,ctx:t}),r.$set(s)},i(t){e||(ue(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){we(r,t)}}}function gg(n){let r,e="Loading...";return{c(){r=te("div"),r.textContent=e},l(t){r=re(t,"DIV",{"data-svelte-h":!0}),Ue(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,i){A(t,r,i)},p:Le,i:Le,o:Le,d(t){t&&g(r)}}}function Fu(n){let r=n[18].off_tech_id.value.replace(/ |\./g,"")+"",e,t,i=n[18].off_tech_label.value+"",s,a,l="-->",u,o,f=n[18].off_artifact_rel_label.value.replace(/ /g,"")+"",c,d,_=ke(n[18].off_artifact.value)+"",m,N,w=n[18].off_artifact_label.value+"",R,j,T,S,v=ke(n[18].off_artifact.value)+"",C,D,P=n[18].off_tech_id.value.replace(/ |\./g,"")+"",B,F,b=n[18].off_tech_id.value.replace(/ |\./g,"")+"",y,I,k=ke(n[18].off_artifact.value)+"",V,L,H=ke(n[18].off_artifact.value)+"",le,Y;function x(X,ee){return ee&10&&(T=null),T==null&&(T=!!X[3].includes(X[18].off_tech_id.value.replace(/ |\./g,""))),T?vg:mg}let U=x(n,-1),Q=U(n);return{c(){e=q(r),t=q('["'),s=q(i),a=q('"] '),u=q(l),o=q(" |"),c=q(f),d=q("| "),m=q(_),N=q('["'),R=q(w),j=q(`"];
            `),Q.c(),S=q(`
            class `),C=q(v),D=q(" ArtifactNode; click "),B=q(P),F=q(` href "javascript:da_to_off_callback('`),y=q(b),I=q(`')"; click `),V=q(k),L=q(' href "/dao/artifact/d3f:'),le=q(H),Y=q('";')},l(X){e=M(X,r),t=M(X,'["'),s=M(X,i),a=M(X,'"] '),u=M(X,l),o=M(X," |"),c=M(X,f),d=M(X,"| "),m=M(X,_),N=M(X,'["'),R=M(X,w),j=M(X,`"];
            `),Q.l(X),S=M(X,`
            class `),C=M(X,v),D=M(X," ArtifactNode; click "),B=M(X,P),F=M(X,` href "javascript:da_to_off_callback('`),y=M(X,b),I=M(X,`')"; click `),V=M(X,k),L=M(X,' href "/dao/artifact/d3f:'),le=M(X,H),Y=M(X,'";')},m(X,ee){A(X,e,ee),A(X,t,ee),A(X,s,ee),A(X,a,ee),A(X,u,ee),A(X,o,ee),A(X,c,ee),A(X,d,ee),A(X,m,ee),A(X,N,ee),A(X,R,ee),A(X,j,ee),Q.m(X,ee),A(X,S,ee),A(X,C,ee),A(X,D,ee),A(X,B,ee),A(X,F,ee),A(X,y,ee),A(X,I,ee),A(X,V,ee),A(X,L,ee),A(X,le,ee),A(X,Y,ee)},p(X,ee){ee&2&&r!==(r=X[18].off_tech_id.value.replace(/ |\./g,"")+"")&&de(e,r),ee&2&&i!==(i=X[18].off_tech_label.value+"")&&de(s,i),ee&2&&f!==(f=X[18].off_artifact_rel_label.value.replace(/ /g,"")+"")&&de(c,f),ee&2&&_!==(_=ke(X[18].off_artifact.value)+"")&&de(m,_),ee&2&&w!==(w=X[18].off_artifact_label.value+"")&&de(R,w),U===(U=x(X,ee))&&Q?Q.p(X,ee):(Q.d(1),Q=U(X),Q&&(Q.c(),Q.m(S.parentNode,S))),ee&2&&v!==(v=ke(X[18].off_artifact.value)+"")&&de(C,v),ee&2&&P!==(P=X[18].off_tech_id.value.replace(/ |\./g,"")+"")&&de(B,P),ee&2&&b!==(b=X[18].off_tech_id.value.replace(/ |\./g,"")+"")&&de(y,b),ee&2&&k!==(k=ke(X[18].off_artifact.value)+"")&&de(V,k),ee&2&&H!==(H=ke(X[18].off_artifact.value)+"")&&de(le,H)},d(X){X&&(g(e),g(t),g(s),g(a),g(u),g(o),g(c),g(d),g(m),g(N),g(R),g(j),g(S),g(C),g(D),g(B),g(F),g(y),g(I),g(V),g(L),g(le),g(Y)),Q.d(X)}}}function mg(n){let r,e=n[18].off_tech_id.value.replace(/ |\./g,"")+"",t,i;return{c(){r=q("class "),t=q(e),i=q(" OffensiveTechniqueNode;")},l(s){r=M(s,"class "),t=M(s,e),i=M(s," OffensiveTechniqueNode;")},m(s,a){A(s,r,a),A(s,t,a),A(s,i,a)},p(s,a){a&2&&e!==(e=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&de(t,e)},d(s){s&&(g(r),g(t),g(i))}}}function vg(n){let r,e=n[18].off_tech_id.value.replace(/ |\./g,"")+"",t,i;return{c(){r=q("class "),t=q(e),i=q(" SelectedOffensiveTechniqueNode;")},l(s){r=M(s,"class "),t=M(s,e),i=M(s," SelectedOffensiveTechniqueNode;")},m(s,a){A(s,r,a),A(s,t,a),A(s,i,a)},p(s,a){a&2&&e!==(e=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&de(t,e)},d(s){s&&(g(r),g(t),g(i))}}}function Ou(n){let r=n[6].edge_is_unique(n[18].off_tech_label.value,n[18].off_artifact_rel_label.value,n[18].off_artifact_label.value),e,t=r&&Fu(n);return{c(){t&&t.c(),e=Oe()},l(i){t&&t.l(i),e=Oe()},m(i,s){t&&t.m(i,s),A(i,e,s)},p(i,s){s&2&&(r=i[6].edge_is_unique(i[18].off_tech_label.value,i[18].off_artifact_rel_label.value,i[18].off_artifact_label.value)),r?t?t.p(i,s):(t=Fu(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&g(e),t&&t.d(i)}}}function bg(n){let r,e,t=Ve(n[1].da_to_off.results.bindings),i=[];for(let s=0;s<t.length;s+=1)i[s]=Ou(Ru(n,t,s));return{c(){r=q(`graph LR;
        `);for(let s=0;s<i.length;s+=1)i[s].c();e=Oe()},l(s){r=M(s,`graph LR;
        `);for(let a=0;a<i.length;a+=1)i[a].l(s);e=Oe()},m(s,a){A(s,r,a);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);A(s,e,a)},p(s,a){if(a&74){t=Ve(s[1].da_to_off.results.bindings);let l;for(l=0;l<t.length;l+=1){const u=Ru(s,t,l);i[l]?i[l].p(u,a):(i[l]=Ou(u),i[l].c(),i[l].m(e.parentNode,e))}for(;l<i.length;l+=1)i[l].d(1);i.length=t.length}},d(s){s&&(g(r),g(e)),Tt(i,s)}}}function wg(n){let r,e,t,i,s,a,l,u,o,f,c,d,_,m=n[3].length+"",N,w,R,j,T;const S=n[9].header,v=pt(S,n,n[14],Iu),C=n[9].default,D=pt(C,n,n[14],null),P=[gg,pg,_g],B=[];function F(b,y){return b[1]?b[1].da_to_off.results.bindings.length>0?1:2:0}return l=F(n),u=B[l]=P[l](n),{c(){r=te("dialog"),e=te("div"),v&&v.c(),t=q(`
    Select Attack Techniques
    `),D&&D.c(),i=ae(),s=te("hr"),a=ae(),u.c(),o=ae(),f=te("hr"),c=ae(),d=te("button"),_=q("Insert ("),N=q(m),w=q(")"),this.h()},l(b){r=re(b,"DIALOG",{class:!0});var y=ye(r);e=re(y,"DIV",{class:!0});var I=ye(e);v&&v.l(I),t=M(I,`
    Select Attack Techniques
    `),D&&D.l(I),i=se(I),s=re(I,"HR",{}),a=se(I),u.l(I),o=se(I),f=re(I,"HR",{}),c=se(I),d=re(I,"BUTTON",{class:!0});var k=ye(d);_=M(k,"Insert ("),N=M(k,m),w=M(k,")"),k.forEach(g),I.forEach(g),y.forEach(g),this.h()},h(){d.autofocus=!0,oe(d,"class","svelte-1ai9hff"),oe(e,"class","svelte-1ai9hff"),oe(r,"class","svelte-1ai9hff")},m(b,y){A(b,r,y),z(r,e),v&&v.m(e,null),z(e,t),D&&D.m(e,null),z(e,i),z(e,s),z(e,a),B[l].m(e,null),z(e,o),z(e,f),z(e,c),z(e,d),z(d,_),z(d,N),z(d,w),n[11](r),R=!0,d.focus(),j||(T=[Ae(d,"click",n[7]),Ae(e,"click",Ot(n[10])),Ae(r,"close",n[12]),Ae(r,"click",Ur(n[13]))],j=!0)},p(b,[y]){v&&v.p&&(!R||y&16384)&&gt(v,S,b,b[14],R?vt(S,b[14],y,hg):mt(b[14]),Iu),D&&D.p&&(!R||y&16384)&&gt(D,C,b,b[14],R?vt(C,b[14],y,null):mt(b[14]),null);let I=l;l=F(b),l===I?B[l].p(b,y):(kt(),fe(B[I],1,1,()=>{B[I]=null}),Et(),u=B[l],u?u.p(b,y):(u=B[l]=P[l](b),u.c()),ue(u,1),u.m(e,o)),(!R||y&8)&&m!==(m=b[3].length+"")&&de(N,m)},i(b){R||(ue(v,b),ue(D,b),ue(u),R=!0)},o(b){fe(v,b),fe(D,b),fe(u),R=!1},d(b){b&&g(r),v&&v.d(b),D&&D.d(b),B[l].d(),n[11](null),j=!1,bt(T)}}}function yg(n,r,e){let t,i,s,{$$slots:a={},$$scope:l}=r,{show_attack_modal:u}=r,{parent_node:o}=r,{data:f}=r,c;const d=Dr();nt(n,d,v=>e(16,s=v));const _=Or();nt(n,_,v=>e(15,i=v));let m=new Nn;function N(v){t.includes(v)?e(3,t=t.filter(C=>C!==v)):t.push(v),e(3,t)}window.da_to_off_callback=function(v){N(v)};function w(){let v=0,C=200,D=100;for(const P of t){let B=f.da_to_off.results.bindings.find(F=>F.off_tech_id.value.replace(/ |\./g,"")==P);B&&(Wr(d,_,o,"attackSelectorNode",B.off_tech_label.value,"d3f:"+B.off_tech_id.value,o.data.sequence,o.position.x+v*C,o.position.y+D,182,63,B.off_artifact_rel_label.value,"attackRightSource","attackLeftTarget",!1),v+=1)}d.set(s),_.set(i),c&&c.close(),e(3,t=[])}function R(v){ur.call(this,n,v)}function j(v){_t[v?"unshift":"push"](()=>{c=v,e(2,c)})}const T=()=>e(0,u=!1),S=()=>{c.close(),e(3,t=[])};return n.$$set=v=>{"show_attack_modal"in v&&e(0,u=v.show_attack_modal),"parent_node"in v&&e(8,o=v.parent_node),"data"in v&&e(1,f=v.data),"$$scope"in v&&e(14,l=v.$$scope)},n.$$.update=()=>{n.$$.dirty&5&&u&&c&&(c.showModal(),m.reset())},e(3,t=[]),[u,f,c,t,d,_,m,w,o,a,R,j,T,S,l]}class Dg extends Je{constructor(r){super(),Ze(this,r,yg,wg,Ye,{show_attack_modal:0,parent_node:8,data:1})}}function Lu(n,r,e){const t=n.slice();return t[23]=r[e],t}const kg=n=>({}),Bu=n=>({});function Eg(n){let r;return{c(){r=q("No related defensive techniques in this release.")},l(e){r=M(e,"No related defensive techniques in this release.")},m(e,t){A(e,r,t)},p:Le,i:Le,o:Le,d(e){e&&g(r)}}}function Ag(n){let r,e,t,i,s,a=n[4],l,u;function o(d){n[14](d)}let f={toggles:n[5]};n[4]!==void 0&&(f.selected=n[4]),t=new rf({props:f}),_t.push(()=>Xt(t,"selected",o));let c=Pu(n);return{c(){r=te("br"),e=ae(),me(t.$$.fragment),s=ae(),c.c(),l=Oe()},l(d){r=re(d,"BR",{}),e=se(d),ve(t.$$.fragment,d),s=se(d),c.l(d),l=Oe()},m(d,_){A(d,r,_),A(d,e,_),be(t,d,_),A(d,s,_),c.m(d,_),A(d,l,_),u=!0},p(d,_){const m={};_&32&&(m.toggles=d[5]),!i&&_&16&&(i=!0,m.selected=d[4],zt(()=>i=!1)),t.$set(m),_&16&&Ye(a,a=d[4])?(kt(),fe(c,1,1,Le),Et(),c=Pu(d),c.c(),ue(c,1),c.m(l.parentNode,l)):c.p(d,_)},i(d){u||(ue(t.$$.fragment,d),ue(c),u=!0)},o(d){fe(t.$$.fragment,d),fe(c),u=!1},d(d){d&&(g(r),g(e),g(s),g(l)),we(t,d),c.d(d)}}}function Tg(n){let r,e="Loading...";return{c(){r=te("div"),r.textContent=e},l(t){r=re(t,"DIV",{"data-svelte-h":!0}),Ue(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,i){A(t,r,i)},p:Le,i:Le,o:Le,d(t){t&&g(r)}}}function qu(n){let r=!n[4].includes(n[23].def_tactic_label.value),e,t=r&&Mu(n);return{c(){t&&t.c(),e=Oe()},l(i){t&&t.l(i),e=Oe()},m(i,s){t&&t.m(i,s),A(i,e,s)},p(i,s){s&18&&(r=!i[4].includes(i[23].def_tactic_label.value)),r?t?t.p(i,s):(t=Mu(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&g(e),t&&t.d(i)}}}function Mu(n){let r=ke(n[23].def_tech.value)+"",e,t,i=n[23].def_tech_label.value+"",s,a,l="-->",u,o,f=n[23].def_artifact_rel_label.value.replace(/ /g,"")+"",c,d,_=ke(n[23].def_artifact.value)+"",m,N,w=n[23].def_artifact_label.value+"",R,j,T,S,v=ke(n[23].def_artifact.value)+"",C,D,P=ke(n[23].def_tech.value)+"",B,F,b=ke(n[23].def_artifact.value)+"",y,I,k=ke(n[23].def_artifact.value)+"",V,L;function H(x,U){return U&66&&(T=null),T==null&&(T=!!x[6].includes(ke(x[23].def_tech.value))),T?Ng:Cg}let le=H(n,-1),Y=le(n);return{c(){e=q(r),t=q('["'),s=q(i),a=q('"] '),u=q(l),o=q(`
                | `),c=q(f),d=q(" | "),m=q(_),N=q('["'),R=q(w),j=q(`"];
                `),Y.c(),S=q(` 
                class `),C=q(v),D=q(` ArtifactNode;
                click `),B=q(P),F=q(` call da_to_def_callback();
                click `),y=q(b),I=q(' href "/dao/artifact/d3f:'),V=q(k),L=q('";')},l(x){e=M(x,r),t=M(x,'["'),s=M(x,i),a=M(x,'"] '),u=M(x,l),o=M(x,`
                | `),c=M(x,f),d=M(x," | "),m=M(x,_),N=M(x,'["'),R=M(x,w),j=M(x,`"];
                `),Y.l(x),S=M(x,` 
                class `),C=M(x,v),D=M(x,` ArtifactNode;
                click `),B=M(x,P),F=M(x,` call da_to_def_callback();
                click `),y=M(x,b),I=M(x,' href "/dao/artifact/d3f:'),V=M(x,k),L=M(x,'";')},m(x,U){A(x,e,U),A(x,t,U),A(x,s,U),A(x,a,U),A(x,u,U),A(x,o,U),A(x,c,U),A(x,d,U),A(x,m,U),A(x,N,U),A(x,R,U),A(x,j,U),Y.m(x,U),A(x,S,U),A(x,C,U),A(x,D,U),A(x,B,U),A(x,F,U),A(x,y,U),A(x,I,U),A(x,V,U),A(x,L,U)},p(x,U){U&2&&r!==(r=ke(x[23].def_tech.value)+"")&&de(e,r),U&2&&i!==(i=x[23].def_tech_label.value+"")&&de(s,i),U&2&&f!==(f=x[23].def_artifact_rel_label.value.replace(/ /g,"")+"")&&de(c,f),U&2&&_!==(_=ke(x[23].def_artifact.value)+"")&&de(m,_),U&2&&w!==(w=x[23].def_artifact_label.value+"")&&de(R,w),le===(le=H(x,U))&&Y?Y.p(x,U):(Y.d(1),Y=le(x),Y&&(Y.c(),Y.m(S.parentNode,S))),U&2&&v!==(v=ke(x[23].def_artifact.value)+"")&&de(C,v),U&2&&P!==(P=ke(x[23].def_tech.value)+"")&&de(B,P),U&2&&b!==(b=ke(x[23].def_artifact.value)+"")&&de(y,b),U&2&&k!==(k=ke(x[23].def_artifact.value)+"")&&de(V,k)},d(x){x&&(g(e),g(t),g(s),g(a),g(u),g(o),g(c),g(d),g(m),g(N),g(R),g(j),g(S),g(C),g(D),g(B),g(F),g(y),g(I),g(V),g(L)),Y.d(x)}}}function Cg(n){let r,e=ke(n[23].def_tech.value)+"",t,i;return{c(){r=q("class "),t=q(e),i=q(" DefensiveTechniqueNode;")},l(s){r=M(s,"class "),t=M(s,e),i=M(s," DefensiveTechniqueNode;")},m(s,a){A(s,r,a),A(s,t,a),A(s,i,a)},p(s,a){a&2&&e!==(e=ke(s[23].def_tech.value)+"")&&de(t,e)},d(s){s&&(g(r),g(t),g(i))}}}function Ng(n){let r,e=ke(n[23].def_tech.value)+"",t,i;return{c(){r=q("class "),t=q(e),i=q(" SelectedDefensiveTechniqueNode;")},l(s){r=M(s,"class "),t=M(s,e),i=M(s," SelectedDefensiveTechniqueNode;")},m(s,a){A(s,r,a),A(s,t,a),A(s,i,a)},p(s,a){a&2&&e!==(e=ke(s[23].def_tech.value)+"")&&de(t,e)},d(s){s&&(g(r),g(t),g(i))}}}function ju(n){let r=n[3].edge_is_unique(n[23].def_tech_label.value,n[23].def_artifact_rel_label.value,n[23].def_artifact_label.value),e,t=r&&qu(n);return{c(){t&&t.c(),e=Oe()},l(i){t&&t.l(i),e=Oe()},m(i,s){t&&t.m(i,s),A(i,e,s)},p(i,s){s&10&&(r=i[3].edge_is_unique(i[23].def_tech_label.value,i[23].def_artifact_rel_label.value,i[23].def_artifact_label.value)),r?t?t.p(i,s):(t=qu(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&g(e),t&&t.d(i)}}}function Sg(n){let r,e,t=Ve(n[1].da_to_def.results.bindings),i=[];for(let s=0;s<t.length;s+=1)i[s]=ju(Lu(n,t,s));return{c(){r=q(`graph LR;
          `);for(let s=0;s<i.length;s+=1)i[s].c();e=Oe()},l(s){r=M(s,`graph LR;
          `);for(let a=0;a<i.length;a+=1)i[a].l(s);e=Oe()},m(s,a){A(s,r,a);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);A(s,e,a)},p(s,a){if(a&90){t=Ve(s[1].da_to_def.results.bindings);let l;for(l=0;l<t.length;l+=1){const u=Lu(s,t,l);i[l]?i[l].p(u,a):(i[l]=ju(u),i[l].c(),i[l].m(e.parentNode,e))}for(;l<i.length;l+=1)i[l].d(1);i.length=t.length}},d(s){s&&(g(r),g(e)),Tt(i,s)}}}function Pu(n){let r,e;return r=new xr({props:{$$slots:{default:[Sg]},$$scope:{ctx:n}}}),{c(){me(r.$$.fragment)},l(t){ve(r.$$.fragment,t)},m(t,i){be(r,t,i),e=!0},p(t,i){const s={};i&262234&&(s.$$scope={dirty:i,ctx:t}),r.$set(s)},i(t){e||(ue(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){we(r,t)}}}function Rg(n){let r,e,t,i,s,a,l,u,o,f,c,d,_,m=n[6].length+"",N,w,R,j,T;const S=n[12].header,v=pt(S,n,n[18],Bu),C=n[12].default,D=pt(C,n,n[18],null),P=[Tg,Ag,Eg],B=[];function F(b,y){return b[1]?b[1].da_to_def.results.bindings.length>0?1:2:0}return l=F(n),u=B[l]=P[l](n),{c(){r=te("dialog"),e=te("div"),v&&v.c(),t=q(`
    Select Countermeasure Techniques
    `),D&&D.c(),i=ae(),s=te("hr"),a=ae(),u.c(),o=ae(),f=te("hr"),c=ae(),d=te("button"),_=q("Insert ("),N=q(m),w=q(")"),this.h()},l(b){r=re(b,"DIALOG",{class:!0});var y=ye(r);e=re(y,"DIV",{class:!0});var I=ye(e);v&&v.l(I),t=M(I,`
    Select Countermeasure Techniques
    `),D&&D.l(I),i=se(I),s=re(I,"HR",{}),a=se(I),u.l(I),o=se(I),f=re(I,"HR",{}),c=se(I),d=re(I,"BUTTON",{class:!0});var k=ye(d);_=M(k,"Insert ("),N=M(k,m),w=M(k,")"),k.forEach(g),I.forEach(g),y.forEach(g),this.h()},h(){d.autofocus=!0,oe(d,"class","svelte-1yq7x1p"),oe(e,"class","svelte-1yq7x1p"),oe(r,"class","svelte-1yq7x1p")},m(b,y){A(b,r,y),z(r,e),v&&v.m(e,null),z(e,t),D&&D.m(e,null),z(e,i),z(e,s),z(e,a),B[l].m(e,null),z(e,o),z(e,f),z(e,c),z(e,d),z(d,_),z(d,N),z(d,w),n[15](r),R=!0,d.focus(),j||(T=[Ae(d,"click",n[9]),Ae(e,"click",Ot(n[13])),Ae(r,"close",n[16]),Ae(r,"click",Ur(n[17]))],j=!0)},p(b,[y]){v&&v.p&&(!R||y&262144)&&gt(v,S,b,b[18],R?vt(S,b[18],y,kg):mt(b[18]),Bu),D&&D.p&&(!R||y&262144)&&gt(D,C,b,b[18],R?vt(C,b[18],y,null):mt(b[18]),null);let I=l;l=F(b),l===I?B[l].p(b,y):(kt(),fe(B[I],1,1,()=>{B[I]=null}),Et(),u=B[l],u?u.p(b,y):(u=B[l]=P[l](b),u.c()),ue(u,1),u.m(e,o)),(!R||y&64)&&m!==(m=b[6].length+"")&&de(N,m)},i(b){R||(ue(v,b),ue(D,b),ue(u),R=!0)},o(b){fe(v,b),fe(D,b),fe(u),R=!1},d(b){b&&g(r),v&&v.d(b),D&&D.d(b),B[l].d(),n[15](null),j=!1,bt(T)}}}function Ig(n,r,e){let t,i,s,{$$slots:a={},$$scope:l}=r,{show_defend_modal:u}=r,{parent_node:o}=r,{data:f}=r,c;const d=Dr();nt(n,d,F=>e(20,s=F));const _=Or();nt(n,_,F=>e(19,i=F));let m=new Nn;function N(F){t.includes(F)?e(6,t=t.filter(b=>b!==F)):t.push(F),e(6,t)}window.da_to_def_callback=function(F){N(F)};function w(){let F=0,b=200,y=100;for(const I of t){let k=f.da_to_def.results.bindings.find(V=>ke(V.def_tech.value)==I);k&&(Wr(d,_,o,"countermeasureSelectorNode",k.def_tech_label.value,"d3f:"+ke(k.def_tech.value),o.data.sequence,o.position.x+F*b,o.position.y-y,182,63,k.def_artifact_rel_label.value,"defenseBottomSource","defenseRightTarget",!1),F+=1)}d.set(s),_.set(i),c&&c.close(),e(6,t=[])}let R=new Set,j=[],T=[];ef(j,T)&&(T=[]);function S(F){for(const b of t){let y=f.da_to_def.results.bindings.find(I=>ke(I.def_tech.value)==b);F.includes(y.def_tactic_label.value)&&e(6,t=t.filter(I=>I!==b))}e(6,t)}function v(F){ur.call(this,n,F)}function C(F){T=F,e(4,T)}function D(F){_t[F?"unshift":"push"](()=>{c=F,e(2,c)})}const P=()=>e(0,u=!1),B=()=>{c.close(),e(6,t=[])};return n.$$set=F=>{"show_defend_modal"in F&&e(0,u=F.show_defend_modal),"parent_node"in F&&e(10,o=F.parent_node),"data"in F&&e(1,f=F.data),"$$scope"in F&&e(18,l=F.$$scope)},n.$$.update=()=>{n.$$.dirty&5&&u&&c&&(c.showModal(),e(3,m=new Nn)),n.$$.dirty&2050&&f&&(f.da_to_def.results.bindings.forEach(F=>{R.add(F.def_tactic_label.value)}),e(11,R),e(1,f)),n.$$.dirty&2048&&e(5,j=Array.from(R).sort(function(F,b){return Yi[F]-Yi[b]})),n.$$.dirty&16&&S(T),n.$$.dirty&24&&m.reset(T)},e(6,t=[]),[u,f,c,m,T,j,t,d,_,w,o,R,a,v,C,D,P,B,l]}class Fg extends Je{constructor(r){super(),Ze(this,r,Ig,Rg,Ye,{show_defend_modal:0,parent_node:10,data:1})}}function Uu(n,r,e){const t=n.slice();return t[27]=r[e],t}function xu(n,r,e){const t=n.slice();return t[30]=r[e],t}function $u(n,r,e){const t=n.slice();return t[33]=r[e],t}function Vu(n,r,e){const t=n.slice();return t[27]=r[e],t}function Hu(n,r,e){const t=n.slice();return t[30]=r[e],t}const Og=n=>({}),zu=n=>({});function Lg(n){let r;return{c(){r=q("No related weaknesses in this release")},l(e){r=M(e,"No related weaknesses in this release")},m(e,t){A(e,r,t)},p:Le,i:Le,o:Le,d(e){e&&g(r)}}}function Bg(n){let r,e;return r=new xr({props:{$$slots:{default:[Mg]},$$scope:{ctx:n}}}),{c(){me(r.$$.fragment)},l(t){ve(r.$$.fragment,t)},m(t,i){be(r,t,i),e=!0},p(t,i){const s={};i[0]&8389054&&(s.$$scope={dirty:i,ctx:t}),r.$set(s)},i(t){e||(ue(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){we(r,t)}}}function qg(n){let r,e="Loading...";return{c(){r=te("div"),r.textContent=e},l(t){r=re(t,"DIV",{"data-svelte-h":!0}),Ue(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,i){A(t,r,i)},p:Le,i:Le,o:Le,d(t){t&&g(r)}}}function Xu(n){let r,e=Ve(n[33]["d3f:outbound"]),t=[];for(let i=0;i<e.length;i+=1)t[i]=Qu(Vu(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Oe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Oe()},m(i,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(i,s);A(i,r,s)},p(i,s){if(s[0]&430){e=Ve(i[33]["d3f:outbound"]);let a;for(a=0;a<e.length;a+=1){const l=Vu(i,e,a);t[a]?t[a].p(l,s):(t[a]=Qu(l),t[a].c(),t[a].m(r.parentNode,r))}for(;a<t.length;a+=1)t[a].d(1);t.length=e.length}},d(i){i&&g(r),Tt(t,i)}}}function Gu(n){let r,e=n[33]["@id"]+"",t,i;return{c(){r=q("class "),t=q(e),i=q(" selected_inbound_node;")},l(s){r=M(s,"class "),t=M(s,e),i=M(s," selected_inbound_node;")},m(s,a){A(s,r,a),A(s,t,a),A(s,i,a)},p(s,a){a[0]&160&&e!==(e=s[33]["@id"]+"")&&de(t,e)},d(s){s&&(g(r),g(t),g(i))}}}function Wu(n){let r=n[33]["@id"]+"",e,t,i=n[33]["rdfs:label"][0]+"",s,a,l="-->",u,o,f=ke(n[27]["@id"])+"",c,d,_=n[30]["@id"]+"",m,N,w=n[7].i(n[30]["@id"])["rdfs:label"][0]+"",R,j,T=n[33]["@id"]+"",S,v,C=n[33]["@id"]+"",D,P,B,F,b=n[8].includes(n[33]["@id"]),y,I=n[30]["@id"]+"",k,V,L=n[30]["@id"]+"",H,le,Y,x,U=n[33]["@id"]+"",Q,X,ee=n[33]["@id"]+"",Ce,Se,he=n[30]["@id"]+"",pe,ie,De=n[3](n[30])+"",Pe,et,Be=b&&Gu(n);return{c(){e=q(r),t=q('["'),s=q(i),a=q('"] '),u=q(l),o=q(" | "),c=q(f),d=q(" | "),m=q(_),N=q('["'),R=q(w),j=q(`"];
                class `),S=q(T),v=q(" inbound_node; style "),D=q(C),P=q(" fill:"),B=q(n[1]),F=q(`;
                `),Be&&Be.c(),y=q(`
                class `),k=q(I),V=q(" RootArtifactNode; style "),H=q(L),le=q(" fill:"),Y=q(n[2]),x=q(`;
                click `),Q=q(U),X=q(` href "javascript:da_to_weak_callback('`),Ce=q(ee),Se=q(`')"; click `),pe=q(he),ie=q(' href "'),Pe=q(De),et=q('";')},l(Z){e=M(Z,r),t=M(Z,'["'),s=M(Z,i),a=M(Z,'"] '),u=M(Z,l),o=M(Z," | "),c=M(Z,f),d=M(Z," | "),m=M(Z,_),N=M(Z,'["'),R=M(Z,w),j=M(Z,`"];
                class `),S=M(Z,T),v=M(Z," inbound_node; style "),D=M(Z,C),P=M(Z," fill:"),B=M(Z,n[1]),F=M(Z,`;
                `),Be&&Be.l(Z),y=M(Z,`
                class `),k=M(Z,I),V=M(Z," RootArtifactNode; style "),H=M(Z,L),le=M(Z," fill:"),Y=M(Z,n[2]),x=M(Z,`;
                click `),Q=M(Z,U),X=M(Z,` href "javascript:da_to_weak_callback('`),Ce=M(Z,ee),Se=M(Z,`')"; click `),pe=M(Z,he),ie=M(Z,' href "'),Pe=M(Z,De),et=M(Z,'";')},m(Z,_e){A(Z,e,_e),A(Z,t,_e),A(Z,s,_e),A(Z,a,_e),A(Z,u,_e),A(Z,o,_e),A(Z,c,_e),A(Z,d,_e),A(Z,m,_e),A(Z,N,_e),A(Z,R,_e),A(Z,j,_e),A(Z,S,_e),A(Z,v,_e),A(Z,D,_e),A(Z,P,_e),A(Z,B,_e),A(Z,F,_e),Be&&Be.m(Z,_e),A(Z,y,_e),A(Z,k,_e),A(Z,V,_e),A(Z,H,_e),A(Z,le,_e),A(Z,Y,_e),A(Z,x,_e),A(Z,Q,_e),A(Z,X,_e),A(Z,Ce,_e),A(Z,Se,_e),A(Z,pe,_e),A(Z,ie,_e),A(Z,Pe,_e),A(Z,et,_e)},p(Z,_e){_e[0]&160&&r!==(r=Z[33]["@id"]+"")&&de(e,r),_e[0]&160&&i!==(i=Z[33]["rdfs:label"][0]+"")&&de(s,i),_e[0]&160&&f!==(f=ke(Z[27]["@id"])+"")&&de(c,f),_e[0]&160&&_!==(_=Z[30]["@id"]+"")&&de(m,_),_e[0]&160&&w!==(w=Z[7].i(Z[30]["@id"])["rdfs:label"][0]+"")&&de(R,w),_e[0]&160&&T!==(T=Z[33]["@id"]+"")&&de(S,T),_e[0]&160&&C!==(C=Z[33]["@id"]+"")&&de(D,C),_e[0]&2&&de(B,Z[1]),_e[0]&416&&(b=Z[8].includes(Z[33]["@id"])),b?Be?Be.p(Z,_e):(Be=Gu(Z),Be.c(),Be.m(y.parentNode,y)):Be&&(Be.d(1),Be=null),_e[0]&160&&I!==(I=Z[30]["@id"]+"")&&de(k,I),_e[0]&160&&L!==(L=Z[30]["@id"]+"")&&de(H,L),_e[0]&4&&de(Y,Z[2]),_e[0]&160&&U!==(U=Z[33]["@id"]+"")&&de(Q,U),_e[0]&160&&ee!==(ee=Z[33]["@id"]+"")&&de(Ce,ee),_e[0]&160&&he!==(he=Z[30]["@id"]+"")&&de(pe,he),_e[0]&168&&De!==(De=Z[3](Z[30])+"")&&de(Pe,De)},d(Z){Z&&(g(e),g(t),g(s),g(a),g(u),g(o),g(c),g(d),g(m),g(N),g(R),g(j),g(S),g(v),g(D),g(P),g(B),g(F),g(y),g(k),g(V),g(H),g(le),g(Y),g(x),g(Q),g(X),g(Ce),g(Se),g(pe),g(ie),g(Pe),g(et)),Be&&Be.d(Z)}}}function Qu(n){let r,e=Ve(n[33][n[27]["@id"]]),t=[];for(let i=0;i<e.length;i+=1)t[i]=Wu(Hu(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Oe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Oe()},m(i,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(i,s);A(i,r,s)},p(i,s){if(s[0]&430){e=Ve(i[33][i[27]["@id"]]);let a;for(a=0;a<e.length;a+=1){const l=Hu(i,e,a);t[a]?t[a].p(l,s):(t[a]=Wu(l),t[a].c(),t[a].m(r.parentNode,r))}for(;a<t.length;a+=1)t[a].d(1);t.length=e.length}},d(i){i&&g(r),Tt(t,i)}}}function Yu(n){let r,e=n[33]["d3f:outbound"]&&Xu(n);return{c(){e&&e.c(),r=Oe()},l(t){e&&e.l(t),r=Oe()},m(t,i){e&&e.m(t,i),A(t,r,i)},p(t,i){t[33]["d3f:outbound"]?e?e.p(t,i):(e=Xu(t),e.c(),e.m(r.parentNode,r)):e&&(e.d(1),e=null)},d(t){t&&g(r),e&&e.d(t)}}}function Ju(n){let r,e=Ve(n[7].i(n[5].description["@id"])["d3f:outbound"]),t=[];for(let i=0;i<e.length;i+=1)t[i]=Ku(Uu(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Oe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Oe()},m(i,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(i,s);A(i,r,s)},p(i,s){if(s[0]&184){e=Ve(i[7].i(i[5].description["@id"])["d3f:outbound"]);let a;for(a=0;a<e.length;a+=1){const l=Uu(i,e,a);t[a]?t[a].p(l,s):(t[a]=Ku(l),t[a].c(),t[a].m(r.parentNode,r))}for(;a<t.length;a+=1)t[a].d(1);t.length=e.length}},d(i){i&&g(r),Tt(t,i)}}}function Zu(n){let r=n[5].description["@id"]+"",e,t,i=n[7].i(n[5].description["@id"])["rdfs:label"][0]+"",s,a,l="-->",u,o,f=ke(n[27]["@id"])+"",c,d,_=n[30]["@id"]+"",m,N,w=n[7].graph[n[7].index[n[30]["@id"]]]["rdfs:label"][0]+"",R,j,T=n[5].description["@id"]+"",S,v,C=n[30]["@id"]+"",D,P,B=n[5].description["@id"]+"",F,b,y=n[3](n[5].description["@id"])+"",I,k,V=n[30]["@id"]+"",L,H,le=n[4](n[30])+"",Y,x;return{c(){e=q(r),t=q('["'),s=q(i),a=q('"] '),u=q(l),o=q(" | "),c=q(f),d=q(" | "),m=q(_),N=q('["'),R=q(w),j=q('"]; class '),S=q(T),v=q(" RootArtifactNode; class "),D=q(C),P=q(` ArtifactNode;
              click `),F=q(B),b=q(' href "'),I=q(y),k=q('"; click '),L=q(V),H=q(' href "'),Y=q(le),x=q('";')},l(U){e=M(U,r),t=M(U,'["'),s=M(U,i),a=M(U,'"] '),u=M(U,l),o=M(U," | "),c=M(U,f),d=M(U," | "),m=M(U,_),N=M(U,'["'),R=M(U,w),j=M(U,'"]; class '),S=M(U,T),v=M(U," RootArtifactNode; class "),D=M(U,C),P=M(U,` ArtifactNode;
              click `),F=M(U,B),b=M(U,' href "'),I=M(U,y),k=M(U,'"; click '),L=M(U,V),H=M(U,' href "'),Y=M(U,le),x=M(U,'";')},m(U,Q){A(U,e,Q),A(U,t,Q),A(U,s,Q),A(U,a,Q),A(U,u,Q),A(U,o,Q),A(U,c,Q),A(U,d,Q),A(U,m,Q),A(U,N,Q),A(U,R,Q),A(U,j,Q),A(U,S,Q),A(U,v,Q),A(U,D,Q),A(U,P,Q),A(U,F,Q),A(U,b,Q),A(U,I,Q),A(U,k,Q),A(U,L,Q),A(U,H,Q),A(U,Y,Q),A(U,x,Q)},p(U,Q){Q[0]&32&&r!==(r=U[5].description["@id"]+"")&&de(e,r),Q[0]&160&&i!==(i=U[7].i(U[5].description["@id"])["rdfs:label"][0]+"")&&de(s,i),Q[0]&160&&f!==(f=ke(U[27]["@id"])+"")&&de(c,f),Q[0]&160&&_!==(_=U[30]["@id"]+"")&&de(m,_),Q[0]&160&&w!==(w=U[7].graph[U[7].index[U[30]["@id"]]]["rdfs:label"][0]+"")&&de(R,w),Q[0]&32&&T!==(T=U[5].description["@id"]+"")&&de(S,T),Q[0]&160&&C!==(C=U[30]["@id"]+"")&&de(D,C),Q[0]&32&&B!==(B=U[5].description["@id"]+"")&&de(F,B),Q[0]&40&&y!==(y=U[3](U[5].description["@id"])+"")&&de(I,y),Q[0]&160&&V!==(V=U[30]["@id"]+"")&&de(L,V),Q[0]&176&&le!==(le=U[4](U[30])+"")&&de(Y,le)},d(U){U&&(g(e),g(t),g(s),g(a),g(u),g(o),g(c),g(d),g(m),g(N),g(R),g(j),g(S),g(v),g(D),g(P),g(F),g(b),g(I),g(k),g(L),g(H),g(Y),g(x))}}}function Ku(n){let r,e=Ve(n[7].i(n[5].description["@id"])[n[27]["@id"]]),t=[];for(let i=0;i<e.length;i+=1)t[i]=Zu(xu(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Oe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Oe()},m(i,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(i,s);A(i,r,s)},p(i,s){if(s[0]&184){e=Ve(i[7].i(i[5].description["@id"])[i[27]["@id"]]);let a;for(a=0;a<e.length;a+=1){const l=xu(i,e,a);t[a]?t[a].p(l,s):(t[a]=Zu(l),t[a].c(),t[a].m(r.parentNode,r))}for(;a<t.length;a+=1)t[a].d(1);t.length=e.length}},d(i){i&&g(r),Tt(t,i)}}}function Mg(n){let r,e,t=n[7].i(n[5].description["@id"])&&n[7].i(n[5].description["@id"])["d3f:outbound"],i,s=Ve(n[7].graph.filter(n[19])),a=[];for(let u=0;u<s.length;u+=1)a[u]=Yu($u(n,s,u));let l=t&&Ju(n);return{c(){r=q(`graph LR;
        `);for(let u=0;u<a.length;u+=1)a[u].c();e=ae(),l&&l.c(),i=Oe()},l(u){r=M(u,`graph LR;
        `);for(let o=0;o<a.length;o+=1)a[o].l(u);e=se(u),l&&l.l(u),i=Oe()},m(u,o){A(u,r,o);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(u,o);A(u,e,o),l&&l.m(u,o),A(u,i,o)},p(u,o){if(o[0]&430){s=Ve(u[7].graph.filter(u[19]));let f;for(f=0;f<s.length;f+=1){const c=$u(u,s,f);a[f]?a[f].p(c,o):(a[f]=Yu(c),a[f].c(),a[f].m(e.parentNode,e))}for(;f<a.length;f+=1)a[f].d(1);a.length=s.length}o[0]&160&&(t=u[7].i(u[5].description["@id"])&&u[7].i(u[5].description["@id"])["d3f:outbound"]),t?l?l.p(u,o):(l=Ju(u),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null)},d(u){u&&(g(r),g(e),g(i)),Tt(a,u),l&&l.d(u)}}}function jg(n){let r,e,t,i,s,a,l,u,o,f,c,d,_,m=n[8].length+"",N,w,R,j,T;const S=n[17].header,v=pt(S,n,n[23],zu),C=n[17].default,D=pt(C,n,n[23],null),P=[qg,Bg,Lg],B=[];function F(b,y){return b[5]?b[7].graph.length>0?1:2:0}return l=F(n),u=B[l]=P[l](n),{c(){r=te("dialog"),e=te("div"),v&&v.c(),t=q(`
    Select Weaknesses
    `),D&&D.c(),i=ae(),s=te("hr"),a=ae(),u.c(),o=ae(),f=te("hr"),c=ae(),d=te("button"),_=q("Insert ("),N=q(m),w=q(")"),this.h()},l(b){r=re(b,"DIALOG",{class:!0});var y=ye(r);e=re(y,"DIV",{class:!0});var I=ye(e);v&&v.l(I),t=M(I,`
    Select Weaknesses
    `),D&&D.l(I),i=se(I),s=re(I,"HR",{}),a=se(I),u.l(I),o=se(I),f=re(I,"HR",{}),c=se(I),d=re(I,"BUTTON",{class:!0});var k=ye(d);_=M(k,"Insert ("),N=M(k,m),w=M(k,")"),k.forEach(g),I.forEach(g),y.forEach(g),this.h()},h(){d.autofocus=!0,oe(d,"class","svelte-1resfch"),oe(e,"class","svelte-1resfch"),oe(r,"class","svelte-1resfch")},m(b,y){A(b,r,y),z(r,e),v&&v.m(e,null),z(e,t),D&&D.m(e,null),z(e,i),z(e,s),z(e,a),B[l].m(e,null),z(e,o),z(e,f),z(e,c),z(e,d),z(d,_),z(d,N),z(d,w),n[20](r),R=!0,d.focus(),j||(T=[Ae(d,"click",n[11]),Ae(e,"click",Ot(n[18])),Ae(r,"close",n[21]),Ae(r,"click",Ur(n[22]))],j=!0)},p(b,y){v&&v.p&&(!R||y[0]&8388608)&&gt(v,S,b,b[23],R?vt(S,b[23],y,Og):mt(b[23]),zu),D&&D.p&&(!R||y[0]&8388608)&&gt(D,C,b,b[23],R?vt(C,b[23],y,null):mt(b[23]),null);let I=l;l=F(b),l===I?B[l].p(b,y):(kt(),fe(B[I],1,1,()=>{B[I]=null}),Et(),u=B[l],u?u.p(b,y):(u=B[l]=P[l](b),u.c()),ue(u,1),u.m(e,o)),(!R||y[0]&256)&&m!==(m=b[8].length+"")&&de(N,m)},i(b){R||(ue(v,b),ue(D,b),ue(u),R=!0)},o(b){fe(v,b),fe(D,b),fe(u),R=!1},d(b){b&&g(r),v&&v.d(b),D&&D.d(b),B[l].d(),n[20](null),j=!1,bt(T)}}}function Pg(n,r,e){let t,i,s,{$$slots:a={},$$scope:l}=r,{empty_message:u="has no direct neighbors in this release."}=r,{outbound_color:o="#fff4dd"}=r,{inbound_color:f="#fff4dd"}=r,{root_color:c="#fff4dd"}=r,{link_function:d=k=>`/dao/artifact/${k["@id"]}`}=r,{inbound_link_function:_=d}=r,{root_link_function:m=k=>`/dao/artifact/${k["@id"]}`}=r,{outbound_link_function:N=d}=r,{show_weakness_modal:w}=r,{parent_node:R}=r,{data:j}=r,T;const S=Dr();nt(n,S,k=>e(25,s=k));const v=Or();nt(n,v,k=>e(24,i=k));let C;function D(k){t.includes(k)?e(8,t=t.filter(V=>V!==k)):t.push(k),e(8,t),e(8,t)}window.da_to_weak_callback=function(k){D(k)};function P(){let k=0,V=200,L=100;for(const H of t){let le=j.da_to_weak["@graph"].find(Y=>Y["@id"]==H);le&&(Wr(S,v,R,"vulnerabilitySelectorNode",le["rdfs:label"],le["d3f:cwe-id"],R.data.sequence,R.position.x+k*V,R.position.y+L,182,63,le["d3f:outbound"][0]["@id"].replace("d3f:",""),"vulnerabilityRightSource","vulnerabilityLeftTarget",!1),k+=1)}S.set(s),v.set(i),T&&T.close(),e(8,t=[])}function B(k){ur.call(this,n,k)}const F=k=>k["@id"]!=j.description["@id"];function b(k){_t[k?"unshift":"push"](()=>{T=k,e(6,T)})}const y=()=>e(0,w=!1),I=()=>{T.close(),e(8,t=[])};return n.$$set=k=>{"empty_message"in k&&e(12,u=k.empty_message),"outbound_color"in k&&e(13,o=k.outbound_color),"inbound_color"in k&&e(1,f=k.inbound_color),"root_color"in k&&e(2,c=k.root_color),"link_function"in k&&e(14,d=k.link_function),"inbound_link_function"in k&&e(15,_=k.inbound_link_function),"root_link_function"in k&&e(3,m=k.root_link_function),"outbound_link_function"in k&&e(4,N=k.outbound_link_function),"show_weakness_modal"in k&&e(0,w=k.show_weakness_modal),"parent_node"in k&&e(16,R=k.parent_node),"data"in k&&e(5,j=k.data),"$$scope"in k&&e(23,l=k.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&65&&w&&T&&T.showModal(),n.$$.dirty[0]&32&&j&&e(7,C=new tf(j.da_to_weak,{index:!0}))},e(8,t=[]),[w,f,c,m,N,j,T,C,t,S,v,P,u,o,d,_,R,a,B,F,b,y,I,l]}class Ug extends Je{constructor(r){super(),Ze(this,r,Pg,jg,Ye,{empty_message:12,outbound_color:13,inbound_color:1,root_color:2,link_function:14,inbound_link_function:15,root_link_function:3,outbound_link_function:4,show_weakness_modal:0,parent_node:16,data:5},null,[-1,-1])}}function eo(n,r,e){const t=n.slice();return t[30]=r[e],t}function to(n,r,e){const t=n.slice();return t[33]=r[e],t}function ro(n,r,e){const t=n.slice();return t[36]=r[e],t}const xg=n=>({}),no=n=>({});function $g(n){let r;return{c(){r=q("No related parts/control in this release")},l(e){r=M(e,"No related parts/control in this release")},m(e,t){A(e,r,t)},p:Le,i:Le,o:Le,d(e){e&&g(r)}}}function Vg(n){let r,e;return r=new xr({props:{$$slots:{default:[zg]},$$scope:{ctx:n}}}),{c(){me(r.$$.fragment)},l(t){ve(r.$$.fragment,t)},m(t,i){be(r,t,i),e=!0},p(t,i){const s={};i[0]&67109694&&(s.$$scope={dirty:i,ctx:t}),r.$set(s)},i(t){e||(ue(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){we(r,t)}}}function Hg(n){let r,e="Loading...";return{c(){r=te("div"),r.textContent=e},l(t){r=re(t,"DIV",{"data-svelte-h":!0}),Ue(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,i){A(t,r,i)},p:Le,i:Le,o:Le,d(t){t&&g(r)}}}function io(n){let r,e=Ve(n[30]["d3f:outbound"].filter(n[22])),t=[];for(let i=0;i<e.length;i+=1)t[i]=lo(to(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Oe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Oe()},m(i,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(i,s);A(i,r,s)},p(i,s){if(s[0]&830){e=Ve(i[30]["d3f:outbound"].filter(i[22]));let a;for(a=0;a<e.length;a+=1){const l=to(i,e,a);t[a]?t[a].p(l,s):(t[a]=lo(l),t[a].c(),t[a].m(r.parentNode,r))}for(;a<t.length;a+=1)t[a].d(1);t.length=e.length}},d(i){i&&g(r),Tt(t,i)}}}function ao(n){let r,e=n[36]["@id"]+"",t,i;return{c(){r=q("class "),t=q(e),i=q(" selected_outbound_node;")},l(s){r=M(s,"class "),t=M(s,e),i=M(s," selected_outbound_node;")},m(s,a){A(s,r,a),A(s,t,a),A(s,i,a)},p(s,a){a[0]&304&&e!==(e=s[36]["@id"]+"")&&de(t,e)},d(s){s&&(g(r),g(t),g(i))}}}function so(n){let r=n[30]["@id"]+"",e,t,i=n[30]["rdfs:label"][0]+"",s,a,l="-->",u,o,f=ke(n[33]["@id"])+"",c,d,_=n[36]["@id"]+"",m,N,w=n[8].i(n[36]["@id"])["rdfs:label"][0]+"",R,j,T=n[36]["@id"]+"",S,v,C=n[30]["@id"]+"",D,P,B,F,b=n[9].includes(n[36]["@id"]),y,I=n[30]["@id"]+"",k,V,L=n[36]["@id"]+"",H,le,Y,x,U=n[36]["@id"]+"",Q,X,ee=n[36]["@id"]+"",Ce,Se,he=n[30]["@id"]+"",pe,ie,De=n[3](n[30])+"",Pe,et,Be=b&&ao(n);return{c(){e=q(r),t=q('["'),s=q(i),a=q('"] '),u=q(l),o=q(" | "),c=q(f),d=q(" | "),m=q(_),N=q('["'),R=q(w),j=q(`"];
                class `),S=q(T),v=q(" outbound; style "),D=q(C),P=q(" fill:"),B=q(n[1]),F=q(`;
                `),Be&&Be.c(),y=q(`
                class `),k=q(I),V=q(" RootArtifactNode; style "),H=q(L),le=q(" fill:"),Y=q(n[2]),x=q(`;
                click `),Q=q(U),X=q(` href "javascript:da_to_neighbors_callback('`),Ce=q(ee),Se=q(`')"; click `),pe=q(he),ie=q(' href "'),Pe=q(De),et=q('";')},l(Z){e=M(Z,r),t=M(Z,'["'),s=M(Z,i),a=M(Z,'"] '),u=M(Z,l),o=M(Z," | "),c=M(Z,f),d=M(Z," | "),m=M(Z,_),N=M(Z,'["'),R=M(Z,w),j=M(Z,`"];
                class `),S=M(Z,T),v=M(Z," outbound; style "),D=M(Z,C),P=M(Z," fill:"),B=M(Z,n[1]),F=M(Z,`;
                `),Be&&Be.l(Z),y=M(Z,`
                class `),k=M(Z,I),V=M(Z," RootArtifactNode; style "),H=M(Z,L),le=M(Z," fill:"),Y=M(Z,n[2]),x=M(Z,`;
                click `),Q=M(Z,U),X=M(Z,` href "javascript:da_to_neighbors_callback('`),Ce=M(Z,ee),Se=M(Z,`')"; click `),pe=M(Z,he),ie=M(Z,' href "'),Pe=M(Z,De),et=M(Z,'";')},m(Z,_e){A(Z,e,_e),A(Z,t,_e),A(Z,s,_e),A(Z,a,_e),A(Z,u,_e),A(Z,o,_e),A(Z,c,_e),A(Z,d,_e),A(Z,m,_e),A(Z,N,_e),A(Z,R,_e),A(Z,j,_e),A(Z,S,_e),A(Z,v,_e),A(Z,D,_e),A(Z,P,_e),A(Z,B,_e),A(Z,F,_e),Be&&Be.m(Z,_e),A(Z,y,_e),A(Z,k,_e),A(Z,V,_e),A(Z,H,_e),A(Z,le,_e),A(Z,Y,_e),A(Z,x,_e),A(Z,Q,_e),A(Z,X,_e),A(Z,Ce,_e),A(Z,Se,_e),A(Z,pe,_e),A(Z,ie,_e),A(Z,Pe,_e),A(Z,et,_e)},p(Z,_e){_e[0]&288&&r!==(r=Z[30]["@id"]+"")&&de(e,r),_e[0]&288&&i!==(i=Z[30]["rdfs:label"][0]+"")&&de(s,i),_e[0]&304&&f!==(f=ke(Z[33]["@id"])+"")&&de(c,f),_e[0]&304&&_!==(_=Z[36]["@id"]+"")&&de(m,_),_e[0]&304&&w!==(w=Z[8].i(Z[36]["@id"])["rdfs:label"][0]+"")&&de(R,w),_e[0]&304&&T!==(T=Z[36]["@id"]+"")&&de(S,T),_e[0]&288&&C!==(C=Z[30]["@id"]+"")&&de(D,C),_e[0]&2&&de(B,Z[1]),_e[0]&816&&(b=Z[9].includes(Z[36]["@id"])),b?Be?Be.p(Z,_e):(Be=ao(Z),Be.c(),Be.m(y.parentNode,y)):Be&&(Be.d(1),Be=null),_e[0]&288&&I!==(I=Z[30]["@id"]+"")&&de(k,I),_e[0]&304&&L!==(L=Z[36]["@id"]+"")&&de(H,L),_e[0]&4&&de(Y,Z[2]),_e[0]&304&&U!==(U=Z[36]["@id"]+"")&&de(Q,U),_e[0]&304&&ee!==(ee=Z[36]["@id"]+"")&&de(Ce,ee),_e[0]&288&&he!==(he=Z[30]["@id"]+"")&&de(pe,he),_e[0]&296&&De!==(De=Z[3](Z[30])+"")&&de(Pe,De)},d(Z){Z&&(g(e),g(t),g(s),g(a),g(u),g(o),g(c),g(d),g(m),g(N),g(R),g(j),g(S),g(v),g(D),g(P),g(B),g(F),g(y),g(k),g(V),g(H),g(le),g(Y),g(x),g(Q),g(X),g(Ce),g(Se),g(pe),g(ie),g(Pe),g(et)),Be&&Be.d(Z)}}}function lo(n){let r,e=Ve(n[30][n[33]["@id"]]),t=[];for(let i=0;i<e.length;i+=1)t[i]=so(ro(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Oe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Oe()},m(i,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(i,s);A(i,r,s)},p(i,s){if(s[0]&830){e=Ve(i[30][i[33]["@id"]]);let a;for(a=0;a<e.length;a+=1){const l=ro(i,e,a);t[a]?t[a].p(l,s):(t[a]=so(l),t[a].c(),t[a].m(r.parentNode,r))}for(;a<t.length;a+=1)t[a].d(1);t.length=e.length}},d(i){i&&g(r),Tt(t,i)}}}function uo(n){let r,e=n[30]["d3f:outbound"]&&io(n);return{c(){e&&e.c(),r=Oe()},l(t){e&&e.l(t),r=Oe()},m(t,i){e&&e.m(t,i),A(t,r,i)},p(t,i){t[30]["d3f:outbound"]?e?e.p(t,i):(e=io(t),e.c(),e.m(r.parentNode,r)):e&&(e.d(1),e=null)},d(t){t&&g(r),e&&e.d(t)}}}function zg(n){let r,e,t=Ve(n[8].graph.filter(n[21])),i=[];for(let s=0;s<t.length;s+=1)i[s]=uo(eo(n,t,s));return{c(){r=q(`graph LR;
        `);for(let s=0;s<i.length;s+=1)i[s].c();e=Oe()},l(s){r=M(s,`graph LR;
        `);for(let a=0;a<i.length;a+=1)i[a].l(s);e=Oe()},m(s,a){A(s,r,a);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);A(s,e,a)},p(s,a){if(a[0]&830){t=Ve(s[8].graph.filter(s[21]));let l;for(l=0;l<t.length;l+=1){const u=eo(s,t,l);i[l]?i[l].p(u,a):(i[l]=uo(u),i[l].c(),i[l].m(e.parentNode,e))}for(;l<i.length;l+=1)i[l].d(1);i.length=t.length}},d(s){s&&(g(r),g(e)),Tt(i,s)}}}function Xg(n){let r,e,t,i,s,a,l,u,o,f,c,d,_,m=n[9].length+"",N,w,R,j,T;const S=n[19].header,v=pt(S,n,n[26],no),C=n[19].default,D=pt(C,n,n[26],null),P=[Hg,Vg,$g],B=[];function F(b,y){return b[5]?b[7]&&b[8].graph.length>0?1:2:0}return l=F(n),u=B[l]=P[l](n),{c(){r=te("dialog"),e=te("div"),v&&v.c(),t=q(`
    Select Parts/Control Neighbors
    `),D&&D.c(),i=ae(),s=te("hr"),a=ae(),u.c(),o=ae(),f=te("hr"),c=ae(),d=te("button"),_=q("Insert ("),N=q(m),w=q(")"),this.h()},l(b){r=re(b,"DIALOG",{class:!0});var y=ye(r);e=re(y,"DIV",{class:!0});var I=ye(e);v&&v.l(I),t=M(I,`
    Select Parts/Control Neighbors
    `),D&&D.l(I),i=se(I),s=re(I,"HR",{}),a=se(I),u.l(I),o=se(I),f=re(I,"HR",{}),c=se(I),d=re(I,"BUTTON",{class:!0});var k=ye(d);_=M(k,"Insert ("),N=M(k,m),w=M(k,")"),k.forEach(g),I.forEach(g),y.forEach(g),this.h()},h(){d.autofocus=!0,oe(d,"class","svelte-x2no78"),oe(e,"class","svelte-x2no78"),oe(r,"class","svelte-x2no78")},m(b,y){A(b,r,y),z(r,e),v&&v.m(e,null),z(e,t),D&&D.m(e,null),z(e,i),z(e,s),z(e,a),B[l].m(e,null),z(e,o),z(e,f),z(e,c),z(e,d),z(d,_),z(d,N),z(d,w),n[23](r),R=!0,d.focus(),j||(T=[Ae(d,"click",n[12]),Ae(e,"click",Ot(n[20])),Ae(r,"close",n[24]),Ae(r,"click",Ur(n[25]))],j=!0)},p(b,y){v&&v.p&&(!R||y[0]&67108864)&&gt(v,S,b,b[26],R?vt(S,b[26],y,xg):mt(b[26]),no),D&&D.p&&(!R||y[0]&67108864)&&gt(D,C,b,b[26],R?vt(C,b[26],y,null):mt(b[26]),null);let I=l;l=F(b),l===I?B[l].p(b,y):(kt(),fe(B[I],1,1,()=>{B[I]=null}),Et(),u=B[l],u?u.p(b,y):(u=B[l]=P[l](b),u.c()),ue(u,1),u.m(e,o)),(!R||y[0]&512)&&m!==(m=b[9].length+"")&&de(N,m)},i(b){R||(ue(v,b),ue(D,b),ue(u),R=!0)},o(b){fe(v,b),fe(D,b),fe(u),R=!1},d(b){b&&g(r),v&&v.d(b),D&&D.d(b),B[l].d(),n[23](null),j=!1,bt(T)}}}function Gg(n,r,e){let t,i,s,{$$slots:a={},$$scope:l}=r,{empty_message:u="has no direct neighbors in this release."}=r,{outbound_color:o="#fff4dd"}=r,{inbound_color:f="#fff4dd"}=r,{root_color:c="#fff4dd"}=r,{link_function:d=H=>`/dao/artifact/${H["@id"]}`}=r,{inbound_link_function:_=d}=r,{root_link_function:m=H=>`/dao/artifact/${H["@id"]}`}=r,{outbound_link_function:N=d}=r,{show_neighbors_modal:w}=r,{neighbor_filter_labels:R}=r,{parent_node:j}=r,{data:T}=r,S,v=!1;const C=Dr();nt(n,C,H=>e(28,s=H));const D=Or();nt(n,D,H=>e(27,i=H));let P;function B(H){t.includes(H)?e(9,t=t.filter(le=>le!==H)):t.push(H),e(9,t),e(9,t)}window.da_to_neighbors_callback=function(H){B(H)};function F(){let H=0,le=200,Y=100;for(const x of t){let U=T.neighbors["@graph"].find(ee=>ee["@id"]==x),Q="",X=T.neighbors["@graph"].find(ee=>ee["@id"]==j.data.techniqueId);for(const ee of X["d3f:outbound"])for(const Ce of X[ee["@id"]])Ce["@id"]==x&&(Q=ee["@id"].replace("d3f:",""));U&&(Wr(C,D,j,"artifactSelectorNode",U["rdfs:label"][0],U["@id"],j.data.sequence,j.position.x+H*le,j.position.y+Y,182,63,Q,"artBottomSource","artTopTarget",!1),H+=1)}C.set(s),D.set(i),S&&(S.close(),e(7,v=!1)),e(9,t=[])}function b(H){ur.call(this,n,H)}const y=H=>H["@id"]!=T.description["@id"],I=H=>R.includes(H["@id"]);function k(H){_t[H?"unshift":"push"](()=>{S=H,e(6,S)})}const V=()=>e(0,w=!1),L=()=>{S.close(),e(9,t=[])};return n.$$set=H=>{"empty_message"in H&&e(13,u=H.empty_message),"outbound_color"in H&&e(14,o=H.outbound_color),"inbound_color"in H&&e(1,f=H.inbound_color),"root_color"in H&&e(2,c=H.root_color),"link_function"in H&&e(15,d=H.link_function),"inbound_link_function"in H&&e(16,_=H.inbound_link_function),"root_link_function"in H&&e(3,m=H.root_link_function),"outbound_link_function"in H&&e(17,N=H.outbound_link_function),"show_neighbors_modal"in H&&e(0,w=H.show_neighbors_modal),"neighbor_filter_labels"in H&&e(4,R=H.neighbor_filter_labels),"parent_node"in H&&e(18,j=H.parent_node),"data"in H&&e(5,T=H.data),"$$scope"in H&&e(26,l=H.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&65&&w&&S&&S.showModal(),n.$$.dirty[0]&262192&&T){e(7,v=!1);let H=T.neighbors["@graph"].find(le=>le["@id"]==j.data.techniqueId);H&&R.some(le=>H["d3f:outbound"].some(Y=>Y["@id"]==le))&&(e(7,v=!0),e(8,P=new tf(T.neighbors,{index:!0})))}},e(9,t=[]),[w,f,c,m,R,T,S,v,P,t,C,D,F,u,o,d,_,N,j,a,b,y,I,k,V,L,l]}class Wg extends Je{constructor(r){super(),Ze(this,r,Gg,Xg,Ye,{empty_message:13,outbound_color:14,inbound_color:1,root_color:2,link_function:15,inbound_link_function:16,root_link_function:3,outbound_link_function:17,show_neighbors_modal:0,neighbor_filter_labels:4,parent_node:18,data:5},null,[-1,-1])}}function Qg(n){let r,e="attack the node",t,i,s,a,l,u="defend the node",o,f,c,d,_,m="weaknesses",N,w,R,j,T,S="explode parts",v,C,D="explode control",P,B,F,b,y,I;function k(Q){n[10](Q)}let V={parent_node:n[0],data:n[1]};n[6]!==void 0&&(V.show_attack_modal=n[6]),i=new Dg({props:V}),_t.push(()=>Xt(i,"show_attack_modal",k));function L(Q){n[12](Q)}let H={parent_node:n[0],data:n[1]};n[5]!==void 0&&(H.show_defend_modal=n[5]),f=new Fg({props:H}),_t.push(()=>Xt(f,"show_defend_modal",L));function le(Q){n[14](Q)}let Y={parent_node:n[0],empty_message:"has no related weaknesses in this release.",inbound_color:"#f9d999",inbound_link_function:n[8],data:n[1]};n[4]!==void 0&&(Y.show_weakness_modal=n[4]),w=new Ug({props:Y}),_t.push(()=>Xt(w,"show_weakness_modal",le));function x(Q){n[17](Q)}let U={neighbor_filter_labels:n[2],parent_node:n[0],empty_message:"has no related parts in this release.",inbound_color:"#f9d999",inbound_link_function:n[8],data:n[1]};return n[3]!==void 0&&(U.show_neighbors_modal=n[3]),B=new Wg({props:U}),_t.push(()=>Xt(B,"show_neighbors_modal",x)),{c(){r=te("button"),r.textContent=e,t=ae(),me(i.$$.fragment),a=ae(),l=te("button"),l.textContent=u,o=ae(),me(f.$$.fragment),d=ae(),_=te("button"),_.textContent=m,N=ae(),me(w.$$.fragment),j=ae(),T=te("button"),T.textContent=S,v=ae(),C=te("button"),C.textContent=D,P=ae(),me(B.$$.fragment),this.h()},l(Q){r=re(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(r)!=="svelte-1dkmztx"&&(r.textContent=e),t=se(Q),ve(i.$$.fragment,Q),a=se(Q),l=re(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(l)!=="svelte-22hxkb"&&(l.textContent=u),o=se(Q),ve(f.$$.fragment,Q),d=se(Q),_=re(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(_)!=="svelte-12lar74"&&(_.textContent=m),N=se(Q),ve(w.$$.fragment,Q),j=se(Q),T=re(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(T)!=="svelte-1hluius"&&(T.textContent=S),v=se(Q),C=re(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(C)!=="svelte-183zqvn"&&(C.textContent=D),P=se(Q),ve(B.$$.fragment,Q),this.h()},h(){oe(r,"class","svelte-5he3i1"),oe(l,"class","svelte-5he3i1"),oe(_,"class","svelte-5he3i1"),oe(T,"class","svelte-5he3i1"),oe(C,"class","svelte-5he3i1")},m(Q,X){A(Q,r,X),A(Q,t,X),be(i,Q,X),A(Q,a,X),A(Q,l,X),A(Q,o,X),be(f,Q,X),A(Q,d,X),A(Q,_,X),A(Q,N,X),be(w,Q,X),A(Q,j,X),A(Q,T,X),A(Q,v,X),A(Q,C,X),A(Q,P,X),be(B,Q,X),b=!0,y||(I=[Ae(r,"click",n[9]),Ae(l,"click",n[11]),Ae(_,"click",n[13]),Ae(T,"click",n[15]),Ae(C,"click",n[16])],y=!0)},p(Q,[X]){const ee={};X&1&&(ee.parent_node=Q[0]),X&2&&(ee.data=Q[1]),!s&&X&64&&(s=!0,ee.show_attack_modal=Q[6],zt(()=>s=!1)),i.$set(ee);const Ce={};X&1&&(Ce.parent_node=Q[0]),X&2&&(Ce.data=Q[1]),!c&&X&32&&(c=!0,Ce.show_defend_modal=Q[5],zt(()=>c=!1)),f.$set(Ce);const Se={};X&1&&(Se.parent_node=Q[0]),X&2&&(Se.data=Q[1]),!R&&X&16&&(R=!0,Se.show_weakness_modal=Q[4],zt(()=>R=!1)),w.$set(Se);const he={};X&4&&(he.neighbor_filter_labels=Q[2]),X&1&&(he.parent_node=Q[0]),X&2&&(he.data=Q[1]),!F&&X&8&&(F=!0,he.show_neighbors_modal=Q[3],zt(()=>F=!1)),B.$set(he)},i(Q){b||(ue(i.$$.fragment,Q),ue(f.$$.fragment,Q),ue(w.$$.fragment,Q),ue(B.$$.fragment,Q),b=!0)},o(Q){fe(i.$$.fragment,Q),fe(f.$$.fragment,Q),fe(w.$$.fragment,Q),fe(B.$$.fragment,Q),b=!1},d(Q){Q&&(g(r),g(t),g(a),g(l),g(o),g(d),g(_),g(N),g(j),g(T),g(v),g(C),g(P)),we(i,Q),we(f,Q),we(w,Q),we(B,Q),y=!1,bt(I)}}}function Yg(n,r,e){let t,i,s,a;var l=this&&this.__awaiter||function(C,D,P,B){function F(b){return b instanceof P?b:new P(function(y){y(b)})}return new(P||(P=Promise))(function(b,y){function I(L){try{V(B.next(L))}catch(H){y(H)}}function k(L){try{V(B.throw(L))}catch(H){y(H)}}function V(L){L.done?b(L.value):F(L.value).then(I,k)}V((B=B.apply(C,D||[])).next())})};let{node:u}=r,o,f=[];function c(C){return l(this,void 0,void 0,function*(){if(C.data.techniqueId){const D=C.data.techniqueId;return yield(yield fetch(`/api/dao/artifact/${D}.json`)).json()}else alert("Please specify a D3FEND Class for this node to enable inferential mapping"),e(6,t=!1),e(5,i=!1),e(4,s=!1),e(3,a=!1)})}function d(C){return Bh(C["d3f:cwe-id"][0])}const _=async()=>{e(1,o=null),e(6,t=!0),e(1,o=await c(u))};function m(C){t=C,e(6,t)}const N=async()=>{e(1,o=null),e(5,i=!0),e(1,o=await c(u))};function w(C){i=C,e(5,i)}const R=async()=>{e(1,o=null),e(4,s=!0),e(1,o=await c(u))};function j(C){s=C,e(4,s)}const T=async()=>{e(1,o=null),e(3,a=!0),e(2,f=["d3f:contains","d3f:may-contains"]),e(1,o=await c(u))},S=async()=>{e(1,o=null),e(3,a=!0),e(2,f=["d3f:runs","d3f:loads","d3f:manages"]),e(1,o=await c(u))};function v(C){a=C,e(3,a)}return n.$$set=C=>{"node"in C&&e(0,u=C.node)},e(6,t=!1),e(5,i=!1),e(4,s=!1),e(3,a=!1),[u,o,f,a,s,i,t,c,d,_,m,N,w,R,j,T,S,v]}class Jg extends Je{constructor(r){super(),Ze(this,r,Yg,Qg,Ye,{node:0})}}function oo(n,r,e){const t=n.slice();return t[18]=r[e],t[20]=e,t}const Zg=n=>({}),fo=n=>({});function Kg(n){let r;return{c(){r=q("No related defensive techniques in this release.")},l(e){r=M(e,"No related defensive techniques in this release.")},m(e,t){A(e,r,t)},p:Le,i:Le,o:Le,d(e){e&&g(r)}}}function e2(n){let r,e;return r=new xr({props:{$$slots:{default:[i2]},$$scope:{ctx:n}}}),{c(){me(r.$$.fragment)},l(t){ve(r.$$.fragment,t)},m(t,i){be(r,t,i),e=!0},p(t,i){const s={};i&8214&&(s.$$scope={dirty:i,ctx:t}),r.$set(s)},i(t){e||(ue(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){we(r,t)}}}function t2(n){let r,e="Loading...";return{c(){r=te("div"),r.textContent=e},l(t){r=re(t,"DIV",{"data-svelte-h":!0}),Ue(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,i){A(t,r,i)},p:Le,i:Le,o:Le,d(t){t&&g(r)}}}function r2(n){let r,e=ke(n[18].def_artifact.value)+"",t,i;return{c(){r=q("class "),t=q(e),i=q(" ArtifactNode;")},l(s){r=M(s,"class "),t=M(s,e),i=M(s," ArtifactNode;")},m(s,a){A(s,r,a),A(s,t,a),A(s,i,a)},p(s,a){a&4&&e!==(e=ke(s[18].def_artifact.value)+"")&&de(t,e)},d(s){s&&(g(r),g(t),g(i))}}}function n2(n){let r,e=ke(n[18].def_artifact.value)+"",t,i;return{c(){r=q("class "),t=q(e),i=q(" SelectedArtifactNode;")},l(s){r=M(s,"class "),t=M(s,e),i=M(s," SelectedArtifactNode;")},m(s,a){A(s,r,a),A(s,t,a),A(s,i,a)},p(s,a){a&4&&e!==(e=ke(s[18].def_artifact.value)+"")&&de(t,e)},d(s){s&&(g(r),g(t),g(i))}}}function co(n){let r=n[1].data.techniqueId+"",e,t,i=n[2].description["@graph"][0]["rdfs:label"]+"",s,a,l="-->",u,o,f=n[18].def_artifact_rel_label.value+"",c,d,_=ke(n[18].def_artifact.value)+"",m,N,w=n[18].def_artifact_label.value+"",R,j,T=n[1].data.techniqueId+"",S,v,C,D,P=ke(n[18].def_artifact.value)+"",B,F,b=`
`,y;function I(L,H){return H&20&&(C=null),C==null&&(C=!!L[4].includes(ke(L[18].def_artifact.value))),C?n2:r2}let k=I(n,-1),V=k(n);return{c(){e=q(r),t=q('["'),s=q(i),a=q('"] '),u=q(l),o=q(' |"'),c=q(f),d=q('" | '),m=q(_),N=q('["'),R=q(w),j=q(`"]; 
            class `),S=q(T),v=q(` DefensiveTechniqueNode;
            `),V.c(),D=q(`
            click `),B=q(P),F=q(" def_to_art_callback;"),y=q(b)},l(L){e=M(L,r),t=M(L,'["'),s=M(L,i),a=M(L,'"] '),u=M(L,l),o=M(L,' |"'),c=M(L,f),d=M(L,'" | '),m=M(L,_),N=M(L,'["'),R=M(L,w),j=M(L,`"]; 
            class `),S=M(L,T),v=M(L,` DefensiveTechniqueNode;
            `),V.l(L),D=M(L,`
            click `),B=M(L,P),F=M(L," def_to_art_callback;"),y=M(L,b)},m(L,H){A(L,e,H),A(L,t,H),A(L,s,H),A(L,a,H),A(L,u,H),A(L,o,H),A(L,c,H),A(L,d,H),A(L,m,H),A(L,N,H),A(L,R,H),A(L,j,H),A(L,S,H),A(L,v,H),V.m(L,H),A(L,D,H),A(L,B,H),A(L,F,H),A(L,y,H)},p(L,H){H&2&&r!==(r=L[1].data.techniqueId+"")&&de(e,r),H&4&&i!==(i=L[2].description["@graph"][0]["rdfs:label"]+"")&&de(s,i),H&4&&f!==(f=L[18].def_artifact_rel_label.value+"")&&de(c,f),H&4&&_!==(_=ke(L[18].def_artifact.value)+"")&&de(m,_),H&4&&w!==(w=L[18].def_artifact_label.value+"")&&de(R,w),H&2&&T!==(T=L[1].data.techniqueId+"")&&de(S,T),k===(k=I(L,H))&&V?V.p(L,H):(V.d(1),V=k(L),V&&(V.c(),V.m(D.parentNode,D))),H&4&&P!==(P=ke(L[18].def_artifact.value)+"")&&de(B,P)},d(L){L&&(g(e),g(t),g(s),g(a),g(u),g(o),g(c),g(d),g(m),g(N),g(R),g(j),g(S),g(v),g(D),g(B),g(F),g(y)),V.d(L)}}}function i2(n){let r,e,t=Ve(n[2].digital_artifacts.results.bindings),i=[];for(let s=0;s<t.length;s+=1)i[s]=co(oo(n,t,s));return{c(){r=q(`graph LR
          `);for(let s=0;s<i.length;s+=1)i[s].c();e=Oe()},l(s){r=M(s,`graph LR
          `);for(let a=0;a<i.length;a+=1)i[a].l(s);e=Oe()},m(s,a){A(s,r,a);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);A(s,e,a)},p(s,a){if(a&22){t=Ve(s[2].digital_artifacts.results.bindings);let l;for(l=0;l<t.length;l+=1){const u=oo(s,t,l);i[l]?i[l].p(u,a):(i[l]=co(u),i[l].c(),i[l].m(e.parentNode,e))}for(;l<i.length;l+=1)i[l].d(1);i.length=t.length}},d(s){s&&(g(r),g(e)),Tt(i,s)}}}function a2(n){let r,e,t,i,s,a,l,u,o,f,c,d,_,m=n[4].length+"",N,w,R,j,T;const S=n[8].header,v=pt(S,n,n[13],fo),C=n[8].default,D=pt(C,n,n[13],null),P=[t2,e2,Kg],B=[];function F(b,y){return b[2]?b[2].digital_artifacts.results.bindings.length>0?1:2:0}return l=F(n),u=B[l]=P[l](n),{c(){r=te("dialog"),e=te("div"),v&&v.c(),t=q(`
      Select Related Artifacts To Insert
      `),D&&D.c(),i=ae(),s=te("hr"),a=ae(),u.c(),o=ae(),f=te("hr"),c=ae(),d=te("button"),_=q("Insert ("),N=q(m),w=q(")"),this.h()},l(b){r=re(b,"DIALOG",{class:!0});var y=ye(r);e=re(y,"DIV",{class:!0});var I=ye(e);v&&v.l(I),t=M(I,`
      Select Related Artifacts To Insert
      `),D&&D.l(I),i=se(I),s=re(I,"HR",{}),a=se(I),u.l(I),o=se(I),f=re(I,"HR",{}),c=se(I),d=re(I,"BUTTON",{class:!0});var k=ye(d);_=M(k,"Insert ("),N=M(k,m),w=M(k,")"),k.forEach(g),I.forEach(g),y.forEach(g),this.h()},h(){d.autofocus=!0,oe(d,"class","svelte-32qhhg"),oe(e,"class","svelte-32qhhg"),oe(r,"class","svelte-32qhhg")},m(b,y){A(b,r,y),z(r,e),v&&v.m(e,null),z(e,t),D&&D.m(e,null),z(e,i),z(e,s),z(e,a),B[l].m(e,null),z(e,o),z(e,f),z(e,c),z(e,d),z(d,_),z(d,N),z(d,w),n[10](r),R=!0,d.focus(),j||(T=[Ae(d,"click",n[7]),Ae(e,"click",Ot(n[9])),Ae(r,"close",n[11]),Ae(r,"click",Ur(n[12]))],j=!0)},p(b,[y]){v&&v.p&&(!R||y&8192)&&gt(v,S,b,b[13],R?vt(S,b[13],y,Zg):mt(b[13]),fo),D&&D.p&&(!R||y&8192)&&gt(D,C,b,b[13],R?vt(C,b[13],y,null):mt(b[13]),null);let I=l;l=F(b),l===I?B[l].p(b,y):(kt(),fe(B[I],1,1,()=>{B[I]=null}),Et(),u=B[l],u?u.p(b,y):(u=B[l]=P[l](b),u.c()),ue(u,1),u.m(e,o)),(!R||y&16)&&m!==(m=b[4].length+"")&&de(N,m)},i(b){R||(ue(v,b),ue(D,b),ue(u),R=!0)},o(b){fe(v,b),fe(D,b),fe(u),R=!1},d(b){b&&g(r),v&&v.d(b),D&&D.d(b),B[l].d(),n[10](null),j=!1,bt(T)}}}function s2(n,r,e){let t,i,s,{$$slots:a={},$$scope:l}=r,{show_artifacts_modal:u}=r,{parent_node:o}=r,{data:f}=r,c;const d=Dr();nt(n,d,S=>e(16,s=S));const _=Or();nt(n,_,S=>e(15,i=S));function m(S){t.includes(S)?e(4,t=t.filter(v=>v!==S)):t.push(S),e(4,t)}window.def_to_art_callback=function(S){m(S)};function N(){let S=0,v=200,C=100;for(const D of t){let P=f.digital_artifacts.results.bindings.find(B=>ke(B.def_artifact.value)==D);P&&(Wr(d,_,o,"artifactSelectorNode",P.def_artifact_label.value,"d3f:"+ke(P.def_artifact.value),o.data.sequence,o.position.x+S*v,o.position.y+C,182,82,P.def_artifact_rel_label.value,"defenseBottomSource","defenseRightTarget",!0),S+=1)}d.set(s),_.set(i),c&&c.close(),e(4,t=[])}function w(S){ur.call(this,n,S)}function R(S){_t[S?"unshift":"push"](()=>{c=S,e(3,c)})}const j=()=>e(0,u=!1),T=()=>{c.close(),e(4,t=[])};return n.$$set=S=>{"show_artifacts_modal"in S&&e(0,u=S.show_artifacts_modal),"parent_node"in S&&e(1,o=S.parent_node),"data"in S&&e(2,f=S.data),"$$scope"in S&&e(13,l=S.$$scope)},n.$$.update=()=>{n.$$.dirty&9&&u&&c&&c.showModal()},e(4,t=[]),[u,o,f,c,t,d,_,N,a,w,R,j,T,l]}class l2 extends Je{constructor(r){super(),Ze(this,r,s2,a2,Ye,{show_artifacts_modal:0,parent_node:1,data:2})}}function ho(n,r,e){const t=n.slice();return t[18]=r[e],t}const u2=n=>({}),_o=n=>({});function o2(n){let r;return{c(){r=q("No related offensive techniques in this release.")},l(e){r=M(e,"No related offensive techniques in this release.")},m(e,t){A(e,r,t)},p:Le,i:Le,o:Le,d(e){e&&g(r)}}}function f2(n){let r,e;return r=new xr({props:{$$slots:{default:[_2]},$$scope:{ctx:n}}}),{c(){me(r.$$.fragment)},l(t){ve(r.$$.fragment,t)},m(t,i){be(r,t,i),e=!0},p(t,i){const s={};i&16394&&(s.$$scope={dirty:i,ctx:t}),r.$set(s)},i(t){e||(ue(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){we(r,t)}}}function c2(n){let r,e="Loading...";return{c(){r=te("div"),r.textContent=e},l(t){r=re(t,"DIV",{"data-svelte-h":!0}),Ue(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,i){A(t,r,i)},p:Le,i:Le,o:Le,d(t){t&&g(r)}}}function po(n){let r=ke(n[18].def_tech.value).replace(/ |\./g,"")+"",e,t,i=n[18].def_tech_label.value+"",s,a,l="-->",u,o,f="May "+n[18].def_tactic_label.value.replace(/ /g,""),c,d,_=n[18].off_tech_id.value.replace(/ |\./g,"")+"",m,N,w=n[18].off_tech_label.value+"",R,j,T,S,v=ke(n[18].def_tech.value)+"",C,D,P=n[18].off_tech_id.value.replace(/ |\./g,"")+"",B,F,b=n[18].off_tech_id.value.replace(/ |\./g,"")+"",y,I,k=ke(n[18].def_tech.value)+"",V,L,H=ke(n[18].def_tech.value)+"",le,Y;function x(X,ee){return ee&10&&(T=null),T==null&&(T=!!X[3].includes(X[18].off_tech_id.value.replace(/ |\./g,""))),T?h2:d2}let U=x(n,-1),Q=U(n);return{c(){e=q(r),t=q('["'),s=q(i),a=q('"] '),u=q(l),o=q(" | "),c=q(f),d=q("| "),m=q(_),N=q('["'),R=q(w),j=q(`"];
              `),Q.c(),S=q(`
              class `),C=q(v),D=q(" CountermeasureNode; click "),B=q(P),F=q(` href "javascript:def_to_off_callback('`),y=q(b),I=q(`')"; click `),V=q(k),L=q(' href "/technique/d3f:'),le=q(H),Y=q('";')},l(X){e=M(X,r),t=M(X,'["'),s=M(X,i),a=M(X,'"] '),u=M(X,l),o=M(X," | "),c=M(X,f),d=M(X,"| "),m=M(X,_),N=M(X,'["'),R=M(X,w),j=M(X,`"];
              `),Q.l(X),S=M(X,`
              class `),C=M(X,v),D=M(X," CountermeasureNode; click "),B=M(X,P),F=M(X,` href "javascript:def_to_off_callback('`),y=M(X,b),I=M(X,`')"; click `),V=M(X,k),L=M(X,' href "/technique/d3f:'),le=M(X,H),Y=M(X,'";')},m(X,ee){A(X,e,ee),A(X,t,ee),A(X,s,ee),A(X,a,ee),A(X,u,ee),A(X,o,ee),A(X,c,ee),A(X,d,ee),A(X,m,ee),A(X,N,ee),A(X,R,ee),A(X,j,ee),Q.m(X,ee),A(X,S,ee),A(X,C,ee),A(X,D,ee),A(X,B,ee),A(X,F,ee),A(X,y,ee),A(X,I,ee),A(X,V,ee),A(X,L,ee),A(X,le,ee),A(X,Y,ee)},p(X,ee){ee&2&&r!==(r=ke(X[18].def_tech.value).replace(/ |\./g,"")+"")&&de(e,r),ee&2&&i!==(i=X[18].def_tech_label.value+"")&&de(s,i),ee&2&&f!==(f="May "+X[18].def_tactic_label.value.replace(/ /g,""))&&de(c,f),ee&2&&_!==(_=X[18].off_tech_id.value.replace(/ |\./g,"")+"")&&de(m,_),ee&2&&w!==(w=X[18].off_tech_label.value+"")&&de(R,w),U===(U=x(X,ee))&&Q?Q.p(X,ee):(Q.d(1),Q=U(X),Q&&(Q.c(),Q.m(S.parentNode,S))),ee&2&&v!==(v=ke(X[18].def_tech.value)+"")&&de(C,v),ee&2&&P!==(P=X[18].off_tech_id.value.replace(/ |\./g,"")+"")&&de(B,P),ee&2&&b!==(b=X[18].off_tech_id.value.replace(/ |\./g,"")+"")&&de(y,b),ee&2&&k!==(k=ke(X[18].def_tech.value)+"")&&de(V,k),ee&2&&H!==(H=ke(X[18].def_tech.value)+"")&&de(le,H)},d(X){X&&(g(e),g(t),g(s),g(a),g(u),g(o),g(c),g(d),g(m),g(N),g(R),g(j),g(S),g(C),g(D),g(B),g(F),g(y),g(I),g(V),g(L),g(le),g(Y)),Q.d(X)}}}function d2(n){let r,e=n[18].off_tech_id.value.replace(/ |\./g,"")+"",t,i;return{c(){r=q("class "),t=q(e),i=q(" OffensiveTechniqueNode;")},l(s){r=M(s,"class "),t=M(s,e),i=M(s," OffensiveTechniqueNode;")},m(s,a){A(s,r,a),A(s,t,a),A(s,i,a)},p(s,a){a&2&&e!==(e=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&de(t,e)},d(s){s&&(g(r),g(t),g(i))}}}function h2(n){let r,e=n[18].off_tech_id.value.replace(/ |\./g,"")+"",t,i;return{c(){r=q("class "),t=q(e),i=q(" SelectedOffensiveTechniqueNode;")},l(s){r=M(s,"class "),t=M(s,e),i=M(s," SelectedOffensiveTechniqueNode;")},m(s,a){A(s,r,a),A(s,t,a),A(s,i,a)},p(s,a){a&2&&e!==(e=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&de(t,e)},d(s){s&&(g(r),g(t),g(i))}}}function go(n){let r=n[6].edge_is_unique(n[18].def_tech_label.value,n[18].off_artifact_rel_label.value,n[18].off_artifact_label.value),e,t=r&&po(n);return{c(){t&&t.c(),e=Oe()},l(i){t&&t.l(i),e=Oe()},m(i,s){t&&t.m(i,s),A(i,e,s)},p(i,s){s&2&&(r=i[6].edge_is_unique(i[18].def_tech_label.value,i[18].off_artifact_rel_label.value,i[18].off_artifact_label.value)),r?t?t.p(i,s):(t=po(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&g(e),t&&t.d(i)}}}function _2(n){let r,e,t=Ve(n[1].def_to_off.results.bindings),i=[];for(let s=0;s<t.length;s+=1)i[s]=go(ho(n,t,s));return{c(){r=q(`graph LR;
          `);for(let s=0;s<i.length;s+=1)i[s].c();e=Oe()},l(s){r=M(s,`graph LR;
          `);for(let a=0;a<i.length;a+=1)i[a].l(s);e=Oe()},m(s,a){A(s,r,a);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);A(s,e,a)},p(s,a){if(a&74){t=Ve(s[1].def_to_off.results.bindings);let l;for(l=0;l<t.length;l+=1){const u=ho(s,t,l);i[l]?i[l].p(u,a):(i[l]=go(u),i[l].c(),i[l].m(e.parentNode,e))}for(;l<i.length;l+=1)i[l].d(1);i.length=t.length}},d(s){s&&(g(r),g(e)),Tt(i,s)}}}function p2(n){let r,e,t,i,s,a,l,u,o,f,c,d,_,m=n[3].length+"",N,w,R,j,T;const S=n[9].header,v=pt(S,n,n[14],_o),C=n[9].default,D=pt(C,n,n[14],null),P=[c2,f2,o2],B=[];function F(b,y){return b[1]?b[1].def_to_off.results.bindings.length>0?1:2:0}return l=F(n),u=B[l]=P[l](n),{c(){r=te("dialog"),e=te("div"),v&&v.c(),t=q(`
      Select Attack Techniques
      `),D&&D.c(),i=ae(),s=te("hr"),a=ae(),u.c(),o=ae(),f=te("hr"),c=ae(),d=te("button"),_=q("Insert ("),N=q(m),w=q(")"),this.h()},l(b){r=re(b,"DIALOG",{class:!0});var y=ye(r);e=re(y,"DIV",{class:!0});var I=ye(e);v&&v.l(I),t=M(I,`
      Select Attack Techniques
      `),D&&D.l(I),i=se(I),s=re(I,"HR",{}),a=se(I),u.l(I),o=se(I),f=re(I,"HR",{}),c=se(I),d=re(I,"BUTTON",{class:!0});var k=ye(d);_=M(k,"Insert ("),N=M(k,m),w=M(k,")"),k.forEach(g),I.forEach(g),y.forEach(g),this.h()},h(){d.autofocus=!0,oe(d,"class","svelte-18veofv"),oe(e,"class","svelte-18veofv"),oe(r,"class","svelte-18veofv")},m(b,y){A(b,r,y),z(r,e),v&&v.m(e,null),z(e,t),D&&D.m(e,null),z(e,i),z(e,s),z(e,a),B[l].m(e,null),z(e,o),z(e,f),z(e,c),z(e,d),z(d,_),z(d,N),z(d,w),n[11](r),R=!0,d.focus(),j||(T=[Ae(d,"click",n[7]),Ae(e,"click",Ot(n[10])),Ae(r,"close",n[12]),Ae(r,"click",Ur(n[13]))],j=!0)},p(b,[y]){v&&v.p&&(!R||y&16384)&&gt(v,S,b,b[14],R?vt(S,b[14],y,u2):mt(b[14]),_o),D&&D.p&&(!R||y&16384)&&gt(D,C,b,b[14],R?vt(C,b[14],y,null):mt(b[14]),null);let I=l;l=F(b),l===I?B[l].p(b,y):(kt(),fe(B[I],1,1,()=>{B[I]=null}),Et(),u=B[l],u?u.p(b,y):(u=B[l]=P[l](b),u.c()),ue(u,1),u.m(e,o)),(!R||y&8)&&m!==(m=b[3].length+"")&&de(N,m)},i(b){R||(ue(v,b),ue(D,b),ue(u),R=!0)},o(b){fe(v,b),fe(D,b),fe(u),R=!1},d(b){b&&g(r),v&&v.d(b),D&&D.d(b),B[l].d(),n[11](null),j=!1,bt(T)}}}function g2(n,r,e){let t,i,s,{$$slots:a={},$$scope:l}=r,{show_attack_modal:u}=r,{parent_node:o}=r,{data:f}=r,c;const d=Dr();nt(n,d,v=>e(16,s=v));const _=Or();nt(n,_,v=>e(15,i=v));let m=new Nn;function N(v){t.includes(v)?e(3,t=t.filter(C=>C!==v)):t.push(v),e(3,t)}window.def_to_off_callback=function(v){N(v)};function w(){let v=0,C=200,D=100;for(const P of t){let B=f.def_to_off.results.bindings.find(F=>F.off_tech_id.value.replace(/ |\./g,"")==P);B&&(Wr(d,_,o,"attackSelectorNode",B.off_tech_label.value,"d3f:"+B.off_tech_id.value,o.data.sequence,o.position.x+v*C,o.position.y+D,182,63,"May "+B.def_tactic_label.value,"defenseBottomSource","attackTopTarget",!0),v+=1)}d.set(s),_.set(i),c&&c.close(),e(3,t=[])}function R(v){ur.call(this,n,v)}function j(v){_t[v?"unshift":"push"](()=>{c=v,e(2,c)})}const T=()=>e(0,u=!1),S=()=>{c.close(),e(3,t=[])};return n.$$set=v=>{"show_attack_modal"in v&&e(0,u=v.show_attack_modal),"parent_node"in v&&e(8,o=v.parent_node),"data"in v&&e(1,f=v.data),"$$scope"in v&&e(14,l=v.$$scope)},n.$$.update=()=>{n.$$.dirty&5&&u&&c&&(c.showModal(),m.reset())},e(3,t=[]),[u,f,c,t,d,_,m,w,o,a,R,j,T,S,l]}class m2 extends Je{constructor(r){super(),Ze(this,r,g2,p2,Ye,{show_attack_modal:0,parent_node:8,data:1})}}function v2(n){let r,e="artifacts",t,i,s,a,l,u="offensive techniques",o,f,c,d,_,m="weaknesses (coming soon)",N,w,R;function j(C){n[6](C)}let T={parent_node:n[0],data:n[1]};n[2]!==void 0&&(T.show_artifacts_modal=n[2]),i=new l2({props:T}),_t.push(()=>Xt(i,"show_artifacts_modal",j));function S(C){n[8](C)}let v={parent_node:n[0],data:n[1]};return n[3]!==void 0&&(v.show_attack_modal=n[3]),f=new m2({props:v}),_t.push(()=>Xt(f,"show_attack_modal",S)),{c(){r=te("button"),r.textContent=e,t=ae(),me(i.$$.fragment),a=ae(),l=te("button"),l.textContent=u,o=ae(),me(f.$$.fragment),d=ae(),_=te("button"),_.textContent=m,this.h()},l(C){r=re(C,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(r)!=="svelte-isgkpy"&&(r.textContent=e),t=se(C),ve(i.$$.fragment,C),a=se(C),l=re(C,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(l)!=="svelte-17h5zge"&&(l.textContent=u),o=se(C),ve(f.$$.fragment,C),d=se(C),_=re(C,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(_)!=="svelte-ivhbdc"&&(_.textContent=m),this.h()},h(){oe(r,"class","svelte-1x5dcdh"),oe(l,"class","svelte-1x5dcdh"),_.disabled=!0,oe(_,"class","svelte-1x5dcdh")},m(C,D){A(C,r,D),A(C,t,D),be(i,C,D),A(C,a,D),A(C,l,D),A(C,o,D),be(f,C,D),A(C,d,D),A(C,_,D),N=!0,w||(R=[Ae(r,"click",n[5]),Ae(l,"click",n[7])],w=!0)},p(C,[D]){const P={};D&1&&(P.parent_node=C[0]),D&2&&(P.data=C[1]),!s&&D&4&&(s=!0,P.show_artifacts_modal=C[2],zt(()=>s=!1)),i.$set(P);const B={};D&1&&(B.parent_node=C[0]),D&2&&(B.data=C[1]),!c&&D&8&&(c=!0,B.show_attack_modal=C[3],zt(()=>c=!1)),f.$set(B)},i(C){N||(ue(i.$$.fragment,C),ue(f.$$.fragment,C),N=!0)},o(C){fe(i.$$.fragment,C),fe(f.$$.fragment,C),N=!1},d(C){C&&(g(r),g(t),g(a),g(l),g(o),g(d),g(_)),we(i,C),we(f,C),w=!1,bt(R)}}}function b2(n,r,e){let t,i;var s=this&&this.__awaiter||function(_,m,N,w){function R(j){return j instanceof N?j:new N(function(T){T(j)})}return new(N||(N=Promise))(function(j,T){function S(D){try{C(w.next(D))}catch(P){T(P)}}function v(D){try{C(w.throw(D))}catch(P){T(P)}}function C(D){D.done?j(D.value):R(D.value).then(S,v)}C((w=w.apply(_,m||[])).next())})};let{node:a}=r,l;function u(_){return s(this,void 0,void 0,function*(){if(_.data.techniqueId){const m=_.data.techniqueId;return yield(yield fetch(`/api/technique/${m}.json`)).json()}else alert("Please specify a D3FEND Class for this node to enable inferential mapping"),e(2,t=!1)})}const o=async()=>{e(1,l=null),e(2,t=!0),e(1,l=await u(a))};function f(_){t=_,e(2,t)}const c=async()=>{e(1,l=null),e(3,i=!0),e(1,l=await u(a))};function d(_){i=_,e(3,i)}return n.$$set=_=>{"node"in _&&e(0,a=_.node)},e(2,t=!1),e(3,i=!1),[a,l,t,i,u,o,f,c,d]}class w2 extends Je{constructor(r){super(),Ze(this,r,b2,v2,Ye,{node:0})}}function mo(n,r,e){const t=n.slice();return t[18]=r[e],t}const y2=n=>({}),vo=n=>({});function D2(n){let r;return{c(){r=q("No related artifacts in this release.")},l(e){r=M(e,"No related artifacts in this release.")},m(e,t){A(e,r,t)},p:Le,i:Le,o:Le,d(e){e&&g(r)}}}function k2(n){let r,e;return r=new xr({props:{$$slots:{default:[C2]},$$scope:{ctx:n}}}),{c(){me(r.$$.fragment)},l(t){ve(r.$$.fragment,t)},m(t,i){be(r,t,i),e=!0},p(t,i){const s={};i&16394&&(s.$$scope={dirty:i,ctx:t}),r.$set(s)},i(t){e||(ue(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){we(r,t)}}}function E2(n){let r,e="Loading...";return{c(){r=te("div"),r.textContent=e},l(t){r=re(t,"DIV",{"data-svelte-h":!0}),Ue(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,i){A(t,r,i)},p:Le,i:Le,o:Le,d(t){t&&g(r)}}}function bo(n){let r=n[18].off_tech_id.value.replace(/ |\./g,"")+"",e,t,i=n[18].off_tech_label.value+"",s,a,l="-->",u,o,f=n[18].off_artifact_rel_label.value.replace(/ /g,"")+"",c,d,_=ke(n[18].off_artifact.value)+"",m,N,w=n[18].off_artifact_label.value+"",R,j,T=n[18].off_tech_id.value.replace(/ |\./g,"")+"",S,v,C,D,P=ke(n[18].off_artifact.value)+"",B,F,b=ke(n[18].off_artifact.value)+"",y,I,k=n[18].off_tech_id.value.replace(/ |\./g,"")+"",V,L,H=Qi(n[18].off_tech_id.value)+"",le,Y,x=ke(n[18].off_artifact.value)+"",U,Q,X=ke(n[18].off_artifact.value)+"",ee,Ce;function Se(ie,De){return De&10&&(C=null),C==null&&(C=!!ie[3].includes(ke(ie[18].off_artifact.value))),C?T2:A2}let he=Se(n,-1),pe=he(n);return{c(){e=q(r),t=q('["'),s=q(i),a=q('"] '),u=q(l),o=q(" |"),c=q(f),d=q("| "),m=q(_),N=q('["'),R=q(w),j=q('"]; class '),S=q(T),v=q(` OffensiveTechniqueNode;
            `),pe.c(),D=q(" ; click "),B=q(P),F=q(' href "/dao/artifact/d3f:'),y=q(b),I=q('"; click '),V=q(k),L=q(' href "'),le=q(H),Y=q('"; click '),U=q(x),Q=q(` href "javascript:off_to_art_callback('`),ee=q(X),Ce=q(`')";`)},l(ie){e=M(ie,r),t=M(ie,'["'),s=M(ie,i),a=M(ie,'"] '),u=M(ie,l),o=M(ie," |"),c=M(ie,f),d=M(ie,"| "),m=M(ie,_),N=M(ie,'["'),R=M(ie,w),j=M(ie,'"]; class '),S=M(ie,T),v=M(ie,` OffensiveTechniqueNode;
            `),pe.l(ie),D=M(ie," ; click "),B=M(ie,P),F=M(ie,' href "/dao/artifact/d3f:'),y=M(ie,b),I=M(ie,'"; click '),V=M(ie,k),L=M(ie,' href "'),le=M(ie,H),Y=M(ie,'"; click '),U=M(ie,x),Q=M(ie,` href "javascript:off_to_art_callback('`),ee=M(ie,X),Ce=M(ie,`')";`)},m(ie,De){A(ie,e,De),A(ie,t,De),A(ie,s,De),A(ie,a,De),A(ie,u,De),A(ie,o,De),A(ie,c,De),A(ie,d,De),A(ie,m,De),A(ie,N,De),A(ie,R,De),A(ie,j,De),A(ie,S,De),A(ie,v,De),pe.m(ie,De),A(ie,D,De),A(ie,B,De),A(ie,F,De),A(ie,y,De),A(ie,I,De),A(ie,V,De),A(ie,L,De),A(ie,le,De),A(ie,Y,De),A(ie,U,De),A(ie,Q,De),A(ie,ee,De),A(ie,Ce,De)},p(ie,De){De&2&&r!==(r=ie[18].off_tech_id.value.replace(/ |\./g,"")+"")&&de(e,r),De&2&&i!==(i=ie[18].off_tech_label.value+"")&&de(s,i),De&2&&f!==(f=ie[18].off_artifact_rel_label.value.replace(/ /g,"")+"")&&de(c,f),De&2&&_!==(_=ke(ie[18].off_artifact.value)+"")&&de(m,_),De&2&&w!==(w=ie[18].off_artifact_label.value+"")&&de(R,w),De&2&&T!==(T=ie[18].off_tech_id.value.replace(/ |\./g,"")+"")&&de(S,T),he===(he=Se(ie,De))&&pe?pe.p(ie,De):(pe.d(1),pe=he(ie),pe&&(pe.c(),pe.m(D.parentNode,D))),De&2&&P!==(P=ke(ie[18].off_artifact.value)+"")&&de(B,P),De&2&&b!==(b=ke(ie[18].off_artifact.value)+"")&&de(y,b),De&2&&k!==(k=ie[18].off_tech_id.value.replace(/ |\./g,"")+"")&&de(V,k),De&2&&H!==(H=Qi(ie[18].off_tech_id.value)+"")&&de(le,H),De&2&&x!==(x=ke(ie[18].off_artifact.value)+"")&&de(U,x),De&2&&X!==(X=ke(ie[18].off_artifact.value)+"")&&de(ee,X)},d(ie){ie&&(g(e),g(t),g(s),g(a),g(u),g(o),g(c),g(d),g(m),g(N),g(R),g(j),g(S),g(v),g(D),g(B),g(F),g(y),g(I),g(V),g(L),g(le),g(Y),g(U),g(Q),g(ee),g(Ce)),pe.d(ie)}}}function A2(n){let r,e=ke(n[18].off_artifact.value)+"",t,i;return{c(){r=q("class "),t=q(e),i=q(" ArtifactNode;")},l(s){r=M(s,"class "),t=M(s,e),i=M(s," ArtifactNode;")},m(s,a){A(s,r,a),A(s,t,a),A(s,i,a)},p(s,a){a&2&&e!==(e=ke(s[18].off_artifact.value)+"")&&de(t,e)},d(s){s&&(g(r),g(t),g(i))}}}function T2(n){let r,e=ke(n[18].off_artifact.value)+"",t,i;return{c(){r=q("class "),t=q(e),i=q(" SelectedArtifactNode;")},l(s){r=M(s,"class "),t=M(s,e),i=M(s," SelectedArtifactNode;")},m(s,a){A(s,r,a),A(s,t,a),A(s,i,a)},p(s,a){a&2&&e!==(e=ke(s[18].off_artifact.value)+"")&&de(t,e)},d(s){s&&(g(r),g(t),g(i))}}}function wo(n){let r=n[6].edge_is_unique(n[18].off_tech_label.value,n[18].off_artifact_rel_label.value,n[18].off_artifact_label.value),e,t=r&&bo(n);return{c(){t&&t.c(),e=Oe()},l(i){t&&t.l(i),e=Oe()},m(i,s){t&&t.m(i,s),A(i,e,s)},p(i,s){s&2&&(r=i[6].edge_is_unique(i[18].off_tech_label.value,i[18].off_artifact_rel_label.value,i[18].off_artifact_label.value)),r?t?t.p(i,s):(t=bo(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&g(e),t&&t.d(i)}}}function C2(n){let r,e,t=Ve(n[1].off_to_def.results.bindings),i=[];for(let s=0;s<t.length;s+=1)i[s]=wo(mo(n,t,s));return{c(){r=q(`graph LR;
        `);for(let s=0;s<i.length;s+=1)i[s].c();e=Oe()},l(s){r=M(s,`graph LR;
        `);for(let a=0;a<i.length;a+=1)i[a].l(s);e=Oe()},m(s,a){A(s,r,a);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);A(s,e,a)},p(s,a){if(a&74){t=Ve(s[1].off_to_def.results.bindings);let l;for(l=0;l<t.length;l+=1){const u=mo(s,t,l);i[l]?i[l].p(u,a):(i[l]=wo(u),i[l].c(),i[l].m(e.parentNode,e))}for(;l<i.length;l+=1)i[l].d(1);i.length=t.length}},d(s){s&&(g(r),g(e)),Tt(i,s)}}}function N2(n){let r,e,t,i,s,a,l,u,o,f,c,d,_,m=n[3].length+"",N,w,R,j,T;const S=n[9].header,v=pt(S,n,n[14],vo),C=n[9].default,D=pt(C,n,n[14],null),P=[E2,k2,D2],B=[];function F(b,y){return b[1]?b[1].off_to_def.results.bindings.length>0?1:2:0}return l=F(n),u=B[l]=P[l](n),{c(){r=te("dialog"),e=te("div"),v&&v.c(),t=q(`
    Select Related Artifacts To Insert
    `),D&&D.c(),i=ae(),s=te("hr"),a=ae(),u.c(),o=ae(),f=te("hr"),c=ae(),d=te("button"),_=q("Insert ("),N=q(m),w=q(")"),this.h()},l(b){r=re(b,"DIALOG",{class:!0});var y=ye(r);e=re(y,"DIV",{class:!0});var I=ye(e);v&&v.l(I),t=M(I,`
    Select Related Artifacts To Insert
    `),D&&D.l(I),i=se(I),s=re(I,"HR",{}),a=se(I),u.l(I),o=se(I),f=re(I,"HR",{}),c=se(I),d=re(I,"BUTTON",{class:!0});var k=ye(d);_=M(k,"Insert ("),N=M(k,m),w=M(k,")"),k.forEach(g),I.forEach(g),y.forEach(g),this.h()},h(){d.autofocus=!0,oe(d,"class","svelte-x0618k"),oe(e,"class","svelte-x0618k"),oe(r,"class","svelte-x0618k")},m(b,y){A(b,r,y),z(r,e),v&&v.m(e,null),z(e,t),D&&D.m(e,null),z(e,i),z(e,s),z(e,a),B[l].m(e,null),z(e,o),z(e,f),z(e,c),z(e,d),z(d,_),z(d,N),z(d,w),n[11](r),R=!0,d.focus(),j||(T=[Ae(d,"click",n[7]),Ae(e,"click",Ot(n[10])),Ae(r,"close",n[12]),Ae(r,"click",Ur(n[13]))],j=!0)},p(b,[y]){v&&v.p&&(!R||y&16384)&&gt(v,S,b,b[14],R?vt(S,b[14],y,y2):mt(b[14]),vo),D&&D.p&&(!R||y&16384)&&gt(D,C,b,b[14],R?vt(C,b[14],y,null):mt(b[14]),null);let I=l;l=F(b),l===I?B[l].p(b,y):(kt(),fe(B[I],1,1,()=>{B[I]=null}),Et(),u=B[l],u?u.p(b,y):(u=B[l]=P[l](b),u.c()),ue(u,1),u.m(e,o)),(!R||y&8)&&m!==(m=b[3].length+"")&&de(N,m)},i(b){R||(ue(v,b),ue(D,b),ue(u),R=!0)},o(b){fe(v,b),fe(D,b),fe(u),R=!1},d(b){b&&g(r),v&&v.d(b),D&&D.d(b),B[l].d(),n[11](null),j=!1,bt(T)}}}function S2(n,r,e){let t,i,s,{$$slots:a={},$$scope:l}=r,{show_artifacts_modal:u}=r,{parent_node:o}=r,{data:f}=r,c;const d=Dr();nt(n,d,v=>e(16,s=v));const _=Or();nt(n,_,v=>e(15,i=v));let m=new Nn;function N(v){t.includes(v)?e(3,t=t.filter(C=>C!==v)):t.push(v),e(3,t)}window.off_to_art_callback=function(v){N(v)};function w(){let v=0,C=200,D=100;for(const P of t){let B=f.off_to_def.results.bindings.find(F=>ke(F.off_artifact.value)==P);B&&(Wr(d,_,o,"artifactSelectorNode",B.off_artifact_label.value,"d3f:"+ke(B.off_artifact.value),o.data.sequence,o.position.x+v*C,o.position.y+D,182,63,B.off_artifact_rel_label.value,"attackBottomSource","attackLeftTarget",!0),v+=1)}d.set(s),_.set(i),c&&c.close(),e(3,t=[])}function R(v){ur.call(this,n,v)}function j(v){_t[v?"unshift":"push"](()=>{c=v,e(2,c)})}const T=()=>e(0,u=!1),S=()=>{c.close(),e(3,t=[])};return n.$$set=v=>{"show_artifacts_modal"in v&&e(0,u=v.show_artifacts_modal),"parent_node"in v&&e(8,o=v.parent_node),"data"in v&&e(1,f=v.data),"$$scope"in v&&e(14,l=v.$$scope)},n.$$.update=()=>{n.$$.dirty&5&&u&&c&&(c.showModal(),m.reset())},e(3,t=[]),[u,f,c,t,d,_,m,w,o,a,R,j,T,S,l]}class R2 extends Je{constructor(r){super(),Ze(this,r,S2,N2,Ye,{show_artifacts_modal:0,parent_node:8,data:1})}}function yo(n,r,e){const t=n.slice();return t[23]=r[e],t}const I2=n=>({}),Do=n=>({});function F2(n){let r;return{c(){r=q("No related artifacts in this release.")},l(e){r=M(e,"No related artifacts in this release.")},m(e,t){A(e,r,t)},p:Le,i:Le,o:Le,d(e){e&&g(r)}}}function O2(n){let r,e,t,i,s,a,l,u,o,f;function c(_){n[14](_)}let d={toggles:n[4]};return n[3]!==void 0&&(d.selected=n[3]),e=new rf({props:d}),_t.push(()=>Xt(e,"selected",c)),o=new xr({props:{$$slots:{default:[M2]},$$scope:{ctx:n}}}),{c(){r=te("div"),me(e.$$.fragment),i=ae(),s=te("br"),a=ae(),l=te("br"),u=ae(),me(o.$$.fragment),this.h()},l(_){r=re(_,"DIV",{class:!0});var m=ye(r);ve(e.$$.fragment,m),m.forEach(g),i=se(_),s=re(_,"BR",{}),a=se(_),l=re(_,"BR",{}),u=se(_),ve(o.$$.fragment,_),this.h()},h(){oe(r,"class","center shrink")},m(_,m){A(_,r,m),be(e,r,null),A(_,i,m),A(_,s,m),A(_,a,m),A(_,l,m),A(_,u,m),be(o,_,m),f=!0},p(_,m){const N={};m&16&&(N.toggles=_[4]),!t&&m&8&&(t=!0,N.selected=_[3],zt(()=>t=!1)),e.$set(N);const w={};m&262186&&(w.$$scope={dirty:m,ctx:_}),o.$set(w)},i(_){f||(ue(e.$$.fragment,_),ue(o.$$.fragment,_),f=!0)},o(_){fe(e.$$.fragment,_),fe(o.$$.fragment,_),f=!1},d(_){_&&(g(r),g(i),g(s),g(a),g(l),g(u)),we(e),we(o,_)}}}function L2(n){let r,e="Loading...";return{c(){r=te("div"),r.textContent=e},l(t){r=re(t,"DIV",{"data-svelte-h":!0}),Ue(r)!=="svelte-194gxkm"&&(r.textContent=e)},m(t,i){A(t,r,i)},p:Le,i:Le,o:Le,d(t){t&&g(r)}}}function ko(n){let r=n[8].edge_is_unique(n[23].def_tech_label.value,n[23].def_artifact_rel_label.value,n[23].off_artifact_label.value),e,t=r&&Eo(n);return{c(){t&&t.c(),e=Oe()},l(i){t&&t.l(i),e=Oe()},m(i,s){t&&t.m(i,s),A(i,e,s)},p(i,s){s&2&&(r=i[8].edge_is_unique(i[23].def_tech_label.value,i[23].def_artifact_rel_label.value,i[23].off_artifact_label.value)),r?t?t.p(i,s):(t=Eo(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&g(e),t&&t.d(i)}}}function Eo(n){let r=!n[3].includes(n[23].def_tactic_label.value),e,t=r&&Ao(n);return{c(){t&&t.c(),e=Oe()},l(i){t&&t.l(i),e=Oe()},m(i,s){t&&t.m(i,s),A(i,e,s)},p(i,s){s&10&&(r=!i[3].includes(i[23].def_tactic_label.value)),r?t?t.p(i,s):(t=Ao(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){i&&g(e),t&&t.d(i)}}}function Ao(n){let r=ke(n[23].def_tech.value)+"",e,t,i=n[23].def_tech_label.value+"",s,a,l="-->",u,o,f=n[23].def_artifact_rel_label.value.replace(/ /g,"")+"",c,d,_=ke(n[23].off_artifact.value)+"",m,N,w=n[23].off_artifact_label.value+"",R,j,T=n[8].edge_is_unique(n[23].def_tech.value,n[23].def_tactic_label.value,n[23].off_tech_id.value),S,v,C,D=n[23].off_artifact_label.value.replace(/ /g,"")+"",P,B,F=ke(n[23].def_tech.value)+"",b,y,I=n[23].def_tech_label.value.replace(/ |\./g,"")+"",k,V,L=T&&To(n);function H(x,U){return U&34&&(v=null),v==null&&(v=!!x[5].includes(ke(x[23].def_tech.value))),v?q2:B2}let le=H(n,-1),Y=le(n);return{c(){e=q(r),t=q('["'),s=q(i),a=q('"] '),u=q(l),o=q(`
                | `),c=q(f),d=q(" | "),m=q(_),N=q('["'),R=q(w),j=q(`"];

                `),L&&L.c(),S=ae(),Y.c(),C=q(` 
                class `),P=q(D),B=q(` ArtifactNode;
                click `),b=q(F),y=q(` href "javascript:off_to_def_callback('`),k=q(I),V=q(`')";`)},l(x){e=M(x,r),t=M(x,'["'),s=M(x,i),a=M(x,'"] '),u=M(x,l),o=M(x,`
                | `),c=M(x,f),d=M(x," | "),m=M(x,_),N=M(x,'["'),R=M(x,w),j=M(x,`"];

                `),L&&L.l(x),S=se(x),Y.l(x),C=M(x,` 
                class `),P=M(x,D),B=M(x,` ArtifactNode;
                click `),b=M(x,F),y=M(x,` href "javascript:off_to_def_callback('`),k=M(x,I),V=M(x,`')";`)},m(x,U){A(x,e,U),A(x,t,U),A(x,s,U),A(x,a,U),A(x,u,U),A(x,o,U),A(x,c,U),A(x,d,U),A(x,m,U),A(x,N,U),A(x,R,U),A(x,j,U),L&&L.m(x,U),A(x,S,U),Y.m(x,U),A(x,C,U),A(x,P,U),A(x,B,U),A(x,b,U),A(x,y,U),A(x,k,U),A(x,V,U)},p(x,U){U&2&&r!==(r=ke(x[23].def_tech.value)+"")&&de(e,r),U&2&&i!==(i=x[23].def_tech_label.value+"")&&de(s,i),U&2&&f!==(f=x[23].def_artifact_rel_label.value.replace(/ /g,"")+"")&&de(c,f),U&2&&_!==(_=ke(x[23].off_artifact.value)+"")&&de(m,_),U&2&&w!==(w=x[23].off_artifact_label.value+"")&&de(R,w),U&2&&(T=x[8].edge_is_unique(x[23].def_tech.value,x[23].def_tactic_label.value,x[23].off_tech_id.value)),T?L?L.p(x,U):(L=To(x),L.c(),L.m(S.parentNode,S)):L&&(L.d(1),L=null),le===(le=H(x,U))&&Y?Y.p(x,U):(Y.d(1),Y=le(x),Y&&(Y.c(),Y.m(C.parentNode,C))),U&2&&D!==(D=x[23].off_artifact_label.value.replace(/ /g,"")+"")&&de(P,D),U&2&&F!==(F=ke(x[23].def_tech.value)+"")&&de(b,F),U&2&&I!==(I=x[23].def_tech_label.value.replace(/ |\./g,"")+"")&&de(k,I)},d(x){x&&(g(e),g(t),g(s),g(a),g(u),g(o),g(c),g(d),g(m),g(N),g(R),g(j),g(S),g(C),g(P),g(B),g(b),g(y),g(k),g(V)),L&&L.d(x),Y.d(x)}}}function To(n){let r=ke(n[23].def_tech.value)+"",e,t,i=n[23].def_tech_label.value+"",s,a,l="-.->",u,o,f="May "+n[23].def_tactic_label.value,c,d,_=n[23].off_tech_id.value.replace(/ |\./g,"")+"",m,N,w=n[23].off_tech_label.value+"",R,j;return{c(){e=q(r),t=q('["'),s=q(i),a=q('"] '),u=q(l),o=q(`
                  | `),c=q(f),d=q(" | "),m=q(_),N=q('["'),R=q(w),j=q('"] ;')},l(T){e=M(T,r),t=M(T,'["'),s=M(T,i),a=M(T,'"] '),u=M(T,l),o=M(T,`
                  | `),c=M(T,f),d=M(T," | "),m=M(T,_),N=M(T,'["'),R=M(T,w),j=M(T,'"] ;')},m(T,S){A(T,e,S),A(T,t,S),A(T,s,S),A(T,a,S),A(T,u,S),A(T,o,S),A(T,c,S),A(T,d,S),A(T,m,S),A(T,N,S),A(T,R,S),A(T,j,S)},p(T,S){S&2&&r!==(r=ke(T[23].def_tech.value)+"")&&de(e,r),S&2&&i!==(i=T[23].def_tech_label.value+"")&&de(s,i),S&2&&f!==(f="May "+T[23].def_tactic_label.value)&&de(c,f),S&2&&_!==(_=T[23].off_tech_id.value.replace(/ |\./g,"")+"")&&de(m,_),S&2&&w!==(w=T[23].off_tech_label.value+"")&&de(R,w)},d(T){T&&(g(e),g(t),g(s),g(a),g(u),g(o),g(c),g(d),g(m),g(N),g(R),g(j))}}}function B2(n){let r,e=ke(n[23].def_tech.value)+"",t,i;return{c(){r=q("class "),t=q(e),i=q(" DefensiveTechniqueNode;")},l(s){r=M(s,"class "),t=M(s,e),i=M(s," DefensiveTechniqueNode;")},m(s,a){A(s,r,a),A(s,t,a),A(s,i,a)},p(s,a){a&2&&e!==(e=ke(s[23].def_tech.value)+"")&&de(t,e)},d(s){s&&(g(r),g(t),g(i))}}}function q2(n){let r,e=ke(n[23].def_tech.value)+"",t,i;return{c(){r=q("class "),t=q(e),i=q(" SelectedDefensiveTechniqueNode;")},l(s){r=M(s,"class "),t=M(s,e),i=M(s," SelectedDefensiveTechniqueNode;")},m(s,a){A(s,r,a),A(s,t,a),A(s,i,a)},p(s,a){a&2&&e!==(e=ke(s[23].def_tech.value)+"")&&de(t,e)},d(s){s&&(g(r),g(t),g(i))}}}function Co(n){let r=n[23].off_tech_id.value.replace(/ |\./g,"")+"",e,t,i=n[23].off_tech_label.value+"",s,a,l="-->",u,o,f=n[23].off_artifact_rel_label.value.replace(/ /g,"")+"",c,d,_=ke(n[23].off_artifact.value)+"",m,N,w=n[23].off_artifact_label.value+"",R,j,T=n[23].off_tech_id.value.replace(/ |\./g,"")+"",S,v,C=ke(n[23].off_artifact.value)+"",D,P,B=ke(n[23].off_artifact.value)+"",F,b,y=ke(n[23].off_artifact.value)+"",I,k,V=n[23].off_tech_id.value.replace(/ |\./g,"")+"",L,H,le=Qi(n[23].off_tech_id.value)+"",Y,x,U=ke(n[23].off_artifact.value)+"",Q,X,ee=ke(n[23].off_artifact.value)+"",Ce,Se;return{c(){e=q(r),t=q('["'),s=q(i),a=q('"] '),u=q(l),o=q(" |"),c=q(f),d=q("| "),m=q(_),N=q('["'),R=q(w),j=q('"]; class '),S=q(T),v=q(` OffensiveTechniqueNode;
            class `),D=q(C),P=q(" ArtifactNode; click "),F=q(B),b=q(' href "/dao/artifact/d3f:'),I=q(y),k=q(`";
            click `),L=q(V),H=q(' href "'),Y=q(le),x=q('"; click '),Q=q(U),X=q(' href "/dao/artifact/d3f:'),Ce=q(ee),Se=q('";')},l(he){e=M(he,r),t=M(he,'["'),s=M(he,i),a=M(he,'"] '),u=M(he,l),o=M(he," |"),c=M(he,f),d=M(he,"| "),m=M(he,_),N=M(he,'["'),R=M(he,w),j=M(he,'"]; class '),S=M(he,T),v=M(he,` OffensiveTechniqueNode;
            class `),D=M(he,C),P=M(he," ArtifactNode; click "),F=M(he,B),b=M(he,' href "/dao/artifact/d3f:'),I=M(he,y),k=M(he,`";
            click `),L=M(he,V),H=M(he,' href "'),Y=M(he,le),x=M(he,'"; click '),Q=M(he,U),X=M(he,' href "/dao/artifact/d3f:'),Ce=M(he,ee),Se=M(he,'";')},m(he,pe){A(he,e,pe),A(he,t,pe),A(he,s,pe),A(he,a,pe),A(he,u,pe),A(he,o,pe),A(he,c,pe),A(he,d,pe),A(he,m,pe),A(he,N,pe),A(he,R,pe),A(he,j,pe),A(he,S,pe),A(he,v,pe),A(he,D,pe),A(he,P,pe),A(he,F,pe),A(he,b,pe),A(he,I,pe),A(he,k,pe),A(he,L,pe),A(he,H,pe),A(he,Y,pe),A(he,x,pe),A(he,Q,pe),A(he,X,pe),A(he,Ce,pe),A(he,Se,pe)},p(he,pe){pe&2&&r!==(r=he[23].off_tech_id.value.replace(/ |\./g,"")+"")&&de(e,r),pe&2&&i!==(i=he[23].off_tech_label.value+"")&&de(s,i),pe&2&&f!==(f=he[23].off_artifact_rel_label.value.replace(/ /g,"")+"")&&de(c,f),pe&2&&_!==(_=ke(he[23].off_artifact.value)+"")&&de(m,_),pe&2&&w!==(w=he[23].off_artifact_label.value+"")&&de(R,w),pe&2&&T!==(T=he[23].off_tech_id.value.replace(/ |\./g,"")+"")&&de(S,T),pe&2&&C!==(C=ke(he[23].off_artifact.value)+"")&&de(D,C),pe&2&&B!==(B=ke(he[23].off_artifact.value)+"")&&de(F,B),pe&2&&y!==(y=ke(he[23].off_artifact.value)+"")&&de(I,y),pe&2&&V!==(V=he[23].off_tech_id.value.replace(/ |\./g,"")+"")&&de(L,V),pe&2&&le!==(le=Qi(he[23].off_tech_id.value)+"")&&de(Y,le),pe&2&&U!==(U=ke(he[23].off_artifact.value)+"")&&de(Q,U),pe&2&&ee!==(ee=ke(he[23].off_artifact.value)+"")&&de(Ce,ee)},d(he){he&&(g(e),g(t),g(s),g(a),g(u),g(o),g(c),g(d),g(m),g(N),g(R),g(j),g(S),g(v),g(D),g(P),g(F),g(b),g(I),g(k),g(L),g(H),g(Y),g(x),g(Q),g(X),g(Ce),g(Se))}}}function No(n){let r,e=n[8].edge_is_unique(n[23].off_tech_label.value,n[23].off_artifact_rel_label.value,n[23].off_artifact_label.value),t,i="def_tech"in n[23]&&ko(n),s=e&&Co(n);return{c(){i&&i.c(),r=ae(),s&&s.c(),t=Oe()},l(a){i&&i.l(a),r=se(a),s&&s.l(a),t=Oe()},m(a,l){i&&i.m(a,l),A(a,r,l),s&&s.m(a,l),A(a,t,l)},p(a,l){"def_tech"in a[23]?i?i.p(a,l):(i=ko(a),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null),l&2&&(e=a[8].edge_is_unique(a[23].off_tech_label.value,a[23].off_artifact_rel_label.value,a[23].off_artifact_label.value)),e?s?s.p(a,l):(s=Co(a),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(a){a&&(g(r),g(t)),i&&i.d(a),s&&s.d(a)}}}function M2(n){let r,e,t=Ve(n[1].off_to_def.results.bindings),i=[];for(let s=0;s<t.length;s+=1)i[s]=No(yo(n,t,s));return{c(){r=q(`graph LR;
        `);for(let s=0;s<i.length;s+=1)i[s].c();e=Oe()},l(s){r=M(s,`graph LR;
        `);for(let a=0;a<i.length;a+=1)i[a].l(s);e=Oe()},m(s,a){A(s,r,a);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(s,a);A(s,e,a)},p(s,a){if(a&298){t=Ve(s[1].off_to_def.results.bindings);let l;for(l=0;l<t.length;l+=1){const u=yo(s,t,l);i[l]?i[l].p(u,a):(i[l]=No(u),i[l].c(),i[l].m(e.parentNode,e))}for(;l<i.length;l+=1)i[l].d(1);i.length=t.length}},d(s){s&&(g(r),g(e)),Tt(i,s)}}}function j2(n){let r,e,t,i,s,a,l,u,o,f,c,d,_,m=n[5].length+"",N,w,R,j,T;const S=n[12].header,v=pt(S,n,n[18],Do),C=n[12].default,D=pt(C,n,n[18],null),P=[L2,O2,F2],B=[];function F(b,y){return b[1]?b[1].off_to_def.results.bindings.length>0?1:2:0}return l=F(n),u=B[l]=P[l](n),{c(){r=te("dialog"),e=te("div"),v&&v.c(),t=q(`
    Select Related Artifacts To Insert
    `),D&&D.c(),i=ae(),s=te("hr"),a=ae(),u.c(),o=ae(),f=te("hr"),c=ae(),d=te("button"),_=q("Insert ("),N=q(m),w=q(")"),this.h()},l(b){r=re(b,"DIALOG",{class:!0});var y=ye(r);e=re(y,"DIV",{class:!0});var I=ye(e);v&&v.l(I),t=M(I,`
    Select Related Artifacts To Insert
    `),D&&D.l(I),i=se(I),s=re(I,"HR",{}),a=se(I),u.l(I),o=se(I),f=re(I,"HR",{}),c=se(I),d=re(I,"BUTTON",{class:!0});var k=ye(d);_=M(k,"Insert ("),N=M(k,m),w=M(k,")"),k.forEach(g),I.forEach(g),y.forEach(g),this.h()},h(){d.autofocus=!0,oe(d,"class","svelte-x0618k"),oe(e,"class","svelte-x0618k"),oe(r,"class","svelte-x0618k")},m(b,y){A(b,r,y),z(r,e),v&&v.m(e,null),z(e,t),D&&D.m(e,null),z(e,i),z(e,s),z(e,a),B[l].m(e,null),z(e,o),z(e,f),z(e,c),z(e,d),z(d,_),z(d,N),z(d,w),n[15](r),R=!0,d.focus(),j||(T=[Ae(d,"click",n[9]),Ae(e,"click",Ot(n[13])),Ae(r,"close",n[16]),Ae(r,"click",Ur(n[17]))],j=!0)},p(b,[y]){v&&v.p&&(!R||y&262144)&&gt(v,S,b,b[18],R?vt(S,b[18],y,I2):mt(b[18]),Do),D&&D.p&&(!R||y&262144)&&gt(D,C,b,b[18],R?vt(C,b[18],y,null):mt(b[18]),null);let I=l;l=F(b),l===I?B[l].p(b,y):(kt(),fe(B[I],1,1,()=>{B[I]=null}),Et(),u=B[l],u?u.p(b,y):(u=B[l]=P[l](b),u.c()),ue(u,1),u.m(e,o)),(!R||y&32)&&m!==(m=b[5].length+"")&&de(N,m)},i(b){R||(ue(v,b),ue(D,b),ue(u),R=!0)},o(b){fe(v,b),fe(D,b),fe(u),R=!1},d(b){b&&g(r),v&&v.d(b),D&&D.d(b),B[l].d(),n[15](null),j=!1,bt(T)}}}function P2(n,r,e){let t,i,s,{$$slots:a={},$$scope:l}=r,{show_defend_modal:u}=r,{parent_node:o}=r,{data:f}=r,c;const d=Dr();nt(n,d,F=>e(20,s=F));const _=Or();nt(n,_,F=>e(19,i=F));let m=new Nn;function N(F){t.includes(F)?e(5,t=t.filter(b=>b!==F)):t.push(F),e(5,t)}window.off_to_def_callback=function(F){N(F)};function w(){let F=0,b=200,y=100;for(const I of t){let k=f.off_to_def.results.bindings.find(V=>"def_tech"in V&&ke(V.def_tech.value)==I);k&&(Wr(d,_,o,"countermeasureSelectorNode",k.def_tech_label.value,"d3f:"+ke(k.def_tech.value),o.data.sequence,o.position.x+F*b,o.position.y+y,182,63,"May "+k.def_tactic_label.value,"defenseBottomSource","attackTopTarget",!1),F+=1)}d.set(s),_.set(i),c&&c.close(),e(5,t=[])}let R=new Set,j=[],T=[];ef(j,T)&&(T=[]);function S(F){for(const b of t){let y=f.off_to_def.results.bindings.find(I=>"def_tech"in I&&ke(I.def_tech.value)==b);F.includes(y.def_tactic_label.value)&&e(5,t=t.filter(I=>I!==b))}e(5,t)}function v(F){ur.call(this,n,F)}function C(F){T=F,e(3,T)}function D(F){_t[F?"unshift":"push"](()=>{c=F,e(2,c)})}const P=()=>e(0,u=!1),B=()=>{c.close(),e(5,t=[])};return n.$$set=F=>{"show_defend_modal"in F&&e(0,u=F.show_defend_modal),"parent_node"in F&&e(10,o=F.parent_node),"data"in F&&e(1,f=F.data),"$$scope"in F&&e(18,l=F.$$scope)},n.$$.update=()=>{n.$$.dirty&5&&u&&c&&(c.showModal(),m.reset()),n.$$.dirty&2050&&f&&(f.off_to_def.results.bindings.forEach(F=>{"def_tactic_label"in F&&R.add(F.def_tactic_label.value)}),e(11,R),e(1,f)),n.$$.dirty&2048&&e(4,j=Array.from(R).sort(function(F,b){return Yi[F]-Yi[b]})),n.$$.dirty&8&&S(T),n.$$.dirty&8&&m.reset(T)},e(5,t=[]),[u,f,c,T,j,t,d,_,m,w,o,R,a,v,C,D,P,B,l]}class U2 extends Je{constructor(r){super(),Ze(this,r,P2,j2,Ye,{show_defend_modal:0,parent_node:10,data:1})}}function x2(n){let r,e="artifacts",t,i,s,a,l,u="defensive techniques",o,f,c,d,_,m;function N(T){n[6](T)}let w={parent_node:n[0],data:n[1]};n[2]!==void 0&&(w.show_artifacts_modal=n[2]),i=new R2({props:w}),_t.push(()=>Xt(i,"show_artifacts_modal",N));function R(T){n[8](T)}let j={parent_node:n[0],data:n[1]};return n[3]!==void 0&&(j.show_defend_modal=n[3]),f=new U2({props:j}),_t.push(()=>Xt(f,"show_defend_modal",R)),{c(){r=te("button"),r.textContent=e,t=ae(),me(i.$$.fragment),a=ae(),l=te("button"),l.textContent=u,o=ae(),me(f.$$.fragment),this.h()},l(T){r=re(T,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(r)!=="svelte-1t14z6m"&&(r.textContent=e),t=se(T),ve(i.$$.fragment,T),a=se(T),l=re(T,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(l)!=="svelte-o3we0s"&&(l.textContent=u),o=se(T),ve(f.$$.fragment,T),this.h()},h(){oe(r,"class","svelte-1x5dcdh"),oe(l,"class","svelte-1x5dcdh")},m(T,S){A(T,r,S),A(T,t,S),be(i,T,S),A(T,a,S),A(T,l,S),A(T,o,S),be(f,T,S),d=!0,_||(m=[Ae(r,"click",n[5]),Ae(l,"click",n[7])],_=!0)},p(T,[S]){const v={};S&1&&(v.parent_node=T[0]),S&2&&(v.data=T[1]),!s&&S&4&&(s=!0,v.show_artifacts_modal=T[2],zt(()=>s=!1)),i.$set(v);const C={};S&1&&(C.parent_node=T[0]),S&2&&(C.data=T[1]),!c&&S&8&&(c=!0,C.show_defend_modal=T[3],zt(()=>c=!1)),f.$set(C)},i(T){d||(ue(i.$$.fragment,T),ue(f.$$.fragment,T),d=!0)},o(T){fe(i.$$.fragment,T),fe(f.$$.fragment,T),d=!1},d(T){T&&(g(r),g(t),g(a),g(l),g(o)),we(i,T),we(f,T),_=!1,bt(m)}}}function $2(n,r,e){let t,i;var s=this&&this.__awaiter||function(_,m,N,w){function R(j){return j instanceof N?j:new N(function(T){T(j)})}return new(N||(N=Promise))(function(j,T){function S(D){try{C(w.next(D))}catch(P){T(P)}}function v(D){try{C(w.throw(D))}catch(P){T(P)}}function C(D){D.done?j(D.value):R(D.value).then(S,v)}C((w=w.apply(_,m||[])).next())})};let{node:a}=r,l;function u(_){return s(this,void 0,void 0,function*(){if(_.data.techniqueId){const m=_.data.techniqueId;return yield(yield fetch(`/api/offensive-technique/attack/${m.replace("d3f:","")}.json`)).json()}else alert("Please specify a D3FEND Class for this node to enable inferential mapping"),e(3,i=!1),e(2,t=!1)})}const o=async()=>{e(1,l=null),e(2,t=!0),e(1,l=await u(a))};function f(_){t=_,e(2,t)}const c=async()=>{e(1,l=null),e(3,i=!0),e(1,l=await u(a))};function d(_){i=_,e(3,i)}return n.$$set=_=>{"node"in _&&e(0,a=_.node)},e(2,t=!1),e(3,i=!1),[a,l,t,i,u,o,f,c,d]}class V2 extends Je{constructor(r){super(),Ze(this,r,$2,x2,Ye,{node:0})}}function So(n){let r,e;return r=new V2({props:{node:n[1]}}),{c(){me(r.$$.fragment)},l(t){ve(r.$$.fragment,t)},m(t,i){be(r,t,i),e=!0},p(t,i){const s={};i&2&&(s.node=t[1]),r.$set(s)},i(t){e||(ue(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){we(r,t)}}}function Ro(n){let r,e;return r=new w2({props:{node:n[1]}}),{c(){me(r.$$.fragment)},l(t){ve(r.$$.fragment,t)},m(t,i){be(r,t,i),e=!0},p(t,i){const s={};i&2&&(s.node=t[1]),r.$set(s)},i(t){e||(ue(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){we(r,t)}}}function Io(n){let r,e;return r=new Jg({props:{node:n[1]}}),{c(){me(r.$$.fragment)},l(t){ve(r.$$.fragment,t)},m(t,i){be(r,t,i),e=!0},p(t,i){const s={};i&2&&(s.node=t[1]),r.$set(s)},i(t){e||(ue(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){we(r,t)}}}function H2(n){let r,e,t,i,s,a,l,u,o,f,c="duplicate",d,_,m="delete",N,w,R,j,T=n[1]&&n[1].type=="attackSelectorNode"&&So(n),S=n[1]&&n[1].type=="countermeasureSelectorNode"&&Ro(n),v=n[1]&&n[1].type=="artifactSelectorNode"&&Io(n);return{c(){r=te("div"),e=te("p"),t=te("small"),i=q("node: "),s=q(n[0]),a=ae(),T&&T.c(),l=ae(),S&&S.c(),u=ae(),v&&v.c(),o=ae(),f=te("button"),f.textContent=c,d=ae(),_=te("button"),_.textContent=m,this.h()},l(C){r=re(C,"DIV",{style:!0,class:!0});var D=ye(r);e=re(D,"P",{style:!0});var P=ye(e);t=re(P,"SMALL",{});var B=ye(t);i=M(B,"node: "),s=M(B,n[0]),B.forEach(g),P.forEach(g),a=se(D),T&&T.l(D),l=se(D),S&&S.l(D),u=se(D),v&&v.l(D),o=se(D),f=re(D,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(f)!=="svelte-1spbqw1"&&(f.textContent=c),d=se(D),_=re(D,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(_)!=="svelte-1pyou7z"&&(_.textContent=m),D.forEach(g),this.h()},h(){He(e,"margin","0.5em"),oe(f,"class","svelte-1o17oqa"),oe(_,"class","svelte-1o17oqa"),oe(r,"style",N=n[2]()),oe(r,"class","context-menu svelte-1o17oqa")},m(C,D){A(C,r,D),z(r,e),z(e,t),z(t,i),z(t,s),z(r,a),T&&T.m(r,null),z(r,l),S&&S.m(r,null),z(r,u),v&&v.m(r,null),z(r,o),z(r,f),z(r,d),z(r,_),w=!0,R||(j=[Ae(f,"click",n[5]),Ae(_,"click",n[6])],R=!0)},p(C,[D]){(!w||D&1)&&de(s,C[0]),C[1]&&C[1].type=="attackSelectorNode"?T?(T.p(C,D),D&2&&ue(T,1)):(T=So(C),T.c(),ue(T,1),T.m(r,l)):T&&(kt(),fe(T,1,1,()=>{T=null}),Et()),C[1]&&C[1].type=="countermeasureSelectorNode"?S?(S.p(C,D),D&2&&ue(S,1)):(S=Ro(C),S.c(),ue(S,1),S.m(r,u)):S&&(kt(),fe(S,1,1,()=>{S=null}),Et()),C[1]&&C[1].type=="artifactSelectorNode"?v?(v.p(C,D),D&2&&ue(v,1)):(v=Io(C),v.c(),ue(v,1),v.m(r,o)):v&&(kt(),fe(v,1,1,()=>{v=null}),Et()),(!w||D&4&&N!==(N=C[2]()))&&oe(r,"style",N)},i(C){w||(ue(T),ue(S),ue(v),w=!0)},o(C){fe(T),fe(S),fe(v),w=!1},d(C){C&&g(r),T&&T.d(),S&&S.d(),v&&v.d(),R=!1,bt(j)}}}function z2(n,r,e){let t,i,s,a,{id:l}=r,{top:u}=r,{left:o}=r,{right:f}=r,{bottom:c}=r;const d=Dr();nt(n,d,w=>e(11,a=w));const _=Or();nt(n,_,w=>e(12,s=w));function m(){const w=a.find(R=>R.id===l);w&&(console.log(w),a.push(Object.assign(Object.assign({},w),{id:`${l}-copy${Math.random()}`.slice(-24),position:{x:w.position.x,y:w.position.y+50}}))),d.set(a)}function N(){kn(d,a=a.filter(w=>w.id!==l),a),kn(_,s=s.filter(w=>w.source!==l&&w.target!==l),s),d.set(a),_.set(s)}return n.$$set=w=>{"id"in w&&e(0,l=w.id),"top"in w&&e(7,u=w.top),"left"in w&&e(8,o=w.left),"right"in w&&e(9,f=w.right),"bottom"in w&&e(10,c=w.bottom)},n.$$.update=()=>{n.$$.dirty&2049&&e(1,t=a.find(w=>w.id===l)),n.$$.dirty&1920&&e(2,i=()=>{let w="";return u&&(w+=`top:${u}px;`),c&&(w+=`bottom:${c}px;`),o&&(w+=`left:${o}px;`),f&&(w+=`right:${f}px;`),w})},[l,t,i,d,_,m,N,u,o,f,c,a]}class X2 extends Je{constructor(r){super(),Ze(this,r,z2,H2,Ye,{id:0,top:7,left:8,right:9,bottom:10})}}function Fo(n,r,e){const t=n.slice();return t[12]=r[e],t}function Oo(n){let r,e,t,i,s,a,l,u,o,f,c,d,_;const m=n[8].default,N=pt(m,n,n[7],null);let w=Ve(n[3]),R=[];for(let j=0;j<w.length;j+=1)R[j]=Lo(Fo(n,w,j));return{c(){r=te("div"),e=te("div"),t=te("h2"),i=q(n[1]),s=ae(),a=te("p"),l=q(n[2]),u=ae(),N&&N.c(),o=ae(),f=te("div");for(let j=0;j<R.length;j+=1)R[j].c();this.h()},l(j){r=re(j,"DIV",{class:!0});var T=ye(r);e=re(T,"DIV",{class:!0});var S=ye(e);t=re(S,"H2",{});var v=ye(t);i=M(v,n[1]),v.forEach(g),s=se(S),a=re(S,"P",{});var C=ye(a);l=M(C,n[2]),C.forEach(g),u=se(S),N&&N.l(S),o=se(S),f=re(S,"DIV",{class:!0});var D=ye(f);for(let P=0;P<R.length;P+=1)R[P].l(D);D.forEach(g),S.forEach(g),T.forEach(g),this.h()},h(){oe(f,"class","options svelte-zbcx3u"),oe(e,"class","modal-content center text-center svelte-zbcx3u"),oe(r,"class","modal-overlay svelte-zbcx3u")},m(j,T){A(j,r,T),z(r,e),z(e,t),z(t,i),z(e,s),z(e,a),z(a,l),z(e,u),N&&N.m(e,null),z(e,o),z(e,f);for(let S=0;S<R.length;S+=1)R[S]&&R[S].m(f,null);c=!0,d||(_=[Ae(e,"click",Ot(n[9])),Ae(r,"click",n[4])],d=!0)},p(j,T){if((!c||T&2)&&de(i,j[1]),(!c||T&4)&&de(l,j[2]),N&&N.p&&(!c||T&128)&&gt(N,m,j,j[7],c?vt(m,j[7],T,null):mt(j[7]),null),T&40){w=Ve(j[3]);let S;for(S=0;S<w.length;S+=1){const v=Fo(j,w,S);R[S]?R[S].p(v,T):(R[S]=Lo(v),R[S].c(),R[S].m(f,null))}for(;S<R.length;S+=1)R[S].d(1);R.length=w.length}},i(j){c||(ue(N,j),c=!0)},o(j){fe(N,j),c=!1},d(j){j&&g(r),N&&N.d(j),Tt(R,j),d=!1,bt(_)}}}function Lo(n){let r,e=n[12].label+"",t,i,s,a;function l(){return n[10](n[12])}return{c(){r=te("button"),t=q(e),i=ae(),this.h()},l(u){r=re(u,"BUTTON",{class:!0});var o=ye(r);t=M(o,e),i=se(o),o.forEach(g),this.h()},h(){oe(r,"class","svelte-zbcx3u")},m(u,o){A(u,r,o),z(r,t),z(r,i),s||(a=Ae(r,"click",l),s=!0)},p(u,o){n=u,o&8&&e!==(e=n[12].label+"")&&de(t,e)},d(u){u&&g(r),s=!1,a()}}}function G2(n){let r,e,t=n[0]&&Oo(n);return{c(){t&&t.c(),r=Oe()},l(i){t&&t.l(i),r=Oe()},m(i,s){t&&t.m(i,s),A(i,r,s),e=!0},p(i,[s]){i[0]?t?(t.p(i,s),s&1&&ue(t,1)):(t=Oo(i),t.c(),ue(t,1),t.m(r.parentNode,r)):t&&(kt(),fe(t,1,1,()=>{t=null}),Et())},i(i){e||(ue(t),e=!0)},o(i){fe(t),e=!1},d(i){i&&g(r),t&&t.d(i)}}}function W2(n,r,e){let{$$slots:t={},$$scope:i}=r,{is_open:s=!1}=r,{title:a=""}=r,{content:l=""}=r,{imageSrc:u=""}=r,{options:o=[]}=r;const f=ns();function c(){e(0,s=!1)}function d(N){f("optionSelected",N),c()}function _(N){ur.call(this,n,N)}const m=N=>d(N);return n.$$set=N=>{"is_open"in N&&e(0,s=N.is_open),"title"in N&&e(1,a=N.title),"content"in N&&e(2,l=N.content),"imageSrc"in N&&e(6,u=N.imageSrc),"options"in N&&e(3,o=N.options),"$$scope"in N&&e(7,i=N.$$scope)},[s,a,l,o,c,d,u,i,t,_,m]}class Bo extends Je{constructor(r){super(),Ze(this,r,W2,G2,Ye,{is_open:0,title:1,content:2,imageSrc:6,options:3})}}function qo(n,r,e){const t=n.slice();return t[11]=r[e],t}function Mo(n){let r,e,t,i,s,a,l,u,o,f,c,d,_;const m=n[7].default,N=pt(m,n,n[6],null);let w=Ve(n[3]),R=[];for(let j=0;j<w.length;j+=1)R[j]=jo(qo(n,w,j));return{c(){r=te("div"),e=te("div"),t=te("h2"),i=q(n[1]),s=ae(),a=te("p"),l=q(n[2]),u=ae(),N&&N.c(),o=ae(),f=te("div");for(let j=0;j<R.length;j+=1)R[j].c();this.h()},l(j){r=re(j,"DIV",{class:!0});var T=ye(r);e=re(T,"DIV",{class:!0});var S=ye(e);t=re(S,"H2",{});var v=ye(t);i=M(v,n[1]),v.forEach(g),s=se(S),a=re(S,"P",{});var C=ye(a);l=M(C,n[2]),C.forEach(g),u=se(S),N&&N.l(S),o=se(S),f=re(S,"DIV",{class:!0});var D=ye(f);for(let P=0;P<R.length;P+=1)R[P].l(D);D.forEach(g),S.forEach(g),T.forEach(g),this.h()},h(){oe(f,"class","options svelte-2iwk9m"),oe(e,"class","modal-content center text-center svelte-2iwk9m"),oe(r,"class","modal-overlay svelte-2iwk9m")},m(j,T){A(j,r,T),z(r,e),z(e,t),z(t,i),z(e,s),z(e,a),z(a,l),z(e,u),N&&N.m(e,null),z(e,o),z(e,f);for(let S=0;S<R.length;S+=1)R[S]&&R[S].m(f,null);c=!0,d||(_=[Ae(e,"click",Ot(n[8])),Ae(r,"click",n[4])],d=!0)},p(j,T){if((!c||T&2)&&de(i,j[1]),(!c||T&4)&&de(l,j[2]),N&&N.p&&(!c||T&64)&&gt(N,m,j,j[6],c?vt(m,j[6],T,null):mt(j[6]),null),T&40){w=Ve(j[3]);let S;for(S=0;S<w.length;S+=1){const v=qo(j,w,S);R[S]?R[S].p(v,T):(R[S]=jo(v),R[S].c(),R[S].m(f,null))}for(;S<R.length;S+=1)R[S].d(1);R.length=w.length}},i(j){c||(ue(N,j),c=!0)},o(j){fe(N,j),c=!1},d(j){j&&g(r),N&&N.d(j),Tt(R,j),d=!1,bt(_)}}}function jo(n){let r,e=n[11].label+"",t,i,s,a;function l(){return n[9](n[11])}return{c(){r=te("button"),t=q(e),i=ae(),this.h()},l(u){r=re(u,"BUTTON",{class:!0});var o=ye(r);t=M(o,e),i=se(o),o.forEach(g),this.h()},h(){oe(r,"class","svelte-2iwk9m")},m(u,o){A(u,r,o),z(r,t),z(r,i),s||(a=Ae(r,"click",l),s=!0)},p(u,o){n=u,o&8&&e!==(e=n[11].label+"")&&de(t,e)},d(u){u&&g(r),s=!1,a()}}}function Q2(n){let r,e,t=n[0]&&Mo(n);return{c(){t&&t.c(),r=Oe()},l(i){t&&t.l(i),r=Oe()},m(i,s){t&&t.m(i,s),A(i,r,s),e=!0},p(i,[s]){i[0]?t?(t.p(i,s),s&1&&ue(t,1)):(t=Mo(i),t.c(),ue(t,1),t.m(r.parentNode,r)):t&&(kt(),fe(t,1,1,()=>{t=null}),Et())},i(i){e||(ue(t),e=!0)},o(i){fe(t),e=!1},d(i){i&&g(r),t&&t.d(i)}}}function Y2(n,r,e){let{$$slots:t={},$$scope:i}=r,{is_open:s=!1}=r,{title:a=""}=r,{content:l=""}=r,{options:u=[{label:"Cancel",value:"cancel"}]}=r;const o=ns();function f(){e(0,s=!1)}function c(m){o("model_shared",m),f()}function d(m){ur.call(this,n,m)}const _=m=>c(m);return n.$$set=m=>{"is_open"in m&&e(0,s=m.is_open),"title"in m&&e(1,a=m.title),"content"in m&&e(2,l=m.content),"options"in m&&e(3,u=m.options),"$$scope"in m&&e(6,i=m.$$scope)},[s,a,l,u,f,c,i,t,d,_]}class J2 extends Je{constructor(r){super(),Ze(this,r,Y2,Q2,Ye,{is_open:0,title:1,content:2,options:3})}}function Z2(n){let r,e,t=n[1]?"Exit Fullscreen":"Fullscreen",i,s,a,l,u;const o=n[4].default,f=pt(o,n,n[3],null);return{c(){r=te("div"),e=te("button"),i=q(t),s=ae(),f&&f.c(),this.h()},l(c){r=re(c,"DIV",{id:!0,class:!0});var d=ye(r);e=re(d,"BUTTON",{class:!0});var _=ye(e);i=M(_,t),_.forEach(g),s=se(d),f&&f.l(d),d.forEach(g),this.h()},h(){oe(e,"class","fullscreen-toggle svelte-1t28a4x"),Li(e,"left",n[0]==="left"),Li(e,"right",n[0]==="right"),oe(r,"id","fullscreen-parent"),oe(r,"class","svelte-1t28a4x")},m(c,d){A(c,r,d),z(r,e),z(e,i),z(r,s),f&&f.m(r,null),a=!0,l||(u=Ae(e,"click",n[2]),l=!0)},p(c,[d]){(!a||d&2)&&t!==(t=c[1]?"Exit Fullscreen":"Fullscreen")&&de(i,t),(!a||d&1)&&Li(e,"left",c[0]==="left"),(!a||d&1)&&Li(e,"right",c[0]==="right"),f&&f.p&&(!a||d&8)&&gt(f,o,c,c[3],a?vt(o,c[3],d,null):mt(c[3]),null)},i(c){a||(ue(f,c),a=!0)},o(c){fe(f,c),a=!1},d(c){c&&g(r),f&&f.d(c),l=!1,u()}}}function K2(n,r,e){let{$$slots:t={},$$scope:i}=r,{position:s="right"}=r,a=!1,l;aa(()=>(l=document.getElementById("fullscreen-parent"),document.addEventListener("fullscreenchange",u),()=>{document.removeEventListener("fullscreenchange",u)}));function u(){e(1,a=!!document.fullscreenElement)}async function o(){if(a)try{await document.exitFullscreen()}catch(f){console.error("Error attempting to exit fullscreen:",f)}else try{await l.requestFullscreen()}catch(f){console.error("Error attempting to enable fullscreen:",f)}}return n.$$set=f=>{"position"in f&&e(0,s=f.position),"$$scope"in f&&e(3,i=f.$$scope)},[s,a,o,i,t]}class em extends Je{constructor(r){super(),Ze(this,r,K2,Z2,Ye,{position:0})}}function tm(n){let r,e,t="You can drag these nodes to the pane below.",i,s,a,l,u="Action",o,f,c="Event",d,_,m="Attack",N,w,R="Countermeasure",j,T,S,v="Endurant",C,D,P="Artifact",B,F,b="Information",y,I,k="Agent",V,L,H,le="State",Y,x,U="Vulnerability",Q,X,ee="Condition",Ce,Se;return{c(){r=te("aside"),e=te("div"),e.textContent=t,i=ae(),s=te("div"),a=te("div"),l=te("div"),l.textContent=u,o=ae(),f=te("div"),f.textContent=c,d=ae(),_=te("div"),_.textContent=m,N=ae(),w=te("div"),w.textContent=R,j=ae(),T=te("div"),S=te("div"),S.textContent=v,C=ae(),D=te("div"),D.textContent=P,B=ae(),F=te("div"),F.textContent=b,y=ae(),I=te("div"),I.textContent=k,V=ae(),L=te("div"),H=te("div"),H.textContent=le,Y=ae(),x=te("div"),x.textContent=U,Q=ae(),X=te("div"),X.textContent=ee,this.h()},l(he){r=re(he,"ASIDE",{class:!0});var pe=ye(r);e=re(pe,"DIV",{class:!0,"data-svelte-h":!0}),Ue(e)!=="svelte-1go4e39"&&(e.textContent=t),i=se(pe),s=re(pe,"DIV",{class:!0});var ie=ye(s);a=re(ie,"DIV",{class:!0});var De=ye(a);l=re(De,"DIV",{class:!0,"data-svelte-h":!0}),Ue(l)!=="svelte-1yk6dej"&&(l.textContent=u),o=se(De),f=re(De,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),Ue(f)!=="svelte-1hxo6k5"&&(f.textContent=c),d=se(De),_=re(De,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),Ue(_)!=="svelte-1m30nhf"&&(_.textContent=m),N=se(De),w=re(De,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),Ue(w)!=="svelte-xvztkt"&&(w.textContent=R),De.forEach(g),j=se(ie),T=re(ie,"DIV",{class:!0});var Pe=ye(T);S=re(Pe,"DIV",{class:!0,"data-svelte-h":!0}),Ue(S)!=="svelte-13fxc4g"&&(S.textContent=v),C=se(Pe),D=re(Pe,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Ue(D)!=="svelte-p6iki9"&&(D.textContent=P),B=se(Pe),F=re(Pe,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Ue(F)!=="svelte-gfucir"&&(F.textContent=b),y=se(Pe),I=re(Pe,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Ue(I)!=="svelte-1k1k96h"&&(I.textContent=k),Pe.forEach(g),V=se(ie),L=re(ie,"DIV",{class:!0});var et=ye(L);H=re(et,"DIV",{class:!0,"data-svelte-h":!0}),Ue(H)!=="svelte-82roym"&&(H.textContent=le),Y=se(et),x=re(et,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Ue(x)!=="svelte-tj9qj"&&(x.textContent=U),Q=se(et),X=re(et,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Ue(X)!=="svelte-1mwlumu"&&(X.textContent=ee),et.forEach(g),ie.forEach(g),pe.forEach(g),this.h()},h(){oe(e,"class","label svelte-1vosa9g"),oe(l,"class","text-center font-medium"),oe(f,"class","actionNode example-node svelte-1vosa9g"),oe(f,"draggable",!0),He(f,"text-align","center"),He(f,"background","white"),oe(f,"title","d3f:Event"),oe(_,"class","attackSelectorNode example-node svelte-1vosa9g"),oe(_,"draggable",!0),He(_,"text-align","center"),He(_,"background","#FFD0D0"),oe(_,"title","d3f:OffensiveTechnique"),oe(w,"class","countermeasureSelectorNode example-node svelte-1vosa9g"),oe(w,"draggable",!0),He(w,"text-align","center"),He(w,"background","#d6eaff"),oe(w,"title","d3f:DefensiveTechnique"),oe(a,"class","nodes-column svelte-1vosa9g"),oe(S,"class","text-center font-medium"),oe(D,"class","artifactSelectorNode art-node example-node svelte-1vosa9g"),oe(D,"draggable",!0),He(D,"text-align","center"),He(D,"background","#fff4dd"),oe(F,"class","informationSelectorNode example-node svelte-1vosa9g"),oe(F,"draggable",!0),He(F,"text-align","center"),He(F,"background","#e8f4ea"),oe(I,"class","agentSelectorNode example-node svelte-1vosa9g"),oe(I,"draggable",!0),He(I,"text-align","center"),He(I,"background","#f0e6e6"),oe(T,"class","nodes-column svelte-1vosa9g"),oe(H,"class","text-center font-medium"),oe(x,"class","vulnerabilitySelectorNode example-node svelte-1vosa9g"),oe(x,"draggable",!0),He(x,"text-align","center"),He(x,"background","#f9d999"),oe(X,"class","conditionDefinitionNode example-node svelte-1vosa9g"),oe(X,"draggable",!0),He(X,"text-align","center"),He(X,"background","#ece6ff"),oe(L,"class","nodes-column svelte-1vosa9g"),oe(s,"class","nodes-container svelte-1vosa9g"),oe(r,"class","svelte-1vosa9g")},m(he,pe){A(he,r,pe),z(r,e),z(r,i),z(r,s),z(s,a),z(a,l),z(a,o),z(a,f),z(a,d),z(a,_),z(a,N),z(a,w),z(s,j),z(s,T),z(T,S),z(T,C),z(T,D),z(T,B),z(T,F),z(T,y),z(T,I),z(s,V),z(s,L),z(L,H),z(L,Y),z(L,x),z(L,Q),z(L,X),Ce||(Se=[Ae(f,"dragstart",n[1]),Ae(_,"dragstart",n[2]),Ae(w,"dragstart",n[3]),Ae(D,"dragstart",n[4]),Ae(F,"dragstart",n[5]),Ae(I,"dragstart",n[6]),Ae(x,"dragstart",n[7]),Ae(X,"dragstart",n[8])],Ce=!0)},p:Le,i:Le,o:Le,d(he){he&&g(r),Ce=!1,bt(Se)}}}function rm(n){const r=(f,c)=>{if(!f.dataTransfer)return null;f.dataTransfer.setData("application/svelteflow",c),f.dataTransfer.effectAllowed="move"};return[r,f=>r(f,"eventNode"),f=>r(f,"attackSelectorNode"),f=>r(f,"countermeasureSelectorNode"),f=>r(f,"artifactSelectorNode"),f=>r(f,"informationSelectorNode"),f=>r(f,"agentSelectorNode"),f=>r(f,"vulnerabilitySelectorNode"),f=>r(f,"conditionDefinitionNode")]}class nm extends Je{constructor(r){super(),Ze(this,r,rm,tm,Ye,{})}}function Po(n,r,e){const t=n.slice();return t[9]=r[e],t}function Uo(n){let r,e=n[9]["rdfs:label"]+"",t,i,s,a,l;function u(...f){return n[7](n[9],...f)}function o(...f){return n[8](n[9],...f)}return{c(){r=te("div"),t=q(e),i=ae(),this.h()},l(f){r=re(f,"DIV",{class:!0,title:!0,tabindex:!0,role:!0});var c=ye(r);t=M(c,e),i=se(c),c.forEach(g),this.h()},h(){oe(r,"class","select-technique"),oe(r,"title",s=n[9]["d3f:definition"]),oe(r,"tabindex","0"),oe(r,"role","button")},m(f,c){A(f,r,c),z(r,t),z(r,i),a||(l=[Ae(r,"click",Ot(is(u))),Ae(r,"keydown",Ot(o))],a=!0)},p(f,c){n=f,c&8&&e!==(e=n[9]["rdfs:label"]+"")&&de(t,e),c&8&&s!==(s=n[9]["d3f:definition"])&&oe(r,"title",s)},d(f){f&&g(r),a=!1,bt(l)}}}function im(n){let r,e=Ve(n[3]),t=[];for(let i=0;i<e.length;i+=1)t[i]=Uo(Po(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Oe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Oe()},m(i,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(i,s);A(i,r,s)},p(i,[s]){if(s&12){e=Ve(i[3]);let a;for(a=0;a<e.length;a+=1){const l=Po(i,e,a);t[a]?t[a].p(l,s):(t[a]=Uo(l),t[a].c(),t[a].m(r.parentNode,r))}for(;a<t.length;a+=1)t[a].d(1);t.length=e.length}},i:Le,o:Le,d(i){i&&g(r),Tt(t,i)}}}function am(n,r,e){let t,i=Le,s=()=>(i(),i=Wi(f,w=>e(5,t=w)),f),a,l=Le,u=()=>(l(),l=Wi(o,w=>e(6,a=w)),o);n.$$.on_destroy.push(()=>i()),n.$$.on_destroy.push(()=>l());let{list:o}=r;u();let{filter_value_store:f}=r;s();let{select_item:c}=r,{regex_search_keys:d=["rdfs:label","@id"]}=r,_=[];const m=(w,R)=>c(R,w),N=(w,R)=>Ji(R,c,w);return n.$$set=w=>{"list"in w&&u(e(0,o=w.list)),"filter_value_store"in w&&s(e(1,f=w.filter_value_store)),"select_item"in w&&e(2,c=w.select_item),"regex_search_keys"in w&&e(4,d=w.regex_search_keys)},n.$$.update=()=>{n.$$.dirty&112&&e(3,_=l_(a,t,d))},[o,f,c,_,d,t,a,m,N]}class sm extends Je{constructor(r){super(),Ze(this,r,am,im,Ye,{list:0,filter_value_store:1,select_item:2,regex_search_keys:4})}}function xo(n,r,e){const t=n.slice();return t[12]=r[e],t}function $o(n,r,e){const t=n.slice();return t[15]=r[e],t}function Vo(n){let r,e=Ve(n[12].children),t=[];for(let i=0;i<e.length;i+=1)t[i]=Ho($o(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Oe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Oe()},m(i,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(i,s);A(i,r,s)},p(i,s){if(s&20){e=Ve(i[12].children);let a;for(a=0;a<e.length;a+=1){const l=$o(i,e,a);t[a]?t[a].p(l,s):(t[a]=Ho(l),t[a].c(),t[a].m(r.parentNode,r))}for(;a<t.length;a+=1)t[a].d(1);t.length=e.length}},d(i){i&&g(r),Tt(t,i)}}}function Ho(n){let r,e=n[15]["rdfs:label"]+"",t,i,s,a,l;function u(...f){return n[10](n[15],...f)}function o(...f){return n[11](n[15],...f)}return{c(){r=te("div"),t=q(e),i=ae(),this.h()},l(f){r=re(f,"DIV",{class:!0,title:!0,tabindex:!0,role:!0});var c=ye(r);t=M(c,e),i=se(c),c.forEach(g),this.h()},h(){oe(r,"class","select-technique"),oe(r,"title",s=n[15]["d3f:definition"]),oe(r,"tabindex","0"),oe(r,"role","button")},m(f,c){A(f,r,c),z(r,t),z(r,i),a||(l=[Ae(r,"click",Ot(is(u))),Ae(r,"keydown",Ot(o))],a=!0)},p(f,c){n=f,c&16&&e!==(e=n[15]["rdfs:label"]+"")&&de(t,e),c&16&&s!==(s=n[15]["d3f:definition"])&&oe(r,"title",s)},d(f){f&&g(r),a=!1,bt(l)}}}function zo(n){let r,e,t=n[12]["rdfs:label"]+"",i,s,a,l,u,o,f,c=(n[3]===n[12]["@id"]||n[5])&&Vo(n);return{c(){r=te("details"),e=te("summary"),i=q(t),a=ae(),c&&c.c(),l=ae(),this.h()},l(d){r=re(d,"DETAILS",{});var _=ye(r);e=re(_,"SUMMARY",{id:!0});var m=ye(e);i=M(m,t),m.forEach(g),a=se(_),c&&c.l(_),l=se(_),_.forEach(g),this.h()},h(){oe(e,"id",s=n[12]["@id"]),r.open=u=n[3]===n[12]["@id"]||n[5]},m(d,_){A(d,r,_),z(r,e),z(e,i),z(r,a),c&&c.m(r,null),z(r,l),o||(f=Ae(e,"click",Ot(is(n[6]))),o=!0)},p(d,_){_&16&&t!==(t=d[12]["rdfs:label"]+"")&&de(i,t),_&16&&s!==(s=d[12]["@id"])&&oe(e,"id",s),d[3]===d[12]["@id"]||d[5]?c?c.p(d,_):(c=Vo(d),c.c(),c.m(r,l)):c&&(c.d(1),c=null),_&56&&u!==(u=d[3]===d[12]["@id"]||d[5])&&(r.open=u)},d(d){d&&g(r),c&&c.d(),o=!1,f()}}}function lm(n){let r,e=Ve(n[4]),t=[];for(let i=0;i<e.length;i+=1)t[i]=zo(xo(n,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();r=Oe()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);r=Oe()},m(i,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(i,s);A(i,r,s)},p(i,[s]){if(s&124){e=Ve(i[4]);let a;for(a=0;a<e.length;a+=1){const l=xo(i,e,a);t[a]?t[a].p(l,s):(t[a]=zo(l),t[a].c(),t[a].m(r.parentNode,r))}for(;a<t.length;a+=1)t[a].d(1);t.length=e.length}},i:Le,o:Le,d(i){i&&g(r),Tt(t,i)}}}function um(n,r,e){let t,i,s=Le,a=()=>(s(),s=Wi(c,T=>e(8,i=T)),c),l,u=Le,o=()=>(u(),u=Wi(f,T=>e(9,l=T)),f);n.$$.on_destroy.push(()=>s()),n.$$.on_destroy.push(()=>u());let{list:f}=r;o();let{filter_value_store:c}=r;a();let{select_item:d}=r,{regex_search_keys:_=["d3f:definition","rdfs:label","@id","d3f:d3fend-id"]}=r,m=null,N=[];function w(T){const{id:S}=T.target;m===S?e(3,m=null):e(3,m=S)}const R=(T,S)=>d(S,T),j=(T,S)=>Ji(S,d,T);return n.$$set=T=>{"list"in T&&o(e(0,f=T.list)),"filter_value_store"in T&&a(e(1,c=T.filter_value_store)),"select_item"in T&&e(2,d=T.select_item),"regex_search_keys"in T&&e(7,_=T.regex_search_keys)},n.$$.update=()=>{n.$$.dirty&896&&e(4,N=u_(l,i,_)),n.$$.dirty&256&&e(5,t=!!i)},[f,c,d,m,N,t,w,_,i,l,R,j]}class om extends Je{constructor(r){super(),Ze(this,r,um,lm,Ye,{list:0,filter_value_store:1,select_item:2,regex_search_keys:7})}}const fm=n=>({}),Xo=n=>({R:n[6],filter_value_store:n[4],select_item:n[9]});function Go(n){let r,e,t,i,s,a,l;const u=n[16].default,o=pt(u,n,n[15],Xo);return{c(){r=te("ul"),e=te("input"),t=ae(),o&&o.c(),this.h()},l(f){r=re(f,"UL",{class:!0});var c=ye(r);e=re(c,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0,class:!0}),t=se(c),o&&o.l(c),c.forEach(g),this.h()},h(){oe(e,"type","text"),oe(e,"id","filter"),oe(e,"name","filter"),oe(e,"placeholder","Filter / Save"),oe(e,"class","svelte-l8rt3j"),oe(r,"class","dropdown-menu svelte-l8rt3j")},m(f,c){A(f,r,c),z(r,e),z(r,t),o&&o.m(r,null),s=!0,a||(l=[_l(n_.call(null,e)),Ae(e,"click",Ot(n[17])),Ae(e,"keyup",Ot(n[18])),Ae(e,"keydown",Ot(n[19])),_l(i_.call(null,r)),Ae(r,"outsideclick",n[7])],a=!0)},p(f,c){o&&o.p&&(!s||c&32768)&&gt(o,u,f,f[15],s?vt(u,f[15],c,fm):mt(f[15]),Xo)},i(f){s||(ue(o,f),f&&Ha(()=>{s&&(i||(i=gl(r,Al,{delay:50,duration:200,axis:"y"},!0)),i.run(1))}),s=!0)},o(f){fe(o,f),f&&(i||(i=gl(r,Al,{delay:50,duration:200,axis:"y"},!1)),i.run(0)),s=!1},d(f){f&&g(r),o&&o.d(f),f&&i&&i.end(),a=!1,bt(l)}}}function cm(n){let r,e,t,i,s,a,l,u,o,f,c=n[2]&&Go(n);return{c(){r=te("div"),e=te("div"),t=te("div"),i=te("span"),s=q(n[1]),a=ae(),c&&c.c(),this.h()},l(d){r=re(d,"DIV",{class:!0,style:!0});var _=ye(r);e=re(_,"DIV",{class:!0,role:!0,tabindex:!0});var m=ye(e);t=re(m,"DIV",{class:!0});var N=ye(t);i=re(N,"SPAN",{class:!0});var w=ye(i);s=M(w,n[1]),w.forEach(g),N.forEach(g),a=se(m),c&&c.l(m),m.forEach(g),_.forEach(g),this.h()},h(){oe(i,"class","selected svelte-l8rt3j"),oe(t,"class","select autocomplete-dropdown svelte-l8rt3j"),oe(e,"class",l="dropdown "+(n[2]?"active":"")+" svelte-l8rt3j"),oe(e,"role","button"),oe(e,"tabindex","0"),oe(r,"class","container svelte-l8rt3j"),He(r,"--input-color",n[0])},m(d,_){A(d,r,_),z(r,e),z(e,t),z(t,i),z(i,s),z(e,a),c&&c.m(e,null),u=!0,o||(f=[Ae(e,"click",n[8]),Ae(e,"keydown",n[20])],o=!0)},p(d,[_]){(!u||_&2)&&de(s,d[1]),d[2]?c?(c.p(d,_),_&4&&ue(c,1)):(c=Go(d),c.c(),ue(c,1),c.m(e,null)):c&&(kt(),fe(c,1,1,()=>{c=null}),Et()),(!u||_&4&&l!==(l="dropdown "+(d[2]?"active":"")+" svelte-l8rt3j"))&&oe(e,"class",l),(!u||_&1)&&He(r,"--input-color",d[0])},i(d){u||(ue(c),u=!0)},o(d){fe(c),u=!1},d(d){d&&g(r),c&&c.d(),o=!1,bt(f)}}}function dm(n,r,e){let t,i,s,a,{$$slots:l={},$$scope:u}=r,{node_id:o}=r,{element_id:f}=r,{input_color:c}=r,{place_holder:d="< d3fend class >"}=r;const _=lr(!1);nt(n,_,b=>e(2,a=b));const m=lr(null);nt(n,m,b=>e(22,i=b));const N=Dr();nt(n,N,b=>e(23,s=b));const w={ItemTree:om,ItemList:sm};let R;function j(){kn(_,a=!1,a),kn(m,i="",i)}function T(b){a?j():kn(_,a=!0,a)}function S(b,y){let I=y["rdfs:label"];Array.isArray(y["rdfs:label"])&&(I=y["rdfs:label"][0]),s.forEach(k=>{k.id===o&&(k.data={...k.data,techniqueId:y["@id"],label:I})}),N.set(s),j()}function v(b){clearTimeout(R),R=setTimeout(()=>{kn(m,i=b.target.value,i)},300)}function C(b){const y=b.target.value;S(b,{"rdfs:label":y,"@id":y})}function D(b){ur.call(this,n,b)}const P=b=>v(b),B=b=>Ji(b,C),F=b=>Ji(b,T);return n.$$set=b=>{"node_id"in b&&e(12,o=b.node_id),"element_id"in b&&e(13,f=b.element_id),"input_color"in b&&e(0,c=b.input_color),"place_holder"in b&&e(14,d=b.place_holder),"$$scope"in b&&e(15,u=b.$$scope)},n.$$.update=()=>{n.$$.dirty&24576&&e(1,t=f||d)},[c,t,a,_,m,N,w,j,T,S,v,C,o,f,d,u,l,D,P,B,F]}class mi extends Je{constructor(r){super(),Ze(this,r,dm,cm,Ye,{node_id:12,element_id:13,input_color:0,place_holder:14})}}function hm(n){let r,e;return r=new n[6].ItemList({props:{list:uf,filter_value_store:n[7],select_item:n[8]}}),{c(){me(r.$$.fragment)},l(t){ve(r.$$.fragment,t)},m(t,i){be(r,t,i),e=!0},p(t,i){const s={};i&128&&(s.filter_value_store=t[7]),i&256&&(s.select_item=t[8]),r.$set(s)},i(t){e||(ue(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){we(r,t)}}}function _m(n){let r,e,t,i,s,a,l,u,o,f,c,d,_,m,N,w,R,j,T,S,v,C,D,P,B;return r=new ze({props:{type:"target",position:Xe.Top,id:"attackTopTarget",style:"background: #ffc3c7; border-width: 2px; border-color: red;",isConnectable:n[1]}}),t=new ze({props:{type:"source",position:Xe.Bottom,id:"attackBottomSource",style:"background: red; border-width: 2px; border-color: #ffc3c7;",isConnectable:n[1]}}),s=new ze({props:{type:"source",position:Xe.Right,id:"attackRightSource",style:"background: red; border-width: 2px; border-color:  #ffc3c7;",isConnectable:n[1]}}),o=new $r({props:{isVisible:n[2]}}),j=new mi({props:{node_id:n[3],element_id:n[0].techniqueId,input_color:"#ffc3c7",$$slots:{default:[hm,({R:F,filter_value_store:b,select_item:y})=>({6:F,7:b,8:y}),({R:F,filter_value_store:b,select_item:y})=>(F?64:0)|(b?128:0)|(y?256:0)]},$$scope:{ctx:n}}}),{c(){me(r.$$.fragment),e=ae(),me(t.$$.fragment),i=ae(),me(s.$$.fragment),a=ae(),l=te("div"),u=te("div"),me(o.$$.fragment),f=ae(),c=te("i"),d=q(`Attack Action
        `),_=te("input"),N=ae(),w=te("br"),R=ae(),me(j.$$.fragment),T=ae(),S=te("div"),v=te("input"),this.h()},l(F){ve(r.$$.fragment,F),e=se(F),ve(t.$$.fragment,F),i=se(F),ve(s.$$.fragment,F),a=se(F),l=re(F,"DIV",{class:!0});var b=ye(l);u=re(b,"DIV",{class:!0});var y=ye(u);ve(o.$$.fragment,y),f=se(y),c=re(y,"I",{});var I=ye(c);d=M(I,`Attack Action
        `),_=re(I,"INPUT",{class:!0,type:!0,style:!0}),I.forEach(g),N=se(y),w=re(y,"BR",{}),R=se(y),ve(j.$$.fragment,y),T=se(y),S=re(y,"DIV",{});var k=ye(S);v=re(k,"INPUT",{class:!0,type:!0,style:!0}),k.forEach(g),y.forEach(g),b.forEach(g),this.h()},h(){oe(_,"class","nodrag sequence"),oe(_,"type","text"),He(_,"background","#ffc3c7"),_.value=m=n[0].sequence||"#",oe(v,"class","nodrag"),oe(v,"type","text"),He(v,"text-align","center"),He(v,"background","#ffc3c7"),He(v,"font-weight","bold"),v.value=C=n[0].label||" < label >",oe(u,"class","attack-node node-inner svelte-pkj1to"),oe(l,"class","attack-node node svelte-pkj1to")},m(F,b){be(r,F,b),A(F,e,b),be(t,F,b),A(F,i,b),be(s,F,b),A(F,a,b),A(F,l,b),z(l,u),be(o,u,null),z(u,f),z(u,c),z(c,d),z(c,_),z(u,N),z(u,w),z(u,R),be(j,u,null),z(u,T),z(u,S),z(S,v),D=!0,P||(B=[Ae(_,"input",n[4]),Ae(v,"input",n[5])],P=!0)},p(F,[b]){const y={};b&2&&(y.isConnectable=F[1]),r.$set(y);const I={};b&2&&(I.isConnectable=F[1]),t.$set(I);const k={};b&2&&(k.isConnectable=F[1]),s.$set(k);const V={};b&4&&(V.isVisible=F[2]),o.$set(V),(!D||b&1&&m!==(m=F[0].sequence||"#")&&_.value!==m)&&(_.value=m);const L={};b&8&&(L.node_id=F[3]),b&1&&(L.element_id=F[0].techniqueId),b&896&&(L.$$scope={dirty:b,ctx:F}),j.$set(L),(!D||b&1&&C!==(C=F[0].label||" < label >")&&v.value!==C)&&(v.value=C)},i(F){D||(ue(r.$$.fragment,F),ue(t.$$.fragment,F),ue(s.$$.fragment,F),ue(o.$$.fragment,F),ue(j.$$.fragment,F),D=!0)},o(F){fe(r.$$.fragment,F),fe(t.$$.fragment,F),fe(s.$$.fragment,F),fe(o.$$.fragment,F),fe(j.$$.fragment,F),D=!1},d(F){F&&(g(e),g(i),g(a),g(l)),we(r,F),we(t,F),we(s,F),we(o),we(j),P=!1,bt(B)}}}function pm(n,r,e){let{data:t}=r,{isConnectable:i}=r,{selected:s=void 0}=r,{id:a}=r;const l=o=>{e(0,t.sequence=o.currentTarget.value,t)},u=o=>{e(0,t.label=o.currentTarget.value,t)};return n.$$set=o=>{"data"in o&&e(0,t=o.data),"isConnectable"in o&&e(1,i=o.isConnectable),"selected"in o&&e(2,s=o.selected),"id"in o&&e(3,a=o.id)},[t,i,s,a,l,u]}class gm extends Je{constructor(r){super(),Ze(this,r,pm,_m,Ye,{data:0,isConnectable:1,selected:2,id:3})}}function mm(n){let r,e;return r=new n[5].ItemList({props:{list:ff,filter_value_store:n[6],select_item:n[7]}}),{c(){me(r.$$.fragment)},l(t){ve(r.$$.fragment,t)},m(t,i){be(r,t,i),e=!0},p(t,i){const s={};i&64&&(s.filter_value_store=t[6]),i&128&&(s.select_item=t[7]),r.$set(s)},i(t){e||(ue(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){we(r,t)}}}function vm(n){let r,e,t,i,s,a,l,u,o,f="Vulnerability",c,d,_,m,N,w,R,j,T,S,v,C;return r=new ze({props:{type:"target",position:Xe.Left,id:"attackLeftTarget",style:"top: 50%; background: #ffc3c7; border-color: red;",isConnectable:n[1]}}),t=new ze({props:{type:"source",position:Xe.Right,id:"vulnerabilityRightSource",style:"top: 50%; background: orange; border-width: 2px; border-color: #f9d999;",isConnectable:n[1]}}),l=new $r({props:{isVisible:n[2]}}),N=new mi({props:{node_id:n[3],element_id:n[0].techniqueId,input_color:"#f9d999",place_holder:"< weakness >",$$slots:{default:[mm,({R:D,filter_value_store:P,select_item:B})=>({5:D,6:P,7:B}),({R:D,filter_value_store:P,select_item:B})=>(D?32:0)|(P?64:0)|(B?128:0)]},$$scope:{ctx:n}}}),{c(){me(r.$$.fragment),e=ae(),me(t.$$.fragment),i=ae(),s=te("div"),a=te("div"),me(l.$$.fragment),u=ae(),o=te("i"),o.textContent=f,c=ae(),d=te("br"),_=ae(),m=te("div"),me(N.$$.fragment),w=ae(),R=te("div"),j=te("input"),this.h()},l(D){ve(r.$$.fragment,D),e=se(D),ve(t.$$.fragment,D),i=se(D),s=re(D,"DIV",{class:!0});var P=ye(s);a=re(P,"DIV",{class:!0});var B=ye(a);ve(l.$$.fragment,B),u=se(B),o=re(B,"I",{"data-svelte-h":!0}),Ue(o)!=="svelte-qgxj0w"&&(o.textContent=f),c=se(B),d=re(B,"BR",{}),_=se(B),m=re(B,"DIV",{});var F=ye(m);ve(N.$$.fragment,F),F.forEach(g),w=se(B),R=re(B,"DIV",{});var b=ye(R);j=re(b,"INPUT",{class:!0,type:!0,style:!0}),b.forEach(g),B.forEach(g),P.forEach(g),this.h()},h(){oe(j,"class","nodrag label"),oe(j,"type","text"),He(j,"background","#f9d999"),j.value=T=n[0].label||"< label >",oe(a,"class","vulnerability node-inner svelte-17a4qd7"),oe(s,"class","vulnerability node svelte-17a4qd7")},m(D,P){be(r,D,P),A(D,e,P),be(t,D,P),A(D,i,P),A(D,s,P),z(s,a),be(l,a,null),z(a,u),z(a,o),z(a,c),z(a,d),z(a,_),z(a,m),be(N,m,null),z(a,w),z(a,R),z(R,j),S=!0,v||(C=Ae(j,"input",n[4]),v=!0)},p(D,[P]){const B={};P&2&&(B.isConnectable=D[1]),r.$set(B);const F={};P&2&&(F.isConnectable=D[1]),t.$set(F);const b={};P&4&&(b.isVisible=D[2]),l.$set(b);const y={};P&8&&(y.node_id=D[3]),P&1&&(y.element_id=D[0].techniqueId),P&448&&(y.$$scope={dirty:P,ctx:D}),N.$set(y),(!S||P&1&&T!==(T=D[0].label||"< label >")&&j.value!==T)&&(j.value=T)},i(D){S||(ue(r.$$.fragment,D),ue(t.$$.fragment,D),ue(l.$$.fragment,D),ue(N.$$.fragment,D),S=!0)},o(D){fe(r.$$.fragment,D),fe(t.$$.fragment,D),fe(l.$$.fragment,D),fe(N.$$.fragment,D),S=!1},d(D){D&&(g(e),g(i),g(s)),we(r,D),we(t,D),we(l),we(N),v=!1,C()}}}function bm(n,r,e){let{data:t}=r,{isConnectable:i}=r,{selected:s=void 0}=r,{id:a}=r;const l=u=>{e(0,t.label=u.currentTarget.value,t)};return n.$$set=u=>{"data"in u&&e(0,t=u.data),"isConnectable"in u&&e(1,i=u.isConnectable),"selected"in u&&e(2,s=u.selected),"id"in u&&e(3,a=u.id)},[t,i,s,a,l]}class wm extends Je{constructor(r){super(),Ze(this,r,bm,vm,Ye,{data:0,isConnectable:1,selected:2,id:3})}}function ym(n){let r,e;return r=new n[5].ItemList({props:{list:lf,filter_value_store:n[6],select_item:n[7]}}),{c(){me(r.$$.fragment)},l(t){ve(r.$$.fragment,t)},m(t,i){be(r,t,i),e=!0},p(t,i){const s={};i&64&&(s.filter_value_store=t[6]),i&128&&(s.select_item=t[7]),r.$set(s)},i(t){e||(ue(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){we(r,t)}}}function Dm(n){let r,e,t,i,s,a,l,u,o,f,c,d,_,m,N,w,R,j="Artifact",T,S,v,C,D,P,B,F,b,y,I;return r=new ze({props:{type:"target",position:Xe.Left,id:"attackLeftTarget",style:"top: 20%; background: #ffc3c7; border-width: 2px; border-color: red;",isConnectable:n[1]}}),t=new ze({props:{type:"target",position:Xe.Right,id:"defenseRightTarget",style:"top: 20%; background: #8ac3ff; border-width: 2px; border-color: #062f4f;",isConnectable:n[1]}}),s=new ze({props:{type:"target",position:Xe.Left,id:"vulnerabilityLeftTarget",style:"top: 50%; border-color: orange; border-width: 2px; background: #f9d999;",isConnectable:n[1]}}),l=new ze({props:{type:"target",position:Xe.Top,id:"artTopTarget",style:"background: #fff4dd; border-width: 2px; border-color: #ffdb91;",isConnectable:n[1]}}),o=new ze({props:{type:"target",position:Xe.Left,id:"artLeftTarget",style:"top: 80%; background: #fff4dd; border-width: 2px; border-color: #ffdb91;",isConnectable:n[1]}}),c=new ze({props:{type:"source",position:Xe.Bottom,id:"artBottomSource",style:"border-color: #fff4dd; border-width: 2px; background: #ffdb91;",isConnectable:n[1]}}),_=new ze({props:{type:"source",position:Xe.Right,id:"artRightSource",style:"top: 80%; border-color: #fff4dd; border-width: 2px; background: #ffdb91;",isConnectable:n[1]}}),v=new $r({props:{isVisible:n[2]}}),D=new mi({props:{node_id:n[3],element_id:n[0].techniqueId,input_color:"#fff4dd",$$slots:{default:[ym,({R:k,filter_value_store:V,select_item:L})=>({5:k,6:V,7:L}),({R:k,filter_value_store:V,select_item:L})=>(k?32:0)|(V?64:0)|(L?128:0)]},$$scope:{ctx:n}}}),{c(){me(r.$$.fragment),e=ae(),me(t.$$.fragment),i=ae(),me(s.$$.fragment),a=ae(),me(l.$$.fragment),u=ae(),me(o.$$.fragment),f=ae(),me(c.$$.fragment),d=ae(),me(_.$$.fragment),m=ae(),N=te("div"),w=te("div"),R=te("i"),R.textContent=j,T=te("br"),S=ae(),me(v.$$.fragment),C=ae(),me(D.$$.fragment),P=ae(),B=te("input"),this.h()},l(k){ve(r.$$.fragment,k),e=se(k),ve(t.$$.fragment,k),i=se(k),ve(s.$$.fragment,k),a=se(k),ve(l.$$.fragment,k),u=se(k),ve(o.$$.fragment,k),f=se(k),ve(c.$$.fragment,k),d=se(k),ve(_.$$.fragment,k),m=se(k),N=re(k,"DIV",{class:!0});var V=ye(N);w=re(V,"DIV",{class:!0});var L=ye(w);R=re(L,"I",{"data-svelte-h":!0}),Ue(R)!=="svelte-148na2y"&&(R.textContent=j),T=re(L,"BR",{}),S=se(L),ve(v.$$.fragment,L),C=se(L),ve(D.$$.fragment,L),P=se(L),B=re(L,"INPUT",{class:!0,type:!0,style:!0}),L.forEach(g),V.forEach(g),this.h()},h(){oe(B,"class","nodrag label"),oe(B,"type","text"),He(B,"background","#fff4dd"),B.value=F=n[0].label||"< label >",oe(w,"class","node-inner"),oe(N,"class","artifact node svelte-1q2d78v")},m(k,V){be(r,k,V),A(k,e,V),be(t,k,V),A(k,i,V),be(s,k,V),A(k,a,V),be(l,k,V),A(k,u,V),be(o,k,V),A(k,f,V),be(c,k,V),A(k,d,V),be(_,k,V),A(k,m,V),A(k,N,V),z(N,w),z(w,R),z(w,T),z(w,S),be(v,w,null),z(w,C),be(D,w,null),z(w,P),z(w,B),b=!0,y||(I=Ae(B,"input",n[4]),y=!0)},p(k,[V]){const L={};V&2&&(L.isConnectable=k[1]),r.$set(L);const H={};V&2&&(H.isConnectable=k[1]),t.$set(H);const le={};V&2&&(le.isConnectable=k[1]),s.$set(le);const Y={};V&2&&(Y.isConnectable=k[1]),l.$set(Y);const x={};V&2&&(x.isConnectable=k[1]),o.$set(x);const U={};V&2&&(U.isConnectable=k[1]),c.$set(U);const Q={};V&2&&(Q.isConnectable=k[1]),_.$set(Q);const X={};V&4&&(X.isVisible=k[2]),v.$set(X);const ee={};V&8&&(ee.node_id=k[3]),V&1&&(ee.element_id=k[0].techniqueId),V&448&&(ee.$$scope={dirty:V,ctx:k}),D.$set(ee),(!b||V&1&&F!==(F=k[0].label||"< label >")&&B.value!==F)&&(B.value=F)},i(k){b||(ue(r.$$.fragment,k),ue(t.$$.fragment,k),ue(s.$$.fragment,k),ue(l.$$.fragment,k),ue(o.$$.fragment,k),ue(c.$$.fragment,k),ue(_.$$.fragment,k),ue(v.$$.fragment,k),ue(D.$$.fragment,k),b=!0)},o(k){fe(r.$$.fragment,k),fe(t.$$.fragment,k),fe(s.$$.fragment,k),fe(l.$$.fragment,k),fe(o.$$.fragment,k),fe(c.$$.fragment,k),fe(_.$$.fragment,k),fe(v.$$.fragment,k),fe(D.$$.fragment,k),b=!1},d(k){k&&(g(e),g(i),g(a),g(u),g(f),g(d),g(m),g(N)),we(r,k),we(t,k),we(s,k),we(l,k),we(o,k),we(c,k),we(_,k),we(v),we(D),y=!1,I()}}}function km(n,r,e){let{data:t}=r,{isConnectable:i}=r,{selected:s=void 0}=r,{id:a}=r;const l=u=>{e(0,t.label=u.currentTarget.value,t)};return n.$$set=u=>{"data"in u&&e(0,t=u.data),"isConnectable"in u&&e(1,i=u.isConnectable),"selected"in u&&e(2,s=u.selected),"id"in u&&e(3,a=u.id)},[t,i,s,a,l]}class Em extends Je{constructor(r){super(),Ze(this,r,km,Dm,Ye,{data:0,isConnectable:1,selected:2,id:3})}}function Am(n){let r,e;return r=new n[6].ItemTree({props:{list:sf,filter_value_store:n[7],select_item:n[8]}}),{c(){me(r.$$.fragment)},l(t){ve(r.$$.fragment,t)},m(t,i){be(r,t,i),e=!0},p(t,i){const s={};i&128&&(s.filter_value_store=t[7]),i&256&&(s.select_item=t[8]),r.$set(s)},i(t){e||(ue(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){we(r,t)}}}function Tm(n){let r,e,t,i,s,a,l,u,o,f,c,d="Defense Action",_,m,N,w,R,j,T,S,v,C,D,P,B,F,b;return r=new ze({props:{type:"target",position:Xe.Top,id:"defenseTopTarget",style:"border-color: blue; background: #d6eaff; border-width: 2px",isConnectable:n[1]}}),t=new ze({props:{type:"source",position:Xe.Left,id:"defenseLeftSource",style:"background: blue; border-color: #d6eaff; border-width: 2px",isConnectable:n[1]}}),s=new ze({props:{type:"source",position:Xe.Bottom,id:"defenseBottomSource",style:"background: blue; border-color: #d6eaff; border-width: 2px",isConnectable:n[1]}}),o=new $r({props:{isVisible:n[2]}}),S=new mi({props:{node_id:n[3],element_id:n[0].techniqueId,input_color:"#d6eaff",$$slots:{default:[Am,({R:y,filter_value_store:I,select_item:k})=>({6:y,7:I,8:k}),({R:y,filter_value_store:I,select_item:k})=>(y?64:0)|(I?128:0)|(k?256:0)]},$$scope:{ctx:n}}}),{c(){me(r.$$.fragment),e=ae(),me(t.$$.fragment),i=ae(),me(s.$$.fragment),a=ae(),l=te("div"),u=te("div"),me(o.$$.fragment),f=ae(),c=te("i"),c.textContent=d,_=ae(),m=te("input"),w=ae(),R=te("br"),j=ae(),T=te("div"),me(S.$$.fragment),v=ae(),C=te("div"),D=te("input"),this.h()},l(y){ve(r.$$.fragment,y),e=se(y),ve(t.$$.fragment,y),i=se(y),ve(s.$$.fragment,y),a=se(y),l=re(y,"DIV",{class:!0});var I=ye(l);u=re(I,"DIV",{class:!0});var k=ye(u);ve(o.$$.fragment,k),f=se(k),c=re(k,"I",{"data-svelte-h":!0}),Ue(c)!=="svelte-1x9m2lq"&&(c.textContent=d),_=se(k),m=re(k,"INPUT",{class:!0,type:!0,style:!0}),w=se(k),R=re(k,"BR",{}),j=se(k),T=re(k,"DIV",{});var V=ye(T);ve(S.$$.fragment,V),V.forEach(g),v=se(k),C=re(k,"DIV",{});var L=ye(C);D=re(L,"INPUT",{class:!0,type:!0,style:!0}),L.forEach(g),k.forEach(g),I.forEach(g),this.h()},h(){oe(m,"class","nodrag sequence"),oe(m,"type","text"),He(m,"background","#d6eaff"),m.value=N=n[0].sequence||"#",oe(D,"class","nodrag label"),oe(D,"type","text"),He(D,"background","#d6eaff"),D.value=P=n[0].label||"< label >",oe(u,"class","node-inner"),oe(l,"class","countermeasure node svelte-cdgs6j")},m(y,I){be(r,y,I),A(y,e,I),be(t,y,I),A(y,i,I),be(s,y,I),A(y,a,I),A(y,l,I),z(l,u),be(o,u,null),z(u,f),z(u,c),z(u,_),z(u,m),z(u,w),z(u,R),z(u,j),z(u,T),be(S,T,null),z(u,v),z(u,C),z(C,D),B=!0,F||(b=[Ae(m,"input",n[4]),Ae(D,"input",n[5])],F=!0)},p(y,[I]){const k={};I&2&&(k.isConnectable=y[1]),r.$set(k);const V={};I&2&&(V.isConnectable=y[1]),t.$set(V);const L={};I&2&&(L.isConnectable=y[1]),s.$set(L);const H={};I&4&&(H.isVisible=y[2]),o.$set(H),(!B||I&1&&N!==(N=y[0].sequence||"#")&&m.value!==N)&&(m.value=N);const le={};I&8&&(le.node_id=y[3]),I&1&&(le.element_id=y[0].techniqueId),I&896&&(le.$$scope={dirty:I,ctx:y}),S.$set(le),(!B||I&1&&P!==(P=y[0].label||"< label >")&&D.value!==P)&&(D.value=P)},i(y){B||(ue(r.$$.fragment,y),ue(t.$$.fragment,y),ue(s.$$.fragment,y),ue(o.$$.fragment,y),ue(S.$$.fragment,y),B=!0)},o(y){fe(r.$$.fragment,y),fe(t.$$.fragment,y),fe(s.$$.fragment,y),fe(o.$$.fragment,y),fe(S.$$.fragment,y),B=!1},d(y){y&&(g(e),g(i),g(a),g(l)),we(r,y),we(t,y),we(s,y),we(o),we(S),F=!1,bt(b)}}}function Cm(n,r,e){let{data:t}=r,{isConnectable:i}=r,{selected:s=void 0}=r,{id:a}=r;const l=o=>{e(0,t.sequence=o.currentTarget.value,t)},u=o=>{e(0,t.label=o.currentTarget.value,t)};return n.$$set=o=>{"data"in o&&e(0,t=o.data),"isConnectable"in o&&e(1,i=o.isConnectable),"selected"in o&&e(2,s=o.selected),"id"in o&&e(3,a=o.id)},[t,i,s,a,l,u]}class Nm extends Je{constructor(r){super(),Ze(this,r,Cm,Tm,Ye,{data:0,isConnectable:1,selected:2,id:3})}}function Sm(n){let r,e,t,i,s,a,l,u,o,f,c,d,_,m,N,w,R,j="Information",T,S,v,C,D,P,B,F,b;return r=new ze({props:{type:"target",position:Xe.Left,id:"attackLeftTarget",style:"top: 20%; background: #ffc3c7; border-width: 2px; border-color: red;",isConnectable:n[1]}}),t=new ze({props:{type:"target",position:Xe.Right,id:"defenseRightTarget",style:"top: 20%; background: #8ac3ff; border-width: 2px; border-color: #062f4f;",isConnectable:n[1]}}),s=new ze({props:{type:"target",position:Xe.Left,id:"vulnerabilityLeftTarget",style:"top: 50%; border-color: orange; border-width: 2px; background: #f9d999;",isConnectable:n[1]}}),l=new ze({props:{type:"target",position:Xe.Top,id:"artTopTarget",style:"background: #fff4dd; border-width: 2px; border-color: #ffdb91;",isConnectable:n[1]}}),o=new ze({props:{type:"target",position:Xe.Left,id:"artLeftTarget",style:"top: 80%; background: #fff4dd; border-width: 2px; border-color: #ffdb91;",isConnectable:n[1]}}),c=new ze({props:{type:"source",position:Xe.Bottom,id:"artBottomSource",style:"border-color: #fff4dd; border-width: 2px; background: #ffdb91;",isConnectable:n[1]}}),_=new ze({props:{type:"source",position:Xe.Right,id:"artRightSource",style:"top: 80%; border-color: #fff4dd; border-width: 2px; background: #ffdb91;",isConnectable:n[1]}}),v=new $r({props:{isVisible:n[2]}}),{c(){me(r.$$.fragment),e=ae(),me(t.$$.fragment),i=ae(),me(s.$$.fragment),a=ae(),me(l.$$.fragment),u=ae(),me(o.$$.fragment),f=ae(),me(c.$$.fragment),d=ae(),me(_.$$.fragment),m=ae(),N=te("div"),w=te("div"),R=te("i"),R.textContent=j,T=te("br"),S=ae(),me(v.$$.fragment),C=ae(),D=te("input"),this.h()},l(y){ve(r.$$.fragment,y),e=se(y),ve(t.$$.fragment,y),i=se(y),ve(s.$$.fragment,y),a=se(y),ve(l.$$.fragment,y),u=se(y),ve(o.$$.fragment,y),f=se(y),ve(c.$$.fragment,y),d=se(y),ve(_.$$.fragment,y),m=se(y),N=re(y,"DIV",{class:!0});var I=ye(N);w=re(I,"DIV",{class:!0});var k=ye(w);R=re(k,"I",{"data-svelte-h":!0}),Ue(R)!=="svelte-1ocpiyk"&&(R.textContent=j),T=re(k,"BR",{}),S=se(k),ve(v.$$.fragment,k),C=se(k),D=re(k,"INPUT",{class:!0,type:!0,style:!0}),k.forEach(g),I.forEach(g),this.h()},h(){oe(D,"class","nodrag label"),oe(D,"type","text"),He(D,"background","#e8f4ea"),D.value=P=n[0].label||"< label >",oe(w,"class","information node-inner svelte-1wgy9qw"),oe(N,"class","information node svelte-1wgy9qw")},m(y,I){be(r,y,I),A(y,e,I),be(t,y,I),A(y,i,I),be(s,y,I),A(y,a,I),be(l,y,I),A(y,u,I),be(o,y,I),A(y,f,I),be(c,y,I),A(y,d,I),be(_,y,I),A(y,m,I),A(y,N,I),z(N,w),z(w,R),z(w,T),z(w,S),be(v,w,null),z(w,C),z(w,D),B=!0,F||(b=Ae(D,"input",n[3]),F=!0)},p(y,[I]){const k={};I&2&&(k.isConnectable=y[1]),r.$set(k);const V={};I&2&&(V.isConnectable=y[1]),t.$set(V);const L={};I&2&&(L.isConnectable=y[1]),s.$set(L);const H={};I&2&&(H.isConnectable=y[1]),l.$set(H);const le={};I&2&&(le.isConnectable=y[1]),o.$set(le);const Y={};I&2&&(Y.isConnectable=y[1]),c.$set(Y);const x={};I&2&&(x.isConnectable=y[1]),_.$set(x);const U={};I&4&&(U.isVisible=y[2]),v.$set(U),(!B||I&1&&P!==(P=y[0].label||"< label >")&&D.value!==P)&&(D.value=P)},i(y){B||(ue(r.$$.fragment,y),ue(t.$$.fragment,y),ue(s.$$.fragment,y),ue(l.$$.fragment,y),ue(o.$$.fragment,y),ue(c.$$.fragment,y),ue(_.$$.fragment,y),ue(v.$$.fragment,y),B=!0)},o(y){fe(r.$$.fragment,y),fe(t.$$.fragment,y),fe(s.$$.fragment,y),fe(l.$$.fragment,y),fe(o.$$.fragment,y),fe(c.$$.fragment,y),fe(_.$$.fragment,y),fe(v.$$.fragment,y),B=!1},d(y){y&&(g(e),g(i),g(a),g(u),g(f),g(d),g(m),g(N)),we(r,y),we(t,y),we(s,y),we(l,y),we(o,y),we(c,y),we(_,y),we(v),F=!1,b()}}}function Rm(n,r,e){let{data:t}=r,{isConnectable:i}=r,{selected:s=void 0}=r;const a=l=>{e(0,t.label=l.currentTarget.value,t)};return n.$$set=l=>{"data"in l&&e(0,t=l.data),"isConnectable"in l&&e(1,i=l.isConnectable),"selected"in l&&e(2,s=l.selected)},[t,i,s,a]}class Im extends Je{constructor(r){super(),Ze(this,r,Rm,Sm,Ye,{data:0,isConnectable:1,selected:2})}}function Fm(n){let r,e,t,i,s,a,l,u,o,f,c,d,_,m,N,w,R,j="Condition",T,S,v,C,D,P,B;return r=new ze({props:{type:"target",position:Xe.Left,id:"attackLeftTarget",style:"top: 20%; background: #ffc3c7; border-width: 2px; border-color: red;",isConnectable:n[1]}}),t=new ze({props:{type:"target",position:Xe.Right,id:"defenseRightTarget",style:"top: 20%; background: #8ac3ff; border-width: 2px; border-color: #062f4f;",isConnectable:n[1]}}),s=new ze({props:{type:"target",position:Xe.Top,id:"artTopTarget",style:"background: #fff4dd; border-width: 2px; border-color: #ffdb91;",isConnectable:n[1]}}),l=new ze({props:{type:"target",position:Xe.Left,id:"artLeftTarget",style:"top: 80%; background: #fff4dd; border-width: 2px; border-color: #ffdb91;",isConnectable:n[1]}}),o=new ze({props:{type:"source",position:Xe.Bottom,id:"artBottomSource",style:"border-color: #fff4dd; border-width: 2px; background: #ffdb91;",isConnectable:n[1]}}),c=new ze({props:{type:"source",position:Xe.Right,id:"artRightSource",style:"top: 80%; border-color: #fff4dd; border-width: 2px; background: #ffdb91;",isConnectable:n[1]}}),N=new $r({props:{isVisible:n[2]}}),{c(){me(r.$$.fragment),e=ae(),me(t.$$.fragment),i=ae(),me(s.$$.fragment),a=ae(),me(l.$$.fragment),u=ae(),me(o.$$.fragment),f=ae(),me(c.$$.fragment),d=ae(),_=te("div"),m=te("div"),me(N.$$.fragment),w=ae(),R=te("i"),R.textContent=j,T=te("br"),S=ae(),v=te("input"),this.h()},l(F){ve(r.$$.fragment,F),e=se(F),ve(t.$$.fragment,F),i=se(F),ve(s.$$.fragment,F),a=se(F),ve(l.$$.fragment,F),u=se(F),ve(o.$$.fragment,F),f=se(F),ve(c.$$.fragment,F),d=se(F),_=re(F,"DIV",{class:!0});var b=ye(_);m=re(b,"DIV",{class:!0});var y=ye(m);ve(N.$$.fragment,y),w=se(y),R=re(y,"I",{"data-svelte-h":!0}),Ue(R)!=="svelte-26somz"&&(R.textContent=j),T=re(y,"BR",{}),S=se(y),v=re(y,"INPUT",{class:!0,type:!0,style:!0}),y.forEach(g),b.forEach(g),this.h()},h(){oe(v,"class","nodrag label"),oe(v,"type","text"),He(v,"background","#ece6ff"),v.value=C=n[0].label||"< label >",oe(m,"class","artifact node-inner svelte-1eh3b8a"),oe(_,"class","artifact node svelte-1eh3b8a")},m(F,b){be(r,F,b),A(F,e,b),be(t,F,b),A(F,i,b),be(s,F,b),A(F,a,b),be(l,F,b),A(F,u,b),be(o,F,b),A(F,f,b),be(c,F,b),A(F,d,b),A(F,_,b),z(_,m),be(N,m,null),z(m,w),z(m,R),z(m,T),z(m,S),z(m,v),D=!0,P||(B=Ae(v,"input",n[3]),P=!0)},p(F,[b]){const y={};b&2&&(y.isConnectable=F[1]),r.$set(y);const I={};b&2&&(I.isConnectable=F[1]),t.$set(I);const k={};b&2&&(k.isConnectable=F[1]),s.$set(k);const V={};b&2&&(V.isConnectable=F[1]),l.$set(V);const L={};b&2&&(L.isConnectable=F[1]),o.$set(L);const H={};b&2&&(H.isConnectable=F[1]),c.$set(H);const le={};b&4&&(le.isVisible=F[2]),N.$set(le),(!D||b&1&&C!==(C=F[0].label||"< label >")&&v.value!==C)&&(v.value=C)},i(F){D||(ue(r.$$.fragment,F),ue(t.$$.fragment,F),ue(s.$$.fragment,F),ue(l.$$.fragment,F),ue(o.$$.fragment,F),ue(c.$$.fragment,F),ue(N.$$.fragment,F),D=!0)},o(F){fe(r.$$.fragment,F),fe(t.$$.fragment,F),fe(s.$$.fragment,F),fe(l.$$.fragment,F),fe(o.$$.fragment,F),fe(c.$$.fragment,F),fe(N.$$.fragment,F),D=!1},d(F){F&&(g(e),g(i),g(a),g(u),g(f),g(d),g(_)),we(r,F),we(t,F),we(s,F),we(l,F),we(o,F),we(c,F),we(N),P=!1,B()}}}function Om(n,r,e){let{data:t}=r,{isConnectable:i}=r,{selected:s=void 0}=r;const a=l=>{e(0,t.label=l.currentTarget.value,t)};return n.$$set=l=>{"data"in l&&e(0,t=l.data),"isConnectable"in l&&e(1,i=l.isConnectable),"selected"in l&&e(2,s=l.selected)},[t,i,s,a]}class Lm extends Je{constructor(r){super(),Ze(this,r,Om,Fm,Ye,{data:0,isConnectable:1,selected:2})}}function Bm(n){let r,e,t,i,s,a,l,u,o,f,c,d,_,m,N,w,R,j="Agent",T,S,v,C,D,P,B,F,b;return r=new ze({props:{type:"target",position:Xe.Left,id:"attackLeftTarget",style:"top: 20%; background: #ffc3c7; border-width: 2px; border-color: red;",isConnectable:n[1]}}),t=new ze({props:{type:"target",position:Xe.Right,id:"defenseRightTarget",style:"top: 20%; background: #8ac3ff; border-width: 2px; border-color: #062f4f;",isConnectable:n[1]}}),s=new ze({props:{type:"target",position:Xe.Left,id:"vulnerabilityLeftTarget",style:"top: 50%; border-color: orange; border-width: 2px; background: #f9d999;",isConnectable:n[1]}}),l=new ze({props:{type:"target",position:Xe.Top,id:"artTopTarget",style:"background: #fff4dd; border-width: 2px; border-color: #ffdb91;",isConnectable:n[1]}}),o=new ze({props:{type:"target",position:Xe.Left,id:"artLeftTarget",style:"top: 80%; background: #fff4dd; border-width: 2px; border-color: #ffdb91;",isConnectable:n[1]}}),c=new ze({props:{type:"source",position:Xe.Bottom,id:"artBottomSource",style:"border-color: #fff4dd; border-width: 2px; background: #ffdb91;",isConnectable:n[1]}}),_=new ze({props:{type:"source",position:Xe.Right,id:"artRightSource",style:"top: 80%; border-color: #fff4dd; border-width: 2px; background: #ffdb91;",isConnectable:n[1]}}),v=new $r({props:{isVisible:n[2]}}),{c(){me(r.$$.fragment),e=ae(),me(t.$$.fragment),i=ae(),me(s.$$.fragment),a=ae(),me(l.$$.fragment),u=ae(),me(o.$$.fragment),f=ae(),me(c.$$.fragment),d=ae(),me(_.$$.fragment),m=ae(),N=te("div"),w=te("div"),R=te("i"),R.textContent=j,T=te("br"),S=ae(),me(v.$$.fragment),C=ae(),D=te("input"),this.h()},l(y){ve(r.$$.fragment,y),e=se(y),ve(t.$$.fragment,y),i=se(y),ve(s.$$.fragment,y),a=se(y),ve(l.$$.fragment,y),u=se(y),ve(o.$$.fragment,y),f=se(y),ve(c.$$.fragment,y),d=se(y),ve(_.$$.fragment,y),m=se(y),N=re(y,"DIV",{class:!0});var I=ye(N);w=re(I,"DIV",{class:!0});var k=ye(w);R=re(k,"I",{"data-svelte-h":!0}),Ue(R)!=="svelte-13s1fb"&&(R.textContent=j),T=re(k,"BR",{}),S=se(k),ve(v.$$.fragment,k),C=se(k),D=re(k,"INPUT",{class:!0,type:!0,style:!0}),k.forEach(g),I.forEach(g),this.h()},h(){oe(D,"class","nodrag label"),oe(D,"type","text"),He(D,"background","#f0e6e6"),D.value=P=n[0].label||"< label >",oe(w,"class","agent-inner node-inner"),oe(N,"class","agent node svelte-1oygiws")},m(y,I){be(r,y,I),A(y,e,I),be(t,y,I),A(y,i,I),be(s,y,I),A(y,a,I),be(l,y,I),A(y,u,I),be(o,y,I),A(y,f,I),be(c,y,I),A(y,d,I),be(_,y,I),A(y,m,I),A(y,N,I),z(N,w),z(w,R),z(w,T),z(w,S),be(v,w,null),z(w,C),z(w,D),B=!0,F||(b=Ae(D,"input",n[3]),F=!0)},p(y,[I]){const k={};I&2&&(k.isConnectable=y[1]),r.$set(k);const V={};I&2&&(V.isConnectable=y[1]),t.$set(V);const L={};I&2&&(L.isConnectable=y[1]),s.$set(L);const H={};I&2&&(H.isConnectable=y[1]),l.$set(H);const le={};I&2&&(le.isConnectable=y[1]),o.$set(le);const Y={};I&2&&(Y.isConnectable=y[1]),c.$set(Y);const x={};I&2&&(x.isConnectable=y[1]),_.$set(x);const U={};I&4&&(U.isVisible=y[2]),v.$set(U),(!B||I&1&&P!==(P=y[0].label||"< label >")&&D.value!==P)&&(D.value=P)},i(y){B||(ue(r.$$.fragment,y),ue(t.$$.fragment,y),ue(s.$$.fragment,y),ue(l.$$.fragment,y),ue(o.$$.fragment,y),ue(c.$$.fragment,y),ue(_.$$.fragment,y),ue(v.$$.fragment,y),B=!0)},o(y){fe(r.$$.fragment,y),fe(t.$$.fragment,y),fe(s.$$.fragment,y),fe(l.$$.fragment,y),fe(o.$$.fragment,y),fe(c.$$.fragment,y),fe(_.$$.fragment,y),fe(v.$$.fragment,y),B=!1},d(y){y&&(g(e),g(i),g(a),g(u),g(f),g(d),g(m),g(N)),we(r,y),we(t,y),we(s,y),we(l,y),we(o,y),we(c,y),we(_,y),we(v),F=!1,b()}}}function qm(n,r,e){let{data:t}=r,{isConnectable:i}=r,{selected:s=void 0}=r;const a=l=>{e(0,t.label=l.currentTarget.value,t)};return n.$$set=l=>{"data"in l&&e(0,t=l.data),"isConnectable"in l&&e(1,i=l.isConnectable),"selected"in l&&e(2,s=l.selected)},[t,i,s,a]}class Mm extends Je{constructor(r){super(),Ze(this,r,qm,Bm,Ye,{data:0,isConnectable:1,selected:2})}}function jm(n){let r,e;return r=new n[7].ItemTree({props:{list:of,filter_value_store:n[8],select_item:n[9]}}),{c(){me(r.$$.fragment)},l(t){ve(r.$$.fragment,t)},m(t,i){be(r,t,i),e=!0},p(t,i){const s={};i&256&&(s.filter_value_store=t[8]),i&512&&(s.select_item=t[9]),r.$set(s)},i(t){e||(ue(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){we(r,t)}}}function Pm(n){let r,e,t,i,s,a,l,u,o,f,c,d,_,m,N,w,R,j,T,S,v,C,D,P,B,F,b,y,I,k,V;return r=new ze({props:{type:"target",position:Xe.Left,id:"attackLeftTarget",style:"top: 20%; background: #ffc3c7; border-width: 2px; border-color: red;",isConnectable:n[1]}}),t=new ze({props:{type:"target",position:Xe.Right,id:"defenseRightTarget",style:"top: 20%; background: #8ac3ff; border-width: 2px; border-color: #062f4f;",isConnectable:n[1]}}),s=new ze({props:{type:"target",position:Xe.Left,id:"vulnerabilityLeftTarget",style:"top: 50%; border-color: orange; border-width: 2px; background: #f9d999;",isConnectable:n[1]}}),l=new ze({props:{type:"target",position:Xe.Top,id:"artTopTarget",style:"background: #fff4dd; border-width: 2px; border-color: #ffdb91;",isConnectable:n[1]}}),o=new ze({props:{type:"target",position:Xe.Left,id:"artLeftTarget",style:"top: 80%; background: #fff4dd; border-width: 2px; border-color: #ffdb91;",isConnectable:n[1]}}),c=new ze({props:{type:"source",position:Xe.Bottom,id:"artBottomSource",style:"border-color: #fff4dd; border-width: 2px; background: #ffdb91;",isConnectable:n[1]}}),_=new ze({props:{type:"source",position:Xe.Right,id:"artRightSource",style:"top: 80%; border-color: #fff4dd; border-width: 2px; background: #ffdb91;",isConnectable:n[1]}}),R=new $r({props:{isVisible:n[4]}}),B=new mi({props:{node_id:n[2],element_id:n[0].techniqueId,input_color:"white",$$slots:{default:[jm,({R:L,filter_value_store:H,select_item:le})=>({7:L,8:H,9:le}),({R:L,filter_value_store:H,select_item:le})=>(L?128:0)|(H?256:0)|(le?512:0)]},$$scope:{ctx:n}}}),{c(){me(r.$$.fragment),e=ae(),me(t.$$.fragment),i=ae(),me(s.$$.fragment),a=ae(),me(l.$$.fragment),u=ae(),me(o.$$.fragment),f=ae(),me(c.$$.fragment),d=ae(),me(_.$$.fragment),m=ae(),N=te("div"),w=te("div"),me(R.$$.fragment),j=ae(),T=te("i"),S=q(n[3]),v=te("br"),C=ae(),D=te("br"),P=ae(),me(B.$$.fragment),F=ae(),b=te("input"),this.h()},l(L){ve(r.$$.fragment,L),e=se(L),ve(t.$$.fragment,L),i=se(L),ve(s.$$.fragment,L),a=se(L),ve(l.$$.fragment,L),u=se(L),ve(o.$$.fragment,L),f=se(L),ve(c.$$.fragment,L),d=se(L),ve(_.$$.fragment,L),m=se(L),N=re(L,"DIV",{class:!0});var H=ye(N);w=re(H,"DIV",{class:!0});var le=ye(w);ve(R.$$.fragment,le),j=se(le),T=re(le,"I",{});var Y=ye(T);S=M(Y,n[3]),Y.forEach(g),v=re(le,"BR",{}),C=se(le),D=re(le,"BR",{}),P=se(le),ve(B.$$.fragment,le),F=se(le),b=re(le,"INPUT",{class:!0,type:!0,style:!0}),le.forEach(g),H.forEach(g),this.h()},h(){oe(b,"class","nodrag label"),oe(b,"type","text"),He(b,"background","white"),b.value=y=n[0].label||"< label >",oe(w,"class","event node-inner svelte-r7gabh"),oe(N,"class","event node svelte-r7gabh")},m(L,H){be(r,L,H),A(L,e,H),be(t,L,H),A(L,i,H),be(s,L,H),A(L,a,H),be(l,L,H),A(L,u,H),be(o,L,H),A(L,f,H),be(c,L,H),A(L,d,H),be(_,L,H),A(L,m,H),A(L,N,H),z(N,w),be(R,w,null),z(w,j),z(w,T),z(T,S),z(w,v),z(w,C),z(w,D),z(w,P),be(B,w,null),z(w,F),z(w,b),I=!0,k||(V=Ae(b,"input",n[6]),k=!0)},p(L,[H]){const le={};H&2&&(le.isConnectable=L[1]),r.$set(le);const Y={};H&2&&(Y.isConnectable=L[1]),t.$set(Y);const x={};H&2&&(x.isConnectable=L[1]),s.$set(x);const U={};H&2&&(U.isConnectable=L[1]),l.$set(U);const Q={};H&2&&(Q.isConnectable=L[1]),o.$set(Q);const X={};H&2&&(X.isConnectable=L[1]),c.$set(X);const ee={};H&2&&(ee.isConnectable=L[1]),_.$set(ee);const Ce={};H&16&&(Ce.isVisible=L[4]),R.$set(Ce),(!I||H&8)&&de(S,L[3]);const Se={};H&4&&(Se.node_id=L[2]),H&1&&(Se.element_id=L[0].techniqueId),H&1792&&(Se.$$scope={dirty:H,ctx:L}),B.$set(Se),(!I||H&1&&y!==(y=L[0].label||"< label >")&&b.value!==y)&&(b.value=y)},i(L){I||(ue(r.$$.fragment,L),ue(t.$$.fragment,L),ue(s.$$.fragment,L),ue(l.$$.fragment,L),ue(o.$$.fragment,L),ue(c.$$.fragment,L),ue(_.$$.fragment,L),ue(R.$$.fragment,L),ue(B.$$.fragment,L),I=!0)},o(L){fe(r.$$.fragment,L),fe(t.$$.fragment,L),fe(s.$$.fragment,L),fe(l.$$.fragment,L),fe(o.$$.fragment,L),fe(c.$$.fragment,L),fe(_.$$.fragment,L),fe(R.$$.fragment,L),fe(B.$$.fragment,L),I=!1},d(L){L&&(g(e),g(i),g(a),g(u),g(f),g(d),g(m),g(N)),we(r,L),we(t,L),we(s,L),we(l,L),we(o,L),we(c,L),we(_,L),we(R),we(B),k=!1,V()}}}function Um(n,r,e){let{data:t}=r,{isConnectable:i}=r,{id:s}=r,{nodeType:a="EventNode"}=r,{nodeTypeLabel:l="Event"}=r,{selected:u=void 0}=r;const o=f=>{e(0,t.label=f.currentTarget.value,t)};return n.$$set=f=>{"data"in f&&e(0,t=f.data),"isConnectable"in f&&e(1,i=f.isConnectable),"id"in f&&e(2,s=f.id),"nodeType"in f&&e(5,a=f.nodeType),"nodeTypeLabel"in f&&e(3,l=f.nodeTypeLabel),"selected"in f&&e(4,u=f.selected)},[t,i,s,l,u,a,o]}class xm extends Je{constructor(r){super(),Ze(this,r,Um,Pm,Ye,{data:0,isConnectable:1,id:2,nodeType:5,nodeTypeLabel:3,selected:4})}}function $m(n){let r,e,t,i=`translate(-50%, -50%) translate(${n[4]}px,${n[3]}px)`,s,a;return{c(){r=te("div"),e=te("input"),this.h()},l(l){r=re(l,"DIV",{class:!0});var u=ye(r);e=re(u,"INPUT",{class:!0,type:!0,style:!0}),u.forEach(g),this.h()},h(){oe(e,"class","nodrag nopan edge-label-text svelte-770c5k"),oe(e,"type","text"),He(e,"text-align","center"),He(e,"font-weight","bold"),e.value=t=n[0].label,oe(r,"class","edge-label-container svelte-770c5k"),He(r,"transform",i)},m(l,u){A(l,r,u),z(r,e),s||(a=Ae(e,"input",n[12]),s=!0)},p(l,u){u&1&&t!==(t=l[0].label)&&e.value!==t&&(e.value=t),u&24&&i!==(i=`translate(-50%, -50%) translate(${l[4]}px,${l[3]}px)`)&&He(r,"transform",i)},d(l){l&&g(r),s=!1,a()}}}function Vm(n){let r,e,t,i;return r=new Xh({props:{path:n[5],markerEnd:n[1],style:n[2]}}),t=new Gh({props:{$$slots:{default:[$m]},$$scope:{ctx:n}}}),{c(){me(r.$$.fragment),e=ae(),me(t.$$.fragment)},l(s){ve(r.$$.fragment,s),e=se(s),ve(t.$$.fragment,s)},m(s,a){be(r,s,a),A(s,e,a),be(t,s,a),i=!0},p(s,[a]){const l={};a&32&&(l.path=s[5]),a&2&&(l.markerEnd=s[1]),a&4&&(l.style=s[2]),r.$set(l);const u={};a&8217&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){i||(ue(r.$$.fragment,s),ue(t.$$.fragment,s),i=!0)},o(s){fe(r.$$.fragment,s),fe(t.$$.fragment,s),i=!1},d(s){s&&g(e),we(r,s),we(t,s)}}}function Hm(n,r,e){let t,i,s,{data:a}=r,{sourceX:l}=r,{sourceY:u}=r,{sourcePosition:o}=r,{targetX:f}=r,{targetY:c}=r,{targetPosition:d}=r,{markerEnd:_=as.ArrowClosed}=r,{style:m=void 0}=r;const N=w=>{e(0,a.label=w.currentTarget.value,a)};return n.$$set=w=>{"data"in w&&e(0,a=w.data),"sourceX"in w&&e(6,l=w.sourceX),"sourceY"in w&&e(7,u=w.sourceY),"sourcePosition"in w&&e(8,o=w.sourcePosition),"targetX"in w&&e(9,f=w.targetX),"targetY"in w&&e(10,c=w.targetY),"targetPosition"in w&&e(11,d=w.targetPosition),"markerEnd"in w&&e(1,_=w.markerEnd),"style"in w&&e(2,m=w.style)},n.$$.update=()=>{n.$$.dirty&4032&&e(5,[t,i,s]=Wh({sourceX:l,sourceY:u,sourcePosition:o,targetX:f,targetY:c,targetPosition:d}),t,(e(4,i),e(6,l),e(7,u),e(8,o),e(9,f),e(10,c),e(11,d)),(e(3,s),e(6,l),e(7,u),e(8,o),e(9,f),e(10,c),e(11,d)))},[a,_,m,s,i,t,l,u,o,f,c,d,N]}class zm extends Je{constructor(r){super(),Ze(this,r,Hm,Vm,Ye,{data:0,sourceX:6,sourceY:7,sourcePosition:8,targetX:9,targetY:10,targetPosition:11,markerEnd:1,style:2})}}function Wo(n,r,e){const t=n.slice();return t[7]=r[e],t}function Qo(n){let r,e=Ve(n[2]),t=[];for(let i=0;i<e.length;i+=1)t[i]=Yo(Wo(n,e,i));return{c(){r=te("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){r=re(i,"DIV",{class:!0});var s=ye(r);for(let a=0;a<t.length;a+=1)t[a].l(s);s.forEach(g),this.h()},h(){oe(r,"class","file-list svelte-9u10j")},m(i,s){A(i,r,s);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(r,null)},p(i,s){if(s&20){e=Ve(i[2]);let a;for(a=0;a<e.length;a+=1){const l=Wo(i,e,a);t[a]?t[a].p(l,s):(t[a]=Yo(l),t[a].c(),t[a].m(r,null))}for(;a<t.length;a+=1)t[a].d(1);t.length=e.length}},d(i){i&&g(r),Tt(t,i)}}}function Yo(n){let r,e=n[7].name+"",t,i,s=n[7].nodeCount+"",a,l,u=n[7].edgeCount+"",o,f,c,d;function _(){return n[5](n[7])}return{c(){r=te("div"),t=q(e),i=q(" ("),a=q(s),l=q(" nodes, "),o=q(u),f=q(` edges)
          `),this.h()},l(m){r=re(m,"DIV",{class:!0});var N=ye(r);t=M(N,e),i=M(N," ("),a=M(N,s),l=M(N," nodes, "),o=M(N,u),f=M(N,` edges)
          `),N.forEach(g),this.h()},h(){oe(r,"class","file-item svelte-9u10j")},m(m,N){A(m,r,N),z(r,t),z(r,i),z(r,a),z(r,l),z(r,o),z(r,f),c||(d=Ae(r,"click",_),c=!0)},p(m,N){n=m,N&4&&e!==(e=n[7].name+"")&&de(t,e),N&4&&s!==(s=n[7].nodeCount+"")&&de(a,s),N&4&&u!==(u=n[7].edgeCount+"")&&de(o,u)},d(m){m&&g(r),c=!1,d()}}}function Xm(n){let r,e,t,i,s,a,l=n[1]&&Qo(n);return{c(){r=te("div"),e=te("button"),t=q(n[0]),i=ae(),l&&l.c(),this.h()},l(u){r=re(u,"DIV",{class:!0});var o=ye(r);e=re(o,"BUTTON",{class:!0});var f=ye(e);t=M(f,n[0]),f.forEach(g),i=se(o),l&&l.l(o),o.forEach(g),this.h()},h(){oe(e,"class","svelte-9u10j"),oe(r,"class","pick-list-container svelte-9u10j")},m(u,o){A(u,r,o),z(r,e),z(e,t),z(r,i),l&&l.m(r,null),s||(a=Ae(e,"click",n[3]),s=!0)},p(u,[o]){o&1&&de(t,u[0]),u[1]?l?l.p(u,o):(l=Qo(u),l.c(),l.m(r,null)):l&&(l.d(1),l=null)},i:Le,o:Le,d(u){u&&g(r),l&&l.d(),s=!1,a()}}}async function Gm(){return await(await fetch("/cad/examples.json")).json()}function Wm(n,r,e){const t=ns();let i=!1,{selectedFile:s="Example Graphs"}=r,a=[];function l(){e(1,i=!i)}function u(f){e(0,s=f),e(1,i=!1),t("fileSelected",f)}aa(async()=>{e(2,a=await Gm())});const o=f=>u(f.name);return n.$$set=f=>{"selectedFile"in f&&e(0,s=f.selectedFile)},[s,i,a,l,u,o]}class Qm extends Je{constructor(r){super(),Ze(this,r,Wm,Xm,Ye,{selectedFile:0})}}function Ym(n){let r,e='This is an (very) alpha-level preview release. Please review and file bugs <a href="https://github.com/d3fend/d3fend/issues/14">here.</a>';return{c(){r=te("div"),r.innerHTML=e,this.h()},l(t){r=re(t,"DIV",{class:!0,"data-svelte-h":!0}),Ue(r)!=="svelte-p14f9f"&&(r.innerHTML=e),this.h()},h(){oe(r,"class","font-medium")},m(t,i){A(t,r,i)},p:Le,d(t){t&&g(r)}}}function Jm(n){let r;return{c(){r=q("Please only load models from URLs you trust!")},l(e){r=M(e,"Please only load models from URLs you trust!")},m(e,t){A(e,r,t)},d(e){e&&g(r)}}}function Zm(n){let r,e,t,i,s,a,l,u,o,f,c;return f=new sa({props:{$$slots:{default:[Jm]},$$scope:{ctx:n}}}),{c(){r=te("br"),e=ae(),t=te("code"),i=q(n[4]),s=ae(),a=te("br"),l=ae(),u=te("br"),o=ae(),me(f.$$.fragment),this.h()},l(d){r=re(d,"BR",{}),e=se(d),t=re(d,"CODE",{class:!0});var _=ye(t);i=M(_,n[4]),_.forEach(g),s=se(d),a=re(d,"BR",{}),l=se(d),u=re(d,"BR",{}),o=se(d),ve(f.$$.fragment,d),this.h()},h(){oe(t,"class","center text-center")},m(d,_){A(d,r,_),A(d,e,_),A(d,t,_),z(t,i),A(d,s,_),A(d,a,_),A(d,l,_),A(d,u,_),A(d,o,_),be(f,d,_),c=!0},p(d,_){(!c||_[0]&16)&&de(i,d[4]);const m={};_[1]&2097152&&(m.$$scope={dirty:_,ctx:d}),f.$set(m)},i(d){c||(ue(f.$$.fragment,d),c=!0)},o(d){fe(f.$$.fragment,d),c=!1},d(d){d&&(g(r),g(e),g(t),g(s),g(a),g(l),g(u),g(o)),we(f,d)}}}function Km(n){let r;return{c(){r=q("Please only load models from URLs you trust!")},l(e){r=M(e,"Please only load models from URLs you trust!")},m(e,t){A(e,r,t)},d(e){e&&g(r)}}}function ev(n){let r,e,t,i,s,a;return s=new sa({props:{$$slots:{default:[Km]},$$scope:{ctx:n}}}),{c(){r=te("br"),e=ae(),t=te("br"),i=ae(),me(s.$$.fragment)},l(l){r=re(l,"BR",{}),e=se(l),t=re(l,"BR",{}),i=se(l),ve(s.$$.fragment,l)},m(l,u){A(l,r,u),A(l,e,u),A(l,t,u),A(l,i,u),be(s,l,u),a=!0},p(l,u){const o={};u[1]&2097152&&(o.$$scope={dirty:u,ctx:l}),s.$set(o)},i(l){a||(ue(s.$$.fragment,l),a=!0)},o(l){fe(s.$$.fragment,l),a=!1},d(l){l&&(g(r),g(e),g(t),g(i)),we(s,l)}}}function Jo(n){let r,e,t,i;return r=new sa({props:{alert_type:"warning",$$slots:{default:[tv]},$$scope:{ctx:n}}}),{c(){me(r.$$.fragment),e=ae(),t=te("br")},l(s){ve(r.$$.fragment,s),e=se(s),t=re(s,"BR",{})},m(s,a){be(r,s,a),A(s,e,a),A(s,t,a),i=!0},i(s){i||(ue(r.$$.fragment,s),i=!0)},o(s){fe(r.$$.fragment,s),i=!1},d(s){s&&(g(e),g(t)),we(r,s)}}}function tv(n){let r;return{c(){r=q("Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},l(e){r=M(e,"Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},m(e,t){A(e,r,t)},d(e){e&&g(r)}}}function rv(n){let r,e,t,i,s=n[12].length+"",a,l,u,o,f,c,d,_,m,N,w="copy",R,j,T,S=n[12].length>2048&&Jo(n);return{c(){S&&S.c(),r=ae(),e=te("div"),t=te("code"),i=q("The encoded model has a string length of "),a=q(s),l=q(" characters."),u=ae(),o=te("p"),f=te("button"),c=te("a"),d=q("Share URL"),_=ae(),m=te("span"),N=te("button"),N.textContent=w,this.h()},l(v){S&&S.l(v),r=se(v),e=re(v,"DIV",{});var C=ye(e);t=re(C,"CODE",{});var D=ye(t);i=M(D,"The encoded model has a string length of "),a=M(D,s),l=M(D," characters."),D.forEach(g),C.forEach(g),u=se(v),o=re(v,"P",{});var P=ye(o);f=re(P,"BUTTON",{class:!0});var B=ye(f);c=re(B,"A",{href:!0});var F=ye(c);d=M(F,"Share URL"),F.forEach(g),B.forEach(g),_=se(P),m=re(P,"SPAN",{});var b=ye(m);N=re(b,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(N)!=="svelte-1uua65l"&&(N.textContent=w),b.forEach(g),P.forEach(g),this.h()},h(){oe(c,"href",n[13]),oe(f,"class","svelte-b7nkdi"),oe(N,"class","svelte-b7nkdi")},m(v,C){S&&S.m(v,C),A(v,r,C),A(v,e,C),z(e,t),z(t,i),z(t,a),z(t,l),A(v,u,C),A(v,o,C),z(o,f),z(f,c),z(c,d),z(o,_),z(o,m),z(m,N),R=!0,j||(T=Ae(N,"click",n[32]),j=!0)},p(v,C){v[12].length>2048?S?C[0]&4096&&ue(S,1):(S=Jo(v),S.c(),ue(S,1),S.m(r.parentNode,r)):S&&(kt(),fe(S,1,1,()=>{S=null}),Et()),(!R||C[0]&4096)&&s!==(s=v[12].length+"")&&de(a,s),(!R||C[0]&8192)&&oe(c,"href",v[13])},i(v){R||(ue(S),R=!0)},o(v){fe(S),R=!1},d(v){v&&(g(r),g(e),g(u),g(o)),S&&S.d(v),j=!1,T()}}}function Zo(n){let r,e,t,i,s,a,l;return t=new a_({props:{display:"inline"}}),{c(){r=te("span"),e=te("span"),me(t.$$.fragment),i=ae(),s=te("span"),a=q(n[14]),this.h()},l(u){r=re(u,"SPAN",{class:!0});var o=ye(r);e=re(o,"SPAN",{});var f=ye(e);ve(t.$$.fragment,f),f.forEach(g),i=se(o),s=re(o,"SPAN",{});var c=ye(s);a=M(c,n[14]),c.forEach(g),o.forEach(g),this.h()},h(){oe(r,"class","right")},m(u,o){A(u,r,o),z(r,e),be(t,e,null),z(r,i),z(r,s),z(s,a),l=!0},p(u,o){(!l||o[0]&16384)&&de(a,u[14])},i(u){l||(ue(t.$$.fragment,u),l=!0)},o(u){fe(t.$$.fragment,u),l=!1},d(u){u&&g(r),we(t)}}}function Ko(n){let r,e;return r=new X2({props:{id:n[8].id,top:n[8].top,left:n[8].left,right:n[8].right,bottom:n[8].bottom}}),{c(){me(r.$$.fragment)},l(t){ve(r.$$.fragment,t)},m(t,i){be(r,t,i),e=!0},p(t,i){const s={};i[0]&256&&(s.id=t[8].id),i[0]&256&&(s.top=t[8].top),i[0]&256&&(s.left=t[8].left),i[0]&256&&(s.right=t[8].right),i[0]&256&&(s.bottom=t[8].bottom),r.$set(s)},i(t){e||(ue(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){we(r,t)}}}function nv(n){let r,e,t,i,s,a,l;r=new Yh({props:{position:"top-left"}}),t=new Jh({props:{variant:Zh.Dots}});let u=n[8]&&Ko(n);return a=new Kh({props:{position:"top-right"}}),{c(){me(r.$$.fragment),e=ae(),me(t.$$.fragment),i=ae(),u&&u.c(),s=ae(),me(a.$$.fragment)},l(o){ve(r.$$.fragment,o),e=se(o),ve(t.$$.fragment,o),i=se(o),u&&u.l(o),s=se(o),ve(a.$$.fragment,o)},m(o,f){be(r,o,f),A(o,e,f),be(t,o,f),A(o,i,f),u&&u.m(o,f),A(o,s,f),be(a,o,f),l=!0},p(o,f){o[8]?u?(u.p(o,f),f[0]&256&&ue(u,1)):(u=Ko(o),u.c(),ue(u,1),u.m(s.parentNode,s)):u&&(kt(),fe(u,1,1,()=>{u=null}),Et())},i(o){l||(ue(r.$$.fragment,o),ue(t.$$.fragment,o),ue(u),ue(a.$$.fragment,o),l=!0)},o(o){fe(r.$$.fragment,o),fe(t.$$.fragment,o),fe(u),fe(a.$$.fragment,o),l=!1},d(o){o&&(g(e),g(i),g(s)),we(r,o),we(t,o),u&&u.d(o),we(a,o)}}}function iv(n){let r,e,t,i,s,a,l,u,o,f,c,d,_,m,N,w,R,j="Load",T,S,v="Merge",C,D,P="Clear",B,F,b="Save",y,I,k,V="Save As...",L,H="Save As JSON...",le,Y="Save As Turtle...",x,U,Q="Share",X,ee,Ce,Se,he,pe,ie,De,Pe,et,Be,Z,_e;function Te(Ne){n[30](Ne)}let xe={title:n[2].title,content:n[2].content,options:n[2].options,$$slots:{default:[Zm]},$$scope:{ctx:n}};n[2].is_open!==void 0&&(xe.is_open=n[2].is_open),r=new Bo({props:xe}),_t.push(()=>Xt(r,"is_open",Te)),r.$on("optionSelected",n[15]);function je(Ne){n[31](Ne)}let $e={title:n[3].title,content:n[3].content,options:n[3].options,$$slots:{default:[ev]},$$scope:{ctx:n}};n[3].is_open!==void 0&&($e.is_open=n[3].is_open),i=new Bo({props:$e}),_t.push(()=>Xt(i,"is_open",je)),i.$on("optionSelected",n[16]);function Ke(Ne){n[33](Ne)}let jt={title:"Share this model with a URL",$$slots:{default:[rv]},$$scope:{ctx:n}};n[11]!==void 0&&(jt.is_open=n[11]),l=new J2({props:jt}),_t.push(()=>Xt(l,"is_open",Ke));function Pt(Ne){n[34](Ne)}let nr={};n[7]!==void 0&&(nr.selectedFile=n[7]),c=new Qm({props:nr}),_t.push(()=>Xt(c,"selectedFile",Pt)),c.$on("fileSelected",n[25]);let st=n[14]&&Zo(n);return ie=new Qh({props:{nodes:Cn,nodeTypes:n[0],edges:si,edgeTypes:n[1],fitView:!0,defaultEdgeOptions:n[17],$$slots:{default:[nv]},$$scope:{ctx:n}}}),ie.$on("dragover",n[22]),ie.$on("drop",n[24]),ie.$on("connect",n[23]),ie.$on("nodecontextmenu",n[27]),ie.$on("paneclick",n[28]),ie.$on("onedgecreate",sv),Pe=new nm({}),{c(){me(r.$$.fragment),t=ae(),me(i.$$.fragment),a=ae(),me(l.$$.fragment),o=ae(),f=te("div"),me(c.$$.fragment),_=ae(),m=te("br"),N=ae(),w=te("div"),R=te("button"),R.textContent=j,T=ae(),S=te("button"),S.textContent=v,C=ae(),D=te("button"),D.textContent=P,B=ae(),F=te("button"),F.textContent=b,y=ae(),I=te("select"),k=te("option"),k.textContent=V,L=te("option"),L.textContent=H,le=te("option"),le.textContent=Y,x=ae(),U=te("button"),U.textContent=Q,X=q(`
     filename:   `),ee=te("input"),Ce=ae(),st&&st.c(),Se=ae(),he=te("main"),pe=te("div"),me(ie.$$.fragment),De=ae(),me(Pe.$$.fragment),this.h()},l(Ne){ve(r.$$.fragment,Ne),t=se(Ne),ve(i.$$.fragment,Ne),a=se(Ne),ve(l.$$.fragment,Ne),o=se(Ne),f=re(Ne,"DIV",{class:!0});var qe=ye(f);ve(c.$$.fragment,qe),qe.forEach(g),_=se(Ne),m=re(Ne,"BR",{}),N=se(Ne),w=re(Ne,"DIV",{id:!0,class:!0});var Qe=ye(w);R=re(Qe,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(R)!=="svelte-r4end6"&&(R.textContent=j),T=se(Qe),S=re(Qe,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(S)!=="svelte-1s1l97g"&&(S.textContent=v),C=se(Qe),D=re(Qe,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(D)!=="svelte-1o4uly3"&&(D.textContent=P),B=se(Qe),F=re(Qe,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(F)!=="svelte-qm8vdx"&&(F.textContent=b),y=se(Qe),I=re(Qe,"SELECT",{class:!0});var St=ye(I);k=re(St,"OPTION",{"data-svelte-h":!0}),Ue(k)!=="svelte-hmrlsb"&&(k.textContent=V),L=re(St,"OPTION",{"data-svelte-h":!0}),Ue(L)!=="svelte-1q30tr1"&&(L.textContent=H),le=re(St,"OPTION",{"data-svelte-h":!0}),Ue(le)!=="svelte-pf55hp"&&(le.textContent=Y),St.forEach(g),x=se(Qe),U=re(Qe,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(U)!=="svelte-mqt2ui"&&(U.textContent=Q),X=M(Qe,`
     filename:   `),ee=re(Qe,"INPUT",{style:!0,type:!0}),Ce=se(Qe),st&&st.l(Qe),Qe.forEach(g),Se=se(Ne),he=re(Ne,"MAIN",{id:!0,class:!0});var Qt=ye(he);pe=re(Qt,"DIV",{id:!0,class:!0});var tt=ye(pe);ve(ie.$$.fragment,tt),De=se(tt),ve(Pe.$$.fragment,tt),tt.forEach(g),Qt.forEach(g),this.h()},h(){oe(f,"class","toolbar-examples"),oe(R,"class","svelte-b7nkdi"),oe(S,"class","svelte-b7nkdi"),oe(D,"class","svelte-b7nkdi"),oe(F,"class","svelte-b7nkdi"),k.__value="",xn(k,k.__value),L.__value="json",xn(L,L.__value),le.__value="turtle",xn(le,le.__value),oe(I,"class","save-as-dropdown svelte-b7nkdi"),n[6]===void 0&&Ha(()=>n[35].call(I)),oe(U,"class"," svelte-b7nkdi"),He(ee,"width","200px"),oe(ee,"type","text"),oe(w,"id","toolbar"),oe(w,"class","svelte-b7nkdi"),oe(pe,"id","flow"),oe(pe,"class","svelte-b7nkdi"),Ha(()=>n[37].call(pe)),oe(he,"id","main"),oe(he,"class","svelte-b7nkdi")},m(Ne,qe){be(r,Ne,qe),A(Ne,t,qe),be(i,Ne,qe),A(Ne,a,qe),be(l,Ne,qe),A(Ne,o,qe),A(Ne,f,qe),be(c,f,null),A(Ne,_,qe),A(Ne,m,qe),A(Ne,N,qe),A(Ne,w,qe),z(w,R),z(w,T),z(w,S),z(w,C),z(w,D),z(w,B),z(w,F),z(w,y),z(w,I),z(I,k),z(I,L),z(I,le),pl(I,n[6],!0),z(w,x),z(w,U),z(w,X),z(w,ee),xn(ee,n[5]),z(w,Ce),st&&st.m(w,null),A(Ne,Se,qe),A(Ne,he,qe),z(he,pe),be(ie,pe,null),z(pe,De),be(Pe,pe,null),et=Fh(pe,n[37].bind(pe)),Be=!0,Z||(_e=[Ae(R,"click",n[20]),Ae(S,"click",n[21]),Ae(D,"click",n[26]),Ae(F,"click",n[18]),Ae(I,"change",n[35]),Ae(I,"change",n[19]),Ae(U,"click",n[29]),Ae(ee,"input",n[36])],Z=!0)},p(Ne,qe){const Qe={};qe[0]&4&&(Qe.title=Ne[2].title),qe[0]&4&&(Qe.content=Ne[2].content),qe[0]&4&&(Qe.options=Ne[2].options),qe[0]&16|qe[1]&2097152&&(Qe.$$scope={dirty:qe,ctx:Ne}),!e&&qe[0]&4&&(e=!0,Qe.is_open=Ne[2].is_open,zt(()=>e=!1)),r.$set(Qe);const St={};qe[0]&8&&(St.title=Ne[3].title),qe[0]&8&&(St.content=Ne[3].content),qe[0]&8&&(St.options=Ne[3].options),qe[1]&2097152&&(St.$$scope={dirty:qe,ctx:Ne}),!s&&qe[0]&8&&(s=!0,St.is_open=Ne[3].is_open,zt(()=>s=!1)),i.$set(St);const Qt={};qe[0]&12288|qe[1]&2097152&&(Qt.$$scope={dirty:qe,ctx:Ne}),!u&&qe[0]&2048&&(u=!0,Qt.is_open=Ne[11],zt(()=>u=!1)),l.$set(Qt);const tt={};!d&&qe[0]&128&&(d=!0,tt.selectedFile=Ne[7],zt(()=>d=!1)),c.$set(tt),qe[0]&64&&pl(I,Ne[6]),qe[0]&32&&ee.value!==Ne[5]&&xn(ee,Ne[5]),Ne[14]?st?(st.p(Ne,qe),qe[0]&16384&&ue(st,1)):(st=Zo(Ne),st.c(),ue(st,1),st.m(w,null)):st&&(kt(),fe(st,1,1,()=>{st=null}),Et());const wt={};qe[0]&256|qe[1]&2097152&&(wt.$$scope={dirty:qe,ctx:Ne}),ie.$set(wt)},i(Ne){Be||(ue(r.$$.fragment,Ne),ue(i.$$.fragment,Ne),ue(l.$$.fragment,Ne),ue(c.$$.fragment,Ne),ue(st),ue(ie.$$.fragment,Ne),ue(Pe.$$.fragment,Ne),Be=!0)},o(Ne){fe(r.$$.fragment,Ne),fe(i.$$.fragment,Ne),fe(l.$$.fragment,Ne),fe(c.$$.fragment,Ne),fe(st),fe(ie.$$.fragment,Ne),fe(Pe.$$.fragment,Ne),Be=!1},d(Ne){Ne&&(g(t),g(a),g(o),g(f),g(_),g(m),g(N),g(w),g(Se),g(he)),we(r,Ne),we(i,Ne),we(l,Ne),we(c),st&&st.d(),we(ie),we(Pe),et(),Z=!1,bt(_e)}}}function av(n){let r,e,t,i,s,a,l='D3FEND <span class="snakes"></span> <span class="CAD"><span style="color:#e62929;">C</span><span class="A" style="color:white;text-border:1px;">A</span><span style="color:blue;">D</span></span>',u,o,f="<i>Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios</i>",c,d,_,m,N,w,R;return r=new s_({props:{title:"D3FEND CAD Tool",og_title:"D3FEND CAD Tool",og_description:"Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios",og_type:"app"}}),m=new sa({props:{$$slots:{default:[Ym]},$$scope:{ctx:n}}}),w=new em({props:{position:"right",$$slots:{default:[iv]},$$scope:{ctx:n}}}),{c(){me(r.$$.fragment),e=ae(),t=te("div"),i=te("div"),s=te("div"),a=te("h1"),a.innerHTML=l,u=ae(),o=te("div"),o.innerHTML=f,c=ae(),d=te("br"),_=ae(),me(m.$$.fragment),N=ae(),me(w.$$.fragment),this.h()},l(j){ve(r.$$.fragment,j),e=se(j),t=re(j,"DIV",{class:!0});var T=ye(t);i=re(T,"DIV",{style:!0});var S=ye(i);s=re(S,"DIV",{style:!0});var v=ye(s);a=re(v,"H1",{class:!0,"data-svelte-h":!0}),Ue(a)!=="svelte-1hfeq8z"&&(a.innerHTML=l),u=se(v),o=re(v,"DIV",{style:!0,"data-svelte-h":!0}),Ue(o)!=="svelte-1adqejh"&&(o.innerHTML=f),c=se(v),d=re(v,"BR",{}),_=se(v),ve(m.$$.fragment,v),v.forEach(g),S.forEach(g),T.forEach(g),N=se(j),ve(w.$$.fragment,j),this.h()},h(){oe(a,"class","fancy-font svelte-b7nkdi"),He(o,"text-align","center"),He(o,"padding","0 px"),He(s,"text-align","center"),He(s,"flex-grow","1"),He(i,"display","flex"),He(i,"just-content","space-between"),He(i,"align-items","center"),oe(t,"class","title-egg")},m(j,T){be(r,j,T),A(j,e,T),A(j,t,T),z(t,i),z(i,s),z(s,a),z(s,u),z(s,o),z(s,c),z(s,d),z(s,_),be(m,s,null),A(j,N,T),be(w,j,T),R=!0},p(j,T){const S={};T[1]&2097152&&(S.$$scope={dirty:T,ctx:j}),m.$set(S);const v={};T[0]&32764|T[1]&2097152&&(v.$$scope={dirty:T,ctx:j}),w.$set(v)},i(j){R||(ue(r.$$.fragment,j),ue(m.$$.fragment,j),ue(w.$$.fragment,j),R=!0)},o(j){fe(r.$$.fragment,j),fe(m.$$.fragment,j),fe(w.$$.fragment,j),R=!1},d(j){j&&(g(e),g(t),g(N)),we(r,j),we(m),we(w,j)}}}function sv(n){console.log(n),console.log(n)}function lv(n,r,e){let t,i,s,a;nt(n,Lh,Te=>e(39,t=Te)),nt(n,si,Te=>e(40,i=Te)),nt(n,Cn,Te=>e(41,s=Te)),nt(n,Yt,Te=>e(14,a=Te));var l=this&&this.__awaiter||function(Te,xe,je,$e){function Ke(jt){return jt instanceof je?jt:new je(function(Pt){Pt(jt)})}return new(je||(je=Promise))(function(jt,Pt){function nr(qe){try{Ne($e.next(qe))}catch(Qe){Pt(Qe)}}function st(qe){try{Ne($e.throw(qe))}catch(Qe){Pt(Qe)}}function Ne(qe){qe.done?jt(qe.value):Ke(qe.value).then(nr,st)}Ne(($e=$e.apply(Te,xe||[])).next())})};let u={is_open:!1,title:"Confirmation to load remote model from URL",content:"This page is instructing D3FEND to remotely load a CAD model from this URL:",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},o={is_open:!1,title:"Confirmation to load remote model from compressed URL",content:"This page is instructing D3FEND to load a CAD model from this URL",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},f;t.url.searchParams.get("load")&&(f=t.url.searchParams.get("load"),u.is_open=!0),t.url.searchParams.get("loadg")&&(o.is_open=!0);function c(Te){const xe=Te.detail;xe.value==="load"?(Yt.add("loading remote URL"),B(f),Yt.clear()):xe.value}function d(Te){const xe=Te.detail;if(xe.value==="load"){Yt.add("loading graph from URL");const je=t.url.searchParams.get("loadg"),$e=Tl.uncrush(je);let Ke=JSON.parse($e);C(Ke),Yt.clear()}else xe.value}aa(()=>{Yt.add("Mounting app...");try{Es.initialize(),Yt.clear()}catch(Te){console.error("Failed to initialize Oxigraph in +layout.svelte",Te),Te.message}});const _={artifactSelectorNode:Em,vulnerabilitySelectorNode:wm,attackSelectorNode:gm,countermeasureSelectorNode:Nm,informationSelectorNode:Im,conditionDefinitionNode:Lm,agentSelectorNode:Mm,eventNode:xm},m={editableEdge:zm};let N={type:"editableEdge",data:{label:void 0},markerEnd:{type:as.ArrowClosed}},w="d3fend-cad.json",R="";function j(){const Te=JSON.stringify({nodes:s,edges:i},null,4),xe=new Blob([Te],{type:"application/json"}),je=window.URL.createObjectURL(xe),$e=document.createElement("a");$e.href=je,$e.download=w,document.body.appendChild($e),$e.click(),document.body.removeChild($e),window.URL.revokeObjectURL(je)}function T(){R==="json"?v():R==="turtle"&&S(),e(6,R="")}function S(){Yt.add("generating ttl file"),console.log("!!! Turtle export engaged !!!"),og().then(Te=>{Yt.clear();const xe=new Blob([Te],{type:"text/turtle"}),je=window.URL.createObjectURL(xe),$e=document.createElement("a");$e.href=je;let Ke=prompt("Enter filename to save as Turtle file",w.replace("json","ttl"));Ke&&($e.download=Ke,document.body.appendChild($e),$e.click(),document.body.removeChild($e)),window.URL.revokeObjectURL(je)}).catch(Te=>{console.error("Error serializing graph to Turtle: ",Te)})}function v(){const Te=JSON.stringify({nodes:s,edges:i},null,4),xe=new Blob([Te],{type:"application/json"}),je=window.URL.createObjectURL(xe),$e=document.createElement("a");$e.href=je;let Ke=prompt("Enter filename to save as JSON file",w);e(5,w=Ke),Ke&&($e.download=Ke,document.body.appendChild($e),$e.click(),document.body.removeChild($e)),window.URL.revokeObjectURL(je)}function C(Te){try{const xe=Te.nodes,je=Te.edges;Yt.add("loading graph from data..."),Gi(xe,je),Yt.clear()}catch(xe){console.error("Error parsing JSON:",xe)}}function D(Te){const xe=Te.target.files[0];if(xe){const je=new FileReader;je.onload=$e=>{if(typeof $e.target.result=="string"){console.log($e.target.result);try{const Ke=JSON.parse($e.target.result),jt=Ke.nodes,Pt=Ke.edges;Gi(jt,Pt)}catch(Ke){console.error("Error parsing JSON:",Ke)}}else console.error("File content is not a string.")},je.onerror=()=>{console.error("Error reading file:",je.error)},je.readAsText(xe)}}function P(Te){const xe=Te.target.files[0];if(xe){const je=new FileReader;je.onload=$e=>{if(typeof $e.target.result=="string"){console.log($e.target.result);try{const Ke=JSON.parse($e.target.result);Cn.set([...s,...Ke.nodes]),si.set([...i,...Ke.edges]),alert(` added ${Ke.nodes.length} nodes and ${Ke.edges.length} edges to the current graph `)}catch(Ke){console.error("Error parsing JSON:",Ke),alert(`Error parsing JSON:", ${Ke}`)}}else console.error("File content is not a string."),alert("File content is not a string.")},je.onerror=()=>{console.error("Error reading file:",je.error),alert(`Error reading file: ${je.error}`)},je.readAsText(xe)}}function B(Te){return l(this,void 0,void 0,function*(){if(Te)try{const je=yield(yield fetch(Te)).json(),$e=je.nodes,Ke=je.edges;Gi($e,Ke)}catch(xe){console.error("Error parsing JSON:",xe)}})}function F(){const Te=document.createElement("input");Te.type="file",Te.accept=".json",Te.onchange=xe=>{D(xe)},Te.click()}function b(){const Te=document.createElement("input");Te.type="file",Te.accept=".json",Te.onchange=xe=>{P(xe)},Te.click()}const{screenToFlowPosition:y}=m_(),I=Te=>{Te.preventDefault(),Te.dataTransfer&&(Te.dataTransfer.dropEffect="move")},k=Te=>console.log("handle onConnect",Te),V=Te=>{if(Te.preventDefault(),!Te.dataTransfer)return null;const xe=Te.dataTransfer.getData("application/svelteflow"),je=y({x:Te.clientX,y:Te.clientY}),$e={id:`${Math.random()}`,type:xe,position:je,data:{label:"",sequence:"0"},origin:[.5,0]};s.push($e),Cn.set(s)};function L(Te){return l(this,void 0,void 0,function*(){const xe=Te.detail;try{const je=yield fetch(`/resources/cad/examples/${xe}`);if(!je.ok)throw new Error(`HTTP error! status: ${je.status}`);const $e=yield je.json();console.log("Selected file contents:",$e),C($e)}catch(je){console.error("Error fetching JSON file:",je)}})}let H;function le(){lg(),e(7,H="Example Graphs")}let Y,x,U;function Q({detail:{event:Te,node:xe}}){Te.preventDefault();let je=50;e(8,Y={id:xe.id,top:Te.clientY<U-je?Te.clientY:void 0,left:Te.clientX<x-je?Te.clientX:void 0,right:Te.clientX>=x-je?x-Te.clientX:void 0,bottom:Te.clientY>=U-je?U-Te.clientY:void 0})}function X(){e(8,Y=null)}let ee=!1,Ce,Se;function he(){Yt.add("compressing graph to string..."),e(11,ee=!0);const Te=Tl.crush(JSON.stringify({nodes:s,edges:i}));e(12,Ce=encodeURIComponent(Te)),e(13,Se=t.url.origin+`/cad/?loadg=${Ce}`),Yt.clear()}function pe(Te){n.$$.not_equal(u.is_open,Te)&&(u.is_open=Te,e(2,u))}function ie(Te){n.$$.not_equal(o.is_open,Te)&&(o.is_open=Te,e(3,o))}const De=()=>qh(Se);function Pe(Te){ee=Te,e(11,ee)}function et(Te){H=Te,e(7,H)}function Be(){R=Oh(this),e(6,R)}function Z(){w=this.value,e(5,w)}function _e(){x=this.clientWidth,U=this.clientHeight,e(9,x),e(10,U)}return[_,m,u,o,f,w,R,H,Y,x,U,ee,Ce,Se,a,c,d,N,j,T,F,b,I,k,V,L,le,Q,X,he,pe,ie,De,Pe,et,Be,Z,_e]}class uv extends Je{constructor(r){super(),Ze(this,r,lv,av,Ye,{nodeTypes:0,edgeTypes:1},null,[-1,-1])}get nodeTypes(){return this.$$.ctx[0]}get edgeTypes(){return this.$$.ctx[1]}}function ov(n){let r,e;return r=new uv({}),{c(){me(r.$$.fragment)},l(t){ve(r.$$.fragment,t)},m(t,i){be(r,t,i),e=!0},i(t){e||(ue(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){we(r,t)}}}function fv(n){let r,e;return r=new d_({props:{$$slots:{default:[ov]},$$scope:{ctx:n}}}),{c(){me(r.$$.fragment)},l(t){ve(r.$$.fragment,t)},m(t,i){be(r,t,i),e=!0},p(t,[i]){const s={};i&4&&(s.$$scope={dirty:i,ctx:t}),r.$set(s)},i(t){e||(ue(r.$$.fragment,t),e=!0)},o(t){fe(r.$$.fragment,t),e=!1},d(t){we(r,t)}}}function cv(n,r,e){let t,{data:i}=r;return n.$$set=s=>{"data"in s&&e(0,i=s.data)},n.$$.update=()=>{n.$$.dirty&1&&e(1,t=i.remote_d3fend_tree?i.remote_d3fend_tree.map(s=>({...s,children:ls(s.children,s["rdfs:label"])})):[]),n.$$.dirty&3&&(sf.set(t),uf.set(i.attack),lf.set(i.dao),of.set(i.events),ff.set(i.weaknesses))},[i,t]}class Mv extends Je{constructor(r){super(),Ze(this,r,cv,fv,Ye,{data:0})}}export{Mv as component,Iv as universal};

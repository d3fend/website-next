const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/jsonld.CYnguqZs.js","../chunks/_commonjsHelpers.C4iS2aBk.js","../chunks/___vite-browser-external_commonjs-proxy.B2SwpVhP.js"])))=>i.map(i=>d[i]);
import{s as Zs}from"../chunks/sortBy.ChsTRid8.js";import{s as lt,c as Kt,u as Zt,g as er,a as tr,am as U0,I as Dl,e as Y,d as J,f as Te,i as w,r as te,k as R,o as st,ao as j0,E as is,J as Jt,p as Ie,b as le,j as oe,as as Ct,t as x,h as V,l as q,P as ge,a4 as rr,ar as Bn,m as we,x as gt,W as Hr,n as xe,v as nt,L as Tt,V as Ar,D as bt,O as yt,Y as kl,F as rn,N as $e,a3 as ii,w as un,al as Fo,a0 as el,Q as Oo,R as Bo,ap as Lo,ak as q0,aq as M0}from"../chunks/scheduler.xR-uXgLO.js";import{S as kt,i as At,t as ue,a as ce,g as ht,e as dt,c as Re,b as Fe,m as Oe,d as Be,f as Cr,p as Uo}from"../chunks/index.BpaDVXPB.js";import{d as x0,w as gr}from"../chunks/index.iaz6iIjv.js";import{c as as,a as la}from"../chunks/_commonjsHelpers.C4iS2aBk.js";import{s as jo}from"../chunks/schema.HaQr_DHp.js";import{p as V0}from"../chunks/stores.C1k5040H.js";import{A as ss}from"../chunks/Alert.BOpypHFQ.js";import{T as Fn,b as Le,a as Kh,G as Zh,m as z0,d as Ha,o as H0}from"../chunks/lib._70Mlgse.js";import{c as $0,k as X0,b as qo,R as Ua,u as Si,X as G0,d as Mo,e as xo,i as Q0,g as W0,f as Vo,n as zo,h as Ho,j as Y0,p as J0,l as K0,r as Z0,H as Et,P as _t,m as ev,E as tv,o as ed,q as tl,S as rv,C as nv,B as iv,a as av,M as sv}from"../chunks/style.CaV8822o.js";import{r as lv}from"../chunks/___vite-browser-external_commonjs-proxy.B2SwpVhP.js";import{_ as ov}from"../chunks/preload-helper.D6kgxu3v.js";import{e as Ke,u as $o,o as Xo}from"../chunks/each.BfH-wj2E.js";import{G as Ln}from"../chunks/_Graph.B1ixJej4.js";import{t as $a,T as td}from"../chunks/ToggleBar.ChYzQEkc.js";import{s as Go}from"../chunks/index.BxqCZUUx.js";import{f as ki}from"../chunks/utils.xEKteSAW.js";import{f as uv,c as fv,L as cv}from"../chunks/Loading.B5hKdNm6.js";import{J as Qo}from"../chunks/JSONCrush.BlUS0oeb.js";import{T as hv}from"../chunks/Title.lz_tL8Gl.js";function Al(i,e,t=[]){const n=Zs(i,r=>r["rdfs:label"]);for(const r of n)t.push({...r,rootLabel:e}),r.children&&Al(r.children,e,t);return t}function Cl(i,e,t){for(const n of t)if(e.test(i[n]))return!0;return!1}function dv(i,e,t){if(!e)return i||[];const n=e?new RegExp(e,"i"):null,r=s=>n?Cl(s,n,t):!0;return i.filter(r)}function pv(i,e,t){if(!e)return i||[];const n=e?new RegExp(e,"i"):null,r=a=>n?Cl(a,n,t):!0;return i.reduce((a,l)=>(a.push({...l,children:l.children.filter(r)}),a),[]).filter(a=>a.children.length>0)}function _v(i,e,t){const n=[];function r(s){if(Cl(s,e,t)&&n.push(s),s.children)for(const a of s.children)r(a)}for(const s of i)r(s);return n}function vv(i,e,t){if(!e)return i||[];const n=new RegExp(e,"i");return _v(i,n,t)}function Wo(i,e){return[...new Map(i.map(t=>[t[e],t])).values()]}function mv(i){const e=i.reduce((r,s)=>(r[s["@id"]]=s,r),{});return i.reduce((r,s)=>(s.hasOwnProperty("rdfs:hasSubClass")&&(s.children=s["rdfs:hasSubClass"].map(a=>e[a["@id"]]),r.push(s)),r),[]).filter(r=>r["rdfs:subClassOf"].some(s=>s["@id"]==="d3f:DigitalEvent"))}function gv(i){const e=i.reduce((n,r)=>(n[r["@id"]]=r,n),{});return i.forEach(n=>{const r=n["rdfs:subPropertyOf"];if(r)for(const s of r)e[s["@id"]]&&(e[s["@id"]].children?e[s["@id"]].children.push(n):e[s["@id"]].children=[n])}),{associated:i.filter(n=>n["rdfs:subPropertyOf"].some(r=>r["@id"]==="d3f:associated-with"))}}async function bv({fetch:i}){const e=["/api/offensive-technique/all.json","/api/dao/artifacts.json","/api/taxonomies/d3f:DigitalEvent.json","/api/weakness/all.json","/api/ontology/properties/object/all.json"],[{value:{["@graph"]:t}},{value:{["@graph"]:n}},{value:{["@graph"]:r}},{value:{["@graph"]:s}},{value:{["@graph"]:a}}]=await Promise.allSettled(e.map(h=>i(h).then(c=>c.json()))),l=Zs(Wo(t,"rdfs:label"),h=>h["rdfs:label"]),u=mv(r).map(h=>({...h,children:Wo(Al(h.children,h["rdfs:label"]),"rdfs:label")})),f=Zs(s,h=>h["rdfs:label"]),d=gv(a);return{attack:l,dao:n,events:u,weaknesses:f,properties:d}}const qE=Object.freeze(Object.defineProperty({__proto__:null,load:bv},Symbol.toStringTag,{value:"Module"}));function yv(i){let e;const t=i[7].default,n=Kt(t,i,i[6],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),e=!0},p(r,[s]){n&&n.p&&(!e||s&64)&&Zt(n,t,r,r[6],e?tr(t,r[6],s,null):er(r[6]),null)},i(r){e||(ue(n,r),e=!0)},o(r){ce(n,r),e=!1},d(r){n&&n.d(r)}}}function wv(i,e,t){let{$$slots:n={},$$scope:r}=e,{initialNodes:s=void 0}=e,{initialEdges:a=void 0}=e,{initialWidth:l=void 0}=e,{initialHeight:o=void 0}=e,{fitView:u=void 0}=e,{nodeOrigin:f=void 0}=e;const d=$0({nodes:s,edges:a,width:l,height:o,nodeOrigin:f,fitView:u});return U0(X0,{getStore:()=>d}),Dl(()=>{d.reset()}),i.$$set=h=>{"initialNodes"in h&&t(0,s=h.initialNodes),"initialEdges"in h&&t(1,a=h.initialEdges),"initialWidth"in h&&t(2,l=h.initialWidth),"initialHeight"in h&&t(3,o=h.initialHeight),"fitView"in h&&t(4,u=h.fitView),"nodeOrigin"in h&&t(5,f=h.nodeOrigin),"$$scope"in h&&t(6,r=h.$$scope)},[s,a,l,o,u,f,r,n]}class Ev extends kt{constructor(e){super(),At(this,e,wv,yv,lt,{initialNodes:0,initialEdges:1,initialWidth:2,initialHeight:3,fitView:4,nodeOrigin:5})}}function Dv(i){let e,t,n;const r=i[33].default,s=Kt(r,i,i[32],null);return{c(){e=Y("div"),s&&s.c(),this.h()},l(a){e=J(a,"DIV",{class:!0,style:!0});var l=Te(e);s&&s.l(l),l.forEach(w),this.h()},h(){te(e,"class",t=qo(["svelte-flow__resize-control","nodrag",...i[4],i[0],i[1]])),te(e,"style",i[3])},m(a,l){R(a,e,l),s&&s.m(e,null),i[34](e),n=!0},p(a,l){s&&s.p&&(!n||l[1]&2)&&Zt(s,r,a,a[32],n?tr(r,a[32],l,null):er(a[32]),null),(!n||l[0]&19&&t!==(t=qo(["svelte-flow__resize-control","nodrag",...a[4],a[0],a[1]])))&&te(e,"class",t),(!n||l[0]&8)&&te(e,"style",a[3])},i(a){n||(ue(s,a),n=!0)},o(a){ce(s,a),n=!1},d(a){a&&w(e),s&&s.d(a),i[34](null)}}}function kv(i,e,t){let n,r,s,a,l,o,u,f,d,h,c,p,_,v,D,U,{$$slots:T={},$$scope:N}=e,{nodeId:g=void 0}=e,{position:E=void 0}=e,{variant:b=Ua.Handle}=e,{color:I=void 0}=e,{minWidth:C=10}=e,{minHeight:O=10}=e,{maxWidth:k=Number.MAX_VALUE}=e,{maxHeight:B=Number.MAX_VALUE}=e,{keepAspectRatio:P=!1}=e,{shouldResize:A=void 0}=e,{onResizeStart:z=void 0}=e,{onResize:j=void 0}=e,{onResizeEnd:se=void 0}=e,{style:Z=""}=e,{class:G=""}=e;const{nodeLookup:H,snapGrid:Q,viewport:ee,nodes:$,nodeOrigin:ae}=Si();st(i,H,_e=>t(37,_=_e)),st(i,Q,_e=>t(39,D=_e)),st(i,ee,_e=>t(40,U=_e)),st(i,$,_e=>t(36,p=_e)),st(i,ae,_e=>t(38,v=_e));const ze=j0("svelteflow__node_id");let Ve,be=null;is(()=>(Ve&&t(23,be=G0({domNode:Ve,nodeId:l,getStoreItems:()=>({nodeLookup:_,transform:[U.x,U.y,U.zoom],snapGrid:D??void 0,snapToGrid:!!D,nodeOrigin:v}),onChange:(_e,Se)=>{var vt,rt;const et=(vt=_.get(l))==null?void 0:vt.internals.userNode;if(et){_e.x!==void 0&&_e.y!==void 0&&(et.position={x:_e.x,y:_e.y}),_e.width!==void 0&&_e.height!==void 0&&(et.width=_e.width,et.height=_e.height);for(const Ae of Se){const qe=(rt=_.get(Ae.id))==null?void 0:rt.internals.userNode;qe&&(qe.position=Ae.position)}$.set(p)}}})),()=>{be==null||be.destroy()}));function Ne(_e){Jt[_e?"unshift":"push"](()=>{Ve=_e,t(2,Ve)})}return i.$$set=_e=>{"nodeId"in _e&&t(10,g=_e.nodeId),"position"in _e&&t(11,E=_e.position),"variant"in _e&&t(0,b=_e.variant),"color"in _e&&t(12,I=_e.color),"minWidth"in _e&&t(13,C=_e.minWidth),"minHeight"in _e&&t(14,O=_e.minHeight),"maxWidth"in _e&&t(15,k=_e.maxWidth),"maxHeight"in _e&&t(16,B=_e.maxHeight),"keepAspectRatio"in _e&&t(17,P=_e.keepAspectRatio),"shouldResize"in _e&&t(18,A=_e.shouldResize),"onResizeStart"in _e&&t(19,z=_e.onResizeStart),"onResize"in _e&&t(20,j=_e.onResize),"onResizeEnd"in _e&&t(21,se=_e.onResizeEnd),"style"in _e&&t(22,Z=_e.style),"class"in _e&&t(1,G=_e.class),"$$scope"in _e&&t(32,N=_e.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&8192&&t(27,n=C??10),i.$$.dirty[0]&16384&&t(26,r=O??10),i.$$.dirty[0]&32768&&t(25,s=k??Number.MAX_VALUE),i.$$.dirty[0]&65536&&t(24,a=B??Number.MAX_VALUE),i.$$.dirty[0]&1024&&(l=typeof g=="string"?g:ze),i.$$.dirty[0]&1&&t(31,o=b===Ua.Line?"right":"bottom-right"),i.$$.dirty[0]&2048|i.$$.dirty[1]&1&&t(28,u=E??o),i.$$.dirty[0]&268435456&&t(4,f=u.split("-")),i.$$.dirty[0]&1&&t(30,d=b===Ua.Line?"border-color":"background-color"),i.$$.dirty[0]&4194304&&t(29,h=Z??""),i.$$.dirty[0]&1610616832&&t(3,c=I?`${h} ${d}: ${I};`:h),i.$$.dirty[0]&532545536&&(be==null||be.update({controlPosition:u,boundaries:{minWidth:n,minHeight:r,maxWidth:s,maxHeight:a},keepAspectRatio:!!P,onResizeStart:z,onResize:j,onResizeEnd:se,shouldResize:A}))},[b,G,Ve,c,f,H,Q,ee,$,ae,g,E,I,C,O,k,B,P,A,z,j,se,Z,be,a,s,r,n,u,h,d,o,N,T,Ne]}class rd extends kt{constructor(e){super(),At(this,e,kv,Dv,lt,{nodeId:10,position:11,variant:0,color:12,minWidth:13,minHeight:14,maxWidth:15,maxHeight:16,keepAspectRatio:17,shouldResize:18,onResizeStart:19,onResize:20,onResizeEnd:21,style:22,class:1},null,[-1,-1])}}function Yo(i,e,t){const n=i.slice();return n[20]=e[t],n}function Jo(i,e,t){const n=i.slice();return n[20]=e[t],n}function Ko(i){let e=[],t=new Map,n,r=[],s=new Map,a,l,o=Ke(Mo);const u=h=>h[20];for(let h=0;h<o.length;h+=1){let c=Jo(i,o,h),p=u(c);t.set(p,e[h]=Zo(p,c))}let f=Ke(xo);const d=h=>h[20];for(let h=0;h<f.length;h+=1){let c=Yo(i,f,h),p=d(c);s.set(p,r[h]=eu(p,c))}return{c(){for(let h=0;h<e.length;h+=1)e[h].c();n=le();for(let h=0;h<r.length;h+=1)r[h].c();a=Ie()},l(h){for(let c=0;c<e.length;c+=1)e[c].l(h);n=oe(h);for(let c=0;c<r.length;c+=1)r[c].l(h);a=Ie()},m(h,c){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(h,c);R(h,n,c);for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(h,c);R(h,a,c),l=!0},p(h,c){c&65521&&(o=Ke(Mo),ht(),e=$o(e,c,u,1,h,o,t,n.parentNode,Xo,Zo,n,Jo),dt()),c&65485&&(f=Ke(xo),ht(),r=$o(r,c,d,1,h,f,s,a.parentNode,Xo,eu,a,Yo),dt())},i(h){if(!l){for(let c=0;c<o.length;c+=1)ue(e[c]);for(let c=0;c<f.length;c+=1)ue(r[c]);l=!0}},o(h){for(let c=0;c<e.length;c+=1)ce(e[c]);for(let c=0;c<r.length;c+=1)ce(r[c]);l=!1},d(h){h&&(w(n),w(a));for(let c=0;c<e.length;c+=1)e[c].d(h);for(let c=0;c<r.length;c+=1)r[c].d(h)}}}function Zo(i,e){let t,n,r;return n=new rd({props:{class:e[4],style:e[5],nodeId:e[0],position:e[20],variant:Ua.Line,color:e[6],minWidth:e[12],minHeight:e[13],maxWidth:e[14],maxHeight:e[15],onResizeStart:e[9],keepAspectRatio:e[7],shouldResize:e[8],onResize:e[10],onResizeEnd:e[11]}}),{key:i,first:null,c(){t=Ie(),Re(n.$$.fragment),this.h()},l(s){t=Ie(),Fe(n.$$.fragment,s),this.h()},h(){this.first=t},m(s,a){R(s,t,a),Oe(n,s,a),r=!0},p(s,a){e=s;const l={};a&16&&(l.class=e[4]),a&32&&(l.style=e[5]),a&1&&(l.nodeId=e[0]),a&64&&(l.color=e[6]),a&512&&(l.onResizeStart=e[9]),a&128&&(l.keepAspectRatio=e[7]),a&256&&(l.shouldResize=e[8]),a&1024&&(l.onResize=e[10]),a&2048&&(l.onResizeEnd=e[11]),n.$set(l)},i(s){r||(ue(n.$$.fragment,s),r=!0)},o(s){ce(n.$$.fragment,s),r=!1},d(s){s&&w(t),Be(n,s)}}}function eu(i,e){let t,n,r;return n=new rd({props:{class:e[2],style:e[3],nodeId:e[0],position:e[20],color:e[6],minWidth:e[12],minHeight:e[13],maxWidth:e[14],maxHeight:e[15],onResizeStart:e[9],keepAspectRatio:e[7],shouldResize:e[8],onResize:e[10],onResizeEnd:e[11]}}),{key:i,first:null,c(){t=Ie(),Re(n.$$.fragment),this.h()},l(s){t=Ie(),Fe(n.$$.fragment,s),this.h()},h(){this.first=t},m(s,a){R(s,t,a),Oe(n,s,a),r=!0},p(s,a){e=s;const l={};a&4&&(l.class=e[2]),a&8&&(l.style=e[3]),a&1&&(l.nodeId=e[0]),a&64&&(l.color=e[6]),a&512&&(l.onResizeStart=e[9]),a&128&&(l.keepAspectRatio=e[7]),a&256&&(l.shouldResize=e[8]),a&1024&&(l.onResize=e[10]),a&2048&&(l.onResizeEnd=e[11]),n.$set(l)},i(s){r||(ue(n.$$.fragment,s),r=!0)},o(s){ce(n.$$.fragment,s),r=!1},d(s){s&&w(t),Be(n,s)}}}function Av(i){let e,t,n=i[1]&&Ko(i);return{c(){n&&n.c(),e=Ie()},l(r){n&&n.l(r),e=Ie()},m(r,s){n&&n.m(r,s),R(r,e,s),t=!0},p(r,[s]){r[1]?n?(n.p(r,s),s&2&&ue(n,1)):(n=Ko(r),n.c(),ue(n,1),n.m(e.parentNode,e)):n&&(ht(),ce(n,1,1,()=>{n=null}),dt())},i(r){t||(ue(n),t=!0)},o(r){ce(n),t=!1},d(r){r&&w(e),n&&n.d(r)}}}function Cv(i,e,t){let{nodeId:n=void 0}=e,{isVisible:r=!0}=e,{handleClass:s=void 0}=e,{handleStyle:a=void 0}=e,{lineClass:l=void 0}=e,{lineStyle:o=void 0}=e,{color:u=void 0}=e,{minWidth:f=10}=e,{minHeight:d=10}=e,{maxWidth:h=Number.MAX_VALUE}=e,{maxHeight:c=Number.MAX_VALUE}=e,{keepAspectRatio:p=!1}=e,{shouldResize:_=void 0}=e,{onResizeStart:v=void 0}=e,{onResize:D=void 0}=e,{onResizeEnd:U=void 0}=e,T=f||10,N=d||10,g=h||Number.MAX_VALUE,E=c||Number.MAX_VALUE;return i.$$set=b=>{"nodeId"in b&&t(0,n=b.nodeId),"isVisible"in b&&t(1,r=b.isVisible),"handleClass"in b&&t(2,s=b.handleClass),"handleStyle"in b&&t(3,a=b.handleStyle),"lineClass"in b&&t(4,l=b.lineClass),"lineStyle"in b&&t(5,o=b.lineStyle),"color"in b&&t(6,u=b.color),"minWidth"in b&&t(16,f=b.minWidth),"minHeight"in b&&t(17,d=b.minHeight),"maxWidth"in b&&t(18,h=b.maxWidth),"maxHeight"in b&&t(19,c=b.maxHeight),"keepAspectRatio"in b&&t(7,p=b.keepAspectRatio),"shouldResize"in b&&t(8,_=b.shouldResize),"onResizeStart"in b&&t(9,v=b.onResizeStart),"onResize"in b&&t(10,D=b.onResize),"onResizeEnd"in b&&t(11,U=b.onResizeEnd)},[n,r,s,a,l,o,u,p,_,v,D,U,T,N,g,E,f,d,h,c]}class Un extends kt{constructor(e){super(),At(this,e,Cv,Av,lt,{nodeId:0,isVisible:1,handleClass:2,handleStyle:3,lineClass:4,lineStyle:5,color:6,minWidth:16,minHeight:17,maxWidth:18,maxHeight:19,keepAspectRatio:7,shouldResize:8,onResizeStart:9,onResize:10,onResizeEnd:11})}}const tu=i=>Q0(i);function Tv(){const{zoomIn:i,zoomOut:e,fitView:t,onbeforedelete:n,snapGrid:r,viewport:s,width:a,height:l,minZoom:o,maxZoom:u,panZoom:f,nodes:d,edges:h,domNode:c,nodeLookup:p,edgeLookup:_,nodeOrigin:v}=Si(),D=N=>{var C,O;const g=Ct(p),E=tu(N)?N:g.get(N.id),b=E.parentId?K0(E.position,E.measured,E.parentId,g,Ct(v)):E.position,I={id:E.id,position:b,width:((C=E.measured)==null?void 0:C.width)??E.width,height:((O=E.measured)==null?void 0:O.height)??E.height,data:E.data};return zo(I)},U=(N,g,E={replace:!1})=>{var C;const b=(C=Ct(p).get(N))==null?void 0:C.internals.userNode;if(!b)return;const I=typeof g=="function"?g(b):g;E.replace?d.update(O=>O.map(k=>k.id===N?tu(I)?I:{...k,...I}:k)):(Object.assign(b,I),d.update(O=>O))},T=N=>Ct(p).get(N);return{zoomIn:i,zoomOut:e,getInternalNode:T,getNode:N=>{var g;return(g=T(N))==null?void 0:g.internals.userNode},getNodes:N=>N===void 0?Ct(d):ru(Ct(p),N),getEdge:N=>Ct(_).get(N),getEdges:N=>N===void 0?Ct(h):ru(Ct(_),N),setZoom:(N,g)=>{const E=Ct(f);return E?E.scaleTo(N,{duration:g==null?void 0:g.duration}):Promise.resolve(!1)},getZoom:()=>Ct(s).zoom,setViewport:async(N,g)=>{const E=Ct(s),b=Ct(f);return b?(await b.setViewport({x:N.x??E.x,y:N.y??E.y,zoom:N.zoom??E.zoom},{duration:g==null?void 0:g.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>Ct(s),setCenter:async(N,g,E)=>{const b=typeof(E==null?void 0:E.zoom)<"u"?E.zoom:Ct(u),I=Ct(f);return I?(await I.setViewport({x:Ct(a)/2-N*b,y:Ct(l)/2-g*b,zoom:b},{duration:E==null?void 0:E.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:t,fitBounds:async(N,g)=>{const E=Ct(f);if(!E)return Promise.resolve(!1);const b=W0(N,Ct(a),Ct(l),Ct(o),Ct(u),(g==null?void 0:g.padding)??.1);return await E.setViewport(b,{duration:g==null?void 0:g.duration}),Promise.resolve(!0)},getIntersectingNodes:(N,g=!0,E)=>{const b=Vo(N),I=b?N:D(N);return I?(E||Ct(d)).filter(C=>{const O=Ct(p).get(C.id);if(!O||!b&&C.id===N.id)return!1;const k=zo(O),B=Ho(k,I);return g&&B>0||B>=I.width*I.height}):[]},isNodeIntersecting:(N,g,E=!0)=>{const I=Vo(N)?N:D(N);if(!I)return!1;const C=Ho(I,g);return E&&C>0||C>=I.width*I.height},deleteElements:async({nodes:N=[],edges:g=[]})=>{const{nodes:E,edges:b}=await Y0({nodesToRemove:N,edgesToRemove:g,nodes:Ct(d),edges:Ct(h),onBeforeDelete:Ct(n)});return E&&d.update(I=>I.filter(C=>!E.some(({id:O})=>O===C.id))),b&&h.update(I=>I.filter(C=>!b.some(({id:O})=>O===C.id))),{deletedNodes:E,deletedEdges:b}},screenToFlowPosition:(N,g={snapToGrid:!0})=>{const E=Ct(c);if(!E)return N;const b=g.snapToGrid?Ct(r):!1,{x:I,y:C,zoom:O}=Ct(s),{x:k,y:B}=E.getBoundingClientRect(),P={x:N.x-k,y:N.y-B};return J0(P,[I,C,O],b!==null,b||[1,1])},flowToScreenPosition:N=>{const g=Ct(c);if(!g)return N;const{x:E,y:b,zoom:I}=Ct(s),{x:C,y:O}=g.getBoundingClientRect(),k=Z0(N,[E,b,I]);return{x:k.x+C,y:k.y+O}},toObject:()=>({nodes:Ct(d).map(N=>({...N,position:{...N.position},data:{...N.data}})),edges:Ct(h).map(N=>({...N})),viewport:{...Ct(s)}}),updateNode:U,updateNodeData:(N,g,E)=>{var C;const b=(C=Ct(p).get(N))==null?void 0:C.internals.userNode;if(!b)return;const I=typeof g=="function"?g(b):g;b.data=E!=null&&E.replace?I:{...b.data,...I},d.update(O=>O)},viewport:s}}function ru(i,e){var n;const t=[];for(const r of e){const s=i.get(r);if(s){const a="internals"in s?(n=s.internals)==null?void 0:n.userNode:s;t.push(a)}}return t}function En(){const{connection:i}=Si();return i}function fn(){const{nodes:i}=Si();return i}function cn(){const{edges:i}=Si();return i}function nu(i){const{nodeLookup:e,nodes:t}=Si();return x0([e,t],([n])=>n.get(i))}let nd=gr([]),id=gr([]),ad=gr([]),sd=gr([]),ld=gr([]),od=gr([]);function Nv(){const{subscribe:i,set:e,update:t}=gr();return{subscribe:i,update:t,add:n=>e(n),clear:()=>e()}}const Pr=Nv();var rl={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(i,e){(function(t,n){n(e)})(as,function(t){function n(){for(var he=arguments.length,ie=Array(he),ve=0;ve<he;ve++)ie[ve]=arguments[ve];if(ie.length>1){ie[0]=ie[0].slice(0,-1);for(var Ce=ie.length-1,De=1;De<Ce;++De)ie[De]=ie[De].slice(1,-1);return ie[Ce]=ie[Ce].slice(1),ie.join("")}else return ie[0]}function r(he){return"(?:"+he+")"}function s(he){return he===void 0?"undefined":he===null?"null":Object.prototype.toString.call(he).split(" ").pop().split("]").shift().toLowerCase()}function a(he){return he.toUpperCase()}function l(he){return he!=null?he instanceof Array?he:typeof he.length!="number"||he.split||he.setInterval||he.call?[he]:Array.prototype.slice.call(he):[]}function o(he,ie){var ve=he;if(ie)for(var Ce in ie)ve[Ce]=ie[Ce];return ve}function u(he){var ie="[A-Za-z]",ve="[0-9]",Ce=n(ve,"[A-Fa-f]"),De=r(r("%[EFef]"+Ce+"%"+Ce+Ce+"%"+Ce+Ce)+"|"+r("%[89A-Fa-f]"+Ce+"%"+Ce+Ce)+"|"+r("%"+Ce+Ce)),it="[\\:\\/\\?\\#\\[\\]\\@]",Ye="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",ot=n(it,Ye),jt=he?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Yt=he?"[\\uE000-\\uF8FF]":"[]",Dt=n(ie,ve,"[\\-\\.\\_\\~]",jt);r(ie+n(ie,ve,"[\\+\\-\\.]")+"*"),r(r(De+"|"+n(Dt,Ye,"[\\:]"))+"*");var It=r(r("25[0-5]")+"|"+r("2[0-4]"+ve)+"|"+r("1"+ve+ve)+"|"+r("0?[1-9]"+ve)+"|0?0?"+ve),Ht=r(It+"\\."+It+"\\."+It+"\\."+It),pt=r(Ce+"{1,4}"),Rt=r(r(pt+"\\:"+pt)+"|"+Ht),$t=r(r(pt+"\\:")+"{6}"+Rt),qt=r("\\:\\:"+r(pt+"\\:")+"{5}"+Rt),$r=r(r(pt)+"?\\:\\:"+r(pt+"\\:")+"{4}"+Rt),_r=r(r(r(pt+"\\:")+"{0,1}"+pt)+"?\\:\\:"+r(pt+"\\:")+"{3}"+Rt),vr=r(r(r(pt+"\\:")+"{0,2}"+pt)+"?\\:\\:"+r(pt+"\\:")+"{2}"+Rt),Cn=r(r(r(pt+"\\:")+"{0,3}"+pt)+"?\\:\\:"+pt+"\\:"+Rt),hn=r(r(r(pt+"\\:")+"{0,4}"+pt)+"?\\:\\:"+Rt),yr=r(r(r(pt+"\\:")+"{0,5}"+pt)+"?\\:\\:"+pt),Or=r(r(r(pt+"\\:")+"{0,6}"+pt)+"?\\:\\:"),dn=r([$t,qt,$r,_r,vr,Cn,hn,yr,Or].join("|")),wr=r(r(Dt+"|"+De)+"+");r("[vV]"+Ce+"+\\."+n(Dt,Ye,"[\\:]")+"+"),r(r(De+"|"+n(Dt,Ye))+"*");var Xr=r(De+"|"+n(Dt,Ye,"[\\:\\@]"));return r(r(De+"|"+n(Dt,Ye,"[\\@]"))+"+"),r(r(Xr+"|"+n("[\\/\\?]",Yt))+"*"),{NOT_SCHEME:new RegExp(n("[^]",ie,ve,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(n("[^\\%\\:]",Dt,Ye),"g"),NOT_HOST:new RegExp(n("[^\\%\\[\\]\\:]",Dt,Ye),"g"),NOT_PATH:new RegExp(n("[^\\%\\/\\:\\@]",Dt,Ye),"g"),NOT_PATH_NOSCHEME:new RegExp(n("[^\\%\\/\\@]",Dt,Ye),"g"),NOT_QUERY:new RegExp(n("[^\\%]",Dt,Ye,"[\\:\\@\\/\\?]",Yt),"g"),NOT_FRAGMENT:new RegExp(n("[^\\%]",Dt,Ye,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(n("[^]",Dt,Ye),"g"),UNRESERVED:new RegExp(Dt,"g"),OTHER_CHARS:new RegExp(n("[^\\%]",Dt,ot),"g"),PCT_ENCODED:new RegExp(De,"g"),IPV4ADDRESS:new RegExp("^("+Ht+")$"),IPV6ADDRESS:new RegExp("^\\[?("+dn+")"+r(r("\\%25|\\%(?!"+Ce+"{2})")+"("+wr+")")+"?\\]?$")}}var f=u(!1),d=u(!0),h=function(){function he(ie,ve){var Ce=[],De=!0,it=!1,Ye=void 0;try{for(var ot=ie[Symbol.iterator](),jt;!(De=(jt=ot.next()).done)&&(Ce.push(jt.value),!(ve&&Ce.length===ve));De=!0);}catch(Yt){it=!0,Ye=Yt}finally{try{!De&&ot.return&&ot.return()}finally{if(it)throw Ye}}return Ce}return function(ie,ve){if(Array.isArray(ie))return ie;if(Symbol.iterator in Object(ie))return he(ie,ve);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(he){if(Array.isArray(he)){for(var ie=0,ve=Array(he.length);ie<he.length;ie++)ve[ie]=he[ie];return ve}else return Array.from(he)},p=2147483647,_=36,v=1,D=26,U=38,T=700,N=72,g=128,E="-",b=/^xn--/,I=/[^\0-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=_-v,B=Math.floor,P=String.fromCharCode;function A(he){throw new RangeError(O[he])}function z(he,ie){for(var ve=[],Ce=he.length;Ce--;)ve[Ce]=ie(he[Ce]);return ve}function j(he,ie){var ve=he.split("@"),Ce="";ve.length>1&&(Ce=ve[0]+"@",he=ve[1]),he=he.replace(C,".");var De=he.split("."),it=z(De,ie).join(".");return Ce+it}function se(he){for(var ie=[],ve=0,Ce=he.length;ve<Ce;){var De=he.charCodeAt(ve++);if(De>=55296&&De<=56319&&ve<Ce){var it=he.charCodeAt(ve++);(it&64512)==56320?ie.push(((De&1023)<<10)+(it&1023)+65536):(ie.push(De),ve--)}else ie.push(De)}return ie}var Z=function(ie){return String.fromCodePoint.apply(String,c(ie))},G=function(ie){return ie-48<10?ie-22:ie-65<26?ie-65:ie-97<26?ie-97:_},H=function(ie,ve){return ie+22+75*(ie<26)-((ve!=0)<<5)},Q=function(ie,ve,Ce){var De=0;for(ie=Ce?B(ie/T):ie>>1,ie+=B(ie/ve);ie>k*D>>1;De+=_)ie=B(ie/k);return B(De+(k+1)*ie/(ie+U))},ee=function(ie){var ve=[],Ce=ie.length,De=0,it=g,Ye=N,ot=ie.lastIndexOf(E);ot<0&&(ot=0);for(var jt=0;jt<ot;++jt)ie.charCodeAt(jt)>=128&&A("not-basic"),ve.push(ie.charCodeAt(jt));for(var Yt=ot>0?ot+1:0;Yt<Ce;){for(var Dt=De,It=1,Ht=_;;Ht+=_){Yt>=Ce&&A("invalid-input");var pt=G(ie.charCodeAt(Yt++));(pt>=_||pt>B((p-De)/It))&&A("overflow"),De+=pt*It;var Rt=Ht<=Ye?v:Ht>=Ye+D?D:Ht-Ye;if(pt<Rt)break;var $t=_-Rt;It>B(p/$t)&&A("overflow"),It*=$t}var qt=ve.length+1;Ye=Q(De-Dt,qt,Dt==0),B(De/qt)>p-it&&A("overflow"),it+=B(De/qt),De%=qt,ve.splice(De++,0,it)}return String.fromCodePoint.apply(String,ve)},$=function(ie){var ve=[];ie=se(ie);var Ce=ie.length,De=g,it=0,Ye=N,ot=!0,jt=!1,Yt=void 0;try{for(var Dt=ie[Symbol.iterator](),It;!(ot=(It=Dt.next()).done);ot=!0){var Ht=It.value;Ht<128&&ve.push(P(Ht))}}catch(Tn){jt=!0,Yt=Tn}finally{try{!ot&&Dt.return&&Dt.return()}finally{if(jt)throw Yt}}var pt=ve.length,Rt=pt;for(pt&&ve.push(E);Rt<Ce;){var $t=p,qt=!0,$r=!1,_r=void 0;try{for(var vr=ie[Symbol.iterator](),Cn;!(qt=(Cn=vr.next()).done);qt=!0){var hn=Cn.value;hn>=De&&hn<$t&&($t=hn)}}catch(Tn){$r=!0,_r=Tn}finally{try{!qt&&vr.return&&vr.return()}finally{if($r)throw _r}}var yr=Rt+1;$t-De>B((p-it)/yr)&&A("overflow"),it+=($t-De)*yr,De=$t;var Or=!0,dn=!1,wr=void 0;try{for(var Xr=ie[Symbol.iterator](),Ui;!(Or=(Ui=Xr.next()).done);Or=!0){var ji=Ui.value;if(ji<De&&++it>p&&A("overflow"),ji==De){for(var pn=it,_n=_;;_n+=_){var Xn=_n<=Ye?v:_n>=Ye+D?D:_n-Ye;if(pn<Xn)break;var qi=pn-Xn,Gn=_-Xn;ve.push(P(H(Xn+qi%Gn,0))),pn=B(qi/Gn)}ve.push(P(H(pn,0))),Ye=Q(it,yr,Rt==pt),it=0,++Rt}}}catch(Tn){dn=!0,wr=Tn}finally{try{!Or&&Xr.return&&Xr.return()}finally{if(dn)throw wr}}++it,++De}return ve.join("")},ae=function(ie){return j(ie,function(ve){return b.test(ve)?ee(ve.slice(4).toLowerCase()):ve})},ze=function(ie){return j(ie,function(ve){return I.test(ve)?"xn--"+$(ve):ve})},Ve={version:"2.1.0",ucs2:{decode:se,encode:Z},decode:ee,encode:$,toASCII:ze,toUnicode:ae},be={};function Ne(he){var ie=he.charCodeAt(0),ve=void 0;return ie<16?ve="%0"+ie.toString(16).toUpperCase():ie<128?ve="%"+ie.toString(16).toUpperCase():ie<2048?ve="%"+(ie>>6|192).toString(16).toUpperCase()+"%"+(ie&63|128).toString(16).toUpperCase():ve="%"+(ie>>12|224).toString(16).toUpperCase()+"%"+(ie>>6&63|128).toString(16).toUpperCase()+"%"+(ie&63|128).toString(16).toUpperCase(),ve}function _e(he){for(var ie="",ve=0,Ce=he.length;ve<Ce;){var De=parseInt(he.substr(ve+1,2),16);if(De<128)ie+=String.fromCharCode(De),ve+=3;else if(De>=194&&De<224){if(Ce-ve>=6){var it=parseInt(he.substr(ve+4,2),16);ie+=String.fromCharCode((De&31)<<6|it&63)}else ie+=he.substr(ve,6);ve+=6}else if(De>=224){if(Ce-ve>=9){var Ye=parseInt(he.substr(ve+4,2),16),ot=parseInt(he.substr(ve+7,2),16);ie+=String.fromCharCode((De&15)<<12|(Ye&63)<<6|ot&63)}else ie+=he.substr(ve,9);ve+=9}else ie+=he.substr(ve,3),ve+=3}return ie}function Se(he,ie){function ve(Ce){var De=_e(Ce);return De.match(ie.UNRESERVED)?De:Ce}return he.scheme&&(he.scheme=String(he.scheme).replace(ie.PCT_ENCODED,ve).toLowerCase().replace(ie.NOT_SCHEME,"")),he.userinfo!==void 0&&(he.userinfo=String(he.userinfo).replace(ie.PCT_ENCODED,ve).replace(ie.NOT_USERINFO,Ne).replace(ie.PCT_ENCODED,a)),he.host!==void 0&&(he.host=String(he.host).replace(ie.PCT_ENCODED,ve).toLowerCase().replace(ie.NOT_HOST,Ne).replace(ie.PCT_ENCODED,a)),he.path!==void 0&&(he.path=String(he.path).replace(ie.PCT_ENCODED,ve).replace(he.scheme?ie.NOT_PATH:ie.NOT_PATH_NOSCHEME,Ne).replace(ie.PCT_ENCODED,a)),he.query!==void 0&&(he.query=String(he.query).replace(ie.PCT_ENCODED,ve).replace(ie.NOT_QUERY,Ne).replace(ie.PCT_ENCODED,a)),he.fragment!==void 0&&(he.fragment=String(he.fragment).replace(ie.PCT_ENCODED,ve).replace(ie.NOT_FRAGMENT,Ne).replace(ie.PCT_ENCODED,a)),he}function et(he){return he.replace(/^0*(.*)/,"$1")||"0"}function vt(he,ie){var ve=he.match(ie.IPV4ADDRESS)||[],Ce=h(ve,2),De=Ce[1];return De?De.split(".").map(et).join("."):he}function rt(he,ie){var ve=he.match(ie.IPV6ADDRESS)||[],Ce=h(ve,3),De=Ce[1],it=Ce[2];if(De){for(var Ye=De.toLowerCase().split("::").reverse(),ot=h(Ye,2),jt=ot[0],Yt=ot[1],Dt=Yt?Yt.split(":").map(et):[],It=jt.split(":").map(et),Ht=ie.IPV4ADDRESS.test(It[It.length-1]),pt=Ht?7:8,Rt=It.length-pt,$t=Array(pt),qt=0;qt<pt;++qt)$t[qt]=Dt[qt]||It[Rt+qt]||"";Ht&&($t[pt-1]=vt($t[pt-1],ie));var $r=$t.reduce(function(yr,Or,dn){if(!Or||Or==="0"){var wr=yr[yr.length-1];wr&&wr.index+wr.length===dn?wr.length++:yr.push({index:dn,length:1})}return yr},[]),_r=$r.sort(function(yr,Or){return Or.length-yr.length})[0],vr=void 0;if(_r&&_r.length>1){var Cn=$t.slice(0,_r.index),hn=$t.slice(_r.index+_r.length);vr=Cn.join(":")+"::"+hn.join(":")}else vr=$t.join(":");return it&&(vr+="%"+it),vr}else return he}var Ae=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,qe="".match(/(){0}/)[1]===void 0;function Nt(he){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ve={},Ce=ie.iri!==!1?d:f;ie.reference==="suffix"&&(he=(ie.scheme?ie.scheme+":":"")+"//"+he);var De=he.match(Ae);if(De){qe?(ve.scheme=De[1],ve.userinfo=De[3],ve.host=De[4],ve.port=parseInt(De[5],10),ve.path=De[6]||"",ve.query=De[7],ve.fragment=De[8],isNaN(ve.port)&&(ve.port=De[5])):(ve.scheme=De[1]||void 0,ve.userinfo=he.indexOf("@")!==-1?De[3]:void 0,ve.host=he.indexOf("//")!==-1?De[4]:void 0,ve.port=parseInt(De[5],10),ve.path=De[6]||"",ve.query=he.indexOf("?")!==-1?De[7]:void 0,ve.fragment=he.indexOf("#")!==-1?De[8]:void 0,isNaN(ve.port)&&(ve.port=he.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?De[4]:void 0)),ve.host&&(ve.host=rt(vt(ve.host,Ce),Ce)),ve.scheme===void 0&&ve.userinfo===void 0&&ve.host===void 0&&ve.port===void 0&&!ve.path&&ve.query===void 0?ve.reference="same-document":ve.scheme===void 0?ve.reference="relative":ve.fragment===void 0?ve.reference="absolute":ve.reference="uri",ie.reference&&ie.reference!=="suffix"&&ie.reference!==ve.reference&&(ve.error=ve.error||"URI is not a "+ie.reference+" reference.");var it=be[(ie.scheme||ve.scheme||"").toLowerCase()];if(!ie.unicodeSupport&&(!it||!it.unicodeSupport)){if(ve.host&&(ie.domainHost||it&&it.domainHost))try{ve.host=Ve.toASCII(ve.host.replace(Ce.PCT_ENCODED,_e).toLowerCase())}catch(Ye){ve.error=ve.error||"Host's domain name can not be converted to ASCII via punycode: "+Ye}Se(ve,f)}else Se(ve,Ce);it&&it.parse&&it.parse(ve,ie)}else ve.error=ve.error||"URI can not be parsed.";return ve}function Ut(he,ie){var ve=ie.iri!==!1?d:f,Ce=[];return he.userinfo!==void 0&&(Ce.push(he.userinfo),Ce.push("@")),he.host!==void 0&&Ce.push(rt(vt(String(he.host),ve),ve).replace(ve.IPV6ADDRESS,function(De,it,Ye){return"["+it+(Ye?"%25"+Ye:"")+"]"})),(typeof he.port=="number"||typeof he.port=="string")&&(Ce.push(":"),Ce.push(String(he.port))),Ce.length?Ce.join(""):void 0}var Vt=/^\.\.?\//,St=/^\/\.(\/|$)/,Xt=/^\/\.\.(\/|$)/,je=/^\/?(?:.|\n)*?(?=\/|$)/;function He(he){for(var ie=[];he.length;)if(he.match(Vt))he=he.replace(Vt,"");else if(he.match(St))he=he.replace(St,"/");else if(he.match(Xt))he=he.replace(Xt,"/"),ie.pop();else if(he==="."||he==="..")he="";else{var ve=he.match(je);if(ve){var Ce=ve[0];he=he.slice(Ce.length),ie.push(Ce)}else throw new Error("Unexpected dot segment condition")}return ie.join("")}function We(he){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ve=ie.iri?d:f,Ce=[],De=be[(ie.scheme||he.scheme||"").toLowerCase()];if(De&&De.serialize&&De.serialize(he,ie),he.host&&!ve.IPV6ADDRESS.test(he.host)){if(ie.domainHost||De&&De.domainHost)try{he.host=ie.iri?Ve.toUnicode(he.host):Ve.toASCII(he.host.replace(ve.PCT_ENCODED,_e).toLowerCase())}catch(ot){he.error=he.error||"Host's domain name can not be converted to "+(ie.iri?"Unicode":"ASCII")+" via punycode: "+ot}}Se(he,ve),ie.reference!=="suffix"&&he.scheme&&(Ce.push(he.scheme),Ce.push(":"));var it=Ut(he,ie);if(it!==void 0&&(ie.reference!=="suffix"&&Ce.push("//"),Ce.push(it),he.path&&he.path.charAt(0)!=="/"&&Ce.push("/")),he.path!==void 0){var Ye=he.path;!ie.absolutePath&&(!De||!De.absolutePath)&&(Ye=He(Ye)),it===void 0&&(Ye=Ye.replace(/^\/\//,"/%2F")),Ce.push(Ye)}return he.query!==void 0&&(Ce.push("?"),Ce.push(he.query)),he.fragment!==void 0&&(Ce.push("#"),Ce.push(he.fragment)),Ce.join("")}function tt(he,ie){var ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ce=arguments[3],De={};return Ce||(he=Nt(We(he,ve),ve),ie=Nt(We(ie,ve),ve)),ve=ve||{},!ve.tolerant&&ie.scheme?(De.scheme=ie.scheme,De.userinfo=ie.userinfo,De.host=ie.host,De.port=ie.port,De.path=He(ie.path||""),De.query=ie.query):(ie.userinfo!==void 0||ie.host!==void 0||ie.port!==void 0?(De.userinfo=ie.userinfo,De.host=ie.host,De.port=ie.port,De.path=He(ie.path||""),De.query=ie.query):(ie.path?(ie.path.charAt(0)==="/"?De.path=He(ie.path):((he.userinfo!==void 0||he.host!==void 0||he.port!==void 0)&&!he.path?De.path="/"+ie.path:he.path?De.path=he.path.slice(0,he.path.lastIndexOf("/")+1)+ie.path:De.path=ie.path,De.path=He(De.path)),De.query=ie.query):(De.path=he.path,ie.query!==void 0?De.query=ie.query:De.query=he.query),De.userinfo=he.userinfo,De.host=he.host,De.port=he.port),De.scheme=he.scheme),De.fragment=ie.fragment,De}function ft(he,ie,ve){var Ce=o({scheme:"null"},ve);return We(tt(Nt(he,Ce),Nt(ie,Ce),Ce,!0),Ce)}function zt(he,ie){return typeof he=="string"?he=We(Nt(he,ie),ie):s(he)==="object"&&(he=Nt(We(he,ie),ie)),he}function X(he,ie,ve){return typeof he=="string"?he=We(Nt(he,ve),ve):s(he)==="object"&&(he=We(he,ve)),typeof ie=="string"?ie=We(Nt(ie,ve),ve):s(ie)==="object"&&(ie=We(ie,ve)),he===ie}function S(he,ie){return he&&he.toString().replace(!ie||!ie.iri?f.ESCAPE:d.ESCAPE,Ne)}function F(he,ie){return he&&he.toString().replace(!ie||!ie.iri?f.PCT_ENCODED:d.PCT_ENCODED,_e)}var K={scheme:"http",domainHost:!0,parse:function(ie,ve){return ie.host||(ie.error=ie.error||"HTTP URIs must have a host."),ie},serialize:function(ie,ve){var Ce=String(ie.scheme).toLowerCase()==="https";return(ie.port===(Ce?443:80)||ie.port==="")&&(ie.port=void 0),ie.path||(ie.path="/"),ie}},fe={scheme:"https",domainHost:K.domainHost,parse:K.parse,serialize:K.serialize};function ye(he){return typeof he.secure=="boolean"?he.secure:String(he.scheme).toLowerCase()==="wss"}var ke={scheme:"ws",domainHost:!0,parse:function(ie,ve){var Ce=ie;return Ce.secure=ye(Ce),Ce.resourceName=(Ce.path||"/")+(Ce.query?"?"+Ce.query:""),Ce.path=void 0,Ce.query=void 0,Ce},serialize:function(ie,ve){if((ie.port===(ye(ie)?443:80)||ie.port==="")&&(ie.port=void 0),typeof ie.secure=="boolean"&&(ie.scheme=ie.secure?"wss":"ws",ie.secure=void 0),ie.resourceName){var Ce=ie.resourceName.split("?"),De=h(Ce,2),it=De[0],Ye=De[1];ie.path=it&&it!=="/"?it:void 0,ie.query=Ye,ie.resourceName=void 0}return ie.fragment=void 0,ie}},Pe={scheme:"wss",domainHost:ke.domainHost,parse:ke.parse,serialize:ke.serialize},Xe={},Ze="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",ct="[0-9A-Fa-f]",mt=r(r("%[EFef]"+ct+"%"+ct+ct+"%"+ct+ct)+"|"+r("%[89A-Fa-f]"+ct+"%"+ct+ct)+"|"+r("%"+ct+ct)),dr="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Rr="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",lr=n(Rr,'[\\"\\\\]'),$n="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",bs=new RegExp(Ze,"g"),An=new RegExp(mt,"g"),ys=new RegExp(n("[^]",dr,"[\\.]",'[\\"]',lr),"g"),ba=new RegExp(n("[^]",Ze,$n),"g"),ws=ba;function ci(he){var ie=_e(he);return ie.match(bs)?ie:he}var Li={scheme:"mailto",parse:function(ie,ve){var Ce=ie,De=Ce.to=Ce.path?Ce.path.split(","):[];if(Ce.path=void 0,Ce.query){for(var it=!1,Ye={},ot=Ce.query.split("&"),jt=0,Yt=ot.length;jt<Yt;++jt){var Dt=ot[jt].split("=");switch(Dt[0]){case"to":for(var It=Dt[1].split(","),Ht=0,pt=It.length;Ht<pt;++Ht)De.push(It[Ht]);break;case"subject":Ce.subject=F(Dt[1],ve);break;case"body":Ce.body=F(Dt[1],ve);break;default:it=!0,Ye[F(Dt[0],ve)]=F(Dt[1],ve);break}}it&&(Ce.headers=Ye)}Ce.query=void 0;for(var Rt=0,$t=De.length;Rt<$t;++Rt){var qt=De[Rt].split("@");if(qt[0]=F(qt[0]),ve.unicodeSupport)qt[1]=F(qt[1],ve).toLowerCase();else try{qt[1]=Ve.toASCII(F(qt[1],ve).toLowerCase())}catch($r){Ce.error=Ce.error||"Email address's domain name can not be converted to ASCII via punycode: "+$r}De[Rt]=qt.join("@")}return Ce},serialize:function(ie,ve){var Ce=ie,De=l(ie.to);if(De){for(var it=0,Ye=De.length;it<Ye;++it){var ot=String(De[it]),jt=ot.lastIndexOf("@"),Yt=ot.slice(0,jt).replace(An,ci).replace(An,a).replace(ys,Ne),Dt=ot.slice(jt+1);try{Dt=ve.iri?Ve.toUnicode(Dt):Ve.toASCII(F(Dt,ve).toLowerCase())}catch(Rt){Ce.error=Ce.error||"Email address's domain name can not be converted to "+(ve.iri?"Unicode":"ASCII")+" via punycode: "+Rt}De[it]=Yt+"@"+Dt}Ce.path=De.join(",")}var It=ie.headers=ie.headers||{};ie.subject&&(It.subject=ie.subject),ie.body&&(It.body=ie.body);var Ht=[];for(var pt in It)It[pt]!==Xe[pt]&&Ht.push(pt.replace(An,ci).replace(An,a).replace(ba,Ne)+"="+It[pt].replace(An,ci).replace(An,a).replace(ws,Ne));return Ht.length&&(Ce.query=Ht.join("&")),Ce}},Es=/^([^\:]+)\:(.*)/,ya={scheme:"urn",parse:function(ie,ve){var Ce=ie.path&&ie.path.match(Es),De=ie;if(Ce){var it=ve.scheme||De.scheme||"urn",Ye=Ce[1].toLowerCase(),ot=Ce[2],jt=it+":"+(ve.nid||Ye),Yt=be[jt];De.nid=Ye,De.nss=ot,De.path=void 0,Yt&&(De=Yt.parse(De,ve))}else De.error=De.error||"URN can not be parsed.";return De},serialize:function(ie,ve){var Ce=ve.scheme||ie.scheme||"urn",De=ie.nid,it=Ce+":"+(ve.nid||De),Ye=be[it];Ye&&(ie=Ye.serialize(ie,ve));var ot=ie,jt=ie.nss;return ot.path=(De||ve.nid)+":"+jt,ot}},Ds=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Fr={scheme:"urn:uuid",parse:function(ie,ve){var Ce=ie;return Ce.uuid=Ce.nss,Ce.nss=void 0,!ve.tolerant&&(!Ce.uuid||!Ce.uuid.match(Ds))&&(Ce.error=Ce.error||"UUID is not valid."),Ce},serialize:function(ie,ve){var Ce=ie;return Ce.nss=(ie.uuid||"").toLowerCase(),Ce}};be[K.scheme]=K,be[fe.scheme]=fe,be[ke.scheme]=ke,be[Pe.scheme]=Pe,be[Li.scheme]=Li,be[ya.scheme]=ya,be[Fr.scheme]=Fr,t.SCHEMES=be,t.pctEncChar=Ne,t.pctDecChars=_e,t.parse=Nt,t.removeDotSegments=He,t.serialize=We,t.resolveComponents=tt,t.resolve=ft,t.normalize=zt,t.equal=X,t.escapeComponent=S,t.unescapeComponent=F,Object.defineProperty(t,"__esModule",{value:!0})})})(rl,rl.exports);var Sv=rl.exports,Tl=function i(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,s;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!i(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){var a=s[r];if(!i(e[a],t[a]))return!1}return!0}return e!==e&&t!==t},Pv=function(e){for(var t=0,n=e.length,r=0,s;r<n;)t++,s=e.charCodeAt(r++),s>=55296&&s<=56319&&r<n&&(s=e.charCodeAt(r),(s&64512)==56320&&r++);return t},Pi={copy:Iv,checkDataType:nl,checkDataTypes:Rv,coerceToTypes:Fv,toHash:Nl,getProperty:Sl,escapeQuotes:Pl,equal:Tl,ucs2length:Pv,varOccurences:Lv,varReplace:Uv,schemaHasRules:jv,schemaHasRulesExcept:qv,schemaUnknownRules:Mv,toQuotedString:il,getPathExpr:xv,getPath:Vv,getData:$v,unescapeFragment:Xv,unescapeJsonPointer:Rl,escapeFragment:Gv,escapeJsonPointer:Il};function Iv(i,e){e=e||{};for(var t in i)e[t]=i[t];return e}function nl(i,e,t,n){var r=n?" !== ":" === ",s=n?" || ":" && ",a=n?"!":"",l=n?"":"!";switch(i){case"null":return e+r+"null";case"array":return a+"Array.isArray("+e+")";case"object":return"("+a+e+s+"typeof "+e+r+'"object"'+s+l+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+r+'"number"'+s+l+"("+e+" % 1)"+s+e+r+e+(t?s+a+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+r+'"'+i+'"'+(t?s+a+"isFinite("+e+")":"")+")";default:return"typeof "+e+r+'"'+i+'"'}}function Rv(i,e,t){switch(i.length){case 1:return nl(i[0],e,t,!0);default:var n="",r=Nl(i);r.array&&r.object&&(n=r.null?"(":"(!"+e+" || ",n+="typeof "+e+' !== "object")',delete r.null,delete r.array,delete r.object),r.number&&delete r.integer;for(var s in r)n+=(n?" && ":"")+nl(s,e,t,!0);return n}}var iu=Nl(["string","number","integer","boolean","null"]);function Fv(i,e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++){var r=e[n];(iu[r]||i==="array"&&r==="array")&&(t[t.length]=r)}if(t.length)return t}else{if(iu[e])return[e];if(i==="array"&&e==="array")return["array"]}}function Nl(i){for(var e={},t=0;t<i.length;t++)e[i[t]]=!0;return e}var Ov=/^[a-z$_][a-z$_0-9]*$/i,Bv=/'|\\/g;function Sl(i){return typeof i=="number"?"["+i+"]":Ov.test(i)?"."+i:"['"+Pl(i)+"']"}function Pl(i){return i.replace(Bv,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function Lv(i,e){e+="[^0-9]";var t=i.match(new RegExp(e,"g"));return t?t.length:0}function Uv(i,e,t){return e+="([^0-9])",t=t.replace(/\$/g,"$$$$"),i.replace(new RegExp(e,"g"),t+"$1")}function jv(i,e){if(typeof i=="boolean")return!i;for(var t in i)if(e[t])return!0}function qv(i,e,t){if(typeof i=="boolean")return!i&&t!="not";for(var n in i)if(n!=t&&e[n])return!0}function Mv(i,e){if(typeof i!="boolean"){for(var t in i)if(!e[t])return t}}function il(i){return"'"+Pl(i)+"'"}function xv(i,e,t,n){var r=t?"'/' + "+e+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return ud(i,r)}function Vv(i,e,t){var n=il(t?"/"+Il(e):Sl(e));return ud(i,n)}var zv=/^\/(?:[^~]|~0|~1)*$/,Hv=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function $v(i,e,t){var n,r,s,a;if(i==="")return"rootData";if(i[0]=="/"){if(!zv.test(i))throw new Error("Invalid JSON-pointer: "+i);r=i,s="rootData"}else{if(a=i.match(Hv),!a)throw new Error("Invalid JSON-pointer: "+i);if(n=+a[1],r=a[2],r=="#"){if(n>=e)throw new Error("Cannot access property/index "+n+" levels up, current level is "+e);return t[e-n]}if(n>e)throw new Error("Cannot access data "+n+" levels up, current level is "+e);if(s="data"+(e-n||""),!r)return s}for(var l=s,o=r.split("/"),u=0;u<o.length;u++){var f=o[u];f&&(s+=Sl(Rl(f)),l+=" && "+s)}return l}function ud(i,e){return i=='""'?e:(i+" + "+e).replace(/([^\\])' \+ '/g,"$1")}function Xv(i){return Rl(decodeURIComponent(i))}function Gv(i){return encodeURIComponent(Il(i))}function Il(i){return i.replace(/~/g,"~0").replace(/\//g,"~1")}function Rl(i){return i.replace(/~1/g,"/").replace(/~0/g,"~")}var Qv=Pi,fd=Wv;function Wv(i){Qv.copy(i,this)}var cd={exports:{}},In=cd.exports=function(i,e,t){typeof e=="function"&&(t=e,e={}),t=e.cb||t;var n=typeof t=="function"?t:t.pre||function(){},r=t.post||function(){};ja(e,n,r,i,"",i)};In.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};In.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};In.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};In.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function ja(i,e,t,n,r,s,a,l,o,u){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,r,s,a,l,o,u);for(var f in n){var d=n[f];if(Array.isArray(d)){if(f in In.arrayKeywords)for(var h=0;h<d.length;h++)ja(i,e,t,d[h],r+"/"+f+"/"+h,s,r,f,n,h)}else if(f in In.propsKeywords){if(d&&typeof d=="object")for(var c in d)ja(i,e,t,d[c],r+"/"+f+"/"+Yv(c),s,r,f,n,c)}else(f in In.keywords||i.allKeys&&!(f in In.skipKeywords))&&ja(i,e,t,d,r+"/"+f,s,r,f,n)}t(n,r,s,a,l,o,u)}}function Yv(i){return i.replace(/~/g,"~0").replace(/\//g,"~1")}var Jv=cd.exports,oa=Sv,au=Tl,ls=Pi,Xa=fd,Kv=Jv,Fl=jn;jn.normalizeId=Rn;jn.fullPath=Ga;jn.url=Qa;jn.ids=nm;jn.inlineRef=al;jn.schema=os;function jn(i,e,t){var n=this._refs[t];if(typeof n=="string")if(this._refs[n])n=this._refs[n];else return jn.call(this,i,e,n);if(n=n||this._schemas[t],n instanceof Xa)return al(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var r=os.call(this,e,t),s,a,l;return r&&(s=r.schema,e=r.root,l=r.baseId),s instanceof Xa?a=s.validate||i.call(this,s.schema,e,void 0,l):s!==void 0&&(a=al(s,this._opts.inlineRefs)?s:i.call(this,s,e,void 0,l)),a}function os(i,e){var t=oa.parse(e),n=dd(t),r=Ga(this._getId(i.schema));if(Object.keys(i.schema).length===0||n!==r){var s=Rn(n),a=this._refs[s];if(typeof a=="string")return Zv.call(this,i,a,t);if(a instanceof Xa)a.validate||this._compile(a),i=a;else if(a=this._schemas[s],a instanceof Xa){if(a.validate||this._compile(a),s==Rn(e))return{schema:a,root:i,baseId:r};i=a}else return;if(!i.schema)return;r=Ga(this._getId(i.schema))}return hd.call(this,t,r,i.schema,i)}function Zv(i,e,t){var n=os.call(this,i,e);if(n){var r=n.schema,s=n.baseId;i=n.root;var a=this._getId(r);return a&&(s=Qa(s,a)),hd.call(this,t,s,r,i)}}var em=ls.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function hd(i,e,t,n){if(i.fragment=i.fragment||"",i.fragment.slice(0,1)=="/"){for(var r=i.fragment.split("/"),s=1;s<r.length;s++){var a=r[s];if(a){if(a=ls.unescapeFragment(a),t=t[a],t===void 0)break;var l;if(!em[a]&&(l=this._getId(t),l&&(e=Qa(e,l)),t.$ref)){var o=Qa(e,t.$ref),u=os.call(this,n,o);u&&(t=u.schema,n=u.root,e=u.baseId)}}}if(t!==void 0&&t!==n.schema)return{schema:t,root:n,baseId:e}}}var tm=ls.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function al(i,e){if(e===!1)return!1;if(e===void 0||e===!0)return sl(i);if(e)return ll(i)<=e}function sl(i){var e;if(Array.isArray(i)){for(var t=0;t<i.length;t++)if(e=i[t],typeof e=="object"&&!sl(e))return!1}else for(var n in i)if(n=="$ref"||(e=i[n],typeof e=="object"&&!sl(e)))return!1;return!0}function ll(i){var e=0,t;if(Array.isArray(i)){for(var n=0;n<i.length;n++)if(t=i[n],typeof t=="object"&&(e+=ll(t)),e==1/0)return 1/0}else for(var r in i){if(r=="$ref")return 1/0;if(tm[r])e++;else if(t=i[r],typeof t=="object"&&(e+=ll(t)+1),e==1/0)return 1/0}return e}function Ga(i,e){e!==!1&&(i=Rn(i));var t=oa.parse(i);return dd(t)}function dd(i){return oa.serialize(i).split("#")[0]+"#"}var rm=/#\/?$/;function Rn(i){return i?i.replace(rm,""):""}function Qa(i,e){return e=Rn(e),oa.resolve(i,e)}function nm(i){var e=Rn(this._getId(i)),t={"":e},n={"":Ga(e,!1)},r={},s=this;return Kv(i,{allKeys:!0},function(a,l,o,u,f,d,h){if(l!==""){var c=s._getId(a),p=t[u],_=n[u]+"/"+f;if(h!==void 0&&(_+="/"+(typeof h=="number"?h:ls.escapeFragment(h))),typeof c=="string"){c=p=Rn(p?oa.resolve(p,c):c);var v=s._refs[c];if(typeof v=="string"&&(v=s._refs[v]),v&&v.schema){if(!au(a,v.schema))throw new Error('id "'+c+'" resolves to more than one schema')}else if(c!=Rn(_))if(c[0]=="#"){if(r[c]&&!au(a,r[c]))throw new Error('id "'+c+'" resolves to more than one schema');r[c]=a}else s._refs[c]=_}t[l]=p,n[l]=_}}),r}var Os=Fl,Ol={Validation:su(im),MissingRef:su(Bl)};function im(i){this.message="validation failed",this.errors=i,this.ajv=this.validation=!0}Bl.message=function(i,e){return"can't resolve reference "+e+" from id "+i};function Bl(i,e,t){this.message=t||Bl.message(i,e),this.missingRef=Os.url(i,e),this.missingSchema=Os.normalizeId(Os.fullPath(this.missingRef))}function su(i){return i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i}var pd=function(i,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var t=typeof e.cycles=="boolean"?e.cycles:!1,n=e.cmp&&function(s){return function(a){return function(l,o){var u={key:l,value:a[l]},f={key:o,value:a[o]};return s(u,f)}}}(e.cmp),r=[];return function s(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var l,o;if(Array.isArray(a)){for(o="[",l=0;l<a.length;l++)l&&(o+=","),o+=s(a[l])||"null";return o+"]"}if(a===null)return"null";if(r.indexOf(a)!==-1){if(t)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=r.push(a)-1,f=Object.keys(a).sort(n&&n(a));for(o="",l=0;l<f.length;l++){var d=f[l],h=s(a[d]);h&&(o&&(o+=","),o+=JSON.stringify(d)+":"+h)}return r.splice(u,1),"{"+o+"}"}}(i)},_d=function(e,t,n){var r="",s=e.schema.$async===!0,a=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),l=e.self._getId(e.schema);if(e.opts.strictKeywords){var o=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(o){var u="unknown keyword: "+o;if(e.opts.strictKeywords==="log")e.logger.warn(u);else throw new Error(u)}}if(e.isTop&&(r+=" var validate = ",s&&(e.async=!0,r+="async "),r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",l&&(e.opts.sourceCode||e.opts.processCode)&&(r+=" "+("/*# sourceURL="+l+" */")+" ")),typeof e.schema=="boolean"||!(a||e.schema.$ref)){var t="false schema",f=e.level,d=e.dataLevel,h=e.schema[t],c=e.schemaPath+e.util.getProperty(t),p=e.errSchemaPath+"/"+t,g=!e.opts.allErrors,I,_="data"+(d||""),N="valid"+f;if(e.schema===!1){e.isTop?g=!0:r+=" var "+N+" = false; ";var v=v||[];v.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(I||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'boolean schema is false' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),r+=" } "):r+=" {} ";var D=r;r=v.pop(),!e.compositeRule&&g?e.async?r+=" throw new ValidationError(["+D+"]); ":r+=" validate.errors = ["+D+"]; return false; ":r+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?s?r+=" return data; ":r+=" validate.errors = null; return true; ":r+=" var "+N+" = true; ";return e.isTop&&(r+=" }; return validate; "),r}if(e.isTop){var U=e.isTop,f=e.level=0,d=e.dataLevel=0,_="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var T="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(T);else throw new Error(T)}r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{var f=e.level,d=e.dataLevel,_="data"+(d||"");if(l&&(e.baseId=e.resolve.url(e.baseId,l)),s&&!e.async)throw new Error("async schema in sync schema");r+=" var errs_"+f+" = errors;"}var N="valid"+f,g=!e.opts.allErrors,E="",b="",I,C=e.schema.type,O=Array.isArray(C);if(C&&e.opts.nullable&&e.schema.nullable===!0&&(O?C.indexOf("null")==-1&&(C=C.concat("null")):C!="null"&&(C=[C,"null"],O=!0)),O&&C.length==1&&(C=C[0],O=!1),e.schema.$ref&&a){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(a=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(r+=" "+e.RULES.all.$comment.code(e,"$comment")),C){if(e.opts.coerceTypes)var k=e.util.coerceToTypes(e.opts.coerceTypes,C);var B=e.RULES.types[C];if(k||O||B===!0||B&&!St(B)){var c=e.schemaPath+".type",p=e.errSchemaPath+"/type",c=e.schemaPath+".type",p=e.errSchemaPath+"/type",P=O?"checkDataTypes":"checkDataType";if(r+=" if ("+e.util[P](C,_,e.opts.strictNumbers,!0)+") { ",k){var A="dataType"+f,z="coerced"+f;r+=" var "+A+" = typeof "+_+"; var "+z+" = undefined; ",e.opts.coerceTypes=="array"&&(r+=" if ("+A+" == 'object' && Array.isArray("+_+") && "+_+".length == 1) { "+_+" = "+_+"[0]; "+A+" = typeof "+_+"; if ("+e.util.checkDataType(e.schema.type,_,e.opts.strictNumbers)+") "+z+" = "+_+"; } "),r+=" if ("+z+" !== undefined) ; ";var j=k;if(j)for(var se,Z=-1,G=j.length-1;Z<G;)se=j[Z+=1],se=="string"?r+=" else if ("+A+" == 'number' || "+A+" == 'boolean') "+z+" = '' + "+_+"; else if ("+_+" === null) "+z+" = ''; ":se=="number"||se=="integer"?(r+=" else if ("+A+" == 'boolean' || "+_+" === null || ("+A+" == 'string' && "+_+" && "+_+" == +"+_+" ",se=="integer"&&(r+=" && !("+_+" % 1)"),r+=")) "+z+" = +"+_+"; "):se=="boolean"?r+=" else if ("+_+" === 'false' || "+_+" === 0 || "+_+" === null) "+z+" = false; else if ("+_+" === 'true' || "+_+" === 1) "+z+" = true; ":se=="null"?r+=" else if ("+_+" === '' || "+_+" === 0 || "+_+" === false) "+z+" = null; ":e.opts.coerceTypes=="array"&&se=="array"&&(r+=" else if ("+A+" == 'string' || "+A+" == 'number' || "+A+" == 'boolean' || "+_+" == null) "+z+" = ["+_+"]; ");r+=" else {   ";var v=v||[];v.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(I||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",O?r+=""+C.join(","):r+=""+C,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",O?r+=""+C.join(","):r+=""+C,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),r+=" } "):r+=" {} ";var D=r;r=v.pop(),!e.compositeRule&&g?e.async?r+=" throw new ValidationError(["+D+"]); ":r+=" validate.errors = ["+D+"]; return false; ":r+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } if ("+z+" !== undefined) {  ";var H=d?"data"+(d-1||""):"parentData",Q=d?e.dataPathArr[d]:"parentDataProperty";r+=" "+_+" = "+z+"; ",d||(r+="if ("+H+" !== undefined)"),r+=" "+H+"["+Q+"] = "+z+"; } "}else{var v=v||[];v.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(I||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",O?r+=""+C.join(","):r+=""+C,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",O?r+=""+C.join(","):r+=""+C,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),r+=" } "):r+=" {} ";var D=r;r=v.pop(),!e.compositeRule&&g?e.async?r+=" throw new ValidationError(["+D+"]); ":r+=" validate.errors = ["+D+"]; return false; ":r+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" } "}}if(e.schema.$ref&&!a)r+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",g&&(r+=" } if (errors === ",U?r+="0":r+="errs_"+f,r+=") { ",b+="}");else{var ee=e.RULES;if(ee){for(var B,$=-1,ae=ee.length-1;$<ae;)if(B=ee[$+=1],St(B)){if(B.type&&(r+=" if ("+e.util.checkDataType(B.type,_,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(B.type=="object"&&e.schema.properties){var h=e.schema.properties,ze=Object.keys(h),Ve=ze;if(Ve)for(var be,Ne=-1,_e=Ve.length-1;Ne<_e;){be=Ve[Ne+=1];var Se=h[be];if(Se.default!==void 0){var et=_+e.util.getProperty(be);if(e.compositeRule){if(e.opts.strictDefaults){var T="default is ignored for: "+et;if(e.opts.strictDefaults==="log")e.logger.warn(T);else throw new Error(T)}}else r+=" if ("+et+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+et+" === null || "+et+" === '' "),r+=" ) "+et+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(Se.default)+" ":r+=" "+JSON.stringify(Se.default)+" ",r+="; "}}}else if(B.type=="array"&&Array.isArray(e.schema.items)){var vt=e.schema.items;if(vt){for(var Se,Z=-1,rt=vt.length-1;Z<rt;)if(Se=vt[Z+=1],Se.default!==void 0){var et=_+"["+Z+"]";if(e.compositeRule){if(e.opts.strictDefaults){var T="default is ignored for: "+et;if(e.opts.strictDefaults==="log")e.logger.warn(T);else throw new Error(T)}}else r+=" if ("+et+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+et+" === null || "+et+" === '' "),r+=" ) "+et+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(Se.default)+" ":r+=" "+JSON.stringify(Se.default)+" ",r+="; "}}}}var Ae=B.rules;if(Ae){for(var qe,Nt=-1,Ut=Ae.length-1;Nt<Ut;)if(qe=Ae[Nt+=1],Xt(qe)){var Vt=qe.code(e,qe.keyword,B.type);Vt&&(r+=" "+Vt+" ",g&&(E+="}"))}}if(g&&(r+=" "+E+" ",E=""),B.type&&(r+=" } ",C&&C===B.type&&!k)){r+=" else { ";var c=e.schemaPath+".type",p=e.errSchemaPath+"/type",v=v||[];v.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(I||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",O?r+=""+C.join(","):r+=""+C,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",O?r+=""+C.join(","):r+=""+C,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),r+=" } "):r+=" {} ";var D=r;r=v.pop(),!e.compositeRule&&g?e.async?r+=" throw new ValidationError(["+D+"]); ":r+=" validate.errors = ["+D+"]; return false; ":r+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}g&&(r+=" if (errors === ",U?r+="0":r+="errs_"+f,r+=") { ",b+="}")}}}g&&(r+=" "+b+" "),U?(s?(r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" }; return validate;"):r+=" var "+N+" = errors === errs_"+f+";";function St(He){for(var We=He.rules,tt=0;tt<We.length;tt++)if(Xt(We[tt]))return!0}function Xt(He){return e.schema[He.keyword]!==void 0||He.implements&&je(He)}function je(He){for(var We=He.implements,tt=0;tt<We.length;tt++)if(e.schema[We[tt]]!==void 0)return!0}return r},Ta=Fl,Wa=Pi,vd=Ol,am=pd,lu=_d,sm=Wa.ucs2length,lm=Tl,om=vd.Validation,um=ol;function ol(i,e,t,n){var r=this,s=this._opts,a=[void 0],l={},o=[],u={},f=[],d={},h=[];e=e||{schema:i,refVal:a,refs:l};var c=fm.call(this,i,e,n),p=this._compilations[c.index];if(c.compiling)return p.callValidate=T;var _=this._formats,v=this.RULES;try{var D=N(i,e,t,n);p.validate=D;var U=p.callValidate;return U&&(U.schema=D.schema,U.errors=null,U.refs=D.refs,U.refVal=D.refVal,U.root=D.root,U.$async=D.$async,s.sourceCode&&(U.source=D.source)),D}finally{cm.call(this,i,e,n)}function T(){var P=p.validate,A=P.apply(this,arguments);return T.errors=P.errors,A}function N(P,A,z,j){var se=!A||A&&A.schema==P;if(A.schema!=e.schema)return ol.call(r,P,A,z,j);var Z=P.$async===!0,G=lu({isTop:!0,schema:P,isRoot:se,baseId:j,root:A,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:vd.MissingRef,RULES:v,validate:lu,util:Wa,resolve:Ta,resolveRef:g,usePattern:O,useDefault:k,useCustomRule:B,opts:s,formats:_,logger:r.logger,self:r});G=Na(a,pm)+Na(o,hm)+Na(f,dm)+Na(h,_m)+G,s.processCode&&(G=s.processCode(G,P));var H;try{var Q=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",G);H=Q(r,v,_,e,a,f,h,lm,sm,om),a[0]=H}catch(ee){throw r.logger.error("Error compiling schema, function code:",G),ee}return H.schema=P,H.errors=null,H.refs=l,H.refVal=a,H.root=se?H:A,Z&&(H.$async=!0),s.sourceCode===!0&&(H.source={code:G,patterns:o,defaults:f}),H}function g(P,A,z){A=Ta.url(P,A);var j=l[A],se,Z;if(j!==void 0)return se=a[j],Z="refVal["+j+"]",C(se,Z);if(!z&&e.refs){var G=e.refs[A];if(G!==void 0)return se=e.refVal[G],Z=E(A,se),C(se,Z)}Z=E(A);var H=Ta.call(r,N,e,A);if(H===void 0){var Q=t&&t[A];Q&&(H=Ta.inlineRef(Q,s.inlineRefs)?Q:ol.call(r,Q,e,t,P))}if(H===void 0)b(A);else return I(A,H),C(H,Z)}function E(P,A){var z=a.length;return a[z]=A,l[P]=z,"refVal"+z}function b(P){delete l[P]}function I(P,A){var z=l[P];a[z]=A}function C(P,A){return typeof P=="object"||typeof P=="boolean"?{code:A,schema:P,inline:!0}:{code:A,$async:P&&!!P.$async}}function O(P){var A=u[P];return A===void 0&&(A=u[P]=o.length,o[A]=P),"pattern"+A}function k(P){switch(typeof P){case"boolean":case"number":return""+P;case"string":return Wa.toQuotedString(P);case"object":if(P===null)return"null";var A=am(P),z=d[A];return z===void 0&&(z=d[A]=f.length,f[z]=P),"default"+z}}function B(P,A,z,j){if(r._opts.validateSchema!==!1){var se=P.definition.dependencies;if(se&&!se.every(function(Ve){return Object.prototype.hasOwnProperty.call(z,Ve)}))throw new Error("parent schema must have all required keywords: "+se.join(","));var Z=P.definition.validateSchema;if(Z){var G=Z(A);if(!G){var H="keyword schema is invalid: "+r.errorsText(Z.errors);if(r._opts.validateSchema=="log")r.logger.error(H);else throw new Error(H)}}}var Q=P.definition.compile,ee=P.definition.inline,$=P.definition.macro,ae;if(Q)ae=Q.call(r,A,z,j);else if($)ae=$.call(r,A,z,j),s.validateSchema!==!1&&r.validateSchema(ae,!0);else if(ee)ae=ee.call(r,j,P.keyword,A,z);else if(ae=P.definition.validate,!ae)return;if(ae===void 0)throw new Error('custom keyword "'+P.keyword+'"failed to compile');var ze=h.length;return h[ze]=ae,{code:"customRule"+ze,validate:ae}}}function fm(i,e,t){var n=md.call(this,i,e,t);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:i,root:e,baseId:t},{index:n,compiling:!1})}function cm(i,e,t){var n=md.call(this,i,e,t);n>=0&&this._compilations.splice(n,1)}function md(i,e,t){for(var n=0;n<this._compilations.length;n++){var r=this._compilations[n];if(r.schema==i&&r.root==e&&r.baseId==t)return n}return-1}function hm(i,e){return"var pattern"+i+" = new RegExp("+Wa.toQuotedString(e[i])+");"}function dm(i){return"var default"+i+" = defaults["+i+"];"}function pm(i,e){return e[i]===void 0?"":"var refVal"+i+" = refVal["+i+"];"}function _m(i){return"var customRule"+i+" = customRules["+i+"];"}function Na(i,e){if(!i.length)return"";for(var t="",n=0;n<i.length;n++)t+=e(n,i);return t}var gd={exports:{}},us=gd.exports=function(){this._cache={}};us.prototype.put=function(e,t){this._cache[e]=t};us.prototype.get=function(e){return this._cache[e]};us.prototype.del=function(e){delete this._cache[e]};us.prototype.clear=function(){this._cache={}};var vm=gd.exports,mm=Pi,gm=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,bm=[0,31,28,31,30,31,30,31,31,30,31,30,31],ym=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,bd=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,wm=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Em=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,yd=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,wd=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,Ed=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,Dd=/^(?:\/(?:[^~/]|~0|~1)*)*$/,kd=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Ad=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,Dm=fs;function fs(i){return i=i=="full"?"full":"fast",mm.copy(fs[i])}fs.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":yd,url:wd,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:bd,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Nd,uuid:Ed,"json-pointer":Dd,"json-pointer-uri-fragment":kd,"relative-json-pointer":Ad};fs.full={date:Cd,time:Td,"date-time":Cm,uri:Nm,"uri-reference":Em,"uri-template":yd,url:wd,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:bd,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Nd,uuid:Ed,"json-pointer":Dd,"json-pointer-uri-fragment":kd,"relative-json-pointer":Ad};function km(i){return i%4===0&&(i%100!==0||i%400===0)}function Cd(i){var e=i.match(gm);if(!e)return!1;var t=+e[1],n=+e[2],r=+e[3];return n>=1&&n<=12&&r>=1&&r<=(n==2&&km(t)?29:bm[n])}function Td(i,e){var t=i.match(ym);if(!t)return!1;var n=t[1],r=t[2],s=t[3],a=t[5];return(n<=23&&r<=59&&s<=59||n==23&&r==59&&s==60)&&(!e||a)}var Am=/t|\s/i;function Cm(i){var e=i.split(Am);return e.length==2&&Cd(e[0])&&Td(e[1],!0)}var Tm=/\/|:/;function Nm(i){return Tm.test(i)&&wm.test(i)}var Sm=/[^\\]\\Z/;function Nd(i){if(Sm.test(i))return!1;try{return new RegExp(i),!0}catch{return!1}}var Pm=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,f="data"+(a||""),d="valid"+s,h,c;if(l=="#"||l=="#/")e.isRoot?(h=e.async,c="validate"):(h=e.root.schema.$async===!0,c="root.refVal[0]");else{var p=e.resolveRef(e.baseId,l,e.isRoot);if(p===void 0){var _=e.MissingRefError.message(e.baseId,l);if(e.opts.missingRefs=="fail"){e.logger.error(_);var v=v||[];v.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(o)+" , params: { ref: '"+e.util.escapeQuotes(l)+"' } ",e.opts.messages!==!1&&(r+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(l)+"' "),e.opts.verbose&&(r+=" , schema: "+e.util.toQuotedString(l)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var D=r;r=v.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+D+"]); ":r+=" validate.errors = ["+D+"]; return false; ":r+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(r+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(_),u&&(r+=" if (true) { ");else throw new e.MissingRefError(e.baseId,l,_)}else if(p.inline){var U=e.util.copy(e);U.level++;var T="valid"+U.level;U.schema=p.schema,U.schemaPath="",U.errSchemaPath=l;var N=e.validate(U).replace(/validate\.schema/g,p.code);r+=" "+N+" ",u&&(r+=" if ("+T+") { ")}else h=p.$async===!0||e.async&&p.$async!==!1,c=p.code}if(c){var v=v||[];v.push(r),r="",e.opts.passContext?r+=" "+c+".call(this, ":r+=" "+c+"( ",r+=" "+f+", (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var g=a?"data"+(a-1||""):"parentData",E=a?e.dataPathArr[a]:"parentDataProperty";r+=" , "+g+" , "+E+", rootData)  ";var b=r;if(r=v.pop(),h){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(r+=" var "+d+"; "),r+=" try { await "+b+"; ",u&&(r+=" "+d+" = true; "),r+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(r+=" "+d+" = false; "),r+=" } ",u&&(r+=" if ("+d+") { ")}else r+=" if (!"+b+") { if (vErrors === null) vErrors = "+c+".errors; else vErrors = vErrors.concat("+c+".errors); errors = vErrors.length; } ",u&&(r+=" else { ")}return r},Im=function(e,t,n){var r=" ",s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,o=!e.opts.allErrors,u=e.util.copy(e),f="";u.level++;var d="valid"+u.level,h=u.baseId,c=!0,p=s;if(p)for(var _,v=-1,D=p.length-1;v<D;)_=p[v+=1],(e.opts.strictKeywords?typeof _=="object"&&Object.keys(_).length>0||_===!1:e.util.schemaHasRules(_,e.RULES.all))&&(c=!1,u.schema=_,u.schemaPath=a+"["+v+"]",u.errSchemaPath=l+"/"+v,r+="  "+e.validate(u)+" ",u.baseId=h,o&&(r+=" if ("+d+") { ",f+="}"));return o&&(c?r+=" if (true) { ":r+=" "+f.slice(0,-1)+" "),r},Rm=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,d="data"+(a||""),h="valid"+s,c="errs__"+s,p=e.util.copy(e),_="";p.level++;var v="valid"+p.level,D=l.every(function(I){return e.opts.strictKeywords?typeof I=="object"&&Object.keys(I).length>0||I===!1:e.util.schemaHasRules(I,e.RULES.all)});if(D){var U=p.baseId;r+=" var "+c+" = errors; var "+h+" = false;  ";var T=e.compositeRule;e.compositeRule=p.compositeRule=!0;var N=l;if(N)for(var g,E=-1,b=N.length-1;E<b;)g=N[E+=1],p.schema=g,p.schemaPath=o+"["+E+"]",p.errSchemaPath=u+"/"+E,r+="  "+e.validate(p)+" ",p.baseId=U,r+=" "+h+" = "+h+" || "+v+"; if (!"+h+") { ",_+="}";e.compositeRule=p.compositeRule=T,r+=" "+_+" if (!"+h+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" } else {  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else f&&(r+=" if (true) { ");return r},Fm=function(e,t,n){var r=" ",s=e.schema[t],a=e.errSchemaPath+"/"+t;e.opts.allErrors;var l=e.util.toQuotedString(s);return e.opts.$comment===!0?r+=" console.log("+l+");":typeof e.opts.$comment=="function"&&(r+=" self._opts.$comment("+l+", "+e.util.toQuotedString(a)+", validate.root.schema);"),r},Om=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,d="data"+(a||""),h="valid"+s,c=e.opts.$data&&l&&l.$data;c&&(r+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; "),c||(r+=" var schema"+s+" = validate.schema"+o+";"),r+="var "+h+" = equal("+d+", schema"+s+"); if (!"+h+") {   ";var p=p||[];p.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValue: schema"+s+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to constant' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var _=r;return r=p.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+_+"]); ":r+=" validate.errors = ["+_+"]; return false; ":r+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",f&&(r+=" else { "),r},Bm=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,d="data"+(a||""),h="valid"+s,c="errs__"+s,p=e.util.copy(e),_="";p.level++;var v="valid"+p.level,D="i"+s,U=p.dataLevel=e.dataLevel+1,T="data"+U,N=e.baseId,g=e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all);if(r+="var "+c+" = errors;var "+h+";",g){var E=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=l,p.schemaPath=o,p.errSchemaPath=u,r+=" var "+v+" = false; for (var "+D+" = 0; "+D+" < "+d+".length; "+D+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,D,e.opts.jsonPointers,!0);var b=d+"["+D+"]";p.dataPathArr[U]=D;var I=e.validate(p);p.baseId=N,e.util.varOccurences(I,T)<2?r+=" "+e.util.varReplace(I,T,b)+" ":r+=" var "+T+" = "+b+"; "+I+" ",r+=" if ("+v+") break; }  ",e.compositeRule=p.compositeRule=E,r+=" "+_+" if (!"+v+") {"}else r+=" if ("+d+".length == 0) {";var C=C||[];C.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should contain a valid item' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var O=r;return r=C.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+O+"]); ":r+=" validate.errors = ["+O+"]; return false; ":r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { ",g&&(r+="  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; } "),e.opts.allErrors&&(r+=" } "),r},Lm=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,d="data"+(a||""),h="errs__"+s,c=e.util.copy(e),p="";c.level++;var _="valid"+c.level,v={},D={},U=e.opts.ownProperties;for(E in l)if(E!="__proto__"){var T=l[E],N=Array.isArray(T)?D:v;N[E]=T}r+="var "+h+" = errors;";var g=e.errorPath;r+="var missing"+s+";";for(var E in D)if(N=D[E],N.length){if(r+=" if ( "+d+e.util.getProperty(E)+" !== undefined ",U&&(r+=" && Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(E)+"') "),f){r+=" && ( ";var b=N;if(b)for(var I,C=-1,O=b.length-1;C<O;){I=b[C+=1],C&&(r+=" || ");var k=e.util.getProperty(I),B=d+k;r+=" ( ( "+B+" === undefined ",U&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(I)+"') "),r+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?I:k)+") ) "}r+=")) {  ";var P="missing"+s,A="' + "+P+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(g,P,!0):g+" + "+P);var z=z||[];z.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(E)+"', missingProperty: '"+A+"', depsCount: "+N.length+", deps: '"+e.util.escapeQuotes(N.length==1?N[0]:N.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",N.length==1?r+="property "+e.util.escapeQuotes(N[0]):r+="properties "+e.util.escapeQuotes(N.join(", ")),r+=" when property "+e.util.escapeQuotes(E)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var j=r;r=z.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+j+"]); ":r+=" validate.errors = ["+j+"]; return false; ":r+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var se=N;if(se)for(var I,Z=-1,G=se.length-1;Z<G;){I=se[Z+=1];var k=e.util.getProperty(I),A=e.util.escapeQuotes(I),B=d+k;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(g,I,e.opts.jsonPointers)),r+=" if ( "+B+" === undefined ",U&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(I)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(E)+"', missingProperty: '"+A+"', depsCount: "+N.length+", deps: '"+e.util.escapeQuotes(N.length==1?N[0]:N.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",N.length==1?r+="property "+e.util.escapeQuotes(N[0]):r+="properties "+e.util.escapeQuotes(N.join(", ")),r+=" when property "+e.util.escapeQuotes(E)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",f&&(p+="}",r+=" else { ")}e.errorPath=g;var H=c.baseId;for(var E in v){var T=v[E];(e.opts.strictKeywords?typeof T=="object"&&Object.keys(T).length>0||T===!1:e.util.schemaHasRules(T,e.RULES.all))&&(r+=" "+_+" = true; if ( "+d+e.util.getProperty(E)+" !== undefined ",U&&(r+=" && Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(E)+"') "),r+=") { ",c.schema=T,c.schemaPath=o+e.util.getProperty(E),c.errSchemaPath=u+"/"+e.util.escapeFragment(E),r+="  "+e.validate(c)+" ",c.baseId=H,r+=" }  ",f&&(r+=" if ("+_+") { ",p+="}"))}return f&&(r+="   "+p+" if ("+h+" == errors) {"),r},Um=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,d="data"+(a||""),h="valid"+s,c=e.opts.$data&&l&&l.$data;c&&(r+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ");var p="i"+s,_="schema"+s;c||(r+=" var "+_+" = validate.schema"+o+";"),r+="var "+h+";",c&&(r+=" if (schema"+s+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+s+")) "+h+" = false; else {"),r+=""+h+" = false;for (var "+p+"=0; "+p+"<"+_+".length; "+p+"++) if (equal("+d+", "+_+"["+p+"])) { "+h+" = true; break; }",c&&(r+="  }  "),r+=" if (!"+h+") {   ";var v=v||[];v.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValues: schema"+s+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var D=r;return r=v.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+D+"]); ":r+=" validate.errors = ["+D+"]; return false; ":r+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",f&&(r+=" else { "),r},jm=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,d="data"+(a||"");if(e.opts.format===!1)return f&&(r+=" if (true) { "),r;var h=e.opts.$data&&l&&l.$data,c;h?(r+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",c="schema"+s):c=l;var p=e.opts.unknownFormats,_=Array.isArray(p);if(h){var v="format"+s,D="isObject"+s,U="formatType"+s;r+=" var "+v+" = formats["+c+"]; var "+D+" = typeof "+v+" == 'object' && !("+v+" instanceof RegExp) && "+v+".validate; var "+U+" = "+D+" && "+v+".type || 'string'; if ("+D+") { ",e.async&&(r+=" var async"+s+" = "+v+".async; "),r+=" "+v+" = "+v+".validate; } if (  ",h&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'string') || "),r+=" (",p!="ignore"&&(r+=" ("+c+" && !"+v+" ",_&&(r+=" && self._opts.unknownFormats.indexOf("+c+") == -1 "),r+=") || "),r+=" ("+v+" && "+U+" == '"+n+"' && !(typeof "+v+" == 'function' ? ",e.async?r+=" (async"+s+" ? await "+v+"("+d+") : "+v+"("+d+")) ":r+=" "+v+"("+d+") ",r+=" : "+v+".test("+d+"))))) {"}else{var v=e.formats[l];if(!v){if(p=="ignore")return e.logger.warn('unknown format "'+l+'" ignored in schema at path "'+e.errSchemaPath+'"'),f&&(r+=" if (true) { "),r;if(_&&p.indexOf(l)>=0)return f&&(r+=" if (true) { "),r;throw new Error('unknown format "'+l+'" is used in schema at path "'+e.errSchemaPath+'"')}var D=typeof v=="object"&&!(v instanceof RegExp)&&v.validate,U=D&&v.type||"string";if(D){var T=v.async===!0;v=v.validate}if(U!=n)return f&&(r+=" if (true) { "),r;if(T){if(!e.async)throw new Error("async format in sync schema");var N="formats"+e.util.getProperty(l)+".validate";r+=" if (!(await "+N+"("+d+"))) { "}else{r+=" if (! ";var N="formats"+e.util.getProperty(l);D&&(N+=".validate"),typeof v=="function"?r+=" "+N+"("+d+") ":r+=" "+N+".test("+d+") ",r+=") { "}}var g=g||[];g.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { format:  ",h?r+=""+c:r+=""+e.util.toQuotedString(l),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match format "`,h?r+="' + "+c+" + '":r+=""+e.util.escapeQuotes(l),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",h?r+="validate.schema"+o:r+=""+e.util.toQuotedString(l),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var E=r;return r=g.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+E+"]); ":r+=" validate.errors = ["+E+"]; return false; ":r+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",f&&(r+=" else { "),r},qm=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,d="data"+(a||""),h="valid"+s,c="errs__"+s,p=e.util.copy(e);p.level++;var _="valid"+p.level,v=e.schema.then,D=e.schema.else,U=v!==void 0&&(e.opts.strictKeywords?typeof v=="object"&&Object.keys(v).length>0||v===!1:e.util.schemaHasRules(v,e.RULES.all)),T=D!==void 0&&(e.opts.strictKeywords?typeof D=="object"&&Object.keys(D).length>0||D===!1:e.util.schemaHasRules(D,e.RULES.all)),N=p.baseId;if(U||T){var g;p.createErrors=!1,p.schema=l,p.schemaPath=o,p.errSchemaPath=u,r+=" var "+c+" = errors; var "+h+" = true;  ";var E=e.compositeRule;e.compositeRule=p.compositeRule=!0,r+="  "+e.validate(p)+" ",p.baseId=N,p.createErrors=!0,r+="  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; }  ",e.compositeRule=p.compositeRule=E,U?(r+=" if ("+_+") {  ",p.schema=e.schema.then,p.schemaPath=e.schemaPath+".then",p.errSchemaPath=e.errSchemaPath+"/then",r+="  "+e.validate(p)+" ",p.baseId=N,r+=" "+h+" = "+_+"; ",U&&T?(g="ifClause"+s,r+=" var "+g+" = 'then'; "):g="'then'",r+=" } ",T&&(r+=" else { ")):r+=" if (!"+_+") { ",T&&(p.schema=e.schema.else,p.schemaPath=e.schemaPath+".else",p.errSchemaPath=e.errSchemaPath+"/else",r+="  "+e.validate(p)+" ",p.baseId=N,r+=" "+h+" = "+_+"; ",U&&T?(g="ifClause"+s,r+=" var "+g+" = 'else'; "):g="'else'",r+=" } "),r+=" if (!"+h+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { failingKeyword: "+g+" } ",e.opts.messages!==!1&&(r+=` , message: 'should match "' + `+g+` + '" schema' `),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" }   ",f&&(r+=" else { ")}else f&&(r+=" if (true) { ");return r},Mm=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,d="data"+(a||""),h="valid"+s,c="errs__"+s,p=e.util.copy(e),_="";p.level++;var v="valid"+p.level,D="i"+s,U=p.dataLevel=e.dataLevel+1,T="data"+U,N=e.baseId;if(r+="var "+c+" = errors;var "+h+";",Array.isArray(l)){var g=e.schema.additionalItems;if(g===!1){r+=" "+h+" = "+d+".length <= "+l.length+"; ";var E=u;u=e.errSchemaPath+"/additionalItems",r+="  if (!"+h+") {   ";var b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+l.length+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have more than "+l.length+" items' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var I=r;r=b.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+I+"]); ":r+=" validate.errors = ["+I+"]; return false; ":r+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",u=E,f&&(_+="}",r+=" else { ")}var C=l;if(C){for(var O,k=-1,B=C.length-1;k<B;)if(O=C[k+=1],e.opts.strictKeywords?typeof O=="object"&&Object.keys(O).length>0||O===!1:e.util.schemaHasRules(O,e.RULES.all)){r+=" "+v+" = true; if ("+d+".length > "+k+") { ";var P=d+"["+k+"]";p.schema=O,p.schemaPath=o+"["+k+"]",p.errSchemaPath=u+"/"+k,p.errorPath=e.util.getPathExpr(e.errorPath,k,e.opts.jsonPointers,!0),p.dataPathArr[U]=k;var A=e.validate(p);p.baseId=N,e.util.varOccurences(A,T)<2?r+=" "+e.util.varReplace(A,T,P)+" ":r+=" var "+T+" = "+P+"; "+A+" ",r+=" }  ",f&&(r+=" if ("+v+") { ",_+="}")}}if(typeof g=="object"&&(e.opts.strictKeywords?typeof g=="object"&&Object.keys(g).length>0||g===!1:e.util.schemaHasRules(g,e.RULES.all))){p.schema=g,p.schemaPath=e.schemaPath+".additionalItems",p.errSchemaPath=e.errSchemaPath+"/additionalItems",r+=" "+v+" = true; if ("+d+".length > "+l.length+") {  for (var "+D+" = "+l.length+"; "+D+" < "+d+".length; "+D+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,D,e.opts.jsonPointers,!0);var P=d+"["+D+"]";p.dataPathArr[U]=D;var A=e.validate(p);p.baseId=N,e.util.varOccurences(A,T)<2?r+=" "+e.util.varReplace(A,T,P)+" ":r+=" var "+T+" = "+P+"; "+A+" ",f&&(r+=" if (!"+v+") break; "),r+=" } }  ",f&&(r+=" if ("+v+") { ",_+="}")}}else if(e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all)){p.schema=l,p.schemaPath=o,p.errSchemaPath=u,r+="  for (var "+D+" = 0; "+D+" < "+d+".length; "+D+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,D,e.opts.jsonPointers,!0);var P=d+"["+D+"]";p.dataPathArr[U]=D;var A=e.validate(p);p.baseId=N,e.util.varOccurences(A,T)<2?r+=" "+e.util.varReplace(A,T,P)+" ":r+=" var "+T+" = "+P+"; "+A+" ",f&&(r+=" if (!"+v+") break; "),r+=" }"}return f&&(r+=" "+_+" if ("+c+" == errors) {"),r},ou=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,N,d="data"+(a||""),h=e.opts.$data&&l&&l.$data,c;h?(r+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",c="schema"+s):c=l;var p=t=="maximum",_=p?"exclusiveMaximum":"exclusiveMinimum",v=e.schema[_],D=e.opts.$data&&v&&v.$data,U=p?"<":">",T=p?">":"<",N=void 0;if(!(h||typeof l=="number"||l===void 0))throw new Error(t+" must be number");if(!(D||v===void 0||typeof v=="number"||typeof v=="boolean"))throw new Error(_+" must be number or boolean");if(D){var g=e.util.getData(v.$data,a,e.dataPathArr),E="exclusive"+s,b="exclType"+s,I="exclIsNumber"+s,C="op"+s,O="' + "+C+" + '";r+=" var schemaExcl"+s+" = "+g+"; ",g="schemaExcl"+s,r+=" var "+E+"; var "+b+" = typeof "+g+"; if ("+b+" != 'boolean' && "+b+" != 'undefined' && "+b+" != 'number') { ";var N=_,k=k||[];k.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(N||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: '"+_+" should be boolean' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var B=r;r=k.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+B+"]); ":r+=" validate.errors = ["+B+"]; return false; ":r+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else if ( ",h&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),r+=" "+b+" == 'number' ? ( ("+E+" = "+c+" === undefined || "+g+" "+U+"= "+c+") ? "+d+" "+T+"= "+g+" : "+d+" "+T+" "+c+" ) : ( ("+E+" = "+g+" === true) ? "+d+" "+T+"= "+c+" : "+d+" "+T+" "+c+" ) || "+d+" !== "+d+") { var op"+s+" = "+E+" ? '"+U+"' : '"+U+"='; ",l===void 0&&(N=_,u=e.errSchemaPath+"/"+_,c=g,h=D)}else{var I=typeof v=="number",O=U;if(I&&h){var C="'"+O+"'";r+=" if ( ",h&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),r+=" ( "+c+" === undefined || "+v+" "+U+"= "+c+" ? "+d+" "+T+"= "+v+" : "+d+" "+T+" "+c+" ) || "+d+" !== "+d+") { "}else{I&&l===void 0?(E=!0,N=_,u=e.errSchemaPath+"/"+_,c=v,T+="="):(I&&(c=Math[p?"min":"max"](v,l)),v===(I?c:!0)?(E=!0,N=_,u=e.errSchemaPath+"/"+_,T+="="):(E=!1,O+="="));var C="'"+O+"'";r+=" if ( ",h&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),r+=" "+d+" "+T+" "+c+" || "+d+" !== "+d+") { "}}N=N||t;var k=k||[];k.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(N||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { comparison: "+C+", limit: "+c+", exclusive: "+E+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be "+O+" ",h?r+="' + "+c:r+=""+c+"'"),e.opts.verbose&&(r+=" , schema:  ",h?r+="validate.schema"+o:r+=""+l,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var B=r;return r=k.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+B+"]); ":r+=" validate.errors = ["+B+"]; return false; ":r+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",f&&(r+=" else { "),r},uu=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,_,d="data"+(a||""),h=e.opts.$data&&l&&l.$data,c;if(h?(r+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",c="schema"+s):c=l,!(h||typeof l=="number"))throw new Error(t+" must be number");var p=t=="maxItems"?">":"<";r+="if ( ",h&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),r+=" "+d+".length "+p+" "+c+") { ";var _=t,v=v||[];v.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(_||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+c+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",t=="maxItems"?r+="more":r+="fewer",r+=" than ",h?r+="' + "+c+" + '":r+=""+l,r+=" items' "),e.opts.verbose&&(r+=" , schema:  ",h?r+="validate.schema"+o:r+=""+l,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var D=r;return r=v.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+D+"]); ":r+=" validate.errors = ["+D+"]; return false; ":r+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",f&&(r+=" else { "),r},fu=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,_,d="data"+(a||""),h=e.opts.$data&&l&&l.$data,c;if(h?(r+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",c="schema"+s):c=l,!(h||typeof l=="number"))throw new Error(t+" must be number");var p=t=="maxLength"?">":"<";r+="if ( ",h&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),e.opts.unicode===!1?r+=" "+d+".length ":r+=" ucs2length("+d+") ",r+=" "+p+" "+c+") { ";var _=t,v=v||[];v.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(_||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+c+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be ",t=="maxLength"?r+="longer":r+="shorter",r+=" than ",h?r+="' + "+c+" + '":r+=""+l,r+=" characters' "),e.opts.verbose&&(r+=" , schema:  ",h?r+="validate.schema"+o:r+=""+l,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var D=r;return r=v.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+D+"]); ":r+=" validate.errors = ["+D+"]; return false; ":r+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",f&&(r+=" else { "),r},cu=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,_,d="data"+(a||""),h=e.opts.$data&&l&&l.$data,c;if(h?(r+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",c="schema"+s):c=l,!(h||typeof l=="number"))throw new Error(t+" must be number");var p=t=="maxProperties"?">":"<";r+="if ( ",h&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),r+=" Object.keys("+d+").length "+p+" "+c+") { ";var _=t,v=v||[];v.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(_||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+c+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",t=="maxProperties"?r+="more":r+="fewer",r+=" than ",h?r+="' + "+c+" + '":r+=""+l,r+=" properties' "),e.opts.verbose&&(r+=" , schema:  ",h?r+="validate.schema"+o:r+=""+l,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var D=r;return r=v.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+D+"]); ":r+=" validate.errors = ["+D+"]; return false; ":r+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",f&&(r+=" else { "),r},xm=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,d="data"+(a||""),h=e.opts.$data&&l&&l.$data,c;if(h?(r+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",c="schema"+s):c=l,!(h||typeof l=="number"))throw new Error(t+" must be number");r+="var division"+s+";if (",h&&(r+=" "+c+" !== undefined && ( typeof "+c+" != 'number' || "),r+=" (division"+s+" = "+d+" / "+c+", ",e.opts.multipleOfPrecision?r+=" Math.abs(Math.round(division"+s+") - division"+s+") > 1e-"+e.opts.multipleOfPrecision+" ":r+=" division"+s+" !== parseInt(division"+s+") ",r+=" ) ",h&&(r+="  )  "),r+=" ) {   ";var p=p||[];p.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { multipleOf: "+c+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be multiple of ",h?r+="' + "+c:r+=""+c+"'"),e.opts.verbose&&(r+=" , schema:  ",h?r+="validate.schema"+o:r+=""+l,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var _=r;return r=p.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+_+"]); ":r+=" validate.errors = ["+_+"]; return false; ":r+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",f&&(r+=" else { "),r},Vm=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,d="data"+(a||""),h="errs__"+s,c=e.util.copy(e);c.level++;var p="valid"+c.level;if(e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all)){c.schema=l,c.schemaPath=o,c.errSchemaPath=u,r+=" var "+h+" = errors;  ";var _=e.compositeRule;e.compositeRule=c.compositeRule=!0,c.createErrors=!1;var v;c.opts.allErrors&&(v=c.opts.allErrors,c.opts.allErrors=!1),r+=" "+e.validate(c)+" ",c.createErrors=!0,v&&(c.opts.allErrors=v),e.compositeRule=c.compositeRule=_,r+=" if ("+p+") {   ";var D=D||[];D.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var U=r;r=D.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+U+"]); ":r+=" validate.errors = ["+U+"]; return false; ":r+=" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",f&&(r+=" if (false) { ");return r},zm=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,d="data"+(a||""),h="valid"+s,c="errs__"+s,p=e.util.copy(e),_="";p.level++;var v="valid"+p.level,D=p.baseId,U="prevValid"+s,T="passingSchemas"+s;r+="var "+c+" = errors , "+U+" = false , "+h+" = false , "+T+" = null; ";var N=e.compositeRule;e.compositeRule=p.compositeRule=!0;var g=l;if(g)for(var E,b=-1,I=g.length-1;b<I;)E=g[b+=1],(e.opts.strictKeywords?typeof E=="object"&&Object.keys(E).length>0||E===!1:e.util.schemaHasRules(E,e.RULES.all))?(p.schema=E,p.schemaPath=o+"["+b+"]",p.errSchemaPath=u+"/"+b,r+="  "+e.validate(p)+" ",p.baseId=D):r+=" var "+v+" = true; ",b&&(r+=" if ("+v+" && "+U+") { "+h+" = false; "+T+" = ["+T+", "+b+"]; } else { ",_+="}"),r+=" if ("+v+") { "+h+" = "+U+" = true; "+T+" = "+b+"; }";return e.compositeRule=p.compositeRule=N,r+=""+_+"if (!"+h+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { passingSchemas: "+T+" } ",e.opts.messages!==!1&&(r+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+="} else {  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; }",e.opts.allErrors&&(r+=" } "),r},Hm=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,d="data"+(a||""),h=e.opts.$data&&l&&l.$data,c;h?(r+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",c="schema"+s):c=l;var p=h?"(new RegExp("+c+"))":e.usePattern(l);r+="if ( ",h&&(r+=" ("+c+" !== undefined && typeof "+c+" != 'string') || "),r+=" !"+p+".test("+d+") ) {   ";var _=_||[];_.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { pattern:  ",h?r+=""+c:r+=""+e.util.toQuotedString(l),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match pattern "`,h?r+="' + "+c+" + '":r+=""+e.util.escapeQuotes(l),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",h?r+="validate.schema"+o:r+=""+e.util.toQuotedString(l),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var v=r;return r=_.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",f&&(r+=" else { "),r},$m=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,d="data"+(a||""),h="errs__"+s,c=e.util.copy(e),p="";c.level++;var _="valid"+c.level,v="key"+s,D="idx"+s,U=c.dataLevel=e.dataLevel+1,T="data"+U,N="dataProperties"+s,g=Object.keys(l||{}).filter(Z),E=e.schema.patternProperties||{},b=Object.keys(E).filter(Z),I=e.schema.additionalProperties,C=g.length||b.length,O=I===!1,k=typeof I=="object"&&Object.keys(I).length,B=e.opts.removeAdditional,P=O||k||B,A=e.opts.ownProperties,z=e.baseId,j=e.schema.required;if(j&&!(e.opts.$data&&j.$data)&&j.length<e.opts.loopRequired)var se=e.util.toHash(j);function Z(X){return X!=="__proto__"}if(r+="var "+h+" = errors;var "+_+" = true;",A&&(r+=" var "+N+" = undefined;"),P){if(A?r+=" "+N+" = "+N+" || Object.keys("+d+"); for (var "+D+"=0; "+D+"<"+N+".length; "+D+"++) { var "+v+" = "+N+"["+D+"]; ":r+=" for (var "+v+" in "+d+") { ",C){if(r+=" var isAdditional"+s+" = !(false ",g.length)if(g.length>8)r+=" || validate.schema"+o+".hasOwnProperty("+v+") ";else{var G=g;if(G)for(var H,Q=-1,ee=G.length-1;Q<ee;)H=G[Q+=1],r+=" || "+v+" == "+e.util.toQuotedString(H)+" "}if(b.length){var $=b;if($)for(var ae,ze=-1,Ve=$.length-1;ze<Ve;)ae=$[ze+=1],r+=" || "+e.usePattern(ae)+".test("+v+") "}r+=" ); if (isAdditional"+s+") { "}if(B=="all")r+=" delete "+d+"["+v+"]; ";else{var be=e.errorPath,Ne="' + "+v+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers)),O)if(B)r+=" delete "+d+"["+v+"]; ";else{r+=" "+_+" = false; ";var _e=u;u=e.errSchemaPath+"/additionalProperties";var Se=Se||[];Se.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { additionalProperty: '"+Ne+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is an invalid additional property":r+="should NOT have additional properties",r+="' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var et=r;r=Se.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+et+"]); ":r+=" validate.errors = ["+et+"]; return false; ":r+=" var err = "+et+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=_e,f&&(r+=" break; ")}else if(k)if(B=="failing"){r+=" var "+h+" = errors;  ";var vt=e.compositeRule;e.compositeRule=c.compositeRule=!0,c.schema=I,c.schemaPath=e.schemaPath+".additionalProperties",c.errSchemaPath=e.errSchemaPath+"/additionalProperties",c.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);var rt=d+"["+v+"]";c.dataPathArr[U]=v;var Ae=e.validate(c);c.baseId=z,e.util.varOccurences(Ae,T)<2?r+=" "+e.util.varReplace(Ae,T,rt)+" ":r+=" var "+T+" = "+rt+"; "+Ae+" ",r+=" if (!"+_+") { errors = "+h+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+d+"["+v+"]; }  ",e.compositeRule=c.compositeRule=vt}else{c.schema=I,c.schemaPath=e.schemaPath+".additionalProperties",c.errSchemaPath=e.errSchemaPath+"/additionalProperties",c.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);var rt=d+"["+v+"]";c.dataPathArr[U]=v;var Ae=e.validate(c);c.baseId=z,e.util.varOccurences(Ae,T)<2?r+=" "+e.util.varReplace(Ae,T,rt)+" ":r+=" var "+T+" = "+rt+"; "+Ae+" ",f&&(r+=" if (!"+_+") break; ")}e.errorPath=be}C&&(r+=" } "),r+=" }  ",f&&(r+=" if ("+_+") { ",p+="}")}var qe=e.opts.useDefaults&&!e.compositeRule;if(g.length){var Nt=g;if(Nt)for(var H,Ut=-1,Vt=Nt.length-1;Ut<Vt;){H=Nt[Ut+=1];var St=l[H];if(e.opts.strictKeywords?typeof St=="object"&&Object.keys(St).length>0||St===!1:e.util.schemaHasRules(St,e.RULES.all)){var Xt=e.util.getProperty(H),rt=d+Xt,je=qe&&St.default!==void 0;c.schema=St,c.schemaPath=o+Xt,c.errSchemaPath=u+"/"+e.util.escapeFragment(H),c.errorPath=e.util.getPath(e.errorPath,H,e.opts.jsonPointers),c.dataPathArr[U]=e.util.toQuotedString(H);var Ae=e.validate(c);if(c.baseId=z,e.util.varOccurences(Ae,T)<2){Ae=e.util.varReplace(Ae,T,rt);var He=rt}else{var He=T;r+=" var "+T+" = "+rt+"; "}if(je)r+=" "+Ae+" ";else{if(se&&se[H]){r+=" if ( "+He+" === undefined ",A&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(H)+"') "),r+=") { "+_+" = false; ";var be=e.errorPath,_e=u,We=e.util.escapeQuotes(H);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(be,H,e.opts.jsonPointers)),u=e.errSchemaPath+"/required";var Se=Se||[];Se.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+We+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+We+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var et=r;r=Se.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+et+"]); ":r+=" validate.errors = ["+et+"]; return false; ":r+=" var err = "+et+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=_e,e.errorPath=be,r+=" } else { "}else f?(r+=" if ( "+He+" === undefined ",A&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(H)+"') "),r+=") { "+_+" = true; } else { "):(r+=" if ("+He+" !== undefined ",A&&(r+=" &&   Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(H)+"') "),r+=" ) { ");r+=" "+Ae+" } "}}f&&(r+=" if ("+_+") { ",p+="}")}}if(b.length){var tt=b;if(tt)for(var ae,ft=-1,zt=tt.length-1;ft<zt;){ae=tt[ft+=1];var St=E[ae];if(e.opts.strictKeywords?typeof St=="object"&&Object.keys(St).length>0||St===!1:e.util.schemaHasRules(St,e.RULES.all)){c.schema=St,c.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ae),c.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ae),A?r+=" "+N+" = "+N+" || Object.keys("+d+"); for (var "+D+"=0; "+D+"<"+N+".length; "+D+"++) { var "+v+" = "+N+"["+D+"]; ":r+=" for (var "+v+" in "+d+") { ",r+=" if ("+e.usePattern(ae)+".test("+v+")) { ",c.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);var rt=d+"["+v+"]";c.dataPathArr[U]=v;var Ae=e.validate(c);c.baseId=z,e.util.varOccurences(Ae,T)<2?r+=" "+e.util.varReplace(Ae,T,rt)+" ":r+=" var "+T+" = "+rt+"; "+Ae+" ",f&&(r+=" if (!"+_+") break; "),r+=" } ",f&&(r+=" else "+_+" = true; "),r+=" }  ",f&&(r+=" if ("+_+") { ",p+="}")}}}return f&&(r+=" "+p+" if ("+h+" == errors) {"),r},Xm=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,d="data"+(a||""),h="errs__"+s,c=e.util.copy(e),p="";c.level++;var _="valid"+c.level;if(r+="var "+h+" = errors;",e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all)){c.schema=l,c.schemaPath=o,c.errSchemaPath=u;var v="key"+s,D="idx"+s,U="i"+s,T="' + "+v+" + '",N=c.dataLevel=e.dataLevel+1,g="data"+N,E="dataProperties"+s,b=e.opts.ownProperties,I=e.baseId;b&&(r+=" var "+E+" = undefined; "),b?r+=" "+E+" = "+E+" || Object.keys("+d+"); for (var "+D+"=0; "+D+"<"+E+".length; "+D+"++) { var "+v+" = "+E+"["+D+"]; ":r+=" for (var "+v+" in "+d+") { ",r+=" var startErrs"+s+" = errors; ";var C=v,O=e.compositeRule;e.compositeRule=c.compositeRule=!0;var k=e.validate(c);c.baseId=I,e.util.varOccurences(k,g)<2?r+=" "+e.util.varReplace(k,g,C)+" ":r+=" var "+g+" = "+C+"; "+k+" ",e.compositeRule=c.compositeRule=O,r+=" if (!"+_+") { for (var "+U+"=startErrs"+s+"; "+U+"<errors; "+U+"++) { vErrors["+U+"].propertyName = "+v+"; }   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { propertyName: '"+T+"' } ",e.opts.messages!==!1&&(r+=" , message: 'property name \\'"+T+"\\' is invalid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),f&&(r+=" break; "),r+=" } }"}return f&&(r+=" "+p+" if ("+h+" == errors) {"),r},Gm=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,d="data"+(a||""),h="valid"+s,c=e.opts.$data&&l&&l.$data;c&&(r+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ");var p="schema"+s;if(!c)if(l.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var _=[],v=l;if(v)for(var D,U=-1,T=v.length-1;U<T;){D=v[U+=1];var N=e.schema.properties[D];N&&(e.opts.strictKeywords?typeof N=="object"&&Object.keys(N).length>0||N===!1:e.util.schemaHasRules(N,e.RULES.all))||(_[_.length]=D)}}else var _=l;if(c||_.length){var g=e.errorPath,E=c||_.length>=e.opts.loopRequired,b=e.opts.ownProperties;if(f)if(r+=" var missing"+s+"; ",E){c||(r+=" var "+p+" = validate.schema"+o+"; ");var I="i"+s,C="schema"+s+"["+I+"]",O="' + "+C+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(g,C,e.opts.jsonPointers)),r+=" var "+h+" = true; ",c&&(r+=" if (schema"+s+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+s+")) "+h+" = false; else {"),r+=" for (var "+I+" = 0; "+I+" < "+p+".length; "+I+"++) { "+h+" = "+d+"["+p+"["+I+"]] !== undefined ",b&&(r+=" &&   Object.prototype.hasOwnProperty.call("+d+", "+p+"["+I+"]) "),r+="; if (!"+h+") break; } ",c&&(r+="  }  "),r+="  if (!"+h+") {   ";var k=k||[];k.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+O+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+O+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var B=r;r=k.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+B+"]); ":r+=" validate.errors = ["+B+"]; return false; ":r+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var P=_;if(P)for(var A,I=-1,z=P.length-1;I<z;){A=P[I+=1],I&&(r+=" || ");var j=e.util.getProperty(A),se=d+j;r+=" ( ( "+se+" === undefined ",b&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(A)+"') "),r+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?A:j)+") ) "}r+=") {  ";var C="missing"+s,O="' + "+C+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(g,C,!0):g+" + "+C);var k=k||[];k.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+O+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+O+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var B=r;r=k.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+B+"]); ":r+=" validate.errors = ["+B+"]; return false; ":r+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(E){c||(r+=" var "+p+" = validate.schema"+o+"; ");var I="i"+s,C="schema"+s+"["+I+"]",O="' + "+C+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(g,C,e.opts.jsonPointers)),c&&(r+=" if ("+p+" && !Array.isArray("+p+")) {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+O+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+O+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+p+" !== undefined) { "),r+=" for (var "+I+" = 0; "+I+" < "+p+".length; "+I+"++) { if ("+d+"["+p+"["+I+"]] === undefined ",b&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", "+p+"["+I+"]) "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+O+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+O+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",c&&(r+="  }  ")}else{var Z=_;if(Z)for(var A,G=-1,H=Z.length-1;G<H;){A=Z[G+=1];var j=e.util.getProperty(A),O=e.util.escapeQuotes(A),se=d+j;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(g,A,e.opts.jsonPointers)),r+=" if ( "+se+" === undefined ",b&&(r+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(A)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+O+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+O+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=g}else f&&(r+=" if (true) {");return r},Qm=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,d="data"+(a||""),h="valid"+s,c=e.opts.$data&&l&&l.$data,p;if(c?(r+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",p="schema"+s):p=l,(l||c)&&e.opts.uniqueItems!==!1){c&&(r+=" var "+h+"; if ("+p+" === false || "+p+" === undefined) "+h+" = true; else if (typeof "+p+" != 'boolean') "+h+" = false; else { "),r+=" var i = "+d+".length , "+h+" = true , j; if (i > 1) { ";var _=e.schema.items&&e.schema.items.type,v=Array.isArray(_);if(!_||_=="object"||_=="array"||v&&(_.indexOf("object")>=0||_.indexOf("array")>=0))r+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+d+"[i], "+d+"[j])) { "+h+" = false; break outer; } } } ";else{r+=" var itemIndices = {}, item; for (;i--;) { var item = "+d+"[i]; ";var D="checkDataType"+(v?"s":"");r+=" if ("+e.util[D](_,"item",e.opts.strictNumbers,!0)+") continue; ",v&&(r+=` if (typeof item == 'string') item = '"' + item; `),r+=" if (typeof itemIndices[item] == 'number') { "+h+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}r+=" } ",c&&(r+="  }  "),r+=" if (!"+h+") {   ";var U=U||[];U.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(r+=" , schema:  ",c?r+="validate.schema"+o:r+=""+l,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var T=r;r=U.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+T+"]); ":r+=" validate.errors = ["+T+"]; return false; ":r+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",f&&(r+=" else { ")}else f&&(r+=" if (true) { ");return r},Wm={$ref:Pm,allOf:Im,anyOf:Rm,$comment:Fm,const:Om,contains:Bm,dependencies:Lm,enum:Um,format:jm,if:qm,items:Mm,maximum:ou,minimum:ou,maxItems:uu,minItems:uu,maxLength:fu,minLength:fu,maxProperties:cu,minProperties:cu,multipleOf:xm,not:Vm,oneOf:zm,pattern:Hm,properties:$m,propertyNames:Xm,required:Gm,uniqueItems:Qm,validate:_d},hu=Wm,Bs=Pi.toHash,Ym=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"],n=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],r=["number","integer","string","array","object","boolean","null"];return e.all=Bs(t),e.types=Bs(r),e.forEach(function(s){s.rules=s.rules.map(function(a){var l;if(typeof a=="object"){var o=Object.keys(a)[0];l=a[o],a=o,l.forEach(function(f){t.push(f),e.all[f]=!0})}t.push(a);var u=e.all[a]={keyword:a,code:hu[a],implements:l};return u}),e.all.$comment={keyword:"$comment",code:hu.$comment},s.type&&(e.types[s.type]=s)}),e.keywords=Bs(t.concat(n)),e.custom={},e},du=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],Jm=function(i,e){for(var t=0;t<e.length;t++){i=JSON.parse(JSON.stringify(i));var n=e[t].split("/"),r=i,s;for(s=1;s<n.length;s++)r=r[n[s]];for(s=0;s<du.length;s++){var a=du[s],l=r[a];l&&(r[a]={anyOf:[l,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return i},Km=Ol.MissingRef,Zm=Sd;function Sd(i,e,t){var n=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(t=e,e=void 0);var r=s(i).then(function(){var l=n._addSchema(i,void 0,e);return l.validate||a(l)});return t&&r.then(function(l){t(null,l)},t),r;function s(l){var o=l.$schema;return o&&!n.getSchema(o)?Sd.call(n,{$ref:o},!0):Promise.resolve()}function a(l){try{return n._compile(l)}catch(u){if(u instanceof Km)return o(u);throw u}function o(u){var f=u.missingSchema;if(c(f))throw new Error("Schema "+f+" is loaded but "+u.missingRef+" cannot be resolved");var d=n._loadingSchemas[f];return d||(d=n._loadingSchemas[f]=n._opts.loadSchema(f),d.then(h,h)),d.then(function(p){if(!c(f))return s(p).then(function(){c(f)||n.addSchema(p,f,void 0,e)})}).then(function(){return a(l)});function h(){delete n._loadingSchemas[f]}function c(p){return n._refs[p]||n._schemas[p]}}}}var e1=function(e,t,n){var r=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,d,h="data"+(a||""),c="valid"+s,p="errs__"+s,_=e.opts.$data&&l&&l.$data,v;_?(r+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",v="schema"+s):v=l;var D=this,U="definition"+s,T=D.definition,N="",g,E,b,I,C;if(_&&T.$data){C="keywordValidate"+s;var O=T.validateSchema;r+=" var "+U+" = RULES.custom['"+t+"'].definition; var "+C+" = "+U+".validate;"}else{if(I=e.useCustomRule(D,l,e.schema,e),!I)return;v="validate.schema"+o,C=I.code,g=T.compile,E=T.inline,b=T.macro}var k=C+".errors",B="i"+s,P="ruleErr"+s,A=T.async;if(A&&!e.async)throw new Error("async keyword in sync schema");if(E||b||(r+=""+k+" = null;"),r+="var "+p+" = errors;var "+c+";",_&&T.$data&&(N+="}",r+=" if ("+v+" === undefined) { "+c+" = true; } else { ",O&&(N+="}",r+=" "+c+" = "+U+".validateSchema("+v+"); if ("+c+") { ")),E)T.statements?r+=" "+I.validate+" ":r+=" "+c+" = "+I.validate+"; ";else if(b){var z=e.util.copy(e),N="";z.level++;var j="valid"+z.level;z.schema=I.validate,z.schemaPath="";var se=e.compositeRule;e.compositeRule=z.compositeRule=!0;var Z=e.validate(z).replace(/validate\.schema/g,C);e.compositeRule=z.compositeRule=se,r+=" "+Z}else{var G=G||[];G.push(r),r="",r+="  "+C+".call( ",e.opts.passContext?r+="this":r+="self",g||T.schema===!1?r+=" , "+h+" ":r+=" , "+v+" , "+h+" , validate.schema"+e.schemaPath+" ",r+=" , (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var H=a?"data"+(a-1||""):"parentData",Q=a?e.dataPathArr[a]:"parentDataProperty";r+=" , "+H+" , "+Q+" , rootData )  ";var ee=r;r=G.pop(),T.errors===!1?(r+=" "+c+" = ",A&&(r+="await "),r+=""+ee+"; "):A?(k="customErrors"+s,r+=" var "+k+" = null; try { "+c+" = await "+ee+"; } catch (e) { "+c+" = false; if (e instanceof ValidationError) "+k+" = e.errors; else throw e; } "):r+=" "+k+" = null; "+c+" = "+ee+"; "}if(T.modifying&&(r+=" if ("+H+") "+h+" = "+H+"["+Q+"];"),r+=""+N,T.valid)f&&(r+=" if (true) { ");else{r+=" if ( ",T.valid===void 0?(r+=" !",b?r+=""+j:r+=""+c):r+=" "+!T.valid+" ",r+=") { ",d=D.keyword;var G=G||[];G.push(r),r="";var G=G||[];G.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(d||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+D.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+D.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var $=r;r=G.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+$+"]); ":r+=" validate.errors = ["+$+"]; return false; ":r+=" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var ae=r;r=G.pop(),E?T.errors?T.errors!="full"&&(r+="  for (var "+B+"="+p+"; "+B+"<errors; "+B+"++) { var "+P+" = vErrors["+B+"]; if ("+P+".dataPath === undefined) "+P+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+P+".schemaPath === undefined) { "+P+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(r+=" "+P+".schema = "+v+"; "+P+".data = "+h+"; "),r+=" } "):T.errors===!1?r+=" "+ae+" ":(r+=" if ("+p+" == errors) { "+ae+" } else {  for (var "+B+"="+p+"; "+B+"<errors; "+B+"++) { var "+P+" = vErrors["+B+"]; if ("+P+".dataPath === undefined) "+P+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+P+".schemaPath === undefined) { "+P+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(r+=" "+P+".schema = "+v+"; "+P+".data = "+h+"; "),r+=" } } "):b?(r+="   var err =   ",e.createErrors!==!1?(r+=" { keyword: '"+(d||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+D.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+D.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; ")):T.errors===!1?r+=" "+ae+" ":(r+=" if (Array.isArray("+k+")) { if (vErrors === null) vErrors = "+k+"; else vErrors = vErrors.concat("+k+"); errors = vErrors.length;  for (var "+B+"="+p+"; "+B+"<errors; "+B+"++) { var "+P+" = vErrors["+B+"]; if ("+P+".dataPath === undefined) "+P+".dataPath = (dataPath || '') + "+e.errorPath+";  "+P+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(r+=" "+P+".schema = "+v+"; "+P+".data = "+h+"; "),r+=" } } else { "+ae+" } "),r+=" } ",f&&(r+=" else { ")}return r};const t1="http://json-schema.org/draft-07/schema#",r1="http://json-schema.org/draft-07/schema#",n1="Core schema meta-schema",i1={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},a1=["object","boolean"],s1={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Pd={$schema:t1,$id:r1,title:n1,definitions:i1,type:a1,properties:s1,default:!0};var pu=Pd,l1={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:pu.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:pu.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},o1=/^[a-z_$][a-z0-9_$-]*$/i,u1=e1,f1=l1,c1={add:h1,get:d1,remove:p1,validate:ul};function h1(i,e){var t=this.RULES;if(t.keywords[i])throw new Error("Keyword "+i+" is already defined");if(!o1.test(i))throw new Error("Keyword "+i+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var n=e.type;if(Array.isArray(n))for(var r=0;r<n.length;r++)a(i,n[r],e);else a(i,n,e);var s=e.metaSchema;s&&(e.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(s,!0))}t.keywords[i]=t.all[i]=!0;function a(l,o,u){for(var f,d=0;d<t.length;d++){var h=t[d];if(h.type==o){f=h;break}}f||(f={type:o,rules:[]},t.push(f));var c={keyword:l,definition:u,custom:!0,code:u1,implements:u.implements};f.rules.push(c),t.custom[l]=c}return this}function d1(i){var e=this.RULES.custom[i];return e?e.definition:this.RULES.keywords[i]||!1}function p1(i){var e=this.RULES;delete e.keywords[i],delete e.all[i],delete e.custom[i];for(var t=0;t<e.length;t++)for(var n=e[t].rules,r=0;r<n.length;r++)if(n[r].keyword==i){n.splice(r,1);break}return this}function ul(i,e){ul.errors=null;var t=this._validateKeyword=this._validateKeyword||this.compile(f1,!0);if(t(i))return!0;if(ul.errors=t.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(t.errors));return!1}const _1="http://json-schema.org/draft-07/schema#",v1="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",m1="Meta-schema for $data reference (JSON Schema extension proposal)",g1="object",b1=["$data"],y1={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},w1=!1,E1={$schema:_1,$id:v1,description:m1,type:g1,required:b1,properties:y1,additionalProperties:w1};var Id=um,ei=Fl,D1=vm,Rd=fd,k1=pd,A1=Dm,C1=Ym,Fd=Jm,Od=Pi,T1=nr;nr.prototype.validate=S1;nr.prototype.compile=P1;nr.prototype.addSchema=I1;nr.prototype.addMetaSchema=R1;nr.prototype.validateSchema=F1;nr.prototype.getSchema=B1;nr.prototype.removeSchema=U1;nr.prototype.addFormat=$1;nr.prototype.errorsText=H1;nr.prototype._addSchema=j1;nr.prototype._compile=q1;nr.prototype.compileAsync=Zm;var cs=c1;nr.prototype.addKeyword=cs.add;nr.prototype.getKeyword=cs.get;nr.prototype.removeKeyword=cs.remove;nr.prototype.validateKeyword=cs.validate;var Bd=Ol;nr.ValidationError=Bd.Validation;nr.MissingRefError=Bd.MissingRef;nr.$dataMetaSchema=Fd;var Ya="http://json-schema.org/draft-07/schema",_u=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],N1=["/properties"];function nr(i){if(!(this instanceof nr))return new nr(i);i=this._opts=Od.copy(i)||{},J1(this),this._schemas={},this._refs={},this._fragments={},this._formats=A1(i.format),this._cache=i.cache||new D1,this._loadingSchemas={},this._compilations=[],this.RULES=C1(),this._getId=M1(i),i.loopRequired=i.loopRequired||1/0,i.errorDataPath=="property"&&(i._errorDataPathProperty=!0),i.serialize===void 0&&(i.serialize=k1),this._metaOpts=Y1(this),i.formats&&Q1(this),i.keywords&&W1(this),X1(this),typeof i.meta=="object"&&this.addMetaSchema(i.meta),i.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),G1(this)}function S1(i,e){var t;if(typeof i=="string"){if(t=this.getSchema(i),!t)throw new Error('no schema with key or ref "'+i+'"')}else{var n=this._addSchema(i);t=n.validate||this._compile(n)}var r=t(e);return t.$async!==!0&&(this.errors=t.errors),r}function P1(i,e){var t=this._addSchema(i,void 0,e);return t.validate||this._compile(t)}function I1(i,e,t,n){if(Array.isArray(i)){for(var r=0;r<i.length;r++)this.addSchema(i[r],void 0,t,n);return this}var s=this._getId(i);if(s!==void 0&&typeof s!="string")throw new Error("schema id must be string");return e=ei.normalizeId(e||s),Ud(this,e),this._schemas[e]=this._addSchema(i,t,n,!0),this}function R1(i,e,t){return this.addSchema(i,e,t,!0),this}function F1(i,e){var t=i.$schema;if(t!==void 0&&typeof t!="string")throw new Error("$schema must be a string");if(t=t||this._opts.defaultMeta||O1(this),!t)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(t,i);if(!n&&e){var r="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(r);else throw new Error(r)}return n}function O1(i){var e=i._opts.meta;return i._opts.defaultMeta=typeof e=="object"?i._getId(e)||e:i.getSchema(Ya)?Ya:void 0,i._opts.defaultMeta}function B1(i){var e=Ld(this,i);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return L1(this,i)}}function L1(i,e){var t=ei.schema.call(i,{schema:{}},e);if(t){var n=t.schema,r=t.root,s=t.baseId,a=Id.call(i,n,r,void 0,s);return i._fragments[e]=new Rd({ref:e,fragment:!0,schema:n,root:r,baseId:s,validate:a}),a}}function Ld(i,e){return e=ei.normalizeId(e),i._schemas[e]||i._refs[e]||i._fragments[e]}function U1(i){if(i instanceof RegExp)return Sa(this,this._schemas,i),Sa(this,this._refs,i),this;switch(typeof i){case"undefined":return Sa(this,this._schemas),Sa(this,this._refs),this._cache.clear(),this;case"string":var e=Ld(this,i);return e&&this._cache.del(e.cacheKey),delete this._schemas[i],delete this._refs[i],this;case"object":var t=this._opts.serialize,n=t?t(i):i;this._cache.del(n);var r=this._getId(i);r&&(r=ei.normalizeId(r),delete this._schemas[r],delete this._refs[r])}return this}function Sa(i,e,t){for(var n in e){var r=e[n];!r.meta&&(!t||t.test(n))&&(i._cache.del(r.cacheKey),delete e[n])}}function j1(i,e,t,n){if(typeof i!="object"&&typeof i!="boolean")throw new Error("schema should be object or boolean");var r=this._opts.serialize,s=r?r(i):i,a=this._cache.get(s);if(a)return a;n=n||this._opts.addUsedSchema!==!1;var l=ei.normalizeId(this._getId(i));l&&n&&Ud(this,l);var o=this._opts.validateSchema!==!1&&!e,u;o&&!(u=l&&l==ei.normalizeId(i.$schema))&&this.validateSchema(i,!0);var f=ei.ids.call(this,i),d=new Rd({id:l,schema:i,localRefs:f,cacheKey:s,meta:t});return l[0]!="#"&&n&&(this._refs[l]=d),this._cache.put(s,d),o&&u&&this.validateSchema(i,!0),d}function q1(i,e){if(i.compiling)return i.validate=r,r.schema=i.schema,r.errors=null,r.root=e||r,i.schema.$async===!0&&(r.$async=!0),r;i.compiling=!0;var t;i.meta&&(t=this._opts,this._opts=this._metaOpts);var n;try{n=Id.call(this,i.schema,e,i.localRefs)}catch(s){throw delete i.validate,s}finally{i.compiling=!1,i.meta&&(this._opts=t)}return i.validate=n,i.refs=n.refs,i.refVal=n.refVal,i.root=n.root,n;function r(){var s=i.validate,a=s.apply(this,arguments);return r.errors=s.errors,a}}function M1(i){switch(i.schemaId){case"auto":return z1;case"id":return x1;default:return V1}}function x1(i){return i.$id&&this.logger.warn("schema $id ignored",i.$id),i.id}function V1(i){return i.id&&this.logger.warn("schema id ignored",i.id),i.$id}function z1(i){if(i.$id&&i.id&&i.$id!=i.id)throw new Error("schema $id is different from id");return i.$id||i.id}function H1(i,e){if(i=i||this.errors,!i)return"No errors";e=e||{};for(var t=e.separator===void 0?", ":e.separator,n=e.dataVar===void 0?"data":e.dataVar,r="",s=0;s<i.length;s++){var a=i[s];a&&(r+=n+a.dataPath+" "+a.message+t)}return r.slice(0,-t.length)}function $1(i,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[i]=e,this}function X1(i){var e;if(i._opts.$data&&(e=E1,i.addMetaSchema(e,e.$id,!0)),i._opts.meta!==!1){var t=Pd;i._opts.$data&&(t=Fd(t,N1)),i.addMetaSchema(t,Ya,!0),i._refs["http://json-schema.org/schema"]=Ya}}function G1(i){var e=i._opts.schemas;if(e)if(Array.isArray(e))i.addSchema(e);else for(var t in e)i.addSchema(e[t],t)}function Q1(i){for(var e in i._opts.formats){var t=i._opts.formats[e];i.addFormat(e,t)}}function W1(i){for(var e in i._opts.keywords){var t=i._opts.keywords[e];i.addKeyword(e,t)}}function Ud(i,e){if(i._schemas[e]||i._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function Y1(i){for(var e=Od.copy(i._opts),t=0;t<_u.length;t++)delete e[_u[t]];return e}function J1(i){var e=i._opts.logger;if(e===!1)i.logger={log:Ls,warn:Ls,error:Ls};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");i.logger=e}}function Ls(){}const K1=la(T1);function Ir(i){"@babel/helpers - typeof";return Ir=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ir(i)}function Z1(i,e){if(Ir(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(Ir(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function jd(i){var e=Z1(i,"string");return Ir(e)=="symbol"?e:e+""}function vu(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,jd(n.key),n)}}function Qt(i,e,t){return e&&vu(i.prototype,e),t&&vu(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function Wt(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function eg(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Dn(i,e){if(e&&(Ir(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eg(i)}function sr(i){return sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sr(i)}function fl(i,e){return fl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},fl(i,e)}function br(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&fl(i,e)}function Ue(i,e,t){return(e=jd(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}var nn={Literal:1,Collection:3,Graph:4,NamedNode:5,BlankNode:6,Variable:7},xt=function(){function i(e){Wt(this,i),Ue(this,"termType",void 0),Ue(this,"classOrder",void 0),Ue(this,"value",void 0),this.value=e}return Qt(i,[{key:"substitute",value:function(t){return this}},{key:"compareTerm",value:function(t){return this.classOrder<t.classOrder?-1:this.classOrder>t.classOrder?1:this.value<t.value?-1:this.value>t.value?1:0}},{key:"equals",value:function(t){return t?this.termType===t.termType&&this.value===t.value:!1}},{key:"hashString",value:function(){return this.toCanonical()}},{key:"sameTerm",value:function(t){return this.equals(t)}},{key:"toCanonical",value:function(){return this.toNT()}},{key:"toNT",value:function(){return this.toString()}},{key:"toNQ",value:function(){return this.toNT()}},{key:"toString",value:function(){throw new Error("Node.toString() is abstract - see the subclasses instead")}}])}();Ue(xt,"fromValue",void 0);Ue(xt,"toJS",void 0);var oi="NamedNode",ui="BlankNode",Ii="Literal",qn="Variable",ai="DefaultGraph",Mn="Collection",qd="Empty",ua="Graph",mu="text/html",cl="application/ld+json",Md="text/n3",tg="application/n3",hl="application/nquads",dl="application/n-quads",rg="application/n-triples",ea="application/rdf+xml",ng="application/sparql-update",ig="application/sparql-update-single-match",ti="text/turtle",ag="application/x-turtle",pl="application/xhtml+xml";function sg(i,e,t){return e=sr(e),Dn(i,xd()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function xd(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xd=function(){return!!i})()}var an=function(i){function e(t){var n;return Wt(this,e),n=sg(this,e,[e.getId(t)]),Ue(n,"termType",ui),Ue(n,"classOrder",nn.BlankNode),Ue(n,"isBlank",1),Ue(n,"isVar",1),n}return br(e,i),Qt(e,[{key:"id",get:function(){return this.value},set:function(n){this.value=n}},{key:"compareTerm",value:function(n){return this.classOrder<n.classOrder?-1:this.classOrder>n.classOrder?1:this.id<n.id?-1:this.id>n.id?1:0}},{key:"copy",value:function(n){var r=new e;return n.copyTo(this,r),r}},{key:"toCanonical",value:function(){return e.NTAnonymousNodePrefix+this.value}},{key:"toString",value:function(){return e.NTAnonymousNodePrefix+this.id}}],[{key:"getId",value:function(n){if(n){if(typeof n!="string")throw new Error("Bad id argument to new blank node: "+n);if(n.includes("#")){var r=n.split("#");return r[r.length-1]}return n}return"n"+e.nextId++}}])}(xt);Ue(an,"nextId",0);Ue(an,"NTAnonymousNodePrefix","_:");function gi(i){return typeof i=="string"?i:i.value}function lg(i){return Ir(i)==="object"&&i!==null&&"subject"in i}function gu(i){return Ir(i)==="object"&&i!==null&&"statements"in i}function Ll(i){return bn(i)&&i.termType===Mn}function og(i){return i&&Object.prototype.hasOwnProperty.call(i,"termType")&&(i.termType===oi||i.termType===qn||i.termType===ui||i.termType===Mn||i.termType===Ii||i.termType===ua)}function ug(i){return i&&Object.prototype.hasOwnProperty.call(i,"termType")&&(i.termType===oi||i.termType===qn||i.termType===ui||i.termType===Mn||i.termType===Ii||i.termType===ua)}function fg(i){return bn(i)&&(i.termType===oi||i.termType===ui||i.termType===qn)}function cg(i){return bn(i)&&i.termType===qn}function bn(i){return Ir(i)==="object"&&i!==null&&"termType"in i}function Vd(i){return i.termType===Ii}function bi(i){return Ir(i)==="object"&&i!==null&&"subject"in i&&"predicate"in i&&"object"in i}function bu(i){return bn(i)&&i.termType==="NamedNode"}function hg(i){return bn(i)&&(i.termType===oi||i.termType===qn||i.termType===ui||i.termType===ai)}function dg(i,e,t){return e=sr(e),Dn(i,zd()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function zd(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zd=function(){return!!i})()}var hr=function(i){function e(t){var n;if(Wt(this,e),n=dg(this,e,[gi(t)]),Ue(n,"termType",oi),Ue(n,"classOrder",nn.NamedNode),!n.value)throw new Error("Missing IRI for NamedNode");if(!n.value.includes(":"))throw new Error('NamedNode IRI "'+t+'" must be absolute.');if(n.value.includes(" ")){var r='Error: NamedNode IRI "'+t+'" must not contain unencoded spaces.';throw new Error(r)}return n}return br(e,i),Qt(e,[{key:"dir",value:function(){var n=this.value.split("#")[0],r=n.slice(0,-1).lastIndexOf("/"),s=n.indexOf("//");return s>=0&&r<s+2||r<0?null:new e(n.slice(0,r+1))}},{key:"site",value:function(){var n=this.value.split("#")[0],r=n.indexOf("//");if(r<0)throw new Error("This URI does not have a web site part (origin)");var s=n.indexOf("/",r+2);return s<0?new e(n.slice(0)+"/"):new e(n.slice(0,s+1))}},{key:"doc",value:function(){return this.value.indexOf("#")<0?this:new e(this.value.split("#")[0])}},{key:"toString",value:function(){return"<"+this.value+">"}},{key:"id",value:function(){return this.value.split("#")[1]}},{key:"uri",get:function(){return this.value},set:function(n){this.value=n}}],[{key:"fromValue",value:function(n){return typeof n>"u"||n===null||bn(n)?n:new e(n)}}])}(xt);const vn={boolean:new hr("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:new hr("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:new hr("http://www.w3.org/2001/XMLSchema#decimal"),double:new hr("http://www.w3.org/2001/XMLSchema#double"),integer:new hr("http://www.w3.org/2001/XMLSchema#integer"),langString:new hr("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:new hr("http://www.w3.org/2001/XMLSchema#string")};function pg(i,e,t){return e=sr(e),Dn(i,Hd()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function Hd(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hd=function(){return!!i})()}var en=function(i){function e(t,n,r){var s;return Wt(this,e),s=pg(this,e,[t]),Ue(s,"termType",Ii),Ue(s,"classOrder",nn.Literal),Ue(s,"datatype",vn.string),Ue(s,"isVar",0),Ue(s,"language",""),n?(s.language=n,s.datatype=vn.langString):r?s.datatype=hr.fromValue(r):s.datatype=vn.string,s}return br(e,i),Qt(e,[{key:"copy",value:function(){return new e(this.value,this.lang,this.datatype)}},{key:"equals",value:function(n){return n?this.termType===n.termType&&this.value===n.value&&this.language===n.language&&(!this.datatype&&!n.datatype||this.datatype&&this.datatype.equals(n.datatype)):!1}},{key:"lang",get:function(){return this.language},set:function(n){this.language=n||""}},{key:"toNT",value:function(){return e.toNT(this)}},{key:"toString",value:function(){return""+this.value}}],[{key:"toNT",value:function(n){if(typeof n.value=="number")return""+n.value;if(typeof n.value!="string")throw new Error("Value of RDF literal is not string or number: "+n.value);var r=n.value;return r=r.replace(/\\/g,"\\\\"),r=r.replace(/\"/g,'\\"'),r=r.replace(/\n/g,"\\n"),r=r.replace(/\r/g,"\\r"),r='"'+r+'"',n.language?r+="@"+n.language:n.datatype.equals(vn.string)||(r+="^^"+n.datatype.toCanonical()),r}},{key:"fromBoolean",value:function(n){var r=n?"1":"0";return new e(r,null,vn.boolean)}},{key:"fromDate",value:function(n){if(!(n instanceof Date))throw new TypeError("Invalid argument to Literal.fromDate()");var r=function(l){return(""+(100+l)).slice(1,3)},s=""+n.getUTCFullYear()+"-"+r(n.getUTCMonth()+1)+"-"+r(n.getUTCDate())+"T"+r(n.getUTCHours())+":"+r(n.getUTCMinutes())+":"+r(n.getUTCSeconds())+"Z";return new e(s,null,vn.dateTime)}},{key:"fromNumber",value:function(n){if(typeof n!="number")throw new TypeError("Invalid argument to Literal.fromNumber()");var r,s=n.toString();return s.indexOf("e")<0&&Math.abs(n)<=Number.MAX_SAFE_INTEGER?r=Number.isInteger(n)?vn.integer:vn.decimal:r=vn.double,new e(s,null,r)}},{key:"fromValue",value:function(n){if(Vd(n))return n;switch(Ir(n)){case"object":if(n instanceof Date)return e.fromDate(n);case"boolean":return e.fromBoolean(n);case"number":return e.fromNumber(n);case"string":return new e(n)}throw new Error("Can't make literal from "+n+" of type "+Ir(n))}}])}(xt);function _g(i,e,t){return e=sr(e),Dn(i,$d()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function $d(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($d=function(){return!!i})()}function Xd(i){return typeof i>"u"||i===null||bn(i)?i:Array.isArray(i)?new On(i):en.fromValue(i)}var On=function(i){function e(t){var n;return Wt(this,e),n=_g(this,e,[(an.nextId++).toString()]),Ue(n,"termType",Mn),Ue(n,"classOrder",nn.Collection),Ue(n,"closed",!1),Ue(n,"compareTerm",an.prototype.compareTerm),Ue(n,"elements",[]),Ue(n,"isVar",0),t&&t.length>0&&t.forEach(function(r){n.elements.push(Xd(r))}),n}return br(e,i),Qt(e,[{key:"id",get:function(){return this.value},set:function(n){this.value=n}},{key:"append",value:function(n){return this.elements.push(n)}},{key:"close",value:function(){return this.closed=!0,this.closed}},{key:"shift",value:function(){return this.elements.shift()}},{key:"substitute",value:function(n){var r=this.elements.map(function(s){return s.substitute(n)});return new e(r)}},{key:"toNT",value:function(){return e.toNT(this)}},{key:"toString",value:function(){return"("+this.elements.join(" ")+")"}},{key:"unshift",value:function(n){return this.elements.unshift(n)}}],[{key:"toNT",value:function(n){return an.NTAnonymousNodePrefix+n.id}}])}(xt);Ue(On,"termType",Mn);function yu(i,e,t,n,r,s,a){try{var l=i[s](a),o=l.value}catch(u){return void t(u)}l.done?e(o):Promise.resolve(o).then(n,r)}function wu(i){return function(){var e=this,t=arguments;return new Promise(function(n,r){var s=i.apply(e,t);function a(o){yu(s,n,r,a,l,"next",o)}function l(o){yu(s,n,r,a,l,"throw",o)}a(void 0)})}}var Gd={exports:{}},Qd={exports:{}};(function(i){function e(t){"@babel/helpers - typeof";return i.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},i.exports.__esModule=!0,i.exports.default=i.exports,e(t)}i.exports=e,i.exports.__esModule=!0,i.exports.default=i.exports})(Qd);var vg=Qd.exports;(function(i){var e=vg.default;function t(){i.exports=t=function(){return r},i.exports.__esModule=!0,i.exports.default=i.exports;var n,r={},s=Object.prototype,a=s.hasOwnProperty,l=Object.defineProperty||function(G,H,Q){G[H]=Q.value},o=typeof Symbol=="function"?Symbol:{},u=o.iterator||"@@iterator",f=o.asyncIterator||"@@asyncIterator",d=o.toStringTag||"@@toStringTag";function h(G,H,Q){return Object.defineProperty(G,H,{value:Q,enumerable:!0,configurable:!0,writable:!0}),G[H]}try{h({},"")}catch{h=function(Q,ee,$){return Q[ee]=$}}function c(G,H,Q,ee){var $=H&&H.prototype instanceof N?H:N,ae=Object.create($.prototype),ze=new se(ee||[]);return l(ae,"_invoke",{value:P(G,Q,ze)}),ae}function p(G,H,Q){try{return{type:"normal",arg:G.call(H,Q)}}catch(ee){return{type:"throw",arg:ee}}}r.wrap=c;var _="suspendedStart",v="suspendedYield",D="executing",U="completed",T={};function N(){}function g(){}function E(){}var b={};h(b,u,function(){return this});var I=Object.getPrototypeOf,C=I&&I(I(Z([])));C&&C!==s&&a.call(C,u)&&(b=C);var O=E.prototype=N.prototype=Object.create(b);function k(G){["next","throw","return"].forEach(function(H){h(G,H,function(Q){return this._invoke(H,Q)})})}function B(G,H){function Q($,ae,ze,Ve){var be=p(G[$],G,ae);if(be.type!=="throw"){var Ne=be.arg,_e=Ne.value;return _e&&e(_e)=="object"&&a.call(_e,"__await")?H.resolve(_e.__await).then(function(Se){Q("next",Se,ze,Ve)},function(Se){Q("throw",Se,ze,Ve)}):H.resolve(_e).then(function(Se){Ne.value=Se,ze(Ne)},function(Se){return Q("throw",Se,ze,Ve)})}Ve(be.arg)}var ee;l(this,"_invoke",{value:function(ae,ze){function Ve(){return new H(function(be,Ne){Q(ae,ze,be,Ne)})}return ee=ee?ee.then(Ve,Ve):Ve()}})}function P(G,H,Q){var ee=_;return function($,ae){if(ee===D)throw Error("Generator is already running");if(ee===U){if($==="throw")throw ae;return{value:n,done:!0}}for(Q.method=$,Q.arg=ae;;){var ze=Q.delegate;if(ze){var Ve=A(ze,Q);if(Ve){if(Ve===T)continue;return Ve}}if(Q.method==="next")Q.sent=Q._sent=Q.arg;else if(Q.method==="throw"){if(ee===_)throw ee=U,Q.arg;Q.dispatchException(Q.arg)}else Q.method==="return"&&Q.abrupt("return",Q.arg);ee=D;var be=p(G,H,Q);if(be.type==="normal"){if(ee=Q.done?U:v,be.arg===T)continue;return{value:be.arg,done:Q.done}}be.type==="throw"&&(ee=U,Q.method="throw",Q.arg=be.arg)}}}function A(G,H){var Q=H.method,ee=G.iterator[Q];if(ee===n)return H.delegate=null,Q==="throw"&&G.iterator.return&&(H.method="return",H.arg=n,A(G,H),H.method==="throw")||Q!=="return"&&(H.method="throw",H.arg=new TypeError("The iterator does not provide a '"+Q+"' method")),T;var $=p(ee,G.iterator,H.arg);if($.type==="throw")return H.method="throw",H.arg=$.arg,H.delegate=null,T;var ae=$.arg;return ae?ae.done?(H[G.resultName]=ae.value,H.next=G.nextLoc,H.method!=="return"&&(H.method="next",H.arg=n),H.delegate=null,T):ae:(H.method="throw",H.arg=new TypeError("iterator result is not an object"),H.delegate=null,T)}function z(G){var H={tryLoc:G[0]};1 in G&&(H.catchLoc=G[1]),2 in G&&(H.finallyLoc=G[2],H.afterLoc=G[3]),this.tryEntries.push(H)}function j(G){var H=G.completion||{};H.type="normal",delete H.arg,G.completion=H}function se(G){this.tryEntries=[{tryLoc:"root"}],G.forEach(z,this),this.reset(!0)}function Z(G){if(G||G===""){var H=G[u];if(H)return H.call(G);if(typeof G.next=="function")return G;if(!isNaN(G.length)){var Q=-1,ee=function $(){for(;++Q<G.length;)if(a.call(G,Q))return $.value=G[Q],$.done=!1,$;return $.value=n,$.done=!0,$};return ee.next=ee}}throw new TypeError(e(G)+" is not iterable")}return g.prototype=E,l(O,"constructor",{value:E,configurable:!0}),l(E,"constructor",{value:g,configurable:!0}),g.displayName=h(E,d,"GeneratorFunction"),r.isGeneratorFunction=function(G){var H=typeof G=="function"&&G.constructor;return!!H&&(H===g||(H.displayName||H.name)==="GeneratorFunction")},r.mark=function(G){return Object.setPrototypeOf?Object.setPrototypeOf(G,E):(G.__proto__=E,h(G,d,"GeneratorFunction")),G.prototype=Object.create(O),G},r.awrap=function(G){return{__await:G}},k(B.prototype),h(B.prototype,f,function(){return this}),r.AsyncIterator=B,r.async=function(G,H,Q,ee,$){$===void 0&&($=Promise);var ae=new B(c(G,H,Q,ee),$);return r.isGeneratorFunction(H)?ae:ae.next().then(function(ze){return ze.done?ze.value:ae.next()})},k(O),h(O,d,"Generator"),h(O,u,function(){return this}),h(O,"toString",function(){return"[object Generator]"}),r.keys=function(G){var H=Object(G),Q=[];for(var ee in H)Q.push(ee);return Q.reverse(),function $(){for(;Q.length;){var ae=Q.pop();if(ae in H)return $.value=ae,$.done=!1,$}return $.done=!0,$}},r.values=Z,se.prototype={constructor:se,reset:function(H){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(j),!H)for(var Q in this)Q.charAt(0)==="t"&&a.call(this,Q)&&!isNaN(+Q.slice(1))&&(this[Q]=n)},stop:function(){this.done=!0;var H=this.tryEntries[0].completion;if(H.type==="throw")throw H.arg;return this.rval},dispatchException:function(H){if(this.done)throw H;var Q=this;function ee(Ne,_e){return ze.type="throw",ze.arg=H,Q.next=Ne,_e&&(Q.method="next",Q.arg=n),!!_e}for(var $=this.tryEntries.length-1;$>=0;--$){var ae=this.tryEntries[$],ze=ae.completion;if(ae.tryLoc==="root")return ee("end");if(ae.tryLoc<=this.prev){var Ve=a.call(ae,"catchLoc"),be=a.call(ae,"finallyLoc");if(Ve&&be){if(this.prev<ae.catchLoc)return ee(ae.catchLoc,!0);if(this.prev<ae.finallyLoc)return ee(ae.finallyLoc)}else if(Ve){if(this.prev<ae.catchLoc)return ee(ae.catchLoc,!0)}else{if(!be)throw Error("try statement without catch or finally");if(this.prev<ae.finallyLoc)return ee(ae.finallyLoc)}}}},abrupt:function(H,Q){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var $=this.tryEntries[ee];if($.tryLoc<=this.prev&&a.call($,"finallyLoc")&&this.prev<$.finallyLoc){var ae=$;break}}ae&&(H==="break"||H==="continue")&&ae.tryLoc<=Q&&Q<=ae.finallyLoc&&(ae=null);var ze=ae?ae.completion:{};return ze.type=H,ze.arg=Q,ae?(this.method="next",this.next=ae.finallyLoc,T):this.complete(ze)},complete:function(H,Q){if(H.type==="throw")throw H.arg;return H.type==="break"||H.type==="continue"?this.next=H.arg:H.type==="return"?(this.rval=this.arg=H.arg,this.method="return",this.next="end"):H.type==="normal"&&Q&&(this.next=Q),T},finish:function(H){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var ee=this.tryEntries[Q];if(ee.finallyLoc===H)return this.complete(ee.completion,ee.afterLoc),j(ee),T}},catch:function(H){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var ee=this.tryEntries[Q];if(ee.tryLoc===H){var $=ee.completion;if($.type==="throw"){var ae=$.arg;j(ee)}return ae}}throw Error("illegal catch attempt")},delegateYield:function(H,Q,ee){return this.delegate={iterator:Z(H),resultName:Q,nextLoc:ee},this.method==="next"&&(this.arg=n),T}},r}i.exports=t,i.exports.__esModule=!0,i.exports.default=i.exports})(Gd);var mg=Gd.exports,qa=mg(),gg=qa;try{regeneratorRuntime=qa}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=qa:Function("r","regeneratorRuntime = r")(qa)}const Pa=la(gg);var ta="chrome:theSession";new hr(ta);function bg(i,e,t){return e=sr(e),Dn(i,Wd()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function Wd(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wd=function(){return!!i})()}var Ul=function(i){function e(){var t;return Wt(this,e),t=bg(this,e,[""]),Ue(t,"value",""),Ue(t,"termType",ai),Ue(t,"uri",ta),t}return br(e,i),Qt(e,[{key:"toCanonical",value:function(){return this.value}},{key:"toString",value:function(){return"DefaultGraph"}}])}(xt);function Eu(i){return!!i&&i.termType===ai}var yg=new Ul,ri=function(){function i(e,t,n,r){Wt(this,i),Ue(this,"subject",void 0),Ue(this,"predicate",void 0),Ue(this,"object",void 0),Ue(this,"graph",void 0),this.subject=xt.fromValue(e),this.predicate=xt.fromValue(t),this.object=xt.fromValue(n),this.graph=r==null?yg:xt.fromValue(r)}return Qt(i,[{key:"why",get:function(){return this.graph},set:function(t){this.graph=t}},{key:"equals",value:function(t){return t.subject.equals(this.subject)&&t.predicate.equals(this.predicate)&&t.object.equals(this.object)&&t.graph.equals(this.graph)}},{key:"substitute",value:function(t){var n=new i(this.subject.substitute(t),this.predicate.substitute(t),this.object.substitute(t),Eu(this.graph)?this.graph:this.graph.substitute(t));return n}},{key:"toCanonical",value:function(){var t=[this.subject.toCanonical(),this.predicate.toCanonical(),this.object.toCanonical()];return this.graph&&this.graph.termType!==ai&&t.push(this.graph.toCanonical()),t.join(" ")+" ."}},{key:"toNT",value:function(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT()].join(" ")+" ."}},{key:"toNQ",value:function(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT(),Eu(this.graph)?"":this.graph.toNT()].join(" ")+" ."}},{key:"toString",value:function(){return this.toNT()}}])}(),Yd=Yd||console.log;function wi(i){var e;return e=i.indexOf("#"),e<0?i:i.slice(0,e)}function wg(i){var e=/[^\/]*\/\/([^\/]*)\//.exec(i);return e?e[1]:""}function qr(i,e){var t,n,r,s,a,l,o=e.indexOf("#");if(o>0&&(e=e.slice(0,o)),i.length===0)return e;if(i.indexOf("#")===0)return e+i;if(s=i.indexOf(":"),s>=0||(t=e.indexOf(":"),e.length===0))return i;if(t<0)return Yd("Invalid base: "+e+" in join with given: "+i),i;if(n=e.slice(0,+t+1||9e9),i.indexOf("//")===0)return n+i;if(e.indexOf("//",t)===t+1){if(r=e.indexOf("/",t+3),r<0)return e.length-t-3>0?e+"/"+i:n+i}else if(r=e.indexOf("/",t+1),r<0)return e.length-t-1>0?e+"/"+i:n+i;if(i.indexOf("/")===0)return e.slice(0,r)+i;if(l=e.slice(r),a=l.lastIndexOf("/"),a<0)return n+i;for(a>=0&&a<l.length-1&&(l=l.slice(0,+a+1||9e9)),l+=i;l.match(/[^\/]*\/\.\.\//);)l=l.replace(/[^\/]*\/\.\.\//,"");return l=l.replace(/\.\//g,""),l=l.replace(/\/\.$/,"/"),e.slice(0,r)+l}function Du(i){var e=i.indexOf(":");return e<0?null:i.slice(0,e)}function Us(i,e){var t,n,r,s,a,l,o,u,f,d,h,c,p,_=new RegExp("^[-_a-zA-Z0-9.]+:(//[^/]*)?/[^/]*$");if(!i)return e;if(i===e)return"";for(n=u=0,a=e.length;u<a;n=++u){var v=e[n];if(v!==i[n])break}if(i.slice(0,n).match(_)&&(r=e.indexOf("//"),r<0&&(r=-2),s=e.indexOf("/",r+2),e[s+1]!=="/"&&i[s+1]!=="/"&&e.slice(0,s)===i.slice(0,s)))return e.slice(s);if(e[n]==="#"&&i.length===n)return e.slice(n);for(;n>0&&e[n-1]!=="/";)n--;if(n<3||i.indexOf("//",n-2)>0||e.indexOf("//",n-2)>0||i.indexOf(":",n)>0)return e;for(o=0,h=i.slice(n),f=0,l=h.length;f<l;f++)t=h[f],t==="/"&&o++;if(o===0&&n<e.length&&e[n]==="#")return"./"+e.slice(n);if(o===0&&n===e.length)return"./";if(p="",o>0)for(d=1,c=o;c>=1?d<=c:d>=c;c>=1?++d:--d)p+="../";return p+e.slice(n)}function Eg(i,e,t){return e=sr(e),Dn(i,Jd()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function Jd(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jd=function(){return!!i})()}var si=function(i){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return Wt(this,e),t=Eg(this,e,[n]),Ue(t,"termType",qn),Ue(t,"base","varid:"),Ue(t,"classOrder",nn.Variable),Ue(t,"isVar",1),Ue(t,"uri",void 0),t.base="varid:",t.uri=qr(n,t.base),t}return br(e,i),Qt(e,[{key:"equals",value:function(n){return n?this.termType===n.termType&&this.value===n.value:!1}},{key:"hashString",value:function(){return this.toString()}},{key:"substitute",value:function(n){var r;return(r=n[this.toNT()])!=null?r:this}},{key:"toString",value:function(){return e.toString(this)}}],[{key:"toString",value:function(n){return n.uri.slice(0,n.base.length)===n.base?"?".concat(n.uri.slice(n.base.length)):"?".concat(n.uri)}}])}(xt),Dr=function(i){return i.collections="COLLECTIONS",i.defaultGraphType="DEFAULT_GRAPH_TYPE",i.equalsMethod="EQUALS_METHOD",i.id="ID",i.identity="IDENTITY",i.reversibleId="REVERSIBLE_ID",i.variableType="VARIABLE_TYPE",i}({}),ku=new Ul,xr={supports:Ue(Ue(Ue(Ue(Ue(Ue(Ue({},Dr.collections,!1),Dr.defaultGraphType,!1),Dr.equalsMethod,!0),Dr.identity,!1),Dr.id,!0),Dr.reversibleId,!1),Dr.variableType,!0),blankNode:function(e){return new an(e)},defaultGraph:function(){return ku},equals:function(e,t){return e===t||!e||!t?!0:bi(e)||bi(t)?bi(e)&&bi(t)?this.equals(e.subject,t.subject)&&this.equals(e.predicate,t.predicate)&&this.equals(e.object,t.object)&&this.equals(e.graph,t.graph):!1:bn(e)&&bn(t)?this.id(e)===this.id(t):!1},id:function(e){if(!e)return"undefined";if(bi(e))return this.quadToNQ(e);switch(e.termType){case ai:return"defaultGraph";case qn:return si.toString(e);default:var t=this.termToNQ(e);if(t)return t;throw new Error("Can't id term with type '".concat(e.termType,"'"))}},isQuad:function(e){return e instanceof ri},literal:function(e,t){if(typeof e!="string"&&!t)return en.fromValue(e);var n=typeof e=="string"?e:""+e;return typeof t=="string"?t.indexOf(":")===-1?new en(n,t):new en(n,null,this.namedNode(t)):new en(n,null,t)},namedNode:function(e){return new hr(e)},quad:function(e,t,n,r){return new ri(e,t,n,r||ku)},triple:function(e,t,n,r){return this.quad(e,t,n,r)},quadToNQ:function(e){return"".concat(this.termToNQ(e.subject)," ").concat(this.termToNQ(e.predicate)," ").concat(this.termToNQ(e.object)," ").concat(this.termToNQ(e.graph)," .")},termToNQ:function(e){var t=this;switch(e.termType){case ui:return"_:"+e.value;case ai:return"";case qd:return"<http://www.w3.org/1999/02/22-rdf-syntax-ns#nil>";case Ii:return en.toNT(e);case ua:case oi:return"<"+e.value+">";case Mn:return"("+e.elements.map(function(n){return t.termToNQ(n)}).join(" ")+")";default:throw new Error("Can't serialize nonstandard term type (was '".concat(e.termType,"')"))}},toNQ:function(e){return this.isQuad(e)?this.quadToNQ(e):this.termToNQ(e)},variable:function(e){return new si(e)}},Kr={debug:function(e){},warn:function(e){},info:function(e){},error:function(e){},success:function(e){},msg:function(e){}};function mr(i,e){var t=e||{namedNode:function(r){return new hr(r)}};return function(n){return t.namedNode(i+(n||""))}}var xn={},kn={};function Dg(i,e,t){if(t===void 0&&(t=Array.prototype),i&&typeof t.find=="function")return t.find.call(i,e);for(var n=0;n<i.length;n++)if(Object.prototype.hasOwnProperty.call(i,n)){var r=i[n];if(e.call(void 0,r,n,i))return r}}function jl(i,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(i):i}function kg(i,e){if(i===null||typeof i!="object")throw new TypeError("target is not an object");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t]);return i}var Kd=jl({HTML:"text/html",isHTML:function(i){return i===Kd.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),Zd=jl({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(i){return i===Zd.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});kn.assign=kg;kn.find=Dg;kn.freeze=jl;kn.MIME_TYPE=Kd;kn.NAMESPACE=Zd;var ep=kn,sn=ep.find,ra=ep.NAMESPACE;function Ag(i){return i!==""}function Cg(i){return i?i.split(/[\t\n\f\r ]+/).filter(Ag):[]}function Tg(i,e){return i.hasOwnProperty(e)||(i[e]=!0),i}function Au(i){if(!i)return[];var e=Cg(i);return Object.keys(e.reduce(Tg,{}))}function Ng(i){return function(e){return i&&i.indexOf(e)!==-1}}function fa(i,e){for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}function Nr(i,e){var t=i.prototype;if(!(t instanceof e)){let n=function(){};n.prototype=e.prototype,n=new n,fa(t,n),i.prototype=t=n}t.constructor!=i&&(typeof i!="function"&&console.error("unknown Class:"+i),t.constructor=i)}var Sr={},Vr=Sr.ELEMENT_NODE=1,Ai=Sr.ATTRIBUTE_NODE=2,Ja=Sr.TEXT_NODE=3,tp=Sr.CDATA_SECTION_NODE=4,rp=Sr.ENTITY_REFERENCE_NODE=5,Sg=Sr.ENTITY_NODE=6,np=Sr.PROCESSING_INSTRUCTION_NODE=7,ip=Sr.COMMENT_NODE=8,ap=Sr.DOCUMENT_NODE=9,sp=Sr.DOCUMENT_TYPE_NODE=10,yn=Sr.DOCUMENT_FRAGMENT_NODE=11,Pg=Sr.NOTATION_NODE=12,pr={},cr={};pr.INDEX_SIZE_ERR=(cr[1]="Index size error",1);pr.DOMSTRING_SIZE_ERR=(cr[2]="DOMString size error",2);var kr=pr.HIERARCHY_REQUEST_ERR=(cr[3]="Hierarchy request error",3);pr.WRONG_DOCUMENT_ERR=(cr[4]="Wrong document",4);pr.INVALID_CHARACTER_ERR=(cr[5]="Invalid character",5);pr.NO_DATA_ALLOWED_ERR=(cr[6]="No data allowed",6);pr.NO_MODIFICATION_ALLOWED_ERR=(cr[7]="No modification allowed",7);var lp=pr.NOT_FOUND_ERR=(cr[8]="Not found",8);pr.NOT_SUPPORTED_ERR=(cr[9]="Not supported",9);var Cu=pr.INUSE_ATTRIBUTE_ERR=(cr[10]="Attribute in use",10);pr.INVALID_STATE_ERR=(cr[11]="Invalid state",11);pr.SYNTAX_ERR=(cr[12]="Syntax error",12);pr.INVALID_MODIFICATION_ERR=(cr[13]="Invalid modification",13);pr.NAMESPACE_ERR=(cr[14]="Invalid namespace",14);pr.INVALID_ACCESS_ERR=(cr[15]="Invalid access",15);function ar(i,e){if(e instanceof Error)var t=e;else t=this,Error.call(this,cr[i]),this.message=cr[i],Error.captureStackTrace&&Error.captureStackTrace(this,ar);return t.code=i,e&&(this.message=this.message+": "+e),t}ar.prototype=Error.prototype;fa(pr,ar);function mn(){}mn.prototype={length:0,item:function(i){return i>=0&&i<this.length?this[i]:null},toString:function(i,e){for(var t=[],n=0;n<this.length;n++)Ei(this[n],t,i,e);return t.join("")},filter:function(i){return Array.prototype.filter.call(this,i)},indexOf:function(i){return Array.prototype.indexOf.call(this,i)}};function Ci(i,e){this._node=i,this._refresh=e,ql(this)}function ql(i){var e=i._node._inc||i._node.ownerDocument._inc;if(i._inc!==e){var t=i._refresh(i._node);if(bp(i,"length",t.length),!i.$$length||t.length<i.$$length)for(var n=t.length;n in i;n++)Object.prototype.hasOwnProperty.call(i,n)&&delete i[n];fa(t,i),i._inc=e}}Ci.prototype.item=function(i){return ql(this),this[i]||null};Nr(Ci,mn);function Ka(){}function op(i,e){for(var t=i.length;t--;)if(i[t]===e)return t}function Tu(i,e,t,n){if(n?e[op(e,n)]=t:e[e.length++]=t,i){t.ownerElement=i;var r=i.ownerDocument;r&&(n&&cp(r,i,n),Ig(r,i,t))}}function Nu(i,e,t){var n=op(e,t);if(n>=0){for(var r=e.length-1;n<r;)e[n]=e[++n];if(e.length=r,i){var s=i.ownerDocument;s&&(cp(s,i,t),t.ownerElement=null)}}else throw new ar(lp,new Error(i.tagName+"@"+t))}Ka.prototype={length:0,item:mn.prototype.item,getNamedItem:function(i){for(var e=this.length;e--;){var t=this[e];if(t.nodeName==i)return t}},setNamedItem:function(i){var e=i.ownerElement;if(e&&e!=this._ownerElement)throw new ar(Cu);var t=this.getNamedItem(i.nodeName);return Tu(this._ownerElement,this,i,t),t},setNamedItemNS:function(i){var e=i.ownerElement,t;if(e&&e!=this._ownerElement)throw new ar(Cu);return t=this.getNamedItemNS(i.namespaceURI,i.localName),Tu(this._ownerElement,this,i,t),t},removeNamedItem:function(i){var e=this.getNamedItem(i);return Nu(this._ownerElement,this,e),e},removeNamedItemNS:function(i,e){var t=this.getNamedItemNS(i,e);return Nu(this._ownerElement,this,t),t},getNamedItemNS:function(i,e){for(var t=this.length;t--;){var n=this[t];if(n.localName==e&&n.namespaceURI==i)return n}return null}};function up(){}up.prototype={hasFeature:function(i,e){return!0},createDocument:function(i,e,t){var n=new ca;if(n.implementation=this,n.childNodes=new mn,n.doctype=t||null,t&&n.appendChild(t),e){var r=n.createElementNS(i,e);n.appendChild(r)}return n},createDocumentType:function(i,e,t){var n=new hs;return n.name=i,n.nodeName=i,n.publicId=e||"",n.systemId=t||"",n}};function Ot(){}Ot.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(i,e){return Za(this,i,e)},replaceChild:function(i,e){Za(this,i,e,dp),e&&this.removeChild(e)},removeChild:function(i){return hp(this,i)},appendChild:function(i){return this.insertBefore(i,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(i){return _l(this.ownerDocument||this,this,i)},normalize:function(){for(var i=this.firstChild;i;){var e=i.nextSibling;e&&e.nodeType==Ja&&i.nodeType==Ja?(this.removeChild(e),i.appendData(e.data)):(i.normalize(),i=e)}},isSupported:function(i,e){return this.ownerDocument.implementation.hasFeature(i,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(i){for(var e=this;e;){var t=e._nsMap;if(t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&t[n]===i)return n}e=e.nodeType==Ai?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(i){for(var e=this;e;){var t=e._nsMap;if(t&&Object.prototype.hasOwnProperty.call(t,i))return t[i];e=e.nodeType==Ai?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(i){var e=this.lookupPrefix(i);return e==null}};function fp(i){return i=="<"&&"&lt;"||i==">"&&"&gt;"||i=="&"&&"&amp;"||i=='"'&&"&quot;"||"&#"+i.charCodeAt()+";"}fa(Sr,Ot);fa(Sr,Ot.prototype);function na(i,e){if(e(i))return!0;if(i=i.firstChild)do if(na(i,e))return!0;while(i=i.nextSibling)}function ca(){this.ownerDocument=this}function Ig(i,e,t){i&&i._inc++;var n=t.namespaceURI;n===ra.XMLNS&&(e._nsMap[t.prefix?t.localName:""]=t.value)}function cp(i,e,t,n){i&&i._inc++;var r=t.namespaceURI;r===ra.XMLNS&&delete e._nsMap[t.prefix?t.localName:""]}function Ml(i,e,t){if(i&&i._inc){i._inc++;var n=e.childNodes;if(t)n[n.length++]=t;else{for(var r=e.firstChild,s=0;r;)n[s++]=r,r=r.nextSibling;n.length=s,delete n[n.length]}}}function hp(i,e){var t=e.previousSibling,n=e.nextSibling;return t?t.nextSibling=n:i.firstChild=n,n?n.previousSibling=t:i.lastChild=t,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,Ml(i.ownerDocument,i),e}function Rg(i){return i&&(i.nodeType===Ot.DOCUMENT_NODE||i.nodeType===Ot.DOCUMENT_FRAGMENT_NODE||i.nodeType===Ot.ELEMENT_NODE)}function Fg(i){return i&&(ln(i)||xl(i)||wn(i)||i.nodeType===Ot.DOCUMENT_FRAGMENT_NODE||i.nodeType===Ot.COMMENT_NODE||i.nodeType===Ot.PROCESSING_INSTRUCTION_NODE)}function wn(i){return i&&i.nodeType===Ot.DOCUMENT_TYPE_NODE}function ln(i){return i&&i.nodeType===Ot.ELEMENT_NODE}function xl(i){return i&&i.nodeType===Ot.TEXT_NODE}function Su(i,e){var t=i.childNodes||[];if(sn(t,ln)||wn(e))return!1;var n=sn(t,wn);return!(e&&n&&t.indexOf(n)>t.indexOf(e))}function Pu(i,e){var t=i.childNodes||[];function n(s){return ln(s)&&s!==e}if(sn(t,n))return!1;var r=sn(t,wn);return!(e&&r&&t.indexOf(r)>t.indexOf(e))}function Og(i,e,t){if(!Rg(i))throw new ar(kr,"Unexpected parent node type "+i.nodeType);if(t&&t.parentNode!==i)throw new ar(lp,"child not in parent");if(!Fg(e)||wn(e)&&i.nodeType!==Ot.DOCUMENT_NODE)throw new ar(kr,"Unexpected node type "+e.nodeType+" for parent node type "+i.nodeType)}function Bg(i,e,t){var n=i.childNodes||[],r=e.childNodes||[];if(e.nodeType===Ot.DOCUMENT_FRAGMENT_NODE){var s=r.filter(ln);if(s.length>1||sn(r,xl))throw new ar(kr,"More than one element or text in fragment");if(s.length===1&&!Su(i,t))throw new ar(kr,"Element in fragment can not be inserted before doctype")}if(ln(e)&&!Su(i,t))throw new ar(kr,"Only one element can be added and only after doctype");if(wn(e)){if(sn(n,wn))throw new ar(kr,"Only one doctype is allowed");var a=sn(n,ln);if(t&&n.indexOf(a)<n.indexOf(t))throw new ar(kr,"Doctype can only be inserted before an element");if(!t&&a)throw new ar(kr,"Doctype can not be appended since element is present")}}function dp(i,e,t){var n=i.childNodes||[],r=e.childNodes||[];if(e.nodeType===Ot.DOCUMENT_FRAGMENT_NODE){var s=r.filter(ln);if(s.length>1||sn(r,xl))throw new ar(kr,"More than one element or text in fragment");if(s.length===1&&!Pu(i,t))throw new ar(kr,"Element in fragment can not be inserted before doctype")}if(ln(e)&&!Pu(i,t))throw new ar(kr,"Only one element can be added and only after doctype");if(wn(e)){if(sn(n,function(o){return wn(o)&&o!==t}))throw new ar(kr,"Only one doctype is allowed");var a=sn(n,ln);if(t&&n.indexOf(a)<n.indexOf(t))throw new ar(kr,"Doctype can only be inserted before an element")}}function Za(i,e,t,n){Og(i,e,t),i.nodeType===Ot.DOCUMENT_NODE&&(n||Bg)(i,e,t);var r=e.parentNode;if(r&&r.removeChild(e),e.nodeType===yn){var s=e.firstChild;if(s==null)return e;var a=e.lastChild}else s=a=e;var l=t?t.previousSibling:i.lastChild;s.previousSibling=l,a.nextSibling=t,l?l.nextSibling=s:i.firstChild=s,t==null?i.lastChild=a:t.previousSibling=a;do s.parentNode=i;while(s!==a&&(s=s.nextSibling));return Ml(i.ownerDocument||i,i),e.nodeType==yn&&(e.firstChild=e.lastChild=null),e}function Lg(i,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=i,e.previousSibling=i.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:i.firstChild=e,i.lastChild=e,Ml(i.ownerDocument,i,e),e}ca.prototype={nodeName:"#document",nodeType:ap,doctype:null,documentElement:null,_inc:1,insertBefore:function(i,e){if(i.nodeType==yn){for(var t=i.firstChild;t;){var n=t.nextSibling;this.insertBefore(t,e),t=n}return i}return Za(this,i,e),i.ownerDocument=this,this.documentElement===null&&i.nodeType===Vr&&(this.documentElement=i),i},removeChild:function(i){return this.documentElement==i&&(this.documentElement=null),hp(this,i)},replaceChild:function(i,e){Za(this,i,e,dp),i.ownerDocument=this,e&&this.removeChild(e),ln(i)&&(this.documentElement=i)},importNode:function(i,e){return gp(this,i,e)},getElementById:function(i){var e=null;return na(this.documentElement,function(t){if(t.nodeType==Vr&&t.getAttribute("id")==i)return e=t,!0}),e},getElementsByClassName:function(i){var e=Au(i);return new Ci(this,function(t){var n=[];return e.length>0&&na(t.documentElement,function(r){if(r!==t&&r.nodeType===Vr){var s=r.getAttribute("class");if(s){var a=i===s;if(!a){var l=Au(s);a=e.every(Ng(l))}a&&n.push(r)}}}),n})},createElement:function(i){var e=new li;e.ownerDocument=this,e.nodeName=i,e.tagName=i,e.localName=i,e.childNodes=new mn;var t=e.attributes=new Ka;return t._ownerElement=e,e},createDocumentFragment:function(){var i=new ds;return i.ownerDocument=this,i.childNodes=new mn,i},createTextNode:function(i){var e=new Vl;return e.ownerDocument=this,e.appendData(i),e},createComment:function(i){var e=new zl;return e.ownerDocument=this,e.appendData(i),e},createCDATASection:function(i){var e=new Hl;return e.ownerDocument=this,e.appendData(i),e},createProcessingInstruction:function(i,e){var t=new Xl;return t.ownerDocument=this,t.tagName=t.nodeName=t.target=i,t.nodeValue=t.data=e,t},createAttribute:function(i){var e=new es;return e.ownerDocument=this,e.name=i,e.nodeName=i,e.localName=i,e.specified=!0,e},createEntityReference:function(i){var e=new $l;return e.ownerDocument=this,e.nodeName=i,e},createElementNS:function(i,e){var t=new li,n=e.split(":"),r=t.attributes=new Ka;return t.childNodes=new mn,t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.namespaceURI=i,n.length==2?(t.prefix=n[0],t.localName=n[1]):t.localName=e,r._ownerElement=t,t},createAttributeNS:function(i,e){var t=new es,n=e.split(":");return t.ownerDocument=this,t.nodeName=e,t.name=e,t.namespaceURI=i,t.specified=!0,n.length==2?(t.prefix=n[0],t.localName=n[1]):t.localName=e,t}};Nr(ca,Ot);function li(){this._nsMap={}}li.prototype={nodeType:Vr,hasAttribute:function(i){return this.getAttributeNode(i)!=null},getAttribute:function(i){var e=this.getAttributeNode(i);return e&&e.value||""},getAttributeNode:function(i){return this.attributes.getNamedItem(i)},setAttribute:function(i,e){var t=this.ownerDocument.createAttribute(i);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},removeAttribute:function(i){var e=this.getAttributeNode(i);e&&this.removeAttributeNode(e)},appendChild:function(i){return i.nodeType===yn?this.insertBefore(i,null):Lg(this,i)},setAttributeNode:function(i){return this.attributes.setNamedItem(i)},setAttributeNodeNS:function(i){return this.attributes.setNamedItemNS(i)},removeAttributeNode:function(i){return this.attributes.removeNamedItem(i.nodeName)},removeAttributeNS:function(i,e){var t=this.getAttributeNodeNS(i,e);t&&this.removeAttributeNode(t)},hasAttributeNS:function(i,e){return this.getAttributeNodeNS(i,e)!=null},getAttributeNS:function(i,e){var t=this.getAttributeNodeNS(i,e);return t&&t.value||""},setAttributeNS:function(i,e,t){var n=this.ownerDocument.createAttributeNS(i,e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},getAttributeNodeNS:function(i,e){return this.attributes.getNamedItemNS(i,e)},getElementsByTagName:function(i){return new Ci(this,function(e){var t=[];return na(e,function(n){n!==e&&n.nodeType==Vr&&(i==="*"||n.tagName==i)&&t.push(n)}),t})},getElementsByTagNameNS:function(i,e){return new Ci(this,function(t){var n=[];return na(t,function(r){r!==t&&r.nodeType===Vr&&(i==="*"||r.namespaceURI===i)&&(e==="*"||r.localName==e)&&n.push(r)}),n})}};ca.prototype.getElementsByTagName=li.prototype.getElementsByTagName;ca.prototype.getElementsByTagNameNS=li.prototype.getElementsByTagNameNS;Nr(li,Ot);function es(){}es.prototype.nodeType=Ai;Nr(es,Ot);function ha(){}ha.prototype={data:"",substringData:function(i,e){return this.data.substring(i,i+e)},appendData:function(i){i=this.data+i,this.nodeValue=this.data=i,this.length=i.length},insertData:function(i,e){this.replaceData(i,0,e)},appendChild:function(i){throw new Error(cr[kr])},deleteData:function(i,e){this.replaceData(i,e,"")},replaceData:function(i,e,t){var n=this.data.substring(0,i),r=this.data.substring(i+e);t=n+t+r,this.nodeValue=this.data=t,this.length=t.length}};Nr(ha,Ot);function Vl(){}Vl.prototype={nodeName:"#text",nodeType:Ja,splitText:function(i){var e=this.data,t=e.substring(i);e=e.substring(0,i),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}};Nr(Vl,ha);function zl(){}zl.prototype={nodeName:"#comment",nodeType:ip};Nr(zl,ha);function Hl(){}Hl.prototype={nodeName:"#cdata-section",nodeType:tp};Nr(Hl,ha);function hs(){}hs.prototype.nodeType=sp;Nr(hs,Ot);function pp(){}pp.prototype.nodeType=Pg;Nr(pp,Ot);function _p(){}_p.prototype.nodeType=Sg;Nr(_p,Ot);function $l(){}$l.prototype.nodeType=rp;Nr($l,Ot);function ds(){}ds.prototype.nodeName="#document-fragment";ds.prototype.nodeType=yn;Nr(ds,Ot);function Xl(){}Xl.prototype.nodeType=np;Nr(Xl,Ot);function vp(){}vp.prototype.serializeToString=function(i,e,t){return mp.call(i,e,t)};Ot.prototype.toString=mp;function mp(i,e){var t=[],n=this.nodeType==9&&this.documentElement||this,r=n.prefix,s=n.namespaceURI;if(s&&r==null){var r=n.lookupPrefix(s);if(r==null)var a=[{namespace:s,prefix:null}]}return Ei(this,t,i,e,a),t.join("")}function Iu(i,e,t){var n=i.prefix||"",r=i.namespaceURI;if(!r||n==="xml"&&r===ra.XML||r===ra.XMLNS)return!1;for(var s=t.length;s--;){var a=t[s];if(a.prefix===n)return a.namespace!==r}return!0}function js(i,e,t){i.push(" ",e,'="',t.replace(/[<>&"\t\n\r]/g,fp),'"')}function Ei(i,e,t,n,r){if(r||(r=[]),n)if(i=n(i),i){if(typeof i=="string"){e.push(i);return}}else return;switch(i.nodeType){case Vr:var s=i.attributes,a=s.length,D=i.firstChild,l=i.tagName;t=ra.isHTML(i.namespaceURI)||t;var o=l;if(!t&&!i.prefix&&i.namespaceURI){for(var u,f=0;f<s.length;f++)if(s.item(f).name==="xmlns"){u=s.item(f).value;break}if(!u)for(var d=r.length-1;d>=0;d--){var h=r[d];if(h.prefix===""&&h.namespace===i.namespaceURI){u=h.namespace;break}}if(u!==i.namespaceURI)for(var d=r.length-1;d>=0;d--){var h=r[d];if(h.namespace===i.namespaceURI){h.prefix&&(o=h.prefix+":"+l);break}}}e.push("<",o);for(var c=0;c<a;c++){var p=s.item(c);p.prefix=="xmlns"?r.push({prefix:p.localName,namespace:p.value}):p.nodeName=="xmlns"&&r.push({prefix:"",namespace:p.value})}for(var c=0;c<a;c++){var p=s.item(c);if(Iu(p,t,r)){var _=p.prefix||"",v=p.namespaceURI;js(e,_?"xmlns:"+_:"xmlns",v),r.push({prefix:_,namespace:v})}Ei(p,e,t,n,r)}if(l===o&&Iu(i,t,r)){var _=i.prefix||"",v=i.namespaceURI;js(e,_?"xmlns:"+_:"xmlns",v),r.push({prefix:_,namespace:v})}if(D||t&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(e.push(">"),t&&/^script$/i.test(l))for(;D;)D.data?e.push(D.data):Ei(D,e,t,n,r.slice()),D=D.nextSibling;else for(;D;)Ei(D,e,t,n,r.slice()),D=D.nextSibling;e.push("</",o,">")}else e.push("/>");return;case ap:case yn:for(var D=i.firstChild;D;)Ei(D,e,t,n,r.slice()),D=D.nextSibling;return;case Ai:return js(e,i.name,i.value);case Ja:return e.push(i.data.replace(/[<&>]/g,fp));case tp:return e.push("<![CDATA[",i.data,"]]>");case ip:return e.push("<!--",i.data,"-->");case sp:var U=i.publicId,T=i.systemId;if(e.push("<!DOCTYPE ",i.name),U)e.push(" PUBLIC ",U),T&&T!="."&&e.push(" ",T),e.push(">");else if(T&&T!=".")e.push(" SYSTEM ",T,">");else{var N=i.internalSubset;N&&e.push(" [",N,"]"),e.push(">")}return;case np:return e.push("<?",i.target," ",i.data,"?>");case rp:return e.push("&",i.nodeName,";");default:e.push("??",i.nodeName)}}function gp(i,e,t){var n;switch(e.nodeType){case Vr:n=e.cloneNode(!1),n.ownerDocument=i;case yn:break;case Ai:t=!0;break}if(n||(n=e.cloneNode(!1)),n.ownerDocument=i,n.parentNode=null,t)for(var r=e.firstChild;r;)n.appendChild(gp(i,r,t)),r=r.nextSibling;return n}function _l(i,e,t){var n=new e.constructor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=e[r];typeof s!="object"&&s!=n[r]&&(n[r]=s)}switch(e.childNodes&&(n.childNodes=new mn),n.ownerDocument=i,n.nodeType){case Vr:var a=e.attributes,l=n.attributes=new Ka,o=a.length;l._ownerElement=n;for(var u=0;u<o;u++)n.setAttributeNode(_l(i,a.item(u),!0));break;case Ai:t=!0}if(t)for(var f=e.firstChild;f;)n.appendChild(_l(i,f,t)),f=f.nextSibling;return n}function bp(i,e,t){i[e]=t}try{if(Object.defineProperty){let i=function(e){switch(e.nodeType){case Vr:case yn:var t=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&t.push(i(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}};Object.defineProperty(Ci.prototype,"length",{get:function(){return ql(this),this.$$length}}),Object.defineProperty(Ot.prototype,"textContent",{get:function(){return i(this)},set:function(e){switch(this.nodeType){case Vr:case yn:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),bp=function(e,t,n){e["$$"+t]=n}}}catch{}xn.DocumentType=hs;xn.DOMException=ar;xn.DOMImplementation=up;xn.Element=li;xn.Node=Ot;xn.NodeList=mn;xn.XMLSerializer=vp;var ps={},yp={};(function(i){var e=kn.freeze;i.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),i.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),i.entityMap=i.HTML_ENTITIES})(yp);var Gl={},ia=kn.NAMESPACE,vl=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Ru=new RegExp("[\\-\\.0-9"+vl.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Fu=new RegExp("^"+vl.source+Ru.source+"*(?::"+vl.source+Ru.source+"*)?$"),Vi=0,Nn=1,hi=2,zi=3,di=4,pi=5,Hi=6,Ia=7;function Ti(i,e){this.message=i,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,Ti)}Ti.prototype=new Error;Ti.prototype.name=Ti.name;function wp(){}wp.prototype={parse:function(i,e,t){var n=this.domBuilder;n.startDocument(),Ep(e,e={}),Ug(i,e,t,n,this.errorHandler),n.endDocument()}};function Ug(i,e,t,n,r){function s(j){if(j>65535){j-=65536;var se=55296+(j>>10),Z=56320+(j&1023);return String.fromCharCode(se,Z)}else return String.fromCharCode(j)}function a(j){var se=j.slice(1,-1);return Object.hasOwnProperty.call(t,se)?t[se]:se.charAt(0)==="#"?s(parseInt(se.substr(1).replace("x","0x"))):(r.error("entity not found:"+j),j)}function l(j){if(j>_){var se=i.substring(_,j).replace(/&#?\w+;/g,a);h&&o(_),n.characters(se,0,j-_),_=j}}function o(j,se){for(;j>=f&&(se=d.exec(i));)u=se.index,f=u+se[0].length,h.lineNumber++;h.columnNumber=j-u+1}for(var u=0,f=0,d=/.*(?:\r\n?|\n)|.*$/g,h=n.locator,c=[{currentNSMap:e}],p={},_=0;;){try{var v=i.indexOf("<",_);if(v<0){if(!i.substr(_).match(/^\s*$/)){var D=n.doc,U=D.createTextNode(i.substr(_));D.appendChild(U),n.currentElement=U}return}switch(v>_&&l(v),i.charAt(v+1)){case"/":var k=i.indexOf(">",v+3),T=i.substring(v+2,k).replace(/[ \t\n\r]+$/g,""),N=c.pop();k<0?(T=i.substring(v+2).replace(/[\s<].*/,""),r.error("end tag name: "+T+" is not complete:"+N.tagName),k=v+1+T.length):T.match(/\s</)&&(T=T.replace(/[\s<].*/,""),r.error("end tag name: "+T+" maybe not complete"),k=v+1+T.length);var g=N.localNSMap,E=N.tagName==T,b=E||N.tagName&&N.tagName.toLowerCase()==T.toLowerCase();if(b){if(n.endElement(N.uri,N.localName,T),g)for(var I in g)Object.prototype.hasOwnProperty.call(g,I)&&n.endPrefixMapping(I);E||r.fatalError("end tag name: "+T+" is not match the current start tagName:"+N.tagName)}else c.push(N);k++;break;case"?":h&&o(v),k=Vg(i,v,n);break;case"!":h&&o(v),k=xg(i,v,n,r);break;default:h&&o(v);var C=new Dp,O=c[c.length-1].currentNSMap,k=jg(i,v,C,O,a,r),B=C.length;if(!C.closed&&Mg(i,k,C.tagName,p)&&(C.closed=!0,t.nbsp||r.warning("unclosed xml attribute")),h&&B){for(var P=Ou(h,{}),A=0;A<B;A++){var z=C[A];o(z.offset),z.locator=Ou(h,{})}n.locator=P,Bu(C,n,O)&&c.push(C),n.locator=h}else Bu(C,n,O)&&c.push(C);ia.isHTML(C.uri)&&!C.closed?k=qg(i,k,C.tagName,a,n):k++}}catch(j){if(j instanceof Ti)throw j;r.error("element parse error: "+j),k=-1}k>_?_=k:l(Math.max(v,_)+1)}}function Ou(i,e){return e.lineNumber=i.lineNumber,e.columnNumber=i.columnNumber,e}function jg(i,e,t,n,r,s){function a(h,c,p){t.attributeNames.hasOwnProperty(h)&&s.fatalError("Attribute "+h+" redefined"),t.addValue(h,c.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,r),p)}for(var l,o,u=++e,f=Vi;;){var d=i.charAt(u);switch(d){case"=":if(f===Nn)l=i.slice(e,u),f=zi;else if(f===hi)f=zi;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(f===zi||f===Nn)if(f===Nn&&(s.warning('attribute value must after "="'),l=i.slice(e,u)),e=u+1,u=i.indexOf(d,e),u>0)o=i.slice(e,u),a(l,o,e-1),f=pi;else throw new Error("attribute value no end '"+d+"' match");else if(f==di)o=i.slice(e,u),a(l,o,e),s.warning('attribute "'+l+'" missed start quot('+d+")!!"),e=u+1,f=pi;else throw new Error('attribute value must after "="');break;case"/":switch(f){case Vi:t.setTagName(i.slice(e,u));case pi:case Hi:case Ia:f=Ia,t.closed=!0;case di:case Nn:break;case hi:t.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),f==Vi&&t.setTagName(i.slice(e,u)),u;case">":switch(f){case Vi:t.setTagName(i.slice(e,u));case pi:case Hi:case Ia:break;case di:case Nn:o=i.slice(e,u),o.slice(-1)==="/"&&(t.closed=!0,o=o.slice(0,-1));case hi:f===hi&&(o=l),f==di?(s.warning('attribute "'+o+'" missed quot(")!'),a(l,o,e)):((!ia.isHTML(n[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+o+'" missed value!! "'+o+'" instead!!'),a(o,o,e));break;case zi:throw new Error("attribute value missed!!")}return u;case"":d=" ";default:if(d<=" ")switch(f){case Vi:t.setTagName(i.slice(e,u)),f=Hi;break;case Nn:l=i.slice(e,u),f=hi;break;case di:var o=i.slice(e,u);s.warning('attribute "'+o+'" missed quot(")!!'),a(l,o,e);case pi:f=Hi;break}else switch(f){case hi:t.tagName,(!ia.isHTML(n[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+l+'" missed value!! "'+l+'" instead2!!'),a(l,l,e),e=u,f=Nn;break;case pi:s.warning('attribute space is required"'+l+'"!!');case Hi:f=Nn,e=u;break;case zi:f=di,e=u;break;case Ia:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function Bu(i,e,t){for(var n=i.tagName,r=null,d=i.length;d--;){var s=i[d],a=s.qName,l=s.value,h=a.indexOf(":");if(h>0)var o=s.prefix=a.slice(0,h),u=a.slice(h+1),f=o==="xmlns"&&u;else u=a,o=null,f=a==="xmlns"&&"";s.localName=u,f!==!1&&(r==null&&(r={},Ep(t,t={})),t[f]=r[f]=l,s.uri=ia.XMLNS,e.startPrefixMapping(f,l))}for(var d=i.length;d--;){s=i[d];var o=s.prefix;o&&(o==="xml"&&(s.uri=ia.XML),o!=="xmlns"&&(s.uri=t[o||""]))}var h=n.indexOf(":");h>0?(o=i.prefix=n.slice(0,h),u=i.localName=n.slice(h+1)):(o=null,u=i.localName=n);var c=i.uri=t[o||""];if(e.startElement(c,u,n,i),i.closed){if(e.endElement(c,u,n),r)for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&e.endPrefixMapping(o)}else return i.currentNSMap=t,i.localNSMap=r,!0}function qg(i,e,t,n,r){if(/^(?:script|textarea)$/i.test(t)){var s=i.indexOf("</"+t+">",e),a=i.substring(e+1,s);if(/[&<]/.test(a))return/^script$/i.test(t)?(r.characters(a,0,a.length),s):(a=a.replace(/&#?\w+;/g,n),r.characters(a,0,a.length),s)}return e+1}function Mg(i,e,t,n){var r=n[t];return r==null&&(r=i.lastIndexOf("</"+t+">"),r<e&&(r=i.lastIndexOf("</"+t)),n[t]=r),r<e}function Ep(i,e){for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}function xg(i,e,t,n){var r=i.charAt(e+2);switch(r){case"-":if(i.charAt(e+3)==="-"){var s=i.indexOf("-->",e+4);return s>e?(t.comment(i,e+4,s-e-4),s+3):(n.error("Unclosed comment"),-1)}else return-1;default:if(i.substr(e+3,6)=="CDATA["){var s=i.indexOf("]]>",e+9);return t.startCDATA(),t.characters(i,e+9,s-e-9),t.endCDATA(),s+3}var a=zg(i,e),l=a.length;if(l>1&&/!doctype/i.test(a[0][0])){var o=a[1][0],u=!1,f=!1;l>3&&(/^public$/i.test(a[2][0])?(u=a[3][0],f=l>4&&a[4][0]):/^system$/i.test(a[2][0])&&(f=a[3][0]));var d=a[l-1];return t.startDTD(o,u,f),t.endDTD(),d.index+d[0].length}}return-1}function Vg(i,e,t){var n=i.indexOf("?>",e);if(n){var r=i.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return r?(r[0].length,t.processingInstruction(r[1],r[2]),n+2):-1}return-1}function Dp(){this.attributeNames={}}Dp.prototype={setTagName:function(i){if(!Fu.test(i))throw new Error("invalid tagName:"+i);this.tagName=i},addValue:function(i,e,t){if(!Fu.test(i))throw new Error("invalid attribute:"+i);this.attributeNames[i]=this.length,this[this.length++]={qName:i,value:e,offset:t}},length:0,getLocalName:function(i){return this[i].localName},getLocator:function(i){return this[i].locator},getQName:function(i){return this[i].qName},getURI:function(i){return this[i].uri},getValue:function(i){return this[i].value}};function zg(i,e){var t,n=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=e,r.exec(i);t=r.exec(i);)if(n.push(t),t[1])return n}Gl.XMLReader=wp;Gl.ParseError=Ti;var Hg=kn,$g=xn,Lu=yp,kp=Gl,Xg=$g.DOMImplementation,Uu=Hg.NAMESPACE,Gg=kp.ParseError,Qg=kp.XMLReader;function Ap(i){return i.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function Cp(i){this.options=i||{locator:{}}}Cp.prototype.parseFromString=function(i,e){var t=this.options,n=new Qg,r=t.domBuilder||new da,s=t.errorHandler,a=t.locator,l=t.xmlns||{},o=/\/x?html?$/.test(e),u=o?Lu.HTML_ENTITIES:Lu.XML_ENTITIES;a&&r.setDocumentLocator(a),n.errorHandler=Wg(s,r,a),n.domBuilder=t.domBuilder||r,o&&(l[""]=Uu.HTML),l.xml=l.xml||Uu.XML;var f=t.normalizeLineEndings||Ap;return i&&typeof i=="string"?n.parse(f(i),l,u):n.errorHandler.error("invalid doc source"),r.doc};function Wg(i,e,t){if(!i){if(e instanceof da)return e;i=e}var n={},r=i instanceof Function;t=t||{};function s(a){var l=i[a];!l&&r&&(l=i.length==2?function(o){i(a,o)}:i),n[a]=l&&function(o){l("[xmldom "+a+"]	"+o+ml(t))}||function(){}}return s("warning"),s("error"),s("fatalError"),n}function da(){this.cdata=!1}function _i(i,e){e.lineNumber=i.lineNumber,e.columnNumber=i.columnNumber}da.prototype={startDocument:function(){this.doc=new Xg().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(i,e,t,n){var r=this.doc,s=r.createElementNS(i,t||e),a=n.length;Ra(this,s),this.currentElement=s,this.locator&&_i(this.locator,s);for(var l=0;l<a;l++){var i=n.getURI(l),o=n.getValue(l),t=n.getQName(l),u=r.createAttributeNS(i,t);this.locator&&_i(n.getLocator(l),u),u.value=u.nodeValue=o,s.setAttributeNode(u)}},endElement:function(i,e,t){var n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping:function(i,e){},endPrefixMapping:function(i){},processingInstruction:function(i,e){var t=this.doc.createProcessingInstruction(i,e);this.locator&&_i(this.locator,t),Ra(this,t)},ignorableWhitespace:function(i,e,t){},characters:function(i,e,t){if(i=ju.apply(this,arguments),i){if(this.cdata)var n=this.doc.createCDATASection(i);else var n=this.doc.createTextNode(i);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(i)&&this.doc.appendChild(n),this.locator&&_i(this.locator,n)}},skippedEntity:function(i){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(i){(this.locator=i)&&(i.lineNumber=0)},comment:function(i,e,t){i=ju.apply(this,arguments);var n=this.doc.createComment(i);this.locator&&_i(this.locator,n),Ra(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(i,e,t){var n=this.doc.implementation;if(n&&n.createDocumentType){var r=n.createDocumentType(i,e,t);this.locator&&_i(this.locator,r),Ra(this,r),this.doc.doctype=r}},warning:function(i){console.warn("[xmldom warning]	"+i,ml(this.locator))},error:function(i){console.error("[xmldom error]	"+i,ml(this.locator))},fatalError:function(i){throw new Gg(i,this.locator)}};function ml(i){if(i)return`
@`+(i.systemId||"")+"#[line:"+i.lineNumber+",col:"+i.columnNumber+"]"}function ju(i,e,t){return typeof i=="string"?i.substr(e,t):i.length>=e+t||e?new java.lang.String(i,e,t)+"":i}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(i){da.prototype[i]=function(){return null}});function Ra(i,e){i.currentElement?i.currentElement.appendChild(e):i.doc.appendChild(e)}ps.__DOMHandler=da;ps.normalizeLineEndings=Ap;ps.DOMParser=Cp;var qu=ps.DOMParser;function Yg(i){return i=i.split(";")[0].trim(),new hr("http://www.w3.org/ns/iana/media-types/"+i+"#Resource")}function Jg(i,e){i.callbacks={};for(var t=e.length-1;t>=0;t--)i.callbacks[e[t]]=[];i.addHook=function(n){i.callbacks[n]||(i.callbacks[n]=[])},i.addCallback=function(n,r){i.callbacks[n].push(r)},i.removeCallback=function(n,r){for(var s=0;s<i.callbacks[n].length;s++)if(i.callbacks[n][s].name===r)return i.callbacks[n].splice(s,1),!0;return!1},i.insertCallback=function(n,r){i.callbacks[n].unshift(r)},i.fireCallbacks=function(r,s){var a=[],l=[],o=i.callbacks[r].length,u,f;for(u=o-1;u>=0;u--)f=i.callbacks[r][u],f&&f.apply(i,s)&&a.push(f);for(u=a.length-1;u>=0;u--)l.push(a[u]);for(u=o;u<i.callbacks[r].length;u++)l.push(i.callbacks[r][u]);i.callbacks[r]=l}}function Kg(i,e){e=e||{};var t=[];e&&e.selfClosing&&e.selfClosing.split(" ").forEach(function(r){t[r]=!0});var n=[];return e&&e.skipAttributes&&e.skipAttributes.split(" ").forEach(function(r){n[r]=!0}),Tp(i,e,t,n)}function Tp(i,e,t,n){var r,s="",a=[!1];if(typeof i.nodeType>"u")return s;if(i.nodeType===1){if(i.hasAttribute("class")&&e&&e.classWithChildText&&i.matches(e.classWithChildText.class))s+=i.querySelector(e.classWithChildText.element).textContent;else if(!(e&&e.skipNodeWithClass&&i.matches("."+e.skipNodeWithClass))){var l=i.nodeName.toLowerCase();s+="<"+l;var o=[];for(r=i.attributes.length-1;r>=0;r--){var u=i.attributes[r];if(!(n&&n.length>0&&n[u.name])&&!/^\d+$/.test(u.name)){if(u.name==="class"&&e&&e.replaceClassItemWith&&u.value.split(" ").indexOf(e.replaceClassItemWith.source)>-1){var f=new RegExp(e.replaceClassItemWith.source,"g");u.value=u.value.replace(f,e.replaceClassItemWith.target).trim()}u.name==="class"&&e&&e.skipClassWithValue&&e.skipClassWithValue===u.value||o.push(u.name+"='"+u.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;")+"'")}}if(o.length>0&&(e&&e.sortAttributes&&o.sort(function(h,c){return h.toLowerCase().localeCompare(c.toLowerCase())}),s+=" "+o.join(" ")),t&&t.ename)s+=" />";else{for(s+=">",s+=l==="html"?`
  `:"",a.push(l==="style"||l==="script"),r=0;r<i.childNodes.length;r++)s+=Tp(i.childNodes[r]);a.pop(),s+=l==="body"?"</"+l+`>
`:"</"+l+">"}}}else if(i.nodeType===8)s+="<!--"+i.nodeValue+"-->";else if(i.nodeType===3||i.nodeType===4){var d=i.nodeValue.replace(/\n+$/,"");s+=a[a.length-1]?d:d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}else console.log("Warning; Cannot handle serialising nodes of type: "+i.nodeType),console.log(i);return s}function qs(i,e,t,n){var r=function(o){return o.termType==="BlankNode"?null:o},s=function(o){var u=t.statementsMatching(o).map(function(f){return""+r(f.subject)+" "+r(f.predicate)+" "+r(f.object)}).concat(t.statementsMatching(void 0,void 0,o).map(function(f){return""+r(f.subject)+" "+r(f.predicate)+" "+r(f.object)}));return u.sort(),u.join(`
`)},a=Object.prototype.hasOwnProperty.call(t,"compareTerms")?t.compareTerms(i,e):i.compareTerm(e);return i.termType==="BlankNode"&&e.termType==="BlankNode"?a===0?0:s(i)>s(e)?1:s(i)<s(e)?-1:a:n&&i.uri&&e.uri?(n[i.uri]||i.uri).localeCompare(n[e.uri]||e.uri):a}function Zg(i,e,t,n){return qs(i.subject,e.subject,t,n)||qs(i.predicate,e.predicate,t,n)||qs(i.object,e.object,t,n)}function Di(i,e){var t;if(e=e||{},typeof module<"u"&&module&&module.exports){var n=new qu().parseFromString(i,e.contentType||"application/xhtml+xml");return n}else typeof window<"u"&&window.DOMParser?t=new window.DOMParser:t=new qu;return t.parseFromString(i,"application/xml")}function e2(i,e){for(var t=0;t<i.length;t++)if(i[t].subject.equals(e.subject)&&i[t].predicate.equals(e.predicate)&&i[t].object.equals(e.object)&&i[t].why.equals(e.why)){i.splice(t,1);return}throw new Error("RDFArrayRemove: Array did not contain "+e+" "+e.why)}function Np(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xr;return{boolean:i.namedNode("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:i.namedNode("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:i.namedNode("http://www.w3.org/2001/XMLSchema#decimal"),double:i.namedNode("http://www.w3.org/2001/XMLSchema#double"),integer:i.namedNode("http://www.w3.org/2001/XMLSchema#integer"),langString:i.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:i.namedNode("http://www.w3.org/2001/XMLSchema#string")}}Np(xr);const Mu={acl:"http://www.w3.org/ns/auth/acl#",arg:"http://www.w3.org/ns/pim/arg#",as:"https://www.w3.org/ns/activitystreams#",cal:"http://www.w3.org/2002/12/cal/ical#",cert:"http://www.w3.org/ns/auth/cert#",contact:"http://www.w3.org/2000/10/swap/pim/contact#",dc:"http://purl.org/dc/elements/1.1/",dct:"http://purl.org/dc/terms/",doap:"http://usefulinc.com/ns/doap#",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",gpx:"http://www.w3.org/ns/pim/gpx#",http:"http://www.w3.org/2007/ont/http#",httph:"http://www.w3.org/2007/ont/httph#",icalTZ:"http://www.w3.org/2002/12/cal/icaltzd#",ldp:"http://www.w3.org/ns/ldp#",link:"http://www.w3.org/2007/ont/link#",log:"http://www.w3.org/2000/10/swap/log#",meeting:"http://www.w3.org/ns/pim/meeting#",mo:"http://purl.org/ontology/mo/",org:"http://www.w3.org/ns/org#",owl:"http://www.w3.org/2002/07/owl#",pad:"http://www.w3.org/ns/pim/pad#",patch:"http://www.w3.org/ns/pim/patch#",prov:"http://www.w3.org/ns/prov#",qu:"http://www.w3.org/2000/10/swap/pim/qif#",trip:"http://www.w3.org/ns/pim/trip#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rss:"http://purl.org/rss/1.0/",sched:"http://www.w3.org/ns/pim/schedule#",schema:"http://schema.org/",sioc:"http://rdfs.org/sioc/ns#",solid:"http://www.w3.org/ns/solid/terms#",space:"http://www.w3.org/ns/pim/space#",stat:"http://www.w3.org/ns/posix/stat#",tab:"http://www.w3.org/2007/ont/link#",tabont:"http://www.w3.org/2007/ont/link#",ui:"http://www.w3.org/ns/ui#",vcard:"http://www.w3.org/2006/vcard/ns#",wf:"http://www.w3.org/2005/01/wf/flow#",xsd:"http://www.w3.org/2001/XMLSchema#",cco:"http://www.ontologyrepository.com/CommonCoreOntologies/",skos:"http://www.w3.org/2004/02/skos/core#",bookmark:"http://www.w3.org/2002/01/bookmark#",vann:"http://purl.org/vocab/vann/"};function t2(i={namedNode:e=>e}){const e={};for(const t in Mu){const n=Mu[t];e[t]=function(r=""){return i.namedNode(n+r)}}return e}var r2=t2;const xu=la(r2);var Sp={exports:{}};(function(i){(function(e,t){i.exports?i.exports=t():e.ttl2jsonld=t()})(as,function(){function e(r,s){function a(){this.constructor=r}a.prototype=s.prototype,r.prototype=new a}function t(r,s,a,l){this.message=r,this.expected=s,this.found=a,this.location=l,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,t)}e(t,Error),t.buildMessage=function(r,s){var a={literal:function(c){return'"'+o(c.text)+'"'},class:function(c){var p="",_;for(_=0;_<c.parts.length;_++)p+=c.parts[_]instanceof Array?u(c.parts[_][0])+"-"+u(c.parts[_][1]):u(c.parts[_]);return"["+(c.inverted?"^":"")+p+"]"},any:function(c){return"any character"},end:function(c){return"end of input"},other:function(c){return c.description}};function l(c){return c.charCodeAt(0).toString(16).toUpperCase()}function o(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+l(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+l(p)})}function u(c){return c.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+l(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+l(p)})}function f(c){return a[c.type](c)}function d(c){var p=new Array(c.length),_,v;for(_=0;_<c.length;_++)p[_]=f(c[_]);if(p.sort(),p.length>0){for(_=1,v=1;_<p.length;_++)p[_-1]!==p[_]&&(p[v]=p[_],v++);p.length=v}switch(p.length){case 1:return p[0];case 2:return p[0]+" or "+p[1];default:return p.slice(0,-1).join(", ")+", or "+p[p.length-1]}}function h(c){return c?'"'+o(c)+'"':"end of input"}return"Expected "+d(r)+" but "+h(s)+" found."};function n(r,s){s=s!==void 0?s:{};var a={},l={turtleDoc:Eo},o=Eo,u=function(m){var L=Pt.toJSON();return L["@graph"]=[],m.filter(M=>Array.isArray(M)).forEach(M=>{M.forEach(W=>{L["@graph"].push(W)})}),L["@graph"].length===1&&(Object.assign(L,L["@graph"][0]),delete L["@graph"]),L},f=".",d=wt(".",!1),h=function(m){return m},c="#",p=wt("#",!1),_=/^[^\n]/,v=Bt([`
`],!0,!1),D=`
`,U=wt(`
`,!1),T=function(m){return m.join("")},N="@prefix",g=wt("@prefix",!1),E=function(m,L){return Pt.addPrefix(m===""?"0":m,L),{}},b="@base",I=wt("@base",!1),C=function(m){return Pt.addBase(m),{}},O=/^[Bb]/,k=Bt(["B","b"],!1,!1),B=/^[Aa]/,P=Bt(["A","a"],!1,!1),A=/^[Ss]/,z=Bt(["S","s"],!1,!1),j=/^[Ee]/,se=Bt(["E","e"],!1,!1),Z=/^[Pp]/,G=Bt(["P","p"],!1,!1),H=/^[Rr]/,Q=Bt(["R","r"],!1,!1),ee=/^[Ff]/,$=Bt(["F","f"],!1,!1),ae=/^[Ii]/,ze=Bt(["I","i"],!1,!1),Ve=/^[Xx]/,be=Bt(["X","x"],!1,!1),Ne=function(m,L){var M={};return typeof m=="string"&&m!=="[]"?M["@id"]=m:typeof m=="object"&&Object.assign(M,m),L&&Object.assign(M,L),[M]},_e=function(m,L){var M={};return m&&Object.assign(M,m),L&&Object.assign(M,L),[M]},Se=";",et=wt(";",!1),vt=function(m,L,M,W){var re={};return re[M]=W,re},rt=function(m,L,M){return M},Ae=function(m,L,M){var W={};return M.unshift(L0(m,L)),M.forEach(re=>{re&&Object.keys(re).forEach(de=>{re[de].forEach(pe=>{de==="@type"&&pe["@id"]!==void 0&&(pe=pe["@id"]),W[de]===void 0?W[de]=pe:Array.isArray(W[de])?W[de].push(pe):W[de]=[W[de],pe]})})}),W},qe=",",Nt=wt(",",!1),Ut=function(m,L){return L},Vt=function(m,L){return L.unshift(m),L},St="a",Xt=wt("a",!1),je=function(){return"@type"},He=function(m){return Fs(m,!0)},We=function(m){return Fs(m,!1)},tt=function(m){return m==="[]"?{}:{"@id":m}},ft=function(m){return{"@id":m}},zt="[",X=wt("[",!1),S="]",F=wt("]",!1),K="(",fe=wt("(",!1),ye=")",ke=wt(")",!1),Pe=function(m){return{"@list":m}},Xe=function(m,L){return{"@value":m,"@language":L}},Ze="^^",ct=wt("^^",!1),mt=function(m,L){if(L==="http://www.w3.org/2001/XMLSchema#boolean"&&m==="true")return!0;if(L==="http://www.w3.org/2001/XMLSchema#boolean"&&m==="false")return!1;if(L==="http://www.w3.org/2001/XMLSchema#integer")return parseInt(m);if(L==="http://www.w3.org/2001/XMLSchema#double")return parseFloat(m);const M=Pt.resolve(L,!0);if(M){const W=L.split(":")[0];if(M==="http://www.w3.org/2001/XMLSchema#boolean"&&m==="true")return Pt.decrement(W),!0;if(M==="http://www.w3.org/2001/XMLSchema#boolean"&&m==="false")return Pt.decrement(W),!1;if(M==="http://www.w3.org/2001/XMLSchema#integer")return Pt.decrement(W),parseInt(m);if(M==="http://www.w3.org/2001/XMLSchema#double")return Pt.decrement(W),parseFloat(m)}return{"@value":m,"@type":L}},dr="true",Rr=wt("true",!1),lr=function(){return!0},$n="false",bs=wt("false",!1),An=function(){return!1},ys=function(m){return m+":"},ba="<",ws=wt("<",!1),ci=/^[^\0- <>"{}|\^`\\]/,Li=Bt([["\0"," "],"<",">",'"',"{","}","|","^","`","\\"],!0,!1),Es=">",ya=wt(">",!1),Ds=function(m){const L=m.map(W=>65536<=W.codePointAt(0)&&W.codePointAt(0)<=983039?"a":W.length===1?W:W.length===6?String.fromCharCode("0x"+W.substring(2)):W.length===10?String.fromCodePoint("0x"+W.substring(2)):W).join("");if(L.match(/^[^\u0000-\u0020<>"{}|^`\\]*$/)){var M=m.join("");try{return Pt.resolve(M)}catch{As("Invalid IRIREF "+M)}}else As("Invalid IRIREF "+m.join("")+" / "+L)},Fr=":",he=wt(":",!1),ie=function(m){return m=m||"0",Pt.hasPrefix(m)===!1&&As("undefined prefix "+m),m},ve=function(m){return m||""},Ce=function(m,L){return Pt.increment(m),Pt.resolve(m+":"+L)},De="_:",it=wt("_:",!1),Ye=/^[0-9]/,ot=Bt([["0","9"]],!1,!1),jt="@",Yt=wt("@",!1),Dt=/^[a-zA-Z]/,It=Bt([["a","z"],["A","Z"]],!1,!1),Ht="-",pt=wt("-",!1),Rt=/^[a-zA-Z0-9]/,$t=Bt([["a","z"],["A","Z"],["0","9"]],!1,!1),qt=function(m,L){return"-"+L.join("")},$r=function(m,L){return m.join("")+L.join("")},_r=/^[+\-]/,vr=Bt(["+","-"],!1,!1),Cn=function(m){return m.match(/^[0+][0-9]+$/)?{"@value":m,"@type":"http://www.w3.org/2001/XMLSchema#integer"}:parseInt(m)},hn=function(m){return{"@value":m,"@type":"http://www.w3.org/2001/XMLSchema#decimal"}},yr=function(m){return{"@value":m,"@type":"http://www.w3.org/2001/XMLSchema#double"}},Or=/^[eE]/,dn=Bt(["e","E"],!1,!1),wr='"',Xr=wt('"',!1),Ui=/^[^"\\\n\r]/,ji=Bt(['"',"\\",`
`,"\r"],!0,!1),pn="'",_n=wt("'",!1),Xn=/^[^'\\\n\r]/,qi=Bt(["'","\\",`
`,"\r"],!0,!1),Gn="'''",Tn=wt("'''",!1),Gr=/^[^'\\]/,Qr=Bt(["'","\\"],!0,!1),wa="''",to=wt("''",!1),ro=function(m,L){return"''"+L.join("")},no=function(m,L){return"'"+L.join("")},io=function(m,L){return m.join("")+L.join("")},Ea='"""',ao=wt('"""',!1),Wr=/^[^"\\]/,Yr=Bt(['"',"\\"],!0,!1),Da='""',so=wt('""',!1),lo=function(m,L){return'""'+L.join("")},oo=function(m,L){return'"'+L.join("")},uo="\\U",f_=wt("\\U",!1),c_=function(m){return String.fromCodePoint(parseInt(m.join(""),16))},fo="\\u",h_=wt("\\u",!1),d_=function(m){return String.fromCharCode(parseInt(m.join(""),16))},co="\\t",p_=wt("\\t",!1),__=function(){return"	"},ho="\\b",v_=wt("\\b",!1),m_=function(){return"\b"},po="\\n",g_=wt("\\n",!1),b_=function(){return`
`},_o="\\r",y_=wt("\\r",!1),w_=function(){return"\r"},vo="\\f",E_=wt("\\f",!1),D_=function(){return"\f"},mo='\\"',k_=wt('\\"',!1),A_=function(){return'"'},go="\\'",C_=wt("\\'",!1),T_=function(){return"'"},bo="\\\\",N_=wt("\\\\",!1),S_=function(){return"\\"},P_=/^[ \t\r\n]/,I_=Bt([" ","	","\r",`
`],!1,!1),R_=function(){return"[]"},F_=/^[\uD800-\uDBFF]/,O_=Bt([["\uD800","\uDBFF"]],!1,!1),B_=/^[\uDC00-\uDFFF]/,L_=Bt([["\uDC00","\uDFFF"]],!1,!1),U_=function(m,L){return m+L},j_=/^[A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,q_=Bt([["A","Z"],["a","z"],["À","Ö"],["Ø","ö"],["ø","˿"],["Ͱ","ͽ"],["Ϳ","῿"],["‌","‍"],["⁰","↏"],["Ⰰ","⿯"],["、","퟿"],["豈","﷏"],["ﷰ","�"]],!1,!1),M_="_",x_=wt("_",!1),V_="·",z_=wt("·",!1),H_=/^[\u0300-\u036F]/,$_=Bt([["̀","ͯ"]],!1,!1),X_=/^[\u203F-\u2040]/,G_=Bt([["‿","⁀"]],!1,!1),yo=function(m,L,M,W){return M.join("")+W.join("")},Q_=function(m,L,M){return m+L.join("")+M.join("")},W_="%",Y_=wt("%",!1),J_=/^[0-9A-Fa-f]/,K_=Bt([["0","9"],["A","F"],["a","f"]],!1,!1),Z_="\\",e0=wt("\\",!1),t0=/^[_~.!$&'()*+,;=\/?#@%\-]/,r0=Bt(["_","~",".","!","$","&","'","(",")","*","+",",",";","=","/","?","#","@","%","-"],!1,!1),y=0,Ge=0,ka=[{line:1,column:1}],Jr=0,ks=[],Aa;if("startRule"in s){if(!(s.startRule in l))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');o=l[s.startRule]}function As(m,L){throw L=L!==void 0?L:Cs(Ge,y),i0(m,L)}function wt(m,L){return{type:"literal",text:m,ignoreCase:L}}function Bt(m,L,M){return{type:"class",parts:m,inverted:L,ignoreCase:M}}function n0(){return{type:"end"}}function wo(m){var L=ka[m],M;if(L)return L;for(M=m-1;!ka[M];)M--;for(L=ka[M],L={line:L.line,column:L.column};M<m;)r.charCodeAt(M)===10?(L.line++,L.column=1):L.column++,M++;return ka[m]=L,L}function Cs(m,L){var M=wo(m),W=wo(L);return{start:{offset:m,line:M.line,column:M.column},end:{offset:L,line:W.line,column:W.column}}}function Ee(m){y<Jr||(y>Jr&&(Jr=y,ks=[]),ks.push(m))}function i0(m,L){return new t(m,null,null,L)}function a0(m,L,M){return new t(t.buildMessage(m,L),m,L,M)}function Eo(){var m,L,M,W;for(m=y,L=[],M=Do();M!==a;)L.push(M),M=Do();if(L!==a){for(M=[],W=Qe();W!==a;)M.push(W),W=Qe();M!==a?(Ge=m,L=u(L),m=L):(y=m,m=a)}else y=m,m=a;return m}function Do(){var m,L,M,W;if(m=l0(),m===a)if(m=y,L=h0(),L!==a){for(M=[],W=Qe();W!==a;)M.push(W),W=Qe();M!==a?(r.charCodeAt(y)===46?(W=f,y++):(W=a,Ee(d)),W!==a?(Ge=m,L=h(L),m=L):(y=m,m=a)):(y=m,m=a)}else y=m,m=a;return m}function s0(){var m,L,M,W;if(m=y,r.charCodeAt(y)===35?(L=c,y++):(L=a,Ee(p)),L!==a){for(M=[],_.test(r.charAt(y))?(W=r.charAt(y),y++):(W=a,Ee(v));W!==a;)M.push(W),_.test(r.charAt(y))?(W=r.charAt(y),y++):(W=a,Ee(v));M!==a?(r.charCodeAt(y)===10?(W=D,y++):(W=a,Ee(U)),W!==a?(Ge=m,L=T(M),m=L):(y=m,m=a)):(y=m,m=a)}else y=m,m=a;return m}function Qe(){var m;return m=P0(),m===a&&(m=s0()),m}function l0(){var m;return m=o0(),m===a&&(m=u0(),m===a&&(m=c0(),m===a&&(m=f0()))),m}function o0(){var m,L,M,W,re,de,pe,ne,Je;for(m=y,L=[],M=Qe();M!==a;)L.push(M),M=Qe();if(L!==a)if(r.substr(y,7)===N?(M=N,y+=7):(M=a,Ee(g)),M!==a){for(W=[],re=Qe();re!==a;)W.push(re),re=Qe();if(W!==a)if(re=No(),re!==a){for(de=[],pe=Qe();pe!==a;)de.push(pe),pe=Qe();if(de!==a)if(pe=xi(),pe!==a){for(ne=[],Je=Qe();Je!==a;)ne.push(Je),Je=Qe();ne!==a?(r.charCodeAt(y)===46?(Je=f,y++):(Je=a,Ee(d)),Je!==a?(Ge=m,L=E(re,pe),m=L):(y=m,m=a)):(y=m,m=a)}else y=m,m=a;else y=m,m=a}else y=m,m=a;else y=m,m=a}else y=m,m=a;else y=m,m=a;return m}function u0(){var m,L,M,W,re,de,pe;for(m=y,L=[],M=Qe();M!==a;)L.push(M),M=Qe();if(L!==a)if(r.substr(y,5)===b?(M=b,y+=5):(M=a,Ee(I)),M!==a){for(W=[],re=Qe();re!==a;)W.push(re),re=Qe();if(W!==a)if(re=xi(),re!==a){for(de=[],pe=Qe();pe!==a;)de.push(pe),pe=Qe();de!==a?(r.charCodeAt(y)===46?(pe=f,y++):(pe=a,Ee(d)),pe!==a?(Ge=m,L=C(re),m=L):(y=m,m=a)):(y=m,m=a)}else y=m,m=a;else y=m,m=a}else y=m,m=a;else y=m,m=a;return m}function f0(){var m,L,M,W,re,de,pe,ne;for(m=y,L=[],M=Qe();M!==a;)L.push(M),M=Qe();if(L!==a)if(O.test(r.charAt(y))?(M=r.charAt(y),y++):(M=a,Ee(k)),M!==a)if(B.test(r.charAt(y))?(W=r.charAt(y),y++):(W=a,Ee(P)),W!==a)if(A.test(r.charAt(y))?(re=r.charAt(y),y++):(re=a,Ee(z)),re!==a)if(j.test(r.charAt(y))?(de=r.charAt(y),y++):(de=a,Ee(se)),de!==a){for(pe=[],ne=Qe();ne!==a;)pe.push(ne),ne=Qe();pe!==a?(ne=xi(),ne!==a?(Ge=m,L=C(ne),m=L):(y=m,m=a)):(y=m,m=a)}else y=m,m=a;else y=m,m=a;else y=m,m=a;else y=m,m=a;else y=m,m=a;return m}function c0(){var m,L,M,W,re,de,pe,ne,Je,Ft,Wn,Yn;for(m=y,L=[],M=Qe();M!==a;)L.push(M),M=Qe();if(L!==a)if(Z.test(r.charAt(y))?(M=r.charAt(y),y++):(M=a,Ee(G)),M!==a)if(H.test(r.charAt(y))?(W=r.charAt(y),y++):(W=a,Ee(Q)),W!==a)if(j.test(r.charAt(y))?(re=r.charAt(y),y++):(re=a,Ee(se)),re!==a)if(ee.test(r.charAt(y))?(de=r.charAt(y),y++):(de=a,Ee($)),de!==a)if(ae.test(r.charAt(y))?(pe=r.charAt(y),y++):(pe=a,Ee(ze)),pe!==a)if(Ve.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee(be)),ne!==a){for(Je=[],Ft=Qe();Ft!==a;)Je.push(Ft),Ft=Qe();if(Je!==a)if(Ft=No(),Ft!==a){for(Wn=[],Yn=Qe();Yn!==a;)Wn.push(Yn),Yn=Qe();Wn!==a?(Yn=xi(),Yn!==a?(Ge=m,L=E(Ft,Yn),m=L):(y=m,m=a)):(y=m,m=a)}else y=m,m=a;else y=m,m=a}else y=m,m=a;else y=m,m=a;else y=m,m=a;else y=m,m=a;else y=m,m=a;else y=m,m=a;else y=m,m=a;return m}function h0(){var m,L,M;return m=y,L=d0(),L!==a?(M=Ts(),M!==a?(Ge=m,L=Ne(L,M),m=L):(y=m,m=a)):(y=m,m=a),m===a&&(m=y,L=ko(),L!==a?(M=Ts(),M===a&&(M=null),M!==a?(Ge=m,L=_e(L,M),m=L):(y=m,m=a)):(y=m,m=a)),m}function Ts(){var m,L,M,W,re,de,pe,ne,Je,Ft;if(m=y,L=Ss(),L!==a)if(M=Ns(),M!==a){for(W=[],re=y,de=[],pe=Qe();pe!==a;)de.push(pe),pe=Qe();for(de!==a?(r.charCodeAt(y)===59?(pe=Se,y++):(pe=a,Ee(et)),pe!==a?(ne=y,Je=Ss(),Je!==a?(Ft=Ns(),Ft!==a?(Ge=ne,Je=vt(L,M,Je,Ft),ne=Je):(y=ne,ne=a)):(y=ne,ne=a),ne===a&&(ne=null),ne!==a?(Ge=re,de=rt(L,M,ne),re=de):(y=re,re=a)):(y=re,re=a)):(y=re,re=a);re!==a;){for(W.push(re),re=y,de=[],pe=Qe();pe!==a;)de.push(pe),pe=Qe();de!==a?(r.charCodeAt(y)===59?(pe=Se,y++):(pe=a,Ee(et)),pe!==a?(ne=y,Je=Ss(),Je!==a?(Ft=Ns(),Ft!==a?(Ge=ne,Je=vt(L,M,Je,Ft),ne=Je):(y=ne,ne=a)):(y=ne,ne=a),ne===a&&(ne=null),ne!==a?(Ge=re,de=rt(L,M,ne),re=de):(y=re,re=a)):(y=re,re=a)):(y=re,re=a)}W!==a?(Ge=m,L=Ae(L,M,W),m=L):(y=m,m=a)}else y=m,m=a;else y=m,m=a;return m}function Ns(){var m,L,M,W,re,de,pe;if(m=y,L=Mi(),L!==a){for(M=[],W=y,re=[],de=Qe();de!==a;)re.push(de),de=Qe();for(re!==a?(r.charCodeAt(y)===44?(de=qe,y++):(de=a,Ee(Nt)),de!==a?(pe=Mi(),pe!==a?(Ge=W,re=Ut(L,pe),W=re):(y=W,W=a)):(y=W,W=a)):(y=W,W=a);W!==a;){for(M.push(W),W=y,re=[],de=Qe();de!==a;)re.push(de),de=Qe();re!==a?(r.charCodeAt(y)===44?(de=qe,y++):(de=a,Ee(Nt)),de!==a?(pe=Mi(),pe!==a?(Ge=W,re=Ut(L,pe),W=re):(y=W,W=a)):(y=W,W=a)):(y=W,W=a)}M!==a?(Ge=m,L=Vt(L,M),m=L):(y=m,m=a)}else y=m,m=a;return m}function Ss(){var m,L,M;if(m=y,L=p0(),L!==a&&(Ge=m,L=h(L)),m=L,m===a){for(m=y,L=[],M=Qe();M!==a;)L.push(M),M=Qe();L!==a?(r.charCodeAt(y)===97?(M=St,y++):(M=a,Ee(Xt)),M!==a?(Ge=m,L=je(),m=L):(y=m,m=a)):(y=m,m=a)}return m}function d0(){var m,L;return m=y,L=Ao(),L!==a&&(Ge=m,L=He(L)),m=L,m===a&&(m=Co(),m===a&&(m=Ca())),m}function p0(){var m,L,M;for(m=y,L=[],M=Qe();M!==a;)L.push(M),M=Qe();return L!==a?(M=Ca(),M!==a?(Ge=m,L=h(M),m=L):(y=m,m=a)):(y=m,m=a),m}function Mi(){var m,L;return m=_0(),m===a&&(m=y,L=Ao(),L!==a&&(Ge=m,L=We(L)),m=L,m===a&&(m=y,L=Co(),L!==a&&(Ge=m,L=tt(L)),m=L,m===a&&(m=y,L=ko(),L!==a&&(Ge=m,L=h(L)),m=L,m===a&&(m=y,L=Ca(),L!==a&&(Ge=m,L=ft(L)),m=L)))),m}function _0(){var m;return m=m0(),m===a&&(m=v0(),m===a&&(m=g0())),m}function ko(){var m,L,M,W,re,de;for(m=y,L=[],M=Qe();M!==a;)L.push(M),M=Qe();if(L!==a)if(r.charCodeAt(y)===91?(M=zt,y++):(M=a,Ee(X)),M!==a)if(W=Ts(),W!==a){for(re=[],de=Qe();de!==a;)re.push(de),de=Qe();re!==a?(r.charCodeAt(y)===93?(de=S,y++):(de=a,Ee(F)),de!==a?(Ge=m,L=h(W),m=L):(y=m,m=a)):(y=m,m=a)}else y=m,m=a;else y=m,m=a;else y=m,m=a;return m}function Ao(){var m,L,M,W,re,de;for(m=y,L=[],M=Qe();M!==a;)L.push(M),M=Qe();if(L!==a)if(r.charCodeAt(y)===40?(M=K,y++):(M=a,Ee(fe)),M!==a){for(W=[],re=Mi();re!==a;)W.push(re),re=Mi();if(W!==a){for(re=[],de=Qe();de!==a;)re.push(de),de=Qe();re!==a?(r.charCodeAt(y)===41?(de=ye,y++):(de=a,Ee(ke)),de!==a?(Ge=m,L=Pe(W),m=L):(y=m,m=a)):(y=m,m=a)}else y=m,m=a}else y=m,m=a;else y=m,m=a;return m}function v0(){var m,L,M;for(m=y,L=[],M=Qe();M!==a;)L.push(M),M=Qe();return L!==a?(M=A0(),M===a&&(M=k0(),M===a&&(M=D0())),M!==a?(Ge=m,L=h(M),m=L):(y=m,m=a)):(y=m,m=a),m}function m0(){var m,L,M,W,re,de,pe;for(m=y,L=[],M=Qe();M!==a;)L.push(M),M=Qe();if(L!==a)if(M=Ps(),M!==a){for(W=[],re=Qe();re!==a;)W.push(re),re=Qe();W!==a?(re=E0(),re!==a?(Ge=m,L=Xe(M,re),m=L):(y=m,m=a)):(y=m,m=a)}else y=m,m=a;else y=m,m=a;if(m===a){for(m=y,L=[],M=Qe();M!==a;)L.push(M),M=Qe();if(L!==a)if(M=Ps(),M!==a){for(W=[],re=Qe();re!==a;)W.push(re),re=Qe();if(W!==a)if(r.substr(y,2)===Ze?(re=Ze,y+=2):(re=a,Ee(ct)),re!==a){for(de=[],pe=Qe();pe!==a;)de.push(pe),pe=Qe();de!==a?(pe=Ca(),pe!==a?(Ge=m,L=mt(M,pe),m=L):(y=m,m=a)):(y=m,m=a)}else y=m,m=a;else y=m,m=a}else y=m,m=a;else y=m,m=a;if(m===a){for(m=y,L=[],M=Qe();M!==a;)L.push(M),M=Qe();L!==a?(M=Ps(),M!==a?(Ge=m,L=h(M),m=L):(y=m,m=a)):(y=m,m=a)}}return m}function g0(){var m,L,M;for(m=y,L=[],M=Qe();M!==a;)L.push(M),M=Qe();if(L!==a?(r.substr(y,4)===dr?(M=dr,y+=4):(M=a,Ee(Rr)),M!==a?(Ge=m,L=lr(),m=L):(y=m,m=a)):(y=m,m=a),m===a){for(m=y,L=[],M=Qe();M!==a;)L.push(M),M=Qe();L!==a?(r.substr(y,5)===$n?(M=$n,y+=5):(M=a,Ee(bs)),M!==a?(Ge=m,L=An(),m=L):(y=m,m=a)):(y=m,m=a)}return m}function Ps(){var m,L,M;for(m=y,L=[],M=Qe();M!==a;)L.push(M),M=Qe();return L!==a?(M=N0(),M===a&&(M=S0(),M===a&&(M=T0(),M===a&&(M=C0()))),M!==a?(Ge=m,L=h(M),m=L):(y=m,m=a)):(y=m,m=a),m}function Ca(){var m,L,M;for(m=y,L=[],M=Qe();M!==a;)L.push(M),M=Qe();if(L!==a?(M=xi(),M!==a?(Ge=m,L=h(M),m=L):(y=m,m=a)):(y=m,m=a),m===a){for(m=y,L=[],M=Qe();M!==a;)L.push(M),M=Qe();L!==a?(M=b0(),M!==a?(Ge=m,L=h(M),m=L):(y=m,m=a)):(y=m,m=a)}return m}function b0(){var m,L;return m=y0(),m===a&&(m=y,L=To(),L!==a&&(Ge=m,L=ys(L)),m=L),m}function Co(){var m,L,M;for(m=y,L=[],M=Qe();M!==a;)L.push(M),M=Qe();if(L!==a?(M=w0(),M!==a?(Ge=m,L=h(M),m=L):(y=m,m=a)):(y=m,m=a),m===a){for(m=y,L=[],M=Qe();M!==a;)L.push(M),M=Qe();L!==a?(M=I0(),M!==a?(Ge=m,L=h(M),m=L):(y=m,m=a)):(y=m,m=a)}return m}function xi(){var m,L,M,W;if(m=y,r.charCodeAt(y)===60?(L=ba,y++):(L=a,Ee(ws)),L!==a){for(M=[],ci.test(r.charAt(y))?(W=r.charAt(y),y++):(W=a,Ee(Li)),W===a&&(W=Mt());W!==a;)M.push(W),ci.test(r.charAt(y))?(W=r.charAt(y),y++):(W=a,Ee(Li)),W===a&&(W=Mt());M!==a?(r.charCodeAt(y)===62?(W=Es,y++):(W=a,Ee(ya)),W!==a?(Ge=m,L=Ds(M),m=L):(y=m,m=a)):(y=m,m=a)}else y=m,m=a;return m}function To(){var m,L,M;return m=y,L=Po(),L===a&&(L=null),L!==a?(r.charCodeAt(y)===58?(M=Fr,y++):(M=a,Ee(he)),M!==a?(Ge=m,L=ie(L),m=L):(y=m,m=a)):(y=m,m=a),m}function No(){var m,L,M;return m=y,L=Po(),L===a&&(L=null),L!==a?(r.charCodeAt(y)===58?(M=Fr,y++):(M=a,Ee(he)),M!==a?(Ge=m,L=ve(L),m=L):(y=m,m=a)):(y=m,m=a),m}function y0(){var m,L,M;return m=y,L=To(),L!==a?(M=R0(),M!==a?(Ge=m,L=Ce(L,M),m=L):(y=m,m=a)):(y=m,m=a),m}function w0(){var m,L,M,W,re,de,pe,ne,Je,Ft;if(m=y,L=y,r.substr(y,2)===De?(M=De,y+=2):(M=a,Ee(it)),M!==a)if(W=Rs(),W===a&&(Ye.test(r.charAt(y))?(W=r.charAt(y),y++):(W=a,Ee(ot))),W!==a){for(re=[],de=or();de!==a;)re.push(de),de=or();if(re!==a){if(de=[],pe=y,ne=[],r.charCodeAt(y)===46?(Je=f,y++):(Je=a,Ee(d)),Je!==a)for(;Je!==a;)ne.push(Je),r.charCodeAt(y)===46?(Je=f,y++):(Je=a,Ee(d));else ne=a;if(ne!==a){if(Je=[],Ft=or(),Ft!==a)for(;Ft!==a;)Je.push(Ft),Ft=or();else Je=a;Je!==a?(ne=[ne,Je],pe=ne):(y=pe,pe=a)}else y=pe,pe=a;for(;pe!==a;){if(de.push(pe),pe=y,ne=[],r.charCodeAt(y)===46?(Je=f,y++):(Je=a,Ee(d)),Je!==a)for(;Je!==a;)ne.push(Je),r.charCodeAt(y)===46?(Je=f,y++):(Je=a,Ee(d));else ne=a;if(ne!==a){if(Je=[],Ft=or(),Ft!==a)for(;Ft!==a;)Je.push(Ft),Ft=or();else Je=a;Je!==a?(ne=[ne,Je],pe=ne):(y=pe,pe=a)}else y=pe,pe=a}de!==a?(M=[M,W,re,de],L=M):(y=L,L=a)}else y=L,L=a}else y=L,L=a;else y=L,L=a;return L!==a?m=r.substring(m,y):m=L,m}function E0(){var m,L,M,W,re,de,pe,ne;if(m=y,r.charCodeAt(y)===64?(L=jt,y++):(L=a,Ee(Yt)),L!==a){if(M=[],Dt.test(r.charAt(y))?(W=r.charAt(y),y++):(W=a,Ee(It)),W!==a)for(;W!==a;)M.push(W),Dt.test(r.charAt(y))?(W=r.charAt(y),y++):(W=a,Ee(It));else M=a;if(M!==a){if(W=[],re=y,r.charCodeAt(y)===45?(de=Ht,y++):(de=a,Ee(pt)),de!==a){if(pe=[],Rt.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee($t)),ne!==a)for(;ne!==a;)pe.push(ne),Rt.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee($t));else pe=a;pe!==a?(Ge=re,de=qt(M,pe),re=de):(y=re,re=a)}else y=re,re=a;for(;re!==a;)if(W.push(re),re=y,r.charCodeAt(y)===45?(de=Ht,y++):(de=a,Ee(pt)),de!==a){if(pe=[],Rt.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee($t)),ne!==a)for(;ne!==a;)pe.push(ne),Rt.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee($t));else pe=a;pe!==a?(Ge=re,de=qt(M,pe),re=de):(y=re,re=a)}else y=re,re=a;W!==a?(Ge=m,L=$r(M,W),m=L):(y=m,m=a)}else y=m,m=a}else y=m,m=a;return m}function D0(){var m,L,M,W,re,de;if(m=y,L=y,M=y,_r.test(r.charAt(y))?(W=r.charAt(y),y++):(W=a,Ee(vr)),W===a&&(W=null),W!==a){if(re=[],Ye.test(r.charAt(y))?(de=r.charAt(y),y++):(de=a,Ee(ot)),de!==a)for(;de!==a;)re.push(de),Ye.test(r.charAt(y))?(de=r.charAt(y),y++):(de=a,Ee(ot));else re=a;re!==a?(W=[W,re],M=W):(y=M,M=a)}else y=M,M=a;return M!==a?L=r.substring(L,y):L=M,L!==a&&(Ge=m,L=Cn(L)),m=L,m}function k0(){var m,L,M,W,re,de,pe,ne;if(m=y,L=y,M=y,_r.test(r.charAt(y))?(W=r.charAt(y),y++):(W=a,Ee(vr)),W===a&&(W=null),W!==a){for(re=[],Ye.test(r.charAt(y))?(de=r.charAt(y),y++):(de=a,Ee(ot));de!==a;)re.push(de),Ye.test(r.charAt(y))?(de=r.charAt(y),y++):(de=a,Ee(ot));if(re!==a)if(r.charCodeAt(y)===46?(de=f,y++):(de=a,Ee(d)),de!==a){if(pe=[],Ye.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee(ot)),ne!==a)for(;ne!==a;)pe.push(ne),Ye.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee(ot));else pe=a;pe!==a?(W=[W,re,de,pe],M=W):(y=M,M=a)}else y=M,M=a;else y=M,M=a}else y=M,M=a;return M!==a?L=r.substring(L,y):L=M,L!==a&&(Ge=m,L=hn(L)),m=L,m}function A0(){var m,L,M,W,re,de,pe,ne,Je;if(m=y,L=y,M=y,_r.test(r.charAt(y))?(W=r.charAt(y),y++):(W=a,Ee(vr)),W===a&&(W=null),W!==a){if(re=y,de=[],Ye.test(r.charAt(y))?(pe=r.charAt(y),y++):(pe=a,Ee(ot)),pe!==a)for(;pe!==a;)de.push(pe),Ye.test(r.charAt(y))?(pe=r.charAt(y),y++):(pe=a,Ee(ot));else de=a;if(de!==a)if(r.charCodeAt(y)===46?(pe=f,y++):(pe=a,Ee(d)),pe!==a){for(ne=[],Ye.test(r.charAt(y))?(Je=r.charAt(y),y++):(Je=a,Ee(ot));Je!==a;)ne.push(Je),Ye.test(r.charAt(y))?(Je=r.charAt(y),y++):(Je=a,Ee(ot));ne!==a?(Je=Is(),Je!==a?(de=[de,pe,ne,Je],re=de):(y=re,re=a)):(y=re,re=a)}else y=re,re=a;else y=re,re=a;if(re===a){if(re=y,r.charCodeAt(y)===46?(de=f,y++):(de=a,Ee(d)),de!==a){if(pe=[],Ye.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee(ot)),ne!==a)for(;ne!==a;)pe.push(ne),Ye.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee(ot));else pe=a;pe!==a?(ne=Is(),ne!==a?(de=[de,pe,ne],re=de):(y=re,re=a)):(y=re,re=a)}else y=re,re=a;if(re===a){if(re=y,de=[],Ye.test(r.charAt(y))?(pe=r.charAt(y),y++):(pe=a,Ee(ot)),pe!==a)for(;pe!==a;)de.push(pe),Ye.test(r.charAt(y))?(pe=r.charAt(y),y++):(pe=a,Ee(ot));else de=a;de!==a?(pe=Is(),pe!==a?(de=[de,pe],re=de):(y=re,re=a)):(y=re,re=a)}}re!==a?(W=[W,re],M=W):(y=M,M=a)}else y=M,M=a;return M!==a?L=r.substring(L,y):L=M,L!==a&&(Ge=m,L=yr(L)),m=L,m}function Is(){var m,L,M,W,re,de;if(m=y,L=y,Or.test(r.charAt(y))?(M=r.charAt(y),y++):(M=a,Ee(dn)),M!==a)if(_r.test(r.charAt(y))?(W=r.charAt(y),y++):(W=a,Ee(vr)),W===a&&(W=null),W!==a){if(re=[],Ye.test(r.charAt(y))?(de=r.charAt(y),y++):(de=a,Ee(ot)),de!==a)for(;de!==a;)re.push(de),Ye.test(r.charAt(y))?(de=r.charAt(y),y++):(de=a,Ee(ot));else re=a;re!==a?(M=[M,W,re],L=M):(y=L,L=a)}else y=L,L=a;else y=L,L=a;return L!==a?m=r.substring(m,y):m=L,m}function C0(){var m,L,M,W;if(m=y,r.charCodeAt(y)===34?(L=wr,y++):(L=a,Ee(Xr)),L!==a){for(M=[],Ui.test(r.charAt(y))?(W=r.charAt(y),y++):(W=a,Ee(ji)),W===a&&(W=Gt(),W===a&&(W=Mt()));W!==a;)M.push(W),Ui.test(r.charAt(y))?(W=r.charAt(y),y++):(W=a,Ee(ji)),W===a&&(W=Gt(),W===a&&(W=Mt()));M!==a?(r.charCodeAt(y)===34?(W=wr,y++):(W=a,Ee(Xr)),W!==a?(Ge=m,L=T(M),m=L):(y=m,m=a)):(y=m,m=a)}else y=m,m=a;return m}function T0(){var m,L,M,W;if(m=y,r.charCodeAt(y)===39?(L=pn,y++):(L=a,Ee(_n)),L!==a){for(M=[],Xn.test(r.charAt(y))?(W=r.charAt(y),y++):(W=a,Ee(qi)),W===a&&(W=Gt(),W===a&&(W=Mt()));W!==a;)M.push(W),Xn.test(r.charAt(y))?(W=r.charAt(y),y++):(W=a,Ee(qi)),W===a&&(W=Gt(),W===a&&(W=Mt()));M!==a?(r.charCodeAt(y)===39?(W=pn,y++):(W=a,Ee(_n)),W!==a?(Ge=m,L=T(M),m=L):(y=m,m=a)):(y=m,m=a)}else y=m,m=a;return m}function N0(){var m,L,M,W,re,de,pe,ne;if(m=y,r.substr(y,3)===Gn?(L=Gn,y+=3):(L=a,Ee(Tn)),L!==a){for(M=[],Gr.test(r.charAt(y))?(W=r.charAt(y),y++):(W=a,Ee(Qr)),W===a&&(W=Gt(),W===a&&(W=Mt()));W!==a;)M.push(W),Gr.test(r.charAt(y))?(W=r.charAt(y),y++):(W=a,Ee(Qr)),W===a&&(W=Gt(),W===a&&(W=Mt()));if(M!==a){if(W=[],re=y,r.substr(y,2)===wa?(de=wa,y+=2):(de=a,Ee(to)),de!==a){if(pe=[],Gr.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee(Qr)),ne===a&&(ne=Gt(),ne===a&&(ne=Mt())),ne!==a)for(;ne!==a;)pe.push(ne),Gr.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee(Qr)),ne===a&&(ne=Gt(),ne===a&&(ne=Mt()));else pe=a;pe!==a?(Ge=re,de=ro(M,pe),re=de):(y=re,re=a)}else y=re,re=a;if(re===a)if(re=y,r.charCodeAt(y)===39?(de=pn,y++):(de=a,Ee(_n)),de!==a){if(pe=[],Gr.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee(Qr)),ne===a&&(ne=Gt(),ne===a&&(ne=Mt())),ne!==a)for(;ne!==a;)pe.push(ne),Gr.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee(Qr)),ne===a&&(ne=Gt(),ne===a&&(ne=Mt()));else pe=a;pe!==a?(Ge=re,de=no(M,pe),re=de):(y=re,re=a)}else y=re,re=a;for(;re!==a;){if(W.push(re),re=y,r.substr(y,2)===wa?(de=wa,y+=2):(de=a,Ee(to)),de!==a){if(pe=[],Gr.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee(Qr)),ne===a&&(ne=Gt(),ne===a&&(ne=Mt())),ne!==a)for(;ne!==a;)pe.push(ne),Gr.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee(Qr)),ne===a&&(ne=Gt(),ne===a&&(ne=Mt()));else pe=a;pe!==a?(Ge=re,de=ro(M,pe),re=de):(y=re,re=a)}else y=re,re=a;if(re===a)if(re=y,r.charCodeAt(y)===39?(de=pn,y++):(de=a,Ee(_n)),de!==a){if(pe=[],Gr.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee(Qr)),ne===a&&(ne=Gt(),ne===a&&(ne=Mt())),ne!==a)for(;ne!==a;)pe.push(ne),Gr.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee(Qr)),ne===a&&(ne=Gt(),ne===a&&(ne=Mt()));else pe=a;pe!==a?(Ge=re,de=no(M,pe),re=de):(y=re,re=a)}else y=re,re=a}W!==a?(r.substr(y,3)===Gn?(re=Gn,y+=3):(re=a,Ee(Tn)),re!==a?(Ge=m,L=io(M,W),m=L):(y=m,m=a)):(y=m,m=a)}else y=m,m=a}else y=m,m=a;return m}function S0(){var m,L,M,W,re,de,pe,ne;if(m=y,r.substr(y,3)===Ea?(L=Ea,y+=3):(L=a,Ee(ao)),L!==a){for(M=[],Wr.test(r.charAt(y))?(W=r.charAt(y),y++):(W=a,Ee(Yr)),W===a&&(W=Gt(),W===a&&(W=Mt()));W!==a;)M.push(W),Wr.test(r.charAt(y))?(W=r.charAt(y),y++):(W=a,Ee(Yr)),W===a&&(W=Gt(),W===a&&(W=Mt()));if(M!==a){if(W=[],re=y,r.substr(y,2)===Da?(de=Da,y+=2):(de=a,Ee(so)),de!==a){if(pe=[],Wr.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee(Yr)),ne===a&&(ne=Gt(),ne===a&&(ne=Mt())),ne!==a)for(;ne!==a;)pe.push(ne),Wr.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee(Yr)),ne===a&&(ne=Gt(),ne===a&&(ne=Mt()));else pe=a;pe!==a?(Ge=re,de=lo(M,pe),re=de):(y=re,re=a)}else y=re,re=a;if(re===a)if(re=y,r.charCodeAt(y)===34?(de=wr,y++):(de=a,Ee(Xr)),de!==a){if(pe=[],Wr.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee(Yr)),ne===a&&(ne=Gt(),ne===a&&(ne=Mt())),ne!==a)for(;ne!==a;)pe.push(ne),Wr.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee(Yr)),ne===a&&(ne=Gt(),ne===a&&(ne=Mt()));else pe=a;pe!==a?(Ge=re,de=oo(M,pe),re=de):(y=re,re=a)}else y=re,re=a;for(;re!==a;){if(W.push(re),re=y,r.substr(y,2)===Da?(de=Da,y+=2):(de=a,Ee(so)),de!==a){if(pe=[],Wr.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee(Yr)),ne===a&&(ne=Gt(),ne===a&&(ne=Mt())),ne!==a)for(;ne!==a;)pe.push(ne),Wr.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee(Yr)),ne===a&&(ne=Gt(),ne===a&&(ne=Mt()));else pe=a;pe!==a?(Ge=re,de=lo(M,pe),re=de):(y=re,re=a)}else y=re,re=a;if(re===a)if(re=y,r.charCodeAt(y)===34?(de=wr,y++):(de=a,Ee(Xr)),de!==a){if(pe=[],Wr.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee(Yr)),ne===a&&(ne=Gt(),ne===a&&(ne=Mt())),ne!==a)for(;ne!==a;)pe.push(ne),Wr.test(r.charAt(y))?(ne=r.charAt(y),y++):(ne=a,Ee(Yr)),ne===a&&(ne=Gt(),ne===a&&(ne=Mt()));else pe=a;pe!==a?(Ge=re,de=oo(M,pe),re=de):(y=re,re=a)}else y=re,re=a}W!==a?(r.substr(y,3)===Ea?(re=Ea,y+=3):(re=a,Ee(ao)),re!==a?(Ge=m,L=io(M,W),m=L):(y=m,m=a)):(y=m,m=a)}else y=m,m=a}else y=m,m=a;return m}function Mt(){var m,L,M,W,re,de,pe,ne,Je,Ft,Wn;return m=y,r.substr(y,2)===uo?(L=uo,y+=2):(L=a,Ee(f_)),L!==a?(M=y,W=Er(),W!==a?(re=Er(),re!==a?(de=Er(),de!==a?(pe=Er(),pe!==a?(ne=Er(),ne!==a?(Je=Er(),Je!==a?(Ft=Er(),Ft!==a?(Wn=Er(),Wn!==a?(W=[W,re,de,pe,ne,Je,Ft,Wn],M=W):(y=M,M=a)):(y=M,M=a)):(y=M,M=a)):(y=M,M=a)):(y=M,M=a)):(y=M,M=a)):(y=M,M=a)):(y=M,M=a),M!==a?(Ge=m,L=c_(M),m=L):(y=m,m=a)):(y=m,m=a),m===a&&(m=y,r.substr(y,2)===fo?(L=fo,y+=2):(L=a,Ee(h_)),L!==a?(M=y,W=Er(),W!==a?(re=Er(),re!==a?(de=Er(),de!==a?(pe=Er(),pe!==a?(W=[W,re,de,pe],M=W):(y=M,M=a)):(y=M,M=a)):(y=M,M=a)):(y=M,M=a),M!==a?(Ge=m,L=d_(M),m=L):(y=m,m=a)):(y=m,m=a)),m}function Gt(){var m,L;return m=y,r.substr(y,2)===co?(L=co,y+=2):(L=a,Ee(p_)),L!==a&&(Ge=m,L=__()),m=L,m===a&&(m=y,r.substr(y,2)===ho?(L=ho,y+=2):(L=a,Ee(v_)),L!==a&&(Ge=m,L=m_()),m=L,m===a&&(m=y,r.substr(y,2)===po?(L=po,y+=2):(L=a,Ee(g_)),L!==a&&(Ge=m,L=b_()),m=L,m===a&&(m=y,r.substr(y,2)===_o?(L=_o,y+=2):(L=a,Ee(y_)),L!==a&&(Ge=m,L=w_()),m=L,m===a&&(m=y,r.substr(y,2)===vo?(L=vo,y+=2):(L=a,Ee(E_)),L!==a&&(Ge=m,L=D_()),m=L,m===a&&(m=y,r.substr(y,2)===mo?(L=mo,y+=2):(L=a,Ee(k_)),L!==a&&(Ge=m,L=A_()),m=L,m===a&&(m=y,r.substr(y,2)===go?(L=go,y+=2):(L=a,Ee(C_)),L!==a&&(Ge=m,L=T_()),m=L,m===a&&(m=y,r.substr(y,2)===bo?(L=bo,y+=2):(L=a,Ee(N_)),L!==a&&(Ge=m,L=S_()),m=L))))))),m}function P0(){var m;return P_.test(r.charAt(y))?(m=r.charAt(y),y++):(m=a,Ee(I_)),m}function I0(){var m,L,M,W;if(m=y,r.charCodeAt(y)===91?(L=zt,y++):(L=a,Ee(X)),L!==a){for(M=[],W=Qe();W!==a;)M.push(W),W=Qe();M!==a?(r.charCodeAt(y)===93?(W=S,y++):(W=a,Ee(F)),W!==a?(Ge=m,L=R_(),m=L):(y=m,m=a)):(y=m,m=a)}else y=m,m=a;return m}function So(){var m,L,M;return m=y,F_.test(r.charAt(y))?(L=r.charAt(y),y++):(L=a,Ee(O_)),L!==a?(B_.test(r.charAt(y))?(M=r.charAt(y),y++):(M=a,Ee(L_)),M!==a?(Ge=m,L=U_(L,M),m=L):(y=m,m=a)):(y=m,m=a),m===a&&(j_.test(r.charAt(y))?(m=r.charAt(y),y++):(m=a,Ee(q_))),m}function Rs(){var m;return m=So(),m===a&&(r.charCodeAt(y)===95?(m=M_,y++):(m=a,Ee(x_))),m}function or(){var m;return m=Rs(),m===a&&(r.charCodeAt(y)===45?(m=Ht,y++):(m=a,Ee(pt)),m===a&&(Ye.test(r.charAt(y))?(m=r.charAt(y),y++):(m=a,Ee(ot)),m===a&&(r.charCodeAt(y)===183?(m=V_,y++):(m=a,Ee(z_)),m===a&&(H_.test(r.charAt(y))?(m=r.charAt(y),y++):(m=a,Ee($_)),m===a&&(X_.test(r.charAt(y))?(m=r.charAt(y),y++):(m=a,Ee(G_))))))),m}function Po(){var m,L,M,W,re,de,pe,ne,Je;if(m=y,L=y,M=So(),M!==a){for(W=[],re=or();re!==a;)W.push(re),re=or();if(W!==a){if(re=[],de=y,pe=[],r.charCodeAt(y)===46?(ne=f,y++):(ne=a,Ee(d)),ne!==a)for(;ne!==a;)pe.push(ne),r.charCodeAt(y)===46?(ne=f,y++):(ne=a,Ee(d));else pe=a;if(pe!==a){if(ne=[],Je=or(),Je!==a)for(;Je!==a;)ne.push(Je),Je=or();else ne=a;ne!==a?(pe=[pe,ne],de=pe):(y=de,de=a)}else y=de,de=a;for(;de!==a;){if(re.push(de),de=y,pe=[],r.charCodeAt(y)===46?(ne=f,y++):(ne=a,Ee(d)),ne!==a)for(;ne!==a;)pe.push(ne),r.charCodeAt(y)===46?(ne=f,y++):(ne=a,Ee(d));else pe=a;if(pe!==a){if(ne=[],Je=or(),Je!==a)for(;Je!==a;)ne.push(Je),Je=or();else ne=a;ne!==a?(pe=[pe,ne],de=pe):(y=de,de=a)}else y=de,de=a}re!==a?(M=[M,W,re],L=M):(y=L,L=a)}else y=L,L=a}else y=L,L=a;return L!==a?m=r.substring(m,y):m=L,m}function R0(){var m,L,M,W,re,de,pe,ne;if(m=y,L=Rs(),L===a&&(r.charCodeAt(y)===58?(L=Fr,y++):(L=a,Ee(he)),L===a&&(Ye.test(r.charAt(y))?(L=r.charAt(y),y++):(L=a,Ee(ot)),L===a&&(L=Qn()))),L!==a){for(M=[],W=or(),W===a&&(r.charCodeAt(y)===58?(W=Fr,y++):(W=a,Ee(he)),W===a&&(W=Qn()));W!==a;)M.push(W),W=or(),W===a&&(r.charCodeAt(y)===58?(W=Fr,y++):(W=a,Ee(he)),W===a&&(W=Qn()));if(M!==a){if(W=[],re=y,de=[],r.charCodeAt(y)===46?(pe=f,y++):(pe=a,Ee(d)),pe!==a)for(;pe!==a;)de.push(pe),r.charCodeAt(y)===46?(pe=f,y++):(pe=a,Ee(d));else de=a;if(de!==a){if(pe=[],ne=or(),ne===a&&(r.charCodeAt(y)===58?(ne=Fr,y++):(ne=a,Ee(he)),ne===a&&(ne=Qn())),ne!==a)for(;ne!==a;)pe.push(ne),ne=or(),ne===a&&(r.charCodeAt(y)===58?(ne=Fr,y++):(ne=a,Ee(he)),ne===a&&(ne=Qn()));else pe=a;pe!==a?(Ge=re,de=yo(L,M,de,pe),re=de):(y=re,re=a)}else y=re,re=a;for(;re!==a;){if(W.push(re),re=y,de=[],r.charCodeAt(y)===46?(pe=f,y++):(pe=a,Ee(d)),pe!==a)for(;pe!==a;)de.push(pe),r.charCodeAt(y)===46?(pe=f,y++):(pe=a,Ee(d));else de=a;if(de!==a){if(pe=[],ne=or(),ne===a&&(r.charCodeAt(y)===58?(ne=Fr,y++):(ne=a,Ee(he)),ne===a&&(ne=Qn())),ne!==a)for(;ne!==a;)pe.push(ne),ne=or(),ne===a&&(r.charCodeAt(y)===58?(ne=Fr,y++):(ne=a,Ee(he)),ne===a&&(ne=Qn()));else pe=a;pe!==a?(Ge=re,de=yo(L,M,de,pe),re=de):(y=re,re=a)}else y=re,re=a}W!==a?(Ge=m,L=Q_(L,M,W),m=L):(y=m,m=a)}else y=m,m=a}else y=m,m=a;return m}function Qn(){var m;return m=F0(),m===a&&(m=O0()),m}function F0(){var m,L,M,W,re;return m=y,L=y,r.charCodeAt(y)===37?(M=W_,y++):(M=a,Ee(Y_)),M!==a?(W=Er(),W!==a?(re=Er(),re!==a?(M=[M,W,re],L=M):(y=L,L=a)):(y=L,L=a)):(y=L,L=a),L!==a?m=r.substring(m,y):m=L,m}function Er(){var m;return J_.test(r.charAt(y))?(m=r.charAt(y),y++):(m=a,Ee(K_)),m}function O0(){var m,L,M;return m=y,r.charCodeAt(y)===92?(L=Z_,y++):(L=a,Ee(e0)),L!==a?(t0.test(r.charAt(y))?(M=r.charAt(y),y++):(M=a,Ee(r0)),M!==a?(Ge=m,L=h(M),m=L):(y=m,m=a)):(y=m,m=a),m}var B0=new Function("try {return this===window;}catch(e){ return false;}"),Io=B0()?window.URL:lv.URL,Ro=function(m){return m.match(/^[a-z](.*?):(.+?)/g)};function L0(m,L){var M={};return M[m]=L,M}var Pt={base:[],data:{},addBase:function(m){if(Pt.base.length===0){Pt.base.push(m);return}const L=Pt.base[Pt.base.length-1];L!==m&&Pt.base.push(new Io(m,L).toString())},addPrefix:function(m,L){const M=Pt.data[m];M===void 0?Pt.data[m]=[{uri:L,count:0}]:M[M.length-1].uri!==L&&M.push({uri:L,count:0})},hasPrefix:function(m){return this.data[m]!==void 0},resolve:function(m,L){const M=Object.keys(Pt.data).find(re=>m.indexOf(re+":")===0);if(M!==void 0){const re=Pt.data[M];if(re.length===1&&L!==!0&&Ro(re[0].uri))return m;const de=re[re.length-1].uri;return m.replace(M+":",de)}else{var W=Pt.base.length===0?s.baseIRI:Pt.base[Pt.base.length-1];return!W||m.match(/^(http:|https:|urn:|file:)/)?m:m.indexOf("//")===0&&W?W.split("//")[0]+m:new Io(m,W).toString()}},increment:function(m){const L=Pt.data[m];L!==void 0&&L[L.length-1].count++},decrement:function(m){const L=Pt.data[m];L!==void 0&&L[L.length-1].count--},toJSON:function(){const m={};return Pt.base.length>0&&(m["@context"]===void 0&&(m["@context"]={}),m["@context"]["@base"]=Pt.base[0]),Object.keys(Pt.data).forEach(L=>{const M=Pt.data[L][0];M.uri==="http://www.w3.org/2001/XMLSchema#"&&M.count<1||Ro(M.uri)&&(m["@context"]===void 0&&(m["@context"]={}),m["@context"][L]=M.uri)}),m}};function Fs(m,L){if(m["@list"]===void 0||!L&&!m["@list"].find(re=>re["@list"]!==void 0))return m;if(m["@list"].length===0)return{"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};var M={},W=null;return m["@list"].forEach(re=>{W===null?W=M:(W["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={},W=W["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]),W["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"]=Fs(re,!0),W["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}),M}if(Aa=o(),Aa!==a&&y===r.length)return Aa;throw Aa!==a&&y<r.length&&Ee(n0()),a0(ks,Jr<r.length?r.charAt(Jr):null,Jr<r.length?Cs(Jr,Jr+1):Cs(Jr,Jr))}return{SyntaxError:t,parse:n}})})(Sp);var n2=Sp.exports;function i2(i){return new a2(i)}var a2=function(){function i(e){Wt(this,i),Ue(this,"_notQNameChars",`	\r
 !"#$%&'()*.,+/;<=>?@[\\]^\`{|}~`),Ue(this,"_notNameChars",this._notQNameChars+":"),Ue(this,"validPrefix",new RegExp(/^[a-zA-Z][a-zA-Z0-9]*$/)),Ue(this,"forbidden1",new RegExp(/[\\"\b\f\r\v\t\n\u0080-\uffff]/gm)),Ue(this,"forbidden3",new RegExp(/[\\"\b\f\r\v\u0080-\uffff]/gm)),this.flags="",this.base=null,this.prefixes=[],this.namespaces=[];var t=Object.keys(xu());for(var n in t){var r=xu()[t[n]](""),s=t[n];this.prefixes[r]=s,this.namespaces[s]=r}this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.suggestPrefix("xml","reserved:reservedForFutureUse"),this.namespacesUsed=[],this.keywords=["a"],this.prefixchars="abcdefghijklmnopqustuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",this.incoming=null,this.formulas=[],this.store=e,this.rdfFactory=e.rdfFactory||xr,this.xsd=Np(this.rdfFactory)}return Qt(i,[{key:"setBase",value:function(t){return this.base=t,this}},{key:"setFlags",value:function(t){return this.flags=t||"",this}},{key:"toStr",value:function(t){var n=t.toNT();return t.termType==="Graph"&&(this.formulas[n]=t),n}},{key:"fromStr",value:function(t){if(t[0]==="{"){var n=this.formulas[t];return n||console.log("No formula object for "+t),n}return this.store.fromNT(t)}},{key:"setNamespaces",value:function(t){for(var n in t)this.setPrefix(n,t[n]);return this}},{key:"setPrefix",value:function(t,n){if(t.slice(0,7)!=="default"&&t.slice(0,2)!=="ns"&&!(!t||!n)){for(var r in this.prefixes)this.prefixes[r]==t&&delete this.prefixes[r];this.prefixes[n]=t,this.namespaces[t]=n}}},{key:"suggestPrefix",value:function(t,n){t.slice(0,7)!=="default"&&t.slice(0,2)!=="ns"&&(!t||!n||t in this.namespaces||n in this.prefixes||(this.prefixes[n]=t,this.namespaces[t]=n))}},{key:"suggestNamespaces",value:function(t){for(var n in t)this.suggestPrefix(n,t[n]);return this}},{key:"checkIntegrity",value:function(){var t,n;for(t in this.namespaces)if(this.prefixes[this.namespaces[t]]!==t)throw new Error("Serializer integity error 1: "+t+", "+this.namespaces[t]+", "+this.prefixes[this.namespaces[t]]+"!");for(n in this.prefixes)if(this.namespaces[this.prefixes[n]]!==n)throw new Error("Serializer integity error 2: "+n+", "+this.prefixs[n]+", "+this.namespaces[this.prefixes[n]]+"!")}},{key:"makeUpPrefix",value:function(t){var n=t;function r(u){return!this.validPrefix.test(u)||u==="ns"||u in this.namespaces?!1:(this.prefixes[t]=u,this.namespaces[u]=t,u)}var s=r.bind(this);"#/".indexOf(n[n.length-1])>=0&&(n=n.slice(0,-1));var a=n.lastIndexOf("/");a>=0&&(n=n.slice(a+1));for(var l=0;l<n.length&&this.prefixchars.indexOf(n[l]);)l++;if(n=n.slice(0,l),n.length<6&&s(n))return n;if(s(n.slice(0,3)))return n.slice(0,3);if(s(n.slice(0,2)))return n.slice(0,2);if(s(n.slice(0,4)))return n.slice(0,4);if(s(n.slice(0,1)))return n.slice(0,1);if(s(n.slice(0,5)))return n.slice(0,5);this.validPrefix.test(n)||(n="n");for(var o=0;;o++)if(s(n.slice(0,3)+o))return n.slice(0,3)+o}},{key:"rootSubjects",value:function(t){for(var n={},r={},s={},a=0;a<t.length;a++){var l=t[a],o=function(D){n.hasOwnProperty(D)||(n[D]=[]),n[D].push(l.subject)},u=[l.subject,l.predicate,l.object];u.map(function(v){v.termType==="BlankNode"?s[v.toNT()]=!0:v.termType==="Collection"&&v.elements.forEach(function(D){o(D)})}),o(t[a].object);var f=r[this.toStr(l.subject)];f||(f=[]),f.push(l),r[this.toStr(l.subject)]=f}var d=[];for(var h in r)if(r.hasOwnProperty(h)){var c=this.fromStr(h);if(c.termType!=="BlankNode"||!n[c]||n[c].length!==1){d.push(c);continue}}this.incoming=n;for(var p={},_=0;_<d.length;_++)p[d[_].toNT()]=!0;return{roots:d,subjects:r,rootsHash:p,incoming:n}}},{key:"toN3",value:function(t){return this.statementsToN3(t.statements)}},{key:"explicitURI",value:function(t){return this.flags.indexOf("r")<0&&this.base?t=Us(this.base,t):this.flags.indexOf("u")>=0?t=l2(t):t=s2(decodeURI(t)),"<"+t+">"}},{key:"statementsToNTriples",value:function(t){var n=t.slice();n.sort();for(var r="",s="http://www.w3.org/1999/02/22-rdf-syntax-ns#",a=this,l=this.store,o=this.rdfFactory,u=function c(p){if(p.termType!=="Collection")return a.atomicTermToN3(p);for(var _=p.elements,v=l.sym(s+"nill"),D=_.length-1;D>=0;D--){var U=o.blankNode();r+=c(U)+" "+c(l.sym(s+"first"))+" "+c(_[D])+`.
`,r+=c(U)+" "+c(l.sym(s+"rest"))+" "+c(v)+`.
`,v=U}return a.atomicTermToN3(v)},f=0;f<n.length;f++){var d=n[f],h="";h+=u(d.subject)+" ",h+=u(d.predicate)+" ",h+=u(d.object)+" ",this.flags.indexOf("q")>=0&&(h+=u(d.why)+" "),h+=`.
`,r+=h}return r}},{key:"statementsToN3",value:function(t){var n=4,r=80,s=this.store,a={"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":"aaa:00"},l=function(C,O){return Zg(C,O,s,a)};t.sort(l),this.base&&!this.defaultNamespace&&(this.defaultNamespace=this.base+"#");var o={};this.flags.indexOf("s")<0&&(o["http://www.w3.org/2002/07/owl#sameAs"]="="),this.flags.indexOf("t")<0&&(o["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"]="a"),this.flags.indexOf("i")<0&&(o["http://www.w3.org/2000/10/swap/log#implies"]="=>");var u=function(C){for(var O="",k=0;k<C;k++)O+=" ";return O},f=function I(C){for(var O="",k=0;k<C.length;k++){var B=C[k],P=typeof B=="string"?B:I(B);if(k!==0){var A=O.slice(-1)||" ";P===","||P===";"||P==="."&&!"0123456789.:".includes(A)||(O+=" ")}O+=P}return O},d=function I(C,O){var k="",B=1e5;O===void 0&&(O=-1);for(var P=0;P<C.length;P++){var A=C[P];if(typeof A!="string"){var z=I(A,O+1);if(z.length<10*(r-n*O)&&z.indexOf('"""')<0){var j=f(A);j.length<r-n*O&&(A=j,z="")}z&&(B=1e4),k+=z}if(typeof A=="string"){if(A.length===1&&k.slice(-1)===`
`&&",.;".indexOf(A)>=0){k=k.slice(0,-1),A=="."&&"0123456789.:".includes(k.charAt(k.length-1))&&(k+=" ",B+=1),k+=A+`
`,B+=1;continue}if(B<n*O+4||B+A.length+1<r&&";.".indexOf(k[k.length-2])<0)k=k.slice(0,-1)+" "+A+`
`,B+=A.length+1;else{var se=u(n*O)+A;k+=se+`
`,B=se.length,O<0&&(k+=`
`,B=1e5)}}}return k};function h(I){for(var C=this.rootSubjects(I),O=C.roots,k=[],B=0;B<O.length;B++){var P=O[B];k.push(p(P,C))}return k}var c=h.bind(this);function p(I,C){return I.termType==="BlankNode"&&!C.incoming[I]?U(I,C,!0).concat(["."]):[N(I,C)].concat([v(I,C)]).concat(["."])}function _(I,C){var O=[],k=null,B=C.subjects[this.toStr(I)]||[];if(typeof B>"u")throw new Error("Cant find statements for "+I);for(var P=[],A=0;A<B.length;A++){var z=B[A];z.predicate.uri===k?P.push(","):(k&&(O=O.concat([P]).concat([";"]),P=[]),O.push(o[z.predicate.uri]?o[z.predicate.uri]:N(z.predicate,C))),k=z.predicate.uri,P.push(U(z.object,C))}return O=O.concat([P]),O}var v=_.bind(this);function D(I,C,O){return I.termType==="BlankNode"&&(O||C.rootsHash[I.toNT()]===void 0)?C.subjects[this.toStr(I)]?["[",v(I,C),"]"]:"[]":N(I,C)}var U=D.bind(this);function T(I,C){var O,k;switch(I.termType){case"Graph":return k=["{"],k=k.concat(c(I.statements)),k.concat(["}"]);case"Collection":for(k=["("],O=0;O<I.elements.length;O++)k.push([U(I.elements[O],C)]);return k.push(")"),k;default:return this.atomicTermToN3(I)}}i.prototype.termToN3=N;var N=T.bind(this);function g(){var I="";this.flags.indexOf("d")<0&&this.defaultNamespace&&(I+="@prefix : "+this.explicitURI(this.defaultNamespace)+`.
`);for(var C in this.prefixes)this.prefixes.hasOwnProperty(C)&&this.namespacesUsed[C]&&(I+="@prefix "+this.prefixes[C]+": "+this.explicitURI(C)+`.
`);return I+`
`}var E=g.bind(this),b=c(t);return E()+d(b)}},{key:"atomicTermToN3",value:function(t,n){switch(t.termType){case"BlankNode":case"Variable":return t.toNT();case"Literal":var r=t.value;if(typeof r!="string")throw new TypeError("Value of RDF literal node must be a string");if(t.datatype&&this.flags.indexOf("x")<0)switch(t.datatype.uri){case"http://www.w3.org/2001/XMLSchema#integer":return r;case"http://www.w3.org/2001/XMLSchema#decimal":return r.indexOf(".")<0&&(r+=".0"),r;case"http://www.w3.org/2001/XMLSchema#double":{var s=r.toLowerCase().indexOf("e")>0;return r.indexOf(".")<0&&!s&&(r+=".0"),s||(r+="e0"),r}case"http://www.w3.org/2001/XMLSchema#boolean":return t.value==="1"?"true":"false"}var a=this.stringToN3(t.value);return t.language?a+="@"+t.language:t.datatype.equals(this.xsd.string)||(a+="^^"+this.atomicTermToN3(t.datatype,n)),a;case"NamedNode":return this.symbolToN3(t);case"DefaultGraph":return"";default:throw new Error("Internal: atomicTermToN3 cannot handle "+t+" of termType: "+t.termType)}}},{key:"stringToN3",value:function(t,n){n||(n="e");var r="",s,a,l,o,u;for(t.length>20&&t.slice(-1)!=='"'&&n.indexOf("n")<0&&(t.indexOf(`
`)>0||t.indexOf('"')>0)?(o='"""',u=this.forbidden3):(o='"',u=this.forbidden1),s=0;s<t.length;){u.lastIndex=0;var f=u.exec(t.slice(s));if(f==null)break;a=s+u.lastIndex-1,r+=t.slice(s,a);var d=t[a];d==='"'&&o==='"""'&&t.slice(a,a+3)!=='"""'?r+=d:(l=`\b\f\r	\v
\\"`.indexOf(d),l>=0?r+="\\"+'bfrtvn\\"'[l]:n.indexOf("e")>=0?r+="\\u"+("000"+d.charCodeAt(0).toString(16).toLowerCase()).slice(-4):r+=d),s=a+1}return o+r+t.slice(s)+o}},{key:"symbolToN3",value:function(t){var n=t.uri,r=n.indexOf("#");if(r<0&&this.flags.indexOf("/")<0&&(r=n.lastIndexOf("/")),r>=0&&this.flags.indexOf("p")<0&&(n.indexOf("http")===0||n.indexOf("ws")===0||n.indexOf("file")===0)){for(var s=!0,a=r+1;a<n.length;a++)if(this._notNameChars.indexOf(n[a])>=0){s=!1;break}if(s){var l=n.slice(r+1),o=n.slice(0,r+1);if(this.defaultNamespace&&this.defaultNamespace===o&&this.flags.indexOf("d")<0)return this.flags.indexOf("k")>=0&&this.keyords.indexOf(l)<0?l:":"+l;var u=this.prefixes[o];if(u||(u=this.makeUpPrefix(o)),u)return this.namespacesUsed[o]=!0,u+":"+l}}return this.explicitURI(n)}},{key:"writeStore",value:function(t){var n=this.store,r=n.fetcher,s=r&&r.appNode,a=this.store.index[3];for(var l in a){var o=n.fromNT(l);s&&o.equals(s)||t(`
`+this.atomicTermToN3(o)+" "+this.atomicTermToN3(n.sym("http://www.w3.org/2000/10/swap/log#semantics"))+" { "+this.statementsToN3(n.statementsMatching(void 0,void 0,void 0,o))+` }.
`)}n.statementsMatching(void 0,n.sym("http://www.w3.org/2007/ont/link#requestedURI")).map(function(d){t(`
<`+d.object.value+`> log:metadata {
`);var h=n.statementsMatching(void 0,void 0,void 0,d.subject);t(this.statementsToN3(this.statementsToN3(h))),t(`}.
`)});var u=[];s&&u.push(s);var f=[];u.map(function(d){f=f.concat(n.statementsMatching(void 0,void 0,void 0,d))}),t(this.statementsToN3(f))}},{key:"statementsToXML",value:function(t){var n=4,r=80,s=[];s["http://www.w3.org/1999/02/22-rdf-syntax-ns#"]=!0;var a="http://www.w3.org/1999/02/22-rdf-syntax-ns#_",l=function(B){for(var P="",A=0;A<B;A++)P+=" ";return P},o=function k(B){for(var P="",A=0;A<B.length;A++){var z=B[A],j=typeof z=="string"?z:k(z);P+=j}return P},u=function k(B,P){var A="",z,j=1e5;P||(P=0);for(var se=0;se<B.length;se++){var Z=B[se];if(typeof Z!="string"){var G=k(Z,P+1);G.length<10*(r-n*P)&&G.indexOf('"""')<0&&(z=o(Z),z.length<r-n*P&&(Z="   "+z,G="")),G&&(j=1e4),A+=G}typeof Z=="string"&&(j<n*P+4?(A=A.slice(0,-1)+" "+Z+`
`,j+=Z.length+1):(z=l(n*P)+Z,A+=z+`
`,j=z.length))}return A};function f(k){this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#");for(var B=this.rootSubjects(k),P=B.roots,A=[],z=0;z<P.length;z++){var j=P[z];A.push(v(j,B))}return A}var d=f.bind(this);function h(k){return typeof k>"u"?"@@@undefined@@@@":k.replace(/[&<"]/g,function(B){switch(B[0]){case"&":return"&amp;";case"<":return"&lt;";case'"':return"&quot;"}})}function c(k){return h(this.base?Us(this.base,k.uri):k.uri)}var p=c.bind(this);function _(k,B){var P=[],A,z,j,se,Z=B.subjects[this.toStr(k)];if(typeof Z>"u")return T(k,B);Z.sort(function(ae,ze){var Ve=ae.predicate.uri,be=ze.predicate.uri;if(Ve.substring(0,a.length)===a||be.substring(0,a.length)===a)return Ve.localeCompare(be);var Ne=Ve.substring(a.length),_e=be.substring(a.length),Se=parseInt(Ne,10),et=parseInt(_e,10);return isNaN(Se)||isNaN(et)||Se!==Ne||et!==_e?Ve.localeCompare(be):Se-et});for(var G=0;G<Z.length;G++){if(j=Z[G],j.predicate.uri==="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"&&!A&&j.object.termType==="NamedNode"){A=j.object;continue}if(se=j.predicate,se.uri.substr(0,a.length)===a){var H=se.uri.substr(a.length),Q=parseInt(H,10);H===Q.toString()&&(se=this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#li"))}switch(z=g(se),j.object.termType){case"BlankNode":B.incoming[j.object].length===1?P=P.concat(["<"+z+' rdf:parseType="Resource">',v(j.object,B),"</"+z+">"]):P=P.concat(["<"+z+' rdf:nodeID="'+j.object.toNT().slice(2)+'"/>']);break;case"NamedNode":P=P.concat(["<"+z+' rdf:resource="'+p(j.object)+'"/>']);break;case"Literal":P=P.concat(["<"+z+(j.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+h(j.object.datatype.uri)+'"')+(j.object.language?' xml:lang="'+j.object.language+'"':"")+">"+h(j.object.value)+"</"+z+">"]);break;case"Collection":P=P.concat(["<"+z+' rdf:parseType="Collection">',D(j.object,B),"</"+z+">"]);break;default:throw new Error("Can't serialize object of type "+j.object.termType+" into XML")}}var ee=A?g(A):"rdf:Description",$="";return k.termType==="BlankNode"?(!B.incoming[k]||B.incoming[k].length!==1)&&($=' rdf:nodeID="'+k.toNT().slice(2)+'"'):$=' rdf:about="'+p(k)+'"',["<"+ee+$+">"].concat([P]).concat(["</"+ee+">"])}var v=_.bind(this);function D(k,B){for(var P=[],A=0;A<k.elements.length;A++)P.push(v(k.elements[A],B));return P}function U(k,B){var P=[],A=B.subjects[this.toStr(k)];if(!A)return P;A.sort();for(var z=0;z<A.length;z++){var j=A[z];switch(j.object.termType){case"BlankNode":B.rootsHash[j.object.toNT()]?P=P.concat(["<"+g(j.predicate)+' rdf:nodeID="'+j.object.toNT().slice(2)+'">',"</"+g(j.predicate)+">"]):P=P.concat(["<"+g(j.predicate)+' rdf:parseType="Resource">',T(j.object,B),"</"+g(j.predicate)+">"]);break;case"NamedNode":P=P.concat(["<"+g(j.predicate)+' rdf:resource="'+p(j.object)+'"/>']);break;case"Literal":P=P.concat(["<"+g(j.predicate)+(j.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+h(j.object.datatype.value)+'"')+(j.object.language?' xml:lang="'+j.object.language+'"':"")+">"+h(j.object.value)+"</"+g(j.predicate)+">"]);break;case"Collection":P=P.concat(["<"+g(j.predicate)+' rdf:parseType="Collection">',D(j.object,B),"</"+g(j.predicate)+">"]);break;default:throw new Error("Can't serialize object of type "+j.object.termType+" into XML")}}return P}var T=U.bind(this);function N(k){var B=k.uri,P=B.indexOf("#");if(P<0&&this.flags.indexOf("/")<0&&(P=B.lastIndexOf("/")),P<0)throw new Error("Cannot make qname out of <"+B+">");for(var A=P+1;A<B.length;A++)if(this._notNameChars.indexOf(B[A])>=0)throw new Error('Invalid character "'+B[A]+'" cannot be in XML qname for URI: '+B);var z=B.slice(P+1),j=B.slice(0,P+1);if(this.defaultNamespace&&this.defaultNamespace===j&&this.flags.indexOf("d")<0)return z;var se=this.prefixes[j];return se||(se=this.makeUpPrefix(j)),s[j]=!0,se+":"+z}var g=N.bind(this),E=d(t),b="<rdf:RDF";this.defaultNamespace&&(b+=' xmlns="'+h(this.defaultNamespace)+'"');for(var I in s)if(s.hasOwnProperty(I)){var C=this.base&&this.flags.includes("z")?Us(this.base,I):I;b+=`
 xmlns:`+this.prefixes[I]+'="'+h(C)+'"'}b+=">";var O=[b,E,"</rdf:RDF>"];return u(O,-1)}},{key:"statementsToJsonld",value:function(t){var n=this.statementsToN3(t),r=n2.parse(n);return JSON.stringify(r,null,2)}}])}();function s2(i){return encodeURI(i)}function l2(i){for(var e="",t,n=0;n<i.length;n++)t=i.charCodeAt(n),t>65535?e+="\\U"+("00000000"+t.toString(16)).slice(-8):t>126?e+="\\u"+("0000"+t.toString(16)).slice(-4):e+=i[n];return e}function aa(i,e,t,n,r,s){t=t||(i==null?void 0:i.value);var a=s||{};n=n||ti;var l=void 0;try{var o=i2(e);a.flags&&o.setFlags(a.flags);var u=e.statementsMatching(void 0,void 0,void 0,i);switch("namespaces"in e&&o.suggestNamespaces(e.namespaces),a.namespaces&&o.setNamespaces(a.namespaces),o.setBase(t),n){case ea:return l=o.statementsToXML(u),f(null,l);case Md:case tg:return l=o.statementsToN3(u),f(null,l);case ti:case ag:return o.setFlags("si"),l=o.statementsToN3(u),f(null,l);case rg:return o.setFlags("deinprstux"),l=o.statementsToNTriples(u),f(null,l);case cl:return o.setFlags("si dr"),l=o.statementsToJsonld(u),f(null,l);case dl:case hl:return o.setFlags("deinprstux q"),l=o.statementsToNTriples(u),f(null,l);default:throw new Error("Serialize: Content-type "+n+" not supported for data write.")}}catch(d){if(r)return r(d,void 0);throw d}function f(d,h){if(r){r(d,h);return}else return h}}var o2=["blankNode","defaultGraph","literal","namedNode","quad","variable","supports"],Fa={first:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",rest:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",nil:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};function Pp(i,e,t){var n=[];return t.reduce(function(r,s,a,l){n.push(i.quad(r,i.namedNode(Fa.first),l[a]));var o;return a<l.length-1?(o=i.blankNode(),n.push(i.quad(r,i.namedNode(Fa.rest),o))):n.push(i.quad(r,i.namedNode(Fa.rest),i.namedNode(Fa.nil))),o},e),n}function jr(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=i.length;for(t<0&&(t=n+t);t<n;t++)if(i[t]===e)return t;return-1}function u2(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=f2(i))||e){t&&(i=t);var n=0,r=function(){};return{s:r,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(u){throw u},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){t=t.call(i)},n:function(){var u=t.next();return s=u.done,u},e:function(u){a=!0,l=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(a)throw l}}}}function f2(i,e){if(i){if(typeof i=="string")return Vu(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Vu(i,e)}}function Vu(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function c2(i,e,t){return e=sr(e),Dn(i,Ip()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function Ip(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ip=function(){return!!i})()}var Rp=function(i){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};Wt(this,e),t=c2(this,e,[""]),t.statements=n,t.constraints=r,t.initBindings=s,t.optional=a,Ue(t,"termType",ua),Ue(t,"classOrder",nn.Graph),Ue(t,"fetcher",void 0),Ue(t,"isVar",0),Ue(t,"ns",mr),Ue(t,"rdfFactory",void 0),t.rdfFactory=l&&l.rdfFactory||xr;var o=u2(o2),u;try{var f=function(){var h=u.value;t[h]=function(){var c;return(c=t.rdfFactory)[h].apply(c,arguments)}};for(o.s();!(u=o.n()).done;)f()}catch(d){o.e(d)}finally{o.f()}return t}return br(e,i),Qt(e,[{key:"add",value:function(n,r,s,a){var l=this;return arguments.length===1&&n.forEach(function(o){return l.add(o.subject,o.predicate,o.object,o.graph)}),this.statements.push(this.rdfFactory.quad(n,r,s,a))}},{key:"addStatement",value:function(n){return this.add(n)}},{key:"bnode",value:function(n){return this.rdfFactory.blankNode(n)}},{key:"addAll",value:function(n){var r=this;n.forEach(function(s){r.add(s.subject,s.predicate,s.object,s.graph)})}},{key:"any",value:function(n,r,s,a){var l=this.anyStatementMatching(n,r,s,a);return l==null?null:n==null?l.subject:r==null?l.predicate:s==null?l.object:null}},{key:"anyValue",value:function(n,r,s,a){var l=this.any(n,r,s,a);return l?l.value:void 0}},{key:"anyJS",value:function(n,r,s,a){var l=this.any(n,r,s,a);return l?xt.toJS(l):void 0}},{key:"anyStatementMatching",value:function(n,r,s,a){var l=this.statementsMatching(n,r,s,a,!0);if(!(!l||l.length===0))return l[0]}},{key:"id",value:function(n){return this.rdfFactory.id(n)}},{key:"statementsMatching",value:function(n,r,s,a,l){var o=this.statements.filter(function(u){return(!n||n.equals(u.subject))&&(!r||r.equals(u.predicate))&&(!s||s.equals(u.object))&&(!a||a.equals(u.graph))});return l?o.length===0?[]:[o[0]]:o}},{key:"bottomTypeURIs",value:function(n){var r,s,a,l,o,u,f,d;r=[];for(var h in n)if(n.hasOwnProperty(h)){for(d=n[h],f=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),this.rdfFactory.namedNode(h)),s=!0,l=0,o=f.length;l<o;l++)if(a=f[l],u=a.uri,u in n){s=!1;break}s&&(r[h]=d)}return r}},{key:"collection",value:function(){return new On}},{key:"each",value:function(n,r,s,a){var l=[],o=this.statementsMatching(n,r,s,a,!1);if(n==null)for(var u=0,f=o.length;u<f;u++)l.push(o[u].subject);else if(r==null)for(var d=0,h=o.length;d<h;d++)l.push(o[d].predicate);else if(s==null)for(var c=0,p=o.length;c<p;c++)l.push(o[c].object);else if(a==null)for(var _=0,v=o.length;_<v;_++)l.push(new hr(o[_].graph.value));return l}},{key:"equals",value:function(n){return n?this.hashString()===n.hashString():!1}},{key:"findMembersNT",value:function(n){var r,s,a,l,o,u,f,d,h,c,p,_,v,D;_={},_[n.toNT()]=!0,l={},u=this.transitiveClosure(_,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0);for(var U in u)if(u.hasOwnProperty(U)){f=this.statementsMatching(void 0,this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.fromNT(U));for(var T=0,N=f.length;T<N;T++)v=f[T],l[v.subject.toNT()]=v;d=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"),this.fromNT(U));for(var g=0,E=d.length;g<E;g++)for(o=d[g],h=this.statementsMatching(void 0,o),a=0,r=h.length;a<r;a++)v=h[a],l[v.subject.toNT()]=v;c=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"),this.fromNT(U));for(var b=0,I=c.length;b<I;b++)for(o=c[b],p=this.statementsMatching(void 0,o),D=0,s=p.length;D<s;D++)v=p[D],l[v.object.toNT()]=v}return l}},{key:"findMemberURIs",value:function(n){return this.NTtoURI(this.findMembersNT(n))}},{key:"findSubClassesNT",value:function(n){var r={};return r[n.toNT()]=!0,this.transitiveClosure(r,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0)}},{key:"findSuperClassesNT",value:function(n){var r={};return r[n.toNT()]=!0,this.transitiveClosure(r,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}},{key:"findTypesNT",value:function(n){var r,s,a,l,o,u,f,d,h;a="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",h=[],l=this.statementsMatching(n,void 0,void 0);for(var c=0,p=l.length;c<p;c++)if(d=l[c],d.predicate.uri===a)h[d.object.toNT()]=d;else{o=this.each(d.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"));for(var _=0,v=o.length;_<v;_++)s=o[_],h[s.toNT()]=d}u=this.statementsMatching(void 0,void 0,n);for(var D=0,U=u.length;D<U;D++){d=u[D],f=this.each(d.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"));for(var T=0,N=f.length;T<N;T++)r=f[T],h[r.toNT()]=d}return this.transitiveClosure(h,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}},{key:"findTypeURIs",value:function(n){return this.NTtoURI(this.findTypesNT(n))}},{key:"connectedStatements",value:function(n,r,s){s=s||[];for(var a=[n],l={},o={},u=[],f=this,d=function(c){var p=function(D){D.termType==="BlankNode"&&!l[D.value]&&(l[D.value]=!0,a.push(D))},_=f.statementsMatching(null,null,c,r).concat(f.statementsMatching(c,null,null,r));_=_.filter(function(v){if(s[v.predicate.value])return!1;var D=v.toNT();return o[D]?!1:(o[D]=!0,!0)}),_.forEach(function(v){p(v.subject),p(v.object)}),u=u.concat(_)};a.length;)d(a.shift());return u}},{key:"formula",value:function(n){return new e}},{key:"fromNT",value:function(n){var r,s,a;switch(n[0]){case"<":return this.sym(n.slice(1,-1));case'"':if(a=void 0,r=void 0,s=n.lastIndexOf('"'),s<n.length-1)if(n[s+1]==="@")a=n.slice(s+2);else if(n.slice(s+1,s+3)==="^^")r=this.fromNT(n.slice(s+3));else throw new Error("Can't convert string from NT: "+n);return n=n.slice(1,s),n=n.replace(/\\"/g,'"'),n=n.replace(/\\n/g,`
`),n=n.replace(/\\\\/g,"\\"),this.rdfFactory.literal(n,a||r);case"_":return this.rdfFactory.blankNode(n.slice(2));case"?":return new si(n.slice(1))}throw new Error("Can't convert from NT: "+n)}},{key:"holds",value:function(n,r,s,a){var l;if(arguments.length===1){if(!n)return!0;if(n instanceof Array){for(l=0;l<n.length;l++)if(!this.holds(n[l]))return!1;return!0}else{if(lg(n))return this.holds(n.subject,n.predicate,n.object,n.graph);if(n.statements)return this.holds(n.statements)}}var o=this.anyStatementMatching(n,r,s,a);return o!=null}},{key:"holdsStatement",value:function(n){return this.holds(n.subject,n.predicate,n.object,n.graph)}},{key:"list",value:function(n,r){if(r.rdfFactory.supports.COLLECTIONS){var s=r.rdfFactory.collection();return n.forEach(function(o){s.append(o)}),s}else{var a=r.rdfFactory.blankNode(),l=Pp(r.rdfFactory,a,n);return r.addAll(l),a}}},{key:"NTtoURI",value:function(n){var r,s,a={};for(r in n)n.hasOwnProperty(r)&&(s=n[r],r[0]==="<"&&(a[r.slice(1,-1)]=s));return a}},{key:"serialize",value:function(n,r,s,a){return aa(s,this,n,r,void 0,a)}},{key:"substitute",value:function(n){var r=this.statements.map(function(a){return a.substitute(n)}),s=new e;return s.addAll(r),s}},{key:"sym",value:function(n,r){if(r)throw new Error("This feature (kb.sym with 2 args) is removed. Do not assume prefix mappings.");return this.rdfFactory.namedNode(n)}},{key:"the",value:function(n,r,s,a){var l=this.any(n,r,s,a);return l}},{key:"transitiveClosure",value:function(n,r,s){var a,l,o,u,f,d,h={};Object.assign(h,n);for(var c={};;){if(d=function(){for(var p in h)if(h.hasOwnProperty(p))return p}(),d==null)return c;for(f=s?this.each(void 0,r,this.fromNT(d)):this.each(this.fromNT(d),r),l=0,o=f.length;l<o;l++)a=f[l],u=a.toNT(),!(u in c)&&(u in h||(h[u]=h[d]));c[d]=h[d],delete h[d]}}},{key:"topTypeURIs",value:function(n){var r,s,a,l,o,u,f,d;f=[];for(a in n)if(n.hasOwnProperty(a)){for(d=n[a],o=0,u=this.each(this.rdfFactory.namedNode(a),this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf")),r=0,l=u.length;r<l;r++)if(s=u[r],s.uri!=="http://www.w3.org/2000/01/rdf-schema#Resource"){o++;break}o||(f[a]=d)}return f["http://www.w3.org/2000/01/rdf-schema#Resource"]&&delete f["http://www.w3.org/2000/01/rdf-schema#Resource"],f["http://www.w3.org/2002/07/owl#Thing"]&&delete f["http://www.w3.org/2002/07/owl#Thing"],f}},{key:"toString",value:function(){return"{"+this.statements.join(`
`)+"}"}},{key:"variable",value:function(n){return new si(n)}},{key:"whether",value:function(n,r,s,a){return this.statementsMatching(n,r,s,a,!1).length}}])}(xt);xt.fromValue=Xd;var vi={xsd:mr("http://www.w3.org/2001/XMLSchema#")};xt.toJS=function(i){return Ll(i)?i.elements.map(xt.toJS):Vd(i)?i.datatype.equals(vi.xsd("boolean"))?i.value==="1"||i.value==="true":i.datatype.equals(vi.xsd("dateTime"))||i.datatype.equals(vi.xsd("date"))?new Date(i.value):i.datatype.equals(vi.xsd("integer"))||i.datatype.equals(vi.xsd("float"))||i.datatype.equals(vi.xsd("decimal"))?Number(i.value):i.value:i};var h2=Qt(function i(e,t){Wt(this,i),this.pat=new pa,this.vars=[],this.name=e,this.id=t});function zu(i,e,t,n){function r(g){var E="",b;for(b in g)g.hasOwnProperty(b)&&(E+="    "+b+" -> "+g[b]);return E}function s(g){var E="Bindings: ",b,I=g.length;for(b=0;b<I;b++)E+=r(g[b][0])+`;
	`;return E}function a(g,E,b,I){var C=b[g];if(C===void 0){if(g.isVar){var O=[];return O[g]=E,[[O,null]]}C=g}if(!C.complexType)return I.redirections[C]&&(C=I.redirections[C]),I.redirections[E]&&(E=I.redirections[E]),C.equals(E)||C.uri&&C.uri===ta?[[[],null]]:[];if(g instanceof Array)return E instanceof Array?l(g,E,b):[];throw new Error("query.js: oops - code not written yet")}function l(g,E,b,I){var C;if(g.length!==E.length)return[];if(!g.length)return[[[],null]];var O=a(g[0],E[0],b,I);if(O.length===0)return O;var k=[],B,P=O.length,A,z,j,se,Z,G;for(B=0;B<P;B++){A=O[B][0],G=[];for(se in A)A.hasOwnProperty(se)&&(G[se]=A[se]);for(se in b)b.hasOwnProperty(se)&&(G[se]=b[se]);for(C=l(g.slice(1),E.slice(1),G,I),j=C.length,z=0;z<j;z++){Z=C[z][0];for(se in A)A.hasOwnProperty(se)&&(Z[se]=A[se]);k.push([Z,null])}}return k}function o(g,E){var b=E[g];return b===void 0?g:b}function u(g,E){var b={},I;for(I in g)g.hasOwnProperty(I)&&(b[I]=g[I]);for(I in E)E.hasOwnProperty(I)&&(b[I]=E[I]);return b}function f(g,E){return this.trunkBindings=E,this.originalCallback=g,this.branches=[],this}f.prototype.checkAllDone=function(){var g;for(g=0;g<this.branches.length;g++)if(!this.branches[g].done)return;this.doCallBacks(this.branches.length-1,this.trunkBindings)},f.prototype.doCallBacks=function(g,E){var b;if(g<0)return this.originalCallback(E);for(b=0;b<this.branches[g].results.length;b++)this.doCallBacks(g-1,u(E,this.branches[g].results[b]))};function d(g,E){return this.count=0,this.success=!1,this.done=!1,this.callback=g,this.onDone=E,this}d.prototype.reportMatch=function(g){this.callback(g),this.success=!0},d.prototype.reportDone=function(){this.done=!0,this.onDone!==void 0&&this.onDone()};var h=function(E){return this.count=0,this.done=!1,this.results=[],this.junction=E,E.branches.push(this),this};h.prototype.reportMatch=function(g){this.results.push(g)},h.prototype.reportDone=function(){Kr.debug("Optional branch finished - results.length = "+this.results.length),this.results.length===0&&this.results.push({}),this.done=!0,this.junction.checkAllDone()};function c(g,E,b){var I,C,O,k;for(E.nvars=0,E.index=null,I=[E.subject,E.predicate,E.object,E.why],k=[g.subjectIndex,g.predicateIndex,g.objectIndex,g.whyIndex],O=0;O<4;O++){var B=I[O];if(!(B.uri&&B.uri===ta))if(B.isVar&&b[B]===void 0)E.nvars++;else{if(B=o(I[O],b),g.redirections[g.id(B)]&&(B=g.redirections[g.id(B)]),C=k[O][g.id(B)],!C)return E.index=[],!1;(E.index===null||E.index.length>C.length)&&(E.index=C)}}return E.index===null&&(E.index=g.statements),!0}function p(g,E){return g.nvars!==E.nvars?g.nvars-E.nvars:g.index.length-E.index.length}var _=0,v=function g(E,b,I,C,O,k,B){Kr.debug("Match begins, Branch count now: "+B.count+" for "+B.pattern_debug);var P=b.statements;if(P.length===0){if(Kr.debug("FOUND MATCH WITH BINDINGS:"+r(I)),b.optional.length===0)B.reportMatch(I);else{Kr.debug("OPTIONAL: "+b.optional);var A=new f(e,I),z=[],j;for(j=0;j<b.optional.length;j++)z[j]=new h(A),z[j].pattern_debug=b.optional[j];for(j=0;j<b.optional.length;j++)z[j].count=z[j].count+1,g(E,b.optional[j],I,"",O,e,z[j])}B.count--,Kr.debug("Match ends -- success , Branch count now: "+B.count+" for "+B.pattern_debug);return}var se,Z,G=P.length;if(O){var H="match"+_++,Q=function($,ae){var ze=$.uri.split("#")[0];O.nowOrWhenFetched(ze,void 0,function(Ve,be,Ne){Ve||console.log("Error following link to <"+$.uri+"> in query: "+be),g(E,b,I,C,O,k,B)})};for(Z=0;Z<G;Z++){if(se=P[Z],I[se.subject]!==void 0&&I[se.subject].uri&&O&&O.getState(wi(I[se.subject].uri))==="unrequested"){Q(I[se.subject],H);return}if(I[se.object]!==void 0&&I[se.object].uri&&O&&O.getState(wi(I[se.object].uri))==="unrequested"){Q(I[se.object],H);return}}}U(E,b,I,C,O,k,B)},D=function(E,b){var I=!0,C,O;for(C in E)E.hasOwnProperty(C)&&b[C]&&(O=b[C].test,O&&!O(E[C])&&(I=!1));return I},U=function(E,b,I,C,O,k,B){var P=b.statements,A=P.length,z,j,se,Z,G,H,Q;for(z=0;z<A;z++)Q=P[z],c(E,Q,I);P.sort(p),Q=P[0];var ee=E.formula();ee.optional=b.optional,ee.constraints=b.constraints,ee.statements=P.slice(1),Kr.debug(C+"match2 searching "+Q.index.length+" for "+Q+"; bindings so far="+r(I));var $,ae=Q.index.length,ze,Ve;for($=0;$<ae;$++)for(Ve=Q.index[$],ze=l([Q.subject,Q.predicate,Q.object,Q.why],[Ve.subject,Ve.predicate,Ve.object,Ve.why],I,E),Kr.info(C+" From first: "+ze.length+": "+s(ze)),se=ze.length,j=0;j<se;j++)if(G=[],H=ze[j][0],!D(H,b.constraints))Kr.debug("Branch count CS: "+B.count);else{for(Z in H)H.hasOwnProperty(Z)&&(G[Z]=H[Z]);for(Z in I)I.hasOwnProperty(Z)&&(G[Z]=I[Z]);B.count++,v(E,ee,G,C+"  ",O,k,B)}B.count--,Kr.debug("Match2 ends, Branch count: "+B.count+" for "+B.pattern_debug),B.count===0&&B.reportDone()},T=this;Kr.debug("Query on "+this.statements.length);var N=new d(e,n);N.count++,i.sync?v(T,i.pat,i.pat.initBindings,"",t,e,N):setTimeout(function(){v(T,i.pat,i.pat.initBindings,"",t,e,N)},0)}function Hu(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function $i(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Hu(Object(t),!0).forEach(function(n){Ue(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Hu(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function d2(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=p2(i))||e){t&&(i=t);var n=0,r=function(){};return{s:r,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(u){throw u},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){t=t.call(i)},n:function(){var u=t.next();return s=u.done,u},e:function(u){a=!0,l=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(a)throw l}}}}function p2(i,e){if(i){if(typeof i=="string")return $u(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $u(i,e)}}function $u(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function _2(i,e,t){return e=sr(e),Dn(i,Fp()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function Fp(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Fp=function(){return!!i})()}var Ms="http://www.w3.org/2002/07/owl#";function v2(i,e,t,n){var r=i.any(e,t,void 0);return r?(i.equate(r,n),!0):!1}function m2(i,e,t,n){var r=i.any(void 0,t,n);return r?(i.equate(r,e),!0):!1}function Op(i,e,t,n,r){i.typeCallback&&i.typeCallback(i,n,r);var s=i.classActions[i.id(n)],a=!1;if(s)for(var l=0;l<s.length;l++)a=a||s[l](i,e,t,n,r);return a}var pa=function(i){function e(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Wt(this,e),n=_2(this,e,[void 0,void 0,void 0,void 0,r]),Ue(n,"updater",void 0),Ue(n,"namespaces",void 0),Ue(n,"classActions",void 0),Ue(n,"propertyActions",void 0),Ue(n,"redirections",void 0),Ue(n,"aliases",void 0),Ue(n,"HTTPRedirects",void 0),Ue(n,"subjectIndex",void 0),Ue(n,"predicateIndex",void 0),Ue(n,"objectIndex",void 0),Ue(n,"whyIndex",void 0),Ue(n,"index",void 0),Ue(n,"features",void 0),Ue(n,"_universalVariables",void 0),Ue(n,"_existentialVariables",void 0),Ue(n,"rdfArrayRemove",void 0),Ue(n,"dataCallbacks",void 0),n.propertyActions={},n.classActions={},n.redirections=[],n.aliases=[],n.HTTPRedirects=[],n.subjectIndex=[],n.predicateIndex=[],n.objectIndex=[],n.whyIndex=[],n.index=[n.subjectIndex,n.predicateIndex,n.objectIndex,n.whyIndex],n.namespaces={},n.features=t||[],n.rdfArrayRemove=r.rdfArrayRemove||e2,r.dataCallback&&(n.dataCallbacks=[r.dataCallback]),n.initPropertyActions(n.features),n}return br(e,i),Qt(e,[{key:"substitute",value:function(n){var r=this.statements.map(function(a){return a.substitute(n)}),s=new e;return s.add(r),s}},{key:"addDataCallback",value:function(n){this.dataCallbacks||(this.dataCallbacks=[]),this.dataCallbacks.push(n)}},{key:"applyPatch",value:function(n,r,s){var a=this,l,o=null;function u(h){if(n.delete){l=n.delete,o&&(l=l.substitute(o)),l=l.statements;var c=[],p=l.map(function(_){var v=a.statementsMatching(_.subject,_.predicate,_.object,r);return v.length===0?(c.push(_),null):v[0]});if(c.length)return s("Could not find to delete: "+c.join(`
 or `));p.map(function(_){a.remove(_)})}n.insert&&(l=n.insert,o&&(l=l.substitute(o)),l=l.statements,l.map(function(_){_.graph=r,a.add(_.subject,_.predicate,_.object,_.graph)})),h()}if(n.where){var f=new h2("patch");f.pat=n.where,f.pat.statements.map(function(h){h.graph=Kp(r.value)}),f.sync=!0;var d=[];a.query(f,function(c){d.push(c)},a.fetcher,function(){if(d.length===0)return s("No match found to be patched:"+n.where);if(d.length>1)return s("Patch ambiguous. No patch done.");o=d[0],u(s)})}else u(s)}},{key:"declareExistential",value:function(n){return this._existentialVariables||(this._existentialVariables=[]),this._existentialVariables.push(n),n}},{key:"initPropertyActions",value:function(n){this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"))]=[Op],jr(n,"sameAs")>=0&&(this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode("".concat(Ms,"sameAs")))]=[function(r,s,a,l,o){return r.equate(s,l),!0}]),jr(n,"InverseFunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode("".concat(Ms,"InverseFunctionalProperty")))]=[function(r,s,a,l,o){return r.newPropertyAction(s,m2)}]),jr(n,"FunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode("".concat(Ms,"FunctionalProperty")))]=[function(r,s,a,l,o){return r.newPropertyAction(s,v2)}])}},{key:"addStatement",value:function(n){return this.add(n.subject,n.predicate,n.object,n.graph),this.statements.length}},{key:"add",value:function(n,r,s,a){var l;if(arguments.length===1){if(n instanceof Array)for(l=0;l<n.length;l++)this.add(n[l]);else bi(n)?this.add(n.subject,n.predicate,n.object,n.graph):gu(n)&&this.add(n.statements);return this}var o,u;a||(a=this.fetcher?this.fetcher.appNode:this.rdfFactory.defaultGraph()),typeof n=="string"&&(n=this.rdfFactory.namedNode(n)),r=xt.fromValue(r);var f=xt.fromValue(s);if(a=xt.fromValue(a),!ug(n))throw new Error("Subject is not a subject type");if(!fg(r))throw new Error("Predicate ".concat(r," is not a predicate type"));if(!og(f))throw new Error("Object ".concat(f," is not an object type"));if(!hg(a))throw new Error("Why is not a graph type");this.predicateCallback&&this.predicateCallback(this,r,a);var d=this.id(this.canon(r));o=this.propertyActions[d];var h=!1;if(o)for(l=0;l<o.length;l++)h=h||o[l](this,n,r,f,a);if(this.holds(n,r,f,a))return null;var c=[this.id(this.canon(n)),d,this.id(this.canon(f)),this.id(this.canon(a))];for(u=this.rdfFactory.quad(n,r,f,a),l=0;l<4;l++){var p=this.index[l],_=c[l];p[_]||(p[_]=[]),p[_].push(u)}if(this.statements.push(u),this.dataCallbacks){var v=d2(this.dataCallbacks),D;try{for(v.s();!(D=v.n()).done;){var U=D.value;U(u)}}catch(T){v.e(T)}finally{v.f()}}return u}},{key:"canon",value:function(n){if(!n)return n;var r=this.redirections[this.id(n)];if(r)return r;switch(n.termType){case ui:return new an(n.value);case Mn:return n;case ai:return new Ul;case qd:return n;case ua:return n;case Ii:return new en(n.value,n.language,n.datatype);case oi:return new hr(n.value);case qn:return new si(n.value);default:throw new Error("Term Type not recognized for canonization: ".concat(n.termType))}}},{key:"check",value:function(){this.checkStatementList(this.statements);for(var n=0;n<4;n++){var r=this.index[n];for(var s in r)r.hasOwnProperty(s)&&this.checkStatementList(r[s],n)}}},{key:"checkStatementList",value:function(n,r){r===void 0&&(r=0);for(var s=["subject","predicate","object","why"],a=" found in "+s[r]+" index.",l,o=0;o<n.length;o++){l=n[o];for(var u=[l.subject,l.predicate,l.object,l.graph],f=function(_,v){for(var D=0;D<_.length;D++)if(_[D].subject.equals(v.subject)&&_[D].predicate.equals(v.predicate)&&_[D].object.equals(v.object)&&_[D].why.equals(v.graph))return!0},d=0;d<4;d++){var h=this.canon(u[d]),c=this.id(h);this.index[d][c]&&f(this.index[d][c],l)}if(!f(this.statements,l))throw new Error("Statement list does not statement "+l+"@"+l.graph+a)}}},{key:"close",value:function(){return this}},{key:"compareTerms",value:function(n,r){return Object.prototype.hasOwnProperty.call(n,"compareTerm")?n.compareTerm(r):nn[n.termType]<nn[r.termType]?-1:nn[n.termType]>nn[r.termType]?1:n.value<r.value?-1:n.value>r.value?1:0}},{key:"copyTo",value:function(n,r,s){s||(s=[]);var a=this.statementsMatching(n);jr(s,"two-direction")!==-1&&a.concat(this.statementsMatching(void 0,void 0,n));for(var l=0;l<a.length;l++){var o=a[l];switch(o.object.termType){case"NamedNode":this.add(r,o.predicate,o.object);break;case"Literal":case"BlankNode":case"Collection":this.add(r,o.predicate,o.object.copy(this))}jr(s,"delete")!==-1&&this.remove(o)}}},{key:"equate",value:function(n,r){var s=this.canon(n),a=this.canon(r),l=this.compareTerms(s,a);return l?l<0?this.replaceWith(a,s):this.replaceWith(s,a):!0}},{key:"formula",value:function(n){return new e(n)}},{key:"length",get:function(){return this.statements.length}},{key:"match",value:function(n,r,s,a){return this.statementsMatching(xt.fromValue(n),xt.fromValue(r),xt.fromValue(s),xt.fromValue(a))}},{key:"mentionsURI",value:function(n){var r="<"+n+">";return!!this.subjectIndex[r]||!!this.objectIndex[r]||!!this.predicateIndex[r]}},{key:"newExistential",value:function(n){if(!n)return this.bnode();var r=this.sym(n);return this.declareExistential(r)}},{key:"newPropertyAction",value:function(n,r){var s=this.id(n);this.propertyActions[s]||(this.propertyActions[s]=[]),this.propertyActions[s].push(r);for(var a=this.statementsMatching(void 0,n,void 0),l=!1,o=0;o<a.length;o++)l=l||r(this,a[o].subject,n,a[o].object);return l}},{key:"newUniversal",value:function(n){var r=this.sym(n);return this._universalVariables||(this._universalVariables=[]),this._universalVariables.push(r),r}},{key:"variable",value:function(n){return new si(n)}},{key:"nextSymbol",value:function(n){for(var r=0;;r++){var s=n.value+"#n"+r;if(!this.mentionsURI(s))return this.sym(s)}}},{key:"query",value:function(n,r,s,a){return zu.call(this,n,r,s,a)}},{key:"querySync",value:function(n){var r=[];function s(o){r.push(o)}function a(){l=!0}var l=!1;if(n.sync=!0,zu.call(this,n,s,null,a),!l)throw new Error("Sync query should have called done function");return r}},{key:"remove",value:function(n){if(n instanceof Array){for(var r=0;r<n.length;r++)this.remove(n[r]);return this}if(gu(n))return this.remove(n.statements);var s=this.statementsMatching(n.subject,n.predicate,n.object,n.graph);if(!s.length)throw new Error("Statement to be removed is not on store: "+n);return this.removeStatement(s[0]),this}},{key:"removeDocument",value:function(n){this.removeMetadata(n);for(var r=this.statementsMatching(void 0,void 0,void 0,n).slice(),s=0;s<r.length;s++)this.removeStatement(r[s]);return this.removeMatches(n,null,null),this}},{key:"removeMetadata",value:function(n){for(var r=this.sym("chrome://TheCurrentSession"),s="http://www.w3.org/2007/ont/link#",a=this.statementsMatching(void 0,this.sym("".concat(s,"requestedURI")),this.rdfFactory.literal(n.value),r).map(function(c){return c.subject}),l=0;l<a.length;l++){var o=a[l];if(o!=null){var u=void 0,f=this.any(o,this.sym("".concat(s,"status")),null,r);if(f!=null){u=this.statementsMatching(f,this.sym("".concat(s,"status")),null,r).slice();for(var d=0;d<u.length;d++)this.removeStatement(u[d])}var h=this.any(o,this.sym("".concat(s,"response")),null,r);if(h!=null){u=this.statementsMatching(h,null,null,r).slice();for(var d=0;d<u.length;d++)this.removeStatement(u[d])}u=this.statementsMatching(o,null,null,r).slice();for(var d=0;d<u.length;d++)this.removeStatement(u[d])}}return this.removeMatches(this.sym(n.value),null,null,r),this}},{key:"removeMany",value:function(n,r,s,a,l){for(var o=this.statementsMatching(n,r,s,a,!1),u=[],f=0;f<o.length;f++)u.push(o[f]);for(l&&(u=u.slice(0,l)),f=0;f<u.length;f++)this.remove(u[f])}},{key:"removeMatches",value:function(n,r,s,a){return this.removeMany(n,r,s,a),this}},{key:"removeStatement",value:function(n){for(var r=[n.subject,n.predicate,n.object,n.graph],s=0;s<4;s++){var a=this.canon(r[s]),l=this.id(a);this.index[s][l]&&this.rdfArrayRemove(this.index[s][l],n)}return this.rdfArrayRemove(this.statements,n),this}},{key:"removeStatements",value:function(n){for(var r=0;r<n.length;r++)this.remove(n[r]);return this}},{key:"replaceWith",value:function(n,r){for(var s=this.id(n),a=this.id(r),l=function(f){var d=f[s];if(d){var h=f[a];h?f[a]=d.concat(h):f[a]=d,delete f[s]}},o=0;o<4;o++)l(this.index[o]);if(this.redirections[s]=r,n.value){if(this.aliases[a]||(this.aliases[a]=[]),this.aliases[a].push(n),this.aliases[s])for(o=0;o<this.aliases[s].length;o++)this.redirections[this.id(this.aliases[s][o])]=r,this.aliases[a].push(this.aliases[s][o]);this.add(r,this.sym("http://www.w3.org/2007/ont/link#uri"),n),this.fetcher&&this.fetcher.nowKnownAs(n,r)}return l(this.classActions),l(this.propertyActions),!0}},{key:"allAliases",value:function(n){var r=this.aliases[this.id(this.canon(n))]||[];return r.push(this.canon(n)),r}},{key:"sameThings",value:function(n,r){if(n.equals(r))return!0;var s=this.canon(n);if(!s)return!1;var a=this.canon(r);return a?s.value===a.value:!1}},{key:"setPrefixForURI",value:function(n,r){if(!(n==="tab"&&this.namespaces.tab)&&!(n.slice(0,2)==="ns"||n.slice(0,7)==="default")){for(var s in this.namespaces)this.namespaces[s]==r&&delete this.namespaces[s];this.namespaces[n]=r}}},{key:"statementsMatching",value:function(n,r,s,a,l){var o=[n,r,s,a],u=[],f=[],d=[],h,c;for(h=0;h<4;h++)u[h]=this.canon(xt.fromValue(o[h])),u[h]&&(d.push(h),f[h]=this.id(u[h]));if(d.length===0)return this.statements;if(d.length===1)return h=d[0],c=this.index[h][f[h]],c&&l&&c.length>1&&(c=c.slice(0,1)),c=c||[],c;var p=1e10,_,v;for(v=0;v<d.length;v++){if(h=d[v],c=this.index[h][f[h]],!c)return[];c.length<p&&(p=c.length,_=v)}for(var D=d[_],U=this.index[D][f[D]],T=d.slice(0,_).concat(d.slice(_+1)),N=[],g=["subject","predicate","object","why"],E=0;E<U.length;E++){var b=U[E];for(v=0;v<T.length;v++)if(h=T[v],!this.canon(b[g[h]]).equals(u[h])){b=null;break}if(b!=null&&(N.push(b),l))break}return N}},{key:"uris",value:function(n){var r=this.canon(n),s=this.aliases[this.id(r)];if(!r.value)return[];var a=[r.value];if(s)for(var l=0;l<s.length;l++)a.push(s[l].uri);return a}},{key:"serialize",value:function(n,r,s,a){var l,o=(l=a)!==null&&l!==void 0&&l.namespaces?$i($i({},this.namespaces),a.namespaces):$i({},this.namespaces);return a=$i($i({},a||{}),{},{namespaces:o}),aa(s,this,n,r,void 0,a)}}],[{key:"defaultGraphURI",get:function(){return ta}}])}(Rp);Ue(pa,"handleRDFType",void 0);pa.handleRDFType=Op;function Zi(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=g2(i))||e){t&&(i=t);var n=0,r=function(){};return{s:r,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(u){throw u},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){t=t.call(i)},n:function(){var u=t.next();return s=u.done,u},e:function(u){a=!0,l=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(a)throw l}}}}function g2(i,e){if(i){if(typeof i=="string")return Xu(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Xu(i,e)}}function Xu(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}var Zn=mr("http://www.w3.org/1999/02/22-rdf-syntax-ns#");function b2(i,e,t,n){var r=Zi(i.statementsMatching(t,null,null,n)),s;try{for(r.s();!(s=r.n()).done;){var a=s.value,l=new ri(e,a.predicate,a.object,n);i.remove(a),i.add(l)}}catch(p){r.e(p)}finally{r.f()}var o=Zi(i.statementsMatching(null,t,null,n)),u;try{for(o.s();!(u=o.n()).done;){var f=u.value;i.remove(f),i.add(new ri(f.subject,e,f.object,n))}}catch(p){o.e(p)}finally{o.f()}var d=Zi(i.statementsMatching(null,null,t,n)),h;try{for(d.s();!(h=d.n()).done;){var c=h.value;i.remove(c),i.add(new ri(c.subject,c.predicate,e,n))}}catch(p){d.e(p)}finally{d.f()}}function y2(i,e){var t=Zn("nil"),n=Zi(i.statementsMatching(t,null,null,e)),r;try{for(n.s();!(r=n.n()).done;){var s=r.value;i.remove(s);var a=new On;i.add(new ri(a,s.predicate,s.object,e))}}catch(d){n.e(d)}finally{n.f()}var l=Zi(i.statementsMatching(null,null,t,e)),o;try{for(l.s();!(o=l.n()).done;){var u=o.value;if(!u.predicate.sameTerm(Zn("rest"))){i.remove(u);var f=new On;i.add(new ri(u.subject,u.predicate,f,e))}}}catch(d){l.e(d)}finally{l.f()}}function w2(i,e){function t(r,s,a){var l=i.statementsMatching(r,Zn("rest"),null,e);if(l.length!==1)throw new Error("Bad list structure: no rest at ".concat(r));var o=i.statementsMatching(r,Zn("first"),null,e);if(o.length!==1)throw new Error("Bad list structure: rest but ".concat(o.length," firsts at ").concat(r));var u=o[0].object,f=[u].concat(s),d=a.concat(l).concat(o),h=i.statementsMatching(null,Zn("rest"),r,e);if(h.length===0){var c=new On(f);i.remove(d),b2(i,c,r,e);return}if(h.length!==1)throw new Error("Bad list structure: ".concat(h.length," pres at ").concat(r));var p=h[0].subject;if(p.termType!=="BlankNode")throw new Error("Bad list element node ".concat(p," type: ").concat(p.termType," "));t(p,f,d)}y2(i,e);var n=i.statementsMatching(null,Zn("rest"),Zn("nil"),e);n.forEach(function(r){if(r.subject.termType!=="BlankNode")throw new Error("Bad list element node ".concat(r.subject," type: ").concat(r.subject.termType," "));t(r.subject,[],[])})}function E2(i){return encodeURI(i)}var D2={encode:function(e){e=e.replace(/\r\n/g,`
`);for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},decode:function(e){for(var t="",n=0;n<e.length;){var r=e.charCodeAt(n);r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(t+=String.fromCharCode((r&31)<<6|e.charCodeAt(n+1)&63),n+=2):(t+=String.fromCharCode((r&15)<<12|(e.charCodeAt(n+1)&63)<<6|e.charCodeAt(n+2)&63),n+=3)}return t}},xs="http://www.w3.org/2000/10/swap/log#",ur=function(e){return e},fr=function(e){return e},Xi=function(e){if(e.length>0)throw"missing.js: oops nnonempty dict not imp";return[]},Br=function(e){return e.length},Vs=function(e,t,n){if(typeof e.slice>"u")throw"@@ mising.js: No .slice function for "+e+" of type "+Ir(e);return typeof n>"u"||n==null?e.slice(t):e.slice(t,n)},Wi=Error("dummy error stop iteration"),Oa=function(e){return this.last=0,this.li=e,this.next=function(){if(this.last==this.li.length)throw Wi;return this.li[this.last++]},this},zs=function(e,t){return e.indexOf(t)},Jn=function(e,t){if(!e)throw t?"python Assertion failed: "+t:"(python) Assertion failed."},k2=function(e){return String.fromCharCode(e)};String.prototype.encode=function(i){if(i!="utf-8")throw"UTF8_converter: can only do utf-8";return D2.encode(this)};String.prototype.decode=function(i){if(i!="utf-8")throw"UTF8_converter: can only do utf-8";return this};var Hs=function(e,t){return qr(t,e)},A2=null,C2="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",Gu="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",Qu="http://www.w3.org/2002/07/owl#sameAs",T2="#",N2="http://www.w3.org/2001/XMLSchema#integer",S2="http://www.w3.org/2001/XMLSchema#double",P2="http://www.w3.org/2001/XMLSchema#decimal",I2="http://www.w3.org/2001/XMLSchema#date",R2="http://www.w3.org/2001/XMLSchema#dateTime",Bp=`	\r
 !"#$%&'()*.,+/;<=>?@[\\]^\`{|}~`,Kn=Bp+":",$s=new RegExp("^([-+]?[0-9]+)(\\.[0-9]+)?(e[-+]?[0-9]+)?","g"),Wu=new RegExp("^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9](T[0-9][0-9]:[0-9][0-9](:[0-9][0-9](\\.[0-9]*)?)?)?Z?"),Xs=new RegExp('[\\\\\\r\\n\\"]',"g"),Gs=new RegExp("^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*","g");function Ql(i,e,t,n,r,s,a,l){return new F2(i,e,t,n,r,s,a,l)}var F2=function(){function i(e,t,n,r,s,a,l,o){Wt(this,i),typeof t>"u"&&(t=null),typeof n>"u"&&(n=""),typeof r>"u"&&(r=null),typeof s>"u"&&(s=""),typeof l>"u"&&(l=""),typeof o>"u"&&(o=null),this._bindings=new Xi([]),this._flags=l,n!=""&&(Jn(n.indexOf(":")>=0,"Document URI not absolute: "+n),this._bindings[""]=n+"#"),this._store=e,s&&e.setGenPrefix(s),this._thisDoc=n,this.source=e.sym(n),this.lines=0,this.statementCount=0,this.hasNil=!1,this.startOfLine=0,this.previousLine=0,this._genPrefix=s,this.keywords=new fr(["a","this","bind","has","is","of","true","false"]),this.keywordsSet=0,this._anonymousNodes=new Xi([]),this._variables=new Xi([]),this._parentVariables=new Xi([]),this._reason=o,this._reason2=null,r?this._baseURI=r:n?this._baseURI=n:this._baseURI=null,Jn(!this._baseURI||this._baseURI.indexOf(":")>=0),this._genPrefix||(this._thisDoc?this._genPrefix=this._thisDoc+"#_g":this._genPrefix=RDFSink_uniqueURI()),t==null?this._thisDoc?this._formula=e.formula(n+"#_formula"):this._formula=e.formula():this._formula=t,this._context=this._formula,this._parentContext=null}return Qt(i,[{key:"here",value:function(t){return this._genPrefix+"_L"+this.lines+"C"+(t-this.startOfLine+1)}},{key:"formula",value:function(){return this._formula}},{key:"loadStream",value:function(t){return this.loadBuf(t.read())}},{key:"loadBuf",value:function(t){return this.startDoc(),this.feed(t),this.endDoc()}},{key:"feed",value:function(t){for(var n=t.decode("utf-8"),r=0;r>=0;){var s=this.skipSpace(n,r);if(s<0)return;var r=this.directiveOrStatement(n,s);if(r<0)throw ut(this._thisDoc,this.lines,n,s,"expected directive or statement")}}},{key:"directiveOrStatement",value:function(t,n){var r=this.skipSpace(t,n);if(r<0)return r;var s=this.directive(t,r);if(s>=0)return this.checkDot(t,s);var s=this.statement(t,r);return s>=0?this.checkDot(t,s):s}},{key:"tok",value:function(t,n,r){if(n.slice(r,r+1)=="@")var r=r+1;else if(jr(this.keywords,t)<0)return-1;var s=r+Br(t);return n.slice(r,s)==t&&Bp.indexOf(n.charAt(s))>=0?s:-1}},{key:"directive",value:function(t,n){var u=this.skipSpace(t,n);if(u<0)return u;var r=new fr([]),u=this.tok("bind",t,n);if(u>0)throw ut(this._thisDoc,this.lines,t,n,"keyword bind is obsolete: use @prefix");var u=this.tok("keywords",t,n);if(u>0){var n=this.commaSeparatedList(t,u,r,!1);if(n<0)throw ut(this._thisDoc,this.lines,t,n,"'@keywords' needs comma separated list of words");return this.setKeywords(Vs(r,null,null)),n}var u=this.tok("forAll",t,n);if(u>0){var n=this.commaSeparatedList(t,u,r,!0);if(n<0)throw ut(this._thisDoc,this.lines,t,n,"Bad variable list after @forAll");var s=new Oa(r);try{for(;;){var a=s.next();(jr(this._variables,a)<0||jr(this._parentVariables,a)>=0)&&(this._variables[a]=this._context.newUniversal(a))}}catch(d){if(d!=Wi)throw d}return n}var u=this.tok("forSome",t,n);if(u>0){var n=this.commaSeparatedList(t,u,r,this.uri_ref2);if(n<0)throw ut(this._thisDoc,this.lines,t,n,"Bad variable list after @forSome");var s=new Oa(r);try{for(;;){var a=s.next();this._context.declareExistential(a)}}catch(h){if(h!=Wi)throw h}return n}var u=this.tok("prefix",t,n);if(u>=0){var l=new fr([]),n=this.qname(t,u,l);if(n<0)throw ut(this._thisDoc,this.lines,t,u,"expected qname after @prefix");var u=this.uri_ref2(t,n,l);if(u<0)throw ut(this._thisDoc,this.lines,t,n,"expected <uriref> after @prefix _qname_");var o=l[1].uri;if(this._baseURI)var o=Hs(this._baseURI,o);else Jn(o.indexOf(":")>=0,"With no base URI, cannot handle relative URI for NS");return Jn(o.indexOf(":")>=0),this._bindings[l[0][0]]=o,this.bind(l[0][0],E2(o)),u}var u=this.tok("base",t,n);if(u>=0){var l=new fr([]),n=this.uri_ref2(t,u,l);if(n<0)throw ut(this._thisDoc,this.lines,t,u,"expected <uri> after @base ");var o=l[0].uri;if(this._baseURI)var o=Hs(this._baseURI,o);else throw ut(this._thisDoc,this.lines,t,u,"With no previous base URI, cannot use relative URI in @base  <"+o+">");return Jn(o.indexOf(":")>=0),this._baseURI=o,n}return-1}},{key:"bind",value:function(t,n){t==""||this._store.setPrefixForURI(t,n)}},{key:"setKeywords",value:function(t){t==null?this.keywordsSet=0:(this.keywords=t,this.keywordsSet=1)}},{key:"startDoc",value:function(){}},{key:"endDoc",value:function(){return this.hasNil&&this._store.rdfFactory.supports.COLLECTIONS&&w2(this._store,this.source),this._formula}},{key:"makeStatement",value:function(t){t[0].add(t[2],t[1],t[3],this.source),(t[2].uri&&t[2].uri===Gu||t[3].uri&&t[3].uri===Gu)&&(this.hasNil=!0),this.statementCount+=1}},{key:"statement",value:function(t,s){var r=new fr([]),s=this.object(t,s,r);if(s<0)return s;var a=this.property_list(t,s,r[0]);if(a<0)throw ut(this._thisDoc,this.lines,t,s,"expected propertylist");return a}},{key:"subject",value:function(t,n,r){return this.item(t,n,r)}},{key:"verb",value:function(t,n,r){var a=this.skipSpace(t,n);if(a<0)return a;var s=new fr([]),a=this.tok("has",t,n);if(a>=0){var n=this.prop(t,a,s);if(n<0)throw ut(this._thisDoc,this.lines,t,a,"expected property after 'has'");return r.push(new ur(["->",s[0]])),n}var a=this.tok("is",t,n);if(a>=0){var n=this.prop(t,a,s);if(n<0)throw ut(this._thisDoc,this.lines,t,a,"expected <property> after 'is'");var a=this.skipSpace(t,n);if(a<0)throw ut(this._thisDoc,this.lines,t,n,"End of file found, expected property after 'is'");var n=a,a=this.tok("of",t,n);if(a<0)throw ut(this._thisDoc,this.lines,t,n,"expected 'of' after 'is' <prop>");return r.push(new ur(["<-",s[0]])),a}var a=this.tok("a",t,n);if(a>=0)return r.push(new ur(["->",this._store.sym(C2)])),a;if(t.slice(n,n+2)=="<=")return r.push(new ur(["<-",this._store.sym(xs+"implies")])),n+2;if(t.slice(n,n+1)=="=")return t.slice(n+1,n+2)==">"?(r.push(new ur(["->",this._store.sym(xs+"implies")])),n+2):(r.push(new ur(["->",this._store.sym(Qu)])),n+1);if(t.slice(n,n+2)==":=")return r.push(new ur(["->",xs+"becomes"])),n+2;var a=this.prop(t,n,s);if(a>=0)return r.push(new ur(["->",s[0]])),a;if(t.slice(n,n+2)==">-"||t.slice(n,n+2)=="<-")throw ut(this._thisDoc,this.lines,t,a,">- ... -> syntax is obsolete.");return-1}},{key:"prop",value:function(t,n,r){return this.item(t,n,r)}},{key:"item",value:function(t,n,r){return this.path(t,n,r)}},{key:"blankNode",value:function(t){return this._context.bnode(t,this._reason2)}},{key:"path",value:function(t,n,r){var s=this.nodeOrLiteral(t,n,r);if(s<0)return s;for(;"!^.".indexOf(t.slice(s,s+1))>=0;){var a=t.slice(s,s+1);if(a=="."){var l=t.slice(s+1,s+2);if(!l||Kn.indexOf(l)>=0&&":?<[{(".indexOf(l)<0)break}var o=r.pop(),u=this.blankNode(this.here(s)),s=this.node(t,s+1,r);if(s<0)throw ut(this._thisDoc,this.lines,t,s,"EOF found in middle of path syntax");var f=r.pop();a=="^"?this.makeStatement(new ur([this._context,f,u,o])):this.makeStatement(new ur([this._context,f,o,u])),r.push(u)}return s}},{key:"anonymousNode",value:function(t){var n=this._anonymousNodes[t];if(n)return n;var n=this._store.bnode(t);return this._anonymousNodes[t]=n,n}},{key:"node",value:function(t,l,r,s){typeof s>"u"&&(s=null);var a=s,E=this.skipSpace(t,l);if(E<0)return E;var l=E,o=t.slice(l,l+1);if(o=="["){var u=this.here(l),E=this.skipSpace(t,l+1);if(E<0)throw ut(this._thisDoc,this.lines,t,l,"EOF after '['");if(t.slice(E,E+1)=="="){var l=E+1,f=new fr([]),E=this.objectList(t,l,f);if(E>=0){var a=f[0];if(Br(f)>1){var d=new Oa(f);try{for(;;){var h=d.next();this.makeStatement(new ur([this._context,this._store.sym(Qu),a,h]))}}catch(P){if(P!=Wi)throw P}}var E=this.skipSpace(t,E);if(E<0)throw ut(this._thisDoc,this.lines,t,l,"EOF when objectList expected after [ = ");if(t.slice(E,E+1)==";")var E=E+1}else throw ut(this._thisDoc,this.lines,t,l,"objectList expected after [= ")}if(a==null)var a=this.blankNode(u);var l=this.property_list(t,E,a);if(l<0)throw ut(this._thisDoc,this.lines,t,E,"property_list expected");var E=this.skipSpace(t,l);if(E<0)throw ut(this._thisDoc,this.lines,t,l,"EOF when ']' expected after [ <propertyList>");if(t.slice(E,E+1)!="]")throw ut(this._thisDoc,this.lines,t,E,"']' expected");return r.push(a),E+1}if(o=="{"){var c=t.slice(l+1,l+2);if(c=="$"){l+=1;for(var E=l+1,p=new fr([]),_=!0;;){var l=this.skipSpace(t,E);if(l<0)throw ut(this._thisDoc,this.lines,t,l,"needed '$}', found end.");if(t.slice(l,l+2)=="$}"){var E=l+2;break}if(_)var _=!1;else if(t.slice(l,l+1)==",")l+=1;else throw ut(this._thisDoc,this.lines,t,l,"expected: ','");var v=new fr([]),E=this.item(t,l,v);if(E<0)throw ut(this._thisDoc,this.lines,t,l,"expected item in set or '$}'");p.push(v[0])}return r.push(this._store.newSet(p,this._context)),E}else{var E=l+1,D=this._parentContext;this._parentContext=this._context;var U=this._anonymousNodes,T=this._parentVariables;this._parentVariables=this._variables,this._anonymousNodes=new Xi([]),this._variables=this._variables.slice();var N=this._reason2;if(this._reason2=A2,a==null)var a=this._store.formula();for(this._context=a;;){var l=this.skipSpace(t,E);if(l<0)throw ut(this._thisDoc,this.lines,t,l,"needed '}', found end.");if(t.slice(l,l+1)=="}"){var E=l+1;break}var E=this.directiveOrStatement(t,l);if(E<0)throw ut(this._thisDoc,this.lines,t,l,"expected statement or '}'")}return this._anonymousNodes=U,this._variables=this._parentVariables,this._parentVariables=T,this._context=this._parentContext,this._reason2=N,this._parentContext=D,r.push(a.close()),E}}if(o=="("){var g=this._store.list,c=t.slice(l+1,l+2);if(c=="$"){var g=this._store.newSet;l+=1}for(var E=l+1,p=new fr([]);;){var l=this.skipSpace(t,E);if(l<0)throw ut(this._thisDoc,this.lines,t,l,"needed ')', found end.");if(t.slice(l,l+1)==")"){var E=l+1;break}var v=new fr([]),E=this.item(t,l,v);if(E<0)throw ut(this._thisDoc,this.lines,t,l,"expected item in list or ')'");p.push(v[0])}return r.push(g(p,this._context)),E}var E=this.tok("this",t,l);if(E>=0)throw ut(this._thisDoc,this.lines,t,l,"Keyword 'this' was ancient N3. Now use @forSome and @forAll keywords.");var E=this.tok("true",t,l);if(E>=0)return r.push(!0),E;var E=this.tok("false",t,l);if(E>=0)return r.push(!1),E;if(a==null){var E=this.uri_ref2(t,l,r);if(E>=0)return E}return-1}},{key:"property_list",value:function(t,n,r){for(;;){var c=this.skipSpace(t,n);if(c<0)throw ut(this._thisDoc,this.lines,t,n,"EOF found when expected verb in property list");if(t.slice(c,c+2)==":-"){var n=c+2,s=new fr([]),c=this.node(t,n,s,r);if(c<0)throw ut(this._thisDoc,this.lines,t,n,"bad {} or () or [] node after :- ");var n=c;continue}var n=c,a=new fr([]),c=this.verb(t,n,a);if(c<=0)return n;var l=new fr([]),n=this.objectList(t,c,l);if(n<0)throw ut(this._thisDoc,this.lines,t,c,"objectList expected");var o=new Oa(l);try{for(;;){var u=o.next(),f=a[0],d=f[0],h=f[1];d=="->"?this.makeStatement(new ur([this._context,h,r,u])):this.makeStatement(new ur([this._context,h,u,r]))}}catch(_){if(_!=Wi)throw _}var c=this.skipSpace(t,n);if(c<0)throw ut(this._thisDoc,this.lines,t,c,"EOF found in list of objects");if(t.slice(n,n+1)!=";")return n;var n=n+1}}},{key:"commaSeparatedList",value:function(t,n,r,s){var a=this.skipSpace(t,n);if(a<0)throw ut(this._thisDoc,this.lines,t,a,"EOF found expecting comma sep list");if(t.charAt(a)==".")return n;if(s)var a=this.uri_ref2(t,a,r);else var a=this.bareWord(t,a,r);if(a<0)return-1;for(;;){var n=this.skipSpace(t,a);if(n<0)return n;var l=t.slice(n,n+1);if(l!=",")return l!="."?-1:n;if(s)var a=this.uri_ref2(t,n+1,r);else var a=this.bareWord(t,n+1,r);if(a<0)throw ut(this._thisDoc,this.lines,t,a,"bad list content")}}},{key:"objectList",value:function(t,s,r){var s=this.object(t,s,r);if(s<0)return-1;for(;;){var a=this.skipSpace(t,s);if(a<0)throw ut(this._thisDoc,this.lines,t,a,"EOF found after object");if(t.slice(a,a+1)!=",")return a;var s=this.object(t,a+1,r);if(s<0)return s}}},{key:"checkDot",value:function(t,n){var r=this.skipSpace(t,n);if(r<0)return r;if(t.slice(r,r+1)==".")return r+1;if(t.slice(r,r+1)=="}"||t.slice(r,r+1)=="]")return r;throw ut(this._thisDoc,this.lines,t,r,"expected '.' or '}' or ']' at end of statement")}},{key:"uri_ref2",value:function(t,h,r){var s=new fr([]),a=this.qname(t,h,s);if(a>=0){var l=s[0],o=l[0],u=l[1];if(o==null){Jn(0,"not used?");var f=this._baseURI+T2}else{var f=this._bindings[o];if(!f){if(o=="_")return r.push(this.anonymousNode(u)),a;throw ut(this._thisDoc,this.lines,t,h,"Prefix "+o+" not bound.")}}var d=this._store.sym(f+u);return jr(this._variables,d)>=0?r.push(this._variables[d]):r.push(d),a}var h=this.skipSpace(t,h);if(h<0)return-1;if(t.charAt(h)=="?"){var c=new fr([]),a=this.variable(t,h,c);return a>0?(r.push(c[0]),a):-1}else if(t.charAt(h)=="<"){for(var h=h+1,p=h;h<Br(t);){if(t.charAt(h)==">"){var _=t.slice(p,h);if(this._baseURI)var _=Hs(this._baseURI,_);else Jn(_.indexOf(":")>=0,"With no base URI, cannot deal with relative URIs");if(t.slice(h-1,h)=="#"&&Vs(_,-1,null)!="#")var _=_+"#";var d=this._store.sym(_);return jr(this._variables,d)>=0?r.push(this._variables[d]):r.push(d),h+1}var h=h+1}throw ut(this._thisDoc,this.lines,t,a,"unterminated URI reference")}else if(this.keywordsSet){var c=new fr([]),a=this.bareWord(t,h,c);if(a<0)return-1;if(jr(this.keywords,c[0])>=0)throw ut(this._thisDoc,this.lines,t,h,'Keyword "'+c[0]+'" not allowed here.');return r.push(this._store.sym(this._bindings[""]+c[0])),a}else return-1}},{key:"skipSpace",value:function(t,n){for(var r=` 
\r	\f\v            ​\u2028\u2029　`,s=n||0;s<t.length;s++){var a=t.charAt(s);if(r.indexOf(a)<0)if(t.charAt(s)==="#")for(;;s++){if(s===t.length)return-1;if(t.charAt(s)===`
`){this.lines=this.lines+1;break}}else return s;else t.charAt(s)===`
`&&(this.lines=this.lines+1)}return-1}},{key:"variable",value:function(t,a,r){var s=this.skipSpace(t,a);if(s<0||t.slice(s,s+1)!="?")return-1;var s=s+1,a=s;if("0123456789-".indexOf(t.charAt(s))>=0)throw ut(this._thisDoc,this.lines,t,s,"Varible name can't start with '"+t.charAt(s)+"s'");for(;a<Br(t)&&Kn.indexOf(t.charAt(a))<0;)var a=a+1;if(this._parentContext==null)throw ut(this._thisDoc,this.lines,t,s,"Can't use ?xxx syntax for variable in outermost level: "+t.slice(s-1,a));return r.push(this._store.variable(t.slice(s,a))),a}},{key:"bareWord",value:function(t,l,r){var s=this.skipSpace(t,l);if(s<0)return-1;var a=t.charAt(s);if("0123456789-".indexOf(a)>=0||Kn.indexOf(a)>=0)return-1;for(var l=s;l<Br(t)&&Kn.indexOf(t.charAt(l))<0;)var l=l+1;return r.push(t.slice(s,l)),l}},{key:"qname",value:function(t,s,r){var s=this.skipSpace(t,s);if(s<0)return-1;var a=t.charAt(s);if("0123456789-+".indexOf(a)>=0)return-1;if(Kn.indexOf(a)<0)for(var l=a,s=s+1;s<Br(t);){var a=t.charAt(s);if(Kn.indexOf(a)<0)var l=l+a,s=s+1;else break}else var l="";if(s<Br(t)&&t.charAt(s)==":"){for(var o=l,s=s+1,l="";s<Br(t);){var a=t.charAt(s);if(Kn.indexOf(a)<0)var l=l+a,s=s+1;else break}return r.push(new ur([o,l])),s}else return l&&this.keywordsSet&&jr(this.keywords,l)<0?(r.push(new ur(["",l])),s):-1}},{key:"object",value:function(t,n,r){var s=this.subject(t,n,r);if(s>=0)return s;var s=this.skipSpace(t,n);if(s<0)return-1;var n=s,a=null,l=t.charAt(n);if(l=='"'||l=="'"){t.slice(n,n+3==l+l)?a=l+l+l:a=l;var n=n+Br(a),o=this.strconst(t,n,a),s=o[0],u=o[1];return r.push(this._store.literal(u)),s}else return-1}},{key:"nodeOrLiteral",value:function(t,n,r){var s=this.node(t,n,r);if(s>=0)return s;var s=this.skipSpace(t,n);if(s<0)return-1;var n=s,a=t.charAt(n);if("-+0987654321".indexOf(a)>=0){Wu.lastIndex=0;var l=Wu.exec(t.slice(n));if(l!=null){var o=l[0];s=n+o.length,o.indexOf("T")>=0?r.push(this._store.literal(o,this._store.sym(R2))):r.push(this._store.literal(o,this._store.sym(I2)))}else{$s.lastIndex=0;var l=$s.exec(t.slice(n));if(l==null)throw ut(this._thisDoc,this.lines,t,n,"Bad number or date syntax");s=n+$s.lastIndex;var o=t.slice(n,s);o.indexOf("e")>=0?r.push(this._store.literal(parseFloat(o),this._store.sym(S2))):t.slice(n,s).indexOf(".")>=0?r.push(this._store.literal(parseFloat(o),this._store.sym(P2))):r.push(this._store.literal(parseInt(o),this._store.sym(N2)))}return s}if(t.charAt(n)=='"'){if(t.slice(n,n+3)=='"""')var u='"""';else var u='"';var n=n+Br(u),f=null,d=this.strconst(t,n,u),s=d[0],h=d[1],c=null;if(t.slice(s,s+1)=="@"){Gs.lastIndex=0;var l=Gs.exec(t.slice(s+1));if(l==null)throw ut(this._thisDoc,startline,t,n,"Bad language code syntax on string literal, after @");var n=Gs.lastIndex+s+1,c=t.slice(s+1,n),s=n}if(t.slice(s,s+2)=="^^")var p=new fr([]),s=this.uri_ref2(t,s+2,p),f=p[0];return r.push(this._store.literal(h,c||f)),s}else return-1}},{key:"strconst",value:function(t,n,r){for(var s=n,a="",l=this.lines;s<Br(t);){var n=s+Br(r);if(t.slice(s,n)==r)return new ur([n,a]);if(t.charAt(s)=='"'){var a=a+'"',s=s+1;continue}Xs.lastIndex=0;var o=Xs.exec(t.slice(s));if(!o)throw ut(this._thisDoc,l,t,s,"Closing quote missing in string at ^ in "+t.slice(s-20,s)+"^"+t.slice(s,s+20));var n=s+Xs.lastIndex-1,a=a+t.slice(s,n),u=t.charAt(n);if(u=='"'){var s=n;continue}else if(u=="\r"){var s=n+1;continue}else if(u==`
`){if(r=='"')throw ut(this._thisDoc,l,t,n,"newline found in string literal");this.lines=this.lines+1;var a=a+u,s=n+1;this.previousLine=this.startOfLine,this.startOfLine=s}else if(u=="\\"){var s=n+1,u=t.slice(s,s+1);if(!u)throw ut(this._thisDoc,l,t,n,"unterminated string literal (2)");var f=zs('abfrtvn\\"',u);if(f>=0)var d=`a\b\f\r	\v
\\"`.charAt(f),a=a+d,s=s+1;else if(u=="u")var h=this.uEscape(t,s+1,l),s=h[0],u=h[1],a=a+u;else if(u=="U")var h=this.UEscape(t,s+1,l),s=h[0],u=h[1],a=a+u;else throw ut(this._thisDoc,this.lines,t,n,"bad escape")}}throw ut(this._thisDoc,this.lines,t,n,"unterminated string literal")}},{key:"uEscape",value:function(t,n,r){for(var s=n,a=0,l=0;a<4;){var o=t.slice(s,s+1),u=o.toLowerCase(),s=s+1;if(u=="")throw ut(this._thisDoc,r,t,n,"unterminated string literal(3)");var f=zs("0123456789abcdef",u);if(f<0)throw ut(this._thisDoc,r,t,n,"bad string literal hex escape");var l=l*16+f,a=a+1}var d=String.fromCharCode(l);return new ur([s,d])}},{key:"UEscape",value:function(t,n,r){for(var s=n,a=0,l="\\U";a<8;){var o=t.slice(s,s+1),u=o.toLowerCase(),s=s+1;if(u=="")throw ut(this._thisDoc,r,t,n,"unterminated string literal(3)");var f=zs("0123456789abcdef",u);if(f<0)throw ut(this._thisDoc,r,t,n,"bad string literal hex escape");var l=l+u,a=a+1}var d=k2("0x"+Vs(l,2,10)-0);return new ur([s,d])}}])}();function ut(i,e,t,n,r){var s=e+1,a="Line "+s+" of <"+i+">: Bad syntax: "+r+`
at: "`+t.slice(n,n+30)+'"',l=new SyntaxError(a,i,s);return l.lineNo=s,l.characterInFile=n,l.syntaxProblem=r,l}function Yu(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function Ju(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Yu(Object(t),!0).forEach(function(n){Ue(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Yu(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}var gl=Ju(Ju({},xr),{},{supports:Ue(Ue(Ue(Ue(Ue(Ue(Ue({},Dr.collections,!0),Dr.defaultGraphType,!1),Dr.equalsMethod,!0),Dr.identity,!1),Dr.id,!0),Dr.reversibleId,!1),Dr.variableType,!0),collection:function(e){return new On(e)},id:function(e){var t=this;return Ll(e)?"( ".concat(e.elements.map(function(n){return t.id(n)}).join(", ")," )"):cg(e)?si.toString(e):xr.id(e)},termToNQ:function(e){return e.termType===Mn?On.toNT(e):xr.termToNQ(e)}});function Wl(i,e){return typeof e=="string"?i.rdfFactory.literal(e):Object.prototype.hasOwnProperty.call(e,"@list")?i.rdfFactory.supports.COLLECTIONS===!0?B2(i,e["@list"]):O2(i,e):Object.prototype.hasOwnProperty.call(e,"@id")?Yl(i,e):Object.prototype.hasOwnProperty.call(e,"@language")?i.rdfFactory.literal(e["@value"],e["@language"]):Object.prototype.hasOwnProperty.call(e,"@type")?i.rdfFactory.literal(e["@value"],i.rdfFactory.namedNode(e["@type"])):Object.prototype.hasOwnProperty.call(e,"@value")?i.rdfFactory.literal(e["@value"]):i.rdfFactory.literal(e)}function O2(i,e){var t=e["@id"]?Yl(i,e):i.rdfFactory.blankNode(),n=e["@list"].map(function(s){return Wl(i,s)}),r=Pp(i.rdfFactory,t,n);return i.addAll(r),t}function B2(i,e){if(!Array.isArray(e))throw new TypeError("Object must be an array");return i.rdfFactory.collection(e.map(function(t){return Wl(i,t)}))}function Lp(i,e,t,n){var r=t&&Object.prototype.hasOwnProperty.call(t,"termType")?t.value:t;return ov(()=>import("../chunks/jsonld.CYnguqZs.js").then(s=>s.j),__vite__mapDeps([0,1,2]),import.meta.url).then(function(s){return s.flatten(JSON.parse(i),null,{base:r})}).then(function(s){return s.reduce(function(a,l){return e=Up(e,t,l),e},e)}).then(n).catch(n)}function Yl(i,e){return e["@id"].startsWith("_:")?i.rdfFactory.blankNode(e["@id"].substring(2)):i.rdfFactory.namedNode(e["@id"])}function Up(i,e,t){for(var n=t["@id"]?Yl(i,t):i.rdfFactory.blankNode(),r=0,s=Object.keys(t);r<s.length;r++){var a=s[r];if(a!=="@id"){if(a=="@graph")for(var l=n,o=t[a],u=0;u<o.length;u++)i=Up(i,l,o[u]);var f=t[a];if(Array.isArray(f))for(var d=0;d<f.length;d++)i.addStatement(Ku(i,n,a,f[d],e));else i.addStatement(Ku(i,n,a,f,e))}}return i}function Ku(i,e,t,n,r){var s,a;return t==="@type"?(s=i.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),a=i.rdfFactory.namedNode(n)):(s=i.rdfFactory.namedNode(t),a=Wl(i,n)),i.rdfFactory.quad(e,s,a,i.rdfFactory.namedNode(r))}var jp={},_s={};_s.byteLength=j2;_s.toByteArray=M2;_s.fromByteArray=z2;var tn=[],Ur=[],L2=typeof Uint8Array<"u"?Uint8Array:Array,Qs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var mi=0,U2=Qs.length;mi<U2;++mi)tn[mi]=Qs[mi],Ur[Qs.charCodeAt(mi)]=mi;Ur[45]=62;Ur[95]=63;function qp(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=i.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function j2(i){var e=qp(i),t=e[0],n=e[1];return(t+n)*3/4-n}function q2(i,e,t){return(e+t)*3/4-t}function M2(i){var e,t=qp(i),n=t[0],r=t[1],s=new L2(q2(i,n,r)),a=0,l=r>0?n-4:n,o;for(o=0;o<l;o+=4)e=Ur[i.charCodeAt(o)]<<18|Ur[i.charCodeAt(o+1)]<<12|Ur[i.charCodeAt(o+2)]<<6|Ur[i.charCodeAt(o+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return r===2&&(e=Ur[i.charCodeAt(o)]<<2|Ur[i.charCodeAt(o+1)]>>4,s[a++]=e&255),r===1&&(e=Ur[i.charCodeAt(o)]<<10|Ur[i.charCodeAt(o+1)]<<4|Ur[i.charCodeAt(o+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function x2(i){return tn[i>>18&63]+tn[i>>12&63]+tn[i>>6&63]+tn[i&63]}function V2(i,e,t){for(var n,r=[],s=e;s<t;s+=3)n=(i[s]<<16&16711680)+(i[s+1]<<8&65280)+(i[s+2]&255),r.push(x2(n));return r.join("")}function z2(i){for(var e,t=i.length,n=t%3,r=[],s=16383,a=0,l=t-n;a<l;a+=s)r.push(V2(i,a,a+s>l?l:a+s));return n===1?(e=i[t-1],r.push(tn[e>>2]+tn[e<<4&63]+"==")):n===2&&(e=(i[t-2]<<8)+i[t-1],r.push(tn[e>>10]+tn[e>>4&63]+tn[e<<2&63]+"=")),r.join("")}var Jl={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Jl.read=function(i,e,t,n,r){var s,a,l=r*8-n-1,o=(1<<l)-1,u=o>>1,f=-7,d=t?r-1:0,h=t?-1:1,c=i[e+d];for(d+=h,s=c&(1<<-f)-1,c>>=-f,f+=l;f>0;s=s*256+i[e+d],d+=h,f-=8);for(a=s&(1<<-f)-1,s>>=-f,f+=n;f>0;a=a*256+i[e+d],d+=h,f-=8);if(s===0)s=1-u;else{if(s===o)return a?NaN:(c?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-u}return(c?-1:1)*a*Math.pow(2,s-n)};Jl.write=function(i,e,t,n,r,s){var a,l,o,u=s*8-r-1,f=(1<<u)-1,d=f>>1,h=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=n?0:s-1,p=n?1:-1,_=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(o=Math.pow(2,-a))<1&&(a--,o*=2),a+d>=1?e+=h/o:e+=h*Math.pow(2,1-d),e*o>=2&&(a++,o/=2),a+d>=f?(l=0,a=f):a+d>=1?(l=(e*o-1)*Math.pow(2,r),a=a+d):(l=e*Math.pow(2,d-1)*Math.pow(2,r),a=0));r>=8;i[t+c]=l&255,c+=p,l/=256,r-=8);for(a=a<<r|l,u+=r;u>0;i[t+c]=a&255,c+=p,a/=256,u-=8);i[t+c-p]|=_*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){const e=_s,t=Jl,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=l,i.SlowBuffer=U,i.INSPECT_MAX_BYTES=50;const r=2147483647;i.kMaxLength=r,l.TYPED_ARRAY_SUPPORT=s(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const X=new Uint8Array(1),S={foo:function(){return 42}};return Object.setPrototypeOf(S,Uint8Array.prototype),Object.setPrototypeOf(X,S),X.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function a(X){if(X>r)throw new RangeError('The value "'+X+'" is invalid for option "size"');const S=new Uint8Array(X);return Object.setPrototypeOf(S,l.prototype),S}function l(X,S,F){if(typeof X=="number"){if(typeof S=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(X)}return o(X,S,F)}l.poolSize=8192;function o(X,S,F){if(typeof X=="string")return h(X,S);if(ArrayBuffer.isView(X))return p(X);if(X==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof X);if(He(X,ArrayBuffer)||X&&He(X.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(He(X,SharedArrayBuffer)||X&&He(X.buffer,SharedArrayBuffer)))return _(X,S,F);if(typeof X=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const K=X.valueOf&&X.valueOf();if(K!=null&&K!==X)return l.from(K,S,F);const fe=v(X);if(fe)return fe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof X[Symbol.toPrimitive]=="function")return l.from(X[Symbol.toPrimitive]("string"),S,F);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof X)}l.from=function(X,S,F){return o(X,S,F)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function u(X){if(typeof X!="number")throw new TypeError('"size" argument must be of type number');if(X<0)throw new RangeError('The value "'+X+'" is invalid for option "size"')}function f(X,S,F){return u(X),X<=0?a(X):S!==void 0?typeof F=="string"?a(X).fill(S,F):a(X).fill(S):a(X)}l.alloc=function(X,S,F){return f(X,S,F)};function d(X){return u(X),a(X<0?0:D(X)|0)}l.allocUnsafe=function(X){return d(X)},l.allocUnsafeSlow=function(X){return d(X)};function h(X,S){if((typeof S!="string"||S==="")&&(S="utf8"),!l.isEncoding(S))throw new TypeError("Unknown encoding: "+S);const F=T(X,S)|0;let K=a(F);const fe=K.write(X,S);return fe!==F&&(K=K.slice(0,fe)),K}function c(X){const S=X.length<0?0:D(X.length)|0,F=a(S);for(let K=0;K<S;K+=1)F[K]=X[K]&255;return F}function p(X){if(He(X,Uint8Array)){const S=new Uint8Array(X);return _(S.buffer,S.byteOffset,S.byteLength)}return c(X)}function _(X,S,F){if(S<0||X.byteLength<S)throw new RangeError('"offset" is outside of buffer bounds');if(X.byteLength<S+(F||0))throw new RangeError('"length" is outside of buffer bounds');let K;return S===void 0&&F===void 0?K=new Uint8Array(X):F===void 0?K=new Uint8Array(X,S):K=new Uint8Array(X,S,F),Object.setPrototypeOf(K,l.prototype),K}function v(X){if(l.isBuffer(X)){const S=D(X.length)|0,F=a(S);return F.length===0||X.copy(F,0,0,S),F}if(X.length!==void 0)return typeof X.length!="number"||We(X.length)?a(0):c(X);if(X.type==="Buffer"&&Array.isArray(X.data))return c(X.data)}function D(X){if(X>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return X|0}function U(X){return+X!=X&&(X=0),l.alloc(+X)}l.isBuffer=function(S){return S!=null&&S._isBuffer===!0&&S!==l.prototype},l.compare=function(S,F){if(He(S,Uint8Array)&&(S=l.from(S,S.offset,S.byteLength)),He(F,Uint8Array)&&(F=l.from(F,F.offset,F.byteLength)),!l.isBuffer(S)||!l.isBuffer(F))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(S===F)return 0;let K=S.length,fe=F.length;for(let ye=0,ke=Math.min(K,fe);ye<ke;++ye)if(S[ye]!==F[ye]){K=S[ye],fe=F[ye];break}return K<fe?-1:fe<K?1:0},l.isEncoding=function(S){switch(String(S).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(S,F){if(!Array.isArray(S))throw new TypeError('"list" argument must be an Array of Buffers');if(S.length===0)return l.alloc(0);let K;if(F===void 0)for(F=0,K=0;K<S.length;++K)F+=S[K].length;const fe=l.allocUnsafe(F);let ye=0;for(K=0;K<S.length;++K){let ke=S[K];if(He(ke,Uint8Array))ye+ke.length>fe.length?(l.isBuffer(ke)||(ke=l.from(ke)),ke.copy(fe,ye)):Uint8Array.prototype.set.call(fe,ke,ye);else if(l.isBuffer(ke))ke.copy(fe,ye);else throw new TypeError('"list" argument must be an Array of Buffers');ye+=ke.length}return fe};function T(X,S){if(l.isBuffer(X))return X.length;if(ArrayBuffer.isView(X)||He(X,ArrayBuffer))return X.byteLength;if(typeof X!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof X);const F=X.length,K=arguments.length>2&&arguments[2]===!0;if(!K&&F===0)return 0;let fe=!1;for(;;)switch(S){case"ascii":case"latin1":case"binary":return F;case"utf8":case"utf-8":return Ut(X).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F*2;case"hex":return F>>>1;case"base64":return Xt(X).length;default:if(fe)return K?-1:Ut(X).length;S=(""+S).toLowerCase(),fe=!0}}l.byteLength=T;function N(X,S,F){let K=!1;if((S===void 0||S<0)&&(S=0),S>this.length||((F===void 0||F>this.length)&&(F=this.length),F<=0)||(F>>>=0,S>>>=0,F<=S))return"";for(X||(X="utf8");;)switch(X){case"hex":return G(this,S,F);case"utf8":case"utf-8":return A(this,S,F);case"ascii":return se(this,S,F);case"latin1":case"binary":return Z(this,S,F);case"base64":return P(this,S,F);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,S,F);default:if(K)throw new TypeError("Unknown encoding: "+X);X=(X+"").toLowerCase(),K=!0}}l.prototype._isBuffer=!0;function g(X,S,F){const K=X[S];X[S]=X[F],X[F]=K}l.prototype.swap16=function(){const S=this.length;if(S%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let F=0;F<S;F+=2)g(this,F,F+1);return this},l.prototype.swap32=function(){const S=this.length;if(S%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let F=0;F<S;F+=4)g(this,F,F+3),g(this,F+1,F+2);return this},l.prototype.swap64=function(){const S=this.length;if(S%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let F=0;F<S;F+=8)g(this,F,F+7),g(this,F+1,F+6),g(this,F+2,F+5),g(this,F+3,F+4);return this},l.prototype.toString=function(){const S=this.length;return S===0?"":arguments.length===0?A(this,0,S):N.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(S){if(!l.isBuffer(S))throw new TypeError("Argument must be a Buffer");return this===S?!0:l.compare(this,S)===0},l.prototype.inspect=function(){let S="";const F=i.INSPECT_MAX_BYTES;return S=this.toString("hex",0,F).replace(/(.{2})/g,"$1 ").trim(),this.length>F&&(S+=" ... "),"<Buffer "+S+">"},n&&(l.prototype[n]=l.prototype.inspect),l.prototype.compare=function(S,F,K,fe,ye){if(He(S,Uint8Array)&&(S=l.from(S,S.offset,S.byteLength)),!l.isBuffer(S))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof S);if(F===void 0&&(F=0),K===void 0&&(K=S?S.length:0),fe===void 0&&(fe=0),ye===void 0&&(ye=this.length),F<0||K>S.length||fe<0||ye>this.length)throw new RangeError("out of range index");if(fe>=ye&&F>=K)return 0;if(fe>=ye)return-1;if(F>=K)return 1;if(F>>>=0,K>>>=0,fe>>>=0,ye>>>=0,this===S)return 0;let ke=ye-fe,Pe=K-F;const Xe=Math.min(ke,Pe),Ze=this.slice(fe,ye),ct=S.slice(F,K);for(let mt=0;mt<Xe;++mt)if(Ze[mt]!==ct[mt]){ke=Ze[mt],Pe=ct[mt];break}return ke<Pe?-1:Pe<ke?1:0};function E(X,S,F,K,fe){if(X.length===0)return-1;if(typeof F=="string"?(K=F,F=0):F>2147483647?F=2147483647:F<-2147483648&&(F=-2147483648),F=+F,We(F)&&(F=fe?0:X.length-1),F<0&&(F=X.length+F),F>=X.length){if(fe)return-1;F=X.length-1}else if(F<0)if(fe)F=0;else return-1;if(typeof S=="string"&&(S=l.from(S,K)),l.isBuffer(S))return S.length===0?-1:b(X,S,F,K,fe);if(typeof S=="number")return S=S&255,typeof Uint8Array.prototype.indexOf=="function"?fe?Uint8Array.prototype.indexOf.call(X,S,F):Uint8Array.prototype.lastIndexOf.call(X,S,F):b(X,[S],F,K,fe);throw new TypeError("val must be string, number or Buffer")}function b(X,S,F,K,fe){let ye=1,ke=X.length,Pe=S.length;if(K!==void 0&&(K=String(K).toLowerCase(),K==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(X.length<2||S.length<2)return-1;ye=2,ke/=2,Pe/=2,F/=2}function Xe(ct,mt){return ye===1?ct[mt]:ct.readUInt16BE(mt*ye)}let Ze;if(fe){let ct=-1;for(Ze=F;Ze<ke;Ze++)if(Xe(X,Ze)===Xe(S,ct===-1?0:Ze-ct)){if(ct===-1&&(ct=Ze),Ze-ct+1===Pe)return ct*ye}else ct!==-1&&(Ze-=Ze-ct),ct=-1}else for(F+Pe>ke&&(F=ke-Pe),Ze=F;Ze>=0;Ze--){let ct=!0;for(let mt=0;mt<Pe;mt++)if(Xe(X,Ze+mt)!==Xe(S,mt)){ct=!1;break}if(ct)return Ze}return-1}l.prototype.includes=function(S,F,K){return this.indexOf(S,F,K)!==-1},l.prototype.indexOf=function(S,F,K){return E(this,S,F,K,!0)},l.prototype.lastIndexOf=function(S,F,K){return E(this,S,F,K,!1)};function I(X,S,F,K){F=Number(F)||0;const fe=X.length-F;K?(K=Number(K),K>fe&&(K=fe)):K=fe;const ye=S.length;K>ye/2&&(K=ye/2);let ke;for(ke=0;ke<K;++ke){const Pe=parseInt(S.substr(ke*2,2),16);if(We(Pe))return ke;X[F+ke]=Pe}return ke}function C(X,S,F,K){return je(Ut(S,X.length-F),X,F,K)}function O(X,S,F,K){return je(Vt(S),X,F,K)}function k(X,S,F,K){return je(Xt(S),X,F,K)}function B(X,S,F,K){return je(St(S,X.length-F),X,F,K)}l.prototype.write=function(S,F,K,fe){if(F===void 0)fe="utf8",K=this.length,F=0;else if(K===void 0&&typeof F=="string")fe=F,K=this.length,F=0;else if(isFinite(F))F=F>>>0,isFinite(K)?(K=K>>>0,fe===void 0&&(fe="utf8")):(fe=K,K=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ye=this.length-F;if((K===void 0||K>ye)&&(K=ye),S.length>0&&(K<0||F<0)||F>this.length)throw new RangeError("Attempt to write outside buffer bounds");fe||(fe="utf8");let ke=!1;for(;;)switch(fe){case"hex":return I(this,S,F,K);case"utf8":case"utf-8":return C(this,S,F,K);case"ascii":case"latin1":case"binary":return O(this,S,F,K);case"base64":return k(this,S,F,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,S,F,K);default:if(ke)throw new TypeError("Unknown encoding: "+fe);fe=(""+fe).toLowerCase(),ke=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(X,S,F){return S===0&&F===X.length?e.fromByteArray(X):e.fromByteArray(X.slice(S,F))}function A(X,S,F){F=Math.min(X.length,F);const K=[];let fe=S;for(;fe<F;){const ye=X[fe];let ke=null,Pe=ye>239?4:ye>223?3:ye>191?2:1;if(fe+Pe<=F){let Xe,Ze,ct,mt;switch(Pe){case 1:ye<128&&(ke=ye);break;case 2:Xe=X[fe+1],(Xe&192)===128&&(mt=(ye&31)<<6|Xe&63,mt>127&&(ke=mt));break;case 3:Xe=X[fe+1],Ze=X[fe+2],(Xe&192)===128&&(Ze&192)===128&&(mt=(ye&15)<<12|(Xe&63)<<6|Ze&63,mt>2047&&(mt<55296||mt>57343)&&(ke=mt));break;case 4:Xe=X[fe+1],Ze=X[fe+2],ct=X[fe+3],(Xe&192)===128&&(Ze&192)===128&&(ct&192)===128&&(mt=(ye&15)<<18|(Xe&63)<<12|(Ze&63)<<6|ct&63,mt>65535&&mt<1114112&&(ke=mt))}}ke===null?(ke=65533,Pe=1):ke>65535&&(ke-=65536,K.push(ke>>>10&1023|55296),ke=56320|ke&1023),K.push(ke),fe+=Pe}return j(K)}const z=4096;function j(X){const S=X.length;if(S<=z)return String.fromCharCode.apply(String,X);let F="",K=0;for(;K<S;)F+=String.fromCharCode.apply(String,X.slice(K,K+=z));return F}function se(X,S,F){let K="";F=Math.min(X.length,F);for(let fe=S;fe<F;++fe)K+=String.fromCharCode(X[fe]&127);return K}function Z(X,S,F){let K="";F=Math.min(X.length,F);for(let fe=S;fe<F;++fe)K+=String.fromCharCode(X[fe]);return K}function G(X,S,F){const K=X.length;(!S||S<0)&&(S=0),(!F||F<0||F>K)&&(F=K);let fe="";for(let ye=S;ye<F;++ye)fe+=tt[X[ye]];return fe}function H(X,S,F){const K=X.slice(S,F);let fe="";for(let ye=0;ye<K.length-1;ye+=2)fe+=String.fromCharCode(K[ye]+K[ye+1]*256);return fe}l.prototype.slice=function(S,F){const K=this.length;S=~~S,F=F===void 0?K:~~F,S<0?(S+=K,S<0&&(S=0)):S>K&&(S=K),F<0?(F+=K,F<0&&(F=0)):F>K&&(F=K),F<S&&(F=S);const fe=this.subarray(S,F);return Object.setPrototypeOf(fe,l.prototype),fe};function Q(X,S,F){if(X%1!==0||X<0)throw new RangeError("offset is not uint");if(X+S>F)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(S,F,K){S=S>>>0,F=F>>>0,K||Q(S,F,this.length);let fe=this[S],ye=1,ke=0;for(;++ke<F&&(ye*=256);)fe+=this[S+ke]*ye;return fe},l.prototype.readUintBE=l.prototype.readUIntBE=function(S,F,K){S=S>>>0,F=F>>>0,K||Q(S,F,this.length);let fe=this[S+--F],ye=1;for(;F>0&&(ye*=256);)fe+=this[S+--F]*ye;return fe},l.prototype.readUint8=l.prototype.readUInt8=function(S,F){return S=S>>>0,F||Q(S,1,this.length),this[S]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(S,F){return S=S>>>0,F||Q(S,2,this.length),this[S]|this[S+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(S,F){return S=S>>>0,F||Q(S,2,this.length),this[S]<<8|this[S+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(S,F){return S=S>>>0,F||Q(S,4,this.length),(this[S]|this[S+1]<<8|this[S+2]<<16)+this[S+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(S,F){return S=S>>>0,F||Q(S,4,this.length),this[S]*16777216+(this[S+1]<<16|this[S+2]<<8|this[S+3])},l.prototype.readBigUInt64LE=ft(function(S){S=S>>>0,rt(S,"offset");const F=this[S],K=this[S+7];(F===void 0||K===void 0)&&Ae(S,this.length-8);const fe=F+this[++S]*2**8+this[++S]*2**16+this[++S]*2**24,ye=this[++S]+this[++S]*2**8+this[++S]*2**16+K*2**24;return BigInt(fe)+(BigInt(ye)<<BigInt(32))}),l.prototype.readBigUInt64BE=ft(function(S){S=S>>>0,rt(S,"offset");const F=this[S],K=this[S+7];(F===void 0||K===void 0)&&Ae(S,this.length-8);const fe=F*2**24+this[++S]*2**16+this[++S]*2**8+this[++S],ye=this[++S]*2**24+this[++S]*2**16+this[++S]*2**8+K;return(BigInt(fe)<<BigInt(32))+BigInt(ye)}),l.prototype.readIntLE=function(S,F,K){S=S>>>0,F=F>>>0,K||Q(S,F,this.length);let fe=this[S],ye=1,ke=0;for(;++ke<F&&(ye*=256);)fe+=this[S+ke]*ye;return ye*=128,fe>=ye&&(fe-=Math.pow(2,8*F)),fe},l.prototype.readIntBE=function(S,F,K){S=S>>>0,F=F>>>0,K||Q(S,F,this.length);let fe=F,ye=1,ke=this[S+--fe];for(;fe>0&&(ye*=256);)ke+=this[S+--fe]*ye;return ye*=128,ke>=ye&&(ke-=Math.pow(2,8*F)),ke},l.prototype.readInt8=function(S,F){return S=S>>>0,F||Q(S,1,this.length),this[S]&128?(255-this[S]+1)*-1:this[S]},l.prototype.readInt16LE=function(S,F){S=S>>>0,F||Q(S,2,this.length);const K=this[S]|this[S+1]<<8;return K&32768?K|4294901760:K},l.prototype.readInt16BE=function(S,F){S=S>>>0,F||Q(S,2,this.length);const K=this[S+1]|this[S]<<8;return K&32768?K|4294901760:K},l.prototype.readInt32LE=function(S,F){return S=S>>>0,F||Q(S,4,this.length),this[S]|this[S+1]<<8|this[S+2]<<16|this[S+3]<<24},l.prototype.readInt32BE=function(S,F){return S=S>>>0,F||Q(S,4,this.length),this[S]<<24|this[S+1]<<16|this[S+2]<<8|this[S+3]},l.prototype.readBigInt64LE=ft(function(S){S=S>>>0,rt(S,"offset");const F=this[S],K=this[S+7];(F===void 0||K===void 0)&&Ae(S,this.length-8);const fe=this[S+4]+this[S+5]*2**8+this[S+6]*2**16+(K<<24);return(BigInt(fe)<<BigInt(32))+BigInt(F+this[++S]*2**8+this[++S]*2**16+this[++S]*2**24)}),l.prototype.readBigInt64BE=ft(function(S){S=S>>>0,rt(S,"offset");const F=this[S],K=this[S+7];(F===void 0||K===void 0)&&Ae(S,this.length-8);const fe=(F<<24)+this[++S]*2**16+this[++S]*2**8+this[++S];return(BigInt(fe)<<BigInt(32))+BigInt(this[++S]*2**24+this[++S]*2**16+this[++S]*2**8+K)}),l.prototype.readFloatLE=function(S,F){return S=S>>>0,F||Q(S,4,this.length),t.read(this,S,!0,23,4)},l.prototype.readFloatBE=function(S,F){return S=S>>>0,F||Q(S,4,this.length),t.read(this,S,!1,23,4)},l.prototype.readDoubleLE=function(S,F){return S=S>>>0,F||Q(S,8,this.length),t.read(this,S,!0,52,8)},l.prototype.readDoubleBE=function(S,F){return S=S>>>0,F||Q(S,8,this.length),t.read(this,S,!1,52,8)};function ee(X,S,F,K,fe,ye){if(!l.isBuffer(X))throw new TypeError('"buffer" argument must be a Buffer instance');if(S>fe||S<ye)throw new RangeError('"value" argument is out of bounds');if(F+K>X.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(S,F,K,fe){if(S=+S,F=F>>>0,K=K>>>0,!fe){const Pe=Math.pow(2,8*K)-1;ee(this,S,F,K,Pe,0)}let ye=1,ke=0;for(this[F]=S&255;++ke<K&&(ye*=256);)this[F+ke]=S/ye&255;return F+K},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(S,F,K,fe){if(S=+S,F=F>>>0,K=K>>>0,!fe){const Pe=Math.pow(2,8*K)-1;ee(this,S,F,K,Pe,0)}let ye=K-1,ke=1;for(this[F+ye]=S&255;--ye>=0&&(ke*=256);)this[F+ye]=S/ke&255;return F+K},l.prototype.writeUint8=l.prototype.writeUInt8=function(S,F,K){return S=+S,F=F>>>0,K||ee(this,S,F,1,255,0),this[F]=S&255,F+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(S,F,K){return S=+S,F=F>>>0,K||ee(this,S,F,2,65535,0),this[F]=S&255,this[F+1]=S>>>8,F+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(S,F,K){return S=+S,F=F>>>0,K||ee(this,S,F,2,65535,0),this[F]=S>>>8,this[F+1]=S&255,F+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(S,F,K){return S=+S,F=F>>>0,K||ee(this,S,F,4,4294967295,0),this[F+3]=S>>>24,this[F+2]=S>>>16,this[F+1]=S>>>8,this[F]=S&255,F+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(S,F,K){return S=+S,F=F>>>0,K||ee(this,S,F,4,4294967295,0),this[F]=S>>>24,this[F+1]=S>>>16,this[F+2]=S>>>8,this[F+3]=S&255,F+4};function $(X,S,F,K,fe){vt(S,K,fe,X,F,7);let ye=Number(S&BigInt(4294967295));X[F++]=ye,ye=ye>>8,X[F++]=ye,ye=ye>>8,X[F++]=ye,ye=ye>>8,X[F++]=ye;let ke=Number(S>>BigInt(32)&BigInt(4294967295));return X[F++]=ke,ke=ke>>8,X[F++]=ke,ke=ke>>8,X[F++]=ke,ke=ke>>8,X[F++]=ke,F}function ae(X,S,F,K,fe){vt(S,K,fe,X,F,7);let ye=Number(S&BigInt(4294967295));X[F+7]=ye,ye=ye>>8,X[F+6]=ye,ye=ye>>8,X[F+5]=ye,ye=ye>>8,X[F+4]=ye;let ke=Number(S>>BigInt(32)&BigInt(4294967295));return X[F+3]=ke,ke=ke>>8,X[F+2]=ke,ke=ke>>8,X[F+1]=ke,ke=ke>>8,X[F]=ke,F+8}l.prototype.writeBigUInt64LE=ft(function(S,F=0){return $(this,S,F,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=ft(function(S,F=0){return ae(this,S,F,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(S,F,K,fe){if(S=+S,F=F>>>0,!fe){const Xe=Math.pow(2,8*K-1);ee(this,S,F,K,Xe-1,-Xe)}let ye=0,ke=1,Pe=0;for(this[F]=S&255;++ye<K&&(ke*=256);)S<0&&Pe===0&&this[F+ye-1]!==0&&(Pe=1),this[F+ye]=(S/ke>>0)-Pe&255;return F+K},l.prototype.writeIntBE=function(S,F,K,fe){if(S=+S,F=F>>>0,!fe){const Xe=Math.pow(2,8*K-1);ee(this,S,F,K,Xe-1,-Xe)}let ye=K-1,ke=1,Pe=0;for(this[F+ye]=S&255;--ye>=0&&(ke*=256);)S<0&&Pe===0&&this[F+ye+1]!==0&&(Pe=1),this[F+ye]=(S/ke>>0)-Pe&255;return F+K},l.prototype.writeInt8=function(S,F,K){return S=+S,F=F>>>0,K||ee(this,S,F,1,127,-128),S<0&&(S=255+S+1),this[F]=S&255,F+1},l.prototype.writeInt16LE=function(S,F,K){return S=+S,F=F>>>0,K||ee(this,S,F,2,32767,-32768),this[F]=S&255,this[F+1]=S>>>8,F+2},l.prototype.writeInt16BE=function(S,F,K){return S=+S,F=F>>>0,K||ee(this,S,F,2,32767,-32768),this[F]=S>>>8,this[F+1]=S&255,F+2},l.prototype.writeInt32LE=function(S,F,K){return S=+S,F=F>>>0,K||ee(this,S,F,4,2147483647,-2147483648),this[F]=S&255,this[F+1]=S>>>8,this[F+2]=S>>>16,this[F+3]=S>>>24,F+4},l.prototype.writeInt32BE=function(S,F,K){return S=+S,F=F>>>0,K||ee(this,S,F,4,2147483647,-2147483648),S<0&&(S=4294967295+S+1),this[F]=S>>>24,this[F+1]=S>>>16,this[F+2]=S>>>8,this[F+3]=S&255,F+4},l.prototype.writeBigInt64LE=ft(function(S,F=0){return $(this,S,F,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=ft(function(S,F=0){return ae(this,S,F,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ze(X,S,F,K,fe,ye){if(F+K>X.length)throw new RangeError("Index out of range");if(F<0)throw new RangeError("Index out of range")}function Ve(X,S,F,K,fe){return S=+S,F=F>>>0,fe||ze(X,S,F,4),t.write(X,S,F,K,23,4),F+4}l.prototype.writeFloatLE=function(S,F,K){return Ve(this,S,F,!0,K)},l.prototype.writeFloatBE=function(S,F,K){return Ve(this,S,F,!1,K)};function be(X,S,F,K,fe){return S=+S,F=F>>>0,fe||ze(X,S,F,8),t.write(X,S,F,K,52,8),F+8}l.prototype.writeDoubleLE=function(S,F,K){return be(this,S,F,!0,K)},l.prototype.writeDoubleBE=function(S,F,K){return be(this,S,F,!1,K)},l.prototype.copy=function(S,F,K,fe){if(!l.isBuffer(S))throw new TypeError("argument should be a Buffer");if(K||(K=0),!fe&&fe!==0&&(fe=this.length),F>=S.length&&(F=S.length),F||(F=0),fe>0&&fe<K&&(fe=K),fe===K||S.length===0||this.length===0)return 0;if(F<0)throw new RangeError("targetStart out of bounds");if(K<0||K>=this.length)throw new RangeError("Index out of range");if(fe<0)throw new RangeError("sourceEnd out of bounds");fe>this.length&&(fe=this.length),S.length-F<fe-K&&(fe=S.length-F+K);const ye=fe-K;return this===S&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(F,K,fe):Uint8Array.prototype.set.call(S,this.subarray(K,fe),F),ye},l.prototype.fill=function(S,F,K,fe){if(typeof S=="string"){if(typeof F=="string"?(fe=F,F=0,K=this.length):typeof K=="string"&&(fe=K,K=this.length),fe!==void 0&&typeof fe!="string")throw new TypeError("encoding must be a string");if(typeof fe=="string"&&!l.isEncoding(fe))throw new TypeError("Unknown encoding: "+fe);if(S.length===1){const ke=S.charCodeAt(0);(fe==="utf8"&&ke<128||fe==="latin1")&&(S=ke)}}else typeof S=="number"?S=S&255:typeof S=="boolean"&&(S=Number(S));if(F<0||this.length<F||this.length<K)throw new RangeError("Out of range index");if(K<=F)return this;F=F>>>0,K=K===void 0?this.length:K>>>0,S||(S=0);let ye;if(typeof S=="number")for(ye=F;ye<K;++ye)this[ye]=S;else{const ke=l.isBuffer(S)?S:l.from(S,fe),Pe=ke.length;if(Pe===0)throw new TypeError('The value "'+S+'" is invalid for argument "value"');for(ye=0;ye<K-F;++ye)this[ye+F]=ke[ye%Pe]}return this};const Ne={};function _e(X,S,F){Ne[X]=class extends F{constructor(){super(),Object.defineProperty(this,"message",{value:S.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${X}]`,this.stack,delete this.name}get code(){return X}set code(fe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:fe,writable:!0})}toString(){return`${this.name} [${X}]: ${this.message}`}}}_e("ERR_BUFFER_OUT_OF_BOUNDS",function(X){return X?`${X} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),_e("ERR_INVALID_ARG_TYPE",function(X,S){return`The "${X}" argument must be of type number. Received type ${typeof S}`},TypeError),_e("ERR_OUT_OF_RANGE",function(X,S,F){let K=`The value of "${X}" is out of range.`,fe=F;return Number.isInteger(F)&&Math.abs(F)>2**32?fe=Se(String(F)):typeof F=="bigint"&&(fe=String(F),(F>BigInt(2)**BigInt(32)||F<-(BigInt(2)**BigInt(32)))&&(fe=Se(fe)),fe+="n"),K+=` It must be ${S}. Received ${fe}`,K},RangeError);function Se(X){let S="",F=X.length;const K=X[0]==="-"?1:0;for(;F>=K+4;F-=3)S=`_${X.slice(F-3,F)}${S}`;return`${X.slice(0,F)}${S}`}function et(X,S,F){rt(S,"offset"),(X[S]===void 0||X[S+F]===void 0)&&Ae(S,X.length-(F+1))}function vt(X,S,F,K,fe,ye){if(X>F||X<S){const ke=typeof S=="bigint"?"n":"";let Pe;throw S===0||S===BigInt(0)?Pe=`>= 0${ke} and < 2${ke} ** ${(ye+1)*8}${ke}`:Pe=`>= -(2${ke} ** ${(ye+1)*8-1}${ke}) and < 2 ** ${(ye+1)*8-1}${ke}`,new Ne.ERR_OUT_OF_RANGE("value",Pe,X)}et(K,fe,ye)}function rt(X,S){if(typeof X!="number")throw new Ne.ERR_INVALID_ARG_TYPE(S,"number",X)}function Ae(X,S,F){throw Math.floor(X)!==X?(rt(X,F),new Ne.ERR_OUT_OF_RANGE("offset","an integer",X)):S<0?new Ne.ERR_BUFFER_OUT_OF_BOUNDS:new Ne.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${S}`,X)}const qe=/[^+/0-9A-Za-z-_]/g;function Nt(X){if(X=X.split("=")[0],X=X.trim().replace(qe,""),X.length<2)return"";for(;X.length%4!==0;)X=X+"=";return X}function Ut(X,S){S=S||1/0;let F;const K=X.length;let fe=null;const ye=[];for(let ke=0;ke<K;++ke){if(F=X.charCodeAt(ke),F>55295&&F<57344){if(!fe){if(F>56319){(S-=3)>-1&&ye.push(239,191,189);continue}else if(ke+1===K){(S-=3)>-1&&ye.push(239,191,189);continue}fe=F;continue}if(F<56320){(S-=3)>-1&&ye.push(239,191,189),fe=F;continue}F=(fe-55296<<10|F-56320)+65536}else fe&&(S-=3)>-1&&ye.push(239,191,189);if(fe=null,F<128){if((S-=1)<0)break;ye.push(F)}else if(F<2048){if((S-=2)<0)break;ye.push(F>>6|192,F&63|128)}else if(F<65536){if((S-=3)<0)break;ye.push(F>>12|224,F>>6&63|128,F&63|128)}else if(F<1114112){if((S-=4)<0)break;ye.push(F>>18|240,F>>12&63|128,F>>6&63|128,F&63|128)}else throw new Error("Invalid code point")}return ye}function Vt(X){const S=[];for(let F=0;F<X.length;++F)S.push(X.charCodeAt(F)&255);return S}function St(X,S){let F,K,fe;const ye=[];for(let ke=0;ke<X.length&&!((S-=2)<0);++ke)F=X.charCodeAt(ke),K=F>>8,fe=F%256,ye.push(fe),ye.push(K);return ye}function Xt(X){return e.toByteArray(Nt(X))}function je(X,S,F,K){let fe;for(fe=0;fe<K&&!(fe+F>=S.length||fe>=X.length);++fe)S[fe+F]=X[fe];return fe}function He(X,S){return X instanceof S||X!=null&&X.constructor!=null&&X.constructor.name!=null&&X.constructor.name===S.name}function We(X){return X!==X}const tt=function(){const X="0123456789abcdef",S=new Array(256);for(let F=0;F<16;++F){const K=F*16;for(let fe=0;fe<16;++fe)S[K+fe]=X[F]+X[fe]}return S}();function ft(X){return typeof BigInt>"u"?zt:X}function zt(){throw new Error("BigInt not supported")}})(jp);/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let Zu;var H2=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:as):i=>(Zu||(Zu=Promise.resolve())).then(i).catch(e=>setTimeout(()=>{throw e},0));const $2=la(H2),Gi="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Qi="http://www.w3.org/2001/XMLSchema#",Ws="http://www.w3.org/2000/10/swap/",Zr={xsd:{decimal:`${Qi}decimal`,boolean:`${Qi}boolean`,double:`${Qi}double`,integer:`${Qi}integer`,string:`${Qi}string`},rdf:{type:`${Gi}type`,nil:`${Gi}nil`,first:`${Gi}first`,rest:`${Gi}rest`,langString:`${Gi}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${Ws}reify#forSome`,forAll:`${Ws}reify#forAll`},log:{implies:`${Ws}log#implies`}},{xsd:Ba}=Zr,X2=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,ef={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},G2=/[\x00-\x20<>\\"\{\}\|\^\`]/,Q2={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},W2=/$0^/;class Y2{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const t in this)!(t in Q2)&&this[t]instanceof RegExp&&(this[t]=W2)}else this._n3Mode=e.n3!==!1;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let n=this._input,r=n.length;for(;;){let l,o;for(;l=this._newline.exec(n);)this._comments&&(o=this._comment.exec(l[0]))&&s("comment",o[1],"",this._line,l[0].length),n=n.substr(l[0].length,n.length),r=n.length,this._line++;if(!l&&(l=this._whitespace.exec(n))&&(n=n.substr(l[0].length,n.length)),this._endOfFile.test(n))return t&&(this._comments&&(o=this._comment.exec(n))&&s("comment",o[1],"",this._line,n.length),n=null,s("eof","","",this._line,0)),this._input=n;const u=this._line,f=n[0];let d="",h="",c="",p=null,_=0,v=!1;switch(f){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){v=!0;break}}else{this._n3Mode&&(_=1,d="^");break}case"<":if(p=this._unescapedIri.exec(n))d="IRI",h=p[1];else if(p=this._iri.exec(n)){if(h=this._unescape(p[1]),h===null||G2.test(h))return a(this);d="IRI"}else n.length>1&&n[1]==="<"?(d="<<",_=2):this._n3Mode&&n.length>1&&n[1]==="="&&(d="inverse",_=2,h=">");break;case">":n.length>1&&n[1]===">"&&(d=">>",_=2);break;case"_":((p=this._blank.exec(n))||t&&(p=this._blank.exec(`${n} `)))&&(d="blank",c="_",h=p[1]);break;case'"':if(p=this._simpleQuotedString.exec(n))h=p[1];else if({value:h,matchLength:_}=this._parseLiteral(n),h===null)return a(this);(p!==null||_!==0)&&(d="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(p=this._simpleApostropheString.exec(n))h=p[1];else if({value:h,matchLength:_}=this._parseLiteral(n),h===null)return a(this);(p!==null||_!==0)&&(d="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(p=this._variable.exec(n))&&(d="var",h=p[0]);break;case"@":this._previousMarker==="literal"&&(p=this._langcode.exec(n))?(d="langcode",h=p[1]):(p=this._keyword.exec(n))&&(d=p[0]);break;case".":if(n.length===1?t:n[1]<"0"||n[1]>"9"){d=".",_=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(p=this._number.exec(n)||t&&(p=this._number.exec(`${n} `)))&&(d="literal",h=p[0],c=typeof p[1]=="string"?Ba.double:typeof p[2]=="string"?Ba.decimal:Ba.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(p=this._sparqlKeyword.exec(n))?d=p[0].toUpperCase():v=!0;break;case"f":case"t":(p=this._boolean.exec(n))?(d="literal",h=p[0],c=Ba.boolean):v=!0;break;case"a":(p=this._shortPredicates.exec(n))?(d="abbreviation",h="a"):v=!0;break;case"=":this._n3Mode&&n.length>1&&(d="abbreviation",n[1]!==">"?(_=1,h="="):(_=2,h=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(_=1,d=f);break;case"{":!this._lineMode&&n.length>=2&&(n[1]==="|"?(d="{|",_=2):(d=f,_=1));break;case"|":n.length>=2&&n[1]==="}"&&(d="|}",_=2);break;default:v=!0}if(v&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(p=this._prefix.exec(n))?(d="prefix",h=p[1]||""):((p=this._prefixed.exec(n))||t&&(p=this._prefixed.exec(`${n} `)))&&(d="prefixed",c=p[1]||"",h=this._unescape(p[2]))),this._previousMarker==="^^")switch(d){case"prefixed":d="type";break;case"IRI":d="typeIRI";break;default:d=""}if(!d)return t||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?a(this):this._input=n;const D=_||p[0].length,U=s(d,h,c,u,D);this.previousToken=U,this._previousMarker=d,n=n.substr(D,n.length)}function s(l,o,u,f,d){const h=n?r-n.length:r,c=h+d,p={type:l,value:o,prefix:u,line:f,start:h,end:c};return e(null,p),p}function a(l){e(l._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let t=!1;const n=e.replace(X2,(r,s,a,l)=>{if(typeof s=="string")return String.fromCharCode(Number.parseInt(s,16));if(typeof a=="string"){let o=Number.parseInt(a,16);return o<=65535?String.fromCharCode(Number.parseInt(a,16)):String.fromCharCode(55296+((o-=65536)>>10),56320+(o&1023))}return l in ef?ef[l]:(t=!0,"")});return t?null:n}_parseLiteral(e){if(e.length>=3){const t=e.match(/^(?:"""|"|'''|'|)/)[0],n=t.length;let r=Math.max(this._literalClosingPos,n);for(;(r=e.indexOf(t,r))>0;){let s=0;for(;e[r-s-1]==="\\";)s++;if(s%2===0){const a=e.substring(n,r),l=a.split(/\r\n|\r|\n/).length-1,o=r+n;if(n===1&&l!==0||n===3&&this._lineMode)break;return this._line+=l,{value:this._unescape(a),matchLength:o}}r++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,t){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof t=="function")$2(()=>this._tokenizeToEnd(t,!0));else{const n=[];let r;if(this._tokenizeToEnd((s,a)=>s?r=s:n.push(a),!0),r)throw r;return n}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=jp.Buffer.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(t,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(t,!0)}),e.on("error",t)}}const{rdf:J2,xsd:yi}=Zr;let vs,K2=0;const Z2={namedNode:ib,blankNode:ab,variable:lb,literal:sb,defaultGraph:ob,quad:tf,triple:tf};class Vn{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Vn?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}let Mp=class extends Vn{get termType(){return"NamedNode"}},Ys=class xp extends Vn{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let t=e.lastIndexOf('"')+1;return t<e.length&&e[t++]==="@"?e.substr(t).toLowerCase():""}get datatype(){return new Mp(this.datatypeString)}get datatypeString(){const e=this.id,t=e.lastIndexOf('"')+1,n=t<e.length?e[t]:"";return n==="^"?e.substr(t+2):n!=="@"?yi.string:J2.langString}equals(e){return e instanceof xp?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}},eb=class extends Vn{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}},tb=class extends Vn{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}},rb=class extends Vn{constructor(){return super(""),vs||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};vs=new rb;let nb=class extends Vn{constructor(e,t,n,r){super(""),this._subject=e,this._predicate=t,this._object=n,this._graph=r||vs}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}};function ib(i){return new Mp(i)}function ab(i){return new eb(i||`n3-${K2++}`)}function sb(i,e){if(typeof e=="string")return new Ys(`"${i}"@${e.toLowerCase()}`);let t=e?e.value:"";return t===""&&(typeof i=="boolean"?t=yi.boolean:typeof i=="number"&&(Number.isFinite(i)?t=Number.isInteger(i)?yi.integer:yi.double:(t=yi.double,Number.isNaN(i)||(i=i>0?"INF":"-INF")))),t===""||t===yi.string?new Ys(`"${i}"`):new Ys(`"${i}"^^${t}`)}function lb(i){return new tb(i)}function ob(){return vs}function tf(i,e,t,n){return new nb(i,e,t,n)}let rf=0;class Vp{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&zp(this,e.factory);const t=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(t),r=/trig/.test(t),s=/triple/.test(t),a=/quad/.test(t),l=this._n3Mode=/n3/.test(t),o=s||a;(this._supportsNamedGraphs=!(n||l))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||r||s||l),this._supportsRDFStar=t===""||/star|\*$/.test(t),o&&(this._resolveRelativeIRI=u=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new Y2({lineMode:o,n3:l}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){rf=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,t,n,r,s){const a=this._n3Mode;this._contextStack.push({type:e,subject:n,predicate:r,object:s,graph:t,inverse:a?this._inversePredicate:!1,blankPrefix:a?this._prefixes._:"",quantified:a?this._quantified:null}),a&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,t){const n=this._contextStack.pop();if(!n||n.type!==e)return this._error(`Unexpected ${t.type}`,t);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let n;switch(e.type){case"IRI":case"typeIRI":const r=this._resolveIRI(e.value);if(r===null)return this._error("Invalid IRI",e);n=this._namedNode(r);break;case"type":case"prefixed":const s=this._prefixes[e.prefix];if(s===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._namedNode(s+e.value);break;case"blank":n=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${t}`,e):(this._subject=null,t==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const t=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,n=null,r=this._readListItem;const s=this._subject,a=this._contextStack,l=a[a.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._blankNode(),this.RDF_FIRST,this._subject=t=this._blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),a.length!==0&&a[a.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;n=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,r=this._readListItemDataTypeOrLang):(t=this._literal(e.value,this._namedNode(e.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((t=this._readEntity(e))===void 0)return}if(n===null&&(this._subject=n=this._blankNode()),s===null?l.predicate===null?l.subject=n:l.object=n:this._emit(s,this.RDF_REST,n,this._graph),t!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,t,this._graph)}return r}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const n=this._readEntity(e);if(n===void 0)return;t=this._literal(this._literalValue,n),e=null;break;case"langcode":t=this._literal(this._literalValue,e.value),e=null;break}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){const n=this._completeLiteral(e);if(n)return this._object=n.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),n.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,n=this._graph;const r=this._subject,s=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);const a=this._predicate,l=this._object;this._subject=this._quad(r,a,l,this.DEFAULTGRAPH),t=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,t=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(e))!==void 0){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(r!==null){const a=this._predicate,l=this._object;s?this._emit(l,a,r,n):this._emit(r,a,l,n)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){const t=e.type==="IRI"&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if((t=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const t=this._contextStack,n=t.length&&t[t.length-1];if(n&&n.type==="item"){const r=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,r,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,n;const r=this._blankNode();if((n=this._readEntity(e))!==void 0)return this._predicate===null?(t=this._subject,this._subject=r):(t=this._object,this._object=r),this._emit(t,n,r,this._graph),this._readPath}_readBackwardPath(e){const t=this._blankNode();let n,r;if((n=this._readEntity(e))!==void 0)return this._predicate===null?(r=this._subject,this._subject=t):(r=this._object,this._object=t),this._emit(t,n,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const t=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,n,r){this._callback(null,this._quad(e,t,n,r||this.DEFAULTGRAPH))}_error(e,t){const n=new Error(`${e} on line ${t.line}.`);n.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=Js}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const t=e.length;let n="",r=-1,s=-1,a=0,l="/";for(;r<t;){switch(l){case":":if(s<0&&e[++r]==="/"&&e[++r]==="/")for(;(s=r+1)<t&&e[s]!=="/";)r=s;break;case"?":case"#":r=t;break;case"/":if(e[r+1]===".")switch(l=e[++r+1],l){case"/":n+=e.substring(a,r-1),a=r+1;break;case void 0:case"?":case"#":return n+e.substring(a,r)+e.substr(r+1);case".":if(l=e[++r+1],l===void 0||l==="/"||l==="?"||l==="#"){if(n+=e.substring(a,r-2),(a=n.lastIndexOf("/"))>=s&&(n=n.substr(0,a)),l!=="/")return`${n}/${e.substr(r+1)}`;a=r+1}}}l=e[++r]}return n+e.substring(a)}parse(e,t,n){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${rf++}_`,this._prefixCallback=n||Js,this._inversePredicate=!1,this._quantified=Object.create(null),!t){const r=[];let s;if(this._callback=(a,l)=>{a?s=a:l&&r.push(l)},this._lexer.tokenize(e).every(a=>this._readCallback=this._readCallback(a)),s)throw s;return r}this._callback=t,this._lexer.tokenize(e,(r,s)=>{r!==null?(this._callback(r),this._callback=Js):this._readCallback&&(this._readCallback=this._readCallback(s))})}}function Js(){}function zp(i,e){const t=e.namedNode;i._namedNode=t,i._blankNode=e.blankNode,i._literal=e.literal,i._variable=e.variable,i._quad=e.quad,i.DEFAULTGRAPH=e.defaultGraph(),i.RDF_FIRST=t(Zr.rdf.first),i.RDF_REST=t(Zr.rdf.rest),i.RDF_NIL=t(Zr.rdf.nil),i.N3_FORALL=t(Zr.r.forAll),i.N3_FORSOME=t(Zr.r.forSome),i.ABBREVIATIONS={a:t(Zr.rdf.type),"=":t(Zr.owl.sameAs),">":t(Zr.log.implies)},i.QUANTIFIERS_GRAPH=t("urn:n3:quantifiers")}zp(Vp.prototype,Z2);if(typeof Pn>"u")var Pn={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};var Mr=function(){function i(e,t){Wt(this,i),this.options=t||{},this.kb=e,this.target=t.target||{graph:{subjects:{},prefixes:{},terms:{}}},this.blankNodes=[],this.htmlOptions={selfClosing:"br img input area base basefont col colgroup source wbr isindex link meta param hr"},this.theOne="_:"+new Date().getTime(),this.language=null,this.vocabulary=null,this.blankCounter=0,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}],this.inXHTMLMode=!1,this.absURIRE=/[\w\_\-]+:\S+/,this.finishedHandlers=[],this.init()}return Qt(i,[{key:"addTriple",value:function(t,n,r,s){var a,l,o,u;typeof n>"u"?a=xr.namedNode(this.options.base):a=this.toRDFNodeObject(n),o=this.toRDFNodeObject(r),l=this.toRDFNodeObject(s),u=xr.namedNode(this.options.base),this.kb.add(a,o,l,u)}},{key:"ancestorPath",value:function(t){for(var n="";t&&t.nodeType!==Pn.DOCUMENT_NODE;)n="/"+t.localName+n,t=t.parentNode;return n}},{key:"copyMappings",value:function(t){var n={};for(var r in t)n[r]=t[r];return n}},{key:"copyProperties",value:function(){}},{key:"deriveDateTimeType",value:function(t){for(var n=0;n<i.dateTimeTypes.length;n++){var r=i.dateTimeTypes[n].pattern.exec(t);if(r&&r[0].length===t.length)return i.dateTimeTypes[n].type}return null}},{key:"init",value:function(){}},{key:"newBlankNode",value:function(){return this.blankCounter++,"_:"+this.blankCounter}},{key:"newSubjectOrigin",value:function(t,n){}},{key:"parseCURIE",value:function(t,n,r){var s=t.indexOf(":"),a;if(s>=0){var l=t.substring(0,s);if(l==="")return a=n[""],a?a+t.substring(s+1):null;if(l==="_")return"_:"+t.substring(s+1);if(i.NCNAME.test(l)&&(a=n[l],a))return a+t.substring(s+1)}return null}},{key:"parseCURIEOrURI",value:function(t,n,r){var s=this.parseCURIE(t,n,r);return s||this.resolveAndNormalize(r,t)}},{key:"parsePredicate",value:function(t,n,r,s,a,l){if(t==="")return null;var o=this.parseTermOrCURIEOrAbsURI(t,n,l?null:r,s,a);return o&&o.indexOf("_:")===0?null:o}},{key:"parsePrefixMappings",value:function(t,n){for(var r=this.tokenize(t),s=null,a=0;a<r.length;a++)r[a][r[a].length-1]===":"?s=r[a].substring(0,r[a].length-1):s&&(n[s]=this.options.base?qr(r[a],this.options.base):r[a],s=null)}},{key:"parseSafeCURIEOrCURIEOrURI",value:function(t,n,r){return t=this.trim(t),t.charAt(0)==="["&&t.charAt(t.length-1)==="]"?(t=t.substring(1,t.length-1),t=t.trim(t),t.length===0?null:t==="_:"?this.theOne:this.parseCURIE(t,n,r)):this.parseCURIEOrURI(t,n,r)}},{key:"parseTermOrCURIEOrAbsURI",value:function(t,n,r,s,a){t=this.trim(t);var l=this.parseCURIE(t,s,a);if(l)return l;if(r){if(n&&!this.absURIRE.exec(t))return n+t;var o=r[t];if(o)return o;var u=t.toLowerCase();if(o=r[u],o)return o}return this.absURIRE.exec(t)?this.resolveAndNormalize(a,t):null}},{key:"parseTermOrCURIEOrURI",value:function(t,n,r,s,a){t=this.trim(t);var l=this.parseCURIE(t,s,a);if(l)return l;var o=r[t];if(o)return o;var u=t.toLowerCase();return o=r[u],o||(n&&!this.absURIRE.exec(t)?n+t:this.resolveAndNormalize(a,t))}},{key:"parseURI",value:function(t){return t}},{key:"process",value:function(t,n){n=n||{};var r;t.nodeType===Pn.DOCUMENT_NODE?(t.baseURI&&!n.baseURI&&(n.baseURI=t.baseURI),r=t.baseURI,t=t.documentElement,t.baseURI||(t.baseURI=r),this.setContext(t)):t.parentNode.nodeType===Pn.DOCUMENT_NODE&&this.setContext(t);var s=[],a=function(lr){if(!lr&&n&&n.baseURI)return n.baseURI;var $n=lr.indexOf("#");return $n>=0&&(lr=lr.substring(0,$n)),n&&n.baseURIMap&&(lr=n.baseURIMap(lr)),lr};for(s.push({current:t,context:this.push(null,a(t.baseURI))});s.length>0;){var l=s.shift();if(l.parent){if(l.context.parent&&l.context.parent.listMapping===l.listMapping)continue;for(var o in l.listMapping){var u=l.listMapping[o];if(u.length===0){this.addTriple(l.parent,l.subject,o,{type:i.objectURI,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});continue}for(var f=[],d=0;d<u.length;d++)f.push(this.newBlankNode());for(var h=0;h<f.length;h++)this.addTriple(l.parent,f[h],"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",u[h]),this.addTriple(l.parent,f[h],"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",{type:i.objectURI,value:h+1<f.length?f[h+1]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});this.addTriple(l.parent,l.subject,o,{type:i.objectURI,value:f[0]})}continue}var c=l.current,p=l.context,_=!1,v=null,D=null,U=null,T=p.prefixes,N=!1,g=[],E=p.listMapping,b=!p.parent,I=p.language,C=p.vocabulary;r=this.parseURI(a(c.baseURI)),c.item=null;var O=c.getAttributeNode("vocab");if(O){var k=this.trim(O.value);if(k.length>0){C=k;var B=r.spec;this.addTriple(c,B,"http://www.w3.org/ns/rdfa#usesVocabulary",{type:i.objectURI,value:C})}else C=this.vocabulary}for(var P=0;P<c.attributes.length;P++){var A=c.attributes[P];if(A.nodeName.charAt(0)==="x"&&A.nodeName.indexOf("xmlns:")===0){N||(T=this.copyMappings(T),N=!0);var z=A.nodeName.substring(6),j=i.trim(A.value);T[z]=this.options.base?qr(j,this.options.base):j}}var se=c.getAttributeNode("prefix");se&&(N||(T=this.copyMappings(T),N=!0),this.parsePrefixMappings(se.value,T));for(var Z=null,G=0;!Z&&G<this.langAttributes.length;G++)Z=c.getAttributeNodeNS(this.langAttributes[G].namespaceURI,this.langAttributes[G].localName);if(Z){var H=i.trim(Z.value);H.length>0?I=H:I=null}var Q=c.getAttributeNode("rel"),ee=c.getAttributeNode("rev"),$=c.getAttributeNode("typeof"),ae=c.getAttributeNode("property"),ze=c.getAttributeNode("datatype"),Ve=this.inHTMLMode?c.getAttributeNode("datetime"):null,be=c.getAttributeNode("content"),Ne=c.getAttributeNode("about"),_e=c.getAttributeNode("src"),Se=c.getAttributeNode("resource"),et=c.getAttributeNode("href"),vt=c.getAttributeNode("inlist"),rt=[],Ae,qe;if(Q){qe=this.tokenize(Q.value);for(var Nt=0;Nt<qe.length;Nt++)Ae=this.parsePredicate(qe[Nt],C,p.terms,T,r,this.inHTMLMode&&ae!==null),Ae&&rt.push(Ae)}var Ut=[];if(ee){qe=this.tokenize(ee.value);for(var Vt=0;Vt<qe.length;Vt++)Ae=this.parsePredicate(qe[Vt],C,p.terms,T,r,this.inHTMLMode&&ae),Ae&&Ut.push(Ae)}if(this.inHTMLMode&&(Q||ee)&&ae&&(rt.length===0&&(Q=null),Ut.length===0&&(ee=null)),Q||ee?(Ne&&(v=this.parseSafeCURIEOrCURIEOrURI(Ne.value,T,r)),$&&(U=v),v||(c.parentNode.nodeType===Pn.DOCUMENT_NODE?v=a(c.baseURI):p.parentObject&&(v=a(c.parentNode.baseURI)===p.parentObject?a(c.baseURI):p.parentObject)),Se&&(D=this.parseSafeCURIEOrCURIEOrURI(Se.value,T,r)),D||(et?D=this.resolveAndNormalize(r,encodeURI(et.value)):_e?D=this.resolveAndNormalize(r,encodeURI(_e.value)):$&&!Ne&&!(this.inXHTMLMode&&(c.localName==="head"||c.localName==="body"))&&(D=this.newBlankNode())),$&&!Ne&&this.inXHTMLMode&&(c.localName==="head"||c.localName==="body")?U=v:$&&!Ne&&(U=D)):ae&&!be&&!ze?(Ne&&(v=this.parseSafeCURIEOrCURIEOrURI(Ne.value,T,r),$&&(U=v)),!v&&c.parentNode.nodeType===Pn.DOCUMENT_NODE?(v=a(c.baseURI),$&&(U=v)):!v&&p.parentObject&&(v=a(c.parentNode.baseURI)===p.parentObject?a(c.baseURI):p.parentObject),$&&!U&&(Se&&(U=this.parseSafeCURIEOrCURIEOrURI(Se.value,T,r)),!U&&et&&(U=this.resolveAndNormalize(r,encodeURI(et.value))),!U&&_e&&(U=this.resolveAndNormalize(r,encodeURI(_e.value))),!U&&(this.inXHTMLMode||this.inHTMLMode)&&(c.localName==="head"||c.localName==="body")&&(U=v),U||(U=this.newBlankNode()),D=U)):(Ne&&(v=this.parseSafeCURIEOrCURIEOrURI(Ne.value,T,r)),!v&&Se&&(v=this.parseSafeCURIEOrCURIEOrURI(Se.value,T,r)),!v&&et&&(v=this.resolveAndNormalize(r,encodeURI(et.value))),!v&&_e&&(v=this.resolveAndNormalize(r,encodeURI(_e.value))),v||(c.parentNode.nodeType===Pn.DOCUMENT_NODE?v=a(c.baseURI):(this.inXHTMLMode||this.inHTMLMode)&&(c.localName==="head"||c.localName==="body")?v=a(c.parentNode.baseURI)===p.parentObject?a(c.baseURI):p.parentObject:$?v=this.newBlankNode():p.parentObject&&(v=a(c.parentNode.baseURI)===p.parentObject?a(c.baseURI):p.parentObject,ae||(_=!0))),$&&(U=v)),v&&(Ne||Se||U)){var St=v;$&&!Ne&&!Se&&D&&(St=D),this.newSubjectOrigin(c,St)}if(U){qe=this.tokenize($.value);for(var Xt=0;Xt<qe.length;Xt++){var je=this.parseTermOrCURIEOrAbsURI(qe[Xt],C,p.terms,T,r);je&&this.addTriple(c,U,i.typeURI,{type:i.objectURI,value:je})}}if(v&&v!==p.parentObject&&(E={},b=!0),D){if(Q&&vt)for(var He=0;He<rt.length;He++){var We=E[rt[He]];We||(We=[],E[rt[He]]=We),We.push({type:i.objectURI,value:D})}else if(Q)for(var tt=0;tt<rt.length;tt++)this.addTriple(c,v,rt[tt],{type:i.objectURI,value:D});if(ee)for(var ft=0;ft<Ut.length;ft++)this.addTriple(c,D,Ut[ft],{type:i.objectURI,value:v})}else{if(v&&!D&&(Q||ee)&&(D=this.newBlankNode()),Q&&vt)for(var zt=0;zt<rt.length;zt++){var X=E[rt[zt]];X||(X=[],E[Ae]=X),g.push({predicate:rt[zt],list:X})}else if(Q)for(var S=0;S<rt.length;S++)g.push({predicate:rt[S],forward:!0});if(ee)for(var F=0;F<Ut.length;F++)g.push({predicate:Ut[F],forward:!1})}if(ae){var K=null,fe=null;ze?(K=ze.value===""?i.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(ze.value,C,p.terms,T,r),Ve&&!be?fe=Ve.value:fe=K===i.XMLLiteralURI||K===i.HTMLLiteralURI?null:be?be.value:c.textContent):be?(K=i.PlainLiteralURI,fe=be.value):Ve?(fe=Ve.value,K=i.deriveDateTimeType(fe),K||(K=i.PlainLiteralURI)):!Q&&!ee&&(Se&&(fe=this.parseSafeCURIEOrCURIEOrURI(Se.value,T,r)),!fe&&et?fe=this.resolveAndNormalize(r,encodeURI(et.value)):!fe&&_e&&(fe=this.resolveAndNormalize(r,encodeURI(_e.value))),fe&&(K=i.objectURI)),K||($&&!Ne?(K=i.objectURI,fe=U):(fe=c.textContent,this.inHTMLMode&&c.localName==="time"&&(K=i.deriveDateTimeType(fe)),K||(K=i.PlainLiteralURI))),qe=this.tokenize(ae.value);for(var ye=0;ye<qe.length;ye++){var ke=this.parsePredicate(qe[ye],C,p.terms,T,r);if(ke)if(vt){var Pe=E[ke];Pe||(Pe=[],E[ke]=Pe),Pe.push(K===i.XMLLiteralURI||K===i.HTMLLiteralURI?{type:K,value:c.childNodes}:{type:K||i.PlainLiteralURI,value:fe,language:I})}else K===i.XMLLiteralURI||K===i.HTMLLiteralURI?this.addTriple(c,v,ke,{type:K,value:c.childNodes}):this.addTriple(c,v,ke,{type:K||i.PlainLiteralURI,value:fe,language:I})}}if(v&&!_)for(var Xe=0;Xe<p.incomplete.length;Xe++)p.incomplete[Xe].list?p.incomplete[Xe].list.push({type:i.objectURI,value:v}):p.incomplete[Xe].forward?this.addTriple(c,p.subject,p.incomplete[Xe].predicate,{type:i.objectURI,value:v}):this.addTriple(c,v,p.incomplete[Xe].predicate,{type:i.objectURI,value:p.subject});var Ze=null,ct=v;_?(Ze=this.push(p,p.subject),Ze.parentObject=a(c.parentNode.baseURI)===p.parentObject?a(c.baseURI):p.parentObject,Ze.incomplete=p.incomplete,Ze.language=I,Ze.prefixes=T,Ze.vocabulary=C):(Ze=this.push(p,v),Ze.parentObject=D||v||p.subject,Ze.prefixes=T,Ze.incomplete=g,D&&(ct=D,E={},b=!0),Ze.listMapping=E,Ze.language=I,Ze.vocabulary=C),b&&s.unshift({parent:c,context:p,subject:ct,listMapping:E});for(var mt=c.lastChild;mt;mt=mt.previousSibling)mt.nodeType===Pn.ELEMENT_NODE&&s.unshift({current:mt,context:Ze})}this.inHTMLMode&&this.copyProperties();for(var dr=0;dr<this.finishedHandlers.length;dr++)this.finishedHandlers[dr](t)}},{key:"push",value:function(t,n){return{parent:t,subject:n||(t?t.subject:null),parentObject:null,incomplete:[],listMapping:t?t.listMapping:{},language:t?t.language:this.language,prefixes:t?t.prefixes:this.target.graph.prefixes,terms:t?t.terms:this.target.graph.terms,vocabulary:t?t.vocabulary:this.vocabulary}}},{key:"resolveAndNormalize",value:function(t,n){return qr(n,t)}},{key:"setContext",value:function(t){t.localName==="html"&&t.getAttribute("version")==="XHTML+RDFa 1.1"?this.setXHTMLContext():t.localName==="html"||t.namespaceURI==="http://www.w3.org/1999/xhtml"?typeof document<"u"&&document.doctype?document.doctype.publicId==="-//W3C//DTD XHTML+RDFa 1.0//EN"&&document.doctype.systemId==="http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"?(console.log("WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode."),this.setHTMLContext()):document.doctype.publicId==="-//W3C//DTD XHTML+RDFa 1.1//EN"&&document.doctype.systemId==="http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"?this.setXHTMLContext():this.setHTMLContext():this.setHTMLContext():this.setXMLContext()}},{key:"setHTMLContext",value:function(){this.setInitialContext(),this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.inXHTMLMode=!1,this.inHTMLMode=!0}},{key:"setInitialContext",value:function(){this.vocabulary=null,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}]}},{key:"setXHTMLContext",value:function(){this.setInitialContext(),this.inXHTMLMode=!0,this.inHTMLMode=!1,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.target.graph.terms.alternate="http://www.w3.org/1999/xhtml/vocab#alternate",this.target.graph.terms.appendix="http://www.w3.org/1999/xhtml/vocab#appendix",this.target.graph.terms.bookmark="http://www.w3.org/1999/xhtml/vocab#bookmark",this.target.graph.terms.cite="http://www.w3.org/1999/xhtml/vocab#cite",this.target.graph.terms.chapter="http://www.w3.org/1999/xhtml/vocab#chapter",this.target.graph.terms.contents="http://www.w3.org/1999/xhtml/vocab#contents",this.target.graph.terms.copyright="http://www.w3.org/1999/xhtml/vocab#copyright",this.target.graph.terms.first="http://www.w3.org/1999/xhtml/vocab#first",this.target.graph.terms.glossary="http://www.w3.org/1999/xhtml/vocab#glossary",this.target.graph.terms.help="http://www.w3.org/1999/xhtml/vocab#help",this.target.graph.terms.icon="http://www.w3.org/1999/xhtml/vocab#icon",this.target.graph.terms.index="http://www.w3.org/1999/xhtml/vocab#index",this.target.graph.terms.last="http://www.w3.org/1999/xhtml/vocab#last",this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license",this.target.graph.terms.meta="http://www.w3.org/1999/xhtml/vocab#meta",this.target.graph.terms.next="http://www.w3.org/1999/xhtml/vocab#next",this.target.graph.terms.prev="http://www.w3.org/1999/xhtml/vocab#prev",this.target.graph.terms.previous="http://www.w3.org/1999/xhtml/vocab#previous",this.target.graph.terms.section="http://www.w3.org/1999/xhtml/vocab#section",this.target.graph.terms.stylesheet="http://www.w3.org/1999/xhtml/vocab#stylesheet",this.target.graph.terms.subsection="http://www.w3.org/1999/xhtml/vocab#subsection",this.target.graph.terms.start="http://www.w3.org/1999/xhtml/vocab#start",this.target.graph.terms.top="http://www.w3.org/1999/xhtml/vocab#top",this.target.graph.terms.up="http://www.w3.org/1999/xhtml/vocab#up",this.target.graph.terms.p3pv1="http://www.w3.org/1999/xhtml/vocab#p3pv1",this.target.graph.terms.related="http://www.w3.org/1999/xhtml/vocab#related",this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role",this.target.graph.terms.transformation="http://www.w3.org/1999/xhtml/vocab#transformation"}},{key:"setXMLContext",value:function(){this.setInitialContext(),this.inXHTMLMode=!1,this.inHTMLMode=!1}},{key:"tokenize",value:function(t){return this.trim(t).split(/\s+/)}},{key:"toRDFNodeObject",value:function(t){var n=this;if(!(typeof t>"u")){if(typeof t=="string")return t.substring(0,2)==="_:"?(typeof this.blankNodes[t.substring(2)]>"u"&&(this.blankNodes[t.substring(2)]=new an(t.substring(2))),this.blankNodes[t.substring(2)]):xr.namedNode(t);switch(t.type){case i.objectURI:return t.value.substring(0,2)==="_:"?(typeof this.blankNodes[t.value.substring(2)]>"u"&&(this.blankNodes[t.value.substring(2)]=new an(t.value.substring(2))),this.blankNodes[t.value.substring(2)]):xr.namedNode(t.value);case i.PlainLiteralURI:return new en(t.value,t.language||"");case i.XMLLiteralURI:case i.HTMLLiteralURI:var r="";return Object.keys(t.value).forEach(function(s){r+=Kg(t.value[s],n.htmlOptions)}),new en(r,"",new hr(t.type));default:return new en(t.value,"",new hr(t.type))}}}},{key:"trim",value:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}],[{key:"parseRDFaDOM",value:function(t,n,r){var s=new i(n,{base:r});t.baseURI||(t.baseURI=r),s.process(t,{baseURI:r})}},{key:"tokenize",value:function(t){return this.trim(t).split(/\s+/)}},{key:"trim",value:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}])}();Mr.XMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral";Mr.HTMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML";Mr.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral";Mr.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object";Mr.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";Mr.nameChar="[-A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�က0-F.0-9·̀-ͯ‿-⁀]";Mr.nameStartChar="[A-Za-zÀ-ÖØ-öø-ÿĀ-ıĴ-ľŁ-ňŊ-žƀ-ǃǍ-ǰǴ-ǵǺ-ȗɐ-ʨʻ-ˁΆΈ-ΊΌΎ-ΡΣ-ώϐ-ϖϚϜϞϠϢ-ϳЁ-ЌЎ-яё-ќў-ҁҐ-ӄӇ-ӈӋ-ӌӐ-ӫӮ-ӵӸ-ӹԱ-Ֆՙա-ֆא-תװ-ײء-غف-يٱ-ڷں-ھۀ-ێې-ۓەۥ-ۦअ-हऽक़-ॡঅ-ঌএ-ঐও-নপ-রলশ-হড়-ঢ়য়-ৡৰ-ৱਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઋઍએ-ઑઓ-નપ-રલ-ળવ-હઽૠଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଶ-ହଽଡ଼-ଢ଼ୟ-ୡஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-வஷ-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠ-ౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹೞೠ-ೡഅ-ഌഎ-ഐഒ-നപ-ഹൠ-ൡก-ฮะา-ำเ-ๅກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ຮະາ-ຳຽເ-ໄཀ-ཇཉ-ཀྵႠ-Ⴥა-ჶᄀᄂ-ᄃᄅ-ᄇᄉᄋ-ᄌᄎ-ᄒᄼᄾᅀᅌᅎᅐᅔ-ᅕᅙᅟ-ᅡᅣᅥᅧᅩᅭ-ᅮᅲ-ᅳᅵᆞᆨᆫᆮ-ᆯᆷ-ᆸᆺᆼ-ᇂᇫᇰᇹḀ-ẛẠ-ỹἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼΩK-Å℮ↀ-ↂぁ-ゔァ-ヺㄅ-ㄬ가-힣一-龥〇〡-〩_]";Mr.NCNAME=new RegExp("^"+Mr.nameStartChar+Mr.nameChar+"*$");Mr.dateTimeTypes=[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:"http://www.w3.org/2001/XMLSchema#duration"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#dateTime"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#date"},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#time"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:"http://www.w3.org/2001/XMLSchema#gYearMonth"},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:"http://www.w3.org/2001/XMLSchema#gYear"}];var ts=Mr.parseRDFaDOM,ms=function(){function i(e){Wt(this,i),this.store=e,this.bnodes={},this.why=null,this.reify=!1}return Qt(i,[{key:"frameFactory",value:function(t,n,r){return{NODE:1,ARC:2,parent:n,parser:t,store:t.store,element:r,lastChild:0,base:null,lang:null,node:null,nodeType:null,listIndex:1,rdfid:null,datatype:null,collection:!1,terminateFrame:function(){this.collection&&this.node.close()},addSymbol:function(a,l){l=qr(l,this.base),this.node=this.store.sym(l),this.nodeType=a},loadTriple:function(){if(this.parent.parent.collection?this.parent.parent.node.append(this.node):this.store.add(this.parent.parent.node,this.parent.node,this.node,this.parser.why),this.parent.rdfid!=null){var a=this.store.sym(qr("#"+this.parent.rdfid,this.base));this.store.add(a,this.store.sym(i.ns.RDF+"type"),this.store.sym(i.ns.RDF+"Statement"),this.parser.why),this.store.add(a,this.store.sym(i.ns.RDF+"subject"),this.parent.parent.node,this.parser.why),this.store.add(a,this.store.sym(i.ns.RDF+"predicate"),this.parent.node,this.parser.why),this.store.add(a,this.store.sym(i.ns.RDF+"object"),this.node,this.parser.why)}},isTripleToLoad:function(){return this.parent!=null&&this.parent.parent!=null&&this.nodeType===this.NODE&&this.parent.nodeType===this.ARC&&this.parent.parent.nodeType===this.NODE},addNode:function(a){this.addSymbol(this.NODE,a),this.isTripleToLoad()&&this.loadTriple()},addCollection:function(){this.nodeType=this.NODE,this.node=this.store.collection(),this.collection=!0,this.isTripleToLoad()&&this.loadTriple()},addCollectionArc:function(){this.nodeType=this.ARC},addBNode:function(a){a!=null?this.parser.bnodes[a]!=null?this.node=this.parser.bnodes[a]:this.node=this.parser.bnodes[a]=this.store.bnode():this.node=this.store.bnode(),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()},addArc:function(a){a===i.ns.RDF+"li"&&(a=i.ns.RDF+"_"+this.parent.listIndex,this.parent.listIndex++),this.addSymbol(this.ARC,a)},addLiteral:function(a){this.parent.datatype&&this.parent.datatype!==i.ns.RDF+"langString"?this.node=this.store.literal(a,this.store.sym(this.parent.datatype)):this.node=this.store.literal(a,this.lang),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()}}}},{key:"getAttributeNodeNS",value:function(t,n,r){var s=null;if(t.getAttributeNodeNS)s=t.getAttributeNodeNS(n,r);else for(var a=t.attributes,l,o,u=0;u<a.length;++u)if(l=a[u],l.namespaceURI===n&&(o=l.prefix?l.prefix+":"+r:r,o===l.nodeName)){s=l;break}return s}},{key:"parse",value:function(t,n,r){var s=t.childNodes;this.cleanParser();var a;if(t.nodeType===i.nodeType.DOCUMENT){for(var l=0;l<s.length;l++)if(s[l].nodeType===i.nodeType.ELEMENT){a=s[l];break}}else if(t.nodeType===i.nodeType.ELEMENT)a=t;else throw new Error("RDFParser: can't find root in "+n+". Halting. ");this.why=r;var o=this.frameFactory(this);return this.base=n,o.base=n,o.lang=null,this.parseDOM(this.buildFrame(o,a)),!0}},{key:"parseDOM",value:function(t){for(var n,r=(function(g){var E="";if(g.namespaceURI==null)throw new Error("RDF/XML syntax error: No namespace for "+g.localName+" in "+this.base);return g.namespaceURI&&(E=E+g.namespaceURI),g.localName?E=E+g.localName:g.nodeName&&(g.nodeName.indexOf(":")>=0?E=E+g.nodeName.split(":")[1]:E=E+g.nodeName),E}).bind(this),s=!0;t.parent;){var a=t.element,l=a.attributes;if(a.nodeType===i.nodeType.TEXT||a.nodeType===i.nodeType.CDATA_SECTION)t.parent.nodeType===t.NODE&&(t.addArc(i.ns.RDF+"value"),t=this.buildFrame(t)),t.addLiteral(a.nodeValue);else if(r(a)!==i.ns.RDF+"RDF")if(t.parent&&t.parent.collection&&(t.addCollectionArc(),t=this.buildFrame(t,t.element),t.parent.element=null),!t.parent||!t.parent.nodeType||t.parent.nodeType===t.ARC){var o=this.getAttributeNodeNS(a,i.ns.RDF,"about");if(n=this.getAttributeNodeNS(a,i.ns.RDF,"ID"),o&&n)throw new Error("RDFParser: "+a.nodeName+" has both rdf:id and rdf:about. Halting. Only one of these properties may be specified on a node.");if(!o&&n)t.addNode("#"+n.nodeValue),a.removeAttributeNode(n);else if(o==null&&n==null){var u=this.getAttributeNodeNS(a,i.ns.RDF,"nodeID");u?(t.addBNode(u.nodeValue),a.removeAttributeNode(u)):t.addBNode()}else t.addNode(o.nodeValue),a.removeAttributeNode(o);var f=this.getAttributeNodeNS(a,i.ns.RDF,"type");i.ns.RDF+"Description"!==r(a)&&(f={nodeValue:r(a)}),f!=null&&(this.store.add(t.node,this.store.sym(i.ns.RDF+"type"),this.store.sym(qr(f.nodeValue,t.base)),this.why),f.nodeName&&a.removeAttributeNode(f));for(var d=l.length-1;d>=0;d--)this.store.add(t.node,this.store.sym(r(l[d])),this.store.literal(l[d].nodeValue,t.lang),this.why)}else{t.addArc(r(a)),this.reify&&(n=this.getAttributeNodeNS(a,i.ns.RDF,"ID"),n&&(t.rdfid=n.nodeValue,a.removeAttributeNode(n)));var h=this.getAttributeNodeNS(a,i.ns.RDF,"parseType"),c=this.getAttributeNodeNS(a,i.ns.RDF,"datatype");if(c&&(t.datatype=c.nodeValue,a.removeAttributeNode(c)),h){var p=h.nodeValue;p==="Literal"?(t.datatype=i.ns.RDF+"XMLLiteral",t=this.buildFrame(t),t.addLiteral(a.innerHTML||a.childNodes),s=!1):p==="Resource"?(t=this.buildFrame(t,t.element),t.parent.element=null,t.addBNode()):p==="Collection"&&(t=this.buildFrame(t,t.element),t.parent.element=null,t.addCollection()),a.removeAttributeNode(h)}if(l.length!==0){var _=this.getAttributeNodeNS(a,i.ns.RDF,"resource"),v=this.getAttributeNodeNS(a,i.ns.RDF,"nodeID");t=this.buildFrame(t),_?(t.addNode(_.nodeValue),a.removeAttributeNode(_)):v?(t.addBNode(v.nodeValue),a.removeAttributeNode(v)):t.addBNode();for(var D=l.length-1;D>=0;D--){var U=this.buildFrame(t);U.addArc(r(l[D])),r(l[D])===i.ns.RDF+"type"?this.buildFrame(U).addNode(l[D].nodeValue):this.buildFrame(U).addLiteral(l[D].nodeValue)}}else a.childNodes.length===0&&this.buildFrame(t).addLiteral("")}for(a=t.element;t.parent;){for(var T=t;a==null;)t=t.parent,a=t.element;var N=a.childNodes&&a.childNodes[t.lastChild];if(!N||!s){if(t.terminateFrame(),!(t=t.parent))break;a=t.element,s=!0}else if(N.nodeType!==i.nodeType.ELEMENT&&N.nodeType!==i.nodeType.TEXT&&N.nodeType!==i.nodeType.CDATA_SECTION||(N.nodeType===i.nodeType.TEXT||N.nodeType===i.nodeType.CDATA_SECTION)&&a.childNodes.length!==1)t.lastChild++;else{t.lastChild++,t=this.buildFrame(T,a.childNodes[t.lastChild-1]);break}}}}},{key:"cleanParser",value:function(){this.bnodes={},this.why=null}},{key:"buildFrame",value:function(t,n){var r=this.frameFactory(this,t,n);if(t&&(r.base=t.base,r.lang=t.lang),!n||n.nodeType===i.nodeType.TEXT||n.nodeType===i.nodeType.CDATA_SECTION)return r;var s=n.attributes,a=n.getAttributeNode("xml:base");a!=null&&(r.base=a.nodeValue,n.removeAttribute("xml:base"));var l=n.getAttributeNode("xml:lang");l!=null&&(r.lang=l.nodeValue,n.removeAttribute("xml:lang"));for(var o=s.length-1;o>=0;o--)if(s[o].nodeName.substr(0,3)==="xml"){if(s[o].name.slice(0,6)==="xmlns:"){var u=s[o].nodeValue;this.base&&(u=qr(u,this.base)),this.store.setPrefixForURI(s[o].name.slice(6),u)}n.removeAttributeNode(s[o])}return r}}])}();Ue(ms,"ns",{RDF:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDFS:"http://www.w3.org/2000/01/rdf-schema#"});Ue(ms,"nodeType",{ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12});function ub(i,e,t){var n,r,s,a=["INSERT","DELETE","WHERE"],l=mr("http://www.w3.org/ns/pim/patch#"),o=Ql(e,e,t,t,null,null,"",null),u={},f=function(v,D,U,T,N){return"Line "+(D+1)+" of <"+v+`>: Bad syntax:
   `+N+`
   at: "`+U.slice(T,T+30)+'"'};n=0;var d=e.sym(t+"#query");for(u.query=d;;){if(r=o.skipSpace(i,n),r<0)return u;if(i[r]===";"){if(n=o.skipSpace(i,r+1),n<0)return u;r=n}var h=!1;for(s=0;s<a.length;s++){var c=a[s];if(i.slice(r,r+c.length)===c){if(n=o.skipSpace(i,r+c.length),n<0)throw f(o._thisDoc,o.lines,i,r+c.length,"found EOF, needed {...} after "+c);if((c==="INSERT"||c==="DELETE")&&i.slice(n,n+4)==="DATA"){if(r=o.skipSpace(i,n+4),r<0)throw f(o._thisDoc,o.lines,i,n+4,"needed {...} after INSERT DATA "+c);n=r}var p=[];if(r=o.node(i,n,p),r<0)throw f(o._thisDoc,o.lines,i,n,"bad syntax or EOF in {...} after "+c);u[c.toLowerCase()]=p[0],e.add(d,l(c.toLowerCase()),p[0]),h=!0,n=r}}if(!h&&i.slice(r,r+7)==="@prefix"){if(n=o.directive(i,r),n<0)throw f(o._thisDoc,o.lines,i,n,"bad syntax or EOF after @prefix ");n=o.checkDot(i,n),h=!0}if(!h)throw f(o._thisDoc,o.lines,i,r,"Unknown syntax at start of statememt: '"+i.slice(r).slice(0,20)+"'")}}function bl(i,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"text/turtle",r=arguments.length>4?arguments[4]:void 0;n=n||ti,n=n.split(";")[0];try{if(n===Md||n===ti){var s=Ql(e,e,t,t,null,null,"",null);s.loadBuf(i),o()}else if(n===ea){var a=new ms(e);a.parse(Di(i),t,e.sym(t)),o()}else if(n===pl)ts(Di(i,{contentType:pl}),e,t),o();else if(n===mu)ts(Di(i,{contentType:mu}),e,t),o();else if(n===ng||n===ig)ub(i,e,t),o();else if(n===cl)Lp(i,e,t,o);else if(n===dl||n===hl){var l=new Vp({factory:gl});f(null,i)}else throw n===void 0?new Error("contentType is undefined"):new Error("Don't know how to parse "+n+" yet")}catch(h){u(h)}bl.handled={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/sparql-update":!0,"application/sparql-update-single-match":!0,"application/ld+json":!0,"application/nquads":!0,"application/n-quads":!0};function o(){if(r)r(null,e);else return}function u(h){if(n!==cl||n!==dl||n!==hl)if(r)r(h,e);else{var c=new Error(""+h+" while trying to parse <"+t+"> as "+n);throw c.cause=h,c}}function f(h,c){try{l.parse(c,d)}catch(p){r(p,e)}}function d(h,c){c?e.add(c.subject,c.predicate,c.object,c.graph):r(h,e)}}var yl={exports:{}};(function(i,e){var t=typeof self<"u"?self:as,n=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(a){var l={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function o(A){return A&&DataView.prototype.isPrototypeOf(A)}if(l.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(A){return A&&u.indexOf(Object.prototype.toString.call(A))>-1};function d(A){if(typeof A!="string"&&(A=String(A)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(A))throw new TypeError("Invalid character in header field name");return A.toLowerCase()}function h(A){return typeof A!="string"&&(A=String(A)),A}function c(A){var z={next:function(){var j=A.shift();return{done:j===void 0,value:j}}};return l.iterable&&(z[Symbol.iterator]=function(){return z}),z}function p(A){this.map={},A instanceof p?A.forEach(function(z,j){this.append(j,z)},this):Array.isArray(A)?A.forEach(function(z){this.append(z[0],z[1])},this):A&&Object.getOwnPropertyNames(A).forEach(function(z){this.append(z,A[z])},this)}p.prototype.append=function(A,z){A=d(A),z=h(z);var j=this.map[A];this.map[A]=j?j+", "+z:z},p.prototype.delete=function(A){delete this.map[d(A)]},p.prototype.get=function(A){return A=d(A),this.has(A)?this.map[A]:null},p.prototype.has=function(A){return this.map.hasOwnProperty(d(A))},p.prototype.set=function(A,z){this.map[d(A)]=h(z)},p.prototype.forEach=function(A,z){for(var j in this.map)this.map.hasOwnProperty(j)&&A.call(z,this.map[j],j,this)},p.prototype.keys=function(){var A=[];return this.forEach(function(z,j){A.push(j)}),c(A)},p.prototype.values=function(){var A=[];return this.forEach(function(z){A.push(z)}),c(A)},p.prototype.entries=function(){var A=[];return this.forEach(function(z,j){A.push([j,z])}),c(A)},l.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function _(A){if(A.bodyUsed)return Promise.reject(new TypeError("Already read"));A.bodyUsed=!0}function v(A){return new Promise(function(z,j){A.onload=function(){z(A.result)},A.onerror=function(){j(A.error)}})}function D(A){var z=new FileReader,j=v(z);return z.readAsArrayBuffer(A),j}function U(A){var z=new FileReader,j=v(z);return z.readAsText(A),j}function T(A){for(var z=new Uint8Array(A),j=new Array(z.length),se=0;se<z.length;se++)j[se]=String.fromCharCode(z[se]);return j.join("")}function N(A){if(A.slice)return A.slice(0);var z=new Uint8Array(A.byteLength);return z.set(new Uint8Array(A)),z.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(A){this._bodyInit=A,A?typeof A=="string"?this._bodyText=A:l.blob&&Blob.prototype.isPrototypeOf(A)?this._bodyBlob=A:l.formData&&FormData.prototype.isPrototypeOf(A)?this._bodyFormData=A:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(A)?this._bodyText=A.toString():l.arrayBuffer&&l.blob&&o(A)?(this._bodyArrayBuffer=N(A.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(A)||f(A))?this._bodyArrayBuffer=N(A):this._bodyText=A=Object.prototype.toString.call(A):this._bodyText="",this.headers.get("content-type")||(typeof A=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(A)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var A=_(this);if(A)return A;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?_(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(D)}),this.text=function(){var A=_(this);if(A)return A;if(this._bodyBlob)return U(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(T(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(C)}),this.json=function(){return this.text().then(JSON.parse)},this}var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(A){var z=A.toUpperCase();return E.indexOf(z)>-1?z:A}function I(A,z){z=z||{};var j=z.body;if(A instanceof I){if(A.bodyUsed)throw new TypeError("Already read");this.url=A.url,this.credentials=A.credentials,z.headers||(this.headers=new p(A.headers)),this.method=A.method,this.mode=A.mode,this.signal=A.signal,!j&&A._bodyInit!=null&&(j=A._bodyInit,A.bodyUsed=!0)}else this.url=String(A);if(this.credentials=z.credentials||this.credentials||"same-origin",(z.headers||!this.headers)&&(this.headers=new p(z.headers)),this.method=b(z.method||this.method||"GET"),this.mode=z.mode||this.mode||null,this.signal=z.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&j)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(j)}I.prototype.clone=function(){return new I(this,{body:this._bodyInit})};function C(A){var z=new FormData;return A.trim().split("&").forEach(function(j){if(j){var se=j.split("="),Z=se.shift().replace(/\+/g," "),G=se.join("=").replace(/\+/g," ");z.append(decodeURIComponent(Z),decodeURIComponent(G))}}),z}function O(A){var z=new p,j=A.replace(/\r?\n[\t ]+/g," ");return j.split(/\r?\n/).forEach(function(se){var Z=se.split(":"),G=Z.shift().trim();if(G){var H=Z.join(":").trim();z.append(G,H)}}),z}g.call(I.prototype);function k(A,z){z||(z={}),this.type="default",this.status=z.status===void 0?200:z.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in z?z.statusText:"OK",this.headers=new p(z.headers),this.url=z.url||"",this._initBody(A)}g.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},k.error=function(){var A=new k(null,{status:0,statusText:""});return A.type="error",A};var B=[301,302,303,307,308];k.redirect=function(A,z){if(B.indexOf(z)===-1)throw new RangeError("Invalid status code");return new k(null,{status:z,headers:{location:A}})},a.DOMException=s.DOMException;try{new a.DOMException}catch{a.DOMException=function(z,j){this.message=z,this.name=j;var se=Error(z);this.stack=se.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function P(A,z){return new Promise(function(j,se){var Z=new I(A,z);if(Z.signal&&Z.signal.aborted)return se(new a.DOMException("Aborted","AbortError"));var G=new XMLHttpRequest;function H(){G.abort()}G.onload=function(){var Q={status:G.status,statusText:G.statusText,headers:O(G.getAllResponseHeaders()||"")};Q.url="responseURL"in G?G.responseURL:Q.headers.get("X-Request-URL");var ee="response"in G?G.response:G.responseText;j(new k(ee,Q))},G.onerror=function(){se(new TypeError("Network request failed"))},G.ontimeout=function(){se(new TypeError("Network request failed"))},G.onabort=function(){se(new a.DOMException("Aborted","AbortError"))},G.open(Z.method,Z.url,!0),Z.credentials==="include"?G.withCredentials=!0:Z.credentials==="omit"&&(G.withCredentials=!1),"responseType"in G&&l.blob&&(G.responseType="blob"),Z.headers.forEach(function(Q,ee){G.setRequestHeader(ee,Q)}),Z.signal&&(Z.signal.addEventListener("abort",H),G.onreadystatechange=function(){G.readyState===4&&Z.signal.removeEventListener("abort",H)}),G.send(typeof Z._bodyInit>"u"?null:Z._bodyInit)})}return P.polyfill=!0,s.fetch||(s.fetch=P,s.Headers=p,s.Request=I,s.Response=k),a.Headers=p,a.Request=I,a.Response=k,a.fetch=P,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var r=n;e=r.fetch,e.default=r.fetch,e.fetch=r.fetch,e.Headers=r.Headers,e.Request=r.Request,e.Response=r.Response,i.exports=e})(yl,yl.exports);var Ma=yl.exports;const fb=la(Ma);function cb(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=hb(i))||e){t&&(i=t);var n=0,r=function(){};return{s:r,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(u){throw u},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){t=t.call(i)},n:function(){var u=t.next();return s=u.done,u},e:function(u){a=!0,l=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(a)throw l}}}}function hb(i,e){if(i){if(typeof i=="string")return nf(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return nf(i,e)}}function nf(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function fi(i,e,t){return e=sr(e),Dn(i,Hp()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function Hp(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hp=function(){return!!i})()}var db={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/ld+json":!0},$p={rdf:ea,owl:ea,n3:"text/n3",ttl:"text/turtle",nt:"text/n3",acl:"text/n3",html:"text/html",xml:"text/xml"},Xp=function(e){return{link:mr("http://www.w3.org/2007/ont/link#",e),http:mr("http://www.w3.org/2007/ont/http#",e),httph:mr("http://www.w3.org/2007/ont/httph#",e),rdf:mr("http://www.w3.org/1999/02/22-rdf-syntax-ns#",e),rdfs:mr("http://www.w3.org/2000/01/rdf-schema#",e),dc:mr("http://purl.org/dc/elements/1.1/",e),ldp:mr("http://www.w3.org/ns/ldp#",e)}},on=Xp(),zn=Qt(function i(e,t){Wt(this,i),Ue(this,"response",void 0),Ue(this,"dom",void 0),this.response=e,this.dom=t});Ue(zn,"pattern",void 0);var Kl=function(i){function e(){return Wt(this,e),fi(this,e,arguments)}return br(e,i),Qt(e,[{key:"parse",value:function(n,r,s){var a=n.store;this.dom||(this.dom=Di(r));var l=this.dom.documentElement;if(l.nodeName==="parsererror")return n.failFetch(s,"Badly formed XML in "+s.resource.value,"parse_error");var o=new ms(a);try{o.parse(this.dom,s.original.value,s.original)}catch(u){return n.failFetch(s,"Syntax error parsing RDF/XML! "+u,"parse_error")}return s.noMeta||a.add(s.original,on.rdf("type"),on.link("RDFDocument"),n.appNode),n.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"RDFXMLHandler"}},{key:"register",value:function(n){n.mediatypes[ea]={q:.9}}}])}(zn);Kl.pattern=new RegExp("application/rdf\\+xml");var ni=function(i){function e(){return Wt(this,e),fi(this,e,arguments)}return br(e,i),Qt(e,[{key:"parse",value:function(n,r,s){var a,l;this.dom||(this.dom=Di(r));var o=n.store,u=this.dom.getElementsByTagName("title");u.length>0&&o.add(s.resource,on.dc("title"),o.rdfFactory.literal(u[0].textContent),s.resource);for(var f=this.dom.getElementsByTagName("link"),d=f.length-1;d>=0;d--)a=f[d].getAttribute("rel"),l=!1,a||(a=f[d].getAttribute("rev"),l=!0),a&&n.linkData(s.original,a,f[d].getAttribute("href"),s.resource,l);for(var h=this.dom.getElementsByTagName("script"),c=0;c<h.length;c++){var p=h[c].getAttribute("type");db[p]&&(bl(h[c].textContent,o,s.original.value,p),bl(h[c].textContent,o,s.original.value,p))}if(s.noMeta||o.add(s.resource,on.rdf("type"),on.link("WebPage"),n.appNode),!s.noRDFa&&ts)try{ts(this.dom,o,s.original.value)}catch(v){var _="Error trying to parse "+s.resource+` as RDFa:
`+v+`:
`+v.stack;return n.failFetch(s,_,"parse_error")}return n.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"XHTMLHandler"}},{key:"register",value:function(n){n.mediatypes[pl]={}}}])}(zn);ni.pattern=new RegExp("application/xhtml");var rs=function(i){function e(){return Wt(this,e),fi(this,e,arguments)}return br(e,i),Qt(e,[{key:"parse",value:function(n,r,s){for(var a=Di(r),l=0;l<a.childNodes.length;l++){var o=a.childNodes[l];if(e.isElement(o)){var u=o.namespaceURI;if(u&&u===u.rdf){n.addStatus(s.req,"Has XML root element in the RDF namespace, so assume RDF/XML.");var f=new Kl(this.response,a);return f.parse(n,r,s)}break}}if(a.doctype&&a.doctype.name==="html"&&a.doctype.publicId.match(/^-\/\/W3C\/\/DTD XHTML/)&&a.doctype.systemId.match(/http:\/\/www.w3.org\/TR\/xhtml/)){n.addStatus(s.req,`Has XHTML DOCTYPE. Switching to XHTML Handler.
`);var d=new ni(this.response,a);return d.parse(n,r,s)}var h=a.getElementsByTagName("html")[0];if(h){var c=h.getAttribute("xmlns");if(c&&c.match(/^http:\/\/www.w3.org\/1999\/xhtml/)){n.addStatus(s.req,`Has a default namespace for XHTML. Switching to XHTMLHandler.
`);var p=new ni(this.response,a);return p.parse(n,r,s)}}return n.failFetch(s,`Unsupported dialect of XML: not RDF or XHTML namespace, etc.
`+r.slice(0,80),901)}}],[{key:"toString",value:function(){return"XMLHandler"}},{key:"register",value:function(n){n.mediatypes["text/xml"]={q:.5},n.mediatypes["application/xml"]={q:.5}}},{key:"isElement",value:function(n){return n.nodeType===Node.ELEMENT_NODE}}])}(zn);rs.pattern=new RegExp("(text|application)/(.*)xml");var Gp=function(i){function e(){return Wt(this,e),fi(this,e,arguments)}return br(e,i),Qt(e,[{key:"parse",value:function(n,r,s){var a=n.store;if(Jp(r)){n.addStatus(s.req,`Has an XML declaration. We'll assume it's XHTML as the content-type was text/html.
`);var l=new ni(this.response);return l.parse(n,r,s)}if(pb(r)){n.addStatus(s.req,`Has XHTML DOCTYPE. Switching to XHTMLHandler.
`);var o=new ni(this.response);return o.parse(n,r,s)}if(_b(r)){n.addStatus(s.req,`Has default namespace for XHTML, so switching to XHTMLHandler.
`);var u=new ni(this.response);return u.parse(n,r,s)}var f=new RegExp("<title>([\\s\\S]+?)</title>","im").exec(r);return f&&a.add(s.resource,on.dc("title"),a.rdfFactory.literal(f[1]),s.resource),a.add(s.resource,on.rdf("type"),on.link("WebPage"),n.appNode),n.addStatus(s.req,"non-XML HTML document, not parsed for data."),n.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"HTMLHandler"}},{key:"register",value:function(n){n.mediatypes["text/html"]={q:.9}}}])}(zn);Gp.pattern=new RegExp("text/html");var Qp=function(i){function e(){return Wt(this,e),fi(this,e,arguments)}return br(e,i),Qt(e,[{key:"parse",value:function(n,r,s,a){var l=n.store;return new Promise(function(o,u){try{Lp(r,l,s.original.value,function(){o(n.doneFetch(s,a))})}catch(d){var f="Error trying to parse "+s.resource+` as JSON-LD:
`+d;o(n.failFetch(s,f,"parse_error",a))}})}}],[{key:"toString",value:function(){return"JsonLdHandler"}},{key:"register",value:function(n){n.mediatypes["application/ld+json"]={q:.9}}}])}(zn);Qp.pattern=/application\/ld\+json/;var Wp=function(i){function e(){return Wt(this,e),fi(this,e,arguments)}return br(e,i),Qt(e,[{key:"parse",value:function(n,r,s){if(Jp(r)){n.addStatus(s.req,"Warning: "+s.resource+` has an XML declaration. We'll assume it's XML but its content-type wasn't XML.
`);var a=new rs(this.response);return a.parse(n,r,s)}if(r.slice(0,500).match(/xmlns:/)){n.addStatus(s.req,`May have an XML namespace. We'll assume it's XML but its content-type wasn't XML.
`);var l=new rs(this.response);return l.parse(n,r,s)}return n.addStatus(s.req,"Plain text document, no known RDF semantics."),n.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"TextHandler"}},{key:"register",value:function(n){n.mediatypes["text/plain"]={q:.5}}}])}(zn);Wp.pattern=new RegExp("text/plain");var Yp=function(i){function e(){return Wt(this,e),fi(this,e,arguments)}return br(e,i),Qt(e,[{key:"parse",value:function(n,r,s,a){var l=n.store,o=Ql(l,l,s.original.value,s.original.value,null,null,"",null);try{o.loadBuf(r)}catch(f){var u="Error trying to parse "+s.resource+` as Notation3:
`+f;return n.failFetch(s,u,"parse_error",a)}return n.addStatus(s.req,"N3 parsed: "+o.statementCount+" triples in "+o.lines+" lines."),n.store.add(s.original,on.rdf("type"),on.link("RDFDocument"),n.appNode),n.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"N3Handler"}},{key:"register",value:function(n){n.mediatypes["text/n3"]={q:"1.0"},n.mediatypes["text/turtle"]={q:1}}}])}(zn);Yp.pattern=new RegExp("(application|text)/(x-)?(rdf\\+)?(n3|turtle)");var wl={RDFXMLHandler:Kl,XHTMLHandler:ni,XMLHandler:rs,HTMLHandler:Gp,TextHandler:Wp,N3Handler:Yp,JsonLdHandler:Qp};function pb(i){var e=i.indexOf("<!DOCTYPE html"),t=i.indexOf(">");return e===-1||t===-1||e>t?!1:i.substr(e,t-e).indexOf("XHTML")!==-1}function Jp(i){var e=i.match(/\s*<\?xml\s+version\s*=[^<>]+\?>/);return!!e}function _b(i){var e=i.match(/[^(<html)]*<html\s+[^<]*xmlns=['"]http:\/\/www.w3.org\/1999\/xhtml["'][^<]*>/);return!!e}var Ri=function(){function i(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Wt(this,i),Ue(this,"store",void 0),Ue(this,"timeout",void 0),Ue(this,"_fetch",void 0),Ue(this,"mediatypes",void 0),Ue(this,"appNode",void 0),Ue(this,"requested",void 0),Ue(this,"timeouts",void 0),Ue(this,"redirectedTo",void 0),Ue(this,"fetchQueue",void 0),Ue(this,"fetchCallbacks",void 0),Ue(this,"nonexistent",void 0),Ue(this,"lookedUp",void 0),Ue(this,"handlers",void 0),Ue(this,"ns",void 0),Ue(this,"fireCallbacks",void 0),this.store=e||new pa,this.ns=Xp(this.store.rdfFactory),this.timeout=n.timeout||3e4,this._fetch=n.fetch||typeof global<"u"&&(global.solidFetcher||global.solidFetch)||typeof window<"u"&&(window.solidFetcher||window.solidFetch)||fb,!this._fetch)throw new Error("No _fetch function available for Fetcher");this.appNode=this.store.sym("chrome://TheCurrentSession"),this.store.fetcher=this,this.requested={},this.timeouts={},this.redirectedTo={},this.fetchQueue={},this.fetchCallbacks={},this.nonexistent={},this.lookedUp={},this.handlers=[],this.mediatypes={"image/*":{q:.9},"*/*":{q:.1}},Jg(this,["request","fail","refresh","retract","done"]),Object.keys(n.handlers||wl).map(function(r){return t.addHandler(wl[r])})}return Qt(i,[{key:"load",value:function(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r=Object.assign({},r),t instanceof Array)return Promise.all(t.map(function(v){return n.load(v,Object.assign({},r))}));var s=t,a=gi(s);a=a.split("#")[0],r=this.initFetchOptions(a,r);var l=this.appNode,o=this.store,u=o.statementsMatching(void 0,this.ns.link("requestedURI"),o.sym(a),l).map(function(v){return v.subject}),f=cb(u),d;try{for(f.s();!(d=f.n()).done;){var h=d.value,c=o.any(h,this.ns.link("response"),null,l);if(c!=null){var p=o.statementsMatching(c,this.ns.link("outOfDate"),!0,l);o.remove(p),r.force=!0,r.clearPreviousData=!0}}}catch(v){f.e(v)}finally{f.f()}var _=this.initFetchOptions(a,r);return this.pendingFetchPromise(a,_.baseURI,_)}},{key:"pendingFetchPromise",value:function(){var e=wu(Pa.mark(function n(r,s,a){var l=this,o;return Pa.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(f.t0=!a.force,!f.t0){f.next=5;break}return f.next=4,this.fetchQueue[s];case 4:f.t0=f.sent;case 5:if(!f.t0){f.next=9;break}o=this.fetchQueue[s],f.next=12;break;case 9:o=Promise.race([this.setRequestTimeout(r,a),this.fetchUri(r,a)]),this.fetchQueue[s]=o,this.cleanupFetchRequest(s,void 0,this.timeout);case 12:return f.abrupt("return",o.then(function(d){return r in l.timeouts&&(l.timeouts[r].forEach(clearTimeout),delete l.timeouts[r]),d}));case 13:case"end":return f.stop()}},n,this)}));function t(n,r,s){return e.apply(this,arguments)}return t}()},{key:"cleanupFetchRequest",value:function(t,n,r){var s=this;n!==void 0&&console.warn("_options is deprecated"),this.timeouts[t]=(this.timeouts[t]||[]).concat(setTimeout(function(){s.isPending(t)||delete s.fetchQueue[t]},r))}},{key:"initFetchOptions",value:function(t,n){var r=this.store,s=!n.method||n.method.toUpperCase()==="GET";s||(n.force=!0),n.resource=r.rdfFactory.namedNode(t),n.baseURI=n.baseURI||t,n.original=r.rdfFactory.namedNode(n.baseURI),n.req=r.bnode(),n.headers=n.headers||new Ma.Headers,n.contentType&&(n.headers["content-type"]=n.contentType),n.force&&(n.cache="no-cache");var a=this.acceptString();n.headers.accept=a;var l=i.offlineOverride(t);n.requestedURI=l,i.setCredentials(l,n);var o=i.proxyIfNecessary(l);return l!==o&&(n.proxyUsed=!0),n.actualProxyURI=o,n}},{key:"fetchUri",value:function(t,n){var r=this;if(!t)return Promise.reject(new Error("Cannot fetch an empty uri"));if(i.unsupportedProtocol(t))return this.failFetch(n,"fetcher: Unsupported protocol","unsupported_protocol");var s=this.getState(t);if(n.force)delete this.nonexistent[t];else{if(s==="fetched")return Promise.resolve(this.doneFetch(n,{status:200,ok:!0,statusText:"Already loaded into quadstore."}));if(s==="failed"&&this.requested[t]===404){var a="Previously failed: "+this.requested[t],l={url:t,status:this.requested[t],statusText:a,responseText:a,headers:new Ma.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return this.failFetch(n,a,this.requested[t],l)}}this.fireCallbacks("request",[t]),this.requested[t]=!0,n.noMeta||this.saveRequestMetadata(t,n);var o=n.actualProxyURI;return this._fetch(o,n).then(function(u){return r.handleResponse(u,t,n)},function(u){var f={url:o,status:999,statusText:(u.name||"network failure")+": "+(u.errno||u.code||u.type),responseText:u.message,headers:new Ma.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return r.handleError(f,t,n)})}},{key:"nowOrWhenFetched",value:function(t,n,r){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=gi(t);typeof n=="function"?r=n:typeof n>"u"||(bu(n)?s.referringTerm=n:s=n),this.load(a,s).then(function(l){if(r)if(l)if(l.ok)r(!0,"OK",l);else{var o="HTTP error: Status "+l.status+" ("+l.statusText+")";l.responseText&&(o+=" "+l.responseText),r(!1,o,l)}else{var u="@@ nowOrWhenFetched:  no response object!";r(!1,u)}},function(l){var o=l.message||l.statusText;o="Failed to load  <"+a+"> "+o,l.response&&l.response.status&&(o+=" status: "+l.response.status),r(!1,o,l.response)})}},{key:"addStatus",value:function(t,n){var r=new Date;n="["+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds()+"."+r.getMilliseconds()+"] "+n;var s=this.store,a=s.the(t,this.ns.link("status"));Ll(a)&&a.append(s.rdfFactory.literal(n))}},{key:"failFetch",value:function(t,n,r,s){this.addStatus(t.req,n),t.noMeta||this.store.add(t.original,this.ns.link("error"),this.store.rdfFactory.literal(n));var a=(t.method||"GET").toUpperCase(),l=a==="GET"||a==="HEAD";l&&(t.resource.equals(t.original),this.requested[wi(t.original.value)]=r,this.fireCallbacks("fail",[t.original.value,n]));var o=new Error("Fetcher: "+n);return o.status=r,o.statusText=n,o.response=s,Promise.reject(o)}},{key:"linkData",value:function(t,n,r,s,a){if(r){var l=this.store,o,u=l.rdfFactory.namedNode(qr(r,t.value));if(n==="alternate"||n==="seeAlso"||n==="meta"||n==="describedby"){if(u.value===t.value)return;o=this.ns.rdfs("seeAlso")}else n==="type"?o=l.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):o=l.rdfFactory.namedNode(qr(encodeURIComponent(n),"http://www.iana.org/assignments/link-relations/"));a?l.add(u,o,t,s):l.add(t,o,u,s)}}},{key:"parseLinkHeader",value:function(t,n,r){if(t){var s=/<[^>]*>\s*(\s*;\s*[^()<>@,;:"/[\]?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*")))*(,|$)/g,a=/[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*"))/g,l=t.match(s);if(l!=null)for(var o=0;o<l.length;o++){var u=l[o].split(">"),f=u[0].substring(1),d=u[1],h=d.match(a);if(h==null)return;for(var c=0;c<h.length;c++){var p=h[c],_=p.split("="),v=_[1].replace(/["']/g,"");this.linkData(n,v,f,r)}}}}},{key:"doneFetch",value:function(t,n){return this.addStatus(t.req,"Done."),this.requested[t.original.value]="done",this.fireCallbacks("done",[t.original.value]),n.req=t.req,n}},{key:"nowKnownAs",value:function(t,n){this.lookedUp[t.value]?this.lookedUp[n.value]||this.lookUpThing(n,t):this.lookedUp[n.value]&&(this.lookedUp[t.value]||this.lookUpThing(t,n))}},{key:"putBack",value:function(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=gi(t),a=new hr(s).doc();return r.contentType=r["content-type"]||r["Content-Type"]||r.contentType||ti,r.contentType==="application/ld+json"?new Promise(function(l,o){aa(a,n.store,a.uri,r.contentType,function(u,f){u?o(u):(r.data=f,n.webOperation("PUT",t,r).then(function(d){return l(d)}).catch(function(d){return o(d)}))})}):(r.data=aa(a,this.store,a.value,r.contentType),this.webOperation("PUT",s,r))}},{key:"webCopy",value:function(t,n,r){var s=this;return this.webOperation("GET",t).then(function(a){return s.webOperation("PUT",n,{data:a.responseText,contentType:r})})}},{key:"delete",value:function(t,n){var r=this;return this.webOperation("DELETE",t,n).then(function(s){return r.requested[t]=404,r.nonexistent[t]=!0,r.unload(r.store.rdfFactory.namedNode(t)),s})}},{key:"createIfNotExists",value:function(){var e=wu(Pa.mark(function n(r){var s,a,l,o,u=arguments;return Pa.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return s=u.length>1&&u[1]!==void 0?u[1]:ti,a=u.length>2&&u[2]!==void 0?u[2]:"",l=this,d.prev=3,d.next=6,l.load(r);case 6:o=d.sent,d.next=26;break;case 9:if(d.prev=9,d.t0=d.catch(3),d.t0.response.status!==404){d.next=25;break}return d.prev=12,d.next=15,l.webOperation("PUT",r.value,{data:a,contentType:s});case 15:o=d.sent,d.next=21;break;case 18:throw d.prev=18,d.t1=d.catch(12),d.t1;case 21:return delete l.requested[r.value],d.abrupt("return",o);case 25:throw d.t0;case 26:return d.abrupt("return",o);case 27:case"end":return d.stop()}},n,this,[[3,9],[12,18]])}));function t(n){return e.apply(this,arguments)}return t}()},{key:"createContainer",value:function(t,n,r){var s={"content-type":ti,link:this.ns.ldp("BasicContainer")+'; rel="type"'};n&&(s.slug=n);var a={headers:s};return r&&(a.body=r),this.webOperation("POST",t,a)}},{key:"invalidateCache",value:function(t){var n=gi(t),r=this;if(r.fetchQueue&&r.fetchQueue[n]){var s=r.fetchQueue[n];s.PromiseStatus,delete r.fetchQueue[n]}if(r.requested[n]&&r.requested[n]!=="done"&&r.requested[n]!=="failed"&&r.requested[n]!==404){var a="Rdflib: fetcher: Destructive operation on <".concat(r.requested[n],"> file being fetched! ")+n;console.error(a)}else delete r.requested[n],delete r.nonexistent[n]}},{key:"webOperation",value:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=gi(n);r.method=t,r.body=r.data||r.body,r.force=!0;var a=this;if(r.body&&!r.contentType)throw new Error("Web operation sending data must have a defined contentType.");return r.contentType&&(r.headers=r.headers||{},r.headers["content-type"]=r.contentType),i.setCredentials(s,r),new Promise(function(l,o){a._fetch(s,r).then(function(u){if(u.ok)(t==="PUT"||t==="PATCH"||t==="POST"||t==="DELETE")&&a.invalidateCache(s),u.text?u.text().then(function(h){u.responseText=h,l(u)}):l(u);else{var f="Web error: "+u.status;u.statusText&&(f+=" ("+u.statusText+")"),f+=" on "+t+" of <"+s+">",u.responseText&&(f+=": "+u.responseText);var d=new Error(f);d.response=u,o(d)}},function(u){var f="Fetch error for "+t+" of <"+s+">:"+u;o(new Error(f))})})}},{key:"lookUpThing",value:function(t,n){var r=this,s=this.store.uris(t);return s=s.map(function(a){return wi(a)}),s.forEach(function(a){r.lookedUp[a]=!0}),this.load(s,{referringTerm:n})}},{key:"getHeader",value:function(t,n){for(var r=this.store,s=t.value,a=r.each(void 0,this.ns.link("requestedURI"),r.rdfFactory.literal(s)),l=0;l<a.length;l++){var o=a[l];if(o!==void 0){var u=r.any(o,this.ns.link("response"));if(u!==void 0&&r.anyValue(u,this.ns.http("status"))&&r.anyValue(u,this.ns.http("status")).startsWith("2")){var f=r.each(u,this.ns.httph(n.toLowerCase()));return f.length?f.map(function(d){return d.value}):[]}}}}},{key:"saveRequestMetadata",value:function(t,n){var r=n.req,s=this.store,a=n.referringTerm;this.addStatus(n.req,"Accept: "+n.headers.accept),bu(a)&&s.add(s.rdfFactory.namedNode(t),this.ns.link("requestedBy"),a,this.appNode),n.original&&n.original.value!==t&&s.add(r,this.ns.link("orginalURI"),s.rdfFactory.literal(n.original.value),this.appNode);var l=new Date,o="["+l.getHours()+":"+l.getMinutes()+":"+l.getSeconds()+"] ";s.add(r,this.ns.rdfs("label"),s.rdfFactory.literal(o+" Request for "+t),this.appNode),s.add(r,this.ns.link("requestedURI"),s.rdfFactory.literal(t),this.appNode),s.add(r,this.ns.link("status"),s.collection(),this.appNode)}},{key:"saveResponseMetadata",value:function(t,n){var r=this,s=this.store,a=s.bnode();return s.add(n.req,this.ns.link("response"),a,this.appNode),s.add(a,this.ns.http("status"),s.rdfFactory.literal(t.status),this.appNode),s.add(a,this.ns.http("statusText"),s.rdfFactory.literal(t.statusText),this.appNode),t.headers.forEach(function(l,o){s.add(a,r.ns.httph(o),r.store.rdfFactory.literal(l),r.appNode),o==="content-type"&&s.add(n.resource,r.ns.rdf("type"),s.rdfFactory.namedNode(Yg(l).value),r.appNode)}),a}},{key:"objectRefresh",value:function(t){var n=this.store.uris(t);if(typeof n<"u")for(var r=0;r<n.length;r++)this.refresh(this.store.rdfFactory.namedNode(wi(n[r])))}},{key:"refresh",value:function(t,n){this.fireCallbacks("refresh",arguments),this.nowOrWhenFetched(t,{force:!0,clearPreviousData:!0},n)}},{key:"refreshIfExpired",value:function(t,n){var r=this.getHeader(t,"Expires");!r||new Date(r[0]).getTime()<=new Date().getTime()?this.refresh(t,n):n(!0,"Not expired",{})}},{key:"retract",value:function(t){this.store.removeMany(void 0,void 0,void 0,t),t.value&&delete this.requested[wi(t.value)],this.fireCallbacks("retract",arguments)}},{key:"getState",value:function(t){return typeof this.requested[t]>"u"?"unrequested":this.requested[t]===!0?"requested":this.requested[t]==="done"?"fetched":this.requested[t]==="redirected"?this.getState(this.redirectedTo[t]):"failed"}},{key:"isPending",value:function(t){return this.requested[t]===!0}},{key:"unload",value:function(t){this.store.removeDocument(t),delete this.requested[t.value]}},{key:"addHandler",value:function(t){this.handlers.push(t),t.register(this)}},{key:"retryNoCredentials",value:function(t,n){n.retriedWithNoCredentials=!0,delete this.requested[t],delete this.fetchQueue[t];var r=Object.assign({},n,{credentials:"omit"});return this.addStatus(n.req,"Abort: Will retry with credentials SUPPRESSED to see if that helps"),this.load(t,r)}},{key:"isCrossSite",value:function(t){if(typeof document>"u"||!document.location)return!1;var n=wg,r=""+document.location;return(n(r)&&n(t)&&n(r))!==n(t)}},{key:"handleError",value:function(t,n,r){if(this.isCrossSite(n)){if(r.credentials&&r.credentials==="include"&&!r.retriedWithNoCredentials)return this.retryNoCredentials(n,r);var s=i.crossSiteProxy(n);if(s&&!r.proxyUsed)return this.redirectToProxy(s,r)}var a;return t instanceof Error?a="Fetch error: "+t.message:(a=t.statusText,t.responseText&&(a+=" ".concat(t.responseText))),this.failFetch(r,a,t.status||998,t)}},{key:"addType",value:function(t,n,r,s){var a=n;if(s){var l=r.any(a,this.ns.link("requestedURI"));l&&l.value!==s&&r.add(r.rdfFactory.namedNode(s),this.ns.rdf("type"),t,this.appNode)}for(;;){var o=r.any(a,this.ns.link("requestedURI"));if(o&&o.value&&r.add(r.rdfFactory.namedNode(o.value),this.ns.rdf("type"),t,this.appNode),a=r.any(void 0,r.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#redirectedRequest"),a),!a)break;var u=r.any(a,r.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#response"));if(!u)break;var f=r.any(u,r.rdfFactory.namedNode("http://www.w3.org/2007/ont/http#status"));if(!f||f!=="301"&&f!=="302")break}}},{key:"handleResponse",value:function(t,n,r){var s=this,a=this.store,l=t.headers,o=r.req,u=this.saveResponseMetadata(t,r),f=this.normalizedContentType(r,l)||"",d=l.get("content-location");if(t.status===0)return this.handleError(t,n,r);if(t.status>=400)return t.status===404&&(this.nonexistent[r.original.value]=!0,this.nonexistent[n]=!0),this.saveErrorResponse(t,u).then(function(){var U=r.resource+" "+t.statusText;return s.failFetch(r,U,t.status,t)});var h=null,c=null;if(d&&(c=qr(d,n),c!==n&&(h=c)),t.status===200){if(this.addType(this.ns.link("Document"),o,a,n),h&&this.addType(this.ns.link("Document"),o,a,h),r.clearPreviousData)for(var p=a.statementsMatching(void 0,void 0,void 0,r.resource).slice(),_=0;_<p.length;_++)a.removeStatement(p[_]);var v=f.includes("image/")||f.includes("application/pdf");f&&v&&(this.addType(a.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),o,a,n),h&&this.addType(a.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),o,a,h))}if(d){if(!r.force&&h&&this.requested[c]==="done")return this.doneFetch(r,t);this.requested[c]=!0}this.parseLinkHeader(l.get("link"),r.original,o);var D=this.handlerForContentType(f,t);return D?t.text().then(function(U){return t.responseText=U,D.parse(s,U,r,t)}):(this.addStatus(o,"Fetch over. No data handled."),this.doneFetch(r,t))}},{key:"saveErrorResponse",value:function(t,n){var r=this,s=this.store;return t.text().then(function(a){a.length>10&&s.add(n,r.ns.http("content"),s.rdfFactory.literal(a),n)})}},{key:"handlerForContentType",value:function(t,n){if(!t)return null;var r=this.handlers.find(function(s){return t.match(s.pattern)});return r?new r(n):null}},{key:"guessContentType",value:function(t){return $p[t.split(".").pop()]}},{key:"normalizedContentType",value:function(t,n){if(t.forceContentType)return t.forceContentType;var r=n.get("content-type");if(!r||r.includes("application/octet-stream")){var s=this.guessContentType(t.resource.value);if(s)return s}var a=Du(t.resource.value);return!r&&["file","chrome"].includes(a)?"text/xml":r}},{key:"redirectToProxy",value:function(t,n){var r=this;this.addStatus(n.req,"BLOCKED -> Cross-site Proxy to <"+t+">"),n.proxyUsed=!0;var s=this.store,a=n.req;n.noMeta||(s.add(a,this.ns.link("redirectedTo"),s.rdfFactory.namedNode(t),a),this.addStatus(a,"redirected to new request")),this.requested[n.resource.value]="redirected",this.redirectedTo[n.resource.value]=t;var l=Object.assign({},n);return l.baseURI=n.resource.value,this.fetchUri(t,l).then(function(o){return l.noMeta||s.add(a,r.ns.link("redirectedRequest"),l.req,r.appNode),o})}},{key:"setRequestTimeout",value:function(t,n){var r=this;return new Promise(function(s){r.timeouts[t]=(r.timeouts[t]||[]).concat(setTimeout(function(){r.isPending(t)&&!n.retriedWithNoCredentials&&!n.proxyUsed&&s(r.failFetch(n,"Request to ".concat(t," timed out"),"timeout"))},r.timeout))})}},{key:"addFetchCallback",value:function(t,n){this.fetchCallbacks[t]?this.fetchCallbacks[t].push(n):this.fetchCallbacks[t]=[n]}},{key:"acceptString",value:function(){var t="";for(var n in this.mediatypes){t!==""&&(t+=", "),t+=n;for(var r in this.mediatypes[n])t+=";"+r+"="+this.mediatypes[n][r]}return t}}],[{key:"crossSiteProxy",value:function(t){if(i.crossSiteProxyTemplate)return i.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(t))}},{key:"offlineOverride",value:function(t){var n=t,r;return typeof window<"u"&&window.panes&&(r=window.panes.UI)&&r.preferences&&r.preferences.get("offlineModeUsingLocalhost")&&n.slice(0,7)==="http://"&&n.slice(7,17)!=="localhost/"&&(n="http://localhost/"+n.slice(7)),n}},{key:"proxyIfNecessary",value:function(t){var n;if(typeof window<"u"&&window.panes&&(n=window.panes.UI)&&n.isExtension)return t;if(typeof $SolidTestEnvironment<"u"&&$SolidTestEnvironment.localSiteMap){var r=t.split("/").slice(2),s=function l(o,u){var f=u[o.shift()];return f?typeof f=="string"?f+o.join("/"):o?l(o,f):null:null},a=s(r,$SolidTestEnvironment.localSiteMap);if(a)return a}return i.crossSiteProxyTemplate&&typeof document<"u"&&document.location&&(""+document.location).slice(0,6)==="https:"&&t.slice(0,5)==="http:"?i.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(t)):t}},{key:"unsupportedProtocol",value:function(t){var n=Du(t);return n==="tel"||n==="mailto"||n==="urn"}},{key:"setCredentials",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};n.credentials===void 0&&(n.withCredentials!==void 0?n.credentials=n.withCredentials?"include":"omit":n.credentials="include")}}])}();Ue(Ri,"HANDLERS",void 0);Ue(Ri,"CONTENT_TYPE_BY_EXT",void 0);Ue(Ri,"crossSiteProxyTemplate",void 0);Ri.HANDLERS=wl;Ri.CONTENT_TYPE_BY_EXT=$p;function af(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function sf(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?af(Object(t),!0).forEach(function(n){Ue(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):af(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}var La=sf(sf({},gl),{},{fetcher:function(e,t){return new Ri(e,t)},graph:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return new pa(e,t||{rdfFactory:gl})},lit:function(e,t,n){return this.literal(""+e,t||n)},st:function(e,t,n,r){return this.quad(e,t,n,r)}}),gs={};for(var Ks in La)typeof La[Ks]=="function"&&(gs[Ks]=La[Ks].bind(La));var vb=gs.graph,Kp=gs.namedNode,mb=gs.literal;new Rp;xt.fromValue;an.nextId;let me,zr=0,Yi=null;function xa(){return(Yi===null||Yi.byteLength===0)&&(Yi=new Uint8Array(me.memory.buffer)),Yi}const Va=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},gb=typeof Va.encodeInto=="function"?function(i,e){return Va.encodeInto(i,e)}:function(i,e){const t=Va.encode(i);return e.set(t),{read:i.length,written:t.length}};function gn(i,e,t){if(t===void 0){const l=Va.encode(i),o=e(l.length,1)>>>0;return xa().subarray(o,o+l.length).set(l),zr=l.length,o}let n=i.length,r=e(n,1)>>>0;const s=xa();let a=0;for(;a<n;a++){const l=i.charCodeAt(a);if(l>127)break;s[r+a]=l}if(a!==n){a!==0&&(i=i.slice(a)),r=t(r,n,n=a+i.length*3,1)>>>0;const l=xa().subarray(r+a,r+n),o=gb(i,l);a+=o.written,r=t(r,n,a,1)>>>0}return zr=a,r}function Zl(i){return i==null}let Ji=null;function Me(){return(Ji===null||Ji.byteLength===0)&&(Ji=new Int32Array(me.memory.buffer)),Ji}const Zp=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Zp.decode();function Lt(i,e){return i=i>>>0,Zp.decode(xa().subarray(i,i+e))}function ir(i){const e=me.__wbindgen_export_2.get(i);return me.__externref_table_dealloc(i),e}function bb(i){try{const r=me.__wbindgen_add_to_stack_pointer(-16),s=gn(i,me.__wbindgen_malloc,me.__wbindgen_realloc),a=zr;me.namedNode(r,s,a);var e=Me()[r/4+0],t=Me()[r/4+1],n=Me()[r/4+2];if(n)throw ir(t);return Fi.__wrap(e)}finally{me.__wbindgen_add_to_stack_pointer(16)}}function yb(i){try{const a=me.__wbindgen_add_to_stack_pointer(-16);var e=Zl(i)?0:gn(i,me.__wbindgen_malloc,me.__wbindgen_realloc),t=zr;me.blankNode(a,e,t);var n=Me()[a/4+0],r=Me()[a/4+1],s=Me()[a/4+2];if(s)throw ir(r);return _a.__wrap(n)}finally{me.__wbindgen_add_to_stack_pointer(16)}}function wb(i,e){try{const l=me.__wbindgen_add_to_stack_pointer(-16);var t=Zl(i)?0:gn(i,me.__wbindgen_malloc,me.__wbindgen_realloc),n=zr;me.literal(l,t,n,e);var r=Me()[l/4+0],s=Me()[l/4+1],a=Me()[l/4+2];if(a)throw ir(s);return ma.__wrap(r)}finally{me.__wbindgen_add_to_stack_pointer(16)}}function Eb(){const i=me.defaultGraph();return va.__wrap(i)}function Db(i){try{const r=me.__wbindgen_add_to_stack_pointer(-16),s=gn(i,me.__wbindgen_malloc,me.__wbindgen_realloc),a=zr;me.variable(r,s,a);var e=Me()[r/4+0],t=Me()[r/4+1],n=Me()[r/4+2];if(n)throw ir(t);return ga.__wrap(e)}finally{me.__wbindgen_add_to_stack_pointer(16)}}function kb(i,e,t){try{const a=me.__wbindgen_add_to_stack_pointer(-16);me.triple(a,i,e,t);var n=Me()[a/4+0],r=Me()[a/4+1],s=Me()[a/4+2];if(s)throw ir(r);return Oi.__wrap(n)}finally{me.__wbindgen_add_to_stack_pointer(16)}}function Ab(i,e,t,n){try{const l=me.__wbindgen_add_to_stack_pointer(-16);me.quad(l,i,e,t,n);var r=Me()[l/4+0],s=Me()[l/4+1],a=Me()[l/4+2];if(a)throw ir(s);return Oi.__wrap(r)}finally{me.__wbindgen_add_to_stack_pointer(16)}}function Cb(i){try{const r=me.__wbindgen_add_to_stack_pointer(-16);me.fromTerm(r,i);var e=Me()[r/4+0],t=Me()[r/4+1],n=Me()[r/4+2];if(n)throw ir(t);return ir(e)}finally{me.__wbindgen_add_to_stack_pointer(16)}}function Tb(i){try{const r=me.__wbindgen_add_to_stack_pointer(-16);me.fromQuad(r,i);var e=Me()[r/4+0],t=Me()[r/4+1],n=Me()[r/4+2];if(n)throw ir(t);return ir(e)}finally{me.__wbindgen_add_to_stack_pointer(16)}}let Ki=null;function Nb(){return(Ki===null||Ki.byteLength===0)&&(Ki=new Uint32Array(me.memory.buffer)),Ki}function Sb(i,e){i=i>>>0;const n=Nb().subarray(i/4,i/4+e),r=[];for(let s=0;s<n.length;s++)r.push(me.__wbindgen_export_2.get(n[s]));return me.__externref_drop_slice(i,e),r}function Pb(){me.main()}function Ib(i){const e=me.__externref_table_alloc();return me.__wbindgen_export_2.set(e,i),e}function Lr(i,e){try{return i.apply(this,e)}catch(t){const n=Ib(t);me.__wbindgen_exn_store(n)}}const lf=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>me.__wbg_blanknode_free(i>>>0));class _a{static __wrap(e){e=e>>>0;const t=Object.create(_a.prototype);return t.__wbg_ptr=e,lf.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,lf.unregister(this),e}free(){const e=this.__destroy_into_raw();me.__wbg_blanknode_free(e)}get termType(){let e,t;try{const s=me.__wbindgen_add_to_stack_pointer(-16);me.blanknode_term_type(s,this.__wbg_ptr);var n=Me()[s/4+0],r=Me()[s/4+1];return e=n,t=r,Lt(n,r)}finally{me.__wbindgen_add_to_stack_pointer(16),me.__wbindgen_free(e,t,1)}}get value(){let e,t;try{const s=me.__wbindgen_add_to_stack_pointer(-16);me.blanknode_value(s,this.__wbg_ptr);var n=Me()[s/4+0],r=Me()[s/4+1];return e=n,t=r,Lt(n,r)}finally{me.__wbindgen_add_to_stack_pointer(16),me.__wbindgen_free(e,t,1)}}toString(){let e,t;try{const s=me.__wbindgen_add_to_stack_pointer(-16);me.blanknode_toString(s,this.__wbg_ptr);var n=Me()[s/4+0],r=Me()[s/4+1];return e=n,t=r,Lt(n,r)}finally{me.__wbindgen_add_to_stack_pointer(16),me.__wbindgen_free(e,t,1)}}equals(e){return me.blanknode_equals(this.__wbg_ptr,e)!==0}}const of=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>me.__wbg_defaultgraph_free(i>>>0));class va{static __wrap(e){e=e>>>0;const t=Object.create(va.prototype);return t.__wbg_ptr=e,of.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,of.unregister(this),e}free(){const e=this.__destroy_into_raw();me.__wbg_defaultgraph_free(e)}get termType(){let e,t;try{const s=me.__wbindgen_add_to_stack_pointer(-16);me.defaultgraph_term_type(s,this.__wbg_ptr);var n=Me()[s/4+0],r=Me()[s/4+1];return e=n,t=r,Lt(n,r)}finally{me.__wbindgen_add_to_stack_pointer(16),me.__wbindgen_free(e,t,1)}}get value(){let e,t;try{const s=me.__wbindgen_add_to_stack_pointer(-16);me.defaultgraph_value(s,this.__wbg_ptr);var n=Me()[s/4+0],r=Me()[s/4+1];return e=n,t=r,Lt(n,r)}finally{me.__wbindgen_add_to_stack_pointer(16),me.__wbindgen_free(e,t,1)}}toString(){let e,t;try{const s=me.__wbindgen_add_to_stack_pointer(-16);me.defaultgraph_toString(s,this.__wbg_ptr);var n=Me()[s/4+0],r=Me()[s/4+1];return e=n,t=r,Lt(n,r)}finally{me.__wbindgen_add_to_stack_pointer(16),me.__wbindgen_free(e,t,1)}}equals(e){return me.defaultgraph_equals(this.__wbg_ptr,e)!==0}}const uf=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>me.__wbg_literal_free(i>>>0));class ma{static __wrap(e){e=e>>>0;const t=Object.create(ma.prototype);return t.__wbg_ptr=e,uf.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,uf.unregister(this),e}free(){const e=this.__destroy_into_raw();me.__wbg_literal_free(e)}get termType(){let e,t;try{const s=me.__wbindgen_add_to_stack_pointer(-16);me.literal_term_type(s,this.__wbg_ptr);var n=Me()[s/4+0],r=Me()[s/4+1];return e=n,t=r,Lt(n,r)}finally{me.__wbindgen_add_to_stack_pointer(16),me.__wbindgen_free(e,t,1)}}get value(){let e,t;try{const s=me.__wbindgen_add_to_stack_pointer(-16);me.literal_value(s,this.__wbg_ptr);var n=Me()[s/4+0],r=Me()[s/4+1];return e=n,t=r,Lt(n,r)}finally{me.__wbindgen_add_to_stack_pointer(16),me.__wbindgen_free(e,t,1)}}get language(){let e,t;try{const s=me.__wbindgen_add_to_stack_pointer(-16);me.literal_language(s,this.__wbg_ptr);var n=Me()[s/4+0],r=Me()[s/4+1];return e=n,t=r,Lt(n,r)}finally{me.__wbindgen_add_to_stack_pointer(16),me.__wbindgen_free(e,t,1)}}get datatype(){const e=me.literal_datatype(this.__wbg_ptr);return Fi.__wrap(e)}toString(){let e,t;try{const s=me.__wbindgen_add_to_stack_pointer(-16);me.literal_toString(s,this.__wbg_ptr);var n=Me()[s/4+0],r=Me()[s/4+1];return e=n,t=r,Lt(n,r)}finally{me.__wbindgen_add_to_stack_pointer(16),me.__wbindgen_free(e,t,1)}}equals(e){return me.literal_equals(this.__wbg_ptr,e)!==0}}const ff=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>me.__wbg_namednode_free(i>>>0));class Fi{static __wrap(e){e=e>>>0;const t=Object.create(Fi.prototype);return t.__wbg_ptr=e,ff.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,ff.unregister(this),e}free(){const e=this.__destroy_into_raw();me.__wbg_namednode_free(e)}get termType(){let e,t;try{const s=me.__wbindgen_add_to_stack_pointer(-16);me.namednode_term_type(s,this.__wbg_ptr);var n=Me()[s/4+0],r=Me()[s/4+1];return e=n,t=r,Lt(n,r)}finally{me.__wbindgen_add_to_stack_pointer(16),me.__wbindgen_free(e,t,1)}}get value(){let e,t;try{const s=me.__wbindgen_add_to_stack_pointer(-16);me.namednode_value(s,this.__wbg_ptr);var n=Me()[s/4+0],r=Me()[s/4+1];return e=n,t=r,Lt(n,r)}finally{me.__wbindgen_add_to_stack_pointer(16),me.__wbindgen_free(e,t,1)}}toString(){let e,t;try{const s=me.__wbindgen_add_to_stack_pointer(-16);me.namednode_toString(s,this.__wbg_ptr);var n=Me()[s/4+0],r=Me()[s/4+1];return e=n,t=r,Lt(n,r)}finally{me.__wbindgen_add_to_stack_pointer(16),me.__wbindgen_free(e,t,1)}}equals(e){return me.namednode_equals(this.__wbg_ptr,e)!==0}}const cf=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>me.__wbg_quad_free(i>>>0));class Oi{static __wrap(e){e=e>>>0;const t=Object.create(Oi.prototype);return t.__wbg_ptr=e,cf.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,cf.unregister(this),e}free(){const e=this.__destroy_into_raw();me.__wbg_quad_free(e)}get termType(){let e,t;try{const s=me.__wbindgen_add_to_stack_pointer(-16);me.quad_term_type(s,this.__wbg_ptr);var n=Me()[s/4+0],r=Me()[s/4+1];return e=n,t=r,Lt(n,r)}finally{me.__wbindgen_add_to_stack_pointer(16),me.__wbindgen_free(e,t,1)}}get value(){let e,t;try{const s=me.__wbindgen_add_to_stack_pointer(-16);me.defaultgraph_value(s,this.__wbg_ptr);var n=Me()[s/4+0],r=Me()[s/4+1];return e=n,t=r,Lt(n,r)}finally{me.__wbindgen_add_to_stack_pointer(16),me.__wbindgen_free(e,t,1)}}get subject(){return me.quad_subject(this.__wbg_ptr)}get predicate(){return me.quad_predicate(this.__wbg_ptr)}get object(){return me.quad_object(this.__wbg_ptr)}get graph(){return me.quad_graph(this.__wbg_ptr)}toString(){let e,t;try{const s=me.__wbindgen_add_to_stack_pointer(-16);me.quad_toString(s,this.__wbg_ptr);var n=Me()[s/4+0],r=Me()[s/4+1];return e=n,t=r,Lt(n,r)}finally{me.__wbindgen_add_to_stack_pointer(16),me.__wbindgen_free(e,t,1)}}equals(e){return me.quad_equals(this.__wbg_ptr,e)!==0}}const Rb=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>me.__wbg_store_free(i>>>0));class e_{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Rb.unregister(this),e}free(){const e=this.__destroy_into_raw();me.__wbg_store_free(e)}constructor(e){try{const s=me.__wbindgen_add_to_stack_pointer(-16);me.store_new(s,e);var t=Me()[s/4+0],n=Me()[s/4+1],r=Me()[s/4+2];if(r)throw ir(n);return this.__wbg_ptr=t>>>0,this}finally{me.__wbindgen_add_to_stack_pointer(16)}}add(e){try{const r=me.__wbindgen_add_to_stack_pointer(-16);me.store_add(r,this.__wbg_ptr,e);var t=Me()[r/4+0],n=Me()[r/4+1];if(n)throw ir(t)}finally{me.__wbindgen_add_to_stack_pointer(16)}}delete(e){try{const r=me.__wbindgen_add_to_stack_pointer(-16);me.store_delete(r,this.__wbg_ptr,e);var t=Me()[r/4+0],n=Me()[r/4+1];if(n)throw ir(t)}finally{me.__wbindgen_add_to_stack_pointer(16)}}has(e){try{const s=me.__wbindgen_add_to_stack_pointer(-16);me.store_has(s,this.__wbg_ptr,e);var t=Me()[s/4+0],n=Me()[s/4+1],r=Me()[s/4+2];if(r)throw ir(n);return t!==0}finally{me.__wbindgen_add_to_stack_pointer(16)}}get size(){try{const r=me.__wbindgen_add_to_stack_pointer(-16);me.store_size(r,this.__wbg_ptr);var e=Me()[r/4+0],t=Me()[r/4+1],n=Me()[r/4+2];if(n)throw ir(t);return e>>>0}finally{me.__wbindgen_add_to_stack_pointer(16)}}match(e,t,n,r){try{const f=me.__wbindgen_add_to_stack_pointer(-16);me.store_match(f,this.__wbg_ptr,e,t,n,r);var s=Me()[f/4+0],a=Me()[f/4+1],l=Me()[f/4+2],o=Me()[f/4+3];if(o)throw ir(l);var u=Sb(s,a).slice();return me.__wbindgen_free(s,a*4,4),u}finally{me.__wbindgen_add_to_stack_pointer(16)}}query(e,t){try{const a=me.__wbindgen_add_to_stack_pointer(-16),l=gn(e,me.__wbindgen_malloc,me.__wbindgen_realloc),o=zr;me.store_query(a,this.__wbg_ptr,l,o,t);var n=Me()[a/4+0],r=Me()[a/4+1],s=Me()[a/4+2];if(s)throw ir(r);return ir(n)}finally{me.__wbindgen_add_to_stack_pointer(16)}}update(e,t){try{const s=me.__wbindgen_add_to_stack_pointer(-16),a=gn(e,me.__wbindgen_malloc,me.__wbindgen_realloc),l=zr;me.store_update(s,this.__wbg_ptr,a,l,t);var n=Me()[s/4+0],r=Me()[s/4+1];if(r)throw ir(n)}finally{me.__wbindgen_add_to_stack_pointer(16)}}load(e,t,n,r){try{const l=me.__wbindgen_add_to_stack_pointer(-16),o=gn(e,me.__wbindgen_malloc,me.__wbindgen_realloc),u=zr;me.store_load(l,this.__wbg_ptr,o,u,t,n,r);var s=Me()[l/4+0],a=Me()[l/4+1];if(a)throw ir(s)}finally{me.__wbindgen_add_to_stack_pointer(16)}}dump(e,t){let n,r;try{const d=me.__wbindgen_add_to_stack_pointer(-16);me.store_dump(d,this.__wbg_ptr,e,t);var s=Me()[d/4+0],a=Me()[d/4+1],l=Me()[d/4+2],o=Me()[d/4+3],u=s,f=a;if(o)throw u=0,f=0,ir(l);return n=u,r=f,Lt(u,f)}finally{me.__wbindgen_add_to_stack_pointer(16),me.__wbindgen_free(n,r,1)}}}const hf=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>me.__wbg_variable_free(i>>>0));class ga{static __wrap(e){e=e>>>0;const t=Object.create(ga.prototype);return t.__wbg_ptr=e,hf.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,hf.unregister(this),e}free(){const e=this.__destroy_into_raw();me.__wbg_variable_free(e)}get termType(){let e,t;try{const s=me.__wbindgen_add_to_stack_pointer(-16);me.variable_term_type(s,this.__wbg_ptr);var n=Me()[s/4+0],r=Me()[s/4+1];return e=n,t=r,Lt(n,r)}finally{me.__wbindgen_add_to_stack_pointer(16),me.__wbindgen_free(e,t,1)}}get value(){let e,t;try{const s=me.__wbindgen_add_to_stack_pointer(-16);me.variable_value(s,this.__wbg_ptr);var n=Me()[s/4+0],r=Me()[s/4+1];return e=n,t=r,Lt(n,r)}finally{me.__wbindgen_add_to_stack_pointer(16),me.__wbindgen_free(e,t,1)}}toString(){let e,t;try{const s=me.__wbindgen_add_to_stack_pointer(-16);me.variable_toString(s,this.__wbg_ptr);var n=Me()[s/4+0],r=Me()[s/4+1];return e=n,t=r,Lt(n,r)}finally{me.__wbindgen_add_to_stack_pointer(16),me.__wbindgen_free(e,t,1)}}equals(e){return me.variable_equals(this.__wbg_ptr,e)!==0}}async function Fb(i,e){if(typeof Response=="function"&&i instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(i,e)}catch(n){if(i.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n);else throw n}const t=await i.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{const t=await WebAssembly.instantiate(i,e);return t instanceof WebAssembly.Instance?{instance:t,module:i}:t}}function t_(){const i={};return i.wbg={},i.wbg.__wbindgen_is_undefined=function(e){return e===void 0},i.wbg.__wbindgen_is_null=function(e){return e===null},i.wbg.__wbindgen_string_get=function(e,t){const n=t,r=typeof n=="string"?n:void 0;var s=Zl(r)?0:gn(r,me.__wbindgen_malloc,me.__wbindgen_realloc),a=zr;Me()[e/4+1]=a,Me()[e/4+0]=s},i.wbg.__wbindgen_is_falsy=function(e){return!e},i.wbg.__wbindgen_error_new=function(e,t){return new Error(Lt(e,t))},i.wbg.__wbg_namednode_new=function(e){return Fi.__wrap(e)},i.wbg.__wbg_blanknode_new=function(e){return _a.__wrap(e)},i.wbg.__wbg_literal_new=function(e){return ma.__wrap(e)},i.wbg.__wbg_defaultgraph_new=function(e){return va.__wrap(e)},i.wbg.__wbg_variable_new=function(e){return ga.__wrap(e)},i.wbg.__wbg_quad_new=function(e){return Oi.__wrap(e)},i.wbg.__wbg_new_28c511d9baebfa89=function(e,t){return new Error(Lt(e,t))},i.wbg.__wbindgen_string_new=function(e,t){return Lt(e,t)},i.wbg.__wbg_new_57421e8974065233=function(e,t){return new URIError(Lt(e,t))},i.wbg.__wbindgen_is_string=function(e){return typeof e=="string"},i.wbg.__wbg_iterator_2cee6dadfd956dfa=function(){return Symbol.iterator},i.wbg.__wbg_get_e3c254076557e348=function(){return Lr(function(e,t){return Reflect.get(e,t)},arguments)},i.wbg.__wbindgen_is_function=function(e){return typeof e=="function"},i.wbg.__wbg_call_27c0f87801dedf93=function(){return Lr(function(e,t){return e.call(t)},arguments)},i.wbg.__wbindgen_is_object=function(e){const t=e;return typeof t=="object"&&t!==null},i.wbg.__wbg_next_40fc327bfc8770e6=function(e){return e.next},i.wbg.__wbg_next_196c84450b364254=function(){return Lr(function(e){return e.next()},arguments)},i.wbg.__wbg_done_298b57d23c0fc80c=function(e){return e.done},i.wbg.__wbg_value_d93c65011f51a456=function(e){return e.value},i.wbg.__wbg_new_16b304a2cfa7ff4a=function(){return new Array},i.wbg.__wbg_new_d9bc3a0147634640=function(){return new Map},i.wbg.__wbg_push_a5b05aedc7234f9f=function(e,t){return e.push(t)},i.wbg.__wbg_set_8417257aaedc936b=function(e,t,n){return e.set(t,n)},i.wbg.__wbg_warn_2b7fc46eb50827b6=function(e,t){console.warn(Lt(e,t))},i.wbg.__wbg_new_abda76e883ba8a5f=function(){return new Error},i.wbg.__wbg_stack_658279fe44541cf6=function(e,t){const n=t.stack,r=gn(n,me.__wbindgen_malloc,me.__wbindgen_realloc),s=zr;Me()[e/4+1]=s,Me()[e/4+0]=r},i.wbg.__wbg_error_f851667af71bcfc6=function(e,t){let n,r;try{n=e,r=t,console.error(Lt(e,t))}finally{me.__wbindgen_free(n,r,1)}},i.wbg.__wbg_crypto_1d1f22824a6a080c=function(e){return e.crypto},i.wbg.__wbg_process_4a72847cc503995b=function(e){return e.process},i.wbg.__wbg_versions_f686565e586dd935=function(e){return e.versions},i.wbg.__wbg_node_104a2ff8d6ea03a2=function(e){return e.node},i.wbg.__wbg_require_cca90b1a94a0255b=function(){return Lr(function(){return module.require},arguments)},i.wbg.__wbg_msCrypto_eb05e62b530a1508=function(e){return e.msCrypto},i.wbg.__wbg_newwithlength_e9b4878cebadb3d3=function(e){return new Uint8Array(e>>>0)},i.wbg.__wbg_self_ce0dbfc45cf2f5be=function(){return Lr(function(){return self.self},arguments)},i.wbg.__wbg_window_c6fb939a7f436783=function(){return Lr(function(){return window.window},arguments)},i.wbg.__wbg_globalThis_d1e6af4856ba331b=function(){return Lr(function(){return globalThis.globalThis},arguments)},i.wbg.__wbg_global_207b558942527489=function(){return Lr(function(){return global.global},arguments)},i.wbg.__wbg_newnoargs_e258087cd0daa0ea=function(e,t){return new Function(Lt(e,t))},i.wbg.__wbg_call_b3ca7c6051f9bec1=function(){return Lr(function(e,t,n){return e.call(t,n)},arguments)},i.wbg.__wbg_has_0af94d20077affa2=function(){return Lr(function(e,t){return Reflect.has(e,t)},arguments)},i.wbg.__wbg_now_3014639a94423537=function(){return Date.now()},i.wbg.__wbindgen_memory=function(){return me.memory},i.wbg.__wbg_buffer_12d079cc21e14bdb=function(e){return e.buffer},i.wbg.__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb=function(e,t,n){return new Uint8Array(e,t>>>0,n>>>0)},i.wbg.__wbg_randomFillSync_5c9c955aa56b6049=function(){return Lr(function(e,t){e.randomFillSync(t)},arguments)},i.wbg.__wbg_subarray_a1f73cd4b5b42fe1=function(e,t,n){return e.subarray(t>>>0,n>>>0)},i.wbg.__wbg_getRandomValues_3aa56aa6edec874c=function(){return Lr(function(e,t){e.getRandomValues(t)},arguments)},i.wbg.__wbg_new_63b92bc8671ed464=function(e){return new Uint8Array(e)},i.wbg.__wbg_set_a47bac70306a19a7=function(e,t,n){e.set(t,n>>>0)},i.wbg.__wbindgen_throw=function(e,t){throw new Error(Lt(e,t))},i.wbg.__wbindgen_init_externref_table=function(){const e=me.__wbindgen_export_2,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)},i}function r_(i,e){return me=i.exports,ns.__wbindgen_wasm_module=e,Ji=null,Ki=null,Yi=null,me.__wbindgen_start(),me}function Ob(i){if(me!==void 0)return me;const e=t_();i instanceof WebAssembly.Module||(i=new WebAssembly.Module(i));const t=new WebAssembly.Instance(i,e);return r_(t,i)}async function ns(i){if(me!==void 0)return me;typeof i>"u"&&(i=new URL(""+new URL("../assets/web_bg.DI8SoM3H.wasm",import.meta.url).href,import.meta.url));const e=t_();(typeof i=="string"||typeof Request=="function"&&i instanceof Request||typeof URL=="function"&&i instanceof URL)&&(i=fetch(i));const{instance:t,module:n}=await Fb(await i,e);return r_(t,n)}const Bb=Object.freeze(Object.defineProperty({__proto__:null,BlankNode:_a,DefaultGraph:va,Literal:ma,NamedNode:Fi,Quad:Oi,Store:e_,Variable:ga,blankNode:yb,default:ns,defaultGraph:Eb,fromQuad:Tb,fromTerm:Cb,initSync:Ob,literal:wb,main:Pb,namedNode:bb,quad:Ab,triple:kb,variable:Db},Symbol.toStringTag,{value:"Module"})),Lb="/ontologies/d3fend.ttl",Ub="http://d3fend.mitre.org/ontologies/d3fend.owl#",jb="http://d3fend.mitre.org/ontologies/cad/instances#",qb="cco",n_="d3f",Mb="dct",i_="cad",xb="owl",a_="rdf",s_="rdfs",Vb="skos",zb="xsd",Ni={[n_]:Ub,[i_]:jb,[xb]:"http://www.w3.org/2002/07/owl#",[a_]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",[s_]:"http://www.w3.org/2000/01/rdf-schema#",[zb]:"http://www.w3.org/2001/XMLSchema#",[Mb]:"http://purl.org/dc/terms/",[Vb]:"http://www.w3.org/2004/02/skos/core#",[qb]:"http://www.ontologyrepository.com/CommonCoreOntologies/"};function Hb(){const{subscribe:i,set:e,update:t}=gr({initalized:!1,store:null,erorr:null});async function n(){try{console.log("Starting Oxigraph initialization"),console.time("Initialize Oxigraph"),console.log("Oxigraph module:",Bb),console.log("Init function:",ns),await ns(),console.log("WebAssembly initialized successfully");const s=new e_;console.log("Oxigraph store created"),e({initialized:!0,store:s,error:null}),await r(s),console.log(`Oxigraph store initialized with ${s.size} triples.`)}catch(s){e({initialized:!1,store:null,error:s.message}),console.error("Failed to initialize Oxigraph store:",s)}}async function r(s){try{console.time("Load D3FEND ontology");const l=await(await fetch(Lb)).text();s.load(l,{format:"ttl"}),console.timeEnd("Load D3FEND ontology"),console.log(`D3FEND ontology loaded, total triples: ${s.size}`)}catch(a){console.error("Failed to load D3FEND ontology:",a)}}return{subscribe:i,initialize:n,query:s=>new Promise((a,l)=>{t(o=>{if(!o.initialized)l(new Error("Oxigraph store not initialized"));else try{const u=o.store.query(s);a(u)}catch(u){l(u)}return o})})}}const eo=Hb();async function $b(i){let e=null;return console.log("Calling lookup_valid_property..."),e=await Gb(i),console.log(`Property from lookup IRI ${e}`),e==null&&(console.log("Calling lookup_valid_property_by_label..."),e=await Xb(i)),e}async function Xb(i){const e="findValidPropertyByLabel("+i+")";console.info(e);const t=`PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX d3f: <http://d3fend.mitre.org/ontologies/d3fend.owl#>

SELECT ?property
WHERE
{
   ?property rdfs:subPropertyOf* d3f:may-be-associated-with .
   ?property rdfs:label "${i}" .
}
LIMIT 1`;console.log({valid_value_query:t});let n=null;try{const r=await eo.query(t);r?(console.info(`Type of queryResult for property lookup by label ${i} is: `+Object.prototype.toString.call(r).slice(8,-1)),console.log({query_result:r}),Array.isArray(r)?r.length>0?n=r[0].get("property").value:console.warn(`Empty query results for valid property lookup by label ${i}.`):console.warn(`Query result not the expected Array type for property lookup by label of ${i}.`)):console.error(`Query results: ${r} for valid property lookup by label ${i}.`)}catch(r){console.warn(`Error executing oxigraph query for property lookup by label of: ${i}, error: ${r}`)}return console.info(n+" <- "+e),n}async function Gb(i){const e="lookupValidPropertyByFragment("+i+")";console.info(e);const t=`PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX d3f: <http://d3fend.mitre.org/ontologies/d3fend.owl#>

SELECT ?property
WHERE
{
   VALUES ?property { ${i} }
   ?property rdfs:subPropertyOf* d3f:may-be-associated-with .
}
LIMIT 1`;let n=null;if(i.includes(":"))try{const r=await eo.query(t);console.info({query_result:r}),r?Array.isArray(r)?r.length>0?n=r[0].get("property").value:console.warn(`Empty array returned for property lookup by iri of ${i}.`):console.warn(`Query result not the expected Array type for property lookup by iri of ${i}.`):console.warn(`Undefined query result returned for property lookup by iri of ${i}.`)}catch(r){console.warn(`Error executing oxigraph query for property lookup by iri of: ${i}, error: ${r}`)}else console.warn("Attempted lookup by iri of: "+i+" but iri has no ':' char");return console.info(n+" <- "+e),n}const Sn=mr(Ni[n_]),l_=mr(Ni[i_]),Qb=mr(Ni[a_]),Wb=mr(Ni[s_]);function za(i,e){Tr.set(i),sa.set(e)}function Yb(){za([],[])}const Tr=gr([]),at=gr(null),sa=gr([]);function Jb(i,e){if(e.data.d3f_class){const t=e.data.d3f_class,[n,r]=t.split(":");return Sn(r)}else{const t=e.type;return{artifactSelectorNode:Sn("Artifact"),vulnerabilitySelectorNode:Sn("Vulnerability"),attackSelectorNode:Sn("OffensiveTechnique"),countermeasureSelectorNode:Sn("DefensiveTechnique"),informationSelectorNode:Sn("DigitalInformation"),agentSelectorNode:Sn("Agent"),eventNode:Sn("Event")}[t]}}async function Kb(){const i=vb();Object.keys(Ni).forEach(a=>{const l=Ni[a];console.info("Adding prefix ",a," for ",l),i.setPrefixForURI(a,l)}),console.info("Echo store.namespaces: "+i.namespaces);let e,t;const n=[],r=[];return Tr.subscribe(a=>{e=a})(),sa.subscribe(a=>{t=a})(),console.info("Starting node processing..."),Zb(e,i,n),console.info("Completed node processing."),console.info("Starting edge processing..."),await ty(t,i,r),console.info("Completed edge processing promise."),await new Promise((a,l)=>{aa(null,i,null,"text/turtle",(o,u)=>{if(o)l(o);else{let f=u;n.length>0&&(f+=`
# Skipped nodes (no d3f_class):
`,n.forEach(d=>{f+=`# Node ID: ${d.id}
`,JSON.stringify(d.data,null,2).split(`
`).forEach(p=>{f+=`# ${p}
`})})),r.length>0&&(f+=`#
# Skipped edges (no label lookup found.):
`,r.forEach(d=>{f+=`# Edge ID: ${d.id}
`,JSON.stringify(d.data,null,2).split(`
`).forEach(p=>{f+=`# ${p}
`})}),f+=`
`),a(f)}})})}function Zb(i,e,t){console.info("Processing nodes..."),i.forEach(n=>{const r=n.id,s=n.type,a=n.data.label,l=Jb(e,n);if(l){const o=o_(r),u=mb(a.toString());ey("Processing node and data properties and using rdflib node name: ",l),e.add(o,Qb("type"),l),e.add(o,Wb("label"),u)}else t.push({id:r,type:s,data:n.data})}),console.info("Done processing nodes."),t.length>1&&console.warn("Skipped nodes:",t)}function o_(i){const e=i.replace(".","_");return l_(e)}function ey(i,e){const t=Object.prototype.toString.call(e).slice(8,-1);console.log(`${i} references ${e} of type ${t}`)}const ty=async(i,e,t)=>{console.info("Processing edges now!"),t.length=0;for(const n of i){const r=n.id,s=n.data.label,a=n.source,l=n.target;console.log(`edgeLabel: ${s}`);try{const o=await $b(s);if(o){console.log(`Found property ${o} for ${s}`),console.info(`Adding subject inst:${a} property ${o} object inst:${l}`);try{const u=o_(a),f=l_(l.replace(".","_"));e.add(u,Kp(o),f),console.info(e.length)}catch{console.error(`Error adding triple for edgeId = ${r}, edgeLabel = ${s}`)}}else console.warn(`Bad property ${o} found for ${s}`),t.push({id:r,data:n.data})}catch(o){console.error(`Lookup error for edgeId: ${r} with edgeLabel: ${s} - ${o}`),t.push({id:r,data:n.data})}}console.info("Done processing edges."),t.length>1&&console.warn("Skipped edges:",t)};function Hn(i,e,t,n,r,s,a,l,o,u,f,d,h){const c={id:`${Math.random()}`,type:n,position:{x:l,y:o},data:{label:r,sequence:a,d3f_class:s},measured:{width:u,height:f},origin:[.5,0],selected:!1,dragging:!1};let p,_;h?(p=c.id,_=t.id):(p=t.id,_=c.id);const v={type:"editableEdge",data:{label:d},source:_,sourceHandle:"source",target:p,targetHandle:"target",id:`xy-edge__${_}source-${p}target`,selected:!1};e.update(D=>[...D,v]),i.update(D=>[...D,c])}function df(i,e,t){const n=i.slice();return n[18]=e[t],n}const ry=i=>({}),pf=i=>({});function ny(i){let e;return{c(){e=x("No related offensive techniques in this release.")},l(t){e=V(t,"No related offensive techniques in this release.")},m(t,n){R(t,e,n)},p:xe,i:xe,o:xe,d(t){t&&w(e)}}}function iy(i){let e,t;return e=new Ln({props:{$$slots:{default:[oy]},$$scope:{ctx:i}}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r&16394&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function ay(i){let e,t="Loading...";return{c(){e=Y("div"),e.textContent=t},l(n){e=J(n,"DIV",{"data-svelte-h":!0}),nt(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(n,r){R(n,e,r)},p:xe,i:xe,o:xe,d(n){n&&w(e)}}}function _f(i){let e=i[18].off_tech_id.value.replace(/ |\./g,"")+"",t,n,r=i[18].off_tech_label.value+"",s,a,l="-->",o,u,f=i[18].off_artifact_rel_label.value.replace(/ /g,"")+"",d,h,c=Le(i[18].off_artifact.value)+"",p,_,v=i[18].off_artifact_label.value+"",D,U,T,N,g=Le(i[18].off_artifact.value)+"",E,b,I=i[18].off_tech_id.value.replace(/ |\./g,"")+"",C,O,k=i[18].off_tech_id.value.replace(/ |\./g,"")+"",B,P,A=Le(i[18].off_artifact.value)+"",z,j,se=Le(i[18].off_artifact.value)+"",Z,G;function H($,ae){return ae&10&&(T=null),T==null&&(T=!!$[3].includes($[18].off_tech_id.value.replace(/ |\./g,""))),T?ly:sy}let Q=H(i,-1),ee=Q(i);return{c(){t=x(e),n=x('["'),s=x(r),a=x('"] '),o=x(l),u=x(" |"),d=x(f),h=x("| "),p=x(c),_=x('["'),D=x(v),U=x(`"];
            `),ee.c(),N=x(`
            class `),E=x(g),b=x(" ArtifactNode; click "),C=x(I),O=x(` href "javascript:da_to_off_callback('`),B=x(k),P=x(`')"; click `),z=x(A),j=x(' href "/dao/artifact/d3f:'),Z=x(se),G=x('";')},l($){t=V($,e),n=V($,'["'),s=V($,r),a=V($,'"] '),o=V($,l),u=V($," |"),d=V($,f),h=V($,"| "),p=V($,c),_=V($,'["'),D=V($,v),U=V($,`"];
            `),ee.l($),N=V($,`
            class `),E=V($,g),b=V($," ArtifactNode; click "),C=V($,I),O=V($,` href "javascript:da_to_off_callback('`),B=V($,k),P=V($,`')"; click `),z=V($,A),j=V($,' href "/dao/artifact/d3f:'),Z=V($,se),G=V($,'";')},m($,ae){R($,t,ae),R($,n,ae),R($,s,ae),R($,a,ae),R($,o,ae),R($,u,ae),R($,d,ae),R($,h,ae),R($,p,ae),R($,_,ae),R($,D,ae),R($,U,ae),ee.m($,ae),R($,N,ae),R($,E,ae),R($,b,ae),R($,C,ae),R($,O,ae),R($,B,ae),R($,P,ae),R($,z,ae),R($,j,ae),R($,Z,ae),R($,G,ae)},p($,ae){ae&2&&e!==(e=$[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(t,e),ae&2&&r!==(r=$[18].off_tech_label.value+"")&&we(s,r),ae&2&&f!==(f=$[18].off_artifact_rel_label.value.replace(/ /g,"")+"")&&we(d,f),ae&2&&c!==(c=Le($[18].off_artifact.value)+"")&&we(p,c),ae&2&&v!==(v=$[18].off_artifact_label.value+"")&&we(D,v),Q===(Q=H($,ae))&&ee?ee.p($,ae):(ee.d(1),ee=Q($),ee&&(ee.c(),ee.m(N.parentNode,N))),ae&2&&g!==(g=Le($[18].off_artifact.value)+"")&&we(E,g),ae&2&&I!==(I=$[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(C,I),ae&2&&k!==(k=$[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(B,k),ae&2&&A!==(A=Le($[18].off_artifact.value)+"")&&we(z,A),ae&2&&se!==(se=Le($[18].off_artifact.value)+"")&&we(Z,se)},d($){$&&(w(t),w(n),w(s),w(a),w(o),w(u),w(d),w(h),w(p),w(_),w(D),w(U),w(N),w(E),w(b),w(C),w(O),w(B),w(P),w(z),w(j),w(Z),w(G)),ee.d($)}}}function sy(i){let e,t=i[18].off_tech_id.value.replace(/ |\./g,"")+"",n,r;return{c(){e=x("class "),n=x(t),r=x(" OffensiveTechniqueNode;")},l(s){e=V(s,"class "),n=V(s,t),r=V(s," OffensiveTechniqueNode;")},m(s,a){R(s,e,a),R(s,n,a),R(s,r,a)},p(s,a){a&2&&t!==(t=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(n,t)},d(s){s&&(w(e),w(n),w(r))}}}function ly(i){let e,t=i[18].off_tech_id.value.replace(/ |\./g,"")+"",n,r;return{c(){e=x("class "),n=x(t),r=x(" SelectedOffensiveTechniqueNode;")},l(s){e=V(s,"class "),n=V(s,t),r=V(s," SelectedOffensiveTechniqueNode;")},m(s,a){R(s,e,a),R(s,n,a),R(s,r,a)},p(s,a){a&2&&t!==(t=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(n,t)},d(s){s&&(w(e),w(n),w(r))}}}function vf(i){let e=i[6].edge_is_unique(i[18].off_tech_label.value,i[18].off_artifact_rel_label.value,i[18].off_artifact_label.value),t,n=e&&_f(i);return{c(){n&&n.c(),t=Ie()},l(r){n&&n.l(r),t=Ie()},m(r,s){n&&n.m(r,s),R(r,t,s)},p(r,s){s&2&&(e=r[6].edge_is_unique(r[18].off_tech_label.value,r[18].off_artifact_rel_label.value,r[18].off_artifact_label.value)),e?n?n.p(r,s):(n=_f(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){r&&w(t),n&&n.d(r)}}}function oy(i){let e,t,n=Ke(i[1].da_to_off.results.bindings),r=[];for(let s=0;s<n.length;s+=1)r[s]=vf(df(i,n,s));return{c(){e=x(`graph LR;
        `);for(let s=0;s<r.length;s+=1)r[s].c();t=Ie()},l(s){e=V(s,`graph LR;
        `);for(let a=0;a<r.length;a+=1)r[a].l(s);t=Ie()},m(s,a){R(s,e,a);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(s,a);R(s,t,a)},p(s,a){if(a&74){n=Ke(s[1].da_to_off.results.bindings);let l;for(l=0;l<n.length;l+=1){const o=df(s,n,l);r[l]?r[l].p(o,a):(r[l]=vf(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(s){s&&(w(e),w(t)),Tt(r,s)}}}function uy(i){let e,t,n,r,s,a,l,o,u,f,d,h,c,p=i[3].length+"",_,v,D,U,T;const N=i[9].header,g=Kt(N,i,i[14],pf),E=i[9].default,b=Kt(E,i,i[14],null),I=[ay,iy,ny],C=[];function O(k,B){return k[1]?k[1].da_to_off.results.bindings.length>0?1:2:0}return l=O(i),o=C[l]=I[l](i),{c(){e=Y("dialog"),t=Y("div"),g&&g.c(),n=x(`
    Select Attack Techniques
    `),b&&b.c(),r=le(),s=Y("hr"),a=le(),o.c(),u=le(),f=Y("hr"),d=le(),h=Y("button"),c=x("Insert ("),_=x(p),v=x(")"),this.h()},l(k){e=J(k,"DIALOG",{class:!0});var B=Te(e);t=J(B,"DIV",{class:!0});var P=Te(t);g&&g.l(P),n=V(P,`
    Select Attack Techniques
    `),b&&b.l(P),r=oe(P),s=J(P,"HR",{}),a=oe(P),o.l(P),u=oe(P),f=J(P,"HR",{}),d=oe(P),h=J(P,"BUTTON",{class:!0});var A=Te(h);c=V(A,"Insert ("),_=V(A,p),v=V(A,")"),A.forEach(w),P.forEach(w),B.forEach(w),this.h()},h(){h.autofocus=!0,te(h,"class","svelte-1ai9hff"),te(t,"class","svelte-1ai9hff"),te(e,"class","svelte-1ai9hff")},m(k,B){R(k,e,B),q(e,t),g&&g.m(t,null),q(t,n),b&&b.m(t,null),q(t,r),q(t,s),q(t,a),C[l].m(t,null),q(t,u),q(t,f),q(t,d),q(t,h),q(h,c),q(h,_),q(h,v),i[11](e),D=!0,h.focus(),U||(T=[ge(h,"click",i[7]),ge(t,"click",rr(i[10])),ge(e,"close",i[12]),ge(e,"click",Bn(i[13]))],U=!0)},p(k,[B]){g&&g.p&&(!D||B&16384)&&Zt(g,N,k,k[14],D?tr(N,k[14],B,ry):er(k[14]),pf),b&&b.p&&(!D||B&16384)&&Zt(b,E,k,k[14],D?tr(E,k[14],B,null):er(k[14]),null);let P=l;l=O(k),l===P?C[l].p(k,B):(ht(),ce(C[P],1,1,()=>{C[P]=null}),dt(),o=C[l],o?o.p(k,B):(o=C[l]=I[l](k),o.c()),ue(o,1),o.m(t,u)),(!D||B&8)&&p!==(p=k[3].length+"")&&we(_,p)},i(k){D||(ue(g,k),ue(b,k),ue(o),D=!0)},o(k){ce(g,k),ce(b,k),ce(o),D=!1},d(k){k&&w(e),g&&g.d(k),b&&b.d(k),C[l].d(),i[11](null),U=!1,gt(T)}}}function fy(i,e,t){let n,r,s,{$$slots:a={},$$scope:l}=e,{show_attack_modal:o}=e,{parent_node:u}=e,{data:f}=e,d;const h=fn();st(i,h,g=>t(16,s=g));const c=cn();st(i,c,g=>t(15,r=g));let p=new Fn;function _(g){n.includes(g)?t(3,n=n.filter(E=>E!==g)):n.push(g),t(3,n)}window.da_to_off_callback=function(g){_(g)};function v(){let g=0,E=200,b=100;for(const I of n){let C=f.da_to_off.results.bindings.find(O=>O.off_tech_id.value.replace(/ |\./g,"")==I);C&&(Hn(h,c,u,"attackSelectorNode",C.off_tech_label.value,"d3f:"+C.off_tech_id.value,u.data.sequence,u.position.x+g*E,u.position.y+b,182,63,C.off_artifact_rel_label.value,!1),g+=1)}h.set(s),c.set(r),d&&d.close(),t(3,n=[])}function D(g){Hr.call(this,i,g)}function U(g){Jt[g?"unshift":"push"](()=>{d=g,t(2,d)})}const T=()=>t(0,o=!1),N=()=>{d.close(),t(3,n=[])};return i.$$set=g=>{"show_attack_modal"in g&&t(0,o=g.show_attack_modal),"parent_node"in g&&t(8,u=g.parent_node),"data"in g&&t(1,f=g.data),"$$scope"in g&&t(14,l=g.$$scope)},i.$$.update=()=>{i.$$.dirty&5&&o&&d&&(d.showModal(),p.reset()),i.$$.dirty&5&&!o&&d&&(d.close(),p.reset())},t(3,n=[]),[o,f,d,n,h,c,p,v,u,a,D,U,T,N,l]}class cy extends kt{constructor(e){super(),At(this,e,fy,uy,lt,{show_attack_modal:0,parent_node:8,data:1})}}function mf(i,e,t){const n=i.slice();return n[23]=e[t],n}const hy=i=>({}),gf=i=>({});function dy(i){let e;return{c(){e=x("No related defensive techniques in this release.")},l(t){e=V(t,"No related defensive techniques in this release.")},m(t,n){R(t,e,n)},p:xe,i:xe,o:xe,d(t){t&&w(e)}}}function py(i){let e,t,n,r,s,a=i[4],l,o;function u(h){i[14](h)}let f={toggles:i[5]};i[4]!==void 0&&(f.selected=i[4]),n=new td({props:f}),Jt.push(()=>Cr(n,"selected",u));let d=Ef(i);return{c(){e=Y("br"),t=le(),Re(n.$$.fragment),s=le(),d.c(),l=Ie()},l(h){e=J(h,"BR",{}),t=oe(h),Fe(n.$$.fragment,h),s=oe(h),d.l(h),l=Ie()},m(h,c){R(h,e,c),R(h,t,c),Oe(n,h,c),R(h,s,c),d.m(h,c),R(h,l,c),o=!0},p(h,c){const p={};c&32&&(p.toggles=h[5]),!r&&c&16&&(r=!0,p.selected=h[4],Ar(()=>r=!1)),n.$set(p),c&16&&lt(a,a=h[4])?(ht(),ce(d,1,1,xe),dt(),d=Ef(h),d.c(),ue(d,1),d.m(l.parentNode,l)):d.p(h,c)},i(h){o||(ue(n.$$.fragment,h),ue(d),o=!0)},o(h){ce(n.$$.fragment,h),ce(d),o=!1},d(h){h&&(w(e),w(t),w(s),w(l)),Be(n,h),d.d(h)}}}function _y(i){let e,t="Loading...";return{c(){e=Y("div"),e.textContent=t},l(n){e=J(n,"DIV",{"data-svelte-h":!0}),nt(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(n,r){R(n,e,r)},p:xe,i:xe,o:xe,d(n){n&&w(e)}}}function bf(i){let e=!i[4].includes(i[23].def_tactic_label.value),t,n=e&&yf(i);return{c(){n&&n.c(),t=Ie()},l(r){n&&n.l(r),t=Ie()},m(r,s){n&&n.m(r,s),R(r,t,s)},p(r,s){s&18&&(e=!r[4].includes(r[23].def_tactic_label.value)),e?n?n.p(r,s):(n=yf(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){r&&w(t),n&&n.d(r)}}}function yf(i){let e=Le(i[23].def_tech.value)+"",t,n,r=i[23].def_tech_label.value+"",s,a,l="-->",o,u,f=i[23].def_artifact_rel_label.value.replace(/ /g,"")+"",d,h,c=Le(i[23].def_artifact.value)+"",p,_,v=i[23].def_artifact_label.value+"",D,U,T,N,g=Le(i[23].def_artifact.value)+"",E,b,I=Le(i[23].def_tech.value)+"",C,O,k=Le(i[23].def_tech.value)+"",B,P,A=Le(i[23].def_artifact.value)+"",z,j,se=Le(i[23].def_artifact.value)+"",Z,G;function H($,ae){return ae&66&&(T=null),T==null&&(T=!!$[6].includes(Le($[23].def_tech.value))),T?my:vy}let Q=H(i,-1),ee=Q(i);return{c(){t=x(e),n=x('["'),s=x(r),a=x('"] '),o=x(l),u=x(`
                | `),d=x(f),h=x(" | "),p=x(c),_=x('["'),D=x(v),U=x(`"];
                `),ee.c(),N=x(` 
                class `),E=x(g),b=x(` ArtifactNode;
                click `),C=x(I),O=x(` href "javascript:da_to_def_callback('`),B=x(k),P=x(`')";
                click `),z=x(A),j=x(' href "/dao/artifact/d3f:'),Z=x(se),G=x('";')},l($){t=V($,e),n=V($,'["'),s=V($,r),a=V($,'"] '),o=V($,l),u=V($,`
                | `),d=V($,f),h=V($," | "),p=V($,c),_=V($,'["'),D=V($,v),U=V($,`"];
                `),ee.l($),N=V($,` 
                class `),E=V($,g),b=V($,` ArtifactNode;
                click `),C=V($,I),O=V($,` href "javascript:da_to_def_callback('`),B=V($,k),P=V($,`')";
                click `),z=V($,A),j=V($,' href "/dao/artifact/d3f:'),Z=V($,se),G=V($,'";')},m($,ae){R($,t,ae),R($,n,ae),R($,s,ae),R($,a,ae),R($,o,ae),R($,u,ae),R($,d,ae),R($,h,ae),R($,p,ae),R($,_,ae),R($,D,ae),R($,U,ae),ee.m($,ae),R($,N,ae),R($,E,ae),R($,b,ae),R($,C,ae),R($,O,ae),R($,B,ae),R($,P,ae),R($,z,ae),R($,j,ae),R($,Z,ae),R($,G,ae)},p($,ae){ae&2&&e!==(e=Le($[23].def_tech.value)+"")&&we(t,e),ae&2&&r!==(r=$[23].def_tech_label.value+"")&&we(s,r),ae&2&&f!==(f=$[23].def_artifact_rel_label.value.replace(/ /g,"")+"")&&we(d,f),ae&2&&c!==(c=Le($[23].def_artifact.value)+"")&&we(p,c),ae&2&&v!==(v=$[23].def_artifact_label.value+"")&&we(D,v),Q===(Q=H($,ae))&&ee?ee.p($,ae):(ee.d(1),ee=Q($),ee&&(ee.c(),ee.m(N.parentNode,N))),ae&2&&g!==(g=Le($[23].def_artifact.value)+"")&&we(E,g),ae&2&&I!==(I=Le($[23].def_tech.value)+"")&&we(C,I),ae&2&&k!==(k=Le($[23].def_tech.value)+"")&&we(B,k),ae&2&&A!==(A=Le($[23].def_artifact.value)+"")&&we(z,A),ae&2&&se!==(se=Le($[23].def_artifact.value)+"")&&we(Z,se)},d($){$&&(w(t),w(n),w(s),w(a),w(o),w(u),w(d),w(h),w(p),w(_),w(D),w(U),w(N),w(E),w(b),w(C),w(O),w(B),w(P),w(z),w(j),w(Z),w(G)),ee.d($)}}}function vy(i){let e,t=Le(i[23].def_tech.value)+"",n,r;return{c(){e=x("class "),n=x(t),r=x(" DefensiveTechniqueNode;")},l(s){e=V(s,"class "),n=V(s,t),r=V(s," DefensiveTechniqueNode;")},m(s,a){R(s,e,a),R(s,n,a),R(s,r,a)},p(s,a){a&2&&t!==(t=Le(s[23].def_tech.value)+"")&&we(n,t)},d(s){s&&(w(e),w(n),w(r))}}}function my(i){let e,t=Le(i[23].def_tech.value)+"",n,r;return{c(){e=x("class "),n=x(t),r=x(" SelectedDefensiveTechniqueNode;")},l(s){e=V(s,"class "),n=V(s,t),r=V(s," SelectedDefensiveTechniqueNode;")},m(s,a){R(s,e,a),R(s,n,a),R(s,r,a)},p(s,a){a&2&&t!==(t=Le(s[23].def_tech.value)+"")&&we(n,t)},d(s){s&&(w(e),w(n),w(r))}}}function wf(i){let e=i[3].edge_is_unique(i[23].def_tech_label.value,i[23].def_artifact_rel_label.value,i[23].def_artifact_label.value),t,n=e&&bf(i);return{c(){n&&n.c(),t=Ie()},l(r){n&&n.l(r),t=Ie()},m(r,s){n&&n.m(r,s),R(r,t,s)},p(r,s){s&10&&(e=r[3].edge_is_unique(r[23].def_tech_label.value,r[23].def_artifact_rel_label.value,r[23].def_artifact_label.value)),e?n?n.p(r,s):(n=bf(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){r&&w(t),n&&n.d(r)}}}function gy(i){let e,t,n=Ke(i[1].da_to_def.results.bindings),r=[];for(let s=0;s<n.length;s+=1)r[s]=wf(mf(i,n,s));return{c(){e=x(`graph LR;
          `);for(let s=0;s<r.length;s+=1)r[s].c();t=Ie()},l(s){e=V(s,`graph LR;
          `);for(let a=0;a<r.length;a+=1)r[a].l(s);t=Ie()},m(s,a){R(s,e,a);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(s,a);R(s,t,a)},p(s,a){if(a&90){n=Ke(s[1].da_to_def.results.bindings);let l;for(l=0;l<n.length;l+=1){const o=mf(s,n,l);r[l]?r[l].p(o,a):(r[l]=wf(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(s){s&&(w(e),w(t)),Tt(r,s)}}}function Ef(i){let e,t;return e=new Ln({props:{$$slots:{default:[gy]},$$scope:{ctx:i}}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r&262234&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function by(i){let e,t,n,r,s,a,l,o,u,f,d,h,c,p=i[6].length+"",_,v,D,U,T;const N=i[12].header,g=Kt(N,i,i[18],gf),E=i[12].default,b=Kt(E,i,i[18],null),I=[_y,py,dy],C=[];function O(k,B){return k[1]?k[1].da_to_def.results.bindings.length>0?1:2:0}return l=O(i),o=C[l]=I[l](i),{c(){e=Y("dialog"),t=Y("div"),g&&g.c(),n=x(`
    Select Countermeasure Techniques
    `),b&&b.c(),r=le(),s=Y("hr"),a=le(),o.c(),u=le(),f=Y("hr"),d=le(),h=Y("button"),c=x("Insert ("),_=x(p),v=x(")"),this.h()},l(k){e=J(k,"DIALOG",{class:!0});var B=Te(e);t=J(B,"DIV",{class:!0});var P=Te(t);g&&g.l(P),n=V(P,`
    Select Countermeasure Techniques
    `),b&&b.l(P),r=oe(P),s=J(P,"HR",{}),a=oe(P),o.l(P),u=oe(P),f=J(P,"HR",{}),d=oe(P),h=J(P,"BUTTON",{class:!0});var A=Te(h);c=V(A,"Insert ("),_=V(A,p),v=V(A,")"),A.forEach(w),P.forEach(w),B.forEach(w),this.h()},h(){h.autofocus=!0,te(h,"class","svelte-1yq7x1p"),te(t,"class","svelte-1yq7x1p"),te(e,"class","svelte-1yq7x1p")},m(k,B){R(k,e,B),q(e,t),g&&g.m(t,null),q(t,n),b&&b.m(t,null),q(t,r),q(t,s),q(t,a),C[l].m(t,null),q(t,u),q(t,f),q(t,d),q(t,h),q(h,c),q(h,_),q(h,v),i[15](e),D=!0,h.focus(),U||(T=[ge(h,"click",i[9]),ge(t,"click",rr(i[13])),ge(e,"close",i[16]),ge(e,"click",Bn(i[17]))],U=!0)},p(k,[B]){g&&g.p&&(!D||B&262144)&&Zt(g,N,k,k[18],D?tr(N,k[18],B,hy):er(k[18]),gf),b&&b.p&&(!D||B&262144)&&Zt(b,E,k,k[18],D?tr(E,k[18],B,null):er(k[18]),null);let P=l;l=O(k),l===P?C[l].p(k,B):(ht(),ce(C[P],1,1,()=>{C[P]=null}),dt(),o=C[l],o?o.p(k,B):(o=C[l]=I[l](k),o.c()),ue(o,1),o.m(t,u)),(!D||B&64)&&p!==(p=k[6].length+"")&&we(_,p)},i(k){D||(ue(g,k),ue(b,k),ue(o),D=!0)},o(k){ce(g,k),ce(b,k),ce(o),D=!1},d(k){k&&w(e),g&&g.d(k),b&&b.d(k),C[l].d(),i[15](null),U=!1,gt(T)}}}function yy(i,e,t){let n,r,s,{$$slots:a={},$$scope:l}=e,{show_defend_modal:o}=e,{parent_node:u}=e,{data:f}=e,d;const h=fn();st(i,h,O=>t(20,s=O));const c=cn();st(i,c,O=>t(19,r=O));let p=new Fn;function _(O){n.includes(O)?t(6,n=n.filter(k=>k!==O)):n.push(O),t(6,n)}window.da_to_def_callback=function(O){_(O)};function v(){let O=0,k=200,B=100;for(const P of n){let A=f.da_to_def.results.bindings.find(z=>Le(z.def_tech.value)==P);A&&(Hn(h,c,u,"countermeasureSelectorNode",A.def_tech_label.value,"d3f:"+Le(A.def_tech.value),u.data.sequence,u.position.x+O*k,u.position.y-B,182,63,A.def_artifact_rel_label.value,!1),O+=1)}h.set(s),c.set(r),d&&d.close(),t(6,n=[])}let D=new Set,U=[],T=[];Kh(U,T)&&(T=[]);function N(O){for(const k of n){let B=f.da_to_def.results.bindings.find(P=>Le(P.def_tech.value)==k);O.includes(B.def_tactic_label.value)&&t(6,n=n.filter(P=>P!==k))}t(6,n)}function g(O){Hr.call(this,i,O)}function E(O){T=O,t(4,T)}function b(O){Jt[O?"unshift":"push"](()=>{d=O,t(2,d)})}const I=()=>t(0,o=!1),C=()=>{d.close(),t(6,n=[])};return i.$$set=O=>{"show_defend_modal"in O&&t(0,o=O.show_defend_modal),"parent_node"in O&&t(10,u=O.parent_node),"data"in O&&t(1,f=O.data),"$$scope"in O&&t(18,l=O.$$scope)},i.$$.update=()=>{i.$$.dirty&5&&o&&d&&(d.showModal(),t(3,p=new Fn)),i.$$.dirty&5&&!o&&d&&d.close(),i.$$.dirty&2050&&f&&(f.da_to_def.results.bindings.forEach(O=>{D.add(O.def_tactic_label.value)}),t(11,D),t(1,f)),i.$$.dirty&2048&&t(5,U=Array.from(D).sort(function(O,k){return $a[O]-$a[k]})),i.$$.dirty&16&&N(T),i.$$.dirty&24&&p.reset(T)},t(6,n=[]),[o,f,d,p,T,U,n,h,c,v,u,D,a,g,E,b,I,C,l]}class wy extends kt{constructor(e){super(),At(this,e,yy,by,lt,{show_defend_modal:0,parent_node:10,data:1})}}function Df(i,e,t){const n=i.slice();return n[27]=e[t],n}function kf(i,e,t){const n=i.slice();return n[30]=e[t],n}function Af(i,e,t){const n=i.slice();return n[33]=e[t],n}function Cf(i,e,t){const n=i.slice();return n[27]=e[t],n}function Tf(i,e,t){const n=i.slice();return n[30]=e[t],n}const Ey=i=>({}),Nf=i=>({});function Dy(i){let e;return{c(){e=x("No related weaknesses in this release")},l(t){e=V(t,"No related weaknesses in this release")},m(t,n){R(t,e,n)},p:xe,i:xe,o:xe,d(t){t&&w(e)}}}function ky(i){let e,t;return e=new Ln({props:{$$slots:{default:[Cy]},$$scope:{ctx:i}}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r[0]&8389054&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function Ay(i){let e,t="Loading...";return{c(){e=Y("div"),e.textContent=t},l(n){e=J(n,"DIV",{"data-svelte-h":!0}),nt(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(n,r){R(n,e,r)},p:xe,i:xe,o:xe,d(n){n&&w(e)}}}function Sf(i){let e,t=Ke(i[33]["d3f:outbound"]),n=[];for(let r=0;r<t.length;r+=1)n[r]=Rf(Cf(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);R(r,e,s)},p(r,s){if(s[0]&430){t=Ke(r[33]["d3f:outbound"]);let a;for(a=0;a<t.length;a+=1){const l=Cf(r,t,a);n[a]?n[a].p(l,s):(n[a]=Rf(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&w(e),Tt(n,r)}}}function Pf(i){let e,t=i[33]["@id"]+"",n,r;return{c(){e=x("class "),n=x(t),r=x(" selected_inbound_node;")},l(s){e=V(s,"class "),n=V(s,t),r=V(s," selected_inbound_node;")},m(s,a){R(s,e,a),R(s,n,a),R(s,r,a)},p(s,a){a[0]&160&&t!==(t=s[33]["@id"]+"")&&we(n,t)},d(s){s&&(w(e),w(n),w(r))}}}function If(i){let e=i[33]["@id"]+"",t,n,r=i[33]["rdfs:label"][0]+"",s,a,l="-->",o,u,f=Le(i[27]["@id"])+"",d,h,c=i[30]["@id"]+"",p,_,v=i[7].i(i[30]["@id"])["rdfs:label"][0]+"",D,U,T=i[33]["@id"]+"",N,g,E=i[33]["@id"]+"",b,I,C,O,k=i[8].includes(i[33]["@id"]),B,P=i[30]["@id"]+"",A,z,j=i[30]["@id"]+"",se,Z,G,H,Q=i[33]["@id"]+"",ee,$,ae=i[33]["@id"]+"",ze,Ve,be=i[30]["@id"]+"",Ne,_e,Se=i[3](i[30])+"",et,vt,rt=k&&Pf(i);return{c(){t=x(e),n=x('["'),s=x(r),a=x('"] '),o=x(l),u=x(" | "),d=x(f),h=x(" | "),p=x(c),_=x('["'),D=x(v),U=x(`"];
                class `),N=x(T),g=x(" inbound_node; style "),b=x(E),I=x(" fill:"),C=x(i[1]),O=x(`;
                `),rt&&rt.c(),B=x(`
                class `),A=x(P),z=x(" RootArtifactNode; style "),se=x(j),Z=x(" fill:"),G=x(i[2]),H=x(`;
                click `),ee=x(Q),$=x(` href "javascript:da_to_weak_callback('`),ze=x(ae),Ve=x(`')"; click `),Ne=x(be),_e=x(' href "'),et=x(Se),vt=x('";')},l(Ae){t=V(Ae,e),n=V(Ae,'["'),s=V(Ae,r),a=V(Ae,'"] '),o=V(Ae,l),u=V(Ae," | "),d=V(Ae,f),h=V(Ae," | "),p=V(Ae,c),_=V(Ae,'["'),D=V(Ae,v),U=V(Ae,`"];
                class `),N=V(Ae,T),g=V(Ae," inbound_node; style "),b=V(Ae,E),I=V(Ae," fill:"),C=V(Ae,i[1]),O=V(Ae,`;
                `),rt&&rt.l(Ae),B=V(Ae,`
                class `),A=V(Ae,P),z=V(Ae," RootArtifactNode; style "),se=V(Ae,j),Z=V(Ae," fill:"),G=V(Ae,i[2]),H=V(Ae,`;
                click `),ee=V(Ae,Q),$=V(Ae,` href "javascript:da_to_weak_callback('`),ze=V(Ae,ae),Ve=V(Ae,`')"; click `),Ne=V(Ae,be),_e=V(Ae,' href "'),et=V(Ae,Se),vt=V(Ae,'";')},m(Ae,qe){R(Ae,t,qe),R(Ae,n,qe),R(Ae,s,qe),R(Ae,a,qe),R(Ae,o,qe),R(Ae,u,qe),R(Ae,d,qe),R(Ae,h,qe),R(Ae,p,qe),R(Ae,_,qe),R(Ae,D,qe),R(Ae,U,qe),R(Ae,N,qe),R(Ae,g,qe),R(Ae,b,qe),R(Ae,I,qe),R(Ae,C,qe),R(Ae,O,qe),rt&&rt.m(Ae,qe),R(Ae,B,qe),R(Ae,A,qe),R(Ae,z,qe),R(Ae,se,qe),R(Ae,Z,qe),R(Ae,G,qe),R(Ae,H,qe),R(Ae,ee,qe),R(Ae,$,qe),R(Ae,ze,qe),R(Ae,Ve,qe),R(Ae,Ne,qe),R(Ae,_e,qe),R(Ae,et,qe),R(Ae,vt,qe)},p(Ae,qe){qe[0]&160&&e!==(e=Ae[33]["@id"]+"")&&we(t,e),qe[0]&160&&r!==(r=Ae[33]["rdfs:label"][0]+"")&&we(s,r),qe[0]&160&&f!==(f=Le(Ae[27]["@id"])+"")&&we(d,f),qe[0]&160&&c!==(c=Ae[30]["@id"]+"")&&we(p,c),qe[0]&160&&v!==(v=Ae[7].i(Ae[30]["@id"])["rdfs:label"][0]+"")&&we(D,v),qe[0]&160&&T!==(T=Ae[33]["@id"]+"")&&we(N,T),qe[0]&160&&E!==(E=Ae[33]["@id"]+"")&&we(b,E),qe[0]&2&&we(C,Ae[1]),qe[0]&416&&(k=Ae[8].includes(Ae[33]["@id"])),k?rt?rt.p(Ae,qe):(rt=Pf(Ae),rt.c(),rt.m(B.parentNode,B)):rt&&(rt.d(1),rt=null),qe[0]&160&&P!==(P=Ae[30]["@id"]+"")&&we(A,P),qe[0]&160&&j!==(j=Ae[30]["@id"]+"")&&we(se,j),qe[0]&4&&we(G,Ae[2]),qe[0]&160&&Q!==(Q=Ae[33]["@id"]+"")&&we(ee,Q),qe[0]&160&&ae!==(ae=Ae[33]["@id"]+"")&&we(ze,ae),qe[0]&160&&be!==(be=Ae[30]["@id"]+"")&&we(Ne,be),qe[0]&168&&Se!==(Se=Ae[3](Ae[30])+"")&&we(et,Se)},d(Ae){Ae&&(w(t),w(n),w(s),w(a),w(o),w(u),w(d),w(h),w(p),w(_),w(D),w(U),w(N),w(g),w(b),w(I),w(C),w(O),w(B),w(A),w(z),w(se),w(Z),w(G),w(H),w(ee),w($),w(ze),w(Ve),w(Ne),w(_e),w(et),w(vt)),rt&&rt.d(Ae)}}}function Rf(i){let e,t=Ke(i[33][i[27]["@id"]]),n=[];for(let r=0;r<t.length;r+=1)n[r]=If(Tf(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);R(r,e,s)},p(r,s){if(s[0]&430){t=Ke(r[33][r[27]["@id"]]);let a;for(a=0;a<t.length;a+=1){const l=Tf(r,t,a);n[a]?n[a].p(l,s):(n[a]=If(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&w(e),Tt(n,r)}}}function Ff(i){let e,t=i[33]["d3f:outbound"]&&Sf(i);return{c(){t&&t.c(),e=Ie()},l(n){t&&t.l(n),e=Ie()},m(n,r){t&&t.m(n,r),R(n,e,r)},p(n,r){n[33]["d3f:outbound"]?t?t.p(n,r):(t=Sf(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&w(e),t&&t.d(n)}}}function Of(i){let e,t=Ke(i[7].i(i[5].description["@id"])["d3f:outbound"]),n=[];for(let r=0;r<t.length;r+=1)n[r]=Lf(Df(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);R(r,e,s)},p(r,s){if(s[0]&184){t=Ke(r[7].i(r[5].description["@id"])["d3f:outbound"]);let a;for(a=0;a<t.length;a+=1){const l=Df(r,t,a);n[a]?n[a].p(l,s):(n[a]=Lf(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&w(e),Tt(n,r)}}}function Bf(i){let e=i[5].description["@id"]+"",t,n,r=i[7].i(i[5].description["@id"])["rdfs:label"][0]+"",s,a,l="-->",o,u,f=Le(i[27]["@id"])+"",d,h,c=i[30]["@id"]+"",p,_,v=i[7].graph[i[7].index[i[30]["@id"]]]["rdfs:label"][0]+"",D,U,T=i[5].description["@id"]+"",N,g,E=i[30]["@id"]+"",b,I,C=i[5].description["@id"]+"",O,k,B=i[3](i[5].description["@id"])+"",P,A,z=i[30]["@id"]+"",j,se,Z=i[4](i[30])+"",G,H;return{c(){t=x(e),n=x('["'),s=x(r),a=x('"] '),o=x(l),u=x(" | "),d=x(f),h=x(" | "),p=x(c),_=x('["'),D=x(v),U=x('"]; class '),N=x(T),g=x(" RootArtifactNode; class "),b=x(E),I=x(` ArtifactNode;
              click `),O=x(C),k=x(' href "'),P=x(B),A=x('"; click '),j=x(z),se=x(' href "'),G=x(Z),H=x('";')},l(Q){t=V(Q,e),n=V(Q,'["'),s=V(Q,r),a=V(Q,'"] '),o=V(Q,l),u=V(Q," | "),d=V(Q,f),h=V(Q," | "),p=V(Q,c),_=V(Q,'["'),D=V(Q,v),U=V(Q,'"]; class '),N=V(Q,T),g=V(Q," RootArtifactNode; class "),b=V(Q,E),I=V(Q,` ArtifactNode;
              click `),O=V(Q,C),k=V(Q,' href "'),P=V(Q,B),A=V(Q,'"; click '),j=V(Q,z),se=V(Q,' href "'),G=V(Q,Z),H=V(Q,'";')},m(Q,ee){R(Q,t,ee),R(Q,n,ee),R(Q,s,ee),R(Q,a,ee),R(Q,o,ee),R(Q,u,ee),R(Q,d,ee),R(Q,h,ee),R(Q,p,ee),R(Q,_,ee),R(Q,D,ee),R(Q,U,ee),R(Q,N,ee),R(Q,g,ee),R(Q,b,ee),R(Q,I,ee),R(Q,O,ee),R(Q,k,ee),R(Q,P,ee),R(Q,A,ee),R(Q,j,ee),R(Q,se,ee),R(Q,G,ee),R(Q,H,ee)},p(Q,ee){ee[0]&32&&e!==(e=Q[5].description["@id"]+"")&&we(t,e),ee[0]&160&&r!==(r=Q[7].i(Q[5].description["@id"])["rdfs:label"][0]+"")&&we(s,r),ee[0]&160&&f!==(f=Le(Q[27]["@id"])+"")&&we(d,f),ee[0]&160&&c!==(c=Q[30]["@id"]+"")&&we(p,c),ee[0]&160&&v!==(v=Q[7].graph[Q[7].index[Q[30]["@id"]]]["rdfs:label"][0]+"")&&we(D,v),ee[0]&32&&T!==(T=Q[5].description["@id"]+"")&&we(N,T),ee[0]&160&&E!==(E=Q[30]["@id"]+"")&&we(b,E),ee[0]&32&&C!==(C=Q[5].description["@id"]+"")&&we(O,C),ee[0]&40&&B!==(B=Q[3](Q[5].description["@id"])+"")&&we(P,B),ee[0]&160&&z!==(z=Q[30]["@id"]+"")&&we(j,z),ee[0]&176&&Z!==(Z=Q[4](Q[30])+"")&&we(G,Z)},d(Q){Q&&(w(t),w(n),w(s),w(a),w(o),w(u),w(d),w(h),w(p),w(_),w(D),w(U),w(N),w(g),w(b),w(I),w(O),w(k),w(P),w(A),w(j),w(se),w(G),w(H))}}}function Lf(i){let e,t=Ke(i[7].i(i[5].description["@id"])[i[27]["@id"]]),n=[];for(let r=0;r<t.length;r+=1)n[r]=Bf(kf(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);R(r,e,s)},p(r,s){if(s[0]&184){t=Ke(r[7].i(r[5].description["@id"])[r[27]["@id"]]);let a;for(a=0;a<t.length;a+=1){const l=kf(r,t,a);n[a]?n[a].p(l,s):(n[a]=Bf(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&w(e),Tt(n,r)}}}function Cy(i){let e,t,n=i[7].i(i[5].description["@id"])&&i[7].i(i[5].description["@id"])["d3f:outbound"],r,s=Ke(i[7].graph.filter(i[19])),a=[];for(let o=0;o<s.length;o+=1)a[o]=Ff(Af(i,s,o));let l=n&&Of(i);return{c(){e=x(`graph LR;
        `);for(let o=0;o<a.length;o+=1)a[o].c();t=le(),l&&l.c(),r=Ie()},l(o){e=V(o,`graph LR;
        `);for(let u=0;u<a.length;u+=1)a[u].l(o);t=oe(o),l&&l.l(o),r=Ie()},m(o,u){R(o,e,u);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(o,u);R(o,t,u),l&&l.m(o,u),R(o,r,u)},p(o,u){if(u[0]&430){s=Ke(o[7].graph.filter(o[19]));let f;for(f=0;f<s.length;f+=1){const d=Af(o,s,f);a[f]?a[f].p(d,u):(a[f]=Ff(d),a[f].c(),a[f].m(t.parentNode,t))}for(;f<a.length;f+=1)a[f].d(1);a.length=s.length}u[0]&160&&(n=o[7].i(o[5].description["@id"])&&o[7].i(o[5].description["@id"])["d3f:outbound"]),n?l?l.p(o,u):(l=Of(o),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(o){o&&(w(e),w(t),w(r)),Tt(a,o),l&&l.d(o)}}}function Ty(i){let e,t,n,r,s,a,l,o,u,f,d,h,c,p=i[8].length+"",_,v,D,U,T;const N=i[17].header,g=Kt(N,i,i[23],Nf),E=i[17].default,b=Kt(E,i,i[23],null),I=[Ay,ky,Dy],C=[];function O(k,B){return k[5]?k[7].graph.length>0?1:2:0}return l=O(i),o=C[l]=I[l](i),{c(){e=Y("dialog"),t=Y("div"),g&&g.c(),n=x(`
    Select Weaknesses
    `),b&&b.c(),r=le(),s=Y("hr"),a=le(),o.c(),u=le(),f=Y("hr"),d=le(),h=Y("button"),c=x("Insert ("),_=x(p),v=x(")"),this.h()},l(k){e=J(k,"DIALOG",{class:!0});var B=Te(e);t=J(B,"DIV",{class:!0});var P=Te(t);g&&g.l(P),n=V(P,`
    Select Weaknesses
    `),b&&b.l(P),r=oe(P),s=J(P,"HR",{}),a=oe(P),o.l(P),u=oe(P),f=J(P,"HR",{}),d=oe(P),h=J(P,"BUTTON",{class:!0});var A=Te(h);c=V(A,"Insert ("),_=V(A,p),v=V(A,")"),A.forEach(w),P.forEach(w),B.forEach(w),this.h()},h(){h.autofocus=!0,te(h,"class","svelte-1resfch"),te(t,"class","svelte-1resfch"),te(e,"class","svelte-1resfch")},m(k,B){R(k,e,B),q(e,t),g&&g.m(t,null),q(t,n),b&&b.m(t,null),q(t,r),q(t,s),q(t,a),C[l].m(t,null),q(t,u),q(t,f),q(t,d),q(t,h),q(h,c),q(h,_),q(h,v),i[20](e),D=!0,h.focus(),U||(T=[ge(h,"click",i[11]),ge(t,"click",rr(i[18])),ge(e,"close",i[21]),ge(e,"click",Bn(i[22]))],U=!0)},p(k,B){g&&g.p&&(!D||B[0]&8388608)&&Zt(g,N,k,k[23],D?tr(N,k[23],B,Ey):er(k[23]),Nf),b&&b.p&&(!D||B[0]&8388608)&&Zt(b,E,k,k[23],D?tr(E,k[23],B,null):er(k[23]),null);let P=l;l=O(k),l===P?C[l].p(k,B):(ht(),ce(C[P],1,1,()=>{C[P]=null}),dt(),o=C[l],o?o.p(k,B):(o=C[l]=I[l](k),o.c()),ue(o,1),o.m(t,u)),(!D||B[0]&256)&&p!==(p=k[8].length+"")&&we(_,p)},i(k){D||(ue(g,k),ue(b,k),ue(o),D=!0)},o(k){ce(g,k),ce(b,k),ce(o),D=!1},d(k){k&&w(e),g&&g.d(k),b&&b.d(k),C[l].d(),i[20](null),U=!1,gt(T)}}}function Ny(i,e,t){let n,r,s,{$$slots:a={},$$scope:l}=e,{empty_message:o="has no direct neighbors in this release."}=e,{outbound_color:u="#fff4dd"}=e,{inbound_color:f="#fff4dd"}=e,{root_color:d="#fff4dd"}=e,{link_function:h=A=>`/dao/artifact/${A["@id"]}`}=e,{inbound_link_function:c=h}=e,{root_link_function:p=A=>`/dao/artifact/${A["@id"]}`}=e,{outbound_link_function:_=h}=e,{show_weakness_modal:v}=e,{parent_node:D}=e,{data:U}=e,T;const N=fn();st(i,N,A=>t(25,s=A));const g=cn();st(i,g,A=>t(24,r=A));let E;function b(A){n.includes(A)?t(8,n=n.filter(z=>z!==A)):n.push(A),t(8,n),t(8,n)}window.da_to_weak_callback=function(A){b(A)};function I(){let A=0,z=200,j=100;for(const se of n){let Z=U.da_to_weak["@graph"].find(G=>G["@id"]==se);Z&&(Hn(N,g,D,"vulnerabilitySelectorNode",Z["rdfs:label"],Z["d3f:cwe-id"],D.data.sequence,D.position.x+A*z,D.position.y+j,182,63,Z["d3f:outbound"][0]["@id"].replace("d3f:",""),!1),A+=1)}N.set(s),g.set(r),T&&T.close(),t(8,n=[])}function C(A){Hr.call(this,i,A)}const O=A=>A["@id"]!=U.description["@id"];function k(A){Jt[A?"unshift":"push"](()=>{T=A,t(6,T)})}const B=()=>t(0,v=!1),P=()=>{T.close(),t(8,n=[])};return i.$$set=A=>{"empty_message"in A&&t(12,o=A.empty_message),"outbound_color"in A&&t(13,u=A.outbound_color),"inbound_color"in A&&t(1,f=A.inbound_color),"root_color"in A&&t(2,d=A.root_color),"link_function"in A&&t(14,h=A.link_function),"inbound_link_function"in A&&t(15,c=A.inbound_link_function),"root_link_function"in A&&t(3,p=A.root_link_function),"outbound_link_function"in A&&t(4,_=A.outbound_link_function),"show_weakness_modal"in A&&t(0,v=A.show_weakness_modal),"parent_node"in A&&t(16,D=A.parent_node),"data"in A&&t(5,U=A.data),"$$scope"in A&&t(23,l=A.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&65&&v&&T&&T.showModal(),i.$$.dirty[0]&65&&!v&&T&&T.close(),i.$$.dirty[0]&32&&U&&t(7,E=new Zh(U.da_to_weak,{index:!0}))},t(8,n=[]),[v,f,d,p,_,U,T,E,n,N,g,I,o,u,h,c,D,a,C,O,k,B,P,l]}class Sy extends kt{constructor(e){super(),At(this,e,Ny,Ty,lt,{empty_message:12,outbound_color:13,inbound_color:1,root_color:2,link_function:14,inbound_link_function:15,root_link_function:3,outbound_link_function:4,show_weakness_modal:0,parent_node:16,data:5},null,[-1,-1])}}function Uf(i,e,t){const n=i.slice();return n[31]=e[t],n}function jf(i,e,t){const n=i.slice();return n[34]=e[t],n}function qf(i,e,t){const n=i.slice();return n[37]=e[t],n}const Py=i=>({}),Mf=i=>({});function Iy(i){let e;return{c(){e=x("No related parts/control in this release")},l(t){e=V(t,"No related parts/control in this release")},m(t,n){R(t,e,n)},p:xe,i:xe,o:xe,d(t){t&&w(e)}}}function Ry(i){let e,t;return e=new Ln({props:{$$slots:{default:[Oy]},$$scope:{ctx:i}}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r[0]&134217934&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function Fy(i){let e,t="Loading...";return{c(){e=Y("div"),e.textContent=t},l(n){e=J(n,"DIV",{"data-svelte-h":!0}),nt(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(n,r){R(n,e,r)},p:xe,i:xe,o:xe,d(n){n&&w(e)}}}function xf(i){let e,t=Ke(i[31]["d3f:outbound"].filter(i[23])),n=[];for(let r=0;r<t.length;r+=1)n[r]=Qf(jf(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);R(r,e,s)},p(r,s){if(s[0]&206){t=Ke(r[31]["d3f:outbound"].filter(r[23]));let a;for(a=0;a<t.length;a+=1){const l=jf(r,t,a);n[a]?n[a].p(l,s):(n[a]=Qf(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&w(e),Tt(n,r)}}}function Vf(i){let e,t,n=i[31]["@id"]!=i[2].data.d3f_class&&zf(i),r=i[37]["@id"]!=i[2].data.d3f_class&&Hf(i);return{c(){n&&n.c(),e=le(),r&&r.c(),t=Ie()},l(s){n&&n.l(s),e=oe(s),r&&r.l(s),t=Ie()},m(s,a){n&&n.m(s,a),R(s,e,a),r&&r.m(s,a),R(s,t,a)},p(s,a){s[31]["@id"]!=s[2].data.d3f_class?n?n.p(s,a):(n=zf(s),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),s[37]["@id"]!=s[2].data.d3f_class?r?r.p(s,a):(r=Hf(s),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d(s){s&&(w(e),w(t)),n&&n.d(s),r&&r.d(s)}}}function zf(i){let e,t=i[31]["@id"]+"",n,r;return{c(){e=x("class "),n=x(t),r=x(" selected_outbound_node;")},l(s){e=V(s,"class "),n=V(s,t),r=V(s," selected_outbound_node;")},m(s,a){R(s,e,a),R(s,n,a),R(s,r,a)},p(s,a){a[0]&72&&t!==(t=s[31]["@id"]+"")&&we(n,t)},d(s){s&&(w(e),w(n),w(r))}}}function Hf(i){let e,t=i[37]["@id"]+"",n,r;return{c(){e=x("class "),n=x(t),r=x(" selected_outbound_node;")},l(s){e=V(s,"class "),n=V(s,t),r=V(s," selected_outbound_node;")},m(s,a){R(s,e,a),R(s,n,a),R(s,r,a)},p(s,a){a[0]&74&&t!==(t=s[37]["@id"]+"")&&we(n,t)},d(s){s&&(w(e),w(n),w(r))}}}function $f(i){let e,t=i[31]["@id"]+"",n,r,s=i[31]["@id"]+"",a,l,o=Le(i[34]["@id"])+"",u,f,d=i[37]["@id"]+"",h,c;return{c(){e=x("click "),n=x(t),r=x(` href "javascript:da_to_neighbors_callback('`),a=x(s),l=x("', '"),u=x(o),f=x("','"),h=x(d),c=x(`')";`)},l(p){e=V(p,"click "),n=V(p,t),r=V(p,` href "javascript:da_to_neighbors_callback('`),a=V(p,s),l=V(p,"', '"),u=V(p,o),f=V(p,"','"),h=V(p,d),c=V(p,`')";`)},m(p,_){R(p,e,_),R(p,n,_),R(p,r,_),R(p,a,_),R(p,l,_),R(p,u,_),R(p,f,_),R(p,h,_),R(p,c,_)},p(p,_){_[0]&72&&t!==(t=p[31]["@id"]+"")&&we(n,t),_[0]&72&&s!==(s=p[31]["@id"]+"")&&we(a,s),_[0]&74&&o!==(o=Le(p[34]["@id"])+"")&&we(u,o),_[0]&74&&d!==(d=p[37]["@id"]+"")&&we(h,d)},d(p){p&&(w(e),w(n),w(r),w(a),w(l),w(u),w(f),w(h),w(c))}}}function Xf(i){let e,t=i[37]["@id"]+"",n,r,s=i[31]["@id"]+"",a,l,o=Le(i[34]["@id"])+"",u,f,d=i[37]["@id"]+"",h,c;return{c(){e=x("click "),n=x(t),r=x(` href "javascript:da_to_neighbors_callback('`),a=x(s),l=x("', '"),u=x(o),f=x("','"),h=x(d),c=x(`')";`)},l(p){e=V(p,"click "),n=V(p,t),r=V(p,` href "javascript:da_to_neighbors_callback('`),a=V(p,s),l=V(p,"', '"),u=V(p,o),f=V(p,"','"),h=V(p,d),c=V(p,`')";`)},m(p,_){R(p,e,_),R(p,n,_),R(p,r,_),R(p,a,_),R(p,l,_),R(p,u,_),R(p,f,_),R(p,h,_),R(p,c,_)},p(p,_){_[0]&74&&t!==(t=p[37]["@id"]+"")&&we(n,t),_[0]&72&&s!==(s=p[31]["@id"]+"")&&we(a,s),_[0]&74&&o!==(o=Le(p[34]["@id"])+"")&&we(u,o),_[0]&74&&d!==(d=p[37]["@id"]+"")&&we(h,d)},d(p){p&&(w(e),w(n),w(r),w(a),w(l),w(u),w(f),w(h),w(c))}}}function Gf(i){let e=i[31]["@id"]+"",t,n,r=i[31]["rdfs:label"][0]+"",s,a,l="-->",o,u,f=Le(i[34]["@id"])+"",d,h,c=i[37]["@id"]+"",p,_,v=i[6].i(i[37]["@id"])["rdfs:label"][0]+"",D,U,T=i[37]["@id"]+"",N,g,E=i[7].some(O),b,I,C;function O(...A){return i[21](i[31],i[34],i[37],...A)}let k=E&&Vf(i),B=i[31]["@id"]!=i[2].data.d3f_class&&$f(i),P=i[37]["@id"]!=i[2].data.d3f_class&&Xf(i);return{c(){t=x(e),n=x('["'),s=x(r),a=x('"] '),o=x(l),u=x(" | "),d=x(f),h=x(" | "),p=x(c),_=x('["'),D=x(v),U=x(`"];
                class `),N=x(T),g=x(` outbound;
                `),k&&k.c(),b=le(),B&&B.c(),I=le(),P&&P.c(),C=Ie()},l(A){t=V(A,e),n=V(A,'["'),s=V(A,r),a=V(A,'"] '),o=V(A,l),u=V(A," | "),d=V(A,f),h=V(A," | "),p=V(A,c),_=V(A,'["'),D=V(A,v),U=V(A,`"];
                class `),N=V(A,T),g=V(A,` outbound;
                `),k&&k.l(A),b=oe(A),B&&B.l(A),I=oe(A),P&&P.l(A),C=Ie()},m(A,z){R(A,t,z),R(A,n,z),R(A,s,z),R(A,a,z),R(A,o,z),R(A,u,z),R(A,d,z),R(A,h,z),R(A,p,z),R(A,_,z),R(A,D,z),R(A,U,z),R(A,N,z),R(A,g,z),k&&k.m(A,z),R(A,b,z),B&&B.m(A,z),R(A,I,z),P&&P.m(A,z),R(A,C,z)},p(A,z){i=A,z[0]&72&&e!==(e=i[31]["@id"]+"")&&we(t,e),z[0]&72&&r!==(r=i[31]["rdfs:label"][0]+"")&&we(s,r),z[0]&74&&f!==(f=Le(i[34]["@id"])+"")&&we(d,f),z[0]&74&&c!==(c=i[37]["@id"]+"")&&we(p,c),z[0]&74&&v!==(v=i[6].i(i[37]["@id"])["rdfs:label"][0]+"")&&we(D,v),z[0]&74&&T!==(T=i[37]["@id"]+"")&&we(N,T),z[0]&202&&(E=i[7].some(O)),E?k?k.p(i,z):(k=Vf(i),k.c(),k.m(b.parentNode,b)):k&&(k.d(1),k=null),i[31]["@id"]!=i[2].data.d3f_class?B?B.p(i,z):(B=$f(i),B.c(),B.m(I.parentNode,I)):B&&(B.d(1),B=null),i[37]["@id"]!=i[2].data.d3f_class?P?P.p(i,z):(P=Xf(i),P.c(),P.m(C.parentNode,C)):P&&(P.d(1),P=null)},d(A){A&&(w(t),w(n),w(s),w(a),w(o),w(u),w(d),w(h),w(p),w(_),w(D),w(U),w(N),w(g),w(b),w(I),w(C)),k&&k.d(A),B&&B.d(A),P&&P.d(A)}}}function Qf(i){let e,t=Ke(i[31][i[34]["@id"]]),n=[];for(let r=0;r<t.length;r+=1)n[r]=Gf(qf(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);R(r,e,s)},p(r,s){if(s[0]&206){t=Ke(r[31][r[34]["@id"]]);let a;for(a=0;a<t.length;a+=1){const l=qf(r,t,a);n[a]?n[a].p(l,s):(n[a]=Gf(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&w(e),Tt(n,r)}}}function Wf(i){let e,t=i[31]["d3f:outbound"]&&xf(i);return{c(){t&&t.c(),e=Ie()},l(n){t&&t.l(n),e=Ie()},m(n,r){t&&t.m(n,r),R(n,e,r)},p(n,r){n[31]["d3f:outbound"]?t?t.p(n,r):(t=xf(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&w(e),t&&t.d(n)}}}function Oy(i){let e,t,n=Ke(i[6].graph.filter(i[22])),r=[];for(let s=0;s<n.length;s+=1)r[s]=Wf(Uf(i,n,s));return{c(){e=x(`graph LR;
        `);for(let s=0;s<r.length;s+=1)r[s].c();t=Ie()},l(s){e=V(s,`graph LR;
        `);for(let a=0;a<r.length;a+=1)r[a].l(s);t=Ie()},m(s,a){R(s,e,a);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(s,a);R(s,t,a)},p(s,a){if(a[0]&206){n=Ke(s[6].graph.filter(s[22]));let l;for(l=0;l<n.length;l+=1){const o=Uf(s,n,l);r[l]?r[l].p(o,a):(r[l]=Wf(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(s){s&&(w(e),w(t)),Tt(r,s)}}}function By(i){let e,t,n,r,s,a,l,o,u,f,d,h,c,p=i[7].length+"",_,v,D,U,T;const N=i[19].header,g=Kt(N,i,i[27],Mf),E=i[19].default,b=Kt(E,i,i[27],null),I=[Fy,Ry,Iy],C=[];function O(k,B){return k[3]?k[5]&&k[6].graph.length>0?1:2:0}return l=O(i),o=C[l]=I[l](i),{c(){e=Y("dialog"),t=Y("div"),g&&g.c(),n=x(`
    Select Parts/Control Neighbors
    `),b&&b.c(),r=le(),s=Y("hr"),a=le(),o.c(),u=le(),f=Y("hr"),d=le(),h=Y("button"),c=x("Insert ("),_=x(p),v=x(")"),this.h()},l(k){e=J(k,"DIALOG",{class:!0});var B=Te(e);t=J(B,"DIV",{class:!0});var P=Te(t);g&&g.l(P),n=V(P,`
    Select Parts/Control Neighbors
    `),b&&b.l(P),r=oe(P),s=J(P,"HR",{}),a=oe(P),o.l(P),u=oe(P),f=J(P,"HR",{}),d=oe(P),h=J(P,"BUTTON",{class:!0});var A=Te(h);c=V(A,"Insert ("),_=V(A,p),v=V(A,")"),A.forEach(w),P.forEach(w),B.forEach(w),this.h()},h(){h.autofocus=!0,te(h,"class","svelte-x2no78"),te(t,"class","svelte-x2no78"),te(e,"class","svelte-x2no78")},m(k,B){R(k,e,B),q(e,t),g&&g.m(t,null),q(t,n),b&&b.m(t,null),q(t,r),q(t,s),q(t,a),C[l].m(t,null),q(t,u),q(t,f),q(t,d),q(t,h),q(h,c),q(h,_),q(h,v),i[24](e),D=!0,h.focus(),U||(T=[ge(h,"click",i[10]),ge(t,"click",rr(i[20])),ge(e,"close",i[25]),ge(e,"click",Bn(i[26]))],U=!0)},p(k,B){g&&g.p&&(!D||B[0]&134217728)&&Zt(g,N,k,k[27],D?tr(N,k[27],B,Py):er(k[27]),Mf),b&&b.p&&(!D||B[0]&134217728)&&Zt(b,E,k,k[27],D?tr(E,k[27],B,null):er(k[27]),null);let P=l;l=O(k),l===P?C[l].p(k,B):(ht(),ce(C[P],1,1,()=>{C[P]=null}),dt(),o=C[l],o?o.p(k,B):(o=C[l]=I[l](k),o.c()),ue(o,1),o.m(t,u)),(!D||B[0]&128)&&p!==(p=k[7].length+"")&&we(_,p)},i(k){D||(ue(g,k),ue(b,k),ue(o),D=!0)},o(k){ce(g,k),ce(b,k),ce(o),D=!1},d(k){k&&w(e),g&&g.d(k),b&&b.d(k),C[l].d(),i[24](null),U=!1,gt(T)}}}function Ly(i,e,t){let n,r,s,{$$slots:a={},$$scope:l}=e,{empty_message:o="has no direct neighbors in this release."}=e,{outbound_color:u="#fff4dd"}=e,{inbound_color:f="#fff4dd"}=e,{root_color:d="#fff4dd"}=e,{link_function:h=Z=>`/dao/artifact/${Z["@id"]}`}=e,{inbound_link_function:c=h}=e,{root_link_function:p=Z=>`/dao/artifact/${Z["@id"]}`}=e,{outbound_link_function:_=h}=e,{show_neighbors_modal:v}=e,{neighbor_filter_labels:D}=e,{parent_node:U}=e,{data:T}=e,N,g=!1;const E=fn();st(i,E,Z=>t(29,s=Z));const b=cn();st(i,b,Z=>t(28,r=Z));let I;function C(Z){n.some(G=>G.source==Z.source&&G.relation==Z.relation&&G.target==Z.target)?t(7,n=n.filter(G=>G.source!=Z.source||G.relation!=Z.relation||G.target!=Z.target)):n.push(Z),t(7,n),t(7,n)}window.da_to_neighbors_callback=function(Z,G,H){C({source:Z,relation:G,target:H})};function O(){let Z=0,G=200,H=100;for(const Q of n){let ee=T.neighbors["@graph"].find(ae=>ae["@id"]==Q.source),$=T.neighbors["@graph"].find(ae=>ae["@id"]==Q.target);if(ee&&$){let ae=U.data.d3f_class==ee["@id"],ze=ae?$:ee;Hn(E,b,U,"artifactSelectorNode",ze["rdfs:label"][0],ze["@id"],U.data.sequence,U.position.x+Z*G,ae?U.position.y+H:U.position.y-H,182,63,Q.relation,ae),Z+=1}}E.set(s),b.set(r),N&&(N.close(),t(5,g=!1)),t(7,n=[])}function k(Z){Hr.call(this,i,Z)}const B=(Z,G,H,Q)=>Q.source==Z["@id"]&&Q.relation==Le(G["@id"])&&Q.target==H["@id"],P=Z=>Z["@id"]!=T.description["@id"],A=Z=>D.includes(Z["@id"]);function z(Z){Jt[Z?"unshift":"push"](()=>{N=Z,t(4,N)})}const j=()=>t(0,v=!1),se=()=>{N.close(),t(7,n=[])};return i.$$set=Z=>{"empty_message"in Z&&t(11,o=Z.empty_message),"outbound_color"in Z&&t(12,u=Z.outbound_color),"inbound_color"in Z&&t(13,f=Z.inbound_color),"root_color"in Z&&t(14,d=Z.root_color),"link_function"in Z&&t(15,h=Z.link_function),"inbound_link_function"in Z&&t(16,c=Z.inbound_link_function),"root_link_function"in Z&&t(17,p=Z.root_link_function),"outbound_link_function"in Z&&t(18,_=Z.outbound_link_function),"show_neighbors_modal"in Z&&t(0,v=Z.show_neighbors_modal),"neighbor_filter_labels"in Z&&t(1,D=Z.neighbor_filter_labels),"parent_node"in Z&&t(2,U=Z.parent_node),"data"in Z&&t(3,T=Z.data),"$$scope"in Z&&t(27,l=Z.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&17&&v&&N&&N.showModal(),i.$$.dirty[0]&17&&!v&&N&&N.close(),i.$$.dirty[0]&14&&T&&(t(5,g=!1),T.neighbors["@graph"].find(Z=>Z["@id"]==U.data.d3f_class),T.neighbors["@graph"].some(Z=>Z["d3f:outbound"]&&D.some(G=>Z["d3f:outbound"].some(H=>H["@id"]==G)))&&(t(5,g=!0),t(6,I=new Zh(T.neighbors,{index:!0}))))},t(7,n=[]),[v,D,U,T,N,g,I,n,E,b,O,o,u,f,d,h,c,p,_,a,k,B,P,A,z,j,se,l]}class Uy extends kt{constructor(e){super(),At(this,e,Ly,By,lt,{empty_message:11,outbound_color:12,inbound_color:13,root_color:14,link_function:15,inbound_link_function:16,root_link_function:17,outbound_link_function:18,show_neighbors_modal:0,neighbor_filter_labels:1,parent_node:2,data:3},null,[-1,-1])}}function jy(i){let e,t="attack the node",n,r,s,a,l,o="defend the node",u,f,d,h,c,p="weaknesses",_,v,D,U,T,N="explode parts",g,E,b="explode control",I,C,O,k,B,P;function A(ee){i[10](ee)}let z={parent_node:i[0],data:i[1]};i[6]!==void 0&&(z.show_attack_modal=i[6]),r=new cy({props:z}),Jt.push(()=>Cr(r,"show_attack_modal",A));function j(ee){i[12](ee)}let se={parent_node:i[0],data:i[1]};i[5]!==void 0&&(se.show_defend_modal=i[5]),f=new wy({props:se}),Jt.push(()=>Cr(f,"show_defend_modal",j));function Z(ee){i[14](ee)}let G={parent_node:i[0],empty_message:"has no related weaknesses in this release.",inbound_color:"#f9d999",inbound_link_function:i[8],data:i[1]};i[4]!==void 0&&(G.show_weakness_modal=i[4]),v=new Sy({props:G}),Jt.push(()=>Cr(v,"show_weakness_modal",Z));function H(ee){i[17](ee)}let Q={neighbor_filter_labels:i[2],parent_node:i[0],empty_message:"has no related parts in this release.",inbound_color:"#f9d999",inbound_link_function:i[8],data:i[1]};return i[3]!==void 0&&(Q.show_neighbors_modal=i[3]),C=new Uy({props:Q}),Jt.push(()=>Cr(C,"show_neighbors_modal",H)),{c(){e=Y("button"),e.textContent=t,n=le(),Re(r.$$.fragment),a=le(),l=Y("button"),l.textContent=o,u=le(),Re(f.$$.fragment),h=le(),c=Y("button"),c.textContent=p,_=le(),Re(v.$$.fragment),U=le(),T=Y("button"),T.textContent=N,g=le(),E=Y("button"),E.textContent=b,I=le(),Re(C.$$.fragment),this.h()},l(ee){e=J(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),nt(e)!=="svelte-1dkmztx"&&(e.textContent=t),n=oe(ee),Fe(r.$$.fragment,ee),a=oe(ee),l=J(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),nt(l)!=="svelte-22hxkb"&&(l.textContent=o),u=oe(ee),Fe(f.$$.fragment,ee),h=oe(ee),c=J(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),nt(c)!=="svelte-12lar74"&&(c.textContent=p),_=oe(ee),Fe(v.$$.fragment,ee),U=oe(ee),T=J(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),nt(T)!=="svelte-1hluius"&&(T.textContent=N),g=oe(ee),E=J(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),nt(E)!=="svelte-183zqvn"&&(E.textContent=b),I=oe(ee),Fe(C.$$.fragment,ee),this.h()},h(){te(e,"class","svelte-5he3i1"),te(l,"class","svelte-5he3i1"),te(c,"class","svelte-5he3i1"),te(T,"class","svelte-5he3i1"),te(E,"class","svelte-5he3i1")},m(ee,$){R(ee,e,$),R(ee,n,$),Oe(r,ee,$),R(ee,a,$),R(ee,l,$),R(ee,u,$),Oe(f,ee,$),R(ee,h,$),R(ee,c,$),R(ee,_,$),Oe(v,ee,$),R(ee,U,$),R(ee,T,$),R(ee,g,$),R(ee,E,$),R(ee,I,$),Oe(C,ee,$),k=!0,B||(P=[ge(e,"click",i[9]),ge(l,"click",i[11]),ge(c,"click",i[13]),ge(T,"click",i[15]),ge(E,"click",i[16])],B=!0)},p(ee,[$]){const ae={};$&1&&(ae.parent_node=ee[0]),$&2&&(ae.data=ee[1]),!s&&$&64&&(s=!0,ae.show_attack_modal=ee[6],Ar(()=>s=!1)),r.$set(ae);const ze={};$&1&&(ze.parent_node=ee[0]),$&2&&(ze.data=ee[1]),!d&&$&32&&(d=!0,ze.show_defend_modal=ee[5],Ar(()=>d=!1)),f.$set(ze);const Ve={};$&1&&(Ve.parent_node=ee[0]),$&2&&(Ve.data=ee[1]),!D&&$&16&&(D=!0,Ve.show_weakness_modal=ee[4],Ar(()=>D=!1)),v.$set(Ve);const be={};$&4&&(be.neighbor_filter_labels=ee[2]),$&1&&(be.parent_node=ee[0]),$&2&&(be.data=ee[1]),!O&&$&8&&(O=!0,be.show_neighbors_modal=ee[3],Ar(()=>O=!1)),C.$set(be)},i(ee){k||(ue(r.$$.fragment,ee),ue(f.$$.fragment,ee),ue(v.$$.fragment,ee),ue(C.$$.fragment,ee),k=!0)},o(ee){ce(r.$$.fragment,ee),ce(f.$$.fragment,ee),ce(v.$$.fragment,ee),ce(C.$$.fragment,ee),k=!1},d(ee){ee&&(w(e),w(n),w(a),w(l),w(u),w(h),w(c),w(_),w(U),w(T),w(g),w(E),w(I)),Be(r,ee),Be(f,ee),Be(v,ee),Be(C,ee),B=!1,gt(P)}}}function qy(i,e,t){let n,r,s,a;var l=this&&this.__awaiter||function(b,I,C,O){function k(B){return B instanceof C?B:new C(function(P){P(B)})}return new(C||(C=Promise))(function(B,P){function A(se){try{j(O.next(se))}catch(Z){P(Z)}}function z(se){try{j(O.throw(se))}catch(Z){P(Z)}}function j(se){se.done?B(se.value):k(se.value).then(A,z)}j((O=O.apply(b,I||[])).next())})};let{node:o}=e,u,f=[];function d(b){alert(b),t(6,n=!1),t(5,r=!1),t(4,s=!1),t(3,a=!1)}function h(b){return l(this,void 0,void 0,function*(){if(b.data.d3f_class&&b.data.d3f_class.includes("d3f:")){const I=b.data.d3f_class,C=yield fetch(`/api/dao/artifact/${I}.json`),O=yield C.json();if(C.status!=200||O.description["@graph"].length==0)d(`D3FEND Artifact: "${I.replace("d3f:","")}" not found in ontology`);else return O}else d("Please specify a D3FEND Class for this node to enable inferential mapping")})}function c(b){return z0(b["d3f:cwe-id"][0])}const p=async()=>{t(1,u=null),t(6,n=!0),t(1,u=await h(o))};function _(b){n=b,t(6,n)}const v=async()=>{t(1,u=null),t(5,r=!0),t(1,u=await h(o))};function D(b){r=b,t(5,r)}const U=async()=>{t(1,u=null),t(4,s=!0),t(1,u=await h(o))};function T(b){s=b,t(4,s)}const N=async()=>{t(1,u=null),t(3,a=!0),t(2,f=["d3f:contains","d3f:may-contains"]),t(1,u=await h(o))},g=async()=>{t(1,u=null),t(3,a=!0),t(2,f=["d3f:runs","d3f:loads","d3f:manages"]),t(1,u=await h(o))};function E(b){a=b,t(3,a)}return i.$$set=b=>{"node"in b&&t(0,o=b.node)},t(6,n=!1),t(5,r=!1),t(4,s=!1),t(3,a=!1),[o,u,f,a,s,r,n,h,c,p,_,v,D,U,T,N,g,E]}class My extends kt{constructor(e){super(),At(this,e,qy,jy,lt,{node:0})}}function Yf(i,e,t){const n=i.slice();return n[18]=e[t],n[20]=t,n}const xy=i=>({}),Jf=i=>({});function Vy(i){let e;return{c(){e=x("No related defensive techniques in this release.")},l(t){e=V(t,"No related defensive techniques in this release.")},m(t,n){R(t,e,n)},p:xe,i:xe,o:xe,d(t){t&&w(e)}}}function zy(i){let e,t;return e=new Ln({props:{$$slots:{default:[Gy]},$$scope:{ctx:i}}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r&16406&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function Hy(i){let e,t="Loading...";return{c(){e=Y("div"),e.textContent=t},l(n){e=J(n,"DIV",{"data-svelte-h":!0}),nt(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(n,r){R(n,e,r)},p:xe,i:xe,o:xe,d(n){n&&w(e)}}}function $y(i){let e,t=Le(i[18].def_artifact.value)+"",n,r;return{c(){e=x("class "),n=x(t),r=x(" ArtifactNode;")},l(s){e=V(s,"class "),n=V(s,t),r=V(s," ArtifactNode;")},m(s,a){R(s,e,a),R(s,n,a),R(s,r,a)},p(s,a){a&4&&t!==(t=Le(s[18].def_artifact.value)+"")&&we(n,t)},d(s){s&&(w(e),w(n),w(r))}}}function Xy(i){let e,t=Le(i[18].def_artifact.value)+"",n,r;return{c(){e=x("class "),n=x(t),r=x(" SelectedArtifactNode;")},l(s){e=V(s,"class "),n=V(s,t),r=V(s," SelectedArtifactNode;")},m(s,a){R(s,e,a),R(s,n,a),R(s,r,a)},p(s,a){a&4&&t!==(t=Le(s[18].def_artifact.value)+"")&&we(n,t)},d(s){s&&(w(e),w(n),w(r))}}}function Kf(i){let e=i[1].data.d3f_class+"",t,n,r=i[2].description["@graph"][0]["rdfs:label"]+"",s,a,l="-->",o,u,f=i[18].def_artifact_rel_label.value+"",d,h,c=Le(i[18].def_artifact.value)+"",p,_,v=i[18].def_artifact_label.value+"",D,U,T=i[1].data.d3f_class+"",N,g,E,b,I=Le(i[18].def_artifact.value)+"",C,O,k=Le(i[18].def_artifact.value)+"",B,P,A=`
`,z;function j(G,H){return H&20&&(E=null),E==null&&(E=!!G[4].includes(Le(G[18].def_artifact.value))),E?Xy:$y}let se=j(i,-1),Z=se(i);return{c(){t=x(e),n=x('["'),s=x(r),a=x('"] '),o=x(l),u=x(' |"'),d=x(f),h=x('" | '),p=x(c),_=x('["'),D=x(v),U=x(`"];
          class `),N=x(T),g=x(` DefensiveTechniqueNode;
          `),Z.c(),b=x(`
          click `),C=x(I),O=x(` href "javascript:def_to_art_callback('`),B=x(k),P=x(`')";`),z=x(A)},l(G){t=V(G,e),n=V(G,'["'),s=V(G,r),a=V(G,'"] '),o=V(G,l),u=V(G,' |"'),d=V(G,f),h=V(G,'" | '),p=V(G,c),_=V(G,'["'),D=V(G,v),U=V(G,`"];
          class `),N=V(G,T),g=V(G,` DefensiveTechniqueNode;
          `),Z.l(G),b=V(G,`
          click `),C=V(G,I),O=V(G,` href "javascript:def_to_art_callback('`),B=V(G,k),P=V(G,`')";`),z=V(G,A)},m(G,H){R(G,t,H),R(G,n,H),R(G,s,H),R(G,a,H),R(G,o,H),R(G,u,H),R(G,d,H),R(G,h,H),R(G,p,H),R(G,_,H),R(G,D,H),R(G,U,H),R(G,N,H),R(G,g,H),Z.m(G,H),R(G,b,H),R(G,C,H),R(G,O,H),R(G,B,H),R(G,P,H),R(G,z,H)},p(G,H){H&2&&e!==(e=G[1].data.d3f_class+"")&&we(t,e),H&4&&r!==(r=G[2].description["@graph"][0]["rdfs:label"]+"")&&we(s,r),H&4&&f!==(f=G[18].def_artifact_rel_label.value+"")&&we(d,f),H&4&&c!==(c=Le(G[18].def_artifact.value)+"")&&we(p,c),H&4&&v!==(v=G[18].def_artifact_label.value+"")&&we(D,v),H&2&&T!==(T=G[1].data.d3f_class+"")&&we(N,T),se===(se=j(G,H))&&Z?Z.p(G,H):(Z.d(1),Z=se(G),Z&&(Z.c(),Z.m(b.parentNode,b))),H&4&&I!==(I=Le(G[18].def_artifact.value)+"")&&we(C,I),H&4&&k!==(k=Le(G[18].def_artifact.value)+"")&&we(B,k)},d(G){G&&(w(t),w(n),w(s),w(a),w(o),w(u),w(d),w(h),w(p),w(_),w(D),w(U),w(N),w(g),w(b),w(C),w(O),w(B),w(P),w(z)),Z.d(G)}}}function Gy(i){let e,t,n=Ke(i[2].digital_artifacts.results.bindings),r=[];for(let s=0;s<n.length;s+=1)r[s]=Kf(Yf(i,n,s));return{c(){e=x(`graph LR
        `);for(let s=0;s<r.length;s+=1)r[s].c();t=Ie()},l(s){e=V(s,`graph LR
        `);for(let a=0;a<r.length;a+=1)r[a].l(s);t=Ie()},m(s,a){R(s,e,a);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(s,a);R(s,t,a)},p(s,a){if(a&22){n=Ke(s[2].digital_artifacts.results.bindings);let l;for(l=0;l<n.length;l+=1){const o=Yf(s,n,l);r[l]?r[l].p(o,a):(r[l]=Kf(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(s){s&&(w(e),w(t)),Tt(r,s)}}}function Qy(i){let e,t,n,r,s,a,l,o,u,f,d,h,c,p=i[4].length+"",_,v,D,U,T;const N=i[9].header,g=Kt(N,i,i[14],Jf),E=i[9].default,b=Kt(E,i,i[14],null),I=[Hy,zy,Vy],C=[];function O(k,B){return k[2]?k[2].digital_artifacts.results.bindings.length>0?1:2:0}return l=O(i),o=C[l]=I[l](i),{c(){e=Y("dialog"),t=Y("div"),g&&g.c(),n=x(`
    Select Related Artifacts To Insert
    `),b&&b.c(),r=le(),s=Y("hr"),a=le(),o.c(),u=le(),f=Y("hr"),d=le(),h=Y("button"),c=x("Insert ("),_=x(p),v=x(")"),this.h()},l(k){e=J(k,"DIALOG",{class:!0});var B=Te(e);t=J(B,"DIV",{class:!0});var P=Te(t);g&&g.l(P),n=V(P,`
    Select Related Artifacts To Insert
    `),b&&b.l(P),r=oe(P),s=J(P,"HR",{}),a=oe(P),o.l(P),u=oe(P),f=J(P,"HR",{}),d=oe(P),h=J(P,"BUTTON",{class:!0});var A=Te(h);c=V(A,"Insert ("),_=V(A,p),v=V(A,")"),A.forEach(w),P.forEach(w),B.forEach(w),this.h()},h(){h.autofocus=!0,te(h,"class","svelte-x0618k"),te(t,"class","svelte-x0618k"),te(e,"class","svelte-x0618k")},m(k,B){R(k,e,B),q(e,t),g&&g.m(t,null),q(t,n),b&&b.m(t,null),q(t,r),q(t,s),q(t,a),C[l].m(t,null),q(t,u),q(t,f),q(t,d),q(t,h),q(h,c),q(h,_),q(h,v),i[11](e),D=!0,h.focus(),U||(T=[ge(h,"click",i[7]),ge(t,"click",rr(i[10])),ge(e,"close",i[12]),ge(e,"click",Bn(i[13]))],U=!0)},p(k,[B]){g&&g.p&&(!D||B&16384)&&Zt(g,N,k,k[14],D?tr(N,k[14],B,xy):er(k[14]),Jf),b&&b.p&&(!D||B&16384)&&Zt(b,E,k,k[14],D?tr(E,k[14],B,null):er(k[14]),null);let P=l;l=O(k),l===P?C[l].p(k,B):(ht(),ce(C[P],1,1,()=>{C[P]=null}),dt(),o=C[l],o?o.p(k,B):(o=C[l]=I[l](k),o.c()),ue(o,1),o.m(t,u)),(!D||B&16)&&p!==(p=k[4].length+"")&&we(_,p)},i(k){D||(ue(g,k),ue(b,k),ue(o),D=!0)},o(k){ce(g,k),ce(b,k),ce(o),D=!1},d(k){k&&w(e),g&&g.d(k),b&&b.d(k),C[l].d(),i[11](null),U=!1,gt(T)}}}function Wy(i,e,t){let n,r,s,{$$slots:a={},$$scope:l}=e,{show_artifacts_modal:o}=e,{parent_node:u}=e,{data:f}=e,d;const h=fn();st(i,h,g=>t(16,s=g));const c=cn();st(i,c,g=>t(15,r=g));let p=new Fn;function _(g){n.includes(g)?t(4,n=n.filter(E=>E!==g)):n.push(g),t(4,n)}window.def_to_art_callback=function(g){_(g)};function v(){let g=0,E=200,b=100;for(const I of n){let C=f.digital_artifacts.results.bindings.find(O=>Le(O.def_artifact.value)==I);C&&(Hn(h,c,u,"artifactSelectorNode",C.def_artifact_label.value,"d3f:"+Le(C.def_artifact.value),u.data.sequence,u.position.x+g*E,u.position.y+b,182,82,C.def_artifact_rel_label.value,!0),g+=1)}h.set(s),c.set(r),d&&d.close(),t(4,n=[])}function D(g){Hr.call(this,i,g)}function U(g){Jt[g?"unshift":"push"](()=>{d=g,t(3,d)})}const T=()=>t(0,o=!1),N=()=>{d.close(),t(4,n=[])};return i.$$set=g=>{"show_artifacts_modal"in g&&t(0,o=g.show_artifacts_modal),"parent_node"in g&&t(1,u=g.parent_node),"data"in g&&t(2,f=g.data),"$$scope"in g&&t(14,l=g.$$scope)},i.$$.update=()=>{i.$$.dirty&9&&o&&d&&(d.showModal(),t(8,p=new Fn)),i.$$.dirty&265&&!o&&d&&(d.close(),p.reset())},t(4,n=[]),[o,u,f,d,n,h,c,v,p,a,D,U,T,N,l]}class Yy extends kt{constructor(e){super(),At(this,e,Wy,Qy,lt,{show_artifacts_modal:0,parent_node:1,data:2})}}function Zf(i,e,t){const n=i.slice();return n[18]=e[t],n}const Jy=i=>({}),ec=i=>({});function Ky(i){let e;return{c(){e=x("No related offensive techniques in this release.")},l(t){e=V(t,"No related offensive techniques in this release.")},m(t,n){R(t,e,n)},p:xe,i:xe,o:xe,d(t){t&&w(e)}}}function Zy(i){let e,t;return e=new Ln({props:{$$slots:{default:[nw]},$$scope:{ctx:i}}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r&16394&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function ew(i){let e,t="Loading...";return{c(){e=Y("div"),e.textContent=t},l(n){e=J(n,"DIV",{"data-svelte-h":!0}),nt(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(n,r){R(n,e,r)},p:xe,i:xe,o:xe,d(n){n&&w(e)}}}function tc(i){let e=Le(i[18].def_tech.value).replace(/ |\./g,"")+"",t,n,r=i[18].def_tech_label.value+"",s,a,l="-->",o,u,f="May "+i[18].def_tactic_label.value.replace(/ /g,""),d,h,c=i[18].off_tech_id.value.replace(/ |\./g,"")+"",p,_,v=i[18].off_tech_label.value+"",D,U,T,N,g=Le(i[18].def_tech.value)+"",E,b,I=i[18].off_tech_id.value.replace(/ |\./g,"")+"",C,O,k=i[18].off_tech_id.value.replace(/ |\./g,"")+"",B,P,A=Le(i[18].def_tech.value)+"",z,j,se=Le(i[18].def_tech.value)+"",Z,G;function H($,ae){return ae&10&&(T=null),T==null&&(T=!!$[3].includes($[18].off_tech_id.value.replace(/ |\./g,""))),T?rw:tw}let Q=H(i,-1),ee=Q(i);return{c(){t=x(e),n=x('["'),s=x(r),a=x('"] '),o=x(l),u=x(" | "),d=x(f),h=x("| "),p=x(c),_=x('["'),D=x(v),U=x(`"];
            `),ee.c(),N=x(`
            class `),E=x(g),b=x(" CountermeasureNode; click "),C=x(I),O=x(` href "javascript:def_to_off_callback('`),B=x(k),P=x(`')"; click `),z=x(A),j=x(' href "/technique/d3f:'),Z=x(se),G=x('";')},l($){t=V($,e),n=V($,'["'),s=V($,r),a=V($,'"] '),o=V($,l),u=V($," | "),d=V($,f),h=V($,"| "),p=V($,c),_=V($,'["'),D=V($,v),U=V($,`"];
            `),ee.l($),N=V($,`
            class `),E=V($,g),b=V($," CountermeasureNode; click "),C=V($,I),O=V($,` href "javascript:def_to_off_callback('`),B=V($,k),P=V($,`')"; click `),z=V($,A),j=V($,' href "/technique/d3f:'),Z=V($,se),G=V($,'";')},m($,ae){R($,t,ae),R($,n,ae),R($,s,ae),R($,a,ae),R($,o,ae),R($,u,ae),R($,d,ae),R($,h,ae),R($,p,ae),R($,_,ae),R($,D,ae),R($,U,ae),ee.m($,ae),R($,N,ae),R($,E,ae),R($,b,ae),R($,C,ae),R($,O,ae),R($,B,ae),R($,P,ae),R($,z,ae),R($,j,ae),R($,Z,ae),R($,G,ae)},p($,ae){ae&2&&e!==(e=Le($[18].def_tech.value).replace(/ |\./g,"")+"")&&we(t,e),ae&2&&r!==(r=$[18].def_tech_label.value+"")&&we(s,r),ae&2&&f!==(f="May "+$[18].def_tactic_label.value.replace(/ /g,""))&&we(d,f),ae&2&&c!==(c=$[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(p,c),ae&2&&v!==(v=$[18].off_tech_label.value+"")&&we(D,v),Q===(Q=H($,ae))&&ee?ee.p($,ae):(ee.d(1),ee=Q($),ee&&(ee.c(),ee.m(N.parentNode,N))),ae&2&&g!==(g=Le($[18].def_tech.value)+"")&&we(E,g),ae&2&&I!==(I=$[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(C,I),ae&2&&k!==(k=$[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(B,k),ae&2&&A!==(A=Le($[18].def_tech.value)+"")&&we(z,A),ae&2&&se!==(se=Le($[18].def_tech.value)+"")&&we(Z,se)},d($){$&&(w(t),w(n),w(s),w(a),w(o),w(u),w(d),w(h),w(p),w(_),w(D),w(U),w(N),w(E),w(b),w(C),w(O),w(B),w(P),w(z),w(j),w(Z),w(G)),ee.d($)}}}function tw(i){let e,t=i[18].off_tech_id.value.replace(/ |\./g,"")+"",n,r;return{c(){e=x("class "),n=x(t),r=x(" OffensiveTechniqueNode;")},l(s){e=V(s,"class "),n=V(s,t),r=V(s," OffensiveTechniqueNode;")},m(s,a){R(s,e,a),R(s,n,a),R(s,r,a)},p(s,a){a&2&&t!==(t=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(n,t)},d(s){s&&(w(e),w(n),w(r))}}}function rw(i){let e,t=i[18].off_tech_id.value.replace(/ |\./g,"")+"",n,r;return{c(){e=x("class "),n=x(t),r=x(" SelectedOffensiveTechniqueNode;")},l(s){e=V(s,"class "),n=V(s,t),r=V(s," SelectedOffensiveTechniqueNode;")},m(s,a){R(s,e,a),R(s,n,a),R(s,r,a)},p(s,a){a&2&&t!==(t=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(n,t)},d(s){s&&(w(e),w(n),w(r))}}}function rc(i){let e=i[6].edge_is_unique(i[18].def_tech_label.value,i[18].off_artifact_rel_label.value,i[18].off_artifact_label.value),t,n=e&&tc(i);return{c(){n&&n.c(),t=Ie()},l(r){n&&n.l(r),t=Ie()},m(r,s){n&&n.m(r,s),R(r,t,s)},p(r,s){s&2&&(e=r[6].edge_is_unique(r[18].def_tech_label.value,r[18].off_artifact_rel_label.value,r[18].off_artifact_label.value)),e?n?n.p(r,s):(n=tc(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){r&&w(t),n&&n.d(r)}}}function nw(i){let e,t,n=Ke(i[1].def_to_off.results.bindings),r=[];for(let s=0;s<n.length;s+=1)r[s]=rc(Zf(i,n,s));return{c(){e=x(`graph LR;
        `);for(let s=0;s<r.length;s+=1)r[s].c();t=Ie()},l(s){e=V(s,`graph LR;
        `);for(let a=0;a<r.length;a+=1)r[a].l(s);t=Ie()},m(s,a){R(s,e,a);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(s,a);R(s,t,a)},p(s,a){if(a&74){n=Ke(s[1].def_to_off.results.bindings);let l;for(l=0;l<n.length;l+=1){const o=Zf(s,n,l);r[l]?r[l].p(o,a):(r[l]=rc(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(s){s&&(w(e),w(t)),Tt(r,s)}}}function iw(i){let e,t,n,r,s,a,l,o,u,f,d,h,c,p=i[3].length+"",_,v,D,U,T;const N=i[9].header,g=Kt(N,i,i[14],ec),E=i[9].default,b=Kt(E,i,i[14],null),I=[ew,Zy,Ky],C=[];function O(k,B){return k[1]?k[1].def_to_off.results.bindings.length>0?1:2:0}return l=O(i),o=C[l]=I[l](i),{c(){e=Y("dialog"),t=Y("div"),g&&g.c(),n=x(`
    Select Attack Techniques
    `),b&&b.c(),r=le(),s=Y("hr"),a=le(),o.c(),u=le(),f=Y("hr"),d=le(),h=Y("button"),c=x("Insert ("),_=x(p),v=x(")"),this.h()},l(k){e=J(k,"DIALOG",{class:!0});var B=Te(e);t=J(B,"DIV",{class:!0});var P=Te(t);g&&g.l(P),n=V(P,`
    Select Attack Techniques
    `),b&&b.l(P),r=oe(P),s=J(P,"HR",{}),a=oe(P),o.l(P),u=oe(P),f=J(P,"HR",{}),d=oe(P),h=J(P,"BUTTON",{class:!0});var A=Te(h);c=V(A,"Insert ("),_=V(A,p),v=V(A,")"),A.forEach(w),P.forEach(w),B.forEach(w),this.h()},h(){h.autofocus=!0,te(h,"class","svelte-1ai9hff"),te(t,"class","svelte-1ai9hff"),te(e,"class","svelte-1ai9hff")},m(k,B){R(k,e,B),q(e,t),g&&g.m(t,null),q(t,n),b&&b.m(t,null),q(t,r),q(t,s),q(t,a),C[l].m(t,null),q(t,u),q(t,f),q(t,d),q(t,h),q(h,c),q(h,_),q(h,v),i[11](e),D=!0,h.focus(),U||(T=[ge(h,"click",i[7]),ge(t,"click",rr(i[10])),ge(e,"close",i[12]),ge(e,"click",Bn(i[13]))],U=!0)},p(k,[B]){g&&g.p&&(!D||B&16384)&&Zt(g,N,k,k[14],D?tr(N,k[14],B,Jy):er(k[14]),ec),b&&b.p&&(!D||B&16384)&&Zt(b,E,k,k[14],D?tr(E,k[14],B,null):er(k[14]),null);let P=l;l=O(k),l===P?C[l].p(k,B):(ht(),ce(C[P],1,1,()=>{C[P]=null}),dt(),o=C[l],o?o.p(k,B):(o=C[l]=I[l](k),o.c()),ue(o,1),o.m(t,u)),(!D||B&8)&&p!==(p=k[3].length+"")&&we(_,p)},i(k){D||(ue(g,k),ue(b,k),ue(o),D=!0)},o(k){ce(g,k),ce(b,k),ce(o),D=!1},d(k){k&&w(e),g&&g.d(k),b&&b.d(k),C[l].d(),i[11](null),U=!1,gt(T)}}}function aw(i,e,t){let n,r,s,{$$slots:a={},$$scope:l}=e,{show_attack_modal:o}=e,{parent_node:u}=e,{data:f}=e,d;const h=fn();st(i,h,g=>t(16,s=g));const c=cn();st(i,c,g=>t(15,r=g));let p=new Fn;function _(g){n.includes(g)?t(3,n=n.filter(E=>E!==g)):n.push(g),t(3,n)}window.def_to_off_callback=function(g){_(g)};function v(){let g=0,E=200,b=100;for(const I of n){let C=f.def_to_off.results.bindings.find(O=>O.off_tech_id.value.replace(/ |\./g,"")==I);C&&(Hn(h,c,u,"attackSelectorNode",C.off_tech_label.value,"d3f:"+C.off_tech_id.value,u.data.sequence,u.position.x+g*E,u.position.y+b,182,63,"May "+C.def_tactic_label.value,!0),g+=1)}h.set(s),c.set(r),d&&d.close(),t(3,n=[])}function D(g){Hr.call(this,i,g)}function U(g){Jt[g?"unshift":"push"](()=>{d=g,t(2,d)})}const T=()=>t(0,o=!1),N=()=>{d.close(),t(3,n=[])};return i.$$set=g=>{"show_attack_modal"in g&&t(0,o=g.show_attack_modal),"parent_node"in g&&t(8,u=g.parent_node),"data"in g&&t(1,f=g.data),"$$scope"in g&&t(14,l=g.$$scope)},i.$$.update=()=>{i.$$.dirty&5&&o&&d&&(d.showModal(),p.reset()),i.$$.dirty&5&&!o&&d&&(d.close(),p.reset())},t(3,n=[]),[o,f,d,n,h,c,p,v,u,a,D,U,T,N,l]}class sw extends kt{constructor(e){super(),At(this,e,aw,iw,lt,{show_attack_modal:0,parent_node:8,data:1})}}function lw(i){let e,t="artifacts",n,r,s,a,l,o="offensive techniques",u,f,d,h,c,p="weaknesses (coming soon)",_,v,D;function U(E){i[6](E)}let T={parent_node:i[0],data:i[1]};i[3]!==void 0&&(T.show_artifacts_modal=i[3]),r=new Yy({props:T}),Jt.push(()=>Cr(r,"show_artifacts_modal",U));function N(E){i[8](E)}let g={parent_node:i[0],data:i[1]};return i[2]!==void 0&&(g.show_attack_modal=i[2]),f=new sw({props:g}),Jt.push(()=>Cr(f,"show_attack_modal",N)),{c(){e=Y("button"),e.textContent=t,n=le(),Re(r.$$.fragment),a=le(),l=Y("button"),l.textContent=o,u=le(),Re(f.$$.fragment),h=le(),c=Y("button"),c.textContent=p,this.h()},l(E){e=J(E,"BUTTON",{class:!0,"data-svelte-h":!0}),nt(e)!=="svelte-isgkpy"&&(e.textContent=t),n=oe(E),Fe(r.$$.fragment,E),a=oe(E),l=J(E,"BUTTON",{class:!0,"data-svelte-h":!0}),nt(l)!=="svelte-17h5zge"&&(l.textContent=o),u=oe(E),Fe(f.$$.fragment,E),h=oe(E),c=J(E,"BUTTON",{class:!0,"data-svelte-h":!0}),nt(c)!=="svelte-ivhbdc"&&(c.textContent=p),this.h()},h(){te(e,"class","svelte-1x5dcdh"),te(l,"class","svelte-1x5dcdh"),c.disabled=!0,te(c,"class","svelte-1x5dcdh")},m(E,b){R(E,e,b),R(E,n,b),Oe(r,E,b),R(E,a,b),R(E,l,b),R(E,u,b),Oe(f,E,b),R(E,h,b),R(E,c,b),_=!0,v||(D=[ge(e,"click",i[5]),ge(l,"click",i[7])],v=!0)},p(E,[b]){const I={};b&1&&(I.parent_node=E[0]),b&2&&(I.data=E[1]),!s&&b&8&&(s=!0,I.show_artifacts_modal=E[3],Ar(()=>s=!1)),r.$set(I);const C={};b&1&&(C.parent_node=E[0]),b&2&&(C.data=E[1]),!d&&b&4&&(d=!0,C.show_attack_modal=E[2],Ar(()=>d=!1)),f.$set(C)},i(E){_||(ue(r.$$.fragment,E),ue(f.$$.fragment,E),_=!0)},o(E){ce(r.$$.fragment,E),ce(f.$$.fragment,E),_=!1},d(E){E&&(w(e),w(n),w(a),w(l),w(u),w(h),w(c)),Be(r,E),Be(f,E),v=!1,gt(D)}}}function ow(i,e,t){let n,r;var s=this&&this.__awaiter||function(p,_,v,D){function U(T){return T instanceof v?T:new v(function(N){N(T)})}return new(v||(v=Promise))(function(T,N){function g(I){try{b(D.next(I))}catch(C){N(C)}}function E(I){try{b(D.throw(I))}catch(C){N(C)}}function b(I){I.done?T(I.value):U(I.value).then(g,E)}b((D=D.apply(p,_||[])).next())})};let{node:a}=e,l;function o(p){alert(p),t(3,n=!1),t(2,r=!1)}function u(p){return s(this,void 0,void 0,function*(){if(p.data.d3f_class&&p.data.d3f_class.includes("d3f:")){const _=p.data.d3f_class,v=yield fetch(`/api/technique/${_}.json`),D=yield v.json();if(v.status!=200||D.description["@graph"].length==0)o(`D3FEND Technique: "${_.replace("d3f:","")}" not found in ontology`);else return D}else o("Please specify a D3FEND Class for this node to enable inferential mapping")})}const f=async()=>{t(1,l=null),t(3,n=!0),t(1,l=await u(a))};function d(p){n=p,t(3,n)}const h=async()=>{t(1,l=null),t(2,r=!0),t(1,l=await u(a))};function c(p){r=p,t(2,r)}return i.$$set=p=>{"node"in p&&t(0,a=p.node)},t(3,n=!1),t(2,r=!1),[a,l,r,n,u,f,d,h,c]}class uw extends kt{constructor(e){super(),At(this,e,ow,lw,lt,{node:0})}}function nc(i,e,t){const n=i.slice();return n[18]=e[t],n}const fw=i=>({}),ic=i=>({});function cw(i){let e;return{c(){e=x("No related artifacts in this release.")},l(t){e=V(t,"No related artifacts in this release.")},m(t,n){R(t,e,n)},p:xe,i:xe,o:xe,d(t){t&&w(e)}}}function hw(i){let e,t;return e=new Ln({props:{$$slots:{default:[vw]},$$scope:{ctx:i}}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r&16394&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function dw(i){let e,t="Loading...";return{c(){e=Y("div"),e.textContent=t},l(n){e=J(n,"DIV",{"data-svelte-h":!0}),nt(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(n,r){R(n,e,r)},p:xe,i:xe,o:xe,d(n){n&&w(e)}}}function ac(i){let e=i[18].off_tech_id.value.replace(/ |\./g,"")+"",t,n,r=i[18].off_tech_label.value+"",s,a,l="-->",o,u,f=i[18].off_artifact_rel_label.value.replace(/ /g,"")+"",d,h,c=Le(i[18].off_artifact.value)+"",p,_,v=i[18].off_artifact_label.value+"",D,U,T=i[18].off_tech_id.value.replace(/ |\./g,"")+"",N,g,E,b,I=Le(i[18].off_artifact.value)+"",C,O,k=Le(i[18].off_artifact.value)+"",B,P,A=i[18].off_tech_id.value.replace(/ |\./g,"")+"",z,j,se=Ha(i[18].off_tech_id.value)+"",Z,G,H=Le(i[18].off_artifact.value)+"",Q,ee,$=Le(i[18].off_artifact.value)+"",ae,ze;function Ve(_e,Se){return Se&10&&(E=null),E==null&&(E=!!_e[3].includes(Le(_e[18].off_artifact.value))),E?_w:pw}let be=Ve(i,-1),Ne=be(i);return{c(){t=x(e),n=x('["'),s=x(r),a=x('"] '),o=x(l),u=x(" |"),d=x(f),h=x("| "),p=x(c),_=x('["'),D=x(v),U=x('"]; class '),N=x(T),g=x(` OffensiveTechniqueNode;
            `),Ne.c(),b=x(" ; click "),C=x(I),O=x(' href "/dao/artifact/d3f:'),B=x(k),P=x('"; click '),z=x(A),j=x(' href "'),Z=x(se),G=x('"; click '),Q=x(H),ee=x(` href "javascript:off_to_art_callback('`),ae=x($),ze=x(`')";`)},l(_e){t=V(_e,e),n=V(_e,'["'),s=V(_e,r),a=V(_e,'"] '),o=V(_e,l),u=V(_e," |"),d=V(_e,f),h=V(_e,"| "),p=V(_e,c),_=V(_e,'["'),D=V(_e,v),U=V(_e,'"]; class '),N=V(_e,T),g=V(_e,` OffensiveTechniqueNode;
            `),Ne.l(_e),b=V(_e," ; click "),C=V(_e,I),O=V(_e,' href "/dao/artifact/d3f:'),B=V(_e,k),P=V(_e,'"; click '),z=V(_e,A),j=V(_e,' href "'),Z=V(_e,se),G=V(_e,'"; click '),Q=V(_e,H),ee=V(_e,` href "javascript:off_to_art_callback('`),ae=V(_e,$),ze=V(_e,`')";`)},m(_e,Se){R(_e,t,Se),R(_e,n,Se),R(_e,s,Se),R(_e,a,Se),R(_e,o,Se),R(_e,u,Se),R(_e,d,Se),R(_e,h,Se),R(_e,p,Se),R(_e,_,Se),R(_e,D,Se),R(_e,U,Se),R(_e,N,Se),R(_e,g,Se),Ne.m(_e,Se),R(_e,b,Se),R(_e,C,Se),R(_e,O,Se),R(_e,B,Se),R(_e,P,Se),R(_e,z,Se),R(_e,j,Se),R(_e,Z,Se),R(_e,G,Se),R(_e,Q,Se),R(_e,ee,Se),R(_e,ae,Se),R(_e,ze,Se)},p(_e,Se){Se&2&&e!==(e=_e[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(t,e),Se&2&&r!==(r=_e[18].off_tech_label.value+"")&&we(s,r),Se&2&&f!==(f=_e[18].off_artifact_rel_label.value.replace(/ /g,"")+"")&&we(d,f),Se&2&&c!==(c=Le(_e[18].off_artifact.value)+"")&&we(p,c),Se&2&&v!==(v=_e[18].off_artifact_label.value+"")&&we(D,v),Se&2&&T!==(T=_e[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(N,T),be===(be=Ve(_e,Se))&&Ne?Ne.p(_e,Se):(Ne.d(1),Ne=be(_e),Ne&&(Ne.c(),Ne.m(b.parentNode,b))),Se&2&&I!==(I=Le(_e[18].off_artifact.value)+"")&&we(C,I),Se&2&&k!==(k=Le(_e[18].off_artifact.value)+"")&&we(B,k),Se&2&&A!==(A=_e[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(z,A),Se&2&&se!==(se=Ha(_e[18].off_tech_id.value)+"")&&we(Z,se),Se&2&&H!==(H=Le(_e[18].off_artifact.value)+"")&&we(Q,H),Se&2&&$!==($=Le(_e[18].off_artifact.value)+"")&&we(ae,$)},d(_e){_e&&(w(t),w(n),w(s),w(a),w(o),w(u),w(d),w(h),w(p),w(_),w(D),w(U),w(N),w(g),w(b),w(C),w(O),w(B),w(P),w(z),w(j),w(Z),w(G),w(Q),w(ee),w(ae),w(ze)),Ne.d(_e)}}}function pw(i){let e,t=Le(i[18].off_artifact.value)+"",n,r;return{c(){e=x("class "),n=x(t),r=x(" ArtifactNode;")},l(s){e=V(s,"class "),n=V(s,t),r=V(s," ArtifactNode;")},m(s,a){R(s,e,a),R(s,n,a),R(s,r,a)},p(s,a){a&2&&t!==(t=Le(s[18].off_artifact.value)+"")&&we(n,t)},d(s){s&&(w(e),w(n),w(r))}}}function _w(i){let e,t=Le(i[18].off_artifact.value)+"",n,r;return{c(){e=x("class "),n=x(t),r=x(" SelectedArtifactNode;")},l(s){e=V(s,"class "),n=V(s,t),r=V(s," SelectedArtifactNode;")},m(s,a){R(s,e,a),R(s,n,a),R(s,r,a)},p(s,a){a&2&&t!==(t=Le(s[18].off_artifact.value)+"")&&we(n,t)},d(s){s&&(w(e),w(n),w(r))}}}function sc(i){let e=i[6].edge_is_unique(i[18].off_tech_label.value,i[18].off_artifact_rel_label.value,i[18].off_artifact_label.value),t,n=e&&ac(i);return{c(){n&&n.c(),t=Ie()},l(r){n&&n.l(r),t=Ie()},m(r,s){n&&n.m(r,s),R(r,t,s)},p(r,s){s&2&&(e=r[6].edge_is_unique(r[18].off_tech_label.value,r[18].off_artifact_rel_label.value,r[18].off_artifact_label.value)),e?n?n.p(r,s):(n=ac(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){r&&w(t),n&&n.d(r)}}}function vw(i){let e,t,n=Ke(i[1].off_to_def.results.bindings),r=[];for(let s=0;s<n.length;s+=1)r[s]=sc(nc(i,n,s));return{c(){e=x(`graph LR;
        `);for(let s=0;s<r.length;s+=1)r[s].c();t=Ie()},l(s){e=V(s,`graph LR;
        `);for(let a=0;a<r.length;a+=1)r[a].l(s);t=Ie()},m(s,a){R(s,e,a);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(s,a);R(s,t,a)},p(s,a){if(a&74){n=Ke(s[1].off_to_def.results.bindings);let l;for(l=0;l<n.length;l+=1){const o=nc(s,n,l);r[l]?r[l].p(o,a):(r[l]=sc(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(s){s&&(w(e),w(t)),Tt(r,s)}}}function mw(i){let e,t,n,r,s,a,l,o,u,f,d,h,c,p=i[3].length+"",_,v,D,U,T;const N=i[9].header,g=Kt(N,i,i[14],ic),E=i[9].default,b=Kt(E,i,i[14],null),I=[dw,hw,cw],C=[];function O(k,B){return k[1]?k[1].off_to_def.results.bindings.length>0?1:2:0}return l=O(i),o=C[l]=I[l](i),{c(){e=Y("dialog"),t=Y("div"),g&&g.c(),n=x(`
    Select Related Artifacts To Insert
    `),b&&b.c(),r=le(),s=Y("hr"),a=le(),o.c(),u=le(),f=Y("hr"),d=le(),h=Y("button"),c=x("Insert ("),_=x(p),v=x(")"),this.h()},l(k){e=J(k,"DIALOG",{class:!0});var B=Te(e);t=J(B,"DIV",{class:!0});var P=Te(t);g&&g.l(P),n=V(P,`
    Select Related Artifacts To Insert
    `),b&&b.l(P),r=oe(P),s=J(P,"HR",{}),a=oe(P),o.l(P),u=oe(P),f=J(P,"HR",{}),d=oe(P),h=J(P,"BUTTON",{class:!0});var A=Te(h);c=V(A,"Insert ("),_=V(A,p),v=V(A,")"),A.forEach(w),P.forEach(w),B.forEach(w),this.h()},h(){h.autofocus=!0,te(h,"class","svelte-x0618k"),te(t,"class","svelte-x0618k"),te(e,"class","svelte-x0618k")},m(k,B){R(k,e,B),q(e,t),g&&g.m(t,null),q(t,n),b&&b.m(t,null),q(t,r),q(t,s),q(t,a),C[l].m(t,null),q(t,u),q(t,f),q(t,d),q(t,h),q(h,c),q(h,_),q(h,v),i[11](e),D=!0,h.focus(),U||(T=[ge(h,"click",i[7]),ge(t,"click",rr(i[10])),ge(e,"close",i[12]),ge(e,"click",Bn(i[13]))],U=!0)},p(k,[B]){g&&g.p&&(!D||B&16384)&&Zt(g,N,k,k[14],D?tr(N,k[14],B,fw):er(k[14]),ic),b&&b.p&&(!D||B&16384)&&Zt(b,E,k,k[14],D?tr(E,k[14],B,null):er(k[14]),null);let P=l;l=O(k),l===P?C[l].p(k,B):(ht(),ce(C[P],1,1,()=>{C[P]=null}),dt(),o=C[l],o?o.p(k,B):(o=C[l]=I[l](k),o.c()),ue(o,1),o.m(t,u)),(!D||B&8)&&p!==(p=k[3].length+"")&&we(_,p)},i(k){D||(ue(g,k),ue(b,k),ue(o),D=!0)},o(k){ce(g,k),ce(b,k),ce(o),D=!1},d(k){k&&w(e),g&&g.d(k),b&&b.d(k),C[l].d(),i[11](null),U=!1,gt(T)}}}function gw(i,e,t){let n,r,s,{$$slots:a={},$$scope:l}=e,{show_artifacts_modal:o}=e,{parent_node:u}=e,{data:f}=e,d;const h=fn();st(i,h,g=>t(16,s=g));const c=cn();st(i,c,g=>t(15,r=g));let p=new Fn;function _(g){n.includes(g)?t(3,n=n.filter(E=>E!==g)):n.push(g),t(3,n)}window.off_to_art_callback=function(g){_(g)};function v(){let g=0,E=200,b=100;for(const I of n){let C=f.off_to_def.results.bindings.find(O=>Le(O.off_artifact.value)==I);C&&(Hn(h,c,u,"artifactSelectorNode",C.off_artifact_label.value,"d3f:"+Le(C.off_artifact.value),u.data.sequence,u.position.x+g*E,u.position.y+b,182,63,C.off_artifact_rel_label.value,!0),g+=1)}h.set(s),c.set(r),d&&d.close(),t(3,n=[])}function D(g){Hr.call(this,i,g)}function U(g){Jt[g?"unshift":"push"](()=>{d=g,t(2,d)})}const T=()=>t(0,o=!1),N=()=>{d.close(),t(3,n=[])};return i.$$set=g=>{"show_artifacts_modal"in g&&t(0,o=g.show_artifacts_modal),"parent_node"in g&&t(8,u=g.parent_node),"data"in g&&t(1,f=g.data),"$$scope"in g&&t(14,l=g.$$scope)},i.$$.update=()=>{i.$$.dirty&5&&o&&d&&(d.showModal(),p.reset()),i.$$.dirty&5&&!o&&d&&(d.close(),p.reset())},t(3,n=[]),[o,f,d,n,h,c,p,v,u,a,D,U,T,N,l]}class bw extends kt{constructor(e){super(),At(this,e,gw,mw,lt,{show_artifacts_modal:0,parent_node:8,data:1})}}function lc(i,e,t){const n=i.slice();return n[23]=e[t],n}const yw=i=>({}),oc=i=>({});function ww(i){let e;return{c(){e=x("No related artifacts in this release.")},l(t){e=V(t,"No related artifacts in this release.")},m(t,n){R(t,e,n)},p:xe,i:xe,o:xe,d(t){t&&w(e)}}}function Ew(i){let e,t,n,r,s,a,l,o,u,f;function d(c){i[14](c)}let h={toggles:i[4]};return i[3]!==void 0&&(h.selected=i[3]),t=new td({props:h}),Jt.push(()=>Cr(t,"selected",d)),u=new Ln({props:{$$slots:{default:[Cw]},$$scope:{ctx:i}}}),{c(){e=Y("div"),Re(t.$$.fragment),r=le(),s=Y("br"),a=le(),l=Y("br"),o=le(),Re(u.$$.fragment),this.h()},l(c){e=J(c,"DIV",{class:!0});var p=Te(e);Fe(t.$$.fragment,p),p.forEach(w),r=oe(c),s=J(c,"BR",{}),a=oe(c),l=J(c,"BR",{}),o=oe(c),Fe(u.$$.fragment,c),this.h()},h(){te(e,"class","center shrink")},m(c,p){R(c,e,p),Oe(t,e,null),R(c,r,p),R(c,s,p),R(c,a,p),R(c,l,p),R(c,o,p),Oe(u,c,p),f=!0},p(c,p){const _={};p&16&&(_.toggles=c[4]),!n&&p&8&&(n=!0,_.selected=c[3],Ar(()=>n=!1)),t.$set(_);const v={};p&262186&&(v.$$scope={dirty:p,ctx:c}),u.$set(v)},i(c){f||(ue(t.$$.fragment,c),ue(u.$$.fragment,c),f=!0)},o(c){ce(t.$$.fragment,c),ce(u.$$.fragment,c),f=!1},d(c){c&&(w(e),w(r),w(s),w(a),w(l),w(o)),Be(t),Be(u,c)}}}function Dw(i){let e,t="Loading...";return{c(){e=Y("div"),e.textContent=t},l(n){e=J(n,"DIV",{"data-svelte-h":!0}),nt(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(n,r){R(n,e,r)},p:xe,i:xe,o:xe,d(n){n&&w(e)}}}function uc(i){let e=i[8].edge_is_unique(i[23].def_tech_label.value,i[23].def_artifact_rel_label.value,i[23].off_artifact_label.value),t,n=e&&fc(i);return{c(){n&&n.c(),t=Ie()},l(r){n&&n.l(r),t=Ie()},m(r,s){n&&n.m(r,s),R(r,t,s)},p(r,s){s&2&&(e=r[8].edge_is_unique(r[23].def_tech_label.value,r[23].def_artifact_rel_label.value,r[23].off_artifact_label.value)),e?n?n.p(r,s):(n=fc(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){r&&w(t),n&&n.d(r)}}}function fc(i){let e=!i[3].includes(i[23].def_tactic_label.value),t,n=e&&cc(i);return{c(){n&&n.c(),t=Ie()},l(r){n&&n.l(r),t=Ie()},m(r,s){n&&n.m(r,s),R(r,t,s)},p(r,s){s&10&&(e=!r[3].includes(r[23].def_tactic_label.value)),e?n?n.p(r,s):(n=cc(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){r&&w(t),n&&n.d(r)}}}function cc(i){let e=Le(i[23].def_tech.value)+"",t,n,r=i[23].def_tech_label.value+"",s,a,l="-->",o,u,f=i[23].def_artifact_rel_label.value.replace(/ /g,"")+"",d,h,c=Le(i[23].off_artifact.value)+"",p,_,v=i[23].off_artifact_label.value+"",D,U,T=i[8].edge_is_unique(i[23].def_tech.value,i[23].def_tactic_label.value,i[23].off_tech_id.value),N,g,E,b=i[23].off_artifact_label.value.replace(/ /g,"")+"",I,C,O=Le(i[23].def_tech.value)+"",k,B,P=i[23].def_tech_label.value.replace(/ |\./g,"")+"",A,z,j=T&&hc(i);function se(H,Q){return Q&34&&(g=null),g==null&&(g=!!H[5].includes(Le(H[23].def_tech.value))),g?Aw:kw}let Z=se(i,-1),G=Z(i);return{c(){t=x(e),n=x('["'),s=x(r),a=x('"] '),o=x(l),u=x(`
                | `),d=x(f),h=x(" | "),p=x(c),_=x('["'),D=x(v),U=x(`"];

                `),j&&j.c(),N=le(),G.c(),E=x(` 
                class `),I=x(b),C=x(` ArtifactNode;
                click `),k=x(O),B=x(` href "javascript:off_to_def_callback('`),A=x(P),z=x(`')";`)},l(H){t=V(H,e),n=V(H,'["'),s=V(H,r),a=V(H,'"] '),o=V(H,l),u=V(H,`
                | `),d=V(H,f),h=V(H," | "),p=V(H,c),_=V(H,'["'),D=V(H,v),U=V(H,`"];

                `),j&&j.l(H),N=oe(H),G.l(H),E=V(H,` 
                class `),I=V(H,b),C=V(H,` ArtifactNode;
                click `),k=V(H,O),B=V(H,` href "javascript:off_to_def_callback('`),A=V(H,P),z=V(H,`')";`)},m(H,Q){R(H,t,Q),R(H,n,Q),R(H,s,Q),R(H,a,Q),R(H,o,Q),R(H,u,Q),R(H,d,Q),R(H,h,Q),R(H,p,Q),R(H,_,Q),R(H,D,Q),R(H,U,Q),j&&j.m(H,Q),R(H,N,Q),G.m(H,Q),R(H,E,Q),R(H,I,Q),R(H,C,Q),R(H,k,Q),R(H,B,Q),R(H,A,Q),R(H,z,Q)},p(H,Q){Q&2&&e!==(e=Le(H[23].def_tech.value)+"")&&we(t,e),Q&2&&r!==(r=H[23].def_tech_label.value+"")&&we(s,r),Q&2&&f!==(f=H[23].def_artifact_rel_label.value.replace(/ /g,"")+"")&&we(d,f),Q&2&&c!==(c=Le(H[23].off_artifact.value)+"")&&we(p,c),Q&2&&v!==(v=H[23].off_artifact_label.value+"")&&we(D,v),Q&2&&(T=H[8].edge_is_unique(H[23].def_tech.value,H[23].def_tactic_label.value,H[23].off_tech_id.value)),T?j?j.p(H,Q):(j=hc(H),j.c(),j.m(N.parentNode,N)):j&&(j.d(1),j=null),Z===(Z=se(H,Q))&&G?G.p(H,Q):(G.d(1),G=Z(H),G&&(G.c(),G.m(E.parentNode,E))),Q&2&&b!==(b=H[23].off_artifact_label.value.replace(/ /g,"")+"")&&we(I,b),Q&2&&O!==(O=Le(H[23].def_tech.value)+"")&&we(k,O),Q&2&&P!==(P=H[23].def_tech_label.value.replace(/ |\./g,"")+"")&&we(A,P)},d(H){H&&(w(t),w(n),w(s),w(a),w(o),w(u),w(d),w(h),w(p),w(_),w(D),w(U),w(N),w(E),w(I),w(C),w(k),w(B),w(A),w(z)),j&&j.d(H),G.d(H)}}}function hc(i){let e=Le(i[23].def_tech.value)+"",t,n,r=i[23].def_tech_label.value+"",s,a,l="-.->",o,u,f="May "+i[23].def_tactic_label.value,d,h,c=i[23].off_tech_id.value.replace(/ |\./g,"")+"",p,_,v=i[23].off_tech_label.value+"",D,U;return{c(){t=x(e),n=x('["'),s=x(r),a=x('"] '),o=x(l),u=x(`
                  | `),d=x(f),h=x(" | "),p=x(c),_=x('["'),D=x(v),U=x('"] ;')},l(T){t=V(T,e),n=V(T,'["'),s=V(T,r),a=V(T,'"] '),o=V(T,l),u=V(T,`
                  | `),d=V(T,f),h=V(T," | "),p=V(T,c),_=V(T,'["'),D=V(T,v),U=V(T,'"] ;')},m(T,N){R(T,t,N),R(T,n,N),R(T,s,N),R(T,a,N),R(T,o,N),R(T,u,N),R(T,d,N),R(T,h,N),R(T,p,N),R(T,_,N),R(T,D,N),R(T,U,N)},p(T,N){N&2&&e!==(e=Le(T[23].def_tech.value)+"")&&we(t,e),N&2&&r!==(r=T[23].def_tech_label.value+"")&&we(s,r),N&2&&f!==(f="May "+T[23].def_tactic_label.value)&&we(d,f),N&2&&c!==(c=T[23].off_tech_id.value.replace(/ |\./g,"")+"")&&we(p,c),N&2&&v!==(v=T[23].off_tech_label.value+"")&&we(D,v)},d(T){T&&(w(t),w(n),w(s),w(a),w(o),w(u),w(d),w(h),w(p),w(_),w(D),w(U))}}}function kw(i){let e,t=Le(i[23].def_tech.value)+"",n,r;return{c(){e=x("class "),n=x(t),r=x(" DefensiveTechniqueNode;")},l(s){e=V(s,"class "),n=V(s,t),r=V(s," DefensiveTechniqueNode;")},m(s,a){R(s,e,a),R(s,n,a),R(s,r,a)},p(s,a){a&2&&t!==(t=Le(s[23].def_tech.value)+"")&&we(n,t)},d(s){s&&(w(e),w(n),w(r))}}}function Aw(i){let e,t=Le(i[23].def_tech.value)+"",n,r;return{c(){e=x("class "),n=x(t),r=x(" SelectedDefensiveTechniqueNode;")},l(s){e=V(s,"class "),n=V(s,t),r=V(s," SelectedDefensiveTechniqueNode;")},m(s,a){R(s,e,a),R(s,n,a),R(s,r,a)},p(s,a){a&2&&t!==(t=Le(s[23].def_tech.value)+"")&&we(n,t)},d(s){s&&(w(e),w(n),w(r))}}}function dc(i){let e=i[23].off_tech_id.value.replace(/ |\./g,"")+"",t,n,r=i[23].off_tech_label.value+"",s,a,l="-->",o,u,f=i[23].off_artifact_rel_label.value.replace(/ /g,"")+"",d,h,c=Le(i[23].off_artifact.value)+"",p,_,v=i[23].off_artifact_label.value+"",D,U,T=i[23].off_tech_id.value.replace(/ |\./g,"")+"",N,g,E=Le(i[23].off_artifact.value)+"",b,I,C=Le(i[23].off_artifact.value)+"",O,k,B=Le(i[23].off_artifact.value)+"",P,A,z=i[23].off_tech_id.value.replace(/ |\./g,"")+"",j,se,Z=Ha(i[23].off_tech_id.value)+"",G,H,Q=Le(i[23].off_artifact.value)+"",ee,$,ae=Le(i[23].off_artifact.value)+"",ze,Ve;return{c(){t=x(e),n=x('["'),s=x(r),a=x('"] '),o=x(l),u=x(" |"),d=x(f),h=x("| "),p=x(c),_=x('["'),D=x(v),U=x('"]; class '),N=x(T),g=x(` OffensiveTechniqueNode;
            class `),b=x(E),I=x(" ArtifactNode; click "),O=x(C),k=x(' href "/dao/artifact/d3f:'),P=x(B),A=x(`";
            click `),j=x(z),se=x(' href "'),G=x(Z),H=x('"; click '),ee=x(Q),$=x(' href "/dao/artifact/d3f:'),ze=x(ae),Ve=x('";')},l(be){t=V(be,e),n=V(be,'["'),s=V(be,r),a=V(be,'"] '),o=V(be,l),u=V(be," |"),d=V(be,f),h=V(be,"| "),p=V(be,c),_=V(be,'["'),D=V(be,v),U=V(be,'"]; class '),N=V(be,T),g=V(be,` OffensiveTechniqueNode;
            class `),b=V(be,E),I=V(be," ArtifactNode; click "),O=V(be,C),k=V(be,' href "/dao/artifact/d3f:'),P=V(be,B),A=V(be,`";
            click `),j=V(be,z),se=V(be,' href "'),G=V(be,Z),H=V(be,'"; click '),ee=V(be,Q),$=V(be,' href "/dao/artifact/d3f:'),ze=V(be,ae),Ve=V(be,'";')},m(be,Ne){R(be,t,Ne),R(be,n,Ne),R(be,s,Ne),R(be,a,Ne),R(be,o,Ne),R(be,u,Ne),R(be,d,Ne),R(be,h,Ne),R(be,p,Ne),R(be,_,Ne),R(be,D,Ne),R(be,U,Ne),R(be,N,Ne),R(be,g,Ne),R(be,b,Ne),R(be,I,Ne),R(be,O,Ne),R(be,k,Ne),R(be,P,Ne),R(be,A,Ne),R(be,j,Ne),R(be,se,Ne),R(be,G,Ne),R(be,H,Ne),R(be,ee,Ne),R(be,$,Ne),R(be,ze,Ne),R(be,Ve,Ne)},p(be,Ne){Ne&2&&e!==(e=be[23].off_tech_id.value.replace(/ |\./g,"")+"")&&we(t,e),Ne&2&&r!==(r=be[23].off_tech_label.value+"")&&we(s,r),Ne&2&&f!==(f=be[23].off_artifact_rel_label.value.replace(/ /g,"")+"")&&we(d,f),Ne&2&&c!==(c=Le(be[23].off_artifact.value)+"")&&we(p,c),Ne&2&&v!==(v=be[23].off_artifact_label.value+"")&&we(D,v),Ne&2&&T!==(T=be[23].off_tech_id.value.replace(/ |\./g,"")+"")&&we(N,T),Ne&2&&E!==(E=Le(be[23].off_artifact.value)+"")&&we(b,E),Ne&2&&C!==(C=Le(be[23].off_artifact.value)+"")&&we(O,C),Ne&2&&B!==(B=Le(be[23].off_artifact.value)+"")&&we(P,B),Ne&2&&z!==(z=be[23].off_tech_id.value.replace(/ |\./g,"")+"")&&we(j,z),Ne&2&&Z!==(Z=Ha(be[23].off_tech_id.value)+"")&&we(G,Z),Ne&2&&Q!==(Q=Le(be[23].off_artifact.value)+"")&&we(ee,Q),Ne&2&&ae!==(ae=Le(be[23].off_artifact.value)+"")&&we(ze,ae)},d(be){be&&(w(t),w(n),w(s),w(a),w(o),w(u),w(d),w(h),w(p),w(_),w(D),w(U),w(N),w(g),w(b),w(I),w(O),w(k),w(P),w(A),w(j),w(se),w(G),w(H),w(ee),w($),w(ze),w(Ve))}}}function pc(i){let e,t=i[8].edge_is_unique(i[23].off_tech_label.value,i[23].off_artifact_rel_label.value,i[23].off_artifact_label.value),n,r="def_tech"in i[23]&&uc(i),s=t&&dc(i);return{c(){r&&r.c(),e=le(),s&&s.c(),n=Ie()},l(a){r&&r.l(a),e=oe(a),s&&s.l(a),n=Ie()},m(a,l){r&&r.m(a,l),R(a,e,l),s&&s.m(a,l),R(a,n,l)},p(a,l){"def_tech"in a[23]?r?r.p(a,l):(r=uc(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),l&2&&(t=a[8].edge_is_unique(a[23].off_tech_label.value,a[23].off_artifact_rel_label.value,a[23].off_artifact_label.value)),t?s?s.p(a,l):(s=dc(a),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},d(a){a&&(w(e),w(n)),r&&r.d(a),s&&s.d(a)}}}function Cw(i){let e,t,n=Ke(i[1].off_to_def.results.bindings),r=[];for(let s=0;s<n.length;s+=1)r[s]=pc(lc(i,n,s));return{c(){e=x(`graph LR;
        `);for(let s=0;s<r.length;s+=1)r[s].c();t=Ie()},l(s){e=V(s,`graph LR;
        `);for(let a=0;a<r.length;a+=1)r[a].l(s);t=Ie()},m(s,a){R(s,e,a);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(s,a);R(s,t,a)},p(s,a){if(a&298){n=Ke(s[1].off_to_def.results.bindings);let l;for(l=0;l<n.length;l+=1){const o=lc(s,n,l);r[l]?r[l].p(o,a):(r[l]=pc(o),r[l].c(),r[l].m(t.parentNode,t))}for(;l<r.length;l+=1)r[l].d(1);r.length=n.length}},d(s){s&&(w(e),w(t)),Tt(r,s)}}}function Tw(i){let e,t,n,r,s,a,l,o,u,f,d,h,c,p=i[5].length+"",_,v,D,U,T;const N=i[12].header,g=Kt(N,i,i[18],oc),E=i[12].default,b=Kt(E,i,i[18],null),I=[Dw,Ew,ww],C=[];function O(k,B){return k[1]?k[1].off_to_def.results.bindings.length>0?1:2:0}return l=O(i),o=C[l]=I[l](i),{c(){e=Y("dialog"),t=Y("div"),g&&g.c(),n=x(`
    Select Related Artifacts To Insert
    `),b&&b.c(),r=le(),s=Y("hr"),a=le(),o.c(),u=le(),f=Y("hr"),d=le(),h=Y("button"),c=x("Insert ("),_=x(p),v=x(")"),this.h()},l(k){e=J(k,"DIALOG",{class:!0});var B=Te(e);t=J(B,"DIV",{class:!0});var P=Te(t);g&&g.l(P),n=V(P,`
    Select Related Artifacts To Insert
    `),b&&b.l(P),r=oe(P),s=J(P,"HR",{}),a=oe(P),o.l(P),u=oe(P),f=J(P,"HR",{}),d=oe(P),h=J(P,"BUTTON",{class:!0});var A=Te(h);c=V(A,"Insert ("),_=V(A,p),v=V(A,")"),A.forEach(w),P.forEach(w),B.forEach(w),this.h()},h(){h.autofocus=!0,te(h,"class","svelte-x0618k"),te(t,"class","svelte-x0618k"),te(e,"class","svelte-x0618k")},m(k,B){R(k,e,B),q(e,t),g&&g.m(t,null),q(t,n),b&&b.m(t,null),q(t,r),q(t,s),q(t,a),C[l].m(t,null),q(t,u),q(t,f),q(t,d),q(t,h),q(h,c),q(h,_),q(h,v),i[15](e),D=!0,h.focus(),U||(T=[ge(h,"click",i[9]),ge(t,"click",rr(i[13])),ge(e,"close",i[16]),ge(e,"click",Bn(i[17]))],U=!0)},p(k,[B]){g&&g.p&&(!D||B&262144)&&Zt(g,N,k,k[18],D?tr(N,k[18],B,yw):er(k[18]),oc),b&&b.p&&(!D||B&262144)&&Zt(b,E,k,k[18],D?tr(E,k[18],B,null):er(k[18]),null);let P=l;l=O(k),l===P?C[l].p(k,B):(ht(),ce(C[P],1,1,()=>{C[P]=null}),dt(),o=C[l],o?o.p(k,B):(o=C[l]=I[l](k),o.c()),ue(o,1),o.m(t,u)),(!D||B&32)&&p!==(p=k[5].length+"")&&we(_,p)},i(k){D||(ue(g,k),ue(b,k),ue(o),D=!0)},o(k){ce(g,k),ce(b,k),ce(o),D=!1},d(k){k&&w(e),g&&g.d(k),b&&b.d(k),C[l].d(),i[15](null),U=!1,gt(T)}}}function Nw(i,e,t){let n,r,s,{$$slots:a={},$$scope:l}=e,{show_defend_modal:o}=e,{parent_node:u}=e,{data:f}=e,d;const h=fn();st(i,h,O=>t(20,s=O));const c=cn();st(i,c,O=>t(19,r=O));let p=new Fn;function _(O){n.includes(O)?t(5,n=n.filter(k=>k!==O)):n.push(O),t(5,n)}window.off_to_def_callback=function(O){_(O)};function v(){let O=0,k=200,B=100;for(const P of n){let A=f.off_to_def.results.bindings.find(z=>"def_tech"in z&&Le(z.def_tech.value)==P);A&&(Hn(h,c,u,"countermeasureSelectorNode",A.def_tech_label.value,"d3f:"+Le(A.def_tech.value),u.data.sequence,u.position.x+O*k,u.position.y+B,182,63,"May "+A.def_tactic_label.value,!1),O+=1)}h.set(s),c.set(r),d&&d.close(),t(5,n=[])}let D=new Set,U=[],T=[];Kh(U,T)&&(T=[]);function N(O){for(const k of n){let B=f.off_to_def.results.bindings.find(P=>"def_tech"in P&&Le(P.def_tech.value)==k);O.includes(B.def_tactic_label.value)&&t(5,n=n.filter(P=>P!==k))}t(5,n)}function g(O){Hr.call(this,i,O)}function E(O){T=O,t(3,T)}function b(O){Jt[O?"unshift":"push"](()=>{d=O,t(2,d)})}const I=()=>t(0,o=!1),C=()=>{d.close(),t(5,n=[])};return i.$$set=O=>{"show_defend_modal"in O&&t(0,o=O.show_defend_modal),"parent_node"in O&&t(10,u=O.parent_node),"data"in O&&t(1,f=O.data),"$$scope"in O&&t(18,l=O.$$scope)},i.$$.update=()=>{i.$$.dirty&5&&o&&d&&(d.showModal(),p.reset()),i.$$.dirty&5&&!o&&d&&(d.close(),p.reset()),i.$$.dirty&2050&&f&&(f.off_to_def.results.bindings.forEach(O=>{"def_tactic_label"in O&&D.add(O.def_tactic_label.value)}),t(11,D),t(1,f)),i.$$.dirty&2048&&t(4,U=Array.from(D).sort(function(O,k){return $a[O]-$a[k]})),i.$$.dirty&8&&N(T),i.$$.dirty&8&&p.reset(T)},t(5,n=[]),[o,f,d,T,U,n,h,c,p,v,u,D,a,g,E,b,I,C,l]}class Sw extends kt{constructor(e){super(),At(this,e,Nw,Tw,lt,{show_defend_modal:0,parent_node:10,data:1})}}function Pw(i){let e,t="artifacts",n,r,s,a,l,o="defensive techniques",u,f,d,h,c,p;function _(T){i[6](T)}let v={parent_node:i[0],data:i[1]};i[3]!==void 0&&(v.show_artifacts_modal=i[3]),r=new bw({props:v}),Jt.push(()=>Cr(r,"show_artifacts_modal",_));function D(T){i[8](T)}let U={parent_node:i[0],data:i[1]};return i[2]!==void 0&&(U.show_defend_modal=i[2]),f=new Sw({props:U}),Jt.push(()=>Cr(f,"show_defend_modal",D)),{c(){e=Y("button"),e.textContent=t,n=le(),Re(r.$$.fragment),a=le(),l=Y("button"),l.textContent=o,u=le(),Re(f.$$.fragment),this.h()},l(T){e=J(T,"BUTTON",{class:!0,"data-svelte-h":!0}),nt(e)!=="svelte-1t14z6m"&&(e.textContent=t),n=oe(T),Fe(r.$$.fragment,T),a=oe(T),l=J(T,"BUTTON",{class:!0,"data-svelte-h":!0}),nt(l)!=="svelte-o3we0s"&&(l.textContent=o),u=oe(T),Fe(f.$$.fragment,T),this.h()},h(){te(e,"class","svelte-1x5dcdh"),te(l,"class","svelte-1x5dcdh")},m(T,N){R(T,e,N),R(T,n,N),Oe(r,T,N),R(T,a,N),R(T,l,N),R(T,u,N),Oe(f,T,N),h=!0,c||(p=[ge(e,"click",i[5]),ge(l,"click",i[7])],c=!0)},p(T,[N]){const g={};N&1&&(g.parent_node=T[0]),N&2&&(g.data=T[1]),!s&&N&8&&(s=!0,g.show_artifacts_modal=T[3],Ar(()=>s=!1)),r.$set(g);const E={};N&1&&(E.parent_node=T[0]),N&2&&(E.data=T[1]),!d&&N&4&&(d=!0,E.show_defend_modal=T[2],Ar(()=>d=!1)),f.$set(E)},i(T){h||(ue(r.$$.fragment,T),ue(f.$$.fragment,T),h=!0)},o(T){ce(r.$$.fragment,T),ce(f.$$.fragment,T),h=!1},d(T){T&&(w(e),w(n),w(a),w(l),w(u)),Be(r,T),Be(f,T),c=!1,gt(p)}}}function Iw(i,e,t){let n,r;var s=this&&this.__awaiter||function(p,_,v,D){function U(T){return T instanceof v?T:new v(function(N){N(T)})}return new(v||(v=Promise))(function(T,N){function g(I){try{b(D.next(I))}catch(C){N(C)}}function E(I){try{b(D.throw(I))}catch(C){N(C)}}function b(I){I.done?T(I.value):U(I.value).then(g,E)}b((D=D.apply(p,_||[])).next())})};let{node:a}=e,l;function o(p){alert(p),t(3,n=!1),t(2,r=!1)}function u(p){return s(this,void 0,void 0,function*(){if(p.data.d3f_class&&p.data.d3f_class.includes("d3f:")){const _=p.data.d3f_class,v=yield fetch(`/api/offensive-technique/attack/${_.replace("d3f:","")}.json`),D=yield v.json();if(v.status!=200||D.description["@graph"].length==0)o(`Offensive Technique: "${_.replace("d3f:","")}" not found in ontology`);else return D}else o("Please specify a D3FEND Class for this node to enable inferential mapping")})}const f=async()=>{t(1,l=null),t(3,n=!0),t(1,l=await u(a))};function d(p){n=p,t(3,n)}const h=async()=>{t(1,l=null),t(2,r=!0),t(1,l=await u(a))};function c(p){r=p,t(2,r)}return i.$$set=p=>{"node"in p&&t(0,a=p.node)},t(3,n=!1),t(2,r=!1),[a,l,r,n,u,f,d,h,c]}class Rw extends kt{constructor(e){super(),At(this,e,Iw,Pw,lt,{node:0})}}function _c(i){let e,t;return e=new Rw({props:{node:i[1]}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r&2&&(s.node=n[1]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function vc(i){let e,t;return e=new uw({props:{node:i[1]}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r&2&&(s.node=n[1]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function mc(i){let e,t;return e=new My({props:{node:i[1]}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r&2&&(s.node=n[1]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function Fw(i){let e,t,n,r,s,a,l,o,u,f,d="duplicate",h,c,p="delete",_,v,D,U,T=i[1]&&i[1].type=="attackSelectorNode"&&_c(i),N=i[1]&&i[1].type=="countermeasureSelectorNode"&&vc(i),g=i[1]&&i[1].type=="artifactSelectorNode"&&mc(i);return{c(){e=Y("div"),t=Y("p"),n=Y("small"),r=x("node: "),s=x(i[0]),a=le(),T&&T.c(),l=le(),N&&N.c(),o=le(),g&&g.c(),u=le(),f=Y("button"),f.textContent=d,h=le(),c=Y("button"),c.textContent=p,this.h()},l(E){e=J(E,"DIV",{style:!0,class:!0});var b=Te(e);t=J(b,"P",{style:!0});var I=Te(t);n=J(I,"SMALL",{});var C=Te(n);r=V(C,"node: "),s=V(C,i[0]),C.forEach(w),I.forEach(w),a=oe(b),T&&T.l(b),l=oe(b),N&&N.l(b),o=oe(b),g&&g.l(b),u=oe(b),f=J(b,"BUTTON",{class:!0,"data-svelte-h":!0}),nt(f)!=="svelte-1spbqw1"&&(f.textContent=d),h=oe(b),c=J(b,"BUTTON",{class:!0,"data-svelte-h":!0}),nt(c)!=="svelte-1pyou7z"&&(c.textContent=p),b.forEach(w),this.h()},h(){bt(t,"margin","0.5em"),te(f,"class","svelte-1o17oqa"),te(c,"class","svelte-1o17oqa"),te(e,"style",_=i[2]()),te(e,"class","context-menu svelte-1o17oqa")},m(E,b){R(E,e,b),q(e,t),q(t,n),q(n,r),q(n,s),q(e,a),T&&T.m(e,null),q(e,l),N&&N.m(e,null),q(e,o),g&&g.m(e,null),q(e,u),q(e,f),q(e,h),q(e,c),v=!0,D||(U=[ge(f,"click",i[5]),ge(c,"click",i[6])],D=!0)},p(E,[b]){(!v||b&1)&&we(s,E[0]),E[1]&&E[1].type=="attackSelectorNode"?T?(T.p(E,b),b&2&&ue(T,1)):(T=_c(E),T.c(),ue(T,1),T.m(e,l)):T&&(ht(),ce(T,1,1,()=>{T=null}),dt()),E[1]&&E[1].type=="countermeasureSelectorNode"?N?(N.p(E,b),b&2&&ue(N,1)):(N=vc(E),N.c(),ue(N,1),N.m(e,o)):N&&(ht(),ce(N,1,1,()=>{N=null}),dt()),E[1]&&E[1].type=="artifactSelectorNode"?g?(g.p(E,b),b&2&&ue(g,1)):(g=mc(E),g.c(),ue(g,1),g.m(e,u)):g&&(ht(),ce(g,1,1,()=>{g=null}),dt()),(!v||b&4&&_!==(_=E[2]()))&&te(e,"style",_)},i(E){v||(ue(T),ue(N),ue(g),v=!0)},o(E){ce(T),ce(N),ce(g),v=!1},d(E){E&&w(e),T&&T.d(),N&&N.d(),g&&g.d(),D=!1,gt(U)}}}function Ow(i,e,t){let n,r,s,a,{id:l}=e,{top:o}=e,{left:u}=e,{right:f}=e,{bottom:d}=e;const h=fn();st(i,h,v=>t(11,a=v));const c=cn();st(i,c,v=>t(12,s=v));function p(){const v=a.find(D=>D.id===l);v&&(console.log(v),a.push(Object.assign(Object.assign({},v),{id:`${l}-copy${Math.random()}`.slice(-24),position:{x:v.position.x,y:v.position.y+50}}))),h.set(a)}function _(){yt(h,a=a.filter(v=>v.id!==l),a),yt(c,s=s.filter(v=>v.source!==l&&v.target!==l),s),h.set(a),c.set(s)}return i.$$set=v=>{"id"in v&&t(0,l=v.id),"top"in v&&t(7,o=v.top),"left"in v&&t(8,u=v.left),"right"in v&&t(9,f=v.right),"bottom"in v&&t(10,d=v.bottom)},i.$$.update=()=>{i.$$.dirty&2049&&t(1,n=a.find(v=>v.id===l)),i.$$.dirty&1920&&t(2,r=()=>{let v="";return o&&(v+=`top:${o}px;`),d&&(v+=`bottom:${d}px;`),u&&(v+=`left:${u}px;`),f&&(v+=`right:${f}px;`),v})},[l,n,r,h,c,p,_,o,u,f,d,a]}class Bw extends kt{constructor(e){super(),At(this,e,Ow,Fw,lt,{id:0,top:7,left:8,right:9,bottom:10})}}function gc(i,e,t){const n=i.slice();return n[12]=e[t],n}function bc(i){let e,t,n,r,s,a,l,o,u,f,d,h,c;const p=i[8].default,_=Kt(p,i,i[7],null);let v=Ke(i[3]),D=[];for(let U=0;U<v.length;U+=1)D[U]=yc(gc(i,v,U));return{c(){e=Y("div"),t=Y("div"),n=Y("h2"),r=x(i[1]),s=le(),a=Y("p"),l=x(i[2]),o=le(),_&&_.c(),u=le(),f=Y("div");for(let U=0;U<D.length;U+=1)D[U].c();this.h()},l(U){e=J(U,"DIV",{class:!0});var T=Te(e);t=J(T,"DIV",{class:!0});var N=Te(t);n=J(N,"H2",{});var g=Te(n);r=V(g,i[1]),g.forEach(w),s=oe(N),a=J(N,"P",{});var E=Te(a);l=V(E,i[2]),E.forEach(w),o=oe(N),_&&_.l(N),u=oe(N),f=J(N,"DIV",{class:!0});var b=Te(f);for(let I=0;I<D.length;I+=1)D[I].l(b);b.forEach(w),N.forEach(w),T.forEach(w),this.h()},h(){te(f,"class","options svelte-zbcx3u"),te(t,"class","modal-content center text-center svelte-zbcx3u"),te(e,"class","modal-overlay svelte-zbcx3u")},m(U,T){R(U,e,T),q(e,t),q(t,n),q(n,r),q(t,s),q(t,a),q(a,l),q(t,o),_&&_.m(t,null),q(t,u),q(t,f);for(let N=0;N<D.length;N+=1)D[N]&&D[N].m(f,null);d=!0,h||(c=[ge(t,"click",rr(i[9])),ge(e,"click",i[4])],h=!0)},p(U,T){if((!d||T&2)&&we(r,U[1]),(!d||T&4)&&we(l,U[2]),_&&_.p&&(!d||T&128)&&Zt(_,p,U,U[7],d?tr(p,U[7],T,null):er(U[7]),null),T&40){v=Ke(U[3]);let N;for(N=0;N<v.length;N+=1){const g=gc(U,v,N);D[N]?D[N].p(g,T):(D[N]=yc(g),D[N].c(),D[N].m(f,null))}for(;N<D.length;N+=1)D[N].d(1);D.length=v.length}},i(U){d||(ue(_,U),d=!0)},o(U){ce(_,U),d=!1},d(U){U&&w(e),_&&_.d(U),Tt(D,U),h=!1,gt(c)}}}function yc(i){let e,t=i[12].label+"",n,r,s,a;function l(){return i[10](i[12])}return{c(){e=Y("button"),n=x(t),r=le(),this.h()},l(o){e=J(o,"BUTTON",{class:!0});var u=Te(e);n=V(u,t),r=oe(u),u.forEach(w),this.h()},h(){te(e,"class","svelte-zbcx3u")},m(o,u){R(o,e,u),q(e,n),q(e,r),s||(a=ge(e,"click",l),s=!0)},p(o,u){i=o,u&8&&t!==(t=i[12].label+"")&&we(n,t)},d(o){o&&w(e),s=!1,a()}}}function Lw(i){let e,t,n=i[0]&&bc(i);return{c(){n&&n.c(),e=Ie()},l(r){n&&n.l(r),e=Ie()},m(r,s){n&&n.m(r,s),R(r,e,s),t=!0},p(r,[s]){r[0]?n?(n.p(r,s),s&1&&ue(n,1)):(n=bc(r),n.c(),ue(n,1),n.m(e.parentNode,e)):n&&(ht(),ce(n,1,1,()=>{n=null}),dt())},i(r){t||(ue(n),t=!0)},o(r){ce(n),t=!1},d(r){r&&w(e),n&&n.d(r)}}}function Uw(i,e,t){let{$$slots:n={},$$scope:r}=e,{is_open:s=!1}=e,{title:a=""}=e,{content:l=""}=e,{imageSrc:o=""}=e,{options:u=[]}=e;const f=kl();function d(){t(0,s=!1)}function h(_){f("optionSelected",_),d()}function c(_){Hr.call(this,i,_)}const p=_=>h(_);return i.$$set=_=>{"is_open"in _&&t(0,s=_.is_open),"title"in _&&t(1,a=_.title),"content"in _&&t(2,l=_.content),"imageSrc"in _&&t(6,o=_.imageSrc),"options"in _&&t(3,u=_.options),"$$scope"in _&&t(7,r=_.$$scope)},[s,a,l,u,d,h,o,r,n,c,p]}class wc extends kt{constructor(e){super(),At(this,e,Uw,Lw,lt,{is_open:0,title:1,content:2,imageSrc:6,options:3})}}function Ec(i,e,t){const n=i.slice();return n[11]=e[t],n}function Dc(i){let e,t,n,r,s,a,l,o,u,f,d,h,c;const p=i[7].default,_=Kt(p,i,i[6],null);let v=Ke(i[3]),D=[];for(let U=0;U<v.length;U+=1)D[U]=kc(Ec(i,v,U));return{c(){e=Y("div"),t=Y("div"),n=Y("h2"),r=x(i[1]),s=le(),a=Y("p"),l=x(i[2]),o=le(),_&&_.c(),u=le(),f=Y("div");for(let U=0;U<D.length;U+=1)D[U].c();this.h()},l(U){e=J(U,"DIV",{class:!0});var T=Te(e);t=J(T,"DIV",{class:!0});var N=Te(t);n=J(N,"H2",{});var g=Te(n);r=V(g,i[1]),g.forEach(w),s=oe(N),a=J(N,"P",{});var E=Te(a);l=V(E,i[2]),E.forEach(w),o=oe(N),_&&_.l(N),u=oe(N),f=J(N,"DIV",{class:!0});var b=Te(f);for(let I=0;I<D.length;I+=1)D[I].l(b);b.forEach(w),N.forEach(w),T.forEach(w),this.h()},h(){te(f,"class","options svelte-2iwk9m"),te(t,"class","modal-content center text-center svelte-2iwk9m"),te(e,"class","modal-overlay svelte-2iwk9m")},m(U,T){R(U,e,T),q(e,t),q(t,n),q(n,r),q(t,s),q(t,a),q(a,l),q(t,o),_&&_.m(t,null),q(t,u),q(t,f);for(let N=0;N<D.length;N+=1)D[N]&&D[N].m(f,null);d=!0,h||(c=[ge(t,"click",rr(i[8])),ge(e,"click",i[4])],h=!0)},p(U,T){if((!d||T&2)&&we(r,U[1]),(!d||T&4)&&we(l,U[2]),_&&_.p&&(!d||T&64)&&Zt(_,p,U,U[6],d?tr(p,U[6],T,null):er(U[6]),null),T&40){v=Ke(U[3]);let N;for(N=0;N<v.length;N+=1){const g=Ec(U,v,N);D[N]?D[N].p(g,T):(D[N]=kc(g),D[N].c(),D[N].m(f,null))}for(;N<D.length;N+=1)D[N].d(1);D.length=v.length}},i(U){d||(ue(_,U),d=!0)},o(U){ce(_,U),d=!1},d(U){U&&w(e),_&&_.d(U),Tt(D,U),h=!1,gt(c)}}}function kc(i){let e,t=i[11].label+"",n,r,s,a;function l(){return i[9](i[11])}return{c(){e=Y("button"),n=x(t),r=le(),this.h()},l(o){e=J(o,"BUTTON",{class:!0});var u=Te(e);n=V(u,t),r=oe(u),u.forEach(w),this.h()},h(){te(e,"class","svelte-2iwk9m")},m(o,u){R(o,e,u),q(e,n),q(e,r),s||(a=ge(e,"click",l),s=!0)},p(o,u){i=o,u&8&&t!==(t=i[11].label+"")&&we(n,t)},d(o){o&&w(e),s=!1,a()}}}function jw(i){let e,t,n=i[0]&&Dc(i);return{c(){n&&n.c(),e=Ie()},l(r){n&&n.l(r),e=Ie()},m(r,s){n&&n.m(r,s),R(r,e,s),t=!0},p(r,[s]){r[0]?n?(n.p(r,s),s&1&&ue(n,1)):(n=Dc(r),n.c(),ue(n,1),n.m(e.parentNode,e)):n&&(ht(),ce(n,1,1,()=>{n=null}),dt())},i(r){t||(ue(n),t=!0)},o(r){ce(n),t=!1},d(r){r&&w(e),n&&n.d(r)}}}function qw(i,e,t){let{$$slots:n={},$$scope:r}=e,{is_open:s=!1}=e,{title:a=""}=e,{content:l=""}=e,{options:o=[{label:"Cancel",value:"cancel"}]}=e;const u=kl();function f(){t(0,s=!1)}function d(p){u("model_shared",p),f()}function h(p){Hr.call(this,i,p)}const c=p=>d(p);return i.$$set=p=>{"is_open"in p&&t(0,s=p.is_open),"title"in p&&t(1,a=p.title),"content"in p&&t(2,l=p.content),"options"in p&&t(3,o=p.options),"$$scope"in p&&t(6,r=p.$$scope)},[s,a,l,o,f,d,r,n,h,c]}class Mw extends kt{constructor(e){super(),At(this,e,qw,jw,lt,{is_open:0,title:1,content:2,options:3})}}function xw(i){let e,t,n=i[1]?"Exit Fullscreen":"Fullscreen",r,s,a,l,o;const u=i[4].default,f=Kt(u,i,i[3],null);return{c(){e=Y("div"),t=Y("button"),r=x(n),s=le(),f&&f.c(),this.h()},l(d){e=J(d,"DIV",{id:!0,class:!0});var h=Te(e);t=J(h,"BUTTON",{class:!0});var c=Te(t);r=V(c,n),c.forEach(w),s=oe(h),f&&f.l(h),h.forEach(w),this.h()},h(){te(t,"class","fullscreen-toggle svelte-1t28a4x"),rn(t,"left",i[0]==="left"),rn(t,"right",i[0]==="right"),te(e,"id","fullscreen-parent"),te(e,"class","svelte-1t28a4x")},m(d,h){R(d,e,h),q(e,t),q(t,r),q(e,s),f&&f.m(e,null),a=!0,l||(o=ge(t,"click",i[2]),l=!0)},p(d,[h]){(!a||h&2)&&n!==(n=d[1]?"Exit Fullscreen":"Fullscreen")&&we(r,n),(!a||h&1)&&rn(t,"left",d[0]==="left"),(!a||h&1)&&rn(t,"right",d[0]==="right"),f&&f.p&&(!a||h&8)&&Zt(f,u,d,d[3],a?tr(u,d[3],h,null):er(d[3]),null)},i(d){a||(ue(f,d),a=!0)},o(d){ce(f,d),a=!1},d(d){d&&w(e),f&&f.d(d),l=!1,o()}}}function Vw(i,e,t){let{$$slots:n={},$$scope:r}=e,{position:s="right"}=e,a=!1,l;is(()=>(l=document.getElementById("fullscreen-parent"),document.addEventListener("fullscreenchange",o),()=>{document.removeEventListener("fullscreenchange",o)}));function o(){t(1,a=!!document.fullscreenElement)}async function u(){if(a)try{await document.exitFullscreen()}catch(f){console.error("Error attempting to exit fullscreen:",f)}else try{await l.requestFullscreen()}catch(f){console.error("Error attempting to enable fullscreen:",f)}}return i.$$set=f=>{"position"in f&&t(0,s=f.position),"$$scope"in f&&t(3,r=f.$$scope)},[s,a,u,r,n]}class zw extends kt{constructor(e){super(),At(this,e,Vw,xw,lt,{position:0})}}function Hw(i){let e,t,n="You can drag these nodes to the pane below.",r,s,a,l,o="Action",u,f,d="Event",h,c,p="Attack",_,v,D="Countermeasure",U,T,N,g="Endurant",E,b,I="Artifact",C,O,k="Information",B,P,A="Agent",z,j,se,Z="State",G,H,Q="Vulnerability",ee,$,ae="Condition",ze,Ve;return{c(){e=Y("aside"),t=Y("div"),t.textContent=n,r=le(),s=Y("div"),a=Y("div"),l=Y("div"),l.textContent=o,u=le(),f=Y("div"),f.textContent=d,h=le(),c=Y("div"),c.textContent=p,_=le(),v=Y("div"),v.textContent=D,U=le(),T=Y("div"),N=Y("div"),N.textContent=g,E=le(),b=Y("div"),b.textContent=I,C=le(),O=Y("div"),O.textContent=k,B=le(),P=Y("div"),P.textContent=A,z=le(),j=Y("div"),se=Y("div"),se.textContent=Z,G=le(),H=Y("div"),H.textContent=Q,ee=le(),$=Y("div"),$.textContent=ae,this.h()},l(be){e=J(be,"ASIDE",{class:!0});var Ne=Te(e);t=J(Ne,"DIV",{class:!0,"data-svelte-h":!0}),nt(t)!=="svelte-1go4e39"&&(t.textContent=n),r=oe(Ne),s=J(Ne,"DIV",{class:!0});var _e=Te(s);a=J(_e,"DIV",{class:!0});var Se=Te(a);l=J(Se,"DIV",{class:!0,"data-svelte-h":!0}),nt(l)!=="svelte-1yk6dej"&&(l.textContent=o),u=oe(Se),f=J(Se,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),nt(f)!=="svelte-1hxo6k5"&&(f.textContent=d),h=oe(Se),c=J(Se,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),nt(c)!=="svelte-1m30nhf"&&(c.textContent=p),_=oe(Se),v=J(Se,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),nt(v)!=="svelte-xvztkt"&&(v.textContent=D),Se.forEach(w),U=oe(_e),T=J(_e,"DIV",{class:!0});var et=Te(T);N=J(et,"DIV",{class:!0,"data-svelte-h":!0}),nt(N)!=="svelte-13fxc4g"&&(N.textContent=g),E=oe(et),b=J(et,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),nt(b)!=="svelte-p6iki9"&&(b.textContent=I),C=oe(et),O=J(et,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),nt(O)!=="svelte-gfucir"&&(O.textContent=k),B=oe(et),P=J(et,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),nt(P)!=="svelte-1k1k96h"&&(P.textContent=A),et.forEach(w),z=oe(_e),j=J(_e,"DIV",{class:!0});var vt=Te(j);se=J(vt,"DIV",{class:!0,"data-svelte-h":!0}),nt(se)!=="svelte-82roym"&&(se.textContent=Z),G=oe(vt),H=J(vt,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),nt(H)!=="svelte-tj9qj"&&(H.textContent=Q),ee=oe(vt),$=J(vt,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),nt($)!=="svelte-1mwlumu"&&($.textContent=ae),vt.forEach(w),_e.forEach(w),Ne.forEach(w),this.h()},h(){te(t,"class","label svelte-1vosa9g"),te(l,"class","text-center font-medium"),te(f,"class","actionNode example-node svelte-1vosa9g"),te(f,"draggable",!0),bt(f,"text-align","center"),bt(f,"background","white"),te(f,"title","d3f:Event"),te(c,"class","attackSelectorNode example-node svelte-1vosa9g"),te(c,"draggable",!0),bt(c,"text-align","center"),bt(c,"background","#FFD0D0"),te(c,"title","d3f:OffensiveTechnique"),te(v,"class","countermeasureSelectorNode example-node svelte-1vosa9g"),te(v,"draggable",!0),bt(v,"text-align","center"),bt(v,"background","#d6eaff"),te(v,"title","d3f:DefensiveTechnique"),te(a,"class","nodes-column svelte-1vosa9g"),te(N,"class","text-center font-medium"),te(b,"class","artifactSelectorNode art-node example-node svelte-1vosa9g"),te(b,"draggable",!0),bt(b,"text-align","center"),bt(b,"background","#fff4dd"),te(O,"class","informationSelectorNode example-node svelte-1vosa9g"),te(O,"draggable",!0),bt(O,"text-align","center"),bt(O,"background","#e8f4ea"),te(P,"class","agentSelectorNode example-node svelte-1vosa9g"),te(P,"draggable",!0),bt(P,"text-align","center"),bt(P,"background","#f0e6e6"),te(T,"class","nodes-column svelte-1vosa9g"),te(se,"class","text-center font-medium"),te(H,"class","vulnerabilitySelectorNode example-node svelte-1vosa9g"),te(H,"draggable",!0),bt(H,"text-align","center"),bt(H,"background","#f9d999"),te($,"class","conditionDefinitionNode example-node svelte-1vosa9g"),te($,"draggable",!0),bt($,"text-align","center"),bt($,"background","#ece6ff"),te(j,"class","nodes-column svelte-1vosa9g"),te(s,"class","nodes-container svelte-1vosa9g"),te(e,"class","svelte-1vosa9g")},m(be,Ne){R(be,e,Ne),q(e,t),q(e,r),q(e,s),q(s,a),q(a,l),q(a,u),q(a,f),q(a,h),q(a,c),q(a,_),q(a,v),q(s,U),q(s,T),q(T,N),q(T,E),q(T,b),q(T,C),q(T,O),q(T,B),q(T,P),q(s,z),q(s,j),q(j,se),q(j,G),q(j,H),q(j,ee),q(j,$),ze||(Ve=[ge(f,"dragstart",i[1]),ge(c,"dragstart",i[2]),ge(v,"dragstart",i[3]),ge(b,"dragstart",i[4]),ge(O,"dragstart",i[5]),ge(P,"dragstart",i[6]),ge(H,"dragstart",i[7]),ge($,"dragstart",i[8])],ze=!0)},p:xe,i:xe,o:xe,d(be){be&&w(e),ze=!1,gt(Ve)}}}function $w(i){const e=(f,d)=>{if(!f.dataTransfer)return null;f.dataTransfer.setData("application/svelteflow",d),f.dataTransfer.effectAllowed="move"};return[e,f=>e(f,"eventNode"),f=>e(f,"attackSelectorNode"),f=>e(f,"countermeasureSelectorNode"),f=>e(f,"artifactSelectorNode"),f=>e(f,"informationSelectorNode"),f=>e(f,"agentSelectorNode"),f=>e(f,"vulnerabilitySelectorNode"),f=>e(f,"conditionDefinitionNode")]}class Xw extends kt{constructor(e){super(),At(this,e,$w,Hw,lt,{})}}function Ac(i,e,t){const n=i.slice();return n[16]=e[t],n[20]=e,n[18]=t,n}function Cc(i,e,t){const n=i.slice();return n[16]=e[t],n[19]=e,n[18]=t,n}function Tc(i,e,t){const n=i.slice();return n[16]=e[t],n[17]=e,n[18]=t,n}function Nc(i){let e,t,n=i[0].id+"",r,s,a;function l(f,d){return f[0].type=="attackSelectorNode"?Ww:f[0].type=="vulnerabilitySelectorNode"?Qw:Gw}let o=l(i),u=o(i);return{c(){e=Y("p"),t=x("id: "),r=x(n),s=le(),u.c(),a=Ie(),this.h()},l(f){e=J(f,"P",{class:!0});var d=Te(e);t=V(d,"id: "),r=V(d,n),d.forEach(w),s=oe(f),u.l(f),a=Ie(),this.h()},h(){te(e,"class","text-center")},m(f,d){R(f,e,d),q(e,t),q(e,r),R(f,s,d),u.m(f,d),R(f,a,d)},p(f,d){d&1&&n!==(n=f[0].id+"")&&we(r,n),o===(o=l(f))&&u?u.p(f,d):(u.d(1),u=o(f),u&&(u.c(),u.m(a.parentNode,a)))},d(f){f&&(w(e),w(s),w(a)),u.d(f)}}}function Gw(i){let e,t,n,r,s,a,l,o,u,f,d,h,c,p,_,v,D,U="+",T,N,g=Ke(i[0].data.user_properties),E=[];for(let b=0;b<g.length;b+=1)E[b]=Sc(Ac(i,g,b));return{c(){e=Y("p"),t=x("sequence: "),n=Y("br"),r=Y("input"),s=le(),a=Y("br"),l=le(),o=Y("br"),u=x(`
                label:`),f=Y("br"),d=Y("input"),h=Y("br"),c=le(),p=Y("br"),_=le();for(let b=0;b<E.length;b+=1)E[b].c();v=le(),D=Y("button"),D.textContent=U,this.h()},l(b){e=J(b,"P",{class:!0});var I=Te(e);t=V(I,"sequence: "),n=J(I,"BR",{}),r=J(I,"INPUT",{placeholder:!0,type:!0,name:!0}),s=oe(I),a=J(I,"BR",{}),l=oe(I),o=J(I,"BR",{}),u=V(I,`
                label:`),f=J(I,"BR",{}),d=J(I,"INPUT",{type:!0,name:!0}),h=J(I,"BR",{}),c=oe(I),p=J(I,"BR",{}),_=oe(I);for(let C=0;C<E.length;C+=1)E[C].l(I);v=oe(I),D=J(I,"BUTTON",{"data-svelte-h":!0}),nt(D)!=="svelte-y9choq"&&(D.textContent=U),I.forEach(w),this.h()},h(){te(r,"placeholder","property"),te(r,"type","text"),te(r,"name","editableInput"),te(d,"type","text"),te(d,"name","editableInput"),te(e,"class","text-center")},m(b,I){R(b,e,I),q(e,t),q(e,n),q(e,r),$e(r,i[0].data.sequence),q(e,s),q(e,a),q(e,l),q(e,o),q(e,u),q(e,f),q(e,d),$e(d,i[0].data.label),q(e,h),q(e,c),q(e,p),q(e,_);for(let C=0;C<E.length;C+=1)E[C]&&E[C].m(e,null);q(e,v),q(e,D),T||(N=[ge(r,"input",i[12]),ge(d,"input",i[13]),ge(D,"click",i[1])],T=!0)},p(b,I){if(I&1&&r.value!==b[0].data.sequence&&$e(r,b[0].data.sequence),I&1&&d.value!==b[0].data.label&&$e(d,b[0].data.label),I&1){g=Ke(b[0].data.user_properties);let C;for(C=0;C<g.length;C+=1){const O=Ac(b,g,C);E[C]?E[C].p(O,I):(E[C]=Sc(O),E[C].c(),E[C].m(e,v))}for(;C<E.length;C+=1)E[C].d(1);E.length=g.length}},d(b){b&&w(e),Tt(E,b),T=!1,gt(N)}}}function Qw(i){let e,t,n,r,s,a,l,o,u,f,d,h,c,p,_,v,D,U,T="+",N,g,E=Ke(i[0].data.user_properties),b=[];for(let I=0;I<E.length;I+=1)b[I]=Pc(Cc(i,E,I));return{c(){e=Y("p"),t=x("weakness: "),n=Y("br"),r=Y("input"),s=Y("br"),a=le(),l=Y("br"),o=le(),u=Y("br"),f=x(`
                label:`),d=Y("br"),h=Y("input"),c=Y("br"),p=le(),_=Y("br"),v=le();for(let I=0;I<b.length;I+=1)b[I].c();D=le(),U=Y("button"),U.textContent=T,this.h()},l(I){e=J(I,"P",{class:!0});var C=Te(e);t=V(C,"weakness: "),n=J(C,"BR",{}),r=J(C,"INPUT",{placeholder:!0,type:!0,name:!0}),s=J(C,"BR",{}),a=oe(C),l=J(C,"BR",{}),o=oe(C),u=J(C,"BR",{}),f=V(C,`
                label:`),d=J(C,"BR",{}),h=J(C,"INPUT",{type:!0,name:!0}),c=J(C,"BR",{}),p=oe(C),_=J(C,"BR",{}),v=oe(C);for(let O=0;O<b.length;O+=1)b[O].l(C);D=oe(C),U=J(C,"BUTTON",{"data-svelte-h":!0}),nt(U)!=="svelte-y9choq"&&(U.textContent=T),C.forEach(w),this.h()},h(){te(r,"placeholder","weakness"),te(r,"type","text"),te(r,"name","editableInput"),te(h,"type","text"),te(h,"name","editableInput"),te(e,"class","text-center")},m(I,C){R(I,e,C),q(e,t),q(e,n),q(e,r),$e(r,i[0].data.weakness),q(e,s),q(e,a),q(e,l),q(e,o),q(e,u),q(e,f),q(e,d),q(e,h),$e(h,i[0].data.label),q(e,c),q(e,p),q(e,_),q(e,v);for(let O=0;O<b.length;O+=1)b[O]&&b[O].m(e,null);q(e,D),q(e,U),N||(g=[ge(r,"input",i[8]),ge(h,"input",i[9]),ge(U,"click",i[1])],N=!0)},p(I,C){if(C&1&&r.value!==I[0].data.weakness&&$e(r,I[0].data.weakness),C&1&&h.value!==I[0].data.label&&$e(h,I[0].data.label),C&1){E=Ke(I[0].data.user_properties);let O;for(O=0;O<E.length;O+=1){const k=Cc(I,E,O);b[O]?b[O].p(k,C):(b[O]=Pc(k),b[O].c(),b[O].m(e,D))}for(;O<b.length;O+=1)b[O].d(1);b.length=E.length}},d(I){I&&w(e),Tt(b,I),N=!1,gt(g)}}}function Ww(i){let e,t,n,r,s,a,l,o,u,f,d,h,c,p,_,v,D,U="+",T,N,g=Ke(i[0].data.user_properties),E=[];for(let b=0;b<g.length;b+=1)E[b]=Ic(Tc(i,g,b));return{c(){e=Y("p"),t=x("sequence: "),n=Y("br"),r=Y("input"),s=le(),a=Y("br"),l=le(),o=Y("br"),u=x(`
                label:`),f=Y("br"),d=Y("input"),h=Y("br"),c=le(),p=Y("br"),_=le();for(let b=0;b<E.length;b+=1)E[b].c();v=le(),D=Y("button"),D.textContent=U,this.h()},l(b){e=J(b,"P",{class:!0});var I=Te(e);t=V(I,"sequence: "),n=J(I,"BR",{}),r=J(I,"INPUT",{placeholder:!0,type:!0,name:!0}),s=oe(I),a=J(I,"BR",{}),l=oe(I),o=J(I,"BR",{}),u=V(I,`
                label:`),f=J(I,"BR",{}),d=J(I,"INPUT",{type:!0,name:!0}),h=J(I,"BR",{}),c=oe(I),p=J(I,"BR",{}),_=oe(I);for(let C=0;C<E.length;C+=1)E[C].l(I);v=oe(I),D=J(I,"BUTTON",{"data-svelte-h":!0}),nt(D)!=="svelte-y9choq"&&(D.textContent=U),I.forEach(w),this.h()},h(){te(r,"placeholder","property"),te(r,"type","text"),te(r,"name","editableInput"),te(d,"type","text"),te(d,"name","editableInput"),te(e,"class","text-center")},m(b,I){R(b,e,I),q(e,t),q(e,n),q(e,r),$e(r,i[0].data.sequence),q(e,s),q(e,a),q(e,l),q(e,o),q(e,u),q(e,f),q(e,d),$e(d,i[0].data.label),q(e,h),q(e,c),q(e,p),q(e,_);for(let C=0;C<E.length;C+=1)E[C]&&E[C].m(e,null);q(e,v),q(e,D),T||(N=[ge(r,"input",i[4]),ge(d,"input",i[5]),ge(D,"click",i[1])],T=!0)},p(b,I){if(I&1&&r.value!==b[0].data.sequence&&$e(r,b[0].data.sequence),I&1&&d.value!==b[0].data.label&&$e(d,b[0].data.label),I&1){g=Ke(b[0].data.user_properties);let C;for(C=0;C<g.length;C+=1){const O=Tc(b,g,C);E[C]?E[C].p(O,I):(E[C]=Ic(O),E[C].c(),E[C].m(e,v))}for(;C<E.length;C+=1)E[C].d(1);E.length=g.length}},d(b){b&&w(e),Tt(E,b),T=!1,gt(N)}}}function Sc(i){let e,t,n,r,s,a,l,o,u;function f(){i[14].call(e,i[18])}function d(){i[15].call(r,i[18])}return{c(){e=Y("input"),t=le(),n=Y("br"),r=Y("input"),s=le(),a=Y("br"),l=Y("br"),this.h()},l(h){e=J(h,"INPUT",{placeholder:!0,type:!0,name:!0}),t=oe(h),n=J(h,"BR",{}),r=J(h,"INPUT",{placeholder:!0,type:!0,name:!0}),s=oe(h),a=J(h,"BR",{}),l=J(h,"BR",{}),this.h()},h(){te(e,"placeholder","property"),te(e,"type","text"),te(e,"name","editableInput"),te(r,"placeholder","value"),te(r,"type","text"),te(r,"name","editableInput")},m(h,c){R(h,e,c),$e(e,i[0].data.user_properties[i[18]][0]),R(h,t,c),R(h,n,c),R(h,r,c),$e(r,i[0].data.user_properties[i[18]][1]),R(h,s,c),R(h,a,c),R(h,l,c),o||(u=[ge(e,"input",f),ge(r,"input",d)],o=!0)},p(h,c){i=h,c&1&&e.value!==i[0].data.user_properties[i[18]][0]&&$e(e,i[0].data.user_properties[i[18]][0]),c&1&&r.value!==i[0].data.user_properties[i[18]][1]&&$e(r,i[0].data.user_properties[i[18]][1])},d(h){h&&(w(e),w(t),w(n),w(r),w(s),w(a),w(l)),o=!1,gt(u)}}}function Pc(i){let e,t,n,r,s,a,l,o,u;function f(){i[10].call(e,i[18])}function d(){i[11].call(r,i[18])}return{c(){e=Y("input"),t=le(),n=Y("br"),r=Y("input"),s=le(),a=Y("br"),l=Y("br"),this.h()},l(h){e=J(h,"INPUT",{placeholder:!0,type:!0,name:!0}),t=oe(h),n=J(h,"BR",{}),r=J(h,"INPUT",{placeholder:!0,type:!0,name:!0}),s=oe(h),a=J(h,"BR",{}),l=J(h,"BR",{}),this.h()},h(){te(e,"placeholder","property"),te(e,"type","text"),te(e,"name","editableInput"),te(r,"placeholder","value"),te(r,"type","text"),te(r,"name","editableInput")},m(h,c){R(h,e,c),$e(e,i[0].data.user_properties[i[18]][0]),R(h,t,c),R(h,n,c),R(h,r,c),$e(r,i[0].data.user_properties[i[18]][1]),R(h,s,c),R(h,a,c),R(h,l,c),o||(u=[ge(e,"input",f),ge(r,"input",d)],o=!0)},p(h,c){i=h,c&1&&e.value!==i[0].data.user_properties[i[18]][0]&&$e(e,i[0].data.user_properties[i[18]][0]),c&1&&r.value!==i[0].data.user_properties[i[18]][1]&&$e(r,i[0].data.user_properties[i[18]][1])},d(h){h&&(w(e),w(t),w(n),w(r),w(s),w(a),w(l)),o=!1,gt(u)}}}function Ic(i){let e,t,n,r,s,a,l,o,u;function f(){i[6].call(e,i[18])}function d(){i[7].call(r,i[18])}return{c(){e=Y("input"),t=le(),n=Y("br"),r=Y("input"),s=le(),a=Y("br"),l=Y("br"),this.h()},l(h){e=J(h,"INPUT",{placeholder:!0,type:!0,name:!0}),t=oe(h),n=J(h,"BR",{}),r=J(h,"INPUT",{placeholder:!0,type:!0,name:!0}),s=oe(h),a=J(h,"BR",{}),l=J(h,"BR",{}),this.h()},h(){te(e,"placeholder","property"),te(e,"type","text"),te(e,"name","editableInput"),te(r,"placeholder","value"),te(r,"type","text"),te(r,"name","editableInput")},m(h,c){R(h,e,c),$e(e,i[0].data.user_properties[i[18]][0]),R(h,t,c),R(h,n,c),R(h,r,c),$e(r,i[0].data.user_properties[i[18]][1]),R(h,s,c),R(h,a,c),R(h,l,c),o||(u=[ge(e,"input",f),ge(r,"input",d)],o=!0)},p(h,c){i=h,c&1&&e.value!==i[0].data.user_properties[i[18]][0]&&$e(e,i[0].data.user_properties[i[18]][0]),c&1&&r.value!==i[0].data.user_properties[i[18]][1]&&$e(r,i[0].data.user_properties[i[18]][1])},d(h){h&&(w(e),w(t),w(n),w(r),w(s),w(a),w(l)),o=!1,gt(u)}}}function Yw(i){let e,t,n='<code class="">node properties</code>',r,s,a,l=i[0]&&Nc(i);const o=i[3].default,u=Kt(o,i,i[2],null);return{c(){e=Y("div"),t=Y("div"),t.innerHTML=n,r=le(),l&&l.c(),s=le(),u&&u.c(),this.h()},l(f){e=J(f,"DIV",{class:!0});var d=Te(e);t=J(d,"DIV",{class:!0,"data-svelte-h":!0}),nt(t)!=="svelte-txsgvp"&&(t.innerHTML=n),r=oe(d),l&&l.l(d),s=oe(d),u&&u.l(d),d.forEach(w),this.h()},h(){te(t,"class","text-center"),te(e,"class","side-panel svelte-17hpejv")},m(f,d){R(f,e,d),q(e,t),q(e,r),l&&l.m(e,null),q(e,s),u&&u.m(e,null),a=!0},p(f,[d]){f[0]?l?l.p(f,d):(l=Nc(f),l.c(),l.m(e,s)):l&&(l.d(1),l=null),u&&u.p&&(!a||d&4)&&Zt(u,o,f,f[2],a?tr(o,f[2],d,null):er(f[2]),null)},i(f){a||(ue(u,f),a=!0)},o(f){ce(u,f),a=!1},d(f){f&&w(e),l&&l.d(),u&&u.d(f)}}}function Jw(i,e,t){let n;st(i,at,T=>t(0,n=T));let{$$slots:r={},$$scope:s}=e;function a(){n.data.user_properties.push(["",""]),at.set(n)}function l(){n.data.sequence=this.value,at.set(n)}function o(){n.data.label=this.value,at.set(n)}function u(T){n.data.user_properties[T][0]=this.value,at.set(n)}function f(T){n.data.user_properties[T][1]=this.value,at.set(n)}function d(){n.data.weakness=this.value,at.set(n)}function h(){n.data.label=this.value,at.set(n)}function c(T){n.data.user_properties[T][0]=this.value,at.set(n)}function p(T){n.data.user_properties[T][1]=this.value,at.set(n)}function _(){n.data.sequence=this.value,at.set(n)}function v(){n.data.label=this.value,at.set(n)}function D(T){n.data.user_properties[T][0]=this.value,at.set(n)}function U(T){n.data.user_properties[T][1]=this.value,at.set(n)}return i.$$set=T=>{"$$scope"in T&&t(2,s=T.$$scope)},[n,a,s,r,l,o,u,f,d,h,c,p,_,v,D,U]}class Kw extends kt{constructor(e){super(),At(this,e,Jw,Yw,lt,{})}}function Rc(i,e,t){const n=i.slice();return n[9]=e[t],n}function Fc(i){let e,t=i[9]["rdfs:label"]+"",n,r,s,a,l;function o(...f){return i[7](i[9],...f)}function u(...f){return i[8](i[9],...f)}return{c(){e=Y("div"),n=x(t),r=le(),this.h()},l(f){e=J(f,"DIV",{class:!0,title:!0,tabindex:!0,role:!0});var d=Te(e);n=V(d,t),r=oe(d),d.forEach(w),this.h()},h(){te(e,"class","select-technique"),te(e,"title",s=i[9]["d3f:definition"]),te(e,"tabindex","0"),te(e,"role","button")},m(f,d){R(f,e,d),q(e,n),q(e,r),a||(l=[ge(e,"click",rr(ii(o))),ge(e,"keydown",rr(u))],a=!0)},p(f,d){i=f,d&8&&t!==(t=i[9]["rdfs:label"]+"")&&we(n,t),d&8&&s!==(s=i[9]["d3f:definition"])&&te(e,"title",s)},d(f){f&&w(e),a=!1,gt(l)}}}function Zw(i){let e,t=Ke(i[3]),n=[];for(let r=0;r<t.length;r+=1)n[r]=Fc(Rc(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);R(r,e,s)},p(r,[s]){if(s&12){t=Ke(r[3]);let a;for(a=0;a<t.length;a+=1){const l=Rc(r,t,a);n[a]?n[a].p(l,s):(n[a]=Fc(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},i:xe,o:xe,d(r){r&&w(e),Tt(n,r)}}}function e3(i,e,t){let n,r=xe,s=()=>(r(),r=un(f,v=>t(5,n=v)),f),a,l=xe,o=()=>(l(),l=un(u,v=>t(6,a=v)),u);i.$$.on_destroy.push(()=>r()),i.$$.on_destroy.push(()=>l());let{list:u}=e;o();let{filter_value_store:f}=e;s();let{select_item:d}=e,{regex_search_keys:h=["rdfs:label","@id"]}=e,c=[];const p=(v,D)=>d(D,v),_=(v,D)=>ki(D,d,v);return i.$$set=v=>{"list"in v&&o(t(0,u=v.list)),"filter_value_store"in v&&s(t(1,f=v.filter_value_store)),"select_item"in v&&t(2,d=v.select_item),"regex_search_keys"in v&&t(4,h=v.regex_search_keys)},i.$$.update=()=>{i.$$.dirty&112&&t(3,c=dv(a,n,h))},[u,f,d,c,h,n,a,p,_]}class t3 extends kt{constructor(e){super(),At(this,e,e3,Zw,lt,{list:0,filter_value_store:1,select_item:2,regex_search_keys:4})}}function Oc(i,e,t){const n=i.slice();return n[12]=e[t],n}function Bc(i,e,t){const n=i.slice();return n[15]=e[t],n}function Lc(i){let e,t=Ke(i[12].children),n=[];for(let r=0;r<t.length;r+=1)n[r]=Uc(Bc(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);R(r,e,s)},p(r,s){if(s&20){t=Ke(r[12].children);let a;for(a=0;a<t.length;a+=1){const l=Bc(r,t,a);n[a]?n[a].p(l,s):(n[a]=Uc(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&w(e),Tt(n,r)}}}function Uc(i){let e,t=i[15]["rdfs:label"]+"",n,r,s,a,l;function o(...f){return i[10](i[15],...f)}function u(...f){return i[11](i[15],...f)}return{c(){e=Y("div"),n=x(t),r=le(),this.h()},l(f){e=J(f,"DIV",{class:!0,title:!0,tabindex:!0,role:!0});var d=Te(e);n=V(d,t),r=oe(d),d.forEach(w),this.h()},h(){te(e,"class","select-technique"),te(e,"title",s=i[15]["d3f:definition"]),te(e,"tabindex","0"),te(e,"role","button")},m(f,d){R(f,e,d),q(e,n),q(e,r),a||(l=[ge(e,"click",rr(ii(o))),ge(e,"keydown",rr(u))],a=!0)},p(f,d){i=f,d&16&&t!==(t=i[15]["rdfs:label"]+"")&&we(n,t),d&16&&s!==(s=i[15]["d3f:definition"])&&te(e,"title",s)},d(f){f&&w(e),a=!1,gt(l)}}}function jc(i){let e,t,n=i[12]["rdfs:label"]+"",r,s,a,l,o,u,f,d=(i[3]===i[12]["@id"]||i[5])&&Lc(i);return{c(){e=Y("details"),t=Y("summary"),r=x(n),a=le(),d&&d.c(),l=le(),this.h()},l(h){e=J(h,"DETAILS",{});var c=Te(e);t=J(c,"SUMMARY",{id:!0});var p=Te(t);r=V(p,n),p.forEach(w),a=oe(c),d&&d.l(c),l=oe(c),c.forEach(w),this.h()},h(){te(t,"id",s=i[12]["@id"]),e.open=o=i[3]===i[12]["@id"]||i[5]},m(h,c){R(h,e,c),q(e,t),q(t,r),q(e,a),d&&d.m(e,null),q(e,l),u||(f=ge(t,"click",rr(ii(i[6]))),u=!0)},p(h,c){c&16&&n!==(n=h[12]["rdfs:label"]+"")&&we(r,n),c&16&&s!==(s=h[12]["@id"])&&te(t,"id",s),h[3]===h[12]["@id"]||h[5]?d?d.p(h,c):(d=Lc(h),d.c(),d.m(e,l)):d&&(d.d(1),d=null),c&56&&o!==(o=h[3]===h[12]["@id"]||h[5])&&(e.open=o)},d(h){h&&w(e),d&&d.d(),u=!1,f()}}}function r3(i){let e,t=Ke(i[4]),n=[];for(let r=0;r<t.length;r+=1)n[r]=jc(Oc(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);R(r,e,s)},p(r,[s]){if(s&124){t=Ke(r[4]);let a;for(a=0;a<t.length;a+=1){const l=Oc(r,t,a);n[a]?n[a].p(l,s):(n[a]=jc(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},i:xe,o:xe,d(r){r&&w(e),Tt(n,r)}}}function n3(i,e,t){let n,r,s=xe,a=()=>(s(),s=un(d,T=>t(8,r=T)),d),l,o=xe,u=()=>(o(),o=un(f,T=>t(9,l=T)),f);i.$$.on_destroy.push(()=>s()),i.$$.on_destroy.push(()=>o());let{list:f}=e;u();let{filter_value_store:d}=e;a();let{select_item:h}=e,{regex_search_keys:c=["d3f:definition","rdfs:label","@id","d3f:d3fend-id"]}=e,p=null,_=[];function v(T){const{id:N}=T.target;p===N?t(3,p=null):t(3,p=N)}const D=(T,N)=>h(N,T),U=(T,N)=>ki(N,h,T);return i.$$set=T=>{"list"in T&&u(t(0,f=T.list)),"filter_value_store"in T&&a(t(1,d=T.filter_value_store)),"select_item"in T&&t(2,h=T.select_item),"regex_search_keys"in T&&t(7,c=T.regex_search_keys)},i.$$.update=()=>{i.$$.dirty&896&&t(4,_=pv(l,r,c)),i.$$.dirty&256&&t(5,n=!!r)},[f,d,h,p,_,n,v,c,r,l,D,U]}class i3 extends kt{constructor(e){super(),At(this,e,n3,r3,lt,{list:0,filter_value_store:1,select_item:2,regex_search_keys:7})}}function qc(i,e,t){const n=i.slice();return n[16]=e[t],n}function a3(i){let e,t,n,r;return{c(){e=Y("div"),t=x(i[6]),this.h()},l(s){e=J(s,"DIV",{id:!0,class:!0,role:!0,tabindex:!0});var a=Te(e);t=V(a,i[6]),a.forEach(w),this.h()},h(){var s;te(e,"id","selectable-technique"),te(e,"class","no-arrow svelte-1t0ebq3"),te(e,"role","tree"),te(e,"tabindex","0"),rn(e,"current-selected",((s=i[8])==null?void 0:s["@id"])===i[0]["@id"])},m(s,a){R(s,e,a),q(e,t),n||(r=[ge(e,"click",rr(ii(i[13]))),ge(e,"keydown",rr(ii(i[14])))],n=!0)},p(s,a){var l;a&64&&we(t,s[6]),a&257&&rn(e,"current-selected",((l=s[8])==null?void 0:l["@id"])===s[0]["@id"])},i:xe,o:xe,d(s){s&&w(e),n=!1,gt(r)}}}function s3(i){let e,t,n="▶",r,s,a,l,o,u,f,d,h=i[4]&&Mc(i);return{c(){e=Y("span"),t=Y("span"),t.textContent=n,r=le(),s=Y("span"),a=x(i[6]),l=le(),h&&h.c(),o=Ie(),this.h()},l(c){e=J(c,"SPAN",{class:!0,role:!0,tabindex:!0});var p=Te(e);t=J(p,"SPAN",{class:!0,"data-svelte-h":!0}),nt(t)!=="svelte-1xn7s3"&&(t.textContent=n),r=oe(p),s=J(p,"SPAN",{id:!0,class:!0});var _=Te(s);a=V(_,i[6]),_.forEach(w),p.forEach(w),l=oe(c),h&&h.l(c),o=Ie(),this.h()},h(){var c;te(t,"class","arrow svelte-1t0ebq3"),rn(t,"arrowDown",i[5]),te(s,"id","parent-selectable-technique"),te(s,"class","label svelte-1t0ebq3"),te(e,"class","parent-technique svelte-1t0ebq3"),te(e,"role","tree"),te(e,"tabindex","0"),rn(e,"current-selected",((c=i[8])==null?void 0:c["@id"])===i[0]["@id"])},m(c,p){R(c,e,p),q(e,t),q(e,r),q(e,s),q(s,a),R(c,l,p),h&&h.m(c,p),R(c,o,p),u=!0,f||(d=[ge(e,"click",rr(ii(i[11]))),ge(e,"keydown",rr(ii(i[12])))],f=!0)},p(c,p){var _;(!u||p&32)&&rn(t,"arrowDown",c[5]),(!u||p&64)&&we(a,c[6]),(!u||p&257)&&rn(e,"current-selected",((_=c[8])==null?void 0:_["@id"])===c[0]["@id"]),c[4]?h?(h.p(c,p),p&16&&ue(h,1)):(h=Mc(c),h.c(),ue(h,1),h.m(o.parentNode,o)):h&&(ht(),ce(h,1,1,()=>{h=null}),dt())},i(c){u||(ue(h),u=!0)},o(c){ce(h),u=!1},d(c){c&&(w(e),w(l),w(o)),h&&h.d(c),f=!1,gt(d)}}}function Mc(i){let e,t,n=Ke(i[7]),r=[];for(let a=0;a<n.length;a+=1)r[a]=xc(qc(i,n,a));const s=a=>ce(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Ie()},l(a){for(let l=0;l<r.length;l+=1)r[l].l(a);e=Ie()},m(a,l){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(a,l);R(a,e,l),t=!0},p(a,l){if(l&134){n=Ke(a[7]);let o;for(o=0;o<n.length;o+=1){const u=qc(a,n,o);r[o]?(r[o].p(u,l),ue(r[o],1)):(r[o]=xc(u),r[o].c(),ue(r[o],1),r[o].m(e.parentNode,e))}for(ht(),o=n.length;o<r.length;o+=1)s(o);dt()}},i(a){if(!t){for(let l=0;l<n.length;l+=1)ue(r[l]);t=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)ce(r[l]);t=!1},d(a){a&&w(e),Tt(r,a)}}}function xc(i){let e,t;return e=new u_({props:{tree:i[16],expanded_nodes:i[1],selected_node:i[2],first_node:!1}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r&128&&(s.tree=n[16]),r&2&&(s.expanded_nodes=n[1]),r&4&&(s.selected_node=n[2]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function l3(i){let e,t,n,r,s;const a=[s3,a3],l=[];function o(u,f){return u[7]?0:1}return n=o(i),r=l[n]=a[n](i),{c(){e=Y("ul"),t=Y("li"),r.c(),this.h()},l(u){e=J(u,"UL",{style:!0,class:!0});var f=Te(e);t=J(f,"LI",{});var d=Te(t);r.l(d),d.forEach(w),f.forEach(w),this.h()},h(){bt(e,"--first-node",i[3]?"0rem":"0.6rem"),te(e,"class","svelte-1t0ebq3")},m(u,f){R(u,e,f),q(e,t),l[n].m(t,null),s=!0},p(u,[f]){let d=n;n=o(u),n===d?l[n].p(u,f):(ht(),ce(l[d],1,1,()=>{l[d]=null}),dt(),r=l[n],r?r.p(u,f):(r=l[n]=a[n](u),r.c()),ue(r,1),r.m(t,null)),(!s||f&8)&&bt(e,"--first-node",u[3]?"0rem":"0.6rem")},i(u){s||(ue(r),s=!0)},o(u){ce(r),s=!1},d(u){u&&w(e),l[n].d()}}}function o3(i,e,t){let n,r,s,a,l=xe,o=()=>(l(),l=un(p,b=>t(8,a=b)),p),u,f=xe,d=()=>(f(),f=un(c,b=>t(15,u=b)),c);i.$$.on_destroy.push(()=>l()),i.$$.on_destroy.push(()=>f());let{tree:h}=e,{expanded_nodes:c}=e;d();let{selected_node:p}=e;o();let{first_node:_=!0}=e,v=u[n]||!1;function D(b,I){t(4,v=!v),yt(p,a=I,a)}function U(b,I){yt(p,a=I,a)}const T=b=>D(b,h),N=b=>ki(b,D,h),g=b=>U(b,h),E=b=>ki(b,U,h);return i.$$set=b=>{"tree"in b&&t(0,h=b.tree),"expanded_nodes"in b&&d(t(1,c=b.expanded_nodes)),"selected_node"in b&&o(t(2,p=b.selected_node)),"first_node"in b&&t(3,_=b.first_node)},i.$$.update=()=>{var b;i.$$.dirty&1&&t(6,n=((b=h==null?void 0:h["rdfs:label"])==null?void 0:b[0])??h["@id"]),i.$$.dirty&1&&t(7,r=h.children),i.$$.dirty&16&&t(5,s=v)},[h,c,p,_,v,s,n,r,a,D,U,T,N,g,E]}class u_ extends kt{constructor(e){super(),At(this,e,o3,l3,lt,{tree:0,expanded_nodes:1,selected_node:2,first_node:3})}}function Vc(i,e,t){const n=i.slice();return n[10]=e[t],n}function zc(i){let e,t;return e=new u_({props:{tree:i[10],expanded_nodes:i[4],selected_node:i[5],select_item:i[2]}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r&8&&(s.tree=n[10]),r&4&&(s.select_item=n[2]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function u3(i){let e,t,n=Ke(i[3]),r=[];for(let a=0;a<n.length;a+=1)r[a]=zc(Vc(i,n,a));const s=a=>ce(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Ie()},l(a){for(let l=0;l<r.length;l+=1)r[l].l(a);e=Ie()},m(a,l){for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(a,l);R(a,e,l),t=!0},p(a,[l]){if(l&60){n=Ke(a[3]);let o;for(o=0;o<n.length;o+=1){const u=Vc(a,n,o);r[o]?(r[o].p(u,l),ue(r[o],1)):(r[o]=zc(u),r[o].c(),ue(r[o],1),r[o].m(e.parentNode,e))}for(ht(),o=n.length;o<r.length;o+=1)s(o);dt()}},i(a){if(!t){for(let l=0;l<n.length;l+=1)ue(r[l]);t=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)ce(r[l]);t=!1},d(a){a&&w(e),Tt(r,a)}}}function f3(i,e,t){let n,r=xe,s=()=>(r(),r=un(d,D=>t(7,n=D)),d),a,l=xe,o=()=>(l(),l=un(f,D=>t(8,a=D)),f),u;i.$$.on_destroy.push(()=>r()),i.$$.on_destroy.push(()=>l());let{list:f}=e;o();let{filter_value_store:d}=e;s();let{select_item:h}=e,{regex_search_keys:c=["rdfs:label","@id"]}=e,p=[];const _=gr({}),v=gr(null);return st(i,v,D=>t(9,u=D)),Dl(()=>{u&&h(null,u,"d3f_property")}),i.$$set=D=>{"list"in D&&o(t(0,f=D.list)),"filter_value_store"in D&&s(t(1,d=D.filter_value_store)),"select_item"in D&&t(2,h=D.select_item),"regex_search_keys"in D&&t(6,c=D.regex_search_keys)},i.$$.update=()=>{i.$$.dirty&448&&t(3,p=vv(a.associated,n,c))},[f,d,h,p,_,v,c,n,a]}class c3 extends kt{constructor(e){super(),At(this,e,f3,u3,lt,{list:0,filter_value_store:1,select_item:2,regex_search_keys:6})}}const h3=i=>({}),Hc=i=>({R:i[6],filter_value_store:i[4],select_item:i[9]});function $c(i){let e,t,n,r,s,a,l;const o=i[18].default,u=Kt(o,i,i[17],Hc);return{c(){e=Y("ul"),t=Y("input"),n=le(),u&&u.c(),this.h()},l(f){e=J(f,"UL",{id:!0,class:!0});var d=Te(e);t=J(d,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0,class:!0}),n=oe(d),u&&u.l(d),d.forEach(w),this.h()},h(){te(t,"type","text"),te(t,"id","filter"),te(t,"name","filter"),te(t,"placeholder","Filter / Save"),te(t,"class","svelte-134tvrp"),te(e,"id","d3fend-container"),te(e,"class","dropdown-menu svelte-134tvrp")},m(f,d){R(f,e,d),q(e,t),q(e,n),u&&u.m(e,null),s=!0,a||(l=[Fo(uv.call(null,t)),ge(t,"click",rr(i[19])),ge(t,"keyup",rr(i[20])),ge(t,"keydown",rr(i[21])),Fo(fv.call(null,e)),ge(e,"outsideclick",i[7])],a=!0)},p(f,d){u&&u.p&&(!s||d&131072)&&Zt(u,o,f,f[17],s?tr(o,f[17],d,h3):er(f[17]),Hc)},i(f){s||(ue(u,f),f&&el(()=>{s&&(r||(r=Uo(e,Go,{delay:50,duration:200,axis:"y"},!0)),r.run(1))}),s=!0)},o(f){ce(u,f),f&&(r||(r=Uo(e,Go,{delay:50,duration:200,axis:"y"},!1)),r.run(0)),s=!1},d(f){f&&w(e),u&&u.d(f),f&&r&&r.end(),a=!1,gt(l)}}}function d3(i){let e,t,n,r,s,a,l,o,u,f,d=i[2]&&$c(i);return{c(){e=Y("div"),t=Y("div"),n=Y("div"),r=Y("span"),s=x(i[1]),a=le(),d&&d.c(),this.h()},l(h){e=J(h,"DIV",{class:!0,style:!0});var c=Te(e);t=J(c,"DIV",{class:!0,role:!0,tabindex:!0});var p=Te(t);n=J(p,"DIV",{class:!0});var _=Te(n);r=J(_,"SPAN",{class:!0});var v=Te(r);s=V(v,i[1]),v.forEach(w),_.forEach(w),a=oe(p),d&&d.l(p),p.forEach(w),c.forEach(w),this.h()},h(){te(r,"class","selected svelte-134tvrp"),te(n,"class","select autocomplete-dropdown svelte-134tvrp"),te(t,"class",l="dropdown "+(i[2]?"active":"")+" svelte-134tvrp"),te(t,"role","button"),te(t,"tabindex","0"),te(e,"class","container svelte-134tvrp"),bt(e,"--input-color",i[0])},m(h,c){R(h,e,c),q(e,t),q(t,n),q(n,r),q(r,s),q(t,a),d&&d.m(t,null),o=!0,u||(f=[ge(t,"click",i[8]),ge(t,"keydown",i[22])],u=!0)},p(h,[c]){(!o||c&2)&&we(s,h[1]),h[2]?d?(d.p(h,c),c&4&&ue(d,1)):(d=$c(h),d.c(),ue(d,1),d.m(t,null)):d&&(ht(),ce(d,1,1,()=>{d=null}),dt()),(!o||c&4&&l!==(l="dropdown "+(h[2]?"active":"")+" svelte-134tvrp"))&&te(t,"class",l),(!o||c&1)&&bt(e,"--input-color",h[0])},i(h){o||(ue(d),o=!0)},o(h){ce(d),o=!1},d(h){h&&w(e),d&&d.d(),u=!1,gt(f)}}}function p3(i,e,t){let n,r,s,a,{$$slots:l={},$$scope:o}=e,{node_id:u}=e,{element_id:f}=e,{input_color:d="white"}=e,{place_holder:h="< d3fend class >"}=e,{flow_store_hook:c=fn}=e,{data_save_key:p="d3f_class"}=e;const _=gr(!1);st(i,_,P=>t(2,a=P));const v=gr(null);st(i,v,P=>t(24,r=P));const D=c();st(i,D,P=>t(25,s=P));const U={ItemTree:i3,ItemList:t3,ItemProperty:c3};let T;Dl(()=>{yt(v,r="",r)});function N(){yt(_,a=!1,a),yt(v,r="",r)}function g(P){a?N():yt(_,a=!0,a)}function E(P,A,z="d3f_class"){let j=A["rdfs:label"];Array.isArray(A["rdfs:label"])&&(j=A["rdfs:label"][0]),s.forEach(se=>{se.id===u&&(se.data=Object.assign(Object.assign({},se.data),{[z]:A["@id"],label:j}))}),D.set(s),N()}function b(P){clearTimeout(T),T=setTimeout(()=>{yt(v,r=P.target.value,r)},400)}function I(P){const A=P.target.value;E(P,{"rdfs:label":A,"@id":A},p)}function C(P){Hr.call(this,i,P)}const O=P=>b(P),k=P=>ki(P,I),B=P=>ki(P,g);return i.$$set=P=>{"node_id"in P&&t(12,u=P.node_id),"element_id"in P&&t(13,f=P.element_id),"input_color"in P&&t(0,d=P.input_color),"place_holder"in P&&t(14,h=P.place_holder),"flow_store_hook"in P&&t(15,c=P.flow_store_hook),"data_save_key"in P&&t(16,p=P.data_save_key),"$$scope"in P&&t(17,o=P.$$scope)},i.$$.update=()=>{i.$$.dirty&24576&&t(1,n=f||h)},[d,n,a,_,v,D,U,N,g,E,b,I,u,f,h,c,p,o,l,C,O,k,B]}class Bi extends kt{constructor(e){super(),At(this,e,p3,d3,lt,{node_id:12,element_id:13,input_color:0,place_holder:14,flow_store_hook:15,data_save_key:16})}}function Xc(i,e,t){const n=i.slice();return n[33]=e[t],n[34]=e,n[35]=t,n}function Gc(i){let e,t;return e=new Et({props:{type:"target",class:"customHandle",position:_t.Left,id:"target",style:i[17](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r[0]&2&&(s.isConnectable=n[1]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function Qc(i){let e=i[7],t,n,r=Wc(i);return{c(){r.c(),t=Ie()},l(s){r.l(s),t=Ie()},m(s,a){r.m(s,a),R(s,t,a),n=!0},p(s,a){a[0]&128&&lt(e,e=s[7])?(ht(),ce(r,1,1,xe),dt(),r=Wc(s),r.c(),ue(r,1),r.m(t.parentNode,t)):r.p(s,a)},i(s){n||(ue(r),n=!0)},o(s){ce(r),n=!1},d(s){s&&w(t),r.d(s)}}}function Wc(i){let e,t,n,r,s,a,l,o;return e=new Et({props:{type:"source",position:_t.Top,id:"source",style:i[18](),isConnectable:i[1]}}),n=new Et({props:{type:"source",position:_t.Left,id:"source",style:i[18](),isConnectable:i[1]}}),s=new Et({props:{type:"source",position:_t.Right,id:"source",style:i[18](),isConnectable:i[1]}}),l=new Et({props:{type:"source",position:_t.Bottom,id:"source",style:i[18](),isConnectable:i[1]}}),{c(){Re(e.$$.fragment),t=le(),Re(n.$$.fragment),r=le(),Re(s.$$.fragment),a=le(),Re(l.$$.fragment)},l(u){Fe(e.$$.fragment,u),t=oe(u),Fe(n.$$.fragment,u),r=oe(u),Fe(s.$$.fragment,u),a=oe(u),Fe(l.$$.fragment,u)},m(u,f){Oe(e,u,f),R(u,t,f),Oe(n,u,f),R(u,r,f),Oe(s,u,f),R(u,a,f),Oe(l,u,f),o=!0},p(u,f){const d={};f[0]&2&&(d.isConnectable=u[1]),e.$set(d);const h={};f[0]&2&&(h.isConnectable=u[1]),n.$set(h);const c={};f[0]&2&&(c.isConnectable=u[1]),s.$set(c);const p={};f[0]&2&&(p.isConnectable=u[1]),l.$set(p)},i(u){o||(ue(e.$$.fragment,u),ue(n.$$.fragment,u),ue(s.$$.fragment,u),ue(l.$$.fragment,u),o=!0)},o(u){ce(e.$$.fragment,u),ce(n.$$.fragment,u),ce(s.$$.fragment,u),ce(l.$$.fragment,u),o=!1},d(u){u&&(w(t),w(r),w(a)),Be(e,u),Be(n,u),Be(s,u),Be(l,u)}}}function _3(i){let e,t;return e=new i[36].ItemList({props:{list:ad,filter_value_store:i[37],select_item:i[38]}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r[1]&64&&(s.filter_value_store=n[37]),r[1]&128&&(s.select_item=n[38]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function Yc(i){let e,t=Ke(i[0].user_properties),n=[];for(let r=0;r<t.length;r+=1)n[r]=Jc(Xc(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);R(r,e,s)},p(r,s){if(s[0]&801){t=Ke(r[0].user_properties);let a;for(a=0;a<t.length;a+=1){const l=Xc(r,t,a);n[a]?n[a].p(l,s):(n[a]=Jc(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&w(e),Tt(n,r)}}}function Jc(i){let e,t,n,r,s,a,l,o,u;function f(...p){return i[28](i[35],...p)}function d(){i[29].call(n,i[35])}function h(...p){return i[30](i[35],...p)}function c(){i[31].call(a,i[35])}return{c(){e=Y("div"),t=Y("div"),n=Y("input"),r=le(),s=Y("div"),a=Y("input"),l=le(),this.h()},l(p){e=J(p,"DIV",{class:!0});var _=Te(e);t=J(_,"DIV",{class:!0});var v=Te(t);n=J(v,"INPUT",{placeholder:!0}),v.forEach(w),r=oe(_),s=J(_,"DIV",{class:!0});var D=Te(s);a=J(D,"INPUT",{placeholder:!0}),D.forEach(w),l=oe(_),_.forEach(w),this.h()},h(){te(n,"placeholder","property"),te(t,"class","user-property flex-column"),te(a,"placeholder","value"),te(s,"class","user-value flex-column flex-grow-3"),te(e,"class","user-properties flex")},m(p,_){R(p,e,_),q(e,t),q(t,n),$e(n,i[9][i[35]][0]),q(e,r),q(e,s),q(s,a),$e(a,i[8][i[35]][1]),q(e,l),o||(u=[ge(n,"input",f),ge(n,"input",d),ge(a,"input",h),ge(a,"input",c)],o=!0)},p(p,_){i=p,_[0]&512&&n.value!==i[9][i[35]][0]&&$e(n,i[9][i[35]][0]),_[0]&256&&a.value!==i[8][i[35]][1]&&$e(a,i[8][i[35]][1])},d(p){p&&w(e),o=!1,gt(u)}}}function v3(i){let e=i[4].inProgress,t,n,r,s,a,l,o,u,f,d,h,c,p,_,v,D,U,T,N,g,E,b="+",I,C,O,k=Gc(i),B=!i[6]&&Qc(i);a=new Un({props:{isVisible:i[2]}}),p=new Bi({props:{node_id:i[3],element_id:i[0].d3f_class,input_color:"#ffc3c7",$$slots:{default:[_3,({R:A,filter_value_store:z,select_item:j})=>({36:A,37:z,38:j}),({R:A,filter_value_store:z,select_item:j})=>[0,(A?32:0)|(z?64:0)|(j?128:0)]]},$$scope:{ctx:i}}});let P=i[0].user_properties&&Yc(i);return{c(){k.c(),t=le(),n=Y("div"),B&&B.c(),r=le(),s=Y("div"),Re(a.$$.fragment),l=le(),o=Y("i"),u=x(`Attack Action
        `),f=Y("input"),d=le(),h=Y("br"),c=le(),Re(p.$$.fragment),_=le(),v=Y("div"),D=Y("input"),U=le(),T=Y("br"),N=le(),P&&P.c(),g=le(),E=Y("button"),E.textContent=b,this.h()},l(A){k.l(A),t=oe(A),n=J(A,"DIV",{class:!0});var z=Te(n);B&&B.l(z),r=oe(z),s=J(z,"DIV",{class:!0});var j=Te(s);Fe(a.$$.fragment,j),l=oe(j),o=J(j,"I",{});var se=Te(o);u=V(se,`Attack Action
        `),f=J(se,"INPUT",{class:!0,type:!0,style:!0}),se.forEach(w),d=oe(j),h=J(j,"BR",{}),c=oe(j),Fe(p.$$.fragment,j),_=oe(j),v=J(j,"DIV",{});var Z=Te(v);D=J(Z,"INPUT",{class:!0,type:!0,style:!0}),Z.forEach(w),U=oe(j),T=J(j,"BR",{}),N=oe(j),P&&P.l(j),g=oe(j),E=J(j,"BUTTON",{"data-svelte-h":!0}),nt(E)!=="svelte-y9choq"&&(E.textContent=b),j.forEach(w),z.forEach(w),this.h()},h(){te(f,"class","nodrag sequence"),te(f,"type","text"),bt(f,"background","#ffc3c7"),te(D,"class","nodrag"),te(D,"type","text"),bt(D,"text-align","center"),bt(D,"background","#ffc3c7"),bt(D,"font-weight","bold"),te(s,"class","attack-node node-inner svelte-pkj1to"),te(n,"class","attack-node node svelte-pkj1to")},m(A,z){k.m(A,z),R(A,t,z),R(A,n,z),B&&B.m(n,null),q(n,r),q(n,s),Oe(a,s,null),q(s,l),q(s,o),q(o,u),q(o,f),$e(f,i[10]),q(s,d),q(s,h),q(s,c),Oe(p,s,null),q(s,_),q(s,v),q(v,D),$e(D,i[11]),q(s,U),q(s,T),q(s,N),P&&P.m(s,null),q(s,g),q(s,E),I=!0,C||(O=[ge(f,"input",i[24]),ge(f,"input",i[25]),ge(D,"input",i[26]),ge(D,"input",i[27]),ge(E,"click",i[12]),ge(n,"click",i[13]),ge(n,"mouseenter",i[15]),ge(n,"mouseleave",i[16])],C=!0)},p(A,z){z[0]&16&&lt(e,e=A[4].inProgress)?(ht(),ce(k,1,1,xe),dt(),k=Gc(A),k.c(),ue(k,1),k.m(t.parentNode,t)):k.p(A,z),A[6]?B&&(ht(),ce(B,1,1,()=>{B=null}),dt()):B?(B.p(A,z),z[0]&64&&ue(B,1)):(B=Qc(A),B.c(),ue(B,1),B.m(n,r));const j={};z[0]&4&&(j.isVisible=A[2]),a.$set(j),z[0]&1024&&f.value!==A[10]&&$e(f,A[10]);const se={};z[0]&8&&(se.node_id=A[3]),z[0]&1&&(se.element_id=A[0].d3f_class),z[1]&448&&(se.$$scope={dirty:z,ctx:A}),p.$set(se),z[0]&2048&&D.value!==A[11]&&$e(D,A[11]),A[0].user_properties?P?P.p(A,z):(P=Yc(A),P.c(),P.m(s,g)):P&&(P.d(1),P=null)},i(A){I||(ue(k),ue(B),ue(a.$$.fragment,A),ue(p.$$.fragment,A),I=!0)},o(A){ce(k),ce(B),ce(a.$$.fragment,A),ce(p.$$.fragment,A),I=!1},d(A){A&&(w(t),w(n)),k.d(A),B&&B.d(),Be(a),Be(p),P&&P.d(),C=!1,gt(O)}}}function m3(i,e,t){let n,r,s,a,l,o,u;st(i,Tr,H=>t(32,o=H)),st(i,at,H=>t(5,u=H));var f,d,h,c,p;let{data:_}=e,{isConnectable:v}=e,{selected:D=void 0}=e,{id:U}=e;function T(){N(),_.user_properties.push(["",""])}function N(){for(let H=0;H<o.length;H++)o[H].data==_&&yt(at,u=o[H],u)}const g=En();st(i,g,H=>t(4,l=H));let E=!1,b=!1;function I(){t(7,b=!0)}function C(){t(7,b=!1)}function O(){return l.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function k(){return b?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const B=H=>{t(0,_.sequence=H.currentTarget.value,_),yt(at,u.data.sequence=_.sequence,u)};function P(){r=this.value,t(10,r),t(0,_),t(5,u),t(20,d)}const A=H=>{t(0,_.label=H.currentTarget.value,_),yt(at,u.data.label=_.label,u)};function z(){n=this.value,t(11,n),t(0,_),t(5,u),t(19,f)}const j=(H,Q)=>{t(0,_.user_properties[H][0]=Q.currentTarget.value,_),yt(at,u.data.user_properties[H][0]=Q.currentTarget.value,u)};function se(H){s[H][0]=this.value,t(9,s),t(0,_),t(5,u),t(21,h)}const Z=(H,Q)=>{t(0,_.user_properties[H][1]=Q.currentTarget.value,_),yt(at,u.data.user_properties[H][1]=Q.currentTarget.value,u)};function G(H){a[H][1]=this.value,t(8,a),t(0,_),t(5,u),t(22,c)}return i.$$set=H=>{"data"in H&&t(0,_=H.data),"isConnectable"in H&&t(1,v=H.isConnectable),"selected"in H&&t(2,D=H.selected),"id"in H&&t(3,U=H.id)},i.$$.update=()=>{i.$$.dirty[0]&524321&&t(11,n=(_==null?void 0:_.label)||(t(19,f=u==null?void 0:u.data)===null||f===void 0?void 0:f.label)||"< label >"),i.$$.dirty[0]&1048609&&t(10,r=(_==null?void 0:_.sequence)||"#"),i.$$.dirty[0]&2097185&&t(9,s=(_==null?void 0:_.user_properties)||(t(21,h=u==null?void 0:u.data)===null||h===void 0?void 0:h.user_properties)||"< Property >"),i.$$.dirty[0]&4194337&&t(8,a=(_==null?void 0:_.user_properties)||(t(22,c=u==null?void 0:u.data)===null||c===void 0?void 0:c.user_properties)||"< Value >"),i.$$.dirty[0]&8388632&&t(6,E=(t(23,p=l.toHandle)===null||p===void 0?void 0:p.nodeId)==U)},[_,v,D,U,l,u,E,b,a,s,r,n,T,N,g,I,C,O,k,f,d,h,c,p,B,P,A,z,j,se,Z,G]}class g3 extends kt{constructor(e){super(),At(this,e,m3,v3,lt,{data:0,isConnectable:1,selected:2,id:3},null,[-1,-1])}}function Kc(i,e,t){const n=i.slice();return n[29]=e[t],n[30]=e,n[31]=t,n}function Zc(i){let e,t;return e=new Et({props:{type:"target",class:"customHandle",position:_t.Left,id:"target",style:i[16](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r[0]&2&&(s.isConnectable=n[1]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function eh(i){let e=i[7],t,n,r=th(i);return{c(){r.c(),t=Ie()},l(s){r.l(s),t=Ie()},m(s,a){r.m(s,a),R(s,t,a),n=!0},p(s,a){a[0]&128&&lt(e,e=s[7])?(ht(),ce(r,1,1,xe),dt(),r=th(s),r.c(),ue(r,1),r.m(t.parentNode,t)):r.p(s,a)},i(s){n||(ue(r),n=!0)},o(s){ce(r),n=!1},d(s){s&&w(t),r.d(s)}}}function th(i){let e,t,n,r,s,a,l,o;return e=new Et({props:{type:"source",position:_t.Top,id:"source",style:i[17](),isConnectable:i[1]}}),n=new Et({props:{type:"source",position:_t.Left,id:"source",style:i[17](),isConnectable:i[1]}}),s=new Et({props:{type:"source",position:_t.Right,id:"source",style:i[17](),isConnectable:i[1]}}),l=new Et({props:{type:"source",position:_t.Bottom,id:"source",style:i[17](),isConnectable:i[1]}}),{c(){Re(e.$$.fragment),t=le(),Re(n.$$.fragment),r=le(),Re(s.$$.fragment),a=le(),Re(l.$$.fragment)},l(u){Fe(e.$$.fragment,u),t=oe(u),Fe(n.$$.fragment,u),r=oe(u),Fe(s.$$.fragment,u),a=oe(u),Fe(l.$$.fragment,u)},m(u,f){Oe(e,u,f),R(u,t,f),Oe(n,u,f),R(u,r,f),Oe(s,u,f),R(u,a,f),Oe(l,u,f),o=!0},p(u,f){const d={};f[0]&2&&(d.isConnectable=u[1]),e.$set(d);const h={};f[0]&2&&(h.isConnectable=u[1]),n.$set(h);const c={};f[0]&2&&(c.isConnectable=u[1]),s.$set(c);const p={};f[0]&2&&(p.isConnectable=u[1]),l.$set(p)},i(u){o||(ue(e.$$.fragment,u),ue(n.$$.fragment,u),ue(s.$$.fragment,u),ue(l.$$.fragment,u),o=!0)},o(u){ce(e.$$.fragment,u),ce(n.$$.fragment,u),ce(s.$$.fragment,u),ce(l.$$.fragment,u),o=!1},d(u){u&&(w(t),w(r),w(a)),Be(e,u),Be(n,u),Be(s,u),Be(l,u)}}}function b3(i){let e,t;return e=new i[32].ItemList({props:{list:ld,filter_value_store:i[33],select_item:i[34]}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r[1]&4&&(s.filter_value_store=n[33]),r[1]&8&&(s.select_item=n[34]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function rh(i){let e,t=Ke(i[0].user_properties),n=[];for(let r=0;r<t.length;r+=1)n[r]=nh(Kc(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);R(r,e,s)},p(r,s){if(s[0]&801){t=Ke(r[0].user_properties);let a;for(a=0;a<t.length;a+=1){const l=Kc(r,t,a);n[a]?n[a].p(l,s):(n[a]=nh(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&w(e),Tt(n,r)}}}function nh(i){let e,t,n,r,s,a,l,o,u;function f(...p){return i[24](i[31],...p)}function d(){i[25].call(n,i[31])}function h(...p){return i[26](i[31],...p)}function c(){i[27].call(a,i[31])}return{c(){e=Y("div"),t=Y("div"),n=Y("input"),r=le(),s=Y("div"),a=Y("input"),l=le(),this.h()},l(p){e=J(p,"DIV",{class:!0});var _=Te(e);t=J(_,"DIV",{class:!0});var v=Te(t);n=J(v,"INPUT",{placeholder:!0}),v.forEach(w),r=oe(_),s=J(_,"DIV",{class:!0});var D=Te(s);a=J(D,"INPUT",{placeholder:!0}),D.forEach(w),l=oe(_),_.forEach(w),this.h()},h(){te(n,"placeholder","property"),te(t,"class","user-property flex-column"),te(a,"placeholder","value"),te(s,"class","user-value flex-column flex-grow-3"),te(e,"class","user-properties flex")},m(p,_){R(p,e,_),q(e,t),q(t,n),$e(n,i[9][i[31]][0]),q(e,r),q(e,s),q(s,a),$e(a,i[8][i[31]][1]),q(e,l),o||(u=[ge(n,"input",f),ge(n,"input",d),ge(a,"input",h),ge(a,"input",c)],o=!0)},p(p,_){i=p,_[0]&512&&n.value!==i[9][i[31]][0]&&$e(n,i[9][i[31]][0]),_[0]&256&&a.value!==i[8][i[31]][1]&&$e(a,i[8][i[31]][1])},d(p){p&&w(e),o=!1,gt(u)}}}function y3(i){let e=i[4].inProgress,t,n,r,s,a,l,o,u="Vulnerability",f,d,h,c,p,_,v,D,U,T,N,g="+",E,b,I,C=Zc(i),O=!i[6]&&eh(i);a=new Un({props:{isVisible:i[2]}}),p=new Bi({props:{node_id:i[3],element_id:i[0].d3f_class,input_color:"#f9d999",place_holder:"< weakness >",$$slots:{default:[b3,({R:B,filter_value_store:P,select_item:A})=>({32:B,33:P,34:A}),({R:B,filter_value_store:P,select_item:A})=>[0,(B?2:0)|(P?4:0)|(A?8:0)]]},$$scope:{ctx:i}}});let k=i[0].user_properties&&rh(i);return{c(){C.c(),t=le(),n=Y("div"),O&&O.c(),r=le(),s=Y("div"),Re(a.$$.fragment),l=le(),o=Y("i"),o.textContent=u,f=le(),d=Y("br"),h=le(),c=Y("div"),Re(p.$$.fragment),_=le(),v=Y("div"),D=Y("input"),U=le(),k&&k.c(),T=le(),N=Y("button"),N.textContent=g,this.h()},l(B){C.l(B),t=oe(B),n=J(B,"DIV",{class:!0});var P=Te(n);O&&O.l(P),r=oe(P),s=J(P,"DIV",{class:!0});var A=Te(s);Fe(a.$$.fragment,A),l=oe(A),o=J(A,"I",{"data-svelte-h":!0}),nt(o)!=="svelte-qgxj0w"&&(o.textContent=u),f=oe(A),d=J(A,"BR",{}),h=oe(A),c=J(A,"DIV",{});var z=Te(c);Fe(p.$$.fragment,z),z.forEach(w),_=oe(A),v=J(A,"DIV",{});var j=Te(v);D=J(j,"INPUT",{class:!0,type:!0,style:!0}),U=oe(j),k&&k.l(j),T=oe(j),N=J(j,"BUTTON",{"data-svelte-h":!0}),nt(N)!=="svelte-y9choq"&&(N.textContent=g),j.forEach(w),A.forEach(w),P.forEach(w),this.h()},h(){te(D,"class","nodrag label"),te(D,"type","text"),bt(D,"background","#f9d999"),te(s,"class","vulnerability node-inner svelte-17a4qd7"),te(n,"class","vulnerability node svelte-17a4qd7")},m(B,P){C.m(B,P),R(B,t,P),R(B,n,P),O&&O.m(n,null),q(n,r),q(n,s),Oe(a,s,null),q(s,l),q(s,o),q(s,f),q(s,d),q(s,h),q(s,c),Oe(p,c,null),q(s,_),q(s,v),q(v,D),$e(D,i[10]),q(v,U),k&&k.m(v,null),q(v,T),q(v,N),E=!0,b||(I=[ge(D,"input",i[22]),ge(D,"input",i[23]),ge(N,"click",i[11]),ge(n,"click",i[12]),ge(n,"mouseenter",i[14]),ge(n,"mouseleave",i[15])],b=!0)},p(B,P){P[0]&16&&lt(e,e=B[4].inProgress)?(ht(),ce(C,1,1,xe),dt(),C=Zc(B),C.c(),ue(C,1),C.m(t.parentNode,t)):C.p(B,P),B[6]?O&&(ht(),ce(O,1,1,()=>{O=null}),dt()):O?(O.p(B,P),P[0]&64&&ue(O,1)):(O=eh(B),O.c(),ue(O,1),O.m(n,r));const A={};P[0]&4&&(A.isVisible=B[2]),a.$set(A);const z={};P[0]&8&&(z.node_id=B[3]),P[0]&1&&(z.element_id=B[0].d3f_class),P[1]&28&&(z.$$scope={dirty:P,ctx:B}),p.$set(z),P[0]&1024&&D.value!==B[10]&&$e(D,B[10]),B[0].user_properties?k?k.p(B,P):(k=rh(B),k.c(),k.m(v,T)):k&&(k.d(1),k=null)},i(B){E||(ue(C),ue(O),ue(a.$$.fragment,B),ue(p.$$.fragment,B),E=!0)},o(B){ce(C),ce(O),ce(a.$$.fragment,B),ce(p.$$.fragment,B),E=!1},d(B){B&&(w(t),w(n)),C.d(B),O&&O.d(),Be(a),Be(p),k&&k.d(),b=!1,gt(I)}}}function w3(i,e,t){let n,r,s,a,l,o;st(i,Tr,j=>t(28,l=j)),st(i,at,j=>t(5,o=j));var u,f,d,h;let{data:c}=e,{isConnectable:p}=e,{selected:_=void 0}=e,{id:v}=e;function D(){U(),c.user_properties.push(["",""])}function U(){for(let j=0;j<l.length;j++)l[j].data==c&&yt(at,o=l[j],o)}const T=En();st(i,T,j=>t(4,a=j));let N=!1,g=!1;function E(){t(7,g=!0)}function b(){t(7,g=!1)}function I(){return a.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function C(){return g?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const O=j=>{t(0,c.label=j.currentTarget.value,c),yt(at,o.data.label=c.label,o)};function k(){n=this.value,t(10,n),t(0,c),t(5,o),t(18,u)}const B=(j,se)=>{t(0,c.user_properties[j][0]=se.currentTarget.value,c),yt(at,o.data.user_properties[j][0]=se.currentTarget.value,o)};function P(j){r[j][0]=this.value,t(9,r),t(0,c),t(5,o),t(19,f)}const A=(j,se)=>{t(0,c.user_properties[j][1]=se.currentTarget.value,c),yt(at,o.data.user_properties[j][1]=se.currentTarget.value,o)};function z(j){s[j][1]=this.value,t(8,s),t(0,c),t(5,o),t(20,d)}return i.$$set=j=>{"data"in j&&t(0,c=j.data),"isConnectable"in j&&t(1,p=j.isConnectable),"selected"in j&&t(2,_=j.selected),"id"in j&&t(3,v=j.id)},i.$$.update=()=>{i.$$.dirty[0]&262177&&t(10,n=(c==null?void 0:c.label)||(t(18,u=o==null?void 0:o.data)===null||u===void 0?void 0:u.label)||"< label >"),i.$$.dirty[0]&524321&&t(9,r=(c==null?void 0:c.user_properties)||(t(19,f=o==null?void 0:o.data)===null||f===void 0?void 0:f.user_properties)||"< Property >"),i.$$.dirty[0]&1048609&&t(8,s=(c==null?void 0:c.user_properties)||(t(20,d=o==null?void 0:o.data)===null||d===void 0?void 0:d.user_properties)||"< Value >"),i.$$.dirty[0]&2097176&&t(6,N=(t(21,h=a.toHandle)===null||h===void 0?void 0:h.nodeId)==v)},[c,p,_,v,a,o,N,g,s,r,n,D,U,T,E,b,I,C,u,f,d,h,O,k,B,P,A,z]}class E3 extends kt{constructor(e){super(),At(this,e,w3,y3,lt,{data:0,isConnectable:1,selected:2,id:3},null,[-1,-1])}}function ih(i,e,t){const n=i.slice();return n[29]=e[t],n[30]=e,n[31]=t,n}function ah(i){let e,t;return e=new Et({props:{type:"target",class:"customHandle",position:_t.Left,id:"target",style:i[16](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r[0]&2&&(s.isConnectable=n[1]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function sh(i){let e=i[7],t,n,r=lh(i);return{c(){r.c(),t=Ie()},l(s){r.l(s),t=Ie()},m(s,a){r.m(s,a),R(s,t,a),n=!0},p(s,a){a[0]&128&&lt(e,e=s[7])?(ht(),ce(r,1,1,xe),dt(),r=lh(s),r.c(),ue(r,1),r.m(t.parentNode,t)):r.p(s,a)},i(s){n||(ue(r),n=!0)},o(s){ce(r),n=!1},d(s){s&&w(t),r.d(s)}}}function lh(i){let e,t,n,r,s,a,l,o;return e=new Et({props:{type:"source",position:_t.Top,id:"source",style:i[17](),isConnectable:i[1]}}),n=new Et({props:{type:"source",position:_t.Left,id:"source",style:i[17](),isConnectable:i[1]}}),s=new Et({props:{type:"source",position:_t.Right,id:"source",style:i[17](),isConnectable:i[1]}}),l=new Et({props:{type:"source",position:_t.Bottom,id:"source",style:i[17](),isConnectable:i[1]}}),{c(){Re(e.$$.fragment),t=le(),Re(n.$$.fragment),r=le(),Re(s.$$.fragment),a=le(),Re(l.$$.fragment)},l(u){Fe(e.$$.fragment,u),t=oe(u),Fe(n.$$.fragment,u),r=oe(u),Fe(s.$$.fragment,u),a=oe(u),Fe(l.$$.fragment,u)},m(u,f){Oe(e,u,f),R(u,t,f),Oe(n,u,f),R(u,r,f),Oe(s,u,f),R(u,a,f),Oe(l,u,f),o=!0},p(u,f){const d={};f[0]&2&&(d.isConnectable=u[1]),e.$set(d);const h={};f[0]&2&&(h.isConnectable=u[1]),n.$set(h);const c={};f[0]&2&&(c.isConnectable=u[1]),s.$set(c);const p={};f[0]&2&&(p.isConnectable=u[1]),l.$set(p)},i(u){o||(ue(e.$$.fragment,u),ue(n.$$.fragment,u),ue(s.$$.fragment,u),ue(l.$$.fragment,u),o=!0)},o(u){ce(e.$$.fragment,u),ce(n.$$.fragment,u),ce(s.$$.fragment,u),ce(l.$$.fragment,u),o=!1},d(u){u&&(w(t),w(r),w(a)),Be(e,u),Be(n,u),Be(s,u),Be(l,u)}}}function D3(i){let e,t;return e=new i[32].ItemList({props:{list:id,filter_value_store:i[33],select_item:i[34]}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r[1]&4&&(s.filter_value_store=n[33]),r[1]&8&&(s.select_item=n[34]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function oh(i){let e,t=Ke(i[0].user_properties),n=[];for(let r=0;r<t.length;r+=1)n[r]=uh(ih(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);R(r,e,s)},p(r,s){if(s[0]&801){t=Ke(r[0].user_properties);let a;for(a=0;a<t.length;a+=1){const l=ih(r,t,a);n[a]?n[a].p(l,s):(n[a]=uh(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&w(e),Tt(n,r)}}}function uh(i){let e,t,n,r,s,a,l,o,u;function f(...p){return i[24](i[31],...p)}function d(){i[25].call(n,i[31])}function h(...p){return i[26](i[31],...p)}function c(){i[27].call(a,i[31])}return{c(){e=Y("div"),t=Y("div"),n=Y("input"),r=le(),s=Y("div"),a=Y("input"),l=le(),this.h()},l(p){e=J(p,"DIV",{class:!0});var _=Te(e);t=J(_,"DIV",{class:!0});var v=Te(t);n=J(v,"INPUT",{placeholder:!0}),v.forEach(w),r=oe(_),s=J(_,"DIV",{class:!0});var D=Te(s);a=J(D,"INPUT",{placeholder:!0}),D.forEach(w),l=oe(_),_.forEach(w),this.h()},h(){te(n,"placeholder","property"),te(t,"class","user-property flex-column"),te(a,"placeholder","value"),te(s,"class","user-value flex-column flex-grow-3"),te(e,"class","user-properties flex")},m(p,_){R(p,e,_),q(e,t),q(t,n),$e(n,i[9][i[31]][0]),q(e,r),q(e,s),q(s,a),$e(a,i[8][i[31]][1]),q(e,l),o||(u=[ge(n,"input",f),ge(n,"input",d),ge(a,"input",h),ge(a,"input",c)],o=!0)},p(p,_){i=p,_[0]&512&&n.value!==i[9][i[31]][0]&&$e(n,i[9][i[31]][0]),_[0]&256&&a.value!==i[8][i[31]][1]&&$e(a,i[8][i[31]][1])},d(p){p&&w(e),o=!1,gt(u)}}}function k3(i){let e=i[4].inProgress,t,n,r,s,a,l="Artifact",o,u,f,d,h,c,p,_,v,D,U="+",T,N,g,E=ah(i),b=!i[6]&&sh(i);f=new Un({props:{isVisible:i[2]}}),h=new Bi({props:{node_id:i[3],element_id:i[0].d3f_class,input_color:"#fff4dd",$$slots:{default:[D3,({R:C,filter_value_store:O,select_item:k})=>({32:C,33:O,34:k}),({R:C,filter_value_store:O,select_item:k})=>[0,(C?2:0)|(O?4:0)|(k?8:0)]]},$$scope:{ctx:i}}});let I=i[0].user_properties&&oh(i);return{c(){E.c(),t=le(),n=Y("div"),b&&b.c(),r=le(),s=Y("div"),a=Y("i"),a.textContent=l,o=Y("br"),u=le(),Re(f.$$.fragment),d=le(),Re(h.$$.fragment),c=le(),p=Y("input"),_=le(),I&&I.c(),v=le(),D=Y("button"),D.textContent=U,this.h()},l(C){E.l(C),t=oe(C),n=J(C,"DIV",{class:!0});var O=Te(n);b&&b.l(O),r=oe(O),s=J(O,"DIV",{class:!0});var k=Te(s);a=J(k,"I",{"data-svelte-h":!0}),nt(a)!=="svelte-148na2y"&&(a.textContent=l),o=J(k,"BR",{}),u=oe(k),Fe(f.$$.fragment,k),d=oe(k),Fe(h.$$.fragment,k),c=oe(k),p=J(k,"INPUT",{class:!0,type:!0,style:!0}),_=oe(k),I&&I.l(k),v=oe(k),D=J(k,"BUTTON",{"data-svelte-h":!0}),nt(D)!=="svelte-y9choq"&&(D.textContent=U),k.forEach(w),O.forEach(w),this.h()},h(){te(p,"class","nodrag label"),te(p,"type","text"),bt(p,"background","#fff4dd"),te(s,"class","node-inner"),te(n,"class","artifact node svelte-1q2d78v")},m(C,O){E.m(C,O),R(C,t,O),R(C,n,O),b&&b.m(n,null),q(n,r),q(n,s),q(s,a),q(s,o),q(s,u),Oe(f,s,null),q(s,d),Oe(h,s,null),q(s,c),q(s,p),$e(p,i[10]),q(s,_),I&&I.m(s,null),q(s,v),q(s,D),T=!0,N||(g=[ge(p,"input",i[22]),ge(p,"input",i[23]),ge(D,"click",i[11]),ge(n,"click",i[12]),ge(n,"mouseenter",i[14]),ge(n,"mouseleave",i[15])],N=!0)},p(C,O){O[0]&16&&lt(e,e=C[4].inProgress)?(ht(),ce(E,1,1,xe),dt(),E=ah(C),E.c(),ue(E,1),E.m(t.parentNode,t)):E.p(C,O),C[6]?b&&(ht(),ce(b,1,1,()=>{b=null}),dt()):b?(b.p(C,O),O[0]&64&&ue(b,1)):(b=sh(C),b.c(),ue(b,1),b.m(n,r));const k={};O[0]&4&&(k.isVisible=C[2]),f.$set(k);const B={};O[0]&8&&(B.node_id=C[3]),O[0]&1&&(B.element_id=C[0].d3f_class),O[1]&28&&(B.$$scope={dirty:O,ctx:C}),h.$set(B),O[0]&1024&&p.value!==C[10]&&$e(p,C[10]),C[0].user_properties?I?I.p(C,O):(I=oh(C),I.c(),I.m(s,v)):I&&(I.d(1),I=null)},i(C){T||(ue(E),ue(b),ue(f.$$.fragment,C),ue(h.$$.fragment,C),T=!0)},o(C){ce(E),ce(b),ce(f.$$.fragment,C),ce(h.$$.fragment,C),T=!1},d(C){C&&(w(t),w(n)),E.d(C),b&&b.d(),Be(f),Be(h),I&&I.d(),N=!1,gt(g)}}}function A3(i,e,t){let n,r,s,a,l,o;st(i,Tr,j=>t(28,l=j)),st(i,at,j=>t(5,o=j));var u,f,d,h;let{data:c}=e,{isConnectable:p}=e,{selected:_=void 0}=e,{id:v}=e;function D(){U(),c.user_properties.push(["",""])}function U(){for(let j=0;j<l.length;j++)l[j].data==c&&yt(at,o=l[j],o)}const T=En();st(i,T,j=>t(4,a=j));let N=!1,g=!1;function E(){t(7,g=!0)}function b(){t(7,g=!1)}function I(){return a.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function C(){return g?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const O=j=>{t(0,c.label=j.currentTarget.value,c),yt(at,o.data.label=c.label,o)};function k(){n=this.value,t(10,n),t(0,c),t(5,o),t(18,u)}const B=(j,se)=>{t(0,c.user_properties[j][0]=se.currentTarget.value,c),yt(at,o.data.user_properties[j][0]=se.currentTarget.value,o)};function P(j){r[j][0]=this.value,t(9,r),t(0,c),t(5,o),t(19,f)}const A=(j,se)=>{t(0,c.user_properties[j][1]=se.currentTarget.value,c),yt(at,o.data.user_properties[j][1]=se.currentTarget.value,o)};function z(j){s[j][1]=this.value,t(8,s),t(0,c),t(5,o),t(20,d)}return i.$$set=j=>{"data"in j&&t(0,c=j.data),"isConnectable"in j&&t(1,p=j.isConnectable),"selected"in j&&t(2,_=j.selected),"id"in j&&t(3,v=j.id)},i.$$.update=()=>{i.$$.dirty[0]&262177&&t(10,n=(c==null?void 0:c.label)||(t(18,u=o==null?void 0:o.data)===null||u===void 0?void 0:u.label)||"< label >"),i.$$.dirty[0]&524321&&t(9,r=(c==null?void 0:c.user_properties)||(t(19,f=o==null?void 0:o.data)===null||f===void 0?void 0:f.user_properties)||"< Property >"),i.$$.dirty[0]&1048609&&t(8,s=(c==null?void 0:c.user_properties)||(t(20,d=o==null?void 0:o.data)===null||d===void 0?void 0:d.user_properties)||"< Value >"),i.$$.dirty[0]&2097176&&t(6,N=(t(21,h=a.toHandle)===null||h===void 0?void 0:h.nodeId)==v)},[c,p,_,v,a,o,N,g,s,r,n,D,U,T,E,b,I,C,u,f,d,h,O,k,B,P,A,z]}class C3 extends kt{constructor(e){super(),At(this,e,A3,k3,lt,{data:0,isConnectable:1,selected:2,id:3},null,[-1,-1])}}function fh(i,e,t){const n=i.slice();return n[33]=e[t],n[34]=e,n[35]=t,n}function ch(i){let e,t;return e=new Et({props:{type:"target",class:"customHandle",position:_t.Left,id:"target",style:i[17](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r[0]&2&&(s.isConnectable=n[1]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function hh(i){let e=i[7],t,n,r=dh(i);return{c(){r.c(),t=Ie()},l(s){r.l(s),t=Ie()},m(s,a){r.m(s,a),R(s,t,a),n=!0},p(s,a){a[0]&128&&lt(e,e=s[7])?(ht(),ce(r,1,1,xe),dt(),r=dh(s),r.c(),ue(r,1),r.m(t.parentNode,t)):r.p(s,a)},i(s){n||(ue(r),n=!0)},o(s){ce(r),n=!1},d(s){s&&w(t),r.d(s)}}}function dh(i){let e,t,n,r,s,a,l,o;return e=new Et({props:{type:"source",position:_t.Top,id:"source",style:i[18](),isConnectable:i[1]}}),n=new Et({props:{type:"source",position:_t.Left,id:"source",style:i[18](),isConnectable:i[1]}}),s=new Et({props:{type:"source",position:_t.Right,id:"source",style:i[18](),isConnectable:i[1]}}),l=new Et({props:{type:"source",position:_t.Bottom,id:"source",style:i[18](),isConnectable:i[1]}}),{c(){Re(e.$$.fragment),t=le(),Re(n.$$.fragment),r=le(),Re(s.$$.fragment),a=le(),Re(l.$$.fragment)},l(u){Fe(e.$$.fragment,u),t=oe(u),Fe(n.$$.fragment,u),r=oe(u),Fe(s.$$.fragment,u),a=oe(u),Fe(l.$$.fragment,u)},m(u,f){Oe(e,u,f),R(u,t,f),Oe(n,u,f),R(u,r,f),Oe(s,u,f),R(u,a,f),Oe(l,u,f),o=!0},p(u,f){const d={};f[0]&2&&(d.isConnectable=u[1]),e.$set(d);const h={};f[0]&2&&(h.isConnectable=u[1]),n.$set(h);const c={};f[0]&2&&(c.isConnectable=u[1]),s.$set(c);const p={};f[0]&2&&(p.isConnectable=u[1]),l.$set(p)},i(u){o||(ue(e.$$.fragment,u),ue(n.$$.fragment,u),ue(s.$$.fragment,u),ue(l.$$.fragment,u),o=!0)},o(u){ce(e.$$.fragment,u),ce(n.$$.fragment,u),ce(s.$$.fragment,u),ce(l.$$.fragment,u),o=!1},d(u){u&&(w(t),w(r),w(a)),Be(e,u),Be(n,u),Be(s,u),Be(l,u)}}}function T3(i){let e,t;return e=new i[36].ItemTree({props:{list:nd,filter_value_store:i[37],select_item:i[38]}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r[1]&64&&(s.filter_value_store=n[37]),r[1]&128&&(s.select_item=n[38]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function ph(i){let e,t=Ke(i[0].user_properties),n=[];for(let r=0;r<t.length;r+=1)n[r]=_h(fh(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);R(r,e,s)},p(r,s){if(s[0]&801){t=Ke(r[0].user_properties);let a;for(a=0;a<t.length;a+=1){const l=fh(r,t,a);n[a]?n[a].p(l,s):(n[a]=_h(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&w(e),Tt(n,r)}}}function _h(i){let e,t,n,r,s,a,l,o,u;function f(...p){return i[27](i[35],...p)}function d(){i[28].call(n,i[35])}function h(...p){return i[29](i[35],...p)}function c(){i[30].call(a,i[35])}return{c(){e=Y("div"),t=Y("div"),n=Y("input"),r=le(),s=Y("div"),a=Y("input"),l=le(),this.h()},l(p){e=J(p,"DIV",{class:!0});var _=Te(e);t=J(_,"DIV",{class:!0});var v=Te(t);n=J(v,"INPUT",{placeholder:!0}),v.forEach(w),r=oe(_),s=J(_,"DIV",{class:!0});var D=Te(s);a=J(D,"INPUT",{placeholder:!0}),D.forEach(w),l=oe(_),_.forEach(w),this.h()},h(){te(n,"placeholder","property"),te(t,"class","user-property flex-column"),te(a,"placeholder","value"),te(s,"class","user-value flex-column flex-grow-3"),te(e,"class","user-properties flex")},m(p,_){R(p,e,_),q(e,t),q(t,n),$e(n,i[9][i[35]][0]),q(e,r),q(e,s),q(s,a),$e(a,i[8][i[35]][1]),q(e,l),o||(u=[ge(n,"input",f),ge(n,"input",d),ge(a,"input",h),ge(a,"input",c)],o=!0)},p(p,_){i=p,_[0]&512&&n.value!==i[9][i[35]][0]&&$e(n,i[9][i[35]][0]),_[0]&256&&a.value!==i[8][i[35]][1]&&$e(a,i[8][i[35]][1])},d(p){p&&w(e),o=!1,gt(u)}}}function N3(i){let e=i[4].inProgress,t,n,r,s,a,l,o,u="Defense Action",f,d,h,c,p,_,v,D,U,T,N,g,E,b="+",I,C,O,k=ch(i),B=!i[6]&&hh(i);a=new Un({props:{isVisible:i[2]}}),v=new Bi({props:{node_id:i[3],element_id:i[0].d3f_class,input_color:"#d6eaff",$$slots:{default:[T3,({R:A,filter_value_store:z,select_item:j})=>({36:A,37:z,38:j}),({R:A,filter_value_store:z,select_item:j})=>[0,(A?32:0)|(z?64:0)|(j?128:0)]]},$$scope:{ctx:i}}});let P=i[0].user_properties&&ph(i);return{c(){k.c(),t=le(),n=Y("div"),B&&B.c(),r=le(),s=Y("div"),Re(a.$$.fragment),l=le(),o=Y("i"),o.textContent=u,f=le(),d=Y("input"),h=le(),c=Y("br"),p=le(),_=Y("div"),Re(v.$$.fragment),D=le(),U=Y("div"),T=Y("input"),N=le(),P&&P.c(),g=le(),E=Y("button"),E.textContent=b,this.h()},l(A){k.l(A),t=oe(A),n=J(A,"DIV",{class:!0});var z=Te(n);B&&B.l(z),r=oe(z),s=J(z,"DIV",{class:!0});var j=Te(s);Fe(a.$$.fragment,j),l=oe(j),o=J(j,"I",{"data-svelte-h":!0}),nt(o)!=="svelte-1x9m2lq"&&(o.textContent=u),f=oe(j),d=J(j,"INPUT",{class:!0,type:!0,style:!0}),h=oe(j),c=J(j,"BR",{}),p=oe(j),_=J(j,"DIV",{});var se=Te(_);Fe(v.$$.fragment,se),se.forEach(w),D=oe(j),U=J(j,"DIV",{});var Z=Te(U);T=J(Z,"INPUT",{class:!0,type:!0,style:!0}),N=oe(Z),P&&P.l(Z),g=oe(Z),E=J(Z,"BUTTON",{"data-svelte-h":!0}),nt(E)!=="svelte-y9choq"&&(E.textContent=b),Z.forEach(w),j.forEach(w),z.forEach(w),this.h()},h(){te(d,"class","nodrag sequence"),te(d,"type","text"),bt(d,"background","#d6eaff"),te(T,"class","nodrag label"),te(T,"type","text"),bt(T,"background","#d6eaff"),te(s,"class","node-inner"),te(n,"class","countermeasure node svelte-cdgs6j")},m(A,z){k.m(A,z),R(A,t,z),R(A,n,z),B&&B.m(n,null),q(n,r),q(n,s),Oe(a,s,null),q(s,l),q(s,o),q(s,f),q(s,d),$e(d,i[10]),q(s,h),q(s,c),q(s,p),q(s,_),Oe(v,_,null),q(s,D),q(s,U),q(U,T),$e(T,i[11]),q(U,N),P&&P.m(U,null),q(U,g),q(U,E),I=!0,C||(O=[ge(d,"input",i[23]),ge(d,"input",i[24]),ge(T,"input",i[25]),ge(T,"input",i[26]),ge(E,"click",i[12]),ge(n,"click",i[13]),ge(n,"mouseenter",i[15]),ge(n,"mouseleave",i[16])],C=!0)},p(A,z){z[0]&16&&lt(e,e=A[4].inProgress)?(ht(),ce(k,1,1,xe),dt(),k=ch(A),k.c(),ue(k,1),k.m(t.parentNode,t)):k.p(A,z),A[6]?B&&(ht(),ce(B,1,1,()=>{B=null}),dt()):B?(B.p(A,z),z[0]&64&&ue(B,1)):(B=hh(A),B.c(),ue(B,1),B.m(n,r));const j={};z[0]&4&&(j.isVisible=A[2]),a.$set(j),z[0]&1024&&d.value!==A[10]&&$e(d,A[10]);const se={};z[0]&8&&(se.node_id=A[3]),z[0]&1&&(se.element_id=A[0].d3f_class),z[1]&448&&(se.$$scope={dirty:z,ctx:A}),v.$set(se),z[0]&2048&&T.value!==A[11]&&$e(T,A[11]),A[0].user_properties?P?P.p(A,z):(P=ph(A),P.c(),P.m(U,g)):P&&(P.d(1),P=null)},i(A){I||(ue(k),ue(B),ue(a.$$.fragment,A),ue(v.$$.fragment,A),I=!0)},o(A){ce(k),ce(B),ce(a.$$.fragment,A),ce(v.$$.fragment,A),I=!1},d(A){A&&(w(t),w(n)),k.d(A),B&&B.d(),Be(a),Be(v),P&&P.d(),C=!1,gt(O)}}}function S3(i,e,t){let n,r,s,a,l,o,u;st(i,Tr,G=>t(31,o=G)),st(i,at,G=>t(5,u=G));var f,d,h,c;let{data:p}=e,{isConnectable:_}=e,{selected:v=void 0}=e,{id:D}=e;function U(){T(),p.user_properties.push(["",""])}function T(){for(let G=0;G<o.length;G++)o[G].data==p&&yt(at,u=o[G],u)}const N=En();st(i,N,G=>t(4,l=G));let g=!1,E=!1;function b(){t(7,E=!0)}function I(){t(7,E=!1)}function C(){return l.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function O(){return E?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const k=G=>{t(0,p.sequence=G.currentTarget.value,p),yt(at,u.data.sequence=p.sequence,u)};function B(){r=this.value,t(10,r),t(0,p)}const P=G=>{t(0,p.label=G.currentTarget.value,p),yt(at,u.data.label=p.label,u)};function A(){n=this.value,t(11,n),t(0,p),t(19,f)}const z=(G,H)=>{t(0,p.user_properties[G][0]=H.currentTarget.value,p),yt(at,u.data.user_properties[G][0]=H.currentTarget.value,u)};function j(G){s[G][0]=this.value,t(9,s),t(0,p),t(5,u),t(20,d)}const se=(G,H)=>{t(0,p.user_properties[G][1]=H.currentTarget.value,p),yt(at,u.data.user_properties[G][1]=H.currentTarget.value,u)};function Z(G){a[G][1]=this.value,t(8,a),t(0,p),t(5,u),t(21,h)}return i.$$set=G=>{"data"in G&&t(0,p=G.data),"isConnectable"in G&&t(1,_=G.isConnectable),"selected"in G&&t(2,v=G.selected),"id"in G&&t(3,D=G.id)},i.$$.update=()=>{i.$$.dirty[0]&524289&&t(11,n=t(19,f=p==null?void 0:p.label)!==null&&f!==void 0?f:"< label >"),i.$$.dirty[0]&1&&t(10,r=(p==null?void 0:p.sequence)||"#"),i.$$.dirty[0]&1048609&&t(9,s=(p==null?void 0:p.user_properties)||(t(20,d=u==null?void 0:u.data)===null||d===void 0?void 0:d.user_properties)||"< Property >"),i.$$.dirty[0]&2097185&&t(8,a=(p==null?void 0:p.user_properties)||(t(21,h=u==null?void 0:u.data)===null||h===void 0?void 0:h.user_properties)||"< Value >"),i.$$.dirty[0]&4194328&&t(6,g=(t(22,c=l.toHandle)===null||c===void 0?void 0:c.nodeId)==D)},[p,_,v,D,l,u,g,E,a,s,r,n,U,T,N,b,I,C,O,f,d,h,c,k,B,P,A,z,j,se,Z]}class P3 extends kt{constructor(e){super(),At(this,e,S3,N3,lt,{data:0,isConnectable:1,selected:2,id:3},null,[-1,-1])}}function vh(i,e,t){const n=i.slice();return n[30]=e[t],n[31]=e,n[32]=t,n}function mh(i){let e,t;return e=new Et({props:{type:"target",class:"customHandle",position:_t.Left,id:"target",style:i[15](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r[0]&2&&(s.isConnectable=n[1]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function gh(i){let e=i[6],t,n,r=bh(i);return{c(){r.c(),t=Ie()},l(s){r.l(s),t=Ie()},m(s,a){r.m(s,a),R(s,t,a),n=!0},p(s,a){a[0]&64&&lt(e,e=s[6])?(ht(),ce(r,1,1,xe),dt(),r=bh(s),r.c(),ue(r,1),r.m(t.parentNode,t)):r.p(s,a)},i(s){n||(ue(r),n=!0)},o(s){ce(r),n=!1},d(s){s&&w(t),r.d(s)}}}function bh(i){let e,t,n,r,s,a,l,o;return e=new Et({props:{type:"source",position:_t.Top,id:"source",style:i[16](),isConnectable:i[1]}}),n=new Et({props:{type:"source",position:_t.Left,id:"source",style:i[16](),isConnectable:i[1]}}),s=new Et({props:{type:"source",position:_t.Right,id:"source",style:i[16](),isConnectable:i[1]}}),l=new Et({props:{type:"source",position:_t.Bottom,id:"source",style:i[16](),isConnectable:i[1]}}),{c(){Re(e.$$.fragment),t=le(),Re(n.$$.fragment),r=le(),Re(s.$$.fragment),a=le(),Re(l.$$.fragment)},l(u){Fe(e.$$.fragment,u),t=oe(u),Fe(n.$$.fragment,u),r=oe(u),Fe(s.$$.fragment,u),a=oe(u),Fe(l.$$.fragment,u)},m(u,f){Oe(e,u,f),R(u,t,f),Oe(n,u,f),R(u,r,f),Oe(s,u,f),R(u,a,f),Oe(l,u,f),o=!0},p(u,f){const d={};f[0]&2&&(d.isConnectable=u[1]),e.$set(d);const h={};f[0]&2&&(h.isConnectable=u[1]),n.$set(h);const c={};f[0]&2&&(c.isConnectable=u[1]),s.$set(c);const p={};f[0]&2&&(p.isConnectable=u[1]),l.$set(p)},i(u){o||(ue(e.$$.fragment,u),ue(n.$$.fragment,u),ue(s.$$.fragment,u),ue(l.$$.fragment,u),o=!0)},o(u){ce(e.$$.fragment,u),ce(n.$$.fragment,u),ce(s.$$.fragment,u),ce(l.$$.fragment,u),o=!1},d(u){u&&(w(t),w(r),w(a)),Be(e,u),Be(n,u),Be(s,u),Be(l,u)}}}function yh(i){let e,t=Ke(i[0].user_properties),n=[];for(let r=0;r<t.length;r+=1)n[r]=wh(vh(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);R(r,e,s)},p(r,s){if(s[0]&401){t=Ke(r[0].user_properties);let a;for(a=0;a<t.length;a+=1){const l=vh(r,t,a);n[a]?n[a].p(l,s):(n[a]=wh(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&w(e),Tt(n,r)}}}function wh(i){let e,t,n,r,s,a,l,o,u;function f(...p){return i[24](i[32],...p)}function d(){i[25].call(n,i[32])}function h(...p){return i[26](i[32],...p)}function c(){i[27].call(a,i[32])}return{c(){e=Y("div"),t=Y("div"),n=Y("input"),r=le(),s=Y("div"),a=Y("input"),l=le(),this.h()},l(p){e=J(p,"DIV",{class:!0});var _=Te(e);t=J(_,"DIV",{class:!0});var v=Te(t);n=J(v,"INPUT",{placeholder:!0}),v.forEach(w),r=oe(_),s=J(_,"DIV",{class:!0});var D=Te(s);a=J(D,"INPUT",{placeholder:!0}),D.forEach(w),l=oe(_),_.forEach(w),this.h()},h(){te(n,"placeholder","property"),te(t,"class","user-property flex-column"),te(a,"placeholder","value"),te(s,"class","user-value flex-column flex-grow-3"),te(e,"class","user-properties flex")},m(p,_){R(p,e,_),q(e,t),q(t,n),$e(n,i[8][i[32]][0]),q(e,r),q(e,s),q(s,a),$e(a,i[7][i[32]][1]),q(e,l),o||(u=[ge(n,"input",f),ge(n,"input",d),ge(a,"input",h),ge(a,"input",c)],o=!0)},p(p,_){i=p,_[0]&256&&n.value!==i[8][i[32]][0]&&$e(n,i[8][i[32]][0]),_[0]&128&&a.value!==i[7][i[32]][1]&&$e(a,i[7][i[32]][1])},d(p){p&&w(e),o=!1,gt(u)}}}function I3(i){let e=i[3].inProgress,t,n,r,s,a,l="Information",o,u,f,d,h,c,p,_,v="+",D,U,T,N=mh(i),g=!i[5]&&gh(i);f=new Un({props:{isVisible:i[2]}});let E=i[0].user_properties&&yh(i);return{c(){N.c(),t=le(),n=Y("div"),g&&g.c(),r=le(),s=Y("div"),a=Y("i"),a.textContent=l,o=Y("br"),u=le(),Re(f.$$.fragment),d=le(),h=Y("input"),c=le(),E&&E.c(),p=le(),_=Y("button"),_.textContent=v,this.h()},l(b){N.l(b),t=oe(b),n=J(b,"DIV",{class:!0});var I=Te(n);g&&g.l(I),r=oe(I),s=J(I,"DIV",{class:!0});var C=Te(s);a=J(C,"I",{"data-svelte-h":!0}),nt(a)!=="svelte-1ocpiyk"&&(a.textContent=l),o=J(C,"BR",{}),u=oe(C),Fe(f.$$.fragment,C),d=oe(C),h=J(C,"INPUT",{class:!0,type:!0,style:!0}),c=oe(C),E&&E.l(C),p=oe(C),_=J(C,"BUTTON",{"data-svelte-h":!0}),nt(_)!=="svelte-y9choq"&&(_.textContent=v),C.forEach(w),I.forEach(w),this.h()},h(){te(h,"class","nodrag label"),te(h,"type","text"),bt(h,"background","#e8f4ea"),te(s,"class","information node-inner svelte-1wgy9qw"),te(n,"class","information node svelte-1wgy9qw")},m(b,I){N.m(b,I),R(b,t,I),R(b,n,I),g&&g.m(n,null),q(n,r),q(n,s),q(s,a),q(s,o),q(s,u),Oe(f,s,null),q(s,d),q(s,h),$e(h,i[9]),q(s,c),E&&E.m(s,null),q(s,p),q(s,_),D=!0,U||(T=[ge(h,"input",i[22]),ge(h,"input",i[23]),ge(_,"click",i[10]),ge(n,"click",i[11]),ge(n,"mouseenter",i[13]),ge(n,"mouseleave",i[14])],U=!0)},p(b,I){I[0]&8&&lt(e,e=b[3].inProgress)?(ht(),ce(N,1,1,xe),dt(),N=mh(b),N.c(),ue(N,1),N.m(t.parentNode,t)):N.p(b,I),b[5]?g&&(ht(),ce(g,1,1,()=>{g=null}),dt()):g?(g.p(b,I),I[0]&32&&ue(g,1)):(g=gh(b),g.c(),ue(g,1),g.m(n,r));const C={};I[0]&4&&(C.isVisible=b[2]),f.$set(C),I[0]&512&&h.value!==b[9]&&$e(h,b[9]),b[0].user_properties?E?E.p(b,I):(E=yh(b),E.c(),E.m(s,p)):E&&(E.d(1),E=null)},i(b){D||(ue(N),ue(g),ue(f.$$.fragment,b),D=!0)},o(b){ce(N),ce(g),ce(f.$$.fragment,b),D=!1},d(b){b&&(w(t),w(n)),N.d(b),g&&g.d(),Be(f),E&&E.d(),U=!1,gt(T)}}}function R3(i,e,t){let n,r,s,a,l,o;st(i,Tr,j=>t(28,l=j)),st(i,at,j=>t(4,o=j));var u,f,d,h;let{data:c}=e,{isConnectable:p}=e,{selected:_=void 0}=e;function v(){D(),c.user_properties.push(["",""])}function D(){for(let j=0;j<l.length;j++)l[j].data==c&&yt(at,o=l[j],o)}let{id:U}=e;const T=En();st(i,T,j=>t(3,a=j));let N=!1,g=!1;function E(){t(6,g=!0)}function b(){t(6,g=!1)}function I(){return a.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function C(){return g?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const O=j=>{t(0,c.label=j.currentTarget.value,c),yt(at,o.data.label=c.label,o)};function k(){n=this.value,t(9,n),t(0,c),t(4,o),t(18,u)}const B=(j,se)=>{t(0,c.user_properties[j][0]=se.currentTarget.value,c),yt(at,o.data.user_properties[j][0]=se.currentTarget.value,o)};function P(j){r[j][0]=this.value,t(8,r),t(0,c),t(4,o),t(19,f)}const A=(j,se)=>{t(0,c.user_properties[j][1]=se.currentTarget.value,c),yt(at,o.data.user_properties[j][1]=se.currentTarget.value,o)};function z(j){s[j][1]=this.value,t(7,s),t(0,c),t(4,o),t(20,d)}return i.$$set=j=>{"data"in j&&t(0,c=j.data),"isConnectable"in j&&t(1,p=j.isConnectable),"selected"in j&&t(2,_=j.selected),"id"in j&&t(17,U=j.id)},i.$$.update=()=>{i.$$.dirty[0]&262161&&t(9,n=(c==null?void 0:c.label)||(t(18,u=o==null?void 0:o.data)===null||u===void 0?void 0:u.label)||"< label >"),i.$$.dirty[0]&524305&&t(8,r=(c==null?void 0:c.user_properties)||(t(19,f=o==null?void 0:o.data)===null||f===void 0?void 0:f.user_properties)||"< Property >"),i.$$.dirty[0]&1048593&&t(7,s=(c==null?void 0:c.user_properties)||(t(20,d=o==null?void 0:o.data)===null||d===void 0?void 0:d.user_properties)||"< Value >"),i.$$.dirty[0]&2228232&&t(5,N=(t(21,h=a.toHandle)===null||h===void 0?void 0:h.nodeId)==U)},[c,p,_,a,o,N,g,s,r,n,v,D,T,E,b,I,C,U,u,f,d,h,O,k,B,P,A,z]}class F3 extends kt{constructor(e){super(),At(this,e,R3,I3,lt,{data:0,isConnectable:1,selected:2,id:17},null,[-1,-1])}}function Eh(i,e,t){const n=i.slice();return n[30]=e[t],n[31]=e,n[32]=t,n}function Dh(i){let e,t;return e=new Et({props:{type:"target",class:"customHandle",position:_t.Left,id:"target",style:i[13](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r[0]&2&&(s.isConnectable=n[1]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function kh(i){let e=i[6],t,n,r=Ah(i);return{c(){r.c(),t=Ie()},l(s){r.l(s),t=Ie()},m(s,a){r.m(s,a),R(s,t,a),n=!0},p(s,a){a[0]&64&&lt(e,e=s[6])?(ht(),ce(r,1,1,xe),dt(),r=Ah(s),r.c(),ue(r,1),r.m(t.parentNode,t)):r.p(s,a)},i(s){n||(ue(r),n=!0)},o(s){ce(r),n=!1},d(s){s&&w(t),r.d(s)}}}function Ah(i){let e,t,n,r,s,a,l,o;return e=new Et({props:{type:"source",position:_t.Top,id:"source",style:i[14](),isConnectable:i[1]}}),n=new Et({props:{type:"source",position:_t.Left,id:"source",style:i[14](),isConnectable:i[1]}}),s=new Et({props:{type:"source",position:_t.Right,id:"source",style:i[14](),isConnectable:i[1]}}),l=new Et({props:{type:"source",position:_t.Bottom,id:"source",style:i[14](),isConnectable:i[1]}}),{c(){Re(e.$$.fragment),t=le(),Re(n.$$.fragment),r=le(),Re(s.$$.fragment),a=le(),Re(l.$$.fragment)},l(u){Fe(e.$$.fragment,u),t=oe(u),Fe(n.$$.fragment,u),r=oe(u),Fe(s.$$.fragment,u),a=oe(u),Fe(l.$$.fragment,u)},m(u,f){Oe(e,u,f),R(u,t,f),Oe(n,u,f),R(u,r,f),Oe(s,u,f),R(u,a,f),Oe(l,u,f),o=!0},p(u,f){const d={};f[0]&2&&(d.isConnectable=u[1]),e.$set(d);const h={};f[0]&2&&(h.isConnectable=u[1]),n.$set(h);const c={};f[0]&2&&(c.isConnectable=u[1]),s.$set(c);const p={};f[0]&2&&(p.isConnectable=u[1]),l.$set(p)},i(u){o||(ue(e.$$.fragment,u),ue(n.$$.fragment,u),ue(s.$$.fragment,u),ue(l.$$.fragment,u),o=!0)},o(u){ce(e.$$.fragment,u),ce(n.$$.fragment,u),ce(s.$$.fragment,u),ce(l.$$.fragment,u),o=!1},d(u){u&&(w(t),w(r),w(a)),Be(e,u),Be(n,u),Be(s,u),Be(l,u)}}}function Ch(i){let e,t=Ke(i[0].user_properties),n=[];for(let r=0;r<t.length;r+=1)n[r]=Th(Eh(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);R(r,e,s)},p(r,s){if(s[0]&393){t=Ke(r[0].user_properties);let a;for(a=0;a<t.length;a+=1){const l=Eh(r,t,a);n[a]?n[a].p(l,s):(n[a]=Th(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&w(e),Tt(n,r)}}}function Th(i){let e,t,n,r,s,a,l,o,u;function f(...p){return i[24](i[32],...p)}function d(){i[25].call(n,i[32])}function h(...p){return i[26](i[32],...p)}function c(){i[27].call(a,i[32])}return{c(){e=Y("div"),t=Y("div"),n=Y("input"),r=le(),s=Y("div"),a=Y("input"),l=le(),this.h()},l(p){e=J(p,"DIV",{class:!0});var _=Te(e);t=J(_,"DIV",{class:!0});var v=Te(t);n=J(v,"INPUT",{placeholder:!0}),v.forEach(w),r=oe(_),s=J(_,"DIV",{class:!0});var D=Te(s);a=J(D,"INPUT",{placeholder:!0}),D.forEach(w),l=oe(_),_.forEach(w),this.h()},h(){te(n,"placeholder","property"),te(t,"class","user-property flex-column"),te(a,"placeholder","value"),te(s,"class","user-value flex-column flex-grow-3"),te(e,"class","user-properties flex")},m(p,_){R(p,e,_),q(e,t),q(t,n),$e(n,i[8][i[32]][0]),q(e,r),q(e,s),q(s,a),$e(a,i[7][i[32]][1]),q(e,l),o||(u=[ge(n,"input",f),ge(n,"input",d),ge(a,"input",h),ge(a,"input",c)],o=!0)},p(p,_){i=p,_[0]&256&&n.value!==i[8][i[32]][0]&&$e(n,i[8][i[32]][0]),_[0]&128&&a.value!==i[7][i[32]][1]&&$e(a,i[7][i[32]][1])},d(p){p&&w(e),o=!1,gt(u)}}}function O3(i){let e=i[4].inProgress,t,n,r,s,a,l,o,u="Condition",f,d,h,c,p,_,v="+",D,U,T,N=Dh(i),g=!i[5]&&kh(i);a=new Un({props:{isVisible:i[2]}});let E=i[0].user_properties&&Ch(i);return{c(){N.c(),t=le(),n=Y("div"),g&&g.c(),r=le(),s=Y("div"),Re(a.$$.fragment),l=le(),o=Y("i"),o.textContent=u,f=Y("br"),d=le(),h=Y("input"),c=le(),E&&E.c(),p=le(),_=Y("button"),_.textContent=v,this.h()},l(b){N.l(b),t=oe(b),n=J(b,"DIV",{class:!0});var I=Te(n);g&&g.l(I),r=oe(I),s=J(I,"DIV",{class:!0});var C=Te(s);Fe(a.$$.fragment,C),l=oe(C),o=J(C,"I",{"data-svelte-h":!0}),nt(o)!=="svelte-26somz"&&(o.textContent=u),f=J(C,"BR",{}),d=oe(C),h=J(C,"INPUT",{class:!0,type:!0,style:!0}),c=oe(C),E&&E.l(C),p=oe(C),_=J(C,"BUTTON",{"data-svelte-h":!0}),nt(_)!=="svelte-y9choq"&&(_.textContent=v),C.forEach(w),I.forEach(w),this.h()},h(){te(h,"class","nodrag label"),te(h,"type","text"),bt(h,"background","#ece6ff"),te(s,"class","condition node-inner svelte-d75hej"),te(n,"class","condition node svelte-d75hej")},m(b,I){N.m(b,I),R(b,t,I),R(b,n,I),g&&g.m(n,null),q(n,r),q(n,s),Oe(a,s,null),q(s,l),q(s,o),q(s,f),q(s,d),q(s,h),$e(h,i[9]),q(s,c),E&&E.m(s,null),q(s,p),q(s,_),D=!0,U||(T=[ge(h,"input",i[22]),ge(h,"input",i[23]),ge(_,"click",i[15]),ge(n,"click",i[16]),ge(n,"mouseenter",i[11]),ge(n,"mouseleave",i[12])],U=!0)},p(b,I){I[0]&16&&lt(e,e=b[4].inProgress)?(ht(),ce(N,1,1,xe),dt(),N=Dh(b),N.c(),ue(N,1),N.m(t.parentNode,t)):N.p(b,I),b[5]?g&&(ht(),ce(g,1,1,()=>{g=null}),dt()):g?(g.p(b,I),I[0]&32&&ue(g,1)):(g=kh(b),g.c(),ue(g,1),g.m(n,r));const C={};I[0]&4&&(C.isVisible=b[2]),a.$set(C),I[0]&512&&h.value!==b[9]&&$e(h,b[9]),b[0].user_properties?E?E.p(b,I):(E=Ch(b),E.c(),E.m(s,p)):E&&(E.d(1),E=null)},i(b){D||(ue(N),ue(g),ue(a.$$.fragment,b),D=!0)},o(b){ce(N),ce(g),ce(a.$$.fragment,b),D=!1},d(b){b&&(w(t),w(n)),N.d(b),g&&g.d(),Be(a),E&&E.d(),U=!1,gt(T)}}}function B3(i,e,t){let n,r,s,a,l,o;st(i,Tr,j=>t(28,a=j)),st(i,at,j=>t(3,l=j));var u,f,d,h;let{data:c}=e,{isConnectable:p}=e,{selected:_=void 0}=e,{id:v}=e;const D=En();st(i,D,j=>t(4,o=j));let U=!1,T=!1;function N(){t(6,T=!0)}function g(){t(6,T=!1)}function E(){return o.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function b(){return T?"z-index: 2;":"visibility:hidden; pointer-events: none;"}function I(){C(),c.user_properties.push(["",""])}function C(){for(let j=0;j<a.length;j++)a[j].data==c&&yt(at,l=a[j],l)}const O=j=>{t(0,c.label=j.currentTarget.value,c),yt(at,l.data.label=c.label,l)};function k(){n=this.value,t(9,n),t(0,c),t(3,l),t(19,f)}const B=(j,se)=>{t(0,c.user_properties[j][0]=se.currentTarget.value,c),yt(at,l.data.user_properties[j][0]=se.currentTarget.value,l)};function P(j){r[j][0]=this.value,t(8,r),t(0,c),t(3,l),t(20,d)}const A=(j,se)=>{t(0,c.user_properties[j][1]=se.currentTarget.value,c),yt(at,l.data.user_properties[j][1]=se.currentTarget.value,l)};function z(j){s[j][1]=this.value,t(7,s),t(0,c),t(3,l),t(21,h)}return i.$$set=j=>{"data"in j&&t(0,c=j.data),"isConnectable"in j&&t(1,p=j.isConnectable),"selected"in j&&t(2,_=j.selected),"id"in j&&t(17,v=j.id)},i.$$.update=()=>{i.$$.dirty[0]&393232&&t(5,U=(t(18,u=o.toHandle)===null||u===void 0?void 0:u.nodeId)==v),i.$$.dirty[0]&524297&&t(9,n=(c==null?void 0:c.label)||(t(19,f=l==null?void 0:l.data)===null||f===void 0?void 0:f.label)||"< label >"),i.$$.dirty[0]&1048585&&t(8,r=(c==null?void 0:c.user_properties)||(t(20,d=l==null?void 0:l.data)===null||d===void 0?void 0:d.user_properties)||"< Property >"),i.$$.dirty[0]&2097161&&t(7,s=(c==null?void 0:c.user_properties)||(t(21,h=l==null?void 0:l.data)===null||h===void 0?void 0:h.user_properties)||"< Value >")},[c,p,_,l,o,U,T,s,r,n,D,N,g,E,b,I,C,v,u,f,d,h,O,k,B,P,A,z]}class L3 extends kt{constructor(e){super(),At(this,e,B3,O3,lt,{data:0,isConnectable:1,selected:2,id:17},null,[-1,-1])}}function Nh(i,e,t){const n=i.slice();return n[30]=e[t],n[31]=e,n[32]=t,n}function Sh(i){let e,t;return e=new Et({props:{type:"target",class:"customHandle",position:_t.Left,id:"target",style:i[15](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r[0]&2&&(s.isConnectable=n[1]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function Ph(i){let e=i[6],t,n,r=Ih(i);return{c(){r.c(),t=Ie()},l(s){r.l(s),t=Ie()},m(s,a){r.m(s,a),R(s,t,a),n=!0},p(s,a){a[0]&64&&lt(e,e=s[6])?(ht(),ce(r,1,1,xe),dt(),r=Ih(s),r.c(),ue(r,1),r.m(t.parentNode,t)):r.p(s,a)},i(s){n||(ue(r),n=!0)},o(s){ce(r),n=!1},d(s){s&&w(t),r.d(s)}}}function Ih(i){let e,t,n,r,s,a,l,o;return e=new Et({props:{type:"source",position:_t.Top,id:"source",style:i[16](),isConnectable:i[1]}}),n=new Et({props:{type:"source",position:_t.Left,id:"source",style:i[16](),isConnectable:i[1]}}),s=new Et({props:{type:"source",position:_t.Right,id:"source",style:i[16](),isConnectable:i[1]}}),l=new Et({props:{type:"source",position:_t.Bottom,id:"source",style:i[16](),isConnectable:i[1]}}),{c(){Re(e.$$.fragment),t=le(),Re(n.$$.fragment),r=le(),Re(s.$$.fragment),a=le(),Re(l.$$.fragment)},l(u){Fe(e.$$.fragment,u),t=oe(u),Fe(n.$$.fragment,u),r=oe(u),Fe(s.$$.fragment,u),a=oe(u),Fe(l.$$.fragment,u)},m(u,f){Oe(e,u,f),R(u,t,f),Oe(n,u,f),R(u,r,f),Oe(s,u,f),R(u,a,f),Oe(l,u,f),o=!0},p(u,f){const d={};f[0]&2&&(d.isConnectable=u[1]),e.$set(d);const h={};f[0]&2&&(h.isConnectable=u[1]),n.$set(h);const c={};f[0]&2&&(c.isConnectable=u[1]),s.$set(c);const p={};f[0]&2&&(p.isConnectable=u[1]),l.$set(p)},i(u){o||(ue(e.$$.fragment,u),ue(n.$$.fragment,u),ue(s.$$.fragment,u),ue(l.$$.fragment,u),o=!0)},o(u){ce(e.$$.fragment,u),ce(n.$$.fragment,u),ce(s.$$.fragment,u),ce(l.$$.fragment,u),o=!1},d(u){u&&(w(t),w(r),w(a)),Be(e,u),Be(n,u),Be(s,u),Be(l,u)}}}function Rh(i){let e,t=Ke(i[0].user_properties),n=[];for(let r=0;r<t.length;r+=1)n[r]=Fh(Nh(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);R(r,e,s)},p(r,s){if(s[0]&401){t=Ke(r[0].user_properties);let a;for(a=0;a<t.length;a+=1){const l=Nh(r,t,a);n[a]?n[a].p(l,s):(n[a]=Fh(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&w(e),Tt(n,r)}}}function Fh(i){let e,t,n,r,s,a,l,o,u;function f(...p){return i[24](i[32],...p)}function d(){i[25].call(n,i[32])}function h(...p){return i[26](i[32],...p)}function c(){i[27].call(a,i[32])}return{c(){e=Y("div"),t=Y("div"),n=Y("input"),r=le(),s=Y("div"),a=Y("input"),l=le(),this.h()},l(p){e=J(p,"DIV",{class:!0});var _=Te(e);t=J(_,"DIV",{class:!0});var v=Te(t);n=J(v,"INPUT",{placeholder:!0}),v.forEach(w),r=oe(_),s=J(_,"DIV",{class:!0});var D=Te(s);a=J(D,"INPUT",{placeholder:!0}),D.forEach(w),l=oe(_),_.forEach(w),this.h()},h(){te(n,"placeholder","property"),te(t,"class","user-property flex-column"),te(a,"placeholder","value"),te(s,"class","user-value flex-column flex-grow-3"),te(e,"class","user-properties flex")},m(p,_){R(p,e,_),q(e,t),q(t,n),$e(n,i[8][i[32]][0]),q(e,r),q(e,s),q(s,a),$e(a,i[7][i[32]][1]),q(e,l),o||(u=[ge(n,"input",f),ge(n,"input",d),ge(a,"input",h),ge(a,"input",c)],o=!0)},p(p,_){i=p,_[0]&256&&n.value!==i[8][i[32]][0]&&$e(n,i[8][i[32]][0]),_[0]&128&&a.value!==i[7][i[32]][1]&&$e(a,i[7][i[32]][1])},d(p){p&&w(e),o=!1,gt(u)}}}function U3(i){let e=i[3].inProgress,t,n,r,s,a,l="Agent",o,u,f,d,h,c,p,_,v,D="+",U,T,N,g=Sh(i),E=!i[5]&&Ph(i);f=new Un({props:{isVisible:i[2]}});let b=i[0].user_properties&&Rh(i);return{c(){g.c(),t=le(),n=Y("div"),E&&E.c(),r=le(),s=Y("div"),a=Y("i"),a.textContent=l,o=Y("br"),u=le(),Re(f.$$.fragment),d=le(),h=Y("input"),c=Y("br"),p=le(),b&&b.c(),_=le(),v=Y("button"),v.textContent=D,this.h()},l(I){g.l(I),t=oe(I),n=J(I,"DIV",{class:!0});var C=Te(n);E&&E.l(C),r=oe(C),s=J(C,"DIV",{class:!0});var O=Te(s);a=J(O,"I",{"data-svelte-h":!0}),nt(a)!=="svelte-13s1fb"&&(a.textContent=l),o=J(O,"BR",{}),u=oe(O),Fe(f.$$.fragment,O),d=oe(O),h=J(O,"INPUT",{class:!0,type:!0,style:!0}),c=J(O,"BR",{}),p=oe(O),b&&b.l(O),_=oe(O),v=J(O,"BUTTON",{"data-svelte-h":!0}),nt(v)!=="svelte-y9choq"&&(v.textContent=D),O.forEach(w),C.forEach(w),this.h()},h(){te(h,"class","nodrag label"),te(h,"type","text"),bt(h,"background","#f0e6e6"),te(s,"class","agent-inner node-inner"),te(n,"class","agent node svelte-n06ybh")},m(I,C){g.m(I,C),R(I,t,C),R(I,n,C),E&&E.m(n,null),q(n,r),q(n,s),q(s,a),q(s,o),q(s,u),Oe(f,s,null),q(s,d),q(s,h),$e(h,i[9]),q(s,c),q(s,p),b&&b.m(s,null),q(s,_),q(s,v),U=!0,T||(N=[ge(h,"input",i[22]),ge(h,"input",i[23]),ge(v,"click",i[10]),ge(n,"click",i[11]),ge(n,"mouseenter",i[13]),ge(n,"mouseleave",i[14])],T=!0)},p(I,C){C[0]&8&&lt(e,e=I[3].inProgress)?(ht(),ce(g,1,1,xe),dt(),g=Sh(I),g.c(),ue(g,1),g.m(t.parentNode,t)):g.p(I,C),I[5]?E&&(ht(),ce(E,1,1,()=>{E=null}),dt()):E?(E.p(I,C),C[0]&32&&ue(E,1)):(E=Ph(I),E.c(),ue(E,1),E.m(n,r));const O={};C[0]&4&&(O.isVisible=I[2]),f.$set(O),C[0]&512&&h.value!==I[9]&&$e(h,I[9]),I[0].user_properties?b?b.p(I,C):(b=Rh(I),b.c(),b.m(s,_)):b&&(b.d(1),b=null)},i(I){U||(ue(g),ue(E),ue(f.$$.fragment,I),U=!0)},o(I){ce(g),ce(E),ce(f.$$.fragment,I),U=!1},d(I){I&&(w(t),w(n)),g.d(I),E&&E.d(),Be(f),b&&b.d(),T=!1,gt(N)}}}function j3(i,e,t){let n,r,s,a,l,o;st(i,Tr,j=>t(28,l=j)),st(i,at,j=>t(4,o=j));var u,f,d,h;let{data:c}=e,{isConnectable:p}=e,{selected:_=void 0}=e,{id:v}=e;function D(){U(),c.user_properties.push(["",""])}function U(){for(let j=0;j<l.length;j++)l[j].data==c&&yt(at,o=l[j],o)}const T=En();st(i,T,j=>t(3,a=j));let N=!1,g=!1;function E(){t(6,g=!0)}function b(){t(6,g=!1)}function I(){return a.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function C(){return g?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const O=j=>{t(0,c.label=j.currentTarget.value,c),yt(at,o.data.label=c.label,o)};function k(){n=this.value,t(9,n),t(0,c),t(4,o),t(18,u)}const B=(j,se)=>{t(0,c.user_properties[j][0]=se.currentTarget.value,c),yt(at,o.data.user_properties[j][0]=se.currentTarget.value,o)};function P(j){r[j][0]=this.value,t(8,r),t(0,c),t(4,o),t(19,f)}const A=(j,se)=>{t(0,c.user_properties[j][1]=se.currentTarget.value,c),yt(at,o.data.user_properties[j][1]=se.currentTarget.value,o)};function z(j){s[j][1]=this.value,t(7,s),t(0,c),t(4,o),t(20,d)}return i.$$set=j=>{"data"in j&&t(0,c=j.data),"isConnectable"in j&&t(1,p=j.isConnectable),"selected"in j&&t(2,_=j.selected),"id"in j&&t(17,v=j.id)},i.$$.update=()=>{i.$$.dirty[0]&262161&&t(9,n=(c==null?void 0:c.label)||(t(18,u=o==null?void 0:o.data)===null||u===void 0?void 0:u.label)||"< label >"),i.$$.dirty[0]&524305&&t(8,r=(c==null?void 0:c.user_properties)||(t(19,f=o==null?void 0:o.data)===null||f===void 0?void 0:f.user_properties)),i.$$.dirty[0]&1048593&&t(7,s=(c==null?void 0:c.user_properties)||(t(20,d=o==null?void 0:o.data)===null||d===void 0?void 0:d.user_properties)),i.$$.dirty[0]&2228232&&t(5,N=(t(21,h=a.toHandle)===null||h===void 0?void 0:h.nodeId)==v)},[c,p,_,a,o,N,g,s,r,n,D,U,T,E,b,I,C,v,u,f,d,h,O,k,B,P,A,z]}class q3 extends kt{constructor(e){super(),At(this,e,j3,U3,lt,{data:0,isConnectable:1,selected:2,id:17},null,[-1,-1])}}function Oh(i,e,t){const n=i.slice();return n[31]=e[t],n[32]=e,n[33]=t,n}function Bh(i){let e,t;return e=new Et({props:{type:"target",class:"customHandle",position:_t.Left,id:"target",style:i[17](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r[0]&2&&(s.isConnectable=n[1]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function Lh(i){let e=i[8],t,n,r=Uh(i);return{c(){r.c(),t=Ie()},l(s){r.l(s),t=Ie()},m(s,a){r.m(s,a),R(s,t,a),n=!0},p(s,a){a[0]&256&&lt(e,e=s[8])?(ht(),ce(r,1,1,xe),dt(),r=Uh(s),r.c(),ue(r,1),r.m(t.parentNode,t)):r.p(s,a)},i(s){n||(ue(r),n=!0)},o(s){ce(r),n=!1},d(s){s&&w(t),r.d(s)}}}function Uh(i){let e,t,n,r,s,a,l,o;return e=new Et({props:{type:"source",position:_t.Top,id:"source",style:i[18](),isConnectable:i[1]}}),n=new Et({props:{type:"source",position:_t.Left,id:"source",style:i[18](),isConnectable:i[1]}}),s=new Et({props:{type:"source",position:_t.Right,id:"source",style:i[18](),isConnectable:i[1]}}),l=new Et({props:{type:"source",position:_t.Bottom,id:"source",style:i[18](),isConnectable:i[1]}}),{c(){Re(e.$$.fragment),t=le(),Re(n.$$.fragment),r=le(),Re(s.$$.fragment),a=le(),Re(l.$$.fragment)},l(u){Fe(e.$$.fragment,u),t=oe(u),Fe(n.$$.fragment,u),r=oe(u),Fe(s.$$.fragment,u),a=oe(u),Fe(l.$$.fragment,u)},m(u,f){Oe(e,u,f),R(u,t,f),Oe(n,u,f),R(u,r,f),Oe(s,u,f),R(u,a,f),Oe(l,u,f),o=!0},p(u,f){const d={};f[0]&2&&(d.isConnectable=u[1]),e.$set(d);const h={};f[0]&2&&(h.isConnectable=u[1]),n.$set(h);const c={};f[0]&2&&(c.isConnectable=u[1]),s.$set(c);const p={};f[0]&2&&(p.isConnectable=u[1]),l.$set(p)},i(u){o||(ue(e.$$.fragment,u),ue(n.$$.fragment,u),ue(s.$$.fragment,u),ue(l.$$.fragment,u),o=!0)},o(u){ce(e.$$.fragment,u),ce(n.$$.fragment,u),ce(s.$$.fragment,u),ce(l.$$.fragment,u),o=!1},d(u){u&&(w(t),w(r),w(a)),Be(e,u),Be(n,u),Be(s,u),Be(l,u)}}}function M3(i){let e,t;return e=new i[34].ItemTree({props:{list:sd,filter_value_store:i[35],select_item:i[36]}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r[1]&16&&(s.filter_value_store=n[35]),r[1]&32&&(s.select_item=n[36]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function jh(i){let e,t=Ke(i[0].user_properties),n=[];for(let r=0;r<t.length;r+=1)n[r]=qh(Oh(i,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);R(r,e,s)},p(r,s){if(s[0]&1601){t=Ke(r[0].user_properties);let a;for(a=0;a<t.length;a+=1){const l=Oh(r,t,a);n[a]?n[a].p(l,s):(n[a]=qh(l),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&w(e),Tt(n,r)}}}function qh(i){let e,t,n,r,s,a,l,o,u;function f(...p){return i[26](i[33],...p)}function d(){i[27].call(n,i[33])}function h(...p){return i[28](i[33],...p)}function c(){i[29].call(a,i[33])}return{c(){e=Y("div"),t=Y("div"),n=Y("input"),r=le(),s=Y("div"),a=Y("input"),l=le(),this.h()},l(p){e=J(p,"DIV",{class:!0});var _=Te(e);t=J(_,"DIV",{class:!0});var v=Te(t);n=J(v,"INPUT",{placeholder:!0}),v.forEach(w),r=oe(_),s=J(_,"DIV",{class:!0});var D=Te(s);a=J(D,"INPUT",{placeholder:!0}),D.forEach(w),l=oe(_),_.forEach(w),this.h()},h(){te(n,"placeholder","property"),te(t,"class","user-property flex-column"),te(a,"placeholder","value"),te(s,"class","user-value flex-column flex-grow-3"),te(e,"class","user-properties flex")},m(p,_){R(p,e,_),q(e,t),q(t,n),$e(n,i[10][i[33]][0]),q(e,r),q(e,s),q(s,a),$e(a,i[9][i[33]][1]),q(e,l),o||(u=[ge(n,"input",f),ge(n,"input",d),ge(a,"input",h),ge(a,"input",c)],o=!0)},p(p,_){i=p,_[0]&1024&&n.value!==i[10][i[33]][0]&&$e(n,i[10][i[33]][0]),_[0]&512&&a.value!==i[9][i[33]][1]&&$e(a,i[9][i[33]][1])},d(p){p&&w(e),o=!1,gt(u)}}}function x3(i){let e=i[5].inProgress,t,n,r,s,a,l,o,u,f,d,h,c,p,_,v,D,U,T,N="+",g,E,b,I=Bh(i),C=!i[7]&&Lh(i);a=new Un({props:{isVisible:i[4]}}),p=new Bi({props:{node_id:i[2],element_id:i[0].d3f_class,input_color:"white",$$slots:{default:[M3,({R:k,filter_value_store:B,select_item:P})=>({34:k,35:B,36:P}),({R:k,filter_value_store:B,select_item:P})=>[0,(k?8:0)|(B?16:0)|(P?32:0)]]},$$scope:{ctx:i}}});let O=i[0].user_properties&&jh(i);return{c(){I.c(),t=le(),n=Y("div"),C&&C.c(),r=le(),s=Y("div"),Re(a.$$.fragment),l=le(),o=Y("i"),u=x(i[3]),f=Y("br"),d=le(),h=Y("br"),c=le(),Re(p.$$.fragment),_=le(),v=Y("input"),D=le(),O&&O.c(),U=le(),T=Y("button"),T.textContent=N,this.h()},l(k){I.l(k),t=oe(k),n=J(k,"DIV",{class:!0});var B=Te(n);C&&C.l(B),r=oe(B),s=J(B,"DIV",{class:!0});var P=Te(s);Fe(a.$$.fragment,P),l=oe(P),o=J(P,"I",{});var A=Te(o);u=V(A,i[3]),A.forEach(w),f=J(P,"BR",{}),d=oe(P),h=J(P,"BR",{}),c=oe(P),Fe(p.$$.fragment,P),_=oe(P),v=J(P,"INPUT",{class:!0,type:!0,style:!0}),D=oe(P),O&&O.l(P),U=oe(P),T=J(P,"BUTTON",{"data-svelte-h":!0}),nt(T)!=="svelte-y9choq"&&(T.textContent=N),P.forEach(w),B.forEach(w),this.h()},h(){te(v,"class","nodrag label"),te(v,"type","text"),bt(v,"background","white"),te(s,"class","event node-inner svelte-r7gabh"),te(n,"class","event node svelte-r7gabh")},m(k,B){I.m(k,B),R(k,t,B),R(k,n,B),C&&C.m(n,null),q(n,r),q(n,s),Oe(a,s,null),q(s,l),q(s,o),q(o,u),q(s,f),q(s,d),q(s,h),q(s,c),Oe(p,s,null),q(s,_),q(s,v),$e(v,i[11]),q(s,D),O&&O.m(s,null),q(s,U),q(s,T),g=!0,E||(b=[ge(v,"input",i[24]),ge(v,"input",i[25]),ge(T,"click",i[12]),ge(n,"click",i[13]),ge(n,"mouseenter",i[15]),ge(n,"mouseleave",i[16])],E=!0)},p(k,B){B[0]&32&&lt(e,e=k[5].inProgress)?(ht(),ce(I,1,1,xe),dt(),I=Bh(k),I.c(),ue(I,1),I.m(t.parentNode,t)):I.p(k,B),k[7]?C&&(ht(),ce(C,1,1,()=>{C=null}),dt()):C?(C.p(k,B),B[0]&128&&ue(C,1)):(C=Lh(k),C.c(),ue(C,1),C.m(n,r));const P={};B[0]&16&&(P.isVisible=k[4]),a.$set(P),(!g||B[0]&8)&&we(u,k[3]);const A={};B[0]&4&&(A.node_id=k[2]),B[0]&1&&(A.element_id=k[0].d3f_class),B[1]&112&&(A.$$scope={dirty:B,ctx:k}),p.$set(A),B[0]&2048&&v.value!==k[11]&&$e(v,k[11]),k[0].user_properties?O?O.p(k,B):(O=jh(k),O.c(),O.m(s,U)):O&&(O.d(1),O=null)},i(k){g||(ue(I),ue(C),ue(a.$$.fragment,k),ue(p.$$.fragment,k),g=!0)},o(k){ce(I),ce(C),ce(a.$$.fragment,k),ce(p.$$.fragment,k),g=!1},d(k){k&&(w(t),w(n)),I.d(k),C&&C.d(),Be(a),Be(p),O&&O.d(),E=!1,gt(b)}}}function V3(i,e,t){let n,r,s,a,l,o;st(i,Tr,Z=>t(30,l=Z)),st(i,at,Z=>t(6,o=Z));var u,f,d,h;let{data:c}=e,{isConnectable:p}=e,{id:_}=e,{nodeType:v="EventNode"}=e,{nodeTypeLabel:D="Event"}=e,{selected:U=void 0}=e;function T(){N(),c.user_properties.push(["",""])}function N(){for(let Z=0;Z<l.length;Z++)l[Z].data==c&&yt(at,o=l[Z],o)}const g=En();st(i,g,Z=>t(5,a=Z));let E=!1,b=!1;function I(){t(8,b=!0)}function C(){t(8,b=!1)}function O(){return a.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function k(){return b?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const B=Z=>{t(0,c.label=Z.currentTarget.value,c),yt(at,o.data.label=c.label,o)};function P(){n=this.value,t(11,n),t(0,c),t(6,o),t(20,u)}const A=(Z,G)=>{t(0,c.user_properties[Z][0]=G.currentTarget.value,c),yt(at,o.data.user_properties[Z][0]=G.currentTarget.value,o)};function z(Z){r[Z][0]=this.value,t(10,r),t(0,c),t(6,o),t(21,f)}const j=(Z,G)=>{t(0,c.user_properties[Z][1]=G.currentTarget.value,c),yt(at,o.data.user_properties[Z][1]=G.currentTarget.value,o)};function se(Z){s[Z][1]=this.value,t(9,s),t(0,c),t(6,o),t(22,d)}return i.$$set=Z=>{"data"in Z&&t(0,c=Z.data),"isConnectable"in Z&&t(1,p=Z.isConnectable),"id"in Z&&t(2,_=Z.id),"nodeType"in Z&&t(19,v=Z.nodeType),"nodeTypeLabel"in Z&&t(3,D=Z.nodeTypeLabel),"selected"in Z&&t(4,U=Z.selected)},i.$$.update=()=>{i.$$.dirty[0]&1048641&&t(11,n=(c==null?void 0:c.label)||(t(20,u=o==null?void 0:o.data)===null||u===void 0?void 0:u.label)||"< label >"),i.$$.dirty[0]&2097217&&t(10,r=(c==null?void 0:c.user_properties)||(t(21,f=o==null?void 0:o.data)===null||f===void 0?void 0:f.user_properties)||"< Property >"),i.$$.dirty[0]&4194369&&t(9,s=(c==null?void 0:c.user_properties)||(t(22,d=o==null?void 0:o.data)===null||d===void 0?void 0:d.user_properties)||"< Value >"),i.$$.dirty[0]&8388644&&t(7,E=(t(23,h=a.toHandle)===null||h===void 0?void 0:h.nodeId)==_)},[c,p,_,D,U,a,o,E,b,s,r,n,T,N,g,I,C,O,k,v,u,f,d,h,B,P,A,z,j,se]}class z3 extends kt{constructor(e){super(),At(this,e,V3,x3,lt,{data:0,isConnectable:1,id:2,nodeType:19,nodeTypeLabel:3,selected:4},null,[-1,-1])}}function Mh(i,e){const t=i.internals.positionAbsolute||{x:0,y:0},n=e.internals.positionAbsolute||{x:0,y:0},r=(i.measured.width??0)/2,s=(i.measured.height??0)/2,a=t.x+r,l=t.y+s,o=n.x+(e.measured.width??0)/2,u=n.y+(e.measured.height??0)/2,f=(o-a)/(2*r)-(u-l)/(2*s),d=(o-a)/(2*r)+(u-l)/(2*s),h=1/(Math.abs(f)+Math.abs(d)),c=h*f,p=h*d,_=r*(c+p)+a,v=s*(-c+p)+l;return{x:_,y:v}}function xh(i,e){var a,l;if(!i.measured.width||!i.measured.height)return null;const t=Math.round(((a=i.internals.positionAbsolute)==null?void 0:a.x)??0),n=Math.round(((l=i.internals.positionAbsolute)==null?void 0:l.y)??0),r=Math.round(e.x),s=Math.round(e.y);return r<=t+1?_t.Left:r>=t+i.measured.width-1?_t.Right:s<=n+1?_t.Top:s>=n+i.measured.height-1?_t.Bottom:_t.Top}function El(i,e){const t=Mh(i,e),n=Mh(e,i),r=xh(i,t),s=xh(e,n);return{sx:t.x,sy:t.y,tx:n.x,ty:n.y,sourcePos:r,targetPos:s}}function H3(i){let e,t;return e=new i[19].ItemProperty({props:{list:od,filter_value_store:i[20],select_item:i[21]}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r&1048576&&(s.filter_value_store=n[20]),r&2097152&&(s.select_item=n[21]),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function $3(i){let e,t,n=`translate(-50%, -50%) translate(${i[5]}px,${i[6]}px)`,r;return t=new Bi({props:{node_id:i[0],element_id:i[1].label,input_color:"#ffffff00",place_holder:String(i[1].label),flow_store_hook:cn,data_save_key:"d3f_property",$$slots:{default:[H3,({R:s,filter_value_store:a,select_item:l})=>({19:s,20:a,21:l}),({R:s,filter_value_store:a,select_item:l})=>(s?524288:0)|(a?1048576:0)|(l?2097152:0)]},$$scope:{ctx:i}}}),{c(){e=Y("div"),Re(t.$$.fragment),this.h()},l(s){e=J(s,"DIV",{class:!0});var a=Te(e);Fe(t.$$.fragment,a),a.forEach(w),this.h()},h(){te(e,"class","edge-label-container svelte-566npr"),bt(e,"transform",n)},m(s,a){R(s,e,a),Oe(t,e,null),r=!0},p(s,a){const l={};a&1&&(l.node_id=s[0]),a&2&&(l.element_id=s[1].label),a&2&&(l.place_holder=String(s[1].label)),a&7340032&&(l.$$scope={dirty:a,ctx:s}),t.$set(l),a&96&&n!==(n=`translate(-50%, -50%) translate(${s[5]}px,${s[6]}px)`)&&bt(e,"transform",n)},i(s){r||(ue(t.$$.fragment,s),r=!0)},o(s){ce(t.$$.fragment,s),r=!1},d(s){s&&w(e),Be(t)}}}function X3(i){let e,t,n,r;return e=new ev({props:{path:i[4],markerEnd:i[2],style:i[3]}}),n=new tv({props:{$$slots:{default:[$3]},$$scope:{ctx:i}}}),{c(){Re(e.$$.fragment),t=le(),Re(n.$$.fragment)},l(s){Fe(e.$$.fragment,s),t=oe(s),Fe(n.$$.fragment,s)},m(s,a){Oe(e,s,a),R(s,t,a),Oe(n,s,a),r=!0},p(s,[a]){const l={};a&16&&(l.path=s[4]),a&4&&(l.markerEnd=s[2]),a&8&&(l.style=s[3]),e.$set(l);const o={};a&4194403&&(o.$$scope={dirty:a,ctx:s}),n.$set(o)},i(s){r||(ue(e.$$.fragment,s),ue(n.$$.fragment,s),r=!0)},o(s){ce(e.$$.fragment,s),ce(n.$$.fragment,s),r=!1},d(s){s&&w(t),Be(e,s),Be(n,s)}}}function G3(i,e,t){let n,r,s,a=xe,l=()=>(a(),a=un(r,O=>t(17,s=O)),r),o,u=xe,f=()=>(u(),u=un(n,O=>t(18,o=O)),n);i.$$.on_destroy.push(()=>a()),i.$$.on_destroy.push(()=>u());let{id:d}=e,{data:h}=e,{sourceX:c}=e,{sourceY:p}=e,{source:_}=e,{sourcePosition:v}=e,{targetX:D}=e,{targetY:U}=e,{target:T}=e,{targetPosition:N}=e,{markerEnd:g=ed.ArrowClosed}=e,{style:E="stroke-width: 2px"}=e,b,I,C;return i.$$set=O=>{"id"in O&&t(0,d=O.id),"data"in O&&t(1,h=O.data),"sourceX"in O&&t(9,c=O.sourceX),"sourceY"in O&&t(10,p=O.sourceY),"source"in O&&t(11,_=O.source),"sourcePosition"in O&&t(12,v=O.sourcePosition),"targetX"in O&&t(13,D=O.targetX),"targetY"in O&&t(14,U=O.targetY),"target"in O&&t(15,T=O.target),"targetPosition"in O&&t(16,N=O.targetPosition),"markerEnd"in O&&t(2,g=O.markerEnd),"style"in O&&t(3,E=O.style)},i.$$.update=()=>{if(i.$$.dirty&2048&&f(t(8,n=nu(_))),i.$$.dirty&32768&&l(t(7,r=nu(T))),i.$$.dirty&393216)if(o&&s){const O=El(o,s);t(4,[b,I,C]=tl({sourceX:O.sx,sourceY:O.sy,sourcePosition:O.sourcePos,targetX:O.tx,targetY:O.ty,targetPosition:O.targetPos}),b,(t(5,I),t(18,o),t(17,s)),(t(6,C),t(18,o),t(17,s)))}else t(4,b=void 0)},[d,h,g,E,b,I,C,r,n,c,p,_,v,D,U,T,N,s,o]}class Q3 extends kt{constructor(e){super(),At(this,e,G3,X3,lt,{id:0,data:1,sourceX:9,sourceY:10,source:11,sourcePosition:12,targetX:13,targetY:14,target:15,targetPosition:16,markerEnd:2,style:3})}}function Vh(i,e,t){const n=i.slice();return n[7]=e[t],n}function zh(i){let e,t=Ke(i[2]),n=[];for(let r=0;r<t.length;r+=1)n[r]=Hh(Vh(i,t,r));return{c(){e=Y("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=J(r,"DIV",{class:!0});var s=Te(e);for(let a=0;a<n.length;a+=1)n[a].l(s);s.forEach(w),this.h()},h(){te(e,"class","file-list svelte-9u10j")},m(r,s){R(r,e,s);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null)},p(r,s){if(s&20){t=Ke(r[2]);let a;for(a=0;a<t.length;a+=1){const l=Vh(r,t,a);n[a]?n[a].p(l,s):(n[a]=Hh(l),n[a].c(),n[a].m(e,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(r){r&&w(e),Tt(n,r)}}}function Hh(i){let e,t=i[7].name+"",n,r,s=i[7].nodeCount+"",a,l,o=i[7].edgeCount+"",u,f,d,h;function c(){return i[5](i[7])}return{c(){e=Y("div"),n=x(t),r=x(" ("),a=x(s),l=x(" nodes, "),u=x(o),f=x(` edges)
          `),this.h()},l(p){e=J(p,"DIV",{class:!0});var _=Te(e);n=V(_,t),r=V(_," ("),a=V(_,s),l=V(_," nodes, "),u=V(_,o),f=V(_,` edges)
          `),_.forEach(w),this.h()},h(){te(e,"class","file-item svelte-9u10j")},m(p,_){R(p,e,_),q(e,n),q(e,r),q(e,a),q(e,l),q(e,u),q(e,f),d||(h=ge(e,"click",c),d=!0)},p(p,_){i=p,_&4&&t!==(t=i[7].name+"")&&we(n,t),_&4&&s!==(s=i[7].nodeCount+"")&&we(a,s),_&4&&o!==(o=i[7].edgeCount+"")&&we(u,o)},d(p){p&&w(e),d=!1,h()}}}function W3(i){let e,t,n,r,s,a,l=i[1]&&zh(i);return{c(){e=Y("div"),t=Y("button"),n=x(i[0]),r=le(),l&&l.c(),this.h()},l(o){e=J(o,"DIV",{class:!0});var u=Te(e);t=J(u,"BUTTON",{class:!0});var f=Te(t);n=V(f,i[0]),f.forEach(w),r=oe(u),l&&l.l(u),u.forEach(w),this.h()},h(){te(t,"class","svelte-9u10j"),te(e,"class","pick-list-container svelte-9u10j")},m(o,u){R(o,e,u),q(e,t),q(t,n),q(e,r),l&&l.m(e,null),s||(a=ge(t,"click",i[3]),s=!0)},p(o,[u]){u&1&&we(n,o[0]),o[1]?l?l.p(o,u):(l=zh(o),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:xe,o:xe,d(o){o&&w(e),l&&l.d(),s=!1,a()}}}async function Y3(){return await(await fetch("/cad/examples.json")).json()}function J3(i,e,t){const n=kl();let r=!1,{selectedFile:s="Example Graphs"}=e,a=[];function l(){t(1,r=!r)}function o(f){t(0,s=f),t(1,r=!1),n("fileSelected",f)}is(async()=>{t(2,a=await Y3())});const u=f=>o(f.name);return i.$$set=f=>{"selectedFile"in f&&t(0,s=f.selectedFile)},[s,r,a,l,o,u]}class K3 extends kt{constructor(e){super(),At(this,e,J3,W3,lt,{selectedFile:0})}}function $h(i){let e,t,n,r,s;return{c(){e=Oo("path"),t=le(),n=Oo("circle"),this.h()},l(a){e=Bo(a,"path",{fill:!0,"stroke-width":!0,class:!0,stroke:!0,d:!0}),Te(e).forEach(w),t=oe(a),n=Bo(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),Te(n).forEach(w),this.h()},h(){te(e,"fill","transparent"),te(e,"stroke-width",2.5),te(e,"class","animated"),te(e,"stroke","black"),te(e,"d",i[2]),te(n,"cx",r=i[0].tx),te(n,"cy",s=i[0].ty),te(n,"r",3),te(n,"stroke","black"),te(n,"stroke-width",1.5)},m(a,l){R(a,e,l),R(a,t,l),R(a,n,l)},p(a,l){l&4&&te(e,"d",a[2]),l&1&&r!==(r=a[0].tx)&&te(n,"cx",r),l&1&&s!==(s=a[0].ty)&&te(n,"cy",s)},d(a){a&&(w(e),w(t),w(n))}}}function Z3(i){let e,t=i[1].inProgress&&$h(i);return{c(){t&&t.c(),e=Ie()},l(n){t&&t.l(n),e=Ie()},m(n,r){t&&t.m(n,r),R(n,e,r)},p(n,[r]){n[1].inProgress?t?t.p(n,r):(t=$h(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:xe,o:xe,d(n){n&&w(e),t&&t.d(n)}}}function eE(i,e,t){let n;const r=En();st(i,r,l=>t(1,n=l));let s,a;return i.$$.update=()=>{if(i.$$.dirty&3){const l=structuredClone(n.fromNode);n.isValid?(t(0,a=El(n.fromNode,n.toNode)),t(2,s=tl({sourceX:a.sx,sourceY:a.sy,sourcePosition:a.sourcePos,targetX:a.tx,targetY:a.ty,targetPosition:a.targetPos})[0])):(l.id="-1",l.measured={width:1,height:1},l.position={x:n.to.x,y:n.to.y},l.internals.positionAbsolute={x:n.to.x,y:n.to.y},t(0,a=El(n.fromNode,l)),t(2,s=tl({sourceX:a.sx,sourceY:a.sy,sourcePosition:a.sourcePos,targetX:a.tx,targetY:a.ty,targetPosition:a.targetPos})[0]))}},[a,n,s,r]}class tE extends kt{constructor(e){super(),At(this,e,eE,Z3,lt,{})}}function rE(i){let e,t='This is an (very) alpha-level preview release. Please review and file bugs <a href="https://github.com/d3fend/d3fend/issues/14">here. </a>Early stage <a href="./docs">docs.</a>';return{c(){e=Y("div"),e.innerHTML=t,this.h()},l(n){e=J(n,"DIV",{class:!0,"data-svelte-h":!0}),nt(e)!=="svelte-hoyi2c"&&(e.innerHTML=t),this.h()},h(){te(e,"class","font-medium")},m(n,r){R(n,e,r)},p:xe,d(n){n&&w(e)}}}function nE(i){let e;return{c(){e=x("Please only load models from URLs you trust!")},l(t){e=V(t,"Please only load models from URLs you trust!")},m(t,n){R(t,e,n)},d(t){t&&w(e)}}}function iE(i){let e,t,n,r,s,a,l,o,u,f,d;return f=new ss({props:{$$slots:{default:[nE]},$$scope:{ctx:i}}}),{c(){e=Y("br"),t=le(),n=Y("code"),r=x(i[4]),s=le(),a=Y("br"),l=le(),o=Y("br"),u=le(),Re(f.$$.fragment),this.h()},l(h){e=J(h,"BR",{}),t=oe(h),n=J(h,"CODE",{class:!0});var c=Te(n);r=V(c,i[4]),c.forEach(w),s=oe(h),a=J(h,"BR",{}),l=oe(h),o=J(h,"BR",{}),u=oe(h),Fe(f.$$.fragment,h),this.h()},h(){te(n,"class","center text-center")},m(h,c){R(h,e,c),R(h,t,c),R(h,n,c),q(n,r),R(h,s,c),R(h,a,c),R(h,l,c),R(h,o,c),R(h,u,c),Oe(f,h,c),d=!0},p(h,c){(!d||c[0]&16)&&we(r,h[4]);const p={};c[1]&67108864&&(p.$$scope={dirty:c,ctx:h}),f.$set(p)},i(h){d||(ue(f.$$.fragment,h),d=!0)},o(h){ce(f.$$.fragment,h),d=!1},d(h){h&&(w(e),w(t),w(n),w(s),w(a),w(l),w(o),w(u)),Be(f,h)}}}function aE(i){let e;return{c(){e=x("Please only load models from URLs you trust!")},l(t){e=V(t,"Please only load models from URLs you trust!")},m(t,n){R(t,e,n)},d(t){t&&w(e)}}}function sE(i){let e,t,n,r,s,a;return s=new ss({props:{$$slots:{default:[aE]},$$scope:{ctx:i}}}),{c(){e=Y("br"),t=le(),n=Y("br"),r=le(),Re(s.$$.fragment)},l(l){e=J(l,"BR",{}),t=oe(l),n=J(l,"BR",{}),r=oe(l),Fe(s.$$.fragment,l)},m(l,o){R(l,e,o),R(l,t,o),R(l,n,o),R(l,r,o),Oe(s,l,o),a=!0},p(l,o){const u={};o[1]&67108864&&(u.$$scope={dirty:o,ctx:l}),s.$set(u)},i(l){a||(ue(s.$$.fragment,l),a=!0)},o(l){ce(s.$$.fragment,l),a=!1},d(l){l&&(w(e),w(t),w(n),w(r)),Be(s,l)}}}function Xh(i){let e,t,n,r;return e=new ss({props:{alert_type:"warning",$$slots:{default:[lE]},$$scope:{ctx:i}}}),{c(){Re(e.$$.fragment),t=le(),n=Y("br")},l(s){Fe(e.$$.fragment,s),t=oe(s),n=J(s,"BR",{})},m(s,a){Oe(e,s,a),R(s,t,a),R(s,n,a),r=!0},i(s){r||(ue(e.$$.fragment,s),r=!0)},o(s){ce(e.$$.fragment,s),r=!1},d(s){s&&(w(t),w(n)),Be(e,s)}}}function lE(i){let e;return{c(){e=x("Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},l(t){e=V(t,"Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},m(t,n){R(t,e,n)},d(t){t&&w(e)}}}function oE(i){let e,t,n,r,s=i[12].length+"",a,l,o,u,f,d,h,c,p,_,v="copy",D,U,T,N=i[12].length>2048&&Xh(i);return{c(){N&&N.c(),e=le(),t=Y("div"),n=Y("code"),r=x("The encoded model has a string length of "),a=x(s),l=x(" characters."),o=le(),u=Y("p"),f=Y("button"),d=Y("a"),h=x("Share URL"),c=le(),p=Y("span"),_=Y("button"),_.textContent=v,this.h()},l(g){N&&N.l(g),e=oe(g),t=J(g,"DIV",{});var E=Te(t);n=J(E,"CODE",{});var b=Te(n);r=V(b,"The encoded model has a string length of "),a=V(b,s),l=V(b," characters."),b.forEach(w),E.forEach(w),o=oe(g),u=J(g,"P",{});var I=Te(u);f=J(I,"BUTTON",{class:!0});var C=Te(f);d=J(C,"A",{href:!0});var O=Te(d);h=V(O,"Share URL"),O.forEach(w),C.forEach(w),c=oe(I),p=J(I,"SPAN",{});var k=Te(p);_=J(k,"BUTTON",{class:!0,"data-svelte-h":!0}),nt(_)!=="svelte-1uua65l"&&(_.textContent=v),k.forEach(w),I.forEach(w),this.h()},h(){te(d,"href",i[13]),te(f,"class","svelte-a67pct"),te(_,"class","svelte-a67pct")},m(g,E){N&&N.m(g,E),R(g,e,E),R(g,t,E),q(t,n),q(n,r),q(n,a),q(n,l),R(g,o,E),R(g,u,E),q(u,f),q(f,d),q(d,h),q(u,c),q(u,p),q(p,_),D=!0,U||(T=ge(_,"click",i[33]),U=!0)},p(g,E){g[12].length>2048?N?E[0]&4096&&ue(N,1):(N=Xh(g),N.c(),ue(N,1),N.m(e.parentNode,e)):N&&(ht(),ce(N,1,1,()=>{N=null}),dt()),(!D||E[0]&4096)&&s!==(s=g[12].length+"")&&we(a,s),(!D||E[0]&8192)&&te(d,"href",g[13])},i(g){D||(ue(N),D=!0)},o(g){ce(N),D=!1},d(g){g&&(w(e),w(t),w(o),w(u)),N&&N.d(g),U=!1,T()}}}function Gh(i){let e,t,n,r,s,a,l;return n=new cv({props:{display:"inline"}}),{c(){e=Y("span"),t=Y("span"),Re(n.$$.fragment),r=le(),s=Y("span"),a=x(i[15]),this.h()},l(o){e=J(o,"SPAN",{class:!0});var u=Te(e);t=J(u,"SPAN",{});var f=Te(t);Fe(n.$$.fragment,f),f.forEach(w),r=oe(u),s=J(u,"SPAN",{});var d=Te(s);a=V(d,i[15]),d.forEach(w),u.forEach(w),this.h()},h(){te(e,"class","right")},m(o,u){R(o,e,u),q(e,t),Oe(n,t,null),q(e,r),q(e,s),q(s,a),l=!0},p(o,u){(!l||u[0]&32768)&&we(a,o[15])},i(o){l||(ue(n.$$.fragment,o),l=!0)},o(o){ce(n.$$.fragment,o),l=!1},d(o){o&&w(e),Be(n)}}}function Qh(i){let e,t;return e=new Bw({props:{onClick:i[29],id:i[8].id,top:i[8].top,left:i[8].left,right:i[8].right,bottom:i[8].bottom}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,r){const s={};r[0]&256&&(s.id=n[8].id),r[0]&256&&(s.top=n[8].top),r[0]&256&&(s.left=n[8].left),r[0]&256&&(s.right=n[8].right),r[0]&256&&(s.bottom=n[8].bottom),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function uE(i){let e,t,n,r,s,a,l;e=new nv({props:{position:"top-left"}}),n=new iv({props:{variant:av.Dots}});let o=i[8]&&Qh(i);return a=new sv({props:{position:"top-right"}}),{c(){Re(e.$$.fragment),t=le(),Re(n.$$.fragment),r=le(),o&&o.c(),s=le(),Re(a.$$.fragment)},l(u){Fe(e.$$.fragment,u),t=oe(u),Fe(n.$$.fragment,u),r=oe(u),o&&o.l(u),s=oe(u),Fe(a.$$.fragment,u)},m(u,f){Oe(e,u,f),R(u,t,f),Oe(n,u,f),R(u,r,f),o&&o.m(u,f),R(u,s,f),Oe(a,u,f),l=!0},p(u,f){u[8]?o?(o.p(u,f),f[0]&256&&ue(o,1)):(o=Qh(u),o.c(),ue(o,1),o.m(s.parentNode,s)):o&&(ht(),ce(o,1,1,()=>{o=null}),dt())},i(u){l||(ue(e.$$.fragment,u),ue(n.$$.fragment,u),ue(o),ue(a.$$.fragment,u),l=!0)},o(u){ce(e.$$.fragment,u),ce(n.$$.fragment,u),ce(o),ce(a.$$.fragment,u),l=!1},d(u){u&&(w(t),w(r),w(s)),Be(e,u),Be(n,u),o&&o.d(u),Be(a,u)}}}function fE(i){let e,t;return e=new tE({props:{slot:"connectionLine"}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p:xe,i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function Wh(i){let e,t="<b>-</b>",n,r;return{c(){e=Y("button"),e.innerHTML=t,this.h()},l(s){e=J(s,"BUTTON",{class:!0,"data-svelte-h":!0}),nt(e)!=="svelte-1nlkb58"&&(e.innerHTML=t),this.h()},h(){te(e,"class","svelte-a67pct")},m(s,a){R(s,e,a),n||(r=ge(e,"click",i[39]),n=!0)},p:xe,d(s){s&&w(e),n=!1,r()}}}function Yh(i){let e,t="<b>+</b>",n,r;return{c(){e=Y("button"),e.innerHTML=t,this.h()},l(s){e=J(s,"BUTTON",{class:!0,"data-svelte-h":!0}),nt(e)!=="svelte-efi5au"&&(e.innerHTML=t),this.h()},h(){te(e,"class","svelte-a67pct")},m(s,a){R(s,e,a),n||(r=ge(e,"click",i[40]),n=!0)},p:xe,d(s){s&&w(e),n=!1,r()}}}function cE(i){let e,t,n,r,s,a,l,o,u,f,d,h,c,p,_,v,D,U="Load",T,N,g="Merge",E,b,I="Clear",C,O,k="Save",B,P,A,z="Save As...",j,se="Save As JSON...",Z,G="Save As Turtle...",H,Q,ee="Share",$,ae,ze,Ve,be,Ne,_e,Se,et,vt,rt,Ae,qe,Nt,Ut,Vt,St,Xt,je,He;function We(Pe){i[31](Pe)}let tt={title:i[2].title,content:i[2].content,options:i[2].options,$$slots:{default:[iE]},$$scope:{ctx:i}};i[2].is_open!==void 0&&(tt.is_open=i[2].is_open),e=new wc({props:tt}),Jt.push(()=>Cr(e,"is_open",We)),e.$on("optionSelected",i[16]);function ft(Pe){i[32](Pe)}let zt={title:i[3].title,content:i[3].content,options:i[3].options,$$slots:{default:[sE]},$$scope:{ctx:i}};i[3].is_open!==void 0&&(zt.is_open=i[3].is_open),r=new wc({props:zt}),Jt.push(()=>Cr(r,"is_open",ft)),r.$on("optionSelected",i[17]);function X(Pe){i[34](Pe)}let S={title:"Share this model with a URL",$$slots:{default:[oE]},$$scope:{ctx:i}};i[11]!==void 0&&(S.is_open=i[11]),l=new Mw({props:S}),Jt.push(()=>Cr(l,"is_open",X));function F(Pe){i[35](Pe)}let K={};i[7]!==void 0&&(K.selectedFile=i[7]),d=new K3({props:K}),Jt.push(()=>Cr(d,"selectedFile",F)),d.$on("fileSelected",i[26]);let fe=i[15]&&Gh(i);Se=new rv({props:{nodes:Tr,nodeTypes:i[0],edges:sa,edgeTypes:i[1],fitView:!0,defaultEdgeOptions:i[18],$$slots:{connectionLine:[fE],default:[uE]},$$scope:{ctx:i}}}),Se.$on("dragover",i[23]),Se.$on("drop",i[25]),Se.$on("connect",i[24]),Se.$on("nodecontextmenu",i[28]),Se.$on("paneclick",i[29]),Se.$on("onedgecreate",dE),vt=new Xw({});let ye=i[14]&&Wh(i),ke=!i[14]&&Yh(i);return Vt=new Kw({}),{c(){Re(e.$$.fragment),n=le(),Re(r.$$.fragment),a=le(),Re(l.$$.fragment),u=le(),f=Y("div"),Re(d.$$.fragment),c=le(),p=Y("br"),_=le(),v=Y("div"),D=Y("button"),D.textContent=U,T=le(),N=Y("button"),N.textContent=g,E=le(),b=Y("button"),b.textContent=I,C=le(),O=Y("button"),O.textContent=k,B=le(),P=Y("select"),A=Y("option"),A.textContent=z,j=Y("option"),j.textContent=se,Z=Y("option"),Z.textContent=G,H=le(),Q=Y("button"),Q.textContent=ee,$=x(`
        filename:    `),ae=Y("input"),ze=le(),fe&&fe.c(),Ve=le(),be=Y("main"),Ne=Y("div"),_e=Y("div"),Re(Se.$$.fragment),et=le(),Re(vt.$$.fragment),Ae=le(),qe=Y("div"),ye&&ye.c(),Nt=le(),ke&&ke.c(),Ut=le(),Re(Vt.$$.fragment),this.h()},l(Pe){Fe(e.$$.fragment,Pe),n=oe(Pe),Fe(r.$$.fragment,Pe),a=oe(Pe),Fe(l.$$.fragment,Pe),u=oe(Pe),f=J(Pe,"DIV",{class:!0});var Xe=Te(f);Fe(d.$$.fragment,Xe),Xe.forEach(w),c=oe(Pe),p=J(Pe,"BR",{}),_=oe(Pe),v=J(Pe,"DIV",{id:!0,class:!0});var Ze=Te(v);D=J(Ze,"BUTTON",{class:!0,"data-svelte-h":!0}),nt(D)!=="svelte-r4end6"&&(D.textContent=U),T=oe(Ze),N=J(Ze,"BUTTON",{class:!0,"data-svelte-h":!0}),nt(N)!=="svelte-1s1l97g"&&(N.textContent=g),E=oe(Ze),b=J(Ze,"BUTTON",{class:!0,"data-svelte-h":!0}),nt(b)!=="svelte-1o4uly3"&&(b.textContent=I),C=oe(Ze),O=J(Ze,"BUTTON",{class:!0,"data-svelte-h":!0}),nt(O)!=="svelte-qm8vdx"&&(O.textContent=k),B=oe(Ze),P=J(Ze,"SELECT",{class:!0});var ct=Te(P);A=J(ct,"OPTION",{"data-svelte-h":!0}),nt(A)!=="svelte-hmrlsb"&&(A.textContent=z),j=J(ct,"OPTION",{"data-svelte-h":!0}),nt(j)!=="svelte-1q30tr1"&&(j.textContent=se),Z=J(ct,"OPTION",{"data-svelte-h":!0}),nt(Z)!=="svelte-pf55hp"&&(Z.textContent=G),ct.forEach(w),H=oe(Ze),Q=J(Ze,"BUTTON",{class:!0,"data-svelte-h":!0}),nt(Q)!=="svelte-mqt2ui"&&(Q.textContent=ee),$=V(Ze,`
        filename:    `),ae=J(Ze,"INPUT",{style:!0,type:!0}),ze=oe(Ze),fe&&fe.l(Ze),Ze.forEach(w),Ve=oe(Pe),be=J(Pe,"MAIN",{});var mt=Te(be);Ne=J(mt,"DIV",{id:!0,class:!0});var dr=Te(Ne);_e=J(dr,"DIV",{id:!0,class:!0});var Rr=Te(_e);Fe(Se.$$.fragment,Rr),et=oe(Rr),Fe(vt.$$.fragment,Rr),Rr.forEach(w),Ae=oe(dr),qe=J(dr,"DIV",{class:!0});var lr=Te(qe);ye&&ye.l(lr),Nt=oe(lr),ke&&ke.l(lr),Ut=oe(lr),Fe(Vt.$$.fragment,lr),lr.forEach(w),dr.forEach(w),mt.forEach(w),this.h()},h(){te(f,"class","toolbar-examples"),te(D,"class","svelte-a67pct"),te(N,"class","svelte-a67pct"),te(b,"class","svelte-a67pct"),te(O,"class","svelte-a67pct"),A.__value="",$e(A,A.__value),j.__value="json",$e(j,j.__value),Z.__value="turtle",$e(Z,Z.__value),te(P,"class","save-as-dropdown svelte-a67pct"),i[6]===void 0&&el(()=>i[36].call(P)),te(Q,"class"," svelte-a67pct"),bt(ae,"width","275px"),te(ae,"type","text"),te(v,"id","toolbar"),te(v,"class","svelte-a67pct"),te(_e,"id","flow"),te(_e,"class","svelte-a67pct"),el(()=>i[38].call(_e)),te(qe,"class",St="side-panel "+(i[14]?"open":"close")+" svelte-a67pct"),te(Ne,"id","main-container"),te(Ne,"class","svelte-a67pct")},m(Pe,Xe){Oe(e,Pe,Xe),R(Pe,n,Xe),Oe(r,Pe,Xe),R(Pe,a,Xe),Oe(l,Pe,Xe),R(Pe,u,Xe),R(Pe,f,Xe),Oe(d,f,null),R(Pe,c,Xe),R(Pe,p,Xe),R(Pe,_,Xe),R(Pe,v,Xe),q(v,D),q(v,T),q(v,N),q(v,E),q(v,b),q(v,C),q(v,O),q(v,B),q(v,P),q(P,A),q(P,j),q(P,Z),Lo(P,i[6],!0),q(v,H),q(v,Q),q(v,$),q(v,ae),$e(ae,i[5]),q(v,ze),fe&&fe.m(v,null),R(Pe,Ve,Xe),R(Pe,be,Xe),q(be,Ne),q(Ne,_e),Oe(Se,_e,null),q(_e,et),Oe(vt,_e,null),rt=q0(_e,i[38].bind(_e)),q(Ne,Ae),q(Ne,qe),ye&&ye.m(qe,null),q(qe,Nt),ke&&ke.m(qe,null),q(qe,Ut),Oe(Vt,qe,null),Xt=!0,je||(He=[ge(D,"click",i[21]),ge(N,"click",i[22]),ge(b,"click",i[27]),ge(O,"click",i[19]),ge(P,"change",i[36]),ge(P,"change",i[20]),ge(Q,"click",i[30]),ge(ae,"input",i[37])],je=!0)},p(Pe,Xe){const Ze={};Xe[0]&4&&(Ze.title=Pe[2].title),Xe[0]&4&&(Ze.content=Pe[2].content),Xe[0]&4&&(Ze.options=Pe[2].options),Xe[0]&16|Xe[1]&67108864&&(Ze.$$scope={dirty:Xe,ctx:Pe}),!t&&Xe[0]&4&&(t=!0,Ze.is_open=Pe[2].is_open,Ar(()=>t=!1)),e.$set(Ze);const ct={};Xe[0]&8&&(ct.title=Pe[3].title),Xe[0]&8&&(ct.content=Pe[3].content),Xe[0]&8&&(ct.options=Pe[3].options),Xe[1]&67108864&&(ct.$$scope={dirty:Xe,ctx:Pe}),!s&&Xe[0]&8&&(s=!0,ct.is_open=Pe[3].is_open,Ar(()=>s=!1)),r.$set(ct);const mt={};Xe[0]&12288|Xe[1]&67108864&&(mt.$$scope={dirty:Xe,ctx:Pe}),!o&&Xe[0]&2048&&(o=!0,mt.is_open=Pe[11],Ar(()=>o=!1)),l.$set(mt);const dr={};!h&&Xe[0]&128&&(h=!0,dr.selectedFile=Pe[7],Ar(()=>h=!1)),d.$set(dr),Xe[0]&64&&Lo(P,Pe[6]),Xe[0]&32&&ae.value!==Pe[5]&&$e(ae,Pe[5]),Pe[15]?fe?(fe.p(Pe,Xe),Xe[0]&32768&&ue(fe,1)):(fe=Gh(Pe),fe.c(),ue(fe,1),fe.m(v,null)):fe&&(ht(),ce(fe,1,1,()=>{fe=null}),dt());const Rr={};Xe[0]&256|Xe[1]&67108864&&(Rr.$$scope={dirty:Xe,ctx:Pe}),Se.$set(Rr),Pe[14]?ye?ye.p(Pe,Xe):(ye=Wh(Pe),ye.c(),ye.m(qe,Nt)):ye&&(ye.d(1),ye=null),Pe[14]?ke&&(ke.d(1),ke=null):ke?ke.p(Pe,Xe):(ke=Yh(Pe),ke.c(),ke.m(qe,Ut)),(!Xt||Xe[0]&16384&&St!==(St="side-panel "+(Pe[14]?"open":"close")+" svelte-a67pct"))&&te(qe,"class",St)},i(Pe){Xt||(ue(e.$$.fragment,Pe),ue(r.$$.fragment,Pe),ue(l.$$.fragment,Pe),ue(d.$$.fragment,Pe),ue(fe),ue(Se.$$.fragment,Pe),ue(vt.$$.fragment,Pe),ue(Vt.$$.fragment,Pe),Xt=!0)},o(Pe){ce(e.$$.fragment,Pe),ce(r.$$.fragment,Pe),ce(l.$$.fragment,Pe),ce(d.$$.fragment,Pe),ce(fe),ce(Se.$$.fragment,Pe),ce(vt.$$.fragment,Pe),ce(Vt.$$.fragment,Pe),Xt=!1},d(Pe){Pe&&(w(n),w(a),w(u),w(f),w(c),w(p),w(_),w(v),w(Ve),w(be)),Be(e,Pe),Be(r,Pe),Be(l,Pe),Be(d),fe&&fe.d(),Be(Se),Be(vt),rt(),ye&&ye.d(),ke&&ke.d(),Be(Vt),je=!1,gt(He)}}}function hE(i){let e,t,n,r,s,a,l='D3FEND <span class="snakes">☤</span> <span class="CAD"><span style="color:#e62929;">C</span><span class="A svelte-a67pct" style="color:white;text-border:1px;">A</span><span style="color:blue;">D</span></span>',o,u,f="<i>Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios</i>",d,h,c,p,_,v,D;return e=new hv({props:{title:"D3FEND CAD Tool",og_title:"D3FEND CAD Tool",og_description:"Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios",og_type:"app"}}),p=new ss({props:{alert_type:"warning",$$slots:{default:[rE]},$$scope:{ctx:i}}}),v=new zw({props:{position:"right",$$slots:{default:[cE]},$$scope:{ctx:i}}}),{c(){Re(e.$$.fragment),t=le(),n=Y("div"),r=Y("div"),s=Y("div"),a=Y("h1"),a.innerHTML=l,o=le(),u=Y("div"),u.innerHTML=f,d=le(),h=Y("br"),c=le(),Re(p.$$.fragment),_=le(),Re(v.$$.fragment),this.h()},l(U){Fe(e.$$.fragment,U),t=oe(U),n=J(U,"DIV",{class:!0});var T=Te(n);r=J(T,"DIV",{style:!0});var N=Te(r);s=J(N,"DIV",{style:!0});var g=Te(s);a=J(g,"H1",{class:!0,"data-svelte-h":!0}),nt(a)!=="svelte-1hfeq8z"&&(a.innerHTML=l),o=oe(g),u=J(g,"DIV",{style:!0,"data-svelte-h":!0}),nt(u)!=="svelte-1adqejh"&&(u.innerHTML=f),d=oe(g),h=J(g,"BR",{}),c=oe(g),Fe(p.$$.fragment,g),g.forEach(w),N.forEach(w),T.forEach(w),_=oe(U),Fe(v.$$.fragment,U),this.h()},h(){te(a,"class","fancy-font svelte-a67pct"),bt(u,"text-align","center"),bt(u,"padding","0 px"),bt(s,"text-align","center"),bt(s,"flex-grow","1"),bt(r,"display","flex"),bt(r,"just-content","space-between"),bt(r,"align-items","center"),te(n,"class","title-egg")},m(U,T){Oe(e,U,T),R(U,t,T),R(U,n,T),q(n,r),q(r,s),q(s,a),q(s,o),q(s,u),q(s,d),q(s,h),q(s,c),Oe(p,s,null),R(U,_,T),Oe(v,U,T),D=!0},p(U,T){const N={};T[1]&67108864&&(N.$$scope={dirty:T,ctx:U}),p.$set(N);const g={};T[0]&65532|T[1]&67108864&&(g.$$scope={dirty:T,ctx:U}),v.$set(g)},i(U){D||(ue(e.$$.fragment,U),ue(p.$$.fragment,U),ue(v.$$.fragment,U),D=!0)},o(U){ce(e.$$.fragment,U),ce(p.$$.fragment,U),ce(v.$$.fragment,U),D=!1},d(U){U&&(w(t),w(n),w(_)),Be(e,U),Be(p),Be(v,U)}}}function dE(i){console.log(i),console.log(i)}function Jh(i,e){for(var t=0,n=0;n<i.length;n++)i[n].params.missingProperty=="user_properties"&&(e.nodes[t].data.user_properties=[],t=t+1);return e}function pE(i,e,t){let n,r,s,a;st(i,V0,je=>t(42,n=je)),st(i,sa,je=>t(43,r=je)),st(i,Tr,je=>t(44,s=je)),st(i,Pr,je=>t(15,a=je));var l=this&&this.__awaiter||function(je,He,We,tt){function ft(zt){return zt instanceof We?zt:new We(function(X){X(zt)})}return new(We||(We=Promise))(function(zt,X){function S(fe){try{K(tt.next(fe))}catch(ye){X(ye)}}function F(fe){try{K(tt.throw(fe))}catch(ye){X(ye)}}function K(fe){fe.done?zt(fe.value):ft(fe.value).then(S,F)}K((tt=tt.apply(je,He||[])).next())})};const o=new K1({useDefaults:!0,allErrors:!0});let u={is_open:!1,title:"Confirmation to load remote model from URL",content:"This page is instructing D3FEND to remotely load a CAD model from this URL:",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},f={is_open:!1,title:"Confirmation to load remote model from compressed URL",content:"This page is instructing D3FEND to load a CAD model from this URL",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},d;n.url.searchParams.get("load")&&(d=n.url.searchParams.get("load"),u.is_open=!0),n.url.searchParams.get("loadg")&&(f.is_open=!0);function h(je){const He=je.detail;He.value==="load"?(Pr.add("loading remote URL"),O(d),Pr.clear()):He.value}function c(je){const He=je.detail;if(He.value==="load"){Pr.add("loading graph from URL");const We=n.url.searchParams.get("loadg"),tt=Qo.uncrush(We);let ft=JSON.parse(tt);b(ft),Pr.clear()}else He.value}is(()=>{Pr.add("Mounting app...");try{eo.initialize(),Pr.clear()}catch(je){console.error("Failed to initialize Oxigraph in +layout.svelte",je),je.message}});const p={artifactSelectorNode:C3,vulnerabilitySelectorNode:E3,attackSelectorNode:g3,countermeasureSelectorNode:P3,informationSelectorNode:F3,conditionDefinitionNode:L3,agentSelectorNode:q3,eventNode:z3},_={editableEdge:Q3};let v={type:"editableEdge",data:{label:void 0},markerEnd:{type:ed.ArrowClosed}},D="d3fend-cad.json",U="";function T(){const je=JSON.stringify({nodes:s,edges:r},null,4),He=new Blob([je],{type:"application/json"}),We=window.URL.createObjectURL(He),tt=document.createElement("a");tt.href=We,tt.download=D,document.body.appendChild(tt),tt.click(),document.body.removeChild(tt),window.URL.revokeObjectURL(We)}function N(){U==="json"?E():U==="turtle"&&g(),t(6,U="")}function g(){Pr.add("generating ttl file"),console.log("!!! Turtle export engaged !!!"),Kb().then(je=>{Pr.clear();const He=new Blob([je],{type:"text/turtle"}),We=window.URL.createObjectURL(He),tt=document.createElement("a");tt.href=We;let ft=prompt("Enter filename to save as Turtle file",D.replace("json","ttl"));ft&&(tt.download=ft,document.body.appendChild(tt),tt.click(),document.body.removeChild(tt)),window.URL.revokeObjectURL(We)}).catch(je=>{console.error("Error serializing graph to Turtle: ",je)})}function E(){const je=JSON.stringify({nodes:s,edges:r},null,4),He=new Blob([je],{type:"application/json"}),We=window.URL.createObjectURL(He),tt=document.createElement("a");tt.href=We;let ft=prompt("Enter filename to save as JSON file",D);t(5,D=ft),ft&&(tt.download=ft,document.body.appendChild(tt),tt.click(),document.body.removeChild(tt)),window.URL.revokeObjectURL(We)}function b(je){try{const He=o.compile(jo);He(je)||(je=Jh(He.errors,je));const tt=je.nodes,ft=je.edges;Pr.add("loading graph from data..."),za(tt,ft),Pr.clear()}catch(He){console.error("Error parsing JSON:",He)}}function I(je){const He=je.target.files[0];if(He){const We=new FileReader;We.onload=tt=>{if(typeof tt.target.result=="string"){console.log(tt.target.result),t(5,D=He.name);try{let ft=JSON.parse(tt.target.result);const zt=o.compile(jo);zt(ft)||(ft=Jh(zt.errors,ft));const S=ft.nodes,F=ft.edges;za(S,F)}catch(ft){console.error("Error parsing JSON:",ft)}}else console.error("File content is not a string.")},We.onerror=()=>{console.error("Error reading file:",We.error)},We.readAsText(He)}}function C(je){const He=je.target.files[0];if(He){const We=new FileReader;We.onload=tt=>{if(typeof tt.target.result=="string"){console.log(tt.target.result);try{const ft=JSON.parse(tt.target.result);Tr.set([...s,...ft.nodes]),sa.set([...r,...ft.edges]),alert(` added ${ft.nodes.length} nodes and ${ft.edges.length} edges to the current graph `)}catch(ft){console.error("Error parsing JSON:",ft),alert(`Error parsing JSON:", ${ft}`)}}else console.error("File content is not a string."),alert("File content is not a string.")},We.onerror=()=>{console.error("Error reading file:",We.error),alert(`Error reading file: ${We.error}`)},We.readAsText(He)}}function O(je){return l(this,void 0,void 0,function*(){if(je)try{const We=yield(yield fetch(je)).json(),tt=We.nodes,ft=We.edges;za(tt,ft)}catch(He){console.error("Error parsing JSON:",He)}})}function k(){const je=document.createElement("input");je.type="file",je.accept=".json",je.onchange=He=>{I(He)},je.click()}function B(){const je=document.createElement("input");je.type="file",je.accept=".json",je.onchange=He=>{C(He)},je.click()}const{screenToFlowPosition:P}=Tv(),A=je=>{je.preventDefault(),je.dataTransfer&&(je.dataTransfer.dropEffect="move")},z=je=>console.log("handle onConnect",je),j=je=>{if(je.preventDefault(),!je.dataTransfer)return null;const He=je.dataTransfer.getData("application/svelteflow"),We=P({x:je.clientX,y:je.clientY}),tt={id:`${Math.random()}`,type:He,position:We,data:{label:null,sequence:"0",user_properties:[]},origin:[.5,0]};s.push(tt),Tr.set(s)};function se(je){return l(this,void 0,void 0,function*(){const He=je.detail;t(5,D=He);try{const We=yield fetch(`/resources/cad/examples/${He}`);if(!We.ok)throw new Error(`HTTP error! status: ${We.status}`);const tt=yield We.json();console.log("Selected file contents:",tt),b(tt)}catch(We){console.error("Error fetching JSON file:",We)}})}let Z;function G(){Yb(),t(7,Z="Example Graphs"),t(5,D="d3fend-cad.json")}let H,Q,ee;function $({detail:{event:je,node:He}}){je.preventDefault();let We=50;t(8,H={id:He.id,top:je.clientY<ee-We?je.clientY:void 0,left:je.clientX<Q-We?je.clientX:void 0,right:je.clientX>=Q-We?Q-je.clientX:void 0,bottom:je.clientY>=ee-We?ee-je.clientY:void 0}),ze({detail:{event:je,node:He}})}function ae(){t(8,H=null),at.set(null)}function ze({detail:{event:je,node:He}}){at.set(He)}let Ve=!1,be,Ne;function _e(){Pr.add("compressing graph to string..."),t(11,Ve=!0);const je=Qo.crush(JSON.stringify({nodes:s,edges:r}));t(12,be=encodeURIComponent(je)),t(13,Ne=n.url.origin+`/cad/?loadg=${be}`),Pr.clear()}let Se=!0;function et(je){i.$$.not_equal(u.is_open,je)&&(u.is_open=je,t(2,u))}function vt(je){i.$$.not_equal(f.is_open,je)&&(f.is_open=je,t(3,f))}const rt=()=>H0(Ne);function Ae(je){Ve=je,t(11,Ve)}function qe(je){Z=je,t(7,Z)}function Nt(){U=M0(this),t(6,U)}function Ut(){D=this.value,t(5,D)}function Vt(){Q=this.clientWidth,ee=this.clientHeight,t(9,Q),t(10,ee)}return[p,_,u,f,d,D,U,Z,H,Q,ee,Ve,be,Ne,Se,a,h,c,v,T,N,k,B,A,z,j,se,G,$,ae,_e,et,vt,rt,Ae,qe,Nt,Ut,Vt,()=>t(14,Se=!Se),()=>t(14,Se=!Se)]}class _E extends kt{constructor(e){super(),At(this,e,pE,hE,lt,{nodeTypes:0,edgeTypes:1},null,[-1,-1])}get nodeTypes(){return this.$$.ctx[0]}get edgeTypes(){return this.$$.ctx[1]}}function vE(i){let e,t;return e=new _E({}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function mE(i){let e,t;return e=new Ev({props:{$$slots:{default:[vE]},$$scope:{ctx:i}}}),{c(){Re(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,r){Oe(e,n,r),t=!0},p(n,[r]){const s={};r&4&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){ce(e.$$.fragment,n),t=!1},d(n){Be(e,n)}}}function gE(i,e,t){let n,{data:r}=e;return i.$$set=s=>{"data"in s&&t(0,r=s.data)},i.$$.update=()=>{i.$$.dirty&1&&t(1,n=r.remote_d3fend_tree?r.remote_d3fend_tree.map(s=>({...s,children:Al(s.children,s["rdfs:label"])})):[]),i.$$.dirty&3&&(nd.set(n),ad.set(r.attack),id.set(r.dao),sd.set(r.events),ld.set(r.weaknesses),od.set(r.properties))},[r,n]}class XE extends kt{constructor(e){super(),At(this,e,gE,mE,lt,{data:0})}}export{XE as component,qE as universal};

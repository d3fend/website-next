const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/jsonld.CYnguqZs.js","../chunks/_commonjsHelpers.C4iS2aBk.js","../chunks/___vite-browser-external_commonjs-proxy.B2SwpVhP.js"])))=>i.map(i=>d[i]);
import{s as Xa}from"../chunks/sortBy.ChsTRid8.js";import{s as nt,c as Vt,u as zt,g as Ht,a as xt,am as lm,I as ss,e as K,d as Z,f as Ce,i as v,r as re,k as C,o as tt,ao as om,E as ls,J as Mt,p as Re,b as oe,j as ue,as as kt,t as q,h as M,l as z,P as ye,a4 as Wt,ar as kn,m as we,x as mt,W as Fr,n as Me,v as Ke,L as Dt,V as _r,D as wt,O as _t,Y as os,F as on,N as et,a3 as ai,w as zr,al as Bo,a0 as rl,Q as Lo,R as Uo,ap as jo,ak as um,aq as fm}from"../chunks/scheduler.xR-uXgLO.js";import{S as gt,i as bt,t as se,a as ce,g as ut,e as ft,c as Oe,b as Be,m as Le,d as Ue,f as mr,p as qo}from"../chunks/index.BpaDVXPB.js";import{d as cm,w as cr}from"../chunks/index.iaz6iIjv.js";import{e as Ge,u as Mo,o as Vo}from"../chunks/each.BfH-wj2E.js";import{c as us,a as oa}from"../chunks/_commonjsHelpers.C4iS2aBk.js";import{s as zo}from"../chunks/schema.HaQr_DHp.js";import{p as dm}from"../chunks/stores.DiWFdZ6z.js";import{A as fs}from"../chunks/Alert.BOpypHFQ.js";import{T as jn,b as je,a as Eh,G as Al,m as hm,d as Ga,o as pm}from"../chunks/lib._70Mlgse.js";import{c as _m,k as mm,b as Ho,R as ja,u as Pi,X as vm,d as xo,e as Xo,i as gm,g as bm,f as Go,n as Qo,h as $o,j as wm,p as ym,l as Em,r as Dm,H as yt,P as ht,m as km,E as Am,o as Dh,q as nl,S as Cm,C as Tm,B as Nm,a as Sm,M as Im}from"../chunks/style.CaV8822o.js";import{r as Pm}from"../chunks/___vite-browser-external_commonjs-proxy.B2SwpVhP.js";import{_ as Rm}from"../chunks/preload-helper.D6kgxu3v.js";import{G as An}from"../chunks/_Graph.B1ixJej4.js";import{t as Qa,T as kh}from"../chunks/ToggleBar.ChYzQEkc.js";import{s as Wo}from"../chunks/index.BxqCZUUx.js";import{f as Ci}from"../chunks/utils.xEKteSAW.js";import{f as Fm,c as Om,L as Bm}from"../chunks/Loading.B5hKdNm6.js";import{J as Yo}from"../chunks/JSONCrush.BlUS0oeb.js";import{T as Lm}from"../chunks/Title.lz_tL8Gl.js";function Cl(i,e,t=[]){const r=Xa(i,n=>n["rdfs:label"]);for(const n of r)t.push({...n,rootLabel:e}),n.children&&Cl(n.children,e,t);return t}function Tl(i,e,t){for(const r of t)if(e.test(i[r]))return!0;return!1}function Um(i,e,t){if(!e)return i||[];const r=e?new RegExp(e,"i"):null,n=s=>r?Tl(s,r,t):!0;return i.filter(n)}function jm(i,e,t){if(!e)return i||[];const r=e?new RegExp(e,"i"):null,n=a=>r?Tl(a,r,t):!0;return i.reduce((a,l)=>(a.push({...l,children:l.children.filter(n)}),a),[]).filter(a=>a.children.length>0)}function qm(i,e,t){const r=[];function n(s){if(Tl(s,e,t)&&r.push(s),s.children)for(const a of s.children)n(a)}for(const s of i)n(s);return r}function Ah(i,e,t){if(!e)return i||[];const r=new RegExp(e,"i");return qm(i,r,t)}function Jo(i,e){return[...new Map(i.map(t=>[t[e],t])).values()]}function Mm(i,e){const t=i.reduce((s,a)=>(s[a["@id"]]=a,s),{});return i.reduce((s,a)=>(a.hasOwnProperty("rdfs:hasSubClass")&&(a.children=a["rdfs:hasSubClass"].map(l=>t[l["@id"]]),s.push(a)),s),[]).filter(s=>s["rdfs:subClassOf"].some(a=>a["@id"]===e))}function Vm(i){const e=i.reduce((t,r)=>(t[r["@id"]]=r,t),{});return i.forEach(t=>{if(t.hasOwnProperty("rdfs:hasSubClass")){const r=t["rdfs:hasSubClass"];Array.isArray(r)?t.children=r.map(n=>e[n["@id"]]):t.children=[e[r["@id"]]]}}),Xa(e["d3f:DigitalInformation"].children,t=>t["rdfs:label"])}function zm(i){const e=i.reduce((r,n)=>(r[n["@id"]]=n,r),{});return i.forEach(r=>{const n=r["rdfs:subPropertyOf"];if(n)for(const s of n)e[s["@id"]]&&(e[s["@id"]].children?e[s["@id"]].children.push(r):e[s["@id"]].children=[r])}),{associated:i.filter(r=>r["rdfs:subPropertyOf"].some(n=>n["@id"]==="d3f:associated-with"))}}async function Hm({fetch:i}){const e=["/api/offensive-technique/all.json","/api/dao/artifacts.json","/api/taxonomies/d3f:DigitalEvent.json","/api/weakness/all.json","/api/ontology/properties/object/all.json","/api/dao/artifact/d3f:DigitalInformation.json"],[{value:{["@graph"]:t}},{value:{["@graph"]:r}},{value:{["@graph"]:n}},{value:{["@graph"]:s}},{value:{["@graph"]:a}},{value:{da_graph:{["@graph"]:l}}}]=await Promise.allSettled(e.map(h=>i(h).then(_=>_.json()))),o=Xa(Jo(t,"rdfs:label"),h=>h["rdfs:label"]),f=Mm(n,"d3f:DigitalEvent").map(h=>({...h,children:Jo(Cl(h.children,h["rdfs:label"]),"rdfs:label")})),p=Xa(s,h=>h["rdfs:label"]),d=zm(a),c=Vm(l);return{attack:o,dao:r,events:f,weaknesses:p,properties:d,digital_information:c}}const CD=Object.freeze(Object.defineProperty({__proto__:null,load:Hm},Symbol.toStringTag,{value:"Module"}));function xm(i){let e;const t=i[7].default,r=Vt(t,i,i[6],null);return{c(){r&&r.c()},l(n){r&&r.l(n)},m(n,s){r&&r.m(n,s),e=!0},p(n,[s]){r&&r.p&&(!e||s&64)&&zt(r,t,n,n[6],e?xt(t,n[6],s,null):Ht(n[6]),null)},i(n){e||(se(r,n),e=!0)},o(n){ce(r,n),e=!1},d(n){r&&r.d(n)}}}function Xm(i,e,t){let{$$slots:r={},$$scope:n}=e,{initialNodes:s=void 0}=e,{initialEdges:a=void 0}=e,{initialWidth:l=void 0}=e,{initialHeight:o=void 0}=e,{fitView:u=void 0}=e,{nodeOrigin:f=void 0}=e;const p=_m({nodes:s,edges:a,width:l,height:o,nodeOrigin:f,fitView:u});return lm(mm,{getStore:()=>p}),ss(()=>{p.reset()}),i.$$set=d=>{"initialNodes"in d&&t(0,s=d.initialNodes),"initialEdges"in d&&t(1,a=d.initialEdges),"initialWidth"in d&&t(2,l=d.initialWidth),"initialHeight"in d&&t(3,o=d.initialHeight),"fitView"in d&&t(4,u=d.fitView),"nodeOrigin"in d&&t(5,f=d.nodeOrigin),"$$scope"in d&&t(6,n=d.$$scope)},[s,a,l,o,u,f,n,r]}class Gm extends gt{constructor(e){super(),bt(this,e,Xm,xm,nt,{initialNodes:0,initialEdges:1,initialWidth:2,initialHeight:3,fitView:4,nodeOrigin:5})}}function Qm(i){let e,t,r;const n=i[33].default,s=Vt(n,i,i[32],null);return{c(){e=K("div"),s&&s.c(),this.h()},l(a){e=Z(a,"DIV",{class:!0,style:!0});var l=Ce(e);s&&s.l(l),l.forEach(v),this.h()},h(){re(e,"class",t=Ho(["svelte-flow__resize-control","nodrag",...i[4],i[0],i[1]])),re(e,"style",i[3])},m(a,l){C(a,e,l),s&&s.m(e,null),i[34](e),r=!0},p(a,l){s&&s.p&&(!r||l[1]&2)&&zt(s,n,a,a[32],r?xt(n,a[32],l,null):Ht(a[32]),null),(!r||l[0]&19&&t!==(t=Ho(["svelte-flow__resize-control","nodrag",...a[4],a[0],a[1]])))&&re(e,"class",t),(!r||l[0]&8)&&re(e,"style",a[3])},i(a){r||(se(s,a),r=!0)},o(a){ce(s,a),r=!1},d(a){a&&v(e),s&&s.d(a),i[34](null)}}}function $m(i,e,t){let r,n,s,a,l,o,u,f,p,d,c,h,_,m,y,F,{$$slots:T={},$$scope:N}=e,{nodeId:b=void 0}=e,{position:k=void 0}=e,{variant:A=ja.Handle}=e,{color:L=void 0}=e,{minWidth:P=10}=e,{minHeight:B=10}=e,{maxWidth:D=Number.MAX_VALUE}=e,{maxHeight:R=Number.MAX_VALUE}=e,{keepAspectRatio:w=!1}=e,{shouldResize:S=void 0}=e,{onResizeStart:X=void 0}=e,{onResize:j=void 0}=e,{onResizeEnd:ne=void 0}=e,{style:J=""}=e,{class:W=""}=e;const{nodeLookup:x,snapGrid:G,viewport:le,nodes:Q,nodeOrigin:ae}=Pi();tt(i,x,ve=>t(37,_=ve)),tt(i,G,ve=>t(39,y=ve)),tt(i,le,ve=>t(40,F=ve)),tt(i,Q,ve=>t(36,h=ve)),tt(i,ae,ve=>t(38,m=ve));const Ve=om("svelteflow__node_id");let ze,De=null;ls(()=>(ze&&t(23,De=vm({domNode:ze,nodeId:l,getStoreItems:()=>({nodeLookup:_,transform:[F.x,F.y,F.zoom],snapGrid:y??void 0,snapToGrid:!!y,nodeOrigin:m}),onChange:(ve,he)=>{var lt,He;const Fe=(lt=_.get(l))==null?void 0:lt.internals.userNode;if(Fe){ve.x!==void 0&&ve.y!==void 0&&(Fe.position={x:ve.x,y:ve.y}),ve.width!==void 0&&ve.height!==void 0&&(Fe.width=ve.width,Fe.height=ve.height);for(const fe of he){const Te=(He=_.get(fe.id))==null?void 0:He.internals.userNode;Te&&(Te.position=fe.position)}Q.set(h)}}})),()=>{De==null||De.destroy()}));function Pe(ve){Mt[ve?"unshift":"push"](()=>{ze=ve,t(2,ze)})}return i.$$set=ve=>{"nodeId"in ve&&t(10,b=ve.nodeId),"position"in ve&&t(11,k=ve.position),"variant"in ve&&t(0,A=ve.variant),"color"in ve&&t(12,L=ve.color),"minWidth"in ve&&t(13,P=ve.minWidth),"minHeight"in ve&&t(14,B=ve.minHeight),"maxWidth"in ve&&t(15,D=ve.maxWidth),"maxHeight"in ve&&t(16,R=ve.maxHeight),"keepAspectRatio"in ve&&t(17,w=ve.keepAspectRatio),"shouldResize"in ve&&t(18,S=ve.shouldResize),"onResizeStart"in ve&&t(19,X=ve.onResizeStart),"onResize"in ve&&t(20,j=ve.onResize),"onResizeEnd"in ve&&t(21,ne=ve.onResizeEnd),"style"in ve&&t(22,J=ve.style),"class"in ve&&t(1,W=ve.class),"$$scope"in ve&&t(32,N=ve.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&8192&&t(27,r=P??10),i.$$.dirty[0]&16384&&t(26,n=B??10),i.$$.dirty[0]&32768&&t(25,s=D??Number.MAX_VALUE),i.$$.dirty[0]&65536&&t(24,a=R??Number.MAX_VALUE),i.$$.dirty[0]&1024&&(l=typeof b=="string"?b:Ve),i.$$.dirty[0]&1&&t(31,o=A===ja.Line?"right":"bottom-right"),i.$$.dirty[0]&2048|i.$$.dirty[1]&1&&t(28,u=k??o),i.$$.dirty[0]&268435456&&t(4,f=u.split("-")),i.$$.dirty[0]&1&&t(30,p=A===ja.Line?"border-color":"background-color"),i.$$.dirty[0]&4194304&&t(29,d=J??""),i.$$.dirty[0]&1610616832&&t(3,c=L?`${d} ${p}: ${L};`:d),i.$$.dirty[0]&532545536&&(De==null||De.update({controlPosition:u,boundaries:{minWidth:r,minHeight:n,maxWidth:s,maxHeight:a},keepAspectRatio:!!w,onResizeStart:X,onResize:j,onResizeEnd:ne,shouldResize:S}))},[A,W,ze,c,f,x,G,le,Q,ae,b,k,L,P,B,D,R,w,S,X,j,ne,J,De,a,s,n,r,u,d,p,o,N,T,Pe]}class Ch extends gt{constructor(e){super(),bt(this,e,$m,Qm,nt,{nodeId:10,position:11,variant:0,color:12,minWidth:13,minHeight:14,maxWidth:15,maxHeight:16,keepAspectRatio:17,shouldResize:18,onResizeStart:19,onResize:20,onResizeEnd:21,style:22,class:1},null,[-1,-1])}}function Ko(i,e,t){const r=i.slice();return r[20]=e[t],r}function Zo(i,e,t){const r=i.slice();return r[20]=e[t],r}function eu(i){let e=[],t=new Map,r,n=[],s=new Map,a,l,o=Ge(xo);const u=d=>d[20];for(let d=0;d<o.length;d+=1){let c=Zo(i,o,d),h=u(c);t.set(h,e[d]=tu(h,c))}let f=Ge(Xo);const p=d=>d[20];for(let d=0;d<f.length;d+=1){let c=Ko(i,f,d),h=p(c);s.set(h,n[d]=ru(h,c))}return{c(){for(let d=0;d<e.length;d+=1)e[d].c();r=oe();for(let d=0;d<n.length;d+=1)n[d].c();a=Re()},l(d){for(let c=0;c<e.length;c+=1)e[c].l(d);r=ue(d);for(let c=0;c<n.length;c+=1)n[c].l(d);a=Re()},m(d,c){for(let h=0;h<e.length;h+=1)e[h]&&e[h].m(d,c);C(d,r,c);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(d,c);C(d,a,c),l=!0},p(d,c){c&65521&&(o=Ge(xo),ut(),e=Mo(e,c,u,1,d,o,t,r.parentNode,Vo,tu,r,Zo),ft()),c&65485&&(f=Ge(Xo),ut(),n=Mo(n,c,p,1,d,f,s,a.parentNode,Vo,ru,a,Ko),ft())},i(d){if(!l){for(let c=0;c<o.length;c+=1)se(e[c]);for(let c=0;c<f.length;c+=1)se(n[c]);l=!0}},o(d){for(let c=0;c<e.length;c+=1)ce(e[c]);for(let c=0;c<n.length;c+=1)ce(n[c]);l=!1},d(d){d&&(v(r),v(a));for(let c=0;c<e.length;c+=1)e[c].d(d);for(let c=0;c<n.length;c+=1)n[c].d(d)}}}function tu(i,e){let t,r,n;return r=new Ch({props:{class:e[4],style:e[5],nodeId:e[0],position:e[20],variant:ja.Line,color:e[6],minWidth:e[12],minHeight:e[13],maxWidth:e[14],maxHeight:e[15],onResizeStart:e[9],keepAspectRatio:e[7],shouldResize:e[8],onResize:e[10],onResizeEnd:e[11]}}),{key:i,first:null,c(){t=Re(),Oe(r.$$.fragment),this.h()},l(s){t=Re(),Be(r.$$.fragment,s),this.h()},h(){this.first=t},m(s,a){C(s,t,a),Le(r,s,a),n=!0},p(s,a){e=s;const l={};a&16&&(l.class=e[4]),a&32&&(l.style=e[5]),a&1&&(l.nodeId=e[0]),a&64&&(l.color=e[6]),a&512&&(l.onResizeStart=e[9]),a&128&&(l.keepAspectRatio=e[7]),a&256&&(l.shouldResize=e[8]),a&1024&&(l.onResize=e[10]),a&2048&&(l.onResizeEnd=e[11]),r.$set(l)},i(s){n||(se(r.$$.fragment,s),n=!0)},o(s){ce(r.$$.fragment,s),n=!1},d(s){s&&v(t),Ue(r,s)}}}function ru(i,e){let t,r,n;return r=new Ch({props:{class:e[2],style:e[3],nodeId:e[0],position:e[20],color:e[6],minWidth:e[12],minHeight:e[13],maxWidth:e[14],maxHeight:e[15],onResizeStart:e[9],keepAspectRatio:e[7],shouldResize:e[8],onResize:e[10],onResizeEnd:e[11]}}),{key:i,first:null,c(){t=Re(),Oe(r.$$.fragment),this.h()},l(s){t=Re(),Be(r.$$.fragment,s),this.h()},h(){this.first=t},m(s,a){C(s,t,a),Le(r,s,a),n=!0},p(s,a){e=s;const l={};a&4&&(l.class=e[2]),a&8&&(l.style=e[3]),a&1&&(l.nodeId=e[0]),a&64&&(l.color=e[6]),a&512&&(l.onResizeStart=e[9]),a&128&&(l.keepAspectRatio=e[7]),a&256&&(l.shouldResize=e[8]),a&1024&&(l.onResize=e[10]),a&2048&&(l.onResizeEnd=e[11]),r.$set(l)},i(s){n||(se(r.$$.fragment,s),n=!0)},o(s){ce(r.$$.fragment,s),n=!1},d(s){s&&v(t),Ue(r,s)}}}function Wm(i){let e,t,r=i[1]&&eu(i);return{c(){r&&r.c(),e=Re()},l(n){r&&r.l(n),e=Re()},m(n,s){r&&r.m(n,s),C(n,e,s),t=!0},p(n,[s]){n[1]?r?(r.p(n,s),s&2&&se(r,1)):(r=eu(n),r.c(),se(r,1),r.m(e.parentNode,e)):r&&(ut(),ce(r,1,1,()=>{r=null}),ft())},i(n){t||(se(r),t=!0)},o(n){ce(r),t=!1},d(n){n&&v(e),r&&r.d(n)}}}function Ym(i,e,t){let{nodeId:r=void 0}=e,{isVisible:n=!0}=e,{handleClass:s=void 0}=e,{handleStyle:a=void 0}=e,{lineClass:l=void 0}=e,{lineStyle:o=void 0}=e,{color:u=void 0}=e,{minWidth:f=10}=e,{minHeight:p=10}=e,{maxWidth:d=Number.MAX_VALUE}=e,{maxHeight:c=Number.MAX_VALUE}=e,{keepAspectRatio:h=!1}=e,{shouldResize:_=void 0}=e,{onResizeStart:m=void 0}=e,{onResize:y=void 0}=e,{onResizeEnd:F=void 0}=e,T=f||10,N=p||10,b=d||Number.MAX_VALUE,k=c||Number.MAX_VALUE;return i.$$set=A=>{"nodeId"in A&&t(0,r=A.nodeId),"isVisible"in A&&t(1,n=A.isVisible),"handleClass"in A&&t(2,s=A.handleClass),"handleStyle"in A&&t(3,a=A.handleStyle),"lineClass"in A&&t(4,l=A.lineClass),"lineStyle"in A&&t(5,o=A.lineStyle),"color"in A&&t(6,u=A.color),"minWidth"in A&&t(16,f=A.minWidth),"minHeight"in A&&t(17,p=A.minHeight),"maxWidth"in A&&t(18,d=A.maxWidth),"maxHeight"in A&&t(19,c=A.maxHeight),"keepAspectRatio"in A&&t(7,h=A.keepAspectRatio),"shouldResize"in A&&t(8,_=A.shouldResize),"onResizeStart"in A&&t(9,m=A.onResizeStart),"onResize"in A&&t(10,y=A.onResize),"onResizeEnd"in A&&t(11,F=A.onResizeEnd)},[r,n,s,a,l,o,u,h,_,m,y,F,T,N,b,k,f,p,d,c]}class Mn extends gt{constructor(e){super(),bt(this,e,Ym,Wm,nt,{nodeId:0,isVisible:1,handleClass:2,handleStyle:3,lineClass:4,lineStyle:5,color:6,minWidth:16,minHeight:17,maxWidth:18,maxHeight:19,keepAspectRatio:7,shouldResize:8,onResizeStart:9,onResize:10,onResizeEnd:11})}}const nu=i=>gm(i);function Jm(){const{zoomIn:i,zoomOut:e,fitView:t,onbeforedelete:r,snapGrid:n,viewport:s,width:a,height:l,minZoom:o,maxZoom:u,panZoom:f,nodes:p,edges:d,domNode:c,nodeLookup:h,edgeLookup:_,nodeOrigin:m}=Pi(),y=N=>{var P,B;const b=kt(h),k=nu(N)?N:b.get(N.id),A=k.parentId?Em(k.position,k.measured,k.parentId,b,kt(m)):k.position,L={id:k.id,position:A,width:((P=k.measured)==null?void 0:P.width)??k.width,height:((B=k.measured)==null?void 0:B.height)??k.height,data:k.data};return Qo(L)},F=(N,b,k={replace:!1})=>{var P;const A=(P=kt(h).get(N))==null?void 0:P.internals.userNode;if(!A)return;const L=typeof b=="function"?b(A):b;k.replace?p.update(B=>B.map(D=>D.id===N?nu(L)?L:{...D,...L}:D)):(Object.assign(A,L),p.update(B=>B))},T=N=>kt(h).get(N);return{zoomIn:i,zoomOut:e,getInternalNode:T,getNode:N=>{var b;return(b=T(N))==null?void 0:b.internals.userNode},getNodes:N=>N===void 0?kt(p):iu(kt(h),N),getEdge:N=>kt(_).get(N),getEdges:N=>N===void 0?kt(d):iu(kt(_),N),setZoom:(N,b)=>{const k=kt(f);return k?k.scaleTo(N,{duration:b==null?void 0:b.duration}):Promise.resolve(!1)},getZoom:()=>kt(s).zoom,setViewport:async(N,b)=>{const k=kt(s),A=kt(f);return A?(await A.setViewport({x:N.x??k.x,y:N.y??k.y,zoom:N.zoom??k.zoom},{duration:b==null?void 0:b.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>kt(s),setCenter:async(N,b,k)=>{const A=typeof(k==null?void 0:k.zoom)<"u"?k.zoom:kt(u),L=kt(f);return L?(await L.setViewport({x:kt(a)/2-N*A,y:kt(l)/2-b*A,zoom:A},{duration:k==null?void 0:k.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:t,fitBounds:async(N,b)=>{const k=kt(f);if(!k)return Promise.resolve(!1);const A=bm(N,kt(a),kt(l),kt(o),kt(u),(b==null?void 0:b.padding)??.1);return await k.setViewport(A,{duration:b==null?void 0:b.duration}),Promise.resolve(!0)},getIntersectingNodes:(N,b=!0,k)=>{const A=Go(N),L=A?N:y(N);return L?(k||kt(p)).filter(P=>{const B=kt(h).get(P.id);if(!B||!A&&P.id===N.id)return!1;const D=Qo(B),R=$o(D,L);return b&&R>0||R>=L.width*L.height}):[]},isNodeIntersecting:(N,b,k=!0)=>{const L=Go(N)?N:y(N);if(!L)return!1;const P=$o(L,b);return k&&P>0||P>=L.width*L.height},deleteElements:async({nodes:N=[],edges:b=[]})=>{const{nodes:k,edges:A}=await wm({nodesToRemove:N,edgesToRemove:b,nodes:kt(p),edges:kt(d),onBeforeDelete:kt(r)});return k&&p.update(L=>L.filter(P=>!k.some(({id:B})=>B===P.id))),A&&d.update(L=>L.filter(P=>!A.some(({id:B})=>B===P.id))),{deletedNodes:k,deletedEdges:A}},screenToFlowPosition:(N,b={snapToGrid:!0})=>{const k=kt(c);if(!k)return N;const A=b.snapToGrid?kt(n):!1,{x:L,y:P,zoom:B}=kt(s),{x:D,y:R}=k.getBoundingClientRect(),w={x:N.x-D,y:N.y-R};return ym(w,[L,P,B],A!==null,A||[1,1])},flowToScreenPosition:N=>{const b=kt(c);if(!b)return N;const{x:k,y:A,zoom:L}=kt(s),{x:P,y:B}=b.getBoundingClientRect(),D=Dm(N,[k,A,L]);return{x:D.x+P,y:D.y+B}},toObject:()=>({nodes:kt(p).map(N=>({...N,position:{...N.position},data:{...N.data}})),edges:kt(d).map(N=>({...N})),viewport:{...kt(s)}}),updateNode:F,updateNodeData:(N,b,k)=>{var P;const A=(P=kt(h).get(N))==null?void 0:P.internals.userNode;if(!A)return;const L=typeof b=="function"?b(A):b;A.data=k!=null&&k.replace?L:{...A.data,...L},p.update(B=>B)},viewport:s}}function iu(i,e){var r;const t=[];for(const n of e){const s=i.get(n);if(s){const a="internals"in s?(r=s.internals)==null?void 0:r.userNode:s;t.push(a)}}return t}function Cn(){const{connection:i}=Pi();return i}function Qr(){const{nodes:i}=Pi();return i}function $r(){const{edges:i}=Pi();return i}function au(i){const{nodeLookup:e,nodes:t}=Pi();return cm([e,t],([r])=>r.get(i))}const Th=cr([]),Nh=cr([]),Sh=cr([]),Ih=cr([]),Ph=cr([]),Rh=cr([]),Fh=cr([]);function Km(){const{subscribe:i,set:e,update:t}=cr();return{subscribe:i,update:t,add:r=>e(r),clear:()=>e()}}const Pr=Km();var il={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(i,e){(function(t,r){r(e)})(us,function(t){function r(){for(var pe=arguments.length,ie=Array(pe),ge=0;ge<pe;ge++)ie[ge]=arguments[ge];if(ie.length>1){ie[0]=ie[0].slice(0,-1);for(var Se=ie.length-1,Ne=1;Ne<Se;++Ne)ie[Ne]=ie[Ne].slice(1,-1);return ie[Se]=ie[Se].slice(1),ie.join("")}else return ie[0]}function n(pe){return"(?:"+pe+")"}function s(pe){return pe===void 0?"undefined":pe===null?"null":Object.prototype.toString.call(pe).split(" ").pop().split("]").shift().toLowerCase()}function a(pe){return pe.toUpperCase()}function l(pe){return pe!=null?pe instanceof Array?pe:typeof pe.length!="number"||pe.split||pe.setInterval||pe.call?[pe]:Array.prototype.slice.call(pe):[]}function o(pe,ie){var ge=pe;if(ie)for(var Se in ie)ge[Se]=ie[Se];return ge}function u(pe){var ie="[A-Za-z]",ge="[0-9]",Se=r(ge,"[A-Fa-f]"),Ne=n(n("%[EFef]"+Se+"%"+Se+Se+"%"+Se+Se)+"|"+n("%[89A-Fa-f]"+Se+"%"+Se+Se)+"|"+n("%"+Se+Se)),rt="[\\:\\/\\?\\#\\[\\]\\@]",We="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",at=r(rt,We),Bt=pe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",er=pe?"[\\uE000-\\uF8FF]":"[]",Et=r(ie,ge,"[\\-\\.\\_\\~]",Bt);n(ie+r(ie,ge,"[\\+\\-\\.]")+"*"),n(n(Ne+"|"+r(Et,We,"[\\:]"))+"*");var Nt=n(n("25[0-5]")+"|"+n("2[0-4]"+ge)+"|"+n("1"+ge+ge)+"|"+n("0?[1-9]"+ge)+"|0?0?"+ge),Xt=n(Nt+"\\."+Nt+"\\."+Nt+"\\."+Nt),ct=n(Se+"{1,4}"),St=n(n(ct+"\\:"+ct)+"|"+Xt),Gt=n(n(ct+"\\:")+"{6}"+St),Lt=n("\\:\\:"+n(ct+"\\:")+"{5}"+St),Yr=n(n(ct)+"?\\:\\:"+n(ct+"\\:")+"{4}"+St),br=n(n(n(ct+"\\:")+"{0,1}"+ct)+"?\\:\\:"+n(ct+"\\:")+"{3}"+St),wr=n(n(n(ct+"\\:")+"{0,2}"+ct)+"?\\:\\:"+n(ct+"\\:")+"{2}"+St),Pn=n(n(n(ct+"\\:")+"{0,3}"+ct)+"?\\:\\:"+ct+"\\:"+St),pn=n(n(n(ct+"\\:")+"{0,4}"+ct)+"?\\:\\:"+St),Dr=n(n(n(ct+"\\:")+"{0,5}"+ct)+"?\\:\\:"+ct),Br=n(n(n(ct+"\\:")+"{0,6}"+ct)+"?\\:\\:"),_n=n([Gt,Lt,Yr,br,wr,Pn,pn,Dr,Br].join("|")),kr=n(n(Et+"|"+Ne)+"+");n("[vV]"+Se+"+\\."+r(Et,We,"[\\:]")+"+"),n(n(Ne+"|"+r(Et,We))+"*");var Jr=n(Ne+"|"+r(Et,We,"[\\:\\@]"));return n(n(Ne+"|"+r(Et,We,"[\\@]"))+"+"),n(n(Jr+"|"+r("[\\/\\?]",er))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ie,ge,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",Et,We),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",Et,We),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",Et,We),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",Et,We),"g"),NOT_QUERY:new RegExp(r("[^\\%]",Et,We,"[\\:\\@\\/\\?]",er),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",Et,We,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",Et,We),"g"),UNRESERVED:new RegExp(Et,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",Et,at),"g"),PCT_ENCODED:new RegExp(Ne,"g"),IPV4ADDRESS:new RegExp("^("+Xt+")$"),IPV6ADDRESS:new RegExp("^\\[?("+_n+")"+n(n("\\%25|\\%(?!"+Se+"{2})")+"("+kr+")")+"?\\]?$")}}var f=u(!1),p=u(!0),d=function(){function pe(ie,ge){var Se=[],Ne=!0,rt=!1,We=void 0;try{for(var at=ie[Symbol.iterator](),Bt;!(Ne=(Bt=at.next()).done)&&(Se.push(Bt.value),!(ge&&Se.length===ge));Ne=!0);}catch(er){rt=!0,We=er}finally{try{!Ne&&at.return&&at.return()}finally{if(rt)throw We}}return Se}return function(ie,ge){if(Array.isArray(ie))return ie;if(Symbol.iterator in Object(ie))return pe(ie,ge);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(pe){if(Array.isArray(pe)){for(var ie=0,ge=Array(pe.length);ie<pe.length;ie++)ge[ie]=pe[ie];return ge}else return Array.from(pe)},h=2147483647,_=36,m=1,y=26,F=38,T=700,N=72,b=128,k="-",A=/^xn--/,L=/[^\0-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,B={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=_-m,R=Math.floor,w=String.fromCharCode;function S(pe){throw new RangeError(B[pe])}function X(pe,ie){for(var ge=[],Se=pe.length;Se--;)ge[Se]=ie(pe[Se]);return ge}function j(pe,ie){var ge=pe.split("@"),Se="";ge.length>1&&(Se=ge[0]+"@",pe=ge[1]),pe=pe.replace(P,".");var Ne=pe.split("."),rt=X(Ne,ie).join(".");return Se+rt}function ne(pe){for(var ie=[],ge=0,Se=pe.length;ge<Se;){var Ne=pe.charCodeAt(ge++);if(Ne>=55296&&Ne<=56319&&ge<Se){var rt=pe.charCodeAt(ge++);(rt&64512)==56320?ie.push(((Ne&1023)<<10)+(rt&1023)+65536):(ie.push(Ne),ge--)}else ie.push(Ne)}return ie}var J=function(ie){return String.fromCodePoint.apply(String,c(ie))},W=function(ie){return ie-48<10?ie-22:ie-65<26?ie-65:ie-97<26?ie-97:_},x=function(ie,ge){return ie+22+75*(ie<26)-((ge!=0)<<5)},G=function(ie,ge,Se){var Ne=0;for(ie=Se?R(ie/T):ie>>1,ie+=R(ie/ge);ie>D*y>>1;Ne+=_)ie=R(ie/D);return R(Ne+(D+1)*ie/(ie+F))},le=function(ie){var ge=[],Se=ie.length,Ne=0,rt=b,We=N,at=ie.lastIndexOf(k);at<0&&(at=0);for(var Bt=0;Bt<at;++Bt)ie.charCodeAt(Bt)>=128&&S("not-basic"),ge.push(ie.charCodeAt(Bt));for(var er=at>0?at+1:0;er<Se;){for(var Et=Ne,Nt=1,Xt=_;;Xt+=_){er>=Se&&S("invalid-input");var ct=W(ie.charCodeAt(er++));(ct>=_||ct>R((h-Ne)/Nt))&&S("overflow"),Ne+=ct*Nt;var St=Xt<=We?m:Xt>=We+y?y:Xt-We;if(ct<St)break;var Gt=_-St;Nt>R(h/Gt)&&S("overflow"),Nt*=Gt}var Lt=ge.length+1;We=G(Ne-Et,Lt,Et==0),R(Ne/Lt)>h-rt&&S("overflow"),rt+=R(Ne/Lt),Ne%=Lt,ge.splice(Ne++,0,rt)}return String.fromCodePoint.apply(String,ge)},Q=function(ie){var ge=[];ie=ne(ie);var Se=ie.length,Ne=b,rt=0,We=N,at=!0,Bt=!1,er=void 0;try{for(var Et=ie[Symbol.iterator](),Nt;!(at=(Nt=Et.next()).done);at=!0){var Xt=Nt.value;Xt<128&&ge.push(w(Xt))}}catch(Rn){Bt=!0,er=Rn}finally{try{!at&&Et.return&&Et.return()}finally{if(Bt)throw er}}var ct=ge.length,St=ct;for(ct&&ge.push(k);St<Se;){var Gt=h,Lt=!0,Yr=!1,br=void 0;try{for(var wr=ie[Symbol.iterator](),Pn;!(Lt=(Pn=wr.next()).done);Lt=!0){var pn=Pn.value;pn>=Ne&&pn<Gt&&(Gt=pn)}}catch(Rn){Yr=!0,br=Rn}finally{try{!Lt&&wr.return&&wr.return()}finally{if(Yr)throw br}}var Dr=St+1;Gt-Ne>R((h-rt)/Dr)&&S("overflow"),rt+=(Gt-Ne)*Dr,Ne=Gt;var Br=!0,_n=!1,kr=void 0;try{for(var Jr=ie[Symbol.iterator](),ji;!(Br=(ji=Jr.next()).done);Br=!0){var qi=ji.value;if(qi<Ne&&++rt>h&&S("overflow"),qi==Ne){for(var mn=rt,vn=_;;vn+=_){var Qn=vn<=We?m:vn>=We+y?y:vn-We;if(mn<Qn)break;var Mi=mn-Qn,$n=_-Qn;ge.push(w(x(Qn+Mi%$n,0))),mn=R(Mi/$n)}ge.push(w(x(mn,0))),We=G(rt,Dr,St==ct),rt=0,++St}}}catch(Rn){_n=!0,kr=Rn}finally{try{!Br&&Jr.return&&Jr.return()}finally{if(_n)throw kr}}++rt,++Ne}return ge.join("")},ae=function(ie){return j(ie,function(ge){return A.test(ge)?le(ge.slice(4).toLowerCase()):ge})},Ve=function(ie){return j(ie,function(ge){return L.test(ge)?"xn--"+Q(ge):ge})},ze={version:"2.1.0",ucs2:{decode:ne,encode:J},decode:le,encode:Q,toASCII:Ve,toUnicode:ae},De={};function Pe(pe){var ie=pe.charCodeAt(0),ge=void 0;return ie<16?ge="%0"+ie.toString(16).toUpperCase():ie<128?ge="%"+ie.toString(16).toUpperCase():ie<2048?ge="%"+(ie>>6|192).toString(16).toUpperCase()+"%"+(ie&63|128).toString(16).toUpperCase():ge="%"+(ie>>12|224).toString(16).toUpperCase()+"%"+(ie>>6&63|128).toString(16).toUpperCase()+"%"+(ie&63|128).toString(16).toUpperCase(),ge}function ve(pe){for(var ie="",ge=0,Se=pe.length;ge<Se;){var Ne=parseInt(pe.substr(ge+1,2),16);if(Ne<128)ie+=String.fromCharCode(Ne),ge+=3;else if(Ne>=194&&Ne<224){if(Se-ge>=6){var rt=parseInt(pe.substr(ge+4,2),16);ie+=String.fromCharCode((Ne&31)<<6|rt&63)}else ie+=pe.substr(ge,6);ge+=6}else if(Ne>=224){if(Se-ge>=9){var We=parseInt(pe.substr(ge+4,2),16),at=parseInt(pe.substr(ge+7,2),16);ie+=String.fromCharCode((Ne&15)<<12|(We&63)<<6|at&63)}else ie+=pe.substr(ge,9);ge+=9}else ie+=pe.substr(ge,3),ge+=3}return ie}function he(pe,ie){function ge(Se){var Ne=ve(Se);return Ne.match(ie.UNRESERVED)?Ne:Se}return pe.scheme&&(pe.scheme=String(pe.scheme).replace(ie.PCT_ENCODED,ge).toLowerCase().replace(ie.NOT_SCHEME,"")),pe.userinfo!==void 0&&(pe.userinfo=String(pe.userinfo).replace(ie.PCT_ENCODED,ge).replace(ie.NOT_USERINFO,Pe).replace(ie.PCT_ENCODED,a)),pe.host!==void 0&&(pe.host=String(pe.host).replace(ie.PCT_ENCODED,ge).toLowerCase().replace(ie.NOT_HOST,Pe).replace(ie.PCT_ENCODED,a)),pe.path!==void 0&&(pe.path=String(pe.path).replace(ie.PCT_ENCODED,ge).replace(pe.scheme?ie.NOT_PATH:ie.NOT_PATH_NOSCHEME,Pe).replace(ie.PCT_ENCODED,a)),pe.query!==void 0&&(pe.query=String(pe.query).replace(ie.PCT_ENCODED,ge).replace(ie.NOT_QUERY,Pe).replace(ie.PCT_ENCODED,a)),pe.fragment!==void 0&&(pe.fragment=String(pe.fragment).replace(ie.PCT_ENCODED,ge).replace(ie.NOT_FRAGMENT,Pe).replace(ie.PCT_ENCODED,a)),pe}function Fe(pe){return pe.replace(/^0*(.*)/,"$1")||"0"}function lt(pe,ie){var ge=pe.match(ie.IPV4ADDRESS)||[],Se=d(ge,2),Ne=Se[1];return Ne?Ne.split(".").map(Fe).join("."):pe}function He(pe,ie){var ge=pe.match(ie.IPV6ADDRESS)||[],Se=d(ge,3),Ne=Se[1],rt=Se[2];if(Ne){for(var We=Ne.toLowerCase().split("::").reverse(),at=d(We,2),Bt=at[0],er=at[1],Et=er?er.split(":").map(Fe):[],Nt=Bt.split(":").map(Fe),Xt=ie.IPV4ADDRESS.test(Nt[Nt.length-1]),ct=Xt?7:8,St=Nt.length-ct,Gt=Array(ct),Lt=0;Lt<ct;++Lt)Gt[Lt]=Et[Lt]||Nt[St+Lt]||"";Xt&&(Gt[ct-1]=lt(Gt[ct-1],ie));var Yr=Gt.reduce(function(Dr,Br,_n){if(!Br||Br==="0"){var kr=Dr[Dr.length-1];kr&&kr.index+kr.length===_n?kr.length++:Dr.push({index:_n,length:1})}return Dr},[]),br=Yr.sort(function(Dr,Br){return Br.length-Dr.length})[0],wr=void 0;if(br&&br.length>1){var Pn=Gt.slice(0,br.index),pn=Gt.slice(br.index+br.length);wr=Pn.join(":")+"::"+pn.join(":")}else wr=Gt.join(":");return rt&&(wr+="%"+rt),wr}else return pe}var fe=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Te="".match(/(){0}/)[1]===void 0;function dt(pe){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge={},Se=ie.iri!==!1?p:f;ie.reference==="suffix"&&(pe=(ie.scheme?ie.scheme+":":"")+"//"+pe);var Ne=pe.match(fe);if(Ne){Te?(ge.scheme=Ne[1],ge.userinfo=Ne[3],ge.host=Ne[4],ge.port=parseInt(Ne[5],10),ge.path=Ne[6]||"",ge.query=Ne[7],ge.fragment=Ne[8],isNaN(ge.port)&&(ge.port=Ne[5])):(ge.scheme=Ne[1]||void 0,ge.userinfo=pe.indexOf("@")!==-1?Ne[3]:void 0,ge.host=pe.indexOf("//")!==-1?Ne[4]:void 0,ge.port=parseInt(Ne[5],10),ge.path=Ne[6]||"",ge.query=pe.indexOf("?")!==-1?Ne[7]:void 0,ge.fragment=pe.indexOf("#")!==-1?Ne[8]:void 0,isNaN(ge.port)&&(ge.port=pe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Ne[4]:void 0)),ge.host&&(ge.host=He(lt(ge.host,Se),Se)),ge.scheme===void 0&&ge.userinfo===void 0&&ge.host===void 0&&ge.port===void 0&&!ge.path&&ge.query===void 0?ge.reference="same-document":ge.scheme===void 0?ge.reference="relative":ge.fragment===void 0?ge.reference="absolute":ge.reference="uri",ie.reference&&ie.reference!=="suffix"&&ie.reference!==ge.reference&&(ge.error=ge.error||"URI is not a "+ie.reference+" reference.");var rt=De[(ie.scheme||ge.scheme||"").toLowerCase()];if(!ie.unicodeSupport&&(!rt||!rt.unicodeSupport)){if(ge.host&&(ie.domainHost||rt&&rt.domainHost))try{ge.host=ze.toASCII(ge.host.replace(Se.PCT_ENCODED,ve).toLowerCase())}catch(We){ge.error=ge.error||"Host's domain name can not be converted to ASCII via punycode: "+We}he(ge,f)}else he(ge,Se);rt&&rt.parse&&rt.parse(ge,ie)}else ge.error=ge.error||"URI can not be parsed.";return ge}function Ot(pe,ie){var ge=ie.iri!==!1?p:f,Se=[];return pe.userinfo!==void 0&&(Se.push(pe.userinfo),Se.push("@")),pe.host!==void 0&&Se.push(He(lt(String(pe.host),ge),ge).replace(ge.IPV6ADDRESS,function(Ne,rt,We){return"["+rt+(We?"%25"+We:"")+"]"})),(typeof pe.port=="number"||typeof pe.port=="string")&&(Se.push(":"),Se.push(String(pe.port))),Se.length?Se.join(""):void 0}var tr=/^\.\.?\//,At=/^\/\.(\/|$)/,Qt=/^\/\.\.(\/|$)/,Kt=/^\/?(?:.|\n)*?(?=\/|$)/;function pt(pe){for(var ie=[];pe.length;)if(pe.match(tr))pe=pe.replace(tr,"");else if(pe.match(At))pe=pe.replace(At,"/");else if(pe.match(Qt))pe=pe.replace(Qt,"/"),ie.pop();else if(pe==="."||pe==="..")pe="";else{var ge=pe.match(Kt);if(ge){var Se=ge[0];pe=pe.slice(Se.length),ie.push(Se)}else throw new Error("Unexpected dot segment condition")}return ie.join("")}function Ct(pe){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge=ie.iri?p:f,Se=[],Ne=De[(ie.scheme||pe.scheme||"").toLowerCase()];if(Ne&&Ne.serialize&&Ne.serialize(pe,ie),pe.host&&!ge.IPV6ADDRESS.test(pe.host)){if(ie.domainHost||Ne&&Ne.domainHost)try{pe.host=ie.iri?ze.toUnicode(pe.host):ze.toASCII(pe.host.replace(ge.PCT_ENCODED,ve).toLowerCase())}catch(at){pe.error=pe.error||"Host's domain name can not be converted to "+(ie.iri?"Unicode":"ASCII")+" via punycode: "+at}}he(pe,ge),ie.reference!=="suffix"&&pe.scheme&&(Se.push(pe.scheme),Se.push(":"));var rt=Ot(pe,ie);if(rt!==void 0&&(ie.reference!=="suffix"&&Se.push("//"),Se.push(rt),pe.path&&pe.path.charAt(0)!=="/"&&Se.push("/")),pe.path!==void 0){var We=pe.path;!ie.absolutePath&&(!Ne||!Ne.absolutePath)&&(We=pt(We)),rt===void 0&&(We=We.replace(/^\/\//,"/%2F")),Se.push(We)}return pe.query!==void 0&&(Se.push("?"),Se.push(pe.query)),pe.fragment!==void 0&&(Se.push("#"),Se.push(pe.fragment)),Se.join("")}function Ut(pe,ie){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Se=arguments[3],Ne={};return Se||(pe=dt(Ct(pe,ge),ge),ie=dt(Ct(ie,ge),ge)),ge=ge||{},!ge.tolerant&&ie.scheme?(Ne.scheme=ie.scheme,Ne.userinfo=ie.userinfo,Ne.host=ie.host,Ne.port=ie.port,Ne.path=pt(ie.path||""),Ne.query=ie.query):(ie.userinfo!==void 0||ie.host!==void 0||ie.port!==void 0?(Ne.userinfo=ie.userinfo,Ne.host=ie.host,Ne.port=ie.port,Ne.path=pt(ie.path||""),Ne.query=ie.query):(ie.path?(ie.path.charAt(0)==="/"?Ne.path=pt(ie.path):((pe.userinfo!==void 0||pe.host!==void 0||pe.port!==void 0)&&!pe.path?Ne.path="/"+ie.path:pe.path?Ne.path=pe.path.slice(0,pe.path.lastIndexOf("/")+1)+ie.path:Ne.path=ie.path,Ne.path=pt(Ne.path)),Ne.query=ie.query):(Ne.path=pe.path,ie.query!==void 0?Ne.query=ie.query:Ne.query=pe.query),Ne.userinfo=pe.userinfo,Ne.host=pe.host,Ne.port=pe.port),Ne.scheme=pe.scheme),Ne.fragment=ie.fragment,Ne}function Zt(pe,ie,ge){var Se=o({scheme:"null"},ge);return Ct(Ut(dt(pe,Se),dt(ie,Se),Se,!0),Se)}function pr(pe,ie){return typeof pe=="string"?pe=Ct(dt(pe,ie),ie):s(pe)==="object"&&(pe=dt(Ct(pe,ie),ie)),pe}function V(pe,ie,ge){return typeof pe=="string"?pe=Ct(dt(pe,ge),ge):s(pe)==="object"&&(pe=Ct(pe,ge)),typeof ie=="string"?ie=Ct(dt(ie,ge),ge):s(ie)==="object"&&(ie=Ct(ie,ge)),pe===ie}function I(pe,ie){return pe&&pe.toString().replace(!ie||!ie.iri?f.ESCAPE:p.ESCAPE,Pe)}function O(pe,ie){return pe&&pe.toString().replace(!ie||!ie.iri?f.PCT_ENCODED:p.PCT_ENCODED,ve)}var $={scheme:"http",domainHost:!0,parse:function(ie,ge){return ie.host||(ie.error=ie.error||"HTTP URIs must have a host."),ie},serialize:function(ie,ge){var Se=String(ie.scheme).toLowerCase()==="https";return(ie.port===(Se?443:80)||ie.port==="")&&(ie.port=void 0),ie.path||(ie.path="/"),ie}},de={scheme:"https",domainHost:$.domainHost,parse:$.parse,serialize:$.serialize};function Ee(pe){return typeof pe.secure=="boolean"?pe.secure:String(pe.scheme).toLowerCase()==="wss"}var Ae={scheme:"ws",domainHost:!0,parse:function(ie,ge){var Se=ie;return Se.secure=Ee(Se),Se.resourceName=(Se.path||"/")+(Se.query?"?"+Se.query:""),Se.path=void 0,Se.query=void 0,Se},serialize:function(ie,ge){if((ie.port===(Ee(ie)?443:80)||ie.port==="")&&(ie.port=void 0),typeof ie.secure=="boolean"&&(ie.scheme=ie.secure?"wss":"ws",ie.secure=void 0),ie.resourceName){var Se=ie.resourceName.split("?"),Ne=d(Se,2),rt=Ne[0],We=Ne[1];ie.path=rt&&rt!=="/"?rt:void 0,ie.query=We,ie.resourceName=void 0}return ie.fragment=void 0,ie}},Je={scheme:"wss",domainHost:Ae.domainHost,parse:Ae.parse,serialize:Ae.serialize},it={},Ie="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Xe="[0-9A-Fa-f]",Ze=n(n("%[EFef]"+Xe+"%"+Xe+Xe+"%"+Xe+Xe)+"|"+n("%[89A-Fa-f]"+Xe+"%"+Xe+Xe)+"|"+n("%"+Xe+Xe)),ar="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Hr="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",lr=r(Hr,'[\\"\\\\]'),gr="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Wr=new RegExp(Ie,"g"),In=new RegExp(Ze,"g"),Ds=new RegExp(r("[^]",ar,"[\\.]",'[\\"]',lr),"g"),wa=new RegExp(r("[^]",Ie,gr),"g"),ks=wa;function hi(pe){var ie=ve(pe);return ie.match(Wr)?ie:pe}var Ui={scheme:"mailto",parse:function(ie,ge){var Se=ie,Ne=Se.to=Se.path?Se.path.split(","):[];if(Se.path=void 0,Se.query){for(var rt=!1,We={},at=Se.query.split("&"),Bt=0,er=at.length;Bt<er;++Bt){var Et=at[Bt].split("=");switch(Et[0]){case"to":for(var Nt=Et[1].split(","),Xt=0,ct=Nt.length;Xt<ct;++Xt)Ne.push(Nt[Xt]);break;case"subject":Se.subject=O(Et[1],ge);break;case"body":Se.body=O(Et[1],ge);break;default:rt=!0,We[O(Et[0],ge)]=O(Et[1],ge);break}}rt&&(Se.headers=We)}Se.query=void 0;for(var St=0,Gt=Ne.length;St<Gt;++St){var Lt=Ne[St].split("@");if(Lt[0]=O(Lt[0]),ge.unicodeSupport)Lt[1]=O(Lt[1],ge).toLowerCase();else try{Lt[1]=ze.toASCII(O(Lt[1],ge).toLowerCase())}catch(Yr){Se.error=Se.error||"Email address's domain name can not be converted to ASCII via punycode: "+Yr}Ne[St]=Lt.join("@")}return Se},serialize:function(ie,ge){var Se=ie,Ne=l(ie.to);if(Ne){for(var rt=0,We=Ne.length;rt<We;++rt){var at=String(Ne[rt]),Bt=at.lastIndexOf("@"),er=at.slice(0,Bt).replace(In,hi).replace(In,a).replace(Ds,Pe),Et=at.slice(Bt+1);try{Et=ge.iri?ze.toUnicode(Et):ze.toASCII(O(Et,ge).toLowerCase())}catch(St){Se.error=Se.error||"Email address's domain name can not be converted to "+(ge.iri?"Unicode":"ASCII")+" via punycode: "+St}Ne[rt]=er+"@"+Et}Se.path=Ne.join(",")}var Nt=ie.headers=ie.headers||{};ie.subject&&(Nt.subject=ie.subject),ie.body&&(Nt.body=ie.body);var Xt=[];for(var ct in Nt)Nt[ct]!==it[ct]&&Xt.push(ct.replace(In,hi).replace(In,a).replace(wa,Pe)+"="+Nt[ct].replace(In,hi).replace(In,a).replace(ks,Pe));return Xt.length&&(Se.query=Xt.join("&")),Se}},As=/^([^\:]+)\:(.*)/,ya={scheme:"urn",parse:function(ie,ge){var Se=ie.path&&ie.path.match(As),Ne=ie;if(Se){var rt=ge.scheme||Ne.scheme||"urn",We=Se[1].toLowerCase(),at=Se[2],Bt=rt+":"+(ge.nid||We),er=De[Bt];Ne.nid=We,Ne.nss=at,Ne.path=void 0,er&&(Ne=er.parse(Ne,ge))}else Ne.error=Ne.error||"URN can not be parsed.";return Ne},serialize:function(ie,ge){var Se=ge.scheme||ie.scheme||"urn",Ne=ie.nid,rt=Se+":"+(ge.nid||Ne),We=De[rt];We&&(ie=We.serialize(ie,ge));var at=ie,Bt=ie.nss;return at.path=(Ne||ge.nid)+":"+Bt,at}},Cs=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Or={scheme:"urn:uuid",parse:function(ie,ge){var Se=ie;return Se.uuid=Se.nss,Se.nss=void 0,!ge.tolerant&&(!Se.uuid||!Se.uuid.match(Cs))&&(Se.error=Se.error||"UUID is not valid."),Se},serialize:function(ie,ge){var Se=ie;return Se.nss=(ie.uuid||"").toLowerCase(),Se}};De[$.scheme]=$,De[de.scheme]=de,De[Ae.scheme]=Ae,De[Je.scheme]=Je,De[Ui.scheme]=Ui,De[ya.scheme]=ya,De[Or.scheme]=Or,t.SCHEMES=De,t.pctEncChar=Pe,t.pctDecChars=ve,t.parse=dt,t.removeDotSegments=pt,t.serialize=Ct,t.resolveComponents=Ut,t.resolve=Zt,t.normalize=pr,t.equal=V,t.escapeComponent=I,t.unescapeComponent=O,Object.defineProperty(t,"__esModule",{value:!0})})})(il,il.exports);var Zm=il.exports,Nl=function i(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,s;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!i(e[n],t[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){var a=s[n];if(!i(e[a],t[a]))return!1}return!0}return e!==e&&t!==t},ev=function(e){for(var t=0,r=e.length,n=0,s;n<r;)t++,s=e.charCodeAt(n++),s>=55296&&s<=56319&&n<r&&(s=e.charCodeAt(n),(s&64512)==56320&&n++);return t},Ri={copy:tv,checkDataType:al,checkDataTypes:rv,coerceToTypes:nv,toHash:Sl,getProperty:Il,escapeQuotes:Pl,equal:Nl,ucs2length:ev,varOccurences:sv,varReplace:lv,schemaHasRules:ov,schemaHasRulesExcept:uv,schemaUnknownRules:fv,toQuotedString:sl,getPathExpr:cv,getPath:dv,getData:_v,unescapeFragment:mv,unescapeJsonPointer:Fl,escapeFragment:vv,escapeJsonPointer:Rl};function tv(i,e){e=e||{};for(var t in i)e[t]=i[t];return e}function al(i,e,t,r){var n=r?" !== ":" === ",s=r?" || ":" && ",a=r?"!":"",l=r?"":"!";switch(i){case"null":return e+n+"null";case"array":return a+"Array.isArray("+e+")";case"object":return"("+a+e+s+"typeof "+e+n+'"object"'+s+l+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+n+'"number"'+s+l+"("+e+" % 1)"+s+e+n+e+(t?s+a+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+n+'"'+i+'"'+(t?s+a+"isFinite("+e+")":"")+")";default:return"typeof "+e+n+'"'+i+'"'}}function rv(i,e,t){switch(i.length){case 1:return al(i[0],e,t,!0);default:var r="",n=Sl(i);n.array&&n.object&&(r=n.null?"(":"(!"+e+" || ",r+="typeof "+e+' !== "object")',delete n.null,delete n.array,delete n.object),n.number&&delete n.integer;for(var s in n)r+=(r?" && ":"")+al(s,e,t,!0);return r}}var su=Sl(["string","number","integer","boolean","null"]);function nv(i,e){if(Array.isArray(e)){for(var t=[],r=0;r<e.length;r++){var n=e[r];(su[n]||i==="array"&&n==="array")&&(t[t.length]=n)}if(t.length)return t}else{if(su[e])return[e];if(i==="array"&&e==="array")return["array"]}}function Sl(i){for(var e={},t=0;t<i.length;t++)e[i[t]]=!0;return e}var iv=/^[a-z$_][a-z$_0-9]*$/i,av=/'|\\/g;function Il(i){return typeof i=="number"?"["+i+"]":iv.test(i)?"."+i:"['"+Pl(i)+"']"}function Pl(i){return i.replace(av,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function sv(i,e){e+="[^0-9]";var t=i.match(new RegExp(e,"g"));return t?t.length:0}function lv(i,e,t){return e+="([^0-9])",t=t.replace(/\$/g,"$$$$"),i.replace(new RegExp(e,"g"),t+"$1")}function ov(i,e){if(typeof i=="boolean")return!i;for(var t in i)if(e[t])return!0}function uv(i,e,t){if(typeof i=="boolean")return!i&&t!="not";for(var r in i)if(r!=t&&e[r])return!0}function fv(i,e){if(typeof i!="boolean"){for(var t in i)if(!e[t])return t}}function sl(i){return"'"+Pl(i)+"'"}function cv(i,e,t,r){var n=t?"'/' + "+e+(r?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):r?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return Oh(i,n)}function dv(i,e,t){var r=sl(t?"/"+Rl(e):Il(e));return Oh(i,r)}var hv=/^\/(?:[^~]|~0|~1)*$/,pv=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function _v(i,e,t){var r,n,s,a;if(i==="")return"rootData";if(i[0]=="/"){if(!hv.test(i))throw new Error("Invalid JSON-pointer: "+i);n=i,s="rootData"}else{if(a=i.match(pv),!a)throw new Error("Invalid JSON-pointer: "+i);if(r=+a[1],n=a[2],n=="#"){if(r>=e)throw new Error("Cannot access property/index "+r+" levels up, current level is "+e);return t[e-r]}if(r>e)throw new Error("Cannot access data "+r+" levels up, current level is "+e);if(s="data"+(e-r||""),!n)return s}for(var l=s,o=n.split("/"),u=0;u<o.length;u++){var f=o[u];f&&(s+=Il(Fl(f)),l+=" && "+s)}return l}function Oh(i,e){return i=='""'?e:(i+" + "+e).replace(/([^\\])' \+ '/g,"$1")}function mv(i){return Fl(decodeURIComponent(i))}function vv(i){return encodeURIComponent(Rl(i))}function Rl(i){return i.replace(/~/g,"~0").replace(/\//g,"~1")}function Fl(i){return i.replace(/~1/g,"/").replace(/~0/g,"~")}var gv=Ri,Bh=bv;function bv(i){gv.copy(i,this)}var Lh={exports:{}},Ln=Lh.exports=function(i,e,t){typeof e=="function"&&(t=e,e={}),t=e.cb||t;var r=typeof t=="function"?t:t.pre||function(){},n=t.post||function(){};qa(e,r,n,i,"",i)};Ln.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};Ln.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Ln.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Ln.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function qa(i,e,t,r,n,s,a,l,o,u){if(r&&typeof r=="object"&&!Array.isArray(r)){e(r,n,s,a,l,o,u);for(var f in r){var p=r[f];if(Array.isArray(p)){if(f in Ln.arrayKeywords)for(var d=0;d<p.length;d++)qa(i,e,t,p[d],n+"/"+f+"/"+d,s,n,f,r,d)}else if(f in Ln.propsKeywords){if(p&&typeof p=="object")for(var c in p)qa(i,e,t,p[c],n+"/"+f+"/"+wv(c),s,n,f,r,c)}else(f in Ln.keywords||i.allKeys&&!(f in Ln.skipKeywords))&&qa(i,e,t,p,n+"/"+f,s,n,f,r)}t(r,n,s,a,l,o,u)}}function wv(i){return i.replace(/~/g,"~0").replace(/\//g,"~1")}var yv=Lh.exports,ua=Zm,lu=Nl,cs=Ri,$a=Bh,Ev=yv,Ol=Vn;Vn.normalizeId=Un;Vn.fullPath=Wa;Vn.url=Ya;Vn.ids=Tv;Vn.inlineRef=ll;Vn.schema=ds;function Vn(i,e,t){var r=this._refs[t];if(typeof r=="string")if(this._refs[r])r=this._refs[r];else return Vn.call(this,i,e,r);if(r=r||this._schemas[t],r instanceof $a)return ll(r.schema,this._opts.inlineRefs)?r.schema:r.validate||this._compile(r);var n=ds.call(this,e,t),s,a,l;return n&&(s=n.schema,e=n.root,l=n.baseId),s instanceof $a?a=s.validate||i.call(this,s.schema,e,void 0,l):s!==void 0&&(a=ll(s,this._opts.inlineRefs)?s:i.call(this,s,e,void 0,l)),a}function ds(i,e){var t=ua.parse(e),r=jh(t),n=Wa(this._getId(i.schema));if(Object.keys(i.schema).length===0||r!==n){var s=Un(r),a=this._refs[s];if(typeof a=="string")return Dv.call(this,i,a,t);if(a instanceof $a)a.validate||this._compile(a),i=a;else if(a=this._schemas[s],a instanceof $a){if(a.validate||this._compile(a),s==Un(e))return{schema:a,root:i,baseId:n};i=a}else return;if(!i.schema)return;n=Wa(this._getId(i.schema))}return Uh.call(this,t,n,i.schema,i)}function Dv(i,e,t){var r=ds.call(this,i,e);if(r){var n=r.schema,s=r.baseId;i=r.root;var a=this._getId(n);return a&&(s=Ya(s,a)),Uh.call(this,t,s,n,i)}}var kv=cs.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function Uh(i,e,t,r){if(i.fragment=i.fragment||"",i.fragment.slice(0,1)=="/"){for(var n=i.fragment.split("/"),s=1;s<n.length;s++){var a=n[s];if(a){if(a=cs.unescapeFragment(a),t=t[a],t===void 0)break;var l;if(!kv[a]&&(l=this._getId(t),l&&(e=Ya(e,l)),t.$ref)){var o=Ya(e,t.$ref),u=ds.call(this,r,o);u&&(t=u.schema,r=u.root,e=u.baseId)}}}if(t!==void 0&&t!==r.schema)return{schema:t,root:r,baseId:e}}}var Av=cs.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function ll(i,e){if(e===!1)return!1;if(e===void 0||e===!0)return ol(i);if(e)return ul(i)<=e}function ol(i){var e;if(Array.isArray(i)){for(var t=0;t<i.length;t++)if(e=i[t],typeof e=="object"&&!ol(e))return!1}else for(var r in i)if(r=="$ref"||(e=i[r],typeof e=="object"&&!ol(e)))return!1;return!0}function ul(i){var e=0,t;if(Array.isArray(i)){for(var r=0;r<i.length;r++)if(t=i[r],typeof t=="object"&&(e+=ul(t)),e==1/0)return 1/0}else for(var n in i){if(n=="$ref")return 1/0;if(Av[n])e++;else if(t=i[n],typeof t=="object"&&(e+=ul(t)+1),e==1/0)return 1/0}return e}function Wa(i,e){e!==!1&&(i=Un(i));var t=ua.parse(i);return jh(t)}function jh(i){return ua.serialize(i).split("#")[0]+"#"}var Cv=/#\/?$/;function Un(i){return i?i.replace(Cv,""):""}function Ya(i,e){return e=Un(e),ua.resolve(i,e)}function Tv(i){var e=Un(this._getId(i)),t={"":e},r={"":Wa(e,!1)},n={},s=this;return Ev(i,{allKeys:!0},function(a,l,o,u,f,p,d){if(l!==""){var c=s._getId(a),h=t[u],_=r[u]+"/"+f;if(d!==void 0&&(_+="/"+(typeof d=="number"?d:cs.escapeFragment(d))),typeof c=="string"){c=h=Un(h?ua.resolve(h,c):c);var m=s._refs[c];if(typeof m=="string"&&(m=s._refs[m]),m&&m.schema){if(!lu(a,m.schema))throw new Error('id "'+c+'" resolves to more than one schema')}else if(c!=Un(_))if(c[0]=="#"){if(n[c]&&!lu(a,n[c]))throw new Error('id "'+c+'" resolves to more than one schema');n[c]=a}else s._refs[c]=_}t[l]=h,r[l]=_}}),n}var Us=Ol,Bl={Validation:ou(Nv),MissingRef:ou(Ll)};function Nv(i){this.message="validation failed",this.errors=i,this.ajv=this.validation=!0}Ll.message=function(i,e){return"can't resolve reference "+e+" from id "+i};function Ll(i,e,t){this.message=t||Ll.message(i,e),this.missingRef=Us.url(i,e),this.missingSchema=Us.normalizeId(Us.fullPath(this.missingRef))}function ou(i){return i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i}var qh=function(i,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var t=typeof e.cycles=="boolean"?e.cycles:!1,r=e.cmp&&function(s){return function(a){return function(l,o){var u={key:l,value:a[l]},f={key:o,value:a[o]};return s(u,f)}}}(e.cmp),n=[];return function s(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a!==void 0){if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);var l,o;if(Array.isArray(a)){for(o="[",l=0;l<a.length;l++)l&&(o+=","),o+=s(a[l])||"null";return o+"]"}if(a===null)return"null";if(n.indexOf(a)!==-1){if(t)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=n.push(a)-1,f=Object.keys(a).sort(r&&r(a));for(o="",l=0;l<f.length;l++){var p=f[l],d=s(a[p]);d&&(o&&(o+=","),o+=JSON.stringify(p)+":"+d)}return n.splice(u,1),"{"+o+"}"}}(i)},Mh=function(e,t,r){var n="",s=e.schema.$async===!0,a=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),l=e.self._getId(e.schema);if(e.opts.strictKeywords){var o=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(o){var u="unknown keyword: "+o;if(e.opts.strictKeywords==="log")e.logger.warn(u);else throw new Error(u)}}if(e.isTop&&(n+=" var validate = ",s&&(e.async=!0,n+="async "),n+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",l&&(e.opts.sourceCode||e.opts.processCode)&&(n+=" "+("/*# sourceURL="+l+" */")+" ")),typeof e.schema=="boolean"||!(a||e.schema.$ref)){var t="false schema",f=e.level,p=e.dataLevel,d=e.schema[t],c=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,b=!e.opts.allErrors,L,_="data"+(p||""),N="valid"+f;if(e.schema===!1){e.isTop?b=!0:n+=" var "+N+" = false; ";var m=m||[];m.push(n),n="",e.createErrors!==!1?(n+=" { keyword: '"+(L||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(n+=" , message: 'boolean schema is false' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),n+=" } "):n+=" {} ";var y=n;n=m.pop(),!e.compositeRule&&b?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?s?n+=" return data; ":n+=" validate.errors = null; return true; ":n+=" var "+N+" = true; ";return e.isTop&&(n+=" }; return validate; "),n}if(e.isTop){var F=e.isTop,f=e.level=0,p=e.dataLevel=0,_="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var T="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(T);else throw new Error(T)}n+=" var vErrors = null; ",n+=" var errors = 0;     ",n+=" if (rootData === undefined) rootData = data; "}else{var f=e.level,p=e.dataLevel,_="data"+(p||"");if(l&&(e.baseId=e.resolve.url(e.baseId,l)),s&&!e.async)throw new Error("async schema in sync schema");n+=" var errs_"+f+" = errors;"}var N="valid"+f,b=!e.opts.allErrors,k="",A="",L,P=e.schema.type,B=Array.isArray(P);if(P&&e.opts.nullable&&e.schema.nullable===!0&&(B?P.indexOf("null")==-1&&(P=P.concat("null")):P!="null"&&(P=[P,"null"],B=!0)),B&&P.length==1&&(P=P[0],B=!1),e.schema.$ref&&a){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(a=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(n+=" "+e.RULES.all.$comment.code(e,"$comment")),P){if(e.opts.coerceTypes)var D=e.util.coerceToTypes(e.opts.coerceTypes,P);var R=e.RULES.types[P];if(D||B||R===!0||R&&!At(R)){var c=e.schemaPath+".type",h=e.errSchemaPath+"/type",c=e.schemaPath+".type",h=e.errSchemaPath+"/type",w=B?"checkDataTypes":"checkDataType";if(n+=" if ("+e.util[w](P,_,e.opts.strictNumbers,!0)+") { ",D){var S="dataType"+f,X="coerced"+f;n+=" var "+S+" = typeof "+_+"; var "+X+" = undefined; ",e.opts.coerceTypes=="array"&&(n+=" if ("+S+" == 'object' && Array.isArray("+_+") && "+_+".length == 1) { "+_+" = "+_+"[0]; "+S+" = typeof "+_+"; if ("+e.util.checkDataType(e.schema.type,_,e.opts.strictNumbers)+") "+X+" = "+_+"; } "),n+=" if ("+X+" !== undefined) ; ";var j=D;if(j)for(var ne,J=-1,W=j.length-1;J<W;)ne=j[J+=1],ne=="string"?n+=" else if ("+S+" == 'number' || "+S+" == 'boolean') "+X+" = '' + "+_+"; else if ("+_+" === null) "+X+" = ''; ":ne=="number"||ne=="integer"?(n+=" else if ("+S+" == 'boolean' || "+_+" === null || ("+S+" == 'string' && "+_+" && "+_+" == +"+_+" ",ne=="integer"&&(n+=" && !("+_+" % 1)"),n+=")) "+X+" = +"+_+"; "):ne=="boolean"?n+=" else if ("+_+" === 'false' || "+_+" === 0 || "+_+" === null) "+X+" = false; else if ("+_+" === 'true' || "+_+" === 1) "+X+" = true; ":ne=="null"?n+=" else if ("+_+" === '' || "+_+" === 0 || "+_+" === false) "+X+" = null; ":e.opts.coerceTypes=="array"&&ne=="array"&&(n+=" else if ("+S+" == 'string' || "+S+" == 'number' || "+S+" == 'boolean' || "+_+" == null) "+X+" = ["+_+"]; ");n+=" else {   ";var m=m||[];m.push(n),n="",e.createErrors!==!1?(n+=" { keyword: '"+(L||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",B?n+=""+P.join(","):n+=""+P,n+="' } ",e.opts.messages!==!1&&(n+=" , message: 'should be ",B?n+=""+P.join(","):n+=""+P,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),n+=" } "):n+=" {} ";var y=n;n=m.pop(),!e.compositeRule&&b?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } if ("+X+" !== undefined) {  ";var x=p?"data"+(p-1||""):"parentData",G=p?e.dataPathArr[p]:"parentDataProperty";n+=" "+_+" = "+X+"; ",p||(n+="if ("+x+" !== undefined)"),n+=" "+x+"["+G+"] = "+X+"; } "}else{var m=m||[];m.push(n),n="",e.createErrors!==!1?(n+=" { keyword: '"+(L||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",B?n+=""+P.join(","):n+=""+P,n+="' } ",e.opts.messages!==!1&&(n+=" , message: 'should be ",B?n+=""+P.join(","):n+=""+P,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),n+=" } "):n+=" {} ";var y=n;n=m.pop(),!e.compositeRule&&b?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}n+=" } "}}if(e.schema.$ref&&!a)n+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",b&&(n+=" } if (errors === ",F?n+="0":n+="errs_"+f,n+=") { ",A+="}");else{var le=e.RULES;if(le){for(var R,Q=-1,ae=le.length-1;Q<ae;)if(R=le[Q+=1],At(R)){if(R.type&&(n+=" if ("+e.util.checkDataType(R.type,_,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(R.type=="object"&&e.schema.properties){var d=e.schema.properties,Ve=Object.keys(d),ze=Ve;if(ze)for(var De,Pe=-1,ve=ze.length-1;Pe<ve;){De=ze[Pe+=1];var he=d[De];if(he.default!==void 0){var Fe=_+e.util.getProperty(De);if(e.compositeRule){if(e.opts.strictDefaults){var T="default is ignored for: "+Fe;if(e.opts.strictDefaults==="log")e.logger.warn(T);else throw new Error(T)}}else n+=" if ("+Fe+" === undefined ",e.opts.useDefaults=="empty"&&(n+=" || "+Fe+" === null || "+Fe+" === '' "),n+=" ) "+Fe+" = ",e.opts.useDefaults=="shared"?n+=" "+e.useDefault(he.default)+" ":n+=" "+JSON.stringify(he.default)+" ",n+="; "}}}else if(R.type=="array"&&Array.isArray(e.schema.items)){var lt=e.schema.items;if(lt){for(var he,J=-1,He=lt.length-1;J<He;)if(he=lt[J+=1],he.default!==void 0){var Fe=_+"["+J+"]";if(e.compositeRule){if(e.opts.strictDefaults){var T="default is ignored for: "+Fe;if(e.opts.strictDefaults==="log")e.logger.warn(T);else throw new Error(T)}}else n+=" if ("+Fe+" === undefined ",e.opts.useDefaults=="empty"&&(n+=" || "+Fe+" === null || "+Fe+" === '' "),n+=" ) "+Fe+" = ",e.opts.useDefaults=="shared"?n+=" "+e.useDefault(he.default)+" ":n+=" "+JSON.stringify(he.default)+" ",n+="; "}}}}var fe=R.rules;if(fe){for(var Te,dt=-1,Ot=fe.length-1;dt<Ot;)if(Te=fe[dt+=1],Qt(Te)){var tr=Te.code(e,Te.keyword,R.type);tr&&(n+=" "+tr+" ",b&&(k+="}"))}}if(b&&(n+=" "+k+" ",k=""),R.type&&(n+=" } ",P&&P===R.type&&!D)){n+=" else { ";var c=e.schemaPath+".type",h=e.errSchemaPath+"/type",m=m||[];m.push(n),n="",e.createErrors!==!1?(n+=" { keyword: '"+(L||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",B?n+=""+P.join(","):n+=""+P,n+="' } ",e.opts.messages!==!1&&(n+=" , message: 'should be ",B?n+=""+P.join(","):n+=""+P,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),n+=" } "):n+=" {} ";var y=n;n=m.pop(),!e.compositeRule&&b?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } "}b&&(n+=" if (errors === ",F?n+="0":n+="errs_"+f,n+=") { ",A+="}")}}}b&&(n+=" "+A+" "),F?(s?(n+=" if (errors === 0) return data;           ",n+=" else throw new ValidationError(vErrors); "):(n+=" validate.errors = vErrors; ",n+=" return errors === 0;       "),n+=" }; return validate;"):n+=" var "+N+" = errors === errs_"+f+";";function At(pt){for(var Ct=pt.rules,Ut=0;Ut<Ct.length;Ut++)if(Qt(Ct[Ut]))return!0}function Qt(pt){return e.schema[pt.keyword]!==void 0||pt.implements&&Kt(pt)}function Kt(pt){for(var Ct=pt.implements,Ut=0;Ut<Ct.length;Ut++)if(e.schema[Ct[Ut]]!==void 0)return!0}return n},Na=Ol,Ja=Ri,Vh=Bl,Sv=qh,uu=Mh,Iv=Ja.ucs2length,Pv=Nl,Rv=Vh.Validation,Fv=fl;function fl(i,e,t,r){var n=this,s=this._opts,a=[void 0],l={},o=[],u={},f=[],p={},d=[];e=e||{schema:i,refVal:a,refs:l};var c=Ov.call(this,i,e,r),h=this._compilations[c.index];if(c.compiling)return h.callValidate=T;var _=this._formats,m=this.RULES;try{var y=N(i,e,t,r);h.validate=y;var F=h.callValidate;return F&&(F.schema=y.schema,F.errors=null,F.refs=y.refs,F.refVal=y.refVal,F.root=y.root,F.$async=y.$async,s.sourceCode&&(F.source=y.source)),y}finally{Bv.call(this,i,e,r)}function T(){var w=h.validate,S=w.apply(this,arguments);return T.errors=w.errors,S}function N(w,S,X,j){var ne=!S||S&&S.schema==w;if(S.schema!=e.schema)return fl.call(n,w,S,X,j);var J=w.$async===!0,W=uu({isTop:!0,schema:w,isRoot:ne,baseId:j,root:S,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:Vh.MissingRef,RULES:m,validate:uu,util:Ja,resolve:Na,resolveRef:b,usePattern:B,useDefault:D,useCustomRule:R,opts:s,formats:_,logger:n.logger,self:n});W=Sa(a,jv)+Sa(o,Lv)+Sa(f,Uv)+Sa(d,qv)+W,s.processCode&&(W=s.processCode(W,w));var x;try{var G=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",W);x=G(n,m,_,e,a,f,d,Pv,Iv,Rv),a[0]=x}catch(le){throw n.logger.error("Error compiling schema, function code:",W),le}return x.schema=w,x.errors=null,x.refs=l,x.refVal=a,x.root=ne?x:S,J&&(x.$async=!0),s.sourceCode===!0&&(x.source={code:W,patterns:o,defaults:f}),x}function b(w,S,X){S=Na.url(w,S);var j=l[S],ne,J;if(j!==void 0)return ne=a[j],J="refVal["+j+"]",P(ne,J);if(!X&&e.refs){var W=e.refs[S];if(W!==void 0)return ne=e.refVal[W],J=k(S,ne),P(ne,J)}J=k(S);var x=Na.call(n,N,e,S);if(x===void 0){var G=t&&t[S];G&&(x=Na.inlineRef(G,s.inlineRefs)?G:fl.call(n,G,e,t,w))}if(x===void 0)A(S);else return L(S,x),P(x,J)}function k(w,S){var X=a.length;return a[X]=S,l[w]=X,"refVal"+X}function A(w){delete l[w]}function L(w,S){var X=l[w];a[X]=S}function P(w,S){return typeof w=="object"||typeof w=="boolean"?{code:S,schema:w,inline:!0}:{code:S,$async:w&&!!w.$async}}function B(w){var S=u[w];return S===void 0&&(S=u[w]=o.length,o[S]=w),"pattern"+S}function D(w){switch(typeof w){case"boolean":case"number":return""+w;case"string":return Ja.toQuotedString(w);case"object":if(w===null)return"null";var S=Sv(w),X=p[S];return X===void 0&&(X=p[S]=f.length,f[X]=w),"default"+X}}function R(w,S,X,j){if(n._opts.validateSchema!==!1){var ne=w.definition.dependencies;if(ne&&!ne.every(function(ze){return Object.prototype.hasOwnProperty.call(X,ze)}))throw new Error("parent schema must have all required keywords: "+ne.join(","));var J=w.definition.validateSchema;if(J){var W=J(S);if(!W){var x="keyword schema is invalid: "+n.errorsText(J.errors);if(n._opts.validateSchema=="log")n.logger.error(x);else throw new Error(x)}}}var G=w.definition.compile,le=w.definition.inline,Q=w.definition.macro,ae;if(G)ae=G.call(n,S,X,j);else if(Q)ae=Q.call(n,S,X,j),s.validateSchema!==!1&&n.validateSchema(ae,!0);else if(le)ae=le.call(n,j,w.keyword,S,X);else if(ae=w.definition.validate,!ae)return;if(ae===void 0)throw new Error('custom keyword "'+w.keyword+'"failed to compile');var Ve=d.length;return d[Ve]=ae,{code:"customRule"+Ve,validate:ae}}}function Ov(i,e,t){var r=zh.call(this,i,e,t);return r>=0?{index:r,compiling:!0}:(r=this._compilations.length,this._compilations[r]={schema:i,root:e,baseId:t},{index:r,compiling:!1})}function Bv(i,e,t){var r=zh.call(this,i,e,t);r>=0&&this._compilations.splice(r,1)}function zh(i,e,t){for(var r=0;r<this._compilations.length;r++){var n=this._compilations[r];if(n.schema==i&&n.root==e&&n.baseId==t)return r}return-1}function Lv(i,e){return"var pattern"+i+" = new RegExp("+Ja.toQuotedString(e[i])+");"}function Uv(i){return"var default"+i+" = defaults["+i+"];"}function jv(i,e){return e[i]===void 0?"":"var refVal"+i+" = refVal["+i+"];"}function qv(i){return"var customRule"+i+" = customRules["+i+"];"}function Sa(i,e){if(!i.length)return"";for(var t="",r=0;r<i.length;r++)t+=e(r,i);return t}var Hh={exports:{}},hs=Hh.exports=function(){this._cache={}};hs.prototype.put=function(e,t){this._cache[e]=t};hs.prototype.get=function(e){return this._cache[e]};hs.prototype.del=function(e){delete this._cache[e]};hs.prototype.clear=function(){this._cache={}};var Mv=Hh.exports,Vv=Ri,zv=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Hv=[0,31,28,31,30,31,30,31,31,30,31,30,31],xv=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,xh=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,Xv=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Gv=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Xh=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Gh=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,Qh=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,$h=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Wh=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Yh=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,Qv=ps;function ps(i){return i=i=="full"?"full":"fast",Vv.copy(ps[i])}ps.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":Xh,url:Gh,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:xh,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Zh,uuid:Qh,"json-pointer":$h,"json-pointer-uri-fragment":Wh,"relative-json-pointer":Yh};ps.full={date:Jh,time:Kh,"date-time":Yv,uri:Kv,"uri-reference":Gv,"uri-template":Xh,url:Gh,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:xh,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Zh,uuid:Qh,"json-pointer":$h,"json-pointer-uri-fragment":Wh,"relative-json-pointer":Yh};function $v(i){return i%4===0&&(i%100!==0||i%400===0)}function Jh(i){var e=i.match(zv);if(!e)return!1;var t=+e[1],r=+e[2],n=+e[3];return r>=1&&r<=12&&n>=1&&n<=(r==2&&$v(t)?29:Hv[r])}function Kh(i,e){var t=i.match(xv);if(!t)return!1;var r=t[1],n=t[2],s=t[3],a=t[5];return(r<=23&&n<=59&&s<=59||r==23&&n==59&&s==60)&&(!e||a)}var Wv=/t|\s/i;function Yv(i){var e=i.split(Wv);return e.length==2&&Jh(e[0])&&Kh(e[1],!0)}var Jv=/\/|:/;function Kv(i){return Jv.test(i)&&Xv.test(i)}var Zv=/[^\\]\\Z/;function Zh(i){if(Zv.test(i))return!1;try{return new RegExp(i),!0}catch{return!1}}var e1=function(e,t,r){var n=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,f="data"+(a||""),p="valid"+s,d,c;if(l=="#"||l=="#/")e.isRoot?(d=e.async,c="validate"):(d=e.root.schema.$async===!0,c="root.refVal[0]");else{var h=e.resolveRef(e.baseId,l,e.isRoot);if(h===void 0){var _=e.MissingRefError.message(e.baseId,l);if(e.opts.missingRefs=="fail"){e.logger.error(_);var m=m||[];m.push(n),n="",e.createErrors!==!1?(n+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(o)+" , params: { ref: '"+e.util.escapeQuotes(l)+"' } ",e.opts.messages!==!1&&(n+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(l)+"' "),e.opts.verbose&&(n+=" , schema: "+e.util.toQuotedString(l)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var y=n;n=m.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(n+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(_),u&&(n+=" if (true) { ");else throw new e.MissingRefError(e.baseId,l,_)}else if(h.inline){var F=e.util.copy(e);F.level++;var T="valid"+F.level;F.schema=h.schema,F.schemaPath="",F.errSchemaPath=l;var N=e.validate(F).replace(/validate\.schema/g,h.code);n+=" "+N+" ",u&&(n+=" if ("+T+") { ")}else d=h.$async===!0||e.async&&h.$async!==!1,c=h.code}if(c){var m=m||[];m.push(n),n="",e.opts.passContext?n+=" "+c+".call(this, ":n+=" "+c+"( ",n+=" "+f+", (dataPath || '')",e.errorPath!='""'&&(n+=" + "+e.errorPath);var b=a?"data"+(a-1||""):"parentData",k=a?e.dataPathArr[a]:"parentDataProperty";n+=" , "+b+" , "+k+", rootData)  ";var A=n;if(n=m.pop(),d){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(n+=" var "+p+"; "),n+=" try { await "+A+"; ",u&&(n+=" "+p+" = true; "),n+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(n+=" "+p+" = false; "),n+=" } ",u&&(n+=" if ("+p+") { ")}else n+=" if (!"+A+") { if (vErrors === null) vErrors = "+c+".errors; else vErrors = vErrors.concat("+c+".errors); errors = vErrors.length; } ",u&&(n+=" else { ")}return n},t1=function(e,t,r){var n=" ",s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,o=!e.opts.allErrors,u=e.util.copy(e),f="";u.level++;var p="valid"+u.level,d=u.baseId,c=!0,h=s;if(h)for(var _,m=-1,y=h.length-1;m<y;)_=h[m+=1],(e.opts.strictKeywords?typeof _=="object"&&Object.keys(_).length>0||_===!1:e.util.schemaHasRules(_,e.RULES.all))&&(c=!1,u.schema=_,u.schemaPath=a+"["+m+"]",u.errSchemaPath=l+"/"+m,n+="  "+e.validate(u)+" ",u.baseId=d,o&&(n+=" if ("+p+") { ",f+="}"));return o&&(c?n+=" if (true) { ":n+=" "+f.slice(0,-1)+" "),n},r1=function(e,t,r){var n=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(a||""),d="valid"+s,c="errs__"+s,h=e.util.copy(e),_="";h.level++;var m="valid"+h.level,y=l.every(function(L){return e.opts.strictKeywords?typeof L=="object"&&Object.keys(L).length>0||L===!1:e.util.schemaHasRules(L,e.RULES.all)});if(y){var F=h.baseId;n+=" var "+c+" = errors; var "+d+" = false;  ";var T=e.compositeRule;e.compositeRule=h.compositeRule=!0;var N=l;if(N)for(var b,k=-1,A=N.length-1;k<A;)b=N[k+=1],h.schema=b,h.schemaPath=o+"["+k+"]",h.errSchemaPath=u+"/"+k,n+="  "+e.validate(h)+" ",h.baseId=F,n+=" "+d+" = "+d+" || "+m+"; if (!"+d+") { ",_+="}";e.compositeRule=h.compositeRule=T,n+=" "+_+" if (!"+d+") {   var err =   ",e.createErrors!==!1?(n+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(n+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" } else {  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } ")}else f&&(n+=" if (true) { ");return n},n1=function(e,t,r){var n=" ",s=e.schema[t],a=e.errSchemaPath+"/"+t;e.opts.allErrors;var l=e.util.toQuotedString(s);return e.opts.$comment===!0?n+=" console.log("+l+");":typeof e.opts.$comment=="function"&&(n+=" self._opts.$comment("+l+", "+e.util.toQuotedString(a)+", validate.root.schema);"),n},i1=function(e,t,r){var n=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(a||""),d="valid"+s,c=e.opts.$data&&l&&l.$data;c&&(n+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; "),c||(n+=" var schema"+s+" = validate.schema"+o+";"),n+="var "+d+" = equal("+p+", schema"+s+"); if (!"+d+") {   ";var h=h||[];h.push(n),n="",e.createErrors!==!1?(n+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValue: schema"+s+" } ",e.opts.messages!==!1&&(n+=" , message: 'should be equal to constant' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var _=n;return n=h.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+_+"]); ":n+=" validate.errors = ["+_+"]; return false; ":n+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",f&&(n+=" else { "),n},a1=function(e,t,r){var n=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(a||""),d="valid"+s,c="errs__"+s,h=e.util.copy(e),_="";h.level++;var m="valid"+h.level,y="i"+s,F=h.dataLevel=e.dataLevel+1,T="data"+F,N=e.baseId,b=e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all);if(n+="var "+c+" = errors;var "+d+";",b){var k=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=l,h.schemaPath=o,h.errSchemaPath=u,n+=" var "+m+" = false; for (var "+y+" = 0; "+y+" < "+p+".length; "+y+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers,!0);var A=p+"["+y+"]";h.dataPathArr[F]=y;var L=e.validate(h);h.baseId=N,e.util.varOccurences(L,T)<2?n+=" "+e.util.varReplace(L,T,A)+" ":n+=" var "+T+" = "+A+"; "+L+" ",n+=" if ("+m+") break; }  ",e.compositeRule=h.compositeRule=k,n+=" "+_+" if (!"+m+") {"}else n+=" if ("+p+".length == 0) {";var P=P||[];P.push(n),n="",e.createErrors!==!1?(n+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(n+=" , message: 'should contain a valid item' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var B=n;return n=P.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+B+"]); ":n+=" validate.errors = ["+B+"]; return false; ":n+=" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { ",b&&(n+="  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; } "),e.opts.allErrors&&(n+=" } "),n},s1=function(e,t,r){var n=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(a||""),d="errs__"+s,c=e.util.copy(e),h="";c.level++;var _="valid"+c.level,m={},y={},F=e.opts.ownProperties;for(k in l)if(k!="__proto__"){var T=l[k],N=Array.isArray(T)?y:m;N[k]=T}n+="var "+d+" = errors;";var b=e.errorPath;n+="var missing"+s+";";for(var k in y)if(N=y[k],N.length){if(n+=" if ( "+p+e.util.getProperty(k)+" !== undefined ",F&&(n+=" && Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(k)+"') "),f){n+=" && ( ";var A=N;if(A)for(var L,P=-1,B=A.length-1;P<B;){L=A[P+=1],P&&(n+=" || ");var D=e.util.getProperty(L),R=p+D;n+=" ( ( "+R+" === undefined ",F&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(L)+"') "),n+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?L:D)+") ) "}n+=")) {  ";var w="missing"+s,S="' + "+w+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(b,w,!0):b+" + "+w);var X=X||[];X.push(n),n="",e.createErrors!==!1?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(k)+"', missingProperty: '"+S+"', depsCount: "+N.length+", deps: '"+e.util.escapeQuotes(N.length==1?N[0]:N.join(", "))+"' } ",e.opts.messages!==!1&&(n+=" , message: 'should have ",N.length==1?n+="property "+e.util.escapeQuotes(N[0]):n+="properties "+e.util.escapeQuotes(N.join(", ")),n+=" when property "+e.util.escapeQuotes(k)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var j=n;n=X.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+j+"]); ":n+=" validate.errors = ["+j+"]; return false; ":n+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{n+=" ) { ";var ne=N;if(ne)for(var L,J=-1,W=ne.length-1;J<W;){L=ne[J+=1];var D=e.util.getProperty(L),S=e.util.escapeQuotes(L),R=p+D;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(b,L,e.opts.jsonPointers)),n+=" if ( "+R+" === undefined ",F&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(L)+"') "),n+=") {  var err =   ",e.createErrors!==!1?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(k)+"', missingProperty: '"+S+"', depsCount: "+N.length+", deps: '"+e.util.escapeQuotes(N.length==1?N[0]:N.join(", "))+"' } ",e.opts.messages!==!1&&(n+=" , message: 'should have ",N.length==1?n+="property "+e.util.escapeQuotes(N[0]):n+="properties "+e.util.escapeQuotes(N.join(", ")),n+=" when property "+e.util.escapeQuotes(k)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}n+=" }   ",f&&(h+="}",n+=" else { ")}e.errorPath=b;var x=c.baseId;for(var k in m){var T=m[k];(e.opts.strictKeywords?typeof T=="object"&&Object.keys(T).length>0||T===!1:e.util.schemaHasRules(T,e.RULES.all))&&(n+=" "+_+" = true; if ( "+p+e.util.getProperty(k)+" !== undefined ",F&&(n+=" && Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(k)+"') "),n+=") { ",c.schema=T,c.schemaPath=o+e.util.getProperty(k),c.errSchemaPath=u+"/"+e.util.escapeFragment(k),n+="  "+e.validate(c)+" ",c.baseId=x,n+=" }  ",f&&(n+=" if ("+_+") { ",h+="}"))}return f&&(n+="   "+h+" if ("+d+" == errors) {"),n},l1=function(e,t,r){var n=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(a||""),d="valid"+s,c=e.opts.$data&&l&&l.$data;c&&(n+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ");var h="i"+s,_="schema"+s;c||(n+=" var "+_+" = validate.schema"+o+";"),n+="var "+d+";",c&&(n+=" if (schema"+s+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+s+")) "+d+" = false; else {"),n+=""+d+" = false;for (var "+h+"=0; "+h+"<"+_+".length; "+h+"++) if (equal("+p+", "+_+"["+h+"])) { "+d+" = true; break; }",c&&(n+="  }  "),n+=" if (!"+d+") {   ";var m=m||[];m.push(n),n="",e.createErrors!==!1?(n+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValues: schema"+s+" } ",e.opts.messages!==!1&&(n+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var y=n;return n=m.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",f&&(n+=" else { "),n},o1=function(e,t,r){var n=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(a||"");if(e.opts.format===!1)return f&&(n+=" if (true) { "),n;var d=e.opts.$data&&l&&l.$data,c;d?(n+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",c="schema"+s):c=l;var h=e.opts.unknownFormats,_=Array.isArray(h);if(d){var m="format"+s,y="isObject"+s,F="formatType"+s;n+=" var "+m+" = formats["+c+"]; var "+y+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+F+" = "+y+" && "+m+".type || 'string'; if ("+y+") { ",e.async&&(n+=" var async"+s+" = "+m+".async; "),n+=" "+m+" = "+m+".validate; } if (  ",d&&(n+=" ("+c+" !== undefined && typeof "+c+" != 'string') || "),n+=" (",h!="ignore"&&(n+=" ("+c+" && !"+m+" ",_&&(n+=" && self._opts.unknownFormats.indexOf("+c+") == -1 "),n+=") || "),n+=" ("+m+" && "+F+" == '"+r+"' && !(typeof "+m+" == 'function' ? ",e.async?n+=" (async"+s+" ? await "+m+"("+p+") : "+m+"("+p+")) ":n+=" "+m+"("+p+") ",n+=" : "+m+".test("+p+"))))) {"}else{var m=e.formats[l];if(!m){if(h=="ignore")return e.logger.warn('unknown format "'+l+'" ignored in schema at path "'+e.errSchemaPath+'"'),f&&(n+=" if (true) { "),n;if(_&&h.indexOf(l)>=0)return f&&(n+=" if (true) { "),n;throw new Error('unknown format "'+l+'" is used in schema at path "'+e.errSchemaPath+'"')}var y=typeof m=="object"&&!(m instanceof RegExp)&&m.validate,F=y&&m.type||"string";if(y){var T=m.async===!0;m=m.validate}if(F!=r)return f&&(n+=" if (true) { "),n;if(T){if(!e.async)throw new Error("async format in sync schema");var N="formats"+e.util.getProperty(l)+".validate";n+=" if (!(await "+N+"("+p+"))) { "}else{n+=" if (! ";var N="formats"+e.util.getProperty(l);y&&(N+=".validate"),typeof m=="function"?n+=" "+N+"("+p+") ":n+=" "+N+".test("+p+") ",n+=") { "}}var b=b||[];b.push(n),n="",e.createErrors!==!1?(n+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { format:  ",d?n+=""+c:n+=""+e.util.toQuotedString(l),n+="  } ",e.opts.messages!==!1&&(n+=` , message: 'should match format "`,d?n+="' + "+c+" + '":n+=""+e.util.escapeQuotes(l),n+=`"' `),e.opts.verbose&&(n+=" , schema:  ",d?n+="validate.schema"+o:n+=""+e.util.toQuotedString(l),n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var k=n;return n=b.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+k+"]); ":n+=" validate.errors = ["+k+"]; return false; ":n+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",f&&(n+=" else { "),n},u1=function(e,t,r){var n=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(a||""),d="valid"+s,c="errs__"+s,h=e.util.copy(e);h.level++;var _="valid"+h.level,m=e.schema.then,y=e.schema.else,F=m!==void 0&&(e.opts.strictKeywords?typeof m=="object"&&Object.keys(m).length>0||m===!1:e.util.schemaHasRules(m,e.RULES.all)),T=y!==void 0&&(e.opts.strictKeywords?typeof y=="object"&&Object.keys(y).length>0||y===!1:e.util.schemaHasRules(y,e.RULES.all)),N=h.baseId;if(F||T){var b;h.createErrors=!1,h.schema=l,h.schemaPath=o,h.errSchemaPath=u,n+=" var "+c+" = errors; var "+d+" = true;  ";var k=e.compositeRule;e.compositeRule=h.compositeRule=!0,n+="  "+e.validate(h)+" ",h.baseId=N,h.createErrors=!0,n+="  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; }  ",e.compositeRule=h.compositeRule=k,F?(n+=" if ("+_+") {  ",h.schema=e.schema.then,h.schemaPath=e.schemaPath+".then",h.errSchemaPath=e.errSchemaPath+"/then",n+="  "+e.validate(h)+" ",h.baseId=N,n+=" "+d+" = "+_+"; ",F&&T?(b="ifClause"+s,n+=" var "+b+" = 'then'; "):b="'then'",n+=" } ",T&&(n+=" else { ")):n+=" if (!"+_+") { ",T&&(h.schema=e.schema.else,h.schemaPath=e.schemaPath+".else",h.errSchemaPath=e.errSchemaPath+"/else",n+="  "+e.validate(h)+" ",h.baseId=N,n+=" "+d+" = "+_+"; ",F&&T?(b="ifClause"+s,n+=" var "+b+" = 'else'; "):b="'else'",n+=" } "),n+=" if (!"+d+") {   var err =   ",e.createErrors!==!1?(n+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { failingKeyword: "+b+" } ",e.opts.messages!==!1&&(n+=` , message: 'should match "' + `+b+` + '" schema' `),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" }   ",f&&(n+=" else { ")}else f&&(n+=" if (true) { ");return n},f1=function(e,t,r){var n=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(a||""),d="valid"+s,c="errs__"+s,h=e.util.copy(e),_="";h.level++;var m="valid"+h.level,y="i"+s,F=h.dataLevel=e.dataLevel+1,T="data"+F,N=e.baseId;if(n+="var "+c+" = errors;var "+d+";",Array.isArray(l)){var b=e.schema.additionalItems;if(b===!1){n+=" "+d+" = "+p+".length <= "+l.length+"; ";var k=u;u=e.errSchemaPath+"/additionalItems",n+="  if (!"+d+") {   ";var A=A||[];A.push(n),n="",e.createErrors!==!1?(n+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+l.length+" } ",e.opts.messages!==!1&&(n+=" , message: 'should NOT have more than "+l.length+" items' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var L=n;n=A.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+L+"]); ":n+=" validate.errors = ["+L+"]; return false; ":n+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",u=k,f&&(_+="}",n+=" else { ")}var P=l;if(P){for(var B,D=-1,R=P.length-1;D<R;)if(B=P[D+=1],e.opts.strictKeywords?typeof B=="object"&&Object.keys(B).length>0||B===!1:e.util.schemaHasRules(B,e.RULES.all)){n+=" "+m+" = true; if ("+p+".length > "+D+") { ";var w=p+"["+D+"]";h.schema=B,h.schemaPath=o+"["+D+"]",h.errSchemaPath=u+"/"+D,h.errorPath=e.util.getPathExpr(e.errorPath,D,e.opts.jsonPointers,!0),h.dataPathArr[F]=D;var S=e.validate(h);h.baseId=N,e.util.varOccurences(S,T)<2?n+=" "+e.util.varReplace(S,T,w)+" ":n+=" var "+T+" = "+w+"; "+S+" ",n+=" }  ",f&&(n+=" if ("+m+") { ",_+="}")}}if(typeof b=="object"&&(e.opts.strictKeywords?typeof b=="object"&&Object.keys(b).length>0||b===!1:e.util.schemaHasRules(b,e.RULES.all))){h.schema=b,h.schemaPath=e.schemaPath+".additionalItems",h.errSchemaPath=e.errSchemaPath+"/additionalItems",n+=" "+m+" = true; if ("+p+".length > "+l.length+") {  for (var "+y+" = "+l.length+"; "+y+" < "+p+".length; "+y+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers,!0);var w=p+"["+y+"]";h.dataPathArr[F]=y;var S=e.validate(h);h.baseId=N,e.util.varOccurences(S,T)<2?n+=" "+e.util.varReplace(S,T,w)+" ":n+=" var "+T+" = "+w+"; "+S+" ",f&&(n+=" if (!"+m+") break; "),n+=" } }  ",f&&(n+=" if ("+m+") { ",_+="}")}}else if(e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all)){h.schema=l,h.schemaPath=o,h.errSchemaPath=u,n+="  for (var "+y+" = 0; "+y+" < "+p+".length; "+y+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers,!0);var w=p+"["+y+"]";h.dataPathArr[F]=y;var S=e.validate(h);h.baseId=N,e.util.varOccurences(S,T)<2?n+=" "+e.util.varReplace(S,T,w)+" ":n+=" var "+T+" = "+w+"; "+S+" ",f&&(n+=" if (!"+m+") break; "),n+=" }"}return f&&(n+=" "+_+" if ("+c+" == errors) {"),n},fu=function(e,t,r){var n=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,N,p="data"+(a||""),d=e.opts.$data&&l&&l.$data,c;d?(n+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",c="schema"+s):c=l;var h=t=="maximum",_=h?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[_],y=e.opts.$data&&m&&m.$data,F=h?"<":">",T=h?">":"<",N=void 0;if(!(d||typeof l=="number"||l===void 0))throw new Error(t+" must be number");if(!(y||m===void 0||typeof m=="number"||typeof m=="boolean"))throw new Error(_+" must be number or boolean");if(y){var b=e.util.getData(m.$data,a,e.dataPathArr),k="exclusive"+s,A="exclType"+s,L="exclIsNumber"+s,P="op"+s,B="' + "+P+" + '";n+=" var schemaExcl"+s+" = "+b+"; ",b="schemaExcl"+s,n+=" var "+k+"; var "+A+" = typeof "+b+"; if ("+A+" != 'boolean' && "+A+" != 'undefined' && "+A+" != 'number') { ";var N=_,D=D||[];D.push(n),n="",e.createErrors!==!1?(n+=" { keyword: '"+(N||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(n+=" , message: '"+_+" should be boolean' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var R=n;n=D.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+R+"]); ":n+=" validate.errors = ["+R+"]; return false; ":n+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else if ( ",d&&(n+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),n+=" "+A+" == 'number' ? ( ("+k+" = "+c+" === undefined || "+b+" "+F+"= "+c+") ? "+p+" "+T+"= "+b+" : "+p+" "+T+" "+c+" ) : ( ("+k+" = "+b+" === true) ? "+p+" "+T+"= "+c+" : "+p+" "+T+" "+c+" ) || "+p+" !== "+p+") { var op"+s+" = "+k+" ? '"+F+"' : '"+F+"='; ",l===void 0&&(N=_,u=e.errSchemaPath+"/"+_,c=b,d=y)}else{var L=typeof m=="number",B=F;if(L&&d){var P="'"+B+"'";n+=" if ( ",d&&(n+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),n+=" ( "+c+" === undefined || "+m+" "+F+"= "+c+" ? "+p+" "+T+"= "+m+" : "+p+" "+T+" "+c+" ) || "+p+" !== "+p+") { "}else{L&&l===void 0?(k=!0,N=_,u=e.errSchemaPath+"/"+_,c=m,T+="="):(L&&(c=Math[h?"min":"max"](m,l)),m===(L?c:!0)?(k=!0,N=_,u=e.errSchemaPath+"/"+_,T+="="):(k=!1,B+="="));var P="'"+B+"'";n+=" if ( ",d&&(n+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),n+=" "+p+" "+T+" "+c+" || "+p+" !== "+p+") { "}}N=N||t;var D=D||[];D.push(n),n="",e.createErrors!==!1?(n+=" { keyword: '"+(N||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { comparison: "+P+", limit: "+c+", exclusive: "+k+" } ",e.opts.messages!==!1&&(n+=" , message: 'should be "+B+" ",d?n+="' + "+c:n+=""+c+"'"),e.opts.verbose&&(n+=" , schema:  ",d?n+="validate.schema"+o:n+=""+l,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var R=n;return n=D.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+R+"]); ":n+=" validate.errors = ["+R+"]; return false; ":n+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",f&&(n+=" else { "),n},cu=function(e,t,r){var n=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,_,p="data"+(a||""),d=e.opts.$data&&l&&l.$data,c;if(d?(n+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",c="schema"+s):c=l,!(d||typeof l=="number"))throw new Error(t+" must be number");var h=t=="maxItems"?">":"<";n+="if ( ",d&&(n+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),n+=" "+p+".length "+h+" "+c+") { ";var _=t,m=m||[];m.push(n),n="",e.createErrors!==!1?(n+=" { keyword: '"+(_||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+c+" } ",e.opts.messages!==!1&&(n+=" , message: 'should NOT have ",t=="maxItems"?n+="more":n+="fewer",n+=" than ",d?n+="' + "+c+" + '":n+=""+l,n+=" items' "),e.opts.verbose&&(n+=" , schema:  ",d?n+="validate.schema"+o:n+=""+l,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var y=n;return n=m.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",f&&(n+=" else { "),n},du=function(e,t,r){var n=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,_,p="data"+(a||""),d=e.opts.$data&&l&&l.$data,c;if(d?(n+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",c="schema"+s):c=l,!(d||typeof l=="number"))throw new Error(t+" must be number");var h=t=="maxLength"?">":"<";n+="if ( ",d&&(n+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),e.opts.unicode===!1?n+=" "+p+".length ":n+=" ucs2length("+p+") ",n+=" "+h+" "+c+") { ";var _=t,m=m||[];m.push(n),n="",e.createErrors!==!1?(n+=" { keyword: '"+(_||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+c+" } ",e.opts.messages!==!1&&(n+=" , message: 'should NOT be ",t=="maxLength"?n+="longer":n+="shorter",n+=" than ",d?n+="' + "+c+" + '":n+=""+l,n+=" characters' "),e.opts.verbose&&(n+=" , schema:  ",d?n+="validate.schema"+o:n+=""+l,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var y=n;return n=m.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",f&&(n+=" else { "),n},hu=function(e,t,r){var n=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,_,p="data"+(a||""),d=e.opts.$data&&l&&l.$data,c;if(d?(n+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",c="schema"+s):c=l,!(d||typeof l=="number"))throw new Error(t+" must be number");var h=t=="maxProperties"?">":"<";n+="if ( ",d&&(n+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),n+=" Object.keys("+p+").length "+h+" "+c+") { ";var _=t,m=m||[];m.push(n),n="",e.createErrors!==!1?(n+=" { keyword: '"+(_||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+c+" } ",e.opts.messages!==!1&&(n+=" , message: 'should NOT have ",t=="maxProperties"?n+="more":n+="fewer",n+=" than ",d?n+="' + "+c+" + '":n+=""+l,n+=" properties' "),e.opts.verbose&&(n+=" , schema:  ",d?n+="validate.schema"+o:n+=""+l,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var y=n;return n=m.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",f&&(n+=" else { "),n},c1=function(e,t,r){var n=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(a||""),d=e.opts.$data&&l&&l.$data,c;if(d?(n+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",c="schema"+s):c=l,!(d||typeof l=="number"))throw new Error(t+" must be number");n+="var division"+s+";if (",d&&(n+=" "+c+" !== undefined && ( typeof "+c+" != 'number' || "),n+=" (division"+s+" = "+p+" / "+c+", ",e.opts.multipleOfPrecision?n+=" Math.abs(Math.round(division"+s+") - division"+s+") > 1e-"+e.opts.multipleOfPrecision+" ":n+=" division"+s+" !== parseInt(division"+s+") ",n+=" ) ",d&&(n+="  )  "),n+=" ) {   ";var h=h||[];h.push(n),n="",e.createErrors!==!1?(n+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { multipleOf: "+c+" } ",e.opts.messages!==!1&&(n+=" , message: 'should be multiple of ",d?n+="' + "+c:n+=""+c+"'"),e.opts.verbose&&(n+=" , schema:  ",d?n+="validate.schema"+o:n+=""+l,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var _=n;return n=h.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+_+"]); ":n+=" validate.errors = ["+_+"]; return false; ":n+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",f&&(n+=" else { "),n},d1=function(e,t,r){var n=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(a||""),d="errs__"+s,c=e.util.copy(e);c.level++;var h="valid"+c.level;if(e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all)){c.schema=l,c.schemaPath=o,c.errSchemaPath=u,n+=" var "+d+" = errors;  ";var _=e.compositeRule;e.compositeRule=c.compositeRule=!0,c.createErrors=!1;var m;c.opts.allErrors&&(m=c.opts.allErrors,c.opts.allErrors=!1),n+=" "+e.validate(c)+" ",c.createErrors=!0,m&&(c.opts.allErrors=m),e.compositeRule=c.compositeRule=_,n+=" if ("+h+") {   ";var y=y||[];y.push(n),n="",e.createErrors!==!1?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var F=n;n=y.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+F+"]); ":n+=" validate.errors = ["+F+"]; return false; ":n+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } ")}else n+="  var err =   ",e.createErrors!==!1?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",f&&(n+=" if (false) { ");return n},h1=function(e,t,r){var n=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(a||""),d="valid"+s,c="errs__"+s,h=e.util.copy(e),_="";h.level++;var m="valid"+h.level,y=h.baseId,F="prevValid"+s,T="passingSchemas"+s;n+="var "+c+" = errors , "+F+" = false , "+d+" = false , "+T+" = null; ";var N=e.compositeRule;e.compositeRule=h.compositeRule=!0;var b=l;if(b)for(var k,A=-1,L=b.length-1;A<L;)k=b[A+=1],(e.opts.strictKeywords?typeof k=="object"&&Object.keys(k).length>0||k===!1:e.util.schemaHasRules(k,e.RULES.all))?(h.schema=k,h.schemaPath=o+"["+A+"]",h.errSchemaPath=u+"/"+A,n+="  "+e.validate(h)+" ",h.baseId=y):n+=" var "+m+" = true; ",A&&(n+=" if ("+m+" && "+F+") { "+d+" = false; "+T+" = ["+T+", "+A+"]; } else { ",_+="}"),n+=" if ("+m+") { "+d+" = "+F+" = true; "+T+" = "+A+"; }";return e.compositeRule=h.compositeRule=N,n+=""+_+"if (!"+d+") {   var err =   ",e.createErrors!==!1?(n+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { passingSchemas: "+T+" } ",e.opts.messages!==!1&&(n+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+="} else {  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; }",e.opts.allErrors&&(n+=" } "),n},p1=function(e,t,r){var n=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(a||""),d=e.opts.$data&&l&&l.$data,c;d?(n+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",c="schema"+s):c=l;var h=d?"(new RegExp("+c+"))":e.usePattern(l);n+="if ( ",d&&(n+=" ("+c+" !== undefined && typeof "+c+" != 'string') || "),n+=" !"+h+".test("+p+") ) {   ";var _=_||[];_.push(n),n="",e.createErrors!==!1?(n+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { pattern:  ",d?n+=""+c:n+=""+e.util.toQuotedString(l),n+="  } ",e.opts.messages!==!1&&(n+=` , message: 'should match pattern "`,d?n+="' + "+c+" + '":n+=""+e.util.escapeQuotes(l),n+=`"' `),e.opts.verbose&&(n+=" , schema:  ",d?n+="validate.schema"+o:n+=""+e.util.toQuotedString(l),n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var m=n;return n=_.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",f&&(n+=" else { "),n},_1=function(e,t,r){var n=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(a||""),d="errs__"+s,c=e.util.copy(e),h="";c.level++;var _="valid"+c.level,m="key"+s,y="idx"+s,F=c.dataLevel=e.dataLevel+1,T="data"+F,N="dataProperties"+s,b=Object.keys(l||{}).filter(J),k=e.schema.patternProperties||{},A=Object.keys(k).filter(J),L=e.schema.additionalProperties,P=b.length||A.length,B=L===!1,D=typeof L=="object"&&Object.keys(L).length,R=e.opts.removeAdditional,w=B||D||R,S=e.opts.ownProperties,X=e.baseId,j=e.schema.required;if(j&&!(e.opts.$data&&j.$data)&&j.length<e.opts.loopRequired)var ne=e.util.toHash(j);function J(V){return V!=="__proto__"}if(n+="var "+d+" = errors;var "+_+" = true;",S&&(n+=" var "+N+" = undefined;"),w){if(S?n+=" "+N+" = "+N+" || Object.keys("+p+"); for (var "+y+"=0; "+y+"<"+N+".length; "+y+"++) { var "+m+" = "+N+"["+y+"]; ":n+=" for (var "+m+" in "+p+") { ",P){if(n+=" var isAdditional"+s+" = !(false ",b.length)if(b.length>8)n+=" || validate.schema"+o+".hasOwnProperty("+m+") ";else{var W=b;if(W)for(var x,G=-1,le=W.length-1;G<le;)x=W[G+=1],n+=" || "+m+" == "+e.util.toQuotedString(x)+" "}if(A.length){var Q=A;if(Q)for(var ae,Ve=-1,ze=Q.length-1;Ve<ze;)ae=Q[Ve+=1],n+=" || "+e.usePattern(ae)+".test("+m+") "}n+=" ); if (isAdditional"+s+") { "}if(R=="all")n+=" delete "+p+"["+m+"]; ";else{var De=e.errorPath,Pe="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),B)if(R)n+=" delete "+p+"["+m+"]; ";else{n+=" "+_+" = false; ";var ve=u;u=e.errSchemaPath+"/additionalProperties";var he=he||[];he.push(n),n="",e.createErrors!==!1?(n+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { additionalProperty: '"+Pe+"' } ",e.opts.messages!==!1&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is an invalid additional property":n+="should NOT have additional properties",n+="' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var Fe=n;n=he.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+Fe+"]); ":n+=" validate.errors = ["+Fe+"]; return false; ":n+=" var err = "+Fe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=ve,f&&(n+=" break; ")}else if(D)if(R=="failing"){n+=" var "+d+" = errors;  ";var lt=e.compositeRule;e.compositeRule=c.compositeRule=!0,c.schema=L,c.schemaPath=e.schemaPath+".additionalProperties",c.errSchemaPath=e.errSchemaPath+"/additionalProperties",c.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var He=p+"["+m+"]";c.dataPathArr[F]=m;var fe=e.validate(c);c.baseId=X,e.util.varOccurences(fe,T)<2?n+=" "+e.util.varReplace(fe,T,He)+" ":n+=" var "+T+" = "+He+"; "+fe+" ",n+=" if (!"+_+") { errors = "+d+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+p+"["+m+"]; }  ",e.compositeRule=c.compositeRule=lt}else{c.schema=L,c.schemaPath=e.schemaPath+".additionalProperties",c.errSchemaPath=e.errSchemaPath+"/additionalProperties",c.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var He=p+"["+m+"]";c.dataPathArr[F]=m;var fe=e.validate(c);c.baseId=X,e.util.varOccurences(fe,T)<2?n+=" "+e.util.varReplace(fe,T,He)+" ":n+=" var "+T+" = "+He+"; "+fe+" ",f&&(n+=" if (!"+_+") break; ")}e.errorPath=De}P&&(n+=" } "),n+=" }  ",f&&(n+=" if ("+_+") { ",h+="}")}var Te=e.opts.useDefaults&&!e.compositeRule;if(b.length){var dt=b;if(dt)for(var x,Ot=-1,tr=dt.length-1;Ot<tr;){x=dt[Ot+=1];var At=l[x];if(e.opts.strictKeywords?typeof At=="object"&&Object.keys(At).length>0||At===!1:e.util.schemaHasRules(At,e.RULES.all)){var Qt=e.util.getProperty(x),He=p+Qt,Kt=Te&&At.default!==void 0;c.schema=At,c.schemaPath=o+Qt,c.errSchemaPath=u+"/"+e.util.escapeFragment(x),c.errorPath=e.util.getPath(e.errorPath,x,e.opts.jsonPointers),c.dataPathArr[F]=e.util.toQuotedString(x);var fe=e.validate(c);if(c.baseId=X,e.util.varOccurences(fe,T)<2){fe=e.util.varReplace(fe,T,He);var pt=He}else{var pt=T;n+=" var "+T+" = "+He+"; "}if(Kt)n+=" "+fe+" ";else{if(ne&&ne[x]){n+=" if ( "+pt+" === undefined ",S&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(x)+"') "),n+=") { "+_+" = false; ";var De=e.errorPath,ve=u,Ct=e.util.escapeQuotes(x);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(De,x,e.opts.jsonPointers)),u=e.errSchemaPath+"/required";var he=he||[];he.push(n),n="",e.createErrors!==!1?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+Ct+"' } ",e.opts.messages!==!1&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+Ct+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var Fe=n;n=he.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+Fe+"]); ":n+=" validate.errors = ["+Fe+"]; return false; ":n+=" var err = "+Fe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=ve,e.errorPath=De,n+=" } else { "}else f?(n+=" if ( "+pt+" === undefined ",S&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(x)+"') "),n+=") { "+_+" = true; } else { "):(n+=" if ("+pt+" !== undefined ",S&&(n+=" &&   Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(x)+"') "),n+=" ) { ");n+=" "+fe+" } "}}f&&(n+=" if ("+_+") { ",h+="}")}}if(A.length){var Ut=A;if(Ut)for(var ae,Zt=-1,pr=Ut.length-1;Zt<pr;){ae=Ut[Zt+=1];var At=k[ae];if(e.opts.strictKeywords?typeof At=="object"&&Object.keys(At).length>0||At===!1:e.util.schemaHasRules(At,e.RULES.all)){c.schema=At,c.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ae),c.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ae),S?n+=" "+N+" = "+N+" || Object.keys("+p+"); for (var "+y+"=0; "+y+"<"+N+".length; "+y+"++) { var "+m+" = "+N+"["+y+"]; ":n+=" for (var "+m+" in "+p+") { ",n+=" if ("+e.usePattern(ae)+".test("+m+")) { ",c.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var He=p+"["+m+"]";c.dataPathArr[F]=m;var fe=e.validate(c);c.baseId=X,e.util.varOccurences(fe,T)<2?n+=" "+e.util.varReplace(fe,T,He)+" ":n+=" var "+T+" = "+He+"; "+fe+" ",f&&(n+=" if (!"+_+") break; "),n+=" } ",f&&(n+=" else "+_+" = true; "),n+=" }  ",f&&(n+=" if ("+_+") { ",h+="}")}}}return f&&(n+=" "+h+" if ("+d+" == errors) {"),n},m1=function(e,t,r){var n=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(a||""),d="errs__"+s,c=e.util.copy(e),h="";c.level++;var _="valid"+c.level;if(n+="var "+d+" = errors;",e.opts.strictKeywords?typeof l=="object"&&Object.keys(l).length>0||l===!1:e.util.schemaHasRules(l,e.RULES.all)){c.schema=l,c.schemaPath=o,c.errSchemaPath=u;var m="key"+s,y="idx"+s,F="i"+s,T="' + "+m+" + '",N=c.dataLevel=e.dataLevel+1,b="data"+N,k="dataProperties"+s,A=e.opts.ownProperties,L=e.baseId;A&&(n+=" var "+k+" = undefined; "),A?n+=" "+k+" = "+k+" || Object.keys("+p+"); for (var "+y+"=0; "+y+"<"+k+".length; "+y+"++) { var "+m+" = "+k+"["+y+"]; ":n+=" for (var "+m+" in "+p+") { ",n+=" var startErrs"+s+" = errors; ";var P=m,B=e.compositeRule;e.compositeRule=c.compositeRule=!0;var D=e.validate(c);c.baseId=L,e.util.varOccurences(D,b)<2?n+=" "+e.util.varReplace(D,b,P)+" ":n+=" var "+b+" = "+P+"; "+D+" ",e.compositeRule=c.compositeRule=B,n+=" if (!"+_+") { for (var "+F+"=startErrs"+s+"; "+F+"<errors; "+F+"++) { vErrors["+F+"].propertyName = "+m+"; }   var err =   ",e.createErrors!==!1?(n+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { propertyName: '"+T+"' } ",e.opts.messages!==!1&&(n+=" , message: 'property name \\'"+T+"\\' is invalid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),f&&(n+=" break; "),n+=" } }"}return f&&(n+=" "+h+" if ("+d+" == errors) {"),n},v1=function(e,t,r){var n=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(a||""),d="valid"+s,c=e.opts.$data&&l&&l.$data;c&&(n+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ");var h="schema"+s;if(!c)if(l.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var _=[],m=l;if(m)for(var y,F=-1,T=m.length-1;F<T;){y=m[F+=1];var N=e.schema.properties[y];N&&(e.opts.strictKeywords?typeof N=="object"&&Object.keys(N).length>0||N===!1:e.util.schemaHasRules(N,e.RULES.all))||(_[_.length]=y)}}else var _=l;if(c||_.length){var b=e.errorPath,k=c||_.length>=e.opts.loopRequired,A=e.opts.ownProperties;if(f)if(n+=" var missing"+s+"; ",k){c||(n+=" var "+h+" = validate.schema"+o+"; ");var L="i"+s,P="schema"+s+"["+L+"]",B="' + "+P+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(b,P,e.opts.jsonPointers)),n+=" var "+d+" = true; ",c&&(n+=" if (schema"+s+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+s+")) "+d+" = false; else {"),n+=" for (var "+L+" = 0; "+L+" < "+h+".length; "+L+"++) { "+d+" = "+p+"["+h+"["+L+"]] !== undefined ",A&&(n+=" &&   Object.prototype.hasOwnProperty.call("+p+", "+h+"["+L+"]) "),n+="; if (!"+d+") break; } ",c&&(n+="  }  "),n+="  if (!"+d+") {   ";var D=D||[];D.push(n),n="",e.createErrors!==!1?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+B+"' } ",e.opts.messages!==!1&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+B+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var R=n;n=D.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+R+"]); ":n+=" validate.errors = ["+R+"]; return false; ":n+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else{n+=" if ( ";var w=_;if(w)for(var S,L=-1,X=w.length-1;L<X;){S=w[L+=1],L&&(n+=" || ");var j=e.util.getProperty(S),ne=p+j;n+=" ( ( "+ne+" === undefined ",A&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(S)+"') "),n+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?S:j)+") ) "}n+=") {  ";var P="missing"+s,B="' + "+P+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(b,P,!0):b+" + "+P);var D=D||[];D.push(n),n="",e.createErrors!==!1?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+B+"' } ",e.opts.messages!==!1&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+B+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var R=n;n=D.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+R+"]); ":n+=" validate.errors = ["+R+"]; return false; ":n+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else if(k){c||(n+=" var "+h+" = validate.schema"+o+"; ");var L="i"+s,P="schema"+s+"["+L+"]",B="' + "+P+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(b,P,e.opts.jsonPointers)),c&&(n+=" if ("+h+" && !Array.isArray("+h+")) {  var err =   ",e.createErrors!==!1?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+B+"' } ",e.opts.messages!==!1&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+B+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+h+" !== undefined) { "),n+=" for (var "+L+" = 0; "+L+" < "+h+".length; "+L+"++) { if ("+p+"["+h+"["+L+"]] === undefined ",A&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", "+h+"["+L+"]) "),n+=") {  var err =   ",e.createErrors!==!1?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+B+"' } ",e.opts.messages!==!1&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+B+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",c&&(n+="  }  ")}else{var J=_;if(J)for(var S,W=-1,x=J.length-1;W<x;){S=J[W+=1];var j=e.util.getProperty(S),B=e.util.escapeQuotes(S),ne=p+j;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(b,S,e.opts.jsonPointers)),n+=" if ( "+ne+" === undefined ",A&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(S)+"') "),n+=") {  var err =   ",e.createErrors!==!1?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+B+"' } ",e.opts.messages!==!1&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+B+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=b}else f&&(n+=" if (true) {");return n},g1=function(e,t,r){var n=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p="data"+(a||""),d="valid"+s,c=e.opts.$data&&l&&l.$data,h;if(c?(n+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",h="schema"+s):h=l,(l||c)&&e.opts.uniqueItems!==!1){c&&(n+=" var "+d+"; if ("+h+" === false || "+h+" === undefined) "+d+" = true; else if (typeof "+h+" != 'boolean') "+d+" = false; else { "),n+=" var i = "+p+".length , "+d+" = true , j; if (i > 1) { ";var _=e.schema.items&&e.schema.items.type,m=Array.isArray(_);if(!_||_=="object"||_=="array"||m&&(_.indexOf("object")>=0||_.indexOf("array")>=0))n+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+p+"[i], "+p+"[j])) { "+d+" = false; break outer; } } } ";else{n+=" var itemIndices = {}, item; for (;i--;) { var item = "+p+"[i]; ";var y="checkDataType"+(m?"s":"");n+=" if ("+e.util[y](_,"item",e.opts.strictNumbers,!0)+") continue; ",m&&(n+=` if (typeof item == 'string') item = '"' + item; `),n+=" if (typeof itemIndices[item] == 'number') { "+d+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}n+=" } ",c&&(n+="  }  "),n+=" if (!"+d+") {   ";var F=F||[];F.push(n),n="",e.createErrors!==!1?(n+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(n+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(n+=" , schema:  ",c?n+="validate.schema"+o:n+=""+l,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var T=n;n=F.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+T+"]); ":n+=" validate.errors = ["+T+"]; return false; ":n+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",f&&(n+=" else { ")}else f&&(n+=" if (true) { ");return n},b1={$ref:e1,allOf:t1,anyOf:r1,$comment:n1,const:i1,contains:a1,dependencies:s1,enum:l1,format:o1,if:u1,items:f1,maximum:fu,minimum:fu,maxItems:cu,minItems:cu,maxLength:du,minLength:du,maxProperties:hu,minProperties:hu,multipleOf:c1,not:d1,oneOf:h1,pattern:p1,properties:_1,propertyNames:m1,required:v1,uniqueItems:g1,validate:Mh},pu=b1,js=Ri.toHash,w1=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"],r=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],n=["number","integer","string","array","object","boolean","null"];return e.all=js(t),e.types=js(n),e.forEach(function(s){s.rules=s.rules.map(function(a){var l;if(typeof a=="object"){var o=Object.keys(a)[0];l=a[o],a=o,l.forEach(function(f){t.push(f),e.all[f]=!0})}t.push(a);var u=e.all[a]={keyword:a,code:pu[a],implements:l};return u}),e.all.$comment={keyword:"$comment",code:pu.$comment},s.type&&(e.types[s.type]=s)}),e.keywords=js(t.concat(r)),e.custom={},e},_u=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],y1=function(i,e){for(var t=0;t<e.length;t++){i=JSON.parse(JSON.stringify(i));var r=e[t].split("/"),n=i,s;for(s=1;s<r.length;s++)n=n[r[s]];for(s=0;s<_u.length;s++){var a=_u[s],l=n[a];l&&(n[a]={anyOf:[l,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return i},E1=Bl.MissingRef,D1=ep;function ep(i,e,t){var r=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(t=e,e=void 0);var n=s(i).then(function(){var l=r._addSchema(i,void 0,e);return l.validate||a(l)});return t&&n.then(function(l){t(null,l)},t),n;function s(l){var o=l.$schema;return o&&!r.getSchema(o)?ep.call(r,{$ref:o},!0):Promise.resolve()}function a(l){try{return r._compile(l)}catch(u){if(u instanceof E1)return o(u);throw u}function o(u){var f=u.missingSchema;if(c(f))throw new Error("Schema "+f+" is loaded but "+u.missingRef+" cannot be resolved");var p=r._loadingSchemas[f];return p||(p=r._loadingSchemas[f]=r._opts.loadSchema(f),p.then(d,d)),p.then(function(h){if(!c(f))return s(h).then(function(){c(f)||r.addSchema(h,f,void 0,e)})}).then(function(){return a(l)});function d(){delete r._loadingSchemas[f]}function c(h){return r._refs[h]||r._schemas[h]}}}}var k1=function(e,t,r){var n=" ",s=e.level,a=e.dataLevel,l=e.schema[t],o=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,p,d="data"+(a||""),c="valid"+s,h="errs__"+s,_=e.opts.$data&&l&&l.$data,m;_?(n+=" var schema"+s+" = "+e.util.getData(l.$data,a,e.dataPathArr)+"; ",m="schema"+s):m=l;var y=this,F="definition"+s,T=y.definition,N="",b,k,A,L,P;if(_&&T.$data){P="keywordValidate"+s;var B=T.validateSchema;n+=" var "+F+" = RULES.custom['"+t+"'].definition; var "+P+" = "+F+".validate;"}else{if(L=e.useCustomRule(y,l,e.schema,e),!L)return;m="validate.schema"+o,P=L.code,b=T.compile,k=T.inline,A=T.macro}var D=P+".errors",R="i"+s,w="ruleErr"+s,S=T.async;if(S&&!e.async)throw new Error("async keyword in sync schema");if(k||A||(n+=""+D+" = null;"),n+="var "+h+" = errors;var "+c+";",_&&T.$data&&(N+="}",n+=" if ("+m+" === undefined) { "+c+" = true; } else { ",B&&(N+="}",n+=" "+c+" = "+F+".validateSchema("+m+"); if ("+c+") { ")),k)T.statements?n+=" "+L.validate+" ":n+=" "+c+" = "+L.validate+"; ";else if(A){var X=e.util.copy(e),N="";X.level++;var j="valid"+X.level;X.schema=L.validate,X.schemaPath="";var ne=e.compositeRule;e.compositeRule=X.compositeRule=!0;var J=e.validate(X).replace(/validate\.schema/g,P);e.compositeRule=X.compositeRule=ne,n+=" "+J}else{var W=W||[];W.push(n),n="",n+="  "+P+".call( ",e.opts.passContext?n+="this":n+="self",b||T.schema===!1?n+=" , "+d+" ":n+=" , "+m+" , "+d+" , validate.schema"+e.schemaPath+" ",n+=" , (dataPath || '')",e.errorPath!='""'&&(n+=" + "+e.errorPath);var x=a?"data"+(a-1||""):"parentData",G=a?e.dataPathArr[a]:"parentDataProperty";n+=" , "+x+" , "+G+" , rootData )  ";var le=n;n=W.pop(),T.errors===!1?(n+=" "+c+" = ",S&&(n+="await "),n+=""+le+"; "):S?(D="customErrors"+s,n+=" var "+D+" = null; try { "+c+" = await "+le+"; } catch (e) { "+c+" = false; if (e instanceof ValidationError) "+D+" = e.errors; else throw e; } "):n+=" "+D+" = null; "+c+" = "+le+"; "}if(T.modifying&&(n+=" if ("+x+") "+d+" = "+x+"["+G+"];"),n+=""+N,T.valid)f&&(n+=" if (true) { ");else{n+=" if ( ",T.valid===void 0?(n+=" !",A?n+=""+j:n+=""+c):n+=" "+!T.valid+" ",n+=") { ",p=y.keyword;var W=W||[];W.push(n),n="";var W=W||[];W.push(n),n="",e.createErrors!==!1?(n+=" { keyword: '"+(p||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+y.keyword+"' } ",e.opts.messages!==!1&&(n+=` , message: 'should pass "`+y.keyword+`" keyword validation' `),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var Q=n;n=W.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+Q+"]); ":n+=" validate.errors = ["+Q+"]; return false; ":n+=" var err = "+Q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var ae=n;n=W.pop(),k?T.errors?T.errors!="full"&&(n+="  for (var "+R+"="+h+"; "+R+"<errors; "+R+"++) { var "+w+" = vErrors["+R+"]; if ("+w+".dataPath === undefined) "+w+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+w+".schemaPath === undefined) { "+w+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(n+=" "+w+".schema = "+m+"; "+w+".data = "+d+"; "),n+=" } "):T.errors===!1?n+=" "+ae+" ":(n+=" if ("+h+" == errors) { "+ae+" } else {  for (var "+R+"="+h+"; "+R+"<errors; "+R+"++) { var "+w+" = vErrors["+R+"]; if ("+w+".dataPath === undefined) "+w+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+w+".schemaPath === undefined) { "+w+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(n+=" "+w+".schema = "+m+"; "+w+".data = "+d+"; "),n+=" } } "):A?(n+="   var err =   ",e.createErrors!==!1?(n+=" { keyword: '"+(p||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+y.keyword+"' } ",e.opts.messages!==!1&&(n+=` , message: 'should pass "`+y.keyword+`" keyword validation' `),e.opts.verbose&&(n+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&f&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; ")):T.errors===!1?n+=" "+ae+" ":(n+=" if (Array.isArray("+D+")) { if (vErrors === null) vErrors = "+D+"; else vErrors = vErrors.concat("+D+"); errors = vErrors.length;  for (var "+R+"="+h+"; "+R+"<errors; "+R+"++) { var "+w+" = vErrors["+R+"]; if ("+w+".dataPath === undefined) "+w+".dataPath = (dataPath || '') + "+e.errorPath+";  "+w+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(n+=" "+w+".schema = "+m+"; "+w+".data = "+d+"; "),n+=" } } else { "+ae+" } "),n+=" } ",f&&(n+=" else { ")}return n};const A1="http://json-schema.org/draft-07/schema#",C1="http://json-schema.org/draft-07/schema#",T1="Core schema meta-schema",N1={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},S1=["object","boolean"],I1={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},tp={$schema:A1,$id:C1,title:T1,definitions:N1,type:S1,properties:I1,default:!0};var mu=tp,P1={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:mu.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:mu.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},R1=/^[a-z_$][a-z0-9_$-]*$/i,F1=k1,O1=P1,B1={add:L1,get:U1,remove:j1,validate:cl};function L1(i,e){var t=this.RULES;if(t.keywords[i])throw new Error("Keyword "+i+" is already defined");if(!R1.test(i))throw new Error("Keyword "+i+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var r=e.type;if(Array.isArray(r))for(var n=0;n<r.length;n++)a(i,r[n],e);else a(i,r,e);var s=e.metaSchema;s&&(e.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(s,!0))}t.keywords[i]=t.all[i]=!0;function a(l,o,u){for(var f,p=0;p<t.length;p++){var d=t[p];if(d.type==o){f=d;break}}f||(f={type:o,rules:[]},t.push(f));var c={keyword:l,definition:u,custom:!0,code:F1,implements:u.implements};f.rules.push(c),t.custom[l]=c}return this}function U1(i){var e=this.RULES.custom[i];return e?e.definition:this.RULES.keywords[i]||!1}function j1(i){var e=this.RULES;delete e.keywords[i],delete e.all[i],delete e.custom[i];for(var t=0;t<e.length;t++)for(var r=e[t].rules,n=0;n<r.length;n++)if(r[n].keyword==i){r.splice(n,1);break}return this}function cl(i,e){cl.errors=null;var t=this._validateKeyword=this._validateKeyword||this.compile(O1,!0);if(t(i))return!0;if(cl.errors=t.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(t.errors));return!1}const q1="http://json-schema.org/draft-07/schema#",M1="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",V1="Meta-schema for $data reference (JSON Schema extension proposal)",z1="object",H1=["$data"],x1={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},X1=!1,G1={$schema:q1,$id:M1,description:V1,type:z1,required:H1,properties:x1,additionalProperties:X1};var rp=Fv,ti=Ol,Q1=Mv,np=Bh,$1=qh,W1=Qv,Y1=w1,ip=y1,ap=Ri,J1=rr;rr.prototype.validate=Z1;rr.prototype.compile=eg;rr.prototype.addSchema=tg;rr.prototype.addMetaSchema=rg;rr.prototype.validateSchema=ng;rr.prototype.getSchema=ag;rr.prototype.removeSchema=lg;rr.prototype.addFormat=_g;rr.prototype.errorsText=pg;rr.prototype._addSchema=og;rr.prototype._compile=ug;rr.prototype.compileAsync=D1;var _s=B1;rr.prototype.addKeyword=_s.add;rr.prototype.getKeyword=_s.get;rr.prototype.removeKeyword=_s.remove;rr.prototype.validateKeyword=_s.validate;var sp=Bl;rr.ValidationError=sp.Validation;rr.MissingRefError=sp.MissingRef;rr.$dataMetaSchema=ip;var Ka="http://json-schema.org/draft-07/schema",vu=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],K1=["/properties"];function rr(i){if(!(this instanceof rr))return new rr(i);i=this._opts=ap.copy(i)||{},yg(this),this._schemas={},this._refs={},this._fragments={},this._formats=W1(i.format),this._cache=i.cache||new Q1,this._loadingSchemas={},this._compilations=[],this.RULES=Y1(),this._getId=fg(i),i.loopRequired=i.loopRequired||1/0,i.errorDataPath=="property"&&(i._errorDataPathProperty=!0),i.serialize===void 0&&(i.serialize=$1),this._metaOpts=wg(this),i.formats&&gg(this),i.keywords&&bg(this),mg(this),typeof i.meta=="object"&&this.addMetaSchema(i.meta),i.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),vg(this)}function Z1(i,e){var t;if(typeof i=="string"){if(t=this.getSchema(i),!t)throw new Error('no schema with key or ref "'+i+'"')}else{var r=this._addSchema(i);t=r.validate||this._compile(r)}var n=t(e);return t.$async!==!0&&(this.errors=t.errors),n}function eg(i,e){var t=this._addSchema(i,void 0,e);return t.validate||this._compile(t)}function tg(i,e,t,r){if(Array.isArray(i)){for(var n=0;n<i.length;n++)this.addSchema(i[n],void 0,t,r);return this}var s=this._getId(i);if(s!==void 0&&typeof s!="string")throw new Error("schema id must be string");return e=ti.normalizeId(e||s),op(this,e),this._schemas[e]=this._addSchema(i,t,r,!0),this}function rg(i,e,t){return this.addSchema(i,e,t,!0),this}function ng(i,e){var t=i.$schema;if(t!==void 0&&typeof t!="string")throw new Error("$schema must be a string");if(t=t||this._opts.defaultMeta||ig(this),!t)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var r=this.validate(t,i);if(!r&&e){var n="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(n);else throw new Error(n)}return r}function ig(i){var e=i._opts.meta;return i._opts.defaultMeta=typeof e=="object"?i._getId(e)||e:i.getSchema(Ka)?Ka:void 0,i._opts.defaultMeta}function ag(i){var e=lp(this,i);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return sg(this,i)}}function sg(i,e){var t=ti.schema.call(i,{schema:{}},e);if(t){var r=t.schema,n=t.root,s=t.baseId,a=rp.call(i,r,n,void 0,s);return i._fragments[e]=new np({ref:e,fragment:!0,schema:r,root:n,baseId:s,validate:a}),a}}function lp(i,e){return e=ti.normalizeId(e),i._schemas[e]||i._refs[e]||i._fragments[e]}function lg(i){if(i instanceof RegExp)return Ia(this,this._schemas,i),Ia(this,this._refs,i),this;switch(typeof i){case"undefined":return Ia(this,this._schemas),Ia(this,this._refs),this._cache.clear(),this;case"string":var e=lp(this,i);return e&&this._cache.del(e.cacheKey),delete this._schemas[i],delete this._refs[i],this;case"object":var t=this._opts.serialize,r=t?t(i):i;this._cache.del(r);var n=this._getId(i);n&&(n=ti.normalizeId(n),delete this._schemas[n],delete this._refs[n])}return this}function Ia(i,e,t){for(var r in e){var n=e[r];!n.meta&&(!t||t.test(r))&&(i._cache.del(n.cacheKey),delete e[r])}}function og(i,e,t,r){if(typeof i!="object"&&typeof i!="boolean")throw new Error("schema should be object or boolean");var n=this._opts.serialize,s=n?n(i):i,a=this._cache.get(s);if(a)return a;r=r||this._opts.addUsedSchema!==!1;var l=ti.normalizeId(this._getId(i));l&&r&&op(this,l);var o=this._opts.validateSchema!==!1&&!e,u;o&&!(u=l&&l==ti.normalizeId(i.$schema))&&this.validateSchema(i,!0);var f=ti.ids.call(this,i),p=new np({id:l,schema:i,localRefs:f,cacheKey:s,meta:t});return l[0]!="#"&&r&&(this._refs[l]=p),this._cache.put(s,p),o&&u&&this.validateSchema(i,!0),p}function ug(i,e){if(i.compiling)return i.validate=n,n.schema=i.schema,n.errors=null,n.root=e||n,i.schema.$async===!0&&(n.$async=!0),n;i.compiling=!0;var t;i.meta&&(t=this._opts,this._opts=this._metaOpts);var r;try{r=rp.call(this,i.schema,e,i.localRefs)}catch(s){throw delete i.validate,s}finally{i.compiling=!1,i.meta&&(this._opts=t)}return i.validate=r,i.refs=r.refs,i.refVal=r.refVal,i.root=r.root,r;function n(){var s=i.validate,a=s.apply(this,arguments);return n.errors=s.errors,a}}function fg(i){switch(i.schemaId){case"auto":return hg;case"id":return cg;default:return dg}}function cg(i){return i.$id&&this.logger.warn("schema $id ignored",i.$id),i.id}function dg(i){return i.id&&this.logger.warn("schema id ignored",i.id),i.$id}function hg(i){if(i.$id&&i.id&&i.$id!=i.id)throw new Error("schema $id is different from id");return i.$id||i.id}function pg(i,e){if(i=i||this.errors,!i)return"No errors";e=e||{};for(var t=e.separator===void 0?", ":e.separator,r=e.dataVar===void 0?"data":e.dataVar,n="",s=0;s<i.length;s++){var a=i[s];a&&(n+=r+a.dataPath+" "+a.message+t)}return n.slice(0,-t.length)}function _g(i,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[i]=e,this}function mg(i){var e;if(i._opts.$data&&(e=G1,i.addMetaSchema(e,e.$id,!0)),i._opts.meta!==!1){var t=tp;i._opts.$data&&(t=ip(t,K1)),i.addMetaSchema(t,Ka,!0),i._refs["http://json-schema.org/schema"]=Ka}}function vg(i){var e=i._opts.schemas;if(e)if(Array.isArray(e))i.addSchema(e);else for(var t in e)i.addSchema(e[t],t)}function gg(i){for(var e in i._opts.formats){var t=i._opts.formats[e];i.addFormat(e,t)}}function bg(i){for(var e in i._opts.keywords){var t=i._opts.keywords[e];i.addKeyword(e,t)}}function op(i,e){if(i._schemas[e]||i._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function wg(i){for(var e=ap.copy(i._opts),t=0;t<vu.length;t++)delete e[vu[t]];return e}function yg(i){var e=i._opts.logger;if(e===!1)i.logger={log:qs,warn:qs,error:qs};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");i.logger=e}}function qs(){}const Eg=oa(J1);function Rr(i){"@babel/helpers - typeof";return Rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rr(i)}function Dg(i,e){if(Rr(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var r=t.call(i,e||"default");if(Rr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function up(i){var e=Dg(i,"string");return Rr(e)=="symbol"?e:e+""}function gu(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,up(r.key),r)}}function Yt(i,e,t){return e&&gu(i.prototype,e),t&&gu(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function Jt(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function kg(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Tn(i,e){if(e&&(Rr(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kg(i)}function sr(i){return sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sr(i)}function dl(i,e){return dl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},dl(i,e)}function Er(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&dl(i,e)}function qe(i,e,t){return(e=up(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}var un={Literal:1,Collection:3,Graph:4,NamedNode:5,BlankNode:6,Variable:7},qt=function(){function i(e){Jt(this,i),qe(this,"termType",void 0),qe(this,"classOrder",void 0),qe(this,"value",void 0),this.value=e}return Yt(i,[{key:"substitute",value:function(t){return this}},{key:"compareTerm",value:function(t){return this.classOrder<t.classOrder?-1:this.classOrder>t.classOrder?1:this.value<t.value?-1:this.value>t.value?1:0}},{key:"equals",value:function(t){return t?this.termType===t.termType&&this.value===t.value:!1}},{key:"hashString",value:function(){return this.toCanonical()}},{key:"sameTerm",value:function(t){return this.equals(t)}},{key:"toCanonical",value:function(){return this.toNT()}},{key:"toNT",value:function(){return this.toString()}},{key:"toNQ",value:function(){return this.toNT()}},{key:"toString",value:function(){throw new Error("Node.toString() is abstract - see the subclasses instead")}}])}();qe(qt,"fromValue",void 0);qe(qt,"toJS",void 0);var ui="NamedNode",fi="BlankNode",Fi="Literal",zn="Variable",si="DefaultGraph",Hn="Collection",fp="Empty",fa="Graph",bu="text/html",hl="application/ld+json",cp="text/n3",Ag="application/n3",pl="application/nquads",_l="application/n-quads",Cg="application/n-triples",ta="application/rdf+xml",Tg="application/sparql-update",Ng="application/sparql-update-single-match",ri="text/turtle",Sg="application/x-turtle",ml="application/xhtml+xml";function Ig(i,e,t){return e=sr(e),Tn(i,dp()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function dp(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dp=function(){return!!i})()}var fn=function(i){function e(t){var r;return Jt(this,e),r=Ig(this,e,[e.getId(t)]),qe(r,"termType",fi),qe(r,"classOrder",un.BlankNode),qe(r,"isBlank",1),qe(r,"isVar",1),r}return Er(e,i),Yt(e,[{key:"id",get:function(){return this.value},set:function(r){this.value=r}},{key:"compareTerm",value:function(r){return this.classOrder<r.classOrder?-1:this.classOrder>r.classOrder?1:this.id<r.id?-1:this.id>r.id?1:0}},{key:"copy",value:function(r){var n=new e;return r.copyTo(this,n),n}},{key:"toCanonical",value:function(){return e.NTAnonymousNodePrefix+this.value}},{key:"toString",value:function(){return e.NTAnonymousNodePrefix+this.id}}],[{key:"getId",value:function(r){if(r){if(typeof r!="string")throw new Error("Bad id argument to new blank node: "+r);if(r.includes("#")){var n=r.split("#");return n[n.length-1]}return r}return"n"+e.nextId++}}])}(qt);qe(fn,"nextId",0);qe(fn,"NTAnonymousNodePrefix","_:");function wi(i){return typeof i=="string"?i:i.value}function Pg(i){return Rr(i)==="object"&&i!==null&&"subject"in i}function wu(i){return Rr(i)==="object"&&i!==null&&"statements"in i}function Ul(i){return yn(i)&&i.termType===Hn}function Rg(i){return i&&Object.prototype.hasOwnProperty.call(i,"termType")&&(i.termType===ui||i.termType===zn||i.termType===fi||i.termType===Hn||i.termType===Fi||i.termType===fa)}function Fg(i){return i&&Object.prototype.hasOwnProperty.call(i,"termType")&&(i.termType===ui||i.termType===zn||i.termType===fi||i.termType===Hn||i.termType===Fi||i.termType===fa)}function Og(i){return yn(i)&&(i.termType===ui||i.termType===fi||i.termType===zn)}function Bg(i){return yn(i)&&i.termType===zn}function yn(i){return Rr(i)==="object"&&i!==null&&"termType"in i}function hp(i){return i.termType===Fi}function yi(i){return Rr(i)==="object"&&i!==null&&"subject"in i&&"predicate"in i&&"object"in i}function yu(i){return yn(i)&&i.termType==="NamedNode"}function Lg(i){return yn(i)&&(i.termType===ui||i.termType===zn||i.termType===fi||i.termType===si)}function Ug(i,e,t){return e=sr(e),Tn(i,pp()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function pp(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pp=function(){return!!i})()}var hr=function(i){function e(t){var r;if(Jt(this,e),r=Ug(this,e,[wi(t)]),qe(r,"termType",ui),qe(r,"classOrder",un.NamedNode),!r.value)throw new Error("Missing IRI for NamedNode");if(!r.value.includes(":"))throw new Error('NamedNode IRI "'+t+'" must be absolute.');if(r.value.includes(" ")){var n='Error: NamedNode IRI "'+t+'" must not contain unencoded spaces.';throw new Error(n)}return r}return Er(e,i),Yt(e,[{key:"dir",value:function(){var r=this.value.split("#")[0],n=r.slice(0,-1).lastIndexOf("/"),s=r.indexOf("//");return s>=0&&n<s+2||n<0?null:new e(r.slice(0,n+1))}},{key:"site",value:function(){var r=this.value.split("#")[0],n=r.indexOf("//");if(n<0)throw new Error("This URI does not have a web site part (origin)");var s=r.indexOf("/",n+2);return s<0?new e(r.slice(0)+"/"):new e(r.slice(0,s+1))}},{key:"doc",value:function(){return this.value.indexOf("#")<0?this:new e(this.value.split("#")[0])}},{key:"toString",value:function(){return"<"+this.value+">"}},{key:"id",value:function(){return this.value.split("#")[1]}},{key:"uri",get:function(){return this.value},set:function(r){this.value=r}}],[{key:"fromValue",value:function(r){return typeof r>"u"||r===null||yn(r)?r:new e(r)}}])}(qt);const gn={boolean:new hr("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:new hr("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:new hr("http://www.w3.org/2001/XMLSchema#decimal"),double:new hr("http://www.w3.org/2001/XMLSchema#double"),integer:new hr("http://www.w3.org/2001/XMLSchema#integer"),langString:new hr("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:new hr("http://www.w3.org/2001/XMLSchema#string")};function jg(i,e,t){return e=sr(e),Tn(i,_p()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function _p(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_p=function(){return!!i})()}var sn=function(i){function e(t,r,n){var s;return Jt(this,e),s=jg(this,e,[t]),qe(s,"termType",Fi),qe(s,"classOrder",un.Literal),qe(s,"datatype",gn.string),qe(s,"isVar",0),qe(s,"language",""),r?(s.language=r,s.datatype=gn.langString):n?s.datatype=hr.fromValue(n):s.datatype=gn.string,s}return Er(e,i),Yt(e,[{key:"copy",value:function(){return new e(this.value,this.lang,this.datatype)}},{key:"equals",value:function(r){return r?this.termType===r.termType&&this.value===r.value&&this.language===r.language&&(!this.datatype&&!r.datatype||this.datatype&&this.datatype.equals(r.datatype)):!1}},{key:"lang",get:function(){return this.language},set:function(r){this.language=r||""}},{key:"toNT",value:function(){return e.toNT(this)}},{key:"toString",value:function(){return""+this.value}}],[{key:"toNT",value:function(r){if(typeof r.value=="number")return""+r.value;if(typeof r.value!="string")throw new Error("Value of RDF literal is not string or number: "+r.value);var n=r.value;return n=n.replace(/\\/g,"\\\\"),n=n.replace(/\"/g,'\\"'),n=n.replace(/\n/g,"\\n"),n=n.replace(/\r/g,"\\r"),n='"'+n+'"',r.language?n+="@"+r.language:r.datatype.equals(gn.string)||(n+="^^"+r.datatype.toCanonical()),n}},{key:"fromBoolean",value:function(r){var n=r?"1":"0";return new e(n,null,gn.boolean)}},{key:"fromDate",value:function(r){if(!(r instanceof Date))throw new TypeError("Invalid argument to Literal.fromDate()");var n=function(l){return(""+(100+l)).slice(1,3)},s=""+r.getUTCFullYear()+"-"+n(r.getUTCMonth()+1)+"-"+n(r.getUTCDate())+"T"+n(r.getUTCHours())+":"+n(r.getUTCMinutes())+":"+n(r.getUTCSeconds())+"Z";return new e(s,null,gn.dateTime)}},{key:"fromNumber",value:function(r){if(typeof r!="number")throw new TypeError("Invalid argument to Literal.fromNumber()");var n,s=r.toString();return s.indexOf("e")<0&&Math.abs(r)<=Number.MAX_SAFE_INTEGER?n=Number.isInteger(r)?gn.integer:gn.decimal:n=gn.double,new e(s,null,n)}},{key:"fromValue",value:function(r){if(hp(r))return r;switch(Rr(r)){case"object":if(r instanceof Date)return e.fromDate(r);case"boolean":return e.fromBoolean(r);case"number":return e.fromNumber(r);case"string":return new e(r)}throw new Error("Can't make literal from "+r+" of type "+Rr(r))}}])}(qt);function qg(i,e,t){return e=sr(e),Tn(i,mp()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function mp(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mp=function(){return!!i})()}function vp(i){return typeof i>"u"||i===null||yn(i)?i:Array.isArray(i)?new qn(i):sn.fromValue(i)}var qn=function(i){function e(t){var r;return Jt(this,e),r=qg(this,e,[(fn.nextId++).toString()]),qe(r,"termType",Hn),qe(r,"classOrder",un.Collection),qe(r,"closed",!1),qe(r,"compareTerm",fn.prototype.compareTerm),qe(r,"elements",[]),qe(r,"isVar",0),t&&t.length>0&&t.forEach(function(n){r.elements.push(vp(n))}),r}return Er(e,i),Yt(e,[{key:"id",get:function(){return this.value},set:function(r){this.value=r}},{key:"append",value:function(r){return this.elements.push(r)}},{key:"close",value:function(){return this.closed=!0,this.closed}},{key:"shift",value:function(){return this.elements.shift()}},{key:"substitute",value:function(r){var n=this.elements.map(function(s){return s.substitute(r)});return new e(n)}},{key:"toNT",value:function(){return e.toNT(this)}},{key:"toString",value:function(){return"("+this.elements.join(" ")+")"}},{key:"unshift",value:function(r){return this.elements.unshift(r)}}],[{key:"toNT",value:function(r){return fn.NTAnonymousNodePrefix+r.id}}])}(qt);qe(qn,"termType",Hn);function Eu(i,e,t,r,n,s,a){try{var l=i[s](a),o=l.value}catch(u){return void t(u)}l.done?e(o):Promise.resolve(o).then(r,n)}function Du(i){return function(){var e=this,t=arguments;return new Promise(function(r,n){var s=i.apply(e,t);function a(o){Eu(s,r,n,a,l,"next",o)}function l(o){Eu(s,r,n,a,l,"throw",o)}a(void 0)})}}var gp={exports:{}},bp={exports:{}};(function(i){function e(t){"@babel/helpers - typeof";return i.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},i.exports.__esModule=!0,i.exports.default=i.exports,e(t)}i.exports=e,i.exports.__esModule=!0,i.exports.default=i.exports})(bp);var Mg=bp.exports;(function(i){var e=Mg.default;function t(){i.exports=t=function(){return n},i.exports.__esModule=!0,i.exports.default=i.exports;var r,n={},s=Object.prototype,a=s.hasOwnProperty,l=Object.defineProperty||function(W,x,G){W[x]=G.value},o=typeof Symbol=="function"?Symbol:{},u=o.iterator||"@@iterator",f=o.asyncIterator||"@@asyncIterator",p=o.toStringTag||"@@toStringTag";function d(W,x,G){return Object.defineProperty(W,x,{value:G,enumerable:!0,configurable:!0,writable:!0}),W[x]}try{d({},"")}catch{d=function(G,le,Q){return G[le]=Q}}function c(W,x,G,le){var Q=x&&x.prototype instanceof N?x:N,ae=Object.create(Q.prototype),Ve=new ne(le||[]);return l(ae,"_invoke",{value:w(W,G,Ve)}),ae}function h(W,x,G){try{return{type:"normal",arg:W.call(x,G)}}catch(le){return{type:"throw",arg:le}}}n.wrap=c;var _="suspendedStart",m="suspendedYield",y="executing",F="completed",T={};function N(){}function b(){}function k(){}var A={};d(A,u,function(){return this});var L=Object.getPrototypeOf,P=L&&L(L(J([])));P&&P!==s&&a.call(P,u)&&(A=P);var B=k.prototype=N.prototype=Object.create(A);function D(W){["next","throw","return"].forEach(function(x){d(W,x,function(G){return this._invoke(x,G)})})}function R(W,x){function G(Q,ae,Ve,ze){var De=h(W[Q],W,ae);if(De.type!=="throw"){var Pe=De.arg,ve=Pe.value;return ve&&e(ve)=="object"&&a.call(ve,"__await")?x.resolve(ve.__await).then(function(he){G("next",he,Ve,ze)},function(he){G("throw",he,Ve,ze)}):x.resolve(ve).then(function(he){Pe.value=he,Ve(Pe)},function(he){return G("throw",he,Ve,ze)})}ze(De.arg)}var le;l(this,"_invoke",{value:function(ae,Ve){function ze(){return new x(function(De,Pe){G(ae,Ve,De,Pe)})}return le=le?le.then(ze,ze):ze()}})}function w(W,x,G){var le=_;return function(Q,ae){if(le===y)throw Error("Generator is already running");if(le===F){if(Q==="throw")throw ae;return{value:r,done:!0}}for(G.method=Q,G.arg=ae;;){var Ve=G.delegate;if(Ve){var ze=S(Ve,G);if(ze){if(ze===T)continue;return ze}}if(G.method==="next")G.sent=G._sent=G.arg;else if(G.method==="throw"){if(le===_)throw le=F,G.arg;G.dispatchException(G.arg)}else G.method==="return"&&G.abrupt("return",G.arg);le=y;var De=h(W,x,G);if(De.type==="normal"){if(le=G.done?F:m,De.arg===T)continue;return{value:De.arg,done:G.done}}De.type==="throw"&&(le=F,G.method="throw",G.arg=De.arg)}}}function S(W,x){var G=x.method,le=W.iterator[G];if(le===r)return x.delegate=null,G==="throw"&&W.iterator.return&&(x.method="return",x.arg=r,S(W,x),x.method==="throw")||G!=="return"&&(x.method="throw",x.arg=new TypeError("The iterator does not provide a '"+G+"' method")),T;var Q=h(le,W.iterator,x.arg);if(Q.type==="throw")return x.method="throw",x.arg=Q.arg,x.delegate=null,T;var ae=Q.arg;return ae?ae.done?(x[W.resultName]=ae.value,x.next=W.nextLoc,x.method!=="return"&&(x.method="next",x.arg=r),x.delegate=null,T):ae:(x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,T)}function X(W){var x={tryLoc:W[0]};1 in W&&(x.catchLoc=W[1]),2 in W&&(x.finallyLoc=W[2],x.afterLoc=W[3]),this.tryEntries.push(x)}function j(W){var x=W.completion||{};x.type="normal",delete x.arg,W.completion=x}function ne(W){this.tryEntries=[{tryLoc:"root"}],W.forEach(X,this),this.reset(!0)}function J(W){if(W||W===""){var x=W[u];if(x)return x.call(W);if(typeof W.next=="function")return W;if(!isNaN(W.length)){var G=-1,le=function Q(){for(;++G<W.length;)if(a.call(W,G))return Q.value=W[G],Q.done=!1,Q;return Q.value=r,Q.done=!0,Q};return le.next=le}}throw new TypeError(e(W)+" is not iterable")}return b.prototype=k,l(B,"constructor",{value:k,configurable:!0}),l(k,"constructor",{value:b,configurable:!0}),b.displayName=d(k,p,"GeneratorFunction"),n.isGeneratorFunction=function(W){var x=typeof W=="function"&&W.constructor;return!!x&&(x===b||(x.displayName||x.name)==="GeneratorFunction")},n.mark=function(W){return Object.setPrototypeOf?Object.setPrototypeOf(W,k):(W.__proto__=k,d(W,p,"GeneratorFunction")),W.prototype=Object.create(B),W},n.awrap=function(W){return{__await:W}},D(R.prototype),d(R.prototype,f,function(){return this}),n.AsyncIterator=R,n.async=function(W,x,G,le,Q){Q===void 0&&(Q=Promise);var ae=new R(c(W,x,G,le),Q);return n.isGeneratorFunction(x)?ae:ae.next().then(function(Ve){return Ve.done?Ve.value:ae.next()})},D(B),d(B,p,"Generator"),d(B,u,function(){return this}),d(B,"toString",function(){return"[object Generator]"}),n.keys=function(W){var x=Object(W),G=[];for(var le in x)G.push(le);return G.reverse(),function Q(){for(;G.length;){var ae=G.pop();if(ae in x)return Q.value=ae,Q.done=!1,Q}return Q.done=!0,Q}},n.values=J,ne.prototype={constructor:ne,reset:function(x){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(j),!x)for(var G in this)G.charAt(0)==="t"&&a.call(this,G)&&!isNaN(+G.slice(1))&&(this[G]=r)},stop:function(){this.done=!0;var x=this.tryEntries[0].completion;if(x.type==="throw")throw x.arg;return this.rval},dispatchException:function(x){if(this.done)throw x;var G=this;function le(Pe,ve){return Ve.type="throw",Ve.arg=x,G.next=Pe,ve&&(G.method="next",G.arg=r),!!ve}for(var Q=this.tryEntries.length-1;Q>=0;--Q){var ae=this.tryEntries[Q],Ve=ae.completion;if(ae.tryLoc==="root")return le("end");if(ae.tryLoc<=this.prev){var ze=a.call(ae,"catchLoc"),De=a.call(ae,"finallyLoc");if(ze&&De){if(this.prev<ae.catchLoc)return le(ae.catchLoc,!0);if(this.prev<ae.finallyLoc)return le(ae.finallyLoc)}else if(ze){if(this.prev<ae.catchLoc)return le(ae.catchLoc,!0)}else{if(!De)throw Error("try statement without catch or finally");if(this.prev<ae.finallyLoc)return le(ae.finallyLoc)}}}},abrupt:function(x,G){for(var le=this.tryEntries.length-1;le>=0;--le){var Q=this.tryEntries[le];if(Q.tryLoc<=this.prev&&a.call(Q,"finallyLoc")&&this.prev<Q.finallyLoc){var ae=Q;break}}ae&&(x==="break"||x==="continue")&&ae.tryLoc<=G&&G<=ae.finallyLoc&&(ae=null);var Ve=ae?ae.completion:{};return Ve.type=x,Ve.arg=G,ae?(this.method="next",this.next=ae.finallyLoc,T):this.complete(Ve)},complete:function(x,G){if(x.type==="throw")throw x.arg;return x.type==="break"||x.type==="continue"?this.next=x.arg:x.type==="return"?(this.rval=this.arg=x.arg,this.method="return",this.next="end"):x.type==="normal"&&G&&(this.next=G),T},finish:function(x){for(var G=this.tryEntries.length-1;G>=0;--G){var le=this.tryEntries[G];if(le.finallyLoc===x)return this.complete(le.completion,le.afterLoc),j(le),T}},catch:function(x){for(var G=this.tryEntries.length-1;G>=0;--G){var le=this.tryEntries[G];if(le.tryLoc===x){var Q=le.completion;if(Q.type==="throw"){var ae=Q.arg;j(le)}return ae}}throw Error("illegal catch attempt")},delegateYield:function(x,G,le){return this.delegate={iterator:J(x),resultName:G,nextLoc:le},this.method==="next"&&(this.arg=r),T}},n}i.exports=t,i.exports.__esModule=!0,i.exports.default=i.exports})(gp);var Vg=gp.exports,Ma=Vg(),zg=Ma;try{regeneratorRuntime=Ma}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Ma:Function("r","regeneratorRuntime = r")(Ma)}const Pa=oa(zg);var ra="chrome:theSession";new hr(ra);function Hg(i,e,t){return e=sr(e),Tn(i,wp()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function wp(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wp=function(){return!!i})()}var jl=function(i){function e(){var t;return Jt(this,e),t=Hg(this,e,[""]),qe(t,"value",""),qe(t,"termType",si),qe(t,"uri",ra),t}return Er(e,i),Yt(e,[{key:"toCanonical",value:function(){return this.value}},{key:"toString",value:function(){return"DefaultGraph"}}])}(qt);function ku(i){return!!i&&i.termType===si}var xg=new jl,ni=function(){function i(e,t,r,n){Jt(this,i),qe(this,"subject",void 0),qe(this,"predicate",void 0),qe(this,"object",void 0),qe(this,"graph",void 0),this.subject=qt.fromValue(e),this.predicate=qt.fromValue(t),this.object=qt.fromValue(r),this.graph=n==null?xg:qt.fromValue(n)}return Yt(i,[{key:"why",get:function(){return this.graph},set:function(t){this.graph=t}},{key:"equals",value:function(t){return t.subject.equals(this.subject)&&t.predicate.equals(this.predicate)&&t.object.equals(this.object)&&t.graph.equals(this.graph)}},{key:"substitute",value:function(t){var r=new i(this.subject.substitute(t),this.predicate.substitute(t),this.object.substitute(t),ku(this.graph)?this.graph:this.graph.substitute(t));return r}},{key:"toCanonical",value:function(){var t=[this.subject.toCanonical(),this.predicate.toCanonical(),this.object.toCanonical()];return this.graph&&this.graph.termType!==si&&t.push(this.graph.toCanonical()),t.join(" ")+" ."}},{key:"toNT",value:function(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT()].join(" ")+" ."}},{key:"toNQ",value:function(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT(),ku(this.graph)?"":this.graph.toNT()].join(" ")+" ."}},{key:"toString",value:function(){return this.toNT()}}])}(),yp=yp||console.log;function Di(i){var e;return e=i.indexOf("#"),e<0?i:i.slice(0,e)}function Xg(i){var e=/[^\/]*\/\/([^\/]*)\//.exec(i);return e?e[1]:""}function Mr(i,e){var t,r,n,s,a,l,o=e.indexOf("#");if(o>0&&(e=e.slice(0,o)),i.length===0)return e;if(i.indexOf("#")===0)return e+i;if(s=i.indexOf(":"),s>=0||(t=e.indexOf(":"),e.length===0))return i;if(t<0)return yp("Invalid base: "+e+" in join with given: "+i),i;if(r=e.slice(0,+t+1||9e9),i.indexOf("//")===0)return r+i;if(e.indexOf("//",t)===t+1){if(n=e.indexOf("/",t+3),n<0)return e.length-t-3>0?e+"/"+i:r+i}else if(n=e.indexOf("/",t+1),n<0)return e.length-t-1>0?e+"/"+i:r+i;if(i.indexOf("/")===0)return e.slice(0,n)+i;if(l=e.slice(n),a=l.lastIndexOf("/"),a<0)return r+i;for(a>=0&&a<l.length-1&&(l=l.slice(0,+a+1||9e9)),l+=i;l.match(/[^\/]*\/\.\.\//);)l=l.replace(/[^\/]*\/\.\.\//,"");return l=l.replace(/\.\//g,""),l=l.replace(/\/\.$/,"/"),e.slice(0,n)+l}function Au(i){var e=i.indexOf(":");return e<0?null:i.slice(0,e)}function Ms(i,e){var t,r,n,s,a,l,o,u,f,p,d,c,h,_=new RegExp("^[-_a-zA-Z0-9.]+:(//[^/]*)?/[^/]*$");if(!i)return e;if(i===e)return"";for(r=u=0,a=e.length;u<a;r=++u){var m=e[r];if(m!==i[r])break}if(i.slice(0,r).match(_)&&(n=e.indexOf("//"),n<0&&(n=-2),s=e.indexOf("/",n+2),e[s+1]!=="/"&&i[s+1]!=="/"&&e.slice(0,s)===i.slice(0,s)))return e.slice(s);if(e[r]==="#"&&i.length===r)return e.slice(r);for(;r>0&&e[r-1]!=="/";)r--;if(r<3||i.indexOf("//",r-2)>0||e.indexOf("//",r-2)>0||i.indexOf(":",r)>0)return e;for(o=0,d=i.slice(r),f=0,l=d.length;f<l;f++)t=d[f],t==="/"&&o++;if(o===0&&r<e.length&&e[r]==="#")return"./"+e.slice(r);if(o===0&&r===e.length)return"./";if(h="",o>0)for(p=1,c=o;c>=1?p<=c:p>=c;c>=1?++p:--p)h+="../";return h+e.slice(r)}function Gg(i,e,t){return e=sr(e),Tn(i,Ep()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function Ep(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ep=function(){return!!i})()}var li=function(i){function e(){var t,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return Jt(this,e),t=Gg(this,e,[r]),qe(t,"termType",zn),qe(t,"base","varid:"),qe(t,"classOrder",un.Variable),qe(t,"isVar",1),qe(t,"uri",void 0),t.base="varid:",t.uri=Mr(r,t.base),t}return Er(e,i),Yt(e,[{key:"equals",value:function(r){return r?this.termType===r.termType&&this.value===r.value:!1}},{key:"hashString",value:function(){return this.toString()}},{key:"substitute",value:function(r){var n;return(n=r[this.toNT()])!=null?n:this}},{key:"toString",value:function(){return e.toString(this)}}],[{key:"toString",value:function(r){return r.uri.slice(0,r.base.length)===r.base?"?".concat(r.uri.slice(r.base.length)):"?".concat(r.uri)}}])}(qt),Cr=function(i){return i.collections="COLLECTIONS",i.defaultGraphType="DEFAULT_GRAPH_TYPE",i.equalsMethod="EQUALS_METHOD",i.id="ID",i.identity="IDENTITY",i.reversibleId="REVERSIBLE_ID",i.variableType="VARIABLE_TYPE",i}({}),Cu=new jl,xr={supports:qe(qe(qe(qe(qe(qe(qe({},Cr.collections,!1),Cr.defaultGraphType,!1),Cr.equalsMethod,!0),Cr.identity,!1),Cr.id,!0),Cr.reversibleId,!1),Cr.variableType,!0),blankNode:function(e){return new fn(e)},defaultGraph:function(){return Cu},equals:function(e,t){return e===t||!e||!t?!0:yi(e)||yi(t)?yi(e)&&yi(t)?this.equals(e.subject,t.subject)&&this.equals(e.predicate,t.predicate)&&this.equals(e.object,t.object)&&this.equals(e.graph,t.graph):!1:yn(e)&&yn(t)?this.id(e)===this.id(t):!1},id:function(e){if(!e)return"undefined";if(yi(e))return this.quadToNQ(e);switch(e.termType){case si:return"defaultGraph";case zn:return li.toString(e);default:var t=this.termToNQ(e);if(t)return t;throw new Error("Can't id term with type '".concat(e.termType,"'"))}},isQuad:function(e){return e instanceof ni},literal:function(e,t){if(typeof e!="string"&&!t)return sn.fromValue(e);var r=typeof e=="string"?e:""+e;return typeof t=="string"?t.indexOf(":")===-1?new sn(r,t):new sn(r,null,this.namedNode(t)):new sn(r,null,t)},namedNode:function(e){return new hr(e)},quad:function(e,t,r,n){return new ni(e,t,r,n||Cu)},triple:function(e,t,r,n){return this.quad(e,t,r,n)},quadToNQ:function(e){return"".concat(this.termToNQ(e.subject)," ").concat(this.termToNQ(e.predicate)," ").concat(this.termToNQ(e.object)," ").concat(this.termToNQ(e.graph)," .")},termToNQ:function(e){var t=this;switch(e.termType){case fi:return"_:"+e.value;case si:return"";case fp:return"<http://www.w3.org/1999/02/22-rdf-syntax-ns#nil>";case Fi:return sn.toNT(e);case fa:case ui:return"<"+e.value+">";case Hn:return"("+e.elements.map(function(r){return t.termToNQ(r)}).join(" ")+")";default:throw new Error("Can't serialize nonstandard term type (was '".concat(e.termType,"')"))}},toNQ:function(e){return this.isQuad(e)?this.quadToNQ(e):this.termToNQ(e)},variable:function(e){return new li(e)}},nn={debug:function(e){},warn:function(e){},info:function(e){},error:function(e){},success:function(e){},msg:function(e){}};function yr(i,e){var t=e||{namedNode:function(n){return new hr(n)}};return function(r){return t.namedNode(i+(r||""))}}var xn={},Nn={};function Qg(i,e,t){if(t===void 0&&(t=Array.prototype),i&&typeof t.find=="function")return t.find.call(i,e);for(var r=0;r<i.length;r++)if(Object.prototype.hasOwnProperty.call(i,r)){var n=i[r];if(e.call(void 0,n,r,i))return n}}function ql(i,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(i):i}function $g(i,e){if(i===null||typeof i!="object")throw new TypeError("target is not an object");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t]);return i}var Dp=ql({HTML:"text/html",isHTML:function(i){return i===Dp.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),kp=ql({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(i){return i===kp.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Nn.assign=$g;Nn.find=Qg;Nn.freeze=ql;Nn.MIME_TYPE=Dp;Nn.NAMESPACE=kp;var Ap=Nn,cn=Ap.find,na=Ap.NAMESPACE;function Wg(i){return i!==""}function Yg(i){return i?i.split(/[\t\n\f\r ]+/).filter(Wg):[]}function Jg(i,e){return i.hasOwnProperty(e)||(i[e]=!0),i}function Tu(i){if(!i)return[];var e=Yg(i);return Object.keys(e.reduce(Jg,{}))}function Kg(i){return function(e){return i&&i.indexOf(e)!==-1}}function ca(i,e){for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}function Sr(i,e){var t=i.prototype;if(!(t instanceof e)){let r=function(){};r.prototype=e.prototype,r=new r,ca(t,r),i.prototype=t=r}t.constructor!=i&&(typeof i!="function"&&console.error("unknown Class:"+i),t.constructor=i)}var Ir={},Xr=Ir.ELEMENT_NODE=1,Ti=Ir.ATTRIBUTE_NODE=2,Za=Ir.TEXT_NODE=3,Cp=Ir.CDATA_SECTION_NODE=4,Tp=Ir.ENTITY_REFERENCE_NODE=5,Zg=Ir.ENTITY_NODE=6,Np=Ir.PROCESSING_INSTRUCTION_NODE=7,Sp=Ir.COMMENT_NODE=8,Ip=Ir.DOCUMENT_NODE=9,Pp=Ir.DOCUMENT_TYPE_NODE=10,En=Ir.DOCUMENT_FRAGMENT_NODE=11,e2=Ir.NOTATION_NODE=12,vr={},dr={};vr.INDEX_SIZE_ERR=(dr[1]="Index size error",1);vr.DOMSTRING_SIZE_ERR=(dr[2]="DOMString size error",2);var Tr=vr.HIERARCHY_REQUEST_ERR=(dr[3]="Hierarchy request error",3);vr.WRONG_DOCUMENT_ERR=(dr[4]="Wrong document",4);vr.INVALID_CHARACTER_ERR=(dr[5]="Invalid character",5);vr.NO_DATA_ALLOWED_ERR=(dr[6]="No data allowed",6);vr.NO_MODIFICATION_ALLOWED_ERR=(dr[7]="No modification allowed",7);var Rp=vr.NOT_FOUND_ERR=(dr[8]="Not found",8);vr.NOT_SUPPORTED_ERR=(dr[9]="Not supported",9);var Nu=vr.INUSE_ATTRIBUTE_ERR=(dr[10]="Attribute in use",10);vr.INVALID_STATE_ERR=(dr[11]="Invalid state",11);vr.SYNTAX_ERR=(dr[12]="Syntax error",12);vr.INVALID_MODIFICATION_ERR=(dr[13]="Invalid modification",13);vr.NAMESPACE_ERR=(dr[14]="Invalid namespace",14);vr.INVALID_ACCESS_ERR=(dr[15]="Invalid access",15);function ir(i,e){if(e instanceof Error)var t=e;else t=this,Error.call(this,dr[i]),this.message=dr[i],Error.captureStackTrace&&Error.captureStackTrace(this,ir);return t.code=i,e&&(this.message=this.message+": "+e),t}ir.prototype=Error.prototype;ca(vr,ir);function bn(){}bn.prototype={length:0,item:function(i){return i>=0&&i<this.length?this[i]:null},toString:function(i,e){for(var t=[],r=0;r<this.length;r++)ki(this[r],t,i,e);return t.join("")},filter:function(i){return Array.prototype.filter.call(this,i)},indexOf:function(i){return Array.prototype.indexOf.call(this,i)}};function Ni(i,e){this._node=i,this._refresh=e,Ml(this)}function Ml(i){var e=i._node._inc||i._node.ownerDocument._inc;if(i._inc!==e){var t=i._refresh(i._node);if(xp(i,"length",t.length),!i.$$length||t.length<i.$$length)for(var r=t.length;r in i;r++)Object.prototype.hasOwnProperty.call(i,r)&&delete i[r];ca(t,i),i._inc=e}}Ni.prototype.item=function(i){return Ml(this),this[i]||null};Sr(Ni,bn);function es(){}function Fp(i,e){for(var t=i.length;t--;)if(i[t]===e)return t}function Su(i,e,t,r){if(r?e[Fp(e,r)]=t:e[e.length++]=t,i){t.ownerElement=i;var n=i.ownerDocument;n&&(r&&Lp(n,i,r),t2(n,i,t))}}function Iu(i,e,t){var r=Fp(e,t);if(r>=0){for(var n=e.length-1;r<n;)e[r]=e[++r];if(e.length=n,i){var s=i.ownerDocument;s&&(Lp(s,i,t),t.ownerElement=null)}}else throw new ir(Rp,new Error(i.tagName+"@"+t))}es.prototype={length:0,item:bn.prototype.item,getNamedItem:function(i){for(var e=this.length;e--;){var t=this[e];if(t.nodeName==i)return t}},setNamedItem:function(i){var e=i.ownerElement;if(e&&e!=this._ownerElement)throw new ir(Nu);var t=this.getNamedItem(i.nodeName);return Su(this._ownerElement,this,i,t),t},setNamedItemNS:function(i){var e=i.ownerElement,t;if(e&&e!=this._ownerElement)throw new ir(Nu);return t=this.getNamedItemNS(i.namespaceURI,i.localName),Su(this._ownerElement,this,i,t),t},removeNamedItem:function(i){var e=this.getNamedItem(i);return Iu(this._ownerElement,this,e),e},removeNamedItemNS:function(i,e){var t=this.getNamedItemNS(i,e);return Iu(this._ownerElement,this,t),t},getNamedItemNS:function(i,e){for(var t=this.length;t--;){var r=this[t];if(r.localName==e&&r.namespaceURI==i)return r}return null}};function Op(){}Op.prototype={hasFeature:function(i,e){return!0},createDocument:function(i,e,t){var r=new da;if(r.implementation=this,r.childNodes=new bn,r.doctype=t||null,t&&r.appendChild(t),e){var n=r.createElementNS(i,e);r.appendChild(n)}return r},createDocumentType:function(i,e,t){var r=new ms;return r.name=i,r.nodeName=i,r.publicId=e||"",r.systemId=t||"",r}};function Pt(){}Pt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(i,e){return ts(this,i,e)},replaceChild:function(i,e){ts(this,i,e,jp),e&&this.removeChild(e)},removeChild:function(i){return Up(this,i)},appendChild:function(i){return this.insertBefore(i,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(i){return vl(this.ownerDocument||this,this,i)},normalize:function(){for(var i=this.firstChild;i;){var e=i.nextSibling;e&&e.nodeType==Za&&i.nodeType==Za?(this.removeChild(e),i.appendData(e.data)):(i.normalize(),i=e)}},isSupported:function(i,e){return this.ownerDocument.implementation.hasFeature(i,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(i){for(var e=this;e;){var t=e._nsMap;if(t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&t[r]===i)return r}e=e.nodeType==Ti?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(i){for(var e=this;e;){var t=e._nsMap;if(t&&Object.prototype.hasOwnProperty.call(t,i))return t[i];e=e.nodeType==Ti?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(i){var e=this.lookupPrefix(i);return e==null}};function Bp(i){return i=="<"&&"&lt;"||i==">"&&"&gt;"||i=="&"&&"&amp;"||i=='"'&&"&quot;"||"&#"+i.charCodeAt()+";"}ca(Ir,Pt);ca(Ir,Pt.prototype);function ia(i,e){if(e(i))return!0;if(i=i.firstChild)do if(ia(i,e))return!0;while(i=i.nextSibling)}function da(){this.ownerDocument=this}function t2(i,e,t){i&&i._inc++;var r=t.namespaceURI;r===na.XMLNS&&(e._nsMap[t.prefix?t.localName:""]=t.value)}function Lp(i,e,t,r){i&&i._inc++;var n=t.namespaceURI;n===na.XMLNS&&delete e._nsMap[t.prefix?t.localName:""]}function Vl(i,e,t){if(i&&i._inc){i._inc++;var r=e.childNodes;if(t)r[r.length++]=t;else{for(var n=e.firstChild,s=0;n;)r[s++]=n,n=n.nextSibling;r.length=s,delete r[r.length]}}}function Up(i,e){var t=e.previousSibling,r=e.nextSibling;return t?t.nextSibling=r:i.firstChild=r,r?r.previousSibling=t:i.lastChild=t,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,Vl(i.ownerDocument,i),e}function r2(i){return i&&(i.nodeType===Pt.DOCUMENT_NODE||i.nodeType===Pt.DOCUMENT_FRAGMENT_NODE||i.nodeType===Pt.ELEMENT_NODE)}function n2(i){return i&&(dn(i)||zl(i)||Dn(i)||i.nodeType===Pt.DOCUMENT_FRAGMENT_NODE||i.nodeType===Pt.COMMENT_NODE||i.nodeType===Pt.PROCESSING_INSTRUCTION_NODE)}function Dn(i){return i&&i.nodeType===Pt.DOCUMENT_TYPE_NODE}function dn(i){return i&&i.nodeType===Pt.ELEMENT_NODE}function zl(i){return i&&i.nodeType===Pt.TEXT_NODE}function Pu(i,e){var t=i.childNodes||[];if(cn(t,dn)||Dn(e))return!1;var r=cn(t,Dn);return!(e&&r&&t.indexOf(r)>t.indexOf(e))}function Ru(i,e){var t=i.childNodes||[];function r(s){return dn(s)&&s!==e}if(cn(t,r))return!1;var n=cn(t,Dn);return!(e&&n&&t.indexOf(n)>t.indexOf(e))}function i2(i,e,t){if(!r2(i))throw new ir(Tr,"Unexpected parent node type "+i.nodeType);if(t&&t.parentNode!==i)throw new ir(Rp,"child not in parent");if(!n2(e)||Dn(e)&&i.nodeType!==Pt.DOCUMENT_NODE)throw new ir(Tr,"Unexpected node type "+e.nodeType+" for parent node type "+i.nodeType)}function a2(i,e,t){var r=i.childNodes||[],n=e.childNodes||[];if(e.nodeType===Pt.DOCUMENT_FRAGMENT_NODE){var s=n.filter(dn);if(s.length>1||cn(n,zl))throw new ir(Tr,"More than one element or text in fragment");if(s.length===1&&!Pu(i,t))throw new ir(Tr,"Element in fragment can not be inserted before doctype")}if(dn(e)&&!Pu(i,t))throw new ir(Tr,"Only one element can be added and only after doctype");if(Dn(e)){if(cn(r,Dn))throw new ir(Tr,"Only one doctype is allowed");var a=cn(r,dn);if(t&&r.indexOf(a)<r.indexOf(t))throw new ir(Tr,"Doctype can only be inserted before an element");if(!t&&a)throw new ir(Tr,"Doctype can not be appended since element is present")}}function jp(i,e,t){var r=i.childNodes||[],n=e.childNodes||[];if(e.nodeType===Pt.DOCUMENT_FRAGMENT_NODE){var s=n.filter(dn);if(s.length>1||cn(n,zl))throw new ir(Tr,"More than one element or text in fragment");if(s.length===1&&!Ru(i,t))throw new ir(Tr,"Element in fragment can not be inserted before doctype")}if(dn(e)&&!Ru(i,t))throw new ir(Tr,"Only one element can be added and only after doctype");if(Dn(e)){if(cn(r,function(o){return Dn(o)&&o!==t}))throw new ir(Tr,"Only one doctype is allowed");var a=cn(r,dn);if(t&&r.indexOf(a)<r.indexOf(t))throw new ir(Tr,"Doctype can only be inserted before an element")}}function ts(i,e,t,r){i2(i,e,t),i.nodeType===Pt.DOCUMENT_NODE&&(r||a2)(i,e,t);var n=e.parentNode;if(n&&n.removeChild(e),e.nodeType===En){var s=e.firstChild;if(s==null)return e;var a=e.lastChild}else s=a=e;var l=t?t.previousSibling:i.lastChild;s.previousSibling=l,a.nextSibling=t,l?l.nextSibling=s:i.firstChild=s,t==null?i.lastChild=a:t.previousSibling=a;do s.parentNode=i;while(s!==a&&(s=s.nextSibling));return Vl(i.ownerDocument||i,i),e.nodeType==En&&(e.firstChild=e.lastChild=null),e}function s2(i,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=i,e.previousSibling=i.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:i.firstChild=e,i.lastChild=e,Vl(i.ownerDocument,i,e),e}da.prototype={nodeName:"#document",nodeType:Ip,doctype:null,documentElement:null,_inc:1,insertBefore:function(i,e){if(i.nodeType==En){for(var t=i.firstChild;t;){var r=t.nextSibling;this.insertBefore(t,e),t=r}return i}return ts(this,i,e),i.ownerDocument=this,this.documentElement===null&&i.nodeType===Xr&&(this.documentElement=i),i},removeChild:function(i){return this.documentElement==i&&(this.documentElement=null),Up(this,i)},replaceChild:function(i,e){ts(this,i,e,jp),i.ownerDocument=this,e&&this.removeChild(e),dn(i)&&(this.documentElement=i)},importNode:function(i,e){return Hp(this,i,e)},getElementById:function(i){var e=null;return ia(this.documentElement,function(t){if(t.nodeType==Xr&&t.getAttribute("id")==i)return e=t,!0}),e},getElementsByClassName:function(i){var e=Tu(i);return new Ni(this,function(t){var r=[];return e.length>0&&ia(t.documentElement,function(n){if(n!==t&&n.nodeType===Xr){var s=n.getAttribute("class");if(s){var a=i===s;if(!a){var l=Tu(s);a=e.every(Kg(l))}a&&r.push(n)}}}),r})},createElement:function(i){var e=new oi;e.ownerDocument=this,e.nodeName=i,e.tagName=i,e.localName=i,e.childNodes=new bn;var t=e.attributes=new es;return t._ownerElement=e,e},createDocumentFragment:function(){var i=new vs;return i.ownerDocument=this,i.childNodes=new bn,i},createTextNode:function(i){var e=new Hl;return e.ownerDocument=this,e.appendData(i),e},createComment:function(i){var e=new xl;return e.ownerDocument=this,e.appendData(i),e},createCDATASection:function(i){var e=new Xl;return e.ownerDocument=this,e.appendData(i),e},createProcessingInstruction:function(i,e){var t=new Ql;return t.ownerDocument=this,t.tagName=t.nodeName=t.target=i,t.nodeValue=t.data=e,t},createAttribute:function(i){var e=new rs;return e.ownerDocument=this,e.name=i,e.nodeName=i,e.localName=i,e.specified=!0,e},createEntityReference:function(i){var e=new Gl;return e.ownerDocument=this,e.nodeName=i,e},createElementNS:function(i,e){var t=new oi,r=e.split(":"),n=t.attributes=new es;return t.childNodes=new bn,t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.namespaceURI=i,r.length==2?(t.prefix=r[0],t.localName=r[1]):t.localName=e,n._ownerElement=t,t},createAttributeNS:function(i,e){var t=new rs,r=e.split(":");return t.ownerDocument=this,t.nodeName=e,t.name=e,t.namespaceURI=i,t.specified=!0,r.length==2?(t.prefix=r[0],t.localName=r[1]):t.localName=e,t}};Sr(da,Pt);function oi(){this._nsMap={}}oi.prototype={nodeType:Xr,hasAttribute:function(i){return this.getAttributeNode(i)!=null},getAttribute:function(i){var e=this.getAttributeNode(i);return e&&e.value||""},getAttributeNode:function(i){return this.attributes.getNamedItem(i)},setAttribute:function(i,e){var t=this.ownerDocument.createAttribute(i);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},removeAttribute:function(i){var e=this.getAttributeNode(i);e&&this.removeAttributeNode(e)},appendChild:function(i){return i.nodeType===En?this.insertBefore(i,null):s2(this,i)},setAttributeNode:function(i){return this.attributes.setNamedItem(i)},setAttributeNodeNS:function(i){return this.attributes.setNamedItemNS(i)},removeAttributeNode:function(i){return this.attributes.removeNamedItem(i.nodeName)},removeAttributeNS:function(i,e){var t=this.getAttributeNodeNS(i,e);t&&this.removeAttributeNode(t)},hasAttributeNS:function(i,e){return this.getAttributeNodeNS(i,e)!=null},getAttributeNS:function(i,e){var t=this.getAttributeNodeNS(i,e);return t&&t.value||""},setAttributeNS:function(i,e,t){var r=this.ownerDocument.createAttributeNS(i,e);r.value=r.nodeValue=""+t,this.setAttributeNode(r)},getAttributeNodeNS:function(i,e){return this.attributes.getNamedItemNS(i,e)},getElementsByTagName:function(i){return new Ni(this,function(e){var t=[];return ia(e,function(r){r!==e&&r.nodeType==Xr&&(i==="*"||r.tagName==i)&&t.push(r)}),t})},getElementsByTagNameNS:function(i,e){return new Ni(this,function(t){var r=[];return ia(t,function(n){n!==t&&n.nodeType===Xr&&(i==="*"||n.namespaceURI===i)&&(e==="*"||n.localName==e)&&r.push(n)}),r})}};da.prototype.getElementsByTagName=oi.prototype.getElementsByTagName;da.prototype.getElementsByTagNameNS=oi.prototype.getElementsByTagNameNS;Sr(oi,Pt);function rs(){}rs.prototype.nodeType=Ti;Sr(rs,Pt);function ha(){}ha.prototype={data:"",substringData:function(i,e){return this.data.substring(i,i+e)},appendData:function(i){i=this.data+i,this.nodeValue=this.data=i,this.length=i.length},insertData:function(i,e){this.replaceData(i,0,e)},appendChild:function(i){throw new Error(dr[Tr])},deleteData:function(i,e){this.replaceData(i,e,"")},replaceData:function(i,e,t){var r=this.data.substring(0,i),n=this.data.substring(i+e);t=r+t+n,this.nodeValue=this.data=t,this.length=t.length}};Sr(ha,Pt);function Hl(){}Hl.prototype={nodeName:"#text",nodeType:Za,splitText:function(i){var e=this.data,t=e.substring(i);e=e.substring(0,i),this.data=this.nodeValue=e,this.length=e.length;var r=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}};Sr(Hl,ha);function xl(){}xl.prototype={nodeName:"#comment",nodeType:Sp};Sr(xl,ha);function Xl(){}Xl.prototype={nodeName:"#cdata-section",nodeType:Cp};Sr(Xl,ha);function ms(){}ms.prototype.nodeType=Pp;Sr(ms,Pt);function qp(){}qp.prototype.nodeType=e2;Sr(qp,Pt);function Mp(){}Mp.prototype.nodeType=Zg;Sr(Mp,Pt);function Gl(){}Gl.prototype.nodeType=Tp;Sr(Gl,Pt);function vs(){}vs.prototype.nodeName="#document-fragment";vs.prototype.nodeType=En;Sr(vs,Pt);function Ql(){}Ql.prototype.nodeType=Np;Sr(Ql,Pt);function Vp(){}Vp.prototype.serializeToString=function(i,e,t){return zp.call(i,e,t)};Pt.prototype.toString=zp;function zp(i,e){var t=[],r=this.nodeType==9&&this.documentElement||this,n=r.prefix,s=r.namespaceURI;if(s&&n==null){var n=r.lookupPrefix(s);if(n==null)var a=[{namespace:s,prefix:null}]}return ki(this,t,i,e,a),t.join("")}function Fu(i,e,t){var r=i.prefix||"",n=i.namespaceURI;if(!n||r==="xml"&&n===na.XML||n===na.XMLNS)return!1;for(var s=t.length;s--;){var a=t[s];if(a.prefix===r)return a.namespace!==n}return!0}function Vs(i,e,t){i.push(" ",e,'="',t.replace(/[<>&"\t\n\r]/g,Bp),'"')}function ki(i,e,t,r,n){if(n||(n=[]),r)if(i=r(i),i){if(typeof i=="string"){e.push(i);return}}else return;switch(i.nodeType){case Xr:var s=i.attributes,a=s.length,y=i.firstChild,l=i.tagName;t=na.isHTML(i.namespaceURI)||t;var o=l;if(!t&&!i.prefix&&i.namespaceURI){for(var u,f=0;f<s.length;f++)if(s.item(f).name==="xmlns"){u=s.item(f).value;break}if(!u)for(var p=n.length-1;p>=0;p--){var d=n[p];if(d.prefix===""&&d.namespace===i.namespaceURI){u=d.namespace;break}}if(u!==i.namespaceURI)for(var p=n.length-1;p>=0;p--){var d=n[p];if(d.namespace===i.namespaceURI){d.prefix&&(o=d.prefix+":"+l);break}}}e.push("<",o);for(var c=0;c<a;c++){var h=s.item(c);h.prefix=="xmlns"?n.push({prefix:h.localName,namespace:h.value}):h.nodeName=="xmlns"&&n.push({prefix:"",namespace:h.value})}for(var c=0;c<a;c++){var h=s.item(c);if(Fu(h,t,n)){var _=h.prefix||"",m=h.namespaceURI;Vs(e,_?"xmlns:"+_:"xmlns",m),n.push({prefix:_,namespace:m})}ki(h,e,t,r,n)}if(l===o&&Fu(i,t,n)){var _=i.prefix||"",m=i.namespaceURI;Vs(e,_?"xmlns:"+_:"xmlns",m),n.push({prefix:_,namespace:m})}if(y||t&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(e.push(">"),t&&/^script$/i.test(l))for(;y;)y.data?e.push(y.data):ki(y,e,t,r,n.slice()),y=y.nextSibling;else for(;y;)ki(y,e,t,r,n.slice()),y=y.nextSibling;e.push("</",o,">")}else e.push("/>");return;case Ip:case En:for(var y=i.firstChild;y;)ki(y,e,t,r,n.slice()),y=y.nextSibling;return;case Ti:return Vs(e,i.name,i.value);case Za:return e.push(i.data.replace(/[<&>]/g,Bp));case Cp:return e.push("<![CDATA[",i.data,"]]>");case Sp:return e.push("<!--",i.data,"-->");case Pp:var F=i.publicId,T=i.systemId;if(e.push("<!DOCTYPE ",i.name),F)e.push(" PUBLIC ",F),T&&T!="."&&e.push(" ",T),e.push(">");else if(T&&T!=".")e.push(" SYSTEM ",T,">");else{var N=i.internalSubset;N&&e.push(" [",N,"]"),e.push(">")}return;case Np:return e.push("<?",i.target," ",i.data,"?>");case Tp:return e.push("&",i.nodeName,";");default:e.push("??",i.nodeName)}}function Hp(i,e,t){var r;switch(e.nodeType){case Xr:r=e.cloneNode(!1),r.ownerDocument=i;case En:break;case Ti:t=!0;break}if(r||(r=e.cloneNode(!1)),r.ownerDocument=i,r.parentNode=null,t)for(var n=e.firstChild;n;)r.appendChild(Hp(i,n,t)),n=n.nextSibling;return r}function vl(i,e,t){var r=new e.constructor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=e[n];typeof s!="object"&&s!=r[n]&&(r[n]=s)}switch(e.childNodes&&(r.childNodes=new bn),r.ownerDocument=i,r.nodeType){case Xr:var a=e.attributes,l=r.attributes=new es,o=a.length;l._ownerElement=r;for(var u=0;u<o;u++)r.setAttributeNode(vl(i,a.item(u),!0));break;case Ti:t=!0}if(t)for(var f=e.firstChild;f;)r.appendChild(vl(i,f,t)),f=f.nextSibling;return r}function xp(i,e,t){i[e]=t}try{if(Object.defineProperty){let i=function(e){switch(e.nodeType){case Xr:case En:var t=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&t.push(i(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}};Object.defineProperty(Ni.prototype,"length",{get:function(){return Ml(this),this.$$length}}),Object.defineProperty(Pt.prototype,"textContent",{get:function(){return i(this)},set:function(e){switch(this.nodeType){case Xr:case En:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),xp=function(e,t,r){e["$$"+t]=r}}}catch{}xn.DocumentType=ms;xn.DOMException=ir;xn.DOMImplementation=Op;xn.Element=oi;xn.Node=Pt;xn.NodeList=bn;xn.XMLSerializer=Vp;var gs={},Xp={};(function(i){var e=Nn.freeze;i.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),i.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),i.entityMap=i.HTML_ENTITIES})(Xp);var $l={},aa=Nn.NAMESPACE,gl=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Ou=new RegExp("[\\-\\.0-9"+gl.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Bu=new RegExp("^"+gl.source+Ou.source+"*(?::"+gl.source+Ou.source+"*)?$"),Hi=0,Fn=1,pi=2,xi=3,_i=4,mi=5,Xi=6,Ra=7;function Si(i,e){this.message=i,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,Si)}Si.prototype=new Error;Si.prototype.name=Si.name;function Gp(){}Gp.prototype={parse:function(i,e,t){var r=this.domBuilder;r.startDocument(),Qp(e,e={}),l2(i,e,t,r,this.errorHandler),r.endDocument()}};function l2(i,e,t,r,n){function s(j){if(j>65535){j-=65536;var ne=55296+(j>>10),J=56320+(j&1023);return String.fromCharCode(ne,J)}else return String.fromCharCode(j)}function a(j){var ne=j.slice(1,-1);return Object.hasOwnProperty.call(t,ne)?t[ne]:ne.charAt(0)==="#"?s(parseInt(ne.substr(1).replace("x","0x"))):(n.error("entity not found:"+j),j)}function l(j){if(j>_){var ne=i.substring(_,j).replace(/&#?\w+;/g,a);d&&o(_),r.characters(ne,0,j-_),_=j}}function o(j,ne){for(;j>=f&&(ne=p.exec(i));)u=ne.index,f=u+ne[0].length,d.lineNumber++;d.columnNumber=j-u+1}for(var u=0,f=0,p=/.*(?:\r\n?|\n)|.*$/g,d=r.locator,c=[{currentNSMap:e}],h={},_=0;;){try{var m=i.indexOf("<",_);if(m<0){if(!i.substr(_).match(/^\s*$/)){var y=r.doc,F=y.createTextNode(i.substr(_));y.appendChild(F),r.currentElement=F}return}switch(m>_&&l(m),i.charAt(m+1)){case"/":var D=i.indexOf(">",m+3),T=i.substring(m+2,D).replace(/[ \t\n\r]+$/g,""),N=c.pop();D<0?(T=i.substring(m+2).replace(/[\s<].*/,""),n.error("end tag name: "+T+" is not complete:"+N.tagName),D=m+1+T.length):T.match(/\s</)&&(T=T.replace(/[\s<].*/,""),n.error("end tag name: "+T+" maybe not complete"),D=m+1+T.length);var b=N.localNSMap,k=N.tagName==T,A=k||N.tagName&&N.tagName.toLowerCase()==T.toLowerCase();if(A){if(r.endElement(N.uri,N.localName,T),b)for(var L in b)Object.prototype.hasOwnProperty.call(b,L)&&r.endPrefixMapping(L);k||n.fatalError("end tag name: "+T+" is not match the current start tagName:"+N.tagName)}else c.push(N);D++;break;case"?":d&&o(m),D=d2(i,m,r);break;case"!":d&&o(m),D=c2(i,m,r,n);break;default:d&&o(m);var P=new $p,B=c[c.length-1].currentNSMap,D=o2(i,m,P,B,a,n),R=P.length;if(!P.closed&&f2(i,D,P.tagName,h)&&(P.closed=!0,t.nbsp||n.warning("unclosed xml attribute")),d&&R){for(var w=Lu(d,{}),S=0;S<R;S++){var X=P[S];o(X.offset),X.locator=Lu(d,{})}r.locator=w,Uu(P,r,B)&&c.push(P),r.locator=d}else Uu(P,r,B)&&c.push(P);aa.isHTML(P.uri)&&!P.closed?D=u2(i,D,P.tagName,a,r):D++}}catch(j){if(j instanceof Si)throw j;n.error("element parse error: "+j),D=-1}D>_?_=D:l(Math.max(m,_)+1)}}function Lu(i,e){return e.lineNumber=i.lineNumber,e.columnNumber=i.columnNumber,e}function o2(i,e,t,r,n,s){function a(d,c,h){t.attributeNames.hasOwnProperty(d)&&s.fatalError("Attribute "+d+" redefined"),t.addValue(d,c.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,n),h)}for(var l,o,u=++e,f=Hi;;){var p=i.charAt(u);switch(p){case"=":if(f===Fn)l=i.slice(e,u),f=xi;else if(f===pi)f=xi;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(f===xi||f===Fn)if(f===Fn&&(s.warning('attribute value must after "="'),l=i.slice(e,u)),e=u+1,u=i.indexOf(p,e),u>0)o=i.slice(e,u),a(l,o,e-1),f=mi;else throw new Error("attribute value no end '"+p+"' match");else if(f==_i)o=i.slice(e,u),a(l,o,e),s.warning('attribute "'+l+'" missed start quot('+p+")!!"),e=u+1,f=mi;else throw new Error('attribute value must after "="');break;case"/":switch(f){case Hi:t.setTagName(i.slice(e,u));case mi:case Xi:case Ra:f=Ra,t.closed=!0;case _i:case Fn:break;case pi:t.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),f==Hi&&t.setTagName(i.slice(e,u)),u;case">":switch(f){case Hi:t.setTagName(i.slice(e,u));case mi:case Xi:case Ra:break;case _i:case Fn:o=i.slice(e,u),o.slice(-1)==="/"&&(t.closed=!0,o=o.slice(0,-1));case pi:f===pi&&(o=l),f==_i?(s.warning('attribute "'+o+'" missed quot(")!'),a(l,o,e)):((!aa.isHTML(r[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+o+'" missed value!! "'+o+'" instead!!'),a(o,o,e));break;case xi:throw new Error("attribute value missed!!")}return u;case"":p=" ";default:if(p<=" ")switch(f){case Hi:t.setTagName(i.slice(e,u)),f=Xi;break;case Fn:l=i.slice(e,u),f=pi;break;case _i:var o=i.slice(e,u);s.warning('attribute "'+o+'" missed quot(")!!'),a(l,o,e);case mi:f=Xi;break}else switch(f){case pi:t.tagName,(!aa.isHTML(r[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+l+'" missed value!! "'+l+'" instead2!!'),a(l,l,e),e=u,f=Fn;break;case mi:s.warning('attribute space is required"'+l+'"!!');case Xi:f=Fn,e=u;break;case xi:f=_i,e=u;break;case Ra:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function Uu(i,e,t){for(var r=i.tagName,n=null,p=i.length;p--;){var s=i[p],a=s.qName,l=s.value,d=a.indexOf(":");if(d>0)var o=s.prefix=a.slice(0,d),u=a.slice(d+1),f=o==="xmlns"&&u;else u=a,o=null,f=a==="xmlns"&&"";s.localName=u,f!==!1&&(n==null&&(n={},Qp(t,t={})),t[f]=n[f]=l,s.uri=aa.XMLNS,e.startPrefixMapping(f,l))}for(var p=i.length;p--;){s=i[p];var o=s.prefix;o&&(o==="xml"&&(s.uri=aa.XML),o!=="xmlns"&&(s.uri=t[o||""]))}var d=r.indexOf(":");d>0?(o=i.prefix=r.slice(0,d),u=i.localName=r.slice(d+1)):(o=null,u=i.localName=r);var c=i.uri=t[o||""];if(e.startElement(c,u,r,i),i.closed){if(e.endElement(c,u,r),n)for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&e.endPrefixMapping(o)}else return i.currentNSMap=t,i.localNSMap=n,!0}function u2(i,e,t,r,n){if(/^(?:script|textarea)$/i.test(t)){var s=i.indexOf("</"+t+">",e),a=i.substring(e+1,s);if(/[&<]/.test(a))return/^script$/i.test(t)?(n.characters(a,0,a.length),s):(a=a.replace(/&#?\w+;/g,r),n.characters(a,0,a.length),s)}return e+1}function f2(i,e,t,r){var n=r[t];return n==null&&(n=i.lastIndexOf("</"+t+">"),n<e&&(n=i.lastIndexOf("</"+t)),r[t]=n),n<e}function Qp(i,e){for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}function c2(i,e,t,r){var n=i.charAt(e+2);switch(n){case"-":if(i.charAt(e+3)==="-"){var s=i.indexOf("-->",e+4);return s>e?(t.comment(i,e+4,s-e-4),s+3):(r.error("Unclosed comment"),-1)}else return-1;default:if(i.substr(e+3,6)=="CDATA["){var s=i.indexOf("]]>",e+9);return t.startCDATA(),t.characters(i,e+9,s-e-9),t.endCDATA(),s+3}var a=h2(i,e),l=a.length;if(l>1&&/!doctype/i.test(a[0][0])){var o=a[1][0],u=!1,f=!1;l>3&&(/^public$/i.test(a[2][0])?(u=a[3][0],f=l>4&&a[4][0]):/^system$/i.test(a[2][0])&&(f=a[3][0]));var p=a[l-1];return t.startDTD(o,u,f),t.endDTD(),p.index+p[0].length}}return-1}function d2(i,e,t){var r=i.indexOf("?>",e);if(r){var n=i.substring(e,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return n?(n[0].length,t.processingInstruction(n[1],n[2]),r+2):-1}return-1}function $p(){this.attributeNames={}}$p.prototype={setTagName:function(i){if(!Bu.test(i))throw new Error("invalid tagName:"+i);this.tagName=i},addValue:function(i,e,t){if(!Bu.test(i))throw new Error("invalid attribute:"+i);this.attributeNames[i]=this.length,this[this.length++]={qName:i,value:e,offset:t}},length:0,getLocalName:function(i){return this[i].localName},getLocator:function(i){return this[i].locator},getQName:function(i){return this[i].qName},getURI:function(i){return this[i].uri},getValue:function(i){return this[i].value}};function h2(i,e){var t,r=[],n=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(n.lastIndex=e,n.exec(i);t=n.exec(i);)if(r.push(t),t[1])return r}$l.XMLReader=Gp;$l.ParseError=Si;var p2=Nn,_2=xn,ju=Xp,Wp=$l,m2=_2.DOMImplementation,qu=p2.NAMESPACE,v2=Wp.ParseError,g2=Wp.XMLReader;function Yp(i){return i.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function Jp(i){this.options=i||{locator:{}}}Jp.prototype.parseFromString=function(i,e){var t=this.options,r=new g2,n=t.domBuilder||new pa,s=t.errorHandler,a=t.locator,l=t.xmlns||{},o=/\/x?html?$/.test(e),u=o?ju.HTML_ENTITIES:ju.XML_ENTITIES;a&&n.setDocumentLocator(a),r.errorHandler=b2(s,n,a),r.domBuilder=t.domBuilder||n,o&&(l[""]=qu.HTML),l.xml=l.xml||qu.XML;var f=t.normalizeLineEndings||Yp;return i&&typeof i=="string"?r.parse(f(i),l,u):r.errorHandler.error("invalid doc source"),n.doc};function b2(i,e,t){if(!i){if(e instanceof pa)return e;i=e}var r={},n=i instanceof Function;t=t||{};function s(a){var l=i[a];!l&&n&&(l=i.length==2?function(o){i(a,o)}:i),r[a]=l&&function(o){l("[xmldom "+a+"]	"+o+bl(t))}||function(){}}return s("warning"),s("error"),s("fatalError"),r}function pa(){this.cdata=!1}function vi(i,e){e.lineNumber=i.lineNumber,e.columnNumber=i.columnNumber}pa.prototype={startDocument:function(){this.doc=new m2().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(i,e,t,r){var n=this.doc,s=n.createElementNS(i,t||e),a=r.length;Fa(this,s),this.currentElement=s,this.locator&&vi(this.locator,s);for(var l=0;l<a;l++){var i=r.getURI(l),o=r.getValue(l),t=r.getQName(l),u=n.createAttributeNS(i,t);this.locator&&vi(r.getLocator(l),u),u.value=u.nodeValue=o,s.setAttributeNode(u)}},endElement:function(i,e,t){var r=this.currentElement;r.tagName,this.currentElement=r.parentNode},startPrefixMapping:function(i,e){},endPrefixMapping:function(i){},processingInstruction:function(i,e){var t=this.doc.createProcessingInstruction(i,e);this.locator&&vi(this.locator,t),Fa(this,t)},ignorableWhitespace:function(i,e,t){},characters:function(i,e,t){if(i=Mu.apply(this,arguments),i){if(this.cdata)var r=this.doc.createCDATASection(i);else var r=this.doc.createTextNode(i);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(i)&&this.doc.appendChild(r),this.locator&&vi(this.locator,r)}},skippedEntity:function(i){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(i){(this.locator=i)&&(i.lineNumber=0)},comment:function(i,e,t){i=Mu.apply(this,arguments);var r=this.doc.createComment(i);this.locator&&vi(this.locator,r),Fa(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(i,e,t){var r=this.doc.implementation;if(r&&r.createDocumentType){var n=r.createDocumentType(i,e,t);this.locator&&vi(this.locator,n),Fa(this,n),this.doc.doctype=n}},warning:function(i){console.warn("[xmldom warning]	"+i,bl(this.locator))},error:function(i){console.error("[xmldom error]	"+i,bl(this.locator))},fatalError:function(i){throw new v2(i,this.locator)}};function bl(i){if(i)return`
@`+(i.systemId||"")+"#[line:"+i.lineNumber+",col:"+i.columnNumber+"]"}function Mu(i,e,t){return typeof i=="string"?i.substr(e,t):i.length>=e+t||e?new java.lang.String(i,e,t)+"":i}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(i){pa.prototype[i]=function(){return null}});function Fa(i,e){i.currentElement?i.currentElement.appendChild(e):i.doc.appendChild(e)}gs.__DOMHandler=pa;gs.normalizeLineEndings=Yp;gs.DOMParser=Jp;var Vu=gs.DOMParser;function w2(i){return i=i.split(";")[0].trim(),new hr("http://www.w3.org/ns/iana/media-types/"+i+"#Resource")}function y2(i,e){i.callbacks={};for(var t=e.length-1;t>=0;t--)i.callbacks[e[t]]=[];i.addHook=function(r){i.callbacks[r]||(i.callbacks[r]=[])},i.addCallback=function(r,n){i.callbacks[r].push(n)},i.removeCallback=function(r,n){for(var s=0;s<i.callbacks[r].length;s++)if(i.callbacks[r][s].name===n)return i.callbacks[r].splice(s,1),!0;return!1},i.insertCallback=function(r,n){i.callbacks[r].unshift(n)},i.fireCallbacks=function(n,s){var a=[],l=[],o=i.callbacks[n].length,u,f;for(u=o-1;u>=0;u--)f=i.callbacks[n][u],f&&f.apply(i,s)&&a.push(f);for(u=a.length-1;u>=0;u--)l.push(a[u]);for(u=o;u<i.callbacks[n].length;u++)l.push(i.callbacks[n][u]);i.callbacks[n]=l}}function E2(i,e){e=e||{};var t=[];e&&e.selfClosing&&e.selfClosing.split(" ").forEach(function(n){t[n]=!0});var r=[];return e&&e.skipAttributes&&e.skipAttributes.split(" ").forEach(function(n){r[n]=!0}),Kp(i,e,t,r)}function Kp(i,e,t,r){var n,s="",a=[!1];if(typeof i.nodeType>"u")return s;if(i.nodeType===1){if(i.hasAttribute("class")&&e&&e.classWithChildText&&i.matches(e.classWithChildText.class))s+=i.querySelector(e.classWithChildText.element).textContent;else if(!(e&&e.skipNodeWithClass&&i.matches("."+e.skipNodeWithClass))){var l=i.nodeName.toLowerCase();s+="<"+l;var o=[];for(n=i.attributes.length-1;n>=0;n--){var u=i.attributes[n];if(!(r&&r.length>0&&r[u.name])&&!/^\d+$/.test(u.name)){if(u.name==="class"&&e&&e.replaceClassItemWith&&u.value.split(" ").indexOf(e.replaceClassItemWith.source)>-1){var f=new RegExp(e.replaceClassItemWith.source,"g");u.value=u.value.replace(f,e.replaceClassItemWith.target).trim()}u.name==="class"&&e&&e.skipClassWithValue&&e.skipClassWithValue===u.value||o.push(u.name+"='"+u.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;")+"'")}}if(o.length>0&&(e&&e.sortAttributes&&o.sort(function(d,c){return d.toLowerCase().localeCompare(c.toLowerCase())}),s+=" "+o.join(" ")),t&&t.ename)s+=" />";else{for(s+=">",s+=l==="html"?`
  `:"",a.push(l==="style"||l==="script"),n=0;n<i.childNodes.length;n++)s+=Kp(i.childNodes[n]);a.pop(),s+=l==="body"?"</"+l+`>
`:"</"+l+">"}}}else if(i.nodeType===8)s+="<!--"+i.nodeValue+"-->";else if(i.nodeType===3||i.nodeType===4){var p=i.nodeValue.replace(/\n+$/,"");s+=a[a.length-1]?p:p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}else console.log("Warning; Cannot handle serialising nodes of type: "+i.nodeType),console.log(i);return s}function zs(i,e,t,r){var n=function(o){return o.termType==="BlankNode"?null:o},s=function(o){var u=t.statementsMatching(o).map(function(f){return""+n(f.subject)+" "+n(f.predicate)+" "+n(f.object)}).concat(t.statementsMatching(void 0,void 0,o).map(function(f){return""+n(f.subject)+" "+n(f.predicate)+" "+n(f.object)}));return u.sort(),u.join(`
`)},a=Object.prototype.hasOwnProperty.call(t,"compareTerms")?t.compareTerms(i,e):i.compareTerm(e);return i.termType==="BlankNode"&&e.termType==="BlankNode"?a===0?0:s(i)>s(e)?1:s(i)<s(e)?-1:a:r&&i.uri&&e.uri?(r[i.uri]||i.uri).localeCompare(r[e.uri]||e.uri):a}function D2(i,e,t,r){return zs(i.subject,e.subject,t,r)||zs(i.predicate,e.predicate,t,r)||zs(i.object,e.object,t,r)}function Ai(i,e){var t;if(e=e||{},typeof module<"u"&&module&&module.exports){var r=new Vu().parseFromString(i,e.contentType||"application/xhtml+xml");return r}else typeof window<"u"&&window.DOMParser?t=new window.DOMParser:t=new Vu;return t.parseFromString(i,"application/xml")}function k2(i,e){for(var t=0;t<i.length;t++)if(i[t].subject.equals(e.subject)&&i[t].predicate.equals(e.predicate)&&i[t].object.equals(e.object)&&i[t].why.equals(e.why)){i.splice(t,1);return}throw new Error("RDFArrayRemove: Array did not contain "+e+" "+e.why)}function Zp(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xr;return{boolean:i.namedNode("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:i.namedNode("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:i.namedNode("http://www.w3.org/2001/XMLSchema#decimal"),double:i.namedNode("http://www.w3.org/2001/XMLSchema#double"),integer:i.namedNode("http://www.w3.org/2001/XMLSchema#integer"),langString:i.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:i.namedNode("http://www.w3.org/2001/XMLSchema#string")}}Zp(xr);const zu={acl:"http://www.w3.org/ns/auth/acl#",arg:"http://www.w3.org/ns/pim/arg#",as:"https://www.w3.org/ns/activitystreams#",cal:"http://www.w3.org/2002/12/cal/ical#",cert:"http://www.w3.org/ns/auth/cert#",contact:"http://www.w3.org/2000/10/swap/pim/contact#",dc:"http://purl.org/dc/elements/1.1/",dct:"http://purl.org/dc/terms/",doap:"http://usefulinc.com/ns/doap#",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",gpx:"http://www.w3.org/ns/pim/gpx#",http:"http://www.w3.org/2007/ont/http#",httph:"http://www.w3.org/2007/ont/httph#",icalTZ:"http://www.w3.org/2002/12/cal/icaltzd#",ldp:"http://www.w3.org/ns/ldp#",link:"http://www.w3.org/2007/ont/link#",log:"http://www.w3.org/2000/10/swap/log#",meeting:"http://www.w3.org/ns/pim/meeting#",mo:"http://purl.org/ontology/mo/",org:"http://www.w3.org/ns/org#",owl:"http://www.w3.org/2002/07/owl#",pad:"http://www.w3.org/ns/pim/pad#",patch:"http://www.w3.org/ns/pim/patch#",prov:"http://www.w3.org/ns/prov#",qu:"http://www.w3.org/2000/10/swap/pim/qif#",trip:"http://www.w3.org/ns/pim/trip#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rss:"http://purl.org/rss/1.0/",sched:"http://www.w3.org/ns/pim/schedule#",schema:"http://schema.org/",sioc:"http://rdfs.org/sioc/ns#",solid:"http://www.w3.org/ns/solid/terms#",space:"http://www.w3.org/ns/pim/space#",stat:"http://www.w3.org/ns/posix/stat#",tab:"http://www.w3.org/2007/ont/link#",tabont:"http://www.w3.org/2007/ont/link#",ui:"http://www.w3.org/ns/ui#",vcard:"http://www.w3.org/2006/vcard/ns#",wf:"http://www.w3.org/2005/01/wf/flow#",xsd:"http://www.w3.org/2001/XMLSchema#",cco:"http://www.ontologyrepository.com/CommonCoreOntologies/",skos:"http://www.w3.org/2004/02/skos/core#",bookmark:"http://www.w3.org/2002/01/bookmark#",vann:"http://purl.org/vocab/vann/"};function A2(i={namedNode:e=>e}){const e={};for(const t in zu){const r=zu[t];e[t]=function(n=""){return i.namedNode(r+n)}}return e}var C2=A2;const Hu=oa(C2);var e_={exports:{}};(function(i){(function(e,t){i.exports?i.exports=t():e.ttl2jsonld=t()})(us,function(){function e(n,s){function a(){this.constructor=n}a.prototype=s.prototype,n.prototype=new a}function t(n,s,a,l){this.message=n,this.expected=s,this.found=a,this.location=l,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,t)}e(t,Error),t.buildMessage=function(n,s){var a={literal:function(c){return'"'+o(c.text)+'"'},class:function(c){var h="",_;for(_=0;_<c.parts.length;_++)h+=c.parts[_]instanceof Array?u(c.parts[_][0])+"-"+u(c.parts[_][1]):u(c.parts[_]);return"["+(c.inverted?"^":"")+h+"]"},any:function(c){return"any character"},end:function(c){return"end of input"},other:function(c){return c.description}};function l(c){return c.charCodeAt(0).toString(16).toUpperCase()}function o(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+l(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+l(h)})}function u(c){return c.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+l(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+l(h)})}function f(c){return a[c.type](c)}function p(c){var h=new Array(c.length),_,m;for(_=0;_<c.length;_++)h[_]=f(c[_]);if(h.sort(),h.length>0){for(_=1,m=1;_<h.length;_++)h[_-1]!==h[_]&&(h[m]=h[_],m++);h.length=m}switch(h.length){case 1:return h[0];case 2:return h[0]+" or "+h[1];default:return h.slice(0,-1).join(", ")+", or "+h[h.length-1]}}function d(c){return c?'"'+o(c)+'"':"end of input"}return"Expected "+p(n)+" but "+d(s)+" found."};function r(n,s){s=s!==void 0?s:{};var a={},l={turtleDoc:ko},o=ko,u=function(g){var U=Tt.toJSON();return U["@graph"]=[],g.filter(H=>Array.isArray(H)).forEach(H=>{H.forEach(Y=>{U["@graph"].push(Y)})}),U["@graph"].length===1&&(Object.assign(U,U["@graph"][0]),delete U["@graph"]),U},f=".",p=vt(".",!1),d=function(g){return g},c="#",h=vt("#",!1),_=/^[^\n]/,m=Rt([`
`],!0,!1),y=`
`,F=vt(`
`,!1),T=function(g){return g.join("")},N="@prefix",b=vt("@prefix",!1),k=function(g,U){return Tt.addPrefix(g===""?"0":g,U),{}},A="@base",L=vt("@base",!1),P=function(g){return Tt.addBase(g),{}},B=/^[Bb]/,D=Rt(["B","b"],!1,!1),R=/^[Aa]/,w=Rt(["A","a"],!1,!1),S=/^[Ss]/,X=Rt(["S","s"],!1,!1),j=/^[Ee]/,ne=Rt(["E","e"],!1,!1),J=/^[Pp]/,W=Rt(["P","p"],!1,!1),x=/^[Rr]/,G=Rt(["R","r"],!1,!1),le=/^[Ff]/,Q=Rt(["F","f"],!1,!1),ae=/^[Ii]/,Ve=Rt(["I","i"],!1,!1),ze=/^[Xx]/,De=Rt(["X","x"],!1,!1),Pe=function(g,U){var H={};return typeof g=="string"&&g!=="[]"?H["@id"]=g:typeof g=="object"&&Object.assign(H,g),U&&Object.assign(H,U),[H]},ve=function(g,U){var H={};return g&&Object.assign(H,g),U&&Object.assign(H,U),[H]},he=";",Fe=vt(";",!1),lt=function(g,U,H,Y){var ee={};return ee[H]=Y,ee},He=function(g,U,H){return H},fe=function(g,U,H){var Y={};return H.unshift(sm(g,U)),H.forEach(ee=>{ee&&Object.keys(ee).forEach(_e=>{ee[_e].forEach(me=>{_e==="@type"&&me["@id"]!==void 0&&(me=me["@id"]),Y[_e]===void 0?Y[_e]=me:Array.isArray(Y[_e])?Y[_e].push(me):Y[_e]=[Y[_e],me]})})}),Y},Te=",",dt=vt(",",!1),Ot=function(g,U){return U},tr=function(g,U){return U.unshift(g),U},At="a",Qt=vt("a",!1),Kt=function(){return"@type"},pt=function(g){return Ls(g,!0)},Ct=function(g){return Ls(g,!1)},Ut=function(g){return g==="[]"?{}:{"@id":g}},Zt=function(g){return{"@id":g}},pr="[",V=vt("[",!1),I="]",O=vt("]",!1),$="(",de=vt("(",!1),Ee=")",Ae=vt(")",!1),Je=function(g){return{"@list":g}},it=function(g,U){return{"@value":g,"@language":U}},Ie="^^",Xe=vt("^^",!1),Ze=function(g,U){if(U==="http://www.w3.org/2001/XMLSchema#boolean"&&g==="true")return!0;if(U==="http://www.w3.org/2001/XMLSchema#boolean"&&g==="false")return!1;if(U==="http://www.w3.org/2001/XMLSchema#integer")return parseInt(g);if(U==="http://www.w3.org/2001/XMLSchema#double")return parseFloat(g);const H=Tt.resolve(U,!0);if(H){const Y=U.split(":")[0];if(H==="http://www.w3.org/2001/XMLSchema#boolean"&&g==="true")return Tt.decrement(Y),!0;if(H==="http://www.w3.org/2001/XMLSchema#boolean"&&g==="false")return Tt.decrement(Y),!1;if(H==="http://www.w3.org/2001/XMLSchema#integer")return Tt.decrement(Y),parseInt(g);if(H==="http://www.w3.org/2001/XMLSchema#double")return Tt.decrement(Y),parseFloat(g)}return{"@value":g,"@type":U}},ar="true",Hr=vt("true",!1),lr=function(){return!0},gr="false",Wr=vt("false",!1),In=function(){return!1},Ds=function(g){return g+":"},wa="<",ks=vt("<",!1),hi=/^[^\0- <>"{}|\^`\\]/,Ui=Rt([["\0"," "],"<",">",'"',"{","}","|","^","`","\\"],!0,!1),As=">",ya=vt(">",!1),Cs=function(g){const U=g.map(Y=>65536<=Y.codePointAt(0)&&Y.codePointAt(0)<=983039?"a":Y.length===1?Y:Y.length===6?String.fromCharCode("0x"+Y.substring(2)):Y.length===10?String.fromCodePoint("0x"+Y.substring(2)):Y).join("");if(U.match(/^[^\u0000-\u0020<>"{}|^`\\]*$/)){var H=g.join("");try{return Tt.resolve(H)}catch{Ns("Invalid IRIREF "+H)}}else Ns("Invalid IRIREF "+g.join("")+" / "+U)},Or=":",pe=vt(":",!1),ie=function(g){return g=g||"0",Tt.hasPrefix(g)===!1&&Ns("undefined prefix "+g),g},ge=function(g){return g||""},Se=function(g,U){return Tt.increment(g),Tt.resolve(g+":"+U)},Ne="_:",rt=vt("_:",!1),We=/^[0-9]/,at=Rt([["0","9"]],!1,!1),Bt="@",er=vt("@",!1),Et=/^[a-zA-Z]/,Nt=Rt([["a","z"],["A","Z"]],!1,!1),Xt="-",ct=vt("-",!1),St=/^[a-zA-Z0-9]/,Gt=Rt([["a","z"],["A","Z"],["0","9"]],!1,!1),Lt=function(g,U){return"-"+U.join("")},Yr=function(g,U){return g.join("")+U.join("")},br=/^[+\-]/,wr=Rt(["+","-"],!1,!1),Pn=function(g){return g.match(/^[0+][0-9]+$/)?{"@value":g,"@type":"http://www.w3.org/2001/XMLSchema#integer"}:parseInt(g)},pn=function(g){return{"@value":g,"@type":"http://www.w3.org/2001/XMLSchema#decimal"}},Dr=function(g){return{"@value":g,"@type":"http://www.w3.org/2001/XMLSchema#double"}},Br=/^[eE]/,_n=Rt(["e","E"],!1,!1),kr='"',Jr=vt('"',!1),ji=/^[^"\\\n\r]/,qi=Rt(['"',"\\",`
`,"\r"],!0,!1),mn="'",vn=vt("'",!1),Qn=/^[^'\\\n\r]/,Mi=Rt(["'","\\",`
`,"\r"],!0,!1),$n="'''",Rn=vt("'''",!1),Kr=/^[^'\\]/,Zr=Rt(["'","\\"],!0,!1),Ea="''",no=vt("''",!1),io=function(g,U){return"''"+U.join("")},ao=function(g,U){return"'"+U.join("")},so=function(g,U){return g.join("")+U.join("")},Da='"""',lo=vt('"""',!1),en=/^[^"\\]/,tn=Rt(['"',"\\"],!0,!1),ka='""',oo=vt('""',!1),uo=function(g,U){return'""'+U.join("")},fo=function(g,U){return'"'+U.join("")},co="\\U",O_=vt("\\U",!1),B_=function(g){return String.fromCodePoint(parseInt(g.join(""),16))},ho="\\u",L_=vt("\\u",!1),U_=function(g){return String.fromCharCode(parseInt(g.join(""),16))},po="\\t",j_=vt("\\t",!1),q_=function(){return"	"},_o="\\b",M_=vt("\\b",!1),V_=function(){return"\b"},mo="\\n",z_=vt("\\n",!1),H_=function(){return`
`},vo="\\r",x_=vt("\\r",!1),X_=function(){return"\r"},go="\\f",G_=vt("\\f",!1),Q_=function(){return"\f"},bo='\\"',$_=vt('\\"',!1),W_=function(){return'"'},wo="\\'",Y_=vt("\\'",!1),J_=function(){return"'"},yo="\\\\",K_=vt("\\\\",!1),Z_=function(){return"\\"},e0=/^[ \t\r\n]/,t0=Rt([" ","	","\r",`
`],!1,!1),r0=function(){return"[]"},n0=/^[\uD800-\uDBFF]/,i0=Rt([["\uD800","\uDBFF"]],!1,!1),a0=/^[\uDC00-\uDFFF]/,s0=Rt([["\uDC00","\uDFFF"]],!1,!1),l0=function(g,U){return g+U},o0=/^[A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,u0=Rt([["A","Z"],["a","z"],["À","Ö"],["Ø","ö"],["ø","˿"],["Ͱ","ͽ"],["Ϳ","῿"],["‌","‍"],["⁰","↏"],["Ⰰ","⿯"],["、","퟿"],["豈","﷏"],["ﷰ","�"]],!1,!1),f0="_",c0=vt("_",!1),d0="·",h0=vt("·",!1),p0=/^[\u0300-\u036F]/,_0=Rt([["̀","ͯ"]],!1,!1),m0=/^[\u203F-\u2040]/,v0=Rt([["‿","⁀"]],!1,!1),Eo=function(g,U,H,Y){return H.join("")+Y.join("")},g0=function(g,U,H){return g+U.join("")+H.join("")},b0="%",w0=vt("%",!1),y0=/^[0-9A-Fa-f]/,E0=Rt([["0","9"],["A","F"],["a","f"]],!1,!1),D0="\\",k0=vt("\\",!1),A0=/^[_~.!$&'()*+,;=\/?#@%\-]/,C0=Rt(["_","~",".","!","$","&","'","(",")","*","+",",",";","=","/","?","#","@","%","-"],!1,!1),E=0,Qe=0,Aa=[{line:1,column:1}],rn=0,Ts=[],Ca;if("startRule"in s){if(!(s.startRule in l))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');o=l[s.startRule]}function Ns(g,U){throw U=U!==void 0?U:Ss(Qe,E),N0(g,U)}function vt(g,U){return{type:"literal",text:g,ignoreCase:U}}function Rt(g,U,H){return{type:"class",parts:g,inverted:U,ignoreCase:H}}function T0(){return{type:"end"}}function Do(g){var U=Aa[g],H;if(U)return U;for(H=g-1;!Aa[H];)H--;for(U=Aa[H],U={line:U.line,column:U.column};H<g;)n.charCodeAt(H)===10?(U.line++,U.column=1):U.column++,H++;return Aa[g]=U,U}function Ss(g,U){var H=Do(g),Y=Do(U);return{start:{offset:g,line:H.line,column:H.column},end:{offset:U,line:Y.line,column:Y.column}}}function ke(g){E<rn||(E>rn&&(rn=E,Ts=[]),Ts.push(g))}function N0(g,U){return new t(g,null,null,U)}function S0(g,U,H){return new t(t.buildMessage(g,U),g,U,H)}function ko(){var g,U,H,Y;for(g=E,U=[],H=Ao();H!==a;)U.push(H),H=Ao();if(U!==a){for(H=[],Y=$e();Y!==a;)H.push(Y),Y=$e();H!==a?(Qe=g,U=u(U),g=U):(E=g,g=a)}else E=g,g=a;return g}function Ao(){var g,U,H,Y;if(g=P0(),g===a)if(g=E,U=L0(),U!==a){for(H=[],Y=$e();Y!==a;)H.push(Y),Y=$e();H!==a?(n.charCodeAt(E)===46?(Y=f,E++):(Y=a,ke(p)),Y!==a?(Qe=g,U=d(U),g=U):(E=g,g=a)):(E=g,g=a)}else E=g,g=a;return g}function I0(){var g,U,H,Y;if(g=E,n.charCodeAt(E)===35?(U=c,E++):(U=a,ke(h)),U!==a){for(H=[],_.test(n.charAt(E))?(Y=n.charAt(E),E++):(Y=a,ke(m));Y!==a;)H.push(Y),_.test(n.charAt(E))?(Y=n.charAt(E),E++):(Y=a,ke(m));H!==a?(n.charCodeAt(E)===10?(Y=y,E++):(Y=a,ke(F)),Y!==a?(Qe=g,U=T(H),g=U):(E=g,g=a)):(E=g,g=a)}else E=g,g=a;return g}function $e(){var g;return g=em(),g===a&&(g=I0()),g}function P0(){var g;return g=R0(),g===a&&(g=F0(),g===a&&(g=B0(),g===a&&(g=O0()))),g}function R0(){var g,U,H,Y,ee,_e,me,te,Ye;for(g=E,U=[],H=$e();H!==a;)U.push(H),H=$e();if(U!==a)if(n.substr(E,7)===N?(H=N,E+=7):(H=a,ke(b)),H!==a){for(Y=[],ee=$e();ee!==a;)Y.push(ee),ee=$e();if(Y!==a)if(ee=Io(),ee!==a){for(_e=[],me=$e();me!==a;)_e.push(me),me=$e();if(_e!==a)if(me=zi(),me!==a){for(te=[],Ye=$e();Ye!==a;)te.push(Ye),Ye=$e();te!==a?(n.charCodeAt(E)===46?(Ye=f,E++):(Ye=a,ke(p)),Ye!==a?(Qe=g,U=k(ee,me),g=U):(E=g,g=a)):(E=g,g=a)}else E=g,g=a;else E=g,g=a}else E=g,g=a;else E=g,g=a}else E=g,g=a;else E=g,g=a;return g}function F0(){var g,U,H,Y,ee,_e,me;for(g=E,U=[],H=$e();H!==a;)U.push(H),H=$e();if(U!==a)if(n.substr(E,5)===A?(H=A,E+=5):(H=a,ke(L)),H!==a){for(Y=[],ee=$e();ee!==a;)Y.push(ee),ee=$e();if(Y!==a)if(ee=zi(),ee!==a){for(_e=[],me=$e();me!==a;)_e.push(me),me=$e();_e!==a?(n.charCodeAt(E)===46?(me=f,E++):(me=a,ke(p)),me!==a?(Qe=g,U=P(ee),g=U):(E=g,g=a)):(E=g,g=a)}else E=g,g=a;else E=g,g=a}else E=g,g=a;else E=g,g=a;return g}function O0(){var g,U,H,Y,ee,_e,me,te;for(g=E,U=[],H=$e();H!==a;)U.push(H),H=$e();if(U!==a)if(B.test(n.charAt(E))?(H=n.charAt(E),E++):(H=a,ke(D)),H!==a)if(R.test(n.charAt(E))?(Y=n.charAt(E),E++):(Y=a,ke(w)),Y!==a)if(S.test(n.charAt(E))?(ee=n.charAt(E),E++):(ee=a,ke(X)),ee!==a)if(j.test(n.charAt(E))?(_e=n.charAt(E),E++):(_e=a,ke(ne)),_e!==a){for(me=[],te=$e();te!==a;)me.push(te),te=$e();me!==a?(te=zi(),te!==a?(Qe=g,U=P(te),g=U):(E=g,g=a)):(E=g,g=a)}else E=g,g=a;else E=g,g=a;else E=g,g=a;else E=g,g=a;else E=g,g=a;return g}function B0(){var g,U,H,Y,ee,_e,me,te,Ye,It,Yn,Jn;for(g=E,U=[],H=$e();H!==a;)U.push(H),H=$e();if(U!==a)if(J.test(n.charAt(E))?(H=n.charAt(E),E++):(H=a,ke(W)),H!==a)if(x.test(n.charAt(E))?(Y=n.charAt(E),E++):(Y=a,ke(G)),Y!==a)if(j.test(n.charAt(E))?(ee=n.charAt(E),E++):(ee=a,ke(ne)),ee!==a)if(le.test(n.charAt(E))?(_e=n.charAt(E),E++):(_e=a,ke(Q)),_e!==a)if(ae.test(n.charAt(E))?(me=n.charAt(E),E++):(me=a,ke(Ve)),me!==a)if(ze.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(De)),te!==a){for(Ye=[],It=$e();It!==a;)Ye.push(It),It=$e();if(Ye!==a)if(It=Io(),It!==a){for(Yn=[],Jn=$e();Jn!==a;)Yn.push(Jn),Jn=$e();Yn!==a?(Jn=zi(),Jn!==a?(Qe=g,U=k(It,Jn),g=U):(E=g,g=a)):(E=g,g=a)}else E=g,g=a;else E=g,g=a}else E=g,g=a;else E=g,g=a;else E=g,g=a;else E=g,g=a;else E=g,g=a;else E=g,g=a;else E=g,g=a;return g}function L0(){var g,U,H;return g=E,U=U0(),U!==a?(H=Is(),H!==a?(Qe=g,U=Pe(U,H),g=U):(E=g,g=a)):(E=g,g=a),g===a&&(g=E,U=Co(),U!==a?(H=Is(),H===a&&(H=null),H!==a?(Qe=g,U=ve(U,H),g=U):(E=g,g=a)):(E=g,g=a)),g}function Is(){var g,U,H,Y,ee,_e,me,te,Ye,It;if(g=E,U=Rs(),U!==a)if(H=Ps(),H!==a){for(Y=[],ee=E,_e=[],me=$e();me!==a;)_e.push(me),me=$e();for(_e!==a?(n.charCodeAt(E)===59?(me=he,E++):(me=a,ke(Fe)),me!==a?(te=E,Ye=Rs(),Ye!==a?(It=Ps(),It!==a?(Qe=te,Ye=lt(U,H,Ye,It),te=Ye):(E=te,te=a)):(E=te,te=a),te===a&&(te=null),te!==a?(Qe=ee,_e=He(U,H,te),ee=_e):(E=ee,ee=a)):(E=ee,ee=a)):(E=ee,ee=a);ee!==a;){for(Y.push(ee),ee=E,_e=[],me=$e();me!==a;)_e.push(me),me=$e();_e!==a?(n.charCodeAt(E)===59?(me=he,E++):(me=a,ke(Fe)),me!==a?(te=E,Ye=Rs(),Ye!==a?(It=Ps(),It!==a?(Qe=te,Ye=lt(U,H,Ye,It),te=Ye):(E=te,te=a)):(E=te,te=a),te===a&&(te=null),te!==a?(Qe=ee,_e=He(U,H,te),ee=_e):(E=ee,ee=a)):(E=ee,ee=a)):(E=ee,ee=a)}Y!==a?(Qe=g,U=fe(U,H,Y),g=U):(E=g,g=a)}else E=g,g=a;else E=g,g=a;return g}function Ps(){var g,U,H,Y,ee,_e,me;if(g=E,U=Vi(),U!==a){for(H=[],Y=E,ee=[],_e=$e();_e!==a;)ee.push(_e),_e=$e();for(ee!==a?(n.charCodeAt(E)===44?(_e=Te,E++):(_e=a,ke(dt)),_e!==a?(me=Vi(),me!==a?(Qe=Y,ee=Ot(U,me),Y=ee):(E=Y,Y=a)):(E=Y,Y=a)):(E=Y,Y=a);Y!==a;){for(H.push(Y),Y=E,ee=[],_e=$e();_e!==a;)ee.push(_e),_e=$e();ee!==a?(n.charCodeAt(E)===44?(_e=Te,E++):(_e=a,ke(dt)),_e!==a?(me=Vi(),me!==a?(Qe=Y,ee=Ot(U,me),Y=ee):(E=Y,Y=a)):(E=Y,Y=a)):(E=Y,Y=a)}H!==a?(Qe=g,U=tr(U,H),g=U):(E=g,g=a)}else E=g,g=a;return g}function Rs(){var g,U,H;if(g=E,U=j0(),U!==a&&(Qe=g,U=d(U)),g=U,g===a){for(g=E,U=[],H=$e();H!==a;)U.push(H),H=$e();U!==a?(n.charCodeAt(E)===97?(H=At,E++):(H=a,ke(Qt)),H!==a?(Qe=g,U=Kt(),g=U):(E=g,g=a)):(E=g,g=a)}return g}function U0(){var g,U;return g=E,U=To(),U!==a&&(Qe=g,U=pt(U)),g=U,g===a&&(g=No(),g===a&&(g=Ta())),g}function j0(){var g,U,H;for(g=E,U=[],H=$e();H!==a;)U.push(H),H=$e();return U!==a?(H=Ta(),H!==a?(Qe=g,U=d(H),g=U):(E=g,g=a)):(E=g,g=a),g}function Vi(){var g,U;return g=q0(),g===a&&(g=E,U=To(),U!==a&&(Qe=g,U=Ct(U)),g=U,g===a&&(g=E,U=No(),U!==a&&(Qe=g,U=Ut(U)),g=U,g===a&&(g=E,U=Co(),U!==a&&(Qe=g,U=d(U)),g=U,g===a&&(g=E,U=Ta(),U!==a&&(Qe=g,U=Zt(U)),g=U)))),g}function q0(){var g;return g=V0(),g===a&&(g=M0(),g===a&&(g=z0())),g}function Co(){var g,U,H,Y,ee,_e;for(g=E,U=[],H=$e();H!==a;)U.push(H),H=$e();if(U!==a)if(n.charCodeAt(E)===91?(H=pr,E++):(H=a,ke(V)),H!==a)if(Y=Is(),Y!==a){for(ee=[],_e=$e();_e!==a;)ee.push(_e),_e=$e();ee!==a?(n.charCodeAt(E)===93?(_e=I,E++):(_e=a,ke(O)),_e!==a?(Qe=g,U=d(Y),g=U):(E=g,g=a)):(E=g,g=a)}else E=g,g=a;else E=g,g=a;else E=g,g=a;return g}function To(){var g,U,H,Y,ee,_e;for(g=E,U=[],H=$e();H!==a;)U.push(H),H=$e();if(U!==a)if(n.charCodeAt(E)===40?(H=$,E++):(H=a,ke(de)),H!==a){for(Y=[],ee=Vi();ee!==a;)Y.push(ee),ee=Vi();if(Y!==a){for(ee=[],_e=$e();_e!==a;)ee.push(_e),_e=$e();ee!==a?(n.charCodeAt(E)===41?(_e=Ee,E++):(_e=a,ke(Ae)),_e!==a?(Qe=g,U=Je(Y),g=U):(E=g,g=a)):(E=g,g=a)}else E=g,g=a}else E=g,g=a;else E=g,g=a;return g}function M0(){var g,U,H;for(g=E,U=[],H=$e();H!==a;)U.push(H),H=$e();return U!==a?(H=W0(),H===a&&(H=$0(),H===a&&(H=Q0())),H!==a?(Qe=g,U=d(H),g=U):(E=g,g=a)):(E=g,g=a),g}function V0(){var g,U,H,Y,ee,_e,me;for(g=E,U=[],H=$e();H!==a;)U.push(H),H=$e();if(U!==a)if(H=Fs(),H!==a){for(Y=[],ee=$e();ee!==a;)Y.push(ee),ee=$e();Y!==a?(ee=G0(),ee!==a?(Qe=g,U=it(H,ee),g=U):(E=g,g=a)):(E=g,g=a)}else E=g,g=a;else E=g,g=a;if(g===a){for(g=E,U=[],H=$e();H!==a;)U.push(H),H=$e();if(U!==a)if(H=Fs(),H!==a){for(Y=[],ee=$e();ee!==a;)Y.push(ee),ee=$e();if(Y!==a)if(n.substr(E,2)===Ie?(ee=Ie,E+=2):(ee=a,ke(Xe)),ee!==a){for(_e=[],me=$e();me!==a;)_e.push(me),me=$e();_e!==a?(me=Ta(),me!==a?(Qe=g,U=Ze(H,me),g=U):(E=g,g=a)):(E=g,g=a)}else E=g,g=a;else E=g,g=a}else E=g,g=a;else E=g,g=a;if(g===a){for(g=E,U=[],H=$e();H!==a;)U.push(H),H=$e();U!==a?(H=Fs(),H!==a?(Qe=g,U=d(H),g=U):(E=g,g=a)):(E=g,g=a)}}return g}function z0(){var g,U,H;for(g=E,U=[],H=$e();H!==a;)U.push(H),H=$e();if(U!==a?(n.substr(E,4)===ar?(H=ar,E+=4):(H=a,ke(Hr)),H!==a?(Qe=g,U=lr(),g=U):(E=g,g=a)):(E=g,g=a),g===a){for(g=E,U=[],H=$e();H!==a;)U.push(H),H=$e();U!==a?(n.substr(E,5)===gr?(H=gr,E+=5):(H=a,ke(Wr)),H!==a?(Qe=g,U=In(),g=U):(E=g,g=a)):(E=g,g=a)}return g}function Fs(){var g,U,H;for(g=E,U=[],H=$e();H!==a;)U.push(H),H=$e();return U!==a?(H=K0(),H===a&&(H=Z0(),H===a&&(H=J0(),H===a&&(H=Y0()))),H!==a?(Qe=g,U=d(H),g=U):(E=g,g=a)):(E=g,g=a),g}function Ta(){var g,U,H;for(g=E,U=[],H=$e();H!==a;)U.push(H),H=$e();if(U!==a?(H=zi(),H!==a?(Qe=g,U=d(H),g=U):(E=g,g=a)):(E=g,g=a),g===a){for(g=E,U=[],H=$e();H!==a;)U.push(H),H=$e();U!==a?(H=H0(),H!==a?(Qe=g,U=d(H),g=U):(E=g,g=a)):(E=g,g=a)}return g}function H0(){var g,U;return g=x0(),g===a&&(g=E,U=So(),U!==a&&(Qe=g,U=Ds(U)),g=U),g}function No(){var g,U,H;for(g=E,U=[],H=$e();H!==a;)U.push(H),H=$e();if(U!==a?(H=X0(),H!==a?(Qe=g,U=d(H),g=U):(E=g,g=a)):(E=g,g=a),g===a){for(g=E,U=[],H=$e();H!==a;)U.push(H),H=$e();U!==a?(H=tm(),H!==a?(Qe=g,U=d(H),g=U):(E=g,g=a)):(E=g,g=a)}return g}function zi(){var g,U,H,Y;if(g=E,n.charCodeAt(E)===60?(U=wa,E++):(U=a,ke(ks)),U!==a){for(H=[],hi.test(n.charAt(E))?(Y=n.charAt(E),E++):(Y=a,ke(Ui)),Y===a&&(Y=jt());Y!==a;)H.push(Y),hi.test(n.charAt(E))?(Y=n.charAt(E),E++):(Y=a,ke(Ui)),Y===a&&(Y=jt());H!==a?(n.charCodeAt(E)===62?(Y=As,E++):(Y=a,ke(ya)),Y!==a?(Qe=g,U=Cs(H),g=U):(E=g,g=a)):(E=g,g=a)}else E=g,g=a;return g}function So(){var g,U,H;return g=E,U=Ro(),U===a&&(U=null),U!==a?(n.charCodeAt(E)===58?(H=Or,E++):(H=a,ke(pe)),H!==a?(Qe=g,U=ie(U),g=U):(E=g,g=a)):(E=g,g=a),g}function Io(){var g,U,H;return g=E,U=Ro(),U===a&&(U=null),U!==a?(n.charCodeAt(E)===58?(H=Or,E++):(H=a,ke(pe)),H!==a?(Qe=g,U=ge(U),g=U):(E=g,g=a)):(E=g,g=a),g}function x0(){var g,U,H;return g=E,U=So(),U!==a?(H=rm(),H!==a?(Qe=g,U=Se(U,H),g=U):(E=g,g=a)):(E=g,g=a),g}function X0(){var g,U,H,Y,ee,_e,me,te,Ye,It;if(g=E,U=E,n.substr(E,2)===Ne?(H=Ne,E+=2):(H=a,ke(rt)),H!==a)if(Y=Bs(),Y===a&&(We.test(n.charAt(E))?(Y=n.charAt(E),E++):(Y=a,ke(at))),Y!==a){for(ee=[],_e=or();_e!==a;)ee.push(_e),_e=or();if(ee!==a){if(_e=[],me=E,te=[],n.charCodeAt(E)===46?(Ye=f,E++):(Ye=a,ke(p)),Ye!==a)for(;Ye!==a;)te.push(Ye),n.charCodeAt(E)===46?(Ye=f,E++):(Ye=a,ke(p));else te=a;if(te!==a){if(Ye=[],It=or(),It!==a)for(;It!==a;)Ye.push(It),It=or();else Ye=a;Ye!==a?(te=[te,Ye],me=te):(E=me,me=a)}else E=me,me=a;for(;me!==a;){if(_e.push(me),me=E,te=[],n.charCodeAt(E)===46?(Ye=f,E++):(Ye=a,ke(p)),Ye!==a)for(;Ye!==a;)te.push(Ye),n.charCodeAt(E)===46?(Ye=f,E++):(Ye=a,ke(p));else te=a;if(te!==a){if(Ye=[],It=or(),It!==a)for(;It!==a;)Ye.push(It),It=or();else Ye=a;Ye!==a?(te=[te,Ye],me=te):(E=me,me=a)}else E=me,me=a}_e!==a?(H=[H,Y,ee,_e],U=H):(E=U,U=a)}else E=U,U=a}else E=U,U=a;else E=U,U=a;return U!==a?g=n.substring(g,E):g=U,g}function G0(){var g,U,H,Y,ee,_e,me,te;if(g=E,n.charCodeAt(E)===64?(U=Bt,E++):(U=a,ke(er)),U!==a){if(H=[],Et.test(n.charAt(E))?(Y=n.charAt(E),E++):(Y=a,ke(Nt)),Y!==a)for(;Y!==a;)H.push(Y),Et.test(n.charAt(E))?(Y=n.charAt(E),E++):(Y=a,ke(Nt));else H=a;if(H!==a){if(Y=[],ee=E,n.charCodeAt(E)===45?(_e=Xt,E++):(_e=a,ke(ct)),_e!==a){if(me=[],St.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(Gt)),te!==a)for(;te!==a;)me.push(te),St.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(Gt));else me=a;me!==a?(Qe=ee,_e=Lt(H,me),ee=_e):(E=ee,ee=a)}else E=ee,ee=a;for(;ee!==a;)if(Y.push(ee),ee=E,n.charCodeAt(E)===45?(_e=Xt,E++):(_e=a,ke(ct)),_e!==a){if(me=[],St.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(Gt)),te!==a)for(;te!==a;)me.push(te),St.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(Gt));else me=a;me!==a?(Qe=ee,_e=Lt(H,me),ee=_e):(E=ee,ee=a)}else E=ee,ee=a;Y!==a?(Qe=g,U=Yr(H,Y),g=U):(E=g,g=a)}else E=g,g=a}else E=g,g=a;return g}function Q0(){var g,U,H,Y,ee,_e;if(g=E,U=E,H=E,br.test(n.charAt(E))?(Y=n.charAt(E),E++):(Y=a,ke(wr)),Y===a&&(Y=null),Y!==a){if(ee=[],We.test(n.charAt(E))?(_e=n.charAt(E),E++):(_e=a,ke(at)),_e!==a)for(;_e!==a;)ee.push(_e),We.test(n.charAt(E))?(_e=n.charAt(E),E++):(_e=a,ke(at));else ee=a;ee!==a?(Y=[Y,ee],H=Y):(E=H,H=a)}else E=H,H=a;return H!==a?U=n.substring(U,E):U=H,U!==a&&(Qe=g,U=Pn(U)),g=U,g}function $0(){var g,U,H,Y,ee,_e,me,te;if(g=E,U=E,H=E,br.test(n.charAt(E))?(Y=n.charAt(E),E++):(Y=a,ke(wr)),Y===a&&(Y=null),Y!==a){for(ee=[],We.test(n.charAt(E))?(_e=n.charAt(E),E++):(_e=a,ke(at));_e!==a;)ee.push(_e),We.test(n.charAt(E))?(_e=n.charAt(E),E++):(_e=a,ke(at));if(ee!==a)if(n.charCodeAt(E)===46?(_e=f,E++):(_e=a,ke(p)),_e!==a){if(me=[],We.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(at)),te!==a)for(;te!==a;)me.push(te),We.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(at));else me=a;me!==a?(Y=[Y,ee,_e,me],H=Y):(E=H,H=a)}else E=H,H=a;else E=H,H=a}else E=H,H=a;return H!==a?U=n.substring(U,E):U=H,U!==a&&(Qe=g,U=pn(U)),g=U,g}function W0(){var g,U,H,Y,ee,_e,me,te,Ye;if(g=E,U=E,H=E,br.test(n.charAt(E))?(Y=n.charAt(E),E++):(Y=a,ke(wr)),Y===a&&(Y=null),Y!==a){if(ee=E,_e=[],We.test(n.charAt(E))?(me=n.charAt(E),E++):(me=a,ke(at)),me!==a)for(;me!==a;)_e.push(me),We.test(n.charAt(E))?(me=n.charAt(E),E++):(me=a,ke(at));else _e=a;if(_e!==a)if(n.charCodeAt(E)===46?(me=f,E++):(me=a,ke(p)),me!==a){for(te=[],We.test(n.charAt(E))?(Ye=n.charAt(E),E++):(Ye=a,ke(at));Ye!==a;)te.push(Ye),We.test(n.charAt(E))?(Ye=n.charAt(E),E++):(Ye=a,ke(at));te!==a?(Ye=Os(),Ye!==a?(_e=[_e,me,te,Ye],ee=_e):(E=ee,ee=a)):(E=ee,ee=a)}else E=ee,ee=a;else E=ee,ee=a;if(ee===a){if(ee=E,n.charCodeAt(E)===46?(_e=f,E++):(_e=a,ke(p)),_e!==a){if(me=[],We.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(at)),te!==a)for(;te!==a;)me.push(te),We.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(at));else me=a;me!==a?(te=Os(),te!==a?(_e=[_e,me,te],ee=_e):(E=ee,ee=a)):(E=ee,ee=a)}else E=ee,ee=a;if(ee===a){if(ee=E,_e=[],We.test(n.charAt(E))?(me=n.charAt(E),E++):(me=a,ke(at)),me!==a)for(;me!==a;)_e.push(me),We.test(n.charAt(E))?(me=n.charAt(E),E++):(me=a,ke(at));else _e=a;_e!==a?(me=Os(),me!==a?(_e=[_e,me],ee=_e):(E=ee,ee=a)):(E=ee,ee=a)}}ee!==a?(Y=[Y,ee],H=Y):(E=H,H=a)}else E=H,H=a;return H!==a?U=n.substring(U,E):U=H,U!==a&&(Qe=g,U=Dr(U)),g=U,g}function Os(){var g,U,H,Y,ee,_e;if(g=E,U=E,Br.test(n.charAt(E))?(H=n.charAt(E),E++):(H=a,ke(_n)),H!==a)if(br.test(n.charAt(E))?(Y=n.charAt(E),E++):(Y=a,ke(wr)),Y===a&&(Y=null),Y!==a){if(ee=[],We.test(n.charAt(E))?(_e=n.charAt(E),E++):(_e=a,ke(at)),_e!==a)for(;_e!==a;)ee.push(_e),We.test(n.charAt(E))?(_e=n.charAt(E),E++):(_e=a,ke(at));else ee=a;ee!==a?(H=[H,Y,ee],U=H):(E=U,U=a)}else E=U,U=a;else E=U,U=a;return U!==a?g=n.substring(g,E):g=U,g}function Y0(){var g,U,H,Y;if(g=E,n.charCodeAt(E)===34?(U=kr,E++):(U=a,ke(Jr)),U!==a){for(H=[],ji.test(n.charAt(E))?(Y=n.charAt(E),E++):(Y=a,ke(qi)),Y===a&&(Y=$t(),Y===a&&(Y=jt()));Y!==a;)H.push(Y),ji.test(n.charAt(E))?(Y=n.charAt(E),E++):(Y=a,ke(qi)),Y===a&&(Y=$t(),Y===a&&(Y=jt()));H!==a?(n.charCodeAt(E)===34?(Y=kr,E++):(Y=a,ke(Jr)),Y!==a?(Qe=g,U=T(H),g=U):(E=g,g=a)):(E=g,g=a)}else E=g,g=a;return g}function J0(){var g,U,H,Y;if(g=E,n.charCodeAt(E)===39?(U=mn,E++):(U=a,ke(vn)),U!==a){for(H=[],Qn.test(n.charAt(E))?(Y=n.charAt(E),E++):(Y=a,ke(Mi)),Y===a&&(Y=$t(),Y===a&&(Y=jt()));Y!==a;)H.push(Y),Qn.test(n.charAt(E))?(Y=n.charAt(E),E++):(Y=a,ke(Mi)),Y===a&&(Y=$t(),Y===a&&(Y=jt()));H!==a?(n.charCodeAt(E)===39?(Y=mn,E++):(Y=a,ke(vn)),Y!==a?(Qe=g,U=T(H),g=U):(E=g,g=a)):(E=g,g=a)}else E=g,g=a;return g}function K0(){var g,U,H,Y,ee,_e,me,te;if(g=E,n.substr(E,3)===$n?(U=$n,E+=3):(U=a,ke(Rn)),U!==a){for(H=[],Kr.test(n.charAt(E))?(Y=n.charAt(E),E++):(Y=a,ke(Zr)),Y===a&&(Y=$t(),Y===a&&(Y=jt()));Y!==a;)H.push(Y),Kr.test(n.charAt(E))?(Y=n.charAt(E),E++):(Y=a,ke(Zr)),Y===a&&(Y=$t(),Y===a&&(Y=jt()));if(H!==a){if(Y=[],ee=E,n.substr(E,2)===Ea?(_e=Ea,E+=2):(_e=a,ke(no)),_e!==a){if(me=[],Kr.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(Zr)),te===a&&(te=$t(),te===a&&(te=jt())),te!==a)for(;te!==a;)me.push(te),Kr.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(Zr)),te===a&&(te=$t(),te===a&&(te=jt()));else me=a;me!==a?(Qe=ee,_e=io(H,me),ee=_e):(E=ee,ee=a)}else E=ee,ee=a;if(ee===a)if(ee=E,n.charCodeAt(E)===39?(_e=mn,E++):(_e=a,ke(vn)),_e!==a){if(me=[],Kr.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(Zr)),te===a&&(te=$t(),te===a&&(te=jt())),te!==a)for(;te!==a;)me.push(te),Kr.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(Zr)),te===a&&(te=$t(),te===a&&(te=jt()));else me=a;me!==a?(Qe=ee,_e=ao(H,me),ee=_e):(E=ee,ee=a)}else E=ee,ee=a;for(;ee!==a;){if(Y.push(ee),ee=E,n.substr(E,2)===Ea?(_e=Ea,E+=2):(_e=a,ke(no)),_e!==a){if(me=[],Kr.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(Zr)),te===a&&(te=$t(),te===a&&(te=jt())),te!==a)for(;te!==a;)me.push(te),Kr.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(Zr)),te===a&&(te=$t(),te===a&&(te=jt()));else me=a;me!==a?(Qe=ee,_e=io(H,me),ee=_e):(E=ee,ee=a)}else E=ee,ee=a;if(ee===a)if(ee=E,n.charCodeAt(E)===39?(_e=mn,E++):(_e=a,ke(vn)),_e!==a){if(me=[],Kr.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(Zr)),te===a&&(te=$t(),te===a&&(te=jt())),te!==a)for(;te!==a;)me.push(te),Kr.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(Zr)),te===a&&(te=$t(),te===a&&(te=jt()));else me=a;me!==a?(Qe=ee,_e=ao(H,me),ee=_e):(E=ee,ee=a)}else E=ee,ee=a}Y!==a?(n.substr(E,3)===$n?(ee=$n,E+=3):(ee=a,ke(Rn)),ee!==a?(Qe=g,U=so(H,Y),g=U):(E=g,g=a)):(E=g,g=a)}else E=g,g=a}else E=g,g=a;return g}function Z0(){var g,U,H,Y,ee,_e,me,te;if(g=E,n.substr(E,3)===Da?(U=Da,E+=3):(U=a,ke(lo)),U!==a){for(H=[],en.test(n.charAt(E))?(Y=n.charAt(E),E++):(Y=a,ke(tn)),Y===a&&(Y=$t(),Y===a&&(Y=jt()));Y!==a;)H.push(Y),en.test(n.charAt(E))?(Y=n.charAt(E),E++):(Y=a,ke(tn)),Y===a&&(Y=$t(),Y===a&&(Y=jt()));if(H!==a){if(Y=[],ee=E,n.substr(E,2)===ka?(_e=ka,E+=2):(_e=a,ke(oo)),_e!==a){if(me=[],en.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(tn)),te===a&&(te=$t(),te===a&&(te=jt())),te!==a)for(;te!==a;)me.push(te),en.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(tn)),te===a&&(te=$t(),te===a&&(te=jt()));else me=a;me!==a?(Qe=ee,_e=uo(H,me),ee=_e):(E=ee,ee=a)}else E=ee,ee=a;if(ee===a)if(ee=E,n.charCodeAt(E)===34?(_e=kr,E++):(_e=a,ke(Jr)),_e!==a){if(me=[],en.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(tn)),te===a&&(te=$t(),te===a&&(te=jt())),te!==a)for(;te!==a;)me.push(te),en.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(tn)),te===a&&(te=$t(),te===a&&(te=jt()));else me=a;me!==a?(Qe=ee,_e=fo(H,me),ee=_e):(E=ee,ee=a)}else E=ee,ee=a;for(;ee!==a;){if(Y.push(ee),ee=E,n.substr(E,2)===ka?(_e=ka,E+=2):(_e=a,ke(oo)),_e!==a){if(me=[],en.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(tn)),te===a&&(te=$t(),te===a&&(te=jt())),te!==a)for(;te!==a;)me.push(te),en.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(tn)),te===a&&(te=$t(),te===a&&(te=jt()));else me=a;me!==a?(Qe=ee,_e=uo(H,me),ee=_e):(E=ee,ee=a)}else E=ee,ee=a;if(ee===a)if(ee=E,n.charCodeAt(E)===34?(_e=kr,E++):(_e=a,ke(Jr)),_e!==a){if(me=[],en.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(tn)),te===a&&(te=$t(),te===a&&(te=jt())),te!==a)for(;te!==a;)me.push(te),en.test(n.charAt(E))?(te=n.charAt(E),E++):(te=a,ke(tn)),te===a&&(te=$t(),te===a&&(te=jt()));else me=a;me!==a?(Qe=ee,_e=fo(H,me),ee=_e):(E=ee,ee=a)}else E=ee,ee=a}Y!==a?(n.substr(E,3)===Da?(ee=Da,E+=3):(ee=a,ke(lo)),ee!==a?(Qe=g,U=so(H,Y),g=U):(E=g,g=a)):(E=g,g=a)}else E=g,g=a}else E=g,g=a;return g}function jt(){var g,U,H,Y,ee,_e,me,te,Ye,It,Yn;return g=E,n.substr(E,2)===co?(U=co,E+=2):(U=a,ke(O_)),U!==a?(H=E,Y=Ar(),Y!==a?(ee=Ar(),ee!==a?(_e=Ar(),_e!==a?(me=Ar(),me!==a?(te=Ar(),te!==a?(Ye=Ar(),Ye!==a?(It=Ar(),It!==a?(Yn=Ar(),Yn!==a?(Y=[Y,ee,_e,me,te,Ye,It,Yn],H=Y):(E=H,H=a)):(E=H,H=a)):(E=H,H=a)):(E=H,H=a)):(E=H,H=a)):(E=H,H=a)):(E=H,H=a)):(E=H,H=a),H!==a?(Qe=g,U=B_(H),g=U):(E=g,g=a)):(E=g,g=a),g===a&&(g=E,n.substr(E,2)===ho?(U=ho,E+=2):(U=a,ke(L_)),U!==a?(H=E,Y=Ar(),Y!==a?(ee=Ar(),ee!==a?(_e=Ar(),_e!==a?(me=Ar(),me!==a?(Y=[Y,ee,_e,me],H=Y):(E=H,H=a)):(E=H,H=a)):(E=H,H=a)):(E=H,H=a),H!==a?(Qe=g,U=U_(H),g=U):(E=g,g=a)):(E=g,g=a)),g}function $t(){var g,U;return g=E,n.substr(E,2)===po?(U=po,E+=2):(U=a,ke(j_)),U!==a&&(Qe=g,U=q_()),g=U,g===a&&(g=E,n.substr(E,2)===_o?(U=_o,E+=2):(U=a,ke(M_)),U!==a&&(Qe=g,U=V_()),g=U,g===a&&(g=E,n.substr(E,2)===mo?(U=mo,E+=2):(U=a,ke(z_)),U!==a&&(Qe=g,U=H_()),g=U,g===a&&(g=E,n.substr(E,2)===vo?(U=vo,E+=2):(U=a,ke(x_)),U!==a&&(Qe=g,U=X_()),g=U,g===a&&(g=E,n.substr(E,2)===go?(U=go,E+=2):(U=a,ke(G_)),U!==a&&(Qe=g,U=Q_()),g=U,g===a&&(g=E,n.substr(E,2)===bo?(U=bo,E+=2):(U=a,ke($_)),U!==a&&(Qe=g,U=W_()),g=U,g===a&&(g=E,n.substr(E,2)===wo?(U=wo,E+=2):(U=a,ke(Y_)),U!==a&&(Qe=g,U=J_()),g=U,g===a&&(g=E,n.substr(E,2)===yo?(U=yo,E+=2):(U=a,ke(K_)),U!==a&&(Qe=g,U=Z_()),g=U))))))),g}function em(){var g;return e0.test(n.charAt(E))?(g=n.charAt(E),E++):(g=a,ke(t0)),g}function tm(){var g,U,H,Y;if(g=E,n.charCodeAt(E)===91?(U=pr,E++):(U=a,ke(V)),U!==a){for(H=[],Y=$e();Y!==a;)H.push(Y),Y=$e();H!==a?(n.charCodeAt(E)===93?(Y=I,E++):(Y=a,ke(O)),Y!==a?(Qe=g,U=r0(),g=U):(E=g,g=a)):(E=g,g=a)}else E=g,g=a;return g}function Po(){var g,U,H;return g=E,n0.test(n.charAt(E))?(U=n.charAt(E),E++):(U=a,ke(i0)),U!==a?(a0.test(n.charAt(E))?(H=n.charAt(E),E++):(H=a,ke(s0)),H!==a?(Qe=g,U=l0(U,H),g=U):(E=g,g=a)):(E=g,g=a),g===a&&(o0.test(n.charAt(E))?(g=n.charAt(E),E++):(g=a,ke(u0))),g}function Bs(){var g;return g=Po(),g===a&&(n.charCodeAt(E)===95?(g=f0,E++):(g=a,ke(c0))),g}function or(){var g;return g=Bs(),g===a&&(n.charCodeAt(E)===45?(g=Xt,E++):(g=a,ke(ct)),g===a&&(We.test(n.charAt(E))?(g=n.charAt(E),E++):(g=a,ke(at)),g===a&&(n.charCodeAt(E)===183?(g=d0,E++):(g=a,ke(h0)),g===a&&(p0.test(n.charAt(E))?(g=n.charAt(E),E++):(g=a,ke(_0)),g===a&&(m0.test(n.charAt(E))?(g=n.charAt(E),E++):(g=a,ke(v0))))))),g}function Ro(){var g,U,H,Y,ee,_e,me,te,Ye;if(g=E,U=E,H=Po(),H!==a){for(Y=[],ee=or();ee!==a;)Y.push(ee),ee=or();if(Y!==a){if(ee=[],_e=E,me=[],n.charCodeAt(E)===46?(te=f,E++):(te=a,ke(p)),te!==a)for(;te!==a;)me.push(te),n.charCodeAt(E)===46?(te=f,E++):(te=a,ke(p));else me=a;if(me!==a){if(te=[],Ye=or(),Ye!==a)for(;Ye!==a;)te.push(Ye),Ye=or();else te=a;te!==a?(me=[me,te],_e=me):(E=_e,_e=a)}else E=_e,_e=a;for(;_e!==a;){if(ee.push(_e),_e=E,me=[],n.charCodeAt(E)===46?(te=f,E++):(te=a,ke(p)),te!==a)for(;te!==a;)me.push(te),n.charCodeAt(E)===46?(te=f,E++):(te=a,ke(p));else me=a;if(me!==a){if(te=[],Ye=or(),Ye!==a)for(;Ye!==a;)te.push(Ye),Ye=or();else te=a;te!==a?(me=[me,te],_e=me):(E=_e,_e=a)}else E=_e,_e=a}ee!==a?(H=[H,Y,ee],U=H):(E=U,U=a)}else E=U,U=a}else E=U,U=a;return U!==a?g=n.substring(g,E):g=U,g}function rm(){var g,U,H,Y,ee,_e,me,te;if(g=E,U=Bs(),U===a&&(n.charCodeAt(E)===58?(U=Or,E++):(U=a,ke(pe)),U===a&&(We.test(n.charAt(E))?(U=n.charAt(E),E++):(U=a,ke(at)),U===a&&(U=Wn()))),U!==a){for(H=[],Y=or(),Y===a&&(n.charCodeAt(E)===58?(Y=Or,E++):(Y=a,ke(pe)),Y===a&&(Y=Wn()));Y!==a;)H.push(Y),Y=or(),Y===a&&(n.charCodeAt(E)===58?(Y=Or,E++):(Y=a,ke(pe)),Y===a&&(Y=Wn()));if(H!==a){if(Y=[],ee=E,_e=[],n.charCodeAt(E)===46?(me=f,E++):(me=a,ke(p)),me!==a)for(;me!==a;)_e.push(me),n.charCodeAt(E)===46?(me=f,E++):(me=a,ke(p));else _e=a;if(_e!==a){if(me=[],te=or(),te===a&&(n.charCodeAt(E)===58?(te=Or,E++):(te=a,ke(pe)),te===a&&(te=Wn())),te!==a)for(;te!==a;)me.push(te),te=or(),te===a&&(n.charCodeAt(E)===58?(te=Or,E++):(te=a,ke(pe)),te===a&&(te=Wn()));else me=a;me!==a?(Qe=ee,_e=Eo(U,H,_e,me),ee=_e):(E=ee,ee=a)}else E=ee,ee=a;for(;ee!==a;){if(Y.push(ee),ee=E,_e=[],n.charCodeAt(E)===46?(me=f,E++):(me=a,ke(p)),me!==a)for(;me!==a;)_e.push(me),n.charCodeAt(E)===46?(me=f,E++):(me=a,ke(p));else _e=a;if(_e!==a){if(me=[],te=or(),te===a&&(n.charCodeAt(E)===58?(te=Or,E++):(te=a,ke(pe)),te===a&&(te=Wn())),te!==a)for(;te!==a;)me.push(te),te=or(),te===a&&(n.charCodeAt(E)===58?(te=Or,E++):(te=a,ke(pe)),te===a&&(te=Wn()));else me=a;me!==a?(Qe=ee,_e=Eo(U,H,_e,me),ee=_e):(E=ee,ee=a)}else E=ee,ee=a}Y!==a?(Qe=g,U=g0(U,H,Y),g=U):(E=g,g=a)}else E=g,g=a}else E=g,g=a;return g}function Wn(){var g;return g=nm(),g===a&&(g=im()),g}function nm(){var g,U,H,Y,ee;return g=E,U=E,n.charCodeAt(E)===37?(H=b0,E++):(H=a,ke(w0)),H!==a?(Y=Ar(),Y!==a?(ee=Ar(),ee!==a?(H=[H,Y,ee],U=H):(E=U,U=a)):(E=U,U=a)):(E=U,U=a),U!==a?g=n.substring(g,E):g=U,g}function Ar(){var g;return y0.test(n.charAt(E))?(g=n.charAt(E),E++):(g=a,ke(E0)),g}function im(){var g,U,H;return g=E,n.charCodeAt(E)===92?(U=D0,E++):(U=a,ke(k0)),U!==a?(A0.test(n.charAt(E))?(H=n.charAt(E),E++):(H=a,ke(C0)),H!==a?(Qe=g,U=d(H),g=U):(E=g,g=a)):(E=g,g=a),g}var am=new Function("try {return this===window;}catch(e){ return false;}"),Fo=am()?window.URL:Pm.URL,Oo=function(g){return g.match(/^[a-z](.*?):(.+?)/g)};function sm(g,U){var H={};return H[g]=U,H}var Tt={base:[],data:{},addBase:function(g){if(Tt.base.length===0){Tt.base.push(g);return}const U=Tt.base[Tt.base.length-1];U!==g&&Tt.base.push(new Fo(g,U).toString())},addPrefix:function(g,U){const H=Tt.data[g];H===void 0?Tt.data[g]=[{uri:U,count:0}]:H[H.length-1].uri!==U&&H.push({uri:U,count:0})},hasPrefix:function(g){return this.data[g]!==void 0},resolve:function(g,U){const H=Object.keys(Tt.data).find(ee=>g.indexOf(ee+":")===0);if(H!==void 0){const ee=Tt.data[H];if(ee.length===1&&U!==!0&&Oo(ee[0].uri))return g;const _e=ee[ee.length-1].uri;return g.replace(H+":",_e)}else{var Y=Tt.base.length===0?s.baseIRI:Tt.base[Tt.base.length-1];return!Y||g.match(/^(http:|https:|urn:|file:)/)?g:g.indexOf("//")===0&&Y?Y.split("//")[0]+g:new Fo(g,Y).toString()}},increment:function(g){const U=Tt.data[g];U!==void 0&&U[U.length-1].count++},decrement:function(g){const U=Tt.data[g];U!==void 0&&U[U.length-1].count--},toJSON:function(){const g={};return Tt.base.length>0&&(g["@context"]===void 0&&(g["@context"]={}),g["@context"]["@base"]=Tt.base[0]),Object.keys(Tt.data).forEach(U=>{const H=Tt.data[U][0];H.uri==="http://www.w3.org/2001/XMLSchema#"&&H.count<1||Oo(H.uri)&&(g["@context"]===void 0&&(g["@context"]={}),g["@context"][U]=H.uri)}),g}};function Ls(g,U){if(g["@list"]===void 0||!U&&!g["@list"].find(ee=>ee["@list"]!==void 0))return g;if(g["@list"].length===0)return{"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};var H={},Y=null;return g["@list"].forEach(ee=>{Y===null?Y=H:(Y["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={},Y=Y["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]),Y["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"]=Ls(ee,!0),Y["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}),H}if(Ca=o(),Ca!==a&&E===n.length)return Ca;throw Ca!==a&&E<n.length&&ke(T0()),S0(Ts,rn<n.length?n.charAt(rn):null,rn<n.length?Ss(rn,rn+1):Ss(rn,rn))}return{SyntaxError:t,parse:r}})})(e_);var T2=e_.exports;function N2(i){return new S2(i)}var S2=function(){function i(e){Jt(this,i),qe(this,"_notQNameChars",`	\r
 !"#$%&'()*.,+/;<=>?@[\\]^\`{|}~`),qe(this,"_notNameChars",this._notQNameChars+":"),qe(this,"validPrefix",new RegExp(/^[a-zA-Z][a-zA-Z0-9]*$/)),qe(this,"forbidden1",new RegExp(/[\\"\b\f\r\v\t\n\u0080-\uffff]/gm)),qe(this,"forbidden3",new RegExp(/[\\"\b\f\r\v\u0080-\uffff]/gm)),this.flags="",this.base=null,this.prefixes=[],this.namespaces=[];var t=Object.keys(Hu());for(var r in t){var n=Hu()[t[r]](""),s=t[r];this.prefixes[n]=s,this.namespaces[s]=n}this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.suggestPrefix("xml","reserved:reservedForFutureUse"),this.namespacesUsed=[],this.keywords=["a"],this.prefixchars="abcdefghijklmnopqustuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",this.incoming=null,this.formulas=[],this.store=e,this.rdfFactory=e.rdfFactory||xr,this.xsd=Zp(this.rdfFactory)}return Yt(i,[{key:"setBase",value:function(t){return this.base=t,this}},{key:"setFlags",value:function(t){return this.flags=t||"",this}},{key:"toStr",value:function(t){var r=t.toNT();return t.termType==="Graph"&&(this.formulas[r]=t),r}},{key:"fromStr",value:function(t){if(t[0]==="{"){var r=this.formulas[t];return r||console.log("No formula object for "+t),r}return this.store.fromNT(t)}},{key:"setNamespaces",value:function(t){for(var r in t)this.setPrefix(r,t[r]);return this}},{key:"setPrefix",value:function(t,r){if(t.slice(0,7)!=="default"&&t.slice(0,2)!=="ns"&&!(!t||!r)){for(var n in this.prefixes)this.prefixes[n]==t&&delete this.prefixes[n];this.prefixes[r]=t,this.namespaces[t]=r}}},{key:"suggestPrefix",value:function(t,r){t.slice(0,7)!=="default"&&t.slice(0,2)!=="ns"&&(!t||!r||t in this.namespaces||r in this.prefixes||(this.prefixes[r]=t,this.namespaces[t]=r))}},{key:"suggestNamespaces",value:function(t){for(var r in t)this.suggestPrefix(r,t[r]);return this}},{key:"checkIntegrity",value:function(){var t,r;for(t in this.namespaces)if(this.prefixes[this.namespaces[t]]!==t)throw new Error("Serializer integity error 1: "+t+", "+this.namespaces[t]+", "+this.prefixes[this.namespaces[t]]+"!");for(r in this.prefixes)if(this.namespaces[this.prefixes[r]]!==r)throw new Error("Serializer integity error 2: "+r+", "+this.prefixs[r]+", "+this.namespaces[this.prefixes[r]]+"!")}},{key:"makeUpPrefix",value:function(t){var r=t;function n(u){return!this.validPrefix.test(u)||u==="ns"||u in this.namespaces?!1:(this.prefixes[t]=u,this.namespaces[u]=t,u)}var s=n.bind(this);"#/".indexOf(r[r.length-1])>=0&&(r=r.slice(0,-1));var a=r.lastIndexOf("/");a>=0&&(r=r.slice(a+1));for(var l=0;l<r.length&&this.prefixchars.indexOf(r[l]);)l++;if(r=r.slice(0,l),r.length<6&&s(r))return r;if(s(r.slice(0,3)))return r.slice(0,3);if(s(r.slice(0,2)))return r.slice(0,2);if(s(r.slice(0,4)))return r.slice(0,4);if(s(r.slice(0,1)))return r.slice(0,1);if(s(r.slice(0,5)))return r.slice(0,5);this.validPrefix.test(r)||(r="n");for(var o=0;;o++)if(s(r.slice(0,3)+o))return r.slice(0,3)+o}},{key:"rootSubjects",value:function(t){for(var r={},n={},s={},a=0;a<t.length;a++){var l=t[a],o=function(y){r.hasOwnProperty(y)||(r[y]=[]),r[y].push(l.subject)},u=[l.subject,l.predicate,l.object];u.map(function(m){m.termType==="BlankNode"?s[m.toNT()]=!0:m.termType==="Collection"&&m.elements.forEach(function(y){o(y)})}),o(t[a].object);var f=n[this.toStr(l.subject)];f||(f=[]),f.push(l),n[this.toStr(l.subject)]=f}var p=[];for(var d in n)if(n.hasOwnProperty(d)){var c=this.fromStr(d);if(c.termType!=="BlankNode"||!r[c]||r[c].length!==1){p.push(c);continue}}this.incoming=r;for(var h={},_=0;_<p.length;_++)h[p[_].toNT()]=!0;return{roots:p,subjects:n,rootsHash:h,incoming:r}}},{key:"toN3",value:function(t){return this.statementsToN3(t.statements)}},{key:"explicitURI",value:function(t){return this.flags.indexOf("r")<0&&this.base?t=Ms(this.base,t):this.flags.indexOf("u")>=0?t=P2(t):t=I2(decodeURI(t)),"<"+t+">"}},{key:"statementsToNTriples",value:function(t){var r=t.slice();r.sort();for(var n="",s="http://www.w3.org/1999/02/22-rdf-syntax-ns#",a=this,l=this.store,o=this.rdfFactory,u=function c(h){if(h.termType!=="Collection")return a.atomicTermToN3(h);for(var _=h.elements,m=l.sym(s+"nill"),y=_.length-1;y>=0;y--){var F=o.blankNode();n+=c(F)+" "+c(l.sym(s+"first"))+" "+c(_[y])+`.
`,n+=c(F)+" "+c(l.sym(s+"rest"))+" "+c(m)+`.
`,m=F}return a.atomicTermToN3(m)},f=0;f<r.length;f++){var p=r[f],d="";d+=u(p.subject)+" ",d+=u(p.predicate)+" ",d+=u(p.object)+" ",this.flags.indexOf("q")>=0&&(d+=u(p.why)+" "),d+=`.
`,n+=d}return n}},{key:"statementsToN3",value:function(t){var r=4,n=80,s=this.store,a={"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":"aaa:00"},l=function(P,B){return D2(P,B,s,a)};t.sort(l),this.base&&!this.defaultNamespace&&(this.defaultNamespace=this.base+"#");var o={};this.flags.indexOf("s")<0&&(o["http://www.w3.org/2002/07/owl#sameAs"]="="),this.flags.indexOf("t")<0&&(o["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"]="a"),this.flags.indexOf("i")<0&&(o["http://www.w3.org/2000/10/swap/log#implies"]="=>");var u=function(P){for(var B="",D=0;D<P;D++)B+=" ";return B},f=function L(P){for(var B="",D=0;D<P.length;D++){var R=P[D],w=typeof R=="string"?R:L(R);if(D!==0){var S=B.slice(-1)||" ";w===","||w===";"||w==="."&&!"0123456789.:".includes(S)||(B+=" ")}B+=w}return B},p=function L(P,B){var D="",R=1e5;B===void 0&&(B=-1);for(var w=0;w<P.length;w++){var S=P[w];if(typeof S!="string"){var X=L(S,B+1);if(X.length<10*(n-r*B)&&X.indexOf('"""')<0){var j=f(S);j.length<n-r*B&&(S=j,X="")}X&&(R=1e4),D+=X}if(typeof S=="string"){if(S.length===1&&D.slice(-1)===`
`&&",.;".indexOf(S)>=0){D=D.slice(0,-1),S=="."&&"0123456789.:".includes(D.charAt(D.length-1))&&(D+=" ",R+=1),D+=S+`
`,R+=1;continue}if(R<r*B+4||R+S.length+1<n&&";.".indexOf(D[D.length-2])<0)D=D.slice(0,-1)+" "+S+`
`,R+=S.length+1;else{var ne=u(r*B)+S;D+=ne+`
`,R=ne.length,B<0&&(D+=`
`,R=1e5)}}}return D};function d(L){for(var P=this.rootSubjects(L),B=P.roots,D=[],R=0;R<B.length;R++){var w=B[R];D.push(h(w,P))}return D}var c=d.bind(this);function h(L,P){return L.termType==="BlankNode"&&!P.incoming[L]?F(L,P,!0).concat(["."]):[N(L,P)].concat([m(L,P)]).concat(["."])}function _(L,P){var B=[],D=null,R=P.subjects[this.toStr(L)]||[];if(typeof R>"u")throw new Error("Cant find statements for "+L);for(var w=[],S=0;S<R.length;S++){var X=R[S];X.predicate.uri===D?w.push(","):(D&&(B=B.concat([w]).concat([";"]),w=[]),B.push(o[X.predicate.uri]?o[X.predicate.uri]:N(X.predicate,P))),D=X.predicate.uri,w.push(F(X.object,P))}return B=B.concat([w]),B}var m=_.bind(this);function y(L,P,B){return L.termType==="BlankNode"&&(B||P.rootsHash[L.toNT()]===void 0)?P.subjects[this.toStr(L)]?["[",m(L,P),"]"]:"[]":N(L,P)}var F=y.bind(this);function T(L,P){var B,D;switch(L.termType){case"Graph":return D=["{"],D=D.concat(c(L.statements)),D.concat(["}"]);case"Collection":for(D=["("],B=0;B<L.elements.length;B++)D.push([F(L.elements[B],P)]);return D.push(")"),D;default:return this.atomicTermToN3(L)}}i.prototype.termToN3=N;var N=T.bind(this);function b(){var L="";this.flags.indexOf("d")<0&&this.defaultNamespace&&(L+="@prefix : "+this.explicitURI(this.defaultNamespace)+`.
`);for(var P in this.prefixes)this.prefixes.hasOwnProperty(P)&&this.namespacesUsed[P]&&(L+="@prefix "+this.prefixes[P]+": "+this.explicitURI(P)+`.
`);return L+`
`}var k=b.bind(this),A=c(t);return k()+p(A)}},{key:"atomicTermToN3",value:function(t,r){switch(t.termType){case"BlankNode":case"Variable":return t.toNT();case"Literal":var n=t.value;if(typeof n!="string")throw new TypeError("Value of RDF literal node must be a string");if(t.datatype&&this.flags.indexOf("x")<0)switch(t.datatype.uri){case"http://www.w3.org/2001/XMLSchema#integer":return n;case"http://www.w3.org/2001/XMLSchema#decimal":return n.indexOf(".")<0&&(n+=".0"),n;case"http://www.w3.org/2001/XMLSchema#double":{var s=n.toLowerCase().indexOf("e")>0;return n.indexOf(".")<0&&!s&&(n+=".0"),s||(n+="e0"),n}case"http://www.w3.org/2001/XMLSchema#boolean":return t.value==="1"?"true":"false"}var a=this.stringToN3(t.value);return t.language?a+="@"+t.language:t.datatype.equals(this.xsd.string)||(a+="^^"+this.atomicTermToN3(t.datatype,r)),a;case"NamedNode":return this.symbolToN3(t);case"DefaultGraph":return"";default:throw new Error("Internal: atomicTermToN3 cannot handle "+t+" of termType: "+t.termType)}}},{key:"stringToN3",value:function(t,r){r||(r="e");var n="",s,a,l,o,u;for(t.length>20&&t.slice(-1)!=='"'&&r.indexOf("n")<0&&(t.indexOf(`
`)>0||t.indexOf('"')>0)?(o='"""',u=this.forbidden3):(o='"',u=this.forbidden1),s=0;s<t.length;){u.lastIndex=0;var f=u.exec(t.slice(s));if(f==null)break;a=s+u.lastIndex-1,n+=t.slice(s,a);var p=t[a];p==='"'&&o==='"""'&&t.slice(a,a+3)!=='"""'?n+=p:(l=`\b\f\r	\v
\\"`.indexOf(p),l>=0?n+="\\"+'bfrtvn\\"'[l]:r.indexOf("e")>=0?n+="\\u"+("000"+p.charCodeAt(0).toString(16).toLowerCase()).slice(-4):n+=p),s=a+1}return o+n+t.slice(s)+o}},{key:"symbolToN3",value:function(t){var r=t.uri,n=r.indexOf("#");if(n<0&&this.flags.indexOf("/")<0&&(n=r.lastIndexOf("/")),n>=0&&this.flags.indexOf("p")<0&&(r.indexOf("http")===0||r.indexOf("ws")===0||r.indexOf("file")===0)){for(var s=!0,a=n+1;a<r.length;a++)if(this._notNameChars.indexOf(r[a])>=0){s=!1;break}if(s){var l=r.slice(n+1),o=r.slice(0,n+1);if(this.defaultNamespace&&this.defaultNamespace===o&&this.flags.indexOf("d")<0)return this.flags.indexOf("k")>=0&&this.keyords.indexOf(l)<0?l:":"+l;var u=this.prefixes[o];if(u||(u=this.makeUpPrefix(o)),u)return this.namespacesUsed[o]=!0,u+":"+l}}return this.explicitURI(r)}},{key:"writeStore",value:function(t){var r=this.store,n=r.fetcher,s=n&&n.appNode,a=this.store.index[3];for(var l in a){var o=r.fromNT(l);s&&o.equals(s)||t(`
`+this.atomicTermToN3(o)+" "+this.atomicTermToN3(r.sym("http://www.w3.org/2000/10/swap/log#semantics"))+" { "+this.statementsToN3(r.statementsMatching(void 0,void 0,void 0,o))+` }.
`)}r.statementsMatching(void 0,r.sym("http://www.w3.org/2007/ont/link#requestedURI")).map(function(p){t(`
<`+p.object.value+`> log:metadata {
`);var d=r.statementsMatching(void 0,void 0,void 0,p.subject);t(this.statementsToN3(this.statementsToN3(d))),t(`}.
`)});var u=[];s&&u.push(s);var f=[];u.map(function(p){f=f.concat(r.statementsMatching(void 0,void 0,void 0,p))}),t(this.statementsToN3(f))}},{key:"statementsToXML",value:function(t){var r=4,n=80,s=[];s["http://www.w3.org/1999/02/22-rdf-syntax-ns#"]=!0;var a="http://www.w3.org/1999/02/22-rdf-syntax-ns#_",l=function(R){for(var w="",S=0;S<R;S++)w+=" ";return w},o=function D(R){for(var w="",S=0;S<R.length;S++){var X=R[S],j=typeof X=="string"?X:D(X);w+=j}return w},u=function D(R,w){var S="",X,j=1e5;w||(w=0);for(var ne=0;ne<R.length;ne++){var J=R[ne];if(typeof J!="string"){var W=D(J,w+1);W.length<10*(n-r*w)&&W.indexOf('"""')<0&&(X=o(J),X.length<n-r*w&&(J="   "+X,W="")),W&&(j=1e4),S+=W}typeof J=="string"&&(j<r*w+4?(S=S.slice(0,-1)+" "+J+`
`,j+=J.length+1):(X=l(r*w)+J,S+=X+`
`,j=X.length))}return S};function f(D){this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#");for(var R=this.rootSubjects(D),w=R.roots,S=[],X=0;X<w.length;X++){var j=w[X];S.push(m(j,R))}return S}var p=f.bind(this);function d(D){return typeof D>"u"?"@@@undefined@@@@":D.replace(/[&<"]/g,function(R){switch(R[0]){case"&":return"&amp;";case"<":return"&lt;";case'"':return"&quot;"}})}function c(D){return d(this.base?Ms(this.base,D.uri):D.uri)}var h=c.bind(this);function _(D,R){var w=[],S,X,j,ne,J=R.subjects[this.toStr(D)];if(typeof J>"u")return T(D,R);J.sort(function(ae,Ve){var ze=ae.predicate.uri,De=Ve.predicate.uri;if(ze.substring(0,a.length)===a||De.substring(0,a.length)===a)return ze.localeCompare(De);var Pe=ze.substring(a.length),ve=De.substring(a.length),he=parseInt(Pe,10),Fe=parseInt(ve,10);return isNaN(he)||isNaN(Fe)||he!==Pe||Fe!==ve?ze.localeCompare(De):he-Fe});for(var W=0;W<J.length;W++){if(j=J[W],j.predicate.uri==="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"&&!S&&j.object.termType==="NamedNode"){S=j.object;continue}if(ne=j.predicate,ne.uri.substr(0,a.length)===a){var x=ne.uri.substr(a.length),G=parseInt(x,10);x===G.toString()&&(ne=this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#li"))}switch(X=b(ne),j.object.termType){case"BlankNode":R.incoming[j.object].length===1?w=w.concat(["<"+X+' rdf:parseType="Resource">',m(j.object,R),"</"+X+">"]):w=w.concat(["<"+X+' rdf:nodeID="'+j.object.toNT().slice(2)+'"/>']);break;case"NamedNode":w=w.concat(["<"+X+' rdf:resource="'+h(j.object)+'"/>']);break;case"Literal":w=w.concat(["<"+X+(j.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+d(j.object.datatype.uri)+'"')+(j.object.language?' xml:lang="'+j.object.language+'"':"")+">"+d(j.object.value)+"</"+X+">"]);break;case"Collection":w=w.concat(["<"+X+' rdf:parseType="Collection">',y(j.object,R),"</"+X+">"]);break;default:throw new Error("Can't serialize object of type "+j.object.termType+" into XML")}}var le=S?b(S):"rdf:Description",Q="";return D.termType==="BlankNode"?(!R.incoming[D]||R.incoming[D].length!==1)&&(Q=' rdf:nodeID="'+D.toNT().slice(2)+'"'):Q=' rdf:about="'+h(D)+'"',["<"+le+Q+">"].concat([w]).concat(["</"+le+">"])}var m=_.bind(this);function y(D,R){for(var w=[],S=0;S<D.elements.length;S++)w.push(m(D.elements[S],R));return w}function F(D,R){var w=[],S=R.subjects[this.toStr(D)];if(!S)return w;S.sort();for(var X=0;X<S.length;X++){var j=S[X];switch(j.object.termType){case"BlankNode":R.rootsHash[j.object.toNT()]?w=w.concat(["<"+b(j.predicate)+' rdf:nodeID="'+j.object.toNT().slice(2)+'">',"</"+b(j.predicate)+">"]):w=w.concat(["<"+b(j.predicate)+' rdf:parseType="Resource">',T(j.object,R),"</"+b(j.predicate)+">"]);break;case"NamedNode":w=w.concat(["<"+b(j.predicate)+' rdf:resource="'+h(j.object)+'"/>']);break;case"Literal":w=w.concat(["<"+b(j.predicate)+(j.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+d(j.object.datatype.value)+'"')+(j.object.language?' xml:lang="'+j.object.language+'"':"")+">"+d(j.object.value)+"</"+b(j.predicate)+">"]);break;case"Collection":w=w.concat(["<"+b(j.predicate)+' rdf:parseType="Collection">',y(j.object,R),"</"+b(j.predicate)+">"]);break;default:throw new Error("Can't serialize object of type "+j.object.termType+" into XML")}}return w}var T=F.bind(this);function N(D){var R=D.uri,w=R.indexOf("#");if(w<0&&this.flags.indexOf("/")<0&&(w=R.lastIndexOf("/")),w<0)throw new Error("Cannot make qname out of <"+R+">");for(var S=w+1;S<R.length;S++)if(this._notNameChars.indexOf(R[S])>=0)throw new Error('Invalid character "'+R[S]+'" cannot be in XML qname for URI: '+R);var X=R.slice(w+1),j=R.slice(0,w+1);if(this.defaultNamespace&&this.defaultNamespace===j&&this.flags.indexOf("d")<0)return X;var ne=this.prefixes[j];return ne||(ne=this.makeUpPrefix(j)),s[j]=!0,ne+":"+X}var b=N.bind(this),k=p(t),A="<rdf:RDF";this.defaultNamespace&&(A+=' xmlns="'+d(this.defaultNamespace)+'"');for(var L in s)if(s.hasOwnProperty(L)){var P=this.base&&this.flags.includes("z")?Ms(this.base,L):L;A+=`
 xmlns:`+this.prefixes[L]+'="'+d(P)+'"'}A+=">";var B=[A,k,"</rdf:RDF>"];return u(B,-1)}},{key:"statementsToJsonld",value:function(t){var r=this.statementsToN3(t),n=T2.parse(r);return JSON.stringify(n,null,2)}}])}();function I2(i){return encodeURI(i)}function P2(i){for(var e="",t,r=0;r<i.length;r++)t=i.charCodeAt(r),t>65535?e+="\\U"+("00000000"+t.toString(16)).slice(-8):t>126?e+="\\u"+("0000"+t.toString(16)).slice(-4):e+=i[r];return e}function sa(i,e,t,r,n,s){t=t||(i==null?void 0:i.value);var a=s||{};r=r||ri;var l=void 0;try{var o=N2(e);a.flags&&o.setFlags(a.flags);var u=e.statementsMatching(void 0,void 0,void 0,i);switch("namespaces"in e&&o.suggestNamespaces(e.namespaces),a.namespaces&&o.setNamespaces(a.namespaces),o.setBase(t),r){case ta:return l=o.statementsToXML(u),f(null,l);case cp:case Ag:return l=o.statementsToN3(u),f(null,l);case ri:case Sg:return o.setFlags("si"),l=o.statementsToN3(u),f(null,l);case Cg:return o.setFlags("deinprstux"),l=o.statementsToNTriples(u),f(null,l);case hl:return o.setFlags("si dr"),l=o.statementsToJsonld(u),f(null,l);case _l:case pl:return o.setFlags("deinprstux q"),l=o.statementsToNTriples(u),f(null,l);default:throw new Error("Serialize: Content-type "+r+" not supported for data write.")}}catch(p){if(n)return n(p,void 0);throw p}function f(p,d){if(n){n(p,d);return}else return d}}var R2=["blankNode","defaultGraph","literal","namedNode","quad","variable","supports"],Oa={first:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",rest:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",nil:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};function t_(i,e,t){var r=[];return t.reduce(function(n,s,a,l){r.push(i.quad(n,i.namedNode(Oa.first),l[a]));var o;return a<l.length-1?(o=i.blankNode(),r.push(i.quad(n,i.namedNode(Oa.rest),o))):r.push(i.quad(n,i.namedNode(Oa.rest),i.namedNode(Oa.nil))),o},e),r}function qr(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=i.length;for(t<0&&(t=r+t);t<r;t++)if(i[t]===e)return t;return-1}function F2(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=O2(i))||e){t&&(i=t);var r=0,n=function(){};return{s:n,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){t=t.call(i)},n:function(){var u=t.next();return s=u.done,u},e:function(u){a=!0,l=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(a)throw l}}}}function O2(i,e){if(i){if(typeof i=="string")return xu(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xu(i,e)}}function xu(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=i[t];return r}function B2(i,e,t){return e=sr(e),Tn(i,r_()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function r_(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r_=function(){return!!i})()}var n_=function(i){function e(){var t,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};Jt(this,e),t=B2(this,e,[""]),t.statements=r,t.constraints=n,t.initBindings=s,t.optional=a,qe(t,"termType",fa),qe(t,"classOrder",un.Graph),qe(t,"fetcher",void 0),qe(t,"isVar",0),qe(t,"ns",yr),qe(t,"rdfFactory",void 0),t.rdfFactory=l&&l.rdfFactory||xr;var o=F2(R2),u;try{var f=function(){var d=u.value;t[d]=function(){var c;return(c=t.rdfFactory)[d].apply(c,arguments)}};for(o.s();!(u=o.n()).done;)f()}catch(p){o.e(p)}finally{o.f()}return t}return Er(e,i),Yt(e,[{key:"add",value:function(r,n,s,a){var l=this;return arguments.length===1&&r.forEach(function(o){return l.add(o.subject,o.predicate,o.object,o.graph)}),this.statements.push(this.rdfFactory.quad(r,n,s,a))}},{key:"addStatement",value:function(r){return this.add(r)}},{key:"bnode",value:function(r){return this.rdfFactory.blankNode(r)}},{key:"addAll",value:function(r){var n=this;r.forEach(function(s){n.add(s.subject,s.predicate,s.object,s.graph)})}},{key:"any",value:function(r,n,s,a){var l=this.anyStatementMatching(r,n,s,a);return l==null?null:r==null?l.subject:n==null?l.predicate:s==null?l.object:null}},{key:"anyValue",value:function(r,n,s,a){var l=this.any(r,n,s,a);return l?l.value:void 0}},{key:"anyJS",value:function(r,n,s,a){var l=this.any(r,n,s,a);return l?qt.toJS(l):void 0}},{key:"anyStatementMatching",value:function(r,n,s,a){var l=this.statementsMatching(r,n,s,a,!0);if(!(!l||l.length===0))return l[0]}},{key:"id",value:function(r){return this.rdfFactory.id(r)}},{key:"statementsMatching",value:function(r,n,s,a,l){var o=this.statements.filter(function(u){return(!r||r.equals(u.subject))&&(!n||n.equals(u.predicate))&&(!s||s.equals(u.object))&&(!a||a.equals(u.graph))});return l?o.length===0?[]:[o[0]]:o}},{key:"bottomTypeURIs",value:function(r){var n,s,a,l,o,u,f,p;n=[];for(var d in r)if(r.hasOwnProperty(d)){for(p=r[d],f=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),this.rdfFactory.namedNode(d)),s=!0,l=0,o=f.length;l<o;l++)if(a=f[l],u=a.uri,u in r){s=!1;break}s&&(n[d]=p)}return n}},{key:"collection",value:function(){return new qn}},{key:"each",value:function(r,n,s,a){var l=[],o=this.statementsMatching(r,n,s,a,!1);if(r==null)for(var u=0,f=o.length;u<f;u++)l.push(o[u].subject);else if(n==null)for(var p=0,d=o.length;p<d;p++)l.push(o[p].predicate);else if(s==null)for(var c=0,h=o.length;c<h;c++)l.push(o[c].object);else if(a==null)for(var _=0,m=o.length;_<m;_++)l.push(new hr(o[_].graph.value));return l}},{key:"equals",value:function(r){return r?this.hashString()===r.hashString():!1}},{key:"findMembersNT",value:function(r){var n,s,a,l,o,u,f,p,d,c,h,_,m,y;_={},_[r.toNT()]=!0,l={},u=this.transitiveClosure(_,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0);for(var F in u)if(u.hasOwnProperty(F)){f=this.statementsMatching(void 0,this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.fromNT(F));for(var T=0,N=f.length;T<N;T++)m=f[T],l[m.subject.toNT()]=m;p=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"),this.fromNT(F));for(var b=0,k=p.length;b<k;b++)for(o=p[b],d=this.statementsMatching(void 0,o),a=0,n=d.length;a<n;a++)m=d[a],l[m.subject.toNT()]=m;c=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"),this.fromNT(F));for(var A=0,L=c.length;A<L;A++)for(o=c[A],h=this.statementsMatching(void 0,o),y=0,s=h.length;y<s;y++)m=h[y],l[m.object.toNT()]=m}return l}},{key:"findMemberURIs",value:function(r){return this.NTtoURI(this.findMembersNT(r))}},{key:"findSubClassesNT",value:function(r){var n={};return n[r.toNT()]=!0,this.transitiveClosure(n,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0)}},{key:"findSuperClassesNT",value:function(r){var n={};return n[r.toNT()]=!0,this.transitiveClosure(n,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}},{key:"findTypesNT",value:function(r){var n,s,a,l,o,u,f,p,d;a="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",d=[],l=this.statementsMatching(r,void 0,void 0);for(var c=0,h=l.length;c<h;c++)if(p=l[c],p.predicate.uri===a)d[p.object.toNT()]=p;else{o=this.each(p.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"));for(var _=0,m=o.length;_<m;_++)s=o[_],d[s.toNT()]=p}u=this.statementsMatching(void 0,void 0,r);for(var y=0,F=u.length;y<F;y++){p=u[y],f=this.each(p.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"));for(var T=0,N=f.length;T<N;T++)n=f[T],d[n.toNT()]=p}return this.transitiveClosure(d,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}},{key:"findTypeURIs",value:function(r){return this.NTtoURI(this.findTypesNT(r))}},{key:"connectedStatements",value:function(r,n,s){s=s||[];for(var a=[r],l={},o={},u=[],f=this,p=function(c){var h=function(y){y.termType==="BlankNode"&&!l[y.value]&&(l[y.value]=!0,a.push(y))},_=f.statementsMatching(null,null,c,n).concat(f.statementsMatching(c,null,null,n));_=_.filter(function(m){if(s[m.predicate.value])return!1;var y=m.toNT();return o[y]?!1:(o[y]=!0,!0)}),_.forEach(function(m){h(m.subject),h(m.object)}),u=u.concat(_)};a.length;)p(a.shift());return u}},{key:"formula",value:function(r){return new e}},{key:"fromNT",value:function(r){var n,s,a;switch(r[0]){case"<":return this.sym(r.slice(1,-1));case'"':if(a=void 0,n=void 0,s=r.lastIndexOf('"'),s<r.length-1)if(r[s+1]==="@")a=r.slice(s+2);else if(r.slice(s+1,s+3)==="^^")n=this.fromNT(r.slice(s+3));else throw new Error("Can't convert string from NT: "+r);return r=r.slice(1,s),r=r.replace(/\\"/g,'"'),r=r.replace(/\\n/g,`
`),r=r.replace(/\\\\/g,"\\"),this.rdfFactory.literal(r,a||n);case"_":return this.rdfFactory.blankNode(r.slice(2));case"?":return new li(r.slice(1))}throw new Error("Can't convert from NT: "+r)}},{key:"holds",value:function(r,n,s,a){var l;if(arguments.length===1){if(!r)return!0;if(r instanceof Array){for(l=0;l<r.length;l++)if(!this.holds(r[l]))return!1;return!0}else{if(Pg(r))return this.holds(r.subject,r.predicate,r.object,r.graph);if(r.statements)return this.holds(r.statements)}}var o=this.anyStatementMatching(r,n,s,a);return o!=null}},{key:"holdsStatement",value:function(r){return this.holds(r.subject,r.predicate,r.object,r.graph)}},{key:"list",value:function(r,n){if(n.rdfFactory.supports.COLLECTIONS){var s=n.rdfFactory.collection();return r.forEach(function(o){s.append(o)}),s}else{var a=n.rdfFactory.blankNode(),l=t_(n.rdfFactory,a,r);return n.addAll(l),a}}},{key:"NTtoURI",value:function(r){var n,s,a={};for(n in r)r.hasOwnProperty(n)&&(s=r[n],n[0]==="<"&&(a[n.slice(1,-1)]=s));return a}},{key:"serialize",value:function(r,n,s,a){return sa(s,this,r,n,void 0,a)}},{key:"substitute",value:function(r){var n=this.statements.map(function(a){return a.substitute(r)}),s=new e;return s.addAll(n),s}},{key:"sym",value:function(r,n){if(n)throw new Error("This feature (kb.sym with 2 args) is removed. Do not assume prefix mappings.");return this.rdfFactory.namedNode(r)}},{key:"the",value:function(r,n,s,a){var l=this.any(r,n,s,a);return l}},{key:"transitiveClosure",value:function(r,n,s){var a,l,o,u,f,p,d={};Object.assign(d,r);for(var c={};;){if(p=function(){for(var h in d)if(d.hasOwnProperty(h))return h}(),p==null)return c;for(f=s?this.each(void 0,n,this.fromNT(p)):this.each(this.fromNT(p),n),l=0,o=f.length;l<o;l++)a=f[l],u=a.toNT(),!(u in c)&&(u in d||(d[u]=d[p]));c[p]=d[p],delete d[p]}}},{key:"topTypeURIs",value:function(r){var n,s,a,l,o,u,f,p;f=[];for(a in r)if(r.hasOwnProperty(a)){for(p=r[a],o=0,u=this.each(this.rdfFactory.namedNode(a),this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf")),n=0,l=u.length;n<l;n++)if(s=u[n],s.uri!=="http://www.w3.org/2000/01/rdf-schema#Resource"){o++;break}o||(f[a]=p)}return f["http://www.w3.org/2000/01/rdf-schema#Resource"]&&delete f["http://www.w3.org/2000/01/rdf-schema#Resource"],f["http://www.w3.org/2002/07/owl#Thing"]&&delete f["http://www.w3.org/2002/07/owl#Thing"],f}},{key:"toString",value:function(){return"{"+this.statements.join(`
`)+"}"}},{key:"variable",value:function(r){return new li(r)}},{key:"whether",value:function(r,n,s,a){return this.statementsMatching(r,n,s,a,!1).length}}])}(qt);qt.fromValue=vp;var gi={xsd:yr("http://www.w3.org/2001/XMLSchema#")};qt.toJS=function(i){return Ul(i)?i.elements.map(qt.toJS):hp(i)?i.datatype.equals(gi.xsd("boolean"))?i.value==="1"||i.value==="true":i.datatype.equals(gi.xsd("dateTime"))||i.datatype.equals(gi.xsd("date"))?new Date(i.value):i.datatype.equals(gi.xsd("integer"))||i.datatype.equals(gi.xsd("float"))||i.datatype.equals(gi.xsd("decimal"))?Number(i.value):i.value:i};var L2=Yt(function i(e,t){Jt(this,i),this.pat=new _a,this.vars=[],this.name=e,this.id=t});function Xu(i,e,t,r){function n(b){var k="",A;for(A in b)b.hasOwnProperty(A)&&(k+="    "+A+" -> "+b[A]);return k}function s(b){var k="Bindings: ",A,L=b.length;for(A=0;A<L;A++)k+=n(b[A][0])+`;
	`;return k}function a(b,k,A,L){var P=A[b];if(P===void 0){if(b.isVar){var B=[];return B[b]=k,[[B,null]]}P=b}if(!P.complexType)return L.redirections[P]&&(P=L.redirections[P]),L.redirections[k]&&(k=L.redirections[k]),P.equals(k)||P.uri&&P.uri===ra?[[[],null]]:[];if(b instanceof Array)return k instanceof Array?l(b,k,A):[];throw new Error("query.js: oops - code not written yet")}function l(b,k,A,L){var P;if(b.length!==k.length)return[];if(!b.length)return[[[],null]];var B=a(b[0],k[0],A,L);if(B.length===0)return B;var D=[],R,w=B.length,S,X,j,ne,J,W;for(R=0;R<w;R++){S=B[R][0],W=[];for(ne in S)S.hasOwnProperty(ne)&&(W[ne]=S[ne]);for(ne in A)A.hasOwnProperty(ne)&&(W[ne]=A[ne]);for(P=l(b.slice(1),k.slice(1),W,L),j=P.length,X=0;X<j;X++){J=P[X][0];for(ne in S)S.hasOwnProperty(ne)&&(J[ne]=S[ne]);D.push([J,null])}}return D}function o(b,k){var A=k[b];return A===void 0?b:A}function u(b,k){var A={},L;for(L in b)b.hasOwnProperty(L)&&(A[L]=b[L]);for(L in k)k.hasOwnProperty(L)&&(A[L]=k[L]);return A}function f(b,k){return this.trunkBindings=k,this.originalCallback=b,this.branches=[],this}f.prototype.checkAllDone=function(){var b;for(b=0;b<this.branches.length;b++)if(!this.branches[b].done)return;this.doCallBacks(this.branches.length-1,this.trunkBindings)},f.prototype.doCallBacks=function(b,k){var A;if(b<0)return this.originalCallback(k);for(A=0;A<this.branches[b].results.length;A++)this.doCallBacks(b-1,u(k,this.branches[b].results[A]))};function p(b,k){return this.count=0,this.success=!1,this.done=!1,this.callback=b,this.onDone=k,this}p.prototype.reportMatch=function(b){this.callback(b),this.success=!0},p.prototype.reportDone=function(){this.done=!0,this.onDone!==void 0&&this.onDone()};var d=function(k){return this.count=0,this.done=!1,this.results=[],this.junction=k,k.branches.push(this),this};d.prototype.reportMatch=function(b){this.results.push(b)},d.prototype.reportDone=function(){nn.debug("Optional branch finished - results.length = "+this.results.length),this.results.length===0&&this.results.push({}),this.done=!0,this.junction.checkAllDone()};function c(b,k,A){var L,P,B,D;for(k.nvars=0,k.index=null,L=[k.subject,k.predicate,k.object,k.why],D=[b.subjectIndex,b.predicateIndex,b.objectIndex,b.whyIndex],B=0;B<4;B++){var R=L[B];if(!(R.uri&&R.uri===ra))if(R.isVar&&A[R]===void 0)k.nvars++;else{if(R=o(L[B],A),b.redirections[b.id(R)]&&(R=b.redirections[b.id(R)]),P=D[B][b.id(R)],!P)return k.index=[],!1;(k.index===null||k.index.length>P.length)&&(k.index=P)}}return k.index===null&&(k.index=b.statements),!0}function h(b,k){return b.nvars!==k.nvars?b.nvars-k.nvars:b.index.length-k.index.length}var _=0,m=function b(k,A,L,P,B,D,R){nn.debug("Match begins, Branch count now: "+R.count+" for "+R.pattern_debug);var w=A.statements;if(w.length===0){if(nn.debug("FOUND MATCH WITH BINDINGS:"+n(L)),A.optional.length===0)R.reportMatch(L);else{nn.debug("OPTIONAL: "+A.optional);var S=new f(e,L),X=[],j;for(j=0;j<A.optional.length;j++)X[j]=new d(S),X[j].pattern_debug=A.optional[j];for(j=0;j<A.optional.length;j++)X[j].count=X[j].count+1,b(k,A.optional[j],L,"",B,e,X[j])}R.count--,nn.debug("Match ends -- success , Branch count now: "+R.count+" for "+R.pattern_debug);return}var ne,J,W=w.length;if(B){var x="match"+_++,G=function(Q,ae){var Ve=Q.uri.split("#")[0];B.nowOrWhenFetched(Ve,void 0,function(ze,De,Pe){ze||console.log("Error following link to <"+Q.uri+"> in query: "+De),b(k,A,L,P,B,D,R)})};for(J=0;J<W;J++){if(ne=w[J],L[ne.subject]!==void 0&&L[ne.subject].uri&&B&&B.getState(Di(L[ne.subject].uri))==="unrequested"){G(L[ne.subject],x);return}if(L[ne.object]!==void 0&&L[ne.object].uri&&B&&B.getState(Di(L[ne.object].uri))==="unrequested"){G(L[ne.object],x);return}}}F(k,A,L,P,B,D,R)},y=function(k,A){var L=!0,P,B;for(P in k)k.hasOwnProperty(P)&&A[P]&&(B=A[P].test,B&&!B(k[P])&&(L=!1));return L},F=function(k,A,L,P,B,D,R){var w=A.statements,S=w.length,X,j,ne,J,W,x,G;for(X=0;X<S;X++)G=w[X],c(k,G,L);w.sort(h),G=w[0];var le=k.formula();le.optional=A.optional,le.constraints=A.constraints,le.statements=w.slice(1),nn.debug(P+"match2 searching "+G.index.length+" for "+G+"; bindings so far="+n(L));var Q,ae=G.index.length,Ve,ze;for(Q=0;Q<ae;Q++)for(ze=G.index[Q],Ve=l([G.subject,G.predicate,G.object,G.why],[ze.subject,ze.predicate,ze.object,ze.why],L,k),nn.info(P+" From first: "+Ve.length+": "+s(Ve)),ne=Ve.length,j=0;j<ne;j++)if(W=[],x=Ve[j][0],!y(x,A.constraints))nn.debug("Branch count CS: "+R.count);else{for(J in x)x.hasOwnProperty(J)&&(W[J]=x[J]);for(J in L)L.hasOwnProperty(J)&&(W[J]=L[J]);R.count++,m(k,le,W,P+"  ",B,D,R)}R.count--,nn.debug("Match2 ends, Branch count: "+R.count+" for "+R.pattern_debug),R.count===0&&R.reportDone()},T=this;nn.debug("Query on "+this.statements.length);var N=new p(e,r);N.count++,i.sync?m(T,i.pat,i.pat.initBindings,"",t,e,N):setTimeout(function(){m(T,i.pat,i.pat.initBindings,"",t,e,N)},0)}function Gu(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,r)}return t}function Gi(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Gu(Object(t),!0).forEach(function(r){qe(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Gu(Object(t)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}function U2(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=j2(i))||e){t&&(i=t);var r=0,n=function(){};return{s:n,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){t=t.call(i)},n:function(){var u=t.next();return s=u.done,u},e:function(u){a=!0,l=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(a)throw l}}}}function j2(i,e){if(i){if(typeof i=="string")return Qu(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Qu(i,e)}}function Qu(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=i[t];return r}function q2(i,e,t){return e=sr(e),Tn(i,i_()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function i_(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i_=function(){return!!i})()}var Hs="http://www.w3.org/2002/07/owl#";function M2(i,e,t,r){var n=i.any(e,t,void 0);return n?(i.equate(n,r),!0):!1}function V2(i,e,t,r){var n=i.any(void 0,t,r);return n?(i.equate(n,e),!0):!1}function a_(i,e,t,r,n){i.typeCallback&&i.typeCallback(i,r,n);var s=i.classActions[i.id(r)],a=!1;if(s)for(var l=0;l<s.length;l++)a=a||s[l](i,e,t,r,n);return a}var _a=function(i){function e(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Jt(this,e),r=q2(this,e,[void 0,void 0,void 0,void 0,n]),qe(r,"updater",void 0),qe(r,"namespaces",void 0),qe(r,"classActions",void 0),qe(r,"propertyActions",void 0),qe(r,"redirections",void 0),qe(r,"aliases",void 0),qe(r,"HTTPRedirects",void 0),qe(r,"subjectIndex",void 0),qe(r,"predicateIndex",void 0),qe(r,"objectIndex",void 0),qe(r,"whyIndex",void 0),qe(r,"index",void 0),qe(r,"features",void 0),qe(r,"_universalVariables",void 0),qe(r,"_existentialVariables",void 0),qe(r,"rdfArrayRemove",void 0),qe(r,"dataCallbacks",void 0),r.propertyActions={},r.classActions={},r.redirections=[],r.aliases=[],r.HTTPRedirects=[],r.subjectIndex=[],r.predicateIndex=[],r.objectIndex=[],r.whyIndex=[],r.index=[r.subjectIndex,r.predicateIndex,r.objectIndex,r.whyIndex],r.namespaces={},r.features=t||[],r.rdfArrayRemove=n.rdfArrayRemove||k2,n.dataCallback&&(r.dataCallbacks=[n.dataCallback]),r.initPropertyActions(r.features),r}return Er(e,i),Yt(e,[{key:"substitute",value:function(r){var n=this.statements.map(function(a){return a.substitute(r)}),s=new e;return s.add(n),s}},{key:"addDataCallback",value:function(r){this.dataCallbacks||(this.dataCallbacks=[]),this.dataCallbacks.push(r)}},{key:"applyPatch",value:function(r,n,s){var a=this,l,o=null;function u(d){if(r.delete){l=r.delete,o&&(l=l.substitute(o)),l=l.statements;var c=[],h=l.map(function(_){var m=a.statementsMatching(_.subject,_.predicate,_.object,n);return m.length===0?(c.push(_),null):m[0]});if(c.length)return s("Could not find to delete: "+c.join(`
 or `));h.map(function(_){a.remove(_)})}r.insert&&(l=r.insert,o&&(l=l.substitute(o)),l=l.statements,l.map(function(_){_.graph=n,a.add(_.subject,_.predicate,_.object,_.graph)})),d()}if(r.where){var f=new L2("patch");f.pat=r.where,f.pat.statements.map(function(d){d.graph=D_(n.value)}),f.sync=!0;var p=[];a.query(f,function(c){p.push(c)},a.fetcher,function(){if(p.length===0)return s("No match found to be patched:"+r.where);if(p.length>1)return s("Patch ambiguous. No patch done.");o=p[0],u(s)})}else u(s)}},{key:"declareExistential",value:function(r){return this._existentialVariables||(this._existentialVariables=[]),this._existentialVariables.push(r),r}},{key:"initPropertyActions",value:function(r){this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"))]=[a_],qr(r,"sameAs")>=0&&(this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode("".concat(Hs,"sameAs")))]=[function(n,s,a,l,o){return n.equate(s,l),!0}]),qr(r,"InverseFunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode("".concat(Hs,"InverseFunctionalProperty")))]=[function(n,s,a,l,o){return n.newPropertyAction(s,V2)}]),qr(r,"FunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode("".concat(Hs,"FunctionalProperty")))]=[function(n,s,a,l,o){return n.newPropertyAction(s,M2)}])}},{key:"addStatement",value:function(r){return this.add(r.subject,r.predicate,r.object,r.graph),this.statements.length}},{key:"add",value:function(r,n,s,a){var l;if(arguments.length===1){if(r instanceof Array)for(l=0;l<r.length;l++)this.add(r[l]);else yi(r)?this.add(r.subject,r.predicate,r.object,r.graph):wu(r)&&this.add(r.statements);return this}var o,u;a||(a=this.fetcher?this.fetcher.appNode:this.rdfFactory.defaultGraph()),typeof r=="string"&&(r=this.rdfFactory.namedNode(r)),n=qt.fromValue(n);var f=qt.fromValue(s);if(a=qt.fromValue(a),!Fg(r))throw new Error("Subject is not a subject type");if(!Og(n))throw new Error("Predicate ".concat(n," is not a predicate type"));if(!Rg(f))throw new Error("Object ".concat(f," is not an object type"));if(!Lg(a))throw new Error("Why is not a graph type");this.predicateCallback&&this.predicateCallback(this,n,a);var p=this.id(this.canon(n));o=this.propertyActions[p];var d=!1;if(o)for(l=0;l<o.length;l++)d=d||o[l](this,r,n,f,a);if(this.holds(r,n,f,a))return null;var c=[this.id(this.canon(r)),p,this.id(this.canon(f)),this.id(this.canon(a))];for(u=this.rdfFactory.quad(r,n,f,a),l=0;l<4;l++){var h=this.index[l],_=c[l];h[_]||(h[_]=[]),h[_].push(u)}if(this.statements.push(u),this.dataCallbacks){var m=U2(this.dataCallbacks),y;try{for(m.s();!(y=m.n()).done;){var F=y.value;F(u)}}catch(T){m.e(T)}finally{m.f()}}return u}},{key:"canon",value:function(r){if(!r)return r;var n=this.redirections[this.id(r)];if(n)return n;switch(r.termType){case fi:return new fn(r.value);case Hn:return r;case si:return new jl;case fp:return r;case fa:return r;case Fi:return new sn(r.value,r.language,r.datatype);case ui:return new hr(r.value);case zn:return new li(r.value);default:throw new Error("Term Type not recognized for canonization: ".concat(r.termType))}}},{key:"check",value:function(){this.checkStatementList(this.statements);for(var r=0;r<4;r++){var n=this.index[r];for(var s in n)n.hasOwnProperty(s)&&this.checkStatementList(n[s],r)}}},{key:"checkStatementList",value:function(r,n){n===void 0&&(n=0);for(var s=["subject","predicate","object","why"],a=" found in "+s[n]+" index.",l,o=0;o<r.length;o++){l=r[o];for(var u=[l.subject,l.predicate,l.object,l.graph],f=function(_,m){for(var y=0;y<_.length;y++)if(_[y].subject.equals(m.subject)&&_[y].predicate.equals(m.predicate)&&_[y].object.equals(m.object)&&_[y].why.equals(m.graph))return!0},p=0;p<4;p++){var d=this.canon(u[p]),c=this.id(d);this.index[p][c]&&f(this.index[p][c],l)}if(!f(this.statements,l))throw new Error("Statement list does not statement "+l+"@"+l.graph+a)}}},{key:"close",value:function(){return this}},{key:"compareTerms",value:function(r,n){return Object.prototype.hasOwnProperty.call(r,"compareTerm")?r.compareTerm(n):un[r.termType]<un[n.termType]?-1:un[r.termType]>un[n.termType]?1:r.value<n.value?-1:r.value>n.value?1:0}},{key:"copyTo",value:function(r,n,s){s||(s=[]);var a=this.statementsMatching(r);qr(s,"two-direction")!==-1&&a.concat(this.statementsMatching(void 0,void 0,r));for(var l=0;l<a.length;l++){var o=a[l];switch(o.object.termType){case"NamedNode":this.add(n,o.predicate,o.object);break;case"Literal":case"BlankNode":case"Collection":this.add(n,o.predicate,o.object.copy(this))}qr(s,"delete")!==-1&&this.remove(o)}}},{key:"equate",value:function(r,n){var s=this.canon(r),a=this.canon(n),l=this.compareTerms(s,a);return l?l<0?this.replaceWith(a,s):this.replaceWith(s,a):!0}},{key:"formula",value:function(r){return new e(r)}},{key:"length",get:function(){return this.statements.length}},{key:"match",value:function(r,n,s,a){return this.statementsMatching(qt.fromValue(r),qt.fromValue(n),qt.fromValue(s),qt.fromValue(a))}},{key:"mentionsURI",value:function(r){var n="<"+r+">";return!!this.subjectIndex[n]||!!this.objectIndex[n]||!!this.predicateIndex[n]}},{key:"newExistential",value:function(r){if(!r)return this.bnode();var n=this.sym(r);return this.declareExistential(n)}},{key:"newPropertyAction",value:function(r,n){var s=this.id(r);this.propertyActions[s]||(this.propertyActions[s]=[]),this.propertyActions[s].push(n);for(var a=this.statementsMatching(void 0,r,void 0),l=!1,o=0;o<a.length;o++)l=l||n(this,a[o].subject,r,a[o].object);return l}},{key:"newUniversal",value:function(r){var n=this.sym(r);return this._universalVariables||(this._universalVariables=[]),this._universalVariables.push(n),n}},{key:"variable",value:function(r){return new li(r)}},{key:"nextSymbol",value:function(r){for(var n=0;;n++){var s=r.value+"#n"+n;if(!this.mentionsURI(s))return this.sym(s)}}},{key:"query",value:function(r,n,s,a){return Xu.call(this,r,n,s,a)}},{key:"querySync",value:function(r){var n=[];function s(o){n.push(o)}function a(){l=!0}var l=!1;if(r.sync=!0,Xu.call(this,r,s,null,a),!l)throw new Error("Sync query should have called done function");return n}},{key:"remove",value:function(r){if(r instanceof Array){for(var n=0;n<r.length;n++)this.remove(r[n]);return this}if(wu(r))return this.remove(r.statements);var s=this.statementsMatching(r.subject,r.predicate,r.object,r.graph);if(!s.length)throw new Error("Statement to be removed is not on store: "+r);return this.removeStatement(s[0]),this}},{key:"removeDocument",value:function(r){this.removeMetadata(r);for(var n=this.statementsMatching(void 0,void 0,void 0,r).slice(),s=0;s<n.length;s++)this.removeStatement(n[s]);return this.removeMatches(r,null,null),this}},{key:"removeMetadata",value:function(r){for(var n=this.sym("chrome://TheCurrentSession"),s="http://www.w3.org/2007/ont/link#",a=this.statementsMatching(void 0,this.sym("".concat(s,"requestedURI")),this.rdfFactory.literal(r.value),n).map(function(c){return c.subject}),l=0;l<a.length;l++){var o=a[l];if(o!=null){var u=void 0,f=this.any(o,this.sym("".concat(s,"status")),null,n);if(f!=null){u=this.statementsMatching(f,this.sym("".concat(s,"status")),null,n).slice();for(var p=0;p<u.length;p++)this.removeStatement(u[p])}var d=this.any(o,this.sym("".concat(s,"response")),null,n);if(d!=null){u=this.statementsMatching(d,null,null,n).slice();for(var p=0;p<u.length;p++)this.removeStatement(u[p])}u=this.statementsMatching(o,null,null,n).slice();for(var p=0;p<u.length;p++)this.removeStatement(u[p])}}return this.removeMatches(this.sym(r.value),null,null,n),this}},{key:"removeMany",value:function(r,n,s,a,l){for(var o=this.statementsMatching(r,n,s,a,!1),u=[],f=0;f<o.length;f++)u.push(o[f]);for(l&&(u=u.slice(0,l)),f=0;f<u.length;f++)this.remove(u[f])}},{key:"removeMatches",value:function(r,n,s,a){return this.removeMany(r,n,s,a),this}},{key:"removeStatement",value:function(r){for(var n=[r.subject,r.predicate,r.object,r.graph],s=0;s<4;s++){var a=this.canon(n[s]),l=this.id(a);this.index[s][l]&&this.rdfArrayRemove(this.index[s][l],r)}return this.rdfArrayRemove(this.statements,r),this}},{key:"removeStatements",value:function(r){for(var n=0;n<r.length;n++)this.remove(r[n]);return this}},{key:"replaceWith",value:function(r,n){for(var s=this.id(r),a=this.id(n),l=function(f){var p=f[s];if(p){var d=f[a];d?f[a]=p.concat(d):f[a]=p,delete f[s]}},o=0;o<4;o++)l(this.index[o]);if(this.redirections[s]=n,r.value){if(this.aliases[a]||(this.aliases[a]=[]),this.aliases[a].push(r),this.aliases[s])for(o=0;o<this.aliases[s].length;o++)this.redirections[this.id(this.aliases[s][o])]=n,this.aliases[a].push(this.aliases[s][o]);this.add(n,this.sym("http://www.w3.org/2007/ont/link#uri"),r),this.fetcher&&this.fetcher.nowKnownAs(r,n)}return l(this.classActions),l(this.propertyActions),!0}},{key:"allAliases",value:function(r){var n=this.aliases[this.id(this.canon(r))]||[];return n.push(this.canon(r)),n}},{key:"sameThings",value:function(r,n){if(r.equals(n))return!0;var s=this.canon(r);if(!s)return!1;var a=this.canon(n);return a?s.value===a.value:!1}},{key:"setPrefixForURI",value:function(r,n){if(!(r==="tab"&&this.namespaces.tab)&&!(r.slice(0,2)==="ns"||r.slice(0,7)==="default")){for(var s in this.namespaces)this.namespaces[s]==n&&delete this.namespaces[s];this.namespaces[r]=n}}},{key:"statementsMatching",value:function(r,n,s,a,l){var o=[r,n,s,a],u=[],f=[],p=[],d,c;for(d=0;d<4;d++)u[d]=this.canon(qt.fromValue(o[d])),u[d]&&(p.push(d),f[d]=this.id(u[d]));if(p.length===0)return this.statements;if(p.length===1)return d=p[0],c=this.index[d][f[d]],c&&l&&c.length>1&&(c=c.slice(0,1)),c=c||[],c;var h=1e10,_,m;for(m=0;m<p.length;m++){if(d=p[m],c=this.index[d][f[d]],!c)return[];c.length<h&&(h=c.length,_=m)}for(var y=p[_],F=this.index[y][f[y]],T=p.slice(0,_).concat(p.slice(_+1)),N=[],b=["subject","predicate","object","why"],k=0;k<F.length;k++){var A=F[k];for(m=0;m<T.length;m++)if(d=T[m],!this.canon(A[b[d]]).equals(u[d])){A=null;break}if(A!=null&&(N.push(A),l))break}return N}},{key:"uris",value:function(r){var n=this.canon(r),s=this.aliases[this.id(n)];if(!n.value)return[];var a=[n.value];if(s)for(var l=0;l<s.length;l++)a.push(s[l].uri);return a}},{key:"serialize",value:function(r,n,s,a){var l,o=(l=a)!==null&&l!==void 0&&l.namespaces?Gi(Gi({},this.namespaces),a.namespaces):Gi({},this.namespaces);return a=Gi(Gi({},a||{}),{},{namespaces:o}),sa(s,this,r,n,void 0,a)}}],[{key:"defaultGraphURI",get:function(){return ra}}])}(n_);qe(_a,"handleRDFType",void 0);_a.handleRDFType=a_;function ea(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=z2(i))||e){t&&(i=t);var r=0,n=function(){};return{s:n,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){t=t.call(i)},n:function(){var u=t.next();return s=u.done,u},e:function(u){a=!0,l=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(a)throw l}}}}function z2(i,e){if(i){if(typeof i=="string")return $u(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $u(i,e)}}function $u(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=i[t];return r}var ei=yr("http://www.w3.org/1999/02/22-rdf-syntax-ns#");function H2(i,e,t,r){var n=ea(i.statementsMatching(t,null,null,r)),s;try{for(n.s();!(s=n.n()).done;){var a=s.value,l=new ni(e,a.predicate,a.object,r);i.remove(a),i.add(l)}}catch(h){n.e(h)}finally{n.f()}var o=ea(i.statementsMatching(null,t,null,r)),u;try{for(o.s();!(u=o.n()).done;){var f=u.value;i.remove(f),i.add(new ni(f.subject,e,f.object,r))}}catch(h){o.e(h)}finally{o.f()}var p=ea(i.statementsMatching(null,null,t,r)),d;try{for(p.s();!(d=p.n()).done;){var c=d.value;i.remove(c),i.add(new ni(c.subject,c.predicate,e,r))}}catch(h){p.e(h)}finally{p.f()}}function x2(i,e){var t=ei("nil"),r=ea(i.statementsMatching(t,null,null,e)),n;try{for(r.s();!(n=r.n()).done;){var s=n.value;i.remove(s);var a=new qn;i.add(new ni(a,s.predicate,s.object,e))}}catch(p){r.e(p)}finally{r.f()}var l=ea(i.statementsMatching(null,null,t,e)),o;try{for(l.s();!(o=l.n()).done;){var u=o.value;if(!u.predicate.sameTerm(ei("rest"))){i.remove(u);var f=new qn;i.add(new ni(u.subject,u.predicate,f,e))}}}catch(p){l.e(p)}finally{l.f()}}function X2(i,e){function t(n,s,a){var l=i.statementsMatching(n,ei("rest"),null,e);if(l.length!==1)throw new Error("Bad list structure: no rest at ".concat(n));var o=i.statementsMatching(n,ei("first"),null,e);if(o.length!==1)throw new Error("Bad list structure: rest but ".concat(o.length," firsts at ").concat(n));var u=o[0].object,f=[u].concat(s),p=a.concat(l).concat(o),d=i.statementsMatching(null,ei("rest"),n,e);if(d.length===0){var c=new qn(f);i.remove(p),H2(i,c,n,e);return}if(d.length!==1)throw new Error("Bad list structure: ".concat(d.length," pres at ").concat(n));var h=d[0].subject;if(h.termType!=="BlankNode")throw new Error("Bad list element node ".concat(h," type: ").concat(h.termType," "));t(h,f,p)}x2(i,e);var r=i.statementsMatching(null,ei("rest"),ei("nil"),e);r.forEach(function(n){if(n.subject.termType!=="BlankNode")throw new Error("Bad list element node ".concat(n.subject," type: ").concat(n.subject.termType," "));t(n.subject,[],[])})}function G2(i){return encodeURI(i)}var Q2={encode:function(e){e=e.replace(/\r\n/g,`
`);for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(n&63|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(n&63|128))}return t},decode:function(e){for(var t="",r=0;r<e.length;){var n=e.charCodeAt(r);n<128?(t+=String.fromCharCode(n),r++):n>191&&n<224?(t+=String.fromCharCode((n&31)<<6|e.charCodeAt(r+1)&63),r+=2):(t+=String.fromCharCode((n&15)<<12|(e.charCodeAt(r+1)&63)<<6|e.charCodeAt(r+2)&63),r+=3)}return t}},xs="http://www.w3.org/2000/10/swap/log#",ur=function(e){return e},fr=function(e){return e},Qi=function(e){if(e.length>0)throw"missing.js: oops nnonempty dict not imp";return[]},Lr=function(e){return e.length},Xs=function(e,t,r){if(typeof e.slice>"u")throw"@@ mising.js: No .slice function for "+e+" of type "+Rr(e);return typeof r>"u"||r==null?e.slice(t):e.slice(t,r)},Yi=Error("dummy error stop iteration"),Ba=function(e){return this.last=0,this.li=e,this.next=function(){if(this.last==this.li.length)throw Yi;return this.li[this.last++]},this},Gs=function(e,t){return e.indexOf(t)},Kn=function(e,t){if(!e)throw t?"python Assertion failed: "+t:"(python) Assertion failed."},$2=function(e){return String.fromCharCode(e)};String.prototype.encode=function(i){if(i!="utf-8")throw"UTF8_converter: can only do utf-8";return Q2.encode(this)};String.prototype.decode=function(i){if(i!="utf-8")throw"UTF8_converter: can only do utf-8";return this};var Qs=function(e,t){return Mr(t,e)},W2=null,Y2="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",Wu="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",Yu="http://www.w3.org/2002/07/owl#sameAs",J2="#",K2="http://www.w3.org/2001/XMLSchema#integer",Z2="http://www.w3.org/2001/XMLSchema#double",eb="http://www.w3.org/2001/XMLSchema#decimal",tb="http://www.w3.org/2001/XMLSchema#date",rb="http://www.w3.org/2001/XMLSchema#dateTime",s_=`	\r
 !"#$%&'()*.,+/;<=>?@[\\]^\`{|}~`,Zn=s_+":",$s=new RegExp("^([-+]?[0-9]+)(\\.[0-9]+)?(e[-+]?[0-9]+)?","g"),Ju=new RegExp("^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9](T[0-9][0-9]:[0-9][0-9](:[0-9][0-9](\\.[0-9]*)?)?)?Z?"),Ws=new RegExp('[\\\\\\r\\n\\"]',"g"),Ys=new RegExp("^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*","g");function Wl(i,e,t,r,n,s,a,l){return new nb(i,e,t,r,n,s,a,l)}var nb=function(){function i(e,t,r,n,s,a,l,o){Jt(this,i),typeof t>"u"&&(t=null),typeof r>"u"&&(r=""),typeof n>"u"&&(n=null),typeof s>"u"&&(s=""),typeof l>"u"&&(l=""),typeof o>"u"&&(o=null),this._bindings=new Qi([]),this._flags=l,r!=""&&(Kn(r.indexOf(":")>=0,"Document URI not absolute: "+r),this._bindings[""]=r+"#"),this._store=e,s&&e.setGenPrefix(s),this._thisDoc=r,this.source=e.sym(r),this.lines=0,this.statementCount=0,this.hasNil=!1,this.startOfLine=0,this.previousLine=0,this._genPrefix=s,this.keywords=new fr(["a","this","bind","has","is","of","true","false"]),this.keywordsSet=0,this._anonymousNodes=new Qi([]),this._variables=new Qi([]),this._parentVariables=new Qi([]),this._reason=o,this._reason2=null,n?this._baseURI=n:r?this._baseURI=r:this._baseURI=null,Kn(!this._baseURI||this._baseURI.indexOf(":")>=0),this._genPrefix||(this._thisDoc?this._genPrefix=this._thisDoc+"#_g":this._genPrefix=RDFSink_uniqueURI()),t==null?this._thisDoc?this._formula=e.formula(r+"#_formula"):this._formula=e.formula():this._formula=t,this._context=this._formula,this._parentContext=null}return Yt(i,[{key:"here",value:function(t){return this._genPrefix+"_L"+this.lines+"C"+(t-this.startOfLine+1)}},{key:"formula",value:function(){return this._formula}},{key:"loadStream",value:function(t){return this.loadBuf(t.read())}},{key:"loadBuf",value:function(t){return this.startDoc(),this.feed(t),this.endDoc()}},{key:"feed",value:function(t){for(var r=t.decode("utf-8"),n=0;n>=0;){var s=this.skipSpace(r,n);if(s<0)return;var n=this.directiveOrStatement(r,s);if(n<0)throw st(this._thisDoc,this.lines,r,s,"expected directive or statement")}}},{key:"directiveOrStatement",value:function(t,r){var n=this.skipSpace(t,r);if(n<0)return n;var s=this.directive(t,n);if(s>=0)return this.checkDot(t,s);var s=this.statement(t,n);return s>=0?this.checkDot(t,s):s}},{key:"tok",value:function(t,r,n){if(r.slice(n,n+1)=="@")var n=n+1;else if(qr(this.keywords,t)<0)return-1;var s=n+Lr(t);return r.slice(n,s)==t&&s_.indexOf(r.charAt(s))>=0?s:-1}},{key:"directive",value:function(t,r){var u=this.skipSpace(t,r);if(u<0)return u;var n=new fr([]),u=this.tok("bind",t,r);if(u>0)throw st(this._thisDoc,this.lines,t,r,"keyword bind is obsolete: use @prefix");var u=this.tok("keywords",t,r);if(u>0){var r=this.commaSeparatedList(t,u,n,!1);if(r<0)throw st(this._thisDoc,this.lines,t,r,"'@keywords' needs comma separated list of words");return this.setKeywords(Xs(n,null,null)),r}var u=this.tok("forAll",t,r);if(u>0){var r=this.commaSeparatedList(t,u,n,!0);if(r<0)throw st(this._thisDoc,this.lines,t,r,"Bad variable list after @forAll");var s=new Ba(n);try{for(;;){var a=s.next();(qr(this._variables,a)<0||qr(this._parentVariables,a)>=0)&&(this._variables[a]=this._context.newUniversal(a))}}catch(p){if(p!=Yi)throw p}return r}var u=this.tok("forSome",t,r);if(u>0){var r=this.commaSeparatedList(t,u,n,this.uri_ref2);if(r<0)throw st(this._thisDoc,this.lines,t,r,"Bad variable list after @forSome");var s=new Ba(n);try{for(;;){var a=s.next();this._context.declareExistential(a)}}catch(d){if(d!=Yi)throw d}return r}var u=this.tok("prefix",t,r);if(u>=0){var l=new fr([]),r=this.qname(t,u,l);if(r<0)throw st(this._thisDoc,this.lines,t,u,"expected qname after @prefix");var u=this.uri_ref2(t,r,l);if(u<0)throw st(this._thisDoc,this.lines,t,r,"expected <uriref> after @prefix _qname_");var o=l[1].uri;if(this._baseURI)var o=Qs(this._baseURI,o);else Kn(o.indexOf(":")>=0,"With no base URI, cannot handle relative URI for NS");return Kn(o.indexOf(":")>=0),this._bindings[l[0][0]]=o,this.bind(l[0][0],G2(o)),u}var u=this.tok("base",t,r);if(u>=0){var l=new fr([]),r=this.uri_ref2(t,u,l);if(r<0)throw st(this._thisDoc,this.lines,t,u,"expected <uri> after @base ");var o=l[0].uri;if(this._baseURI)var o=Qs(this._baseURI,o);else throw st(this._thisDoc,this.lines,t,u,"With no previous base URI, cannot use relative URI in @base  <"+o+">");return Kn(o.indexOf(":")>=0),this._baseURI=o,r}return-1}},{key:"bind",value:function(t,r){t==""||this._store.setPrefixForURI(t,r)}},{key:"setKeywords",value:function(t){t==null?this.keywordsSet=0:(this.keywords=t,this.keywordsSet=1)}},{key:"startDoc",value:function(){}},{key:"endDoc",value:function(){return this.hasNil&&this._store.rdfFactory.supports.COLLECTIONS&&X2(this._store,this.source),this._formula}},{key:"makeStatement",value:function(t){t[0].add(t[2],t[1],t[3],this.source),(t[2].uri&&t[2].uri===Wu||t[3].uri&&t[3].uri===Wu)&&(this.hasNil=!0),this.statementCount+=1}},{key:"statement",value:function(t,s){var n=new fr([]),s=this.object(t,s,n);if(s<0)return s;var a=this.property_list(t,s,n[0]);if(a<0)throw st(this._thisDoc,this.lines,t,s,"expected propertylist");return a}},{key:"subject",value:function(t,r,n){return this.item(t,r,n)}},{key:"verb",value:function(t,r,n){var a=this.skipSpace(t,r);if(a<0)return a;var s=new fr([]),a=this.tok("has",t,r);if(a>=0){var r=this.prop(t,a,s);if(r<0)throw st(this._thisDoc,this.lines,t,a,"expected property after 'has'");return n.push(new ur(["->",s[0]])),r}var a=this.tok("is",t,r);if(a>=0){var r=this.prop(t,a,s);if(r<0)throw st(this._thisDoc,this.lines,t,a,"expected <property> after 'is'");var a=this.skipSpace(t,r);if(a<0)throw st(this._thisDoc,this.lines,t,r,"End of file found, expected property after 'is'");var r=a,a=this.tok("of",t,r);if(a<0)throw st(this._thisDoc,this.lines,t,r,"expected 'of' after 'is' <prop>");return n.push(new ur(["<-",s[0]])),a}var a=this.tok("a",t,r);if(a>=0)return n.push(new ur(["->",this._store.sym(Y2)])),a;if(t.slice(r,r+2)=="<=")return n.push(new ur(["<-",this._store.sym(xs+"implies")])),r+2;if(t.slice(r,r+1)=="=")return t.slice(r+1,r+2)==">"?(n.push(new ur(["->",this._store.sym(xs+"implies")])),r+2):(n.push(new ur(["->",this._store.sym(Yu)])),r+1);if(t.slice(r,r+2)==":=")return n.push(new ur(["->",xs+"becomes"])),r+2;var a=this.prop(t,r,s);if(a>=0)return n.push(new ur(["->",s[0]])),a;if(t.slice(r,r+2)==">-"||t.slice(r,r+2)=="<-")throw st(this._thisDoc,this.lines,t,a,">- ... -> syntax is obsolete.");return-1}},{key:"prop",value:function(t,r,n){return this.item(t,r,n)}},{key:"item",value:function(t,r,n){return this.path(t,r,n)}},{key:"blankNode",value:function(t){return this._context.bnode(t,this._reason2)}},{key:"path",value:function(t,r,n){var s=this.nodeOrLiteral(t,r,n);if(s<0)return s;for(;"!^.".indexOf(t.slice(s,s+1))>=0;){var a=t.slice(s,s+1);if(a=="."){var l=t.slice(s+1,s+2);if(!l||Zn.indexOf(l)>=0&&":?<[{(".indexOf(l)<0)break}var o=n.pop(),u=this.blankNode(this.here(s)),s=this.node(t,s+1,n);if(s<0)throw st(this._thisDoc,this.lines,t,s,"EOF found in middle of path syntax");var f=n.pop();a=="^"?this.makeStatement(new ur([this._context,f,u,o])):this.makeStatement(new ur([this._context,f,o,u])),n.push(u)}return s}},{key:"anonymousNode",value:function(t){var r=this._anonymousNodes[t];if(r)return r;var r=this._store.bnode(t);return this._anonymousNodes[t]=r,r}},{key:"node",value:function(t,l,n,s){typeof s>"u"&&(s=null);var a=s,k=this.skipSpace(t,l);if(k<0)return k;var l=k,o=t.slice(l,l+1);if(o=="["){var u=this.here(l),k=this.skipSpace(t,l+1);if(k<0)throw st(this._thisDoc,this.lines,t,l,"EOF after '['");if(t.slice(k,k+1)=="="){var l=k+1,f=new fr([]),k=this.objectList(t,l,f);if(k>=0){var a=f[0];if(Lr(f)>1){var p=new Ba(f);try{for(;;){var d=p.next();this.makeStatement(new ur([this._context,this._store.sym(Yu),a,d]))}}catch(w){if(w!=Yi)throw w}}var k=this.skipSpace(t,k);if(k<0)throw st(this._thisDoc,this.lines,t,l,"EOF when objectList expected after [ = ");if(t.slice(k,k+1)==";")var k=k+1}else throw st(this._thisDoc,this.lines,t,l,"objectList expected after [= ")}if(a==null)var a=this.blankNode(u);var l=this.property_list(t,k,a);if(l<0)throw st(this._thisDoc,this.lines,t,k,"property_list expected");var k=this.skipSpace(t,l);if(k<0)throw st(this._thisDoc,this.lines,t,l,"EOF when ']' expected after [ <propertyList>");if(t.slice(k,k+1)!="]")throw st(this._thisDoc,this.lines,t,k,"']' expected");return n.push(a),k+1}if(o=="{"){var c=t.slice(l+1,l+2);if(c=="$"){l+=1;for(var k=l+1,h=new fr([]),_=!0;;){var l=this.skipSpace(t,k);if(l<0)throw st(this._thisDoc,this.lines,t,l,"needed '$}', found end.");if(t.slice(l,l+2)=="$}"){var k=l+2;break}if(_)var _=!1;else if(t.slice(l,l+1)==",")l+=1;else throw st(this._thisDoc,this.lines,t,l,"expected: ','");var m=new fr([]),k=this.item(t,l,m);if(k<0)throw st(this._thisDoc,this.lines,t,l,"expected item in set or '$}'");h.push(m[0])}return n.push(this._store.newSet(h,this._context)),k}else{var k=l+1,y=this._parentContext;this._parentContext=this._context;var F=this._anonymousNodes,T=this._parentVariables;this._parentVariables=this._variables,this._anonymousNodes=new Qi([]),this._variables=this._variables.slice();var N=this._reason2;if(this._reason2=W2,a==null)var a=this._store.formula();for(this._context=a;;){var l=this.skipSpace(t,k);if(l<0)throw st(this._thisDoc,this.lines,t,l,"needed '}', found end.");if(t.slice(l,l+1)=="}"){var k=l+1;break}var k=this.directiveOrStatement(t,l);if(k<0)throw st(this._thisDoc,this.lines,t,l,"expected statement or '}'")}return this._anonymousNodes=F,this._variables=this._parentVariables,this._parentVariables=T,this._context=this._parentContext,this._reason2=N,this._parentContext=y,n.push(a.close()),k}}if(o=="("){var b=this._store.list,c=t.slice(l+1,l+2);if(c=="$"){var b=this._store.newSet;l+=1}for(var k=l+1,h=new fr([]);;){var l=this.skipSpace(t,k);if(l<0)throw st(this._thisDoc,this.lines,t,l,"needed ')', found end.");if(t.slice(l,l+1)==")"){var k=l+1;break}var m=new fr([]),k=this.item(t,l,m);if(k<0)throw st(this._thisDoc,this.lines,t,l,"expected item in list or ')'");h.push(m[0])}return n.push(b(h,this._context)),k}var k=this.tok("this",t,l);if(k>=0)throw st(this._thisDoc,this.lines,t,l,"Keyword 'this' was ancient N3. Now use @forSome and @forAll keywords.");var k=this.tok("true",t,l);if(k>=0)return n.push(!0),k;var k=this.tok("false",t,l);if(k>=0)return n.push(!1),k;if(a==null){var k=this.uri_ref2(t,l,n);if(k>=0)return k}return-1}},{key:"property_list",value:function(t,r,n){for(;;){var c=this.skipSpace(t,r);if(c<0)throw st(this._thisDoc,this.lines,t,r,"EOF found when expected verb in property list");if(t.slice(c,c+2)==":-"){var r=c+2,s=new fr([]),c=this.node(t,r,s,n);if(c<0)throw st(this._thisDoc,this.lines,t,r,"bad {} or () or [] node after :- ");var r=c;continue}var r=c,a=new fr([]),c=this.verb(t,r,a);if(c<=0)return r;var l=new fr([]),r=this.objectList(t,c,l);if(r<0)throw st(this._thisDoc,this.lines,t,c,"objectList expected");var o=new Ba(l);try{for(;;){var u=o.next(),f=a[0],p=f[0],d=f[1];p=="->"?this.makeStatement(new ur([this._context,d,n,u])):this.makeStatement(new ur([this._context,d,u,n]))}}catch(_){if(_!=Yi)throw _}var c=this.skipSpace(t,r);if(c<0)throw st(this._thisDoc,this.lines,t,c,"EOF found in list of objects");if(t.slice(r,r+1)!=";")return r;var r=r+1}}},{key:"commaSeparatedList",value:function(t,r,n,s){var a=this.skipSpace(t,r);if(a<0)throw st(this._thisDoc,this.lines,t,a,"EOF found expecting comma sep list");if(t.charAt(a)==".")return r;if(s)var a=this.uri_ref2(t,a,n);else var a=this.bareWord(t,a,n);if(a<0)return-1;for(;;){var r=this.skipSpace(t,a);if(r<0)return r;var l=t.slice(r,r+1);if(l!=",")return l!="."?-1:r;if(s)var a=this.uri_ref2(t,r+1,n);else var a=this.bareWord(t,r+1,n);if(a<0)throw st(this._thisDoc,this.lines,t,a,"bad list content")}}},{key:"objectList",value:function(t,s,n){var s=this.object(t,s,n);if(s<0)return-1;for(;;){var a=this.skipSpace(t,s);if(a<0)throw st(this._thisDoc,this.lines,t,a,"EOF found after object");if(t.slice(a,a+1)!=",")return a;var s=this.object(t,a+1,n);if(s<0)return s}}},{key:"checkDot",value:function(t,r){var n=this.skipSpace(t,r);if(n<0)return n;if(t.slice(n,n+1)==".")return n+1;if(t.slice(n,n+1)=="}"||t.slice(n,n+1)=="]")return n;throw st(this._thisDoc,this.lines,t,n,"expected '.' or '}' or ']' at end of statement")}},{key:"uri_ref2",value:function(t,d,n){var s=new fr([]),a=this.qname(t,d,s);if(a>=0){var l=s[0],o=l[0],u=l[1];if(o==null){Kn(0,"not used?");var f=this._baseURI+J2}else{var f=this._bindings[o];if(!f){if(o=="_")return n.push(this.anonymousNode(u)),a;throw st(this._thisDoc,this.lines,t,d,"Prefix "+o+" not bound.")}}var p=this._store.sym(f+u);return qr(this._variables,p)>=0?n.push(this._variables[p]):n.push(p),a}var d=this.skipSpace(t,d);if(d<0)return-1;if(t.charAt(d)=="?"){var c=new fr([]),a=this.variable(t,d,c);return a>0?(n.push(c[0]),a):-1}else if(t.charAt(d)=="<"){for(var d=d+1,h=d;d<Lr(t);){if(t.charAt(d)==">"){var _=t.slice(h,d);if(this._baseURI)var _=Qs(this._baseURI,_);else Kn(_.indexOf(":")>=0,"With no base URI, cannot deal with relative URIs");if(t.slice(d-1,d)=="#"&&Xs(_,-1,null)!="#")var _=_+"#";var p=this._store.sym(_);return qr(this._variables,p)>=0?n.push(this._variables[p]):n.push(p),d+1}var d=d+1}throw st(this._thisDoc,this.lines,t,a,"unterminated URI reference")}else if(this.keywordsSet){var c=new fr([]),a=this.bareWord(t,d,c);if(a<0)return-1;if(qr(this.keywords,c[0])>=0)throw st(this._thisDoc,this.lines,t,d,'Keyword "'+c[0]+'" not allowed here.');return n.push(this._store.sym(this._bindings[""]+c[0])),a}else return-1}},{key:"skipSpace",value:function(t,r){for(var n=` 
\r	\f\v            ​\u2028\u2029　`,s=r||0;s<t.length;s++){var a=t.charAt(s);if(n.indexOf(a)<0)if(t.charAt(s)==="#")for(;;s++){if(s===t.length)return-1;if(t.charAt(s)===`
`){this.lines=this.lines+1;break}}else return s;else t.charAt(s)===`
`&&(this.lines=this.lines+1)}return-1}},{key:"variable",value:function(t,a,n){var s=this.skipSpace(t,a);if(s<0||t.slice(s,s+1)!="?")return-1;var s=s+1,a=s;if("0123456789-".indexOf(t.charAt(s))>=0)throw st(this._thisDoc,this.lines,t,s,"Varible name can't start with '"+t.charAt(s)+"s'");for(;a<Lr(t)&&Zn.indexOf(t.charAt(a))<0;)var a=a+1;if(this._parentContext==null)throw st(this._thisDoc,this.lines,t,s,"Can't use ?xxx syntax for variable in outermost level: "+t.slice(s-1,a));return n.push(this._store.variable(t.slice(s,a))),a}},{key:"bareWord",value:function(t,l,n){var s=this.skipSpace(t,l);if(s<0)return-1;var a=t.charAt(s);if("0123456789-".indexOf(a)>=0||Zn.indexOf(a)>=0)return-1;for(var l=s;l<Lr(t)&&Zn.indexOf(t.charAt(l))<0;)var l=l+1;return n.push(t.slice(s,l)),l}},{key:"qname",value:function(t,s,n){var s=this.skipSpace(t,s);if(s<0)return-1;var a=t.charAt(s);if("0123456789-+".indexOf(a)>=0)return-1;if(Zn.indexOf(a)<0)for(var l=a,s=s+1;s<Lr(t);){var a=t.charAt(s);if(Zn.indexOf(a)<0)var l=l+a,s=s+1;else break}else var l="";if(s<Lr(t)&&t.charAt(s)==":"){for(var o=l,s=s+1,l="";s<Lr(t);){var a=t.charAt(s);if(Zn.indexOf(a)<0)var l=l+a,s=s+1;else break}return n.push(new ur([o,l])),s}else return l&&this.keywordsSet&&qr(this.keywords,l)<0?(n.push(new ur(["",l])),s):-1}},{key:"object",value:function(t,r,n){var s=this.subject(t,r,n);if(s>=0)return s;var s=this.skipSpace(t,r);if(s<0)return-1;var r=s,a=null,l=t.charAt(r);if(l=='"'||l=="'"){t.slice(r,r+3==l+l)?a=l+l+l:a=l;var r=r+Lr(a),o=this.strconst(t,r,a),s=o[0],u=o[1];return n.push(this._store.literal(u)),s}else return-1}},{key:"nodeOrLiteral",value:function(t,r,n){var s=this.node(t,r,n);if(s>=0)return s;var s=this.skipSpace(t,r);if(s<0)return-1;var r=s,a=t.charAt(r);if("-+0987654321".indexOf(a)>=0){Ju.lastIndex=0;var l=Ju.exec(t.slice(r));if(l!=null){var o=l[0];s=r+o.length,o.indexOf("T")>=0?n.push(this._store.literal(o,this._store.sym(rb))):n.push(this._store.literal(o,this._store.sym(tb)))}else{$s.lastIndex=0;var l=$s.exec(t.slice(r));if(l==null)throw st(this._thisDoc,this.lines,t,r,"Bad number or date syntax");s=r+$s.lastIndex;var o=t.slice(r,s);o.indexOf("e")>=0?n.push(this._store.literal(parseFloat(o),this._store.sym(Z2))):t.slice(r,s).indexOf(".")>=0?n.push(this._store.literal(parseFloat(o),this._store.sym(eb))):n.push(this._store.literal(parseInt(o),this._store.sym(K2)))}return s}if(t.charAt(r)=='"'){if(t.slice(r,r+3)=='"""')var u='"""';else var u='"';var r=r+Lr(u),f=null,p=this.strconst(t,r,u),s=p[0],d=p[1],c=null;if(t.slice(s,s+1)=="@"){Ys.lastIndex=0;var l=Ys.exec(t.slice(s+1));if(l==null)throw st(this._thisDoc,startline,t,r,"Bad language code syntax on string literal, after @");var r=Ys.lastIndex+s+1,c=t.slice(s+1,r),s=r}if(t.slice(s,s+2)=="^^")var h=new fr([]),s=this.uri_ref2(t,s+2,h),f=h[0];return n.push(this._store.literal(d,c||f)),s}else return-1}},{key:"strconst",value:function(t,r,n){for(var s=r,a="",l=this.lines;s<Lr(t);){var r=s+Lr(n);if(t.slice(s,r)==n)return new ur([r,a]);if(t.charAt(s)=='"'){var a=a+'"',s=s+1;continue}Ws.lastIndex=0;var o=Ws.exec(t.slice(s));if(!o)throw st(this._thisDoc,l,t,s,"Closing quote missing in string at ^ in "+t.slice(s-20,s)+"^"+t.slice(s,s+20));var r=s+Ws.lastIndex-1,a=a+t.slice(s,r),u=t.charAt(r);if(u=='"'){var s=r;continue}else if(u=="\r"){var s=r+1;continue}else if(u==`
`){if(n=='"')throw st(this._thisDoc,l,t,r,"newline found in string literal");this.lines=this.lines+1;var a=a+u,s=r+1;this.previousLine=this.startOfLine,this.startOfLine=s}else if(u=="\\"){var s=r+1,u=t.slice(s,s+1);if(!u)throw st(this._thisDoc,l,t,r,"unterminated string literal (2)");var f=Gs('abfrtvn\\"',u);if(f>=0)var p=`a\b\f\r	\v
\\"`.charAt(f),a=a+p,s=s+1;else if(u=="u")var d=this.uEscape(t,s+1,l),s=d[0],u=d[1],a=a+u;else if(u=="U")var d=this.UEscape(t,s+1,l),s=d[0],u=d[1],a=a+u;else throw st(this._thisDoc,this.lines,t,r,"bad escape")}}throw st(this._thisDoc,this.lines,t,r,"unterminated string literal")}},{key:"uEscape",value:function(t,r,n){for(var s=r,a=0,l=0;a<4;){var o=t.slice(s,s+1),u=o.toLowerCase(),s=s+1;if(u=="")throw st(this._thisDoc,n,t,r,"unterminated string literal(3)");var f=Gs("0123456789abcdef",u);if(f<0)throw st(this._thisDoc,n,t,r,"bad string literal hex escape");var l=l*16+f,a=a+1}var p=String.fromCharCode(l);return new ur([s,p])}},{key:"UEscape",value:function(t,r,n){for(var s=r,a=0,l="\\U";a<8;){var o=t.slice(s,s+1),u=o.toLowerCase(),s=s+1;if(u=="")throw st(this._thisDoc,n,t,r,"unterminated string literal(3)");var f=Gs("0123456789abcdef",u);if(f<0)throw st(this._thisDoc,n,t,r,"bad string literal hex escape");var l=l+u,a=a+1}var p=$2("0x"+Xs(l,2,10)-0);return new ur([s,p])}}])}();function st(i,e,t,r,n){var s=e+1,a="Line "+s+" of <"+i+">: Bad syntax: "+n+`
at: "`+t.slice(r,r+30)+'"',l=new SyntaxError(a,i,s);return l.lineNo=s,l.characterInFile=r,l.syntaxProblem=n,l}function Ku(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,r)}return t}function Zu(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ku(Object(t),!0).forEach(function(r){qe(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Ku(Object(t)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}var wl=Zu(Zu({},xr),{},{supports:qe(qe(qe(qe(qe(qe(qe({},Cr.collections,!0),Cr.defaultGraphType,!1),Cr.equalsMethod,!0),Cr.identity,!1),Cr.id,!0),Cr.reversibleId,!1),Cr.variableType,!0),collection:function(e){return new qn(e)},id:function(e){var t=this;return Ul(e)?"( ".concat(e.elements.map(function(r){return t.id(r)}).join(", ")," )"):Bg(e)?li.toString(e):xr.id(e)},termToNQ:function(e){return e.termType===Hn?qn.toNT(e):xr.termToNQ(e)}});function Yl(i,e){return typeof e=="string"?i.rdfFactory.literal(e):Object.prototype.hasOwnProperty.call(e,"@list")?i.rdfFactory.supports.COLLECTIONS===!0?ab(i,e["@list"]):ib(i,e):Object.prototype.hasOwnProperty.call(e,"@id")?Jl(i,e):Object.prototype.hasOwnProperty.call(e,"@language")?i.rdfFactory.literal(e["@value"],e["@language"]):Object.prototype.hasOwnProperty.call(e,"@type")?i.rdfFactory.literal(e["@value"],i.rdfFactory.namedNode(e["@type"])):Object.prototype.hasOwnProperty.call(e,"@value")?i.rdfFactory.literal(e["@value"]):i.rdfFactory.literal(e)}function ib(i,e){var t=e["@id"]?Jl(i,e):i.rdfFactory.blankNode(),r=e["@list"].map(function(s){return Yl(i,s)}),n=t_(i.rdfFactory,t,r);return i.addAll(n),t}function ab(i,e){if(!Array.isArray(e))throw new TypeError("Object must be an array");return i.rdfFactory.collection(e.map(function(t){return Yl(i,t)}))}function l_(i,e,t,r){var n=t&&Object.prototype.hasOwnProperty.call(t,"termType")?t.value:t;return Rm(()=>import("../chunks/jsonld.CYnguqZs.js").then(s=>s.j),__vite__mapDeps([0,1,2]),import.meta.url).then(function(s){return s.flatten(JSON.parse(i),null,{base:n})}).then(function(s){return s.reduce(function(a,l){return e=o_(e,t,l),e},e)}).then(r).catch(r)}function Jl(i,e){return e["@id"].startsWith("_:")?i.rdfFactory.blankNode(e["@id"].substring(2)):i.rdfFactory.namedNode(e["@id"])}function o_(i,e,t){for(var r=t["@id"]?Jl(i,t):i.rdfFactory.blankNode(),n=0,s=Object.keys(t);n<s.length;n++){var a=s[n];if(a!=="@id"){if(a=="@graph")for(var l=r,o=t[a],u=0;u<o.length;u++)i=o_(i,l,o[u]);var f=t[a];if(Array.isArray(f))for(var p=0;p<f.length;p++)i.addStatement(ef(i,r,a,f[p],e));else i.addStatement(ef(i,r,a,f,e))}}return i}function ef(i,e,t,r,n){var s,a;return t==="@type"?(s=i.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),a=i.rdfFactory.namedNode(r)):(s=i.rdfFactory.namedNode(t),a=Yl(i,r)),i.rdfFactory.quad(e,s,a,i.rdfFactory.namedNode(n))}var u_={},bs={};bs.byteLength=ob;bs.toByteArray=fb;bs.fromByteArray=hb;var ln=[],jr=[],sb=typeof Uint8Array<"u"?Uint8Array:Array,Js="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var bi=0,lb=Js.length;bi<lb;++bi)ln[bi]=Js[bi],jr[Js.charCodeAt(bi)]=bi;jr[45]=62;jr[95]=63;function f_(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=i.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function ob(i){var e=f_(i),t=e[0],r=e[1];return(t+r)*3/4-r}function ub(i,e,t){return(e+t)*3/4-t}function fb(i){var e,t=f_(i),r=t[0],n=t[1],s=new sb(ub(i,r,n)),a=0,l=n>0?r-4:r,o;for(o=0;o<l;o+=4)e=jr[i.charCodeAt(o)]<<18|jr[i.charCodeAt(o+1)]<<12|jr[i.charCodeAt(o+2)]<<6|jr[i.charCodeAt(o+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return n===2&&(e=jr[i.charCodeAt(o)]<<2|jr[i.charCodeAt(o+1)]>>4,s[a++]=e&255),n===1&&(e=jr[i.charCodeAt(o)]<<10|jr[i.charCodeAt(o+1)]<<4|jr[i.charCodeAt(o+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function cb(i){return ln[i>>18&63]+ln[i>>12&63]+ln[i>>6&63]+ln[i&63]}function db(i,e,t){for(var r,n=[],s=e;s<t;s+=3)r=(i[s]<<16&16711680)+(i[s+1]<<8&65280)+(i[s+2]&255),n.push(cb(r));return n.join("")}function hb(i){for(var e,t=i.length,r=t%3,n=[],s=16383,a=0,l=t-r;a<l;a+=s)n.push(db(i,a,a+s>l?l:a+s));return r===1?(e=i[t-1],n.push(ln[e>>2]+ln[e<<4&63]+"==")):r===2&&(e=(i[t-2]<<8)+i[t-1],n.push(ln[e>>10]+ln[e>>4&63]+ln[e<<2&63]+"=")),n.join("")}var Kl={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Kl.read=function(i,e,t,r,n){var s,a,l=n*8-r-1,o=(1<<l)-1,u=o>>1,f=-7,p=t?n-1:0,d=t?-1:1,c=i[e+p];for(p+=d,s=c&(1<<-f)-1,c>>=-f,f+=l;f>0;s=s*256+i[e+p],p+=d,f-=8);for(a=s&(1<<-f)-1,s>>=-f,f+=r;f>0;a=a*256+i[e+p],p+=d,f-=8);if(s===0)s=1-u;else{if(s===o)return a?NaN:(c?-1:1)*(1/0);a=a+Math.pow(2,r),s=s-u}return(c?-1:1)*a*Math.pow(2,s-r)};Kl.write=function(i,e,t,r,n,s){var a,l,o,u=s*8-n-1,f=(1<<u)-1,p=f>>1,d=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,c=r?0:s-1,h=r?1:-1,_=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(o=Math.pow(2,-a))<1&&(a--,o*=2),a+p>=1?e+=d/o:e+=d*Math.pow(2,1-p),e*o>=2&&(a++,o/=2),a+p>=f?(l=0,a=f):a+p>=1?(l=(e*o-1)*Math.pow(2,n),a=a+p):(l=e*Math.pow(2,p-1)*Math.pow(2,n),a=0));n>=8;i[t+c]=l&255,c+=h,l/=256,n-=8);for(a=a<<n|l,u+=n;u>0;i[t+c]=a&255,c+=h,a/=256,u-=8);i[t+c-h]|=_*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){const e=bs,t=Kl,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=l,i.SlowBuffer=F,i.INSPECT_MAX_BYTES=50;const n=2147483647;i.kMaxLength=n,l.TYPED_ARRAY_SUPPORT=s(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const V=new Uint8Array(1),I={foo:function(){return 42}};return Object.setPrototypeOf(I,Uint8Array.prototype),Object.setPrototypeOf(V,I),V.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function a(V){if(V>n)throw new RangeError('The value "'+V+'" is invalid for option "size"');const I=new Uint8Array(V);return Object.setPrototypeOf(I,l.prototype),I}function l(V,I,O){if(typeof V=="number"){if(typeof I=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(V)}return o(V,I,O)}l.poolSize=8192;function o(V,I,O){if(typeof V=="string")return d(V,I);if(ArrayBuffer.isView(V))return h(V);if(V==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V);if(pt(V,ArrayBuffer)||V&&pt(V.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(pt(V,SharedArrayBuffer)||V&&pt(V.buffer,SharedArrayBuffer)))return _(V,I,O);if(typeof V=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const $=V.valueOf&&V.valueOf();if($!=null&&$!==V)return l.from($,I,O);const de=m(V);if(de)return de;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof V[Symbol.toPrimitive]=="function")return l.from(V[Symbol.toPrimitive]("string"),I,O);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V)}l.from=function(V,I,O){return o(V,I,O)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function u(V){if(typeof V!="number")throw new TypeError('"size" argument must be of type number');if(V<0)throw new RangeError('The value "'+V+'" is invalid for option "size"')}function f(V,I,O){return u(V),V<=0?a(V):I!==void 0?typeof O=="string"?a(V).fill(I,O):a(V).fill(I):a(V)}l.alloc=function(V,I,O){return f(V,I,O)};function p(V){return u(V),a(V<0?0:y(V)|0)}l.allocUnsafe=function(V){return p(V)},l.allocUnsafeSlow=function(V){return p(V)};function d(V,I){if((typeof I!="string"||I==="")&&(I="utf8"),!l.isEncoding(I))throw new TypeError("Unknown encoding: "+I);const O=T(V,I)|0;let $=a(O);const de=$.write(V,I);return de!==O&&($=$.slice(0,de)),$}function c(V){const I=V.length<0?0:y(V.length)|0,O=a(I);for(let $=0;$<I;$+=1)O[$]=V[$]&255;return O}function h(V){if(pt(V,Uint8Array)){const I=new Uint8Array(V);return _(I.buffer,I.byteOffset,I.byteLength)}return c(V)}function _(V,I,O){if(I<0||V.byteLength<I)throw new RangeError('"offset" is outside of buffer bounds');if(V.byteLength<I+(O||0))throw new RangeError('"length" is outside of buffer bounds');let $;return I===void 0&&O===void 0?$=new Uint8Array(V):O===void 0?$=new Uint8Array(V,I):$=new Uint8Array(V,I,O),Object.setPrototypeOf($,l.prototype),$}function m(V){if(l.isBuffer(V)){const I=y(V.length)|0,O=a(I);return O.length===0||V.copy(O,0,0,I),O}if(V.length!==void 0)return typeof V.length!="number"||Ct(V.length)?a(0):c(V);if(V.type==="Buffer"&&Array.isArray(V.data))return c(V.data)}function y(V){if(V>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return V|0}function F(V){return+V!=V&&(V=0),l.alloc(+V)}l.isBuffer=function(I){return I!=null&&I._isBuffer===!0&&I!==l.prototype},l.compare=function(I,O){if(pt(I,Uint8Array)&&(I=l.from(I,I.offset,I.byteLength)),pt(O,Uint8Array)&&(O=l.from(O,O.offset,O.byteLength)),!l.isBuffer(I)||!l.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(I===O)return 0;let $=I.length,de=O.length;for(let Ee=0,Ae=Math.min($,de);Ee<Ae;++Ee)if(I[Ee]!==O[Ee]){$=I[Ee],de=O[Ee];break}return $<de?-1:de<$?1:0},l.isEncoding=function(I){switch(String(I).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(I,O){if(!Array.isArray(I))throw new TypeError('"list" argument must be an Array of Buffers');if(I.length===0)return l.alloc(0);let $;if(O===void 0)for(O=0,$=0;$<I.length;++$)O+=I[$].length;const de=l.allocUnsafe(O);let Ee=0;for($=0;$<I.length;++$){let Ae=I[$];if(pt(Ae,Uint8Array))Ee+Ae.length>de.length?(l.isBuffer(Ae)||(Ae=l.from(Ae)),Ae.copy(de,Ee)):Uint8Array.prototype.set.call(de,Ae,Ee);else if(l.isBuffer(Ae))Ae.copy(de,Ee);else throw new TypeError('"list" argument must be an Array of Buffers');Ee+=Ae.length}return de};function T(V,I){if(l.isBuffer(V))return V.length;if(ArrayBuffer.isView(V)||pt(V,ArrayBuffer))return V.byteLength;if(typeof V!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof V);const O=V.length,$=arguments.length>2&&arguments[2]===!0;if(!$&&O===0)return 0;let de=!1;for(;;)switch(I){case"ascii":case"latin1":case"binary":return O;case"utf8":case"utf-8":return Ot(V).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O*2;case"hex":return O>>>1;case"base64":return Qt(V).length;default:if(de)return $?-1:Ot(V).length;I=(""+I).toLowerCase(),de=!0}}l.byteLength=T;function N(V,I,O){let $=!1;if((I===void 0||I<0)&&(I=0),I>this.length||((O===void 0||O>this.length)&&(O=this.length),O<=0)||(O>>>=0,I>>>=0,O<=I))return"";for(V||(V="utf8");;)switch(V){case"hex":return W(this,I,O);case"utf8":case"utf-8":return S(this,I,O);case"ascii":return ne(this,I,O);case"latin1":case"binary":return J(this,I,O);case"base64":return w(this,I,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,I,O);default:if($)throw new TypeError("Unknown encoding: "+V);V=(V+"").toLowerCase(),$=!0}}l.prototype._isBuffer=!0;function b(V,I,O){const $=V[I];V[I]=V[O],V[O]=$}l.prototype.swap16=function(){const I=this.length;if(I%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let O=0;O<I;O+=2)b(this,O,O+1);return this},l.prototype.swap32=function(){const I=this.length;if(I%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let O=0;O<I;O+=4)b(this,O,O+3),b(this,O+1,O+2);return this},l.prototype.swap64=function(){const I=this.length;if(I%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let O=0;O<I;O+=8)b(this,O,O+7),b(this,O+1,O+6),b(this,O+2,O+5),b(this,O+3,O+4);return this},l.prototype.toString=function(){const I=this.length;return I===0?"":arguments.length===0?S(this,0,I):N.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(I){if(!l.isBuffer(I))throw new TypeError("Argument must be a Buffer");return this===I?!0:l.compare(this,I)===0},l.prototype.inspect=function(){let I="";const O=i.INSPECT_MAX_BYTES;return I=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(I+=" ... "),"<Buffer "+I+">"},r&&(l.prototype[r]=l.prototype.inspect),l.prototype.compare=function(I,O,$,de,Ee){if(pt(I,Uint8Array)&&(I=l.from(I,I.offset,I.byteLength)),!l.isBuffer(I))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof I);if(O===void 0&&(O=0),$===void 0&&($=I?I.length:0),de===void 0&&(de=0),Ee===void 0&&(Ee=this.length),O<0||$>I.length||de<0||Ee>this.length)throw new RangeError("out of range index");if(de>=Ee&&O>=$)return 0;if(de>=Ee)return-1;if(O>=$)return 1;if(O>>>=0,$>>>=0,de>>>=0,Ee>>>=0,this===I)return 0;let Ae=Ee-de,Je=$-O;const it=Math.min(Ae,Je),Ie=this.slice(de,Ee),Xe=I.slice(O,$);for(let Ze=0;Ze<it;++Ze)if(Ie[Ze]!==Xe[Ze]){Ae=Ie[Ze],Je=Xe[Ze];break}return Ae<Je?-1:Je<Ae?1:0};function k(V,I,O,$,de){if(V.length===0)return-1;if(typeof O=="string"?($=O,O=0):O>2147483647?O=2147483647:O<-2147483648&&(O=-2147483648),O=+O,Ct(O)&&(O=de?0:V.length-1),O<0&&(O=V.length+O),O>=V.length){if(de)return-1;O=V.length-1}else if(O<0)if(de)O=0;else return-1;if(typeof I=="string"&&(I=l.from(I,$)),l.isBuffer(I))return I.length===0?-1:A(V,I,O,$,de);if(typeof I=="number")return I=I&255,typeof Uint8Array.prototype.indexOf=="function"?de?Uint8Array.prototype.indexOf.call(V,I,O):Uint8Array.prototype.lastIndexOf.call(V,I,O):A(V,[I],O,$,de);throw new TypeError("val must be string, number or Buffer")}function A(V,I,O,$,de){let Ee=1,Ae=V.length,Je=I.length;if($!==void 0&&($=String($).toLowerCase(),$==="ucs2"||$==="ucs-2"||$==="utf16le"||$==="utf-16le")){if(V.length<2||I.length<2)return-1;Ee=2,Ae/=2,Je/=2,O/=2}function it(Xe,Ze){return Ee===1?Xe[Ze]:Xe.readUInt16BE(Ze*Ee)}let Ie;if(de){let Xe=-1;for(Ie=O;Ie<Ae;Ie++)if(it(V,Ie)===it(I,Xe===-1?0:Ie-Xe)){if(Xe===-1&&(Xe=Ie),Ie-Xe+1===Je)return Xe*Ee}else Xe!==-1&&(Ie-=Ie-Xe),Xe=-1}else for(O+Je>Ae&&(O=Ae-Je),Ie=O;Ie>=0;Ie--){let Xe=!0;for(let Ze=0;Ze<Je;Ze++)if(it(V,Ie+Ze)!==it(I,Ze)){Xe=!1;break}if(Xe)return Ie}return-1}l.prototype.includes=function(I,O,$){return this.indexOf(I,O,$)!==-1},l.prototype.indexOf=function(I,O,$){return k(this,I,O,$,!0)},l.prototype.lastIndexOf=function(I,O,$){return k(this,I,O,$,!1)};function L(V,I,O,$){O=Number(O)||0;const de=V.length-O;$?($=Number($),$>de&&($=de)):$=de;const Ee=I.length;$>Ee/2&&($=Ee/2);let Ae;for(Ae=0;Ae<$;++Ae){const Je=parseInt(I.substr(Ae*2,2),16);if(Ct(Je))return Ae;V[O+Ae]=Je}return Ae}function P(V,I,O,$){return Kt(Ot(I,V.length-O),V,O,$)}function B(V,I,O,$){return Kt(tr(I),V,O,$)}function D(V,I,O,$){return Kt(Qt(I),V,O,$)}function R(V,I,O,$){return Kt(At(I,V.length-O),V,O,$)}l.prototype.write=function(I,O,$,de){if(O===void 0)de="utf8",$=this.length,O=0;else if($===void 0&&typeof O=="string")de=O,$=this.length,O=0;else if(isFinite(O))O=O>>>0,isFinite($)?($=$>>>0,de===void 0&&(de="utf8")):(de=$,$=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ee=this.length-O;if(($===void 0||$>Ee)&&($=Ee),I.length>0&&($<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");de||(de="utf8");let Ae=!1;for(;;)switch(de){case"hex":return L(this,I,O,$);case"utf8":case"utf-8":return P(this,I,O,$);case"ascii":case"latin1":case"binary":return B(this,I,O,$);case"base64":return D(this,I,O,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,I,O,$);default:if(Ae)throw new TypeError("Unknown encoding: "+de);de=(""+de).toLowerCase(),Ae=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function w(V,I,O){return I===0&&O===V.length?e.fromByteArray(V):e.fromByteArray(V.slice(I,O))}function S(V,I,O){O=Math.min(V.length,O);const $=[];let de=I;for(;de<O;){const Ee=V[de];let Ae=null,Je=Ee>239?4:Ee>223?3:Ee>191?2:1;if(de+Je<=O){let it,Ie,Xe,Ze;switch(Je){case 1:Ee<128&&(Ae=Ee);break;case 2:it=V[de+1],(it&192)===128&&(Ze=(Ee&31)<<6|it&63,Ze>127&&(Ae=Ze));break;case 3:it=V[de+1],Ie=V[de+2],(it&192)===128&&(Ie&192)===128&&(Ze=(Ee&15)<<12|(it&63)<<6|Ie&63,Ze>2047&&(Ze<55296||Ze>57343)&&(Ae=Ze));break;case 4:it=V[de+1],Ie=V[de+2],Xe=V[de+3],(it&192)===128&&(Ie&192)===128&&(Xe&192)===128&&(Ze=(Ee&15)<<18|(it&63)<<12|(Ie&63)<<6|Xe&63,Ze>65535&&Ze<1114112&&(Ae=Ze))}}Ae===null?(Ae=65533,Je=1):Ae>65535&&(Ae-=65536,$.push(Ae>>>10&1023|55296),Ae=56320|Ae&1023),$.push(Ae),de+=Je}return j($)}const X=4096;function j(V){const I=V.length;if(I<=X)return String.fromCharCode.apply(String,V);let O="",$=0;for(;$<I;)O+=String.fromCharCode.apply(String,V.slice($,$+=X));return O}function ne(V,I,O){let $="";O=Math.min(V.length,O);for(let de=I;de<O;++de)$+=String.fromCharCode(V[de]&127);return $}function J(V,I,O){let $="";O=Math.min(V.length,O);for(let de=I;de<O;++de)$+=String.fromCharCode(V[de]);return $}function W(V,I,O){const $=V.length;(!I||I<0)&&(I=0),(!O||O<0||O>$)&&(O=$);let de="";for(let Ee=I;Ee<O;++Ee)de+=Ut[V[Ee]];return de}function x(V,I,O){const $=V.slice(I,O);let de="";for(let Ee=0;Ee<$.length-1;Ee+=2)de+=String.fromCharCode($[Ee]+$[Ee+1]*256);return de}l.prototype.slice=function(I,O){const $=this.length;I=~~I,O=O===void 0?$:~~O,I<0?(I+=$,I<0&&(I=0)):I>$&&(I=$),O<0?(O+=$,O<0&&(O=0)):O>$&&(O=$),O<I&&(O=I);const de=this.subarray(I,O);return Object.setPrototypeOf(de,l.prototype),de};function G(V,I,O){if(V%1!==0||V<0)throw new RangeError("offset is not uint");if(V+I>O)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(I,O,$){I=I>>>0,O=O>>>0,$||G(I,O,this.length);let de=this[I],Ee=1,Ae=0;for(;++Ae<O&&(Ee*=256);)de+=this[I+Ae]*Ee;return de},l.prototype.readUintBE=l.prototype.readUIntBE=function(I,O,$){I=I>>>0,O=O>>>0,$||G(I,O,this.length);let de=this[I+--O],Ee=1;for(;O>0&&(Ee*=256);)de+=this[I+--O]*Ee;return de},l.prototype.readUint8=l.prototype.readUInt8=function(I,O){return I=I>>>0,O||G(I,1,this.length),this[I]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(I,O){return I=I>>>0,O||G(I,2,this.length),this[I]|this[I+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(I,O){return I=I>>>0,O||G(I,2,this.length),this[I]<<8|this[I+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(I,O){return I=I>>>0,O||G(I,4,this.length),(this[I]|this[I+1]<<8|this[I+2]<<16)+this[I+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(I,O){return I=I>>>0,O||G(I,4,this.length),this[I]*16777216+(this[I+1]<<16|this[I+2]<<8|this[I+3])},l.prototype.readBigUInt64LE=Zt(function(I){I=I>>>0,He(I,"offset");const O=this[I],$=this[I+7];(O===void 0||$===void 0)&&fe(I,this.length-8);const de=O+this[++I]*2**8+this[++I]*2**16+this[++I]*2**24,Ee=this[++I]+this[++I]*2**8+this[++I]*2**16+$*2**24;return BigInt(de)+(BigInt(Ee)<<BigInt(32))}),l.prototype.readBigUInt64BE=Zt(function(I){I=I>>>0,He(I,"offset");const O=this[I],$=this[I+7];(O===void 0||$===void 0)&&fe(I,this.length-8);const de=O*2**24+this[++I]*2**16+this[++I]*2**8+this[++I],Ee=this[++I]*2**24+this[++I]*2**16+this[++I]*2**8+$;return(BigInt(de)<<BigInt(32))+BigInt(Ee)}),l.prototype.readIntLE=function(I,O,$){I=I>>>0,O=O>>>0,$||G(I,O,this.length);let de=this[I],Ee=1,Ae=0;for(;++Ae<O&&(Ee*=256);)de+=this[I+Ae]*Ee;return Ee*=128,de>=Ee&&(de-=Math.pow(2,8*O)),de},l.prototype.readIntBE=function(I,O,$){I=I>>>0,O=O>>>0,$||G(I,O,this.length);let de=O,Ee=1,Ae=this[I+--de];for(;de>0&&(Ee*=256);)Ae+=this[I+--de]*Ee;return Ee*=128,Ae>=Ee&&(Ae-=Math.pow(2,8*O)),Ae},l.prototype.readInt8=function(I,O){return I=I>>>0,O||G(I,1,this.length),this[I]&128?(255-this[I]+1)*-1:this[I]},l.prototype.readInt16LE=function(I,O){I=I>>>0,O||G(I,2,this.length);const $=this[I]|this[I+1]<<8;return $&32768?$|4294901760:$},l.prototype.readInt16BE=function(I,O){I=I>>>0,O||G(I,2,this.length);const $=this[I+1]|this[I]<<8;return $&32768?$|4294901760:$},l.prototype.readInt32LE=function(I,O){return I=I>>>0,O||G(I,4,this.length),this[I]|this[I+1]<<8|this[I+2]<<16|this[I+3]<<24},l.prototype.readInt32BE=function(I,O){return I=I>>>0,O||G(I,4,this.length),this[I]<<24|this[I+1]<<16|this[I+2]<<8|this[I+3]},l.prototype.readBigInt64LE=Zt(function(I){I=I>>>0,He(I,"offset");const O=this[I],$=this[I+7];(O===void 0||$===void 0)&&fe(I,this.length-8);const de=this[I+4]+this[I+5]*2**8+this[I+6]*2**16+($<<24);return(BigInt(de)<<BigInt(32))+BigInt(O+this[++I]*2**8+this[++I]*2**16+this[++I]*2**24)}),l.prototype.readBigInt64BE=Zt(function(I){I=I>>>0,He(I,"offset");const O=this[I],$=this[I+7];(O===void 0||$===void 0)&&fe(I,this.length-8);const de=(O<<24)+this[++I]*2**16+this[++I]*2**8+this[++I];return(BigInt(de)<<BigInt(32))+BigInt(this[++I]*2**24+this[++I]*2**16+this[++I]*2**8+$)}),l.prototype.readFloatLE=function(I,O){return I=I>>>0,O||G(I,4,this.length),t.read(this,I,!0,23,4)},l.prototype.readFloatBE=function(I,O){return I=I>>>0,O||G(I,4,this.length),t.read(this,I,!1,23,4)},l.prototype.readDoubleLE=function(I,O){return I=I>>>0,O||G(I,8,this.length),t.read(this,I,!0,52,8)},l.prototype.readDoubleBE=function(I,O){return I=I>>>0,O||G(I,8,this.length),t.read(this,I,!1,52,8)};function le(V,I,O,$,de,Ee){if(!l.isBuffer(V))throw new TypeError('"buffer" argument must be a Buffer instance');if(I>de||I<Ee)throw new RangeError('"value" argument is out of bounds');if(O+$>V.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(I,O,$,de){if(I=+I,O=O>>>0,$=$>>>0,!de){const Je=Math.pow(2,8*$)-1;le(this,I,O,$,Je,0)}let Ee=1,Ae=0;for(this[O]=I&255;++Ae<$&&(Ee*=256);)this[O+Ae]=I/Ee&255;return O+$},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(I,O,$,de){if(I=+I,O=O>>>0,$=$>>>0,!de){const Je=Math.pow(2,8*$)-1;le(this,I,O,$,Je,0)}let Ee=$-1,Ae=1;for(this[O+Ee]=I&255;--Ee>=0&&(Ae*=256);)this[O+Ee]=I/Ae&255;return O+$},l.prototype.writeUint8=l.prototype.writeUInt8=function(I,O,$){return I=+I,O=O>>>0,$||le(this,I,O,1,255,0),this[O]=I&255,O+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(I,O,$){return I=+I,O=O>>>0,$||le(this,I,O,2,65535,0),this[O]=I&255,this[O+1]=I>>>8,O+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(I,O,$){return I=+I,O=O>>>0,$||le(this,I,O,2,65535,0),this[O]=I>>>8,this[O+1]=I&255,O+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(I,O,$){return I=+I,O=O>>>0,$||le(this,I,O,4,4294967295,0),this[O+3]=I>>>24,this[O+2]=I>>>16,this[O+1]=I>>>8,this[O]=I&255,O+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(I,O,$){return I=+I,O=O>>>0,$||le(this,I,O,4,4294967295,0),this[O]=I>>>24,this[O+1]=I>>>16,this[O+2]=I>>>8,this[O+3]=I&255,O+4};function Q(V,I,O,$,de){lt(I,$,de,V,O,7);let Ee=Number(I&BigInt(4294967295));V[O++]=Ee,Ee=Ee>>8,V[O++]=Ee,Ee=Ee>>8,V[O++]=Ee,Ee=Ee>>8,V[O++]=Ee;let Ae=Number(I>>BigInt(32)&BigInt(4294967295));return V[O++]=Ae,Ae=Ae>>8,V[O++]=Ae,Ae=Ae>>8,V[O++]=Ae,Ae=Ae>>8,V[O++]=Ae,O}function ae(V,I,O,$,de){lt(I,$,de,V,O,7);let Ee=Number(I&BigInt(4294967295));V[O+7]=Ee,Ee=Ee>>8,V[O+6]=Ee,Ee=Ee>>8,V[O+5]=Ee,Ee=Ee>>8,V[O+4]=Ee;let Ae=Number(I>>BigInt(32)&BigInt(4294967295));return V[O+3]=Ae,Ae=Ae>>8,V[O+2]=Ae,Ae=Ae>>8,V[O+1]=Ae,Ae=Ae>>8,V[O]=Ae,O+8}l.prototype.writeBigUInt64LE=Zt(function(I,O=0){return Q(this,I,O,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Zt(function(I,O=0){return ae(this,I,O,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(I,O,$,de){if(I=+I,O=O>>>0,!de){const it=Math.pow(2,8*$-1);le(this,I,O,$,it-1,-it)}let Ee=0,Ae=1,Je=0;for(this[O]=I&255;++Ee<$&&(Ae*=256);)I<0&&Je===0&&this[O+Ee-1]!==0&&(Je=1),this[O+Ee]=(I/Ae>>0)-Je&255;return O+$},l.prototype.writeIntBE=function(I,O,$,de){if(I=+I,O=O>>>0,!de){const it=Math.pow(2,8*$-1);le(this,I,O,$,it-1,-it)}let Ee=$-1,Ae=1,Je=0;for(this[O+Ee]=I&255;--Ee>=0&&(Ae*=256);)I<0&&Je===0&&this[O+Ee+1]!==0&&(Je=1),this[O+Ee]=(I/Ae>>0)-Je&255;return O+$},l.prototype.writeInt8=function(I,O,$){return I=+I,O=O>>>0,$||le(this,I,O,1,127,-128),I<0&&(I=255+I+1),this[O]=I&255,O+1},l.prototype.writeInt16LE=function(I,O,$){return I=+I,O=O>>>0,$||le(this,I,O,2,32767,-32768),this[O]=I&255,this[O+1]=I>>>8,O+2},l.prototype.writeInt16BE=function(I,O,$){return I=+I,O=O>>>0,$||le(this,I,O,2,32767,-32768),this[O]=I>>>8,this[O+1]=I&255,O+2},l.prototype.writeInt32LE=function(I,O,$){return I=+I,O=O>>>0,$||le(this,I,O,4,2147483647,-2147483648),this[O]=I&255,this[O+1]=I>>>8,this[O+2]=I>>>16,this[O+3]=I>>>24,O+4},l.prototype.writeInt32BE=function(I,O,$){return I=+I,O=O>>>0,$||le(this,I,O,4,2147483647,-2147483648),I<0&&(I=4294967295+I+1),this[O]=I>>>24,this[O+1]=I>>>16,this[O+2]=I>>>8,this[O+3]=I&255,O+4},l.prototype.writeBigInt64LE=Zt(function(I,O=0){return Q(this,I,O,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Zt(function(I,O=0){return ae(this,I,O,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ve(V,I,O,$,de,Ee){if(O+$>V.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("Index out of range")}function ze(V,I,O,$,de){return I=+I,O=O>>>0,de||Ve(V,I,O,4),t.write(V,I,O,$,23,4),O+4}l.prototype.writeFloatLE=function(I,O,$){return ze(this,I,O,!0,$)},l.prototype.writeFloatBE=function(I,O,$){return ze(this,I,O,!1,$)};function De(V,I,O,$,de){return I=+I,O=O>>>0,de||Ve(V,I,O,8),t.write(V,I,O,$,52,8),O+8}l.prototype.writeDoubleLE=function(I,O,$){return De(this,I,O,!0,$)},l.prototype.writeDoubleBE=function(I,O,$){return De(this,I,O,!1,$)},l.prototype.copy=function(I,O,$,de){if(!l.isBuffer(I))throw new TypeError("argument should be a Buffer");if($||($=0),!de&&de!==0&&(de=this.length),O>=I.length&&(O=I.length),O||(O=0),de>0&&de<$&&(de=$),de===$||I.length===0||this.length===0)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if($<0||$>=this.length)throw new RangeError("Index out of range");if(de<0)throw new RangeError("sourceEnd out of bounds");de>this.length&&(de=this.length),I.length-O<de-$&&(de=I.length-O+$);const Ee=de-$;return this===I&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(O,$,de):Uint8Array.prototype.set.call(I,this.subarray($,de),O),Ee},l.prototype.fill=function(I,O,$,de){if(typeof I=="string"){if(typeof O=="string"?(de=O,O=0,$=this.length):typeof $=="string"&&(de=$,$=this.length),de!==void 0&&typeof de!="string")throw new TypeError("encoding must be a string");if(typeof de=="string"&&!l.isEncoding(de))throw new TypeError("Unknown encoding: "+de);if(I.length===1){const Ae=I.charCodeAt(0);(de==="utf8"&&Ae<128||de==="latin1")&&(I=Ae)}}else typeof I=="number"?I=I&255:typeof I=="boolean"&&(I=Number(I));if(O<0||this.length<O||this.length<$)throw new RangeError("Out of range index");if($<=O)return this;O=O>>>0,$=$===void 0?this.length:$>>>0,I||(I=0);let Ee;if(typeof I=="number")for(Ee=O;Ee<$;++Ee)this[Ee]=I;else{const Ae=l.isBuffer(I)?I:l.from(I,de),Je=Ae.length;if(Je===0)throw new TypeError('The value "'+I+'" is invalid for argument "value"');for(Ee=0;Ee<$-O;++Ee)this[Ee+O]=Ae[Ee%Je]}return this};const Pe={};function ve(V,I,O){Pe[V]=class extends O{constructor(){super(),Object.defineProperty(this,"message",{value:I.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${V}]`,this.stack,delete this.name}get code(){return V}set code(de){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:de,writable:!0})}toString(){return`${this.name} [${V}]: ${this.message}`}}}ve("ERR_BUFFER_OUT_OF_BOUNDS",function(V){return V?`${V} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ve("ERR_INVALID_ARG_TYPE",function(V,I){return`The "${V}" argument must be of type number. Received type ${typeof I}`},TypeError),ve("ERR_OUT_OF_RANGE",function(V,I,O){let $=`The value of "${V}" is out of range.`,de=O;return Number.isInteger(O)&&Math.abs(O)>2**32?de=he(String(O)):typeof O=="bigint"&&(de=String(O),(O>BigInt(2)**BigInt(32)||O<-(BigInt(2)**BigInt(32)))&&(de=he(de)),de+="n"),$+=` It must be ${I}. Received ${de}`,$},RangeError);function he(V){let I="",O=V.length;const $=V[0]==="-"?1:0;for(;O>=$+4;O-=3)I=`_${V.slice(O-3,O)}${I}`;return`${V.slice(0,O)}${I}`}function Fe(V,I,O){He(I,"offset"),(V[I]===void 0||V[I+O]===void 0)&&fe(I,V.length-(O+1))}function lt(V,I,O,$,de,Ee){if(V>O||V<I){const Ae=typeof I=="bigint"?"n":"";let Je;throw I===0||I===BigInt(0)?Je=`>= 0${Ae} and < 2${Ae} ** ${(Ee+1)*8}${Ae}`:Je=`>= -(2${Ae} ** ${(Ee+1)*8-1}${Ae}) and < 2 ** ${(Ee+1)*8-1}${Ae}`,new Pe.ERR_OUT_OF_RANGE("value",Je,V)}Fe($,de,Ee)}function He(V,I){if(typeof V!="number")throw new Pe.ERR_INVALID_ARG_TYPE(I,"number",V)}function fe(V,I,O){throw Math.floor(V)!==V?(He(V,O),new Pe.ERR_OUT_OF_RANGE("offset","an integer",V)):I<0?new Pe.ERR_BUFFER_OUT_OF_BOUNDS:new Pe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${I}`,V)}const Te=/[^+/0-9A-Za-z-_]/g;function dt(V){if(V=V.split("=")[0],V=V.trim().replace(Te,""),V.length<2)return"";for(;V.length%4!==0;)V=V+"=";return V}function Ot(V,I){I=I||1/0;let O;const $=V.length;let de=null;const Ee=[];for(let Ae=0;Ae<$;++Ae){if(O=V.charCodeAt(Ae),O>55295&&O<57344){if(!de){if(O>56319){(I-=3)>-1&&Ee.push(239,191,189);continue}else if(Ae+1===$){(I-=3)>-1&&Ee.push(239,191,189);continue}de=O;continue}if(O<56320){(I-=3)>-1&&Ee.push(239,191,189),de=O;continue}O=(de-55296<<10|O-56320)+65536}else de&&(I-=3)>-1&&Ee.push(239,191,189);if(de=null,O<128){if((I-=1)<0)break;Ee.push(O)}else if(O<2048){if((I-=2)<0)break;Ee.push(O>>6|192,O&63|128)}else if(O<65536){if((I-=3)<0)break;Ee.push(O>>12|224,O>>6&63|128,O&63|128)}else if(O<1114112){if((I-=4)<0)break;Ee.push(O>>18|240,O>>12&63|128,O>>6&63|128,O&63|128)}else throw new Error("Invalid code point")}return Ee}function tr(V){const I=[];for(let O=0;O<V.length;++O)I.push(V.charCodeAt(O)&255);return I}function At(V,I){let O,$,de;const Ee=[];for(let Ae=0;Ae<V.length&&!((I-=2)<0);++Ae)O=V.charCodeAt(Ae),$=O>>8,de=O%256,Ee.push(de),Ee.push($);return Ee}function Qt(V){return e.toByteArray(dt(V))}function Kt(V,I,O,$){let de;for(de=0;de<$&&!(de+O>=I.length||de>=V.length);++de)I[de+O]=V[de];return de}function pt(V,I){return V instanceof I||V!=null&&V.constructor!=null&&V.constructor.name!=null&&V.constructor.name===I.name}function Ct(V){return V!==V}const Ut=function(){const V="0123456789abcdef",I=new Array(256);for(let O=0;O<16;++O){const $=O*16;for(let de=0;de<16;++de)I[$+de]=V[O]+V[de]}return I}();function Zt(V){return typeof BigInt>"u"?pr:V}function pr(){throw new Error("BigInt not supported")}})(u_);/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let tf;var pb=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:us):i=>(tf||(tf=Promise.resolve())).then(i).catch(e=>setTimeout(()=>{throw e},0));const _b=oa(pb),$i="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Wi="http://www.w3.org/2001/XMLSchema#",Ks="http://www.w3.org/2000/10/swap/",an={xsd:{decimal:`${Wi}decimal`,boolean:`${Wi}boolean`,double:`${Wi}double`,integer:`${Wi}integer`,string:`${Wi}string`},rdf:{type:`${$i}type`,nil:`${$i}nil`,first:`${$i}first`,rest:`${$i}rest`,langString:`${$i}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${Ks}reify#forSome`,forAll:`${Ks}reify#forAll`},log:{implies:`${Ks}log#implies`}},{xsd:La}=an,mb=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,rf={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},vb=/[\x00-\x20<>\\"\{\}\|\^\`]/,gb={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},bb=/$0^/;class wb{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const t in this)!(t in gb)&&this[t]instanceof RegExp&&(this[t]=bb)}else this._n3Mode=e.n3!==!1;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let r=this._input,n=r.length;for(;;){let l,o;for(;l=this._newline.exec(r);)this._comments&&(o=this._comment.exec(l[0]))&&s("comment",o[1],"",this._line,l[0].length),r=r.substr(l[0].length,r.length),n=r.length,this._line++;if(!l&&(l=this._whitespace.exec(r))&&(r=r.substr(l[0].length,r.length)),this._endOfFile.test(r))return t&&(this._comments&&(o=this._comment.exec(r))&&s("comment",o[1],"",this._line,r.length),r=null,s("eof","","",this._line,0)),this._input=r;const u=this._line,f=r[0];let p="",d="",c="",h=null,_=0,m=!1;switch(f){case"^":if(r.length<3)break;if(r[1]==="^"){if(this._previousMarker="^^",r=r.substr(2),r[0]!=="<"){m=!0;break}}else{this._n3Mode&&(_=1,p="^");break}case"<":if(h=this._unescapedIri.exec(r))p="IRI",d=h[1];else if(h=this._iri.exec(r)){if(d=this._unescape(h[1]),d===null||vb.test(d))return a(this);p="IRI"}else r.length>1&&r[1]==="<"?(p="<<",_=2):this._n3Mode&&r.length>1&&r[1]==="="&&(p="inverse",_=2,d=">");break;case">":r.length>1&&r[1]===">"&&(p=">>",_=2);break;case"_":((h=this._blank.exec(r))||t&&(h=this._blank.exec(`${r} `)))&&(p="blank",c="_",d=h[1]);break;case'"':if(h=this._simpleQuotedString.exec(r))d=h[1];else if({value:d,matchLength:_}=this._parseLiteral(r),d===null)return a(this);(h!==null||_!==0)&&(p="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(h=this._simpleApostropheString.exec(r))d=h[1];else if({value:d,matchLength:_}=this._parseLiteral(r),d===null)return a(this);(h!==null||_!==0)&&(p="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(h=this._variable.exec(r))&&(p="var",d=h[0]);break;case"@":this._previousMarker==="literal"&&(h=this._langcode.exec(r))?(p="langcode",d=h[1]):(h=this._keyword.exec(r))&&(p=h[0]);break;case".":if(r.length===1?t:r[1]<"0"||r[1]>"9"){p=".",_=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(h=this._number.exec(r)||t&&(h=this._number.exec(`${r} `)))&&(p="literal",d=h[0],c=typeof h[1]=="string"?La.double:typeof h[2]=="string"?La.decimal:La.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(h=this._sparqlKeyword.exec(r))?p=h[0].toUpperCase():m=!0;break;case"f":case"t":(h=this._boolean.exec(r))?(p="literal",d=h[0],c=La.boolean):m=!0;break;case"a":(h=this._shortPredicates.exec(r))?(p="abbreviation",d="a"):m=!0;break;case"=":this._n3Mode&&r.length>1&&(p="abbreviation",r[1]!==">"?(_=1,d="="):(_=2,d=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(_=1,p=f);break;case"{":!this._lineMode&&r.length>=2&&(r[1]==="|"?(p="{|",_=2):(p=f,_=1));break;case"|":r.length>=2&&r[1]==="}"&&(p="|}",_=2);break;default:m=!0}if(m&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(h=this._prefix.exec(r))?(p="prefix",d=h[1]||""):((h=this._prefixed.exec(r))||t&&(h=this._prefixed.exec(`${r} `)))&&(p="prefixed",c=h[1]||"",d=this._unescape(h[2]))),this._previousMarker==="^^")switch(p){case"prefixed":p="type";break;case"IRI":p="typeIRI";break;default:p=""}if(!p)return t||!/^'''|^"""/.test(r)&&/\n|\r/.test(r)?a(this):this._input=r;const y=_||h[0].length,F=s(p,d,c,u,y);this.previousToken=F,this._previousMarker=p,r=r.substr(y,r.length)}function s(l,o,u,f,p){const d=r?n-r.length:n,c=d+p,h={type:l,value:o,prefix:u,line:f,start:d,end:c};return e(null,h),h}function a(l){e(l._syntaxError(/^\S*/.exec(r)[0]))}}_unescape(e){let t=!1;const r=e.replace(mb,(n,s,a,l)=>{if(typeof s=="string")return String.fromCharCode(Number.parseInt(s,16));if(typeof a=="string"){let o=Number.parseInt(a,16);return o<=65535?String.fromCharCode(Number.parseInt(a,16)):String.fromCharCode(55296+((o-=65536)>>10),56320+(o&1023))}return l in rf?rf[l]:(t=!0,"")});return t?null:r}_parseLiteral(e){if(e.length>=3){const t=e.match(/^(?:"""|"|'''|'|)/)[0],r=t.length;let n=Math.max(this._literalClosingPos,r);for(;(n=e.indexOf(t,n))>0;){let s=0;for(;e[n-s-1]==="\\";)s++;if(s%2===0){const a=e.substring(r,n),l=a.split(/\r\n|\r|\n/).length-1,o=n+r;if(r===1&&l!==0||r===3&&this._lineMode)break;return this._line+=l,{value:this._unescape(a),matchLength:o}}n++}this._literalClosingPos=e.length-r+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,t){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof t=="function")_b(()=>this._tokenizeToEnd(t,!0));else{const r=[];let n;if(this._tokenizeToEnd((s,a)=>s?n=s:r.push(a),!0),n)throw n;return r}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",r=>{this._input!==null&&r.length!==0&&(this._pendingBuffer&&(r=u_.Buffer.concat([this._pendingBuffer,r]),this._pendingBuffer=null),r[r.length-1]&128?this._pendingBuffer=r:(typeof this._input>"u"?this._input=this._readStartingBom(typeof r=="string"?r:r.toString()):this._input+=r,this._tokenizeToEnd(t,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(t,!0)}),e.on("error",t)}}const{rdf:yb,xsd:Ei}=an;let ws,Eb=0;const Db={namedNode:Nb,blankNode:Sb,variable:Pb,literal:Ib,defaultGraph:Rb,quad:nf,triple:nf};class Xn{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Xn?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}let c_=class extends Xn{get termType(){return"NamedNode"}},Zs=class d_ extends Xn{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let t=e.lastIndexOf('"')+1;return t<e.length&&e[t++]==="@"?e.substr(t).toLowerCase():""}get datatype(){return new c_(this.datatypeString)}get datatypeString(){const e=this.id,t=e.lastIndexOf('"')+1,r=t<e.length?e[t]:"";return r==="^"?e.substr(t+2):r!=="@"?Ei.string:yb.langString}equals(e){return e instanceof d_?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}},kb=class extends Xn{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}},Ab=class extends Xn{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}},Cb=class extends Xn{constructor(){return super(""),ws||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};ws=new Cb;let Tb=class extends Xn{constructor(e,t,r,n){super(""),this._subject=e,this._predicate=t,this._object=r,this._graph=n||ws}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}};function Nb(i){return new c_(i)}function Sb(i){return new kb(i||`n3-${Eb++}`)}function Ib(i,e){if(typeof e=="string")return new Zs(`"${i}"@${e.toLowerCase()}`);let t=e?e.value:"";return t===""&&(typeof i=="boolean"?t=Ei.boolean:typeof i=="number"&&(Number.isFinite(i)?t=Number.isInteger(i)?Ei.integer:Ei.double:(t=Ei.double,Number.isNaN(i)||(i=i>0?"INF":"-INF")))),t===""||t===Ei.string?new Zs(`"${i}"`):new Zs(`"${i}"^^${t}`)}function Pb(i){return new Ab(i)}function Rb(){return ws}function nf(i,e,t,r){return new Tb(i,e,t,r)}let af=0;class h_{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&p_(this,e.factory);const t=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",r=/turtle/.test(t),n=/trig/.test(t),s=/triple/.test(t),a=/quad/.test(t),l=this._n3Mode=/n3/.test(t),o=s||a;(this._supportsNamedGraphs=!(r||l))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||n||s||l),this._supportsRDFStar=t===""||/star|\*$/.test(t),o&&(this._resolveRelativeIRI=u=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new wb({lineMode:o,n3:l}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){af=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,t,r,n,s){const a=this._n3Mode;this._contextStack.push({type:e,subject:r,predicate:n,object:s,graph:t,inverse:a?this._inversePredicate:!1,blankPrefix:a?this._prefixes._:"",quantified:a?this._quantified:null}),a&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,t){const r=this._contextStack.pop();if(!r||r.type!==e)return this._error(`Unexpected ${t.type}`,t);this._subject=r.subject,this._predicate=r.predicate,this._object=r.object,this._graph=r.graph,this._n3Mode&&(this._inversePredicate=r.inverse,this._prefixes._=r.blankPrefix,this._quantified=r.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let r;switch(e.type){case"IRI":case"typeIRI":const n=this._resolveIRI(e.value);if(n===null)return this._error("Invalid IRI",e);r=this._namedNode(n);break;case"type":case"prefixed":const s=this._prefixes[e.prefix];if(s===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);r=this._namedNode(s+e.value);break;case"blank":r=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":r=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&r.id in this._quantified&&(r=this._quantified[r.id]),r}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${t}`,e):(this._subject=null,t==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const t=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,r=null,n=this._readListItem;const s=this._subject,a=this._contextStack,l=a[a.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,r=this._blankNode(),this.RDF_FIRST,this._subject=t=this._blankNode()),n=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,r=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),a.length!==0&&a[a.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(n=this._readPredicate,this._subject===this.RDF_NIL)return n}else if(n=this._getContextEndReader(),this._object===this.RDF_NIL)return n;r=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,n=this._readListItemDataTypeOrLang):(t=this._literal(e.value,this._namedNode(e.prefix)),n=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((t=this._readEntity(e))===void 0)return}if(r===null&&(this._subject=r=this._blankNode()),s===null?l.predicate===null?l.subject=r:l.object=r:this._emit(s,this.RDF_REST,r,this._graph),t!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,r,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(r,this.RDF_FIRST,t,this._graph)}return n}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const r=this._readEntity(e);if(r===void 0)return;t=this._literal(this._literalValue,r),e=null;break;case"langcode":t=this._literal(this._literalValue,e.value),e=null;break}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){const r=this._completeLiteral(e);if(r)return this._object=r.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),r.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(r.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,r=this._graph;const n=this._subject,s=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);const a=this._predicate,l=this._object;this._subject=this._quad(n,a,l,this.DEFAULTGRAPH),t=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,t=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(r=this._readEntity(e))!==void 0){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(n!==null){const a=this._predicate,l=this._object;s?this._emit(l,a,n,r):this._emit(n,a,l,r)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){const t=e.type==="IRI"&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if((t=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const t=this._contextStack,r=t.length&&t[t.length-1];if(r&&r.type==="item"){const n=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,n,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,r;const n=this._blankNode();if((r=this._readEntity(e))!==void 0)return this._predicate===null?(t=this._subject,this._subject=n):(t=this._object,this._object=n),this._emit(t,r,n,this._graph),this._readPath}_readBackwardPath(e){const t=this._blankNode();let r,n;if((r=this._readEntity(e))!==void 0)return this._predicate===null?(n=this._subject,this._subject=t):(n=this._object,this._object=t),this._emit(t,r,n,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const t=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,r,n){this._callback(null,this._quad(e,t,r,n||this.DEFAULTGRAPH))}_error(e,t){const r=new Error(`${e} on line ${t.line}.`);r.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(r),this._callback=el}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const t=e.length;let r="",n=-1,s=-1,a=0,l="/";for(;n<t;){switch(l){case":":if(s<0&&e[++n]==="/"&&e[++n]==="/")for(;(s=n+1)<t&&e[s]!=="/";)n=s;break;case"?":case"#":n=t;break;case"/":if(e[n+1]===".")switch(l=e[++n+1],l){case"/":r+=e.substring(a,n-1),a=n+1;break;case void 0:case"?":case"#":return r+e.substring(a,n)+e.substr(n+1);case".":if(l=e[++n+1],l===void 0||l==="/"||l==="?"||l==="#"){if(r+=e.substring(a,n-2),(a=r.lastIndexOf("/"))>=s&&(r=r.substr(0,a)),l!=="/")return`${r}/${e.substr(n+1)}`;a=n+1}}}l=e[++n]}return r+e.substring(a)}parse(e,t,r){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${af++}_`,this._prefixCallback=r||el,this._inversePredicate=!1,this._quantified=Object.create(null),!t){const n=[];let s;if(this._callback=(a,l)=>{a?s=a:l&&n.push(l)},this._lexer.tokenize(e).every(a=>this._readCallback=this._readCallback(a)),s)throw s;return n}this._callback=t,this._lexer.tokenize(e,(n,s)=>{n!==null?(this._callback(n),this._callback=el):this._readCallback&&(this._readCallback=this._readCallback(s))})}}function el(){}function p_(i,e){const t=e.namedNode;i._namedNode=t,i._blankNode=e.blankNode,i._literal=e.literal,i._variable=e.variable,i._quad=e.quad,i.DEFAULTGRAPH=e.defaultGraph(),i.RDF_FIRST=t(an.rdf.first),i.RDF_REST=t(an.rdf.rest),i.RDF_NIL=t(an.rdf.nil),i.N3_FORALL=t(an.r.forAll),i.N3_FORSOME=t(an.r.forSome),i.ABBREVIATIONS={a:t(an.rdf.type),"=":t(an.owl.sameAs),">":t(an.log.implies)},i.QUANTIFIERS_GRAPH=t("urn:n3:quantifiers")}p_(h_.prototype,Db);if(typeof Bn>"u")var Bn={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};var Vr=function(){function i(e,t){Jt(this,i),this.options=t||{},this.kb=e,this.target=t.target||{graph:{subjects:{},prefixes:{},terms:{}}},this.blankNodes=[],this.htmlOptions={selfClosing:"br img input area base basefont col colgroup source wbr isindex link meta param hr"},this.theOne="_:"+new Date().getTime(),this.language=null,this.vocabulary=null,this.blankCounter=0,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}],this.inXHTMLMode=!1,this.absURIRE=/[\w\_\-]+:\S+/,this.finishedHandlers=[],this.init()}return Yt(i,[{key:"addTriple",value:function(t,r,n,s){var a,l,o,u;typeof r>"u"?a=xr.namedNode(this.options.base):a=this.toRDFNodeObject(r),o=this.toRDFNodeObject(n),l=this.toRDFNodeObject(s),u=xr.namedNode(this.options.base),this.kb.add(a,o,l,u)}},{key:"ancestorPath",value:function(t){for(var r="";t&&t.nodeType!==Bn.DOCUMENT_NODE;)r="/"+t.localName+r,t=t.parentNode;return r}},{key:"copyMappings",value:function(t){var r={};for(var n in t)r[n]=t[n];return r}},{key:"copyProperties",value:function(){}},{key:"deriveDateTimeType",value:function(t){for(var r=0;r<i.dateTimeTypes.length;r++){var n=i.dateTimeTypes[r].pattern.exec(t);if(n&&n[0].length===t.length)return i.dateTimeTypes[r].type}return null}},{key:"init",value:function(){}},{key:"newBlankNode",value:function(){return this.blankCounter++,"_:"+this.blankCounter}},{key:"newSubjectOrigin",value:function(t,r){}},{key:"parseCURIE",value:function(t,r,n){var s=t.indexOf(":"),a;if(s>=0){var l=t.substring(0,s);if(l==="")return a=r[""],a?a+t.substring(s+1):null;if(l==="_")return"_:"+t.substring(s+1);if(i.NCNAME.test(l)&&(a=r[l],a))return a+t.substring(s+1)}return null}},{key:"parseCURIEOrURI",value:function(t,r,n){var s=this.parseCURIE(t,r,n);return s||this.resolveAndNormalize(n,t)}},{key:"parsePredicate",value:function(t,r,n,s,a,l){if(t==="")return null;var o=this.parseTermOrCURIEOrAbsURI(t,r,l?null:n,s,a);return o&&o.indexOf("_:")===0?null:o}},{key:"parsePrefixMappings",value:function(t,r){for(var n=this.tokenize(t),s=null,a=0;a<n.length;a++)n[a][n[a].length-1]===":"?s=n[a].substring(0,n[a].length-1):s&&(r[s]=this.options.base?Mr(n[a],this.options.base):n[a],s=null)}},{key:"parseSafeCURIEOrCURIEOrURI",value:function(t,r,n){return t=this.trim(t),t.charAt(0)==="["&&t.charAt(t.length-1)==="]"?(t=t.substring(1,t.length-1),t=t.trim(t),t.length===0?null:t==="_:"?this.theOne:this.parseCURIE(t,r,n)):this.parseCURIEOrURI(t,r,n)}},{key:"parseTermOrCURIEOrAbsURI",value:function(t,r,n,s,a){t=this.trim(t);var l=this.parseCURIE(t,s,a);if(l)return l;if(n){if(r&&!this.absURIRE.exec(t))return r+t;var o=n[t];if(o)return o;var u=t.toLowerCase();if(o=n[u],o)return o}return this.absURIRE.exec(t)?this.resolveAndNormalize(a,t):null}},{key:"parseTermOrCURIEOrURI",value:function(t,r,n,s,a){t=this.trim(t);var l=this.parseCURIE(t,s,a);if(l)return l;var o=n[t];if(o)return o;var u=t.toLowerCase();return o=n[u],o||(r&&!this.absURIRE.exec(t)?r+t:this.resolveAndNormalize(a,t))}},{key:"parseURI",value:function(t){return t}},{key:"process",value:function(t,r){r=r||{};var n;t.nodeType===Bn.DOCUMENT_NODE?(t.baseURI&&!r.baseURI&&(r.baseURI=t.baseURI),n=t.baseURI,t=t.documentElement,t.baseURI||(t.baseURI=n),this.setContext(t)):t.parentNode.nodeType===Bn.DOCUMENT_NODE&&this.setContext(t);var s=[],a=function(lr){if(!lr&&r&&r.baseURI)return r.baseURI;var gr=lr.indexOf("#");return gr>=0&&(lr=lr.substring(0,gr)),r&&r.baseURIMap&&(lr=r.baseURIMap(lr)),lr};for(s.push({current:t,context:this.push(null,a(t.baseURI))});s.length>0;){var l=s.shift();if(l.parent){if(l.context.parent&&l.context.parent.listMapping===l.listMapping)continue;for(var o in l.listMapping){var u=l.listMapping[o];if(u.length===0){this.addTriple(l.parent,l.subject,o,{type:i.objectURI,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});continue}for(var f=[],p=0;p<u.length;p++)f.push(this.newBlankNode());for(var d=0;d<f.length;d++)this.addTriple(l.parent,f[d],"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",u[d]),this.addTriple(l.parent,f[d],"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",{type:i.objectURI,value:d+1<f.length?f[d+1]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});this.addTriple(l.parent,l.subject,o,{type:i.objectURI,value:f[0]})}continue}var c=l.current,h=l.context,_=!1,m=null,y=null,F=null,T=h.prefixes,N=!1,b=[],k=h.listMapping,A=!h.parent,L=h.language,P=h.vocabulary;n=this.parseURI(a(c.baseURI)),c.item=null;var B=c.getAttributeNode("vocab");if(B){var D=this.trim(B.value);if(D.length>0){P=D;var R=n.spec;this.addTriple(c,R,"http://www.w3.org/ns/rdfa#usesVocabulary",{type:i.objectURI,value:P})}else P=this.vocabulary}for(var w=0;w<c.attributes.length;w++){var S=c.attributes[w];if(S.nodeName.charAt(0)==="x"&&S.nodeName.indexOf("xmlns:")===0){N||(T=this.copyMappings(T),N=!0);var X=S.nodeName.substring(6),j=i.trim(S.value);T[X]=this.options.base?Mr(j,this.options.base):j}}var ne=c.getAttributeNode("prefix");ne&&(N||(T=this.copyMappings(T),N=!0),this.parsePrefixMappings(ne.value,T));for(var J=null,W=0;!J&&W<this.langAttributes.length;W++)J=c.getAttributeNodeNS(this.langAttributes[W].namespaceURI,this.langAttributes[W].localName);if(J){var x=i.trim(J.value);x.length>0?L=x:L=null}var G=c.getAttributeNode("rel"),le=c.getAttributeNode("rev"),Q=c.getAttributeNode("typeof"),ae=c.getAttributeNode("property"),Ve=c.getAttributeNode("datatype"),ze=this.inHTMLMode?c.getAttributeNode("datetime"):null,De=c.getAttributeNode("content"),Pe=c.getAttributeNode("about"),ve=c.getAttributeNode("src"),he=c.getAttributeNode("resource"),Fe=c.getAttributeNode("href"),lt=c.getAttributeNode("inlist"),He=[],fe,Te;if(G){Te=this.tokenize(G.value);for(var dt=0;dt<Te.length;dt++)fe=this.parsePredicate(Te[dt],P,h.terms,T,n,this.inHTMLMode&&ae!==null),fe&&He.push(fe)}var Ot=[];if(le){Te=this.tokenize(le.value);for(var tr=0;tr<Te.length;tr++)fe=this.parsePredicate(Te[tr],P,h.terms,T,n,this.inHTMLMode&&ae),fe&&Ot.push(fe)}if(this.inHTMLMode&&(G||le)&&ae&&(He.length===0&&(G=null),Ot.length===0&&(le=null)),G||le?(Pe&&(m=this.parseSafeCURIEOrCURIEOrURI(Pe.value,T,n)),Q&&(F=m),m||(c.parentNode.nodeType===Bn.DOCUMENT_NODE?m=a(c.baseURI):h.parentObject&&(m=a(c.parentNode.baseURI)===h.parentObject?a(c.baseURI):h.parentObject)),he&&(y=this.parseSafeCURIEOrCURIEOrURI(he.value,T,n)),y||(Fe?y=this.resolveAndNormalize(n,encodeURI(Fe.value)):ve?y=this.resolveAndNormalize(n,encodeURI(ve.value)):Q&&!Pe&&!(this.inXHTMLMode&&(c.localName==="head"||c.localName==="body"))&&(y=this.newBlankNode())),Q&&!Pe&&this.inXHTMLMode&&(c.localName==="head"||c.localName==="body")?F=m:Q&&!Pe&&(F=y)):ae&&!De&&!Ve?(Pe&&(m=this.parseSafeCURIEOrCURIEOrURI(Pe.value,T,n),Q&&(F=m)),!m&&c.parentNode.nodeType===Bn.DOCUMENT_NODE?(m=a(c.baseURI),Q&&(F=m)):!m&&h.parentObject&&(m=a(c.parentNode.baseURI)===h.parentObject?a(c.baseURI):h.parentObject),Q&&!F&&(he&&(F=this.parseSafeCURIEOrCURIEOrURI(he.value,T,n)),!F&&Fe&&(F=this.resolveAndNormalize(n,encodeURI(Fe.value))),!F&&ve&&(F=this.resolveAndNormalize(n,encodeURI(ve.value))),!F&&(this.inXHTMLMode||this.inHTMLMode)&&(c.localName==="head"||c.localName==="body")&&(F=m),F||(F=this.newBlankNode()),y=F)):(Pe&&(m=this.parseSafeCURIEOrCURIEOrURI(Pe.value,T,n)),!m&&he&&(m=this.parseSafeCURIEOrCURIEOrURI(he.value,T,n)),!m&&Fe&&(m=this.resolveAndNormalize(n,encodeURI(Fe.value))),!m&&ve&&(m=this.resolveAndNormalize(n,encodeURI(ve.value))),m||(c.parentNode.nodeType===Bn.DOCUMENT_NODE?m=a(c.baseURI):(this.inXHTMLMode||this.inHTMLMode)&&(c.localName==="head"||c.localName==="body")?m=a(c.parentNode.baseURI)===h.parentObject?a(c.baseURI):h.parentObject:Q?m=this.newBlankNode():h.parentObject&&(m=a(c.parentNode.baseURI)===h.parentObject?a(c.baseURI):h.parentObject,ae||(_=!0))),Q&&(F=m)),m&&(Pe||he||F)){var At=m;Q&&!Pe&&!he&&y&&(At=y),this.newSubjectOrigin(c,At)}if(F){Te=this.tokenize(Q.value);for(var Qt=0;Qt<Te.length;Qt++){var Kt=this.parseTermOrCURIEOrAbsURI(Te[Qt],P,h.terms,T,n);Kt&&this.addTriple(c,F,i.typeURI,{type:i.objectURI,value:Kt})}}if(m&&m!==h.parentObject&&(k={},A=!0),y){if(G&&lt)for(var pt=0;pt<He.length;pt++){var Ct=k[He[pt]];Ct||(Ct=[],k[He[pt]]=Ct),Ct.push({type:i.objectURI,value:y})}else if(G)for(var Ut=0;Ut<He.length;Ut++)this.addTriple(c,m,He[Ut],{type:i.objectURI,value:y});if(le)for(var Zt=0;Zt<Ot.length;Zt++)this.addTriple(c,y,Ot[Zt],{type:i.objectURI,value:m})}else{if(m&&!y&&(G||le)&&(y=this.newBlankNode()),G&&lt)for(var pr=0;pr<He.length;pr++){var V=k[He[pr]];V||(V=[],k[fe]=V),b.push({predicate:He[pr],list:V})}else if(G)for(var I=0;I<He.length;I++)b.push({predicate:He[I],forward:!0});if(le)for(var O=0;O<Ot.length;O++)b.push({predicate:Ot[O],forward:!1})}if(ae){var $=null,de=null;Ve?($=Ve.value===""?i.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(Ve.value,P,h.terms,T,n),ze&&!De?de=ze.value:de=$===i.XMLLiteralURI||$===i.HTMLLiteralURI?null:De?De.value:c.textContent):De?($=i.PlainLiteralURI,de=De.value):ze?(de=ze.value,$=i.deriveDateTimeType(de),$||($=i.PlainLiteralURI)):!G&&!le&&(he&&(de=this.parseSafeCURIEOrCURIEOrURI(he.value,T,n)),!de&&Fe?de=this.resolveAndNormalize(n,encodeURI(Fe.value)):!de&&ve&&(de=this.resolveAndNormalize(n,encodeURI(ve.value))),de&&($=i.objectURI)),$||(Q&&!Pe?($=i.objectURI,de=F):(de=c.textContent,this.inHTMLMode&&c.localName==="time"&&($=i.deriveDateTimeType(de)),$||($=i.PlainLiteralURI))),Te=this.tokenize(ae.value);for(var Ee=0;Ee<Te.length;Ee++){var Ae=this.parsePredicate(Te[Ee],P,h.terms,T,n);if(Ae)if(lt){var Je=k[Ae];Je||(Je=[],k[Ae]=Je),Je.push($===i.XMLLiteralURI||$===i.HTMLLiteralURI?{type:$,value:c.childNodes}:{type:$||i.PlainLiteralURI,value:de,language:L})}else $===i.XMLLiteralURI||$===i.HTMLLiteralURI?this.addTriple(c,m,Ae,{type:$,value:c.childNodes}):this.addTriple(c,m,Ae,{type:$||i.PlainLiteralURI,value:de,language:L})}}if(m&&!_)for(var it=0;it<h.incomplete.length;it++)h.incomplete[it].list?h.incomplete[it].list.push({type:i.objectURI,value:m}):h.incomplete[it].forward?this.addTriple(c,h.subject,h.incomplete[it].predicate,{type:i.objectURI,value:m}):this.addTriple(c,m,h.incomplete[it].predicate,{type:i.objectURI,value:h.subject});var Ie=null,Xe=m;_?(Ie=this.push(h,h.subject),Ie.parentObject=a(c.parentNode.baseURI)===h.parentObject?a(c.baseURI):h.parentObject,Ie.incomplete=h.incomplete,Ie.language=L,Ie.prefixes=T,Ie.vocabulary=P):(Ie=this.push(h,m),Ie.parentObject=y||m||h.subject,Ie.prefixes=T,Ie.incomplete=b,y&&(Xe=y,k={},A=!0),Ie.listMapping=k,Ie.language=L,Ie.vocabulary=P),A&&s.unshift({parent:c,context:h,subject:Xe,listMapping:k});for(var Ze=c.lastChild;Ze;Ze=Ze.previousSibling)Ze.nodeType===Bn.ELEMENT_NODE&&s.unshift({current:Ze,context:Ie})}this.inHTMLMode&&this.copyProperties();for(var ar=0;ar<this.finishedHandlers.length;ar++)this.finishedHandlers[ar](t)}},{key:"push",value:function(t,r){return{parent:t,subject:r||(t?t.subject:null),parentObject:null,incomplete:[],listMapping:t?t.listMapping:{},language:t?t.language:this.language,prefixes:t?t.prefixes:this.target.graph.prefixes,terms:t?t.terms:this.target.graph.terms,vocabulary:t?t.vocabulary:this.vocabulary}}},{key:"resolveAndNormalize",value:function(t,r){return Mr(r,t)}},{key:"setContext",value:function(t){t.localName==="html"&&t.getAttribute("version")==="XHTML+RDFa 1.1"?this.setXHTMLContext():t.localName==="html"||t.namespaceURI==="http://www.w3.org/1999/xhtml"?typeof document<"u"&&document.doctype?document.doctype.publicId==="-//W3C//DTD XHTML+RDFa 1.0//EN"&&document.doctype.systemId==="http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"?(console.log("WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode."),this.setHTMLContext()):document.doctype.publicId==="-//W3C//DTD XHTML+RDFa 1.1//EN"&&document.doctype.systemId==="http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"?this.setXHTMLContext():this.setHTMLContext():this.setHTMLContext():this.setXMLContext()}},{key:"setHTMLContext",value:function(){this.setInitialContext(),this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.inXHTMLMode=!1,this.inHTMLMode=!0}},{key:"setInitialContext",value:function(){this.vocabulary=null,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}]}},{key:"setXHTMLContext",value:function(){this.setInitialContext(),this.inXHTMLMode=!0,this.inHTMLMode=!1,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.target.graph.terms.alternate="http://www.w3.org/1999/xhtml/vocab#alternate",this.target.graph.terms.appendix="http://www.w3.org/1999/xhtml/vocab#appendix",this.target.graph.terms.bookmark="http://www.w3.org/1999/xhtml/vocab#bookmark",this.target.graph.terms.cite="http://www.w3.org/1999/xhtml/vocab#cite",this.target.graph.terms.chapter="http://www.w3.org/1999/xhtml/vocab#chapter",this.target.graph.terms.contents="http://www.w3.org/1999/xhtml/vocab#contents",this.target.graph.terms.copyright="http://www.w3.org/1999/xhtml/vocab#copyright",this.target.graph.terms.first="http://www.w3.org/1999/xhtml/vocab#first",this.target.graph.terms.glossary="http://www.w3.org/1999/xhtml/vocab#glossary",this.target.graph.terms.help="http://www.w3.org/1999/xhtml/vocab#help",this.target.graph.terms.icon="http://www.w3.org/1999/xhtml/vocab#icon",this.target.graph.terms.index="http://www.w3.org/1999/xhtml/vocab#index",this.target.graph.terms.last="http://www.w3.org/1999/xhtml/vocab#last",this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license",this.target.graph.terms.meta="http://www.w3.org/1999/xhtml/vocab#meta",this.target.graph.terms.next="http://www.w3.org/1999/xhtml/vocab#next",this.target.graph.terms.prev="http://www.w3.org/1999/xhtml/vocab#prev",this.target.graph.terms.previous="http://www.w3.org/1999/xhtml/vocab#previous",this.target.graph.terms.section="http://www.w3.org/1999/xhtml/vocab#section",this.target.graph.terms.stylesheet="http://www.w3.org/1999/xhtml/vocab#stylesheet",this.target.graph.terms.subsection="http://www.w3.org/1999/xhtml/vocab#subsection",this.target.graph.terms.start="http://www.w3.org/1999/xhtml/vocab#start",this.target.graph.terms.top="http://www.w3.org/1999/xhtml/vocab#top",this.target.graph.terms.up="http://www.w3.org/1999/xhtml/vocab#up",this.target.graph.terms.p3pv1="http://www.w3.org/1999/xhtml/vocab#p3pv1",this.target.graph.terms.related="http://www.w3.org/1999/xhtml/vocab#related",this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role",this.target.graph.terms.transformation="http://www.w3.org/1999/xhtml/vocab#transformation"}},{key:"setXMLContext",value:function(){this.setInitialContext(),this.inXHTMLMode=!1,this.inHTMLMode=!1}},{key:"tokenize",value:function(t){return this.trim(t).split(/\s+/)}},{key:"toRDFNodeObject",value:function(t){var r=this;if(!(typeof t>"u")){if(typeof t=="string")return t.substring(0,2)==="_:"?(typeof this.blankNodes[t.substring(2)]>"u"&&(this.blankNodes[t.substring(2)]=new fn(t.substring(2))),this.blankNodes[t.substring(2)]):xr.namedNode(t);switch(t.type){case i.objectURI:return t.value.substring(0,2)==="_:"?(typeof this.blankNodes[t.value.substring(2)]>"u"&&(this.blankNodes[t.value.substring(2)]=new fn(t.value.substring(2))),this.blankNodes[t.value.substring(2)]):xr.namedNode(t.value);case i.PlainLiteralURI:return new sn(t.value,t.language||"");case i.XMLLiteralURI:case i.HTMLLiteralURI:var n="";return Object.keys(t.value).forEach(function(s){n+=E2(t.value[s],r.htmlOptions)}),new sn(n,"",new hr(t.type));default:return new sn(t.value,"",new hr(t.type))}}}},{key:"trim",value:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}],[{key:"parseRDFaDOM",value:function(t,r,n){var s=new i(r,{base:n});t.baseURI||(t.baseURI=n),s.process(t,{baseURI:n})}},{key:"tokenize",value:function(t){return this.trim(t).split(/\s+/)}},{key:"trim",value:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}])}();Vr.XMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral";Vr.HTMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML";Vr.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral";Vr.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object";Vr.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";Vr.nameChar="[-A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�က0-F.0-9·̀-ͯ‿-⁀]";Vr.nameStartChar="[A-Za-zÀ-ÖØ-öø-ÿĀ-ıĴ-ľŁ-ňŊ-žƀ-ǃǍ-ǰǴ-ǵǺ-ȗɐ-ʨʻ-ˁΆΈ-ΊΌΎ-ΡΣ-ώϐ-ϖϚϜϞϠϢ-ϳЁ-ЌЎ-яё-ќў-ҁҐ-ӄӇ-ӈӋ-ӌӐ-ӫӮ-ӵӸ-ӹԱ-Ֆՙա-ֆא-תװ-ײء-غف-يٱ-ڷں-ھۀ-ێې-ۓەۥ-ۦअ-हऽक़-ॡঅ-ঌএ-ঐও-নপ-রলশ-হড়-ঢ়য়-ৡৰ-ৱਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઋઍએ-ઑઓ-નપ-રલ-ળવ-હઽૠଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଶ-ହଽଡ଼-ଢ଼ୟ-ୡஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-வஷ-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠ-ౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹೞೠ-ೡഅ-ഌഎ-ഐഒ-നപ-ഹൠ-ൡก-ฮะา-ำเ-ๅກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ຮະາ-ຳຽເ-ໄཀ-ཇཉ-ཀྵႠ-Ⴥა-ჶᄀᄂ-ᄃᄅ-ᄇᄉᄋ-ᄌᄎ-ᄒᄼᄾᅀᅌᅎᅐᅔ-ᅕᅙᅟ-ᅡᅣᅥᅧᅩᅭ-ᅮᅲ-ᅳᅵᆞᆨᆫᆮ-ᆯᆷ-ᆸᆺᆼ-ᇂᇫᇰᇹḀ-ẛẠ-ỹἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼΩK-Å℮ↀ-ↂぁ-ゔァ-ヺㄅ-ㄬ가-힣一-龥〇〡-〩_]";Vr.NCNAME=new RegExp("^"+Vr.nameStartChar+Vr.nameChar+"*$");Vr.dateTimeTypes=[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:"http://www.w3.org/2001/XMLSchema#duration"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#dateTime"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#date"},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#time"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:"http://www.w3.org/2001/XMLSchema#gYearMonth"},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:"http://www.w3.org/2001/XMLSchema#gYear"}];var ns=Vr.parseRDFaDOM,ys=function(){function i(e){Jt(this,i),this.store=e,this.bnodes={},this.why=null,this.reify=!1}return Yt(i,[{key:"frameFactory",value:function(t,r,n){return{NODE:1,ARC:2,parent:r,parser:t,store:t.store,element:n,lastChild:0,base:null,lang:null,node:null,nodeType:null,listIndex:1,rdfid:null,datatype:null,collection:!1,terminateFrame:function(){this.collection&&this.node.close()},addSymbol:function(a,l){l=Mr(l,this.base),this.node=this.store.sym(l),this.nodeType=a},loadTriple:function(){if(this.parent.parent.collection?this.parent.parent.node.append(this.node):this.store.add(this.parent.parent.node,this.parent.node,this.node,this.parser.why),this.parent.rdfid!=null){var a=this.store.sym(Mr("#"+this.parent.rdfid,this.base));this.store.add(a,this.store.sym(i.ns.RDF+"type"),this.store.sym(i.ns.RDF+"Statement"),this.parser.why),this.store.add(a,this.store.sym(i.ns.RDF+"subject"),this.parent.parent.node,this.parser.why),this.store.add(a,this.store.sym(i.ns.RDF+"predicate"),this.parent.node,this.parser.why),this.store.add(a,this.store.sym(i.ns.RDF+"object"),this.node,this.parser.why)}},isTripleToLoad:function(){return this.parent!=null&&this.parent.parent!=null&&this.nodeType===this.NODE&&this.parent.nodeType===this.ARC&&this.parent.parent.nodeType===this.NODE},addNode:function(a){this.addSymbol(this.NODE,a),this.isTripleToLoad()&&this.loadTriple()},addCollection:function(){this.nodeType=this.NODE,this.node=this.store.collection(),this.collection=!0,this.isTripleToLoad()&&this.loadTriple()},addCollectionArc:function(){this.nodeType=this.ARC},addBNode:function(a){a!=null?this.parser.bnodes[a]!=null?this.node=this.parser.bnodes[a]:this.node=this.parser.bnodes[a]=this.store.bnode():this.node=this.store.bnode(),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()},addArc:function(a){a===i.ns.RDF+"li"&&(a=i.ns.RDF+"_"+this.parent.listIndex,this.parent.listIndex++),this.addSymbol(this.ARC,a)},addLiteral:function(a){this.parent.datatype&&this.parent.datatype!==i.ns.RDF+"langString"?this.node=this.store.literal(a,this.store.sym(this.parent.datatype)):this.node=this.store.literal(a,this.lang),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()}}}},{key:"getAttributeNodeNS",value:function(t,r,n){var s=null;if(t.getAttributeNodeNS)s=t.getAttributeNodeNS(r,n);else for(var a=t.attributes,l,o,u=0;u<a.length;++u)if(l=a[u],l.namespaceURI===r&&(o=l.prefix?l.prefix+":"+n:n,o===l.nodeName)){s=l;break}return s}},{key:"parse",value:function(t,r,n){var s=t.childNodes;this.cleanParser();var a;if(t.nodeType===i.nodeType.DOCUMENT){for(var l=0;l<s.length;l++)if(s[l].nodeType===i.nodeType.ELEMENT){a=s[l];break}}else if(t.nodeType===i.nodeType.ELEMENT)a=t;else throw new Error("RDFParser: can't find root in "+r+". Halting. ");this.why=n;var o=this.frameFactory(this);return this.base=r,o.base=r,o.lang=null,this.parseDOM(this.buildFrame(o,a)),!0}},{key:"parseDOM",value:function(t){for(var r,n=(function(b){var k="";if(b.namespaceURI==null)throw new Error("RDF/XML syntax error: No namespace for "+b.localName+" in "+this.base);return b.namespaceURI&&(k=k+b.namespaceURI),b.localName?k=k+b.localName:b.nodeName&&(b.nodeName.indexOf(":")>=0?k=k+b.nodeName.split(":")[1]:k=k+b.nodeName),k}).bind(this),s=!0;t.parent;){var a=t.element,l=a.attributes;if(a.nodeType===i.nodeType.TEXT||a.nodeType===i.nodeType.CDATA_SECTION)t.parent.nodeType===t.NODE&&(t.addArc(i.ns.RDF+"value"),t=this.buildFrame(t)),t.addLiteral(a.nodeValue);else if(n(a)!==i.ns.RDF+"RDF")if(t.parent&&t.parent.collection&&(t.addCollectionArc(),t=this.buildFrame(t,t.element),t.parent.element=null),!t.parent||!t.parent.nodeType||t.parent.nodeType===t.ARC){var o=this.getAttributeNodeNS(a,i.ns.RDF,"about");if(r=this.getAttributeNodeNS(a,i.ns.RDF,"ID"),o&&r)throw new Error("RDFParser: "+a.nodeName+" has both rdf:id and rdf:about. Halting. Only one of these properties may be specified on a node.");if(!o&&r)t.addNode("#"+r.nodeValue),a.removeAttributeNode(r);else if(o==null&&r==null){var u=this.getAttributeNodeNS(a,i.ns.RDF,"nodeID");u?(t.addBNode(u.nodeValue),a.removeAttributeNode(u)):t.addBNode()}else t.addNode(o.nodeValue),a.removeAttributeNode(o);var f=this.getAttributeNodeNS(a,i.ns.RDF,"type");i.ns.RDF+"Description"!==n(a)&&(f={nodeValue:n(a)}),f!=null&&(this.store.add(t.node,this.store.sym(i.ns.RDF+"type"),this.store.sym(Mr(f.nodeValue,t.base)),this.why),f.nodeName&&a.removeAttributeNode(f));for(var p=l.length-1;p>=0;p--)this.store.add(t.node,this.store.sym(n(l[p])),this.store.literal(l[p].nodeValue,t.lang),this.why)}else{t.addArc(n(a)),this.reify&&(r=this.getAttributeNodeNS(a,i.ns.RDF,"ID"),r&&(t.rdfid=r.nodeValue,a.removeAttributeNode(r)));var d=this.getAttributeNodeNS(a,i.ns.RDF,"parseType"),c=this.getAttributeNodeNS(a,i.ns.RDF,"datatype");if(c&&(t.datatype=c.nodeValue,a.removeAttributeNode(c)),d){var h=d.nodeValue;h==="Literal"?(t.datatype=i.ns.RDF+"XMLLiteral",t=this.buildFrame(t),t.addLiteral(a.innerHTML||a.childNodes),s=!1):h==="Resource"?(t=this.buildFrame(t,t.element),t.parent.element=null,t.addBNode()):h==="Collection"&&(t=this.buildFrame(t,t.element),t.parent.element=null,t.addCollection()),a.removeAttributeNode(d)}if(l.length!==0){var _=this.getAttributeNodeNS(a,i.ns.RDF,"resource"),m=this.getAttributeNodeNS(a,i.ns.RDF,"nodeID");t=this.buildFrame(t),_?(t.addNode(_.nodeValue),a.removeAttributeNode(_)):m?(t.addBNode(m.nodeValue),a.removeAttributeNode(m)):t.addBNode();for(var y=l.length-1;y>=0;y--){var F=this.buildFrame(t);F.addArc(n(l[y])),n(l[y])===i.ns.RDF+"type"?this.buildFrame(F).addNode(l[y].nodeValue):this.buildFrame(F).addLiteral(l[y].nodeValue)}}else a.childNodes.length===0&&this.buildFrame(t).addLiteral("")}for(a=t.element;t.parent;){for(var T=t;a==null;)t=t.parent,a=t.element;var N=a.childNodes&&a.childNodes[t.lastChild];if(!N||!s){if(t.terminateFrame(),!(t=t.parent))break;a=t.element,s=!0}else if(N.nodeType!==i.nodeType.ELEMENT&&N.nodeType!==i.nodeType.TEXT&&N.nodeType!==i.nodeType.CDATA_SECTION||(N.nodeType===i.nodeType.TEXT||N.nodeType===i.nodeType.CDATA_SECTION)&&a.childNodes.length!==1)t.lastChild++;else{t.lastChild++,t=this.buildFrame(T,a.childNodes[t.lastChild-1]);break}}}}},{key:"cleanParser",value:function(){this.bnodes={},this.why=null}},{key:"buildFrame",value:function(t,r){var n=this.frameFactory(this,t,r);if(t&&(n.base=t.base,n.lang=t.lang),!r||r.nodeType===i.nodeType.TEXT||r.nodeType===i.nodeType.CDATA_SECTION)return n;var s=r.attributes,a=r.getAttributeNode("xml:base");a!=null&&(n.base=a.nodeValue,r.removeAttribute("xml:base"));var l=r.getAttributeNode("xml:lang");l!=null&&(n.lang=l.nodeValue,r.removeAttribute("xml:lang"));for(var o=s.length-1;o>=0;o--)if(s[o].nodeName.substr(0,3)==="xml"){if(s[o].name.slice(0,6)==="xmlns:"){var u=s[o].nodeValue;this.base&&(u=Mr(u,this.base)),this.store.setPrefixForURI(s[o].name.slice(6),u)}r.removeAttributeNode(s[o])}return n}}])}();qe(ys,"ns",{RDF:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDFS:"http://www.w3.org/2000/01/rdf-schema#"});qe(ys,"nodeType",{ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12});function Fb(i,e,t){var r,n,s,a=["INSERT","DELETE","WHERE"],l=yr("http://www.w3.org/ns/pim/patch#"),o=Wl(e,e,t,t,null,null,"",null),u={},f=function(m,y,F,T,N){return"Line "+(y+1)+" of <"+m+`>: Bad syntax:
   `+N+`
   at: "`+F.slice(T,T+30)+'"'};r=0;var p=e.sym(t+"#query");for(u.query=p;;){if(n=o.skipSpace(i,r),n<0)return u;if(i[n]===";"){if(r=o.skipSpace(i,n+1),r<0)return u;n=r}var d=!1;for(s=0;s<a.length;s++){var c=a[s];if(i.slice(n,n+c.length)===c){if(r=o.skipSpace(i,n+c.length),r<0)throw f(o._thisDoc,o.lines,i,n+c.length,"found EOF, needed {...} after "+c);if((c==="INSERT"||c==="DELETE")&&i.slice(r,r+4)==="DATA"){if(n=o.skipSpace(i,r+4),n<0)throw f(o._thisDoc,o.lines,i,r+4,"needed {...} after INSERT DATA "+c);r=n}var h=[];if(n=o.node(i,r,h),n<0)throw f(o._thisDoc,o.lines,i,r,"bad syntax or EOF in {...} after "+c);u[c.toLowerCase()]=h[0],e.add(p,l(c.toLowerCase()),h[0]),d=!0,r=n}}if(!d&&i.slice(n,n+7)==="@prefix"){if(r=o.directive(i,n),r<0)throw f(o._thisDoc,o.lines,i,r,"bad syntax or EOF after @prefix ");r=o.checkDot(i,r),d=!0}if(!d)throw f(o._thisDoc,o.lines,i,n,"Unknown syntax at start of statememt: '"+i.slice(n).slice(0,20)+"'")}}function yl(i,e,t){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"text/turtle",n=arguments.length>4?arguments[4]:void 0;r=r||ri,r=r.split(";")[0];try{if(r===cp||r===ri){var s=Wl(e,e,t,t,null,null,"",null);s.loadBuf(i),o()}else if(r===ta){var a=new ys(e);a.parse(Ai(i),t,e.sym(t)),o()}else if(r===ml)ns(Ai(i,{contentType:ml}),e,t),o();else if(r===bu)ns(Ai(i,{contentType:bu}),e,t),o();else if(r===Tg||r===Ng)Fb(i,e,t),o();else if(r===hl)l_(i,e,t,o);else if(r===_l||r===pl){var l=new h_({factory:wl});f(null,i)}else throw r===void 0?new Error("contentType is undefined"):new Error("Don't know how to parse "+r+" yet")}catch(d){u(d)}yl.handled={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/sparql-update":!0,"application/sparql-update-single-match":!0,"application/ld+json":!0,"application/nquads":!0,"application/n-quads":!0};function o(){if(n)n(null,e);else return}function u(d){if(r!==hl||r!==_l||r!==pl)if(n)n(d,e);else{var c=new Error(""+d+" while trying to parse <"+t+"> as "+r);throw c.cause=d,c}}function f(d,c){try{l.parse(c,p)}catch(h){n(h,e)}}function p(d,c){c?e.add(c.subject,c.predicate,c.object,c.graph):n(d,e)}}var El={exports:{}};(function(i,e){var t=typeof self<"u"?self:us,r=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(a){var l={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function o(S){return S&&DataView.prototype.isPrototypeOf(S)}if(l.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(S){return S&&u.indexOf(Object.prototype.toString.call(S))>-1};function p(S){if(typeof S!="string"&&(S=String(S)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(S))throw new TypeError("Invalid character in header field name");return S.toLowerCase()}function d(S){return typeof S!="string"&&(S=String(S)),S}function c(S){var X={next:function(){var j=S.shift();return{done:j===void 0,value:j}}};return l.iterable&&(X[Symbol.iterator]=function(){return X}),X}function h(S){this.map={},S instanceof h?S.forEach(function(X,j){this.append(j,X)},this):Array.isArray(S)?S.forEach(function(X){this.append(X[0],X[1])},this):S&&Object.getOwnPropertyNames(S).forEach(function(X){this.append(X,S[X])},this)}h.prototype.append=function(S,X){S=p(S),X=d(X);var j=this.map[S];this.map[S]=j?j+", "+X:X},h.prototype.delete=function(S){delete this.map[p(S)]},h.prototype.get=function(S){return S=p(S),this.has(S)?this.map[S]:null},h.prototype.has=function(S){return this.map.hasOwnProperty(p(S))},h.prototype.set=function(S,X){this.map[p(S)]=d(X)},h.prototype.forEach=function(S,X){for(var j in this.map)this.map.hasOwnProperty(j)&&S.call(X,this.map[j],j,this)},h.prototype.keys=function(){var S=[];return this.forEach(function(X,j){S.push(j)}),c(S)},h.prototype.values=function(){var S=[];return this.forEach(function(X){S.push(X)}),c(S)},h.prototype.entries=function(){var S=[];return this.forEach(function(X,j){S.push([j,X])}),c(S)},l.iterable&&(h.prototype[Symbol.iterator]=h.prototype.entries);function _(S){if(S.bodyUsed)return Promise.reject(new TypeError("Already read"));S.bodyUsed=!0}function m(S){return new Promise(function(X,j){S.onload=function(){X(S.result)},S.onerror=function(){j(S.error)}})}function y(S){var X=new FileReader,j=m(X);return X.readAsArrayBuffer(S),j}function F(S){var X=new FileReader,j=m(X);return X.readAsText(S),j}function T(S){for(var X=new Uint8Array(S),j=new Array(X.length),ne=0;ne<X.length;ne++)j[ne]=String.fromCharCode(X[ne]);return j.join("")}function N(S){if(S.slice)return S.slice(0);var X=new Uint8Array(S.byteLength);return X.set(new Uint8Array(S)),X.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(S){this._bodyInit=S,S?typeof S=="string"?this._bodyText=S:l.blob&&Blob.prototype.isPrototypeOf(S)?this._bodyBlob=S:l.formData&&FormData.prototype.isPrototypeOf(S)?this._bodyFormData=S:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(S)?this._bodyText=S.toString():l.arrayBuffer&&l.blob&&o(S)?(this._bodyArrayBuffer=N(S.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(S)||f(S))?this._bodyArrayBuffer=N(S):this._bodyText=S=Object.prototype.toString.call(S):this._bodyText="",this.headers.get("content-type")||(typeof S=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(S)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var S=_(this);if(S)return S;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?_(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var S=_(this);if(S)return S;if(this._bodyBlob)return F(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(T(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(P)}),this.json=function(){return this.text().then(JSON.parse)},this}var k=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function A(S){var X=S.toUpperCase();return k.indexOf(X)>-1?X:S}function L(S,X){X=X||{};var j=X.body;if(S instanceof L){if(S.bodyUsed)throw new TypeError("Already read");this.url=S.url,this.credentials=S.credentials,X.headers||(this.headers=new h(S.headers)),this.method=S.method,this.mode=S.mode,this.signal=S.signal,!j&&S._bodyInit!=null&&(j=S._bodyInit,S.bodyUsed=!0)}else this.url=String(S);if(this.credentials=X.credentials||this.credentials||"same-origin",(X.headers||!this.headers)&&(this.headers=new h(X.headers)),this.method=A(X.method||this.method||"GET"),this.mode=X.mode||this.mode||null,this.signal=X.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&j)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(j)}L.prototype.clone=function(){return new L(this,{body:this._bodyInit})};function P(S){var X=new FormData;return S.trim().split("&").forEach(function(j){if(j){var ne=j.split("="),J=ne.shift().replace(/\+/g," "),W=ne.join("=").replace(/\+/g," ");X.append(decodeURIComponent(J),decodeURIComponent(W))}}),X}function B(S){var X=new h,j=S.replace(/\r?\n[\t ]+/g," ");return j.split(/\r?\n/).forEach(function(ne){var J=ne.split(":"),W=J.shift().trim();if(W){var x=J.join(":").trim();X.append(W,x)}}),X}b.call(L.prototype);function D(S,X){X||(X={}),this.type="default",this.status=X.status===void 0?200:X.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in X?X.statusText:"OK",this.headers=new h(X.headers),this.url=X.url||"",this._initBody(S)}b.call(D.prototype),D.prototype.clone=function(){return new D(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},D.error=function(){var S=new D(null,{status:0,statusText:""});return S.type="error",S};var R=[301,302,303,307,308];D.redirect=function(S,X){if(R.indexOf(X)===-1)throw new RangeError("Invalid status code");return new D(null,{status:X,headers:{location:S}})},a.DOMException=s.DOMException;try{new a.DOMException}catch{a.DOMException=function(X,j){this.message=X,this.name=j;var ne=Error(X);this.stack=ne.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function w(S,X){return new Promise(function(j,ne){var J=new L(S,X);if(J.signal&&J.signal.aborted)return ne(new a.DOMException("Aborted","AbortError"));var W=new XMLHttpRequest;function x(){W.abort()}W.onload=function(){var G={status:W.status,statusText:W.statusText,headers:B(W.getAllResponseHeaders()||"")};G.url="responseURL"in W?W.responseURL:G.headers.get("X-Request-URL");var le="response"in W?W.response:W.responseText;j(new D(le,G))},W.onerror=function(){ne(new TypeError("Network request failed"))},W.ontimeout=function(){ne(new TypeError("Network request failed"))},W.onabort=function(){ne(new a.DOMException("Aborted","AbortError"))},W.open(J.method,J.url,!0),J.credentials==="include"?W.withCredentials=!0:J.credentials==="omit"&&(W.withCredentials=!1),"responseType"in W&&l.blob&&(W.responseType="blob"),J.headers.forEach(function(G,le){W.setRequestHeader(le,G)}),J.signal&&(J.signal.addEventListener("abort",x),W.onreadystatechange=function(){W.readyState===4&&J.signal.removeEventListener("abort",x)}),W.send(typeof J._bodyInit>"u"?null:J._bodyInit)})}return w.polyfill=!0,s.fetch||(s.fetch=w,s.Headers=h,s.Request=L,s.Response=D),a.Headers=h,a.Request=L,a.Response=D,a.fetch=w,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var n=r;e=n.fetch,e.default=n.fetch,e.fetch=n.fetch,e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response,i.exports=e})(El,El.exports);var Va=El.exports;const Ob=oa(Va);function Bb(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=Lb(i))||e){t&&(i=t);var r=0,n=function(){};return{s:n,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(u){throw u},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,l;return{s:function(){t=t.call(i)},n:function(){var u=t.next();return s=u.done,u},e:function(u){a=!0,l=u},f:function(){try{!s&&t.return!=null&&t.return()}finally{if(a)throw l}}}}function Lb(i,e){if(i){if(typeof i=="string")return sf(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return sf(i,e)}}function sf(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=i[t];return r}function ci(i,e,t){return e=sr(e),Tn(i,__()?Reflect.construct(e,t||[],sr(i).constructor):e.apply(i,t))}function __(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(__=function(){return!!i})()}var Ub={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/ld+json":!0},m_={rdf:ta,owl:ta,n3:"text/n3",ttl:"text/turtle",nt:"text/n3",acl:"text/n3",html:"text/html",xml:"text/xml"},v_=function(e){return{link:yr("http://www.w3.org/2007/ont/link#",e),http:yr("http://www.w3.org/2007/ont/http#",e),httph:yr("http://www.w3.org/2007/ont/httph#",e),rdf:yr("http://www.w3.org/1999/02/22-rdf-syntax-ns#",e),rdfs:yr("http://www.w3.org/2000/01/rdf-schema#",e),dc:yr("http://purl.org/dc/elements/1.1/",e),ldp:yr("http://www.w3.org/ns/ldp#",e)}},hn=v_(),Gn=Yt(function i(e,t){Jt(this,i),qe(this,"response",void 0),qe(this,"dom",void 0),this.response=e,this.dom=t});qe(Gn,"pattern",void 0);var Zl=function(i){function e(){return Jt(this,e),ci(this,e,arguments)}return Er(e,i),Yt(e,[{key:"parse",value:function(r,n,s){var a=r.store;this.dom||(this.dom=Ai(n));var l=this.dom.documentElement;if(l.nodeName==="parsererror")return r.failFetch(s,"Badly formed XML in "+s.resource.value,"parse_error");var o=new ys(a);try{o.parse(this.dom,s.original.value,s.original)}catch(u){return r.failFetch(s,"Syntax error parsing RDF/XML! "+u,"parse_error")}return s.noMeta||a.add(s.original,hn.rdf("type"),hn.link("RDFDocument"),r.appNode),r.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"RDFXMLHandler"}},{key:"register",value:function(r){r.mediatypes[ta]={q:.9}}}])}(Gn);Zl.pattern=new RegExp("application/rdf\\+xml");var ii=function(i){function e(){return Jt(this,e),ci(this,e,arguments)}return Er(e,i),Yt(e,[{key:"parse",value:function(r,n,s){var a,l;this.dom||(this.dom=Ai(n));var o=r.store,u=this.dom.getElementsByTagName("title");u.length>0&&o.add(s.resource,hn.dc("title"),o.rdfFactory.literal(u[0].textContent),s.resource);for(var f=this.dom.getElementsByTagName("link"),p=f.length-1;p>=0;p--)a=f[p].getAttribute("rel"),l=!1,a||(a=f[p].getAttribute("rev"),l=!0),a&&r.linkData(s.original,a,f[p].getAttribute("href"),s.resource,l);for(var d=this.dom.getElementsByTagName("script"),c=0;c<d.length;c++){var h=d[c].getAttribute("type");Ub[h]&&(yl(d[c].textContent,o,s.original.value,h),yl(d[c].textContent,o,s.original.value,h))}if(s.noMeta||o.add(s.resource,hn.rdf("type"),hn.link("WebPage"),r.appNode),!s.noRDFa&&ns)try{ns(this.dom,o,s.original.value)}catch(m){var _="Error trying to parse "+s.resource+` as RDFa:
`+m+`:
`+m.stack;return r.failFetch(s,_,"parse_error")}return r.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"XHTMLHandler"}},{key:"register",value:function(r){r.mediatypes[ml]={}}}])}(Gn);ii.pattern=new RegExp("application/xhtml");var is=function(i){function e(){return Jt(this,e),ci(this,e,arguments)}return Er(e,i),Yt(e,[{key:"parse",value:function(r,n,s){for(var a=Ai(n),l=0;l<a.childNodes.length;l++){var o=a.childNodes[l];if(e.isElement(o)){var u=o.namespaceURI;if(u&&u===u.rdf){r.addStatus(s.req,"Has XML root element in the RDF namespace, so assume RDF/XML.");var f=new Zl(this.response,a);return f.parse(r,n,s)}break}}if(a.doctype&&a.doctype.name==="html"&&a.doctype.publicId.match(/^-\/\/W3C\/\/DTD XHTML/)&&a.doctype.systemId.match(/http:\/\/www.w3.org\/TR\/xhtml/)){r.addStatus(s.req,`Has XHTML DOCTYPE. Switching to XHTML Handler.
`);var p=new ii(this.response,a);return p.parse(r,n,s)}var d=a.getElementsByTagName("html")[0];if(d){var c=d.getAttribute("xmlns");if(c&&c.match(/^http:\/\/www.w3.org\/1999\/xhtml/)){r.addStatus(s.req,`Has a default namespace for XHTML. Switching to XHTMLHandler.
`);var h=new ii(this.response,a);return h.parse(r,n,s)}}return r.failFetch(s,`Unsupported dialect of XML: not RDF or XHTML namespace, etc.
`+n.slice(0,80),901)}}],[{key:"toString",value:function(){return"XMLHandler"}},{key:"register",value:function(r){r.mediatypes["text/xml"]={q:.5},r.mediatypes["application/xml"]={q:.5}}},{key:"isElement",value:function(r){return r.nodeType===Node.ELEMENT_NODE}}])}(Gn);is.pattern=new RegExp("(text|application)/(.*)xml");var g_=function(i){function e(){return Jt(this,e),ci(this,e,arguments)}return Er(e,i),Yt(e,[{key:"parse",value:function(r,n,s){var a=r.store;if(E_(n)){r.addStatus(s.req,`Has an XML declaration. We'll assume it's XHTML as the content-type was text/html.
`);var l=new ii(this.response);return l.parse(r,n,s)}if(jb(n)){r.addStatus(s.req,`Has XHTML DOCTYPE. Switching to XHTMLHandler.
`);var o=new ii(this.response);return o.parse(r,n,s)}if(qb(n)){r.addStatus(s.req,`Has default namespace for XHTML, so switching to XHTMLHandler.
`);var u=new ii(this.response);return u.parse(r,n,s)}var f=new RegExp("<title>([\\s\\S]+?)</title>","im").exec(n);return f&&a.add(s.resource,hn.dc("title"),a.rdfFactory.literal(f[1]),s.resource),a.add(s.resource,hn.rdf("type"),hn.link("WebPage"),r.appNode),r.addStatus(s.req,"non-XML HTML document, not parsed for data."),r.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"HTMLHandler"}},{key:"register",value:function(r){r.mediatypes["text/html"]={q:.9}}}])}(Gn);g_.pattern=new RegExp("text/html");var b_=function(i){function e(){return Jt(this,e),ci(this,e,arguments)}return Er(e,i),Yt(e,[{key:"parse",value:function(r,n,s,a){var l=r.store;return new Promise(function(o,u){try{l_(n,l,s.original.value,function(){o(r.doneFetch(s,a))})}catch(p){var f="Error trying to parse "+s.resource+` as JSON-LD:
`+p;o(r.failFetch(s,f,"parse_error",a))}})}}],[{key:"toString",value:function(){return"JsonLdHandler"}},{key:"register",value:function(r){r.mediatypes["application/ld+json"]={q:.9}}}])}(Gn);b_.pattern=/application\/ld\+json/;var w_=function(i){function e(){return Jt(this,e),ci(this,e,arguments)}return Er(e,i),Yt(e,[{key:"parse",value:function(r,n,s){if(E_(n)){r.addStatus(s.req,"Warning: "+s.resource+` has an XML declaration. We'll assume it's XML but its content-type wasn't XML.
`);var a=new is(this.response);return a.parse(r,n,s)}if(n.slice(0,500).match(/xmlns:/)){r.addStatus(s.req,`May have an XML namespace. We'll assume it's XML but its content-type wasn't XML.
`);var l=new is(this.response);return l.parse(r,n,s)}return r.addStatus(s.req,"Plain text document, no known RDF semantics."),r.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"TextHandler"}},{key:"register",value:function(r){r.mediatypes["text/plain"]={q:.5}}}])}(Gn);w_.pattern=new RegExp("text/plain");var y_=function(i){function e(){return Jt(this,e),ci(this,e,arguments)}return Er(e,i),Yt(e,[{key:"parse",value:function(r,n,s,a){var l=r.store,o=Wl(l,l,s.original.value,s.original.value,null,null,"",null);try{o.loadBuf(n)}catch(f){var u="Error trying to parse "+s.resource+` as Notation3:
`+f;return r.failFetch(s,u,"parse_error",a)}return r.addStatus(s.req,"N3 parsed: "+o.statementCount+" triples in "+o.lines+" lines."),r.store.add(s.original,hn.rdf("type"),hn.link("RDFDocument"),r.appNode),r.doneFetch(s,this.response)}}],[{key:"toString",value:function(){return"N3Handler"}},{key:"register",value:function(r){r.mediatypes["text/n3"]={q:"1.0"},r.mediatypes["text/turtle"]={q:1}}}])}(Gn);y_.pattern=new RegExp("(application|text)/(x-)?(rdf\\+)?(n3|turtle)");var Dl={RDFXMLHandler:Zl,XHTMLHandler:ii,XMLHandler:is,HTMLHandler:g_,TextHandler:w_,N3Handler:y_,JsonLdHandler:b_};function jb(i){var e=i.indexOf("<!DOCTYPE html"),t=i.indexOf(">");return e===-1||t===-1||e>t?!1:i.substr(e,t-e).indexOf("XHTML")!==-1}function E_(i){var e=i.match(/\s*<\?xml\s+version\s*=[^<>]+\?>/);return!!e}function qb(i){var e=i.match(/[^(<html)]*<html\s+[^<]*xmlns=['"]http:\/\/www.w3.org\/1999\/xhtml["'][^<]*>/);return!!e}var Oi=function(){function i(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Jt(this,i),qe(this,"store",void 0),qe(this,"timeout",void 0),qe(this,"_fetch",void 0),qe(this,"mediatypes",void 0),qe(this,"appNode",void 0),qe(this,"requested",void 0),qe(this,"timeouts",void 0),qe(this,"redirectedTo",void 0),qe(this,"fetchQueue",void 0),qe(this,"fetchCallbacks",void 0),qe(this,"nonexistent",void 0),qe(this,"lookedUp",void 0),qe(this,"handlers",void 0),qe(this,"ns",void 0),qe(this,"fireCallbacks",void 0),this.store=e||new _a,this.ns=v_(this.store.rdfFactory),this.timeout=r.timeout||3e4,this._fetch=r.fetch||typeof global<"u"&&(global.solidFetcher||global.solidFetch)||typeof window<"u"&&(window.solidFetcher||window.solidFetch)||Ob,!this._fetch)throw new Error("No _fetch function available for Fetcher");this.appNode=this.store.sym("chrome://TheCurrentSession"),this.store.fetcher=this,this.requested={},this.timeouts={},this.redirectedTo={},this.fetchQueue={},this.fetchCallbacks={},this.nonexistent={},this.lookedUp={},this.handlers=[],this.mediatypes={"image/*":{q:.9},"*/*":{q:.1}},y2(this,["request","fail","refresh","retract","done"]),Object.keys(r.handlers||Dl).map(function(n){return t.addHandler(Dl[n])})}return Yt(i,[{key:"load",value:function(t){var r=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(n=Object.assign({},n),t instanceof Array)return Promise.all(t.map(function(m){return r.load(m,Object.assign({},n))}));var s=t,a=wi(s);a=a.split("#")[0],n=this.initFetchOptions(a,n);var l=this.appNode,o=this.store,u=o.statementsMatching(void 0,this.ns.link("requestedURI"),o.sym(a),l).map(function(m){return m.subject}),f=Bb(u),p;try{for(f.s();!(p=f.n()).done;){var d=p.value,c=o.any(d,this.ns.link("response"),null,l);if(c!=null){var h=o.statementsMatching(c,this.ns.link("outOfDate"),!0,l);o.remove(h),n.force=!0,n.clearPreviousData=!0}}}catch(m){f.e(m)}finally{f.f()}var _=this.initFetchOptions(a,n);return this.pendingFetchPromise(a,_.baseURI,_)}},{key:"pendingFetchPromise",value:function(){var e=Du(Pa.mark(function r(n,s,a){var l=this,o;return Pa.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(f.t0=!a.force,!f.t0){f.next=5;break}return f.next=4,this.fetchQueue[s];case 4:f.t0=f.sent;case 5:if(!f.t0){f.next=9;break}o=this.fetchQueue[s],f.next=12;break;case 9:o=Promise.race([this.setRequestTimeout(n,a),this.fetchUri(n,a)]),this.fetchQueue[s]=o,this.cleanupFetchRequest(s,void 0,this.timeout);case 12:return f.abrupt("return",o.then(function(p){return n in l.timeouts&&(l.timeouts[n].forEach(clearTimeout),delete l.timeouts[n]),p}));case 13:case"end":return f.stop()}},r,this)}));function t(r,n,s){return e.apply(this,arguments)}return t}()},{key:"cleanupFetchRequest",value:function(t,r,n){var s=this;r!==void 0&&console.warn("_options is deprecated"),this.timeouts[t]=(this.timeouts[t]||[]).concat(setTimeout(function(){s.isPending(t)||delete s.fetchQueue[t]},n))}},{key:"initFetchOptions",value:function(t,r){var n=this.store,s=!r.method||r.method.toUpperCase()==="GET";s||(r.force=!0),r.resource=n.rdfFactory.namedNode(t),r.baseURI=r.baseURI||t,r.original=n.rdfFactory.namedNode(r.baseURI),r.req=n.bnode(),r.headers=r.headers||new Va.Headers,r.contentType&&(r.headers["content-type"]=r.contentType),r.force&&(r.cache="no-cache");var a=this.acceptString();r.headers.accept=a;var l=i.offlineOverride(t);r.requestedURI=l,i.setCredentials(l,r);var o=i.proxyIfNecessary(l);return l!==o&&(r.proxyUsed=!0),r.actualProxyURI=o,r}},{key:"fetchUri",value:function(t,r){var n=this;if(!t)return Promise.reject(new Error("Cannot fetch an empty uri"));if(i.unsupportedProtocol(t))return this.failFetch(r,"fetcher: Unsupported protocol","unsupported_protocol");var s=this.getState(t);if(r.force)delete this.nonexistent[t];else{if(s==="fetched")return Promise.resolve(this.doneFetch(r,{status:200,ok:!0,statusText:"Already loaded into quadstore."}));if(s==="failed"&&this.requested[t]===404){var a="Previously failed: "+this.requested[t],l={url:t,status:this.requested[t],statusText:a,responseText:a,headers:new Va.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return this.failFetch(r,a,this.requested[t],l)}}this.fireCallbacks("request",[t]),this.requested[t]=!0,r.noMeta||this.saveRequestMetadata(t,r);var o=r.actualProxyURI;return this._fetch(o,r).then(function(u){return n.handleResponse(u,t,r)},function(u){var f={url:o,status:999,statusText:(u.name||"network failure")+": "+(u.errno||u.code||u.type),responseText:u.message,headers:new Va.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return n.handleError(f,t,r)})}},{key:"nowOrWhenFetched",value:function(t,r,n){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=wi(t);typeof r=="function"?n=r:typeof r>"u"||(yu(r)?s.referringTerm=r:s=r),this.load(a,s).then(function(l){if(n)if(l)if(l.ok)n(!0,"OK",l);else{var o="HTTP error: Status "+l.status+" ("+l.statusText+")";l.responseText&&(o+=" "+l.responseText),n(!1,o,l)}else{var u="@@ nowOrWhenFetched:  no response object!";n(!1,u)}},function(l){var o=l.message||l.statusText;o="Failed to load  <"+a+"> "+o,l.response&&l.response.status&&(o+=" status: "+l.response.status),n(!1,o,l.response)})}},{key:"addStatus",value:function(t,r){var n=new Date;r="["+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()+"."+n.getMilliseconds()+"] "+r;var s=this.store,a=s.the(t,this.ns.link("status"));Ul(a)&&a.append(s.rdfFactory.literal(r))}},{key:"failFetch",value:function(t,r,n,s){this.addStatus(t.req,r),t.noMeta||this.store.add(t.original,this.ns.link("error"),this.store.rdfFactory.literal(r));var a=(t.method||"GET").toUpperCase(),l=a==="GET"||a==="HEAD";l&&(t.resource.equals(t.original),this.requested[Di(t.original.value)]=n,this.fireCallbacks("fail",[t.original.value,r]));var o=new Error("Fetcher: "+r);return o.status=n,o.statusText=r,o.response=s,Promise.reject(o)}},{key:"linkData",value:function(t,r,n,s,a){if(n){var l=this.store,o,u=l.rdfFactory.namedNode(Mr(n,t.value));if(r==="alternate"||r==="seeAlso"||r==="meta"||r==="describedby"){if(u.value===t.value)return;o=this.ns.rdfs("seeAlso")}else r==="type"?o=l.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):o=l.rdfFactory.namedNode(Mr(encodeURIComponent(r),"http://www.iana.org/assignments/link-relations/"));a?l.add(u,o,t,s):l.add(t,o,u,s)}}},{key:"parseLinkHeader",value:function(t,r,n){if(t){var s=/<[^>]*>\s*(\s*;\s*[^()<>@,;:"/[\]?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*")))*(,|$)/g,a=/[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*"))/g,l=t.match(s);if(l!=null)for(var o=0;o<l.length;o++){var u=l[o].split(">"),f=u[0].substring(1),p=u[1],d=p.match(a);if(d==null)return;for(var c=0;c<d.length;c++){var h=d[c],_=h.split("="),m=_[1].replace(/["']/g,"");this.linkData(r,m,f,n)}}}}},{key:"doneFetch",value:function(t,r){return this.addStatus(t.req,"Done."),this.requested[t.original.value]="done",this.fireCallbacks("done",[t.original.value]),r.req=t.req,r}},{key:"nowKnownAs",value:function(t,r){this.lookedUp[t.value]?this.lookedUp[r.value]||this.lookUpThing(r,t):this.lookedUp[r.value]&&(this.lookedUp[t.value]||this.lookUpThing(t,r))}},{key:"putBack",value:function(t){var r=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=wi(t),a=new hr(s).doc();return n.contentType=n["content-type"]||n["Content-Type"]||n.contentType||ri,n.contentType==="application/ld+json"?new Promise(function(l,o){sa(a,r.store,a.uri,n.contentType,function(u,f){u?o(u):(n.data=f,r.webOperation("PUT",t,n).then(function(p){return l(p)}).catch(function(p){return o(p)}))})}):(n.data=sa(a,this.store,a.value,n.contentType),this.webOperation("PUT",s,n))}},{key:"webCopy",value:function(t,r,n){var s=this;return this.webOperation("GET",t).then(function(a){return s.webOperation("PUT",r,{data:a.responseText,contentType:n})})}},{key:"delete",value:function(t,r){var n=this;return this.webOperation("DELETE",t,r).then(function(s){return n.requested[t]=404,n.nonexistent[t]=!0,n.unload(n.store.rdfFactory.namedNode(t)),s})}},{key:"createIfNotExists",value:function(){var e=Du(Pa.mark(function r(n){var s,a,l,o,u=arguments;return Pa.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return s=u.length>1&&u[1]!==void 0?u[1]:ri,a=u.length>2&&u[2]!==void 0?u[2]:"",l=this,p.prev=3,p.next=6,l.load(n);case 6:o=p.sent,p.next=26;break;case 9:if(p.prev=9,p.t0=p.catch(3),p.t0.response.status!==404){p.next=25;break}return p.prev=12,p.next=15,l.webOperation("PUT",n.value,{data:a,contentType:s});case 15:o=p.sent,p.next=21;break;case 18:throw p.prev=18,p.t1=p.catch(12),p.t1;case 21:return delete l.requested[n.value],p.abrupt("return",o);case 25:throw p.t0;case 26:return p.abrupt("return",o);case 27:case"end":return p.stop()}},r,this,[[3,9],[12,18]])}));function t(r){return e.apply(this,arguments)}return t}()},{key:"createContainer",value:function(t,r,n){var s={"content-type":ri,link:this.ns.ldp("BasicContainer")+'; rel="type"'};r&&(s.slug=r);var a={headers:s};return n&&(a.body=n),this.webOperation("POST",t,a)}},{key:"invalidateCache",value:function(t){var r=wi(t),n=this;if(n.fetchQueue&&n.fetchQueue[r]){var s=n.fetchQueue[r];s.PromiseStatus,delete n.fetchQueue[r]}if(n.requested[r]&&n.requested[r]!=="done"&&n.requested[r]!=="failed"&&n.requested[r]!==404){var a="Rdflib: fetcher: Destructive operation on <".concat(n.requested[r],"> file being fetched! ")+r;console.error(a)}else delete n.requested[r],delete n.nonexistent[r]}},{key:"webOperation",value:function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=wi(r);n.method=t,n.body=n.data||n.body,n.force=!0;var a=this;if(n.body&&!n.contentType)throw new Error("Web operation sending data must have a defined contentType.");return n.contentType&&(n.headers=n.headers||{},n.headers["content-type"]=n.contentType),i.setCredentials(s,n),new Promise(function(l,o){a._fetch(s,n).then(function(u){if(u.ok)(t==="PUT"||t==="PATCH"||t==="POST"||t==="DELETE")&&a.invalidateCache(s),u.text?u.text().then(function(d){u.responseText=d,l(u)}):l(u);else{var f="Web error: "+u.status;u.statusText&&(f+=" ("+u.statusText+")"),f+=" on "+t+" of <"+s+">",u.responseText&&(f+=": "+u.responseText);var p=new Error(f);p.response=u,o(p)}},function(u){var f="Fetch error for "+t+" of <"+s+">:"+u;o(new Error(f))})})}},{key:"lookUpThing",value:function(t,r){var n=this,s=this.store.uris(t);return s=s.map(function(a){return Di(a)}),s.forEach(function(a){n.lookedUp[a]=!0}),this.load(s,{referringTerm:r})}},{key:"getHeader",value:function(t,r){for(var n=this.store,s=t.value,a=n.each(void 0,this.ns.link("requestedURI"),n.rdfFactory.literal(s)),l=0;l<a.length;l++){var o=a[l];if(o!==void 0){var u=n.any(o,this.ns.link("response"));if(u!==void 0&&n.anyValue(u,this.ns.http("status"))&&n.anyValue(u,this.ns.http("status")).startsWith("2")){var f=n.each(u,this.ns.httph(r.toLowerCase()));return f.length?f.map(function(p){return p.value}):[]}}}}},{key:"saveRequestMetadata",value:function(t,r){var n=r.req,s=this.store,a=r.referringTerm;this.addStatus(r.req,"Accept: "+r.headers.accept),yu(a)&&s.add(s.rdfFactory.namedNode(t),this.ns.link("requestedBy"),a,this.appNode),r.original&&r.original.value!==t&&s.add(n,this.ns.link("orginalURI"),s.rdfFactory.literal(r.original.value),this.appNode);var l=new Date,o="["+l.getHours()+":"+l.getMinutes()+":"+l.getSeconds()+"] ";s.add(n,this.ns.rdfs("label"),s.rdfFactory.literal(o+" Request for "+t),this.appNode),s.add(n,this.ns.link("requestedURI"),s.rdfFactory.literal(t),this.appNode),s.add(n,this.ns.link("status"),s.collection(),this.appNode)}},{key:"saveResponseMetadata",value:function(t,r){var n=this,s=this.store,a=s.bnode();return s.add(r.req,this.ns.link("response"),a,this.appNode),s.add(a,this.ns.http("status"),s.rdfFactory.literal(t.status),this.appNode),s.add(a,this.ns.http("statusText"),s.rdfFactory.literal(t.statusText),this.appNode),t.headers.forEach(function(l,o){s.add(a,n.ns.httph(o),n.store.rdfFactory.literal(l),n.appNode),o==="content-type"&&s.add(r.resource,n.ns.rdf("type"),s.rdfFactory.namedNode(w2(l).value),n.appNode)}),a}},{key:"objectRefresh",value:function(t){var r=this.store.uris(t);if(typeof r<"u")for(var n=0;n<r.length;n++)this.refresh(this.store.rdfFactory.namedNode(Di(r[n])))}},{key:"refresh",value:function(t,r){this.fireCallbacks("refresh",arguments),this.nowOrWhenFetched(t,{force:!0,clearPreviousData:!0},r)}},{key:"refreshIfExpired",value:function(t,r){var n=this.getHeader(t,"Expires");!n||new Date(n[0]).getTime()<=new Date().getTime()?this.refresh(t,r):r(!0,"Not expired",{})}},{key:"retract",value:function(t){this.store.removeMany(void 0,void 0,void 0,t),t.value&&delete this.requested[Di(t.value)],this.fireCallbacks("retract",arguments)}},{key:"getState",value:function(t){return typeof this.requested[t]>"u"?"unrequested":this.requested[t]===!0?"requested":this.requested[t]==="done"?"fetched":this.requested[t]==="redirected"?this.getState(this.redirectedTo[t]):"failed"}},{key:"isPending",value:function(t){return this.requested[t]===!0}},{key:"unload",value:function(t){this.store.removeDocument(t),delete this.requested[t.value]}},{key:"addHandler",value:function(t){this.handlers.push(t),t.register(this)}},{key:"retryNoCredentials",value:function(t,r){r.retriedWithNoCredentials=!0,delete this.requested[t],delete this.fetchQueue[t];var n=Object.assign({},r,{credentials:"omit"});return this.addStatus(r.req,"Abort: Will retry with credentials SUPPRESSED to see if that helps"),this.load(t,n)}},{key:"isCrossSite",value:function(t){if(typeof document>"u"||!document.location)return!1;var r=Xg,n=""+document.location;return(r(n)&&r(t)&&r(n))!==r(t)}},{key:"handleError",value:function(t,r,n){if(this.isCrossSite(r)){if(n.credentials&&n.credentials==="include"&&!n.retriedWithNoCredentials)return this.retryNoCredentials(r,n);var s=i.crossSiteProxy(r);if(s&&!n.proxyUsed)return this.redirectToProxy(s,n)}var a;return t instanceof Error?a="Fetch error: "+t.message:(a=t.statusText,t.responseText&&(a+=" ".concat(t.responseText))),this.failFetch(n,a,t.status||998,t)}},{key:"addType",value:function(t,r,n,s){var a=r;if(s){var l=n.any(a,this.ns.link("requestedURI"));l&&l.value!==s&&n.add(n.rdfFactory.namedNode(s),this.ns.rdf("type"),t,this.appNode)}for(;;){var o=n.any(a,this.ns.link("requestedURI"));if(o&&o.value&&n.add(n.rdfFactory.namedNode(o.value),this.ns.rdf("type"),t,this.appNode),a=n.any(void 0,n.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#redirectedRequest"),a),!a)break;var u=n.any(a,n.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#response"));if(!u)break;var f=n.any(u,n.rdfFactory.namedNode("http://www.w3.org/2007/ont/http#status"));if(!f||f!=="301"&&f!=="302")break}}},{key:"handleResponse",value:function(t,r,n){var s=this,a=this.store,l=t.headers,o=n.req,u=this.saveResponseMetadata(t,n),f=this.normalizedContentType(n,l)||"",p=l.get("content-location");if(t.status===0)return this.handleError(t,r,n);if(t.status>=400)return t.status===404&&(this.nonexistent[n.original.value]=!0,this.nonexistent[r]=!0),this.saveErrorResponse(t,u).then(function(){var F=n.resource+" "+t.statusText;return s.failFetch(n,F,t.status,t)});var d=null,c=null;if(p&&(c=Mr(p,r),c!==r&&(d=c)),t.status===200){if(this.addType(this.ns.link("Document"),o,a,r),d&&this.addType(this.ns.link("Document"),o,a,d),n.clearPreviousData)for(var h=a.statementsMatching(void 0,void 0,void 0,n.resource).slice(),_=0;_<h.length;_++)a.removeStatement(h[_]);var m=f.includes("image/")||f.includes("application/pdf");f&&m&&(this.addType(a.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),o,a,r),d&&this.addType(a.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),o,a,d))}if(p){if(!n.force&&d&&this.requested[c]==="done")return this.doneFetch(n,t);this.requested[c]=!0}this.parseLinkHeader(l.get("link"),n.original,o);var y=this.handlerForContentType(f,t);return y?t.text().then(function(F){return t.responseText=F,y.parse(s,F,n,t)}):(this.addStatus(o,"Fetch over. No data handled."),this.doneFetch(n,t))}},{key:"saveErrorResponse",value:function(t,r){var n=this,s=this.store;return t.text().then(function(a){a.length>10&&s.add(r,n.ns.http("content"),s.rdfFactory.literal(a),r)})}},{key:"handlerForContentType",value:function(t,r){if(!t)return null;var n=this.handlers.find(function(s){return t.match(s.pattern)});return n?new n(r):null}},{key:"guessContentType",value:function(t){return m_[t.split(".").pop()]}},{key:"normalizedContentType",value:function(t,r){if(t.forceContentType)return t.forceContentType;var n=r.get("content-type");if(!n||n.includes("application/octet-stream")){var s=this.guessContentType(t.resource.value);if(s)return s}var a=Au(t.resource.value);return!n&&["file","chrome"].includes(a)?"text/xml":n}},{key:"redirectToProxy",value:function(t,r){var n=this;this.addStatus(r.req,"BLOCKED -> Cross-site Proxy to <"+t+">"),r.proxyUsed=!0;var s=this.store,a=r.req;r.noMeta||(s.add(a,this.ns.link("redirectedTo"),s.rdfFactory.namedNode(t),a),this.addStatus(a,"redirected to new request")),this.requested[r.resource.value]="redirected",this.redirectedTo[r.resource.value]=t;var l=Object.assign({},r);return l.baseURI=r.resource.value,this.fetchUri(t,l).then(function(o){return l.noMeta||s.add(a,n.ns.link("redirectedRequest"),l.req,n.appNode),o})}},{key:"setRequestTimeout",value:function(t,r){var n=this;return new Promise(function(s){n.timeouts[t]=(n.timeouts[t]||[]).concat(setTimeout(function(){n.isPending(t)&&!r.retriedWithNoCredentials&&!r.proxyUsed&&s(n.failFetch(r,"Request to ".concat(t," timed out"),"timeout"))},n.timeout))})}},{key:"addFetchCallback",value:function(t,r){this.fetchCallbacks[t]?this.fetchCallbacks[t].push(r):this.fetchCallbacks[t]=[r]}},{key:"acceptString",value:function(){var t="";for(var r in this.mediatypes){t!==""&&(t+=", "),t+=r;for(var n in this.mediatypes[r])t+=";"+n+"="+this.mediatypes[r][n]}return t}}],[{key:"crossSiteProxy",value:function(t){if(i.crossSiteProxyTemplate)return i.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(t))}},{key:"offlineOverride",value:function(t){var r=t,n;return typeof window<"u"&&window.panes&&(n=window.panes.UI)&&n.preferences&&n.preferences.get("offlineModeUsingLocalhost")&&r.slice(0,7)==="http://"&&r.slice(7,17)!=="localhost/"&&(r="http://localhost/"+r.slice(7)),r}},{key:"proxyIfNecessary",value:function(t){var r;if(typeof window<"u"&&window.panes&&(r=window.panes.UI)&&r.isExtension)return t;if(typeof $SolidTestEnvironment<"u"&&$SolidTestEnvironment.localSiteMap){var n=t.split("/").slice(2),s=function l(o,u){var f=u[o.shift()];return f?typeof f=="string"?f+o.join("/"):o?l(o,f):null:null},a=s(n,$SolidTestEnvironment.localSiteMap);if(a)return a}return i.crossSiteProxyTemplate&&typeof document<"u"&&document.location&&(""+document.location).slice(0,6)==="https:"&&t.slice(0,5)==="http:"?i.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(t)):t}},{key:"unsupportedProtocol",value:function(t){var r=Au(t);return r==="tel"||r==="mailto"||r==="urn"}},{key:"setCredentials",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};r.credentials===void 0&&(r.withCredentials!==void 0?r.credentials=r.withCredentials?"include":"omit":r.credentials="include")}}])}();qe(Oi,"HANDLERS",void 0);qe(Oi,"CONTENT_TYPE_BY_EXT",void 0);qe(Oi,"crossSiteProxyTemplate",void 0);Oi.HANDLERS=Dl;Oi.CONTENT_TYPE_BY_EXT=m_;function lf(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,r)}return t}function of(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lf(Object(t),!0).forEach(function(r){qe(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):lf(Object(t)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}var Ua=of(of({},wl),{},{fetcher:function(e,t){return new Oi(e,t)},graph:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return new _a(e,t||{rdfFactory:wl})},lit:function(e,t,r){return this.literal(""+e,t||r)},st:function(e,t,r,n){return this.quad(e,t,r,n)}}),Es={};for(var tl in Ua)typeof Ua[tl]=="function"&&(Es[tl]=Ua[tl].bind(Ua));var Mb=Es.graph,D_=Es.namedNode,Vb=Es.literal;new n_;qt.fromValue;fn.nextId;let be,Gr=0,Ji=null;function za(){return(Ji===null||Ji.byteLength===0)&&(Ji=new Uint8Array(be.memory.buffer)),Ji}const Ha=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},zb=typeof Ha.encodeInto=="function"?function(i,e){return Ha.encodeInto(i,e)}:function(i,e){const t=Ha.encode(i);return e.set(t),{read:i.length,written:t.length}};function wn(i,e,t){if(t===void 0){const l=Ha.encode(i),o=e(l.length,1)>>>0;return za().subarray(o,o+l.length).set(l),Gr=l.length,o}let r=i.length,n=e(r,1)>>>0;const s=za();let a=0;for(;a<r;a++){const l=i.charCodeAt(a);if(l>127)break;s[n+a]=l}if(a!==r){a!==0&&(i=i.slice(a)),n=t(n,r,r=a+i.length*3,1)>>>0;const l=za().subarray(n+a,n+r),o=zb(i,l);a+=o.written,n=t(n,r,a,1)>>>0}return Gr=a,n}function eo(i){return i==null}let Ki=null;function xe(){return(Ki===null||Ki.byteLength===0)&&(Ki=new Int32Array(be.memory.buffer)),Ki}const k_=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&k_.decode();function Ft(i,e){return i=i>>>0,k_.decode(za().subarray(i,i+e))}function nr(i){const e=be.__wbindgen_export_2.get(i);return be.__externref_table_dealloc(i),e}function Hb(i){try{const n=be.__wbindgen_add_to_stack_pointer(-16),s=wn(i,be.__wbindgen_malloc,be.__wbindgen_realloc),a=Gr;be.namedNode(n,s,a);var e=xe()[n/4+0],t=xe()[n/4+1],r=xe()[n/4+2];if(r)throw nr(t);return Bi.__wrap(e)}finally{be.__wbindgen_add_to_stack_pointer(16)}}function xb(i){try{const a=be.__wbindgen_add_to_stack_pointer(-16);var e=eo(i)?0:wn(i,be.__wbindgen_malloc,be.__wbindgen_realloc),t=Gr;be.blankNode(a,e,t);var r=xe()[a/4+0],n=xe()[a/4+1],s=xe()[a/4+2];if(s)throw nr(n);return ma.__wrap(r)}finally{be.__wbindgen_add_to_stack_pointer(16)}}function Xb(i,e){try{const l=be.__wbindgen_add_to_stack_pointer(-16);var t=eo(i)?0:wn(i,be.__wbindgen_malloc,be.__wbindgen_realloc),r=Gr;be.literal(l,t,r,e);var n=xe()[l/4+0],s=xe()[l/4+1],a=xe()[l/4+2];if(a)throw nr(s);return ga.__wrap(n)}finally{be.__wbindgen_add_to_stack_pointer(16)}}function Gb(){const i=be.defaultGraph();return va.__wrap(i)}function Qb(i){try{const n=be.__wbindgen_add_to_stack_pointer(-16),s=wn(i,be.__wbindgen_malloc,be.__wbindgen_realloc),a=Gr;be.variable(n,s,a);var e=xe()[n/4+0],t=xe()[n/4+1],r=xe()[n/4+2];if(r)throw nr(t);return ba.__wrap(e)}finally{be.__wbindgen_add_to_stack_pointer(16)}}function $b(i,e,t){try{const a=be.__wbindgen_add_to_stack_pointer(-16);be.triple(a,i,e,t);var r=xe()[a/4+0],n=xe()[a/4+1],s=xe()[a/4+2];if(s)throw nr(n);return Li.__wrap(r)}finally{be.__wbindgen_add_to_stack_pointer(16)}}function Wb(i,e,t,r){try{const l=be.__wbindgen_add_to_stack_pointer(-16);be.quad(l,i,e,t,r);var n=xe()[l/4+0],s=xe()[l/4+1],a=xe()[l/4+2];if(a)throw nr(s);return Li.__wrap(n)}finally{be.__wbindgen_add_to_stack_pointer(16)}}function Yb(i){try{const n=be.__wbindgen_add_to_stack_pointer(-16);be.fromTerm(n,i);var e=xe()[n/4+0],t=xe()[n/4+1],r=xe()[n/4+2];if(r)throw nr(t);return nr(e)}finally{be.__wbindgen_add_to_stack_pointer(16)}}function Jb(i){try{const n=be.__wbindgen_add_to_stack_pointer(-16);be.fromQuad(n,i);var e=xe()[n/4+0],t=xe()[n/4+1],r=xe()[n/4+2];if(r)throw nr(t);return nr(e)}finally{be.__wbindgen_add_to_stack_pointer(16)}}let Zi=null;function Kb(){return(Zi===null||Zi.byteLength===0)&&(Zi=new Uint32Array(be.memory.buffer)),Zi}function Zb(i,e){i=i>>>0;const r=Kb().subarray(i/4,i/4+e),n=[];for(let s=0;s<r.length;s++)n.push(be.__wbindgen_export_2.get(r[s]));return be.__externref_drop_slice(i,e),n}function ew(){be.main()}function tw(i){const e=be.__externref_table_alloc();return be.__wbindgen_export_2.set(e,i),e}function Ur(i,e){try{return i.apply(this,e)}catch(t){const r=tw(t);be.__wbindgen_exn_store(r)}}const uf=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>be.__wbg_blanknode_free(i>>>0));class ma{static __wrap(e){e=e>>>0;const t=Object.create(ma.prototype);return t.__wbg_ptr=e,uf.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,uf.unregister(this),e}free(){const e=this.__destroy_into_raw();be.__wbg_blanknode_free(e)}get termType(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.blanknode_term_type(s,this.__wbg_ptr);var r=xe()[s/4+0],n=xe()[s/4+1];return e=r,t=n,Ft(r,n)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}get value(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.blanknode_value(s,this.__wbg_ptr);var r=xe()[s/4+0],n=xe()[s/4+1];return e=r,t=n,Ft(r,n)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}toString(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.blanknode_toString(s,this.__wbg_ptr);var r=xe()[s/4+0],n=xe()[s/4+1];return e=r,t=n,Ft(r,n)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}equals(e){return be.blanknode_equals(this.__wbg_ptr,e)!==0}}const ff=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>be.__wbg_defaultgraph_free(i>>>0));class va{static __wrap(e){e=e>>>0;const t=Object.create(va.prototype);return t.__wbg_ptr=e,ff.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,ff.unregister(this),e}free(){const e=this.__destroy_into_raw();be.__wbg_defaultgraph_free(e)}get termType(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.defaultgraph_term_type(s,this.__wbg_ptr);var r=xe()[s/4+0],n=xe()[s/4+1];return e=r,t=n,Ft(r,n)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}get value(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.defaultgraph_value(s,this.__wbg_ptr);var r=xe()[s/4+0],n=xe()[s/4+1];return e=r,t=n,Ft(r,n)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}toString(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.defaultgraph_toString(s,this.__wbg_ptr);var r=xe()[s/4+0],n=xe()[s/4+1];return e=r,t=n,Ft(r,n)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}equals(e){return be.defaultgraph_equals(this.__wbg_ptr,e)!==0}}const cf=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>be.__wbg_literal_free(i>>>0));class ga{static __wrap(e){e=e>>>0;const t=Object.create(ga.prototype);return t.__wbg_ptr=e,cf.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,cf.unregister(this),e}free(){const e=this.__destroy_into_raw();be.__wbg_literal_free(e)}get termType(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.literal_term_type(s,this.__wbg_ptr);var r=xe()[s/4+0],n=xe()[s/4+1];return e=r,t=n,Ft(r,n)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}get value(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.literal_value(s,this.__wbg_ptr);var r=xe()[s/4+0],n=xe()[s/4+1];return e=r,t=n,Ft(r,n)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}get language(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.literal_language(s,this.__wbg_ptr);var r=xe()[s/4+0],n=xe()[s/4+1];return e=r,t=n,Ft(r,n)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}get datatype(){const e=be.literal_datatype(this.__wbg_ptr);return Bi.__wrap(e)}toString(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.literal_toString(s,this.__wbg_ptr);var r=xe()[s/4+0],n=xe()[s/4+1];return e=r,t=n,Ft(r,n)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}equals(e){return be.literal_equals(this.__wbg_ptr,e)!==0}}const df=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>be.__wbg_namednode_free(i>>>0));class Bi{static __wrap(e){e=e>>>0;const t=Object.create(Bi.prototype);return t.__wbg_ptr=e,df.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,df.unregister(this),e}free(){const e=this.__destroy_into_raw();be.__wbg_namednode_free(e)}get termType(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.namednode_term_type(s,this.__wbg_ptr);var r=xe()[s/4+0],n=xe()[s/4+1];return e=r,t=n,Ft(r,n)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}get value(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.namednode_value(s,this.__wbg_ptr);var r=xe()[s/4+0],n=xe()[s/4+1];return e=r,t=n,Ft(r,n)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}toString(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.namednode_toString(s,this.__wbg_ptr);var r=xe()[s/4+0],n=xe()[s/4+1];return e=r,t=n,Ft(r,n)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}equals(e){return be.namednode_equals(this.__wbg_ptr,e)!==0}}const hf=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>be.__wbg_quad_free(i>>>0));class Li{static __wrap(e){e=e>>>0;const t=Object.create(Li.prototype);return t.__wbg_ptr=e,hf.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,hf.unregister(this),e}free(){const e=this.__destroy_into_raw();be.__wbg_quad_free(e)}get termType(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.quad_term_type(s,this.__wbg_ptr);var r=xe()[s/4+0],n=xe()[s/4+1];return e=r,t=n,Ft(r,n)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}get value(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.defaultgraph_value(s,this.__wbg_ptr);var r=xe()[s/4+0],n=xe()[s/4+1];return e=r,t=n,Ft(r,n)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}get subject(){return be.quad_subject(this.__wbg_ptr)}get predicate(){return be.quad_predicate(this.__wbg_ptr)}get object(){return be.quad_object(this.__wbg_ptr)}get graph(){return be.quad_graph(this.__wbg_ptr)}toString(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.quad_toString(s,this.__wbg_ptr);var r=xe()[s/4+0],n=xe()[s/4+1];return e=r,t=n,Ft(r,n)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}equals(e){return be.quad_equals(this.__wbg_ptr,e)!==0}}const rw=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>be.__wbg_store_free(i>>>0));class A_{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,rw.unregister(this),e}free(){const e=this.__destroy_into_raw();be.__wbg_store_free(e)}constructor(e){try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.store_new(s,e);var t=xe()[s/4+0],r=xe()[s/4+1],n=xe()[s/4+2];if(n)throw nr(r);return this.__wbg_ptr=t>>>0,this}finally{be.__wbindgen_add_to_stack_pointer(16)}}add(e){try{const n=be.__wbindgen_add_to_stack_pointer(-16);be.store_add(n,this.__wbg_ptr,e);var t=xe()[n/4+0],r=xe()[n/4+1];if(r)throw nr(t)}finally{be.__wbindgen_add_to_stack_pointer(16)}}delete(e){try{const n=be.__wbindgen_add_to_stack_pointer(-16);be.store_delete(n,this.__wbg_ptr,e);var t=xe()[n/4+0],r=xe()[n/4+1];if(r)throw nr(t)}finally{be.__wbindgen_add_to_stack_pointer(16)}}has(e){try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.store_has(s,this.__wbg_ptr,e);var t=xe()[s/4+0],r=xe()[s/4+1],n=xe()[s/4+2];if(n)throw nr(r);return t!==0}finally{be.__wbindgen_add_to_stack_pointer(16)}}get size(){try{const n=be.__wbindgen_add_to_stack_pointer(-16);be.store_size(n,this.__wbg_ptr);var e=xe()[n/4+0],t=xe()[n/4+1],r=xe()[n/4+2];if(r)throw nr(t);return e>>>0}finally{be.__wbindgen_add_to_stack_pointer(16)}}match(e,t,r,n){try{const f=be.__wbindgen_add_to_stack_pointer(-16);be.store_match(f,this.__wbg_ptr,e,t,r,n);var s=xe()[f/4+0],a=xe()[f/4+1],l=xe()[f/4+2],o=xe()[f/4+3];if(o)throw nr(l);var u=Zb(s,a).slice();return be.__wbindgen_free(s,a*4,4),u}finally{be.__wbindgen_add_to_stack_pointer(16)}}query(e,t){try{const a=be.__wbindgen_add_to_stack_pointer(-16),l=wn(e,be.__wbindgen_malloc,be.__wbindgen_realloc),o=Gr;be.store_query(a,this.__wbg_ptr,l,o,t);var r=xe()[a/4+0],n=xe()[a/4+1],s=xe()[a/4+2];if(s)throw nr(n);return nr(r)}finally{be.__wbindgen_add_to_stack_pointer(16)}}update(e,t){try{const s=be.__wbindgen_add_to_stack_pointer(-16),a=wn(e,be.__wbindgen_malloc,be.__wbindgen_realloc),l=Gr;be.store_update(s,this.__wbg_ptr,a,l,t);var r=xe()[s/4+0],n=xe()[s/4+1];if(n)throw nr(r)}finally{be.__wbindgen_add_to_stack_pointer(16)}}load(e,t,r,n){try{const l=be.__wbindgen_add_to_stack_pointer(-16),o=wn(e,be.__wbindgen_malloc,be.__wbindgen_realloc),u=Gr;be.store_load(l,this.__wbg_ptr,o,u,t,r,n);var s=xe()[l/4+0],a=xe()[l/4+1];if(a)throw nr(s)}finally{be.__wbindgen_add_to_stack_pointer(16)}}dump(e,t){let r,n;try{const p=be.__wbindgen_add_to_stack_pointer(-16);be.store_dump(p,this.__wbg_ptr,e,t);var s=xe()[p/4+0],a=xe()[p/4+1],l=xe()[p/4+2],o=xe()[p/4+3],u=s,f=a;if(o)throw u=0,f=0,nr(l);return r=u,n=f,Ft(u,f)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(r,n,1)}}}const pf=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(i=>be.__wbg_variable_free(i>>>0));class ba{static __wrap(e){e=e>>>0;const t=Object.create(ba.prototype);return t.__wbg_ptr=e,pf.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,pf.unregister(this),e}free(){const e=this.__destroy_into_raw();be.__wbg_variable_free(e)}get termType(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.variable_term_type(s,this.__wbg_ptr);var r=xe()[s/4+0],n=xe()[s/4+1];return e=r,t=n,Ft(r,n)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}get value(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.variable_value(s,this.__wbg_ptr);var r=xe()[s/4+0],n=xe()[s/4+1];return e=r,t=n,Ft(r,n)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}toString(){let e,t;try{const s=be.__wbindgen_add_to_stack_pointer(-16);be.variable_toString(s,this.__wbg_ptr);var r=xe()[s/4+0],n=xe()[s/4+1];return e=r,t=n,Ft(r,n)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t,1)}}equals(e){return be.variable_equals(this.__wbg_ptr,e)!==0}}async function nw(i,e){if(typeof Response=="function"&&i instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(i,e)}catch(r){if(i.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const t=await i.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{const t=await WebAssembly.instantiate(i,e);return t instanceof WebAssembly.Instance?{instance:t,module:i}:t}}function C_(){const i={};return i.wbg={},i.wbg.__wbindgen_is_undefined=function(e){return e===void 0},i.wbg.__wbindgen_is_null=function(e){return e===null},i.wbg.__wbindgen_string_get=function(e,t){const r=t,n=typeof r=="string"?r:void 0;var s=eo(n)?0:wn(n,be.__wbindgen_malloc,be.__wbindgen_realloc),a=Gr;xe()[e/4+1]=a,xe()[e/4+0]=s},i.wbg.__wbindgen_is_falsy=function(e){return!e},i.wbg.__wbindgen_error_new=function(e,t){return new Error(Ft(e,t))},i.wbg.__wbg_namednode_new=function(e){return Bi.__wrap(e)},i.wbg.__wbg_blanknode_new=function(e){return ma.__wrap(e)},i.wbg.__wbg_literal_new=function(e){return ga.__wrap(e)},i.wbg.__wbg_defaultgraph_new=function(e){return va.__wrap(e)},i.wbg.__wbg_variable_new=function(e){return ba.__wrap(e)},i.wbg.__wbg_quad_new=function(e){return Li.__wrap(e)},i.wbg.__wbg_new_28c511d9baebfa89=function(e,t){return new Error(Ft(e,t))},i.wbg.__wbindgen_string_new=function(e,t){return Ft(e,t)},i.wbg.__wbg_new_57421e8974065233=function(e,t){return new URIError(Ft(e,t))},i.wbg.__wbindgen_is_string=function(e){return typeof e=="string"},i.wbg.__wbg_iterator_2cee6dadfd956dfa=function(){return Symbol.iterator},i.wbg.__wbg_get_e3c254076557e348=function(){return Ur(function(e,t){return Reflect.get(e,t)},arguments)},i.wbg.__wbindgen_is_function=function(e){return typeof e=="function"},i.wbg.__wbg_call_27c0f87801dedf93=function(){return Ur(function(e,t){return e.call(t)},arguments)},i.wbg.__wbindgen_is_object=function(e){const t=e;return typeof t=="object"&&t!==null},i.wbg.__wbg_next_40fc327bfc8770e6=function(e){return e.next},i.wbg.__wbg_next_196c84450b364254=function(){return Ur(function(e){return e.next()},arguments)},i.wbg.__wbg_done_298b57d23c0fc80c=function(e){return e.done},i.wbg.__wbg_value_d93c65011f51a456=function(e){return e.value},i.wbg.__wbg_new_16b304a2cfa7ff4a=function(){return new Array},i.wbg.__wbg_new_d9bc3a0147634640=function(){return new Map},i.wbg.__wbg_push_a5b05aedc7234f9f=function(e,t){return e.push(t)},i.wbg.__wbg_set_8417257aaedc936b=function(e,t,r){return e.set(t,r)},i.wbg.__wbg_warn_2b7fc46eb50827b6=function(e,t){console.warn(Ft(e,t))},i.wbg.__wbg_new_abda76e883ba8a5f=function(){return new Error},i.wbg.__wbg_stack_658279fe44541cf6=function(e,t){const r=t.stack,n=wn(r,be.__wbindgen_malloc,be.__wbindgen_realloc),s=Gr;xe()[e/4+1]=s,xe()[e/4+0]=n},i.wbg.__wbg_error_f851667af71bcfc6=function(e,t){let r,n;try{r=e,n=t,console.error(Ft(e,t))}finally{be.__wbindgen_free(r,n,1)}},i.wbg.__wbg_crypto_1d1f22824a6a080c=function(e){return e.crypto},i.wbg.__wbg_process_4a72847cc503995b=function(e){return e.process},i.wbg.__wbg_versions_f686565e586dd935=function(e){return e.versions},i.wbg.__wbg_node_104a2ff8d6ea03a2=function(e){return e.node},i.wbg.__wbg_require_cca90b1a94a0255b=function(){return Ur(function(){return module.require},arguments)},i.wbg.__wbg_msCrypto_eb05e62b530a1508=function(e){return e.msCrypto},i.wbg.__wbg_newwithlength_e9b4878cebadb3d3=function(e){return new Uint8Array(e>>>0)},i.wbg.__wbg_self_ce0dbfc45cf2f5be=function(){return Ur(function(){return self.self},arguments)},i.wbg.__wbg_window_c6fb939a7f436783=function(){return Ur(function(){return window.window},arguments)},i.wbg.__wbg_globalThis_d1e6af4856ba331b=function(){return Ur(function(){return globalThis.globalThis},arguments)},i.wbg.__wbg_global_207b558942527489=function(){return Ur(function(){return global.global},arguments)},i.wbg.__wbg_newnoargs_e258087cd0daa0ea=function(e,t){return new Function(Ft(e,t))},i.wbg.__wbg_call_b3ca7c6051f9bec1=function(){return Ur(function(e,t,r){return e.call(t,r)},arguments)},i.wbg.__wbg_has_0af94d20077affa2=function(){return Ur(function(e,t){return Reflect.has(e,t)},arguments)},i.wbg.__wbg_now_3014639a94423537=function(){return Date.now()},i.wbg.__wbindgen_memory=function(){return be.memory},i.wbg.__wbg_buffer_12d079cc21e14bdb=function(e){return e.buffer},i.wbg.__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb=function(e,t,r){return new Uint8Array(e,t>>>0,r>>>0)},i.wbg.__wbg_randomFillSync_5c9c955aa56b6049=function(){return Ur(function(e,t){e.randomFillSync(t)},arguments)},i.wbg.__wbg_subarray_a1f73cd4b5b42fe1=function(e,t,r){return e.subarray(t>>>0,r>>>0)},i.wbg.__wbg_getRandomValues_3aa56aa6edec874c=function(){return Ur(function(e,t){e.getRandomValues(t)},arguments)},i.wbg.__wbg_new_63b92bc8671ed464=function(e){return new Uint8Array(e)},i.wbg.__wbg_set_a47bac70306a19a7=function(e,t,r){e.set(t,r>>>0)},i.wbg.__wbindgen_throw=function(e,t){throw new Error(Ft(e,t))},i.wbg.__wbindgen_init_externref_table=function(){const e=be.__wbindgen_export_2,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)},i}function T_(i,e){return be=i.exports,as.__wbindgen_wasm_module=e,Ki=null,Zi=null,Ji=null,be.__wbindgen_start(),be}function iw(i){if(be!==void 0)return be;const e=C_();i instanceof WebAssembly.Module||(i=new WebAssembly.Module(i));const t=new WebAssembly.Instance(i,e);return T_(t,i)}async function as(i){if(be!==void 0)return be;typeof i>"u"&&(i=new URL(""+new URL("../assets/web_bg.DI8SoM3H.wasm",import.meta.url).href,import.meta.url));const e=C_();(typeof i=="string"||typeof Request=="function"&&i instanceof Request||typeof URL=="function"&&i instanceof URL)&&(i=fetch(i));const{instance:t,module:r}=await nw(await i,e);return T_(t,r)}const aw=Object.freeze(Object.defineProperty({__proto__:null,BlankNode:ma,DefaultGraph:va,Literal:ga,NamedNode:Bi,Quad:Li,Store:A_,Variable:ba,blankNode:xb,default:as,defaultGraph:Gb,fromQuad:Jb,fromTerm:Yb,initSync:iw,literal:Xb,main:ew,namedNode:Hb,quad:Wb,triple:$b,variable:Qb},Symbol.toStringTag,{value:"Module"})),sw="/ontologies/d3fend.ttl",lw="http://d3fend.mitre.org/ontologies/d3fend.owl#",ow="http://d3fend.mitre.org/ontologies/cad/instances#",uw="cco",N_="d3f",fw="dct",S_="cad",cw="owl",I_="rdf",P_="rdfs",dw="skos",hw="xsd",Ii={[N_]:lw,[S_]:ow,[cw]:"http://www.w3.org/2002/07/owl#",[I_]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",[P_]:"http://www.w3.org/2000/01/rdf-schema#",[hw]:"http://www.w3.org/2001/XMLSchema#",[fw]:"http://purl.org/dc/terms/",[dw]:"http://www.w3.org/2004/02/skos/core#",[uw]:"http://www.ontologyrepository.com/CommonCoreOntologies/"};function pw(){const{subscribe:i,set:e,update:t}=cr({initalized:!1,store:null,erorr:null});async function r(){try{console.log("Starting Oxigraph initialization"),console.time("Initialize Oxigraph"),console.log("Oxigraph module:",aw),console.log("Init function:",as),await as(),console.log("WebAssembly initialized successfully");const s=new A_;console.log("Oxigraph store created"),e({initialized:!0,store:s,error:null}),await n(s),console.log(`Oxigraph store initialized with ${s.size} triples.`)}catch(s){e({initialized:!1,store:null,error:s.message}),console.error("Failed to initialize Oxigraph store:",s)}}async function n(s){try{console.time("Load D3FEND ontology");const l=await(await fetch(sw)).text();s.load(l,{format:"ttl"}),console.timeEnd("Load D3FEND ontology"),console.log(`D3FEND ontology loaded, total triples: ${s.size}`)}catch(a){console.error("Failed to load D3FEND ontology:",a)}}return{subscribe:i,initialize:r,query:s=>new Promise((a,l)=>{t(o=>{if(!o.initialized)l(new Error("Oxigraph store not initialized"));else try{const u=o.store.query(s);a(u)}catch(u){l(u)}return o})})}}const to=pw();async function _w(i){let e=null;return console.log("Calling lookup_valid_property..."),e=await vw(i),console.log(`Property from lookup IRI ${e}`),e==null&&(console.log("Calling lookup_valid_property_by_label..."),e=await mw(i)),e}async function mw(i){const e="findValidPropertyByLabel("+i+")";console.info(e);const t=`PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX d3f: <http://d3fend.mitre.org/ontologies/d3fend.owl#>

SELECT ?property
WHERE
{
   ?property rdfs:subPropertyOf* d3f:may-be-associated-with .
   ?property rdfs:label "${i}" .
}
LIMIT 1`;console.log({valid_value_query:t});let r=null;try{const n=await to.query(t);n?(console.info(`Type of queryResult for property lookup by label ${i} is: `+Object.prototype.toString.call(n).slice(8,-1)),console.log({query_result:n}),Array.isArray(n)?n.length>0?r=n[0].get("property").value:console.warn(`Empty query results for valid property lookup by label ${i}.`):console.warn(`Query result not the expected Array type for property lookup by label of ${i}.`)):console.error(`Query results: ${n} for valid property lookup by label ${i}.`)}catch(n){console.warn(`Error executing oxigraph query for property lookup by label of: ${i}, error: ${n}`)}return console.info(r+" <- "+e),r}async function vw(i){const e="lookupValidPropertyByFragment("+i+")";console.info(e);const t=`PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX d3f: <http://d3fend.mitre.org/ontologies/d3fend.owl#>

SELECT ?property
WHERE
{
   VALUES ?property { ${i} }
   ?property rdfs:subPropertyOf* d3f:may-be-associated-with .
}
LIMIT 1`;let r=null;if(i.includes(":"))try{const n=await to.query(t);console.info({query_result:n}),n?Array.isArray(n)?n.length>0?r=n[0].get("property").value:console.warn(`Empty array returned for property lookup by iri of ${i}.`):console.warn(`Query result not the expected Array type for property lookup by iri of ${i}.`):console.warn(`Undefined query result returned for property lookup by iri of ${i}.`)}catch(n){console.warn(`Error executing oxigraph query for property lookup by iri of: ${i}, error: ${n}`)}else console.warn("Attempted lookup by iri of: "+i+" but iri has no ':' char");return console.info(r+" <- "+e),r}const On=yr(Ii[N_]),R_=yr(Ii[S_]),gw=yr(Ii[I_]),bw=yr(Ii[P_]);function xa(i,e){Nr.set(i),la.set(e)}function ww(){xa([],[])}const Nr=cr([]),ot=cr(null),la=cr([]);function yw(i,e){if(e.data.d3f_class){const t=e.data.d3f_class,[r,n]=t.split(":");return On(n)}else{const t=e.type;return{artifactSelectorNode:On("Artifact"),vulnerabilitySelectorNode:On("Vulnerability"),attackSelectorNode:On("OffensiveTechnique"),countermeasureSelectorNode:On("DefensiveTechnique"),informationSelectorNode:On("DigitalInformation"),agentSelectorNode:On("Agent"),eventNode:On("Event")}[t]}}async function Ew(){const i=Mb();Object.keys(Ii).forEach(a=>{const l=Ii[a];console.info("Adding prefix ",a," for ",l),i.setPrefixForURI(a,l)}),console.info("Echo store.namespaces: "+i.namespaces);let e,t;const r=[],n=[];return Nr.subscribe(a=>{e=a})(),la.subscribe(a=>{t=a})(),console.info("Starting node processing..."),Dw(e,i,r),console.info("Completed node processing."),console.info("Starting edge processing..."),await Aw(t,i,n),console.info("Completed edge processing promise."),await new Promise((a,l)=>{sa(null,i,null,"text/turtle",(o,u)=>{if(o)l(o);else{let f=u;r.length>0&&(f+=`
# Skipped nodes (no d3f_class):
`,r.forEach(p=>{f+=`# Node ID: ${p.id}
`,JSON.stringify(p.data,null,2).split(`
`).forEach(h=>{f+=`# ${h}
`})})),n.length>0&&(f+=`#
# Skipped edges (no label lookup found.):
`,n.forEach(p=>{f+=`# Edge ID: ${p.id}
`,JSON.stringify(p.data,null,2).split(`
`).forEach(h=>{f+=`# ${h}
`})}),f+=`
`),a(f)}})})}function Dw(i,e,t){console.info("Processing nodes..."),i.forEach(r=>{const n=r.id,s=r.type,a=r.data.label,l=yw(e,r);if(l){const o=F_(n),u=Vb(a.toString());kw("Processing node and data properties and using rdflib node name: ",l),e.add(o,gw("type"),l),e.add(o,bw("label"),u)}else t.push({id:n,type:s,data:r.data})}),console.info("Done processing nodes."),t.length>1&&console.warn("Skipped nodes:",t)}function F_(i){const e=i.replace(".","_");return R_(e)}function kw(i,e){const t=Object.prototype.toString.call(e).slice(8,-1);console.log(`${i} references ${e} of type ${t}`)}const Aw=async(i,e,t)=>{console.info("Processing edges now!"),t.length=0;for(const r of i){const n=r.id,s=r.data.label,a=r.source,l=r.target;console.log(`edgeLabel: ${s}`);try{const o=await _w(s);if(o){console.log(`Found property ${o} for ${s}`),console.info(`Adding subject inst:${a} property ${o} object inst:${l}`);try{const u=F_(a),f=R_(l.replace(".","_"));e.add(u,D_(o),f),console.info(e.length)}catch{console.error(`Error adding triple for edgeId = ${n}, edgeLabel = ${s}`)}}else console.warn(`Bad property ${o} found for ${s}`),t.push({id:n,data:r.data})}catch(o){console.error(`Lookup error for edgeId: ${n} with edgeLabel: ${s} - ${o}`),t.push({id:n,data:r.data})}}console.info("Done processing edges."),t.length>1&&console.warn("Skipped edges:",t)};function Sn(i,e,t,r,n,s,a,l,o,u,f,p,d){const c={id:`${Math.random()}`,type:r,position:{x:l,y:o},data:{label:n,sequence:a,d3f_class:s,user_properties:[]},measured:{width:u,height:f},origin:[.5,0],selected:!1,dragging:!1};let h,_;d?(h=c.id,_=t.id):(h=t.id,_=c.id);const m={type:"editableEdge",data:{label:p},source:_,sourceHandle:"source",target:h,targetHandle:"target",id:`xy-edge__${_}source-${h}target`,selected:!1};e.update(y=>[...y,m]),i.update(y=>[...y,c])}function _f(i,e,t){const r=i.slice();return r[18]=e[t],r}const Cw=i=>({}),mf=i=>({});function Tw(i){let e;return{c(){e=q("No related offensive techniques in this release.")},l(t){e=M(t,"No related offensive techniques in this release.")},m(t,r){C(t,e,r)},p:Me,i:Me,o:Me,d(t){t&&v(e)}}}function Nw(i){let e,t;return e=new An({props:{$$slots:{default:[Rw]},$$scope:{ctx:i}}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n&16394&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function Sw(i){let e,t="Loading...";return{c(){e=K("div"),e.textContent=t},l(r){e=Z(r,"DIV",{"data-svelte-h":!0}),Ke(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(r,n){C(r,e,n)},p:Me,i:Me,o:Me,d(r){r&&v(e)}}}function vf(i){let e=i[18].off_tech_id.value.replace(/ |\./g,"")+"",t,r,n=i[18].off_tech_label.value+"",s,a,l="-->",o,u,f=i[18].off_artifact_rel_label.value.replace(/ /g,"")+"",p,d,c=je(i[18].off_artifact.value)+"",h,_,m=i[18].off_artifact_label.value+"",y,F,T,N,b=je(i[18].off_artifact.value)+"",k,A,L=i[18].off_tech_id.value.replace(/ |\./g,"")+"",P,B,D=i[18].off_tech_id.value.replace(/ |\./g,"")+"",R,w,S=je(i[18].off_artifact.value)+"",X,j,ne=je(i[18].off_artifact.value)+"",J,W;function x(Q,ae){return ae&10&&(T=null),T==null&&(T=!!Q[3].includes(Q[18].off_tech_id.value.replace(/ |\./g,""))),T?Pw:Iw}let G=x(i,-1),le=G(i);return{c(){t=q(e),r=q('["'),s=q(n),a=q('"] '),o=q(l),u=q(" |"),p=q(f),d=q("| "),h=q(c),_=q('["'),y=q(m),F=q(`"];
            `),le.c(),N=q(`
            class `),k=q(b),A=q(" ArtifactNode; click "),P=q(L),B=q(` href "javascript:da_to_off_callback('`),R=q(D),w=q(`')"; click `),X=q(S),j=q(' href "/dao/artifact/d3f:'),J=q(ne),W=q('";')},l(Q){t=M(Q,e),r=M(Q,'["'),s=M(Q,n),a=M(Q,'"] '),o=M(Q,l),u=M(Q," |"),p=M(Q,f),d=M(Q,"| "),h=M(Q,c),_=M(Q,'["'),y=M(Q,m),F=M(Q,`"];
            `),le.l(Q),N=M(Q,`
            class `),k=M(Q,b),A=M(Q," ArtifactNode; click "),P=M(Q,L),B=M(Q,` href "javascript:da_to_off_callback('`),R=M(Q,D),w=M(Q,`')"; click `),X=M(Q,S),j=M(Q,' href "/dao/artifact/d3f:'),J=M(Q,ne),W=M(Q,'";')},m(Q,ae){C(Q,t,ae),C(Q,r,ae),C(Q,s,ae),C(Q,a,ae),C(Q,o,ae),C(Q,u,ae),C(Q,p,ae),C(Q,d,ae),C(Q,h,ae),C(Q,_,ae),C(Q,y,ae),C(Q,F,ae),le.m(Q,ae),C(Q,N,ae),C(Q,k,ae),C(Q,A,ae),C(Q,P,ae),C(Q,B,ae),C(Q,R,ae),C(Q,w,ae),C(Q,X,ae),C(Q,j,ae),C(Q,J,ae),C(Q,W,ae)},p(Q,ae){ae&2&&e!==(e=Q[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(t,e),ae&2&&n!==(n=Q[18].off_tech_label.value+"")&&we(s,n),ae&2&&f!==(f=Q[18].off_artifact_rel_label.value.replace(/ /g,"")+"")&&we(p,f),ae&2&&c!==(c=je(Q[18].off_artifact.value)+"")&&we(h,c),ae&2&&m!==(m=Q[18].off_artifact_label.value+"")&&we(y,m),G===(G=x(Q,ae))&&le?le.p(Q,ae):(le.d(1),le=G(Q),le&&(le.c(),le.m(N.parentNode,N))),ae&2&&b!==(b=je(Q[18].off_artifact.value)+"")&&we(k,b),ae&2&&L!==(L=Q[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(P,L),ae&2&&D!==(D=Q[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(R,D),ae&2&&S!==(S=je(Q[18].off_artifact.value)+"")&&we(X,S),ae&2&&ne!==(ne=je(Q[18].off_artifact.value)+"")&&we(J,ne)},d(Q){Q&&(v(t),v(r),v(s),v(a),v(o),v(u),v(p),v(d),v(h),v(_),v(y),v(F),v(N),v(k),v(A),v(P),v(B),v(R),v(w),v(X),v(j),v(J),v(W)),le.d(Q)}}}function Iw(i){let e,t=i[18].off_tech_id.value.replace(/ |\./g,"")+"",r,n;return{c(){e=q("class "),r=q(t),n=q(" OffensiveTechniqueNode;")},l(s){e=M(s,"class "),r=M(s,t),n=M(s," OffensiveTechniqueNode;")},m(s,a){C(s,e,a),C(s,r,a),C(s,n,a)},p(s,a){a&2&&t!==(t=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(r,t)},d(s){s&&(v(e),v(r),v(n))}}}function Pw(i){let e,t=i[18].off_tech_id.value.replace(/ |\./g,"")+"",r,n;return{c(){e=q("class "),r=q(t),n=q(" SelectedOffensiveTechniqueNode;")},l(s){e=M(s,"class "),r=M(s,t),n=M(s," SelectedOffensiveTechniqueNode;")},m(s,a){C(s,e,a),C(s,r,a),C(s,n,a)},p(s,a){a&2&&t!==(t=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(r,t)},d(s){s&&(v(e),v(r),v(n))}}}function gf(i){let e=i[6].edge_is_unique(i[18].off_tech_label.value,i[18].off_artifact_rel_label.value,i[18].off_artifact_label.value),t,r=e&&vf(i);return{c(){r&&r.c(),t=Re()},l(n){r&&r.l(n),t=Re()},m(n,s){r&&r.m(n,s),C(n,t,s)},p(n,s){s&2&&(e=n[6].edge_is_unique(n[18].off_tech_label.value,n[18].off_artifact_rel_label.value,n[18].off_artifact_label.value)),e?r?r.p(n,s):(r=vf(n),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d(n){n&&v(t),r&&r.d(n)}}}function Rw(i){let e,t,r=Ge(i[1].da_to_off.results.bindings),n=[];for(let s=0;s<r.length;s+=1)n[s]=gf(_f(i,r,s));return{c(){e=q(`graph LR;
        `);for(let s=0;s<n.length;s+=1)n[s].c();t=Re()},l(s){e=M(s,`graph LR;
        `);for(let a=0;a<n.length;a+=1)n[a].l(s);t=Re()},m(s,a){C(s,e,a);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(s,a);C(s,t,a)},p(s,a){if(a&74){r=Ge(s[1].da_to_off.results.bindings);let l;for(l=0;l<r.length;l+=1){const o=_f(s,r,l);n[l]?n[l].p(o,a):(n[l]=gf(o),n[l].c(),n[l].m(t.parentNode,t))}for(;l<n.length;l+=1)n[l].d(1);n.length=r.length}},d(s){s&&(v(e),v(t)),Dt(n,s)}}}function Fw(i){let e,t,r,n,s,a,l,o,u,f,p,d,c,h=i[3].length+"",_,m,y,F,T;const N=i[9].header,b=Vt(N,i,i[14],mf),k=i[9].default,A=Vt(k,i,i[14],null),L=[Sw,Nw,Tw],P=[];function B(D,R){return D[1]?D[1].da_to_off.results.bindings.length>0?1:2:0}return l=B(i),o=P[l]=L[l](i),{c(){e=K("dialog"),t=K("div"),b&&b.c(),r=q(`
    Select Attack Techniques
    `),A&&A.c(),n=oe(),s=K("hr"),a=oe(),o.c(),u=oe(),f=K("hr"),p=oe(),d=K("button"),c=q("Insert ("),_=q(h),m=q(")"),this.h()},l(D){e=Z(D,"DIALOG",{class:!0});var R=Ce(e);t=Z(R,"DIV",{class:!0});var w=Ce(t);b&&b.l(w),r=M(w,`
    Select Attack Techniques
    `),A&&A.l(w),n=ue(w),s=Z(w,"HR",{}),a=ue(w),o.l(w),u=ue(w),f=Z(w,"HR",{}),p=ue(w),d=Z(w,"BUTTON",{class:!0});var S=Ce(d);c=M(S,"Insert ("),_=M(S,h),m=M(S,")"),S.forEach(v),w.forEach(v),R.forEach(v),this.h()},h(){d.autofocus=!0,re(d,"class","svelte-1ai9hff"),re(t,"class","svelte-1ai9hff"),re(e,"class","svelte-1ai9hff")},m(D,R){C(D,e,R),z(e,t),b&&b.m(t,null),z(t,r),A&&A.m(t,null),z(t,n),z(t,s),z(t,a),P[l].m(t,null),z(t,u),z(t,f),z(t,p),z(t,d),z(d,c),z(d,_),z(d,m),i[11](e),y=!0,d.focus(),F||(T=[ye(d,"click",i[7]),ye(t,"click",Wt(i[10])),ye(e,"close",i[12]),ye(e,"click",kn(i[13]))],F=!0)},p(D,[R]){b&&b.p&&(!y||R&16384)&&zt(b,N,D,D[14],y?xt(N,D[14],R,Cw):Ht(D[14]),mf),A&&A.p&&(!y||R&16384)&&zt(A,k,D,D[14],y?xt(k,D[14],R,null):Ht(D[14]),null);let w=l;l=B(D),l===w?P[l].p(D,R):(ut(),ce(P[w],1,1,()=>{P[w]=null}),ft(),o=P[l],o?o.p(D,R):(o=P[l]=L[l](D),o.c()),se(o,1),o.m(t,u)),(!y||R&8)&&h!==(h=D[3].length+"")&&we(_,h)},i(D){y||(se(b,D),se(A,D),se(o),y=!0)},o(D){ce(b,D),ce(A,D),ce(o),y=!1},d(D){D&&v(e),b&&b.d(D),A&&A.d(D),P[l].d(),i[11](null),F=!1,mt(T)}}}function Ow(i,e,t){let r,n,s,{$$slots:a={},$$scope:l}=e,{show_attack_modal:o}=e,{parent_node:u}=e,{data:f}=e,p;const d=Qr();tt(i,d,b=>t(16,s=b));const c=$r();tt(i,c,b=>t(15,n=b));let h=new jn;function _(b){r.includes(b)?t(3,r=r.filter(k=>k!==b)):r.push(b),t(3,r)}window.da_to_off_callback=function(b){_(b)};function m(){let b=0,k=200,A=100;for(const L of r){let P=f.da_to_off.results.bindings.find(B=>B.off_tech_id.value.replace(/ |\./g,"")==L);P&&(Sn(d,c,u,"attackSelectorNode",P.off_tech_label.value,"d3f:"+P.off_tech_id.value,u.data.sequence,u.position.x+b*k,u.position.y+A,182,63,P.off_artifact_rel_label.value,!1),b+=1)}d.set(s),c.set(n),p&&p.close(),t(3,r=[])}function y(b){Fr.call(this,i,b)}function F(b){Mt[b?"unshift":"push"](()=>{p=b,t(2,p)})}const T=()=>t(0,o=!1),N=()=>{p.close(),t(3,r=[])};return i.$$set=b=>{"show_attack_modal"in b&&t(0,o=b.show_attack_modal),"parent_node"in b&&t(8,u=b.parent_node),"data"in b&&t(1,f=b.data),"$$scope"in b&&t(14,l=b.$$scope)},i.$$.update=()=>{i.$$.dirty&5&&o&&p&&(p.showModal(),h.reset()),i.$$.dirty&5&&!o&&p&&(p.close(),h.reset())},t(3,r=[]),[o,f,p,r,d,c,h,m,u,a,y,F,T,N,l]}class Bw extends gt{constructor(e){super(),bt(this,e,Ow,Fw,nt,{show_attack_modal:0,parent_node:8,data:1})}}function bf(i,e,t){const r=i.slice();return r[23]=e[t],r}const Lw=i=>({}),wf=i=>({});function Uw(i){let e;return{c(){e=q("No related defensive techniques in this release.")},l(t){e=M(t,"No related defensive techniques in this release.")},m(t,r){C(t,e,r)},p:Me,i:Me,o:Me,d(t){t&&v(e)}}}function jw(i){let e,t,r,n,s,a=i[4],l,o;function u(d){i[14](d)}let f={toggles:i[5]};i[4]!==void 0&&(f.selected=i[4]),r=new kh({props:f}),Mt.push(()=>mr(r,"selected",u));let p=kf(i);return{c(){e=K("br"),t=oe(),Oe(r.$$.fragment),s=oe(),p.c(),l=Re()},l(d){e=Z(d,"BR",{}),t=ue(d),Be(r.$$.fragment,d),s=ue(d),p.l(d),l=Re()},m(d,c){C(d,e,c),C(d,t,c),Le(r,d,c),C(d,s,c),p.m(d,c),C(d,l,c),o=!0},p(d,c){const h={};c&32&&(h.toggles=d[5]),!n&&c&16&&(n=!0,h.selected=d[4],_r(()=>n=!1)),r.$set(h),c&16&&nt(a,a=d[4])?(ut(),ce(p,1,1,Me),ft(),p=kf(d),p.c(),se(p,1),p.m(l.parentNode,l)):p.p(d,c)},i(d){o||(se(r.$$.fragment,d),se(p),o=!0)},o(d){ce(r.$$.fragment,d),ce(p),o=!1},d(d){d&&(v(e),v(t),v(s),v(l)),Ue(r,d),p.d(d)}}}function qw(i){let e,t="Loading...";return{c(){e=K("div"),e.textContent=t},l(r){e=Z(r,"DIV",{"data-svelte-h":!0}),Ke(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(r,n){C(r,e,n)},p:Me,i:Me,o:Me,d(r){r&&v(e)}}}function yf(i){let e=!i[4].includes(i[23].def_tactic_label.value),t,r=e&&Ef(i);return{c(){r&&r.c(),t=Re()},l(n){r&&r.l(n),t=Re()},m(n,s){r&&r.m(n,s),C(n,t,s)},p(n,s){s&18&&(e=!n[4].includes(n[23].def_tactic_label.value)),e?r?r.p(n,s):(r=Ef(n),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d(n){n&&v(t),r&&r.d(n)}}}function Ef(i){let e=je(i[23].def_tech.value)+"",t,r,n=i[23].def_tech_label.value+"",s,a,l="-->",o,u,f=i[23].def_artifact_rel_label.value.replace(/ /g,"")+"",p,d,c=je(i[23].def_artifact.value)+"",h,_,m=i[23].def_artifact_label.value+"",y,F,T,N,b=je(i[23].def_artifact.value)+"",k,A,L=je(i[23].def_tech.value)+"",P,B,D=je(i[23].def_tech.value)+"",R,w,S=je(i[23].def_artifact.value)+"",X,j,ne=je(i[23].def_artifact.value)+"",J,W;function x(Q,ae){return ae&66&&(T=null),T==null&&(T=!!Q[6].includes(je(Q[23].def_tech.value))),T?Vw:Mw}let G=x(i,-1),le=G(i);return{c(){t=q(e),r=q('["'),s=q(n),a=q('"] '),o=q(l),u=q(`
                | `),p=q(f),d=q(" | "),h=q(c),_=q('["'),y=q(m),F=q(`"];
                `),le.c(),N=q(` 
                class `),k=q(b),A=q(` ArtifactNode;
                click `),P=q(L),B=q(` href "javascript:da_to_def_callback('`),R=q(D),w=q(`')";
                click `),X=q(S),j=q(' href "/dao/artifact/d3f:'),J=q(ne),W=q('";')},l(Q){t=M(Q,e),r=M(Q,'["'),s=M(Q,n),a=M(Q,'"] '),o=M(Q,l),u=M(Q,`
                | `),p=M(Q,f),d=M(Q," | "),h=M(Q,c),_=M(Q,'["'),y=M(Q,m),F=M(Q,`"];
                `),le.l(Q),N=M(Q,` 
                class `),k=M(Q,b),A=M(Q,` ArtifactNode;
                click `),P=M(Q,L),B=M(Q,` href "javascript:da_to_def_callback('`),R=M(Q,D),w=M(Q,`')";
                click `),X=M(Q,S),j=M(Q,' href "/dao/artifact/d3f:'),J=M(Q,ne),W=M(Q,'";')},m(Q,ae){C(Q,t,ae),C(Q,r,ae),C(Q,s,ae),C(Q,a,ae),C(Q,o,ae),C(Q,u,ae),C(Q,p,ae),C(Q,d,ae),C(Q,h,ae),C(Q,_,ae),C(Q,y,ae),C(Q,F,ae),le.m(Q,ae),C(Q,N,ae),C(Q,k,ae),C(Q,A,ae),C(Q,P,ae),C(Q,B,ae),C(Q,R,ae),C(Q,w,ae),C(Q,X,ae),C(Q,j,ae),C(Q,J,ae),C(Q,W,ae)},p(Q,ae){ae&2&&e!==(e=je(Q[23].def_tech.value)+"")&&we(t,e),ae&2&&n!==(n=Q[23].def_tech_label.value+"")&&we(s,n),ae&2&&f!==(f=Q[23].def_artifact_rel_label.value.replace(/ /g,"")+"")&&we(p,f),ae&2&&c!==(c=je(Q[23].def_artifact.value)+"")&&we(h,c),ae&2&&m!==(m=Q[23].def_artifact_label.value+"")&&we(y,m),G===(G=x(Q,ae))&&le?le.p(Q,ae):(le.d(1),le=G(Q),le&&(le.c(),le.m(N.parentNode,N))),ae&2&&b!==(b=je(Q[23].def_artifact.value)+"")&&we(k,b),ae&2&&L!==(L=je(Q[23].def_tech.value)+"")&&we(P,L),ae&2&&D!==(D=je(Q[23].def_tech.value)+"")&&we(R,D),ae&2&&S!==(S=je(Q[23].def_artifact.value)+"")&&we(X,S),ae&2&&ne!==(ne=je(Q[23].def_artifact.value)+"")&&we(J,ne)},d(Q){Q&&(v(t),v(r),v(s),v(a),v(o),v(u),v(p),v(d),v(h),v(_),v(y),v(F),v(N),v(k),v(A),v(P),v(B),v(R),v(w),v(X),v(j),v(J),v(W)),le.d(Q)}}}function Mw(i){let e,t=je(i[23].def_tech.value)+"",r,n;return{c(){e=q("class "),r=q(t),n=q(" DefensiveTechniqueNode;")},l(s){e=M(s,"class "),r=M(s,t),n=M(s," DefensiveTechniqueNode;")},m(s,a){C(s,e,a),C(s,r,a),C(s,n,a)},p(s,a){a&2&&t!==(t=je(s[23].def_tech.value)+"")&&we(r,t)},d(s){s&&(v(e),v(r),v(n))}}}function Vw(i){let e,t=je(i[23].def_tech.value)+"",r,n;return{c(){e=q("class "),r=q(t),n=q(" SelectedDefensiveTechniqueNode;")},l(s){e=M(s,"class "),r=M(s,t),n=M(s," SelectedDefensiveTechniqueNode;")},m(s,a){C(s,e,a),C(s,r,a),C(s,n,a)},p(s,a){a&2&&t!==(t=je(s[23].def_tech.value)+"")&&we(r,t)},d(s){s&&(v(e),v(r),v(n))}}}function Df(i){let e=i[3].edge_is_unique(i[23].def_tech_label.value,i[23].def_artifact_rel_label.value,i[23].def_artifact_label.value),t,r=e&&yf(i);return{c(){r&&r.c(),t=Re()},l(n){r&&r.l(n),t=Re()},m(n,s){r&&r.m(n,s),C(n,t,s)},p(n,s){s&10&&(e=n[3].edge_is_unique(n[23].def_tech_label.value,n[23].def_artifact_rel_label.value,n[23].def_artifact_label.value)),e?r?r.p(n,s):(r=yf(n),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d(n){n&&v(t),r&&r.d(n)}}}function zw(i){let e,t,r=Ge(i[1].da_to_def.results.bindings),n=[];for(let s=0;s<r.length;s+=1)n[s]=Df(bf(i,r,s));return{c(){e=q(`graph LR;
          `);for(let s=0;s<n.length;s+=1)n[s].c();t=Re()},l(s){e=M(s,`graph LR;
          `);for(let a=0;a<n.length;a+=1)n[a].l(s);t=Re()},m(s,a){C(s,e,a);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(s,a);C(s,t,a)},p(s,a){if(a&90){r=Ge(s[1].da_to_def.results.bindings);let l;for(l=0;l<r.length;l+=1){const o=bf(s,r,l);n[l]?n[l].p(o,a):(n[l]=Df(o),n[l].c(),n[l].m(t.parentNode,t))}for(;l<n.length;l+=1)n[l].d(1);n.length=r.length}},d(s){s&&(v(e),v(t)),Dt(n,s)}}}function kf(i){let e,t;return e=new An({props:{$$slots:{default:[zw]},$$scope:{ctx:i}}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n&262234&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function Hw(i){let e,t,r,n,s,a,l,o,u,f,p,d,c,h=i[6].length+"",_,m,y,F,T;const N=i[12].header,b=Vt(N,i,i[18],wf),k=i[12].default,A=Vt(k,i,i[18],null),L=[qw,jw,Uw],P=[];function B(D,R){return D[1]?D[1].da_to_def.results.bindings.length>0?1:2:0}return l=B(i),o=P[l]=L[l](i),{c(){e=K("dialog"),t=K("div"),b&&b.c(),r=q(`
    Select Countermeasure Techniques
    `),A&&A.c(),n=oe(),s=K("hr"),a=oe(),o.c(),u=oe(),f=K("hr"),p=oe(),d=K("button"),c=q("Insert ("),_=q(h),m=q(")"),this.h()},l(D){e=Z(D,"DIALOG",{class:!0});var R=Ce(e);t=Z(R,"DIV",{class:!0});var w=Ce(t);b&&b.l(w),r=M(w,`
    Select Countermeasure Techniques
    `),A&&A.l(w),n=ue(w),s=Z(w,"HR",{}),a=ue(w),o.l(w),u=ue(w),f=Z(w,"HR",{}),p=ue(w),d=Z(w,"BUTTON",{class:!0});var S=Ce(d);c=M(S,"Insert ("),_=M(S,h),m=M(S,")"),S.forEach(v),w.forEach(v),R.forEach(v),this.h()},h(){d.autofocus=!0,re(d,"class","svelte-1yq7x1p"),re(t,"class","svelte-1yq7x1p"),re(e,"class","svelte-1yq7x1p")},m(D,R){C(D,e,R),z(e,t),b&&b.m(t,null),z(t,r),A&&A.m(t,null),z(t,n),z(t,s),z(t,a),P[l].m(t,null),z(t,u),z(t,f),z(t,p),z(t,d),z(d,c),z(d,_),z(d,m),i[15](e),y=!0,d.focus(),F||(T=[ye(d,"click",i[9]),ye(t,"click",Wt(i[13])),ye(e,"close",i[16]),ye(e,"click",kn(i[17]))],F=!0)},p(D,[R]){b&&b.p&&(!y||R&262144)&&zt(b,N,D,D[18],y?xt(N,D[18],R,Lw):Ht(D[18]),wf),A&&A.p&&(!y||R&262144)&&zt(A,k,D,D[18],y?xt(k,D[18],R,null):Ht(D[18]),null);let w=l;l=B(D),l===w?P[l].p(D,R):(ut(),ce(P[w],1,1,()=>{P[w]=null}),ft(),o=P[l],o?o.p(D,R):(o=P[l]=L[l](D),o.c()),se(o,1),o.m(t,u)),(!y||R&64)&&h!==(h=D[6].length+"")&&we(_,h)},i(D){y||(se(b,D),se(A,D),se(o),y=!0)},o(D){ce(b,D),ce(A,D),ce(o),y=!1},d(D){D&&v(e),b&&b.d(D),A&&A.d(D),P[l].d(),i[15](null),F=!1,mt(T)}}}function xw(i,e,t){let r,n,s,{$$slots:a={},$$scope:l}=e,{show_defend_modal:o}=e,{parent_node:u}=e,{data:f}=e,p;const d=Qr();tt(i,d,B=>t(20,s=B));const c=$r();tt(i,c,B=>t(19,n=B));let h=new jn;function _(B){r.includes(B)?t(6,r=r.filter(D=>D!==B)):r.push(B),t(6,r)}window.da_to_def_callback=function(B){_(B)};function m(){let B=0,D=200,R=100;for(const w of r){let S=f.da_to_def.results.bindings.find(X=>je(X.def_tech.value)==w);S&&(Sn(d,c,u,"countermeasureSelectorNode",S.def_tech_label.value,"d3f:"+je(S.def_tech.value),u.data.sequence,u.position.x+B*D,u.position.y-R,182,63,S.def_artifact_rel_label.value,!1),B+=1)}d.set(s),c.set(n),p&&p.close(),t(6,r=[])}let y=new Set,F=[],T=[];Eh(F,T)&&(T=[]);function N(B){for(const D of r){let R=f.da_to_def.results.bindings.find(w=>je(w.def_tech.value)==D);B.includes(R.def_tactic_label.value)&&t(6,r=r.filter(w=>w!==D))}t(6,r)}function b(B){Fr.call(this,i,B)}function k(B){T=B,t(4,T)}function A(B){Mt[B?"unshift":"push"](()=>{p=B,t(2,p)})}const L=()=>t(0,o=!1),P=()=>{p.close(),t(6,r=[])};return i.$$set=B=>{"show_defend_modal"in B&&t(0,o=B.show_defend_modal),"parent_node"in B&&t(10,u=B.parent_node),"data"in B&&t(1,f=B.data),"$$scope"in B&&t(18,l=B.$$scope)},i.$$.update=()=>{i.$$.dirty&5&&o&&p&&(p.showModal(),t(3,h=new jn)),i.$$.dirty&5&&!o&&p&&p.close(),i.$$.dirty&2050&&f&&(f.da_to_def.results.bindings.forEach(B=>{y.add(B.def_tactic_label.value)}),t(11,y),t(1,f)),i.$$.dirty&2048&&t(5,F=Array.from(y).sort(function(B,D){return Qa[B]-Qa[D]})),i.$$.dirty&16&&N(T),i.$$.dirty&24&&h.reset(T)},t(6,r=[]),[o,f,p,h,T,F,r,d,c,m,u,y,a,b,k,A,L,P,l]}class Xw extends gt{constructor(e){super(),bt(this,e,xw,Hw,nt,{show_defend_modal:0,parent_node:10,data:1})}}function Af(i,e,t){const r=i.slice();return r[26]=e[t],r}function Cf(i,e,t){const r=i.slice();return r[29]=e[t],r}function Tf(i,e,t){const r=i.slice();return r[32]=e[t],r}function Nf(i,e,t){const r=i.slice();return r[26]=e[t],r}function Sf(i,e,t){const r=i.slice();return r[29]=e[t],r}const Gw=i=>({}),If=i=>({});function Qw(i){let e;return{c(){e=q("No related weaknesses in this release.")},l(t){e=M(t,"No related weaknesses in this release.")},m(t,r){C(t,e,r)},p:Me,i:Me,o:Me,d(t){t&&v(e)}}}function $w(i){let e,t;return e=new An({props:{$$slots:{default:[Yw]},$$scope:{ctx:i}}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n[0]&4194750&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function Ww(i){let e,t="Loading...";return{c(){e=K("div"),e.textContent=t},l(r){e=Z(r,"DIV",{"data-svelte-h":!0}),Ke(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(r,n){C(r,e,n)},p:Me,i:Me,o:Me,d(r){r&&v(e)}}}function Pf(i){let e,t=Ge(i[32]["d3f:outbound"]),r=[];for(let n=0;n<t.length;n+=1)r[n]=Of(Nf(i,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=Re()},l(n){for(let s=0;s<r.length;s+=1)r[s].l(n);e=Re()},m(n,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,s);C(n,e,s)},p(n,s){if(s[0]&430){t=Ge(n[32]["d3f:outbound"]);let a;for(a=0;a<t.length;a+=1){const l=Nf(n,t,a);r[a]?r[a].p(l,s):(r[a]=Of(l),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},d(n){n&&v(e),Dt(r,n)}}}function Rf(i){let e,t=i[32]["@id"]+"",r,n;return{c(){e=q("class "),r=q(t),n=q(" selected_inbound_node;")},l(s){e=M(s,"class "),r=M(s,t),n=M(s," selected_inbound_node;")},m(s,a){C(s,e,a),C(s,r,a),C(s,n,a)},p(s,a){a[0]&160&&t!==(t=s[32]["@id"]+"")&&we(r,t)},d(s){s&&(v(e),v(r),v(n))}}}function Ff(i){let e=i[32]["@id"]+"",t,r,n=i[32]["rdfs:label"][0]+"",s,a,l="-->",o,u,f=je(i[26]["@id"])+"",p,d,c=i[29]["@id"]+"",h,_,m=i[7].i(i[29]["@id"])["rdfs:label"][0]+"",y,F,T=i[32]["@id"]+"",N,b,k=i[32]["@id"]+"",A,L,P,B,D=i[8].includes(i[32]["@id"]),R,w=i[29]["@id"]+"",S,X,j=i[29]["@id"]+"",ne,J,W,x,G=i[32]["@id"]+"",le,Q,ae=i[32]["@id"]+"",Ve,ze,De=i[29]["@id"]+"",Pe,ve,he=i[3](i[29])+"",Fe,lt,He=D&&Rf(i);return{c(){t=q(e),r=q('["'),s=q(n),a=q('"] '),o=q(l),u=q(" | "),p=q(f),d=q(" | "),h=q(c),_=q('["'),y=q(m),F=q(`"];
                class `),N=q(T),b=q(" inbound_node; style "),A=q(k),L=q(" fill:"),P=q(i[1]),B=q(`;
                `),He&&He.c(),R=q(`
                class `),S=q(w),X=q(" RootArtifactNode; style "),ne=q(j),J=q(" fill:"),W=q(i[2]),x=q(`;
                click `),le=q(G),Q=q(` href "javascript:da_to_weak_callback('`),Ve=q(ae),ze=q(`')"; click `),Pe=q(De),ve=q(' href "'),Fe=q(he),lt=q('";')},l(fe){t=M(fe,e),r=M(fe,'["'),s=M(fe,n),a=M(fe,'"] '),o=M(fe,l),u=M(fe," | "),p=M(fe,f),d=M(fe," | "),h=M(fe,c),_=M(fe,'["'),y=M(fe,m),F=M(fe,`"];
                class `),N=M(fe,T),b=M(fe," inbound_node; style "),A=M(fe,k),L=M(fe," fill:"),P=M(fe,i[1]),B=M(fe,`;
                `),He&&He.l(fe),R=M(fe,`
                class `),S=M(fe,w),X=M(fe," RootArtifactNode; style "),ne=M(fe,j),J=M(fe," fill:"),W=M(fe,i[2]),x=M(fe,`;
                click `),le=M(fe,G),Q=M(fe,` href "javascript:da_to_weak_callback('`),Ve=M(fe,ae),ze=M(fe,`')"; click `),Pe=M(fe,De),ve=M(fe,' href "'),Fe=M(fe,he),lt=M(fe,'";')},m(fe,Te){C(fe,t,Te),C(fe,r,Te),C(fe,s,Te),C(fe,a,Te),C(fe,o,Te),C(fe,u,Te),C(fe,p,Te),C(fe,d,Te),C(fe,h,Te),C(fe,_,Te),C(fe,y,Te),C(fe,F,Te),C(fe,N,Te),C(fe,b,Te),C(fe,A,Te),C(fe,L,Te),C(fe,P,Te),C(fe,B,Te),He&&He.m(fe,Te),C(fe,R,Te),C(fe,S,Te),C(fe,X,Te),C(fe,ne,Te),C(fe,J,Te),C(fe,W,Te),C(fe,x,Te),C(fe,le,Te),C(fe,Q,Te),C(fe,Ve,Te),C(fe,ze,Te),C(fe,Pe,Te),C(fe,ve,Te),C(fe,Fe,Te),C(fe,lt,Te)},p(fe,Te){Te[0]&160&&e!==(e=fe[32]["@id"]+"")&&we(t,e),Te[0]&160&&n!==(n=fe[32]["rdfs:label"][0]+"")&&we(s,n),Te[0]&160&&f!==(f=je(fe[26]["@id"])+"")&&we(p,f),Te[0]&160&&c!==(c=fe[29]["@id"]+"")&&we(h,c),Te[0]&160&&m!==(m=fe[7].i(fe[29]["@id"])["rdfs:label"][0]+"")&&we(y,m),Te[0]&160&&T!==(T=fe[32]["@id"]+"")&&we(N,T),Te[0]&160&&k!==(k=fe[32]["@id"]+"")&&we(A,k),Te[0]&2&&we(P,fe[1]),Te[0]&416&&(D=fe[8].includes(fe[32]["@id"])),D?He?He.p(fe,Te):(He=Rf(fe),He.c(),He.m(R.parentNode,R)):He&&(He.d(1),He=null),Te[0]&160&&w!==(w=fe[29]["@id"]+"")&&we(S,w),Te[0]&160&&j!==(j=fe[29]["@id"]+"")&&we(ne,j),Te[0]&4&&we(W,fe[2]),Te[0]&160&&G!==(G=fe[32]["@id"]+"")&&we(le,G),Te[0]&160&&ae!==(ae=fe[32]["@id"]+"")&&we(Ve,ae),Te[0]&160&&De!==(De=fe[29]["@id"]+"")&&we(Pe,De),Te[0]&168&&he!==(he=fe[3](fe[29])+"")&&we(Fe,he)},d(fe){fe&&(v(t),v(r),v(s),v(a),v(o),v(u),v(p),v(d),v(h),v(_),v(y),v(F),v(N),v(b),v(A),v(L),v(P),v(B),v(R),v(S),v(X),v(ne),v(J),v(W),v(x),v(le),v(Q),v(Ve),v(ze),v(Pe),v(ve),v(Fe),v(lt)),He&&He.d(fe)}}}function Of(i){let e,t=Ge(i[32][i[26]["@id"]]),r=[];for(let n=0;n<t.length;n+=1)r[n]=Ff(Sf(i,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=Re()},l(n){for(let s=0;s<r.length;s+=1)r[s].l(n);e=Re()},m(n,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,s);C(n,e,s)},p(n,s){if(s[0]&430){t=Ge(n[32][n[26]["@id"]]);let a;for(a=0;a<t.length;a+=1){const l=Sf(n,t,a);r[a]?r[a].p(l,s):(r[a]=Ff(l),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},d(n){n&&v(e),Dt(r,n)}}}function Bf(i){let e,t=i[32]["d3f:outbound"]&&Pf(i);return{c(){t&&t.c(),e=Re()},l(r){t&&t.l(r),e=Re()},m(r,n){t&&t.m(r,n),C(r,e,n)},p(r,n){r[32]["d3f:outbound"]?t?t.p(r,n):(t=Pf(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(r){r&&v(e),t&&t.d(r)}}}function Lf(i){let e,t=Ge(i[7].i(i[5].description["@id"])["d3f:outbound"]),r=[];for(let n=0;n<t.length;n+=1)r[n]=jf(Af(i,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=Re()},l(n){for(let s=0;s<r.length;s+=1)r[s].l(n);e=Re()},m(n,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,s);C(n,e,s)},p(n,s){if(s[0]&184){t=Ge(n[7].i(n[5].description["@id"])["d3f:outbound"]);let a;for(a=0;a<t.length;a+=1){const l=Af(n,t,a);r[a]?r[a].p(l,s):(r[a]=jf(l),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},d(n){n&&v(e),Dt(r,n)}}}function Uf(i){let e=i[5].description["@id"]+"",t,r,n=i[7].i(i[5].description["@id"])["rdfs:label"][0]+"",s,a,l="-->",o,u,f=je(i[26]["@id"])+"",p,d,c=i[29]["@id"]+"",h,_,m=i[7].graph[i[7].index[i[29]["@id"]]]["rdfs:label"][0]+"",y,F,T=i[5].description["@id"]+"",N,b,k=i[29]["@id"]+"",A,L,P=i[5].description["@id"]+"",B,D,R=i[3](i[5].description["@id"])+"",w,S,X=i[29]["@id"]+"",j,ne,J=i[4](i[29])+"",W,x;return{c(){t=q(e),r=q('["'),s=q(n),a=q('"] '),o=q(l),u=q(" | "),p=q(f),d=q(" | "),h=q(c),_=q('["'),y=q(m),F=q('"]; class '),N=q(T),b=q(" RootArtifactNode; class "),A=q(k),L=q(` ArtifactNode;
              click `),B=q(P),D=q(' href "'),w=q(R),S=q('"; click '),j=q(X),ne=q(' href "'),W=q(J),x=q('";')},l(G){t=M(G,e),r=M(G,'["'),s=M(G,n),a=M(G,'"] '),o=M(G,l),u=M(G," | "),p=M(G,f),d=M(G," | "),h=M(G,c),_=M(G,'["'),y=M(G,m),F=M(G,'"]; class '),N=M(G,T),b=M(G," RootArtifactNode; class "),A=M(G,k),L=M(G,` ArtifactNode;
              click `),B=M(G,P),D=M(G,' href "'),w=M(G,R),S=M(G,'"; click '),j=M(G,X),ne=M(G,' href "'),W=M(G,J),x=M(G,'";')},m(G,le){C(G,t,le),C(G,r,le),C(G,s,le),C(G,a,le),C(G,o,le),C(G,u,le),C(G,p,le),C(G,d,le),C(G,h,le),C(G,_,le),C(G,y,le),C(G,F,le),C(G,N,le),C(G,b,le),C(G,A,le),C(G,L,le),C(G,B,le),C(G,D,le),C(G,w,le),C(G,S,le),C(G,j,le),C(G,ne,le),C(G,W,le),C(G,x,le)},p(G,le){le[0]&32&&e!==(e=G[5].description["@id"]+"")&&we(t,e),le[0]&160&&n!==(n=G[7].i(G[5].description["@id"])["rdfs:label"][0]+"")&&we(s,n),le[0]&160&&f!==(f=je(G[26]["@id"])+"")&&we(p,f),le[0]&160&&c!==(c=G[29]["@id"]+"")&&we(h,c),le[0]&160&&m!==(m=G[7].graph[G[7].index[G[29]["@id"]]]["rdfs:label"][0]+"")&&we(y,m),le[0]&32&&T!==(T=G[5].description["@id"]+"")&&we(N,T),le[0]&160&&k!==(k=G[29]["@id"]+"")&&we(A,k),le[0]&32&&P!==(P=G[5].description["@id"]+"")&&we(B,P),le[0]&40&&R!==(R=G[3](G[5].description["@id"])+"")&&we(w,R),le[0]&160&&X!==(X=G[29]["@id"]+"")&&we(j,X),le[0]&176&&J!==(J=G[4](G[29])+"")&&we(W,J)},d(G){G&&(v(t),v(r),v(s),v(a),v(o),v(u),v(p),v(d),v(h),v(_),v(y),v(F),v(N),v(b),v(A),v(L),v(B),v(D),v(w),v(S),v(j),v(ne),v(W),v(x))}}}function jf(i){let e,t=Ge(i[7].i(i[5].description["@id"])[i[26]["@id"]]),r=[];for(let n=0;n<t.length;n+=1)r[n]=Uf(Cf(i,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=Re()},l(n){for(let s=0;s<r.length;s+=1)r[s].l(n);e=Re()},m(n,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,s);C(n,e,s)},p(n,s){if(s[0]&184){t=Ge(n[7].i(n[5].description["@id"])[n[26]["@id"]]);let a;for(a=0;a<t.length;a+=1){const l=Cf(n,t,a);r[a]?r[a].p(l,s):(r[a]=Uf(l),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},d(n){n&&v(e),Dt(r,n)}}}function Yw(i){let e,t,r=i[7].i(i[5].description["@id"])&&i[7].i(i[5].description["@id"])["d3f:outbound"],n,s=Ge(i[7].graph.filter(i[18])),a=[];for(let o=0;o<s.length;o+=1)a[o]=Bf(Tf(i,s,o));let l=r&&Lf(i);return{c(){e=q(`graph LR;
        `);for(let o=0;o<a.length;o+=1)a[o].c();t=oe(),l&&l.c(),n=Re()},l(o){e=M(o,`graph LR;
        `);for(let u=0;u<a.length;u+=1)a[u].l(o);t=ue(o),l&&l.l(o),n=Re()},m(o,u){C(o,e,u);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(o,u);C(o,t,u),l&&l.m(o,u),C(o,n,u)},p(o,u){if(u[0]&430){s=Ge(o[7].graph.filter(o[18]));let f;for(f=0;f<s.length;f+=1){const p=Tf(o,s,f);a[f]?a[f].p(p,u):(a[f]=Bf(p),a[f].c(),a[f].m(t.parentNode,t))}for(;f<a.length;f+=1)a[f].d(1);a.length=s.length}u[0]&160&&(r=o[7].i(o[5].description["@id"])&&o[7].i(o[5].description["@id"])["d3f:outbound"]),r?l?l.p(o,u):(l=Lf(o),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},d(o){o&&(v(e),v(t),v(n)),Dt(a,o),l&&l.d(o)}}}function Jw(i){let e,t,r,n,s,a,l,o,u,f,p,d,c,h=i[8].length+"",_,m,y,F,T;const N=i[16].header,b=Vt(N,i,i[22],If),k=i[16].default,A=Vt(k,i,i[22],null),L=[Ww,$w,Qw],P=[];function B(D,R){return D[5]?D[7].graph.length>0?1:2:0}return l=B(i),o=P[l]=L[l](i),{c(){e=K("dialog"),t=K("div"),b&&b.c(),r=q(`
    Select Weaknesses
    `),A&&A.c(),n=oe(),s=K("hr"),a=oe(),o.c(),u=oe(),f=K("hr"),p=oe(),d=K("button"),c=q("Insert ("),_=q(h),m=q(")"),this.h()},l(D){e=Z(D,"DIALOG",{class:!0});var R=Ce(e);t=Z(R,"DIV",{class:!0});var w=Ce(t);b&&b.l(w),r=M(w,`
    Select Weaknesses
    `),A&&A.l(w),n=ue(w),s=Z(w,"HR",{}),a=ue(w),o.l(w),u=ue(w),f=Z(w,"HR",{}),p=ue(w),d=Z(w,"BUTTON",{class:!0});var S=Ce(d);c=M(S,"Insert ("),_=M(S,h),m=M(S,")"),S.forEach(v),w.forEach(v),R.forEach(v),this.h()},h(){d.autofocus=!0,re(d,"class","svelte-1resfch"),re(t,"class","svelte-1resfch"),re(e,"class","svelte-1resfch")},m(D,R){C(D,e,R),z(e,t),b&&b.m(t,null),z(t,r),A&&A.m(t,null),z(t,n),z(t,s),z(t,a),P[l].m(t,null),z(t,u),z(t,f),z(t,p),z(t,d),z(d,c),z(d,_),z(d,m),i[19](e),y=!0,d.focus(),F||(T=[ye(d,"click",i[11]),ye(t,"click",Wt(i[17])),ye(e,"close",i[20]),ye(e,"click",kn(i[21]))],F=!0)},p(D,R){b&&b.p&&(!y||R[0]&4194304)&&zt(b,N,D,D[22],y?xt(N,D[22],R,Gw):Ht(D[22]),If),A&&A.p&&(!y||R[0]&4194304)&&zt(A,k,D,D[22],y?xt(k,D[22],R,null):Ht(D[22]),null);let w=l;l=B(D),l===w?P[l].p(D,R):(ut(),ce(P[w],1,1,()=>{P[w]=null}),ft(),o=P[l],o?o.p(D,R):(o=P[l]=L[l](D),o.c()),se(o,1),o.m(t,u)),(!y||R[0]&256)&&h!==(h=D[8].length+"")&&we(_,h)},i(D){y||(se(b,D),se(A,D),se(o),y=!0)},o(D){ce(b,D),ce(A,D),ce(o),y=!1},d(D){D&&v(e),b&&b.d(D),A&&A.d(D),P[l].d(),i[19](null),F=!1,mt(T)}}}function Kw(i,e,t){let r,n,s,{$$slots:a={},$$scope:l}=e,{outbound_color:o="#fff4dd"}=e,{inbound_color:u="#fff4dd"}=e,{root_color:f="#fff4dd"}=e,{link_function:p=w=>`/dao/artifact/${w["@id"]}`}=e,{inbound_link_function:d=p}=e,{root_link_function:c=w=>`/dao/artifact/${w["@id"]}`}=e,{outbound_link_function:h=p}=e,{show_weakness_modal:_}=e,{parent_node:m}=e,{data:y}=e,F;const T=Qr();tt(i,T,w=>t(24,s=w));const N=$r();tt(i,N,w=>t(23,n=w));let b;function k(w){r.includes(w)?t(8,r=r.filter(S=>S!==w)):r.push(w),t(8,r),t(8,r)}window.da_to_weak_callback=function(w){k(w)};function A(){let w=0,S=200,X=100;for(const j of r){let ne=y.da_to_weak["@graph"].find(J=>J["@id"]==j);ne&&(Sn(T,N,m,"vulnerabilitySelectorNode",ne["rdfs:label"],ne["d3f:cwe-id"],m.data.sequence,m.position.x+w*S,m.position.y+X,182,63,ne["d3f:outbound"][0]["@id"].replace("d3f:",""),!1),w+=1)}T.set(s),N.set(n),F&&F.close(),t(8,r=[])}function L(w){Fr.call(this,i,w)}const P=w=>w["@id"]!=y.description["@id"];function B(w){Mt[w?"unshift":"push"](()=>{F=w,t(6,F)})}const D=()=>t(0,_=!1),R=()=>{F.close(),t(8,r=[])};return i.$$set=w=>{"outbound_color"in w&&t(12,o=w.outbound_color),"inbound_color"in w&&t(1,u=w.inbound_color),"root_color"in w&&t(2,f=w.root_color),"link_function"in w&&t(13,p=w.link_function),"inbound_link_function"in w&&t(14,d=w.inbound_link_function),"root_link_function"in w&&t(3,c=w.root_link_function),"outbound_link_function"in w&&t(4,h=w.outbound_link_function),"show_weakness_modal"in w&&t(0,_=w.show_weakness_modal),"parent_node"in w&&t(15,m=w.parent_node),"data"in w&&t(5,y=w.data),"$$scope"in w&&t(22,l=w.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&65&&_&&F&&F.showModal(),i.$$.dirty[0]&65&&!_&&F&&F.close(),i.$$.dirty[0]&32&&y&&t(7,b=new Al(y.da_to_weak,{index:!0}))},t(8,r=[]),[_,u,f,c,h,y,F,b,r,T,N,A,o,p,d,m,a,L,P,B,D,R,l]}class Zw extends gt{constructor(e){super(),bt(this,e,Kw,Jw,nt,{outbound_color:12,inbound_color:1,root_color:2,link_function:13,inbound_link_function:14,root_link_function:3,outbound_link_function:4,show_weakness_modal:0,parent_node:15,data:5},null,[-1,-1])}}function qf(i,e,t){const r=i.slice();return r[31]=e[t],r}function Mf(i,e,t){const r=i.slice();return r[34]=e[t],r}function Vf(i,e,t){const r=i.slice();return r[37]=e[t],r}const ey=i=>({}),zf=i=>({});function ty(i){let e;return{c(){e=q("No related parts/control in this release")},l(t){e=M(t,"No related parts/control in this release")},m(t,r){C(t,e,r)},p:Me,i:Me,o:Me,d(t){t&&v(e)}}}function ry(i){let e,t;return e=new An({props:{$$slots:{default:[iy]},$$scope:{ctx:i}}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n[0]&134217934&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function ny(i){let e,t="Loading...";return{c(){e=K("div"),e.textContent=t},l(r){e=Z(r,"DIV",{"data-svelte-h":!0}),Ke(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(r,n){C(r,e,n)},p:Me,i:Me,o:Me,d(r){r&&v(e)}}}function Hf(i){let e,t=Ge(i[31]["d3f:outbound"].filter(i[23])),r=[];for(let n=0;n<t.length;n+=1)r[n]=Yf(Mf(i,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=Re()},l(n){for(let s=0;s<r.length;s+=1)r[s].l(n);e=Re()},m(n,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,s);C(n,e,s)},p(n,s){if(s[0]&206){t=Ge(n[31]["d3f:outbound"].filter(n[23]));let a;for(a=0;a<t.length;a+=1){const l=Mf(n,t,a);r[a]?r[a].p(l,s):(r[a]=Yf(l),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},d(n){n&&v(e),Dt(r,n)}}}function xf(i){let e,t,r=i[31]["@id"]!=i[2].data.d3f_class&&Xf(i),n=i[37]["@id"]!=i[2].data.d3f_class&&Gf(i);return{c(){r&&r.c(),e=oe(),n&&n.c(),t=Re()},l(s){r&&r.l(s),e=ue(s),n&&n.l(s),t=Re()},m(s,a){r&&r.m(s,a),C(s,e,a),n&&n.m(s,a),C(s,t,a)},p(s,a){s[31]["@id"]!=s[2].data.d3f_class?r?r.p(s,a):(r=Xf(s),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),s[37]["@id"]!=s[2].data.d3f_class?n?n.p(s,a):(n=Gf(s),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(s){s&&(v(e),v(t)),r&&r.d(s),n&&n.d(s)}}}function Xf(i){let e,t=i[31]["@id"]+"",r,n;return{c(){e=q("class "),r=q(t),n=q(" selected_outbound_node;")},l(s){e=M(s,"class "),r=M(s,t),n=M(s," selected_outbound_node;")},m(s,a){C(s,e,a),C(s,r,a),C(s,n,a)},p(s,a){a[0]&72&&t!==(t=s[31]["@id"]+"")&&we(r,t)},d(s){s&&(v(e),v(r),v(n))}}}function Gf(i){let e,t=i[37]["@id"]+"",r,n;return{c(){e=q("class "),r=q(t),n=q(" selected_outbound_node;")},l(s){e=M(s,"class "),r=M(s,t),n=M(s," selected_outbound_node;")},m(s,a){C(s,e,a),C(s,r,a),C(s,n,a)},p(s,a){a[0]&74&&t!==(t=s[37]["@id"]+"")&&we(r,t)},d(s){s&&(v(e),v(r),v(n))}}}function Qf(i){let e,t=i[31]["@id"]+"",r,n,s=i[31]["@id"]+"",a,l,o=je(i[34]["@id"])+"",u,f,p=i[37]["@id"]+"",d,c;return{c(){e=q("click "),r=q(t),n=q(` href "javascript:da_to_neighbors_callback('`),a=q(s),l=q("', '"),u=q(o),f=q("','"),d=q(p),c=q(`')";`)},l(h){e=M(h,"click "),r=M(h,t),n=M(h,` href "javascript:da_to_neighbors_callback('`),a=M(h,s),l=M(h,"', '"),u=M(h,o),f=M(h,"','"),d=M(h,p),c=M(h,`')";`)},m(h,_){C(h,e,_),C(h,r,_),C(h,n,_),C(h,a,_),C(h,l,_),C(h,u,_),C(h,f,_),C(h,d,_),C(h,c,_)},p(h,_){_[0]&72&&t!==(t=h[31]["@id"]+"")&&we(r,t),_[0]&72&&s!==(s=h[31]["@id"]+"")&&we(a,s),_[0]&74&&o!==(o=je(h[34]["@id"])+"")&&we(u,o),_[0]&74&&p!==(p=h[37]["@id"]+"")&&we(d,p)},d(h){h&&(v(e),v(r),v(n),v(a),v(l),v(u),v(f),v(d),v(c))}}}function $f(i){let e,t=i[37]["@id"]+"",r,n,s=i[31]["@id"]+"",a,l,o=je(i[34]["@id"])+"",u,f,p=i[37]["@id"]+"",d,c;return{c(){e=q("click "),r=q(t),n=q(` href "javascript:da_to_neighbors_callback('`),a=q(s),l=q("', '"),u=q(o),f=q("','"),d=q(p),c=q(`')";`)},l(h){e=M(h,"click "),r=M(h,t),n=M(h,` href "javascript:da_to_neighbors_callback('`),a=M(h,s),l=M(h,"', '"),u=M(h,o),f=M(h,"','"),d=M(h,p),c=M(h,`')";`)},m(h,_){C(h,e,_),C(h,r,_),C(h,n,_),C(h,a,_),C(h,l,_),C(h,u,_),C(h,f,_),C(h,d,_),C(h,c,_)},p(h,_){_[0]&74&&t!==(t=h[37]["@id"]+"")&&we(r,t),_[0]&72&&s!==(s=h[31]["@id"]+"")&&we(a,s),_[0]&74&&o!==(o=je(h[34]["@id"])+"")&&we(u,o),_[0]&74&&p!==(p=h[37]["@id"]+"")&&we(d,p)},d(h){h&&(v(e),v(r),v(n),v(a),v(l),v(u),v(f),v(d),v(c))}}}function Wf(i){let e=i[31]["@id"]+"",t,r,n=i[31]["rdfs:label"][0]+"",s,a,l="-->",o,u,f=je(i[34]["@id"])+"",p,d,c=i[37]["@id"]+"",h,_,m=i[6].i(i[37]["@id"])["rdfs:label"][0]+"",y,F,T=i[37]["@id"]+"",N,b,k=i[7].some(B),A,L,P;function B(...S){return i[21](i[31],i[34],i[37],...S)}let D=k&&xf(i),R=i[31]["@id"]!=i[2].data.d3f_class&&Qf(i),w=i[37]["@id"]!=i[2].data.d3f_class&&$f(i);return{c(){t=q(e),r=q('["'),s=q(n),a=q('"] '),o=q(l),u=q(" | "),p=q(f),d=q(" | "),h=q(c),_=q('["'),y=q(m),F=q(`"];
                class `),N=q(T),b=q(` outbound;
                `),D&&D.c(),A=oe(),R&&R.c(),L=oe(),w&&w.c(),P=Re()},l(S){t=M(S,e),r=M(S,'["'),s=M(S,n),a=M(S,'"] '),o=M(S,l),u=M(S," | "),p=M(S,f),d=M(S," | "),h=M(S,c),_=M(S,'["'),y=M(S,m),F=M(S,`"];
                class `),N=M(S,T),b=M(S,` outbound;
                `),D&&D.l(S),A=ue(S),R&&R.l(S),L=ue(S),w&&w.l(S),P=Re()},m(S,X){C(S,t,X),C(S,r,X),C(S,s,X),C(S,a,X),C(S,o,X),C(S,u,X),C(S,p,X),C(S,d,X),C(S,h,X),C(S,_,X),C(S,y,X),C(S,F,X),C(S,N,X),C(S,b,X),D&&D.m(S,X),C(S,A,X),R&&R.m(S,X),C(S,L,X),w&&w.m(S,X),C(S,P,X)},p(S,X){i=S,X[0]&72&&e!==(e=i[31]["@id"]+"")&&we(t,e),X[0]&72&&n!==(n=i[31]["rdfs:label"][0]+"")&&we(s,n),X[0]&74&&f!==(f=je(i[34]["@id"])+"")&&we(p,f),X[0]&74&&c!==(c=i[37]["@id"]+"")&&we(h,c),X[0]&74&&m!==(m=i[6].i(i[37]["@id"])["rdfs:label"][0]+"")&&we(y,m),X[0]&74&&T!==(T=i[37]["@id"]+"")&&we(N,T),X[0]&202&&(k=i[7].some(B)),k?D?D.p(i,X):(D=xf(i),D.c(),D.m(A.parentNode,A)):D&&(D.d(1),D=null),i[31]["@id"]!=i[2].data.d3f_class?R?R.p(i,X):(R=Qf(i),R.c(),R.m(L.parentNode,L)):R&&(R.d(1),R=null),i[37]["@id"]!=i[2].data.d3f_class?w?w.p(i,X):(w=$f(i),w.c(),w.m(P.parentNode,P)):w&&(w.d(1),w=null)},d(S){S&&(v(t),v(r),v(s),v(a),v(o),v(u),v(p),v(d),v(h),v(_),v(y),v(F),v(N),v(b),v(A),v(L),v(P)),D&&D.d(S),R&&R.d(S),w&&w.d(S)}}}function Yf(i){let e,t=Ge(i[31][i[34]["@id"]]),r=[];for(let n=0;n<t.length;n+=1)r[n]=Wf(Vf(i,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=Re()},l(n){for(let s=0;s<r.length;s+=1)r[s].l(n);e=Re()},m(n,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,s);C(n,e,s)},p(n,s){if(s[0]&206){t=Ge(n[31][n[34]["@id"]]);let a;for(a=0;a<t.length;a+=1){const l=Vf(n,t,a);r[a]?r[a].p(l,s):(r[a]=Wf(l),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},d(n){n&&v(e),Dt(r,n)}}}function Jf(i){let e,t=i[31]["d3f:outbound"]&&Hf(i);return{c(){t&&t.c(),e=Re()},l(r){t&&t.l(r),e=Re()},m(r,n){t&&t.m(r,n),C(r,e,n)},p(r,n){r[31]["d3f:outbound"]?t?t.p(r,n):(t=Hf(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(r){r&&v(e),t&&t.d(r)}}}function iy(i){let e,t,r=Ge(i[6].graph.filter(i[22])),n=[];for(let s=0;s<r.length;s+=1)n[s]=Jf(qf(i,r,s));return{c(){e=q(`graph LR;
        `);for(let s=0;s<n.length;s+=1)n[s].c();t=Re()},l(s){e=M(s,`graph LR;
        `);for(let a=0;a<n.length;a+=1)n[a].l(s);t=Re()},m(s,a){C(s,e,a);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(s,a);C(s,t,a)},p(s,a){if(a[0]&206){r=Ge(s[6].graph.filter(s[22]));let l;for(l=0;l<r.length;l+=1){const o=qf(s,r,l);n[l]?n[l].p(o,a):(n[l]=Jf(o),n[l].c(),n[l].m(t.parentNode,t))}for(;l<n.length;l+=1)n[l].d(1);n.length=r.length}},d(s){s&&(v(e),v(t)),Dt(n,s)}}}function ay(i){let e,t,r,n,s,a,l,o,u,f,p,d,c,h=i[7].length+"",_,m,y,F,T;const N=i[19].header,b=Vt(N,i,i[27],zf),k=i[19].default,A=Vt(k,i,i[27],null),L=[ny,ry,ty],P=[];function B(D,R){return D[3]?D[5]&&D[6].graph.length>0?1:2:0}return l=B(i),o=P[l]=L[l](i),{c(){e=K("dialog"),t=K("div"),b&&b.c(),r=q(`
    Select Parts/Control Neighbors
    `),A&&A.c(),n=oe(),s=K("hr"),a=oe(),o.c(),u=oe(),f=K("hr"),p=oe(),d=K("button"),c=q("Insert ("),_=q(h),m=q(")"),this.h()},l(D){e=Z(D,"DIALOG",{class:!0});var R=Ce(e);t=Z(R,"DIV",{class:!0});var w=Ce(t);b&&b.l(w),r=M(w,`
    Select Parts/Control Neighbors
    `),A&&A.l(w),n=ue(w),s=Z(w,"HR",{}),a=ue(w),o.l(w),u=ue(w),f=Z(w,"HR",{}),p=ue(w),d=Z(w,"BUTTON",{class:!0});var S=Ce(d);c=M(S,"Insert ("),_=M(S,h),m=M(S,")"),S.forEach(v),w.forEach(v),R.forEach(v),this.h()},h(){d.autofocus=!0,re(d,"class","svelte-x2no78"),re(t,"class","svelte-x2no78"),re(e,"class","svelte-x2no78")},m(D,R){C(D,e,R),z(e,t),b&&b.m(t,null),z(t,r),A&&A.m(t,null),z(t,n),z(t,s),z(t,a),P[l].m(t,null),z(t,u),z(t,f),z(t,p),z(t,d),z(d,c),z(d,_),z(d,m),i[24](e),y=!0,d.focus(),F||(T=[ye(d,"click",i[10]),ye(t,"click",Wt(i[20])),ye(e,"close",i[25]),ye(e,"click",kn(i[26]))],F=!0)},p(D,R){b&&b.p&&(!y||R[0]&134217728)&&zt(b,N,D,D[27],y?xt(N,D[27],R,ey):Ht(D[27]),zf),A&&A.p&&(!y||R[0]&134217728)&&zt(A,k,D,D[27],y?xt(k,D[27],R,null):Ht(D[27]),null);let w=l;l=B(D),l===w?P[l].p(D,R):(ut(),ce(P[w],1,1,()=>{P[w]=null}),ft(),o=P[l],o?o.p(D,R):(o=P[l]=L[l](D),o.c()),se(o,1),o.m(t,u)),(!y||R[0]&128)&&h!==(h=D[7].length+"")&&we(_,h)},i(D){y||(se(b,D),se(A,D),se(o),y=!0)},o(D){ce(b,D),ce(A,D),ce(o),y=!1},d(D){D&&v(e),b&&b.d(D),A&&A.d(D),P[l].d(),i[24](null),F=!1,mt(T)}}}function sy(i,e,t){let r,n,s,{$$slots:a={},$$scope:l}=e,{empty_message:o="has no direct neighbors in this release."}=e,{outbound_color:u="#fff4dd"}=e,{inbound_color:f="#fff4dd"}=e,{root_color:p="#fff4dd"}=e,{link_function:d=J=>`/dao/artifact/${J["@id"]}`}=e,{inbound_link_function:c=d}=e,{root_link_function:h=J=>`/dao/artifact/${J["@id"]}`}=e,{outbound_link_function:_=d}=e,{show_neighbors_modal:m}=e,{neighbor_filter_labels:y}=e,{parent_node:F}=e,{data:T}=e,N,b=!1;const k=Qr();tt(i,k,J=>t(29,s=J));const A=$r();tt(i,A,J=>t(28,n=J));let L;function P(J){r.some(W=>W.source==J.source&&W.relation==J.relation&&W.target==J.target)?t(7,r=r.filter(W=>W.source!=J.source||W.relation!=J.relation||W.target!=J.target)):r.push(J),t(7,r),t(7,r)}window.da_to_neighbors_callback=function(J,W,x){P({source:J,relation:W,target:x})};function B(){let J=0,W=200,x=100;for(const G of r){let le=T.neighbors["@graph"].find(ae=>ae["@id"]==G.source),Q=T.neighbors["@graph"].find(ae=>ae["@id"]==G.target);if(le&&Q){let ae=F.data.d3f_class==le["@id"],Ve=ae?Q:le;Sn(k,A,F,"artifactSelectorNode",Ve["rdfs:label"][0],Ve["@id"],F.data.sequence,F.position.x+J*W,ae?F.position.y+x:F.position.y-x,182,63,G.relation,ae),J+=1}}k.set(s),A.set(n),N&&(N.close(),t(5,b=!1)),t(7,r=[])}function D(J){Fr.call(this,i,J)}const R=(J,W,x,G)=>G.source==J["@id"]&&G.relation==je(W["@id"])&&G.target==x["@id"],w=J=>J["@id"]!=T.description["@id"],S=J=>y.includes(J["@id"]);function X(J){Mt[J?"unshift":"push"](()=>{N=J,t(4,N)})}const j=()=>t(0,m=!1),ne=()=>{N.close(),t(7,r=[])};return i.$$set=J=>{"empty_message"in J&&t(11,o=J.empty_message),"outbound_color"in J&&t(12,u=J.outbound_color),"inbound_color"in J&&t(13,f=J.inbound_color),"root_color"in J&&t(14,p=J.root_color),"link_function"in J&&t(15,d=J.link_function),"inbound_link_function"in J&&t(16,c=J.inbound_link_function),"root_link_function"in J&&t(17,h=J.root_link_function),"outbound_link_function"in J&&t(18,_=J.outbound_link_function),"show_neighbors_modal"in J&&t(0,m=J.show_neighbors_modal),"neighbor_filter_labels"in J&&t(1,y=J.neighbor_filter_labels),"parent_node"in J&&t(2,F=J.parent_node),"data"in J&&t(3,T=J.data),"$$scope"in J&&t(27,l=J.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&17&&m&&N&&N.showModal(),i.$$.dirty[0]&17&&!m&&N&&N.close(),i.$$.dirty[0]&14&&T&&(t(5,b=!1),T.neighbors["@graph"].find(J=>J["@id"]==F.data.d3f_class),T.neighbors["@graph"].some(J=>J["d3f:outbound"]&&y.some(W=>J["d3f:outbound"].some(x=>x["@id"]==W)))&&(t(5,b=!0),t(6,L=new Al(T.neighbors,{index:!0}))))},t(7,r=[]),[m,y,F,T,N,b,L,r,k,A,B,o,u,f,p,d,c,h,_,a,D,R,w,S,X,j,ne,l]}class ly extends gt{constructor(e){super(),bt(this,e,sy,ay,nt,{empty_message:11,outbound_color:12,inbound_color:13,root_color:14,link_function:15,inbound_link_function:16,root_link_function:17,outbound_link_function:18,show_neighbors_modal:0,neighbor_filter_labels:1,parent_node:2,data:3},null,[-1,-1])}}function Kf(i,e,t){const r=i.slice();return r[26]=e[t],r}function Zf(i,e,t){const r=i.slice();return r[29]=e[t],r}function ec(i,e,t){const r=i.slice();return r[32]=e[t],r}function tc(i,e,t){const r=i.slice();return r[26]=e[t],r}function rc(i,e,t){const r=i.slice();return r[29]=e[t],r}const oy=i=>({}),nc=i=>({});function uy(i){let e;return{c(){e=q("No related sensors in this release.")},l(t){e=M(t,"No related sensors in this release.")},m(t,r){C(t,e,r)},p:Me,i:Me,o:Me,d(t){t&&v(e)}}}function fy(i){let e,t;return e=new An({props:{$$slots:{default:[dy]},$$scope:{ctx:i}}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n[0]&4194750&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function cy(i){let e,t="Loading...";return{c(){e=K("div"),e.textContent=t},l(r){e=Z(r,"DIV",{"data-svelte-h":!0}),Ke(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(r,n){C(r,e,n)},p:Me,i:Me,o:Me,d(r){r&&v(e)}}}function ic(i){let e,t=Ge(i[32]["d3f:outbound"]),r=[];for(let n=0;n<t.length;n+=1)r[n]=lc(tc(i,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=Re()},l(n){for(let s=0;s<r.length;s+=1)r[s].l(n);e=Re()},m(n,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,s);C(n,e,s)},p(n,s){if(s[0]&430){t=Ge(n[32]["d3f:outbound"]);let a;for(a=0;a<t.length;a+=1){const l=tc(n,t,a);r[a]?r[a].p(l,s):(r[a]=lc(l),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},d(n){n&&v(e),Dt(r,n)}}}function ac(i){let e,t=i[32]["@id"]+"",r,n;return{c(){e=q("class "),r=q(t),n=q(" selected_inbound_node;")},l(s){e=M(s,"class "),r=M(s,t),n=M(s," selected_inbound_node;")},m(s,a){C(s,e,a),C(s,r,a),C(s,n,a)},p(s,a){a[0]&160&&t!==(t=s[32]["@id"]+"")&&we(r,t)},d(s){s&&(v(e),v(r),v(n))}}}function sc(i){let e=i[32]["@id"]+"",t,r,n=i[32]["rdfs:label"][0]+"",s,a,l="-->",o,u,f=je(i[26]["@id"])+"",p,d,c=i[29]["@id"]+"",h,_,m=i[7].i(i[29]["@id"])["rdfs:label"][0]+"",y,F,T=i[32]["@id"]+"",N,b,k=i[32]["@id"]+"",A,L,P,B,D=i[8].includes(i[32]["@id"]),R,w=i[29]["@id"]+"",S,X,j=i[29]["@id"]+"",ne,J,W,x,G=i[32]["@id"]+"",le,Q,ae=i[32]["@id"]+"",Ve,ze,De=i[29]["@id"]+"",Pe,ve,he=i[3](i[29])+"",Fe,lt,He=D&&ac(i);return{c(){t=q(e),r=q('["'),s=q(n),a=q('"] '),o=q(l),u=q(" | "),p=q(f),d=q(" | "),h=q(c),_=q('["'),y=q(m),F=q(`"];
                  class `),N=q(T),b=q(" inbound_node; style "),A=q(k),L=q(" fill:"),P=q(i[1]),B=q(`;
                  `),He&&He.c(),R=q(`
                  class `),S=q(w),X=q(" RootArtifactNode; style "),ne=q(j),J=q(" fill:"),W=q(i[2]),x=q(`;
                  click `),le=q(G),Q=q(` href "javascript:da_to_sensor_callback('`),Ve=q(ae),ze=q(`')"; click `),Pe=q(De),ve=q(' href "'),Fe=q(he),lt=q('";')},l(fe){t=M(fe,e),r=M(fe,'["'),s=M(fe,n),a=M(fe,'"] '),o=M(fe,l),u=M(fe," | "),p=M(fe,f),d=M(fe," | "),h=M(fe,c),_=M(fe,'["'),y=M(fe,m),F=M(fe,`"];
                  class `),N=M(fe,T),b=M(fe," inbound_node; style "),A=M(fe,k),L=M(fe," fill:"),P=M(fe,i[1]),B=M(fe,`;
                  `),He&&He.l(fe),R=M(fe,`
                  class `),S=M(fe,w),X=M(fe," RootArtifactNode; style "),ne=M(fe,j),J=M(fe," fill:"),W=M(fe,i[2]),x=M(fe,`;
                  click `),le=M(fe,G),Q=M(fe,` href "javascript:da_to_sensor_callback('`),Ve=M(fe,ae),ze=M(fe,`')"; click `),Pe=M(fe,De),ve=M(fe,' href "'),Fe=M(fe,he),lt=M(fe,'";')},m(fe,Te){C(fe,t,Te),C(fe,r,Te),C(fe,s,Te),C(fe,a,Te),C(fe,o,Te),C(fe,u,Te),C(fe,p,Te),C(fe,d,Te),C(fe,h,Te),C(fe,_,Te),C(fe,y,Te),C(fe,F,Te),C(fe,N,Te),C(fe,b,Te),C(fe,A,Te),C(fe,L,Te),C(fe,P,Te),C(fe,B,Te),He&&He.m(fe,Te),C(fe,R,Te),C(fe,S,Te),C(fe,X,Te),C(fe,ne,Te),C(fe,J,Te),C(fe,W,Te),C(fe,x,Te),C(fe,le,Te),C(fe,Q,Te),C(fe,Ve,Te),C(fe,ze,Te),C(fe,Pe,Te),C(fe,ve,Te),C(fe,Fe,Te),C(fe,lt,Te)},p(fe,Te){Te[0]&160&&e!==(e=fe[32]["@id"]+"")&&we(t,e),Te[0]&160&&n!==(n=fe[32]["rdfs:label"][0]+"")&&we(s,n),Te[0]&160&&f!==(f=je(fe[26]["@id"])+"")&&we(p,f),Te[0]&160&&c!==(c=fe[29]["@id"]+"")&&we(h,c),Te[0]&160&&m!==(m=fe[7].i(fe[29]["@id"])["rdfs:label"][0]+"")&&we(y,m),Te[0]&160&&T!==(T=fe[32]["@id"]+"")&&we(N,T),Te[0]&160&&k!==(k=fe[32]["@id"]+"")&&we(A,k),Te[0]&2&&we(P,fe[1]),Te[0]&416&&(D=fe[8].includes(fe[32]["@id"])),D?He?He.p(fe,Te):(He=ac(fe),He.c(),He.m(R.parentNode,R)):He&&(He.d(1),He=null),Te[0]&160&&w!==(w=fe[29]["@id"]+"")&&we(S,w),Te[0]&160&&j!==(j=fe[29]["@id"]+"")&&we(ne,j),Te[0]&4&&we(W,fe[2]),Te[0]&160&&G!==(G=fe[32]["@id"]+"")&&we(le,G),Te[0]&160&&ae!==(ae=fe[32]["@id"]+"")&&we(Ve,ae),Te[0]&160&&De!==(De=fe[29]["@id"]+"")&&we(Pe,De),Te[0]&168&&he!==(he=fe[3](fe[29])+"")&&we(Fe,he)},d(fe){fe&&(v(t),v(r),v(s),v(a),v(o),v(u),v(p),v(d),v(h),v(_),v(y),v(F),v(N),v(b),v(A),v(L),v(P),v(B),v(R),v(S),v(X),v(ne),v(J),v(W),v(x),v(le),v(Q),v(Ve),v(ze),v(Pe),v(ve),v(Fe),v(lt)),He&&He.d(fe)}}}function lc(i){let e,t=Ge(i[32][i[26]["@id"]]),r=[];for(let n=0;n<t.length;n+=1)r[n]=sc(rc(i,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=Re()},l(n){for(let s=0;s<r.length;s+=1)r[s].l(n);e=Re()},m(n,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,s);C(n,e,s)},p(n,s){if(s[0]&430){t=Ge(n[32][n[26]["@id"]]);let a;for(a=0;a<t.length;a+=1){const l=rc(n,t,a);r[a]?r[a].p(l,s):(r[a]=sc(l),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},d(n){n&&v(e),Dt(r,n)}}}function oc(i){let e,t=i[32]["d3f:outbound"]&&ic(i);return{c(){t&&t.c(),e=Re()},l(r){t&&t.l(r),e=Re()},m(r,n){t&&t.m(r,n),C(r,e,n)},p(r,n){r[32]["d3f:outbound"]?t?t.p(r,n):(t=ic(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(r){r&&v(e),t&&t.d(r)}}}function uc(i){let e,t=Ge(i[7].i(i[5].description["@id"])["d3f:outbound"]),r=[];for(let n=0;n<t.length;n+=1)r[n]=cc(Kf(i,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=Re()},l(n){for(let s=0;s<r.length;s+=1)r[s].l(n);e=Re()},m(n,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,s);C(n,e,s)},p(n,s){if(s[0]&184){t=Ge(n[7].i(n[5].description["@id"])["d3f:outbound"]);let a;for(a=0;a<t.length;a+=1){const l=Kf(n,t,a);r[a]?r[a].p(l,s):(r[a]=cc(l),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},d(n){n&&v(e),Dt(r,n)}}}function fc(i){let e=i[5].description["@id"]+"",t,r,n=i[7].i(i[5].description["@id"])["rdfs:label"][0]+"",s,a,l="-->",o,u,f=je(i[26]["@id"])+"",p,d,c=i[29]["@id"]+"",h,_,m=i[7].graph[i[7].index[i[29]["@id"]]]["rdfs:label"][0]+"",y,F,T=i[5].description["@id"]+"",N,b,k=i[29]["@id"]+"",A,L,P=i[5].description["@id"]+"",B,D,R=i[3](i[5].description["@id"])+"",w,S,X=i[29]["@id"]+"",j,ne,J=i[4](i[29])+"",W,x;return{c(){t=q(e),r=q('["'),s=q(n),a=q('"] '),o=q(l),u=q(" | "),p=q(f),d=q(" | "),h=q(c),_=q('["'),y=q(m),F=q('"]; class '),N=q(T),b=q(" RootArtifactNode; class "),A=q(k),L=q(` ArtifactNode;
                click `),B=q(P),D=q(' href "'),w=q(R),S=q('"; click '),j=q(X),ne=q(' href "'),W=q(J),x=q('";')},l(G){t=M(G,e),r=M(G,'["'),s=M(G,n),a=M(G,'"] '),o=M(G,l),u=M(G," | "),p=M(G,f),d=M(G," | "),h=M(G,c),_=M(G,'["'),y=M(G,m),F=M(G,'"]; class '),N=M(G,T),b=M(G," RootArtifactNode; class "),A=M(G,k),L=M(G,` ArtifactNode;
                click `),B=M(G,P),D=M(G,' href "'),w=M(G,R),S=M(G,'"; click '),j=M(G,X),ne=M(G,' href "'),W=M(G,J),x=M(G,'";')},m(G,le){C(G,t,le),C(G,r,le),C(G,s,le),C(G,a,le),C(G,o,le),C(G,u,le),C(G,p,le),C(G,d,le),C(G,h,le),C(G,_,le),C(G,y,le),C(G,F,le),C(G,N,le),C(G,b,le),C(G,A,le),C(G,L,le),C(G,B,le),C(G,D,le),C(G,w,le),C(G,S,le),C(G,j,le),C(G,ne,le),C(G,W,le),C(G,x,le)},p(G,le){le[0]&32&&e!==(e=G[5].description["@id"]+"")&&we(t,e),le[0]&160&&n!==(n=G[7].i(G[5].description["@id"])["rdfs:label"][0]+"")&&we(s,n),le[0]&160&&f!==(f=je(G[26]["@id"])+"")&&we(p,f),le[0]&160&&c!==(c=G[29]["@id"]+"")&&we(h,c),le[0]&160&&m!==(m=G[7].graph[G[7].index[G[29]["@id"]]]["rdfs:label"][0]+"")&&we(y,m),le[0]&32&&T!==(T=G[5].description["@id"]+"")&&we(N,T),le[0]&160&&k!==(k=G[29]["@id"]+"")&&we(A,k),le[0]&32&&P!==(P=G[5].description["@id"]+"")&&we(B,P),le[0]&40&&R!==(R=G[3](G[5].description["@id"])+"")&&we(w,R),le[0]&160&&X!==(X=G[29]["@id"]+"")&&we(j,X),le[0]&176&&J!==(J=G[4](G[29])+"")&&we(W,J)},d(G){G&&(v(t),v(r),v(s),v(a),v(o),v(u),v(p),v(d),v(h),v(_),v(y),v(F),v(N),v(b),v(A),v(L),v(B),v(D),v(w),v(S),v(j),v(ne),v(W),v(x))}}}function cc(i){let e,t=Ge(i[7].i(i[5].description["@id"])[i[26]["@id"]]),r=[];for(let n=0;n<t.length;n+=1)r[n]=fc(Zf(i,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=Re()},l(n){for(let s=0;s<r.length;s+=1)r[s].l(n);e=Re()},m(n,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,s);C(n,e,s)},p(n,s){if(s[0]&184){t=Ge(n[7].i(n[5].description["@id"])[n[26]["@id"]]);let a;for(a=0;a<t.length;a+=1){const l=Zf(n,t,a);r[a]?r[a].p(l,s):(r[a]=fc(l),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},d(n){n&&v(e),Dt(r,n)}}}function dy(i){let e,t,r=i[7].i(i[5].description["@id"])&&i[7].i(i[5].description["@id"])["d3f:outbound"],n,s=Ge(i[7].graph.filter(i[18])),a=[];for(let o=0;o<s.length;o+=1)a[o]=oc(ec(i,s,o));let l=r&&uc(i);return{c(){e=q(`graph LR;
          `);for(let o=0;o<a.length;o+=1)a[o].c();t=oe(),l&&l.c(),n=Re()},l(o){e=M(o,`graph LR;
          `);for(let u=0;u<a.length;u+=1)a[u].l(o);t=ue(o),l&&l.l(o),n=Re()},m(o,u){C(o,e,u);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(o,u);C(o,t,u),l&&l.m(o,u),C(o,n,u)},p(o,u){if(u[0]&430){s=Ge(o[7].graph.filter(o[18]));let f;for(f=0;f<s.length;f+=1){const p=ec(o,s,f);a[f]?a[f].p(p,u):(a[f]=oc(p),a[f].c(),a[f].m(t.parentNode,t))}for(;f<a.length;f+=1)a[f].d(1);a.length=s.length}u[0]&160&&(r=o[7].i(o[5].description["@id"])&&o[7].i(o[5].description["@id"])["d3f:outbound"]),r?l?l.p(o,u):(l=uc(o),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},d(o){o&&(v(e),v(t),v(n)),Dt(a,o),l&&l.d(o)}}}function hy(i){let e,t,r,n,s,a,l,o,u,f,p,d,c,h=i[8].length+"",_,m,y,F,T;const N=i[16].header,b=Vt(N,i,i[22],nc),k=i[16].default,A=Vt(k,i,i[22],null),L=[cy,fy,uy],P=[];function B(D,R){return D[5]?D[7].graph.length>0?1:2:0}return l=B(i),o=P[l]=L[l](i),{c(){e=K("dialog"),t=K("div"),b&&b.c(),r=q(`
      Select Sensors
      `),A&&A.c(),n=oe(),s=K("hr"),a=oe(),o.c(),u=oe(),f=K("hr"),p=oe(),d=K("button"),c=q("Insert ("),_=q(h),m=q(")"),this.h()},l(D){e=Z(D,"DIALOG",{class:!0});var R=Ce(e);t=Z(R,"DIV",{class:!0});var w=Ce(t);b&&b.l(w),r=M(w,`
      Select Sensors
      `),A&&A.l(w),n=ue(w),s=Z(w,"HR",{}),a=ue(w),o.l(w),u=ue(w),f=Z(w,"HR",{}),p=ue(w),d=Z(w,"BUTTON",{class:!0});var S=Ce(d);c=M(S,"Insert ("),_=M(S,h),m=M(S,")"),S.forEach(v),w.forEach(v),R.forEach(v),this.h()},h(){d.autofocus=!0,re(d,"class","svelte-akhii9"),re(t,"class","svelte-akhii9"),re(e,"class","svelte-akhii9")},m(D,R){C(D,e,R),z(e,t),b&&b.m(t,null),z(t,r),A&&A.m(t,null),z(t,n),z(t,s),z(t,a),P[l].m(t,null),z(t,u),z(t,f),z(t,p),z(t,d),z(d,c),z(d,_),z(d,m),i[19](e),y=!0,d.focus(),F||(T=[ye(d,"click",i[11]),ye(t,"click",Wt(i[17])),ye(e,"close",i[20]),ye(e,"click",kn(i[21]))],F=!0)},p(D,R){b&&b.p&&(!y||R[0]&4194304)&&zt(b,N,D,D[22],y?xt(N,D[22],R,oy):Ht(D[22]),nc),A&&A.p&&(!y||R[0]&4194304)&&zt(A,k,D,D[22],y?xt(k,D[22],R,null):Ht(D[22]),null);let w=l;l=B(D),l===w?P[l].p(D,R):(ut(),ce(P[w],1,1,()=>{P[w]=null}),ft(),o=P[l],o?o.p(D,R):(o=P[l]=L[l](D),o.c()),se(o,1),o.m(t,u)),(!y||R[0]&256)&&h!==(h=D[8].length+"")&&we(_,h)},i(D){y||(se(b,D),se(A,D),se(o),y=!0)},o(D){ce(b,D),ce(A,D),ce(o),y=!1},d(D){D&&v(e),b&&b.d(D),A&&A.d(D),P[l].d(),i[19](null),F=!1,mt(T)}}}function py(i,e,t){let r,n,s,{$$slots:a={},$$scope:l}=e,{outbound_color:o="#fff4dd"}=e,{inbound_color:u="#fff4dd"}=e,{root_color:f="#fff4dd"}=e,{link_function:p=w=>`/dao/artifact/${w["@id"]}`}=e,{inbound_link_function:d=p}=e,{root_link_function:c=w=>`/dao/artifact/${w["@id"]}`}=e,{outbound_link_function:h=p}=e,{show_sensor_modal:_}=e,{parent_node:m}=e,{data:y}=e,F;const T=Qr();tt(i,T,w=>t(24,s=w));const N=$r();tt(i,N,w=>t(23,n=w));let b;function k(w){r.includes(w)?t(8,r=r.filter(S=>S!==w)):r.push(w),t(8,r),t(8,r)}window.da_to_sensor_callback=function(w){k(w)};function A(){let w=0,S=200,X=100;for(const j of r){let ne=y.sensors["@graph"].find(J=>J["@id"]==j);ne&&(Sn(T,N,m,"artifactSelectorNode",ne["rdfs:label"],ne["@id"],m.data.sequence,m.position.x+w*S,m.position.y+X,182,63,ne["d3f:outbound"][0]["@id"].replace("d3f:",""),!1),w+=1)}T.set(s),N.set(n),F&&F.close(),t(8,r=[])}function L(w){Fr.call(this,i,w)}const P=w=>w["@id"]!=y.description["@id"];function B(w){Mt[w?"unshift":"push"](()=>{F=w,t(6,F)})}const D=()=>t(0,_=!1),R=()=>{F.close(),t(8,r=[])};return i.$$set=w=>{"outbound_color"in w&&t(12,o=w.outbound_color),"inbound_color"in w&&t(1,u=w.inbound_color),"root_color"in w&&t(2,f=w.root_color),"link_function"in w&&t(13,p=w.link_function),"inbound_link_function"in w&&t(14,d=w.inbound_link_function),"root_link_function"in w&&t(3,c=w.root_link_function),"outbound_link_function"in w&&t(4,h=w.outbound_link_function),"show_sensor_modal"in w&&t(0,_=w.show_sensor_modal),"parent_node"in w&&t(15,m=w.parent_node),"data"in w&&t(5,y=w.data),"$$scope"in w&&t(22,l=w.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&65&&_&&F&&F.showModal(),i.$$.dirty[0]&65&&!_&&F&&F.close(),i.$$.dirty[0]&32&&y&&y.sensors&&t(7,b=new Al(y.sensors,{index:!0}))},t(8,r=[]),[_,u,f,c,h,y,F,b,r,T,N,A,o,p,d,m,a,L,P,B,D,R,l]}class _y extends gt{constructor(e){super(),bt(this,e,py,hy,nt,{outbound_color:12,inbound_color:1,root_color:2,link_function:13,inbound_link_function:14,root_link_function:3,outbound_link_function:4,show_sensor_modal:0,parent_node:15,data:5},null,[-1,-1])}}function my(i){let e,t="attack the node",r,n,s,a,l,o="defend the node",u,f,p,d,c,h="add weaknesses",_,m,y,F,T,N="add sensors",b,k,A,L,P,B="explode parts",D,R,w="explode control",S,X,j,ne,J,W;function x(he){i[11](he)}let G={parent_node:i[0],data:i[1]};i[7]!==void 0&&(G.show_attack_modal=i[7]),n=new Bw({props:G}),Mt.push(()=>mr(n,"show_attack_modal",x));function le(he){i[13](he)}let Q={parent_node:i[0],data:i[1]};i[6]!==void 0&&(Q.show_defend_modal=i[6]),f=new Xw({props:Q}),Mt.push(()=>mr(f,"show_defend_modal",le));function ae(he){i[15](he)}let Ve={parent_node:i[0],inbound_color:"#f9d999",inbound_link_function:i[9],data:i[1]};i[5]!==void 0&&(Ve.show_weakness_modal=i[5]),m=new Zw({props:Ve}),Mt.push(()=>mr(m,"show_weakness_modal",ae));function ze(he){i[17](he)}let De={parent_node:i[0],inbound_color:"#f9d999",data:i[1]};i[3]!==void 0&&(De.show_sensor_modal=i[3]),k=new _y({props:De}),Mt.push(()=>mr(k,"show_sensor_modal",ze));function Pe(he){i[20](he)}let ve={neighbor_filter_labels:i[2],parent_node:i[0],empty_message:"has no related parts in this release.",inbound_color:"#f9d999",inbound_link_function:i[9],data:i[1]};return i[4]!==void 0&&(ve.show_neighbors_modal=i[4]),X=new ly({props:ve}),Mt.push(()=>mr(X,"show_neighbors_modal",Pe)),{c(){e=K("button"),e.textContent=t,r=oe(),Oe(n.$$.fragment),a=oe(),l=K("button"),l.textContent=o,u=oe(),Oe(f.$$.fragment),d=oe(),c=K("button"),c.textContent=h,_=oe(),Oe(m.$$.fragment),F=oe(),T=K("button"),T.textContent=N,b=oe(),Oe(k.$$.fragment),L=oe(),P=K("button"),P.textContent=B,D=oe(),R=K("button"),R.textContent=w,S=oe(),Oe(X.$$.fragment),this.h()},l(he){e=Z(he,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(e)!=="svelte-1dkmztx"&&(e.textContent=t),r=ue(he),Be(n.$$.fragment,he),a=ue(he),l=Z(he,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(l)!=="svelte-22hxkb"&&(l.textContent=o),u=ue(he),Be(f.$$.fragment,he),d=ue(he),c=Z(he,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(c)!=="svelte-urtcr7"&&(c.textContent=h),_=ue(he),Be(m.$$.fragment,he),F=ue(he),T=Z(he,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(T)!=="svelte-1xhii68"&&(T.textContent=N),b=ue(he),Be(k.$$.fragment,he),L=ue(he),P=Z(he,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(P)!=="svelte-1hluius"&&(P.textContent=B),D=ue(he),R=Z(he,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(R)!=="svelte-183zqvn"&&(R.textContent=w),S=ue(he),Be(X.$$.fragment,he),this.h()},h(){re(e,"class","svelte-5he3i1"),re(l,"class","svelte-5he3i1"),re(c,"class","svelte-5he3i1"),re(T,"class","svelte-5he3i1"),re(P,"class","svelte-5he3i1"),re(R,"class","svelte-5he3i1")},m(he,Fe){C(he,e,Fe),C(he,r,Fe),Le(n,he,Fe),C(he,a,Fe),C(he,l,Fe),C(he,u,Fe),Le(f,he,Fe),C(he,d,Fe),C(he,c,Fe),C(he,_,Fe),Le(m,he,Fe),C(he,F,Fe),C(he,T,Fe),C(he,b,Fe),Le(k,he,Fe),C(he,L,Fe),C(he,P,Fe),C(he,D,Fe),C(he,R,Fe),C(he,S,Fe),Le(X,he,Fe),ne=!0,J||(W=[ye(e,"click",i[10]),ye(l,"click",i[12]),ye(c,"click",i[14]),ye(T,"click",i[16]),ye(P,"click",i[18]),ye(R,"click",i[19])],J=!0)},p(he,[Fe]){const lt={};Fe&1&&(lt.parent_node=he[0]),Fe&2&&(lt.data=he[1]),!s&&Fe&128&&(s=!0,lt.show_attack_modal=he[7],_r(()=>s=!1)),n.$set(lt);const He={};Fe&1&&(He.parent_node=he[0]),Fe&2&&(He.data=he[1]),!p&&Fe&64&&(p=!0,He.show_defend_modal=he[6],_r(()=>p=!1)),f.$set(He);const fe={};Fe&1&&(fe.parent_node=he[0]),Fe&2&&(fe.data=he[1]),!y&&Fe&32&&(y=!0,fe.show_weakness_modal=he[5],_r(()=>y=!1)),m.$set(fe);const Te={};Fe&1&&(Te.parent_node=he[0]),Fe&2&&(Te.data=he[1]),!A&&Fe&8&&(A=!0,Te.show_sensor_modal=he[3],_r(()=>A=!1)),k.$set(Te);const dt={};Fe&4&&(dt.neighbor_filter_labels=he[2]),Fe&1&&(dt.parent_node=he[0]),Fe&2&&(dt.data=he[1]),!j&&Fe&16&&(j=!0,dt.show_neighbors_modal=he[4],_r(()=>j=!1)),X.$set(dt)},i(he){ne||(se(n.$$.fragment,he),se(f.$$.fragment,he),se(m.$$.fragment,he),se(k.$$.fragment,he),se(X.$$.fragment,he),ne=!0)},o(he){ce(n.$$.fragment,he),ce(f.$$.fragment,he),ce(m.$$.fragment,he),ce(k.$$.fragment,he),ce(X.$$.fragment,he),ne=!1},d(he){he&&(v(e),v(r),v(a),v(l),v(u),v(d),v(c),v(_),v(F),v(T),v(b),v(L),v(P),v(D),v(R),v(S)),Ue(n,he),Ue(f,he),Ue(m,he),Ue(k,he),Ue(X,he),J=!1,mt(W)}}}function vy(i,e,t){let r,n,s,a,l;var o=this&&this.__awaiter||function(B,D,R,w){function S(X){return X instanceof R?X:new R(function(j){j(X)})}return new(R||(R=Promise))(function(X,j){function ne(x){try{W(w.next(x))}catch(G){j(G)}}function J(x){try{W(w.throw(x))}catch(G){j(G)}}function W(x){x.done?X(x.value):S(x.value).then(ne,J)}W((w=w.apply(B,D||[])).next())})};let{node:u}=e,f,p=[];function d(B){alert(B),t(7,r=!1),t(6,n=!1),t(5,s=!1),t(4,a=!1),t(3,l=!1)}function c(B){return o(this,void 0,void 0,function*(){if(B.data.d3f_class&&B.data.d3f_class.includes("d3f:")){const D=B.data.d3f_class,R=yield fetch(`/api/dao/artifact/${D}.json`),w=yield R.json();if(R.status!=200||w.description["@graph"].length==0)d(`D3FEND Artifact: "${D.replace("d3f:","")}" not found in ontology`);else return w}else d("Please specify a D3FEND Class for this node to enable inferential mapping")})}function h(B){return hm(B["d3f:cwe-id"][0])}const _=async()=>{t(1,f=null),t(7,r=!0),t(1,f=await c(u))};function m(B){r=B,t(7,r)}const y=async()=>{t(1,f=null),t(6,n=!0),t(1,f=await c(u))};function F(B){n=B,t(6,n)}const T=async()=>{t(1,f=null),t(5,s=!0),t(1,f=await c(u))};function N(B){s=B,t(5,s)}const b=async()=>{t(1,f=null),t(3,l=!0),t(1,f=await c(u))};function k(B){l=B,t(3,l)}const A=async()=>{t(1,f=null),t(4,a=!0),t(2,p=["d3f:contains","d3f:may-contains"]),t(1,f=await c(u))},L=async()=>{t(1,f=null),t(4,a=!0),t(2,p=["d3f:runs","d3f:loads","d3f:manages"]),t(1,f=await c(u))};function P(B){a=B,t(4,a)}return i.$$set=B=>{"node"in B&&t(0,u=B.node)},t(7,r=!1),t(6,n=!1),t(5,s=!1),t(4,a=!1),t(3,l=!1),[u,f,p,l,a,s,n,r,c,h,_,m,y,F,T,N,b,k,A,L,P]}class gy extends gt{constructor(e){super(),bt(this,e,vy,my,nt,{node:0})}}function dc(i,e,t){const r=i.slice();return r[18]=e[t],r[20]=t,r}const by=i=>({}),hc=i=>({});function wy(i){let e;return{c(){e=q("No related defensive techniques in this release.")},l(t){e=M(t,"No related defensive techniques in this release.")},m(t,r){C(t,e,r)},p:Me,i:Me,o:Me,d(t){t&&v(e)}}}function yy(i){let e,t;return e=new An({props:{$$slots:{default:[Ay]},$$scope:{ctx:i}}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n&16406&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function Ey(i){let e,t="Loading...";return{c(){e=K("div"),e.textContent=t},l(r){e=Z(r,"DIV",{"data-svelte-h":!0}),Ke(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(r,n){C(r,e,n)},p:Me,i:Me,o:Me,d(r){r&&v(e)}}}function Dy(i){let e,t=je(i[18].def_artifact.value)+"",r,n;return{c(){e=q("class "),r=q(t),n=q(" ArtifactNode;")},l(s){e=M(s,"class "),r=M(s,t),n=M(s," ArtifactNode;")},m(s,a){C(s,e,a),C(s,r,a),C(s,n,a)},p(s,a){a&4&&t!==(t=je(s[18].def_artifact.value)+"")&&we(r,t)},d(s){s&&(v(e),v(r),v(n))}}}function ky(i){let e,t=je(i[18].def_artifact.value)+"",r,n;return{c(){e=q("class "),r=q(t),n=q(" SelectedArtifactNode;")},l(s){e=M(s,"class "),r=M(s,t),n=M(s," SelectedArtifactNode;")},m(s,a){C(s,e,a),C(s,r,a),C(s,n,a)},p(s,a){a&4&&t!==(t=je(s[18].def_artifact.value)+"")&&we(r,t)},d(s){s&&(v(e),v(r),v(n))}}}function pc(i){let e=i[1].data.d3f_class+"",t,r,n=i[2].description["@graph"][0]["rdfs:label"]+"",s,a,l="-->",o,u,f=i[18].def_artifact_rel_label.value+"",p,d,c=je(i[18].def_artifact.value)+"",h,_,m=i[18].def_artifact_label.value+"",y,F,T=i[1].data.d3f_class+"",N,b,k,A,L=je(i[18].def_artifact.value)+"",P,B,D=je(i[18].def_artifact.value)+"",R,w,S=`
`,X;function j(W,x){return x&20&&(k=null),k==null&&(k=!!W[4].includes(je(W[18].def_artifact.value))),k?ky:Dy}let ne=j(i,-1),J=ne(i);return{c(){t=q(e),r=q('["'),s=q(n),a=q('"] '),o=q(l),u=q(' |"'),p=q(f),d=q('" | '),h=q(c),_=q('["'),y=q(m),F=q(`"];
          class `),N=q(T),b=q(` DefensiveTechniqueNode;
          `),J.c(),A=q(`
          click `),P=q(L),B=q(` href "javascript:def_to_art_callback('`),R=q(D),w=q(`')";`),X=q(S)},l(W){t=M(W,e),r=M(W,'["'),s=M(W,n),a=M(W,'"] '),o=M(W,l),u=M(W,' |"'),p=M(W,f),d=M(W,'" | '),h=M(W,c),_=M(W,'["'),y=M(W,m),F=M(W,`"];
          class `),N=M(W,T),b=M(W,` DefensiveTechniqueNode;
          `),J.l(W),A=M(W,`
          click `),P=M(W,L),B=M(W,` href "javascript:def_to_art_callback('`),R=M(W,D),w=M(W,`')";`),X=M(W,S)},m(W,x){C(W,t,x),C(W,r,x),C(W,s,x),C(W,a,x),C(W,o,x),C(W,u,x),C(W,p,x),C(W,d,x),C(W,h,x),C(W,_,x),C(W,y,x),C(W,F,x),C(W,N,x),C(W,b,x),J.m(W,x),C(W,A,x),C(W,P,x),C(W,B,x),C(W,R,x),C(W,w,x),C(W,X,x)},p(W,x){x&2&&e!==(e=W[1].data.d3f_class+"")&&we(t,e),x&4&&n!==(n=W[2].description["@graph"][0]["rdfs:label"]+"")&&we(s,n),x&4&&f!==(f=W[18].def_artifact_rel_label.value+"")&&we(p,f),x&4&&c!==(c=je(W[18].def_artifact.value)+"")&&we(h,c),x&4&&m!==(m=W[18].def_artifact_label.value+"")&&we(y,m),x&2&&T!==(T=W[1].data.d3f_class+"")&&we(N,T),ne===(ne=j(W,x))&&J?J.p(W,x):(J.d(1),J=ne(W),J&&(J.c(),J.m(A.parentNode,A))),x&4&&L!==(L=je(W[18].def_artifact.value)+"")&&we(P,L),x&4&&D!==(D=je(W[18].def_artifact.value)+"")&&we(R,D)},d(W){W&&(v(t),v(r),v(s),v(a),v(o),v(u),v(p),v(d),v(h),v(_),v(y),v(F),v(N),v(b),v(A),v(P),v(B),v(R),v(w),v(X)),J.d(W)}}}function Ay(i){let e,t,r=Ge(i[2].digital_artifacts.results.bindings),n=[];for(let s=0;s<r.length;s+=1)n[s]=pc(dc(i,r,s));return{c(){e=q(`graph LR
        `);for(let s=0;s<n.length;s+=1)n[s].c();t=Re()},l(s){e=M(s,`graph LR
        `);for(let a=0;a<n.length;a+=1)n[a].l(s);t=Re()},m(s,a){C(s,e,a);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(s,a);C(s,t,a)},p(s,a){if(a&22){r=Ge(s[2].digital_artifacts.results.bindings);let l;for(l=0;l<r.length;l+=1){const o=dc(s,r,l);n[l]?n[l].p(o,a):(n[l]=pc(o),n[l].c(),n[l].m(t.parentNode,t))}for(;l<n.length;l+=1)n[l].d(1);n.length=r.length}},d(s){s&&(v(e),v(t)),Dt(n,s)}}}function Cy(i){let e,t,r,n,s,a,l,o,u,f,p,d,c,h=i[4].length+"",_,m,y,F,T;const N=i[9].header,b=Vt(N,i,i[14],hc),k=i[9].default,A=Vt(k,i,i[14],null),L=[Ey,yy,wy],P=[];function B(D,R){return D[2]?D[2].digital_artifacts.results.bindings.length>0?1:2:0}return l=B(i),o=P[l]=L[l](i),{c(){e=K("dialog"),t=K("div"),b&&b.c(),r=q(`
    Select Related Artifacts To Insert
    `),A&&A.c(),n=oe(),s=K("hr"),a=oe(),o.c(),u=oe(),f=K("hr"),p=oe(),d=K("button"),c=q("Insert ("),_=q(h),m=q(")"),this.h()},l(D){e=Z(D,"DIALOG",{class:!0});var R=Ce(e);t=Z(R,"DIV",{class:!0});var w=Ce(t);b&&b.l(w),r=M(w,`
    Select Related Artifacts To Insert
    `),A&&A.l(w),n=ue(w),s=Z(w,"HR",{}),a=ue(w),o.l(w),u=ue(w),f=Z(w,"HR",{}),p=ue(w),d=Z(w,"BUTTON",{class:!0});var S=Ce(d);c=M(S,"Insert ("),_=M(S,h),m=M(S,")"),S.forEach(v),w.forEach(v),R.forEach(v),this.h()},h(){d.autofocus=!0,re(d,"class","svelte-x0618k"),re(t,"class","svelte-x0618k"),re(e,"class","svelte-x0618k")},m(D,R){C(D,e,R),z(e,t),b&&b.m(t,null),z(t,r),A&&A.m(t,null),z(t,n),z(t,s),z(t,a),P[l].m(t,null),z(t,u),z(t,f),z(t,p),z(t,d),z(d,c),z(d,_),z(d,m),i[11](e),y=!0,d.focus(),F||(T=[ye(d,"click",i[7]),ye(t,"click",Wt(i[10])),ye(e,"close",i[12]),ye(e,"click",kn(i[13]))],F=!0)},p(D,[R]){b&&b.p&&(!y||R&16384)&&zt(b,N,D,D[14],y?xt(N,D[14],R,by):Ht(D[14]),hc),A&&A.p&&(!y||R&16384)&&zt(A,k,D,D[14],y?xt(k,D[14],R,null):Ht(D[14]),null);let w=l;l=B(D),l===w?P[l].p(D,R):(ut(),ce(P[w],1,1,()=>{P[w]=null}),ft(),o=P[l],o?o.p(D,R):(o=P[l]=L[l](D),o.c()),se(o,1),o.m(t,u)),(!y||R&16)&&h!==(h=D[4].length+"")&&we(_,h)},i(D){y||(se(b,D),se(A,D),se(o),y=!0)},o(D){ce(b,D),ce(A,D),ce(o),y=!1},d(D){D&&v(e),b&&b.d(D),A&&A.d(D),P[l].d(),i[11](null),F=!1,mt(T)}}}function Ty(i,e,t){let r,n,s,{$$slots:a={},$$scope:l}=e,{show_artifacts_modal:o}=e,{parent_node:u}=e,{data:f}=e,p;const d=Qr();tt(i,d,b=>t(16,s=b));const c=$r();tt(i,c,b=>t(15,n=b));let h=new jn;function _(b){r.includes(b)?t(4,r=r.filter(k=>k!==b)):r.push(b),t(4,r)}window.def_to_art_callback=function(b){_(b)};function m(){let b=0,k=200,A=100;for(const L of r){let P=f.digital_artifacts.results.bindings.find(B=>je(B.def_artifact.value)==L);P&&(Sn(d,c,u,"artifactSelectorNode",P.def_artifact_label.value,"d3f:"+je(P.def_artifact.value),u.data.sequence,u.position.x+b*k,u.position.y+A,182,82,P.def_artifact_rel_label.value,!0),b+=1)}d.set(s),c.set(n),p&&p.close(),t(4,r=[])}function y(b){Fr.call(this,i,b)}function F(b){Mt[b?"unshift":"push"](()=>{p=b,t(3,p)})}const T=()=>t(0,o=!1),N=()=>{p.close(),t(4,r=[])};return i.$$set=b=>{"show_artifacts_modal"in b&&t(0,o=b.show_artifacts_modal),"parent_node"in b&&t(1,u=b.parent_node),"data"in b&&t(2,f=b.data),"$$scope"in b&&t(14,l=b.$$scope)},i.$$.update=()=>{i.$$.dirty&9&&o&&p&&(p.showModal(),t(8,h=new jn)),i.$$.dirty&265&&!o&&p&&(p.close(),h.reset())},t(4,r=[]),[o,u,f,p,r,d,c,m,h,a,y,F,T,N,l]}class Ny extends gt{constructor(e){super(),bt(this,e,Ty,Cy,nt,{show_artifacts_modal:0,parent_node:1,data:2})}}function _c(i,e,t){const r=i.slice();return r[18]=e[t],r}const Sy=i=>({}),mc=i=>({});function Iy(i){let e;return{c(){e=q("No related offensive techniques in this release.")},l(t){e=M(t,"No related offensive techniques in this release.")},m(t,r){C(t,e,r)},p:Me,i:Me,o:Me,d(t){t&&v(e)}}}function Py(i){let e,t;return e=new An({props:{$$slots:{default:[By]},$$scope:{ctx:i}}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n&16394&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function Ry(i){let e,t="Loading...";return{c(){e=K("div"),e.textContent=t},l(r){e=Z(r,"DIV",{"data-svelte-h":!0}),Ke(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(r,n){C(r,e,n)},p:Me,i:Me,o:Me,d(r){r&&v(e)}}}function vc(i){let e=je(i[18].def_tech.value).replace(/ |\./g,"")+"",t,r,n=i[18].def_tech_label.value+"",s,a,l="-->",o,u,f="May "+i[18].def_tactic_label.value.replace(/ /g,""),p,d,c=i[18].off_tech_id.value.replace(/ |\./g,"")+"",h,_,m=i[18].off_tech_label.value+"",y,F,T,N,b=je(i[18].def_tech.value)+"",k,A,L=i[18].off_tech_id.value.replace(/ |\./g,"")+"",P,B,D=i[18].off_tech_id.value.replace(/ |\./g,"")+"",R,w,S=je(i[18].def_tech.value)+"",X,j,ne=je(i[18].def_tech.value)+"",J,W;function x(Q,ae){return ae&10&&(T=null),T==null&&(T=!!Q[3].includes(Q[18].off_tech_id.value.replace(/ |\./g,""))),T?Oy:Fy}let G=x(i,-1),le=G(i);return{c(){t=q(e),r=q('["'),s=q(n),a=q('"] '),o=q(l),u=q(" | "),p=q(f),d=q("| "),h=q(c),_=q('["'),y=q(m),F=q(`"];
            `),le.c(),N=q(`
            class `),k=q(b),A=q(" CountermeasureNode; click "),P=q(L),B=q(` href "javascript:def_to_off_callback('`),R=q(D),w=q(`')"; click `),X=q(S),j=q(' href "/technique/d3f:'),J=q(ne),W=q('";')},l(Q){t=M(Q,e),r=M(Q,'["'),s=M(Q,n),a=M(Q,'"] '),o=M(Q,l),u=M(Q," | "),p=M(Q,f),d=M(Q,"| "),h=M(Q,c),_=M(Q,'["'),y=M(Q,m),F=M(Q,`"];
            `),le.l(Q),N=M(Q,`
            class `),k=M(Q,b),A=M(Q," CountermeasureNode; click "),P=M(Q,L),B=M(Q,` href "javascript:def_to_off_callback('`),R=M(Q,D),w=M(Q,`')"; click `),X=M(Q,S),j=M(Q,' href "/technique/d3f:'),J=M(Q,ne),W=M(Q,'";')},m(Q,ae){C(Q,t,ae),C(Q,r,ae),C(Q,s,ae),C(Q,a,ae),C(Q,o,ae),C(Q,u,ae),C(Q,p,ae),C(Q,d,ae),C(Q,h,ae),C(Q,_,ae),C(Q,y,ae),C(Q,F,ae),le.m(Q,ae),C(Q,N,ae),C(Q,k,ae),C(Q,A,ae),C(Q,P,ae),C(Q,B,ae),C(Q,R,ae),C(Q,w,ae),C(Q,X,ae),C(Q,j,ae),C(Q,J,ae),C(Q,W,ae)},p(Q,ae){ae&2&&e!==(e=je(Q[18].def_tech.value).replace(/ |\./g,"")+"")&&we(t,e),ae&2&&n!==(n=Q[18].def_tech_label.value+"")&&we(s,n),ae&2&&f!==(f="May "+Q[18].def_tactic_label.value.replace(/ /g,""))&&we(p,f),ae&2&&c!==(c=Q[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(h,c),ae&2&&m!==(m=Q[18].off_tech_label.value+"")&&we(y,m),G===(G=x(Q,ae))&&le?le.p(Q,ae):(le.d(1),le=G(Q),le&&(le.c(),le.m(N.parentNode,N))),ae&2&&b!==(b=je(Q[18].def_tech.value)+"")&&we(k,b),ae&2&&L!==(L=Q[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(P,L),ae&2&&D!==(D=Q[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(R,D),ae&2&&S!==(S=je(Q[18].def_tech.value)+"")&&we(X,S),ae&2&&ne!==(ne=je(Q[18].def_tech.value)+"")&&we(J,ne)},d(Q){Q&&(v(t),v(r),v(s),v(a),v(o),v(u),v(p),v(d),v(h),v(_),v(y),v(F),v(N),v(k),v(A),v(P),v(B),v(R),v(w),v(X),v(j),v(J),v(W)),le.d(Q)}}}function Fy(i){let e,t=i[18].off_tech_id.value.replace(/ |\./g,"")+"",r,n;return{c(){e=q("class "),r=q(t),n=q(" OffensiveTechniqueNode;")},l(s){e=M(s,"class "),r=M(s,t),n=M(s," OffensiveTechniqueNode;")},m(s,a){C(s,e,a),C(s,r,a),C(s,n,a)},p(s,a){a&2&&t!==(t=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(r,t)},d(s){s&&(v(e),v(r),v(n))}}}function Oy(i){let e,t=i[18].off_tech_id.value.replace(/ |\./g,"")+"",r,n;return{c(){e=q("class "),r=q(t),n=q(" SelectedOffensiveTechniqueNode;")},l(s){e=M(s,"class "),r=M(s,t),n=M(s," SelectedOffensiveTechniqueNode;")},m(s,a){C(s,e,a),C(s,r,a),C(s,n,a)},p(s,a){a&2&&t!==(t=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(r,t)},d(s){s&&(v(e),v(r),v(n))}}}function gc(i){let e=i[6].edge_is_unique(i[18].def_tech_label.value,i[18].off_artifact_rel_label.value,i[18].off_artifact_label.value),t,r=e&&vc(i);return{c(){r&&r.c(),t=Re()},l(n){r&&r.l(n),t=Re()},m(n,s){r&&r.m(n,s),C(n,t,s)},p(n,s){s&2&&(e=n[6].edge_is_unique(n[18].def_tech_label.value,n[18].off_artifact_rel_label.value,n[18].off_artifact_label.value)),e?r?r.p(n,s):(r=vc(n),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d(n){n&&v(t),r&&r.d(n)}}}function By(i){let e,t,r=Ge(i[1].def_to_off.results.bindings),n=[];for(let s=0;s<r.length;s+=1)n[s]=gc(_c(i,r,s));return{c(){e=q(`graph LR;
        `);for(let s=0;s<n.length;s+=1)n[s].c();t=Re()},l(s){e=M(s,`graph LR;
        `);for(let a=0;a<n.length;a+=1)n[a].l(s);t=Re()},m(s,a){C(s,e,a);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(s,a);C(s,t,a)},p(s,a){if(a&74){r=Ge(s[1].def_to_off.results.bindings);let l;for(l=0;l<r.length;l+=1){const o=_c(s,r,l);n[l]?n[l].p(o,a):(n[l]=gc(o),n[l].c(),n[l].m(t.parentNode,t))}for(;l<n.length;l+=1)n[l].d(1);n.length=r.length}},d(s){s&&(v(e),v(t)),Dt(n,s)}}}function Ly(i){let e,t,r,n,s,a,l,o,u,f,p,d,c,h=i[3].length+"",_,m,y,F,T;const N=i[9].header,b=Vt(N,i,i[14],mc),k=i[9].default,A=Vt(k,i,i[14],null),L=[Ry,Py,Iy],P=[];function B(D,R){return D[1]?D[1].def_to_off.results.bindings.length>0?1:2:0}return l=B(i),o=P[l]=L[l](i),{c(){e=K("dialog"),t=K("div"),b&&b.c(),r=q(`
    Select Attack Techniques
    `),A&&A.c(),n=oe(),s=K("hr"),a=oe(),o.c(),u=oe(),f=K("hr"),p=oe(),d=K("button"),c=q("Insert ("),_=q(h),m=q(")"),this.h()},l(D){e=Z(D,"DIALOG",{class:!0});var R=Ce(e);t=Z(R,"DIV",{class:!0});var w=Ce(t);b&&b.l(w),r=M(w,`
    Select Attack Techniques
    `),A&&A.l(w),n=ue(w),s=Z(w,"HR",{}),a=ue(w),o.l(w),u=ue(w),f=Z(w,"HR",{}),p=ue(w),d=Z(w,"BUTTON",{class:!0});var S=Ce(d);c=M(S,"Insert ("),_=M(S,h),m=M(S,")"),S.forEach(v),w.forEach(v),R.forEach(v),this.h()},h(){d.autofocus=!0,re(d,"class","svelte-1ai9hff"),re(t,"class","svelte-1ai9hff"),re(e,"class","svelte-1ai9hff")},m(D,R){C(D,e,R),z(e,t),b&&b.m(t,null),z(t,r),A&&A.m(t,null),z(t,n),z(t,s),z(t,a),P[l].m(t,null),z(t,u),z(t,f),z(t,p),z(t,d),z(d,c),z(d,_),z(d,m),i[11](e),y=!0,d.focus(),F||(T=[ye(d,"click",i[7]),ye(t,"click",Wt(i[10])),ye(e,"close",i[12]),ye(e,"click",kn(i[13]))],F=!0)},p(D,[R]){b&&b.p&&(!y||R&16384)&&zt(b,N,D,D[14],y?xt(N,D[14],R,Sy):Ht(D[14]),mc),A&&A.p&&(!y||R&16384)&&zt(A,k,D,D[14],y?xt(k,D[14],R,null):Ht(D[14]),null);let w=l;l=B(D),l===w?P[l].p(D,R):(ut(),ce(P[w],1,1,()=>{P[w]=null}),ft(),o=P[l],o?o.p(D,R):(o=P[l]=L[l](D),o.c()),se(o,1),o.m(t,u)),(!y||R&8)&&h!==(h=D[3].length+"")&&we(_,h)},i(D){y||(se(b,D),se(A,D),se(o),y=!0)},o(D){ce(b,D),ce(A,D),ce(o),y=!1},d(D){D&&v(e),b&&b.d(D),A&&A.d(D),P[l].d(),i[11](null),F=!1,mt(T)}}}function Uy(i,e,t){let r,n,s,{$$slots:a={},$$scope:l}=e,{show_attack_modal:o}=e,{parent_node:u}=e,{data:f}=e,p;const d=Qr();tt(i,d,b=>t(16,s=b));const c=$r();tt(i,c,b=>t(15,n=b));let h=new jn;function _(b){r.includes(b)?t(3,r=r.filter(k=>k!==b)):r.push(b),t(3,r)}window.def_to_off_callback=function(b){_(b)};function m(){let b=0,k=200,A=100;for(const L of r){let P=f.def_to_off.results.bindings.find(B=>B.off_tech_id.value.replace(/ |\./g,"")==L);P&&(Sn(d,c,u,"attackSelectorNode",P.off_tech_label.value,"d3f:"+P.off_tech_id.value,u.data.sequence,u.position.x+b*k,u.position.y+A,182,63,"May "+P.def_tactic_label.value,!0),b+=1)}d.set(s),c.set(n),p&&p.close(),t(3,r=[])}function y(b){Fr.call(this,i,b)}function F(b){Mt[b?"unshift":"push"](()=>{p=b,t(2,p)})}const T=()=>t(0,o=!1),N=()=>{p.close(),t(3,r=[])};return i.$$set=b=>{"show_attack_modal"in b&&t(0,o=b.show_attack_modal),"parent_node"in b&&t(8,u=b.parent_node),"data"in b&&t(1,f=b.data),"$$scope"in b&&t(14,l=b.$$scope)},i.$$.update=()=>{i.$$.dirty&5&&o&&p&&(p.showModal(),h.reset()),i.$$.dirty&5&&!o&&p&&(p.close(),h.reset())},t(3,r=[]),[o,f,p,r,d,c,h,m,u,a,y,F,T,N,l]}class jy extends gt{constructor(e){super(),bt(this,e,Uy,Ly,nt,{show_attack_modal:0,parent_node:8,data:1})}}function qy(i){let e,t="artifacts",r,n,s,a,l,o="offensive techniques",u,f,p,d,c,h="weaknesses (coming soon)",_,m,y;function F(k){i[6](k)}let T={parent_node:i[0],data:i[1]};i[3]!==void 0&&(T.show_artifacts_modal=i[3]),n=new Ny({props:T}),Mt.push(()=>mr(n,"show_artifacts_modal",F));function N(k){i[8](k)}let b={parent_node:i[0],data:i[1]};return i[2]!==void 0&&(b.show_attack_modal=i[2]),f=new jy({props:b}),Mt.push(()=>mr(f,"show_attack_modal",N)),{c(){e=K("button"),e.textContent=t,r=oe(),Oe(n.$$.fragment),a=oe(),l=K("button"),l.textContent=o,u=oe(),Oe(f.$$.fragment),d=oe(),c=K("button"),c.textContent=h,this.h()},l(k){e=Z(k,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(e)!=="svelte-isgkpy"&&(e.textContent=t),r=ue(k),Be(n.$$.fragment,k),a=ue(k),l=Z(k,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(l)!=="svelte-17h5zge"&&(l.textContent=o),u=ue(k),Be(f.$$.fragment,k),d=ue(k),c=Z(k,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(c)!=="svelte-ivhbdc"&&(c.textContent=h),this.h()},h(){re(e,"class","svelte-1x5dcdh"),re(l,"class","svelte-1x5dcdh"),c.disabled=!0,re(c,"class","svelte-1x5dcdh")},m(k,A){C(k,e,A),C(k,r,A),Le(n,k,A),C(k,a,A),C(k,l,A),C(k,u,A),Le(f,k,A),C(k,d,A),C(k,c,A),_=!0,m||(y=[ye(e,"click",i[5]),ye(l,"click",i[7])],m=!0)},p(k,[A]){const L={};A&1&&(L.parent_node=k[0]),A&2&&(L.data=k[1]),!s&&A&8&&(s=!0,L.show_artifacts_modal=k[3],_r(()=>s=!1)),n.$set(L);const P={};A&1&&(P.parent_node=k[0]),A&2&&(P.data=k[1]),!p&&A&4&&(p=!0,P.show_attack_modal=k[2],_r(()=>p=!1)),f.$set(P)},i(k){_||(se(n.$$.fragment,k),se(f.$$.fragment,k),_=!0)},o(k){ce(n.$$.fragment,k),ce(f.$$.fragment,k),_=!1},d(k){k&&(v(e),v(r),v(a),v(l),v(u),v(d),v(c)),Ue(n,k),Ue(f,k),m=!1,mt(y)}}}function My(i,e,t){let r,n;var s=this&&this.__awaiter||function(h,_,m,y){function F(T){return T instanceof m?T:new m(function(N){N(T)})}return new(m||(m=Promise))(function(T,N){function b(L){try{A(y.next(L))}catch(P){N(P)}}function k(L){try{A(y.throw(L))}catch(P){N(P)}}function A(L){L.done?T(L.value):F(L.value).then(b,k)}A((y=y.apply(h,_||[])).next())})};let{node:a}=e,l;function o(h){alert(h),t(3,r=!1),t(2,n=!1)}function u(h){return s(this,void 0,void 0,function*(){if(h.data.d3f_class&&h.data.d3f_class.includes("d3f:")){const _=h.data.d3f_class,m=yield fetch(`/api/technique/${_}.json`),y=yield m.json();if(m.status!=200||y.description["@graph"].length==0)o(`D3FEND Technique: "${_.replace("d3f:","")}" not found in ontology`);else return y}else o("Please specify a D3FEND Class for this node to enable inferential mapping")})}const f=async()=>{t(1,l=null),t(3,r=!0),t(1,l=await u(a))};function p(h){r=h,t(3,r)}const d=async()=>{t(1,l=null),t(2,n=!0),t(1,l=await u(a))};function c(h){n=h,t(2,n)}return i.$$set=h=>{"node"in h&&t(0,a=h.node)},t(3,r=!1),t(2,n=!1),[a,l,n,r,u,f,p,d,c]}class Vy extends gt{constructor(e){super(),bt(this,e,My,qy,nt,{node:0})}}function bc(i,e,t){const r=i.slice();return r[18]=e[t],r}const zy=i=>({}),wc=i=>({});function Hy(i){let e;return{c(){e=q("No related artifacts in this release.")},l(t){e=M(t,"No related artifacts in this release.")},m(t,r){C(t,e,r)},p:Me,i:Me,o:Me,d(t){t&&v(e)}}}function xy(i){let e,t;return e=new An({props:{$$slots:{default:[$y]},$$scope:{ctx:i}}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n&16394&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function Xy(i){let e,t="Loading...";return{c(){e=K("div"),e.textContent=t},l(r){e=Z(r,"DIV",{"data-svelte-h":!0}),Ke(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(r,n){C(r,e,n)},p:Me,i:Me,o:Me,d(r){r&&v(e)}}}function yc(i){let e=i[18].off_tech_id.value.replace(/ |\./g,"")+"",t,r,n=i[18].off_tech_label.value+"",s,a,l="-->",o,u,f=i[18].off_artifact_rel_label.value.replace(/ /g,"")+"",p,d,c=je(i[18].off_artifact.value)+"",h,_,m=i[18].off_artifact_label.value+"",y,F,T=i[18].off_tech_id.value.replace(/ |\./g,"")+"",N,b,k,A,L=je(i[18].off_artifact.value)+"",P,B,D=je(i[18].off_artifact.value)+"",R,w,S=i[18].off_tech_id.value.replace(/ |\./g,"")+"",X,j,ne=Ga(i[18].off_tech_id.value)+"",J,W,x=je(i[18].off_artifact.value)+"",G,le,Q=je(i[18].off_artifact.value)+"",ae,Ve;function ze(ve,he){return he&10&&(k=null),k==null&&(k=!!ve[3].includes(je(ve[18].off_artifact.value))),k?Qy:Gy}let De=ze(i,-1),Pe=De(i);return{c(){t=q(e),r=q('["'),s=q(n),a=q('"] '),o=q(l),u=q(" |"),p=q(f),d=q("| "),h=q(c),_=q('["'),y=q(m),F=q('"]; class '),N=q(T),b=q(` OffensiveTechniqueNode;
            `),Pe.c(),A=q(" ; click "),P=q(L),B=q(' href "/dao/artifact/d3f:'),R=q(D),w=q('"; click '),X=q(S),j=q(' href "'),J=q(ne),W=q('"; click '),G=q(x),le=q(` href "javascript:off_to_art_callback('`),ae=q(Q),Ve=q(`')";`)},l(ve){t=M(ve,e),r=M(ve,'["'),s=M(ve,n),a=M(ve,'"] '),o=M(ve,l),u=M(ve," |"),p=M(ve,f),d=M(ve,"| "),h=M(ve,c),_=M(ve,'["'),y=M(ve,m),F=M(ve,'"]; class '),N=M(ve,T),b=M(ve,` OffensiveTechniqueNode;
            `),Pe.l(ve),A=M(ve," ; click "),P=M(ve,L),B=M(ve,' href "/dao/artifact/d3f:'),R=M(ve,D),w=M(ve,'"; click '),X=M(ve,S),j=M(ve,' href "'),J=M(ve,ne),W=M(ve,'"; click '),G=M(ve,x),le=M(ve,` href "javascript:off_to_art_callback('`),ae=M(ve,Q),Ve=M(ve,`')";`)},m(ve,he){C(ve,t,he),C(ve,r,he),C(ve,s,he),C(ve,a,he),C(ve,o,he),C(ve,u,he),C(ve,p,he),C(ve,d,he),C(ve,h,he),C(ve,_,he),C(ve,y,he),C(ve,F,he),C(ve,N,he),C(ve,b,he),Pe.m(ve,he),C(ve,A,he),C(ve,P,he),C(ve,B,he),C(ve,R,he),C(ve,w,he),C(ve,X,he),C(ve,j,he),C(ve,J,he),C(ve,W,he),C(ve,G,he),C(ve,le,he),C(ve,ae,he),C(ve,Ve,he)},p(ve,he){he&2&&e!==(e=ve[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(t,e),he&2&&n!==(n=ve[18].off_tech_label.value+"")&&we(s,n),he&2&&f!==(f=ve[18].off_artifact_rel_label.value.replace(/ /g,"")+"")&&we(p,f),he&2&&c!==(c=je(ve[18].off_artifact.value)+"")&&we(h,c),he&2&&m!==(m=ve[18].off_artifact_label.value+"")&&we(y,m),he&2&&T!==(T=ve[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(N,T),De===(De=ze(ve,he))&&Pe?Pe.p(ve,he):(Pe.d(1),Pe=De(ve),Pe&&(Pe.c(),Pe.m(A.parentNode,A))),he&2&&L!==(L=je(ve[18].off_artifact.value)+"")&&we(P,L),he&2&&D!==(D=je(ve[18].off_artifact.value)+"")&&we(R,D),he&2&&S!==(S=ve[18].off_tech_id.value.replace(/ |\./g,"")+"")&&we(X,S),he&2&&ne!==(ne=Ga(ve[18].off_tech_id.value)+"")&&we(J,ne),he&2&&x!==(x=je(ve[18].off_artifact.value)+"")&&we(G,x),he&2&&Q!==(Q=je(ve[18].off_artifact.value)+"")&&we(ae,Q)},d(ve){ve&&(v(t),v(r),v(s),v(a),v(o),v(u),v(p),v(d),v(h),v(_),v(y),v(F),v(N),v(b),v(A),v(P),v(B),v(R),v(w),v(X),v(j),v(J),v(W),v(G),v(le),v(ae),v(Ve)),Pe.d(ve)}}}function Gy(i){let e,t=je(i[18].off_artifact.value)+"",r,n;return{c(){e=q("class "),r=q(t),n=q(" ArtifactNode;")},l(s){e=M(s,"class "),r=M(s,t),n=M(s," ArtifactNode;")},m(s,a){C(s,e,a),C(s,r,a),C(s,n,a)},p(s,a){a&2&&t!==(t=je(s[18].off_artifact.value)+"")&&we(r,t)},d(s){s&&(v(e),v(r),v(n))}}}function Qy(i){let e,t=je(i[18].off_artifact.value)+"",r,n;return{c(){e=q("class "),r=q(t),n=q(" SelectedArtifactNode;")},l(s){e=M(s,"class "),r=M(s,t),n=M(s," SelectedArtifactNode;")},m(s,a){C(s,e,a),C(s,r,a),C(s,n,a)},p(s,a){a&2&&t!==(t=je(s[18].off_artifact.value)+"")&&we(r,t)},d(s){s&&(v(e),v(r),v(n))}}}function Ec(i){let e=i[6].edge_is_unique(i[18].off_tech_label.value,i[18].off_artifact_rel_label.value,i[18].off_artifact_label.value),t,r=e&&yc(i);return{c(){r&&r.c(),t=Re()},l(n){r&&r.l(n),t=Re()},m(n,s){r&&r.m(n,s),C(n,t,s)},p(n,s){s&2&&(e=n[6].edge_is_unique(n[18].off_tech_label.value,n[18].off_artifact_rel_label.value,n[18].off_artifact_label.value)),e?r?r.p(n,s):(r=yc(n),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d(n){n&&v(t),r&&r.d(n)}}}function $y(i){let e,t,r=Ge(i[1].off_to_def.results.bindings),n=[];for(let s=0;s<r.length;s+=1)n[s]=Ec(bc(i,r,s));return{c(){e=q(`graph LR;
        `);for(let s=0;s<n.length;s+=1)n[s].c();t=Re()},l(s){e=M(s,`graph LR;
        `);for(let a=0;a<n.length;a+=1)n[a].l(s);t=Re()},m(s,a){C(s,e,a);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(s,a);C(s,t,a)},p(s,a){if(a&74){r=Ge(s[1].off_to_def.results.bindings);let l;for(l=0;l<r.length;l+=1){const o=bc(s,r,l);n[l]?n[l].p(o,a):(n[l]=Ec(o),n[l].c(),n[l].m(t.parentNode,t))}for(;l<n.length;l+=1)n[l].d(1);n.length=r.length}},d(s){s&&(v(e),v(t)),Dt(n,s)}}}function Wy(i){let e,t,r,n,s,a,l,o,u,f,p,d,c,h=i[3].length+"",_,m,y,F,T;const N=i[9].header,b=Vt(N,i,i[14],wc),k=i[9].default,A=Vt(k,i,i[14],null),L=[Xy,xy,Hy],P=[];function B(D,R){return D[1]?D[1].off_to_def.results.bindings.length>0?1:2:0}return l=B(i),o=P[l]=L[l](i),{c(){e=K("dialog"),t=K("div"),b&&b.c(),r=q(`
    Select Related Artifacts To Insert
    `),A&&A.c(),n=oe(),s=K("hr"),a=oe(),o.c(),u=oe(),f=K("hr"),p=oe(),d=K("button"),c=q("Insert ("),_=q(h),m=q(")"),this.h()},l(D){e=Z(D,"DIALOG",{class:!0});var R=Ce(e);t=Z(R,"DIV",{class:!0});var w=Ce(t);b&&b.l(w),r=M(w,`
    Select Related Artifacts To Insert
    `),A&&A.l(w),n=ue(w),s=Z(w,"HR",{}),a=ue(w),o.l(w),u=ue(w),f=Z(w,"HR",{}),p=ue(w),d=Z(w,"BUTTON",{class:!0});var S=Ce(d);c=M(S,"Insert ("),_=M(S,h),m=M(S,")"),S.forEach(v),w.forEach(v),R.forEach(v),this.h()},h(){d.autofocus=!0,re(d,"class","svelte-x0618k"),re(t,"class","svelte-x0618k"),re(e,"class","svelte-x0618k")},m(D,R){C(D,e,R),z(e,t),b&&b.m(t,null),z(t,r),A&&A.m(t,null),z(t,n),z(t,s),z(t,a),P[l].m(t,null),z(t,u),z(t,f),z(t,p),z(t,d),z(d,c),z(d,_),z(d,m),i[11](e),y=!0,d.focus(),F||(T=[ye(d,"click",i[7]),ye(t,"click",Wt(i[10])),ye(e,"close",i[12]),ye(e,"click",kn(i[13]))],F=!0)},p(D,[R]){b&&b.p&&(!y||R&16384)&&zt(b,N,D,D[14],y?xt(N,D[14],R,zy):Ht(D[14]),wc),A&&A.p&&(!y||R&16384)&&zt(A,k,D,D[14],y?xt(k,D[14],R,null):Ht(D[14]),null);let w=l;l=B(D),l===w?P[l].p(D,R):(ut(),ce(P[w],1,1,()=>{P[w]=null}),ft(),o=P[l],o?o.p(D,R):(o=P[l]=L[l](D),o.c()),se(o,1),o.m(t,u)),(!y||R&8)&&h!==(h=D[3].length+"")&&we(_,h)},i(D){y||(se(b,D),se(A,D),se(o),y=!0)},o(D){ce(b,D),ce(A,D),ce(o),y=!1},d(D){D&&v(e),b&&b.d(D),A&&A.d(D),P[l].d(),i[11](null),F=!1,mt(T)}}}function Yy(i,e,t){let r,n,s,{$$slots:a={},$$scope:l}=e,{show_artifacts_modal:o}=e,{parent_node:u}=e,{data:f}=e,p;const d=Qr();tt(i,d,b=>t(16,s=b));const c=$r();tt(i,c,b=>t(15,n=b));let h=new jn;function _(b){r.includes(b)?t(3,r=r.filter(k=>k!==b)):r.push(b),t(3,r)}window.off_to_art_callback=function(b){_(b)};function m(){let b=0,k=200,A=100;for(const L of r){let P=f.off_to_def.results.bindings.find(B=>je(B.off_artifact.value)==L);P&&(Sn(d,c,u,"artifactSelectorNode",P.off_artifact_label.value,"d3f:"+je(P.off_artifact.value),u.data.sequence,u.position.x+b*k,u.position.y+A,182,63,P.off_artifact_rel_label.value,!0),b+=1)}d.set(s),c.set(n),p&&p.close(),t(3,r=[])}function y(b){Fr.call(this,i,b)}function F(b){Mt[b?"unshift":"push"](()=>{p=b,t(2,p)})}const T=()=>t(0,o=!1),N=()=>{p.close(),t(3,r=[])};return i.$$set=b=>{"show_artifacts_modal"in b&&t(0,o=b.show_artifacts_modal),"parent_node"in b&&t(8,u=b.parent_node),"data"in b&&t(1,f=b.data),"$$scope"in b&&t(14,l=b.$$scope)},i.$$.update=()=>{i.$$.dirty&5&&o&&p&&(p.showModal(),h.reset()),i.$$.dirty&5&&!o&&p&&(p.close(),h.reset())},t(3,r=[]),[o,f,p,r,d,c,h,m,u,a,y,F,T,N,l]}class Jy extends gt{constructor(e){super(),bt(this,e,Yy,Wy,nt,{show_artifacts_modal:0,parent_node:8,data:1})}}function Dc(i,e,t){const r=i.slice();return r[23]=e[t],r}const Ky=i=>({}),kc=i=>({});function Zy(i){let e;return{c(){e=q("No related artifacts in this release.")},l(t){e=M(t,"No related artifacts in this release.")},m(t,r){C(t,e,r)},p:Me,i:Me,o:Me,d(t){t&&v(e)}}}function e3(i){let e,t,r,n,s,a,l,o,u,f;function p(c){i[14](c)}let d={toggles:i[4]};return i[3]!==void 0&&(d.selected=i[3]),t=new kh({props:d}),Mt.push(()=>mr(t,"selected",p)),u=new An({props:{$$slots:{default:[i3]},$$scope:{ctx:i}}}),{c(){e=K("div"),Oe(t.$$.fragment),n=oe(),s=K("br"),a=oe(),l=K("br"),o=oe(),Oe(u.$$.fragment),this.h()},l(c){e=Z(c,"DIV",{class:!0});var h=Ce(e);Be(t.$$.fragment,h),h.forEach(v),n=ue(c),s=Z(c,"BR",{}),a=ue(c),l=Z(c,"BR",{}),o=ue(c),Be(u.$$.fragment,c),this.h()},h(){re(e,"class","center shrink")},m(c,h){C(c,e,h),Le(t,e,null),C(c,n,h),C(c,s,h),C(c,a,h),C(c,l,h),C(c,o,h),Le(u,c,h),f=!0},p(c,h){const _={};h&16&&(_.toggles=c[4]),!r&&h&8&&(r=!0,_.selected=c[3],_r(()=>r=!1)),t.$set(_);const m={};h&262186&&(m.$$scope={dirty:h,ctx:c}),u.$set(m)},i(c){f||(se(t.$$.fragment,c),se(u.$$.fragment,c),f=!0)},o(c){ce(t.$$.fragment,c),ce(u.$$.fragment,c),f=!1},d(c){c&&(v(e),v(n),v(s),v(a),v(l),v(o)),Ue(t),Ue(u,c)}}}function t3(i){let e,t="Loading...";return{c(){e=K("div"),e.textContent=t},l(r){e=Z(r,"DIV",{"data-svelte-h":!0}),Ke(e)!=="svelte-194gxkm"&&(e.textContent=t)},m(r,n){C(r,e,n)},p:Me,i:Me,o:Me,d(r){r&&v(e)}}}function Ac(i){let e=i[8].edge_is_unique(i[23].def_tech_label.value,i[23].def_artifact_rel_label.value,i[23].off_artifact_label.value),t,r=e&&Cc(i);return{c(){r&&r.c(),t=Re()},l(n){r&&r.l(n),t=Re()},m(n,s){r&&r.m(n,s),C(n,t,s)},p(n,s){s&2&&(e=n[8].edge_is_unique(n[23].def_tech_label.value,n[23].def_artifact_rel_label.value,n[23].off_artifact_label.value)),e?r?r.p(n,s):(r=Cc(n),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d(n){n&&v(t),r&&r.d(n)}}}function Cc(i){let e=!i[3].includes(i[23].def_tactic_label.value),t,r=e&&Tc(i);return{c(){r&&r.c(),t=Re()},l(n){r&&r.l(n),t=Re()},m(n,s){r&&r.m(n,s),C(n,t,s)},p(n,s){s&10&&(e=!n[3].includes(n[23].def_tactic_label.value)),e?r?r.p(n,s):(r=Tc(n),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d(n){n&&v(t),r&&r.d(n)}}}function Tc(i){let e=je(i[23].def_tech.value)+"",t,r,n=i[23].def_tech_label.value+"",s,a,l="-->",o,u,f=i[23].def_artifact_rel_label.value.replace(/ /g,"")+"",p,d,c=je(i[23].off_artifact.value)+"",h,_,m=i[23].off_artifact_label.value+"",y,F,T=i[8].edge_is_unique(i[23].def_tech.value,i[23].def_tactic_label.value,i[23].off_tech_id.value),N,b,k,A=i[23].off_artifact_label.value.replace(/ /g,"")+"",L,P,B=je(i[23].def_tech.value)+"",D,R,w=i[23].def_tech_label.value.replace(/ |\./g,"")+"",S,X,j=T&&Nc(i);function ne(x,G){return G&34&&(b=null),b==null&&(b=!!x[5].includes(je(x[23].def_tech.value))),b?n3:r3}let J=ne(i,-1),W=J(i);return{c(){t=q(e),r=q('["'),s=q(n),a=q('"] '),o=q(l),u=q(`
                | `),p=q(f),d=q(" | "),h=q(c),_=q('["'),y=q(m),F=q(`"];

                `),j&&j.c(),N=oe(),W.c(),k=q(` 
                class `),L=q(A),P=q(` ArtifactNode;
                click `),D=q(B),R=q(` href "javascript:off_to_def_callback('`),S=q(w),X=q(`')";`)},l(x){t=M(x,e),r=M(x,'["'),s=M(x,n),a=M(x,'"] '),o=M(x,l),u=M(x,`
                | `),p=M(x,f),d=M(x," | "),h=M(x,c),_=M(x,'["'),y=M(x,m),F=M(x,`"];

                `),j&&j.l(x),N=ue(x),W.l(x),k=M(x,` 
                class `),L=M(x,A),P=M(x,` ArtifactNode;
                click `),D=M(x,B),R=M(x,` href "javascript:off_to_def_callback('`),S=M(x,w),X=M(x,`')";`)},m(x,G){C(x,t,G),C(x,r,G),C(x,s,G),C(x,a,G),C(x,o,G),C(x,u,G),C(x,p,G),C(x,d,G),C(x,h,G),C(x,_,G),C(x,y,G),C(x,F,G),j&&j.m(x,G),C(x,N,G),W.m(x,G),C(x,k,G),C(x,L,G),C(x,P,G),C(x,D,G),C(x,R,G),C(x,S,G),C(x,X,G)},p(x,G){G&2&&e!==(e=je(x[23].def_tech.value)+"")&&we(t,e),G&2&&n!==(n=x[23].def_tech_label.value+"")&&we(s,n),G&2&&f!==(f=x[23].def_artifact_rel_label.value.replace(/ /g,"")+"")&&we(p,f),G&2&&c!==(c=je(x[23].off_artifact.value)+"")&&we(h,c),G&2&&m!==(m=x[23].off_artifact_label.value+"")&&we(y,m),G&2&&(T=x[8].edge_is_unique(x[23].def_tech.value,x[23].def_tactic_label.value,x[23].off_tech_id.value)),T?j?j.p(x,G):(j=Nc(x),j.c(),j.m(N.parentNode,N)):j&&(j.d(1),j=null),J===(J=ne(x,G))&&W?W.p(x,G):(W.d(1),W=J(x),W&&(W.c(),W.m(k.parentNode,k))),G&2&&A!==(A=x[23].off_artifact_label.value.replace(/ /g,"")+"")&&we(L,A),G&2&&B!==(B=je(x[23].def_tech.value)+"")&&we(D,B),G&2&&w!==(w=x[23].def_tech_label.value.replace(/ |\./g,"")+"")&&we(S,w)},d(x){x&&(v(t),v(r),v(s),v(a),v(o),v(u),v(p),v(d),v(h),v(_),v(y),v(F),v(N),v(k),v(L),v(P),v(D),v(R),v(S),v(X)),j&&j.d(x),W.d(x)}}}function Nc(i){let e=je(i[23].def_tech.value)+"",t,r,n=i[23].def_tech_label.value+"",s,a,l="-.->",o,u,f="May "+i[23].def_tactic_label.value,p,d,c=i[23].off_tech_id.value.replace(/ |\./g,"")+"",h,_,m=i[23].off_tech_label.value+"",y,F;return{c(){t=q(e),r=q('["'),s=q(n),a=q('"] '),o=q(l),u=q(`
                  | `),p=q(f),d=q(" | "),h=q(c),_=q('["'),y=q(m),F=q('"] ;')},l(T){t=M(T,e),r=M(T,'["'),s=M(T,n),a=M(T,'"] '),o=M(T,l),u=M(T,`
                  | `),p=M(T,f),d=M(T," | "),h=M(T,c),_=M(T,'["'),y=M(T,m),F=M(T,'"] ;')},m(T,N){C(T,t,N),C(T,r,N),C(T,s,N),C(T,a,N),C(T,o,N),C(T,u,N),C(T,p,N),C(T,d,N),C(T,h,N),C(T,_,N),C(T,y,N),C(T,F,N)},p(T,N){N&2&&e!==(e=je(T[23].def_tech.value)+"")&&we(t,e),N&2&&n!==(n=T[23].def_tech_label.value+"")&&we(s,n),N&2&&f!==(f="May "+T[23].def_tactic_label.value)&&we(p,f),N&2&&c!==(c=T[23].off_tech_id.value.replace(/ |\./g,"")+"")&&we(h,c),N&2&&m!==(m=T[23].off_tech_label.value+"")&&we(y,m)},d(T){T&&(v(t),v(r),v(s),v(a),v(o),v(u),v(p),v(d),v(h),v(_),v(y),v(F))}}}function r3(i){let e,t=je(i[23].def_tech.value)+"",r,n;return{c(){e=q("class "),r=q(t),n=q(" DefensiveTechniqueNode;")},l(s){e=M(s,"class "),r=M(s,t),n=M(s," DefensiveTechniqueNode;")},m(s,a){C(s,e,a),C(s,r,a),C(s,n,a)},p(s,a){a&2&&t!==(t=je(s[23].def_tech.value)+"")&&we(r,t)},d(s){s&&(v(e),v(r),v(n))}}}function n3(i){let e,t=je(i[23].def_tech.value)+"",r,n;return{c(){e=q("class "),r=q(t),n=q(" SelectedDefensiveTechniqueNode;")},l(s){e=M(s,"class "),r=M(s,t),n=M(s," SelectedDefensiveTechniqueNode;")},m(s,a){C(s,e,a),C(s,r,a),C(s,n,a)},p(s,a){a&2&&t!==(t=je(s[23].def_tech.value)+"")&&we(r,t)},d(s){s&&(v(e),v(r),v(n))}}}function Sc(i){let e=i[23].off_tech_id.value.replace(/ |\./g,"")+"",t,r,n=i[23].off_tech_label.value+"",s,a,l="-->",o,u,f=i[23].off_artifact_rel_label.value.replace(/ /g,"")+"",p,d,c=je(i[23].off_artifact.value)+"",h,_,m=i[23].off_artifact_label.value+"",y,F,T=i[23].off_tech_id.value.replace(/ |\./g,"")+"",N,b,k=je(i[23].off_artifact.value)+"",A,L,P=je(i[23].off_artifact.value)+"",B,D,R=je(i[23].off_artifact.value)+"",w,S,X=i[23].off_tech_id.value.replace(/ |\./g,"")+"",j,ne,J=Ga(i[23].off_tech_id.value)+"",W,x,G=je(i[23].off_artifact.value)+"",le,Q,ae=je(i[23].off_artifact.value)+"",Ve,ze;return{c(){t=q(e),r=q('["'),s=q(n),a=q('"] '),o=q(l),u=q(" |"),p=q(f),d=q("| "),h=q(c),_=q('["'),y=q(m),F=q('"]; class '),N=q(T),b=q(` OffensiveTechniqueNode;
            class `),A=q(k),L=q(" ArtifactNode; click "),B=q(P),D=q(' href "/dao/artifact/d3f:'),w=q(R),S=q(`";
            click `),j=q(X),ne=q(' href "'),W=q(J),x=q('"; click '),le=q(G),Q=q(' href "/dao/artifact/d3f:'),Ve=q(ae),ze=q('";')},l(De){t=M(De,e),r=M(De,'["'),s=M(De,n),a=M(De,'"] '),o=M(De,l),u=M(De," |"),p=M(De,f),d=M(De,"| "),h=M(De,c),_=M(De,'["'),y=M(De,m),F=M(De,'"]; class '),N=M(De,T),b=M(De,` OffensiveTechniqueNode;
            class `),A=M(De,k),L=M(De," ArtifactNode; click "),B=M(De,P),D=M(De,' href "/dao/artifact/d3f:'),w=M(De,R),S=M(De,`";
            click `),j=M(De,X),ne=M(De,' href "'),W=M(De,J),x=M(De,'"; click '),le=M(De,G),Q=M(De,' href "/dao/artifact/d3f:'),Ve=M(De,ae),ze=M(De,'";')},m(De,Pe){C(De,t,Pe),C(De,r,Pe),C(De,s,Pe),C(De,a,Pe),C(De,o,Pe),C(De,u,Pe),C(De,p,Pe),C(De,d,Pe),C(De,h,Pe),C(De,_,Pe),C(De,y,Pe),C(De,F,Pe),C(De,N,Pe),C(De,b,Pe),C(De,A,Pe),C(De,L,Pe),C(De,B,Pe),C(De,D,Pe),C(De,w,Pe),C(De,S,Pe),C(De,j,Pe),C(De,ne,Pe),C(De,W,Pe),C(De,x,Pe),C(De,le,Pe),C(De,Q,Pe),C(De,Ve,Pe),C(De,ze,Pe)},p(De,Pe){Pe&2&&e!==(e=De[23].off_tech_id.value.replace(/ |\./g,"")+"")&&we(t,e),Pe&2&&n!==(n=De[23].off_tech_label.value+"")&&we(s,n),Pe&2&&f!==(f=De[23].off_artifact_rel_label.value.replace(/ /g,"")+"")&&we(p,f),Pe&2&&c!==(c=je(De[23].off_artifact.value)+"")&&we(h,c),Pe&2&&m!==(m=De[23].off_artifact_label.value+"")&&we(y,m),Pe&2&&T!==(T=De[23].off_tech_id.value.replace(/ |\./g,"")+"")&&we(N,T),Pe&2&&k!==(k=je(De[23].off_artifact.value)+"")&&we(A,k),Pe&2&&P!==(P=je(De[23].off_artifact.value)+"")&&we(B,P),Pe&2&&R!==(R=je(De[23].off_artifact.value)+"")&&we(w,R),Pe&2&&X!==(X=De[23].off_tech_id.value.replace(/ |\./g,"")+"")&&we(j,X),Pe&2&&J!==(J=Ga(De[23].off_tech_id.value)+"")&&we(W,J),Pe&2&&G!==(G=je(De[23].off_artifact.value)+"")&&we(le,G),Pe&2&&ae!==(ae=je(De[23].off_artifact.value)+"")&&we(Ve,ae)},d(De){De&&(v(t),v(r),v(s),v(a),v(o),v(u),v(p),v(d),v(h),v(_),v(y),v(F),v(N),v(b),v(A),v(L),v(B),v(D),v(w),v(S),v(j),v(ne),v(W),v(x),v(le),v(Q),v(Ve),v(ze))}}}function Ic(i){let e,t=i[8].edge_is_unique(i[23].off_tech_label.value,i[23].off_artifact_rel_label.value,i[23].off_artifact_label.value),r,n="def_tech"in i[23]&&Ac(i),s=t&&Sc(i);return{c(){n&&n.c(),e=oe(),s&&s.c(),r=Re()},l(a){n&&n.l(a),e=ue(a),s&&s.l(a),r=Re()},m(a,l){n&&n.m(a,l),C(a,e,l),s&&s.m(a,l),C(a,r,l)},p(a,l){"def_tech"in a[23]?n?n.p(a,l):(n=Ac(a),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),l&2&&(t=a[8].edge_is_unique(a[23].off_tech_label.value,a[23].off_artifact_rel_label.value,a[23].off_artifact_label.value)),t?s?s.p(a,l):(s=Sc(a),s.c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null)},d(a){a&&(v(e),v(r)),n&&n.d(a),s&&s.d(a)}}}function i3(i){let e,t,r=Ge(i[1].off_to_def.results.bindings),n=[];for(let s=0;s<r.length;s+=1)n[s]=Ic(Dc(i,r,s));return{c(){e=q(`graph LR;
        `);for(let s=0;s<n.length;s+=1)n[s].c();t=Re()},l(s){e=M(s,`graph LR;
        `);for(let a=0;a<n.length;a+=1)n[a].l(s);t=Re()},m(s,a){C(s,e,a);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(s,a);C(s,t,a)},p(s,a){if(a&298){r=Ge(s[1].off_to_def.results.bindings);let l;for(l=0;l<r.length;l+=1){const o=Dc(s,r,l);n[l]?n[l].p(o,a):(n[l]=Ic(o),n[l].c(),n[l].m(t.parentNode,t))}for(;l<n.length;l+=1)n[l].d(1);n.length=r.length}},d(s){s&&(v(e),v(t)),Dt(n,s)}}}function a3(i){let e,t,r,n,s,a,l,o,u,f,p,d,c,h=i[5].length+"",_,m,y,F,T;const N=i[12].header,b=Vt(N,i,i[18],kc),k=i[12].default,A=Vt(k,i,i[18],null),L=[t3,e3,Zy],P=[];function B(D,R){return D[1]?D[1].off_to_def.results.bindings.length>0?1:2:0}return l=B(i),o=P[l]=L[l](i),{c(){e=K("dialog"),t=K("div"),b&&b.c(),r=q(`
    Select Related Artifacts To Insert
    `),A&&A.c(),n=oe(),s=K("hr"),a=oe(),o.c(),u=oe(),f=K("hr"),p=oe(),d=K("button"),c=q("Insert ("),_=q(h),m=q(")"),this.h()},l(D){e=Z(D,"DIALOG",{class:!0});var R=Ce(e);t=Z(R,"DIV",{class:!0});var w=Ce(t);b&&b.l(w),r=M(w,`
    Select Related Artifacts To Insert
    `),A&&A.l(w),n=ue(w),s=Z(w,"HR",{}),a=ue(w),o.l(w),u=ue(w),f=Z(w,"HR",{}),p=ue(w),d=Z(w,"BUTTON",{class:!0});var S=Ce(d);c=M(S,"Insert ("),_=M(S,h),m=M(S,")"),S.forEach(v),w.forEach(v),R.forEach(v),this.h()},h(){d.autofocus=!0,re(d,"class","svelte-x0618k"),re(t,"class","svelte-x0618k"),re(e,"class","svelte-x0618k")},m(D,R){C(D,e,R),z(e,t),b&&b.m(t,null),z(t,r),A&&A.m(t,null),z(t,n),z(t,s),z(t,a),P[l].m(t,null),z(t,u),z(t,f),z(t,p),z(t,d),z(d,c),z(d,_),z(d,m),i[15](e),y=!0,d.focus(),F||(T=[ye(d,"click",i[9]),ye(t,"click",Wt(i[13])),ye(e,"close",i[16]),ye(e,"click",kn(i[17]))],F=!0)},p(D,[R]){b&&b.p&&(!y||R&262144)&&zt(b,N,D,D[18],y?xt(N,D[18],R,Ky):Ht(D[18]),kc),A&&A.p&&(!y||R&262144)&&zt(A,k,D,D[18],y?xt(k,D[18],R,null):Ht(D[18]),null);let w=l;l=B(D),l===w?P[l].p(D,R):(ut(),ce(P[w],1,1,()=>{P[w]=null}),ft(),o=P[l],o?o.p(D,R):(o=P[l]=L[l](D),o.c()),se(o,1),o.m(t,u)),(!y||R&32)&&h!==(h=D[5].length+"")&&we(_,h)},i(D){y||(se(b,D),se(A,D),se(o),y=!0)},o(D){ce(b,D),ce(A,D),ce(o),y=!1},d(D){D&&v(e),b&&b.d(D),A&&A.d(D),P[l].d(),i[15](null),F=!1,mt(T)}}}function s3(i,e,t){let r,n,s,{$$slots:a={},$$scope:l}=e,{show_defend_modal:o}=e,{parent_node:u}=e,{data:f}=e,p;const d=Qr();tt(i,d,B=>t(20,s=B));const c=$r();tt(i,c,B=>t(19,n=B));let h=new jn;function _(B){r.includes(B)?t(5,r=r.filter(D=>D!==B)):r.push(B),t(5,r)}window.off_to_def_callback=function(B){_(B)};function m(){let B=0,D=200,R=100;for(const w of r){let S=f.off_to_def.results.bindings.find(X=>"def_tech"in X&&je(X.def_tech.value)==w);S&&(Sn(d,c,u,"countermeasureSelectorNode",S.def_tech_label.value,"d3f:"+je(S.def_tech.value),u.data.sequence,u.position.x+B*D,u.position.y+R,182,63,"May "+S.def_tactic_label.value,!1),B+=1)}d.set(s),c.set(n),p&&p.close(),t(5,r=[])}let y=new Set,F=[],T=[];Eh(F,T)&&(T=[]);function N(B){for(const D of r){let R=f.off_to_def.results.bindings.find(w=>"def_tech"in w&&je(w.def_tech.value)==D);B.includes(R.def_tactic_label.value)&&t(5,r=r.filter(w=>w!==D))}t(5,r)}function b(B){Fr.call(this,i,B)}function k(B){T=B,t(3,T)}function A(B){Mt[B?"unshift":"push"](()=>{p=B,t(2,p)})}const L=()=>t(0,o=!1),P=()=>{p.close(),t(5,r=[])};return i.$$set=B=>{"show_defend_modal"in B&&t(0,o=B.show_defend_modal),"parent_node"in B&&t(10,u=B.parent_node),"data"in B&&t(1,f=B.data),"$$scope"in B&&t(18,l=B.$$scope)},i.$$.update=()=>{i.$$.dirty&5&&o&&p&&(p.showModal(),h.reset()),i.$$.dirty&5&&!o&&p&&(p.close(),h.reset()),i.$$.dirty&2050&&f&&(f.off_to_def.results.bindings.forEach(B=>{"def_tactic_label"in B&&y.add(B.def_tactic_label.value)}),t(11,y),t(1,f)),i.$$.dirty&2048&&t(4,F=Array.from(y).sort(function(B,D){return Qa[B]-Qa[D]})),i.$$.dirty&8&&N(T),i.$$.dirty&8&&h.reset(T)},t(5,r=[]),[o,f,p,T,F,r,d,c,h,m,u,y,a,b,k,A,L,P,l]}class l3 extends gt{constructor(e){super(),bt(this,e,s3,a3,nt,{show_defend_modal:0,parent_node:10,data:1})}}function o3(i){let e,t="artifacts",r,n,s,a,l,o="defensive techniques",u,f,p,d,c,h;function _(T){i[6](T)}let m={parent_node:i[0],data:i[1]};i[3]!==void 0&&(m.show_artifacts_modal=i[3]),n=new Jy({props:m}),Mt.push(()=>mr(n,"show_artifacts_modal",_));function y(T){i[8](T)}let F={parent_node:i[0],data:i[1]};return i[2]!==void 0&&(F.show_defend_modal=i[2]),f=new l3({props:F}),Mt.push(()=>mr(f,"show_defend_modal",y)),{c(){e=K("button"),e.textContent=t,r=oe(),Oe(n.$$.fragment),a=oe(),l=K("button"),l.textContent=o,u=oe(),Oe(f.$$.fragment),this.h()},l(T){e=Z(T,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(e)!=="svelte-1t14z6m"&&(e.textContent=t),r=ue(T),Be(n.$$.fragment,T),a=ue(T),l=Z(T,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(l)!=="svelte-o3we0s"&&(l.textContent=o),u=ue(T),Be(f.$$.fragment,T),this.h()},h(){re(e,"class","svelte-1x5dcdh"),re(l,"class","svelte-1x5dcdh")},m(T,N){C(T,e,N),C(T,r,N),Le(n,T,N),C(T,a,N),C(T,l,N),C(T,u,N),Le(f,T,N),d=!0,c||(h=[ye(e,"click",i[5]),ye(l,"click",i[7])],c=!0)},p(T,[N]){const b={};N&1&&(b.parent_node=T[0]),N&2&&(b.data=T[1]),!s&&N&8&&(s=!0,b.show_artifacts_modal=T[3],_r(()=>s=!1)),n.$set(b);const k={};N&1&&(k.parent_node=T[0]),N&2&&(k.data=T[1]),!p&&N&4&&(p=!0,k.show_defend_modal=T[2],_r(()=>p=!1)),f.$set(k)},i(T){d||(se(n.$$.fragment,T),se(f.$$.fragment,T),d=!0)},o(T){ce(n.$$.fragment,T),ce(f.$$.fragment,T),d=!1},d(T){T&&(v(e),v(r),v(a),v(l),v(u)),Ue(n,T),Ue(f,T),c=!1,mt(h)}}}function u3(i,e,t){let r,n;var s=this&&this.__awaiter||function(h,_,m,y){function F(T){return T instanceof m?T:new m(function(N){N(T)})}return new(m||(m=Promise))(function(T,N){function b(L){try{A(y.next(L))}catch(P){N(P)}}function k(L){try{A(y.throw(L))}catch(P){N(P)}}function A(L){L.done?T(L.value):F(L.value).then(b,k)}A((y=y.apply(h,_||[])).next())})};let{node:a}=e,l;function o(h){alert(h),t(3,r=!1),t(2,n=!1)}function u(h){return s(this,void 0,void 0,function*(){if(h.data.d3f_class&&h.data.d3f_class.includes("d3f:")){const _=h.data.d3f_class,m=yield fetch(`/api/offensive-technique/attack/${_.replace("d3f:","")}.json`),y=yield m.json();if(m.status!=200||y.description["@graph"].length==0)o(`Offensive Technique: "${_.replace("d3f:","")}" not found in ontology`);else return y}else o("Please specify a D3FEND Class for this node to enable inferential mapping")})}const f=async()=>{t(1,l=null),t(3,r=!0),t(1,l=await u(a))};function p(h){r=h,t(3,r)}const d=async()=>{t(1,l=null),t(2,n=!0),t(1,l=await u(a))};function c(h){n=h,t(2,n)}return i.$$set=h=>{"node"in h&&t(0,a=h.node)},t(3,r=!1),t(2,n=!1),[a,l,n,r,u,f,p,d,c]}class f3 extends gt{constructor(e){super(),bt(this,e,u3,o3,nt,{node:0})}}function Pc(i){let e,t;return e=new f3({props:{node:i[1]}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n&2&&(s.node=r[1]),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function Rc(i){let e,t;return e=new Vy({props:{node:i[1]}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n&2&&(s.node=r[1]),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function Fc(i){let e,t;return e=new gy({props:{node:i[1]}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n&2&&(s.node=r[1]),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function c3(i){let e,t,r,n,s,a,l,o,u,f,p="duplicate",d,c,h="delete",_,m,y,F,T=i[1]&&i[1].type=="attackSelectorNode"&&Pc(i),N=i[1]&&i[1].type=="countermeasureSelectorNode"&&Rc(i),b=i[1]&&i[1].type=="artifactSelectorNode"&&Fc(i);return{c(){e=K("div"),t=K("p"),r=K("small"),n=q("node: "),s=q(i[0]),a=oe(),T&&T.c(),l=oe(),N&&N.c(),o=oe(),b&&b.c(),u=oe(),f=K("button"),f.textContent=p,d=oe(),c=K("button"),c.textContent=h,this.h()},l(k){e=Z(k,"DIV",{style:!0,class:!0});var A=Ce(e);t=Z(A,"P",{style:!0});var L=Ce(t);r=Z(L,"SMALL",{});var P=Ce(r);n=M(P,"node: "),s=M(P,i[0]),P.forEach(v),L.forEach(v),a=ue(A),T&&T.l(A),l=ue(A),N&&N.l(A),o=ue(A),b&&b.l(A),u=ue(A),f=Z(A,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(f)!=="svelte-1spbqw1"&&(f.textContent=p),d=ue(A),c=Z(A,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(c)!=="svelte-1pyou7z"&&(c.textContent=h),A.forEach(v),this.h()},h(){wt(t,"margin","0.5em"),re(f,"class","svelte-1o17oqa"),re(c,"class","svelte-1o17oqa"),re(e,"style",_=i[2]()),re(e,"class","context-menu svelte-1o17oqa")},m(k,A){C(k,e,A),z(e,t),z(t,r),z(r,n),z(r,s),z(e,a),T&&T.m(e,null),z(e,l),N&&N.m(e,null),z(e,o),b&&b.m(e,null),z(e,u),z(e,f),z(e,d),z(e,c),m=!0,y||(F=[ye(f,"click",i[5]),ye(c,"click",i[6])],y=!0)},p(k,[A]){(!m||A&1)&&we(s,k[0]),k[1]&&k[1].type=="attackSelectorNode"?T?(T.p(k,A),A&2&&se(T,1)):(T=Pc(k),T.c(),se(T,1),T.m(e,l)):T&&(ut(),ce(T,1,1,()=>{T=null}),ft()),k[1]&&k[1].type=="countermeasureSelectorNode"?N?(N.p(k,A),A&2&&se(N,1)):(N=Rc(k),N.c(),se(N,1),N.m(e,o)):N&&(ut(),ce(N,1,1,()=>{N=null}),ft()),k[1]&&k[1].type=="artifactSelectorNode"?b?(b.p(k,A),A&2&&se(b,1)):(b=Fc(k),b.c(),se(b,1),b.m(e,u)):b&&(ut(),ce(b,1,1,()=>{b=null}),ft()),(!m||A&4&&_!==(_=k[2]()))&&re(e,"style",_)},i(k){m||(se(T),se(N),se(b),m=!0)},o(k){ce(T),ce(N),ce(b),m=!1},d(k){k&&v(e),T&&T.d(),N&&N.d(),b&&b.d(),y=!1,mt(F)}}}function d3(i,e,t){let r,n,s,a,{id:l}=e,{top:o}=e,{left:u}=e,{right:f}=e,{bottom:p}=e;const d=Qr();tt(i,d,m=>t(11,a=m));const c=$r();tt(i,c,m=>t(12,s=m));function h(){const m=a.find(y=>y.id===l);m&&(console.log(m),a.push(Object.assign(Object.assign({},m),{id:`${l}-copy${Math.random()}`.slice(-24),position:{x:m.position.x,y:m.position.y+50}}))),d.set(a)}function _(){_t(d,a=a.filter(m=>m.id!==l),a),_t(c,s=s.filter(m=>m.source!==l&&m.target!==l),s),d.set(a),c.set(s)}return i.$$set=m=>{"id"in m&&t(0,l=m.id),"top"in m&&t(7,o=m.top),"left"in m&&t(8,u=m.left),"right"in m&&t(9,f=m.right),"bottom"in m&&t(10,p=m.bottom)},i.$$.update=()=>{i.$$.dirty&2049&&t(1,r=a.find(m=>m.id===l)),i.$$.dirty&1920&&t(2,n=()=>{let m="";return o&&(m+=`top:${o}px;`),p&&(m+=`bottom:${p}px;`),u&&(m+=`left:${u}px;`),f&&(m+=`right:${f}px;`),m})},[l,r,n,d,c,h,_,o,u,f,p,a]}class h3 extends gt{constructor(e){super(),bt(this,e,d3,c3,nt,{id:0,top:7,left:8,right:9,bottom:10})}}function Oc(i,e,t){const r=i.slice();return r[12]=e[t],r}function Bc(i){let e,t,r,n,s,a,l,o,u,f,p,d,c;const h=i[8].default,_=Vt(h,i,i[7],null);let m=Ge(i[3]),y=[];for(let F=0;F<m.length;F+=1)y[F]=Lc(Oc(i,m,F));return{c(){e=K("div"),t=K("div"),r=K("h2"),n=q(i[1]),s=oe(),a=K("p"),l=q(i[2]),o=oe(),_&&_.c(),u=oe(),f=K("div");for(let F=0;F<y.length;F+=1)y[F].c();this.h()},l(F){e=Z(F,"DIV",{class:!0});var T=Ce(e);t=Z(T,"DIV",{class:!0});var N=Ce(t);r=Z(N,"H2",{});var b=Ce(r);n=M(b,i[1]),b.forEach(v),s=ue(N),a=Z(N,"P",{});var k=Ce(a);l=M(k,i[2]),k.forEach(v),o=ue(N),_&&_.l(N),u=ue(N),f=Z(N,"DIV",{class:!0});var A=Ce(f);for(let L=0;L<y.length;L+=1)y[L].l(A);A.forEach(v),N.forEach(v),T.forEach(v),this.h()},h(){re(f,"class","options svelte-zbcx3u"),re(t,"class","modal-content center text-center svelte-zbcx3u"),re(e,"class","modal-overlay svelte-zbcx3u")},m(F,T){C(F,e,T),z(e,t),z(t,r),z(r,n),z(t,s),z(t,a),z(a,l),z(t,o),_&&_.m(t,null),z(t,u),z(t,f);for(let N=0;N<y.length;N+=1)y[N]&&y[N].m(f,null);p=!0,d||(c=[ye(t,"click",Wt(i[9])),ye(e,"click",i[4])],d=!0)},p(F,T){if((!p||T&2)&&we(n,F[1]),(!p||T&4)&&we(l,F[2]),_&&_.p&&(!p||T&128)&&zt(_,h,F,F[7],p?xt(h,F[7],T,null):Ht(F[7]),null),T&40){m=Ge(F[3]);let N;for(N=0;N<m.length;N+=1){const b=Oc(F,m,N);y[N]?y[N].p(b,T):(y[N]=Lc(b),y[N].c(),y[N].m(f,null))}for(;N<y.length;N+=1)y[N].d(1);y.length=m.length}},i(F){p||(se(_,F),p=!0)},o(F){ce(_,F),p=!1},d(F){F&&v(e),_&&_.d(F),Dt(y,F),d=!1,mt(c)}}}function Lc(i){let e,t=i[12].label+"",r,n,s,a;function l(){return i[10](i[12])}return{c(){e=K("button"),r=q(t),n=oe(),this.h()},l(o){e=Z(o,"BUTTON",{class:!0});var u=Ce(e);r=M(u,t),n=ue(u),u.forEach(v),this.h()},h(){re(e,"class","svelte-zbcx3u")},m(o,u){C(o,e,u),z(e,r),z(e,n),s||(a=ye(e,"click",l),s=!0)},p(o,u){i=o,u&8&&t!==(t=i[12].label+"")&&we(r,t)},d(o){o&&v(e),s=!1,a()}}}function p3(i){let e,t,r=i[0]&&Bc(i);return{c(){r&&r.c(),e=Re()},l(n){r&&r.l(n),e=Re()},m(n,s){r&&r.m(n,s),C(n,e,s),t=!0},p(n,[s]){n[0]?r?(r.p(n,s),s&1&&se(r,1)):(r=Bc(n),r.c(),se(r,1),r.m(e.parentNode,e)):r&&(ut(),ce(r,1,1,()=>{r=null}),ft())},i(n){t||(se(r),t=!0)},o(n){ce(r),t=!1},d(n){n&&v(e),r&&r.d(n)}}}function _3(i,e,t){let{$$slots:r={},$$scope:n}=e,{is_open:s=!1}=e,{title:a=""}=e,{content:l=""}=e,{imageSrc:o=""}=e,{options:u=[]}=e;const f=os();function p(){t(0,s=!1)}function d(_){f("optionSelected",_),p()}function c(_){Fr.call(this,i,_)}const h=_=>d(_);return i.$$set=_=>{"is_open"in _&&t(0,s=_.is_open),"title"in _&&t(1,a=_.title),"content"in _&&t(2,l=_.content),"imageSrc"in _&&t(6,o=_.imageSrc),"options"in _&&t(3,u=_.options),"$$scope"in _&&t(7,n=_.$$scope)},[s,a,l,u,p,d,o,n,r,c,h]}class Uc extends gt{constructor(e){super(),bt(this,e,_3,p3,nt,{is_open:0,title:1,content:2,imageSrc:6,options:3})}}function jc(i,e,t){const r=i.slice();return r[11]=e[t],r}function qc(i){let e,t,r,n,s,a,l,o,u,f,p,d,c;const h=i[7].default,_=Vt(h,i,i[6],null);let m=Ge(i[3]),y=[];for(let F=0;F<m.length;F+=1)y[F]=Mc(jc(i,m,F));return{c(){e=K("div"),t=K("div"),r=K("h2"),n=q(i[1]),s=oe(),a=K("p"),l=q(i[2]),o=oe(),_&&_.c(),u=oe(),f=K("div");for(let F=0;F<y.length;F+=1)y[F].c();this.h()},l(F){e=Z(F,"DIV",{class:!0});var T=Ce(e);t=Z(T,"DIV",{class:!0});var N=Ce(t);r=Z(N,"H2",{});var b=Ce(r);n=M(b,i[1]),b.forEach(v),s=ue(N),a=Z(N,"P",{});var k=Ce(a);l=M(k,i[2]),k.forEach(v),o=ue(N),_&&_.l(N),u=ue(N),f=Z(N,"DIV",{class:!0});var A=Ce(f);for(let L=0;L<y.length;L+=1)y[L].l(A);A.forEach(v),N.forEach(v),T.forEach(v),this.h()},h(){re(f,"class","options svelte-2iwk9m"),re(t,"class","modal-content center text-center svelte-2iwk9m"),re(e,"class","modal-overlay svelte-2iwk9m")},m(F,T){C(F,e,T),z(e,t),z(t,r),z(r,n),z(t,s),z(t,a),z(a,l),z(t,o),_&&_.m(t,null),z(t,u),z(t,f);for(let N=0;N<y.length;N+=1)y[N]&&y[N].m(f,null);p=!0,d||(c=[ye(t,"click",Wt(i[8])),ye(e,"click",i[4])],d=!0)},p(F,T){if((!p||T&2)&&we(n,F[1]),(!p||T&4)&&we(l,F[2]),_&&_.p&&(!p||T&64)&&zt(_,h,F,F[6],p?xt(h,F[6],T,null):Ht(F[6]),null),T&40){m=Ge(F[3]);let N;for(N=0;N<m.length;N+=1){const b=jc(F,m,N);y[N]?y[N].p(b,T):(y[N]=Mc(b),y[N].c(),y[N].m(f,null))}for(;N<y.length;N+=1)y[N].d(1);y.length=m.length}},i(F){p||(se(_,F),p=!0)},o(F){ce(_,F),p=!1},d(F){F&&v(e),_&&_.d(F),Dt(y,F),d=!1,mt(c)}}}function Mc(i){let e,t=i[11].label+"",r,n,s,a;function l(){return i[9](i[11])}return{c(){e=K("button"),r=q(t),n=oe(),this.h()},l(o){e=Z(o,"BUTTON",{class:!0});var u=Ce(e);r=M(u,t),n=ue(u),u.forEach(v),this.h()},h(){re(e,"class","svelte-2iwk9m")},m(o,u){C(o,e,u),z(e,r),z(e,n),s||(a=ye(e,"click",l),s=!0)},p(o,u){i=o,u&8&&t!==(t=i[11].label+"")&&we(r,t)},d(o){o&&v(e),s=!1,a()}}}function m3(i){let e,t,r=i[0]&&qc(i);return{c(){r&&r.c(),e=Re()},l(n){r&&r.l(n),e=Re()},m(n,s){r&&r.m(n,s),C(n,e,s),t=!0},p(n,[s]){n[0]?r?(r.p(n,s),s&1&&se(r,1)):(r=qc(n),r.c(),se(r,1),r.m(e.parentNode,e)):r&&(ut(),ce(r,1,1,()=>{r=null}),ft())},i(n){t||(se(r),t=!0)},o(n){ce(r),t=!1},d(n){n&&v(e),r&&r.d(n)}}}function v3(i,e,t){let{$$slots:r={},$$scope:n}=e,{is_open:s=!1}=e,{title:a=""}=e,{content:l=""}=e,{options:o=[{label:"Cancel",value:"cancel"}]}=e;const u=os();function f(){t(0,s=!1)}function p(h){u("model_shared",h),f()}function d(h){Fr.call(this,i,h)}const c=h=>p(h);return i.$$set=h=>{"is_open"in h&&t(0,s=h.is_open),"title"in h&&t(1,a=h.title),"content"in h&&t(2,l=h.content),"options"in h&&t(3,o=h.options),"$$scope"in h&&t(6,n=h.$$scope)},[s,a,l,o,f,p,n,r,d,c]}class g3 extends gt{constructor(e){super(),bt(this,e,v3,m3,nt,{is_open:0,title:1,content:2,options:3})}}function b3(i){let e,t="❐";return{c(){e=K("icon"),e.textContent=t,this.h()},l(r){e=Z(r,"ICON",{title:!0,"data-svelte-h":!0}),Ke(e)!=="svelte-10dwkvf"&&(e.textContent=t),this.h()},h(){re(e,"title","Full Screen Mode")},m(r,n){C(r,e,n)},d(r){r&&v(e)}}}function w3(i){let e,t="⧉ Exit Fullscreen";return{c(){e=K("icon"),e.textContent=t,this.h()},l(r){e=Z(r,"ICON",{title:!0,"data-svelte-h":!0}),Ke(e)!=="svelte-2wnxo3"&&(e.textContent=t),this.h()},h(){re(e,"title","Exit Full Screen Mode")},m(r,n){C(r,e,n)},d(r){r&&v(e)}}}function y3(i){let e,t,r,n,s,a;function l(d,c){return d[1]?w3:b3}let o=l(i),u=o(i);const f=i[4].default,p=Vt(f,i,i[3],null);return{c(){e=K("div"),t=K("button"),u.c(),r=oe(),p&&p.c(),this.h()},l(d){e=Z(d,"DIV",{id:!0,class:!0});var c=Ce(e);t=Z(c,"BUTTON",{class:!0});var h=Ce(t);u.l(h),h.forEach(v),r=ue(c),p&&p.l(c),c.forEach(v),this.h()},h(){re(t,"class","fullscreen-toggle svelte-1jzyezl"),on(t,"left",i[0]==="left"),on(t,"right",i[0]==="right"),re(e,"id","fullscreen-parent"),re(e,"class","svelte-1jzyezl")},m(d,c){C(d,e,c),z(e,t),u.m(t,null),z(e,r),p&&p.m(e,null),n=!0,s||(a=ye(t,"click",i[2]),s=!0)},p(d,[c]){o!==(o=l(d))&&(u.d(1),u=o(d),u&&(u.c(),u.m(t,null))),(!n||c&1)&&on(t,"left",d[0]==="left"),(!n||c&1)&&on(t,"right",d[0]==="right"),p&&p.p&&(!n||c&8)&&zt(p,f,d,d[3],n?xt(f,d[3],c,null):Ht(d[3]),null)},i(d){n||(se(p,d),n=!0)},o(d){ce(p,d),n=!1},d(d){d&&v(e),u.d(),p&&p.d(d),s=!1,a()}}}function E3(i,e,t){let{$$slots:r={},$$scope:n}=e,{position:s="right"}=e,a=!1,l;ls(()=>(l=document.getElementById("fullscreen-parent"),document.addEventListener("fullscreenchange",o),()=>{document.removeEventListener("fullscreenchange",o)}));function o(){t(1,a=!!document.fullscreenElement)}async function u(){if(a)try{await document.exitFullscreen()}catch(f){console.error("Error attempting to exit fullscreen:",f)}else try{await l.requestFullscreen()}catch(f){console.error("Error attempting to enable fullscreen:",f)}}return i.$$set=f=>{"position"in f&&t(0,s=f.position),"$$scope"in f&&t(3,n=f.$$scope)},[s,a,u,n,r]}class D3 extends gt{constructor(e){super(),bt(this,e,E3,y3,nt,{position:0})}}function k3(i){let e,t,r="drag these nodes to the canvas below",n,s,a,l,o="Action",u,f,p="Event",d,c,h="Attack",_,m,y="Countermeasure",F,T,N,b="Endurant",k,A,L="Artifact",P,B,D="Information",R,w,S="Agent",X,j,ne,J="State",W,x,G="Vulnerability",le,Q,ae="Condition",Ve,ze;return{c(){e=K("aside"),t=K("div"),t.textContent=r,n=oe(),s=K("div"),a=K("div"),l=K("div"),l.textContent=o,u=oe(),f=K("div"),f.textContent=p,d=oe(),c=K("div"),c.textContent=h,_=oe(),m=K("div"),m.textContent=y,F=oe(),T=K("div"),N=K("div"),N.textContent=b,k=oe(),A=K("div"),A.textContent=L,P=oe(),B=K("div"),B.textContent=D,R=oe(),w=K("div"),w.textContent=S,X=oe(),j=K("div"),ne=K("div"),ne.textContent=J,W=oe(),x=K("div"),x.textContent=G,le=oe(),Q=K("div"),Q.textContent=ae,this.h()},l(De){e=Z(De,"ASIDE",{class:!0});var Pe=Ce(e);t=Z(Pe,"DIV",{class:!0,"data-svelte-h":!0}),Ke(t)!=="svelte-1gs57dm"&&(t.textContent=r),n=ue(Pe),s=Z(Pe,"DIV",{class:!0});var ve=Ce(s);a=Z(ve,"DIV",{class:!0});var he=Ce(a);l=Z(he,"DIV",{class:!0,"data-svelte-h":!0}),Ke(l)!=="svelte-1yk6dej"&&(l.textContent=o),u=ue(he),f=Z(he,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),Ke(f)!=="svelte-1hxo6k5"&&(f.textContent=p),d=ue(he),c=Z(he,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),Ke(c)!=="svelte-1m30nhf"&&(c.textContent=h),_=ue(he),m=Z(he,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),Ke(m)!=="svelte-xvztkt"&&(m.textContent=y),he.forEach(v),F=ue(ve),T=Z(ve,"DIV",{class:!0});var Fe=Ce(T);N=Z(Fe,"DIV",{class:!0,"data-svelte-h":!0}),Ke(N)!=="svelte-13fxc4g"&&(N.textContent=b),k=ue(Fe),A=Z(Fe,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Ke(A)!=="svelte-p6iki9"&&(A.textContent=L),P=ue(Fe),B=Z(Fe,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Ke(B)!=="svelte-gfucir"&&(B.textContent=D),R=ue(Fe),w=Z(Fe,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Ke(w)!=="svelte-1k1k96h"&&(w.textContent=S),Fe.forEach(v),X=ue(ve),j=Z(ve,"DIV",{class:!0});var lt=Ce(j);ne=Z(lt,"DIV",{class:!0,"data-svelte-h":!0}),Ke(ne)!=="svelte-82roym"&&(ne.textContent=J),W=ue(lt),x=Z(lt,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Ke(x)!=="svelte-tj9qj"&&(x.textContent=G),le=ue(lt),Q=Z(lt,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Ke(Q)!=="svelte-1mwlumu"&&(Q.textContent=ae),lt.forEach(v),ve.forEach(v),Pe.forEach(v),this.h()},h(){re(t,"class","label svelte-1ubw31k"),re(l,"class","text-center font-medium"),re(f,"class","actionNode example-node svelte-1ubw31k"),re(f,"draggable",!0),wt(f,"text-align","center"),wt(f,"background","white"),re(f,"title","d3f:Event"),re(c,"class","attackSelectorNode example-node svelte-1ubw31k"),re(c,"draggable",!0),wt(c,"text-align","center"),wt(c,"background","#FFD0D0"),re(c,"title","d3f:OffensiveTechnique"),re(m,"class","countermeasureSelectorNode example-node svelte-1ubw31k"),re(m,"draggable",!0),wt(m,"text-align","center"),wt(m,"background","#d6eaff"),re(m,"title","d3f:DefensiveTechnique"),re(a,"class","nodes-column svelte-1ubw31k"),re(N,"class","text-center font-medium"),re(A,"class","artifactSelectorNode art-node example-node svelte-1ubw31k"),re(A,"draggable",!0),wt(A,"text-align","center"),wt(A,"background","#fff4dd"),re(B,"class","informationSelectorNode example-node svelte-1ubw31k"),re(B,"draggable",!0),wt(B,"text-align","center"),wt(B,"background","#e8f4ea"),re(w,"class","agentSelectorNode example-node svelte-1ubw31k"),re(w,"draggable",!0),wt(w,"text-align","center"),wt(w,"background","#f0e6e6"),re(T,"class","nodes-column svelte-1ubw31k"),re(ne,"class","text-center font-medium"),re(x,"class","vulnerabilitySelectorNode example-node svelte-1ubw31k"),re(x,"draggable",!0),wt(x,"text-align","center"),wt(x,"background","#f9d999"),re(Q,"class","conditionDefinitionNode example-node svelte-1ubw31k"),re(Q,"draggable",!0),wt(Q,"text-align","center"),wt(Q,"background","#ece6ff"),re(j,"class","nodes-column svelte-1ubw31k"),re(s,"class","nodes-container svelte-1ubw31k"),re(e,"class","svelte-1ubw31k")},m(De,Pe){C(De,e,Pe),z(e,t),z(e,n),z(e,s),z(s,a),z(a,l),z(a,u),z(a,f),z(a,d),z(a,c),z(a,_),z(a,m),z(s,F),z(s,T),z(T,N),z(T,k),z(T,A),z(T,P),z(T,B),z(T,R),z(T,w),z(s,X),z(s,j),z(j,ne),z(j,W),z(j,x),z(j,le),z(j,Q),Ve||(ze=[ye(f,"dragstart",i[1]),ye(c,"dragstart",i[2]),ye(m,"dragstart",i[3]),ye(A,"dragstart",i[4]),ye(B,"dragstart",i[5]),ye(w,"dragstart",i[6]),ye(x,"dragstart",i[7]),ye(Q,"dragstart",i[8])],Ve=!0)},p:Me,i:Me,o:Me,d(De){De&&v(e),Ve=!1,mt(ze)}}}function A3(i){const e=(f,p)=>{if(!f.dataTransfer)return null;f.dataTransfer.setData("application/svelteflow",p),f.dataTransfer.effectAllowed="move"};return[e,f=>e(f,"eventNode"),f=>e(f,"attackSelectorNode"),f=>e(f,"countermeasureSelectorNode"),f=>e(f,"artifactSelectorNode"),f=>e(f,"informationSelectorNode"),f=>e(f,"agentSelectorNode"),f=>e(f,"vulnerabilitySelectorNode"),f=>e(f,"conditionDefinitionNode")]}class C3 extends gt{constructor(e){super(),bt(this,e,A3,k3,nt,{})}}function Vc(i,e,t){const r=i.slice();return r[11]=e[t],r[12]=e,r[13]=t,r}function zc(i){let e,t,r=i[0].id+"",n,s,a,l,o,u,f,p,d,c,h,_,m,y,F,T="+",N,b,k=(i[0].type=="attackSelectorNode"||i[0].type=="countermeasureSelectorNode")&&Hc(i),A=i[0].type=="vulnerabilitySelectorNode"&&xc(i),L=Ge(i[0].data.user_properties),P=[];for(let B=0;B<L.length;B+=1)P[B]=Gc(Vc(i,L,B));return{c(){e=K("p"),t=q("id: "),n=q(r),s=oe(),a=K("div"),k&&k.c(),l=oe(),A&&A.c(),o=oe(),u=K("br"),f=q(`
                label:`),p=K("br"),d=K("input"),c=K("br"),h=oe(),_=K("br"),m=oe();for(let B=0;B<P.length;B+=1)P[B].c();y=oe(),F=K("button"),F.textContent=T,this.h()},l(B){e=Z(B,"P",{class:!0});var D=Ce(e);t=M(D,"id: "),n=M(D,r),D.forEach(v),s=ue(B),a=Z(B,"DIV",{class:!0});var R=Ce(a);k&&k.l(R),l=ue(R),A&&A.l(R),o=ue(R),u=Z(R,"BR",{}),f=M(R,`
                label:`),p=Z(R,"BR",{}),d=Z(R,"INPUT",{type:!0,name:!0}),c=Z(R,"BR",{}),h=ue(R),_=Z(R,"BR",{}),m=ue(R);for(let w=0;w<P.length;w+=1)P[w].l(R);y=ue(R),F=Z(R,"BUTTON",{"data-svelte-h":!0}),Ke(F)!=="svelte-y9choq"&&(F.textContent=T),R.forEach(v),this.h()},h(){re(e,"class",""),re(d,"type","text"),re(d,"name","editableInput"),re(a,"class","")},m(B,D){C(B,e,D),z(e,t),z(e,n),C(B,s,D),C(B,a,D),k&&k.m(a,null),z(a,l),A&&A.m(a,null),z(a,o),z(a,u),z(a,f),z(a,p),z(a,d),et(d,i[0].data.label),z(a,c),z(a,h),z(a,_),z(a,m);for(let R=0;R<P.length;R+=1)P[R]&&P[R].m(a,null);z(a,y),z(a,F),N||(b=[ye(d,"input",i[7]),ye(F,"click",i[1])],N=!0)},p(B,D){if(D&1&&r!==(r=B[0].id+"")&&we(n,r),B[0].type=="attackSelectorNode"||B[0].type=="countermeasureSelectorNode"?k?k.p(B,D):(k=Hc(B),k.c(),k.m(a,l)):k&&(k.d(1),k=null),B[0].type=="vulnerabilitySelectorNode"?A?A.p(B,D):(A=xc(B),A.c(),A.m(a,o)):A&&(A.d(1),A=null),D&1&&d.value!==B[0].data.label&&et(d,B[0].data.label),D&5){L=Ge(B[0].data.user_properties);let R;for(R=0;R<L.length;R+=1){const w=Vc(B,L,R);P[R]?P[R].p(w,D):(P[R]=Gc(w),P[R].c(),P[R].m(a,y))}for(;R<P.length;R+=1)P[R].d(1);P.length=L.length}},d(B){B&&(v(e),v(s),v(a)),k&&k.d(),A&&A.d(),Dt(P,B),N=!1,mt(b)}}}function Hc(i){let e,t,r,n,s,a,l;return{c(){e=q("sequence: "),t=K("br"),r=K("input"),n=oe(),s=K("br"),this.h()},l(o){e=M(o,"sequence: "),t=Z(o,"BR",{}),r=Z(o,"INPUT",{placeholder:!0,type:!0,name:!0}),n=ue(o),s=Z(o,"BR",{}),this.h()},h(){re(r,"placeholder","property"),re(r,"type","text"),re(r,"name","editableInput")},m(o,u){C(o,e,u),C(o,t,u),C(o,r,u),et(r,i[0].data.sequence),C(o,n,u),C(o,s,u),a||(l=ye(r,"input",i[5]),a=!0)},p(o,u){u&1&&r.value!==o[0].data.sequence&&et(r,o[0].data.sequence)},d(o){o&&(v(e),v(t),v(r),v(n),v(s)),a=!1,l()}}}function xc(i){let e,t,r,n,s,a,l,o;return{c(){e=q("weakness: "),t=K("br"),r=K("input"),n=K("br"),s=oe(),a=K("br"),this.h()},l(u){e=M(u,"weakness: "),t=Z(u,"BR",{}),r=Z(u,"INPUT",{placeholder:!0,type:!0,name:!0}),n=Z(u,"BR",{}),s=ue(u),a=Z(u,"BR",{}),this.h()},h(){re(r,"placeholder","weakness"),re(r,"type","text"),re(r,"name","editableInput")},m(u,f){C(u,e,f),C(u,t,f),C(u,r,f),et(r,i[0].data.weakness),C(u,n,f),C(u,s,f),C(u,a,f),l||(o=ye(r,"input",i[6]),l=!0)},p(u,f){f&1&&r.value!==u[0].data.weakness&&et(r,u[0].data.weakness)},d(u){u&&(v(e),v(t),v(r),v(n),v(s),v(a)),l=!1,o()}}}function Xc(i){let e,t,r,n,s,a,l,o,u="X",f,p,d,c,h;function _(){i[8].call(r,i[13])}function m(){i[9].call(a,i[13])}function y(){return i[10](i[13])}return{c(){e=K("div"),t=K("div"),r=K("input"),n=oe(),s=K("br"),a=K("input"),l=oe(),o=K("button"),o.textContent=u,f=oe(),p=K("br"),d=K("br"),this.h()},l(F){e=Z(F,"DIV",{class:!0});var T=Ce(e);t=Z(T,"DIV",{});var N=Ce(t);r=Z(N,"INPUT",{placeholder:!0,type:!0,name:!0}),n=ue(N),s=Z(N,"BR",{}),a=Z(N,"INPUT",{placeholder:!0,type:!0,name:!0}),N.forEach(v),l=ue(T),o=Z(T,"BUTTON",{"data-svelte-h":!0}),Ke(o)!=="svelte-1nu8yn8"&&(o.textContent=u),T.forEach(v),f=ue(F),p=Z(F,"BR",{}),d=Z(F,"BR",{}),this.h()},h(){re(r,"placeholder","property"),re(r,"type","text"),re(r,"name","editableInput"),re(a,"placeholder","value"),re(a,"type","text"),re(a,"name","editableInput"),re(e,"class","container svelte-no7kai")},m(F,T){C(F,e,T),z(e,t),z(t,r),et(r,i[0].data.user_properties[i[13]][0]),z(t,n),z(t,s),z(t,a),et(a,i[0].data.user_properties[i[13]][1]),z(e,l),z(e,o),C(F,f,T),C(F,p,T),C(F,d,T),c||(h=[ye(r,"input",_),ye(a,"input",m),ye(o,"click",y)],c=!0)},p(F,T){i=F,T&1&&r.value!==i[0].data.user_properties[i[13]][0]&&et(r,i[0].data.user_properties[i[13]][0]),T&1&&a.value!==i[0].data.user_properties[i[13]][1]&&et(a,i[0].data.user_properties[i[13]][1])},d(F){F&&(v(e),v(f),v(p),v(d)),c=!1,mt(h)}}}function Gc(i){let e,t=i[0].data.user_properties[i[13]].length==2&&Xc(i);return{c(){t&&t.c(),e=Re()},l(r){t&&t.l(r),e=Re()},m(r,n){t&&t.m(r,n),C(r,e,n)},p(r,n){r[0].data.user_properties[r[13]].length==2?t?t.p(r,n):(t=Xc(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(r){r&&v(e),t&&t.d(r)}}}function T3(i){let e,t,r,n,s=i[0]&&i[0].data.user_properties&&zc(i);const a=i[4].default,l=Vt(a,i,i[3],null);return{c(){e=K("div"),t=K("div"),s&&s.c(),r=oe(),l&&l.c(),this.h()},l(o){e=Z(o,"DIV",{class:!0});var u=Ce(e);t=Z(u,"DIV",{class:!0});var f=Ce(t);s&&s.l(f),r=ue(f),l&&l.l(f),f.forEach(v),u.forEach(v),this.h()},h(){re(t,"class","side-panel svelte-no7kai"),re(e,"class","side-panel-wrapper")},m(o,u){C(o,e,u),z(e,t),s&&s.m(t,null),z(t,r),l&&l.m(t,null),n=!0},p(o,[u]){o[0]&&o[0].data.user_properties?s?s.p(o,u):(s=zc(o),s.c(),s.m(t,r)):s&&(s.d(1),s=null),l&&l.p&&(!n||u&8)&&zt(l,a,o,o[3],n?xt(a,o[3],u,null):Ht(o[3]),null)},i(o){n||(se(l,o),n=!0)},o(o){ce(l,o),n=!1},d(o){o&&v(e),s&&s.d(),l&&l.d(o)}}}function N3(i,e,t){let r;tt(i,ot,h=>t(0,r=h));let{$$slots:n={},$$scope:s}=e;function a(){r.data.user_properties||_t(ot,r.data.user_properties=[],r),r.data.user_properties.push(["",""]),ot.set(r)}function l(h){r.data.user_properties.splice(h.index,1),ot.set(r)}function o(){r.data.sequence=this.value,ot.set(r)}function u(){r.data.weakness=this.value,ot.set(r)}function f(){r.data.label=this.value,ot.set(r)}function p(h){r.data.user_properties[h][0]=this.value,ot.set(r)}function d(h){r.data.user_properties[h][1]=this.value,ot.set(r)}const c=h=>l({index:h});return i.$$set=h=>{"$$scope"in h&&t(3,s=h.$$scope)},[r,a,l,s,n,o,u,f,p,d,c]}class S3 extends gt{constructor(e){super(),bt(this,e,N3,T3,nt,{})}}function Qc(i,e,t){const r=i.slice();return r[9]=e[t],r}function $c(i){let e,t=i[9]["rdfs:label"]+"",r,n,s,a,l;function o(...f){return i[7](i[9],...f)}function u(...f){return i[8](i[9],...f)}return{c(){e=K("div"),r=q(t),n=oe(),this.h()},l(f){e=Z(f,"DIV",{class:!0,title:!0,tabindex:!0,role:!0});var p=Ce(e);r=M(p,t),n=ue(p),p.forEach(v),this.h()},h(){re(e,"class","select-technique"),re(e,"title",s=i[9]["d3f:definition"]),re(e,"tabindex","0"),re(e,"role","button")},m(f,p){C(f,e,p),z(e,r),z(e,n),a||(l=[ye(e,"click",Wt(ai(o))),ye(e,"keydown",Wt(u))],a=!0)},p(f,p){i=f,p&8&&t!==(t=i[9]["rdfs:label"]+"")&&we(r,t),p&8&&s!==(s=i[9]["d3f:definition"])&&re(e,"title",s)},d(f){f&&v(e),a=!1,mt(l)}}}function I3(i){let e,t=Ge(i[3]),r=[];for(let n=0;n<t.length;n+=1)r[n]=$c(Qc(i,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=Re()},l(n){for(let s=0;s<r.length;s+=1)r[s].l(n);e=Re()},m(n,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,s);C(n,e,s)},p(n,[s]){if(s&12){t=Ge(n[3]);let a;for(a=0;a<t.length;a+=1){const l=Qc(n,t,a);r[a]?r[a].p(l,s):(r[a]=$c(l),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},i:Me,o:Me,d(n){n&&v(e),Dt(r,n)}}}function P3(i,e,t){let r,n=Me,s=()=>(n(),n=zr(f,m=>t(5,r=m)),f),a,l=Me,o=()=>(l(),l=zr(u,m=>t(6,a=m)),u);i.$$.on_destroy.push(()=>n()),i.$$.on_destroy.push(()=>l());let{list:u}=e;o();let{filter_value_store:f}=e;s();let{select_item:p}=e,{regex_search_keys:d=["rdfs:label","@id"]}=e,c=[];const h=(m,y)=>p(y,m),_=(m,y)=>Ci(y,p,m);return i.$$set=m=>{"list"in m&&o(t(0,u=m.list)),"filter_value_store"in m&&s(t(1,f=m.filter_value_store)),"select_item"in m&&t(2,p=m.select_item),"regex_search_keys"in m&&t(4,d=m.regex_search_keys)},i.$$.update=()=>{i.$$.dirty&112&&t(3,c=Um(a,r,d))},[u,f,p,c,d,r,a,h,_]}class R3 extends gt{constructor(e){super(),bt(this,e,P3,I3,nt,{list:0,filter_value_store:1,select_item:2,regex_search_keys:4})}}function Wc(i,e,t){const r=i.slice();return r[12]=e[t],r}function Yc(i,e,t){const r=i.slice();return r[15]=e[t],r}function Jc(i){let e,t=Ge(i[12].children),r=[];for(let n=0;n<t.length;n+=1)r[n]=Kc(Yc(i,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=Re()},l(n){for(let s=0;s<r.length;s+=1)r[s].l(n);e=Re()},m(n,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,s);C(n,e,s)},p(n,s){if(s&20){t=Ge(n[12].children);let a;for(a=0;a<t.length;a+=1){const l=Yc(n,t,a);r[a]?r[a].p(l,s):(r[a]=Kc(l),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},d(n){n&&v(e),Dt(r,n)}}}function Kc(i){let e,t=i[15]["rdfs:label"]+"",r,n,s,a,l;function o(...f){return i[10](i[15],...f)}function u(...f){return i[11](i[15],...f)}return{c(){e=K("div"),r=q(t),n=oe(),this.h()},l(f){e=Z(f,"DIV",{class:!0,title:!0,tabindex:!0,role:!0});var p=Ce(e);r=M(p,t),n=ue(p),p.forEach(v),this.h()},h(){re(e,"class","select-technique"),re(e,"title",s=i[15]["d3f:definition"]),re(e,"tabindex","0"),re(e,"role","button")},m(f,p){C(f,e,p),z(e,r),z(e,n),a||(l=[ye(e,"click",Wt(ai(o))),ye(e,"keydown",Wt(u))],a=!0)},p(f,p){i=f,p&16&&t!==(t=i[15]["rdfs:label"]+"")&&we(r,t),p&16&&s!==(s=i[15]["d3f:definition"])&&re(e,"title",s)},d(f){f&&v(e),a=!1,mt(l)}}}function Zc(i){let e,t,r=i[12]["rdfs:label"]+"",n,s,a,l,o,u,f,p=(i[3]===i[12]["@id"]||i[5])&&Jc(i);return{c(){e=K("details"),t=K("summary"),n=q(r),a=oe(),p&&p.c(),l=oe(),this.h()},l(d){e=Z(d,"DETAILS",{});var c=Ce(e);t=Z(c,"SUMMARY",{id:!0});var h=Ce(t);n=M(h,r),h.forEach(v),a=ue(c),p&&p.l(c),l=ue(c),c.forEach(v),this.h()},h(){re(t,"id",s=i[12]["@id"]),e.open=o=i[3]===i[12]["@id"]||i[5]},m(d,c){C(d,e,c),z(e,t),z(t,n),z(e,a),p&&p.m(e,null),z(e,l),u||(f=ye(t,"click",Wt(ai(i[6]))),u=!0)},p(d,c){c&16&&r!==(r=d[12]["rdfs:label"]+"")&&we(n,r),c&16&&s!==(s=d[12]["@id"])&&re(t,"id",s),d[3]===d[12]["@id"]||d[5]?p?p.p(d,c):(p=Jc(d),p.c(),p.m(e,l)):p&&(p.d(1),p=null),c&56&&o!==(o=d[3]===d[12]["@id"]||d[5])&&(e.open=o)},d(d){d&&v(e),p&&p.d(),u=!1,f()}}}function F3(i){let e,t=Ge(i[4]),r=[];for(let n=0;n<t.length;n+=1)r[n]=Zc(Wc(i,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=Re()},l(n){for(let s=0;s<r.length;s+=1)r[s].l(n);e=Re()},m(n,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,s);C(n,e,s)},p(n,[s]){if(s&124){t=Ge(n[4]);let a;for(a=0;a<t.length;a+=1){const l=Wc(n,t,a);r[a]?r[a].p(l,s):(r[a]=Zc(l),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},i:Me,o:Me,d(n){n&&v(e),Dt(r,n)}}}function O3(i,e,t){let r,n,s=Me,a=()=>(s(),s=zr(p,T=>t(8,n=T)),p),l,o=Me,u=()=>(o(),o=zr(f,T=>t(9,l=T)),f);i.$$.on_destroy.push(()=>s()),i.$$.on_destroy.push(()=>o());let{list:f}=e;u();let{filter_value_store:p}=e;a();let{select_item:d}=e,{regex_search_keys:c=["d3f:definition","rdfs:label","@id","d3f:d3fend-id"]}=e,h=null,_=[];function m(T){const{id:N}=T.target;h===N?t(3,h=null):t(3,h=N)}const y=(T,N)=>d(N,T),F=(T,N)=>Ci(N,d,T);return i.$$set=T=>{"list"in T&&u(t(0,f=T.list)),"filter_value_store"in T&&a(t(1,p=T.filter_value_store)),"select_item"in T&&t(2,d=T.select_item),"regex_search_keys"in T&&t(7,c=T.regex_search_keys)},i.$$.update=()=>{i.$$.dirty&896&&t(4,_=jm(l,n,c)),i.$$.dirty&256&&t(5,r=!!n)},[f,p,d,h,_,r,m,c,n,l,y,F]}class B3 extends gt{constructor(e){super(),bt(this,e,O3,F3,nt,{list:0,filter_value_store:1,select_item:2,regex_search_keys:7})}}function ed(i,e,t){const r=i.slice();return r[17]=e[t],r}function L3(i){let e,t,r,n;return{c(){e=K("div"),t=q(i[7]),this.h()},l(s){e=Z(s,"DIV",{id:!0,class:!0,role:!0,tabindex:!0});var a=Ce(e);t=M(a,i[7]),a.forEach(v),this.h()},h(){var s;re(e,"id","selectable-technique"),re(e,"class","no-arrow svelte-1t0ebq3"),re(e,"role","tree"),re(e,"tabindex","0"),on(e,"current-selected",((s=i[9])==null?void 0:s["@id"])===i[0]["@id"])},m(s,a){C(s,e,a),z(e,t),r||(n=[ye(e,"click",Wt(ai(i[14]))),ye(e,"keydown",Wt(ai(i[15])))],r=!0)},p(s,a){var l;a&128&&we(t,s[7]),a&513&&on(e,"current-selected",((l=s[9])==null?void 0:l["@id"])===s[0]["@id"])},i:Me,o:Me,d(s){s&&v(e),r=!1,mt(n)}}}function U3(i){let e,t,r="▶",n,s,a,l,o,u,f,p,d=i[5]&&td(i);return{c(){e=K("span"),t=K("span"),t.textContent=r,n=oe(),s=K("span"),a=q(i[7]),l=oe(),d&&d.c(),o=Re(),this.h()},l(c){e=Z(c,"SPAN",{class:!0,role:!0,tabindex:!0});var h=Ce(e);t=Z(h,"SPAN",{class:!0,"data-svelte-h":!0}),Ke(t)!=="svelte-1xn7s3"&&(t.textContent=r),n=ue(h),s=Z(h,"SPAN",{id:!0,class:!0});var _=Ce(s);a=M(_,i[7]),_.forEach(v),h.forEach(v),l=ue(c),d&&d.l(c),o=Re(),this.h()},h(){var c;re(t,"class","arrow svelte-1t0ebq3"),on(t,"arrowDown",i[6]),re(s,"id","parent-selectable-technique"),re(s,"class","label svelte-1t0ebq3"),re(e,"class","parent-technique svelte-1t0ebq3"),re(e,"role","tree"),re(e,"tabindex","0"),on(e,"current-selected",((c=i[9])==null?void 0:c["@id"])===i[0]["@id"])},m(c,h){C(c,e,h),z(e,t),z(e,n),z(e,s),z(s,a),C(c,l,h),d&&d.m(c,h),C(c,o,h),u=!0,f||(p=[ye(e,"click",Wt(ai(i[12]))),ye(e,"keydown",Wt(ai(i[13])))],f=!0)},p(c,h){var _;(!u||h&64)&&on(t,"arrowDown",c[6]),(!u||h&128)&&we(a,c[7]),(!u||h&513)&&on(e,"current-selected",((_=c[9])==null?void 0:_["@id"])===c[0]["@id"]),c[5]?d?(d.p(c,h),h&32&&se(d,1)):(d=td(c),d.c(),se(d,1),d.m(o.parentNode,o)):d&&(ut(),ce(d,1,1,()=>{d=null}),ft())},i(c){u||(se(d),u=!0)},o(c){ce(d),u=!1},d(c){c&&(v(e),v(l),v(o)),d&&d.d(c),f=!1,mt(p)}}}function td(i){let e,t,r=Ge(i[8]),n=[];for(let a=0;a<r.length;a+=1)n[a]=rd(ed(i,r,a));const s=a=>ce(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Re()},l(a){for(let l=0;l<n.length;l+=1)n[l].l(a);e=Re()},m(a,l){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,l);C(a,e,l),t=!0},p(a,l){if(l&278){r=Ge(a[8]);let o;for(o=0;o<r.length;o+=1){const u=ed(a,r,o);n[o]?(n[o].p(u,l),se(n[o],1)):(n[o]=rd(u),n[o].c(),se(n[o],1),n[o].m(e.parentNode,e))}for(ut(),o=r.length;o<n.length;o+=1)s(o);ft()}},i(a){if(!t){for(let l=0;l<r.length;l+=1)se(n[l]);t=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)ce(n[l]);t=!1},d(a){a&&v(e),Dt(n,a)}}}function rd(i){let e,t;return e=new ro({props:{tree:i[17],expanded_nodes:i[1],selected_node:i[2],first_node:!1,label_func:i[4]}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n&256&&(s.tree=r[17]),n&2&&(s.expanded_nodes=r[1]),n&4&&(s.selected_node=r[2]),n&16&&(s.label_func=r[4]),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function j3(i){let e,t,r,n,s;const a=[U3,L3],l=[];function o(u,f){return u[8]?0:1}return r=o(i),n=l[r]=a[r](i),{c(){e=K("ul"),t=K("li"),n.c(),this.h()},l(u){e=Z(u,"UL",{style:!0,class:!0});var f=Ce(e);t=Z(f,"LI",{});var p=Ce(t);n.l(p),p.forEach(v),f.forEach(v),this.h()},h(){wt(e,"--first-node",i[3]?"0rem":"0.6rem"),re(e,"class","svelte-1t0ebq3")},m(u,f){C(u,e,f),z(e,t),l[r].m(t,null),s=!0},p(u,[f]){let p=r;r=o(u),r===p?l[r].p(u,f):(ut(),ce(l[p],1,1,()=>{l[p]=null}),ft(),n=l[r],n?n.p(u,f):(n=l[r]=a[r](u),n.c()),se(n,1),n.m(t,null)),(!s||f&8)&&wt(e,"--first-node",u[3]?"0rem":"0.6rem")},i(u){s||(se(n),s=!0)},o(u){ce(n),s=!1},d(u){u&&v(e),l[r].d()}}}function q3(i,e,t){let r,n,s,a,l=Me,o=()=>(l(),l=zr(h,L=>t(9,a=L)),h),u,f=Me,p=()=>(f(),f=zr(c,L=>t(16,u=L)),c);i.$$.on_destroy.push(()=>l()),i.$$.on_destroy.push(()=>f());let{tree:d}=e,{expanded_nodes:c}=e;p();let{selected_node:h}=e;o();let{first_node:_=!0}=e,{label_func:m}=e,y=u[r]||!1;function F(L,P){t(5,y=!y),_t(h,a=P,a)}function T(L,P){_t(h,a=P,a)}const N=L=>F(L,d),b=L=>Ci(L,F,d),k=L=>T(L,d),A=L=>Ci(L,T,d);return i.$$set=L=>{"tree"in L&&t(0,d=L.tree),"expanded_nodes"in L&&p(t(1,c=L.expanded_nodes)),"selected_node"in L&&o(t(2,h=L.selected_node)),"first_node"in L&&t(3,_=L.first_node),"label_func"in L&&t(4,m=L.label_func)},i.$$.update=()=>{i.$$.dirty&17&&t(7,r=m(d)),i.$$.dirty&1&&t(8,n=d.children),i.$$.dirty&32&&t(6,s=y)},[d,c,h,_,m,y,s,r,n,a,F,T,N,b,k,A]}class ro extends gt{constructor(e){super(),bt(this,e,q3,j3,nt,{tree:0,expanded_nodes:1,selected_node:2,first_node:3,label_func:4})}}function nd(i,e,t){const r=i.slice();return r[10]=e[t],r}function id(i){let e,t;return e=new ro({props:{tree:i[10],expanded_nodes:i[4],selected_node:i[5],select_item:i[2],label_func:V3}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n&8&&(s.tree=r[10]),n&4&&(s.select_item=r[2]),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function M3(i){let e,t,r=Ge(i[3]),n=[];for(let a=0;a<r.length;a+=1)n[a]=id(nd(i,r,a));const s=a=>ce(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Re()},l(a){for(let l=0;l<n.length;l+=1)n[l].l(a);e=Re()},m(a,l){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,l);C(a,e,l),t=!0},p(a,[l]){if(l&60){r=Ge(a[3]);let o;for(o=0;o<r.length;o+=1){const u=nd(a,r,o);n[o]?(n[o].p(u,l),se(n[o],1)):(n[o]=id(u),n[o].c(),se(n[o],1),n[o].m(e.parentNode,e))}for(ut(),o=r.length;o<n.length;o+=1)s(o);ft()}},i(a){if(!t){for(let l=0;l<r.length;l+=1)se(n[l]);t=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)ce(n[l]);t=!1},d(a){a&&v(e),Dt(n,a)}}}function V3(i){var e;return((e=i==null?void 0:i["rdfs:label"])==null?void 0:e[0])??i["@id"]}function z3(i,e,t){let r,n,s=Me,a=()=>(s(),s=zr(p,y=>t(7,n=y)),p),l,o=Me,u=()=>(o(),o=zr(f,y=>t(8,l=y)),f);i.$$.on_destroy.push(()=>s()),i.$$.on_destroy.push(()=>o());let{list:f}=e;u();let{filter_value_store:p}=e;a();let{select_item:d}=e,{regex_search_keys:c=["rdfs:label","@id"]}=e,h=[];const _=cr({}),m=cr(null);return tt(i,m,y=>t(9,r=y)),ss(()=>{r&&d(null,r,"d3f_property")}),i.$$set=y=>{"list"in y&&u(t(0,f=y.list)),"filter_value_store"in y&&a(t(1,p=y.filter_value_store)),"select_item"in y&&t(2,d=y.select_item),"regex_search_keys"in y&&t(6,c=y.regex_search_keys)},i.$$.update=()=>{i.$$.dirty&448&&t(3,h=Ah(l.associated,n,c))},[f,p,d,h,_,m,c,n,l]}class H3 extends gt{constructor(e){super(),bt(this,e,z3,M3,nt,{list:0,filter_value_store:1,select_item:2,regex_search_keys:6})}}function ad(i,e,t){const r=i.slice();return r[10]=e[t],r}function sd(i){let e,t;return e=new ro({props:{tree:i[10],expanded_nodes:i[4],selected_node:i[5],select_item:i[2],label_func:X3}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n&8&&(s.tree=r[10]),n&4&&(s.select_item=r[2]),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function x3(i){let e,t,r=Ge(i[3]),n=[];for(let a=0;a<r.length;a+=1)n[a]=sd(ad(i,r,a));const s=a=>ce(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Re()},l(a){for(let l=0;l<n.length;l+=1)n[l].l(a);e=Re()},m(a,l){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,l);C(a,e,l),t=!0},p(a,[l]){if(l&60){r=Ge(a[3]);let o;for(o=0;o<r.length;o+=1){const u=ad(a,r,o);n[o]?(n[o].p(u,l),se(n[o],1)):(n[o]=sd(u),n[o].c(),se(n[o],1),n[o].m(e.parentNode,e))}for(ut(),o=r.length;o<n.length;o+=1)s(o);ft()}},i(a){if(!t){for(let l=0;l<r.length;l+=1)se(n[l]);t=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)ce(n[l]);t=!1},d(a){a&&v(e),Dt(n,a)}}}function X3(i){return(i==null?void 0:i["rdfs:label"])??i["@id"]}function G3(i,e,t){let r,n,s=Me,a=()=>(s(),s=zr(p,y=>t(7,n=y)),p),l,o=Me,u=()=>(o(),o=zr(f,y=>t(8,l=y)),f);i.$$.on_destroy.push(()=>s()),i.$$.on_destroy.push(()=>o());let{list:f}=e;u();let{filter_value_store:p}=e;a();let{select_item:d}=e,{regex_search_keys:c=["rdfs:label","@id"]}=e,h=[];const _=cr({}),m=cr(null);return tt(i,m,y=>t(9,r=y)),ss(()=>{r&&d(null,r)}),i.$$set=y=>{"list"in y&&u(t(0,f=y.list)),"filter_value_store"in y&&a(t(1,p=y.filter_value_store)),"select_item"in y&&t(2,d=y.select_item),"regex_search_keys"in y&&t(6,c=y.regex_search_keys)},i.$$.update=()=>{i.$$.dirty&448&&t(3,h=Ah(l,n,c))},[f,p,d,h,_,m,c,n,l]}class Q3 extends gt{constructor(e){super(),bt(this,e,G3,x3,nt,{list:0,filter_value_store:1,select_item:2,regex_search_keys:6})}}const $3=i=>({}),ld=i=>({R:i[6],filter_value_store:i[4],select_item:i[9]});function od(i){let e,t,r,n,s,a,l;const o=i[18].default,u=Vt(o,i,i[17],ld);return{c(){e=K("ul"),t=K("input"),r=oe(),u&&u.c(),this.h()},l(f){e=Z(f,"UL",{id:!0,class:!0});var p=Ce(e);t=Z(p,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0,class:!0}),r=ue(p),u&&u.l(p),p.forEach(v),this.h()},h(){re(t,"type","text"),re(t,"id","filter"),re(t,"name","filter"),re(t,"placeholder","Filter / Save"),re(t,"class","svelte-155p9qt"),re(e,"id","d3fend-container"),re(e,"class","dropdown-menu svelte-155p9qt")},m(f,p){C(f,e,p),z(e,t),z(e,r),u&&u.m(e,null),s=!0,a||(l=[Bo(Fm.call(null,t)),ye(t,"click",Wt(i[19])),ye(t,"keyup",Wt(i[20])),ye(t,"keydown",Wt(i[21])),Bo(Om.call(null,e)),ye(e,"outsideclick",i[7])],a=!0)},p(f,p){u&&u.p&&(!s||p&131072)&&zt(u,o,f,f[17],s?xt(o,f[17],p,$3):Ht(f[17]),ld)},i(f){s||(se(u,f),f&&rl(()=>{s&&(n||(n=qo(e,Wo,{delay:50,duration:200,axis:"y"},!0)),n.run(1))}),s=!0)},o(f){ce(u,f),f&&(n||(n=qo(e,Wo,{delay:50,duration:200,axis:"y"},!1)),n.run(0)),s=!1},d(f){f&&v(e),u&&u.d(f),f&&n&&n.end(),a=!1,mt(l)}}}function W3(i){let e,t,r,n,s,a,l,o,u,f,p=i[2]&&od(i);return{c(){e=K("div"),t=K("div"),r=K("div"),n=K("span"),s=q(i[1]),a=oe(),p&&p.c(),this.h()},l(d){e=Z(d,"DIV",{class:!0,style:!0});var c=Ce(e);t=Z(c,"DIV",{class:!0,role:!0,tabindex:!0});var h=Ce(t);r=Z(h,"DIV",{class:!0});var _=Ce(r);n=Z(_,"SPAN",{class:!0});var m=Ce(n);s=M(m,i[1]),m.forEach(v),_.forEach(v),a=ue(h),p&&p.l(h),h.forEach(v),c.forEach(v),this.h()},h(){re(n,"class","selected svelte-155p9qt"),re(r,"class","select autocomplete-dropdown svelte-155p9qt"),re(t,"class",l="dropdown "+(i[2]?"active":"")+" svelte-155p9qt"),re(t,"role","button"),re(t,"tabindex","0"),re(e,"class","container svelte-155p9qt"),wt(e,"--input-color",i[0])},m(d,c){C(d,e,c),z(e,t),z(t,r),z(r,n),z(n,s),z(t,a),p&&p.m(t,null),o=!0,u||(f=[ye(t,"click",i[8]),ye(t,"keydown",i[22])],u=!0)},p(d,[c]){(!o||c&2)&&we(s,d[1]),d[2]?p?(p.p(d,c),c&4&&se(p,1)):(p=od(d),p.c(),se(p,1),p.m(t,null)):p&&(ut(),ce(p,1,1,()=>{p=null}),ft()),(!o||c&4&&l!==(l="dropdown "+(d[2]?"active":"")+" svelte-155p9qt"))&&re(t,"class",l),(!o||c&1)&&wt(e,"--input-color",d[0])},i(d){o||(se(p),o=!0)},o(d){ce(p),o=!1},d(d){d&&v(e),p&&p.d(),u=!1,mt(f)}}}function Y3(i,e,t){let r,n,s,a,{$$slots:l={},$$scope:o}=e,{node_id:u}=e,{element_id:f}=e,{input_color:p="white"}=e,{place_holder:d="< d3fend class >"}=e,{flow_store_hook:c=Qr}=e,{data_save_key:h="d3f_class"}=e;const _=cr(!1);tt(i,_,w=>t(2,a=w));const m=cr(null);tt(i,m,w=>t(24,n=w));const y=c();tt(i,y,w=>t(25,s=w));const F={ItemTactic:B3,ItemList:R3,ItemProperty:H3,ItemInformation:Q3};let T;ss(()=>{_t(m,n="",n)});function N(){_t(_,a=!1,a),_t(m,n="",n)}function b(w){a?N():_t(_,a=!0,a)}function k(w,S,X="d3f_class"){let j=S["rdfs:label"];Array.isArray(S["rdfs:label"])&&(j=S["rdfs:label"][0]),s.forEach(ne=>{ne.id===u&&(ne.data=Object.assign(Object.assign({},ne.data),{[X]:S["@id"],label:j}))}),y.set(s),N()}function A(w){clearTimeout(T),T=setTimeout(()=>{_t(m,n=w.target.value,n)},400)}function L(w){const S=w.target.value;k(w,{"rdfs:label":S,"@id":S},h)}function P(w){Fr.call(this,i,w)}const B=w=>A(w),D=w=>Ci(w,L),R=w=>Ci(w,b);return i.$$set=w=>{"node_id"in w&&t(12,u=w.node_id),"element_id"in w&&t(13,f=w.element_id),"input_color"in w&&t(0,p=w.input_color),"place_holder"in w&&t(14,d=w.place_holder),"flow_store_hook"in w&&t(15,c=w.flow_store_hook),"data_save_key"in w&&t(16,h=w.data_save_key),"$$scope"in w&&t(17,o=w.$$scope)},i.$$.update=()=>{i.$$.dirty&24576&&t(1,r=f||d)},[p,r,a,_,m,y,F,N,b,k,A,L,u,f,d,c,h,o,l,P,B,D,R]}class di extends gt{constructor(e){super(),bt(this,e,Y3,W3,nt,{node_id:12,element_id:13,input_color:0,place_holder:14,flow_store_hook:15,data_save_key:16})}}function ud(i,e,t){const r=i.slice();return r[33]=e[t],r[34]=e,r[35]=t,r}function fd(i){let e,t;return e=new yt({props:{type:"target",class:"customHandle",position:ht.Left,id:"target",style:i[17](),isConnectableStart:!1,isConnectable:i[2]}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n[0]&4&&(s.isConnectable=r[2]),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function cd(i){let e=i[7],t,r,n=dd(i);return{c(){n.c(),t=Re()},l(s){n.l(s),t=Re()},m(s,a){n.m(s,a),C(s,t,a),r=!0},p(s,a){a[0]&128&&nt(e,e=s[7])?(ut(),ce(n,1,1,Me),ft(),n=dd(s),n.c(),se(n,1),n.m(t.parentNode,t)):n.p(s,a)},i(s){r||(se(n),r=!0)},o(s){ce(n),r=!1},d(s){s&&v(t),n.d(s)}}}function dd(i){let e,t,r,n,s,a,l,o;return e=new yt({props:{type:"source",position:ht.Top,id:"source",style:i[18](),isConnectable:i[2]}}),r=new yt({props:{type:"source",position:ht.Left,id:"source",style:i[18](),isConnectable:i[2]}}),s=new yt({props:{type:"source",position:ht.Right,id:"source",style:i[18](),isConnectable:i[2]}}),l=new yt({props:{type:"source",position:ht.Bottom,id:"source",style:i[18](),isConnectable:i[2]}}),{c(){Oe(e.$$.fragment),t=oe(),Oe(r.$$.fragment),n=oe(),Oe(s.$$.fragment),a=oe(),Oe(l.$$.fragment)},l(u){Be(e.$$.fragment,u),t=ue(u),Be(r.$$.fragment,u),n=ue(u),Be(s.$$.fragment,u),a=ue(u),Be(l.$$.fragment,u)},m(u,f){Le(e,u,f),C(u,t,f),Le(r,u,f),C(u,n,f),Le(s,u,f),C(u,a,f),Le(l,u,f),o=!0},p(u,f){const p={};f[0]&4&&(p.isConnectable=u[2]),e.$set(p);const d={};f[0]&4&&(d.isConnectable=u[2]),r.$set(d);const c={};f[0]&4&&(c.isConnectable=u[2]),s.$set(c);const h={};f[0]&4&&(h.isConnectable=u[2]),l.$set(h)},i(u){o||(se(e.$$.fragment,u),se(r.$$.fragment,u),se(s.$$.fragment,u),se(l.$$.fragment,u),o=!0)},o(u){ce(e.$$.fragment,u),ce(r.$$.fragment,u),ce(s.$$.fragment,u),ce(l.$$.fragment,u),o=!1},d(u){u&&(v(t),v(n),v(a)),Ue(e,u),Ue(r,u),Ue(s,u),Ue(l,u)}}}function J3(i){let e,t;return e=new i[36].ItemList({props:{list:Sh,filter_value_store:i[37],select_item:i[38]}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n[1]&64&&(s.filter_value_store=r[37]),n[1]&128&&(s.select_item=r[38]),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function hd(i){let e,t=Ge(i[0].user_properties),r=[];for(let n=0;n<t.length;n+=1)r[n]=pd(ud(i,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=Re()},l(n){for(let s=0;s<r.length;s+=1)r[s].l(n);e=Re()},m(n,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,s);C(n,e,s)},p(n,s){if(s[0]&801){t=Ge(n[0].user_properties);let a;for(a=0;a<t.length;a+=1){const l=ud(n,t,a);r[a]?r[a].p(l,s):(r[a]=pd(l),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},d(n){n&&v(e),Dt(r,n)}}}function pd(i){let e,t,r,n,s,a,l,o,u;function f(...h){return i[28](i[35],...h)}function p(){i[29].call(r,i[35])}function d(...h){return i[30](i[35],...h)}function c(){i[31].call(a,i[35])}return{c(){e=K("div"),t=K("div"),r=K("input"),n=oe(),s=K("div"),a=K("input"),l=oe(),this.h()},l(h){e=Z(h,"DIV",{class:!0});var _=Ce(e);t=Z(_,"DIV",{class:!0});var m=Ce(t);r=Z(m,"INPUT",{placeholder:!0}),m.forEach(v),n=ue(_),s=Z(_,"DIV",{class:!0});var y=Ce(s);a=Z(y,"INPUT",{placeholder:!0}),y.forEach(v),l=ue(_),_.forEach(v),this.h()},h(){re(r,"placeholder","property"),re(t,"class","user-property flex-column"),re(a,"placeholder","value"),re(s,"class","user-value flex-column flex-grow-3"),re(e,"class","user-properties flex")},m(h,_){C(h,e,_),z(e,t),z(t,r),et(r,i[9][i[35]][0]),z(e,n),z(e,s),z(s,a),et(a,i[8][i[35]][1]),z(e,l),o||(u=[ye(r,"input",f),ye(r,"input",p),ye(a,"input",d),ye(a,"input",c)],o=!0)},p(h,_){i=h,_[0]&512&&r.value!==i[9][i[35]][0]&&et(r,i[9][i[35]][0]),_[0]&256&&a.value!==i[8][i[35]][1]&&et(a,i[8][i[35]][1])},d(h){h&&v(e),o=!1,mt(u)}}}function K3(i){let e=i[4].inProgress,t,r,n,s,a,l,o,u,f,p,d,c,h,_,m,y,F,T,N,b,k,A="+",L,P,B,D=fd(i),R=!i[6]&&cd(i);a=new Mn({props:{isVisible:i[3]}}),h=new di({props:{node_id:i[1],element_id:i[0].d3f_class,input_color:"#ffc3c7",$$slots:{default:[J3,({R:S,filter_value_store:X,select_item:j})=>({36:S,37:X,38:j}),({R:S,filter_value_store:X,select_item:j})=>[0,(S?32:0)|(X?64:0)|(j?128:0)]]},$$scope:{ctx:i}}});let w=i[0].user_properties&&hd(i);return{c(){D.c(),t=oe(),r=K("div"),R&&R.c(),n=oe(),s=K("div"),Oe(a.$$.fragment),l=oe(),o=K("i"),u=q(`Attack Action
        `),f=K("input"),p=oe(),d=K("br"),c=oe(),Oe(h.$$.fragment),_=oe(),m=K("div"),y=K("input"),F=oe(),T=K("br"),N=oe(),w&&w.c(),b=oe(),k=K("button"),k.textContent=A,this.h()},l(S){D.l(S),t=ue(S),r=Z(S,"DIV",{class:!0});var X=Ce(r);R&&R.l(X),n=ue(X),s=Z(X,"DIV",{class:!0});var j=Ce(s);Be(a.$$.fragment,j),l=ue(j),o=Z(j,"I",{});var ne=Ce(o);u=M(ne,`Attack Action
        `),f=Z(ne,"INPUT",{class:!0,type:!0,style:!0}),ne.forEach(v),p=ue(j),d=Z(j,"BR",{}),c=ue(j),Be(h.$$.fragment,j),_=ue(j),m=Z(j,"DIV",{});var J=Ce(m);y=Z(J,"INPUT",{class:!0,type:!0,style:!0}),J.forEach(v),F=ue(j),T=Z(j,"BR",{}),N=ue(j),w&&w.l(j),b=ue(j),k=Z(j,"BUTTON",{"data-svelte-h":!0}),Ke(k)!=="svelte-y9choq"&&(k.textContent=A),j.forEach(v),X.forEach(v),this.h()},h(){re(f,"class","nodrag sequence"),re(f,"type","text"),wt(f,"background","#ffc3c7"),re(y,"class","nodrag"),re(y,"type","text"),wt(y,"text-align","center"),wt(y,"background","#ffc3c7"),wt(y,"font-weight","bold"),re(s,"class","attack-node node-inner svelte-pkj1to"),re(r,"class","attack-node node svelte-pkj1to")},m(S,X){D.m(S,X),C(S,t,X),C(S,r,X),R&&R.m(r,null),z(r,n),z(r,s),Le(a,s,null),z(s,l),z(s,o),z(o,u),z(o,f),et(f,i[10]),z(s,p),z(s,d),z(s,c),Le(h,s,null),z(s,_),z(s,m),z(m,y),et(y,i[11]),z(s,F),z(s,T),z(s,N),w&&w.m(s,null),z(s,b),z(s,k),L=!0,P||(B=[ye(f,"input",i[24]),ye(f,"input",i[25]),ye(y,"input",i[26]),ye(y,"input",i[27]),ye(k,"click",i[12]),ye(r,"click",i[13]),ye(r,"mouseenter",i[15]),ye(r,"mouseleave",i[16])],P=!0)},p(S,X){X[0]&16&&nt(e,e=S[4].inProgress)?(ut(),ce(D,1,1,Me),ft(),D=fd(S),D.c(),se(D,1),D.m(t.parentNode,t)):D.p(S,X),S[6]?R&&(ut(),ce(R,1,1,()=>{R=null}),ft()):R?(R.p(S,X),X[0]&64&&se(R,1)):(R=cd(S),R.c(),se(R,1),R.m(r,n));const j={};X[0]&8&&(j.isVisible=S[3]),a.$set(j),X[0]&1024&&f.value!==S[10]&&et(f,S[10]);const ne={};X[0]&2&&(ne.node_id=S[1]),X[0]&1&&(ne.element_id=S[0].d3f_class),X[1]&448&&(ne.$$scope={dirty:X,ctx:S}),h.$set(ne),X[0]&2048&&y.value!==S[11]&&et(y,S[11]),S[0].user_properties?w?w.p(S,X):(w=hd(S),w.c(),w.m(s,b)):w&&(w.d(1),w=null)},i(S){L||(se(D),se(R),se(a.$$.fragment,S),se(h.$$.fragment,S),L=!0)},o(S){ce(D),ce(R),ce(a.$$.fragment,S),ce(h.$$.fragment,S),L=!1},d(S){S&&(v(t),v(r)),D.d(S),R&&R.d(),Ue(a),Ue(h),w&&w.d(),P=!1,mt(B)}}}function Z3(i,e,t){let r,n,s,a,l,o,u;tt(i,Nr,x=>t(32,o=x)),tt(i,ot,x=>t(5,u=x));var f,p,d,c,h;let{id:_}=e,{data:m}=e,{isConnectable:y}=e,{selected:F=void 0}=e;function T(){N(),m.user_properties.push(["",""])}function N(){for(let x=0;x<o.length;x++)o[x].data==m&&_t(ot,u=o[x],u)}const b=Cn();tt(i,b,x=>t(4,l=x));let k=!1,A=!1;function L(){t(7,A=!0)}function P(){t(7,A=!1)}function B(){return l.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function D(){return A?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const R=x=>{t(0,m.sequence=x.currentTarget.value,m),_t(ot,u.data.sequence=m.sequence,u)};function w(){n=this.value,t(10,n),t(0,m),t(5,u),t(1,_),t(20,p)}const S=x=>{t(0,m.label=x.currentTarget.value,m),_t(ot,u.data.label=m.label,u)};function X(){r=this.value,t(11,r),t(0,m),t(5,u),t(1,_),t(19,f)}const j=(x,G)=>{t(0,m.user_properties[x][0]=G.currentTarget.value,m),_t(ot,u.data.user_properties[x][0]=G.currentTarget.value,u)};function ne(x){s[x][0]=this.value,t(9,s),t(0,m),t(5,u),t(1,_),t(21,d)}const J=(x,G)=>{t(0,m.user_properties[x][1]=G.currentTarget.value,m),_t(ot,u.data.user_properties[x][1]=G.currentTarget.value,u)};function W(x){a[x][1]=this.value,t(8,a),t(0,m),t(5,u),t(1,_),t(22,c)}return i.$$set=x=>{"id"in x&&t(1,_=x.id),"data"in x&&t(0,m=x.data),"isConnectable"in x&&t(2,y=x.isConnectable),"selected"in x&&t(3,F=x.selected)},i.$$.update=()=>{i.$$.dirty[0]&524323&&t(11,r=(m==null?void 0:m.label)||((u==null?void 0:u.id)==_?t(19,f=u==null?void 0:u.data)===null||f===void 0?void 0:f.label:"")||"< label >"),i.$$.dirty[0]&1048611&&t(10,n=(m==null?void 0:m.sequence)||((u==null?void 0:u.id)==_?t(20,p=u==null?void 0:u.data)===null||p===void 0?void 0:p.sequence:"")||"#"),i.$$.dirty[0]&2097187&&t(9,s=(m==null?void 0:m.user_properties)||((u==null?void 0:u.id)==_?t(21,d=u==null?void 0:u.data)===null||d===void 0?void 0:d.user_properties:"")||"< Property >"),i.$$.dirty[0]&4194339&&t(8,a=(m==null?void 0:m.user_properties)||((u==null?void 0:u.id)==_?t(22,c=u==null?void 0:u.data)===null||c===void 0?void 0:c.user_properties:"")||"< Value >"),i.$$.dirty[0]&8388626&&t(6,k=(t(23,h=l.toHandle)===null||h===void 0?void 0:h.nodeId)==_)},[m,_,y,F,l,u,k,A,a,s,n,r,T,N,b,L,P,B,D,f,p,d,c,h,R,w,S,X,j,ne,J,W]}class eE extends gt{constructor(e){super(),bt(this,e,Z3,K3,nt,{id:1,data:0,isConnectable:2,selected:3},null,[-1,-1])}}function _d(i,e,t){const r=i.slice();return r[29]=e[t],r[30]=e,r[31]=t,r}function md(i){let e,t;return e=new yt({props:{type:"target",class:"customHandle",position:ht.Left,id:"target",style:i[16](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n[0]&2&&(s.isConnectable=r[1]),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function vd(i){let e=i[7],t,r,n=gd(i);return{c(){n.c(),t=Re()},l(s){n.l(s),t=Re()},m(s,a){n.m(s,a),C(s,t,a),r=!0},p(s,a){a[0]&128&&nt(e,e=s[7])?(ut(),ce(n,1,1,Me),ft(),n=gd(s),n.c(),se(n,1),n.m(t.parentNode,t)):n.p(s,a)},i(s){r||(se(n),r=!0)},o(s){ce(n),r=!1},d(s){s&&v(t),n.d(s)}}}function gd(i){let e,t,r,n,s,a,l,o;return e=new yt({props:{type:"source",position:ht.Top,id:"source",style:i[17](),isConnectable:i[1]}}),r=new yt({props:{type:"source",position:ht.Left,id:"source",style:i[17](),isConnectable:i[1]}}),s=new yt({props:{type:"source",position:ht.Right,id:"source",style:i[17](),isConnectable:i[1]}}),l=new yt({props:{type:"source",position:ht.Bottom,id:"source",style:i[17](),isConnectable:i[1]}}),{c(){Oe(e.$$.fragment),t=oe(),Oe(r.$$.fragment),n=oe(),Oe(s.$$.fragment),a=oe(),Oe(l.$$.fragment)},l(u){Be(e.$$.fragment,u),t=ue(u),Be(r.$$.fragment,u),n=ue(u),Be(s.$$.fragment,u),a=ue(u),Be(l.$$.fragment,u)},m(u,f){Le(e,u,f),C(u,t,f),Le(r,u,f),C(u,n,f),Le(s,u,f),C(u,a,f),Le(l,u,f),o=!0},p(u,f){const p={};f[0]&2&&(p.isConnectable=u[1]),e.$set(p);const d={};f[0]&2&&(d.isConnectable=u[1]),r.$set(d);const c={};f[0]&2&&(c.isConnectable=u[1]),s.$set(c);const h={};f[0]&2&&(h.isConnectable=u[1]),l.$set(h)},i(u){o||(se(e.$$.fragment,u),se(r.$$.fragment,u),se(s.$$.fragment,u),se(l.$$.fragment,u),o=!0)},o(u){ce(e.$$.fragment,u),ce(r.$$.fragment,u),ce(s.$$.fragment,u),ce(l.$$.fragment,u),o=!1},d(u){u&&(v(t),v(n),v(a)),Ue(e,u),Ue(r,u),Ue(s,u),Ue(l,u)}}}function tE(i){let e,t;return e=new i[32].ItemList({props:{list:Ph,filter_value_store:i[33],select_item:i[34]}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n[1]&4&&(s.filter_value_store=r[33]),n[1]&8&&(s.select_item=r[34]),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function bd(i){let e,t=Ge(i[0].user_properties),r=[];for(let n=0;n<t.length;n+=1)r[n]=wd(_d(i,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=Re()},l(n){for(let s=0;s<r.length;s+=1)r[s].l(n);e=Re()},m(n,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,s);C(n,e,s)},p(n,s){if(s[0]&801){t=Ge(n[0].user_properties);let a;for(a=0;a<t.length;a+=1){const l=_d(n,t,a);r[a]?r[a].p(l,s):(r[a]=wd(l),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},d(n){n&&v(e),Dt(r,n)}}}function wd(i){let e,t,r,n,s,a,l,o,u;function f(...h){return i[24](i[31],...h)}function p(){i[25].call(r,i[31])}function d(...h){return i[26](i[31],...h)}function c(){i[27].call(a,i[31])}return{c(){e=K("div"),t=K("div"),r=K("input"),n=oe(),s=K("div"),a=K("input"),l=oe(),this.h()},l(h){e=Z(h,"DIV",{class:!0});var _=Ce(e);t=Z(_,"DIV",{class:!0});var m=Ce(t);r=Z(m,"INPUT",{placeholder:!0}),m.forEach(v),n=ue(_),s=Z(_,"DIV",{class:!0});var y=Ce(s);a=Z(y,"INPUT",{placeholder:!0}),y.forEach(v),l=ue(_),_.forEach(v),this.h()},h(){re(r,"placeholder","property"),re(t,"class","user-property flex-column"),re(a,"placeholder","value"),re(s,"class","user-value flex-column flex-grow-3"),re(e,"class","user-properties flex")},m(h,_){C(h,e,_),z(e,t),z(t,r),et(r,i[9][i[31]][0]),z(e,n),z(e,s),z(s,a),et(a,i[8][i[31]][1]),z(e,l),o||(u=[ye(r,"input",f),ye(r,"input",p),ye(a,"input",d),ye(a,"input",c)],o=!0)},p(h,_){i=h,_[0]&512&&r.value!==i[9][i[31]][0]&&et(r,i[9][i[31]][0]),_[0]&256&&a.value!==i[8][i[31]][1]&&et(a,i[8][i[31]][1])},d(h){h&&v(e),o=!1,mt(u)}}}function rE(i){let e=i[4].inProgress,t,r,n,s,a,l,o,u="Vulnerability",f,p,d,c,h,_,m,y,F,T,N,b="+",k,A,L,P=md(i),B=!i[6]&&vd(i);a=new Mn({props:{isVisible:i[2]}}),h=new di({props:{node_id:i[3],element_id:i[0].d3f_class,input_color:"#f9d999",place_holder:"< weakness >",$$slots:{default:[tE,({R,filter_value_store:w,select_item:S})=>({32:R,33:w,34:S}),({R,filter_value_store:w,select_item:S})=>[0,(R?2:0)|(w?4:0)|(S?8:0)]]},$$scope:{ctx:i}}});let D=i[0].user_properties&&bd(i);return{c(){P.c(),t=oe(),r=K("div"),B&&B.c(),n=oe(),s=K("div"),Oe(a.$$.fragment),l=oe(),o=K("i"),o.textContent=u,f=oe(),p=K("br"),d=oe(),c=K("div"),Oe(h.$$.fragment),_=oe(),m=K("div"),y=K("input"),F=oe(),D&&D.c(),T=oe(),N=K("button"),N.textContent=b,this.h()},l(R){P.l(R),t=ue(R),r=Z(R,"DIV",{class:!0});var w=Ce(r);B&&B.l(w),n=ue(w),s=Z(w,"DIV",{class:!0});var S=Ce(s);Be(a.$$.fragment,S),l=ue(S),o=Z(S,"I",{"data-svelte-h":!0}),Ke(o)!=="svelte-qgxj0w"&&(o.textContent=u),f=ue(S),p=Z(S,"BR",{}),d=ue(S),c=Z(S,"DIV",{});var X=Ce(c);Be(h.$$.fragment,X),X.forEach(v),_=ue(S),m=Z(S,"DIV",{});var j=Ce(m);y=Z(j,"INPUT",{class:!0,type:!0,style:!0}),F=ue(j),D&&D.l(j),T=ue(j),N=Z(j,"BUTTON",{"data-svelte-h":!0}),Ke(N)!=="svelte-y9choq"&&(N.textContent=b),j.forEach(v),S.forEach(v),w.forEach(v),this.h()},h(){re(y,"class","nodrag label"),re(y,"type","text"),wt(y,"background","#f9d999"),re(s,"class","vulnerability node-inner svelte-17a4qd7"),re(r,"class","vulnerability node svelte-17a4qd7")},m(R,w){P.m(R,w),C(R,t,w),C(R,r,w),B&&B.m(r,null),z(r,n),z(r,s),Le(a,s,null),z(s,l),z(s,o),z(s,f),z(s,p),z(s,d),z(s,c),Le(h,c,null),z(s,_),z(s,m),z(m,y),et(y,i[10]),z(m,F),D&&D.m(m,null),z(m,T),z(m,N),k=!0,A||(L=[ye(y,"input",i[22]),ye(y,"input",i[23]),ye(N,"click",i[11]),ye(r,"click",i[12]),ye(r,"mouseenter",i[14]),ye(r,"mouseleave",i[15])],A=!0)},p(R,w){w[0]&16&&nt(e,e=R[4].inProgress)?(ut(),ce(P,1,1,Me),ft(),P=md(R),P.c(),se(P,1),P.m(t.parentNode,t)):P.p(R,w),R[6]?B&&(ut(),ce(B,1,1,()=>{B=null}),ft()):B?(B.p(R,w),w[0]&64&&se(B,1)):(B=vd(R),B.c(),se(B,1),B.m(r,n));const S={};w[0]&4&&(S.isVisible=R[2]),a.$set(S);const X={};w[0]&8&&(X.node_id=R[3]),w[0]&1&&(X.element_id=R[0].d3f_class),w[1]&28&&(X.$$scope={dirty:w,ctx:R}),h.$set(X),w[0]&1024&&y.value!==R[10]&&et(y,R[10]),R[0].user_properties?D?D.p(R,w):(D=bd(R),D.c(),D.m(m,T)):D&&(D.d(1),D=null)},i(R){k||(se(P),se(B),se(a.$$.fragment,R),se(h.$$.fragment,R),k=!0)},o(R){ce(P),ce(B),ce(a.$$.fragment,R),ce(h.$$.fragment,R),k=!1},d(R){R&&(v(t),v(r)),P.d(R),B&&B.d(),Ue(a),Ue(h),D&&D.d(),A=!1,mt(L)}}}function nE(i,e,t){let r,n,s,a,l,o;tt(i,Nr,j=>t(28,l=j)),tt(i,ot,j=>t(5,o=j));var u,f,p,d;let{data:c}=e,{isConnectable:h}=e,{selected:_=void 0}=e,{id:m}=e;function y(){F(),c.user_properties.push(["",""])}function F(){for(let j=0;j<l.length;j++)l[j].data==c&&_t(ot,o=l[j],o)}const T=Cn();tt(i,T,j=>t(4,a=j));let N=!1,b=!1;function k(){t(7,b=!0)}function A(){t(7,b=!1)}function L(){return a.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function P(){return b?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const B=j=>{t(0,c.label=j.currentTarget.value,c),_t(ot,o.data.label=c.label,o)};function D(){r=this.value,t(10,r),t(0,c),t(5,o),t(3,m),t(18,u)}const R=(j,ne)=>{t(0,c.user_properties[j][0]=ne.currentTarget.value,c),_t(ot,o.data.user_properties[j][0]=ne.currentTarget.value,o)};function w(j){n[j][0]=this.value,t(9,n),t(0,c),t(5,o),t(3,m),t(19,f)}const S=(j,ne)=>{t(0,c.user_properties[j][1]=ne.currentTarget.value,c),_t(ot,o.data.user_properties[j][1]=ne.currentTarget.value,o)};function X(j){s[j][1]=this.value,t(8,s),t(0,c),t(5,o),t(3,m),t(20,p)}return i.$$set=j=>{"data"in j&&t(0,c=j.data),"isConnectable"in j&&t(1,h=j.isConnectable),"selected"in j&&t(2,_=j.selected),"id"in j&&t(3,m=j.id)},i.$$.update=()=>{i.$$.dirty[0]&262185&&t(10,r=(c==null?void 0:c.label)||((o==null?void 0:o.id)==m?t(18,u=o==null?void 0:o.data)===null||u===void 0?void 0:u.label:"")||"< label >"),i.$$.dirty[0]&524329&&t(9,n=(c==null?void 0:c.user_properties)||((o==null?void 0:o.id)==m?t(19,f=o==null?void 0:o.data)===null||f===void 0?void 0:f.user_properties:"")||"< Property >"),i.$$.dirty[0]&1048617&&t(8,s=(c==null?void 0:c.user_properties)||((o==null?void 0:o.id)==m?t(20,p=o==null?void 0:o.data)===null||p===void 0?void 0:p.user_properties:"")||"< Value >"),i.$$.dirty[0]&2097176&&t(6,N=(t(21,d=a.toHandle)===null||d===void 0?void 0:d.nodeId)==m)},[c,h,_,m,a,o,N,b,s,n,r,y,F,T,k,A,L,P,u,f,p,d,B,D,R,w,S,X]}class iE extends gt{constructor(e){super(),bt(this,e,nE,rE,nt,{data:0,isConnectable:1,selected:2,id:3},null,[-1,-1])}}function yd(i,e,t){const r=i.slice();return r[29]=e[t],r[30]=e,r[31]=t,r}function Ed(i){let e,t;return e=new yt({props:{type:"target",class:"customHandle",position:ht.Left,id:"target",style:i[16](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n[0]&2&&(s.isConnectable=r[1]),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function Dd(i){let e=i[7],t,r,n=kd(i);return{c(){n.c(),t=Re()},l(s){n.l(s),t=Re()},m(s,a){n.m(s,a),C(s,t,a),r=!0},p(s,a){a[0]&128&&nt(e,e=s[7])?(ut(),ce(n,1,1,Me),ft(),n=kd(s),n.c(),se(n,1),n.m(t.parentNode,t)):n.p(s,a)},i(s){r||(se(n),r=!0)},o(s){ce(n),r=!1},d(s){s&&v(t),n.d(s)}}}function kd(i){let e,t,r,n,s,a,l,o;return e=new yt({props:{type:"source",position:ht.Top,id:"source",style:i[17](),isConnectable:i[1]}}),r=new yt({props:{type:"source",position:ht.Left,id:"source",style:i[17](),isConnectable:i[1]}}),s=new yt({props:{type:"source",position:ht.Right,id:"source",style:i[17](),isConnectable:i[1]}}),l=new yt({props:{type:"source",position:ht.Bottom,id:"source",style:i[17](),isConnectable:i[1]}}),{c(){Oe(e.$$.fragment),t=oe(),Oe(r.$$.fragment),n=oe(),Oe(s.$$.fragment),a=oe(),Oe(l.$$.fragment)},l(u){Be(e.$$.fragment,u),t=ue(u),Be(r.$$.fragment,u),n=ue(u),Be(s.$$.fragment,u),a=ue(u),Be(l.$$.fragment,u)},m(u,f){Le(e,u,f),C(u,t,f),Le(r,u,f),C(u,n,f),Le(s,u,f),C(u,a,f),Le(l,u,f),o=!0},p(u,f){const p={};f[0]&2&&(p.isConnectable=u[1]),e.$set(p);const d={};f[0]&2&&(d.isConnectable=u[1]),r.$set(d);const c={};f[0]&2&&(c.isConnectable=u[1]),s.$set(c);const h={};f[0]&2&&(h.isConnectable=u[1]),l.$set(h)},i(u){o||(se(e.$$.fragment,u),se(r.$$.fragment,u),se(s.$$.fragment,u),se(l.$$.fragment,u),o=!0)},o(u){ce(e.$$.fragment,u),ce(r.$$.fragment,u),ce(s.$$.fragment,u),ce(l.$$.fragment,u),o=!1},d(u){u&&(v(t),v(n),v(a)),Ue(e,u),Ue(r,u),Ue(s,u),Ue(l,u)}}}function aE(i){let e,t;return e=new i[32].ItemList({props:{list:Nh,filter_value_store:i[33],select_item:i[34]}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n[1]&4&&(s.filter_value_store=r[33]),n[1]&8&&(s.select_item=r[34]),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function Ad(i){let e,t=Ge(i[0].user_properties),r=[];for(let n=0;n<t.length;n+=1)r[n]=Cd(yd(i,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=Re()},l(n){for(let s=0;s<r.length;s+=1)r[s].l(n);e=Re()},m(n,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,s);C(n,e,s)},p(n,s){if(s[0]&801){t=Ge(n[0].user_properties);let a;for(a=0;a<t.length;a+=1){const l=yd(n,t,a);r[a]?r[a].p(l,s):(r[a]=Cd(l),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},d(n){n&&v(e),Dt(r,n)}}}function Cd(i){let e,t,r,n,s,a,l,o,u;function f(...h){return i[24](i[31],...h)}function p(){i[25].call(r,i[31])}function d(...h){return i[26](i[31],...h)}function c(){i[27].call(a,i[31])}return{c(){e=K("div"),t=K("div"),r=K("input"),n=oe(),s=K("div"),a=K("input"),l=oe(),this.h()},l(h){e=Z(h,"DIV",{class:!0});var _=Ce(e);t=Z(_,"DIV",{class:!0});var m=Ce(t);r=Z(m,"INPUT",{placeholder:!0}),m.forEach(v),n=ue(_),s=Z(_,"DIV",{class:!0});var y=Ce(s);a=Z(y,"INPUT",{placeholder:!0}),y.forEach(v),l=ue(_),_.forEach(v),this.h()},h(){re(r,"placeholder","property"),re(t,"class","user-property flex-column"),re(a,"placeholder","value"),re(s,"class","user-value flex-column flex-grow-3"),re(e,"class","user-properties flex")},m(h,_){C(h,e,_),z(e,t),z(t,r),et(r,i[9][i[31]][0]),z(e,n),z(e,s),z(s,a),et(a,i[8][i[31]][1]),z(e,l),o||(u=[ye(r,"input",f),ye(r,"input",p),ye(a,"input",d),ye(a,"input",c)],o=!0)},p(h,_){i=h,_[0]&512&&r.value!==i[9][i[31]][0]&&et(r,i[9][i[31]][0]),_[0]&256&&a.value!==i[8][i[31]][1]&&et(a,i[8][i[31]][1])},d(h){h&&v(e),o=!1,mt(u)}}}function sE(i){let e=i[4].inProgress,t,r,n,s,a,l="Artifact",o,u,f,p,d,c,h,_,m,y,F="+",T,N,b,k=Ed(i),A=!i[6]&&Dd(i);f=new Mn({props:{isVisible:i[2]}}),d=new di({props:{node_id:i[3],element_id:i[0].d3f_class,input_color:"#fff4dd",$$slots:{default:[aE,({R:P,filter_value_store:B,select_item:D})=>({32:P,33:B,34:D}),({R:P,filter_value_store:B,select_item:D})=>[0,(P?2:0)|(B?4:0)|(D?8:0)]]},$$scope:{ctx:i}}});let L=i[0].user_properties&&Ad(i);return{c(){k.c(),t=oe(),r=K("div"),A&&A.c(),n=oe(),s=K("div"),a=K("i"),a.textContent=l,o=K("br"),u=oe(),Oe(f.$$.fragment),p=oe(),Oe(d.$$.fragment),c=oe(),h=K("input"),_=oe(),L&&L.c(),m=oe(),y=K("button"),y.textContent=F,this.h()},l(P){k.l(P),t=ue(P),r=Z(P,"DIV",{class:!0});var B=Ce(r);A&&A.l(B),n=ue(B),s=Z(B,"DIV",{class:!0});var D=Ce(s);a=Z(D,"I",{"data-svelte-h":!0}),Ke(a)!=="svelte-148na2y"&&(a.textContent=l),o=Z(D,"BR",{}),u=ue(D),Be(f.$$.fragment,D),p=ue(D),Be(d.$$.fragment,D),c=ue(D),h=Z(D,"INPUT",{class:!0,type:!0,style:!0}),_=ue(D),L&&L.l(D),m=ue(D),y=Z(D,"BUTTON",{"data-svelte-h":!0}),Ke(y)!=="svelte-y9choq"&&(y.textContent=F),D.forEach(v),B.forEach(v),this.h()},h(){re(h,"class","nodrag label"),re(h,"type","text"),wt(h,"background","#fff4dd"),re(s,"class","node-inner"),re(r,"class","artifact node svelte-1q2d78v")},m(P,B){k.m(P,B),C(P,t,B),C(P,r,B),A&&A.m(r,null),z(r,n),z(r,s),z(s,a),z(s,o),z(s,u),Le(f,s,null),z(s,p),Le(d,s,null),z(s,c),z(s,h),et(h,i[10]),z(s,_),L&&L.m(s,null),z(s,m),z(s,y),T=!0,N||(b=[ye(h,"input",i[22]),ye(h,"input",i[23]),ye(y,"click",i[11]),ye(r,"click",i[12]),ye(r,"mouseenter",i[14]),ye(r,"mouseleave",i[15])],N=!0)},p(P,B){B[0]&16&&nt(e,e=P[4].inProgress)?(ut(),ce(k,1,1,Me),ft(),k=Ed(P),k.c(),se(k,1),k.m(t.parentNode,t)):k.p(P,B),P[6]?A&&(ut(),ce(A,1,1,()=>{A=null}),ft()):A?(A.p(P,B),B[0]&64&&se(A,1)):(A=Dd(P),A.c(),se(A,1),A.m(r,n));const D={};B[0]&4&&(D.isVisible=P[2]),f.$set(D);const R={};B[0]&8&&(R.node_id=P[3]),B[0]&1&&(R.element_id=P[0].d3f_class),B[1]&28&&(R.$$scope={dirty:B,ctx:P}),d.$set(R),B[0]&1024&&h.value!==P[10]&&et(h,P[10]),P[0].user_properties?L?L.p(P,B):(L=Ad(P),L.c(),L.m(s,m)):L&&(L.d(1),L=null)},i(P){T||(se(k),se(A),se(f.$$.fragment,P),se(d.$$.fragment,P),T=!0)},o(P){ce(k),ce(A),ce(f.$$.fragment,P),ce(d.$$.fragment,P),T=!1},d(P){P&&(v(t),v(r)),k.d(P),A&&A.d(),Ue(f),Ue(d),L&&L.d(),N=!1,mt(b)}}}function lE(i,e,t){let r,n,s,a,l,o;tt(i,Nr,j=>t(28,l=j)),tt(i,ot,j=>t(5,o=j));var u,f,p,d;let{data:c}=e,{isConnectable:h}=e,{selected:_=void 0}=e,{id:m}=e;function y(){F(),c.user_properties.push(["",""])}function F(){for(let j=0;j<l.length;j++)l[j].data==c&&_t(ot,o=l[j],o)}const T=Cn();tt(i,T,j=>t(4,a=j));let N=!1,b=!1;function k(){t(7,b=!0)}function A(){t(7,b=!1)}function L(){return a.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function P(){return b?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const B=j=>{t(0,c.label=j.currentTarget.value,c),_t(ot,o.data.label=c.label,o)};function D(){r=this.value,t(10,r),t(0,c),t(5,o),t(3,m),t(18,u)}const R=(j,ne)=>{t(0,c.user_properties[j][0]=ne.currentTarget.value,c),_t(ot,o.data.user_properties[j][0]=ne.currentTarget.value,o)};function w(j){n[j][0]=this.value,t(9,n),t(0,c),t(5,o),t(3,m),t(19,f)}const S=(j,ne)=>{t(0,c.user_properties[j][1]=ne.currentTarget.value,c),_t(ot,o.data.user_properties[j][1]=ne.currentTarget.value,o)};function X(j){s[j][1]=this.value,t(8,s),t(0,c),t(5,o),t(3,m),t(20,p)}return i.$$set=j=>{"data"in j&&t(0,c=j.data),"isConnectable"in j&&t(1,h=j.isConnectable),"selected"in j&&t(2,_=j.selected),"id"in j&&t(3,m=j.id)},i.$$.update=()=>{i.$$.dirty[0]&262185&&t(10,r=(c==null?void 0:c.label)||((o==null?void 0:o.id)==m?t(18,u=o==null?void 0:o.data)===null||u===void 0?void 0:u.label:"")||"< label >"),i.$$.dirty[0]&524329&&t(9,n=(c==null?void 0:c.user_properties)||((o==null?void 0:o.id)==m?t(19,f=o==null?void 0:o.data)===null||f===void 0?void 0:f.user_properties:"")||"< Property >"),i.$$.dirty[0]&1048617&&t(8,s=(c==null?void 0:c.user_properties)||((o==null?void 0:o.id)==m?t(20,p=o==null?void 0:o.data)===null||p===void 0?void 0:p.user_properties:"")||"< Value >"),i.$$.dirty[0]&2097176&&t(6,N=(t(21,d=a.toHandle)===null||d===void 0?void 0:d.nodeId)==m)},[c,h,_,m,a,o,N,b,s,n,r,y,F,T,k,A,L,P,u,f,p,d,B,D,R,w,S,X]}class oE extends gt{constructor(e){super(),bt(this,e,lE,sE,nt,{data:0,isConnectable:1,selected:2,id:3},null,[-1,-1])}}function Td(i,e,t){const r=i.slice();return r[34]=e[t],r[35]=e,r[36]=t,r}function Nd(i){let e,t;return e=new yt({props:{type:"target",class:"customHandle",position:ht.Left,id:"target",style:i[17](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n[0]&2&&(s.isConnectable=r[1]),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function Sd(i){let e=i[7],t,r,n=Id(i);return{c(){n.c(),t=Re()},l(s){n.l(s),t=Re()},m(s,a){n.m(s,a),C(s,t,a),r=!0},p(s,a){a[0]&128&&nt(e,e=s[7])?(ut(),ce(n,1,1,Me),ft(),n=Id(s),n.c(),se(n,1),n.m(t.parentNode,t)):n.p(s,a)},i(s){r||(se(n),r=!0)},o(s){ce(n),r=!1},d(s){s&&v(t),n.d(s)}}}function Id(i){let e,t,r,n,s,a,l,o;return e=new yt({props:{type:"source",position:ht.Top,id:"source",style:i[18](),isConnectable:i[1]}}),r=new yt({props:{type:"source",position:ht.Left,id:"source",style:i[18](),isConnectable:i[1]}}),s=new yt({props:{type:"source",position:ht.Right,id:"source",style:i[18](),isConnectable:i[1]}}),l=new yt({props:{type:"source",position:ht.Bottom,id:"source",style:i[18](),isConnectable:i[1]}}),{c(){Oe(e.$$.fragment),t=oe(),Oe(r.$$.fragment),n=oe(),Oe(s.$$.fragment),a=oe(),Oe(l.$$.fragment)},l(u){Be(e.$$.fragment,u),t=ue(u),Be(r.$$.fragment,u),n=ue(u),Be(s.$$.fragment,u),a=ue(u),Be(l.$$.fragment,u)},m(u,f){Le(e,u,f),C(u,t,f),Le(r,u,f),C(u,n,f),Le(s,u,f),C(u,a,f),Le(l,u,f),o=!0},p(u,f){const p={};f[0]&2&&(p.isConnectable=u[1]),e.$set(p);const d={};f[0]&2&&(d.isConnectable=u[1]),r.$set(d);const c={};f[0]&2&&(c.isConnectable=u[1]),s.$set(c);const h={};f[0]&2&&(h.isConnectable=u[1]),l.$set(h)},i(u){o||(se(e.$$.fragment,u),se(r.$$.fragment,u),se(s.$$.fragment,u),se(l.$$.fragment,u),o=!0)},o(u){ce(e.$$.fragment,u),ce(r.$$.fragment,u),ce(s.$$.fragment,u),ce(l.$$.fragment,u),o=!1},d(u){u&&(v(t),v(n),v(a)),Ue(e,u),Ue(r,u),Ue(s,u),Ue(l,u)}}}function uE(i){let e,t;return e=new i[37].ItemTactic({props:{list:Th,filter_value_store:i[38],select_item:i[39]}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n[1]&128&&(s.filter_value_store=r[38]),n[1]&256&&(s.select_item=r[39]),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function Pd(i){let e,t=Ge(i[0].user_properties),r=[];for(let n=0;n<t.length;n+=1)r[n]=Rd(Td(i,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=Re()},l(n){for(let s=0;s<r.length;s+=1)r[s].l(n);e=Re()},m(n,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,s);C(n,e,s)},p(n,s){if(s[0]&801){t=Ge(n[0].user_properties);let a;for(a=0;a<t.length;a+=1){const l=Td(n,t,a);r[a]?r[a].p(l,s):(r[a]=Rd(l),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},d(n){n&&v(e),Dt(r,n)}}}function Rd(i){let e,t,r,n,s,a,l,o,u;function f(...h){return i[28](i[36],...h)}function p(){i[29].call(r,i[36])}function d(...h){return i[30](i[36],...h)}function c(){i[31].call(a,i[36])}return{c(){e=K("div"),t=K("div"),r=K("input"),n=oe(),s=K("div"),a=K("input"),l=oe(),this.h()},l(h){e=Z(h,"DIV",{class:!0});var _=Ce(e);t=Z(_,"DIV",{class:!0});var m=Ce(t);r=Z(m,"INPUT",{placeholder:!0}),m.forEach(v),n=ue(_),s=Z(_,"DIV",{class:!0});var y=Ce(s);a=Z(y,"INPUT",{placeholder:!0}),y.forEach(v),l=ue(_),_.forEach(v),this.h()},h(){re(r,"placeholder","property"),re(t,"class","user-property flex-column"),re(a,"placeholder","value"),re(s,"class","user-value flex-column flex-grow-3"),re(e,"class","user-properties flex")},m(h,_){C(h,e,_),z(e,t),z(t,r),et(r,i[9][i[36]][0]),z(e,n),z(e,s),z(s,a),et(a,i[8][i[36]][1]),z(e,l),o||(u=[ye(r,"input",f),ye(r,"input",p),ye(a,"input",d),ye(a,"input",c)],o=!0)},p(h,_){i=h,_[0]&512&&r.value!==i[9][i[36]][0]&&et(r,i[9][i[36]][0]),_[0]&256&&a.value!==i[8][i[36]][1]&&et(a,i[8][i[36]][1])},d(h){h&&v(e),o=!1,mt(u)}}}function fE(i){let e=i[4].inProgress,t,r,n,s,a,l,o,u="Defense Action",f,p,d,c,h,_,m,y,F,T,N,b,k,A="+",L,P,B,D=Nd(i),R=!i[6]&&Sd(i);a=new Mn({props:{isVisible:i[2]}}),m=new di({props:{node_id:i[3],element_id:i[0].d3f_class,input_color:"#d6eaff",$$slots:{default:[uE,({R:S,filter_value_store:X,select_item:j})=>({37:S,38:X,39:j}),({R:S,filter_value_store:X,select_item:j})=>[0,(S?64:0)|(X?128:0)|(j?256:0)]]},$$scope:{ctx:i}}});let w=i[0].user_properties&&Pd(i);return{c(){D.c(),t=oe(),r=K("div"),R&&R.c(),n=oe(),s=K("div"),Oe(a.$$.fragment),l=oe(),o=K("i"),o.textContent=u,f=oe(),p=K("input"),d=oe(),c=K("br"),h=oe(),_=K("div"),Oe(m.$$.fragment),y=oe(),F=K("div"),T=K("input"),N=oe(),w&&w.c(),b=oe(),k=K("button"),k.textContent=A,this.h()},l(S){D.l(S),t=ue(S),r=Z(S,"DIV",{class:!0});var X=Ce(r);R&&R.l(X),n=ue(X),s=Z(X,"DIV",{class:!0});var j=Ce(s);Be(a.$$.fragment,j),l=ue(j),o=Z(j,"I",{"data-svelte-h":!0}),Ke(o)!=="svelte-1x9m2lq"&&(o.textContent=u),f=ue(j),p=Z(j,"INPUT",{class:!0,type:!0,style:!0}),d=ue(j),c=Z(j,"BR",{}),h=ue(j),_=Z(j,"DIV",{});var ne=Ce(_);Be(m.$$.fragment,ne),ne.forEach(v),y=ue(j),F=Z(j,"DIV",{});var J=Ce(F);T=Z(J,"INPUT",{class:!0,type:!0,style:!0}),N=ue(J),w&&w.l(J),b=ue(J),k=Z(J,"BUTTON",{"data-svelte-h":!0}),Ke(k)!=="svelte-y9choq"&&(k.textContent=A),J.forEach(v),j.forEach(v),X.forEach(v),this.h()},h(){re(p,"class","nodrag sequence"),re(p,"type","text"),wt(p,"background","#d6eaff"),re(T,"class","nodrag label"),re(T,"type","text"),wt(T,"background","#d6eaff"),re(s,"class","node-inner"),re(r,"class","countermeasure node svelte-cdgs6j")},m(S,X){D.m(S,X),C(S,t,X),C(S,r,X),R&&R.m(r,null),z(r,n),z(r,s),Le(a,s,null),z(s,l),z(s,o),z(s,f),z(s,p),et(p,i[10]),z(s,d),z(s,c),z(s,h),z(s,_),Le(m,_,null),z(s,y),z(s,F),z(F,T),et(T,i[11]),z(F,N),w&&w.m(F,null),z(F,b),z(F,k),L=!0,P||(B=[ye(p,"input",i[24]),ye(p,"input",i[25]),ye(T,"input",i[26]),ye(T,"input",i[27]),ye(k,"click",i[12]),ye(r,"click",i[13]),ye(r,"mouseenter",i[15]),ye(r,"mouseleave",i[16])],P=!0)},p(S,X){X[0]&16&&nt(e,e=S[4].inProgress)?(ut(),ce(D,1,1,Me),ft(),D=Nd(S),D.c(),se(D,1),D.m(t.parentNode,t)):D.p(S,X),S[6]?R&&(ut(),ce(R,1,1,()=>{R=null}),ft()):R?(R.p(S,X),X[0]&64&&se(R,1)):(R=Sd(S),R.c(),se(R,1),R.m(r,n));const j={};X[0]&4&&(j.isVisible=S[2]),a.$set(j),X[0]&1024&&p.value!==S[10]&&et(p,S[10]);const ne={};X[0]&8&&(ne.node_id=S[3]),X[0]&1&&(ne.element_id=S[0].d3f_class),X[1]&896&&(ne.$$scope={dirty:X,ctx:S}),m.$set(ne),X[0]&2048&&T.value!==S[11]&&et(T,S[11]),S[0].user_properties?w?w.p(S,X):(w=Pd(S),w.c(),w.m(F,b)):w&&(w.d(1),w=null)},i(S){L||(se(D),se(R),se(a.$$.fragment,S),se(m.$$.fragment,S),L=!0)},o(S){ce(D),ce(R),ce(a.$$.fragment,S),ce(m.$$.fragment,S),L=!1},d(S){S&&(v(t),v(r)),D.d(S),R&&R.d(),Ue(a),Ue(m),w&&w.d(),P=!1,mt(B)}}}function cE(i,e,t){let r,n,s,a,l,o,u;tt(i,Nr,x=>t(32,o=x)),tt(i,ot,x=>t(5,u=x));var f,p,d,c,h;let{data:_}=e,{isConnectable:m}=e,{selected:y=void 0}=e,{id:F}=e;function T(){N(),_.user_properties.push(["",""])}function N(){for(let x=0;x<o.length;x++)o[x].data==_&&_t(ot,u=o[x],u)}const b=Cn();tt(i,b,x=>t(4,l=x));let k=!1,A=!1;function L(){t(7,A=!0)}function P(){t(7,A=!1)}function B(){return l.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function D(){return A?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const R=x=>{t(0,_.sequence=x.currentTarget.value,_),_t(ot,u.data.sequence=_.sequence,u)};function w(){n=this.value,t(10,n),t(0,_),t(5,u),t(3,F),t(20,p)}const S=x=>{t(0,_.label=x.currentTarget.value,_),_t(ot,u.data.label=_.label,u)};function X(){r=this.value,t(11,r),t(0,_),t(5,u),t(3,F),t(19,f)}const j=(x,G)=>{t(0,_.user_properties[x][0]=G.currentTarget.value,_),_t(ot,u.data.user_properties[x][0]=G.currentTarget.value,u)};function ne(x){s[x][0]=this.value,t(9,s),t(0,_),t(5,u),t(3,F),t(21,d)}const J=(x,G)=>{t(0,_.user_properties[x][1]=G.currentTarget.value,_),_t(ot,u.data.user_properties[x][1]=G.currentTarget.value,u)};function W(x){a[x][1]=this.value,t(8,a),t(0,_),t(5,u),t(3,F),t(22,c)}return i.$$set=x=>{"data"in x&&t(0,_=x.data),"isConnectable"in x&&t(1,m=x.isConnectable),"selected"in x&&t(2,y=x.selected),"id"in x&&t(3,F=x.id)},i.$$.update=()=>{i.$$.dirty[0]&524329&&t(11,r=(_==null?void 0:_.label)||((u==null?void 0:u.id)==F?t(19,f=u==null?void 0:u.data)===null||f===void 0?void 0:f.label:"")||"< label >"),i.$$.dirty[0]&1048617&&t(10,n=(_==null?void 0:_.sequence)||((u==null?void 0:u.id)==F?t(20,p=u==null?void 0:u.data)===null||p===void 0?void 0:p.sequence:"")||"#"),i.$$.dirty[0]&2097193&&t(9,s=(_==null?void 0:_.user_properties)||((u==null?void 0:u.id)==F?t(21,d=u==null?void 0:u.data)===null||d===void 0?void 0:d.user_properties:"")||"< Property >"),i.$$.dirty[0]&4194345&&t(8,a=(_==null?void 0:_.user_properties)||((u==null?void 0:u.id)==F?t(22,c=u==null?void 0:u.data)===null||c===void 0?void 0:c.user_properties:"")||"< Value >"),i.$$.dirty[0]&8388632&&t(6,k=(t(23,h=l.toHandle)===null||h===void 0?void 0:h.nodeId)==F)},[_,m,y,F,l,u,k,A,a,s,n,r,T,N,b,L,P,B,D,f,p,d,c,h,R,w,S,X,j,ne,J,W]}class dE extends gt{constructor(e){super(),bt(this,e,cE,fE,nt,{data:0,isConnectable:1,selected:2,id:3},null,[-1,-1])}}function Fd(i,e,t){const r=i.slice();return r[28]=e[t],r[29]=e,r[30]=t,r}function Od(i){let e,t;return e=new yt({props:{type:"target",class:"customHandle",position:ht.Left,id:"target",style:i[15](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n[0]&2&&(s.isConnectable=r[1]),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function Bd(i){let e=i[7],t,r,n=Ld(i);return{c(){n.c(),t=Re()},l(s){n.l(s),t=Re()},m(s,a){n.m(s,a),C(s,t,a),r=!0},p(s,a){a[0]&128&&nt(e,e=s[7])?(ut(),ce(n,1,1,Me),ft(),n=Ld(s),n.c(),se(n,1),n.m(t.parentNode,t)):n.p(s,a)},i(s){r||(se(n),r=!0)},o(s){ce(n),r=!1},d(s){s&&v(t),n.d(s)}}}function Ld(i){let e,t,r,n,s,a,l,o;return e=new yt({props:{type:"source",position:ht.Top,id:"source",style:i[16](),isConnectable:i[1]}}),r=new yt({props:{type:"source",position:ht.Left,id:"source",style:i[16](),isConnectable:i[1]}}),s=new yt({props:{type:"source",position:ht.Right,id:"source",style:i[16](),isConnectable:i[1]}}),l=new yt({props:{type:"source",position:ht.Bottom,id:"source",style:i[16](),isConnectable:i[1]}}),{c(){Oe(e.$$.fragment),t=oe(),Oe(r.$$.fragment),n=oe(),Oe(s.$$.fragment),a=oe(),Oe(l.$$.fragment)},l(u){Be(e.$$.fragment,u),t=ue(u),Be(r.$$.fragment,u),n=ue(u),Be(s.$$.fragment,u),a=ue(u),Be(l.$$.fragment,u)},m(u,f){Le(e,u,f),C(u,t,f),Le(r,u,f),C(u,n,f),Le(s,u,f),C(u,a,f),Le(l,u,f),o=!0},p(u,f){const p={};f[0]&2&&(p.isConnectable=u[1]),e.$set(p);const d={};f[0]&2&&(d.isConnectable=u[1]),r.$set(d);const c={};f[0]&2&&(c.isConnectable=u[1]),s.$set(c);const h={};f[0]&2&&(h.isConnectable=u[1]),l.$set(h)},i(u){o||(se(e.$$.fragment,u),se(r.$$.fragment,u),se(s.$$.fragment,u),se(l.$$.fragment,u),o=!0)},o(u){ce(e.$$.fragment,u),ce(r.$$.fragment,u),ce(s.$$.fragment,u),ce(l.$$.fragment,u),o=!1},d(u){u&&(v(t),v(n),v(a)),Ue(e,u),Ue(r,u),Ue(s,u),Ue(l,u)}}}function hE(i){let e,t;return e=new i[31].ItemInformation({props:{list:Fh,filter_value_store:i[32],select_item:i[33]}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n[1]&2&&(s.filter_value_store=r[32]),n[1]&4&&(s.select_item=r[33]),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function Ud(i){let e,t=Ge(i[0].user_properties),r=[];for(let n=0;n<t.length;n+=1)r[n]=jd(Fd(i,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=Re()},l(n){for(let s=0;s<r.length;s+=1)r[s].l(n);e=Re()},m(n,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,s);C(n,e,s)},p(n,s){if(s[0]&801){t=Ge(n[0].user_properties);let a;for(a=0;a<t.length;a+=1){const l=Fd(n,t,a);r[a]?r[a].p(l,s):(r[a]=jd(l),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},d(n){n&&v(e),Dt(r,n)}}}function jd(i){let e,t,r,n,s,a,l,o,u;function f(...h){return i[21](i[30],...h)}function p(){i[22].call(r,i[30])}function d(...h){return i[23](i[30],...h)}function c(){i[24].call(a,i[30])}return{c(){e=K("div"),t=K("div"),r=K("input"),n=oe(),s=K("div"),a=K("input"),l=oe(),this.h()},l(h){e=Z(h,"DIV",{class:!0});var _=Ce(e);t=Z(_,"DIV",{class:!0});var m=Ce(t);r=Z(m,"INPUT",{placeholder:!0}),m.forEach(v),n=ue(_),s=Z(_,"DIV",{class:!0});var y=Ce(s);a=Z(y,"INPUT",{placeholder:!0}),y.forEach(v),l=ue(_),_.forEach(v),this.h()},h(){re(r,"placeholder","property"),re(t,"class","user-property flex-column"),re(a,"placeholder","value"),re(s,"class","user-value flex-column flex-grow-3"),re(e,"class","user-properties flex")},m(h,_){C(h,e,_),z(e,t),z(t,r),et(r,i[9][i[30]][0]),z(e,n),z(e,s),z(s,a),et(a,i[8][i[30]][1]),z(e,l),o||(u=[ye(r,"input",f),ye(r,"input",p),ye(a,"input",d),ye(a,"input",c)],o=!0)},p(h,_){i=h,_[0]&512&&r.value!==i[9][i[30]][0]&&et(r,i[9][i[30]][0]),_[0]&256&&a.value!==i[8][i[30]][1]&&et(a,i[8][i[30]][1])},d(h){h&&v(e),o=!1,mt(u)}}}function pE(i){let e=i[4].inProgress,t,r,n,s,a,l="Information",o,u,f,p,d,c,h,_,m="+",y,F,T,N=Od(i),b=!i[6]&&Bd(i);f=new Mn({props:{isVisible:i[2]}}),d=new di({props:{node_id:i[3],element_id:i[0].d3f_class,input_color:"#e8f4ea",$$slots:{default:[hE,({R:A,filter_value_store:L,select_item:P})=>({31:A,32:L,33:P}),({R:A,filter_value_store:L,select_item:P})=>[0,(A?1:0)|(L?2:0)|(P?4:0)]]},$$scope:{ctx:i}}});let k=i[0].user_properties&&Ud(i);return{c(){N.c(),t=oe(),r=K("div"),b&&b.c(),n=oe(),s=K("div"),a=K("i"),a.textContent=l,o=K("br"),u=oe(),Oe(f.$$.fragment),p=oe(),Oe(d.$$.fragment),c=oe(),k&&k.c(),h=oe(),_=K("button"),_.textContent=m,this.h()},l(A){N.l(A),t=ue(A),r=Z(A,"DIV",{class:!0});var L=Ce(r);b&&b.l(L),n=ue(L),s=Z(L,"DIV",{class:!0});var P=Ce(s);a=Z(P,"I",{"data-svelte-h":!0}),Ke(a)!=="svelte-1ocpiyk"&&(a.textContent=l),o=Z(P,"BR",{}),u=ue(P),Be(f.$$.fragment,P),p=ue(P),Be(d.$$.fragment,P),c=ue(P),k&&k.l(P),h=ue(P),_=Z(P,"BUTTON",{"data-svelte-h":!0}),Ke(_)!=="svelte-y9choq"&&(_.textContent=m),P.forEach(v),L.forEach(v),this.h()},h(){re(s,"class","information node-inner svelte-1wgy9qw"),re(r,"class","information node svelte-1wgy9qw")},m(A,L){N.m(A,L),C(A,t,L),C(A,r,L),b&&b.m(r,null),z(r,n),z(r,s),z(s,a),z(s,o),z(s,u),Le(f,s,null),z(s,p),Le(d,s,null),z(s,c),k&&k.m(s,null),z(s,h),z(s,_),y=!0,F||(T=[ye(_,"click",i[10]),ye(r,"click",i[11]),ye(r,"mouseenter",i[13]),ye(r,"mouseleave",i[14])],F=!0)},p(A,L){L[0]&16&&nt(e,e=A[4].inProgress)?(ut(),ce(N,1,1,Me),ft(),N=Od(A),N.c(),se(N,1),N.m(t.parentNode,t)):N.p(A,L),A[6]?b&&(ut(),ce(b,1,1,()=>{b=null}),ft()):b?(b.p(A,L),L[0]&64&&se(b,1)):(b=Bd(A),b.c(),se(b,1),b.m(r,n));const P={};L[0]&4&&(P.isVisible=A[2]),f.$set(P);const B={};L[0]&8&&(B.node_id=A[3]),L[0]&1&&(B.element_id=A[0].d3f_class),L[1]&14&&(B.$$scope={dirty:L,ctx:A}),d.$set(B),A[0].user_properties?k?k.p(A,L):(k=Ud(A),k.c(),k.m(s,h)):k&&(k.d(1),k=null)},i(A){y||(se(N),se(b),se(f.$$.fragment,A),se(d.$$.fragment,A),y=!0)},o(A){ce(N),ce(b),ce(f.$$.fragment,A),ce(d.$$.fragment,A),y=!1},d(A){A&&(v(t),v(r)),N.d(A),b&&b.d(),Ue(f),Ue(d),k&&k.d(),F=!1,mt(T)}}}function _E(i,e,t){let r,n,s,a,l;tt(i,Nr,w=>t(26,a=w)),tt(i,ot,w=>t(5,l=w));var o,u,f,p;let{data:d}=e,{isConnectable:c}=e,{selected:h=void 0}=e;function _(){m(),d.user_properties.push(["",""])}function m(){for(let w=0;w<a.length;w++)a[w].data==d&&_t(ot,l=a[w],l)}let{id:y}=e;const F=Cn();tt(i,F,w=>t(4,s=w));let T=!1,N=!1;function b(){t(7,N=!0)}function k(){t(7,N=!1)}function A(){return s.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function L(){return N?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const P=(w,S)=>{t(0,d.user_properties[w][0]=S.currentTarget.value,d),_t(ot,l.data.user_properties[w][0]=S.currentTarget.value,l)};function B(w){r[w][0]=this.value,t(9,r),t(0,d),t(5,l),t(3,y),t(18,u)}const D=(w,S)=>{t(0,d.user_properties[w][1]=S.currentTarget.value,d),_t(ot,l.data.user_properties[w][1]=S.currentTarget.value,l)};function R(w){n[w][1]=this.value,t(8,n),t(0,d),t(5,l),t(3,y),t(19,f)}return i.$$set=w=>{"data"in w&&t(0,d=w.data),"isConnectable"in w&&t(1,c=w.isConnectable),"selected"in w&&t(2,h=w.selected),"id"in w&&t(3,y=w.id)},i.$$.update=()=>{i.$$.dirty[0]&131113&&(d!=null&&d.label||(l==null?void 0:l.id)==y&&!(t(17,o=l==null?void 0:l.data)===null||o===void 0)&&o.label),i.$$.dirty[0]&262185&&t(9,r=(d==null?void 0:d.user_properties)||((l==null?void 0:l.id)==y?t(18,u=l==null?void 0:l.data)===null||u===void 0?void 0:u.user_properties:"")||"< Property >"),i.$$.dirty[0]&524329&&t(8,n=(d==null?void 0:d.user_properties)||((l==null?void 0:l.id)==y?t(19,f=l==null?void 0:l.data)===null||f===void 0?void 0:f.user_properties:"")||"< Value >"),i.$$.dirty[0]&1048600&&t(6,T=(t(20,p=s.toHandle)===null||p===void 0?void 0:p.nodeId)==y)},[d,c,h,y,s,l,T,N,n,r,_,m,F,b,k,A,L,o,u,f,p,P,B,D,R]}class mE extends gt{constructor(e){super(),bt(this,e,_E,pE,nt,{data:0,isConnectable:1,selected:2,id:3},null,[-1,-1])}}function qd(i,e,t){const r=i.slice();return r[30]=e[t],r[31]=e,r[32]=t,r}function Md(i){let e,t;return e=new yt({props:{type:"target",class:"customHandle",position:ht.Left,id:"target",style:i[13](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n[0]&2&&(s.isConnectable=r[1]),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function Vd(i){let e=i[6],t,r,n=zd(i);return{c(){n.c(),t=Re()},l(s){n.l(s),t=Re()},m(s,a){n.m(s,a),C(s,t,a),r=!0},p(s,a){a[0]&64&&nt(e,e=s[6])?(ut(),ce(n,1,1,Me),ft(),n=zd(s),n.c(),se(n,1),n.m(t.parentNode,t)):n.p(s,a)},i(s){r||(se(n),r=!0)},o(s){ce(n),r=!1},d(s){s&&v(t),n.d(s)}}}function zd(i){let e,t,r,n,s,a,l,o;return e=new yt({props:{type:"source",position:ht.Top,id:"source",style:i[14](),isConnectable:i[1]}}),r=new yt({props:{type:"source",position:ht.Left,id:"source",style:i[14](),isConnectable:i[1]}}),s=new yt({props:{type:"source",position:ht.Right,id:"source",style:i[14](),isConnectable:i[1]}}),l=new yt({props:{type:"source",position:ht.Bottom,id:"source",style:i[14](),isConnectable:i[1]}}),{c(){Oe(e.$$.fragment),t=oe(),Oe(r.$$.fragment),n=oe(),Oe(s.$$.fragment),a=oe(),Oe(l.$$.fragment)},l(u){Be(e.$$.fragment,u),t=ue(u),Be(r.$$.fragment,u),n=ue(u),Be(s.$$.fragment,u),a=ue(u),Be(l.$$.fragment,u)},m(u,f){Le(e,u,f),C(u,t,f),Le(r,u,f),C(u,n,f),Le(s,u,f),C(u,a,f),Le(l,u,f),o=!0},p(u,f){const p={};f[0]&2&&(p.isConnectable=u[1]),e.$set(p);const d={};f[0]&2&&(d.isConnectable=u[1]),r.$set(d);const c={};f[0]&2&&(c.isConnectable=u[1]),s.$set(c);const h={};f[0]&2&&(h.isConnectable=u[1]),l.$set(h)},i(u){o||(se(e.$$.fragment,u),se(r.$$.fragment,u),se(s.$$.fragment,u),se(l.$$.fragment,u),o=!0)},o(u){ce(e.$$.fragment,u),ce(r.$$.fragment,u),ce(s.$$.fragment,u),ce(l.$$.fragment,u),o=!1},d(u){u&&(v(t),v(n),v(a)),Ue(e,u),Ue(r,u),Ue(s,u),Ue(l,u)}}}function Hd(i){let e,t=Ge(i[0].user_properties),r=[];for(let n=0;n<t.length;n+=1)r[n]=xd(qd(i,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=Re()},l(n){for(let s=0;s<r.length;s+=1)r[s].l(n);e=Re()},m(n,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,s);C(n,e,s)},p(n,s){if(s[0]&393){t=Ge(n[0].user_properties);let a;for(a=0;a<t.length;a+=1){const l=qd(n,t,a);r[a]?r[a].p(l,s):(r[a]=xd(l),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},d(n){n&&v(e),Dt(r,n)}}}function xd(i){let e,t,r,n,s,a,l,o,u;function f(...h){return i[24](i[32],...h)}function p(){i[25].call(r,i[32])}function d(...h){return i[26](i[32],...h)}function c(){i[27].call(a,i[32])}return{c(){e=K("div"),t=K("div"),r=K("input"),n=oe(),s=K("div"),a=K("input"),l=oe(),this.h()},l(h){e=Z(h,"DIV",{class:!0});var _=Ce(e);t=Z(_,"DIV",{class:!0});var m=Ce(t);r=Z(m,"INPUT",{placeholder:!0}),m.forEach(v),n=ue(_),s=Z(_,"DIV",{class:!0});var y=Ce(s);a=Z(y,"INPUT",{placeholder:!0}),y.forEach(v),l=ue(_),_.forEach(v),this.h()},h(){re(r,"placeholder","property"),re(t,"class","user-property flex-column"),re(a,"placeholder","value"),re(s,"class","user-value flex-column flex-grow-3"),re(e,"class","user-properties flex")},m(h,_){C(h,e,_),z(e,t),z(t,r),et(r,i[8][i[32]][0]),z(e,n),z(e,s),z(s,a),et(a,i[7][i[32]][1]),z(e,l),o||(u=[ye(r,"input",f),ye(r,"input",p),ye(a,"input",d),ye(a,"input",c)],o=!0)},p(h,_){i=h,_[0]&256&&r.value!==i[8][i[32]][0]&&et(r,i[8][i[32]][0]),_[0]&128&&a.value!==i[7][i[32]][1]&&et(a,i[7][i[32]][1])},d(h){h&&v(e),o=!1,mt(u)}}}function vE(i){let e=i[4].inProgress,t,r,n,s,a,l,o,u="Condition",f,p,d,c,h,_,m="+",y,F,T,N=Md(i),b=!i[5]&&Vd(i);a=new Mn({props:{isVisible:i[2]}});let k=i[0].user_properties&&Hd(i);return{c(){N.c(),t=oe(),r=K("div"),b&&b.c(),n=oe(),s=K("div"),Oe(a.$$.fragment),l=oe(),o=K("i"),o.textContent=u,f=K("br"),p=oe(),d=K("input"),c=oe(),k&&k.c(),h=oe(),_=K("button"),_.textContent=m,this.h()},l(A){N.l(A),t=ue(A),r=Z(A,"DIV",{class:!0});var L=Ce(r);b&&b.l(L),n=ue(L),s=Z(L,"DIV",{class:!0});var P=Ce(s);Be(a.$$.fragment,P),l=ue(P),o=Z(P,"I",{"data-svelte-h":!0}),Ke(o)!=="svelte-26somz"&&(o.textContent=u),f=Z(P,"BR",{}),p=ue(P),d=Z(P,"INPUT",{class:!0,type:!0,style:!0}),c=ue(P),k&&k.l(P),h=ue(P),_=Z(P,"BUTTON",{"data-svelte-h":!0}),Ke(_)!=="svelte-y9choq"&&(_.textContent=m),P.forEach(v),L.forEach(v),this.h()},h(){re(d,"class","nodrag label"),re(d,"type","text"),wt(d,"background","#ece6ff"),re(s,"class","condition node-inner svelte-d75hej"),re(r,"class","condition node svelte-d75hej")},m(A,L){N.m(A,L),C(A,t,L),C(A,r,L),b&&b.m(r,null),z(r,n),z(r,s),Le(a,s,null),z(s,l),z(s,o),z(s,f),z(s,p),z(s,d),et(d,i[9]),z(s,c),k&&k.m(s,null),z(s,h),z(s,_),y=!0,F||(T=[ye(d,"input",i[22]),ye(d,"input",i[23]),ye(_,"click",i[15]),ye(r,"click",i[16]),ye(r,"mouseenter",i[11]),ye(r,"mouseleave",i[12])],F=!0)},p(A,L){L[0]&16&&nt(e,e=A[4].inProgress)?(ut(),ce(N,1,1,Me),ft(),N=Md(A),N.c(),se(N,1),N.m(t.parentNode,t)):N.p(A,L),A[5]?b&&(ut(),ce(b,1,1,()=>{b=null}),ft()):b?(b.p(A,L),L[0]&32&&se(b,1)):(b=Vd(A),b.c(),se(b,1),b.m(r,n));const P={};L[0]&4&&(P.isVisible=A[2]),a.$set(P),L[0]&512&&d.value!==A[9]&&et(d,A[9]),A[0].user_properties?k?k.p(A,L):(k=Hd(A),k.c(),k.m(s,h)):k&&(k.d(1),k=null)},i(A){y||(se(N),se(b),se(a.$$.fragment,A),y=!0)},o(A){ce(N),ce(b),ce(a.$$.fragment,A),y=!1},d(A){A&&(v(t),v(r)),N.d(A),b&&b.d(),Ue(a),k&&k.d(),F=!1,mt(T)}}}function gE(i,e,t){let r,n,s,a,l,o;tt(i,Nr,j=>t(28,a=j)),tt(i,ot,j=>t(3,l=j));var u,f,p,d;let{data:c}=e,{isConnectable:h}=e,{selected:_=void 0}=e,{id:m}=e;const y=Cn();tt(i,y,j=>t(4,o=j));let F=!1,T=!1;function N(){t(6,T=!0)}function b(){t(6,T=!1)}function k(){return o.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function A(){return T?"z-index: 2;":"visibility:hidden; pointer-events: none;"}function L(){P(),c.user_properties.push(["",""])}function P(){for(let j=0;j<a.length;j++)a[j].data==c&&_t(ot,l=a[j],l)}const B=j=>{t(0,c.label=j.currentTarget.value,c),_t(ot,l.data.label=c.label,l)};function D(){r=this.value,t(9,r),t(0,c),t(3,l),t(17,m),t(19,f)}const R=(j,ne)=>{t(0,c.user_properties[j][0]=ne.currentTarget.value,c),_t(ot,l.data.user_properties[j][0]=ne.currentTarget.value,l)};function w(j){n[j][0]=this.value,t(8,n),t(0,c),t(3,l),t(17,m),t(20,p)}const S=(j,ne)=>{t(0,c.user_properties[j][1]=ne.currentTarget.value,c),_t(ot,l.data.user_properties[j][1]=ne.currentTarget.value,l)};function X(j){s[j][1]=this.value,t(7,s),t(0,c),t(3,l),t(17,m),t(21,d)}return i.$$set=j=>{"data"in j&&t(0,c=j.data),"isConnectable"in j&&t(1,h=j.isConnectable),"selected"in j&&t(2,_=j.selected),"id"in j&&t(17,m=j.id)},i.$$.update=()=>{i.$$.dirty[0]&393232&&t(5,F=(t(18,u=o.toHandle)===null||u===void 0?void 0:u.nodeId)==m),i.$$.dirty[0]&655369&&t(9,r=(c==null?void 0:c.label)||((l==null?void 0:l.id)==m?t(19,f=l==null?void 0:l.data)===null||f===void 0?void 0:f.label:"")||"< label >"),i.$$.dirty[0]&1179657&&t(8,n=(c==null?void 0:c.user_properties)||((l==null?void 0:l.id)==m?t(20,p=l==null?void 0:l.data)===null||p===void 0?void 0:p.user_properties:"")||"< Property >"),i.$$.dirty[0]&2228233&&t(7,s=(c==null?void 0:c.user_properties)||((l==null?void 0:l.id)==m?t(21,d=l==null?void 0:l.data)===null||d===void 0?void 0:d.user_properties:"")||"< Value >")},[c,h,_,l,o,F,T,s,n,r,y,N,b,k,A,L,P,m,u,f,p,d,B,D,R,w,S,X]}class bE extends gt{constructor(e){super(),bt(this,e,gE,vE,nt,{data:0,isConnectable:1,selected:2,id:17},null,[-1,-1])}}function Xd(i,e,t){const r=i.slice();return r[30]=e[t],r[31]=e,r[32]=t,r}function Gd(i){let e,t;return e=new yt({props:{type:"target",class:"customHandle",position:ht.Left,id:"target",style:i[15](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n[0]&2&&(s.isConnectable=r[1]),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function Qd(i){let e=i[6],t,r,n=$d(i);return{c(){n.c(),t=Re()},l(s){n.l(s),t=Re()},m(s,a){n.m(s,a),C(s,t,a),r=!0},p(s,a){a[0]&64&&nt(e,e=s[6])?(ut(),ce(n,1,1,Me),ft(),n=$d(s),n.c(),se(n,1),n.m(t.parentNode,t)):n.p(s,a)},i(s){r||(se(n),r=!0)},o(s){ce(n),r=!1},d(s){s&&v(t),n.d(s)}}}function $d(i){let e,t,r,n,s,a,l,o;return e=new yt({props:{type:"source",position:ht.Top,id:"source",style:i[16](),isConnectable:i[1]}}),r=new yt({props:{type:"source",position:ht.Left,id:"source",style:i[16](),isConnectable:i[1]}}),s=new yt({props:{type:"source",position:ht.Right,id:"source",style:i[16](),isConnectable:i[1]}}),l=new yt({props:{type:"source",position:ht.Bottom,id:"source",style:i[16](),isConnectable:i[1]}}),{c(){Oe(e.$$.fragment),t=oe(),Oe(r.$$.fragment),n=oe(),Oe(s.$$.fragment),a=oe(),Oe(l.$$.fragment)},l(u){Be(e.$$.fragment,u),t=ue(u),Be(r.$$.fragment,u),n=ue(u),Be(s.$$.fragment,u),a=ue(u),Be(l.$$.fragment,u)},m(u,f){Le(e,u,f),C(u,t,f),Le(r,u,f),C(u,n,f),Le(s,u,f),C(u,a,f),Le(l,u,f),o=!0},p(u,f){const p={};f[0]&2&&(p.isConnectable=u[1]),e.$set(p);const d={};f[0]&2&&(d.isConnectable=u[1]),r.$set(d);const c={};f[0]&2&&(c.isConnectable=u[1]),s.$set(c);const h={};f[0]&2&&(h.isConnectable=u[1]),l.$set(h)},i(u){o||(se(e.$$.fragment,u),se(r.$$.fragment,u),se(s.$$.fragment,u),se(l.$$.fragment,u),o=!0)},o(u){ce(e.$$.fragment,u),ce(r.$$.fragment,u),ce(s.$$.fragment,u),ce(l.$$.fragment,u),o=!1},d(u){u&&(v(t),v(n),v(a)),Ue(e,u),Ue(r,u),Ue(s,u),Ue(l,u)}}}function Wd(i){let e,t=Ge(i[0].user_properties),r=[];for(let n=0;n<t.length;n+=1)r[n]=Yd(Xd(i,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=Re()},l(n){for(let s=0;s<r.length;s+=1)r[s].l(n);e=Re()},m(n,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,s);C(n,e,s)},p(n,s){if(s[0]&401){t=Ge(n[0].user_properties);let a;for(a=0;a<t.length;a+=1){const l=Xd(n,t,a);r[a]?r[a].p(l,s):(r[a]=Yd(l),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},d(n){n&&v(e),Dt(r,n)}}}function Yd(i){let e,t,r,n,s,a,l,o,u;function f(...h){return i[24](i[32],...h)}function p(){i[25].call(r,i[32])}function d(...h){return i[26](i[32],...h)}function c(){i[27].call(a,i[32])}return{c(){e=K("div"),t=K("div"),r=K("input"),n=oe(),s=K("div"),a=K("input"),l=oe(),this.h()},l(h){e=Z(h,"DIV",{class:!0});var _=Ce(e);t=Z(_,"DIV",{class:!0});var m=Ce(t);r=Z(m,"INPUT",{placeholder:!0}),m.forEach(v),n=ue(_),s=Z(_,"DIV",{class:!0});var y=Ce(s);a=Z(y,"INPUT",{placeholder:!0}),y.forEach(v),l=ue(_),_.forEach(v),this.h()},h(){re(r,"placeholder","property"),re(t,"class","user-property flex-column"),re(a,"placeholder","value"),re(s,"class","user-value flex-column flex-grow-3"),re(e,"class","user-properties flex")},m(h,_){C(h,e,_),z(e,t),z(t,r),et(r,i[8][i[32]][0]),z(e,n),z(e,s),z(s,a),et(a,i[7][i[32]][1]),z(e,l),o||(u=[ye(r,"input",f),ye(r,"input",p),ye(a,"input",d),ye(a,"input",c)],o=!0)},p(h,_){i=h,_[0]&256&&r.value!==i[8][i[32]][0]&&et(r,i[8][i[32]][0]),_[0]&128&&a.value!==i[7][i[32]][1]&&et(a,i[7][i[32]][1])},d(h){h&&v(e),o=!1,mt(u)}}}function wE(i){let e=i[3].inProgress,t,r,n,s,a,l="Agent",o,u,f,p,d,c,h,_,m,y="+",F,T,N,b=Gd(i),k=!i[5]&&Qd(i);f=new Mn({props:{isVisible:i[2]}});let A=i[0].user_properties&&Wd(i);return{c(){b.c(),t=oe(),r=K("div"),k&&k.c(),n=oe(),s=K("div"),a=K("i"),a.textContent=l,o=K("br"),u=oe(),Oe(f.$$.fragment),p=oe(),d=K("input"),c=K("br"),h=oe(),A&&A.c(),_=oe(),m=K("button"),m.textContent=y,this.h()},l(L){b.l(L),t=ue(L),r=Z(L,"DIV",{class:!0});var P=Ce(r);k&&k.l(P),n=ue(P),s=Z(P,"DIV",{class:!0});var B=Ce(s);a=Z(B,"I",{"data-svelte-h":!0}),Ke(a)!=="svelte-13s1fb"&&(a.textContent=l),o=Z(B,"BR",{}),u=ue(B),Be(f.$$.fragment,B),p=ue(B),d=Z(B,"INPUT",{class:!0,type:!0,style:!0}),c=Z(B,"BR",{}),h=ue(B),A&&A.l(B),_=ue(B),m=Z(B,"BUTTON",{"data-svelte-h":!0}),Ke(m)!=="svelte-y9choq"&&(m.textContent=y),B.forEach(v),P.forEach(v),this.h()},h(){re(d,"class","nodrag label"),re(d,"type","text"),wt(d,"background","#f0e6e6"),re(s,"class","agent-inner node-inner"),re(r,"class","agent node svelte-n06ybh")},m(L,P){b.m(L,P),C(L,t,P),C(L,r,P),k&&k.m(r,null),z(r,n),z(r,s),z(s,a),z(s,o),z(s,u),Le(f,s,null),z(s,p),z(s,d),et(d,i[9]),z(s,c),z(s,h),A&&A.m(s,null),z(s,_),z(s,m),F=!0,T||(N=[ye(d,"input",i[22]),ye(d,"input",i[23]),ye(m,"click",i[10]),ye(r,"click",i[11]),ye(r,"mouseenter",i[13]),ye(r,"mouseleave",i[14])],T=!0)},p(L,P){P[0]&8&&nt(e,e=L[3].inProgress)?(ut(),ce(b,1,1,Me),ft(),b=Gd(L),b.c(),se(b,1),b.m(t.parentNode,t)):b.p(L,P),L[5]?k&&(ut(),ce(k,1,1,()=>{k=null}),ft()):k?(k.p(L,P),P[0]&32&&se(k,1)):(k=Qd(L),k.c(),se(k,1),k.m(r,n));const B={};P[0]&4&&(B.isVisible=L[2]),f.$set(B),P[0]&512&&d.value!==L[9]&&et(d,L[9]),L[0].user_properties?A?A.p(L,P):(A=Wd(L),A.c(),A.m(s,_)):A&&(A.d(1),A=null)},i(L){F||(se(b),se(k),se(f.$$.fragment,L),F=!0)},o(L){ce(b),ce(k),ce(f.$$.fragment,L),F=!1},d(L){L&&(v(t),v(r)),b.d(L),k&&k.d(),Ue(f),A&&A.d(),T=!1,mt(N)}}}function yE(i,e,t){let r,n,s,a,l,o;tt(i,Nr,j=>t(28,l=j)),tt(i,ot,j=>t(4,o=j));var u,f,p,d;let{data:c}=e,{isConnectable:h}=e,{selected:_=void 0}=e,{id:m}=e;function y(){F(),c.user_properties.push(["",""])}function F(){for(let j=0;j<l.length;j++)l[j].data==c&&_t(ot,o=l[j],o)}const T=Cn();tt(i,T,j=>t(3,a=j));let N=!1,b=!1;function k(){t(6,b=!0)}function A(){t(6,b=!1)}function L(){return a.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function P(){return b?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const B=j=>{t(0,c.label=j.currentTarget.value,c),_t(ot,o.data.label=c.label,o)};function D(){r=this.value,t(9,r),t(0,c),t(4,o),t(17,m),t(18,u)}const R=(j,ne)=>{t(0,c.user_properties[j][0]=ne.currentTarget.value,c),_t(ot,o.data.user_properties[j][0]=ne.currentTarget.value,o)};function w(j){n[j][0]=this.value,t(8,n),t(0,c),t(4,o),t(17,m),t(19,f)}const S=(j,ne)=>{t(0,c.user_properties[j][1]=ne.currentTarget.value,c),_t(ot,o.data.user_properties[j][1]=ne.currentTarget.value,o)};function X(j){s[j][1]=this.value,t(7,s),t(0,c),t(4,o),t(17,m),t(20,p)}return i.$$set=j=>{"data"in j&&t(0,c=j.data),"isConnectable"in j&&t(1,h=j.isConnectable),"selected"in j&&t(2,_=j.selected),"id"in j&&t(17,m=j.id)},i.$$.update=()=>{i.$$.dirty[0]&393233&&t(9,r=(c==null?void 0:c.label)||((o==null?void 0:o.id)==m?t(18,u=o==null?void 0:o.data)===null||u===void 0?void 0:u.label:"")||"< label >"),i.$$.dirty[0]&655377&&t(8,n=(c==null?void 0:c.user_properties)||((o==null?void 0:o.id)==m?t(19,f=o==null?void 0:o.data)===null||f===void 0?void 0:f.user_properties:"")||"< Property >"),i.$$.dirty[0]&1179665&&t(7,s=(c==null?void 0:c.user_properties)||((o==null?void 0:o.id)==m?t(20,p=o==null?void 0:o.data)===null||p===void 0?void 0:p.user_properties:"")||"< Value >"),i.$$.dirty[0]&2228232&&t(5,N=(t(21,d=a.toHandle)===null||d===void 0?void 0:d.nodeId)==m)},[c,h,_,a,o,N,b,s,n,r,y,F,T,k,A,L,P,m,u,f,p,d,B,D,R,w,S,X]}class EE extends gt{constructor(e){super(),bt(this,e,yE,wE,nt,{data:0,isConnectable:1,selected:2,id:17},null,[-1,-1])}}function Jd(i,e,t){const r=i.slice();return r[31]=e[t],r[32]=e,r[33]=t,r}function Kd(i){let e,t;return e=new yt({props:{type:"target",class:"customHandle",position:ht.Left,id:"target",style:i[17](),isConnectableStart:!1,isConnectable:i[1]}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n[0]&2&&(s.isConnectable=r[1]),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function Zd(i){let e=i[8],t,r,n=eh(i);return{c(){n.c(),t=Re()},l(s){n.l(s),t=Re()},m(s,a){n.m(s,a),C(s,t,a),r=!0},p(s,a){a[0]&256&&nt(e,e=s[8])?(ut(),ce(n,1,1,Me),ft(),n=eh(s),n.c(),se(n,1),n.m(t.parentNode,t)):n.p(s,a)},i(s){r||(se(n),r=!0)},o(s){ce(n),r=!1},d(s){s&&v(t),n.d(s)}}}function eh(i){let e,t,r,n,s,a,l,o;return e=new yt({props:{type:"source",position:ht.Top,id:"source",style:i[18](),isConnectable:i[1]}}),r=new yt({props:{type:"source",position:ht.Left,id:"source",style:i[18](),isConnectable:i[1]}}),s=new yt({props:{type:"source",position:ht.Right,id:"source",style:i[18](),isConnectable:i[1]}}),l=new yt({props:{type:"source",position:ht.Bottom,id:"source",style:i[18](),isConnectable:i[1]}}),{c(){Oe(e.$$.fragment),t=oe(),Oe(r.$$.fragment),n=oe(),Oe(s.$$.fragment),a=oe(),Oe(l.$$.fragment)},l(u){Be(e.$$.fragment,u),t=ue(u),Be(r.$$.fragment,u),n=ue(u),Be(s.$$.fragment,u),a=ue(u),Be(l.$$.fragment,u)},m(u,f){Le(e,u,f),C(u,t,f),Le(r,u,f),C(u,n,f),Le(s,u,f),C(u,a,f),Le(l,u,f),o=!0},p(u,f){const p={};f[0]&2&&(p.isConnectable=u[1]),e.$set(p);const d={};f[0]&2&&(d.isConnectable=u[1]),r.$set(d);const c={};f[0]&2&&(c.isConnectable=u[1]),s.$set(c);const h={};f[0]&2&&(h.isConnectable=u[1]),l.$set(h)},i(u){o||(se(e.$$.fragment,u),se(r.$$.fragment,u),se(s.$$.fragment,u),se(l.$$.fragment,u),o=!0)},o(u){ce(e.$$.fragment,u),ce(r.$$.fragment,u),ce(s.$$.fragment,u),ce(l.$$.fragment,u),o=!1},d(u){u&&(v(t),v(n),v(a)),Ue(e,u),Ue(r,u),Ue(s,u),Ue(l,u)}}}function DE(i){let e,t;return e=new i[34].ItemTactic({props:{list:Ih,filter_value_store:i[35],select_item:i[36]}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n[1]&16&&(s.filter_value_store=r[35]),n[1]&32&&(s.select_item=r[36]),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function th(i){let e,t=Ge(i[0].user_properties),r=[];for(let n=0;n<t.length;n+=1)r[n]=rh(Jd(i,t,n));return{c(){for(let n=0;n<r.length;n+=1)r[n].c();e=Re()},l(n){for(let s=0;s<r.length;s+=1)r[s].l(n);e=Re()},m(n,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(n,s);C(n,e,s)},p(n,s){if(s[0]&1601){t=Ge(n[0].user_properties);let a;for(a=0;a<t.length;a+=1){const l=Jd(n,t,a);r[a]?r[a].p(l,s):(r[a]=rh(l),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},d(n){n&&v(e),Dt(r,n)}}}function rh(i){let e,t,r,n,s,a,l,o,u;function f(...h){return i[26](i[33],...h)}function p(){i[27].call(r,i[33])}function d(...h){return i[28](i[33],...h)}function c(){i[29].call(a,i[33])}return{c(){e=K("div"),t=K("div"),r=K("input"),n=oe(),s=K("div"),a=K("input"),l=oe(),this.h()},l(h){e=Z(h,"DIV",{class:!0});var _=Ce(e);t=Z(_,"DIV",{class:!0});var m=Ce(t);r=Z(m,"INPUT",{placeholder:!0}),m.forEach(v),n=ue(_),s=Z(_,"DIV",{class:!0});var y=Ce(s);a=Z(y,"INPUT",{placeholder:!0}),y.forEach(v),l=ue(_),_.forEach(v),this.h()},h(){re(r,"placeholder","property"),re(t,"class","user-property flex-column"),re(a,"placeholder","value"),re(s,"class","user-value flex-column flex-grow-3"),re(e,"class","user-properties flex")},m(h,_){C(h,e,_),z(e,t),z(t,r),et(r,i[10][i[33]][0]),z(e,n),z(e,s),z(s,a),et(a,i[9][i[33]][1]),z(e,l),o||(u=[ye(r,"input",f),ye(r,"input",p),ye(a,"input",d),ye(a,"input",c)],o=!0)},p(h,_){i=h,_[0]&1024&&r.value!==i[10][i[33]][0]&&et(r,i[10][i[33]][0]),_[0]&512&&a.value!==i[9][i[33]][1]&&et(a,i[9][i[33]][1])},d(h){h&&v(e),o=!1,mt(u)}}}function kE(i){let e=i[5].inProgress,t,r,n,s,a,l,o,u,f,p,d,c,h,_,m,y,F,T,N="+",b,k,A,L=Kd(i),P=!i[7]&&Zd(i);a=new Mn({props:{isVisible:i[4]}}),h=new di({props:{node_id:i[2],element_id:i[0].d3f_class,input_color:"white",$$slots:{default:[DE,({R:D,filter_value_store:R,select_item:w})=>({34:D,35:R,36:w}),({R:D,filter_value_store:R,select_item:w})=>[0,(D?8:0)|(R?16:0)|(w?32:0)]]},$$scope:{ctx:i}}});let B=i[0].user_properties&&th(i);return{c(){L.c(),t=oe(),r=K("div"),P&&P.c(),n=oe(),s=K("div"),Oe(a.$$.fragment),l=oe(),o=K("i"),u=q(i[3]),f=K("br"),p=oe(),d=K("br"),c=oe(),Oe(h.$$.fragment),_=oe(),m=K("input"),y=oe(),B&&B.c(),F=oe(),T=K("button"),T.textContent=N,this.h()},l(D){L.l(D),t=ue(D),r=Z(D,"DIV",{class:!0});var R=Ce(r);P&&P.l(R),n=ue(R),s=Z(R,"DIV",{class:!0});var w=Ce(s);Be(a.$$.fragment,w),l=ue(w),o=Z(w,"I",{});var S=Ce(o);u=M(S,i[3]),S.forEach(v),f=Z(w,"BR",{}),p=ue(w),d=Z(w,"BR",{}),c=ue(w),Be(h.$$.fragment,w),_=ue(w),m=Z(w,"INPUT",{class:!0,type:!0,style:!0}),y=ue(w),B&&B.l(w),F=ue(w),T=Z(w,"BUTTON",{"data-svelte-h":!0}),Ke(T)!=="svelte-y9choq"&&(T.textContent=N),w.forEach(v),R.forEach(v),this.h()},h(){re(m,"class","nodrag label"),re(m,"type","text"),wt(m,"background","white"),re(s,"class","event node-inner svelte-r7gabh"),re(r,"class","event node svelte-r7gabh")},m(D,R){L.m(D,R),C(D,t,R),C(D,r,R),P&&P.m(r,null),z(r,n),z(r,s),Le(a,s,null),z(s,l),z(s,o),z(o,u),z(s,f),z(s,p),z(s,d),z(s,c),Le(h,s,null),z(s,_),z(s,m),et(m,i[11]),z(s,y),B&&B.m(s,null),z(s,F),z(s,T),b=!0,k||(A=[ye(m,"input",i[24]),ye(m,"input",i[25]),ye(T,"click",i[12]),ye(r,"click",i[13]),ye(r,"mouseenter",i[15]),ye(r,"mouseleave",i[16])],k=!0)},p(D,R){R[0]&32&&nt(e,e=D[5].inProgress)?(ut(),ce(L,1,1,Me),ft(),L=Kd(D),L.c(),se(L,1),L.m(t.parentNode,t)):L.p(D,R),D[7]?P&&(ut(),ce(P,1,1,()=>{P=null}),ft()):P?(P.p(D,R),R[0]&128&&se(P,1)):(P=Zd(D),P.c(),se(P,1),P.m(r,n));const w={};R[0]&16&&(w.isVisible=D[4]),a.$set(w),(!b||R[0]&8)&&we(u,D[3]);const S={};R[0]&4&&(S.node_id=D[2]),R[0]&1&&(S.element_id=D[0].d3f_class),R[1]&112&&(S.$$scope={dirty:R,ctx:D}),h.$set(S),R[0]&2048&&m.value!==D[11]&&et(m,D[11]),D[0].user_properties?B?B.p(D,R):(B=th(D),B.c(),B.m(s,F)):B&&(B.d(1),B=null)},i(D){b||(se(L),se(P),se(a.$$.fragment,D),se(h.$$.fragment,D),b=!0)},o(D){ce(L),ce(P),ce(a.$$.fragment,D),ce(h.$$.fragment,D),b=!1},d(D){D&&(v(t),v(r)),L.d(D),P&&P.d(),Ue(a),Ue(h),B&&B.d(),k=!1,mt(A)}}}function AE(i,e,t){let r,n,s,a,l,o;tt(i,Nr,J=>t(30,l=J)),tt(i,ot,J=>t(6,o=J));var u,f,p,d;let{data:c}=e,{isConnectable:h}=e,{id:_}=e,{nodeType:m="EventNode"}=e,{nodeTypeLabel:y="Event"}=e,{selected:F=void 0}=e;function T(){N(),c.user_properties.push(["",""])}function N(){for(let J=0;J<l.length;J++)l[J].data==c&&_t(ot,o=l[J],o)}const b=Cn();tt(i,b,J=>t(5,a=J));let k=!1,A=!1;function L(){t(8,A=!0)}function P(){t(8,A=!1)}function B(){return a.inProgress?"z-index: 999;":"z-index: -2; pointer-events: none;"}function D(){return A?"z-index: 2;":"visibility:hidden; pointer-events: none;"}const R=J=>{t(0,c.label=J.currentTarget.value,c),_t(ot,o.data.label=c.label,o)};function w(){r=this.value,t(11,r),t(0,c),t(6,o),t(2,_),t(20,u)}const S=(J,W)=>{t(0,c.user_properties[J][0]=W.currentTarget.value,c),_t(ot,o.data.user_properties[J][0]=W.currentTarget.value,o)};function X(J){n[J][0]=this.value,t(10,n),t(0,c),t(6,o),t(2,_),t(21,f)}const j=(J,W)=>{t(0,c.user_properties[J][1]=W.currentTarget.value,c),_t(ot,o.data.user_properties[J][1]=W.currentTarget.value,o)};function ne(J){s[J][1]=this.value,t(9,s),t(0,c),t(6,o),t(2,_),t(22,p)}return i.$$set=J=>{"data"in J&&t(0,c=J.data),"isConnectable"in J&&t(1,h=J.isConnectable),"id"in J&&t(2,_=J.id),"nodeType"in J&&t(19,m=J.nodeType),"nodeTypeLabel"in J&&t(3,y=J.nodeTypeLabel),"selected"in J&&t(4,F=J.selected)},i.$$.update=()=>{i.$$.dirty[0]&1048645&&t(11,r=(c==null?void 0:c.label)||((o==null?void 0:o.id)==_?t(20,u=o==null?void 0:o.data)===null||u===void 0?void 0:u.label:"")||"< label >"),i.$$.dirty[0]&2097221&&t(10,n=(c==null?void 0:c.user_properties)||((o==null?void 0:o.id)==_?t(21,f=o==null?void 0:o.data)===null||f===void 0?void 0:f.user_properties:"")||"< Property >"),i.$$.dirty[0]&4194373&&t(9,s=(c==null?void 0:c.user_properties)||((o==null?void 0:o.id)==_?t(22,p=o==null?void 0:o.data)===null||p===void 0?void 0:p.user_properties:"")||"< Value >"),i.$$.dirty[0]&8388644&&t(7,k=(t(23,d=a.toHandle)===null||d===void 0?void 0:d.nodeId)==_)},[c,h,_,y,F,a,o,k,A,s,n,r,T,N,b,L,P,B,D,m,u,f,p,d,R,w,S,X,j,ne]}class CE extends gt{constructor(e){super(),bt(this,e,AE,kE,nt,{data:0,isConnectable:1,id:2,nodeType:19,nodeTypeLabel:3,selected:4},null,[-1,-1])}}function nh(i,e){const t=i.internals.positionAbsolute||{x:0,y:0},r=e.internals.positionAbsolute||{x:0,y:0},n=(i.measured.width??0)/2,s=(i.measured.height??0)/2,a=t.x+n,l=t.y+s,o=r.x+(e.measured.width??0)/2,u=r.y+(e.measured.height??0)/2,f=(o-a)/(2*n)-(u-l)/(2*s),p=(o-a)/(2*n)+(u-l)/(2*s),d=1/(Math.abs(f)+Math.abs(p)),c=d*f,h=d*p,_=n*(c+h)+a,m=s*(-c+h)+l;return{x:_,y:m}}function ih(i,e){var a,l;if(!i.measured.width||!i.measured.height)return null;const t=Math.round(((a=i.internals.positionAbsolute)==null?void 0:a.x)??0),r=Math.round(((l=i.internals.positionAbsolute)==null?void 0:l.y)??0),n=Math.round(e.x),s=Math.round(e.y);return n<=t+1?ht.Left:n>=t+i.measured.width-1?ht.Right:s<=r+1?ht.Top:s>=r+i.measured.height-1?ht.Bottom:ht.Top}function kl(i,e){const t=nh(i,e),r=nh(e,i),n=ih(i,t),s=ih(e,r);return{sx:t.x,sy:t.y,tx:r.x,ty:r.y,sourcePos:n,targetPos:s}}function TE(i){let e,t;return e=new i[19].ItemProperty({props:{list:Rh,filter_value_store:i[20],select_item:i[21]}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n&1048576&&(s.filter_value_store=r[20]),n&2097152&&(s.select_item=r[21]),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function NE(i){let e,t,r=`translate(-50%, -50%) translate(${i[5]}px,${i[6]}px)`,n;return t=new di({props:{node_id:i[0],element_id:i[1].label,input_color:"#ffffff00",place_holder:String(i[1].label),flow_store_hook:$r,data_save_key:"d3f_property",$$slots:{default:[TE,({R:s,filter_value_store:a,select_item:l})=>({19:s,20:a,21:l}),({R:s,filter_value_store:a,select_item:l})=>(s?524288:0)|(a?1048576:0)|(l?2097152:0)]},$$scope:{ctx:i}}}),{c(){e=K("div"),Oe(t.$$.fragment),this.h()},l(s){e=Z(s,"DIV",{class:!0});var a=Ce(e);Be(t.$$.fragment,a),a.forEach(v),this.h()},h(){re(e,"class","edge-label-container svelte-566npr"),wt(e,"transform",r)},m(s,a){C(s,e,a),Le(t,e,null),n=!0},p(s,a){const l={};a&1&&(l.node_id=s[0]),a&2&&(l.element_id=s[1].label),a&2&&(l.place_holder=String(s[1].label)),a&7340032&&(l.$$scope={dirty:a,ctx:s}),t.$set(l),a&96&&r!==(r=`translate(-50%, -50%) translate(${s[5]}px,${s[6]}px)`)&&wt(e,"transform",r)},i(s){n||(se(t.$$.fragment,s),n=!0)},o(s){ce(t.$$.fragment,s),n=!1},d(s){s&&v(e),Ue(t)}}}function SE(i){let e,t,r,n;return e=new km({props:{path:i[4],markerEnd:i[2],style:i[3]}}),r=new Am({props:{$$slots:{default:[NE]},$$scope:{ctx:i}}}),{c(){Oe(e.$$.fragment),t=oe(),Oe(r.$$.fragment)},l(s){Be(e.$$.fragment,s),t=ue(s),Be(r.$$.fragment,s)},m(s,a){Le(e,s,a),C(s,t,a),Le(r,s,a),n=!0},p(s,[a]){const l={};a&16&&(l.path=s[4]),a&4&&(l.markerEnd=s[2]),a&8&&(l.style=s[3]),e.$set(l);const o={};a&4194403&&(o.$$scope={dirty:a,ctx:s}),r.$set(o)},i(s){n||(se(e.$$.fragment,s),se(r.$$.fragment,s),n=!0)},o(s){ce(e.$$.fragment,s),ce(r.$$.fragment,s),n=!1},d(s){s&&v(t),Ue(e,s),Ue(r,s)}}}function IE(i,e,t){let r,n,s,a=Me,l=()=>(a(),a=zr(n,B=>t(17,s=B)),n),o,u=Me,f=()=>(u(),u=zr(r,B=>t(18,o=B)),r);i.$$.on_destroy.push(()=>a()),i.$$.on_destroy.push(()=>u());let{id:p}=e,{data:d}=e,{sourceX:c}=e,{sourceY:h}=e,{source:_}=e,{sourcePosition:m}=e,{targetX:y}=e,{targetY:F}=e,{target:T}=e,{targetPosition:N}=e,{markerEnd:b=Dh.ArrowClosed}=e,{style:k="stroke-width: 2px"}=e,A,L,P;return i.$$set=B=>{"id"in B&&t(0,p=B.id),"data"in B&&t(1,d=B.data),"sourceX"in B&&t(9,c=B.sourceX),"sourceY"in B&&t(10,h=B.sourceY),"source"in B&&t(11,_=B.source),"sourcePosition"in B&&t(12,m=B.sourcePosition),"targetX"in B&&t(13,y=B.targetX),"targetY"in B&&t(14,F=B.targetY),"target"in B&&t(15,T=B.target),"targetPosition"in B&&t(16,N=B.targetPosition),"markerEnd"in B&&t(2,b=B.markerEnd),"style"in B&&t(3,k=B.style)},i.$$.update=()=>{if(i.$$.dirty&2048&&f(t(8,r=au(_))),i.$$.dirty&32768&&l(t(7,n=au(T))),i.$$.dirty&393216)if(o&&s){const B=kl(o,s);t(4,[A,L,P]=nl({sourceX:B.sx,sourceY:B.sy,sourcePosition:B.sourcePos,targetX:B.tx,targetY:B.ty,targetPosition:B.targetPos}),A,(t(5,L),t(18,o),t(17,s)),(t(6,P),t(18,o),t(17,s)))}else t(4,A=void 0)},[p,d,b,k,A,L,P,n,r,c,h,_,m,y,F,T,N,s,o]}class PE extends gt{constructor(e){super(),bt(this,e,IE,SE,nt,{id:0,data:1,sourceX:9,sourceY:10,source:11,sourcePosition:12,targetX:13,targetY:14,target:15,targetPosition:16,markerEnd:2,style:3})}}function ah(i,e,t){const r=i.slice();return r[7]=e[t],r}function sh(i){let e,t=Ge(i[2]),r=[];for(let n=0;n<t.length;n+=1)r[n]=lh(ah(i,t,n));return{c(){e=K("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=Z(n,"DIV",{class:!0});var s=Ce(e);for(let a=0;a<r.length;a+=1)r[a].l(s);s.forEach(v),this.h()},h(){re(e,"class","file-list svelte-9u10j")},m(n,s){C(n,e,s);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null)},p(n,s){if(s&20){t=Ge(n[2]);let a;for(a=0;a<t.length;a+=1){const l=ah(n,t,a);r[a]?r[a].p(l,s):(r[a]=lh(l),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},d(n){n&&v(e),Dt(r,n)}}}function lh(i){let e,t=i[7].name+"",r,n,s=i[7].nodeCount+"",a,l,o=i[7].edgeCount+"",u,f,p,d;function c(){return i[5](i[7])}return{c(){e=K("div"),r=q(t),n=q(" ("),a=q(s),l=q(" nodes, "),u=q(o),f=q(` edges)
          `),this.h()},l(h){e=Z(h,"DIV",{class:!0});var _=Ce(e);r=M(_,t),n=M(_," ("),a=M(_,s),l=M(_," nodes, "),u=M(_,o),f=M(_,` edges)
          `),_.forEach(v),this.h()},h(){re(e,"class","file-item svelte-9u10j")},m(h,_){C(h,e,_),z(e,r),z(e,n),z(e,a),z(e,l),z(e,u),z(e,f),p||(d=ye(e,"click",c),p=!0)},p(h,_){i=h,_&4&&t!==(t=i[7].name+"")&&we(r,t),_&4&&s!==(s=i[7].nodeCount+"")&&we(a,s),_&4&&o!==(o=i[7].edgeCount+"")&&we(u,o)},d(h){h&&v(e),p=!1,d()}}}function RE(i){let e,t,r,n,s,a,l=i[1]&&sh(i);return{c(){e=K("div"),t=K("button"),r=q(i[0]),n=oe(),l&&l.c(),this.h()},l(o){e=Z(o,"DIV",{class:!0});var u=Ce(e);t=Z(u,"BUTTON",{class:!0});var f=Ce(t);r=M(f,i[0]),f.forEach(v),n=ue(u),l&&l.l(u),u.forEach(v),this.h()},h(){re(t,"class","svelte-9u10j"),re(e,"class","pick-list-container svelte-9u10j")},m(o,u){C(o,e,u),z(e,t),z(t,r),z(e,n),l&&l.m(e,null),s||(a=ye(t,"click",i[3]),s=!0)},p(o,[u]){u&1&&we(r,o[0]),o[1]?l?l.p(o,u):(l=sh(o),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:Me,o:Me,d(o){o&&v(e),l&&l.d(),s=!1,a()}}}async function FE(){return await(await fetch("/cad/examples.json")).json()}function OE(i,e,t){const r=os();let n=!1,{selectedFile:s="Example Graphs"}=e,a=[];function l(){t(1,n=!n)}function o(f){t(0,s=f),t(1,n=!1),r("fileSelected",f)}ls(async()=>{t(2,a=await FE())});const u=f=>o(f.name);return i.$$set=f=>{"selectedFile"in f&&t(0,s=f.selectedFile)},[s,n,a,l,o,u]}class BE extends gt{constructor(e){super(),bt(this,e,OE,RE,nt,{selectedFile:0})}}function oh(i){let e,t,r,n,s;return{c(){e=Lo("path"),t=oe(),r=Lo("circle"),this.h()},l(a){e=Uo(a,"path",{fill:!0,"stroke-width":!0,class:!0,stroke:!0,d:!0}),Ce(e).forEach(v),t=ue(a),r=Uo(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),Ce(r).forEach(v),this.h()},h(){re(e,"fill","transparent"),re(e,"stroke-width",2.5),re(e,"class","animated"),re(e,"stroke","black"),re(e,"d",i[2]),re(r,"cx",n=i[0].tx),re(r,"cy",s=i[0].ty),re(r,"r",3),re(r,"stroke","black"),re(r,"stroke-width",1.5)},m(a,l){C(a,e,l),C(a,t,l),C(a,r,l)},p(a,l){l&4&&re(e,"d",a[2]),l&1&&n!==(n=a[0].tx)&&re(r,"cx",n),l&1&&s!==(s=a[0].ty)&&re(r,"cy",s)},d(a){a&&(v(e),v(t),v(r))}}}function LE(i){let e,t=i[1].inProgress&&oh(i);return{c(){t&&t.c(),e=Re()},l(r){t&&t.l(r),e=Re()},m(r,n){t&&t.m(r,n),C(r,e,n)},p(r,[n]){r[1].inProgress?t?t.p(r,n):(t=oh(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Me,o:Me,d(r){r&&v(e),t&&t.d(r)}}}function UE(i,e,t){let r;const n=Cn();tt(i,n,l=>t(1,r=l));let s,a;return i.$$.update=()=>{if(i.$$.dirty&3){const l=structuredClone(r.fromNode);r.isValid?(t(0,a=kl(r.fromNode,r.toNode)),t(2,s=nl({sourceX:a.sx,sourceY:a.sy,sourcePosition:a.sourcePos,targetX:a.tx,targetY:a.ty,targetPosition:a.targetPos})[0])):(l.id="-1",l.measured={width:1,height:1},l.position={x:r.to.x,y:r.to.y},l.internals.positionAbsolute={x:r.to.x,y:r.to.y},t(0,a=kl(r.fromNode,l)),t(2,s=nl({sourceX:a.sx,sourceY:a.sy,sourcePosition:a.sourcePos,targetX:a.tx,targetY:a.ty,targetPosition:a.targetPos})[0]))}},[a,r,s,n]}class jE extends gt{constructor(e){super(),bt(this,e,UE,LE,nt,{})}}function uh(i,e,t){const r=i.slice();return r[11]=e[t],r}function fh(i){let e,t,r,n,s,a,l,o,u,f,p,d,c;const h=i[7].default,_=Vt(h,i,i[6],null);let m=Ge(i[3]),y=[];for(let F=0;F<m.length;F+=1)y[F]=ch(uh(i,m,F));return{c(){e=K("div"),t=K("div"),r=K("h2"),n=q(i[1]),s=oe(),a=K("p"),l=q(i[2]),o=oe(),_&&_.c(),u=oe(),f=K("div");for(let F=0;F<y.length;F+=1)y[F].c();this.h()},l(F){e=Z(F,"DIV",{class:!0});var T=Ce(e);t=Z(T,"DIV",{class:!0});var N=Ce(t);r=Z(N,"H2",{});var b=Ce(r);n=M(b,i[1]),b.forEach(v),s=ue(N),a=Z(N,"P",{});var k=Ce(a);l=M(k,i[2]),k.forEach(v),o=ue(N),_&&_.l(N),u=ue(N),f=Z(N,"DIV",{class:!0});var A=Ce(f);for(let L=0;L<y.length;L+=1)y[L].l(A);A.forEach(v),N.forEach(v),T.forEach(v),this.h()},h(){re(f,"class","options svelte-zbcx3u"),re(t,"class","modal-content center text-center svelte-zbcx3u"),re(e,"class","modal-overlay svelte-zbcx3u")},m(F,T){C(F,e,T),z(e,t),z(t,r),z(r,n),z(t,s),z(t,a),z(a,l),z(t,o),_&&_.m(t,null),z(t,u),z(t,f);for(let N=0;N<y.length;N+=1)y[N]&&y[N].m(f,null);p=!0,d||(c=[ye(t,"click",Wt(i[8])),ye(e,"click",i[4])],d=!0)},p(F,T){if((!p||T&2)&&we(n,F[1]),(!p||T&4)&&we(l,F[2]),_&&_.p&&(!p||T&64)&&zt(_,h,F,F[6],p?xt(h,F[6],T,null):Ht(F[6]),null),T&40){m=Ge(F[3]);let N;for(N=0;N<m.length;N+=1){const b=uh(F,m,N);y[N]?y[N].p(b,T):(y[N]=ch(b),y[N].c(),y[N].m(f,null))}for(;N<y.length;N+=1)y[N].d(1);y.length=m.length}},i(F){p||(se(_,F),p=!0)},o(F){ce(_,F),p=!1},d(F){F&&v(e),_&&_.d(F),Dt(y,F),d=!1,mt(c)}}}function ch(i){let e,t=i[11].label+"",r,n,s,a;function l(){return i[9](i[11])}return{c(){e=K("button"),r=q(t),n=oe(),this.h()},l(o){e=Z(o,"BUTTON",{class:!0});var u=Ce(e);r=M(u,t),n=ue(u),u.forEach(v),this.h()},h(){re(e,"class","svelte-zbcx3u")},m(o,u){C(o,e,u),z(e,r),z(e,n),s||(a=ye(e,"click",l),s=!0)},p(o,u){i=o,u&8&&t!==(t=i[11].label+"")&&we(r,t)},d(o){o&&v(e),s=!1,a()}}}function qE(i){let e,t,r=i[0]&&fh(i);return{c(){r&&r.c(),e=Re()},l(n){r&&r.l(n),e=Re()},m(n,s){r&&r.m(n,s),C(n,e,s),t=!0},p(n,[s]){n[0]?r?(r.p(n,s),s&1&&se(r,1)):(r=fh(n),r.c(),se(r,1),r.m(e.parentNode,e)):r&&(ut(),ce(r,1,1,()=>{r=null}),ft())},i(n){t||(se(r),t=!0)},o(n){ce(r),t=!1},d(n){n&&v(e),r&&r.d(n)}}}function ME(i,e,t){let{$$slots:r={},$$scope:n}=e,{is_open:s=!1}=e,{title:a=""}=e,{content:l=""}=e,{options:o=[{label:"Cancel",value:"cancel"}]}=e;const u=os();function f(){t(0,s=!1)}function p(h){u("close_button_modal",h),f()}function d(h){Fr.call(this,i,h)}const c=h=>p(h);return i.$$set=h=>{"is_open"in h&&t(0,s=h.is_open),"title"in h&&t(1,a=h.title),"content"in h&&t(2,l=h.content),"options"in h&&t(3,o=h.options),"$$scope"in h&&t(6,n=h.$$scope)},[s,a,l,o,f,p,n,r,d,c]}class VE extends gt{constructor(e){super(),bt(this,e,ME,qE,nt,{is_open:0,title:1,content:2,options:3})}}function dh(i,e,t){const r=i.slice();return r[63]=e[t],r[65]=t,r}function zE(i){let e,t='This is an (very) alpha-level preview release. Please review and file bugs <a href="https://github.com/d3fend/d3fend/issues/14">here. </a>Early stage <a href="./docs">docs.</a>';return{c(){e=K("div"),e.innerHTML=t,this.h()},l(r){e=Z(r,"DIV",{class:!0,"data-svelte-h":!0}),Ke(e)!=="svelte-x19ykg"&&(e.innerHTML=t),this.h()},h(){re(e,"class","font-small")},m(r,n){C(r,e,n)},p:Me,d(r){r&&v(e)}}}function hh(i){let e=i[63].message+"",t,r;return{c(){t=q(e),r=K("br")},l(n){t=M(n,e),r=Z(n,"BR",{})},m(n,s){C(n,t,s),C(n,r,s)},p(n,s){s[0]&32&&e!==(e=n[63].message+"")&&we(t,e)},d(n){n&&(v(t),v(r))}}}function HE(i){let e,t="<code>The tool fixed the errors needed to run but here is list of all import errors and warnings.</code>",r,n,s,a,l,o,u,f,p,d=Ge(i[5]),c=[];for(let h=0;h<d.length;h+=1)c[h]=hh(dh(i,d,h));return{c(){e=K("div"),e.innerHTML=t,r=oe(),n=K("br"),s=oe(),a=K("br"),l=oe();for(let h=0;h<c.length;h+=1)c[h].c();o=oe(),u=K("br"),f=oe(),p=K("br")},l(h){e=Z(h,"DIV",{"data-svelte-h":!0}),Ke(e)!=="svelte-7el432"&&(e.innerHTML=t),r=ue(h),n=Z(h,"BR",{}),s=ue(h),a=Z(h,"BR",{}),l=ue(h);for(let _=0;_<c.length;_+=1)c[_].l(h);o=ue(h),u=Z(h,"BR",{}),f=ue(h),p=Z(h,"BR",{})},m(h,_){C(h,e,_),C(h,r,_),C(h,n,_),C(h,s,_),C(h,a,_),C(h,l,_);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(h,_);C(h,o,_),C(h,u,_),C(h,f,_),C(h,p,_)},p(h,_){if(_[0]&32){d=Ge(h[5]);let m;for(m=0;m<d.length;m+=1){const y=dh(h,d,m);c[m]?c[m].p(y,_):(c[m]=hh(y),c[m].c(),c[m].m(o.parentNode,o))}for(;m<c.length;m+=1)c[m].d(1);c.length=d.length}},d(h){h&&(v(e),v(r),v(n),v(s),v(a),v(l),v(o),v(u),v(f),v(p)),Dt(c,h)}}}function xE(i){let e;return{c(){e=q("Please only load models from URLs you trust!")},l(t){e=M(t,"Please only load models from URLs you trust!")},m(t,r){C(t,e,r)},d(t){t&&v(e)}}}function XE(i){let e,t,r,n,s,a,l,o,u,f,p;return f=new fs({props:{$$slots:{default:[xE]},$$scope:{ctx:i}}}),{c(){e=K("br"),t=oe(),r=K("code"),n=q(i[4]),s=oe(),a=K("br"),l=oe(),o=K("br"),u=oe(),Oe(f.$$.fragment),this.h()},l(d){e=Z(d,"BR",{}),t=ue(d),r=Z(d,"CODE",{class:!0});var c=Ce(r);n=M(c,i[4]),c.forEach(v),s=ue(d),a=Z(d,"BR",{}),l=ue(d),o=Z(d,"BR",{}),u=ue(d),Be(f.$$.fragment,d),this.h()},h(){re(r,"class","center text-center")},m(d,c){C(d,e,c),C(d,t,c),C(d,r,c),z(r,n),C(d,s,c),C(d,a,c),C(d,l,c),C(d,o,c),C(d,u,c),Le(f,d,c),p=!0},p(d,c){(!p||c[0]&16)&&we(n,d[4]);const h={};c[2]&16&&(h.$$scope={dirty:c,ctx:d}),f.$set(h)},i(d){p||(se(f.$$.fragment,d),p=!0)},o(d){ce(f.$$.fragment,d),p=!1},d(d){d&&(v(e),v(t),v(r),v(s),v(a),v(l),v(o),v(u)),Ue(f,d)}}}function GE(i){let e;return{c(){e=q("Please only load models from URLs you trust!")},l(t){e=M(t,"Please only load models from URLs you trust!")},m(t,r){C(t,e,r)},d(t){t&&v(e)}}}function QE(i){let e,t,r,n,s,a;return s=new fs({props:{$$slots:{default:[GE]},$$scope:{ctx:i}}}),{c(){e=K("br"),t=oe(),r=K("br"),n=oe(),Oe(s.$$.fragment)},l(l){e=Z(l,"BR",{}),t=ue(l),r=Z(l,"BR",{}),n=ue(l),Be(s.$$.fragment,l)},m(l,o){C(l,e,o),C(l,t,o),C(l,r,o),C(l,n,o),Le(s,l,o),a=!0},p(l,o){const u={};o[2]&16&&(u.$$scope={dirty:o,ctx:l}),s.$set(u)},i(l){a||(se(s.$$.fragment,l),a=!0)},o(l){ce(s.$$.fragment,l),a=!1},d(l){l&&(v(e),v(t),v(r),v(n)),Ue(s,l)}}}function ph(i){let e,t,r,n;return e=new fs({props:{alert_type:"warning",$$slots:{default:[$E]},$$scope:{ctx:i}}}),{c(){Oe(e.$$.fragment),t=oe(),r=K("br")},l(s){Be(e.$$.fragment,s),t=ue(s),r=Z(s,"BR",{})},m(s,a){Le(e,s,a),C(s,t,a),C(s,r,a),n=!0},i(s){n||(se(e.$$.fragment,s),n=!0)},o(s){ce(e.$$.fragment,s),n=!1},d(s){s&&(v(t),v(r)),Ue(e,s)}}}function $E(i){let e;return{c(){e=q("Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},l(t){e=M(t,"Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},m(t,r){C(t,e,r)},d(t){t&&v(e)}}}function WE(i){let e,t,r,n,s=i[15].length+"",a,l,o,u,f,p,d,c,h,_,m="copy",y,F,T,N=i[15].length>2048&&ph(i);return{c(){N&&N.c(),e=oe(),t=K("div"),r=K("code"),n=q("The encoded model has a string length of "),a=q(s),l=q(" characters."),o=oe(),u=K("p"),f=K("button"),p=K("a"),d=q("Share URL"),c=oe(),h=K("span"),_=K("button"),_.textContent=m,this.h()},l(b){N&&N.l(b),e=ue(b),t=Z(b,"DIV",{});var k=Ce(t);r=Z(k,"CODE",{});var A=Ce(r);n=M(A,"The encoded model has a string length of "),a=M(A,s),l=M(A," characters."),A.forEach(v),k.forEach(v),o=ue(b),u=Z(b,"P",{});var L=Ce(u);f=Z(L,"BUTTON",{class:!0});var P=Ce(f);p=Z(P,"A",{href:!0});var B=Ce(p);d=M(B,"Share URL"),B.forEach(v),P.forEach(v),c=ue(L),h=Z(L,"SPAN",{});var D=Ce(h);_=Z(D,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(_)!=="svelte-1uua65l"&&(_.textContent=m),D.forEach(v),L.forEach(v),this.h()},h(){re(p,"href",i[16]),re(f,"class","svelte-wfca9"),re(_,"class","svelte-wfca9")},m(b,k){N&&N.m(b,k),C(b,e,k),C(b,t,k),z(t,r),z(r,n),z(r,a),z(r,l),C(b,o,k),C(b,u,k),z(u,f),z(f,p),z(p,d),z(u,c),z(u,h),z(h,_),y=!0,F||(T=ye(_,"click",i[38]),F=!0)},p(b,k){b[15].length>2048?N?k[0]&32768&&se(N,1):(N=ph(b),N.c(),se(N,1),N.m(e.parentNode,e)):N&&(ut(),ce(N,1,1,()=>{N=null}),ft()),(!y||k[0]&32768)&&s!==(s=b[15].length+"")&&we(a,s),(!y||k[0]&65536)&&re(p,"href",b[16])},i(b){y||(se(N),y=!0)},o(b){ce(N),y=!1},d(b){b&&(v(e),v(t),v(o),v(u)),N&&N.d(b),F=!1,T()}}}function _h(i){let e,t,r,n,s,a=i[6]>1&&mh();return{c(){e=K("button"),t=q(i[6]),r=q(" import alert"),a&&a.c(),this.h()},l(l){e=Z(l,"BUTTON",{class:!0});var o=Ce(e);t=M(o,i[6]),r=M(o," import alert"),a&&a.l(o),o.forEach(v),this.h()},h(){re(e,"class","svelte-wfca9")},m(l,o){C(l,e,o),z(e,t),z(e,r),a&&a.m(e,null),n||(s=ye(e,"click",i[24]),n=!0)},p(l,o){o[0]&64&&we(t,l[6]),l[6]>1?a||(a=mh(),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(l){l&&v(e),a&&a.d(),n=!1,s()}}}function mh(i){let e;return{c(){e=q("s")},l(t){e=M(t,"s")},m(t,r){C(t,e,r)},d(t){t&&v(e)}}}function vh(i){let e,t,r,n,s,a,l;return r=new Bm({props:{display:"inline"}}),{c(){e=K("span"),t=K("span"),Oe(r.$$.fragment),n=oe(),s=K("span"),a=q(i[18]),this.h()},l(o){e=Z(o,"SPAN",{class:!0});var u=Ce(e);t=Z(u,"SPAN",{});var f=Ce(t);Be(r.$$.fragment,f),f.forEach(v),n=ue(u),s=Z(u,"SPAN",{});var p=Ce(s);a=M(p,i[18]),p.forEach(v),u.forEach(v),this.h()},h(){re(e,"class","right")},m(o,u){C(o,e,u),z(e,t),Le(r,t,null),z(e,n),z(e,s),z(s,a),l=!0},p(o,u){(!l||u[0]&262144)&&we(a,o[18])},i(o){l||(se(r.$$.fragment,o),l=!0)},o(o){ce(r.$$.fragment,o),l=!1},d(o){o&&v(e),Ue(r)}}}function gh(i){let e,t;return e=new h3({props:{onClick:i[33],id:i[10].id,top:i[10].top,left:i[10].left,right:i[10].right,bottom:i[10].bottom}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,n){const s={};n[0]&1024&&(s.id=r[10].id),n[0]&1024&&(s.top=r[10].top),n[0]&1024&&(s.left=r[10].left),n[0]&1024&&(s.right=r[10].right),n[0]&1024&&(s.bottom=r[10].bottom),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function YE(i){let e,t,r,n,s,a,l;e=new Tm({props:{position:"top-left"}}),r=new Nm({props:{variant:Sm.Dots}});let o=i[10]&&gh(i);return a=new Im({props:{position:"top-right"}}),{c(){Oe(e.$$.fragment),t=oe(),Oe(r.$$.fragment),n=oe(),o&&o.c(),s=oe(),Oe(a.$$.fragment)},l(u){Be(e.$$.fragment,u),t=ue(u),Be(r.$$.fragment,u),n=ue(u),o&&o.l(u),s=ue(u),Be(a.$$.fragment,u)},m(u,f){Le(e,u,f),C(u,t,f),Le(r,u,f),C(u,n,f),o&&o.m(u,f),C(u,s,f),Le(a,u,f),l=!0},p(u,f){u[10]?o?(o.p(u,f),f[0]&1024&&se(o,1)):(o=gh(u),o.c(),se(o,1),o.m(s.parentNode,s)):o&&(ut(),ce(o,1,1,()=>{o=null}),ft())},i(u){l||(se(e.$$.fragment,u),se(r.$$.fragment,u),se(o),se(a.$$.fragment,u),l=!0)},o(u){ce(e.$$.fragment,u),ce(r.$$.fragment,u),ce(o),ce(a.$$.fragment,u),l=!1},d(u){u&&(v(t),v(n),v(s)),Ue(e,u),Ue(r,u),o&&o.d(u),Ue(a,u)}}}function JE(i){let e,t;return e=new jE({props:{slot:"connectionLine"}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p:Me,i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function bh(i){let e,t="<b>-</b>",r,n,s="node properties",a,l;return{c(){e=K("button"),e.innerHTML=t,r=oe(),n=K("code"),n.textContent=s,this.h()},l(o){e=Z(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(e)!=="svelte-1nlkb58"&&(e.innerHTML=t),r=ue(o),n=Z(o,"CODE",{class:!0,"data-svelte-h":!0}),Ke(n)!=="svelte-1xrwlep"&&(n.textContent=s),this.h()},h(){re(e,"class","svelte-wfca9"),re(n,"class","text-center")},m(o,u){C(o,e,u),C(o,r,u),C(o,n,u),a||(l=ye(e,"click",i[44]),a=!0)},p:Me,d(o){o&&(v(e),v(r),v(n)),a=!1,l()}}}function wh(i){let e,t="<b>+</b>",r,n;return{c(){e=K("button"),e.innerHTML=t,this.h()},l(s){e=Z(s,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(e)!=="svelte-efi5au"&&(e.innerHTML=t),this.h()},h(){re(e,"class","svelte-wfca9")},m(s,a){C(s,e,a),r||(n=ye(e,"click",i[45]),r=!0)},p:Me,d(s){s&&v(e),r=!1,n()}}}function KE(i){let e,t,r,n,s,a,l,o,u,f,p,d,c,h,_,m,y,F="Load",T,N,b="Merge",k,A,L="Clear",P,B,D="Save",R,w,S,X="Save As...",j,ne="Save As JSON...",J,W="Save As Turtle...",x,G,le="Share",Q,ae,Ve,ze,De,Pe,ve,he,Fe,lt,He,fe,Te,dt,Ot,tr,At,Qt,Kt,pt,Ct;function Ut(Ie){i[36](Ie)}let Zt={title:i[2].title,content:i[2].content,options:i[2].options,$$slots:{default:[XE]},$$scope:{ctx:i}};i[2].is_open!==void 0&&(Zt.is_open=i[2].is_open),e=new Uc({props:Zt}),Mt.push(()=>mr(e,"is_open",Ut)),e.$on("optionSelected",i[19]);function pr(Ie){i[37](Ie)}let V={title:i[3].title,content:i[3].content,options:i[3].options,$$slots:{default:[QE]},$$scope:{ctx:i}};i[3].is_open!==void 0&&(V.is_open=i[3].is_open),n=new Uc({props:V}),Mt.push(()=>mr(n,"is_open",pr)),n.$on("optionSelected",i[20]);function I(Ie){i[39](Ie)}let O={title:"Share this model with a URL",$$slots:{default:[WE]},$$scope:{ctx:i}};i[14]!==void 0&&(O.is_open=i[14]),l=new g3({props:O}),Mt.push(()=>mr(l,"is_open",I));function $(Ie){i[40](Ie)}let de={};i[9]!==void 0&&(de.selectedFile=i[9]),p=new BE({props:de}),Mt.push(()=>mr(p,"selectedFile",$)),p.$on("fileSelected",i[30]);let Ee=i[6]&&_h(i),Ae=i[18]&&vh(i);Fe=new Cm({props:{nodes:Nr,nodeTypes:i[0],edges:la,edgeTypes:i[1],fitView:!0,defaultEdgeOptions:i[21],maxZoom:2,minZoom:.3,$$slots:{connectionLine:[JE],default:[YE]},$$scope:{ctx:i}}}),Fe.$on("dragover",i[27]),Fe.$on("drop",i[29]),Fe.$on("connect",i[28]),Fe.$on("nodecontextmenu",i[32]),Fe.$on("paneclick",i[33]),Fe.$on("onedgecreate",eD),He=new C3({});let Je=i[17]&&bh(i),it=!i[17]&&wh(i);return At=new S3({}),{c(){Oe(e.$$.fragment),r=oe(),Oe(n.$$.fragment),a=oe(),Oe(l.$$.fragment),u=oe(),f=K("div"),Oe(p.$$.fragment),c=oe(),h=K("br"),_=oe(),m=K("div"),y=K("button"),y.textContent=F,T=oe(),N=K("button"),N.textContent=b,k=oe(),A=K("button"),A.textContent=L,P=oe(),B=K("button"),B.textContent=D,R=oe(),w=K("select"),S=K("option"),S.textContent=X,j=K("option"),j.textContent=ne,J=K("option"),J.textContent=W,x=oe(),G=K("button"),G.textContent=le,Q=q(`
        filename:    `),ae=K("input"),Ve=oe(),Ee&&Ee.c(),ze=oe(),Ae&&Ae.c(),De=oe(),Pe=K("main"),ve=K("div"),he=K("div"),Oe(Fe.$$.fragment),lt=oe(),Oe(He.$$.fragment),Te=oe(),dt=K("div"),Je&&Je.c(),Ot=oe(),it&&it.c(),tr=oe(),Oe(At.$$.fragment),this.h()},l(Ie){Be(e.$$.fragment,Ie),r=ue(Ie),Be(n.$$.fragment,Ie),a=ue(Ie),Be(l.$$.fragment,Ie),u=ue(Ie),f=Z(Ie,"DIV",{class:!0});var Xe=Ce(f);Be(p.$$.fragment,Xe),Xe.forEach(v),c=ue(Ie),h=Z(Ie,"BR",{}),_=ue(Ie),m=Z(Ie,"DIV",{id:!0,class:!0});var Ze=Ce(m);y=Z(Ze,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(y)!=="svelte-r4end6"&&(y.textContent=F),T=ue(Ze),N=Z(Ze,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(N)!=="svelte-1s1l97g"&&(N.textContent=b),k=ue(Ze),A=Z(Ze,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(A)!=="svelte-1o4uly3"&&(A.textContent=L),P=ue(Ze),B=Z(Ze,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(B)!=="svelte-qm8vdx"&&(B.textContent=D),R=ue(Ze),w=Z(Ze,"SELECT",{class:!0});var ar=Ce(w);S=Z(ar,"OPTION",{"data-svelte-h":!0}),Ke(S)!=="svelte-hmrlsb"&&(S.textContent=X),j=Z(ar,"OPTION",{"data-svelte-h":!0}),Ke(j)!=="svelte-1q30tr1"&&(j.textContent=ne),J=Z(ar,"OPTION",{"data-svelte-h":!0}),Ke(J)!=="svelte-pf55hp"&&(J.textContent=W),ar.forEach(v),x=ue(Ze),G=Z(Ze,"BUTTON",{class:!0,"data-svelte-h":!0}),Ke(G)!=="svelte-mqt2ui"&&(G.textContent=le),Q=M(Ze,`
        filename:    `),ae=Z(Ze,"INPUT",{style:!0,type:!0}),Ve=ue(Ze),Ee&&Ee.l(Ze),ze=ue(Ze),Ae&&Ae.l(Ze),Ze.forEach(v),De=ue(Ie),Pe=Z(Ie,"MAIN",{class:!0});var Hr=Ce(Pe);ve=Z(Hr,"DIV",{id:!0,class:!0});var lr=Ce(ve);he=Z(lr,"DIV",{id:!0,class:!0});var gr=Ce(he);Be(Fe.$$.fragment,gr),lt=ue(gr),Be(He.$$.fragment,gr),gr.forEach(v),Te=ue(lr),dt=Z(lr,"DIV",{class:!0});var Wr=Ce(dt);Je&&Je.l(Wr),Ot=ue(Wr),it&&it.l(Wr),tr=ue(Wr),Be(At.$$.fragment,Wr),Wr.forEach(v),lr.forEach(v),Hr.forEach(v),this.h()},h(){re(f,"class","toolbar-examples"),re(y,"class","svelte-wfca9"),re(N,"class","svelte-wfca9"),re(A,"class","svelte-wfca9"),re(B,"class","svelte-wfca9"),S.__value="",et(S,S.__value),j.__value="json",et(j,j.__value),J.__value="turtle",et(J,J.__value),re(w,"class","save-as-dropdown svelte-wfca9"),i[8]===void 0&&rl(()=>i[41].call(w)),re(G,"class"," svelte-wfca9"),wt(ae,"width","275px"),re(ae,"type","text"),re(m,"id","toolbar"),re(m,"class","svelte-wfca9"),re(he,"id","flow"),re(he,"class","svelte-wfca9"),rl(()=>i[43].call(he)),re(dt,"class",Qt="side-panel "+(i[17]?"open":"close")+" svelte-wfca9"),re(ve,"id","main-container"),re(ve,"class","svelte-wfca9"),re(Pe,"class","svelte-wfca9")},m(Ie,Xe){Le(e,Ie,Xe),C(Ie,r,Xe),Le(n,Ie,Xe),C(Ie,a,Xe),Le(l,Ie,Xe),C(Ie,u,Xe),C(Ie,f,Xe),Le(p,f,null),C(Ie,c,Xe),C(Ie,h,Xe),C(Ie,_,Xe),C(Ie,m,Xe),z(m,y),z(m,T),z(m,N),z(m,k),z(m,A),z(m,P),z(m,B),z(m,R),z(m,w),z(w,S),z(w,j),z(w,J),jo(w,i[8],!0),z(m,x),z(m,G),z(m,Q),z(m,ae),et(ae,i[7]),z(m,Ve),Ee&&Ee.m(m,null),z(m,ze),Ae&&Ae.m(m,null),C(Ie,De,Xe),C(Ie,Pe,Xe),z(Pe,ve),z(ve,he),Le(Fe,he,null),z(he,lt),Le(He,he,null),fe=um(he,i[43].bind(he)),z(ve,Te),z(ve,dt),Je&&Je.m(dt,null),z(dt,Ot),it&&it.m(dt,null),z(dt,tr),Le(At,dt,null),Kt=!0,pt||(Ct=[ye(y,"click",i[25]),ye(N,"click",i[26]),ye(A,"click",i[31]),ye(B,"click",i[22]),ye(w,"change",i[41]),ye(w,"change",i[23]),ye(G,"click",i[34]),ye(ae,"input",i[42])],pt=!0)},p(Ie,Xe){const Ze={};Xe[0]&4&&(Ze.title=Ie[2].title),Xe[0]&4&&(Ze.content=Ie[2].content),Xe[0]&4&&(Ze.options=Ie[2].options),Xe[0]&16|Xe[2]&16&&(Ze.$$scope={dirty:Xe,ctx:Ie}),!t&&Xe[0]&4&&(t=!0,Ze.is_open=Ie[2].is_open,_r(()=>t=!1)),e.$set(Ze);const ar={};Xe[0]&8&&(ar.title=Ie[3].title),Xe[0]&8&&(ar.content=Ie[3].content),Xe[0]&8&&(ar.options=Ie[3].options),Xe[2]&16&&(ar.$$scope={dirty:Xe,ctx:Ie}),!s&&Xe[0]&8&&(s=!0,ar.is_open=Ie[3].is_open,_r(()=>s=!1)),n.$set(ar);const Hr={};Xe[0]&98304|Xe[2]&16&&(Hr.$$scope={dirty:Xe,ctx:Ie}),!o&&Xe[0]&16384&&(o=!0,Hr.is_open=Ie[14],_r(()=>o=!1)),l.$set(Hr);const lr={};!d&&Xe[0]&512&&(d=!0,lr.selectedFile=Ie[9],_r(()=>d=!1)),p.$set(lr),Xe[0]&256&&jo(w,Ie[8]),Xe[0]&128&&ae.value!==Ie[7]&&et(ae,Ie[7]),Ie[6]?Ee?Ee.p(Ie,Xe):(Ee=_h(Ie),Ee.c(),Ee.m(m,ze)):Ee&&(Ee.d(1),Ee=null),Ie[18]?Ae?(Ae.p(Ie,Xe),Xe[0]&262144&&se(Ae,1)):(Ae=vh(Ie),Ae.c(),se(Ae,1),Ae.m(m,null)):Ae&&(ut(),ce(Ae,1,1,()=>{Ae=null}),ft());const gr={};Xe[0]&1024|Xe[2]&16&&(gr.$$scope={dirty:Xe,ctx:Ie}),Fe.$set(gr),Ie[17]?Je?Je.p(Ie,Xe):(Je=bh(Ie),Je.c(),Je.m(dt,Ot)):Je&&(Je.d(1),Je=null),Ie[17]?it&&(it.d(1),it=null):it?it.p(Ie,Xe):(it=wh(Ie),it.c(),it.m(dt,tr)),(!Kt||Xe[0]&131072&&Qt!==(Qt="side-panel "+(Ie[17]?"open":"close")+" svelte-wfca9"))&&re(dt,"class",Qt)},i(Ie){Kt||(se(e.$$.fragment,Ie),se(n.$$.fragment,Ie),se(l.$$.fragment,Ie),se(p.$$.fragment,Ie),se(Ae),se(Fe.$$.fragment,Ie),se(He.$$.fragment,Ie),se(At.$$.fragment,Ie),Kt=!0)},o(Ie){ce(e.$$.fragment,Ie),ce(n.$$.fragment,Ie),ce(l.$$.fragment,Ie),ce(p.$$.fragment,Ie),ce(Ae),ce(Fe.$$.fragment,Ie),ce(He.$$.fragment,Ie),ce(At.$$.fragment,Ie),Kt=!1},d(Ie){Ie&&(v(r),v(a),v(u),v(f),v(c),v(h),v(_),v(m),v(De),v(Pe)),Ue(e,Ie),Ue(n,Ie),Ue(l,Ie),Ue(p),Ee&&Ee.d(),Ae&&Ae.d(),Ue(Fe),Ue(He),fe(),Je&&Je.d(),it&&it.d(),Ue(At),pt=!1,mt(Ct)}}}function ZE(i){let e,t,r,n,s,a,l='D3FEND <span class="snakes">☤</span> <span class="CAD"><span style="color:#e62929;">C</span><span class="A svelte-wfca9" style="color:white;text-border:1px;">A</span><span style="color:blue;">D</span></span>',o,u,f,p,d,c,h,_;e=new Lm({props:{title:"D3FEND CAD Tool",og_title:"D3FEND CAD Tool",og_description:"Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios",og_type:"app"}}),u=new fs({props:{alert_type:"warning",$$slots:{default:[zE]},$$scope:{ctx:i}}});function m(F){i[35](F)}let y={title:i[6]+" import alerts",$$slots:{default:[HE]},$$scope:{ctx:i}};return i[13]!==void 0&&(y.is_open=i[13]),p=new VE({props:y}),Mt.push(()=>mr(p,"is_open",m)),h=new D3({props:{position:"right",$$slots:{default:[KE]},$$scope:{ctx:i}}}),{c(){Oe(e.$$.fragment),t=oe(),r=K("div"),n=K("div"),s=K("div"),a=K("h1"),a.innerHTML=l,o=oe(),Oe(u.$$.fragment),f=oe(),Oe(p.$$.fragment),c=oe(),Oe(h.$$.fragment),this.h()},l(F){Be(e.$$.fragment,F),t=ue(F),r=Z(F,"DIV",{class:!0});var T=Ce(r);n=Z(T,"DIV",{style:!0});var N=Ce(n);s=Z(N,"DIV",{style:!0});var b=Ce(s);a=Z(b,"H1",{class:!0,title:!0,"data-svelte-h":!0}),Ke(a)!=="svelte-xxt2o6"&&(a.innerHTML=l),o=ue(b),Be(u.$$.fragment,b),b.forEach(v),N.forEach(v),T.forEach(v),f=ue(F),Be(p.$$.fragment,F),c=ue(F),Be(h.$$.fragment,F),this.h()},h(){re(a,"class","fancy-font svelte-wfca9"),re(a,"title","Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios"),wt(s,"text-align","center"),wt(s,"flex-grow","1"),wt(n,"display","flex"),wt(n,"just-content","space-between"),wt(n,"align-items","center"),re(r,"class","title-egg svelte-wfca9")},m(F,T){Le(e,F,T),C(F,t,T),C(F,r,T),z(r,n),z(n,s),z(s,a),z(s,o),Le(u,s,null),C(F,f,T),Le(p,F,T),C(F,c,T),Le(h,F,T),_=!0},p(F,T){const N={};T[2]&16&&(N.$$scope={dirty:T,ctx:F}),u.$set(N);const b={};T[0]&64&&(b.title=F[6]+" import alerts"),T[0]&32|T[2]&16&&(b.$$scope={dirty:T,ctx:F}),!d&&T[0]&8192&&(d=!0,b.is_open=F[13],_r(()=>d=!1)),p.$set(b);const k={};T[0]&516060|T[2]&16&&(k.$$scope={dirty:T,ctx:F}),h.$set(k)},i(F){_||(se(e.$$.fragment,F),se(u.$$.fragment,F),se(p.$$.fragment,F),se(h.$$.fragment,F),_=!0)},o(F){ce(e.$$.fragment,F),ce(u.$$.fragment,F),ce(p.$$.fragment,F),ce(h.$$.fragment,F),_=!1},d(F){F&&(v(t),v(r),v(f),v(c)),Ue(e,F),Ue(u),Ue(p,F),Ue(h,F)}}}function eD(i){console.log(i),console.log(i)}function yh(i,e){for(const t of i)if(t.params.missingProperty=="user_properties"){let r=t.dataPath.replace(/\D/g,"");r=parseInt(r),e.nodes[r].data.user_properties=[]}return e}function tD(i,e,t){let r,n,s,a;tt(i,dm,V=>t(47,r=V)),tt(i,la,V=>t(48,n=V)),tt(i,Nr,V=>t(49,s=V)),tt(i,Pr,V=>t(18,a=V));var l=this&&this.__awaiter||function(V,I,O,$){function de(Ee){return Ee instanceof O?Ee:new O(function(Ae){Ae(Ee)})}return new(O||(O=Promise))(function(Ee,Ae){function Je(Xe){try{Ie($.next(Xe))}catch(Ze){Ae(Ze)}}function it(Xe){try{Ie($.throw(Xe))}catch(Ze){Ae(Ze)}}function Ie(Xe){Xe.done?Ee(Xe.value):de(Xe.value).then(Je,it)}Ie(($=$.apply(V,I||[])).next())})};const o=new Eg({useDefaults:!0,allErrors:!0});let u={is_open:!1,title:"Confirmation to load remote model from URL",content:"This page is instructing D3FEND to remotely load a CAD model from this URL:",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},f={is_open:!1,title:"Confirmation to load remote model from compressed URL",content:"This page is instructing D3FEND to load a CAD model from this URL",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},p;r.url.searchParams.get("load")&&(p=r.url.searchParams.get("load"),u.is_open=!0),r.url.searchParams.get("loadg")&&(f.is_open=!0);function d(V){const I=V.detail;I.value==="load"?(Pr.add("loading remote URL"),X(p),Pr.clear()):I.value}function c(V){const I=V.detail;if(I.value==="load"){Pr.add("loading graph from URL");const O=r.url.searchParams.get("loadg"),$=Yo.uncrush(O);let de=JSON.parse($);P(de),Pr.clear()}else I.value}ls(()=>{Pr.add("Mounting app...");try{to.initialize(),Pr.clear()}catch(V){console.error("Failed to initialize Oxigraph in +layout.svelte",V),V.message}});const h={artifactSelectorNode:oE,vulnerabilitySelectorNode:iE,attackSelectorNode:eE,countermeasureSelectorNode:dE,informationSelectorNode:mE,conditionDefinitionNode:bE,agentSelectorNode:EE,eventNode:CE},_={editableEdge:PE};let m={type:"editableEdge",data:{label:void 0},markerEnd:{type:Dh.ArrowClosed}},y,F,T="d3fend-cad.json",N="";function b(){const V=JSON.stringify({nodes:s,edges:n},null,4),I=new Blob([V],{type:"application/json"}),O=window.URL.createObjectURL(I),$=document.createElement("a");$.href=O,$.download=T,t(6,F=0),document.body.appendChild($),$.click(),document.body.removeChild($),window.URL.revokeObjectURL(O)}function k(){N==="json"?L():N==="turtle"&&A(),t(8,N="")}function A(){Pr.add("generating ttl file"),console.log("!!! Turtle export engaged !!!"),Ew().then(V=>{Pr.clear();const I=new Blob([V],{type:"text/turtle"}),O=window.URL.createObjectURL(I),$=document.createElement("a");$.href=O;let de=prompt("Enter filename to save as Turtle file",T.replace("json","ttl"));t(6,F=0),de&&($.download=de,document.body.appendChild($),$.click(),document.body.removeChild($)),window.URL.revokeObjectURL(O)}).catch(V=>{console.error("Error serializing graph to Turtle: ",V)})}function L(){const V=JSON.stringify({nodes:s,edges:n},null,4),I=new Blob([V],{type:"application/json"}),O=window.URL.createObjectURL(I),$=document.createElement("a");$.href=O;let de=prompt("Enter filename to save as JSON file",T);t(6,F=0),t(7,T=de),de&&($.download=de,document.body.appendChild($),$.click(),document.body.removeChild($)),window.URL.revokeObjectURL(O)}function P(V){try{const I=o.compile(zo),O=I(V);t(5,y=I.errors),O||(V=yh(I.errors,V));const $=V.nodes,de=V.edges;Pr.add("loading graph from data..."),xa($,de),R(),window.addEventListener("beforeunload",Ee=>{console.log("User is leaving the page"),Ee.preventDefault(),Ee.returnValue=""}),Pr.clear()}catch(I){console.error("Error parsing JSON:",I)}}function B(){t(13,he=!0)}const{screenToFlowPosition:D,fitView:R}=Jm();function w(V){const I=V.target.files[0];if(I){const O=new FileReader;O.onload=$=>{if(typeof $.target.result=="string"){console.log($.target.result),t(7,T=I.name),t(7,T=I.name);try{let de=JSON.parse($.target.result);const Ee=o.compile(zo),Ae=Ee(de);t(5,y=Ee.errors),Ae||(de=yh(Ee.errors,de));const Je=de.nodes,it=de.edges;xa(Je,it),R(),window.addEventListener("beforeunload",Ie=>{console.log("User is leaving the page"),Ie.preventDefault(),Ie.returnValue=""})}catch(de){console.error("Error parsing JSON:",de)}}else console.error("File content is not a string.")},O.onerror=()=>{console.error("Error reading file:",O.error)},O.readAsText(I)}}function S(V){const I=V.target.files[0];if(I){const O=new FileReader;O.onload=$=>{if(typeof $.target.result=="string"){console.log($.target.result);try{const de=JSON.parse($.target.result);Nr.set([...s,...de.nodes]),la.set([...n,...de.edges]),alert(` added ${de.nodes.length} nodes and ${de.edges.length} edges to the current graph `)}catch(de){console.error("Error parsing JSON:",de),alert(`Error parsing JSON:", ${de}`)}}else console.error("File content is not a string."),alert("File content is not a string.")},O.onerror=()=>{console.error("Error reading file:",O.error),alert(`Error reading file: ${O.error}`)},O.readAsText(I)}}function X(V){return l(this,void 0,void 0,function*(){if(V)try{const O=yield(yield fetch(V)).json(),$=O.nodes,de=O.edges;xa($,de),R()}catch(I){console.error("Error parsing JSON:",I)}})}function j(){const V=document.createElement("input");V.type="file",V.accept=".json",V.onchange=I=>{w(I)},V.click()}function ne(){const V=document.createElement("input");V.type="file",V.accept=".json",V.onchange=I=>{S(I)},V.click()}const J=V=>{V.preventDefault(),V.dataTransfer&&(V.dataTransfer.dropEffect="move")},W=V=>console.log("handle onConnect",V),x=V=>{if(V.preventDefault(),!V.dataTransfer)return null;const I=V.dataTransfer.getData("application/svelteflow"),O=D({x:V.clientX,y:V.clientY}),$={id:`${Math.random()}`,type:I,position:O,data:{label:null,sequence:"0",user_properties:[]},origin:[.5,0]};s.push($),Nr.set(s)};function G(V){return l(this,void 0,void 0,function*(){const I=V.detail;t(7,T=I);try{const O=yield fetch(`/resources/cad/examples/${I}`);if(!O.ok)throw new Error(`HTTP error! status: ${O.status}`);const $=yield O.json();console.log("Selected file contents:",$),P($)}catch(O){console.error("Error fetching JSON file:",O)}})}let le;function Q(){ww(),t(6,F=0),t(9,le="Example Graphs"),t(7,T="d3fend-cad.json")}let ae,Ve,ze;function De({detail:{event:V,node:I}}){V.preventDefault();let O=50;t(10,ae={id:I.id,top:V.clientY<ze-O?V.clientY:void 0,left:V.clientX<Ve-O?V.clientX:void 0,right:V.clientX>=Ve-O?Ve-V.clientX:void 0,bottom:V.clientY>=ze-O?ze-V.clientY:void 0}),ve({detail:{event:V,node:I}})}function Pe(){t(10,ae=null),ot.set(null)}function ve({detail:{event:V,node:I}}){ot.set(I)}let he=!1,Fe=!1,lt,He;function fe(){Pr.add("compressing graph to string..."),t(14,Fe=!0);const V=Yo.crush(JSON.stringify({nodes:s,edges:n}));t(15,lt=encodeURIComponent(V)),t(16,He=r.url.origin+`/cad/?loadg=${lt}`),Pr.clear()}let Te=!1;function dt(V){he=V,t(13,he)}function Ot(V){i.$$.not_equal(u.is_open,V)&&(u.is_open=V,t(2,u))}function tr(V){i.$$.not_equal(f.is_open,V)&&(f.is_open=V,t(3,f))}const At=()=>pm(He);function Qt(V){Fe=V,t(14,Fe)}function Kt(V){le=V,t(9,le)}function pt(){N=fm(this),t(8,N)}function Ct(){T=this.value,t(7,T)}function Ut(){Ve=this.clientWidth,ze=this.clientHeight,t(11,Ve),t(12,ze)}return[h,_,u,f,p,y,F,T,N,le,ae,Ve,ze,he,Fe,lt,He,Te,a,d,c,m,b,k,B,j,ne,J,W,x,G,Q,De,Pe,fe,dt,Ot,tr,At,Qt,Kt,pt,Ct,Ut,()=>t(17,Te=!Te),()=>t(17,Te=!Te)]}class rD extends gt{constructor(e){super(),bt(this,e,tD,ZE,nt,{nodeTypes:0,edgeTypes:1},null,[-1,-1,-1])}get nodeTypes(){return this.$$.ctx[0]}get edgeTypes(){return this.$$.ctx[1]}}function nD(i){let e,t;return e=new rD({}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function iD(i){let e,t;return e=new Gm({props:{$$slots:{default:[nD]},$$scope:{ctx:i}}}),{c(){Oe(e.$$.fragment)},l(r){Be(e.$$.fragment,r)},m(r,n){Le(e,r,n),t=!0},p(r,[n]){const s={};n&4&&(s.$$scope={dirty:n,ctx:r}),e.$set(s)},i(r){t||(se(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ue(e,r)}}}function aD(i,e,t){let r,{data:n}=e;return i.$$set=s=>{"data"in s&&t(0,n=s.data)},i.$$.update=()=>{i.$$.dirty&1&&t(1,r=n.remote_d3fend_tree?n.remote_d3fend_tree.map(s=>({...s,children:Cl(s.children,s["rdfs:label"])})):[]),i.$$.dirty&3&&(Th.set(r),Sh.set(n.attack),Nh.set(n.dao),Ih.set(n.events),Ph.set(n.weaknesses),Rh.set(n.properties),Fh.set(n.digital_information))},[n,r]}class FD extends gt{constructor(e){super(),bt(this,e,aD,iD,nt,{data:0})}}export{FD as component,CD as universal};

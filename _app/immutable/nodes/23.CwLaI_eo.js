import{g as ol,b as vn,f as Ns,a as mn,c as pn,u as At,d as Ft,h as gn,i as fl,j as Dt,F as bn,n as En,e as Pn,P as wn,S as kn,k as yn,l as Sn,m as Dn,o as Cn,w as Nn,p as Rn,q as In}from"../chunks/PropertyPanel.B7crx8nb.js";import{s as ul}from"../chunks/sortBy.ChsTRid8.js";import{as as Me,s as ot,c as ct,e as B,t as k,b as x,d as $,f as ve,h as y,j as ee,i as o,x as X,k as v,l as q,p as ge,a4 as Ct,ar as qt,u as dt,g as ht,a as _t,m as J,A as Et,o as tt,W as Nt,L as Ye,n as ke,y as we,v as Ee,P as Xe,V as kt,G as lt,r as Zt,Y as ar,I as fr,q as Hr,M as cl,N as dl,R as it,a2 as Rs,ap as hl,aq as On,ak as Tn}from"../chunks/scheduler.DDVliNtX.js";import{S as ft,i as ut,g as Pt,a as _e,e as wt,t as ue,c as Te,b as Ae,m as Fe,d as Le,f as yt}from"../chunks/index.iWffroUJ.js";import{e as Ie}from"../chunks/each.BFyodu2L.js";import{c as An,a as Fn}from"../chunks/_commonjsHelpers.C4iS2aBk.js";import{s as Ir}from"../chunks/schema.DoHxlmfD.js";import{p as Ln}from"../chunks/stores.BlkVpxjB.js";import{g as jn}from"../chunks/entry.CE2Gtjz_.js";import{A as kr}from"../chunks/Alert.BsS8d9Dv.js";import{T as Ht,b as ce,a as Is,G as vr,m as qn,d as mr,o as zn}from"../chunks/lib.DSnscA8f.js";/* empty css                     */import{j as Un,u as Vn,l as Mn,m as _l,n as vl,o as ml,p as Bn,q as $n,r as Hn,s as Qn,t as Gn,i as pl,M as Kn,S as Jn,B as Yn,a as Xn,b as Zn}from"../chunks/style.CoMyASxi.js";import{d as Os,e as Lr,n as hr,m as lr,o as Wn,i as Or,c as xn,s as gl,a as ei,b as ti}from"../chunks/graphStore.DBaUrxy6.js";import{G as zt}from"../chunks/_Graph.CGXTKsEb.js";import{t as pr,T as Ts}from"../chunks/ToggleBar.Dt3UQwWP.js";import{J as bl}from"../chunks/JSONCrush.BlUS0oeb.js";import{T as ri}from"../chunks/Title.geje0d_0.js";import{L as li}from"../chunks/Loading.CSl94oYn.js";import{C as ai}from"../chunks/Controls.CAcLyyHp.js";async function si({fetch:a}){const e=["/api/offensive-technique/all.json","/api/dao/artifacts.json","/api/taxonomies/d3f:DigitalEvent.json","/api/weakness/all.json","/api/ontology/properties/object/all.json","/api/dao/artifact/d3f:DigitalInformation.json"],[{value:{["@graph"]:r}},{value:{["@graph"]:l}},{value:{["@graph"]:t}},{value:{["@graph"]:s}},{value:{["@graph"]:n}},{value:{da_graph:{["@graph"]:i}}}]=await Promise.allSettled(e.map(u=>a(u).then(E=>E.json()))),f=ul(ol(r,"rdfs:label"),u=>u["rdfs:label"]),d=vn(t,"d3f:DigitalEvent").map(u=>({...u,children:ol(Ns(u.children,u["rdfs:label"]),"rdfs:label")})),_=ul(s,u=>u["rdfs:label"]),m=mn(n),c=pn(i);return{attack:f,dao:l,events:d,weaknesses:_,properties:m,digital_information:c}}const Ad=Object.freeze(Object.defineProperty({__proto__:null,load:si},Symbol.toStringTag,{value:"Module"})),El=a=>Un(a);function ni(){const{zoomIn:a,zoomOut:e,fitView:r,onbeforedelete:l,snapGrid:t,viewport:s,width:n,height:i,minZoom:f,maxZoom:h,panZoom:d,nodes:_,edges:m,domNode:c,nodeLookup:u,nodeOrigin:E,edgeLookup:g,connectionLookup:P}=Vn(),I=p=>{var T,b;const N=Me(u),S=El(p)?p:N.get(p.id),F=S.parentId?Qn(S.position,S.measured,S.parentId,N,Me(E)):S.position,R={id:S.id,position:F,width:((T=S.measured)==null?void 0:T.width)??S.width,height:((b=S.measured)==null?void 0:b.height)??S.height,data:S.data};return vl(R)},C=(p,N,S={replace:!1})=>{var T;const F=(T=Me(u).get(p))==null?void 0:T.internals.userNode;if(!F)return;const R=typeof N=="function"?N(F):N;S.replace?_.update(b=>b.map(O=>O.id===p?El(R)?R:{...O,...R}:O)):(Object.assign(F,R),_.update(b=>b))},D=p=>Me(u).get(p);return{zoomIn:a,zoomOut:e,getInternalNode:D,getNode:p=>{var N;return(N=D(p))==null?void 0:N.internals.userNode},getNodes:p=>p===void 0?Me(_):Pl(Me(u),p),getEdge:p=>Me(g).get(p),getEdges:p=>p===void 0?Me(m):Pl(Me(g),p),setZoom:(p,N)=>{const S=Me(d);return S?S.scaleTo(p,{duration:N==null?void 0:N.duration}):Promise.resolve(!1)},getZoom:()=>Me(s).zoom,setViewport:async(p,N)=>{const S=Me(s),F=Me(d);return F?(await F.setViewport({x:p.x??S.x,y:p.y??S.y,zoom:p.zoom??S.zoom},{duration:N==null?void 0:N.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>Me(s),setCenter:async(p,N,S)=>{const F=typeof(S==null?void 0:S.zoom)<"u"?S.zoom:Me(h),R=Me(d);return R?(await R.setViewport({x:Me(n)/2-p*F,y:Me(i)/2-N*F,zoom:F},{duration:S==null?void 0:S.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:r,fitBounds:async(p,N)=>{const S=Me(d);if(!S)return Promise.resolve(!1);const F=Mn(p,Me(n),Me(i),Me(f),Me(h),(N==null?void 0:N.padding)??.1);return await S.setViewport(F,{duration:N==null?void 0:N.duration}),Promise.resolve(!0)},getIntersectingNodes:(p,N=!0,S)=>{const F=_l(p),R=F?p:I(p);return R?(S||Me(_)).filter(T=>{const b=Me(u).get(T.id);if(!b||!F&&T.id===p.id)return!1;const O=vl(b),w=ml(O,R);return N&&w>0||w>=R.width*R.height}):[]},isNodeIntersecting:(p,N,S=!0)=>{const R=_l(p)?p:I(p);if(!R)return!1;const T=ml(R,N);return S&&T>0||T>=R.width*R.height},deleteElements:async({nodes:p=[],edges:N=[]})=>{const{nodes:S,edges:F}=await Bn({nodesToRemove:p,edgesToRemove:N,nodes:Me(_),edges:Me(m),onBeforeDelete:Me(l)});return S&&_.update(R=>R.filter(T=>!S.some(({id:b})=>b===T.id))),F&&m.update(R=>R.filter(T=>!F.some(({id:b})=>b===T.id))),{deletedNodes:S,deletedEdges:F}},screenToFlowPosition:(p,N={snapToGrid:!0})=>{const S=Me(c);if(!S)return p;const F=N.snapToGrid?Me(t):!1,{x:R,y:T,zoom:b}=Me(s),{x:O,y:w}=S.getBoundingClientRect(),A={x:p.x-O,y:p.y-w};return $n(A,[R,T,b],F!==null,F||[1,1])},flowToScreenPosition:p=>{const N=Me(c);if(!N)return p;const{x:S,y:F,zoom:R}=Me(s),{x:T,y:b}=N.getBoundingClientRect(),O=Gn(p,[S,F,R]);return{x:O.x+T,y:O.y+b}},toObject:()=>({nodes:Me(_).map(p=>({...p,position:{...p.position},data:{...p.data}})),edges:Me(m).map(p=>({...p})),viewport:{...Me(s)}}),updateNode:C,updateNodeData:(p,N,S)=>{var T;const F=(T=Me(u).get(p))==null?void 0:T.internals.userNode;if(!F)return;const R=typeof N=="function"?N(F):N;F.data=S!=null&&S.replace?R:{...F.data,...R},_.update(b=>b)},getNodesBounds:p=>{const N=Me(u),S=Me(E);return Hn(p,{nodeLookup:N,nodeOrigin:S})},getHandleConnections:({type:p,id:N,nodeId:S})=>{var F;return Array.from(((F=Me(P).get(`${S}-${p}-${N??null}`))==null?void 0:F.values())??[])},viewport:s}}function Pl(a,e){var l;const r=[];for(const t of e){const s=a.get(t);if(s){const n="internals"in s?(l=s.internals)==null?void 0:l.userNode:s;r.push(n)}}return r}var jr={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(a,e){(function(r,l){l(e)})(An,function(r){function l(){for(var M=arguments.length,z=Array(M),G=0;G<M;G++)z[G]=arguments[G];if(z.length>1){z[0]=z[0].slice(0,-1);for(var se=z.length-1,le=1;le<se;++le)z[le]=z[le].slice(1,-1);return z[se]=z[se].slice(1),z.join("")}else return z[0]}function t(M){return"(?:"+M+")"}function s(M){return M===void 0?"undefined":M===null?"null":Object.prototype.toString.call(M).split(" ").pop().split("]").shift().toLowerCase()}function n(M){return M.toUpperCase()}function i(M){return M!=null?M instanceof Array?M:typeof M.length!="number"||M.split||M.setInterval||M.call?[M]:Array.prototype.slice.call(M):[]}function f(M,z){var G=M;if(z)for(var se in z)G[se]=z[se];return G}function h(M){var z="[A-Za-z]",G="[0-9]",se=l(G,"[A-Fa-f]"),le=t(t("%[EFef]"+se+"%"+se+se+"%"+se+se)+"|"+t("%[89A-Fa-f]"+se+"%"+se+se)+"|"+t("%"+se+se)),Ne="[\\:\\/\\?\\#\\[\\]\\@]",Re="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",$e=l(Ne,Re),rt=M?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",mt=M?"[\\uE000-\\uF8FF]":"[]",Be=l(z,G,"[\\-\\.\\_\\~]",rt);t(z+l(z,G,"[\\+\\-\\.]")+"*"),t(t(le+"|"+l(Be,Re,"[\\:]"))+"*");var et=t(t("25[0-5]")+"|"+t("2[0-4]"+G)+"|"+t("1"+G+G)+"|"+t("0?[1-9]"+G)+"|0?0?"+G),pt=t(et+"\\."+et+"\\."+et+"\\."+et),qe=t(se+"{1,4}"),st=t(t(qe+"\\:"+qe)+"|"+pt),bt=t(t(qe+"\\:")+"{6}"+st),nt=t("\\:\\:"+t(qe+"\\:")+"{5}"+st),Mt=t(t(qe)+"?\\:\\:"+t(qe+"\\:")+"{4}"+st),It=t(t(t(qe+"\\:")+"{0,1}"+qe)+"?\\:\\:"+t(qe+"\\:")+"{3}"+st),Ot=t(t(t(qe+"\\:")+"{0,2}"+qe)+"?\\:\\:"+t(qe+"\\:")+"{2}"+st),Xt=t(t(t(qe+"\\:")+"{0,3}"+qe)+"?\\:\\:"+qe+"\\:"+st),Gt=t(t(t(qe+"\\:")+"{0,4}"+qe)+"?\\:\\:"+st),Rt=t(t(t(qe+"\\:")+"{0,5}"+qe)+"?\\:\\:"+qe),Tt=t(t(t(qe+"\\:")+"{0,6}"+qe)+"?\\:\\:"),Kt=t([bt,nt,Mt,It,Ot,Xt,Gt,Rt,Tt].join("|")),jt=t(t(Be+"|"+le)+"+");t("[vV]"+se+"+\\."+l(Be,Re,"[\\:]")+"+"),t(t(le+"|"+l(Be,Re))+"*");var tr=t(le+"|"+l(Be,Re,"[\\:\\@]"));return t(t(le+"|"+l(Be,Re,"[\\@]"))+"+"),t(t(tr+"|"+l("[\\/\\?]",mt))+"*"),{NOT_SCHEME:new RegExp(l("[^]",z,G,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(l("[^\\%\\:]",Be,Re),"g"),NOT_HOST:new RegExp(l("[^\\%\\[\\]\\:]",Be,Re),"g"),NOT_PATH:new RegExp(l("[^\\%\\/\\:\\@]",Be,Re),"g"),NOT_PATH_NOSCHEME:new RegExp(l("[^\\%\\/\\@]",Be,Re),"g"),NOT_QUERY:new RegExp(l("[^\\%]",Be,Re,"[\\:\\@\\/\\?]",mt),"g"),NOT_FRAGMENT:new RegExp(l("[^\\%]",Be,Re,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(l("[^]",Be,Re),"g"),UNRESERVED:new RegExp(Be,"g"),OTHER_CHARS:new RegExp(l("[^\\%]",Be,$e),"g"),PCT_ENCODED:new RegExp(le,"g"),IPV4ADDRESS:new RegExp("^("+pt+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Kt+")"+t(t("\\%25|\\%(?!"+se+"{2})")+"("+jt+")")+"?\\]?$")}}var d=h(!1),_=h(!0),m=function(){function M(z,G){var se=[],le=!0,Ne=!1,Re=void 0;try{for(var $e=z[Symbol.iterator](),rt;!(le=(rt=$e.next()).done)&&(se.push(rt.value),!(G&&se.length===G));le=!0);}catch(mt){Ne=!0,Re=mt}finally{try{!le&&$e.return&&$e.return()}finally{if(Ne)throw Re}}return se}return function(z,G){if(Array.isArray(z))return z;if(Symbol.iterator in Object(z))return M(z,G);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(M){if(Array.isArray(M)){for(var z=0,G=Array(M.length);z<M.length;z++)G[z]=M[z];return G}else return Array.from(M)},u=2147483647,E=36,g=1,P=26,I=38,C=700,D=72,p=128,N="-",S=/^xn--/,F=/[^\0-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=E-g,O=Math.floor,w=String.fromCharCode;function A(M){throw new RangeError(T[M])}function Y(M,z){for(var G=[],se=M.length;se--;)G[se]=z(M[se]);return G}function ne(M,z){var G=M.split("@"),se="";G.length>1&&(se=G[0]+"@",M=G[1]),M=M.replace(R,".");var le=M.split("."),Ne=Y(le,z).join(".");return se+Ne}function te(M){for(var z=[],G=0,se=M.length;G<se;){var le=M.charCodeAt(G++);if(le>=55296&&le<=56319&&G<se){var Ne=M.charCodeAt(G++);(Ne&64512)==56320?z.push(((le&1023)<<10)+(Ne&1023)+65536):(z.push(le),G--)}else z.push(le)}return z}var Q=function(z){return String.fromCodePoint.apply(String,c(z))},H=function(z){return z-48<10?z-22:z-65<26?z-65:z-97<26?z-97:E},V=function(z,G){return z+22+75*(z<26)-((G!=0)<<5)},U=function(z,G,se){var le=0;for(z=se?O(z/C):z>>1,z+=O(z/G);z>b*P>>1;le+=E)z=O(z/b);return O(le+(b+1)*z/(z+I))},Z=function(z){var G=[],se=z.length,le=0,Ne=p,Re=D,$e=z.lastIndexOf(N);$e<0&&($e=0);for(var rt=0;rt<$e;++rt)z.charCodeAt(rt)>=128&&A("not-basic"),G.push(z.charCodeAt(rt));for(var mt=$e>0?$e+1:0;mt<se;){for(var Be=le,et=1,pt=E;;pt+=E){mt>=se&&A("invalid-input");var qe=H(z.charCodeAt(mt++));(qe>=E||qe>O((u-le)/et))&&A("overflow"),le+=qe*et;var st=pt<=Re?g:pt>=Re+P?P:pt-Re;if(qe<st)break;var bt=E-st;et>O(u/bt)&&A("overflow"),et*=bt}var nt=G.length+1;Re=U(le-Be,nt,Be==0),O(le/nt)>u-Ne&&A("overflow"),Ne+=O(le/nt),le%=nt,G.splice(le++,0,Ne)}return String.fromCodePoint.apply(String,G)},L=function(z){var G=[];z=te(z);var se=z.length,le=p,Ne=0,Re=D,$e=!0,rt=!1,mt=void 0;try{for(var Be=z[Symbol.iterator](),et;!($e=(et=Be.next()).done);$e=!0){var pt=et.value;pt<128&&G.push(w(pt))}}catch(rr){rt=!0,mt=rr}finally{try{!$e&&Be.return&&Be.return()}finally{if(rt)throw mt}}var qe=G.length,st=qe;for(qe&&G.push(N);st<se;){var bt=u,nt=!0,Mt=!1,It=void 0;try{for(var Ot=z[Symbol.iterator](),Xt;!(nt=(Xt=Ot.next()).done);nt=!0){var Gt=Xt.value;Gt>=le&&Gt<bt&&(bt=Gt)}}catch(rr){Mt=!0,It=rr}finally{try{!nt&&Ot.return&&Ot.return()}finally{if(Mt)throw It}}var Rt=st+1;bt-le>O((u-Ne)/Rt)&&A("overflow"),Ne+=(bt-le)*Rt,le=bt;var Tt=!0,Kt=!1,jt=void 0;try{for(var tr=z[Symbol.iterator](),al;!(Tt=(al=tr.next()).done);Tt=!0){var sl=al.value;if(sl<le&&++Ne>u&&A("overflow"),sl==le){for(var nr=Ne,ir=E;;ir+=E){var or=ir<=Re?g:ir>=Re+P?P:ir-Re;if(nr<or)break;var nl=nr-or,il=E-or;G.push(w(V(or+nl%il,0))),nr=O(nl/il)}G.push(w(V(nr,0))),Re=U(Ne,Rt,st==qe),Ne=0,++st}}}catch(rr){Kt=!0,jt=rr}finally{try{!Tt&&tr.return&&tr.return()}finally{if(Kt)throw jt}}++Ne,++le}return G.join("")},K=function(z){return ne(z,function(G){return S.test(G)?Z(G.slice(4).toLowerCase()):G})},ye=function(z){return ne(z,function(G){return F.test(G)?"xn--"+L(G):G})},Pe={version:"2.1.0",ucs2:{decode:te,encode:Q},decode:Z,encode:L,toASCII:ye,toUnicode:K},ae={};function pe(M){var z=M.charCodeAt(0),G=void 0;return z<16?G="%0"+z.toString(16).toUpperCase():z<128?G="%"+z.toString(16).toUpperCase():z<2048?G="%"+(z>>6|192).toString(16).toUpperCase()+"%"+(z&63|128).toString(16).toUpperCase():G="%"+(z>>12|224).toString(16).toUpperCase()+"%"+(z>>6&63|128).toString(16).toUpperCase()+"%"+(z&63|128).toString(16).toUpperCase(),G}function fe(M){for(var z="",G=0,se=M.length;G<se;){var le=parseInt(M.substr(G+1,2),16);if(le<128)z+=String.fromCharCode(le),G+=3;else if(le>=194&&le<224){if(se-G>=6){var Ne=parseInt(M.substr(G+4,2),16);z+=String.fromCharCode((le&31)<<6|Ne&63)}else z+=M.substr(G,6);G+=6}else if(le>=224){if(se-G>=9){var Re=parseInt(M.substr(G+4,2),16),$e=parseInt(M.substr(G+7,2),16);z+=String.fromCharCode((le&15)<<12|(Re&63)<<6|$e&63)}else z+=M.substr(G,9);G+=9}else z+=M.substr(G,3),G+=3}return z}function me(M,z){function G(se){var le=fe(se);return le.match(z.UNRESERVED)?le:se}return M.scheme&&(M.scheme=String(M.scheme).replace(z.PCT_ENCODED,G).toLowerCase().replace(z.NOT_SCHEME,"")),M.userinfo!==void 0&&(M.userinfo=String(M.userinfo).replace(z.PCT_ENCODED,G).replace(z.NOT_USERINFO,pe).replace(z.PCT_ENCODED,n)),M.host!==void 0&&(M.host=String(M.host).replace(z.PCT_ENCODED,G).toLowerCase().replace(z.NOT_HOST,pe).replace(z.PCT_ENCODED,n)),M.path!==void 0&&(M.path=String(M.path).replace(z.PCT_ENCODED,G).replace(M.scheme?z.NOT_PATH:z.NOT_PATH_NOSCHEME,pe).replace(z.PCT_ENCODED,n)),M.query!==void 0&&(M.query=String(M.query).replace(z.PCT_ENCODED,G).replace(z.NOT_QUERY,pe).replace(z.PCT_ENCODED,n)),M.fragment!==void 0&&(M.fragment=String(M.fragment).replace(z.PCT_ENCODED,G).replace(z.NOT_FRAGMENT,pe).replace(z.PCT_ENCODED,n)),M}function De(M){return M.replace(/^0*(.*)/,"$1")||"0"}function Ue(M,z){var G=M.match(z.IPV4ADDRESS)||[],se=m(G,2),le=se[1];return le?le.split(".").map(De).join("."):M}function W(M,z){var G=M.match(z.IPV6ADDRESS)||[],se=m(G,3),le=se[1],Ne=se[2];if(le){for(var Re=le.toLowerCase().split("::").reverse(),$e=m(Re,2),rt=$e[0],mt=$e[1],Be=mt?mt.split(":").map(De):[],et=rt.split(":").map(De),pt=z.IPV4ADDRESS.test(et[et.length-1]),qe=pt?7:8,st=et.length-qe,bt=Array(qe),nt=0;nt<qe;++nt)bt[nt]=Be[nt]||et[st+nt]||"";pt&&(bt[qe-1]=Ue(bt[qe-1],z));var Mt=bt.reduce(function(Rt,Tt,Kt){if(!Tt||Tt==="0"){var jt=Rt[Rt.length-1];jt&&jt.index+jt.length===Kt?jt.length++:Rt.push({index:Kt,length:1})}return Rt},[]),It=Mt.sort(function(Rt,Tt){return Tt.length-Rt.length})[0],Ot=void 0;if(It&&It.length>1){var Xt=bt.slice(0,It.index),Gt=bt.slice(It.index+It.length);Ot=Xt.join(":")+"::"+Gt.join(":")}else Ot=bt.join(":");return Ne&&(Ot+="%"+Ne),Ot}else return M}var j=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,re="".match(/(){0}/)[1]===void 0;function je(M){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},G={},se=z.iri!==!1?_:d;z.reference==="suffix"&&(M=(z.scheme?z.scheme+":":"")+"//"+M);var le=M.match(j);if(le){re?(G.scheme=le[1],G.userinfo=le[3],G.host=le[4],G.port=parseInt(le[5],10),G.path=le[6]||"",G.query=le[7],G.fragment=le[8],isNaN(G.port)&&(G.port=le[5])):(G.scheme=le[1]||void 0,G.userinfo=M.indexOf("@")!==-1?le[3]:void 0,G.host=M.indexOf("//")!==-1?le[4]:void 0,G.port=parseInt(le[5],10),G.path=le[6]||"",G.query=M.indexOf("?")!==-1?le[7]:void 0,G.fragment=M.indexOf("#")!==-1?le[8]:void 0,isNaN(G.port)&&(G.port=M.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?le[4]:void 0)),G.host&&(G.host=W(Ue(G.host,se),se)),G.scheme===void 0&&G.userinfo===void 0&&G.host===void 0&&G.port===void 0&&!G.path&&G.query===void 0?G.reference="same-document":G.scheme===void 0?G.reference="relative":G.fragment===void 0?G.reference="absolute":G.reference="uri",z.reference&&z.reference!=="suffix"&&z.reference!==G.reference&&(G.error=G.error||"URI is not a "+z.reference+" reference.");var Ne=ae[(z.scheme||G.scheme||"").toLowerCase()];if(!z.unicodeSupport&&(!Ne||!Ne.unicodeSupport)){if(G.host&&(z.domainHost||Ne&&Ne.domainHost))try{G.host=Pe.toASCII(G.host.replace(se.PCT_ENCODED,fe).toLowerCase())}catch(Re){G.error=G.error||"Host's domain name can not be converted to ASCII via punycode: "+Re}me(G,d)}else me(G,se);Ne&&Ne.parse&&Ne.parse(G,z)}else G.error=G.error||"URI can not be parsed.";return G}function Ke(M,z){var G=z.iri!==!1?_:d,se=[];return M.userinfo!==void 0&&(se.push(M.userinfo),se.push("@")),M.host!==void 0&&se.push(W(Ue(String(M.host),G),G).replace(G.IPV6ADDRESS,function(le,Ne,Re){return"["+Ne+(Re?"%25"+Re:"")+"]"})),(typeof M.port=="number"||typeof M.port=="string")&&(se.push(":"),se.push(String(M.port))),se.length?se.join(""):void 0}var at=/^\.\.?\//,He=/^\/\.(\/|$)/,gt=/^\/\.\.(\/|$)/,Je=/^\/?(?:.|\n)*?(?=\/|$)/;function Ge(M){for(var z=[];M.length;)if(M.match(at))M=M.replace(at,"");else if(M.match(He))M=M.replace(He,"/");else if(M.match(gt))M=M.replace(gt,"/"),z.pop();else if(M==="."||M==="..")M="";else{var G=M.match(Je);if(G){var se=G[0];M=M.slice(se.length),z.push(se)}else throw new Error("Unexpected dot segment condition")}return z.join("")}function ze(M){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},G=z.iri?_:d,se=[],le=ae[(z.scheme||M.scheme||"").toLowerCase()];if(le&&le.serialize&&le.serialize(M,z),M.host&&!G.IPV6ADDRESS.test(M.host)){if(z.domainHost||le&&le.domainHost)try{M.host=z.iri?Pe.toUnicode(M.host):Pe.toASCII(M.host.replace(G.PCT_ENCODED,fe).toLowerCase())}catch($e){M.error=M.error||"Host's domain name can not be converted to "+(z.iri?"Unicode":"ASCII")+" via punycode: "+$e}}me(M,G),z.reference!=="suffix"&&M.scheme&&(se.push(M.scheme),se.push(":"));var Ne=Ke(M,z);if(Ne!==void 0&&(z.reference!=="suffix"&&se.push("//"),se.push(Ne),M.path&&M.path.charAt(0)!=="/"&&se.push("/")),M.path!==void 0){var Re=M.path;!z.absolutePath&&(!le||!le.absolutePath)&&(Re=Ge(Re)),Ne===void 0&&(Re=Re.replace(/^\/\//,"/%2F")),se.push(Re)}return M.query!==void 0&&(se.push("?"),se.push(M.query)),M.fragment!==void 0&&(se.push("#"),se.push(M.fragment)),se.join("")}function Ze(M,z){var G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},se=arguments[3],le={};return se||(M=je(ze(M,G),G),z=je(ze(z,G),G)),G=G||{},!G.tolerant&&z.scheme?(le.scheme=z.scheme,le.userinfo=z.userinfo,le.host=z.host,le.port=z.port,le.path=Ge(z.path||""),le.query=z.query):(z.userinfo!==void 0||z.host!==void 0||z.port!==void 0?(le.userinfo=z.userinfo,le.host=z.host,le.port=z.port,le.path=Ge(z.path||""),le.query=z.query):(z.path?(z.path.charAt(0)==="/"?le.path=Ge(z.path):((M.userinfo!==void 0||M.host!==void 0||M.port!==void 0)&&!M.path?le.path="/"+z.path:M.path?le.path=M.path.slice(0,M.path.lastIndexOf("/")+1)+z.path:le.path=z.path,le.path=Ge(le.path)),le.query=z.query):(le.path=M.path,z.query!==void 0?le.query=z.query:le.query=M.query),le.userinfo=M.userinfo,le.host=M.host,le.port=M.port),le.scheme=M.scheme),le.fragment=z.fragment,le}function We(M,z,G){var se=f({scheme:"null"},G);return ze(Ze(je(M,se),je(z,se),se,!0),se)}function de(M,z){return typeof M=="string"?M=ze(je(M,z),z):s(M)==="object"&&(M=je(ze(M,z),z)),M}function Oe(M,z,G){return typeof M=="string"?M=ze(je(M,G),G):s(M)==="object"&&(M=ze(M,G)),typeof z=="string"?z=ze(je(z,G),G):s(z)==="object"&&(z=ze(z,G)),M===z}function Se(M,z){return M&&M.toString().replace(!z||!z.iri?d.ESCAPE:_.ESCAPE,pe)}function Ve(M,z){return M&&M.toString().replace(!z||!z.iri?d.PCT_ENCODED:_.PCT_ENCODED,fe)}var oe={scheme:"http",domainHost:!0,parse:function(z,G){return z.host||(z.error=z.error||"HTTP URIs must have a host."),z},serialize:function(z,G){var se=String(z.scheme).toLowerCase()==="https";return(z.port===(se?443:80)||z.port==="")&&(z.port=void 0),z.path||(z.path="/"),z}},ie={scheme:"https",domainHost:oe.domainHost,parse:oe.parse,serialize:oe.serialize};function he(M){return typeof M.secure=="boolean"?M.secure:String(M.scheme).toLowerCase()==="wss"}var be={scheme:"ws",domainHost:!0,parse:function(z,G){var se=z;return se.secure=he(se),se.resourceName=(se.path||"/")+(se.query?"?"+se.query:""),se.path=void 0,se.query=void 0,se},serialize:function(z,G){if((z.port===(he(z)?443:80)||z.port==="")&&(z.port=void 0),typeof z.secure=="boolean"&&(z.scheme=z.secure?"wss":"ws",z.secure=void 0),z.resourceName){var se=z.resourceName.split("?"),le=m(se,2),Ne=le[0],Re=le[1];z.path=Ne&&Ne!=="/"?Ne:void 0,z.query=Re,z.resourceName=void 0}return z.fragment=void 0,z}},Ce={scheme:"wss",domainHost:be.domainHost,parse:be.parse,serialize:be.serialize},Qe={},xe="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",St="[0-9A-Fa-f]",xt=t(t("%[EFef]"+St+"%"+St+St+"%"+St+St)+"|"+t("%[89A-Fa-f]"+St+"%"+St+St)+"|"+t("%"+St+St)),Vt="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Lt="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",er=l(Lt,'[\\"\\\\]'),fn="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",un=new RegExp(xe,"g"),Yt=new RegExp(xt,"g"),cn=new RegExp(l("[^]",Vt,"[\\.]",'[\\"]',er),"g"),el=new RegExp(l("[^]",xe,fn),"g"),dn=el;function Rr(M){var z=fe(M);return z.match(un)?z:M}var tl={scheme:"mailto",parse:function(z,G){var se=z,le=se.to=se.path?se.path.split(","):[];if(se.path=void 0,se.query){for(var Ne=!1,Re={},$e=se.query.split("&"),rt=0,mt=$e.length;rt<mt;++rt){var Be=$e[rt].split("=");switch(Be[0]){case"to":for(var et=Be[1].split(","),pt=0,qe=et.length;pt<qe;++pt)le.push(et[pt]);break;case"subject":se.subject=Ve(Be[1],G);break;case"body":se.body=Ve(Be[1],G);break;default:Ne=!0,Re[Ve(Be[0],G)]=Ve(Be[1],G);break}}Ne&&(se.headers=Re)}se.query=void 0;for(var st=0,bt=le.length;st<bt;++st){var nt=le[st].split("@");if(nt[0]=Ve(nt[0]),G.unicodeSupport)nt[1]=Ve(nt[1],G).toLowerCase();else try{nt[1]=Pe.toASCII(Ve(nt[1],G).toLowerCase())}catch(Mt){se.error=se.error||"Email address's domain name can not be converted to ASCII via punycode: "+Mt}le[st]=nt.join("@")}return se},serialize:function(z,G){var se=z,le=i(z.to);if(le){for(var Ne=0,Re=le.length;Ne<Re;++Ne){var $e=String(le[Ne]),rt=$e.lastIndexOf("@"),mt=$e.slice(0,rt).replace(Yt,Rr).replace(Yt,n).replace(cn,pe),Be=$e.slice(rt+1);try{Be=G.iri?Pe.toUnicode(Be):Pe.toASCII(Ve(Be,G).toLowerCase())}catch(st){se.error=se.error||"Email address's domain name can not be converted to "+(G.iri?"Unicode":"ASCII")+" via punycode: "+st}le[Ne]=mt+"@"+Be}se.path=le.join(",")}var et=z.headers=z.headers||{};z.subject&&(et.subject=z.subject),z.body&&(et.body=z.body);var pt=[];for(var qe in et)et[qe]!==Qe[qe]&&pt.push(qe.replace(Yt,Rr).replace(Yt,n).replace(el,pe)+"="+et[qe].replace(Yt,Rr).replace(Yt,n).replace(dn,pe));return pt.length&&(se.query=pt.join("&")),se}},hn=/^([^\:]+)\:(.*)/,rl={scheme:"urn",parse:function(z,G){var se=z.path&&z.path.match(hn),le=z;if(se){var Ne=G.scheme||le.scheme||"urn",Re=se[1].toLowerCase(),$e=se[2],rt=Ne+":"+(G.nid||Re),mt=ae[rt];le.nid=Re,le.nss=$e,le.path=void 0,mt&&(le=mt.parse(le,G))}else le.error=le.error||"URN can not be parsed.";return le},serialize:function(z,G){var se=G.scheme||z.scheme||"urn",le=z.nid,Ne=se+":"+(G.nid||le),Re=ae[Ne];Re&&(z=Re.serialize(z,G));var $e=z,rt=z.nss;return $e.path=(le||G.nid)+":"+rt,$e}},_n=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ll={scheme:"urn:uuid",parse:function(z,G){var se=z;return se.uuid=se.nss,se.nss=void 0,!G.tolerant&&(!se.uuid||!se.uuid.match(_n))&&(se.error=se.error||"UUID is not valid."),se},serialize:function(z,G){var se=z;return se.nss=(z.uuid||"").toLowerCase(),se}};ae[oe.scheme]=oe,ae[ie.scheme]=ie,ae[be.scheme]=be,ae[Ce.scheme]=Ce,ae[tl.scheme]=tl,ae[rl.scheme]=rl,ae[ll.scheme]=ll,r.SCHEMES=ae,r.pctEncChar=pe,r.pctDecChars=fe,r.parse=je,r.removeDotSegments=Ge,r.serialize=ze,r.resolveComponents=Ze,r.resolve=We,r.normalize=de,r.equal=Oe,r.escapeComponent=Se,r.unescapeComponent=Ve,Object.defineProperty(r,"__esModule",{value:!0})})})(jr,jr.exports);var ii=jr.exports,Qr=function a(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var l,t,s;if(Array.isArray(e)){if(l=e.length,l!=r.length)return!1;for(t=l;t--!==0;)if(!a(e[t],r[t]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(s=Object.keys(e),l=s.length,l!==Object.keys(r).length)return!1;for(t=l;t--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[t]))return!1;for(t=l;t--!==0;){var n=s[t];if(!a(e[n],r[n]))return!1}return!0}return e!==e&&r!==r},oi=function(e){for(var r=0,l=e.length,t=0,s;t<l;)r++,s=e.charCodeAt(t++),s>=55296&&s<=56319&&t<l&&(s=e.charCodeAt(t),(s&64512)==56320&&t++);return r},Wt={copy:fi,checkDataType:qr,checkDataTypes:ui,coerceToTypes:ci,toHash:Gr,getProperty:Kr,escapeQuotes:Jr,equal:Qr,ucs2length:oi,varOccurences:_i,varReplace:vi,schemaHasRules:mi,schemaHasRulesExcept:pi,schemaUnknownRules:gi,toQuotedString:zr,getPathExpr:bi,getPath:Ei,getData:ki,unescapeFragment:yi,unescapeJsonPointer:Xr,escapeFragment:Si,escapeJsonPointer:Yr};function fi(a,e){e=e||{};for(var r in a)e[r]=a[r];return e}function qr(a,e,r,l){var t=l?" !== ":" === ",s=l?" || ":" && ",n=l?"!":"",i=l?"":"!";switch(a){case"null":return e+t+"null";case"array":return n+"Array.isArray("+e+")";case"object":return"("+n+e+s+"typeof "+e+t+'"object"'+s+i+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+t+'"number"'+s+i+"("+e+" % 1)"+s+e+t+e+(r?s+n+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+t+'"'+a+'"'+(r?s+n+"isFinite("+e+")":"")+")";default:return"typeof "+e+t+'"'+a+'"'}}function ui(a,e,r){switch(a.length){case 1:return qr(a[0],e,r,!0);default:var l="",t=Gr(a);t.array&&t.object&&(l=t.null?"(":"(!"+e+" || ",l+="typeof "+e+' !== "object")',delete t.null,delete t.array,delete t.object),t.number&&delete t.integer;for(var s in t)l+=(l?" && ":"")+qr(s,e,r,!0);return l}}var wl=Gr(["string","number","integer","boolean","null"]);function ci(a,e){if(Array.isArray(e)){for(var r=[],l=0;l<e.length;l++){var t=e[l];(wl[t]||a==="array"&&t==="array")&&(r[r.length]=t)}if(r.length)return r}else{if(wl[e])return[e];if(a==="array"&&e==="array")return["array"]}}function Gr(a){for(var e={},r=0;r<a.length;r++)e[a[r]]=!0;return e}var di=/^[a-z$_][a-z$_0-9]*$/i,hi=/'|\\/g;function Kr(a){return typeof a=="number"?"["+a+"]":di.test(a)?"."+a:"['"+Jr(a)+"']"}function Jr(a){return a.replace(hi,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function _i(a,e){e+="[^0-9]";var r=a.match(new RegExp(e,"g"));return r?r.length:0}function vi(a,e,r){return e+="([^0-9])",r=r.replace(/\$/g,"$$$$"),a.replace(new RegExp(e,"g"),r+"$1")}function mi(a,e){if(typeof a=="boolean")return!a;for(var r in a)if(e[r])return!0}function pi(a,e,r){if(typeof a=="boolean")return!a&&r!="not";for(var l in a)if(l!=r&&e[l])return!0}function gi(a,e){if(typeof a!="boolean"){for(var r in a)if(!e[r])return r}}function zr(a){return"'"+Jr(a)+"'"}function bi(a,e,r,l){var t=r?"'/' + "+e+(l?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):l?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return As(a,t)}function Ei(a,e,r){var l=zr(r?"/"+Yr(e):Kr(e));return As(a,l)}var Pi=/^\/(?:[^~]|~0|~1)*$/,wi=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function ki(a,e,r){var l,t,s,n;if(a==="")return"rootData";if(a[0]=="/"){if(!Pi.test(a))throw new Error("Invalid JSON-pointer: "+a);t=a,s="rootData"}else{if(n=a.match(wi),!n)throw new Error("Invalid JSON-pointer: "+a);if(l=+n[1],t=n[2],t=="#"){if(l>=e)throw new Error("Cannot access property/index "+l+" levels up, current level is "+e);return r[e-l]}if(l>e)throw new Error("Cannot access data "+l+" levels up, current level is "+e);if(s="data"+(e-l||""),!t)return s}for(var i=s,f=t.split("/"),h=0;h<f.length;h++){var d=f[h];d&&(s+=Kr(Xr(d)),i+=" && "+s)}return i}function As(a,e){return a=='""'?e:(a+" + "+e).replace(/([^\\])' \+ '/g,"$1")}function yi(a){return Xr(decodeURIComponent(a))}function Si(a){return encodeURIComponent(Yr(a))}function Yr(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}function Xr(a){return a.replace(/~1/g,"/").replace(/~0/g,"~")}var Di=Wt,Fs=Ci;function Ci(a){Di.copy(a,this)}var Ls={exports:{}},Bt=Ls.exports=function(a,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var l=typeof r=="function"?r:r.pre||function(){},t=r.post||function(){};_r(e,l,t,a,"",a)};Bt.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};Bt.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Bt.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Bt.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function _r(a,e,r,l,t,s,n,i,f,h){if(l&&typeof l=="object"&&!Array.isArray(l)){e(l,t,s,n,i,f,h);for(var d in l){var _=l[d];if(Array.isArray(_)){if(d in Bt.arrayKeywords)for(var m=0;m<_.length;m++)_r(a,e,r,_[m],t+"/"+d+"/"+m,s,t,d,l,m)}else if(d in Bt.propsKeywords){if(_&&typeof _=="object")for(var c in _)_r(a,e,r,_[c],t+"/"+d+"/"+Ni(c),s,t,d,l,c)}else(d in Bt.keywords||a.allKeys&&!(d in Bt.skipKeywords))&&_r(a,e,r,_,t+"/"+d,s,t,d,l)}r(l,t,s,n,i,f,h)}}function Ni(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}var Ri=Ls.exports,sr=ii,kl=Qr,yr=Wt,gr=Fs,Ii=Ri,Zr=Qt;Qt.normalizeId=$t;Qt.fullPath=br;Qt.url=Er;Qt.ids=Li;Qt.inlineRef=Ur;Qt.schema=Sr;function Qt(a,e,r){var l=this._refs[r];if(typeof l=="string")if(this._refs[l])l=this._refs[l];else return Qt.call(this,a,e,l);if(l=l||this._schemas[r],l instanceof gr)return Ur(l.schema,this._opts.inlineRefs)?l.schema:l.validate||this._compile(l);var t=Sr.call(this,e,r),s,n,i;return t&&(s=t.schema,e=t.root,i=t.baseId),s instanceof gr?n=s.validate||a.call(this,s.schema,e,void 0,i):s!==void 0&&(n=Ur(s,this._opts.inlineRefs)?s:a.call(this,s,e,void 0,i)),n}function Sr(a,e){var r=sr.parse(e),l=qs(r),t=br(this._getId(a.schema));if(Object.keys(a.schema).length===0||l!==t){var s=$t(l),n=this._refs[s];if(typeof n=="string")return Oi.call(this,a,n,r);if(n instanceof gr)n.validate||this._compile(n),a=n;else if(n=this._schemas[s],n instanceof gr){if(n.validate||this._compile(n),s==$t(e))return{schema:n,root:a,baseId:t};a=n}else return;if(!a.schema)return;t=br(this._getId(a.schema))}return js.call(this,r,t,a.schema,a)}function Oi(a,e,r){var l=Sr.call(this,a,e);if(l){var t=l.schema,s=l.baseId;a=l.root;var n=this._getId(t);return n&&(s=Er(s,n)),js.call(this,r,s,t,a)}}var Ti=yr.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function js(a,e,r,l){if(a.fragment=a.fragment||"",a.fragment.slice(0,1)=="/"){for(var t=a.fragment.split("/"),s=1;s<t.length;s++){var n=t[s];if(n){if(n=yr.unescapeFragment(n),r=r[n],r===void 0)break;var i;if(!Ti[n]&&(i=this._getId(r),i&&(e=Er(e,i)),r.$ref)){var f=Er(e,r.$ref),h=Sr.call(this,l,f);h&&(r=h.schema,l=h.root,e=h.baseId)}}}if(r!==void 0&&r!==l.schema)return{schema:r,root:l,baseId:e}}}var Ai=yr.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function Ur(a,e){if(e===!1)return!1;if(e===void 0||e===!0)return Vr(a);if(e)return Mr(a)<=e}function Vr(a){var e;if(Array.isArray(a)){for(var r=0;r<a.length;r++)if(e=a[r],typeof e=="object"&&!Vr(e))return!1}else for(var l in a)if(l=="$ref"||(e=a[l],typeof e=="object"&&!Vr(e)))return!1;return!0}function Mr(a){var e=0,r;if(Array.isArray(a)){for(var l=0;l<a.length;l++)if(r=a[l],typeof r=="object"&&(e+=Mr(r)),e==1/0)return 1/0}else for(var t in a){if(t=="$ref")return 1/0;if(Ai[t])e++;else if(r=a[t],typeof r=="object"&&(e+=Mr(r)+1),e==1/0)return 1/0}return e}function br(a,e){e!==!1&&(a=$t(a));var r=sr.parse(a);return qs(r)}function qs(a){return sr.serialize(a).split("#")[0]+"#"}var Fi=/#\/?$/;function $t(a){return a?a.replace(Fi,""):""}function Er(a,e){return e=$t(e),sr.resolve(a,e)}function Li(a){var e=$t(this._getId(a)),r={"":e},l={"":br(e,!1)},t={},s=this;return Ii(a,{allKeys:!0},function(n,i,f,h,d,_,m){if(i!==""){var c=s._getId(n),u=r[h],E=l[h]+"/"+d;if(m!==void 0&&(E+="/"+(typeof m=="number"?m:yr.escapeFragment(m))),typeof c=="string"){c=u=$t(u?sr.resolve(u,c):c);var g=s._refs[c];if(typeof g=="string"&&(g=s._refs[g]),g&&g.schema){if(!kl(n,g.schema))throw new Error('id "'+c+'" resolves to more than one schema')}else if(c!=$t(E))if(c[0]=="#"){if(t[c]&&!kl(n,t[c]))throw new Error('id "'+c+'" resolves to more than one schema');t[c]=n}else s._refs[c]=E}r[i]=u,l[i]=E}}),t}var Tr=Zr,Wr={Validation:yl(ji),MissingRef:yl(xr)};function ji(a){this.message="validation failed",this.errors=a,this.ajv=this.validation=!0}xr.message=function(a,e){return"can't resolve reference "+e+" from id "+a};function xr(a,e,r){this.message=r||xr.message(a,e),this.missingRef=Tr.url(a,e),this.missingSchema=Tr.normalizeId(Tr.fullPath(this.missingRef))}function yl(a){return a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a}var zs=function(a,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=typeof e.cycles=="boolean"?e.cycles:!1,l=e.cmp&&function(s){return function(n){return function(i,f){var h={key:i,value:n[i]},d={key:f,value:n[f]};return s(h,d)}}}(e.cmp),t=[];return function s(n){if(n&&n.toJSON&&typeof n.toJSON=="function"&&(n=n.toJSON()),n!==void 0){if(typeof n=="number")return isFinite(n)?""+n:"null";if(typeof n!="object")return JSON.stringify(n);var i,f;if(Array.isArray(n)){for(f="[",i=0;i<n.length;i++)i&&(f+=","),f+=s(n[i])||"null";return f+"]"}if(n===null)return"null";if(t.indexOf(n)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var h=t.push(n)-1,d=Object.keys(n).sort(l&&l(n));for(f="",i=0;i<d.length;i++){var _=d[i],m=s(n[_]);m&&(f&&(f+=","),f+=JSON.stringify(_)+":"+m)}return t.splice(h,1),"{"+f+"}"}}(a)},Us=function(e,r,l){var t="",s=e.schema.$async===!0,n=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),i=e.self._getId(e.schema);if(e.opts.strictKeywords){var f=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(f){var h="unknown keyword: "+f;if(e.opts.strictKeywords==="log")e.logger.warn(h);else throw new Error(h)}}if(e.isTop&&(t+=" var validate = ",s&&(e.async=!0,t+="async "),t+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",i&&(e.opts.sourceCode||e.opts.processCode)&&(t+=" "+("/*# sourceURL="+i+" */")+" ")),typeof e.schema=="boolean"||!(n||e.schema.$ref)){var r="false schema",d=e.level,_=e.dataLevel,m=e.schema[r],c=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,F,E="data"+(_||""),D="valid"+d;if(e.schema===!1){e.isTop?p=!0:t+=" var "+D+" = false; ";var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(F||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'boolean schema is false' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),t+=" } "):t+=" {} ";var P=t;t=g.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?s?t+=" return data; ":t+=" validate.errors = null; return true; ":t+=" var "+D+" = true; ";return e.isTop&&(t+=" }; return validate; "),t}if(e.isTop){var I=e.isTop,d=e.level=0,_=e.dataLevel=0,E="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var C="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(C);else throw new Error(C)}t+=" var vErrors = null; ",t+=" var errors = 0;     ",t+=" if (rootData === undefined) rootData = data; "}else{var d=e.level,_=e.dataLevel,E="data"+(_||"");if(i&&(e.baseId=e.resolve.url(e.baseId,i)),s&&!e.async)throw new Error("async schema in sync schema");t+=" var errs_"+d+" = errors;"}var D="valid"+d,p=!e.opts.allErrors,N="",S="",F,R=e.schema.type,T=Array.isArray(R);if(R&&e.opts.nullable&&e.schema.nullable===!0&&(T?R.indexOf("null")==-1&&(R=R.concat("null")):R!="null"&&(R=[R,"null"],T=!0)),T&&R.length==1&&(R=R[0],T=!1),e.schema.$ref&&n){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(n=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(t+=" "+e.RULES.all.$comment.code(e,"$comment")),R){if(e.opts.coerceTypes)var b=e.util.coerceToTypes(e.opts.coerceTypes,R);var O=e.RULES.types[R];if(b||T||O===!0||O&&!He(O)){var c=e.schemaPath+".type",u=e.errSchemaPath+"/type",c=e.schemaPath+".type",u=e.errSchemaPath+"/type",w=T?"checkDataTypes":"checkDataType";if(t+=" if ("+e.util[w](R,E,e.opts.strictNumbers,!0)+") { ",b){var A="dataType"+d,Y="coerced"+d;t+=" var "+A+" = typeof "+E+"; var "+Y+" = undefined; ",e.opts.coerceTypes=="array"&&(t+=" if ("+A+" == 'object' && Array.isArray("+E+") && "+E+".length == 1) { "+E+" = "+E+"[0]; "+A+" = typeof "+E+"; if ("+e.util.checkDataType(e.schema.type,E,e.opts.strictNumbers)+") "+Y+" = "+E+"; } "),t+=" if ("+Y+" !== undefined) ; ";var ne=b;if(ne)for(var te,Q=-1,H=ne.length-1;Q<H;)te=ne[Q+=1],te=="string"?t+=" else if ("+A+" == 'number' || "+A+" == 'boolean') "+Y+" = '' + "+E+"; else if ("+E+" === null) "+Y+" = ''; ":te=="number"||te=="integer"?(t+=" else if ("+A+" == 'boolean' || "+E+" === null || ("+A+" == 'string' && "+E+" && "+E+" == +"+E+" ",te=="integer"&&(t+=" && !("+E+" % 1)"),t+=")) "+Y+" = +"+E+"; "):te=="boolean"?t+=" else if ("+E+" === 'false' || "+E+" === 0 || "+E+" === null) "+Y+" = false; else if ("+E+" === 'true' || "+E+" === 1) "+Y+" = true; ":te=="null"?t+=" else if ("+E+" === '' || "+E+" === 0 || "+E+" === false) "+Y+" = null; ":e.opts.coerceTypes=="array"&&te=="array"&&(t+=" else if ("+A+" == 'string' || "+A+" == 'number' || "+A+" == 'boolean' || "+E+" == null) "+Y+" = ["+E+"]; ");t+=" else {   ";var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(F||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { type: '",T?t+=""+R.join(","):t+=""+R,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",T?t+=""+R.join(","):t+=""+R,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),t+=" } "):t+=" {} ";var P=t;t=g.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } if ("+Y+" !== undefined) {  ";var V=_?"data"+(_-1||""):"parentData",U=_?e.dataPathArr[_]:"parentDataProperty";t+=" "+E+" = "+Y+"; ",_||(t+="if ("+V+" !== undefined)"),t+=" "+V+"["+U+"] = "+Y+"; } "}else{var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(F||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { type: '",T?t+=""+R.join(","):t+=""+R,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",T?t+=""+R.join(","):t+=""+R,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),t+=" } "):t+=" {} ";var P=t;t=g.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}t+=" } "}}if(e.schema.$ref&&!n)t+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",p&&(t+=" } if (errors === ",I?t+="0":t+="errs_"+d,t+=") { ",S+="}");else{var Z=e.RULES;if(Z){for(var O,L=-1,K=Z.length-1;L<K;)if(O=Z[L+=1],He(O)){if(O.type&&(t+=" if ("+e.util.checkDataType(O.type,E,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(O.type=="object"&&e.schema.properties){var m=e.schema.properties,ye=Object.keys(m),Pe=ye;if(Pe)for(var ae,pe=-1,fe=Pe.length-1;pe<fe;){ae=Pe[pe+=1];var me=m[ae];if(me.default!==void 0){var De=E+e.util.getProperty(ae);if(e.compositeRule){if(e.opts.strictDefaults){var C="default is ignored for: "+De;if(e.opts.strictDefaults==="log")e.logger.warn(C);else throw new Error(C)}}else t+=" if ("+De+" === undefined ",e.opts.useDefaults=="empty"&&(t+=" || "+De+" === null || "+De+" === '' "),t+=" ) "+De+" = ",e.opts.useDefaults=="shared"?t+=" "+e.useDefault(me.default)+" ":t+=" "+JSON.stringify(me.default)+" ",t+="; "}}}else if(O.type=="array"&&Array.isArray(e.schema.items)){var Ue=e.schema.items;if(Ue){for(var me,Q=-1,W=Ue.length-1;Q<W;)if(me=Ue[Q+=1],me.default!==void 0){var De=E+"["+Q+"]";if(e.compositeRule){if(e.opts.strictDefaults){var C="default is ignored for: "+De;if(e.opts.strictDefaults==="log")e.logger.warn(C);else throw new Error(C)}}else t+=" if ("+De+" === undefined ",e.opts.useDefaults=="empty"&&(t+=" || "+De+" === null || "+De+" === '' "),t+=" ) "+De+" = ",e.opts.useDefaults=="shared"?t+=" "+e.useDefault(me.default)+" ":t+=" "+JSON.stringify(me.default)+" ",t+="; "}}}}var j=O.rules;if(j){for(var re,je=-1,Ke=j.length-1;je<Ke;)if(re=j[je+=1],gt(re)){var at=re.code(e,re.keyword,O.type);at&&(t+=" "+at+" ",p&&(N+="}"))}}if(p&&(t+=" "+N+" ",N=""),O.type&&(t+=" } ",R&&R===O.type&&!b)){t+=" else { ";var c=e.schemaPath+".type",u=e.errSchemaPath+"/type",g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(F||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { type: '",T?t+=""+R.join(","):t+=""+R,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",T?t+=""+R.join(","):t+=""+R,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),t+=" } "):t+=" {} ";var P=t;t=g.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } "}p&&(t+=" if (errors === ",I?t+="0":t+="errs_"+d,t+=") { ",S+="}")}}}p&&(t+=" "+S+" "),I?(s?(t+=" if (errors === 0) return data;           ",t+=" else throw new ValidationError(vErrors); "):(t+=" validate.errors = vErrors; ",t+=" return errors === 0;       "),t+=" }; return validate;"):t+=" var "+D+" = errors === errs_"+d+";";function He(Ge){for(var ze=Ge.rules,Ze=0;Ze<ze.length;Ze++)if(gt(ze[Ze]))return!0}function gt(Ge){return e.schema[Ge.keyword]!==void 0||Ge.implements&&Je(Ge)}function Je(Ge){for(var ze=Ge.implements,Ze=0;Ze<ze.length;Ze++)if(e.schema[ze[Ze]]!==void 0)return!0}return t},ur=Zr,Pr=Wt,Vs=Wr,qi=zs,Sl=Us,zi=Pr.ucs2length,Ui=Qr,Vi=Vs.Validation,Mi=Br;function Br(a,e,r,l){var t=this,s=this._opts,n=[void 0],i={},f=[],h={},d=[],_={},m=[];e=e||{schema:a,refVal:n,refs:i};var c=Bi.call(this,a,e,l),u=this._compilations[c.index];if(c.compiling)return u.callValidate=C;var E=this._formats,g=this.RULES;try{var P=D(a,e,r,l);u.validate=P;var I=u.callValidate;return I&&(I.schema=P.schema,I.errors=null,I.refs=P.refs,I.refVal=P.refVal,I.root=P.root,I.$async=P.$async,s.sourceCode&&(I.source=P.source)),P}finally{$i.call(this,a,e,l)}function C(){var w=u.validate,A=w.apply(this,arguments);return C.errors=w.errors,A}function D(w,A,Y,ne){var te=!A||A&&A.schema==w;if(A.schema!=e.schema)return Br.call(t,w,A,Y,ne);var Q=w.$async===!0,H=Sl({isTop:!0,schema:w,isRoot:te,baseId:ne,root:A,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:Vs.MissingRef,RULES:g,validate:Sl,util:Pr,resolve:ur,resolveRef:p,usePattern:T,useDefault:b,useCustomRule:O,opts:s,formats:E,logger:t.logger,self:t});H=cr(n,Gi)+cr(f,Hi)+cr(d,Qi)+cr(m,Ki)+H,s.processCode&&(H=s.processCode(H,w));var V;try{var U=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",H);V=U(t,g,E,e,n,d,m,Ui,zi,Vi),n[0]=V}catch(Z){throw t.logger.error("Error compiling schema, function code:",H),Z}return V.schema=w,V.errors=null,V.refs=i,V.refVal=n,V.root=te?V:A,Q&&(V.$async=!0),s.sourceCode===!0&&(V.source={code:H,patterns:f,defaults:d}),V}function p(w,A,Y){A=ur.url(w,A);var ne=i[A],te,Q;if(ne!==void 0)return te=n[ne],Q="refVal["+ne+"]",R(te,Q);if(!Y&&e.refs){var H=e.refs[A];if(H!==void 0)return te=e.refVal[H],Q=N(A,te),R(te,Q)}Q=N(A);var V=ur.call(t,D,e,A);if(V===void 0){var U=r&&r[A];U&&(V=ur.inlineRef(U,s.inlineRefs)?U:Br.call(t,U,e,r,w))}if(V===void 0)S(A);else return F(A,V),R(V,Q)}function N(w,A){var Y=n.length;return n[Y]=A,i[w]=Y,"refVal"+Y}function S(w){delete i[w]}function F(w,A){var Y=i[w];n[Y]=A}function R(w,A){return typeof w=="object"||typeof w=="boolean"?{code:A,schema:w,inline:!0}:{code:A,$async:w&&!!w.$async}}function T(w){var A=h[w];return A===void 0&&(A=h[w]=f.length,f[A]=w),"pattern"+A}function b(w){switch(typeof w){case"boolean":case"number":return""+w;case"string":return Pr.toQuotedString(w);case"object":if(w===null)return"null";var A=qi(w),Y=_[A];return Y===void 0&&(Y=_[A]=d.length,d[Y]=w),"default"+Y}}function O(w,A,Y,ne){if(t._opts.validateSchema!==!1){var te=w.definition.dependencies;if(te&&!te.every(function(Pe){return Object.prototype.hasOwnProperty.call(Y,Pe)}))throw new Error("parent schema must have all required keywords: "+te.join(","));var Q=w.definition.validateSchema;if(Q){var H=Q(A);if(!H){var V="keyword schema is invalid: "+t.errorsText(Q.errors);if(t._opts.validateSchema=="log")t.logger.error(V);else throw new Error(V)}}}var U=w.definition.compile,Z=w.definition.inline,L=w.definition.macro,K;if(U)K=U.call(t,A,Y,ne);else if(L)K=L.call(t,A,Y,ne),s.validateSchema!==!1&&t.validateSchema(K,!0);else if(Z)K=Z.call(t,ne,w.keyword,A,Y);else if(K=w.definition.validate,!K)return;if(K===void 0)throw new Error('custom keyword "'+w.keyword+'"failed to compile');var ye=m.length;return m[ye]=K,{code:"customRule"+ye,validate:K}}}function Bi(a,e,r){var l=Ms.call(this,a,e,r);return l>=0?{index:l,compiling:!0}:(l=this._compilations.length,this._compilations[l]={schema:a,root:e,baseId:r},{index:l,compiling:!1})}function $i(a,e,r){var l=Ms.call(this,a,e,r);l>=0&&this._compilations.splice(l,1)}function Ms(a,e,r){for(var l=0;l<this._compilations.length;l++){var t=this._compilations[l];if(t.schema==a&&t.root==e&&t.baseId==r)return l}return-1}function Hi(a,e){return"var pattern"+a+" = new RegExp("+Pr.toQuotedString(e[a])+");"}function Qi(a){return"var default"+a+" = defaults["+a+"];"}function Gi(a,e){return e[a]===void 0?"":"var refVal"+a+" = refVal["+a+"];"}function Ki(a){return"var customRule"+a+" = customRules["+a+"];"}function cr(a,e){if(!a.length)return"";for(var r="",l=0;l<a.length;l++)r+=e(l,a);return r}var Bs={exports:{}},Dr=Bs.exports=function(){this._cache={}};Dr.prototype.put=function(e,r){this._cache[e]=r};Dr.prototype.get=function(e){return this._cache[e]};Dr.prototype.del=function(e){delete this._cache[e]};Dr.prototype.clear=function(){this._cache={}};var Ji=Bs.exports,Yi=Wt,Xi=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Zi=[0,31,28,31,30,31,30,31,31,30,31,30,31],Wi=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,$s=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,xi=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,eo=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Hs=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Qs=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,Gs=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,Ks=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Js=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Ys=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,to=Cr;function Cr(a){return a=a=="full"?"full":"fast",Yi.copy(Cr[a])}Cr.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":Hs,url:Qs,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:$s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Ws,uuid:Gs,"json-pointer":Ks,"json-pointer-uri-fragment":Js,"relative-json-pointer":Ys};Cr.full={date:Xs,time:Zs,"date-time":ao,uri:no,"uri-reference":eo,"uri-template":Hs,url:Qs,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:$s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Ws,uuid:Gs,"json-pointer":Ks,"json-pointer-uri-fragment":Js,"relative-json-pointer":Ys};function ro(a){return a%4===0&&(a%100!==0||a%400===0)}function Xs(a){var e=a.match(Xi);if(!e)return!1;var r=+e[1],l=+e[2],t=+e[3];return l>=1&&l<=12&&t>=1&&t<=(l==2&&ro(r)?29:Zi[l])}function Zs(a,e){var r=a.match(Wi);if(!r)return!1;var l=r[1],t=r[2],s=r[3],n=r[5];return(l<=23&&t<=59&&s<=59||l==23&&t==59&&s==60)&&(!e||n)}var lo=/t|\s/i;function ao(a){var e=a.split(lo);return e.length==2&&Xs(e[0])&&Zs(e[1],!0)}var so=/\/|:/;function no(a){return so.test(a)&&xi.test(a)}var io=/[^\\]\\Z/;function Ws(a){if(io.test(a))return!1;try{return new RegExp(a),!0}catch{return!1}}var oo=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,i=e.schema[r],f=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,d="data"+(n||""),_="valid"+s,m,c;if(i=="#"||i=="#/")e.isRoot?(m=e.async,c="validate"):(m=e.root.schema.$async===!0,c="root.refVal[0]");else{var u=e.resolveRef(e.baseId,i,e.isRoot);if(u===void 0){var E=e.MissingRefError.message(e.baseId,i);if(e.opts.missingRefs=="fail"){e.logger.error(E);var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { ref: '"+e.util.escapeQuotes(i)+"' } ",e.opts.messages!==!1&&(t+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(i)+"' "),e.opts.verbose&&(t+=" , schema: "+e.util.toQuotedString(i)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ";var P=t;t=g.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h&&(t+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(E),h&&(t+=" if (true) { ");else throw new e.MissingRefError(e.baseId,i,E)}else if(u.inline){var I=e.util.copy(e);I.level++;var C="valid"+I.level;I.schema=u.schema,I.schemaPath="",I.errSchemaPath=i;var D=e.validate(I).replace(/validate\.schema/g,u.code);t+=" "+D+" ",h&&(t+=" if ("+C+") { ")}else m=u.$async===!0||e.async&&u.$async!==!1,c=u.code}if(c){var g=g||[];g.push(t),t="",e.opts.passContext?t+=" "+c+".call(this, ":t+=" "+c+"( ",t+=" "+d+", (dataPath || '')",e.errorPath!='""'&&(t+=" + "+e.errorPath);var p=n?"data"+(n-1||""):"parentData",N=n?e.dataPathArr[n]:"parentDataProperty";t+=" , "+p+" , "+N+", rootData)  ";var S=t;if(t=g.pop(),m){if(!e.async)throw new Error("async schema referenced by sync schema");h&&(t+=" var "+_+"; "),t+=" try { await "+S+"; ",h&&(t+=" "+_+" = true; "),t+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",h&&(t+=" "+_+" = false; "),t+=" } ",h&&(t+=" if ("+_+") { ")}else t+=" if (!"+S+") { if (vErrors === null) vErrors = "+c+".errors; else vErrors = vErrors.concat("+c+".errors); errors = vErrors.length; } ",h&&(t+=" else { ")}return t},fo=function(e,r,l){var t=" ",s=e.schema[r],n=e.schemaPath+e.util.getProperty(r),i=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,h=e.util.copy(e),d="";h.level++;var _="valid"+h.level,m=h.baseId,c=!0,u=s;if(u)for(var E,g=-1,P=u.length-1;g<P;)E=u[g+=1],(e.opts.strictKeywords?typeof E=="object"&&Object.keys(E).length>0||E===!1:e.util.schemaHasRules(E,e.RULES.all))&&(c=!1,h.schema=E,h.schemaPath=n+"["+g+"]",h.errSchemaPath=i+"/"+g,t+="  "+e.validate(h)+" ",h.baseId=m,f&&(t+=" if ("+_+") { ",d+="}"));return f&&(c?t+=" if (true) { ":t+=" "+d.slice(0,-1)+" "),t},uo=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,i=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="valid"+s,c="errs__"+s,u=e.util.copy(e),E="";u.level++;var g="valid"+u.level,P=i.every(function(F){return e.opts.strictKeywords?typeof F=="object"&&Object.keys(F).length>0||F===!1:e.util.schemaHasRules(F,e.RULES.all)});if(P){var I=u.baseId;t+=" var "+c+" = errors; var "+m+" = false;  ";var C=e.compositeRule;e.compositeRule=u.compositeRule=!0;var D=i;if(D)for(var p,N=-1,S=D.length-1;N<S;)p=D[N+=1],u.schema=p,u.schemaPath=f+"["+N+"]",u.errSchemaPath=h+"/"+N,t+="  "+e.validate(u)+" ",u.baseId=I,t+=" "+m+" = "+m+" || "+g+"; if (!"+m+") { ",E+="}";e.compositeRule=u.compositeRule=C,t+=" "+E+" if (!"+m+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+=" } else {  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; } ",e.opts.allErrors&&(t+=" } ")}else d&&(t+=" if (true) { ");return t},co=function(e,r,l){var t=" ",s=e.schema[r],n=e.errSchemaPath+"/"+r;e.opts.allErrors;var i=e.util.toQuotedString(s);return e.opts.$comment===!0?t+=" console.log("+i+");":typeof e.opts.$comment=="function"&&(t+=" self._opts.$comment("+i+", "+e.util.toQuotedString(n)+", validate.root.schema);"),t},ho=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,i=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="valid"+s,c=e.opts.$data&&i&&i.$data;c&&(t+=" var schema"+s+" = "+e.util.getData(i.$data,n,e.dataPathArr)+"; "),c||(t+=" var schema"+s+" = validate.schema"+f+";"),t+="var "+m+" = equal("+_+", schema"+s+"); if (!"+m+") {   ";var u=u||[];u.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { allowedValue: schema"+s+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be equal to constant' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var E=t;return t=u.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+E+"]); ":t+=" validate.errors = ["+E+"]; return false; ":t+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" }",d&&(t+=" else { "),t},_o=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,i=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="valid"+s,c="errs__"+s,u=e.util.copy(e),E="";u.level++;var g="valid"+u.level,P="i"+s,I=u.dataLevel=e.dataLevel+1,C="data"+I,D=e.baseId,p=e.opts.strictKeywords?typeof i=="object"&&Object.keys(i).length>0||i===!1:e.util.schemaHasRules(i,e.RULES.all);if(t+="var "+c+" = errors;var "+m+";",p){var N=e.compositeRule;e.compositeRule=u.compositeRule=!0,u.schema=i,u.schemaPath=f,u.errSchemaPath=h,t+=" var "+g+" = false; for (var "+P+" = 0; "+P+" < "+_+".length; "+P+"++) { ",u.errorPath=e.util.getPathExpr(e.errorPath,P,e.opts.jsonPointers,!0);var S=_+"["+P+"]";u.dataPathArr[I]=P;var F=e.validate(u);u.baseId=D,e.util.varOccurences(F,C)<2?t+=" "+e.util.varReplace(F,C,S)+" ":t+=" var "+C+" = "+S+"; "+F+" ",t+=" if ("+g+") break; }  ",e.compositeRule=u.compositeRule=N,t+=" "+E+" if (!"+g+") {"}else t+=" if ("+_+".length == 0) {";var R=R||[];R.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should contain a valid item' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var T=t;return t=R.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+T+"]); ":t+=" validate.errors = ["+T+"]; return false; ":t+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { ",p&&(t+="  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; } "),e.opts.allErrors&&(t+=" } "),t},vo=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,i=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="errs__"+s,c=e.util.copy(e),u="";c.level++;var E="valid"+c.level,g={},P={},I=e.opts.ownProperties;for(N in i)if(N!="__proto__"){var C=i[N],D=Array.isArray(C)?P:g;D[N]=C}t+="var "+m+" = errors;";var p=e.errorPath;t+="var missing"+s+";";for(var N in P)if(D=P[N],D.length){if(t+=" if ( "+_+e.util.getProperty(N)+" !== undefined ",I&&(t+=" && Object.prototype.hasOwnProperty.call("+_+", '"+e.util.escapeQuotes(N)+"') "),d){t+=" && ( ";var S=D;if(S)for(var F,R=-1,T=S.length-1;R<T;){F=S[R+=1],R&&(t+=" || ");var b=e.util.getProperty(F),O=_+b;t+=" ( ( "+O+" === undefined ",I&&(t+=" || ! Object.prototype.hasOwnProperty.call("+_+", '"+e.util.escapeQuotes(F)+"') "),t+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?F:b)+") ) "}t+=")) {  ";var w="missing"+s,A="' + "+w+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(p,w,!0):p+" + "+w);var Y=Y||[];Y.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { property: '"+e.util.escapeQuotes(N)+"', missingProperty: '"+A+"', depsCount: "+D.length+", deps: '"+e.util.escapeQuotes(D.length==1?D[0]:D.join(", "))+"' } ",e.opts.messages!==!1&&(t+=" , message: 'should have ",D.length==1?t+="property "+e.util.escapeQuotes(D[0]):t+="properties "+e.util.escapeQuotes(D.join(", ")),t+=" when property "+e.util.escapeQuotes(N)+" is present' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var ne=t;t=Y.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+ne+"]); ":t+=" validate.errors = ["+ne+"]; return false; ":t+=" var err = "+ne+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{t+=" ) { ";var te=D;if(te)for(var F,Q=-1,H=te.length-1;Q<H;){F=te[Q+=1];var b=e.util.getProperty(F),A=e.util.escapeQuotes(F),O=_+b;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(p,F,e.opts.jsonPointers)),t+=" if ( "+O+" === undefined ",I&&(t+=" || ! Object.prototype.hasOwnProperty.call("+_+", '"+e.util.escapeQuotes(F)+"') "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { property: '"+e.util.escapeQuotes(N)+"', missingProperty: '"+A+"', depsCount: "+D.length+", deps: '"+e.util.escapeQuotes(D.length==1?D[0]:D.join(", "))+"' } ",e.opts.messages!==!1&&(t+=" , message: 'should have ",D.length==1?t+="property "+e.util.escapeQuotes(D[0]):t+="properties "+e.util.escapeQuotes(D.join(", ")),t+=" when property "+e.util.escapeQuotes(N)+" is present' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}t+=" }   ",d&&(u+="}",t+=" else { ")}e.errorPath=p;var V=c.baseId;for(var N in g){var C=g[N];(e.opts.strictKeywords?typeof C=="object"&&Object.keys(C).length>0||C===!1:e.util.schemaHasRules(C,e.RULES.all))&&(t+=" "+E+" = true; if ( "+_+e.util.getProperty(N)+" !== undefined ",I&&(t+=" && Object.prototype.hasOwnProperty.call("+_+", '"+e.util.escapeQuotes(N)+"') "),t+=") { ",c.schema=C,c.schemaPath=f+e.util.getProperty(N),c.errSchemaPath=h+"/"+e.util.escapeFragment(N),t+="  "+e.validate(c)+" ",c.baseId=V,t+=" }  ",d&&(t+=" if ("+E+") { ",u+="}"))}return d&&(t+="   "+u+" if ("+m+" == errors) {"),t},mo=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,i=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="valid"+s,c=e.opts.$data&&i&&i.$data;c&&(t+=" var schema"+s+" = "+e.util.getData(i.$data,n,e.dataPathArr)+"; ");var u="i"+s,E="schema"+s;c||(t+=" var "+E+" = validate.schema"+f+";"),t+="var "+m+";",c&&(t+=" if (schema"+s+" === undefined) "+m+" = true; else if (!Array.isArray(schema"+s+")) "+m+" = false; else {"),t+=""+m+" = false;for (var "+u+"=0; "+u+"<"+E+".length; "+u+"++) if (equal("+_+", "+E+"["+u+"])) { "+m+" = true; break; }",c&&(t+="  }  "),t+=" if (!"+m+") {   ";var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { allowedValues: schema"+s+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var P=t;return t=g.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" }",d&&(t+=" else { "),t},po=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,i=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||"");if(e.opts.format===!1)return d&&(t+=" if (true) { "),t;var m=e.opts.$data&&i&&i.$data,c;m?(t+=" var schema"+s+" = "+e.util.getData(i.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=i;var u=e.opts.unknownFormats,E=Array.isArray(u);if(m){var g="format"+s,P="isObject"+s,I="formatType"+s;t+=" var "+g+" = formats["+c+"]; var "+P+" = typeof "+g+" == 'object' && !("+g+" instanceof RegExp) && "+g+".validate; var "+I+" = "+P+" && "+g+".type || 'string'; if ("+P+") { ",e.async&&(t+=" var async"+s+" = "+g+".async; "),t+=" "+g+" = "+g+".validate; } if (  ",m&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'string') || "),t+=" (",u!="ignore"&&(t+=" ("+c+" && !"+g+" ",E&&(t+=" && self._opts.unknownFormats.indexOf("+c+") == -1 "),t+=") || "),t+=" ("+g+" && "+I+" == '"+l+"' && !(typeof "+g+" == 'function' ? ",e.async?t+=" (async"+s+" ? await "+g+"("+_+") : "+g+"("+_+")) ":t+=" "+g+"("+_+") ",t+=" : "+g+".test("+_+"))))) {"}else{var g=e.formats[i];if(!g){if(u=="ignore")return e.logger.warn('unknown format "'+i+'" ignored in schema at path "'+e.errSchemaPath+'"'),d&&(t+=" if (true) { "),t;if(E&&u.indexOf(i)>=0)return d&&(t+=" if (true) { "),t;throw new Error('unknown format "'+i+'" is used in schema at path "'+e.errSchemaPath+'"')}var P=typeof g=="object"&&!(g instanceof RegExp)&&g.validate,I=P&&g.type||"string";if(P){var C=g.async===!0;g=g.validate}if(I!=l)return d&&(t+=" if (true) { "),t;if(C){if(!e.async)throw new Error("async format in sync schema");var D="formats"+e.util.getProperty(i)+".validate";t+=" if (!(await "+D+"("+_+"))) { "}else{t+=" if (! ";var D="formats"+e.util.getProperty(i);P&&(D+=".validate"),typeof g=="function"?t+=" "+D+"("+_+") ":t+=" "+D+".test("+_+") ",t+=") { "}}var p=p||[];p.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { format:  ",m?t+=""+c:t+=""+e.util.toQuotedString(i),t+="  } ",e.opts.messages!==!1&&(t+=` , message: 'should match format "`,m?t+="' + "+c+" + '":t+=""+e.util.escapeQuotes(i),t+=`"' `),e.opts.verbose&&(t+=" , schema:  ",m?t+="validate.schema"+f:t+=""+e.util.toQuotedString(i),t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var N=t;return t=p.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+N+"]); ":t+=" validate.errors = ["+N+"]; return false; ":t+=" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",d&&(t+=" else { "),t},go=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,i=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="valid"+s,c="errs__"+s,u=e.util.copy(e);u.level++;var E="valid"+u.level,g=e.schema.then,P=e.schema.else,I=g!==void 0&&(e.opts.strictKeywords?typeof g=="object"&&Object.keys(g).length>0||g===!1:e.util.schemaHasRules(g,e.RULES.all)),C=P!==void 0&&(e.opts.strictKeywords?typeof P=="object"&&Object.keys(P).length>0||P===!1:e.util.schemaHasRules(P,e.RULES.all)),D=u.baseId;if(I||C){var p;u.createErrors=!1,u.schema=i,u.schemaPath=f,u.errSchemaPath=h,t+=" var "+c+" = errors; var "+m+" = true;  ";var N=e.compositeRule;e.compositeRule=u.compositeRule=!0,t+="  "+e.validate(u)+" ",u.baseId=D,u.createErrors=!0,t+="  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; }  ",e.compositeRule=u.compositeRule=N,I?(t+=" if ("+E+") {  ",u.schema=e.schema.then,u.schemaPath=e.schemaPath+".then",u.errSchemaPath=e.errSchemaPath+"/then",t+="  "+e.validate(u)+" ",u.baseId=D,t+=" "+m+" = "+E+"; ",I&&C?(p="ifClause"+s,t+=" var "+p+" = 'then'; "):p="'then'",t+=" } ",C&&(t+=" else { ")):t+=" if (!"+E+") { ",C&&(u.schema=e.schema.else,u.schemaPath=e.schemaPath+".else",u.errSchemaPath=e.errSchemaPath+"/else",t+="  "+e.validate(u)+" ",u.baseId=D,t+=" "+m+" = "+E+"; ",I&&C?(p="ifClause"+s,t+=" var "+p+" = 'else'; "):p="'else'",t+=" } "),t+=" if (!"+m+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { failingKeyword: "+p+" } ",e.opts.messages!==!1&&(t+=` , message: 'should match "' + `+p+` + '" schema' `),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+=" }   ",d&&(t+=" else { ")}else d&&(t+=" if (true) { ");return t},bo=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,i=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="valid"+s,c="errs__"+s,u=e.util.copy(e),E="";u.level++;var g="valid"+u.level,P="i"+s,I=u.dataLevel=e.dataLevel+1,C="data"+I,D=e.baseId;if(t+="var "+c+" = errors;var "+m+";",Array.isArray(i)){var p=e.schema.additionalItems;if(p===!1){t+=" "+m+" = "+_+".length <= "+i.length+"; ";var N=h;h=e.errSchemaPath+"/additionalItems",t+="  if (!"+m+") {   ";var S=S||[];S.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { limit: "+i.length+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have more than "+i.length+" items' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var F=t;t=S.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+F+"]); ":t+=" validate.errors = ["+F+"]; return false; ":t+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",h=N,d&&(E+="}",t+=" else { ")}var R=i;if(R){for(var T,b=-1,O=R.length-1;b<O;)if(T=R[b+=1],e.opts.strictKeywords?typeof T=="object"&&Object.keys(T).length>0||T===!1:e.util.schemaHasRules(T,e.RULES.all)){t+=" "+g+" = true; if ("+_+".length > "+b+") { ";var w=_+"["+b+"]";u.schema=T,u.schemaPath=f+"["+b+"]",u.errSchemaPath=h+"/"+b,u.errorPath=e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers,!0),u.dataPathArr[I]=b;var A=e.validate(u);u.baseId=D,e.util.varOccurences(A,C)<2?t+=" "+e.util.varReplace(A,C,w)+" ":t+=" var "+C+" = "+w+"; "+A+" ",t+=" }  ",d&&(t+=" if ("+g+") { ",E+="}")}}if(typeof p=="object"&&(e.opts.strictKeywords?typeof p=="object"&&Object.keys(p).length>0||p===!1:e.util.schemaHasRules(p,e.RULES.all))){u.schema=p,u.schemaPath=e.schemaPath+".additionalItems",u.errSchemaPath=e.errSchemaPath+"/additionalItems",t+=" "+g+" = true; if ("+_+".length > "+i.length+") {  for (var "+P+" = "+i.length+"; "+P+" < "+_+".length; "+P+"++) { ",u.errorPath=e.util.getPathExpr(e.errorPath,P,e.opts.jsonPointers,!0);var w=_+"["+P+"]";u.dataPathArr[I]=P;var A=e.validate(u);u.baseId=D,e.util.varOccurences(A,C)<2?t+=" "+e.util.varReplace(A,C,w)+" ":t+=" var "+C+" = "+w+"; "+A+" ",d&&(t+=" if (!"+g+") break; "),t+=" } }  ",d&&(t+=" if ("+g+") { ",E+="}")}}else if(e.opts.strictKeywords?typeof i=="object"&&Object.keys(i).length>0||i===!1:e.util.schemaHasRules(i,e.RULES.all)){u.schema=i,u.schemaPath=f,u.errSchemaPath=h,t+="  for (var "+P+" = 0; "+P+" < "+_+".length; "+P+"++) { ",u.errorPath=e.util.getPathExpr(e.errorPath,P,e.opts.jsonPointers,!0);var w=_+"["+P+"]";u.dataPathArr[I]=P;var A=e.validate(u);u.baseId=D,e.util.varOccurences(A,C)<2?t+=" "+e.util.varReplace(A,C,w)+" ":t+=" var "+C+" = "+w+"; "+A+" ",d&&(t+=" if (!"+g+") break; "),t+=" }"}return d&&(t+=" "+E+" if ("+c+" == errors) {"),t},Dl=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,i=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,D,_="data"+(n||""),m=e.opts.$data&&i&&i.$data,c;m?(t+=" var schema"+s+" = "+e.util.getData(i.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=i;var u=r=="maximum",E=u?"exclusiveMaximum":"exclusiveMinimum",g=e.schema[E],P=e.opts.$data&&g&&g.$data,I=u?"<":">",C=u?">":"<",D=void 0;if(!(m||typeof i=="number"||i===void 0))throw new Error(r+" must be number");if(!(P||g===void 0||typeof g=="number"||typeof g=="boolean"))throw new Error(E+" must be number or boolean");if(P){var p=e.util.getData(g.$data,n,e.dataPathArr),N="exclusive"+s,S="exclType"+s,F="exclIsNumber"+s,R="op"+s,T="' + "+R+" + '";t+=" var schemaExcl"+s+" = "+p+"; ",p="schemaExcl"+s,t+=" var "+N+"; var "+S+" = typeof "+p+"; if ("+S+" != 'boolean' && "+S+" != 'undefined' && "+S+" != 'number') { ";var D=E,b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(D||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: '"+E+" should be boolean' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var O=t;t=b.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+O+"]); ":t+=" validate.errors = ["+O+"]; return false; ":t+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else if ( ",m&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),t+=" "+S+" == 'number' ? ( ("+N+" = "+c+" === undefined || "+p+" "+I+"= "+c+") ? "+_+" "+C+"= "+p+" : "+_+" "+C+" "+c+" ) : ( ("+N+" = "+p+" === true) ? "+_+" "+C+"= "+c+" : "+_+" "+C+" "+c+" ) || "+_+" !== "+_+") { var op"+s+" = "+N+" ? '"+I+"' : '"+I+"='; ",i===void 0&&(D=E,h=e.errSchemaPath+"/"+E,c=p,m=P)}else{var F=typeof g=="number",T=I;if(F&&m){var R="'"+T+"'";t+=" if ( ",m&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),t+=" ( "+c+" === undefined || "+g+" "+I+"= "+c+" ? "+_+" "+C+"= "+g+" : "+_+" "+C+" "+c+" ) || "+_+" !== "+_+") { "}else{F&&i===void 0?(N=!0,D=E,h=e.errSchemaPath+"/"+E,c=g,C+="="):(F&&(c=Math[u?"min":"max"](g,i)),g===(F?c:!0)?(N=!0,D=E,h=e.errSchemaPath+"/"+E,C+="="):(N=!1,T+="="));var R="'"+T+"'";t+=" if ( ",m&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),t+=" "+_+" "+C+" "+c+" || "+_+" !== "+_+") { "}}D=D||r;var b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(D||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { comparison: "+R+", limit: "+c+", exclusive: "+N+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be "+T+" ",m?t+="' + "+c:t+=""+c+"'"),e.opts.verbose&&(t+=" , schema:  ",m?t+="validate.schema"+f:t+=""+i,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var O=t;return t=b.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+O+"]); ":t+=" validate.errors = ["+O+"]; return false; ":t+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",d&&(t+=" else { "),t},Cl=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,i=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,E,_="data"+(n||""),m=e.opts.$data&&i&&i.$data,c;if(m?(t+=" var schema"+s+" = "+e.util.getData(i.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=i,!(m||typeof i=="number"))throw new Error(r+" must be number");var u=r=="maxItems"?">":"<";t+="if ( ",m&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),t+=" "+_+".length "+u+" "+c+") { ";var E=r,g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(E||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { limit: "+c+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have ",r=="maxItems"?t+="more":t+="fewer",t+=" than ",m?t+="' + "+c+" + '":t+=""+i,t+=" items' "),e.opts.verbose&&(t+=" , schema:  ",m?t+="validate.schema"+f:t+=""+i,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var P=t;return t=g.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",d&&(t+=" else { "),t},Nl=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,i=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,E,_="data"+(n||""),m=e.opts.$data&&i&&i.$data,c;if(m?(t+=" var schema"+s+" = "+e.util.getData(i.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=i,!(m||typeof i=="number"))throw new Error(r+" must be number");var u=r=="maxLength"?">":"<";t+="if ( ",m&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),e.opts.unicode===!1?t+=" "+_+".length ":t+=" ucs2length("+_+") ",t+=" "+u+" "+c+") { ";var E=r,g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(E||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { limit: "+c+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be ",r=="maxLength"?t+="longer":t+="shorter",t+=" than ",m?t+="' + "+c+" + '":t+=""+i,t+=" characters' "),e.opts.verbose&&(t+=" , schema:  ",m?t+="validate.schema"+f:t+=""+i,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var P=t;return t=g.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",d&&(t+=" else { "),t},Rl=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,i=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,E,_="data"+(n||""),m=e.opts.$data&&i&&i.$data,c;if(m?(t+=" var schema"+s+" = "+e.util.getData(i.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=i,!(m||typeof i=="number"))throw new Error(r+" must be number");var u=r=="maxProperties"?">":"<";t+="if ( ",m&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),t+=" Object.keys("+_+").length "+u+" "+c+") { ";var E=r,g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(E||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { limit: "+c+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have ",r=="maxProperties"?t+="more":t+="fewer",t+=" than ",m?t+="' + "+c+" + '":t+=""+i,t+=" properties' "),e.opts.verbose&&(t+=" , schema:  ",m?t+="validate.schema"+f:t+=""+i,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var P=t;return t=g.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",d&&(t+=" else { "),t},Eo=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,i=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m=e.opts.$data&&i&&i.$data,c;if(m?(t+=" var schema"+s+" = "+e.util.getData(i.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=i,!(m||typeof i=="number"))throw new Error(r+" must be number");t+="var division"+s+";if (",m&&(t+=" "+c+" !== undefined && ( typeof "+c+" != 'number' || "),t+=" (division"+s+" = "+_+" / "+c+", ",e.opts.multipleOfPrecision?t+=" Math.abs(Math.round(division"+s+") - division"+s+") > 1e-"+e.opts.multipleOfPrecision+" ":t+=" division"+s+" !== parseInt(division"+s+") ",t+=" ) ",m&&(t+="  )  "),t+=" ) {   ";var u=u||[];u.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { multipleOf: "+c+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be multiple of ",m?t+="' + "+c:t+=""+c+"'"),e.opts.verbose&&(t+=" , schema:  ",m?t+="validate.schema"+f:t+=""+i,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var E=t;return t=u.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+E+"]); ":t+=" validate.errors = ["+E+"]; return false; ":t+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",d&&(t+=" else { "),t},Po=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,i=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="errs__"+s,c=e.util.copy(e);c.level++;var u="valid"+c.level;if(e.opts.strictKeywords?typeof i=="object"&&Object.keys(i).length>0||i===!1:e.util.schemaHasRules(i,e.RULES.all)){c.schema=i,c.schemaPath=f,c.errSchemaPath=h,t+=" var "+m+" = errors;  ";var E=e.compositeRule;e.compositeRule=c.compositeRule=!0,c.createErrors=!1;var g;c.opts.allErrors&&(g=c.opts.allErrors,c.opts.allErrors=!1),t+=" "+e.validate(c)+" ",c.createErrors=!0,g&&(c.opts.allErrors=g),e.compositeRule=c.compositeRule=E,t+=" if ("+u+") {   ";var P=P||[];P.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be valid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var I=t;t=P.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+I+"]); ":t+=" validate.errors = ["+I+"]; return false; ":t+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else {  errors = "+m+"; if (vErrors !== null) { if ("+m+") vErrors.length = "+m+"; else vErrors = null; } ",e.opts.allErrors&&(t+=" } ")}else t+="  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be valid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d&&(t+=" if (false) { ");return t},wo=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,i=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="valid"+s,c="errs__"+s,u=e.util.copy(e),E="";u.level++;var g="valid"+u.level,P=u.baseId,I="prevValid"+s,C="passingSchemas"+s;t+="var "+c+" = errors , "+I+" = false , "+m+" = false , "+C+" = null; ";var D=e.compositeRule;e.compositeRule=u.compositeRule=!0;var p=i;if(p)for(var N,S=-1,F=p.length-1;S<F;)N=p[S+=1],(e.opts.strictKeywords?typeof N=="object"&&Object.keys(N).length>0||N===!1:e.util.schemaHasRules(N,e.RULES.all))?(u.schema=N,u.schemaPath=f+"["+S+"]",u.errSchemaPath=h+"/"+S,t+="  "+e.validate(u)+" ",u.baseId=P):t+=" var "+g+" = true; ",S&&(t+=" if ("+g+" && "+I+") { "+m+" = false; "+C+" = ["+C+", "+S+"]; } else { ",E+="}"),t+=" if ("+g+") { "+m+" = "+I+" = true; "+C+" = "+S+"; }";return e.compositeRule=u.compositeRule=D,t+=""+E+"if (!"+m+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { passingSchemas: "+C+" } ",e.opts.messages!==!1&&(t+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+="} else {  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; }",e.opts.allErrors&&(t+=" } "),t},ko=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,i=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m=e.opts.$data&&i&&i.$data,c;m?(t+=" var schema"+s+" = "+e.util.getData(i.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=i;var u=m?"(new RegExp("+c+"))":e.usePattern(i);t+="if ( ",m&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'string') || "),t+=" !"+u+".test("+_+") ) {   ";var E=E||[];E.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { pattern:  ",m?t+=""+c:t+=""+e.util.toQuotedString(i),t+="  } ",e.opts.messages!==!1&&(t+=` , message: 'should match pattern "`,m?t+="' + "+c+" + '":t+=""+e.util.escapeQuotes(i),t+=`"' `),e.opts.verbose&&(t+=" , schema:  ",m?t+="validate.schema"+f:t+=""+e.util.toQuotedString(i),t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var g=t;return t=E.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+g+"]); ":t+=" validate.errors = ["+g+"]; return false; ":t+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",d&&(t+=" else { "),t},yo=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,i=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="errs__"+s,c=e.util.copy(e),u="";c.level++;var E="valid"+c.level,g="key"+s,P="idx"+s,I=c.dataLevel=e.dataLevel+1,C="data"+I,D="dataProperties"+s,p=Object.keys(i||{}).filter(Q),N=e.schema.patternProperties||{},S=Object.keys(N).filter(Q),F=e.schema.additionalProperties,R=p.length||S.length,T=F===!1,b=typeof F=="object"&&Object.keys(F).length,O=e.opts.removeAdditional,w=T||b||O,A=e.opts.ownProperties,Y=e.baseId,ne=e.schema.required;if(ne&&!(e.opts.$data&&ne.$data)&&ne.length<e.opts.loopRequired)var te=e.util.toHash(ne);function Q(Oe){return Oe!=="__proto__"}if(t+="var "+m+" = errors;var "+E+" = true;",A&&(t+=" var "+D+" = undefined;"),w){if(A?t+=" "+D+" = "+D+" || Object.keys("+_+"); for (var "+P+"=0; "+P+"<"+D+".length; "+P+"++) { var "+g+" = "+D+"["+P+"]; ":t+=" for (var "+g+" in "+_+") { ",R){if(t+=" var isAdditional"+s+" = !(false ",p.length)if(p.length>8)t+=" || validate.schema"+f+".hasOwnProperty("+g+") ";else{var H=p;if(H)for(var V,U=-1,Z=H.length-1;U<Z;)V=H[U+=1],t+=" || "+g+" == "+e.util.toQuotedString(V)+" "}if(S.length){var L=S;if(L)for(var K,ye=-1,Pe=L.length-1;ye<Pe;)K=L[ye+=1],t+=" || "+e.usePattern(K)+".test("+g+") "}t+=" ); if (isAdditional"+s+") { "}if(O=="all")t+=" delete "+_+"["+g+"]; ";else{var ae=e.errorPath,pe="' + "+g+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers)),T)if(O)t+=" delete "+_+"["+g+"]; ";else{t+=" "+E+" = false; ";var fe=h;h=e.errSchemaPath+"/additionalProperties";var me=me||[];me.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { additionalProperty: '"+pe+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is an invalid additional property":t+="should NOT have additional properties",t+="' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var De=t;t=me.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+De+"]); ":t+=" validate.errors = ["+De+"]; return false; ":t+=" var err = "+De+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h=fe,d&&(t+=" break; ")}else if(b)if(O=="failing"){t+=" var "+m+" = errors;  ";var Ue=e.compositeRule;e.compositeRule=c.compositeRule=!0,c.schema=F,c.schemaPath=e.schemaPath+".additionalProperties",c.errSchemaPath=e.errSchemaPath+"/additionalProperties",c.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var W=_+"["+g+"]";c.dataPathArr[I]=g;var j=e.validate(c);c.baseId=Y,e.util.varOccurences(j,C)<2?t+=" "+e.util.varReplace(j,C,W)+" ":t+=" var "+C+" = "+W+"; "+j+" ",t+=" if (!"+E+") { errors = "+m+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+_+"["+g+"]; }  ",e.compositeRule=c.compositeRule=Ue}else{c.schema=F,c.schemaPath=e.schemaPath+".additionalProperties",c.errSchemaPath=e.errSchemaPath+"/additionalProperties",c.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var W=_+"["+g+"]";c.dataPathArr[I]=g;var j=e.validate(c);c.baseId=Y,e.util.varOccurences(j,C)<2?t+=" "+e.util.varReplace(j,C,W)+" ":t+=" var "+C+" = "+W+"; "+j+" ",d&&(t+=" if (!"+E+") break; ")}e.errorPath=ae}R&&(t+=" } "),t+=" }  ",d&&(t+=" if ("+E+") { ",u+="}")}var re=e.opts.useDefaults&&!e.compositeRule;if(p.length){var je=p;if(je)for(var V,Ke=-1,at=je.length-1;Ke<at;){V=je[Ke+=1];var He=i[V];if(e.opts.strictKeywords?typeof He=="object"&&Object.keys(He).length>0||He===!1:e.util.schemaHasRules(He,e.RULES.all)){var gt=e.util.getProperty(V),W=_+gt,Je=re&&He.default!==void 0;c.schema=He,c.schemaPath=f+gt,c.errSchemaPath=h+"/"+e.util.escapeFragment(V),c.errorPath=e.util.getPath(e.errorPath,V,e.opts.jsonPointers),c.dataPathArr[I]=e.util.toQuotedString(V);var j=e.validate(c);if(c.baseId=Y,e.util.varOccurences(j,C)<2){j=e.util.varReplace(j,C,W);var Ge=W}else{var Ge=C;t+=" var "+C+" = "+W+"; "}if(Je)t+=" "+j+" ";else{if(te&&te[V]){t+=" if ( "+Ge+" === undefined ",A&&(t+=" || ! Object.prototype.hasOwnProperty.call("+_+", '"+e.util.escapeQuotes(V)+"') "),t+=") { "+E+" = false; ";var ae=e.errorPath,fe=h,ze=e.util.escapeQuotes(V);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(ae,V,e.opts.jsonPointers)),h=e.errSchemaPath+"/required";var me=me||[];me.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+ze+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+ze+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var De=t;t=me.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+De+"]); ":t+=" validate.errors = ["+De+"]; return false; ":t+=" var err = "+De+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h=fe,e.errorPath=ae,t+=" } else { "}else d?(t+=" if ( "+Ge+" === undefined ",A&&(t+=" || ! Object.prototype.hasOwnProperty.call("+_+", '"+e.util.escapeQuotes(V)+"') "),t+=") { "+E+" = true; } else { "):(t+=" if ("+Ge+" !== undefined ",A&&(t+=" &&   Object.prototype.hasOwnProperty.call("+_+", '"+e.util.escapeQuotes(V)+"') "),t+=" ) { ");t+=" "+j+" } "}}d&&(t+=" if ("+E+") { ",u+="}")}}if(S.length){var Ze=S;if(Ze)for(var K,We=-1,de=Ze.length-1;We<de;){K=Ze[We+=1];var He=N[K];if(e.opts.strictKeywords?typeof He=="object"&&Object.keys(He).length>0||He===!1:e.util.schemaHasRules(He,e.RULES.all)){c.schema=He,c.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(K),c.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(K),A?t+=" "+D+" = "+D+" || Object.keys("+_+"); for (var "+P+"=0; "+P+"<"+D+".length; "+P+"++) { var "+g+" = "+D+"["+P+"]; ":t+=" for (var "+g+" in "+_+") { ",t+=" if ("+e.usePattern(K)+".test("+g+")) { ",c.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var W=_+"["+g+"]";c.dataPathArr[I]=g;var j=e.validate(c);c.baseId=Y,e.util.varOccurences(j,C)<2?t+=" "+e.util.varReplace(j,C,W)+" ":t+=" var "+C+" = "+W+"; "+j+" ",d&&(t+=" if (!"+E+") break; "),t+=" } ",d&&(t+=" else "+E+" = true; "),t+=" }  ",d&&(t+=" if ("+E+") { ",u+="}")}}}return d&&(t+=" "+u+" if ("+m+" == errors) {"),t},So=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,i=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="errs__"+s,c=e.util.copy(e),u="";c.level++;var E="valid"+c.level;if(t+="var "+m+" = errors;",e.opts.strictKeywords?typeof i=="object"&&Object.keys(i).length>0||i===!1:e.util.schemaHasRules(i,e.RULES.all)){c.schema=i,c.schemaPath=f,c.errSchemaPath=h;var g="key"+s,P="idx"+s,I="i"+s,C="' + "+g+" + '",D=c.dataLevel=e.dataLevel+1,p="data"+D,N="dataProperties"+s,S=e.opts.ownProperties,F=e.baseId;S&&(t+=" var "+N+" = undefined; "),S?t+=" "+N+" = "+N+" || Object.keys("+_+"); for (var "+P+"=0; "+P+"<"+N+".length; "+P+"++) { var "+g+" = "+N+"["+P+"]; ":t+=" for (var "+g+" in "+_+") { ",t+=" var startErrs"+s+" = errors; ";var R=g,T=e.compositeRule;e.compositeRule=c.compositeRule=!0;var b=e.validate(c);c.baseId=F,e.util.varOccurences(b,p)<2?t+=" "+e.util.varReplace(b,p,R)+" ":t+=" var "+p+" = "+R+"; "+b+" ",e.compositeRule=c.compositeRule=T,t+=" if (!"+E+") { for (var "+I+"=startErrs"+s+"; "+I+"<errors; "+I+"++) { vErrors["+I+"].propertyName = "+g+"; }   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { propertyName: '"+C+"' } ",e.opts.messages!==!1&&(t+=" , message: 'property name \\'"+C+"\\' is invalid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),d&&(t+=" break; "),t+=" } }"}return d&&(t+=" "+u+" if ("+m+" == errors) {"),t},Do=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,i=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="valid"+s,c=e.opts.$data&&i&&i.$data;c&&(t+=" var schema"+s+" = "+e.util.getData(i.$data,n,e.dataPathArr)+"; ");var u="schema"+s;if(!c)if(i.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var E=[],g=i;if(g)for(var P,I=-1,C=g.length-1;I<C;){P=g[I+=1];var D=e.schema.properties[P];D&&(e.opts.strictKeywords?typeof D=="object"&&Object.keys(D).length>0||D===!1:e.util.schemaHasRules(D,e.RULES.all))||(E[E.length]=P)}}else var E=i;if(c||E.length){var p=e.errorPath,N=c||E.length>=e.opts.loopRequired,S=e.opts.ownProperties;if(d)if(t+=" var missing"+s+"; ",N){c||(t+=" var "+u+" = validate.schema"+f+"; ");var F="i"+s,R="schema"+s+"["+F+"]",T="' + "+R+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(p,R,e.opts.jsonPointers)),t+=" var "+m+" = true; ",c&&(t+=" if (schema"+s+" === undefined) "+m+" = true; else if (!Array.isArray(schema"+s+")) "+m+" = false; else {"),t+=" for (var "+F+" = 0; "+F+" < "+u+".length; "+F+"++) { "+m+" = "+_+"["+u+"["+F+"]] !== undefined ",S&&(t+=" &&   Object.prototype.hasOwnProperty.call("+_+", "+u+"["+F+"]) "),t+="; if (!"+m+") break; } ",c&&(t+="  }  "),t+="  if (!"+m+") {   ";var b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+T+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var O=t;t=b.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+O+"]); ":t+=" validate.errors = ["+O+"]; return false; ":t+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { "}else{t+=" if ( ";var w=E;if(w)for(var A,F=-1,Y=w.length-1;F<Y;){A=w[F+=1],F&&(t+=" || ");var ne=e.util.getProperty(A),te=_+ne;t+=" ( ( "+te+" === undefined ",S&&(t+=" || ! Object.prototype.hasOwnProperty.call("+_+", '"+e.util.escapeQuotes(A)+"') "),t+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?A:ne)+") ) "}t+=") {  ";var R="missing"+s,T="' + "+R+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(p,R,!0):p+" + "+R);var b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+T+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var O=t;t=b.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+O+"]); ":t+=" validate.errors = ["+O+"]; return false; ":t+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { "}else if(N){c||(t+=" var "+u+" = validate.schema"+f+"; ");var F="i"+s,R="schema"+s+"["+F+"]",T="' + "+R+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(p,R,e.opts.jsonPointers)),c&&(t+=" if ("+u+" && !Array.isArray("+u+")) {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+T+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+u+" !== undefined) { "),t+=" for (var "+F+" = 0; "+F+" < "+u+".length; "+F+"++) { if ("+_+"["+u+"["+F+"]] === undefined ",S&&(t+=" || ! Object.prototype.hasOwnProperty.call("+_+", "+u+"["+F+"]) "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+T+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",c&&(t+="  }  ")}else{var Q=E;if(Q)for(var A,H=-1,V=Q.length-1;H<V;){A=Q[H+=1];var ne=e.util.getProperty(A),T=e.util.escapeQuotes(A),te=_+ne;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(p,A,e.opts.jsonPointers)),t+=" if ( "+te+" === undefined ",S&&(t+=" || ! Object.prototype.hasOwnProperty.call("+_+", '"+e.util.escapeQuotes(A)+"') "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+T+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=p}else d&&(t+=" if (true) {");return t},Co=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,i=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="valid"+s,c=e.opts.$data&&i&&i.$data,u;if(c?(t+=" var schema"+s+" = "+e.util.getData(i.$data,n,e.dataPathArr)+"; ",u="schema"+s):u=i,(i||c)&&e.opts.uniqueItems!==!1){c&&(t+=" var "+m+"; if ("+u+" === false || "+u+" === undefined) "+m+" = true; else if (typeof "+u+" != 'boolean') "+m+" = false; else { "),t+=" var i = "+_+".length , "+m+" = true , j; if (i > 1) { ";var E=e.schema.items&&e.schema.items.type,g=Array.isArray(E);if(!E||E=="object"||E=="array"||g&&(E.indexOf("object")>=0||E.indexOf("array")>=0))t+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+_+"[i], "+_+"[j])) { "+m+" = false; break outer; } } } ";else{t+=" var itemIndices = {}, item; for (;i--;) { var item = "+_+"[i]; ";var P="checkDataType"+(g?"s":"");t+=" if ("+e.util[P](E,"item",e.opts.strictNumbers,!0)+") continue; ",g&&(t+=` if (typeof item == 'string') item = '"' + item; `),t+=" if (typeof itemIndices[item] == 'number') { "+m+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}t+=" } ",c&&(t+="  }  "),t+=" if (!"+m+") {   ";var I=I||[];I.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(t+=" , schema:  ",c?t+="validate.schema"+f:t+=""+i,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var C=t;t=I.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+C+"]); ":t+=" validate.errors = ["+C+"]; return false; ":t+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",d&&(t+=" else { ")}else d&&(t+=" if (true) { ");return t},No={$ref:oo,allOf:fo,anyOf:uo,$comment:co,const:ho,contains:_o,dependencies:vo,enum:mo,format:po,if:go,items:bo,maximum:Dl,minimum:Dl,maxItems:Cl,minItems:Cl,maxLength:Nl,minLength:Nl,maxProperties:Rl,minProperties:Rl,multipleOf:Eo,not:Po,oneOf:wo,pattern:ko,properties:yo,propertyNames:So,required:Do,uniqueItems:Co,validate:Us},Il=No,Ar=Wt.toHash,Ro=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],r=["type","$comment"],l=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],t=["number","integer","string","array","object","boolean","null"];return e.all=Ar(r),e.types=Ar(t),e.forEach(function(s){s.rules=s.rules.map(function(n){var i;if(typeof n=="object"){var f=Object.keys(n)[0];i=n[f],n=f,i.forEach(function(d){r.push(d),e.all[d]=!0})}r.push(n);var h=e.all[n]={keyword:n,code:Il[n],implements:i};return h}),e.all.$comment={keyword:"$comment",code:Il.$comment},s.type&&(e.types[s.type]=s)}),e.keywords=Ar(r.concat(l)),e.custom={},e},Ol=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],Io=function(a,e){for(var r=0;r<e.length;r++){a=JSON.parse(JSON.stringify(a));var l=e[r].split("/"),t=a,s;for(s=1;s<l.length;s++)t=t[l[s]];for(s=0;s<Ol.length;s++){var n=Ol[s],i=t[n];i&&(t[n]={anyOf:[i,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return a},Oo=Wr.MissingRef,To=xs;function xs(a,e,r){var l=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(r=e,e=void 0);var t=s(a).then(function(){var i=l._addSchema(a,void 0,e);return i.validate||n(i)});return r&&t.then(function(i){r(null,i)},r),t;function s(i){var f=i.$schema;return f&&!l.getSchema(f)?xs.call(l,{$ref:f},!0):Promise.resolve()}function n(i){try{return l._compile(i)}catch(h){if(h instanceof Oo)return f(h);throw h}function f(h){var d=h.missingSchema;if(c(d))throw new Error("Schema "+d+" is loaded but "+h.missingRef+" cannot be resolved");var _=l._loadingSchemas[d];return _||(_=l._loadingSchemas[d]=l._opts.loadSchema(d),_.then(m,m)),_.then(function(u){if(!c(d))return s(u).then(function(){c(d)||l.addSchema(u,d,void 0,e)})}).then(function(){return n(i)});function m(){delete l._loadingSchemas[d]}function c(u){return l._refs[u]||l._schemas[u]}}}}var Ao=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,i=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_,m="data"+(n||""),c="valid"+s,u="errs__"+s,E=e.opts.$data&&i&&i.$data,g;E?(t+=" var schema"+s+" = "+e.util.getData(i.$data,n,e.dataPathArr)+"; ",g="schema"+s):g=i;var P=this,I="definition"+s,C=P.definition,D="",p,N,S,F,R;if(E&&C.$data){R="keywordValidate"+s;var T=C.validateSchema;t+=" var "+I+" = RULES.custom['"+r+"'].definition; var "+R+" = "+I+".validate;"}else{if(F=e.useCustomRule(P,i,e.schema,e),!F)return;g="validate.schema"+f,R=F.code,p=C.compile,N=C.inline,S=C.macro}var b=R+".errors",O="i"+s,w="ruleErr"+s,A=C.async;if(A&&!e.async)throw new Error("async keyword in sync schema");if(N||S||(t+=""+b+" = null;"),t+="var "+u+" = errors;var "+c+";",E&&C.$data&&(D+="}",t+=" if ("+g+" === undefined) { "+c+" = true; } else { ",T&&(D+="}",t+=" "+c+" = "+I+".validateSchema("+g+"); if ("+c+") { ")),N)C.statements?t+=" "+F.validate+" ":t+=" "+c+" = "+F.validate+"; ";else if(S){var Y=e.util.copy(e),D="";Y.level++;var ne="valid"+Y.level;Y.schema=F.validate,Y.schemaPath="";var te=e.compositeRule;e.compositeRule=Y.compositeRule=!0;var Q=e.validate(Y).replace(/validate\.schema/g,R);e.compositeRule=Y.compositeRule=te,t+=" "+Q}else{var H=H||[];H.push(t),t="",t+="  "+R+".call( ",e.opts.passContext?t+="this":t+="self",p||C.schema===!1?t+=" , "+m+" ":t+=" , "+g+" , "+m+" , validate.schema"+e.schemaPath+" ",t+=" , (dataPath || '')",e.errorPath!='""'&&(t+=" + "+e.errorPath);var V=n?"data"+(n-1||""):"parentData",U=n?e.dataPathArr[n]:"parentDataProperty";t+=" , "+V+" , "+U+" , rootData )  ";var Z=t;t=H.pop(),C.errors===!1?(t+=" "+c+" = ",A&&(t+="await "),t+=""+Z+"; "):A?(b="customErrors"+s,t+=" var "+b+" = null; try { "+c+" = await "+Z+"; } catch (e) { "+c+" = false; if (e instanceof ValidationError) "+b+" = e.errors; else throw e; } "):t+=" "+b+" = null; "+c+" = "+Z+"; "}if(C.modifying&&(t+=" if ("+V+") "+m+" = "+V+"["+U+"];"),t+=""+D,C.valid)d&&(t+=" if (true) { ");else{t+=" if ( ",C.valid===void 0?(t+=" !",S?t+=""+ne:t+=""+c):t+=" "+!C.valid+" ",t+=") { ",_=P.keyword;var H=H||[];H.push(t),t="";var H=H||[];H.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(_||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { keyword: '"+P.keyword+"' } ",e.opts.messages!==!1&&(t+=` , message: 'should pass "`+P.keyword+`" keyword validation' `),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var L=t;t=H.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+L+"]); ":t+=" validate.errors = ["+L+"]; return false; ":t+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var K=t;t=H.pop(),N?C.errors?C.errors!="full"&&(t+="  for (var "+O+"="+u+"; "+O+"<errors; "+O+"++) { var "+w+" = vErrors["+O+"]; if ("+w+".dataPath === undefined) "+w+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+w+".schemaPath === undefined) { "+w+'.schemaPath = "'+h+'"; } ',e.opts.verbose&&(t+=" "+w+".schema = "+g+"; "+w+".data = "+m+"; "),t+=" } "):C.errors===!1?t+=" "+K+" ":(t+=" if ("+u+" == errors) { "+K+" } else {  for (var "+O+"="+u+"; "+O+"<errors; "+O+"++) { var "+w+" = vErrors["+O+"]; if ("+w+".dataPath === undefined) "+w+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+w+".schemaPath === undefined) { "+w+'.schemaPath = "'+h+'"; } ',e.opts.verbose&&(t+=" "+w+".schema = "+g+"; "+w+".data = "+m+"; "),t+=" } } "):S?(t+="   var err =   ",e.createErrors!==!1?(t+=" { keyword: '"+(_||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { keyword: '"+P.keyword+"' } ",e.opts.messages!==!1&&(t+=` , message: 'should pass "`+P.keyword+`" keyword validation' `),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; ")):C.errors===!1?t+=" "+K+" ":(t+=" if (Array.isArray("+b+")) { if (vErrors === null) vErrors = "+b+"; else vErrors = vErrors.concat("+b+"); errors = vErrors.length;  for (var "+O+"="+u+"; "+O+"<errors; "+O+"++) { var "+w+" = vErrors["+O+"]; if ("+w+".dataPath === undefined) "+w+".dataPath = (dataPath || '') + "+e.errorPath+";  "+w+'.schemaPath = "'+h+'";  ',e.opts.verbose&&(t+=" "+w+".schema = "+g+"; "+w+".data = "+m+"; "),t+=" } } else { "+K+" } "),t+=" } ",d&&(t+=" else { ")}return t};const Fo="http://json-schema.org/draft-07/schema#",Lo="http://json-schema.org/draft-07/schema#",jo="Core schema meta-schema",qo={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},zo=["object","boolean"],Uo={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},en={$schema:Fo,$id:Lo,title:jo,definitions:qo,type:zo,properties:Uo,default:!0};var Tl=en,Vo={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:Tl.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:Tl.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},Mo=/^[a-z_$][a-z0-9_$-]*$/i,Bo=Ao,$o=Vo,Ho={add:Qo,get:Go,remove:Ko,validate:$r};function Qo(a,e){var r=this.RULES;if(r.keywords[a])throw new Error("Keyword "+a+" is already defined");if(!Mo.test(a))throw new Error("Keyword "+a+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var l=e.type;if(Array.isArray(l))for(var t=0;t<l.length;t++)n(a,l[t],e);else n(a,l,e);var s=e.metaSchema;s&&(e.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(s,!0))}r.keywords[a]=r.all[a]=!0;function n(i,f,h){for(var d,_=0;_<r.length;_++){var m=r[_];if(m.type==f){d=m;break}}d||(d={type:f,rules:[]},r.push(d));var c={keyword:i,definition:h,custom:!0,code:Bo,implements:h.implements};d.rules.push(c),r.custom[i]=c}return this}function Go(a){var e=this.RULES.custom[a];return e?e.definition:this.RULES.keywords[a]||!1}function Ko(a){var e=this.RULES;delete e.keywords[a],delete e.all[a],delete e.custom[a];for(var r=0;r<e.length;r++)for(var l=e[r].rules,t=0;t<l.length;t++)if(l[t].keyword==a){l.splice(t,1);break}return this}function $r(a,e){$r.errors=null;var r=this._validateKeyword=this._validateKeyword||this.compile($o,!0);if(r(a))return!0;if($r.errors=r.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(r.errors));return!1}const Jo="http://json-schema.org/draft-07/schema#",Yo="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Xo="Meta-schema for $data reference (JSON Schema extension proposal)",Zo="object",Wo=["$data"],xo={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},ef=!1,tf={$schema:Jo,$id:Yo,description:Xo,type:Zo,required:Wo,properties:xo,additionalProperties:ef};var tn=Mi,Jt=Zr,rf=Ji,rn=Fs,lf=zs,af=to,sf=Ro,ln=Io,an=Wt,nf=vt;vt.prototype.validate=ff;vt.prototype.compile=uf;vt.prototype.addSchema=cf;vt.prototype.addMetaSchema=df;vt.prototype.validateSchema=hf;vt.prototype.getSchema=vf;vt.prototype.removeSchema=pf;vt.prototype.addFormat=Sf;vt.prototype.errorsText=yf;vt.prototype._addSchema=gf;vt.prototype._compile=bf;vt.prototype.compileAsync=To;var Nr=Ho;vt.prototype.addKeyword=Nr.add;vt.prototype.getKeyword=Nr.get;vt.prototype.removeKeyword=Nr.remove;vt.prototype.validateKeyword=Nr.validate;var sn=Wr;vt.ValidationError=sn.Validation;vt.MissingRefError=sn.MissingRef;vt.$dataMetaSchema=ln;var wr="http://json-schema.org/draft-07/schema",Al=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],of=["/properties"];function vt(a){if(!(this instanceof vt))return new vt(a);a=this._opts=an.copy(a)||{},Of(this),this._schemas={},this._refs={},this._fragments={},this._formats=af(a.format),this._cache=a.cache||new rf,this._loadingSchemas={},this._compilations=[],this.RULES=sf(),this._getId=Ef(a),a.loopRequired=a.loopRequired||1/0,a.errorDataPath=="property"&&(a._errorDataPathProperty=!0),a.serialize===void 0&&(a.serialize=lf),this._metaOpts=If(this),a.formats&&Nf(this),a.keywords&&Rf(this),Df(this),typeof a.meta=="object"&&this.addMetaSchema(a.meta),a.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),Cf(this)}function ff(a,e){var r;if(typeof a=="string"){if(r=this.getSchema(a),!r)throw new Error('no schema with key or ref "'+a+'"')}else{var l=this._addSchema(a);r=l.validate||this._compile(l)}var t=r(e);return r.$async!==!0&&(this.errors=r.errors),t}function uf(a,e){var r=this._addSchema(a,void 0,e);return r.validate||this._compile(r)}function cf(a,e,r,l){if(Array.isArray(a)){for(var t=0;t<a.length;t++)this.addSchema(a[t],void 0,r,l);return this}var s=this._getId(a);if(s!==void 0&&typeof s!="string")throw new Error("schema id must be string");return e=Jt.normalizeId(e||s),on(this,e),this._schemas[e]=this._addSchema(a,r,l,!0),this}function df(a,e,r){return this.addSchema(a,e,r,!0),this}function hf(a,e){var r=a.$schema;if(r!==void 0&&typeof r!="string")throw new Error("$schema must be a string");if(r=r||this._opts.defaultMeta||_f(this),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var l=this.validate(r,a);if(!l&&e){var t="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(t);else throw new Error(t)}return l}function _f(a){var e=a._opts.meta;return a._opts.defaultMeta=typeof e=="object"?a._getId(e)||e:a.getSchema(wr)?wr:void 0,a._opts.defaultMeta}function vf(a){var e=nn(this,a);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return mf(this,a)}}function mf(a,e){var r=Jt.schema.call(a,{schema:{}},e);if(r){var l=r.schema,t=r.root,s=r.baseId,n=tn.call(a,l,t,void 0,s);return a._fragments[e]=new rn({ref:e,fragment:!0,schema:l,root:t,baseId:s,validate:n}),n}}function nn(a,e){return e=Jt.normalizeId(e),a._schemas[e]||a._refs[e]||a._fragments[e]}function pf(a){if(a instanceof RegExp)return dr(this,this._schemas,a),dr(this,this._refs,a),this;switch(typeof a){case"undefined":return dr(this,this._schemas),dr(this,this._refs),this._cache.clear(),this;case"string":var e=nn(this,a);return e&&this._cache.del(e.cacheKey),delete this._schemas[a],delete this._refs[a],this;case"object":var r=this._opts.serialize,l=r?r(a):a;this._cache.del(l);var t=this._getId(a);t&&(t=Jt.normalizeId(t),delete this._schemas[t],delete this._refs[t])}return this}function dr(a,e,r){for(var l in e){var t=e[l];!t.meta&&(!r||r.test(l))&&(a._cache.del(t.cacheKey),delete e[l])}}function gf(a,e,r,l){if(typeof a!="object"&&typeof a!="boolean")throw new Error("schema should be object or boolean");var t=this._opts.serialize,s=t?t(a):a,n=this._cache.get(s);if(n)return n;l=l||this._opts.addUsedSchema!==!1;var i=Jt.normalizeId(this._getId(a));i&&l&&on(this,i);var f=this._opts.validateSchema!==!1&&!e,h;f&&!(h=i&&i==Jt.normalizeId(a.$schema))&&this.validateSchema(a,!0);var d=Jt.ids.call(this,a),_=new rn({id:i,schema:a,localRefs:d,cacheKey:s,meta:r});return i[0]!="#"&&l&&(this._refs[i]=_),this._cache.put(s,_),f&&h&&this.validateSchema(a,!0),_}function bf(a,e){if(a.compiling)return a.validate=t,t.schema=a.schema,t.errors=null,t.root=e||t,a.schema.$async===!0&&(t.$async=!0),t;a.compiling=!0;var r;a.meta&&(r=this._opts,this._opts=this._metaOpts);var l;try{l=tn.call(this,a.schema,e,a.localRefs)}catch(s){throw delete a.validate,s}finally{a.compiling=!1,a.meta&&(this._opts=r)}return a.validate=l,a.refs=l.refs,a.refVal=l.refVal,a.root=l.root,l;function t(){var s=a.validate,n=s.apply(this,arguments);return t.errors=s.errors,n}}function Ef(a){switch(a.schemaId){case"auto":return kf;case"id":return Pf;default:return wf}}function Pf(a){return a.$id&&this.logger.warn("schema $id ignored",a.$id),a.id}function wf(a){return a.id&&this.logger.warn("schema id ignored",a.id),a.$id}function kf(a){if(a.$id&&a.id&&a.$id!=a.id)throw new Error("schema $id is different from id");return a.$id||a.id}function yf(a,e){if(a=a||this.errors,!a)return"No errors";e=e||{};for(var r=e.separator===void 0?", ":e.separator,l=e.dataVar===void 0?"data":e.dataVar,t="",s=0;s<a.length;s++){var n=a[s];n&&(t+=l+n.dataPath+" "+n.message+r)}return t.slice(0,-r.length)}function Sf(a,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[a]=e,this}function Df(a){var e;if(a._opts.$data&&(e=tf,a.addMetaSchema(e,e.$id,!0)),a._opts.meta!==!1){var r=en;a._opts.$data&&(r=ln(r,of)),a.addMetaSchema(r,wr,!0),a._refs["http://json-schema.org/schema"]=wr}}function Cf(a){var e=a._opts.schemas;if(e)if(Array.isArray(e))a.addSchema(e);else for(var r in e)a.addSchema(e[r],r)}function Nf(a){for(var e in a._opts.formats){var r=a._opts.formats[e];a.addFormat(e,r)}}function Rf(a){for(var e in a._opts.keywords){var r=a._opts.keywords[e];a.addKeyword(e,r)}}function on(a,e){if(a._schemas[e]||a._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function If(a){for(var e=an.copy(a._opts),r=0;r<Al.length;r++)delete e[Al[r]];return e}function Of(a){var e=a._opts.logger;if(e===!1)a.logger={log:Fr,warn:Fr,error:Fr};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");a.logger=e}}function Fr(){}const Tf=Fn(nf);function Ut(a,e,r,l,t,s,n,i,f,h,d,_,m){const c={id:`${Math.random()}`,type:l,position:{x:i,y:f},data:{label:t,sequence:n,d3f_class:s,user_properties:[]},measured:{width:h,height:d},origin:[.5,0],selected:!1,dragging:!1};let u,E;m?(u=c.id,E=r.id):(u=r.id,E=c.id);const g={type:"editableEdge",data:{label:_},source:E,sourceHandle:"source",target:u,targetHandle:"target",id:`xy-edge__${E}source-${u}target`,selected:!1};e.update(P=>[...P,g]),a.update(P=>[...P,c])}function Fl(a,e,r){const l=a.slice();return l[18]=e[r],l}const Af=a=>({}),Ll=a=>({});function Ff(a){let e;return{c(){e=k("No related offensive techniques in this release.")},l(r){e=y(r,"No related offensive techniques in this release.")},m(r,l){v(r,e,l)},p:ke,i:ke,o:ke,d(r){r&&o(e)}}}function Lf(a){let e,r;return e=new zt({props:{$$slots:{default:[Uf]},$$scope:{ctx:a}}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t&16394&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(ue(e.$$.fragment,l),r=!0)},o(l){_e(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function jf(a){let e,r="Loading...";return{c(){e=B("div"),e.textContent=r},l(l){e=$(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:ke,i:ke,o:ke,d(l){l&&o(e)}}}function jl(a){let e=a[18].off_tech_id.value.replace(/ |\./g,"")+"",r,l,t=a[18].off_tech_label.value+"",s,n,i="-->",f,h,d=a[18].off_artifact_rel_label.value.replace(/ /g,"")+"",_,m,c=ce(a[18].off_artifact.value)+"",u,E,g=a[18].off_artifact_label.value+"",P,I,C,D,p=ce(a[18].off_artifact.value)+"",N,S,F=a[18].off_tech_id.value.replace(/ |\./g,"")+"",R,T,b=a[18].off_tech_id.value.replace(/ |\./g,"")+"",O,w,A=ce(a[18].off_artifact.value)+"",Y,ne,te=ce(a[18].off_artifact.value)+"",Q,H;function V(L,K){return K&10&&(C=null),C==null&&(C=!!L[3].includes(L[18].off_tech_id.value.replace(/ |\./g,""))),C?zf:qf}let U=V(a,-1),Z=U(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(i),h=k(" |"),_=k(d),m=k("| "),u=k(c),E=k('["'),P=k(g),I=k(`"];
            `),Z.c(),D=k(`
            class `),N=k(p),S=k(" ArtifactNode; click "),R=k(F),T=k(` href "javascript:da_to_off_callback('`),O=k(b),w=k(`')"; click `),Y=k(A),ne=k(' href "/dao/artifact/d3f:'),Q=k(te),H=k('";')},l(L){r=y(L,e),l=y(L,'["'),s=y(L,t),n=y(L,'"] '),f=y(L,i),h=y(L," |"),_=y(L,d),m=y(L,"| "),u=y(L,c),E=y(L,'["'),P=y(L,g),I=y(L,`"];
            `),Z.l(L),D=y(L,`
            class `),N=y(L,p),S=y(L," ArtifactNode; click "),R=y(L,F),T=y(L,` href "javascript:da_to_off_callback('`),O=y(L,b),w=y(L,`')"; click `),Y=y(L,A),ne=y(L,' href "/dao/artifact/d3f:'),Q=y(L,te),H=y(L,'";')},m(L,K){v(L,r,K),v(L,l,K),v(L,s,K),v(L,n,K),v(L,f,K),v(L,h,K),v(L,_,K),v(L,m,K),v(L,u,K),v(L,E,K),v(L,P,K),v(L,I,K),Z.m(L,K),v(L,D,K),v(L,N,K),v(L,S,K),v(L,R,K),v(L,T,K),v(L,O,K),v(L,w,K),v(L,Y,K),v(L,ne,K),v(L,Q,K),v(L,H,K)},p(L,K){K&2&&e!==(e=L[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(r,e),K&2&&t!==(t=L[18].off_tech_label.value+"")&&J(s,t),K&2&&d!==(d=L[18].off_artifact_rel_label.value.replace(/ /g,"")+"")&&J(_,d),K&2&&c!==(c=ce(L[18].off_artifact.value)+"")&&J(u,c),K&2&&g!==(g=L[18].off_artifact_label.value+"")&&J(P,g),U===(U=V(L,K))&&Z?Z.p(L,K):(Z.d(1),Z=U(L),Z&&(Z.c(),Z.m(D.parentNode,D))),K&2&&p!==(p=ce(L[18].off_artifact.value)+"")&&J(N,p),K&2&&F!==(F=L[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(R,F),K&2&&b!==(b=L[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(O,b),K&2&&A!==(A=ce(L[18].off_artifact.value)+"")&&J(Y,A),K&2&&te!==(te=ce(L[18].off_artifact.value)+"")&&J(Q,te)},d(L){L&&(o(r),o(l),o(s),o(n),o(f),o(h),o(_),o(m),o(u),o(E),o(P),o(I),o(D),o(N),o(S),o(R),o(T),o(O),o(w),o(Y),o(ne),o(Q),o(H)),Z.d(L)}}}function qf(a){let e,r=a[18].off_tech_id.value.replace(/ |\./g,"")+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" OffensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," OffensiveTechniqueNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(l,r)},d(s){s&&(o(e),o(l),o(t))}}}function zf(a){let e,r=a[18].off_tech_id.value.replace(/ |\./g,"")+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" SelectedOffensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," SelectedOffensiveTechniqueNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(l,r)},d(s){s&&(o(e),o(l),o(t))}}}function ql(a){let e=a[6].edge_is_unique(a[18].off_tech_label.value,a[18].off_artifact_rel_label.value,a[18].off_artifact_label.value),r,l=e&&jl(a);return{c(){l&&l.c(),r=Ee()},l(t){l&&l.l(t),r=Ee()},m(t,s){l&&l.m(t,s),v(t,r,s)},p(t,s){s&2&&(e=t[6].edge_is_unique(t[18].off_tech_label.value,t[18].off_artifact_rel_label.value,t[18].off_artifact_label.value)),e?l?l.p(t,s):(l=jl(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&o(r),l&&l.d(t)}}}function Uf(a){let e,r,l=Ie(a[1].da_to_off.results.bindings),t=[];for(let s=0;s<l.length;s+=1)t[s]=ql(Fl(a,l,s));return{c(){e=k(`graph LR;
        `);for(let s=0;s<t.length;s+=1)t[s].c();r=Ee()},l(s){e=y(s,`graph LR;
        `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=Ee()},m(s,n){v(s,e,n);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(s,n);v(s,r,n)},p(s,n){if(n&74){l=Ie(s[1].da_to_off.results.bindings);let i;for(i=0;i<l.length;i+=1){const f=Fl(s,l,i);t[i]?t[i].p(f,n):(t[i]=ql(f),t[i].c(),t[i].m(r.parentNode,r))}for(;i<t.length;i+=1)t[i].d(1);t.length=l.length}},d(s){s&&(o(e),o(r)),Xe(t,s)}}}function Vf(a){let e,r,l,t,s,n,i,f,h,d,_,m,c,u=a[3].length+"",E,g,P,I,C;const D=a[9].header,p=ct(D,a,a[14],Ll),N=a[9].default,S=ct(N,a,a[14],null),F=[jf,Lf,Ff],R=[];function T(b,O){return b[1]?b[1].da_to_off.results.bindings.length>0?1:2:0}return i=T(a),f=R[i]=F[i](a),{c(){e=B("dialog"),r=B("div"),p&&p.c(),l=k(`
    Select Attack Techniques
    `),S&&S.c(),t=x(),s=B("hr"),n=x(),f.c(),h=x(),d=B("hr"),_=x(),m=B("button"),c=k("Insert ("),E=k(u),g=k(")"),this.h()},l(b){e=$(b,"DIALOG",{class:!0});var O=ve(e);r=$(O,"DIV",{class:!0});var w=ve(r);p&&p.l(w),l=y(w,`
    Select Attack Techniques
    `),S&&S.l(w),t=ee(w),s=$(w,"HR",{}),n=ee(w),f.l(w),h=ee(w),d=$(w,"HR",{}),_=ee(w),m=$(w,"BUTTON",{class:!0});var A=ve(m);c=y(A,"Insert ("),E=y(A,u),g=y(A,")"),A.forEach(o),w.forEach(o),O.forEach(o),this.h()},h(){m.autofocus=!0,X(m,"class","svelte-1ai9hff"),X(r,"class","svelte-1ai9hff"),X(e,"class","svelte-1ai9hff")},m(b,O){v(b,e,O),q(e,r),p&&p.m(r,null),q(r,l),S&&S.m(r,null),q(r,t),q(r,s),q(r,n),R[i].m(r,null),q(r,h),q(r,d),q(r,_),q(r,m),q(m,c),q(m,E),q(m,g),a[11](e),P=!0,m.focus(),I||(C=[ge(m,"click",a[7]),ge(r,"click",Ct(a[10])),ge(e,"close",a[12]),ge(e,"click",qt(a[13]))],I=!0)},p(b,[O]){p&&p.p&&(!P||O&16384)&&dt(p,D,b,b[14],P?_t(D,b[14],O,Af):ht(b[14]),Ll),S&&S.p&&(!P||O&16384)&&dt(S,N,b,b[14],P?_t(N,b[14],O,null):ht(b[14]),null);let w=i;i=T(b),i===w?R[i].p(b,O):(Pt(),_e(R[w],1,1,()=>{R[w]=null}),wt(),f=R[i],f?f.p(b,O):(f=R[i]=F[i](b),f.c()),ue(f,1),f.m(r,h)),(!P||O&8)&&u!==(u=b[3].length+"")&&J(E,u)},i(b){P||(ue(p,b),ue(S,b),ue(f),P=!0)},o(b){_e(p,b),_e(S,b),_e(f),P=!1},d(b){b&&o(e),p&&p.d(b),S&&S.d(b),R[i].d(),a[11](null),I=!1,Et(C)}}}function Mf(a,e,r){let l,t,s,{$$slots:n={},$$scope:i}=e,{show_attack_modal:f}=e,{parent_node:h}=e,{data:d}=e,_;const m=At();tt(a,m,p=>r(16,s=p));const c=Ft();tt(a,c,p=>r(15,t=p));let u=new Ht;function E(p){l.includes(p)?r(3,l=l.filter(N=>N!==p)):l.push(p),r(3,l)}window.da_to_off_callback=function(p){E(p)};function g(){let p=0,N=200,S=100;for(const F of l){let R=d.da_to_off.results.bindings.find(T=>T.off_tech_id.value.replace(/ |\./g,"")==F);R&&(Ut(m,c,h,"attackSelectorNode",R.off_tech_label.value,"d3f:"+R.off_tech_id.value,h.data.sequence,h.position.x+p*N,h.position.y+S,182,63,R.off_artifact_rel_label.value,!1),p+=1)}m.set(s),c.set(t),_&&_.close(),r(3,l=[])}function P(p){Nt.call(this,a,p)}function I(p){Ye[p?"unshift":"push"](()=>{_=p,r(2,_)})}const C=()=>r(0,f=!1),D=()=>{_.close(),r(3,l=[])};return a.$$set=p=>{"show_attack_modal"in p&&r(0,f=p.show_attack_modal),"parent_node"in p&&r(8,h=p.parent_node),"data"in p&&r(1,d=p.data),"$$scope"in p&&r(14,i=p.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&f&&_&&(_.showModal(),u.reset()),a.$$.dirty&5&&!f&&_&&(_.close(),u.reset())},r(3,l=[]),[f,d,_,l,m,c,u,g,h,n,P,I,C,D,i]}class Bf extends ft{constructor(e){super(),ut(this,e,Mf,Vf,ot,{show_attack_modal:0,parent_node:8,data:1})}}function zl(a,e,r){const l=a.slice();return l[23]=e[r],l}const $f=a=>({}),Ul=a=>({});function Hf(a){let e;return{c(){e=k("No related defensive techniques in this release.")},l(r){e=y(r,"No related defensive techniques in this release.")},m(r,l){v(r,e,l)},p:ke,i:ke,o:ke,d(r){r&&o(e)}}}function Qf(a){let e,r,l,t,s,n=a[4],i,f;function h(m){a[14](m)}let d={toggles:a[5]};a[4]!==void 0&&(d.selected=a[4]),l=new Ts({props:d}),Ye.push(()=>yt(l,"selected",h));let _=$l(a);return{c(){e=B("br"),r=x(),Te(l.$$.fragment),s=x(),_.c(),i=Ee()},l(m){e=$(m,"BR",{}),r=ee(m),Ae(l.$$.fragment,m),s=ee(m),_.l(m),i=Ee()},m(m,c){v(m,e,c),v(m,r,c),Fe(l,m,c),v(m,s,c),_.m(m,c),v(m,i,c),f=!0},p(m,c){const u={};c&32&&(u.toggles=m[5]),!t&&c&16&&(t=!0,u.selected=m[4],kt(()=>t=!1)),l.$set(u),c&16&&ot(n,n=m[4])?(Pt(),_e(_,1,1,ke),wt(),_=$l(m),_.c(),ue(_,1),_.m(i.parentNode,i)):_.p(m,c)},i(m){f||(ue(l.$$.fragment,m),ue(_),f=!0)},o(m){_e(l.$$.fragment,m),_e(_),f=!1},d(m){m&&(o(e),o(r),o(s),o(i)),Le(l,m),_.d(m)}}}function Gf(a){let e,r="Loading...";return{c(){e=B("div"),e.textContent=r},l(l){e=$(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:ke,i:ke,o:ke,d(l){l&&o(e)}}}function Vl(a){let e=!a[4].includes(a[23].def_tactic_label.value),r,l=e&&Ml(a);return{c(){l&&l.c(),r=Ee()},l(t){l&&l.l(t),r=Ee()},m(t,s){l&&l.m(t,s),v(t,r,s)},p(t,s){s&18&&(e=!t[4].includes(t[23].def_tactic_label.value)),e?l?l.p(t,s):(l=Ml(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&o(r),l&&l.d(t)}}}function Ml(a){let e=ce(a[23].def_tech.value)+"",r,l,t=a[23].def_tech_label.value+"",s,n,i="-->",f,h,d=a[23].def_artifact_rel_label.value.replace(/ /g,"")+"",_,m,c=ce(a[23].def_artifact.value)+"",u,E,g=a[23].def_artifact_label.value+"",P,I,C,D,p=ce(a[23].def_artifact.value)+"",N,S,F=ce(a[23].def_tech.value)+"",R,T,b=ce(a[23].def_tech.value)+"",O,w,A=ce(a[23].def_artifact.value)+"",Y,ne,te=ce(a[23].def_artifact.value)+"",Q,H;function V(L,K){return K&66&&(C=null),C==null&&(C=!!L[6].includes(ce(L[23].def_tech.value))),C?Jf:Kf}let U=V(a,-1),Z=U(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(i),h=k(`
                | `),_=k(d),m=k(" | "),u=k(c),E=k('["'),P=k(g),I=k(`"];
                `),Z.c(),D=k(` 
                class `),N=k(p),S=k(` ArtifactNode;
                click `),R=k(F),T=k(` href "javascript:da_to_def_callback('`),O=k(b),w=k(`')";
                click `),Y=k(A),ne=k(' href "/dao/artifact/d3f:'),Q=k(te),H=k('";')},l(L){r=y(L,e),l=y(L,'["'),s=y(L,t),n=y(L,'"] '),f=y(L,i),h=y(L,`
                | `),_=y(L,d),m=y(L," | "),u=y(L,c),E=y(L,'["'),P=y(L,g),I=y(L,`"];
                `),Z.l(L),D=y(L,` 
                class `),N=y(L,p),S=y(L,` ArtifactNode;
                click `),R=y(L,F),T=y(L,` href "javascript:da_to_def_callback('`),O=y(L,b),w=y(L,`')";
                click `),Y=y(L,A),ne=y(L,' href "/dao/artifact/d3f:'),Q=y(L,te),H=y(L,'";')},m(L,K){v(L,r,K),v(L,l,K),v(L,s,K),v(L,n,K),v(L,f,K),v(L,h,K),v(L,_,K),v(L,m,K),v(L,u,K),v(L,E,K),v(L,P,K),v(L,I,K),Z.m(L,K),v(L,D,K),v(L,N,K),v(L,S,K),v(L,R,K),v(L,T,K),v(L,O,K),v(L,w,K),v(L,Y,K),v(L,ne,K),v(L,Q,K),v(L,H,K)},p(L,K){K&2&&e!==(e=ce(L[23].def_tech.value)+"")&&J(r,e),K&2&&t!==(t=L[23].def_tech_label.value+"")&&J(s,t),K&2&&d!==(d=L[23].def_artifact_rel_label.value.replace(/ /g,"")+"")&&J(_,d),K&2&&c!==(c=ce(L[23].def_artifact.value)+"")&&J(u,c),K&2&&g!==(g=L[23].def_artifact_label.value+"")&&J(P,g),U===(U=V(L,K))&&Z?Z.p(L,K):(Z.d(1),Z=U(L),Z&&(Z.c(),Z.m(D.parentNode,D))),K&2&&p!==(p=ce(L[23].def_artifact.value)+"")&&J(N,p),K&2&&F!==(F=ce(L[23].def_tech.value)+"")&&J(R,F),K&2&&b!==(b=ce(L[23].def_tech.value)+"")&&J(O,b),K&2&&A!==(A=ce(L[23].def_artifact.value)+"")&&J(Y,A),K&2&&te!==(te=ce(L[23].def_artifact.value)+"")&&J(Q,te)},d(L){L&&(o(r),o(l),o(s),o(n),o(f),o(h),o(_),o(m),o(u),o(E),o(P),o(I),o(D),o(N),o(S),o(R),o(T),o(O),o(w),o(Y),o(ne),o(Q),o(H)),Z.d(L)}}}function Kf(a){let e,r=ce(a[23].def_tech.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" DefensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," DefensiveTechniqueNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=ce(s[23].def_tech.value)+"")&&J(l,r)},d(s){s&&(o(e),o(l),o(t))}}}function Jf(a){let e,r=ce(a[23].def_tech.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" SelectedDefensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," SelectedDefensiveTechniqueNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=ce(s[23].def_tech.value)+"")&&J(l,r)},d(s){s&&(o(e),o(l),o(t))}}}function Bl(a){let e=a[3].edge_is_unique(a[23].def_tech_label.value,a[23].def_artifact_rel_label.value,a[23].def_artifact_label.value),r,l=e&&Vl(a);return{c(){l&&l.c(),r=Ee()},l(t){l&&l.l(t),r=Ee()},m(t,s){l&&l.m(t,s),v(t,r,s)},p(t,s){s&10&&(e=t[3].edge_is_unique(t[23].def_tech_label.value,t[23].def_artifact_rel_label.value,t[23].def_artifact_label.value)),e?l?l.p(t,s):(l=Vl(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&o(r),l&&l.d(t)}}}function Yf(a){let e,r,l=Ie(a[1].da_to_def.results.bindings),t=[];for(let s=0;s<l.length;s+=1)t[s]=Bl(zl(a,l,s));return{c(){e=k(`graph LR;
          `);for(let s=0;s<t.length;s+=1)t[s].c();r=Ee()},l(s){e=y(s,`graph LR;
          `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=Ee()},m(s,n){v(s,e,n);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(s,n);v(s,r,n)},p(s,n){if(n&90){l=Ie(s[1].da_to_def.results.bindings);let i;for(i=0;i<l.length;i+=1){const f=zl(s,l,i);t[i]?t[i].p(f,n):(t[i]=Bl(f),t[i].c(),t[i].m(r.parentNode,r))}for(;i<t.length;i+=1)t[i].d(1);t.length=l.length}},d(s){s&&(o(e),o(r)),Xe(t,s)}}}function $l(a){let e,r;return e=new zt({props:{$$slots:{default:[Yf]},$$scope:{ctx:a}}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t&262234&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(ue(e.$$.fragment,l),r=!0)},o(l){_e(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function Xf(a){let e,r,l,t,s,n,i,f,h,d,_,m,c,u=a[6].length+"",E,g,P,I,C;const D=a[12].header,p=ct(D,a,a[18],Ul),N=a[12].default,S=ct(N,a,a[18],null),F=[Gf,Qf,Hf],R=[];function T(b,O){return b[1]?b[1].da_to_def.results.bindings.length>0?1:2:0}return i=T(a),f=R[i]=F[i](a),{c(){e=B("dialog"),r=B("div"),p&&p.c(),l=k(`
    Select Countermeasure Techniques
    `),S&&S.c(),t=x(),s=B("hr"),n=x(),f.c(),h=x(),d=B("hr"),_=x(),m=B("button"),c=k("Insert ("),E=k(u),g=k(")"),this.h()},l(b){e=$(b,"DIALOG",{class:!0});var O=ve(e);r=$(O,"DIV",{class:!0});var w=ve(r);p&&p.l(w),l=y(w,`
    Select Countermeasure Techniques
    `),S&&S.l(w),t=ee(w),s=$(w,"HR",{}),n=ee(w),f.l(w),h=ee(w),d=$(w,"HR",{}),_=ee(w),m=$(w,"BUTTON",{class:!0});var A=ve(m);c=y(A,"Insert ("),E=y(A,u),g=y(A,")"),A.forEach(o),w.forEach(o),O.forEach(o),this.h()},h(){m.autofocus=!0,X(m,"class","svelte-1yq7x1p"),X(r,"class","svelte-1yq7x1p"),X(e,"class","svelte-1yq7x1p")},m(b,O){v(b,e,O),q(e,r),p&&p.m(r,null),q(r,l),S&&S.m(r,null),q(r,t),q(r,s),q(r,n),R[i].m(r,null),q(r,h),q(r,d),q(r,_),q(r,m),q(m,c),q(m,E),q(m,g),a[15](e),P=!0,m.focus(),I||(C=[ge(m,"click",a[9]),ge(r,"click",Ct(a[13])),ge(e,"close",a[16]),ge(e,"click",qt(a[17]))],I=!0)},p(b,[O]){p&&p.p&&(!P||O&262144)&&dt(p,D,b,b[18],P?_t(D,b[18],O,$f):ht(b[18]),Ul),S&&S.p&&(!P||O&262144)&&dt(S,N,b,b[18],P?_t(N,b[18],O,null):ht(b[18]),null);let w=i;i=T(b),i===w?R[i].p(b,O):(Pt(),_e(R[w],1,1,()=>{R[w]=null}),wt(),f=R[i],f?f.p(b,O):(f=R[i]=F[i](b),f.c()),ue(f,1),f.m(r,h)),(!P||O&64)&&u!==(u=b[6].length+"")&&J(E,u)},i(b){P||(ue(p,b),ue(S,b),ue(f),P=!0)},o(b){_e(p,b),_e(S,b),_e(f),P=!1},d(b){b&&o(e),p&&p.d(b),S&&S.d(b),R[i].d(),a[15](null),I=!1,Et(C)}}}function Zf(a,e,r){let l,t,s,{$$slots:n={},$$scope:i}=e,{show_defend_modal:f}=e,{parent_node:h}=e,{data:d}=e,_;const m=At();tt(a,m,T=>r(20,s=T));const c=Ft();tt(a,c,T=>r(19,t=T));let u=new Ht;function E(T){l.includes(T)?r(6,l=l.filter(b=>b!==T)):l.push(T),r(6,l)}window.da_to_def_callback=function(T){E(T)};function g(){let T=0,b=200,O=100;for(const w of l){let A=d.da_to_def.results.bindings.find(Y=>ce(Y.def_tech.value)==w);A&&(Ut(m,c,h,"countermeasureSelectorNode",A.def_tech_label.value,"d3f:"+ce(A.def_tech.value),h.data.sequence,h.position.x+T*b,h.position.y-O,182,63,A.def_artifact_rel_label.value,!1),T+=1)}m.set(s),c.set(t),_&&_.close(),r(6,l=[])}let P=new Set,I=[],C=[];Is(I,C)&&(C=[]);function D(T){for(const b of l){let O=d.da_to_def.results.bindings.find(w=>ce(w.def_tech.value)==b);T.includes(O.def_tactic_label.value)&&r(6,l=l.filter(w=>w!==b))}r(6,l)}function p(T){Nt.call(this,a,T)}function N(T){C=T,r(4,C)}function S(T){Ye[T?"unshift":"push"](()=>{_=T,r(2,_)})}const F=()=>r(0,f=!1),R=()=>{_.close(),r(6,l=[])};return a.$$set=T=>{"show_defend_modal"in T&&r(0,f=T.show_defend_modal),"parent_node"in T&&r(10,h=T.parent_node),"data"in T&&r(1,d=T.data),"$$scope"in T&&r(18,i=T.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&f&&_&&(_.showModal(),r(3,u=new Ht)),a.$$.dirty&5&&!f&&_&&_.close(),a.$$.dirty&2050&&d&&(d.da_to_def.results.bindings.forEach(T=>{P.add(T.def_tactic_label.value)}),r(11,P),r(1,d)),a.$$.dirty&2048&&r(5,I=Array.from(P).sort(function(T,b){return pr[T]-pr[b]})),a.$$.dirty&16&&D(C),a.$$.dirty&24&&u.reset(C)},r(6,l=[]),[f,d,_,u,C,I,l,m,c,g,h,P,n,p,N,S,F,R,i]}class Wf extends ft{constructor(e){super(),ut(this,e,Zf,Xf,ot,{show_defend_modal:0,parent_node:10,data:1})}}function Hl(a,e,r){const l=a.slice();return l[26]=e[r],l}function Ql(a,e,r){const l=a.slice();return l[29]=e[r],l}function Gl(a,e,r){const l=a.slice();return l[32]=e[r],l}function Kl(a,e,r){const l=a.slice();return l[26]=e[r],l}function Jl(a,e,r){const l=a.slice();return l[29]=e[r],l}const xf=a=>({}),Yl=a=>({});function eu(a){let e;return{c(){e=k("No related weaknesses in this release.")},l(r){e=y(r,"No related weaknesses in this release.")},m(r,l){v(r,e,l)},p:ke,i:ke,o:ke,d(r){r&&o(e)}}}function tu(a){let e,r;return e=new zt({props:{$$slots:{default:[lu]},$$scope:{ctx:a}}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t[0]&4194750&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(ue(e.$$.fragment,l),r=!0)},o(l){_e(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function ru(a){let e,r="Loading...";return{c(){e=B("div"),e.textContent=r},l(l){e=$(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:ke,i:ke,o:ke,d(l){l&&o(e)}}}function Xl(a){let e,r=Ie(a[32]["d3f:outbound"]),l=[];for(let t=0;t<r.length;t+=1)l[t]=xl(Kl(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&430){r=Ie(t[32]["d3f:outbound"]);let n;for(n=0;n<r.length;n+=1){const i=Kl(t,r,n);l[n]?l[n].p(i,s):(l[n]=xl(i),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&o(e),Xe(l,t)}}}function Zl(a){let e,r=a[32]["@id"]+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" selected_inbound_node;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," selected_inbound_node;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n[0]&160&&r!==(r=s[32]["@id"]+"")&&J(l,r)},d(s){s&&(o(e),o(l),o(t))}}}function Wl(a){let e=a[32]["@id"]+"",r,l,t=a[32]["rdfs:label"][0]+"",s,n,i="-->",f,h,d=ce(a[26]["@id"])+"",_,m,c=a[29]["@id"]+"",u,E,g=a[7].i(a[29]["@id"])["rdfs:label"][0]+"",P,I,C=a[32]["@id"]+"",D,p,N=a[32]["@id"]+"",S,F,R,T,b=a[8].includes(a[32]["@id"]),O,w=a[29]["@id"]+"",A,Y,ne=a[29]["@id"]+"",te,Q,H,V,U=a[32]["@id"]+"",Z,L,K=a[32]["@id"]+"",ye,Pe,ae=a[29]["@id"]+"",pe,fe,me=a[3](a[29])+"",De,Ue,W=b&&Zl(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(i),h=k(" | "),_=k(d),m=k(" | "),u=k(c),E=k('["'),P=k(g),I=k(`"];
                class `),D=k(C),p=k(" inbound_node; style "),S=k(N),F=k(" fill:"),R=k(a[1]),T=k(`;
                `),W&&W.c(),O=k(`
                class `),A=k(w),Y=k(" RootArtifactNode; style "),te=k(ne),Q=k(" fill:"),H=k(a[2]),V=k(`;
                click `),Z=k(U),L=k(` href "javascript:da_to_weak_callback('`),ye=k(K),Pe=k(`')"; click `),pe=k(ae),fe=k(' href "'),De=k(me),Ue=k('";')},l(j){r=y(j,e),l=y(j,'["'),s=y(j,t),n=y(j,'"] '),f=y(j,i),h=y(j," | "),_=y(j,d),m=y(j," | "),u=y(j,c),E=y(j,'["'),P=y(j,g),I=y(j,`"];
                class `),D=y(j,C),p=y(j," inbound_node; style "),S=y(j,N),F=y(j," fill:"),R=y(j,a[1]),T=y(j,`;
                `),W&&W.l(j),O=y(j,`
                class `),A=y(j,w),Y=y(j," RootArtifactNode; style "),te=y(j,ne),Q=y(j," fill:"),H=y(j,a[2]),V=y(j,`;
                click `),Z=y(j,U),L=y(j,` href "javascript:da_to_weak_callback('`),ye=y(j,K),Pe=y(j,`')"; click `),pe=y(j,ae),fe=y(j,' href "'),De=y(j,me),Ue=y(j,'";')},m(j,re){v(j,r,re),v(j,l,re),v(j,s,re),v(j,n,re),v(j,f,re),v(j,h,re),v(j,_,re),v(j,m,re),v(j,u,re),v(j,E,re),v(j,P,re),v(j,I,re),v(j,D,re),v(j,p,re),v(j,S,re),v(j,F,re),v(j,R,re),v(j,T,re),W&&W.m(j,re),v(j,O,re),v(j,A,re),v(j,Y,re),v(j,te,re),v(j,Q,re),v(j,H,re),v(j,V,re),v(j,Z,re),v(j,L,re),v(j,ye,re),v(j,Pe,re),v(j,pe,re),v(j,fe,re),v(j,De,re),v(j,Ue,re)},p(j,re){re[0]&160&&e!==(e=j[32]["@id"]+"")&&J(r,e),re[0]&160&&t!==(t=j[32]["rdfs:label"][0]+"")&&J(s,t),re[0]&160&&d!==(d=ce(j[26]["@id"])+"")&&J(_,d),re[0]&160&&c!==(c=j[29]["@id"]+"")&&J(u,c),re[0]&160&&g!==(g=j[7].i(j[29]["@id"])["rdfs:label"][0]+"")&&J(P,g),re[0]&160&&C!==(C=j[32]["@id"]+"")&&J(D,C),re[0]&160&&N!==(N=j[32]["@id"]+"")&&J(S,N),re[0]&2&&J(R,j[1]),re[0]&416&&(b=j[8].includes(j[32]["@id"])),b?W?W.p(j,re):(W=Zl(j),W.c(),W.m(O.parentNode,O)):W&&(W.d(1),W=null),re[0]&160&&w!==(w=j[29]["@id"]+"")&&J(A,w),re[0]&160&&ne!==(ne=j[29]["@id"]+"")&&J(te,ne),re[0]&4&&J(H,j[2]),re[0]&160&&U!==(U=j[32]["@id"]+"")&&J(Z,U),re[0]&160&&K!==(K=j[32]["@id"]+"")&&J(ye,K),re[0]&160&&ae!==(ae=j[29]["@id"]+"")&&J(pe,ae),re[0]&168&&me!==(me=j[3](j[29])+"")&&J(De,me)},d(j){j&&(o(r),o(l),o(s),o(n),o(f),o(h),o(_),o(m),o(u),o(E),o(P),o(I),o(D),o(p),o(S),o(F),o(R),o(T),o(O),o(A),o(Y),o(te),o(Q),o(H),o(V),o(Z),o(L),o(ye),o(Pe),o(pe),o(fe),o(De),o(Ue)),W&&W.d(j)}}}function xl(a){let e,r=Ie(a[32][a[26]["@id"]]),l=[];for(let t=0;t<r.length;t+=1)l[t]=Wl(Jl(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&430){r=Ie(t[32][t[26]["@id"]]);let n;for(n=0;n<r.length;n+=1){const i=Jl(t,r,n);l[n]?l[n].p(i,s):(l[n]=Wl(i),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&o(e),Xe(l,t)}}}function ea(a){let e,r=a[32]["d3f:outbound"]&&Xl(a);return{c(){r&&r.c(),e=Ee()},l(l){r&&r.l(l),e=Ee()},m(l,t){r&&r.m(l,t),v(l,e,t)},p(l,t){l[32]["d3f:outbound"]?r?r.p(l,t):(r=Xl(l),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(l){l&&o(e),r&&r.d(l)}}}function ta(a){let e,r=Ie(a[7].i(a[5].description["@id"])["d3f:outbound"]),l=[];for(let t=0;t<r.length;t+=1)l[t]=la(Hl(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&184){r=Ie(t[7].i(t[5].description["@id"])["d3f:outbound"]);let n;for(n=0;n<r.length;n+=1){const i=Hl(t,r,n);l[n]?l[n].p(i,s):(l[n]=la(i),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&o(e),Xe(l,t)}}}function ra(a){let e=a[5].description["@id"]+"",r,l,t=a[7].i(a[5].description["@id"])["rdfs:label"][0]+"",s,n,i="-->",f,h,d=ce(a[26]["@id"])+"",_,m,c=a[29]["@id"]+"",u,E,g=a[7].graph[a[7].index[a[29]["@id"]]]["rdfs:label"][0]+"",P,I,C=a[5].description["@id"]+"",D,p,N=a[29]["@id"]+"",S,F,R=a[5].description["@id"]+"",T,b,O=a[3](a[5].description["@id"])+"",w,A,Y=a[29]["@id"]+"",ne,te,Q=a[4](a[29])+"",H,V;return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(i),h=k(" | "),_=k(d),m=k(" | "),u=k(c),E=k('["'),P=k(g),I=k('"]; class '),D=k(C),p=k(" RootArtifactNode; class "),S=k(N),F=k(` ArtifactNode;
              click `),T=k(R),b=k(' href "'),w=k(O),A=k('"; click '),ne=k(Y),te=k(' href "'),H=k(Q),V=k('";')},l(U){r=y(U,e),l=y(U,'["'),s=y(U,t),n=y(U,'"] '),f=y(U,i),h=y(U," | "),_=y(U,d),m=y(U," | "),u=y(U,c),E=y(U,'["'),P=y(U,g),I=y(U,'"]; class '),D=y(U,C),p=y(U," RootArtifactNode; class "),S=y(U,N),F=y(U,` ArtifactNode;
              click `),T=y(U,R),b=y(U,' href "'),w=y(U,O),A=y(U,'"; click '),ne=y(U,Y),te=y(U,' href "'),H=y(U,Q),V=y(U,'";')},m(U,Z){v(U,r,Z),v(U,l,Z),v(U,s,Z),v(U,n,Z),v(U,f,Z),v(U,h,Z),v(U,_,Z),v(U,m,Z),v(U,u,Z),v(U,E,Z),v(U,P,Z),v(U,I,Z),v(U,D,Z),v(U,p,Z),v(U,S,Z),v(U,F,Z),v(U,T,Z),v(U,b,Z),v(U,w,Z),v(U,A,Z),v(U,ne,Z),v(U,te,Z),v(U,H,Z),v(U,V,Z)},p(U,Z){Z[0]&32&&e!==(e=U[5].description["@id"]+"")&&J(r,e),Z[0]&160&&t!==(t=U[7].i(U[5].description["@id"])["rdfs:label"][0]+"")&&J(s,t),Z[0]&160&&d!==(d=ce(U[26]["@id"])+"")&&J(_,d),Z[0]&160&&c!==(c=U[29]["@id"]+"")&&J(u,c),Z[0]&160&&g!==(g=U[7].graph[U[7].index[U[29]["@id"]]]["rdfs:label"][0]+"")&&J(P,g),Z[0]&32&&C!==(C=U[5].description["@id"]+"")&&J(D,C),Z[0]&160&&N!==(N=U[29]["@id"]+"")&&J(S,N),Z[0]&32&&R!==(R=U[5].description["@id"]+"")&&J(T,R),Z[0]&40&&O!==(O=U[3](U[5].description["@id"])+"")&&J(w,O),Z[0]&160&&Y!==(Y=U[29]["@id"]+"")&&J(ne,Y),Z[0]&176&&Q!==(Q=U[4](U[29])+"")&&J(H,Q)},d(U){U&&(o(r),o(l),o(s),o(n),o(f),o(h),o(_),o(m),o(u),o(E),o(P),o(I),o(D),o(p),o(S),o(F),o(T),o(b),o(w),o(A),o(ne),o(te),o(H),o(V))}}}function la(a){let e,r=Ie(a[7].i(a[5].description["@id"])[a[26]["@id"]]),l=[];for(let t=0;t<r.length;t+=1)l[t]=ra(Ql(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&184){r=Ie(t[7].i(t[5].description["@id"])[t[26]["@id"]]);let n;for(n=0;n<r.length;n+=1){const i=Ql(t,r,n);l[n]?l[n].p(i,s):(l[n]=ra(i),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&o(e),Xe(l,t)}}}function lu(a){let e,r,l=a[7].i(a[5].description["@id"])&&a[7].i(a[5].description["@id"])["d3f:outbound"],t,s=Ie(a[7].graph.filter(a[18])),n=[];for(let f=0;f<s.length;f+=1)n[f]=ea(Gl(a,s,f));let i=l&&ta(a);return{c(){e=k(`graph LR;
        `);for(let f=0;f<n.length;f+=1)n[f].c();r=x(),i&&i.c(),t=Ee()},l(f){e=y(f,`graph LR;
        `);for(let h=0;h<n.length;h+=1)n[h].l(f);r=ee(f),i&&i.l(f),t=Ee()},m(f,h){v(f,e,h);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(f,h);v(f,r,h),i&&i.m(f,h),v(f,t,h)},p(f,h){if(h[0]&430){s=Ie(f[7].graph.filter(f[18]));let d;for(d=0;d<s.length;d+=1){const _=Gl(f,s,d);n[d]?n[d].p(_,h):(n[d]=ea(_),n[d].c(),n[d].m(r.parentNode,r))}for(;d<n.length;d+=1)n[d].d(1);n.length=s.length}h[0]&160&&(l=f[7].i(f[5].description["@id"])&&f[7].i(f[5].description["@id"])["d3f:outbound"]),l?i?i.p(f,h):(i=ta(f),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},d(f){f&&(o(e),o(r),o(t)),Xe(n,f),i&&i.d(f)}}}function au(a){let e,r,l,t,s,n,i,f,h,d,_,m,c,u=a[8].length+"",E,g,P,I,C;const D=a[16].header,p=ct(D,a,a[22],Yl),N=a[16].default,S=ct(N,a,a[22],null),F=[ru,tu,eu],R=[];function T(b,O){return b[5]?b[7].graph.length>0?1:2:0}return i=T(a),f=R[i]=F[i](a),{c(){e=B("dialog"),r=B("div"),p&&p.c(),l=k(`
    Select Weaknesses
    `),S&&S.c(),t=x(),s=B("hr"),n=x(),f.c(),h=x(),d=B("hr"),_=x(),m=B("button"),c=k("Insert ("),E=k(u),g=k(")"),this.h()},l(b){e=$(b,"DIALOG",{class:!0});var O=ve(e);r=$(O,"DIV",{class:!0});var w=ve(r);p&&p.l(w),l=y(w,`
    Select Weaknesses
    `),S&&S.l(w),t=ee(w),s=$(w,"HR",{}),n=ee(w),f.l(w),h=ee(w),d=$(w,"HR",{}),_=ee(w),m=$(w,"BUTTON",{class:!0});var A=ve(m);c=y(A,"Insert ("),E=y(A,u),g=y(A,")"),A.forEach(o),w.forEach(o),O.forEach(o),this.h()},h(){m.autofocus=!0,X(m,"class","svelte-1resfch"),X(r,"class","svelte-1resfch"),X(e,"class","svelte-1resfch")},m(b,O){v(b,e,O),q(e,r),p&&p.m(r,null),q(r,l),S&&S.m(r,null),q(r,t),q(r,s),q(r,n),R[i].m(r,null),q(r,h),q(r,d),q(r,_),q(r,m),q(m,c),q(m,E),q(m,g),a[19](e),P=!0,m.focus(),I||(C=[ge(m,"click",a[11]),ge(r,"click",Ct(a[17])),ge(e,"close",a[20]),ge(e,"click",qt(a[21]))],I=!0)},p(b,O){p&&p.p&&(!P||O[0]&4194304)&&dt(p,D,b,b[22],P?_t(D,b[22],O,xf):ht(b[22]),Yl),S&&S.p&&(!P||O[0]&4194304)&&dt(S,N,b,b[22],P?_t(N,b[22],O,null):ht(b[22]),null);let w=i;i=T(b),i===w?R[i].p(b,O):(Pt(),_e(R[w],1,1,()=>{R[w]=null}),wt(),f=R[i],f?f.p(b,O):(f=R[i]=F[i](b),f.c()),ue(f,1),f.m(r,h)),(!P||O[0]&256)&&u!==(u=b[8].length+"")&&J(E,u)},i(b){P||(ue(p,b),ue(S,b),ue(f),P=!0)},o(b){_e(p,b),_e(S,b),_e(f),P=!1},d(b){b&&o(e),p&&p.d(b),S&&S.d(b),R[i].d(),a[19](null),I=!1,Et(C)}}}function su(a,e,r){let l,t,s,{$$slots:n={},$$scope:i}=e,{outbound_color:f="#fff4dd"}=e,{inbound_color:h="#fff4dd"}=e,{root_color:d="#fff4dd"}=e,{link_function:_=w=>`/dao/artifact/${w["@id"]}`}=e,{inbound_link_function:m=_}=e,{root_link_function:c=w=>`/dao/artifact/${w["@id"]}`}=e,{outbound_link_function:u=_}=e,{show_weakness_modal:E}=e,{parent_node:g}=e,{data:P}=e,I;const C=At();tt(a,C,w=>r(24,s=w));const D=Ft();tt(a,D,w=>r(23,t=w));let p;function N(w){l.includes(w)?r(8,l=l.filter(A=>A!==w)):l.push(w),r(8,l),r(8,l)}window.da_to_weak_callback=function(w){N(w)};function S(){let w=0,A=200,Y=100;for(const ne of l){let te=P.da_to_weak["@graph"].find(Q=>Q["@id"]==ne);te&&(Ut(C,D,g,"vulnerabilitySelectorNode",te["rdfs:label"],te["d3f:cwe-id"],g.data.sequence,g.position.x+w*A,g.position.y+Y,182,63,te["d3f:outbound"][0]["@id"].replace("d3f:",""),!1),w+=1)}C.set(s),D.set(t),I&&I.close(),r(8,l=[])}function F(w){Nt.call(this,a,w)}const R=w=>w["@id"]!=P.description["@id"];function T(w){Ye[w?"unshift":"push"](()=>{I=w,r(6,I)})}const b=()=>r(0,E=!1),O=()=>{I.close(),r(8,l=[])};return a.$$set=w=>{"outbound_color"in w&&r(12,f=w.outbound_color),"inbound_color"in w&&r(1,h=w.inbound_color),"root_color"in w&&r(2,d=w.root_color),"link_function"in w&&r(13,_=w.link_function),"inbound_link_function"in w&&r(14,m=w.inbound_link_function),"root_link_function"in w&&r(3,c=w.root_link_function),"outbound_link_function"in w&&r(4,u=w.outbound_link_function),"show_weakness_modal"in w&&r(0,E=w.show_weakness_modal),"parent_node"in w&&r(15,g=w.parent_node),"data"in w&&r(5,P=w.data),"$$scope"in w&&r(22,i=w.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&65&&E&&I&&I.showModal(),a.$$.dirty[0]&65&&!E&&I&&I.close(),a.$$.dirty[0]&32&&P&&r(7,p=new vr(P.da_to_weak,{index:!0}))},r(8,l=[]),[E,h,d,c,u,P,I,p,l,C,D,S,f,_,m,g,n,F,R,T,b,O,i]}class nu extends ft{constructor(e){super(),ut(this,e,su,au,ot,{outbound_color:12,inbound_color:1,root_color:2,link_function:13,inbound_link_function:14,root_link_function:3,outbound_link_function:4,show_weakness_modal:0,parent_node:15,data:5},null,[-1,-1])}}function aa(a,e,r){const l=a.slice();return l[31]=e[r],l}function sa(a,e,r){const l=a.slice();return l[34]=e[r],l}function na(a,e,r){const l=a.slice();return l[37]=e[r],l}const iu=a=>({}),ia=a=>({});function ou(a){let e;return{c(){e=k("No related parts/control in this release")},l(r){e=y(r,"No related parts/control in this release")},m(r,l){v(r,e,l)},p:ke,i:ke,o:ke,d(r){r&&o(e)}}}function fu(a){let e,r;return e=new zt({props:{$$slots:{default:[cu]},$$scope:{ctx:a}}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t[0]&134217934&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(ue(e.$$.fragment,l),r=!0)},o(l){_e(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function uu(a){let e,r="Loading...";return{c(){e=B("div"),e.textContent=r},l(l){e=$(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:ke,i:ke,o:ke,d(l){l&&o(e)}}}function oa(a){let e,r=Ie(a[31]["d3f:outbound"].filter(a[23])),l=[];for(let t=0;t<r.length;t+=1)l[t]=va(sa(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&206){r=Ie(t[31]["d3f:outbound"].filter(t[23]));let n;for(n=0;n<r.length;n+=1){const i=sa(t,r,n);l[n]?l[n].p(i,s):(l[n]=va(i),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&o(e),Xe(l,t)}}}function fa(a){let e,r,l=a[31]["@id"]!=a[2].data.d3f_class&&ua(a),t=a[37]["@id"]!=a[2].data.d3f_class&&ca(a);return{c(){l&&l.c(),e=x(),t&&t.c(),r=Ee()},l(s){l&&l.l(s),e=ee(s),t&&t.l(s),r=Ee()},m(s,n){l&&l.m(s,n),v(s,e,n),t&&t.m(s,n),v(s,r,n)},p(s,n){s[31]["@id"]!=s[2].data.d3f_class?l?l.p(s,n):(l=ua(s),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),s[37]["@id"]!=s[2].data.d3f_class?t?t.p(s,n):(t=ca(s),t.c(),t.m(r.parentNode,r)):t&&(t.d(1),t=null)},d(s){s&&(o(e),o(r)),l&&l.d(s),t&&t.d(s)}}}function ua(a){let e,r=a[31]["@id"]+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" selected_outbound_node;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," selected_outbound_node;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n[0]&72&&r!==(r=s[31]["@id"]+"")&&J(l,r)},d(s){s&&(o(e),o(l),o(t))}}}function ca(a){let e,r=a[37]["@id"]+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" selected_outbound_node;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," selected_outbound_node;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n[0]&74&&r!==(r=s[37]["@id"]+"")&&J(l,r)},d(s){s&&(o(e),o(l),o(t))}}}function da(a){let e,r=a[31]["@id"]+"",l,t,s=a[31]["@id"]+"",n,i,f=ce(a[34]["@id"])+"",h,d,_=a[37]["@id"]+"",m,c;return{c(){e=k("click "),l=k(r),t=k(` href "javascript:da_to_neighbors_callback('`),n=k(s),i=k("', '"),h=k(f),d=k("','"),m=k(_),c=k(`')";`)},l(u){e=y(u,"click "),l=y(u,r),t=y(u,` href "javascript:da_to_neighbors_callback('`),n=y(u,s),i=y(u,"', '"),h=y(u,f),d=y(u,"','"),m=y(u,_),c=y(u,`')";`)},m(u,E){v(u,e,E),v(u,l,E),v(u,t,E),v(u,n,E),v(u,i,E),v(u,h,E),v(u,d,E),v(u,m,E),v(u,c,E)},p(u,E){E[0]&72&&r!==(r=u[31]["@id"]+"")&&J(l,r),E[0]&72&&s!==(s=u[31]["@id"]+"")&&J(n,s),E[0]&74&&f!==(f=ce(u[34]["@id"])+"")&&J(h,f),E[0]&74&&_!==(_=u[37]["@id"]+"")&&J(m,_)},d(u){u&&(o(e),o(l),o(t),o(n),o(i),o(h),o(d),o(m),o(c))}}}function ha(a){let e,r=a[37]["@id"]+"",l,t,s=a[31]["@id"]+"",n,i,f=ce(a[34]["@id"])+"",h,d,_=a[37]["@id"]+"",m,c;return{c(){e=k("click "),l=k(r),t=k(` href "javascript:da_to_neighbors_callback('`),n=k(s),i=k("', '"),h=k(f),d=k("','"),m=k(_),c=k(`')";`)},l(u){e=y(u,"click "),l=y(u,r),t=y(u,` href "javascript:da_to_neighbors_callback('`),n=y(u,s),i=y(u,"', '"),h=y(u,f),d=y(u,"','"),m=y(u,_),c=y(u,`')";`)},m(u,E){v(u,e,E),v(u,l,E),v(u,t,E),v(u,n,E),v(u,i,E),v(u,h,E),v(u,d,E),v(u,m,E),v(u,c,E)},p(u,E){E[0]&74&&r!==(r=u[37]["@id"]+"")&&J(l,r),E[0]&72&&s!==(s=u[31]["@id"]+"")&&J(n,s),E[0]&74&&f!==(f=ce(u[34]["@id"])+"")&&J(h,f),E[0]&74&&_!==(_=u[37]["@id"]+"")&&J(m,_)},d(u){u&&(o(e),o(l),o(t),o(n),o(i),o(h),o(d),o(m),o(c))}}}function _a(a){let e=a[31]["@id"]+"",r,l,t=a[31]["rdfs:label"][0]+"",s,n,i="-->",f,h,d=ce(a[34]["@id"])+"",_,m,c=a[37]["@id"]+"",u,E,g=a[6].i(a[37]["@id"])["rdfs:label"][0]+"",P,I,C=a[37]["@id"]+"",D,p,N=a[7].some(T),S,F,R;function T(...A){return a[21](a[31],a[34],a[37],...A)}let b=N&&fa(a),O=a[31]["@id"]!=a[2].data.d3f_class&&da(a),w=a[37]["@id"]!=a[2].data.d3f_class&&ha(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(i),h=k(" | "),_=k(d),m=k(" | "),u=k(c),E=k('["'),P=k(g),I=k(`"];
                class `),D=k(C),p=k(` outbound;
                `),b&&b.c(),S=x(),O&&O.c(),F=x(),w&&w.c(),R=Ee()},l(A){r=y(A,e),l=y(A,'["'),s=y(A,t),n=y(A,'"] '),f=y(A,i),h=y(A," | "),_=y(A,d),m=y(A," | "),u=y(A,c),E=y(A,'["'),P=y(A,g),I=y(A,`"];
                class `),D=y(A,C),p=y(A,` outbound;
                `),b&&b.l(A),S=ee(A),O&&O.l(A),F=ee(A),w&&w.l(A),R=Ee()},m(A,Y){v(A,r,Y),v(A,l,Y),v(A,s,Y),v(A,n,Y),v(A,f,Y),v(A,h,Y),v(A,_,Y),v(A,m,Y),v(A,u,Y),v(A,E,Y),v(A,P,Y),v(A,I,Y),v(A,D,Y),v(A,p,Y),b&&b.m(A,Y),v(A,S,Y),O&&O.m(A,Y),v(A,F,Y),w&&w.m(A,Y),v(A,R,Y)},p(A,Y){a=A,Y[0]&72&&e!==(e=a[31]["@id"]+"")&&J(r,e),Y[0]&72&&t!==(t=a[31]["rdfs:label"][0]+"")&&J(s,t),Y[0]&74&&d!==(d=ce(a[34]["@id"])+"")&&J(_,d),Y[0]&74&&c!==(c=a[37]["@id"]+"")&&J(u,c),Y[0]&74&&g!==(g=a[6].i(a[37]["@id"])["rdfs:label"][0]+"")&&J(P,g),Y[0]&74&&C!==(C=a[37]["@id"]+"")&&J(D,C),Y[0]&202&&(N=a[7].some(T)),N?b?b.p(a,Y):(b=fa(a),b.c(),b.m(S.parentNode,S)):b&&(b.d(1),b=null),a[31]["@id"]!=a[2].data.d3f_class?O?O.p(a,Y):(O=da(a),O.c(),O.m(F.parentNode,F)):O&&(O.d(1),O=null),a[37]["@id"]!=a[2].data.d3f_class?w?w.p(a,Y):(w=ha(a),w.c(),w.m(R.parentNode,R)):w&&(w.d(1),w=null)},d(A){A&&(o(r),o(l),o(s),o(n),o(f),o(h),o(_),o(m),o(u),o(E),o(P),o(I),o(D),o(p),o(S),o(F),o(R)),b&&b.d(A),O&&O.d(A),w&&w.d(A)}}}function va(a){let e,r=Ie(a[31][a[34]["@id"]]),l=[];for(let t=0;t<r.length;t+=1)l[t]=_a(na(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&206){r=Ie(t[31][t[34]["@id"]]);let n;for(n=0;n<r.length;n+=1){const i=na(t,r,n);l[n]?l[n].p(i,s):(l[n]=_a(i),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&o(e),Xe(l,t)}}}function ma(a){let e,r=a[31]["d3f:outbound"]&&oa(a);return{c(){r&&r.c(),e=Ee()},l(l){r&&r.l(l),e=Ee()},m(l,t){r&&r.m(l,t),v(l,e,t)},p(l,t){l[31]["d3f:outbound"]?r?r.p(l,t):(r=oa(l),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(l){l&&o(e),r&&r.d(l)}}}function cu(a){let e,r,l=Ie(a[6].graph.filter(a[22])),t=[];for(let s=0;s<l.length;s+=1)t[s]=ma(aa(a,l,s));return{c(){e=k(`graph LR;
        `);for(let s=0;s<t.length;s+=1)t[s].c();r=Ee()},l(s){e=y(s,`graph LR;
        `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=Ee()},m(s,n){v(s,e,n);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(s,n);v(s,r,n)},p(s,n){if(n[0]&206){l=Ie(s[6].graph.filter(s[22]));let i;for(i=0;i<l.length;i+=1){const f=aa(s,l,i);t[i]?t[i].p(f,n):(t[i]=ma(f),t[i].c(),t[i].m(r.parentNode,r))}for(;i<t.length;i+=1)t[i].d(1);t.length=l.length}},d(s){s&&(o(e),o(r)),Xe(t,s)}}}function du(a){let e,r,l,t,s,n,i,f,h,d,_,m,c,u=a[7].length+"",E,g,P,I,C;const D=a[19].header,p=ct(D,a,a[27],ia),N=a[19].default,S=ct(N,a,a[27],null),F=[uu,fu,ou],R=[];function T(b,O){return b[3]?b[5]&&b[6].graph.length>0?1:2:0}return i=T(a),f=R[i]=F[i](a),{c(){e=B("dialog"),r=B("div"),p&&p.c(),l=k(`
    Select Parts/Control Neighbors
    `),S&&S.c(),t=x(),s=B("hr"),n=x(),f.c(),h=x(),d=B("hr"),_=x(),m=B("button"),c=k("Insert ("),E=k(u),g=k(")"),this.h()},l(b){e=$(b,"DIALOG",{class:!0});var O=ve(e);r=$(O,"DIV",{class:!0});var w=ve(r);p&&p.l(w),l=y(w,`
    Select Parts/Control Neighbors
    `),S&&S.l(w),t=ee(w),s=$(w,"HR",{}),n=ee(w),f.l(w),h=ee(w),d=$(w,"HR",{}),_=ee(w),m=$(w,"BUTTON",{class:!0});var A=ve(m);c=y(A,"Insert ("),E=y(A,u),g=y(A,")"),A.forEach(o),w.forEach(o),O.forEach(o),this.h()},h(){m.autofocus=!0,X(m,"class","svelte-x2no78"),X(r,"class","svelte-x2no78"),X(e,"class","svelte-x2no78")},m(b,O){v(b,e,O),q(e,r),p&&p.m(r,null),q(r,l),S&&S.m(r,null),q(r,t),q(r,s),q(r,n),R[i].m(r,null),q(r,h),q(r,d),q(r,_),q(r,m),q(m,c),q(m,E),q(m,g),a[24](e),P=!0,m.focus(),I||(C=[ge(m,"click",a[10]),ge(r,"click",Ct(a[20])),ge(e,"close",a[25]),ge(e,"click",qt(a[26]))],I=!0)},p(b,O){p&&p.p&&(!P||O[0]&134217728)&&dt(p,D,b,b[27],P?_t(D,b[27],O,iu):ht(b[27]),ia),S&&S.p&&(!P||O[0]&134217728)&&dt(S,N,b,b[27],P?_t(N,b[27],O,null):ht(b[27]),null);let w=i;i=T(b),i===w?R[i].p(b,O):(Pt(),_e(R[w],1,1,()=>{R[w]=null}),wt(),f=R[i],f?f.p(b,O):(f=R[i]=F[i](b),f.c()),ue(f,1),f.m(r,h)),(!P||O[0]&128)&&u!==(u=b[7].length+"")&&J(E,u)},i(b){P||(ue(p,b),ue(S,b),ue(f),P=!0)},o(b){_e(p,b),_e(S,b),_e(f),P=!1},d(b){b&&o(e),p&&p.d(b),S&&S.d(b),R[i].d(),a[24](null),I=!1,Et(C)}}}function hu(a,e,r){let l,t,s,{$$slots:n={},$$scope:i}=e,{empty_message:f="has no direct neighbors in this release."}=e,{outbound_color:h="#fff4dd"}=e,{inbound_color:d="#fff4dd"}=e,{root_color:_="#fff4dd"}=e,{link_function:m=Q=>`/dao/artifact/${Q["@id"]}`}=e,{inbound_link_function:c=m}=e,{root_link_function:u=Q=>`/dao/artifact/${Q["@id"]}`}=e,{outbound_link_function:E=m}=e,{show_neighbors_modal:g}=e,{neighbor_filter_labels:P}=e,{parent_node:I}=e,{data:C}=e,D,p=!1;const N=At();tt(a,N,Q=>r(29,s=Q));const S=Ft();tt(a,S,Q=>r(28,t=Q));let F;function R(Q){l.some(H=>H.source==Q.source&&H.relation==Q.relation&&H.target==Q.target)?r(7,l=l.filter(H=>H.source!=Q.source||H.relation!=Q.relation||H.target!=Q.target)):l.push(Q),r(7,l),r(7,l)}window.da_to_neighbors_callback=function(Q,H,V){R({source:Q,relation:H,target:V})};function T(){let Q=0,H=0,V=200,U=125;for(const Z of l){let L=C.neighbors["@graph"].find(ye=>ye["@id"]==Z.source),K=C.neighbors["@graph"].find(ye=>ye["@id"]==Z.target);if(L&&K){let ye=I.data.d3f_class==L["@id"],Pe=ye?K:L;Ut(N,S,I,"artifactSelectorNode",Pe["rdfs:label"][0],Pe["@id"],I.data.sequence,I.position.x+(ye?Q:H)*V,ye?I.position.y+U:I.position.y-U,182,63,Z.relation,ye),ye?Q+=1:H+=1}}N.set(s),S.set(t),D&&(D.close(),r(5,p=!1)),r(7,l=[])}function b(Q){Nt.call(this,a,Q)}const O=(Q,H,V,U)=>U.source==Q["@id"]&&U.relation==ce(H["@id"])&&U.target==V["@id"],w=Q=>Q["@id"]!=C.description["@id"],A=Q=>P.length==0||P.includes(Q["@id"]);function Y(Q){Ye[Q?"unshift":"push"](()=>{D=Q,r(4,D)})}const ne=()=>r(0,g=!1),te=()=>{D.close(),r(7,l=[])};return a.$$set=Q=>{"empty_message"in Q&&r(11,f=Q.empty_message),"outbound_color"in Q&&r(12,h=Q.outbound_color),"inbound_color"in Q&&r(13,d=Q.inbound_color),"root_color"in Q&&r(14,_=Q.root_color),"link_function"in Q&&r(15,m=Q.link_function),"inbound_link_function"in Q&&r(16,c=Q.inbound_link_function),"root_link_function"in Q&&r(17,u=Q.root_link_function),"outbound_link_function"in Q&&r(18,E=Q.outbound_link_function),"show_neighbors_modal"in Q&&r(0,g=Q.show_neighbors_modal),"neighbor_filter_labels"in Q&&r(1,P=Q.neighbor_filter_labels),"parent_node"in Q&&r(2,I=Q.parent_node),"data"in Q&&r(3,C=Q.data),"$$scope"in Q&&r(27,i=Q.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&17&&g&&D&&D.showModal(),a.$$.dirty[0]&17&&!g&&D&&D.close(),a.$$.dirty[0]&14&&C&&(r(5,p=!1),C.neighbors["@graph"].find(Q=>Q["@id"]==I.data.d3f_class),P.length==0?(r(5,p=!0),r(6,F=new vr(C.neighbors,{index:!0}))):C.neighbors["@graph"].some(Q=>Q["d3f:outbound"]&&P.some(H=>Q["d3f:outbound"].some(V=>V["@id"]==H)))&&(r(5,p=!0),r(6,F=new vr(C.neighbors,{index:!0}))))},r(7,l=[]),[g,P,I,C,D,p,F,l,N,S,T,f,h,d,_,m,c,u,E,n,b,O,w,A,Y,ne,te,i]}class _u extends ft{constructor(e){super(),ut(this,e,hu,du,ot,{empty_message:11,outbound_color:12,inbound_color:13,root_color:14,link_function:15,inbound_link_function:16,root_link_function:17,outbound_link_function:18,show_neighbors_modal:0,neighbor_filter_labels:1,parent_node:2,data:3},null,[-1,-1])}}function pa(a,e,r){const l=a.slice();return l[26]=e[r],l}function ga(a,e,r){const l=a.slice();return l[29]=e[r],l}function ba(a,e,r){const l=a.slice();return l[32]=e[r],l}function Ea(a,e,r){const l=a.slice();return l[26]=e[r],l}function Pa(a,e,r){const l=a.slice();return l[29]=e[r],l}const vu=a=>({}),wa=a=>({});function mu(a){let e;return{c(){e=k("No related sensors in this release.")},l(r){e=y(r,"No related sensors in this release.")},m(r,l){v(r,e,l)},p:ke,i:ke,o:ke,d(r){r&&o(e)}}}function pu(a){let e,r;return e=new zt({props:{$$slots:{default:[bu]},$$scope:{ctx:a}}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t[0]&4194750&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(ue(e.$$.fragment,l),r=!0)},o(l){_e(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function gu(a){let e,r="Loading...";return{c(){e=B("div"),e.textContent=r},l(l){e=$(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:ke,i:ke,o:ke,d(l){l&&o(e)}}}function ka(a){let e,r=Ie(a[32]["d3f:outbound"]),l=[];for(let t=0;t<r.length;t+=1)l[t]=Da(Ea(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&430){r=Ie(t[32]["d3f:outbound"]);let n;for(n=0;n<r.length;n+=1){const i=Ea(t,r,n);l[n]?l[n].p(i,s):(l[n]=Da(i),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&o(e),Xe(l,t)}}}function ya(a){let e,r=a[32]["@id"]+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" selected_inbound_node;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," selected_inbound_node;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n[0]&160&&r!==(r=s[32]["@id"]+"")&&J(l,r)},d(s){s&&(o(e),o(l),o(t))}}}function Sa(a){let e=a[32]["@id"]+"",r,l,t=a[32]["rdfs:label"][0]+"",s,n,i="-->",f,h,d=ce(a[26]["@id"])+"",_,m,c=a[29]["@id"]+"",u,E,g=a[7].i(a[29]["@id"])["rdfs:label"][0]+"",P,I,C=a[32]["@id"]+"",D,p,N=a[32]["@id"]+"",S,F,R,T,b=a[8].includes(a[32]["@id"]),O,w=a[29]["@id"]+"",A,Y,ne=a[29]["@id"]+"",te,Q,H,V,U=a[32]["@id"]+"",Z,L,K=a[32]["@id"]+"",ye,Pe,ae=a[29]["@id"]+"",pe,fe,me=a[3](a[29])+"",De,Ue,W=b&&ya(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(i),h=k(" | "),_=k(d),m=k(" | "),u=k(c),E=k('["'),P=k(g),I=k(`"];
                  class `),D=k(C),p=k(" inbound_node; style "),S=k(N),F=k(" fill:"),R=k(a[1]),T=k(`;
                  `),W&&W.c(),O=k(`
                  class `),A=k(w),Y=k(" RootArtifactNode; style "),te=k(ne),Q=k(" fill:"),H=k(a[2]),V=k(`;
                  click `),Z=k(U),L=k(` href "javascript:da_to_sensor_callback('`),ye=k(K),Pe=k(`')"; click `),pe=k(ae),fe=k(' href "'),De=k(me),Ue=k('";')},l(j){r=y(j,e),l=y(j,'["'),s=y(j,t),n=y(j,'"] '),f=y(j,i),h=y(j," | "),_=y(j,d),m=y(j," | "),u=y(j,c),E=y(j,'["'),P=y(j,g),I=y(j,`"];
                  class `),D=y(j,C),p=y(j," inbound_node; style "),S=y(j,N),F=y(j," fill:"),R=y(j,a[1]),T=y(j,`;
                  `),W&&W.l(j),O=y(j,`
                  class `),A=y(j,w),Y=y(j," RootArtifactNode; style "),te=y(j,ne),Q=y(j," fill:"),H=y(j,a[2]),V=y(j,`;
                  click `),Z=y(j,U),L=y(j,` href "javascript:da_to_sensor_callback('`),ye=y(j,K),Pe=y(j,`')"; click `),pe=y(j,ae),fe=y(j,' href "'),De=y(j,me),Ue=y(j,'";')},m(j,re){v(j,r,re),v(j,l,re),v(j,s,re),v(j,n,re),v(j,f,re),v(j,h,re),v(j,_,re),v(j,m,re),v(j,u,re),v(j,E,re),v(j,P,re),v(j,I,re),v(j,D,re),v(j,p,re),v(j,S,re),v(j,F,re),v(j,R,re),v(j,T,re),W&&W.m(j,re),v(j,O,re),v(j,A,re),v(j,Y,re),v(j,te,re),v(j,Q,re),v(j,H,re),v(j,V,re),v(j,Z,re),v(j,L,re),v(j,ye,re),v(j,Pe,re),v(j,pe,re),v(j,fe,re),v(j,De,re),v(j,Ue,re)},p(j,re){re[0]&160&&e!==(e=j[32]["@id"]+"")&&J(r,e),re[0]&160&&t!==(t=j[32]["rdfs:label"][0]+"")&&J(s,t),re[0]&160&&d!==(d=ce(j[26]["@id"])+"")&&J(_,d),re[0]&160&&c!==(c=j[29]["@id"]+"")&&J(u,c),re[0]&160&&g!==(g=j[7].i(j[29]["@id"])["rdfs:label"][0]+"")&&J(P,g),re[0]&160&&C!==(C=j[32]["@id"]+"")&&J(D,C),re[0]&160&&N!==(N=j[32]["@id"]+"")&&J(S,N),re[0]&2&&J(R,j[1]),re[0]&416&&(b=j[8].includes(j[32]["@id"])),b?W?W.p(j,re):(W=ya(j),W.c(),W.m(O.parentNode,O)):W&&(W.d(1),W=null),re[0]&160&&w!==(w=j[29]["@id"]+"")&&J(A,w),re[0]&160&&ne!==(ne=j[29]["@id"]+"")&&J(te,ne),re[0]&4&&J(H,j[2]),re[0]&160&&U!==(U=j[32]["@id"]+"")&&J(Z,U),re[0]&160&&K!==(K=j[32]["@id"]+"")&&J(ye,K),re[0]&160&&ae!==(ae=j[29]["@id"]+"")&&J(pe,ae),re[0]&168&&me!==(me=j[3](j[29])+"")&&J(De,me)},d(j){j&&(o(r),o(l),o(s),o(n),o(f),o(h),o(_),o(m),o(u),o(E),o(P),o(I),o(D),o(p),o(S),o(F),o(R),o(T),o(O),o(A),o(Y),o(te),o(Q),o(H),o(V),o(Z),o(L),o(ye),o(Pe),o(pe),o(fe),o(De),o(Ue)),W&&W.d(j)}}}function Da(a){let e,r=Ie(a[32][a[26]["@id"]]),l=[];for(let t=0;t<r.length;t+=1)l[t]=Sa(Pa(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&430){r=Ie(t[32][t[26]["@id"]]);let n;for(n=0;n<r.length;n+=1){const i=Pa(t,r,n);l[n]?l[n].p(i,s):(l[n]=Sa(i),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&o(e),Xe(l,t)}}}function Ca(a){let e,r=a[32]["d3f:outbound"]&&ka(a);return{c(){r&&r.c(),e=Ee()},l(l){r&&r.l(l),e=Ee()},m(l,t){r&&r.m(l,t),v(l,e,t)},p(l,t){l[32]["d3f:outbound"]?r?r.p(l,t):(r=ka(l),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(l){l&&o(e),r&&r.d(l)}}}function Na(a){let e,r=Ie(a[7].i(a[5].description["@id"])["d3f:outbound"]),l=[];for(let t=0;t<r.length;t+=1)l[t]=Ia(pa(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&184){r=Ie(t[7].i(t[5].description["@id"])["d3f:outbound"]);let n;for(n=0;n<r.length;n+=1){const i=pa(t,r,n);l[n]?l[n].p(i,s):(l[n]=Ia(i),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&o(e),Xe(l,t)}}}function Ra(a){let e=a[5].description["@id"]+"",r,l,t=a[7].i(a[5].description["@id"])["rdfs:label"][0]+"",s,n,i="-->",f,h,d=ce(a[26]["@id"])+"",_,m,c=a[29]["@id"]+"",u,E,g=a[7].graph[a[7].index[a[29]["@id"]]]["rdfs:label"][0]+"",P,I,C=a[5].description["@id"]+"",D,p,N=a[29]["@id"]+"",S,F,R=a[5].description["@id"]+"",T,b,O=a[3](a[5].description["@id"])+"",w,A,Y=a[29]["@id"]+"",ne,te,Q=a[4](a[29])+"",H,V;return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(i),h=k(" | "),_=k(d),m=k(" | "),u=k(c),E=k('["'),P=k(g),I=k('"]; class '),D=k(C),p=k(" RootArtifactNode; class "),S=k(N),F=k(` ArtifactNode;
                click `),T=k(R),b=k(' href "'),w=k(O),A=k('"; click '),ne=k(Y),te=k(' href "'),H=k(Q),V=k('";')},l(U){r=y(U,e),l=y(U,'["'),s=y(U,t),n=y(U,'"] '),f=y(U,i),h=y(U," | "),_=y(U,d),m=y(U," | "),u=y(U,c),E=y(U,'["'),P=y(U,g),I=y(U,'"]; class '),D=y(U,C),p=y(U," RootArtifactNode; class "),S=y(U,N),F=y(U,` ArtifactNode;
                click `),T=y(U,R),b=y(U,' href "'),w=y(U,O),A=y(U,'"; click '),ne=y(U,Y),te=y(U,' href "'),H=y(U,Q),V=y(U,'";')},m(U,Z){v(U,r,Z),v(U,l,Z),v(U,s,Z),v(U,n,Z),v(U,f,Z),v(U,h,Z),v(U,_,Z),v(U,m,Z),v(U,u,Z),v(U,E,Z),v(U,P,Z),v(U,I,Z),v(U,D,Z),v(U,p,Z),v(U,S,Z),v(U,F,Z),v(U,T,Z),v(U,b,Z),v(U,w,Z),v(U,A,Z),v(U,ne,Z),v(U,te,Z),v(U,H,Z),v(U,V,Z)},p(U,Z){Z[0]&32&&e!==(e=U[5].description["@id"]+"")&&J(r,e),Z[0]&160&&t!==(t=U[7].i(U[5].description["@id"])["rdfs:label"][0]+"")&&J(s,t),Z[0]&160&&d!==(d=ce(U[26]["@id"])+"")&&J(_,d),Z[0]&160&&c!==(c=U[29]["@id"]+"")&&J(u,c),Z[0]&160&&g!==(g=U[7].graph[U[7].index[U[29]["@id"]]]["rdfs:label"][0]+"")&&J(P,g),Z[0]&32&&C!==(C=U[5].description["@id"]+"")&&J(D,C),Z[0]&160&&N!==(N=U[29]["@id"]+"")&&J(S,N),Z[0]&32&&R!==(R=U[5].description["@id"]+"")&&J(T,R),Z[0]&40&&O!==(O=U[3](U[5].description["@id"])+"")&&J(w,O),Z[0]&160&&Y!==(Y=U[29]["@id"]+"")&&J(ne,Y),Z[0]&176&&Q!==(Q=U[4](U[29])+"")&&J(H,Q)},d(U){U&&(o(r),o(l),o(s),o(n),o(f),o(h),o(_),o(m),o(u),o(E),o(P),o(I),o(D),o(p),o(S),o(F),o(T),o(b),o(w),o(A),o(ne),o(te),o(H),o(V))}}}function Ia(a){let e,r=Ie(a[7].i(a[5].description["@id"])[a[26]["@id"]]),l=[];for(let t=0;t<r.length;t+=1)l[t]=Ra(ga(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&184){r=Ie(t[7].i(t[5].description["@id"])[t[26]["@id"]]);let n;for(n=0;n<r.length;n+=1){const i=ga(t,r,n);l[n]?l[n].p(i,s):(l[n]=Ra(i),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&o(e),Xe(l,t)}}}function bu(a){let e,r,l=a[7].i(a[5].description["@id"])&&a[7].i(a[5].description["@id"])["d3f:outbound"],t,s=Ie(a[7].graph.filter(a[18])),n=[];for(let f=0;f<s.length;f+=1)n[f]=Ca(ba(a,s,f));let i=l&&Na(a);return{c(){e=k(`graph LR;
          `);for(let f=0;f<n.length;f+=1)n[f].c();r=x(),i&&i.c(),t=Ee()},l(f){e=y(f,`graph LR;
          `);for(let h=0;h<n.length;h+=1)n[h].l(f);r=ee(f),i&&i.l(f),t=Ee()},m(f,h){v(f,e,h);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(f,h);v(f,r,h),i&&i.m(f,h),v(f,t,h)},p(f,h){if(h[0]&430){s=Ie(f[7].graph.filter(f[18]));let d;for(d=0;d<s.length;d+=1){const _=ba(f,s,d);n[d]?n[d].p(_,h):(n[d]=Ca(_),n[d].c(),n[d].m(r.parentNode,r))}for(;d<n.length;d+=1)n[d].d(1);n.length=s.length}h[0]&160&&(l=f[7].i(f[5].description["@id"])&&f[7].i(f[5].description["@id"])["d3f:outbound"]),l?i?i.p(f,h):(i=Na(f),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},d(f){f&&(o(e),o(r),o(t)),Xe(n,f),i&&i.d(f)}}}function Eu(a){let e,r,l,t,s,n,i,f,h,d,_,m,c,u=a[8].length+"",E,g,P,I,C;const D=a[16].header,p=ct(D,a,a[22],wa),N=a[16].default,S=ct(N,a,a[22],null),F=[gu,pu,mu],R=[];function T(b,O){return b[5]?b[7].graph.length>0?1:2:0}return i=T(a),f=R[i]=F[i](a),{c(){e=B("dialog"),r=B("div"),p&&p.c(),l=k(`
      Select Sensors
      `),S&&S.c(),t=x(),s=B("hr"),n=x(),f.c(),h=x(),d=B("hr"),_=x(),m=B("button"),c=k("Insert ("),E=k(u),g=k(")"),this.h()},l(b){e=$(b,"DIALOG",{class:!0});var O=ve(e);r=$(O,"DIV",{class:!0});var w=ve(r);p&&p.l(w),l=y(w,`
      Select Sensors
      `),S&&S.l(w),t=ee(w),s=$(w,"HR",{}),n=ee(w),f.l(w),h=ee(w),d=$(w,"HR",{}),_=ee(w),m=$(w,"BUTTON",{class:!0});var A=ve(m);c=y(A,"Insert ("),E=y(A,u),g=y(A,")"),A.forEach(o),w.forEach(o),O.forEach(o),this.h()},h(){m.autofocus=!0,X(m,"class","svelte-akhii9"),X(r,"class","svelte-akhii9"),X(e,"class","svelte-akhii9")},m(b,O){v(b,e,O),q(e,r),p&&p.m(r,null),q(r,l),S&&S.m(r,null),q(r,t),q(r,s),q(r,n),R[i].m(r,null),q(r,h),q(r,d),q(r,_),q(r,m),q(m,c),q(m,E),q(m,g),a[19](e),P=!0,m.focus(),I||(C=[ge(m,"click",a[11]),ge(r,"click",Ct(a[17])),ge(e,"close",a[20]),ge(e,"click",qt(a[21]))],I=!0)},p(b,O){p&&p.p&&(!P||O[0]&4194304)&&dt(p,D,b,b[22],P?_t(D,b[22],O,vu):ht(b[22]),wa),S&&S.p&&(!P||O[0]&4194304)&&dt(S,N,b,b[22],P?_t(N,b[22],O,null):ht(b[22]),null);let w=i;i=T(b),i===w?R[i].p(b,O):(Pt(),_e(R[w],1,1,()=>{R[w]=null}),wt(),f=R[i],f?f.p(b,O):(f=R[i]=F[i](b),f.c()),ue(f,1),f.m(r,h)),(!P||O[0]&256)&&u!==(u=b[8].length+"")&&J(E,u)},i(b){P||(ue(p,b),ue(S,b),ue(f),P=!0)},o(b){_e(p,b),_e(S,b),_e(f),P=!1},d(b){b&&o(e),p&&p.d(b),S&&S.d(b),R[i].d(),a[19](null),I=!1,Et(C)}}}function Pu(a,e,r){let l,t,s,{$$slots:n={},$$scope:i}=e,{outbound_color:f="#fff4dd"}=e,{inbound_color:h="#fff4dd"}=e,{root_color:d="#fff4dd"}=e,{link_function:_=w=>`/dao/artifact/${w["@id"]}`}=e,{inbound_link_function:m=_}=e,{root_link_function:c=w=>`/dao/artifact/${w["@id"]}`}=e,{outbound_link_function:u=_}=e,{show_sensor_modal:E}=e,{parent_node:g}=e,{data:P}=e,I;const C=At();tt(a,C,w=>r(24,s=w));const D=Ft();tt(a,D,w=>r(23,t=w));let p;function N(w){l.includes(w)?r(8,l=l.filter(A=>A!==w)):l.push(w),r(8,l),r(8,l)}window.da_to_sensor_callback=function(w){N(w)};function S(){let w=0,A=200,Y=100;for(const ne of l){let te=P.sensors["@graph"].find(Q=>Q["@id"]==ne);te&&(Ut(C,D,g,"artifactSelectorNode",te["rdfs:label"],te["@id"],g.data.sequence,g.position.x+w*A,g.position.y+Y,182,63,te["d3f:outbound"][0]["@id"].replace("d3f:",""),!1),w+=1)}C.set(s),D.set(t),I&&I.close(),r(8,l=[])}function F(w){Nt.call(this,a,w)}const R=w=>w["@id"]!=P.description["@id"];function T(w){Ye[w?"unshift":"push"](()=>{I=w,r(6,I)})}const b=()=>r(0,E=!1),O=()=>{I.close(),r(8,l=[])};return a.$$set=w=>{"outbound_color"in w&&r(12,f=w.outbound_color),"inbound_color"in w&&r(1,h=w.inbound_color),"root_color"in w&&r(2,d=w.root_color),"link_function"in w&&r(13,_=w.link_function),"inbound_link_function"in w&&r(14,m=w.inbound_link_function),"root_link_function"in w&&r(3,c=w.root_link_function),"outbound_link_function"in w&&r(4,u=w.outbound_link_function),"show_sensor_modal"in w&&r(0,E=w.show_sensor_modal),"parent_node"in w&&r(15,g=w.parent_node),"data"in w&&r(5,P=w.data),"$$scope"in w&&r(22,i=w.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&65&&E&&I&&I.showModal(),a.$$.dirty[0]&65&&!E&&I&&I.close(),a.$$.dirty[0]&32&&P&&P.sensors&&r(7,p=new vr(P.sensors,{index:!0}))},r(8,l=[]),[E,h,d,c,u,P,I,p,l,C,D,S,f,_,m,g,n,F,R,T,b,O,i]}class wu extends ft{constructor(e){super(),ut(this,e,Pu,Eu,ot,{outbound_color:12,inbound_color:1,root_color:2,link_function:13,inbound_link_function:14,root_link_function:3,outbound_link_function:4,show_sensor_modal:0,parent_node:15,data:5},null,[-1,-1])}}function ku(a){let e,r="attack the node",l,t,s,n,i,f="defend the node",h,d,_,m,c,u="add weaknesses",E,g,P,I,C,D="add sensors",p,N,S,F,R,T="explode all",b,O,w="explode parts",A,Y,ne="explode control",te,Q,H,V,U,Z;function L(W){a[11](W)}let K={parent_node:a[0],data:a[1]};a[7]!==void 0&&(K.show_attack_modal=a[7]),t=new Bf({props:K}),Ye.push(()=>yt(t,"show_attack_modal",L));function ye(W){a[13](W)}let Pe={parent_node:a[0],data:a[1]};a[6]!==void 0&&(Pe.show_defend_modal=a[6]),d=new Wf({props:Pe}),Ye.push(()=>yt(d,"show_defend_modal",ye));function ae(W){a[15](W)}let pe={parent_node:a[0],inbound_color:"#f9d999",inbound_link_function:a[9],data:a[1]};a[5]!==void 0&&(pe.show_weakness_modal=a[5]),g=new nu({props:pe}),Ye.push(()=>yt(g,"show_weakness_modal",ae));function fe(W){a[17](W)}let me={parent_node:a[0],inbound_color:"#f9d999",data:a[1]};a[3]!==void 0&&(me.show_sensor_modal=a[3]),N=new wu({props:me}),Ye.push(()=>yt(N,"show_sensor_modal",fe));function De(W){a[21](W)}let Ue={neighbor_filter_labels:a[2],parent_node:a[0],empty_message:"has no related parts in this release.",inbound_color:"#f9d999",inbound_link_function:a[9],data:a[1]};return a[4]!==void 0&&(Ue.show_neighbors_modal=a[4]),Q=new _u({props:Ue}),Ye.push(()=>yt(Q,"show_neighbors_modal",De)),{c(){e=B("button"),e.textContent=r,l=x(),Te(t.$$.fragment),n=x(),i=B("button"),i.textContent=f,h=x(),Te(d.$$.fragment),m=x(),c=B("button"),c.textContent=u,E=x(),Te(g.$$.fragment),I=x(),C=B("button"),C.textContent=D,p=x(),Te(N.$$.fragment),F=x(),R=B("button"),R.textContent=T,b=x(),O=B("button"),O.textContent=w,A=x(),Y=B("button"),Y.textContent=ne,te=x(),Te(Q.$$.fragment),this.h()},l(W){e=$(W,"BUTTON",{class:!0,"data-svelte-h":!0}),we(e)!=="svelte-1dkmztx"&&(e.textContent=r),l=ee(W),Ae(t.$$.fragment,W),n=ee(W),i=$(W,"BUTTON",{class:!0,"data-svelte-h":!0}),we(i)!=="svelte-22hxkb"&&(i.textContent=f),h=ee(W),Ae(d.$$.fragment,W),m=ee(W),c=$(W,"BUTTON",{class:!0,"data-svelte-h":!0}),we(c)!=="svelte-urtcr7"&&(c.textContent=u),E=ee(W),Ae(g.$$.fragment,W),I=ee(W),C=$(W,"BUTTON",{class:!0,"data-svelte-h":!0}),we(C)!=="svelte-1xhii68"&&(C.textContent=D),p=ee(W),Ae(N.$$.fragment,W),F=ee(W),R=$(W,"BUTTON",{class:!0,"data-svelte-h":!0}),we(R)!=="svelte-1vn2qvf"&&(R.textContent=T),b=ee(W),O=$(W,"BUTTON",{class:!0,"data-svelte-h":!0}),we(O)!=="svelte-1hluius"&&(O.textContent=w),A=ee(W),Y=$(W,"BUTTON",{class:!0,"data-svelte-h":!0}),we(Y)!=="svelte-183zqvn"&&(Y.textContent=ne),te=ee(W),Ae(Q.$$.fragment,W),this.h()},h(){X(e,"class","svelte-5he3i1"),X(i,"class","svelte-5he3i1"),X(c,"class","svelte-5he3i1"),X(C,"class","svelte-5he3i1"),X(R,"class","svelte-5he3i1"),X(O,"class","svelte-5he3i1"),X(Y,"class","svelte-5he3i1")},m(W,j){v(W,e,j),v(W,l,j),Fe(t,W,j),v(W,n,j),v(W,i,j),v(W,h,j),Fe(d,W,j),v(W,m,j),v(W,c,j),v(W,E,j),Fe(g,W,j),v(W,I,j),v(W,C,j),v(W,p,j),Fe(N,W,j),v(W,F,j),v(W,R,j),v(W,b,j),v(W,O,j),v(W,A,j),v(W,Y,j),v(W,te,j),Fe(Q,W,j),V=!0,U||(Z=[ge(e,"click",a[10]),ge(i,"click",a[12]),ge(c,"click",a[14]),ge(C,"click",a[16]),ge(R,"click",a[18]),ge(O,"click",a[19]),ge(Y,"click",a[20])],U=!0)},p(W,[j]){const re={};j&1&&(re.parent_node=W[0]),j&2&&(re.data=W[1]),!s&&j&128&&(s=!0,re.show_attack_modal=W[7],kt(()=>s=!1)),t.$set(re);const je={};j&1&&(je.parent_node=W[0]),j&2&&(je.data=W[1]),!_&&j&64&&(_=!0,je.show_defend_modal=W[6],kt(()=>_=!1)),d.$set(je);const Ke={};j&1&&(Ke.parent_node=W[0]),j&2&&(Ke.data=W[1]),!P&&j&32&&(P=!0,Ke.show_weakness_modal=W[5],kt(()=>P=!1)),g.$set(Ke);const at={};j&1&&(at.parent_node=W[0]),j&2&&(at.data=W[1]),!S&&j&8&&(S=!0,at.show_sensor_modal=W[3],kt(()=>S=!1)),N.$set(at);const He={};j&4&&(He.neighbor_filter_labels=W[2]),j&1&&(He.parent_node=W[0]),j&2&&(He.data=W[1]),!H&&j&16&&(H=!0,He.show_neighbors_modal=W[4],kt(()=>H=!1)),Q.$set(He)},i(W){V||(ue(t.$$.fragment,W),ue(d.$$.fragment,W),ue(g.$$.fragment,W),ue(N.$$.fragment,W),ue(Q.$$.fragment,W),V=!0)},o(W){_e(t.$$.fragment,W),_e(d.$$.fragment,W),_e(g.$$.fragment,W),_e(N.$$.fragment,W),_e(Q.$$.fragment,W),V=!1},d(W){W&&(o(e),o(l),o(n),o(i),o(h),o(m),o(c),o(E),o(I),o(C),o(p),o(F),o(R),o(b),o(O),o(A),o(Y),o(te)),Le(t,W),Le(d,W),Le(g,W),Le(N,W),Le(Q,W),U=!1,Et(Z)}}}function yu(a,e,r){let l,t,s,n,i;var f=this&&this.__awaiter||function(b,O,w,A){function Y(ne){return ne instanceof w?ne:new w(function(te){te(ne)})}return new(w||(w=Promise))(function(ne,te){function Q(U){try{V(A.next(U))}catch(Z){te(Z)}}function H(U){try{V(A.throw(U))}catch(Z){te(Z)}}function V(U){U.done?ne(U.value):Y(U.value).then(Q,H)}V((A=A.apply(b,O||[])).next())})};let{node:h}=e,d,_=[];function m(b){alert(b),r(7,l=!1),r(6,t=!1),r(5,s=!1),r(4,n=!1),r(3,i=!1)}function c(b){return f(this,void 0,void 0,function*(){if(b.data.d3f_class&&b.data.d3f_class.includes("d3f:")){const O=b.data.d3f_class,w=yield fetch(`/api/dao/artifact/${O}.json`),A=yield w.json();if(w.status!=200||A.description["@graph"].length==0)m(`D3FEND Artifact: "${O.replace("d3f:","")}" not found in ontology`);else return A}else m("Please specify a D3FEND Class for this node to enable inferential mapping")})}function u(b){return qn(b["d3f:cwe-id"][0])}const E=async()=>{r(1,d=null),r(7,l=!0),r(1,d=await c(h))};function g(b){l=b,r(7,l)}const P=async()=>{r(1,d=null),r(6,t=!0),r(1,d=await c(h))};function I(b){t=b,r(6,t)}const C=async()=>{r(1,d=null),r(5,s=!0),r(1,d=await c(h))};function D(b){s=b,r(5,s)}const p=async()=>{r(1,d=null),r(3,i=!0),r(1,d=await c(h))};function N(b){i=b,r(3,i)}const S=async()=>{r(1,d=null),r(4,n=!0),r(2,_=[]),r(1,d=await c(h))},F=async()=>{r(1,d=null),r(4,n=!0),r(2,_=["d3f:contains","d3f:may-contains"]),r(1,d=await c(h))},R=async()=>{r(1,d=null),r(4,n=!0),r(2,_=["d3f:runs","d3f:loads","d3f:manages"]),r(1,d=await c(h))};function T(b){n=b,r(4,n)}return a.$$set=b=>{"node"in b&&r(0,h=b.node)},r(7,l=!1),r(6,t=!1),r(5,s=!1),r(4,n=!1),r(3,i=!1),[h,d,_,i,n,s,t,l,c,u,E,g,P,I,C,D,p,N,S,F,R,T]}class Su extends ft{constructor(e){super(),ut(this,e,yu,ku,ot,{node:0})}}function Oa(a,e,r){const l=a.slice();return l[18]=e[r],l[20]=r,l}const Du=a=>({}),Ta=a=>({});function Cu(a){let e;return{c(){e=k("No related defensive techniques in this release.")},l(r){e=y(r,"No related defensive techniques in this release.")},m(r,l){v(r,e,l)},p:ke,i:ke,o:ke,d(r){r&&o(e)}}}function Nu(a){let e,r;return e=new zt({props:{$$slots:{default:[Tu]},$$scope:{ctx:a}}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t&16406&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(ue(e.$$.fragment,l),r=!0)},o(l){_e(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function Ru(a){let e,r="Loading...";return{c(){e=B("div"),e.textContent=r},l(l){e=$(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:ke,i:ke,o:ke,d(l){l&&o(e)}}}function Iu(a){let e,r=ce(a[18].def_artifact.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" ArtifactNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," ArtifactNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&4&&r!==(r=ce(s[18].def_artifact.value)+"")&&J(l,r)},d(s){s&&(o(e),o(l),o(t))}}}function Ou(a){let e,r=ce(a[18].def_artifact.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" SelectedArtifactNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," SelectedArtifactNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&4&&r!==(r=ce(s[18].def_artifact.value)+"")&&J(l,r)},d(s){s&&(o(e),o(l),o(t))}}}function Aa(a){let e=a[1].data.d3f_class+"",r,l,t=a[2].description["@graph"][0]["rdfs:label"]+"",s,n,i="-->",f,h,d=a[18].def_artifact_rel_label.value+"",_,m,c=ce(a[18].def_artifact.value)+"",u,E,g=a[18].def_artifact_label.value+"",P,I,C=a[1].data.d3f_class+"",D,p,N,S,F=ce(a[18].def_artifact.value)+"",R,T,b=ce(a[18].def_artifact.value)+"",O,w,A=`
`,Y;function ne(H,V){return V&20&&(N=null),N==null&&(N=!!H[4].includes(ce(H[18].def_artifact.value))),N?Ou:Iu}let te=ne(a,-1),Q=te(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(i),h=k(' |"'),_=k(d),m=k('" | '),u=k(c),E=k('["'),P=k(g),I=k(`"];
          class `),D=k(C),p=k(` DefensiveTechniqueNode;
          `),Q.c(),S=k(`
          click `),R=k(F),T=k(` href "javascript:def_to_art_callback('`),O=k(b),w=k(`')";`),Y=k(A)},l(H){r=y(H,e),l=y(H,'["'),s=y(H,t),n=y(H,'"] '),f=y(H,i),h=y(H,' |"'),_=y(H,d),m=y(H,'" | '),u=y(H,c),E=y(H,'["'),P=y(H,g),I=y(H,`"];
          class `),D=y(H,C),p=y(H,` DefensiveTechniqueNode;
          `),Q.l(H),S=y(H,`
          click `),R=y(H,F),T=y(H,` href "javascript:def_to_art_callback('`),O=y(H,b),w=y(H,`')";`),Y=y(H,A)},m(H,V){v(H,r,V),v(H,l,V),v(H,s,V),v(H,n,V),v(H,f,V),v(H,h,V),v(H,_,V),v(H,m,V),v(H,u,V),v(H,E,V),v(H,P,V),v(H,I,V),v(H,D,V),v(H,p,V),Q.m(H,V),v(H,S,V),v(H,R,V),v(H,T,V),v(H,O,V),v(H,w,V),v(H,Y,V)},p(H,V){V&2&&e!==(e=H[1].data.d3f_class+"")&&J(r,e),V&4&&t!==(t=H[2].description["@graph"][0]["rdfs:label"]+"")&&J(s,t),V&4&&d!==(d=H[18].def_artifact_rel_label.value+"")&&J(_,d),V&4&&c!==(c=ce(H[18].def_artifact.value)+"")&&J(u,c),V&4&&g!==(g=H[18].def_artifact_label.value+"")&&J(P,g),V&2&&C!==(C=H[1].data.d3f_class+"")&&J(D,C),te===(te=ne(H,V))&&Q?Q.p(H,V):(Q.d(1),Q=te(H),Q&&(Q.c(),Q.m(S.parentNode,S))),V&4&&F!==(F=ce(H[18].def_artifact.value)+"")&&J(R,F),V&4&&b!==(b=ce(H[18].def_artifact.value)+"")&&J(O,b)},d(H){H&&(o(r),o(l),o(s),o(n),o(f),o(h),o(_),o(m),o(u),o(E),o(P),o(I),o(D),o(p),o(S),o(R),o(T),o(O),o(w),o(Y)),Q.d(H)}}}function Tu(a){let e,r,l=Ie(a[2].digital_artifacts.results.bindings),t=[];for(let s=0;s<l.length;s+=1)t[s]=Aa(Oa(a,l,s));return{c(){e=k(`graph LR
        `);for(let s=0;s<t.length;s+=1)t[s].c();r=Ee()},l(s){e=y(s,`graph LR
        `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=Ee()},m(s,n){v(s,e,n);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(s,n);v(s,r,n)},p(s,n){if(n&22){l=Ie(s[2].digital_artifacts.results.bindings);let i;for(i=0;i<l.length;i+=1){const f=Oa(s,l,i);t[i]?t[i].p(f,n):(t[i]=Aa(f),t[i].c(),t[i].m(r.parentNode,r))}for(;i<t.length;i+=1)t[i].d(1);t.length=l.length}},d(s){s&&(o(e),o(r)),Xe(t,s)}}}function Au(a){let e,r,l,t,s,n,i,f,h,d,_,m,c,u=a[4].length+"",E,g,P,I,C;const D=a[9].header,p=ct(D,a,a[14],Ta),N=a[9].default,S=ct(N,a,a[14],null),F=[Ru,Nu,Cu],R=[];function T(b,O){return b[2]?b[2].digital_artifacts.results.bindings.length>0?1:2:0}return i=T(a),f=R[i]=F[i](a),{c(){e=B("dialog"),r=B("div"),p&&p.c(),l=k(`
    Select Related Artifacts To Insert
    `),S&&S.c(),t=x(),s=B("hr"),n=x(),f.c(),h=x(),d=B("hr"),_=x(),m=B("button"),c=k("Insert ("),E=k(u),g=k(")"),this.h()},l(b){e=$(b,"DIALOG",{class:!0});var O=ve(e);r=$(O,"DIV",{class:!0});var w=ve(r);p&&p.l(w),l=y(w,`
    Select Related Artifacts To Insert
    `),S&&S.l(w),t=ee(w),s=$(w,"HR",{}),n=ee(w),f.l(w),h=ee(w),d=$(w,"HR",{}),_=ee(w),m=$(w,"BUTTON",{class:!0});var A=ve(m);c=y(A,"Insert ("),E=y(A,u),g=y(A,")"),A.forEach(o),w.forEach(o),O.forEach(o),this.h()},h(){m.autofocus=!0,X(m,"class","svelte-x0618k"),X(r,"class","svelte-x0618k"),X(e,"class","svelte-x0618k")},m(b,O){v(b,e,O),q(e,r),p&&p.m(r,null),q(r,l),S&&S.m(r,null),q(r,t),q(r,s),q(r,n),R[i].m(r,null),q(r,h),q(r,d),q(r,_),q(r,m),q(m,c),q(m,E),q(m,g),a[11](e),P=!0,m.focus(),I||(C=[ge(m,"click",a[7]),ge(r,"click",Ct(a[10])),ge(e,"close",a[12]),ge(e,"click",qt(a[13]))],I=!0)},p(b,[O]){p&&p.p&&(!P||O&16384)&&dt(p,D,b,b[14],P?_t(D,b[14],O,Du):ht(b[14]),Ta),S&&S.p&&(!P||O&16384)&&dt(S,N,b,b[14],P?_t(N,b[14],O,null):ht(b[14]),null);let w=i;i=T(b),i===w?R[i].p(b,O):(Pt(),_e(R[w],1,1,()=>{R[w]=null}),wt(),f=R[i],f?f.p(b,O):(f=R[i]=F[i](b),f.c()),ue(f,1),f.m(r,h)),(!P||O&16)&&u!==(u=b[4].length+"")&&J(E,u)},i(b){P||(ue(p,b),ue(S,b),ue(f),P=!0)},o(b){_e(p,b),_e(S,b),_e(f),P=!1},d(b){b&&o(e),p&&p.d(b),S&&S.d(b),R[i].d(),a[11](null),I=!1,Et(C)}}}function Fu(a,e,r){let l,t,s,{$$slots:n={},$$scope:i}=e,{show_artifacts_modal:f}=e,{parent_node:h}=e,{data:d}=e,_;const m=At();tt(a,m,p=>r(16,s=p));const c=Ft();tt(a,c,p=>r(15,t=p));let u=new Ht;function E(p){l.includes(p)?r(4,l=l.filter(N=>N!==p)):l.push(p),r(4,l)}window.def_to_art_callback=function(p){E(p)};function g(){let p=0,N=200,S=100;for(const F of l){let R=d.digital_artifacts.results.bindings.find(T=>ce(T.def_artifact.value)==F);R&&(Ut(m,c,h,"artifactSelectorNode",R.def_artifact_label.value,"d3f:"+ce(R.def_artifact.value),h.data.sequence,h.position.x+p*N,h.position.y+S,182,82,R.def_artifact_rel_label.value,!0),p+=1)}m.set(s),c.set(t),_&&_.close(),r(4,l=[])}function P(p){Nt.call(this,a,p)}function I(p){Ye[p?"unshift":"push"](()=>{_=p,r(3,_)})}const C=()=>r(0,f=!1),D=()=>{_.close(),r(4,l=[])};return a.$$set=p=>{"show_artifacts_modal"in p&&r(0,f=p.show_artifacts_modal),"parent_node"in p&&r(1,h=p.parent_node),"data"in p&&r(2,d=p.data),"$$scope"in p&&r(14,i=p.$$scope)},a.$$.update=()=>{a.$$.dirty&9&&f&&_&&(_.showModal(),r(8,u=new Ht)),a.$$.dirty&265&&!f&&_&&(_.close(),u.reset())},r(4,l=[]),[f,h,d,_,l,m,c,g,u,n,P,I,C,D,i]}class Lu extends ft{constructor(e){super(),ut(this,e,Fu,Au,ot,{show_artifacts_modal:0,parent_node:1,data:2})}}function Fa(a,e,r){const l=a.slice();return l[18]=e[r],l}const ju=a=>({}),La=a=>({});function qu(a){let e;return{c(){e=k("No related offensive techniques in this release.")},l(r){e=y(r,"No related offensive techniques in this release.")},m(r,l){v(r,e,l)},p:ke,i:ke,o:ke,d(r){r&&o(e)}}}function zu(a){let e,r;return e=new zt({props:{$$slots:{default:[Bu]},$$scope:{ctx:a}}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t&16394&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(ue(e.$$.fragment,l),r=!0)},o(l){_e(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function Uu(a){let e,r="Loading...";return{c(){e=B("div"),e.textContent=r},l(l){e=$(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:ke,i:ke,o:ke,d(l){l&&o(e)}}}function ja(a){let e=ce(a[18].def_tech.value).replace(/ |\./g,"")+"",r,l,t=a[18].def_tech_label.value+"",s,n,i="-->",f,h,d="May "+a[18].def_tactic_label.value.replace(/ /g,""),_,m,c=a[18].off_tech_id.value.replace(/ |\./g,"")+"",u,E,g=a[18].off_tech_label.value+"",P,I,C,D,p=ce(a[18].def_tech.value)+"",N,S,F=a[18].off_tech_id.value.replace(/ |\./g,"")+"",R,T,b=a[18].off_tech_id.value.replace(/ |\./g,"")+"",O,w,A=ce(a[18].def_tech.value)+"",Y,ne,te=ce(a[18].def_tech.value)+"",Q,H;function V(L,K){return K&10&&(C=null),C==null&&(C=!!L[3].includes(L[18].off_tech_id.value.replace(/ |\./g,""))),C?Mu:Vu}let U=V(a,-1),Z=U(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(i),h=k(" | "),_=k(d),m=k("| "),u=k(c),E=k('["'),P=k(g),I=k(`"];
            `),Z.c(),D=k(`
            class `),N=k(p),S=k(" CountermeasureNode; click "),R=k(F),T=k(` href "javascript:def_to_off_callback('`),O=k(b),w=k(`')"; click `),Y=k(A),ne=k(' href "/technique/d3f:'),Q=k(te),H=k('";')},l(L){r=y(L,e),l=y(L,'["'),s=y(L,t),n=y(L,'"] '),f=y(L,i),h=y(L," | "),_=y(L,d),m=y(L,"| "),u=y(L,c),E=y(L,'["'),P=y(L,g),I=y(L,`"];
            `),Z.l(L),D=y(L,`
            class `),N=y(L,p),S=y(L," CountermeasureNode; click "),R=y(L,F),T=y(L,` href "javascript:def_to_off_callback('`),O=y(L,b),w=y(L,`')"; click `),Y=y(L,A),ne=y(L,' href "/technique/d3f:'),Q=y(L,te),H=y(L,'";')},m(L,K){v(L,r,K),v(L,l,K),v(L,s,K),v(L,n,K),v(L,f,K),v(L,h,K),v(L,_,K),v(L,m,K),v(L,u,K),v(L,E,K),v(L,P,K),v(L,I,K),Z.m(L,K),v(L,D,K),v(L,N,K),v(L,S,K),v(L,R,K),v(L,T,K),v(L,O,K),v(L,w,K),v(L,Y,K),v(L,ne,K),v(L,Q,K),v(L,H,K)},p(L,K){K&2&&e!==(e=ce(L[18].def_tech.value).replace(/ |\./g,"")+"")&&J(r,e),K&2&&t!==(t=L[18].def_tech_label.value+"")&&J(s,t),K&2&&d!==(d="May "+L[18].def_tactic_label.value.replace(/ /g,""))&&J(_,d),K&2&&c!==(c=L[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(u,c),K&2&&g!==(g=L[18].off_tech_label.value+"")&&J(P,g),U===(U=V(L,K))&&Z?Z.p(L,K):(Z.d(1),Z=U(L),Z&&(Z.c(),Z.m(D.parentNode,D))),K&2&&p!==(p=ce(L[18].def_tech.value)+"")&&J(N,p),K&2&&F!==(F=L[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(R,F),K&2&&b!==(b=L[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(O,b),K&2&&A!==(A=ce(L[18].def_tech.value)+"")&&J(Y,A),K&2&&te!==(te=ce(L[18].def_tech.value)+"")&&J(Q,te)},d(L){L&&(o(r),o(l),o(s),o(n),o(f),o(h),o(_),o(m),o(u),o(E),o(P),o(I),o(D),o(N),o(S),o(R),o(T),o(O),o(w),o(Y),o(ne),o(Q),o(H)),Z.d(L)}}}function Vu(a){let e,r=a[18].off_tech_id.value.replace(/ |\./g,"")+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" OffensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," OffensiveTechniqueNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(l,r)},d(s){s&&(o(e),o(l),o(t))}}}function Mu(a){let e,r=a[18].off_tech_id.value.replace(/ |\./g,"")+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" SelectedOffensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," SelectedOffensiveTechniqueNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(l,r)},d(s){s&&(o(e),o(l),o(t))}}}function qa(a){let e=a[6].edge_is_unique(a[18].def_tech_label.value,a[18].off_artifact_rel_label.value,a[18].off_artifact_label.value),r,l=e&&ja(a);return{c(){l&&l.c(),r=Ee()},l(t){l&&l.l(t),r=Ee()},m(t,s){l&&l.m(t,s),v(t,r,s)},p(t,s){s&2&&(e=t[6].edge_is_unique(t[18].def_tech_label.value,t[18].off_artifact_rel_label.value,t[18].off_artifact_label.value)),e?l?l.p(t,s):(l=ja(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&o(r),l&&l.d(t)}}}function Bu(a){let e,r,l=Ie(a[1].def_to_off.results.bindings),t=[];for(let s=0;s<l.length;s+=1)t[s]=qa(Fa(a,l,s));return{c(){e=k(`graph LR;
        `);for(let s=0;s<t.length;s+=1)t[s].c();r=Ee()},l(s){e=y(s,`graph LR;
        `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=Ee()},m(s,n){v(s,e,n);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(s,n);v(s,r,n)},p(s,n){if(n&74){l=Ie(s[1].def_to_off.results.bindings);let i;for(i=0;i<l.length;i+=1){const f=Fa(s,l,i);t[i]?t[i].p(f,n):(t[i]=qa(f),t[i].c(),t[i].m(r.parentNode,r))}for(;i<t.length;i+=1)t[i].d(1);t.length=l.length}},d(s){s&&(o(e),o(r)),Xe(t,s)}}}function $u(a){let e,r,l,t,s,n,i,f,h,d,_,m,c,u=a[3].length+"",E,g,P,I,C;const D=a[9].header,p=ct(D,a,a[14],La),N=a[9].default,S=ct(N,a,a[14],null),F=[Uu,zu,qu],R=[];function T(b,O){return b[1]?b[1].def_to_off.results.bindings.length>0?1:2:0}return i=T(a),f=R[i]=F[i](a),{c(){e=B("dialog"),r=B("div"),p&&p.c(),l=k(`
    Select Attack Techniques
    `),S&&S.c(),t=x(),s=B("hr"),n=x(),f.c(),h=x(),d=B("hr"),_=x(),m=B("button"),c=k("Insert ("),E=k(u),g=k(")"),this.h()},l(b){e=$(b,"DIALOG",{class:!0});var O=ve(e);r=$(O,"DIV",{class:!0});var w=ve(r);p&&p.l(w),l=y(w,`
    Select Attack Techniques
    `),S&&S.l(w),t=ee(w),s=$(w,"HR",{}),n=ee(w),f.l(w),h=ee(w),d=$(w,"HR",{}),_=ee(w),m=$(w,"BUTTON",{class:!0});var A=ve(m);c=y(A,"Insert ("),E=y(A,u),g=y(A,")"),A.forEach(o),w.forEach(o),O.forEach(o),this.h()},h(){m.autofocus=!0,X(m,"class","svelte-1ai9hff"),X(r,"class","svelte-1ai9hff"),X(e,"class","svelte-1ai9hff")},m(b,O){v(b,e,O),q(e,r),p&&p.m(r,null),q(r,l),S&&S.m(r,null),q(r,t),q(r,s),q(r,n),R[i].m(r,null),q(r,h),q(r,d),q(r,_),q(r,m),q(m,c),q(m,E),q(m,g),a[11](e),P=!0,m.focus(),I||(C=[ge(m,"click",a[7]),ge(r,"click",Ct(a[10])),ge(e,"close",a[12]),ge(e,"click",qt(a[13]))],I=!0)},p(b,[O]){p&&p.p&&(!P||O&16384)&&dt(p,D,b,b[14],P?_t(D,b[14],O,ju):ht(b[14]),La),S&&S.p&&(!P||O&16384)&&dt(S,N,b,b[14],P?_t(N,b[14],O,null):ht(b[14]),null);let w=i;i=T(b),i===w?R[i].p(b,O):(Pt(),_e(R[w],1,1,()=>{R[w]=null}),wt(),f=R[i],f?f.p(b,O):(f=R[i]=F[i](b),f.c()),ue(f,1),f.m(r,h)),(!P||O&8)&&u!==(u=b[3].length+"")&&J(E,u)},i(b){P||(ue(p,b),ue(S,b),ue(f),P=!0)},o(b){_e(p,b),_e(S,b),_e(f),P=!1},d(b){b&&o(e),p&&p.d(b),S&&S.d(b),R[i].d(),a[11](null),I=!1,Et(C)}}}function Hu(a,e,r){let l,t,s,{$$slots:n={},$$scope:i}=e,{show_attack_modal:f}=e,{parent_node:h}=e,{data:d}=e,_;const m=At();tt(a,m,p=>r(16,s=p));const c=Ft();tt(a,c,p=>r(15,t=p));let u=new Ht;function E(p){l.includes(p)?r(3,l=l.filter(N=>N!==p)):l.push(p),r(3,l)}window.def_to_off_callback=function(p){E(p)};function g(){let p=0,N=200,S=100;for(const F of l){let R=d.def_to_off.results.bindings.find(T=>T.off_tech_id.value.replace(/ |\./g,"")==F);R&&(Ut(m,c,h,"attackSelectorNode",R.off_tech_label.value,"d3f:"+R.off_tech_id.value,h.data.sequence,h.position.x+p*N,h.position.y+S,182,63,"May "+R.def_tactic_label.value,!0),p+=1)}m.set(s),c.set(t),_&&_.close(),r(3,l=[])}function P(p){Nt.call(this,a,p)}function I(p){Ye[p?"unshift":"push"](()=>{_=p,r(2,_)})}const C=()=>r(0,f=!1),D=()=>{_.close(),r(3,l=[])};return a.$$set=p=>{"show_attack_modal"in p&&r(0,f=p.show_attack_modal),"parent_node"in p&&r(8,h=p.parent_node),"data"in p&&r(1,d=p.data),"$$scope"in p&&r(14,i=p.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&f&&_&&(_.showModal(),u.reset()),a.$$.dirty&5&&!f&&_&&(_.close(),u.reset())},r(3,l=[]),[f,d,_,l,m,c,u,g,h,n,P,I,C,D,i]}class Qu extends ft{constructor(e){super(),ut(this,e,Hu,$u,ot,{show_attack_modal:0,parent_node:8,data:1})}}function Gu(a){let e,r="artifacts",l,t,s,n,i,f="offensive techniques",h,d,_,m,c,u="weaknesses (coming soon)",E,g,P;function I(N){a[6](N)}let C={parent_node:a[0],data:a[1]};a[3]!==void 0&&(C.show_artifacts_modal=a[3]),t=new Lu({props:C}),Ye.push(()=>yt(t,"show_artifacts_modal",I));function D(N){a[8](N)}let p={parent_node:a[0],data:a[1]};return a[2]!==void 0&&(p.show_attack_modal=a[2]),d=new Qu({props:p}),Ye.push(()=>yt(d,"show_attack_modal",D)),{c(){e=B("button"),e.textContent=r,l=x(),Te(t.$$.fragment),n=x(),i=B("button"),i.textContent=f,h=x(),Te(d.$$.fragment),m=x(),c=B("button"),c.textContent=u,this.h()},l(N){e=$(N,"BUTTON",{class:!0,"data-svelte-h":!0}),we(e)!=="svelte-isgkpy"&&(e.textContent=r),l=ee(N),Ae(t.$$.fragment,N),n=ee(N),i=$(N,"BUTTON",{class:!0,"data-svelte-h":!0}),we(i)!=="svelte-17h5zge"&&(i.textContent=f),h=ee(N),Ae(d.$$.fragment,N),m=ee(N),c=$(N,"BUTTON",{class:!0,"data-svelte-h":!0}),we(c)!=="svelte-ivhbdc"&&(c.textContent=u),this.h()},h(){X(e,"class","svelte-1x5dcdh"),X(i,"class","svelte-1x5dcdh"),c.disabled=!0,X(c,"class","svelte-1x5dcdh")},m(N,S){v(N,e,S),v(N,l,S),Fe(t,N,S),v(N,n,S),v(N,i,S),v(N,h,S),Fe(d,N,S),v(N,m,S),v(N,c,S),E=!0,g||(P=[ge(e,"click",a[5]),ge(i,"click",a[7])],g=!0)},p(N,[S]){const F={};S&1&&(F.parent_node=N[0]),S&2&&(F.data=N[1]),!s&&S&8&&(s=!0,F.show_artifacts_modal=N[3],kt(()=>s=!1)),t.$set(F);const R={};S&1&&(R.parent_node=N[0]),S&2&&(R.data=N[1]),!_&&S&4&&(_=!0,R.show_attack_modal=N[2],kt(()=>_=!1)),d.$set(R)},i(N){E||(ue(t.$$.fragment,N),ue(d.$$.fragment,N),E=!0)},o(N){_e(t.$$.fragment,N),_e(d.$$.fragment,N),E=!1},d(N){N&&(o(e),o(l),o(n),o(i),o(h),o(m),o(c)),Le(t,N),Le(d,N),g=!1,Et(P)}}}function Ku(a,e,r){let l,t;var s=this&&this.__awaiter||function(u,E,g,P){function I(C){return C instanceof g?C:new g(function(D){D(C)})}return new(g||(g=Promise))(function(C,D){function p(F){try{S(P.next(F))}catch(R){D(R)}}function N(F){try{S(P.throw(F))}catch(R){D(R)}}function S(F){F.done?C(F.value):I(F.value).then(p,N)}S((P=P.apply(u,E||[])).next())})};let{node:n}=e,i;function f(u){alert(u),r(3,l=!1),r(2,t=!1)}function h(u){return s(this,void 0,void 0,function*(){if(u.data.d3f_class&&u.data.d3f_class.includes("d3f:")){const E=u.data.d3f_class,g=yield fetch(`/api/technique/${E}.json`),P=yield g.json();if(g.status!=200||P.description["@graph"].length==0)f(`D3FEND Technique: "${E.replace("d3f:","")}" not found in ontology`);else return P}else f("Please specify a D3FEND Class for this node to enable inferential mapping")})}const d=async()=>{r(1,i=null),r(3,l=!0),r(1,i=await h(n))};function _(u){l=u,r(3,l)}const m=async()=>{r(1,i=null),r(2,t=!0),r(1,i=await h(n))};function c(u){t=u,r(2,t)}return a.$$set=u=>{"node"in u&&r(0,n=u.node)},r(3,l=!1),r(2,t=!1),[n,i,t,l,h,d,_,m,c]}class Ju extends ft{constructor(e){super(),ut(this,e,Ku,Gu,ot,{node:0})}}function za(a,e,r){const l=a.slice();return l[18]=e[r],l}const Yu=a=>({}),Ua=a=>({});function Xu(a){let e;return{c(){e=k("No related artifacts in this release.")},l(r){e=y(r,"No related artifacts in this release.")},m(r,l){v(r,e,l)},p:ke,i:ke,o:ke,d(r){r&&o(e)}}}function Zu(a){let e,r;return e=new zt({props:{$$slots:{default:[tc]},$$scope:{ctx:a}}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t&16394&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(ue(e.$$.fragment,l),r=!0)},o(l){_e(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function Wu(a){let e,r="Loading...";return{c(){e=B("div"),e.textContent=r},l(l){e=$(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:ke,i:ke,o:ke,d(l){l&&o(e)}}}function Va(a){let e=a[18].off_tech_id.value.replace(/ |\./g,"")+"",r,l,t=a[18].off_tech_label.value+"",s,n,i="-->",f,h,d=a[18].off_artifact_rel_label.value.replace(/ /g,"")+"",_,m,c=ce(a[18].off_artifact.value)+"",u,E,g=a[18].off_artifact_label.value+"",P,I,C=a[18].off_tech_id.value.replace(/ |\./g,"")+"",D,p,N,S,F=ce(a[18].off_artifact.value)+"",R,T,b=ce(a[18].off_artifact.value)+"",O,w,A=a[18].off_tech_id.value.replace(/ |\./g,"")+"",Y,ne,te=mr(a[18].off_tech_id.value)+"",Q,H,V=ce(a[18].off_artifact.value)+"",U,Z,L=ce(a[18].off_artifact.value)+"",K,ye;function Pe(fe,me){return me&10&&(N=null),N==null&&(N=!!fe[3].includes(ce(fe[18].off_artifact.value))),N?ec:xu}let ae=Pe(a,-1),pe=ae(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(i),h=k(" |"),_=k(d),m=k("| "),u=k(c),E=k('["'),P=k(g),I=k('"]; class '),D=k(C),p=k(` OffensiveTechniqueNode;
            `),pe.c(),S=k(" ; click "),R=k(F),T=k(' href "/dao/artifact/d3f:'),O=k(b),w=k('"; click '),Y=k(A),ne=k(' href "'),Q=k(te),H=k('"; click '),U=k(V),Z=k(` href "javascript:off_to_art_callback('`),K=k(L),ye=k(`')";`)},l(fe){r=y(fe,e),l=y(fe,'["'),s=y(fe,t),n=y(fe,'"] '),f=y(fe,i),h=y(fe," |"),_=y(fe,d),m=y(fe,"| "),u=y(fe,c),E=y(fe,'["'),P=y(fe,g),I=y(fe,'"]; class '),D=y(fe,C),p=y(fe,` OffensiveTechniqueNode;
            `),pe.l(fe),S=y(fe," ; click "),R=y(fe,F),T=y(fe,' href "/dao/artifact/d3f:'),O=y(fe,b),w=y(fe,'"; click '),Y=y(fe,A),ne=y(fe,' href "'),Q=y(fe,te),H=y(fe,'"; click '),U=y(fe,V),Z=y(fe,` href "javascript:off_to_art_callback('`),K=y(fe,L),ye=y(fe,`')";`)},m(fe,me){v(fe,r,me),v(fe,l,me),v(fe,s,me),v(fe,n,me),v(fe,f,me),v(fe,h,me),v(fe,_,me),v(fe,m,me),v(fe,u,me),v(fe,E,me),v(fe,P,me),v(fe,I,me),v(fe,D,me),v(fe,p,me),pe.m(fe,me),v(fe,S,me),v(fe,R,me),v(fe,T,me),v(fe,O,me),v(fe,w,me),v(fe,Y,me),v(fe,ne,me),v(fe,Q,me),v(fe,H,me),v(fe,U,me),v(fe,Z,me),v(fe,K,me),v(fe,ye,me)},p(fe,me){me&2&&e!==(e=fe[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(r,e),me&2&&t!==(t=fe[18].off_tech_label.value+"")&&J(s,t),me&2&&d!==(d=fe[18].off_artifact_rel_label.value.replace(/ /g,"")+"")&&J(_,d),me&2&&c!==(c=ce(fe[18].off_artifact.value)+"")&&J(u,c),me&2&&g!==(g=fe[18].off_artifact_label.value+"")&&J(P,g),me&2&&C!==(C=fe[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(D,C),ae===(ae=Pe(fe,me))&&pe?pe.p(fe,me):(pe.d(1),pe=ae(fe),pe&&(pe.c(),pe.m(S.parentNode,S))),me&2&&F!==(F=ce(fe[18].off_artifact.value)+"")&&J(R,F),me&2&&b!==(b=ce(fe[18].off_artifact.value)+"")&&J(O,b),me&2&&A!==(A=fe[18].off_tech_id.value.replace(/ |\./g,"")+"")&&J(Y,A),me&2&&te!==(te=mr(fe[18].off_tech_id.value)+"")&&J(Q,te),me&2&&V!==(V=ce(fe[18].off_artifact.value)+"")&&J(U,V),me&2&&L!==(L=ce(fe[18].off_artifact.value)+"")&&J(K,L)},d(fe){fe&&(o(r),o(l),o(s),o(n),o(f),o(h),o(_),o(m),o(u),o(E),o(P),o(I),o(D),o(p),o(S),o(R),o(T),o(O),o(w),o(Y),o(ne),o(Q),o(H),o(U),o(Z),o(K),o(ye)),pe.d(fe)}}}function xu(a){let e,r=ce(a[18].off_artifact.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" ArtifactNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," ArtifactNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=ce(s[18].off_artifact.value)+"")&&J(l,r)},d(s){s&&(o(e),o(l),o(t))}}}function ec(a){let e,r=ce(a[18].off_artifact.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" SelectedArtifactNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," SelectedArtifactNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=ce(s[18].off_artifact.value)+"")&&J(l,r)},d(s){s&&(o(e),o(l),o(t))}}}function Ma(a){let e=a[6].edge_is_unique(a[18].off_tech_label.value,a[18].off_artifact_rel_label.value,a[18].off_artifact_label.value),r,l=e&&Va(a);return{c(){l&&l.c(),r=Ee()},l(t){l&&l.l(t),r=Ee()},m(t,s){l&&l.m(t,s),v(t,r,s)},p(t,s){s&2&&(e=t[6].edge_is_unique(t[18].off_tech_label.value,t[18].off_artifact_rel_label.value,t[18].off_artifact_label.value)),e?l?l.p(t,s):(l=Va(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&o(r),l&&l.d(t)}}}function tc(a){let e,r,l=Ie(a[1].off_to_def.results.bindings),t=[];for(let s=0;s<l.length;s+=1)t[s]=Ma(za(a,l,s));return{c(){e=k(`graph LR;
        `);for(let s=0;s<t.length;s+=1)t[s].c();r=Ee()},l(s){e=y(s,`graph LR;
        `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=Ee()},m(s,n){v(s,e,n);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(s,n);v(s,r,n)},p(s,n){if(n&74){l=Ie(s[1].off_to_def.results.bindings);let i;for(i=0;i<l.length;i+=1){const f=za(s,l,i);t[i]?t[i].p(f,n):(t[i]=Ma(f),t[i].c(),t[i].m(r.parentNode,r))}for(;i<t.length;i+=1)t[i].d(1);t.length=l.length}},d(s){s&&(o(e),o(r)),Xe(t,s)}}}function rc(a){let e,r,l,t,s,n,i,f,h,d,_,m,c,u=a[3].length+"",E,g,P,I,C;const D=a[9].header,p=ct(D,a,a[14],Ua),N=a[9].default,S=ct(N,a,a[14],null),F=[Wu,Zu,Xu],R=[];function T(b,O){return b[1]?b[1].off_to_def.results.bindings.length>0?1:2:0}return i=T(a),f=R[i]=F[i](a),{c(){e=B("dialog"),r=B("div"),p&&p.c(),l=k(`
    Select Related Artifacts To Insert
    `),S&&S.c(),t=x(),s=B("hr"),n=x(),f.c(),h=x(),d=B("hr"),_=x(),m=B("button"),c=k("Insert ("),E=k(u),g=k(")"),this.h()},l(b){e=$(b,"DIALOG",{class:!0});var O=ve(e);r=$(O,"DIV",{class:!0});var w=ve(r);p&&p.l(w),l=y(w,`
    Select Related Artifacts To Insert
    `),S&&S.l(w),t=ee(w),s=$(w,"HR",{}),n=ee(w),f.l(w),h=ee(w),d=$(w,"HR",{}),_=ee(w),m=$(w,"BUTTON",{class:!0});var A=ve(m);c=y(A,"Insert ("),E=y(A,u),g=y(A,")"),A.forEach(o),w.forEach(o),O.forEach(o),this.h()},h(){m.autofocus=!0,X(m,"class","svelte-x0618k"),X(r,"class","svelte-x0618k"),X(e,"class","svelte-x0618k")},m(b,O){v(b,e,O),q(e,r),p&&p.m(r,null),q(r,l),S&&S.m(r,null),q(r,t),q(r,s),q(r,n),R[i].m(r,null),q(r,h),q(r,d),q(r,_),q(r,m),q(m,c),q(m,E),q(m,g),a[11](e),P=!0,m.focus(),I||(C=[ge(m,"click",a[7]),ge(r,"click",Ct(a[10])),ge(e,"close",a[12]),ge(e,"click",qt(a[13]))],I=!0)},p(b,[O]){p&&p.p&&(!P||O&16384)&&dt(p,D,b,b[14],P?_t(D,b[14],O,Yu):ht(b[14]),Ua),S&&S.p&&(!P||O&16384)&&dt(S,N,b,b[14],P?_t(N,b[14],O,null):ht(b[14]),null);let w=i;i=T(b),i===w?R[i].p(b,O):(Pt(),_e(R[w],1,1,()=>{R[w]=null}),wt(),f=R[i],f?f.p(b,O):(f=R[i]=F[i](b),f.c()),ue(f,1),f.m(r,h)),(!P||O&8)&&u!==(u=b[3].length+"")&&J(E,u)},i(b){P||(ue(p,b),ue(S,b),ue(f),P=!0)},o(b){_e(p,b),_e(S,b),_e(f),P=!1},d(b){b&&o(e),p&&p.d(b),S&&S.d(b),R[i].d(),a[11](null),I=!1,Et(C)}}}function lc(a,e,r){let l,t,s,{$$slots:n={},$$scope:i}=e,{show_artifacts_modal:f}=e,{parent_node:h}=e,{data:d}=e,_;const m=At();tt(a,m,p=>r(16,s=p));const c=Ft();tt(a,c,p=>r(15,t=p));let u=new Ht;function E(p){l.includes(p)?r(3,l=l.filter(N=>N!==p)):l.push(p),r(3,l)}window.off_to_art_callback=function(p){E(p)};function g(){let p=0,N=200,S=100;for(const F of l){let R=d.off_to_def.results.bindings.find(T=>ce(T.off_artifact.value)==F);R&&(Ut(m,c,h,"artifactSelectorNode",R.off_artifact_label.value,"d3f:"+ce(R.off_artifact.value),h.data.sequence,h.position.x+p*N,h.position.y+S,182,63,R.off_artifact_rel_label.value,!0),p+=1)}m.set(s),c.set(t),_&&_.close(),r(3,l=[])}function P(p){Nt.call(this,a,p)}function I(p){Ye[p?"unshift":"push"](()=>{_=p,r(2,_)})}const C=()=>r(0,f=!1),D=()=>{_.close(),r(3,l=[])};return a.$$set=p=>{"show_artifacts_modal"in p&&r(0,f=p.show_artifacts_modal),"parent_node"in p&&r(8,h=p.parent_node),"data"in p&&r(1,d=p.data),"$$scope"in p&&r(14,i=p.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&f&&_&&(_.showModal(),u.reset()),a.$$.dirty&5&&!f&&_&&(_.close(),u.reset())},r(3,l=[]),[f,d,_,l,m,c,u,g,h,n,P,I,C,D,i]}class ac extends ft{constructor(e){super(),ut(this,e,lc,rc,ot,{show_artifacts_modal:0,parent_node:8,data:1})}}function Ba(a,e,r){const l=a.slice();return l[23]=e[r],l}const sc=a=>({}),$a=a=>({});function nc(a){let e;return{c(){e=k("No related artifacts in this release.")},l(r){e=y(r,"No related artifacts in this release.")},m(r,l){v(r,e,l)},p:ke,i:ke,o:ke,d(r){r&&o(e)}}}function ic(a){let e,r,l,t,s,n,i,f,h,d;function _(c){a[14](c)}let m={toggles:a[4]};return a[3]!==void 0&&(m.selected=a[3]),r=new Ts({props:m}),Ye.push(()=>yt(r,"selected",_)),h=new zt({props:{$$slots:{default:[cc]},$$scope:{ctx:a}}}),{c(){e=B("div"),Te(r.$$.fragment),t=x(),s=B("br"),n=x(),i=B("br"),f=x(),Te(h.$$.fragment),this.h()},l(c){e=$(c,"DIV",{class:!0});var u=ve(e);Ae(r.$$.fragment,u),u.forEach(o),t=ee(c),s=$(c,"BR",{}),n=ee(c),i=$(c,"BR",{}),f=ee(c),Ae(h.$$.fragment,c),this.h()},h(){X(e,"class","center shrink")},m(c,u){v(c,e,u),Fe(r,e,null),v(c,t,u),v(c,s,u),v(c,n,u),v(c,i,u),v(c,f,u),Fe(h,c,u),d=!0},p(c,u){const E={};u&16&&(E.toggles=c[4]),!l&&u&8&&(l=!0,E.selected=c[3],kt(()=>l=!1)),r.$set(E);const g={};u&262186&&(g.$$scope={dirty:u,ctx:c}),h.$set(g)},i(c){d||(ue(r.$$.fragment,c),ue(h.$$.fragment,c),d=!0)},o(c){_e(r.$$.fragment,c),_e(h.$$.fragment,c),d=!1},d(c){c&&(o(e),o(t),o(s),o(n),o(i),o(f)),Le(r),Le(h,c)}}}function oc(a){let e,r="Loading...";return{c(){e=B("div"),e.textContent=r},l(l){e=$(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:ke,i:ke,o:ke,d(l){l&&o(e)}}}function Ha(a){let e=a[8].edge_is_unique(a[23].def_tech_label.value,a[23].def_artifact_rel_label.value,a[23].off_artifact_label.value),r,l=e&&Qa(a);return{c(){l&&l.c(),r=Ee()},l(t){l&&l.l(t),r=Ee()},m(t,s){l&&l.m(t,s),v(t,r,s)},p(t,s){s&2&&(e=t[8].edge_is_unique(t[23].def_tech_label.value,t[23].def_artifact_rel_label.value,t[23].off_artifact_label.value)),e?l?l.p(t,s):(l=Qa(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&o(r),l&&l.d(t)}}}function Qa(a){let e=!a[3].includes(a[23].def_tactic_label.value),r,l=e&&Ga(a);return{c(){l&&l.c(),r=Ee()},l(t){l&&l.l(t),r=Ee()},m(t,s){l&&l.m(t,s),v(t,r,s)},p(t,s){s&10&&(e=!t[3].includes(t[23].def_tactic_label.value)),e?l?l.p(t,s):(l=Ga(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&o(r),l&&l.d(t)}}}function Ga(a){let e=ce(a[23].def_tech.value)+"",r,l,t=a[23].def_tech_label.value+"",s,n,i="-->",f,h,d=a[23].def_artifact_rel_label.value.replace(/ /g,"")+"",_,m,c=ce(a[23].off_artifact.value)+"",u,E,g=a[23].off_artifact_label.value+"",P,I,C=a[8].edge_is_unique(a[23].def_tech.value,a[23].def_tactic_label.value,a[23].off_tech_id.value),D,p,N,S=a[23].off_artifact_label.value.replace(/ /g,"")+"",F,R,T=ce(a[23].def_tech.value)+"",b,O,w=a[23].def_tech_label.value.replace(/ |\./g,"")+"",A,Y,ne=C&&Ka(a);function te(V,U){return U&34&&(p=null),p==null&&(p=!!V[5].includes(ce(V[23].def_tech.value))),p?uc:fc}let Q=te(a,-1),H=Q(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(i),h=k(`
                | `),_=k(d),m=k(" | "),u=k(c),E=k('["'),P=k(g),I=k(`"];

                `),ne&&ne.c(),D=x(),H.c(),N=k(` 
                class `),F=k(S),R=k(` ArtifactNode;
                click `),b=k(T),O=k(` href "javascript:off_to_def_callback('`),A=k(w),Y=k(`')";`)},l(V){r=y(V,e),l=y(V,'["'),s=y(V,t),n=y(V,'"] '),f=y(V,i),h=y(V,`
                | `),_=y(V,d),m=y(V," | "),u=y(V,c),E=y(V,'["'),P=y(V,g),I=y(V,`"];

                `),ne&&ne.l(V),D=ee(V),H.l(V),N=y(V,` 
                class `),F=y(V,S),R=y(V,` ArtifactNode;
                click `),b=y(V,T),O=y(V,` href "javascript:off_to_def_callback('`),A=y(V,w),Y=y(V,`')";`)},m(V,U){v(V,r,U),v(V,l,U),v(V,s,U),v(V,n,U),v(V,f,U),v(V,h,U),v(V,_,U),v(V,m,U),v(V,u,U),v(V,E,U),v(V,P,U),v(V,I,U),ne&&ne.m(V,U),v(V,D,U),H.m(V,U),v(V,N,U),v(V,F,U),v(V,R,U),v(V,b,U),v(V,O,U),v(V,A,U),v(V,Y,U)},p(V,U){U&2&&e!==(e=ce(V[23].def_tech.value)+"")&&J(r,e),U&2&&t!==(t=V[23].def_tech_label.value+"")&&J(s,t),U&2&&d!==(d=V[23].def_artifact_rel_label.value.replace(/ /g,"")+"")&&J(_,d),U&2&&c!==(c=ce(V[23].off_artifact.value)+"")&&J(u,c),U&2&&g!==(g=V[23].off_artifact_label.value+"")&&J(P,g),U&2&&(C=V[8].edge_is_unique(V[23].def_tech.value,V[23].def_tactic_label.value,V[23].off_tech_id.value)),C?ne?ne.p(V,U):(ne=Ka(V),ne.c(),ne.m(D.parentNode,D)):ne&&(ne.d(1),ne=null),Q===(Q=te(V,U))&&H?H.p(V,U):(H.d(1),H=Q(V),H&&(H.c(),H.m(N.parentNode,N))),U&2&&S!==(S=V[23].off_artifact_label.value.replace(/ /g,"")+"")&&J(F,S),U&2&&T!==(T=ce(V[23].def_tech.value)+"")&&J(b,T),U&2&&w!==(w=V[23].def_tech_label.value.replace(/ |\./g,"")+"")&&J(A,w)},d(V){V&&(o(r),o(l),o(s),o(n),o(f),o(h),o(_),o(m),o(u),o(E),o(P),o(I),o(D),o(N),o(F),o(R),o(b),o(O),o(A),o(Y)),ne&&ne.d(V),H.d(V)}}}function Ka(a){let e=ce(a[23].def_tech.value)+"",r,l,t=a[23].def_tech_label.value+"",s,n,i="-.->",f,h,d="May "+a[23].def_tactic_label.value,_,m,c=a[23].off_tech_id.value.replace(/ |\./g,"")+"",u,E,g=a[23].off_tech_label.value+"",P,I;return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(i),h=k(`
                  | `),_=k(d),m=k(" | "),u=k(c),E=k('["'),P=k(g),I=k('"] ;')},l(C){r=y(C,e),l=y(C,'["'),s=y(C,t),n=y(C,'"] '),f=y(C,i),h=y(C,`
                  | `),_=y(C,d),m=y(C," | "),u=y(C,c),E=y(C,'["'),P=y(C,g),I=y(C,'"] ;')},m(C,D){v(C,r,D),v(C,l,D),v(C,s,D),v(C,n,D),v(C,f,D),v(C,h,D),v(C,_,D),v(C,m,D),v(C,u,D),v(C,E,D),v(C,P,D),v(C,I,D)},p(C,D){D&2&&e!==(e=ce(C[23].def_tech.value)+"")&&J(r,e),D&2&&t!==(t=C[23].def_tech_label.value+"")&&J(s,t),D&2&&d!==(d="May "+C[23].def_tactic_label.value)&&J(_,d),D&2&&c!==(c=C[23].off_tech_id.value.replace(/ |\./g,"")+"")&&J(u,c),D&2&&g!==(g=C[23].off_tech_label.value+"")&&J(P,g)},d(C){C&&(o(r),o(l),o(s),o(n),o(f),o(h),o(_),o(m),o(u),o(E),o(P),o(I))}}}function fc(a){let e,r=ce(a[23].def_tech.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" DefensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," DefensiveTechniqueNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=ce(s[23].def_tech.value)+"")&&J(l,r)},d(s){s&&(o(e),o(l),o(t))}}}function uc(a){let e,r=ce(a[23].def_tech.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" SelectedDefensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," SelectedDefensiveTechniqueNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=ce(s[23].def_tech.value)+"")&&J(l,r)},d(s){s&&(o(e),o(l),o(t))}}}function Ja(a){let e=a[23].off_tech_id.value.replace(/ |\./g,"")+"",r,l,t=a[23].off_tech_label.value+"",s,n,i="-->",f,h,d=a[23].off_artifact_rel_label.value.replace(/ /g,"")+"",_,m,c=ce(a[23].off_artifact.value)+"",u,E,g=a[23].off_artifact_label.value+"",P,I,C=a[23].off_tech_id.value.replace(/ |\./g,"")+"",D,p,N=ce(a[23].off_artifact.value)+"",S,F,R=ce(a[23].off_artifact.value)+"",T,b,O=ce(a[23].off_artifact.value)+"",w,A,Y=a[23].off_tech_id.value.replace(/ |\./g,"")+"",ne,te,Q=mr(a[23].off_tech_id.value)+"",H,V,U=ce(a[23].off_artifact.value)+"",Z,L,K=ce(a[23].off_artifact.value)+"",ye,Pe;return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(i),h=k(" |"),_=k(d),m=k("| "),u=k(c),E=k('["'),P=k(g),I=k('"]; class '),D=k(C),p=k(` OffensiveTechniqueNode;
            class `),S=k(N),F=k(" ArtifactNode; click "),T=k(R),b=k(' href "/dao/artifact/d3f:'),w=k(O),A=k(`";
            click `),ne=k(Y),te=k(' href "'),H=k(Q),V=k('"; click '),Z=k(U),L=k(' href "/dao/artifact/d3f:'),ye=k(K),Pe=k('";')},l(ae){r=y(ae,e),l=y(ae,'["'),s=y(ae,t),n=y(ae,'"] '),f=y(ae,i),h=y(ae," |"),_=y(ae,d),m=y(ae,"| "),u=y(ae,c),E=y(ae,'["'),P=y(ae,g),I=y(ae,'"]; class '),D=y(ae,C),p=y(ae,` OffensiveTechniqueNode;
            class `),S=y(ae,N),F=y(ae," ArtifactNode; click "),T=y(ae,R),b=y(ae,' href "/dao/artifact/d3f:'),w=y(ae,O),A=y(ae,`";
            click `),ne=y(ae,Y),te=y(ae,' href "'),H=y(ae,Q),V=y(ae,'"; click '),Z=y(ae,U),L=y(ae,' href "/dao/artifact/d3f:'),ye=y(ae,K),Pe=y(ae,'";')},m(ae,pe){v(ae,r,pe),v(ae,l,pe),v(ae,s,pe),v(ae,n,pe),v(ae,f,pe),v(ae,h,pe),v(ae,_,pe),v(ae,m,pe),v(ae,u,pe),v(ae,E,pe),v(ae,P,pe),v(ae,I,pe),v(ae,D,pe),v(ae,p,pe),v(ae,S,pe),v(ae,F,pe),v(ae,T,pe),v(ae,b,pe),v(ae,w,pe),v(ae,A,pe),v(ae,ne,pe),v(ae,te,pe),v(ae,H,pe),v(ae,V,pe),v(ae,Z,pe),v(ae,L,pe),v(ae,ye,pe),v(ae,Pe,pe)},p(ae,pe){pe&2&&e!==(e=ae[23].off_tech_id.value.replace(/ |\./g,"")+"")&&J(r,e),pe&2&&t!==(t=ae[23].off_tech_label.value+"")&&J(s,t),pe&2&&d!==(d=ae[23].off_artifact_rel_label.value.replace(/ /g,"")+"")&&J(_,d),pe&2&&c!==(c=ce(ae[23].off_artifact.value)+"")&&J(u,c),pe&2&&g!==(g=ae[23].off_artifact_label.value+"")&&J(P,g),pe&2&&C!==(C=ae[23].off_tech_id.value.replace(/ |\./g,"")+"")&&J(D,C),pe&2&&N!==(N=ce(ae[23].off_artifact.value)+"")&&J(S,N),pe&2&&R!==(R=ce(ae[23].off_artifact.value)+"")&&J(T,R),pe&2&&O!==(O=ce(ae[23].off_artifact.value)+"")&&J(w,O),pe&2&&Y!==(Y=ae[23].off_tech_id.value.replace(/ |\./g,"")+"")&&J(ne,Y),pe&2&&Q!==(Q=mr(ae[23].off_tech_id.value)+"")&&J(H,Q),pe&2&&U!==(U=ce(ae[23].off_artifact.value)+"")&&J(Z,U),pe&2&&K!==(K=ce(ae[23].off_artifact.value)+"")&&J(ye,K)},d(ae){ae&&(o(r),o(l),o(s),o(n),o(f),o(h),o(_),o(m),o(u),o(E),o(P),o(I),o(D),o(p),o(S),o(F),o(T),o(b),o(w),o(A),o(ne),o(te),o(H),o(V),o(Z),o(L),o(ye),o(Pe))}}}function Ya(a){let e,r=a[8].edge_is_unique(a[23].off_tech_label.value,a[23].off_artifact_rel_label.value,a[23].off_artifact_label.value),l,t="def_tech"in a[23]&&Ha(a),s=r&&Ja(a);return{c(){t&&t.c(),e=x(),s&&s.c(),l=Ee()},l(n){t&&t.l(n),e=ee(n),s&&s.l(n),l=Ee()},m(n,i){t&&t.m(n,i),v(n,e,i),s&&s.m(n,i),v(n,l,i)},p(n,i){"def_tech"in n[23]?t?t.p(n,i):(t=Ha(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null),i&2&&(r=n[8].edge_is_unique(n[23].off_tech_label.value,n[23].off_artifact_rel_label.value,n[23].off_artifact_label.value)),r?s?s.p(n,i):(s=Ja(n),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null)},d(n){n&&(o(e),o(l)),t&&t.d(n),s&&s.d(n)}}}function cc(a){let e,r,l=Ie(a[1].off_to_def.results.bindings),t=[];for(let s=0;s<l.length;s+=1)t[s]=Ya(Ba(a,l,s));return{c(){e=k(`graph LR;
        `);for(let s=0;s<t.length;s+=1)t[s].c();r=Ee()},l(s){e=y(s,`graph LR;
        `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=Ee()},m(s,n){v(s,e,n);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(s,n);v(s,r,n)},p(s,n){if(n&298){l=Ie(s[1].off_to_def.results.bindings);let i;for(i=0;i<l.length;i+=1){const f=Ba(s,l,i);t[i]?t[i].p(f,n):(t[i]=Ya(f),t[i].c(),t[i].m(r.parentNode,r))}for(;i<t.length;i+=1)t[i].d(1);t.length=l.length}},d(s){s&&(o(e),o(r)),Xe(t,s)}}}function dc(a){let e,r,l,t,s,n,i,f,h,d,_,m,c,u=a[5].length+"",E,g,P,I,C;const D=a[12].header,p=ct(D,a,a[18],$a),N=a[12].default,S=ct(N,a,a[18],null),F=[oc,ic,nc],R=[];function T(b,O){return b[1]?b[1].off_to_def.results.bindings.length>0?1:2:0}return i=T(a),f=R[i]=F[i](a),{c(){e=B("dialog"),r=B("div"),p&&p.c(),l=k(`
    Select Related Artifacts To Insert
    `),S&&S.c(),t=x(),s=B("hr"),n=x(),f.c(),h=x(),d=B("hr"),_=x(),m=B("button"),c=k("Insert ("),E=k(u),g=k(")"),this.h()},l(b){e=$(b,"DIALOG",{class:!0});var O=ve(e);r=$(O,"DIV",{class:!0});var w=ve(r);p&&p.l(w),l=y(w,`
    Select Related Artifacts To Insert
    `),S&&S.l(w),t=ee(w),s=$(w,"HR",{}),n=ee(w),f.l(w),h=ee(w),d=$(w,"HR",{}),_=ee(w),m=$(w,"BUTTON",{class:!0});var A=ve(m);c=y(A,"Insert ("),E=y(A,u),g=y(A,")"),A.forEach(o),w.forEach(o),O.forEach(o),this.h()},h(){m.autofocus=!0,X(m,"class","svelte-x0618k"),X(r,"class","svelte-x0618k"),X(e,"class","svelte-x0618k")},m(b,O){v(b,e,O),q(e,r),p&&p.m(r,null),q(r,l),S&&S.m(r,null),q(r,t),q(r,s),q(r,n),R[i].m(r,null),q(r,h),q(r,d),q(r,_),q(r,m),q(m,c),q(m,E),q(m,g),a[15](e),P=!0,m.focus(),I||(C=[ge(m,"click",a[9]),ge(r,"click",Ct(a[13])),ge(e,"close",a[16]),ge(e,"click",qt(a[17]))],I=!0)},p(b,[O]){p&&p.p&&(!P||O&262144)&&dt(p,D,b,b[18],P?_t(D,b[18],O,sc):ht(b[18]),$a),S&&S.p&&(!P||O&262144)&&dt(S,N,b,b[18],P?_t(N,b[18],O,null):ht(b[18]),null);let w=i;i=T(b),i===w?R[i].p(b,O):(Pt(),_e(R[w],1,1,()=>{R[w]=null}),wt(),f=R[i],f?f.p(b,O):(f=R[i]=F[i](b),f.c()),ue(f,1),f.m(r,h)),(!P||O&32)&&u!==(u=b[5].length+"")&&J(E,u)},i(b){P||(ue(p,b),ue(S,b),ue(f),P=!0)},o(b){_e(p,b),_e(S,b),_e(f),P=!1},d(b){b&&o(e),p&&p.d(b),S&&S.d(b),R[i].d(),a[15](null),I=!1,Et(C)}}}function hc(a,e,r){let l,t,s,{$$slots:n={},$$scope:i}=e,{show_defend_modal:f}=e,{parent_node:h}=e,{data:d}=e,_;const m=At();tt(a,m,T=>r(20,s=T));const c=Ft();tt(a,c,T=>r(19,t=T));let u=new Ht;function E(T){l.includes(T)?r(5,l=l.filter(b=>b!==T)):l.push(T),r(5,l)}window.off_to_def_callback=function(T){E(T)};function g(){let T=0,b=200,O=100;for(const w of l){let A=d.off_to_def.results.bindings.find(Y=>"def_tech"in Y&&ce(Y.def_tech.value)==w);A&&(Ut(m,c,h,"countermeasureSelectorNode",A.def_tech_label.value,"d3f:"+ce(A.def_tech.value),h.data.sequence,h.position.x+T*b,h.position.y+O,182,63,"May "+A.def_tactic_label.value,!1),T+=1)}m.set(s),c.set(t),_&&_.close(),r(5,l=[])}let P=new Set,I=[],C=[];Is(I,C)&&(C=[]);function D(T){for(const b of l){let O=d.off_to_def.results.bindings.find(w=>"def_tech"in w&&ce(w.def_tech.value)==b);T.includes(O.def_tactic_label.value)&&r(5,l=l.filter(w=>w!==b))}r(5,l)}function p(T){Nt.call(this,a,T)}function N(T){C=T,r(3,C)}function S(T){Ye[T?"unshift":"push"](()=>{_=T,r(2,_)})}const F=()=>r(0,f=!1),R=()=>{_.close(),r(5,l=[])};return a.$$set=T=>{"show_defend_modal"in T&&r(0,f=T.show_defend_modal),"parent_node"in T&&r(10,h=T.parent_node),"data"in T&&r(1,d=T.data),"$$scope"in T&&r(18,i=T.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&f&&_&&(_.showModal(),u.reset()),a.$$.dirty&5&&!f&&_&&(_.close(),u.reset()),a.$$.dirty&2050&&d&&(d.off_to_def.results.bindings.forEach(T=>{"def_tactic_label"in T&&P.add(T.def_tactic_label.value)}),r(11,P),r(1,d)),a.$$.dirty&2048&&r(4,I=Array.from(P).sort(function(T,b){return pr[T]-pr[b]})),a.$$.dirty&8&&D(C),a.$$.dirty&8&&u.reset(C)},r(5,l=[]),[f,d,_,C,I,l,m,c,u,g,h,P,n,p,N,S,F,R,i]}class _c extends ft{constructor(e){super(),ut(this,e,hc,dc,ot,{show_defend_modal:0,parent_node:10,data:1})}}function vc(a){let e,r="artifacts",l,t,s,n,i,f="defensive techniques",h,d,_,m,c,u;function E(C){a[6](C)}let g={parent_node:a[0],data:a[1]};a[3]!==void 0&&(g.show_artifacts_modal=a[3]),t=new ac({props:g}),Ye.push(()=>yt(t,"show_artifacts_modal",E));function P(C){a[8](C)}let I={parent_node:a[0],data:a[1]};return a[2]!==void 0&&(I.show_defend_modal=a[2]),d=new _c({props:I}),Ye.push(()=>yt(d,"show_defend_modal",P)),{c(){e=B("button"),e.textContent=r,l=x(),Te(t.$$.fragment),n=x(),i=B("button"),i.textContent=f,h=x(),Te(d.$$.fragment),this.h()},l(C){e=$(C,"BUTTON",{class:!0,"data-svelte-h":!0}),we(e)!=="svelte-1t14z6m"&&(e.textContent=r),l=ee(C),Ae(t.$$.fragment,C),n=ee(C),i=$(C,"BUTTON",{class:!0,"data-svelte-h":!0}),we(i)!=="svelte-o3we0s"&&(i.textContent=f),h=ee(C),Ae(d.$$.fragment,C),this.h()},h(){X(e,"class","svelte-1x5dcdh"),X(i,"class","svelte-1x5dcdh")},m(C,D){v(C,e,D),v(C,l,D),Fe(t,C,D),v(C,n,D),v(C,i,D),v(C,h,D),Fe(d,C,D),m=!0,c||(u=[ge(e,"click",a[5]),ge(i,"click",a[7])],c=!0)},p(C,[D]){const p={};D&1&&(p.parent_node=C[0]),D&2&&(p.data=C[1]),!s&&D&8&&(s=!0,p.show_artifacts_modal=C[3],kt(()=>s=!1)),t.$set(p);const N={};D&1&&(N.parent_node=C[0]),D&2&&(N.data=C[1]),!_&&D&4&&(_=!0,N.show_defend_modal=C[2],kt(()=>_=!1)),d.$set(N)},i(C){m||(ue(t.$$.fragment,C),ue(d.$$.fragment,C),m=!0)},o(C){_e(t.$$.fragment,C),_e(d.$$.fragment,C),m=!1},d(C){C&&(o(e),o(l),o(n),o(i),o(h)),Le(t,C),Le(d,C),c=!1,Et(u)}}}function mc(a,e,r){let l,t;var s=this&&this.__awaiter||function(u,E,g,P){function I(C){return C instanceof g?C:new g(function(D){D(C)})}return new(g||(g=Promise))(function(C,D){function p(F){try{S(P.next(F))}catch(R){D(R)}}function N(F){try{S(P.throw(F))}catch(R){D(R)}}function S(F){F.done?C(F.value):I(F.value).then(p,N)}S((P=P.apply(u,E||[])).next())})};let{node:n}=e,i;function f(u){alert(u),r(3,l=!1),r(2,t=!1)}function h(u){return s(this,void 0,void 0,function*(){if(u.data.d3f_class&&u.data.d3f_class.includes("d3f:")){const E=u.data.d3f_class,g=yield fetch(`/api/offensive-technique/attack/${E.replace("d3f:","")}.json`),P=yield g.json();if(g.status!=200||P.description["@graph"].length==0)f(`Offensive Technique: "${E.replace("d3f:","")}" not found in ontology`);else return P}else f("Please specify a D3FEND Class for this node to enable inferential mapping")})}const d=async()=>{r(1,i=null),r(3,l=!0),r(1,i=await h(n))};function _(u){l=u,r(3,l)}const m=async()=>{r(1,i=null),r(2,t=!0),r(1,i=await h(n))};function c(u){t=u,r(2,t)}return a.$$set=u=>{"node"in u&&r(0,n=u.node)},r(3,l=!1),r(2,t=!1),[n,i,t,l,h,d,_,m,c]}class pc extends ft{constructor(e){super(),ut(this,e,mc,vc,ot,{node:0})}}function Xa(a){let e,r;return e=new pc({props:{node:a[1]}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t&2&&(s.node=l[1]),e.$set(s)},i(l){r||(ue(e.$$.fragment,l),r=!0)},o(l){_e(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function Za(a){let e,r;return e=new Ju({props:{node:a[1]}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t&2&&(s.node=l[1]),e.$set(s)},i(l){r||(ue(e.$$.fragment,l),r=!0)},o(l){_e(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function Wa(a){let e,r;return e=new Su({props:{node:a[1]}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t&2&&(s.node=l[1]),e.$set(s)},i(l){r||(ue(e.$$.fragment,l),r=!0)},o(l){_e(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function gc(a){let e,r,l,t,s,n,i,f,h,d,_="duplicate",m,c,u="delete",E,g,P,I,C=a[1]&&a[1].type=="attackSelectorNode"&&Xa(a),D=a[1]&&a[1].type=="countermeasureSelectorNode"&&Za(a),p=a[1]&&a[1].type=="artifactSelectorNode"&&Wa(a);return{c(){e=B("div"),r=B("p"),l=B("small"),t=k("node: "),s=k(a[0]),n=x(),C&&C.c(),i=x(),D&&D.c(),f=x(),p&&p.c(),h=x(),d=B("button"),d.textContent=_,m=x(),c=B("button"),c.textContent=u,this.h()},l(N){e=$(N,"DIV",{style:!0,class:!0});var S=ve(e);r=$(S,"P",{style:!0});var F=ve(r);l=$(F,"SMALL",{});var R=ve(l);t=y(R,"node: "),s=y(R,a[0]),R.forEach(o),F.forEach(o),n=ee(S),C&&C.l(S),i=ee(S),D&&D.l(S),f=ee(S),p&&p.l(S),h=ee(S),d=$(S,"BUTTON",{class:!0,"data-svelte-h":!0}),we(d)!=="svelte-1spbqw1"&&(d.textContent=_),m=ee(S),c=$(S,"BUTTON",{class:!0,"data-svelte-h":!0}),we(c)!=="svelte-1pyou7z"&&(c.textContent=u),S.forEach(o),this.h()},h(){lt(r,"margin","0.5em"),X(d,"class","svelte-1o17oqa"),X(c,"class","svelte-1o17oqa"),X(e,"style",E=a[2]()),X(e,"class","context-menu svelte-1o17oqa")},m(N,S){v(N,e,S),q(e,r),q(r,l),q(l,t),q(l,s),q(e,n),C&&C.m(e,null),q(e,i),D&&D.m(e,null),q(e,f),p&&p.m(e,null),q(e,h),q(e,d),q(e,m),q(e,c),g=!0,P||(I=[ge(d,"click",a[5]),ge(c,"click",a[6])],P=!0)},p(N,[S]){(!g||S&1)&&J(s,N[0]),N[1]&&N[1].type=="attackSelectorNode"?C?(C.p(N,S),S&2&&ue(C,1)):(C=Xa(N),C.c(),ue(C,1),C.m(e,i)):C&&(Pt(),_e(C,1,1,()=>{C=null}),wt()),N[1]&&N[1].type=="countermeasureSelectorNode"?D?(D.p(N,S),S&2&&ue(D,1)):(D=Za(N),D.c(),ue(D,1),D.m(e,f)):D&&(Pt(),_e(D,1,1,()=>{D=null}),wt()),N[1]&&N[1].type=="artifactSelectorNode"?p?(p.p(N,S),S&2&&ue(p,1)):(p=Wa(N),p.c(),ue(p,1),p.m(e,h)):p&&(Pt(),_e(p,1,1,()=>{p=null}),wt()),(!g||S&4&&E!==(E=N[2]()))&&X(e,"style",E)},i(N){g||(ue(C),ue(D),ue(p),g=!0)},o(N){_e(C),_e(D),_e(p),g=!1},d(N){N&&o(e),C&&C.d(),D&&D.d(),p&&p.d(),P=!1,Et(I)}}}function bc(a,e,r){let l,t,s,n,{id:i}=e,{top:f}=e,{left:h}=e,{right:d}=e,{bottom:_}=e;const m=At();tt(a,m,g=>r(11,n=g));const c=Ft();tt(a,c,g=>r(12,s=g));function u(){const g=n.find(P=>P.id===i);if(g){console.log(g);let P=structuredClone(g);P.id=`${i}-copy${Math.random()}`.slice(-24),P.position={x:g.position.x,y:g.position.y+50},Zt(m,n=[...n,P],n)}}function E(){Zt(m,n=n.filter(g=>g.id!==i),n),Zt(c,s=s.filter(g=>g.source!==i&&g.target!==i),s),m.set(n),c.set(s)}return a.$$set=g=>{"id"in g&&r(0,i=g.id),"top"in g&&r(7,f=g.top),"left"in g&&r(8,h=g.left),"right"in g&&r(9,d=g.right),"bottom"in g&&r(10,_=g.bottom)},a.$$.update=()=>{a.$$.dirty&2049&&r(1,l=n.find(g=>g.id===i)),a.$$.dirty&1920&&r(2,t=()=>{let g="";return f&&(g+=`top:${f}px;`),_&&(g+=`bottom:${_}px;`),h&&(g+=`left:${h}px;`),d&&(g+=`right:${d}px;`),g})},[i,l,t,m,c,u,E,f,h,d,_,n]}class Ec extends ft{constructor(e){super(),ut(this,e,bc,gc,ot,{id:0,top:7,left:8,right:9,bottom:10})}}function xa(a,e,r){const l=a.slice();return l[12]=e[r],l}function es(a){let e,r,l,t,s,n,i,f,h,d,_,m,c;const u=a[8].default,E=ct(u,a,a[7],null);let g=Ie(a[3]),P=[];for(let I=0;I<g.length;I+=1)P[I]=ts(xa(a,g,I));return{c(){e=B("div"),r=B("div"),l=B("h2"),t=k(a[1]),s=x(),n=B("p"),i=k(a[2]),f=x(),E&&E.c(),h=x(),d=B("div");for(let I=0;I<P.length;I+=1)P[I].c();this.h()},l(I){e=$(I,"DIV",{class:!0});var C=ve(e);r=$(C,"DIV",{class:!0});var D=ve(r);l=$(D,"H2",{});var p=ve(l);t=y(p,a[1]),p.forEach(o),s=ee(D),n=$(D,"P",{});var N=ve(n);i=y(N,a[2]),N.forEach(o),f=ee(D),E&&E.l(D),h=ee(D),d=$(D,"DIV",{class:!0});var S=ve(d);for(let F=0;F<P.length;F+=1)P[F].l(S);S.forEach(o),D.forEach(o),C.forEach(o),this.h()},h(){X(d,"class","options svelte-zbcx3u"),X(r,"class","modal-content center text-center svelte-zbcx3u"),X(e,"class","modal-overlay svelte-zbcx3u")},m(I,C){v(I,e,C),q(e,r),q(r,l),q(l,t),q(r,s),q(r,n),q(n,i),q(r,f),E&&E.m(r,null),q(r,h),q(r,d);for(let D=0;D<P.length;D+=1)P[D]&&P[D].m(d,null);_=!0,m||(c=[ge(r,"click",Ct(a[9])),ge(e,"click",a[4])],m=!0)},p(I,C){if((!_||C&2)&&J(t,I[1]),(!_||C&4)&&J(i,I[2]),E&&E.p&&(!_||C&128)&&dt(E,u,I,I[7],_?_t(u,I[7],C,null):ht(I[7]),null),C&40){g=Ie(I[3]);let D;for(D=0;D<g.length;D+=1){const p=xa(I,g,D);P[D]?P[D].p(p,C):(P[D]=ts(p),P[D].c(),P[D].m(d,null))}for(;D<P.length;D+=1)P[D].d(1);P.length=g.length}},i(I){_||(ue(E,I),_=!0)},o(I){_e(E,I),_=!1},d(I){I&&o(e),E&&E.d(I),Xe(P,I),m=!1,Et(c)}}}function ts(a){let e,r=a[12].label+"",l,t,s,n;function i(){return a[10](a[12])}return{c(){e=B("button"),l=k(r),t=x(),this.h()},l(f){e=$(f,"BUTTON",{class:!0});var h=ve(e);l=y(h,r),t=ee(h),h.forEach(o),this.h()},h(){X(e,"class","svelte-zbcx3u")},m(f,h){v(f,e,h),q(e,l),q(e,t),s||(n=ge(e,"click",i),s=!0)},p(f,h){a=f,h&8&&r!==(r=a[12].label+"")&&J(l,r)},d(f){f&&o(e),s=!1,n()}}}function Pc(a){let e,r,l=a[0]&&es(a);return{c(){l&&l.c(),e=Ee()},l(t){l&&l.l(t),e=Ee()},m(t,s){l&&l.m(t,s),v(t,e,s),r=!0},p(t,[s]){t[0]?l?(l.p(t,s),s&1&&ue(l,1)):(l=es(t),l.c(),ue(l,1),l.m(e.parentNode,e)):l&&(Pt(),_e(l,1,1,()=>{l=null}),wt())},i(t){r||(ue(l),r=!0)},o(t){_e(l),r=!1},d(t){t&&o(e),l&&l.d(t)}}}function wc(a,e,r){let{$$slots:l={},$$scope:t}=e,{is_open:s=!1}=e,{title:n=""}=e,{content:i=""}=e,{imageSrc:f=""}=e,{options:h=[]}=e;const d=ar();function _(){r(0,s=!1)}function m(E){d("optionSelected",E),_()}function c(E){Nt.call(this,a,E)}const u=E=>m(E);return a.$$set=E=>{"is_open"in E&&r(0,s=E.is_open),"title"in E&&r(1,n=E.title),"content"in E&&r(2,i=E.content),"imageSrc"in E&&r(6,f=E.imageSrc),"options"in E&&r(3,h=E.options),"$$scope"in E&&r(7,t=E.$$scope)},[s,n,i,h,_,m,f,t,l,c,u]}class rs extends ft{constructor(e){super(),ut(this,e,wc,Pc,ot,{is_open:0,title:1,content:2,imageSrc:6,options:3})}}function ls(a,e,r){const l=a.slice();return l[11]=e[r],l}function as(a){let e,r,l,t,s,n,i,f,h,d,_,m,c;const u=a[7].default,E=ct(u,a,a[6],null);let g=Ie(a[3]),P=[];for(let I=0;I<g.length;I+=1)P[I]=ss(ls(a,g,I));return{c(){e=B("div"),r=B("div"),l=B("h2"),t=k(a[1]),s=x(),n=B("p"),i=k(a[2]),f=x(),E&&E.c(),h=x(),d=B("div");for(let I=0;I<P.length;I+=1)P[I].c();this.h()},l(I){e=$(I,"DIV",{class:!0});var C=ve(e);r=$(C,"DIV",{class:!0});var D=ve(r);l=$(D,"H2",{});var p=ve(l);t=y(p,a[1]),p.forEach(o),s=ee(D),n=$(D,"P",{});var N=ve(n);i=y(N,a[2]),N.forEach(o),f=ee(D),E&&E.l(D),h=ee(D),d=$(D,"DIV",{class:!0});var S=ve(d);for(let F=0;F<P.length;F+=1)P[F].l(S);S.forEach(o),D.forEach(o),C.forEach(o),this.h()},h(){X(d,"class","options svelte-2iwk9m"),X(r,"class","modal-content center text-center svelte-2iwk9m"),X(e,"class","modal-overlay svelte-2iwk9m")},m(I,C){v(I,e,C),q(e,r),q(r,l),q(l,t),q(r,s),q(r,n),q(n,i),q(r,f),E&&E.m(r,null),q(r,h),q(r,d);for(let D=0;D<P.length;D+=1)P[D]&&P[D].m(d,null);_=!0,m||(c=[ge(r,"click",Ct(a[8])),ge(e,"click",a[4])],m=!0)},p(I,C){if((!_||C&2)&&J(t,I[1]),(!_||C&4)&&J(i,I[2]),E&&E.p&&(!_||C&64)&&dt(E,u,I,I[6],_?_t(u,I[6],C,null):ht(I[6]),null),C&40){g=Ie(I[3]);let D;for(D=0;D<g.length;D+=1){const p=ls(I,g,D);P[D]?P[D].p(p,C):(P[D]=ss(p),P[D].c(),P[D].m(d,null))}for(;D<P.length;D+=1)P[D].d(1);P.length=g.length}},i(I){_||(ue(E,I),_=!0)},o(I){_e(E,I),_=!1},d(I){I&&o(e),E&&E.d(I),Xe(P,I),m=!1,Et(c)}}}function ss(a){let e,r=a[11].label+"",l,t,s,n;function i(){return a[9](a[11])}return{c(){e=B("button"),l=k(r),t=x(),this.h()},l(f){e=$(f,"BUTTON",{class:!0});var h=ve(e);l=y(h,r),t=ee(h),h.forEach(o),this.h()},h(){X(e,"class","svelte-2iwk9m")},m(f,h){v(f,e,h),q(e,l),q(e,t),s||(n=ge(e,"click",i),s=!0)},p(f,h){a=f,h&8&&r!==(r=a[11].label+"")&&J(l,r)},d(f){f&&o(e),s=!1,n()}}}function kc(a){let e,r,l=a[0]&&as(a);return{c(){l&&l.c(),e=Ee()},l(t){l&&l.l(t),e=Ee()},m(t,s){l&&l.m(t,s),v(t,e,s),r=!0},p(t,[s]){t[0]?l?(l.p(t,s),s&1&&ue(l,1)):(l=as(t),l.c(),ue(l,1),l.m(e.parentNode,e)):l&&(Pt(),_e(l,1,1,()=>{l=null}),wt())},i(t){r||(ue(l),r=!0)},o(t){_e(l),r=!1},d(t){t&&o(e),l&&l.d(t)}}}function yc(a,e,r){let{$$slots:l={},$$scope:t}=e,{is_open:s=!1}=e,{title:n=""}=e,{content:i=""}=e,{options:f=[{label:"Cancel",value:"cancel"}]}=e;const h=ar();function d(){r(0,s=!1)}function _(u){h("model_shared",u),d()}function m(u){Nt.call(this,a,u)}const c=u=>_(u);return a.$$set=u=>{"is_open"in u&&r(0,s=u.is_open),"title"in u&&r(1,n=u.title),"content"in u&&r(2,i=u.content),"options"in u&&r(3,f=u.options),"$$scope"in u&&r(6,t=u.$$scope)},[s,n,i,f,d,_,t,l,m,c]}class Sc extends ft{constructor(e){super(),ut(this,e,yc,kc,ot,{is_open:0,title:1,content:2,options:3})}}function Dc(a){let e,r="";return{c(){e=B("icon"),e.textContent=r,this.h()},l(l){e=$(l,"ICON",{title:!0,"data-svelte-h":!0}),we(e)!=="svelte-10dwkvf"&&(e.textContent=r),this.h()},h(){X(e,"title","Full Screen Mode")},m(l,t){v(l,e,t)},d(l){l&&o(e)}}}function Cc(a){let e,r=" Exit Fullscreen";return{c(){e=B("icon"),e.textContent=r,this.h()},l(l){e=$(l,"ICON",{title:!0,"data-svelte-h":!0}),we(e)!=="svelte-2wnxo3"&&(e.textContent=r),this.h()},h(){X(e,"title","Exit Full Screen Mode")},m(l,t){v(l,e,t)},d(l){l&&o(e)}}}function Nc(a){let e,r,l,t,s,n;function i(m,c){return m[1]?Cc:Dc}let f=i(a),h=f(a);const d=a[4].default,_=ct(d,a,a[3],null);return{c(){e=B("div"),r=B("button"),h.c(),l=x(),_&&_.c(),this.h()},l(m){e=$(m,"DIV",{id:!0,class:!0});var c=ve(e);r=$(c,"BUTTON",{class:!0});var u=ve(r);h.l(u),u.forEach(o),l=ee(c),_&&_.l(c),c.forEach(o),this.h()},h(){X(r,"class","fullscreen-toggle svelte-1jzyezl"),fr(r,"left",a[0]==="left"),fr(r,"right",a[0]==="right"),X(e,"id","fullscreen-parent"),X(e,"class","svelte-1jzyezl")},m(m,c){v(m,e,c),q(e,r),h.m(r,null),q(e,l),_&&_.m(e,null),t=!0,s||(n=ge(r,"click",a[2]),s=!0)},p(m,[c]){f!==(f=i(m))&&(h.d(1),h=f(m),h&&(h.c(),h.m(r,null))),(!t||c&1)&&fr(r,"left",m[0]==="left"),(!t||c&1)&&fr(r,"right",m[0]==="right"),_&&_.p&&(!t||c&8)&&dt(_,d,m,m[3],t?_t(d,m[3],c,null):ht(m[3]),null)},i(m){t||(ue(_,m),t=!0)},o(m){_e(_,m),t=!1},d(m){m&&o(e),h.d(),_&&_.d(m),s=!1,n()}}}function Rc(a,e,r){let{$$slots:l={},$$scope:t}=e,{position:s="right"}=e,n=!1,i;Hr(()=>(i=document.getElementById("fullscreen-parent"),document.addEventListener("fullscreenchange",f),()=>{document.removeEventListener("fullscreenchange",f)}));function f(){r(1,n=!!document.fullscreenElement)}async function h(){if(n)try{await document.exitFullscreen()}catch(d){console.error("Error attempting to exit fullscreen:",d)}else try{await i.requestFullscreen()}catch(d){console.error("Error attempting to enable fullscreen:",d)}}return a.$$set=d=>{"position"in d&&r(0,s=d.position),"$$scope"in d&&r(3,t=d.$$scope)},[s,n,h,t,l]}class Ic extends ft{constructor(e){super(),ut(this,e,Rc,Nc,ot,{position:0})}}function Oc(a){let e,r,l,t,s="Action",n,i,f="Event",h,d,_="Attack",m,c,u="Countermeasure",E,g,P,I="Endurant",C,D,p="Artifact",N,S,F="Information",R,T,b="Agent",O,w,A,Y="State",ne,te,Q="Vulnerability",H,V,U="Condition",Z,L,K,ye="Meta",Pe,ae,pe="Note",fe,me;return{c(){e=B("aside"),r=B("div"),l=B("div"),t=B("div"),t.textContent=s,n=x(),i=B("div"),i.textContent=f,h=x(),d=B("div"),d.textContent=_,m=x(),c=B("div"),c.textContent=u,E=x(),g=B("div"),P=B("div"),P.textContent=I,C=x(),D=B("div"),D.textContent=p,N=x(),S=B("div"),S.textContent=F,R=x(),T=B("div"),T.textContent=b,O=x(),w=B("div"),A=B("div"),A.textContent=Y,ne=x(),te=B("div"),te.textContent=Q,H=x(),V=B("div"),V.textContent=U,Z=x(),L=B("div"),K=B("div"),K.textContent=ye,Pe=x(),ae=B("div"),ae.textContent=pe,this.h()},l(De){e=$(De,"ASIDE",{class:!0});var Ue=ve(e);r=$(Ue,"DIV",{class:!0});var W=ve(r);l=$(W,"DIV",{class:!0});var j=ve(l);t=$(j,"DIV",{class:!0,"data-svelte-h":!0}),we(t)!=="svelte-1yk6dej"&&(t.textContent=s),n=ee(j),i=$(j,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),we(i)!=="svelte-1hxo6k5"&&(i.textContent=f),h=ee(j),d=$(j,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),we(d)!=="svelte-1m30nhf"&&(d.textContent=_),m=ee(j),c=$(j,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),we(c)!=="svelte-xvztkt"&&(c.textContent=u),j.forEach(o),E=ee(W),g=$(W,"DIV",{class:!0});var re=ve(g);P=$(re,"DIV",{class:!0,"data-svelte-h":!0}),we(P)!=="svelte-13fxc4g"&&(P.textContent=I),C=ee(re),D=$(re,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),we(D)!=="svelte-p6iki9"&&(D.textContent=p),N=ee(re),S=$(re,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),we(S)!=="svelte-gfucir"&&(S.textContent=F),R=ee(re),T=$(re,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),we(T)!=="svelte-1k1k96h"&&(T.textContent=b),re.forEach(o),O=ee(W),w=$(W,"DIV",{class:!0});var je=ve(w);A=$(je,"DIV",{class:!0,"data-svelte-h":!0}),we(A)!=="svelte-82roym"&&(A.textContent=Y),ne=ee(je),te=$(je,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),we(te)!=="svelte-tj9qj"&&(te.textContent=Q),H=ee(je),V=$(je,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),we(V)!=="svelte-1mwlumu"&&(V.textContent=U),je.forEach(o),Z=ee(W),L=$(W,"DIV",{class:!0});var Ke=ve(L);K=$(Ke,"DIV",{class:!0,"data-svelte-h":!0}),we(K)!=="svelte-7d6fsa"&&(K.textContent=ye),Pe=ee(Ke),ae=$(Ke,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),we(ae)!=="svelte-18cgcvt"&&(ae.textContent=pe),Ke.forEach(o),W.forEach(o),Ue.forEach(o),this.h()},h(){X(t,"class","text-center font-medium"),X(i,"class","actionNode example-node svelte-1iswza3"),X(i,"draggable",!0),lt(i,"text-align","center"),lt(i,"background","white"),X(i,"title","d3f:Event"),X(d,"class","attackSelectorNode example-node svelte-1iswza3"),X(d,"draggable",!0),lt(d,"text-align","center"),lt(d,"background","#FFD0D0"),X(d,"title","d3f:OffensiveTechnique"),X(c,"class","countermeasureSelectorNode example-node svelte-1iswza3"),X(c,"draggable",!0),lt(c,"text-align","center"),lt(c,"background","#d6eaff"),X(c,"title","d3f:DefensiveTechnique"),X(l,"class","nodes-column svelte-1iswza3"),X(P,"class","text-center font-medium"),X(D,"class","artifactSelectorNode art-node example-node svelte-1iswza3"),X(D,"draggable",!0),lt(D,"text-align","center"),lt(D,"background","#fff4dd"),X(S,"class","informationSelectorNode example-node svelte-1iswza3"),X(S,"draggable",!0),lt(S,"text-align","center"),lt(S,"background","#e8f4ea"),X(T,"class","agentSelectorNode example-node svelte-1iswza3"),X(T,"draggable",!0),lt(T,"text-align","center"),lt(T,"background","#f0e6e6"),X(g,"class","nodes-column svelte-1iswza3"),X(A,"class","text-center font-medium"),X(te,"class","vulnerabilitySelectorNode example-node svelte-1iswza3"),X(te,"draggable",!0),lt(te,"text-align","center"),lt(te,"background","#f9d999"),X(V,"class","conditionDefinitionNode example-node svelte-1iswza3"),X(V,"draggable",!0),lt(V,"text-align","center"),lt(V,"background","#ece6ff"),X(w,"class","nodes-column svelte-1iswza3"),X(K,"class","text-center font-medium"),X(ae,"class","NoteNode example-node svelte-1iswza3"),X(ae,"draggable",!0),lt(ae,"text-align","center"),lt(ae,"background","lightgoldenrodyellow"),X(L,"class","nodes-column svelte-1iswza3"),X(r,"class","nodes-container svelte-1iswza3"),X(e,"class","svelte-1iswza3")},m(De,Ue){v(De,e,Ue),q(e,r),q(r,l),q(l,t),q(l,n),q(l,i),q(l,h),q(l,d),q(l,m),q(l,c),q(r,E),q(r,g),q(g,P),q(g,C),q(g,D),q(g,N),q(g,S),q(g,R),q(g,T),q(r,O),q(r,w),q(w,A),q(w,ne),q(w,te),q(w,H),q(w,V),q(r,Z),q(r,L),q(L,K),q(L,Pe),q(L,ae),fe||(me=[ge(i,"dragstart",a[1]),ge(d,"dragstart",a[2]),ge(c,"dragstart",a[3]),ge(D,"dragstart",a[4]),ge(S,"dragstart",a[5]),ge(T,"dragstart",a[6]),ge(te,"dragstart",a[7]),ge(V,"dragstart",a[8]),ge(ae,"dragstart",a[9])],fe=!0)},p:ke,i:ke,o:ke,d(De){De&&o(e),fe=!1,Et(me)}}}function Tc(a){const e=(_,m)=>{if(!_.dataTransfer)return null;_.dataTransfer.setData("application/svelteflow",m),_.dataTransfer.effectAllowed="move"};return[e,_=>e(_,"eventNode"),_=>e(_,"attackSelectorNode"),_=>e(_,"countermeasureSelectorNode"),_=>e(_,"artifactSelectorNode"),_=>e(_,"informationSelectorNode"),_=>e(_,"agentSelectorNode"),_=>e(_,"vulnerabilitySelectorNode"),_=>e(_,"conditionDefinitionNode"),_=>e(_,"noteNode")]}class Ac extends ft{constructor(e){super(),ut(this,e,Tc,Oc,ot,{})}}function ns(a,e,r){const l=a.slice();return l[7]=e[r],l}function is(a){let e,r=Ie(a[2]),l=[];for(let t=0;t<r.length;t+=1)l[t]=os(ns(a,r,t));return{c(){e=B("div");for(let t=0;t<l.length;t+=1)l[t].c();this.h()},l(t){e=$(t,"DIV",{class:!0});var s=ve(e);for(let n=0;n<l.length;n+=1)l[n].l(s);s.forEach(o),this.h()},h(){X(e,"class","file-list svelte-9u10j")},m(t,s){v(t,e,s);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(e,null)},p(t,s){if(s&20){r=Ie(t[2]);let n;for(n=0;n<r.length;n+=1){const i=ns(t,r,n);l[n]?l[n].p(i,s):(l[n]=os(i),l[n].c(),l[n].m(e,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&o(e),Xe(l,t)}}}function os(a){let e,r=a[7].name+"",l,t,s=a[7].nodeCount+"",n,i,f=a[7].edgeCount+"",h,d,_,m;function c(){return a[5](a[7])}return{c(){e=B("div"),l=k(r),t=k(" ("),n=k(s),i=k(" nodes, "),h=k(f),d=k(` edges)
          `),this.h()},l(u){e=$(u,"DIV",{class:!0});var E=ve(e);l=y(E,r),t=y(E," ("),n=y(E,s),i=y(E," nodes, "),h=y(E,f),d=y(E,` edges)
          `),E.forEach(o),this.h()},h(){X(e,"class","file-item svelte-9u10j")},m(u,E){v(u,e,E),q(e,l),q(e,t),q(e,n),q(e,i),q(e,h),q(e,d),_||(m=ge(e,"click",c),_=!0)},p(u,E){a=u,E&4&&r!==(r=a[7].name+"")&&J(l,r),E&4&&s!==(s=a[7].nodeCount+"")&&J(n,s),E&4&&f!==(f=a[7].edgeCount+"")&&J(h,f)},d(u){u&&o(e),_=!1,m()}}}function Fc(a){let e,r,l,t,s,n,i=a[1]&&is(a);return{c(){e=B("div"),r=B("button"),l=k(a[0]),t=x(),i&&i.c(),this.h()},l(f){e=$(f,"DIV",{class:!0});var h=ve(e);r=$(h,"BUTTON",{class:!0});var d=ve(r);l=y(d,a[0]),d.forEach(o),t=ee(h),i&&i.l(h),h.forEach(o),this.h()},h(){X(r,"class","svelte-9u10j"),X(e,"class","pick-list-container svelte-9u10j")},m(f,h){v(f,e,h),q(e,r),q(r,l),q(e,t),i&&i.m(e,null),s||(n=ge(r,"click",a[3]),s=!0)},p(f,[h]){h&1&&J(l,f[0]),f[1]?i?i.p(f,h):(i=is(f),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},i:ke,o:ke,d(f){f&&o(e),i&&i.d(),s=!1,n()}}}async function Lc(){return await(await fetch("/cad/examples.json")).json()}function jc(a,e,r){const l=ar();let t=!1,{selectedFile:s="Example Graphs"}=e,n=[];function i(){r(1,t=!t)}function f(d){r(0,s=d),r(1,t=!1),l("fileSelected",d)}Hr(async()=>{r(2,n=await Lc())});const h=d=>f(d.name);return a.$$set=d=>{"selectedFile"in d&&r(0,s=d.selectedFile)},[s,t,n,i,f,h]}class qc extends ft{constructor(e){super(),ut(this,e,jc,Fc,ot,{selectedFile:0})}}function fs(a){let e,r,l,t,s;return{c(){e=cl("path"),r=x(),l=cl("circle"),this.h()},l(n){e=dl(n,"path",{fill:!0,"stroke-width":!0,class:!0,stroke:!0,d:!0}),ve(e).forEach(o),r=ee(n),l=dl(n,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),ve(l).forEach(o),this.h()},h(){X(e,"fill","transparent"),X(e,"stroke-width",2.5),X(e,"class","animated"),X(e,"stroke","black"),X(e,"d",a[2]),X(l,"cx",t=a[0].tx),X(l,"cy",s=a[0].ty),X(l,"r",3),X(l,"stroke","black"),X(l,"stroke-width",1.5)},m(n,i){v(n,e,i),v(n,r,i),v(n,l,i)},p(n,i){i&4&&X(e,"d",n[2]),i&1&&t!==(t=n[0].tx)&&X(l,"cx",t),i&1&&s!==(s=n[0].ty)&&X(l,"cy",s)},d(n){n&&(o(e),o(r),o(l))}}}function zc(a){let e,r=a[1].inProgress&&fs(a);return{c(){r&&r.c(),e=Ee()},l(l){r&&r.l(l),e=Ee()},m(l,t){r&&r.m(l,t),v(l,e,t)},p(l,[t]){l[1].inProgress?r?r.p(l,t):(r=fs(l),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:ke,o:ke,d(l){l&&o(e),r&&r.d(l)}}}function Uc(a,e,r){let l;const t=gn();tt(a,t,i=>r(1,l=i));let s,n;return a.$$.update=()=>{if(a.$$.dirty&3){const i=structuredClone(l.fromNode);l.isValid?(r(0,n=fl(l.fromNode,l.toNode)),r(2,s=pl({sourceX:n.sx,sourceY:n.sy,sourcePosition:n.sourcePos,targetX:n.tx,targetY:n.ty,targetPosition:n.targetPos})[0])):(i.id="-1",i.measured={width:1,height:1},i.position={x:l.to.x,y:l.to.y},i.internals.positionAbsolute={x:l.to.x,y:l.to.y},r(0,n=fl(l.fromNode,i)),r(2,s=pl({sourceX:n.sx,sourceY:n.sy,sourcePosition:n.sourcePos,targetX:n.tx,targetY:n.ty,targetPosition:n.targetPos})[0]))}},[n,l,s,t]}class Vc extends ft{constructor(e){super(),ut(this,e,Uc,zc,ot,{})}}function us(a,e,r){const l=a.slice();return l[11]=e[r],l}function cs(a){let e,r,l,t,s,n,i,f,h,d,_,m,c;const u=a[7].default,E=ct(u,a,a[6],null);let g=Ie(a[3]),P=[];for(let I=0;I<g.length;I+=1)P[I]=ds(us(a,g,I));return{c(){e=B("div"),r=B("div"),l=B("h2"),t=k(a[1]),s=x(),n=B("p"),i=k(a[2]),f=x(),E&&E.c(),h=x(),d=B("div");for(let I=0;I<P.length;I+=1)P[I].c();this.h()},l(I){e=$(I,"DIV",{class:!0});var C=ve(e);r=$(C,"DIV",{class:!0});var D=ve(r);l=$(D,"H2",{});var p=ve(l);t=y(p,a[1]),p.forEach(o),s=ee(D),n=$(D,"P",{});var N=ve(n);i=y(N,a[2]),N.forEach(o),f=ee(D),E&&E.l(D),h=ee(D),d=$(D,"DIV",{class:!0});var S=ve(d);for(let F=0;F<P.length;F+=1)P[F].l(S);S.forEach(o),D.forEach(o),C.forEach(o),this.h()},h(){X(d,"class","options svelte-zbcx3u"),X(r,"class","modal-content center text-center svelte-zbcx3u"),X(e,"class","modal-overlay svelte-zbcx3u")},m(I,C){v(I,e,C),q(e,r),q(r,l),q(l,t),q(r,s),q(r,n),q(n,i),q(r,f),E&&E.m(r,null),q(r,h),q(r,d);for(let D=0;D<P.length;D+=1)P[D]&&P[D].m(d,null);_=!0,m||(c=[ge(r,"click",Ct(a[8])),ge(e,"click",a[4])],m=!0)},p(I,C){if((!_||C&2)&&J(t,I[1]),(!_||C&4)&&J(i,I[2]),E&&E.p&&(!_||C&64)&&dt(E,u,I,I[6],_?_t(u,I[6],C,null):ht(I[6]),null),C&40){g=Ie(I[3]);let D;for(D=0;D<g.length;D+=1){const p=us(I,g,D);P[D]?P[D].p(p,C):(P[D]=ds(p),P[D].c(),P[D].m(d,null))}for(;D<P.length;D+=1)P[D].d(1);P.length=g.length}},i(I){_||(ue(E,I),_=!0)},o(I){_e(E,I),_=!1},d(I){I&&o(e),E&&E.d(I),Xe(P,I),m=!1,Et(c)}}}function ds(a){let e,r=a[11].label+"",l,t,s,n;function i(){return a[9](a[11])}return{c(){e=B("button"),l=k(r),t=x(),this.h()},l(f){e=$(f,"BUTTON",{class:!0});var h=ve(e);l=y(h,r),t=ee(h),h.forEach(o),this.h()},h(){X(e,"class","svelte-zbcx3u")},m(f,h){v(f,e,h),q(e,l),q(e,t),s||(n=ge(e,"click",i),s=!0)},p(f,h){a=f,h&8&&r!==(r=a[11].label+"")&&J(l,r)},d(f){f&&o(e),s=!1,n()}}}function Mc(a){let e,r,l=a[0]&&cs(a);return{c(){l&&l.c(),e=Ee()},l(t){l&&l.l(t),e=Ee()},m(t,s){l&&l.m(t,s),v(t,e,s),r=!0},p(t,[s]){t[0]?l?(l.p(t,s),s&1&&ue(l,1)):(l=cs(t),l.c(),ue(l,1),l.m(e.parentNode,e)):l&&(Pt(),_e(l,1,1,()=>{l=null}),wt())},i(t){r||(ue(l),r=!0)},o(t){_e(l),r=!1},d(t){t&&o(e),l&&l.d(t)}}}function Bc(a,e,r){let{$$slots:l={},$$scope:t}=e,{is_open:s=!1}=e,{title:n=""}=e,{content:i=""}=e,{options:f=[{label:"Cancel",value:"cancel"}]}=e;const h=ar();function d(){r(0,s=!1)}function _(u){h("close_button_modal",u),d()}function m(u){Nt.call(this,a,u)}const c=u=>_(u);return a.$$set=u=>{"is_open"in u&&r(0,s=u.is_open),"title"in u&&r(1,n=u.title),"content"in u&&r(2,i=u.content),"options"in u&&r(3,f=u.options),"$$scope"in u&&r(6,t=u.$$scope)},[s,n,i,f,d,_,t,l,m,c]}class $c extends ft{constructor(e){super(),ut(this,e,Bc,Mc,ot,{is_open:0,title:1,content:2,options:3})}}function hs(a,e,r){const l=a.slice();return l[22]=e[r],l[23]=e,l[24]=r,l}function _s(a,e,r){const l=a.slice();return l[25]=e[r],l[26]=e,l[24]=r,l}function vs(a,e,r){const l=a.slice();return l[27]=e[r],l[28]=e,l[24]=r,l}function ms(a){let e,r,l,t,s,n,i,f,h,d,_,m,c="Save",u,E,g=`.form-row {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
  }

  .form-row label {
    width: 200px;
    text-align: right;
    margin-right: 10px;
  }

  .form-row input,
  .form-row textarea {
    flex-grow: 1;
  }`,P,I,C=a[0]&&ps(a);return{c(){e=B("div"),r=B("div"),l=B("h2"),t=k(a[2]),s=x(),n=B("p"),i=k(a[3]),f=x(),h=B("form"),C&&C.c(),d=x(),_=B("div"),m=B("button"),m.textContent=c,u=x(),E=B("style"),E.textContent=g,this.h()},l(D){e=$(D,"DIV",{class:!0});var p=ve(e);r=$(p,"DIV",{class:!0});var N=ve(r);l=$(N,"H2",{});var S=ve(l);t=y(S,a[2]),S.forEach(o),s=ee(N),n=$(N,"P",{});var F=ve(n);i=y(F,a[3]),F.forEach(o),f=ee(N),h=$(N,"FORM",{});var R=ve(h);C&&C.l(R),d=ee(R),_=$(R,"DIV",{class:!0});var T=ve(_);m=$(T,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),we(m)!=="svelte-ajsp9k"&&(m.textContent=c),T.forEach(o),R.forEach(o),u=ee(N),E=$(N,"STYLE",{"data-svelte-h":!0}),we(E)!=="svelte-bu94yd"&&(E.textContent=g),N.forEach(o),p.forEach(o),this.h()},h(){X(m,"type","submit"),X(m,"class","svelte-k723th"),X(_,"class","options svelte-k723th"),X(r,"class","modal-content center text-center svelte-k723th"),X(e,"class","modal-overlay svelte-k723th")},m(D,p){v(D,e,p),q(e,r),q(r,l),q(l,t),q(r,s),q(r,n),q(n,i),q(r,f),q(r,h),C&&C.m(h,null),q(h,d),q(h,_),q(_,m),q(r,u),q(r,E),P||(I=[ge(m,"click",a[5]),ge(r,"click",Ct(a[10])),ge(e,"click",a[4])],P=!0)},p(D,p){p&4&&J(t,D[2]),p&8&&J(i,D[3]),D[0]?C?C.p(D,p):(C=ps(D),C.c(),C.m(h,d)):C&&(C.d(1),C=null)},d(D){D&&o(e),C&&C.d(),P=!1,Et(I)}}}function ps(a){let e,r,l="Title:",t,s,n,i,f,h,d="+",_,m,c,u,E="+",g,P,I,C="Description:",D,p,N,S,F,R="Article:",T,b,O,w,A,Y="D3FEND Version:",ne,te,Q,H,V,U="CAD Schema Version:",Z,L,K,ye,Pe,ae="Published Date:",pe,fe,me,De,Ue='<code class="right">Example Date-Time format: 2023-10-05T14:30:00.000Z</code><br/>',W,j,re,je,Ke="+",at,He,gt=Ie(a[0].authors),Je=[];for(let de=0;de<gt.length;de+=1)Je[de]=gs(vs(a,gt,de));let Ge=Ie(a[0].orgs),ze=[];for(let de=0;de<Ge.length;de+=1)ze[de]=bs(_s(a,Ge,de));let Ze=Ie(a[0].references),We=[];for(let de=0;de<Ze.length;de+=1)We[de]=Es(hs(a,Ze,de));return{c(){e=B("div"),r=B("label"),r.textContent=l,t=x(),s=B("input"),n=x();for(let de=0;de<Je.length;de+=1)Je[de].c();i=x(),f=B("div"),h=B("button"),h.textContent=d,_=x();for(let de=0;de<ze.length;de+=1)ze[de].c();m=x(),c=B("div"),u=B("button"),u.textContent=E,g=x(),P=B("div"),I=B("label"),I.textContent=C,D=x(),p=B("input"),N=x(),S=B("div"),F=B("label"),F.textContent=R,T=x(),b=B("textarea"),O=x(),w=B("div"),A=B("label"),A.textContent=Y,ne=x(),te=B("input"),Q=x(),H=B("div"),V=B("label"),V.textContent=U,Z=x(),L=B("input"),K=x(),ye=B("div"),Pe=B("label"),Pe.textContent=ae,pe=x(),fe=B("input"),me=x(),De=B("div"),De.innerHTML=Ue,W=x();for(let de=0;de<We.length;de+=1)We[de].c();j=x(),re=B("div"),je=B("button"),je.textContent=Ke,this.h()},l(de){e=$(de,"DIV",{class:!0});var Oe=ve(e);r=$(Oe,"LABEL",{for:!0,"data-svelte-h":!0}),we(r)!=="svelte-kpfkpc"&&(r.textContent=l),t=ee(Oe),s=$(Oe,"INPUT",{id:!0}),Oe.forEach(o),n=ee(de);for(let xe=0;xe<Je.length;xe+=1)Je[xe].l(de);i=ee(de),f=$(de,"DIV",{class:!0});var Se=ve(f);h=$(Se,"BUTTON",{class:!0,"data-svelte-h":!0}),we(h)!=="svelte-1uaie2g"&&(h.textContent=d),Se.forEach(o),_=ee(de);for(let xe=0;xe<ze.length;xe+=1)ze[xe].l(de);m=ee(de),c=$(de,"DIV",{class:!0});var Ve=ve(c);u=$(Ve,"BUTTON",{class:!0,"data-svelte-h":!0}),we(u)!=="svelte-1cs3ez1"&&(u.textContent=E),Ve.forEach(o),g=ee(de),P=$(de,"DIV",{class:!0});var oe=ve(P);I=$(oe,"LABEL",{for:!0,"data-svelte-h":!0}),we(I)!=="svelte-1jjlhqk"&&(I.textContent=C),D=ee(oe),p=$(oe,"INPUT",{id:!0}),oe.forEach(o),N=ee(de),S=$(de,"DIV",{class:!0});var ie=ve(S);F=$(ie,"LABEL",{for:!0,"data-svelte-h":!0}),we(F)!=="svelte-pvmkb4"&&(F.textContent=R),T=ee(ie),b=$(ie,"TEXTAREA",{id:!0}),ve(b).forEach(o),ie.forEach(o),O=ee(de),w=$(de,"DIV",{class:!0});var he=ve(w);A=$(he,"LABEL",{for:!0,"data-svelte-h":!0}),we(A)!=="svelte-kepuyl"&&(A.textContent=Y),ne=ee(he),te=$(he,"INPUT",{id:!0}),he.forEach(o),Q=ee(de),H=$(de,"DIV",{class:!0});var be=ve(H);V=$(be,"LABEL",{for:!0,"data-svelte-h":!0}),we(V)!=="svelte-120m1i5"&&(V.textContent=U),Z=ee(be),L=$(be,"INPUT",{id:!0}),be.forEach(o),K=ee(de),ye=$(de,"DIV",{class:!0});var Ce=ve(ye);Pe=$(Ce,"LABEL",{for:!0,"data-svelte-h":!0}),we(Pe)!=="svelte-1wye32r"&&(Pe.textContent=ae),pe=ee(Ce),fe=$(Ce,"INPUT",{id:!0}),Ce.forEach(o),me=ee(de),De=$(de,"DIV",{class:!0,"data-svelte-h":!0}),we(De)!=="svelte-108zlq4"&&(De.innerHTML=Ue),W=ee(de);for(let xe=0;xe<We.length;xe+=1)We[xe].l(de);j=ee(de),re=$(de,"DIV",{class:!0});var Qe=ve(re);je=$(Qe,"BUTTON",{class:!0,"data-svelte-h":!0}),we(je)!=="svelte-rcymu8"&&(je.textContent=Ke),Qe.forEach(o),this.h()},h(){X(r,"for","title"),X(s,"id","title"),X(e,"class","form-row"),X(h,"class","svelte-k723th"),X(f,"class","form-row"),X(u,"class","svelte-k723th"),X(c,"class","form-row"),X(I,"for","description"),X(p,"id","description"),X(P,"class","form-row"),X(F,"for","article"),X(b,"id","article"),X(S,"class","form-row"),X(A,"for","d3fend-version"),X(te,"id","d3fend-version"),X(w,"class","form-row"),X(V,"for","cad-data-version"),X(L,"id","cad-data-version"),X(H,"class","form-row"),X(Pe,"for","published-date"),X(fe,"id","published-date"),X(ye,"class","form-row"),X(De,"class","form-row"),X(je,"class","svelte-k723th"),X(re,"class","form-row")},m(de,Oe){v(de,e,Oe),q(e,r),q(e,t),q(e,s),it(s,a[0].title),v(de,n,Oe);for(let Se=0;Se<Je.length;Se+=1)Je[Se]&&Je[Se].m(de,Oe);v(de,i,Oe),v(de,f,Oe),q(f,h),v(de,_,Oe);for(let Se=0;Se<ze.length;Se+=1)ze[Se]&&ze[Se].m(de,Oe);v(de,m,Oe),v(de,c,Oe),q(c,u),v(de,g,Oe),v(de,P,Oe),q(P,I),q(P,D),q(P,p),it(p,a[0].description),v(de,N,Oe),v(de,S,Oe),q(S,F),q(S,T),q(S,b),it(b,a[0].article),v(de,O,Oe),v(de,w,Oe),q(w,A),q(w,ne),q(w,te),it(te,a[0].d3fend_version),v(de,Q,Oe),v(de,H,Oe),q(H,V),q(H,Z),q(H,L),it(L,a[0].cad_data_version),v(de,K,Oe),v(de,ye,Oe),q(ye,Pe),q(ye,pe),q(ye,fe),it(fe,a[0].published_date),v(de,me,Oe),v(de,De,Oe),v(de,W,Oe);for(let Se=0;Se<We.length;Se+=1)We[Se]&&We[Se].m(de,Oe);v(de,j,Oe),v(de,re,Oe),q(re,je),at||(He=[ge(s,"input",a[11]),ge(h,"click",a[6]),ge(u,"click",a[7]),ge(p,"input",a[14]),ge(b,"input",a[15]),ge(te,"input",a[16]),ge(L,"input",a[17]),ge(fe,"input",a[18]),ge(je,"click",a[8])],at=!0)},p(de,Oe){if(Oe&1&&s.value!==de[0].title&&it(s,de[0].title),Oe&1){gt=Ie(de[0].authors);let Se;for(Se=0;Se<gt.length;Se+=1){const Ve=vs(de,gt,Se);Je[Se]?Je[Se].p(Ve,Oe):(Je[Se]=gs(Ve),Je[Se].c(),Je[Se].m(i.parentNode,i))}for(;Se<Je.length;Se+=1)Je[Se].d(1);Je.length=gt.length}if(Oe&1){Ge=Ie(de[0].orgs);let Se;for(Se=0;Se<Ge.length;Se+=1){const Ve=_s(de,Ge,Se);ze[Se]?ze[Se].p(Ve,Oe):(ze[Se]=bs(Ve),ze[Se].c(),ze[Se].m(m.parentNode,m))}for(;Se<ze.length;Se+=1)ze[Se].d(1);ze.length=Ge.length}if(Oe&1&&p.value!==de[0].description&&it(p,de[0].description),Oe&1&&it(b,de[0].article),Oe&1&&te.value!==de[0].d3fend_version&&it(te,de[0].d3fend_version),Oe&1&&L.value!==de[0].cad_data_version&&it(L,de[0].cad_data_version),Oe&1&&fe.value!==de[0].published_date&&it(fe,de[0].published_date),Oe&1){Ze=Ie(de[0].references);let Se;for(Se=0;Se<Ze.length;Se+=1){const Ve=hs(de,Ze,Se);We[Se]?We[Se].p(Ve,Oe):(We[Se]=Es(Ve),We[Se].c(),We[Se].m(j.parentNode,j))}for(;Se<We.length;Se+=1)We[Se].d(1);We.length=Ze.length}},d(de){de&&(o(e),o(n),o(i),o(f),o(_),o(m),o(c),o(g),o(P),o(N),o(S),o(O),o(w),o(Q),o(H),o(K),o(ye),o(me),o(De),o(W),o(j),o(re)),Xe(Je,de),Xe(ze,de),Xe(We,de),at=!1,Et(He)}}}function gs(a){let e,r,l="Authors:",t,s,n,i;function f(){a[12].call(s,a[28],a[24])}return{c(){e=B("div"),r=B("label"),r.textContent=l,t=x(),s=B("input"),this.h()},l(h){e=$(h,"DIV",{class:!0});var d=ve(e);r=$(d,"LABEL",{for:!0,"data-svelte-h":!0}),we(r)!=="svelte-1q1t6ag"&&(r.textContent=l),t=ee(d),s=$(d,"INPUT",{id:!0}),d.forEach(o),this.h()},h(){X(r,"for","author-"+a[24]),X(s,"id","author-"+a[24]),X(e,"class","form-row")},m(h,d){v(h,e,d),q(e,r),q(e,t),q(e,s),it(s,a[27]),n||(i=ge(s,"input",f),n=!0)},p(h,d){a=h,d&1&&s.value!==a[27]&&it(s,a[27])},d(h){h&&o(e),n=!1,i()}}}function bs(a){let e,r,l="Organization:",t,s,n,i;function f(){a[13].call(s,a[26],a[24])}return{c(){e=B("div"),r=B("label"),r.textContent=l,t=x(),s=B("input"),this.h()},l(h){e=$(h,"DIV",{class:!0});var d=ve(e);r=$(d,"LABEL",{for:!0,"data-svelte-h":!0}),we(r)!=="svelte-1b09fki"&&(r.textContent=l),t=ee(d),s=$(d,"INPUT",{id:!0}),d.forEach(o),this.h()},h(){X(r,"for","org-"+a[24]),X(s,"id","org-"+a[24]),X(e,"class","form-row")},m(h,d){v(h,e,d),q(e,r),q(e,t),q(e,s),it(s,a[25]),n||(i=ge(s,"input",f),n=!0)},p(h,d){a=h,d&1&&s.value!==a[25]&&it(s,a[25])},d(h){h&&o(e),n=!1,i()}}}function Es(a){let e,r,l="Reference:",t,s,n,i;function f(){a[19].call(s,a[23],a[24])}return{c(){e=B("div"),r=B("label"),r.textContent=l,t=x(),s=B("input"),this.h()},l(h){e=$(h,"DIV",{class:!0});var d=ve(e);r=$(d,"LABEL",{for:!0,"data-svelte-h":!0}),we(r)!=="svelte-14qxm2v"&&(r.textContent=l),t=ee(d),s=$(d,"INPUT",{id:!0}),d.forEach(o),this.h()},h(){X(r,"for","ref-"+a[24]),X(s,"id","ref-"+a[24]),X(e,"class","form-row")},m(h,d){v(h,e,d),q(e,r),q(e,t),q(e,s),it(s,a[22]),n||(i=ge(s,"input",f),n=!0)},p(h,d){a=h,d&1&&s.value!==a[22]&&it(s,a[22])},d(h){h&&o(e),n=!1,i()}}}function Hc(a){let e,r=a[1]&&ms(a);return{c(){r&&r.c(),e=Ee()},l(l){r&&r.l(l),e=Ee()},m(l,t){r&&r.m(l,t),v(l,e,t)},p(l,[t]){l[1]?r?r.p(l,t):(r=ms(l),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:ke,o:ke,d(l){l&&o(e),r&&r.d(l)}}}function Qc(a,e,r){let{meta:l}=e,{is_open:t=!1}=e,{title:s="CAD Graph Metadata Editor"}=e,{content:n=""}=e,{options:i=[{label:"Save",value:"save"}]}=e;ar();function f(){r(1,t=!1)}function h(){document.querySelector("form").checkValidity()&&r(1,t=!1)}(l??!1)&&(l=Os);function d(){l.authors.push(""),r(0,l)}function _(){l.orgs.push(""),r(0,l)}function m(){l.references.push(""),r(0,l)}function c(S){Nt.call(this,a,S)}function u(){l.title=this.value,r(0,l)}function E(S,F){S[F]=this.value,r(0,l)}function g(S,F){S[F]=this.value,r(0,l)}function P(){l.description=this.value,r(0,l)}function I(){l.article=this.value,r(0,l)}function C(){l.d3fend_version=this.value,r(0,l)}function D(){l.cad_data_version=this.value,r(0,l)}function p(){l.published_date=this.value,r(0,l)}function N(S,F){S[F]=this.value,r(0,l)}return a.$$set=S=>{"meta"in S&&r(0,l=S.meta),"is_open"in S&&r(1,t=S.is_open),"title"in S&&r(2,s=S.title),"content"in S&&r(3,n=S.content),"options"in S&&r(9,i=S.options)},[l,t,s,n,f,h,d,_,m,i,c,u,E,g,P,I,C,D,p,N]}class Gc extends ft{constructor(e){super(),ut(this,e,Qc,Hc,ot,{meta:0,is_open:1,title:2,content:3,options:9})}}function Ps(a,e,r){const l=a.slice();return l[66]=e[r],l[68]=r,l}function Kc(a){let e,r='This is an (very) alpha-level preview release. Please review and file bugs <a href="https://github.com/d3fend/d3fend/issues/14">here. </a>Early stage <a href="./docs">docs.</a>';return{c(){e=B("div"),e.innerHTML=r,this.h()},l(l){e=$(l,"DIV",{class:!0,"data-svelte-h":!0}),we(e)!=="svelte-x19ykg"&&(e.innerHTML=r),this.h()},h(){X(e,"class","font-small")},m(l,t){v(l,e,t)},p:ke,d(l){l&&o(e)}}}function ws(a){let e=a[66].message+"",r,l;return{c(){r=k(e),l=B("br")},l(t){r=y(t,e),l=$(t,"BR",{})},m(t,s){v(t,r,s),v(t,l,s)},p(t,s){s[0]&8&&e!==(e=t[66].message+"")&&J(r,e)},d(t){t&&(o(r),o(l))}}}function Jc(a){let e,r="<code>The tool fixed the errors needed to run but here is list of all import errors and warnings.</code>",l,t,s,n,i,f,h,d,_,m=Ie(a[3]),c=[];for(let u=0;u<m.length;u+=1)c[u]=ws(Ps(a,m,u));return{c(){e=B("div"),e.innerHTML=r,l=x(),t=B("br"),s=x(),n=B("br"),i=x();for(let u=0;u<c.length;u+=1)c[u].c();f=x(),h=B("br"),d=x(),_=B("br")},l(u){e=$(u,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-7el432"&&(e.innerHTML=r),l=ee(u),t=$(u,"BR",{}),s=ee(u),n=$(u,"BR",{}),i=ee(u);for(let E=0;E<c.length;E+=1)c[E].l(u);f=ee(u),h=$(u,"BR",{}),d=ee(u),_=$(u,"BR",{})},m(u,E){v(u,e,E),v(u,l,E),v(u,t,E),v(u,s,E),v(u,n,E),v(u,i,E);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(u,E);v(u,f,E),v(u,h,E),v(u,d,E),v(u,_,E)},p(u,E){if(E[0]&8){m=Ie(u[3]);let g;for(g=0;g<m.length;g+=1){const P=Ps(u,m,g);c[g]?c[g].p(P,E):(c[g]=ws(P),c[g].c(),c[g].m(f.parentNode,f))}for(;g<c.length;g+=1)c[g].d(1);c.length=m.length}},d(u){u&&(o(e),o(l),o(t),o(s),o(n),o(i),o(f),o(h),o(d),o(_)),Xe(c,u)}}}function Yc(a){let e;return{c(){e=k("Please only load models from URLs you trust!")},l(r){e=y(r,"Please only load models from URLs you trust!")},m(r,l){v(r,e,l)},d(r){r&&o(e)}}}function Xc(a){let e,r,l,t,s,n,i,f,h,d,_;return d=new kr({props:{$$slots:{default:[Yc]},$$scope:{ctx:a}}}),{c(){e=B("br"),r=x(),l=B("code"),t=k(a[2]),s=x(),n=B("br"),i=x(),f=B("br"),h=x(),Te(d.$$.fragment),this.h()},l(m){e=$(m,"BR",{}),r=ee(m),l=$(m,"CODE",{class:!0});var c=ve(l);t=y(c,a[2]),c.forEach(o),s=ee(m),n=$(m,"BR",{}),i=ee(m),f=$(m,"BR",{}),h=ee(m),Ae(d.$$.fragment,m),this.h()},h(){X(l,"class","center text-center")},m(m,c){v(m,e,c),v(m,r,c),v(m,l,c),q(l,t),v(m,s,c),v(m,n,c),v(m,i,c),v(m,f,c),v(m,h,c),Fe(d,m,c),_=!0},p(m,c){(!_||c[0]&4)&&J(t,m[2]);const u={};c[2]&128&&(u.$$scope={dirty:c,ctx:m}),d.$set(u)},i(m){_||(ue(d.$$.fragment,m),_=!0)},o(m){_e(d.$$.fragment,m),_=!1},d(m){m&&(o(e),o(r),o(l),o(s),o(n),o(i),o(f),o(h)),Le(d,m)}}}function Zc(a){let e;return{c(){e=k("Please only load models from URLs you trust!")},l(r){e=y(r,"Please only load models from URLs you trust!")},m(r,l){v(r,e,l)},d(r){r&&o(e)}}}function Wc(a){let e,r,l,t,s,n;return s=new kr({props:{$$slots:{default:[Zc]},$$scope:{ctx:a}}}),{c(){e=B("br"),r=x(),l=B("br"),t=x(),Te(s.$$.fragment)},l(i){e=$(i,"BR",{}),r=ee(i),l=$(i,"BR",{}),t=ee(i),Ae(s.$$.fragment,i)},m(i,f){v(i,e,f),v(i,r,f),v(i,l,f),v(i,t,f),Fe(s,i,f),n=!0},p(i,f){const h={};f[2]&128&&(h.$$scope={dirty:f,ctx:i}),s.$set(h)},i(i){n||(ue(s.$$.fragment,i),n=!0)},o(i){_e(s.$$.fragment,i),n=!1},d(i){i&&(o(e),o(r),o(l),o(t)),Le(s,i)}}}function ks(a){let e,r,l,t;return e=new kr({props:{alert_type:"warning",$$slots:{default:[xc]},$$scope:{ctx:a}}}),{c(){Te(e.$$.fragment),r=x(),l=B("br")},l(s){Ae(e.$$.fragment,s),r=ee(s),l=$(s,"BR",{})},m(s,n){Fe(e,s,n),v(s,r,n),v(s,l,n),t=!0},i(s){t||(ue(e.$$.fragment,s),t=!0)},o(s){_e(e.$$.fragment,s),t=!1},d(s){s&&(o(r),o(l)),Le(e,s)}}}function xc(a){let e;return{c(){e=k("Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},l(r){e=y(r,"Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},m(r,l){v(r,e,l)},d(r){r&&o(e)}}}function ed(a){let e,r,l,t,s=a[14].length+"",n,i,f,h,d,_,m,c,u,E,g="copy",P,I,C,D=a[14].length>2048&&ks(a);return{c(){D&&D.c(),e=x(),r=B("div"),l=B("code"),t=k("The encoded model has a string length of "),n=k(s),i=k(" characters."),f=x(),h=B("p"),d=B("button"),_=B("a"),m=k("Share URL"),c=x(),u=B("span"),E=B("button"),E.textContent=g,this.h()},l(p){D&&D.l(p),e=ee(p),r=$(p,"DIV",{});var N=ve(r);l=$(N,"CODE",{});var S=ve(l);t=y(S,"The encoded model has a string length of "),n=y(S,s),i=y(S," characters."),S.forEach(o),N.forEach(o),f=ee(p),h=$(p,"P",{});var F=ve(h);d=$(F,"BUTTON",{class:!0});var R=ve(d);_=$(R,"A",{href:!0});var T=ve(_);m=y(T,"Share URL"),T.forEach(o),R.forEach(o),c=ee(F),u=$(F,"SPAN",{});var b=ve(u);E=$(b,"BUTTON",{class:!0,"data-svelte-h":!0}),we(E)!=="svelte-1uua65l"&&(E.textContent=g),b.forEach(o),F.forEach(o),this.h()},h(){X(_,"href",a[15]),X(d,"class","svelte-q9zbzo"),X(E,"class","svelte-q9zbzo")},m(p,N){D&&D.m(p,N),v(p,e,N),v(p,r,N),q(r,l),q(l,t),q(l,n),q(l,i),v(p,f,N),v(p,h,N),q(h,d),q(d,_),q(_,m),q(h,c),q(h,u),q(u,E),P=!0,I||(C=ge(E,"click",a[41]),I=!0)},p(p,N){p[14].length>2048?D?N[0]&16384&&ue(D,1):(D=ks(p),D.c(),ue(D,1),D.m(e.parentNode,e)):D&&(Pt(),_e(D,1,1,()=>{D=null}),wt()),(!P||N[0]&16384)&&s!==(s=p[14].length+"")&&J(n,s),(!P||N[0]&32768)&&X(_,"href",p[15])},i(p){P||(ue(D),P=!0)},o(p){_e(D),P=!1},d(p){p&&(o(e),o(r),o(f),o(h)),D&&D.d(p),I=!1,C()}}}function ys(a){let e,r,l,t,s,n=a[4]>1&&Ss();return{c(){e=B("button"),r=k(a[4]),l=k(" import alert"),n&&n.c(),this.h()},l(i){e=$(i,"BUTTON",{class:!0});var f=ve(e);r=y(f,a[4]),l=y(f," import alert"),n&&n.l(f),f.forEach(o),this.h()},h(){X(e,"class","svelte-q9zbzo")},m(i,f){v(i,e,f),q(e,r),q(e,l),n&&n.m(e,null),t||(s=ge(e,"click",a[24]),t=!0)},p(i,f){f[0]&16&&J(r,i[4]),i[4]>1?n||(n=Ss(),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},d(i){i&&o(e),n&&n.d(),t=!1,s()}}}function Ss(a){let e;return{c(){e=k("s")},l(r){e=y(r,"s")},m(r,l){v(r,e,l)},d(r){r&&o(e)}}}function Ds(a){let e,r,l,t,s,n,i;return l=new li({props:{display:"inline"}}),{c(){e=B("span"),r=B("span"),Te(l.$$.fragment),t=x(),s=B("span"),n=k(a[18]),this.h()},l(f){e=$(f,"SPAN",{class:!0});var h=ve(e);r=$(h,"SPAN",{});var d=ve(r);Ae(l.$$.fragment,d),d.forEach(o),t=ee(h),s=$(h,"SPAN",{});var _=ve(s);n=y(_,a[18]),_.forEach(o),h.forEach(o),this.h()},h(){X(e,"class","right")},m(f,h){v(f,e,h),q(e,r),Fe(l,r,null),q(e,t),q(e,s),q(s,n),i=!0},p(f,h){(!i||h[0]&262144)&&J(n,f[18])},i(f){i||(ue(l.$$.fragment,f),i=!0)},o(f){_e(l.$$.fragment,f),i=!1},d(f){f&&o(e),Le(l)}}}function Cs(a){let e,r;return e=new Ec({props:{onClick:a[33],id:a[8].id,top:a[8].top,left:a[8].left,right:a[8].right,bottom:a[8].bottom}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t[0]&256&&(s.id=l[8].id),t[0]&256&&(s.top=l[8].top),t[0]&256&&(s.left=l[8].left),t[0]&256&&(s.right=l[8].right),t[0]&256&&(s.bottom=l[8].bottom),e.$set(s)},i(l){r||(ue(e.$$.fragment,l),r=!0)},o(l){_e(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function td(a){let e,r,l,t,s,n,i;e=new ai({props:{position:"top-left"}}),l=new Yn({props:{variant:Xn.Dots}});let f=a[8]&&Cs(a);return n=new Zn({props:{position:"top-right"}}),{c(){Te(e.$$.fragment),r=x(),Te(l.$$.fragment),t=x(),f&&f.c(),s=x(),Te(n.$$.fragment)},l(h){Ae(e.$$.fragment,h),r=ee(h),Ae(l.$$.fragment,h),t=ee(h),f&&f.l(h),s=ee(h),Ae(n.$$.fragment,h)},m(h,d){Fe(e,h,d),v(h,r,d),Fe(l,h,d),v(h,t,d),f&&f.m(h,d),v(h,s,d),Fe(n,h,d),i=!0},p(h,d){h[8]?f?(f.p(h,d),d[0]&256&&ue(f,1)):(f=Cs(h),f.c(),ue(f,1),f.m(s.parentNode,s)):f&&(Pt(),_e(f,1,1,()=>{f=null}),wt())},i(h){i||(ue(e.$$.fragment,h),ue(l.$$.fragment,h),ue(f),ue(n.$$.fragment,h),i=!0)},o(h){_e(e.$$.fragment,h),_e(l.$$.fragment,h),_e(f),_e(n.$$.fragment,h),i=!1},d(h){h&&(o(r),o(t),o(s)),Le(e,h),Le(l,h),f&&f.d(h),Le(n,h)}}}function rd(a){let e,r;return e=new Vc({props:{slot:"connectionLine"}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p:ke,i(l){r||(ue(e.$$.fragment,l),r=!0)},o(l){_e(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function ld(a){let e,r,l,t,s,n;return r=new Ac({}),t=new Jn({props:{nodes:hr,nodeTypes:En,edges:Lr,edgeTypes:Pn,fitView:!0,defaultEdgeOptions:a[21],maxZoom:2,minZoom:.3,$$slots:{connectionLine:[rd],default:[td]},$$scope:{ctx:a}}}),t.$on("dragover",a[27]),t.$on("drop",a[29]),t.$on("connect",a[28]),t.$on("nodecontextmenu",a[32]),t.$on("paneclick",a[33]),t.$on("onedgecreate",id),{c(){e=B("div"),Te(r.$$.fragment),l=x(),Te(t.$$.fragment),this.h()},l(i){e=$(i,"DIV",{slot:!0,id:!0,class:!0});var f=ve(e);Ae(r.$$.fragment,f),l=ee(f),Ae(t.$$.fragment,f),f.forEach(o),this.h()},h(){X(e,"slot","flow"),X(e,"id","slotted-flow"),X(e,"class","svelte-q9zbzo"),Rs(()=>a[47].call(e))},m(i,f){v(i,e,f),Fe(r,e,null),q(e,l),Fe(t,e,null),s=Tn(e,a[47].bind(e)),n=!0},p(i,f){const h={};f[0]&256|f[2]&128&&(h.$$scope={dirty:f,ctx:i}),t.$set(h)},i(i){n||(ue(r.$$.fragment,i),ue(t.$$.fragment,i),n=!0)},o(i){_e(r.$$.fragment,i),_e(t.$$.fragment,i),n=!1},d(i){i&&o(e),Le(r),Le(t),s()}}}function ad(a){let e,r,l;return r=new wn({}),{c(){e=B("div"),Te(r.$$.fragment),this.h()},l(t){e=$(t,"DIV",{slot:!0,class:!0});var s=ve(e);Ae(r.$$.fragment,s),s.forEach(o),this.h()},h(){X(e,"slot","drawer"),X(e,"class","side-panel close svelte-q9zbzo")},m(t,s){v(t,e,s),Fe(r,e,null),l=!0},p:ke,i(t){l||(ue(r.$$.fragment,t),l=!0)},o(t){_e(r.$$.fragment,t),l=!1},d(t){t&&o(e),Le(r)}}}function sd(a){let e,r,l,t,s,n,i,f,h,d,_,m,c,u,E,g,P,I="Load",C,D,p="Merge",N,S,F="Clear",R,T,b="Save",O,w,A,Y="Save As...",ne,te="Save As JSON...",Q,H="Save As Turtle...",V,U="Save As D3FEND Extension...",Z,L,K="Share",ye,Pe,ae,pe,fe,me,De,Ue,W,j,re="Graph Metadata",je,Ke,at,He,gt;function Je(ie){a[39](ie)}let Ge={title:a[0].title,content:a[0].content,options:a[0].options,$$slots:{default:[Xc]},$$scope:{ctx:a}};a[0].is_open!==void 0&&(Ge.is_open=a[0].is_open),e=new rs({props:Ge}),Ye.push(()=>yt(e,"is_open",Je)),e.$on("optionSelected",a[19]);function ze(ie){a[40](ie)}let Ze={title:a[1].title,content:a[1].content,options:a[1].options,$$slots:{default:[Wc]},$$scope:{ctx:a}};a[1].is_open!==void 0&&(Ze.is_open=a[1].is_open),t=new rs({props:Ze}),Ye.push(()=>yt(t,"is_open",ze)),t.$on("optionSelected",a[20]);function We(ie){a[42](ie)}let de={title:"Share this model with a URL",$$slots:{default:[ed]},$$scope:{ctx:a}};a[13]!==void 0&&(de.is_open=a[13]),i=new Sc({props:de}),Ye.push(()=>yt(i,"is_open",We));function Oe(ie){a[43](ie)}let Se={};a[7]!==void 0&&(Se.selectedFile=a[7]),_=new qc({props:Se}),Ye.push(()=>yt(_,"selectedFile",Oe)),_.$on("fileSelected",a[30]);let Ve=a[4]&&ys(a),oe=a[18]&&Ds(a);return Ke=new bn({props:{$$slots:{drawer:[ad],flow:[ld]},$$scope:{ctx:a}}}),{c(){Te(e.$$.fragment),l=x(),Te(t.$$.fragment),n=x(),Te(i.$$.fragment),h=x(),d=B("div"),Te(_.$$.fragment),c=x(),u=B("br"),E=x(),g=B("div"),P=B("button"),P.textContent=I,C=x(),D=B("button"),D.textContent=p,N=x(),S=B("button"),S.textContent=F,R=x(),T=B("button"),T.textContent=b,O=x(),w=B("select"),A=B("option"),A.textContent=Y,ne=B("option"),ne.textContent=te,Q=B("option"),Q.textContent=H,V=B("option"),V.textContent=U,Z=x(),L=B("button"),L.textContent=K,ye=x(),Pe=B("button"),ae=k("CAD Embed"),fe=k(`
     filename:   `),me=B("input"),De=x(),Ve&&Ve.c(),Ue=x(),oe&&oe.c(),W=x(),j=B("button"),j.textContent=re,je=x(),Te(Ke.$$.fragment),this.h()},l(ie){Ae(e.$$.fragment,ie),l=ee(ie),Ae(t.$$.fragment,ie),n=ee(ie),Ae(i.$$.fragment,ie),h=ee(ie),d=$(ie,"DIV",{class:!0});var he=ve(d);Ae(_.$$.fragment,he),he.forEach(o),c=ee(ie),u=$(ie,"BR",{}),E=ee(ie),g=$(ie,"DIV",{id:!0,class:!0});var be=ve(g);P=$(be,"BUTTON",{class:!0,"data-svelte-h":!0}),we(P)!=="svelte-r4end6"&&(P.textContent=I),C=ee(be),D=$(be,"BUTTON",{class:!0,"data-svelte-h":!0}),we(D)!=="svelte-1s1l97g"&&(D.textContent=p),N=ee(be),S=$(be,"BUTTON",{class:!0,"data-svelte-h":!0}),we(S)!=="svelte-1o4uly3"&&(S.textContent=F),R=ee(be),T=$(be,"BUTTON",{class:!0,"data-svelte-h":!0}),we(T)!=="svelte-qm8vdx"&&(T.textContent=b),O=ee(be),w=$(be,"SELECT",{class:!0});var Ce=ve(w);A=$(Ce,"OPTION",{"data-svelte-h":!0}),we(A)!=="svelte-hmrlsb"&&(A.textContent=Y),ne=$(Ce,"OPTION",{"data-svelte-h":!0}),we(ne)!=="svelte-1q30tr1"&&(ne.textContent=te),Q=$(Ce,"OPTION",{"data-svelte-h":!0}),we(Q)!=="svelte-pf55hp"&&(Q.textContent=H),V=$(Ce,"OPTION",{"data-svelte-h":!0}),we(V)!=="svelte-43fn33"&&(V.textContent=U),Ce.forEach(o),Z=ee(be),L=$(be,"BUTTON",{class:!0,"data-svelte-h":!0}),we(L)!=="svelte-mqt2ui"&&(L.textContent=K),ye=ee(be),Pe=$(be,"BUTTON",{class:!0});var Qe=ve(Pe);ae=y(Qe,"CAD Embed"),Qe.forEach(o),fe=y(be,`
     filename:   `),me=$(be,"INPUT",{style:!0,type:!0}),De=ee(be),Ve&&Ve.l(be),Ue=ee(be),oe&&oe.l(be),W=ee(be),j=$(be,"BUTTON",{class:!0,"data-svelte-h":!0}),we(j)!=="svelte-d0yv6c"&&(j.textContent=re),be.forEach(o),je=ee(ie),Ae(Ke.$$.fragment,ie),this.h()},h(){X(d,"class","toolbar-examples"),X(P,"class","svelte-q9zbzo"),X(D,"class","svelte-q9zbzo"),X(S,"class","svelte-q9zbzo"),X(T,"class","svelte-q9zbzo"),A.__value="",it(A,A.__value),ne.__value="json",it(ne,ne.__value),Q.__value="turtle",it(Q,Q.__value),V.__value="extension",it(V,V.__value),X(w,"class","save-as-dropdown svelte-q9zbzo"),a[6]===void 0&&Rs(()=>a[44].call(w)),X(L,"class"," svelte-q9zbzo"),X(Pe,"class"," svelte-q9zbzo"),Pe.disabled=pe=!a[16].length,lt(me,"width","275px"),X(me,"type","text"),X(j,"class","right svelte-q9zbzo"),X(g,"id","toolbar"),X(g,"class","svelte-q9zbzo")},m(ie,he){Fe(e,ie,he),v(ie,l,he),Fe(t,ie,he),v(ie,n,he),Fe(i,ie,he),v(ie,h,he),v(ie,d,he),Fe(_,d,null),v(ie,c,he),v(ie,u,he),v(ie,E,he),v(ie,g,he),q(g,P),q(g,C),q(g,D),q(g,N),q(g,S),q(g,R),q(g,T),q(g,O),q(g,w),q(w,A),q(w,ne),q(w,Q),q(w,V),hl(w,a[6],!0),q(g,Z),q(g,L),q(g,ye),q(g,Pe),q(Pe,ae),q(g,fe),q(g,me),it(me,a[5]),q(g,De),Ve&&Ve.m(g,null),q(g,Ue),oe&&oe.m(g,null),q(g,W),q(g,j),v(ie,je,he),Fe(Ke,ie,he),at=!0,He||(gt=[ge(P,"click",a[25]),ge(D,"click",a[26]),ge(S,"click",a[31]),ge(T,"click",a[22]),ge(w,"change",a[44]),ge(w,"change",a[23]),ge(L,"click",a[34]),ge(Pe,"click",a[35]),ge(me,"input",a[45]),ge(j,"click",a[46])],He=!0)},p(ie,he){const be={};he[0]&1&&(be.title=ie[0].title),he[0]&1&&(be.content=ie[0].content),he[0]&1&&(be.options=ie[0].options),he[0]&4|he[2]&128&&(be.$$scope={dirty:he,ctx:ie}),!r&&he[0]&1&&(r=!0,be.is_open=ie[0].is_open,kt(()=>r=!1)),e.$set(be);const Ce={};he[0]&2&&(Ce.title=ie[1].title),he[0]&2&&(Ce.content=ie[1].content),he[0]&2&&(Ce.options=ie[1].options),he[2]&128&&(Ce.$$scope={dirty:he,ctx:ie}),!s&&he[0]&2&&(s=!0,Ce.is_open=ie[1].is_open,kt(()=>s=!1)),t.$set(Ce);const Qe={};he[0]&49152|he[2]&128&&(Qe.$$scope={dirty:he,ctx:ie}),!f&&he[0]&8192&&(f=!0,Qe.is_open=ie[13],kt(()=>f=!1)),i.$set(Qe);const xe={};!m&&he[0]&128&&(m=!0,xe.selectedFile=ie[7],kt(()=>m=!1)),_.$set(xe),he[0]&64&&hl(w,ie[6]),(!at||he[0]&65536&&pe!==(pe=!ie[16].length))&&(Pe.disabled=pe),he[0]&32&&me.value!==ie[5]&&it(me,ie[5]),ie[4]?Ve?Ve.p(ie,he):(Ve=ys(ie),Ve.c(),Ve.m(g,Ue)):Ve&&(Ve.d(1),Ve=null),ie[18]?oe?(oe.p(ie,he),he[0]&262144&&ue(oe,1)):(oe=Ds(ie),oe.c(),ue(oe,1),oe.m(g,W)):oe&&(Pt(),_e(oe,1,1,()=>{oe=null}),wt());const St={};he[0]&1792|he[2]&128&&(St.$$scope={dirty:he,ctx:ie}),Ke.$set(St)},i(ie){at||(ue(e.$$.fragment,ie),ue(t.$$.fragment,ie),ue(i.$$.fragment,ie),ue(_.$$.fragment,ie),ue(oe),ue(Ke.$$.fragment,ie),at=!0)},o(ie){_e(e.$$.fragment,ie),_e(t.$$.fragment,ie),_e(i.$$.fragment,ie),_e(_.$$.fragment,ie),_e(oe),_e(Ke.$$.fragment,ie),at=!1},d(ie){ie&&(o(l),o(n),o(h),o(d),o(c),o(u),o(E),o(g),o(je)),Le(e,ie),Le(t,ie),Le(i,ie),Le(_),Ve&&Ve.d(),oe&&oe.d(),Le(Ke,ie),He=!1,Et(gt)}}}function nd(a){let e,r,l,t,s,n,i='D3FEND <span class="snakes"></span> <span class="CAD"><span style="color:#e62929;">C</span><span class="A svelte-q9zbzo" style="color:white;text-border:1px;">A</span><span style="color:blue;">D</span></span>',f,h,d,_,m,c,u,E,g,P,I,C;e=new ri({props:{title:"D3FEND CAD Tool",og_title:"D3FEND CAD Tool",og_description:"Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios",og_type:"app",og_url:"",og_image:""}}),h=new kr({props:{alert_type:"info",$$slots:{default:[Kc]},$$scope:{ctx:a}}});function D(R){a[36](R)}let p={title:a[4]+" import alerts",$$slots:{default:[Jc]},$$scope:{ctx:a}};a[12]!==void 0&&(p.is_open=a[12]),_=new $c({props:p}),Ye.push(()=>yt(_,"is_open",D));function N(R){a[37](R)}function S(R){a[38](R)}let F={};return a[11]!==void 0&&(F.is_open=a[11]),a[17]!==void 0&&(F.meta=a[17]),u=new Gc({props:F}),Ye.push(()=>yt(u,"is_open",N)),Ye.push(()=>yt(u,"meta",S)),I=new Ic({props:{position:"right",$$slots:{default:[sd]},$$scope:{ctx:a}}}),{c(){Te(e.$$.fragment),r=x(),l=B("div"),t=B("div"),s=B("div"),n=B("h1"),n.innerHTML=i,f=x(),Te(h.$$.fragment),d=x(),Te(_.$$.fragment),c=x(),Te(u.$$.fragment),P=x(),Te(I.$$.fragment),this.h()},l(R){Ae(e.$$.fragment,R),r=ee(R),l=$(R,"DIV",{class:!0});var T=ve(l);t=$(T,"DIV",{style:!0});var b=ve(t);s=$(b,"DIV",{style:!0});var O=ve(s);n=$(O,"H1",{class:!0,title:!0,"data-svelte-h":!0}),we(n)!=="svelte-xxt2o6"&&(n.innerHTML=i),f=ee(O),Ae(h.$$.fragment,O),O.forEach(o),b.forEach(o),T.forEach(o),d=ee(R),Ae(_.$$.fragment,R),c=ee(R),Ae(u.$$.fragment,R),P=ee(R),Ae(I.$$.fragment,R),this.h()},h(){X(n,"class","fancy-font svelte-q9zbzo"),X(n,"title","Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios"),lt(s,"text-align","center"),lt(s,"flex-grow","1"),lt(t,"display","flex"),lt(t,"just-content","space-between"),lt(t,"align-items","center"),X(l,"class","title-egg svelte-q9zbzo")},m(R,T){Fe(e,R,T),v(R,r,T),v(R,l,T),q(l,t),q(t,s),q(s,n),q(s,f),Fe(h,s,null),v(R,d,T),Fe(_,R,T),v(R,c,T),Fe(u,R,T),v(R,P,T),Fe(I,R,T),C=!0},p(R,T){const b={};T[2]&128&&(b.$$scope={dirty:T,ctx:R}),h.$set(b);const O={};T[0]&16&&(O.title=R[4]+" import alerts"),T[0]&8|T[2]&128&&(O.$$scope={dirty:T,ctx:R}),!m&&T[0]&4096&&(m=!0,O.is_open=R[12],kt(()=>m=!1)),_.$set(O);const w={};!E&&T[0]&2048&&(E=!0,w.is_open=R[11],kt(()=>E=!1)),!g&&T[0]&131072&&(g=!0,w.meta=R[17],kt(()=>g=!1)),u.$set(w);const A={};T[0]&389111|T[2]&128&&(A.$$scope={dirty:T,ctx:R}),I.$set(A)},i(R){C||(ue(e.$$.fragment,R),ue(h.$$.fragment,R),ue(_.$$.fragment,R),ue(u.$$.fragment,R),ue(I.$$.fragment,R),C=!0)},o(R){_e(e.$$.fragment,R),_e(h.$$.fragment,R),_e(_.$$.fragment,R),_e(u.$$.fragment,R),_e(I.$$.fragment,R),C=!1},d(R){R&&(o(r),o(l),o(d),o(c),o(P)),Le(e,R),Le(h),Le(_,R),Le(u,R),Le(I,R)}}}function id(a){console.log(a),console.log(a)}function od(a,e,r){let l,t,s,n,i;tt(a,Ln,oe=>r(49,l=oe)),tt(a,Lr,oe=>r(50,t=oe)),tt(a,hr,oe=>r(16,s=oe)),tt(a,lr,oe=>r(17,n=oe)),tt(a,Dt,oe=>r(18,i=oe));var f=this&&this.__awaiter||function(oe,ie,he,be){function Ce(Qe){return Qe instanceof he?Qe:new he(function(xe){xe(Qe)})}return new(he||(he=Promise))(function(Qe,xe){function St(Lt){try{Vt(be.next(Lt))}catch(er){xe(er)}}function xt(Lt){try{Vt(be.throw(Lt))}catch(er){xe(er)}}function Vt(Lt){Lt.done?Qe(Lt.value):Ce(Lt.value).then(St,xt)}Vt((be=be.apply(oe,ie||[])).next())})};const h=new Tf({useDefaults:!0,allErrors:!0});let d={is_open:!1,title:"Confirmation to load remote model from URL",content:"This page is instructing D3FEND to remotely load a CAD model from this URL:",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},_={is_open:!1,title:"Confirmation to load remote model from compressed URL",content:"This page is instructing D3FEND to load a CAD model from this URL",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},m;l.url.searchParams.get("load")&&(m=l.url.searchParams.get("load"),d.is_open=!0),l.url.searchParams.get("loadg")&&(_.is_open=!0);function c(oe){const ie=oe.detail;ie.value==="load"?(Dt.add("loading remote URL"),ne(m),Dt.clear()):ie.value}function u(oe){const ie=oe.detail;if(ie.value==="load"){Dt.add("loading graph from URL");const he=l.url.searchParams.get("loadg"),be=bl.uncrush(he);let Ce=JSON.parse(be);R(Ce),Dt.clear()}else ie.value}Hr(()=>f(void 0,void 0,void 0,function*(){Dt.add("Mounting app...");try{Wn.initialize(),Dt.clear()}catch(oe){console.error("Failed to initialize Oxigraph in +layout.svelte",oe),oe.message}}));let E={type:"editableEdge",data:{label:void 0},markerEnd:{type:Kn.ArrowClosed}},g,P,I="d3fend-cad.json",C="";function D(){const oe=JSON.stringify({meta:n,nodes:s,edges:t},null,4),ie=new Blob([oe],{type:"application/json"}),he=window.URL.createObjectURL(ie),be=document.createElement("a");be.href=he,be.download=I,r(4,P=0),document.body.appendChild(be),be.click(),document.body.removeChild(be),window.URL.revokeObjectURL(he)}function p(){console.log("Saving As D3FEND Ontology Extension..."),Dt.add("Generating D3FEND Ontology Extension in Turtle file");let oe=prompt("Enter extension name to save as D3FEND Ontology Extension Turtle file as d3fend-cad-ext-<extension-name-here>.ttl","my-extension");const ie="d3fend-cad-ext-"+oe+".ttl";ti(oe).then(he=>{Dt.clear();const be=new Blob([he],{type:"text/turtle"}),Ce=window.URL.createObjectURL(be),Qe=document.createElement("a");Qe.href=Ce,ie&&(Qe.download=ie,document.body.appendChild(Qe),Qe.click(),document.body.removeChild(Qe)),window.URL.revokeObjectURL(Ce)}).catch(he=>{console.error("Error generating D3FEND Ontology Extension in Turtle: ",he)})}function N(){C==="json"?F():C==="turtle"?S():C==="extension"&&p(),r(6,C="")}function S(){Dt.add("generating ttl file"),console.log("!!! Turtle export engaged !!!"),ei().then(oe=>{Dt.clear();const ie=new Blob([oe],{type:"text/turtle"}),he=window.URL.createObjectURL(ie),be=document.createElement("a");be.href=he;let Ce=prompt("Enter filename to save as Turtle file",I.replace("json","ttl"));r(4,P=0),Ce&&(be.download=Ce,document.body.appendChild(be),be.click(),document.body.removeChild(be)),window.URL.revokeObjectURL(he)}).catch(oe=>{console.error("Error serializing graph to Turtle: ",oe)})}function F(){const oe=JSON.stringify({meta:n,nodes:s,edges:t},null,4),ie=new Blob([oe],{type:"application/json"}),he=window.URL.createObjectURL(ie),be=document.createElement("a");be.href=he;let Ce=prompt("Enter filename to save as JSON file",I);r(4,P=0),r(5,I=Ce),Ce&&(be.download=Ce,document.body.appendChild(be),be.click(),document.body.removeChild(be)),window.URL.revokeObjectURL(he)}function R(oe){try{const ie=h.compile(Ir),he=ie(oe);r(3,g=ie.errors),he?r(4,P=0):oe=T(ie.errors,oe);const be=oe.nodes,Ce=oe.edges;oe.meta&&Zt(lr,n=oe.meta,n),Dt.add("loading graph from data..."),Or(be,Ce),w(),window.addEventListener("beforeunload",Qe=>{console.log("User is leaving the page"),Qe.preventDefault(),Qe.returnValue=""}),Dt.clear()}catch(ie){console.error("Error parsing JSON:",ie)}}function T(oe,ie){r(4,P=oe.length);for(const he of oe){if(he.params.missingProperty=="user_properties"){let be=he.dataPath.replace(/\D/g,"");be=parseInt(be),ie.nodes[be].data.user_properties=[]}he.params.missingProperty=="meta"&&(ie.meta=Object.assign(Object.assign({},Os),ie.meta))}return ie}function b(){r(12,Ue=!0)}const{screenToFlowPosition:O,fitView:w}=ni();function A(oe){const ie=oe.target.files[0];if(ie){const he=new FileReader;he.onload=be=>{if(typeof be.target.result=="string"){r(5,I=ie.name);try{let Ce=JSON.parse(be.target.result);const Qe=h.compile(Ir),xe=Qe(Ce);r(3,g=Qe.errors),xe?r(4,P=0):Ce=T(Qe.errors,Ce),Ce.meta&&Zt(lr,n=Ce.meta,n);const St=Ce.nodes,xt=Ce.edges;Or(St,xt),w(),window.addEventListener("beforeunload",Vt=>{console.log("User is leaving the page"),Vt.preventDefault(),Vt.returnValue=""})}catch(Ce){console.error("Error parsing JSON:",Ce)}}else console.error("File content is not a string.")},he.onerror=()=>{console.error("Error reading file:",he.error)},he.readAsText(ie)}}function Y(oe){const ie=oe.target.files[0];if(ie){const he=new FileReader;he.onload=be=>{if(typeof be.target.result=="string"){console.log(be.target.result);try{const Ce=JSON.parse(be.target.result);hr.set([...s,...Ce.nodes]),Lr.set([...t,...Ce.edges]),alert(` added ${Ce.nodes.length} nodes and ${Ce.edges.length} edges to the current graph `)}catch(Ce){console.error("Error parsing JSON:",Ce),alert(`Error parsing JSON:", ${Ce}`)}}else console.error("File content is not a string."),alert("File content is not a string.")},he.onerror=()=>{console.error("Error reading file:",he.error),alert(`Error reading file: ${he.error}`)},he.readAsText(ie)}}function ne(oe){return f(this,void 0,void 0,function*(){if(oe)try{let he=yield(yield fetch(oe)).json();const be=h.compile(Ir),Ce=be(he);r(3,g=be.errors),Ce?r(4,P=0):he=T(be.errors,he),he.meta&&Zt(lr,n=he.meta,n);const Qe=he.nodes,xe=he.edges;Or(Qe,xe),w()}catch(ie){console.error("Error parsing JSON:",ie)}})}function te(){const oe=document.createElement("input");oe.type="file",oe.accept=".json",oe.onchange=ie=>{A(ie)},oe.click()}function Q(){const oe=document.createElement("input");oe.type="file",oe.accept=".json",oe.onchange=ie=>{Y(ie)},oe.click()}const H=oe=>{oe.preventDefault(),oe.dataTransfer&&(oe.dataTransfer.dropEffect="move")},V=oe=>console.log("handle onConnect",oe),U=oe=>{if(oe.preventDefault(),!oe.dataTransfer)return null;const ie=oe.dataTransfer.getData("application/svelteflow"),he=O({x:oe.clientX,y:oe.clientY}),be={id:`${Math.random()}`,type:ie,position:he,data:{label:null,sequence:"0",user_properties:[]},origin:[.5,0]};s.push(be),hr.set(s)};function Z(oe){return f(this,void 0,void 0,function*(){const ie=oe.detail;r(5,I=ie);try{const he=yield fetch(`/resources/cad/examples/${ie}`);if(!he.ok)throw new Error(`HTTP error! status: ${he.status}`);const be=yield he.json();R(be)}catch(he){console.error("Error fetching JSON file:",he)}})}let L;function K(){xn(),r(4,P=0),r(7,L="Example Graphs"),r(5,I="d3fend-cad.json")}let ye,Pe,ae;function pe({detail:{event:oe,node:ie}}){oe.preventDefault();let he=50;console.log({Y:oe.clientY,X:oe.clientX,height:ae,width:Pe}),r(8,ye={id:ie.id,top:oe.clientY<ae-he?oe.clientY:void 0,left:oe.clientX<Pe-he?oe.clientX:void 0,right:oe.clientX>=Pe-he?Pe-oe.clientX:void 0,bottom:oe.clientY>=ae-he?ae-oe.clientY:void 0}),me({detail:{event:oe,node:ie}})}function fe(){r(8,ye=null),gl.set(null)}function me({detail:{event:oe,node:ie}}){gl.set(ie)}let De=!1,Ue=!1,W=!1,j,re;function je(){Dt.add("compressing graph to string..."),r(13,W=!0);const oe=bl.crush(JSON.stringify({nodes:s,edges:t}));r(14,j=encodeURIComponent(oe)),r(15,re=l.url.origin+`/cad/?loadg=${j}`),Dt.clear()}function Ke(){jn("/cad-view/")}function at(oe){Ue=oe,r(12,Ue)}function He(oe){De=oe,r(11,De)}function gt(oe){n=oe,lr.set(n)}function Je(oe){a.$$.not_equal(d.is_open,oe)&&(d.is_open=oe,r(0,d))}function Ge(oe){a.$$.not_equal(_.is_open,oe)&&(_.is_open=oe,r(1,_))}const ze=()=>zn(re);function Ze(oe){W=oe,r(13,W)}function We(oe){L=oe,r(7,L)}function de(){C=On(this),r(6,C)}function Oe(){I=this.value,r(5,I)}const Se=()=>r(11,De=!De);function Ve(){Pe=this.clientWidth,ae=this.clientHeight,r(9,Pe),r(10,ae)}return[d,_,m,g,P,I,C,L,ye,Pe,ae,De,Ue,W,j,re,s,n,i,c,u,E,D,N,b,te,Q,H,V,U,Z,K,pe,fe,je,Ke,at,He,gt,Je,Ge,ze,Ze,We,de,Oe,Se,Ve]}class fd extends ft{constructor(e){super(),ut(this,e,od,nd,ot,{},null,[-1,-1,-1])}}function ud(a){let e,r;return e=new fd({}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},i(l){r||(ue(e.$$.fragment,l),r=!0)},o(l){_e(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function cd(a){let e,r;return e=new kn({props:{$$slots:{default:[ud]},$$scope:{ctx:a}}}),{c(){Te(e.$$.fragment)},l(l){Ae(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,[t]){const s={};t&4&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(ue(e.$$.fragment,l),r=!0)},o(l){_e(e.$$.fragment,l),r=!1},d(l){Le(e,l)}}}function dd(a,e,r){let l,{data:t}=e;return a.$$set=s=>{"data"in s&&r(0,t=s.data)},a.$$.update=()=>{a.$$.dirty&1&&r(1,l=t.remote_d3fend_tree?t.remote_d3fend_tree.map(s=>({...s,children:Ns(s.children,s["rdfs:label"])})):[]),a.$$.dirty&3&&(yn.set(l),Sn.set(t.attack),Dn.set(t.dao),Cn.set(t.events),Nn.set(t.weaknesses),Rn.set(t.properties),In.set(t.digital_information))},[t,l]}class Fd extends ft{constructor(e){super(),ut(this,e,dd,cd,ot,{data:0})}}export{Fd as component,Ad as universal};

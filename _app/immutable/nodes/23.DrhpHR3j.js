import{g as fl,b as vn,f as Rs,a as mn,c as pn,u as qt,d as zt,h as gn,i as ul,j as St,F as bn,n as En,e as Pn,P as wn,S as kn,k as yn,l as Sn,m as Dn,o as Cn,w as Nn,p as Rn,q as On}from"../chunks/PropertyPanel.DjfaOvZW.js";import{s as cl}from"../chunks/sortBy.ChsTRid8.js";import{as as ze,s as tt,c as ot,e as M,t as k,b as ee,d as B,f as pe,h as y,j as te,i,x as W,k as v,l as L,p as be,a4 as Rt,ar as Vt,u as it,g as ft,a as ut,m as Y,A as mt,o as Je,W as Ot,L as He,n as ke,y as we,v as Ee,P as Qe,V as Et,G as Ze,r as er,Y as sr,I as ur,q as Qr,M as dl,N as hl,R as et,a2 as Os,ap as _l,aq as In,ak as Tn}from"../chunks/scheduler.DDVliNtX.js";import{S as at,i as st,g as gt,a as me,e as bt,t as de,c as Re,b as Oe,m as Ie,d as Te,f as Pt}from"../chunks/index.iWffroUJ.js";import{e as Ne}from"../chunks/each.BFyodu2L.js";import{c as An,a as Fn}from"../chunks/_commonjsHelpers.C4iS2aBk.js";import{s as Ir}from"../chunks/schema.Bj6Dq62H.js";import{p as Ln}from"../chunks/stores.BdiyzEJf.js";import{g as jn}from"../chunks/entry.X8aEdoBE.js";import{A as yr}from"../chunks/Alert.BsS8d9Dv.js";import{T as Kt,b as he,a as Is,G as mr,m as qn,d as pr,o as zn}from"../chunks/lib.DSnscA8f.js";/* empty css                     */import{j as Un,u as Vn,l as Mn,m as vl,n as ml,o as pl,p as Bn,q as $n,r as Hn,s as Qn,t as Gn,i as gl,M as Kn,S as Jn,B as Yn,a as Xn,b as Zn}from"../chunks/style.CoMyASxi.js";import{d as Ts,e as jr,n as _r,m as ar,o as Wn,i as Tr,c as xn,s as bl,a as eo,b as to}from"../chunks/graphStore.B8y91TQ5.js";import{G as Mt}from"../chunks/_Graph.CGXTKsEb.js";import{t as gr,T as As}from"../chunks/ToggleBar.Dt3UQwWP.js";import{J as El}from"../chunks/JSONCrush.BlUS0oeb.js";import{T as ro}from"../chunks/Title.geje0d_0.js";import{L as lo}from"../chunks/Loading.CSl94oYn.js";import{C as ao}from"../chunks/Controls.CAcLyyHp.js";async function so({fetch:a}){const e=["/api/offensive-technique/all.json","/api/dao/artifacts.json","/api/taxonomies/d3f:DigitalEvent.json","/api/weakness/all.json","/api/ontology/properties/object/all.json","/api/dao/artifact/d3f:DigitalInformation.json"],[{value:{["@graph"]:r}},{value:{["@graph"]:l}},{value:{["@graph"]:t}},{value:{["@graph"]:s}},{value:{["@graph"]:n}},{value:{da_graph:{["@graph"]:o}}}]=await Promise.allSettled(e.map(u=>a(u).then(E=>E.json()))),f=cl(fl(r,"rdfs:label"),u=>u["rdfs:label"]),d=vn(t,"d3f:DigitalEvent").map(u=>({...u,children:fl(Rs(u.children,u["rdfs:label"]),"rdfs:label")})),_=cl(s,u=>u["rdfs:label"]),m=mn(n),c=pn(o);return{attack:f,dao:l,events:d,weaknesses:_,properties:m,digital_information:c}}const Ad=Object.freeze(Object.defineProperty({__proto__:null,load:so},Symbol.toStringTag,{value:"Module"})),Pl=a=>Un(a);function no(){const{zoomIn:a,zoomOut:e,fitView:r,onbeforedelete:l,snapGrid:t,viewport:s,width:n,height:o,minZoom:f,maxZoom:h,panZoom:d,nodes:_,edges:m,domNode:c,nodeLookup:u,nodeOrigin:E,edgeLookup:g,connectionLookup:P}=Vn(),O=p=>{var T,b;const R=ze(u),C=Pl(p)?p:R.get(p.id),F=C.parentId?Qn(C.position,C.measured,C.parentId,R,ze(E)):C.position,N={id:C.id,position:F,width:((T=C.measured)==null?void 0:T.width)??C.width,height:((b=C.measured)==null?void 0:b.height)??C.height,data:C.data};return ml(N)},D=(p,R,C={replace:!1})=>{var T;const F=(T=ze(u).get(p))==null?void 0:T.internals.userNode;if(!F)return;const N=typeof R=="function"?R(F):R;C.replace?_.update(b=>b.map(I=>I.id===p?Pl(N)?N:{...I,...N}:I)):(Object.assign(F,N),_.update(b=>b))},S=p=>ze(u).get(p);return{zoomIn:a,zoomOut:e,getInternalNode:S,getNode:p=>{var R;return(R=S(p))==null?void 0:R.internals.userNode},getNodes:p=>p===void 0?ze(_):wl(ze(u),p),getEdge:p=>ze(g).get(p),getEdges:p=>p===void 0?ze(m):wl(ze(g),p),setZoom:(p,R)=>{const C=ze(d);return C?C.scaleTo(p,{duration:R==null?void 0:R.duration}):Promise.resolve(!1)},getZoom:()=>ze(s).zoom,setViewport:async(p,R)=>{const C=ze(s),F=ze(d);return F?(await F.setViewport({x:p.x??C.x,y:p.y??C.y,zoom:p.zoom??C.zoom},{duration:R==null?void 0:R.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>ze(s),setCenter:async(p,R,C)=>{const F=typeof(C==null?void 0:C.zoom)<"u"?C.zoom:ze(h),N=ze(d);return N?(await N.setViewport({x:ze(n)/2-p*F,y:ze(o)/2-R*F,zoom:F},{duration:C==null?void 0:C.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:r,fitBounds:async(p,R)=>{const C=ze(d);if(!C)return Promise.resolve(!1);const F=Mn(p,ze(n),ze(o),ze(f),ze(h),(R==null?void 0:R.padding)??.1);return await C.setViewport(F,{duration:R==null?void 0:R.duration}),Promise.resolve(!0)},getIntersectingNodes:(p,R=!0,C)=>{const F=vl(p),N=F?p:O(p);return N?(C||ze(_)).filter(T=>{const b=ze(u).get(T.id);if(!b||!F&&T.id===p.id)return!1;const I=ml(b),w=pl(I,N);return R&&w>0||w>=N.width*N.height}):[]},isNodeIntersecting:(p,R,C=!0)=>{const N=vl(p)?p:O(p);if(!N)return!1;const T=pl(N,R);return C&&T>0||T>=N.width*N.height},deleteElements:async({nodes:p=[],edges:R=[]})=>{const{nodes:C,edges:F}=await Bn({nodesToRemove:p,edgesToRemove:R,nodes:ze(_),edges:ze(m),onBeforeDelete:ze(l)});return C&&_.update(N=>N.filter(T=>!C.some(({id:b})=>b===T.id))),F&&m.update(N=>N.filter(T=>!F.some(({id:b})=>b===T.id))),{deletedNodes:C,deletedEdges:F}},screenToFlowPosition:(p,R={snapToGrid:!0})=>{const C=ze(c);if(!C)return p;const F=R.snapToGrid?ze(t):!1,{x:N,y:T,zoom:b}=ze(s),{x:I,y:w}=C.getBoundingClientRect(),A={x:p.x-I,y:p.y-w};return $n(A,[N,T,b],F!==null,F||[1,1])},flowToScreenPosition:p=>{const R=ze(c);if(!R)return p;const{x:C,y:F,zoom:N}=ze(s),{x:T,y:b}=R.getBoundingClientRect(),I=Gn(p,[C,F,N]);return{x:I.x+T,y:I.y+b}},toObject:()=>({nodes:ze(_).map(p=>({...p,position:{...p.position},data:{...p.data}})),edges:ze(m).map(p=>({...p})),viewport:{...ze(s)}}),updateNode:D,updateNodeData:(p,R,C)=>{var T;const F=(T=ze(u).get(p))==null?void 0:T.internals.userNode;if(!F)return;const N=typeof R=="function"?R(F):R;F.data=C!=null&&C.replace?N:{...F.data,...N},_.update(b=>b)},getNodesBounds:p=>{const R=ze(u),C=ze(E);return Hn(p,{nodeLookup:R,nodeOrigin:C})},getHandleConnections:({type:p,id:R,nodeId:C})=>{var F;return Array.from(((F=ze(P).get(`${C}-${p}-${R??null}`))==null?void 0:F.values())??[])},viewport:s}}function wl(a,e){var l;const r=[];for(const t of e){const s=a.get(t);if(s){const n="internals"in s?(l=s.internals)==null?void 0:l.userNode:s;r.push(n)}}return r}var qr={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(a,e){(function(r,l){l(e)})(An,function(r){function l(){for(var $=arguments.length,U=Array($),K=0;K<$;K++)U[K]=arguments[K];if(U.length>1){U[0]=U[0].slice(0,-1);for(var ne=U.length-1,se=1;se<ne;++se)U[se]=U[se].slice(1,-1);return U[ne]=U[ne].slice(1),U.join("")}else return U[0]}function t($){return"(?:"+$+")"}function s($){return $===void 0?"undefined":$===null?"null":Object.prototype.toString.call($).split(" ").pop().split("]").shift().toLowerCase()}function n($){return $.toUpperCase()}function o($){return $!=null?$ instanceof Array?$:typeof $.length!="number"||$.split||$.setInterval||$.call?[$]:Array.prototype.slice.call($):[]}function f($,U){var K=$;if(U)for(var ne in U)K[ne]=U[ne];return K}function h($){var U="[A-Za-z]",K="[0-9]",ne=l(K,"[A-Fa-f]"),se=t(t("%[EFef]"+ne+"%"+ne+ne+"%"+ne+ne)+"|"+t("%[89A-Fa-f]"+ne+"%"+ne+ne)+"|"+t("%"+ne+ne)),De="[\\:\\/\\?\\#\\[\\]\\@]",Ce="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Be=l(De,Ce),Xe=$?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",dt=$?"[\\uE000-\\uF8FF]":"[]",Ve=l(U,K,"[\\-\\.\\_\\~]",Xe);t(U+l(U,K,"[\\+\\-\\.]")+"*"),t(t(se+"|"+l(Ve,Ce,"[\\:]"))+"*");var Ke=t(t("25[0-5]")+"|"+t("2[0-4]"+K)+"|"+t("1"+K+K)+"|"+t("0?[1-9]"+K)+"|0?0?"+K),ht=t(Ke+"\\."+Ke+"\\."+Ke+"\\."+Ke),Le=t(ne+"{1,4}"),We=t(t(Le+"\\:"+Le)+"|"+ht),vt=t(t(Le+"\\:")+"{6}"+We),xe=t("\\:\\:"+t(Le+"\\:")+"{5}"+We),Ht=t(t(Le)+"?\\:\\:"+t(Le+"\\:")+"{4}"+We),Ft=t(t(t(Le+"\\:")+"{0,1}"+Le)+"?\\:\\:"+t(Le+"\\:")+"{3}"+We),Lt=t(t(t(Le+"\\:")+"{0,2}"+Le)+"?\\:\\:"+t(Le+"\\:")+"{2}"+We),xt=t(t(t(Le+"\\:")+"{0,3}"+Le)+"?\\:\\:"+Le+"\\:"+We),Yt=t(t(t(Le+"\\:")+"{0,4}"+Le)+"?\\:\\:"+We),Tt=t(t(t(Le+"\\:")+"{0,5}"+Le)+"?\\:\\:"+Le),jt=t(t(t(Le+"\\:")+"{0,6}"+Le)+"?\\:\\:"),Xt=t([vt,xe,Ht,Ft,Lt,xt,Yt,Tt,jt].join("|")),Ut=t(t(Ve+"|"+se)+"+");t("[vV]"+ne+"+\\."+l(Ve,Ce,"[\\:]")+"+"),t(t(se+"|"+l(Ve,Ce))+"*");var rr=t(se+"|"+l(Ve,Ce,"[\\:\\@]"));return t(t(se+"|"+l(Ve,Ce,"[\\@]"))+"+"),t(t(rr+"|"+l("[\\/\\?]",dt))+"*"),{NOT_SCHEME:new RegExp(l("[^]",U,K,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(l("[^\\%\\:]",Ve,Ce),"g"),NOT_HOST:new RegExp(l("[^\\%\\[\\]\\:]",Ve,Ce),"g"),NOT_PATH:new RegExp(l("[^\\%\\/\\:\\@]",Ve,Ce),"g"),NOT_PATH_NOSCHEME:new RegExp(l("[^\\%\\/\\@]",Ve,Ce),"g"),NOT_QUERY:new RegExp(l("[^\\%]",Ve,Ce,"[\\:\\@\\/\\?]",dt),"g"),NOT_FRAGMENT:new RegExp(l("[^\\%]",Ve,Ce,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(l("[^]",Ve,Ce),"g"),UNRESERVED:new RegExp(Ve,"g"),OTHER_CHARS:new RegExp(l("[^\\%]",Ve,Be),"g"),PCT_ENCODED:new RegExp(se,"g"),IPV4ADDRESS:new RegExp("^("+ht+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Xt+")"+t(t("\\%25|\\%(?!"+ne+"{2})")+"("+Ut+")")+"?\\]?$")}}var d=h(!1),_=h(!0),m=function(){function $(U,K){var ne=[],se=!0,De=!1,Ce=void 0;try{for(var Be=U[Symbol.iterator](),Xe;!(se=(Xe=Be.next()).done)&&(ne.push(Xe.value),!(K&&ne.length===K));se=!0);}catch(dt){De=!0,Ce=dt}finally{try{!se&&Be.return&&Be.return()}finally{if(De)throw Ce}}return ne}return function(U,K){if(Array.isArray(U))return U;if(Symbol.iterator in Object(U))return $(U,K);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function($){if(Array.isArray($)){for(var U=0,K=Array($.length);U<$.length;U++)K[U]=$[U];return K}else return Array.from($)},u=2147483647,E=36,g=1,P=26,O=38,D=700,S=72,p=128,R="-",C=/^xn--/,F=/[^\0-\x7E]/,N=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=E-g,I=Math.floor,w=String.fromCharCode;function A($){throw new RangeError(T[$])}function X($,U){for(var K=[],ne=$.length;ne--;)K[ne]=U($[ne]);return K}function oe($,U){var K=$.split("@"),ne="";K.length>1&&(ne=K[0]+"@",$=K[1]),$=$.replace(N,".");var se=$.split("."),De=X(se,U).join(".");return ne+De}function le($){for(var U=[],K=0,ne=$.length;K<ne;){var se=$.charCodeAt(K++);if(se>=55296&&se<=56319&&K<ne){var De=$.charCodeAt(K++);(De&64512)==56320?U.push(((se&1023)<<10)+(De&1023)+65536):(U.push(se),K--)}else U.push(se)}return U}var G=function(U){return String.fromCodePoint.apply(String,c(U))},Q=function(U){return U-48<10?U-22:U-65<26?U-65:U-97<26?U-97:E},V=function(U,K){return U+22+75*(U<26)-((K!=0)<<5)},z=function(U,K,ne){var se=0;for(U=ne?I(U/D):U>>1,U+=I(U/K);U>b*P>>1;se+=E)U=I(U/b);return I(se+(b+1)*U/(U+O))},Z=function(U){var K=[],ne=U.length,se=0,De=p,Ce=S,Be=U.lastIndexOf(R);Be<0&&(Be=0);for(var Xe=0;Xe<Be;++Xe)U.charCodeAt(Xe)>=128&&A("not-basic"),K.push(U.charCodeAt(Xe));for(var dt=Be>0?Be+1:0;dt<ne;){for(var Ve=se,Ke=1,ht=E;;ht+=E){dt>=ne&&A("invalid-input");var Le=Q(U.charCodeAt(dt++));(Le>=E||Le>I((u-se)/Ke))&&A("overflow"),se+=Le*Ke;var We=ht<=Ce?g:ht>=Ce+P?P:ht-Ce;if(Le<We)break;var vt=E-We;Ke>I(u/vt)&&A("overflow"),Ke*=vt}var xe=K.length+1;Ce=z(se-Ve,xe,Ve==0),I(se/xe)>u-De&&A("overflow"),De+=I(se/xe),se%=xe,K.splice(se++,0,De)}return String.fromCodePoint.apply(String,K)},q=function(U){var K=[];U=le(U);var ne=U.length,se=p,De=0,Ce=S,Be=!0,Xe=!1,dt=void 0;try{for(var Ve=U[Symbol.iterator](),Ke;!(Be=(Ke=Ve.next()).done);Be=!0){var ht=Ke.value;ht<128&&K.push(w(ht))}}catch(lr){Xe=!0,dt=lr}finally{try{!Be&&Ve.return&&Ve.return()}finally{if(Xe)throw dt}}var Le=K.length,We=Le;for(Le&&K.push(R);We<ne;){var vt=u,xe=!0,Ht=!1,Ft=void 0;try{for(var Lt=U[Symbol.iterator](),xt;!(xe=(xt=Lt.next()).done);xe=!0){var Yt=xt.value;Yt>=se&&Yt<vt&&(vt=Yt)}}catch(lr){Ht=!0,Ft=lr}finally{try{!xe&&Lt.return&&Lt.return()}finally{if(Ht)throw Ft}}var Tt=We+1;vt-se>I((u-De)/Tt)&&A("overflow"),De+=(vt-se)*Tt,se=vt;var jt=!0,Xt=!1,Ut=void 0;try{for(var rr=U[Symbol.iterator](),sl;!(jt=(sl=rr.next()).done);jt=!0){var nl=sl.value;if(nl<se&&++De>u&&A("overflow"),nl==se){for(var or=De,ir=E;;ir+=E){var fr=ir<=Ce?g:ir>=Ce+P?P:ir-Ce;if(or<fr)break;var ol=or-fr,il=E-fr;K.push(w(V(fr+ol%il,0))),or=I(ol/il)}K.push(w(V(or,0))),Ce=z(De,Tt,We==Le),De=0,++We}}}catch(lr){Xt=!0,Ut=lr}finally{try{!jt&&rr.return&&rr.return()}finally{if(Xt)throw Ut}}++De,++se}return K.join("")},J=function(U){return oe(U,function(K){return C.test(K)?Z(K.slice(4).toLowerCase()):K})},ye=function(U){return oe(U,function(K){return F.test(K)?"xn--"+q(K):K})},Pe={version:"2.1.0",ucs2:{decode:le,encode:G},decode:Z,encode:q,toASCII:ye,toUnicode:J},ae={};function ve($){var U=$.charCodeAt(0),K=void 0;return U<16?K="%0"+U.toString(16).toUpperCase():U<128?K="%"+U.toString(16).toUpperCase():U<2048?K="%"+(U>>6|192).toString(16).toUpperCase()+"%"+(U&63|128).toString(16).toUpperCase():K="%"+(U>>12|224).toString(16).toUpperCase()+"%"+(U>>6&63|128).toString(16).toUpperCase()+"%"+(U&63|128).toString(16).toUpperCase(),K}function ce($){for(var U="",K=0,ne=$.length;K<ne;){var se=parseInt($.substr(K+1,2),16);if(se<128)U+=String.fromCharCode(se),K+=3;else if(se>=194&&se<224){if(ne-K>=6){var De=parseInt($.substr(K+4,2),16);U+=String.fromCharCode((se&31)<<6|De&63)}else U+=$.substr(K,6);K+=6}else if(se>=224){if(ne-K>=9){var Ce=parseInt($.substr(K+4,2),16),Be=parseInt($.substr(K+7,2),16);U+=String.fromCharCode((se&15)<<12|(Ce&63)<<6|Be&63)}else U+=$.substr(K,9);K+=9}else U+=$.substr(K,3),K+=3}return U}function ge($,U){function K(ne){var se=ce(ne);return se.match(U.UNRESERVED)?se:ne}return $.scheme&&($.scheme=String($.scheme).replace(U.PCT_ENCODED,K).toLowerCase().replace(U.NOT_SCHEME,"")),$.userinfo!==void 0&&($.userinfo=String($.userinfo).replace(U.PCT_ENCODED,K).replace(U.NOT_USERINFO,ve).replace(U.PCT_ENCODED,n)),$.host!==void 0&&($.host=String($.host).replace(U.PCT_ENCODED,K).toLowerCase().replace(U.NOT_HOST,ve).replace(U.PCT_ENCODED,n)),$.path!==void 0&&($.path=String($.path).replace(U.PCT_ENCODED,K).replace($.scheme?U.NOT_PATH:U.NOT_PATH_NOSCHEME,ve).replace(U.PCT_ENCODED,n)),$.query!==void 0&&($.query=String($.query).replace(U.PCT_ENCODED,K).replace(U.NOT_QUERY,ve).replace(U.PCT_ENCODED,n)),$.fragment!==void 0&&($.fragment=String($.fragment).replace(U.PCT_ENCODED,K).replace(U.NOT_FRAGMENT,ve).replace(U.PCT_ENCODED,n)),$}function Se($){return $.replace(/^0*(.*)/,"$1")||"0"}function Ae($,U){var K=$.match(U.IPV4ADDRESS)||[],ne=m(K,2),se=ne[1];return se?se.split(".").map(Se).join("."):$}function x($,U){var K=$.match(U.IPV6ADDRESS)||[],ne=m(K,3),se=ne[1],De=ne[2];if(se){for(var Ce=se.toLowerCase().split("::").reverse(),Be=m(Ce,2),Xe=Be[0],dt=Be[1],Ve=dt?dt.split(":").map(Se):[],Ke=Xe.split(":").map(Se),ht=U.IPV4ADDRESS.test(Ke[Ke.length-1]),Le=ht?7:8,We=Ke.length-Le,vt=Array(Le),xe=0;xe<Le;++xe)vt[xe]=Ve[xe]||Ke[We+xe]||"";ht&&(vt[Le-1]=Ae(vt[Le-1],U));var Ht=vt.reduce(function(Tt,jt,Xt){if(!jt||jt==="0"){var Ut=Tt[Tt.length-1];Ut&&Ut.index+Ut.length===Xt?Ut.length++:Tt.push({index:Xt,length:1})}return Tt},[]),Ft=Ht.sort(function(Tt,jt){return jt.length-Tt.length})[0],Lt=void 0;if(Ft&&Ft.length>1){var xt=vt.slice(0,Ft.index),Yt=vt.slice(Ft.index+Ft.length);Lt=xt.join(":")+"::"+Yt.join(":")}else Lt=vt.join(":");return De&&(Lt+="%"+De),Lt}else return $}var j=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,ie="".match(/(){0}/)[1]===void 0;function qe($){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K={},ne=U.iri!==!1?_:d;U.reference==="suffix"&&($=(U.scheme?U.scheme+":":"")+"//"+$);var se=$.match(j);if(se){ie?(K.scheme=se[1],K.userinfo=se[3],K.host=se[4],K.port=parseInt(se[5],10),K.path=se[6]||"",K.query=se[7],K.fragment=se[8],isNaN(K.port)&&(K.port=se[5])):(K.scheme=se[1]||void 0,K.userinfo=$.indexOf("@")!==-1?se[3]:void 0,K.host=$.indexOf("//")!==-1?se[4]:void 0,K.port=parseInt(se[5],10),K.path=se[6]||"",K.query=$.indexOf("?")!==-1?se[7]:void 0,K.fragment=$.indexOf("#")!==-1?se[8]:void 0,isNaN(K.port)&&(K.port=$.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?se[4]:void 0)),K.host&&(K.host=x(Ae(K.host,ne),ne)),K.scheme===void 0&&K.userinfo===void 0&&K.host===void 0&&K.port===void 0&&!K.path&&K.query===void 0?K.reference="same-document":K.scheme===void 0?K.reference="relative":K.fragment===void 0?K.reference="absolute":K.reference="uri",U.reference&&U.reference!=="suffix"&&U.reference!==K.reference&&(K.error=K.error||"URI is not a "+U.reference+" reference.");var De=ae[(U.scheme||K.scheme||"").toLowerCase()];if(!U.unicodeSupport&&(!De||!De.unicodeSupport)){if(K.host&&(U.domainHost||De&&De.domainHost))try{K.host=Pe.toASCII(K.host.replace(ne.PCT_ENCODED,ce).toLowerCase())}catch(Ce){K.error=K.error||"Host's domain name can not be converted to ASCII via punycode: "+Ce}ge(K,d)}else ge(K,ne);De&&De.parse&&De.parse(K,U)}else K.error=K.error||"URI can not be parsed.";return K}function Ue($,U){var K=U.iri!==!1?_:d,ne=[];return $.userinfo!==void 0&&(ne.push($.userinfo),ne.push("@")),$.host!==void 0&&ne.push(x(Ae(String($.host),K),K).replace(K.IPV6ADDRESS,function(se,De,Ce){return"["+De+(Ce?"%25"+Ce:"")+"]"})),(typeof $.port=="number"||typeof $.port=="string")&&(ne.push(":"),ne.push(String($.port))),ne.length?ne.join(""):void 0}var rt=/^\.\.?\//,Me=/^\/\.(\/|$)/,_t=/^\/\.\.(\/|$)/,wt=/^\/?(?:.|\n)*?(?=\/|$)/;function $e($){for(var U=[];$.length;)if($.match(rt))$=$.replace(rt,"");else if($.match(Me))$=$.replace(Me,"/");else if($.match(_t))$=$.replace(_t,"/"),U.pop();else if($==="."||$==="..")$="";else{var K=$.match(wt);if(K){var ne=K[0];$=$.slice(ne.length),U.push(ne)}else throw new Error("Unexpected dot segment condition")}return U.join("")}function Ge($){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K=U.iri?_:d,ne=[],se=ae[(U.scheme||$.scheme||"").toLowerCase()];if(se&&se.serialize&&se.serialize($,U),$.host&&!K.IPV6ADDRESS.test($.host)){if(U.domainHost||se&&se.domainHost)try{$.host=U.iri?Pe.toUnicode($.host):Pe.toASCII($.host.replace(K.PCT_ENCODED,ce).toLowerCase())}catch(Be){$.error=$.error||"Host's domain name can not be converted to "+(U.iri?"Unicode":"ASCII")+" via punycode: "+Be}}ge($,K),U.reference!=="suffix"&&$.scheme&&(ne.push($.scheme),ne.push(":"));var De=Ue($,U);if(De!==void 0&&(U.reference!=="suffix"&&ne.push("//"),ne.push(De),$.path&&$.path.charAt(0)!=="/"&&ne.push("/")),$.path!==void 0){var Ce=$.path;!U.absolutePath&&(!se||!se.absolutePath)&&(Ce=$e(Ce)),De===void 0&&(Ce=Ce.replace(/^\/\//,"/%2F")),ne.push(Ce)}return $.query!==void 0&&(ne.push("?"),ne.push($.query)),$.fragment!==void 0&&(ne.push("#"),ne.push($.fragment)),ne.join("")}function lt($,U){var K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ne=arguments[3],se={};return ne||($=qe(Ge($,K),K),U=qe(Ge(U,K),K)),K=K||{},!K.tolerant&&U.scheme?(se.scheme=U.scheme,se.userinfo=U.userinfo,se.host=U.host,se.port=U.port,se.path=$e(U.path||""),se.query=U.query):(U.userinfo!==void 0||U.host!==void 0||U.port!==void 0?(se.userinfo=U.userinfo,se.host=U.host,se.port=U.port,se.path=$e(U.path||""),se.query=U.query):(U.path?(U.path.charAt(0)==="/"?se.path=$e(U.path):(($.userinfo!==void 0||$.host!==void 0||$.port!==void 0)&&!$.path?se.path="/"+U.path:$.path?se.path=$.path.slice(0,$.path.lastIndexOf("/")+1)+U.path:se.path=U.path,se.path=$e(se.path)),se.query=U.query):(se.path=$.path,U.query!==void 0?se.query=U.query:se.query=$.query),se.userinfo=$.userinfo,se.host=$.host,se.port=$.port),se.scheme=$.scheme),se.fragment=U.fragment,se}function At($,U,K){var ne=f({scheme:"null"},K);return Ge(lt(qe($,ne),qe(U,ne),ne,!0),ne)}function yt($,U){return typeof $=="string"?$=Ge(qe($,U),U):s($)==="object"&&($=qe(Ge($,U),U)),$}function Ye($,U,K){return typeof $=="string"?$=Ge(qe($,K),K):s($)==="object"&&($=Ge($,K)),typeof U=="string"?U=Ge(qe(U,K),K):s(U)==="object"&&(U=Ge(U,K)),$===U}function Dt($,U){return $&&$.toString().replace(!U||!U.iri?d.ESCAPE:_.ESCAPE,ve)}function Fe($,U){return $&&$.toString().replace(!U||!U.iri?d.PCT_ENCODED:_.PCT_ENCODED,ce)}var fe={scheme:"http",domainHost:!0,parse:function(U,K){return U.host||(U.error=U.error||"HTTP URIs must have a host."),U},serialize:function(U,K){var ne=String(U.scheme).toLowerCase()==="https";return(U.port===(ne?443:80)||U.port==="")&&(U.port=void 0),U.path||(U.path="/"),U}},re={scheme:"https",domainHost:fe.domainHost,parse:fe.parse,serialize:fe.serialize};function H($){return typeof $.secure=="boolean"?$.secure:String($.scheme).toLowerCase()==="wss"}var ue={scheme:"ws",domainHost:!0,parse:function(U,K){var ne=U;return ne.secure=H(ne),ne.resourceName=(ne.path||"/")+(ne.query?"?"+ne.query:""),ne.path=void 0,ne.query=void 0,ne},serialize:function(U,K){if((U.port===(H(U)?443:80)||U.port==="")&&(U.port=void 0),typeof U.secure=="boolean"&&(U.scheme=U.secure?"wss":"ws",U.secure=void 0),U.resourceName){var ne=U.resourceName.split("?"),se=m(ne,2),De=se[0],Ce=se[1];U.path=De&&De!=="/"?De:void 0,U.query=Ce,U.resourceName=void 0}return U.fragment=void 0,U}},_e={scheme:"wss",domainHost:ue.domainHost,parse:ue.parse,serialize:ue.serialize},je={},pt="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",nt="[0-9A-Fa-f]",It=t(t("%[EFef]"+nt+"%"+nt+nt+"%"+nt+nt)+"|"+t("%[89A-Fa-f]"+nt+"%"+nt+nt)+"|"+t("%"+nt+nt)),Ct="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",kt="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",$t=l(kt,'[\\"\\\\]'),Nt="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",un=new RegExp(pt,"g"),Wt=new RegExp(It,"g"),cn=new RegExp(l("[^]",Ct,"[\\.]",'[\\"]',$t),"g"),tl=new RegExp(l("[^]",pt,Nt),"g"),dn=tl;function Or($){var U=ce($);return U.match(un)?U:$}var rl={scheme:"mailto",parse:function(U,K){var ne=U,se=ne.to=ne.path?ne.path.split(","):[];if(ne.path=void 0,ne.query){for(var De=!1,Ce={},Be=ne.query.split("&"),Xe=0,dt=Be.length;Xe<dt;++Xe){var Ve=Be[Xe].split("=");switch(Ve[0]){case"to":for(var Ke=Ve[1].split(","),ht=0,Le=Ke.length;ht<Le;++ht)se.push(Ke[ht]);break;case"subject":ne.subject=Fe(Ve[1],K);break;case"body":ne.body=Fe(Ve[1],K);break;default:De=!0,Ce[Fe(Ve[0],K)]=Fe(Ve[1],K);break}}De&&(ne.headers=Ce)}ne.query=void 0;for(var We=0,vt=se.length;We<vt;++We){var xe=se[We].split("@");if(xe[0]=Fe(xe[0]),K.unicodeSupport)xe[1]=Fe(xe[1],K).toLowerCase();else try{xe[1]=Pe.toASCII(Fe(xe[1],K).toLowerCase())}catch(Ht){ne.error=ne.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ht}se[We]=xe.join("@")}return ne},serialize:function(U,K){var ne=U,se=o(U.to);if(se){for(var De=0,Ce=se.length;De<Ce;++De){var Be=String(se[De]),Xe=Be.lastIndexOf("@"),dt=Be.slice(0,Xe).replace(Wt,Or).replace(Wt,n).replace(cn,ve),Ve=Be.slice(Xe+1);try{Ve=K.iri?Pe.toUnicode(Ve):Pe.toASCII(Fe(Ve,K).toLowerCase())}catch(We){ne.error=ne.error||"Email address's domain name can not be converted to "+(K.iri?"Unicode":"ASCII")+" via punycode: "+We}se[De]=dt+"@"+Ve}ne.path=se.join(",")}var Ke=U.headers=U.headers||{};U.subject&&(Ke.subject=U.subject),U.body&&(Ke.body=U.body);var ht=[];for(var Le in Ke)Ke[Le]!==je[Le]&&ht.push(Le.replace(Wt,Or).replace(Wt,n).replace(tl,ve)+"="+Ke[Le].replace(Wt,Or).replace(Wt,n).replace(dn,ve));return ht.length&&(ne.query=ht.join("&")),ne}},hn=/^([^\:]+)\:(.*)/,ll={scheme:"urn",parse:function(U,K){var ne=U.path&&U.path.match(hn),se=U;if(ne){var De=K.scheme||se.scheme||"urn",Ce=ne[1].toLowerCase(),Be=ne[2],Xe=De+":"+(K.nid||Ce),dt=ae[Xe];se.nid=Ce,se.nss=Be,se.path=void 0,dt&&(se=dt.parse(se,K))}else se.error=se.error||"URN can not be parsed.";return se},serialize:function(U,K){var ne=K.scheme||U.scheme||"urn",se=U.nid,De=ne+":"+(K.nid||se),Ce=ae[De];Ce&&(U=Ce.serialize(U,K));var Be=U,Xe=U.nss;return Be.path=(se||K.nid)+":"+Xe,Be}},_n=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,al={scheme:"urn:uuid",parse:function(U,K){var ne=U;return ne.uuid=ne.nss,ne.nss=void 0,!K.tolerant&&(!ne.uuid||!ne.uuid.match(_n))&&(ne.error=ne.error||"UUID is not valid."),ne},serialize:function(U,K){var ne=U;return ne.nss=(U.uuid||"").toLowerCase(),ne}};ae[fe.scheme]=fe,ae[re.scheme]=re,ae[ue.scheme]=ue,ae[_e.scheme]=_e,ae[rl.scheme]=rl,ae[ll.scheme]=ll,ae[al.scheme]=al,r.SCHEMES=ae,r.pctEncChar=ve,r.pctDecChars=ce,r.parse=qe,r.removeDotSegments=$e,r.serialize=Ge,r.resolveComponents=lt,r.resolve=At,r.normalize=yt,r.equal=Ye,r.escapeComponent=Dt,r.unescapeComponent=Fe,Object.defineProperty(r,"__esModule",{value:!0})})})(qr,qr.exports);var oo=qr.exports,Gr=function a(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var l,t,s;if(Array.isArray(e)){if(l=e.length,l!=r.length)return!1;for(t=l;t--!==0;)if(!a(e[t],r[t]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(s=Object.keys(e),l=s.length,l!==Object.keys(r).length)return!1;for(t=l;t--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[t]))return!1;for(t=l;t--!==0;){var n=s[t];if(!a(e[n],r[n]))return!1}return!0}return e!==e&&r!==r},io=function(e){for(var r=0,l=e.length,t=0,s;t<l;)r++,s=e.charCodeAt(t++),s>=55296&&s<=56319&&t<l&&(s=e.charCodeAt(t),(s&64512)==56320&&t++);return r},tr={copy:fo,checkDataType:zr,checkDataTypes:uo,coerceToTypes:co,toHash:Kr,getProperty:Jr,escapeQuotes:Yr,equal:Gr,ucs2length:io,varOccurences:vo,varReplace:mo,schemaHasRules:po,schemaHasRulesExcept:go,schemaUnknownRules:bo,toQuotedString:Ur,getPathExpr:Eo,getPath:Po,getData:yo,unescapeFragment:So,unescapeJsonPointer:Zr,escapeFragment:Do,escapeJsonPointer:Xr};function fo(a,e){e=e||{};for(var r in a)e[r]=a[r];return e}function zr(a,e,r,l){var t=l?" !== ":" === ",s=l?" || ":" && ",n=l?"!":"",o=l?"":"!";switch(a){case"null":return e+t+"null";case"array":return n+"Array.isArray("+e+")";case"object":return"("+n+e+s+"typeof "+e+t+'"object"'+s+o+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+t+'"number"'+s+o+"("+e+" % 1)"+s+e+t+e+(r?s+n+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+t+'"'+a+'"'+(r?s+n+"isFinite("+e+")":"")+")";default:return"typeof "+e+t+'"'+a+'"'}}function uo(a,e,r){switch(a.length){case 1:return zr(a[0],e,r,!0);default:var l="",t=Kr(a);t.array&&t.object&&(l=t.null?"(":"(!"+e+" || ",l+="typeof "+e+' !== "object")',delete t.null,delete t.array,delete t.object),t.number&&delete t.integer;for(var s in t)l+=(l?" && ":"")+zr(s,e,r,!0);return l}}var kl=Kr(["string","number","integer","boolean","null"]);function co(a,e){if(Array.isArray(e)){for(var r=[],l=0;l<e.length;l++){var t=e[l];(kl[t]||a==="array"&&t==="array")&&(r[r.length]=t)}if(r.length)return r}else{if(kl[e])return[e];if(a==="array"&&e==="array")return["array"]}}function Kr(a){for(var e={},r=0;r<a.length;r++)e[a[r]]=!0;return e}var ho=/^[a-z$_][a-z$_0-9]*$/i,_o=/'|\\/g;function Jr(a){return typeof a=="number"?"["+a+"]":ho.test(a)?"."+a:"['"+Yr(a)+"']"}function Yr(a){return a.replace(_o,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function vo(a,e){e+="[^0-9]";var r=a.match(new RegExp(e,"g"));return r?r.length:0}function mo(a,e,r){return e+="([^0-9])",r=r.replace(/\$/g,"$$$$"),a.replace(new RegExp(e,"g"),r+"$1")}function po(a,e){if(typeof a=="boolean")return!a;for(var r in a)if(e[r])return!0}function go(a,e,r){if(typeof a=="boolean")return!a&&r!="not";for(var l in a)if(l!=r&&e[l])return!0}function bo(a,e){if(typeof a!="boolean"){for(var r in a)if(!e[r])return r}}function Ur(a){return"'"+Yr(a)+"'"}function Eo(a,e,r,l){var t=r?"'/' + "+e+(l?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):l?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return Fs(a,t)}function Po(a,e,r){var l=Ur(r?"/"+Xr(e):Jr(e));return Fs(a,l)}var wo=/^\/(?:[^~]|~0|~1)*$/,ko=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function yo(a,e,r){var l,t,s,n;if(a==="")return"rootData";if(a[0]=="/"){if(!wo.test(a))throw new Error("Invalid JSON-pointer: "+a);t=a,s="rootData"}else{if(n=a.match(ko),!n)throw new Error("Invalid JSON-pointer: "+a);if(l=+n[1],t=n[2],t=="#"){if(l>=e)throw new Error("Cannot access property/index "+l+" levels up, current level is "+e);return r[e-l]}if(l>e)throw new Error("Cannot access data "+l+" levels up, current level is "+e);if(s="data"+(e-l||""),!t)return s}for(var o=s,f=t.split("/"),h=0;h<f.length;h++){var d=f[h];d&&(s+=Jr(Zr(d)),o+=" && "+s)}return o}function Fs(a,e){return a=='""'?e:(a+" + "+e).replace(/([^\\])' \+ '/g,"$1")}function So(a){return Zr(decodeURIComponent(a))}function Do(a){return encodeURIComponent(Xr(a))}function Xr(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}function Zr(a){return a.replace(/~1/g,"/").replace(/~0/g,"~")}var Co=tr,Ls=No;function No(a){Co.copy(a,this)}var js={exports:{}},Qt=js.exports=function(a,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var l=typeof r=="function"?r:r.pre||function(){},t=r.post||function(){};vr(e,l,t,a,"",a)};Qt.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};Qt.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Qt.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Qt.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function vr(a,e,r,l,t,s,n,o,f,h){if(l&&typeof l=="object"&&!Array.isArray(l)){e(l,t,s,n,o,f,h);for(var d in l){var _=l[d];if(Array.isArray(_)){if(d in Qt.arrayKeywords)for(var m=0;m<_.length;m++)vr(a,e,r,_[m],t+"/"+d+"/"+m,s,t,d,l,m)}else if(d in Qt.propsKeywords){if(_&&typeof _=="object")for(var c in _)vr(a,e,r,_[c],t+"/"+d+"/"+Ro(c),s,t,d,l,c)}else(d in Qt.keywords||a.allKeys&&!(d in Qt.skipKeywords))&&vr(a,e,r,_,t+"/"+d,s,t,d,l)}r(l,t,s,n,o,f,h)}}function Ro(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}var Oo=js.exports,nr=oo,yl=Gr,Sr=tr,br=Ls,Io=Oo,Wr=Jt;Jt.normalizeId=Gt;Jt.fullPath=Er;Jt.url=Pr;Jt.ids=jo;Jt.inlineRef=Vr;Jt.schema=Dr;function Jt(a,e,r){var l=this._refs[r];if(typeof l=="string")if(this._refs[l])l=this._refs[l];else return Jt.call(this,a,e,l);if(l=l||this._schemas[r],l instanceof br)return Vr(l.schema,this._opts.inlineRefs)?l.schema:l.validate||this._compile(l);var t=Dr.call(this,e,r),s,n,o;return t&&(s=t.schema,e=t.root,o=t.baseId),s instanceof br?n=s.validate||a.call(this,s.schema,e,void 0,o):s!==void 0&&(n=Vr(s,this._opts.inlineRefs)?s:a.call(this,s,e,void 0,o)),n}function Dr(a,e){var r=nr.parse(e),l=zs(r),t=Er(this._getId(a.schema));if(Object.keys(a.schema).length===0||l!==t){var s=Gt(l),n=this._refs[s];if(typeof n=="string")return To.call(this,a,n,r);if(n instanceof br)n.validate||this._compile(n),a=n;else if(n=this._schemas[s],n instanceof br){if(n.validate||this._compile(n),s==Gt(e))return{schema:n,root:a,baseId:t};a=n}else return;if(!a.schema)return;t=Er(this._getId(a.schema))}return qs.call(this,r,t,a.schema,a)}function To(a,e,r){var l=Dr.call(this,a,e);if(l){var t=l.schema,s=l.baseId;a=l.root;var n=this._getId(t);return n&&(s=Pr(s,n)),qs.call(this,r,s,t,a)}}var Ao=Sr.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function qs(a,e,r,l){if(a.fragment=a.fragment||"",a.fragment.slice(0,1)=="/"){for(var t=a.fragment.split("/"),s=1;s<t.length;s++){var n=t[s];if(n){if(n=Sr.unescapeFragment(n),r=r[n],r===void 0)break;var o;if(!Ao[n]&&(o=this._getId(r),o&&(e=Pr(e,o)),r.$ref)){var f=Pr(e,r.$ref),h=Dr.call(this,l,f);h&&(r=h.schema,l=h.root,e=h.baseId)}}}if(r!==void 0&&r!==l.schema)return{schema:r,root:l,baseId:e}}}var Fo=Sr.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function Vr(a,e){if(e===!1)return!1;if(e===void 0||e===!0)return Mr(a);if(e)return Br(a)<=e}function Mr(a){var e;if(Array.isArray(a)){for(var r=0;r<a.length;r++)if(e=a[r],typeof e=="object"&&!Mr(e))return!1}else for(var l in a)if(l=="$ref"||(e=a[l],typeof e=="object"&&!Mr(e)))return!1;return!0}function Br(a){var e=0,r;if(Array.isArray(a)){for(var l=0;l<a.length;l++)if(r=a[l],typeof r=="object"&&(e+=Br(r)),e==1/0)return 1/0}else for(var t in a){if(t=="$ref")return 1/0;if(Fo[t])e++;else if(r=a[t],typeof r=="object"&&(e+=Br(r)+1),e==1/0)return 1/0}return e}function Er(a,e){e!==!1&&(a=Gt(a));var r=nr.parse(a);return zs(r)}function zs(a){return nr.serialize(a).split("#")[0]+"#"}var Lo=/#\/?$/;function Gt(a){return a?a.replace(Lo,""):""}function Pr(a,e){return e=Gt(e),nr.resolve(a,e)}function jo(a){var e=Gt(this._getId(a)),r={"":e},l={"":Er(e,!1)},t={},s=this;return Io(a,{allKeys:!0},function(n,o,f,h,d,_,m){if(o!==""){var c=s._getId(n),u=r[h],E=l[h]+"/"+d;if(m!==void 0&&(E+="/"+(typeof m=="number"?m:Sr.escapeFragment(m))),typeof c=="string"){c=u=Gt(u?nr.resolve(u,c):c);var g=s._refs[c];if(typeof g=="string"&&(g=s._refs[g]),g&&g.schema){if(!yl(n,g.schema))throw new Error('id "'+c+'" resolves to more than one schema')}else if(c!=Gt(E))if(c[0]=="#"){if(t[c]&&!yl(n,t[c]))throw new Error('id "'+c+'" resolves to more than one schema');t[c]=n}else s._refs[c]=E}r[o]=u,l[o]=E}}),t}var Ar=Wr,xr={Validation:Sl(qo),MissingRef:Sl(el)};function qo(a){this.message="validation failed",this.errors=a,this.ajv=this.validation=!0}el.message=function(a,e){return"can't resolve reference "+e+" from id "+a};function el(a,e,r){this.message=r||el.message(a,e),this.missingRef=Ar.url(a,e),this.missingSchema=Ar.normalizeId(Ar.fullPath(this.missingRef))}function Sl(a){return a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a}var Us=function(a,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=typeof e.cycles=="boolean"?e.cycles:!1,l=e.cmp&&function(s){return function(n){return function(o,f){var h={key:o,value:n[o]},d={key:f,value:n[f]};return s(h,d)}}}(e.cmp),t=[];return function s(n){if(n&&n.toJSON&&typeof n.toJSON=="function"&&(n=n.toJSON()),n!==void 0){if(typeof n=="number")return isFinite(n)?""+n:"null";if(typeof n!="object")return JSON.stringify(n);var o,f;if(Array.isArray(n)){for(f="[",o=0;o<n.length;o++)o&&(f+=","),f+=s(n[o])||"null";return f+"]"}if(n===null)return"null";if(t.indexOf(n)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var h=t.push(n)-1,d=Object.keys(n).sort(l&&l(n));for(f="",o=0;o<d.length;o++){var _=d[o],m=s(n[_]);m&&(f&&(f+=","),f+=JSON.stringify(_)+":"+m)}return t.splice(h,1),"{"+f+"}"}}(a)},Vs=function(e,r,l){var t="",s=e.schema.$async===!0,n=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),o=e.self._getId(e.schema);if(e.opts.strictKeywords){var f=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(f){var h="unknown keyword: "+f;if(e.opts.strictKeywords==="log")e.logger.warn(h);else throw new Error(h)}}if(e.isTop&&(t+=" var validate = ",s&&(e.async=!0,t+="async "),t+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",o&&(e.opts.sourceCode||e.opts.processCode)&&(t+=" "+("/*# sourceURL="+o+" */")+" ")),typeof e.schema=="boolean"||!(n||e.schema.$ref)){var r="false schema",d=e.level,_=e.dataLevel,m=e.schema[r],c=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,F,E="data"+(_||""),S="valid"+d;if(e.schema===!1){e.isTop?p=!0:t+=" var "+S+" = false; ";var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(F||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'boolean schema is false' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),t+=" } "):t+=" {} ";var P=t;t=g.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?s?t+=" return data; ":t+=" validate.errors = null; return true; ":t+=" var "+S+" = true; ";return e.isTop&&(t+=" }; return validate; "),t}if(e.isTop){var O=e.isTop,d=e.level=0,_=e.dataLevel=0,E="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var D="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(D);else throw new Error(D)}t+=" var vErrors = null; ",t+=" var errors = 0;     ",t+=" if (rootData === undefined) rootData = data; "}else{var d=e.level,_=e.dataLevel,E="data"+(_||"");if(o&&(e.baseId=e.resolve.url(e.baseId,o)),s&&!e.async)throw new Error("async schema in sync schema");t+=" var errs_"+d+" = errors;"}var S="valid"+d,p=!e.opts.allErrors,R="",C="",F,N=e.schema.type,T=Array.isArray(N);if(N&&e.opts.nullable&&e.schema.nullable===!0&&(T?N.indexOf("null")==-1&&(N=N.concat("null")):N!="null"&&(N=[N,"null"],T=!0)),T&&N.length==1&&(N=N[0],T=!1),e.schema.$ref&&n){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(n=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(t+=" "+e.RULES.all.$comment.code(e,"$comment")),N){if(e.opts.coerceTypes)var b=e.util.coerceToTypes(e.opts.coerceTypes,N);var I=e.RULES.types[N];if(b||T||I===!0||I&&!Me(I)){var c=e.schemaPath+".type",u=e.errSchemaPath+"/type",c=e.schemaPath+".type",u=e.errSchemaPath+"/type",w=T?"checkDataTypes":"checkDataType";if(t+=" if ("+e.util[w](N,E,e.opts.strictNumbers,!0)+") { ",b){var A="dataType"+d,X="coerced"+d;t+=" var "+A+" = typeof "+E+"; var "+X+" = undefined; ",e.opts.coerceTypes=="array"&&(t+=" if ("+A+" == 'object' && Array.isArray("+E+") && "+E+".length == 1) { "+E+" = "+E+"[0]; "+A+" = typeof "+E+"; if ("+e.util.checkDataType(e.schema.type,E,e.opts.strictNumbers)+") "+X+" = "+E+"; } "),t+=" if ("+X+" !== undefined) ; ";var oe=b;if(oe)for(var le,G=-1,Q=oe.length-1;G<Q;)le=oe[G+=1],le=="string"?t+=" else if ("+A+" == 'number' || "+A+" == 'boolean') "+X+" = '' + "+E+"; else if ("+E+" === null) "+X+" = ''; ":le=="number"||le=="integer"?(t+=" else if ("+A+" == 'boolean' || "+E+" === null || ("+A+" == 'string' && "+E+" && "+E+" == +"+E+" ",le=="integer"&&(t+=" && !("+E+" % 1)"),t+=")) "+X+" = +"+E+"; "):le=="boolean"?t+=" else if ("+E+" === 'false' || "+E+" === 0 || "+E+" === null) "+X+" = false; else if ("+E+" === 'true' || "+E+" === 1) "+X+" = true; ":le=="null"?t+=" else if ("+E+" === '' || "+E+" === 0 || "+E+" === false) "+X+" = null; ":e.opts.coerceTypes=="array"&&le=="array"&&(t+=" else if ("+A+" == 'string' || "+A+" == 'number' || "+A+" == 'boolean' || "+E+" == null) "+X+" = ["+E+"]; ");t+=" else {   ";var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(F||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { type: '",T?t+=""+N.join(","):t+=""+N,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",T?t+=""+N.join(","):t+=""+N,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),t+=" } "):t+=" {} ";var P=t;t=g.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } if ("+X+" !== undefined) {  ";var V=_?"data"+(_-1||""):"parentData",z=_?e.dataPathArr[_]:"parentDataProperty";t+=" "+E+" = "+X+"; ",_||(t+="if ("+V+" !== undefined)"),t+=" "+V+"["+z+"] = "+X+"; } "}else{var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(F||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { type: '",T?t+=""+N.join(","):t+=""+N,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",T?t+=""+N.join(","):t+=""+N,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),t+=" } "):t+=" {} ";var P=t;t=g.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}t+=" } "}}if(e.schema.$ref&&!n)t+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",p&&(t+=" } if (errors === ",O?t+="0":t+="errs_"+d,t+=") { ",C+="}");else{var Z=e.RULES;if(Z){for(var I,q=-1,J=Z.length-1;q<J;)if(I=Z[q+=1],Me(I)){if(I.type&&(t+=" if ("+e.util.checkDataType(I.type,E,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(I.type=="object"&&e.schema.properties){var m=e.schema.properties,ye=Object.keys(m),Pe=ye;if(Pe)for(var ae,ve=-1,ce=Pe.length-1;ve<ce;){ae=Pe[ve+=1];var ge=m[ae];if(ge.default!==void 0){var Se=E+e.util.getProperty(ae);if(e.compositeRule){if(e.opts.strictDefaults){var D="default is ignored for: "+Se;if(e.opts.strictDefaults==="log")e.logger.warn(D);else throw new Error(D)}}else t+=" if ("+Se+" === undefined ",e.opts.useDefaults=="empty"&&(t+=" || "+Se+" === null || "+Se+" === '' "),t+=" ) "+Se+" = ",e.opts.useDefaults=="shared"?t+=" "+e.useDefault(ge.default)+" ":t+=" "+JSON.stringify(ge.default)+" ",t+="; "}}}else if(I.type=="array"&&Array.isArray(e.schema.items)){var Ae=e.schema.items;if(Ae){for(var ge,G=-1,x=Ae.length-1;G<x;)if(ge=Ae[G+=1],ge.default!==void 0){var Se=E+"["+G+"]";if(e.compositeRule){if(e.opts.strictDefaults){var D="default is ignored for: "+Se;if(e.opts.strictDefaults==="log")e.logger.warn(D);else throw new Error(D)}}else t+=" if ("+Se+" === undefined ",e.opts.useDefaults=="empty"&&(t+=" || "+Se+" === null || "+Se+" === '' "),t+=" ) "+Se+" = ",e.opts.useDefaults=="shared"?t+=" "+e.useDefault(ge.default)+" ":t+=" "+JSON.stringify(ge.default)+" ",t+="; "}}}}var j=I.rules;if(j){for(var ie,qe=-1,Ue=j.length-1;qe<Ue;)if(ie=j[qe+=1],_t(ie)){var rt=ie.code(e,ie.keyword,I.type);rt&&(t+=" "+rt+" ",p&&(R+="}"))}}if(p&&(t+=" "+R+" ",R=""),I.type&&(t+=" } ",N&&N===I.type&&!b)){t+=" else { ";var c=e.schemaPath+".type",u=e.errSchemaPath+"/type",g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(F||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { type: '",T?t+=""+N.join(","):t+=""+N,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",T?t+=""+N.join(","):t+=""+N,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),t+=" } "):t+=" {} ";var P=t;t=g.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } "}p&&(t+=" if (errors === ",O?t+="0":t+="errs_"+d,t+=") { ",C+="}")}}}p&&(t+=" "+C+" "),O?(s?(t+=" if (errors === 0) return data;           ",t+=" else throw new ValidationError(vErrors); "):(t+=" validate.errors = vErrors; ",t+=" return errors === 0;       "),t+=" }; return validate;"):t+=" var "+S+" = errors === errs_"+d+";";function Me($e){for(var Ge=$e.rules,lt=0;lt<Ge.length;lt++)if(_t(Ge[lt]))return!0}function _t($e){return e.schema[$e.keyword]!==void 0||$e.implements&&wt($e)}function wt($e){for(var Ge=$e.implements,lt=0;lt<Ge.length;lt++)if(e.schema[Ge[lt]]!==void 0)return!0}return t},cr=Wr,wr=tr,Ms=xr,zo=Us,Dl=Vs,Uo=wr.ucs2length,Vo=Gr,Mo=Ms.Validation,Bo=$r;function $r(a,e,r,l){var t=this,s=this._opts,n=[void 0],o={},f=[],h={},d=[],_={},m=[];e=e||{schema:a,refVal:n,refs:o};var c=$o.call(this,a,e,l),u=this._compilations[c.index];if(c.compiling)return u.callValidate=D;var E=this._formats,g=this.RULES;try{var P=S(a,e,r,l);u.validate=P;var O=u.callValidate;return O&&(O.schema=P.schema,O.errors=null,O.refs=P.refs,O.refVal=P.refVal,O.root=P.root,O.$async=P.$async,s.sourceCode&&(O.source=P.source)),P}finally{Ho.call(this,a,e,l)}function D(){var w=u.validate,A=w.apply(this,arguments);return D.errors=w.errors,A}function S(w,A,X,oe){var le=!A||A&&A.schema==w;if(A.schema!=e.schema)return $r.call(t,w,A,X,oe);var G=w.$async===!0,Q=Dl({isTop:!0,schema:w,isRoot:le,baseId:oe,root:A,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:Ms.MissingRef,RULES:g,validate:Dl,util:wr,resolve:cr,resolveRef:p,usePattern:T,useDefault:b,useCustomRule:I,opts:s,formats:E,logger:t.logger,self:t});Q=dr(n,Ko)+dr(f,Qo)+dr(d,Go)+dr(m,Jo)+Q,s.processCode&&(Q=s.processCode(Q,w));var V;try{var z=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",Q);V=z(t,g,E,e,n,d,m,Vo,Uo,Mo),n[0]=V}catch(Z){throw t.logger.error("Error compiling schema, function code:",Q),Z}return V.schema=w,V.errors=null,V.refs=o,V.refVal=n,V.root=le?V:A,G&&(V.$async=!0),s.sourceCode===!0&&(V.source={code:Q,patterns:f,defaults:d}),V}function p(w,A,X){A=cr.url(w,A);var oe=o[A],le,G;if(oe!==void 0)return le=n[oe],G="refVal["+oe+"]",N(le,G);if(!X&&e.refs){var Q=e.refs[A];if(Q!==void 0)return le=e.refVal[Q],G=R(A,le),N(le,G)}G=R(A);var V=cr.call(t,S,e,A);if(V===void 0){var z=r&&r[A];z&&(V=cr.inlineRef(z,s.inlineRefs)?z:$r.call(t,z,e,r,w))}if(V===void 0)C(A);else return F(A,V),N(V,G)}function R(w,A){var X=n.length;return n[X]=A,o[w]=X,"refVal"+X}function C(w){delete o[w]}function F(w,A){var X=o[w];n[X]=A}function N(w,A){return typeof w=="object"||typeof w=="boolean"?{code:A,schema:w,inline:!0}:{code:A,$async:w&&!!w.$async}}function T(w){var A=h[w];return A===void 0&&(A=h[w]=f.length,f[A]=w),"pattern"+A}function b(w){switch(typeof w){case"boolean":case"number":return""+w;case"string":return wr.toQuotedString(w);case"object":if(w===null)return"null";var A=zo(w),X=_[A];return X===void 0&&(X=_[A]=d.length,d[X]=w),"default"+X}}function I(w,A,X,oe){if(t._opts.validateSchema!==!1){var le=w.definition.dependencies;if(le&&!le.every(function(Pe){return Object.prototype.hasOwnProperty.call(X,Pe)}))throw new Error("parent schema must have all required keywords: "+le.join(","));var G=w.definition.validateSchema;if(G){var Q=G(A);if(!Q){var V="keyword schema is invalid: "+t.errorsText(G.errors);if(t._opts.validateSchema=="log")t.logger.error(V);else throw new Error(V)}}}var z=w.definition.compile,Z=w.definition.inline,q=w.definition.macro,J;if(z)J=z.call(t,A,X,oe);else if(q)J=q.call(t,A,X,oe),s.validateSchema!==!1&&t.validateSchema(J,!0);else if(Z)J=Z.call(t,oe,w.keyword,A,X);else if(J=w.definition.validate,!J)return;if(J===void 0)throw new Error('custom keyword "'+w.keyword+'"failed to compile');var ye=m.length;return m[ye]=J,{code:"customRule"+ye,validate:J}}}function $o(a,e,r){var l=Bs.call(this,a,e,r);return l>=0?{index:l,compiling:!0}:(l=this._compilations.length,this._compilations[l]={schema:a,root:e,baseId:r},{index:l,compiling:!1})}function Ho(a,e,r){var l=Bs.call(this,a,e,r);l>=0&&this._compilations.splice(l,1)}function Bs(a,e,r){for(var l=0;l<this._compilations.length;l++){var t=this._compilations[l];if(t.schema==a&&t.root==e&&t.baseId==r)return l}return-1}function Qo(a,e){return"var pattern"+a+" = new RegExp("+wr.toQuotedString(e[a])+");"}function Go(a){return"var default"+a+" = defaults["+a+"];"}function Ko(a,e){return e[a]===void 0?"":"var refVal"+a+" = refVal["+a+"];"}function Jo(a){return"var customRule"+a+" = customRules["+a+"];"}function dr(a,e){if(!a.length)return"";for(var r="",l=0;l<a.length;l++)r+=e(l,a);return r}var $s={exports:{}},Cr=$s.exports=function(){this._cache={}};Cr.prototype.put=function(e,r){this._cache[e]=r};Cr.prototype.get=function(e){return this._cache[e]};Cr.prototype.del=function(e){delete this._cache[e]};Cr.prototype.clear=function(){this._cache={}};var Yo=$s.exports,Xo=tr,Zo=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Wo=[0,31,28,31,30,31,30,31,31,30,31,30,31],xo=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Hs=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ei=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,ti=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Qs=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Gs=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,Ks=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,Js=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Ys=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Xs=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,ri=Nr;function Nr(a){return a=a=="full"?"full":"fast",Xo.copy(Nr[a])}Nr.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":Qs,url:Gs,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:Hs,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:xs,uuid:Ks,"json-pointer":Js,"json-pointer-uri-fragment":Ys,"relative-json-pointer":Xs};Nr.full={date:Zs,time:Ws,"date-time":si,uri:oi,"uri-reference":ti,"uri-template":Qs,url:Gs,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:Hs,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:xs,uuid:Ks,"json-pointer":Js,"json-pointer-uri-fragment":Ys,"relative-json-pointer":Xs};function li(a){return a%4===0&&(a%100!==0||a%400===0)}function Zs(a){var e=a.match(Zo);if(!e)return!1;var r=+e[1],l=+e[2],t=+e[3];return l>=1&&l<=12&&t>=1&&t<=(l==2&&li(r)?29:Wo[l])}function Ws(a,e){var r=a.match(xo);if(!r)return!1;var l=r[1],t=r[2],s=r[3],n=r[5];return(l<=23&&t<=59&&s<=59||l==23&&t==59&&s==60)&&(!e||n)}var ai=/t|\s/i;function si(a){var e=a.split(ai);return e.length==2&&Zs(e[0])&&Ws(e[1],!0)}var ni=/\/|:/;function oi(a){return ni.test(a)&&ei.test(a)}var ii=/[^\\]\\Z/;function xs(a){if(ii.test(a))return!1;try{return new RegExp(a),!0}catch{return!1}}var fi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,d="data"+(n||""),_="valid"+s,m,c;if(o=="#"||o=="#/")e.isRoot?(m=e.async,c="validate"):(m=e.root.schema.$async===!0,c="root.refVal[0]");else{var u=e.resolveRef(e.baseId,o,e.isRoot);if(u===void 0){var E=e.MissingRefError.message(e.baseId,o);if(e.opts.missingRefs=="fail"){e.logger.error(E);var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { ref: '"+e.util.escapeQuotes(o)+"' } ",e.opts.messages!==!1&&(t+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(o)+"' "),e.opts.verbose&&(t+=" , schema: "+e.util.toQuotedString(o)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ";var P=t;t=g.pop(),!e.compositeRule&&h?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h&&(t+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(E),h&&(t+=" if (true) { ");else throw new e.MissingRefError(e.baseId,o,E)}else if(u.inline){var O=e.util.copy(e);O.level++;var D="valid"+O.level;O.schema=u.schema,O.schemaPath="",O.errSchemaPath=o;var S=e.validate(O).replace(/validate\.schema/g,u.code);t+=" "+S+" ",h&&(t+=" if ("+D+") { ")}else m=u.$async===!0||e.async&&u.$async!==!1,c=u.code}if(c){var g=g||[];g.push(t),t="",e.opts.passContext?t+=" "+c+".call(this, ":t+=" "+c+"( ",t+=" "+d+", (dataPath || '')",e.errorPath!='""'&&(t+=" + "+e.errorPath);var p=n?"data"+(n-1||""):"parentData",R=n?e.dataPathArr[n]:"parentDataProperty";t+=" , "+p+" , "+R+", rootData)  ";var C=t;if(t=g.pop(),m){if(!e.async)throw new Error("async schema referenced by sync schema");h&&(t+=" var "+_+"; "),t+=" try { await "+C+"; ",h&&(t+=" "+_+" = true; "),t+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",h&&(t+=" "+_+" = false; "),t+=" } ",h&&(t+=" if ("+_+") { ")}else t+=" if (!"+C+") { if (vErrors === null) vErrors = "+c+".errors; else vErrors = vErrors.concat("+c+".errors); errors = vErrors.length; } ",h&&(t+=" else { ")}return t},ui=function(e,r,l){var t=" ",s=e.schema[r],n=e.schemaPath+e.util.getProperty(r),o=e.errSchemaPath+"/"+r,f=!e.opts.allErrors,h=e.util.copy(e),d="";h.level++;var _="valid"+h.level,m=h.baseId,c=!0,u=s;if(u)for(var E,g=-1,P=u.length-1;g<P;)E=u[g+=1],(e.opts.strictKeywords?typeof E=="object"&&Object.keys(E).length>0||E===!1:e.util.schemaHasRules(E,e.RULES.all))&&(c=!1,h.schema=E,h.schemaPath=n+"["+g+"]",h.errSchemaPath=o+"/"+g,t+="  "+e.validate(h)+" ",h.baseId=m,f&&(t+=" if ("+_+") { ",d+="}"));return f&&(c?t+=" if (true) { ":t+=" "+d.slice(0,-1)+" "),t},ci=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="valid"+s,c="errs__"+s,u=e.util.copy(e),E="";u.level++;var g="valid"+u.level,P=o.every(function(F){return e.opts.strictKeywords?typeof F=="object"&&Object.keys(F).length>0||F===!1:e.util.schemaHasRules(F,e.RULES.all)});if(P){var O=u.baseId;t+=" var "+c+" = errors; var "+m+" = false;  ";var D=e.compositeRule;e.compositeRule=u.compositeRule=!0;var S=o;if(S)for(var p,R=-1,C=S.length-1;R<C;)p=S[R+=1],u.schema=p,u.schemaPath=f+"["+R+"]",u.errSchemaPath=h+"/"+R,t+="  "+e.validate(u)+" ",u.baseId=O,t+=" "+m+" = "+m+" || "+g+"; if (!"+m+") { ",E+="}";e.compositeRule=u.compositeRule=D,t+=" "+E+" if (!"+m+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+=" } else {  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; } ",e.opts.allErrors&&(t+=" } ")}else d&&(t+=" if (true) { ");return t},di=function(e,r,l){var t=" ",s=e.schema[r],n=e.errSchemaPath+"/"+r;e.opts.allErrors;var o=e.util.toQuotedString(s);return e.opts.$comment===!0?t+=" console.log("+o+");":typeof e.opts.$comment=="function"&&(t+=" self._opts.$comment("+o+", "+e.util.toQuotedString(n)+", validate.root.schema);"),t},hi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="valid"+s,c=e.opts.$data&&o&&o.$data;c&&(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; "),c||(t+=" var schema"+s+" = validate.schema"+f+";"),t+="var "+m+" = equal("+_+", schema"+s+"); if (!"+m+") {   ";var u=u||[];u.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { allowedValue: schema"+s+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be equal to constant' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var E=t;return t=u.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+E+"]); ":t+=" validate.errors = ["+E+"]; return false; ":t+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" }",d&&(t+=" else { "),t},_i=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="valid"+s,c="errs__"+s,u=e.util.copy(e),E="";u.level++;var g="valid"+u.level,P="i"+s,O=u.dataLevel=e.dataLevel+1,D="data"+O,S=e.baseId,p=e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all);if(t+="var "+c+" = errors;var "+m+";",p){var R=e.compositeRule;e.compositeRule=u.compositeRule=!0,u.schema=o,u.schemaPath=f,u.errSchemaPath=h,t+=" var "+g+" = false; for (var "+P+" = 0; "+P+" < "+_+".length; "+P+"++) { ",u.errorPath=e.util.getPathExpr(e.errorPath,P,e.opts.jsonPointers,!0);var C=_+"["+P+"]";u.dataPathArr[O]=P;var F=e.validate(u);u.baseId=S,e.util.varOccurences(F,D)<2?t+=" "+e.util.varReplace(F,D,C)+" ":t+=" var "+D+" = "+C+"; "+F+" ",t+=" if ("+g+") break; }  ",e.compositeRule=u.compositeRule=R,t+=" "+E+" if (!"+g+") {"}else t+=" if ("+_+".length == 0) {";var N=N||[];N.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should contain a valid item' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var T=t;return t=N.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+T+"]); ":t+=" validate.errors = ["+T+"]; return false; ":t+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { ",p&&(t+="  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; } "),e.opts.allErrors&&(t+=" } "),t},vi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="errs__"+s,c=e.util.copy(e),u="";c.level++;var E="valid"+c.level,g={},P={},O=e.opts.ownProperties;for(R in o)if(R!="__proto__"){var D=o[R],S=Array.isArray(D)?P:g;S[R]=D}t+="var "+m+" = errors;";var p=e.errorPath;t+="var missing"+s+";";for(var R in P)if(S=P[R],S.length){if(t+=" if ( "+_+e.util.getProperty(R)+" !== undefined ",O&&(t+=" && Object.prototype.hasOwnProperty.call("+_+", '"+e.util.escapeQuotes(R)+"') "),d){t+=" && ( ";var C=S;if(C)for(var F,N=-1,T=C.length-1;N<T;){F=C[N+=1],N&&(t+=" || ");var b=e.util.getProperty(F),I=_+b;t+=" ( ( "+I+" === undefined ",O&&(t+=" || ! Object.prototype.hasOwnProperty.call("+_+", '"+e.util.escapeQuotes(F)+"') "),t+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?F:b)+") ) "}t+=")) {  ";var w="missing"+s,A="' + "+w+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(p,w,!0):p+" + "+w);var X=X||[];X.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { property: '"+e.util.escapeQuotes(R)+"', missingProperty: '"+A+"', depsCount: "+S.length+", deps: '"+e.util.escapeQuotes(S.length==1?S[0]:S.join(", "))+"' } ",e.opts.messages!==!1&&(t+=" , message: 'should have ",S.length==1?t+="property "+e.util.escapeQuotes(S[0]):t+="properties "+e.util.escapeQuotes(S.join(", ")),t+=" when property "+e.util.escapeQuotes(R)+" is present' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var oe=t;t=X.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+oe+"]); ":t+=" validate.errors = ["+oe+"]; return false; ":t+=" var err = "+oe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{t+=" ) { ";var le=S;if(le)for(var F,G=-1,Q=le.length-1;G<Q;){F=le[G+=1];var b=e.util.getProperty(F),A=e.util.escapeQuotes(F),I=_+b;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(p,F,e.opts.jsonPointers)),t+=" if ( "+I+" === undefined ",O&&(t+=" || ! Object.prototype.hasOwnProperty.call("+_+", '"+e.util.escapeQuotes(F)+"') "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { property: '"+e.util.escapeQuotes(R)+"', missingProperty: '"+A+"', depsCount: "+S.length+", deps: '"+e.util.escapeQuotes(S.length==1?S[0]:S.join(", "))+"' } ",e.opts.messages!==!1&&(t+=" , message: 'should have ",S.length==1?t+="property "+e.util.escapeQuotes(S[0]):t+="properties "+e.util.escapeQuotes(S.join(", ")),t+=" when property "+e.util.escapeQuotes(R)+" is present' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}t+=" }   ",d&&(u+="}",t+=" else { ")}e.errorPath=p;var V=c.baseId;for(var R in g){var D=g[R];(e.opts.strictKeywords?typeof D=="object"&&Object.keys(D).length>0||D===!1:e.util.schemaHasRules(D,e.RULES.all))&&(t+=" "+E+" = true; if ( "+_+e.util.getProperty(R)+" !== undefined ",O&&(t+=" && Object.prototype.hasOwnProperty.call("+_+", '"+e.util.escapeQuotes(R)+"') "),t+=") { ",c.schema=D,c.schemaPath=f+e.util.getProperty(R),c.errSchemaPath=h+"/"+e.util.escapeFragment(R),t+="  "+e.validate(c)+" ",c.baseId=V,t+=" }  ",d&&(t+=" if ("+E+") { ",u+="}"))}return d&&(t+="   "+u+" if ("+m+" == errors) {"),t},mi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="valid"+s,c=e.opts.$data&&o&&o.$data;c&&(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ");var u="i"+s,E="schema"+s;c||(t+=" var "+E+" = validate.schema"+f+";"),t+="var "+m+";",c&&(t+=" if (schema"+s+" === undefined) "+m+" = true; else if (!Array.isArray(schema"+s+")) "+m+" = false; else {"),t+=""+m+" = false;for (var "+u+"=0; "+u+"<"+E+".length; "+u+"++) if (equal("+_+", "+E+"["+u+"])) { "+m+" = true; break; }",c&&(t+="  }  "),t+=" if (!"+m+") {   ";var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { allowedValues: schema"+s+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var P=t;return t=g.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" }",d&&(t+=" else { "),t},pi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||"");if(e.opts.format===!1)return d&&(t+=" if (true) { "),t;var m=e.opts.$data&&o&&o.$data,c;m?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=o;var u=e.opts.unknownFormats,E=Array.isArray(u);if(m){var g="format"+s,P="isObject"+s,O="formatType"+s;t+=" var "+g+" = formats["+c+"]; var "+P+" = typeof "+g+" == 'object' && !("+g+" instanceof RegExp) && "+g+".validate; var "+O+" = "+P+" && "+g+".type || 'string'; if ("+P+") { ",e.async&&(t+=" var async"+s+" = "+g+".async; "),t+=" "+g+" = "+g+".validate; } if (  ",m&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'string') || "),t+=" (",u!="ignore"&&(t+=" ("+c+" && !"+g+" ",E&&(t+=" && self._opts.unknownFormats.indexOf("+c+") == -1 "),t+=") || "),t+=" ("+g+" && "+O+" == '"+l+"' && !(typeof "+g+" == 'function' ? ",e.async?t+=" (async"+s+" ? await "+g+"("+_+") : "+g+"("+_+")) ":t+=" "+g+"("+_+") ",t+=" : "+g+".test("+_+"))))) {"}else{var g=e.formats[o];if(!g){if(u=="ignore")return e.logger.warn('unknown format "'+o+'" ignored in schema at path "'+e.errSchemaPath+'"'),d&&(t+=" if (true) { "),t;if(E&&u.indexOf(o)>=0)return d&&(t+=" if (true) { "),t;throw new Error('unknown format "'+o+'" is used in schema at path "'+e.errSchemaPath+'"')}var P=typeof g=="object"&&!(g instanceof RegExp)&&g.validate,O=P&&g.type||"string";if(P){var D=g.async===!0;g=g.validate}if(O!=l)return d&&(t+=" if (true) { "),t;if(D){if(!e.async)throw new Error("async format in sync schema");var S="formats"+e.util.getProperty(o)+".validate";t+=" if (!(await "+S+"("+_+"))) { "}else{t+=" if (! ";var S="formats"+e.util.getProperty(o);P&&(S+=".validate"),typeof g=="function"?t+=" "+S+"("+_+") ":t+=" "+S+".test("+_+") ",t+=") { "}}var p=p||[];p.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { format:  ",m?t+=""+c:t+=""+e.util.toQuotedString(o),t+="  } ",e.opts.messages!==!1&&(t+=` , message: 'should match format "`,m?t+="' + "+c+" + '":t+=""+e.util.escapeQuotes(o),t+=`"' `),e.opts.verbose&&(t+=" , schema:  ",m?t+="validate.schema"+f:t+=""+e.util.toQuotedString(o),t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var R=t;return t=p.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+R+"]); ":t+=" validate.errors = ["+R+"]; return false; ":t+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",d&&(t+=" else { "),t},gi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="valid"+s,c="errs__"+s,u=e.util.copy(e);u.level++;var E="valid"+u.level,g=e.schema.then,P=e.schema.else,O=g!==void 0&&(e.opts.strictKeywords?typeof g=="object"&&Object.keys(g).length>0||g===!1:e.util.schemaHasRules(g,e.RULES.all)),D=P!==void 0&&(e.opts.strictKeywords?typeof P=="object"&&Object.keys(P).length>0||P===!1:e.util.schemaHasRules(P,e.RULES.all)),S=u.baseId;if(O||D){var p;u.createErrors=!1,u.schema=o,u.schemaPath=f,u.errSchemaPath=h,t+=" var "+c+" = errors; var "+m+" = true;  ";var R=e.compositeRule;e.compositeRule=u.compositeRule=!0,t+="  "+e.validate(u)+" ",u.baseId=S,u.createErrors=!0,t+="  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; }  ",e.compositeRule=u.compositeRule=R,O?(t+=" if ("+E+") {  ",u.schema=e.schema.then,u.schemaPath=e.schemaPath+".then",u.errSchemaPath=e.errSchemaPath+"/then",t+="  "+e.validate(u)+" ",u.baseId=S,t+=" "+m+" = "+E+"; ",O&&D?(p="ifClause"+s,t+=" var "+p+" = 'then'; "):p="'then'",t+=" } ",D&&(t+=" else { ")):t+=" if (!"+E+") { ",D&&(u.schema=e.schema.else,u.schemaPath=e.schemaPath+".else",u.errSchemaPath=e.errSchemaPath+"/else",t+="  "+e.validate(u)+" ",u.baseId=S,t+=" "+m+" = "+E+"; ",O&&D?(p="ifClause"+s,t+=" var "+p+" = 'else'; "):p="'else'",t+=" } "),t+=" if (!"+m+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { failingKeyword: "+p+" } ",e.opts.messages!==!1&&(t+=` , message: 'should match "' + `+p+` + '" schema' `),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+=" }   ",d&&(t+=" else { ")}else d&&(t+=" if (true) { ");return t},bi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="valid"+s,c="errs__"+s,u=e.util.copy(e),E="";u.level++;var g="valid"+u.level,P="i"+s,O=u.dataLevel=e.dataLevel+1,D="data"+O,S=e.baseId;if(t+="var "+c+" = errors;var "+m+";",Array.isArray(o)){var p=e.schema.additionalItems;if(p===!1){t+=" "+m+" = "+_+".length <= "+o.length+"; ";var R=h;h=e.errSchemaPath+"/additionalItems",t+="  if (!"+m+") {   ";var C=C||[];C.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { limit: "+o.length+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have more than "+o.length+" items' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var F=t;t=C.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+F+"]); ":t+=" validate.errors = ["+F+"]; return false; ":t+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",h=R,d&&(E+="}",t+=" else { ")}var N=o;if(N){for(var T,b=-1,I=N.length-1;b<I;)if(T=N[b+=1],e.opts.strictKeywords?typeof T=="object"&&Object.keys(T).length>0||T===!1:e.util.schemaHasRules(T,e.RULES.all)){t+=" "+g+" = true; if ("+_+".length > "+b+") { ";var w=_+"["+b+"]";u.schema=T,u.schemaPath=f+"["+b+"]",u.errSchemaPath=h+"/"+b,u.errorPath=e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers,!0),u.dataPathArr[O]=b;var A=e.validate(u);u.baseId=S,e.util.varOccurences(A,D)<2?t+=" "+e.util.varReplace(A,D,w)+" ":t+=" var "+D+" = "+w+"; "+A+" ",t+=" }  ",d&&(t+=" if ("+g+") { ",E+="}")}}if(typeof p=="object"&&(e.opts.strictKeywords?typeof p=="object"&&Object.keys(p).length>0||p===!1:e.util.schemaHasRules(p,e.RULES.all))){u.schema=p,u.schemaPath=e.schemaPath+".additionalItems",u.errSchemaPath=e.errSchemaPath+"/additionalItems",t+=" "+g+" = true; if ("+_+".length > "+o.length+") {  for (var "+P+" = "+o.length+"; "+P+" < "+_+".length; "+P+"++) { ",u.errorPath=e.util.getPathExpr(e.errorPath,P,e.opts.jsonPointers,!0);var w=_+"["+P+"]";u.dataPathArr[O]=P;var A=e.validate(u);u.baseId=S,e.util.varOccurences(A,D)<2?t+=" "+e.util.varReplace(A,D,w)+" ":t+=" var "+D+" = "+w+"; "+A+" ",d&&(t+=" if (!"+g+") break; "),t+=" } }  ",d&&(t+=" if ("+g+") { ",E+="}")}}else if(e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all)){u.schema=o,u.schemaPath=f,u.errSchemaPath=h,t+="  for (var "+P+" = 0; "+P+" < "+_+".length; "+P+"++) { ",u.errorPath=e.util.getPathExpr(e.errorPath,P,e.opts.jsonPointers,!0);var w=_+"["+P+"]";u.dataPathArr[O]=P;var A=e.validate(u);u.baseId=S,e.util.varOccurences(A,D)<2?t+=" "+e.util.varReplace(A,D,w)+" ":t+=" var "+D+" = "+w+"; "+A+" ",d&&(t+=" if (!"+g+") break; "),t+=" }"}return d&&(t+=" "+E+" if ("+c+" == errors) {"),t},Cl=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,S,_="data"+(n||""),m=e.opts.$data&&o&&o.$data,c;m?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=o;var u=r=="maximum",E=u?"exclusiveMaximum":"exclusiveMinimum",g=e.schema[E],P=e.opts.$data&&g&&g.$data,O=u?"<":">",D=u?">":"<",S=void 0;if(!(m||typeof o=="number"||o===void 0))throw new Error(r+" must be number");if(!(P||g===void 0||typeof g=="number"||typeof g=="boolean"))throw new Error(E+" must be number or boolean");if(P){var p=e.util.getData(g.$data,n,e.dataPathArr),R="exclusive"+s,C="exclType"+s,F="exclIsNumber"+s,N="op"+s,T="' + "+N+" + '";t+=" var schemaExcl"+s+" = "+p+"; ",p="schemaExcl"+s,t+=" var "+R+"; var "+C+" = typeof "+p+"; if ("+C+" != 'boolean' && "+C+" != 'undefined' && "+C+" != 'number') { ";var S=E,b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(S||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: '"+E+" should be boolean' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var I=t;t=b.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+I+"]); ":t+=" validate.errors = ["+I+"]; return false; ":t+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else if ( ",m&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),t+=" "+C+" == 'number' ? ( ("+R+" = "+c+" === undefined || "+p+" "+O+"= "+c+") ? "+_+" "+D+"= "+p+" : "+_+" "+D+" "+c+" ) : ( ("+R+" = "+p+" === true) ? "+_+" "+D+"= "+c+" : "+_+" "+D+" "+c+" ) || "+_+" !== "+_+") { var op"+s+" = "+R+" ? '"+O+"' : '"+O+"='; ",o===void 0&&(S=E,h=e.errSchemaPath+"/"+E,c=p,m=P)}else{var F=typeof g=="number",T=O;if(F&&m){var N="'"+T+"'";t+=" if ( ",m&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),t+=" ( "+c+" === undefined || "+g+" "+O+"= "+c+" ? "+_+" "+D+"= "+g+" : "+_+" "+D+" "+c+" ) || "+_+" !== "+_+") { "}else{F&&o===void 0?(R=!0,S=E,h=e.errSchemaPath+"/"+E,c=g,D+="="):(F&&(c=Math[u?"min":"max"](g,o)),g===(F?c:!0)?(R=!0,S=E,h=e.errSchemaPath+"/"+E,D+="="):(R=!1,T+="="));var N="'"+T+"'";t+=" if ( ",m&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),t+=" "+_+" "+D+" "+c+" || "+_+" !== "+_+") { "}}S=S||r;var b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(S||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { comparison: "+N+", limit: "+c+", exclusive: "+R+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be "+T+" ",m?t+="' + "+c:t+=""+c+"'"),e.opts.verbose&&(t+=" , schema:  ",m?t+="validate.schema"+f:t+=""+o,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var I=t;return t=b.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+I+"]); ":t+=" validate.errors = ["+I+"]; return false; ":t+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",d&&(t+=" else { "),t},Nl=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,E,_="data"+(n||""),m=e.opts.$data&&o&&o.$data,c;if(m?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=o,!(m||typeof o=="number"))throw new Error(r+" must be number");var u=r=="maxItems"?">":"<";t+="if ( ",m&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),t+=" "+_+".length "+u+" "+c+") { ";var E=r,g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(E||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { limit: "+c+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have ",r=="maxItems"?t+="more":t+="fewer",t+=" than ",m?t+="' + "+c+" + '":t+=""+o,t+=" items' "),e.opts.verbose&&(t+=" , schema:  ",m?t+="validate.schema"+f:t+=""+o,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var P=t;return t=g.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",d&&(t+=" else { "),t},Rl=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,E,_="data"+(n||""),m=e.opts.$data&&o&&o.$data,c;if(m?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=o,!(m||typeof o=="number"))throw new Error(r+" must be number");var u=r=="maxLength"?">":"<";t+="if ( ",m&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),e.opts.unicode===!1?t+=" "+_+".length ":t+=" ucs2length("+_+") ",t+=" "+u+" "+c+") { ";var E=r,g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(E||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { limit: "+c+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be ",r=="maxLength"?t+="longer":t+="shorter",t+=" than ",m?t+="' + "+c+" + '":t+=""+o,t+=" characters' "),e.opts.verbose&&(t+=" , schema:  ",m?t+="validate.schema"+f:t+=""+o,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var P=t;return t=g.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",d&&(t+=" else { "),t},Ol=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,E,_="data"+(n||""),m=e.opts.$data&&o&&o.$data,c;if(m?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=o,!(m||typeof o=="number"))throw new Error(r+" must be number");var u=r=="maxProperties"?">":"<";t+="if ( ",m&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),t+=" Object.keys("+_+").length "+u+" "+c+") { ";var E=r,g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(E||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { limit: "+c+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have ",r=="maxProperties"?t+="more":t+="fewer",t+=" than ",m?t+="' + "+c+" + '":t+=""+o,t+=" properties' "),e.opts.verbose&&(t+=" , schema:  ",m?t+="validate.schema"+f:t+=""+o,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var P=t;return t=g.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+P+"]); ":t+=" validate.errors = ["+P+"]; return false; ":t+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",d&&(t+=" else { "),t},Ei=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m=e.opts.$data&&o&&o.$data,c;if(m?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=o,!(m||typeof o=="number"))throw new Error(r+" must be number");t+="var division"+s+";if (",m&&(t+=" "+c+" !== undefined && ( typeof "+c+" != 'number' || "),t+=" (division"+s+" = "+_+" / "+c+", ",e.opts.multipleOfPrecision?t+=" Math.abs(Math.round(division"+s+") - division"+s+") > 1e-"+e.opts.multipleOfPrecision+" ":t+=" division"+s+" !== parseInt(division"+s+") ",t+=" ) ",m&&(t+="  )  "),t+=" ) {   ";var u=u||[];u.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { multipleOf: "+c+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be multiple of ",m?t+="' + "+c:t+=""+c+"'"),e.opts.verbose&&(t+=" , schema:  ",m?t+="validate.schema"+f:t+=""+o,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var E=t;return t=u.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+E+"]); ":t+=" validate.errors = ["+E+"]; return false; ":t+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",d&&(t+=" else { "),t},Pi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="errs__"+s,c=e.util.copy(e);c.level++;var u="valid"+c.level;if(e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all)){c.schema=o,c.schemaPath=f,c.errSchemaPath=h,t+=" var "+m+" = errors;  ";var E=e.compositeRule;e.compositeRule=c.compositeRule=!0,c.createErrors=!1;var g;c.opts.allErrors&&(g=c.opts.allErrors,c.opts.allErrors=!1),t+=" "+e.validate(c)+" ",c.createErrors=!0,g&&(c.opts.allErrors=g),e.compositeRule=c.compositeRule=E,t+=" if ("+u+") {   ";var P=P||[];P.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be valid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var O=t;t=P.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+O+"]); ":t+=" validate.errors = ["+O+"]; return false; ":t+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else {  errors = "+m+"; if (vErrors !== null) { if ("+m+") vErrors.length = "+m+"; else vErrors = null; } ",e.opts.allErrors&&(t+=" } ")}else t+="  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be valid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d&&(t+=" if (false) { ");return t},wi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="valid"+s,c="errs__"+s,u=e.util.copy(e),E="";u.level++;var g="valid"+u.level,P=u.baseId,O="prevValid"+s,D="passingSchemas"+s;t+="var "+c+" = errors , "+O+" = false , "+m+" = false , "+D+" = null; ";var S=e.compositeRule;e.compositeRule=u.compositeRule=!0;var p=o;if(p)for(var R,C=-1,F=p.length-1;C<F;)R=p[C+=1],(e.opts.strictKeywords?typeof R=="object"&&Object.keys(R).length>0||R===!1:e.util.schemaHasRules(R,e.RULES.all))?(u.schema=R,u.schemaPath=f+"["+C+"]",u.errSchemaPath=h+"/"+C,t+="  "+e.validate(u)+" ",u.baseId=P):t+=" var "+g+" = true; ",C&&(t+=" if ("+g+" && "+O+") { "+m+" = false; "+D+" = ["+D+", "+C+"]; } else { ",E+="}"),t+=" if ("+g+") { "+m+" = "+O+" = true; "+D+" = "+C+"; }";return e.compositeRule=u.compositeRule=S,t+=""+E+"if (!"+m+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { passingSchemas: "+D+" } ",e.opts.messages!==!1&&(t+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+="} else {  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; }",e.opts.allErrors&&(t+=" } "),t},ki=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m=e.opts.$data&&o&&o.$data,c;m?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=o;var u=m?"(new RegExp("+c+"))":e.usePattern(o);t+="if ( ",m&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'string') || "),t+=" !"+u+".test("+_+") ) {   ";var E=E||[];E.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { pattern:  ",m?t+=""+c:t+=""+e.util.toQuotedString(o),t+="  } ",e.opts.messages!==!1&&(t+=` , message: 'should match pattern "`,m?t+="' + "+c+" + '":t+=""+e.util.escapeQuotes(o),t+=`"' `),e.opts.verbose&&(t+=" , schema:  ",m?t+="validate.schema"+f:t+=""+e.util.toQuotedString(o),t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var g=t;return t=E.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+g+"]); ":t+=" validate.errors = ["+g+"]; return false; ":t+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",d&&(t+=" else { "),t},yi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="errs__"+s,c=e.util.copy(e),u="";c.level++;var E="valid"+c.level,g="key"+s,P="idx"+s,O=c.dataLevel=e.dataLevel+1,D="data"+O,S="dataProperties"+s,p=Object.keys(o||{}).filter(G),R=e.schema.patternProperties||{},C=Object.keys(R).filter(G),F=e.schema.additionalProperties,N=p.length||C.length,T=F===!1,b=typeof F=="object"&&Object.keys(F).length,I=e.opts.removeAdditional,w=T||b||I,A=e.opts.ownProperties,X=e.baseId,oe=e.schema.required;if(oe&&!(e.opts.$data&&oe.$data)&&oe.length<e.opts.loopRequired)var le=e.util.toHash(oe);function G(Ye){return Ye!=="__proto__"}if(t+="var "+m+" = errors;var "+E+" = true;",A&&(t+=" var "+S+" = undefined;"),w){if(A?t+=" "+S+" = "+S+" || Object.keys("+_+"); for (var "+P+"=0; "+P+"<"+S+".length; "+P+"++) { var "+g+" = "+S+"["+P+"]; ":t+=" for (var "+g+" in "+_+") { ",N){if(t+=" var isAdditional"+s+" = !(false ",p.length)if(p.length>8)t+=" || validate.schema"+f+".hasOwnProperty("+g+") ";else{var Q=p;if(Q)for(var V,z=-1,Z=Q.length-1;z<Z;)V=Q[z+=1],t+=" || "+g+" == "+e.util.toQuotedString(V)+" "}if(C.length){var q=C;if(q)for(var J,ye=-1,Pe=q.length-1;ye<Pe;)J=q[ye+=1],t+=" || "+e.usePattern(J)+".test("+g+") "}t+=" ); if (isAdditional"+s+") { "}if(I=="all")t+=" delete "+_+"["+g+"]; ";else{var ae=e.errorPath,ve="' + "+g+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers)),T)if(I)t+=" delete "+_+"["+g+"]; ";else{t+=" "+E+" = false; ";var ce=h;h=e.errSchemaPath+"/additionalProperties";var ge=ge||[];ge.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { additionalProperty: '"+ve+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is an invalid additional property":t+="should NOT have additional properties",t+="' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var Se=t;t=ge.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+Se+"]); ":t+=" validate.errors = ["+Se+"]; return false; ":t+=" var err = "+Se+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h=ce,d&&(t+=" break; ")}else if(b)if(I=="failing"){t+=" var "+m+" = errors;  ";var Ae=e.compositeRule;e.compositeRule=c.compositeRule=!0,c.schema=F,c.schemaPath=e.schemaPath+".additionalProperties",c.errSchemaPath=e.errSchemaPath+"/additionalProperties",c.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var x=_+"["+g+"]";c.dataPathArr[O]=g;var j=e.validate(c);c.baseId=X,e.util.varOccurences(j,D)<2?t+=" "+e.util.varReplace(j,D,x)+" ":t+=" var "+D+" = "+x+"; "+j+" ",t+=" if (!"+E+") { errors = "+m+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+_+"["+g+"]; }  ",e.compositeRule=c.compositeRule=Ae}else{c.schema=F,c.schemaPath=e.schemaPath+".additionalProperties",c.errSchemaPath=e.errSchemaPath+"/additionalProperties",c.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var x=_+"["+g+"]";c.dataPathArr[O]=g;var j=e.validate(c);c.baseId=X,e.util.varOccurences(j,D)<2?t+=" "+e.util.varReplace(j,D,x)+" ":t+=" var "+D+" = "+x+"; "+j+" ",d&&(t+=" if (!"+E+") break; ")}e.errorPath=ae}N&&(t+=" } "),t+=" }  ",d&&(t+=" if ("+E+") { ",u+="}")}var ie=e.opts.useDefaults&&!e.compositeRule;if(p.length){var qe=p;if(qe)for(var V,Ue=-1,rt=qe.length-1;Ue<rt;){V=qe[Ue+=1];var Me=o[V];if(e.opts.strictKeywords?typeof Me=="object"&&Object.keys(Me).length>0||Me===!1:e.util.schemaHasRules(Me,e.RULES.all)){var _t=e.util.getProperty(V),x=_+_t,wt=ie&&Me.default!==void 0;c.schema=Me,c.schemaPath=f+_t,c.errSchemaPath=h+"/"+e.util.escapeFragment(V),c.errorPath=e.util.getPath(e.errorPath,V,e.opts.jsonPointers),c.dataPathArr[O]=e.util.toQuotedString(V);var j=e.validate(c);if(c.baseId=X,e.util.varOccurences(j,D)<2){j=e.util.varReplace(j,D,x);var $e=x}else{var $e=D;t+=" var "+D+" = "+x+"; "}if(wt)t+=" "+j+" ";else{if(le&&le[V]){t+=" if ( "+$e+" === undefined ",A&&(t+=" || ! Object.prototype.hasOwnProperty.call("+_+", '"+e.util.escapeQuotes(V)+"') "),t+=") { "+E+" = false; ";var ae=e.errorPath,ce=h,Ge=e.util.escapeQuotes(V);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(ae,V,e.opts.jsonPointers)),h=e.errSchemaPath+"/required";var ge=ge||[];ge.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+Ge+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+Ge+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var Se=t;t=ge.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+Se+"]); ":t+=" validate.errors = ["+Se+"]; return false; ":t+=" var err = "+Se+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h=ce,e.errorPath=ae,t+=" } else { "}else d?(t+=" if ( "+$e+" === undefined ",A&&(t+=" || ! Object.prototype.hasOwnProperty.call("+_+", '"+e.util.escapeQuotes(V)+"') "),t+=") { "+E+" = true; } else { "):(t+=" if ("+$e+" !== undefined ",A&&(t+=" &&   Object.prototype.hasOwnProperty.call("+_+", '"+e.util.escapeQuotes(V)+"') "),t+=" ) { ");t+=" "+j+" } "}}d&&(t+=" if ("+E+") { ",u+="}")}}if(C.length){var lt=C;if(lt)for(var J,At=-1,yt=lt.length-1;At<yt;){J=lt[At+=1];var Me=R[J];if(e.opts.strictKeywords?typeof Me=="object"&&Object.keys(Me).length>0||Me===!1:e.util.schemaHasRules(Me,e.RULES.all)){c.schema=Me,c.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(J),c.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(J),A?t+=" "+S+" = "+S+" || Object.keys("+_+"); for (var "+P+"=0; "+P+"<"+S+".length; "+P+"++) { var "+g+" = "+S+"["+P+"]; ":t+=" for (var "+g+" in "+_+") { ",t+=" if ("+e.usePattern(J)+".test("+g+")) { ",c.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var x=_+"["+g+"]";c.dataPathArr[O]=g;var j=e.validate(c);c.baseId=X,e.util.varOccurences(j,D)<2?t+=" "+e.util.varReplace(j,D,x)+" ":t+=" var "+D+" = "+x+"; "+j+" ",d&&(t+=" if (!"+E+") break; "),t+=" } ",d&&(t+=" else "+E+" = true; "),t+=" }  ",d&&(t+=" if ("+E+") { ",u+="}")}}}return d&&(t+=" "+u+" if ("+m+" == errors) {"),t},Si=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="errs__"+s,c=e.util.copy(e),u="";c.level++;var E="valid"+c.level;if(t+="var "+m+" = errors;",e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all)){c.schema=o,c.schemaPath=f,c.errSchemaPath=h;var g="key"+s,P="idx"+s,O="i"+s,D="' + "+g+" + '",S=c.dataLevel=e.dataLevel+1,p="data"+S,R="dataProperties"+s,C=e.opts.ownProperties,F=e.baseId;C&&(t+=" var "+R+" = undefined; "),C?t+=" "+R+" = "+R+" || Object.keys("+_+"); for (var "+P+"=0; "+P+"<"+R+".length; "+P+"++) { var "+g+" = "+R+"["+P+"]; ":t+=" for (var "+g+" in "+_+") { ",t+=" var startErrs"+s+" = errors; ";var N=g,T=e.compositeRule;e.compositeRule=c.compositeRule=!0;var b=e.validate(c);c.baseId=F,e.util.varOccurences(b,p)<2?t+=" "+e.util.varReplace(b,p,N)+" ":t+=" var "+p+" = "+N+"; "+b+" ",e.compositeRule=c.compositeRule=T,t+=" if (!"+E+") { for (var "+O+"=startErrs"+s+"; "+O+"<errors; "+O+"++) { vErrors["+O+"].propertyName = "+g+"; }   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { propertyName: '"+D+"' } ",e.opts.messages!==!1&&(t+=" , message: 'property name \\'"+D+"\\' is invalid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),d&&(t+=" break; "),t+=" } }"}return d&&(t+=" "+u+" if ("+m+" == errors) {"),t},Di=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="valid"+s,c=e.opts.$data&&o&&o.$data;c&&(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ");var u="schema"+s;if(!c)if(o.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var E=[],g=o;if(g)for(var P,O=-1,D=g.length-1;O<D;){P=g[O+=1];var S=e.schema.properties[P];S&&(e.opts.strictKeywords?typeof S=="object"&&Object.keys(S).length>0||S===!1:e.util.schemaHasRules(S,e.RULES.all))||(E[E.length]=P)}}else var E=o;if(c||E.length){var p=e.errorPath,R=c||E.length>=e.opts.loopRequired,C=e.opts.ownProperties;if(d)if(t+=" var missing"+s+"; ",R){c||(t+=" var "+u+" = validate.schema"+f+"; ");var F="i"+s,N="schema"+s+"["+F+"]",T="' + "+N+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(p,N,e.opts.jsonPointers)),t+=" var "+m+" = true; ",c&&(t+=" if (schema"+s+" === undefined) "+m+" = true; else if (!Array.isArray(schema"+s+")) "+m+" = false; else {"),t+=" for (var "+F+" = 0; "+F+" < "+u+".length; "+F+"++) { "+m+" = "+_+"["+u+"["+F+"]] !== undefined ",C&&(t+=" &&   Object.prototype.hasOwnProperty.call("+_+", "+u+"["+F+"]) "),t+="; if (!"+m+") break; } ",c&&(t+="  }  "),t+="  if (!"+m+") {   ";var b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+T+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var I=t;t=b.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+I+"]); ":t+=" validate.errors = ["+I+"]; return false; ":t+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { "}else{t+=" if ( ";var w=E;if(w)for(var A,F=-1,X=w.length-1;F<X;){A=w[F+=1],F&&(t+=" || ");var oe=e.util.getProperty(A),le=_+oe;t+=" ( ( "+le+" === undefined ",C&&(t+=" || ! Object.prototype.hasOwnProperty.call("+_+", '"+e.util.escapeQuotes(A)+"') "),t+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?A:oe)+") ) "}t+=") {  ";var N="missing"+s,T="' + "+N+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(p,N,!0):p+" + "+N);var b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+T+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var I=t;t=b.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+I+"]); ":t+=" validate.errors = ["+I+"]; return false; ":t+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { "}else if(R){c||(t+=" var "+u+" = validate.schema"+f+"; ");var F="i"+s,N="schema"+s+"["+F+"]",T="' + "+N+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(p,N,e.opts.jsonPointers)),c&&(t+=" if ("+u+" && !Array.isArray("+u+")) {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+T+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+u+" !== undefined) { "),t+=" for (var "+F+" = 0; "+F+" < "+u+".length; "+F+"++) { if ("+_+"["+u+"["+F+"]] === undefined ",C&&(t+=" || ! Object.prototype.hasOwnProperty.call("+_+", "+u+"["+F+"]) "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+T+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",c&&(t+="  }  ")}else{var G=E;if(G)for(var A,Q=-1,V=G.length-1;Q<V;){A=G[Q+=1];var oe=e.util.getProperty(A),T=e.util.escapeQuotes(A),le=_+oe;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(p,A,e.opts.jsonPointers)),t+=" if ( "+le+" === undefined ",C&&(t+=" || ! Object.prototype.hasOwnProperty.call("+_+", '"+e.util.escapeQuotes(A)+"') "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+T+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=p}else d&&(t+=" if (true) {");return t},Ci=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_="data"+(n||""),m="valid"+s,c=e.opts.$data&&o&&o.$data,u;if(c?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",u="schema"+s):u=o,(o||c)&&e.opts.uniqueItems!==!1){c&&(t+=" var "+m+"; if ("+u+" === false || "+u+" === undefined) "+m+" = true; else if (typeof "+u+" != 'boolean') "+m+" = false; else { "),t+=" var i = "+_+".length , "+m+" = true , j; if (i > 1) { ";var E=e.schema.items&&e.schema.items.type,g=Array.isArray(E);if(!E||E=="object"||E=="array"||g&&(E.indexOf("object")>=0||E.indexOf("array")>=0))t+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+_+"[i], "+_+"[j])) { "+m+" = false; break outer; } } } ";else{t+=" var itemIndices = {}, item; for (;i--;) { var item = "+_+"[i]; ";var P="checkDataType"+(g?"s":"");t+=" if ("+e.util[P](E,"item",e.opts.strictNumbers,!0)+") continue; ",g&&(t+=` if (typeof item == 'string') item = '"' + item; `),t+=" if (typeof itemIndices[item] == 'number') { "+m+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}t+=" } ",c&&(t+="  }  "),t+=" if (!"+m+") {   ";var O=O||[];O.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(t+=" , schema:  ",c?t+="validate.schema"+f:t+=""+o,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+_+" "),t+=" } "):t+=" {} ";var D=t;t=O.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+D+"]); ":t+=" validate.errors = ["+D+"]; return false; ":t+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",d&&(t+=" else { ")}else d&&(t+=" if (true) { ");return t},Ni={$ref:fi,allOf:ui,anyOf:ci,$comment:di,const:hi,contains:_i,dependencies:vi,enum:mi,format:pi,if:gi,items:bi,maximum:Cl,minimum:Cl,maxItems:Nl,minItems:Nl,maxLength:Rl,minLength:Rl,maxProperties:Ol,minProperties:Ol,multipleOf:Ei,not:Pi,oneOf:wi,pattern:ki,properties:yi,propertyNames:Si,required:Di,uniqueItems:Ci,validate:Vs},Il=Ni,Fr=tr.toHash,Ri=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],r=["type","$comment"],l=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],t=["number","integer","string","array","object","boolean","null"];return e.all=Fr(r),e.types=Fr(t),e.forEach(function(s){s.rules=s.rules.map(function(n){var o;if(typeof n=="object"){var f=Object.keys(n)[0];o=n[f],n=f,o.forEach(function(d){r.push(d),e.all[d]=!0})}r.push(n);var h=e.all[n]={keyword:n,code:Il[n],implements:o};return h}),e.all.$comment={keyword:"$comment",code:Il.$comment},s.type&&(e.types[s.type]=s)}),e.keywords=Fr(r.concat(l)),e.custom={},e},Tl=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],Oi=function(a,e){for(var r=0;r<e.length;r++){a=JSON.parse(JSON.stringify(a));var l=e[r].split("/"),t=a,s;for(s=1;s<l.length;s++)t=t[l[s]];for(s=0;s<Tl.length;s++){var n=Tl[s],o=t[n];o&&(t[n]={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return a},Ii=xr.MissingRef,Ti=en;function en(a,e,r){var l=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(r=e,e=void 0);var t=s(a).then(function(){var o=l._addSchema(a,void 0,e);return o.validate||n(o)});return r&&t.then(function(o){r(null,o)},r),t;function s(o){var f=o.$schema;return f&&!l.getSchema(f)?en.call(l,{$ref:f},!0):Promise.resolve()}function n(o){try{return l._compile(o)}catch(h){if(h instanceof Ii)return f(h);throw h}function f(h){var d=h.missingSchema;if(c(d))throw new Error("Schema "+d+" is loaded but "+h.missingRef+" cannot be resolved");var _=l._loadingSchemas[d];return _||(_=l._loadingSchemas[d]=l._opts.loadSchema(d),_.then(m,m)),_.then(function(u){if(!c(d))return s(u).then(function(){c(d)||l.addSchema(u,d,void 0,e)})}).then(function(){return n(o)});function m(){delete l._loadingSchemas[d]}function c(u){return l._refs[u]||l._schemas[u]}}}}var Ai=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],f=e.schemaPath+e.util.getProperty(r),h=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,_,m="data"+(n||""),c="valid"+s,u="errs__"+s,E=e.opts.$data&&o&&o.$data,g;E?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",g="schema"+s):g=o;var P=this,O="definition"+s,D=P.definition,S="",p,R,C,F,N;if(E&&D.$data){N="keywordValidate"+s;var T=D.validateSchema;t+=" var "+O+" = RULES.custom['"+r+"'].definition; var "+N+" = "+O+".validate;"}else{if(F=e.useCustomRule(P,o,e.schema,e),!F)return;g="validate.schema"+f,N=F.code,p=D.compile,R=D.inline,C=D.macro}var b=N+".errors",I="i"+s,w="ruleErr"+s,A=D.async;if(A&&!e.async)throw new Error("async keyword in sync schema");if(R||C||(t+=""+b+" = null;"),t+="var "+u+" = errors;var "+c+";",E&&D.$data&&(S+="}",t+=" if ("+g+" === undefined) { "+c+" = true; } else { ",T&&(S+="}",t+=" "+c+" = "+O+".validateSchema("+g+"); if ("+c+") { ")),R)D.statements?t+=" "+F.validate+" ":t+=" "+c+" = "+F.validate+"; ";else if(C){var X=e.util.copy(e),S="";X.level++;var oe="valid"+X.level;X.schema=F.validate,X.schemaPath="";var le=e.compositeRule;e.compositeRule=X.compositeRule=!0;var G=e.validate(X).replace(/validate\.schema/g,N);e.compositeRule=X.compositeRule=le,t+=" "+G}else{var Q=Q||[];Q.push(t),t="",t+="  "+N+".call( ",e.opts.passContext?t+="this":t+="self",p||D.schema===!1?t+=" , "+m+" ":t+=" , "+g+" , "+m+" , validate.schema"+e.schemaPath+" ",t+=" , (dataPath || '')",e.errorPath!='""'&&(t+=" + "+e.errorPath);var V=n?"data"+(n-1||""):"parentData",z=n?e.dataPathArr[n]:"parentDataProperty";t+=" , "+V+" , "+z+" , rootData )  ";var Z=t;t=Q.pop(),D.errors===!1?(t+=" "+c+" = ",A&&(t+="await "),t+=""+Z+"; "):A?(b="customErrors"+s,t+=" var "+b+" = null; try { "+c+" = await "+Z+"; } catch (e) { "+c+" = false; if (e instanceof ValidationError) "+b+" = e.errors; else throw e; } "):t+=" "+b+" = null; "+c+" = "+Z+"; "}if(D.modifying&&(t+=" if ("+V+") "+m+" = "+V+"["+z+"];"),t+=""+S,D.valid)d&&(t+=" if (true) { ");else{t+=" if ( ",D.valid===void 0?(t+=" !",C?t+=""+oe:t+=""+c):t+=" "+!D.valid+" ",t+=") { ",_=P.keyword;var Q=Q||[];Q.push(t),t="";var Q=Q||[];Q.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(_||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { keyword: '"+P.keyword+"' } ",e.opts.messages!==!1&&(t+=` , message: 'should pass "`+P.keyword+`" keyword validation' `),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var q=t;t=Q.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+q+"]); ":t+=" validate.errors = ["+q+"]; return false; ":t+=" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var J=t;t=Q.pop(),R?D.errors?D.errors!="full"&&(t+="  for (var "+I+"="+u+"; "+I+"<errors; "+I+"++) { var "+w+" = vErrors["+I+"]; if ("+w+".dataPath === undefined) "+w+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+w+".schemaPath === undefined) { "+w+'.schemaPath = "'+h+'"; } ',e.opts.verbose&&(t+=" "+w+".schema = "+g+"; "+w+".data = "+m+"; "),t+=" } "):D.errors===!1?t+=" "+J+" ":(t+=" if ("+u+" == errors) { "+J+" } else {  for (var "+I+"="+u+"; "+I+"<errors; "+I+"++) { var "+w+" = vErrors["+I+"]; if ("+w+".dataPath === undefined) "+w+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+w+".schemaPath === undefined) { "+w+'.schemaPath = "'+h+'"; } ',e.opts.verbose&&(t+=" "+w+".schema = "+g+"; "+w+".data = "+m+"; "),t+=" } } "):C?(t+="   var err =   ",e.createErrors!==!1?(t+=" { keyword: '"+(_||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { keyword: '"+P.keyword+"' } ",e.opts.messages!==!1&&(t+=` , message: 'should pass "`+P.keyword+`" keyword validation' `),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; ")):D.errors===!1?t+=" "+J+" ":(t+=" if (Array.isArray("+b+")) { if (vErrors === null) vErrors = "+b+"; else vErrors = vErrors.concat("+b+"); errors = vErrors.length;  for (var "+I+"="+u+"; "+I+"<errors; "+I+"++) { var "+w+" = vErrors["+I+"]; if ("+w+".dataPath === undefined) "+w+".dataPath = (dataPath || '') + "+e.errorPath+";  "+w+'.schemaPath = "'+h+'";  ',e.opts.verbose&&(t+=" "+w+".schema = "+g+"; "+w+".data = "+m+"; "),t+=" } } else { "+J+" } "),t+=" } ",d&&(t+=" else { ")}return t};const Fi="http://json-schema.org/draft-07/schema#",Li="http://json-schema.org/draft-07/schema#",ji="Core schema meta-schema",qi={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},zi=["object","boolean"],Ui={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},tn={$schema:Fi,$id:Li,title:ji,definitions:qi,type:zi,properties:Ui,default:!0};var Al=tn,Vi={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:Al.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:Al.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},Mi=/^[a-z_$][a-z0-9_$-]*$/i,Bi=Ai,$i=Vi,Hi={add:Qi,get:Gi,remove:Ki,validate:Hr};function Qi(a,e){var r=this.RULES;if(r.keywords[a])throw new Error("Keyword "+a+" is already defined");if(!Mi.test(a))throw new Error("Keyword "+a+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var l=e.type;if(Array.isArray(l))for(var t=0;t<l.length;t++)n(a,l[t],e);else n(a,l,e);var s=e.metaSchema;s&&(e.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(s,!0))}r.keywords[a]=r.all[a]=!0;function n(o,f,h){for(var d,_=0;_<r.length;_++){var m=r[_];if(m.type==f){d=m;break}}d||(d={type:f,rules:[]},r.push(d));var c={keyword:o,definition:h,custom:!0,code:Bi,implements:h.implements};d.rules.push(c),r.custom[o]=c}return this}function Gi(a){var e=this.RULES.custom[a];return e?e.definition:this.RULES.keywords[a]||!1}function Ki(a){var e=this.RULES;delete e.keywords[a],delete e.all[a],delete e.custom[a];for(var r=0;r<e.length;r++)for(var l=e[r].rules,t=0;t<l.length;t++)if(l[t].keyword==a){l.splice(t,1);break}return this}function Hr(a,e){Hr.errors=null;var r=this._validateKeyword=this._validateKeyword||this.compile($i,!0);if(r(a))return!0;if(Hr.errors=r.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(r.errors));return!1}const Ji="http://json-schema.org/draft-07/schema#",Yi="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Xi="Meta-schema for $data reference (JSON Schema extension proposal)",Zi="object",Wi=["$data"],xi={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},ef=!1,tf={$schema:Ji,$id:Yi,description:Xi,type:Zi,required:Wi,properties:xi,additionalProperties:ef};var rn=Bo,Zt=Wr,rf=Yo,ln=Ls,lf=Us,af=ri,sf=Ri,an=Oi,sn=tr,nf=ct;ct.prototype.validate=ff;ct.prototype.compile=uf;ct.prototype.addSchema=cf;ct.prototype.addMetaSchema=df;ct.prototype.validateSchema=hf;ct.prototype.getSchema=vf;ct.prototype.removeSchema=pf;ct.prototype.addFormat=Sf;ct.prototype.errorsText=yf;ct.prototype._addSchema=gf;ct.prototype._compile=bf;ct.prototype.compileAsync=Ti;var Rr=Hi;ct.prototype.addKeyword=Rr.add;ct.prototype.getKeyword=Rr.get;ct.prototype.removeKeyword=Rr.remove;ct.prototype.validateKeyword=Rr.validate;var nn=xr;ct.ValidationError=nn.Validation;ct.MissingRefError=nn.MissingRef;ct.$dataMetaSchema=an;var kr="http://json-schema.org/draft-07/schema",Fl=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],of=["/properties"];function ct(a){if(!(this instanceof ct))return new ct(a);a=this._opts=sn.copy(a)||{},If(this),this._schemas={},this._refs={},this._fragments={},this._formats=af(a.format),this._cache=a.cache||new rf,this._loadingSchemas={},this._compilations=[],this.RULES=sf(),this._getId=Ef(a),a.loopRequired=a.loopRequired||1/0,a.errorDataPath=="property"&&(a._errorDataPathProperty=!0),a.serialize===void 0&&(a.serialize=lf),this._metaOpts=Of(this),a.formats&&Nf(this),a.keywords&&Rf(this),Df(this),typeof a.meta=="object"&&this.addMetaSchema(a.meta),a.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),Cf(this)}function ff(a,e){var r;if(typeof a=="string"){if(r=this.getSchema(a),!r)throw new Error('no schema with key or ref "'+a+'"')}else{var l=this._addSchema(a);r=l.validate||this._compile(l)}var t=r(e);return r.$async!==!0&&(this.errors=r.errors),t}function uf(a,e){var r=this._addSchema(a,void 0,e);return r.validate||this._compile(r)}function cf(a,e,r,l){if(Array.isArray(a)){for(var t=0;t<a.length;t++)this.addSchema(a[t],void 0,r,l);return this}var s=this._getId(a);if(s!==void 0&&typeof s!="string")throw new Error("schema id must be string");return e=Zt.normalizeId(e||s),fn(this,e),this._schemas[e]=this._addSchema(a,r,l,!0),this}function df(a,e,r){return this.addSchema(a,e,r,!0),this}function hf(a,e){var r=a.$schema;if(r!==void 0&&typeof r!="string")throw new Error("$schema must be a string");if(r=r||this._opts.defaultMeta||_f(this),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var l=this.validate(r,a);if(!l&&e){var t="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(t);else throw new Error(t)}return l}function _f(a){var e=a._opts.meta;return a._opts.defaultMeta=typeof e=="object"?a._getId(e)||e:a.getSchema(kr)?kr:void 0,a._opts.defaultMeta}function vf(a){var e=on(this,a);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return mf(this,a)}}function mf(a,e){var r=Zt.schema.call(a,{schema:{}},e);if(r){var l=r.schema,t=r.root,s=r.baseId,n=rn.call(a,l,t,void 0,s);return a._fragments[e]=new ln({ref:e,fragment:!0,schema:l,root:t,baseId:s,validate:n}),n}}function on(a,e){return e=Zt.normalizeId(e),a._schemas[e]||a._refs[e]||a._fragments[e]}function pf(a){if(a instanceof RegExp)return hr(this,this._schemas,a),hr(this,this._refs,a),this;switch(typeof a){case"undefined":return hr(this,this._schemas),hr(this,this._refs),this._cache.clear(),this;case"string":var e=on(this,a);return e&&this._cache.del(e.cacheKey),delete this._schemas[a],delete this._refs[a],this;case"object":var r=this._opts.serialize,l=r?r(a):a;this._cache.del(l);var t=this._getId(a);t&&(t=Zt.normalizeId(t),delete this._schemas[t],delete this._refs[t])}return this}function hr(a,e,r){for(var l in e){var t=e[l];!t.meta&&(!r||r.test(l))&&(a._cache.del(t.cacheKey),delete e[l])}}function gf(a,e,r,l){if(typeof a!="object"&&typeof a!="boolean")throw new Error("schema should be object or boolean");var t=this._opts.serialize,s=t?t(a):a,n=this._cache.get(s);if(n)return n;l=l||this._opts.addUsedSchema!==!1;var o=Zt.normalizeId(this._getId(a));o&&l&&fn(this,o);var f=this._opts.validateSchema!==!1&&!e,h;f&&!(h=o&&o==Zt.normalizeId(a.$schema))&&this.validateSchema(a,!0);var d=Zt.ids.call(this,a),_=new ln({id:o,schema:a,localRefs:d,cacheKey:s,meta:r});return o[0]!="#"&&l&&(this._refs[o]=_),this._cache.put(s,_),f&&h&&this.validateSchema(a,!0),_}function bf(a,e){if(a.compiling)return a.validate=t,t.schema=a.schema,t.errors=null,t.root=e||t,a.schema.$async===!0&&(t.$async=!0),t;a.compiling=!0;var r;a.meta&&(r=this._opts,this._opts=this._metaOpts);var l;try{l=rn.call(this,a.schema,e,a.localRefs)}catch(s){throw delete a.validate,s}finally{a.compiling=!1,a.meta&&(this._opts=r)}return a.validate=l,a.refs=l.refs,a.refVal=l.refVal,a.root=l.root,l;function t(){var s=a.validate,n=s.apply(this,arguments);return t.errors=s.errors,n}}function Ef(a){switch(a.schemaId){case"auto":return kf;case"id":return Pf;default:return wf}}function Pf(a){return a.$id&&this.logger.warn("schema $id ignored",a.$id),a.id}function wf(a){return a.id&&this.logger.warn("schema id ignored",a.id),a.$id}function kf(a){if(a.$id&&a.id&&a.$id!=a.id)throw new Error("schema $id is different from id");return a.$id||a.id}function yf(a,e){if(a=a||this.errors,!a)return"No errors";e=e||{};for(var r=e.separator===void 0?", ":e.separator,l=e.dataVar===void 0?"data":e.dataVar,t="",s=0;s<a.length;s++){var n=a[s];n&&(t+=l+n.dataPath+" "+n.message+r)}return t.slice(0,-r.length)}function Sf(a,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[a]=e,this}function Df(a){var e;if(a._opts.$data&&(e=tf,a.addMetaSchema(e,e.$id,!0)),a._opts.meta!==!1){var r=tn;a._opts.$data&&(r=an(r,of)),a.addMetaSchema(r,kr,!0),a._refs["http://json-schema.org/schema"]=kr}}function Cf(a){var e=a._opts.schemas;if(e)if(Array.isArray(e))a.addSchema(e);else for(var r in e)a.addSchema(e[r],r)}function Nf(a){for(var e in a._opts.formats){var r=a._opts.formats[e];a.addFormat(e,r)}}function Rf(a){for(var e in a._opts.keywords){var r=a._opts.keywords[e];a.addKeyword(e,r)}}function fn(a,e){if(a._schemas[e]||a._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function Of(a){for(var e=sn.copy(a._opts),r=0;r<Fl.length;r++)delete e[Fl[r]];return e}function If(a){var e=a._opts.logger;if(e===!1)a.logger={log:Lr,warn:Lr,error:Lr};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");a.logger=e}}function Lr(){}const Tf=Fn(nf);function Bt(a,e,r,l,t,s,n,o,f,h,d,_,m){const c={id:`${Math.random()}`,type:l,position:{x:o,y:f},data:{label:t,sequence:n,d3f_class:s,user_properties:[]},measured:{width:h,height:d},origin:[.5,0],selected:!1,dragging:!1};let u,E;m?(u=c.id,E=r.id):(u=r.id,E=c.id);const g={type:"editableEdge",data:{label:_},source:E,sourceHandle:"source",target:u,targetHandle:"target",id:`xy-edge__${E}source-${u}target`,selected:!1};e.update(P=>[...P,g]),a.update(P=>[...P,c])}function Ll(a,e,r){const l=a.slice();return l[18]=e[r],l}const Af=a=>({}),jl=a=>({});function Ff(a){let e;return{c(){e=k("No related offensive techniques in this release.")},l(r){e=y(r,"No related offensive techniques in this release.")},m(r,l){v(r,e,l)},p:ke,i:ke,o:ke,d(r){r&&i(e)}}}function Lf(a){let e,r;return e=new Mt({props:{$$slots:{default:[Uf]},$$scope:{ctx:a}}}),{c(){Re(e.$$.fragment)},l(l){Oe(e.$$.fragment,l)},m(l,t){Ie(e,l,t),r=!0},p(l,t){const s={};t&16394&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){me(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function jf(a){let e,r="Loading...";return{c(){e=M("div"),e.textContent=r},l(l){e=B(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:ke,i:ke,o:ke,d(l){l&&i(e)}}}function ql(a){let e=a[18].off_tech_id.value.replace(/ |\./g,"")+"",r,l,t=a[18].off_tech_label.value+"",s,n,o="-->",f,h,d=a[18].off_artifact_rel_label.value.replace(/ /g,"")+"",_,m,c=he(a[18].off_artifact.value)+"",u,E,g=a[18].off_artifact_label.value+"",P,O,D,S,p=he(a[18].off_artifact.value)+"",R,C,F=a[18].off_tech_id.value.replace(/ |\./g,"")+"",N,T,b=a[18].off_tech_id.value.replace(/ |\./g,"")+"",I,w,A=he(a[18].off_artifact.value)+"",X,oe,le=he(a[18].off_artifact.value)+"",G,Q;function V(q,J){return J&10&&(D=null),D==null&&(D=!!q[3].includes(q[18].off_tech_id.value.replace(/ |\./g,""))),D?zf:qf}let z=V(a,-1),Z=z(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),h=k(" |"),_=k(d),m=k("| "),u=k(c),E=k('["'),P=k(g),O=k(`"];
            `),Z.c(),S=k(`
            class `),R=k(p),C=k(" ArtifactNode; click "),N=k(F),T=k(` href "javascript:da_to_off_callback('`),I=k(b),w=k(`')"; click `),X=k(A),oe=k(' href "/dao/artifact/d3f:'),G=k(le),Q=k('";')},l(q){r=y(q,e),l=y(q,'["'),s=y(q,t),n=y(q,'"] '),f=y(q,o),h=y(q," |"),_=y(q,d),m=y(q,"| "),u=y(q,c),E=y(q,'["'),P=y(q,g),O=y(q,`"];
            `),Z.l(q),S=y(q,`
            class `),R=y(q,p),C=y(q," ArtifactNode; click "),N=y(q,F),T=y(q,` href "javascript:da_to_off_callback('`),I=y(q,b),w=y(q,`')"; click `),X=y(q,A),oe=y(q,' href "/dao/artifact/d3f:'),G=y(q,le),Q=y(q,'";')},m(q,J){v(q,r,J),v(q,l,J),v(q,s,J),v(q,n,J),v(q,f,J),v(q,h,J),v(q,_,J),v(q,m,J),v(q,u,J),v(q,E,J),v(q,P,J),v(q,O,J),Z.m(q,J),v(q,S,J),v(q,R,J),v(q,C,J),v(q,N,J),v(q,T,J),v(q,I,J),v(q,w,J),v(q,X,J),v(q,oe,J),v(q,G,J),v(q,Q,J)},p(q,J){J&2&&e!==(e=q[18].off_tech_id.value.replace(/ |\./g,"")+"")&&Y(r,e),J&2&&t!==(t=q[18].off_tech_label.value+"")&&Y(s,t),J&2&&d!==(d=q[18].off_artifact_rel_label.value.replace(/ /g,"")+"")&&Y(_,d),J&2&&c!==(c=he(q[18].off_artifact.value)+"")&&Y(u,c),J&2&&g!==(g=q[18].off_artifact_label.value+"")&&Y(P,g),z===(z=V(q,J))&&Z?Z.p(q,J):(Z.d(1),Z=z(q),Z&&(Z.c(),Z.m(S.parentNode,S))),J&2&&p!==(p=he(q[18].off_artifact.value)+"")&&Y(R,p),J&2&&F!==(F=q[18].off_tech_id.value.replace(/ |\./g,"")+"")&&Y(N,F),J&2&&b!==(b=q[18].off_tech_id.value.replace(/ |\./g,"")+"")&&Y(I,b),J&2&&A!==(A=he(q[18].off_artifact.value)+"")&&Y(X,A),J&2&&le!==(le=he(q[18].off_artifact.value)+"")&&Y(G,le)},d(q){q&&(i(r),i(l),i(s),i(n),i(f),i(h),i(_),i(m),i(u),i(E),i(P),i(O),i(S),i(R),i(C),i(N),i(T),i(I),i(w),i(X),i(oe),i(G),i(Q)),Z.d(q)}}}function qf(a){let e,r=a[18].off_tech_id.value.replace(/ |\./g,"")+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" OffensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," OffensiveTechniqueNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&Y(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function zf(a){let e,r=a[18].off_tech_id.value.replace(/ |\./g,"")+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" SelectedOffensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," SelectedOffensiveTechniqueNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&Y(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function zl(a){let e=a[6].edge_is_unique(a[18].off_tech_label.value,a[18].off_artifact_rel_label.value,a[18].off_artifact_label.value),r,l=e&&ql(a);return{c(){l&&l.c(),r=Ee()},l(t){l&&l.l(t),r=Ee()},m(t,s){l&&l.m(t,s),v(t,r,s)},p(t,s){s&2&&(e=t[6].edge_is_unique(t[18].off_tech_label.value,t[18].off_artifact_rel_label.value,t[18].off_artifact_label.value)),e?l?l.p(t,s):(l=ql(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&i(r),l&&l.d(t)}}}function Uf(a){let e,r,l=Ne(a[1].da_to_off.results.bindings),t=[];for(let s=0;s<l.length;s+=1)t[s]=zl(Ll(a,l,s));return{c(){e=k(`graph LR;
        `);for(let s=0;s<t.length;s+=1)t[s].c();r=Ee()},l(s){e=y(s,`graph LR;
        `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=Ee()},m(s,n){v(s,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,n);v(s,r,n)},p(s,n){if(n&74){l=Ne(s[1].da_to_off.results.bindings);let o;for(o=0;o<l.length;o+=1){const f=Ll(s,l,o);t[o]?t[o].p(f,n):(t[o]=zl(f),t[o].c(),t[o].m(r.parentNode,r))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(s){s&&(i(e),i(r)),Qe(t,s)}}}function Vf(a){let e,r,l,t,s,n,o,f,h,d,_,m,c,u=a[3].length+"",E,g,P,O,D;const S=a[9].header,p=ot(S,a,a[14],jl),R=a[9].default,C=ot(R,a,a[14],null),F=[jf,Lf,Ff],N=[];function T(b,I){return b[1]?b[1].da_to_off.results.bindings.length>0?1:2:0}return o=T(a),f=N[o]=F[o](a),{c(){e=M("dialog"),r=M("div"),p&&p.c(),l=k(`
    Select Attack Techniques
    `),C&&C.c(),t=ee(),s=M("hr"),n=ee(),f.c(),h=ee(),d=M("hr"),_=ee(),m=M("button"),c=k("Insert ("),E=k(u),g=k(")"),this.h()},l(b){e=B(b,"DIALOG",{class:!0});var I=pe(e);r=B(I,"DIV",{class:!0});var w=pe(r);p&&p.l(w),l=y(w,`
    Select Attack Techniques
    `),C&&C.l(w),t=te(w),s=B(w,"HR",{}),n=te(w),f.l(w),h=te(w),d=B(w,"HR",{}),_=te(w),m=B(w,"BUTTON",{class:!0});var A=pe(m);c=y(A,"Insert ("),E=y(A,u),g=y(A,")"),A.forEach(i),w.forEach(i),I.forEach(i),this.h()},h(){m.autofocus=!0,W(m,"class","svelte-1ai9hff"),W(r,"class","svelte-1ai9hff"),W(e,"class","svelte-1ai9hff")},m(b,I){v(b,e,I),L(e,r),p&&p.m(r,null),L(r,l),C&&C.m(r,null),L(r,t),L(r,s),L(r,n),N[o].m(r,null),L(r,h),L(r,d),L(r,_),L(r,m),L(m,c),L(m,E),L(m,g),a[11](e),P=!0,m.focus(),O||(D=[be(m,"click",a[7]),be(r,"click",Rt(a[10])),be(e,"close",a[12]),be(e,"click",Vt(a[13]))],O=!0)},p(b,[I]){p&&p.p&&(!P||I&16384)&&it(p,S,b,b[14],P?ut(S,b[14],I,Af):ft(b[14]),jl),C&&C.p&&(!P||I&16384)&&it(C,R,b,b[14],P?ut(R,b[14],I,null):ft(b[14]),null);let w=o;o=T(b),o===w?N[o].p(b,I):(gt(),me(N[w],1,1,()=>{N[w]=null}),bt(),f=N[o],f?f.p(b,I):(f=N[o]=F[o](b),f.c()),de(f,1),f.m(r,h)),(!P||I&8)&&u!==(u=b[3].length+"")&&Y(E,u)},i(b){P||(de(p,b),de(C,b),de(f),P=!0)},o(b){me(p,b),me(C,b),me(f),P=!1},d(b){b&&i(e),p&&p.d(b),C&&C.d(b),N[o].d(),a[11](null),O=!1,mt(D)}}}function Mf(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{show_attack_modal:f}=e,{parent_node:h}=e,{data:d}=e,_;const m=qt();Je(a,m,p=>r(16,s=p));const c=zt();Je(a,c,p=>r(15,t=p));let u=new Kt;function E(p){l.includes(p)?r(3,l=l.filter(R=>R!==p)):l.push(p),r(3,l)}window.da_to_off_callback=function(p){E(p)};function g(){let p=0,R=200,C=100;for(const F of l){let N=d.da_to_off.results.bindings.find(T=>T.off_tech_id.value.replace(/ |\./g,"")==F);N&&(Bt(m,c,h,"attackSelectorNode",N.off_tech_label.value,"d3f:"+N.off_tech_id.value,h.data.sequence,h.position.x+p*R,h.position.y+C,182,63,N.off_artifact_rel_label.value,!1),p+=1)}m.set(s),c.set(t),_&&_.close(),r(3,l=[])}function P(p){Ot.call(this,a,p)}function O(p){He[p?"unshift":"push"](()=>{_=p,r(2,_)})}const D=()=>r(0,f=!1),S=()=>{_.close(),r(3,l=[])};return a.$$set=p=>{"show_attack_modal"in p&&r(0,f=p.show_attack_modal),"parent_node"in p&&r(8,h=p.parent_node),"data"in p&&r(1,d=p.data),"$$scope"in p&&r(14,o=p.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&f&&_&&(_.showModal(),u.reset()),a.$$.dirty&5&&!f&&_&&(_.close(),u.reset())},r(3,l=[]),[f,d,_,l,m,c,u,g,h,n,P,O,D,S,o]}class Bf extends at{constructor(e){super(),st(this,e,Mf,Vf,tt,{show_attack_modal:0,parent_node:8,data:1})}}function Ul(a,e,r){const l=a.slice();return l[23]=e[r],l}const $f=a=>({}),Vl=a=>({});function Hf(a){let e;return{c(){e=k("No related defensive techniques in this release.")},l(r){e=y(r,"No related defensive techniques in this release.")},m(r,l){v(r,e,l)},p:ke,i:ke,o:ke,d(r){r&&i(e)}}}function Qf(a){let e,r,l,t,s,n=a[4],o,f;function h(m){a[14](m)}let d={toggles:a[5]};a[4]!==void 0&&(d.selected=a[4]),l=new As({props:d}),He.push(()=>Pt(l,"selected",h));let _=Hl(a);return{c(){e=M("br"),r=ee(),Re(l.$$.fragment),s=ee(),_.c(),o=Ee()},l(m){e=B(m,"BR",{}),r=te(m),Oe(l.$$.fragment,m),s=te(m),_.l(m),o=Ee()},m(m,c){v(m,e,c),v(m,r,c),Ie(l,m,c),v(m,s,c),_.m(m,c),v(m,o,c),f=!0},p(m,c){const u={};c&32&&(u.toggles=m[5]),!t&&c&16&&(t=!0,u.selected=m[4],Et(()=>t=!1)),l.$set(u),c&16&&tt(n,n=m[4])?(gt(),me(_,1,1,ke),bt(),_=Hl(m),_.c(),de(_,1),_.m(o.parentNode,o)):_.p(m,c)},i(m){f||(de(l.$$.fragment,m),de(_),f=!0)},o(m){me(l.$$.fragment,m),me(_),f=!1},d(m){m&&(i(e),i(r),i(s),i(o)),Te(l,m),_.d(m)}}}function Gf(a){let e,r="Loading...";return{c(){e=M("div"),e.textContent=r},l(l){e=B(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:ke,i:ke,o:ke,d(l){l&&i(e)}}}function Ml(a){let e=!a[4].includes(a[23].def_tactic_label.value),r,l=e&&Bl(a);return{c(){l&&l.c(),r=Ee()},l(t){l&&l.l(t),r=Ee()},m(t,s){l&&l.m(t,s),v(t,r,s)},p(t,s){s&18&&(e=!t[4].includes(t[23].def_tactic_label.value)),e?l?l.p(t,s):(l=Bl(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&i(r),l&&l.d(t)}}}function Bl(a){let e=he(a[23].def_tech.value)+"",r,l,t=a[23].def_tech_label.value+"",s,n,o="-->",f,h,d=a[23].def_artifact_rel_label.value.replace(/ /g,"")+"",_,m,c=he(a[23].def_artifact.value)+"",u,E,g=a[23].def_artifact_label.value+"",P,O,D,S,p=he(a[23].def_artifact.value)+"",R,C,F=he(a[23].def_tech.value)+"",N,T,b=he(a[23].def_tech.value)+"",I,w,A=he(a[23].def_artifact.value)+"",X,oe,le=he(a[23].def_artifact.value)+"",G,Q;function V(q,J){return J&66&&(D=null),D==null&&(D=!!q[6].includes(he(q[23].def_tech.value))),D?Jf:Kf}let z=V(a,-1),Z=z(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),h=k(`
                | `),_=k(d),m=k(" | "),u=k(c),E=k('["'),P=k(g),O=k(`"];
                `),Z.c(),S=k(` 
                class `),R=k(p),C=k(` ArtifactNode;
                click `),N=k(F),T=k(` href "javascript:da_to_def_callback('`),I=k(b),w=k(`')";
                click `),X=k(A),oe=k(' href "/dao/artifact/d3f:'),G=k(le),Q=k('";')},l(q){r=y(q,e),l=y(q,'["'),s=y(q,t),n=y(q,'"] '),f=y(q,o),h=y(q,`
                | `),_=y(q,d),m=y(q," | "),u=y(q,c),E=y(q,'["'),P=y(q,g),O=y(q,`"];
                `),Z.l(q),S=y(q,` 
                class `),R=y(q,p),C=y(q,` ArtifactNode;
                click `),N=y(q,F),T=y(q,` href "javascript:da_to_def_callback('`),I=y(q,b),w=y(q,`')";
                click `),X=y(q,A),oe=y(q,' href "/dao/artifact/d3f:'),G=y(q,le),Q=y(q,'";')},m(q,J){v(q,r,J),v(q,l,J),v(q,s,J),v(q,n,J),v(q,f,J),v(q,h,J),v(q,_,J),v(q,m,J),v(q,u,J),v(q,E,J),v(q,P,J),v(q,O,J),Z.m(q,J),v(q,S,J),v(q,R,J),v(q,C,J),v(q,N,J),v(q,T,J),v(q,I,J),v(q,w,J),v(q,X,J),v(q,oe,J),v(q,G,J),v(q,Q,J)},p(q,J){J&2&&e!==(e=he(q[23].def_tech.value)+"")&&Y(r,e),J&2&&t!==(t=q[23].def_tech_label.value+"")&&Y(s,t),J&2&&d!==(d=q[23].def_artifact_rel_label.value.replace(/ /g,"")+"")&&Y(_,d),J&2&&c!==(c=he(q[23].def_artifact.value)+"")&&Y(u,c),J&2&&g!==(g=q[23].def_artifact_label.value+"")&&Y(P,g),z===(z=V(q,J))&&Z?Z.p(q,J):(Z.d(1),Z=z(q),Z&&(Z.c(),Z.m(S.parentNode,S))),J&2&&p!==(p=he(q[23].def_artifact.value)+"")&&Y(R,p),J&2&&F!==(F=he(q[23].def_tech.value)+"")&&Y(N,F),J&2&&b!==(b=he(q[23].def_tech.value)+"")&&Y(I,b),J&2&&A!==(A=he(q[23].def_artifact.value)+"")&&Y(X,A),J&2&&le!==(le=he(q[23].def_artifact.value)+"")&&Y(G,le)},d(q){q&&(i(r),i(l),i(s),i(n),i(f),i(h),i(_),i(m),i(u),i(E),i(P),i(O),i(S),i(R),i(C),i(N),i(T),i(I),i(w),i(X),i(oe),i(G),i(Q)),Z.d(q)}}}function Kf(a){let e,r=he(a[23].def_tech.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" DefensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," DefensiveTechniqueNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=he(s[23].def_tech.value)+"")&&Y(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function Jf(a){let e,r=he(a[23].def_tech.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" SelectedDefensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," SelectedDefensiveTechniqueNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=he(s[23].def_tech.value)+"")&&Y(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function $l(a){let e=a[3].edge_is_unique(a[23].def_tech_label.value,a[23].def_artifact_rel_label.value,a[23].def_artifact_label.value),r,l=e&&Ml(a);return{c(){l&&l.c(),r=Ee()},l(t){l&&l.l(t),r=Ee()},m(t,s){l&&l.m(t,s),v(t,r,s)},p(t,s){s&10&&(e=t[3].edge_is_unique(t[23].def_tech_label.value,t[23].def_artifact_rel_label.value,t[23].def_artifact_label.value)),e?l?l.p(t,s):(l=Ml(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&i(r),l&&l.d(t)}}}function Yf(a){let e,r,l=Ne(a[1].da_to_def.results.bindings),t=[];for(let s=0;s<l.length;s+=1)t[s]=$l(Ul(a,l,s));return{c(){e=k(`graph LR;
          `);for(let s=0;s<t.length;s+=1)t[s].c();r=Ee()},l(s){e=y(s,`graph LR;
          `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=Ee()},m(s,n){v(s,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,n);v(s,r,n)},p(s,n){if(n&90){l=Ne(s[1].da_to_def.results.bindings);let o;for(o=0;o<l.length;o+=1){const f=Ul(s,l,o);t[o]?t[o].p(f,n):(t[o]=$l(f),t[o].c(),t[o].m(r.parentNode,r))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(s){s&&(i(e),i(r)),Qe(t,s)}}}function Hl(a){let e,r;return e=new Mt({props:{$$slots:{default:[Yf]},$$scope:{ctx:a}}}),{c(){Re(e.$$.fragment)},l(l){Oe(e.$$.fragment,l)},m(l,t){Ie(e,l,t),r=!0},p(l,t){const s={};t&262234&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){me(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function Xf(a){let e,r,l,t,s,n,o,f,h,d,_,m,c,u=a[6].length+"",E,g,P,O,D;const S=a[12].header,p=ot(S,a,a[18],Vl),R=a[12].default,C=ot(R,a,a[18],null),F=[Gf,Qf,Hf],N=[];function T(b,I){return b[1]?b[1].da_to_def.results.bindings.length>0?1:2:0}return o=T(a),f=N[o]=F[o](a),{c(){e=M("dialog"),r=M("div"),p&&p.c(),l=k(`
    Select Countermeasure Techniques
    `),C&&C.c(),t=ee(),s=M("hr"),n=ee(),f.c(),h=ee(),d=M("hr"),_=ee(),m=M("button"),c=k("Insert ("),E=k(u),g=k(")"),this.h()},l(b){e=B(b,"DIALOG",{class:!0});var I=pe(e);r=B(I,"DIV",{class:!0});var w=pe(r);p&&p.l(w),l=y(w,`
    Select Countermeasure Techniques
    `),C&&C.l(w),t=te(w),s=B(w,"HR",{}),n=te(w),f.l(w),h=te(w),d=B(w,"HR",{}),_=te(w),m=B(w,"BUTTON",{class:!0});var A=pe(m);c=y(A,"Insert ("),E=y(A,u),g=y(A,")"),A.forEach(i),w.forEach(i),I.forEach(i),this.h()},h(){m.autofocus=!0,W(m,"class","svelte-1yq7x1p"),W(r,"class","svelte-1yq7x1p"),W(e,"class","svelte-1yq7x1p")},m(b,I){v(b,e,I),L(e,r),p&&p.m(r,null),L(r,l),C&&C.m(r,null),L(r,t),L(r,s),L(r,n),N[o].m(r,null),L(r,h),L(r,d),L(r,_),L(r,m),L(m,c),L(m,E),L(m,g),a[15](e),P=!0,m.focus(),O||(D=[be(m,"click",a[9]),be(r,"click",Rt(a[13])),be(e,"close",a[16]),be(e,"click",Vt(a[17]))],O=!0)},p(b,[I]){p&&p.p&&(!P||I&262144)&&it(p,S,b,b[18],P?ut(S,b[18],I,$f):ft(b[18]),Vl),C&&C.p&&(!P||I&262144)&&it(C,R,b,b[18],P?ut(R,b[18],I,null):ft(b[18]),null);let w=o;o=T(b),o===w?N[o].p(b,I):(gt(),me(N[w],1,1,()=>{N[w]=null}),bt(),f=N[o],f?f.p(b,I):(f=N[o]=F[o](b),f.c()),de(f,1),f.m(r,h)),(!P||I&64)&&u!==(u=b[6].length+"")&&Y(E,u)},i(b){P||(de(p,b),de(C,b),de(f),P=!0)},o(b){me(p,b),me(C,b),me(f),P=!1},d(b){b&&i(e),p&&p.d(b),C&&C.d(b),N[o].d(),a[15](null),O=!1,mt(D)}}}function Zf(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{show_defend_modal:f}=e,{parent_node:h}=e,{data:d}=e,_;const m=qt();Je(a,m,T=>r(20,s=T));const c=zt();Je(a,c,T=>r(19,t=T));let u=new Kt;function E(T){l.includes(T)?r(6,l=l.filter(b=>b!==T)):l.push(T),r(6,l)}window.da_to_def_callback=function(T){E(T)};function g(){let T=0,b=200,I=100;for(const w of l){let A=d.da_to_def.results.bindings.find(X=>he(X.def_tech.value)==w);A&&(Bt(m,c,h,"countermeasureSelectorNode",A.def_tech_label.value,"d3f:"+he(A.def_tech.value),h.data.sequence,h.position.x+T*b,h.position.y-I,182,63,A.def_artifact_rel_label.value,!1),T+=1)}m.set(s),c.set(t),_&&_.close(),r(6,l=[])}let P=new Set,O=[],D=[];Is(O,D)&&(D=[]);function S(T){for(const b of l){let I=d.da_to_def.results.bindings.find(w=>he(w.def_tech.value)==b);T.includes(I.def_tactic_label.value)&&r(6,l=l.filter(w=>w!==b))}r(6,l)}function p(T){Ot.call(this,a,T)}function R(T){D=T,r(4,D)}function C(T){He[T?"unshift":"push"](()=>{_=T,r(2,_)})}const F=()=>r(0,f=!1),N=()=>{_.close(),r(6,l=[])};return a.$$set=T=>{"show_defend_modal"in T&&r(0,f=T.show_defend_modal),"parent_node"in T&&r(10,h=T.parent_node),"data"in T&&r(1,d=T.data),"$$scope"in T&&r(18,o=T.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&f&&_&&(_.showModal(),r(3,u=new Kt)),a.$$.dirty&5&&!f&&_&&_.close(),a.$$.dirty&2050&&d&&(d.da_to_def.results.bindings.forEach(T=>{P.add(T.def_tactic_label.value)}),r(11,P),r(1,d)),a.$$.dirty&2048&&r(5,O=Array.from(P).sort(function(T,b){return gr[T]-gr[b]})),a.$$.dirty&16&&S(D),a.$$.dirty&24&&u.reset(D)},r(6,l=[]),[f,d,_,u,D,O,l,m,c,g,h,P,n,p,R,C,F,N,o]}class Wf extends at{constructor(e){super(),st(this,e,Zf,Xf,tt,{show_defend_modal:0,parent_node:10,data:1})}}function Ql(a,e,r){const l=a.slice();return l[26]=e[r],l}function Gl(a,e,r){const l=a.slice();return l[29]=e[r],l}function Kl(a,e,r){const l=a.slice();return l[32]=e[r],l}function Jl(a,e,r){const l=a.slice();return l[26]=e[r],l}function Yl(a,e,r){const l=a.slice();return l[29]=e[r],l}const xf=a=>({}),Xl=a=>({});function eu(a){let e;return{c(){e=k("No related weaknesses in this release.")},l(r){e=y(r,"No related weaknesses in this release.")},m(r,l){v(r,e,l)},p:ke,i:ke,o:ke,d(r){r&&i(e)}}}function tu(a){let e,r;return e=new Mt({props:{$$slots:{default:[lu]},$$scope:{ctx:a}}}),{c(){Re(e.$$.fragment)},l(l){Oe(e.$$.fragment,l)},m(l,t){Ie(e,l,t),r=!0},p(l,t){const s={};t[0]&4194750&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){me(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function ru(a){let e,r="Loading...";return{c(){e=M("div"),e.textContent=r},l(l){e=B(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:ke,i:ke,o:ke,d(l){l&&i(e)}}}function Zl(a){let e,r=Ne(a[32]["d3f:outbound"]),l=[];for(let t=0;t<r.length;t+=1)l[t]=ea(Jl(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&430){r=Ne(t[32]["d3f:outbound"]);let n;for(n=0;n<r.length;n+=1){const o=Jl(t,r,n);l[n]?l[n].p(o,s):(l[n]=ea(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&i(e),Qe(l,t)}}}function Wl(a){let e,r=a[32]["@id"]+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" selected_inbound_node;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," selected_inbound_node;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n[0]&160&&r!==(r=s[32]["@id"]+"")&&Y(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function xl(a){let e=a[32]["@id"]+"",r,l,t=a[32]["rdfs:label"][0]+"",s,n,o="-->",f,h,d=he(a[26]["@id"])+"",_,m,c=a[29]["@id"]+"",u,E,g=a[7].i(a[29]["@id"])["rdfs:label"][0]+"",P,O,D=a[32]["@id"]+"",S,p,R=a[32]["@id"]+"",C,F,N,T,b=a[8].includes(a[32]["@id"]),I,w=a[29]["@id"]+"",A,X,oe=a[29]["@id"]+"",le,G,Q,V,z=a[32]["@id"]+"",Z,q,J=a[32]["@id"]+"",ye,Pe,ae=a[29]["@id"]+"",ve,ce,ge=a[3](a[29])+"",Se,Ae,x=b&&Wl(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),h=k(" | "),_=k(d),m=k(" | "),u=k(c),E=k('["'),P=k(g),O=k(`"];
                class `),S=k(D),p=k(" inbound_node; style "),C=k(R),F=k(" fill:"),N=k(a[1]),T=k(`;
                `),x&&x.c(),I=k(`
                class `),A=k(w),X=k(" RootArtifactNode; style "),le=k(oe),G=k(" fill:"),Q=k(a[2]),V=k(`;
                click `),Z=k(z),q=k(` href "javascript:da_to_weak_callback('`),ye=k(J),Pe=k(`')"; click `),ve=k(ae),ce=k(' href "'),Se=k(ge),Ae=k('";')},l(j){r=y(j,e),l=y(j,'["'),s=y(j,t),n=y(j,'"] '),f=y(j,o),h=y(j," | "),_=y(j,d),m=y(j," | "),u=y(j,c),E=y(j,'["'),P=y(j,g),O=y(j,`"];
                class `),S=y(j,D),p=y(j," inbound_node; style "),C=y(j,R),F=y(j," fill:"),N=y(j,a[1]),T=y(j,`;
                `),x&&x.l(j),I=y(j,`
                class `),A=y(j,w),X=y(j," RootArtifactNode; style "),le=y(j,oe),G=y(j," fill:"),Q=y(j,a[2]),V=y(j,`;
                click `),Z=y(j,z),q=y(j,` href "javascript:da_to_weak_callback('`),ye=y(j,J),Pe=y(j,`')"; click `),ve=y(j,ae),ce=y(j,' href "'),Se=y(j,ge),Ae=y(j,'";')},m(j,ie){v(j,r,ie),v(j,l,ie),v(j,s,ie),v(j,n,ie),v(j,f,ie),v(j,h,ie),v(j,_,ie),v(j,m,ie),v(j,u,ie),v(j,E,ie),v(j,P,ie),v(j,O,ie),v(j,S,ie),v(j,p,ie),v(j,C,ie),v(j,F,ie),v(j,N,ie),v(j,T,ie),x&&x.m(j,ie),v(j,I,ie),v(j,A,ie),v(j,X,ie),v(j,le,ie),v(j,G,ie),v(j,Q,ie),v(j,V,ie),v(j,Z,ie),v(j,q,ie),v(j,ye,ie),v(j,Pe,ie),v(j,ve,ie),v(j,ce,ie),v(j,Se,ie),v(j,Ae,ie)},p(j,ie){ie[0]&160&&e!==(e=j[32]["@id"]+"")&&Y(r,e),ie[0]&160&&t!==(t=j[32]["rdfs:label"][0]+"")&&Y(s,t),ie[0]&160&&d!==(d=he(j[26]["@id"])+"")&&Y(_,d),ie[0]&160&&c!==(c=j[29]["@id"]+"")&&Y(u,c),ie[0]&160&&g!==(g=j[7].i(j[29]["@id"])["rdfs:label"][0]+"")&&Y(P,g),ie[0]&160&&D!==(D=j[32]["@id"]+"")&&Y(S,D),ie[0]&160&&R!==(R=j[32]["@id"]+"")&&Y(C,R),ie[0]&2&&Y(N,j[1]),ie[0]&416&&(b=j[8].includes(j[32]["@id"])),b?x?x.p(j,ie):(x=Wl(j),x.c(),x.m(I.parentNode,I)):x&&(x.d(1),x=null),ie[0]&160&&w!==(w=j[29]["@id"]+"")&&Y(A,w),ie[0]&160&&oe!==(oe=j[29]["@id"]+"")&&Y(le,oe),ie[0]&4&&Y(Q,j[2]),ie[0]&160&&z!==(z=j[32]["@id"]+"")&&Y(Z,z),ie[0]&160&&J!==(J=j[32]["@id"]+"")&&Y(ye,J),ie[0]&160&&ae!==(ae=j[29]["@id"]+"")&&Y(ve,ae),ie[0]&168&&ge!==(ge=j[3](j[29])+"")&&Y(Se,ge)},d(j){j&&(i(r),i(l),i(s),i(n),i(f),i(h),i(_),i(m),i(u),i(E),i(P),i(O),i(S),i(p),i(C),i(F),i(N),i(T),i(I),i(A),i(X),i(le),i(G),i(Q),i(V),i(Z),i(q),i(ye),i(Pe),i(ve),i(ce),i(Se),i(Ae)),x&&x.d(j)}}}function ea(a){let e,r=Ne(a[32][a[26]["@id"]]),l=[];for(let t=0;t<r.length;t+=1)l[t]=xl(Yl(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&430){r=Ne(t[32][t[26]["@id"]]);let n;for(n=0;n<r.length;n+=1){const o=Yl(t,r,n);l[n]?l[n].p(o,s):(l[n]=xl(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&i(e),Qe(l,t)}}}function ta(a){let e,r=a[32]["d3f:outbound"]&&Zl(a);return{c(){r&&r.c(),e=Ee()},l(l){r&&r.l(l),e=Ee()},m(l,t){r&&r.m(l,t),v(l,e,t)},p(l,t){l[32]["d3f:outbound"]?r?r.p(l,t):(r=Zl(l),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(l){l&&i(e),r&&r.d(l)}}}function ra(a){let e,r=Ne(a[7].i(a[5].description["@id"])["d3f:outbound"]),l=[];for(let t=0;t<r.length;t+=1)l[t]=aa(Ql(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&184){r=Ne(t[7].i(t[5].description["@id"])["d3f:outbound"]);let n;for(n=0;n<r.length;n+=1){const o=Ql(t,r,n);l[n]?l[n].p(o,s):(l[n]=aa(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&i(e),Qe(l,t)}}}function la(a){let e=a[5].description["@id"]+"",r,l,t=a[7].i(a[5].description["@id"])["rdfs:label"][0]+"",s,n,o="-->",f,h,d=he(a[26]["@id"])+"",_,m,c=a[29]["@id"]+"",u,E,g=a[7].graph[a[7].index[a[29]["@id"]]]["rdfs:label"][0]+"",P,O,D=a[5].description["@id"]+"",S,p,R=a[29]["@id"]+"",C,F,N=a[5].description["@id"]+"",T,b,I=a[3](a[5].description["@id"])+"",w,A,X=a[29]["@id"]+"",oe,le,G=a[4](a[29])+"",Q,V;return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),h=k(" | "),_=k(d),m=k(" | "),u=k(c),E=k('["'),P=k(g),O=k('"]; class '),S=k(D),p=k(" RootArtifactNode; class "),C=k(R),F=k(` ArtifactNode;
              click `),T=k(N),b=k(' href "'),w=k(I),A=k('"; click '),oe=k(X),le=k(' href "'),Q=k(G),V=k('";')},l(z){r=y(z,e),l=y(z,'["'),s=y(z,t),n=y(z,'"] '),f=y(z,o),h=y(z," | "),_=y(z,d),m=y(z," | "),u=y(z,c),E=y(z,'["'),P=y(z,g),O=y(z,'"]; class '),S=y(z,D),p=y(z," RootArtifactNode; class "),C=y(z,R),F=y(z,` ArtifactNode;
              click `),T=y(z,N),b=y(z,' href "'),w=y(z,I),A=y(z,'"; click '),oe=y(z,X),le=y(z,' href "'),Q=y(z,G),V=y(z,'";')},m(z,Z){v(z,r,Z),v(z,l,Z),v(z,s,Z),v(z,n,Z),v(z,f,Z),v(z,h,Z),v(z,_,Z),v(z,m,Z),v(z,u,Z),v(z,E,Z),v(z,P,Z),v(z,O,Z),v(z,S,Z),v(z,p,Z),v(z,C,Z),v(z,F,Z),v(z,T,Z),v(z,b,Z),v(z,w,Z),v(z,A,Z),v(z,oe,Z),v(z,le,Z),v(z,Q,Z),v(z,V,Z)},p(z,Z){Z[0]&32&&e!==(e=z[5].description["@id"]+"")&&Y(r,e),Z[0]&160&&t!==(t=z[7].i(z[5].description["@id"])["rdfs:label"][0]+"")&&Y(s,t),Z[0]&160&&d!==(d=he(z[26]["@id"])+"")&&Y(_,d),Z[0]&160&&c!==(c=z[29]["@id"]+"")&&Y(u,c),Z[0]&160&&g!==(g=z[7].graph[z[7].index[z[29]["@id"]]]["rdfs:label"][0]+"")&&Y(P,g),Z[0]&32&&D!==(D=z[5].description["@id"]+"")&&Y(S,D),Z[0]&160&&R!==(R=z[29]["@id"]+"")&&Y(C,R),Z[0]&32&&N!==(N=z[5].description["@id"]+"")&&Y(T,N),Z[0]&40&&I!==(I=z[3](z[5].description["@id"])+"")&&Y(w,I),Z[0]&160&&X!==(X=z[29]["@id"]+"")&&Y(oe,X),Z[0]&176&&G!==(G=z[4](z[29])+"")&&Y(Q,G)},d(z){z&&(i(r),i(l),i(s),i(n),i(f),i(h),i(_),i(m),i(u),i(E),i(P),i(O),i(S),i(p),i(C),i(F),i(T),i(b),i(w),i(A),i(oe),i(le),i(Q),i(V))}}}function aa(a){let e,r=Ne(a[7].i(a[5].description["@id"])[a[26]["@id"]]),l=[];for(let t=0;t<r.length;t+=1)l[t]=la(Gl(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&184){r=Ne(t[7].i(t[5].description["@id"])[t[26]["@id"]]);let n;for(n=0;n<r.length;n+=1){const o=Gl(t,r,n);l[n]?l[n].p(o,s):(l[n]=la(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&i(e),Qe(l,t)}}}function lu(a){let e,r,l=a[7].i(a[5].description["@id"])&&a[7].i(a[5].description["@id"])["d3f:outbound"],t,s=Ne(a[7].graph.filter(a[18])),n=[];for(let f=0;f<s.length;f+=1)n[f]=ta(Kl(a,s,f));let o=l&&ra(a);return{c(){e=k(`graph LR;
        `);for(let f=0;f<n.length;f+=1)n[f].c();r=ee(),o&&o.c(),t=Ee()},l(f){e=y(f,`graph LR;
        `);for(let h=0;h<n.length;h+=1)n[h].l(f);r=te(f),o&&o.l(f),t=Ee()},m(f,h){v(f,e,h);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(f,h);v(f,r,h),o&&o.m(f,h),v(f,t,h)},p(f,h){if(h[0]&430){s=Ne(f[7].graph.filter(f[18]));let d;for(d=0;d<s.length;d+=1){const _=Kl(f,s,d);n[d]?n[d].p(_,h):(n[d]=ta(_),n[d].c(),n[d].m(r.parentNode,r))}for(;d<n.length;d+=1)n[d].d(1);n.length=s.length}h[0]&160&&(l=f[7].i(f[5].description["@id"])&&f[7].i(f[5].description["@id"])["d3f:outbound"]),l?o?o.p(f,h):(o=ra(f),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},d(f){f&&(i(e),i(r),i(t)),Qe(n,f),o&&o.d(f)}}}function au(a){let e,r,l,t,s,n,o,f,h,d,_,m,c,u=a[8].length+"",E,g,P,O,D;const S=a[16].header,p=ot(S,a,a[22],Xl),R=a[16].default,C=ot(R,a,a[22],null),F=[ru,tu,eu],N=[];function T(b,I){return b[5]?b[7].graph.length>0?1:2:0}return o=T(a),f=N[o]=F[o](a),{c(){e=M("dialog"),r=M("div"),p&&p.c(),l=k(`
    Select Weaknesses
    `),C&&C.c(),t=ee(),s=M("hr"),n=ee(),f.c(),h=ee(),d=M("hr"),_=ee(),m=M("button"),c=k("Insert ("),E=k(u),g=k(")"),this.h()},l(b){e=B(b,"DIALOG",{class:!0});var I=pe(e);r=B(I,"DIV",{class:!0});var w=pe(r);p&&p.l(w),l=y(w,`
    Select Weaknesses
    `),C&&C.l(w),t=te(w),s=B(w,"HR",{}),n=te(w),f.l(w),h=te(w),d=B(w,"HR",{}),_=te(w),m=B(w,"BUTTON",{class:!0});var A=pe(m);c=y(A,"Insert ("),E=y(A,u),g=y(A,")"),A.forEach(i),w.forEach(i),I.forEach(i),this.h()},h(){m.autofocus=!0,W(m,"class","svelte-1resfch"),W(r,"class","svelte-1resfch"),W(e,"class","svelte-1resfch")},m(b,I){v(b,e,I),L(e,r),p&&p.m(r,null),L(r,l),C&&C.m(r,null),L(r,t),L(r,s),L(r,n),N[o].m(r,null),L(r,h),L(r,d),L(r,_),L(r,m),L(m,c),L(m,E),L(m,g),a[19](e),P=!0,m.focus(),O||(D=[be(m,"click",a[11]),be(r,"click",Rt(a[17])),be(e,"close",a[20]),be(e,"click",Vt(a[21]))],O=!0)},p(b,I){p&&p.p&&(!P||I[0]&4194304)&&it(p,S,b,b[22],P?ut(S,b[22],I,xf):ft(b[22]),Xl),C&&C.p&&(!P||I[0]&4194304)&&it(C,R,b,b[22],P?ut(R,b[22],I,null):ft(b[22]),null);let w=o;o=T(b),o===w?N[o].p(b,I):(gt(),me(N[w],1,1,()=>{N[w]=null}),bt(),f=N[o],f?f.p(b,I):(f=N[o]=F[o](b),f.c()),de(f,1),f.m(r,h)),(!P||I[0]&256)&&u!==(u=b[8].length+"")&&Y(E,u)},i(b){P||(de(p,b),de(C,b),de(f),P=!0)},o(b){me(p,b),me(C,b),me(f),P=!1},d(b){b&&i(e),p&&p.d(b),C&&C.d(b),N[o].d(),a[19](null),O=!1,mt(D)}}}function su(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{outbound_color:f="#fff4dd"}=e,{inbound_color:h="#fff4dd"}=e,{root_color:d="#fff4dd"}=e,{link_function:_=w=>`/dao/artifact/${w["@id"]}`}=e,{inbound_link_function:m=_}=e,{root_link_function:c=w=>`/dao/artifact/${w["@id"]}`}=e,{outbound_link_function:u=_}=e,{show_weakness_modal:E}=e,{parent_node:g}=e,{data:P}=e,O;const D=qt();Je(a,D,w=>r(24,s=w));const S=zt();Je(a,S,w=>r(23,t=w));let p;function R(w){l.includes(w)?r(8,l=l.filter(A=>A!==w)):l.push(w),r(8,l),r(8,l)}window.da_to_weak_callback=function(w){R(w)};function C(){let w=0,A=200,X=100;for(const oe of l){let le=P.da_to_weak["@graph"].find(G=>G["@id"]==oe);le&&(Bt(D,S,g,"vulnerabilitySelectorNode",le["rdfs:label"],le["d3f:cwe-id"],g.data.sequence,g.position.x+w*A,g.position.y+X,182,63,le["d3f:outbound"][0]["@id"].replace("d3f:",""),!1),w+=1)}D.set(s),S.set(t),O&&O.close(),r(8,l=[])}function F(w){Ot.call(this,a,w)}const N=w=>w["@id"]!=P.description["@id"];function T(w){He[w?"unshift":"push"](()=>{O=w,r(6,O)})}const b=()=>r(0,E=!1),I=()=>{O.close(),r(8,l=[])};return a.$$set=w=>{"outbound_color"in w&&r(12,f=w.outbound_color),"inbound_color"in w&&r(1,h=w.inbound_color),"root_color"in w&&r(2,d=w.root_color),"link_function"in w&&r(13,_=w.link_function),"inbound_link_function"in w&&r(14,m=w.inbound_link_function),"root_link_function"in w&&r(3,c=w.root_link_function),"outbound_link_function"in w&&r(4,u=w.outbound_link_function),"show_weakness_modal"in w&&r(0,E=w.show_weakness_modal),"parent_node"in w&&r(15,g=w.parent_node),"data"in w&&r(5,P=w.data),"$$scope"in w&&r(22,o=w.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&65&&E&&O&&O.showModal(),a.$$.dirty[0]&65&&!E&&O&&O.close(),a.$$.dirty[0]&32&&P&&r(7,p=new mr(P.da_to_weak,{index:!0}))},r(8,l=[]),[E,h,d,c,u,P,O,p,l,D,S,C,f,_,m,g,n,F,N,T,b,I,o]}class nu extends at{constructor(e){super(),st(this,e,su,au,tt,{outbound_color:12,inbound_color:1,root_color:2,link_function:13,inbound_link_function:14,root_link_function:3,outbound_link_function:4,show_weakness_modal:0,parent_node:15,data:5},null,[-1,-1])}}function sa(a,e,r){const l=a.slice();return l[31]=e[r],l}function na(a,e,r){const l=a.slice();return l[34]=e[r],l}function oa(a,e,r){const l=a.slice();return l[37]=e[r],l}const ou=a=>({}),ia=a=>({});function iu(a){let e;return{c(){e=k("No related parts/control in this release")},l(r){e=y(r,"No related parts/control in this release")},m(r,l){v(r,e,l)},p:ke,i:ke,o:ke,d(r){r&&i(e)}}}function fu(a){let e,r;return e=new Mt({props:{$$slots:{default:[cu]},$$scope:{ctx:a}}}),{c(){Re(e.$$.fragment)},l(l){Oe(e.$$.fragment,l)},m(l,t){Ie(e,l,t),r=!0},p(l,t){const s={};t[0]&134217934&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){me(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function uu(a){let e,r="Loading...";return{c(){e=M("div"),e.textContent=r},l(l){e=B(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:ke,i:ke,o:ke,d(l){l&&i(e)}}}function fa(a){let e,r=Ne(a[31]["d3f:outbound"].filter(a[23])),l=[];for(let t=0;t<r.length;t+=1)l[t]=ma(na(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&206){r=Ne(t[31]["d3f:outbound"].filter(t[23]));let n;for(n=0;n<r.length;n+=1){const o=na(t,r,n);l[n]?l[n].p(o,s):(l[n]=ma(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&i(e),Qe(l,t)}}}function ua(a){let e,r,l=a[31]["@id"]!=a[2].data.d3f_class&&ca(a),t=a[37]["@id"]!=a[2].data.d3f_class&&da(a);return{c(){l&&l.c(),e=ee(),t&&t.c(),r=Ee()},l(s){l&&l.l(s),e=te(s),t&&t.l(s),r=Ee()},m(s,n){l&&l.m(s,n),v(s,e,n),t&&t.m(s,n),v(s,r,n)},p(s,n){s[31]["@id"]!=s[2].data.d3f_class?l?l.p(s,n):(l=ca(s),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),s[37]["@id"]!=s[2].data.d3f_class?t?t.p(s,n):(t=da(s),t.c(),t.m(r.parentNode,r)):t&&(t.d(1),t=null)},d(s){s&&(i(e),i(r)),l&&l.d(s),t&&t.d(s)}}}function ca(a){let e,r=a[31]["@id"]+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" selected_outbound_node;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," selected_outbound_node;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n[0]&72&&r!==(r=s[31]["@id"]+"")&&Y(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function da(a){let e,r=a[37]["@id"]+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" selected_outbound_node;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," selected_outbound_node;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n[0]&74&&r!==(r=s[37]["@id"]+"")&&Y(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function ha(a){let e,r=a[31]["@id"]+"",l,t,s=a[31]["@id"]+"",n,o,f=he(a[34]["@id"])+"",h,d,_=a[37]["@id"]+"",m,c;return{c(){e=k("click "),l=k(r),t=k(` href "javascript:da_to_neighbors_callback('`),n=k(s),o=k("', '"),h=k(f),d=k("','"),m=k(_),c=k(`')";`)},l(u){e=y(u,"click "),l=y(u,r),t=y(u,` href "javascript:da_to_neighbors_callback('`),n=y(u,s),o=y(u,"', '"),h=y(u,f),d=y(u,"','"),m=y(u,_),c=y(u,`')";`)},m(u,E){v(u,e,E),v(u,l,E),v(u,t,E),v(u,n,E),v(u,o,E),v(u,h,E),v(u,d,E),v(u,m,E),v(u,c,E)},p(u,E){E[0]&72&&r!==(r=u[31]["@id"]+"")&&Y(l,r),E[0]&72&&s!==(s=u[31]["@id"]+"")&&Y(n,s),E[0]&74&&f!==(f=he(u[34]["@id"])+"")&&Y(h,f),E[0]&74&&_!==(_=u[37]["@id"]+"")&&Y(m,_)},d(u){u&&(i(e),i(l),i(t),i(n),i(o),i(h),i(d),i(m),i(c))}}}function _a(a){let e,r=a[37]["@id"]+"",l,t,s=a[31]["@id"]+"",n,o,f=he(a[34]["@id"])+"",h,d,_=a[37]["@id"]+"",m,c;return{c(){e=k("click "),l=k(r),t=k(` href "javascript:da_to_neighbors_callback('`),n=k(s),o=k("', '"),h=k(f),d=k("','"),m=k(_),c=k(`')";`)},l(u){e=y(u,"click "),l=y(u,r),t=y(u,` href "javascript:da_to_neighbors_callback('`),n=y(u,s),o=y(u,"', '"),h=y(u,f),d=y(u,"','"),m=y(u,_),c=y(u,`')";`)},m(u,E){v(u,e,E),v(u,l,E),v(u,t,E),v(u,n,E),v(u,o,E),v(u,h,E),v(u,d,E),v(u,m,E),v(u,c,E)},p(u,E){E[0]&74&&r!==(r=u[37]["@id"]+"")&&Y(l,r),E[0]&72&&s!==(s=u[31]["@id"]+"")&&Y(n,s),E[0]&74&&f!==(f=he(u[34]["@id"])+"")&&Y(h,f),E[0]&74&&_!==(_=u[37]["@id"]+"")&&Y(m,_)},d(u){u&&(i(e),i(l),i(t),i(n),i(o),i(h),i(d),i(m),i(c))}}}function va(a){let e=a[31]["@id"]+"",r,l,t=a[31]["rdfs:label"][0]+"",s,n,o="-->",f,h,d=he(a[34]["@id"])+"",_,m,c=a[37]["@id"]+"",u,E,g=a[6].i(a[37]["@id"])["rdfs:label"][0]+"",P,O,D=a[37]["@id"]+"",S,p,R=a[7].some(T),C,F,N;function T(...A){return a[21](a[31],a[34],a[37],...A)}let b=R&&ua(a),I=a[31]["@id"]!=a[2].data.d3f_class&&ha(a),w=a[37]["@id"]!=a[2].data.d3f_class&&_a(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),h=k(" | "),_=k(d),m=k(" | "),u=k(c),E=k('["'),P=k(g),O=k(`"];
                class `),S=k(D),p=k(` outbound;
                `),b&&b.c(),C=ee(),I&&I.c(),F=ee(),w&&w.c(),N=Ee()},l(A){r=y(A,e),l=y(A,'["'),s=y(A,t),n=y(A,'"] '),f=y(A,o),h=y(A," | "),_=y(A,d),m=y(A," | "),u=y(A,c),E=y(A,'["'),P=y(A,g),O=y(A,`"];
                class `),S=y(A,D),p=y(A,` outbound;
                `),b&&b.l(A),C=te(A),I&&I.l(A),F=te(A),w&&w.l(A),N=Ee()},m(A,X){v(A,r,X),v(A,l,X),v(A,s,X),v(A,n,X),v(A,f,X),v(A,h,X),v(A,_,X),v(A,m,X),v(A,u,X),v(A,E,X),v(A,P,X),v(A,O,X),v(A,S,X),v(A,p,X),b&&b.m(A,X),v(A,C,X),I&&I.m(A,X),v(A,F,X),w&&w.m(A,X),v(A,N,X)},p(A,X){a=A,X[0]&72&&e!==(e=a[31]["@id"]+"")&&Y(r,e),X[0]&72&&t!==(t=a[31]["rdfs:label"][0]+"")&&Y(s,t),X[0]&74&&d!==(d=he(a[34]["@id"])+"")&&Y(_,d),X[0]&74&&c!==(c=a[37]["@id"]+"")&&Y(u,c),X[0]&74&&g!==(g=a[6].i(a[37]["@id"])["rdfs:label"][0]+"")&&Y(P,g),X[0]&74&&D!==(D=a[37]["@id"]+"")&&Y(S,D),X[0]&202&&(R=a[7].some(T)),R?b?b.p(a,X):(b=ua(a),b.c(),b.m(C.parentNode,C)):b&&(b.d(1),b=null),a[31]["@id"]!=a[2].data.d3f_class?I?I.p(a,X):(I=ha(a),I.c(),I.m(F.parentNode,F)):I&&(I.d(1),I=null),a[37]["@id"]!=a[2].data.d3f_class?w?w.p(a,X):(w=_a(a),w.c(),w.m(N.parentNode,N)):w&&(w.d(1),w=null)},d(A){A&&(i(r),i(l),i(s),i(n),i(f),i(h),i(_),i(m),i(u),i(E),i(P),i(O),i(S),i(p),i(C),i(F),i(N)),b&&b.d(A),I&&I.d(A),w&&w.d(A)}}}function ma(a){let e,r=Ne(a[31][a[34]["@id"]]),l=[];for(let t=0;t<r.length;t+=1)l[t]=va(oa(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&206){r=Ne(t[31][t[34]["@id"]]);let n;for(n=0;n<r.length;n+=1){const o=oa(t,r,n);l[n]?l[n].p(o,s):(l[n]=va(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&i(e),Qe(l,t)}}}function pa(a){let e,r=a[31]["d3f:outbound"]&&fa(a);return{c(){r&&r.c(),e=Ee()},l(l){r&&r.l(l),e=Ee()},m(l,t){r&&r.m(l,t),v(l,e,t)},p(l,t){l[31]["d3f:outbound"]?r?r.p(l,t):(r=fa(l),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(l){l&&i(e),r&&r.d(l)}}}function cu(a){let e,r,l=Ne(a[6].graph.filter(a[22])),t=[];for(let s=0;s<l.length;s+=1)t[s]=pa(sa(a,l,s));return{c(){e=k(`graph LR;
        `);for(let s=0;s<t.length;s+=1)t[s].c();r=Ee()},l(s){e=y(s,`graph LR;
        `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=Ee()},m(s,n){v(s,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,n);v(s,r,n)},p(s,n){if(n[0]&206){l=Ne(s[6].graph.filter(s[22]));let o;for(o=0;o<l.length;o+=1){const f=sa(s,l,o);t[o]?t[o].p(f,n):(t[o]=pa(f),t[o].c(),t[o].m(r.parentNode,r))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(s){s&&(i(e),i(r)),Qe(t,s)}}}function du(a){let e,r,l,t,s,n,o,f,h,d,_,m,c,u=a[7].length+"",E,g,P,O,D;const S=a[19].header,p=ot(S,a,a[27],ia),R=a[19].default,C=ot(R,a,a[27],null),F=[uu,fu,iu],N=[];function T(b,I){return b[3]?b[5]&&b[6].graph.length>0?1:2:0}return o=T(a),f=N[o]=F[o](a),{c(){e=M("dialog"),r=M("div"),p&&p.c(),l=k(`
    Select Parts/Control Neighbors
    `),C&&C.c(),t=ee(),s=M("hr"),n=ee(),f.c(),h=ee(),d=M("hr"),_=ee(),m=M("button"),c=k("Insert ("),E=k(u),g=k(")"),this.h()},l(b){e=B(b,"DIALOG",{class:!0});var I=pe(e);r=B(I,"DIV",{class:!0});var w=pe(r);p&&p.l(w),l=y(w,`
    Select Parts/Control Neighbors
    `),C&&C.l(w),t=te(w),s=B(w,"HR",{}),n=te(w),f.l(w),h=te(w),d=B(w,"HR",{}),_=te(w),m=B(w,"BUTTON",{class:!0});var A=pe(m);c=y(A,"Insert ("),E=y(A,u),g=y(A,")"),A.forEach(i),w.forEach(i),I.forEach(i),this.h()},h(){m.autofocus=!0,W(m,"class","svelte-x2no78"),W(r,"class","svelte-x2no78"),W(e,"class","svelte-x2no78")},m(b,I){v(b,e,I),L(e,r),p&&p.m(r,null),L(r,l),C&&C.m(r,null),L(r,t),L(r,s),L(r,n),N[o].m(r,null),L(r,h),L(r,d),L(r,_),L(r,m),L(m,c),L(m,E),L(m,g),a[24](e),P=!0,m.focus(),O||(D=[be(m,"click",a[10]),be(r,"click",Rt(a[20])),be(e,"close",a[25]),be(e,"click",Vt(a[26]))],O=!0)},p(b,I){p&&p.p&&(!P||I[0]&134217728)&&it(p,S,b,b[27],P?ut(S,b[27],I,ou):ft(b[27]),ia),C&&C.p&&(!P||I[0]&134217728)&&it(C,R,b,b[27],P?ut(R,b[27],I,null):ft(b[27]),null);let w=o;o=T(b),o===w?N[o].p(b,I):(gt(),me(N[w],1,1,()=>{N[w]=null}),bt(),f=N[o],f?f.p(b,I):(f=N[o]=F[o](b),f.c()),de(f,1),f.m(r,h)),(!P||I[0]&128)&&u!==(u=b[7].length+"")&&Y(E,u)},i(b){P||(de(p,b),de(C,b),de(f),P=!0)},o(b){me(p,b),me(C,b),me(f),P=!1},d(b){b&&i(e),p&&p.d(b),C&&C.d(b),N[o].d(),a[24](null),O=!1,mt(D)}}}function hu(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{empty_message:f="has no direct neighbors in this release."}=e,{outbound_color:h="#fff4dd"}=e,{inbound_color:d="#fff4dd"}=e,{root_color:_="#fff4dd"}=e,{link_function:m=G=>`/dao/artifact/${G["@id"]}`}=e,{inbound_link_function:c=m}=e,{root_link_function:u=G=>`/dao/artifact/${G["@id"]}`}=e,{outbound_link_function:E=m}=e,{show_neighbors_modal:g}=e,{neighbor_filter_labels:P}=e,{parent_node:O}=e,{data:D}=e,S,p=!1;const R=qt();Je(a,R,G=>r(29,s=G));const C=zt();Je(a,C,G=>r(28,t=G));let F;function N(G){l.some(Q=>Q.source==G.source&&Q.relation==G.relation&&Q.target==G.target)?r(7,l=l.filter(Q=>Q.source!=G.source||Q.relation!=G.relation||Q.target!=G.target)):l.push(G),r(7,l),r(7,l)}window.da_to_neighbors_callback=function(G,Q,V){N({source:G,relation:Q,target:V})};function T(){let G=0,Q=0,V=200,z=125;for(const Z of l){let q=D.neighbors["@graph"].find(ye=>ye["@id"]==Z.source),J=D.neighbors["@graph"].find(ye=>ye["@id"]==Z.target);if(q&&J){let ye=O.data.d3f_class==q["@id"],Pe=ye?J:q;Bt(R,C,O,"artifactSelectorNode",Pe["rdfs:label"][0],Pe["@id"],O.data.sequence,O.position.x+(ye?G:Q)*V,ye?O.position.y+z:O.position.y-z,182,63,Z.relation,ye),ye?G+=1:Q+=1}}R.set(s),C.set(t),S&&(S.close(),r(5,p=!1)),r(7,l=[])}function b(G){Ot.call(this,a,G)}const I=(G,Q,V,z)=>z.source==G["@id"]&&z.relation==he(Q["@id"])&&z.target==V["@id"],w=G=>G["@id"]!=D.description["@id"],A=G=>P.length==0||P.includes(G["@id"]);function X(G){He[G?"unshift":"push"](()=>{S=G,r(4,S)})}const oe=()=>r(0,g=!1),le=()=>{S.close(),r(7,l=[])};return a.$$set=G=>{"empty_message"in G&&r(11,f=G.empty_message),"outbound_color"in G&&r(12,h=G.outbound_color),"inbound_color"in G&&r(13,d=G.inbound_color),"root_color"in G&&r(14,_=G.root_color),"link_function"in G&&r(15,m=G.link_function),"inbound_link_function"in G&&r(16,c=G.inbound_link_function),"root_link_function"in G&&r(17,u=G.root_link_function),"outbound_link_function"in G&&r(18,E=G.outbound_link_function),"show_neighbors_modal"in G&&r(0,g=G.show_neighbors_modal),"neighbor_filter_labels"in G&&r(1,P=G.neighbor_filter_labels),"parent_node"in G&&r(2,O=G.parent_node),"data"in G&&r(3,D=G.data),"$$scope"in G&&r(27,o=G.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&17&&g&&S&&S.showModal(),a.$$.dirty[0]&17&&!g&&S&&S.close(),a.$$.dirty[0]&14&&D&&(r(5,p=!1),D.neighbors["@graph"].find(G=>G["@id"]==O.data.d3f_class),P.length==0?(r(5,p=!0),r(6,F=new mr(D.neighbors,{index:!0}))):D.neighbors["@graph"].some(G=>G["d3f:outbound"]&&P.some(Q=>G["d3f:outbound"].some(V=>V["@id"]==Q)))&&(r(5,p=!0),r(6,F=new mr(D.neighbors,{index:!0}))))},r(7,l=[]),[g,P,O,D,S,p,F,l,R,C,T,f,h,d,_,m,c,u,E,n,b,I,w,A,X,oe,le,o]}class _u extends at{constructor(e){super(),st(this,e,hu,du,tt,{empty_message:11,outbound_color:12,inbound_color:13,root_color:14,link_function:15,inbound_link_function:16,root_link_function:17,outbound_link_function:18,show_neighbors_modal:0,neighbor_filter_labels:1,parent_node:2,data:3},null,[-1,-1])}}function ga(a,e,r){const l=a.slice();return l[26]=e[r],l}function ba(a,e,r){const l=a.slice();return l[29]=e[r],l}function Ea(a,e,r){const l=a.slice();return l[32]=e[r],l}function Pa(a,e,r){const l=a.slice();return l[26]=e[r],l}function wa(a,e,r){const l=a.slice();return l[29]=e[r],l}const vu=a=>({}),ka=a=>({});function mu(a){let e;return{c(){e=k("No related sensors in this release.")},l(r){e=y(r,"No related sensors in this release.")},m(r,l){v(r,e,l)},p:ke,i:ke,o:ke,d(r){r&&i(e)}}}function pu(a){let e,r;return e=new Mt({props:{$$slots:{default:[bu]},$$scope:{ctx:a}}}),{c(){Re(e.$$.fragment)},l(l){Oe(e.$$.fragment,l)},m(l,t){Ie(e,l,t),r=!0},p(l,t){const s={};t[0]&4194750&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){me(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function gu(a){let e,r="Loading...";return{c(){e=M("div"),e.textContent=r},l(l){e=B(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:ke,i:ke,o:ke,d(l){l&&i(e)}}}function ya(a){let e,r=Ne(a[32]["d3f:outbound"]),l=[];for(let t=0;t<r.length;t+=1)l[t]=Ca(Pa(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&430){r=Ne(t[32]["d3f:outbound"]);let n;for(n=0;n<r.length;n+=1){const o=Pa(t,r,n);l[n]?l[n].p(o,s):(l[n]=Ca(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&i(e),Qe(l,t)}}}function Sa(a){let e,r=a[32]["@id"]+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" selected_inbound_node;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," selected_inbound_node;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n[0]&160&&r!==(r=s[32]["@id"]+"")&&Y(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function Da(a){let e=a[32]["@id"]+"",r,l,t=a[32]["rdfs:label"][0]+"",s,n,o="-->",f,h,d=he(a[26]["@id"])+"",_,m,c=a[29]["@id"]+"",u,E,g=a[7].i(a[29]["@id"])["rdfs:label"][0]+"",P,O,D=a[32]["@id"]+"",S,p,R=a[32]["@id"]+"",C,F,N,T,b=a[8].includes(a[32]["@id"]),I,w=a[29]["@id"]+"",A,X,oe=a[29]["@id"]+"",le,G,Q,V,z=a[32]["@id"]+"",Z,q,J=a[32]["@id"]+"",ye,Pe,ae=a[29]["@id"]+"",ve,ce,ge=a[3](a[29])+"",Se,Ae,x=b&&Sa(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),h=k(" | "),_=k(d),m=k(" | "),u=k(c),E=k('["'),P=k(g),O=k(`"];
                  class `),S=k(D),p=k(" inbound_node; style "),C=k(R),F=k(" fill:"),N=k(a[1]),T=k(`;
                  `),x&&x.c(),I=k(`
                  class `),A=k(w),X=k(" RootArtifactNode; style "),le=k(oe),G=k(" fill:"),Q=k(a[2]),V=k(`;
                  click `),Z=k(z),q=k(` href "javascript:da_to_sensor_callback('`),ye=k(J),Pe=k(`')"; click `),ve=k(ae),ce=k(' href "'),Se=k(ge),Ae=k('";')},l(j){r=y(j,e),l=y(j,'["'),s=y(j,t),n=y(j,'"] '),f=y(j,o),h=y(j," | "),_=y(j,d),m=y(j," | "),u=y(j,c),E=y(j,'["'),P=y(j,g),O=y(j,`"];
                  class `),S=y(j,D),p=y(j," inbound_node; style "),C=y(j,R),F=y(j," fill:"),N=y(j,a[1]),T=y(j,`;
                  `),x&&x.l(j),I=y(j,`
                  class `),A=y(j,w),X=y(j," RootArtifactNode; style "),le=y(j,oe),G=y(j," fill:"),Q=y(j,a[2]),V=y(j,`;
                  click `),Z=y(j,z),q=y(j,` href "javascript:da_to_sensor_callback('`),ye=y(j,J),Pe=y(j,`')"; click `),ve=y(j,ae),ce=y(j,' href "'),Se=y(j,ge),Ae=y(j,'";')},m(j,ie){v(j,r,ie),v(j,l,ie),v(j,s,ie),v(j,n,ie),v(j,f,ie),v(j,h,ie),v(j,_,ie),v(j,m,ie),v(j,u,ie),v(j,E,ie),v(j,P,ie),v(j,O,ie),v(j,S,ie),v(j,p,ie),v(j,C,ie),v(j,F,ie),v(j,N,ie),v(j,T,ie),x&&x.m(j,ie),v(j,I,ie),v(j,A,ie),v(j,X,ie),v(j,le,ie),v(j,G,ie),v(j,Q,ie),v(j,V,ie),v(j,Z,ie),v(j,q,ie),v(j,ye,ie),v(j,Pe,ie),v(j,ve,ie),v(j,ce,ie),v(j,Se,ie),v(j,Ae,ie)},p(j,ie){ie[0]&160&&e!==(e=j[32]["@id"]+"")&&Y(r,e),ie[0]&160&&t!==(t=j[32]["rdfs:label"][0]+"")&&Y(s,t),ie[0]&160&&d!==(d=he(j[26]["@id"])+"")&&Y(_,d),ie[0]&160&&c!==(c=j[29]["@id"]+"")&&Y(u,c),ie[0]&160&&g!==(g=j[7].i(j[29]["@id"])["rdfs:label"][0]+"")&&Y(P,g),ie[0]&160&&D!==(D=j[32]["@id"]+"")&&Y(S,D),ie[0]&160&&R!==(R=j[32]["@id"]+"")&&Y(C,R),ie[0]&2&&Y(N,j[1]),ie[0]&416&&(b=j[8].includes(j[32]["@id"])),b?x?x.p(j,ie):(x=Sa(j),x.c(),x.m(I.parentNode,I)):x&&(x.d(1),x=null),ie[0]&160&&w!==(w=j[29]["@id"]+"")&&Y(A,w),ie[0]&160&&oe!==(oe=j[29]["@id"]+"")&&Y(le,oe),ie[0]&4&&Y(Q,j[2]),ie[0]&160&&z!==(z=j[32]["@id"]+"")&&Y(Z,z),ie[0]&160&&J!==(J=j[32]["@id"]+"")&&Y(ye,J),ie[0]&160&&ae!==(ae=j[29]["@id"]+"")&&Y(ve,ae),ie[0]&168&&ge!==(ge=j[3](j[29])+"")&&Y(Se,ge)},d(j){j&&(i(r),i(l),i(s),i(n),i(f),i(h),i(_),i(m),i(u),i(E),i(P),i(O),i(S),i(p),i(C),i(F),i(N),i(T),i(I),i(A),i(X),i(le),i(G),i(Q),i(V),i(Z),i(q),i(ye),i(Pe),i(ve),i(ce),i(Se),i(Ae)),x&&x.d(j)}}}function Ca(a){let e,r=Ne(a[32][a[26]["@id"]]),l=[];for(let t=0;t<r.length;t+=1)l[t]=Da(wa(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&430){r=Ne(t[32][t[26]["@id"]]);let n;for(n=0;n<r.length;n+=1){const o=wa(t,r,n);l[n]?l[n].p(o,s):(l[n]=Da(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&i(e),Qe(l,t)}}}function Na(a){let e,r=a[32]["d3f:outbound"]&&ya(a);return{c(){r&&r.c(),e=Ee()},l(l){r&&r.l(l),e=Ee()},m(l,t){r&&r.m(l,t),v(l,e,t)},p(l,t){l[32]["d3f:outbound"]?r?r.p(l,t):(r=ya(l),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(l){l&&i(e),r&&r.d(l)}}}function Ra(a){let e,r=Ne(a[7].i(a[5].description["@id"])["d3f:outbound"]),l=[];for(let t=0;t<r.length;t+=1)l[t]=Ia(ga(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&184){r=Ne(t[7].i(t[5].description["@id"])["d3f:outbound"]);let n;for(n=0;n<r.length;n+=1){const o=ga(t,r,n);l[n]?l[n].p(o,s):(l[n]=Ia(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&i(e),Qe(l,t)}}}function Oa(a){let e=a[5].description["@id"]+"",r,l,t=a[7].i(a[5].description["@id"])["rdfs:label"][0]+"",s,n,o="-->",f,h,d=he(a[26]["@id"])+"",_,m,c=a[29]["@id"]+"",u,E,g=a[7].graph[a[7].index[a[29]["@id"]]]["rdfs:label"][0]+"",P,O,D=a[5].description["@id"]+"",S,p,R=a[29]["@id"]+"",C,F,N=a[5].description["@id"]+"",T,b,I=a[3](a[5].description["@id"])+"",w,A,X=a[29]["@id"]+"",oe,le,G=a[4](a[29])+"",Q,V;return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),h=k(" | "),_=k(d),m=k(" | "),u=k(c),E=k('["'),P=k(g),O=k('"]; class '),S=k(D),p=k(" RootArtifactNode; class "),C=k(R),F=k(` ArtifactNode;
                click `),T=k(N),b=k(' href "'),w=k(I),A=k('"; click '),oe=k(X),le=k(' href "'),Q=k(G),V=k('";')},l(z){r=y(z,e),l=y(z,'["'),s=y(z,t),n=y(z,'"] '),f=y(z,o),h=y(z," | "),_=y(z,d),m=y(z," | "),u=y(z,c),E=y(z,'["'),P=y(z,g),O=y(z,'"]; class '),S=y(z,D),p=y(z," RootArtifactNode; class "),C=y(z,R),F=y(z,` ArtifactNode;
                click `),T=y(z,N),b=y(z,' href "'),w=y(z,I),A=y(z,'"; click '),oe=y(z,X),le=y(z,' href "'),Q=y(z,G),V=y(z,'";')},m(z,Z){v(z,r,Z),v(z,l,Z),v(z,s,Z),v(z,n,Z),v(z,f,Z),v(z,h,Z),v(z,_,Z),v(z,m,Z),v(z,u,Z),v(z,E,Z),v(z,P,Z),v(z,O,Z),v(z,S,Z),v(z,p,Z),v(z,C,Z),v(z,F,Z),v(z,T,Z),v(z,b,Z),v(z,w,Z),v(z,A,Z),v(z,oe,Z),v(z,le,Z),v(z,Q,Z),v(z,V,Z)},p(z,Z){Z[0]&32&&e!==(e=z[5].description["@id"]+"")&&Y(r,e),Z[0]&160&&t!==(t=z[7].i(z[5].description["@id"])["rdfs:label"][0]+"")&&Y(s,t),Z[0]&160&&d!==(d=he(z[26]["@id"])+"")&&Y(_,d),Z[0]&160&&c!==(c=z[29]["@id"]+"")&&Y(u,c),Z[0]&160&&g!==(g=z[7].graph[z[7].index[z[29]["@id"]]]["rdfs:label"][0]+"")&&Y(P,g),Z[0]&32&&D!==(D=z[5].description["@id"]+"")&&Y(S,D),Z[0]&160&&R!==(R=z[29]["@id"]+"")&&Y(C,R),Z[0]&32&&N!==(N=z[5].description["@id"]+"")&&Y(T,N),Z[0]&40&&I!==(I=z[3](z[5].description["@id"])+"")&&Y(w,I),Z[0]&160&&X!==(X=z[29]["@id"]+"")&&Y(oe,X),Z[0]&176&&G!==(G=z[4](z[29])+"")&&Y(Q,G)},d(z){z&&(i(r),i(l),i(s),i(n),i(f),i(h),i(_),i(m),i(u),i(E),i(P),i(O),i(S),i(p),i(C),i(F),i(T),i(b),i(w),i(A),i(oe),i(le),i(Q),i(V))}}}function Ia(a){let e,r=Ne(a[7].i(a[5].description["@id"])[a[26]["@id"]]),l=[];for(let t=0;t<r.length;t+=1)l[t]=Oa(ba(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=Ee()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=Ee()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);v(t,e,s)},p(t,s){if(s[0]&184){r=Ne(t[7].i(t[5].description["@id"])[t[26]["@id"]]);let n;for(n=0;n<r.length;n+=1){const o=ba(t,r,n);l[n]?l[n].p(o,s):(l[n]=Oa(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&i(e),Qe(l,t)}}}function bu(a){let e,r,l=a[7].i(a[5].description["@id"])&&a[7].i(a[5].description["@id"])["d3f:outbound"],t,s=Ne(a[7].graph.filter(a[18])),n=[];for(let f=0;f<s.length;f+=1)n[f]=Na(Ea(a,s,f));let o=l&&Ra(a);return{c(){e=k(`graph LR;
          `);for(let f=0;f<n.length;f+=1)n[f].c();r=ee(),o&&o.c(),t=Ee()},l(f){e=y(f,`graph LR;
          `);for(let h=0;h<n.length;h+=1)n[h].l(f);r=te(f),o&&o.l(f),t=Ee()},m(f,h){v(f,e,h);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(f,h);v(f,r,h),o&&o.m(f,h),v(f,t,h)},p(f,h){if(h[0]&430){s=Ne(f[7].graph.filter(f[18]));let d;for(d=0;d<s.length;d+=1){const _=Ea(f,s,d);n[d]?n[d].p(_,h):(n[d]=Na(_),n[d].c(),n[d].m(r.parentNode,r))}for(;d<n.length;d+=1)n[d].d(1);n.length=s.length}h[0]&160&&(l=f[7].i(f[5].description["@id"])&&f[7].i(f[5].description["@id"])["d3f:outbound"]),l?o?o.p(f,h):(o=Ra(f),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},d(f){f&&(i(e),i(r),i(t)),Qe(n,f),o&&o.d(f)}}}function Eu(a){let e,r,l,t,s,n,o,f,h,d,_,m,c,u=a[8].length+"",E,g,P,O,D;const S=a[16].header,p=ot(S,a,a[22],ka),R=a[16].default,C=ot(R,a,a[22],null),F=[gu,pu,mu],N=[];function T(b,I){return b[5]?b[7].graph.length>0?1:2:0}return o=T(a),f=N[o]=F[o](a),{c(){e=M("dialog"),r=M("div"),p&&p.c(),l=k(`
      Select Sensors
      `),C&&C.c(),t=ee(),s=M("hr"),n=ee(),f.c(),h=ee(),d=M("hr"),_=ee(),m=M("button"),c=k("Insert ("),E=k(u),g=k(")"),this.h()},l(b){e=B(b,"DIALOG",{class:!0});var I=pe(e);r=B(I,"DIV",{class:!0});var w=pe(r);p&&p.l(w),l=y(w,`
      Select Sensors
      `),C&&C.l(w),t=te(w),s=B(w,"HR",{}),n=te(w),f.l(w),h=te(w),d=B(w,"HR",{}),_=te(w),m=B(w,"BUTTON",{class:!0});var A=pe(m);c=y(A,"Insert ("),E=y(A,u),g=y(A,")"),A.forEach(i),w.forEach(i),I.forEach(i),this.h()},h(){m.autofocus=!0,W(m,"class","svelte-akhii9"),W(r,"class","svelte-akhii9"),W(e,"class","svelte-akhii9")},m(b,I){v(b,e,I),L(e,r),p&&p.m(r,null),L(r,l),C&&C.m(r,null),L(r,t),L(r,s),L(r,n),N[o].m(r,null),L(r,h),L(r,d),L(r,_),L(r,m),L(m,c),L(m,E),L(m,g),a[19](e),P=!0,m.focus(),O||(D=[be(m,"click",a[11]),be(r,"click",Rt(a[17])),be(e,"close",a[20]),be(e,"click",Vt(a[21]))],O=!0)},p(b,I){p&&p.p&&(!P||I[0]&4194304)&&it(p,S,b,b[22],P?ut(S,b[22],I,vu):ft(b[22]),ka),C&&C.p&&(!P||I[0]&4194304)&&it(C,R,b,b[22],P?ut(R,b[22],I,null):ft(b[22]),null);let w=o;o=T(b),o===w?N[o].p(b,I):(gt(),me(N[w],1,1,()=>{N[w]=null}),bt(),f=N[o],f?f.p(b,I):(f=N[o]=F[o](b),f.c()),de(f,1),f.m(r,h)),(!P||I[0]&256)&&u!==(u=b[8].length+"")&&Y(E,u)},i(b){P||(de(p,b),de(C,b),de(f),P=!0)},o(b){me(p,b),me(C,b),me(f),P=!1},d(b){b&&i(e),p&&p.d(b),C&&C.d(b),N[o].d(),a[19](null),O=!1,mt(D)}}}function Pu(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{outbound_color:f="#fff4dd"}=e,{inbound_color:h="#fff4dd"}=e,{root_color:d="#fff4dd"}=e,{link_function:_=w=>`/dao/artifact/${w["@id"]}`}=e,{inbound_link_function:m=_}=e,{root_link_function:c=w=>`/dao/artifact/${w["@id"]}`}=e,{outbound_link_function:u=_}=e,{show_sensor_modal:E}=e,{parent_node:g}=e,{data:P}=e,O;const D=qt();Je(a,D,w=>r(24,s=w));const S=zt();Je(a,S,w=>r(23,t=w));let p;function R(w){l.includes(w)?r(8,l=l.filter(A=>A!==w)):l.push(w),r(8,l),r(8,l)}window.da_to_sensor_callback=function(w){R(w)};function C(){let w=0,A=200,X=100;for(const oe of l){let le=P.sensors["@graph"].find(G=>G["@id"]==oe);le&&(Bt(D,S,g,"artifactSelectorNode",le["rdfs:label"],le["@id"],g.data.sequence,g.position.x+w*A,g.position.y+X,182,63,le["d3f:outbound"][0]["@id"].replace("d3f:",""),!1),w+=1)}D.set(s),S.set(t),O&&O.close(),r(8,l=[])}function F(w){Ot.call(this,a,w)}const N=w=>w["@id"]!=P.description["@id"];function T(w){He[w?"unshift":"push"](()=>{O=w,r(6,O)})}const b=()=>r(0,E=!1),I=()=>{O.close(),r(8,l=[])};return a.$$set=w=>{"outbound_color"in w&&r(12,f=w.outbound_color),"inbound_color"in w&&r(1,h=w.inbound_color),"root_color"in w&&r(2,d=w.root_color),"link_function"in w&&r(13,_=w.link_function),"inbound_link_function"in w&&r(14,m=w.inbound_link_function),"root_link_function"in w&&r(3,c=w.root_link_function),"outbound_link_function"in w&&r(4,u=w.outbound_link_function),"show_sensor_modal"in w&&r(0,E=w.show_sensor_modal),"parent_node"in w&&r(15,g=w.parent_node),"data"in w&&r(5,P=w.data),"$$scope"in w&&r(22,o=w.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&65&&E&&O&&O.showModal(),a.$$.dirty[0]&65&&!E&&O&&O.close(),a.$$.dirty[0]&32&&P&&P.sensors&&r(7,p=new mr(P.sensors,{index:!0}))},r(8,l=[]),[E,h,d,c,u,P,O,p,l,D,S,C,f,_,m,g,n,F,N,T,b,I,o]}class wu extends at{constructor(e){super(),st(this,e,Pu,Eu,tt,{outbound_color:12,inbound_color:1,root_color:2,link_function:13,inbound_link_function:14,root_link_function:3,outbound_link_function:4,show_sensor_modal:0,parent_node:15,data:5},null,[-1,-1])}}function ku(a){let e,r="attack the node",l,t,s,n,o,f="defend the node",h,d,_,m,c,u="add weaknesses",E,g,P,O,D,S="add sensors",p,R,C,F,N,T="explode all",b,I,w="explode parts",A,X,oe="explode control",le,G,Q,V,z,Z;function q(x){a[11](x)}let J={parent_node:a[0],data:a[1]};a[7]!==void 0&&(J.show_attack_modal=a[7]),t=new Bf({props:J}),He.push(()=>Pt(t,"show_attack_modal",q));function ye(x){a[13](x)}let Pe={parent_node:a[0],data:a[1]};a[6]!==void 0&&(Pe.show_defend_modal=a[6]),d=new Wf({props:Pe}),He.push(()=>Pt(d,"show_defend_modal",ye));function ae(x){a[15](x)}let ve={parent_node:a[0],inbound_color:"#f9d999",inbound_link_function:a[9],data:a[1]};a[5]!==void 0&&(ve.show_weakness_modal=a[5]),g=new nu({props:ve}),He.push(()=>Pt(g,"show_weakness_modal",ae));function ce(x){a[17](x)}let ge={parent_node:a[0],inbound_color:"#f9d999",data:a[1]};a[3]!==void 0&&(ge.show_sensor_modal=a[3]),R=new wu({props:ge}),He.push(()=>Pt(R,"show_sensor_modal",ce));function Se(x){a[21](x)}let Ae={neighbor_filter_labels:a[2],parent_node:a[0],empty_message:"has no related parts in this release.",inbound_color:"#f9d999",inbound_link_function:a[9],data:a[1]};return a[4]!==void 0&&(Ae.show_neighbors_modal=a[4]),G=new _u({props:Ae}),He.push(()=>Pt(G,"show_neighbors_modal",Se)),{c(){e=M("button"),e.textContent=r,l=ee(),Re(t.$$.fragment),n=ee(),o=M("button"),o.textContent=f,h=ee(),Re(d.$$.fragment),m=ee(),c=M("button"),c.textContent=u,E=ee(),Re(g.$$.fragment),O=ee(),D=M("button"),D.textContent=S,p=ee(),Re(R.$$.fragment),F=ee(),N=M("button"),N.textContent=T,b=ee(),I=M("button"),I.textContent=w,A=ee(),X=M("button"),X.textContent=oe,le=ee(),Re(G.$$.fragment),this.h()},l(x){e=B(x,"BUTTON",{class:!0,"data-svelte-h":!0}),we(e)!=="svelte-1dkmztx"&&(e.textContent=r),l=te(x),Oe(t.$$.fragment,x),n=te(x),o=B(x,"BUTTON",{class:!0,"data-svelte-h":!0}),we(o)!=="svelte-22hxkb"&&(o.textContent=f),h=te(x),Oe(d.$$.fragment,x),m=te(x),c=B(x,"BUTTON",{class:!0,"data-svelte-h":!0}),we(c)!=="svelte-urtcr7"&&(c.textContent=u),E=te(x),Oe(g.$$.fragment,x),O=te(x),D=B(x,"BUTTON",{class:!0,"data-svelte-h":!0}),we(D)!=="svelte-1xhii68"&&(D.textContent=S),p=te(x),Oe(R.$$.fragment,x),F=te(x),N=B(x,"BUTTON",{class:!0,"data-svelte-h":!0}),we(N)!=="svelte-1vn2qvf"&&(N.textContent=T),b=te(x),I=B(x,"BUTTON",{class:!0,"data-svelte-h":!0}),we(I)!=="svelte-1hluius"&&(I.textContent=w),A=te(x),X=B(x,"BUTTON",{class:!0,"data-svelte-h":!0}),we(X)!=="svelte-183zqvn"&&(X.textContent=oe),le=te(x),Oe(G.$$.fragment,x),this.h()},h(){W(e,"class","svelte-5he3i1"),W(o,"class","svelte-5he3i1"),W(c,"class","svelte-5he3i1"),W(D,"class","svelte-5he3i1"),W(N,"class","svelte-5he3i1"),W(I,"class","svelte-5he3i1"),W(X,"class","svelte-5he3i1")},m(x,j){v(x,e,j),v(x,l,j),Ie(t,x,j),v(x,n,j),v(x,o,j),v(x,h,j),Ie(d,x,j),v(x,m,j),v(x,c,j),v(x,E,j),Ie(g,x,j),v(x,O,j),v(x,D,j),v(x,p,j),Ie(R,x,j),v(x,F,j),v(x,N,j),v(x,b,j),v(x,I,j),v(x,A,j),v(x,X,j),v(x,le,j),Ie(G,x,j),V=!0,z||(Z=[be(e,"click",a[10]),be(o,"click",a[12]),be(c,"click",a[14]),be(D,"click",a[16]),be(N,"click",a[18]),be(I,"click",a[19]),be(X,"click",a[20])],z=!0)},p(x,[j]){const ie={};j&1&&(ie.parent_node=x[0]),j&2&&(ie.data=x[1]),!s&&j&128&&(s=!0,ie.show_attack_modal=x[7],Et(()=>s=!1)),t.$set(ie);const qe={};j&1&&(qe.parent_node=x[0]),j&2&&(qe.data=x[1]),!_&&j&64&&(_=!0,qe.show_defend_modal=x[6],Et(()=>_=!1)),d.$set(qe);const Ue={};j&1&&(Ue.parent_node=x[0]),j&2&&(Ue.data=x[1]),!P&&j&32&&(P=!0,Ue.show_weakness_modal=x[5],Et(()=>P=!1)),g.$set(Ue);const rt={};j&1&&(rt.parent_node=x[0]),j&2&&(rt.data=x[1]),!C&&j&8&&(C=!0,rt.show_sensor_modal=x[3],Et(()=>C=!1)),R.$set(rt);const Me={};j&4&&(Me.neighbor_filter_labels=x[2]),j&1&&(Me.parent_node=x[0]),j&2&&(Me.data=x[1]),!Q&&j&16&&(Q=!0,Me.show_neighbors_modal=x[4],Et(()=>Q=!1)),G.$set(Me)},i(x){V||(de(t.$$.fragment,x),de(d.$$.fragment,x),de(g.$$.fragment,x),de(R.$$.fragment,x),de(G.$$.fragment,x),V=!0)},o(x){me(t.$$.fragment,x),me(d.$$.fragment,x),me(g.$$.fragment,x),me(R.$$.fragment,x),me(G.$$.fragment,x),V=!1},d(x){x&&(i(e),i(l),i(n),i(o),i(h),i(m),i(c),i(E),i(O),i(D),i(p),i(F),i(N),i(b),i(I),i(A),i(X),i(le)),Te(t,x),Te(d,x),Te(g,x),Te(R,x),Te(G,x),z=!1,mt(Z)}}}function yu(a,e,r){let l,t,s,n,o;var f=this&&this.__awaiter||function(b,I,w,A){function X(oe){return oe instanceof w?oe:new w(function(le){le(oe)})}return new(w||(w=Promise))(function(oe,le){function G(z){try{V(A.next(z))}catch(Z){le(Z)}}function Q(z){try{V(A.throw(z))}catch(Z){le(Z)}}function V(z){z.done?oe(z.value):X(z.value).then(G,Q)}V((A=A.apply(b,I||[])).next())})};let{node:h}=e,d,_=[];function m(b){alert(b),r(7,l=!1),r(6,t=!1),r(5,s=!1),r(4,n=!1),r(3,o=!1)}function c(b){return f(this,void 0,void 0,function*(){if(b.data.d3f_class&&b.data.d3f_class.includes("d3f:")){const I=b.data.d3f_class,w=yield fetch(`/api/dao/artifact/${I}.json`),A=yield w.json();if(w.status!=200||A.description["@graph"].length==0)m(`D3FEND Artifact: "${I.replace("d3f:","")}" not found in ontology`);else return A}else m("Please specify a D3FEND Class for this node to enable inferential mapping")})}function u(b){return qn(b["d3f:cwe-id"][0])}const E=async()=>{r(1,d=null),r(7,l=!0),r(1,d=await c(h))};function g(b){l=b,r(7,l)}const P=async()=>{r(1,d=null),r(6,t=!0),r(1,d=await c(h))};function O(b){t=b,r(6,t)}const D=async()=>{r(1,d=null),r(5,s=!0),r(1,d=await c(h))};function S(b){s=b,r(5,s)}const p=async()=>{r(1,d=null),r(3,o=!0),r(1,d=await c(h))};function R(b){o=b,r(3,o)}const C=async()=>{r(1,d=null),r(4,n=!0),r(2,_=[]),r(1,d=await c(h))},F=async()=>{r(1,d=null),r(4,n=!0),r(2,_=["d3f:contains","d3f:may-contains"]),r(1,d=await c(h))},N=async()=>{r(1,d=null),r(4,n=!0),r(2,_=["d3f:runs","d3f:loads","d3f:manages"]),r(1,d=await c(h))};function T(b){n=b,r(4,n)}return a.$$set=b=>{"node"in b&&r(0,h=b.node)},r(7,l=!1),r(6,t=!1),r(5,s=!1),r(4,n=!1),r(3,o=!1),[h,d,_,o,n,s,t,l,c,u,E,g,P,O,D,S,p,R,C,F,N,T]}class Su extends at{constructor(e){super(),st(this,e,yu,ku,tt,{node:0})}}function Ta(a,e,r){const l=a.slice();return l[18]=e[r],l[20]=r,l}const Du=a=>({}),Aa=a=>({});function Cu(a){let e;return{c(){e=k("No related defensive techniques in this release.")},l(r){e=y(r,"No related defensive techniques in this release.")},m(r,l){v(r,e,l)},p:ke,i:ke,o:ke,d(r){r&&i(e)}}}function Nu(a){let e,r;return e=new Mt({props:{$$slots:{default:[Tu]},$$scope:{ctx:a}}}),{c(){Re(e.$$.fragment)},l(l){Oe(e.$$.fragment,l)},m(l,t){Ie(e,l,t),r=!0},p(l,t){const s={};t&16406&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){me(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function Ru(a){let e,r="Loading...";return{c(){e=M("div"),e.textContent=r},l(l){e=B(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:ke,i:ke,o:ke,d(l){l&&i(e)}}}function Ou(a){let e,r=he(a[18].def_artifact.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" ArtifactNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," ArtifactNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&4&&r!==(r=he(s[18].def_artifact.value)+"")&&Y(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function Iu(a){let e,r=he(a[18].def_artifact.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" SelectedArtifactNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," SelectedArtifactNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&4&&r!==(r=he(s[18].def_artifact.value)+"")&&Y(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function Fa(a){let e=a[1].data.d3f_class+"",r,l,t=a[2].description["@graph"][0]["rdfs:label"]+"",s,n,o="-->",f,h,d=a[18].def_artifact_rel_label.value+"",_,m,c=he(a[18].def_artifact.value)+"",u,E,g=a[18].def_artifact_label.value+"",P,O,D=a[1].data.d3f_class+"",S,p,R,C,F=he(a[18].def_artifact.value)+"",N,T,b=he(a[18].def_artifact.value)+"",I,w,A=`
`,X;function oe(Q,V){return V&20&&(R=null),R==null&&(R=!!Q[4].includes(he(Q[18].def_artifact.value))),R?Iu:Ou}let le=oe(a,-1),G=le(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),h=k(' |"'),_=k(d),m=k('" | '),u=k(c),E=k('["'),P=k(g),O=k(`"];
          class `),S=k(D),p=k(` DefensiveTechniqueNode;
          `),G.c(),C=k(`
          click `),N=k(F),T=k(` href "javascript:def_to_art_callback('`),I=k(b),w=k(`')";`),X=k(A)},l(Q){r=y(Q,e),l=y(Q,'["'),s=y(Q,t),n=y(Q,'"] '),f=y(Q,o),h=y(Q,' |"'),_=y(Q,d),m=y(Q,'" | '),u=y(Q,c),E=y(Q,'["'),P=y(Q,g),O=y(Q,`"];
          class `),S=y(Q,D),p=y(Q,` DefensiveTechniqueNode;
          `),G.l(Q),C=y(Q,`
          click `),N=y(Q,F),T=y(Q,` href "javascript:def_to_art_callback('`),I=y(Q,b),w=y(Q,`')";`),X=y(Q,A)},m(Q,V){v(Q,r,V),v(Q,l,V),v(Q,s,V),v(Q,n,V),v(Q,f,V),v(Q,h,V),v(Q,_,V),v(Q,m,V),v(Q,u,V),v(Q,E,V),v(Q,P,V),v(Q,O,V),v(Q,S,V),v(Q,p,V),G.m(Q,V),v(Q,C,V),v(Q,N,V),v(Q,T,V),v(Q,I,V),v(Q,w,V),v(Q,X,V)},p(Q,V){V&2&&e!==(e=Q[1].data.d3f_class+"")&&Y(r,e),V&4&&t!==(t=Q[2].description["@graph"][0]["rdfs:label"]+"")&&Y(s,t),V&4&&d!==(d=Q[18].def_artifact_rel_label.value+"")&&Y(_,d),V&4&&c!==(c=he(Q[18].def_artifact.value)+"")&&Y(u,c),V&4&&g!==(g=Q[18].def_artifact_label.value+"")&&Y(P,g),V&2&&D!==(D=Q[1].data.d3f_class+"")&&Y(S,D),le===(le=oe(Q,V))&&G?G.p(Q,V):(G.d(1),G=le(Q),G&&(G.c(),G.m(C.parentNode,C))),V&4&&F!==(F=he(Q[18].def_artifact.value)+"")&&Y(N,F),V&4&&b!==(b=he(Q[18].def_artifact.value)+"")&&Y(I,b)},d(Q){Q&&(i(r),i(l),i(s),i(n),i(f),i(h),i(_),i(m),i(u),i(E),i(P),i(O),i(S),i(p),i(C),i(N),i(T),i(I),i(w),i(X)),G.d(Q)}}}function Tu(a){let e,r,l=Ne(a[2].digital_artifacts.results.bindings),t=[];for(let s=0;s<l.length;s+=1)t[s]=Fa(Ta(a,l,s));return{c(){e=k(`graph LR
        `);for(let s=0;s<t.length;s+=1)t[s].c();r=Ee()},l(s){e=y(s,`graph LR
        `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=Ee()},m(s,n){v(s,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,n);v(s,r,n)},p(s,n){if(n&22){l=Ne(s[2].digital_artifacts.results.bindings);let o;for(o=0;o<l.length;o+=1){const f=Ta(s,l,o);t[o]?t[o].p(f,n):(t[o]=Fa(f),t[o].c(),t[o].m(r.parentNode,r))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(s){s&&(i(e),i(r)),Qe(t,s)}}}function Au(a){let e,r,l,t,s,n,o,f,h,d,_,m,c,u=a[4].length+"",E,g,P,O,D;const S=a[9].header,p=ot(S,a,a[14],Aa),R=a[9].default,C=ot(R,a,a[14],null),F=[Ru,Nu,Cu],N=[];function T(b,I){return b[2]?b[2].digital_artifacts.results.bindings.length>0?1:2:0}return o=T(a),f=N[o]=F[o](a),{c(){e=M("dialog"),r=M("div"),p&&p.c(),l=k(`
    Select Related Artifacts To Insert
    `),C&&C.c(),t=ee(),s=M("hr"),n=ee(),f.c(),h=ee(),d=M("hr"),_=ee(),m=M("button"),c=k("Insert ("),E=k(u),g=k(")"),this.h()},l(b){e=B(b,"DIALOG",{class:!0});var I=pe(e);r=B(I,"DIV",{class:!0});var w=pe(r);p&&p.l(w),l=y(w,`
    Select Related Artifacts To Insert
    `),C&&C.l(w),t=te(w),s=B(w,"HR",{}),n=te(w),f.l(w),h=te(w),d=B(w,"HR",{}),_=te(w),m=B(w,"BUTTON",{class:!0});var A=pe(m);c=y(A,"Insert ("),E=y(A,u),g=y(A,")"),A.forEach(i),w.forEach(i),I.forEach(i),this.h()},h(){m.autofocus=!0,W(m,"class","svelte-x0618k"),W(r,"class","svelte-x0618k"),W(e,"class","svelte-x0618k")},m(b,I){v(b,e,I),L(e,r),p&&p.m(r,null),L(r,l),C&&C.m(r,null),L(r,t),L(r,s),L(r,n),N[o].m(r,null),L(r,h),L(r,d),L(r,_),L(r,m),L(m,c),L(m,E),L(m,g),a[11](e),P=!0,m.focus(),O||(D=[be(m,"click",a[7]),be(r,"click",Rt(a[10])),be(e,"close",a[12]),be(e,"click",Vt(a[13]))],O=!0)},p(b,[I]){p&&p.p&&(!P||I&16384)&&it(p,S,b,b[14],P?ut(S,b[14],I,Du):ft(b[14]),Aa),C&&C.p&&(!P||I&16384)&&it(C,R,b,b[14],P?ut(R,b[14],I,null):ft(b[14]),null);let w=o;o=T(b),o===w?N[o].p(b,I):(gt(),me(N[w],1,1,()=>{N[w]=null}),bt(),f=N[o],f?f.p(b,I):(f=N[o]=F[o](b),f.c()),de(f,1),f.m(r,h)),(!P||I&16)&&u!==(u=b[4].length+"")&&Y(E,u)},i(b){P||(de(p,b),de(C,b),de(f),P=!0)},o(b){me(p,b),me(C,b),me(f),P=!1},d(b){b&&i(e),p&&p.d(b),C&&C.d(b),N[o].d(),a[11](null),O=!1,mt(D)}}}function Fu(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{show_artifacts_modal:f}=e,{parent_node:h}=e,{data:d}=e,_;const m=qt();Je(a,m,p=>r(16,s=p));const c=zt();Je(a,c,p=>r(15,t=p));let u=new Kt;function E(p){l.includes(p)?r(4,l=l.filter(R=>R!==p)):l.push(p),r(4,l)}window.def_to_art_callback=function(p){E(p)};function g(){let p=0,R=200,C=100;for(const F of l){let N=d.digital_artifacts.results.bindings.find(T=>he(T.def_artifact.value)==F);N&&(Bt(m,c,h,"artifactSelectorNode",N.def_artifact_label.value,"d3f:"+he(N.def_artifact.value),h.data.sequence,h.position.x+p*R,h.position.y+C,182,82,N.def_artifact_rel_label.value,!0),p+=1)}m.set(s),c.set(t),_&&_.close(),r(4,l=[])}function P(p){Ot.call(this,a,p)}function O(p){He[p?"unshift":"push"](()=>{_=p,r(3,_)})}const D=()=>r(0,f=!1),S=()=>{_.close(),r(4,l=[])};return a.$$set=p=>{"show_artifacts_modal"in p&&r(0,f=p.show_artifacts_modal),"parent_node"in p&&r(1,h=p.parent_node),"data"in p&&r(2,d=p.data),"$$scope"in p&&r(14,o=p.$$scope)},a.$$.update=()=>{a.$$.dirty&9&&f&&_&&(_.showModal(),r(8,u=new Kt)),a.$$.dirty&265&&!f&&_&&(_.close(),u.reset())},r(4,l=[]),[f,h,d,_,l,m,c,g,u,n,P,O,D,S,o]}class Lu extends at{constructor(e){super(),st(this,e,Fu,Au,tt,{show_artifacts_modal:0,parent_node:1,data:2})}}function La(a,e,r){const l=a.slice();return l[18]=e[r],l}const ju=a=>({}),ja=a=>({});function qu(a){let e;return{c(){e=k("No related offensive techniques in this release.")},l(r){e=y(r,"No related offensive techniques in this release.")},m(r,l){v(r,e,l)},p:ke,i:ke,o:ke,d(r){r&&i(e)}}}function zu(a){let e,r;return e=new Mt({props:{$$slots:{default:[Bu]},$$scope:{ctx:a}}}),{c(){Re(e.$$.fragment)},l(l){Oe(e.$$.fragment,l)},m(l,t){Ie(e,l,t),r=!0},p(l,t){const s={};t&16394&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){me(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function Uu(a){let e,r="Loading...";return{c(){e=M("div"),e.textContent=r},l(l){e=B(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:ke,i:ke,o:ke,d(l){l&&i(e)}}}function qa(a){let e=he(a[18].def_tech.value).replace(/ |\./g,"")+"",r,l,t=a[18].def_tech_label.value+"",s,n,o="-->",f,h,d="May "+a[18].def_tactic_label.value.replace(/ /g,""),_,m,c=a[18].off_tech_id.value.replace(/ |\./g,"")+"",u,E,g=a[18].off_tech_label.value+"",P,O,D,S,p=he(a[18].def_tech.value)+"",R,C,F=a[18].off_tech_id.value.replace(/ |\./g,"")+"",N,T,b=a[18].off_tech_id.value.replace(/ |\./g,"")+"",I,w,A=he(a[18].def_tech.value)+"",X,oe,le=he(a[18].def_tech.value)+"",G,Q;function V(q,J){return J&10&&(D=null),D==null&&(D=!!q[3].includes(q[18].off_tech_id.value.replace(/ |\./g,""))),D?Mu:Vu}let z=V(a,-1),Z=z(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),h=k(" | "),_=k(d),m=k("| "),u=k(c),E=k('["'),P=k(g),O=k(`"];
            `),Z.c(),S=k(`
            class `),R=k(p),C=k(" CountermeasureNode; click "),N=k(F),T=k(` href "javascript:def_to_off_callback('`),I=k(b),w=k(`')"; click `),X=k(A),oe=k(' href "/technique/d3f:'),G=k(le),Q=k('";')},l(q){r=y(q,e),l=y(q,'["'),s=y(q,t),n=y(q,'"] '),f=y(q,o),h=y(q," | "),_=y(q,d),m=y(q,"| "),u=y(q,c),E=y(q,'["'),P=y(q,g),O=y(q,`"];
            `),Z.l(q),S=y(q,`
            class `),R=y(q,p),C=y(q," CountermeasureNode; click "),N=y(q,F),T=y(q,` href "javascript:def_to_off_callback('`),I=y(q,b),w=y(q,`')"; click `),X=y(q,A),oe=y(q,' href "/technique/d3f:'),G=y(q,le),Q=y(q,'";')},m(q,J){v(q,r,J),v(q,l,J),v(q,s,J),v(q,n,J),v(q,f,J),v(q,h,J),v(q,_,J),v(q,m,J),v(q,u,J),v(q,E,J),v(q,P,J),v(q,O,J),Z.m(q,J),v(q,S,J),v(q,R,J),v(q,C,J),v(q,N,J),v(q,T,J),v(q,I,J),v(q,w,J),v(q,X,J),v(q,oe,J),v(q,G,J),v(q,Q,J)},p(q,J){J&2&&e!==(e=he(q[18].def_tech.value).replace(/ |\./g,"")+"")&&Y(r,e),J&2&&t!==(t=q[18].def_tech_label.value+"")&&Y(s,t),J&2&&d!==(d="May "+q[18].def_tactic_label.value.replace(/ /g,""))&&Y(_,d),J&2&&c!==(c=q[18].off_tech_id.value.replace(/ |\./g,"")+"")&&Y(u,c),J&2&&g!==(g=q[18].off_tech_label.value+"")&&Y(P,g),z===(z=V(q,J))&&Z?Z.p(q,J):(Z.d(1),Z=z(q),Z&&(Z.c(),Z.m(S.parentNode,S))),J&2&&p!==(p=he(q[18].def_tech.value)+"")&&Y(R,p),J&2&&F!==(F=q[18].off_tech_id.value.replace(/ |\./g,"")+"")&&Y(N,F),J&2&&b!==(b=q[18].off_tech_id.value.replace(/ |\./g,"")+"")&&Y(I,b),J&2&&A!==(A=he(q[18].def_tech.value)+"")&&Y(X,A),J&2&&le!==(le=he(q[18].def_tech.value)+"")&&Y(G,le)},d(q){q&&(i(r),i(l),i(s),i(n),i(f),i(h),i(_),i(m),i(u),i(E),i(P),i(O),i(S),i(R),i(C),i(N),i(T),i(I),i(w),i(X),i(oe),i(G),i(Q)),Z.d(q)}}}function Vu(a){let e,r=a[18].off_tech_id.value.replace(/ |\./g,"")+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" OffensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," OffensiveTechniqueNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&Y(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function Mu(a){let e,r=a[18].off_tech_id.value.replace(/ |\./g,"")+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" SelectedOffensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," SelectedOffensiveTechniqueNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&Y(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function za(a){let e=a[6].edge_is_unique(a[18].def_tech_label.value,a[18].off_artifact_rel_label.value,a[18].off_artifact_label.value),r,l=e&&qa(a);return{c(){l&&l.c(),r=Ee()},l(t){l&&l.l(t),r=Ee()},m(t,s){l&&l.m(t,s),v(t,r,s)},p(t,s){s&2&&(e=t[6].edge_is_unique(t[18].def_tech_label.value,t[18].off_artifact_rel_label.value,t[18].off_artifact_label.value)),e?l?l.p(t,s):(l=qa(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&i(r),l&&l.d(t)}}}function Bu(a){let e,r,l=Ne(a[1].def_to_off.results.bindings),t=[];for(let s=0;s<l.length;s+=1)t[s]=za(La(a,l,s));return{c(){e=k(`graph LR;
        `);for(let s=0;s<t.length;s+=1)t[s].c();r=Ee()},l(s){e=y(s,`graph LR;
        `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=Ee()},m(s,n){v(s,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,n);v(s,r,n)},p(s,n){if(n&74){l=Ne(s[1].def_to_off.results.bindings);let o;for(o=0;o<l.length;o+=1){const f=La(s,l,o);t[o]?t[o].p(f,n):(t[o]=za(f),t[o].c(),t[o].m(r.parentNode,r))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(s){s&&(i(e),i(r)),Qe(t,s)}}}function $u(a){let e,r,l,t,s,n,o,f,h,d,_,m,c,u=a[3].length+"",E,g,P,O,D;const S=a[9].header,p=ot(S,a,a[14],ja),R=a[9].default,C=ot(R,a,a[14],null),F=[Uu,zu,qu],N=[];function T(b,I){return b[1]?b[1].def_to_off.results.bindings.length>0?1:2:0}return o=T(a),f=N[o]=F[o](a),{c(){e=M("dialog"),r=M("div"),p&&p.c(),l=k(`
    Select Attack Techniques
    `),C&&C.c(),t=ee(),s=M("hr"),n=ee(),f.c(),h=ee(),d=M("hr"),_=ee(),m=M("button"),c=k("Insert ("),E=k(u),g=k(")"),this.h()},l(b){e=B(b,"DIALOG",{class:!0});var I=pe(e);r=B(I,"DIV",{class:!0});var w=pe(r);p&&p.l(w),l=y(w,`
    Select Attack Techniques
    `),C&&C.l(w),t=te(w),s=B(w,"HR",{}),n=te(w),f.l(w),h=te(w),d=B(w,"HR",{}),_=te(w),m=B(w,"BUTTON",{class:!0});var A=pe(m);c=y(A,"Insert ("),E=y(A,u),g=y(A,")"),A.forEach(i),w.forEach(i),I.forEach(i),this.h()},h(){m.autofocus=!0,W(m,"class","svelte-1ai9hff"),W(r,"class","svelte-1ai9hff"),W(e,"class","svelte-1ai9hff")},m(b,I){v(b,e,I),L(e,r),p&&p.m(r,null),L(r,l),C&&C.m(r,null),L(r,t),L(r,s),L(r,n),N[o].m(r,null),L(r,h),L(r,d),L(r,_),L(r,m),L(m,c),L(m,E),L(m,g),a[11](e),P=!0,m.focus(),O||(D=[be(m,"click",a[7]),be(r,"click",Rt(a[10])),be(e,"close",a[12]),be(e,"click",Vt(a[13]))],O=!0)},p(b,[I]){p&&p.p&&(!P||I&16384)&&it(p,S,b,b[14],P?ut(S,b[14],I,ju):ft(b[14]),ja),C&&C.p&&(!P||I&16384)&&it(C,R,b,b[14],P?ut(R,b[14],I,null):ft(b[14]),null);let w=o;o=T(b),o===w?N[o].p(b,I):(gt(),me(N[w],1,1,()=>{N[w]=null}),bt(),f=N[o],f?f.p(b,I):(f=N[o]=F[o](b),f.c()),de(f,1),f.m(r,h)),(!P||I&8)&&u!==(u=b[3].length+"")&&Y(E,u)},i(b){P||(de(p,b),de(C,b),de(f),P=!0)},o(b){me(p,b),me(C,b),me(f),P=!1},d(b){b&&i(e),p&&p.d(b),C&&C.d(b),N[o].d(),a[11](null),O=!1,mt(D)}}}function Hu(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{show_attack_modal:f}=e,{parent_node:h}=e,{data:d}=e,_;const m=qt();Je(a,m,p=>r(16,s=p));const c=zt();Je(a,c,p=>r(15,t=p));let u=new Kt;function E(p){l.includes(p)?r(3,l=l.filter(R=>R!==p)):l.push(p),r(3,l)}window.def_to_off_callback=function(p){E(p)};function g(){let p=0,R=200,C=100;for(const F of l){let N=d.def_to_off.results.bindings.find(T=>T.off_tech_id.value.replace(/ |\./g,"")==F);N&&(Bt(m,c,h,"attackSelectorNode",N.off_tech_label.value,"d3f:"+N.off_tech_id.value,h.data.sequence,h.position.x+p*R,h.position.y+C,182,63,"May "+N.def_tactic_label.value,!0),p+=1)}m.set(s),c.set(t),_&&_.close(),r(3,l=[])}function P(p){Ot.call(this,a,p)}function O(p){He[p?"unshift":"push"](()=>{_=p,r(2,_)})}const D=()=>r(0,f=!1),S=()=>{_.close(),r(3,l=[])};return a.$$set=p=>{"show_attack_modal"in p&&r(0,f=p.show_attack_modal),"parent_node"in p&&r(8,h=p.parent_node),"data"in p&&r(1,d=p.data),"$$scope"in p&&r(14,o=p.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&f&&_&&(_.showModal(),u.reset()),a.$$.dirty&5&&!f&&_&&(_.close(),u.reset())},r(3,l=[]),[f,d,_,l,m,c,u,g,h,n,P,O,D,S,o]}class Qu extends at{constructor(e){super(),st(this,e,Hu,$u,tt,{show_attack_modal:0,parent_node:8,data:1})}}function Gu(a){let e,r="artifacts",l,t,s,n,o,f="offensive techniques",h,d,_,m,c,u="weaknesses (coming soon)",E,g,P;function O(R){a[6](R)}let D={parent_node:a[0],data:a[1]};a[3]!==void 0&&(D.show_artifacts_modal=a[3]),t=new Lu({props:D}),He.push(()=>Pt(t,"show_artifacts_modal",O));function S(R){a[8](R)}let p={parent_node:a[0],data:a[1]};return a[2]!==void 0&&(p.show_attack_modal=a[2]),d=new Qu({props:p}),He.push(()=>Pt(d,"show_attack_modal",S)),{c(){e=M("button"),e.textContent=r,l=ee(),Re(t.$$.fragment),n=ee(),o=M("button"),o.textContent=f,h=ee(),Re(d.$$.fragment),m=ee(),c=M("button"),c.textContent=u,this.h()},l(R){e=B(R,"BUTTON",{class:!0,"data-svelte-h":!0}),we(e)!=="svelte-isgkpy"&&(e.textContent=r),l=te(R),Oe(t.$$.fragment,R),n=te(R),o=B(R,"BUTTON",{class:!0,"data-svelte-h":!0}),we(o)!=="svelte-17h5zge"&&(o.textContent=f),h=te(R),Oe(d.$$.fragment,R),m=te(R),c=B(R,"BUTTON",{class:!0,"data-svelte-h":!0}),we(c)!=="svelte-ivhbdc"&&(c.textContent=u),this.h()},h(){W(e,"class","svelte-1x5dcdh"),W(o,"class","svelte-1x5dcdh"),c.disabled=!0,W(c,"class","svelte-1x5dcdh")},m(R,C){v(R,e,C),v(R,l,C),Ie(t,R,C),v(R,n,C),v(R,o,C),v(R,h,C),Ie(d,R,C),v(R,m,C),v(R,c,C),E=!0,g||(P=[be(e,"click",a[5]),be(o,"click",a[7])],g=!0)},p(R,[C]){const F={};C&1&&(F.parent_node=R[0]),C&2&&(F.data=R[1]),!s&&C&8&&(s=!0,F.show_artifacts_modal=R[3],Et(()=>s=!1)),t.$set(F);const N={};C&1&&(N.parent_node=R[0]),C&2&&(N.data=R[1]),!_&&C&4&&(_=!0,N.show_attack_modal=R[2],Et(()=>_=!1)),d.$set(N)},i(R){E||(de(t.$$.fragment,R),de(d.$$.fragment,R),E=!0)},o(R){me(t.$$.fragment,R),me(d.$$.fragment,R),E=!1},d(R){R&&(i(e),i(l),i(n),i(o),i(h),i(m),i(c)),Te(t,R),Te(d,R),g=!1,mt(P)}}}function Ku(a,e,r){let l,t;var s=this&&this.__awaiter||function(u,E,g,P){function O(D){return D instanceof g?D:new g(function(S){S(D)})}return new(g||(g=Promise))(function(D,S){function p(F){try{C(P.next(F))}catch(N){S(N)}}function R(F){try{C(P.throw(F))}catch(N){S(N)}}function C(F){F.done?D(F.value):O(F.value).then(p,R)}C((P=P.apply(u,E||[])).next())})};let{node:n}=e,o;function f(u){alert(u),r(3,l=!1),r(2,t=!1)}function h(u){return s(this,void 0,void 0,function*(){if(u.data.d3f_class&&u.data.d3f_class.includes("d3f:")){const E=u.data.d3f_class,g=yield fetch(`/api/technique/${E}.json`),P=yield g.json();if(g.status!=200||P.description["@graph"].length==0)f(`D3FEND Technique: "${E.replace("d3f:","")}" not found in ontology`);else return P}else f("Please specify a D3FEND Class for this node to enable inferential mapping")})}const d=async()=>{r(1,o=null),r(3,l=!0),r(1,o=await h(n))};function _(u){l=u,r(3,l)}const m=async()=>{r(1,o=null),r(2,t=!0),r(1,o=await h(n))};function c(u){t=u,r(2,t)}return a.$$set=u=>{"node"in u&&r(0,n=u.node)},r(3,l=!1),r(2,t=!1),[n,o,t,l,h,d,_,m,c]}class Ju extends at{constructor(e){super(),st(this,e,Ku,Gu,tt,{node:0})}}function Ua(a,e,r){const l=a.slice();return l[18]=e[r],l}const Yu=a=>({}),Va=a=>({});function Xu(a){let e;return{c(){e=k("No related artifacts in this release.")},l(r){e=y(r,"No related artifacts in this release.")},m(r,l){v(r,e,l)},p:ke,i:ke,o:ke,d(r){r&&i(e)}}}function Zu(a){let e,r;return e=new Mt({props:{$$slots:{default:[tc]},$$scope:{ctx:a}}}),{c(){Re(e.$$.fragment)},l(l){Oe(e.$$.fragment,l)},m(l,t){Ie(e,l,t),r=!0},p(l,t){const s={};t&16394&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){me(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function Wu(a){let e,r="Loading...";return{c(){e=M("div"),e.textContent=r},l(l){e=B(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:ke,i:ke,o:ke,d(l){l&&i(e)}}}function Ma(a){let e=a[18].off_tech_id.value.replace(/ |\./g,"")+"",r,l,t=a[18].off_tech_label.value+"",s,n,o="-->",f,h,d=a[18].off_artifact_rel_label.value.replace(/ /g,"")+"",_,m,c=he(a[18].off_artifact.value)+"",u,E,g=a[18].off_artifact_label.value+"",P,O,D=a[18].off_tech_id.value.replace(/ |\./g,"")+"",S,p,R,C,F=he(a[18].off_artifact.value)+"",N,T,b=he(a[18].off_artifact.value)+"",I,w,A=a[18].off_tech_id.value.replace(/ |\./g,"")+"",X,oe,le=pr(a[18].off_tech_id.value)+"",G,Q,V=he(a[18].off_artifact.value)+"",z,Z,q=he(a[18].off_artifact.value)+"",J,ye;function Pe(ce,ge){return ge&10&&(R=null),R==null&&(R=!!ce[3].includes(he(ce[18].off_artifact.value))),R?ec:xu}let ae=Pe(a,-1),ve=ae(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),h=k(" |"),_=k(d),m=k("| "),u=k(c),E=k('["'),P=k(g),O=k('"]; class '),S=k(D),p=k(` OffensiveTechniqueNode;
            `),ve.c(),C=k(" ; click "),N=k(F),T=k(' href "/dao/artifact/d3f:'),I=k(b),w=k('"; click '),X=k(A),oe=k(' href "'),G=k(le),Q=k('"; click '),z=k(V),Z=k(` href "javascript:off_to_art_callback('`),J=k(q),ye=k(`')";`)},l(ce){r=y(ce,e),l=y(ce,'["'),s=y(ce,t),n=y(ce,'"] '),f=y(ce,o),h=y(ce," |"),_=y(ce,d),m=y(ce,"| "),u=y(ce,c),E=y(ce,'["'),P=y(ce,g),O=y(ce,'"]; class '),S=y(ce,D),p=y(ce,` OffensiveTechniqueNode;
            `),ve.l(ce),C=y(ce," ; click "),N=y(ce,F),T=y(ce,' href "/dao/artifact/d3f:'),I=y(ce,b),w=y(ce,'"; click '),X=y(ce,A),oe=y(ce,' href "'),G=y(ce,le),Q=y(ce,'"; click '),z=y(ce,V),Z=y(ce,` href "javascript:off_to_art_callback('`),J=y(ce,q),ye=y(ce,`')";`)},m(ce,ge){v(ce,r,ge),v(ce,l,ge),v(ce,s,ge),v(ce,n,ge),v(ce,f,ge),v(ce,h,ge),v(ce,_,ge),v(ce,m,ge),v(ce,u,ge),v(ce,E,ge),v(ce,P,ge),v(ce,O,ge),v(ce,S,ge),v(ce,p,ge),ve.m(ce,ge),v(ce,C,ge),v(ce,N,ge),v(ce,T,ge),v(ce,I,ge),v(ce,w,ge),v(ce,X,ge),v(ce,oe,ge),v(ce,G,ge),v(ce,Q,ge),v(ce,z,ge),v(ce,Z,ge),v(ce,J,ge),v(ce,ye,ge)},p(ce,ge){ge&2&&e!==(e=ce[18].off_tech_id.value.replace(/ |\./g,"")+"")&&Y(r,e),ge&2&&t!==(t=ce[18].off_tech_label.value+"")&&Y(s,t),ge&2&&d!==(d=ce[18].off_artifact_rel_label.value.replace(/ /g,"")+"")&&Y(_,d),ge&2&&c!==(c=he(ce[18].off_artifact.value)+"")&&Y(u,c),ge&2&&g!==(g=ce[18].off_artifact_label.value+"")&&Y(P,g),ge&2&&D!==(D=ce[18].off_tech_id.value.replace(/ |\./g,"")+"")&&Y(S,D),ae===(ae=Pe(ce,ge))&&ve?ve.p(ce,ge):(ve.d(1),ve=ae(ce),ve&&(ve.c(),ve.m(C.parentNode,C))),ge&2&&F!==(F=he(ce[18].off_artifact.value)+"")&&Y(N,F),ge&2&&b!==(b=he(ce[18].off_artifact.value)+"")&&Y(I,b),ge&2&&A!==(A=ce[18].off_tech_id.value.replace(/ |\./g,"")+"")&&Y(X,A),ge&2&&le!==(le=pr(ce[18].off_tech_id.value)+"")&&Y(G,le),ge&2&&V!==(V=he(ce[18].off_artifact.value)+"")&&Y(z,V),ge&2&&q!==(q=he(ce[18].off_artifact.value)+"")&&Y(J,q)},d(ce){ce&&(i(r),i(l),i(s),i(n),i(f),i(h),i(_),i(m),i(u),i(E),i(P),i(O),i(S),i(p),i(C),i(N),i(T),i(I),i(w),i(X),i(oe),i(G),i(Q),i(z),i(Z),i(J),i(ye)),ve.d(ce)}}}function xu(a){let e,r=he(a[18].off_artifact.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" ArtifactNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," ArtifactNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=he(s[18].off_artifact.value)+"")&&Y(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function ec(a){let e,r=he(a[18].off_artifact.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" SelectedArtifactNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," SelectedArtifactNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=he(s[18].off_artifact.value)+"")&&Y(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function Ba(a){let e=a[6].edge_is_unique(a[18].off_tech_label.value,a[18].off_artifact_rel_label.value,a[18].off_artifact_label.value),r,l=e&&Ma(a);return{c(){l&&l.c(),r=Ee()},l(t){l&&l.l(t),r=Ee()},m(t,s){l&&l.m(t,s),v(t,r,s)},p(t,s){s&2&&(e=t[6].edge_is_unique(t[18].off_tech_label.value,t[18].off_artifact_rel_label.value,t[18].off_artifact_label.value)),e?l?l.p(t,s):(l=Ma(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&i(r),l&&l.d(t)}}}function tc(a){let e,r,l=Ne(a[1].off_to_def.results.bindings),t=[];for(let s=0;s<l.length;s+=1)t[s]=Ba(Ua(a,l,s));return{c(){e=k(`graph LR;
        `);for(let s=0;s<t.length;s+=1)t[s].c();r=Ee()},l(s){e=y(s,`graph LR;
        `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=Ee()},m(s,n){v(s,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,n);v(s,r,n)},p(s,n){if(n&74){l=Ne(s[1].off_to_def.results.bindings);let o;for(o=0;o<l.length;o+=1){const f=Ua(s,l,o);t[o]?t[o].p(f,n):(t[o]=Ba(f),t[o].c(),t[o].m(r.parentNode,r))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(s){s&&(i(e),i(r)),Qe(t,s)}}}function rc(a){let e,r,l,t,s,n,o,f,h,d,_,m,c,u=a[3].length+"",E,g,P,O,D;const S=a[9].header,p=ot(S,a,a[14],Va),R=a[9].default,C=ot(R,a,a[14],null),F=[Wu,Zu,Xu],N=[];function T(b,I){return b[1]?b[1].off_to_def.results.bindings.length>0?1:2:0}return o=T(a),f=N[o]=F[o](a),{c(){e=M("dialog"),r=M("div"),p&&p.c(),l=k(`
    Select Related Artifacts To Insert
    `),C&&C.c(),t=ee(),s=M("hr"),n=ee(),f.c(),h=ee(),d=M("hr"),_=ee(),m=M("button"),c=k("Insert ("),E=k(u),g=k(")"),this.h()},l(b){e=B(b,"DIALOG",{class:!0});var I=pe(e);r=B(I,"DIV",{class:!0});var w=pe(r);p&&p.l(w),l=y(w,`
    Select Related Artifacts To Insert
    `),C&&C.l(w),t=te(w),s=B(w,"HR",{}),n=te(w),f.l(w),h=te(w),d=B(w,"HR",{}),_=te(w),m=B(w,"BUTTON",{class:!0});var A=pe(m);c=y(A,"Insert ("),E=y(A,u),g=y(A,")"),A.forEach(i),w.forEach(i),I.forEach(i),this.h()},h(){m.autofocus=!0,W(m,"class","svelte-x0618k"),W(r,"class","svelte-x0618k"),W(e,"class","svelte-x0618k")},m(b,I){v(b,e,I),L(e,r),p&&p.m(r,null),L(r,l),C&&C.m(r,null),L(r,t),L(r,s),L(r,n),N[o].m(r,null),L(r,h),L(r,d),L(r,_),L(r,m),L(m,c),L(m,E),L(m,g),a[11](e),P=!0,m.focus(),O||(D=[be(m,"click",a[7]),be(r,"click",Rt(a[10])),be(e,"close",a[12]),be(e,"click",Vt(a[13]))],O=!0)},p(b,[I]){p&&p.p&&(!P||I&16384)&&it(p,S,b,b[14],P?ut(S,b[14],I,Yu):ft(b[14]),Va),C&&C.p&&(!P||I&16384)&&it(C,R,b,b[14],P?ut(R,b[14],I,null):ft(b[14]),null);let w=o;o=T(b),o===w?N[o].p(b,I):(gt(),me(N[w],1,1,()=>{N[w]=null}),bt(),f=N[o],f?f.p(b,I):(f=N[o]=F[o](b),f.c()),de(f,1),f.m(r,h)),(!P||I&8)&&u!==(u=b[3].length+"")&&Y(E,u)},i(b){P||(de(p,b),de(C,b),de(f),P=!0)},o(b){me(p,b),me(C,b),me(f),P=!1},d(b){b&&i(e),p&&p.d(b),C&&C.d(b),N[o].d(),a[11](null),O=!1,mt(D)}}}function lc(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{show_artifacts_modal:f}=e,{parent_node:h}=e,{data:d}=e,_;const m=qt();Je(a,m,p=>r(16,s=p));const c=zt();Je(a,c,p=>r(15,t=p));let u=new Kt;function E(p){l.includes(p)?r(3,l=l.filter(R=>R!==p)):l.push(p),r(3,l)}window.off_to_art_callback=function(p){E(p)};function g(){let p=0,R=200,C=100;for(const F of l){let N=d.off_to_def.results.bindings.find(T=>he(T.off_artifact.value)==F);N&&(Bt(m,c,h,"artifactSelectorNode",N.off_artifact_label.value,"d3f:"+he(N.off_artifact.value),h.data.sequence,h.position.x+p*R,h.position.y+C,182,63,N.off_artifact_rel_label.value,!0),p+=1)}m.set(s),c.set(t),_&&_.close(),r(3,l=[])}function P(p){Ot.call(this,a,p)}function O(p){He[p?"unshift":"push"](()=>{_=p,r(2,_)})}const D=()=>r(0,f=!1),S=()=>{_.close(),r(3,l=[])};return a.$$set=p=>{"show_artifacts_modal"in p&&r(0,f=p.show_artifacts_modal),"parent_node"in p&&r(8,h=p.parent_node),"data"in p&&r(1,d=p.data),"$$scope"in p&&r(14,o=p.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&f&&_&&(_.showModal(),u.reset()),a.$$.dirty&5&&!f&&_&&(_.close(),u.reset())},r(3,l=[]),[f,d,_,l,m,c,u,g,h,n,P,O,D,S,o]}class ac extends at{constructor(e){super(),st(this,e,lc,rc,tt,{show_artifacts_modal:0,parent_node:8,data:1})}}function $a(a,e,r){const l=a.slice();return l[23]=e[r],l}const sc=a=>({}),Ha=a=>({});function nc(a){let e;return{c(){e=k("No related artifacts in this release.")},l(r){e=y(r,"No related artifacts in this release.")},m(r,l){v(r,e,l)},p:ke,i:ke,o:ke,d(r){r&&i(e)}}}function oc(a){let e,r,l,t,s,n,o,f,h,d;function _(c){a[14](c)}let m={toggles:a[4]};return a[3]!==void 0&&(m.selected=a[3]),r=new As({props:m}),He.push(()=>Pt(r,"selected",_)),h=new Mt({props:{$$slots:{default:[cc]},$$scope:{ctx:a}}}),{c(){e=M("div"),Re(r.$$.fragment),t=ee(),s=M("br"),n=ee(),o=M("br"),f=ee(),Re(h.$$.fragment),this.h()},l(c){e=B(c,"DIV",{class:!0});var u=pe(e);Oe(r.$$.fragment,u),u.forEach(i),t=te(c),s=B(c,"BR",{}),n=te(c),o=B(c,"BR",{}),f=te(c),Oe(h.$$.fragment,c),this.h()},h(){W(e,"class","center shrink")},m(c,u){v(c,e,u),Ie(r,e,null),v(c,t,u),v(c,s,u),v(c,n,u),v(c,o,u),v(c,f,u),Ie(h,c,u),d=!0},p(c,u){const E={};u&16&&(E.toggles=c[4]),!l&&u&8&&(l=!0,E.selected=c[3],Et(()=>l=!1)),r.$set(E);const g={};u&262186&&(g.$$scope={dirty:u,ctx:c}),h.$set(g)},i(c){d||(de(r.$$.fragment,c),de(h.$$.fragment,c),d=!0)},o(c){me(r.$$.fragment,c),me(h.$$.fragment,c),d=!1},d(c){c&&(i(e),i(t),i(s),i(n),i(o),i(f)),Te(r),Te(h,c)}}}function ic(a){let e,r="Loading...";return{c(){e=M("div"),e.textContent=r},l(l){e=B(l,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){v(l,e,t)},p:ke,i:ke,o:ke,d(l){l&&i(e)}}}function Qa(a){let e=a[8].edge_is_unique(a[23].def_tech_label.value,a[23].def_artifact_rel_label.value,a[23].off_artifact_label.value),r,l=e&&Ga(a);return{c(){l&&l.c(),r=Ee()},l(t){l&&l.l(t),r=Ee()},m(t,s){l&&l.m(t,s),v(t,r,s)},p(t,s){s&2&&(e=t[8].edge_is_unique(t[23].def_tech_label.value,t[23].def_artifact_rel_label.value,t[23].off_artifact_label.value)),e?l?l.p(t,s):(l=Ga(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&i(r),l&&l.d(t)}}}function Ga(a){let e=!a[3].includes(a[23].def_tactic_label.value),r,l=e&&Ka(a);return{c(){l&&l.c(),r=Ee()},l(t){l&&l.l(t),r=Ee()},m(t,s){l&&l.m(t,s),v(t,r,s)},p(t,s){s&10&&(e=!t[3].includes(t[23].def_tactic_label.value)),e?l?l.p(t,s):(l=Ka(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&i(r),l&&l.d(t)}}}function Ka(a){let e=he(a[23].def_tech.value)+"",r,l,t=a[23].def_tech_label.value+"",s,n,o="-->",f,h,d=a[23].def_artifact_rel_label.value.replace(/ /g,"")+"",_,m,c=he(a[23].off_artifact.value)+"",u,E,g=a[23].off_artifact_label.value+"",P,O,D=a[8].edge_is_unique(a[23].def_tech.value,a[23].def_tactic_label.value,a[23].off_tech_id.value),S,p,R,C=a[23].off_artifact_label.value.replace(/ /g,"")+"",F,N,T=he(a[23].def_tech.value)+"",b,I,w=a[23].def_tech_label.value.replace(/ |\./g,"")+"",A,X,oe=D&&Ja(a);function le(V,z){return z&34&&(p=null),p==null&&(p=!!V[5].includes(he(V[23].def_tech.value))),p?uc:fc}let G=le(a,-1),Q=G(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),h=k(`
                | `),_=k(d),m=k(" | "),u=k(c),E=k('["'),P=k(g),O=k(`"];

                `),oe&&oe.c(),S=ee(),Q.c(),R=k(` 
                class `),F=k(C),N=k(` ArtifactNode;
                click `),b=k(T),I=k(` href "javascript:off_to_def_callback('`),A=k(w),X=k(`')";`)},l(V){r=y(V,e),l=y(V,'["'),s=y(V,t),n=y(V,'"] '),f=y(V,o),h=y(V,`
                | `),_=y(V,d),m=y(V," | "),u=y(V,c),E=y(V,'["'),P=y(V,g),O=y(V,`"];

                `),oe&&oe.l(V),S=te(V),Q.l(V),R=y(V,` 
                class `),F=y(V,C),N=y(V,` ArtifactNode;
                click `),b=y(V,T),I=y(V,` href "javascript:off_to_def_callback('`),A=y(V,w),X=y(V,`')";`)},m(V,z){v(V,r,z),v(V,l,z),v(V,s,z),v(V,n,z),v(V,f,z),v(V,h,z),v(V,_,z),v(V,m,z),v(V,u,z),v(V,E,z),v(V,P,z),v(V,O,z),oe&&oe.m(V,z),v(V,S,z),Q.m(V,z),v(V,R,z),v(V,F,z),v(V,N,z),v(V,b,z),v(V,I,z),v(V,A,z),v(V,X,z)},p(V,z){z&2&&e!==(e=he(V[23].def_tech.value)+"")&&Y(r,e),z&2&&t!==(t=V[23].def_tech_label.value+"")&&Y(s,t),z&2&&d!==(d=V[23].def_artifact_rel_label.value.replace(/ /g,"")+"")&&Y(_,d),z&2&&c!==(c=he(V[23].off_artifact.value)+"")&&Y(u,c),z&2&&g!==(g=V[23].off_artifact_label.value+"")&&Y(P,g),z&2&&(D=V[8].edge_is_unique(V[23].def_tech.value,V[23].def_tactic_label.value,V[23].off_tech_id.value)),D?oe?oe.p(V,z):(oe=Ja(V),oe.c(),oe.m(S.parentNode,S)):oe&&(oe.d(1),oe=null),G===(G=le(V,z))&&Q?Q.p(V,z):(Q.d(1),Q=G(V),Q&&(Q.c(),Q.m(R.parentNode,R))),z&2&&C!==(C=V[23].off_artifact_label.value.replace(/ /g,"")+"")&&Y(F,C),z&2&&T!==(T=he(V[23].def_tech.value)+"")&&Y(b,T),z&2&&w!==(w=V[23].def_tech_label.value.replace(/ |\./g,"")+"")&&Y(A,w)},d(V){V&&(i(r),i(l),i(s),i(n),i(f),i(h),i(_),i(m),i(u),i(E),i(P),i(O),i(S),i(R),i(F),i(N),i(b),i(I),i(A),i(X)),oe&&oe.d(V),Q.d(V)}}}function Ja(a){let e=he(a[23].def_tech.value)+"",r,l,t=a[23].def_tech_label.value+"",s,n,o="-.->",f,h,d="May "+a[23].def_tactic_label.value,_,m,c=a[23].off_tech_id.value.replace(/ |\./g,"")+"",u,E,g=a[23].off_tech_label.value+"",P,O;return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),h=k(`
                  | `),_=k(d),m=k(" | "),u=k(c),E=k('["'),P=k(g),O=k('"] ;')},l(D){r=y(D,e),l=y(D,'["'),s=y(D,t),n=y(D,'"] '),f=y(D,o),h=y(D,`
                  | `),_=y(D,d),m=y(D," | "),u=y(D,c),E=y(D,'["'),P=y(D,g),O=y(D,'"] ;')},m(D,S){v(D,r,S),v(D,l,S),v(D,s,S),v(D,n,S),v(D,f,S),v(D,h,S),v(D,_,S),v(D,m,S),v(D,u,S),v(D,E,S),v(D,P,S),v(D,O,S)},p(D,S){S&2&&e!==(e=he(D[23].def_tech.value)+"")&&Y(r,e),S&2&&t!==(t=D[23].def_tech_label.value+"")&&Y(s,t),S&2&&d!==(d="May "+D[23].def_tactic_label.value)&&Y(_,d),S&2&&c!==(c=D[23].off_tech_id.value.replace(/ |\./g,"")+"")&&Y(u,c),S&2&&g!==(g=D[23].off_tech_label.value+"")&&Y(P,g)},d(D){D&&(i(r),i(l),i(s),i(n),i(f),i(h),i(_),i(m),i(u),i(E),i(P),i(O))}}}function fc(a){let e,r=he(a[23].def_tech.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" DefensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," DefensiveTechniqueNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=he(s[23].def_tech.value)+"")&&Y(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function uc(a){let e,r=he(a[23].def_tech.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" SelectedDefensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," SelectedDefensiveTechniqueNode;")},m(s,n){v(s,e,n),v(s,l,n),v(s,t,n)},p(s,n){n&2&&r!==(r=he(s[23].def_tech.value)+"")&&Y(l,r)},d(s){s&&(i(e),i(l),i(t))}}}function Ya(a){let e=a[23].off_tech_id.value.replace(/ |\./g,"")+"",r,l,t=a[23].off_tech_label.value+"",s,n,o="-->",f,h,d=a[23].off_artifact_rel_label.value.replace(/ /g,"")+"",_,m,c=he(a[23].off_artifact.value)+"",u,E,g=a[23].off_artifact_label.value+"",P,O,D=a[23].off_tech_id.value.replace(/ |\./g,"")+"",S,p,R=he(a[23].off_artifact.value)+"",C,F,N=he(a[23].off_artifact.value)+"",T,b,I=he(a[23].off_artifact.value)+"",w,A,X=a[23].off_tech_id.value.replace(/ |\./g,"")+"",oe,le,G=pr(a[23].off_tech_id.value)+"",Q,V,z=he(a[23].off_artifact.value)+"",Z,q,J=he(a[23].off_artifact.value)+"",ye,Pe;return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),f=k(o),h=k(" |"),_=k(d),m=k("| "),u=k(c),E=k('["'),P=k(g),O=k('"]; class '),S=k(D),p=k(` OffensiveTechniqueNode;
            class `),C=k(R),F=k(" ArtifactNode; click "),T=k(N),b=k(' href "/dao/artifact/d3f:'),w=k(I),A=k(`";
            click `),oe=k(X),le=k(' href "'),Q=k(G),V=k('"; click '),Z=k(z),q=k(' href "/dao/artifact/d3f:'),ye=k(J),Pe=k('";')},l(ae){r=y(ae,e),l=y(ae,'["'),s=y(ae,t),n=y(ae,'"] '),f=y(ae,o),h=y(ae," |"),_=y(ae,d),m=y(ae,"| "),u=y(ae,c),E=y(ae,'["'),P=y(ae,g),O=y(ae,'"]; class '),S=y(ae,D),p=y(ae,` OffensiveTechniqueNode;
            class `),C=y(ae,R),F=y(ae," ArtifactNode; click "),T=y(ae,N),b=y(ae,' href "/dao/artifact/d3f:'),w=y(ae,I),A=y(ae,`";
            click `),oe=y(ae,X),le=y(ae,' href "'),Q=y(ae,G),V=y(ae,'"; click '),Z=y(ae,z),q=y(ae,' href "/dao/artifact/d3f:'),ye=y(ae,J),Pe=y(ae,'";')},m(ae,ve){v(ae,r,ve),v(ae,l,ve),v(ae,s,ve),v(ae,n,ve),v(ae,f,ve),v(ae,h,ve),v(ae,_,ve),v(ae,m,ve),v(ae,u,ve),v(ae,E,ve),v(ae,P,ve),v(ae,O,ve),v(ae,S,ve),v(ae,p,ve),v(ae,C,ve),v(ae,F,ve),v(ae,T,ve),v(ae,b,ve),v(ae,w,ve),v(ae,A,ve),v(ae,oe,ve),v(ae,le,ve),v(ae,Q,ve),v(ae,V,ve),v(ae,Z,ve),v(ae,q,ve),v(ae,ye,ve),v(ae,Pe,ve)},p(ae,ve){ve&2&&e!==(e=ae[23].off_tech_id.value.replace(/ |\./g,"")+"")&&Y(r,e),ve&2&&t!==(t=ae[23].off_tech_label.value+"")&&Y(s,t),ve&2&&d!==(d=ae[23].off_artifact_rel_label.value.replace(/ /g,"")+"")&&Y(_,d),ve&2&&c!==(c=he(ae[23].off_artifact.value)+"")&&Y(u,c),ve&2&&g!==(g=ae[23].off_artifact_label.value+"")&&Y(P,g),ve&2&&D!==(D=ae[23].off_tech_id.value.replace(/ |\./g,"")+"")&&Y(S,D),ve&2&&R!==(R=he(ae[23].off_artifact.value)+"")&&Y(C,R),ve&2&&N!==(N=he(ae[23].off_artifact.value)+"")&&Y(T,N),ve&2&&I!==(I=he(ae[23].off_artifact.value)+"")&&Y(w,I),ve&2&&X!==(X=ae[23].off_tech_id.value.replace(/ |\./g,"")+"")&&Y(oe,X),ve&2&&G!==(G=pr(ae[23].off_tech_id.value)+"")&&Y(Q,G),ve&2&&z!==(z=he(ae[23].off_artifact.value)+"")&&Y(Z,z),ve&2&&J!==(J=he(ae[23].off_artifact.value)+"")&&Y(ye,J)},d(ae){ae&&(i(r),i(l),i(s),i(n),i(f),i(h),i(_),i(m),i(u),i(E),i(P),i(O),i(S),i(p),i(C),i(F),i(T),i(b),i(w),i(A),i(oe),i(le),i(Q),i(V),i(Z),i(q),i(ye),i(Pe))}}}function Xa(a){let e,r=a[8].edge_is_unique(a[23].off_tech_label.value,a[23].off_artifact_rel_label.value,a[23].off_artifact_label.value),l,t="def_tech"in a[23]&&Qa(a),s=r&&Ya(a);return{c(){t&&t.c(),e=ee(),s&&s.c(),l=Ee()},l(n){t&&t.l(n),e=te(n),s&&s.l(n),l=Ee()},m(n,o){t&&t.m(n,o),v(n,e,o),s&&s.m(n,o),v(n,l,o)},p(n,o){"def_tech"in n[23]?t?t.p(n,o):(t=Qa(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null),o&2&&(r=n[8].edge_is_unique(n[23].off_tech_label.value,n[23].off_artifact_rel_label.value,n[23].off_artifact_label.value)),r?s?s.p(n,o):(s=Ya(n),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null)},d(n){n&&(i(e),i(l)),t&&t.d(n),s&&s.d(n)}}}function cc(a){let e,r,l=Ne(a[1].off_to_def.results.bindings),t=[];for(let s=0;s<l.length;s+=1)t[s]=Xa($a(a,l,s));return{c(){e=k(`graph LR;
        `);for(let s=0;s<t.length;s+=1)t[s].c();r=Ee()},l(s){e=y(s,`graph LR;
        `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=Ee()},m(s,n){v(s,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,n);v(s,r,n)},p(s,n){if(n&298){l=Ne(s[1].off_to_def.results.bindings);let o;for(o=0;o<l.length;o+=1){const f=$a(s,l,o);t[o]?t[o].p(f,n):(t[o]=Xa(f),t[o].c(),t[o].m(r.parentNode,r))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(s){s&&(i(e),i(r)),Qe(t,s)}}}function dc(a){let e,r,l,t,s,n,o,f,h,d,_,m,c,u=a[5].length+"",E,g,P,O,D;const S=a[12].header,p=ot(S,a,a[18],Ha),R=a[12].default,C=ot(R,a,a[18],null),F=[ic,oc,nc],N=[];function T(b,I){return b[1]?b[1].off_to_def.results.bindings.length>0?1:2:0}return o=T(a),f=N[o]=F[o](a),{c(){e=M("dialog"),r=M("div"),p&&p.c(),l=k(`
    Select Related Artifacts To Insert
    `),C&&C.c(),t=ee(),s=M("hr"),n=ee(),f.c(),h=ee(),d=M("hr"),_=ee(),m=M("button"),c=k("Insert ("),E=k(u),g=k(")"),this.h()},l(b){e=B(b,"DIALOG",{class:!0});var I=pe(e);r=B(I,"DIV",{class:!0});var w=pe(r);p&&p.l(w),l=y(w,`
    Select Related Artifacts To Insert
    `),C&&C.l(w),t=te(w),s=B(w,"HR",{}),n=te(w),f.l(w),h=te(w),d=B(w,"HR",{}),_=te(w),m=B(w,"BUTTON",{class:!0});var A=pe(m);c=y(A,"Insert ("),E=y(A,u),g=y(A,")"),A.forEach(i),w.forEach(i),I.forEach(i),this.h()},h(){m.autofocus=!0,W(m,"class","svelte-x0618k"),W(r,"class","svelte-x0618k"),W(e,"class","svelte-x0618k")},m(b,I){v(b,e,I),L(e,r),p&&p.m(r,null),L(r,l),C&&C.m(r,null),L(r,t),L(r,s),L(r,n),N[o].m(r,null),L(r,h),L(r,d),L(r,_),L(r,m),L(m,c),L(m,E),L(m,g),a[15](e),P=!0,m.focus(),O||(D=[be(m,"click",a[9]),be(r,"click",Rt(a[13])),be(e,"close",a[16]),be(e,"click",Vt(a[17]))],O=!0)},p(b,[I]){p&&p.p&&(!P||I&262144)&&it(p,S,b,b[18],P?ut(S,b[18],I,sc):ft(b[18]),Ha),C&&C.p&&(!P||I&262144)&&it(C,R,b,b[18],P?ut(R,b[18],I,null):ft(b[18]),null);let w=o;o=T(b),o===w?N[o].p(b,I):(gt(),me(N[w],1,1,()=>{N[w]=null}),bt(),f=N[o],f?f.p(b,I):(f=N[o]=F[o](b),f.c()),de(f,1),f.m(r,h)),(!P||I&32)&&u!==(u=b[5].length+"")&&Y(E,u)},i(b){P||(de(p,b),de(C,b),de(f),P=!0)},o(b){me(p,b),me(C,b),me(f),P=!1},d(b){b&&i(e),p&&p.d(b),C&&C.d(b),N[o].d(),a[15](null),O=!1,mt(D)}}}function hc(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{show_defend_modal:f}=e,{parent_node:h}=e,{data:d}=e,_;const m=qt();Je(a,m,T=>r(20,s=T));const c=zt();Je(a,c,T=>r(19,t=T));let u=new Kt;function E(T){l.includes(T)?r(5,l=l.filter(b=>b!==T)):l.push(T),r(5,l)}window.off_to_def_callback=function(T){E(T)};function g(){let T=0,b=200,I=100;for(const w of l){let A=d.off_to_def.results.bindings.find(X=>"def_tech"in X&&he(X.def_tech.value)==w);A&&(Bt(m,c,h,"countermeasureSelectorNode",A.def_tech_label.value,"d3f:"+he(A.def_tech.value),h.data.sequence,h.position.x+T*b,h.position.y+I,182,63,"May "+A.def_tactic_label.value,!1),T+=1)}m.set(s),c.set(t),_&&_.close(),r(5,l=[])}let P=new Set,O=[],D=[];Is(O,D)&&(D=[]);function S(T){for(const b of l){let I=d.off_to_def.results.bindings.find(w=>"def_tech"in w&&he(w.def_tech.value)==b);T.includes(I.def_tactic_label.value)&&r(5,l=l.filter(w=>w!==b))}r(5,l)}function p(T){Ot.call(this,a,T)}function R(T){D=T,r(3,D)}function C(T){He[T?"unshift":"push"](()=>{_=T,r(2,_)})}const F=()=>r(0,f=!1),N=()=>{_.close(),r(5,l=[])};return a.$$set=T=>{"show_defend_modal"in T&&r(0,f=T.show_defend_modal),"parent_node"in T&&r(10,h=T.parent_node),"data"in T&&r(1,d=T.data),"$$scope"in T&&r(18,o=T.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&f&&_&&(_.showModal(),u.reset()),a.$$.dirty&5&&!f&&_&&(_.close(),u.reset()),a.$$.dirty&2050&&d&&(d.off_to_def.results.bindings.forEach(T=>{"def_tactic_label"in T&&P.add(T.def_tactic_label.value)}),r(11,P),r(1,d)),a.$$.dirty&2048&&r(4,O=Array.from(P).sort(function(T,b){return gr[T]-gr[b]})),a.$$.dirty&8&&S(D),a.$$.dirty&8&&u.reset(D)},r(5,l=[]),[f,d,_,D,O,l,m,c,u,g,h,P,n,p,R,C,F,N,o]}class _c extends at{constructor(e){super(),st(this,e,hc,dc,tt,{show_defend_modal:0,parent_node:10,data:1})}}function vc(a){let e,r="artifacts",l,t,s,n,o,f="defensive techniques",h,d,_,m,c,u;function E(D){a[6](D)}let g={parent_node:a[0],data:a[1]};a[3]!==void 0&&(g.show_artifacts_modal=a[3]),t=new ac({props:g}),He.push(()=>Pt(t,"show_artifacts_modal",E));function P(D){a[8](D)}let O={parent_node:a[0],data:a[1]};return a[2]!==void 0&&(O.show_defend_modal=a[2]),d=new _c({props:O}),He.push(()=>Pt(d,"show_defend_modal",P)),{c(){e=M("button"),e.textContent=r,l=ee(),Re(t.$$.fragment),n=ee(),o=M("button"),o.textContent=f,h=ee(),Re(d.$$.fragment),this.h()},l(D){e=B(D,"BUTTON",{class:!0,"data-svelte-h":!0}),we(e)!=="svelte-1t14z6m"&&(e.textContent=r),l=te(D),Oe(t.$$.fragment,D),n=te(D),o=B(D,"BUTTON",{class:!0,"data-svelte-h":!0}),we(o)!=="svelte-o3we0s"&&(o.textContent=f),h=te(D),Oe(d.$$.fragment,D),this.h()},h(){W(e,"class","svelte-1x5dcdh"),W(o,"class","svelte-1x5dcdh")},m(D,S){v(D,e,S),v(D,l,S),Ie(t,D,S),v(D,n,S),v(D,o,S),v(D,h,S),Ie(d,D,S),m=!0,c||(u=[be(e,"click",a[5]),be(o,"click",a[7])],c=!0)},p(D,[S]){const p={};S&1&&(p.parent_node=D[0]),S&2&&(p.data=D[1]),!s&&S&8&&(s=!0,p.show_artifacts_modal=D[3],Et(()=>s=!1)),t.$set(p);const R={};S&1&&(R.parent_node=D[0]),S&2&&(R.data=D[1]),!_&&S&4&&(_=!0,R.show_defend_modal=D[2],Et(()=>_=!1)),d.$set(R)},i(D){m||(de(t.$$.fragment,D),de(d.$$.fragment,D),m=!0)},o(D){me(t.$$.fragment,D),me(d.$$.fragment,D),m=!1},d(D){D&&(i(e),i(l),i(n),i(o),i(h)),Te(t,D),Te(d,D),c=!1,mt(u)}}}function mc(a,e,r){let l,t;var s=this&&this.__awaiter||function(u,E,g,P){function O(D){return D instanceof g?D:new g(function(S){S(D)})}return new(g||(g=Promise))(function(D,S){function p(F){try{C(P.next(F))}catch(N){S(N)}}function R(F){try{C(P.throw(F))}catch(N){S(N)}}function C(F){F.done?D(F.value):O(F.value).then(p,R)}C((P=P.apply(u,E||[])).next())})};let{node:n}=e,o;function f(u){alert(u),r(3,l=!1),r(2,t=!1)}function h(u){return s(this,void 0,void 0,function*(){if(u.data.d3f_class&&u.data.d3f_class.includes("d3f:")){const E=u.data.d3f_class,g=yield fetch(`/api/offensive-technique/attack/${E.replace("d3f:","")}.json`),P=yield g.json();if(g.status!=200||P.description["@graph"].length==0)f(`Offensive Technique: "${E.replace("d3f:","")}" not found in ontology`);else return P}else f("Please specify a D3FEND Class for this node to enable inferential mapping")})}const d=async()=>{r(1,o=null),r(3,l=!0),r(1,o=await h(n))};function _(u){l=u,r(3,l)}const m=async()=>{r(1,o=null),r(2,t=!0),r(1,o=await h(n))};function c(u){t=u,r(2,t)}return a.$$set=u=>{"node"in u&&r(0,n=u.node)},r(3,l=!1),r(2,t=!1),[n,o,t,l,h,d,_,m,c]}class pc extends at{constructor(e){super(),st(this,e,mc,vc,tt,{node:0})}}function Za(a){let e,r;return e=new pc({props:{node:a[1]}}),{c(){Re(e.$$.fragment)},l(l){Oe(e.$$.fragment,l)},m(l,t){Ie(e,l,t),r=!0},p(l,t){const s={};t&2&&(s.node=l[1]),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){me(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function Wa(a){let e,r;return e=new Ju({props:{node:a[1]}}),{c(){Re(e.$$.fragment)},l(l){Oe(e.$$.fragment,l)},m(l,t){Ie(e,l,t),r=!0},p(l,t){const s={};t&2&&(s.node=l[1]),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){me(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function xa(a){let e,r;return e=new Su({props:{node:a[1]}}),{c(){Re(e.$$.fragment)},l(l){Oe(e.$$.fragment,l)},m(l,t){Ie(e,l,t),r=!0},p(l,t){const s={};t&2&&(s.node=l[1]),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){me(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function gc(a){let e,r,l,t,s,n,o,f,h,d,_="duplicate",m,c,u="delete",E,g,P,O,D=a[1]&&a[1].type=="attackSelectorNode"&&Za(a),S=a[1]&&a[1].type=="countermeasureSelectorNode"&&Wa(a),p=a[1]&&a[1].type=="artifactSelectorNode"&&xa(a);return{c(){e=M("div"),r=M("p"),l=M("small"),t=k("node: "),s=k(a[0]),n=ee(),D&&D.c(),o=ee(),S&&S.c(),f=ee(),p&&p.c(),h=ee(),d=M("button"),d.textContent=_,m=ee(),c=M("button"),c.textContent=u,this.h()},l(R){e=B(R,"DIV",{style:!0,class:!0});var C=pe(e);r=B(C,"P",{style:!0});var F=pe(r);l=B(F,"SMALL",{});var N=pe(l);t=y(N,"node: "),s=y(N,a[0]),N.forEach(i),F.forEach(i),n=te(C),D&&D.l(C),o=te(C),S&&S.l(C),f=te(C),p&&p.l(C),h=te(C),d=B(C,"BUTTON",{class:!0,"data-svelte-h":!0}),we(d)!=="svelte-1spbqw1"&&(d.textContent=_),m=te(C),c=B(C,"BUTTON",{class:!0,"data-svelte-h":!0}),we(c)!=="svelte-1pyou7z"&&(c.textContent=u),C.forEach(i),this.h()},h(){Ze(r,"margin","0.5em"),W(d,"class","svelte-1o17oqa"),W(c,"class","svelte-1o17oqa"),W(e,"style",E=a[2]()),W(e,"class","context-menu svelte-1o17oqa")},m(R,C){v(R,e,C),L(e,r),L(r,l),L(l,t),L(l,s),L(e,n),D&&D.m(e,null),L(e,o),S&&S.m(e,null),L(e,f),p&&p.m(e,null),L(e,h),L(e,d),L(e,m),L(e,c),g=!0,P||(O=[be(d,"click",a[5]),be(c,"click",a[6])],P=!0)},p(R,[C]){(!g||C&1)&&Y(s,R[0]),R[1]&&R[1].type=="attackSelectorNode"?D?(D.p(R,C),C&2&&de(D,1)):(D=Za(R),D.c(),de(D,1),D.m(e,o)):D&&(gt(),me(D,1,1,()=>{D=null}),bt()),R[1]&&R[1].type=="countermeasureSelectorNode"?S?(S.p(R,C),C&2&&de(S,1)):(S=Wa(R),S.c(),de(S,1),S.m(e,f)):S&&(gt(),me(S,1,1,()=>{S=null}),bt()),R[1]&&R[1].type=="artifactSelectorNode"?p?(p.p(R,C),C&2&&de(p,1)):(p=xa(R),p.c(),de(p,1),p.m(e,h)):p&&(gt(),me(p,1,1,()=>{p=null}),bt()),(!g||C&4&&E!==(E=R[2]()))&&W(e,"style",E)},i(R){g||(de(D),de(S),de(p),g=!0)},o(R){me(D),me(S),me(p),g=!1},d(R){R&&i(e),D&&D.d(),S&&S.d(),p&&p.d(),P=!1,mt(O)}}}function bc(a,e,r){let l,t,s,n,{id:o}=e,{top:f}=e,{left:h}=e,{right:d}=e,{bottom:_}=e;const m=qt();Je(a,m,g=>r(11,n=g));const c=zt();Je(a,c,g=>r(12,s=g));function u(){const g=n.find(P=>P.id===o);if(g){console.log(g);let P=structuredClone(g);P.id=`${o}-copy${Math.random()}`.slice(-24),P.position={x:g.position.x,y:g.position.y+50},er(m,n=[...n,P],n)}}function E(){er(m,n=n.filter(g=>g.id!==o),n),er(c,s=s.filter(g=>g.source!==o&&g.target!==o),s),m.set(n),c.set(s)}return a.$$set=g=>{"id"in g&&r(0,o=g.id),"top"in g&&r(7,f=g.top),"left"in g&&r(8,h=g.left),"right"in g&&r(9,d=g.right),"bottom"in g&&r(10,_=g.bottom)},a.$$.update=()=>{a.$$.dirty&2049&&r(1,l=n.find(g=>g.id===o)),a.$$.dirty&1920&&r(2,t=()=>{let g="";return f&&(g+=`top:${f}px;`),_&&(g+=`bottom:${_}px;`),h&&(g+=`left:${h}px;`),d&&(g+=`right:${d}px;`),g})},[o,l,t,m,c,u,E,f,h,d,_,n]}class Ec extends at{constructor(e){super(),st(this,e,bc,gc,tt,{id:0,top:7,left:8,right:9,bottom:10})}}function es(a,e,r){const l=a.slice();return l[12]=e[r],l}function ts(a){let e,r,l,t,s,n,o,f,h,d,_,m,c;const u=a[8].default,E=ot(u,a,a[7],null);let g=Ne(a[3]),P=[];for(let O=0;O<g.length;O+=1)P[O]=rs(es(a,g,O));return{c(){e=M("div"),r=M("div"),l=M("h2"),t=k(a[1]),s=ee(),n=M("p"),o=k(a[2]),f=ee(),E&&E.c(),h=ee(),d=M("div");for(let O=0;O<P.length;O+=1)P[O].c();this.h()},l(O){e=B(O,"DIV",{class:!0});var D=pe(e);r=B(D,"DIV",{class:!0});var S=pe(r);l=B(S,"H2",{});var p=pe(l);t=y(p,a[1]),p.forEach(i),s=te(S),n=B(S,"P",{});var R=pe(n);o=y(R,a[2]),R.forEach(i),f=te(S),E&&E.l(S),h=te(S),d=B(S,"DIV",{class:!0});var C=pe(d);for(let F=0;F<P.length;F+=1)P[F].l(C);C.forEach(i),S.forEach(i),D.forEach(i),this.h()},h(){W(d,"class","options svelte-zbcx3u"),W(r,"class","modal-content center text-center svelte-zbcx3u"),W(e,"class","modal-overlay svelte-zbcx3u")},m(O,D){v(O,e,D),L(e,r),L(r,l),L(l,t),L(r,s),L(r,n),L(n,o),L(r,f),E&&E.m(r,null),L(r,h),L(r,d);for(let S=0;S<P.length;S+=1)P[S]&&P[S].m(d,null);_=!0,m||(c=[be(r,"click",Rt(a[9])),be(e,"click",a[4])],m=!0)},p(O,D){if((!_||D&2)&&Y(t,O[1]),(!_||D&4)&&Y(o,O[2]),E&&E.p&&(!_||D&128)&&it(E,u,O,O[7],_?ut(u,O[7],D,null):ft(O[7]),null),D&40){g=Ne(O[3]);let S;for(S=0;S<g.length;S+=1){const p=es(O,g,S);P[S]?P[S].p(p,D):(P[S]=rs(p),P[S].c(),P[S].m(d,null))}for(;S<P.length;S+=1)P[S].d(1);P.length=g.length}},i(O){_||(de(E,O),_=!0)},o(O){me(E,O),_=!1},d(O){O&&i(e),E&&E.d(O),Qe(P,O),m=!1,mt(c)}}}function rs(a){let e,r=a[12].label+"",l,t,s,n;function o(){return a[10](a[12])}return{c(){e=M("button"),l=k(r),t=ee(),this.h()},l(f){e=B(f,"BUTTON",{class:!0});var h=pe(e);l=y(h,r),t=te(h),h.forEach(i),this.h()},h(){W(e,"class","svelte-zbcx3u")},m(f,h){v(f,e,h),L(e,l),L(e,t),s||(n=be(e,"click",o),s=!0)},p(f,h){a=f,h&8&&r!==(r=a[12].label+"")&&Y(l,r)},d(f){f&&i(e),s=!1,n()}}}function Pc(a){let e,r,l=a[0]&&ts(a);return{c(){l&&l.c(),e=Ee()},l(t){l&&l.l(t),e=Ee()},m(t,s){l&&l.m(t,s),v(t,e,s),r=!0},p(t,[s]){t[0]?l?(l.p(t,s),s&1&&de(l,1)):(l=ts(t),l.c(),de(l,1),l.m(e.parentNode,e)):l&&(gt(),me(l,1,1,()=>{l=null}),bt())},i(t){r||(de(l),r=!0)},o(t){me(l),r=!1},d(t){t&&i(e),l&&l.d(t)}}}function wc(a,e,r){let{$$slots:l={},$$scope:t}=e,{is_open:s=!1}=e,{title:n=""}=e,{content:o=""}=e,{imageSrc:f=""}=e,{options:h=[]}=e;const d=sr();function _(){r(0,s=!1)}function m(E){d("optionSelected",E),_()}function c(E){Ot.call(this,a,E)}const u=E=>m(E);return a.$$set=E=>{"is_open"in E&&r(0,s=E.is_open),"title"in E&&r(1,n=E.title),"content"in E&&r(2,o=E.content),"imageSrc"in E&&r(6,f=E.imageSrc),"options"in E&&r(3,h=E.options),"$$scope"in E&&r(7,t=E.$$scope)},[s,n,o,h,_,m,f,t,l,c,u]}class ls extends at{constructor(e){super(),st(this,e,wc,Pc,tt,{is_open:0,title:1,content:2,imageSrc:6,options:3})}}function as(a,e,r){const l=a.slice();return l[11]=e[r],l}function ss(a){let e,r,l,t,s,n,o,f,h,d,_,m,c;const u=a[7].default,E=ot(u,a,a[6],null);let g=Ne(a[3]),P=[];for(let O=0;O<g.length;O+=1)P[O]=ns(as(a,g,O));return{c(){e=M("div"),r=M("div"),l=M("h2"),t=k(a[1]),s=ee(),n=M("p"),o=k(a[2]),f=ee(),E&&E.c(),h=ee(),d=M("div");for(let O=0;O<P.length;O+=1)P[O].c();this.h()},l(O){e=B(O,"DIV",{class:!0});var D=pe(e);r=B(D,"DIV",{class:!0});var S=pe(r);l=B(S,"H2",{});var p=pe(l);t=y(p,a[1]),p.forEach(i),s=te(S),n=B(S,"P",{});var R=pe(n);o=y(R,a[2]),R.forEach(i),f=te(S),E&&E.l(S),h=te(S),d=B(S,"DIV",{class:!0});var C=pe(d);for(let F=0;F<P.length;F+=1)P[F].l(C);C.forEach(i),S.forEach(i),D.forEach(i),this.h()},h(){W(d,"class","options svelte-2iwk9m"),W(r,"class","modal-content center text-center svelte-2iwk9m"),W(e,"class","modal-overlay svelte-2iwk9m")},m(O,D){v(O,e,D),L(e,r),L(r,l),L(l,t),L(r,s),L(r,n),L(n,o),L(r,f),E&&E.m(r,null),L(r,h),L(r,d);for(let S=0;S<P.length;S+=1)P[S]&&P[S].m(d,null);_=!0,m||(c=[be(r,"click",Rt(a[8])),be(e,"click",a[4])],m=!0)},p(O,D){if((!_||D&2)&&Y(t,O[1]),(!_||D&4)&&Y(o,O[2]),E&&E.p&&(!_||D&64)&&it(E,u,O,O[6],_?ut(u,O[6],D,null):ft(O[6]),null),D&40){g=Ne(O[3]);let S;for(S=0;S<g.length;S+=1){const p=as(O,g,S);P[S]?P[S].p(p,D):(P[S]=ns(p),P[S].c(),P[S].m(d,null))}for(;S<P.length;S+=1)P[S].d(1);P.length=g.length}},i(O){_||(de(E,O),_=!0)},o(O){me(E,O),_=!1},d(O){O&&i(e),E&&E.d(O),Qe(P,O),m=!1,mt(c)}}}function ns(a){let e,r=a[11].label+"",l,t,s,n;function o(){return a[9](a[11])}return{c(){e=M("button"),l=k(r),t=ee(),this.h()},l(f){e=B(f,"BUTTON",{class:!0});var h=pe(e);l=y(h,r),t=te(h),h.forEach(i),this.h()},h(){W(e,"class","svelte-2iwk9m")},m(f,h){v(f,e,h),L(e,l),L(e,t),s||(n=be(e,"click",o),s=!0)},p(f,h){a=f,h&8&&r!==(r=a[11].label+"")&&Y(l,r)},d(f){f&&i(e),s=!1,n()}}}function kc(a){let e,r,l=a[0]&&ss(a);return{c(){l&&l.c(),e=Ee()},l(t){l&&l.l(t),e=Ee()},m(t,s){l&&l.m(t,s),v(t,e,s),r=!0},p(t,[s]){t[0]?l?(l.p(t,s),s&1&&de(l,1)):(l=ss(t),l.c(),de(l,1),l.m(e.parentNode,e)):l&&(gt(),me(l,1,1,()=>{l=null}),bt())},i(t){r||(de(l),r=!0)},o(t){me(l),r=!1},d(t){t&&i(e),l&&l.d(t)}}}function yc(a,e,r){let{$$slots:l={},$$scope:t}=e,{is_open:s=!1}=e,{title:n=""}=e,{content:o=""}=e,{options:f=[{label:"Cancel",value:"cancel"}]}=e;const h=sr();function d(){r(0,s=!1)}function _(u){h("model_shared",u),d()}function m(u){Ot.call(this,a,u)}const c=u=>_(u);return a.$$set=u=>{"is_open"in u&&r(0,s=u.is_open),"title"in u&&r(1,n=u.title),"content"in u&&r(2,o=u.content),"options"in u&&r(3,f=u.options),"$$scope"in u&&r(6,t=u.$$scope)},[s,n,o,f,d,_,t,l,m,c]}class Sc extends at{constructor(e){super(),st(this,e,yc,kc,tt,{is_open:0,title:1,content:2,options:3})}}function Dc(a){let e,r="❐";return{c(){e=M("icon"),e.textContent=r,this.h()},l(l){e=B(l,"ICON",{title:!0,"data-svelte-h":!0}),we(e)!=="svelte-10dwkvf"&&(e.textContent=r),this.h()},h(){W(e,"title","Full Screen Mode")},m(l,t){v(l,e,t)},d(l){l&&i(e)}}}function Cc(a){let e,r="⧉ Exit Fullscreen";return{c(){e=M("icon"),e.textContent=r,this.h()},l(l){e=B(l,"ICON",{title:!0,"data-svelte-h":!0}),we(e)!=="svelte-2wnxo3"&&(e.textContent=r),this.h()},h(){W(e,"title","Exit Full Screen Mode")},m(l,t){v(l,e,t)},d(l){l&&i(e)}}}function Nc(a){let e,r,l,t,s,n;function o(m,c){return m[1]?Cc:Dc}let f=o(a),h=f(a);const d=a[4].default,_=ot(d,a,a[3],null);return{c(){e=M("div"),r=M("button"),h.c(),l=ee(),_&&_.c(),this.h()},l(m){e=B(m,"DIV",{id:!0,class:!0});var c=pe(e);r=B(c,"BUTTON",{class:!0});var u=pe(r);h.l(u),u.forEach(i),l=te(c),_&&_.l(c),c.forEach(i),this.h()},h(){W(r,"class","fullscreen-toggle svelte-1jzyezl"),ur(r,"left",a[0]==="left"),ur(r,"right",a[0]==="right"),W(e,"id","fullscreen-parent"),W(e,"class","svelte-1jzyezl")},m(m,c){v(m,e,c),L(e,r),h.m(r,null),L(e,l),_&&_.m(e,null),t=!0,s||(n=be(r,"click",a[2]),s=!0)},p(m,[c]){f!==(f=o(m))&&(h.d(1),h=f(m),h&&(h.c(),h.m(r,null))),(!t||c&1)&&ur(r,"left",m[0]==="left"),(!t||c&1)&&ur(r,"right",m[0]==="right"),_&&_.p&&(!t||c&8)&&it(_,d,m,m[3],t?ut(d,m[3],c,null):ft(m[3]),null)},i(m){t||(de(_,m),t=!0)},o(m){me(_,m),t=!1},d(m){m&&i(e),h.d(),_&&_.d(m),s=!1,n()}}}function Rc(a,e,r){let{$$slots:l={},$$scope:t}=e,{position:s="right"}=e,n=!1,o;Qr(()=>(o=document.getElementById("fullscreen-parent"),document.addEventListener("fullscreenchange",f),()=>{document.removeEventListener("fullscreenchange",f)}));function f(){r(1,n=!!document.fullscreenElement)}async function h(){if(n)try{await document.exitFullscreen()}catch(d){console.error("Error attempting to exit fullscreen:",d)}else try{await o.requestFullscreen()}catch(d){console.error("Error attempting to enable fullscreen:",d)}}return a.$$set=d=>{"position"in d&&r(0,s=d.position),"$$scope"in d&&r(3,t=d.$$scope)},[s,n,h,t,l]}class Oc extends at{constructor(e){super(),st(this,e,Rc,Nc,tt,{position:0})}}function Ic(a){let e,r,l,t,s="Action",n,o,f="Event",h,d,_="Attack",m,c,u="Countermeasure",E,g,P,O="Endurant",D,S,p="Artifact",R,C,F="Information",N,T,b="Agent",I,w,A,X="State",oe,le,G="Vulnerability",Q,V,z="Condition",Z,q,J,ye="Meta",Pe,ae,ve="Note",ce,ge;return{c(){e=M("aside"),r=M("div"),l=M("div"),t=M("div"),t.textContent=s,n=ee(),o=M("div"),o.textContent=f,h=ee(),d=M("div"),d.textContent=_,m=ee(),c=M("div"),c.textContent=u,E=ee(),g=M("div"),P=M("div"),P.textContent=O,D=ee(),S=M("div"),S.textContent=p,R=ee(),C=M("div"),C.textContent=F,N=ee(),T=M("div"),T.textContent=b,I=ee(),w=M("div"),A=M("div"),A.textContent=X,oe=ee(),le=M("div"),le.textContent=G,Q=ee(),V=M("div"),V.textContent=z,Z=ee(),q=M("div"),J=M("div"),J.textContent=ye,Pe=ee(),ae=M("div"),ae.textContent=ve,this.h()},l(Se){e=B(Se,"ASIDE",{class:!0});var Ae=pe(e);r=B(Ae,"DIV",{class:!0});var x=pe(r);l=B(x,"DIV",{class:!0});var j=pe(l);t=B(j,"DIV",{class:!0,"data-svelte-h":!0}),we(t)!=="svelte-1yk6dej"&&(t.textContent=s),n=te(j),o=B(j,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),we(o)!=="svelte-1hxo6k5"&&(o.textContent=f),h=te(j),d=B(j,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),we(d)!=="svelte-1m30nhf"&&(d.textContent=_),m=te(j),c=B(j,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),we(c)!=="svelte-xvztkt"&&(c.textContent=u),j.forEach(i),E=te(x),g=B(x,"DIV",{class:!0});var ie=pe(g);P=B(ie,"DIV",{class:!0,"data-svelte-h":!0}),we(P)!=="svelte-13fxc4g"&&(P.textContent=O),D=te(ie),S=B(ie,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),we(S)!=="svelte-p6iki9"&&(S.textContent=p),R=te(ie),C=B(ie,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),we(C)!=="svelte-gfucir"&&(C.textContent=F),N=te(ie),T=B(ie,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),we(T)!=="svelte-1k1k96h"&&(T.textContent=b),ie.forEach(i),I=te(x),w=B(x,"DIV",{class:!0});var qe=pe(w);A=B(qe,"DIV",{class:!0,"data-svelte-h":!0}),we(A)!=="svelte-82roym"&&(A.textContent=X),oe=te(qe),le=B(qe,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),we(le)!=="svelte-tj9qj"&&(le.textContent=G),Q=te(qe),V=B(qe,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),we(V)!=="svelte-1mwlumu"&&(V.textContent=z),qe.forEach(i),Z=te(x),q=B(x,"DIV",{class:!0});var Ue=pe(q);J=B(Ue,"DIV",{class:!0,"data-svelte-h":!0}),we(J)!=="svelte-7d6fsa"&&(J.textContent=ye),Pe=te(Ue),ae=B(Ue,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),we(ae)!=="svelte-18cgcvt"&&(ae.textContent=ve),Ue.forEach(i),x.forEach(i),Ae.forEach(i),this.h()},h(){W(t,"class","text-center font-medium"),W(o,"class","actionNode example-node svelte-1iswza3"),W(o,"draggable",!0),Ze(o,"text-align","center"),Ze(o,"background","white"),W(o,"title","d3f:Event"),W(d,"class","attackSelectorNode example-node svelte-1iswza3"),W(d,"draggable",!0),Ze(d,"text-align","center"),Ze(d,"background","#FFD0D0"),W(d,"title","d3f:OffensiveTechnique"),W(c,"class","countermeasureSelectorNode example-node svelte-1iswza3"),W(c,"draggable",!0),Ze(c,"text-align","center"),Ze(c,"background","#d6eaff"),W(c,"title","d3f:DefensiveTechnique"),W(l,"class","nodes-column svelte-1iswza3"),W(P,"class","text-center font-medium"),W(S,"class","artifactSelectorNode art-node example-node svelte-1iswza3"),W(S,"draggable",!0),Ze(S,"text-align","center"),Ze(S,"background","#fff4dd"),W(C,"class","informationSelectorNode example-node svelte-1iswza3"),W(C,"draggable",!0),Ze(C,"text-align","center"),Ze(C,"background","#e8f4ea"),W(T,"class","agentSelectorNode example-node svelte-1iswza3"),W(T,"draggable",!0),Ze(T,"text-align","center"),Ze(T,"background","#f0e6e6"),W(g,"class","nodes-column svelte-1iswza3"),W(A,"class","text-center font-medium"),W(le,"class","vulnerabilitySelectorNode example-node svelte-1iswza3"),W(le,"draggable",!0),Ze(le,"text-align","center"),Ze(le,"background","#f9d999"),W(V,"class","conditionDefinitionNode example-node svelte-1iswza3"),W(V,"draggable",!0),Ze(V,"text-align","center"),Ze(V,"background","#ece6ff"),W(w,"class","nodes-column svelte-1iswza3"),W(J,"class","text-center font-medium"),W(ae,"class","NoteNode example-node svelte-1iswza3"),W(ae,"draggable",!0),Ze(ae,"text-align","center"),Ze(ae,"background","lightgoldenrodyellow"),W(q,"class","nodes-column svelte-1iswza3"),W(r,"class","nodes-container svelte-1iswza3"),W(e,"class","svelte-1iswza3")},m(Se,Ae){v(Se,e,Ae),L(e,r),L(r,l),L(l,t),L(l,n),L(l,o),L(l,h),L(l,d),L(l,m),L(l,c),L(r,E),L(r,g),L(g,P),L(g,D),L(g,S),L(g,R),L(g,C),L(g,N),L(g,T),L(r,I),L(r,w),L(w,A),L(w,oe),L(w,le),L(w,Q),L(w,V),L(r,Z),L(r,q),L(q,J),L(q,Pe),L(q,ae),ce||(ge=[be(o,"dragstart",a[1]),be(d,"dragstart",a[2]),be(c,"dragstart",a[3]),be(S,"dragstart",a[4]),be(C,"dragstart",a[5]),be(T,"dragstart",a[6]),be(le,"dragstart",a[7]),be(V,"dragstart",a[8]),be(ae,"dragstart",a[9])],ce=!0)},p:ke,i:ke,o:ke,d(Se){Se&&i(e),ce=!1,mt(ge)}}}function Tc(a){const e=(_,m)=>{if(!_.dataTransfer)return null;_.dataTransfer.setData("application/svelteflow",m),_.dataTransfer.effectAllowed="move"};return[e,_=>e(_,"eventNode"),_=>e(_,"attackSelectorNode"),_=>e(_,"countermeasureSelectorNode"),_=>e(_,"artifactSelectorNode"),_=>e(_,"informationSelectorNode"),_=>e(_,"agentSelectorNode"),_=>e(_,"vulnerabilitySelectorNode"),_=>e(_,"conditionDefinitionNode"),_=>e(_,"noteNode")]}class Ac extends at{constructor(e){super(),st(this,e,Tc,Ic,tt,{})}}function os(a,e,r){const l=a.slice();return l[7]=e[r],l}function is(a){let e,r=Ne(a[2]),l=[];for(let t=0;t<r.length;t+=1)l[t]=fs(os(a,r,t));return{c(){e=M("div");for(let t=0;t<l.length;t+=1)l[t].c();this.h()},l(t){e=B(t,"DIV",{class:!0});var s=pe(e);for(let n=0;n<l.length;n+=1)l[n].l(s);s.forEach(i),this.h()},h(){W(e,"class","file-list svelte-9u10j")},m(t,s){v(t,e,s);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(e,null)},p(t,s){if(s&20){r=Ne(t[2]);let n;for(n=0;n<r.length;n+=1){const o=os(t,r,n);l[n]?l[n].p(o,s):(l[n]=fs(o),l[n].c(),l[n].m(e,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&i(e),Qe(l,t)}}}function fs(a){let e,r=a[7].name+"",l,t,s=a[7].nodeCount+"",n,o,f=a[7].edgeCount+"",h,d,_,m;function c(){return a[5](a[7])}return{c(){e=M("div"),l=k(r),t=k(" ("),n=k(s),o=k(" nodes, "),h=k(f),d=k(` edges)
          `),this.h()},l(u){e=B(u,"DIV",{class:!0});var E=pe(e);l=y(E,r),t=y(E," ("),n=y(E,s),o=y(E," nodes, "),h=y(E,f),d=y(E,` edges)
          `),E.forEach(i),this.h()},h(){W(e,"class","file-item svelte-9u10j")},m(u,E){v(u,e,E),L(e,l),L(e,t),L(e,n),L(e,o),L(e,h),L(e,d),_||(m=be(e,"click",c),_=!0)},p(u,E){a=u,E&4&&r!==(r=a[7].name+"")&&Y(l,r),E&4&&s!==(s=a[7].nodeCount+"")&&Y(n,s),E&4&&f!==(f=a[7].edgeCount+"")&&Y(h,f)},d(u){u&&i(e),_=!1,m()}}}function Fc(a){let e,r,l,t,s,n,o=a[1]&&is(a);return{c(){e=M("div"),r=M("button"),l=k(a[0]),t=ee(),o&&o.c(),this.h()},l(f){e=B(f,"DIV",{class:!0});var h=pe(e);r=B(h,"BUTTON",{class:!0});var d=pe(r);l=y(d,a[0]),d.forEach(i),t=te(h),o&&o.l(h),h.forEach(i),this.h()},h(){W(r,"class","svelte-9u10j"),W(e,"class","pick-list-container svelte-9u10j")},m(f,h){v(f,e,h),L(e,r),L(r,l),L(e,t),o&&o.m(e,null),s||(n=be(r,"click",a[3]),s=!0)},p(f,[h]){h&1&&Y(l,f[0]),f[1]?o?o.p(f,h):(o=is(f),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i:ke,o:ke,d(f){f&&i(e),o&&o.d(),s=!1,n()}}}async function Lc(){return await(await fetch("/cad/examples.json")).json()}function jc(a,e,r){const l=sr();let t=!1,{selectedFile:s="Example Graphs"}=e,n=[];function o(){r(1,t=!t)}function f(d){r(0,s=d),r(1,t=!1),l("fileSelected",d)}Qr(async()=>{r(2,n=await Lc())});const h=d=>f(d.name);return a.$$set=d=>{"selectedFile"in d&&r(0,s=d.selectedFile)},[s,t,n,o,f,h]}class qc extends at{constructor(e){super(),st(this,e,jc,Fc,tt,{selectedFile:0})}}function us(a){let e,r,l,t,s;return{c(){e=dl("path"),r=ee(),l=dl("circle"),this.h()},l(n){e=hl(n,"path",{fill:!0,"stroke-width":!0,class:!0,stroke:!0,d:!0}),pe(e).forEach(i),r=te(n),l=hl(n,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),pe(l).forEach(i),this.h()},h(){W(e,"fill","transparent"),W(e,"stroke-width",2.5),W(e,"class","animated"),W(e,"stroke","black"),W(e,"d",a[2]),W(l,"cx",t=a[0].tx),W(l,"cy",s=a[0].ty),W(l,"r",3),W(l,"stroke","black"),W(l,"stroke-width",1.5)},m(n,o){v(n,e,o),v(n,r,o),v(n,l,o)},p(n,o){o&4&&W(e,"d",n[2]),o&1&&t!==(t=n[0].tx)&&W(l,"cx",t),o&1&&s!==(s=n[0].ty)&&W(l,"cy",s)},d(n){n&&(i(e),i(r),i(l))}}}function zc(a){let e,r=a[1].inProgress&&us(a);return{c(){r&&r.c(),e=Ee()},l(l){r&&r.l(l),e=Ee()},m(l,t){r&&r.m(l,t),v(l,e,t)},p(l,[t]){l[1].inProgress?r?r.p(l,t):(r=us(l),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:ke,o:ke,d(l){l&&i(e),r&&r.d(l)}}}function Uc(a,e,r){let l;const t=gn();Je(a,t,o=>r(1,l=o));let s,n;return a.$$.update=()=>{if(a.$$.dirty&3){const o=structuredClone(l.fromNode);l.isValid?(r(0,n=ul(l.fromNode,l.toNode)),r(2,s=gl({sourceX:n.sx,sourceY:n.sy,sourcePosition:n.sourcePos,targetX:n.tx,targetY:n.ty,targetPosition:n.targetPos})[0])):(o.id="-1",o.measured={width:1,height:1},o.position={x:l.to.x,y:l.to.y},o.internals.positionAbsolute={x:l.to.x,y:l.to.y},r(0,n=ul(l.fromNode,o)),r(2,s=gl({sourceX:n.sx,sourceY:n.sy,sourcePosition:n.sourcePos,targetX:n.tx,targetY:n.ty,targetPosition:n.targetPos})[0]))}},[n,l,s,t]}class Vc extends at{constructor(e){super(),st(this,e,Uc,zc,tt,{})}}function cs(a,e,r){const l=a.slice();return l[11]=e[r],l}function ds(a){let e,r,l,t,s,n,o,f,h,d,_,m,c;const u=a[7].default,E=ot(u,a,a[6],null);let g=Ne(a[3]),P=[];for(let O=0;O<g.length;O+=1)P[O]=hs(cs(a,g,O));return{c(){e=M("div"),r=M("div"),l=M("h2"),t=k(a[1]),s=ee(),n=M("p"),o=k(a[2]),f=ee(),E&&E.c(),h=ee(),d=M("div");for(let O=0;O<P.length;O+=1)P[O].c();this.h()},l(O){e=B(O,"DIV",{class:!0});var D=pe(e);r=B(D,"DIV",{class:!0});var S=pe(r);l=B(S,"H2",{});var p=pe(l);t=y(p,a[1]),p.forEach(i),s=te(S),n=B(S,"P",{});var R=pe(n);o=y(R,a[2]),R.forEach(i),f=te(S),E&&E.l(S),h=te(S),d=B(S,"DIV",{class:!0});var C=pe(d);for(let F=0;F<P.length;F+=1)P[F].l(C);C.forEach(i),S.forEach(i),D.forEach(i),this.h()},h(){W(d,"class","options svelte-zbcx3u"),W(r,"class","modal-content center text-center svelte-zbcx3u"),W(e,"class","modal-overlay svelte-zbcx3u")},m(O,D){v(O,e,D),L(e,r),L(r,l),L(l,t),L(r,s),L(r,n),L(n,o),L(r,f),E&&E.m(r,null),L(r,h),L(r,d);for(let S=0;S<P.length;S+=1)P[S]&&P[S].m(d,null);_=!0,m||(c=[be(r,"click",Rt(a[8])),be(e,"click",a[4])],m=!0)},p(O,D){if((!_||D&2)&&Y(t,O[1]),(!_||D&4)&&Y(o,O[2]),E&&E.p&&(!_||D&64)&&it(E,u,O,O[6],_?ut(u,O[6],D,null):ft(O[6]),null),D&40){g=Ne(O[3]);let S;for(S=0;S<g.length;S+=1){const p=cs(O,g,S);P[S]?P[S].p(p,D):(P[S]=hs(p),P[S].c(),P[S].m(d,null))}for(;S<P.length;S+=1)P[S].d(1);P.length=g.length}},i(O){_||(de(E,O),_=!0)},o(O){me(E,O),_=!1},d(O){O&&i(e),E&&E.d(O),Qe(P,O),m=!1,mt(c)}}}function hs(a){let e,r=a[11].label+"",l,t,s,n;function o(){return a[9](a[11])}return{c(){e=M("button"),l=k(r),t=ee(),this.h()},l(f){e=B(f,"BUTTON",{class:!0});var h=pe(e);l=y(h,r),t=te(h),h.forEach(i),this.h()},h(){W(e,"class","svelte-zbcx3u")},m(f,h){v(f,e,h),L(e,l),L(e,t),s||(n=be(e,"click",o),s=!0)},p(f,h){a=f,h&8&&r!==(r=a[11].label+"")&&Y(l,r)},d(f){f&&i(e),s=!1,n()}}}function Mc(a){let e,r,l=a[0]&&ds(a);return{c(){l&&l.c(),e=Ee()},l(t){l&&l.l(t),e=Ee()},m(t,s){l&&l.m(t,s),v(t,e,s),r=!0},p(t,[s]){t[0]?l?(l.p(t,s),s&1&&de(l,1)):(l=ds(t),l.c(),de(l,1),l.m(e.parentNode,e)):l&&(gt(),me(l,1,1,()=>{l=null}),bt())},i(t){r||(de(l),r=!0)},o(t){me(l),r=!1},d(t){t&&i(e),l&&l.d(t)}}}function Bc(a,e,r){let{$$slots:l={},$$scope:t}=e,{is_open:s=!1}=e,{title:n=""}=e,{content:o=""}=e,{options:f=[{label:"Cancel",value:"cancel"}]}=e;const h=sr();function d(){r(0,s=!1)}function _(u){h("close_button_modal",u),d()}function m(u){Ot.call(this,a,u)}const c=u=>_(u);return a.$$set=u=>{"is_open"in u&&r(0,s=u.is_open),"title"in u&&r(1,n=u.title),"content"in u&&r(2,o=u.content),"options"in u&&r(3,f=u.options),"$$scope"in u&&r(6,t=u.$$scope)},[s,n,o,f,d,_,t,l,m,c]}class $c extends at{constructor(e){super(),st(this,e,Bc,Mc,tt,{is_open:0,title:1,content:2,options:3})}}function _s(a,e,r){const l=a.slice();return l[24]=e[r],l[25]=e,l[26]=r,l}function vs(a,e,r){const l=a.slice();return l[27]=e[r],l[28]=e,l[26]=r,l}function ms(a,e,r){const l=a.slice();return l[29]=e[r],l[30]=e,l[26]=r,l}function ps(a){let e,r,l,t,s,n,o,f,h,d,_,m,c="Save",u,E,g=`.form-row {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
  }

  .form-row label {
    width: 200px;
    text-align: right;
    margin-right: 10px;
  }

  .form-row input,
  .form-row textarea {
    flex-grow: 1;
  }`,P,O,D=a[0]&&gs(a);return{c(){e=M("div"),r=M("div"),l=M("h2"),t=k(a[2]),s=ee(),n=M("p"),o=k(a[3]),f=ee(),h=M("form"),D&&D.c(),d=ee(),_=M("div"),m=M("button"),m.textContent=c,u=ee(),E=M("style"),E.textContent=g,this.h()},l(S){e=B(S,"DIV",{class:!0});var p=pe(e);r=B(p,"DIV",{class:!0});var R=pe(r);l=B(R,"H2",{});var C=pe(l);t=y(C,a[2]),C.forEach(i),s=te(R),n=B(R,"P",{});var F=pe(n);o=y(F,a[3]),F.forEach(i),f=te(R),h=B(R,"FORM",{});var N=pe(h);D&&D.l(N),d=te(N),_=B(N,"DIV",{class:!0});var T=pe(_);m=B(T,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),we(m)!=="svelte-ajsp9k"&&(m.textContent=c),T.forEach(i),N.forEach(i),u=te(R),E=B(R,"STYLE",{"data-svelte-h":!0}),we(E)!=="svelte-bu94yd"&&(E.textContent=g),R.forEach(i),p.forEach(i),this.h()},h(){W(m,"type","submit"),W(m,"class","svelte-k723th"),W(_,"class","options svelte-k723th"),W(r,"class","modal-content center text-center svelte-k723th"),W(e,"class","modal-overlay svelte-k723th")},m(S,p){v(S,e,p),L(e,r),L(r,l),L(l,t),L(r,s),L(r,n),L(n,o),L(r,f),L(r,h),D&&D.m(h,null),L(h,d),L(h,_),L(_,m),L(r,u),L(r,E),P||(O=[be(m,"click",a[5]),be(r,"click",Rt(a[11])),be(e,"click",a[4])],P=!0)},p(S,p){p&4&&Y(t,S[2]),p&8&&Y(o,S[3]),S[0]?D?D.p(S,p):(D=gs(S),D.c(),D.m(h,d)):D&&(D.d(1),D=null)},d(S){S&&i(e),D&&D.d(),P=!1,mt(O)}}}function gs(a){let e,r,l="Title:",t,s,n,o,f,h,d="+",_,m,c,u,E="+",g,P,O,D="Description:",S,p,R,C,F,N="Article:",T,b,I,w,A,X="D3FEND Version:",oe,le,G,Q,V="Get Current Version",z,Z,q,J="CAD Schema Version:",ye,Pe,ae,ve,ce,ge="Published Date:",Se,Ae,x,j,ie="Insert Current Time",qe,Ue,rt='<code class="right">Example Date-Time format: 2023-10-05T14:30:00.000Z</code><br/>',Me,_t,wt,$e,Ge="+",lt,At,yt=Ne(a[0].authors),Ye=[];for(let H=0;H<yt.length;H+=1)Ye[H]=bs(ms(a,yt,H));let Dt=Ne(a[0].orgs),Fe=[];for(let H=0;H<Dt.length;H+=1)Fe[H]=Es(vs(a,Dt,H));let fe=Ne(a[0].references),re=[];for(let H=0;H<fe.length;H+=1)re[H]=Ps(_s(a,fe,H));return{c(){e=M("div"),r=M("label"),r.textContent=l,t=ee(),s=M("input"),n=ee();for(let H=0;H<Ye.length;H+=1)Ye[H].c();o=ee(),f=M("div"),h=M("button"),h.textContent=d,_=ee();for(let H=0;H<Fe.length;H+=1)Fe[H].c();m=ee(),c=M("div"),u=M("button"),u.textContent=E,g=ee(),P=M("div"),O=M("label"),O.textContent=D,S=ee(),p=M("input"),R=ee(),C=M("div"),F=M("label"),F.textContent=N,T=ee(),b=M("textarea"),I=ee(),w=M("div"),A=M("label"),A.textContent=X,oe=ee(),le=M("input"),G=ee(),Q=M("button"),Q.textContent=V,z=ee(),Z=M("div"),q=M("label"),q.textContent=J,ye=ee(),Pe=M("input"),ae=ee(),ve=M("div"),ce=M("label"),ce.textContent=ge,Se=ee(),Ae=M("input"),x=ee(),j=M("button"),j.textContent=ie,qe=ee(),Ue=M("div"),Ue.innerHTML=rt,Me=ee();for(let H=0;H<re.length;H+=1)re[H].c();_t=ee(),wt=M("div"),$e=M("button"),$e.textContent=Ge,this.h()},l(H){e=B(H,"DIV",{class:!0});var ue=pe(e);r=B(ue,"LABEL",{for:!0,"data-svelte-h":!0}),we(r)!=="svelte-kpfkpc"&&(r.textContent=l),t=te(ue),s=B(ue,"INPUT",{id:!0}),ue.forEach(i),n=te(H);for(let Nt=0;Nt<Ye.length;Nt+=1)Ye[Nt].l(H);o=te(H),f=B(H,"DIV",{class:!0});var _e=pe(f);h=B(_e,"BUTTON",{class:!0,"data-svelte-h":!0}),we(h)!=="svelte-1uaie2g"&&(h.textContent=d),_e.forEach(i),_=te(H);for(let Nt=0;Nt<Fe.length;Nt+=1)Fe[Nt].l(H);m=te(H),c=B(H,"DIV",{class:!0});var je=pe(c);u=B(je,"BUTTON",{class:!0,"data-svelte-h":!0}),we(u)!=="svelte-1cs3ez1"&&(u.textContent=E),je.forEach(i),g=te(H),P=B(H,"DIV",{class:!0});var pt=pe(P);O=B(pt,"LABEL",{for:!0,"data-svelte-h":!0}),we(O)!=="svelte-1jjlhqk"&&(O.textContent=D),S=te(pt),p=B(pt,"INPUT",{id:!0}),pt.forEach(i),R=te(H),C=B(H,"DIV",{class:!0});var nt=pe(C);F=B(nt,"LABEL",{for:!0,"data-svelte-h":!0}),we(F)!=="svelte-pvmkb4"&&(F.textContent=N),T=te(nt),b=B(nt,"TEXTAREA",{id:!0}),pe(b).forEach(i),nt.forEach(i),I=te(H),w=B(H,"DIV",{class:!0});var It=pe(w);A=B(It,"LABEL",{for:!0,"data-svelte-h":!0}),we(A)!=="svelte-kepuyl"&&(A.textContent=X),oe=te(It),le=B(It,"INPUT",{id:!0}),G=te(It),Q=B(It,"BUTTON",{class:!0,"data-svelte-h":!0}),we(Q)!=="svelte-1ba12do"&&(Q.textContent=V),It.forEach(i),z=te(H),Z=B(H,"DIV",{class:!0});var Ct=pe(Z);q=B(Ct,"LABEL",{for:!0,"data-svelte-h":!0}),we(q)!=="svelte-120m1i5"&&(q.textContent=J),ye=te(Ct),Pe=B(Ct,"INPUT",{id:!0}),Ct.forEach(i),ae=te(H),ve=B(H,"DIV",{class:!0});var kt=pe(ve);ce=B(kt,"LABEL",{for:!0,"data-svelte-h":!0}),we(ce)!=="svelte-1wye32r"&&(ce.textContent=ge),Se=te(kt),Ae=B(kt,"INPUT",{id:!0}),x=te(kt),j=B(kt,"BUTTON",{class:!0,"data-svelte-h":!0}),we(j)!=="svelte-tkzxpc"&&(j.textContent=ie),kt.forEach(i),qe=te(H),Ue=B(H,"DIV",{class:!0,"data-svelte-h":!0}),we(Ue)!=="svelte-108zlq4"&&(Ue.innerHTML=rt),Me=te(H);for(let Nt=0;Nt<re.length;Nt+=1)re[Nt].l(H);_t=te(H),wt=B(H,"DIV",{class:!0});var $t=pe(wt);$e=B($t,"BUTTON",{class:!0,"data-svelte-h":!0}),we($e)!=="svelte-rcymu8"&&($e.textContent=Ge),$t.forEach(i),this.h()},h(){W(r,"for","title"),W(s,"id","title"),W(e,"class","form-row"),W(h,"class","svelte-k723th"),W(f,"class","form-row"),W(u,"class","svelte-k723th"),W(c,"class","form-row"),W(O,"for","description"),W(p,"id","description"),W(P,"class","form-row"),W(F,"for","article"),W(b,"id","article"),W(C,"class","form-row"),W(A,"for","d3fend-version"),W(le,"id","d3fend-version"),W(Q,"class","svelte-k723th"),W(w,"class","form-row"),W(q,"for","cad-data-version"),W(Pe,"id","cad-data-version"),W(Z,"class","form-row"),W(ce,"for","published-date"),W(Ae,"id","published-date"),W(j,"class","svelte-k723th"),W(ve,"class","form-row"),W(Ue,"class","form-row"),W($e,"class","svelte-k723th"),W(wt,"class","form-row")},m(H,ue){v(H,e,ue),L(e,r),L(e,t),L(e,s),et(s,a[0].title),v(H,n,ue);for(let _e=0;_e<Ye.length;_e+=1)Ye[_e]&&Ye[_e].m(H,ue);v(H,o,ue),v(H,f,ue),L(f,h),v(H,_,ue);for(let _e=0;_e<Fe.length;_e+=1)Fe[_e]&&Fe[_e].m(H,ue);v(H,m,ue),v(H,c,ue),L(c,u),v(H,g,ue),v(H,P,ue),L(P,O),L(P,S),L(P,p),et(p,a[0].description),v(H,R,ue),v(H,C,ue),L(C,F),L(C,T),L(C,b),et(b,a[0].article),v(H,I,ue),v(H,w,ue),L(w,A),L(w,oe),L(w,le),et(le,a[0].d3fend_version),L(w,G),L(w,Q),v(H,z,ue),v(H,Z,ue),L(Z,q),L(Z,ye),L(Z,Pe),et(Pe,a[0].cad_data_version),v(H,ae,ue),v(H,ve,ue),L(ve,ce),L(ve,Se),L(ve,Ae),et(Ae,a[0].published_date),L(ve,x),L(ve,j),v(H,qe,ue),v(H,Ue,ue),v(H,Me,ue);for(let _e=0;_e<re.length;_e+=1)re[_e]&&re[_e].m(H,ue);v(H,_t,ue),v(H,wt,ue),L(wt,$e),lt||(At=[be(s,"input",a[12]),be(h,"click",a[6]),be(u,"click",a[7]),be(p,"input",a[15]),be(b,"input",a[16]),be(le,"input",a[17]),be(Q,"click",a[9]),be(Pe,"input",a[18]),be(Ae,"input",a[19]),be(j,"click",a[20]),be($e,"click",a[8])],lt=!0)},p(H,ue){if(ue&1&&s.value!==H[0].title&&et(s,H[0].title),ue&1){yt=Ne(H[0].authors);let _e;for(_e=0;_e<yt.length;_e+=1){const je=ms(H,yt,_e);Ye[_e]?Ye[_e].p(je,ue):(Ye[_e]=bs(je),Ye[_e].c(),Ye[_e].m(o.parentNode,o))}for(;_e<Ye.length;_e+=1)Ye[_e].d(1);Ye.length=yt.length}if(ue&1){Dt=Ne(H[0].orgs);let _e;for(_e=0;_e<Dt.length;_e+=1){const je=vs(H,Dt,_e);Fe[_e]?Fe[_e].p(je,ue):(Fe[_e]=Es(je),Fe[_e].c(),Fe[_e].m(m.parentNode,m))}for(;_e<Fe.length;_e+=1)Fe[_e].d(1);Fe.length=Dt.length}if(ue&1&&p.value!==H[0].description&&et(p,H[0].description),ue&1&&et(b,H[0].article),ue&1&&le.value!==H[0].d3fend_version&&et(le,H[0].d3fend_version),ue&1&&Pe.value!==H[0].cad_data_version&&et(Pe,H[0].cad_data_version),ue&1&&Ae.value!==H[0].published_date&&et(Ae,H[0].published_date),ue&1){fe=Ne(H[0].references);let _e;for(_e=0;_e<fe.length;_e+=1){const je=_s(H,fe,_e);re[_e]?re[_e].p(je,ue):(re[_e]=Ps(je),re[_e].c(),re[_e].m(_t.parentNode,_t))}for(;_e<re.length;_e+=1)re[_e].d(1);re.length=fe.length}},d(H){H&&(i(e),i(n),i(o),i(f),i(_),i(m),i(c),i(g),i(P),i(R),i(C),i(I),i(w),i(z),i(Z),i(ae),i(ve),i(qe),i(Ue),i(Me),i(_t),i(wt)),Qe(Ye,H),Qe(Fe,H),Qe(re,H),lt=!1,mt(At)}}}function bs(a){let e,r,l="Authors:",t,s,n,o;function f(){a[13].call(s,a[30],a[26])}return{c(){e=M("div"),r=M("label"),r.textContent=l,t=ee(),s=M("input"),this.h()},l(h){e=B(h,"DIV",{class:!0});var d=pe(e);r=B(d,"LABEL",{for:!0,"data-svelte-h":!0}),we(r)!=="svelte-1q1t6ag"&&(r.textContent=l),t=te(d),s=B(d,"INPUT",{id:!0}),d.forEach(i),this.h()},h(){W(r,"for","author-"+a[26]),W(s,"id","author-"+a[26]),W(e,"class","form-row")},m(h,d){v(h,e,d),L(e,r),L(e,t),L(e,s),et(s,a[29]),n||(o=be(s,"input",f),n=!0)},p(h,d){a=h,d&1&&s.value!==a[29]&&et(s,a[29])},d(h){h&&i(e),n=!1,o()}}}function Es(a){let e,r,l="Organization:",t,s,n,o;function f(){a[14].call(s,a[28],a[26])}return{c(){e=M("div"),r=M("label"),r.textContent=l,t=ee(),s=M("input"),this.h()},l(h){e=B(h,"DIV",{class:!0});var d=pe(e);r=B(d,"LABEL",{for:!0,"data-svelte-h":!0}),we(r)!=="svelte-1b09fki"&&(r.textContent=l),t=te(d),s=B(d,"INPUT",{id:!0}),d.forEach(i),this.h()},h(){W(r,"for","org-"+a[26]),W(s,"id","org-"+a[26]),W(e,"class","form-row")},m(h,d){v(h,e,d),L(e,r),L(e,t),L(e,s),et(s,a[27]),n||(o=be(s,"input",f),n=!0)},p(h,d){a=h,d&1&&s.value!==a[27]&&et(s,a[27])},d(h){h&&i(e),n=!1,o()}}}function Ps(a){let e,r,l="Reference:",t,s,n,o;function f(){a[21].call(s,a[25],a[26])}return{c(){e=M("div"),r=M("label"),r.textContent=l,t=ee(),s=M("input"),this.h()},l(h){e=B(h,"DIV",{class:!0});var d=pe(e);r=B(d,"LABEL",{for:!0,"data-svelte-h":!0}),we(r)!=="svelte-14qxm2v"&&(r.textContent=l),t=te(d),s=B(d,"INPUT",{id:!0}),d.forEach(i),this.h()},h(){W(r,"for","ref-"+a[26]),W(s,"id","ref-"+a[26]),W(e,"class","form-row")},m(h,d){v(h,e,d),L(e,r),L(e,t),L(e,s),et(s,a[24]),n||(o=be(s,"input",f),n=!0)},p(h,d){a=h,d&1&&s.value!==a[24]&&et(s,a[24])},d(h){h&&i(e),n=!1,o()}}}function Hc(a){let e,r=a[1]&&ps(a);return{c(){r&&r.c(),e=Ee()},l(l){r&&r.l(l),e=Ee()},m(l,t){r&&r.m(l,t),v(l,e,t)},p(l,[t]){l[1]?r?r.p(l,t):(r=ps(l),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:ke,o:ke,d(l){l&&i(e),r&&r.d(l)}}}function Qc(a,e,r){let{meta:l}=e,{is_open:t=!1}=e,{title:s="CAD Graph Metadata Editor"}=e,{content:n=""}=e,{options:o=[{label:"Save",value:"save"}]}=e;sr();function f(){r(1,t=!1)}function h(){document.querySelector("form").checkValidity()&&r(1,t=!1)}(l??!1)&&(l=Ts);function d(){l.authors.push(""),r(0,l)}function _(){l.orgs.push(""),r(0,l)}function m(){l.references.push(""),r(0,l)}async function c(){const T=await(await fetch("/api/version.json")).json();r(0,l.d3fend_version=T.version,l)}function u(N){Ot.call(this,a,N)}function E(){l.title=this.value,r(0,l)}function g(N,T){N[T]=this.value,r(0,l)}function P(N,T){N[T]=this.value,r(0,l)}function O(){l.description=this.value,r(0,l)}function D(){l.article=this.value,r(0,l)}function S(){l.d3fend_version=this.value,r(0,l)}function p(){l.cad_data_version=this.value,r(0,l)}function R(){l.published_date=this.value,r(0,l)}const C=()=>{const T=new Date().toISOString();r(0,l.published_date=T,l)};function F(N,T){N[T]=this.value,r(0,l)}return a.$$set=N=>{"meta"in N&&r(0,l=N.meta),"is_open"in N&&r(1,t=N.is_open),"title"in N&&r(2,s=N.title),"content"in N&&r(3,n=N.content),"options"in N&&r(10,o=N.options)},[l,t,s,n,f,h,d,_,m,c,o,u,E,g,P,O,D,S,p,R,C,F]}class Gc extends at{constructor(e){super(),st(this,e,Qc,Hc,tt,{meta:0,is_open:1,title:2,content:3,options:10})}}function ws(a,e,r){const l=a.slice();return l[66]=e[r],l[68]=r,l}function Kc(a){let e,r='This is an (very) alpha-level preview release. Please review and file bugs <a href="https://github.com/d3fend/d3fend/issues/14">here. </a>Early stage <a href="./docs">docs.</a>';return{c(){e=M("div"),e.innerHTML=r,this.h()},l(l){e=B(l,"DIV",{class:!0,"data-svelte-h":!0}),we(e)!=="svelte-x19ykg"&&(e.innerHTML=r),this.h()},h(){W(e,"class","font-small")},m(l,t){v(l,e,t)},p:ke,d(l){l&&i(e)}}}function ks(a){let e=a[66].message+"",r,l;return{c(){r=k(e),l=M("br")},l(t){r=y(t,e),l=B(t,"BR",{})},m(t,s){v(t,r,s),v(t,l,s)},p(t,s){s[0]&8&&e!==(e=t[66].message+"")&&Y(r,e)},d(t){t&&(i(r),i(l))}}}function Jc(a){let e,r="<code>The tool fixed the errors needed to run but here is list of all import errors and warnings.</code>",l,t,s,n,o,f,h,d,_,m=Ne(a[3]),c=[];for(let u=0;u<m.length;u+=1)c[u]=ks(ws(a,m,u));return{c(){e=M("div"),e.innerHTML=r,l=ee(),t=M("br"),s=ee(),n=M("br"),o=ee();for(let u=0;u<c.length;u+=1)c[u].c();f=ee(),h=M("br"),d=ee(),_=M("br")},l(u){e=B(u,"DIV",{"data-svelte-h":!0}),we(e)!=="svelte-7el432"&&(e.innerHTML=r),l=te(u),t=B(u,"BR",{}),s=te(u),n=B(u,"BR",{}),o=te(u);for(let E=0;E<c.length;E+=1)c[E].l(u);f=te(u),h=B(u,"BR",{}),d=te(u),_=B(u,"BR",{})},m(u,E){v(u,e,E),v(u,l,E),v(u,t,E),v(u,s,E),v(u,n,E),v(u,o,E);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(u,E);v(u,f,E),v(u,h,E),v(u,d,E),v(u,_,E)},p(u,E){if(E[0]&8){m=Ne(u[3]);let g;for(g=0;g<m.length;g+=1){const P=ws(u,m,g);c[g]?c[g].p(P,E):(c[g]=ks(P),c[g].c(),c[g].m(f.parentNode,f))}for(;g<c.length;g+=1)c[g].d(1);c.length=m.length}},d(u){u&&(i(e),i(l),i(t),i(s),i(n),i(o),i(f),i(h),i(d),i(_)),Qe(c,u)}}}function Yc(a){let e;return{c(){e=k("Please only load models from URLs you trust!")},l(r){e=y(r,"Please only load models from URLs you trust!")},m(r,l){v(r,e,l)},d(r){r&&i(e)}}}function Xc(a){let e,r,l,t,s,n,o,f,h,d,_;return d=new yr({props:{$$slots:{default:[Yc]},$$scope:{ctx:a}}}),{c(){e=M("br"),r=ee(),l=M("code"),t=k(a[2]),s=ee(),n=M("br"),o=ee(),f=M("br"),h=ee(),Re(d.$$.fragment),this.h()},l(m){e=B(m,"BR",{}),r=te(m),l=B(m,"CODE",{class:!0});var c=pe(l);t=y(c,a[2]),c.forEach(i),s=te(m),n=B(m,"BR",{}),o=te(m),f=B(m,"BR",{}),h=te(m),Oe(d.$$.fragment,m),this.h()},h(){W(l,"class","center text-center")},m(m,c){v(m,e,c),v(m,r,c),v(m,l,c),L(l,t),v(m,s,c),v(m,n,c),v(m,o,c),v(m,f,c),v(m,h,c),Ie(d,m,c),_=!0},p(m,c){(!_||c[0]&4)&&Y(t,m[2]);const u={};c[2]&128&&(u.$$scope={dirty:c,ctx:m}),d.$set(u)},i(m){_||(de(d.$$.fragment,m),_=!0)},o(m){me(d.$$.fragment,m),_=!1},d(m){m&&(i(e),i(r),i(l),i(s),i(n),i(o),i(f),i(h)),Te(d,m)}}}function Zc(a){let e;return{c(){e=k("Please only load models from URLs you trust!")},l(r){e=y(r,"Please only load models from URLs you trust!")},m(r,l){v(r,e,l)},d(r){r&&i(e)}}}function Wc(a){let e,r,l,t,s,n;return s=new yr({props:{$$slots:{default:[Zc]},$$scope:{ctx:a}}}),{c(){e=M("br"),r=ee(),l=M("br"),t=ee(),Re(s.$$.fragment)},l(o){e=B(o,"BR",{}),r=te(o),l=B(o,"BR",{}),t=te(o),Oe(s.$$.fragment,o)},m(o,f){v(o,e,f),v(o,r,f),v(o,l,f),v(o,t,f),Ie(s,o,f),n=!0},p(o,f){const h={};f[2]&128&&(h.$$scope={dirty:f,ctx:o}),s.$set(h)},i(o){n||(de(s.$$.fragment,o),n=!0)},o(o){me(s.$$.fragment,o),n=!1},d(o){o&&(i(e),i(r),i(l),i(t)),Te(s,o)}}}function ys(a){let e,r,l,t;return e=new yr({props:{alert_type:"warning",$$slots:{default:[xc]},$$scope:{ctx:a}}}),{c(){Re(e.$$.fragment),r=ee(),l=M("br")},l(s){Oe(e.$$.fragment,s),r=te(s),l=B(s,"BR",{})},m(s,n){Ie(e,s,n),v(s,r,n),v(s,l,n),t=!0},i(s){t||(de(e.$$.fragment,s),t=!0)},o(s){me(e.$$.fragment,s),t=!1},d(s){s&&(i(r),i(l)),Te(e,s)}}}function xc(a){let e;return{c(){e=k("Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},l(r){e=y(r,"Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},m(r,l){v(r,e,l)},d(r){r&&i(e)}}}function ed(a){let e,r,l,t,s=a[14].length+"",n,o,f,h,d,_,m,c,u,E,g="copy",P,O,D,S=a[14].length>2048&&ys(a);return{c(){S&&S.c(),e=ee(),r=M("div"),l=M("code"),t=k("The encoded model has a string length of "),n=k(s),o=k(" characters."),f=ee(),h=M("p"),d=M("button"),_=M("a"),m=k("Share URL"),c=ee(),u=M("span"),E=M("button"),E.textContent=g,this.h()},l(p){S&&S.l(p),e=te(p),r=B(p,"DIV",{});var R=pe(r);l=B(R,"CODE",{});var C=pe(l);t=y(C,"The encoded model has a string length of "),n=y(C,s),o=y(C," characters."),C.forEach(i),R.forEach(i),f=te(p),h=B(p,"P",{});var F=pe(h);d=B(F,"BUTTON",{class:!0});var N=pe(d);_=B(N,"A",{href:!0});var T=pe(_);m=y(T,"Share URL"),T.forEach(i),N.forEach(i),c=te(F),u=B(F,"SPAN",{});var b=pe(u);E=B(b,"BUTTON",{class:!0,"data-svelte-h":!0}),we(E)!=="svelte-1uua65l"&&(E.textContent=g),b.forEach(i),F.forEach(i),this.h()},h(){W(_,"href",a[15]),W(d,"class","svelte-q9zbzo"),W(E,"class","svelte-q9zbzo")},m(p,R){S&&S.m(p,R),v(p,e,R),v(p,r,R),L(r,l),L(l,t),L(l,n),L(l,o),v(p,f,R),v(p,h,R),L(h,d),L(d,_),L(_,m),L(h,c),L(h,u),L(u,E),P=!0,O||(D=be(E,"click",a[41]),O=!0)},p(p,R){p[14].length>2048?S?R[0]&16384&&de(S,1):(S=ys(p),S.c(),de(S,1),S.m(e.parentNode,e)):S&&(gt(),me(S,1,1,()=>{S=null}),bt()),(!P||R[0]&16384)&&s!==(s=p[14].length+"")&&Y(n,s),(!P||R[0]&32768)&&W(_,"href",p[15])},i(p){P||(de(S),P=!0)},o(p){me(S),P=!1},d(p){p&&(i(e),i(r),i(f),i(h)),S&&S.d(p),O=!1,D()}}}function Ss(a){let e,r,l,t,s,n=a[4]>1&&Ds();return{c(){e=M("button"),r=k(a[4]),l=k(" import alert"),n&&n.c(),this.h()},l(o){e=B(o,"BUTTON",{class:!0});var f=pe(e);r=y(f,a[4]),l=y(f," import alert"),n&&n.l(f),f.forEach(i),this.h()},h(){W(e,"class","svelte-q9zbzo")},m(o,f){v(o,e,f),L(e,r),L(e,l),n&&n.m(e,null),t||(s=be(e,"click",a[24]),t=!0)},p(o,f){f[0]&16&&Y(r,o[4]),o[4]>1?n||(n=Ds(),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},d(o){o&&i(e),n&&n.d(),t=!1,s()}}}function Ds(a){let e;return{c(){e=k("s")},l(r){e=y(r,"s")},m(r,l){v(r,e,l)},d(r){r&&i(e)}}}function Cs(a){let e,r,l,t,s,n,o;return l=new lo({props:{display:"inline"}}),{c(){e=M("span"),r=M("span"),Re(l.$$.fragment),t=ee(),s=M("span"),n=k(a[18]),this.h()},l(f){e=B(f,"SPAN",{class:!0});var h=pe(e);r=B(h,"SPAN",{});var d=pe(r);Oe(l.$$.fragment,d),d.forEach(i),t=te(h),s=B(h,"SPAN",{});var _=pe(s);n=y(_,a[18]),_.forEach(i),h.forEach(i),this.h()},h(){W(e,"class","right")},m(f,h){v(f,e,h),L(e,r),Ie(l,r,null),L(e,t),L(e,s),L(s,n),o=!0},p(f,h){(!o||h[0]&262144)&&Y(n,f[18])},i(f){o||(de(l.$$.fragment,f),o=!0)},o(f){me(l.$$.fragment,f),o=!1},d(f){f&&i(e),Te(l)}}}function Ns(a){let e,r;return e=new Ec({props:{onClick:a[33],id:a[8].id,top:a[8].top,left:a[8].left,right:a[8].right,bottom:a[8].bottom}}),{c(){Re(e.$$.fragment)},l(l){Oe(e.$$.fragment,l)},m(l,t){Ie(e,l,t),r=!0},p(l,t){const s={};t[0]&256&&(s.id=l[8].id),t[0]&256&&(s.top=l[8].top),t[0]&256&&(s.left=l[8].left),t[0]&256&&(s.right=l[8].right),t[0]&256&&(s.bottom=l[8].bottom),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){me(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function td(a){let e,r,l,t,s,n,o;e=new ao({props:{position:"top-left"}}),l=new Yn({props:{variant:Xn.Dots}});let f=a[8]&&Ns(a);return n=new Zn({props:{position:"top-right"}}),{c(){Re(e.$$.fragment),r=ee(),Re(l.$$.fragment),t=ee(),f&&f.c(),s=ee(),Re(n.$$.fragment)},l(h){Oe(e.$$.fragment,h),r=te(h),Oe(l.$$.fragment,h),t=te(h),f&&f.l(h),s=te(h),Oe(n.$$.fragment,h)},m(h,d){Ie(e,h,d),v(h,r,d),Ie(l,h,d),v(h,t,d),f&&f.m(h,d),v(h,s,d),Ie(n,h,d),o=!0},p(h,d){h[8]?f?(f.p(h,d),d[0]&256&&de(f,1)):(f=Ns(h),f.c(),de(f,1),f.m(s.parentNode,s)):f&&(gt(),me(f,1,1,()=>{f=null}),bt())},i(h){o||(de(e.$$.fragment,h),de(l.$$.fragment,h),de(f),de(n.$$.fragment,h),o=!0)},o(h){me(e.$$.fragment,h),me(l.$$.fragment,h),me(f),me(n.$$.fragment,h),o=!1},d(h){h&&(i(r),i(t),i(s)),Te(e,h),Te(l,h),f&&f.d(h),Te(n,h)}}}function rd(a){let e,r;return e=new Vc({props:{slot:"connectionLine"}}),{c(){Re(e.$$.fragment)},l(l){Oe(e.$$.fragment,l)},m(l,t){Ie(e,l,t),r=!0},p:ke,i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){me(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function ld(a){let e,r,l,t,s,n;return r=new Ac({}),t=new Jn({props:{nodes:_r,nodeTypes:En,edges:jr,edgeTypes:Pn,fitView:!0,defaultEdgeOptions:a[21],maxZoom:2,minZoom:.3,$$slots:{connectionLine:[rd],default:[td]},$$scope:{ctx:a}}}),t.$on("dragover",a[27]),t.$on("drop",a[29]),t.$on("connect",a[28]),t.$on("nodecontextmenu",a[32]),t.$on("paneclick",a[33]),t.$on("onedgecreate",od),{c(){e=M("div"),Re(r.$$.fragment),l=ee(),Re(t.$$.fragment),this.h()},l(o){e=B(o,"DIV",{slot:!0,id:!0,class:!0});var f=pe(e);Oe(r.$$.fragment,f),l=te(f),Oe(t.$$.fragment,f),f.forEach(i),this.h()},h(){W(e,"slot","flow"),W(e,"id","slotted-flow"),W(e,"class","svelte-q9zbzo"),Os(()=>a[47].call(e))},m(o,f){v(o,e,f),Ie(r,e,null),L(e,l),Ie(t,e,null),s=Tn(e,a[47].bind(e)),n=!0},p(o,f){const h={};f[0]&256|f[2]&128&&(h.$$scope={dirty:f,ctx:o}),t.$set(h)},i(o){n||(de(r.$$.fragment,o),de(t.$$.fragment,o),n=!0)},o(o){me(r.$$.fragment,o),me(t.$$.fragment,o),n=!1},d(o){o&&i(e),Te(r),Te(t),s()}}}function ad(a){let e,r,l;return r=new wn({}),{c(){e=M("div"),Re(r.$$.fragment),this.h()},l(t){e=B(t,"DIV",{slot:!0,class:!0});var s=pe(e);Oe(r.$$.fragment,s),s.forEach(i),this.h()},h(){W(e,"slot","drawer"),W(e,"class","side-panel close svelte-q9zbzo")},m(t,s){v(t,e,s),Ie(r,e,null),l=!0},p:ke,i(t){l||(de(r.$$.fragment,t),l=!0)},o(t){me(r.$$.fragment,t),l=!1},d(t){t&&i(e),Te(r)}}}function sd(a){let e,r,l,t,s,n,o,f,h,d,_,m,c,u,E,g,P,O="Load",D,S,p="Merge",R,C,F="Clear",N,T,b="Save",I,w,A,X="Save As...",oe,le="Save As JSON...",G,Q="Save As Turtle...",V,z="Save As D3FEND Extension...",Z,q,J="Share",ye,Pe,ae,ve,ce,ge,Se,Ae,x,j,ie="Graph Metadata",qe,Ue,rt,Me,_t;function wt(re){a[39](re)}let $e={title:a[0].title,content:a[0].content,options:a[0].options,$$slots:{default:[Xc]},$$scope:{ctx:a}};a[0].is_open!==void 0&&($e.is_open=a[0].is_open),e=new ls({props:$e}),He.push(()=>Pt(e,"is_open",wt)),e.$on("optionSelected",a[19]);function Ge(re){a[40](re)}let lt={title:a[1].title,content:a[1].content,options:a[1].options,$$slots:{default:[Wc]},$$scope:{ctx:a}};a[1].is_open!==void 0&&(lt.is_open=a[1].is_open),t=new ls({props:lt}),He.push(()=>Pt(t,"is_open",Ge)),t.$on("optionSelected",a[20]);function At(re){a[42](re)}let yt={title:"Share this model with a URL",$$slots:{default:[ed]},$$scope:{ctx:a}};a[13]!==void 0&&(yt.is_open=a[13]),o=new Sc({props:yt}),He.push(()=>Pt(o,"is_open",At));function Ye(re){a[43](re)}let Dt={};a[7]!==void 0&&(Dt.selectedFile=a[7]),_=new qc({props:Dt}),He.push(()=>Pt(_,"selectedFile",Ye)),_.$on("fileSelected",a[30]);let Fe=a[4]&&Ss(a),fe=a[18]&&Cs(a);return Ue=new bn({props:{$$slots:{drawer:[ad],flow:[ld]},$$scope:{ctx:a}}}),{c(){Re(e.$$.fragment),l=ee(),Re(t.$$.fragment),n=ee(),Re(o.$$.fragment),h=ee(),d=M("div"),Re(_.$$.fragment),c=ee(),u=M("br"),E=ee(),g=M("div"),P=M("button"),P.textContent=O,D=ee(),S=M("button"),S.textContent=p,R=ee(),C=M("button"),C.textContent=F,N=ee(),T=M("button"),T.textContent=b,I=ee(),w=M("select"),A=M("option"),A.textContent=X,oe=M("option"),oe.textContent=le,G=M("option"),G.textContent=Q,V=M("option"),V.textContent=z,Z=ee(),q=M("button"),q.textContent=J,ye=ee(),Pe=M("button"),ae=k("CAD Embed"),ce=k(`
        filename:    `),ge=M("input"),Se=ee(),Fe&&Fe.c(),Ae=ee(),fe&&fe.c(),x=ee(),j=M("button"),j.textContent=ie,qe=ee(),Re(Ue.$$.fragment),this.h()},l(re){Oe(e.$$.fragment,re),l=te(re),Oe(t.$$.fragment,re),n=te(re),Oe(o.$$.fragment,re),h=te(re),d=B(re,"DIV",{class:!0});var H=pe(d);Oe(_.$$.fragment,H),H.forEach(i),c=te(re),u=B(re,"BR",{}),E=te(re),g=B(re,"DIV",{id:!0,class:!0});var ue=pe(g);P=B(ue,"BUTTON",{class:!0,"data-svelte-h":!0}),we(P)!=="svelte-r4end6"&&(P.textContent=O),D=te(ue),S=B(ue,"BUTTON",{class:!0,"data-svelte-h":!0}),we(S)!=="svelte-1s1l97g"&&(S.textContent=p),R=te(ue),C=B(ue,"BUTTON",{class:!0,"data-svelte-h":!0}),we(C)!=="svelte-1o4uly3"&&(C.textContent=F),N=te(ue),T=B(ue,"BUTTON",{class:!0,"data-svelte-h":!0}),we(T)!=="svelte-qm8vdx"&&(T.textContent=b),I=te(ue),w=B(ue,"SELECT",{class:!0});var _e=pe(w);A=B(_e,"OPTION",{"data-svelte-h":!0}),we(A)!=="svelte-hmrlsb"&&(A.textContent=X),oe=B(_e,"OPTION",{"data-svelte-h":!0}),we(oe)!=="svelte-1q30tr1"&&(oe.textContent=le),G=B(_e,"OPTION",{"data-svelte-h":!0}),we(G)!=="svelte-pf55hp"&&(G.textContent=Q),V=B(_e,"OPTION",{"data-svelte-h":!0}),we(V)!=="svelte-43fn33"&&(V.textContent=z),_e.forEach(i),Z=te(ue),q=B(ue,"BUTTON",{class:!0,"data-svelte-h":!0}),we(q)!=="svelte-mqt2ui"&&(q.textContent=J),ye=te(ue),Pe=B(ue,"BUTTON",{class:!0});var je=pe(Pe);ae=y(je,"CAD Embed"),je.forEach(i),ce=y(ue,`
        filename:    `),ge=B(ue,"INPUT",{style:!0,type:!0}),Se=te(ue),Fe&&Fe.l(ue),Ae=te(ue),fe&&fe.l(ue),x=te(ue),j=B(ue,"BUTTON",{class:!0,"data-svelte-h":!0}),we(j)!=="svelte-d0yv6c"&&(j.textContent=ie),ue.forEach(i),qe=te(re),Oe(Ue.$$.fragment,re),this.h()},h(){W(d,"class","toolbar-examples"),W(P,"class","svelte-q9zbzo"),W(S,"class","svelte-q9zbzo"),W(C,"class","svelte-q9zbzo"),W(T,"class","svelte-q9zbzo"),A.__value="",et(A,A.__value),oe.__value="json",et(oe,oe.__value),G.__value="turtle",et(G,G.__value),V.__value="extension",et(V,V.__value),W(w,"class","save-as-dropdown svelte-q9zbzo"),a[6]===void 0&&Os(()=>a[44].call(w)),W(q,"class"," svelte-q9zbzo"),W(Pe,"class"," svelte-q9zbzo"),Pe.disabled=ve=!a[16].length,Ze(ge,"width","275px"),W(ge,"type","text"),W(j,"class","right svelte-q9zbzo"),W(g,"id","toolbar"),W(g,"class","svelte-q9zbzo")},m(re,H){Ie(e,re,H),v(re,l,H),Ie(t,re,H),v(re,n,H),Ie(o,re,H),v(re,h,H),v(re,d,H),Ie(_,d,null),v(re,c,H),v(re,u,H),v(re,E,H),v(re,g,H),L(g,P),L(g,D),L(g,S),L(g,R),L(g,C),L(g,N),L(g,T),L(g,I),L(g,w),L(w,A),L(w,oe),L(w,G),L(w,V),_l(w,a[6],!0),L(g,Z),L(g,q),L(g,ye),L(g,Pe),L(Pe,ae),L(g,ce),L(g,ge),et(ge,a[5]),L(g,Se),Fe&&Fe.m(g,null),L(g,Ae),fe&&fe.m(g,null),L(g,x),L(g,j),v(re,qe,H),Ie(Ue,re,H),rt=!0,Me||(_t=[be(P,"click",a[25]),be(S,"click",a[26]),be(C,"click",a[31]),be(T,"click",a[22]),be(w,"change",a[44]),be(w,"change",a[23]),be(q,"click",a[34]),be(Pe,"click",a[35]),be(ge,"input",a[45]),be(j,"click",a[46])],Me=!0)},p(re,H){const ue={};H[0]&1&&(ue.title=re[0].title),H[0]&1&&(ue.content=re[0].content),H[0]&1&&(ue.options=re[0].options),H[0]&4|H[2]&128&&(ue.$$scope={dirty:H,ctx:re}),!r&&H[0]&1&&(r=!0,ue.is_open=re[0].is_open,Et(()=>r=!1)),e.$set(ue);const _e={};H[0]&2&&(_e.title=re[1].title),H[0]&2&&(_e.content=re[1].content),H[0]&2&&(_e.options=re[1].options),H[2]&128&&(_e.$$scope={dirty:H,ctx:re}),!s&&H[0]&2&&(s=!0,_e.is_open=re[1].is_open,Et(()=>s=!1)),t.$set(_e);const je={};H[0]&49152|H[2]&128&&(je.$$scope={dirty:H,ctx:re}),!f&&H[0]&8192&&(f=!0,je.is_open=re[13],Et(()=>f=!1)),o.$set(je);const pt={};!m&&H[0]&128&&(m=!0,pt.selectedFile=re[7],Et(()=>m=!1)),_.$set(pt),H[0]&64&&_l(w,re[6]),(!rt||H[0]&65536&&ve!==(ve=!re[16].length))&&(Pe.disabled=ve),H[0]&32&&ge.value!==re[5]&&et(ge,re[5]),re[4]?Fe?Fe.p(re,H):(Fe=Ss(re),Fe.c(),Fe.m(g,Ae)):Fe&&(Fe.d(1),Fe=null),re[18]?fe?(fe.p(re,H),H[0]&262144&&de(fe,1)):(fe=Cs(re),fe.c(),de(fe,1),fe.m(g,x)):fe&&(gt(),me(fe,1,1,()=>{fe=null}),bt());const nt={};H[0]&1792|H[2]&128&&(nt.$$scope={dirty:H,ctx:re}),Ue.$set(nt)},i(re){rt||(de(e.$$.fragment,re),de(t.$$.fragment,re),de(o.$$.fragment,re),de(_.$$.fragment,re),de(fe),de(Ue.$$.fragment,re),rt=!0)},o(re){me(e.$$.fragment,re),me(t.$$.fragment,re),me(o.$$.fragment,re),me(_.$$.fragment,re),me(fe),me(Ue.$$.fragment,re),rt=!1},d(re){re&&(i(l),i(n),i(h),i(d),i(c),i(u),i(E),i(g),i(qe)),Te(e,re),Te(t,re),Te(o,re),Te(_),Fe&&Fe.d(),fe&&fe.d(),Te(Ue,re),Me=!1,mt(_t)}}}function nd(a){let e,r,l,t,s,n,o='D3FEND <span class="snakes">☤</span> <span class="CAD"><span style="color:#e62929;">C</span><span class="A svelte-q9zbzo" style="color:white;text-border:1px;">A</span><span style="color:blue;">D</span></span>',f,h,d,_,m,c,u,E,g,P,O,D;e=new ro({props:{title:"D3FEND CAD Tool",og_title:"D3FEND CAD Tool",og_description:"Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios",og_type:"app",og_url:"",og_image:""}}),h=new yr({props:{alert_type:"info",$$slots:{default:[Kc]},$$scope:{ctx:a}}});function S(N){a[36](N)}let p={title:a[4]+" import alerts",$$slots:{default:[Jc]},$$scope:{ctx:a}};a[12]!==void 0&&(p.is_open=a[12]),_=new $c({props:p}),He.push(()=>Pt(_,"is_open",S));function R(N){a[37](N)}function C(N){a[38](N)}let F={};return a[11]!==void 0&&(F.is_open=a[11]),a[17]!==void 0&&(F.meta=a[17]),u=new Gc({props:F}),He.push(()=>Pt(u,"is_open",R)),He.push(()=>Pt(u,"meta",C)),O=new Oc({props:{position:"right",$$slots:{default:[sd]},$$scope:{ctx:a}}}),{c(){Re(e.$$.fragment),r=ee(),l=M("div"),t=M("div"),s=M("div"),n=M("h1"),n.innerHTML=o,f=ee(),Re(h.$$.fragment),d=ee(),Re(_.$$.fragment),c=ee(),Re(u.$$.fragment),P=ee(),Re(O.$$.fragment),this.h()},l(N){Oe(e.$$.fragment,N),r=te(N),l=B(N,"DIV",{class:!0});var T=pe(l);t=B(T,"DIV",{style:!0});var b=pe(t);s=B(b,"DIV",{style:!0});var I=pe(s);n=B(I,"H1",{class:!0,title:!0,"data-svelte-h":!0}),we(n)!=="svelte-xxt2o6"&&(n.innerHTML=o),f=te(I),Oe(h.$$.fragment,I),I.forEach(i),b.forEach(i),T.forEach(i),d=te(N),Oe(_.$$.fragment,N),c=te(N),Oe(u.$$.fragment,N),P=te(N),Oe(O.$$.fragment,N),this.h()},h(){W(n,"class","fancy-font svelte-q9zbzo"),W(n,"title","Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios"),Ze(s,"text-align","center"),Ze(s,"flex-grow","1"),Ze(t,"display","flex"),Ze(t,"just-content","space-between"),Ze(t,"align-items","center"),W(l,"class","title-egg svelte-q9zbzo")},m(N,T){Ie(e,N,T),v(N,r,T),v(N,l,T),L(l,t),L(t,s),L(s,n),L(s,f),Ie(h,s,null),v(N,d,T),Ie(_,N,T),v(N,c,T),Ie(u,N,T),v(N,P,T),Ie(O,N,T),D=!0},p(N,T){const b={};T[2]&128&&(b.$$scope={dirty:T,ctx:N}),h.$set(b);const I={};T[0]&16&&(I.title=N[4]+" import alerts"),T[0]&8|T[2]&128&&(I.$$scope={dirty:T,ctx:N}),!m&&T[0]&4096&&(m=!0,I.is_open=N[12],Et(()=>m=!1)),_.$set(I);const w={};!E&&T[0]&2048&&(E=!0,w.is_open=N[11],Et(()=>E=!1)),!g&&T[0]&131072&&(g=!0,w.meta=N[17],Et(()=>g=!1)),u.$set(w);const A={};T[0]&389111|T[2]&128&&(A.$$scope={dirty:T,ctx:N}),O.$set(A)},i(N){D||(de(e.$$.fragment,N),de(h.$$.fragment,N),de(_.$$.fragment,N),de(u.$$.fragment,N),de(O.$$.fragment,N),D=!0)},o(N){me(e.$$.fragment,N),me(h.$$.fragment,N),me(_.$$.fragment,N),me(u.$$.fragment,N),me(O.$$.fragment,N),D=!1},d(N){N&&(i(r),i(l),i(d),i(c),i(P)),Te(e,N),Te(h),Te(_,N),Te(u,N),Te(O,N)}}}function od(a){console.log(a),console.log(a)}function id(a,e,r){let l,t,s,n,o;Je(a,Ln,fe=>r(49,l=fe)),Je(a,jr,fe=>r(50,t=fe)),Je(a,_r,fe=>r(16,s=fe)),Je(a,ar,fe=>r(17,n=fe)),Je(a,St,fe=>r(18,o=fe));var f=this&&this.__awaiter||function(fe,re,H,ue){function _e(je){return je instanceof H?je:new H(function(pt){pt(je)})}return new(H||(H=Promise))(function(je,pt){function nt(kt){try{Ct(ue.next(kt))}catch($t){pt($t)}}function It(kt){try{Ct(ue.throw(kt))}catch($t){pt($t)}}function Ct(kt){kt.done?je(kt.value):_e(kt.value).then(nt,It)}Ct((ue=ue.apply(fe,re||[])).next())})};const h=new Tf({useDefaults:!0,allErrors:!0});let d={is_open:!1,title:"Confirmation to load remote model from URL",content:"This page is instructing D3FEND to remotely load a CAD model from this URL:",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},_={is_open:!1,title:"Confirmation to load remote model from compressed URL",content:"This page is instructing D3FEND to load a CAD model from this URL",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},m;l.url.searchParams.get("load")&&(m=l.url.searchParams.get("load"),d.is_open=!0),l.url.searchParams.get("loadg")&&(_.is_open=!0);function c(fe){const re=fe.detail;re.value==="load"?(St.add("loading remote URL"),oe(m),St.clear()):re.value}function u(fe){const re=fe.detail;if(re.value==="load"){St.add("loading graph from URL");const H=l.url.searchParams.get("loadg"),ue=El.uncrush(H);let _e=JSON.parse(ue);N(_e),St.clear()}else re.value}Qr(()=>f(void 0,void 0,void 0,function*(){St.add("Mounting app...");try{Wn.initialize(),St.clear()}catch(fe){console.error("Failed to initialize Oxigraph in +layout.svelte",fe),fe.message}}));let E={type:"editableEdge",data:{label:void 0},markerEnd:{type:Kn.ArrowClosed}},g,P,O="d3fend-cad.json",D="";function S(){const fe=JSON.stringify({meta:n,nodes:s,edges:t},null,4),re=new Blob([fe],{type:"application/json"}),H=window.URL.createObjectURL(re),ue=document.createElement("a");ue.href=H,ue.download=O,r(4,P=0),document.body.appendChild(ue),ue.click(),document.body.removeChild(ue),window.URL.revokeObjectURL(H)}function p(){console.log("Saving As D3FEND Ontology Extension..."),St.add("Generating D3FEND Ontology Extension in Turtle file");let fe=prompt("Enter extension name to save as D3FEND Ontology Extension Turtle file as d3fend-cad-ext-<extension-name-here>.ttl","my-extension");const re="d3fend-cad-ext-"+fe+".ttl";to(fe).then(H=>{St.clear();const ue=new Blob([H],{type:"text/turtle"}),_e=window.URL.createObjectURL(ue),je=document.createElement("a");je.href=_e,re&&(je.download=re,document.body.appendChild(je),je.click(),document.body.removeChild(je)),window.URL.revokeObjectURL(_e)}).catch(H=>{console.error("Error generating D3FEND Ontology Extension in Turtle: ",H)})}function R(){D==="json"?F():D==="turtle"?C():D==="extension"&&p(),r(6,D="")}function C(){St.add("generating ttl file"),console.log("!!! Turtle export engaged !!!"),eo().then(fe=>{St.clear();const re=new Blob([fe],{type:"text/turtle"}),H=window.URL.createObjectURL(re),ue=document.createElement("a");ue.href=H;let _e=prompt("Enter filename to save as Turtle file",O.replace("json","ttl"));r(4,P=0),_e&&(ue.download=_e,document.body.appendChild(ue),ue.click(),document.body.removeChild(ue)),window.URL.revokeObjectURL(H)}).catch(fe=>{console.error("Error serializing graph to Turtle: ",fe)})}function F(){const fe=JSON.stringify({meta:n,nodes:s,edges:t},null,4),re=new Blob([fe],{type:"application/json"}),H=window.URL.createObjectURL(re),ue=document.createElement("a");ue.href=H;let _e=prompt("Enter filename to save as JSON file",O);r(4,P=0),r(5,O=_e),_e&&(ue.download=_e,document.body.appendChild(ue),ue.click(),document.body.removeChild(ue)),window.URL.revokeObjectURL(H)}function N(fe){try{const re=h.compile(Ir),H=re(fe);r(3,g=re.errors),H?r(4,P=0):fe=T(re.errors,fe);const ue=fe.nodes,_e=fe.edges;fe.meta&&er(ar,n=fe.meta,n),St.add("loading graph from data..."),Tr(ue,_e),w(),window.addEventListener("beforeunload",je=>{console.log("User is leaving the page"),je.preventDefault(),je.returnValue=""}),St.clear()}catch(re){console.error("Error parsing JSON:",re)}}function T(fe,re){r(4,P=fe.length);for(const H of fe){if(H.params.missingProperty=="user_properties"){let ue=H.dataPath.replace(/\D/g,"");ue=parseInt(ue),re.nodes[ue].data.user_properties=[]}H.params.missingProperty=="meta"&&(re.meta=Object.assign(Object.assign({},Ts),re.meta))}return re}function b(){r(12,Ae=!0)}const{screenToFlowPosition:I,fitView:w}=no();function A(fe){const re=fe.target.files[0];if(re){const H=new FileReader;H.onload=ue=>{if(typeof ue.target.result=="string"){r(5,O=re.name);try{let _e=JSON.parse(ue.target.result);const je=h.compile(Ir),pt=je(_e);r(3,g=je.errors),pt?r(4,P=0):_e=T(je.errors,_e),_e.meta&&er(ar,n=_e.meta,n);const nt=_e.nodes,It=_e.edges;Tr(nt,It),w(),window.addEventListener("beforeunload",Ct=>{console.log("User is leaving the page"),Ct.preventDefault(),Ct.returnValue=""})}catch(_e){console.error("Error parsing JSON:",_e)}}else console.error("File content is not a string.")},H.onerror=()=>{console.error("Error reading file:",H.error)},H.readAsText(re)}}function X(fe){const re=fe.target.files[0];if(re){const H=new FileReader;H.onload=ue=>{if(typeof ue.target.result=="string"){console.log(ue.target.result);try{const _e=JSON.parse(ue.target.result);_r.set([...s,..._e.nodes]),jr.set([...t,..._e.edges]),alert(` added ${_e.nodes.length} nodes and ${_e.edges.length} edges to the current graph `)}catch(_e){console.error("Error parsing JSON:",_e),alert(`Error parsing JSON:", ${_e}`)}}else console.error("File content is not a string."),alert("File content is not a string.")},H.onerror=()=>{console.error("Error reading file:",H.error),alert(`Error reading file: ${H.error}`)},H.readAsText(re)}}function oe(fe){return f(this,void 0,void 0,function*(){if(fe)try{let H=yield(yield fetch(fe)).json();const ue=h.compile(Ir),_e=ue(H);r(3,g=ue.errors),_e?r(4,P=0):H=T(ue.errors,H),H.meta&&er(ar,n=H.meta,n);const je=H.nodes,pt=H.edges;Tr(je,pt),w()}catch(re){console.error("Error parsing JSON:",re)}})}function le(){const fe=document.createElement("input");fe.type="file",fe.accept=".json",fe.onchange=re=>{A(re)},fe.click()}function G(){const fe=document.createElement("input");fe.type="file",fe.accept=".json",fe.onchange=re=>{X(re)},fe.click()}const Q=fe=>{fe.preventDefault(),fe.dataTransfer&&(fe.dataTransfer.dropEffect="move")},V=fe=>console.log("handle onConnect",fe),z=fe=>{if(fe.preventDefault(),!fe.dataTransfer)return null;const re=fe.dataTransfer.getData("application/svelteflow"),H=I({x:fe.clientX,y:fe.clientY}),ue={id:`${Math.random()}`,type:re,position:H,data:{label:null,sequence:"0",user_properties:[]},origin:[.5,0]};s.push(ue),_r.set(s)};function Z(fe){return f(this,void 0,void 0,function*(){const re=fe.detail;r(5,O=re);try{const H=yield fetch(`/resources/cad/examples/${re}`);if(!H.ok)throw new Error(`HTTP error! status: ${H.status}`);const ue=yield H.json();N(ue)}catch(H){console.error("Error fetching JSON file:",H)}})}let q;function J(){xn(),r(4,P=0),r(7,q="Example Graphs"),r(5,O="d3fend-cad.json")}let ye,Pe,ae;function ve({detail:{event:fe,node:re}}){fe.preventDefault();let H=50;console.log({Y:fe.clientY,X:fe.clientX,height:ae,width:Pe}),r(8,ye={id:re.id,top:fe.clientY<ae-H?fe.clientY:void 0,left:fe.clientX<Pe-H?fe.clientX:void 0,right:fe.clientX>=Pe-H?Pe-fe.clientX:void 0,bottom:fe.clientY>=ae-H?ae-fe.clientY:void 0}),ge({detail:{event:fe,node:re}})}function ce(){r(8,ye=null),bl.set(null)}function ge({detail:{event:fe,node:re}}){bl.set(re)}let Se=!1,Ae=!1,x=!1,j,ie;function qe(){St.add("compressing graph to string..."),r(13,x=!0);const fe=El.crush(JSON.stringify({nodes:s,edges:t}));r(14,j=encodeURIComponent(fe)),r(15,ie=l.url.origin+`/cad/?loadg=${j}`),St.clear()}function Ue(){jn("/cad-view/")}function rt(fe){Ae=fe,r(12,Ae)}function Me(fe){Se=fe,r(11,Se)}function _t(fe){n=fe,ar.set(n)}function wt(fe){a.$$.not_equal(d.is_open,fe)&&(d.is_open=fe,r(0,d))}function $e(fe){a.$$.not_equal(_.is_open,fe)&&(_.is_open=fe,r(1,_))}const Ge=()=>zn(ie);function lt(fe){x=fe,r(13,x)}function At(fe){q=fe,r(7,q)}function yt(){D=In(this),r(6,D)}function Ye(){O=this.value,r(5,O)}const Dt=()=>r(11,Se=!Se);function Fe(){Pe=this.clientWidth,ae=this.clientHeight,r(9,Pe),r(10,ae)}return[d,_,m,g,P,O,D,q,ye,Pe,ae,Se,Ae,x,j,ie,s,n,o,c,u,E,S,R,b,le,G,Q,V,z,Z,J,ve,ce,qe,Ue,rt,Me,_t,wt,$e,Ge,lt,At,yt,Ye,Dt,Fe]}class fd extends at{constructor(e){super(),st(this,e,id,nd,tt,{},null,[-1,-1,-1])}}function ud(a){let e,r;return e=new fd({}),{c(){Re(e.$$.fragment)},l(l){Oe(e.$$.fragment,l)},m(l,t){Ie(e,l,t),r=!0},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){me(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function cd(a){let e,r;return e=new kn({props:{$$slots:{default:[ud]},$$scope:{ctx:a}}}),{c(){Re(e.$$.fragment)},l(l){Oe(e.$$.fragment,l)},m(l,t){Ie(e,l,t),r=!0},p(l,[t]){const s={};t&4&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(de(e.$$.fragment,l),r=!0)},o(l){me(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function dd(a,e,r){let l,{data:t}=e;return a.$$set=s=>{"data"in s&&r(0,t=s.data)},a.$$.update=()=>{a.$$.dirty&1&&r(1,l=t.remote_d3fend_tree?t.remote_d3fend_tree.map(s=>({...s,children:Rs(s.children,s["rdfs:label"])})):[]),a.$$.dirty&3&&(yn.set(l),Sn.set(t.attack),Dn.set(t.dao),Cn.set(t.events),Nn.set(t.weaknesses),Rn.set(t.properties),On.set(t.digital_information))},[t,l]}class Fd extends at{constructor(e){super(),st(this,e,dd,cd,tt,{data:0})}}export{Fd as component,Ad as universal};

import{g as tl,b as an,f as vs,a as sn,c as nn,u as Ot,d as It,h as on,i as rl,j as gt,F as fn,n as un,e as cn,P as dn,S as hn,k as _n,l as vn,m as mn,o as pn,w as gn,p as bn,q as En}from"../chunks/PropertyPanel.CO2-6vPB.js";import{s as ll}from"../chunks/sortBy.ChsTRid8.js";import{as as Le,s as xe,c as tt,e as Y,t as k,b as re,d as X,f as me,h as y,j as le,i as f,x as te,k as m,l as $,p as pe,a4 as kt,ar as At,u as rt,g as lt,a as at,m as G,A as _t,o as Ke,W as yt,L as Ge,n as we,y as Ne,v as be,P as Ze,V as mt,G as Qe,r as al,Y as mr,I as rr,q as qr,M as sl,N as nl,R as Jt,a2 as ms,ap as ol,aq as Pn,ak as wn}from"../chunks/scheduler.DDVliNtX.js";import{S as nt,i as ot,g as ct,a as de,e as dt,t as ie,c as Oe,b as Ie,m as Fe,d as Te,f as pt}from"../chunks/index.iWffroUJ.js";import{e as Ce}from"../chunks/each.BFyodu2L.js";import{c as kn,a as yn}from"../chunks/_commonjsHelpers.C4iS2aBk.js";import{s as il}from"../chunks/schema.yUOYgQED.js";import{p as Sn}from"../chunks/stores.C3syzrY_.js";import{g as Dn}from"../chunks/entry.DjxHo7gO.js";import{A as pr}from"../chunks/Alert.BsS8d9Dv.js";import{T as Vt,b as ue,a as ps,G as ir,m as Nn,d as fr,o as Rn}from"../chunks/lib.DSnscA8f.js";/* empty css                     */import{j as Cn,u as On,l as In,m as fl,n as ul,o as cl,p as Fn,q as Tn,r as An,s as Ln,t as jn,i as dl,M as qn,S as Un,B as $n,a as Vn,b as zn}from"../chunks/style.CoMyASxi.js";import{e as Rr,n as nr,o as Mn,i as yr,c as Bn,s as hl,a as Hn,b as Qn}from"../chunks/graphStore.5Y1Sa814.js";import{G as Lt}from"../chunks/_Graph.CGXTKsEb.js";import{t as ur,T as gs}from"../chunks/ToggleBar.Dt3UQwWP.js";import{J as _l}from"../chunks/JSONCrush.BlUS0oeb.js";import{T as Gn}from"../chunks/Title.geje0d_0.js";import{L as Kn}from"../chunks/Loading.CSl94oYn.js";import{C as Jn}from"../chunks/Controls.CAcLyyHp.js";async function Yn({fetch:a}){const e=["/api/offensive-technique/all.json","/api/dao/artifacts.json","/api/taxonomies/d3f:DigitalEvent.json","/api/weakness/all.json","/api/ontology/properties/object/all.json","/api/dao/artifact/d3f:DigitalInformation.json"],[{value:{["@graph"]:r}},{value:{["@graph"]:l}},{value:{["@graph"]:t}},{value:{["@graph"]:s}},{value:{["@graph"]:n}},{value:{da_graph:{["@graph"]:o}}}]=await Promise.allSettled(e.map(u=>a(u).then(b=>b.json()))),i=ll(tl(r,"rdfs:label"),u=>u["rdfs:label"]),d=an(t,"d3f:DigitalEvent").map(u=>({...u,children:tl(vs(u.children,u["rdfs:label"]),"rdfs:label")})),h=ll(s,u=>u["rdfs:label"]),v=sn(n),c=nn(o);return{attack:i,dao:l,events:d,weaknesses:h,properties:v,digital_information:c}}const Ed=Object.freeze(Object.defineProperty({__proto__:null,load:Yn},Symbol.toStringTag,{value:"Module"})),vl=a=>Cn(a);function Xn(){const{zoomIn:a,zoomOut:e,fitView:r,onbeforedelete:l,snapGrid:t,viewport:s,width:n,height:o,minZoom:i,maxZoom:_,panZoom:d,nodes:h,edges:v,domNode:c,nodeLookup:u,nodeOrigin:b,edgeLookup:g,connectionLookup:w}=On(),R=p=>{var T,E;const C=Le(u),N=vl(p)?p:C.get(p.id),A=N.parentId?Ln(N.position,N.measured,N.parentId,C,Le(b)):N.position,O={id:N.id,position:A,width:((T=N.measured)==null?void 0:T.width)??N.width,height:((E=N.measured)==null?void 0:E.height)??N.height,data:N.data};return ul(O)},S=(p,C,N={replace:!1})=>{var T;const A=(T=Le(u).get(p))==null?void 0:T.internals.userNode;if(!A)return;const O=typeof C=="function"?C(A):C;N.replace?h.update(E=>E.map(I=>I.id===p?vl(O)?O:{...I,...O}:I)):(Object.assign(A,O),h.update(E=>E))},D=p=>Le(u).get(p);return{zoomIn:a,zoomOut:e,getInternalNode:D,getNode:p=>{var C;return(C=D(p))==null?void 0:C.internals.userNode},getNodes:p=>p===void 0?Le(h):ml(Le(u),p),getEdge:p=>Le(g).get(p),getEdges:p=>p===void 0?Le(v):ml(Le(g),p),setZoom:(p,C)=>{const N=Le(d);return N?N.scaleTo(p,{duration:C==null?void 0:C.duration}):Promise.resolve(!1)},getZoom:()=>Le(s).zoom,setViewport:async(p,C)=>{const N=Le(s),A=Le(d);return A?(await A.setViewport({x:p.x??N.x,y:p.y??N.y,zoom:p.zoom??N.zoom},{duration:C==null?void 0:C.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>Le(s),setCenter:async(p,C,N)=>{const A=typeof(N==null?void 0:N.zoom)<"u"?N.zoom:Le(_),O=Le(d);return O?(await O.setViewport({x:Le(n)/2-p*A,y:Le(o)/2-C*A,zoom:A},{duration:N==null?void 0:N.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:r,fitBounds:async(p,C)=>{const N=Le(d);if(!N)return Promise.resolve(!1);const A=In(p,Le(n),Le(o),Le(i),Le(_),(C==null?void 0:C.padding)??.1);return await N.setViewport(A,{duration:C==null?void 0:C.duration}),Promise.resolve(!0)},getIntersectingNodes:(p,C=!0,N)=>{const A=fl(p),O=A?p:R(p);return O?(N||Le(h)).filter(T=>{const E=Le(u).get(T.id);if(!E||!A&&T.id===p.id)return!1;const I=ul(E),P=cl(I,O);return C&&P>0||P>=O.width*O.height}):[]},isNodeIntersecting:(p,C,N=!0)=>{const O=fl(p)?p:R(p);if(!O)return!1;const T=cl(O,C);return N&&T>0||T>=O.width*O.height},deleteElements:async({nodes:p=[],edges:C=[]})=>{const{nodes:N,edges:A}=await Fn({nodesToRemove:p,edgesToRemove:C,nodes:Le(h),edges:Le(v),onBeforeDelete:Le(l)});return N&&h.update(O=>O.filter(T=>!N.some(({id:E})=>E===T.id))),A&&v.update(O=>O.filter(T=>!A.some(({id:E})=>E===T.id))),{deletedNodes:N,deletedEdges:A}},screenToFlowPosition:(p,C={snapToGrid:!0})=>{const N=Le(c);if(!N)return p;const A=C.snapToGrid?Le(t):!1,{x:O,y:T,zoom:E}=Le(s),{x:I,y:P}=N.getBoundingClientRect(),F={x:p.x-I,y:p.y-P};return Tn(F,[O,T,E],A!==null,A||[1,1])},flowToScreenPosition:p=>{const C=Le(c);if(!C)return p;const{x:N,y:A,zoom:O}=Le(s),{x:T,y:E}=C.getBoundingClientRect(),I=jn(p,[N,A,O]);return{x:I.x+T,y:I.y+E}},toObject:()=>({nodes:Le(h).map(p=>({...p,position:{...p.position},data:{...p.data}})),edges:Le(v).map(p=>({...p})),viewport:{...Le(s)}}),updateNode:S,updateNodeData:(p,C,N)=>{var T;const A=(T=Le(u).get(p))==null?void 0:T.internals.userNode;if(!A)return;const O=typeof C=="function"?C(A):C;A.data=N!=null&&N.replace?O:{...A.data,...O},h.update(E=>E)},getNodesBounds:p=>{const C=Le(u),N=Le(b);return An(p,{nodeLookup:C,nodeOrigin:N})},getHandleConnections:({type:p,id:C,nodeId:N})=>{var A;return Array.from(((A=Le(w).get(`${N}-${p}-${C??null}`))==null?void 0:A.values())??[])},viewport:s}}function ml(a,e){var l;const r=[];for(const t of e){const s=a.get(t);if(s){const n="internals"in s?(l=s.internals)==null?void 0:l.userNode:s;r.push(n)}}return r}var Cr={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(a,e){(function(r,l){l(e)})(kn,function(r){function l(){for(var z=arguments.length,q=Array(z),M=0;M<z;M++)q[M]=arguments[M];if(q.length>1){q[0]=q[0].slice(0,-1);for(var ee=q.length-1,W=1;W<ee;++W)q[W]=q[W].slice(1,-1);return q[ee]=q[ee].slice(1),q.join("")}else return q[0]}function t(z){return"(?:"+z+")"}function s(z){return z===void 0?"undefined":z===null?"null":Object.prototype.toString.call(z).split(" ").pop().split("]").shift().toLowerCase()}function n(z){return z.toUpperCase()}function o(z){return z!=null?z instanceof Array?z:typeof z.length!="number"||z.split||z.setInterval||z.call?[z]:Array.prototype.slice.call(z):[]}function i(z,q){var M=z;if(q)for(var ee in q)M[ee]=q[ee];return M}function _(z){var q="[A-Za-z]",M="[0-9]",ee=l(M,"[A-Fa-f]"),W=t(t("%[EFef]"+ee+"%"+ee+ee+"%"+ee+ee)+"|"+t("%[89A-Fa-f]"+ee+"%"+ee+ee)+"|"+t("%"+ee+ee)),ye="[\\:\\/\\?\\#\\[\\]\\@]",Se="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Ve=l(ye,Se),He=z?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",it=z?"[\\uE000-\\uF8FF]":"[]",Ue=l(q,M,"[\\-\\.\\_\\~]",He);t(q+l(q,M,"[\\+\\-\\.]")+"*"),t(t(W+"|"+l(Ue,Se,"[\\:]"))+"*");var ze=t(t("25[0-5]")+"|"+t("2[0-4]"+M)+"|"+t("1"+M+M)+"|"+t("0?[1-9]"+M)+"|0?0?"+M),ft=t(ze+"\\."+ze+"\\."+ze+"\\."+ze),Ae=t(ee+"{1,4}"),Ye=t(t(Ae+"\\:"+Ae)+"|"+ft),ut=t(t(Ae+"\\:")+"{6}"+Ye),Xe=t("\\:\\:"+t(Ae+"\\:")+"{5}"+Ye),qt=t(t(Ae)+"?\\:\\:"+t(Ae+"\\:")+"{4}"+Ye),Nt=t(t(t(Ae+"\\:")+"{0,1}"+Ae)+"?\\:\\:"+t(Ae+"\\:")+"{3}"+Ye),Rt=t(t(t(Ae+"\\:")+"{0,2}"+Ae)+"?\\:\\:"+t(Ae+"\\:")+"{2}"+Ye),Kt=t(t(t(Ae+"\\:")+"{0,3}"+Ae)+"?\\:\\:"+Ae+"\\:"+Ye),Mt=t(t(t(Ae+"\\:")+"{0,4}"+Ae)+"?\\:\\:"+Ye),wt=t(t(t(Ae+"\\:")+"{0,5}"+Ae)+"?\\:\\:"+Ae),Ct=t(t(t(Ae+"\\:")+"{0,6}"+Ae)+"?\\:\\:"),Bt=t([ut,Xe,qt,Nt,Rt,Kt,Mt,wt,Ct].join("|")),Tt=t(t(Ue+"|"+W)+"+");t("[vV]"+ee+"+\\."+l(Ue,Se,"[\\:]")+"+"),t(t(W+"|"+l(Ue,Se))+"*");var Xt=t(W+"|"+l(Ue,Se,"[\\:\\@]"));return t(t(W+"|"+l(Ue,Se,"[\\@]"))+"+"),t(t(Xt+"|"+l("[\\/\\?]",it))+"*"),{NOT_SCHEME:new RegExp(l("[^]",q,M,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(l("[^\\%\\:]",Ue,Se),"g"),NOT_HOST:new RegExp(l("[^\\%\\[\\]\\:]",Ue,Se),"g"),NOT_PATH:new RegExp(l("[^\\%\\/\\:\\@]",Ue,Se),"g"),NOT_PATH_NOSCHEME:new RegExp(l("[^\\%\\/\\@]",Ue,Se),"g"),NOT_QUERY:new RegExp(l("[^\\%]",Ue,Se,"[\\:\\@\\/\\?]",it),"g"),NOT_FRAGMENT:new RegExp(l("[^\\%]",Ue,Se,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(l("[^]",Ue,Se),"g"),UNRESERVED:new RegExp(Ue,"g"),OTHER_CHARS:new RegExp(l("[^\\%]",Ue,Ve),"g"),PCT_ENCODED:new RegExp(W,"g"),IPV4ADDRESS:new RegExp("^("+ft+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Bt+")"+t(t("\\%25|\\%(?!"+ee+"{2})")+"("+Tt+")")+"?\\]?$")}}var d=_(!1),h=_(!0),v=function(){function z(q,M){var ee=[],W=!0,ye=!1,Se=void 0;try{for(var Ve=q[Symbol.iterator](),He;!(W=(He=Ve.next()).done)&&(ee.push(He.value),!(M&&ee.length===M));W=!0);}catch(it){ye=!0,Se=it}finally{try{!W&&Ve.return&&Ve.return()}finally{if(ye)throw Se}}return ee}return function(q,M){if(Array.isArray(q))return q;if(Symbol.iterator in Object(q))return z(q,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(z){if(Array.isArray(z)){for(var q=0,M=Array(z.length);q<z.length;q++)M[q]=z[q];return M}else return Array.from(z)},u=2147483647,b=36,g=1,w=26,R=38,S=700,D=72,p=128,C="-",N=/^xn--/,A=/[^\0-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=b-g,I=Math.floor,P=String.fromCharCode;function F(z){throw new RangeError(T[z])}function K(z,q){for(var M=[],ee=z.length;ee--;)M[ee]=q(z[ee]);return M}function x(z,q){var M=z.split("@"),ee="";M.length>1&&(ee=M[0]+"@",z=M[1]),z=z.replace(O,".");var W=z.split("."),ye=K(W,q).join(".");return ee+ye}function se(z){for(var q=[],M=0,ee=z.length;M<ee;){var W=z.charCodeAt(M++);if(W>=55296&&W<=56319&&M<ee){var ye=z.charCodeAt(M++);(ye&64512)==56320?q.push(((W&1023)<<10)+(ye&1023)+65536):(q.push(W),M--)}else q.push(W)}return q}var B=function(q){return String.fromCodePoint.apply(String,c(q))},H=function(q){return q-48<10?q-22:q-65<26?q-65:q-97<26?q-97:b},V=function(q,M){return q+22+75*(q<26)-((M!=0)<<5)},U=function(q,M,ee){var W=0;for(q=ee?I(q/S):q>>1,q+=I(q/M);q>E*w>>1;W+=b)q=I(q/E);return I(W+(E+1)*q/(q+R))},J=function(q){var M=[],ee=q.length,W=0,ye=p,Se=D,Ve=q.lastIndexOf(C);Ve<0&&(Ve=0);for(var He=0;He<Ve;++He)q.charCodeAt(He)>=128&&F("not-basic"),M.push(q.charCodeAt(He));for(var it=Ve>0?Ve+1:0;it<ee;){for(var Ue=W,ze=1,ft=b;;ft+=b){it>=ee&&F("invalid-input");var Ae=H(q.charCodeAt(it++));(Ae>=b||Ae>I((u-W)/ze))&&F("overflow"),W+=Ae*ze;var Ye=ft<=Se?g:ft>=Se+w?w:ft-Se;if(Ae<Ye)break;var ut=b-Ye;ze>I(u/ut)&&F("overflow"),ze*=ut}var Xe=M.length+1;Se=U(W-Ue,Xe,Ue==0),I(W/Xe)>u-ye&&F("overflow"),ye+=I(W/Xe),W%=Xe,M.splice(W++,0,ye)}return String.fromCodePoint.apply(String,M)},L=function(q){var M=[];q=se(q);var ee=q.length,W=p,ye=0,Se=D,Ve=!0,He=!1,it=void 0;try{for(var Ue=q[Symbol.iterator](),ze;!(Ve=(ze=Ue.next()).done);Ve=!0){var ft=ze.value;ft<128&&M.push(P(ft))}}catch(Zt){He=!0,it=Zt}finally{try{!Ve&&Ue.return&&Ue.return()}finally{if(He)throw it}}var Ae=M.length,Ye=Ae;for(Ae&&M.push(C);Ye<ee;){var ut=u,Xe=!0,qt=!1,Nt=void 0;try{for(var Rt=q[Symbol.iterator](),Kt;!(Xe=(Kt=Rt.next()).done);Xe=!0){var Mt=Kt.value;Mt>=W&&Mt<ut&&(ut=Mt)}}catch(Zt){qt=!0,Nt=Zt}finally{try{!Xe&&Rt.return&&Rt.return()}finally{if(qt)throw Nt}}var wt=Ye+1;ut-W>I((u-ye)/wt)&&F("overflow"),ye+=(ut-W)*wt,W=ut;var Ct=!0,Bt=!1,Tt=void 0;try{for(var Xt=q[Symbol.iterator](),Zr;!(Ct=(Zr=Xt.next()).done);Ct=!0){var Wr=Zr.value;if(Wr<W&&++ye>u&&F("overflow"),Wr==W){for(var xt=ye,er=b;;er+=b){var tr=er<=Se?g:er>=Se+w?w:er-Se;if(xt<tr)break;var xr=xt-tr,el=b-tr;M.push(P(V(tr+xr%el,0))),xt=I(xr/el)}M.push(P(V(xt,0))),Se=U(ye,wt,Ye==Ae),ye=0,++Ye}}}catch(Zt){Bt=!0,Tt=Zt}finally{try{!Ct&&Xt.return&&Xt.return()}finally{if(Bt)throw Tt}}++ye,++W}return M.join("")},Q=function(q){return x(q,function(M){return N.test(M)?J(M.slice(4).toLowerCase()):M})},ke=function(q){return x(q,function(M){return A.test(M)?"xn--"+L(M):M})},Pe={version:"2.1.0",ucs2:{decode:se,encode:B},decode:J,encode:L,toASCII:ke,toUnicode:Q},ne={};function _e(z){var q=z.charCodeAt(0),M=void 0;return q<16?M="%0"+q.toString(16).toUpperCase():q<128?M="%"+q.toString(16).toUpperCase():q<2048?M="%"+(q>>6|192).toString(16).toUpperCase()+"%"+(q&63|128).toString(16).toUpperCase():M="%"+(q>>12|224).toString(16).toUpperCase()+"%"+(q>>6&63|128).toString(16).toUpperCase()+"%"+(q&63|128).toString(16).toUpperCase(),M}function fe(z){for(var q="",M=0,ee=z.length;M<ee;){var W=parseInt(z.substr(M+1,2),16);if(W<128)q+=String.fromCharCode(W),M+=3;else if(W>=194&&W<224){if(ee-M>=6){var ye=parseInt(z.substr(M+4,2),16);q+=String.fromCharCode((W&31)<<6|ye&63)}else q+=z.substr(M,6);M+=6}else if(W>=224){if(ee-M>=9){var Se=parseInt(z.substr(M+4,2),16),Ve=parseInt(z.substr(M+7,2),16);q+=String.fromCharCode((W&15)<<12|(Se&63)<<6|Ve&63)}else q+=z.substr(M,9);M+=9}else q+=z.substr(M,3),M+=3}return q}function ce(z,q){function M(ee){var W=fe(ee);return W.match(q.UNRESERVED)?W:ee}return z.scheme&&(z.scheme=String(z.scheme).replace(q.PCT_ENCODED,M).toLowerCase().replace(q.NOT_SCHEME,"")),z.userinfo!==void 0&&(z.userinfo=String(z.userinfo).replace(q.PCT_ENCODED,M).replace(q.NOT_USERINFO,_e).replace(q.PCT_ENCODED,n)),z.host!==void 0&&(z.host=String(z.host).replace(q.PCT_ENCODED,M).toLowerCase().replace(q.NOT_HOST,_e).replace(q.PCT_ENCODED,n)),z.path!==void 0&&(z.path=String(z.path).replace(q.PCT_ENCODED,M).replace(z.scheme?q.NOT_PATH:q.NOT_PATH_NOSCHEME,_e).replace(q.PCT_ENCODED,n)),z.query!==void 0&&(z.query=String(z.query).replace(q.PCT_ENCODED,M).replace(q.NOT_QUERY,_e).replace(q.PCT_ENCODED,n)),z.fragment!==void 0&&(z.fragment=String(z.fragment).replace(q.PCT_ENCODED,M).replace(q.NOT_FRAGMENT,_e).replace(q.PCT_ENCODED,n)),z}function Re(z){return z.replace(/^0*(.*)/,"$1")||"0"}function $e(z,q){var M=z.match(q.IPV4ADDRESS)||[],ee=v(M,2),W=ee[1];return W?W.split(".").map(Re).join("."):z}function Z(z,q){var M=z.match(q.IPV6ADDRESS)||[],ee=v(M,3),W=ee[1],ye=ee[2];if(W){for(var Se=W.toLowerCase().split("::").reverse(),Ve=v(Se,2),He=Ve[0],it=Ve[1],Ue=it?it.split(":").map(Re):[],ze=He.split(":").map(Re),ft=q.IPV4ADDRESS.test(ze[ze.length-1]),Ae=ft?7:8,Ye=ze.length-Ae,ut=Array(Ae),Xe=0;Xe<Ae;++Xe)ut[Xe]=Ue[Xe]||ze[Ye+Xe]||"";ft&&(ut[Ae-1]=$e(ut[Ae-1],q));var qt=ut.reduce(function(wt,Ct,Bt){if(!Ct||Ct==="0"){var Tt=wt[wt.length-1];Tt&&Tt.index+Tt.length===Bt?Tt.length++:wt.push({index:Bt,length:1})}return wt},[]),Nt=qt.sort(function(wt,Ct){return Ct.length-wt.length})[0],Rt=void 0;if(Nt&&Nt.length>1){var Kt=ut.slice(0,Nt.index),Mt=ut.slice(Nt.index+Nt.length);Rt=Kt.join(":")+"::"+Mt.join(":")}else Rt=ut.join(":");return ye&&(Rt+="%"+ye),Rt}else return z}var j=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,ae="".match(/(){0}/)[1]===void 0;function je(z){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M={},ee=q.iri!==!1?h:d;q.reference==="suffix"&&(z=(q.scheme?q.scheme+":":"")+"//"+z);var W=z.match(j);if(W){ae?(M.scheme=W[1],M.userinfo=W[3],M.host=W[4],M.port=parseInt(W[5],10),M.path=W[6]||"",M.query=W[7],M.fragment=W[8],isNaN(M.port)&&(M.port=W[5])):(M.scheme=W[1]||void 0,M.userinfo=z.indexOf("@")!==-1?W[3]:void 0,M.host=z.indexOf("//")!==-1?W[4]:void 0,M.port=parseInt(W[5],10),M.path=W[6]||"",M.query=z.indexOf("?")!==-1?W[7]:void 0,M.fragment=z.indexOf("#")!==-1?W[8]:void 0,isNaN(M.port)&&(M.port=z.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?W[4]:void 0)),M.host&&(M.host=Z($e(M.host,ee),ee)),M.scheme===void 0&&M.userinfo===void 0&&M.host===void 0&&M.port===void 0&&!M.path&&M.query===void 0?M.reference="same-document":M.scheme===void 0?M.reference="relative":M.fragment===void 0?M.reference="absolute":M.reference="uri",q.reference&&q.reference!=="suffix"&&q.reference!==M.reference&&(M.error=M.error||"URI is not a "+q.reference+" reference.");var ye=ne[(q.scheme||M.scheme||"").toLowerCase()];if(!q.unicodeSupport&&(!ye||!ye.unicodeSupport)){if(M.host&&(q.domainHost||ye&&ye.domainHost))try{M.host=Pe.toASCII(M.host.replace(ee.PCT_ENCODED,fe).toLowerCase())}catch(Se){M.error=M.error||"Host's domain name can not be converted to ASCII via punycode: "+Se}ce(M,d)}else ce(M,ee);ye&&ye.parse&&ye.parse(M,q)}else M.error=M.error||"URI can not be parsed.";return M}function Me(z,q){var M=q.iri!==!1?h:d,ee=[];return z.userinfo!==void 0&&(ee.push(z.userinfo),ee.push("@")),z.host!==void 0&&ee.push(Z($e(String(z.host),M),M).replace(M.IPV6ADDRESS,function(W,ye,Se){return"["+ye+(Se?"%25"+Se:"")+"]"})),(typeof z.port=="number"||typeof z.port=="string")&&(ee.push(":"),ee.push(String(z.port))),ee.length?ee.join(""):void 0}var Be=/^\.\.?\//,qe=/^\/\.(\/|$)/,vt=/^\/\.\.(\/|$)/,St=/^\/?(?:.|\n)*?(?=\/|$)/;function We(z){for(var q=[];z.length;)if(z.match(Be))z=z.replace(Be,"");else if(z.match(qe))z=z.replace(qe,"/");else if(z.match(vt))z=z.replace(vt,"/"),q.pop();else if(z==="."||z==="..")z="";else{var M=z.match(St);if(M){var ee=M[0];z=z.slice(ee.length),q.push(ee)}else throw new Error("Unexpected dot segment condition")}return q.join("")}function Je(z){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M=q.iri?h:d,ee=[],W=ne[(q.scheme||z.scheme||"").toLowerCase()];if(W&&W.serialize&&W.serialize(z,q),z.host&&!M.IPV6ADDRESS.test(z.host)){if(q.domainHost||W&&W.domainHost)try{z.host=q.iri?Pe.toUnicode(z.host):Pe.toASCII(z.host.replace(M.PCT_ENCODED,fe).toLowerCase())}catch(Ve){z.error=z.error||"Host's domain name can not be converted to "+(q.iri?"Unicode":"ASCII")+" via punycode: "+Ve}}ce(z,M),q.reference!=="suffix"&&z.scheme&&(ee.push(z.scheme),ee.push(":"));var ye=Me(z,q);if(ye!==void 0&&(q.reference!=="suffix"&&ee.push("//"),ee.push(ye),z.path&&z.path.charAt(0)!=="/"&&ee.push("/")),z.path!==void 0){var Se=z.path;!q.absolutePath&&(!W||!W.absolutePath)&&(Se=We(Se)),ye===void 0&&(Se=Se.replace(/^\/\//,"/%2F")),ee.push(Se)}return z.query!==void 0&&(ee.push("?"),ee.push(z.query)),z.fragment!==void 0&&(ee.push("#"),ee.push(z.fragment)),ee.join("")}function ht(z,q){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ee=arguments[3],W={};return ee||(z=je(Je(z,M),M),q=je(Je(q,M),M)),M=M||{},!M.tolerant&&q.scheme?(W.scheme=q.scheme,W.userinfo=q.userinfo,W.host=q.host,W.port=q.port,W.path=We(q.path||""),W.query=q.query):(q.userinfo!==void 0||q.host!==void 0||q.port!==void 0?(W.userinfo=q.userinfo,W.host=q.host,W.port=q.port,W.path=We(q.path||""),W.query=q.query):(q.path?(q.path.charAt(0)==="/"?W.path=We(q.path):((z.userinfo!==void 0||z.host!==void 0||z.port!==void 0)&&!z.path?W.path="/"+q.path:z.path?W.path=z.path.slice(0,z.path.lastIndexOf("/")+1)+q.path:W.path=q.path,W.path=We(W.path)),W.query=q.query):(W.path=z.path,q.query!==void 0?W.query=q.query:W.query=z.query),W.userinfo=z.userinfo,W.host=z.host,W.port=z.port),W.scheme=z.scheme),W.fragment=q.fragment,W}function he(z,q,M){var ee=i({scheme:"null"},M);return Je(ht(je(z,ee),je(q,ee),ee,!0),ee)}function Ee(z,q){return typeof z=="string"?z=Je(je(z,q),q):s(z)==="object"&&(z=je(Je(z,q),q)),z}function ge(z,q,M){return typeof z=="string"?z=Je(je(z,M),M):s(z)==="object"&&(z=Je(z,M)),typeof q=="string"?q=Je(je(q,M),M):s(q)==="object"&&(q=Je(q,M)),z===q}function oe(z,q){return z&&z.toString().replace(!q||!q.iri?d.ESCAPE:h.ESCAPE,_e)}function ve(z,q){return z&&z.toString().replace(!q||!q.iri?d.PCT_ENCODED:h.PCT_ENCODED,fe)}var De={scheme:"http",domainHost:!0,parse:function(q,M){return q.host||(q.error=q.error||"HTTP URIs must have a host."),q},serialize:function(q,M){var ee=String(q.scheme).toLowerCase()==="https";return(q.port===(ee?443:80)||q.port==="")&&(q.port=void 0),q.path||(q.path="/"),q}},et={scheme:"https",domainHost:De.domainHost,parse:De.parse,serialize:De.serialize};function bt(z){return typeof z.secure=="boolean"?z.secure:String(z.scheme).toLowerCase()==="wss"}var Et={scheme:"ws",domainHost:!0,parse:function(q,M){var ee=q;return ee.secure=bt(ee),ee.resourceName=(ee.path||"/")+(ee.query?"?"+ee.query:""),ee.path=void 0,ee.query=void 0,ee},serialize:function(q,M){if((q.port===(bt(q)?443:80)||q.port==="")&&(q.port=void 0),typeof q.secure=="boolean"&&(q.scheme=q.secure?"wss":"ws",q.secure=void 0),q.resourceName){var ee=q.resourceName.split("?"),W=v(ee,2),ye=W[0],Se=W[1];q.path=ye&&ye!=="/"?ye:void 0,q.query=Se,q.resourceName=void 0}return q.fragment=void 0,q}},Pt={scheme:"wss",domainHost:Et.domainHost,parse:Et.parse,serialize:Et.serialize},Ft={},Qt="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Dt="[0-9A-Fa-f]",Js=t(t("%[EFef]"+Dt+"%"+Dt+Dt+"%"+Dt+Dt)+"|"+t("%[89A-Fa-f]"+Dt+"%"+Dt+Dt)+"|"+t("%"+Dt+Dt)),Ys="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Xs="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Zs=l(Xs,'[\\"\\\\]'),Ws="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",xs=new RegExp(Qt,"g"),Gt=new RegExp(Js,"g"),en=new RegExp(l("[^]",Ys,"[\\.]",'[\\"]',Zs),"g"),Kr=new RegExp(l("[^]",Qt,Ws),"g"),tn=Kr;function kr(z){var q=fe(z);return q.match(xs)?q:z}var Jr={scheme:"mailto",parse:function(q,M){var ee=q,W=ee.to=ee.path?ee.path.split(","):[];if(ee.path=void 0,ee.query){for(var ye=!1,Se={},Ve=ee.query.split("&"),He=0,it=Ve.length;He<it;++He){var Ue=Ve[He].split("=");switch(Ue[0]){case"to":for(var ze=Ue[1].split(","),ft=0,Ae=ze.length;ft<Ae;++ft)W.push(ze[ft]);break;case"subject":ee.subject=ve(Ue[1],M);break;case"body":ee.body=ve(Ue[1],M);break;default:ye=!0,Se[ve(Ue[0],M)]=ve(Ue[1],M);break}}ye&&(ee.headers=Se)}ee.query=void 0;for(var Ye=0,ut=W.length;Ye<ut;++Ye){var Xe=W[Ye].split("@");if(Xe[0]=ve(Xe[0]),M.unicodeSupport)Xe[1]=ve(Xe[1],M).toLowerCase();else try{Xe[1]=Pe.toASCII(ve(Xe[1],M).toLowerCase())}catch(qt){ee.error=ee.error||"Email address's domain name can not be converted to ASCII via punycode: "+qt}W[Ye]=Xe.join("@")}return ee},serialize:function(q,M){var ee=q,W=o(q.to);if(W){for(var ye=0,Se=W.length;ye<Se;++ye){var Ve=String(W[ye]),He=Ve.lastIndexOf("@"),it=Ve.slice(0,He).replace(Gt,kr).replace(Gt,n).replace(en,_e),Ue=Ve.slice(He+1);try{Ue=M.iri?Pe.toUnicode(Ue):Pe.toASCII(ve(Ue,M).toLowerCase())}catch(Ye){ee.error=ee.error||"Email address's domain name can not be converted to "+(M.iri?"Unicode":"ASCII")+" via punycode: "+Ye}W[ye]=it+"@"+Ue}ee.path=W.join(",")}var ze=q.headers=q.headers||{};q.subject&&(ze.subject=q.subject),q.body&&(ze.body=q.body);var ft=[];for(var Ae in ze)ze[Ae]!==Ft[Ae]&&ft.push(Ae.replace(Gt,kr).replace(Gt,n).replace(Kr,_e)+"="+ze[Ae].replace(Gt,kr).replace(Gt,n).replace(tn,_e));return ft.length&&(ee.query=ft.join("&")),ee}},rn=/^([^\:]+)\:(.*)/,Yr={scheme:"urn",parse:function(q,M){var ee=q.path&&q.path.match(rn),W=q;if(ee){var ye=M.scheme||W.scheme||"urn",Se=ee[1].toLowerCase(),Ve=ee[2],He=ye+":"+(M.nid||Se),it=ne[He];W.nid=Se,W.nss=Ve,W.path=void 0,it&&(W=it.parse(W,M))}else W.error=W.error||"URN can not be parsed.";return W},serialize:function(q,M){var ee=M.scheme||q.scheme||"urn",W=q.nid,ye=ee+":"+(M.nid||W),Se=ne[ye];Se&&(q=Se.serialize(q,M));var Ve=q,He=q.nss;return Ve.path=(W||M.nid)+":"+He,Ve}},ln=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Xr={scheme:"urn:uuid",parse:function(q,M){var ee=q;return ee.uuid=ee.nss,ee.nss=void 0,!M.tolerant&&(!ee.uuid||!ee.uuid.match(ln))&&(ee.error=ee.error||"UUID is not valid."),ee},serialize:function(q,M){var ee=q;return ee.nss=(q.uuid||"").toLowerCase(),ee}};ne[De.scheme]=De,ne[et.scheme]=et,ne[Et.scheme]=Et,ne[Pt.scheme]=Pt,ne[Jr.scheme]=Jr,ne[Yr.scheme]=Yr,ne[Xr.scheme]=Xr,r.SCHEMES=ne,r.pctEncChar=_e,r.pctDecChars=fe,r.parse=je,r.removeDotSegments=We,r.serialize=Je,r.resolveComponents=ht,r.resolve=he,r.normalize=Ee,r.equal=ge,r.escapeComponent=oe,r.unescapeComponent=ve,Object.defineProperty(r,"__esModule",{value:!0})})})(Cr,Cr.exports);var Zn=Cr.exports,Ur=function a(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var l,t,s;if(Array.isArray(e)){if(l=e.length,l!=r.length)return!1;for(t=l;t--!==0;)if(!a(e[t],r[t]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(s=Object.keys(e),l=s.length,l!==Object.keys(r).length)return!1;for(t=l;t--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[t]))return!1;for(t=l;t--!==0;){var n=s[t];if(!a(e[n],r[n]))return!1}return!0}return e!==e&&r!==r},Wn=function(e){for(var r=0,l=e.length,t=0,s;t<l;)r++,s=e.charCodeAt(t++),s>=55296&&s<=56319&&t<l&&(s=e.charCodeAt(t),(s&64512)==56320&&t++);return r},Yt={copy:xn,checkDataType:Or,checkDataTypes:eo,coerceToTypes:to,toHash:$r,getProperty:Vr,escapeQuotes:zr,equal:Ur,ucs2length:Wn,varOccurences:ao,varReplace:so,schemaHasRules:no,schemaHasRulesExcept:oo,schemaUnknownRules:io,toQuotedString:Ir,getPathExpr:fo,getPath:uo,getData:_o,unescapeFragment:vo,unescapeJsonPointer:Br,escapeFragment:mo,escapeJsonPointer:Mr};function xn(a,e){e=e||{};for(var r in a)e[r]=a[r];return e}function Or(a,e,r,l){var t=l?" !== ":" === ",s=l?" || ":" && ",n=l?"!":"",o=l?"":"!";switch(a){case"null":return e+t+"null";case"array":return n+"Array.isArray("+e+")";case"object":return"("+n+e+s+"typeof "+e+t+'"object"'+s+o+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+t+'"number"'+s+o+"("+e+" % 1)"+s+e+t+e+(r?s+n+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+t+'"'+a+'"'+(r?s+n+"isFinite("+e+")":"")+")";default:return"typeof "+e+t+'"'+a+'"'}}function eo(a,e,r){switch(a.length){case 1:return Or(a[0],e,r,!0);default:var l="",t=$r(a);t.array&&t.object&&(l=t.null?"(":"(!"+e+" || ",l+="typeof "+e+' !== "object")',delete t.null,delete t.array,delete t.object),t.number&&delete t.integer;for(var s in t)l+=(l?" && ":"")+Or(s,e,r,!0);return l}}var pl=$r(["string","number","integer","boolean","null"]);function to(a,e){if(Array.isArray(e)){for(var r=[],l=0;l<e.length;l++){var t=e[l];(pl[t]||a==="array"&&t==="array")&&(r[r.length]=t)}if(r.length)return r}else{if(pl[e])return[e];if(a==="array"&&e==="array")return["array"]}}function $r(a){for(var e={},r=0;r<a.length;r++)e[a[r]]=!0;return e}var ro=/^[a-z$_][a-z$_0-9]*$/i,lo=/'|\\/g;function Vr(a){return typeof a=="number"?"["+a+"]":ro.test(a)?"."+a:"['"+zr(a)+"']"}function zr(a){return a.replace(lo,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function ao(a,e){e+="[^0-9]";var r=a.match(new RegExp(e,"g"));return r?r.length:0}function so(a,e,r){return e+="([^0-9])",r=r.replace(/\$/g,"$$$$"),a.replace(new RegExp(e,"g"),r+"$1")}function no(a,e){if(typeof a=="boolean")return!a;for(var r in a)if(e[r])return!0}function oo(a,e,r){if(typeof a=="boolean")return!a&&r!="not";for(var l in a)if(l!=r&&e[l])return!0}function io(a,e){if(typeof a!="boolean"){for(var r in a)if(!e[r])return r}}function Ir(a){return"'"+zr(a)+"'"}function fo(a,e,r,l){var t=r?"'/' + "+e+(l?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):l?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return bs(a,t)}function uo(a,e,r){var l=Ir(r?"/"+Mr(e):Vr(e));return bs(a,l)}var co=/^\/(?:[^~]|~0|~1)*$/,ho=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function _o(a,e,r){var l,t,s,n;if(a==="")return"rootData";if(a[0]=="/"){if(!co.test(a))throw new Error("Invalid JSON-pointer: "+a);t=a,s="rootData"}else{if(n=a.match(ho),!n)throw new Error("Invalid JSON-pointer: "+a);if(l=+n[1],t=n[2],t=="#"){if(l>=e)throw new Error("Cannot access property/index "+l+" levels up, current level is "+e);return r[e-l]}if(l>e)throw new Error("Cannot access data "+l+" levels up, current level is "+e);if(s="data"+(e-l||""),!t)return s}for(var o=s,i=t.split("/"),_=0;_<i.length;_++){var d=i[_];d&&(s+=Vr(Br(d)),o+=" && "+s)}return o}function bs(a,e){return a=='""'?e:(a+" + "+e).replace(/([^\\])' \+ '/g,"$1")}function vo(a){return Br(decodeURIComponent(a))}function mo(a){return encodeURIComponent(Mr(a))}function Mr(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}function Br(a){return a.replace(/~1/g,"/").replace(/~0/g,"~")}var po=Yt,Es=go;function go(a){po.copy(a,this)}var Ps={exports:{}},Ut=Ps.exports=function(a,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var l=typeof r=="function"?r:r.pre||function(){},t=r.post||function(){};or(e,l,t,a,"",a)};Ut.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};Ut.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Ut.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Ut.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function or(a,e,r,l,t,s,n,o,i,_){if(l&&typeof l=="object"&&!Array.isArray(l)){e(l,t,s,n,o,i,_);for(var d in l){var h=l[d];if(Array.isArray(h)){if(d in Ut.arrayKeywords)for(var v=0;v<h.length;v++)or(a,e,r,h[v],t+"/"+d+"/"+v,s,t,d,l,v)}else if(d in Ut.propsKeywords){if(h&&typeof h=="object")for(var c in h)or(a,e,r,h[c],t+"/"+d+"/"+bo(c),s,t,d,l,c)}else(d in Ut.keywords||a.allKeys&&!(d in Ut.skipKeywords))&&or(a,e,r,h,t+"/"+d,s,t,d,l)}r(l,t,s,n,o,i,_)}}function bo(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}var Eo=Ps.exports,Wt=Zn,gl=Ur,gr=Yt,cr=Es,Po=Eo,Hr=zt;zt.normalizeId=$t;zt.fullPath=dr;zt.url=hr;zt.ids=Do;zt.inlineRef=Fr;zt.schema=br;function zt(a,e,r){var l=this._refs[r];if(typeof l=="string")if(this._refs[l])l=this._refs[l];else return zt.call(this,a,e,l);if(l=l||this._schemas[r],l instanceof cr)return Fr(l.schema,this._opts.inlineRefs)?l.schema:l.validate||this._compile(l);var t=br.call(this,e,r),s,n,o;return t&&(s=t.schema,e=t.root,o=t.baseId),s instanceof cr?n=s.validate||a.call(this,s.schema,e,void 0,o):s!==void 0&&(n=Fr(s,this._opts.inlineRefs)?s:a.call(this,s,e,void 0,o)),n}function br(a,e){var r=Wt.parse(e),l=ks(r),t=dr(this._getId(a.schema));if(Object.keys(a.schema).length===0||l!==t){var s=$t(l),n=this._refs[s];if(typeof n=="string")return wo.call(this,a,n,r);if(n instanceof cr)n.validate||this._compile(n),a=n;else if(n=this._schemas[s],n instanceof cr){if(n.validate||this._compile(n),s==$t(e))return{schema:n,root:a,baseId:t};a=n}else return;if(!a.schema)return;t=dr(this._getId(a.schema))}return ws.call(this,r,t,a.schema,a)}function wo(a,e,r){var l=br.call(this,a,e);if(l){var t=l.schema,s=l.baseId;a=l.root;var n=this._getId(t);return n&&(s=hr(s,n)),ws.call(this,r,s,t,a)}}var ko=gr.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function ws(a,e,r,l){if(a.fragment=a.fragment||"",a.fragment.slice(0,1)=="/"){for(var t=a.fragment.split("/"),s=1;s<t.length;s++){var n=t[s];if(n){if(n=gr.unescapeFragment(n),r=r[n],r===void 0)break;var o;if(!ko[n]&&(o=this._getId(r),o&&(e=hr(e,o)),r.$ref)){var i=hr(e,r.$ref),_=br.call(this,l,i);_&&(r=_.schema,l=_.root,e=_.baseId)}}}if(r!==void 0&&r!==l.schema)return{schema:r,root:l,baseId:e}}}var yo=gr.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function Fr(a,e){if(e===!1)return!1;if(e===void 0||e===!0)return Tr(a);if(e)return Ar(a)<=e}function Tr(a){var e;if(Array.isArray(a)){for(var r=0;r<a.length;r++)if(e=a[r],typeof e=="object"&&!Tr(e))return!1}else for(var l in a)if(l=="$ref"||(e=a[l],typeof e=="object"&&!Tr(e)))return!1;return!0}function Ar(a){var e=0,r;if(Array.isArray(a)){for(var l=0;l<a.length;l++)if(r=a[l],typeof r=="object"&&(e+=Ar(r)),e==1/0)return 1/0}else for(var t in a){if(t=="$ref")return 1/0;if(yo[t])e++;else if(r=a[t],typeof r=="object"&&(e+=Ar(r)+1),e==1/0)return 1/0}return e}function dr(a,e){e!==!1&&(a=$t(a));var r=Wt.parse(a);return ks(r)}function ks(a){return Wt.serialize(a).split("#")[0]+"#"}var So=/#\/?$/;function $t(a){return a?a.replace(So,""):""}function hr(a,e){return e=$t(e),Wt.resolve(a,e)}function Do(a){var e=$t(this._getId(a)),r={"":e},l={"":dr(e,!1)},t={},s=this;return Po(a,{allKeys:!0},function(n,o,i,_,d,h,v){if(o!==""){var c=s._getId(n),u=r[_],b=l[_]+"/"+d;if(v!==void 0&&(b+="/"+(typeof v=="number"?v:gr.escapeFragment(v))),typeof c=="string"){c=u=$t(u?Wt.resolve(u,c):c);var g=s._refs[c];if(typeof g=="string"&&(g=s._refs[g]),g&&g.schema){if(!gl(n,g.schema))throw new Error('id "'+c+'" resolves to more than one schema')}else if(c!=$t(b))if(c[0]=="#"){if(t[c]&&!gl(n,t[c]))throw new Error('id "'+c+'" resolves to more than one schema');t[c]=n}else s._refs[c]=b}r[o]=u,l[o]=b}}),t}var Sr=Hr,Qr={Validation:bl(No),MissingRef:bl(Gr)};function No(a){this.message="validation failed",this.errors=a,this.ajv=this.validation=!0}Gr.message=function(a,e){return"can't resolve reference "+e+" from id "+a};function Gr(a,e,r){this.message=r||Gr.message(a,e),this.missingRef=Sr.url(a,e),this.missingSchema=Sr.normalizeId(Sr.fullPath(this.missingRef))}function bl(a){return a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a}var ys=function(a,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=typeof e.cycles=="boolean"?e.cycles:!1,l=e.cmp&&function(s){return function(n){return function(o,i){var _={key:o,value:n[o]},d={key:i,value:n[i]};return s(_,d)}}}(e.cmp),t=[];return function s(n){if(n&&n.toJSON&&typeof n.toJSON=="function"&&(n=n.toJSON()),n!==void 0){if(typeof n=="number")return isFinite(n)?""+n:"null";if(typeof n!="object")return JSON.stringify(n);var o,i;if(Array.isArray(n)){for(i="[",o=0;o<n.length;o++)o&&(i+=","),i+=s(n[o])||"null";return i+"]"}if(n===null)return"null";if(t.indexOf(n)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var _=t.push(n)-1,d=Object.keys(n).sort(l&&l(n));for(i="",o=0;o<d.length;o++){var h=d[o],v=s(n[h]);v&&(i&&(i+=","),i+=JSON.stringify(h)+":"+v)}return t.splice(_,1),"{"+i+"}"}}(a)},Ss=function(e,r,l){var t="",s=e.schema.$async===!0,n=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),o=e.self._getId(e.schema);if(e.opts.strictKeywords){var i=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(i){var _="unknown keyword: "+i;if(e.opts.strictKeywords==="log")e.logger.warn(_);else throw new Error(_)}}if(e.isTop&&(t+=" var validate = ",s&&(e.async=!0,t+="async "),t+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",o&&(e.opts.sourceCode||e.opts.processCode)&&(t+=" "+("/*# sourceURL="+o+" */")+" ")),typeof e.schema=="boolean"||!(n||e.schema.$ref)){var r="false schema",d=e.level,h=e.dataLevel,v=e.schema[r],c=e.schemaPath+e.util.getProperty(r),u=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,A,b="data"+(h||""),D="valid"+d;if(e.schema===!1){e.isTop?p=!0:t+=" var "+D+" = false; ";var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(A||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'boolean schema is false' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+b+" "),t+=" } "):t+=" {} ";var w=t;t=g.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?s?t+=" return data; ":t+=" validate.errors = null; return true; ":t+=" var "+D+" = true; ";return e.isTop&&(t+=" }; return validate; "),t}if(e.isTop){var R=e.isTop,d=e.level=0,h=e.dataLevel=0,b="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var S="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(S);else throw new Error(S)}t+=" var vErrors = null; ",t+=" var errors = 0;     ",t+=" if (rootData === undefined) rootData = data; "}else{var d=e.level,h=e.dataLevel,b="data"+(h||"");if(o&&(e.baseId=e.resolve.url(e.baseId,o)),s&&!e.async)throw new Error("async schema in sync schema");t+=" var errs_"+d+" = errors;"}var D="valid"+d,p=!e.opts.allErrors,C="",N="",A,O=e.schema.type,T=Array.isArray(O);if(O&&e.opts.nullable&&e.schema.nullable===!0&&(T?O.indexOf("null")==-1&&(O=O.concat("null")):O!="null"&&(O=[O,"null"],T=!0)),T&&O.length==1&&(O=O[0],T=!1),e.schema.$ref&&n){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(n=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(t+=" "+e.RULES.all.$comment.code(e,"$comment")),O){if(e.opts.coerceTypes)var E=e.util.coerceToTypes(e.opts.coerceTypes,O);var I=e.RULES.types[O];if(E||T||I===!0||I&&!qe(I)){var c=e.schemaPath+".type",u=e.errSchemaPath+"/type",c=e.schemaPath+".type",u=e.errSchemaPath+"/type",P=T?"checkDataTypes":"checkDataType";if(t+=" if ("+e.util[P](O,b,e.opts.strictNumbers,!0)+") { ",E){var F="dataType"+d,K="coerced"+d;t+=" var "+F+" = typeof "+b+"; var "+K+" = undefined; ",e.opts.coerceTypes=="array"&&(t+=" if ("+F+" == 'object' && Array.isArray("+b+") && "+b+".length == 1) { "+b+" = "+b+"[0]; "+F+" = typeof "+b+"; if ("+e.util.checkDataType(e.schema.type,b,e.opts.strictNumbers)+") "+K+" = "+b+"; } "),t+=" if ("+K+" !== undefined) ; ";var x=E;if(x)for(var se,B=-1,H=x.length-1;B<H;)se=x[B+=1],se=="string"?t+=" else if ("+F+" == 'number' || "+F+" == 'boolean') "+K+" = '' + "+b+"; else if ("+b+" === null) "+K+" = ''; ":se=="number"||se=="integer"?(t+=" else if ("+F+" == 'boolean' || "+b+" === null || ("+F+" == 'string' && "+b+" && "+b+" == +"+b+" ",se=="integer"&&(t+=" && !("+b+" % 1)"),t+=")) "+K+" = +"+b+"; "):se=="boolean"?t+=" else if ("+b+" === 'false' || "+b+" === 0 || "+b+" === null) "+K+" = false; else if ("+b+" === 'true' || "+b+" === 1) "+K+" = true; ":se=="null"?t+=" else if ("+b+" === '' || "+b+" === 0 || "+b+" === false) "+K+" = null; ":e.opts.coerceTypes=="array"&&se=="array"&&(t+=" else if ("+F+" == 'string' || "+F+" == 'number' || "+F+" == 'boolean' || "+b+" == null) "+K+" = ["+b+"]; ");t+=" else {   ";var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(A||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { type: '",T?t+=""+O.join(","):t+=""+O,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",T?t+=""+O.join(","):t+=""+O,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+b+" "),t+=" } "):t+=" {} ";var w=t;t=g.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } if ("+K+" !== undefined) {  ";var V=h?"data"+(h-1||""):"parentData",U=h?e.dataPathArr[h]:"parentDataProperty";t+=" "+b+" = "+K+"; ",h||(t+="if ("+V+" !== undefined)"),t+=" "+V+"["+U+"] = "+K+"; } "}else{var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(A||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { type: '",T?t+=""+O.join(","):t+=""+O,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",T?t+=""+O.join(","):t+=""+O,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+b+" "),t+=" } "):t+=" {} ";var w=t;t=g.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}t+=" } "}}if(e.schema.$ref&&!n)t+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",p&&(t+=" } if (errors === ",R?t+="0":t+="errs_"+d,t+=") { ",N+="}");else{var J=e.RULES;if(J){for(var I,L=-1,Q=J.length-1;L<Q;)if(I=J[L+=1],qe(I)){if(I.type&&(t+=" if ("+e.util.checkDataType(I.type,b,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(I.type=="object"&&e.schema.properties){var v=e.schema.properties,ke=Object.keys(v),Pe=ke;if(Pe)for(var ne,_e=-1,fe=Pe.length-1;_e<fe;){ne=Pe[_e+=1];var ce=v[ne];if(ce.default!==void 0){var Re=b+e.util.getProperty(ne);if(e.compositeRule){if(e.opts.strictDefaults){var S="default is ignored for: "+Re;if(e.opts.strictDefaults==="log")e.logger.warn(S);else throw new Error(S)}}else t+=" if ("+Re+" === undefined ",e.opts.useDefaults=="empty"&&(t+=" || "+Re+" === null || "+Re+" === '' "),t+=" ) "+Re+" = ",e.opts.useDefaults=="shared"?t+=" "+e.useDefault(ce.default)+" ":t+=" "+JSON.stringify(ce.default)+" ",t+="; "}}}else if(I.type=="array"&&Array.isArray(e.schema.items)){var $e=e.schema.items;if($e){for(var ce,B=-1,Z=$e.length-1;B<Z;)if(ce=$e[B+=1],ce.default!==void 0){var Re=b+"["+B+"]";if(e.compositeRule){if(e.opts.strictDefaults){var S="default is ignored for: "+Re;if(e.opts.strictDefaults==="log")e.logger.warn(S);else throw new Error(S)}}else t+=" if ("+Re+" === undefined ",e.opts.useDefaults=="empty"&&(t+=" || "+Re+" === null || "+Re+" === '' "),t+=" ) "+Re+" = ",e.opts.useDefaults=="shared"?t+=" "+e.useDefault(ce.default)+" ":t+=" "+JSON.stringify(ce.default)+" ",t+="; "}}}}var j=I.rules;if(j){for(var ae,je=-1,Me=j.length-1;je<Me;)if(ae=j[je+=1],vt(ae)){var Be=ae.code(e,ae.keyword,I.type);Be&&(t+=" "+Be+" ",p&&(C+="}"))}}if(p&&(t+=" "+C+" ",C=""),I.type&&(t+=" } ",O&&O===I.type&&!E)){t+=" else { ";var c=e.schemaPath+".type",u=e.errSchemaPath+"/type",g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(A||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { type: '",T?t+=""+O.join(","):t+=""+O,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",T?t+=""+O.join(","):t+=""+O,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+b+" "),t+=" } "):t+=" {} ";var w=t;t=g.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } "}p&&(t+=" if (errors === ",R?t+="0":t+="errs_"+d,t+=") { ",N+="}")}}}p&&(t+=" "+N+" "),R?(s?(t+=" if (errors === 0) return data;           ",t+=" else throw new ValidationError(vErrors); "):(t+=" validate.errors = vErrors; ",t+=" return errors === 0;       "),t+=" }; return validate;"):t+=" var "+D+" = errors === errs_"+d+";";function qe(We){for(var Je=We.rules,ht=0;ht<Je.length;ht++)if(vt(Je[ht]))return!0}function vt(We){return e.schema[We.keyword]!==void 0||We.implements&&St(We)}function St(We){for(var Je=We.implements,ht=0;ht<Je.length;ht++)if(e.schema[Je[ht]]!==void 0)return!0}return t},lr=Hr,_r=Yt,Ds=Qr,Ro=ys,El=Ss,Co=_r.ucs2length,Oo=Ur,Io=Ds.Validation,Fo=Lr;function Lr(a,e,r,l){var t=this,s=this._opts,n=[void 0],o={},i=[],_={},d=[],h={},v=[];e=e||{schema:a,refVal:n,refs:o};var c=To.call(this,a,e,l),u=this._compilations[c.index];if(c.compiling)return u.callValidate=S;var b=this._formats,g=this.RULES;try{var w=D(a,e,r,l);u.validate=w;var R=u.callValidate;return R&&(R.schema=w.schema,R.errors=null,R.refs=w.refs,R.refVal=w.refVal,R.root=w.root,R.$async=w.$async,s.sourceCode&&(R.source=w.source)),w}finally{Ao.call(this,a,e,l)}function S(){var P=u.validate,F=P.apply(this,arguments);return S.errors=P.errors,F}function D(P,F,K,x){var se=!F||F&&F.schema==P;if(F.schema!=e.schema)return Lr.call(t,P,F,K,x);var B=P.$async===!0,H=El({isTop:!0,schema:P,isRoot:se,baseId:x,root:F,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:Ds.MissingRef,RULES:g,validate:El,util:_r,resolve:lr,resolveRef:p,usePattern:T,useDefault:E,useCustomRule:I,opts:s,formats:b,logger:t.logger,self:t});H=ar(n,qo)+ar(i,Lo)+ar(d,jo)+ar(v,Uo)+H,s.processCode&&(H=s.processCode(H,P));var V;try{var U=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",H);V=U(t,g,b,e,n,d,v,Oo,Co,Io),n[0]=V}catch(J){throw t.logger.error("Error compiling schema, function code:",H),J}return V.schema=P,V.errors=null,V.refs=o,V.refVal=n,V.root=se?V:F,B&&(V.$async=!0),s.sourceCode===!0&&(V.source={code:H,patterns:i,defaults:d}),V}function p(P,F,K){F=lr.url(P,F);var x=o[F],se,B;if(x!==void 0)return se=n[x],B="refVal["+x+"]",O(se,B);if(!K&&e.refs){var H=e.refs[F];if(H!==void 0)return se=e.refVal[H],B=C(F,se),O(se,B)}B=C(F);var V=lr.call(t,D,e,F);if(V===void 0){var U=r&&r[F];U&&(V=lr.inlineRef(U,s.inlineRefs)?U:Lr.call(t,U,e,r,P))}if(V===void 0)N(F);else return A(F,V),O(V,B)}function C(P,F){var K=n.length;return n[K]=F,o[P]=K,"refVal"+K}function N(P){delete o[P]}function A(P,F){var K=o[P];n[K]=F}function O(P,F){return typeof P=="object"||typeof P=="boolean"?{code:F,schema:P,inline:!0}:{code:F,$async:P&&!!P.$async}}function T(P){var F=_[P];return F===void 0&&(F=_[P]=i.length,i[F]=P),"pattern"+F}function E(P){switch(typeof P){case"boolean":case"number":return""+P;case"string":return _r.toQuotedString(P);case"object":if(P===null)return"null";var F=Ro(P),K=h[F];return K===void 0&&(K=h[F]=d.length,d[K]=P),"default"+K}}function I(P,F,K,x){if(t._opts.validateSchema!==!1){var se=P.definition.dependencies;if(se&&!se.every(function(Pe){return Object.prototype.hasOwnProperty.call(K,Pe)}))throw new Error("parent schema must have all required keywords: "+se.join(","));var B=P.definition.validateSchema;if(B){var H=B(F);if(!H){var V="keyword schema is invalid: "+t.errorsText(B.errors);if(t._opts.validateSchema=="log")t.logger.error(V);else throw new Error(V)}}}var U=P.definition.compile,J=P.definition.inline,L=P.definition.macro,Q;if(U)Q=U.call(t,F,K,x);else if(L)Q=L.call(t,F,K,x),s.validateSchema!==!1&&t.validateSchema(Q,!0);else if(J)Q=J.call(t,x,P.keyword,F,K);else if(Q=P.definition.validate,!Q)return;if(Q===void 0)throw new Error('custom keyword "'+P.keyword+'"failed to compile');var ke=v.length;return v[ke]=Q,{code:"customRule"+ke,validate:Q}}}function To(a,e,r){var l=Ns.call(this,a,e,r);return l>=0?{index:l,compiling:!0}:(l=this._compilations.length,this._compilations[l]={schema:a,root:e,baseId:r},{index:l,compiling:!1})}function Ao(a,e,r){var l=Ns.call(this,a,e,r);l>=0&&this._compilations.splice(l,1)}function Ns(a,e,r){for(var l=0;l<this._compilations.length;l++){var t=this._compilations[l];if(t.schema==a&&t.root==e&&t.baseId==r)return l}return-1}function Lo(a,e){return"var pattern"+a+" = new RegExp("+_r.toQuotedString(e[a])+");"}function jo(a){return"var default"+a+" = defaults["+a+"];"}function qo(a,e){return e[a]===void 0?"":"var refVal"+a+" = refVal["+a+"];"}function Uo(a){return"var customRule"+a+" = customRules["+a+"];"}function ar(a,e){if(!a.length)return"";for(var r="",l=0;l<a.length;l++)r+=e(l,a);return r}var Rs={exports:{}},Er=Rs.exports=function(){this._cache={}};Er.prototype.put=function(e,r){this._cache[e]=r};Er.prototype.get=function(e){return this._cache[e]};Er.prototype.del=function(e){delete this._cache[e]};Er.prototype.clear=function(){this._cache={}};var $o=Rs.exports,Vo=Yt,zo=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Mo=[0,31,28,31,30,31,30,31,31,30,31,30,31],Bo=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Cs=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,Ho=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Qo=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Os=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Is=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,Fs=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,Ts=/^(?:\/(?:[^~/]|~0|~1)*)*$/,As=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Ls=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,Go=Pr;function Pr(a){return a=a=="full"?"full":"fast",Vo.copy(Pr[a])}Pr.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":Os,url:Is,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:Cs,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Us,uuid:Fs,"json-pointer":Ts,"json-pointer-uri-fragment":As,"relative-json-pointer":Ls};Pr.full={date:js,time:qs,"date-time":Yo,uri:Zo,"uri-reference":Qo,"uri-template":Os,url:Is,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:Cs,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Us,uuid:Fs,"json-pointer":Ts,"json-pointer-uri-fragment":As,"relative-json-pointer":Ls};function Ko(a){return a%4===0&&(a%100!==0||a%400===0)}function js(a){var e=a.match(zo);if(!e)return!1;var r=+e[1],l=+e[2],t=+e[3];return l>=1&&l<=12&&t>=1&&t<=(l==2&&Ko(r)?29:Mo[l])}function qs(a,e){var r=a.match(Bo);if(!r)return!1;var l=r[1],t=r[2],s=r[3],n=r[5];return(l<=23&&t<=59&&s<=59||l==23&&t==59&&s==60)&&(!e||n)}var Jo=/t|\s/i;function Yo(a){var e=a.split(Jo);return e.length==2&&js(e[0])&&qs(e[1],!0)}var Xo=/\/|:/;function Zo(a){return Xo.test(a)&&Ho.test(a)}var Wo=/[^\\]\\Z/;function Us(a){if(Wo.test(a))return!1;try{return new RegExp(a),!0}catch{return!1}}var xo=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],i=e.errSchemaPath+"/"+r,_=!e.opts.allErrors,d="data"+(n||""),h="valid"+s,v,c;if(o=="#"||o=="#/")e.isRoot?(v=e.async,c="validate"):(v=e.root.schema.$async===!0,c="root.refVal[0]");else{var u=e.resolveRef(e.baseId,o,e.isRoot);if(u===void 0){var b=e.MissingRefError.message(e.baseId,o);if(e.opts.missingRefs=="fail"){e.logger.error(b);var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(i)+" , params: { ref: '"+e.util.escapeQuotes(o)+"' } ",e.opts.messages!==!1&&(t+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(o)+"' "),e.opts.verbose&&(t+=" , schema: "+e.util.toQuotedString(o)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ";var w=t;t=g.pop(),!e.compositeRule&&_?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",_&&(t+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(b),_&&(t+=" if (true) { ");else throw new e.MissingRefError(e.baseId,o,b)}else if(u.inline){var R=e.util.copy(e);R.level++;var S="valid"+R.level;R.schema=u.schema,R.schemaPath="",R.errSchemaPath=o;var D=e.validate(R).replace(/validate\.schema/g,u.code);t+=" "+D+" ",_&&(t+=" if ("+S+") { ")}else v=u.$async===!0||e.async&&u.$async!==!1,c=u.code}if(c){var g=g||[];g.push(t),t="",e.opts.passContext?t+=" "+c+".call(this, ":t+=" "+c+"( ",t+=" "+d+", (dataPath || '')",e.errorPath!='""'&&(t+=" + "+e.errorPath);var p=n?"data"+(n-1||""):"parentData",C=n?e.dataPathArr[n]:"parentDataProperty";t+=" , "+p+" , "+C+", rootData)  ";var N=t;if(t=g.pop(),v){if(!e.async)throw new Error("async schema referenced by sync schema");_&&(t+=" var "+h+"; "),t+=" try { await "+N+"; ",_&&(t+=" "+h+" = true; "),t+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",_&&(t+=" "+h+" = false; "),t+=" } ",_&&(t+=" if ("+h+") { ")}else t+=" if (!"+N+") { if (vErrors === null) vErrors = "+c+".errors; else vErrors = vErrors.concat("+c+".errors); errors = vErrors.length; } ",_&&(t+=" else { ")}return t},ei=function(e,r,l){var t=" ",s=e.schema[r],n=e.schemaPath+e.util.getProperty(r),o=e.errSchemaPath+"/"+r,i=!e.opts.allErrors,_=e.util.copy(e),d="";_.level++;var h="valid"+_.level,v=_.baseId,c=!0,u=s;if(u)for(var b,g=-1,w=u.length-1;g<w;)b=u[g+=1],(e.opts.strictKeywords?typeof b=="object"&&Object.keys(b).length>0||b===!1:e.util.schemaHasRules(b,e.RULES.all))&&(c=!1,_.schema=b,_.schemaPath=n+"["+g+"]",_.errSchemaPath=o+"/"+g,t+="  "+e.validate(_)+" ",_.baseId=v,i&&(t+=" if ("+h+") { ",d+="}"));return i&&(c?t+=" if (true) { ":t+=" "+d.slice(0,-1)+" "),t},ti=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),_=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,h="data"+(n||""),v="valid"+s,c="errs__"+s,u=e.util.copy(e),b="";u.level++;var g="valid"+u.level,w=o.every(function(A){return e.opts.strictKeywords?typeof A=="object"&&Object.keys(A).length>0||A===!1:e.util.schemaHasRules(A,e.RULES.all)});if(w){var R=u.baseId;t+=" var "+c+" = errors; var "+v+" = false;  ";var S=e.compositeRule;e.compositeRule=u.compositeRule=!0;var D=o;if(D)for(var p,C=-1,N=D.length-1;C<N;)p=D[C+=1],u.schema=p,u.schemaPath=i+"["+C+"]",u.errSchemaPath=_+"/"+C,t+="  "+e.validate(u)+" ",u.baseId=R,t+=" "+v+" = "+v+" || "+g+"; if (!"+v+") { ",b+="}";e.compositeRule=u.compositeRule=S,t+=" "+b+" if (!"+v+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(t+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+=" } else {  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; } ",e.opts.allErrors&&(t+=" } ")}else d&&(t+=" if (true) { ");return t},ri=function(e,r,l){var t=" ",s=e.schema[r],n=e.errSchemaPath+"/"+r;e.opts.allErrors;var o=e.util.toQuotedString(s);return e.opts.$comment===!0?t+=" console.log("+o+");":typeof e.opts.$comment=="function"&&(t+=" self._opts.$comment("+o+", "+e.util.toQuotedString(n)+", validate.root.schema);"),t},li=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),_=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,h="data"+(n||""),v="valid"+s,c=e.opts.$data&&o&&o.$data;c&&(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; "),c||(t+=" var schema"+s+" = validate.schema"+i+";"),t+="var "+v+" = equal("+h+", schema"+s+"); if (!"+v+") {   ";var u=u||[];u.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { allowedValue: schema"+s+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be equal to constant' "),e.opts.verbose&&(t+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ";var b=t;return t=u.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+b+"]); ":t+=" validate.errors = ["+b+"]; return false; ":t+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" }",d&&(t+=" else { "),t},ai=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),_=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,h="data"+(n||""),v="valid"+s,c="errs__"+s,u=e.util.copy(e),b="";u.level++;var g="valid"+u.level,w="i"+s,R=u.dataLevel=e.dataLevel+1,S="data"+R,D=e.baseId,p=e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all);if(t+="var "+c+" = errors;var "+v+";",p){var C=e.compositeRule;e.compositeRule=u.compositeRule=!0,u.schema=o,u.schemaPath=i,u.errSchemaPath=_,t+=" var "+g+" = false; for (var "+w+" = 0; "+w+" < "+h+".length; "+w+"++) { ",u.errorPath=e.util.getPathExpr(e.errorPath,w,e.opts.jsonPointers,!0);var N=h+"["+w+"]";u.dataPathArr[R]=w;var A=e.validate(u);u.baseId=D,e.util.varOccurences(A,S)<2?t+=" "+e.util.varReplace(A,S,N)+" ":t+=" var "+S+" = "+N+"; "+A+" ",t+=" if ("+g+") break; }  ",e.compositeRule=u.compositeRule=C,t+=" "+b+" if (!"+g+") {"}else t+=" if ("+h+".length == 0) {";var O=O||[];O.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should contain a valid item' "),e.opts.verbose&&(t+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ";var T=t;return t=O.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+T+"]); ":t+=" validate.errors = ["+T+"]; return false; ":t+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { ",p&&(t+="  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; } "),e.opts.allErrors&&(t+=" } "),t},si=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),_=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,h="data"+(n||""),v="errs__"+s,c=e.util.copy(e),u="";c.level++;var b="valid"+c.level,g={},w={},R=e.opts.ownProperties;for(C in o)if(C!="__proto__"){var S=o[C],D=Array.isArray(S)?w:g;D[C]=S}t+="var "+v+" = errors;";var p=e.errorPath;t+="var missing"+s+";";for(var C in w)if(D=w[C],D.length){if(t+=" if ( "+h+e.util.getProperty(C)+" !== undefined ",R&&(t+=" && Object.prototype.hasOwnProperty.call("+h+", '"+e.util.escapeQuotes(C)+"') "),d){t+=" && ( ";var N=D;if(N)for(var A,O=-1,T=N.length-1;O<T;){A=N[O+=1],O&&(t+=" || ");var E=e.util.getProperty(A),I=h+E;t+=" ( ( "+I+" === undefined ",R&&(t+=" || ! Object.prototype.hasOwnProperty.call("+h+", '"+e.util.escapeQuotes(A)+"') "),t+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?A:E)+") ) "}t+=")) {  ";var P="missing"+s,F="' + "+P+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(p,P,!0):p+" + "+P);var K=K||[];K.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { property: '"+e.util.escapeQuotes(C)+"', missingProperty: '"+F+"', depsCount: "+D.length+", deps: '"+e.util.escapeQuotes(D.length==1?D[0]:D.join(", "))+"' } ",e.opts.messages!==!1&&(t+=" , message: 'should have ",D.length==1?t+="property "+e.util.escapeQuotes(D[0]):t+="properties "+e.util.escapeQuotes(D.join(", ")),t+=" when property "+e.util.escapeQuotes(C)+" is present' "),e.opts.verbose&&(t+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ";var x=t;t=K.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+x+"]); ":t+=" validate.errors = ["+x+"]; return false; ":t+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{t+=" ) { ";var se=D;if(se)for(var A,B=-1,H=se.length-1;B<H;){A=se[B+=1];var E=e.util.getProperty(A),F=e.util.escapeQuotes(A),I=h+E;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(p,A,e.opts.jsonPointers)),t+=" if ( "+I+" === undefined ",R&&(t+=" || ! Object.prototype.hasOwnProperty.call("+h+", '"+e.util.escapeQuotes(A)+"') "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { property: '"+e.util.escapeQuotes(C)+"', missingProperty: '"+F+"', depsCount: "+D.length+", deps: '"+e.util.escapeQuotes(D.length==1?D[0]:D.join(", "))+"' } ",e.opts.messages!==!1&&(t+=" , message: 'should have ",D.length==1?t+="property "+e.util.escapeQuotes(D[0]):t+="properties "+e.util.escapeQuotes(D.join(", ")),t+=" when property "+e.util.escapeQuotes(C)+" is present' "),e.opts.verbose&&(t+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}t+=" }   ",d&&(u+="}",t+=" else { ")}e.errorPath=p;var V=c.baseId;for(var C in g){var S=g[C];(e.opts.strictKeywords?typeof S=="object"&&Object.keys(S).length>0||S===!1:e.util.schemaHasRules(S,e.RULES.all))&&(t+=" "+b+" = true; if ( "+h+e.util.getProperty(C)+" !== undefined ",R&&(t+=" && Object.prototype.hasOwnProperty.call("+h+", '"+e.util.escapeQuotes(C)+"') "),t+=") { ",c.schema=S,c.schemaPath=i+e.util.getProperty(C),c.errSchemaPath=_+"/"+e.util.escapeFragment(C),t+="  "+e.validate(c)+" ",c.baseId=V,t+=" }  ",d&&(t+=" if ("+b+") { ",u+="}"))}return d&&(t+="   "+u+" if ("+v+" == errors) {"),t},ni=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),_=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,h="data"+(n||""),v="valid"+s,c=e.opts.$data&&o&&o.$data;c&&(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ");var u="i"+s,b="schema"+s;c||(t+=" var "+b+" = validate.schema"+i+";"),t+="var "+v+";",c&&(t+=" if (schema"+s+" === undefined) "+v+" = true; else if (!Array.isArray(schema"+s+")) "+v+" = false; else {"),t+=""+v+" = false;for (var "+u+"=0; "+u+"<"+b+".length; "+u+"++) if (equal("+h+", "+b+"["+u+"])) { "+v+" = true; break; }",c&&(t+="  }  "),t+=" if (!"+v+") {   ";var g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { allowedValues: schema"+s+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(t+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ";var w=t;return t=g.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" }",d&&(t+=" else { "),t},oi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),_=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,h="data"+(n||"");if(e.opts.format===!1)return d&&(t+=" if (true) { "),t;var v=e.opts.$data&&o&&o.$data,c;v?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=o;var u=e.opts.unknownFormats,b=Array.isArray(u);if(v){var g="format"+s,w="isObject"+s,R="formatType"+s;t+=" var "+g+" = formats["+c+"]; var "+w+" = typeof "+g+" == 'object' && !("+g+" instanceof RegExp) && "+g+".validate; var "+R+" = "+w+" && "+g+".type || 'string'; if ("+w+") { ",e.async&&(t+=" var async"+s+" = "+g+".async; "),t+=" "+g+" = "+g+".validate; } if (  ",v&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'string') || "),t+=" (",u!="ignore"&&(t+=" ("+c+" && !"+g+" ",b&&(t+=" && self._opts.unknownFormats.indexOf("+c+") == -1 "),t+=") || "),t+=" ("+g+" && "+R+" == '"+l+"' && !(typeof "+g+" == 'function' ? ",e.async?t+=" (async"+s+" ? await "+g+"("+h+") : "+g+"("+h+")) ":t+=" "+g+"("+h+") ",t+=" : "+g+".test("+h+"))))) {"}else{var g=e.formats[o];if(!g){if(u=="ignore")return e.logger.warn('unknown format "'+o+'" ignored in schema at path "'+e.errSchemaPath+'"'),d&&(t+=" if (true) { "),t;if(b&&u.indexOf(o)>=0)return d&&(t+=" if (true) { "),t;throw new Error('unknown format "'+o+'" is used in schema at path "'+e.errSchemaPath+'"')}var w=typeof g=="object"&&!(g instanceof RegExp)&&g.validate,R=w&&g.type||"string";if(w){var S=g.async===!0;g=g.validate}if(R!=l)return d&&(t+=" if (true) { "),t;if(S){if(!e.async)throw new Error("async format in sync schema");var D="formats"+e.util.getProperty(o)+".validate";t+=" if (!(await "+D+"("+h+"))) { "}else{t+=" if (! ";var D="formats"+e.util.getProperty(o);w&&(D+=".validate"),typeof g=="function"?t+=" "+D+"("+h+") ":t+=" "+D+".test("+h+") ",t+=") { "}}var p=p||[];p.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { format:  ",v?t+=""+c:t+=""+e.util.toQuotedString(o),t+="  } ",e.opts.messages!==!1&&(t+=` , message: 'should match format "`,v?t+="' + "+c+" + '":t+=""+e.util.escapeQuotes(o),t+=`"' `),e.opts.verbose&&(t+=" , schema:  ",v?t+="validate.schema"+i:t+=""+e.util.toQuotedString(o),t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ";var C=t;return t=p.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+C+"]); ":t+=" validate.errors = ["+C+"]; return false; ":t+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",d&&(t+=" else { "),t},ii=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),_=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,h="data"+(n||""),v="valid"+s,c="errs__"+s,u=e.util.copy(e);u.level++;var b="valid"+u.level,g=e.schema.then,w=e.schema.else,R=g!==void 0&&(e.opts.strictKeywords?typeof g=="object"&&Object.keys(g).length>0||g===!1:e.util.schemaHasRules(g,e.RULES.all)),S=w!==void 0&&(e.opts.strictKeywords?typeof w=="object"&&Object.keys(w).length>0||w===!1:e.util.schemaHasRules(w,e.RULES.all)),D=u.baseId;if(R||S){var p;u.createErrors=!1,u.schema=o,u.schemaPath=i,u.errSchemaPath=_,t+=" var "+c+" = errors; var "+v+" = true;  ";var C=e.compositeRule;e.compositeRule=u.compositeRule=!0,t+="  "+e.validate(u)+" ",u.baseId=D,u.createErrors=!0,t+="  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; }  ",e.compositeRule=u.compositeRule=C,R?(t+=" if ("+b+") {  ",u.schema=e.schema.then,u.schemaPath=e.schemaPath+".then",u.errSchemaPath=e.errSchemaPath+"/then",t+="  "+e.validate(u)+" ",u.baseId=D,t+=" "+v+" = "+b+"; ",R&&S?(p="ifClause"+s,t+=" var "+p+" = 'then'; "):p="'then'",t+=" } ",S&&(t+=" else { ")):t+=" if (!"+b+") { ",S&&(u.schema=e.schema.else,u.schemaPath=e.schemaPath+".else",u.errSchemaPath=e.errSchemaPath+"/else",t+="  "+e.validate(u)+" ",u.baseId=D,t+=" "+v+" = "+b+"; ",R&&S?(p="ifClause"+s,t+=" var "+p+" = 'else'; "):p="'else'",t+=" } "),t+=" if (!"+v+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { failingKeyword: "+p+" } ",e.opts.messages!==!1&&(t+=` , message: 'should match "' + `+p+` + '" schema' `),e.opts.verbose&&(t+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+=" }   ",d&&(t+=" else { ")}else d&&(t+=" if (true) { ");return t},fi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),_=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,h="data"+(n||""),v="valid"+s,c="errs__"+s,u=e.util.copy(e),b="";u.level++;var g="valid"+u.level,w="i"+s,R=u.dataLevel=e.dataLevel+1,S="data"+R,D=e.baseId;if(t+="var "+c+" = errors;var "+v+";",Array.isArray(o)){var p=e.schema.additionalItems;if(p===!1){t+=" "+v+" = "+h+".length <= "+o.length+"; ";var C=_;_=e.errSchemaPath+"/additionalItems",t+="  if (!"+v+") {   ";var N=N||[];N.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { limit: "+o.length+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have more than "+o.length+" items' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ";var A=t;t=N.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+A+"]); ":t+=" validate.errors = ["+A+"]; return false; ":t+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",_=C,d&&(b+="}",t+=" else { ")}var O=o;if(O){for(var T,E=-1,I=O.length-1;E<I;)if(T=O[E+=1],e.opts.strictKeywords?typeof T=="object"&&Object.keys(T).length>0||T===!1:e.util.schemaHasRules(T,e.RULES.all)){t+=" "+g+" = true; if ("+h+".length > "+E+") { ";var P=h+"["+E+"]";u.schema=T,u.schemaPath=i+"["+E+"]",u.errSchemaPath=_+"/"+E,u.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers,!0),u.dataPathArr[R]=E;var F=e.validate(u);u.baseId=D,e.util.varOccurences(F,S)<2?t+=" "+e.util.varReplace(F,S,P)+" ":t+=" var "+S+" = "+P+"; "+F+" ",t+=" }  ",d&&(t+=" if ("+g+") { ",b+="}")}}if(typeof p=="object"&&(e.opts.strictKeywords?typeof p=="object"&&Object.keys(p).length>0||p===!1:e.util.schemaHasRules(p,e.RULES.all))){u.schema=p,u.schemaPath=e.schemaPath+".additionalItems",u.errSchemaPath=e.errSchemaPath+"/additionalItems",t+=" "+g+" = true; if ("+h+".length > "+o.length+") {  for (var "+w+" = "+o.length+"; "+w+" < "+h+".length; "+w+"++) { ",u.errorPath=e.util.getPathExpr(e.errorPath,w,e.opts.jsonPointers,!0);var P=h+"["+w+"]";u.dataPathArr[R]=w;var F=e.validate(u);u.baseId=D,e.util.varOccurences(F,S)<2?t+=" "+e.util.varReplace(F,S,P)+" ":t+=" var "+S+" = "+P+"; "+F+" ",d&&(t+=" if (!"+g+") break; "),t+=" } }  ",d&&(t+=" if ("+g+") { ",b+="}")}}else if(e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all)){u.schema=o,u.schemaPath=i,u.errSchemaPath=_,t+="  for (var "+w+" = 0; "+w+" < "+h+".length; "+w+"++) { ",u.errorPath=e.util.getPathExpr(e.errorPath,w,e.opts.jsonPointers,!0);var P=h+"["+w+"]";u.dataPathArr[R]=w;var F=e.validate(u);u.baseId=D,e.util.varOccurences(F,S)<2?t+=" "+e.util.varReplace(F,S,P)+" ":t+=" var "+S+" = "+P+"; "+F+" ",d&&(t+=" if (!"+g+") break; "),t+=" }"}return d&&(t+=" "+b+" if ("+c+" == errors) {"),t},Pl=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),_=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,D,h="data"+(n||""),v=e.opts.$data&&o&&o.$data,c;v?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=o;var u=r=="maximum",b=u?"exclusiveMaximum":"exclusiveMinimum",g=e.schema[b],w=e.opts.$data&&g&&g.$data,R=u?"<":">",S=u?">":"<",D=void 0;if(!(v||typeof o=="number"||o===void 0))throw new Error(r+" must be number");if(!(w||g===void 0||typeof g=="number"||typeof g=="boolean"))throw new Error(b+" must be number or boolean");if(w){var p=e.util.getData(g.$data,n,e.dataPathArr),C="exclusive"+s,N="exclType"+s,A="exclIsNumber"+s,O="op"+s,T="' + "+O+" + '";t+=" var schemaExcl"+s+" = "+p+"; ",p="schemaExcl"+s,t+=" var "+C+"; var "+N+" = typeof "+p+"; if ("+N+" != 'boolean' && "+N+" != 'undefined' && "+N+" != 'number') { ";var D=b,E=E||[];E.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(D||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: '"+b+" should be boolean' "),e.opts.verbose&&(t+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ";var I=t;t=E.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+I+"]); ":t+=" validate.errors = ["+I+"]; return false; ":t+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else if ( ",v&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),t+=" "+N+" == 'number' ? ( ("+C+" = "+c+" === undefined || "+p+" "+R+"= "+c+") ? "+h+" "+S+"= "+p+" : "+h+" "+S+" "+c+" ) : ( ("+C+" = "+p+" === true) ? "+h+" "+S+"= "+c+" : "+h+" "+S+" "+c+" ) || "+h+" !== "+h+") { var op"+s+" = "+C+" ? '"+R+"' : '"+R+"='; ",o===void 0&&(D=b,_=e.errSchemaPath+"/"+b,c=p,v=w)}else{var A=typeof g=="number",T=R;if(A&&v){var O="'"+T+"'";t+=" if ( ",v&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),t+=" ( "+c+" === undefined || "+g+" "+R+"= "+c+" ? "+h+" "+S+"= "+g+" : "+h+" "+S+" "+c+" ) || "+h+" !== "+h+") { "}else{A&&o===void 0?(C=!0,D=b,_=e.errSchemaPath+"/"+b,c=g,S+="="):(A&&(c=Math[u?"min":"max"](g,o)),g===(A?c:!0)?(C=!0,D=b,_=e.errSchemaPath+"/"+b,S+="="):(C=!1,T+="="));var O="'"+T+"'";t+=" if ( ",v&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),t+=" "+h+" "+S+" "+c+" || "+h+" !== "+h+") { "}}D=D||r;var E=E||[];E.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(D||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { comparison: "+O+", limit: "+c+", exclusive: "+C+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be "+T+" ",v?t+="' + "+c:t+=""+c+"'"),e.opts.verbose&&(t+=" , schema:  ",v?t+="validate.schema"+i:t+=""+o,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ";var I=t;return t=E.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+I+"]); ":t+=" validate.errors = ["+I+"]; return false; ":t+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",d&&(t+=" else { "),t},wl=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),_=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,b,h="data"+(n||""),v=e.opts.$data&&o&&o.$data,c;if(v?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=o,!(v||typeof o=="number"))throw new Error(r+" must be number");var u=r=="maxItems"?">":"<";t+="if ( ",v&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),t+=" "+h+".length "+u+" "+c+") { ";var b=r,g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(b||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { limit: "+c+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have ",r=="maxItems"?t+="more":t+="fewer",t+=" than ",v?t+="' + "+c+" + '":t+=""+o,t+=" items' "),e.opts.verbose&&(t+=" , schema:  ",v?t+="validate.schema"+i:t+=""+o,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ";var w=t;return t=g.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",d&&(t+=" else { "),t},kl=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),_=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,b,h="data"+(n||""),v=e.opts.$data&&o&&o.$data,c;if(v?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=o,!(v||typeof o=="number"))throw new Error(r+" must be number");var u=r=="maxLength"?">":"<";t+="if ( ",v&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),e.opts.unicode===!1?t+=" "+h+".length ":t+=" ucs2length("+h+") ",t+=" "+u+" "+c+") { ";var b=r,g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(b||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { limit: "+c+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be ",r=="maxLength"?t+="longer":t+="shorter",t+=" than ",v?t+="' + "+c+" + '":t+=""+o,t+=" characters' "),e.opts.verbose&&(t+=" , schema:  ",v?t+="validate.schema"+i:t+=""+o,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ";var w=t;return t=g.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",d&&(t+=" else { "),t},yl=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),_=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,b,h="data"+(n||""),v=e.opts.$data&&o&&o.$data,c;if(v?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=o,!(v||typeof o=="number"))throw new Error(r+" must be number");var u=r=="maxProperties"?">":"<";t+="if ( ",v&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'number') || "),t+=" Object.keys("+h+").length "+u+" "+c+") { ";var b=r,g=g||[];g.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(b||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { limit: "+c+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have ",r=="maxProperties"?t+="more":t+="fewer",t+=" than ",v?t+="' + "+c+" + '":t+=""+o,t+=" properties' "),e.opts.verbose&&(t+=" , schema:  ",v?t+="validate.schema"+i:t+=""+o,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ";var w=t;return t=g.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",d&&(t+=" else { "),t},ui=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),_=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,h="data"+(n||""),v=e.opts.$data&&o&&o.$data,c;if(v?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=o,!(v||typeof o=="number"))throw new Error(r+" must be number");t+="var division"+s+";if (",v&&(t+=" "+c+" !== undefined && ( typeof "+c+" != 'number' || "),t+=" (division"+s+" = "+h+" / "+c+", ",e.opts.multipleOfPrecision?t+=" Math.abs(Math.round(division"+s+") - division"+s+") > 1e-"+e.opts.multipleOfPrecision+" ":t+=" division"+s+" !== parseInt(division"+s+") ",t+=" ) ",v&&(t+="  )  "),t+=" ) {   ";var u=u||[];u.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { multipleOf: "+c+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be multiple of ",v?t+="' + "+c:t+=""+c+"'"),e.opts.verbose&&(t+=" , schema:  ",v?t+="validate.schema"+i:t+=""+o,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ";var b=t;return t=u.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+b+"]); ":t+=" validate.errors = ["+b+"]; return false; ":t+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",d&&(t+=" else { "),t},ci=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),_=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,h="data"+(n||""),v="errs__"+s,c=e.util.copy(e);c.level++;var u="valid"+c.level;if(e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all)){c.schema=o,c.schemaPath=i,c.errSchemaPath=_,t+=" var "+v+" = errors;  ";var b=e.compositeRule;e.compositeRule=c.compositeRule=!0,c.createErrors=!1;var g;c.opts.allErrors&&(g=c.opts.allErrors,c.opts.allErrors=!1),t+=" "+e.validate(c)+" ",c.createErrors=!0,g&&(c.opts.allErrors=g),e.compositeRule=c.compositeRule=b,t+=" if ("+u+") {   ";var w=w||[];w.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be valid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ";var R=t;t=w.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+R+"]); ":t+=" validate.errors = ["+R+"]; return false; ":t+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else {  errors = "+v+"; if (vErrors !== null) { if ("+v+") vErrors.length = "+v+"; else vErrors = null; } ",e.opts.allErrors&&(t+=" } ")}else t+="  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be valid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d&&(t+=" if (false) { ");return t},di=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),_=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,h="data"+(n||""),v="valid"+s,c="errs__"+s,u=e.util.copy(e),b="";u.level++;var g="valid"+u.level,w=u.baseId,R="prevValid"+s,S="passingSchemas"+s;t+="var "+c+" = errors , "+R+" = false , "+v+" = false , "+S+" = null; ";var D=e.compositeRule;e.compositeRule=u.compositeRule=!0;var p=o;if(p)for(var C,N=-1,A=p.length-1;N<A;)C=p[N+=1],(e.opts.strictKeywords?typeof C=="object"&&Object.keys(C).length>0||C===!1:e.util.schemaHasRules(C,e.RULES.all))?(u.schema=C,u.schemaPath=i+"["+N+"]",u.errSchemaPath=_+"/"+N,t+="  "+e.validate(u)+" ",u.baseId=w):t+=" var "+g+" = true; ",N&&(t+=" if ("+g+" && "+R+") { "+v+" = false; "+S+" = ["+S+", "+N+"]; } else { ",b+="}"),t+=" if ("+g+") { "+v+" = "+R+" = true; "+S+" = "+N+"; }";return e.compositeRule=u.compositeRule=D,t+=""+b+"if (!"+v+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { passingSchemas: "+S+" } ",e.opts.messages!==!1&&(t+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(t+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+="} else {  errors = "+c+"; if (vErrors !== null) { if ("+c+") vErrors.length = "+c+"; else vErrors = null; }",e.opts.allErrors&&(t+=" } "),t},hi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),_=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,h="data"+(n||""),v=e.opts.$data&&o&&o.$data,c;v?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",c="schema"+s):c=o;var u=v?"(new RegExp("+c+"))":e.usePattern(o);t+="if ( ",v&&(t+=" ("+c+" !== undefined && typeof "+c+" != 'string') || "),t+=" !"+u+".test("+h+") ) {   ";var b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { pattern:  ",v?t+=""+c:t+=""+e.util.toQuotedString(o),t+="  } ",e.opts.messages!==!1&&(t+=` , message: 'should match pattern "`,v?t+="' + "+c+" + '":t+=""+e.util.escapeQuotes(o),t+=`"' `),e.opts.verbose&&(t+=" , schema:  ",v?t+="validate.schema"+i:t+=""+e.util.toQuotedString(o),t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ";var g=t;return t=b.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+g+"]); ":t+=" validate.errors = ["+g+"]; return false; ":t+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",d&&(t+=" else { "),t},_i=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),_=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,h="data"+(n||""),v="errs__"+s,c=e.util.copy(e),u="";c.level++;var b="valid"+c.level,g="key"+s,w="idx"+s,R=c.dataLevel=e.dataLevel+1,S="data"+R,D="dataProperties"+s,p=Object.keys(o||{}).filter(B),C=e.schema.patternProperties||{},N=Object.keys(C).filter(B),A=e.schema.additionalProperties,O=p.length||N.length,T=A===!1,E=typeof A=="object"&&Object.keys(A).length,I=e.opts.removeAdditional,P=T||E||I,F=e.opts.ownProperties,K=e.baseId,x=e.schema.required;if(x&&!(e.opts.$data&&x.$data)&&x.length<e.opts.loopRequired)var se=e.util.toHash(x);function B(ge){return ge!=="__proto__"}if(t+="var "+v+" = errors;var "+b+" = true;",F&&(t+=" var "+D+" = undefined;"),P){if(F?t+=" "+D+" = "+D+" || Object.keys("+h+"); for (var "+w+"=0; "+w+"<"+D+".length; "+w+"++) { var "+g+" = "+D+"["+w+"]; ":t+=" for (var "+g+" in "+h+") { ",O){if(t+=" var isAdditional"+s+" = !(false ",p.length)if(p.length>8)t+=" || validate.schema"+i+".hasOwnProperty("+g+") ";else{var H=p;if(H)for(var V,U=-1,J=H.length-1;U<J;)V=H[U+=1],t+=" || "+g+" == "+e.util.toQuotedString(V)+" "}if(N.length){var L=N;if(L)for(var Q,ke=-1,Pe=L.length-1;ke<Pe;)Q=L[ke+=1],t+=" || "+e.usePattern(Q)+".test("+g+") "}t+=" ); if (isAdditional"+s+") { "}if(I=="all")t+=" delete "+h+"["+g+"]; ";else{var ne=e.errorPath,_e="' + "+g+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers)),T)if(I)t+=" delete "+h+"["+g+"]; ";else{t+=" "+b+" = false; ";var fe=_;_=e.errSchemaPath+"/additionalProperties";var ce=ce||[];ce.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { additionalProperty: '"+_e+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is an invalid additional property":t+="should NOT have additional properties",t+="' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ";var Re=t;t=ce.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+Re+"]); ":t+=" validate.errors = ["+Re+"]; return false; ":t+=" var err = "+Re+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",_=fe,d&&(t+=" break; ")}else if(E)if(I=="failing"){t+=" var "+v+" = errors;  ";var $e=e.compositeRule;e.compositeRule=c.compositeRule=!0,c.schema=A,c.schemaPath=e.schemaPath+".additionalProperties",c.errSchemaPath=e.errSchemaPath+"/additionalProperties",c.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var Z=h+"["+g+"]";c.dataPathArr[R]=g;var j=e.validate(c);c.baseId=K,e.util.varOccurences(j,S)<2?t+=" "+e.util.varReplace(j,S,Z)+" ":t+=" var "+S+" = "+Z+"; "+j+" ",t+=" if (!"+b+") { errors = "+v+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+h+"["+g+"]; }  ",e.compositeRule=c.compositeRule=$e}else{c.schema=A,c.schemaPath=e.schemaPath+".additionalProperties",c.errSchemaPath=e.errSchemaPath+"/additionalProperties",c.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var Z=h+"["+g+"]";c.dataPathArr[R]=g;var j=e.validate(c);c.baseId=K,e.util.varOccurences(j,S)<2?t+=" "+e.util.varReplace(j,S,Z)+" ":t+=" var "+S+" = "+Z+"; "+j+" ",d&&(t+=" if (!"+b+") break; ")}e.errorPath=ne}O&&(t+=" } "),t+=" }  ",d&&(t+=" if ("+b+") { ",u+="}")}var ae=e.opts.useDefaults&&!e.compositeRule;if(p.length){var je=p;if(je)for(var V,Me=-1,Be=je.length-1;Me<Be;){V=je[Me+=1];var qe=o[V];if(e.opts.strictKeywords?typeof qe=="object"&&Object.keys(qe).length>0||qe===!1:e.util.schemaHasRules(qe,e.RULES.all)){var vt=e.util.getProperty(V),Z=h+vt,St=ae&&qe.default!==void 0;c.schema=qe,c.schemaPath=i+vt,c.errSchemaPath=_+"/"+e.util.escapeFragment(V),c.errorPath=e.util.getPath(e.errorPath,V,e.opts.jsonPointers),c.dataPathArr[R]=e.util.toQuotedString(V);var j=e.validate(c);if(c.baseId=K,e.util.varOccurences(j,S)<2){j=e.util.varReplace(j,S,Z);var We=Z}else{var We=S;t+=" var "+S+" = "+Z+"; "}if(St)t+=" "+j+" ";else{if(se&&se[V]){t+=" if ( "+We+" === undefined ",F&&(t+=" || ! Object.prototype.hasOwnProperty.call("+h+", '"+e.util.escapeQuotes(V)+"') "),t+=") { "+b+" = false; ";var ne=e.errorPath,fe=_,Je=e.util.escapeQuotes(V);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(ne,V,e.opts.jsonPointers)),_=e.errSchemaPath+"/required";var ce=ce||[];ce.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { missingProperty: '"+Je+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+Je+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ";var Re=t;t=ce.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+Re+"]); ":t+=" validate.errors = ["+Re+"]; return false; ":t+=" var err = "+Re+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",_=fe,e.errorPath=ne,t+=" } else { "}else d?(t+=" if ( "+We+" === undefined ",F&&(t+=" || ! Object.prototype.hasOwnProperty.call("+h+", '"+e.util.escapeQuotes(V)+"') "),t+=") { "+b+" = true; } else { "):(t+=" if ("+We+" !== undefined ",F&&(t+=" &&   Object.prototype.hasOwnProperty.call("+h+", '"+e.util.escapeQuotes(V)+"') "),t+=" ) { ");t+=" "+j+" } "}}d&&(t+=" if ("+b+") { ",u+="}")}}if(N.length){var ht=N;if(ht)for(var Q,he=-1,Ee=ht.length-1;he<Ee;){Q=ht[he+=1];var qe=C[Q];if(e.opts.strictKeywords?typeof qe=="object"&&Object.keys(qe).length>0||qe===!1:e.util.schemaHasRules(qe,e.RULES.all)){c.schema=qe,c.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(Q),c.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(Q),F?t+=" "+D+" = "+D+" || Object.keys("+h+"); for (var "+w+"=0; "+w+"<"+D+".length; "+w+"++) { var "+g+" = "+D+"["+w+"]; ":t+=" for (var "+g+" in "+h+") { ",t+=" if ("+e.usePattern(Q)+".test("+g+")) { ",c.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers);var Z=h+"["+g+"]";c.dataPathArr[R]=g;var j=e.validate(c);c.baseId=K,e.util.varOccurences(j,S)<2?t+=" "+e.util.varReplace(j,S,Z)+" ":t+=" var "+S+" = "+Z+"; "+j+" ",d&&(t+=" if (!"+b+") break; "),t+=" } ",d&&(t+=" else "+b+" = true; "),t+=" }  ",d&&(t+=" if ("+b+") { ",u+="}")}}}return d&&(t+=" "+u+" if ("+v+" == errors) {"),t},vi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),_=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,h="data"+(n||""),v="errs__"+s,c=e.util.copy(e),u="";c.level++;var b="valid"+c.level;if(t+="var "+v+" = errors;",e.opts.strictKeywords?typeof o=="object"&&Object.keys(o).length>0||o===!1:e.util.schemaHasRules(o,e.RULES.all)){c.schema=o,c.schemaPath=i,c.errSchemaPath=_;var g="key"+s,w="idx"+s,R="i"+s,S="' + "+g+" + '",D=c.dataLevel=e.dataLevel+1,p="data"+D,C="dataProperties"+s,N=e.opts.ownProperties,A=e.baseId;N&&(t+=" var "+C+" = undefined; "),N?t+=" "+C+" = "+C+" || Object.keys("+h+"); for (var "+w+"=0; "+w+"<"+C+".length; "+w+"++) { var "+g+" = "+C+"["+w+"]; ":t+=" for (var "+g+" in "+h+") { ",t+=" var startErrs"+s+" = errors; ";var O=g,T=e.compositeRule;e.compositeRule=c.compositeRule=!0;var E=e.validate(c);c.baseId=A,e.util.varOccurences(E,p)<2?t+=" "+e.util.varReplace(E,p,O)+" ":t+=" var "+p+" = "+O+"; "+E+" ",e.compositeRule=c.compositeRule=T,t+=" if (!"+b+") { for (var "+R+"=startErrs"+s+"; "+R+"<errors; "+R+"++) { vErrors["+R+"].propertyName = "+g+"; }   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { propertyName: '"+S+"' } ",e.opts.messages!==!1&&(t+=" , message: 'property name \\'"+S+"\\' is invalid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),d&&(t+=" break; "),t+=" } }"}return d&&(t+=" "+u+" if ("+v+" == errors) {"),t},mi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),_=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,h="data"+(n||""),v="valid"+s,c=e.opts.$data&&o&&o.$data;c&&(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ");var u="schema"+s;if(!c)if(o.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var b=[],g=o;if(g)for(var w,R=-1,S=g.length-1;R<S;){w=g[R+=1];var D=e.schema.properties[w];D&&(e.opts.strictKeywords?typeof D=="object"&&Object.keys(D).length>0||D===!1:e.util.schemaHasRules(D,e.RULES.all))||(b[b.length]=w)}}else var b=o;if(c||b.length){var p=e.errorPath,C=c||b.length>=e.opts.loopRequired,N=e.opts.ownProperties;if(d)if(t+=" var missing"+s+"; ",C){c||(t+=" var "+u+" = validate.schema"+i+"; ");var A="i"+s,O="schema"+s+"["+A+"]",T="' + "+O+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(p,O,e.opts.jsonPointers)),t+=" var "+v+" = true; ",c&&(t+=" if (schema"+s+" === undefined) "+v+" = true; else if (!Array.isArray(schema"+s+")) "+v+" = false; else {"),t+=" for (var "+A+" = 0; "+A+" < "+u+".length; "+A+"++) { "+v+" = "+h+"["+u+"["+A+"]] !== undefined ",N&&(t+=" &&   Object.prototype.hasOwnProperty.call("+h+", "+u+"["+A+"]) "),t+="; if (!"+v+") break; } ",c&&(t+="  }  "),t+="  if (!"+v+") {   ";var E=E||[];E.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+T+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ";var I=t;t=E.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+I+"]); ":t+=" validate.errors = ["+I+"]; return false; ":t+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { "}else{t+=" if ( ";var P=b;if(P)for(var F,A=-1,K=P.length-1;A<K;){F=P[A+=1],A&&(t+=" || ");var x=e.util.getProperty(F),se=h+x;t+=" ( ( "+se+" === undefined ",N&&(t+=" || ! Object.prototype.hasOwnProperty.call("+h+", '"+e.util.escapeQuotes(F)+"') "),t+=") && (missing"+s+" = "+e.util.toQuotedString(e.opts.jsonPointers?F:x)+") ) "}t+=") {  ";var O="missing"+s,T="' + "+O+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(p,O,!0):p+" + "+O);var E=E||[];E.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+T+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ";var I=t;t=E.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+I+"]); ":t+=" validate.errors = ["+I+"]; return false; ":t+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { "}else if(C){c||(t+=" var "+u+" = validate.schema"+i+"; ");var A="i"+s,O="schema"+s+"["+A+"]",T="' + "+O+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(p,O,e.opts.jsonPointers)),c&&(t+=" if ("+u+" && !Array.isArray("+u+")) {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+T+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+u+" !== undefined) { "),t+=" for (var "+A+" = 0; "+A+" < "+u+".length; "+A+"++) { if ("+h+"["+u+"["+A+"]] === undefined ",N&&(t+=" || ! Object.prototype.hasOwnProperty.call("+h+", "+u+"["+A+"]) "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+T+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",c&&(t+="  }  ")}else{var B=b;if(B)for(var F,H=-1,V=B.length-1;H<V;){F=B[H+=1];var x=e.util.getProperty(F),T=e.util.escapeQuotes(F),se=h+x;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(p,F,e.opts.jsonPointers)),t+=" if ( "+se+" === undefined ",N&&(t+=" || ! Object.prototype.hasOwnProperty.call("+h+", '"+e.util.escapeQuotes(F)+"') "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { missingProperty: '"+T+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+T+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=p}else d&&(t+=" if (true) {");return t},pi=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),_=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,h="data"+(n||""),v="valid"+s,c=e.opts.$data&&o&&o.$data,u;if(c?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",u="schema"+s):u=o,(o||c)&&e.opts.uniqueItems!==!1){c&&(t+=" var "+v+"; if ("+u+" === false || "+u+" === undefined) "+v+" = true; else if (typeof "+u+" != 'boolean') "+v+" = false; else { "),t+=" var i = "+h+".length , "+v+" = true , j; if (i > 1) { ";var b=e.schema.items&&e.schema.items.type,g=Array.isArray(b);if(!b||b=="object"||b=="array"||g&&(b.indexOf("object")>=0||b.indexOf("array")>=0))t+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+h+"[i], "+h+"[j])) { "+v+" = false; break outer; } } } ";else{t+=" var itemIndices = {}, item; for (;i--;) { var item = "+h+"[i]; ";var w="checkDataType"+(g?"s":"");t+=" if ("+e.util[w](b,"item",e.opts.strictNumbers,!0)+") continue; ",g&&(t+=` if (typeof item == 'string') item = '"' + item; `),t+=" if (typeof itemIndices[item] == 'number') { "+v+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}t+=" } ",c&&(t+="  }  "),t+=" if (!"+v+") {   ";var R=R||[];R.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(t+=" , schema:  ",c?t+="validate.schema"+i:t+=""+o,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),t+=" } "):t+=" {} ";var S=t;t=R.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+S+"]); ":t+=" validate.errors = ["+S+"]; return false; ":t+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",d&&(t+=" else { ")}else d&&(t+=" if (true) { ");return t},gi={$ref:xo,allOf:ei,anyOf:ti,$comment:ri,const:li,contains:ai,dependencies:si,enum:ni,format:oi,if:ii,items:fi,maximum:Pl,minimum:Pl,maxItems:wl,minItems:wl,maxLength:kl,minLength:kl,maxProperties:yl,minProperties:yl,multipleOf:ui,not:ci,oneOf:di,pattern:hi,properties:_i,propertyNames:vi,required:mi,uniqueItems:pi,validate:Ss},Sl=gi,Dr=Yt.toHash,bi=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],r=["type","$comment"],l=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],t=["number","integer","string","array","object","boolean","null"];return e.all=Dr(r),e.types=Dr(t),e.forEach(function(s){s.rules=s.rules.map(function(n){var o;if(typeof n=="object"){var i=Object.keys(n)[0];o=n[i],n=i,o.forEach(function(d){r.push(d),e.all[d]=!0})}r.push(n);var _=e.all[n]={keyword:n,code:Sl[n],implements:o};return _}),e.all.$comment={keyword:"$comment",code:Sl.$comment},s.type&&(e.types[s.type]=s)}),e.keywords=Dr(r.concat(l)),e.custom={},e},Dl=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],Ei=function(a,e){for(var r=0;r<e.length;r++){a=JSON.parse(JSON.stringify(a));var l=e[r].split("/"),t=a,s;for(s=1;s<l.length;s++)t=t[l[s]];for(s=0;s<Dl.length;s++){var n=Dl[s],o=t[n];o&&(t[n]={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return a},Pi=Qr.MissingRef,wi=$s;function $s(a,e,r){var l=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(r=e,e=void 0);var t=s(a).then(function(){var o=l._addSchema(a,void 0,e);return o.validate||n(o)});return r&&t.then(function(o){r(null,o)},r),t;function s(o){var i=o.$schema;return i&&!l.getSchema(i)?$s.call(l,{$ref:i},!0):Promise.resolve()}function n(o){try{return l._compile(o)}catch(_){if(_ instanceof Pi)return i(_);throw _}function i(_){var d=_.missingSchema;if(c(d))throw new Error("Schema "+d+" is loaded but "+_.missingRef+" cannot be resolved");var h=l._loadingSchemas[d];return h||(h=l._loadingSchemas[d]=l._opts.loadSchema(d),h.then(v,v)),h.then(function(u){if(!c(d))return s(u).then(function(){c(d)||l.addSchema(u,d,void 0,e)})}).then(function(){return n(o)});function v(){delete l._loadingSchemas[d]}function c(u){return l._refs[u]||l._schemas[u]}}}}var ki=function(e,r,l){var t=" ",s=e.level,n=e.dataLevel,o=e.schema[r],i=e.schemaPath+e.util.getProperty(r),_=e.errSchemaPath+"/"+r,d=!e.opts.allErrors,h,v="data"+(n||""),c="valid"+s,u="errs__"+s,b=e.opts.$data&&o&&o.$data,g;b?(t+=" var schema"+s+" = "+e.util.getData(o.$data,n,e.dataPathArr)+"; ",g="schema"+s):g=o;var w=this,R="definition"+s,S=w.definition,D="",p,C,N,A,O;if(b&&S.$data){O="keywordValidate"+s;var T=S.validateSchema;t+=" var "+R+" = RULES.custom['"+r+"'].definition; var "+O+" = "+R+".validate;"}else{if(A=e.useCustomRule(w,o,e.schema,e),!A)return;g="validate.schema"+i,O=A.code,p=S.compile,C=S.inline,N=S.macro}var E=O+".errors",I="i"+s,P="ruleErr"+s,F=S.async;if(F&&!e.async)throw new Error("async keyword in sync schema");if(C||N||(t+=""+E+" = null;"),t+="var "+u+" = errors;var "+c+";",b&&S.$data&&(D+="}",t+=" if ("+g+" === undefined) { "+c+" = true; } else { ",T&&(D+="}",t+=" "+c+" = "+R+".validateSchema("+g+"); if ("+c+") { ")),C)S.statements?t+=" "+A.validate+" ":t+=" "+c+" = "+A.validate+"; ";else if(N){var K=e.util.copy(e),D="";K.level++;var x="valid"+K.level;K.schema=A.validate,K.schemaPath="";var se=e.compositeRule;e.compositeRule=K.compositeRule=!0;var B=e.validate(K).replace(/validate\.schema/g,O);e.compositeRule=K.compositeRule=se,t+=" "+B}else{var H=H||[];H.push(t),t="",t+="  "+O+".call( ",e.opts.passContext?t+="this":t+="self",p||S.schema===!1?t+=" , "+v+" ":t+=" , "+g+" , "+v+" , validate.schema"+e.schemaPath+" ",t+=" , (dataPath || '')",e.errorPath!='""'&&(t+=" + "+e.errorPath);var V=n?"data"+(n-1||""):"parentData",U=n?e.dataPathArr[n]:"parentDataProperty";t+=" , "+V+" , "+U+" , rootData )  ";var J=t;t=H.pop(),S.errors===!1?(t+=" "+c+" = ",F&&(t+="await "),t+=""+J+"; "):F?(E="customErrors"+s,t+=" var "+E+" = null; try { "+c+" = await "+J+"; } catch (e) { "+c+" = false; if (e instanceof ValidationError) "+E+" = e.errors; else throw e; } "):t+=" "+E+" = null; "+c+" = "+J+"; "}if(S.modifying&&(t+=" if ("+V+") "+v+" = "+V+"["+U+"];"),t+=""+D,S.valid)d&&(t+=" if (true) { ");else{t+=" if ( ",S.valid===void 0?(t+=" !",N?t+=""+x:t+=""+c):t+=" "+!S.valid+" ",t+=") { ",h=w.keyword;var H=H||[];H.push(t),t="";var H=H||[];H.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(h||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { keyword: '"+w.keyword+"' } ",e.opts.messages!==!1&&(t+=` , message: 'should pass "`+w.keyword+`" keyword validation' `),e.opts.verbose&&(t+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),t+=" } "):t+=" {} ";var L=t;t=H.pop(),!e.compositeRule&&d?e.async?t+=" throw new ValidationError(["+L+"]); ":t+=" validate.errors = ["+L+"]; return false; ":t+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var Q=t;t=H.pop(),C?S.errors?S.errors!="full"&&(t+="  for (var "+I+"="+u+"; "+I+"<errors; "+I+"++) { var "+P+" = vErrors["+I+"]; if ("+P+".dataPath === undefined) "+P+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+P+".schemaPath === undefined) { "+P+'.schemaPath = "'+_+'"; } ',e.opts.verbose&&(t+=" "+P+".schema = "+g+"; "+P+".data = "+v+"; "),t+=" } "):S.errors===!1?t+=" "+Q+" ":(t+=" if ("+u+" == errors) { "+Q+" } else {  for (var "+I+"="+u+"; "+I+"<errors; "+I+"++) { var "+P+" = vErrors["+I+"]; if ("+P+".dataPath === undefined) "+P+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+P+".schemaPath === undefined) { "+P+'.schemaPath = "'+_+'"; } ',e.opts.verbose&&(t+=" "+P+".schema = "+g+"; "+P+".data = "+v+"; "),t+=" } } "):N?(t+="   var err =   ",e.createErrors!==!1?(t+=" { keyword: '"+(h||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(_)+" , params: { keyword: '"+w.keyword+"' } ",e.opts.messages!==!1&&(t+=` , message: 'should pass "`+w.keyword+`" keyword validation' `),e.opts.verbose&&(t+=" , schema: validate.schema"+i+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; ")):S.errors===!1?t+=" "+Q+" ":(t+=" if (Array.isArray("+E+")) { if (vErrors === null) vErrors = "+E+"; else vErrors = vErrors.concat("+E+"); errors = vErrors.length;  for (var "+I+"="+u+"; "+I+"<errors; "+I+"++) { var "+P+" = vErrors["+I+"]; if ("+P+".dataPath === undefined) "+P+".dataPath = (dataPath || '') + "+e.errorPath+";  "+P+'.schemaPath = "'+_+'";  ',e.opts.verbose&&(t+=" "+P+".schema = "+g+"; "+P+".data = "+v+"; "),t+=" } } else { "+Q+" } "),t+=" } ",d&&(t+=" else { ")}return t};const yi="http://json-schema.org/draft-07/schema#",Si="http://json-schema.org/draft-07/schema#",Di="Core schema meta-schema",Ni={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Ri=["object","boolean"],Ci={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Vs={$schema:yi,$id:Si,title:Di,definitions:Ni,type:Ri,properties:Ci,default:!0};var Nl=Vs,Oi={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:Nl.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:Nl.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},Ii=/^[a-z_$][a-z0-9_$-]*$/i,Fi=ki,Ti=Oi,Ai={add:Li,get:ji,remove:qi,validate:jr};function Li(a,e){var r=this.RULES;if(r.keywords[a])throw new Error("Keyword "+a+" is already defined");if(!Ii.test(a))throw new Error("Keyword "+a+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var l=e.type;if(Array.isArray(l))for(var t=0;t<l.length;t++)n(a,l[t],e);else n(a,l,e);var s=e.metaSchema;s&&(e.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(s,!0))}r.keywords[a]=r.all[a]=!0;function n(o,i,_){for(var d,h=0;h<r.length;h++){var v=r[h];if(v.type==i){d=v;break}}d||(d={type:i,rules:[]},r.push(d));var c={keyword:o,definition:_,custom:!0,code:Fi,implements:_.implements};d.rules.push(c),r.custom[o]=c}return this}function ji(a){var e=this.RULES.custom[a];return e?e.definition:this.RULES.keywords[a]||!1}function qi(a){var e=this.RULES;delete e.keywords[a],delete e.all[a],delete e.custom[a];for(var r=0;r<e.length;r++)for(var l=e[r].rules,t=0;t<l.length;t++)if(l[t].keyword==a){l.splice(t,1);break}return this}function jr(a,e){jr.errors=null;var r=this._validateKeyword=this._validateKeyword||this.compile(Ti,!0);if(r(a))return!0;if(jr.errors=r.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(r.errors));return!1}const Ui="http://json-schema.org/draft-07/schema#",$i="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Vi="Meta-schema for $data reference (JSON Schema extension proposal)",zi="object",Mi=["$data"],Bi={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Hi=!1,Qi={$schema:Ui,$id:$i,description:Vi,type:zi,required:Mi,properties:Bi,additionalProperties:Hi};var zs=Fo,Ht=Hr,Gi=$o,Ms=Es,Ki=ys,Ji=Go,Yi=bi,Bs=Ei,Hs=Yt,Xi=st;st.prototype.validate=Wi;st.prototype.compile=xi;st.prototype.addSchema=ef;st.prototype.addMetaSchema=tf;st.prototype.validateSchema=rf;st.prototype.getSchema=af;st.prototype.removeSchema=nf;st.prototype.addFormat=vf;st.prototype.errorsText=_f;st.prototype._addSchema=of;st.prototype._compile=ff;st.prototype.compileAsync=wi;var wr=Ai;st.prototype.addKeyword=wr.add;st.prototype.getKeyword=wr.get;st.prototype.removeKeyword=wr.remove;st.prototype.validateKeyword=wr.validate;var Qs=Qr;st.ValidationError=Qs.Validation;st.MissingRefError=Qs.MissingRef;st.$dataMetaSchema=Bs;var vr="http://json-schema.org/draft-07/schema",Rl=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],Zi=["/properties"];function st(a){if(!(this instanceof st))return new st(a);a=this._opts=Hs.copy(a)||{},Pf(this),this._schemas={},this._refs={},this._fragments={},this._formats=Ji(a.format),this._cache=a.cache||new Gi,this._loadingSchemas={},this._compilations=[],this.RULES=Yi(),this._getId=uf(a),a.loopRequired=a.loopRequired||1/0,a.errorDataPath=="property"&&(a._errorDataPathProperty=!0),a.serialize===void 0&&(a.serialize=Ki),this._metaOpts=Ef(this),a.formats&&gf(this),a.keywords&&bf(this),mf(this),typeof a.meta=="object"&&this.addMetaSchema(a.meta),a.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),pf(this)}function Wi(a,e){var r;if(typeof a=="string"){if(r=this.getSchema(a),!r)throw new Error('no schema with key or ref "'+a+'"')}else{var l=this._addSchema(a);r=l.validate||this._compile(l)}var t=r(e);return r.$async!==!0&&(this.errors=r.errors),t}function xi(a,e){var r=this._addSchema(a,void 0,e);return r.validate||this._compile(r)}function ef(a,e,r,l){if(Array.isArray(a)){for(var t=0;t<a.length;t++)this.addSchema(a[t],void 0,r,l);return this}var s=this._getId(a);if(s!==void 0&&typeof s!="string")throw new Error("schema id must be string");return e=Ht.normalizeId(e||s),Ks(this,e),this._schemas[e]=this._addSchema(a,r,l,!0),this}function tf(a,e,r){return this.addSchema(a,e,r,!0),this}function rf(a,e){var r=a.$schema;if(r!==void 0&&typeof r!="string")throw new Error("$schema must be a string");if(r=r||this._opts.defaultMeta||lf(this),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var l=this.validate(r,a);if(!l&&e){var t="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(t);else throw new Error(t)}return l}function lf(a){var e=a._opts.meta;return a._opts.defaultMeta=typeof e=="object"?a._getId(e)||e:a.getSchema(vr)?vr:void 0,a._opts.defaultMeta}function af(a){var e=Gs(this,a);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return sf(this,a)}}function sf(a,e){var r=Ht.schema.call(a,{schema:{}},e);if(r){var l=r.schema,t=r.root,s=r.baseId,n=zs.call(a,l,t,void 0,s);return a._fragments[e]=new Ms({ref:e,fragment:!0,schema:l,root:t,baseId:s,validate:n}),n}}function Gs(a,e){return e=Ht.normalizeId(e),a._schemas[e]||a._refs[e]||a._fragments[e]}function nf(a){if(a instanceof RegExp)return sr(this,this._schemas,a),sr(this,this._refs,a),this;switch(typeof a){case"undefined":return sr(this,this._schemas),sr(this,this._refs),this._cache.clear(),this;case"string":var e=Gs(this,a);return e&&this._cache.del(e.cacheKey),delete this._schemas[a],delete this._refs[a],this;case"object":var r=this._opts.serialize,l=r?r(a):a;this._cache.del(l);var t=this._getId(a);t&&(t=Ht.normalizeId(t),delete this._schemas[t],delete this._refs[t])}return this}function sr(a,e,r){for(var l in e){var t=e[l];!t.meta&&(!r||r.test(l))&&(a._cache.del(t.cacheKey),delete e[l])}}function of(a,e,r,l){if(typeof a!="object"&&typeof a!="boolean")throw new Error("schema should be object or boolean");var t=this._opts.serialize,s=t?t(a):a,n=this._cache.get(s);if(n)return n;l=l||this._opts.addUsedSchema!==!1;var o=Ht.normalizeId(this._getId(a));o&&l&&Ks(this,o);var i=this._opts.validateSchema!==!1&&!e,_;i&&!(_=o&&o==Ht.normalizeId(a.$schema))&&this.validateSchema(a,!0);var d=Ht.ids.call(this,a),h=new Ms({id:o,schema:a,localRefs:d,cacheKey:s,meta:r});return o[0]!="#"&&l&&(this._refs[o]=h),this._cache.put(s,h),i&&_&&this.validateSchema(a,!0),h}function ff(a,e){if(a.compiling)return a.validate=t,t.schema=a.schema,t.errors=null,t.root=e||t,a.schema.$async===!0&&(t.$async=!0),t;a.compiling=!0;var r;a.meta&&(r=this._opts,this._opts=this._metaOpts);var l;try{l=zs.call(this,a.schema,e,a.localRefs)}catch(s){throw delete a.validate,s}finally{a.compiling=!1,a.meta&&(this._opts=r)}return a.validate=l,a.refs=l.refs,a.refVal=l.refVal,a.root=l.root,l;function t(){var s=a.validate,n=s.apply(this,arguments);return t.errors=s.errors,n}}function uf(a){switch(a.schemaId){case"auto":return hf;case"id":return cf;default:return df}}function cf(a){return a.$id&&this.logger.warn("schema $id ignored",a.$id),a.id}function df(a){return a.id&&this.logger.warn("schema id ignored",a.id),a.$id}function hf(a){if(a.$id&&a.id&&a.$id!=a.id)throw new Error("schema $id is different from id");return a.$id||a.id}function _f(a,e){if(a=a||this.errors,!a)return"No errors";e=e||{};for(var r=e.separator===void 0?", ":e.separator,l=e.dataVar===void 0?"data":e.dataVar,t="",s=0;s<a.length;s++){var n=a[s];n&&(t+=l+n.dataPath+" "+n.message+r)}return t.slice(0,-r.length)}function vf(a,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[a]=e,this}function mf(a){var e;if(a._opts.$data&&(e=Qi,a.addMetaSchema(e,e.$id,!0)),a._opts.meta!==!1){var r=Vs;a._opts.$data&&(r=Bs(r,Zi)),a.addMetaSchema(r,vr,!0),a._refs["http://json-schema.org/schema"]=vr}}function pf(a){var e=a._opts.schemas;if(e)if(Array.isArray(e))a.addSchema(e);else for(var r in e)a.addSchema(e[r],r)}function gf(a){for(var e in a._opts.formats){var r=a._opts.formats[e];a.addFormat(e,r)}}function bf(a){for(var e in a._opts.keywords){var r=a._opts.keywords[e];a.addKeyword(e,r)}}function Ks(a,e){if(a._schemas[e]||a._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function Ef(a){for(var e=Hs.copy(a._opts),r=0;r<Rl.length;r++)delete e[Rl[r]];return e}function Pf(a){var e=a._opts.logger;if(e===!1)a.logger={log:Nr,warn:Nr,error:Nr};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");a.logger=e}}function Nr(){}const wf=yn(Xi);function jt(a,e,r,l,t,s,n,o,i,_,d,h,v){const c={id:`${Math.random()}`,type:l,position:{x:o,y:i},data:{label:t,sequence:n,d3f_class:s,user_properties:[]},measured:{width:_,height:d},origin:[.5,0],selected:!1,dragging:!1};let u,b;v?(u=c.id,b=r.id):(u=r.id,b=c.id);const g={type:"editableEdge",data:{label:h},source:b,sourceHandle:"source",target:u,targetHandle:"target",id:`xy-edge__${b}source-${u}target`,selected:!1};e.update(w=>[...w,g]),a.update(w=>[...w,c])}function Cl(a,e,r){const l=a.slice();return l[18]=e[r],l}const kf=a=>({}),Ol=a=>({});function yf(a){let e;return{c(){e=k("No related offensive techniques in this release.")},l(r){e=y(r,"No related offensive techniques in this release.")},m(r,l){m(r,e,l)},p:we,i:we,o:we,d(r){r&&f(e)}}}function Sf(a){let e,r;return e=new Lt({props:{$$slots:{default:[Cf]},$$scope:{ctx:a}}}),{c(){Oe(e.$$.fragment)},l(l){Ie(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t&16394&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(ie(e.$$.fragment,l),r=!0)},o(l){de(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function Df(a){let e,r="Loading...";return{c(){e=Y("div"),e.textContent=r},l(l){e=X(l,"DIV",{"data-svelte-h":!0}),Ne(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){m(l,e,t)},p:we,i:we,o:we,d(l){l&&f(e)}}}function Il(a){let e=a[18].off_tech_id.value.replace(/ |\./g,"")+"",r,l,t=a[18].off_tech_label.value+"",s,n,o="-->",i,_,d=a[18].off_artifact_rel_label.value.replace(/ /g,"")+"",h,v,c=ue(a[18].off_artifact.value)+"",u,b,g=a[18].off_artifact_label.value+"",w,R,S,D,p=ue(a[18].off_artifact.value)+"",C,N,A=a[18].off_tech_id.value.replace(/ |\./g,"")+"",O,T,E=a[18].off_tech_id.value.replace(/ |\./g,"")+"",I,P,F=ue(a[18].off_artifact.value)+"",K,x,se=ue(a[18].off_artifact.value)+"",B,H;function V(L,Q){return Q&10&&(S=null),S==null&&(S=!!L[3].includes(L[18].off_tech_id.value.replace(/ |\./g,""))),S?Rf:Nf}let U=V(a,-1),J=U(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),i=k(o),_=k(" |"),h=k(d),v=k("| "),u=k(c),b=k('["'),w=k(g),R=k(`"];
            `),J.c(),D=k(`
            class `),C=k(p),N=k(" ArtifactNode; click "),O=k(A),T=k(` href "javascript:da_to_off_callback('`),I=k(E),P=k(`')"; click `),K=k(F),x=k(' href "/dao/artifact/d3f:'),B=k(se),H=k('";')},l(L){r=y(L,e),l=y(L,'["'),s=y(L,t),n=y(L,'"] '),i=y(L,o),_=y(L," |"),h=y(L,d),v=y(L,"| "),u=y(L,c),b=y(L,'["'),w=y(L,g),R=y(L,`"];
            `),J.l(L),D=y(L,`
            class `),C=y(L,p),N=y(L," ArtifactNode; click "),O=y(L,A),T=y(L,` href "javascript:da_to_off_callback('`),I=y(L,E),P=y(L,`')"; click `),K=y(L,F),x=y(L,' href "/dao/artifact/d3f:'),B=y(L,se),H=y(L,'";')},m(L,Q){m(L,r,Q),m(L,l,Q),m(L,s,Q),m(L,n,Q),m(L,i,Q),m(L,_,Q),m(L,h,Q),m(L,v,Q),m(L,u,Q),m(L,b,Q),m(L,w,Q),m(L,R,Q),J.m(L,Q),m(L,D,Q),m(L,C,Q),m(L,N,Q),m(L,O,Q),m(L,T,Q),m(L,I,Q),m(L,P,Q),m(L,K,Q),m(L,x,Q),m(L,B,Q),m(L,H,Q)},p(L,Q){Q&2&&e!==(e=L[18].off_tech_id.value.replace(/ |\./g,"")+"")&&G(r,e),Q&2&&t!==(t=L[18].off_tech_label.value+"")&&G(s,t),Q&2&&d!==(d=L[18].off_artifact_rel_label.value.replace(/ /g,"")+"")&&G(h,d),Q&2&&c!==(c=ue(L[18].off_artifact.value)+"")&&G(u,c),Q&2&&g!==(g=L[18].off_artifact_label.value+"")&&G(w,g),U===(U=V(L,Q))&&J?J.p(L,Q):(J.d(1),J=U(L),J&&(J.c(),J.m(D.parentNode,D))),Q&2&&p!==(p=ue(L[18].off_artifact.value)+"")&&G(C,p),Q&2&&A!==(A=L[18].off_tech_id.value.replace(/ |\./g,"")+"")&&G(O,A),Q&2&&E!==(E=L[18].off_tech_id.value.replace(/ |\./g,"")+"")&&G(I,E),Q&2&&F!==(F=ue(L[18].off_artifact.value)+"")&&G(K,F),Q&2&&se!==(se=ue(L[18].off_artifact.value)+"")&&G(B,se)},d(L){L&&(f(r),f(l),f(s),f(n),f(i),f(_),f(h),f(v),f(u),f(b),f(w),f(R),f(D),f(C),f(N),f(O),f(T),f(I),f(P),f(K),f(x),f(B),f(H)),J.d(L)}}}function Nf(a){let e,r=a[18].off_tech_id.value.replace(/ |\./g,"")+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" OffensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," OffensiveTechniqueNode;")},m(s,n){m(s,e,n),m(s,l,n),m(s,t,n)},p(s,n){n&2&&r!==(r=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&G(l,r)},d(s){s&&(f(e),f(l),f(t))}}}function Rf(a){let e,r=a[18].off_tech_id.value.replace(/ |\./g,"")+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" SelectedOffensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," SelectedOffensiveTechniqueNode;")},m(s,n){m(s,e,n),m(s,l,n),m(s,t,n)},p(s,n){n&2&&r!==(r=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&G(l,r)},d(s){s&&(f(e),f(l),f(t))}}}function Fl(a){let e=a[6].edge_is_unique(a[18].off_tech_label.value,a[18].off_artifact_rel_label.value,a[18].off_artifact_label.value),r,l=e&&Il(a);return{c(){l&&l.c(),r=be()},l(t){l&&l.l(t),r=be()},m(t,s){l&&l.m(t,s),m(t,r,s)},p(t,s){s&2&&(e=t[6].edge_is_unique(t[18].off_tech_label.value,t[18].off_artifact_rel_label.value,t[18].off_artifact_label.value)),e?l?l.p(t,s):(l=Il(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&f(r),l&&l.d(t)}}}function Cf(a){let e,r,l=Ce(a[1].da_to_off.results.bindings),t=[];for(let s=0;s<l.length;s+=1)t[s]=Fl(Cl(a,l,s));return{c(){e=k(`graph LR;
        `);for(let s=0;s<t.length;s+=1)t[s].c();r=be()},l(s){e=y(s,`graph LR;
        `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=be()},m(s,n){m(s,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,n);m(s,r,n)},p(s,n){if(n&74){l=Ce(s[1].da_to_off.results.bindings);let o;for(o=0;o<l.length;o+=1){const i=Cl(s,l,o);t[o]?t[o].p(i,n):(t[o]=Fl(i),t[o].c(),t[o].m(r.parentNode,r))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(s){s&&(f(e),f(r)),Ze(t,s)}}}function Of(a){let e,r,l,t,s,n,o,i,_,d,h,v,c,u=a[3].length+"",b,g,w,R,S;const D=a[9].header,p=tt(D,a,a[14],Ol),C=a[9].default,N=tt(C,a,a[14],null),A=[Df,Sf,yf],O=[];function T(E,I){return E[1]?E[1].da_to_off.results.bindings.length>0?1:2:0}return o=T(a),i=O[o]=A[o](a),{c(){e=Y("dialog"),r=Y("div"),p&&p.c(),l=k(`
    Select Attack Techniques
    `),N&&N.c(),t=re(),s=Y("hr"),n=re(),i.c(),_=re(),d=Y("hr"),h=re(),v=Y("button"),c=k("Insert ("),b=k(u),g=k(")"),this.h()},l(E){e=X(E,"DIALOG",{class:!0});var I=me(e);r=X(I,"DIV",{class:!0});var P=me(r);p&&p.l(P),l=y(P,`
    Select Attack Techniques
    `),N&&N.l(P),t=le(P),s=X(P,"HR",{}),n=le(P),i.l(P),_=le(P),d=X(P,"HR",{}),h=le(P),v=X(P,"BUTTON",{class:!0});var F=me(v);c=y(F,"Insert ("),b=y(F,u),g=y(F,")"),F.forEach(f),P.forEach(f),I.forEach(f),this.h()},h(){v.autofocus=!0,te(v,"class","svelte-1ai9hff"),te(r,"class","svelte-1ai9hff"),te(e,"class","svelte-1ai9hff")},m(E,I){m(E,e,I),$(e,r),p&&p.m(r,null),$(r,l),N&&N.m(r,null),$(r,t),$(r,s),$(r,n),O[o].m(r,null),$(r,_),$(r,d),$(r,h),$(r,v),$(v,c),$(v,b),$(v,g),a[11](e),w=!0,v.focus(),R||(S=[pe(v,"click",a[7]),pe(r,"click",kt(a[10])),pe(e,"close",a[12]),pe(e,"click",At(a[13]))],R=!0)},p(E,[I]){p&&p.p&&(!w||I&16384)&&rt(p,D,E,E[14],w?at(D,E[14],I,kf):lt(E[14]),Ol),N&&N.p&&(!w||I&16384)&&rt(N,C,E,E[14],w?at(C,E[14],I,null):lt(E[14]),null);let P=o;o=T(E),o===P?O[o].p(E,I):(ct(),de(O[P],1,1,()=>{O[P]=null}),dt(),i=O[o],i?i.p(E,I):(i=O[o]=A[o](E),i.c()),ie(i,1),i.m(r,_)),(!w||I&8)&&u!==(u=E[3].length+"")&&G(b,u)},i(E){w||(ie(p,E),ie(N,E),ie(i),w=!0)},o(E){de(p,E),de(N,E),de(i),w=!1},d(E){E&&f(e),p&&p.d(E),N&&N.d(E),O[o].d(),a[11](null),R=!1,_t(S)}}}function If(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{show_attack_modal:i}=e,{parent_node:_}=e,{data:d}=e,h;const v=Ot();Ke(a,v,p=>r(16,s=p));const c=It();Ke(a,c,p=>r(15,t=p));let u=new Vt;function b(p){l.includes(p)?r(3,l=l.filter(C=>C!==p)):l.push(p),r(3,l)}window.da_to_off_callback=function(p){b(p)};function g(){let p=0,C=200,N=100;for(const A of l){let O=d.da_to_off.results.bindings.find(T=>T.off_tech_id.value.replace(/ |\./g,"")==A);O&&(jt(v,c,_,"attackSelectorNode",O.off_tech_label.value,"d3f:"+O.off_tech_id.value,_.data.sequence,_.position.x+p*C,_.position.y+N,182,63,O.off_artifact_rel_label.value,!1),p+=1)}v.set(s),c.set(t),h&&h.close(),r(3,l=[])}function w(p){yt.call(this,a,p)}function R(p){Ge[p?"unshift":"push"](()=>{h=p,r(2,h)})}const S=()=>r(0,i=!1),D=()=>{h.close(),r(3,l=[])};return a.$$set=p=>{"show_attack_modal"in p&&r(0,i=p.show_attack_modal),"parent_node"in p&&r(8,_=p.parent_node),"data"in p&&r(1,d=p.data),"$$scope"in p&&r(14,o=p.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&i&&h&&(h.showModal(),u.reset()),a.$$.dirty&5&&!i&&h&&(h.close(),u.reset())},r(3,l=[]),[i,d,h,l,v,c,u,g,_,n,w,R,S,D,o]}class Ff extends nt{constructor(e){super(),ot(this,e,If,Of,xe,{show_attack_modal:0,parent_node:8,data:1})}}function Tl(a,e,r){const l=a.slice();return l[23]=e[r],l}const Tf=a=>({}),Al=a=>({});function Af(a){let e;return{c(){e=k("No related defensive techniques in this release.")},l(r){e=y(r,"No related defensive techniques in this release.")},m(r,l){m(r,e,l)},p:we,i:we,o:we,d(r){r&&f(e)}}}function Lf(a){let e,r,l,t,s,n=a[4],o,i;function _(v){a[14](v)}let d={toggles:a[5]};a[4]!==void 0&&(d.selected=a[4]),l=new gs({props:d}),Ge.push(()=>pt(l,"selected",_));let h=Ul(a);return{c(){e=Y("br"),r=re(),Oe(l.$$.fragment),s=re(),h.c(),o=be()},l(v){e=X(v,"BR",{}),r=le(v),Ie(l.$$.fragment,v),s=le(v),h.l(v),o=be()},m(v,c){m(v,e,c),m(v,r,c),Fe(l,v,c),m(v,s,c),h.m(v,c),m(v,o,c),i=!0},p(v,c){const u={};c&32&&(u.toggles=v[5]),!t&&c&16&&(t=!0,u.selected=v[4],mt(()=>t=!1)),l.$set(u),c&16&&xe(n,n=v[4])?(ct(),de(h,1,1,we),dt(),h=Ul(v),h.c(),ie(h,1),h.m(o.parentNode,o)):h.p(v,c)},i(v){i||(ie(l.$$.fragment,v),ie(h),i=!0)},o(v){de(l.$$.fragment,v),de(h),i=!1},d(v){v&&(f(e),f(r),f(s),f(o)),Te(l,v),h.d(v)}}}function jf(a){let e,r="Loading...";return{c(){e=Y("div"),e.textContent=r},l(l){e=X(l,"DIV",{"data-svelte-h":!0}),Ne(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){m(l,e,t)},p:we,i:we,o:we,d(l){l&&f(e)}}}function Ll(a){let e=!a[4].includes(a[23].def_tactic_label.value),r,l=e&&jl(a);return{c(){l&&l.c(),r=be()},l(t){l&&l.l(t),r=be()},m(t,s){l&&l.m(t,s),m(t,r,s)},p(t,s){s&18&&(e=!t[4].includes(t[23].def_tactic_label.value)),e?l?l.p(t,s):(l=jl(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&f(r),l&&l.d(t)}}}function jl(a){let e=ue(a[23].def_tech.value)+"",r,l,t=a[23].def_tech_label.value+"",s,n,o="-->",i,_,d=a[23].def_artifact_rel_label.value.replace(/ /g,"")+"",h,v,c=ue(a[23].def_artifact.value)+"",u,b,g=a[23].def_artifact_label.value+"",w,R,S,D,p=ue(a[23].def_artifact.value)+"",C,N,A=ue(a[23].def_tech.value)+"",O,T,E=ue(a[23].def_tech.value)+"",I,P,F=ue(a[23].def_artifact.value)+"",K,x,se=ue(a[23].def_artifact.value)+"",B,H;function V(L,Q){return Q&66&&(S=null),S==null&&(S=!!L[6].includes(ue(L[23].def_tech.value))),S?Uf:qf}let U=V(a,-1),J=U(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),i=k(o),_=k(`
                | `),h=k(d),v=k(" | "),u=k(c),b=k('["'),w=k(g),R=k(`"];
                `),J.c(),D=k(` 
                class `),C=k(p),N=k(` ArtifactNode;
                click `),O=k(A),T=k(` href "javascript:da_to_def_callback('`),I=k(E),P=k(`')";
                click `),K=k(F),x=k(' href "/dao/artifact/d3f:'),B=k(se),H=k('";')},l(L){r=y(L,e),l=y(L,'["'),s=y(L,t),n=y(L,'"] '),i=y(L,o),_=y(L,`
                | `),h=y(L,d),v=y(L," | "),u=y(L,c),b=y(L,'["'),w=y(L,g),R=y(L,`"];
                `),J.l(L),D=y(L,` 
                class `),C=y(L,p),N=y(L,` ArtifactNode;
                click `),O=y(L,A),T=y(L,` href "javascript:da_to_def_callback('`),I=y(L,E),P=y(L,`')";
                click `),K=y(L,F),x=y(L,' href "/dao/artifact/d3f:'),B=y(L,se),H=y(L,'";')},m(L,Q){m(L,r,Q),m(L,l,Q),m(L,s,Q),m(L,n,Q),m(L,i,Q),m(L,_,Q),m(L,h,Q),m(L,v,Q),m(L,u,Q),m(L,b,Q),m(L,w,Q),m(L,R,Q),J.m(L,Q),m(L,D,Q),m(L,C,Q),m(L,N,Q),m(L,O,Q),m(L,T,Q),m(L,I,Q),m(L,P,Q),m(L,K,Q),m(L,x,Q),m(L,B,Q),m(L,H,Q)},p(L,Q){Q&2&&e!==(e=ue(L[23].def_tech.value)+"")&&G(r,e),Q&2&&t!==(t=L[23].def_tech_label.value+"")&&G(s,t),Q&2&&d!==(d=L[23].def_artifact_rel_label.value.replace(/ /g,"")+"")&&G(h,d),Q&2&&c!==(c=ue(L[23].def_artifact.value)+"")&&G(u,c),Q&2&&g!==(g=L[23].def_artifact_label.value+"")&&G(w,g),U===(U=V(L,Q))&&J?J.p(L,Q):(J.d(1),J=U(L),J&&(J.c(),J.m(D.parentNode,D))),Q&2&&p!==(p=ue(L[23].def_artifact.value)+"")&&G(C,p),Q&2&&A!==(A=ue(L[23].def_tech.value)+"")&&G(O,A),Q&2&&E!==(E=ue(L[23].def_tech.value)+"")&&G(I,E),Q&2&&F!==(F=ue(L[23].def_artifact.value)+"")&&G(K,F),Q&2&&se!==(se=ue(L[23].def_artifact.value)+"")&&G(B,se)},d(L){L&&(f(r),f(l),f(s),f(n),f(i),f(_),f(h),f(v),f(u),f(b),f(w),f(R),f(D),f(C),f(N),f(O),f(T),f(I),f(P),f(K),f(x),f(B),f(H)),J.d(L)}}}function qf(a){let e,r=ue(a[23].def_tech.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" DefensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," DefensiveTechniqueNode;")},m(s,n){m(s,e,n),m(s,l,n),m(s,t,n)},p(s,n){n&2&&r!==(r=ue(s[23].def_tech.value)+"")&&G(l,r)},d(s){s&&(f(e),f(l),f(t))}}}function Uf(a){let e,r=ue(a[23].def_tech.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" SelectedDefensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," SelectedDefensiveTechniqueNode;")},m(s,n){m(s,e,n),m(s,l,n),m(s,t,n)},p(s,n){n&2&&r!==(r=ue(s[23].def_tech.value)+"")&&G(l,r)},d(s){s&&(f(e),f(l),f(t))}}}function ql(a){let e=a[3].edge_is_unique(a[23].def_tech_label.value,a[23].def_artifact_rel_label.value,a[23].def_artifact_label.value),r,l=e&&Ll(a);return{c(){l&&l.c(),r=be()},l(t){l&&l.l(t),r=be()},m(t,s){l&&l.m(t,s),m(t,r,s)},p(t,s){s&10&&(e=t[3].edge_is_unique(t[23].def_tech_label.value,t[23].def_artifact_rel_label.value,t[23].def_artifact_label.value)),e?l?l.p(t,s):(l=Ll(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&f(r),l&&l.d(t)}}}function $f(a){let e,r,l=Ce(a[1].da_to_def.results.bindings),t=[];for(let s=0;s<l.length;s+=1)t[s]=ql(Tl(a,l,s));return{c(){e=k(`graph LR;
          `);for(let s=0;s<t.length;s+=1)t[s].c();r=be()},l(s){e=y(s,`graph LR;
          `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=be()},m(s,n){m(s,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,n);m(s,r,n)},p(s,n){if(n&90){l=Ce(s[1].da_to_def.results.bindings);let o;for(o=0;o<l.length;o+=1){const i=Tl(s,l,o);t[o]?t[o].p(i,n):(t[o]=ql(i),t[o].c(),t[o].m(r.parentNode,r))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(s){s&&(f(e),f(r)),Ze(t,s)}}}function Ul(a){let e,r;return e=new Lt({props:{$$slots:{default:[$f]},$$scope:{ctx:a}}}),{c(){Oe(e.$$.fragment)},l(l){Ie(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t&262234&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(ie(e.$$.fragment,l),r=!0)},o(l){de(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function Vf(a){let e,r,l,t,s,n,o,i,_,d,h,v,c,u=a[6].length+"",b,g,w,R,S;const D=a[12].header,p=tt(D,a,a[18],Al),C=a[12].default,N=tt(C,a,a[18],null),A=[jf,Lf,Af],O=[];function T(E,I){return E[1]?E[1].da_to_def.results.bindings.length>0?1:2:0}return o=T(a),i=O[o]=A[o](a),{c(){e=Y("dialog"),r=Y("div"),p&&p.c(),l=k(`
    Select Countermeasure Techniques
    `),N&&N.c(),t=re(),s=Y("hr"),n=re(),i.c(),_=re(),d=Y("hr"),h=re(),v=Y("button"),c=k("Insert ("),b=k(u),g=k(")"),this.h()},l(E){e=X(E,"DIALOG",{class:!0});var I=me(e);r=X(I,"DIV",{class:!0});var P=me(r);p&&p.l(P),l=y(P,`
    Select Countermeasure Techniques
    `),N&&N.l(P),t=le(P),s=X(P,"HR",{}),n=le(P),i.l(P),_=le(P),d=X(P,"HR",{}),h=le(P),v=X(P,"BUTTON",{class:!0});var F=me(v);c=y(F,"Insert ("),b=y(F,u),g=y(F,")"),F.forEach(f),P.forEach(f),I.forEach(f),this.h()},h(){v.autofocus=!0,te(v,"class","svelte-1yq7x1p"),te(r,"class","svelte-1yq7x1p"),te(e,"class","svelte-1yq7x1p")},m(E,I){m(E,e,I),$(e,r),p&&p.m(r,null),$(r,l),N&&N.m(r,null),$(r,t),$(r,s),$(r,n),O[o].m(r,null),$(r,_),$(r,d),$(r,h),$(r,v),$(v,c),$(v,b),$(v,g),a[15](e),w=!0,v.focus(),R||(S=[pe(v,"click",a[9]),pe(r,"click",kt(a[13])),pe(e,"close",a[16]),pe(e,"click",At(a[17]))],R=!0)},p(E,[I]){p&&p.p&&(!w||I&262144)&&rt(p,D,E,E[18],w?at(D,E[18],I,Tf):lt(E[18]),Al),N&&N.p&&(!w||I&262144)&&rt(N,C,E,E[18],w?at(C,E[18],I,null):lt(E[18]),null);let P=o;o=T(E),o===P?O[o].p(E,I):(ct(),de(O[P],1,1,()=>{O[P]=null}),dt(),i=O[o],i?i.p(E,I):(i=O[o]=A[o](E),i.c()),ie(i,1),i.m(r,_)),(!w||I&64)&&u!==(u=E[6].length+"")&&G(b,u)},i(E){w||(ie(p,E),ie(N,E),ie(i),w=!0)},o(E){de(p,E),de(N,E),de(i),w=!1},d(E){E&&f(e),p&&p.d(E),N&&N.d(E),O[o].d(),a[15](null),R=!1,_t(S)}}}function zf(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{show_defend_modal:i}=e,{parent_node:_}=e,{data:d}=e,h;const v=Ot();Ke(a,v,T=>r(20,s=T));const c=It();Ke(a,c,T=>r(19,t=T));let u=new Vt;function b(T){l.includes(T)?r(6,l=l.filter(E=>E!==T)):l.push(T),r(6,l)}window.da_to_def_callback=function(T){b(T)};function g(){let T=0,E=200,I=100;for(const P of l){let F=d.da_to_def.results.bindings.find(K=>ue(K.def_tech.value)==P);F&&(jt(v,c,_,"countermeasureSelectorNode",F.def_tech_label.value,"d3f:"+ue(F.def_tech.value),_.data.sequence,_.position.x+T*E,_.position.y-I,182,63,F.def_artifact_rel_label.value,!1),T+=1)}v.set(s),c.set(t),h&&h.close(),r(6,l=[])}let w=new Set,R=[],S=[];ps(R,S)&&(S=[]);function D(T){for(const E of l){let I=d.da_to_def.results.bindings.find(P=>ue(P.def_tech.value)==E);T.includes(I.def_tactic_label.value)&&r(6,l=l.filter(P=>P!==E))}r(6,l)}function p(T){yt.call(this,a,T)}function C(T){S=T,r(4,S)}function N(T){Ge[T?"unshift":"push"](()=>{h=T,r(2,h)})}const A=()=>r(0,i=!1),O=()=>{h.close(),r(6,l=[])};return a.$$set=T=>{"show_defend_modal"in T&&r(0,i=T.show_defend_modal),"parent_node"in T&&r(10,_=T.parent_node),"data"in T&&r(1,d=T.data),"$$scope"in T&&r(18,o=T.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&i&&h&&(h.showModal(),r(3,u=new Vt)),a.$$.dirty&5&&!i&&h&&h.close(),a.$$.dirty&2050&&d&&(d.da_to_def.results.bindings.forEach(T=>{w.add(T.def_tactic_label.value)}),r(11,w),r(1,d)),a.$$.dirty&2048&&r(5,R=Array.from(w).sort(function(T,E){return ur[T]-ur[E]})),a.$$.dirty&16&&D(S),a.$$.dirty&24&&u.reset(S)},r(6,l=[]),[i,d,h,u,S,R,l,v,c,g,_,w,n,p,C,N,A,O,o]}class Mf extends nt{constructor(e){super(),ot(this,e,zf,Vf,xe,{show_defend_modal:0,parent_node:10,data:1})}}function $l(a,e,r){const l=a.slice();return l[26]=e[r],l}function Vl(a,e,r){const l=a.slice();return l[29]=e[r],l}function zl(a,e,r){const l=a.slice();return l[32]=e[r],l}function Ml(a,e,r){const l=a.slice();return l[26]=e[r],l}function Bl(a,e,r){const l=a.slice();return l[29]=e[r],l}const Bf=a=>({}),Hl=a=>({});function Hf(a){let e;return{c(){e=k("No related weaknesses in this release.")},l(r){e=y(r,"No related weaknesses in this release.")},m(r,l){m(r,e,l)},p:we,i:we,o:we,d(r){r&&f(e)}}}function Qf(a){let e,r;return e=new Lt({props:{$$slots:{default:[Kf]},$$scope:{ctx:a}}}),{c(){Oe(e.$$.fragment)},l(l){Ie(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t[0]&4194750&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(ie(e.$$.fragment,l),r=!0)},o(l){de(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function Gf(a){let e,r="Loading...";return{c(){e=Y("div"),e.textContent=r},l(l){e=X(l,"DIV",{"data-svelte-h":!0}),Ne(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){m(l,e,t)},p:we,i:we,o:we,d(l){l&&f(e)}}}function Ql(a){let e,r=Ce(a[32]["d3f:outbound"]),l=[];for(let t=0;t<r.length;t+=1)l[t]=Jl(Ml(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=be()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=be()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);m(t,e,s)},p(t,s){if(s[0]&430){r=Ce(t[32]["d3f:outbound"]);let n;for(n=0;n<r.length;n+=1){const o=Ml(t,r,n);l[n]?l[n].p(o,s):(l[n]=Jl(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&f(e),Ze(l,t)}}}function Gl(a){let e,r=a[32]["@id"]+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" selected_inbound_node;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," selected_inbound_node;")},m(s,n){m(s,e,n),m(s,l,n),m(s,t,n)},p(s,n){n[0]&160&&r!==(r=s[32]["@id"]+"")&&G(l,r)},d(s){s&&(f(e),f(l),f(t))}}}function Kl(a){let e=a[32]["@id"]+"",r,l,t=a[32]["rdfs:label"][0]+"",s,n,o="-->",i,_,d=ue(a[26]["@id"])+"",h,v,c=a[29]["@id"]+"",u,b,g=a[7].i(a[29]["@id"])["rdfs:label"][0]+"",w,R,S=a[32]["@id"]+"",D,p,C=a[32]["@id"]+"",N,A,O,T,E=a[8].includes(a[32]["@id"]),I,P=a[29]["@id"]+"",F,K,x=a[29]["@id"]+"",se,B,H,V,U=a[32]["@id"]+"",J,L,Q=a[32]["@id"]+"",ke,Pe,ne=a[29]["@id"]+"",_e,fe,ce=a[3](a[29])+"",Re,$e,Z=E&&Gl(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),i=k(o),_=k(" | "),h=k(d),v=k(" | "),u=k(c),b=k('["'),w=k(g),R=k(`"];
                class `),D=k(S),p=k(" inbound_node; style "),N=k(C),A=k(" fill:"),O=k(a[1]),T=k(`;
                `),Z&&Z.c(),I=k(`
                class `),F=k(P),K=k(" RootArtifactNode; style "),se=k(x),B=k(" fill:"),H=k(a[2]),V=k(`;
                click `),J=k(U),L=k(` href "javascript:da_to_weak_callback('`),ke=k(Q),Pe=k(`')"; click `),_e=k(ne),fe=k(' href "'),Re=k(ce),$e=k('";')},l(j){r=y(j,e),l=y(j,'["'),s=y(j,t),n=y(j,'"] '),i=y(j,o),_=y(j," | "),h=y(j,d),v=y(j," | "),u=y(j,c),b=y(j,'["'),w=y(j,g),R=y(j,`"];
                class `),D=y(j,S),p=y(j," inbound_node; style "),N=y(j,C),A=y(j," fill:"),O=y(j,a[1]),T=y(j,`;
                `),Z&&Z.l(j),I=y(j,`
                class `),F=y(j,P),K=y(j," RootArtifactNode; style "),se=y(j,x),B=y(j," fill:"),H=y(j,a[2]),V=y(j,`;
                click `),J=y(j,U),L=y(j,` href "javascript:da_to_weak_callback('`),ke=y(j,Q),Pe=y(j,`')"; click `),_e=y(j,ne),fe=y(j,' href "'),Re=y(j,ce),$e=y(j,'";')},m(j,ae){m(j,r,ae),m(j,l,ae),m(j,s,ae),m(j,n,ae),m(j,i,ae),m(j,_,ae),m(j,h,ae),m(j,v,ae),m(j,u,ae),m(j,b,ae),m(j,w,ae),m(j,R,ae),m(j,D,ae),m(j,p,ae),m(j,N,ae),m(j,A,ae),m(j,O,ae),m(j,T,ae),Z&&Z.m(j,ae),m(j,I,ae),m(j,F,ae),m(j,K,ae),m(j,se,ae),m(j,B,ae),m(j,H,ae),m(j,V,ae),m(j,J,ae),m(j,L,ae),m(j,ke,ae),m(j,Pe,ae),m(j,_e,ae),m(j,fe,ae),m(j,Re,ae),m(j,$e,ae)},p(j,ae){ae[0]&160&&e!==(e=j[32]["@id"]+"")&&G(r,e),ae[0]&160&&t!==(t=j[32]["rdfs:label"][0]+"")&&G(s,t),ae[0]&160&&d!==(d=ue(j[26]["@id"])+"")&&G(h,d),ae[0]&160&&c!==(c=j[29]["@id"]+"")&&G(u,c),ae[0]&160&&g!==(g=j[7].i(j[29]["@id"])["rdfs:label"][0]+"")&&G(w,g),ae[0]&160&&S!==(S=j[32]["@id"]+"")&&G(D,S),ae[0]&160&&C!==(C=j[32]["@id"]+"")&&G(N,C),ae[0]&2&&G(O,j[1]),ae[0]&416&&(E=j[8].includes(j[32]["@id"])),E?Z?Z.p(j,ae):(Z=Gl(j),Z.c(),Z.m(I.parentNode,I)):Z&&(Z.d(1),Z=null),ae[0]&160&&P!==(P=j[29]["@id"]+"")&&G(F,P),ae[0]&160&&x!==(x=j[29]["@id"]+"")&&G(se,x),ae[0]&4&&G(H,j[2]),ae[0]&160&&U!==(U=j[32]["@id"]+"")&&G(J,U),ae[0]&160&&Q!==(Q=j[32]["@id"]+"")&&G(ke,Q),ae[0]&160&&ne!==(ne=j[29]["@id"]+"")&&G(_e,ne),ae[0]&168&&ce!==(ce=j[3](j[29])+"")&&G(Re,ce)},d(j){j&&(f(r),f(l),f(s),f(n),f(i),f(_),f(h),f(v),f(u),f(b),f(w),f(R),f(D),f(p),f(N),f(A),f(O),f(T),f(I),f(F),f(K),f(se),f(B),f(H),f(V),f(J),f(L),f(ke),f(Pe),f(_e),f(fe),f(Re),f($e)),Z&&Z.d(j)}}}function Jl(a){let e,r=Ce(a[32][a[26]["@id"]]),l=[];for(let t=0;t<r.length;t+=1)l[t]=Kl(Bl(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=be()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=be()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);m(t,e,s)},p(t,s){if(s[0]&430){r=Ce(t[32][t[26]["@id"]]);let n;for(n=0;n<r.length;n+=1){const o=Bl(t,r,n);l[n]?l[n].p(o,s):(l[n]=Kl(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&f(e),Ze(l,t)}}}function Yl(a){let e,r=a[32]["d3f:outbound"]&&Ql(a);return{c(){r&&r.c(),e=be()},l(l){r&&r.l(l),e=be()},m(l,t){r&&r.m(l,t),m(l,e,t)},p(l,t){l[32]["d3f:outbound"]?r?r.p(l,t):(r=Ql(l),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(l){l&&f(e),r&&r.d(l)}}}function Xl(a){let e,r=Ce(a[7].i(a[5].description["@id"])["d3f:outbound"]),l=[];for(let t=0;t<r.length;t+=1)l[t]=Wl($l(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=be()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=be()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);m(t,e,s)},p(t,s){if(s[0]&184){r=Ce(t[7].i(t[5].description["@id"])["d3f:outbound"]);let n;for(n=0;n<r.length;n+=1){const o=$l(t,r,n);l[n]?l[n].p(o,s):(l[n]=Wl(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&f(e),Ze(l,t)}}}function Zl(a){let e=a[5].description["@id"]+"",r,l,t=a[7].i(a[5].description["@id"])["rdfs:label"][0]+"",s,n,o="-->",i,_,d=ue(a[26]["@id"])+"",h,v,c=a[29]["@id"]+"",u,b,g=a[7].graph[a[7].index[a[29]["@id"]]]["rdfs:label"][0]+"",w,R,S=a[5].description["@id"]+"",D,p,C=a[29]["@id"]+"",N,A,O=a[5].description["@id"]+"",T,E,I=a[3](a[5].description["@id"])+"",P,F,K=a[29]["@id"]+"",x,se,B=a[4](a[29])+"",H,V;return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),i=k(o),_=k(" | "),h=k(d),v=k(" | "),u=k(c),b=k('["'),w=k(g),R=k('"]; class '),D=k(S),p=k(" RootArtifactNode; class "),N=k(C),A=k(` ArtifactNode;
              click `),T=k(O),E=k(' href "'),P=k(I),F=k('"; click '),x=k(K),se=k(' href "'),H=k(B),V=k('";')},l(U){r=y(U,e),l=y(U,'["'),s=y(U,t),n=y(U,'"] '),i=y(U,o),_=y(U," | "),h=y(U,d),v=y(U," | "),u=y(U,c),b=y(U,'["'),w=y(U,g),R=y(U,'"]; class '),D=y(U,S),p=y(U," RootArtifactNode; class "),N=y(U,C),A=y(U,` ArtifactNode;
              click `),T=y(U,O),E=y(U,' href "'),P=y(U,I),F=y(U,'"; click '),x=y(U,K),se=y(U,' href "'),H=y(U,B),V=y(U,'";')},m(U,J){m(U,r,J),m(U,l,J),m(U,s,J),m(U,n,J),m(U,i,J),m(U,_,J),m(U,h,J),m(U,v,J),m(U,u,J),m(U,b,J),m(U,w,J),m(U,R,J),m(U,D,J),m(U,p,J),m(U,N,J),m(U,A,J),m(U,T,J),m(U,E,J),m(U,P,J),m(U,F,J),m(U,x,J),m(U,se,J),m(U,H,J),m(U,V,J)},p(U,J){J[0]&32&&e!==(e=U[5].description["@id"]+"")&&G(r,e),J[0]&160&&t!==(t=U[7].i(U[5].description["@id"])["rdfs:label"][0]+"")&&G(s,t),J[0]&160&&d!==(d=ue(U[26]["@id"])+"")&&G(h,d),J[0]&160&&c!==(c=U[29]["@id"]+"")&&G(u,c),J[0]&160&&g!==(g=U[7].graph[U[7].index[U[29]["@id"]]]["rdfs:label"][0]+"")&&G(w,g),J[0]&32&&S!==(S=U[5].description["@id"]+"")&&G(D,S),J[0]&160&&C!==(C=U[29]["@id"]+"")&&G(N,C),J[0]&32&&O!==(O=U[5].description["@id"]+"")&&G(T,O),J[0]&40&&I!==(I=U[3](U[5].description["@id"])+"")&&G(P,I),J[0]&160&&K!==(K=U[29]["@id"]+"")&&G(x,K),J[0]&176&&B!==(B=U[4](U[29])+"")&&G(H,B)},d(U){U&&(f(r),f(l),f(s),f(n),f(i),f(_),f(h),f(v),f(u),f(b),f(w),f(R),f(D),f(p),f(N),f(A),f(T),f(E),f(P),f(F),f(x),f(se),f(H),f(V))}}}function Wl(a){let e,r=Ce(a[7].i(a[5].description["@id"])[a[26]["@id"]]),l=[];for(let t=0;t<r.length;t+=1)l[t]=Zl(Vl(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=be()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=be()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);m(t,e,s)},p(t,s){if(s[0]&184){r=Ce(t[7].i(t[5].description["@id"])[t[26]["@id"]]);let n;for(n=0;n<r.length;n+=1){const o=Vl(t,r,n);l[n]?l[n].p(o,s):(l[n]=Zl(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&f(e),Ze(l,t)}}}function Kf(a){let e,r,l=a[7].i(a[5].description["@id"])&&a[7].i(a[5].description["@id"])["d3f:outbound"],t,s=Ce(a[7].graph.filter(a[18])),n=[];for(let i=0;i<s.length;i+=1)n[i]=Yl(zl(a,s,i));let o=l&&Xl(a);return{c(){e=k(`graph LR;
        `);for(let i=0;i<n.length;i+=1)n[i].c();r=re(),o&&o.c(),t=be()},l(i){e=y(i,`graph LR;
        `);for(let _=0;_<n.length;_+=1)n[_].l(i);r=le(i),o&&o.l(i),t=be()},m(i,_){m(i,e,_);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(i,_);m(i,r,_),o&&o.m(i,_),m(i,t,_)},p(i,_){if(_[0]&430){s=Ce(i[7].graph.filter(i[18]));let d;for(d=0;d<s.length;d+=1){const h=zl(i,s,d);n[d]?n[d].p(h,_):(n[d]=Yl(h),n[d].c(),n[d].m(r.parentNode,r))}for(;d<n.length;d+=1)n[d].d(1);n.length=s.length}_[0]&160&&(l=i[7].i(i[5].description["@id"])&&i[7].i(i[5].description["@id"])["d3f:outbound"]),l?o?o.p(i,_):(o=Xl(i),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},d(i){i&&(f(e),f(r),f(t)),Ze(n,i),o&&o.d(i)}}}function Jf(a){let e,r,l,t,s,n,o,i,_,d,h,v,c,u=a[8].length+"",b,g,w,R,S;const D=a[16].header,p=tt(D,a,a[22],Hl),C=a[16].default,N=tt(C,a,a[22],null),A=[Gf,Qf,Hf],O=[];function T(E,I){return E[5]?E[7].graph.length>0?1:2:0}return o=T(a),i=O[o]=A[o](a),{c(){e=Y("dialog"),r=Y("div"),p&&p.c(),l=k(`
    Select Weaknesses
    `),N&&N.c(),t=re(),s=Y("hr"),n=re(),i.c(),_=re(),d=Y("hr"),h=re(),v=Y("button"),c=k("Insert ("),b=k(u),g=k(")"),this.h()},l(E){e=X(E,"DIALOG",{class:!0});var I=me(e);r=X(I,"DIV",{class:!0});var P=me(r);p&&p.l(P),l=y(P,`
    Select Weaknesses
    `),N&&N.l(P),t=le(P),s=X(P,"HR",{}),n=le(P),i.l(P),_=le(P),d=X(P,"HR",{}),h=le(P),v=X(P,"BUTTON",{class:!0});var F=me(v);c=y(F,"Insert ("),b=y(F,u),g=y(F,")"),F.forEach(f),P.forEach(f),I.forEach(f),this.h()},h(){v.autofocus=!0,te(v,"class","svelte-1resfch"),te(r,"class","svelte-1resfch"),te(e,"class","svelte-1resfch")},m(E,I){m(E,e,I),$(e,r),p&&p.m(r,null),$(r,l),N&&N.m(r,null),$(r,t),$(r,s),$(r,n),O[o].m(r,null),$(r,_),$(r,d),$(r,h),$(r,v),$(v,c),$(v,b),$(v,g),a[19](e),w=!0,v.focus(),R||(S=[pe(v,"click",a[11]),pe(r,"click",kt(a[17])),pe(e,"close",a[20]),pe(e,"click",At(a[21]))],R=!0)},p(E,I){p&&p.p&&(!w||I[0]&4194304)&&rt(p,D,E,E[22],w?at(D,E[22],I,Bf):lt(E[22]),Hl),N&&N.p&&(!w||I[0]&4194304)&&rt(N,C,E,E[22],w?at(C,E[22],I,null):lt(E[22]),null);let P=o;o=T(E),o===P?O[o].p(E,I):(ct(),de(O[P],1,1,()=>{O[P]=null}),dt(),i=O[o],i?i.p(E,I):(i=O[o]=A[o](E),i.c()),ie(i,1),i.m(r,_)),(!w||I[0]&256)&&u!==(u=E[8].length+"")&&G(b,u)},i(E){w||(ie(p,E),ie(N,E),ie(i),w=!0)},o(E){de(p,E),de(N,E),de(i),w=!1},d(E){E&&f(e),p&&p.d(E),N&&N.d(E),O[o].d(),a[19](null),R=!1,_t(S)}}}function Yf(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{outbound_color:i="#fff4dd"}=e,{inbound_color:_="#fff4dd"}=e,{root_color:d="#fff4dd"}=e,{link_function:h=P=>`/dao/artifact/${P["@id"]}`}=e,{inbound_link_function:v=h}=e,{root_link_function:c=P=>`/dao/artifact/${P["@id"]}`}=e,{outbound_link_function:u=h}=e,{show_weakness_modal:b}=e,{parent_node:g}=e,{data:w}=e,R;const S=Ot();Ke(a,S,P=>r(24,s=P));const D=It();Ke(a,D,P=>r(23,t=P));let p;function C(P){l.includes(P)?r(8,l=l.filter(F=>F!==P)):l.push(P),r(8,l),r(8,l)}window.da_to_weak_callback=function(P){C(P)};function N(){let P=0,F=200,K=100;for(const x of l){let se=w.da_to_weak["@graph"].find(B=>B["@id"]==x);se&&(jt(S,D,g,"vulnerabilitySelectorNode",se["rdfs:label"],se["d3f:cwe-id"],g.data.sequence,g.position.x+P*F,g.position.y+K,182,63,se["d3f:outbound"][0]["@id"].replace("d3f:",""),!1),P+=1)}S.set(s),D.set(t),R&&R.close(),r(8,l=[])}function A(P){yt.call(this,a,P)}const O=P=>P["@id"]!=w.description["@id"];function T(P){Ge[P?"unshift":"push"](()=>{R=P,r(6,R)})}const E=()=>r(0,b=!1),I=()=>{R.close(),r(8,l=[])};return a.$$set=P=>{"outbound_color"in P&&r(12,i=P.outbound_color),"inbound_color"in P&&r(1,_=P.inbound_color),"root_color"in P&&r(2,d=P.root_color),"link_function"in P&&r(13,h=P.link_function),"inbound_link_function"in P&&r(14,v=P.inbound_link_function),"root_link_function"in P&&r(3,c=P.root_link_function),"outbound_link_function"in P&&r(4,u=P.outbound_link_function),"show_weakness_modal"in P&&r(0,b=P.show_weakness_modal),"parent_node"in P&&r(15,g=P.parent_node),"data"in P&&r(5,w=P.data),"$$scope"in P&&r(22,o=P.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&65&&b&&R&&R.showModal(),a.$$.dirty[0]&65&&!b&&R&&R.close(),a.$$.dirty[0]&32&&w&&r(7,p=new ir(w.da_to_weak,{index:!0}))},r(8,l=[]),[b,_,d,c,u,w,R,p,l,S,D,N,i,h,v,g,n,A,O,T,E,I,o]}class Xf extends nt{constructor(e){super(),ot(this,e,Yf,Jf,xe,{outbound_color:12,inbound_color:1,root_color:2,link_function:13,inbound_link_function:14,root_link_function:3,outbound_link_function:4,show_weakness_modal:0,parent_node:15,data:5},null,[-1,-1])}}function xl(a,e,r){const l=a.slice();return l[31]=e[r],l}function ea(a,e,r){const l=a.slice();return l[34]=e[r],l}function ta(a,e,r){const l=a.slice();return l[37]=e[r],l}const Zf=a=>({}),ra=a=>({});function Wf(a){let e;return{c(){e=k("No related parts/control in this release")},l(r){e=y(r,"No related parts/control in this release")},m(r,l){m(r,e,l)},p:we,i:we,o:we,d(r){r&&f(e)}}}function xf(a){let e,r;return e=new Lt({props:{$$slots:{default:[tu]},$$scope:{ctx:a}}}),{c(){Oe(e.$$.fragment)},l(l){Ie(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t[0]&134217934&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(ie(e.$$.fragment,l),r=!0)},o(l){de(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function eu(a){let e,r="Loading...";return{c(){e=Y("div"),e.textContent=r},l(l){e=X(l,"DIV",{"data-svelte-h":!0}),Ne(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){m(l,e,t)},p:we,i:we,o:we,d(l){l&&f(e)}}}function la(a){let e,r=Ce(a[31]["d3f:outbound"].filter(a[23])),l=[];for(let t=0;t<r.length;t+=1)l[t]=ua(ea(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=be()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=be()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);m(t,e,s)},p(t,s){if(s[0]&206){r=Ce(t[31]["d3f:outbound"].filter(t[23]));let n;for(n=0;n<r.length;n+=1){const o=ea(t,r,n);l[n]?l[n].p(o,s):(l[n]=ua(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&f(e),Ze(l,t)}}}function aa(a){let e,r,l=a[31]["@id"]!=a[2].data.d3f_class&&sa(a),t=a[37]["@id"]!=a[2].data.d3f_class&&na(a);return{c(){l&&l.c(),e=re(),t&&t.c(),r=be()},l(s){l&&l.l(s),e=le(s),t&&t.l(s),r=be()},m(s,n){l&&l.m(s,n),m(s,e,n),t&&t.m(s,n),m(s,r,n)},p(s,n){s[31]["@id"]!=s[2].data.d3f_class?l?l.p(s,n):(l=sa(s),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),s[37]["@id"]!=s[2].data.d3f_class?t?t.p(s,n):(t=na(s),t.c(),t.m(r.parentNode,r)):t&&(t.d(1),t=null)},d(s){s&&(f(e),f(r)),l&&l.d(s),t&&t.d(s)}}}function sa(a){let e,r=a[31]["@id"]+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" selected_outbound_node;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," selected_outbound_node;")},m(s,n){m(s,e,n),m(s,l,n),m(s,t,n)},p(s,n){n[0]&72&&r!==(r=s[31]["@id"]+"")&&G(l,r)},d(s){s&&(f(e),f(l),f(t))}}}function na(a){let e,r=a[37]["@id"]+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" selected_outbound_node;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," selected_outbound_node;")},m(s,n){m(s,e,n),m(s,l,n),m(s,t,n)},p(s,n){n[0]&74&&r!==(r=s[37]["@id"]+"")&&G(l,r)},d(s){s&&(f(e),f(l),f(t))}}}function oa(a){let e,r=a[31]["@id"]+"",l,t,s=a[31]["@id"]+"",n,o,i=ue(a[34]["@id"])+"",_,d,h=a[37]["@id"]+"",v,c;return{c(){e=k("click "),l=k(r),t=k(` href "javascript:da_to_neighbors_callback('`),n=k(s),o=k("', '"),_=k(i),d=k("','"),v=k(h),c=k(`')";`)},l(u){e=y(u,"click "),l=y(u,r),t=y(u,` href "javascript:da_to_neighbors_callback('`),n=y(u,s),o=y(u,"', '"),_=y(u,i),d=y(u,"','"),v=y(u,h),c=y(u,`')";`)},m(u,b){m(u,e,b),m(u,l,b),m(u,t,b),m(u,n,b),m(u,o,b),m(u,_,b),m(u,d,b),m(u,v,b),m(u,c,b)},p(u,b){b[0]&72&&r!==(r=u[31]["@id"]+"")&&G(l,r),b[0]&72&&s!==(s=u[31]["@id"]+"")&&G(n,s),b[0]&74&&i!==(i=ue(u[34]["@id"])+"")&&G(_,i),b[0]&74&&h!==(h=u[37]["@id"]+"")&&G(v,h)},d(u){u&&(f(e),f(l),f(t),f(n),f(o),f(_),f(d),f(v),f(c))}}}function ia(a){let e,r=a[37]["@id"]+"",l,t,s=a[31]["@id"]+"",n,o,i=ue(a[34]["@id"])+"",_,d,h=a[37]["@id"]+"",v,c;return{c(){e=k("click "),l=k(r),t=k(` href "javascript:da_to_neighbors_callback('`),n=k(s),o=k("', '"),_=k(i),d=k("','"),v=k(h),c=k(`')";`)},l(u){e=y(u,"click "),l=y(u,r),t=y(u,` href "javascript:da_to_neighbors_callback('`),n=y(u,s),o=y(u,"', '"),_=y(u,i),d=y(u,"','"),v=y(u,h),c=y(u,`')";`)},m(u,b){m(u,e,b),m(u,l,b),m(u,t,b),m(u,n,b),m(u,o,b),m(u,_,b),m(u,d,b),m(u,v,b),m(u,c,b)},p(u,b){b[0]&74&&r!==(r=u[37]["@id"]+"")&&G(l,r),b[0]&72&&s!==(s=u[31]["@id"]+"")&&G(n,s),b[0]&74&&i!==(i=ue(u[34]["@id"])+"")&&G(_,i),b[0]&74&&h!==(h=u[37]["@id"]+"")&&G(v,h)},d(u){u&&(f(e),f(l),f(t),f(n),f(o),f(_),f(d),f(v),f(c))}}}function fa(a){let e=a[31]["@id"]+"",r,l,t=a[31]["rdfs:label"][0]+"",s,n,o="-->",i,_,d=ue(a[34]["@id"])+"",h,v,c=a[37]["@id"]+"",u,b,g=a[6].i(a[37]["@id"])["rdfs:label"][0]+"",w,R,S=a[37]["@id"]+"",D,p,C=a[7].some(T),N,A,O;function T(...F){return a[21](a[31],a[34],a[37],...F)}let E=C&&aa(a),I=a[31]["@id"]!=a[2].data.d3f_class&&oa(a),P=a[37]["@id"]!=a[2].data.d3f_class&&ia(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),i=k(o),_=k(" | "),h=k(d),v=k(" | "),u=k(c),b=k('["'),w=k(g),R=k(`"];
                class `),D=k(S),p=k(` outbound;
                `),E&&E.c(),N=re(),I&&I.c(),A=re(),P&&P.c(),O=be()},l(F){r=y(F,e),l=y(F,'["'),s=y(F,t),n=y(F,'"] '),i=y(F,o),_=y(F," | "),h=y(F,d),v=y(F," | "),u=y(F,c),b=y(F,'["'),w=y(F,g),R=y(F,`"];
                class `),D=y(F,S),p=y(F,` outbound;
                `),E&&E.l(F),N=le(F),I&&I.l(F),A=le(F),P&&P.l(F),O=be()},m(F,K){m(F,r,K),m(F,l,K),m(F,s,K),m(F,n,K),m(F,i,K),m(F,_,K),m(F,h,K),m(F,v,K),m(F,u,K),m(F,b,K),m(F,w,K),m(F,R,K),m(F,D,K),m(F,p,K),E&&E.m(F,K),m(F,N,K),I&&I.m(F,K),m(F,A,K),P&&P.m(F,K),m(F,O,K)},p(F,K){a=F,K[0]&72&&e!==(e=a[31]["@id"]+"")&&G(r,e),K[0]&72&&t!==(t=a[31]["rdfs:label"][0]+"")&&G(s,t),K[0]&74&&d!==(d=ue(a[34]["@id"])+"")&&G(h,d),K[0]&74&&c!==(c=a[37]["@id"]+"")&&G(u,c),K[0]&74&&g!==(g=a[6].i(a[37]["@id"])["rdfs:label"][0]+"")&&G(w,g),K[0]&74&&S!==(S=a[37]["@id"]+"")&&G(D,S),K[0]&202&&(C=a[7].some(T)),C?E?E.p(a,K):(E=aa(a),E.c(),E.m(N.parentNode,N)):E&&(E.d(1),E=null),a[31]["@id"]!=a[2].data.d3f_class?I?I.p(a,K):(I=oa(a),I.c(),I.m(A.parentNode,A)):I&&(I.d(1),I=null),a[37]["@id"]!=a[2].data.d3f_class?P?P.p(a,K):(P=ia(a),P.c(),P.m(O.parentNode,O)):P&&(P.d(1),P=null)},d(F){F&&(f(r),f(l),f(s),f(n),f(i),f(_),f(h),f(v),f(u),f(b),f(w),f(R),f(D),f(p),f(N),f(A),f(O)),E&&E.d(F),I&&I.d(F),P&&P.d(F)}}}function ua(a){let e,r=Ce(a[31][a[34]["@id"]]),l=[];for(let t=0;t<r.length;t+=1)l[t]=fa(ta(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=be()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=be()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);m(t,e,s)},p(t,s){if(s[0]&206){r=Ce(t[31][t[34]["@id"]]);let n;for(n=0;n<r.length;n+=1){const o=ta(t,r,n);l[n]?l[n].p(o,s):(l[n]=fa(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&f(e),Ze(l,t)}}}function ca(a){let e,r=a[31]["d3f:outbound"]&&la(a);return{c(){r&&r.c(),e=be()},l(l){r&&r.l(l),e=be()},m(l,t){r&&r.m(l,t),m(l,e,t)},p(l,t){l[31]["d3f:outbound"]?r?r.p(l,t):(r=la(l),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(l){l&&f(e),r&&r.d(l)}}}function tu(a){let e,r,l=Ce(a[6].graph.filter(a[22])),t=[];for(let s=0;s<l.length;s+=1)t[s]=ca(xl(a,l,s));return{c(){e=k(`graph LR;
        `);for(let s=0;s<t.length;s+=1)t[s].c();r=be()},l(s){e=y(s,`graph LR;
        `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=be()},m(s,n){m(s,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,n);m(s,r,n)},p(s,n){if(n[0]&206){l=Ce(s[6].graph.filter(s[22]));let o;for(o=0;o<l.length;o+=1){const i=xl(s,l,o);t[o]?t[o].p(i,n):(t[o]=ca(i),t[o].c(),t[o].m(r.parentNode,r))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(s){s&&(f(e),f(r)),Ze(t,s)}}}function ru(a){let e,r,l,t,s,n,o,i,_,d,h,v,c,u=a[7].length+"",b,g,w,R,S;const D=a[19].header,p=tt(D,a,a[27],ra),C=a[19].default,N=tt(C,a,a[27],null),A=[eu,xf,Wf],O=[];function T(E,I){return E[3]?E[5]&&E[6].graph.length>0?1:2:0}return o=T(a),i=O[o]=A[o](a),{c(){e=Y("dialog"),r=Y("div"),p&&p.c(),l=k(`
    Select Parts/Control Neighbors
    `),N&&N.c(),t=re(),s=Y("hr"),n=re(),i.c(),_=re(),d=Y("hr"),h=re(),v=Y("button"),c=k("Insert ("),b=k(u),g=k(")"),this.h()},l(E){e=X(E,"DIALOG",{class:!0});var I=me(e);r=X(I,"DIV",{class:!0});var P=me(r);p&&p.l(P),l=y(P,`
    Select Parts/Control Neighbors
    `),N&&N.l(P),t=le(P),s=X(P,"HR",{}),n=le(P),i.l(P),_=le(P),d=X(P,"HR",{}),h=le(P),v=X(P,"BUTTON",{class:!0});var F=me(v);c=y(F,"Insert ("),b=y(F,u),g=y(F,")"),F.forEach(f),P.forEach(f),I.forEach(f),this.h()},h(){v.autofocus=!0,te(v,"class","svelte-x2no78"),te(r,"class","svelte-x2no78"),te(e,"class","svelte-x2no78")},m(E,I){m(E,e,I),$(e,r),p&&p.m(r,null),$(r,l),N&&N.m(r,null),$(r,t),$(r,s),$(r,n),O[o].m(r,null),$(r,_),$(r,d),$(r,h),$(r,v),$(v,c),$(v,b),$(v,g),a[24](e),w=!0,v.focus(),R||(S=[pe(v,"click",a[10]),pe(r,"click",kt(a[20])),pe(e,"close",a[25]),pe(e,"click",At(a[26]))],R=!0)},p(E,I){p&&p.p&&(!w||I[0]&134217728)&&rt(p,D,E,E[27],w?at(D,E[27],I,Zf):lt(E[27]),ra),N&&N.p&&(!w||I[0]&134217728)&&rt(N,C,E,E[27],w?at(C,E[27],I,null):lt(E[27]),null);let P=o;o=T(E),o===P?O[o].p(E,I):(ct(),de(O[P],1,1,()=>{O[P]=null}),dt(),i=O[o],i?i.p(E,I):(i=O[o]=A[o](E),i.c()),ie(i,1),i.m(r,_)),(!w||I[0]&128)&&u!==(u=E[7].length+"")&&G(b,u)},i(E){w||(ie(p,E),ie(N,E),ie(i),w=!0)},o(E){de(p,E),de(N,E),de(i),w=!1},d(E){E&&f(e),p&&p.d(E),N&&N.d(E),O[o].d(),a[24](null),R=!1,_t(S)}}}function lu(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{empty_message:i="has no direct neighbors in this release."}=e,{outbound_color:_="#fff4dd"}=e,{inbound_color:d="#fff4dd"}=e,{root_color:h="#fff4dd"}=e,{link_function:v=B=>`/dao/artifact/${B["@id"]}`}=e,{inbound_link_function:c=v}=e,{root_link_function:u=B=>`/dao/artifact/${B["@id"]}`}=e,{outbound_link_function:b=v}=e,{show_neighbors_modal:g}=e,{neighbor_filter_labels:w}=e,{parent_node:R}=e,{data:S}=e,D,p=!1;const C=Ot();Ke(a,C,B=>r(29,s=B));const N=It();Ke(a,N,B=>r(28,t=B));let A;function O(B){l.some(H=>H.source==B.source&&H.relation==B.relation&&H.target==B.target)?r(7,l=l.filter(H=>H.source!=B.source||H.relation!=B.relation||H.target!=B.target)):l.push(B),r(7,l),r(7,l)}window.da_to_neighbors_callback=function(B,H,V){O({source:B,relation:H,target:V})};function T(){let B=0,H=0,V=200,U=125;for(const J of l){let L=S.neighbors["@graph"].find(ke=>ke["@id"]==J.source),Q=S.neighbors["@graph"].find(ke=>ke["@id"]==J.target);if(L&&Q){let ke=R.data.d3f_class==L["@id"],Pe=ke?Q:L;jt(C,N,R,"artifactSelectorNode",Pe["rdfs:label"][0],Pe["@id"],R.data.sequence,R.position.x+(ke?B:H)*V,ke?R.position.y+U:R.position.y-U,182,63,J.relation,ke),ke?B+=1:H+=1}}C.set(s),N.set(t),D&&(D.close(),r(5,p=!1)),r(7,l=[])}function E(B){yt.call(this,a,B)}const I=(B,H,V,U)=>U.source==B["@id"]&&U.relation==ue(H["@id"])&&U.target==V["@id"],P=B=>B["@id"]!=S.description["@id"],F=B=>w.length==0||w.includes(B["@id"]);function K(B){Ge[B?"unshift":"push"](()=>{D=B,r(4,D)})}const x=()=>r(0,g=!1),se=()=>{D.close(),r(7,l=[])};return a.$$set=B=>{"empty_message"in B&&r(11,i=B.empty_message),"outbound_color"in B&&r(12,_=B.outbound_color),"inbound_color"in B&&r(13,d=B.inbound_color),"root_color"in B&&r(14,h=B.root_color),"link_function"in B&&r(15,v=B.link_function),"inbound_link_function"in B&&r(16,c=B.inbound_link_function),"root_link_function"in B&&r(17,u=B.root_link_function),"outbound_link_function"in B&&r(18,b=B.outbound_link_function),"show_neighbors_modal"in B&&r(0,g=B.show_neighbors_modal),"neighbor_filter_labels"in B&&r(1,w=B.neighbor_filter_labels),"parent_node"in B&&r(2,R=B.parent_node),"data"in B&&r(3,S=B.data),"$$scope"in B&&r(27,o=B.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&17&&g&&D&&D.showModal(),a.$$.dirty[0]&17&&!g&&D&&D.close(),a.$$.dirty[0]&14&&S&&(r(5,p=!1),S.neighbors["@graph"].find(B=>B["@id"]==R.data.d3f_class),w.length==0?(r(5,p=!0),r(6,A=new ir(S.neighbors,{index:!0}))):S.neighbors["@graph"].some(B=>B["d3f:outbound"]&&w.some(H=>B["d3f:outbound"].some(V=>V["@id"]==H)))&&(r(5,p=!0),r(6,A=new ir(S.neighbors,{index:!0}))))},r(7,l=[]),[g,w,R,S,D,p,A,l,C,N,T,i,_,d,h,v,c,u,b,n,E,I,P,F,K,x,se,o]}class au extends nt{constructor(e){super(),ot(this,e,lu,ru,xe,{empty_message:11,outbound_color:12,inbound_color:13,root_color:14,link_function:15,inbound_link_function:16,root_link_function:17,outbound_link_function:18,show_neighbors_modal:0,neighbor_filter_labels:1,parent_node:2,data:3},null,[-1,-1])}}function da(a,e,r){const l=a.slice();return l[26]=e[r],l}function ha(a,e,r){const l=a.slice();return l[29]=e[r],l}function _a(a,e,r){const l=a.slice();return l[32]=e[r],l}function va(a,e,r){const l=a.slice();return l[26]=e[r],l}function ma(a,e,r){const l=a.slice();return l[29]=e[r],l}const su=a=>({}),pa=a=>({});function nu(a){let e;return{c(){e=k("No related sensors in this release.")},l(r){e=y(r,"No related sensors in this release.")},m(r,l){m(r,e,l)},p:we,i:we,o:we,d(r){r&&f(e)}}}function ou(a){let e,r;return e=new Lt({props:{$$slots:{default:[fu]},$$scope:{ctx:a}}}),{c(){Oe(e.$$.fragment)},l(l){Ie(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t[0]&4194750&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(ie(e.$$.fragment,l),r=!0)},o(l){de(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function iu(a){let e,r="Loading...";return{c(){e=Y("div"),e.textContent=r},l(l){e=X(l,"DIV",{"data-svelte-h":!0}),Ne(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){m(l,e,t)},p:we,i:we,o:we,d(l){l&&f(e)}}}function ga(a){let e,r=Ce(a[32]["d3f:outbound"]),l=[];for(let t=0;t<r.length;t+=1)l[t]=Pa(va(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=be()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=be()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);m(t,e,s)},p(t,s){if(s[0]&430){r=Ce(t[32]["d3f:outbound"]);let n;for(n=0;n<r.length;n+=1){const o=va(t,r,n);l[n]?l[n].p(o,s):(l[n]=Pa(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&f(e),Ze(l,t)}}}function ba(a){let e,r=a[32]["@id"]+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" selected_inbound_node;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," selected_inbound_node;")},m(s,n){m(s,e,n),m(s,l,n),m(s,t,n)},p(s,n){n[0]&160&&r!==(r=s[32]["@id"]+"")&&G(l,r)},d(s){s&&(f(e),f(l),f(t))}}}function Ea(a){let e=a[32]["@id"]+"",r,l,t=a[32]["rdfs:label"][0]+"",s,n,o="-->",i,_,d=ue(a[26]["@id"])+"",h,v,c=a[29]["@id"]+"",u,b,g=a[7].i(a[29]["@id"])["rdfs:label"][0]+"",w,R,S=a[32]["@id"]+"",D,p,C=a[32]["@id"]+"",N,A,O,T,E=a[8].includes(a[32]["@id"]),I,P=a[29]["@id"]+"",F,K,x=a[29]["@id"]+"",se,B,H,V,U=a[32]["@id"]+"",J,L,Q=a[32]["@id"]+"",ke,Pe,ne=a[29]["@id"]+"",_e,fe,ce=a[3](a[29])+"",Re,$e,Z=E&&ba(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),i=k(o),_=k(" | "),h=k(d),v=k(" | "),u=k(c),b=k('["'),w=k(g),R=k(`"];
                  class `),D=k(S),p=k(" inbound_node; style "),N=k(C),A=k(" fill:"),O=k(a[1]),T=k(`;
                  `),Z&&Z.c(),I=k(`
                  class `),F=k(P),K=k(" RootArtifactNode; style "),se=k(x),B=k(" fill:"),H=k(a[2]),V=k(`;
                  click `),J=k(U),L=k(` href "javascript:da_to_sensor_callback('`),ke=k(Q),Pe=k(`')"; click `),_e=k(ne),fe=k(' href "'),Re=k(ce),$e=k('";')},l(j){r=y(j,e),l=y(j,'["'),s=y(j,t),n=y(j,'"] '),i=y(j,o),_=y(j," | "),h=y(j,d),v=y(j," | "),u=y(j,c),b=y(j,'["'),w=y(j,g),R=y(j,`"];
                  class `),D=y(j,S),p=y(j," inbound_node; style "),N=y(j,C),A=y(j," fill:"),O=y(j,a[1]),T=y(j,`;
                  `),Z&&Z.l(j),I=y(j,`
                  class `),F=y(j,P),K=y(j," RootArtifactNode; style "),se=y(j,x),B=y(j," fill:"),H=y(j,a[2]),V=y(j,`;
                  click `),J=y(j,U),L=y(j,` href "javascript:da_to_sensor_callback('`),ke=y(j,Q),Pe=y(j,`')"; click `),_e=y(j,ne),fe=y(j,' href "'),Re=y(j,ce),$e=y(j,'";')},m(j,ae){m(j,r,ae),m(j,l,ae),m(j,s,ae),m(j,n,ae),m(j,i,ae),m(j,_,ae),m(j,h,ae),m(j,v,ae),m(j,u,ae),m(j,b,ae),m(j,w,ae),m(j,R,ae),m(j,D,ae),m(j,p,ae),m(j,N,ae),m(j,A,ae),m(j,O,ae),m(j,T,ae),Z&&Z.m(j,ae),m(j,I,ae),m(j,F,ae),m(j,K,ae),m(j,se,ae),m(j,B,ae),m(j,H,ae),m(j,V,ae),m(j,J,ae),m(j,L,ae),m(j,ke,ae),m(j,Pe,ae),m(j,_e,ae),m(j,fe,ae),m(j,Re,ae),m(j,$e,ae)},p(j,ae){ae[0]&160&&e!==(e=j[32]["@id"]+"")&&G(r,e),ae[0]&160&&t!==(t=j[32]["rdfs:label"][0]+"")&&G(s,t),ae[0]&160&&d!==(d=ue(j[26]["@id"])+"")&&G(h,d),ae[0]&160&&c!==(c=j[29]["@id"]+"")&&G(u,c),ae[0]&160&&g!==(g=j[7].i(j[29]["@id"])["rdfs:label"][0]+"")&&G(w,g),ae[0]&160&&S!==(S=j[32]["@id"]+"")&&G(D,S),ae[0]&160&&C!==(C=j[32]["@id"]+"")&&G(N,C),ae[0]&2&&G(O,j[1]),ae[0]&416&&(E=j[8].includes(j[32]["@id"])),E?Z?Z.p(j,ae):(Z=ba(j),Z.c(),Z.m(I.parentNode,I)):Z&&(Z.d(1),Z=null),ae[0]&160&&P!==(P=j[29]["@id"]+"")&&G(F,P),ae[0]&160&&x!==(x=j[29]["@id"]+"")&&G(se,x),ae[0]&4&&G(H,j[2]),ae[0]&160&&U!==(U=j[32]["@id"]+"")&&G(J,U),ae[0]&160&&Q!==(Q=j[32]["@id"]+"")&&G(ke,Q),ae[0]&160&&ne!==(ne=j[29]["@id"]+"")&&G(_e,ne),ae[0]&168&&ce!==(ce=j[3](j[29])+"")&&G(Re,ce)},d(j){j&&(f(r),f(l),f(s),f(n),f(i),f(_),f(h),f(v),f(u),f(b),f(w),f(R),f(D),f(p),f(N),f(A),f(O),f(T),f(I),f(F),f(K),f(se),f(B),f(H),f(V),f(J),f(L),f(ke),f(Pe),f(_e),f(fe),f(Re),f($e)),Z&&Z.d(j)}}}function Pa(a){let e,r=Ce(a[32][a[26]["@id"]]),l=[];for(let t=0;t<r.length;t+=1)l[t]=Ea(ma(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=be()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=be()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);m(t,e,s)},p(t,s){if(s[0]&430){r=Ce(t[32][t[26]["@id"]]);let n;for(n=0;n<r.length;n+=1){const o=ma(t,r,n);l[n]?l[n].p(o,s):(l[n]=Ea(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&f(e),Ze(l,t)}}}function wa(a){let e,r=a[32]["d3f:outbound"]&&ga(a);return{c(){r&&r.c(),e=be()},l(l){r&&r.l(l),e=be()},m(l,t){r&&r.m(l,t),m(l,e,t)},p(l,t){l[32]["d3f:outbound"]?r?r.p(l,t):(r=ga(l),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(l){l&&f(e),r&&r.d(l)}}}function ka(a){let e,r=Ce(a[7].i(a[5].description["@id"])["d3f:outbound"]),l=[];for(let t=0;t<r.length;t+=1)l[t]=Sa(da(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=be()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=be()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);m(t,e,s)},p(t,s){if(s[0]&184){r=Ce(t[7].i(t[5].description["@id"])["d3f:outbound"]);let n;for(n=0;n<r.length;n+=1){const o=da(t,r,n);l[n]?l[n].p(o,s):(l[n]=Sa(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&f(e),Ze(l,t)}}}function ya(a){let e=a[5].description["@id"]+"",r,l,t=a[7].i(a[5].description["@id"])["rdfs:label"][0]+"",s,n,o="-->",i,_,d=ue(a[26]["@id"])+"",h,v,c=a[29]["@id"]+"",u,b,g=a[7].graph[a[7].index[a[29]["@id"]]]["rdfs:label"][0]+"",w,R,S=a[5].description["@id"]+"",D,p,C=a[29]["@id"]+"",N,A,O=a[5].description["@id"]+"",T,E,I=a[3](a[5].description["@id"])+"",P,F,K=a[29]["@id"]+"",x,se,B=a[4](a[29])+"",H,V;return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),i=k(o),_=k(" | "),h=k(d),v=k(" | "),u=k(c),b=k('["'),w=k(g),R=k('"]; class '),D=k(S),p=k(" RootArtifactNode; class "),N=k(C),A=k(` ArtifactNode;
                click `),T=k(O),E=k(' href "'),P=k(I),F=k('"; click '),x=k(K),se=k(' href "'),H=k(B),V=k('";')},l(U){r=y(U,e),l=y(U,'["'),s=y(U,t),n=y(U,'"] '),i=y(U,o),_=y(U," | "),h=y(U,d),v=y(U," | "),u=y(U,c),b=y(U,'["'),w=y(U,g),R=y(U,'"]; class '),D=y(U,S),p=y(U," RootArtifactNode; class "),N=y(U,C),A=y(U,` ArtifactNode;
                click `),T=y(U,O),E=y(U,' href "'),P=y(U,I),F=y(U,'"; click '),x=y(U,K),se=y(U,' href "'),H=y(U,B),V=y(U,'";')},m(U,J){m(U,r,J),m(U,l,J),m(U,s,J),m(U,n,J),m(U,i,J),m(U,_,J),m(U,h,J),m(U,v,J),m(U,u,J),m(U,b,J),m(U,w,J),m(U,R,J),m(U,D,J),m(U,p,J),m(U,N,J),m(U,A,J),m(U,T,J),m(U,E,J),m(U,P,J),m(U,F,J),m(U,x,J),m(U,se,J),m(U,H,J),m(U,V,J)},p(U,J){J[0]&32&&e!==(e=U[5].description["@id"]+"")&&G(r,e),J[0]&160&&t!==(t=U[7].i(U[5].description["@id"])["rdfs:label"][0]+"")&&G(s,t),J[0]&160&&d!==(d=ue(U[26]["@id"])+"")&&G(h,d),J[0]&160&&c!==(c=U[29]["@id"]+"")&&G(u,c),J[0]&160&&g!==(g=U[7].graph[U[7].index[U[29]["@id"]]]["rdfs:label"][0]+"")&&G(w,g),J[0]&32&&S!==(S=U[5].description["@id"]+"")&&G(D,S),J[0]&160&&C!==(C=U[29]["@id"]+"")&&G(N,C),J[0]&32&&O!==(O=U[5].description["@id"]+"")&&G(T,O),J[0]&40&&I!==(I=U[3](U[5].description["@id"])+"")&&G(P,I),J[0]&160&&K!==(K=U[29]["@id"]+"")&&G(x,K),J[0]&176&&B!==(B=U[4](U[29])+"")&&G(H,B)},d(U){U&&(f(r),f(l),f(s),f(n),f(i),f(_),f(h),f(v),f(u),f(b),f(w),f(R),f(D),f(p),f(N),f(A),f(T),f(E),f(P),f(F),f(x),f(se),f(H),f(V))}}}function Sa(a){let e,r=Ce(a[7].i(a[5].description["@id"])[a[26]["@id"]]),l=[];for(let t=0;t<r.length;t+=1)l[t]=ya(ha(a,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=be()},l(t){for(let s=0;s<l.length;s+=1)l[s].l(t);e=be()},m(t,s){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,s);m(t,e,s)},p(t,s){if(s[0]&184){r=Ce(t[7].i(t[5].description["@id"])[t[26]["@id"]]);let n;for(n=0;n<r.length;n+=1){const o=ha(t,r,n);l[n]?l[n].p(o,s):(l[n]=ya(o),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&f(e),Ze(l,t)}}}function fu(a){let e,r,l=a[7].i(a[5].description["@id"])&&a[7].i(a[5].description["@id"])["d3f:outbound"],t,s=Ce(a[7].graph.filter(a[18])),n=[];for(let i=0;i<s.length;i+=1)n[i]=wa(_a(a,s,i));let o=l&&ka(a);return{c(){e=k(`graph LR;
          `);for(let i=0;i<n.length;i+=1)n[i].c();r=re(),o&&o.c(),t=be()},l(i){e=y(i,`graph LR;
          `);for(let _=0;_<n.length;_+=1)n[_].l(i);r=le(i),o&&o.l(i),t=be()},m(i,_){m(i,e,_);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(i,_);m(i,r,_),o&&o.m(i,_),m(i,t,_)},p(i,_){if(_[0]&430){s=Ce(i[7].graph.filter(i[18]));let d;for(d=0;d<s.length;d+=1){const h=_a(i,s,d);n[d]?n[d].p(h,_):(n[d]=wa(h),n[d].c(),n[d].m(r.parentNode,r))}for(;d<n.length;d+=1)n[d].d(1);n.length=s.length}_[0]&160&&(l=i[7].i(i[5].description["@id"])&&i[7].i(i[5].description["@id"])["d3f:outbound"]),l?o?o.p(i,_):(o=ka(i),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},d(i){i&&(f(e),f(r),f(t)),Ze(n,i),o&&o.d(i)}}}function uu(a){let e,r,l,t,s,n,o,i,_,d,h,v,c,u=a[8].length+"",b,g,w,R,S;const D=a[16].header,p=tt(D,a,a[22],pa),C=a[16].default,N=tt(C,a,a[22],null),A=[iu,ou,nu],O=[];function T(E,I){return E[5]?E[7].graph.length>0?1:2:0}return o=T(a),i=O[o]=A[o](a),{c(){e=Y("dialog"),r=Y("div"),p&&p.c(),l=k(`
      Select Sensors
      `),N&&N.c(),t=re(),s=Y("hr"),n=re(),i.c(),_=re(),d=Y("hr"),h=re(),v=Y("button"),c=k("Insert ("),b=k(u),g=k(")"),this.h()},l(E){e=X(E,"DIALOG",{class:!0});var I=me(e);r=X(I,"DIV",{class:!0});var P=me(r);p&&p.l(P),l=y(P,`
      Select Sensors
      `),N&&N.l(P),t=le(P),s=X(P,"HR",{}),n=le(P),i.l(P),_=le(P),d=X(P,"HR",{}),h=le(P),v=X(P,"BUTTON",{class:!0});var F=me(v);c=y(F,"Insert ("),b=y(F,u),g=y(F,")"),F.forEach(f),P.forEach(f),I.forEach(f),this.h()},h(){v.autofocus=!0,te(v,"class","svelte-akhii9"),te(r,"class","svelte-akhii9"),te(e,"class","svelte-akhii9")},m(E,I){m(E,e,I),$(e,r),p&&p.m(r,null),$(r,l),N&&N.m(r,null),$(r,t),$(r,s),$(r,n),O[o].m(r,null),$(r,_),$(r,d),$(r,h),$(r,v),$(v,c),$(v,b),$(v,g),a[19](e),w=!0,v.focus(),R||(S=[pe(v,"click",a[11]),pe(r,"click",kt(a[17])),pe(e,"close",a[20]),pe(e,"click",At(a[21]))],R=!0)},p(E,I){p&&p.p&&(!w||I[0]&4194304)&&rt(p,D,E,E[22],w?at(D,E[22],I,su):lt(E[22]),pa),N&&N.p&&(!w||I[0]&4194304)&&rt(N,C,E,E[22],w?at(C,E[22],I,null):lt(E[22]),null);let P=o;o=T(E),o===P?O[o].p(E,I):(ct(),de(O[P],1,1,()=>{O[P]=null}),dt(),i=O[o],i?i.p(E,I):(i=O[o]=A[o](E),i.c()),ie(i,1),i.m(r,_)),(!w||I[0]&256)&&u!==(u=E[8].length+"")&&G(b,u)},i(E){w||(ie(p,E),ie(N,E),ie(i),w=!0)},o(E){de(p,E),de(N,E),de(i),w=!1},d(E){E&&f(e),p&&p.d(E),N&&N.d(E),O[o].d(),a[19](null),R=!1,_t(S)}}}function cu(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{outbound_color:i="#fff4dd"}=e,{inbound_color:_="#fff4dd"}=e,{root_color:d="#fff4dd"}=e,{link_function:h=P=>`/dao/artifact/${P["@id"]}`}=e,{inbound_link_function:v=h}=e,{root_link_function:c=P=>`/dao/artifact/${P["@id"]}`}=e,{outbound_link_function:u=h}=e,{show_sensor_modal:b}=e,{parent_node:g}=e,{data:w}=e,R;const S=Ot();Ke(a,S,P=>r(24,s=P));const D=It();Ke(a,D,P=>r(23,t=P));let p;function C(P){l.includes(P)?r(8,l=l.filter(F=>F!==P)):l.push(P),r(8,l),r(8,l)}window.da_to_sensor_callback=function(P){C(P)};function N(){let P=0,F=200,K=100;for(const x of l){let se=w.sensors["@graph"].find(B=>B["@id"]==x);se&&(jt(S,D,g,"artifactSelectorNode",se["rdfs:label"],se["@id"],g.data.sequence,g.position.x+P*F,g.position.y+K,182,63,se["d3f:outbound"][0]["@id"].replace("d3f:",""),!1),P+=1)}S.set(s),D.set(t),R&&R.close(),r(8,l=[])}function A(P){yt.call(this,a,P)}const O=P=>P["@id"]!=w.description["@id"];function T(P){Ge[P?"unshift":"push"](()=>{R=P,r(6,R)})}const E=()=>r(0,b=!1),I=()=>{R.close(),r(8,l=[])};return a.$$set=P=>{"outbound_color"in P&&r(12,i=P.outbound_color),"inbound_color"in P&&r(1,_=P.inbound_color),"root_color"in P&&r(2,d=P.root_color),"link_function"in P&&r(13,h=P.link_function),"inbound_link_function"in P&&r(14,v=P.inbound_link_function),"root_link_function"in P&&r(3,c=P.root_link_function),"outbound_link_function"in P&&r(4,u=P.outbound_link_function),"show_sensor_modal"in P&&r(0,b=P.show_sensor_modal),"parent_node"in P&&r(15,g=P.parent_node),"data"in P&&r(5,w=P.data),"$$scope"in P&&r(22,o=P.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&65&&b&&R&&R.showModal(),a.$$.dirty[0]&65&&!b&&R&&R.close(),a.$$.dirty[0]&32&&w&&w.sensors&&r(7,p=new ir(w.sensors,{index:!0}))},r(8,l=[]),[b,_,d,c,u,w,R,p,l,S,D,N,i,h,v,g,n,A,O,T,E,I,o]}class du extends nt{constructor(e){super(),ot(this,e,cu,uu,xe,{outbound_color:12,inbound_color:1,root_color:2,link_function:13,inbound_link_function:14,root_link_function:3,outbound_link_function:4,show_sensor_modal:0,parent_node:15,data:5},null,[-1,-1])}}function hu(a){let e,r="attack the node",l,t,s,n,o,i="defend the node",_,d,h,v,c,u="add weaknesses",b,g,w,R,S,D="add sensors",p,C,N,A,O,T="explode all",E,I,P="explode parts",F,K,x="explode control",se,B,H,V,U,J;function L(Z){a[11](Z)}let Q={parent_node:a[0],data:a[1]};a[7]!==void 0&&(Q.show_attack_modal=a[7]),t=new Ff({props:Q}),Ge.push(()=>pt(t,"show_attack_modal",L));function ke(Z){a[13](Z)}let Pe={parent_node:a[0],data:a[1]};a[6]!==void 0&&(Pe.show_defend_modal=a[6]),d=new Mf({props:Pe}),Ge.push(()=>pt(d,"show_defend_modal",ke));function ne(Z){a[15](Z)}let _e={parent_node:a[0],inbound_color:"#f9d999",inbound_link_function:a[9],data:a[1]};a[5]!==void 0&&(_e.show_weakness_modal=a[5]),g=new Xf({props:_e}),Ge.push(()=>pt(g,"show_weakness_modal",ne));function fe(Z){a[17](Z)}let ce={parent_node:a[0],inbound_color:"#f9d999",data:a[1]};a[3]!==void 0&&(ce.show_sensor_modal=a[3]),C=new du({props:ce}),Ge.push(()=>pt(C,"show_sensor_modal",fe));function Re(Z){a[21](Z)}let $e={neighbor_filter_labels:a[2],parent_node:a[0],empty_message:"has no related parts in this release.",inbound_color:"#f9d999",inbound_link_function:a[9],data:a[1]};return a[4]!==void 0&&($e.show_neighbors_modal=a[4]),B=new au({props:$e}),Ge.push(()=>pt(B,"show_neighbors_modal",Re)),{c(){e=Y("button"),e.textContent=r,l=re(),Oe(t.$$.fragment),n=re(),o=Y("button"),o.textContent=i,_=re(),Oe(d.$$.fragment),v=re(),c=Y("button"),c.textContent=u,b=re(),Oe(g.$$.fragment),R=re(),S=Y("button"),S.textContent=D,p=re(),Oe(C.$$.fragment),A=re(),O=Y("button"),O.textContent=T,E=re(),I=Y("button"),I.textContent=P,F=re(),K=Y("button"),K.textContent=x,se=re(),Oe(B.$$.fragment),this.h()},l(Z){e=X(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(e)!=="svelte-1dkmztx"&&(e.textContent=r),l=le(Z),Ie(t.$$.fragment,Z),n=le(Z),o=X(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(o)!=="svelte-22hxkb"&&(o.textContent=i),_=le(Z),Ie(d.$$.fragment,Z),v=le(Z),c=X(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(c)!=="svelte-urtcr7"&&(c.textContent=u),b=le(Z),Ie(g.$$.fragment,Z),R=le(Z),S=X(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(S)!=="svelte-1xhii68"&&(S.textContent=D),p=le(Z),Ie(C.$$.fragment,Z),A=le(Z),O=X(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(O)!=="svelte-1vn2qvf"&&(O.textContent=T),E=le(Z),I=X(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(I)!=="svelte-1hluius"&&(I.textContent=P),F=le(Z),K=X(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(K)!=="svelte-183zqvn"&&(K.textContent=x),se=le(Z),Ie(B.$$.fragment,Z),this.h()},h(){te(e,"class","svelte-5he3i1"),te(o,"class","svelte-5he3i1"),te(c,"class","svelte-5he3i1"),te(S,"class","svelte-5he3i1"),te(O,"class","svelte-5he3i1"),te(I,"class","svelte-5he3i1"),te(K,"class","svelte-5he3i1")},m(Z,j){m(Z,e,j),m(Z,l,j),Fe(t,Z,j),m(Z,n,j),m(Z,o,j),m(Z,_,j),Fe(d,Z,j),m(Z,v,j),m(Z,c,j),m(Z,b,j),Fe(g,Z,j),m(Z,R,j),m(Z,S,j),m(Z,p,j),Fe(C,Z,j),m(Z,A,j),m(Z,O,j),m(Z,E,j),m(Z,I,j),m(Z,F,j),m(Z,K,j),m(Z,se,j),Fe(B,Z,j),V=!0,U||(J=[pe(e,"click",a[10]),pe(o,"click",a[12]),pe(c,"click",a[14]),pe(S,"click",a[16]),pe(O,"click",a[18]),pe(I,"click",a[19]),pe(K,"click",a[20])],U=!0)},p(Z,[j]){const ae={};j&1&&(ae.parent_node=Z[0]),j&2&&(ae.data=Z[1]),!s&&j&128&&(s=!0,ae.show_attack_modal=Z[7],mt(()=>s=!1)),t.$set(ae);const je={};j&1&&(je.parent_node=Z[0]),j&2&&(je.data=Z[1]),!h&&j&64&&(h=!0,je.show_defend_modal=Z[6],mt(()=>h=!1)),d.$set(je);const Me={};j&1&&(Me.parent_node=Z[0]),j&2&&(Me.data=Z[1]),!w&&j&32&&(w=!0,Me.show_weakness_modal=Z[5],mt(()=>w=!1)),g.$set(Me);const Be={};j&1&&(Be.parent_node=Z[0]),j&2&&(Be.data=Z[1]),!N&&j&8&&(N=!0,Be.show_sensor_modal=Z[3],mt(()=>N=!1)),C.$set(Be);const qe={};j&4&&(qe.neighbor_filter_labels=Z[2]),j&1&&(qe.parent_node=Z[0]),j&2&&(qe.data=Z[1]),!H&&j&16&&(H=!0,qe.show_neighbors_modal=Z[4],mt(()=>H=!1)),B.$set(qe)},i(Z){V||(ie(t.$$.fragment,Z),ie(d.$$.fragment,Z),ie(g.$$.fragment,Z),ie(C.$$.fragment,Z),ie(B.$$.fragment,Z),V=!0)},o(Z){de(t.$$.fragment,Z),de(d.$$.fragment,Z),de(g.$$.fragment,Z),de(C.$$.fragment,Z),de(B.$$.fragment,Z),V=!1},d(Z){Z&&(f(e),f(l),f(n),f(o),f(_),f(v),f(c),f(b),f(R),f(S),f(p),f(A),f(O),f(E),f(I),f(F),f(K),f(se)),Te(t,Z),Te(d,Z),Te(g,Z),Te(C,Z),Te(B,Z),U=!1,_t(J)}}}function _u(a,e,r){let l,t,s,n,o;var i=this&&this.__awaiter||function(E,I,P,F){function K(x){return x instanceof P?x:new P(function(se){se(x)})}return new(P||(P=Promise))(function(x,se){function B(U){try{V(F.next(U))}catch(J){se(J)}}function H(U){try{V(F.throw(U))}catch(J){se(J)}}function V(U){U.done?x(U.value):K(U.value).then(B,H)}V((F=F.apply(E,I||[])).next())})};let{node:_}=e,d,h=[];function v(E){alert(E),r(7,l=!1),r(6,t=!1),r(5,s=!1),r(4,n=!1),r(3,o=!1)}function c(E){return i(this,void 0,void 0,function*(){if(E.data.d3f_class&&E.data.d3f_class.includes("d3f:")){const I=E.data.d3f_class,P=yield fetch(`/api/dao/artifact/${I}.json`),F=yield P.json();if(P.status!=200||F.description["@graph"].length==0)v(`D3FEND Artifact: "${I.replace("d3f:","")}" not found in ontology`);else return F}else v("Please specify a D3FEND Class for this node to enable inferential mapping")})}function u(E){return Nn(E["d3f:cwe-id"][0])}const b=async()=>{r(1,d=null),r(7,l=!0),r(1,d=await c(_))};function g(E){l=E,r(7,l)}const w=async()=>{r(1,d=null),r(6,t=!0),r(1,d=await c(_))};function R(E){t=E,r(6,t)}const S=async()=>{r(1,d=null),r(5,s=!0),r(1,d=await c(_))};function D(E){s=E,r(5,s)}const p=async()=>{r(1,d=null),r(3,o=!0),r(1,d=await c(_))};function C(E){o=E,r(3,o)}const N=async()=>{r(1,d=null),r(4,n=!0),r(2,h=[]),r(1,d=await c(_))},A=async()=>{r(1,d=null),r(4,n=!0),r(2,h=["d3f:contains","d3f:may-contains"]),r(1,d=await c(_))},O=async()=>{r(1,d=null),r(4,n=!0),r(2,h=["d3f:runs","d3f:loads","d3f:manages"]),r(1,d=await c(_))};function T(E){n=E,r(4,n)}return a.$$set=E=>{"node"in E&&r(0,_=E.node)},r(7,l=!1),r(6,t=!1),r(5,s=!1),r(4,n=!1),r(3,o=!1),[_,d,h,o,n,s,t,l,c,u,b,g,w,R,S,D,p,C,N,A,O,T]}class vu extends nt{constructor(e){super(),ot(this,e,_u,hu,xe,{node:0})}}function Da(a,e,r){const l=a.slice();return l[18]=e[r],l[20]=r,l}const mu=a=>({}),Na=a=>({});function pu(a){let e;return{c(){e=k("No related defensive techniques in this release.")},l(r){e=y(r,"No related defensive techniques in this release.")},m(r,l){m(r,e,l)},p:we,i:we,o:we,d(r){r&&f(e)}}}function gu(a){let e,r;return e=new Lt({props:{$$slots:{default:[wu]},$$scope:{ctx:a}}}),{c(){Oe(e.$$.fragment)},l(l){Ie(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t&16406&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(ie(e.$$.fragment,l),r=!0)},o(l){de(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function bu(a){let e,r="Loading...";return{c(){e=Y("div"),e.textContent=r},l(l){e=X(l,"DIV",{"data-svelte-h":!0}),Ne(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){m(l,e,t)},p:we,i:we,o:we,d(l){l&&f(e)}}}function Eu(a){let e,r=ue(a[18].def_artifact.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" ArtifactNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," ArtifactNode;")},m(s,n){m(s,e,n),m(s,l,n),m(s,t,n)},p(s,n){n&4&&r!==(r=ue(s[18].def_artifact.value)+"")&&G(l,r)},d(s){s&&(f(e),f(l),f(t))}}}function Pu(a){let e,r=ue(a[18].def_artifact.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" SelectedArtifactNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," SelectedArtifactNode;")},m(s,n){m(s,e,n),m(s,l,n),m(s,t,n)},p(s,n){n&4&&r!==(r=ue(s[18].def_artifact.value)+"")&&G(l,r)},d(s){s&&(f(e),f(l),f(t))}}}function Ra(a){let e=a[1].data.d3f_class+"",r,l,t=a[2].description["@graph"][0]["rdfs:label"]+"",s,n,o="-->",i,_,d=a[18].def_artifact_rel_label.value+"",h,v,c=ue(a[18].def_artifact.value)+"",u,b,g=a[18].def_artifact_label.value+"",w,R,S=a[1].data.d3f_class+"",D,p,C,N,A=ue(a[18].def_artifact.value)+"",O,T,E=ue(a[18].def_artifact.value)+"",I,P,F=`
`,K;function x(H,V){return V&20&&(C=null),C==null&&(C=!!H[4].includes(ue(H[18].def_artifact.value))),C?Pu:Eu}let se=x(a,-1),B=se(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),i=k(o),_=k(' |"'),h=k(d),v=k('" | '),u=k(c),b=k('["'),w=k(g),R=k(`"];
          class `),D=k(S),p=k(` DefensiveTechniqueNode;
          `),B.c(),N=k(`
          click `),O=k(A),T=k(` href "javascript:def_to_art_callback('`),I=k(E),P=k(`')";`),K=k(F)},l(H){r=y(H,e),l=y(H,'["'),s=y(H,t),n=y(H,'"] '),i=y(H,o),_=y(H,' |"'),h=y(H,d),v=y(H,'" | '),u=y(H,c),b=y(H,'["'),w=y(H,g),R=y(H,`"];
          class `),D=y(H,S),p=y(H,` DefensiveTechniqueNode;
          `),B.l(H),N=y(H,`
          click `),O=y(H,A),T=y(H,` href "javascript:def_to_art_callback('`),I=y(H,E),P=y(H,`')";`),K=y(H,F)},m(H,V){m(H,r,V),m(H,l,V),m(H,s,V),m(H,n,V),m(H,i,V),m(H,_,V),m(H,h,V),m(H,v,V),m(H,u,V),m(H,b,V),m(H,w,V),m(H,R,V),m(H,D,V),m(H,p,V),B.m(H,V),m(H,N,V),m(H,O,V),m(H,T,V),m(H,I,V),m(H,P,V),m(H,K,V)},p(H,V){V&2&&e!==(e=H[1].data.d3f_class+"")&&G(r,e),V&4&&t!==(t=H[2].description["@graph"][0]["rdfs:label"]+"")&&G(s,t),V&4&&d!==(d=H[18].def_artifact_rel_label.value+"")&&G(h,d),V&4&&c!==(c=ue(H[18].def_artifact.value)+"")&&G(u,c),V&4&&g!==(g=H[18].def_artifact_label.value+"")&&G(w,g),V&2&&S!==(S=H[1].data.d3f_class+"")&&G(D,S),se===(se=x(H,V))&&B?B.p(H,V):(B.d(1),B=se(H),B&&(B.c(),B.m(N.parentNode,N))),V&4&&A!==(A=ue(H[18].def_artifact.value)+"")&&G(O,A),V&4&&E!==(E=ue(H[18].def_artifact.value)+"")&&G(I,E)},d(H){H&&(f(r),f(l),f(s),f(n),f(i),f(_),f(h),f(v),f(u),f(b),f(w),f(R),f(D),f(p),f(N),f(O),f(T),f(I),f(P),f(K)),B.d(H)}}}function wu(a){let e,r,l=Ce(a[2].digital_artifacts.results.bindings),t=[];for(let s=0;s<l.length;s+=1)t[s]=Ra(Da(a,l,s));return{c(){e=k(`graph LR
        `);for(let s=0;s<t.length;s+=1)t[s].c();r=be()},l(s){e=y(s,`graph LR
        `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=be()},m(s,n){m(s,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,n);m(s,r,n)},p(s,n){if(n&22){l=Ce(s[2].digital_artifacts.results.bindings);let o;for(o=0;o<l.length;o+=1){const i=Da(s,l,o);t[o]?t[o].p(i,n):(t[o]=Ra(i),t[o].c(),t[o].m(r.parentNode,r))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(s){s&&(f(e),f(r)),Ze(t,s)}}}function ku(a){let e,r,l,t,s,n,o,i,_,d,h,v,c,u=a[4].length+"",b,g,w,R,S;const D=a[9].header,p=tt(D,a,a[14],Na),C=a[9].default,N=tt(C,a,a[14],null),A=[bu,gu,pu],O=[];function T(E,I){return E[2]?E[2].digital_artifacts.results.bindings.length>0?1:2:0}return o=T(a),i=O[o]=A[o](a),{c(){e=Y("dialog"),r=Y("div"),p&&p.c(),l=k(`
    Select Related Artifacts To Insert
    `),N&&N.c(),t=re(),s=Y("hr"),n=re(),i.c(),_=re(),d=Y("hr"),h=re(),v=Y("button"),c=k("Insert ("),b=k(u),g=k(")"),this.h()},l(E){e=X(E,"DIALOG",{class:!0});var I=me(e);r=X(I,"DIV",{class:!0});var P=me(r);p&&p.l(P),l=y(P,`
    Select Related Artifacts To Insert
    `),N&&N.l(P),t=le(P),s=X(P,"HR",{}),n=le(P),i.l(P),_=le(P),d=X(P,"HR",{}),h=le(P),v=X(P,"BUTTON",{class:!0});var F=me(v);c=y(F,"Insert ("),b=y(F,u),g=y(F,")"),F.forEach(f),P.forEach(f),I.forEach(f),this.h()},h(){v.autofocus=!0,te(v,"class","svelte-x0618k"),te(r,"class","svelte-x0618k"),te(e,"class","svelte-x0618k")},m(E,I){m(E,e,I),$(e,r),p&&p.m(r,null),$(r,l),N&&N.m(r,null),$(r,t),$(r,s),$(r,n),O[o].m(r,null),$(r,_),$(r,d),$(r,h),$(r,v),$(v,c),$(v,b),$(v,g),a[11](e),w=!0,v.focus(),R||(S=[pe(v,"click",a[7]),pe(r,"click",kt(a[10])),pe(e,"close",a[12]),pe(e,"click",At(a[13]))],R=!0)},p(E,[I]){p&&p.p&&(!w||I&16384)&&rt(p,D,E,E[14],w?at(D,E[14],I,mu):lt(E[14]),Na),N&&N.p&&(!w||I&16384)&&rt(N,C,E,E[14],w?at(C,E[14],I,null):lt(E[14]),null);let P=o;o=T(E),o===P?O[o].p(E,I):(ct(),de(O[P],1,1,()=>{O[P]=null}),dt(),i=O[o],i?i.p(E,I):(i=O[o]=A[o](E),i.c()),ie(i,1),i.m(r,_)),(!w||I&16)&&u!==(u=E[4].length+"")&&G(b,u)},i(E){w||(ie(p,E),ie(N,E),ie(i),w=!0)},o(E){de(p,E),de(N,E),de(i),w=!1},d(E){E&&f(e),p&&p.d(E),N&&N.d(E),O[o].d(),a[11](null),R=!1,_t(S)}}}function yu(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{show_artifacts_modal:i}=e,{parent_node:_}=e,{data:d}=e,h;const v=Ot();Ke(a,v,p=>r(16,s=p));const c=It();Ke(a,c,p=>r(15,t=p));let u=new Vt;function b(p){l.includes(p)?r(4,l=l.filter(C=>C!==p)):l.push(p),r(4,l)}window.def_to_art_callback=function(p){b(p)};function g(){let p=0,C=200,N=100;for(const A of l){let O=d.digital_artifacts.results.bindings.find(T=>ue(T.def_artifact.value)==A);O&&(jt(v,c,_,"artifactSelectorNode",O.def_artifact_label.value,"d3f:"+ue(O.def_artifact.value),_.data.sequence,_.position.x+p*C,_.position.y+N,182,82,O.def_artifact_rel_label.value,!0),p+=1)}v.set(s),c.set(t),h&&h.close(),r(4,l=[])}function w(p){yt.call(this,a,p)}function R(p){Ge[p?"unshift":"push"](()=>{h=p,r(3,h)})}const S=()=>r(0,i=!1),D=()=>{h.close(),r(4,l=[])};return a.$$set=p=>{"show_artifacts_modal"in p&&r(0,i=p.show_artifacts_modal),"parent_node"in p&&r(1,_=p.parent_node),"data"in p&&r(2,d=p.data),"$$scope"in p&&r(14,o=p.$$scope)},a.$$.update=()=>{a.$$.dirty&9&&i&&h&&(h.showModal(),r(8,u=new Vt)),a.$$.dirty&265&&!i&&h&&(h.close(),u.reset())},r(4,l=[]),[i,_,d,h,l,v,c,g,u,n,w,R,S,D,o]}class Su extends nt{constructor(e){super(),ot(this,e,yu,ku,xe,{show_artifacts_modal:0,parent_node:1,data:2})}}function Ca(a,e,r){const l=a.slice();return l[18]=e[r],l}const Du=a=>({}),Oa=a=>({});function Nu(a){let e;return{c(){e=k("No related offensive techniques in this release.")},l(r){e=y(r,"No related offensive techniques in this release.")},m(r,l){m(r,e,l)},p:we,i:we,o:we,d(r){r&&f(e)}}}function Ru(a){let e,r;return e=new Lt({props:{$$slots:{default:[Fu]},$$scope:{ctx:a}}}),{c(){Oe(e.$$.fragment)},l(l){Ie(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t&16394&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(ie(e.$$.fragment,l),r=!0)},o(l){de(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function Cu(a){let e,r="Loading...";return{c(){e=Y("div"),e.textContent=r},l(l){e=X(l,"DIV",{"data-svelte-h":!0}),Ne(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){m(l,e,t)},p:we,i:we,o:we,d(l){l&&f(e)}}}function Ia(a){let e=ue(a[18].def_tech.value).replace(/ |\./g,"")+"",r,l,t=a[18].def_tech_label.value+"",s,n,o="-->",i,_,d="May "+a[18].def_tactic_label.value.replace(/ /g,""),h,v,c=a[18].off_tech_id.value.replace(/ |\./g,"")+"",u,b,g=a[18].off_tech_label.value+"",w,R,S,D,p=ue(a[18].def_tech.value)+"",C,N,A=a[18].off_tech_id.value.replace(/ |\./g,"")+"",O,T,E=a[18].off_tech_id.value.replace(/ |\./g,"")+"",I,P,F=ue(a[18].def_tech.value)+"",K,x,se=ue(a[18].def_tech.value)+"",B,H;function V(L,Q){return Q&10&&(S=null),S==null&&(S=!!L[3].includes(L[18].off_tech_id.value.replace(/ |\./g,""))),S?Iu:Ou}let U=V(a,-1),J=U(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),i=k(o),_=k(" | "),h=k(d),v=k("| "),u=k(c),b=k('["'),w=k(g),R=k(`"];
            `),J.c(),D=k(`
            class `),C=k(p),N=k(" CountermeasureNode; click "),O=k(A),T=k(` href "javascript:def_to_off_callback('`),I=k(E),P=k(`')"; click `),K=k(F),x=k(' href "/technique/d3f:'),B=k(se),H=k('";')},l(L){r=y(L,e),l=y(L,'["'),s=y(L,t),n=y(L,'"] '),i=y(L,o),_=y(L," | "),h=y(L,d),v=y(L,"| "),u=y(L,c),b=y(L,'["'),w=y(L,g),R=y(L,`"];
            `),J.l(L),D=y(L,`
            class `),C=y(L,p),N=y(L," CountermeasureNode; click "),O=y(L,A),T=y(L,` href "javascript:def_to_off_callback('`),I=y(L,E),P=y(L,`')"; click `),K=y(L,F),x=y(L,' href "/technique/d3f:'),B=y(L,se),H=y(L,'";')},m(L,Q){m(L,r,Q),m(L,l,Q),m(L,s,Q),m(L,n,Q),m(L,i,Q),m(L,_,Q),m(L,h,Q),m(L,v,Q),m(L,u,Q),m(L,b,Q),m(L,w,Q),m(L,R,Q),J.m(L,Q),m(L,D,Q),m(L,C,Q),m(L,N,Q),m(L,O,Q),m(L,T,Q),m(L,I,Q),m(L,P,Q),m(L,K,Q),m(L,x,Q),m(L,B,Q),m(L,H,Q)},p(L,Q){Q&2&&e!==(e=ue(L[18].def_tech.value).replace(/ |\./g,"")+"")&&G(r,e),Q&2&&t!==(t=L[18].def_tech_label.value+"")&&G(s,t),Q&2&&d!==(d="May "+L[18].def_tactic_label.value.replace(/ /g,""))&&G(h,d),Q&2&&c!==(c=L[18].off_tech_id.value.replace(/ |\./g,"")+"")&&G(u,c),Q&2&&g!==(g=L[18].off_tech_label.value+"")&&G(w,g),U===(U=V(L,Q))&&J?J.p(L,Q):(J.d(1),J=U(L),J&&(J.c(),J.m(D.parentNode,D))),Q&2&&p!==(p=ue(L[18].def_tech.value)+"")&&G(C,p),Q&2&&A!==(A=L[18].off_tech_id.value.replace(/ |\./g,"")+"")&&G(O,A),Q&2&&E!==(E=L[18].off_tech_id.value.replace(/ |\./g,"")+"")&&G(I,E),Q&2&&F!==(F=ue(L[18].def_tech.value)+"")&&G(K,F),Q&2&&se!==(se=ue(L[18].def_tech.value)+"")&&G(B,se)},d(L){L&&(f(r),f(l),f(s),f(n),f(i),f(_),f(h),f(v),f(u),f(b),f(w),f(R),f(D),f(C),f(N),f(O),f(T),f(I),f(P),f(K),f(x),f(B),f(H)),J.d(L)}}}function Ou(a){let e,r=a[18].off_tech_id.value.replace(/ |\./g,"")+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" OffensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," OffensiveTechniqueNode;")},m(s,n){m(s,e,n),m(s,l,n),m(s,t,n)},p(s,n){n&2&&r!==(r=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&G(l,r)},d(s){s&&(f(e),f(l),f(t))}}}function Iu(a){let e,r=a[18].off_tech_id.value.replace(/ |\./g,"")+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" SelectedOffensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," SelectedOffensiveTechniqueNode;")},m(s,n){m(s,e,n),m(s,l,n),m(s,t,n)},p(s,n){n&2&&r!==(r=s[18].off_tech_id.value.replace(/ |\./g,"")+"")&&G(l,r)},d(s){s&&(f(e),f(l),f(t))}}}function Fa(a){let e=a[6].edge_is_unique(a[18].def_tech_label.value,a[18].off_artifact_rel_label.value,a[18].off_artifact_label.value),r,l=e&&Ia(a);return{c(){l&&l.c(),r=be()},l(t){l&&l.l(t),r=be()},m(t,s){l&&l.m(t,s),m(t,r,s)},p(t,s){s&2&&(e=t[6].edge_is_unique(t[18].def_tech_label.value,t[18].off_artifact_rel_label.value,t[18].off_artifact_label.value)),e?l?l.p(t,s):(l=Ia(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&f(r),l&&l.d(t)}}}function Fu(a){let e,r,l=Ce(a[1].def_to_off.results.bindings),t=[];for(let s=0;s<l.length;s+=1)t[s]=Fa(Ca(a,l,s));return{c(){e=k(`graph LR;
        `);for(let s=0;s<t.length;s+=1)t[s].c();r=be()},l(s){e=y(s,`graph LR;
        `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=be()},m(s,n){m(s,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,n);m(s,r,n)},p(s,n){if(n&74){l=Ce(s[1].def_to_off.results.bindings);let o;for(o=0;o<l.length;o+=1){const i=Ca(s,l,o);t[o]?t[o].p(i,n):(t[o]=Fa(i),t[o].c(),t[o].m(r.parentNode,r))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(s){s&&(f(e),f(r)),Ze(t,s)}}}function Tu(a){let e,r,l,t,s,n,o,i,_,d,h,v,c,u=a[3].length+"",b,g,w,R,S;const D=a[9].header,p=tt(D,a,a[14],Oa),C=a[9].default,N=tt(C,a,a[14],null),A=[Cu,Ru,Nu],O=[];function T(E,I){return E[1]?E[1].def_to_off.results.bindings.length>0?1:2:0}return o=T(a),i=O[o]=A[o](a),{c(){e=Y("dialog"),r=Y("div"),p&&p.c(),l=k(`
    Select Attack Techniques
    `),N&&N.c(),t=re(),s=Y("hr"),n=re(),i.c(),_=re(),d=Y("hr"),h=re(),v=Y("button"),c=k("Insert ("),b=k(u),g=k(")"),this.h()},l(E){e=X(E,"DIALOG",{class:!0});var I=me(e);r=X(I,"DIV",{class:!0});var P=me(r);p&&p.l(P),l=y(P,`
    Select Attack Techniques
    `),N&&N.l(P),t=le(P),s=X(P,"HR",{}),n=le(P),i.l(P),_=le(P),d=X(P,"HR",{}),h=le(P),v=X(P,"BUTTON",{class:!0});var F=me(v);c=y(F,"Insert ("),b=y(F,u),g=y(F,")"),F.forEach(f),P.forEach(f),I.forEach(f),this.h()},h(){v.autofocus=!0,te(v,"class","svelte-1ai9hff"),te(r,"class","svelte-1ai9hff"),te(e,"class","svelte-1ai9hff")},m(E,I){m(E,e,I),$(e,r),p&&p.m(r,null),$(r,l),N&&N.m(r,null),$(r,t),$(r,s),$(r,n),O[o].m(r,null),$(r,_),$(r,d),$(r,h),$(r,v),$(v,c),$(v,b),$(v,g),a[11](e),w=!0,v.focus(),R||(S=[pe(v,"click",a[7]),pe(r,"click",kt(a[10])),pe(e,"close",a[12]),pe(e,"click",At(a[13]))],R=!0)},p(E,[I]){p&&p.p&&(!w||I&16384)&&rt(p,D,E,E[14],w?at(D,E[14],I,Du):lt(E[14]),Oa),N&&N.p&&(!w||I&16384)&&rt(N,C,E,E[14],w?at(C,E[14],I,null):lt(E[14]),null);let P=o;o=T(E),o===P?O[o].p(E,I):(ct(),de(O[P],1,1,()=>{O[P]=null}),dt(),i=O[o],i?i.p(E,I):(i=O[o]=A[o](E),i.c()),ie(i,1),i.m(r,_)),(!w||I&8)&&u!==(u=E[3].length+"")&&G(b,u)},i(E){w||(ie(p,E),ie(N,E),ie(i),w=!0)},o(E){de(p,E),de(N,E),de(i),w=!1},d(E){E&&f(e),p&&p.d(E),N&&N.d(E),O[o].d(),a[11](null),R=!1,_t(S)}}}function Au(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{show_attack_modal:i}=e,{parent_node:_}=e,{data:d}=e,h;const v=Ot();Ke(a,v,p=>r(16,s=p));const c=It();Ke(a,c,p=>r(15,t=p));let u=new Vt;function b(p){l.includes(p)?r(3,l=l.filter(C=>C!==p)):l.push(p),r(3,l)}window.def_to_off_callback=function(p){b(p)};function g(){let p=0,C=200,N=100;for(const A of l){let O=d.def_to_off.results.bindings.find(T=>T.off_tech_id.value.replace(/ |\./g,"")==A);O&&(jt(v,c,_,"attackSelectorNode",O.off_tech_label.value,"d3f:"+O.off_tech_id.value,_.data.sequence,_.position.x+p*C,_.position.y+N,182,63,"May "+O.def_tactic_label.value,!0),p+=1)}v.set(s),c.set(t),h&&h.close(),r(3,l=[])}function w(p){yt.call(this,a,p)}function R(p){Ge[p?"unshift":"push"](()=>{h=p,r(2,h)})}const S=()=>r(0,i=!1),D=()=>{h.close(),r(3,l=[])};return a.$$set=p=>{"show_attack_modal"in p&&r(0,i=p.show_attack_modal),"parent_node"in p&&r(8,_=p.parent_node),"data"in p&&r(1,d=p.data),"$$scope"in p&&r(14,o=p.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&i&&h&&(h.showModal(),u.reset()),a.$$.dirty&5&&!i&&h&&(h.close(),u.reset())},r(3,l=[]),[i,d,h,l,v,c,u,g,_,n,w,R,S,D,o]}class Lu extends nt{constructor(e){super(),ot(this,e,Au,Tu,xe,{show_attack_modal:0,parent_node:8,data:1})}}function ju(a){let e,r="artifacts",l,t,s,n,o,i="offensive techniques",_,d,h,v,c,u="weaknesses (coming soon)",b,g,w;function R(C){a[6](C)}let S={parent_node:a[0],data:a[1]};a[3]!==void 0&&(S.show_artifacts_modal=a[3]),t=new Su({props:S}),Ge.push(()=>pt(t,"show_artifacts_modal",R));function D(C){a[8](C)}let p={parent_node:a[0],data:a[1]};return a[2]!==void 0&&(p.show_attack_modal=a[2]),d=new Lu({props:p}),Ge.push(()=>pt(d,"show_attack_modal",D)),{c(){e=Y("button"),e.textContent=r,l=re(),Oe(t.$$.fragment),n=re(),o=Y("button"),o.textContent=i,_=re(),Oe(d.$$.fragment),v=re(),c=Y("button"),c.textContent=u,this.h()},l(C){e=X(C,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(e)!=="svelte-isgkpy"&&(e.textContent=r),l=le(C),Ie(t.$$.fragment,C),n=le(C),o=X(C,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(o)!=="svelte-17h5zge"&&(o.textContent=i),_=le(C),Ie(d.$$.fragment,C),v=le(C),c=X(C,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(c)!=="svelte-ivhbdc"&&(c.textContent=u),this.h()},h(){te(e,"class","svelte-1x5dcdh"),te(o,"class","svelte-1x5dcdh"),c.disabled=!0,te(c,"class","svelte-1x5dcdh")},m(C,N){m(C,e,N),m(C,l,N),Fe(t,C,N),m(C,n,N),m(C,o,N),m(C,_,N),Fe(d,C,N),m(C,v,N),m(C,c,N),b=!0,g||(w=[pe(e,"click",a[5]),pe(o,"click",a[7])],g=!0)},p(C,[N]){const A={};N&1&&(A.parent_node=C[0]),N&2&&(A.data=C[1]),!s&&N&8&&(s=!0,A.show_artifacts_modal=C[3],mt(()=>s=!1)),t.$set(A);const O={};N&1&&(O.parent_node=C[0]),N&2&&(O.data=C[1]),!h&&N&4&&(h=!0,O.show_attack_modal=C[2],mt(()=>h=!1)),d.$set(O)},i(C){b||(ie(t.$$.fragment,C),ie(d.$$.fragment,C),b=!0)},o(C){de(t.$$.fragment,C),de(d.$$.fragment,C),b=!1},d(C){C&&(f(e),f(l),f(n),f(o),f(_),f(v),f(c)),Te(t,C),Te(d,C),g=!1,_t(w)}}}function qu(a,e,r){let l,t;var s=this&&this.__awaiter||function(u,b,g,w){function R(S){return S instanceof g?S:new g(function(D){D(S)})}return new(g||(g=Promise))(function(S,D){function p(A){try{N(w.next(A))}catch(O){D(O)}}function C(A){try{N(w.throw(A))}catch(O){D(O)}}function N(A){A.done?S(A.value):R(A.value).then(p,C)}N((w=w.apply(u,b||[])).next())})};let{node:n}=e,o;function i(u){alert(u),r(3,l=!1),r(2,t=!1)}function _(u){return s(this,void 0,void 0,function*(){if(u.data.d3f_class&&u.data.d3f_class.includes("d3f:")){const b=u.data.d3f_class,g=yield fetch(`/api/technique/${b}.json`),w=yield g.json();if(g.status!=200||w.description["@graph"].length==0)i(`D3FEND Technique: "${b.replace("d3f:","")}" not found in ontology`);else return w}else i("Please specify a D3FEND Class for this node to enable inferential mapping")})}const d=async()=>{r(1,o=null),r(3,l=!0),r(1,o=await _(n))};function h(u){l=u,r(3,l)}const v=async()=>{r(1,o=null),r(2,t=!0),r(1,o=await _(n))};function c(u){t=u,r(2,t)}return a.$$set=u=>{"node"in u&&r(0,n=u.node)},r(3,l=!1),r(2,t=!1),[n,o,t,l,_,d,h,v,c]}class Uu extends nt{constructor(e){super(),ot(this,e,qu,ju,xe,{node:0})}}function Ta(a,e,r){const l=a.slice();return l[18]=e[r],l}const $u=a=>({}),Aa=a=>({});function Vu(a){let e;return{c(){e=k("No related artifacts in this release.")},l(r){e=y(r,"No related artifacts in this release.")},m(r,l){m(r,e,l)},p:we,i:we,o:we,d(r){r&&f(e)}}}function zu(a){let e,r;return e=new Lt({props:{$$slots:{default:[Qu]},$$scope:{ctx:a}}}),{c(){Oe(e.$$.fragment)},l(l){Ie(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t&16394&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(ie(e.$$.fragment,l),r=!0)},o(l){de(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function Mu(a){let e,r="Loading...";return{c(){e=Y("div"),e.textContent=r},l(l){e=X(l,"DIV",{"data-svelte-h":!0}),Ne(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){m(l,e,t)},p:we,i:we,o:we,d(l){l&&f(e)}}}function La(a){let e=a[18].off_tech_id.value.replace(/ |\./g,"")+"",r,l,t=a[18].off_tech_label.value+"",s,n,o="-->",i,_,d=a[18].off_artifact_rel_label.value.replace(/ /g,"")+"",h,v,c=ue(a[18].off_artifact.value)+"",u,b,g=a[18].off_artifact_label.value+"",w,R,S=a[18].off_tech_id.value.replace(/ |\./g,"")+"",D,p,C,N,A=ue(a[18].off_artifact.value)+"",O,T,E=ue(a[18].off_artifact.value)+"",I,P,F=a[18].off_tech_id.value.replace(/ |\./g,"")+"",K,x,se=fr(a[18].off_tech_id.value)+"",B,H,V=ue(a[18].off_artifact.value)+"",U,J,L=ue(a[18].off_artifact.value)+"",Q,ke;function Pe(fe,ce){return ce&10&&(C=null),C==null&&(C=!!fe[3].includes(ue(fe[18].off_artifact.value))),C?Hu:Bu}let ne=Pe(a,-1),_e=ne(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),i=k(o),_=k(" |"),h=k(d),v=k("| "),u=k(c),b=k('["'),w=k(g),R=k('"]; class '),D=k(S),p=k(` OffensiveTechniqueNode;
            `),_e.c(),N=k(" ; click "),O=k(A),T=k(' href "/dao/artifact/d3f:'),I=k(E),P=k('"; click '),K=k(F),x=k(' href "'),B=k(se),H=k('"; click '),U=k(V),J=k(` href "javascript:off_to_art_callback('`),Q=k(L),ke=k(`')";`)},l(fe){r=y(fe,e),l=y(fe,'["'),s=y(fe,t),n=y(fe,'"] '),i=y(fe,o),_=y(fe," |"),h=y(fe,d),v=y(fe,"| "),u=y(fe,c),b=y(fe,'["'),w=y(fe,g),R=y(fe,'"]; class '),D=y(fe,S),p=y(fe,` OffensiveTechniqueNode;
            `),_e.l(fe),N=y(fe," ; click "),O=y(fe,A),T=y(fe,' href "/dao/artifact/d3f:'),I=y(fe,E),P=y(fe,'"; click '),K=y(fe,F),x=y(fe,' href "'),B=y(fe,se),H=y(fe,'"; click '),U=y(fe,V),J=y(fe,` href "javascript:off_to_art_callback('`),Q=y(fe,L),ke=y(fe,`')";`)},m(fe,ce){m(fe,r,ce),m(fe,l,ce),m(fe,s,ce),m(fe,n,ce),m(fe,i,ce),m(fe,_,ce),m(fe,h,ce),m(fe,v,ce),m(fe,u,ce),m(fe,b,ce),m(fe,w,ce),m(fe,R,ce),m(fe,D,ce),m(fe,p,ce),_e.m(fe,ce),m(fe,N,ce),m(fe,O,ce),m(fe,T,ce),m(fe,I,ce),m(fe,P,ce),m(fe,K,ce),m(fe,x,ce),m(fe,B,ce),m(fe,H,ce),m(fe,U,ce),m(fe,J,ce),m(fe,Q,ce),m(fe,ke,ce)},p(fe,ce){ce&2&&e!==(e=fe[18].off_tech_id.value.replace(/ |\./g,"")+"")&&G(r,e),ce&2&&t!==(t=fe[18].off_tech_label.value+"")&&G(s,t),ce&2&&d!==(d=fe[18].off_artifact_rel_label.value.replace(/ /g,"")+"")&&G(h,d),ce&2&&c!==(c=ue(fe[18].off_artifact.value)+"")&&G(u,c),ce&2&&g!==(g=fe[18].off_artifact_label.value+"")&&G(w,g),ce&2&&S!==(S=fe[18].off_tech_id.value.replace(/ |\./g,"")+"")&&G(D,S),ne===(ne=Pe(fe,ce))&&_e?_e.p(fe,ce):(_e.d(1),_e=ne(fe),_e&&(_e.c(),_e.m(N.parentNode,N))),ce&2&&A!==(A=ue(fe[18].off_artifact.value)+"")&&G(O,A),ce&2&&E!==(E=ue(fe[18].off_artifact.value)+"")&&G(I,E),ce&2&&F!==(F=fe[18].off_tech_id.value.replace(/ |\./g,"")+"")&&G(K,F),ce&2&&se!==(se=fr(fe[18].off_tech_id.value)+"")&&G(B,se),ce&2&&V!==(V=ue(fe[18].off_artifact.value)+"")&&G(U,V),ce&2&&L!==(L=ue(fe[18].off_artifact.value)+"")&&G(Q,L)},d(fe){fe&&(f(r),f(l),f(s),f(n),f(i),f(_),f(h),f(v),f(u),f(b),f(w),f(R),f(D),f(p),f(N),f(O),f(T),f(I),f(P),f(K),f(x),f(B),f(H),f(U),f(J),f(Q),f(ke)),_e.d(fe)}}}function Bu(a){let e,r=ue(a[18].off_artifact.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" ArtifactNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," ArtifactNode;")},m(s,n){m(s,e,n),m(s,l,n),m(s,t,n)},p(s,n){n&2&&r!==(r=ue(s[18].off_artifact.value)+"")&&G(l,r)},d(s){s&&(f(e),f(l),f(t))}}}function Hu(a){let e,r=ue(a[18].off_artifact.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" SelectedArtifactNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," SelectedArtifactNode;")},m(s,n){m(s,e,n),m(s,l,n),m(s,t,n)},p(s,n){n&2&&r!==(r=ue(s[18].off_artifact.value)+"")&&G(l,r)},d(s){s&&(f(e),f(l),f(t))}}}function ja(a){let e=a[6].edge_is_unique(a[18].off_tech_label.value,a[18].off_artifact_rel_label.value,a[18].off_artifact_label.value),r,l=e&&La(a);return{c(){l&&l.c(),r=be()},l(t){l&&l.l(t),r=be()},m(t,s){l&&l.m(t,s),m(t,r,s)},p(t,s){s&2&&(e=t[6].edge_is_unique(t[18].off_tech_label.value,t[18].off_artifact_rel_label.value,t[18].off_artifact_label.value)),e?l?l.p(t,s):(l=La(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&f(r),l&&l.d(t)}}}function Qu(a){let e,r,l=Ce(a[1].off_to_def.results.bindings),t=[];for(let s=0;s<l.length;s+=1)t[s]=ja(Ta(a,l,s));return{c(){e=k(`graph LR;
        `);for(let s=0;s<t.length;s+=1)t[s].c();r=be()},l(s){e=y(s,`graph LR;
        `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=be()},m(s,n){m(s,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,n);m(s,r,n)},p(s,n){if(n&74){l=Ce(s[1].off_to_def.results.bindings);let o;for(o=0;o<l.length;o+=1){const i=Ta(s,l,o);t[o]?t[o].p(i,n):(t[o]=ja(i),t[o].c(),t[o].m(r.parentNode,r))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(s){s&&(f(e),f(r)),Ze(t,s)}}}function Gu(a){let e,r,l,t,s,n,o,i,_,d,h,v,c,u=a[3].length+"",b,g,w,R,S;const D=a[9].header,p=tt(D,a,a[14],Aa),C=a[9].default,N=tt(C,a,a[14],null),A=[Mu,zu,Vu],O=[];function T(E,I){return E[1]?E[1].off_to_def.results.bindings.length>0?1:2:0}return o=T(a),i=O[o]=A[o](a),{c(){e=Y("dialog"),r=Y("div"),p&&p.c(),l=k(`
    Select Related Artifacts To Insert
    `),N&&N.c(),t=re(),s=Y("hr"),n=re(),i.c(),_=re(),d=Y("hr"),h=re(),v=Y("button"),c=k("Insert ("),b=k(u),g=k(")"),this.h()},l(E){e=X(E,"DIALOG",{class:!0});var I=me(e);r=X(I,"DIV",{class:!0});var P=me(r);p&&p.l(P),l=y(P,`
    Select Related Artifacts To Insert
    `),N&&N.l(P),t=le(P),s=X(P,"HR",{}),n=le(P),i.l(P),_=le(P),d=X(P,"HR",{}),h=le(P),v=X(P,"BUTTON",{class:!0});var F=me(v);c=y(F,"Insert ("),b=y(F,u),g=y(F,")"),F.forEach(f),P.forEach(f),I.forEach(f),this.h()},h(){v.autofocus=!0,te(v,"class","svelte-x0618k"),te(r,"class","svelte-x0618k"),te(e,"class","svelte-x0618k")},m(E,I){m(E,e,I),$(e,r),p&&p.m(r,null),$(r,l),N&&N.m(r,null),$(r,t),$(r,s),$(r,n),O[o].m(r,null),$(r,_),$(r,d),$(r,h),$(r,v),$(v,c),$(v,b),$(v,g),a[11](e),w=!0,v.focus(),R||(S=[pe(v,"click",a[7]),pe(r,"click",kt(a[10])),pe(e,"close",a[12]),pe(e,"click",At(a[13]))],R=!0)},p(E,[I]){p&&p.p&&(!w||I&16384)&&rt(p,D,E,E[14],w?at(D,E[14],I,$u):lt(E[14]),Aa),N&&N.p&&(!w||I&16384)&&rt(N,C,E,E[14],w?at(C,E[14],I,null):lt(E[14]),null);let P=o;o=T(E),o===P?O[o].p(E,I):(ct(),de(O[P],1,1,()=>{O[P]=null}),dt(),i=O[o],i?i.p(E,I):(i=O[o]=A[o](E),i.c()),ie(i,1),i.m(r,_)),(!w||I&8)&&u!==(u=E[3].length+"")&&G(b,u)},i(E){w||(ie(p,E),ie(N,E),ie(i),w=!0)},o(E){de(p,E),de(N,E),de(i),w=!1},d(E){E&&f(e),p&&p.d(E),N&&N.d(E),O[o].d(),a[11](null),R=!1,_t(S)}}}function Ku(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{show_artifacts_modal:i}=e,{parent_node:_}=e,{data:d}=e,h;const v=Ot();Ke(a,v,p=>r(16,s=p));const c=It();Ke(a,c,p=>r(15,t=p));let u=new Vt;function b(p){l.includes(p)?r(3,l=l.filter(C=>C!==p)):l.push(p),r(3,l)}window.off_to_art_callback=function(p){b(p)};function g(){let p=0,C=200,N=100;for(const A of l){let O=d.off_to_def.results.bindings.find(T=>ue(T.off_artifact.value)==A);O&&(jt(v,c,_,"artifactSelectorNode",O.off_artifact_label.value,"d3f:"+ue(O.off_artifact.value),_.data.sequence,_.position.x+p*C,_.position.y+N,182,63,O.off_artifact_rel_label.value,!0),p+=1)}v.set(s),c.set(t),h&&h.close(),r(3,l=[])}function w(p){yt.call(this,a,p)}function R(p){Ge[p?"unshift":"push"](()=>{h=p,r(2,h)})}const S=()=>r(0,i=!1),D=()=>{h.close(),r(3,l=[])};return a.$$set=p=>{"show_artifacts_modal"in p&&r(0,i=p.show_artifacts_modal),"parent_node"in p&&r(8,_=p.parent_node),"data"in p&&r(1,d=p.data),"$$scope"in p&&r(14,o=p.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&i&&h&&(h.showModal(),u.reset()),a.$$.dirty&5&&!i&&h&&(h.close(),u.reset())},r(3,l=[]),[i,d,h,l,v,c,u,g,_,n,w,R,S,D,o]}class Ju extends nt{constructor(e){super(),ot(this,e,Ku,Gu,xe,{show_artifacts_modal:0,parent_node:8,data:1})}}function qa(a,e,r){const l=a.slice();return l[23]=e[r],l}const Yu=a=>({}),Ua=a=>({});function Xu(a){let e;return{c(){e=k("No related artifacts in this release.")},l(r){e=y(r,"No related artifacts in this release.")},m(r,l){m(r,e,l)},p:we,i:we,o:we,d(r){r&&f(e)}}}function Zu(a){let e,r,l,t,s,n,o,i,_,d;function h(c){a[14](c)}let v={toggles:a[4]};return a[3]!==void 0&&(v.selected=a[3]),r=new gs({props:v}),Ge.push(()=>pt(r,"selected",h)),_=new Lt({props:{$$slots:{default:[tc]},$$scope:{ctx:a}}}),{c(){e=Y("div"),Oe(r.$$.fragment),t=re(),s=Y("br"),n=re(),o=Y("br"),i=re(),Oe(_.$$.fragment),this.h()},l(c){e=X(c,"DIV",{class:!0});var u=me(e);Ie(r.$$.fragment,u),u.forEach(f),t=le(c),s=X(c,"BR",{}),n=le(c),o=X(c,"BR",{}),i=le(c),Ie(_.$$.fragment,c),this.h()},h(){te(e,"class","center shrink")},m(c,u){m(c,e,u),Fe(r,e,null),m(c,t,u),m(c,s,u),m(c,n,u),m(c,o,u),m(c,i,u),Fe(_,c,u),d=!0},p(c,u){const b={};u&16&&(b.toggles=c[4]),!l&&u&8&&(l=!0,b.selected=c[3],mt(()=>l=!1)),r.$set(b);const g={};u&262186&&(g.$$scope={dirty:u,ctx:c}),_.$set(g)},i(c){d||(ie(r.$$.fragment,c),ie(_.$$.fragment,c),d=!0)},o(c){de(r.$$.fragment,c),de(_.$$.fragment,c),d=!1},d(c){c&&(f(e),f(t),f(s),f(n),f(o),f(i)),Te(r),Te(_,c)}}}function Wu(a){let e,r="Loading...";return{c(){e=Y("div"),e.textContent=r},l(l){e=X(l,"DIV",{"data-svelte-h":!0}),Ne(e)!=="svelte-194gxkm"&&(e.textContent=r)},m(l,t){m(l,e,t)},p:we,i:we,o:we,d(l){l&&f(e)}}}function $a(a){let e=a[8].edge_is_unique(a[23].def_tech_label.value,a[23].def_artifact_rel_label.value,a[23].off_artifact_label.value),r,l=e&&Va(a);return{c(){l&&l.c(),r=be()},l(t){l&&l.l(t),r=be()},m(t,s){l&&l.m(t,s),m(t,r,s)},p(t,s){s&2&&(e=t[8].edge_is_unique(t[23].def_tech_label.value,t[23].def_artifact_rel_label.value,t[23].off_artifact_label.value)),e?l?l.p(t,s):(l=Va(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&f(r),l&&l.d(t)}}}function Va(a){let e=!a[3].includes(a[23].def_tactic_label.value),r,l=e&&za(a);return{c(){l&&l.c(),r=be()},l(t){l&&l.l(t),r=be()},m(t,s){l&&l.m(t,s),m(t,r,s)},p(t,s){s&10&&(e=!t[3].includes(t[23].def_tactic_label.value)),e?l?l.p(t,s):(l=za(t),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(t){t&&f(r),l&&l.d(t)}}}function za(a){let e=ue(a[23].def_tech.value)+"",r,l,t=a[23].def_tech_label.value+"",s,n,o="-->",i,_,d=a[23].def_artifact_rel_label.value.replace(/ /g,"")+"",h,v,c=ue(a[23].off_artifact.value)+"",u,b,g=a[23].off_artifact_label.value+"",w,R,S=a[8].edge_is_unique(a[23].def_tech.value,a[23].def_tactic_label.value,a[23].off_tech_id.value),D,p,C,N=a[23].off_artifact_label.value.replace(/ /g,"")+"",A,O,T=ue(a[23].def_tech.value)+"",E,I,P=a[23].def_tech_label.value.replace(/ |\./g,"")+"",F,K,x=S&&Ma(a);function se(V,U){return U&34&&(p=null),p==null&&(p=!!V[5].includes(ue(V[23].def_tech.value))),p?ec:xu}let B=se(a,-1),H=B(a);return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),i=k(o),_=k(`
                | `),h=k(d),v=k(" | "),u=k(c),b=k('["'),w=k(g),R=k(`"];

                `),x&&x.c(),D=re(),H.c(),C=k(` 
                class `),A=k(N),O=k(` ArtifactNode;
                click `),E=k(T),I=k(` href "javascript:off_to_def_callback('`),F=k(P),K=k(`')";`)},l(V){r=y(V,e),l=y(V,'["'),s=y(V,t),n=y(V,'"] '),i=y(V,o),_=y(V,`
                | `),h=y(V,d),v=y(V," | "),u=y(V,c),b=y(V,'["'),w=y(V,g),R=y(V,`"];

                `),x&&x.l(V),D=le(V),H.l(V),C=y(V,` 
                class `),A=y(V,N),O=y(V,` ArtifactNode;
                click `),E=y(V,T),I=y(V,` href "javascript:off_to_def_callback('`),F=y(V,P),K=y(V,`')";`)},m(V,U){m(V,r,U),m(V,l,U),m(V,s,U),m(V,n,U),m(V,i,U),m(V,_,U),m(V,h,U),m(V,v,U),m(V,u,U),m(V,b,U),m(V,w,U),m(V,R,U),x&&x.m(V,U),m(V,D,U),H.m(V,U),m(V,C,U),m(V,A,U),m(V,O,U),m(V,E,U),m(V,I,U),m(V,F,U),m(V,K,U)},p(V,U){U&2&&e!==(e=ue(V[23].def_tech.value)+"")&&G(r,e),U&2&&t!==(t=V[23].def_tech_label.value+"")&&G(s,t),U&2&&d!==(d=V[23].def_artifact_rel_label.value.replace(/ /g,"")+"")&&G(h,d),U&2&&c!==(c=ue(V[23].off_artifact.value)+"")&&G(u,c),U&2&&g!==(g=V[23].off_artifact_label.value+"")&&G(w,g),U&2&&(S=V[8].edge_is_unique(V[23].def_tech.value,V[23].def_tactic_label.value,V[23].off_tech_id.value)),S?x?x.p(V,U):(x=Ma(V),x.c(),x.m(D.parentNode,D)):x&&(x.d(1),x=null),B===(B=se(V,U))&&H?H.p(V,U):(H.d(1),H=B(V),H&&(H.c(),H.m(C.parentNode,C))),U&2&&N!==(N=V[23].off_artifact_label.value.replace(/ /g,"")+"")&&G(A,N),U&2&&T!==(T=ue(V[23].def_tech.value)+"")&&G(E,T),U&2&&P!==(P=V[23].def_tech_label.value.replace(/ |\./g,"")+"")&&G(F,P)},d(V){V&&(f(r),f(l),f(s),f(n),f(i),f(_),f(h),f(v),f(u),f(b),f(w),f(R),f(D),f(C),f(A),f(O),f(E),f(I),f(F),f(K)),x&&x.d(V),H.d(V)}}}function Ma(a){let e=ue(a[23].def_tech.value)+"",r,l,t=a[23].def_tech_label.value+"",s,n,o="-.->",i,_,d="May "+a[23].def_tactic_label.value,h,v,c=a[23].off_tech_id.value.replace(/ |\./g,"")+"",u,b,g=a[23].off_tech_label.value+"",w,R;return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),i=k(o),_=k(`
                  | `),h=k(d),v=k(" | "),u=k(c),b=k('["'),w=k(g),R=k('"] ;')},l(S){r=y(S,e),l=y(S,'["'),s=y(S,t),n=y(S,'"] '),i=y(S,o),_=y(S,`
                  | `),h=y(S,d),v=y(S," | "),u=y(S,c),b=y(S,'["'),w=y(S,g),R=y(S,'"] ;')},m(S,D){m(S,r,D),m(S,l,D),m(S,s,D),m(S,n,D),m(S,i,D),m(S,_,D),m(S,h,D),m(S,v,D),m(S,u,D),m(S,b,D),m(S,w,D),m(S,R,D)},p(S,D){D&2&&e!==(e=ue(S[23].def_tech.value)+"")&&G(r,e),D&2&&t!==(t=S[23].def_tech_label.value+"")&&G(s,t),D&2&&d!==(d="May "+S[23].def_tactic_label.value)&&G(h,d),D&2&&c!==(c=S[23].off_tech_id.value.replace(/ |\./g,"")+"")&&G(u,c),D&2&&g!==(g=S[23].off_tech_label.value+"")&&G(w,g)},d(S){S&&(f(r),f(l),f(s),f(n),f(i),f(_),f(h),f(v),f(u),f(b),f(w),f(R))}}}function xu(a){let e,r=ue(a[23].def_tech.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" DefensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," DefensiveTechniqueNode;")},m(s,n){m(s,e,n),m(s,l,n),m(s,t,n)},p(s,n){n&2&&r!==(r=ue(s[23].def_tech.value)+"")&&G(l,r)},d(s){s&&(f(e),f(l),f(t))}}}function ec(a){let e,r=ue(a[23].def_tech.value)+"",l,t;return{c(){e=k("class "),l=k(r),t=k(" SelectedDefensiveTechniqueNode;")},l(s){e=y(s,"class "),l=y(s,r),t=y(s," SelectedDefensiveTechniqueNode;")},m(s,n){m(s,e,n),m(s,l,n),m(s,t,n)},p(s,n){n&2&&r!==(r=ue(s[23].def_tech.value)+"")&&G(l,r)},d(s){s&&(f(e),f(l),f(t))}}}function Ba(a){let e=a[23].off_tech_id.value.replace(/ |\./g,"")+"",r,l,t=a[23].off_tech_label.value+"",s,n,o="-->",i,_,d=a[23].off_artifact_rel_label.value.replace(/ /g,"")+"",h,v,c=ue(a[23].off_artifact.value)+"",u,b,g=a[23].off_artifact_label.value+"",w,R,S=a[23].off_tech_id.value.replace(/ |\./g,"")+"",D,p,C=ue(a[23].off_artifact.value)+"",N,A,O=ue(a[23].off_artifact.value)+"",T,E,I=ue(a[23].off_artifact.value)+"",P,F,K=a[23].off_tech_id.value.replace(/ |\./g,"")+"",x,se,B=fr(a[23].off_tech_id.value)+"",H,V,U=ue(a[23].off_artifact.value)+"",J,L,Q=ue(a[23].off_artifact.value)+"",ke,Pe;return{c(){r=k(e),l=k('["'),s=k(t),n=k('"] '),i=k(o),_=k(" |"),h=k(d),v=k("| "),u=k(c),b=k('["'),w=k(g),R=k('"]; class '),D=k(S),p=k(` OffensiveTechniqueNode;
            class `),N=k(C),A=k(" ArtifactNode; click "),T=k(O),E=k(' href "/dao/artifact/d3f:'),P=k(I),F=k(`";
            click `),x=k(K),se=k(' href "'),H=k(B),V=k('"; click '),J=k(U),L=k(' href "/dao/artifact/d3f:'),ke=k(Q),Pe=k('";')},l(ne){r=y(ne,e),l=y(ne,'["'),s=y(ne,t),n=y(ne,'"] '),i=y(ne,o),_=y(ne," |"),h=y(ne,d),v=y(ne,"| "),u=y(ne,c),b=y(ne,'["'),w=y(ne,g),R=y(ne,'"]; class '),D=y(ne,S),p=y(ne,` OffensiveTechniqueNode;
            class `),N=y(ne,C),A=y(ne," ArtifactNode; click "),T=y(ne,O),E=y(ne,' href "/dao/artifact/d3f:'),P=y(ne,I),F=y(ne,`";
            click `),x=y(ne,K),se=y(ne,' href "'),H=y(ne,B),V=y(ne,'"; click '),J=y(ne,U),L=y(ne,' href "/dao/artifact/d3f:'),ke=y(ne,Q),Pe=y(ne,'";')},m(ne,_e){m(ne,r,_e),m(ne,l,_e),m(ne,s,_e),m(ne,n,_e),m(ne,i,_e),m(ne,_,_e),m(ne,h,_e),m(ne,v,_e),m(ne,u,_e),m(ne,b,_e),m(ne,w,_e),m(ne,R,_e),m(ne,D,_e),m(ne,p,_e),m(ne,N,_e),m(ne,A,_e),m(ne,T,_e),m(ne,E,_e),m(ne,P,_e),m(ne,F,_e),m(ne,x,_e),m(ne,se,_e),m(ne,H,_e),m(ne,V,_e),m(ne,J,_e),m(ne,L,_e),m(ne,ke,_e),m(ne,Pe,_e)},p(ne,_e){_e&2&&e!==(e=ne[23].off_tech_id.value.replace(/ |\./g,"")+"")&&G(r,e),_e&2&&t!==(t=ne[23].off_tech_label.value+"")&&G(s,t),_e&2&&d!==(d=ne[23].off_artifact_rel_label.value.replace(/ /g,"")+"")&&G(h,d),_e&2&&c!==(c=ue(ne[23].off_artifact.value)+"")&&G(u,c),_e&2&&g!==(g=ne[23].off_artifact_label.value+"")&&G(w,g),_e&2&&S!==(S=ne[23].off_tech_id.value.replace(/ |\./g,"")+"")&&G(D,S),_e&2&&C!==(C=ue(ne[23].off_artifact.value)+"")&&G(N,C),_e&2&&O!==(O=ue(ne[23].off_artifact.value)+"")&&G(T,O),_e&2&&I!==(I=ue(ne[23].off_artifact.value)+"")&&G(P,I),_e&2&&K!==(K=ne[23].off_tech_id.value.replace(/ |\./g,"")+"")&&G(x,K),_e&2&&B!==(B=fr(ne[23].off_tech_id.value)+"")&&G(H,B),_e&2&&U!==(U=ue(ne[23].off_artifact.value)+"")&&G(J,U),_e&2&&Q!==(Q=ue(ne[23].off_artifact.value)+"")&&G(ke,Q)},d(ne){ne&&(f(r),f(l),f(s),f(n),f(i),f(_),f(h),f(v),f(u),f(b),f(w),f(R),f(D),f(p),f(N),f(A),f(T),f(E),f(P),f(F),f(x),f(se),f(H),f(V),f(J),f(L),f(ke),f(Pe))}}}function Ha(a){let e,r=a[8].edge_is_unique(a[23].off_tech_label.value,a[23].off_artifact_rel_label.value,a[23].off_artifact_label.value),l,t="def_tech"in a[23]&&$a(a),s=r&&Ba(a);return{c(){t&&t.c(),e=re(),s&&s.c(),l=be()},l(n){t&&t.l(n),e=le(n),s&&s.l(n),l=be()},m(n,o){t&&t.m(n,o),m(n,e,o),s&&s.m(n,o),m(n,l,o)},p(n,o){"def_tech"in n[23]?t?t.p(n,o):(t=$a(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null),o&2&&(r=n[8].edge_is_unique(n[23].off_tech_label.value,n[23].off_artifact_rel_label.value,n[23].off_artifact_label.value)),r?s?s.p(n,o):(s=Ba(n),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null)},d(n){n&&(f(e),f(l)),t&&t.d(n),s&&s.d(n)}}}function tc(a){let e,r,l=Ce(a[1].off_to_def.results.bindings),t=[];for(let s=0;s<l.length;s+=1)t[s]=Ha(qa(a,l,s));return{c(){e=k(`graph LR;
        `);for(let s=0;s<t.length;s+=1)t[s].c();r=be()},l(s){e=y(s,`graph LR;
        `);for(let n=0;n<t.length;n+=1)t[n].l(s);r=be()},m(s,n){m(s,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,n);m(s,r,n)},p(s,n){if(n&298){l=Ce(s[1].off_to_def.results.bindings);let o;for(o=0;o<l.length;o+=1){const i=qa(s,l,o);t[o]?t[o].p(i,n):(t[o]=Ha(i),t[o].c(),t[o].m(r.parentNode,r))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(s){s&&(f(e),f(r)),Ze(t,s)}}}function rc(a){let e,r,l,t,s,n,o,i,_,d,h,v,c,u=a[5].length+"",b,g,w,R,S;const D=a[12].header,p=tt(D,a,a[18],Ua),C=a[12].default,N=tt(C,a,a[18],null),A=[Wu,Zu,Xu],O=[];function T(E,I){return E[1]?E[1].off_to_def.results.bindings.length>0?1:2:0}return o=T(a),i=O[o]=A[o](a),{c(){e=Y("dialog"),r=Y("div"),p&&p.c(),l=k(`
    Select Related Artifacts To Insert
    `),N&&N.c(),t=re(),s=Y("hr"),n=re(),i.c(),_=re(),d=Y("hr"),h=re(),v=Y("button"),c=k("Insert ("),b=k(u),g=k(")"),this.h()},l(E){e=X(E,"DIALOG",{class:!0});var I=me(e);r=X(I,"DIV",{class:!0});var P=me(r);p&&p.l(P),l=y(P,`
    Select Related Artifacts To Insert
    `),N&&N.l(P),t=le(P),s=X(P,"HR",{}),n=le(P),i.l(P),_=le(P),d=X(P,"HR",{}),h=le(P),v=X(P,"BUTTON",{class:!0});var F=me(v);c=y(F,"Insert ("),b=y(F,u),g=y(F,")"),F.forEach(f),P.forEach(f),I.forEach(f),this.h()},h(){v.autofocus=!0,te(v,"class","svelte-x0618k"),te(r,"class","svelte-x0618k"),te(e,"class","svelte-x0618k")},m(E,I){m(E,e,I),$(e,r),p&&p.m(r,null),$(r,l),N&&N.m(r,null),$(r,t),$(r,s),$(r,n),O[o].m(r,null),$(r,_),$(r,d),$(r,h),$(r,v),$(v,c),$(v,b),$(v,g),a[15](e),w=!0,v.focus(),R||(S=[pe(v,"click",a[9]),pe(r,"click",kt(a[13])),pe(e,"close",a[16]),pe(e,"click",At(a[17]))],R=!0)},p(E,[I]){p&&p.p&&(!w||I&262144)&&rt(p,D,E,E[18],w?at(D,E[18],I,Yu):lt(E[18]),Ua),N&&N.p&&(!w||I&262144)&&rt(N,C,E,E[18],w?at(C,E[18],I,null):lt(E[18]),null);let P=o;o=T(E),o===P?O[o].p(E,I):(ct(),de(O[P],1,1,()=>{O[P]=null}),dt(),i=O[o],i?i.p(E,I):(i=O[o]=A[o](E),i.c()),ie(i,1),i.m(r,_)),(!w||I&32)&&u!==(u=E[5].length+"")&&G(b,u)},i(E){w||(ie(p,E),ie(N,E),ie(i),w=!0)},o(E){de(p,E),de(N,E),de(i),w=!1},d(E){E&&f(e),p&&p.d(E),N&&N.d(E),O[o].d(),a[15](null),R=!1,_t(S)}}}function lc(a,e,r){let l,t,s,{$$slots:n={},$$scope:o}=e,{show_defend_modal:i}=e,{parent_node:_}=e,{data:d}=e,h;const v=Ot();Ke(a,v,T=>r(20,s=T));const c=It();Ke(a,c,T=>r(19,t=T));let u=new Vt;function b(T){l.includes(T)?r(5,l=l.filter(E=>E!==T)):l.push(T),r(5,l)}window.off_to_def_callback=function(T){b(T)};function g(){let T=0,E=200,I=100;for(const P of l){let F=d.off_to_def.results.bindings.find(K=>"def_tech"in K&&ue(K.def_tech.value)==P);F&&(jt(v,c,_,"countermeasureSelectorNode",F.def_tech_label.value,"d3f:"+ue(F.def_tech.value),_.data.sequence,_.position.x+T*E,_.position.y+I,182,63,"May "+F.def_tactic_label.value,!1),T+=1)}v.set(s),c.set(t),h&&h.close(),r(5,l=[])}let w=new Set,R=[],S=[];ps(R,S)&&(S=[]);function D(T){for(const E of l){let I=d.off_to_def.results.bindings.find(P=>"def_tech"in P&&ue(P.def_tech.value)==E);T.includes(I.def_tactic_label.value)&&r(5,l=l.filter(P=>P!==E))}r(5,l)}function p(T){yt.call(this,a,T)}function C(T){S=T,r(3,S)}function N(T){Ge[T?"unshift":"push"](()=>{h=T,r(2,h)})}const A=()=>r(0,i=!1),O=()=>{h.close(),r(5,l=[])};return a.$$set=T=>{"show_defend_modal"in T&&r(0,i=T.show_defend_modal),"parent_node"in T&&r(10,_=T.parent_node),"data"in T&&r(1,d=T.data),"$$scope"in T&&r(18,o=T.$$scope)},a.$$.update=()=>{a.$$.dirty&5&&i&&h&&(h.showModal(),u.reset()),a.$$.dirty&5&&!i&&h&&(h.close(),u.reset()),a.$$.dirty&2050&&d&&(d.off_to_def.results.bindings.forEach(T=>{"def_tactic_label"in T&&w.add(T.def_tactic_label.value)}),r(11,w),r(1,d)),a.$$.dirty&2048&&r(4,R=Array.from(w).sort(function(T,E){return ur[T]-ur[E]})),a.$$.dirty&8&&D(S),a.$$.dirty&8&&u.reset(S)},r(5,l=[]),[i,d,h,S,R,l,v,c,u,g,_,w,n,p,C,N,A,O,o]}class ac extends nt{constructor(e){super(),ot(this,e,lc,rc,xe,{show_defend_modal:0,parent_node:10,data:1})}}function sc(a){let e,r="artifacts",l,t,s,n,o,i="defensive techniques",_,d,h,v,c,u;function b(S){a[6](S)}let g={parent_node:a[0],data:a[1]};a[3]!==void 0&&(g.show_artifacts_modal=a[3]),t=new Ju({props:g}),Ge.push(()=>pt(t,"show_artifacts_modal",b));function w(S){a[8](S)}let R={parent_node:a[0],data:a[1]};return a[2]!==void 0&&(R.show_defend_modal=a[2]),d=new ac({props:R}),Ge.push(()=>pt(d,"show_defend_modal",w)),{c(){e=Y("button"),e.textContent=r,l=re(),Oe(t.$$.fragment),n=re(),o=Y("button"),o.textContent=i,_=re(),Oe(d.$$.fragment),this.h()},l(S){e=X(S,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(e)!=="svelte-1t14z6m"&&(e.textContent=r),l=le(S),Ie(t.$$.fragment,S),n=le(S),o=X(S,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(o)!=="svelte-o3we0s"&&(o.textContent=i),_=le(S),Ie(d.$$.fragment,S),this.h()},h(){te(e,"class","svelte-1x5dcdh"),te(o,"class","svelte-1x5dcdh")},m(S,D){m(S,e,D),m(S,l,D),Fe(t,S,D),m(S,n,D),m(S,o,D),m(S,_,D),Fe(d,S,D),v=!0,c||(u=[pe(e,"click",a[5]),pe(o,"click",a[7])],c=!0)},p(S,[D]){const p={};D&1&&(p.parent_node=S[0]),D&2&&(p.data=S[1]),!s&&D&8&&(s=!0,p.show_artifacts_modal=S[3],mt(()=>s=!1)),t.$set(p);const C={};D&1&&(C.parent_node=S[0]),D&2&&(C.data=S[1]),!h&&D&4&&(h=!0,C.show_defend_modal=S[2],mt(()=>h=!1)),d.$set(C)},i(S){v||(ie(t.$$.fragment,S),ie(d.$$.fragment,S),v=!0)},o(S){de(t.$$.fragment,S),de(d.$$.fragment,S),v=!1},d(S){S&&(f(e),f(l),f(n),f(o),f(_)),Te(t,S),Te(d,S),c=!1,_t(u)}}}function nc(a,e,r){let l,t;var s=this&&this.__awaiter||function(u,b,g,w){function R(S){return S instanceof g?S:new g(function(D){D(S)})}return new(g||(g=Promise))(function(S,D){function p(A){try{N(w.next(A))}catch(O){D(O)}}function C(A){try{N(w.throw(A))}catch(O){D(O)}}function N(A){A.done?S(A.value):R(A.value).then(p,C)}N((w=w.apply(u,b||[])).next())})};let{node:n}=e,o;function i(u){alert(u),r(3,l=!1),r(2,t=!1)}function _(u){return s(this,void 0,void 0,function*(){if(u.data.d3f_class&&u.data.d3f_class.includes("d3f:")){const b=u.data.d3f_class,g=yield fetch(`/api/offensive-technique/attack/${b.replace("d3f:","")}.json`),w=yield g.json();if(g.status!=200||w.description["@graph"].length==0)i(`Offensive Technique: "${b.replace("d3f:","")}" not found in ontology`);else return w}else i("Please specify a D3FEND Class for this node to enable inferential mapping")})}const d=async()=>{r(1,o=null),r(3,l=!0),r(1,o=await _(n))};function h(u){l=u,r(3,l)}const v=async()=>{r(1,o=null),r(2,t=!0),r(1,o=await _(n))};function c(u){t=u,r(2,t)}return a.$$set=u=>{"node"in u&&r(0,n=u.node)},r(3,l=!1),r(2,t=!1),[n,o,t,l,_,d,h,v,c]}class oc extends nt{constructor(e){super(),ot(this,e,nc,sc,xe,{node:0})}}function Qa(a){let e,r;return e=new oc({props:{node:a[1]}}),{c(){Oe(e.$$.fragment)},l(l){Ie(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t&2&&(s.node=l[1]),e.$set(s)},i(l){r||(ie(e.$$.fragment,l),r=!0)},o(l){de(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function Ga(a){let e,r;return e=new Uu({props:{node:a[1]}}),{c(){Oe(e.$$.fragment)},l(l){Ie(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t&2&&(s.node=l[1]),e.$set(s)},i(l){r||(ie(e.$$.fragment,l),r=!0)},o(l){de(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function Ka(a){let e,r;return e=new vu({props:{node:a[1]}}),{c(){Oe(e.$$.fragment)},l(l){Ie(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t&2&&(s.node=l[1]),e.$set(s)},i(l){r||(ie(e.$$.fragment,l),r=!0)},o(l){de(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function ic(a){let e,r,l,t,s,n,o,i,_,d,h="duplicate",v,c,u="delete",b,g,w,R,S=a[1]&&a[1].type=="attackSelectorNode"&&Qa(a),D=a[1]&&a[1].type=="countermeasureSelectorNode"&&Ga(a),p=a[1]&&a[1].type=="artifactSelectorNode"&&Ka(a);return{c(){e=Y("div"),r=Y("p"),l=Y("small"),t=k("node: "),s=k(a[0]),n=re(),S&&S.c(),o=re(),D&&D.c(),i=re(),p&&p.c(),_=re(),d=Y("button"),d.textContent=h,v=re(),c=Y("button"),c.textContent=u,this.h()},l(C){e=X(C,"DIV",{style:!0,class:!0});var N=me(e);r=X(N,"P",{style:!0});var A=me(r);l=X(A,"SMALL",{});var O=me(l);t=y(O,"node: "),s=y(O,a[0]),O.forEach(f),A.forEach(f),n=le(N),S&&S.l(N),o=le(N),D&&D.l(N),i=le(N),p&&p.l(N),_=le(N),d=X(N,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(d)!=="svelte-1spbqw1"&&(d.textContent=h),v=le(N),c=X(N,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(c)!=="svelte-1pyou7z"&&(c.textContent=u),N.forEach(f),this.h()},h(){Qe(r,"margin","0.5em"),te(d,"class","svelte-1o17oqa"),te(c,"class","svelte-1o17oqa"),te(e,"style",b=a[2]()),te(e,"class","context-menu svelte-1o17oqa")},m(C,N){m(C,e,N),$(e,r),$(r,l),$(l,t),$(l,s),$(e,n),S&&S.m(e,null),$(e,o),D&&D.m(e,null),$(e,i),p&&p.m(e,null),$(e,_),$(e,d),$(e,v),$(e,c),g=!0,w||(R=[pe(d,"click",a[5]),pe(c,"click",a[6])],w=!0)},p(C,[N]){(!g||N&1)&&G(s,C[0]),C[1]&&C[1].type=="attackSelectorNode"?S?(S.p(C,N),N&2&&ie(S,1)):(S=Qa(C),S.c(),ie(S,1),S.m(e,o)):S&&(ct(),de(S,1,1,()=>{S=null}),dt()),C[1]&&C[1].type=="countermeasureSelectorNode"?D?(D.p(C,N),N&2&&ie(D,1)):(D=Ga(C),D.c(),ie(D,1),D.m(e,i)):D&&(ct(),de(D,1,1,()=>{D=null}),dt()),C[1]&&C[1].type=="artifactSelectorNode"?p?(p.p(C,N),N&2&&ie(p,1)):(p=Ka(C),p.c(),ie(p,1),p.m(e,_)):p&&(ct(),de(p,1,1,()=>{p=null}),dt()),(!g||N&4&&b!==(b=C[2]()))&&te(e,"style",b)},i(C){g||(ie(S),ie(D),ie(p),g=!0)},o(C){de(S),de(D),de(p),g=!1},d(C){C&&f(e),S&&S.d(),D&&D.d(),p&&p.d(),w=!1,_t(R)}}}function fc(a,e,r){let l,t,s,n,{id:o}=e,{top:i}=e,{left:_}=e,{right:d}=e,{bottom:h}=e;const v=Ot();Ke(a,v,g=>r(11,n=g));const c=It();Ke(a,c,g=>r(12,s=g));function u(){const g=n.find(w=>w.id===o);g&&(console.log(g),n.push(Object.assign(Object.assign({},g),{id:`${o}-copy${Math.random()}`.slice(-24),position:{x:g.position.x,y:g.position.y+50}}))),v.set(n)}function b(){al(v,n=n.filter(g=>g.id!==o),n),al(c,s=s.filter(g=>g.source!==o&&g.target!==o),s),v.set(n),c.set(s)}return a.$$set=g=>{"id"in g&&r(0,o=g.id),"top"in g&&r(7,i=g.top),"left"in g&&r(8,_=g.left),"right"in g&&r(9,d=g.right),"bottom"in g&&r(10,h=g.bottom)},a.$$.update=()=>{a.$$.dirty&2049&&r(1,l=n.find(g=>g.id===o)),a.$$.dirty&1920&&r(2,t=()=>{let g="";return i&&(g+=`top:${i}px;`),h&&(g+=`bottom:${h}px;`),_&&(g+=`left:${_}px;`),d&&(g+=`right:${d}px;`),g})},[o,l,t,v,c,u,b,i,_,d,h,n]}class uc extends nt{constructor(e){super(),ot(this,e,fc,ic,xe,{id:0,top:7,left:8,right:9,bottom:10})}}function Ja(a,e,r){const l=a.slice();return l[12]=e[r],l}function Ya(a){let e,r,l,t,s,n,o,i,_,d,h,v,c;const u=a[8].default,b=tt(u,a,a[7],null);let g=Ce(a[3]),w=[];for(let R=0;R<g.length;R+=1)w[R]=Xa(Ja(a,g,R));return{c(){e=Y("div"),r=Y("div"),l=Y("h2"),t=k(a[1]),s=re(),n=Y("p"),o=k(a[2]),i=re(),b&&b.c(),_=re(),d=Y("div");for(let R=0;R<w.length;R+=1)w[R].c();this.h()},l(R){e=X(R,"DIV",{class:!0});var S=me(e);r=X(S,"DIV",{class:!0});var D=me(r);l=X(D,"H2",{});var p=me(l);t=y(p,a[1]),p.forEach(f),s=le(D),n=X(D,"P",{});var C=me(n);o=y(C,a[2]),C.forEach(f),i=le(D),b&&b.l(D),_=le(D),d=X(D,"DIV",{class:!0});var N=me(d);for(let A=0;A<w.length;A+=1)w[A].l(N);N.forEach(f),D.forEach(f),S.forEach(f),this.h()},h(){te(d,"class","options svelte-zbcx3u"),te(r,"class","modal-content center text-center svelte-zbcx3u"),te(e,"class","modal-overlay svelte-zbcx3u")},m(R,S){m(R,e,S),$(e,r),$(r,l),$(l,t),$(r,s),$(r,n),$(n,o),$(r,i),b&&b.m(r,null),$(r,_),$(r,d);for(let D=0;D<w.length;D+=1)w[D]&&w[D].m(d,null);h=!0,v||(c=[pe(r,"click",kt(a[9])),pe(e,"click",a[4])],v=!0)},p(R,S){if((!h||S&2)&&G(t,R[1]),(!h||S&4)&&G(o,R[2]),b&&b.p&&(!h||S&128)&&rt(b,u,R,R[7],h?at(u,R[7],S,null):lt(R[7]),null),S&40){g=Ce(R[3]);let D;for(D=0;D<g.length;D+=1){const p=Ja(R,g,D);w[D]?w[D].p(p,S):(w[D]=Xa(p),w[D].c(),w[D].m(d,null))}for(;D<w.length;D+=1)w[D].d(1);w.length=g.length}},i(R){h||(ie(b,R),h=!0)},o(R){de(b,R),h=!1},d(R){R&&f(e),b&&b.d(R),Ze(w,R),v=!1,_t(c)}}}function Xa(a){let e,r=a[12].label+"",l,t,s,n;function o(){return a[10](a[12])}return{c(){e=Y("button"),l=k(r),t=re(),this.h()},l(i){e=X(i,"BUTTON",{class:!0});var _=me(e);l=y(_,r),t=le(_),_.forEach(f),this.h()},h(){te(e,"class","svelte-zbcx3u")},m(i,_){m(i,e,_),$(e,l),$(e,t),s||(n=pe(e,"click",o),s=!0)},p(i,_){a=i,_&8&&r!==(r=a[12].label+"")&&G(l,r)},d(i){i&&f(e),s=!1,n()}}}function cc(a){let e,r,l=a[0]&&Ya(a);return{c(){l&&l.c(),e=be()},l(t){l&&l.l(t),e=be()},m(t,s){l&&l.m(t,s),m(t,e,s),r=!0},p(t,[s]){t[0]?l?(l.p(t,s),s&1&&ie(l,1)):(l=Ya(t),l.c(),ie(l,1),l.m(e.parentNode,e)):l&&(ct(),de(l,1,1,()=>{l=null}),dt())},i(t){r||(ie(l),r=!0)},o(t){de(l),r=!1},d(t){t&&f(e),l&&l.d(t)}}}function dc(a,e,r){let{$$slots:l={},$$scope:t}=e,{is_open:s=!1}=e,{title:n=""}=e,{content:o=""}=e,{imageSrc:i=""}=e,{options:_=[]}=e;const d=mr();function h(){r(0,s=!1)}function v(b){d("optionSelected",b),h()}function c(b){yt.call(this,a,b)}const u=b=>v(b);return a.$$set=b=>{"is_open"in b&&r(0,s=b.is_open),"title"in b&&r(1,n=b.title),"content"in b&&r(2,o=b.content),"imageSrc"in b&&r(6,i=b.imageSrc),"options"in b&&r(3,_=b.options),"$$scope"in b&&r(7,t=b.$$scope)},[s,n,o,_,h,v,i,t,l,c,u]}class Za extends nt{constructor(e){super(),ot(this,e,dc,cc,xe,{is_open:0,title:1,content:2,imageSrc:6,options:3})}}function Wa(a,e,r){const l=a.slice();return l[11]=e[r],l}function xa(a){let e,r,l,t,s,n,o,i,_,d,h,v,c;const u=a[7].default,b=tt(u,a,a[6],null);let g=Ce(a[3]),w=[];for(let R=0;R<g.length;R+=1)w[R]=es(Wa(a,g,R));return{c(){e=Y("div"),r=Y("div"),l=Y("h2"),t=k(a[1]),s=re(),n=Y("p"),o=k(a[2]),i=re(),b&&b.c(),_=re(),d=Y("div");for(let R=0;R<w.length;R+=1)w[R].c();this.h()},l(R){e=X(R,"DIV",{class:!0});var S=me(e);r=X(S,"DIV",{class:!0});var D=me(r);l=X(D,"H2",{});var p=me(l);t=y(p,a[1]),p.forEach(f),s=le(D),n=X(D,"P",{});var C=me(n);o=y(C,a[2]),C.forEach(f),i=le(D),b&&b.l(D),_=le(D),d=X(D,"DIV",{class:!0});var N=me(d);for(let A=0;A<w.length;A+=1)w[A].l(N);N.forEach(f),D.forEach(f),S.forEach(f),this.h()},h(){te(d,"class","options svelte-2iwk9m"),te(r,"class","modal-content center text-center svelte-2iwk9m"),te(e,"class","modal-overlay svelte-2iwk9m")},m(R,S){m(R,e,S),$(e,r),$(r,l),$(l,t),$(r,s),$(r,n),$(n,o),$(r,i),b&&b.m(r,null),$(r,_),$(r,d);for(let D=0;D<w.length;D+=1)w[D]&&w[D].m(d,null);h=!0,v||(c=[pe(r,"click",kt(a[8])),pe(e,"click",a[4])],v=!0)},p(R,S){if((!h||S&2)&&G(t,R[1]),(!h||S&4)&&G(o,R[2]),b&&b.p&&(!h||S&64)&&rt(b,u,R,R[6],h?at(u,R[6],S,null):lt(R[6]),null),S&40){g=Ce(R[3]);let D;for(D=0;D<g.length;D+=1){const p=Wa(R,g,D);w[D]?w[D].p(p,S):(w[D]=es(p),w[D].c(),w[D].m(d,null))}for(;D<w.length;D+=1)w[D].d(1);w.length=g.length}},i(R){h||(ie(b,R),h=!0)},o(R){de(b,R),h=!1},d(R){R&&f(e),b&&b.d(R),Ze(w,R),v=!1,_t(c)}}}function es(a){let e,r=a[11].label+"",l,t,s,n;function o(){return a[9](a[11])}return{c(){e=Y("button"),l=k(r),t=re(),this.h()},l(i){e=X(i,"BUTTON",{class:!0});var _=me(e);l=y(_,r),t=le(_),_.forEach(f),this.h()},h(){te(e,"class","svelte-2iwk9m")},m(i,_){m(i,e,_),$(e,l),$(e,t),s||(n=pe(e,"click",o),s=!0)},p(i,_){a=i,_&8&&r!==(r=a[11].label+"")&&G(l,r)},d(i){i&&f(e),s=!1,n()}}}function hc(a){let e,r,l=a[0]&&xa(a);return{c(){l&&l.c(),e=be()},l(t){l&&l.l(t),e=be()},m(t,s){l&&l.m(t,s),m(t,e,s),r=!0},p(t,[s]){t[0]?l?(l.p(t,s),s&1&&ie(l,1)):(l=xa(t),l.c(),ie(l,1),l.m(e.parentNode,e)):l&&(ct(),de(l,1,1,()=>{l=null}),dt())},i(t){r||(ie(l),r=!0)},o(t){de(l),r=!1},d(t){t&&f(e),l&&l.d(t)}}}function _c(a,e,r){let{$$slots:l={},$$scope:t}=e,{is_open:s=!1}=e,{title:n=""}=e,{content:o=""}=e,{options:i=[{label:"Cancel",value:"cancel"}]}=e;const _=mr();function d(){r(0,s=!1)}function h(u){_("model_shared",u),d()}function v(u){yt.call(this,a,u)}const c=u=>h(u);return a.$$set=u=>{"is_open"in u&&r(0,s=u.is_open),"title"in u&&r(1,n=u.title),"content"in u&&r(2,o=u.content),"options"in u&&r(3,i=u.options),"$$scope"in u&&r(6,t=u.$$scope)},[s,n,o,i,d,h,t,l,v,c]}class vc extends nt{constructor(e){super(),ot(this,e,_c,hc,xe,{is_open:0,title:1,content:2,options:3})}}function mc(a){let e,r="";return{c(){e=Y("icon"),e.textContent=r,this.h()},l(l){e=X(l,"ICON",{title:!0,"data-svelte-h":!0}),Ne(e)!=="svelte-10dwkvf"&&(e.textContent=r),this.h()},h(){te(e,"title","Full Screen Mode")},m(l,t){m(l,e,t)},d(l){l&&f(e)}}}function pc(a){let e,r=" Exit Fullscreen";return{c(){e=Y("icon"),e.textContent=r,this.h()},l(l){e=X(l,"ICON",{title:!0,"data-svelte-h":!0}),Ne(e)!=="svelte-2wnxo3"&&(e.textContent=r),this.h()},h(){te(e,"title","Exit Full Screen Mode")},m(l,t){m(l,e,t)},d(l){l&&f(e)}}}function gc(a){let e,r,l,t,s,n;function o(v,c){return v[1]?pc:mc}let i=o(a),_=i(a);const d=a[4].default,h=tt(d,a,a[3],null);return{c(){e=Y("div"),r=Y("button"),_.c(),l=re(),h&&h.c(),this.h()},l(v){e=X(v,"DIV",{id:!0,class:!0});var c=me(e);r=X(c,"BUTTON",{class:!0});var u=me(r);_.l(u),u.forEach(f),l=le(c),h&&h.l(c),c.forEach(f),this.h()},h(){te(r,"class","fullscreen-toggle svelte-1jzyezl"),rr(r,"left",a[0]==="left"),rr(r,"right",a[0]==="right"),te(e,"id","fullscreen-parent"),te(e,"class","svelte-1jzyezl")},m(v,c){m(v,e,c),$(e,r),_.m(r,null),$(e,l),h&&h.m(e,null),t=!0,s||(n=pe(r,"click",a[2]),s=!0)},p(v,[c]){i!==(i=o(v))&&(_.d(1),_=i(v),_&&(_.c(),_.m(r,null))),(!t||c&1)&&rr(r,"left",v[0]==="left"),(!t||c&1)&&rr(r,"right",v[0]==="right"),h&&h.p&&(!t||c&8)&&rt(h,d,v,v[3],t?at(d,v[3],c,null):lt(v[3]),null)},i(v){t||(ie(h,v),t=!0)},o(v){de(h,v),t=!1},d(v){v&&f(e),_.d(),h&&h.d(v),s=!1,n()}}}function bc(a,e,r){let{$$slots:l={},$$scope:t}=e,{position:s="right"}=e,n=!1,o;qr(()=>(o=document.getElementById("fullscreen-parent"),document.addEventListener("fullscreenchange",i),()=>{document.removeEventListener("fullscreenchange",i)}));function i(){r(1,n=!!document.fullscreenElement)}async function _(){if(n)try{await document.exitFullscreen()}catch(d){console.error("Error attempting to exit fullscreen:",d)}else try{await o.requestFullscreen()}catch(d){console.error("Error attempting to enable fullscreen:",d)}}return a.$$set=d=>{"position"in d&&r(0,s=d.position),"$$scope"in d&&r(3,t=d.$$scope)},[s,n,_,t,l]}class Ec extends nt{constructor(e){super(),ot(this,e,bc,gc,xe,{position:0})}}function Pc(a){let e,r,l="drag these nodes to the canvas below",t,s,n,o,i="Action",_,d,h="Event",v,c,u="Attack",b,g,w="Countermeasure",R,S,D,p="Endurant",C,N,A="Artifact",O,T,E="Information",I,P,F="Agent",K,x,se,B="State",H,V,U="Vulnerability",J,L,Q="Condition",ke,Pe,ne,_e="Meta",fe,ce,Re="Note",$e,Z;return{c(){e=Y("aside"),r=Y("div"),r.textContent=l,t=re(),s=Y("div"),n=Y("div"),o=Y("div"),o.textContent=i,_=re(),d=Y("div"),d.textContent=h,v=re(),c=Y("div"),c.textContent=u,b=re(),g=Y("div"),g.textContent=w,R=re(),S=Y("div"),D=Y("div"),D.textContent=p,C=re(),N=Y("div"),N.textContent=A,O=re(),T=Y("div"),T.textContent=E,I=re(),P=Y("div"),P.textContent=F,K=re(),x=Y("div"),se=Y("div"),se.textContent=B,H=re(),V=Y("div"),V.textContent=U,J=re(),L=Y("div"),L.textContent=Q,ke=re(),Pe=Y("div"),ne=Y("div"),ne.textContent=_e,fe=re(),ce=Y("div"),ce.textContent=Re,this.h()},l(j){e=X(j,"ASIDE",{class:!0});var ae=me(e);r=X(ae,"DIV",{class:!0,"data-svelte-h":!0}),Ne(r)!=="svelte-1gs57dm"&&(r.textContent=l),t=le(ae),s=X(ae,"DIV",{class:!0});var je=me(s);n=X(je,"DIV",{class:!0});var Me=me(n);o=X(Me,"DIV",{class:!0,"data-svelte-h":!0}),Ne(o)!=="svelte-1yk6dej"&&(o.textContent=i),_=le(Me),d=X(Me,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),Ne(d)!=="svelte-1hxo6k5"&&(d.textContent=h),v=le(Me),c=X(Me,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),Ne(c)!=="svelte-1m30nhf"&&(c.textContent=u),b=le(Me),g=X(Me,"DIV",{class:!0,draggable:!0,style:!0,title:!0,"data-svelte-h":!0}),Ne(g)!=="svelte-xvztkt"&&(g.textContent=w),Me.forEach(f),R=le(je),S=X(je,"DIV",{class:!0});var Be=me(S);D=X(Be,"DIV",{class:!0,"data-svelte-h":!0}),Ne(D)!=="svelte-13fxc4g"&&(D.textContent=p),C=le(Be),N=X(Be,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Ne(N)!=="svelte-p6iki9"&&(N.textContent=A),O=le(Be),T=X(Be,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Ne(T)!=="svelte-gfucir"&&(T.textContent=E),I=le(Be),P=X(Be,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Ne(P)!=="svelte-1k1k96h"&&(P.textContent=F),Be.forEach(f),K=le(je),x=X(je,"DIV",{class:!0});var qe=me(x);se=X(qe,"DIV",{class:!0,"data-svelte-h":!0}),Ne(se)!=="svelte-82roym"&&(se.textContent=B),H=le(qe),V=X(qe,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Ne(V)!=="svelte-tj9qj"&&(V.textContent=U),J=le(qe),L=X(qe,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Ne(L)!=="svelte-1mwlumu"&&(L.textContent=Q),qe.forEach(f),ke=le(je),Pe=X(je,"DIV",{class:!0});var vt=me(Pe);ne=X(vt,"DIV",{class:!0,"data-svelte-h":!0}),Ne(ne)!=="svelte-7d6fsa"&&(ne.textContent=_e),fe=le(vt),ce=X(vt,"DIV",{class:!0,draggable:!0,style:!0,"data-svelte-h":!0}),Ne(ce)!=="svelte-18cgcvt"&&(ce.textContent=Re),vt.forEach(f),je.forEach(f),ae.forEach(f),this.h()},h(){te(r,"class","label svelte-leyc40"),te(o,"class","text-center font-medium"),te(d,"class","actionNode example-node svelte-leyc40"),te(d,"draggable",!0),Qe(d,"text-align","center"),Qe(d,"background","white"),te(d,"title","d3f:Event"),te(c,"class","attackSelectorNode example-node svelte-leyc40"),te(c,"draggable",!0),Qe(c,"text-align","center"),Qe(c,"background","#FFD0D0"),te(c,"title","d3f:OffensiveTechnique"),te(g,"class","countermeasureSelectorNode example-node svelte-leyc40"),te(g,"draggable",!0),Qe(g,"text-align","center"),Qe(g,"background","#d6eaff"),te(g,"title","d3f:DefensiveTechnique"),te(n,"class","nodes-column svelte-leyc40"),te(D,"class","text-center font-medium"),te(N,"class","artifactSelectorNode art-node example-node svelte-leyc40"),te(N,"draggable",!0),Qe(N,"text-align","center"),Qe(N,"background","#fff4dd"),te(T,"class","informationSelectorNode example-node svelte-leyc40"),te(T,"draggable",!0),Qe(T,"text-align","center"),Qe(T,"background","#e8f4ea"),te(P,"class","agentSelectorNode example-node svelte-leyc40"),te(P,"draggable",!0),Qe(P,"text-align","center"),Qe(P,"background","#f0e6e6"),te(S,"class","nodes-column svelte-leyc40"),te(se,"class","text-center font-medium"),te(V,"class","vulnerabilitySelectorNode example-node svelte-leyc40"),te(V,"draggable",!0),Qe(V,"text-align","center"),Qe(V,"background","#f9d999"),te(L,"class","conditionDefinitionNode example-node svelte-leyc40"),te(L,"draggable",!0),Qe(L,"text-align","center"),Qe(L,"background","#ece6ff"),te(x,"class","nodes-column svelte-leyc40"),te(ne,"class","text-center font-medium"),te(ce,"class","NoteNode example-node svelte-leyc40"),te(ce,"draggable",!0),Qe(ce,"text-align","center"),Qe(ce,"background","lightgoldenrodyellow"),te(Pe,"class","nodes-column svelte-leyc40"),te(s,"class","nodes-container svelte-leyc40"),te(e,"class","svelte-leyc40")},m(j,ae){m(j,e,ae),$(e,r),$(e,t),$(e,s),$(s,n),$(n,o),$(n,_),$(n,d),$(n,v),$(n,c),$(n,b),$(n,g),$(s,R),$(s,S),$(S,D),$(S,C),$(S,N),$(S,O),$(S,T),$(S,I),$(S,P),$(s,K),$(s,x),$(x,se),$(x,H),$(x,V),$(x,J),$(x,L),$(s,ke),$(s,Pe),$(Pe,ne),$(Pe,fe),$(Pe,ce),$e||(Z=[pe(d,"dragstart",a[1]),pe(c,"dragstart",a[2]),pe(g,"dragstart",a[3]),pe(N,"dragstart",a[4]),pe(T,"dragstart",a[5]),pe(P,"dragstart",a[6]),pe(V,"dragstart",a[7]),pe(L,"dragstart",a[8]),pe(ce,"dragstart",a[9])],$e=!0)},p:we,i:we,o:we,d(j){j&&f(e),$e=!1,_t(Z)}}}function wc(a){const e=(h,v)=>{if(!h.dataTransfer)return null;h.dataTransfer.setData("application/svelteflow",v),h.dataTransfer.effectAllowed="move"};return[e,h=>e(h,"eventNode"),h=>e(h,"attackSelectorNode"),h=>e(h,"countermeasureSelectorNode"),h=>e(h,"artifactSelectorNode"),h=>e(h,"informationSelectorNode"),h=>e(h,"agentSelectorNode"),h=>e(h,"vulnerabilitySelectorNode"),h=>e(h,"conditionDefinitionNode"),h=>e(h,"noteNode")]}class kc extends nt{constructor(e){super(),ot(this,e,wc,Pc,xe,{})}}function ts(a,e,r){const l=a.slice();return l[7]=e[r],l}function rs(a){let e,r=Ce(a[2]),l=[];for(let t=0;t<r.length;t+=1)l[t]=ls(ts(a,r,t));return{c(){e=Y("div");for(let t=0;t<l.length;t+=1)l[t].c();this.h()},l(t){e=X(t,"DIV",{class:!0});var s=me(e);for(let n=0;n<l.length;n+=1)l[n].l(s);s.forEach(f),this.h()},h(){te(e,"class","file-list svelte-9u10j")},m(t,s){m(t,e,s);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(e,null)},p(t,s){if(s&20){r=Ce(t[2]);let n;for(n=0;n<r.length;n+=1){const o=ts(t,r,n);l[n]?l[n].p(o,s):(l[n]=ls(o),l[n].c(),l[n].m(e,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(t){t&&f(e),Ze(l,t)}}}function ls(a){let e,r=a[7].name+"",l,t,s=a[7].nodeCount+"",n,o,i=a[7].edgeCount+"",_,d,h,v;function c(){return a[5](a[7])}return{c(){e=Y("div"),l=k(r),t=k(" ("),n=k(s),o=k(" nodes, "),_=k(i),d=k(` edges)
          `),this.h()},l(u){e=X(u,"DIV",{class:!0});var b=me(e);l=y(b,r),t=y(b," ("),n=y(b,s),o=y(b," nodes, "),_=y(b,i),d=y(b,` edges)
          `),b.forEach(f),this.h()},h(){te(e,"class","file-item svelte-9u10j")},m(u,b){m(u,e,b),$(e,l),$(e,t),$(e,n),$(e,o),$(e,_),$(e,d),h||(v=pe(e,"click",c),h=!0)},p(u,b){a=u,b&4&&r!==(r=a[7].name+"")&&G(l,r),b&4&&s!==(s=a[7].nodeCount+"")&&G(n,s),b&4&&i!==(i=a[7].edgeCount+"")&&G(_,i)},d(u){u&&f(e),h=!1,v()}}}function yc(a){let e,r,l,t,s,n,o=a[1]&&rs(a);return{c(){e=Y("div"),r=Y("button"),l=k(a[0]),t=re(),o&&o.c(),this.h()},l(i){e=X(i,"DIV",{class:!0});var _=me(e);r=X(_,"BUTTON",{class:!0});var d=me(r);l=y(d,a[0]),d.forEach(f),t=le(_),o&&o.l(_),_.forEach(f),this.h()},h(){te(r,"class","svelte-9u10j"),te(e,"class","pick-list-container svelte-9u10j")},m(i,_){m(i,e,_),$(e,r),$(r,l),$(e,t),o&&o.m(e,null),s||(n=pe(r,"click",a[3]),s=!0)},p(i,[_]){_&1&&G(l,i[0]),i[1]?o?o.p(i,_):(o=rs(i),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i:we,o:we,d(i){i&&f(e),o&&o.d(),s=!1,n()}}}async function Sc(){return await(await fetch("/cad/examples.json")).json()}function Dc(a,e,r){const l=mr();let t=!1,{selectedFile:s="Example Graphs"}=e,n=[];function o(){r(1,t=!t)}function i(d){r(0,s=d),r(1,t=!1),l("fileSelected",d)}qr(async()=>{r(2,n=await Sc())});const _=d=>i(d.name);return a.$$set=d=>{"selectedFile"in d&&r(0,s=d.selectedFile)},[s,t,n,o,i,_]}class Nc extends nt{constructor(e){super(),ot(this,e,Dc,yc,xe,{selectedFile:0})}}function as(a){let e,r,l,t,s;return{c(){e=sl("path"),r=re(),l=sl("circle"),this.h()},l(n){e=nl(n,"path",{fill:!0,"stroke-width":!0,class:!0,stroke:!0,d:!0}),me(e).forEach(f),r=le(n),l=nl(n,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),me(l).forEach(f),this.h()},h(){te(e,"fill","transparent"),te(e,"stroke-width",2.5),te(e,"class","animated"),te(e,"stroke","black"),te(e,"d",a[2]),te(l,"cx",t=a[0].tx),te(l,"cy",s=a[0].ty),te(l,"r",3),te(l,"stroke","black"),te(l,"stroke-width",1.5)},m(n,o){m(n,e,o),m(n,r,o),m(n,l,o)},p(n,o){o&4&&te(e,"d",n[2]),o&1&&t!==(t=n[0].tx)&&te(l,"cx",t),o&1&&s!==(s=n[0].ty)&&te(l,"cy",s)},d(n){n&&(f(e),f(r),f(l))}}}function Rc(a){let e,r=a[1].inProgress&&as(a);return{c(){r&&r.c(),e=be()},l(l){r&&r.l(l),e=be()},m(l,t){r&&r.m(l,t),m(l,e,t)},p(l,[t]){l[1].inProgress?r?r.p(l,t):(r=as(l),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:we,o:we,d(l){l&&f(e),r&&r.d(l)}}}function Cc(a,e,r){let l;const t=on();Ke(a,t,o=>r(1,l=o));let s,n;return a.$$.update=()=>{if(a.$$.dirty&3){const o=structuredClone(l.fromNode);l.isValid?(r(0,n=rl(l.fromNode,l.toNode)),r(2,s=dl({sourceX:n.sx,sourceY:n.sy,sourcePosition:n.sourcePos,targetX:n.tx,targetY:n.ty,targetPosition:n.targetPos})[0])):(o.id="-1",o.measured={width:1,height:1},o.position={x:l.to.x,y:l.to.y},o.internals.positionAbsolute={x:l.to.x,y:l.to.y},r(0,n=rl(l.fromNode,o)),r(2,s=dl({sourceX:n.sx,sourceY:n.sy,sourcePosition:n.sourcePos,targetX:n.tx,targetY:n.ty,targetPosition:n.targetPos})[0]))}},[n,l,s,t]}class Oc extends nt{constructor(e){super(),ot(this,e,Cc,Rc,xe,{})}}function ss(a,e,r){const l=a.slice();return l[11]=e[r],l}function ns(a){let e,r,l,t,s,n,o,i,_,d,h,v,c;const u=a[7].default,b=tt(u,a,a[6],null);let g=Ce(a[3]),w=[];for(let R=0;R<g.length;R+=1)w[R]=os(ss(a,g,R));return{c(){e=Y("div"),r=Y("div"),l=Y("h2"),t=k(a[1]),s=re(),n=Y("p"),o=k(a[2]),i=re(),b&&b.c(),_=re(),d=Y("div");for(let R=0;R<w.length;R+=1)w[R].c();this.h()},l(R){e=X(R,"DIV",{class:!0});var S=me(e);r=X(S,"DIV",{class:!0});var D=me(r);l=X(D,"H2",{});var p=me(l);t=y(p,a[1]),p.forEach(f),s=le(D),n=X(D,"P",{});var C=me(n);o=y(C,a[2]),C.forEach(f),i=le(D),b&&b.l(D),_=le(D),d=X(D,"DIV",{class:!0});var N=me(d);for(let A=0;A<w.length;A+=1)w[A].l(N);N.forEach(f),D.forEach(f),S.forEach(f),this.h()},h(){te(d,"class","options svelte-zbcx3u"),te(r,"class","modal-content center text-center svelte-zbcx3u"),te(e,"class","modal-overlay svelte-zbcx3u")},m(R,S){m(R,e,S),$(e,r),$(r,l),$(l,t),$(r,s),$(r,n),$(n,o),$(r,i),b&&b.m(r,null),$(r,_),$(r,d);for(let D=0;D<w.length;D+=1)w[D]&&w[D].m(d,null);h=!0,v||(c=[pe(r,"click",kt(a[8])),pe(e,"click",a[4])],v=!0)},p(R,S){if((!h||S&2)&&G(t,R[1]),(!h||S&4)&&G(o,R[2]),b&&b.p&&(!h||S&64)&&rt(b,u,R,R[6],h?at(u,R[6],S,null):lt(R[6]),null),S&40){g=Ce(R[3]);let D;for(D=0;D<g.length;D+=1){const p=ss(R,g,D);w[D]?w[D].p(p,S):(w[D]=os(p),w[D].c(),w[D].m(d,null))}for(;D<w.length;D+=1)w[D].d(1);w.length=g.length}},i(R){h||(ie(b,R),h=!0)},o(R){de(b,R),h=!1},d(R){R&&f(e),b&&b.d(R),Ze(w,R),v=!1,_t(c)}}}function os(a){let e,r=a[11].label+"",l,t,s,n;function o(){return a[9](a[11])}return{c(){e=Y("button"),l=k(r),t=re(),this.h()},l(i){e=X(i,"BUTTON",{class:!0});var _=me(e);l=y(_,r),t=le(_),_.forEach(f),this.h()},h(){te(e,"class","svelte-zbcx3u")},m(i,_){m(i,e,_),$(e,l),$(e,t),s||(n=pe(e,"click",o),s=!0)},p(i,_){a=i,_&8&&r!==(r=a[11].label+"")&&G(l,r)},d(i){i&&f(e),s=!1,n()}}}function Ic(a){let e,r,l=a[0]&&ns(a);return{c(){l&&l.c(),e=be()},l(t){l&&l.l(t),e=be()},m(t,s){l&&l.m(t,s),m(t,e,s),r=!0},p(t,[s]){t[0]?l?(l.p(t,s),s&1&&ie(l,1)):(l=ns(t),l.c(),ie(l,1),l.m(e.parentNode,e)):l&&(ct(),de(l,1,1,()=>{l=null}),dt())},i(t){r||(ie(l),r=!0)},o(t){de(l),r=!1},d(t){t&&f(e),l&&l.d(t)}}}function Fc(a,e,r){let{$$slots:l={},$$scope:t}=e,{is_open:s=!1}=e,{title:n=""}=e,{content:o=""}=e,{options:i=[{label:"Cancel",value:"cancel"}]}=e;const _=mr();function d(){r(0,s=!1)}function h(u){_("close_button_modal",u),d()}function v(u){yt.call(this,a,u)}const c=u=>h(u);return a.$$set=u=>{"is_open"in u&&r(0,s=u.is_open),"title"in u&&r(1,n=u.title),"content"in u&&r(2,o=u.content),"options"in u&&r(3,i=u.options),"$$scope"in u&&r(6,t=u.$$scope)},[s,n,o,i,d,h,t,l,v,c]}class Tc extends nt{constructor(e){super(),ot(this,e,Fc,Ic,xe,{is_open:0,title:1,content:2,options:3})}}function is(a,e,r){const l=a.slice();return l[61]=e[r],l[63]=r,l}function Ac(a){let e,r='This is an (very) alpha-level preview release. Please review and file bugs <a href="https://github.com/d3fend/d3fend/issues/14">here. </a>Early stage <a href="./docs">docs.</a>';return{c(){e=Y("div"),e.innerHTML=r,this.h()},l(l){e=X(l,"DIV",{class:!0,"data-svelte-h":!0}),Ne(e)!=="svelte-x19ykg"&&(e.innerHTML=r),this.h()},h(){te(e,"class","font-small")},m(l,t){m(l,e,t)},p:we,d(l){l&&f(e)}}}function fs(a){let e=a[61].message+"",r,l;return{c(){r=k(e),l=Y("br")},l(t){r=y(t,e),l=X(t,"BR",{})},m(t,s){m(t,r,s),m(t,l,s)},p(t,s){s[0]&8&&e!==(e=t[61].message+"")&&G(r,e)},d(t){t&&(f(r),f(l))}}}function Lc(a){let e,r="<code>The tool fixed the errors needed to run but here is list of all import errors and warnings.</code>",l,t,s,n,o,i,_,d,h,v=Ce(a[3]),c=[];for(let u=0;u<v.length;u+=1)c[u]=fs(is(a,v,u));return{c(){e=Y("div"),e.innerHTML=r,l=re(),t=Y("br"),s=re(),n=Y("br"),o=re();for(let u=0;u<c.length;u+=1)c[u].c();i=re(),_=Y("br"),d=re(),h=Y("br")},l(u){e=X(u,"DIV",{"data-svelte-h":!0}),Ne(e)!=="svelte-7el432"&&(e.innerHTML=r),l=le(u),t=X(u,"BR",{}),s=le(u),n=X(u,"BR",{}),o=le(u);for(let b=0;b<c.length;b+=1)c[b].l(u);i=le(u),_=X(u,"BR",{}),d=le(u),h=X(u,"BR",{})},m(u,b){m(u,e,b),m(u,l,b),m(u,t,b),m(u,s,b),m(u,n,b),m(u,o,b);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(u,b);m(u,i,b),m(u,_,b),m(u,d,b),m(u,h,b)},p(u,b){if(b[0]&8){v=Ce(u[3]);let g;for(g=0;g<v.length;g+=1){const w=is(u,v,g);c[g]?c[g].p(w,b):(c[g]=fs(w),c[g].c(),c[g].m(i.parentNode,i))}for(;g<c.length;g+=1)c[g].d(1);c.length=v.length}},d(u){u&&(f(e),f(l),f(t),f(s),f(n),f(o),f(i),f(_),f(d),f(h)),Ze(c,u)}}}function jc(a){let e;return{c(){e=k("Please only load models from URLs you trust!")},l(r){e=y(r,"Please only load models from URLs you trust!")},m(r,l){m(r,e,l)},d(r){r&&f(e)}}}function qc(a){let e,r,l,t,s,n,o,i,_,d,h;return d=new pr({props:{$$slots:{default:[jc]},$$scope:{ctx:a}}}),{c(){e=Y("br"),r=re(),l=Y("code"),t=k(a[2]),s=re(),n=Y("br"),o=re(),i=Y("br"),_=re(),Oe(d.$$.fragment),this.h()},l(v){e=X(v,"BR",{}),r=le(v),l=X(v,"CODE",{class:!0});var c=me(l);t=y(c,a[2]),c.forEach(f),s=le(v),n=X(v,"BR",{}),o=le(v),i=X(v,"BR",{}),_=le(v),Ie(d.$$.fragment,v),this.h()},h(){te(l,"class","center text-center")},m(v,c){m(v,e,c),m(v,r,c),m(v,l,c),$(l,t),m(v,s,c),m(v,n,c),m(v,o,c),m(v,i,c),m(v,_,c),Fe(d,v,c),h=!0},p(v,c){(!h||c[0]&4)&&G(t,v[2]);const u={};c[2]&4&&(u.$$scope={dirty:c,ctx:v}),d.$set(u)},i(v){h||(ie(d.$$.fragment,v),h=!0)},o(v){de(d.$$.fragment,v),h=!1},d(v){v&&(f(e),f(r),f(l),f(s),f(n),f(o),f(i),f(_)),Te(d,v)}}}function Uc(a){let e;return{c(){e=k("Please only load models from URLs you trust!")},l(r){e=y(r,"Please only load models from URLs you trust!")},m(r,l){m(r,e,l)},d(r){r&&f(e)}}}function $c(a){let e,r,l,t,s,n;return s=new pr({props:{$$slots:{default:[Uc]},$$scope:{ctx:a}}}),{c(){e=Y("br"),r=re(),l=Y("br"),t=re(),Oe(s.$$.fragment)},l(o){e=X(o,"BR",{}),r=le(o),l=X(o,"BR",{}),t=le(o),Ie(s.$$.fragment,o)},m(o,i){m(o,e,i),m(o,r,i),m(o,l,i),m(o,t,i),Fe(s,o,i),n=!0},p(o,i){const _={};i[2]&4&&(_.$$scope={dirty:i,ctx:o}),s.$set(_)},i(o){n||(ie(s.$$.fragment,o),n=!0)},o(o){de(s.$$.fragment,o),n=!1},d(o){o&&(f(e),f(r),f(l),f(t)),Te(s,o)}}}function us(a){let e,r,l,t;return e=new pr({props:{alert_type:"warning",$$slots:{default:[Vc]},$$scope:{ctx:a}}}),{c(){Oe(e.$$.fragment),r=re(),l=Y("br")},l(s){Ie(e.$$.fragment,s),r=le(s),l=X(s,"BR",{})},m(s,n){Fe(e,s,n),m(s,r,n),m(s,l,n),t=!0},i(s){t||(ie(e.$$.fragment,s),t=!0)},o(s){de(e.$$.fragment,s),t=!1},d(s){s&&(f(r),f(l)),Te(e,s)}}}function Vc(a){let e;return{c(){e=k("Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},l(r){e=y(r,"Please note this is a limited sharing capability for very small CAD models. Large models may exceed URL length limitations in browsers and messaging apps.")},m(r,l){m(r,e,l)},d(r){r&&f(e)}}}function zc(a){let e,r,l,t,s=a[13].length+"",n,o,i,_,d,h,v,c,u,b,g="copy",w,R,S,D=a[13].length>2048&&us(a);return{c(){D&&D.c(),e=re(),r=Y("div"),l=Y("code"),t=k("The encoded model has a string length of "),n=k(s),o=k(" characters."),i=re(),_=Y("p"),d=Y("button"),h=Y("a"),v=k("Share URL"),c=re(),u=Y("span"),b=Y("button"),b.textContent=g,this.h()},l(p){D&&D.l(p),e=le(p),r=X(p,"DIV",{});var C=me(r);l=X(C,"CODE",{});var N=me(l);t=y(N,"The encoded model has a string length of "),n=y(N,s),o=y(N," characters."),N.forEach(f),C.forEach(f),i=le(p),_=X(p,"P",{});var A=me(_);d=X(A,"BUTTON",{class:!0});var O=me(d);h=X(O,"A",{href:!0});var T=me(h);v=y(T,"Share URL"),T.forEach(f),O.forEach(f),c=le(A),u=X(A,"SPAN",{});var E=me(u);b=X(E,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(b)!=="svelte-1uua65l"&&(b.textContent=g),E.forEach(f),A.forEach(f),this.h()},h(){te(h,"href",a[14]),te(d,"class","svelte-1mnmffp"),te(b,"class","svelte-1mnmffp")},m(p,C){D&&D.m(p,C),m(p,e,C),m(p,r,C),$(r,l),$(l,t),$(l,n),$(l,o),m(p,i,C),m(p,_,C),$(_,d),$(d,h),$(h,v),$(_,c),$(_,u),$(u,b),w=!0,R||(S=pe(b,"click",a[37]),R=!0)},p(p,C){p[13].length>2048?D?C[0]&8192&&ie(D,1):(D=us(p),D.c(),ie(D,1),D.m(e.parentNode,e)):D&&(ct(),de(D,1,1,()=>{D=null}),dt()),(!w||C[0]&8192)&&s!==(s=p[13].length+"")&&G(n,s),(!w||C[0]&16384)&&te(h,"href",p[14])},i(p){w||(ie(D),w=!0)},o(p){de(D),w=!1},d(p){p&&(f(e),f(r),f(i),f(_)),D&&D.d(p),R=!1,S()}}}function cs(a){let e,r,l,t,s,n=a[4]>1&&ds();return{c(){e=Y("button"),r=k(a[4]),l=k(" import alert"),n&&n.c(),this.h()},l(o){e=X(o,"BUTTON",{class:!0});var i=me(e);r=y(i,a[4]),l=y(i," import alert"),n&&n.l(i),i.forEach(f),this.h()},h(){te(e,"class","svelte-1mnmffp")},m(o,i){m(o,e,i),$(e,r),$(e,l),n&&n.m(e,null),t||(s=pe(e,"click",a[22]),t=!0)},p(o,i){i[0]&16&&G(r,o[4]),o[4]>1?n||(n=ds(),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},d(o){o&&f(e),n&&n.d(),t=!1,s()}}}function ds(a){let e;return{c(){e=k("s")},l(r){e=y(r,"s")},m(r,l){m(r,e,l)},d(r){r&&f(e)}}}function hs(a){let e,r,l,t,s,n,o;return l=new Kn({props:{display:"inline"}}),{c(){e=Y("span"),r=Y("span"),Oe(l.$$.fragment),t=re(),s=Y("span"),n=k(a[16]),this.h()},l(i){e=X(i,"SPAN",{class:!0});var _=me(e);r=X(_,"SPAN",{});var d=me(r);Ie(l.$$.fragment,d),d.forEach(f),t=le(_),s=X(_,"SPAN",{});var h=me(s);n=y(h,a[16]),h.forEach(f),_.forEach(f),this.h()},h(){te(e,"class","right")},m(i,_){m(i,e,_),$(e,r),Fe(l,r,null),$(e,t),$(e,s),$(s,n),o=!0},p(i,_){(!o||_[0]&65536)&&G(n,i[16])},i(i){o||(ie(l.$$.fragment,i),o=!0)},o(i){de(l.$$.fragment,i),o=!1},d(i){i&&f(e),Te(l)}}}function _s(a){let e,r;return e=new uc({props:{onClick:a[31],id:a[8].id,top:a[8].top,left:a[8].left,right:a[8].right,bottom:a[8].bottom}}),{c(){Oe(e.$$.fragment)},l(l){Ie(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,t){const s={};t[0]&256&&(s.id=l[8].id),t[0]&256&&(s.top=l[8].top),t[0]&256&&(s.left=l[8].left),t[0]&256&&(s.right=l[8].right),t[0]&256&&(s.bottom=l[8].bottom),e.$set(s)},i(l){r||(ie(e.$$.fragment,l),r=!0)},o(l){de(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function Mc(a){let e,r,l,t,s,n,o;e=new Jn({props:{position:"top-left"}}),l=new $n({props:{variant:Vn.Dots}});let i=a[8]&&_s(a);return n=new zn({props:{position:"top-right"}}),{c(){Oe(e.$$.fragment),r=re(),Oe(l.$$.fragment),t=re(),i&&i.c(),s=re(),Oe(n.$$.fragment)},l(_){Ie(e.$$.fragment,_),r=le(_),Ie(l.$$.fragment,_),t=le(_),i&&i.l(_),s=le(_),Ie(n.$$.fragment,_)},m(_,d){Fe(e,_,d),m(_,r,d),Fe(l,_,d),m(_,t,d),i&&i.m(_,d),m(_,s,d),Fe(n,_,d),o=!0},p(_,d){_[8]?i?(i.p(_,d),d[0]&256&&ie(i,1)):(i=_s(_),i.c(),ie(i,1),i.m(s.parentNode,s)):i&&(ct(),de(i,1,1,()=>{i=null}),dt())},i(_){o||(ie(e.$$.fragment,_),ie(l.$$.fragment,_),ie(i),ie(n.$$.fragment,_),o=!0)},o(_){de(e.$$.fragment,_),de(l.$$.fragment,_),de(i),de(n.$$.fragment,_),o=!1},d(_){_&&(f(r),f(t),f(s)),Te(e,_),Te(l,_),i&&i.d(_),Te(n,_)}}}function Bc(a){let e,r;return e=new Oc({props:{slot:"connectionLine"}}),{c(){Oe(e.$$.fragment)},l(l){Ie(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p:we,i(l){r||(ie(e.$$.fragment,l),r=!0)},o(l){de(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function Hc(a){let e,r,l,t,s,n;return r=new kc({}),t=new Un({props:{nodes:nr,nodeTypes:un,edges:Rr,edgeTypes:cn,fitView:!0,defaultEdgeOptions:a[19],maxZoom:2,minZoom:.3,$$slots:{connectionLine:[Bc],default:[Mc]},$$scope:{ctx:a}}}),t.$on("dragover",a[25]),t.$on("drop",a[27]),t.$on("connect",a[26]),t.$on("nodecontextmenu",a[30]),t.$on("paneclick",a[31]),t.$on("onedgecreate",Jc),{c(){e=Y("div"),Oe(r.$$.fragment),l=re(),Oe(t.$$.fragment),this.h()},l(o){e=X(o,"DIV",{slot:!0,id:!0,class:!0});var i=me(e);Ie(r.$$.fragment,i),l=le(i),Ie(t.$$.fragment,i),i.forEach(f),this.h()},h(){te(e,"slot","flow"),te(e,"id","slotted-flow"),te(e,"class","svelte-1mnmffp"),ms(()=>a[42].call(e))},m(o,i){m(o,e,i),Fe(r,e,null),$(e,l),Fe(t,e,null),s=wn(e,a[42].bind(e)),n=!0},p(o,i){const _={};i[0]&256|i[2]&4&&(_.$$scope={dirty:i,ctx:o}),t.$set(_)},i(o){n||(ie(r.$$.fragment,o),ie(t.$$.fragment,o),n=!0)},o(o){de(r.$$.fragment,o),de(t.$$.fragment,o),n=!1},d(o){o&&f(e),Te(r),Te(t),s()}}}function Qc(a){let e,r,l;return r=new dn({}),{c(){e=Y("div"),Oe(r.$$.fragment),this.h()},l(t){e=X(t,"DIV",{slot:!0,class:!0});var s=me(e);Ie(r.$$.fragment,s),s.forEach(f),this.h()},h(){te(e,"slot","drawer"),te(e,"class","side-panel close svelte-1mnmffp")},m(t,s){m(t,e,s),Fe(r,e,null),l=!0},p:we,i(t){l||(ie(r.$$.fragment,t),l=!0)},o(t){de(r.$$.fragment,t),l=!1},d(t){t&&f(e),Te(r)}}}function Gc(a){let e,r,l,t,s,n,o,i,_,d,h,v,c,u,b,g,w,R="Load",S,D,p="Merge",C,N,A="Clear",O,T,E="Save",I,P,F,K="Save As...",x,se="Save As JSON...",B,H="Save As Turtle...",V,U="Save As D3FEND Extension...",J,L,Q="Share",ke,Pe,ne,_e,fe,ce,Re,$e,Z,j,ae,je,Me;function Be(oe){a[35](oe)}let qe={title:a[0].title,content:a[0].content,options:a[0].options,$$slots:{default:[qc]},$$scope:{ctx:a}};a[0].is_open!==void 0&&(qe.is_open=a[0].is_open),e=new Za({props:qe}),Ge.push(()=>pt(e,"is_open",Be)),e.$on("optionSelected",a[17]);function vt(oe){a[36](oe)}let St={title:a[1].title,content:a[1].content,options:a[1].options,$$slots:{default:[$c]},$$scope:{ctx:a}};a[1].is_open!==void 0&&(St.is_open=a[1].is_open),t=new Za({props:St}),Ge.push(()=>pt(t,"is_open",vt)),t.$on("optionSelected",a[18]);function We(oe){a[38](oe)}let Je={title:"Share this model with a URL",$$slots:{default:[zc]},$$scope:{ctx:a}};a[12]!==void 0&&(Je.is_open=a[12]),o=new vc({props:Je}),Ge.push(()=>pt(o,"is_open",We));function ht(oe){a[39](oe)}let he={};a[7]!==void 0&&(he.selectedFile=a[7]),h=new Nc({props:he}),Ge.push(()=>pt(h,"selectedFile",ht)),h.$on("fileSelected",a[28]);let Ee=a[4]&&cs(a),ge=a[16]&&hs(a);return j=new fn({props:{$$slots:{drawer:[Qc],flow:[Hc]},$$scope:{ctx:a}}}),{c(){Oe(e.$$.fragment),l=re(),Oe(t.$$.fragment),n=re(),Oe(o.$$.fragment),_=re(),d=Y("div"),Oe(h.$$.fragment),c=re(),u=Y("br"),b=re(),g=Y("div"),w=Y("button"),w.textContent=R,S=re(),D=Y("button"),D.textContent=p,C=re(),N=Y("button"),N.textContent=A,O=re(),T=Y("button"),T.textContent=E,I=re(),P=Y("select"),F=Y("option"),F.textContent=K,x=Y("option"),x.textContent=se,B=Y("option"),B.textContent=H,V=Y("option"),V.textContent=U,J=re(),L=Y("button"),L.textContent=Q,ke=re(),Pe=Y("button"),ne=k("CAD Embed"),fe=k(`
     filename:   `),ce=Y("input"),Re=re(),Ee&&Ee.c(),$e=re(),ge&&ge.c(),Z=re(),Oe(j.$$.fragment),this.h()},l(oe){Ie(e.$$.fragment,oe),l=le(oe),Ie(t.$$.fragment,oe),n=le(oe),Ie(o.$$.fragment,oe),_=le(oe),d=X(oe,"DIV",{class:!0});var ve=me(d);Ie(h.$$.fragment,ve),ve.forEach(f),c=le(oe),u=X(oe,"BR",{}),b=le(oe),g=X(oe,"DIV",{id:!0,class:!0});var De=me(g);w=X(De,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(w)!=="svelte-r4end6"&&(w.textContent=R),S=le(De),D=X(De,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(D)!=="svelte-1s1l97g"&&(D.textContent=p),C=le(De),N=X(De,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(N)!=="svelte-1o4uly3"&&(N.textContent=A),O=le(De),T=X(De,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(T)!=="svelte-qm8vdx"&&(T.textContent=E),I=le(De),P=X(De,"SELECT",{class:!0});var et=me(P);F=X(et,"OPTION",{"data-svelte-h":!0}),Ne(F)!=="svelte-hmrlsb"&&(F.textContent=K),x=X(et,"OPTION",{"data-svelte-h":!0}),Ne(x)!=="svelte-1q30tr1"&&(x.textContent=se),B=X(et,"OPTION",{"data-svelte-h":!0}),Ne(B)!=="svelte-pf55hp"&&(B.textContent=H),V=X(et,"OPTION",{"data-svelte-h":!0}),Ne(V)!=="svelte-43fn33"&&(V.textContent=U),et.forEach(f),J=le(De),L=X(De,"BUTTON",{class:!0,"data-svelte-h":!0}),Ne(L)!=="svelte-mqt2ui"&&(L.textContent=Q),ke=le(De),Pe=X(De,"BUTTON",{class:!0});var bt=me(Pe);ne=y(bt,"CAD Embed"),bt.forEach(f),fe=y(De,`
     filename:   `),ce=X(De,"INPUT",{style:!0,type:!0}),Re=le(De),Ee&&Ee.l(De),$e=le(De),ge&&ge.l(De),De.forEach(f),Z=le(oe),Ie(j.$$.fragment,oe),this.h()},h(){te(d,"class","toolbar-examples"),te(w,"class","svelte-1mnmffp"),te(D,"class","svelte-1mnmffp"),te(N,"class","svelte-1mnmffp"),te(T,"class","svelte-1mnmffp"),F.__value="",Jt(F,F.__value),x.__value="json",Jt(x,x.__value),B.__value="turtle",Jt(B,B.__value),V.__value="extension",Jt(V,V.__value),te(P,"class","save-as-dropdown svelte-1mnmffp"),a[6]===void 0&&ms(()=>a[40].call(P)),te(L,"class"," svelte-1mnmffp"),te(Pe,"class"," svelte-1mnmffp"),Pe.disabled=_e=!a[15].length,Qe(ce,"width","275px"),te(ce,"type","text"),te(g,"id","toolbar"),te(g,"class","svelte-1mnmffp")},m(oe,ve){Fe(e,oe,ve),m(oe,l,ve),Fe(t,oe,ve),m(oe,n,ve),Fe(o,oe,ve),m(oe,_,ve),m(oe,d,ve),Fe(h,d,null),m(oe,c,ve),m(oe,u,ve),m(oe,b,ve),m(oe,g,ve),$(g,w),$(g,S),$(g,D),$(g,C),$(g,N),$(g,O),$(g,T),$(g,I),$(g,P),$(P,F),$(P,x),$(P,B),$(P,V),ol(P,a[6],!0),$(g,J),$(g,L),$(g,ke),$(g,Pe),$(Pe,ne),$(g,fe),$(g,ce),Jt(ce,a[5]),$(g,Re),Ee&&Ee.m(g,null),$(g,$e),ge&&ge.m(g,null),m(oe,Z,ve),Fe(j,oe,ve),ae=!0,je||(Me=[pe(w,"click",a[23]),pe(D,"click",a[24]),pe(N,"click",a[29]),pe(T,"click",a[20]),pe(P,"change",a[40]),pe(P,"change",a[21]),pe(L,"click",a[32]),pe(Pe,"click",a[33]),pe(ce,"input",a[41])],je=!0)},p(oe,ve){const De={};ve[0]&1&&(De.title=oe[0].title),ve[0]&1&&(De.content=oe[0].content),ve[0]&1&&(De.options=oe[0].options),ve[0]&4|ve[2]&4&&(De.$$scope={dirty:ve,ctx:oe}),!r&&ve[0]&1&&(r=!0,De.is_open=oe[0].is_open,mt(()=>r=!1)),e.$set(De);const et={};ve[0]&2&&(et.title=oe[1].title),ve[0]&2&&(et.content=oe[1].content),ve[0]&2&&(et.options=oe[1].options),ve[2]&4&&(et.$$scope={dirty:ve,ctx:oe}),!s&&ve[0]&2&&(s=!0,et.is_open=oe[1].is_open,mt(()=>s=!1)),t.$set(et);const bt={};ve[0]&24576|ve[2]&4&&(bt.$$scope={dirty:ve,ctx:oe}),!i&&ve[0]&4096&&(i=!0,bt.is_open=oe[12],mt(()=>i=!1)),o.$set(bt);const Et={};!v&&ve[0]&128&&(v=!0,Et.selectedFile=oe[7],mt(()=>v=!1)),h.$set(Et),ve[0]&64&&ol(P,oe[6]),(!ae||ve[0]&32768&&_e!==(_e=!oe[15].length))&&(Pe.disabled=_e),ve[0]&32&&ce.value!==oe[5]&&Jt(ce,oe[5]),oe[4]?Ee?Ee.p(oe,ve):(Ee=cs(oe),Ee.c(),Ee.m(g,$e)):Ee&&(Ee.d(1),Ee=null),oe[16]?ge?(ge.p(oe,ve),ve[0]&65536&&ie(ge,1)):(ge=hs(oe),ge.c(),ie(ge,1),ge.m(g,null)):ge&&(ct(),de(ge,1,1,()=>{ge=null}),dt());const Pt={};ve[0]&1792|ve[2]&4&&(Pt.$$scope={dirty:ve,ctx:oe}),j.$set(Pt)},i(oe){ae||(ie(e.$$.fragment,oe),ie(t.$$.fragment,oe),ie(o.$$.fragment,oe),ie(h.$$.fragment,oe),ie(ge),ie(j.$$.fragment,oe),ae=!0)},o(oe){de(e.$$.fragment,oe),de(t.$$.fragment,oe),de(o.$$.fragment,oe),de(h.$$.fragment,oe),de(ge),de(j.$$.fragment,oe),ae=!1},d(oe){oe&&(f(l),f(n),f(_),f(d),f(c),f(u),f(b),f(g),f(Z)),Te(e,oe),Te(t,oe),Te(o,oe),Te(h),Ee&&Ee.d(),ge&&ge.d(),Te(j,oe),je=!1,_t(Me)}}}function Kc(a){let e,r,l,t,s,n,o='D3FEND <span class="snakes"></span> <span class="CAD"><span style="color:#e62929;">C</span><span class="A svelte-1mnmffp" style="color:white;text-border:1px;">A</span><span style="color:blue;">D</span></span>',i,_,d,h,v,c,u,b;e=new Gn({props:{title:"D3FEND CAD Tool",og_title:"D3FEND CAD Tool",og_description:"Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios",og_type:"app",og_url:"",og_image:""}}),_=new pr({props:{alert_type:"warning",$$slots:{default:[Ac]},$$scope:{ctx:a}}});function g(R){a[34](R)}let w={title:a[4]+" import alerts",$$slots:{default:[Lc]},$$scope:{ctx:a}};return a[11]!==void 0&&(w.is_open=a[11]),h=new Tc({props:w}),Ge.push(()=>pt(h,"is_open",g)),u=new Ec({props:{position:"right",$$slots:{default:[Gc]},$$scope:{ctx:a}}}),{c(){Oe(e.$$.fragment),r=re(),l=Y("div"),t=Y("div"),s=Y("div"),n=Y("h1"),n.innerHTML=o,i=re(),Oe(_.$$.fragment),d=re(),Oe(h.$$.fragment),c=re(),Oe(u.$$.fragment),this.h()},l(R){Ie(e.$$.fragment,R),r=le(R),l=X(R,"DIV",{class:!0});var S=me(l);t=X(S,"DIV",{style:!0});var D=me(t);s=X(D,"DIV",{style:!0});var p=me(s);n=X(p,"H1",{class:!0,title:!0,"data-svelte-h":!0}),Ne(n)!=="svelte-xxt2o6"&&(n.innerHTML=o),i=le(p),Ie(_.$$.fragment,p),p.forEach(f),D.forEach(f),S.forEach(f),d=le(R),Ie(h.$$.fragment,R),c=le(R),Ie(u.$$.fragment,R),this.h()},h(){te(n,"class","fancy-font svelte-1mnmffp"),te(n,"title","Cyber Attack-Defense Utility for Capturing Engagements and Understandable Scenarios"),Qe(s,"text-align","center"),Qe(s,"flex-grow","1"),Qe(t,"display","flex"),Qe(t,"just-content","space-between"),Qe(t,"align-items","center"),te(l,"class","title-egg svelte-1mnmffp")},m(R,S){Fe(e,R,S),m(R,r,S),m(R,l,S),$(l,t),$(t,s),$(s,n),$(s,i),Fe(_,s,null),m(R,d,S),Fe(h,R,S),m(R,c,S),Fe(u,R,S),b=!0},p(R,S){const D={};S[2]&4&&(D.$$scope={dirty:S,ctx:R}),_.$set(D);const p={};S[0]&16&&(p.title=R[4]+" import alerts"),S[0]&8|S[2]&4&&(p.$$scope={dirty:S,ctx:R}),!v&&S[0]&2048&&(v=!0,p.is_open=R[11],mt(()=>v=!1)),h.$set(p);const C={};S[0]&129015|S[2]&4&&(C.$$scope={dirty:S,ctx:R}),u.$set(C)},i(R){b||(ie(e.$$.fragment,R),ie(_.$$.fragment,R),ie(h.$$.fragment,R),ie(u.$$.fragment,R),b=!0)},o(R){de(e.$$.fragment,R),de(_.$$.fragment,R),de(h.$$.fragment,R),de(u.$$.fragment,R),b=!1},d(R){R&&(f(r),f(l),f(d),f(c)),Te(e,R),Te(_),Te(h,R),Te(u,R)}}}function Jc(a){console.log(a),console.log(a)}function Yc(a,e,r){let l,t,s,n;Ke(a,Sn,he=>r(44,l=he)),Ke(a,Rr,he=>r(45,t=he)),Ke(a,nr,he=>r(15,s=he)),Ke(a,gt,he=>r(16,n=he));var o=this&&this.__awaiter||function(he,Ee,ge,oe){function ve(De){return De instanceof ge?De:new ge(function(et){et(De)})}return new(ge||(ge=Promise))(function(De,et){function bt(Ft){try{Pt(oe.next(Ft))}catch(Qt){et(Qt)}}function Et(Ft){try{Pt(oe.throw(Ft))}catch(Qt){et(Qt)}}function Pt(Ft){Ft.done?De(Ft.value):ve(Ft.value).then(bt,Et)}Pt((oe=oe.apply(he,Ee||[])).next())})};const i=new wf({useDefaults:!0,allErrors:!0});let _={is_open:!1,title:"Confirmation to load remote model from URL",content:"This page is instructing D3FEND to remotely load a CAD model from this URL:",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},d={is_open:!1,title:"Confirmation to load remote model from compressed URL",content:"This page is instructing D3FEND to load a CAD model from this URL",options:[{label:"Cancel",value:"cancel"},{label:"Load Model",value:"load"}]},h;l.url.searchParams.get("load")&&(h=l.url.searchParams.get("load"),_.is_open=!0),l.url.searchParams.get("loadg")&&(d.is_open=!0);function v(he){const Ee=he.detail;Ee.value==="load"?(gt.add("loading remote URL"),K(h),gt.clear()):Ee.value}function c(he){const Ee=he.detail;if(Ee.value==="load"){gt.add("loading graph from URL");const ge=l.url.searchParams.get("loadg"),oe=_l.uncrush(ge);let ve=JSON.parse(oe);A(ve),gt.clear()}else Ee.value}qr(()=>{gt.add("Mounting app...");try{Mn.initialize(),gt.clear()}catch(he){console.error("Failed to initialize Oxigraph in +layout.svelte",he),he.message}});let u={type:"editableEdge",data:{label:void 0},markerEnd:{type:qn.ArrowClosed}},b,g,w="d3fend-cad.json",R="";function S(){const he=JSON.stringify({nodes:s,edges:t},null,4),Ee=new Blob([he],{type:"application/json"}),ge=window.URL.createObjectURL(Ee),oe=document.createElement("a");oe.href=ge,oe.download=w,r(4,g=0),document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),window.URL.revokeObjectURL(ge)}function D(){console.log("Saving As D3FEND Ontology Extension..."),gt.add("Generating D3FEND Ontology Extension in Turtle file");let he=prompt("Enter extension name to save as D3FEND Ontology Extension Turtle file as d3fend-cad-ext-<extension-name-here>.ttl","my-extension");const Ee="d3fend-cad-ext-"+he+".ttl";Qn(he).then(ge=>{gt.clear();const oe=new Blob([ge],{type:"text/turtle"}),ve=window.URL.createObjectURL(oe),De=document.createElement("a");De.href=ve,Ee&&(De.download=Ee,document.body.appendChild(De),De.click(),document.body.removeChild(De)),window.URL.revokeObjectURL(ve)}).catch(ge=>{console.error("Error generating D3FEND Ontology Extension in Turtle: ",ge)})}function p(){R==="json"?N():R==="turtle"?C():R==="extension"&&D(),r(6,R="")}function C(){gt.add("generating ttl file"),console.log("!!! Turtle export engaged !!!"),Hn().then(he=>{gt.clear();const Ee=new Blob([he],{type:"text/turtle"}),ge=window.URL.createObjectURL(Ee),oe=document.createElement("a");oe.href=ge;let ve=prompt("Enter filename to save as Turtle file",w.replace("json","ttl"));r(4,g=0),ve&&(oe.download=ve,document.body.appendChild(oe),oe.click(),document.body.removeChild(oe)),window.URL.revokeObjectURL(ge)}).catch(he=>{console.error("Error serializing graph to Turtle: ",he)})}function N(){const he=JSON.stringify({nodes:s,edges:t},null,4),Ee=new Blob([he],{type:"application/json"}),ge=window.URL.createObjectURL(Ee),oe=document.createElement("a");oe.href=ge;let ve=prompt("Enter filename to save as JSON file",w);r(4,g=0),r(5,w=ve),ve&&(oe.download=ve,document.body.appendChild(oe),oe.click(),document.body.removeChild(oe)),window.URL.revokeObjectURL(ge)}function A(he){try{const Ee=i.compile(il),ge=Ee(he);r(3,b=Ee.errors),ge||(he=O(Ee.errors,he));const oe=he.nodes,ve=he.edges;gt.add("loading graph from data..."),yr(oe,ve),I(),window.addEventListener("beforeunload",De=>{console.log("User is leaving the page"),De.preventDefault(),De.returnValue=""}),gt.clear()}catch(Ee){console.error("Error parsing JSON:",Ee)}}function O(he,Ee){r(4,g=he.length);for(const ge of he)if(ge.params.missingProperty=="user_properties"){let oe=ge.dataPath.replace(/\D/g,"");oe=parseInt(oe),Ee.nodes[oe].data.user_properties=[]}return Ee}function T(){r(11,ce=!0)}const{screenToFlowPosition:E,fitView:I}=Xn();function P(he){const Ee=he.target.files[0];if(Ee){const ge=new FileReader;ge.onload=oe=>{if(typeof oe.target.result=="string"){console.log(oe.target.result),r(5,w=Ee.name),r(5,w=Ee.name);try{let ve=JSON.parse(oe.target.result);const De=i.compile(il),et=De(ve);r(3,b=De.errors),et||(ve=O(De.errors,ve));const bt=ve.nodes,Et=ve.edges;yr(bt,Et),I(),window.addEventListener("beforeunload",Pt=>{console.log("User is leaving the page"),Pt.preventDefault(),Pt.returnValue=""})}catch(ve){console.error("Error parsing JSON:",ve)}}else console.error("File content is not a string.")},ge.onerror=()=>{console.error("Error reading file:",ge.error)},ge.readAsText(Ee)}}function F(he){const Ee=he.target.files[0];if(Ee){const ge=new FileReader;ge.onload=oe=>{if(typeof oe.target.result=="string"){console.log(oe.target.result);try{const ve=JSON.parse(oe.target.result);nr.set([...s,...ve.nodes]),Rr.set([...t,...ve.edges]),alert(` added ${ve.nodes.length} nodes and ${ve.edges.length} edges to the current graph `)}catch(ve){console.error("Error parsing JSON:",ve),alert(`Error parsing JSON:", ${ve}`)}}else console.error("File content is not a string."),alert("File content is not a string.")},ge.onerror=()=>{console.error("Error reading file:",ge.error),alert(`Error reading file: ${ge.error}`)},ge.readAsText(Ee)}}function K(he){return o(this,void 0,void 0,function*(){if(he)try{const ge=yield(yield fetch(he)).json(),oe=ge.nodes,ve=ge.edges;yr(oe,ve),I()}catch(Ee){console.error("Error parsing JSON:",Ee)}})}function x(){const he=document.createElement("input");he.type="file",he.accept=".json",he.onchange=Ee=>{P(Ee)},he.click()}function se(){const he=document.createElement("input");he.type="file",he.accept=".json",he.onchange=Ee=>{F(Ee)},he.click()}const B=he=>{he.preventDefault(),he.dataTransfer&&(he.dataTransfer.dropEffect="move")},H=he=>console.log("handle onConnect",he),V=he=>{if(he.preventDefault(),!he.dataTransfer)return null;const Ee=he.dataTransfer.getData("application/svelteflow"),ge=E({x:he.clientX,y:he.clientY}),oe={id:`${Math.random()}`,type:Ee,position:ge,data:{label:null,sequence:"0",user_properties:[]},origin:[.5,0]};s.push(oe),nr.set(s)};function U(he){return o(this,void 0,void 0,function*(){const Ee=he.detail;r(5,w=Ee);try{const ge=yield fetch(`/resources/cad/examples/${Ee}`);if(!ge.ok)throw new Error(`HTTP error! status: ${ge.status}`);const oe=yield ge.json();console.log("Selected file contents:",oe),A(oe)}catch(ge){console.error("Error fetching JSON file:",ge)}})}let J;function L(){Bn(),r(4,g=0),r(7,J="Example Graphs"),r(5,w="d3fend-cad.json")}let Q,ke,Pe;function ne({detail:{event:he,node:Ee}}){he.preventDefault();let ge=50;console.log({Y:he.clientY,X:he.clientX,height:Pe,width:ke}),r(8,Q={id:Ee.id,top:he.clientY<Pe-ge?he.clientY:void 0,left:he.clientX<ke-ge?he.clientX:void 0,right:he.clientX>=ke-ge?ke-he.clientX:void 0,bottom:he.clientY>=Pe-ge?Pe-he.clientY:void 0}),console.log({menu:Q,event:he,node:Ee}),fe({detail:{event:he,node:Ee}})}function _e(){r(8,Q=null),hl.set(null)}function fe({detail:{event:he,node:Ee}}){hl.set(Ee)}let ce=!1,Re=!1,$e,Z;function j(){gt.add("compressing graph to string..."),r(12,Re=!0);const he=_l.crush(JSON.stringify({nodes:s,edges:t}));r(13,$e=encodeURIComponent(he)),r(14,Z=l.url.origin+`/cad/?loadg=${$e}`),gt.clear()}function ae(){Dn("/cad-view/")}function je(he){ce=he,r(11,ce)}function Me(he){a.$$.not_equal(_.is_open,he)&&(_.is_open=he,r(0,_))}function Be(he){a.$$.not_equal(d.is_open,he)&&(d.is_open=he,r(1,d))}const qe=()=>Rn(Z);function vt(he){Re=he,r(12,Re)}function St(he){J=he,r(7,J)}function We(){R=Pn(this),r(6,R)}function Je(){w=this.value,r(5,w)}function ht(){ke=this.clientWidth,Pe=this.clientHeight,r(9,ke),r(10,Pe)}return[_,d,h,b,g,w,R,J,Q,ke,Pe,ce,Re,$e,Z,s,n,v,c,u,S,p,T,x,se,B,H,V,U,L,ne,_e,j,ae,je,Me,Be,qe,vt,St,We,Je,ht]}class Xc extends nt{constructor(e){super(),ot(this,e,Yc,Kc,xe,{},null,[-1,-1,-1])}}function Zc(a){let e,r;return e=new Xc({}),{c(){Oe(e.$$.fragment)},l(l){Ie(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},i(l){r||(ie(e.$$.fragment,l),r=!0)},o(l){de(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function Wc(a){let e,r;return e=new hn({props:{$$slots:{default:[Zc]},$$scope:{ctx:a}}}),{c(){Oe(e.$$.fragment)},l(l){Ie(e.$$.fragment,l)},m(l,t){Fe(e,l,t),r=!0},p(l,[t]){const s={};t&4&&(s.$$scope={dirty:t,ctx:l}),e.$set(s)},i(l){r||(ie(e.$$.fragment,l),r=!0)},o(l){de(e.$$.fragment,l),r=!1},d(l){Te(e,l)}}}function xc(a,e,r){let l,{data:t}=e;return a.$$set=s=>{"data"in s&&r(0,t=s.data)},a.$$.update=()=>{a.$$.dirty&1&&r(1,l=t.remote_d3fend_tree?t.remote_d3fend_tree.map(s=>({...s,children:vs(s.children,s["rdfs:label"])})):[]),a.$$.dirty&3&&(_n.set(l),vn.set(t.attack),mn.set(t.dao),pn.set(t.events),gn.set(t.weaknesses),bn.set(t.properties),En.set(t.digital_information))},[t,l]}class Pd extends nt{constructor(e){super(),ot(this,e,xc,Wc,xe,{data:0})}}export{Pd as component,Ed as universal};
